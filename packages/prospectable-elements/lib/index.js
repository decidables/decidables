!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).prospectableElements=e()}(function(){return function r(i,o,a){function s(t,e){if(!o[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=o[t]={exports:{}},i[t][0].call(n.exports,function(e){return s(i[t][1][e]||e)},n,n.exports,r,i,o,a)}return o[t].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,n){"use strict";function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.unsafeCSS=n.supportsAdoptingStyleSheets=n.getCompatibleStyle=n.css=n.adoptStyles=n.CSSResult=void 0;var a=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,l=Symbol(),u=new Map;n.supportsAdoptingStyleSheets=a;var c=function(){function n(e,t){if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._$cssResult$=!0,t!==l)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}var e,t,r;return e=n,(t=[{key:"styleSheet",get:function(){var e=u.get(this.cssText);return a&&void 0===e&&(u.set(this.cssText,e=new CSSStyleSheet),e.replaceSync(this.cssText)),e}},{key:"toString",value:function(){return this.cssText}}])&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),n}();n.CSSResult=c;function f(e){return new c("string"==typeof e?e:e+"",l)}n.getCompatibleStyle=a?function(e){return e}:function(r){return r instanceof CSSStyleSheet?function(){var e,t="",n=i(r.cssRules);try{for(n.s();!(e=n.n()).done;)t+=e.value.cssText}catch(e){n.e(e)}finally{n.f()}return f(t)}():r},n.adoptStyles=function(r,e){a?r.adoptedStyleSheets=e.map(function(e){return e instanceof CSSStyleSheet?e:e.styleSheet}):e.forEach(function(e){var t=document.createElement("style"),n=window.litNonce;void 0!==n&&t.setAttribute("nonce",n),t.textContent=e.cssText,r.appendChild(t)})},n.css=function(r){for(var e=arguments.length,t=new Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];var i=1===r.length?r[0]:t.reduce(function(e,t,n){return e+function(){if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")}()+r[n+1]},r[0]);return new c(i,l)},n.unsafeCSS=f},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"CSSResult",{enumerable:!0,get:function(){return a.CSSResult}}),n.ReactiveElement=void 0,Object.defineProperty(n,"adoptStyles",{enumerable:!0,get:function(){return a.adoptStyles}}),Object.defineProperty(n,"css",{enumerable:!0,get:function(){return a.css}}),n.defaultConverter=void 0,Object.defineProperty(n,"getCompatibleStyle",{enumerable:!0,get:function(){return a.getCompatibleStyle}}),n.notEqual=void 0,Object.defineProperty(n,"supportsAdoptingStyleSheets",{enumerable:!0,get:function(){return a.supportsAdoptingStyleSheets}}),Object.defineProperty(n,"unsafeCSS",{enumerable:!0,get:function(){return a.unsafeCSS}});var a=e("./css-tag.js");function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function u(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(n){var r=o();return function(){var e,t=g(n);return function(e,t){{if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=g(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function p(e){var n="function"==typeof Map?new Map:void 0;return function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return i(e,arguments,g(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),y(t,e)}(e)}function i(e,t,n){return(i=o()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);r=new(Function.bind.apply(e,r));return n&&y(r,n.prototype),r}).apply(null,arguments)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=window.trustedTypes,m=v?v.emptyScript:"",e=window.reactiveElementPolyfillSupport,b={toAttribute:function(e,t){switch(t){case Boolean:e=e?m:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute:function(e,t){var n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},x=function(e,t){return t!==e&&(t==t||e==e)},_={attribute:!0,type:String,converter:b,reflect:!1,hasChanged:x};n.notEqual=x,n.defaultConverter=b;var v=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(o,p(HTMLElement));var e,t,n,s,r,i=h(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this))._$Et=new Map,e.isUpdatePending=!1,e.hasUpdated=!1,e._$Ei=null,e.o(),e}return e=o,t=[{key:"o",value:function(){var e,t=this;this._$Ep=new Promise(function(e){return t.enableUpdating=e}),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(e=this.constructor.l)||void 0===e||e.forEach(function(e){return e(t)})}},{key:"addController",value:function(e){var t;(null!==(t=this._$Eg)&&void 0!==t?t:this._$Eg=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(t=e.hostConnected)||void 0===t||t.call(e))}},{key:"removeController",value:function(e){var t;null===(t=this._$Eg)||void 0===t||t.splice(this._$Eg.indexOf(e)>>>0,1)}},{key:"_$Em",value:function(){var n=this;this.constructor.elementProperties.forEach(function(e,t){n.hasOwnProperty(t)&&(n._$Et.set(t,n[t]),delete n[t])})}},{key:"createRenderRoot",value:function(){var e=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return(0,a.adoptStyles)(e,this.constructor.elementStyles),e}},{key:"connectedCallback",value:function(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$Eg)||void 0===e||e.forEach(function(e){var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)})}},{key:"enableUpdating",value:function(e){}},{key:"disconnectedCallback",value:function(){var e;null===(e=this._$Eg)||void 0===e||e.forEach(function(e){var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)})}},{key:"attributeChangedCallback",value:function(e,t,n){this._$AK(e,n)}},{key:"_$ES",value:function(e,t){var n,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:_,i=this.constructor._$Eh(e,r);void 0!==i&&!0===r.reflect&&(r=(null!==(n=null===(n=r.converter)||void 0===n?void 0:n.toAttribute)&&void 0!==n?n:b.toAttribute)(t,r.type),this._$Ei=e,null==r?this.removeAttribute(i):this.setAttribute(i,r),this._$Ei=null)}},{key:"_$AK",value:function(e,t){var n,r=this.constructor,i=r._$Eu.get(e);void 0!==i&&this._$Ei!==i&&(e=null!==(e=null!==(r=null===(e=(n=r.getPropertyOptions(i)).converter)||void 0===e?void 0:e.fromAttribute)&&void 0!==r?r:"function"==typeof e?e:null)&&void 0!==e?e:b.fromAttribute,this._$Ei=i,this[i]=e(t,n.type),this._$Ei=null)}},{key:"requestUpdate",value:function(e,t,n){var r=!0;void 0!==e&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||x)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===n.reflect&&this._$Ei!==e&&(void 0===this._$E_&&(this._$E_=new Map),this._$E_.set(e,n))):r=!1),!this.isUpdatePending&&r&&(this._$Ep=this._$EC())}},{key:"_$EC",value:(s=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.isUpdatePending=!0,e.prev=1,e.next=4,this._$Ep;case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Promise.reject(e.t0);case 9:if(t=this.scheduleUpdate(),e.t1=null!=t,e.t1)return e.next=14,t;e.next=14;break;case 14:return e.abrupt("return",!this.isUpdatePending);case 15:case"end":return e.stop()}},e,this,[[1,6]])}),r=function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function i(e){f(r,t,n,i,o,"next",e)}function o(e){f(r,t,n,i,o,"throw",e)}i(void 0)})},function(){return r.apply(this,arguments)})},{key:"scheduleUpdate",value:function(){return this.performUpdate()}},{key:"performUpdate",value:function(){var e,n=this;if(this.isUpdatePending){this.hasUpdated,this._$Et&&(this._$Et.forEach(function(e,t){return n[t]=e}),this._$Et=void 0);var t=!1,r=this._$AL;try{(t=this.shouldUpdate(r))?(this.willUpdate(r),null===(e=this._$Eg)||void 0===e||e.forEach(function(e){var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)}),this.update(r)):this._$EU()}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(r)}}},{key:"willUpdate",value:function(e){}},{key:"_$AE",value:function(e){var t;null===(t=this._$Eg)||void 0===t||t.forEach(function(e){var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}},{key:"_$EU",value:function(){this._$AL=new Map,this.isUpdatePending=!1}},{key:"updateComplete",get:function(){return this.getUpdateComplete()}},{key:"getUpdateComplete",value:function(){return this._$Ep}},{key:"shouldUpdate",value:function(e){return!0}},{key:"update",value:function(e){var n=this;void 0!==this._$E_&&(this._$E_.forEach(function(e,t){return n._$ES(t,n[t],e)}),this._$E_=void 0),this._$EU()}},{key:"updated",value:function(e){}},{key:"firstUpdated",value:function(e){}}],n=[{key:"addInitializer",value:function(e){var t;null!==(t=this.l)&&void 0!==t||(this.l=[]),this.l.push(e)}},{key:"observedAttributes",get:function(){var n=this;this.finalize();var r=[];return this.elementProperties.forEach(function(e,t){e=n._$Eh(t,e);void 0!==e&&(n._$Eu.set(e,t),r.push(e))}),r}},{key:"createProperty",value:function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:_;n.state&&(n.attribute=!1),this.finalize(),this.elementProperties.set(e,n),n.noAccessor||this.prototype.hasOwnProperty(e)||(t="symbol"==c(e)?Symbol():"__"+e,void 0!==(n=this.getPropertyDescriptor(e,t,n))&&Object.defineProperty(this.prototype,e,n))}},{key:"getPropertyDescriptor",value:function(n,r,i){return{get:function(){return this[r]},set:function(e){var t=this[n];this[r]=e,this.requestUpdate(n,t,i)},configurable:!0,enumerable:!0}}},{key:"getPropertyOptions",value:function(e){return this.elementProperties.get(e)||_}},{key:"finalize",value:function(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;var e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){var t,n=this.properties,r=l([].concat(u(Object.getOwnPropertyNames(n)),u(Object.getOwnPropertySymbols(n))));try{for(r.s();!(t=r.n()).done;){var i=t.value;this.createProperty(i,n[i])}}catch(e){r.e(e)}finally{r.f()}}return this.elementStyles=this.finalizeStyles(this.styles),!0}},{key:"finalizeStyles",value:function(e){var t=[];if(Array.isArray(e)){var n,r=l(new Set(e.flat(1/0).reverse()));try{for(r.s();!(n=r.n()).done;){var i=n.value;t.unshift((0,a.getCompatibleStyle)(i))}}catch(e){r.e(e)}finally{r.f()}}else void 0!==e&&t.push((0,a.getCompatibleStyle)(e));return t}},{key:"_$Eh",value:function(e,t){t=t.attribute;return!1===t?void 0:"string"==typeof t?t:"string"==typeof e?e.toLowerCase():void 0}}],t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}();(n.ReactiveElement=v).finalized=!0,v.elementProperties=new Map,v.elementStyles=[],v.shadowRootOptions={mode:"open"},null==e||e({ReactiveElement:v}),(null!==(v=globalThis.reactiveElementVersions)&&void 0!==v?v:globalThis.reactiveElementVersions=[]).push("1.1.1")},{"./css-tag.js":1}],3:[function(e,qi,t){"use strict";function Hi(e){return(Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var L={version:"3.8.0"},i=[].slice,d=function(e){return i.call(e)},R=self.document;function s(e){return e&&(e.ownerDocument||e.document||e).documentElement}function I(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(R)try{d(R.documentElement.childNodes)[0].nodeType}catch(e){d=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),R)try{R.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var t=this.Element.prototype,n=t.setAttribute,r=t.setAttributeNS,o=this.CSSStyleDeclaration.prototype,a=o.setProperty;t.setAttribute=function(e,t){n.call(this,e,t+"")},t.setAttributeNS=function(e,t,n){r.call(this,e,t,n+"")},o.setProperty=function(e,t,n){a.call(this,e,t+"",n)}}function l(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function u(e){return null===e?NaN:+e}function c(e){return!isNaN(e)}function e(o){return{left:function(e,t,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);n<r;){var i=n+r>>>1;o(e[i],t)<0?n=1+i:r=i}return n},right:function(e,t,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);n<r;){var i=n+r>>>1;0<o(e[i],t)?r=i:n=1+i}return n}}}L.ascending=l,L.descending=function(e,t){return t<e?-1:e<t?1:e<=t?0:NaN},L.min=function(e,t){var n,r,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r<=r){n=r;break}for(;++i<o;)null!=(r=e[i])&&r<n&&(n=r)}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r<=r){n=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&r<n&&(n=r)}return n},L.max=function(e,t){var n,r,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r<=r){n=r;break}for(;++i<o;)null!=(r=e[i])&&n<r&&(n=r)}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r<=r){n=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&n<r&&(n=r)}return n},L.extent=function(e,t){var n,r,i,o=-1,a=e.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=e[o])&&r<=r){n=i=r;break}for(;++o<a;)null!=(r=e[o])&&(r<n&&(n=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=t.call(e,e[o],o))&&r<=r){n=i=r;break}for(;++o<a;)null!=(r=t.call(e,e[o],o))&&(r<n&&(n=r),i<r&&(i=r))}return[n,i]},L.sum=function(e,t){var n,r=0,i=e.length,o=-1;if(1===arguments.length)for(;++o<i;)c(n=+e[o])&&(r+=n);else for(;++o<i;)c(n=+t.call(e,e[o],o))&&(r+=n);return r},L.mean=function(e,t){var n,r=0,i=e.length,o=-1,a=i;if(1===arguments.length)for(;++o<i;)c(n=u(e[o]))?r+=n:--a;else for(;++o<i;)c(n=u(t.call(e,e[o],o)))?r+=n:--a;if(a)return r/a},L.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),t=+e[r-1],n=n-r;return n?t+n*(e[r]-t):t},L.median=function(e,t){var n,r=[],i=e.length,o=-1;if(1===arguments.length)for(;++o<i;)c(n=u(e[o]))&&r.push(n);else for(;++o<i;)c(n=u(t.call(e,e[o],o)))&&r.push(n);if(r.length)return L.quantile(r.sort(l),.5)},L.variance=function(e,t){var n,r,i=e.length,o=0,a=0,s=-1,l=0;if(1===arguments.length)for(;++s<i;)c(n=u(e[s]))&&(a+=(r=n-o)*(n-(o+=r/++l)));else for(;++s<i;)c(n=u(t.call(e,e[s],s)))&&(a+=(r=n-o)*(n-(o+=r/++l)));if(1<l)return a/(l-1)},L.deviation=function(){var e=L.variance.apply(this,arguments);return e&&Math.sqrt(e)};o=e(l);function f(e){return e.length}L.bisectLeft=o.left,L.bisect=L.bisectRight=o.right,L.bisector=function(n){return e(1===n.length?function(e,t){return l(n(e),t)}:n)},L.shuffle=function(e,t,n){(o=arguments.length)<3&&(n=e.length,o<2&&(t=0));for(var r,i,o=n-t;o;)i=Math.random()*o--|0,r=e[o+t],e[o+t]=e[i+t],e[i+t]=r;return e},L.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},L.pairs=function(e){for(var t=0,n=e.length-1,r=e[0],i=new Array(n<0?0:n);t<n;)i[t]=[r,r=e[++t]];return i},L.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,n=L.min(e,f),r=new Array(n);++t<n;)for(var i,o=-1,a=r[t]=new Array(i);++o<i;)a[o]=e[o][t];return r},L.zip=function(){return L.transpose(arguments)},L.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},L.values=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},L.entries=function(e){var t,n=[];for(t in e)n.push({key:t,value:e[t]});return n},L.merge=function(e){for(var t,n,r,i=e.length,o=-1,a=0;++o<i;)a+=e[o].length;for(n=new Array(a);0<=--i;)for(t=(r=e[i]).length;0<=--t;)n[--a]=r[t];return n};var O=Math.abs;function h(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function m(){this._=Object.create(null)}L.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var r,i=[],o=function(e){var t=1;for(;e*t%1;)t*=10;return t}(O(n)),a=-1;if(e*=o,t*=o,(n*=o)<0)for(;(r=e+n*++a)>t;)i.push(r/o);else for(;(r=e+n*++a)<t;)i.push(r/o);return i},L.map=function(e,t){var n=new m;if(e instanceof m)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,i=-1,o=e.length;if(1===arguments.length)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t.call(e,r=e[i],i),r)}else for(var a in e)n.set(a,e[a]);return n};var p="__proto__",y="\0";function g(e){return(e+="")===p||e[0]===y?y+e:e}function v(e){return(e+="")[0]===y?e.slice(1):e}function b(e){return g(e)in this._}function x(e){return(e=g(e))in this._&&delete this._[e]}function _(){var e,t=[];for(e in this._)t.push(v(e));return t}function w(){var e,t=0;for(e in this._)++t;return t}function M(){for(var e in this._)return!1;return!0}function j(){this._=Object.create(null)}function S(e){return e}function k(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=A.length;n<r;++n){var i=A[n]+t;if(i in e)return i}}h(m,{has:b,get:function(e){return this._[g(e)]},set:function(e,t){return this._[g(e)]=t},remove:x,keys:_,values:function(){var e,t=[];for(e in this._)t.push(this._[e]);return t},entries:function(){var e,t=[];for(e in this._)t.push({key:v(e),value:this._[e]});return t},size:w,empty:M,forEach:function(e){for(var t in this._)e.call(this,v(t),this._[t])}}),L.nest=function(){var f,d,h={},p=[],t=[];function y(n,e,r){if(r>=p.length)return d?d.call(h,e):f?e.sort(f):e;for(var t,i,o,a,s=-1,l=e.length,u=p[r++],c=new m;++s<l;)(a=c.get(t=u(i=e[s])))?a.push(i):c.set(t,[i]);return o=n?(i=n(),function(e,t){i.set(e,y(n,t,r))}):(i={},function(e,t){i[e]=y(n,t,r)}),c.forEach(o),i}return h.map=function(e,t){return y(t,e,0)},h.entries=function(e){return function n(e,r){if(r>=p.length)return e;var i=[],o=t[r++];return e.forEach(function(e,t){i.push({key:e,values:n(t,r)})}),o?i.sort(function(e,t){return o(e.key,t.key)}):i}(y(L.map,e,0),0)},h.key=function(e){return p.push(e),h},h.sortKeys=function(e){return t[p.length-1]=e,h},h.sortValues=function(e){return f=e,h},h.rollup=function(e){return d=e,h},h},L.set=function(e){var t=new j;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},h(j,{has:b,add:function(e){return this._[g(e+="")]=!0,e},remove:x,values:_,size:w,empty:M,forEach:function(e){for(var t in this._)e.call(this,v(t))}}),L.behavior={},L.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=function(t,n,r){return function(){var e=r.apply(n,arguments);return e===n?t:e}}(e,t,t[n]);return e};var A=["webkit","ms","moz","Moz","o","O"];function T(){}function P(){}function E(i){var o=[],r=new m;function e(){for(var e,t=o,n=-1,r=t.length;++n<r;)(e=t[n].on)&&e.apply(this,arguments);return i}return e.on=function(e,t){var n=r.get(e);return arguments.length<2?n&&n.on:(n&&(n.on=null,o=o.slice(0,n=o.indexOf(n)).concat(o.slice(n+1)),r.remove(e)),t&&o.push(r.set(e,{on:t})),i)},e}function z(){L.event.preventDefault()}function C(){for(var e,t=L.event;e=t.sourceEvent;)t=e;return t}function D(i){for(var o=new P,e=0,t=arguments.length;++e<t;)o[arguments[e]]=E(o);return o.of=function(n,r){return function(e){try{var t=e.sourceEvent=L.event;e.target=i,L.event=e,o[e.type].apply(n,r)}finally{L.event=t}}},o}L.dispatch=function(){for(var e=new P,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=E(e);return e},P.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(0<=n&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},L.event=null,L.requote=function(e){return e.replace(N,"\\$&")};var N=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,F={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function B(e){return F(e,V),e}var U=function(e,t){return t.querySelector(e)},q=function(e,t){return t.querySelectorAll(e)},H=function(e,t){var n=e.matches||e[k(e,"matchesSelector")];return(H=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(U=function(e,t){return Sizzle(e,t)[0]||null},H=(q=Sizzle).matchesSelector),L.selection=function(){return L.select(R.documentElement)};var V=L.selection.prototype=[];function G(e){return"function"==typeof e?e:function(){return U(e,this)}}function W(e){return"function"==typeof e?e:function(){return q(e,this)}}V.select=function(e){var t,n,r,i,o=[];e=G(e);for(var a=-1,s=this.length;++a<s;){o.push(t=[]),t.parentNode=(r=this[a]).parentNode;for(var l=-1,u=r.length;++l<u;)(i=r[l])?(t.push(n=e.call(i,i.__data__,l,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return B(o)},V.selectAll=function(e){var t,n,r=[];e=W(e);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],s=-1,l=a.length;++s<l;)(n=a[s])&&(r.push(t=d(e.call(n,n.__data__,s,i))),t.parentNode=n);return B(r)};var Y="http://www.w3.org/1999/xhtml",X={svg:"http://www.w3.org/2000/svg",xhtml:Y,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Z(t,n){return t=L.ns.qualify(t),null==n?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof n?t.local?function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}:function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}:t.local?function(){this.setAttributeNS(t.space,t.local,n)}:function(){this.setAttribute(t,n)}}function $(e){return e.trim().replace(/\s+/g," ")}function K(e){return new RegExp("(?:^|\\s+)"+L.requote(e)+"(?:\\s+|$)","g")}function Q(e){return(e+"").trim().split(/^|\s+/)}function J(n,r){var i=(n=Q(n).map(ee)).length;return"function"==typeof r?function(){for(var e=-1,t=r.apply(this,arguments);++e<i;)n[e](this,t)}:function(){for(var e=-1;++e<i;)n[e](this,r)}}function ee(r){var i=K(r);return function(e,t){if(n=e.classList)return t?n.add(r):n.remove(r);var n=e.getAttribute("class")||"";t?(i.lastIndex=0,i.test(n)||e.setAttribute("class",$(n+" "+r))):e.setAttribute("class",$(n.replace(i," ")))}}function te(t,n,r){return null==n?function(){this.style.removeProperty(t)}:"function"==typeof n?function(){var e=n.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,r)}:function(){this.style.setProperty(t,n,r)}}function ne(t,n){return null==n?function(){delete this[t]}:"function"==typeof n?function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}:function(){this[t]=n}}function re(n){return"function"==typeof n?n:(n=L.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Y&&e.documentElement.namespaceURI===Y?e.createElement(n):e.createElementNS(t,n)}}function ie(){var e=this.parentNode;e&&e.removeChild(this)}function oe(e){return{__data__:e}}function ae(e){return function(){return H(this,e)}}function se(e,t){for(var n=0,r=e.length;n<r;n++)for(var i,o=e[n],a=0,s=o.length;a<s;a++)(i=o[a])&&t(i,a,n);return e}function le(e){return F(e,ue),e}L.ns={prefix:X,qualify:function(e){var t=e.indexOf(":"),n=e;return 0<=t&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),X.hasOwnProperty(n)?{space:X[n],local:e}:e}},V.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return(e=L.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(Z(t,e[t]));return this}return this.each(Z(e,t))},V.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=Q(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!K(e[i]).test(t))return!1;return!0}for(t in e)this.each(J(t,e[t]));return this}return this.each(J(e,t))},V.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.each(te(n,e[n],t));return this}if(r<2){r=this.node();return I(r).getComputedStyle(r,null).getPropertyValue(e)}n=""}return this.each(te(e,t,n))},V.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(ne(t,e[t]));return this}return this.each(ne(e,t))},V.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},V.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},V.append=function(e){return e=re(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},V.insert=function(e,t){return e=re(e),t=G(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},V.remove=function(){return this.each(ie)},V.data=function(e,p){var t,n,r=-1,i=this.length;if(!arguments.length){for(e=new Array(i=(t=this[0]).length);++r<i;)(n=t[r])&&(e[r]=n.__data__);return e}function o(e,t){var n,r,i=e.length,o=t.length,a=Math.min(i,o),s=new Array(o),l=new Array(o),u=new Array(i);if(p){for(var c,f=new m,d=new Array(i),h=-1;++h<i;)(n=e[h])&&(f.has(c=p.call(n,n.__data__,h))?u[h]=n:f.set(c,n),d[h]=c);for(h=-1;++h<o;)(n=f.get(c=p.call(t,r=t[h],h)))?!0!==n&&((s[h]=n).__data__=r):l[h]=oe(r),f.set(c,!0);for(h=-1;++h<i;)h in d&&!0!==f.get(d[h])&&(u[h]=e[h])}else{for(h=-1;++h<a;)n=e[h],r=t[h],n?(n.__data__=r,s[h]=n):l[h]=oe(r);for(;h<o;++h)l[h]=oe(t[h]);for(;h<i;++h)u[h]=e[h]}l.update=s,l.parentNode=s.parentNode=u.parentNode=e.parentNode,y.push(l),g.push(s),v.push(u)}var y=le([]),g=B([]),v=B([]);if("function"==typeof e)for(;++r<i;)o(t=this[r],e.call(t,t.parentNode.__data__,r));else for(;++r<i;)o(t=this[r],e);return g.enter=function(){return y},g.exit=function(){return v},g},V.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},V.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=ae(e));for(var o=0,a=this.length;o<a;o++){i.push(t=[]),t.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&e.call(r,r.__data__,s,o)&&t.push(r)}return B(i)},V.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,o=r[i];0<=--i;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},V.sort=function(e){e=function(n){arguments.length||(n=l);return function(e,t){return e&&t?n(e.__data__,t.__data__):!e-!t}}.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},V.each=function(r){return se(this,function(e,t,n){r.call(e,e.__data__,t,n)})},V.call=function(e){var t=d(arguments);return e.apply(t[0]=this,t),this},V.empty=function(){return!this.node()},V.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,i=n.length;r<i;r++){var o=n[r];if(o)return o}return null},V.size=function(){var e=0;return se(this,function(){++e}),e};var ue=[];function ce(i,t,n){var r="__on"+i,e=i.indexOf("."),o=de;0<e&&(i=i.slice(0,e));var a=fe.get(i);function s(){var e=this[r];e&&(this.removeEventListener(i,e,e.$),delete this[r])}return a&&(i=a,o=he),e?t?function(){var e=o(t,d(arguments));s.call(this),this.addEventListener(i,this[r]=e,e.$=n),e._=t}:s:t?T:function(){var e,t,n,r=new RegExp("^__on([^.]+)"+L.requote(i)+"$");for(t in this)(e=t.match(r))&&(n=this[t],this.removeEventListener(e[1],n,n.$),delete this[t])}}L.selection.enter=le,(L.selection.enter.prototype=ue).append=V.append,ue.empty=V.empty,ue.node=V.node,ue.call=V.call,ue.size=V.size,ue.select=function(e){for(var t,n,r,i,o,a=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,a.push(t=[]),t.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;)(o=i[u])?(t.push(r[u]=n=e.call(i.parentNode,o.__data__,u,s)),n.__data__=o.__data__):t.push(null)}return B(a)},ue.insert=function(e,t){var a,s,l;return arguments.length<2&&(a=this,t=function(e,t,n){var r,i=a[n].update,o=i.length;for(n!=l&&(l=n,s=0),s<=t&&(s=t+1);!(r=i[s])&&++s<o;);return r}),V.insert.call(this,e,t)},L.select=function(e){var t;return"string"==typeof e?(t=[U(e,R)]).parentNode=R.documentElement:(t=[e]).parentNode=s(e),B([t])},L.selectAll=function(e){var t;return"string"==typeof e?(t=d(q(e,R))).parentNode=R.documentElement:(t=d(e)).parentNode=null,B([t])},V.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=!1),e)this.each(ce(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(ce(e,t,n))};var fe=L.map({mouseenter:"mouseover",mouseleave:"mouseout"});function de(n,r){return function(e){var t=L.event;L.event=e,r[0]=this.__data__;try{n.apply(this,r)}finally{L.event=t}}}function he(e,t){var n=de(e,t);return function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||n.call(this,e)}}R&&fe.forEach(function(e){"on"+e in R&&fe.remove(e)});var pe,ye=0;function ge(e){var n,r,i=".dragsuppress-"+ ++ye,o="click"+i,a=L.select(I(e)).on("touchmove"+i,z).on("dragstart"+i,z).on("selectstart"+i,z);return(pe=null==pe?!("onselectstart"in e)&&k(e.style,"userSelect"):pe)&&(n=s(e).style,r=n[pe],n[pe]="none"),function(e){var t;a.on(i,null),pe&&(n[pe]=r),e&&(t=function(){a.on(o,null)},a.on(o,function(){z(),t()},!0),setTimeout(t,0))}}L.mouse=function(e){return me(e,C())};var ve=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function me(e,t){if(t.changedTouches&&(t=t.changedTouches[0]),(n=e.ownerSVGElement||e).createSVGPoint){var n,r,i=n.createSVGPoint();return ve<0&&(((r=I(e)).scrollX||r.scrollY)&&(r=(n=L.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM(),ve=!(r.f||r.e),n.remove())),ve?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}function be(){return L.event.changedTouches[0].identifier}L.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=C().changedTouches),t)for(var r,i=0,o=t.length;i<o;++i)if((r=t[i]).identifier===n)return me(e,r)},L.behavior.drag=function(){var y=D(n,"drag","dragstart","dragend"),g=null,e=r(T,L.mouse,I,"mousemove","mouseup"),t=r(be,L.touch,S,"touchmove","touchend");function n(){this.on("mousedown.drag",e).on("touchstart.drag",t)}function r(c,f,d,h,p){return function(){var r,e=L.event.target.correspondingElement||L.event.target,i=this.parentNode,o=y.of(this,arguments),a=0,s=c(),t=".drag"+(null==s?"":"-"+s),n=L.select(d(e)).on(h+t,function(){var e,t,n=f(i,s);n&&(e=n[0]-u[0],t=n[1]-u[1],a|=e|t,o({type:"drag",x:(u=n)[0]+r[0],y:n[1]+r[1],dx:e,dy:t}))}).on(p+t,function(){f(i,s)&&(n.on(h+t,null).on(p+t,null),l(a),o({type:"dragend"}))}),l=ge(e),u=f(i,s);r=g?[(r=g.apply(this,arguments)).x-u[0],r.y-u[1]]:[0,0],o({type:"dragstart"})}}return n.origin=function(e){return arguments.length?(g=e,n):g},L.rebind(n,y,"on")},L.touches=function(n,e){return(e=arguments.length<2?C().touches:e)?d(e).map(function(e){var t=me(n,e);return t.identifier=e.identifier,t}):[]};var xe=1e-6,_e=xe*xe,we=Math.PI,Me=2*we,je=Me-xe,ke=we/2,Oe=we/180,Ae=180/we;function Te(e){return 1<e?ke:e<-1?-ke:Math.asin(e)}function Pe(e){return((e=Math.exp(e))+1/e)/2}var Se=Math.SQRT2;L.interpolateZoom=function(e,t){var r,i,o,n,a=e[0],s=e[1],l=e[2],u=t[0],e=t[1],t=t[2],c=u-a,f=e-s,u=c*c+f*f;return(n=u<_e?(o=Math.log(t/l)/Se,function(e){return[a+e*c,s+e*f,l*Math.exp(Se*e*o)]}):(r=Math.sqrt(u),e=(t*t-l*l+4*u)/(2*l*2*r),n=(t*t-l*l-4*u)/(2*t*2*r),i=Math.log(Math.sqrt(e*e+1)-e),o=(Math.log(Math.sqrt(n*n+1)-n)-i)/Se,function(e){var t=e*o,n=Pe(i),e=l/(2*r)*(n*(e=Se*t+i,((e=Math.exp(2*e))-1)/(e+1))-(e=i,((e=Math.exp(i))-1/e)/2));return[a+e*c,s+e*f,l*n/Pe(Se*t+i)]})).duration=1e3*o,n},L.behavior.zoom=function(){var t,s,n,r,m,i,o,a,l,b={x:0,y:0,k:1},u=[960,500],c=Le,f=250,d=0,x="mousedown.zoom",h="mousemove.zoom",p="mouseup.zoom",_="touchstart.zoom",w=D(y,"zoomstart","zoom","zoomend");function y(e){e.on(x,S).on(Ce+".zoom",v).on("dblclick.zoom",C).on(_,E)}function M(e){return[(e[0]-b.x)/b.k,(e[1]-b.y)/b.k]}function j(e){b.k=Math.max(c[0],Math.min(c[1],e))}function k(e,t){var n;t=[(n=t)[0]*b.k+b.x,n[1]*b.k+b.y],b.x+=e[0]-t[0],b.y+=e[1]-t[1]}function O(e,t,n,r){e.__chart__={x:b.x,y:b.y,k:b.k},j(Math.pow(2,r)),k(s=t,n),e=L.select(e),(e=0<f?e.transition().duration(f):e).call(y.event)}function g(){o&&o.domain(i.range().map(function(e){return(e-b.x)/b.k}).map(i.invert)),l&&l.domain(a.range().map(function(e){return(e-b.y)/b.k}).map(a.invert))}function A(e){d++||e({type:"zoomstart"})}function T(e){g(),e({type:"zoom",scale:b.k,translate:[b.x,b.y]})}function P(e){--d||(e({type:"zoomend"}),s=null)}function S(){var e=this,t=w.of(e,arguments),n=0,r=L.select(I(e)).on(h,function(){n=1,k(L.mouse(e),i),T(t)}).on(p,function(){r.on(h,null).on(p,null),o(n),P(t)}),i=M(L.mouse(e)),o=ge(e);Mi.call(e),A(t)}function E(){var l,u=this,c=w.of(u,arguments),f={},d=0,i=".zoom-"+L.event.changedTouches[0].identifier,a="touchmove"+i,s="touchend"+i,h=[],o=L.select(u),p=ge(u);function y(){var e=L.touches(u);return l=b.k,e.forEach(function(e){e.identifier in f&&(f[e.identifier]=M(e))}),e}function e(){var e=L.event.target;L.select(e).on(a,g).on(s,v),h.push(e);for(var t=L.event.changedTouches,n=0,r=t.length;n<r;++n)f[t[n].identifier]=null;var i,o=y(),e=Date.now();1===o.length?(e-m<500&&(i=o[0],O(u,i,f[i.identifier],Math.floor(Math.log(b.k)/Math.LN2)+1),z()),m=e):1<o.length&&(i=o[0],e=o[1],o=i[0]-e[0],e=i[1]-e[1],d=o*o+e*e)}function g(){var e,t,n=L.touches(u);Mi.call(u);for(var r,i,o,a=0,s=n.length;a<s;++a,t=null)if(e=n[a],t=f[e.identifier]){if(o)break;i=e,o=t}t&&(r=(r=e[0]-i[0])*r+(r=e[1]-i[1])*r,r=d&&Math.sqrt(r/d),i=[(i[0]+e[0])/2,(i[1]+e[1])/2],o=[(o[0]+t[0])/2,(o[1]+t[1])/2],j(r*l)),m=null,k(i,o),T(c)}function v(){if(L.event.touches.length){for(var e,t=L.event.changedTouches,n=0,r=t.length;n<r;++n)delete f[t[n].identifier];for(e in f)return void y()}L.selectAll(h).on(i,null),o.on(x,S).on(_,E),p(),P(c)}e(),A(c),o.on(x,null).on(_,e)}function v(){var e=w.of(this,arguments);r?clearTimeout(r):(Mi.call(this),t=M(s=n||L.mouse(this)),A(e)),r=setTimeout(function(){r=null,P(e)},50),z(),j(Math.pow(2,.002*Ee())*b.k),k(s,t),T(e)}function C(){var e=L.mouse(this),t=Math.log(b.k)/Math.LN2;O(this,e,M(e),L.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return Ce=Ce||("onwheel"in R?(Ee=function(){return-L.event.deltaY*(L.event.deltaMode?120:1)},"wheel"):"onmousewheel"in R?(Ee=function(){return L.event.wheelDelta},"mousewheel"):(Ee=function(){return-L.event.detail},"MozMousePixelScroll")),y.event=function(e){e.each(function(){var a=w.of(this,arguments),t=b;Oi?L.select(this).transition().each("start.zoom",function(){b=this.__chart__||{x:0,y:0,k:1},A(a)}).tween("zoom:zoom",function(){var n=u[0],e=u[1],r=s?s[0]:n/2,i=s?s[1]:e/2,o=L.interpolateZoom([(r-b.x)/b.k,(i-b.y)/b.k,n/b.k],[(r-t.x)/t.k,(i-t.y)/t.k,n/t.k]);return function(e){var t=o(e),e=n/t[2];this.__chart__=b={x:r-t[0]*e,y:i-t[1]*e,k:e},T(a)}}).each("interrupt.zoom",function(){P(a)}).each("end.zoom",function(){P(a)}):(this.__chart__=b,A(a),T(a),P(a))})},y.translate=function(e){return arguments.length?(b={x:+e[0],y:+e[1],k:b.k},g(),y):[b.x,b.y]},y.scale=function(e){return arguments.length?(b={x:b.x,y:b.y,k:null},j(+e),g(),y):b.k},y.scaleExtent=function(e){return arguments.length?(c=null==e?Le:[+e[0],+e[1]],y):c},y.center=function(e){return arguments.length?(n=e&&[+e[0],+e[1]],y):n},y.size=function(e){return arguments.length?(u=e&&[+e[0],+e[1]],y):u},y.duration=function(e){return arguments.length?(f=+e,y):f},y.x=function(e){return arguments.length?(i=(o=e).copy(),b={x:0,y:0,k:1},y):o},y.y=function(e){return arguments.length?(a=(l=e).copy(),b={x:0,y:0,k:1},y):l},L.rebind(y,w,"on")};var Ee,Ce,Le=[0,1/0];function Re(){}function Ie(e,t,n){return this instanceof Ie?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof Ie?new Ie(e.h,e.s,e.l):Je(""+e,et,Ie):new Ie(e,t,n)}(L.color=Re).prototype.toString=function(){return this.rgb()+""};o=(L.hsl=Ie).prototype=new Re;function ze(e,t,n){var r,i;function o(e){return Math.round(255*(360<(e=e)?e-=360:e<0&&(e+=360),e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r))}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)||t<0?0:1<t?1:t,r=2*(n=n<0?0:1<n?1:n)-(i=n<=.5?n*(1+t):n+t-n*t),new Ze(o(e+120),o(e),o(e-120))}function De(e,t,n){return this instanceof De?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof De?new De(e.h,e.c,e.l):Ge((e instanceof Fe?e:e=tt((e=L.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new De(e,t,n)}o.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new Ie(this.h,this.s,this.l/e)},o.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new Ie(this.h,this.s,e*this.l)},o.rgb=function(){return ze(this.h,this.s,this.l)};o=(L.hcl=De).prototype=new Re;function Ne(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new Fe(n,Math.cos(e*=Oe)*t,Math.sin(e)*t)}function Fe(e,t,n){return this instanceof Fe?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof Fe?new Fe(e.l,e.a,e.b):e instanceof De?Ne(e.h,e.c,e.l):tt((e=Ze(e)).r,e.g,e.b):new Fe(e,t,n)}o.brighter=function(e){return new De(this.h,this.c,Math.min(100,this.l+Be*(arguments.length?e:1)))},o.darker=function(e){return new De(this.h,this.c,Math.max(0,this.l-Be*(arguments.length?e:1)))},o.rgb=function(){return Ne(this.h,this.c,this.l).rgb()},L.lab=Fe;var Be=18,Ue=.95047,qe=1,He=1.08883,o=Fe.prototype=new Re;function Ve(e,t,n){var e=(e+16)/116,n=e-n/200;return new Ze(Xe(3.2404542*(t=We(t=e+t/500)*Ue)-1.5371385*(e=We(e)*qe)-.4985314*(n=We(n)*He)),Xe(-.969266*t+1.8760108*e+.041556*n),Xe(.0556434*t-.2040259*e+1.0572252*n))}function Ge(e,t,n){return 0<e?new De(Math.atan2(n,t)*Ae,Math.sqrt(t*t+n*n),e):new De(NaN,NaN,e)}function We(e){return.206893034<e?e*e*e:(e-4/29)/7.787037}function Ye(e){return.008856<e?Math.pow(e,1/3):7.787037*e+4/29}function Xe(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function Ze(e,t,n){return this instanceof Ze?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof Ze?new Ze(e.r,e.g,e.b):Je(""+e,Ze,ze):new Ze(e,t,n)}function $e(e){return new Ze(e>>16,e>>8&255,255&e)}function Ke(e){return $e(e)+""}o.brighter=function(e){return new Fe(Math.min(100,this.l+Be*(arguments.length?e:1)),this.a,this.b)},o.darker=function(e){return new Fe(Math.max(0,this.l-Be*(arguments.length?e:1)),this.a,this.b)},o.rgb=function(){return Ve(this.l,this.a,this.b)};o=(L.rgb=Ze).prototype=new Re;function Qe(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function Je(e,t,n){var r,i=0,o=0,a=0,s=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase());if(s)switch(r=s[2].split(","),s[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return t(rt(r[0]),rt(r[1]),rt(r[2]))}return(s=it.get(e))?t(s.r,s.g,s.b):(null==e||"#"!==e.charAt(0)||isNaN(s=parseInt(e.slice(1),16))||(4===e.length?(i=(3840&s)>>4,i|=i>>4,o=240&s,o|=o>>4,a=15&s,a|=a<<4):7===e.length&&(i=(16711680&s)>>16,o=(65280&s)>>8,a=255&s)),t(i,o,a))}function et(e,t,n){var r,i,o=Math.min(e/=255,t/=255,n/=255),a=Math.max(e,t,n),s=a-o,l=(a+o)/2;return s?(i=l<.5?s/(a+o):s/(2-a-o),r=e==a?(t-n)/s+(t<n?6:0):t==a?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,i=0<l&&l<1?0:r),new Ie(r,i,l)}function tt(e,t,n){var r=Ye((.4124564*(e=nt(e))+.3575761*(t=nt(t))+.1804375*(n=nt(n)))/Ue),i=Ye((.2126729*e+.7151522*t+.072175*n)/qe);return Fe(116*i-16,500*(r-i),200*(i-Ye((.0193339*e+.119192*t+.9503041*n)/He)))}function nt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function rt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}o.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b;return t||n||r?(t&&t<30&&(t=30),n&&n<30&&(n=30),r&&r<30&&(r=30),new Ze(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new Ze(30,30,30)},o.darker=function(e){return new Ze((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},o.hsl=function(){return et(this.r,this.g,this.b)},o.toString=function(){return"#"+Qe(this.r)+Qe(this.g)+Qe(this.b)};var it=L.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ot(e){return"function"==typeof e?e:function(){return e}}function at(r){return function(e,t,n){return 2===arguments.length&&"function"==typeof t&&(n=t,t=null),st(e,t,r,n)}}function st(i,o,a,e){var n,s={},l=L.dispatch("beforesend","progress","load","error"),u={},c=new XMLHttpRequest,f=null;function t(){var e,t,n,r=c.status;if(!r&&((n=(t=c).responseType)&&"text"!==n?t.response:t.responseText)||200<=r&&r<300||304===r){try{e=a.call(s,c)}catch(e){return void l.error.call(s,e)}l.load.call(s,e)}else l.error.call(s,c)}return"onload"in(c=self.XDomainRequest&&!("withCredentials"in c)&&/^(http(s)?:)?\/\//.test(i)?new XDomainRequest:c)?c.onload=c.onerror=t:c.onreadystatechange=function(){3<c.readyState&&t()},c.onprogress=function(e){var t=L.event;L.event=e;try{l.progress.call(s,c)}finally{L.event=t}},s.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?u[e]:(null==t?delete u[e]:u[e]=t+"",s)},s.mimeType=function(e){return arguments.length?(o=null==e?null:e+"",s):o},s.responseType=function(e){return arguments.length?(f=e,s):f},s.response=function(e){return a=e,s},["get","post"].forEach(function(e){s[e]=function(){return s.send.apply(s,[e].concat(d(arguments)))}}),s.send=function(e,t,n){if(2===arguments.length&&"function"==typeof t&&(n=t,t=null),c.open(e,i,!0),null==o||"accept"in u||(u.accept=o+",*/*"),c.setRequestHeader)for(var r in u)c.setRequestHeader(r,u[r]);return null!=o&&c.overrideMimeType&&c.overrideMimeType(o),null!=f&&(c.responseType=f),null!=n&&s.on("error",n).on("load",function(e){n(null,e)}),l.beforesend.call(s,c),c.send(null==t?null:t),s},s.abort=function(){return c.abort(),s},L.rebind(s,l,"on"),null==e?s:s.get(1===(n=e).length?function(e,t){n(null==e?t:null)}:n)}it.forEach(function(e,t){it.set(e,$e(t))}),L.functor=ot,L.xhr=at(S),L.dsv=function(i,o){var t=new RegExp('["'+i+"\n]"),d=i.charCodeAt(0);function a(e,t,n){arguments.length<3&&(n=t,t=null);var r=st(e,o,null==t?s:l(t),n);return r.row=function(e){return arguments.length?r.response(null==(t=e)?s:l(e)):t},r}function s(e){return a.parse(e.responseText)}function l(t){return function(e){return a.parse(e.responseText,t)}}function n(e){return e.map(u).join(i)}function u(e){return t.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return a.parse=function(e,r){var t;return a.parseRows(e,function(i,e){if(t)return t(i,e-1);function n(e){for(var t={},n=i.length,r=0;r<n;++r)t[i[r]]=e[r];return t}t=r?function(e,t){return r(n(e),t)}:n})},a.parseRows=function(i,e){var t,o,a={},s={},n=[],l=i.length,u=0,r=0;function c(){if(l<=u)return s;if(o)return o=!1,a;var e=u;if(34===i.charCodeAt(e)){for(var t=e;t++<l;)if(34===i.charCodeAt(t)){if(34!==i.charCodeAt(t+1))break;++t}return u=t+2,13===(n=i.charCodeAt(t+1))?(o=!0,10===i.charCodeAt(t+2)&&++u):10===n&&(o=!0),i.slice(e+1,t).replace(/""/g,'"')}for(;u<l;){var n,r=1;if(10===(n=i.charCodeAt(u++)))o=!0;else if(13===n)o=!0,10===i.charCodeAt(u)&&(++u,++r);else if(n!==d)continue;return i.slice(e,u-r)}return i.slice(e)}for(;(t=c())!==s;){for(var f=[];t!==a&&t!==s;)f.push(t),t=c();e&&null==(f=e(f,r++))||n.push(f)}return n},a.format=function(e){if(Array.isArray(e[0]))return a.formatRows(e);var n=new j,r=[];return e.forEach(function(e){for(var t in e)n.has(t)||r.push(n.add(t))}),[r.map(u).join(i)].concat(e.map(function(t){return r.map(function(e){return u(t[e])}).join(i)})).join("\n")},a.formatRows=function(e){return e.map(n).join("\n")},a},L.csv=L.dsv(",","text/csv"),L.tsv=L.dsv("\t","text/tab-separated-values");var lt,ut,ct,ft,dt=this[k(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function ht(e,t,n){var r=arguments.length;r<2&&(t=0);t={c:e,t:(n=r<3?Date.now():n)+t,n:null};return ut?ut.n=t:lt=t,ut=t,ct||(ft=clearTimeout(ft),ct=1,dt(pt)),t}function pt(){var e=yt(),e=gt()-e;24<e?(isFinite(e)&&(clearTimeout(ft),ft=setTimeout(pt,e)),ct=0):(ct=1,dt(pt))}function yt(){for(var e=Date.now(),t=lt;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function gt(){for(var e,t=lt,n=1/0;t;)t=t.c?(t.t<n&&(n=t.t),(e=t).n):e?e.n=t.n:lt=t.n;return ut=e,n}function vt(e){return e[0]}function mt(e){return e[1]}function bt(e){for(var t,n,r,i=e.length,o=[0,1],a=2,s=2;s<i;s++){for(;1<a&&(t=e[o[a-2]],n=e[o[a-1]],r=e[s],(n[0]-t[0])*(r[1]-t[1])-(n[1]-t[1])*(r[0]-t[0])<=0);)--a;o[a++]=s}return o.slice(0,a)}function xt(e,t){return e[0]-t[0]||e[1]-t[1]}L.timer=function(){ht.apply(this,arguments)},L.timer.flush=function(){yt(),gt()},L.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},L.geom={},L.geom.hull=function(e){var d=vt,h=mt;return arguments.length?t(e):(t.x=function(e){return arguments.length?(d=e,t):d},t.y=function(e){return arguments.length?(h=e,t):h},t);function t(e){if(e.length<3)return[];for(var t=ot(d),n=ot(h),r=e.length,i=[],o=[],a=0;a<r;a++)i.push([+t.call(this,e[a],a),+n.call(this,e[a],a),a]);for(i.sort(xt),a=0;a<r;a++)o.push([i[a][0],-i[a][1]]);var s=bt(i),l=bt(o),u=l[0]===s[0],c=l[l.length-1]===s[s.length-1],f=[];for(a=s.length-1;0<=a;--a)f.push(e[i[s[a]][2]]);for(a=+u;a<l.length-c;++a)f.push(e[i[l[a]][2]]);return f}},L.geom.polygon=function(e){return F(e,_t),e};var _t=L.geom.polygon.prototype=[];function wt(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Mt(e,t,n,r){var i=e[0],o=n[0],a=t[0]-i,s=r[0]-o,e=e[1],n=n[1],t=t[1]-e,r=r[1]-n,s=(s*(e-n)-r*(i-o))/(r*a-s*t);return[i+s*a,e+s*t]}function jt(e){var t=e[0],e=e[e.length-1];return!(t[0]-e[0]||t[1]-e[1])}_t.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},_t.centroid=function(e){var t,n,r=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],o+=(t[0]+s[0])*n,a+=(t[1]+s[1])*n;return[o*e,a*e]},_t.clip=function(e){for(var t,n,r,i,o,a,s=jt(e),l=-1,u=this.length-jt(this),c=this[u-1];++l<u;){for(t=e.slice(),e.length=0,i=this[l],o=t[(r=t.length-s)-1],n=-1;++n<r;)wt(a=t[n],c,i)?(wt(o,c,i)||e.push(Mt(o,a,c,i)),e.push(a)):wt(o,c,i)&&e.push(Mt(o,a,c,i)),o=a;s&&e.push(e[0]),c=i}return e};var kt,Ot,At,Tt,Pt,St=[],Et=[];function Ct(){Zt(this),this.edge=this.site=this.circle=null}function Lt(e){var t=St.pop()||new Ct;return t.site=e,t}function Rt(e){qt(e),At.remove(e),St.push(e),Zt(e)}function It(e){for(var t,n,r,i,o=e.x,a=e.y,s=At._;s;)if(r=zt(s,a)-o,xe<r)s=s.L;else{if(i=o-function(e,t){var n=e.N;if(n)return zt(n,t);e=e.site;return e.y===t?e.x:1/0}(s,a),!(xe<i)){-xe<r?(t=s.P,n=s):-xe<i?n=(t=s).N:t=n=s;break}if(!s.R){t=s;break}s=s.R}var l,u,c,f,d,h,p,y,g,v,m=Lt(e);if(At.insert(t,m),t||n){if(t===n)return qt(t),n=Lt(t.site),At.insert(m,n),m.edge=n.edge=Gt(t.site,m.site),Ut(t),void Ut(n);n?(qt(t),qt(n),u=(l=t.site).x,v=l.y,c=e.x-u,p=e.y-v,d=(f=n.site).x-u,h=f.y-v,Wt(n.edge,l,f,v={x:(h*(y=c*c+p*p)-p*(g=d*d+h*h))/(p=2*(c*h-p*d))+u,y:(c*g-d*y)/p+v}),m.edge=Gt(l,e,null,v),n.edge=Gt(e,f,null,v),Ut(t),Ut(n)):m.edge=Gt(t.site,m.site)}}function zt(e,t){var n=e.site,r=n.x,i=n.y,o=i-t;if(!o)return r;var a=e.P;if(!a)return-1/0;var s=(n=a.site).x,l=n.y,e=l-t;if(!e)return s;a=s-r,n=1/o-1/e,t=a/e;return n?(-t+Math.sqrt(t*t-2*n*(a*a/(-2*e)-l+e/2+i-o/2)))/n+r:(r+s)/2}function Dt(e){this.site=e,this.edges=[]}function Nt(e){for(var t,n,r,i,o,a,s,l,u,c=e[0][0],f=e[1][0],d=e[0][1],h=e[1][1],p=Ot,y=p.length;y--;)if((i=p[y])&&i.prepare())for(s=(a=i.edges).length,o=0;o<s;)n=(u=a[o].end()).x,r=u.y,t=(l=a[++o%s].start()).x,l=l.y,(O(n-t)>xe||O(r-l)>xe)&&(a.splice(o,0,new Yt(function(e,t,n){e=new Vt(e,null);return e.a=t,e.b=n,kt.push(e),e}(i.site,u,O(n-c)<xe&&xe<h-r?{x:c,y:O(t-c)<xe?l:h}:O(r-h)<xe&&xe<f-n?{x:O(l-h)<xe?t:f,y:h}:O(n-f)<xe&&xe<r-d?{x:f,y:O(t-f)<xe?l:d}:O(r-d)<xe&&xe<n-c?{x:O(l-d)<xe?t:c,y:d}:null),i.site,null)),++s)}function Ft(e,t){return t.angle-e.angle}function Bt(){Zt(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ut(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,o=n.site;if(r!==o){var a=i.x,s=i.y,l=r.x-a,u=r.y-s,c=o.x-a,n=2*(l*(t=o.y-s)-u*c);if(!(-_e<=n)){var r=l*l+u*u,o=c*c+t*t,u=(t*r-u*o)/n,n=(l*o-c*r)/n,t=n+s,f=Et.pop()||new Bt;f.arc=e,f.site=i,f.x=u+a,f.y=t+Math.sqrt(u*u+n*n),f.cy=t,e.circle=f;for(var d=null,h=Pt._;h;)if(f.y<h.y||f.y===h.y&&f.x<=h.x){if(!h.L){d=h.P;break}h=h.L}else{if(!h.R){d=h;break}h=h.R}Pt.insert(d,f),d||(Tt=f)}}}}function qt(e){var t=e.circle;t&&(t.P||(Tt=t.N),Pt.remove(t),Et.push(t),Zt(t),e.circle=null)}function Ht(e){for(var t,l,u,c,f,n=kt,r=(l=e[0][0],u=e[0][1],c=e[1][0],f=e[1][1],function(e){var t=e.a,n=e.b,r=t.x,i=t.y,o=0,a=1,s=n.x-r,t=n.y-i,n=l-r;if(s||!(0<n)){if(n/=s,s<0){if(n<o)return;n<a&&(a=n)}else if(0<s){if(a<n)return;o<n&&(o=n)}if(n=c-r,s||!(n<0)){if(n/=s,s<0){if(a<n)return;o<n&&(o=n)}else if(0<s){if(n<o)return;n<a&&(a=n)}if(n=u-i,t||!(0<n)){if(n/=t,t<0){if(n<o)return;n<a&&(a=n)}else if(0<t){if(a<n)return;o<n&&(o=n)}if(n=f-i,t||!(n<0)){if(n/=t,t<0){if(a<n)return;o<n&&(o=n)}else if(0<t){if(n<o)return;n<a&&(a=n)}return 0<o&&(e.a={x:r+o*s,y:i+o*t}),a<1&&(e.b={x:r+a*s,y:i+a*t}),e}}}}}),i=n.length;i--;)(function(e,t){var n=e.b;if(n)return!0;var r=e.a,i=t[0][0],o=t[1][0],a=t[0][1],s=t[1][1],l=e.l,u=e.r,c=l.x,f=l.y,d=u.x,t=u.y,l=(c+d)/2,u=(f+t)/2;if(t===f){if(l<i||o<=l)return;if(d<c){if(r){if(r.y>=s)return}else r={x:l,y:a};n={x:l,y:s}}else{if(r){if(r.y<a)return}else r={x:l,y:s};n={x:l,y:a}}}else if(l=u-(u=(c-d)/(t-f))*l,u<-1||1<u)if(d<c){if(r){if(r.y>=s)return}else r={x:(a-l)/u,y:a};n={x:(s-l)/u,y:s}}else{if(r){if(r.y<a)return}else r={x:(s-l)/u,y:s};n={x:(a-l)/u,y:a}}else if(f<t){if(r){if(r.x>=o)return}else r={x:i,y:u*i+l};n={x:o,y:u*o+l}}else{if(r){if(r.x<i)return}else r={x:o,y:u*o+l};n={x:i,y:u*i+l}}return e.a=r,e.b=n,!0})(t=n[i],e)&&r(t)&&!(O(t.a.x-t.b.x)<xe&&O(t.a.y-t.b.y)<xe)||(t.a=t.b=null,n.splice(i,1))}function Vt(e,t){this.l=e,this.r=t,this.a=this.b=null}function Gt(e,t,n,r){var i=new Vt(e,t);return kt.push(i),n&&Wt(i,e,t,n),r&&Wt(i,t,e,r),Ot[e.i].edges.push(new Yt(i,e,t)),Ot[t.i].edges.push(new Yt(i,t,e)),i}function Wt(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function Yt(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Xt(){this._=null}function Zt(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function $t(e,t){var n=t,r=t.R,t=n.U;t?t.L===n?t.L=r:t.R=r:e._=r,r.U=t,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Kt(e,t){var n=t,r=t.L,t=n.U;t?t.L===n?t.L=r:t.R=r:e._=r,r.U=t,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Qt(e){for(;e.L;)e=e.L;return e}function Jt(e,t){var n,r,i,o=e.sort(en).pop();for(kt=[],Ot=new Array(e.length),At=new Xt,Pt=new Xt;;)if(i=Tt,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===n&&o.y===r||(Ot[o.i]=new Dt(o),It(o),n=o.x,r=o.y),o=e.pop();else{if(!i)break;!function(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},o=e.P,a=e.N,s=[e];Rt(e);for(var l=o;l.circle&&O(n-l.circle.x)<xe&&O(r-l.circle.cy)<xe;)o=l.P,s.unshift(l),Rt(l),l=o;s.unshift(l),qt(l);for(var u=a;u.circle&&O(n-u.circle.x)<xe&&O(r-u.circle.cy)<xe;)a=u.N,s.push(u),Rt(u),u=a;s.push(u),qt(u);for(var c=s.length,f=1;f<c;++f)u=s[f],l=s[f-1],Wt(u.edge,l.site,u.site,i);l=s[0],(u=s[c-1]).edge=Gt(l.site,u.site,null,i),Ut(l),Ut(u)}(i.arc)}t&&(Ht(t),Nt(t));t={cells:Ot,edges:kt};return At=Pt=kt=Ot=null,t}function en(e,t){return t.y-e.y||t.x-e.x}Dt.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(Ft),t.length},Yt.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Xt.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else n=this._?(e=Qt(this._),t.P=null,(t.N=e).P=e.L=t,e):(t.P=t.N=null,this._=t,null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&($t(this,n),n=(e=n).U),n.C=!1,r.C=!0,Kt(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(Kt(this,n),n=(e=n).U),n.C=!1,r.C=!0,$t(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r=e.U,i=e.L,o=e.R,a=i?o?Qt(o):i:o;if(r?r.L===e?r.L=a:r.R=a:this._=a,i&&o?(n=a.C,a.C=e.C,((a.L=i).U=a)!==o?(r=a.U,a.U=e.U,e=a.R,r.L=e,(a.R=o).U=a):(a.U=r,e=(r=a).R)):(n=e.C,e=a),e&&(e.U=r),!n)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===r.L){if((t=r.R).C&&(t.C=!1,r.C=!0,$t(this,r),t=r.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Kt(this,t),t=r.R),t.C=r.C,r.C=t.R.C=!1,$t(this,r),e=this._;break}}else if((t=r.L).C&&(t.C=!1,r.C=!0,Kt(this,r),t=r.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,$t(this,t),t=r.L),t.C=r.C,r.C=t.L.C=!1,Kt(this,r),e=this._;break}}while(t.C=!0,r=(e=r).U,!e.C);e&&(e.C=!1)}}},L.geom.voronoi=function(e){var t=vt,n=mt,r=t,i=n,u=tn;return e?o(e):(o.links=function(t){return Jt(d(t)).edges.filter(function(e){return e.l&&e.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},o.triangles=function(c){var f=[];return Jt(d(c)).cells.forEach(function(e,t){for(var n,r,i=e.site,o=e.edges.sort(Ft),a=-1,s=o.length,l=o[s-1].edge,u=l.l===i?l.r:l.l;++a<s;)n=u,u=(l=o[a].edge).l===i?l.r:l.l,t<n.i&&t<u.i&&(r=u,(i.x-r.x)*(n.y-i.y)-(i.x-n.x)*(r.y-i.y)<0)&&f.push([c[t],c[n.i],c[u.i]])}),f},o.x=function(e){return arguments.length?(r=ot(t=e),o):t},o.y=function(e){return arguments.length?(i=ot(n=e),o):n},o.clipExtent=function(e){return arguments.length?(u=null==e?tn:e,o):u===tn?null:u},o.size=function(e){return arguments.length?o.clipExtent(e&&[[0,0],e]):u===tn?null:u&&u[1]},o);function o(r){var i=new Array(r.length),o=u[0][0],a=u[0][1],s=u[1][0],l=u[1][1];return Jt(d(r),u).cells.forEach(function(e,t){var n=e.edges,e=e.site;(i[t]=n.length?n.map(function(e){e=e.start();return[e.x,e.y]}):e.x>=o&&e.x<=s&&e.y>=a&&e.y<=l?[[o,l],[s,l],[s,a],[o,a]]:[]).point=r[t]}),i}function d(e){return e.map(function(e,t){return{x:Math.round(r(e,t)/xe)*xe,y:Math.round(i(e,t)/xe)*xe,i:t}})}};var tn=[[-1e6,-1e6],[1e6,1e6]];function nn(e){return e.x}function rn(e){return e.y}function on(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function an(e,t){e=L.rgb(e),t=L.rgb(t);var n=e.r,r=e.g,i=e.b,o=t.r-n,a=t.g-r,s=t.b-i;return function(e){return"#"+Qe(Math.round(n+o*e))+Qe(Math.round(r+a*e))+Qe(Math.round(i+s*e))}}function sn(e,t){var n,r={},i={};for(n in e)n in t?r[n]=dn(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function ln(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function un(e,r){var t,n,i,o=cn.lastIndex=fn.lastIndex=0,a=-1,s=[],l=[];for(e+="",r+="";(t=cn.exec(e))&&(n=fn.exec(r));)(i=n.index)>o&&(i=r.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(t=t[0])===(n=n[0])?s[a]?s[a]+=n:s[++a]=n:(s[++a]=null,l.push({i:a,x:ln(t,n)})),o=fn.lastIndex;return o<r.length&&(i=r.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?(r=l[0].x,function(e){return r(e)+""}):function(){return r}:(r=l.length,function(e){for(var t,n=0;n<r;++n)s[(t=l[n]).i]=t.x(e);return s.join("")})}L.geom.delaunay=function(e){return L.geom.voronoi().triangles(e)},L.geom.quadtree=function(e,m,b,x,w){var M,j=vt,k=mt;return(M=arguments.length)?(j=nn,k=rn,3===M&&(w=b,x=m,b=m=0),t(e)):(t.x=function(e){return arguments.length?(j=e,t):j},t.y=function(e){return arguments.length?(k=e,t):k},t.extent=function(e){return arguments.length?(null==e?m=b=x=w=null:(m=+e[0][0],b=+e[0][1],x=+e[1][0],w=+e[1][1]),t):null==m?null:[[m,b],[x,w]]},t.size=function(e){return arguments.length?(null==e?m=b=x=w=null:(m=b=0,x=+e[0],w=+e[1]),t):null==m?null:[x-m,w-b]},t);function t(e){var t,n,r,i,o,a,s,l,u,c=ot(j),f=ot(k);if(null!=m)a=m,s=b,l=x,u=w;else if(l=u=-(a=s=1/0),n=[],r=[],o=e.length,M)for(i=0;i<o;++i)(t=e[i]).x<a&&(a=t.x),t.y<s&&(s=t.y),t.x>l&&(l=t.x),t.y>u&&(u=t.y),n.push(t.x),r.push(t.y);else for(i=0;i<o;++i){var d=+c(t=e[i],i),h=+f(t,i);d<a&&(a=d),h<s&&(s=h),l<d&&(l=d),u<h&&(u=h),n.push(d),r.push(h)}var p=l-a,y=u-s;function g(e,t,n,r,i,o,a,s){var l,u,c;isNaN(n)||isNaN(r)||(e.leaf?(l=e.x,u=e.y,null!=l?(O(l-n)+O(u-r)<.01||(c=e.point,e.x=e.y=e.point=null,v(e,c,l,u,i,o,a,s)),v(e,t,n,r,i,o,a,s)):(e.x=n,e.y=r,e.point=t)):v(e,t,n,r,i,o,a,s))}function v(e,t,n,r,i,o,a,s){var l=.5*(i+a),u=.5*(o+s),c=l<=n,f=u<=r,d=f<<1|c;e.leaf=!1,c?i=l:a=l,f?o=u:s=u,g(e=e.nodes[d]||(e.nodes[d]=on()),t,n,r,i,o,a,s)}y<p?u=s+p:l=a+y;var _=on();if(_.add=function(e){g(_,e,+c(e,++i),+f(e,i),a,s,l,u)},_.visit=function(e){!function e(t,n,r,i,o,a){{var s,l;t(n,r,i,o,a)||(s=.5*(r+o),l=.5*(i+a),(n=n.nodes)[0]&&e(t,n[0],r,i,s,l),n[1]&&e(t,n[1],s,i,o,l),n[2]&&e(t,n[2],r,l,s,a),n[3]&&e(t,n[3],s,l,o,a))}}(e,_,a,s,l,u)},_.find=function(e){return h=e[0],p=e[1],x=1/0,function e(t,n,r,i,o){if(!(v<n||m<r||i<y||o<g)){var a,s;!(a=t.point)||(s=(s=h-t.x)*s+(s=p-t.y)*s)<x&&(s=Math.sqrt(x=s),y=h-s,g=p-s,v=h+s,m=p+s,b=a);for(var l=t.nodes,u=.5*(n+i),c=.5*(r+o),f=(c<=p)<<1|u<=h,d=f+4;f<d;++f)if(t=l[3&f])switch(3&f){case 0:e(t,n,r,u,c);break;case 1:e(t,u,r,i,c);break;case 2:e(t,n,c,u,o);break;case 3:e(t,u,c,i,o)}}}(_,y=a,g=s,v=l,m=u),b;var h,p,y,g,v,m,b,x},i=-1,null==m){for(;++i<o;)g(_,e[i],n[i],r[i],a,s,l,u);--i}else e.forEach(_.add);return n=r=e=t=null,_}},L.interpolateRgb=an,L.interpolateObject=sn,L.interpolateNumber=ln,L.interpolateString=un;var cn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fn=new RegExp(cn.source,"g");function dn(e,t){for(var n,r=L.interpolators.length;0<=--r&&!(n=L.interpolators[r](e,t)););return n}function hn(e,t){for(var n=[],r=[],i=e.length,o=t.length,a=Math.min(e.length,t.length),s=0;s<a;++s)n.push(dn(e[s],t[s]));for(;s<i;++s)r[s]=e[s];for(;s<o;++s)r[s]=t[s];return function(e){for(s=0;s<a;++s)r[s]=n[s](e);return r}}L.interpolate=dn,L.interpolators=[function(e,t){var n=Hi(t);return("string"===n?it.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?an:un:t instanceof Re?an:Array.isArray(t)?hn:"object"===n&&isNaN(t)?sn:ln)(e,t)}],L.interpolateArray=hn;function pn(){return S}var yn=L.map({linear:pn,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return bn},cubic:function(){return xn},sin:function(){return wn},exp:function(){return Mn},circle:function(){return jn},elastic:function(t,n){var r;arguments.length<2&&(n=.45);r=arguments.length?n/Me*Math.asin(1/t):(t=1,n/4);return function(e){return 1+t*Math.pow(2,-10*e)*Math.sin((e-r)*Me/n)}},back:function(t){t=t||1.70158;return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return kn}}),gn=L.map({in:S,out:vn,"in-out":mn,"out-in":function(e){return mn(vn(e))}});function vn(t){return function(e){return 1-t(1-e)}}function mn(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function bn(e){return e*e}function xn(e){return e*e*e}function _n(e){if(e<=0)return 0;if(1<=e)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function wn(e){return 1-Math.cos(e*ke)}function Mn(e){return Math.pow(2,10*(e-1))}function jn(e){return 1-Math.sqrt(1-e*e)}function kn(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function On(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function An(e){var t,n,r=[e.a,e.b],i=[e.c,e.d],o=Pn(r),a=Tn(r,i),s=Pn(((s=i)[0]+=(n=-a)*(t=r)[0],s[1]+=n*t[1],s))||0;r[0]*i[1]<i[0]*r[1]&&(r[0]*=-1,r[1]*=-1,o*=-1,a*=-1),this.rotate=(o?Math.atan2(r[1],r[0]):Math.atan2(-i[0],i[1]))*Ae,this.translate=[e.e,e.f],this.scale=[o,s],this.skew=s?Math.atan2(a,s)*Ae:0}function Tn(e,t){return e[0]*t[0]+e[1]*t[1]}function Pn(e){var t=Math.sqrt(Tn(e,e));return t&&(e[0]/=t,e[1]/=t),t}L.ease=function(e){var t,n=e.indexOf("-"),r=0<=n?e.slice(0,n):e,n=0<=n?e.slice(n+1):"in",r=yn.get(r)||pn,n=gn.get(n)||S;return t=n(r.apply(null,i.call(arguments,1))),function(e){return e<=0?0:1<=e?1:t(e)}},L.interpolateHcl=function(e,t){e=L.hcl(e),t=L.hcl(t);var n=e.h,r=e.c,i=e.l,o=t.h-n,a=t.c-r,s=t.l-i;isNaN(a)&&(a=0,r=isNaN(r)?t.c:r);isNaN(o)?(o=0,n=isNaN(n)?t.h:n):180<o?o-=360:o<-180&&(o+=360);return function(e){return Ne(n+o*e,r+a*e,i+s*e)+""}},L.interpolateHsl=function(e,t){e=L.hsl(e),t=L.hsl(t);var n=e.h,r=e.s,i=e.l,o=t.h-n,a=t.s-r,s=t.l-i;isNaN(a)&&(a=0,r=isNaN(r)?t.s:r);isNaN(o)?(o=0,n=isNaN(n)?t.h:n):180<o?o-=360:o<-180&&(o+=360);return function(e){return ze(n+o*e,r+a*e,i+s*e)+""}},L.interpolateLab=function(e,t){e=L.lab(e),t=L.lab(t);var n=e.l,r=e.a,i=e.b,o=t.l-n,a=t.a-r,s=t.b-i;return function(e){return Ve(n+o*e,r+a*e,i+s*e)+""}},L.interpolateRound=On,L.transform=function(e){var n=R.createElementNS(L.ns.prefix.svg,"g");return(L.transform=function(e){var t;return null!=e&&(n.setAttribute("transform",e),t=n.transform.baseVal.consolidate()),new An(t?t.matrix:Sn)})(e)},An.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Sn={a:1,b:0,c:0,d:1,e:0,f:0};function En(e){return e.length?e.pop()+",":""}function Cn(e,t){var n,r,i,o,a,s=[],l=[];return e=L.transform(e),t=L.transform(t),r=e.translate,i=t.translate,a=s,o=l,r[0]!==i[0]||r[1]!==i[1]?(n=a.push("translate(",null,",",null,")"),o.push({i:n-4,x:ln(r[0],i[0])},{i:n-2,x:ln(r[1],i[1])})):(i[0]||i[1])&&a.push("translate("+i+")"),o=e.rotate,n=t.rotate,r=s,a=l,o!==n?(180<o-n?n+=360:180<n-o&&(o+=360),a.push({i:r.push(En(r)+"rotate(",null,")")-2,x:ln(o,n)})):n&&r.push(En(r)+"rotate("+n+")"),i=e.skew,a=t.skew,o=s,r=l,i!==a?r.push({i:o.push(En(o)+"skewX(",null,")")-2,x:ln(i,a)}):a&&o.push(En(o)+"skewX("+a+")"),n=e.scale,r=t.scale,i=s,o=l,n[0]!==r[0]||n[1]!==r[1]?(a=i.push(En(i)+"scale(",null,",",null,")"),o.push({i:a-4,x:ln(n[0],r[0])},{i:a-2,x:ln(n[1],r[1])})):1===r[0]&&1===r[1]||i.push(En(i)+"scale("+r+")"),e=t=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}function Ln(t,n){return n=(n-=t=+t)||1/n,function(e){return(e-t)/n}}function Rn(t,n){return n=(n-=t=+t)||1/n,function(e){return Math.max(0,Math.min(1,(e-t)/n))}}function In(e){for(var t=[],n=e.parent;null!=n;)t.push(e),n=(e=n).parent;return t.push(e),t}function zn(e){e.fixed|=2}function Dn(e){e.fixed&=-7}function Nn(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Fn(e){e.fixed&=-5}L.interpolateTransform=Cn,L.layout={},L.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(function(e){var t=e.source,n=e.target,r=function(e,t){if(e===t)return e;var n=In(e),r=In(t),i=n.pop(),o=r.pop(),a=null;for(;i===o;)a=i,i=n.pop(),o=r.pop();return a}(t,n),i=[t];for(;t!==r;)t=t.parent,i.push(t);var o=i.length;for(;n!==r;)i.splice(o,0,n),n=n.parent;return i}(e[n]));return t}},L.layout.chord=function(){var g,v,m,b,x,_,w,t={},M=0;function e(){var e,t,n,r,i,o={},a=[],s=L.range(b),l=[];for(g=[],v=[],e=0,r=-1;++r<b;){for(t=0,i=-1;++i<b;)t+=m[r][i];a.push(t),l.push(L.range(b)),e+=t}for(x&&s.sort(function(e,t){return x(a[e],a[t])}),_&&l.forEach(function(e,n){e.sort(function(e,t){return _(m[n][e],m[n][t])})}),e=(Me-M*b)/e,t=0,r=-1;++r<b;){for(n=t,i=-1;++i<b;){var u=s[r],c=l[u][i],f=m[u][c],d=t,h=t+=f*e;o[u+"-"+c]={index:u,subindex:c,startAngle:d,endAngle:h,value:f}}v[u]={index:u,startAngle:n,endAngle:t,value:a[u]},t+=M}for(r=-1;++r<b;)for(i=r-1;++i<b;){var p=o[r+"-"+i],y=o[i+"-"+r];(p.value||y.value)&&g.push(p.value<y.value?{source:y,target:p}:{source:p,target:y})}w&&j()}function j(){g.sort(function(e,t){return w((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}return t.matrix=function(e){return arguments.length?(b=(m=e)&&m.length,g=v=null,t):m},t.padding=function(e){return arguments.length?(M=e,g=v=null,t):M},t.sortGroups=function(e){return arguments.length?(x=e,g=v=null,t):x},t.sortSubgroups=function(e){return arguments.length?(_=e,g=null,t):_},t.sortChords=function(e){return arguments.length?(w=e,g&&j(),t):w},t.chords=function(){return g||e(),g},t.groups=function(){return v||e(),v},t},L.layout.force=function(){var f,e,d,h,p,y,i={},g=L.dispatch("start","tick","end"),v=[1,1],m=.9,o=Bn,a=Un,b=-30,x=qn,_=.1,w=.64,M=[],j=[];function t(e){e.px=L.event.x,e.py=L.event.y,i.resume()}return i.tick=function(){if((d*=.99)<.005)return f=null,g.end({type:"end",alpha:d=0}),!0;for(var e,t,n,r,i,o,a,s,l=M.length,u=j.length,c=0;c<u;++c)n=(t=j[c]).source,(i=(a=(r=t.target).x-n.x)*a+(s=r.y-n.y)*s)&&(a*=i=d*p[c]*((i=Math.sqrt(i))-h[c])/i,s*=i,r.x-=a*(o=n.weight+r.weight?n.weight/(n.weight+r.weight):.5),r.y-=s*o,n.x+=a*(o=1-o),n.y+=s*o);if((o=d*_)&&(a=v[0]/2,s=v[1]/2,c=-1,o))for(;++c<l;)(t=M[c]).x+=(a-t.x)*o,t.y+=(s-t.y)*o;if(b)for(!function e(t,n,r){var i=0,o=0;t.charge=0;if(!t.leaf)for(var a,s=t.nodes,l=s.length,u=-1;++u<l;)null!=(a=s[u])&&(e(a,n,r),t.charge+=a.charge,i+=a.charge*a.cx,o+=a.charge*a.cy);{var c;t.point&&(t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5),c=n*r[t.point.index],t.charge+=t.pointCharge=c,i+=c*t.point.x,o+=c*t.point.y)}t.cx=i/t.charge;t.cy=o/t.charge}(e=L.geom.quadtree(M),d,y),c=-1;++c<l;)(t=M[c]).fixed||e.visit(function(s){return function(e,t,n,r){if(e.point!==s){var i,o=e.cx-s.x,a=e.cy-s.y,r=r-t,t=o*o+a*a;if(r*r/w<t)return t<x&&(i=e.charge/t,s.px-=o*i,s.py-=a*i),!0;e.point&&t&&t<x&&(i=e.pointCharge/t,s.px-=o*i,s.py-=a*i)}return!e.charge}}(t));for(c=-1;++c<l;)(t=M[c]).fixed?(t.x=t.px,t.y=t.py):(t.x-=(t.px-(t.px=t.x))*m,t.y-=(t.py-(t.py=t.y))*m);g.tick({type:"tick",alpha:d})},i.nodes=function(e){return arguments.length?(M=e,i):M},i.links=function(e){return arguments.length?(j=e,i):j},i.size=function(e){return arguments.length?(v=e,i):v},i.linkDistance=function(e){return arguments.length?(o="function"==typeof e?e:+e,i):o},i.distance=i.linkDistance,i.linkStrength=function(e){return arguments.length?(a="function"==typeof e?e:+e,i):a},i.friction=function(e){return arguments.length?(m=+e,i):m},i.charge=function(e){return arguments.length?(b="function"==typeof e?e:+e,i):b},i.chargeDistance=function(e){return arguments.length?(x=e*e,i):Math.sqrt(x)},i.gravity=function(e){return arguments.length?(_=+e,i):_},i.theta=function(e){return arguments.length?(w=e*e,i):Math.sqrt(w)},i.alpha=function(e){return arguments.length?(e=+e,d?0<e?d=e:(f.c=null,f.t=NaN,f=null,g.end({type:"end",alpha:d=0})):0<e&&(g.start({type:"start",alpha:d=e}),f=ht(i.tick)),i):d},i.start=function(){for(var s,e,l=M.length,u=j.length,t=v[0],n=v[1],c=0;c<l;++c)(e=M[c]).index=c,e.weight=0;for(c=0;c<u;++c)"number"==typeof(e=j[c]).source&&(e.source=M[e.source]),"number"==typeof e.target&&(e.target=M[e.target]),++e.source.weight,++e.target.weight;for(c=0;c<l;++c)e=M[c],isNaN(e.x)&&(e.x=r("x",t)),isNaN(e.y)&&(e.y=r("y",n)),isNaN(e.px)&&(e.px=e.x),isNaN(e.py)&&(e.py=e.y);if(h=[],"function"==typeof o)for(c=0;c<u;++c)h[c]=+o.call(this,j[c],c);else for(c=0;c<u;++c)h[c]=o;if(p=[],"function"==typeof a)for(c=0;c<u;++c)p[c]=+a.call(this,j[c],c);else for(c=0;c<u;++c)p[c]=a;if(y=[],"function"==typeof b)for(c=0;c<l;++c)y[c]=+b.call(this,M[c],c);else for(c=0;c<l;++c)y[c]=b;function r(e,t){if(!s){for(s=new Array(l),o=0;o<l;++o)s[o]=[];for(o=0;o<u;++o){var n=j[o];s[n.source.index].push(n.target),s[n.target.index].push(n.source)}}for(var r,i=s[c],o=-1,a=i.length;++o<a;)if(!isNaN(r=i[o][e]))return r;return Math.random()*t}return i.resume()},i.resume=function(){return i.alpha(.1)},i.stop=function(){return i.alpha(0)},i.drag=function(){if(e=e||L.behavior.drag().origin(S).on("dragstart.force",zn).on("drag.force",t).on("dragend.force",Dn),!arguments.length)return e;this.on("mouseover.force",Nn).on("mouseout.force",Fn).call(e)},L.rebind(i,g,"on")};var Bn=20,Un=1,qn=1/0;function Hn(e,t){return L.rebind(e,t,"sort","children","value"),(e.nodes=e).links=Zn,e}function Vn(e,t){for(var n,r,i=[e];null!=(e=i.pop());)if(t(e),(r=e.children)&&(n=r.length))for(;0<=--n;)i.push(r[n])}function Gn(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(o=e.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(e=r.pop());)t(e)}function Wn(e){return e.children}function Yn(e){return e.value}function Xn(e,t){return t.value-e.value}function Zn(e){return L.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}L.layout.hierarchy=function(){var s=Xn,l=Wn,u=Yn;function c(e){var t,n,r,i,o=[e],a=[];for(e.depth=0;null!=(t=o.pop());)if(a.push(t),(r=l.call(c,t,t.depth))&&(n=r.length)){for(;0<=--n;)o.push(i=r[n]),i.parent=t,i.depth=t.depth+1;u&&(t.value=0),t.children=r}else u&&(t.value=+u.call(c,t,t.depth)||0),delete t.children;return Gn(e,function(e){var t,n;s&&(t=e.children)&&t.sort(s),u&&(n=e.parent)&&(n.value+=e.value)}),a}return c.sort=function(e){return arguments.length?(s=e,c):s},c.children=function(e){return arguments.length?(l=e,c):l},c.value=function(e){return arguments.length?(u=e,c):u},c.revalue=function(e){return u&&(Vn(e,function(e){e.children&&(e.value=0)}),Gn(e,function(e){var t;e.children||(e.value=+u.call(c,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)})),e},c},L.layout.partition=function(){var n=L.layout.hierarchy(),r=[1,1];function t(e,t){t=n.call(this,e,t);return function e(t,n,r,i){var o=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,o&&(a=o.length)){var a,s,l=-1;for(r=t.value?r/t.value:0;++l<a;)e(s=o[l],n,s=s.value*r,i),n+=s}}(t[0],0,r[0],r[1]/function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,e(n[o]));return 1+r}(t[0])),t}return t.size=function(e){return arguments.length?(r=e,t):r},Hn(t,n)},L.layout.pie=function(){var f=Number,d=$n,h=0,p=Me,y=0;function g(n){var t,e=n.length,r=n.map(function(e,t){return+f.call(g,e,t)}),i=+("function"==typeof h?h.apply(this,arguments):h),o=("function"==typeof p?p.apply(this,arguments):p)-i,a=Math.min(Math.abs(o)/e,+("function"==typeof y?y.apply(this,arguments):y)),s=a*(o<0?-1:1),l=L.sum(r),u=l?(o-e*s)/l:0,e=L.range(e),c=[];return null!=d&&e.sort(d===$n?function(e,t){return r[t]-r[e]}:function(e,t){return d(n[e],n[t])}),e.forEach(function(e){c[e]={data:n[e],value:t=r[e],startAngle:i,endAngle:i+=t*u+s,padAngle:a}}),c}return g.value=function(e){return arguments.length?(f=e,g):f},g.sort=function(e){return arguments.length?(d=e,g):d},g.startAngle=function(e){return arguments.length?(h=e,g):h},g.endAngle=function(e){return arguments.length?(p=e,g):p},g.padAngle=function(e){return arguments.length?(y=e,g):y},g};var $n={};function Kn(e){return e.x}function Qn(e){return e.y}function Jn(e,t,n){e.y0=t,e.y=n}L.layout.stack=function(){var f=S,d=nr,h=rr,p=Jn,y=Kn,g=Qn;function v(e,t){if(!(n=e.length))return e;for(var n,r,i,o=(s=e.map(function(e,t){return f.call(v,e,t)})).map(function(e){return e.map(function(e,t){return[y.call(v,e,t),g.call(v,e,t)]})}),a=d.call(v,o,t),s=L.permute(s,a),o=L.permute(o,a),l=h.call(v,o,t),u=s[0].length,c=0;c<u;++c)for(p.call(v,s[0][c],i=l[c],o[0][c][1]),r=1;r<n;++r)p.call(v,s[r][c],i+=o[r-1][c][1],o[r][c][1]);return e}return v.values=function(e){return arguments.length?(f=e,v):f},v.order=function(e){return arguments.length?(d="function"==typeof e?e:er.get(e)||nr,v):d},v.offset=function(e){return arguments.length?(h="function"==typeof e?e:tr.get(e)||rr,v):h},v.x=function(e){return arguments.length?(y=e,v):y},v.y=function(e){return arguments.length?(g=e,v):g},v.out=function(e){return arguments.length?(p=e,v):p},v};var er=L.map({"inside-out":function(e){for(var t,n=e.length,r=e.map(ir),i=e.map(or),o=L.range(n).sort(function(e,t){return r[e]-r[t]}),a=0,s=0,l=[],u=[],c=0;c<n;++c)t=o[c],a<s?(a+=i[t],l.push(t)):(s+=i[t],u.push(t));return u.reverse().concat(l)},reverse:function(e){return L.range(e.length).reverse()},default:nr}),tr=L.map({silhouette:function(e){for(var t,n,r=e.length,i=e[0].length,o=[],a=0,s=[],l=0;l<i;++l){for(n=t=0;t<r;t++)n+=e[t][l][1];a<n&&(a=n),o.push(n)}for(l=0;l<i;++l)s[l]=(a-o[l])/2;return s},wiggle:function(e){var t,n,r,i,o,a,s,l,u,c=e.length,f=e[0],d=f.length,h=[];for(h[0]=l=u=0,n=1;n<d;++n){for(i=t=0;t<c;++t)i+=e[t][n][1];for(s=f[n][o=t=0]-f[n-1][0];t<c;++t){for(r=0,a=(e[t][n][1]-e[t][n-1][1])/(2*s);r<t;++r)a+=(e[r][n][1]-e[r][n-1][1])/s;o+=a*e[t][n][1]}h[n]=l-=i?o/i*s:0,l<u&&(u=l)}for(n=0;n<d;++n)h[n]-=u;return h},expand:function(e){for(var t,n,r=e.length,i=e[0].length,o=1/r,a=[],s=0;s<i;++s){for(n=t=0;t<r;t++)n+=e[t][s][1];if(n)for(t=0;t<r;t++)e[t][s][1]/=n;else for(t=0;t<r;t++)e[t][s][1]=o}for(s=0;s<i;++s)a[s]=0;return a},zero:rr});function nr(e){return L.range(e.length)}function rr(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function ir(e){for(var t,n=1,r=0,i=e[0][1],o=e.length;n<o;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function or(e){return e.reduce(ar,0)}function ar(e,t){return e+t[1]}function sr(e,t){return lr(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function lr(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,o=[];++n<=t;)o[n]=i*n+r;return o}function ur(e){return[L.min(e),L.max(e)]}function cr(e,t){return e.value-t.value}function fr(e,t){var n=e._pack_next;(e._pack_next=t)._pack_prev=e,(t._pack_next=n)._pack_prev=t}function dr(e,t){(e._pack_next=t)._pack_prev=e}function hr(e,t){var n=t.x-e.x,r=t.y-e.y,t=e.r+t.r;return n*n+r*r<.999*t*t}function pr(e){if((t=e.children)&&(a=t.length)){var t,n,r,i,o,a,s=1/0,l=-1/0,u=1/0,c=-1/0;if(t.forEach(yr),(n=t[0]).x=-n.r,n.y=0,b(n),1<a&&((r=t[1]).x=r.r,r.y=0,b(r),2<a))for(vr(n,r,i=t[2]),b(i),fr(n,i),fr(n._pack_prev=i,r),r=n._pack_next,m=3;m<a;m++){vr(n,r,i=t[m]);for(var f=0,d=1,h=1,p=r._pack_next;p!==r;p=p._pack_next,d++)if(hr(p,i)){f=1;break}if(1==f)for(o=n._pack_prev;o!==p._pack_prev&&!hr(o,i);o=o._pack_prev,h++);f?(d<h||d==h&&r.r<n.r?dr(n,r=p):dr(n=o,r),m--):(fr(n,i),b(r=i))}for(var y=(s+l)/2,g=(u+c)/2,v=0,m=0;m<a;m++)(i=t[m]).x-=y,i.y-=g,v=Math.max(v,i.r+Math.sqrt(i.x*i.x+i.y*i.y));e.r=v,t.forEach(gr)}function b(e){s=Math.min(e.x-e.r,s),l=Math.max(e.x+e.r,l),u=Math.min(e.y-e.r,u),c=Math.max(e.y+e.r,c)}}function yr(e){e._pack_next=e._pack_prev=e}function gr(e){delete e._pack_next,delete e._pack_prev}function vr(e,t,n){var r,i,o=e.r+n.r,a=t.x-e.x,s=t.y-e.y;o&&(a||s)?(r=t.r+n.r,t=.5+((o*=o)-(r*=r))/(2*(i=a*a+s*s)),i=Math.sqrt(Math.max(0,2*r*(o+i)-(o-=i)*o-r*r))/(2*i),n.x=e.x+t*a+i*s,n.y=e.y+t*s-i*a):(n.x=e.x+o,n.y=e.y)}function mr(e,t){return e.parent==t.parent?1:2}function br(e){var t=e.children;return t.length?t[0]:e.t}function xr(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function _r(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function wr(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],t=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),t<0&&(r+=t/2,t=0),{x:n,y:r,dx:i,dy:t}}function Mr(e){var t=e[0],e=e[e.length-1];return t<e?[t,e]:[e,t]}function jr(e){return e.rangeExtent?e.rangeExtent():Mr(e.range())}function kr(e,t,n,r){var i=n(e[0],e[1]),o=r(t[0],t[1]);return function(e){return o(i(e))}}function Or(e,t){var n,r=0,i=e.length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function Ar(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Tr}L.layout.histogram=function(){var f=!0,d=Number,h=ur,p=sr;function n(e,t){for(var n,r,i=[],o=e.map(d,this),a=h.call(this,o,t),s=p.call(this,a,o,t),t=-1,l=o.length,u=s.length-1,c=f?1:1/l;++t<u;)(n=i[t]=[]).dx=s[t+1]-(n.x=s[t]),n.y=0;if(0<u)for(t=-1;++t<l;)(r=o[t])>=a[0]&&r<=a[1]&&((n=i[L.bisect(s,r,1,u)-1]).y+=c,n.push(e[t]));return i}return n.value=function(e){return arguments.length?(d=e,n):d},n.range=function(e){return arguments.length?(h=ot(e),n):h},n.bins=function(t){return arguments.length?(p="number"==typeof t?function(e){return lr(e,t)}:ot(t),n):p},n.frequency=function(e){return arguments.length?(f=!!e,n):f},n},L.layout.pack=function(){var a,s=L.layout.hierarchy().sort(cr),l=0,u=[1,1];function t(e,t){var n,r=s.call(this,e,t),i=r[0],e=u[0],t=u[1],o=null==a?Math.sqrt:"function"==typeof a?a:function(){return a};return i.x=i.y=0,Gn(i,function(e){e.r=+o(e.value)}),Gn(i,pr),l&&(n=l*(a?1:Math.max(2*i.r/e,2*i.r/t))/2,Gn(i,function(e){e.r+=n}),Gn(i,pr),Gn(i,function(e){e.r-=n})),function e(t,n,r,i){var o=t.children;t.x=n+=i*t.x;t.y=r+=i*t.y;t.r*=i;if(o)for(var a=-1,s=o.length;++a<s;)e(o[a],n,r,i)}(i,e/2,t/2,a?1:1/Math.max(2*i.r/e,2*i.r/t)),r}return t.size=function(e){return arguments.length?(u=e,t):u},t.radius=function(e){return arguments.length?(a=null==e||"function"==typeof e?e:+e,t):a},t.padding=function(e){return arguments.length?(l=+e,t):l},Hn(t,s)},L.layout.tree=function(){var u=L.layout.hierarchy().sort(null).value(null),d=mr,c=[1,1],f=null;function t(e,t){var n,r,i,o,a,s,l=u.call(this,e,t),e=l[0],t=function(e){var t,e={A:null,children:[e]},n=[e];for(;null!=(t=n.pop());)for(var r,i=t.children,o=0,a=i.length;o<a;++o)n.push((i[o]=r={_:i[o],parent:t,children:(r=i[o].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=r);return e.children[0]}(e);return Gn(t,h),t.parent.m=-t.z,Vn(t,p),f?Vn(e,y):(Vn(i=r=n=e,function(e){e.x<n.x&&(n=e),e.x>r.x&&(r=e),e.depth>i.depth&&(i=e)}),o=d(n,r)/2-n.x,a=c[0]/(r.x+d(r,n)/2+o),s=c[1]/(i.depth||1),Vn(e,function(e){e.x=(e.x+o)*a,e.y=e.depth*s})),l}function h(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;t.length?(function(e){var t,n=0,r=0,i=e.children,o=i.length;for(;0<=--o;)(t=i[o]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e),t=(t[0].z+t[t.length-1].z)/2,r?(e.z=r.z+d(e._,r._),e.m=e.z-t):e.z=t):r&&(e.z=r.z+d(e._,r._)),e.parent.A=function(e,t,n){if(t){for(var r,i=e,o=e,a=t,s=i.parent.children[0],l=i.m,u=o.m,c=a.m,f=s.m;a=xr(a),i=br(i),a&&i;)s=br(s),(o=xr(o)).a=e,0<(r=a.z+c-i.z-l+d(a._,i._))&&(function(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}(function(e,t,n){return e.a.parent===t.parent?e.a:n}(a,e,n),e,r),l+=r,u+=r),c+=a.m,l+=i.m,f+=s.m,u+=o.m;a&&!xr(o)&&(o.t=a,o.m+=c-u),i&&!br(s)&&(s.t=i,s.m+=l-f,n=e)}return n}(e,r,e.parent.A||n[0])}function p(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function y(e){e.x*=c[0],e.y=e.depth*c[1]}return t.separation=function(e){return arguments.length?(d=e,t):d},t.size=function(e){return arguments.length?(f=null==(c=e)?y:null,t):f?null:c},t.nodeSize=function(e){return arguments.length?(f=null==(c=e)?null:y,t):f?c:null},Hn(t,u)},L.layout.cluster=function(){var l=L.layout.hierarchy().sort(null).value(null),u=mr,c=[1,1],f=!1;function t(e,t){var r,n=l.call(this,e,t),i=n[0],o=0;Gn(i,function(e){var t,n=e.children;n&&n.length?(e.x=(t=n).reduce(function(e,t){return e+t.x},0)/t.length,e.y=1+L.max(n,function(e){return e.y})):(e.x=r?o+=u(e,r):0,e.y=0,r=e)});var e=function e(t){var n=t.children;return n&&n.length?e(n[0]):t}(i),t=function e(t){var n,r=t.children;return r&&(n=r.length)?e(r[n-1]):t}(i),a=e.x-u(e,t)/2,s=t.x+u(t,e)/2;return Gn(i,f?function(e){e.x=(e.x-i.x)*c[0],e.y=(i.y-e.y)*c[1]}:function(e){e.x=(e.x-a)/(s-a)*c[0],e.y=(1-(i.y?e.y/i.y:1))*c[1]}),n}return t.separation=function(e){return arguments.length?(u=e,t):u},t.size=function(e){return arguments.length?(f=null==(c=e),t):f?null:c},t.nodeSize=function(e){return arguments.length?(f=null!=(c=e),t):f?c:null},Hn(t,l)},L.layout.treemap=function(){var n,r=L.layout.hierarchy(),c=Math.round,i=[1,1],o=null,u=_r,a=!1,f="squarify",d=.5*(1+Math.sqrt(5));function h(e,t){for(var n,r,i=-1,o=e.length;++i<o;)r=(n=e[i]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function p(e){var t=e.children;if(t&&t.length){var n,r,i=u(e),o=[],a=t.slice(),s=1/0,l="slice"===f?i.dx:"dice"===f?i.dy:"slice-dice"===f?1&e.depth?i.dy:i.dx:Math.min(i.dx,i.dy);for(h(a,i.dx*i.dy/e.value),o.area=0;0<(r=a.length);)o.push(r=a[r-1]),o.area+=r.area,s="squarify"!==f||(n=function(e,t){var n,r=e.area,i=0,o=1/0,a=-1,s=e.length;for(;++a<s;)(n=e[a].area)&&(n<o&&(o=n),i<n&&(i=n));return t*=t,(r*=r)?Math.max(t*i*d/r,r/(t*o*d)):1/0}(o,l))<=s?(a.pop(),n):(o.area-=o.pop().area,y(o,l,i,!1),l=Math.min(i.dx,i.dy),1/(o.length=o.area=0));o.length&&(y(o,l,i,!0),o.length=o.area=0),t.forEach(p)}}function s(e){var t=e.children;if(t&&t.length){var n,r=u(e),i=t.slice(),o=[];for(h(i,r.dx*r.dy/e.value),o.area=0;n=i.pop();)o.push(n),o.area+=n.area,null!=n.z&&(y(o,n.z?r.dx:r.dy,r,!i.length),o.length=o.area=0);t.forEach(s)}}function y(e,t,n,r){var i,o=-1,a=e.length,s=n.x,l=n.y,u=t?c(e.area/t):0;if(t==n.dx){for((r||u>n.dy)&&(u=n.dy);++o<a;)(i=e[o]).x=s,i.y=l,i.dy=u,s+=i.dx=Math.min(n.x+n.dx-s,u?c(i.area/u):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=u,n.dy-=u}else{for((r||u>n.dx)&&(u=n.dx);++o<a;)(i=e[o]).x=s,i.y=l,i.dx=u,l+=i.dy=Math.min(n.y+n.dy-l,u?c(i.area/u):0);i.z=!1,i.dy+=n.y+n.dy-l,n.x+=u,n.dx-=u}}function l(e){var t=n||r(e),e=t[0];return e.x=e.y=0,e.value?(e.dx=i[0],e.dy=i[1]):e.dx=e.dy=0,n&&r.revalue(e),h([e],e.dx*e.dy/e.value),(n?s:p)(e),a&&(n=t),t}return l.size=function(e){return arguments.length?(i=e,l):i},l.padding=function(n){return arguments.length?(u=null==(o=n)?_r:"function"===(t=Hi(n))?function(e){var t=n.call(l,e,e.depth);return null==t?_r(e):wr(e,"number"==typeof t?[t,t,t,t]:t)}:("number"===t&&(n=[n,n,n,n]),e),l):o;function e(e){return wr(e,n)}var t},l.round=function(e){return arguments.length?(c=e?Math.round:Number,l):c!=Number},l.sticky=function(e){return arguments.length?(a=e,n=null,l):a},l.ratio=function(e){return arguments.length?(d=e,l):d},l.mode=function(e){return arguments.length?(f=e+"",l):f},Hn(l,r)},L.random={normal:function(r,i){var e=arguments.length;return e<2&&(i=1),e<1&&(r=0),function(){for(var e,t,n;!(n=(e=2*Math.random()-1)*e+(t=2*Math.random()-1)*t)||1<n;);return r+i*e*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var e=L.random.normal.apply(L,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=L.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(n){return function(){for(var e=0,t=0;t<n;t++)e+=Math.random();return e}}},L.scale={};var Tr={floor:S,ceil:S};function Pr(n,e,t,r){var i=[],o=[],a=0,s=Math.min(n.length,e.length)-1;for(n[s]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++a<=s;)i.push(t(n[a-1],n[a])),o.push(r(e[a-1],e[a]));return function(e){var t=L.bisect(n,e,1,s)-1;return o[t](i[t](e))}}function Sr(e,t){return L.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Er(e,t){return Or(e,Ar(Cr(e,t)[2])),Or(e,Ar(Cr(e,t)[2])),e}function Cr(e,t){null==t&&(t=10);var n=Mr(e),r=n[1]-n[0],e=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),r=t/r*e;return r<=.15?e*=10:r<=.35?e*=5:r<=.75&&(e*=2),n[0]=Math.ceil(n[0]/e)*e,n[1]=Math.floor(n[1]/e)*e+.5*e,n[2]=e,n}function Lr(e,t){return L.range.apply(L,Cr(e,t))}L.scale.linear=function(){return function e(n,r,i,o){var a,s;function t(){var e=2<Math.min(n.length,r.length)?Pr:kr,t=o?Rn:Ln;return a=e(n,r,t,i),s=e(r,n,t,dn),l}function l(e){return a(e)}l.invert=function(e){return s(e)};l.domain=function(e){return arguments.length?(n=e.map(Number),t()):n};l.range=function(e){return arguments.length?(r=e,t()):r};l.rangeRound=function(e){return l.range(e).interpolate(On)};l.clamp=function(e){return arguments.length?(o=e,t()):o};l.interpolate=function(e){return arguments.length?(i=e,t()):i};l.ticks=function(e){return Lr(n,e)};l.tickFormat=function(e,t){return d3_scale_linearTickFormat(n,e,t)};l.nice=function(e){return Er(n,e),t()};l.copy=function(){return e(n,r,i,o)};return t()}([0,1],[0,1],dn,!1)};L.scale.log=function(){return function e(t,l,u,c){function f(e){return(u?Math.log(e<0?0:e):-Math.log(0<e?0:-e))/Math.log(l)}function d(e){return u?Math.pow(l,e):-Math.pow(l,-e)}function n(e){return t(f(e))}n.invert=function(e){return d(t.invert(e))};n.domain=function(e){return arguments.length?(u=0<=e[0],t.domain((c=e.map(Number)).map(f)),n):c};n.base=function(e){return arguments.length?(l=+e,t.domain(c.map(f)),n):l};n.nice=function(){var e=Or(c.map(f),u?Math:Rr);return t.domain(e),c=e.map(d),n};n.ticks=function(){var e=Mr(c),t=[],n=e[0],r=e[1],i=Math.floor(f(n)),o=Math.ceil(f(r)),a=l%1?2:l;if(isFinite(o-i)){if(u){for(;i<o;i++)for(var s=1;s<a;s++)t.push(d(i)*s);t.push(d(i))}else for(t.push(d(i));i++<o;)for(s=a-1;0<s;s--)t.push(d(i)*s);for(i=0;t[i]<n;i++);for(o=t.length;t[o-1]>r;o--);t=t.slice(i,o)}return t};n.copy=function(){return e(t.copy(),l,u,c)};return Sr(n,t)}(L.scale.linear().domain([0,1]),10,!0,[1,10])};var Rr={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function Ir(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}L.scale.pow=function(){return function e(t,n,r){var i=Ir(n),o=Ir(1/n);function a(e){return t(i(e))}a.invert=function(e){return o(t.invert(e))};a.domain=function(e){return arguments.length?(t.domain((r=e.map(Number)).map(i)),a):r};a.ticks=function(e){return Lr(r,e)};a.tickFormat=function(e,t){return d3_scale_linearTickFormat(r,e,t)};a.nice=function(e){return a.domain(Er(r,e))};a.exponent=function(e){return arguments.length?(i=Ir(n=e),o=Ir(1/n),t.domain(r.map(i)),a):n};a.copy=function(){return e(t.copy(),n,r)};return Sr(a,t)}(L.scale.linear(),1,[0,1])},L.scale.sqrt=function(){return L.scale.pow().exponent(.5)},L.scale.ordinal=function(){return function e(o,a){var i,s,l;function u(e){return s[((i.get(e)||("range"===a.t?i.set(e,o.push(e)):NaN))-1)%s.length]}function c(t,n){return L.range(o.length).map(function(e){return t+n*e})}u.domain=function(e){if(!arguments.length)return o;o=[],i=new m;for(var t,n=-1,r=e.length;++n<r;)i.has(t=e[n])||i.set(t,o.push(t));return u[a.t].apply(u,a.a)};u.range=function(e){return arguments.length?(s=e,l=0,a={t:"range",a:arguments},u):s};u.rangePoints=function(e,t){arguments.length<2&&(t=0);var n=e[0],e=e[1],e=o.length<2?(n=(n+e)/2,0):(e-n)/(o.length-1+t);return s=c(n+e*t/2,e),l=0,a={t:"rangePoints",a:arguments},u};u.rangeRoundPoints=function(e,t){arguments.length<2&&(t=0);var n=e[0],r=e[1],e=o.length<2?(n=r=Math.round((n+r)/2),0):(r-n)/(o.length-1+t)|0;return s=c(n+Math.round(e*t/2+(r-n-(o.length-1+t)*e)/2),e),l=0,a={t:"rangeRoundPoints",a:arguments},u};u.rangeBands=function(e,t,n){arguments.length<2&&(t=0),arguments.length<3&&(n=t);var r=e[1]<e[0],i=e[+r],e=e[1-r],e=(e-i)/(o.length-t+2*n);return s=c(i+e*n,e),r&&s.reverse(),l=e*(1-t),a={t:"rangeBands",a:arguments},u};u.rangeRoundBands=function(e,t,n){arguments.length<2&&(t=0),arguments.length<3&&(n=t);var r=e[1]<e[0],i=e[+r],e=e[1-r],n=Math.floor((e-i)/(o.length-t+2*n));return s=c(i+Math.round((e-i-(o.length-t)*n)/2),n),r&&s.reverse(),l=Math.round(n*(1-t)),a={t:"rangeRoundBands",a:arguments},u};u.rangeBand=function(){return l};u.rangeExtent=function(){return Mr(a.a[0])};u.copy=function(){return e(o,a)};return u.domain(o)}([],{t:"range",a:[[]]})},L.scale.category10=function(){return L.scale.ordinal().range(zr)},L.scale.category20=function(){return L.scale.ordinal().range(Dr)},L.scale.category20b=function(){return L.scale.ordinal().range(Nr)},L.scale.category20c=function(){return L.scale.ordinal().range(Fr)};var zr=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ke),Dr=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Ke),Nr=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Ke),Fr=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Ke);function Br(){return 0}L.scale.quantile=function(){return function e(n,r){var i;function t(){var e=0,t=r.length;for(i=[];++e<t;)i[e-1]=L.quantile(n,e/t);return o}function o(e){if(!isNaN(e=+e))return r[L.bisect(i,e)]}o.domain=function(e){return arguments.length?(n=e.map(u).filter(c).sort(l),t()):n};o.range=function(e){return arguments.length?(r=e,t()):r};o.quantiles=function(){return i};o.invertExtent=function(e){return(e=r.indexOf(e))<0?[NaN,NaN]:[0<e?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]};o.copy=function(){return e(n,r)};return t()}([],[])},L.scale.quantize=function(){return function e(t,n,r){var i,o;function a(e){return r[Math.max(0,Math.min(o,Math.floor(i*(e-t))))]}function s(){return i=r.length/(n-t),o=r.length-1,a}a.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],s()):[t,n]};a.range=function(e){return arguments.length?(r=e,s()):r};a.invertExtent=function(e){return[e=(e=r.indexOf(e))<0?NaN:e/i+t,e+1/i]};a.copy=function(){return e(t,n,r)};return s()}(0,1,[0,1])},L.scale.threshold=function(){return function e(t,n){function r(e){if(e<=e)return n[L.bisect(t,e)]}r.domain=function(e){return arguments.length?(t=e,r):t};r.range=function(e){return arguments.length?(n=e,r):n};r.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]};r.copy=function(){return e(t,n)};return r}([.5],[0,1])},L.scale.identity=function(){return function e(n){function t(e){return+e}t.invert=t;t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n};t.ticks=function(e){return Lr(n,e)};t.tickFormat=function(e,t){return d3_scale_linearTickFormat(n,e,t)};t.copy=function(){return e(n)};return t}([0,1])},L.svg={},L.svg.arc=function(){var O=qr,A=Hr,T=Br,P=Ur,S=Vr,E=Gr,C=Wr;function t(){var e=Math.max(0,+O.apply(this,arguments)),t=Math.max(0,+A.apply(this,arguments)),n=S.apply(this,arguments)-ke,r=E.apply(this,arguments)-ke,i=Math.abs(r-n),o=r<n?0:1;if(t<e&&(a=t,t=e,e=a),je<=i)return L(t,o)+(e?L(e,1-o):"")+"Z";var a,s,l,u,c,f,d,h,p,y,g,v,m,b,x,_,w,M=0,j=0,k=[];return(l=(+C.apply(this,arguments)||0)/2)&&(s=P===Ur?Math.sqrt(e*e+t*t):+P.apply(this,arguments),o||(j*=-1),t&&(j=Te(s/t*Math.sin(l))),e&&(M=Te(s/e*Math.sin(l)))),t?(f=t*Math.cos(n+j),d=t*Math.sin(n+j),h=t*Math.cos(r-j),u=t*Math.sin(r-j),c=Math.abs(r-n-2*j)<=we?0:1,j&&Yr(f,d,h,u)===o^c&&(_=(n+r)/2,f=t*Math.cos(_),d=t*Math.sin(_),h=u=null)):f=d=0,e?(g=e*Math.cos(r-M),v=e*Math.sin(r-M),m=e*Math.cos(n+M),p=e*Math.sin(n+M),y=Math.abs(n-r+2*M)<=we?0:1,M&&Yr(g,v,m,p)===1-o^y&&(b=(n+r)/2,g=e*Math.cos(b),v=e*Math.sin(b),m=p=null)):g=v=0,xe<i&&.001<(a=Math.min(Math.abs(t-e)/2,+T.apply(this,arguments)))?(j=e<t^o?0:1,M=_=a,i<we&&(r=f-(n=null==m?[g,v]:null==h?[f,d]:Mt([f,d],[m,p],[h,u],[g,v]))[0],b=d-n[1],i=h-n[0],x=u-n[1],x=1/Math.sin(Math.acos((r*i+b*x)/(Math.sqrt(r*r+b*b)*Math.sqrt(i*i+x*x)))/2),n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),M=Math.min(a,(e-n)/(x-1)),_=Math.min(a,(t-n)/(1+x))),null!=h?(x=Xr(null==m?[g,v]:[m,p],[f,d],t,_,o),w=Xr([h,u],[g,v],t,_,o),a===_?k.push("M",x[0],"A",_,",",_," 0 0,",j," ",x[1],"A",t,",",t," 0 ",1-o^Yr(x[1][0],x[1][1],w[1][0],w[1][1]),",",o," ",w[1],"A",_,",",_," 0 0,",j," ",w[0]):k.push("M",x[0],"A",_,",",_," 0 1,",j," ",w[0])):k.push("M",f,",",d),null!=m?(_=Xr([f,d],[m,p],e,-M,o),w=Xr([g,v],null==h?[f,d]:[h,u],e,-M,o),a===M?k.push("L",w[0],"A",M,",",M," 0 0,",j," ",w[1],"A",e,",",e," 0 ",o^Yr(w[1][0],w[1][1],_[1][0],_[1][1]),",",1-o," ",_[1],"A",M,",",M," 0 0,",j," ",_[0]):k.push("L",w[0],"A",M,",",M," 0 0,",j," ",_[0])):k.push("L",g,",",v)):(k.push("M",f,",",d),null!=h&&k.push("A",t,",",t," 0 ",c,",",o," ",h,",",u),k.push("L",g,",",v),null!=m&&k.push("A",e,",",e," 0 ",y,",",1-o," ",m,",",p)),k.push("Z"),k.join("")}function L(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return t.innerRadius=function(e){return arguments.length?(O=ot(e),t):O},t.outerRadius=function(e){return arguments.length?(A=ot(e),t):A},t.cornerRadius=function(e){return arguments.length?(T=ot(e),t):T},t.padRadius=function(e){return arguments.length?(P=e==Ur?Ur:ot(e),t):P},t.startAngle=function(e){return arguments.length?(S=ot(e),t):S},t.endAngle=function(e){return arguments.length?(E=ot(e),t):E},t.padAngle=function(e){return arguments.length?(C=ot(e),t):C},t.centroid=function(){var e=(+O.apply(this,arguments)+ +A.apply(this,arguments))/2,t=(+S.apply(this,arguments)+ +E.apply(this,arguments))/2-ke;return[Math.cos(t)*e,Math.sin(t)*e]},t};var Ur="auto";function qr(e){return e.innerRadius}function Hr(e){return e.outerRadius}function Vr(e){return e.startAngle}function Gr(e){return e.endAngle}function Wr(e){return e&&e.padAngle}function Yr(e,t,n,r){return 0<(e-n)*t-(t-r)*e?0:1}function Xr(e,t,n,r,i){var o=e[0]-t[0],a=e[1]-t[1],s=(i?r:-r)/Math.sqrt(o*o+a*a),l=s*a,u=-s*o,c=e[0]+l,f=e[1]+u,d=t[0]+l,h=t[1]+u,i=(c+d)/2,a=(f+h)/2,s=d-c,o=h-f,e=s*s+o*o,t=n-r,r=c*h-d*f,c=(o<0?-1:1)*Math.sqrt(Math.max(0,t*t*e-r*r)),h=(r*o-s*c)/e,d=(-r*s-o*c)/e,f=(r*o+s*c)/e,o=(-r*s+o*c)/e,c=h-i,e=d-a,i=f-i,a=o-a;return i*i+a*a<c*c+e*e&&(h=f,d=o),[[h-l,d-u],[h*n/t,d*n/t]]}function Zr(){return!0}function $r(u){var c=vt,f=mt,d=Zr,h=Qr,t=h.key,p=.7;function n(e){var t,n=[],r=[],i=-1,o=e.length,a=ot(c),s=ot(f);function l(){n.push("M",h(u(r),p))}for(;++i<o;)d.call(this,t=e[i],i)?r.push([+a.call(this,t,i),+s.call(this,t,i)]):r.length&&(l(),r=[]);return r.length&&l(),n.length?n.join(""):null}return n.x=function(e){return arguments.length?(c=e,n):c},n.y=function(e){return arguments.length?(f=e,n):f},n.defined=function(e){return arguments.length?(d=e,n):d},n.interpolate=function(e){return arguments.length?(t="function"==typeof e?h=e:(h=Kr.get(e)||Qr).key,n):t},n.tension=function(e){return arguments.length?(p=e,n):p},n}L.svg.line=function(){return $r(S)};var Kr=L.map({linear:Qr,"linear-closed":Jr,step:function(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];for(;++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);1<n&&i.push("H",r[0]);return i.join("")},"step-before":ei,"step-after":ti,basis:ii,"basis-open":function(e){if(e.length<4)return Qr(e);var t,n=[],r=-1,i=e.length,o=[0],a=[0];for(;++r<3;)t=e[r],o.push(t[0]),a.push(t[1]);n.push(oi(li,o)+","+oi(li,a)),--r;for(;++r<i;)t=e[r],o.shift(),o.push(t[0]),a.shift(),a.push(t[1]),ui(n,o,a);return n.join("")},"basis-closed":function(e){var t,n,r=-1,i=e.length,o=i+4,a=[],s=[];for(;++r<4;)n=e[r%i],a.push(n[0]),s.push(n[1]);t=[oi(li,a),",",oi(li,s)],--r;for(;++r<o;)n=e[r%i],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),ui(t,a,s);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var r,i,o=e[0][0],a=e[0][1],s=e[n][0]-o,l=e[n][1]-a,u=-1;++u<=n;)r=e[u],i=u/n,r[0]=t*r[0]+(1-t)*(o+i*s),r[1]=t*r[1]+(1-t)*(a+i*l);return ii(e)},cardinal:function(e,t){return e.length<3?Qr(e):e[0]+ni(e,ri(e,t))},"cardinal-open":function(e,t){return e.length<4?Qr(e):e[1]+ni(e.slice(1,-1),ri(e,t))},"cardinal-closed":function(e,t){return e.length<3?Jr(e):e[0]+ni((e.push(e[0]),e),ri([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?Qr(e):e[0]+ni(e,function(e){var t,n,r,i,o=[],a=function(e){var t=0,n=e.length-1,r=[],i=e[0],o=e[1],a=r[0]=ci(i,o);for(;++t<n;)r[t]=(a+(a=ci(i=o,o=e[t+1])))/2;return r[t]=a,r}(e),s=-1,l=e.length-1;for(;++s<l;)t=ci(e[s],e[s+1]),O(t)<xe?a[s]=a[s+1]=0:(n=a[s]/t,r=a[s+1]/t,9<(i=n*n+r*r)&&(i=3*t/Math.sqrt(i),a[s]=i*n,a[s+1]=i*r));s=-1;for(;++s<=l;)i=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}(e))}});function Qr(e){return 1<e.length?e.join("L"):e+"Z"}function Jr(e){return e.join("L")+"Z"}function ei(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function ti(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function ni(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return Qr(e);var n=e.length!=t.length,r="",i=e[0],o=e[1],a=t[0],s=a,l=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=e[1],l=2),1<t.length){s=t[1],o=e[l],l++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var u=2;u<t.length;u++,l++)o=e[l],s=t[u],r+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}return n&&(n=e[l],r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+n[0]+","+n[1]),r}function ri(e,t){for(var n,r=[],i=(1-t)/2,o=e[0],a=e[1],s=1,l=e.length;++s<l;)n=o,o=a,a=e[s],r.push([i*(a[0]-n[0]),i*(a[1]-n[1])]);return r}function ii(e){if(e.length<3)return Qr(e);var t=1,n=e.length,r=e[0],i=r[0],o=r[1],a=[i,i,i,(r=e[1])[0]],s=[o,o,o,r[1]],l=[i,",",o,"L",oi(li,a),",",oi(li,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),ui(l,a,s);return e.pop(),l.push("L",r),l.join("")}function oi(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}Kr.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var ai=[0,2/3,1/3,0],si=[0,1/3,2/3,0],li=[0,1/6,2/3,1/6];function ui(e,t,n){e.push("C",oi(ai,t),",",oi(ai,n),",",oi(si,t),",",oi(si,n),",",oi(li,t),",",oi(li,n))}function ci(e,t){return(t[1]-e[1])/(t[0]-e[0])}function fi(e){for(var t,n,r,i=-1,o=e.length;++i<o;)n=(t=e[i])[0],r=t[1]-ke,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function di(p){var y=vt,g=vt,v=0,m=mt,b=Zr,x=Qr,t=x.key,_=x,w="L",M=.7;function n(e){var t,n,r,i=[],o=[],a=[],s=-1,l=e.length,u=ot(y),c=ot(v),f=y===g?function(){return n}:ot(g),d=v===m?function(){return r}:ot(m);function h(){i.push("M",x(p(a),M),w,_(p(o.reverse()),M),"Z")}for(;++s<l;)b.call(this,t=e[s],s)?(o.push([n=+u.call(this,t,s),r=+c.call(this,t,s)]),a.push([+f.call(this,t,s),+d.call(this,t,s)])):o.length&&(h(),o=[],a=[]);return o.length&&h(),i.length?i.join(""):null}return n.x=function(e){return arguments.length?(y=g=e,n):g},n.x0=function(e){return arguments.length?(y=e,n):y},n.x1=function(e){return arguments.length?(g=e,n):g},n.y=function(e){return arguments.length?(v=m=e,n):m},n.y0=function(e){return arguments.length?(v=e,n):v},n.y1=function(e){return arguments.length?(m=e,n):m},n.defined=function(e){return arguments.length?(b=e,n):b},n.interpolate=function(e){return arguments.length?(t="function"==typeof e?x=e:(x=Kr.get(e)||Qr).key,_=x.reverse||x,w=x.closed?"M":"L",n):t},n.tension=function(e){return arguments.length?(M=e,n):M},n}function hi(e){return e.source}function pi(e){return e.target}function yi(e){return e.radius}function gi(e){return[e.x,e.y]}function vi(){return 64}function mi(){return"circle"}function bi(e){e=Math.sqrt(e/we);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}L.svg.line.radial=function(){var e=$r(fi);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},(ei.reverse=ti).reverse=ei,L.svg.area=function(){return di(S)},L.svg.area.radial=function(){var e=di(fi);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},L.svg.chord=function(){var i=hi,o=pi,a=yi,s=Vr,l=Gr;function t(e,t){var n=u(this,i,e,t),r=u(this,o,e,t);return"M"+n.p0+c(n.r,n.p1,n.a1-n.a0)+(e=r,(t=n).a0==e.a0&&t.a1==e.a1?f(n.r,n.p1,n.r,n.p0):f(n.r,n.p1,r.r,r.p0)+c(r.r,r.p1,r.a1-r.a0)+f(r.r,r.p1,n.r,n.p0))+"Z"}function u(e,t,n,r){var i=t.call(e,n,r),t=a.call(e,i,r),n=s.call(e,i,r)-ke,r=l.call(e,i,r)-ke;return{r:t,a0:n,a1:r,p0:[t*Math.cos(n),t*Math.sin(n)],p1:[t*Math.cos(r),t*Math.sin(r)]}}function c(e,t,n){return"A"+e+","+e+" 0 "+ +(we<n)+",1 "+t}function f(e,t,n,r){return"Q 0,0 "+r}return t.radius=function(e){return arguments.length?(a=ot(e),t):a},t.source=function(e){return arguments.length?(i=ot(e),t):i},t.target=function(e){return arguments.length?(o=ot(e),t):o},t.startAngle=function(e){return arguments.length?(s=ot(e),t):s},t.endAngle=function(e){return arguments.length?(l=ot(e),t):l},t},L.svg.diagonal=function(){var r=hi,i=pi,o=gi;function t(e,t){var n=r.call(this,e,t),e=i.call(this,e,t),t=(n.y+e.y)/2,e=[n,{x:n.x,y:t},{x:e.x,y:t},e];return"M"+(e=e.map(o))[0]+"C"+e[1]+" "+e[2]+" "+e[3]}return t.source=function(e){return arguments.length?(r=ot(e),t):r},t.target=function(e){return arguments.length?(i=ot(e),t):i},t.projection=function(e){return arguments.length?(o=e,t):o},t},L.svg.diagonal.radial=function(){var e=L.svg.diagonal(),t=gi,r=e.projection;return e.projection=function(e){return arguments.length?r((n=t=e,function(){var e=n.apply(this,arguments),t=e[0],e=e[1]-ke;return[t*Math.cos(e),t*Math.sin(e)]})):t;var n},e},L.svg.symbol=function(){var n=mi,r=vi;function t(e,t){return(xi.get(n.call(this,e,t))||bi)(r.call(this,e,t))}return t.type=function(e){return arguments.length?(n=ot(e),t):n},t.size=function(e){return arguments.length?(r=ot(e),t):r},t};var xi=L.map({circle:bi,cross:function(e){e=Math.sqrt(e/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*wi)),e=t*wi;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(e){e=Math.sqrt(e)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/_i),e=t*_i/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/_i),e=t*_i/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});L.svg.symbolTypes=xi.keys();var _i=Math.sqrt(3),wi=Math.tan(30*Oe);V.transition=function(e){for(var t,n,r=Oi||++Pi,i=Ci(e),o=[],a=Ai||{time:Date.now(),ease:_n,delay:0,duration:250},s=-1,l=this.length;++s<l;){o.push(t=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(n=u[c])&&Li(n,c,i,r,a),t.push(n)}return ki(o,i,r)},V.interrupt=function(e){return this.each(null==e?Mi:ji(Ci(e)))};var Mi=ji(Ci());function ji(r){return function(){var e,t,n;(e=this[r])&&(n=e[t=e.active])&&(n.timer.c=null,n.timer.t=NaN,--e.count?delete e[t]:delete this[r],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function ki(e,t,n){return F(e,Ti),e.namespace=t,e.id=n,e}var Oi,Ai,Ti=[],Pi=0;function Si(e,r,i,o){var a=e.id,s=e.namespace;return se(e,"function"==typeof i?function(e,t,n){e[s][a].tween.set(r,o(i.call(e,e.__data__,t,n)))}:(i=o(i),function(e){e[s][a].tween.set(r,i)}))}function Ei(e){return null==e&&(e=""),function(){this.textContent=e}}function Ci(e){return null==e?"__transition__":"__transition_"+e+"__"}function Li(o,a,r,s,e){var l,u,c,f,d,h=o[r]||(o[r]={active:0,count:0}),p=h[s];function n(e){var t,n,r=h.active,i=h[r];for(t in i&&(i.timer.c=null,i.timer.t=NaN,--h.count,delete h[r],i.event&&i.event.interrupt.call(o,o.__data__,i.index)),h)+t<s&&((n=h[t]).timer.c=null,n.timer.t=NaN,--h.count,delete h[t]);u.c=y,ht(function(){return u.c&&y(e||1)&&(u.c=null,u.t=NaN),1},0,l),h.active=s,p.event&&p.event.start.call(o,o.__data__,a),d=[],p.tween.forEach(function(e,t){(t=t.call(o,o.__data__,a))&&d.push(t)}),f=p.ease,c=p.duration}function y(e){for(var e=e/c,t=f(e),n=d.length;0<n;)d[--n].call(o,t);if(1<=e)return p.event&&p.event.end.call(o,o.__data__,a),--h.count?delete h[s]:delete o[r],1}p||(l=e.time,u=ht(function(e){var t=p.delay;if(u.t=t+l,t<=e)return n(e-t);u.c=n},0,l),p=h[s]={tween:new m,time:l,timer:u,delay:e.delay,duration:e.duration,ease:e.ease,index:a},e=null,++h.count)}Ti.call=V.call,Ti.empty=V.empty,Ti.node=V.node,Ti.size=V.size,L.transition=function(e,t){return e&&e.transition?Oi?e.transition(t):e:L.selection().transition(e)},(L.transition.prototype=Ti).select=function(e){var t,n,r,i=this.id,o=this.namespace,a=[];e=G(e);for(var s=-1,l=this.length;++s<l;){a.push(t=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(r=u[c])&&(n=e.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),Li(n,c,o,i,r[o][i]),t.push(n)):t.push(null)}return ki(a,o,i)},Ti.selectAll=function(e){var t,n,r,i,o,a=this.id,s=this.namespace,l=[];e=W(e);for(var u=-1,c=this.length;++u<c;)for(var f=this[u],d=-1,h=f.length;++d<h;)if(r=f[d]){o=r[s][a],n=e.call(r,r.__data__,d,u),l.push(t=[]);for(var p=-1,y=n.length;++p<y;)(i=n[p])&&Li(i,p,s,a,o),t.push(i)}return ki(l,s,a)},Ti.filter=function(e){var t,n,r=[];"function"!=typeof e&&(e=ae(e));for(var i=0,o=this.length;i<o;i++){r.push(t=[]);for(var a,s=0,l=(a=this[i]).length;s<l;s++)(n=a[s])&&e.call(n,n.__data__,s,i)&&t.push(n)}return ki(r,this.namespace,this.id)},Ti.tween=function(t,n){var r=this.id,i=this.namespace;return arguments.length<2?this.node()[i][r].tween.get(t):se(this,null==n?function(e){e[i][r].tween.remove(t)}:function(e){e[i][r].tween.set(t,n)})},Ti.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var r="transform"==e?Cn:dn,i=L.ns.qualify(e);function o(){this.removeAttribute(i)}function a(){this.removeAttributeNS(i.space,i.local)}return Si(this,"attr."+e,t,i.local?function(n){return null==n?a:(n+="",function(){var t,e=this.getAttributeNS(i.space,i.local);return e!==n&&(t=r(e,n),function(e){this.setAttributeNS(i.space,i.local,t(e))})})}:function(n){return null==n?o:(n+="",function(){var t,e=this.getAttribute(i);return e!==n&&(t=r(e,n),function(e){this.setAttribute(i,t(e))})})})},Ti.attrTween=function(e,r){var i=L.ns.qualify(e);return this.tween("attr."+e,i.local?function(e,t){var n=r.call(this,e,t,this.getAttributeNS(i.space,i.local));return n&&function(e){this.setAttributeNS(i.space,i.local,n(e))}}:function(e,t){var n=r.call(this,e,t,this.getAttribute(i));return n&&function(e){this.setAttribute(i,n(e))}})},Ti.style=function(r,e,i){var t=arguments.length;if(t<3){if("string"!=typeof r){for(i in t<2&&(e=""),r)this.style(i,r[i],e);return this}i=""}function o(){this.style.removeProperty(r)}return Si(this,"style."+r,e,function(n){return null==n?o:(n+="",function(){var t,e=I(this).getComputedStyle(this,null).getPropertyValue(r);return e!==n&&(t=dn(e,n),function(e){this.style.setProperty(r,t(e),i)})})})},Ti.styleTween=function(r,i,o){return arguments.length<3&&(o=""),this.tween("style."+r,function(e,t){var n=i.call(this,e,t,I(this).getComputedStyle(this,null).getPropertyValue(r));return n&&function(e){this.style.setProperty(r,n(e),o)}})},Ti.text=function(e){return Si(this,"text",e,Ei)},Ti.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Ti.ease=function(t){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:("function"!=typeof t&&(t=L.ease.apply(L,arguments)),se(this,function(e){e[r][n].ease=t}))},Ti.delay=function(r){var i=this.id,o=this.namespace;return arguments.length<1?this.node()[o][i].delay:se(this,"function"==typeof r?function(e,t,n){e[o][i].delay=+r.call(e,e.__data__,t,n)}:(r=+r,function(e){e[o][i].delay=r}))},Ti.duration=function(r){var i=this.id,o=this.namespace;return arguments.length<1?this.node()[o][i].duration:se(this,"function"==typeof r?function(e,t,n){e[o][i].duration=Math.max(1,r.call(e,e.__data__,t,n))}:(r=Math.max(1,r),function(e){e[o][i].duration=r}))},Ti.each=function(r,t){var i=this.id,o=this.namespace;if(arguments.length<2){var e=Ai,n=Oi;try{Oi=i,se(this,function(e,t,n){Ai=e[o][i],r.call(e,e.__data__,t,n)})}finally{Ai=e,Oi=n}}else se(this,function(e){e=e[o][i];(e.event||(e.event=L.dispatch("start","end","interrupt"))).on(r,t)});return this},Ti.transition=function(){for(var e,t,n,r=this.id,i=++Pi,o=this.namespace,a=[],s=0,l=this.length;s<l;s++){a.push(e=[]);for(var u,c=0,f=(u=this[s]).length;c<f;c++)(t=u[c])&&Li(t,c,o,i,{time:(n=t[o][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),e.push(t)}return ki(a,o,i)},L.svg.axis=function(){var _,w=L.scale.linear(),M=Ri,j=6,k=6,O=3,A=[10],T=null;function n(e){e.each(function(){var e,t=L.select(this),n=this.__chart__||w,r=this.__chart__=w.copy(),i=null==T?r.ticks?r.ticks.apply(r,A):r.domain():T,o=null==_?r.tickFormat?r.tickFormat.apply(r,A):S:_,a=t.selectAll(".tick").data(i,r),s=a.enter().insert("g",".domain").attr("class","tick").style("opacity",xe),l=L.transition(a.exit()).style("opacity",xe).remove(),u=L.transition(a.order()).style("opacity",1),c=Math.max(j,0)+O,f=jr(r),d=t.selectAll(".domain").data([0]),h=(d.enter().append("path").attr("class","domain"),L.transition(d));s.append("line"),s.append("text");var p,y,g,v,m,b,x=s.select("line"),i=u.select("line"),t=a.select("text").text(o),d=s.select("text"),a=u.select("text"),o="top"===M||"left"===M?-1:1;"bottom"===M||"top"===M?(e=zi,p="x",g="y",y="x2",v="y2",t.attr("dy",o<0?"0em":".71em").style("text-anchor","middle"),h.attr("d","M"+f[0]+","+o*k+"V0H"+f[1]+"V"+o*k)):(e=Di,p="y",g="x",y="y2",v="x2",t.attr("dy",".32em").style("text-anchor",o<0?"end":"start"),h.attr("d","M"+o*k+","+f[0]+"H0V"+f[1]+"H"+o*k)),x.attr(v,o*j),d.attr(g,o*c),i.attr(y,0).attr(v,o*j),a.attr(p,0).attr(g,o*c),r.rangeBand?(b=(m=r).rangeBand()/2,n=r=function(e){return m(e)+b}):n.rangeBand?n=r:l.call(e,r,n),s.call(e,n,r),u.call(e,r,r)})}return n.scale=function(e){return arguments.length?(w=e,n):w},n.orient=function(e){return arguments.length?(M=e in Ii?e+"":Ri,n):M},n.ticks=function(){return arguments.length?(A=d(arguments),n):A},n.tickValues=function(e){return arguments.length?(T=e,n):T},n.tickFormat=function(e){return arguments.length?(_=e,n):_},n.tickSize=function(e){var t=arguments.length;return t?(j=+e,k=+arguments[t-1],n):j},n.innerTickSize=function(e){return arguments.length?(j=+e,n):j},n.outerTickSize=function(e){return arguments.length?(k=+e,n):k},n.tickPadding=function(e){return arguments.length?(O=+e,n):O},n.tickSubdivide=function(){return arguments.length&&n},n};var Ri="bottom",Ii={top:1,right:1,bottom:1,left:1};function zi(e,n,r){e.attr("transform",function(e){var t=n(e);return"translate("+(isFinite(t)?t:r(e))+",0)"})}function Di(e,n,r){e.attr("transform",function(e){var t=n(e);return"translate(0,"+(isFinite(t)?t:r(e))+")"})}L.svg.brush=function(){var v,m,b=D(O,"brushstart","brush","brushend"),x=null,_=null,w=[0,0],M=[0,0],j=!0,k=!0,i=Fi[0];function O(e){e.each(function(){var e=L.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),t=e.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(i,S);n.exit().remove(),n.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Ni[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",O.empty()?"none":null);var r,e=L.transition(e),t=L.transition(t);x&&(r=jr(x),t.attr("x",r[0]).attr("width",r[1]-r[0]),T(e)),_&&(r=jr(_),t.attr("y",r[0]).attr("height",r[1]-r[0]),P(e)),A(e)})}function A(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+w[+/e$/.test(e)]+","+M[+/^s/.test(e)]+")"})}function T(e){e.select(".extent").attr("x",w[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",w[1]-w[0])}function P(e){e.select(".extent").attr("y",M[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",M[1]-M[0])}function o(){var l,e,n,r=this,t=L.select(L.event.target),i=b.of(r,arguments),o=L.select(r),a=t.datum(),s=!/^(n|s)$/.test(a)&&x,u=!/^(e|w)$/.test(a)&&_,c=t.classed("extent"),f=ge(r),d=L.mouse(r),h=L.select(I(r)).on("keydown.brush",function(){32==L.event.keyCode&&(c||(l=null,d[0]-=w[1],d[1]-=M[1],c=2),z())}).on("keyup.brush",function(){32==L.event.keyCode&&2==c&&(d[0]+=w[1],d[1]+=M[1],c=0,z())});function p(){var e=L.mouse(r),t=!1;n&&(e[0]+=n[0],e[1]+=n[1]),c||(L.event.altKey?(l=l||[(w[0]+w[1])/2,(M[0]+M[1])/2],d[0]=w[+(e[0]<l[0])],d[1]=M[+(e[1]<l[1])]):l=null),s&&y(e,x,0)&&(T(o),t=!0),u&&y(e,_,1)&&(P(o),t=!0),t&&(A(o),i({type:"brush",mode:c?"move":"resize"}))}function y(e,t,n){var r,i=jr(t),o=i[0],a=i[1],s=d[n],t=n?M:w,i=t[1]-t[0];return c&&(o-=s,a-=i+s),e=(n?k:j)?Math.max(o,Math.min(a,e[n])):e[n],c?r=(e+=s)+i:(s=l?Math.max(o,Math.min(a,2*l[n]-e)):s)<e?(r=e,e=s):r=s,(t[0]!=e||t[1]!=r)&&(n?m=null:v=null,t[0]=e,t[1]=r,1)}function g(){p(),o.style("pointer-events","all").selectAll(".resize").style("display",O.empty()?"none":null),L.select("body").style("cursor",null),h.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),f(),i({type:"brushend"})}L.event.changedTouches?h.on("touchmove.brush",p).on("touchend.brush",g):h.on("mousemove.brush",p).on("mouseup.brush",g),o.interrupt().selectAll("*").interrupt(),c?(d[0]=w[0]-d[0],d[1]=M[0]-d[1]):a?(e=+/w$/.test(a),a=+/^n/.test(a),n=[w[1-e]-d[0],M[1-a]-d[1]],d[0]=w[e],d[1]=M[a]):L.event.altKey&&(l=d.slice()),o.style("pointer-events","none").selectAll(".resize").style("display",null),L.select("body").style("cursor",t.style("cursor")),i({type:"brushstart"}),p()}return O.event=function(e){e.each(function(){var r=b.of(this,arguments),i={x:w,y:M,i:v,j:m},e=this.__chart__||i;this.__chart__=i,Oi?L.select(this).transition().each("start.brush",function(){v=e.i,m=e.j,w=e.x,M=e.y,r({type:"brushstart"})}).tween("brush:brush",function(){var t=hn(w,i.x),n=hn(M,i.y);return v=m=null,function(e){w=i.x=t(e),M=i.y=n(e),r({type:"brush",mode:"resize"})}}).each("end.brush",function(){v=i.i,m=i.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})}):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))})},O.x=function(e){return arguments.length?(i=Fi[!(x=e)<<1|!_],O):x},O.y=function(e){return arguments.length?(i=Fi[!x<<1|!(_=e)],O):_},O.clamp=function(e){return arguments.length?(x&&_?(j=!!e[0],k=!!e[1]):x?j=!!e:_&&(k=!!e),O):x&&_?[j,k]:x?j:_?k:null},O.extent=function(e){var t,n,r,i,o;return arguments.length?(x&&(t=e[0],n=e[1],_&&(t=t[0],n=n[0]),v=[t,n],x.invert&&(t=x(t),n=x(n)),n<t&&(o=t,t=n,n=o),t==w[0]&&n==w[1]||(w=[t,n])),_&&(r=e[0],i=e[1],x&&(r=r[1],i=i[1]),m=[r,i],_.invert&&(r=_(r),i=_(i)),i<r&&(o=r,r=i,i=o),r==M[0]&&i==M[1]||(M=[r,i])),O):(x&&(v?(t=v[0],n=v[1]):(t=w[0],n=w[1],x.invert&&(t=x.invert(t),n=x.invert(n)),n<t&&(o=t,t=n,n=o))),_&&(m?(r=m[0],i=m[1]):(r=M[0],i=M[1],_.invert&&(r=_.invert(r),i=_.invert(i)),i<r&&(o=r,r=i,i=o))),x&&_?[[t,r],[n,i]]:x?[t,n]:_&&[r,i])},O.clear=function(){return O.empty()||(w=[0,0],M=[0,0],v=m=null),O},O.empty=function(){return!!x&&w[0]==w[1]||!!_&&M[0]==M[1]},L.rebind(O,b,"on")};var Ni={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Fi=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function Bi(e){return JSON.parse(e.responseText)}function Ui(e){var t=R.createRange();return t.selectNode(R.body),t.createContextualFragment(e.responseText)}L.text=at(function(e){return e.responseText}),L.json=function(e,t){return st(e,"application/json",Bi,t)},L.html=function(e,t){return st(e,"text/html",Ui,t)},L.xml=at(function(e){return e.responseXML}),"object"===(void 0===qi?"undefined":Hi(qi))&&qi.exports?qi.exports=L:this.d3=L}.apply(self)},{}],4:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i;i=function(){function s(e){var t,n,r=0,i=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],o=1.000000000190015,e=(n=t=e)+5.5;for(e-=(t+.5)*l(e);r<6;r++)o+=i[r]/++n;return l(2.5066282746310007*o/t)-e}var e={};e.lgamma=s;function n(e){return e<0?NaN:s(e+1)}e.lfactorial=n;function i(e,t){return n(e)-n(t)-n(e-t)}e.lchoose=i;function r(e,t){return s(e)+s(t)-s(e+t)}e.lbeta=r;var l=Math.log,o=Math.exp,a=Math.abs,u=Math.pow,c=Math.sqrt,f=Math.PI;e.beta=function(e,t,n){return 1<e||e<0?-1/0:1===t&&1===n?0:(t-1)*l(e)+(n-1)*l(1-e)-r(t,n)},e.cauchy=function(e,t,n){return l(n)-l(u(e-t,2)+u(n,2))-l(f)},e.norm=function(e,t,n){return-.5*l(2*f)-l(n)-u(e-t,2)/(2*n*n)},e.bivarnorm=function(e,t,n,r){t=u(e[0]-t[0],2)/u(n[0],2)+u(e[1]-t[1],2)/u(n[1],2)-2*r*(e[0]-t[0])*(e[1]-t[1])/(n[0]*n[1]);return-(l(2)+l(f)+l(n[0])+l(n[1])+.5*l(1-u(r,2)))-t/(2*(1-u(r,2)))},e.laplace=function(e,t,n){return-a(e-t)/n-l(2*n)},e.dexp=e.laplace,e.gamma=function(e,t,n){n=1/n;return e<0?-1/0:0===e&&1===t?-l(n):(t-1)*l(e)-e/n-s(t)-t*l(n)},e.invgamma=function(e,t,n){return e<=0?-1/0:-(t+1)*l(e)-n/e-s(t)+t*l(n)},e.lnorm=function(e,t,n){return e<=0?-1/0:-l(e)-.5*l(2*f)-l(n)-u(l(e)-t,2)/(2*n*n)},e.pareto=function(e,t,n){return e<t?-1/0:l(n)+n*l(t)-(n+1)*l(e)},e.t=function(e,t,n,r){return s(((r=1e100<r?1e100:r)+1)/2)-s(r/2)-l(c(f*r)*n)+l(u(1+1/r*u((e-t)/n,2),-(r+1)/2))},e.weibull=function(e,t,n){if(e<0)return-1/0;if(0===e&&t<1)return 1/0;var r=u(e/n,t-1);return-(r*(e/n))+l(t*r/n)},e.logis=function(e,t,n){e=a((e-t)/n);t=1+o(-e);return-(e+l(n*t*t))},e.dirichlet=function(e,t){for(var n=0,r=0,i=0,o=t.length,a=0;a<o;a++)n+=t[a],r+=s(t[a]),i+=(t[a]-1)*l(e[a]);return s(n)-r+i},e.exp=function(e,t){return e<0?-1/0:l(t)-t*e},e.unif=function(e,t,n){return e<t||n<e?-1/0:l(1/(n-t))},e.bern=function(e,t){return 0!==e&&1!==e?-1/0:l(e*t+(1-e)*(1-t))},e.cat=function(e,t){return e<1||e>t.length?-1/0:l(t[e-1])},e.binom=function(e,t,n){return t<e||e<0?-1/0:0===n||1===n?t*n===e?0:-1/0:i(t,e)+e*l(n)+(t-e)*l(1-n)};return e.nbinom=function(e,t,n){return e<0?-1/0:i(e+t-1,t-1)+e*l(1-n)+t*l(n)},e.hyper=function(e,t,n,r){return e<0||r<e?-1/0:i(t,e)+i(n,r-e)-i(t+n,r)},e.pois=function(e,t){return e<0?-1/0:l(t)*e-t-n(e)},e},"object"===(void 0===t?"undefined":r(t))&&t.exports?t.exports=i():(void 0).ld=i()},{}],5:[function(e,t,n){"use strict";function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r;r=function(){function a(e){if(Array.isArray(e)){if(Array.isArray(e[0])){for(var t=[],n=0,r=e.length;n<r;n++)t.push(a(e[n]));return t}return e.slice(0)}return e}function s(e,t){if(Array.isArray(e)){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=s(e[r],t);return n}return t(e)}var n=function(e,t){for(var n,r,i,o;n=Math.random(),r=1.7156*(Math.random()-.5),.27597<(o=(o=n-.449871)*o+(i=Math.abs(r)+.386595)*(.196*i-.25472*o))&&(.27846<o||r*r>-4*Math.log(n)*n*n););return r/n*t+e},g=function e(t){if(!t||"object"!=P(t)||"[object Function]"===Object.prototype.toString.call(t))return t;if(t.nodeType&&"cloneNode"in t)return t.cloneNode(!0);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);var n,r,i;if(t instanceof Array)for(n=[],r=0,i=t.length;r<i;++r)r in t&&n.push(e(t[r]));else n=t.constructor?new t.constructor:{};return function(e,t,n){var r,i,o={};for(r in t)i=t[r],r in e&&(e[r]===i||r in o&&o[r]===i)||(e[r]=n?n(i):i);return e}(n,t,e)},o=function(e){return"number"==typeof e||"object"==P(e)&&e.constructor===Number},l=function e(t,n){var r,i=new Array(t[0]);if(1==t.length)if("function"==typeof n)for(r=0;r<t[0];r++)i[r]=n();else for(r=0;r<t[0];r++)i[r]=n;else{if(!(1<t.length))throw"create_array can't create a dimensionless array";for(r=0;r<t[0];r++)i[r]=e(t.slice(1),n)}return i},i=function e(t){return Array.isArray(t[0])?[t.length].concat(e(t[0])):[t.length]},u=function e(t,n){if(t.length!=n.length)return!1;for(var r=0;r<t.length;r++)if(Array.isArray(t[r])&&Array.isArray(n[r])){if(!e(t[r],n[r]))return!1}else if(t[r]!=n[r])return!1;return!0};function c(e){for(var t=e.length-1;0<t;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}function e(e,t){if(Array.isArray(e)){for(var n=e.length,r=[],i=0;i<n;i++)r[i]=i;c(r);var o=[];for(i=0;i<n;i++){var a=r[i];o[a]=s(e[a],t)}return o}return t(e)}function f(e,t,n,r){if(r=p(e,t,r),Array.isArray(r)||(r=l(n,r)),!u(i(r),n))throw"The option "+e+" is of dimension ["+i(r)+"] but should be ["+n+"].";return r}function d(e,t,n){if(n<t)throw"Can not initialize parameter where lower bound > upper bound";if("real"===e){if(t===-1/0&&n===1/0)return.5;if(t===-1/0)return n-.5;if(n===1/0)return t+.5;if(t<=n)return(t+n)/2}else if("int"===e){if(t===-1/0&&n===1/0)return 1;if(t===-1/0)return n-1;if(n===1/0)return t+1;if(t<=n)return Math.round((t+n)/2)}else if("binary"===e)return 1;throw"Could not initialize parameter of type "+e+"["+t+", "+n+"]"}function h(e,t){var n,r,i=g(e);for(n in i)i.hasOwnProperty(n)&&((r=i[n]).hasOwnProperty("type")||(r.type="real"),r.hasOwnProperty("dim")||(r.dim=[1]),o(r.dim)&&(r.dim=[r.dim]),"binary"==r.type&&(r.upper=1,r.lower=0),r.hasOwnProperty("upper")||(r.upper=1/0),r.hasOwnProperty("lower")||(r.lower=-1/0),r.hasOwnProperty("init")?u(r.dim,[1])&&"function"==typeof r.init?r.init=r.init():u(r.dim,[1])||Array.isArray(r.init)||(r.init=l(r.dim,r.init)):u(r.dim,[1])?r.init=t(r.type,r.lower,r.upper):r.init=l(r.dim,function(){return t(r.type,r.lower,r.upper)}));return i}function v(e,t,n){this.params=e,this.state=t,this.log_post=n}var p=function(e,t,n){return(t=t||{}).hasOwnProperty(e)&&void 0!==t[e]&&null!==t[e]?t[e]:n};v.prototype.step=function(){throw"Every Stepper need to implement step()"},v.prototype.start_adaptation=function(){},v.prototype.stop_adaptation=function(){},v.prototype.info=function(){return{}};function y(e,t,n,r,i){if(v.call(this,e,t,n),1!=(n=Object.keys(this.params)).length)throw"OnedimMetropolisStepper can only handle one parameter.";if(this.param_name=n[0],n=this.params[this.param_name],!u(n.dim,[1]))throw"OnedimMetropolisStepper can only handle one one-dimensional parameter.";this.lower=n.lower,this.upper=n.upper,this.prop_log_scale=p("prop_log_scale",r,0),this.batch_size=p("batch_size",r,50),this.max_adaptation=p("max_adaptation",r,.33),this.initial_adaptation=p("initial_adaptation",r,1),this.target_accept_rate=p("target_accept_rate",r,.44),this.is_adapting=p("is_adapting",r,!0),this.generate_proposal=i,this.acceptance_count=0,this.batch_count=0,this.iterations_since_adaption=0}((y.prototype=Object.create(v.prototype)).constructor=y).prototype.step=function(){var e,t=this.state[this.param_name],n=this.generate_proposal(t,this.prop_log_scale);return n<this.lower||n>this.upper||(e=this.log_post(),this.state[this.param_name]=n,n=this.log_post(),Math.exp(n-e)>Math.random()?this.is_adapting&&this.acceptance_count++:this.state[this.param_name]=t),this.is_adapting&&(this.iterations_since_adaption++,this.iterations_since_adaption>=this.batch_size&&(this.batch_count++,t=Math.min(this.max_adaptation,this.initial_adaptation/Math.sqrt(this.batch_count)),this.acceptance_count/this.batch_size>this.target_accept_rate?this.prop_log_scale+=t:this.prop_log_scale-=t,this.acceptance_count=0,this.iterations_since_adaption=0)),this.state[this.param_name]},y.prototype.start_adaptation=function(){this.is_adapting=!0},y.prototype.stop_adaptation=function(){this.is_adapting=!1},y.prototype.info=function(){return{prop_log_scale:this.prop_log_scale,is_adapting:this.is_adapting,acceptance_count:this.acceptance_count,iterations_since_adaption:this.iterations_since_adaption,batch_count:this.batch_count}};function m(e,t){return n(e,Math.exp(t))}function b(e,t,n,r){y.call(this,e,t,n,r,m)}(b.prototype=Object.create(y.prototype)).constructor=b;function x(e,t){return Math.round(n(e,Math.exp(t)))}function _(e,t,n,r){y.call(this,e,t,n,r,x)}(_.prototype=Object.create(y.prototype)).constructor=_;function w(e,t,n,r,p){if(v.call(this,e,t,n),1!=(n=Object.keys(this.params)).length)throw"MultidimComponentMetropolisStepper can't handle more than one parameter.";this.param_name=n[0];var y=this.params[this.param_name];this.lower=y.lower,this.upper=y.upper,this.dim=y.dim,this.prop_log_scale=f("prop_log_scale",r,this.dim,0),this.batch_size=f("batch_size",r,this.dim,50),this.max_adaptation=f("max_adaptation",r,this.dim,.33),this.initial_adaptation=f("initial_adaptation",r,this.dim,1),this.target_accept_rate=f("target_accept_rate",r,this.dim,.44),this.is_adapting=f("is_adapting",r,this.dim,!0),this.substeppers=function e(t,n,r,i,o,a,s,l,u){var c=[];if(1===t.length)for(var f=0;f<t[0];f++){var d={prop_log_scale:i[f],batch_size:o[f],max_adaptation:a[f],initial_adaptation:s[f],target_accept_rate:l[f],is_adapting:u[f]},h={};h[f]=g(y),h[f].dim=[1],delete h[f].init,c[f]=new p(h,n,r,d)}else for(f=0;f<t[0];f++)c[f]=e(t.slice(1),n[f],r,i[f],o[f],a[f],s[f],l[f],u[f]);return c}(this.dim,this.state[this.param_name],this.log_post,this.prop_log_scale,this.batch_size,this.max_adaptation,this.initial_adaptation,this.target_accept_rate,this.is_adapting)}((w.prototype=Object.create(v.prototype)).constructor=w).prototype.step=function(){return e(this.substeppers,function(e){return e.step()})},w.prototype.start_adaptation=function(){s(this.substeppers,function(e){e.start_adaptation()})},w.prototype.stop_adaptation=function(){s(this.substeppers,function(e){e.stop_adaptation()})},w.prototype.info=function(){return s(this.substeppers,function(e){return e.info()})};function M(e,t,n,r){w.call(this,e,t,n,r,b)}(M.prototype=Object.create(w.prototype)).constructor=M;function j(e,t,n,r){w.call(this,e,t,n,r,_)}(j.prototype=Object.create(w.prototype)).constructor=j;function k(e,t,n,r){if(v.call(this,e,t,n),1!=(n=Object.keys(this.params)).length)throw"BinaryStepper can't handle more than one parameter.";this.param_name=n[0]}((k.prototype=Object.create(v.prototype)).constructor=k).prototype.step=function(){this.state[this.param_name]=0;var e=this.log_post();this.state[this.param_name]=1;var t=this.log_post(),n=Math.max(e,t);e-=n,t-=n;t=Math.exp(e-Math.log(Math.exp(e)+Math.exp(t)));return Math.random()<t?this.state[this.param_name]=0:1};function O(e,t,n,r){if(v.call(this,e,t,n),1!=(n=Object.keys(this.params)).length)throw"BinaryComponentStepper can't handle more than one parameter.";this.param_name=n[0];var s=this.params[this.param_name];this.dim=s.dim,this.substeppers=function e(t,n,r){var i,o=[];if(1===t.length)for(i=0;i<t[0];i++){var a={};a[i]=s,o[i]=new k(a,n,r)}else for(i=0;i<t[0];i++)o[i]=e(t.slice(1),n[i],r);return o}(this.dim,this.state[this.param_name],this.log_post)}((O.prototype=Object.create(v.prototype)).constructor=O).prototype.step=function(){return e(this.substeppers,function(e){return e.step()})};function A(e,t,n,r){v.call(this,e,t,n),this.param_names=Object.keys(this.params),this.substeppers=[];for(var i=0;i<this.param_names.length;i++){var o,a=e[this.param_names[i]];switch(a.type){case"real":o=u(a.dim,[1])?b:M;break;case"int":o=u(a.dim,[1])?_:j;break;case"binary":o=u(a.dim,[1])?k:O;break;default:throw"AmwgStepper can't handle parameter "+this.param_names[i]+" with type "+a.type}var s={};s[this.param_names[i]]=a;var l=(r=r||{}).params&&r.params[this.param_names[i]]||{};l.prop_log_scale=l.prop_log_scale||r.prop_log_scale,l.batch_size=l.batch_size||r.batch_size,l.max_adaptation=l.max_adaptation||r.max_adaptation,l.initial_adaptation=l.initial_adaptation||r.initial_adaptation,l.target_accept_rate=l.target_accept_rate||r.target_accept_rate,l.is_adapting=l.is_adapting||r.is_adapting,this.substeppers[i]=new o(s,t,n,l)}}((A.prototype=Object.create(v.prototype)).constructor=A).prototype.step=function(){c(this.substeppers);for(var e=0;e<this.substeppers.length;e++)this.substeppers[e].step();return this.state},A.prototype.start_adaptation=function(){for(var e=0;e<this.substeppers.length;e++)this.substeppers[e].start_adaptation()},A.prototype.stop_adaptation=function(){for(var e=0;e<this.substeppers.length;e++)this.substeppers[e].stop_adaptation()},A.prototype.info=function(){for(var e={},t=0;t<this.substeppers.length;t++)e[this.param_names[t]]=this.substeppers[t].info();return e};function T(e,t,n,r){this.params=e,this.data=n,this.param_names=Object.keys(this.params),this.param_init_fun=p("param_init_fun",r,d);var i=p("thin",r,1),e=p("monitor",r,null);this.thin(i),this.monitor(e),this.options=r,this.params=h(this.params,this.param_init_fun);for(var o={},a=0;a<this.param_names.length;a++)o[this.param_names[a]]=this.params[this.param_names[a]].init;this.log_post=function(){return t(o,n)},this.log_post(),this.state=o,this.steppers=this.create_stepper_ensamble(this.params,this.state,this.log_post,this.options)}T.prototype.create_stepper_ensamble=function(e,t){throw"Every Sampler needs to implement create_stepper_ensamble()"},T.prototype.info=function(){return{state:this.state,thin:this.thin,monitor:this.monitor,steppers:this.steppers}},T.prototype.step=function(){c(this.steppers);for(var e=0;e<this.steppers.length;e++)this.steppers[e].step();return Object.keys(this.state).length>Object.keys(this.params).length&&this.log_post(),this.state},T.prototype.sample=function(e){for(var t,n=null===this.monitored_params?Object.keys(this.state):this.monitored_params,r={},i=0;i<n.length;i++)r[n[i]]=[];for(t=0;t<e;t++){if(t%this.thinning_interval==0)for(i=0;i<n.length;i++){var o=n[i];r[o].push(a(this.state[o]))}this.step()}return r},T.prototype.burn=function(e){for(var t=0;t<e;t++)this.step()},T.prototype.monitor=function(e){this.monitored_params=e},T.prototype.thin=function(e){this.thinning_interval=e},T.prototype.start_adaptation=function(){for(var e=0;e<this.steppers.length;e++)this.steppers[e].start_adaptation()},T.prototype.stop_adaptation=function(){for(var e=0;e<this.steppers.length;e++)this.steppers[e].stop_adaptation()};function t(e,t,n,r){T.call(this,e,t,n,r)}return((t.prototype=Object.create(T.prototype)).constructor=t).prototype.create_stepper_ensamble=function(e,t,n,r){return[new A(e,t,n,r)]},{runif:function(e,t){return Math.random()*(t-e)+e},runif_discrete:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},rnorm:n,param_init_fixed:d,complete_params:h,RealMetropolisStepper:b,IntMetropolisStepper:_,MultiRealComponentMetropolisStepper:M,MultiIntComponentMetropolisStepper:j,BinaryStepper:k,BinaryComponentStepper:O,AmwgStepper:A,AmwgSampler:t}},"object"===(void 0===t?"undefined":P(t))&&t.exports?t.exports=r():(void 0).mcmc=r()},{}],6:[function(e,t,n){"use strict";t.exports=function(e,t,n){return t<n?e<t?t:n<e?n:e:e<n?n:t<e?t:e}},{}],7:[function(e,t,n){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],8:[function(e,t,n){"use strict";e=e("./rgb");t.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t,n,r,i,o,a=e[0]/360,s=e[1]/100,e=e[2]/100;if(0==s)return[o=255*e,o,o];t=2*e-(n=e<.5?e*(1+s):e+s-e*s),i=[0,0,0];for(var l=0;l<3;l++)(r=a+1/3*-(l-1))<0?r++:1<r&&r--,i[l]=255*(o=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t);return i}},e.hsl=function(e){var t,n=e[0]/255,r=e[1]/255,i=e[2]/255,o=Math.min(n,r,i),a=Math.max(n,r,i),e=a-o;return a===o?t=0:n===a?t=(r-i)/e:r===a?t=2+(i-n)/e:i===a&&(t=4+(n-r)/e),(t=Math.min(60*t,360))<0&&(t+=360),r=(o+a)/2,[t,100*(a===o?0:r<=.5?e/(a+o):e/(2-a-o)),100*r]}},{"./rgb":9}],9:[function(e,t,n){"use strict";t.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.slice=n.map=void 0;var r=Array.prototype,i=r.slice;n.slice=i;r=r.map;n.map=r},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return null==e||null==t?NaN:e<t?-1:t<e?1:t<=e?0:NaN}},{}],12:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var y=o.default,g=b.default,v=s.default;function t(e){for(var t,n=(e=!Array.isArray(e)?Array.from(e):e).length,r=new Array(n),i=0;i<n;++i)r[i]=y(e[i],i,e);var o,a,s,l=g(r),u=l[0],c=l[1],f=v(r,u,c);Array.isArray(f)||(o=c,a=+f,g===b.default&&(s=(0,x.default)(u,c,a),l=2,u=(l=function(e){if(Array.isArray(e))return e}(s=s)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(s,l)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(s,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],c=l[1]),(f=(0,_.default)(u,c,a))[f.length-1]>=c&&(c<=o&&g===b.default?(a=(0,_.tickIncrement)(u,c,a),isFinite(a)&&(0<a?c=(Math.floor(c/a)+1)*a:a<0&&(c=(Math.ceil(c*-a)+1)/-a))):f.pop()));for(var d=f.length;f[0]<=u;)f.shift(),--d;for(;f[d-1]>c;)f.pop(),--d;var h,p=new Array(d+1);for(i=0;i<=d;++i)(h=p[i]=[]).x0=0<i?f[i-1]:u,h.x1=i<d?f[i]:c;for(i=0;i<n;++i)null!=(t=r[i])&&u<=t&&t<=c&&p[(0,m.default)(f,t,0,d)].push(e[i]);return p}return t.value=function(e){return arguments.length?(y="function"==typeof e?e:(0,i.default)(e),t):y},t.domain=function(e){return arguments.length?(g="function"==typeof e?e:(0,i.default)([e[0],e[1]]),t):g},t.thresholds=function(e){return arguments.length?(v="function"==typeof e?e:Array.isArray(e)?(0,i.default)(r.slice.call(e)):(0,i.default)(e),t):v},t};var r=e("./array.js"),m=u(e("./bisect.js")),i=u(e("./constant.js")),b=u(e("./extent.js")),o=u(e("./identity.js")),x=u(e("./nice.js")),_=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=l(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./ticks.js")),s=u(e("./threshold/sturges.js"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(e){return e&&e.__esModule?e:{default:e}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},{"./array.js":10,"./bisect.js":13,"./constant.js":15,"./extent.js":24,"./identity.js":31,"./nice.js":45,"./threshold/sturges.js":64,"./ticks.js":65}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.bisectRight=n.bisectLeft=n.bisectCenter=void 0;var r=a(e("./ascending.js")),i=a(e("./bisector.js")),o=a(e("./number.js"));function a(e){return e&&e.__esModule?e:{default:e}}e=(0,i.default)(r.default),r=e.right;n.bisectRight=r;e=e.left;n.bisectLeft=e;o=(0,i.default)(o.default).center;n.bisectCenter=o,n.default=r},{"./ascending.js":11,"./bisector.js":14,"./number.js":46}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(n){var i=n,o=n,a=n;2!==n.length&&(i=function(e,t){return n(e)-t},o=r.default,a=function(e,t){return(0,r.default)(n(e),t)});function s(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:e.length;if(n<r){if(0!==o(t,t))return r;do{var i=n+r>>>1}while(a(e[i],t)<0?n=1+i:r=i,n<r)}return n}return{left:s,center:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=s(e,t,n,(3<arguments.length&&void 0!==arguments[3]?arguments[3]:e.length)-1);return n<r&&i(e[r-1],t)>-i(e[r],t)?r-1:r},right:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:e.length;if(n<r){if(0!==o(t,t))return r;do{var i=n+r>>>1}while(a(e[i],t)<=0?n=1+i:r=i,n<r)}return n}}};var r=(e=e("./ascending.js"))&&e.__esModule?e:{default:e}},{"./ascending.js":11}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(){return e}}},{}],16:[function(e,t,n){"use strict";function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=0;if(void 0===t){var r,i=c(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;null!=o&&(o=+o)>=o&&++n}}catch(e){i.e(e)}finally{i.f()}}else{var a,s=-1,l=c(e);try{for(l.s();!(a=l.n()).done;){var u=a.value;null!=(u=t(u,++s,e))&&(u=+u)>=u&&++n}}catch(e){l.e(e)}finally{l.f()}}return n}},{}],17:[function(e,t,n){"use strict";function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){return 0|e.length}function f(e){return!(0<e)}function d(e){return"object"!==r(e)||"length"in e?e:Array.from(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var r="function"==typeof n[n.length-1]&&function(t){return function(e){return t.apply(void 0,function(e){if(Array.isArray(e))return u(e)}(e=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}}(n.pop()),i=(n=n.map(d)).map(c),o=n.length-1,a=new Array(1+o).fill(0),s=[];if(o<0||i.some(f))return s;for(;;){s.push(a.map(function(e,t){return n[t][e]}));for(var l=o;++a[l]===i[l];){if(0===l)return r?s.map(r):s;a[l--]=0}}}},{}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,n){var r=0,i=0;return Float64Array.from(t,void 0===n?function(e){return r+=+e||0}:function(e){return r+=+n(e,i++,t)||0})}},{}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return null==e||null==t?NaN:t<e?-1:e<t?1:e<=t?0:NaN}},{}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){t=(0,r.default)(e,t);return t&&Math.sqrt(t)};var r=(e=e("./variance.js"))&&e.__esModule?e:{default:e}},{"./variance.js":68}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e=new u.InternSet(e);for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a,s=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(o[i]);try{for(s.s();!(a=s.n()).done;){var l=a.value;e.delete(l)}}catch(e){s.e(e)}finally{s.f()}}return e};var u=e("internmap");function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},{internmap:608}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n,r,i=t[Symbol.iterator](),o=new c.InternSet,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(e);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(o.has(s))return!1;for(var l=void 0,u=void 0;r=i.next(),l=r.value,u=r.done,r&&!u;){if(Object.is(s,l))return!1;o.add(l)}}}catch(e){a.e(e)}finally{a.f()}return!0};var c=e("internmap");function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},{internmap:608}],23:[function(e,t,n){"use strict";function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if("function"!=typeof t)throw new TypeError("test is not a function");var n,r=-1,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(!t(o,++r,e))return!1}}catch(e){i.e(e)}finally{i.f()}return!0}},{}],24:[function(e,t,n){"use strict";function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n,r;if(void 0===t){var i,o=f(e);try{for(o.s();!(i=o.n()).done;){var a=i.value;null!=a&&(void 0===n?a<=a&&(n=r=a):(a<n&&(n=a),r<a&&(r=a)))}}catch(e){o.e(e)}finally{o.f()}}else{var s,l=-1,u=f(e);try{for(u.s();!(s=u.n()).done;){var c=s.value;null!=(c=t(c,++l,e))&&(void 0===n?c<=c&&(n=r=c):(c<n&&(n=c),r<c&&(r=c)))}}catch(e){u.e(e)}finally{u.f()}}return[n,r]}},{}],25:[function(e,t,n){"use strict";function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if("function"!=typeof t)throw new TypeError("test is not a function");var n,r=[],i=-1,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;t(a,++i,e)&&r.push(a)}}catch(e){o.e(e)}finally{o.f()}return r}},{}],26:[function(e,t,n){"use strict";function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.Adder=void 0,n.fcumsum=function(t,n){var r=new f,i=-1;return Float64Array.from(t,void 0===n?function(e){return r.add(+e||0)}:function(e){return r.add(+n(e,++i,t)||0)})},n.fsum=function(e,t){var n=new f;if(void 0===t){var r,i,o=c(e);try{for(o.s();!(r=o.n()).done;)(i=+(i=r.value))&&n.add(i)}catch(e){o.e(e)}finally{o.f()}}else{var a,s=-1,l=c(e);try{for(l.s();!(a=l.n()).done;){var u=a.value;(u=+t(u,++s,e))&&n.add(u)}}catch(e){l.e(e)}finally{l.f()}}return+n};var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._partials=new Float64Array(32),this._n=0}var t,n,r;return t=e,(n=[{key:"add",value:function(e){for(var t=this._partials,n=0,r=0;r<this._n&&r<32;r++){var i=t[r],o=e+i,i=Math.abs(e)<Math.abs(i)?e-(o-i):i-(o-e);i&&(t[n++]=i),e=o}return t[n]=e,this._n=n+1,this}},{key:"valueOf",value:function(){var e,t,n,r=this._partials,i=this._n,o=0;if(0<i){for(o=r[--i];0<i&&(e=o,!(n=(t=r[--i])-((o=e+t)-e))););0<i&&(n<0&&r[i-1]<0||0<n&&0<r[i-1])&&(t=2*n)==(e=o+t)-o&&(o=e)}return o}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.Adder=f},{}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t,n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d.default,i=!1;if(1===r.length){var o,a=h(e);try{for(a.s();!(o=a.n()).done;){var s=o.value,l=r(s);(i?0<(0,d.default)(l,n):0===(0,d.default)(l,l))&&(t=s,n=l,i=!0)}}catch(e){a.e(e)}finally{a.f()}}else{var u,c=h(e);try{for(c.s();!(u=c.n()).done;){var f=u.value;(i?0<r(f,t):0===r(f,f))&&(t=f,i=!0)}}catch(e){c.e(e)}finally{c.f()}}return t};var d=(e=e("./ascending.js"))&&e.__esModule?e:{default:e};function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},{"./ascending.js":11}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:l.default;if(1===n.length)return(0,u.default)(e,n);var r,i=-1,o=-1,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(e);try{for(a.s();!(r=a.n()).done;){var s=r.value;++o,(i<0?0===n(s,s):0<n(s,t))&&(t=s,i=o)}}catch(e){a.e(e)}finally{a.f()}return i};var l=r(e("./ascending.js")),u=r(e("./maxIndex.js"));function r(e){return e&&e.__esModule?e:{default:e}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},{"./ascending.js":11,"./maxIndex.js":38}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return f(e,o.default,o.default,n)},n.flatGroup=function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return l(a.apply(void 0,[e].concat(n)),n)},n.flatRollup=function(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return l(u.apply(void 0,[e,t].concat(r)),r)},n.groups=a,n.index=function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return f(e,o.default,c,n)},n.indexes=function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return f(e,Array.from,c,n)},n.rollup=function(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return f(e,o.default,t,r)},n.rollups=u;var b=e("internmap"),o=(e=e("./identity.js"))&&e.__esModule?e:{default:e};function x(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function i(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return f(e,Array.from,o.default,n)}function l(e,t){for(var n=1,r=t.length;n<r;++n)e=e.flatMap(function(n){return n.pop().map(function(e){var t=_(e,2),e=t[0],t=t[1];return[].concat(i(n),[e,t])})});return e}function u(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return f(e,Array.from,t,r)}function c(e){if(1!==e.length)throw new Error("duplicate key");return e[0]}function f(e,g,v,m){return function e(t,n){if(n>=m.length)return v(t);var r,i=new b.InternMap,o=m[n++],a=-1,s=x(t);try{for(s.s();!(r=s.n()).done;){var l=r.value,u=o(l,++a,t),c=i.get(u);c?c.push(l):i.set(u,[l])}}catch(e){s.e(e)}finally{s.f()}var f,d=x(i);try{for(d.s();!(f=d.n()).done;){var h=_(f.value,2),p=h[0],y=h[1];i.set(p,e(y,n))}}catch(e){d.e(e)}finally{d.f()}return g(i)}(e,0)}},{"./identity.js":31,internmap:608}],30:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,i,t){return(2!==i.length?(0,s.default)((0,r.rollup)(e,i,t),function(e,t){var n=u(e,2),r=n[0],e=n[1],n=u(t,2),t=n[0],n=n[1];return(0,o.default)(e,n)||(0,o.default)(r,t)}):(0,s.default)((0,r.default)(e,t),function(e,t){var n=u(e,2),r=n[0],e=n[1],n=u(t,2),t=n[0],n=n[1];return i(e,n)||(0,o.default)(r,t)})).map(function(e){return u(e,1)[0]})};var o=i(e("./ascending.js")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=l(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./group.js")),s=i(e("./sort.js"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},{"./ascending.js":11,"./group.js":29,"./sort.js":58}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e}},{}],32:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Adder",{enumerable:!0,get:function(){return h.Adder}}),Object.defineProperty(n,"InternMap",{enumerable:!0,get:function(){return oe.InternMap}}),Object.defineProperty(n,"InternSet",{enumerable:!0,get:function(){return oe.InternSet}}),Object.defineProperty(n,"ascending",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"bin",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(n,"bisect",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"bisectCenter",{enumerable:!0,get:function(){return r.bisectCenter}}),Object.defineProperty(n,"bisectLeft",{enumerable:!0,get:function(){return r.bisectLeft}}),Object.defineProperty(n,"bisectRight",{enumerable:!0,get:function(){return r.bisectRight}}),Object.defineProperty(n,"bisector",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"count",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"cross",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"cumsum",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"descending",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"deviation",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(n,"difference",{enumerable:!0,get:function(){return J.default}}),Object.defineProperty(n,"disjoint",{enumerable:!0,get:function(){return ee.default}}),Object.defineProperty(n,"every",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(n,"extent",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(n,"fcumsum",{enumerable:!0,get:function(){return h.fcumsum}}),Object.defineProperty(n,"filter",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(n,"flatGroup",{enumerable:!0,get:function(){return p.flatGroup}}),Object.defineProperty(n,"flatRollup",{enumerable:!0,get:function(){return p.flatRollup}}),Object.defineProperty(n,"fsum",{enumerable:!0,get:function(){return h.fsum}}),Object.defineProperty(n,"greatest",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(n,"greatestIndex",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(n,"group",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(n,"groupSort",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(n,"groups",{enumerable:!0,get:function(){return p.groups}}),Object.defineProperty(n,"histogram",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(n,"index",{enumerable:!0,get:function(){return p.index}}),Object.defineProperty(n,"indexes",{enumerable:!0,get:function(){return p.indexes}}),Object.defineProperty(n,"intersection",{enumerable:!0,get:function(){return te.default}}),Object.defineProperty(n,"least",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(n,"leastIndex",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(n,"map",{enumerable:!0,get:function(){return Z.default}}),Object.defineProperty(n,"max",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(n,"maxIndex",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(n,"mean",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(n,"median",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(n,"merge",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(n,"min",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(n,"minIndex",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(n,"mode",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(n,"nice",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(n,"pairs",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(n,"permute",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(n,"quantile",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(n,"quantileSorted",{enumerable:!0,get:function(){return E.quantileSorted}}),Object.defineProperty(n,"quickselect",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(n,"range",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(n,"rank",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(n,"reduce",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(n,"reverse",{enumerable:!0,get:function(){return K.default}}),Object.defineProperty(n,"rollup",{enumerable:!0,get:function(){return p.rollup}}),Object.defineProperty(n,"rollups",{enumerable:!0,get:function(){return p.rollups}}),Object.defineProperty(n,"scan",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(n,"shuffle",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(n,"shuffler",{enumerable:!0,get:function(){return B.shuffler}}),Object.defineProperty(n,"some",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(n,"sort",{enumerable:!0,get:function(){return Q.default}}),Object.defineProperty(n,"subset",{enumerable:!0,get:function(){return ne.default}}),Object.defineProperty(n,"sum",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(n,"superset",{enumerable:!0,get:function(){return re.default}}),Object.defineProperty(n,"thresholdFreedmanDiaconis",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(n,"thresholdScott",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(n,"thresholdSturges",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(n,"tickIncrement",{enumerable:!0,get:function(){return q.tickIncrement}}),Object.defineProperty(n,"tickStep",{enumerable:!0,get:function(){return q.tickStep}}),Object.defineProperty(n,"ticks",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(n,"transpose",{enumerable:!0,get:function(){return H.default}}),Object.defineProperty(n,"union",{enumerable:!0,get:function(){return ie.default}}),Object.defineProperty(n,"variance",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(n,"zip",{enumerable:!0,get:function(){return G.default}});var r=le(e("./bisect.js")),i=ae(e("./ascending.js")),o=ae(e("./bisector.js")),s=ae(e("./count.js")),l=ae(e("./cross.js")),u=ae(e("./cumsum.js")),c=ae(e("./descending.js")),f=ae(e("./deviation.js")),d=ae(e("./extent.js")),h=e("./fsum.js"),p=le(e("./group.js")),y=ae(e("./groupSort.js")),g=ae(e("./bin.js")),v=ae(e("./threshold/freedmanDiaconis.js")),m=ae(e("./threshold/scott.js")),b=ae(e("./threshold/sturges.js")),x=ae(e("./max.js")),_=ae(e("./maxIndex.js")),w=ae(e("./mean.js")),M=ae(e("./median.js")),j=ae(e("./merge.js")),k=ae(e("./min.js")),O=ae(e("./minIndex.js")),A=ae(e("./mode.js")),T=ae(e("./nice.js")),P=ae(e("./pairs.js")),S=ae(e("./permute.js")),E=le(e("./quantile.js")),C=ae(e("./quickselect.js")),L=ae(e("./range.js")),R=ae(e("./rank.js")),I=ae(e("./least.js")),z=ae(e("./leastIndex.js")),D=ae(e("./greatest.js")),N=ae(e("./greatestIndex.js")),F=ae(e("./scan.js")),B=le(e("./shuffle.js")),U=ae(e("./sum.js")),q=le(e("./ticks.js")),H=ae(e("./transpose.js")),V=ae(e("./variance.js")),G=ae(e("./zip.js")),W=ae(e("./every.js")),Y=ae(e("./some.js")),X=ae(e("./filter.js")),Z=ae(e("./map.js")),$=ae(e("./reduce.js")),K=ae(e("./reverse.js")),Q=ae(e("./sort.js")),J=ae(e("./difference.js")),ee=ae(e("./disjoint.js")),te=ae(e("./intersection.js")),ne=ae(e("./subset.js")),re=ae(e("./superset.js")),ie=ae(e("./union.js")),oe=e("internmap");function ae(e){return e&&e.__esModule?e:{default:e}}function se(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(se=function(e){return e?n:t})(e)}function le(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=se(t);if(t&&t.has(e))return t.get(e);var n,r,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=o?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=e[n]);return i.default=e,t&&t.set(e,i),i}},{"./ascending.js":11,"./bin.js":12,"./bisect.js":13,"./bisector.js":14,"./count.js":16,"./cross.js":17,"./cumsum.js":18,"./descending.js":19,"./deviation.js":20,"./difference.js":21,"./disjoint.js":22,"./every.js":23,"./extent.js":24,"./filter.js":25,"./fsum.js":26,"./greatest.js":27,"./greatestIndex.js":28,"./group.js":29,"./groupSort.js":30,"./intersection.js":33,"./least.js":34,"./leastIndex.js":35,"./map.js":36,"./max.js":37,"./maxIndex.js":38,"./mean.js":39,"./median.js":40,"./merge.js":41,"./min.js":42,"./minIndex.js":43,"./mode.js":44,"./nice.js":45,"./pairs.js":47,"./permute.js":48,"./quantile.js":49,"./quickselect.js":50,"./range.js":51,"./rank.js":52,"./reduce.js":53,"./reverse.js":54,"./scan.js":55,"./shuffle.js":56,"./some.js":57,"./sort.js":58,"./subset.js":59,"./sum.js":60,"./superset.js":61,"./threshold/freedmanDiaconis.js":62,"./threshold/scott.js":63,"./threshold/sturges.js":64,"./ticks.js":65,"./transpose.js":66,"./union.js":67,"./variance.js":68,"./zip.js":69,internmap:608}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=new u.InternSet(e),n=n.map(f);var i,o=c(e);try{e:for(o.s();!(i=o.n()).done;){var a,s=i.value,l=c(n);try{for(l.s();!(a=l.n()).done;)if(!a.value.has(s)){e.delete(s);continue e}}catch(e){l.e(e)}finally{l.f()}}}catch(e){o.e(e)}finally{o.f()}return e};var u=e("internmap");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e){return e instanceof u.InternSet?e:new u.InternSet(e)}},{internmap:608}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t,n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d.default,i=!1;if(1===r.length){var o,a=h(e);try{for(a.s();!(o=a.n()).done;){var s=o.value,l=r(s);(i?(0,d.default)(l,n)<0:0===(0,d.default)(l,l))&&(t=s,n=l,i=!0)}}catch(e){a.e(e)}finally{a.f()}}else{var u,c=h(e);try{for(c.s();!(u=c.n()).done;){var f=u.value;(i?r(f,t)<0:0===r(f,f))&&(t=f,i=!0)}}catch(e){c.e(e)}finally{c.f()}}return t};var d=(e=e("./ascending.js"))&&e.__esModule?e:{default:e};function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},{"./ascending.js":11}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:l.default;if(1===n.length)return(0,u.default)(e,n);var r,i=-1,o=-1,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(e);try{for(a.s();!(r=a.n()).done;){var s=r.value;++o,(i<0?0===n(s,s):n(s,t)<0)&&(t=s,i=o)}}catch(e){a.e(e)}finally{a.f()}return i};var l=r(e("./ascending.js")),u=r(e("./minIndex.js"));function r(e){return e&&e.__esModule?e:{default:e}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},{"./ascending.js":11,"./minIndex.js":43}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(n,r){if("function"!=typeof n[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof r)throw new TypeError("mapper is not a function");return Array.from(n,function(e,t){return r(e,t,n)})}},{}],37:[function(e,t,n){"use strict";function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n;if(void 0===t){var r,i=c(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;null!=o&&(n<o||void 0===n&&o<=o)&&(n=o)}}catch(e){i.e(e)}finally{i.f()}}else{var a,s=-1,l=c(e);try{for(l.s();!(a=l.n()).done;){var u=a.value;null!=(u=t(u,++s,e))&&(n<u||void 0===n&&u<=u)&&(n=u)}}catch(e){l.e(e)}finally{l.f()}}return n}},{}],38:[function(e,t,n){"use strict";function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n,r=-1,i=-1;if(void 0===t){var o,a=f(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;++i,null!=s&&(n<s||void 0===n&&s<=s)&&(n=s,r=i)}}catch(e){a.e(e)}finally{a.f()}}else{var l,u=f(e);try{for(u.s();!(l=u.n()).done;){var c=l.value;null!=(c=t(c,++i,e))&&(n<c||void 0===n&&c<=c)&&(n=c,r=i)}}catch(e){u.e(e)}finally{u.f()}}return r}},{}],39:[function(e,t,n){"use strict";function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=0,r=0;if(void 0===t){var i,o=f(e);try{for(o.s();!(i=o.n()).done;){var a=i.value;null!=a&&(a=+a)>=a&&(++n,r+=a)}}catch(e){o.e(e)}finally{o.f()}}else{var s,l=-1,u=f(e);try{for(u.s();!(s=u.n()).done;){var c=s.value;null!=(c=t(c,++l,e))&&(c=+c)>=c&&(++n,r+=c)}}catch(e){u.e(e)}finally{u.f()}}if(n)return r/n}},{}],40:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return(0,r.default)(e,.5,t)};var r=(e=e("./quantile.js"))&&e.__esModule?e:{default:e}},{"./quantile.js":49}],41:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return Array.from(r(e))};var i=regeneratorRuntime.mark(r);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=o(t),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=8;break}return r=r.value,e.delegateYield(r,"t0",6);case 6:e.next=3;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),n.e(e.t1);case 13:return e.prev=13,n.f(),e.finish(13);case 16:case"end":return e.stop()}},i,null,[[1,10,13,16]])}},{}],42:[function(e,t,n){"use strict";function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n;if(void 0===t){var r,i=c(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;null!=o&&(o<n||void 0===n&&o<=o)&&(n=o)}}catch(e){i.e(e)}finally{i.f()}}else{var a,s=-1,l=c(e);try{for(l.s();!(a=l.n()).done;){var u=a.value;null!=(u=t(u,++s,e))&&(u<n||void 0===n&&u<=u)&&(n=u)}}catch(e){l.e(e)}finally{l.f()}}return n}},{}],43:[function(e,t,n){"use strict";function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n,r=-1,i=-1;if(void 0===t){var o,a=f(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;++i,null!=s&&(s<n||void 0===n&&s<=s)&&(n=s,r=i)}}catch(e){a.e(e)}finally{a.f()}}else{var l,u=f(e);try{for(u.s();!(l=u.n()).done;){var c=l.value;null!=(c=t(c,++i,e))&&(c<n||void 0===n&&c<=c)&&(n=c,r=i)}}catch(e){u.e(e)}finally{u.f()}}return r}},{}],44:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n,r=new v.InternMap;if(void 0===t){var i,o=m(e);try{for(o.s();!(i=o.n()).done;){var a=i.value;null!=a&&a<=a&&r.set(a,(r.get(a)||0)+1)}}catch(e){o.e(e)}finally{o.f()}}else{var s,l=-1,u=m(e);try{for(u.s();!(s=u.n()).done;){var c=s.value;null!=(c=t(c,++l,e))&&c<=c&&r.set(c,(r.get(c)||0)+1)}}catch(e){u.e(e)}finally{u.f()}}var f,d=0,h=m(r);try{for(h.s();!(f=h.n()).done;){var p=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(f.value,2),y=p[0],g=p[1];d<g&&(d=g,n=y)}}catch(e){h.e(e)}finally{h.f()}return n};var v=e("internmap");function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=b(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function b(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},{internmap:608}],45:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){var r;for(;;){var i=(0,o.tickIncrement)(e,t,n);if(i===r||0===i||!isFinite(i))return[e,t];0<i?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}};var o=e("./ticks.js")},{"./ticks.js":65}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return null===e?NaN:+e},n.numbers=r;var l=regeneratorRuntime.mark(r);function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(t,n){var r,i,o,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=21;break}r=u(t),e.prev=2,r.s();case 4:if((i=r.n()).done){e.next=11;break}if(null!=(s=i.value)&&(s=+s)>=s)return e.next=9,s;e.next=9;break;case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:e.next=40;break;case 21:o=-1,a=u(t),e.prev=23,a.s();case 25:if((s=a.n()).done){e.next=32;break}if(s=s.value,null!=(s=n(s,++o,t))&&(s=+s)>=s)return e.next=30,s;e.next=30;break;case 30:e.next=25;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(23),a.e(e.t1);case 37:return e.prev=37,a.f(),e.finish(37);case 40:case"end":return e.stop()}},l,null,[[2,13,16,19],[23,34,37,40]])}},{}],47:[function(e,t,n){"use strict";function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){return[e,t]}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t,n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:u,i=[],o=!1,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(e);try{for(a.s();!(n=a.n()).done;){var s=n.value;o&&i.push(r(t,s)),t=s,o=!0}}catch(e){a.e(e)}finally{a.f()}return i},n.pair=u},{}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){return Array.from(e,function(e){return t[e]})}},{}],49:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){if(e=Float64Array.from((0,l.numbers)(e,n)),r=e.length){if((t=+t)<=0||r<2)return(0,o.default)(e);if(1<=t)return(0,i.default)(e);var n=(r-1)*t,r=Math.floor(n),t=(0,i.default)((0,s.default)(e,r).subarray(0,r+1)),e=(0,o.default)(e.subarray(r+1));return t+(e-t)*(n-r)}},n.quantileSorted=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:l.default;if(i=e.length){if((t=+t)<=0||i<2)return+n(e[0],0,e);if(1<=t)return+n(e[i-1],i-1,e);var r=(i-1)*t,i=Math.floor(r),t=+n(e[i],i,e),e=+n(e[i+1],i+1,e);return t+(e-t)*(r-i)}};var i=r(e("./max.js")),o=r(e("./min.js")),s=r(e("./quickselect.js")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./number.js"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function r(e){return e&&e.__esModule?e:{default:e}}},{"./max.js":37,"./min.js":42,"./number.js":46,"./quickselect.js":50}],50:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:t.length-1;var o=4<arguments.length?arguments[4]:void 0;o=void 0===o?p.ascendingDefined:(0,p.compareDefined)(o);for(;r<i;){var a,s,l,u,c;600<i-r&&(a=i-r+1,s=n-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1),u=Math.max(r,Math.floor(n-s*l/a+c)),c=Math.min(i,Math.floor(n+(a-s)*l/a+c)),e(t,n,u,c,o));var f=t[n],d=r,h=i;for(y(t,r,n),0<o(t[i],f)&&y(t,r,i);d<h;){for(y(t,d,h),++d,--h;o(t[d],f)<0;)++d;for(;0<o(t[h],f);)--h}0===o(t[r],f)?y(t,r,h):y(t,++h,i),h<=n&&(r=h+1),n<=h&&(i=h-1)}return t};var p=e("./sort.js");function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}},{"./sort.js":58}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);for(;++r<i;)o[r]=e+r*n;return o}},{}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:l.default;if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");var r=Array.from(e),i=new Float64Array(r.length);2!==n.length&&(r=r.map(n),n=l.default);function o(e,t){return n(r[e],r[t])}var a,s;return Uint32Array.from(r,function(e,t){return t}).sort(n===l.default?function(e,t){return(0,u.ascendingDefined)(r[e],r[t])}:(0,u.compareDefined)(o)).forEach(function(e,t){var n=o(e,void 0===a?e:a);0<=n?((void 0===a||0<n)&&(a=e,s=t),i[e]=s):i[e]=NaN}),i};var l=(n=e("./ascending.js"))&&n.__esModule?n:{default:n},u=e("./sort.js")},{"./ascending.js":11,"./sort.js":58}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){if("function"!=typeof t)throw new TypeError("reducer is not a function");var r,i,o=e[Symbol.iterator](),a=-1;if(arguments.length<3){var s=o.next();if(r=s.done,n=s.value,r)return;++a}for(;i=o.next(),r=i.done,i=i.value,!r;)n=t(n,i,++a,e);return n}},{}],54:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(e).reverse()}},{}],55:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){t=(0,r.default)(e,t);return t<0?void 0:t};var r=(e=e("./leastIndex.js"))&&e.__esModule?e:{default:e}},{"./leastIndex.js":35}],56:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(n.shuffler=i)(Math.random);function i(o){return function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:e.length)-(t=+t);n;){var r=o()*n--|0,i=e[n+t];e[n+t]=e[r+t],e[r+t]=i}return e}}n.default=r},{}],57:[function(e,t,n){"use strict";function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if("function"!=typeof t)throw new TypeError("test is not a function");var n,r=-1,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(t(o,++r,e))return!0}}catch(e){i.e(e)}finally{i.f()}return!1}},{}],58:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ascendingDefined=u,n.compareDefined=l,n.default=function(t){for(var e=arguments.length,a=new Array(1<e?e-1:0),n=1;n<e;n++)a[n-1]=arguments[n];if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(a,1)[0];if(r&&2!==r.length||1<a.length){var i=Uint32Array.from(t,function(e,t){return t});return 1<a.length?(a=a.map(function(e){return t.map(e)}),i.sort(function(e,t){var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(a);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=u(i[e],i[t]);if(o)return o}}catch(e){r.e(e)}finally{r.f()}})):(r=t.map(r),i.sort(function(e,t){return u(r[e],r[t])})),(0,o.default)(t,i)}return t.sort(l(r))};var i=r(e("./ascending.js")),o=r(e("./permute.js"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:i.default;if(r===i.default)return u;if("function"!=typeof r)throw new TypeError("compare is not a function");return function(e,t){var n=r(e,t);return n||0===n?n:(0===r(t,t))-(0===r(e,e))}}function u(e,t){return(null==e||!(e<=e))-(null==t||!(t<=t))||(e<t?-1:t<e?1:0)}},{"./ascending.js":11,"./permute.js":48}],59:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return(0,r.default)(t,e)};var r=(e=e("./superset.js"))&&e.__esModule?e:{default:e}},{"./superset.js":61}],60:[function(e,t,n){"use strict";function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=0;if(void 0===t){var r,i,o=c(e);try{for(o.s();!(r=o.n()).done;)(i=+(i=r.value))&&(n+=i)}catch(e){o.e(e)}finally{o.f()}}else{var a,s=-1,l=c(e);try{for(l.s();!(a=l.n()).done;){var u=a.value;(u=+t(u,++s,e))&&(n+=u)}}catch(e){l.e(e)}finally{l.f()}}return n}},{}],61:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e){return null!==e&&"object"===r(e)?e.valueOf():e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n,r,i=e[Symbol.iterator](),o=new Set,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(t);try{for(a.s();!(n=a.n()).done;){var s=d(n.value);if(!o.has(s))for(var l=void 0,u=void 0;r=i.next(),l=r.value,u=r.done,r;){if(u)return!1;var c=d(l);if(o.add(c),Object.is(s,c))break}}}catch(e){a.e(e)}finally{a.f()}return!0}},{}],62:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){return Math.ceil((n-t)/(2*((0,i.default)(e,.75)-(0,i.default)(e,.25))*Math.pow((0,r.default)(e),-1/3)))};var r=o(e("../count.js")),i=o(e("../quantile.js"));function o(e){return e&&e.__esModule?e:{default:e}}},{"../count.js":16,"../quantile.js":49}],63:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){return Math.ceil((n-t)/(3.5*(0,i.default)(e)*Math.pow((0,r.default)(e),-1/3)))};var r=o(e("../count.js")),i=o(e("../deviation.js"));function o(e){return e&&e.__esModule?e:{default:e}}},{"../count.js":16,"../deviation.js":20}],64:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return Math.ceil(Math.log((0,r.default)(e))/Math.LN2)+1};var r=(e=e("../count.js"))&&e.__esModule?e:{default:e}},{"../count.js":16}],65:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)==(t=+t)&&0<n)return[e];(r=t<e)&&(i=e,e=t,t=i);if(0===(a=f(e,t,n))||!isFinite(a))return[];if(0<a){var l=Math.round(e/a),u=Math.round(t/a);for(l*a<e&&++l,t<u*a&&--u,o=new Array(i=u-l+1);++s<i;)o[s]=(l+s)*a}else{a=-a;var c=Math.round(e*a),u=Math.round(t*a);for(c/a<e&&++c,t<u/a&&--u,o=new Array(i=u-c+1);++s<i;)o[s]=(c+s)/a}r&&o.reverse();return o},n.tickIncrement=f,n.tickStep=function(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),r=r/n;i<=r?n*=10:o<=r?n*=5:a<=r&&(n*=2);return t<e?-n:n};var i=Math.sqrt(50),o=Math.sqrt(10),a=Math.sqrt(2);function f(e,t,n){e=(t-e)/Math.max(0,n),n=Math.floor(Math.log(e)/Math.LN10),e/=Math.pow(10,n);return 0<=n?(i<=e?10:o<=e?5:a<=e?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(i<=e?10:o<=e?5:a<=e?2:1)}},{}],66:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(!(i=e.length))return[];for(var t=-1,n=(0,s.default)(e,l),r=new Array(n);++t<n;)for(var i,o=-1,a=r[t]=new Array(i);++o<i;)a[o]=e[o][t];return r};var s=(e=e("./min.js"))&&e.__esModule?e:{default:e};function l(e){return e.length}},{"./min.js":42}],67:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){for(var e=new u.InternSet,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a,s=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(o[i]);try{for(s.s();!(a=s.n()).done;){var l=a.value;e.add(l)}}catch(e){s.e(e)}finally{s.f()}}return e};var u=e("internmap");function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},{internmap:608}],68:[function(e,t,n){"use strict";function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n,r=0,i=0,o=0;if(void 0===t){var a,s=h(e);try{for(s.s();!(a=s.n()).done;){var l=a.value;null!=l&&(l=+l)>=l&&(i+=(n=l-i)/++r,o+=n*(l-i))}}catch(e){s.e(e)}finally{s.f()}}else{var u,c=-1,f=h(e);try{for(f.s();!(u=f.n()).done;){var d=u.value;null!=(d=t(d,++c,e))&&(d=+d)>=d&&(i+=(n=d-i)/++r,o+=n*(d-i))}}catch(e){f.e(e)}finally{f.f()}}if(1<r)return o/(r-1)}},{}],69:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return(0,r.default)(arguments)};var r=(e=e("./transpose.js"))&&e.__esModule?e:{default:e}},{"./transpose.js":66}],70:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.axisBottom=function(e){return o(T,e)},n.axisLeft=function(e){return o(P,e)},n.axisRight=function(e){return o(A,e)},n.axisTop=function(e){return o(O,e)};var k=(e=e("./identity.js"))&&e.__esModule?e:{default:e};var O=1,A=2,T=3,P=4,S=1e-6;function r(e){return"translate("+e+",0)"}function i(e){return"translate(0,"+e+")"}function E(t){return function(e){return+t(e)}}function C(t,n){return n=Math.max(0,t.bandwidth()-2*n)/2,t.round()&&(n=Math.round(n)),function(e){return+t(e)+n}}function L(){return!this.__axis}function o(h,p){var y=[],g=null,v=null,m=6,b=6,x=3,_="undefined"!=typeof window&&1<window.devicePixelRatio?0:.5,w=h===O||h===P?-1:1,M=h===P||h===A?"x":"y",j=h===O||h===T?r:i;function t(e){var t=null==g?p.ticks?p.ticks.apply(p,y):p.domain():g,n=null==v?p.tickFormat?p.tickFormat.apply(p,y):k.default:v,r=Math.max(m,0)+x,i=p.range(),o=+i[0]+_,a=+i[i.length-1]+_,s=(p.bandwidth?C:E)(p.copy(),_),l=e.selection?e.selection():e,u=l.selectAll(".domain").data([null]),c=(d=l.selectAll(".tick").data(t,p).order()).exit(),f=d.enter().append("g").attr("class","tick"),i=d.select("line"),t=d.select("text"),u=u.merge(u.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),d=d.merge(f),i=i.merge(f.append("line").attr("stroke","currentColor").attr(M+"2",w*m)),t=t.merge(f.append("text").attr("fill","currentColor").attr(M,w*r).attr("dy",h===O?"0em":h===T?"0.71em":"0.32em"));e!==l&&(u=u.transition(e),d=d.transition(e),i=i.transition(e),t=t.transition(e),c=c.transition(e).attr("opacity",S).attr("transform",function(e){return isFinite(e=s(e))?j(e+_):this.getAttribute("transform")}),f.attr("opacity",S).attr("transform",function(e){var t=this.parentNode.__axis;return j((t&&isFinite(t=t(e))?t:s(e))+_)})),c.remove(),u.attr("d",h===P||h===A?b?"M"+w*b+","+o+"H"+_+"V"+a+"H"+w*b:"M"+_+","+o+"V"+a:b?"M"+o+","+w*b+"V"+_+"H"+a+"V"+w*b:"M"+o+","+_+"H"+a),d.attr("opacity",1).attr("transform",function(e){return j(s(e)+_)}),i.attr(M+"2",w*m),t.attr(M,w*r).text(n),l.filter(L).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",h===A?"start":h===P?"end":"middle"),l.each(function(){this.__axis=s})}return t.scale=function(e){return arguments.length?(p=e,t):p},t.ticks=function(){return y=Array.from(arguments),t},t.tickArguments=function(e){return arguments.length?(y=null==e?[]:Array.from(e),t):y.slice()},t.tickValues=function(e){return arguments.length?(g=null==e?null:Array.from(e),t):g&&g.slice()},t.tickFormat=function(e){return arguments.length?(v=e,t):v},t.tickSize=function(e){return arguments.length?(m=b=+e,t):m},t.tickSizeInner=function(e){return arguments.length?(m=+e,t):m},t.tickSizeOuter=function(e){return arguments.length?(b=+e,t):b},t.tickPadding=function(e){return arguments.length?(x=+e,t):x},t.offset=function(e){return arguments.length?(_=+e,t):_},t}},{"./identity.js":71}],71:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e}},{}],72:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"axisBottom",{enumerable:!0,get:function(){return r.axisBottom}}),Object.defineProperty(n,"axisLeft",{enumerable:!0,get:function(){return r.axisLeft}}),Object.defineProperty(n,"axisRight",{enumerable:!0,get:function(){return r.axisRight}}),Object.defineProperty(n,"axisTop",{enumerable:!0,get:function(){return r.axisTop}});var r=e("./axis.js")},{"./axis.js":70}],73:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.brushSelection=function(e){e=e.__brush;return e?e.dim.output(e.selection):null},n.brushX=function(){return u(J)},n.brushY=function(){return u(ee)},n.default=function(){return u(o)};var f=e("d3-dispatch"),U=e("d3-drag"),d=e("d3-interpolate"),q=e("d3-selection"),H=e("d3-transition"),h=r(e("./constant.js")),p=r(e("./event.js")),V=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./noevent.js"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function r(e){return e&&e.__esModule?e:{default:e}}function G(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var W={name:"drag"},Y={name:"space"},X={name:"handle"},Z={name:"center"},$=Math.abs,K=Math.max,Q=Math.min;function i(e){return[+e[0],+e[1]]}function y(e){return[i(e[0]),i(e[1])]}var J={name:"x",handles:["w","e"].map(g),input:function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},ee={name:"y",handles:["n","s"].map(g),input:function(e,t){return null==e?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},o={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(g),input:function(e){return null==e?null:y(e)},output:function(e){return e}},te={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ne={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},re={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ie={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},oe={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function g(e){return{type:e}}function v(e){return!e.ctrlKey&&!e.button}function m(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function b(){return navigator.maxTouchPoints||"ontouchstart"in this}function ae(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function u(I){var z,t=m,D=v,n=b,N=!0,i=(0,f.dispatch)("start","brush","end"),r=6;function o(e){var t=e.property("__brush",c).selectAll(".overlay").data([g("overlay")]);t.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",te.overlay).merge(t).each(function(){var e=ae(this).extent;(0,q.select)(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])}),e.selectAll(".selection").data([g("selection")]).enter().append("rect").attr("class","selection").attr("cursor",te.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");t=e.selectAll(".handle").data(I.handles,function(e){return e.type});t.exit().remove(),t.enter().append("rect").attr("class",function(e){return"handle handle--"+e.type}).attr("cursor",function(e){return te[e.type]}),e.each(F).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",s).filter(n).on("touchstart.brush",s).on("touchmove.brush",l).on("touchend.brush touchcancel.brush",u).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function F(){var e=(0,q.select)(this),t=ae(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",function(e){return"e"===e.type[e.type.length-1]?t[1][0]-r/2:t[0][0]-r/2}).attr("y",function(e){return"s"===e.type[0]?t[1][1]-r/2:t[0][1]-r/2}).attr("width",function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+r:r}).attr("height",function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+r:r})):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function B(e,t,n){var r=e.__brush.emitter;return!r||n&&r.clean?new a(e,t,n):r}function a(e,t,n){this.that=e,this.args=t,this.state=e.__brush,this.active=0,this.clean=n}function s(e){var f,i,o,a,s,l,u,c,d,h,p,y,g,v,m,b,x,_,w,M,j,k,O,t,A,T,P,S,n,E,r;function C(e){var t,n,r=G(e.changedTouches||[e]);try{for(r.s();!(t=r.n()).done;){var i,o=t.value,a=G(k);try{for(a.s();!(i=a.n()).done;){var s=i.value;s.identifier===o.identifier&&(s.cur=(0,q.pointer)(o,f))}}catch(e){a.e(e)}finally{a.f()}}}catch(e){r.e(e)}finally{r.f()}!w||M||j||1!==k.length||(n=k[0],$(n.cur[0]-n[0])>$(n.cur[1]-n[1])?j=!0:M=!0);var l,u=G(k);try{for(u.s();!(l=u.n()).done;){var c=l.value;c.cur&&(c[0]=c.cur[0],c[1]=c.cur[1])}}catch(e){u.e(e)}finally{u.f()}_=!0,(0,V.default)(e),L(e)}function L(e){var t,n=k[0],r=n.point0;switch(b=n[0]-r[0],x=n[1]-r[1],o){case Y:case W:a&&(b=K(c-d,Q(y-g,b)),A=d+b,P=g+b),s&&(x=K(h-p,Q(v-m,x)),T=p+x,S=m+x);break;case X:k[1]?(a&&(A=K(c,Q(y,k[0][0])),P=K(c,Q(y,k[1][0])),a=1),s&&(T=K(h,Q(v,k[0][1])),S=K(h,Q(v,k[1][1])),s=1)):(a<0?(b=K(c-d,Q(y-d,b)),A=d+b,P=g):0<a&&(b=K(c-g,Q(y-g,b)),A=d,P=g+b),s<0?(x=K(h-p,Q(v-p,x)),T=p+x,S=m):0<s&&(x=K(h-m,Q(v-m,x)),T=p,S=m+x));break;case Z:a&&(A=K(c,Q(y,d-b*a)),P=K(c,Q(y,g+b*a))),s&&(T=K(h,Q(v,p-x*s)),S=K(h,Q(v,m+x*s)))}P<A&&(a*=-1,t=d,d=g,g=t,t=A,A=P,P=t,i in ne&&E.attr("cursor",te[i=ne[i]])),S<T&&(s*=-1,t=p,p=m,m=t,t=T,T=S,S=t,i in re&&E.attr("cursor",te[i=re[i]])),l.selection&&(u=l.selection),M&&(A=u[0][0],P=u[1][0]),j&&(T=u[0][1],S=u[1][1]),u[0][0]===A&&u[0][1]===T&&u[1][0]===P&&u[1][1]===S||(l.selection=[[A,T],[P,S]],F.call(f),O.brush(e,o.name))}function R(e){if((0,V.nopropagation)(e),e.touches){if(e.touches.length)return;z&&clearTimeout(z),z=setTimeout(function(){z=null},500)}else(0,U.dragEnable)(e.view,_),r.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);var t;n.attr("pointer-events","all"),E.attr("cursor",te.overlay),l.selection&&(u=l.selection),(t=u)[0][0]!==t[1][0]&&t[0][1]!==t[1][1]||(l.selection=null,F.call(f)),O.end(e,o.name)}z&&!e.touches||D.apply(this,arguments)&&(f=this,i=e.target.__data__.type,o="selection"===(N&&e.metaKey?i="overlay":i)?W:N&&e.altKey?Z:X,a=I===ee?null:ie[i],s=I===J?null:oe[i],t=(l=ae(f)).extent,u=l.selection,c=t[0][0],h=t[0][1],y=t[1][0],v=t[1][1],x=b=0,w=a&&s&&N&&e.shiftKey,k=Array.from(e.touches||[e],function(e){var t=e.identifier;return(e=(0,q.pointer)(e,f)).point0=e.slice(),e.identifier=t,e}),(0,H.interrupt)(f),O=B(f,arguments,!0).beforestart(),"overlay"===i?(u&&(_=!0),t=[k[0],k[1]||k[0]],l.selection=u=[[d=I===ee?c:Q(t[0][0],t[1][0]),p=I===J?h:Q(t[0][1],t[1][1])],[g=I===ee?y:K(t[0][0],t[1][0]),m=I===J?v:K(t[0][1],t[1][1])]],1<k.length&&L(e)):(d=u[0][0],p=u[0][1],g=u[1][0],m=u[1][1]),A=d,T=p,P=g,S=m,n=(0,q.select)(f).attr("pointer-events","none"),E=n.selectAll(".overlay").attr("cursor",te[i]),e.touches?(O.moved=C,O.ended=R):(r=(0,q.select)(e.view).on("mousemove.brush",C,!0).on("mouseup.brush",R,!0),N&&r.on("keydown.brush",function(e){switch(e.keyCode){case 16:w=a&&s;break;case 18:o===X&&(a&&(g=P-b*a,d=A+b*a),s&&(m=S-x*s,p=T+x*s),o=Z,L(e));break;case 32:o!==X&&o!==Z||(a<0?g=P-b:0<a&&(d=A-b),s<0?m=S-x:0<s&&(p=T-x),o=Y,E.attr("cursor",te.selection),L(e));break;default:return}(0,V.default)(e)},!0).on("keyup.brush",function(e){switch(e.keyCode){case 16:w&&(M=j=w=!1,L(e));break;case 18:o===Z&&(a<0?g=P:0<a&&(d=A),s<0?m=S:0<s&&(p=T),o=X,L(e));break;case 32:o===Y&&(o=e.altKey?(a&&(g=P-b*a,d=A+b*a),s&&(m=S-x*s,p=T+x*s),Z):(a<0?g=P:0<a&&(d=A),s<0?m=S:0<s&&(p=T),X),E.attr("cursor",te[i]),L(e));break;default:return}(0,V.default)(e)},!0),(0,U.dragDisable)(e.view)),F.call(f),O.start(e,o.name))}function l(e){B(this,arguments).moved(e)}function u(e){B(this,arguments).ended(e)}function c(){var e=this.__brush||{selection:null};return e.extent=y(t.apply(this,arguments)),e.dim=I,e}return o.move=function(e,s,r){e.tween?e.on("start.brush",function(e){B(this,arguments).beforestart().start(e)}).on("interrupt.brush end.brush",function(e){B(this,arguments).end(e)}).tween("brush",function(){var t=this,n=t.__brush,r=B(t,arguments),e=n.selection,i=I.input("function"==typeof s?s.apply(this,arguments):s,n.extent),o=(0,d.interpolate)(e,i);function a(e){n.selection=1===e&&null===i?null:o(e),F.call(t),r.brush()}return null!==e&&null!==i?a:a(1)}):e.each(function(){var e=arguments,t=this.__brush,n=I.input("function"==typeof s?s.apply(this,e):s,t.extent),e=B(this,e).beforestart();(0,H.interrupt)(this),t.selection=null===n?null:n,F.call(this),e.start(r).brush(r).end(r)})},o.clear=function(e,t){o.move(e,null,t)},a.prototype={beforestart:function(){return 1==++this.active&&((this.state.emitter=this).starting=!0),this},start:function(e,t){return this.starting?(this.starting=!1,this.emit("start",e,t)):this.emit("brush",e),this},brush:function(e,t){return this.emit("brush",e,t),this},end:function(e,t){return 0==--this.active&&(delete this.state.emitter,this.emit("end",e,t)),this},emit:function(e,t,n){var r=(0,q.select)(this.that).datum();i.call(e,this.that,new p.default(e,{sourceEvent:t,target:o,selection:I.output(this.state.selection),mode:n,dispatch:i}),r)}},o.extent=function(e){return arguments.length?(t="function"==typeof e?e:(0,h.default)(y(e)),o):t},o.filter=function(e){return arguments.length?(D="function"==typeof e?e:(0,h.default)(!!e),o):D},o.touchable=function(e){return arguments.length?(n="function"==typeof e?e:(0,h.default)(!!e),o):n},o.handleSize=function(e){return arguments.length?(r=+e,o):r},o.keyModifiers=function(e){return arguments.length?(N=!!e,o):N},o.on=function(){var e=i.on.apply(i,arguments);return e===i?o:e},o}},{"./constant.js":74,"./event.js":75,"./noevent.js":77,"d3-dispatch":106,"d3-drag":110,"d3-interpolate":210,"d3-selection":342,"d3-transition":419}],74:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=function(e){return function(){return e}}},{}],75:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=t.sourceEvent,r=t.target,i=t.selection,o=t.mode,t=t.dispatch;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:o,enumerable:!0,configurable:!0},_:{value:t}})}},{}],76:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"brush",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"brushSelection",{enumerable:!0,get:function(){return r.brushSelection}}),Object.defineProperty(n,"brushX",{enumerable:!0,get:function(){return r.brushX}}),Object.defineProperty(n,"brushY",{enumerable:!0,get:function(){return r.brushY}});var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./brush.js"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}},{"./brush.js":73}],77:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e.preventDefault(),e.stopImmediatePropagation()},n.nopropagation=function(e){e.stopImmediatePropagation()}},{}],78:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.slice=void 0;var r=Array.prototype.slice;n.slice=r},{}],79:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.chordDirected=function(){return r(!0,!1)},n.chordTranspose=function(){return r(!1,!0)},n.default=function(){return r(!1,!1)};var u=e("./math.js");function w(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(n,e){return Array.from({length:e-n},function(e,t){return n+t})}function r(x,o){var a=0,s=null,_=null,l=null;function t(f){var d=f.length,h=new Array(d),e=M(0,d),p=new Array(d*d),y=new Array(d),g=0;f=Float64Array.from({length:d*d},o?function(e,t){return f[t%d][t/d|0]}:function(e,t){return f[t/d|0][t%d]});for(var t=0;t<d;++t){for(var n=0,r=0;r<d;++r)n+=f[t*d+r]+x*f[r*d+t];g+=h[t]=n}var v=(g=(0,u.max)(0,u.tau-a*d)/g)?a:u.tau/d,m=0;s&&e.sort(function(e,t){return s(h[e],h[t])});var b,i=w(e);try{for(i.s();!(b=i.n()).done;)!function(){var n=b.value,e=m;if(x){var t=M(1+~d,d).filter(function(e){return e<0?f[~e*d+n]:f[n*d+e]});_&&t.sort(function(e,t){return _(e<0?-f[~e*d+n]:f[n*d+e],t<0?-f[~t*d+n]:f[n*d+t])});var r,i=w(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;o<0?(p[~o*d+n]||(p[~o*d+n]={source:null,target:null})).target={index:n,startAngle:m,endAngle:m+=f[~o*d+n]*g,value:f[~o*d+n]}:(p[n*d+o]||(p[n*d+o]={source:null,target:null})).source={index:n,startAngle:m,endAngle:m+=f[n*d+o]*g,value:f[n*d+o]}}}catch(e){i.e(e)}finally{i.f()}y[n]={index:n,startAngle:e,endAngle:m,value:h[n]}}else{t=M(0,d).filter(function(e){return f[n*d+e]||f[e*d+n]});_&&t.sort(function(e,t){return _(f[n*d+e],f[n*d+t])});var a,s=w(t);try{for(s.s();!(a=s.n()).done;){var l,u=a.value,c=void 0;n<u?(c=p[n*d+u]||(p[n*d+u]={source:null,target:null})).source={index:n,startAngle:m,endAngle:m+=f[n*d+u]*g,value:f[n*d+u]}:((c=p[u*d+n]||(p[u*d+n]={source:null,target:null})).target={index:n,startAngle:m,endAngle:m+=f[n*d+u]*g,value:f[n*d+u]},n===u&&(c.source=c.target)),c.source&&c.target&&c.source.value<c.target.value&&(l=c.source,c.source=c.target,c.target=l)}}catch(e){s.e(e)}finally{s.f()}y[n]={index:n,startAngle:e,endAngle:m,value:h[n]}}m+=v}()}catch(e){i.e(e)}finally{i.f()}return(p=Object.values(p)).groups=y,l?p.sort(l):p}return t.padAngle=function(e){return arguments.length?(a=(0,u.max)(0,e),t):a},t.sortGroups=function(e){return arguments.length?(s=e,t):s},t.sortSubgroups=function(e){return arguments.length?(_=e,t):_},t.sortChords=function(e){return arguments.length?(null==e?l=null:(l=function(e,t){return n(e.source.value+e.target.value,t.source.value+t.target.value)})._=n=e,t):l&&l._;var n},t}},{"./math.js":82}],80:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(){return e}}},{}],81:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"chord",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"chordDirected",{enumerable:!0,get:function(){return r.chordDirected}}),Object.defineProperty(n,"chordTranspose",{enumerable:!0,get:function(){return r.chordTranspose}}),Object.defineProperty(n,"ribbon",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"ribbonArrow",{enumerable:!0,get:function(){return i.ribbonArrow}});var r=o(e("./chord.js")),i=o(e("./ribbon.js"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=o?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=e[n]);return i.default=e,t&&t.set(e,i),i}},{"./chord.js":79,"./ribbon.js":83}],82:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.tau=n.sin=n.pi=n.max=n.halfPi=n.epsilon=n.cos=n.abs=void 0;var r=Math.abs;n.abs=r;r=Math.cos;n.cos=r;r=Math.sin;n.sin=r;r=Math.PI;n.pi=r,n.halfPi=r/2,n.tau=2*r;r=Math.max;n.max=r;n.epsilon=1e-12},{}],83:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return u()},n.ribbonArrow=function(){return u(l)};var v=e("d3-path"),m=e("./array.js"),r=(n=e("./constant.js"))&&n.__esModule?n:{default:n},b=e("./math.js");function i(e){return e.source}function o(e){return e.target}function a(e){return e.radius}function s(e){return e.startAngle}function x(e){return e.endAngle}function _(){return 0}function l(){return 10}function u(l){var u=i,c=o,f=a,d=a,h=s,p=x,y=_,g=null;function t(){var e,t=u.apply(this,arguments),n=c.apply(this,arguments),r=y.apply(this,arguments)/2,i=m.slice.call(arguments),o=+f.apply(this,(i[0]=t,i)),a=h.apply(this,i)-b.halfPi,s=p.apply(this,i)-b.halfPi,t=+d.apply(this,(i[0]=n,i)),n=h.apply(this,i)-b.halfPi,i=p.apply(this,i)-b.halfPi;if(g=g||(e=(0,v.path)()),r>b.epsilon&&((0,b.abs)(s-a)>2*r+b.epsilon?a<s?(a+=r,s-=r):(a-=r,s+=r):a=s=(a+s)/2,(0,b.abs)(i-n)>2*r+b.epsilon?n<i?(n+=r,i-=r):(n-=r,i+=r):n=i=(n+i)/2),g.moveTo(o*(0,b.cos)(a),o*(0,b.sin)(a)),g.arc(0,0,o,a,s),a===n&&s===i||(l?(r=t-+l.apply(this,arguments),s=(n+i)/2,g.quadraticCurveTo(0,0,r*(0,b.cos)(n),r*(0,b.sin)(n)),g.lineTo(t*(0,b.cos)(s),t*(0,b.sin)(s)),g.lineTo(r*(0,b.cos)(i),r*(0,b.sin)(i))):(g.quadraticCurveTo(0,0,t*(0,b.cos)(n),t*(0,b.sin)(n)),g.arc(0,0,t,n,i))),g.quadraticCurveTo(0,0,o*(0,b.cos)(a),o*(0,b.sin)(a)),g.closePath(),e)return g=null,e+""||null}return l&&(t.headRadius=function(e){return arguments.length?(l="function"==typeof e?e:(0,r.default)(+e),t):l}),t.radius=function(e){return arguments.length?(f=d="function"==typeof e?e:(0,r.default)(+e),t):f},t.sourceRadius=function(e){return arguments.length?(f="function"==typeof e?e:(0,r.default)(+e),t):f},t.targetRadius=function(e){return arguments.length?(d="function"==typeof e?e:(0,r.default)(+e),t):d},t.startAngle=function(e){return arguments.length?(h="function"==typeof e?e:(0,r.default)(+e),t):h},t.endAngle=function(e){return arguments.length?(p="function"==typeof e?e:(0,r.default)(+e),t):p},t.padAngle=function(e){return arguments.length?(y="function"==typeof e?e:(0,r.default)(+e),t):y},t.source=function(e){return arguments.length?(u=e,t):u},t.target=function(e){return arguments.length?(c=e,t):c},t.context=function(e){return arguments.length?(g=null==e?null:e,t):g},t}},{"./array.js":78,"./constant.js":80,"./math.js":82,"d3-path":225}],84:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Color=u,n.Rgb=M,n.darker=n.brighter=void 0,n.default=m,n.hsl=P,n.hslConvert=T,n.rgb=w,n.rgbConvert=_;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./define.js"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function u(){}n.darker=.7;n.brighter=1/.7;var i="\\s*([+-]?\\d+)\\s*",e="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",o=/^#([0-9a-f]{3,8})$/,l=new RegExp("^rgb\\("+[i,i,i]+"\\)$"),c=new RegExp("^rgb\\("+[n,n,n]+"\\)$"),f=new RegExp("^rgba\\("+[i,i,i,e]+"\\)$"),d=new RegExp("^rgba\\("+[n,n,n,e]+"\\)$"),h=new RegExp("^hsl\\("+[e,n,n]+"\\)$"),p=new RegExp("^hsla\\("+[e,n,n,e]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function g(){return this.rgb().formatHex()}function v(){return this.rgb().formatRgb()}function m(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=o.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?b(t):3===n?new M(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?x(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?x(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=l.exec(e))?new M(t[1],t[2],t[3],1):(t=c.exec(e))?new M(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=f.exec(e))?x(t[1],t[2],t[3],t[4]):(t=d.exec(e))?x(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=h.exec(e))?A(t[1],t[2]/100,t[3]/100,1):(t=p.exec(e))?A(t[1],t[2]/100,t[3]/100,t[4]):y.hasOwnProperty(e)?b(y[e]):"transparent"===e?new M(NaN,NaN,NaN,0):null}function b(e){return new M(e>>16&255,e>>8&255,255&e,1)}function x(e,t,n,r){return new M(e=r<=0?t=n=NaN:e,t,n,r)}function _(e){return(e=e instanceof u?e:m(e))?new M((e=e.rgb()).r,e.g,e.b,e.opacity):new M}function w(e,t,n,r){return 1===arguments.length?_(e):new M(e,t,n,null==r?1:r)}function M(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function j(){return"#"+O(this.r)+O(this.g)+O(this.b)}function k(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function O(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function A(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||1<=n?e=t=NaN:t<=0&&(e=NaN),new S(e,t,n,r)}function T(e){if(e instanceof S)return new S(e.h,e.s,e.l,e.opacity);if(!(e=!(e instanceof u)?m(e):e))return new S;if(e instanceof S)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=0<l&&l<1?0:a,new S(a,s,l,e.opacity)}function P(e,t,n,r){return 1===arguments.length?T(e):new S(e,t,n,null==r?1:r)}function S(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function E(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}(0,r.default)(u,m,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:g,formatHex:g,formatHsl:function(){return T(this).formatHsl()},formatRgb:v,toString:v}),(0,r.default)(M,w,(0,r.extend)(u,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new M(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new M(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:j,formatHex:j,formatRgb:k,toString:k})),(0,r.default)(S,P,(0,r.extend)(u,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new S(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new S(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,t=n+(n<.5?n:1-n)*t,n=2*n-t;return new M(E(240<=e?e-240:120+e,n,t),E(e,n,t),E(e<120?240+e:e-120,n,t),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}))},{"./define.js":86}],85:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Cubehelix=y,n.default=r;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=l(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./define.js")),o=e("./color.js"),s=e("./math.js");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}var u=-.29227,c=-.90649,f=1.97294,d=f*c,h=1.78277*f,p=1.78277*u- -.14861*c;function r(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof y)return new y(e.h,e.s,e.l,e.opacity);var t=(e=!(e instanceof o.Rgb)?(0,o.rgbConvert)(e):e).r/255,n=e.g/255,r=e.b/255,i=(p*r+d*t-h*n)/(p+d-h),r=(f*(n-i)-u*(t=r-i))/c,n=Math.sqrt(r*r+t*t)/(f*i*(1-i));return new y((t=n?Math.atan2(r,t)*s.degrees-120:NaN)<0?t+360:t,n,i,e.opacity)}(e):new y(e,t,n,null==r?1:r)}function y(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}(0,n.default)(y,r,(0,n.extend)(o.Color,{brighter:function(e){return e=null==e?o.brighter:Math.pow(o.brighter,e),new y(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?o.darker:Math.pow(o.darker,e),new y(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*s.radians,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),e=Math.sin(e);return new o.Rgb(255*(t+n*(-.14861*r+1.78277*e)),255*(t+n*(u*r+c*e)),255*(t+f*r*n),this.opacity)}}))},{"./color.js":84,"./define.js":86,"./math.js":89}],86:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){(e.prototype=t.prototype=n).constructor=e},n.extend=function(e,t){var n,r=Object.create(e.prototype);for(n in t)r[n]=t[n];return r}},{}],87:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"color",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"cubehelix",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"gray",{enumerable:!0,get:function(){return i.gray}}),Object.defineProperty(n,"hcl",{enumerable:!0,get:function(){return i.hcl}}),Object.defineProperty(n,"hsl",{enumerable:!0,get:function(){return r.hsl}}),Object.defineProperty(n,"lab",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"lch",{enumerable:!0,get:function(){return i.lch}}),Object.defineProperty(n,"rgb",{enumerable:!0,get:function(){return r.rgb}});var r=l(e("./color.js")),i=l(e("./lab.js")),o=(e=e("./cubehelix.js"))&&e.__esModule?e:{default:e};function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=o?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=e[n]);return i.default=e,t&&t.set(e,i),i}},{"./color.js":84,"./cubehelix.js":85,"./lab.js":88}],88:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Hcl=w,n.Lab=y,n.default=p,n.gray=function(e,t){return new y(e,0,0,null==t?1:t)},n.hcl=_,n.lch=function(e,t,n,r){return 1===arguments.length?x(e):new w(n,t,e,null==r?1:r)};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=l(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./define.js")),s=e("./color.js"),r=e("./math.js");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}var u=.96422,c=1,f=.82521,i=4/29,o=6/29*3*(6/29),d=6/29*(6/29)*(6/29);function h(e){if(e instanceof y)return new y(e.l,e.a,e.b,e.opacity);if(e instanceof w)return M(e);var t,n,r=b((e=!(e instanceof s.Rgb)?(0,s.rgbConvert)(e):e).r),i=b(e.g),o=b(e.b),a=g((.2225045*r+.7168786*i+.0606169*o)/c);return r===i&&i===o?t=n=a:(t=g((.4360747*r+.3850649*i+.1430804*o)/u),n=g((.0139322*r+.0971045*i+.7141733*o)/f)),new y(116*a-16,500*(t-a),200*(a-n),e.opacity)}function p(e,t,n,r){return 1===arguments.length?h(e):new y(e,t,n,null==r?1:r)}function y(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function g(e){return d<e?Math.pow(e,1/3):e/o+i}function v(e){return 6/29<e?e*e*e:o*(e-i)}function m(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function b(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function x(e){if(e instanceof w)return new w(e.h,e.c,e.l,e.opacity);if(0===(e=!(e instanceof y)?h(e):e).a&&0===e.b)return new w(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*r.degrees;return new w(t<0?360+t:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function _(e,t,n,r){return 1===arguments.length?x(e):new w(e,t,n,null==r?1:r)}function w(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function M(e){if(isNaN(e.h))return new y(e.l,0,0,e.opacity);var t=e.h*r.radians;return new y(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}(0,n.default)(y,p,(0,n.extend)(s.Color,{brighter:function(e){return new y(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new y(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200,t=u*v(t),e=c*v(e),n=f*v(n);return new s.Rgb(m(3.1338561*t-1.6168667*e-.4906146*n),m(-.9787684*t+1.9161415*e+.033454*n),m(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),(0,n.default)(w,_,(0,n.extend)(s.Color,{brighter:function(e){return new w(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new w(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return M(this).rgb()}}))},{"./color.js":84,"./define.js":86,"./math.js":89}],89:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.radians=n.degrees=void 0;var r=Math.PI/180;n.radians=r;r=180/Math.PI;n.degrees=r},{}],90:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];for(;++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}},{}],91:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.slice=void 0;var r=Array.prototype.slice;n.slice=r},{}],92:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return e-t}},{}],93:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.blurX=function(e,t,n){for(var r=e.width,i=e.height,o=1+(n<<1),a=0;a<i;++a)for(var s=0,l=0;s<r+n;++s)s<r&&(l+=e.data[s+a*r]),n<=s&&(o<=s&&(l-=e.data[s-o+a*r]),t.data[s-n+a*r]=l/Math.min(s+1,r-1+o-s,o))},n.blurY=function(e,t,n){for(var r=e.width,i=e.height,o=1+(n<<1),a=0;a<r;++a)for(var s=0,l=0;s<i+n;++s)s<i&&(l+=e.data[a+s*r]),n<=s&&(o<=s&&(l-=e.data[a+(s-o)*r]),t.data[a+(s-n)*r]=l/Math.min(s+1,i-1+o-s,o))}},{}],94:[function(e,t,n){arguments[4][74][0].apply(n,arguments)},{dup:74}],95:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n,r=-1,i=t.length;for(;++r<i;)if(n=function(e,t){for(var n=t[0],r=t[1],i=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var l=e[o],u=l[0],c=l[1],f=e[s],d=f[0],h=f[1];if(function(e,t,n){return function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&function(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}(e[e=+(e[0]===t[0])],n[e],t[e])}(l,f,t))return 0;r<c!=r<h&&n<(d-u)*(r-c)/(h-c)+u&&(i=-i)}return i}(e,t[r]))return n;return 0}},{}],96:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var d=1,h=1,i=s.thresholdSturges,o=t;function n(t){var e,n,r=i(t);return(r=Array.isArray(r)?r.slice().sort(l.default):(e=(0,s.extent)(t),n=(0,s.tickStep)(e[0],e[1],r),(0,s.ticks)(Math.floor(e[0]/n)*n,Math.floor(e[1]/n-1)*n,r))).map(function(e){return a(t,e)})}function a(t,n){var i=[],r=[];return function(e,t,a){var s,l,n,r,i,o,u=new Array,c=new Array;s=l=-1,r=e[0]>=t,g[r<<1].forEach(f);for(;++s<d-1;)n=r,r=e[s+1]>=t,g[n|r<<1].forEach(f);g[r<<0].forEach(f);for(;++l<h-1;){for(s=-1,r=e[l*d+d]>=t,i=e[l*d]>=t,g[r<<1|i<<2].forEach(f);++s<d-1;)n=r,r=e[l*d+d+s+1]>=t,o=i,i=e[l*d+s+1]>=t,g[n|r<<1|i<<2|o<<3].forEach(f);g[r|i<<3].forEach(f)}s=-1,i=e[l*d]>=t,g[i<<2].forEach(f);for(;++s<d-1;)o=i,i=e[l*d+s+1]>=t,g[i<<2|o<<3].forEach(f);function f(e){var t,n=[e[0][0]+s,e[0][1]+l],r=[e[1][0]+s,e[1][1]+l],i=p(n),o=p(r);(e=c[i])?(t=u[o])?(delete c[e.end],delete u[t.start],e===t?(e.ring.push(r),a(e.ring)):u[e.start]=c[t.end]={start:e.start,end:t.end,ring:e.ring.concat(t.ring)}):(delete c[e.end],e.ring.push(r),c[e.end=o]=e):(e=u[o])?(t=c[i])?(delete u[e.start],delete c[t.end],e===t?(e.ring.push(r),a(e.ring)):u[t.start]=c[e.end]={start:t.start,end:e.end,ring:t.ring.concat(e.ring)}):(delete u[e.start],e.ring.unshift(n),u[e.start=i]=e):u[i]=c[o]={start:i,end:o,ring:[n,r]}}g[i<<3].forEach(f)}(t,n,function(e){o(e,t,n),0<(0,u.default)(e)?i.push([e]):r.push(e)}),r.forEach(function(e){for(var t,n=0,r=i.length;n<r;++n)if(-1!==(0,f.default)((t=i[n])[0],e))return void t.push(e)}),{type:"MultiPolygon",value:n,coordinates:i}}function p(e){return 2*e[0]+e[1]*(d+1)*4}function t(e,s,l){e.forEach(function(e){var t,n=e[0],r=e[1],i=0|n,o=0|r,a=s[o*d+i];0<n&&n<d&&i===n&&(t=s[o*d+i-1],e[0]=n+(l-t)/(a-t)-.5),0<r&&r<h&&o===r&&(t=s[(o-1)*d+i],e[1]=r+(l-t)/(a-t)-.5)})}return n.contour=a,n.size=function(e){if(!arguments.length)return[d,h];var t=Math.floor(e[0]),e=Math.floor(e[1]);if(!(0<=t&&0<=e))throw new Error("invalid size");return d=t,h=e,n},n.thresholds=function(e){return arguments.length?(i="function"==typeof e?e:Array.isArray(e)?(0,c.default)(r.slice.call(e)):(0,c.default)(e),n):i},n.smooth=function(e){return arguments.length?(o=e?t:y.default,n):o===t},n};var s=e("d3-array"),r=e("./array.js"),l=i(e("./ascending.js")),u=i(e("./area.js")),c=i(e("./constant.js")),f=i(e("./contains.js")),y=i(e("./noop.js"));function i(e){return e&&e.__esModule?e:{default:e}}var g=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]]},{"./area.js":90,"./array.js":91,"./ascending.js":92,"./constant.js":94,"./contains.js":95,"./noop.js":99,"d3-array":32}],97:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var s=M,l=j,u=k,n=960,r=500,i=20,c=2,f=3*i,d=n+2*f>>c,h=r+2*f>>c,p=(0,_.default)(20);function t(e){var o=new Float32Array(d*h),t=new Float32Array(d*h),a=Math.pow(2,-c);e.forEach(function(e,t,n){var r=(s(e,t,n)+f)*a,i=(l(e,t,n)+f)*a,e=+u(e,t,n);0<=r&&r<d&&0<=i&&i<h&&(t=Math.floor(r),n=Math.floor(i),o[t+n*d]+=(1-(r=r-t-.5))*(1-(i=i-n-.5))*e,o[t+1+n*d]+=r*(1-i)*e,o[t+1+(n+1)*d]+=r*i*e,o[t+(n+1)*d]+=(1-r)*i*e)}),(0,x.blurX)({width:d,height:h,data:o},{width:d,height:h,data:t},i>>c),(0,x.blurY)({width:d,height:h,data:t},{width:d,height:h,data:o},i>>c),(0,x.blurX)({width:d,height:h,data:o},{width:d,height:h,data:t},i>>c),(0,x.blurY)({width:d,height:h,data:t},{width:d,height:h,data:o},i>>c),(0,x.blurX)({width:d,height:h,data:o},{width:d,height:h,data:t},i>>c),(0,x.blurY)({width:d,height:h,data:t},{width:d,height:h,data:o},i>>c);var e=p(o);return Array.isArray(e)||(t=(0,m.max)(o),e=(0,m.tickStep)(0,t,e),(e=(0,m.range)(0,Math.floor(t/e)*e,e)).shift()),(0,w.default)().thresholds(e).size([d,h])(o).map(y)}function y(e){return e.value*=Math.pow(2,-2*c),e.coordinates.forEach(o),e}function o(e){e.forEach(a)}function a(e){e.forEach(g)}function g(e){e[0]=e[0]*Math.pow(2,c)-f,e[1]=e[1]*Math.pow(2,c)-f}function v(){return d=n+2*(f=3*i)>>c,h=r+2*f>>c,t}return t.x=function(e){return arguments.length?(s="function"==typeof e?e:(0,_.default)(+e),t):s},t.y=function(e){return arguments.length?(l="function"==typeof e?e:(0,_.default)(+e),t):l},t.weight=function(e){return arguments.length?(u="function"==typeof e?e:(0,_.default)(+e),t):u},t.size=function(e){if(!arguments.length)return[n,r];var t=+e[0],e=+e[1];if(!(0<=t&&0<=e))throw new Error("invalid size");return n=t,r=e,v()},t.cellSize=function(e){if(!arguments.length)return 1<<c;if(!(1<=(e=+e)))throw new Error("invalid cell size");return c=Math.floor(Math.log(e)/Math.LN2),v()},t.thresholds=function(e){return arguments.length?(p="function"==typeof e?e:Array.isArray(e)?(0,_.default)(b.slice.call(e)):(0,_.default)(e),t):p},t.bandwidth=function(e){if(!arguments.length)return Math.sqrt(i*(i+1));if(!(0<=(e=+e)))throw new Error("invalid bandwidth");return i=Math.round((Math.sqrt(4*e*e+1)-1)/2),v()},t};var m=e("d3-array"),b=e("./array.js"),x=e("./blur.js"),_=r(e("./constant.js")),w=r(e("./contours.js"));function r(e){return e&&e.__esModule?e:{default:e}}function M(e){return e[0]}function j(e){return e[1]}function k(){return 1}},{"./array.js":91,"./blur.js":93,"./constant.js":94,"./contours.js":96,"d3-array":32}],98:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"contourDensity",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"contours",{enumerable:!0,get:function(){return r.default}});var r=o(e("./contours.js")),i=o(e("./density.js"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./contours.js":96,"./density.js":97}],99:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){}},{}],100:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var b=i(e("delaunator")),u=i(e("./path.js")),r=i(e("./polygon.js")),o=i(e("./voronoi.js"));function i(e){return e&&e.__esModule?e:{default:e}}var c=regeneratorRuntime.mark(p);function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=2*Math.PI,y=Math.pow;function d(e){return e[0]}function h(e){return e[1]}e=function(){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this._delaunator=new b.default(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}var e,t,n;return e=i,n=[{key:"from",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:h,r=3<arguments.length?arguments[3]:void 0;return new i("length"in e?function(e,t,n,r){for(var i=e.length,o=new Float64Array(2*i),a=0;a<i;++a){var s=e[a];o[2*a]=t.call(r,s,a,e),o[2*a+1]=n.call(r,s,a,e)}return o}(e,t,n,r):Float64Array.from(p(e,t,n,r)))}}],(t=[{key:"update",value:function(){return this._delaunator.update(),this._init(),this}},{key:"_init",value:function(){var e,t,n=this._delaunator,r=this.points;if(n.hull&&2<n.hull.length&&function(e){for(var t=e.triangles,n=e.coords,r=0;r<t.length;r+=3){var i=2*t[r],o=2*t[r+1],a=2*t[r+2];if(1e-10<(n[a]-n[i])*(n[1+o]-n[1+i])-(n[o]-n[i])*(n[1+a]-n[1+i]))return}return 1}(n)){this.collinear=Int32Array.from({length:r.length/2},function(e,t){return t}).sort(function(e,t){return r[2*e]-r[2*t]||r[2*e+1]-r[2*t+1]});for(var i=this.collinear[0],n=this.collinear[this.collinear.length-1],n=[r[2*i],r[2*i+1],r[2*n],r[2*n+1]],o=1e-8*Math.hypot(n[3]-n[1],n[2]-n[0]),a=0,s=r.length/2;a<s;++a){var l=(e=r[2*a],t=r[2*a+1],l=o,[e+Math.sin(e+t)*l,t+Math.cos(e-t)*l]);r[2*a]=l[0],r[2*a+1]=l[1]}this._delaunator=new b.default(r)}else delete this.collinear;for(var u=this.halfedges=this._delaunator.halfedges,c=this.hull=this._delaunator.hull,f=this.triangles=this._delaunator.triangles,d=this.inedges.fill(-1),h=this._hullIndex.fill(-1),p=0,y=u.length;p<y;++p){var g=f[p%3==2?p-2:p+1];-1!==u[p]&&-1!==d[g]||(d[g]=p)}for(var v=0,m=c.length;v<m;++v)h[c[v]]=v;c.length<=2&&0<c.length&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=c[0],d[c[0]]=1,2===c.length&&(d[c[1]]=0,this.triangles[1]=c[1],this.triangles[2]=c[1]))}},{key:"voronoi",value:function(e){return new o.default(this,e)}},{key:"neighbors",value:regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,l,u,c,f,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.inedges,r=this.hull,i=this._hullIndex,o=this.halfedges,a=this.triangles,!(s=this.collinear)){e.next=10;break}if(0<(l=s.indexOf(t)))return e.next=6,s[l-1];e.next=6;break;case 6:if(l<s.length-1)return e.next=9,s[l+1];e.next=9;break;case 9:return e.abrupt("return");case 10:if(-1===(u=n[t]))return e.abrupt("return");e.next=13;break;case 13:c=u,f=-1;case 14:return e.next=16,f=a[c];case 16:if(a[c=c%3==2?c-2:c+1]!==t)return e.abrupt("return");e.next=19;break;case 19:if(-1!==(c=o[c])){e.next=26;break}if((d=r[(i[t]+1)%r.length])!==f)return e.next=25,d;e.next=25;break;case 25:return e.abrupt("return");case 26:if(c!==u){e.next=14;break}case 27:case"end":return e.stop()}},e,this)})},{key:"find",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if((e=+e)!=e||(t=+t)!=t)return-1;for(var r,i=n;0<=(r=this._step(n,e,t))&&r!==n&&r!==i;)n=r;return r}},{key:"_step",value:function(e,t,n){var r=this.inedges,i=this.hull,o=this._hullIndex,a=this.halfedges,s=this.triangles,l=this.points;if(-1===r[e]||!l.length)return(e+1)%(l.length>>1);var u=e,c=y(t-l[2*e],2)+y(n-l[2*e+1],2),f=r[e],d=f;do{var h=s[d],p=y(t-l[2*h],2)+y(n-l[2*h+1],2);if(p<c&&(c=p,u=h),s[d=d%3==2?d-2:d+1]!==e)break;if(-1===(d=a[d])){if((d=i[(o[e]+1)%i.length])!==h&&y(t-l[2*d],2)+y(n-l[2*d+1],2)<c)return d;break}}while(d!==f);return u}},{key:"render",value:function(e){for(var t=null==e?e=new u.default:void 0,n=this.points,r=this.halfedges,i=this.triangles,o=0,a=r.length;o<a;++o){var s,l=r[o];l<o||(s=2*i[o],l=2*i[l],e.moveTo(n[s],n[1+s]),e.lineTo(n[l],n[1+l]))}return this.renderHull(e),t&&t.value()}},{key:"renderPoints",value:function(e,t){void 0!==t||e&&"function"==typeof e.moveTo||(t=e,e=null),t=null==t?2:+t;for(var n=null==e?e=new u.default:void 0,r=this.points,i=0,o=r.length;i<o;i+=2){var a=r[i],s=r[i+1];e.moveTo(a+t,s),e.arc(a,s,t,0,l)}return n&&n.value()}},{key:"renderHull",value:function(e){var t=null==e?e=new u.default:void 0,n=this.hull,r=this.points,i=2*n[0],o=n.length;e.moveTo(r[i],r[1+i]);for(var a=1;a<o;++a){var s=2*n[a];e.lineTo(r[s],r[1+s])}return e.closePath(),t&&t.value()}},{key:"hullPolygon",value:function(){var e=new r.default;return this.renderHull(e),e.value()}},{key:"renderTriangle",value:function(e,t){var n=null==t?t=new u.default:void 0,r=this.points,i=this.triangles,o=2*i[e*=3],a=2*i[e+1],e=2*i[e+2];return t.moveTo(r[o],r[1+o]),t.lineTo(r[a],r[1+a]),t.lineTo(r[e],r[1+e]),t.closePath(),n&&n.value()}},{key:"trianglePolygons",value:regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.triangles,t=0,n=n.length/3;case 2:if(t<n)return e.next=5,this.trianglePolygon(t);e.next=8;break;case 5:++t,e.next=2;break;case 8:case"end":return e.stop()}},e,this)})},{key:"trianglePolygon",value:function(e){var t=new r.default;return this.renderTriangle(e,t),t.value()}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function p(t,n,r,i){var o,a,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=0,a=f(t),e.prev=2,a.s();case 4:if((s=a.n()).done){e.next=13;break}return l=s.value,e.next=8,n.call(i,l,o,t);case 8:return e.next=10,r.call(i,l,o,t);case 10:++o;case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),a.e(e.t0);case 18:return e.prev=18,a.f(),e.finish(18);case 21:case"end":return e.stop()}},c,null,[[2,15,18,21]])}n.default=e},{"./path.js":102,"./polygon.js":103,"./voronoi.js":104,delaunator:571}],101:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Delaunay",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"Voronoi",{enumerable:!0,get:function(){return i.default}});var r=o(e("./delaunay.js")),i=o(e("./voronoi.js"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./delaunay.js":100,"./voronoi.js":104}],102:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._x0=this._y0=this._x1=this._y1=null,this._=""}var t,n,r;return t=e,(n=[{key:"moveTo",value:function(e,t){this._+="M".concat(this._x0=this._x1=+e,",").concat(this._y0=this._y1=+t)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}},{key:"lineTo",value:function(e,t){this._+="L".concat(this._x1=+e,",").concat(this._y1=+t)}},{key:"arc",value:function(e,t,n){var r=(e=+e)+(n=+n),i=t=+t;if(n<0)throw new Error("negative radius");null===this._x1?this._+="M".concat(r,",").concat(i):(1e-6<Math.abs(this._x1-r)||1e-6<Math.abs(this._y1-i))&&(this._+="L"+r+","+i),n&&(this._+="A".concat(n,",").concat(n,",0,1,1,").concat(e-n,",").concat(t,"A").concat(n,",").concat(n,",0,1,1,").concat(this._x1=r,",").concat(this._y1=i))}},{key:"rect",value:function(e,t,n,r){this._+="M".concat(this._x0=this._x1=+e,",").concat(this._y0=this._y1=+t,"h").concat(+n,"v").concat(+r,"h").concat(-n,"Z")}},{key:"value",value:function(){return this._||null}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},{}],103:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._=[]}var t,n,r;return t=e,(n=[{key:"moveTo",value:function(e,t){this._.push([e,t])}},{key:"closePath",value:function(){this._.push(this._[0].slice())}},{key:"lineTo",value:function(e,t){this._.push([e,t])}},{key:"value",value:function(){return this._.length?this._:null}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},{}],104:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var b=i(e("./path.js")),r=i(e("./polygon.js"));function i(e){return e&&e.__esModule?e:{default:e}}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e=function(){function o(e){var t=x(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0,960,500],4),n=t[0],r=t[1],i=t[2],t=t[3];if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),!((i=+i)>=(n=+n)&&(t=+t)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=i,this.xmin=n,this.ymax=t,this.ymin=r,this._init()}var e,t,n;return e=o,(t=[{key:"update",value:function(){return this.delaunay.update(),this._init(),this}},{key:"_init",value:function(){for(var e=this.delaunay,t=e.points,n=e.hull,r=e.triangles,i=this.vectors,o=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2),a=0,s=0,l=r.length;a<l;a+=3,s+=2){var u,c,f=2*r[a],d=2*r[a+1],h=2*r[a+2],p=t[f],y=t[1+f],g=t[d],v=t[1+d],m=t[h],b=t[1+h],x=g-p,f=v-y,d=m-p,h=b-y,g=2*(x*h-f*d);c=Math.abs(g)<1e-9?(v=1e9,u=2*r[0],u=(p+m)/2-(v*=Math.sign((t[u]-p)*h-(t[1+u]-y)*d))*h,(y+b)/2+v*d):(u=p+(h*(p=x*x+f*f)-f*(h=d*d+h*h))*(c=1/g),y+(x*h-d*p)*c),o[s]=u,o[s+1]=c}var _,w,M,j=n[n.length-1],k=4*j,O=t[2*j],A=t[2*j+1];i.fill(0);for(var T=0;T<n.length;++T)_=k,w=O,M=A,O=t[2*(j=n[T])],A=t[2*j+1],i[_+2]=i[k=4*j]=M-A,i[_+3]=i[k+1]=O-w}},{key:"render",value:function(e){var t=null==e?e=new b.default:void 0,n=this.delaunay,r=n.halfedges,i=n.inedges,o=n.hull,a=this.circumcenters,s=this.vectors;if(o.length<=1)return null;for(var l=0,u=r.length;l<u;++l){var c,f,d,h=r[l];h<l||(f=2*Math.floor(l/3),d=2*Math.floor(h/3),c=a[f],h=a[1+f],f=a[d],d=a[1+d],this._renderSegment(c,h,f,d,e))}for(var p=o[o.length-1],y=0;y<o.length;++y){var g=p,p=o[y],v=2*Math.floor(i[p]/3),m=a[v],v=a[1+v],g=4*g,g=this._project(m,v,s[2+g],s[3+g]);g&&this._renderSegment(m,v,g[0],g[1],e)}return t&&t.value()}},{key:"renderBounds",value:function(e){var t=null==e?e=new b.default:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}},{key:"renderCell",value:function(e,t){var n=null==t?t=new b.default:void 0,r=this._clip(e);if(null!==r&&r.length){t.moveTo(r[0],r[1]);for(var i=r.length;r[0]===r[i-2]&&r[1]===r[i-1]&&1<i;)i-=2;for(var o=2;o<i;o+=2)r[o]===r[o-2]&&r[o+1]===r[o-1]||t.lineTo(r[o],r[o+1]);return t.closePath(),n&&n.value()}}},{key:"cellPolygons",value:regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=this.delaunay.points,t=0,n=r.length/2;case 2:if(!(t<n)){e.next=11;break}if(r=this.cellPolygon(t))return r.index=t,e.next=8,r;e.next=8;break;case 8:++t,e.next=2;break;case 11:case"end":return e.stop()}},e,this)})},{key:"cellPolygon",value:function(e){var t=new r.default;return this.renderCell(e,t),t.value()}},{key:"_renderSegment",value:function(e,t,n,r,i){var o=this._regioncode(e,t),a=this._regioncode(n,r);0===o&&0===a?(i.moveTo(e,t),i.lineTo(n,r)):(a=this._clipSegment(e,t,n,r,o,a))&&(i.moveTo(a[0],a[1]),i.lineTo(a[2],a[3]))}},{key:"contains",value:function(e,t,n){return(t=+t)==t&&(n=+n)==n&&this.delaunay._step(e,t,n)===e}},{key:"neighbors",value:regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,l,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this._clip(t))){e.next=33;break}r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=f(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(this.delaunay.neighbors(t)),e.prev=3,r.s();case 5:if((i=r.n()).done){e.next=25;break}if(o=i.value,!(a=this._clip(o))){e.next=23;break}s=0,l=n.length;case 10:if(!(s<l)){e.next=23;break}u=0,c=a.length;case 12:if(!(u<c)){e.next=20;break}if(n[s]==a[u]&&n[s+1]==a[u+1]&&n[(s+2)%l]==a[(u+c-2)%c]&&n[(s+3)%l]==a[(u+c-1)%c])return e.next=16,o;e.next=17;break;case 16:return e.abrupt("break",23);case 17:u+=2,e.next=12;break;case 20:s+=2,e.next=10;break;case 23:e.next=5;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(3),r.e(e.t0);case 30:return e.prev=30,r.f(),e.finish(30);case 33:case"end":return e.stop()}},e,this,[[3,27,30,33]])})},{key:"_cell",value:function(e){var t=this.circumcenters,n=this.delaunay,r=n.inedges,i=n.halfedges,o=n.triangles,a=r[e];if(-1===a)return null;var s=[],l=a;do{var u=Math.floor(l/3)}while((s.push(t[2*u],t[2*u+1]),o[l=l%3==2?l-2:l+1]===e)&&((l=i[l])!==a&&-1!==l));return s}},{key:"_clip",value:function(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var t=this._cell(e);if(null===t)return null;var n=this.vectors,r=4*e;return n[r]||n[1+r]?this._clipInfinite(e,t,n[r],n[1+r],n[2+r],n[3+r]):this._clipFinite(e,t)}},{key:"_clipFinite",value:function(e,t){for(var n,r,i,o,a=t.length,s=null,l=t[a-2],u=t[a-1],c=this._regioncode(l,u),f=0,d=0;d<a;d+=2)if(n=l,r=u,l=t[d],u=t[d+1],i=c,c=this._regioncode(l,u),0===i&&0===c)o=f,f=0,s?s.push(l,u):s=[l,u];else{var h=void 0,p=void 0,y=void 0,g=void 0,v=void 0;if(0===i){if(null===(h=this._clipSegment(n,r,l,u,i,c)))continue;var m=x(h,4),p=m[0],y=m[1],g=m[2],v=m[3]}else{if(null===(h=this._clipSegment(l,u,n,r,c,i)))continue;h=x(h,4);g=h[0],v=h[1],p=h[2],y=h[3],o=f,f=this._edgecode(p,y),o&&f&&this._edge(e,o,f,s,s.length),s?s.push(p,y):s=[p,y]}o=f,f=this._edgecode(g,v),o&&f&&this._edge(e,o,f,s,s.length),s?s.push(g,v):s=[g,v]}if(s)o=f,f=this._edgecode(s[0],s[1]),o&&f&&this._edge(e,o,f,s,s.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}},{key:"_clipSegment",value:function(e,t,n,r,i,o){for(;;){if(0===i&&0===o)return[e,t,n,r];if(i&o)return null;var a=void 0,s=void 0,l=i||o;8&l?(a=e+(n-e)*(this.ymax-t)/(r-t),s=this.ymax):4&l?(a=e+(n-e)*(this.ymin-t)/(r-t),s=this.ymin):a=2&l?(s=t+(r-t)*(this.xmax-e)/(n-e),this.xmax):(s=t+(r-t)*(this.xmin-e)/(n-e),this.xmin),i?(e=a,t=s,i=this._regioncode(e,t)):(n=a,r=s,o=this._regioncode(n,r))}}},{key:"_clipInfinite",value:function(e,t,n,r,i,o){var a=Array.from(t);if((r=this._project(a[0],a[1],n,r))&&a.unshift(r[0],r[1]),(r=this._project(a[a.length-2],a[a.length-1],i,o))&&a.push(r[0],r[1]),a=this._clipFinite(e,a))for(var s,l=0,u=a.length,c=this._edgecode(a[u-2],a[u-1]);l<u;l+=2)s=c,c=this._edgecode(a[l],a[l+1]),s&&c&&(l=this._edge(e,s,c,a,l),u=a.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}},{key:"_edge",value:function(e,t,n,r,i){for(;t!==n;){var o=void 0,a=void 0;switch(t){case 5:t=4;continue;case 4:t=6,o=this.xmax,a=this.ymin;break;case 6:t=2;continue;case 2:t=10,o=this.xmax,a=this.ymax;break;case 10:t=8;continue;case 8:t=9,o=this.xmin,a=this.ymax;break;case 9:t=1;continue;case 1:t=5,o=this.xmin,a=this.ymin}r[i]===o&&r[i+1]===a||!this.contains(e,o,a)||(r.splice(i,0,o,a),i+=2)}if(4<r.length)for(var s=0;s<r.length;s+=2){var l=(s+2)%r.length,u=(s+4)%r.length;(r[s]===r[l]&&r[l]===r[u]||r[s+1]===r[1+l]&&r[1+l]===r[1+u])&&(r.splice(l,2),s-=2)}return i}},{key:"_project",value:function(e,t,n,r){var i,o,a,s=1/0;if(r<0){if(t<=this.ymin)return null;(i=(this.ymin-t)/r)<s&&(a=this.ymin,o=e+(s=i)*n)}else if(0<r){if(t>=this.ymax)return null;(i=(this.ymax-t)/r)<s&&(a=this.ymax,o=e+(s=i)*n)}if(0<n){if(e>=this.xmax)return null;(i=(this.xmax-e)/n)<s&&(o=this.xmax,a=t+(s=i)*r)}else if(n<0){if(e<=this.xmin)return null;(i=(this.xmin-e)/n)<s&&(o=this.xmin,a=t+(s=i)*r)}return[o,a]}},{key:"_edgecode",value:function(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}},{key:"_regioncode",value:function(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}();n.default=e},{"./path.js":102,"./polygon.js":103}],105:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o={value:function(){}};function r(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new i(r)}function i(e){this._=e}function l(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=o,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}i.prototype=r.prototype={constructor:i,on:function(e,t){var n,r,i=this._,o=(r=i,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(0<=n&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=o[a]).type)i[n]=l(i[n],e.name,t);else if(null==t)for(n in i)i[n]=l(i[n],e.name,null);return this}for(;++a<s;)if((n=(e=o[a]).type)&&(n=function(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}(i[n],e.name)))return n},copy:function(){var e,t={},n=this._;for(e in n)t[e]=n[e].slice();return new i(t)},call:function(e,t){if(0<(n=arguments.length-2))for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}},n.default=r},{}],106:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"dispatch",{enumerable:!0,get:function(){return r.default}});var r=(e=e("./dispatch.js"))&&e.__esModule?e:{default:e}},{"./dispatch.js":105}],107:[function(e,t,n){arguments[4][74][0].apply(n,arguments)},{dup:74}],108:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var r,i,o,a,s=A,l=T,n=P,t=S,y={},g=(0,_.dispatch)("start","drag","end"),v=0,u=0;function m(e){e.on("mousedown.drag",c).filter(t).on("touchstart.drag",h).on("touchmove.drag",p,j.nonpassive).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(e,t){a||!s.call(this,e,t)||(t=x(this,l.call(this,e,t),e,t,"mouse"))&&((0,w.select)(e.view).on("mousemove.drag",f,j.nonpassivecapture).on("mouseup.drag",d,j.nonpassivecapture),(0,M.default)(e.view),(0,j.nopropagation)(e),o=!1,r=e.clientX,i=e.clientY,t("start",e))}function f(e){var t,n;(0,j.default)(e),o||(t=e.clientX-r,n=e.clientY-i,o=u<t*t+n*n),y.mouse("drag",e)}function d(e){(0,w.select)(e.view).on("mousemove.drag mouseup.drag",null),(0,M.yesdrag)(e.view,o),(0,j.default)(e),y.mouse("end",e)}function h(e,t){if(s.call(this,e,t))for(var n,r=e.changedTouches,i=l.call(this,e,t),o=r.length,a=0;a<o;++a)(n=x(this,i,e,t,r[a].identifier,r[a]))&&((0,j.nopropagation)(e),n("start",e,r[a]))}function p(e){for(var t,n=e.changedTouches,r=n.length,i=0;i<r;++i)(t=y[n[i].identifier])&&((0,j.default)(e),t("drag",e,n[i]))}function b(e){var t,n,r=e.changedTouches,i=r.length;for(a&&clearTimeout(a),a=setTimeout(function(){a=null},500),t=0;t<i;++t)(n=y[r[t].identifier])&&((0,j.nopropagation)(e),n("end",e,r[t]))}function x(a,s,e,l,u,t){var c,f,d,h=g.copy(),p=(0,w.pointer)(t||e,s);if(null!=(d=n.call(a,new O.default("beforestart",{sourceEvent:e,target:m,identifier:u,active:v,x:p[0],y:p[1],dx:0,dy:0,dispatch:h}),l)))return c=d.x-p[0]||0,f=d.y-p[1]||0,function e(t,n,r){var i,o=p;switch(t){case"start":y[u]=e,i=v++;break;case"end":delete y[u],--v;case"drag":p=(0,w.pointer)(r||n,s),i=v}h.call(t,a,new O.default(t,{sourceEvent:n,subject:d,target:m,identifier:u,active:i,x:p[0]+c,y:p[1]+f,dx:p[0]-o[0],dy:p[1]-o[1],dispatch:h}),l)}}return m.filter=function(e){return arguments.length?(s="function"==typeof e?e:(0,k.default)(!!e),m):s},m.container=function(e){return arguments.length?(l="function"==typeof e?e:(0,k.default)(e),m):l},m.subject=function(e){return arguments.length?(n="function"==typeof e?e:(0,k.default)(e),m):n},m.touchable=function(e){return arguments.length?(t="function"==typeof e?e:(0,k.default)(!!e),m):t},m.on=function(){var e=g.on.apply(g,arguments);return e===g?m:e},m.clickDistance=function(e){return arguments.length?(u=(e=+e)*e,m):Math.sqrt(u)},m};var _=e("d3-dispatch"),w=e("d3-selection"),M=i(e("./nodrag.js")),j=i(e("./noevent.js")),k=r(e("./constant.js")),O=r(e("./event.js"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=o?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=e[n]);return i.default=e,t&&t.set(e,i),i}function A(e){return!e.ctrlKey&&!e.button}function T(){return this.parentNode}function P(e,t){return null==t?{x:e.x,y:e.y}:t}function S(){return navigator.maxTouchPoints||"ontouchstart"in this}},{"./constant.js":107,"./event.js":109,"./nodrag.js":111,"./noevent.js":112,"d3-dispatch":106,"d3-selection":342}],109:[function(e,t,n){"use strict";function r(e,t){var n=t.sourceEvent,r=t.subject,i=t.target,o=t.identifier,a=t.active,s=t.x,l=t.y,u=t.dx,c=t.dy,t=t.dispatch;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:t}})}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=r).prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e}},{}],110:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"drag",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"dragDisable",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"dragEnable",{enumerable:!0,get:function(){return i.yesdrag}});var r=(n=e("./drag.js"))&&n.__esModule?n:{default:n},i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./nodrag.js"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}},{"./drag.js":108,"./nodrag.js":111}],111:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.document.documentElement,e=(0,i.select)(e).on("dragstart.drag",o.default,o.nonpassivecapture);"onselectstart"in t?e.on("selectstart.drag",o.default,o.nonpassivecapture):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")},n.yesdrag=function(e,t){var n=e.document.documentElement,r=(0,i.select)(e).on("dragstart.drag",null);t&&(r.on("click.drag",o.default,o.nonpassivecapture),setTimeout(function(){r.on("click.drag",null)},0));"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)};var i=e("d3-selection"),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./noevent.js"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}},{"./noevent.js":112,"d3-selection":342}],112:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e.preventDefault(),e.stopImmediatePropagation()},n.nonpassivecapture=n.nonpassive=void 0,n.nopropagation=function(e){e.stopImmediatePropagation()};n.nonpassive={passive:!1};n.nonpassivecapture={capture:!0,passive:!1}},{}],113:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){for(var t in e){var n,r,i=e[t].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;o&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;e[t]=i}return e};var o=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours()},{}],114:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=(n.csvParseRows=n.csvParse=n.csvFormatValue=n.csvFormatRows=n.csvFormatRow=n.csvFormatBody=n.csvFormat=void 0,((r=e("./dsv.js"))&&r.__esModule?r:{default:r}).default)(","),r=e.parse;n.csvParse=r;r=e.parseRows;n.csvParseRows=r;r=e.format;n.csvFormat=r;r=e.formatBody;n.csvFormatBody=r;r=e.formatRows;n.csvFormatRows=r;r=e.formatRow;n.csvFormatRow=r;e=e.formatValue;n.csvFormatValue=e},{"./dsv.js":115}],115:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(r){var a=new RegExp('["'+r+"\n\r]"),f=r.charCodeAt(0);function t(r,e){var t,n=[],i=r.length,o=0,a=0,s=i<=0,l=!1;function u(){if(s)return h;if(l)return l=!1,d;var e,t,n=o;if(r.charCodeAt(n)===p){for(;o++<i&&r.charCodeAt(o)!==p||r.charCodeAt(++o)===p;);return(e=o)>=i?s=!0:(t=r.charCodeAt(o++))===y?l=!0:t===g&&(l=!0,r.charCodeAt(o)===y&&++o),r.slice(n+1,e-1).replace(/""/g,'"')}for(;o<i;){if((t=r.charCodeAt(e=o++))===y)l=!0;else if(t===g)l=!0,r.charCodeAt(o)===y&&++o;else if(t!==f)continue;return r.slice(n,e)}return s=!0,r.slice(n,i)}for(r.charCodeAt(i-1)===y&&--i,r.charCodeAt(i-1)===g&&--i;(t=u())!==h;){for(var c=[];t!==d&&t!==h;)c.push(t),t=u();e&&null==(c=e(c,a++))||n.push(c)}return n}function n(e,n){return e.map(function(t){return n.map(function(e){return o(t[e])}).join(r)})}function i(e){return e.map(o).join(r)}function o(e){return null==e?"":e instanceof Date?(n=(t=e).getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds(),isNaN(t)?"Invalid Date":function(e){return e<0?"-"+u(-e,6):9999<e?"+"+u(e,6):u(e,4)}(t.getUTCFullYear())+"-"+u(t.getUTCMonth()+1,2)+"-"+u(t.getUTCDate(),2)+(o?"T"+u(n,2)+":"+u(r,2)+":"+u(i,2)+"."+u(o,3)+"Z":i?"T"+u(n,2)+":"+u(r,2)+":"+u(i,2)+"Z":r||n?"T"+u(n,2)+":"+u(r,2)+"Z":"")):a.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e;var t,n,r,i,o}return{parse:function(e,o){var a,s;return(e=t(e,function(e,t){return a?a(e,t-1):(s=e,void(a=o?(r=o,i=l(n=e),function(e,t){return r(i(e),t,n)}):l(e)));var n,r,i})).columns=s||[],e},parseRows:t,format:function(e,t){return[(t=null==t?s(e):t).map(o).join(r)].concat(n(e,t)).join("\n")},formatBody:function(e,t){return n(e,t=null==t?s(e):t).join("\n")},formatRows:function(e){return e.map(i).join("\n")},formatRow:i,formatValue:o}};var d={},h={},p=34,y=10,g=13;function l(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function s(e){var n=Object.create(null),r=[];return e.forEach(function(e){for(var t in e)t in n||r.push(n[t]=t)}),r}function u(e,t){var n=e+"",e=n.length;return e<t?new Array(t-e+1).join(0)+n:n}},{}],116:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"autoType",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"csvFormat",{enumerable:!0,get:function(){return i.csvFormat}}),Object.defineProperty(n,"csvFormatBody",{enumerable:!0,get:function(){return i.csvFormatBody}}),Object.defineProperty(n,"csvFormatRow",{enumerable:!0,get:function(){return i.csvFormatRow}}),Object.defineProperty(n,"csvFormatRows",{enumerable:!0,get:function(){return i.csvFormatRows}}),Object.defineProperty(n,"csvFormatValue",{enumerable:!0,get:function(){return i.csvFormatValue}}),Object.defineProperty(n,"csvParse",{enumerable:!0,get:function(){return i.csvParse}}),Object.defineProperty(n,"csvParseRows",{enumerable:!0,get:function(){return i.csvParseRows}}),Object.defineProperty(n,"dsvFormat",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"tsvFormat",{enumerable:!0,get:function(){return o.tsvFormat}}),Object.defineProperty(n,"tsvFormatBody",{enumerable:!0,get:function(){return o.tsvFormatBody}}),Object.defineProperty(n,"tsvFormatRow",{enumerable:!0,get:function(){return o.tsvFormatRow}}),Object.defineProperty(n,"tsvFormatRows",{enumerable:!0,get:function(){return o.tsvFormatRows}}),Object.defineProperty(n,"tsvFormatValue",{enumerable:!0,get:function(){return o.tsvFormatValue}}),Object.defineProperty(n,"tsvParse",{enumerable:!0,get:function(){return o.tsvParse}}),Object.defineProperty(n,"tsvParseRows",{enumerable:!0,get:function(){return o.tsvParseRows}});var r=s(e("./dsv.js")),i=e("./csv.js"),o=e("./tsv.js"),a=s(e("./autoType.js"));function s(e){return e&&e.__esModule?e:{default:e}}},{"./autoType.js":113,"./csv.js":114,"./dsv.js":115,"./tsv.js":117}],117:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=(n.tsvParseRows=n.tsvParse=n.tsvFormatValue=n.tsvFormatRows=n.tsvFormatRow=n.tsvFormatBody=n.tsvFormat=void 0,((r=e("./dsv.js"))&&r.__esModule?r:{default:r}).default)("\t"),r=e.parse;n.tsvParse=r;r=e.parseRows;n.tsvParseRows=r;r=e.format;n.tsvFormat=r;r=e.formatBody;n.tsvFormatBody=r;r=e.formatRows;n.tsvFormatRows=r;r=e.formatRow;n.tsvFormatRow=r;e=e.formatValue;n.tsvFormatValue=e},{"./dsv.js":115}],118:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.backOut=n.backInOut=n.backIn=void 0;var r=function e(t){function n(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,n.overshoot=e,n}(1.70158);n.backIn=r;r=function e(t){function n(e){return--e*e*((e+1)*t+e)+1}return t=+t,n.overshoot=e,n}(1.70158);n.backOut=r;r=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(1.70158);n.backInOut=r},{}],119:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.bounceIn=function(e){return 1-h(1-e)},n.bounceInOut=function(e){return((e*=2)<=1?1-h(1-e):h(e-1)+1)/2},n.bounceOut=h;var r=4/11,i=6/11,o=8/11,a=.75,s=9/11,l=10/11,u=.9375,c=21/22,f=63/64,d=1/r/r;function h(e){return(e=+e)<r?d*e*e:e<o?d*(e-=i)*e+a:e<l?d*(e-=s)*e+u:d*(e-=c)*e+f}},{}],120:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.circleIn=function(e){return 1-Math.sqrt(1-e*e)},n.circleInOut=function(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2},n.circleOut=function(e){return Math.sqrt(1- --e*e)}},{}],121:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.cubicIn=function(e){return e*e*e},n.cubicInOut=function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2},n.cubicOut=function(e){return--e*e*e+1}},{}],122:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.elasticOut=n.elasticInOut=n.elasticIn=void 0;var o=e("./math.js"),a=2*Math.PI,e=function t(n,r){var i=Math.asin(1/(n=Math.max(1,n)))*(r/=a);function e(e){return n*(0,o.tpmt)(- --e)*Math.sin((i-e)/r)}return e.amplitude=function(e){return t(e,r*a)},e.period=function(e){return t(n,e)},e}(1,.3);n.elasticIn=e;e=function t(n,r){var i=Math.asin(1/(n=Math.max(1,n)))*(r/=a);function e(e){return 1-n*(0,o.tpmt)(e=+e)*Math.sin((e+i)/r)}return e.amplitude=function(e){return t(e,r*a)},e.period=function(e){return t(n,e)},e}(1,.3);n.elasticOut=e;e=function t(n,r){var i=Math.asin(1/(n=Math.max(1,n)))*(r/=a);function e(e){return((e=2*e-1)<0?n*(0,o.tpmt)(-e)*Math.sin((i-e)/r):2-n*(0,o.tpmt)(e)*Math.sin((i+e)/r))/2}return e.amplitude=function(e){return t(e,r*a)},e.period=function(e){return t(n,e)},e}(1,.3);n.elasticInOut=e},{"./math.js":126}],123:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.expIn=function(e){return(0,r.tpmt)(1-+e)},n.expInOut=function(e){return((e*=2)<=1?(0,r.tpmt)(1-e):2-(0,r.tpmt)(e-1))/2},n.expOut=function(e){return 1-(0,r.tpmt)(e)};var r=e("./math.js")},{"./math.js":126}],124:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"easeBack",{enumerable:!0,get:function(){return f.backInOut}}),Object.defineProperty(n,"easeBackIn",{enumerable:!0,get:function(){return f.backIn}}),Object.defineProperty(n,"easeBackInOut",{enumerable:!0,get:function(){return f.backInOut}}),Object.defineProperty(n,"easeBackOut",{enumerable:!0,get:function(){return f.backOut}}),Object.defineProperty(n,"easeBounce",{enumerable:!0,get:function(){return c.bounceOut}}),Object.defineProperty(n,"easeBounceIn",{enumerable:!0,get:function(){return c.bounceIn}}),Object.defineProperty(n,"easeBounceInOut",{enumerable:!0,get:function(){return c.bounceInOut}}),Object.defineProperty(n,"easeBounceOut",{enumerable:!0,get:function(){return c.bounceOut}}),Object.defineProperty(n,"easeCircle",{enumerable:!0,get:function(){return u.circleInOut}}),Object.defineProperty(n,"easeCircleIn",{enumerable:!0,get:function(){return u.circleIn}}),Object.defineProperty(n,"easeCircleInOut",{enumerable:!0,get:function(){return u.circleInOut}}),Object.defineProperty(n,"easeCircleOut",{enumerable:!0,get:function(){return u.circleOut}}),Object.defineProperty(n,"easeCubic",{enumerable:!0,get:function(){return o.cubicInOut}}),Object.defineProperty(n,"easeCubicIn",{enumerable:!0,get:function(){return o.cubicIn}}),Object.defineProperty(n,"easeCubicInOut",{enumerable:!0,get:function(){return o.cubicInOut}}),Object.defineProperty(n,"easeCubicOut",{enumerable:!0,get:function(){return o.cubicOut}}),Object.defineProperty(n,"easeElastic",{enumerable:!0,get:function(){return d.elasticOut}}),Object.defineProperty(n,"easeElasticIn",{enumerable:!0,get:function(){return d.elasticIn}}),Object.defineProperty(n,"easeElasticInOut",{enumerable:!0,get:function(){return d.elasticInOut}}),Object.defineProperty(n,"easeElasticOut",{enumerable:!0,get:function(){return d.elasticOut}}),Object.defineProperty(n,"easeExp",{enumerable:!0,get:function(){return l.expInOut}}),Object.defineProperty(n,"easeExpIn",{enumerable:!0,get:function(){return l.expIn}}),Object.defineProperty(n,"easeExpInOut",{enumerable:!0,get:function(){return l.expInOut}}),Object.defineProperty(n,"easeExpOut",{enumerable:!0,get:function(){return l.expOut}}),Object.defineProperty(n,"easeLinear",{enumerable:!0,get:function(){return r.linear}}),Object.defineProperty(n,"easePoly",{enumerable:!0,get:function(){return a.polyInOut}}),Object.defineProperty(n,"easePolyIn",{enumerable:!0,get:function(){return a.polyIn}}),Object.defineProperty(n,"easePolyInOut",{enumerable:!0,get:function(){return a.polyInOut}}),Object.defineProperty(n,"easePolyOut",{enumerable:!0,get:function(){return a.polyOut}}),Object.defineProperty(n,"easeQuad",{enumerable:!0,get:function(){return i.quadInOut}}),Object.defineProperty(n,"easeQuadIn",{enumerable:!0,get:function(){return i.quadIn}}),Object.defineProperty(n,"easeQuadInOut",{enumerable:!0,get:function(){return i.quadInOut}}),Object.defineProperty(n,"easeQuadOut",{enumerable:!0,get:function(){return i.quadOut}}),Object.defineProperty(n,"easeSin",{enumerable:!0,get:function(){return s.sinInOut}}),Object.defineProperty(n,"easeSinIn",{enumerable:!0,get:function(){return s.sinIn}}),Object.defineProperty(n,"easeSinInOut",{enumerable:!0,get:function(){return s.sinInOut}}),Object.defineProperty(n,"easeSinOut",{enumerable:!0,get:function(){return s.sinOut}});var r=e("./linear.js"),i=e("./quad.js"),o=e("./cubic.js"),a=e("./poly.js"),s=e("./sin.js"),l=e("./exp.js"),u=e("./circle.js"),c=e("./bounce.js"),f=e("./back.js"),d=e("./elastic.js")},{"./back.js":118,"./bounce.js":119,"./circle.js":120,"./cubic.js":121,"./elastic.js":122,"./exp.js":123,"./linear.js":125,"./poly.js":127,"./quad.js":128,"./sin.js":129}],125:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.linear=void 0;n.linear=function(e){return+e}},{}],126:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.tpmt=function(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}},{}],127:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.polyOut=n.polyInOut=n.polyIn=void 0;var r=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3);n.polyIn=r;r=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3);n.polyOut=r;r=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3);n.polyInOut=r},{}],128:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.quadIn=function(e){return e*e},n.quadInOut=function(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2},n.quadOut=function(e){return e*(2-e)}},{}],129:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sinIn=function(e){return 1==+e?1:1-Math.cos(e*i)},n.sinInOut=function(e){return(1-Math.cos(r*e))/2},n.sinOut=function(e){return Math.sin(e*i)};var r=Math.PI,i=r/2},{}],130:[function(e,t,n){"use strict";function r(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.blob()}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return fetch(e,t).then(r)}},{}],131:[function(e,t,n){"use strict";function r(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.arrayBuffer()}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return fetch(e,t).then(r)}},{}],132:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.csv=void 0,n.default=function(e,t,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var i=(0,o.dsvFormat)(e);return(0,a.default)(t,n).then(function(e){return i.parse(e,r)})},n.tsv=void 0;var o=e("d3-dsv"),a=(e=e("./text.js"))&&e.__esModule?e:{default:e};function r(r){return function(e,t,n){return 2===arguments.length&&"function"==typeof t&&(n=t,t=void 0),(0,a.default)(e,t).then(function(e){return r(e,n)})}}e=r(o.csvParse);n.csv=e;e=r(o.tsvParse);n.tsv=e},{"./text.js":136,"d3-dsv":116}],133:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(i,o){return new Promise(function(e,t){var n,r=new Image;for(n in o)r[n]=o[n];r.onerror=t,r.onload=function(){e(r)},r.src=i})}},{}],134:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"blob",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"buffer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"csv",{enumerable:!0,get:function(){return o.csv}}),Object.defineProperty(n,"dsv",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"html",{enumerable:!0,get:function(){return c.html}}),Object.defineProperty(n,"image",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"json",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"svg",{enumerable:!0,get:function(){return c.svg}}),Object.defineProperty(n,"text",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"tsv",{enumerable:!0,get:function(){return o.tsv}}),Object.defineProperty(n,"xml",{enumerable:!0,get:function(){return c.default}});var r=h(e("./blob.js")),i=h(e("./buffer.js")),o=d(e("./dsv.js")),s=h(e("./image.js")),l=h(e("./json.js")),u=h(e("./text.js")),c=d(e("./xml.js"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=f(t);if(t&&t.has(e))return t.get(e);var n,r,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=o?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=e[n]);return i.default=e,t&&t.set(e,i),i}function h(e){return e&&e.__esModule?e:{default:e}}},{"./blob.js":130,"./buffer.js":131,"./dsv.js":132,"./image.js":133,"./json.js":135,"./text.js":136,"./xml.js":137}],135:[function(e,t,n){"use strict";function r(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(204!==e.status&&205!==e.status)return e.json()}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return fetch(e,t).then(r)}},{}],136:[function(e,t,n){"use strict";function r(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return fetch(e,t).then(r)}},{}],137:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.svg=n.html=n.default=void 0;var r=(e=e("./text.js"))&&e.__esModule?e:{default:e};function i(n){return function(e,t){return(0,r.default)(e,t).then(function(e){return(new DOMParser).parseFromString(e,n)})}}e=i("application/xml");n.default=e;e=i("text/html");n.html=e;e=i("image/svg+xml");n.svg=e},{"./text.js":136}],138:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(o,a){var s,l=1;null==o&&(o=0);null==a&&(a=0);function t(){for(var e,t=s.length,n=0,r=0,i=0;i<t;++i)n+=(e=s[i]).x,r+=e.y;for(n=(n/t-o)*l,r=(r/t-a)*l,i=0;i<t;++i)(e=s[i]).x-=n,e.y-=r}return t.initialize=function(e){s=e},t.x=function(e){return arguments.length?(o=+e,t):o},t.y=function(e){return arguments.length?(a=+e,t):a},t.strength=function(e){return arguments.length?(l=+e,t):l},t}},{}],139:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(r){var o,a,d,h=1,p=1;"function"!=typeof r&&(r=(0,i.default)(null==r?1:+r));function t(){for(var e,t,s,l,u,c,f,n=o.length,r=0;r<p;++r)for(t=(0,g.quadtree)(o,m,b).visitAfter(y),e=0;e<n;++e)s=o[e],c=a[s.index],f=c*c,l=s.x+s.vx,u=s.y+s.vy,t.visit(i);function i(e,t,n,r,i){var o=e.data,a=e.r,e=c+a;if(!o)return l+e<t||r<l-e||u+e<n||i<u-e;o.index>s.index&&((i=(r=l-o.x-o.vx)*r+(n=u-o.y-o.vy)*n)<e*e&&(0===r&&(i+=(r=(0,v.default)(d))*r),0===n&&(i+=(n=(0,v.default)(d))*n),i=(e-(i=Math.sqrt(i)))/i*h,s.vx+=(r*=i)*(e=(a*=a)/(f+a)),s.vy+=(n*=i)*e,o.vx-=r*(e=1-e),o.vy-=n*e))}}function y(e){if(e.data)return e.r=a[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function n(){if(o){var e,t,n=o.length;for(a=new Array(n),e=0;e<n;++e)t=o[e],a[t.index]=+r(t,e,o)}}return t.initialize=function(e,t){o=e,d=t,n()},t.iterations=function(e){return arguments.length?(p=+e,t):p},t.strength=function(e){return arguments.length?(h=+e,t):h},t.radius=function(e){return arguments.length?(r="function"==typeof e?e:(0,i.default)(+e),n(),t):r},t};var g=e("d3-quadtree"),i=r(e("./constant.js")),v=r(e("./jiggle.js"));function r(e){return e&&e.__esModule?e:{default:e}}function m(e){return e.x+e.vx}function b(e){return e.y+e.vy}},{"./constant.js":140,"./jiggle.js":142,"d3-quadtree":239}],140:[function(e,t,n){arguments[4][80][0].apply(n,arguments)},{dup:80}],141:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"forceCenter",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"forceCollide",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"forceLink",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"forceManyBody",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"forceRadial",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"forceSimulation",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"forceX",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"forceY",{enumerable:!0,get:function(){return c.default}});var r=f(e("./center.js")),i=f(e("./collide.js")),o=f(e("./link.js")),a=f(e("./manyBody.js")),s=f(e("./radial.js")),l=f(e("./simulation.js")),u=f(e("./x.js")),c=f(e("./y.js"));function f(e){return e&&e.__esModule?e:{default:e}}},{"./center.js":138,"./collide.js":139,"./link.js":144,"./manyBody.js":145,"./radial.js":146,"./simulation.js":147,"./x.js":148,"./y.js":149}],142:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return 1e-6*(e()-.5)}},{}],143:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=1;return function(){return(e=(r*e+i)%o)/o}};var r=1664525,i=1013904223,o=4294967296},{}],144:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(u){var c,f,o,a,d,h,s=b,n=function(e){return 1/Math.min(a[e.source.index],a[e.target.index])},r=(0,g.default)(30),p=1;null==u&&(u=[]);function t(e){for(var t=0,n=u.length;t<p;++t)for(var r,i,o,a,s,l=0;l<n;++l)r=(s=u[l]).source,o=(i=s.target).x+i.vx-r.x-r.vx||(0,v.default)(h),a=i.y+i.vy-r.y-r.vy||(0,v.default)(h),o*=s=((s=Math.sqrt(o*o+a*a))-f[l])/s*e*c[l],a*=s,i.vx-=o*(s=d[l]),i.vy-=a*s,r.vx+=o*(s=1-s),r.vy+=a*s}function i(){if(o){var e,t=o.length,n=u.length,r=new Map(o.map(function(e,t){return[s(e,t,o),e]})),i=0;for(a=new Array(t);i<n;++i)(e=u[i]).index=i,"object"!==m(e.source)&&(e.source=x(r,e.source)),"object"!==m(e.target)&&(e.target=x(r,e.target)),a[e.source.index]=(a[e.source.index]||0)+1,a[e.target.index]=(a[e.target.index]||0)+1;for(i=0,d=new Array(n);i<n;++i)e=u[i],d[i]=a[e.source.index]/(a[e.source.index]+a[e.target.index]);c=new Array(n),l(),f=new Array(n),y()}}function l(){if(o)for(var e=0,t=u.length;e<t;++e)c[e]=+n(u[e],e,u)}function y(){if(o)for(var e=0,t=u.length;e<t;++e)f[e]=+r(u[e],e,u)}return t.initialize=function(e,t){o=e,h=t,i()},t.links=function(e){return arguments.length?(u=e,i(),t):u},t.id=function(e){return arguments.length?(s=e,t):s},t.iterations=function(e){return arguments.length?(p=+e,t):p},t.strength=function(e){return arguments.length?(n="function"==typeof e?e:(0,g.default)(+e),l(),t):n},t.distance=function(e){return arguments.length?(r="function"==typeof e?e:(0,g.default)(+e),y(),t):r},t};var g=r(e("./constant.js")),v=r(e("./jiggle.js"));function r(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e){return e.index}function x(e,t){e=e.get(t);if(!e)throw new Error("node not found: "+t);return e}},{"./constant.js":140,"./jiggle.js":142}],145:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var i,l,u,c,f,r=(0,y.default)(-30),d=1,h=1/0,p=.81;function t(e){var t,n=i.length,r=(0,s.quadtree)(i,v.x,v.y).visitAfter(o);for(c=e,t=0;t<n;++t)l=i[t],r.visit(a)}function n(){if(i){var e,t,n=i.length;for(f=new Array(n),e=0;e<n;++e)t=i[e],f[t.index]=+r(t,e,i)}}function o(e){var t,n,r,i,o,a=0,s=0;if(e.length){for(r=i=o=0;o<4;++o)(t=e[o])&&(n=Math.abs(t.value))&&(a+=t.value,s+=n,r+=n*t.x,i+=n*t.y);e.x=r/s,e.y=i/s}else for((t=e).x=t.data.x,t.y=t.data.y;a+=f[t.data.index],t=t.next;);e.value=a}function a(e,t,n,r){if(!e.value)return!0;var i=e.x-l.x,o=e.y-l.y,a=r-t,s=i*i+o*o;if(a*a/p<s)return s<h&&(0===i&&(s+=(i=(0,g.default)(u))*i),0===o&&(s+=(o=(0,g.default)(u))*o),s<d&&(s=Math.sqrt(d*s)),l.vx+=i*e.value*c/s,l.vy+=o*e.value*c/s),!0;if(!(e.length||h<=s))for(e.data===l&&!e.next||(0===i&&(s+=(i=(0,g.default)(u))*i),0===o&&(s+=(o=(0,g.default)(u))*o),s<d&&(s=Math.sqrt(d*s)));e.data!==l&&(a=f[e.data.index]*c/s,l.vx+=i*a,l.vy+=o*a),e=e.next;);}return t.initialize=function(e,t){i=e,u=t,n()},t.strength=function(e){return arguments.length?(r="function"==typeof e?e:(0,y.default)(+e),n(),t):r},t.distanceMin=function(e){return arguments.length?(d=e*e,t):Math.sqrt(d)},t.distanceMax=function(e){return arguments.length?(h=e*e,t):Math.sqrt(h)},t.theta=function(e){return arguments.length?(p=e*e,t):Math.sqrt(p)},t};var s=e("d3-quadtree"),y=r(e("./constant.js")),g=r(e("./jiggle.js")),v=e("./simulation.js");function r(e){return e&&e.__esModule?e:{default:e}}},{"./constant.js":140,"./jiggle.js":142,"./simulation.js":147,"d3-quadtree":239}],146:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(n,s,l){var u,c,f,r=(0,o.default)(.1);"function"!=typeof n&&(n=(0,o.default)(+n));null==s&&(s=0);null==l&&(l=0);function t(e){for(var t=0,n=u.length;t<n;++t){var r=u[t],i=r.x-s||1e-6,o=r.y-l||1e-6,a=Math.sqrt(i*i+o*o),a=(f[t]-a)*c[t]*e/a;r.vx+=i*a,r.vy+=o*a}}function i(){if(u){var e,t=u.length;for(c=new Array(t),f=new Array(t),e=0;e<t;++e)f[e]=+n(u[e],e,u),c[e]=isNaN(f[e])?0:+r(u[e],e,u)}}return t.initialize=function(e){u=e,i()},t.strength=function(e){return arguments.length?(r="function"==typeof e?e:(0,o.default)(+e),i(),t):r},t.radius=function(e){return arguments.length?(n="function"==typeof e?e:(0,o.default)(+e),i(),t):n},t.x=function(e){return arguments.length?(s=+e,t):s},t.y=function(e){return arguments.length?(l=+e,t):l},t};var o=(e=e("./constant.js"))&&e.__esModule?e:{default:e}},{"./constant.js":140}],147:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(l){var o,a=1,t=.001,s=1-Math.pow(t,1/300),u=0,c=.6,f=new Map,e=(0,g.timer)(i),n=(0,y.dispatch)("tick","end"),r=(0,v.default)();null==l&&(l=[]);function i(){d(),n.call("tick",o),a<t&&(e.stop(),n.call("end",o))}function d(e){var t,n,r=l.length;void 0===e&&(e=1);for(var i=0;i<e;++i)for(a+=(u-a)*s,f.forEach(function(e){e(a)}),t=0;t<r;++t)null==(n=l[t]).fx?n.x+=n.vx*=c:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=c:(n.y=n.fy,n.vy=0);return o}function h(){for(var e,t,n,r=0,i=l.length;r<i;++r)(n=l[r]).index=r,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),(isNaN(n.x)||isNaN(n.y))&&(e=m*Math.sqrt(.5+r),t=r*b,n.x=e*Math.cos(t),n.y=e*Math.sin(t)),(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}function p(e){return e.initialize&&e.initialize(l,r),e}return h(),o={tick:d,restart:function(){return e.restart(i),o},stop:function(){return e.stop(),o},nodes:function(e){return arguments.length?(l=e,h(),f.forEach(p),o):l},alpha:function(e){return arguments.length?(a=+e,o):a},alphaMin:function(e){return arguments.length?(t=+e,o):t},alphaDecay:function(e){return arguments.length?(s=+e,o):+s},alphaTarget:function(e){return arguments.length?(u=+e,o):u},velocityDecay:function(e){return arguments.length?(c=1-e,o):1-c},randomSource:function(e){return arguments.length?(r=e,f.forEach(p),o):r},force:function(e,t){return 1<arguments.length?(null==t?f.delete(e):f.set(e,p(t)),o):f.get(e)},find:function(e,t,n){var r,i,o,a=0,s=l.length;for(null==n?n=1/0:n*=n,a=0;a<s;++a)(r=(r=e-(i=l[a]).x)*r+(r=t-i.y)*r)<n&&(o=i,n=r);return o},on:function(e,t){return 1<arguments.length?(n.on(e,t),o):n.on(e)}}},n.x=function(e){return e.x},n.y=function(e){return e.y};var y=e("d3-dispatch"),g=e("d3-timer"),v=(e=e("./lcg.js"))&&e.__esModule?e:{default:e};var m=10,b=Math.PI*(3-Math.sqrt(5))},{"./lcg.js":143,"d3-dispatch":106,"d3-timer":414}],148:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(n){var i,o,a,r=(0,l.default)(.1);"function"!=typeof n&&(n=(0,l.default)(null==n?0:+n));function t(e){for(var t,n=0,r=i.length;n<r;++n)(t=i[n]).vx+=(a[n]-t.x)*o[n]*e}function s(){if(i){var e,t=i.length;for(o=new Array(t),a=new Array(t),e=0;e<t;++e)o[e]=isNaN(a[e]=+n(i[e],e,i))?0:+r(i[e],e,i)}}return t.initialize=function(e){i=e,s()},t.strength=function(e){return arguments.length?(r="function"==typeof e?e:(0,l.default)(+e),s(),t):r},t.x=function(e){return arguments.length?(n="function"==typeof e?e:(0,l.default)(+e),s(),t):n},t};var l=(e=e("./constant.js"))&&e.__esModule?e:{default:e}},{"./constant.js":140}],149:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(n){var i,o,a,r=(0,l.default)(.1);"function"!=typeof n&&(n=(0,l.default)(null==n?0:+n));function t(e){for(var t,n=0,r=i.length;n<r;++n)(t=i[n]).vy+=(a[n]-t.y)*o[n]*e}function s(){if(i){var e,t=i.length;for(o=new Array(t),a=new Array(t),e=0;e<t;++e)o[e]=isNaN(a[e]=+n(i[e],e,i))?0:+r(i[e],e,i)}}return t.initialize=function(e){i=e,s()},t.strength=function(e){return arguments.length?(r="function"==typeof e?e:(0,l.default)(+e),s(),t):r},t.y=function(e){return arguments.length?(n="function"==typeof e?e:(0,l.default)(+e),s(),t):n},t};var l=(e=e("./constant.js"))&&e.__esModule?e:{default:e}},{"./constant.js":140}],150:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=s,n.formatPrefix=n.format=void 0;var r,i,o,a=(e=e("./locale.js"))&&e.__esModule?e:{default:e};function s(e){return r=(0,a.default)(e),n.format=i=r.format,n.formatPrefix=o=r.formatPrefix,r}n.format=i,n.formatPrefix=o,s({thousands:",",grouping:[3],currency:["$",""]})},{"./locale.js":162}],151:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return(e=(0,r.formatDecimalParts)(Math.abs(e)))?e[1]:NaN};var r=e("./formatDecimal.js")},{"./formatDecimal.js":152}],152:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return 1e21<=Math.abs(e=Math.round(e))?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},n.formatDecimalParts=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,t=e.slice(0,n);return[1<t.length?t[0]+t.slice(2):t,+e.slice(n+1)]}},{}],153:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(s,l){return function(e,t){for(var n=e.length,r=[],i=0,o=s[0],a=0;0<n&&0<o&&(t<a+o+1&&(o=Math.max(1,t-a)),r.push(e.substring(n-=o,n+o)),!((a+=o+1)>t));)o=s[i=(i+1)%s.length];return r.reverse().join(l)}}},{}],154:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}},{}],155:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e,t){var n=(0,s.formatDecimalParts)(e,t);if(!n)return e+"";var r=n[0],i=n[1],n=i-(o.prefixExponent=a=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,i=r.length;return n===i?r:i<n?r+new Array(n-i+1).join("0"):0<n?r.slice(0,n)+"."+r.slice(n):"0."+new Array(1-n).join("0")+(0,s.formatDecimalParts)(e,Math.max(0,t+n-1))[0]},o.prefixExponent=void 0;var a,s=e("./formatDecimal.js");o.prefixExponent=a},{"./formatDecimal.js":152}],156:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){t=(0,r.formatDecimalParts)(e,t);if(!t)return e+"";e=t[0],t=t[1];return t<0?"0."+new Array(-t).join("0")+e:e.length>t+1?e.slice(0,t+1)+"."+e.slice(t+1):e+new Array(t-e.length+2).join("0")};var r=e("./formatDecimal.js")},{"./formatDecimal.js":152}],157:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FormatSpecifier=o,n.default=i;var r=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function i(e){if(!(t=r.exec(e)))throw new Error("invalid format: "+e);var t;return new o({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function o(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}i.prototype=o.prototype,o.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},{}],158:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;0<i&&(i=0)}return 0<i?e.slice(0,i)+e.slice(t+1):e}},{}],159:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("./formatDecimal.js")),i=a(e("./formatPrefixAuto.js")),o=a(e("./formatRounded.js"));function a(e){return e&&e.__esModule?e:{default:e}}i={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:r.default,e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return(0,o.default)(100*e,t)},r:o.default,s:i.default,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};n.default=i},{"./formatDecimal.js":152,"./formatPrefixAuto.js":155,"./formatRounded.js":156}],160:[function(e,t,n){arguments[4][71][0].apply(n,arguments)},{dup:71}],161:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"FormatSpecifier",{enumerable:!0,get:function(){return o.FormatSpecifier}}),Object.defineProperty(n,"format",{enumerable:!0,get:function(){return r.format}}),Object.defineProperty(n,"formatDefaultLocale",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"formatLocale",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"formatPrefix",{enumerable:!0,get:function(){return r.formatPrefix}}),Object.defineProperty(n,"formatSpecifier",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"precisionFixed",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"precisionPrefix",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"precisionRound",{enumerable:!0,get:function(){return u.default}});var r=d(e("./defaultLocale.js")),i=c(e("./locale.js")),o=d(e("./formatSpecifier.js")),s=c(e("./precisionFixed.js")),l=c(e("./precisionPrefix.js")),u=c(e("./precisionRound.js"));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=f(t);if(t&&t.has(e))return t.get(e);var n,r,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=o?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=e[n]);return i.default=e,t&&t.set(e,i),i}},{"./defaultLocale.js":150,"./formatSpecifier.js":157,"./locale.js":162,"./precisionFixed.js":163,"./precisionPrefix.js":164,"./precisionRound.js":165}],162:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var w=void 0===e.grouping||void 0===e.thousands?c.default:(0,l.default)(f.call(e.grouping,Number),e.thousands+""),r=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",M=void 0===e.decimal?".":e.decimal+"",j=void 0===e.numerals?c.default:(0,u.default)(f.call(e.numerals,String)),o=void 0===e.percent?"%":e.percent+"",k=void 0===e.minus?"−":e.minus+"",O=void 0===e.nan?"NaN":e.nan+"";function a(e){var u=(e=(0,A.default)(e)).fill,c=e.align,f=e.sign,t=e.symbol,d=e.zero,h=e.width,p=e.comma,y=e.precision,g=e.trim,v=e.type;"n"===v?(p=!0,v="g"):P.default[v]||(void 0===y&&(y=12),g=!0,v="g"),(d||"0"===u&&"="===c)&&(d=!0,u="0",c="=");var m="$"===t?r:"#"===t&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===t?i:/[%p]/.test(v)?o:"",x=P.default[v],_=/[defgprs%]/.test(v);function n(e){var t,n,r,i=m,o=b;if("c"===v)o=x(e)+o,e="";else{var a=(e=+e)<0||1/e<0;if(e=isNaN(e)?O:x(Math.abs(e),y),g&&(e=(0,T.default)(e)),i=((a=a&&0==+e&&"+"!==f?!1:a)?"("===f?f:k:"-"===f||"("===f?"":f)+i,o=("s"===v?E[8+S.prefixExponent/3]:"")+o+(a&&"("===f?")":""),_)for(t=-1,n=e.length;++t<n;)if((r=e.charCodeAt(t))<48||57<r){o=(46===r?M+e.slice(t+1):e.slice(t))+o,e=e.slice(0,t);break}}p&&!d&&(e=w(e,1/0));var s=i.length+e.length+o.length,l=s<h?new Array(h-s+1).join(u):"";switch(p&&d&&(e=w(l+e,l.length?h-o.length:1/0),l=""),c){case"<":e=i+e+o+l;break;case"=":e=i+l+e+o;break;case"^":e=l.slice(0,s=l.length>>1)+i+e+o+l.slice(s);break;default:e=l+i+e+o}return j(e)}return y=void 0===y?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),n.toString=function(){return e+""},n}return{format:a,formatPrefix:function(e,t){var n=a(((e=(0,A.default)(e)).type="f",e)),t=3*Math.max(-8,Math.min(8,Math.floor((0,s.default)(t)/3))),r=Math.pow(10,-t),i=E[8+t/3];return function(e){return n(r*e)+i}}}};var s=r(e("./exponent.js")),l=r(e("./formatGroup.js")),u=r(e("./formatNumerals.js")),A=r(e("./formatSpecifier.js")),T=r(e("./formatTrim.js")),P=r(e("./formatTypes.js")),S=e("./formatPrefixAuto.js"),c=r(e("./identity.js"));function r(e){return e&&e.__esModule?e:{default:e}}var f=Array.prototype.map,E=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"]},{"./exponent.js":151,"./formatGroup.js":153,"./formatNumerals.js":154,"./formatPrefixAuto.js":155,"./formatSpecifier.js":157,"./formatTrim.js":158,"./formatTypes.js":159,"./identity.js":160}],163:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return Math.max(0,-(0,r.default)(Math.abs(e)))};var r=(e=e("./exponent.js"))&&e.__esModule?e:{default:e}},{"./exponent.js":151}],164:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,r.default)(t)/3)))-(0,r.default)(Math.abs(e)))};var r=(e=e("./exponent.js"))&&e.__esModule?e:{default:e}},{"./exponent.js":151}],165:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,(0,r.default)(t)-(0,r.default)(e))+1};var r=(e=e("./exponent.js"))&&e.__esModule?e:{default:e}},{"./exponent.js":151}],166:[function(e,t,n){"use strict";function r(e){if("function"!=typeof e)throw new Error;return e}Object.defineProperty(n,"__esModule",{value:!0}),n.optional=function(e){return null==e?null:r(e)},n.required=r},{}],167:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return"object"===r(e)&&"length"in e?e:Array.from(e)},n.shuffle=function(e){var t,n,r=e.length;for(;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}},{}],168:[function(e,t,n){"use strict";function r(e,t){return e.parent===t.parent?1:2}function f(e,t){return e+t.x}function d(e,t){return Math.max(e,t.y)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var s=r,l=1,u=1,c=!1;function t(t){var r,i=0;t.eachAfter(function(e){var t,n=e.children;n?(e.x=(t=n).reduce(f,0)/t.length,e.y=1+n.reduce(d,0)):(e.x=r?i+=s(e,r):0,e.y=0,r=e)});var e=function(e){var t;for(;t=e.children;)e=t[0];return e}(t),n=function(e){var t;for(;t=e.children;)e=t[t.length-1];return e}(t),o=e.x-s(e,n)/2,a=n.x+s(n,e)/2;return t.eachAfter(c?function(e){e.x=(e.x-t.x)*l,e.y=(t.y-e.y)*u}:function(e){e.x=(e.x-o)/(a-o)*l,e.y=(1-(t.y?e.y/t.y:1))*u})}return t.separation=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(c=!1,l=+e[0],u=+e[1],t):c?null:[l,u]},t.nodeSize=function(e){return arguments.length?(c=!0,l=+e[0],u=+e[1],t):c?[l,u]:null},t}},{}],169:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.constantZero=function(){return 0},n.default=function(e){return function(){return e}}},{}],170:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=this,t=[e];for(;e=e.parent;)t.push(e);return t}},{}],171:[function(e,t,n){"use strict";function r(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;0<=--r;)t+=n[r].value;else t=1;e.value=t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return this.eachAfter(r)}},{}],172:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return Array.from(this)}},{}],173:[function(e,t,n){"use strict";function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n,r=-1,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(this);try{for(i.s();!(n=i.n()).done;){var o=n.value;e.call(t,o,++r,this)}}catch(e){i.e(e)}finally{i.f()}return this}},{}],174:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n,r,i,o=this,a=[o],s=[],l=-1;for(;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)e.call(t,o,++l,this);return this}},{}],175:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n,r,i,o=[n=this],a=-1;for(;n=o.pop();)if(e.call(t,n,++a,this),r=n.children)for(i=r.length-1;0<=i;--i)o.push(r[i]);return this}},{}],176:[function(e,t,n){"use strict";function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n,r=-1,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(this);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(e.call(t,o,++r,this))return o}}catch(e){i.e(e)}finally{i.f()}}},{}],177:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Node=x,n.computeHeight=b,n.default=y;var r=p(e("./count.js")),i=p(e("./each.js")),o=p(e("./eachBefore.js")),a=p(e("./eachAfter.js")),s=p(e("./find.js")),l=p(e("./sum.js")),u=p(e("./sort.js")),c=p(e("./path.js")),f=p(e("./ancestors.js")),d=p(e("./descendants.js")),h=p(e("./leaves.js")),n=p(e("./links.js")),e=p(e("./iterator.js"));function p(e){return e&&e.__esModule?e:{default:e}}function y(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=v)):void 0===t&&(t=g);for(var n,r,i,o,a,e=new x(e),s=[e];n=s.pop();)if((i=t(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;0<=o;--o)s.push(r=i[o]=new x(i[o])),r.parent=n,r.depth=n.depth+1;return e.eachBefore(b)}function g(e){return e.children}function v(e){return Array.isArray(e)?e[1]:null}function m(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function b(e){for(var t=0;e.height=t,(e=e.parent)&&e.height<++t;);}function x(e){this.data=e,this.depth=this.height=0,this.parent=null}x.prototype=y.prototype=(h={constructor:x,count:r.default,each:i.default,eachAfter:a.default,eachBefore:o.default,find:s.default,sum:l.default,sort:u.default,path:c.default,ancestors:f.default,descendants:d.default,leaves:h.default,links:n.default,copy:function(){return y(this).eachBefore(m)}},n=Symbol.iterator,e=e.default,n in h?Object.defineProperty(h,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):h[n]=e,h)},{"./ancestors.js":170,"./count.js":171,"./descendants.js":172,"./each.js":173,"./eachAfter.js":174,"./eachBefore.js":175,"./find.js":176,"./iterator.js":178,"./leaves.js":179,"./links.js":180,"./path.js":181,"./sort.js":182,"./sum.js":183}],178:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var s=regeneratorRuntime.mark(r);function r(){var t,n,r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[t=this];case 1:n=r.reverse(),r=[];case 2:if(t=n.pop())return e.next=5,t;e.next=8;break;case 5:if(i=t.children)for(o=0,a=i.length;o<a;++o)r.push(i[o]);e.next=2;break;case 8:if(r.length){e.next=1;break}case 9:case"end":return e.stop()}},s,this)}},{}],179:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}},{}],180:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var t=this,n=[];return t.each(function(e){e!==t&&n.push({source:e.parent,target:e})}),n}},{}],181:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];for(;t!==n;)t=t.parent,r.push(t);var i=r.length;for(;e!==n;)r.splice(i,0,e),e=e.parent;return r}},{}],182:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}},{}],183:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(i){return this.eachAfter(function(e){for(var t=+i(e.data)||0,n=e.children,r=n&&n.length;0<=--r;)t+=n[r].value;e.value=t})}},{}],184:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Node",{enumerable:!0,get:function(){return i.Node}}),Object.defineProperty(n,"cluster",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"hierarchy",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"pack",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"packEnclose",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"packSiblings",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"partition",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"stratify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"tree",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(n,"treemap",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(n,"treemapBinary",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(n,"treemapDice",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(n,"treemapResquarify",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(n,"treemapSlice",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(n,"treemapSliceDice",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(n,"treemapSquarify",{enumerable:!0,get:function(){return v.default}});var r=x(e("./cluster.js")),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=b(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./hierarchy/index.js")),o=x(e("./pack/index.js")),s=x(e("./pack/siblings.js")),l=x(e("./pack/enclose.js")),u=x(e("./partition.js")),c=x(e("./stratify.js")),f=x(e("./tree.js")),d=x(e("./treemap/index.js")),h=x(e("./treemap/binary.js")),p=x(e("./treemap/dice.js")),y=x(e("./treemap/slice.js")),g=x(e("./treemap/sliceDice.js")),v=x(e("./treemap/squarify.js")),m=x(e("./treemap/resquarify.js"));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function x(e){return e&&e.__esModule?e:{default:e}}},{"./cluster.js":168,"./hierarchy/index.js":177,"./pack/enclose.js":185,"./pack/index.js":186,"./pack/siblings.js":187,"./partition.js":188,"./stratify.js":189,"./tree.js":190,"./treemap/binary.js":191,"./treemap/dice.js":192,"./treemap/index.js":193,"./treemap/resquarify.js":194,"./treemap/slice.js":196,"./treemap/sliceDice.js":197,"./treemap/squarify.js":198}],185:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t,n,r=0,i=(e=(0,a.shuffle)(Array.from(e))).length,o=[];for(;r<i;)t=e[r],n&&l(n,t)?++r:(n=function(e){switch(e.length){case 1:return function(e){return{x:e.x,y:e.y,r:e.r}}(e[0]);case 2:return c(e[0],e[1]);case 3:return f(e[0],e[1],e[2])}}(o=function(e,t){var n,r;if(u(t,e))return[t];for(n=0;n<e.length;++n)if(s(t,e[n])&&u(c(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(s(c(e[n],e[r]),t)&&s(c(e[n],t),e[r])&&s(c(e[r],t),e[n])&&u(f(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}(o,t)),r=0);return n};var a=e("../array.js");function s(e,t){var n=e.r-t.r,r=t.x-e.x,e=t.y-e.y;return n<0||n*n<r*r+e*e}function l(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),r=t.x-e.x,e=t.y-e.y;return 0<n&&r*r+e*e<n*n}function u(e,t){for(var n=0;n<t.length;++n)if(!l(e,t[n]))return;return 1}function c(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,l=o-n,u=a-r,e=s-i,t=Math.sqrt(l*l+u*u);return{x:(n+o+l/t*e)/2,y:(r+a+u/t*e)/2,r:(t+i+s)/2}}function f(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,l=t.r,u=n.x,c=n.y,f=n.r,d=r-a,h=r-u,p=i-s,y=i-c,e=l-o,t=f-o,n=r*r+i*i-o*o,l=n-a*a-s*s+l*l,u=n-u*u-c*c+f*f,c=h*p-d*y,f=(p*u-y*l)/(2*c)-r,p=(y*e-p*t)/c,u=(h*l-d*u)/(2*c)-i,h=(d*t-h*e)/c,e=p*p+h*h-1,c=2*(o+f*p+u*h),o=f*f+u*u-o*o,c=-(e?(c+Math.sqrt(c*c-4*e*o))/(2*e):o/c);return{x:r+f+p*c,y:i+u+h*c,r:c}}},{"../array.js":167}],186:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var t=null,n=1,r=1,i=u.constantZero;function o(e){return e.x=n/2,e.y=r/2,t?e.eachBefore(d(t)).eachAfter(h(i,.5)).eachBefore(p(1)):e.eachBefore(d(f)).eachAfter(h(u.constantZero,1)).eachAfter(h(i,e.r/Math.min(n,r))).eachBefore(p(Math.min(n,r)/(2*e.r))),e}return o.radius=function(e){return arguments.length?(t=(0,s.optional)(e),o):t},o.size=function(e){return arguments.length?(n=+e[0],r=+e[1],o):[n,r]},o.padding=function(e){return arguments.length?(i="function"==typeof e?e:(0,u.default)(+e),o):i},o};var l=e("./siblings.js"),s=e("../accessors.js"),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=c(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("../constant.js"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(e){return Math.sqrt(e.value)}function d(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function h(a,s){return function(e){if(t=e.children){var t,n,r,i=t.length,o=a(e)*s||0;if(o)for(n=0;n<i;++n)t[n].r+=o;if(r=(0,l.packEnclose)(t),o)for(n=0;n<i;++n)t[n].r-=o;e.r=r+o}}}function p(n){return function(e){var t=e.parent;e.r*=n,t&&(e.x=t.x+n*e.x,e.y=t.y+n*e.y)}}},{"../accessors.js":166,"../constant.js":169,"./siblings.js":187}],187:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return i(e),e},n.packEnclose=i;var d=r(e("../array.js")),h=r(e("./enclose.js"));function r(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){var r,i,o,a,s=e.x-t.x,l=e.y-t.y,u=s*s+l*l;u?(i=t.r+n.r,a=e.r+n.r,(a*=a)<(i*=i)?(r=(u+a-i)/(2*u),o=Math.sqrt(Math.max(0,a/u-r*r)),n.x=e.x-r*s-o*l,n.y=e.y-r*l+o*s):(r=(u+i-a)/(2*u),o=Math.sqrt(Math.max(0,i/u-r*r)),n.x=t.x+r*s-o*l,n.y=t.y+r*l+o*s)):(n.x=t.x+n.r,n.y=t.y)}function y(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,e=t.y-e.y;return 0<n&&r*r+e*e<n*n}function g(e){var t=e._,n=e.next._,r=t.r+n.r,e=(t.x*n.r+n.x*t.r)/r,r=(t.y*n.r+n.y*t.r)/r;return e*e+r*r}function v(e){this._=e,this.next=null,this.previous=null}function i(e){if(!(r=(e=(0,d.default)(e)).length))return 0;var t,n,r,i,o,a,s,l,u,c,f=e[0];if(f.x=0,f.y=0,!(1<r))return f.r;if(t=e[1],f.x=-t.r,t.x=f.r,t.y=0,!(2<r))return f.r+t.r;p(t,f,n=e[2]),f=new v(f),t=new v(t),n=new v(n),((f.next=n.previous=t).next=f.previous=n).next=t.previous=f;e:for(a=3;a<r;++a){p(f._,t._,n=e[a]),n=new v(n),s=t.next,l=f.previous,u=t._.r,c=f._.r;do{if(u<=c){if(y(s._,n._)){t=s,(f.next=t).previous=f,--a;continue e}u+=s._.r,s=s.next}else{if(y(l._,n._)){((f=l).next=t).previous=f,--a;continue e}c+=l._.r,l=l.previous}}while(s!==l.next);for(n.previous=f,n.next=t,f.next=t.previous=t=n,i=g(f);(n=n.next)!==t;)(o=g(n))<i&&(f=n,i=o);t=f.next}for(f=[t._],n=t;(n=n.next)!==t;)f.push(n._);for(n=(0,h.default)(f),a=0;a<r;++a)(f=e[a]).x-=n.x,f.y-=n.y;return n.r}},{"../array.js":167,"./enclose.js":185}],188:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var n=1,r=1,s=0,i=!1;function t(e){var o,a,t=e.height+1;return e.x0=e.y0=s,e.x1=n,e.y1=r/t,e.eachBefore((o=r,a=t,function(e){e.children&&(0,u.default)(e,e.x0,o*(e.depth+1)/a,e.x1,o*(e.depth+2)/a);var t=e.x0,n=e.y0,r=e.x1-s,i=e.y1-s;r<t&&(t=r=(t+r)/2),i<n&&(n=i=(n+i)/2),e.x0=t,e.y0=n,e.x1=r,e.y1=i})),i&&e.eachBefore(l.default),e}return t.round=function(e){return arguments.length?(i=!!e,t):i},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(s=+e,t):s},t};var l=r(e("./treemap/round.js")),u=r(e("./treemap/dice.js"));function r(e){return e&&e.__esModule?e:{default:e}}},{"./treemap/dice.js":192,"./treemap/round.js":195}],189:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var x,_=i,w=o;function t(n){var t,e,r,i,o,a,s,l,u=Array.from(n),c=_,f=w,d=new Map;if(null!=x){var h,p=u.map(function(e,t){return function(e){var t=(e="".concat(e)).length;P(e,t-1)&&!P(e,t-2)&&(e=e.slice(0,-1));return"/"===e[0]?e:"/".concat(e)}(x(e,t,n))}),y=p.map(T),g=new Set(p).add(""),v=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(y);try{for(v.s();!(h=v.n()).done;){var m=h.value;g.has(m)||(g.add(m),p.push(m),y.push(T(m)),u.push(A))}}catch(e){v.e(e)}finally{v.f()}c=function(e,t){return p[t]},f=function(e,t){return y[t]}}for(r=0,t=u.length;r<t;++r)e=u[r],a=u[r]=new M.Node(e),null!=(s=c(e,r,n))&&(s+="")&&(l=a.id=s,d.set(l,d.has(l)?O:a)),null!=(s=f(e,r,n))&&(s+="")&&(a.parent=s);for(r=0;r<t;++r)if(s=(a=u[r]).parent){if(!(o=d.get(s)))throw new Error("missing: "+s);if(o===O)throw new Error("ambiguous: "+s);o.children?o.children.push(a):o.children=[a],a.parent=o}else{if(i)throw new Error("multiple roots");i=a}if(!i)throw new Error("no root");if(null!=x){for(;i.data===A&&1===i.children.length;)i=i.children[0],--t;for(var b=u.length-1;0<=b&&(a=u[b]).data===A;--b)a.data=null}if(i.parent=k,i.eachBefore(function(e){e.depth=e.parent.depth+1,--t}).eachBefore(M.computeHeight),i.parent=null,0<t)throw new Error("cycle");return i}return t.id=function(e){return arguments.length?(_=(0,r.optional)(e),t):_},t.parentId=function(e){return arguments.length?(w=(0,r.optional)(e),t):w},t.path=function(e){return arguments.length?(x=(0,r.optional)(e),t):x},t};var r=e("./accessors.js"),M=e("./hierarchy/index.js");function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k={depth:-1},O={},A={};function i(e){return e.id}function o(e){return e.parentId}function T(e){var t=e.length;if(t<2)return"";for(;1<--t&&!P(e,t););return e.slice(0,t)}function P(e,t){if("/"===e[t]){for(var n=0;0<t&&"\\"===e[--t];)++n;if(0==(1&n))return 1}}},{"./accessors.js":166,"./hierarchy/index.js":177}],190:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var d=r,l=1,u=1,c=null;function t(e){var t,n,r,i,o,a,s=function(e){var t,n,r,i,o,e=new v(e,0),a=[e];for(;t=a.pop();)if(r=t._.children)for(t.children=new Array(o=r.length),i=o-1;0<=i;--i)a.push(n=t.children[i]=new v(r[i],i)),n.parent=t;return(e.parent=new v(null,0)).children=[e],e}(e);return s.eachAfter(f),s.parent.m=-s.z,s.eachBefore(h),c?e.eachBefore(p):((r=n=t=e).eachBefore(function(e){e.x<t.x&&(t=e),e.x>n.x&&(n=e),e.depth>r.depth&&(r=e)}),s=t===n?1:d(t,n)/2,i=s-t.x,o=l/(n.x+s+i),a=u/(r.depth||1),e.eachBefore(function(e){e.x=(e.x+i)*o,e.y=e.depth*a})),e}function f(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;t?(function(e){var t,n=0,r=0,i=e.children,o=i.length;for(;0<=--o;)(t=i[o]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e),t=(t[0].z+t[t.length-1].z)/2,r?(e.z=r.z+d(e._,r._),e.m=e.z-t):e.z=t):r&&(e.z=r.z+d(e._,r._)),e.parent.A=function(e,t,n){if(t){for(var r,i=e,o=e,a=t,s=i.parent.children[0],l=i.m,u=o.m,c=a.m,f=s.m;a=g(a),i=y(i),a&&i;)s=y(s),(o=g(o)).a=e,0<(r=a.z+c-i.z-l+d(a._,i._))&&(function(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}(function(e,t,n){return e.a.parent===t.parent?e.a:n}(a,e,n),e,r),l+=r,u+=r),c+=a.m,l+=i.m,f+=s.m,u+=o.m;a&&!g(o)&&(o.t=a,o.m+=c-u),i&&!y(s)&&(s.t=i,s.m+=l-f,n=e)}return n}(e,r,e.parent.A||n[0])}function h(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function p(e){e.x*=l,e.y=e.depth*u}return t.separation=function(e){return arguments.length?(d=e,t):d},t.size=function(e){return arguments.length?(c=!1,l=+e[0],u=+e[1],t):c?null:[l,u]},t.nodeSize=function(e){return arguments.length?(c=!0,l=+e[0],u=+e[1],t):c?[l,u]:null},t};e=e("./hierarchy/index.js");function r(e,t){return e.parent===t.parent?1:2}function y(e){var t=e.children;return t?t[0]:e.t}function g(e){var t=e.children;return t?t[t.length-1]:e.t}function v(e,t){this._=e,this.parent=null,this.children=null,this.A=null,(this.a=this).z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}v.prototype=Object.create(e.Node.prototype)},{"./hierarchy/index.js":177}],191:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r,i){var o,a,y=e.children,s=y.length,g=new Array(s+1);for(g[0]=a=o=0;o<s;++o)g[o+1]=a+=y[o].value;!function e(t,n,r,i,o,a,s){if(n-1<=t)return(p=y[t]).x0=i,p.y0=o,p.x1=a,void(p.y1=s);for(var l=g[t],u=r/2+l,c=t+1,f=n-1;c<f;){var d=c+f>>>1;g[d]<u?c=1+d:f=d}u-g[c-1]<g[c]-u&&t+1<c&&--c;var h=g[c]-l,p=r-h;s-o<a-i?(e(t,c,h,i,o,l=r?(i*p+a*h)/r:a,s),e(c,n,p,l,o,a,s)):(e(t,c,h,i,o,a,r=r?(o*p+s*h)/r:s),e(c,n,p,i,r,a,s))}(0,s,e.value,t,n,r,i)}},{}],192:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r,i){var o,a=e.children,s=-1,l=a.length,u=e.value&&(r-t)/e.value;for(;++s<l;)(o=a[s]).y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*u}},{}],193:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var a=p.default,t=!1,n=1,r=1,s=[0],l=g.constantZero,u=g.constantZero,c=g.constantZero,f=g.constantZero,d=g.constantZero;function i(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(o),s=[0],t&&e.eachBefore(h.default),e}function o(e){var t=s[e.depth],n=e.x0+t,r=e.y0+t,i=e.x1-t,o=e.y1-t;i<n&&(n=i=(n+i)/2),o<r&&(r=o=(r+o)/2),e.x0=n,e.y0=r,e.x1=i,e.y1=o,e.children&&(t=s[e.depth+1]=l(e)/2,n+=d(e)-t,r+=u(e)-t,(i-=c(e)-t)<n&&(n=i=(n+i)/2),(o-=f(e)-t)<r&&(r=o=(r+o)/2),a(e,n,r,i,o))}return i.round=function(e){return arguments.length?(t=!!e,i):t},i.size=function(e){return arguments.length?(n=+e[0],r=+e[1],i):[n,r]},i.tile=function(e){return arguments.length?(a=(0,y.required)(e),i):a},i.padding=function(e){return arguments.length?i.paddingInner(e).paddingOuter(e):i.paddingInner()},i.paddingInner=function(e){return arguments.length?(l="function"==typeof e?e:(0,g.default)(+e),i):l},i.paddingOuter=function(e){return arguments.length?i.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):i.paddingTop()},i.paddingTop=function(e){return arguments.length?(u="function"==typeof e?e:(0,g.default)(+e),i):u},i.paddingRight=function(e){return arguments.length?(c="function"==typeof e?e:(0,g.default)(+e),i):c},i.paddingBottom=function(e){return arguments.length?(f="function"==typeof e?e:(0,g.default)(+e),i):f},i.paddingLeft=function(e){return arguments.length?(d="function"==typeof e?e:(0,g.default)(+e),i):d},i};var h=r(e("./round.js")),p=r(e("./squarify.js")),y=e("../accessors.js"),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("../constant.js"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function r(e){return e&&e.__esModule?e:{default:e}}},{"../accessors.js":166,"../constant.js":169,"./round.js":195,"./squarify.js":198}],194:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var p=r(e("./dice.js")),y=r(e("./slice.js")),g=e("./squarify.js");function r(e){return e&&e.__esModule?e:{default:e}}e=function t(h){function e(e,t,n,r,i){if((o=e._squarify)&&o.ratio===h)for(var o,a,s,l,u,c=-1,f=o.length,d=e.value;++c<f;){for(s=(a=o[c]).children,l=a.value=0,u=s.length;l<u;++l)a.value+=s[l].value;a.dice?(0,p.default)(a,t,n,r,d?n+=(i-n)*a.value/d:i):(0,y.default)(a,t,n,d?t+=(r-t)*a.value/d:r,i),d-=a.value}else e._squarify=o=(0,g.squarifyRatio)(h,e,t,n,r,i),o.ratio=h}return e.ratio=function(e){return t(1<(e=+e)?e:1)},e}(g.phi);n.default=e},{"./dice.js":192,"./slice.js":196,"./squarify.js":198}],195:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}},{}],196:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r,i){var o,a=e.children,s=-1,l=a.length,u=e.value&&(i-n)/e.value;for(;++s<l;)(o=a[s]).x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*u}},{}],197:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r,i){(1&e.depth?a:o).default(e,t,n,r,i)};var o=r(e("./dice.js")),a=r(e("./slice.js"));function r(e){return e&&e.__esModule?e:{default:e}}},{"./dice.js":192,"./slice.js":196}],198:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.phi=n.default=void 0,n.squarifyRatio=a;var M=r(e("./dice.js")),j=r(e("./slice.js"));function r(e){return e&&e.__esModule?e:{default:e}}e=(1+Math.sqrt(5))/2;function a(e,t,n,r,i,o){for(var a,s,l,u,c,f,d,h,p,y,g,v=[],m=t.children,b=0,x=0,_=m.length,w=t.value;b<_;){for(l=i-n,u=o-r;!(c=m[x++].value)&&x<_;);for(g=(f=d=c)*c*(y=Math.max(u/l,l/u)/(w*e)),p=Math.max(d/g,g/f);x<_;++x){if(c+=s=m[x].value,s<f&&(f=s),d<s&&(d=s),g=c*c*y,p<(h=Math.max(d/g,g/f))){c-=s;break}p=h}v.push(a={value:c,dice:l<u,children:m.slice(b,x)}),a.dice?(0,M.default)(a,n,r,i,w?r+=u*c/w:o):(0,j.default)(a,n,r,w?n+=l*c/w:i,o),w-=c,b=x}return v}e=function t(o){function e(e,t,n,r,i){a(o,e,t,n,r,i)}return e.ratio=function(e){return t(1<(e=+e)?e:1)},e}(n.phi=e);n.default=e},{"./dice.js":192,"./slice.js":196}],199:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return((0,r.isNumberArray)(t)?r.default:i)(e,t)},n.genericArray=i;var s=(n=e("./value.js"))&&n.__esModule?n:{default:n},r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=l(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./numberArray.js"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function i(e,t){for(var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a=0;a<r;++a)i[a]=(0,s.default)(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(e){for(a=0;a<r;++a)o[a]=i[a](e);return o}}},{"./numberArray.js":213,"./value.js":223}],200:[function(e,t,n){"use strict";function l(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}Object.defineProperty(n,"__esModule",{value:!0}),n.basis=l,n.default=function(a){var s=a.length-1;return function(e){var t=e<=0?e=0:1<=e?s-(e=1):Math.floor(e*s),n=a[t],r=a[t+1],i=0<t?a[t-1]:2*n-r,o=t<s-1?a[t+2]:2*r-n;return l((e-t/s)*s,i,n,r,o)}}},{}],201:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(a){var s=a.length;return function(e){var t=Math.floor(((e%=1)<0?++e:e)*s),n=a[(t+s-1)%s],r=a[t%s],i=a[(t+1)%s],o=a[(t+2)%s];return(0,l.basis)((e-t/s)*s,n,r,i,o)}};var l=e("./basis.js")},{"./basis.js":200}],202:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i,n.gamma=function(o){return 1==(o=+o)?i:function(e,t){return t-e?(n=e,r=t,i=o,n=Math.pow(n,i),r=Math.pow(r,i)-n,i=1/i,function(e){return Math.pow(n+e*r,i)}):(0,a.default)(isNaN(e)?t:e);var n,r,i}},n.hue=function(e,t){var n=t-e;return n?r(e,180<n||n<-180?n-360*Math.round(n/360):n):(0,a.default)(isNaN(e)?t:e)};var a=(e=e("./constant.js"))&&e.__esModule?e:{default:e};function r(t,n){return function(e){return t+e*n}}function i(e,t){var n=t-e;return n?r(e,n):(0,a.default)(isNaN(e)?t:e)}},{"./constant.js":203}],203:[function(e,t,n){arguments[4][74][0].apply(n,arguments)},{dup:74}],204:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.cubehelixLong=void 0;var l=e("d3-color"),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./color.js"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function r(s){return function e(a){function t(t,e){var n=s((t=(0,l.cubehelix)(t)).h,(e=(0,l.cubehelix)(e)).h),r=(0,u.default)(t.s,e.s),i=(0,u.default)(t.l,e.l),o=(0,u.default)(t.opacity,e.opacity);return function(e){return t.h=n(e),t.s=r(e),t.l=i(Math.pow(e,a)),t.opacity=o(e),t+""}}return a=+a,t.gamma=e,t}(1)}e=r(u.hue);n.default=e;e=r(u.default);n.cubehelixLong=e},{"./color.js":202,"d3-color":87}],205:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,n){var r=new Date;return t=+t,n=+n,function(e){return r.setTime(t*(1-e)+n*e),r}}},{}],206:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}},{}],207:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.hclLong=n.default=void 0;var s=e("d3-color"),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./color.js"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function r(a){return function(t,e){var n=a((t=(0,s.hcl)(t)).h,(e=(0,s.hcl)(e)).h),r=(0,l.default)(t.c,e.c),i=(0,l.default)(t.l,e.l),o=(0,l.default)(t.opacity,e.opacity);return function(e){return t.h=n(e),t.c=r(e),t.l=i(e),t.opacity=o(e),t+""}}}e=r(l.hue);n.default=e;e=r(l.default);n.hclLong=e},{"./color.js":202,"d3-color":87}],208:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.hslLong=n.default=void 0;var s=e("d3-color"),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./color.js"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function r(a){return function(t,e){var n=a((t=(0,s.hsl)(t)).h,(e=(0,s.hsl)(e)).h),r=(0,l.default)(t.s,e.s),i=(0,l.default)(t.l,e.l),o=(0,l.default)(t.opacity,e.opacity);return function(e){return t.h=n(e),t.s=r(e),t.l=i(e),t.opacity=o(e),t+""}}}e=r(l.hue);n.default=e;e=r(l.default);n.hslLong=e},{"./color.js":202,"d3-color":87}],209:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=(0,r.hue)(+e,+t);return function(e){e=n(e);return e-360*Math.floor(e/360)}};var r=e("./color.js")},{"./color.js":202}],210:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"interpolate",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"interpolateArray",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"interpolateBasis",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"interpolateBasisClosed",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"interpolateCubehelix",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(n,"interpolateCubehelixLong",{enumerable:!0,get:function(){return w.cubehelixLong}}),Object.defineProperty(n,"interpolateDate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"interpolateDiscrete",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"interpolateHcl",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(n,"interpolateHclLong",{enumerable:!0,get:function(){return _.hclLong}}),Object.defineProperty(n,"interpolateHsl",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(n,"interpolateHslLong",{enumerable:!0,get:function(){return b.hslLong}}),Object.defineProperty(n,"interpolateHue",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"interpolateLab",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(n,"interpolateNumber",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(n,"interpolateNumberArray",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(n,"interpolateObject",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(n,"interpolateRgb",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(n,"interpolateRgbBasis",{enumerable:!0,get:function(){return m.rgbBasis}}),Object.defineProperty(n,"interpolateRgbBasisClosed",{enumerable:!0,get:function(){return m.rgbBasisClosed}}),Object.defineProperty(n,"interpolateRound",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(n,"interpolateString",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(n,"interpolateTransformCss",{enumerable:!0,get:function(){return g.interpolateTransformCss}}),Object.defineProperty(n,"interpolateTransformSvg",{enumerable:!0,get:function(){return g.interpolateTransformSvg}}),Object.defineProperty(n,"interpolateZoom",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(n,"piecewise",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(n,"quantize",{enumerable:!0,get:function(){return j.default}});var r=A(e("./value.js")),i=A(e("./array.js")),o=A(e("./basis.js")),s=A(e("./basisClosed.js")),l=A(e("./date.js")),u=A(e("./discrete.js")),c=A(e("./hue.js")),f=A(e("./number.js")),d=A(e("./numberArray.js")),h=A(e("./object.js")),p=A(e("./round.js")),y=A(e("./string.js")),g=e("./transform/index.js"),v=A(e("./zoom.js")),m=O(e("./rgb.js")),b=O(e("./hsl.js")),x=A(e("./lab.js")),_=O(e("./hcl.js")),w=O(e("./cubehelix.js")),M=A(e("./piecewise.js")),j=A(e("./quantize.js"));function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}function O(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=k(t);if(t&&t.has(e))return t.get(e);var n,r,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=o?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=e[n]);return i.default=e,t&&t.set(e,i),i}function A(e){return e&&e.__esModule?e:{default:e}}},{"./array.js":199,"./basis.js":200,"./basisClosed.js":201,"./cubehelix.js":204,"./date.js":205,"./discrete.js":206,"./hcl.js":207,"./hsl.js":208,"./hue.js":209,"./lab.js":211,"./number.js":212,"./numberArray.js":213,"./object.js":214,"./piecewise.js":215,"./quantize.js":216,"./rgb.js":217,"./round.js":218,"./string.js":219,"./transform/index.js":221,"./value.js":223,"./zoom.js":224}],211:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){var n=(0,s.default)((t=(0,a.lab)(t)).l,(e=(0,a.lab)(e)).l),r=(0,s.default)(t.a,e.a),i=(0,s.default)(t.b,e.b),o=(0,s.default)(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}};var a=e("d3-color"),s=(e=e("./color.js"))&&e.__esModule?e:{default:e}},{"./color.js":202,"d3-color":87}],212:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}},{}],213:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,n){n=n||[];var r,i=t?Math.min(n.length,t.length):0,o=n.slice();return function(e){for(r=0;r<i;++r)o[r]=t[r]*(1-e)+n[r]*e;return o}},n.isNumberArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}},{}],214:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n,r={},i={};null!==e&&"object"===a(e)||(e={});null!==t&&"object"===a(t)||(t={});for(n in t)n in e?r[n]=(0,o.default)(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}};var o=(e=e("./value.js"))&&e.__esModule?e:{default:e};function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},{"./value.js":223}],215:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){void 0===t&&(t=e,e=a.default);var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);for(;n<r;)o[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}};var a=(e=e("./value.js"))&&e.__esModule?e:{default:e}},{"./value.js":223}],216:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}},{}],217:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.rgbBasisClosed=n.rgbBasis=n.default=void 0;var l=e("d3-color"),r=o(e("./basis.js")),i=o(e("./basisClosed.js")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./color.js"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function o(e){return e&&e.__esModule?e:{default:e}}e=function e(t){var a=(0,s.gamma)(t);function n(t,e){var n=a((t=(0,l.rgb)(t)).r,(e=(0,l.rgb)(e)).r),r=a(t.g,e.g),i=a(t.b,e.b),o=(0,s.default)(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=r(e),t.b=i(e),t.opacity=o(e),t+""}}return n.gamma=e,n}(1);function c(s){return function(e){for(var t,n=e.length,r=new Array(n),i=new Array(n),o=new Array(n),a=0;a<n;++a)t=(0,l.rgb)(e[a]),r[a]=t.r||0,i[a]=t.g||0,o[a]=t.b||0;return r=s(r),i=s(i),o=s(o),t.opacity=1,function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t+""}}}n.default=e;r=c(r.default);n.rgbBasis=r;i=c(i.default);n.rgbBasisClosed=i},{"./basis.js":200,"./basisClosed.js":201,"./color.js":202,"d3-color":87}],218:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}},{}],219:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,r){var t,n,i,o=c.lastIndex=f.lastIndex=0,a=-1,s=[],l=[];e+="",r+="";for(;(t=c.exec(e))&&(n=f.exec(r));)(i=n.index)>o&&(i=r.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(t=t[0])===(n=n[0])?s[a]?s[a]+=n:s[++a]=n:(s[++a]=null,l.push({i:a,x:(0,u.default)(t,n)})),o=f.lastIndex;o<r.length&&(i=r.slice(o),s[a]?s[a]+=i:s[++a]=i);return s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(e){return function(){return e}}(r):(r=l.length,function(e){for(var t,n=0;n<r;++n)s[(t=l[n]).i]=t.x(e);return s.join("")})};var u=(e=e("./number.js"))&&e.__esModule?e:{default:e};var c=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,f=new RegExp(c.source,"g")},{"./number.js":212}],220:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r,i,o){var a,s,l;(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a);(l=e*n+t*r)&&(n-=e*l,r-=t*l);(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s);e*r<t*n&&(e=-e,t=-t,l=-l,a=-a);return{translateX:i,translateY:o,rotate:Math.atan2(t,e)*u,skewX:Math.atan(l)*u,scaleX:a,scaleY:s}},n.identity=void 0;var u=180/Math.PI;n.identity={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1}},{}],221:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.interpolateTransformSvg=n.interpolateTransformCss=void 0;var g=(r=e("../number.js"))&&r.__esModule?r:{default:r},r=e("./parse.js");function i(f,d,h,p){function y(e){return e.length?e.pop()+" ":""}return function(e,t){var n,r,i,o,a,s,l,u=[],c=[];return e=f(e),t=f(t),i=e.translateX,o=e.translateY,l=t.translateX,s=t.translateY,a=u,n=c,i!==l||o!==s?(r=a.push("translate(",null,d,null,h),n.push({i:r-4,x:(0,g.default)(i,l)},{i:r-2,x:(0,g.default)(o,s)})):(l||s)&&a.push("translate("+l+d+s+h),n=e.rotate,i=t.rotate,r=u,o=c,n!==i?(180<n-i?i+=360:180<i-n&&(n+=360),o.push({i:r.push(y(r)+"rotate(",null,p)-2,x:(0,g.default)(n,i)})):i&&r.push(y(r)+"rotate("+i+p),a=e.skewX,l=t.skewX,s=u,o=c,a!==l?o.push({i:s.push(y(s)+"skewX(",null,p)-2,x:(0,g.default)(a,l)}):l&&s.push(y(s)+"skewX("+l+p),n=e.scaleX,r=e.scaleY,i=t.scaleX,o=t.scaleY,a=u,s=c,n!==i||r!==o?(l=a.push(y(a)+"scale(",null,",",null,")"),s.push({i:l-4,x:(0,g.default)(n,i)},{i:l-2,x:(0,g.default)(r,o)})):1===i&&1===o||a.push(y(a)+"scale("+i+","+o+")"),e=t=null,function(e){for(var t,n=-1,r=c.length;++n<r;)u[(t=c[n]).i]=t.x(e);return u.join("")}}}e=i(r.parseCss,"px, ","px)","deg)");n.interpolateTransformCss=e;r=i(r.parseSvg,", ",")",")");n.interpolateTransformSvg=r},{"../number.js":212,"./parse.js":222}],222:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.parseCss=function(e){e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return e.isIdentity?i.identity:(0,i.default)(e.a,e.b,e.c,e.d,e.e,e.f)},n.parseSvg=function(e){if(null==e)return i.identity;r=r||document.createElementNS("http://www.w3.org/2000/svg","g");return r.setAttribute("transform",e),(e=r.transform.baseVal.consolidate())?(e=e.matrix,(0,i.default)(e.a,e.b,e.c,e.d,e.e,e.f)):i.identity};var r,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./decompose.js"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}},{"./decompose.js":220}],223:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=p(t);return null==t||"boolean"===n?(0,c.default)(t):("number"===n?s.default:"string"===n?(n=(0,r.color)(t))?(t=n,i.default):u.default:t instanceof r.color?i.default:t instanceof Date?a.default:(0,f.isNumberArray)(t)?f.default:Array.isArray(t)?o.genericArray:("function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?l:s).default)(e,t)};var r=e("d3-color"),i=h(e("./rgb.js")),o=e("./array.js"),a=h(e("./date.js")),s=h(e("./number.js")),l=h(e("./object.js")),u=h(e("./string.js")),c=h(e("./constant.js")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};t=d(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./numberArray.js"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},{"./array.js":199,"./constant.js":203,"./date.js":205,"./number.js":212,"./numberArray.js":213,"./object.js":214,"./rgb.js":217,"./string.js":219,"d3-color":87}],224:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;function y(e){return((e=Math.exp(e))+1/e)/2}var r=function n(d,h,p){function e(e,t){var r,i,o,n,a=e[0],s=e[1],l=e[2],u=t[0],e=t[1],t=t[2],c=u-a,f=e-s,u=c*c+f*f;return(n=u<1e-12?(o=Math.log(t/l)/d,function(e){return[a+e*c,s+e*f,l*Math.exp(d*e*o)]}):(r=Math.sqrt(u),e=(t*t-l*l+p*u)/(2*l*h*r),n=(t*t-l*l-p*u)/(2*t*h*r),i=Math.log(Math.sqrt(e*e+1)-e),o=(Math.log(Math.sqrt(n*n+1)-n)-i)/d,function(e){var t=e*o,n=y(i),e=l/(h*r)*(n*(e=d*t+i,((e=Math.exp(2*e))-1)/(e+1))-(e=i,((e=Math.exp(i))-1/e)/2));return[a+e*c,s+e*f,l*n/y(d*t+i)]})).duration=1e3*o*d/Math.SQRT2,n}return e.rho=function(e){var t=Math.max(.001,+e),e=t*t;return n(t,e,e*e)},e}(Math.SQRT2,2,4);n.default=r},{}],225:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"path",{enumerable:!0,get:function(){return r.default}});var r=(e=e("./path.js"))&&e.__esModule?e:{default:e}},{"./path.js":226}],226:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var p=Math.PI,f=2*p,d=f-1e-6;function r(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function i(){return new r}r.prototype=i.prototype={constructor:r,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){var o,a,s=this._x1,l=this._y1,u=(n=+n)-(e=+e),c=(r=+r)-(t=+t),f=s-e,d=l-t,h=f*f+d*d;if((i=+i)<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+(this._x1=e)+","+(this._y1=t):1e-6<h&&(1e-6<Math.abs(d*u-c*f)&&i?(a=u*u+c*c,s=(o=n-s)*o+(n=r-l)*n,r=Math.sqrt(a),l=Math.sqrt(h),l=(s=i*Math.tan((p-Math.acos((a+h-s)/(2*r*l)))/2))/l,r=s/r,1e-6<Math.abs(l-1)&&(this._+="L"+(e+l*f)+","+(t+l*d)),this._+="A"+i+","+i+",0,0,"+ +(f*n<d*o)+","+(this._x1=e+r*u)+","+(this._y1=t+r*c)):this._+="L"+(this._x1=e)+","+(this._y1=t))},arc:function(e,t,n,r,i,o){e=+e,t=+t,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=e+a,u=t+s,c=1^o,r=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(1e-6<Math.abs(this._x1-l)||1e-6<Math.abs(this._y1-u))&&(this._+="L"+l+","+u),n&&(d<(r=r<0?r%f+f:r)?this._+="A"+n+","+n+",0,1,"+c+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):1e-6<r&&(this._+="A"+n+","+n+",0,"+ +(p<=r)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},n.default=i},{}],227:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t,n=-1,r=e.length,i=e[r-1],o=0;for(;++n<r;)t=i,i=e[n],o+=t[1]*i[0]-t[0]*i[1];return o/2}},{}],228:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t,n,r=-1,i=e.length,o=0,a=0,s=e[i-1],l=0;for(;++r<i;)t=s,s=e[r],l+=n=t[0]*s[1]-s[0]*t[1],o+=(t[0]+s[0])*n,a+=(t[1]+s[1])*n;return[o/(l*=3),a/l]}},{}],229:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){for(var n,r,i=e.length,o=e[i-1],a=t[0],s=t[1],l=o[0],u=o[1],c=!1,f=0;f<i;++f)o=e[f],n=o[0],r=o[1],s<r!=s<u&&a<(l-n)*(s-r)/(u-r)+n&&(c=!c),l=n,u=r;return c}},{}],230:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}},{}],231:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if((n=e.length)<3)return null;var t,n,r=new Array(n),i=new Array(n);for(t=0;t<n;++t)r[t]=[+e[t][0],+e[t][1],t];for(r.sort(c),t=0;t<n;++t)i[t]=[r[t][0],-r[t][1]];var o=f(r),a=f(i),s=a[0]===o[0],l=a[a.length-1]===o[o.length-1],u=[];for(t=o.length-1;0<=t;--t)u.push(e[r[o[t]][2]]);for(t=+s;t<a.length-l;++t)u.push(e[r[a[t]][2]]);return u};var o=(e=e("./cross.js"))&&e.__esModule?e:{default:e};function c(e,t){return e[0]-t[0]||e[1]-t[1]}function f(e){for(var t=e.length,n=[0,1],r=2,i=2;i<t;++i){for(;1<r&&(0,o.default)(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}},{"./cross.js":230}],232:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"polygonArea",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"polygonCentroid",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"polygonContains",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"polygonHull",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"polygonLength",{enumerable:!0,get:function(){return s.default}});var r=l(e("./area.js")),i=l(e("./centroid.js")),o=l(e("./hull.js")),a=l(e("./contains.js")),s=l(e("./length.js"));function l(e){return e&&e.__esModule?e:{default:e}}},{"./area.js":227,"./centroid.js":228,"./contains.js":229,"./hull.js":231,"./length.js":233}],233:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t,n,r=-1,i=e.length,o=e[i-1],a=o[0],s=o[1],l=0;for(;++r<i;)t=a,n=s,o=e[r],a=o[0],s=o[1],t-=a,n-=s,l+=Math.hypot(t,n);return l}},{}],234:[function(e,t,n){"use strict";function d(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,a,s,l,u,c,f,d,h=e._root,p={data:r},y=e._x0,g=e._y0,v=e._x1,m=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((u=t>=(o=(y+v)/2))?y=o:v=o,(c=n>=(a=(g+m)/2))?g=a:m=a,!(h=(i=h)[f=c<<1|u]))return i[f]=p,e;if(s=+e._x.call(null,h.data),l=+e._y.call(null,h.data),t===s&&n===l)return p.next=h,i?i[f]=p:e._root=p,e;for(;i=i?i[f]=new Array(4):e._root=new Array(4),(u=t>=(o=(y+v)/2))?y=o:v=o,(c=n>=(a=(g+m)/2))?g=a:m=a,(f=c<<1|u)==(d=(a<=l)<<1|o<=s););return i[d]=h,i[f]=p,e}Object.defineProperty(n,"__esModule",{value:!0}),n.addAll=function(e){var t,n,r,i,o=e.length,a=new Array(o),s=new Array(o),l=1/0,u=1/0,c=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=r,s[n]=i,r<l&&(l=r),c<r&&(c=r),i<u&&(u=i),f<i&&(f=i));if(c<l||f<u)return this;for(this.cover(l,u).cover(c,f),n=0;n<o;++n)d(this,a[n],s[n],e[n]);return this},n.default=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return d(this.cover(t,n),t,n,e)}},{}],235:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a,s,l=i-n||1,u=this._root;e<n||i<=e||t<r||o<=t;)switch(s=(t<r)<<1|e<n,(a=new Array(4))[s]=u,u=a,l*=2,s){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}},{}],236:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var t=[];return this.visit(function(e){if(!e.length)for(;t.push(e.data),e=e.next;);}),t}},{}],237:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}},{}],238:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){var r,i,o,a,s,l=this._x0,u=this._y0,c=this._x1,f=this._y1,d=[],h=this._root;h&&d.push(new v.default(h,l,u,c,f));null==n?n=1/0:(l=e-n,u=t-n,c=e+n,f=t+n,n*=n);for(;g=d.pop();){var p,y,g;!(h=g.node)||(i=g.x0)>c||(o=g.y0)>f||(a=g.x1)<l||(s=g.y1)<u||(h.length?(y=(i+a)/2,p=(o+s)/2,d.push(new v.default(h[3],y,p,a,s),new v.default(h[2],i,p,y,s),new v.default(h[1],y,o,a,p),new v.default(h[0],i,o,y,p)),(y=(p<=t)<<1|y<=e)&&(g=d[d.length-1],d[d.length-1]=d[d.length-1-y],d[d.length-1-y]=g)):(y=e-+this._x.call(null,h.data),g=t-+this._y.call(null,h.data),(g=y*y+g*g)<n&&(g=Math.sqrt(n=g),l=e-g,u=t-g,c=e+g,f=t+g,r=h.data)))}return r};var v=(e=e("./quad.js"))&&e.__esModule?e:{default:e}},{"./quad.js":240}],239:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"quadtree",{enumerable:!0,get:function(){return r.default}});var r=(e=e("./quadtree.js"))&&e.__esModule?e:{default:e}},{"./quadtree.js":241}],240:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}},{}],241:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=m;var r=v(e("./add.js")),i=y(e("./cover.js")),o=y(e("./data.js")),s=y(e("./extent.js")),l=y(e("./find.js")),u=v(e("./remove.js")),c=y(e("./root.js")),f=y(e("./size.js")),d=y(e("./visit.js")),n=y(e("./visitAfter.js")),h=v(e("./x.js")),p=v(e("./y.js"));function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=g(t);if(t&&t.has(e))return t.get(e);var n,r,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=o?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=e[n]);return i.default=e,t&&t.set(e,i),i}function m(e,t,n){n=new b(null==t?h.defaultX:t,null==n?p.defaultY:n,NaN,NaN,NaN,NaN);return null==e?n:n.addAll(e)}function b(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function x(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}e=m.prototype=b.prototype;e.copy=function(){var e,t,n=new b(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=x(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=x(t));return n},e.add=r.default,e.addAll=r.addAll,e.cover=i.default,e.data=o.default,e.extent=s.default,e.find=l.default,e.remove=u.default,e.removeAll=u.removeAll,e.root=c.default,e.size=f.default,e.visit=d.default,e.visitAfter=n.default,e.x=h.default,e.y=p.default},{"./add.js":234,"./cover.js":235,"./data.js":236,"./extent.js":237,"./find.js":238,"./remove.js":242,"./root.js":243,"./size.js":244,"./visit.js":245,"./visitAfter.js":246,"./x.js":247,"./y.js":248}],242:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,i,o,a,s,l,u,c,f,d=this._root,h=this._x0,p=this._y0,y=this._x1,g=this._y1;if(!d)return this;if(d.length)for(;;){if((l=o>=(u=(h+y)/2))?h=u:y=u,(u=a>=(s=(p+g)/2))?p=s:g=s,!(d=(t=d)[c=u<<1|l]))return this;if(!d.length)break;(t[c+1&3]||t[c+2&3]||t[c+3&3])&&(n=t,f=c)}for(;d.data!==e;)if(!(d=(r=d).next))return this;(i=d.next)&&delete d.next;if(r)return i?r.next=i:delete r.next,this;if(!t)return this._root=i,this;i?t[c]=i:delete t[c],(d=t[0]||t[1]||t[2]||t[3])&&d===(t[3]||t[2]||t[1]||t[0])&&!d.length&&(n?n[f]=d:this._root=d);return this},n.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}},{}],243:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return this._root}},{}],244:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var t=0;return this.visit(function(e){if(!e.length)for(;++t,e=e.next;);}),t}},{}],245:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t,n,r,i,o,a=[],s=this._root;s&&a.push(new c.default(s,this._x0,this._y0,this._x1,this._y1));for(;t=a.pop();){var l,u;!e(s=t.node,n=t.x0,r=t.y0,i=t.x1,o=t.y1)&&s.length&&(l=(n+i)/2,u=(r+o)/2,(t=s[3])&&a.push(new c.default(t,l,u,i,o)),(t=s[2])&&a.push(new c.default(t,n,u,l,o)),(t=s[1])&&a.push(new c.default(t,l,r,i,u)),(t=s[0])&&a.push(new c.default(t,n,r,l,u)))}return this};var c=(e=e("./quad.js"))&&e.__esModule?e:{default:e}},{"./quad.js":240}],246:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t,n=[],r=[];this._root&&n.push(new d.default(this._root,this._x0,this._y0,this._x1,this._y1));for(;t=n.pop();){var i,o,a,s,l,u,c,f=t.node;f.length&&(o=t.x0,a=t.y0,s=t.x1,l=t.y1,u=(o+s)/2,c=(a+l)/2,(i=f[0])&&n.push(new d.default(i,o,a,u,c)),(i=f[1])&&n.push(new d.default(i,u,a,s,c)),(i=f[2])&&n.push(new d.default(i,o,c,u,l)),(i=f[3])&&n.push(new d.default(i,u,c,s,l))),r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this};var d=(e=e("./quad.js"))&&e.__esModule?e:{default:e}},{"./quad.js":240}],247:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return arguments.length?(this._x=e,this):this._x},n.defaultX=function(e){return e[0]}},{}],248:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return arguments.length?(this._y=e,this):this._y},n.defaultY=function(e){return e[1]}},{}],249:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("./defaultSource.js")),i=o(e("./irwinHall.js"));function o(e){return e&&e.__esModule?e:{default:e}}r=function e(n){var r=i.default.source(n);function t(e){if(0==(e=+e))return n;var t=r(e);return function(){return t()/e}}return t.source=e,t}(r.default);n.default=r},{"./defaultSource.js":254,"./irwinHall.js":260}],250:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;e=function e(t){function n(e){if((e=+e)<0||1<e)throw new RangeError("invalid p");return function(){return Math.floor(t()+e)}}return n.source=e,n}(((e=e("./defaultSource.js"))&&e.__esModule?e:{default:e}).default);n.default=e},{"./defaultSource.js":254}],251:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("./defaultSource.js")),o=i(e("./gamma.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=function e(t){var i=o.default.source(t);function n(e,t){var n=i(e),r=i(t);return function(){var e=n();return 0===e?0:e/(e+r())}}return n.source=e,n}(r.default);n.default=r},{"./defaultSource.js":254,"./gamma.js":256}],252:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("./defaultSource.js")),i=a(e("./beta.js")),o=a(e("./geometric.js"));function a(e){return e&&e.__esModule?e:{default:e}}r=function e(t){var f=o.default.source(t),d=i.default.source(t);function n(u,c){return u=+u,1<=(c=+c)?function(){return u}:c<=0?function(){return 0}:function(){for(var e=0,t=u,n=c;16<t*n&&16<t*(1-n);){var r=Math.floor((t+1)*n),i=d(r,t-r+1)();i<=n?(e+=r,t-=r,n=(n-i)/(1-i)):(t=r-1,n/=i)}for(var o=n<.5,a=f(o?n:1-n),s=a(),l=0;s<=t;++l)s+=a();return e+(o?l:t-l)}}return n.source=e,n}(r.default);n.default=r},{"./beta.js":251,"./defaultSource.js":254,"./geometric.js":257}],253:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;e=function e(n){function t(e,t){return e=null==e?0:+e,t=null==t?1:+t,function(){return e+t*Math.tan(Math.PI*n())}}return t.source=e,t}(((e=e("./defaultSource.js"))&&e.__esModule?e:{default:e}).default);n.default=e},{"./defaultSource.js":254}],254:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=Math.random;n.default=r},{}],255:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;e=function e(t){function n(e){return function(){return-Math.log1p(-t())/e}}return n.source=e,n}(((e=e("./defaultSource.js"))&&e.__esModule?e:{default:e}).default);n.default=e},{"./defaultSource.js":254}],256:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("./defaultSource.js")),i=o(e("./normal.js"));function o(e){return e&&e.__esModule?e:{default:e}}r=function e(s){var l=i.default.source(s)();function t(e,r){if((e=+e)<0)throw new RangeError("invalid k");if(0===e)return function(){return 0};if(r=null==r?1:+r,1===e)return function(){return-Math.log1p(-s())*r};var i=(e<1?e+1:e)-1/3,o=1/(3*Math.sqrt(i)),a=e<1?function(){return Math.pow(s(),1/e)}:function(){return 1};return function(){do{do{var e=l(),t=1+o*e}while(t<=0);t*=t*t;var n=1-s()}while(1-.0331*e*e*e*e<=n&&Math.log(n)>=.5*e*e+i*(1-t+Math.log(t)));return i*t*a()*r}}return t.source=e,t}(r.default);n.default=r},{"./defaultSource.js":254,"./normal.js":264}],257:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;e=function e(t){function n(e){if((e=+e)<0||1<e)throw new RangeError("invalid p");return 0===e?function(){return 1/0}:1===e?function(){return 1}:(e=Math.log1p(-e),function(){return 1+Math.floor(Math.log1p(-t())/e)})}return n.source=e,n}(((e=e("./defaultSource.js"))&&e.__esModule?e:{default:e}).default);n.default=e},{"./defaultSource.js":254}],258:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"randomBates",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"randomBernoulli",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(n,"randomBeta",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(n,"randomBinomial",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(n,"randomCauchy",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(n,"randomExponential",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"randomGamma",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(n,"randomGeometric",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(n,"randomInt",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"randomIrwinHall",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"randomLcg",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(n,"randomLogNormal",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"randomLogistic",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(n,"randomNormal",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"randomPareto",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"randomPoisson",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(n,"randomUniform",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"randomWeibull",{enumerable:!0,get:function(){return g.default}});var r=_(e("./uniform.js")),i=_(e("./int.js")),o=_(e("./normal.js")),a=_(e("./logNormal.js")),s=_(e("./bates.js")),l=_(e("./irwinHall.js")),u=_(e("./exponential.js")),c=_(e("./pareto.js")),f=_(e("./bernoulli.js")),d=_(e("./geometric.js")),h=_(e("./binomial.js")),p=_(e("./gamma.js")),y=_(e("./beta.js")),g=_(e("./weibull.js")),v=_(e("./cauchy.js")),m=_(e("./logistic.js")),b=_(e("./poisson.js")),x=_(e("./lcg.js"));function _(e){return e&&e.__esModule?e:{default:e}}},{"./bates.js":249,"./bernoulli.js":250,"./beta.js":251,"./binomial.js":252,"./cauchy.js":253,"./exponential.js":255,"./gamma.js":256,"./geometric.js":257,"./int.js":259,"./irwinHall.js":260,"./lcg.js":261,"./logNormal.js":262,"./logistic.js":263,"./normal.js":264,"./pareto.js":265,"./poisson.js":266,"./uniform.js":267,"./weibull.js":268}],259:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;e=function e(n){function t(e,t){return arguments.length<2&&(t=e,e=0),e=Math.floor(e),t=Math.floor(t)-e,function(){return Math.floor(n()*t+e)}}return t.source=e,t}(((e=e("./defaultSource.js"))&&e.__esModule?e:{default:e}).default);n.default=e},{"./defaultSource.js":254}],260:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;e=function e(r){function t(n){return(n=+n)<=0?function(){return 0}:function(){for(var e=0,t=n;1<t;--t)e+=r();return e+t*r()}}return t.source=e,t}(((e=e("./defaultSource.js"))&&e.__esModule?e:{default:e}).default);n.default=e},{"./defaultSource.js":254}],261:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Math.random(),t=0|(0<=e&&e<1?e/o:Math.abs(e));return function(){return o*((t=r*t+i|0)>>>0)}};var r=1664525,i=1013904223,o=1/4294967296},{}],262:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("./defaultSource.js")),i=o(e("./normal.js"));function o(e){return e&&e.__esModule?e:{default:e}}r=function e(t){var n=i.default.source(t);function r(){var e=n.apply(this,arguments);return function(){return Math.exp(e())}}return r.source=e,r}(r.default);n.default=r},{"./defaultSource.js":254,"./normal.js":264}],263:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;e=function e(r){function t(t,n){return t=null==t?0:+t,n=null==n?1:+n,function(){var e=r();return t+n*Math.log(e/(1-e))}}return t.source=e,t}(((e=e("./defaultSource.js"))&&e.__esModule?e:{default:e}).default);n.default=e},{"./defaultSource.js":254}],264:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;e=function e(o){function t(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var e;if(null!=r)e=r,r=null;else for(;r=2*o()-1,e=2*o()-1,!(i=r*r+e*e)||1<i;);return t+n*e*Math.sqrt(-2*Math.log(i)/i)}}return t.source=e,t}(((e=e("./defaultSource.js"))&&e.__esModule?e:{default:e}).default);n.default=e},{"./defaultSource.js":254}],265:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;e=function e(t){function n(e){if((e=+e)<0)throw new RangeError("invalid alpha");return e=1/-e,function(){return Math.pow(1-t(),e)}}return n.source=e,n}(((e=e("./defaultSource.js"))&&e.__esModule?e:{default:e}).default);n.default=e},{"./defaultSource.js":254}],266:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("./defaultSource.js")),i=a(e("./binomial.js")),o=a(e("./gamma.js"));function a(e){return e&&e.__esModule?e:{default:e}}r=function e(s){var l=o.default.source(s),u=i.default.source(s);function t(a){return function(){for(var e=0,t=a;16<t;){var n=Math.floor(.875*t),r=l(n)();if(t<r)return e+u(n-1,t/r)();e+=n,t-=r}for(var i=-Math.log1p(-s()),o=0;i<=t;++o)i-=Math.log1p(-s());return e+o}}return t.source=e,t}(r.default);n.default=r},{"./binomial.js":252,"./defaultSource.js":254,"./gamma.js":256}],267:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;e=function e(n){function t(e,t){return e=null==e?0:+e,t=null==t?1:+t,1===arguments.length?(t=e,e=0):t-=e,function(){return n()*t+e}}return t.source=e,t}(((e=e("./defaultSource.js"))&&e.__esModule?e:{default:e}).default);n.default=e},{"./defaultSource.js":254}],268:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;e=function e(i){function t(t,e,n){var r=0==(t=+t)?function(e){return-Math.log(e)}:(t=1/t,function(e){return Math.pow(e,t)});return e=null==e?0:+e,n=null==n?1:+n,function(){return e+n*r(-Math.log1p(-i()))}}return t.source=e,t}(((e=e("./defaultSource.js"))&&e.__esModule?e:{default:e}).default);n.default=e},{"./defaultSource.js":254}],269:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});e=(n.default=void 0,((e=e("../colors.js"))&&e.__esModule?e:{default:e}).default)("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666");n.default=e},{"../colors.js":279}],270:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});e=(n.default=void 0,((e=e("../colors.js"))&&e.__esModule?e:{default:e}).default)("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666");n.default=e},{"../colors.js":279}],271:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});e=(n.default=void 0,((e=e("../colors.js"))&&e.__esModule?e:{default:e}).default)("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");n.default=e},{"../colors.js":279}],272:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});e=(n.default=void 0,((e=e("../colors.js"))&&e.__esModule?e:{default:e}).default)("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2");n.default=e},{"../colors.js":279}],273:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});e=(n.default=void 0,((e=e("../colors.js"))&&e.__esModule?e:{default:e}).default)("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc");n.default=e},{"../colors.js":279}],274:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});e=(n.default=void 0,((e=e("../colors.js"))&&e.__esModule?e:{default:e}).default)("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999");n.default=e},{"../colors.js":279}],275:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});e=(n.default=void 0,((e=e("../colors.js"))&&e.__esModule?e:{default:e}).default)("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3");n.default=e},{"../colors.js":279}],276:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});e=(n.default=void 0,((e=e("../colors.js"))&&e.__esModule?e:{default:e}).default)("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");n.default=e},{"../colors.js":279}],277:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});e=(n.default=void 0,((e=e("../colors.js"))&&e.__esModule?e:{default:e}).default)("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");n.default=e},{"../colors.js":279}],278:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});e=(n.default=void 0,((e=e("../colors.js"))&&e.__esModule?e:{default:e}).default)("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");n.default=e},{"../colors.js":279}],279:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.length/6|0,n=new Array(t),r=0;for(;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}},{}],280:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],281:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],282:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],283:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],284:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],285:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],286:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],287:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],288:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],289:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"interpolateBlues",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(n,"interpolateBrBG",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(n,"interpolateBuGn",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(n,"interpolateBuPu",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(n,"interpolateCividis",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(n,"interpolateCool",{enumerable:!0,get:function(){return H.cool}}),Object.defineProperty(n,"interpolateCubehelixDefault",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(n,"interpolateGnBu",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(n,"interpolateGreens",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(n,"interpolateGreys",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(n,"interpolateInferno",{enumerable:!0,get:function(){return W.inferno}}),Object.defineProperty(n,"interpolateMagma",{enumerable:!0,get:function(){return W.magma}}),Object.defineProperty(n,"interpolateOrRd",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(n,"interpolateOranges",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(n,"interpolatePRGn",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(n,"interpolatePiYG",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(n,"interpolatePlasma",{enumerable:!0,get:function(){return W.plasma}}),Object.defineProperty(n,"interpolatePuBu",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(n,"interpolatePuBuGn",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(n,"interpolatePuOr",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(n,"interpolatePuRd",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(n,"interpolatePurples",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(n,"interpolateRainbow",{enumerable:!0,get:function(){return H.default}}),Object.defineProperty(n,"interpolateRdBu",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(n,"interpolateRdGy",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(n,"interpolateRdPu",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(n,"interpolateRdYlBu",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(n,"interpolateRdYlGn",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(n,"interpolateReds",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(n,"interpolateSinebow",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(n,"interpolateSpectral",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(n,"interpolateTurbo",{enumerable:!0,get:function(){return G.default}}),Object.defineProperty(n,"interpolateViridis",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(n,"interpolateWarm",{enumerable:!0,get:function(){return H.warm}}),Object.defineProperty(n,"interpolateYlGn",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(n,"interpolateYlGnBu",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(n,"interpolateYlOrBr",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(n,"interpolateYlOrRd",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(n,"schemeAccent",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"schemeBlues",{enumerable:!0,get:function(){return I.scheme}}),Object.defineProperty(n,"schemeBrBG",{enumerable:!0,get:function(){return p.scheme}}),Object.defineProperty(n,"schemeBuGn",{enumerable:!0,get:function(){return M.scheme}}),Object.defineProperty(n,"schemeBuPu",{enumerable:!0,get:function(){return j.scheme}}),Object.defineProperty(n,"schemeCategory10",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"schemeDark2",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"schemeGnBu",{enumerable:!0,get:function(){return k.scheme}}),Object.defineProperty(n,"schemeGreens",{enumerable:!0,get:function(){return z.scheme}}),Object.defineProperty(n,"schemeGreys",{enumerable:!0,get:function(){return D.scheme}}),Object.defineProperty(n,"schemeOrRd",{enumerable:!0,get:function(){return O.scheme}}),Object.defineProperty(n,"schemeOranges",{enumerable:!0,get:function(){return B.scheme}}),Object.defineProperty(n,"schemePRGn",{enumerable:!0,get:function(){return y.scheme}}),Object.defineProperty(n,"schemePaired",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"schemePastel1",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"schemePastel2",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"schemePiYG",{enumerable:!0,get:function(){return g.scheme}}),Object.defineProperty(n,"schemePuBu",{enumerable:!0,get:function(){return T.scheme}}),Object.defineProperty(n,"schemePuBuGn",{enumerable:!0,get:function(){return A.scheme}}),Object.defineProperty(n,"schemePuOr",{enumerable:!0,get:function(){return v.scheme}}),Object.defineProperty(n,"schemePuRd",{enumerable:!0,get:function(){return P.scheme}}),Object.defineProperty(n,"schemePurples",{enumerable:!0,get:function(){return N.scheme}}),Object.defineProperty(n,"schemeRdBu",{enumerable:!0,get:function(){return m.scheme}}),Object.defineProperty(n,"schemeRdGy",{enumerable:!0,get:function(){return b.scheme}}),Object.defineProperty(n,"schemeRdPu",{enumerable:!0,get:function(){return S.scheme}}),Object.defineProperty(n,"schemeRdYlBu",{enumerable:!0,get:function(){return x.scheme}}),Object.defineProperty(n,"schemeRdYlGn",{enumerable:!0,get:function(){return _.scheme}}),Object.defineProperty(n,"schemeReds",{enumerable:!0,get:function(){return F.scheme}}),Object.defineProperty(n,"schemeSet1",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"schemeSet2",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(n,"schemeSet3",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(n,"schemeSpectral",{enumerable:!0,get:function(){return w.scheme}}),Object.defineProperty(n,"schemeTableau10",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(n,"schemeYlGn",{enumerable:!0,get:function(){return C.scheme}}),Object.defineProperty(n,"schemeYlGnBu",{enumerable:!0,get:function(){return E.scheme}}),Object.defineProperty(n,"schemeYlOrBr",{enumerable:!0,get:function(){return L.scheme}}),Object.defineProperty(n,"schemeYlOrRd",{enumerable:!0,get:function(){return R.scheme}});var r=Z(e("./categorical/category10.js")),i=Z(e("./categorical/Accent.js")),o=Z(e("./categorical/Dark2.js")),s=Z(e("./categorical/Paired.js")),l=Z(e("./categorical/Pastel1.js")),u=Z(e("./categorical/Pastel2.js")),c=Z(e("./categorical/Set1.js")),f=Z(e("./categorical/Set2.js")),d=Z(e("./categorical/Set3.js")),h=Z(e("./categorical/Tableau10.js")),p=X(e("./diverging/BrBG.js")),y=X(e("./diverging/PRGn.js")),g=X(e("./diverging/PiYG.js")),v=X(e("./diverging/PuOr.js")),m=X(e("./diverging/RdBu.js")),b=X(e("./diverging/RdGy.js")),x=X(e("./diverging/RdYlBu.js")),_=X(e("./diverging/RdYlGn.js")),w=X(e("./diverging/Spectral.js")),M=X(e("./sequential-multi/BuGn.js")),j=X(e("./sequential-multi/BuPu.js")),k=X(e("./sequential-multi/GnBu.js")),O=X(e("./sequential-multi/OrRd.js")),A=X(e("./sequential-multi/PuBuGn.js")),T=X(e("./sequential-multi/PuBu.js")),P=X(e("./sequential-multi/PuRd.js")),S=X(e("./sequential-multi/RdPu.js")),E=X(e("./sequential-multi/YlGnBu.js")),C=X(e("./sequential-multi/YlGn.js")),L=X(e("./sequential-multi/YlOrBr.js")),R=X(e("./sequential-multi/YlOrRd.js")),I=X(e("./sequential-single/Blues.js")),z=X(e("./sequential-single/Greens.js")),D=X(e("./sequential-single/Greys.js")),N=X(e("./sequential-single/Purples.js")),F=X(e("./sequential-single/Reds.js")),B=X(e("./sequential-single/Oranges.js")),U=Z(e("./sequential-multi/cividis.js")),q=Z(e("./sequential-multi/cubehelix.js")),H=X(e("./sequential-multi/rainbow.js")),V=Z(e("./sequential-multi/sinebow.js")),G=Z(e("./sequential-multi/turbo.js")),W=X(e("./sequential-multi/viridis.js"));function Y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Y=function(e){return e?n:t})(e)}function X(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=Y(t);if(t&&t.has(e))return t.get(e);var n,r,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=o?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=e[n]);return i.default=e,t&&t.set(e,i),i}function Z(e){return e&&e.__esModule?e:{default:e}}},{"./categorical/Accent.js":269,"./categorical/Dark2.js":270,"./categorical/Paired.js":271,"./categorical/Pastel1.js":272,"./categorical/Pastel2.js":273,"./categorical/Set1.js":274,"./categorical/Set2.js":275,"./categorical/Set3.js":276,"./categorical/Tableau10.js":277,"./categorical/category10.js":278,"./diverging/BrBG.js":280,"./diverging/PRGn.js":281,"./diverging/PiYG.js":282,"./diverging/PuOr.js":283,"./diverging/RdBu.js":284,"./diverging/RdGy.js":285,"./diverging/RdYlBu.js":286,"./diverging/RdYlGn.js":287,"./diverging/Spectral.js":288,"./sequential-multi/BuGn.js":291,"./sequential-multi/BuPu.js":292,"./sequential-multi/GnBu.js":293,"./sequential-multi/OrRd.js":294,"./sequential-multi/PuBu.js":295,"./sequential-multi/PuBuGn.js":296,"./sequential-multi/PuRd.js":297,"./sequential-multi/RdPu.js":298,"./sequential-multi/YlGn.js":299,"./sequential-multi/YlGnBu.js":300,"./sequential-multi/YlOrBr.js":301,"./sequential-multi/YlOrRd.js":302,"./sequential-multi/cividis.js":303,"./sequential-multi/cubehelix.js":304,"./sequential-multi/rainbow.js":305,"./sequential-multi/sinebow.js":306,"./sequential-multi/turbo.js":307,"./sequential-multi/viridis.js":308,"./sequential-single/Blues.js":309,"./sequential-single/Greens.js":310,"./sequential-single/Greys.js":311,"./sequential-single/Oranges.js":312,"./sequential-single/Purples.js":313,"./sequential-single/Reds.js":314}],290:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("d3-interpolate");n.default=function(e){return(0,r.interpolateRgbBasis)(e[e.length-1])}},{"d3-interpolate":210}],291:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],292:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],293:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],294:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],295:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],296:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],297:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],298:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],299:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],300:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],301:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],302:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],303:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-2710.57*e)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-67.37*e)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-2475.67*e)))))))+")"}},{}],304:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("d3-color"),r=(0,e("d3-interpolate").interpolateCubehelixLong)((0,r.cubehelix)(300,.5,0),(0,r.cubehelix)(-240,.5,1));n.default=r},{"d3-color":87,"d3-interpolate":210}],305:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.cool=void 0,n.default=function(e){(e<0||1<e)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return o.h=360*e-100,o.s=1.5-1.5*t,o.l=.8-.9*t,o+""},n.warm=void 0;var r=e("d3-color"),i=e("d3-interpolate"),e=(0,i.interpolateCubehelixLong)((0,r.cubehelix)(-100,.75,.35),(0,r.cubehelix)(80,1.5,.8));n.warm=e;i=(0,i.interpolateCubehelixLong)((0,r.cubehelix)(260,.75,.35),(0,r.cubehelix)(80,1.5,.8));n.cool=i;var o=(0,r.cubehelix)()},{"d3-color":87,"d3-interpolate":210}],306:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t;return e=(.5-e)*Math.PI,r.r=255*(t=Math.sin(e))*t,r.g=255*(t=Math.sin(e+i))*t,r.b=255*(t=Math.sin(e+o))*t,r+""};var r=(0,e("d3-color").rgb)(),i=Math.PI/3,o=2*Math.PI/3},{"d3-color":87}],307:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-14825.05*e)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+707.56*e)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-6838.66*e)))))))+")"}},{}],308:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.plasma=n.magma=n.inferno=n.default=void 0;e=(i=e("../colors.js"))&&i.__esModule?i:{default:i};function r(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}var i=r((0,e.default)("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));n.default=i;i=r((0,e.default)("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));n.magma=i;i=r((0,e.default)("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));n.inferno=i;e=r((0,e.default)("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));n.plasma=e},{"../colors.js":279}],309:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],310:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],311:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],312:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],313:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],314:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scheme=n.default=void 0;var r=i(e("../colors.js")),e=i(e("../ramp.js"));function i(e){return e&&e.__esModule?e:{default:e}}r=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(r.default);n.scheme=r;r=(0,e.default)(r);n.default=r},{"../colors.js":279,"../ramp.js":290}],315:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=v,n.point=function(){return function e(t){var n=t.copy;t.padding=t.paddingOuter;delete t.paddingInner;delete t.paddingOuter;t.copy=function(){return e(n())};return t}(v.apply(null,arguments).paddingInner(1))};var p=e("d3-array"),r=e("./init.js"),y=(e=e("./ordinal.js"))&&e.__esModule?e:{default:e};function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(){var i,o,e=(0,y.default)().unknown(void 0),a=e.domain,s=e.range,l=0,u=1,c=!1,f=0,d=0,h=.5;function t(){var e=a().length,t=u<l,n=t?u:l,r=t?l:u;i=(r-n)/Math.max(1,e-f+2*d),c&&(i=Math.floor(i)),n+=(r-n-i*(e-f))*h,o=i*(1-f),c&&(n=Math.round(n),o=Math.round(o));e=(0,p.range)(e).map(function(e){return n+i*e});return s(t?e.reverse():e)}return delete e.unknown,e.domain=function(e){return arguments.length?(a(e),t()):a()},e.range=function(e){return arguments.length?(e=g(e,2),l=e[0],u=e[1],l=+l,u=+u,t()):[l,u]},e.rangeRound=function(e){var e=e,e=g(e,2);return l=e[0],u=e[1],l=+l,u=+u,c=!0,t()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(e){return arguments.length?(c=!!e,t()):c},e.padding=function(e){return arguments.length?(f=Math.min(1,d=+e),t()):f},e.paddingInner=function(e){return arguments.length?(f=Math.min(1,e),t()):f},e.paddingOuter=function(e){return arguments.length?(d=+e,t()):d},e.align=function(e){return arguments.length?(h=Math.max(0,Math.min(1,e)),t()):h},e.copy=function(){return v(a(),[l,u]).round(c).paddingInner(f).paddingOuter(d).align(h)},r.initRange.apply(t(),arguments)}},{"./init.js":321,"./ordinal.js":326,"d3-array":32}],316:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(){return e}}},{}],317:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.copy=function(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())},n.default=function(){return o()(g,g)},n.identity=g,n.transformer=o;var s=e("d3-array"),h=e("d3-interpolate"),r=i(e("./constant.js")),p=i(e("./number.js"));function i(e){return e&&e.__esModule?e:{default:e}}var y=[0,1];function g(e){return e}function l(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:(0,r.default)(isNaN(n)?NaN:.5)}function v(e,t,n){var r=e[0],e=e[1],i=t[0],t=t[1],i=e<r?(r=l(e,r),n(t,i)):(r=l(r,e),n(i,t));return function(e){return i(r(e))}}function m(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=l(n[a],n[a+1]),o[a]=t(e[a],e[a+1]);return function(e){var t=(0,s.bisect)(n,e,1,r)-1;return o[t](i[t](e))}}function o(){var n,r,t,i,o,a,s=y,l=y,u=h.interpolate,c=g;function f(){var t,n,e,r=Math.min(s.length,l.length);return c!==g&&(t=s[0],(n=s[r-1])<t&&(e=t,t=n,n=e),c=function(e){return Math.max(t,Math.min(n,e))}),i=2<r?m:v,o=a=null,d}function d(e){return null==e||isNaN(e=+e)?t:(o=o||i(s.map(n),l,u))(n(c(e)))}return d.invert=function(e){return c(r((a=a||i(l,s.map(n),h.interpolateNumber))(e)))},d.domain=function(e){return arguments.length?(s=Array.from(e,p.default),f()):s.slice()},d.range=function(e){return arguments.length?(l=Array.from(e),f()):l.slice()},d.rangeRound=function(e){return l=Array.from(e),u=h.interpolateRound,f()},d.clamp=function(e){return arguments.length?(c=!!e||g,f()):c!==g},d.interpolate=function(e){return arguments.length?(u=e,f()):u},d.unknown=function(e){return arguments.length?(t=e,d):t},function(e,t){return n=e,r=t,f()}}},{"./constant.js":316,"./number.js":325,"d3-array":32,"d3-interpolate":210}],318:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){var t=(0,i.linearish)(c()(g.identity));t.copy=function(){return(0,a.copy)(t,e())};return r.initInterpolator.apply(t,arguments)},n.divergingLog=function e(){var t=(0,o.loggish)(c()).domain([.1,1,10]);t.copy=function(){return(0,a.copy)(t,e()).base(t.base())};return r.initInterpolator.apply(t,arguments)},n.divergingPow=f,n.divergingSqrt=function(){return f.apply(null,arguments).exponent(.5)},n.divergingSymlog=function e(){var t=(0,s.symlogish)(c());t.copy=function(){return(0,a.copy)(t,e()).constant(t.constant())};return r.initInterpolator.apply(t,arguments)};var y=e("d3-interpolate"),g=e("./continuous.js"),r=e("./init.js"),i=e("./linear.js"),o=e("./log.js"),a=e("./sequential.js"),s=e("./symlog.js"),l=e("./pow.js");function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(){var t,n,r,i,o,a,s,l=0,u=.5,c=1,f=1,d=g.identity,h=!1;function p(e){return isNaN(e=+e)?s:(e=.5+((e=+a(e))-n)*(f*e<f*n?i:o),d(h?Math.max(0,Math.min(1,e)):e))}function e(r){return function(e){var t,n;return arguments.length?(t=(n=v(e,3))[0],e=n[1],n=n[2],d=(0,y.piecewise)(r,[t,e,n]),p):[d(0),d(.5),d(1)]}}return p.domain=function(e){return arguments.length?(e=v(e,3),l=e[0],u=e[1],c=e[2],t=a(l=+l),n=a(u=+u),r=a(c=+c),i=t===n?0:.5/(n-t),o=n===r?0:.5/(r-n),f=n<t?-1:1,p):[l,u,c]},p.clamp=function(e){return arguments.length?(h=!!e,p):h},p.interpolator=function(e){return arguments.length?(d=e,p):d},p.range=e(y.interpolate),p.rangeRound=e(y.interpolateRound),p.unknown=function(e){return arguments.length?(s=e,p):s},function(e){return t=(a=e)(l),n=e(u),r=e(c),i=t===n?0:.5/(n-t),o=n===r?0:.5/(r-n),f=n<t?-1:1,p}}function f(){var e=(0,l.powish)(c());return e.copy=function(){return(0,a.copy)(e,f()).exponent(e.exponent())},r.initInterpolator.apply(e,arguments)}},{"./continuous.js":317,"./init.js":321,"./linear.js":322,"./log.js":323,"./pow.js":327,"./sequential.js":331,"./symlog.js":333,"d3-interpolate":210}],319:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t){var n;function r(e){return null==e||isNaN(e=+e)?n:e}r.invert=r;r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,o.default),r):t.slice()};r.unknown=function(e){return arguments.length?(n=e,r):n};r.copy=function(){return e(t).unknown(n)};t=arguments.length?Array.from(t,o.default):[0,1];return(0,i.linearish)(r)};var i=e("./linear.js"),o=(e=e("./number.js"))&&e.__esModule?e:{default:e}},{"./linear.js":322,"./number.js":325}],320:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"scaleBand",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"scaleDiverging",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(n,"scaleDivergingLog",{enumerable:!0,get:function(){return b.divergingLog}}),Object.defineProperty(n,"scaleDivergingPow",{enumerable:!0,get:function(){return b.divergingPow}}),Object.defineProperty(n,"scaleDivergingSqrt",{enumerable:!0,get:function(){return b.divergingSqrt}}),Object.defineProperty(n,"scaleDivergingSymlog",{enumerable:!0,get:function(){return b.divergingSymlog}}),Object.defineProperty(n,"scaleIdentity",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"scaleImplicit",{enumerable:!0,get:function(){return u.implicit}}),Object.defineProperty(n,"scaleLinear",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"scaleLog",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"scaleOrdinal",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"scalePoint",{enumerable:!0,get:function(){return r.point}}),Object.defineProperty(n,"scalePow",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"scaleQuantile",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(n,"scaleQuantize",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(n,"scaleRadial",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(n,"scaleSequential",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(n,"scaleSequentialLog",{enumerable:!0,get:function(){return v.sequentialLog}}),Object.defineProperty(n,"scaleSequentialPow",{enumerable:!0,get:function(){return v.sequentialPow}}),Object.defineProperty(n,"scaleSequentialQuantile",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(n,"scaleSequentialSqrt",{enumerable:!0,get:function(){return v.sequentialSqrt}}),Object.defineProperty(n,"scaleSequentialSymlog",{enumerable:!0,get:function(){return v.sequentialSymlog}}),Object.defineProperty(n,"scaleSqrt",{enumerable:!0,get:function(){return c.sqrt}}),Object.defineProperty(n,"scaleSymlog",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"scaleThreshold",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(n,"scaleTime",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(n,"scaleUtc",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(n,"tickFormat",{enumerable:!0,get:function(){return x.default}});var r=M(e("./band.js")),i=_(e("./identity.js")),o=_(e("./linear.js")),s=_(e("./log.js")),l=_(e("./symlog.js")),u=M(e("./ordinal.js")),c=M(e("./pow.js")),f=_(e("./radial.js")),d=_(e("./quantile.js")),h=_(e("./quantize.js")),p=_(e("./threshold.js")),y=_(e("./time.js")),g=_(e("./utcTime.js")),v=M(e("./sequential.js")),m=_(e("./sequentialQuantile.js")),b=M(e("./diverging.js")),x=_(e("./tickFormat.js"));function _(e){return e&&e.__esModule?e:{default:e}}function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function M(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=w(t);if(t&&t.has(e))return t.get(e);var n,r,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=o?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=e[n]);return i.default=e,t&&t.set(e,i),i}},{"./band.js":315,"./diverging.js":318,"./identity.js":319,"./linear.js":322,"./log.js":323,"./ordinal.js":326,"./pow.js":327,"./quantile.js":328,"./quantize.js":329,"./radial.js":330,"./sequential.js":331,"./sequentialQuantile.js":332,"./symlog.js":333,"./threshold.js":334,"./tickFormat.js":335,"./time.js":336,"./utcTime.js":337}],321:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.initInterpolator=function(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this},n.initRange=function(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}},{}],322:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){var t=(0,r.default)();t.copy=function(){return(0,r.copy)(t,e())};i.initRange.apply(t,arguments);return l(t)},n.linearish=l;var f=e("d3-array"),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./continuous.js")),i=e("./init.js"),o=(e=e("./tickFormat.js"))&&e.__esModule?e:{default:e};function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function l(u){var c=u.domain;return u.ticks=function(e){var t=c();return(0,f.ticks)(t[0],t[t.length-1],null==e?10:e)},u.tickFormat=function(e,t){var n=c();return(0,o.default)(n[0],n[n.length-1],null==e?10:e,t)},u.nice=function(e){null==e&&(e=10);var t,n,r=c(),i=0,o=r.length-1,a=r[i],s=r[o],l=10;for(s<a&&(n=a,a=s,s=n,n=i,i=o,o=n);0<l--;){if((n=(0,f.tickIncrement)(a,s,e))===t)return r[i]=a,r[o]=s,c(r);if(0<n)a=Math.floor(a/n)*n,s=Math.ceil(s/n)*n;else{if(!(n<0))break;a=Math.ceil(a*n)/n,s=Math.floor(s*n)/n}t=n}return u},u}},{"./continuous.js":317,"./init.js":321,"./tickFormat.js":335,"d3-array":32}],323:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){var t=c((0,i.transformer)()).domain([1,10]);t.copy=function(){return(0,i.copy)(t,e()).base(t.base())};a.initRange.apply(t,arguments);return t},n.loggish=c;var p=e("d3-array"),o=e("d3-format"),r=(n=e("./nice.js"))&&n.__esModule?n:{default:n},i=e("./continuous.js"),a=e("./init.js");function s(e){return Math.log(e)}function l(e){return Math.exp(e)}function u(e){return-Math.log(-e)}function y(e){return-Math.exp(-e)}function g(e){return isFinite(e)?+("1e"+e):e<0?0:e}function v(n){return function(e,t){return-n(-e,t)}}function c(e){var c,f,i=e(s,l),d=i.domain,h=10;function t(){var t,n;return c=(n=h)===Math.E?Math.log:10===n&&Math.log10||2===n&&Math.log2||(n=Math.log(n),function(e){return Math.log(e)/n}),f=10===(t=h)?g:t===Math.E?Math.exp:function(e){return Math.pow(t,e)},d()[0]<0?(c=v(c),f=v(f),e(u,y)):e(s,l),i}return i.base=function(e){return arguments.length?(h=+e,t()):h},i.domain=function(e){return arguments.length?(d(e),t()):d()},i.ticks=function(e){var t=d(),n=t[0],r=t[t.length-1],i=r<n;i&&(n=(t=[r,n])[0],r=t[1]);var o,a,s=c(n),l=c(r),e=null==e?10:+e,u=[];if(!(h%1)&&l-s<e){if(s=Math.floor(s),l=Math.ceil(l),0<n){for(;s<=l;++s)for(o=1;o<h;++o)if(!((a=s<0?o/f(-s):o*f(s))<n)){if(r<a)break;u.push(a)}}else for(;s<=l;++s)for(o=h-1;1<=o;--o)if(!((a=0<s?o/f(-s):o*f(s))<n)){if(r<a)break;u.push(a)}2*u.length<e&&(u=(0,p.ticks)(n,r,e))}else u=(0,p.ticks)(s,l,Math.min(l-s,e)).map(f);return i?u.reverse():u},i.tickFormat=function(e,n){if(null==e&&(e=10),"function"!=typeof(n=null==n?10===h?"s":",":n)&&(h%1||null!=(n=(0,o.formatSpecifier)(n)).precision||(n.trim=!0),n=(0,o.format)(n)),e===1/0)return n;var r=Math.max(1,h*e/i.ticks().length);return function(e){var t=e/f(Math.round(c(e)));return t*h<h-.5&&(t*=h),t<=r?n(e):""}},i.nice=function(){return d((0,r.default)(d(),{floor:function(e){return f(Math.floor(c(e)))},ceil:function(e){return f(Math.ceil(c(e)))}}))},i}},{"./continuous.js":317,"./init.js":321,"./nice.js":324,"d3-array":32,"d3-format":161}],324:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){e=e.slice();var n,r=0,i=e.length-1,o=e[r],a=e[i];a<o&&(n=r,r=i,i=n,n=o,o=a,a=n);return e[r]=t.floor(o),e[i]=t.ceil(a),e}},{}],325:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return+e}},{}],326:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){var i=new s.InternMap,o=[],n=[],r=f;function a(e){var t=i.get(e);if(void 0===t){if(r!==f)return r;i.set(e,t=o.push(e)-1)}return n[t%n.length]}a.domain=function(e){if(!arguments.length)return o.slice();o=[],i=new s.InternMap;var t,n=u(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;i.has(r)||i.set(r,o.push(r)-1)}}catch(e){n.e(e)}finally{n.f()}return a};a.range=function(e){return arguments.length?(n=Array.from(e),a):n.slice()};a.unknown=function(e){return arguments.length?(r=e,a):r};a.copy=function(){return e(o,n).unknown(r)};l.initRange.apply(a,arguments);return a},n.implicit=void 0;var s=e("d3-array"),l=e("./init.js");function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=Symbol("implicit");n.implicit=f},{"./init.js":321,"d3-array":32}],327:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=c,n.powish=u,n.sqrt=function(){return c.apply(null,arguments).exponent(.5)};var r=e("./linear.js"),i=e("./continuous.js"),o=e("./init.js");function a(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function s(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function l(e){return e<0?-e*e:e*e}function u(t){var e=t(i.identity,i.identity),n=1;return e.exponent=function(e){return arguments.length?1===(n=+e)?t(i.identity,i.identity):.5===n?t(s,l):t(a(n),a(1/n)):n},(0,r.linearish)(e)}function c(){var e=u((0,i.transformer)());return e.copy=function(){return(0,i.copy)(e,c()).exponent(e.exponent())},o.initRange.apply(e,arguments),e}},{"./continuous.js":317,"./init.js":321,"./linear.js":322}],328:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){var t,i=[],n=[],r=[];function o(){var e=0,t=Math.max(1,n.length);for(r=new Array(t-1);++e<t;)r[e-1]=(0,s.quantileSorted)(i,e/t);return a}function a(e){return null==e||isNaN(e=+e)?t:n[(0,s.bisect)(r,e)]}a.invertExtent=function(e){e=n.indexOf(e);return e<0?[NaN,NaN]:[0<e?r[e-1]:i[0],e<r.length?r[e]:i[i.length-1]]};a.domain=function(e){if(!arguments.length)return i.slice();i=[];var t,n=u(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;null==r||isNaN(r=+r)||i.push(r)}}catch(e){n.e(e)}finally{n.f()}return i.sort(s.ascending),o()};a.range=function(e){return arguments.length?(n=Array.from(e),o()):n.slice()};a.unknown=function(e){return arguments.length?(t=e,a):t};a.quantiles=function(){return r.slice()};a.copy=function(){return e().domain(i).range(n).unknown(t)};return l.initRange.apply(a,arguments)};var s=e("d3-array"),l=e("./init.js");function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},{"./init.js":321,"d3-array":32}],329:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){var t,n=0,r=1,i=1,o=[.5],a=[0,1];function s(e){return null!=e&&e<=e?a[(0,u.bisect)(o,e,0,i)]:t}function l(){var e=-1;for(o=new Array(i);++e<i;)o[e]=((e+1)*r-(e-i)*n)/(i+1);return s}s.domain=function(e){return arguments.length?(e=d(e,2),n=e[0],r=e[1],n=+n,r=+r,l()):[n,r]};s.range=function(e){return arguments.length?(i=(a=Array.from(e)).length-1,l()):a.slice()};s.invertExtent=function(e){e=a.indexOf(e);return e<0?[NaN,NaN]:e<1?[n,o[0]]:i<=e?[o[i-1],r]:[o[e-1],o[e]]};s.unknown=function(e){return arguments.length&&(t=e),s};s.thresholds=function(){return o.slice()};s.copy=function(){return e().domain([n,r]).range(a).unknown(t)};return f.initRange.apply((0,c.linearish)(s),arguments)};var u=e("d3-array"),c=e("./linear.js"),f=e("./init.js");function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},{"./init.js":321,"./linear.js":322,"d3-array":32}],330:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){var t,n=(0,a.default)(),r=[0,1],i=!1;function o(e){e=f(n(e));return isNaN(e)?t:i?Math.round(e):e}o.invert=function(e){return n.invert(c(e))};o.domain=function(e){return arguments.length?(n.domain(e),o):n.domain()};o.range=function(e){return arguments.length?(n.range((r=Array.from(e,u.default)).map(c)),o):r.slice()};o.rangeRound=function(e){return o.range(e).round(!0)};o.round=function(e){return arguments.length?(i=!!e,o):i};o.clamp=function(e){return arguments.length?(n.clamp(e),o):n.clamp()};o.unknown=function(e){return arguments.length?(t=e,o):t};o.copy=function(){return e(n.domain(),r).round(i).clamp(n.clamp()).unknown(t)};s.initRange.apply(o,arguments);return(0,l.linearish)(o)};var a=r(e("./continuous.js")),s=e("./init.js"),l=e("./linear.js"),u=r(e("./number.js"));function r(e){return e&&e.__esModule?e:{default:e}}function c(e){return Math.sign(e)*e*e}function f(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}},{"./continuous.js":317,"./init.js":321,"./linear.js":322,"./number.js":325}],331:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.copy=c,n.default=function e(){var t=(0,i.linearish)(u()(d.identity));t.copy=function(){return c(t,e())};return r.initInterpolator.apply(t,arguments)},n.sequentialLog=function e(){var t=(0,o.loggish)(u()).domain([1,10]);t.copy=function(){return c(t,e()).base(t.base())};return r.initInterpolator.apply(t,arguments)},n.sequentialPow=p,n.sequentialSqrt=function(){return p.apply(null,arguments).exponent(.5)},n.sequentialSymlog=function e(){var t=(0,a.symlogish)(u());t.copy=function(){return c(t,e()).constant(t.constant())};return r.initInterpolator.apply(t,arguments)};var f=e("d3-interpolate"),d=e("./continuous.js"),r=e("./init.js"),i=e("./linear.js"),o=e("./log.js"),a=e("./symlog.js"),s=e("./pow.js");function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(){var t,n,r,i,o,a=0,s=1,l=d.identity,u=!1;function c(e){return null==e||isNaN(e=+e)?o:l(0===r?.5:(e=(i(e)-t)*r,u?Math.max(0,Math.min(1,e)):e))}function e(n){return function(e){var t;return arguments.length?(e=(t=h(e,2))[0],t=t[1],l=n(e,t),c):[l(0),l(1)]}}return c.domain=function(e){return arguments.length?(e=h(e,2),a=e[0],s=e[1],t=i(a=+a),n=i(s=+s),r=t===n?0:1/(n-t),c):[a,s]},c.clamp=function(e){return arguments.length?(u=!!e,c):u},c.interpolator=function(e){return arguments.length?(l=e,c):l},c.range=e(f.interpolate),c.rangeRound=e(f.interpolateRound),c.unknown=function(e){return arguments.length?(o=e,c):o},function(e){return t=(i=e)(a),n=e(s),r=t===n?0:1/(n-t),c}}function c(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function p(){var e=(0,s.powish)(u());return e.copy=function(){return c(e,p()).exponent(e.exponent())},r.initInterpolator.apply(e,arguments)}},{"./continuous.js":317,"./init.js":321,"./linear.js":322,"./log.js":323,"./pow.js":327,"./symlog.js":333,"d3-interpolate":210}],332:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){var i=[],n=r.identity;function o(e){if(null!=e&&!isNaN(e=+e))return n(((0,a.bisect)(i,e,1)-1)/(i.length-1))}o.domain=function(e){if(!arguments.length)return i.slice();i=[];var t,n=l(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;null==r||isNaN(r=+r)||i.push(r)}}catch(e){n.e(e)}finally{n.f()}return i.sort(a.ascending),o};o.interpolator=function(e){return arguments.length?(n=e,o):n};o.range=function(){return i.map(function(e,t){return n(t/(i.length-1))})};o.quantiles=function(n){return Array.from({length:n+1},function(e,t){return(0,a.quantile)(i,t/n)})};o.copy=function(){return e(n).domain(i)};return s.initInterpolator.apply(o,arguments)};var a=e("d3-array"),r=e("./continuous.js"),s=e("./init.js");function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},{"./continuous.js":317,"./init.js":321,"d3-array":32}],333:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){var t=l((0,i.transformer)());t.copy=function(){return(0,i.copy)(t,e()).constant(t.constant())};return o.initRange.apply(t,arguments)},n.symlogish=l;var r=e("./linear.js"),i=e("./continuous.js"),o=e("./init.js");function a(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function s(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function l(t){var n=1,e=t(a(n),s(n));return e.constant=function(e){return arguments.length?t(a(n=+e),s(n)):n},(0,r.linearish)(e)}},{"./continuous.js":317,"./init.js":321,"./linear.js":322}],334:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){var t,n=[.5],r=[0,1],i=1;function o(e){return null!=e&&e<=e?r[(0,a.bisect)(n,e,0,i)]:t}o.domain=function(e){return arguments.length?(n=Array.from(e),i=Math.min(n.length,r.length-1),o):n.slice()};o.range=function(e){return arguments.length?(r=Array.from(e),i=Math.min(n.length,r.length-1),o):r.slice()};o.invertExtent=function(e){e=r.indexOf(e);return[n[e-1],n[e]]};o.unknown=function(e){return arguments.length?(t=e,o):t};o.copy=function(){return e().domain(n).range(r).unknown(t)};return s.initRange.apply(o,arguments)};var a=e("d3-array"),s=e("./init.js")},{"./init.js":321,"d3-array":32}],335:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r){var i,o=(0,s.tickStep)(e,t,n);switch((r=(0,l.formatSpecifier)(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=(0,l.precisionPrefix)(o,a))||(r.precision=i),(0,l.formatPrefix)(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=(0,l.precisionRound)(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=(0,l.precisionFixed)(o))||(r.precision=i-2*("%"===r.type))}return(0,l.format)(r)};var s=e("d3-array"),l=e("d3-format")},{"d3-array":32,"d3-format":161}],336:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.calendar=A,n.default=function(){return o.initRange.apply(A(r.timeTicks,r.timeTickInterval,r.timeYear,r.timeMonth,r.timeWeek,r.timeDay,r.timeHour,r.timeMinute,r.timeSecond,i.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)};var r=e("d3-time"),i=e("d3-time-format"),M=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./continuous.js")),o=e("./init.js"),j=(e=e("./nice.js"))&&e.__esModule?e:{default:e};function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function k(e){return new Date(e)}function O(e){return e instanceof Date?+e:+new Date(+e)}function A(n,r,t,i,o,a,s,l,u,c){var f=(0,M.default)(),d=f.invert,h=f.domain,p=c(".%L"),y=c(":%S"),g=c("%I:%M"),v=c("%I %p"),m=c("%a %d"),b=c("%b %d"),x=c("%B"),_=c("%Y");function w(e){return(u(e)<e?p:l(e)<e?y:s(e)<e?g:a(e)<e?v:i(e)<e?o(e)<e?m:b:t(e)<e?x:_)(e)}return f.invert=function(e){return new Date(d(e))},f.domain=function(e){return arguments.length?h(Array.from(e,O)):h().map(k)},f.ticks=function(e){var t=h();return n(t[0],t[t.length-1],null==e?10:e)},f.tickFormat=function(e,t){return null==t?w:c(t)},f.nice=function(e){var t=h();return(e=!e||"function"!=typeof e.range?r(t[0],t[t.length-1],null==e?10:e):e)?h((0,j.default)(t,e)):f},f.copy=function(){return(0,M.copy)(f,A(n,r,t,i,o,a,s,l,u,c))},f}},{"./continuous.js":317,"./init.js":321,"./nice.js":324,"d3-time":399,"d3-time-format":392}],337:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return a.initRange.apply((0,o.calendar)(r.utcTicks,r.utcTickInterval,r.utcYear,r.utcMonth,r.utcWeek,r.utcDay,r.utcHour,r.utcMinute,r.utcSecond,i.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)};var r=e("d3-time"),i=e("d3-time-format"),o=e("./time.js"),a=e("./init.js")},{"./init.js":321,"./time.js":336,"d3-time":399,"d3-time-format":392}],338:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}},{}],339:[function(e,t,n){arguments[4][80][0].apply(n,arguments)},{dup:80}],340:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return(0,i.default)((0,r.default)(e).call(document.documentElement))};var r=o(e("./creator.js")),i=o(e("./select.js"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./creator.js":341,"./select.js":349}],341:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e=(0,r.default)(e);return(e.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===i.xhtml&&e.documentElement.namespaceURI===i.xhtml?e.createElement(n):e.createElementNS(t,n)}})(e)};var r=(n=e("./namespace.js"))&&n.__esModule?n:{default:n},i=e("./namespaces.js")},{"./namespace.js":345,"./namespaces.js":346}],342:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"create",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"creator",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"local",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"matcher",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"namespace",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"namespaces",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"pointer",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"pointers",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"select",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(n,"selectAll",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(n,"selection",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(n,"selector",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(n,"selectorAll",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(n,"style",{enumerable:!0,get:function(){return g.styleValue}}),Object.defineProperty(n,"window",{enumerable:!0,get:function(){return v.default}});var r=m(e("./create.js")),i=m(e("./creator.js")),o=m(e("./local.js")),a=m(e("./matcher.js")),s=m(e("./namespace.js")),l=m(e("./namespaces.js")),u=m(e("./pointer.js")),c=m(e("./pointers.js")),f=m(e("./select.js")),d=m(e("./selectAll.js")),h=m(e("./selection/index.js")),p=m(e("./selector.js")),y=m(e("./selectorAll.js")),g=e("./selection/style.js"),v=m(e("./window.js"));function m(e){return e&&e.__esModule?e:{default:e}}},{"./create.js":340,"./creator.js":341,"./local.js":343,"./matcher.js":344,"./namespace.js":345,"./namespaces.js":346,"./pointer.js":347,"./pointers.js":348,"./select.js":349,"./selectAll.js":350,"./selection/index.js":365,"./selection/style.js":385,"./selector.js":387,"./selectorAll.js":388,"./window.js":390}],343:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var r=0;function i(){return new o}function o(){this._="@"+(++r).toString(36)}o.prototype=i.prototype={constructor:o,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}}},{}],344:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.childMatcher=function(t){return function(e){return e.matches(t)}},n.default=function(e){return function(){return this.matches(e)}}},{}],345:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e+="",n=t.indexOf(":");0<=n&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1));return r.default.hasOwnProperty(t)?{space:r.default[t],local:e}:e};var r=(e=e("./namespaces.js"))&&e.__esModule?e:{default:e}},{"./namespaces.js":346}],346:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.xhtml=n.default=void 0;var r="http://www.w3.org/1999/xhtml";n.xhtml=r,n.default={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},{}],347:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){e=(0,i.default)(e),void 0===t&&(t=e.currentTarget);if(t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]};var i=(e=e("./sourceEvent.js"))&&e.__esModule?e:{default:e}},{"./sourceEvent.js":389}],348:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){e.target&&(e=(0,i.default)(e),void 0===t&&(t=e.currentTarget),e=e.touches||[e]);return Array.from(e,function(e){return(0,r.default)(e,t)})};var r=o(e("./pointer.js")),i=o(e("./sourceEvent.js"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./pointer.js":347,"./sourceEvent.js":389}],349:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return"string"==typeof e?new r.Selection([[document.querySelector(e)]],[document.documentElement]):new r.Selection([[e]],r.root)};var r=e("./selection/index.js")},{"./selection/index.js":365}],350:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return"string"==typeof e?new i.Selection([document.querySelectorAll(e)],[document.documentElement]):new i.Selection([(0,r.default)(e)],i.root)};var r=(n=e("./array.js"))&&n.__esModule?n:{default:n},i=e("./selection/index.js")},{"./array.js":338,"./selection/index.js":365}],351:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t="function"==typeof e?e:(0,r.default)(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})};var r=(e=e("../creator.js"))&&e.__esModule?e:{default:e}},{"../creator.js":341}],352:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=(0,r.default)(e);if(arguments.length<2){e=this.node();return n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))};var r=(e=e("../namespace.js"))&&e.__esModule?e:{default:e}},{"../namespace.js":345}],353:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}},{}],354:[function(e,t,n){"use strict";function a(e){return e.trim().split(/^|\s+/)}function s(e){return e.classList||new r(e)}function r(e){this._node=e,this._names=a(e.getAttribute("class")||"")}function l(e,t){for(var n=s(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function u(e,t){for(var n=s(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=a(e+"");if(arguments.length<2){for(var r=s(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?l:u)(this,e)}}:t?function(e){return function(){l(this,e)}}:function(e){return function(){u(this,e)}})(n,t))},r.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){e=this._names.indexOf(e);0<=e&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return 0<=this._names.indexOf(e)}}},{}],355:[function(e,t,n){"use strict";function r(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function i(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return this.select(e?i:r)}},{}],356:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if(!arguments.length)return Array.from(this,O);var n=t?k:j,r=this._parents,i=this._groups;"function"!=typeof e&&(e=(0,w.default)(e));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],f=i[u],d=f.length,h=function(e){return"object"===M(e)&&"length"in e?e:Array.from(e)}(e.call(c,c&&c.__data__,u,r)),p=h.length,y=s[u]=new Array(p),g=a[u]=new Array(p),d=l[u]=new Array(d);n(c,f,y,g,d,h,t);for(var v,m,b=0,x=0;b<p;++b)if(v=y[b]){for(x<=b&&(x=b+1);!(m=g[x])&&++x<p;);v._next=m||null}}return(a=new _.Selection(a,r))._enter=s,a._exit=l,a};var _=e("./index.js"),p=e("./enter.js"),w=(e=e("../constant.js"))&&e.__esModule?e:{default:e};function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t,n,r,i,o){for(var a,s=0,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new p.EnterNode(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function k(e,t,n,r,i,o,a){for(var s,l,u=new Map,c=t.length,f=o.length,d=new Array(c),h=0;h<c;++h)(s=t[h])&&(d[h]=l=a.call(s,s.__data__,h,t)+"",u.has(l)?i[h]=s:u.set(l,s));for(h=0;h<f;++h)l=a.call(e,o[h],h,o)+"",(s=u.get(l))?((r[h]=s).__data__=o[h],u.delete(l)):n[h]=new p.EnterNode(e,o[h]);for(h=0;h<c;++h)(s=t[h])&&u.get(d[h])===s&&(i[h]=s)}function O(e){return e.__data__}},{"../constant.js":339,"./enter.js":361,"./index.js":365}],357:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return arguments.length?this.property("__data__",e):this.node().__data__}},{}],358:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return r(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return r(this,e,t)}})(e,t))};var o=(e=e("../window.js"))&&e.__esModule?e:{default:e};function r(e,t,n){var r=(0,o.default)(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}},{"../window.js":390}],359:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this}},{}],360:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return!this.node()}},{}],361:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.EnterNode=o,n.default=function(){return new i.Selection(this._enter||this._groups.map(r.default),this._parents)};var r=(n=e("./sparse.js"))&&n.__esModule?n:{default:n},i=e("./index.js");function o(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}o.prototype={constructor:o,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}}},{"./index.js":365,"./sparse.js":384}],362:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return new i.Selection(this._exit||this._groups.map(r.default),this._parents)};var r=(n=e("./sparse.js"))&&n.__esModule?n:{default:n},i=e("./index.js")},{"./index.js":365,"./sparse.js":384}],363:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){"function"!=typeof e&&(e=(0,f.default)(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&e.call(o,o.__data__,u,a)&&l.push(o);return new c.Selection(r,this._parents)};var c=e("./index.js"),f=(e=e("../matcher.js"))&&e.__esModule?e:{default:e}},{"../matcher.js":344,"./index.js":365}],364:[function(e,t,n){"use strict";function r(){this.innerHTML=""}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return arguments.length?this.each(null==e?r:("function"==typeof e?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML}},{}],365:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Selection=N,n.root=n.default=void 0;var r=z(e("./select.js")),i=z(e("./selectAll.js")),o=z(e("./selectChild.js")),a=z(e("./selectChildren.js")),s=z(e("./filter.js")),l=z(e("./data.js")),u=z(e("./enter.js")),c=z(e("./exit.js")),f=z(e("./join.js")),d=z(e("./merge.js")),h=z(e("./order.js")),p=z(e("./sort.js")),y=z(e("./call.js")),g=z(e("./nodes.js")),v=z(e("./node.js")),m=z(e("./size.js")),b=z(e("./empty.js")),x=z(e("./each.js")),_=z(e("./attr.js")),w=z(e("./style.js")),M=z(e("./property.js")),j=z(e("./classed.js")),k=z(e("./text.js")),O=z(e("./html.js")),A=z(e("./raise.js")),T=z(e("./lower.js")),P=z(e("./append.js")),S=z(e("./insert.js")),E=z(e("./remove.js")),C=z(e("./clone.js")),L=z(e("./datum.js")),R=z(e("./on.js")),I=z(e("./dispatch.js")),e=z(e("./iterator.js"));function z(e){return e&&e.__esModule?e:{default:e}}var D=[null];function N(e,t){this._groups=e,this._parents=t}function F(){return new N([[document.documentElement]],D)}n.root=D,N.prototype=F.prototype=(R={constructor:N,select:r.default,selectAll:i.default,selectChild:o.default,selectChildren:a.default,filter:s.default,data:l.default,enter:u.default,exit:c.default,join:f.default,merge:d.default,selection:function(){return this},order:h.default,sort:p.default,call:y.default,nodes:g.default,node:v.default,size:m.default,empty:b.default,each:x.default,attr:_.default,style:w.default,property:M.default,classed:j.default,text:k.default,html:O.default,raise:A.default,lower:T.default,append:P.default,insert:S.default,remove:E.default,clone:C.default,datum:L.default,on:R.default,dispatch:I.default},I=Symbol.iterator,e=e.default,I in R?Object.defineProperty(R,I,{value:e,enumerable:!0,configurable:!0,writable:!0}):R[I]=e,R),n.default=F},{"./append.js":351,"./attr.js":352,"./call.js":353,"./classed.js":354,"./clone.js":355,"./data.js":356,"./datum.js":357,"./dispatch.js":358,"./each.js":359,"./empty.js":360,"./enter.js":361,"./exit.js":362,"./filter.js":363,"./html.js":364,"./insert.js":366,"./iterator.js":367,"./join.js":368,"./lower.js":369,"./merge.js":370,"./node.js":371,"./nodes.js":372,"./on.js":373,"./order.js":374,"./property.js":375,"./raise.js":376,"./remove.js":377,"./select.js":378,"./selectAll.js":379,"./selectChild.js":380,"./selectChildren.js":381,"./size.js":382,"./sort.js":383,"./style.js":385,"./text.js":386}],366:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n="function"==typeof e?e:(0,i.default)(e),r=null==t?a:"function"==typeof t?t:(0,o.default)(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})};var i=r(e("../creator.js")),o=r(e("../selector.js"));function r(e){return e&&e.__esModule?e:{default:e}}function a(){return null}},{"../creator.js":341,"../selector.js":387}],367:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var l=regeneratorRuntime.mark(r);function r(){var t,n,r,i,o,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this._groups,n=0,r=t.length;case 1:if(!(n<r)){e.next=13;break}i=t[n],o=0,a=i.length;case 3:if(!(o<a)){e.next=10;break}if(s=i[o])return e.next=7,s;e.next=7;break;case 7:++o,e.next=3;break;case 10:++n,e.next=1;break;case 13:case"end":return e.stop()}},l,this)}},{}],368:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){var r=this.enter(),i=this,o=this.exit();r="function"==typeof e?(r=e(r))&&r.selection():r.append(e+"");null!=t&&(i=(i=t(i))&&i.selection());null==n?o.remove():n(o);return r&&i?r.merge(i).order():i}},{}],369:[function(e,t,n){"use strict";function r(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return this.each(r)}},{}],370:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){for(var e=e.selection?e.selection():e,t=this._groups,n=e._groups,r=t.length,e=n.length,i=Math.min(r,e),o=new Array(r),a=0;a<i;++a)for(var s,l=t[a],u=n[a],c=l.length,f=o[a]=new Array(c),d=0;d<c;++d)(s=l[d]||u[d])&&(f[d]=s);for(;a<r;++a)o[a]=t[a];return new h.Selection(o,this._parents)};var h=e("./index.js")},{"./index.js":365}],371:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}},{}],372:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return Array.from(this)}},{}],373:[function(e,t,n){"use strict";function f(o){return function(){var e=this.__on;if(e){for(var t,n=0,r=-1,i=e.length;n<i;++n)t=e[n],o.type&&t.type!==o.type||t.name!==o.name?e[++r]=t:this.removeEventListener(t.type,t.listener,t.options);++r?e.length=r:delete this.__on}}}function d(a,s,l){return function(){var e,t,n=this.__on,r=(t=s,function(e){t.call(this,e,this.__data__)});if(n)for(var i=0,o=n.length;i<o;++i)if((e=n[i]).type===a.type&&e.name===a.name)return this.removeEventListener(e.type,e.listener,e.options),this.addEventListener(e.type,e.listener=r,e.options=l),void(e.value=s);this.addEventListener(a.type,r,l),e={type:a.type,name:a.name,value:s,listener:r,options:l},n?n.push(e):this.__on=[e]}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){var r,i,o=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return 0<=n&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?d:f,r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value}},{}],374:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];0<=--o;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this}},{}],375:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return 1<arguments.length?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]}},{}],376:[function(e,t,n){"use strict";function r(){this.nextSibling&&this.parentNode.appendChild(this)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return this.each(r)}},{}],377:[function(e,t,n){"use strict";function r(){var e=this.parentNode;e&&e.removeChild(this)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return this.each(r)}},{}],378:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){"function"!=typeof e&&(e=(0,d.default)(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],l=s.length,u=r[i]=new Array(l),c=0;c<l;++c)(o=s[c])&&(a=e.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),u[c]=a);return new f.Selection(r,this._parents)};var f=e("./index.js"),d=(e=e("../selector.js"))&&e.__esModule?e:{default:e}},{"../selector.js":387,"./index.js":365}],379:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e=("function"==typeof e?function(e){return function(){return(0,f.default)(e.apply(this,arguments))}}:(0,d.default))(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],l=s.length,u=0;u<l;++u)(a=s[u])&&(r.push(e.call(a,a.__data__,u,s)),i.push(a));return new c.Selection(r,i)};var c=e("./index.js"),f=r(e("../array.js")),d=r(e("../selectorAll.js"));function r(e){return e&&e.__esModule?e:{default:e}}},{"../array.js":338,"../selectorAll.js":388,"./index.js":365}],380:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return this.select(null==e?o:function(e){return function(){return i.call(this.children,e)}}("function"==typeof e?e:(0,r.childMatcher)(e)))};var r=e("../matcher.js"),i=Array.prototype.find;function o(){return this.firstElementChild}},{"../matcher.js":344}],381:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return this.selectAll(null==e?o:function(e){return function(){return i.call(this.children,e)}}("function"==typeof e?e:(0,r.childMatcher)(e)))};var r=e("../matcher.js"),i=Array.prototype.filter;function o(){return Array.from(this.children)}},{"../matcher.js":344}],382:[function(e,t,n){"use strict";function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e,t=0,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(this);try{for(n.s();!(e=n.n()).done;){e.value;++t}}catch(e){n.e(e)}finally{n.f()}return t}},{}],383:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(n){n=n||d;function e(e,t){return e&&t?n(e.__data__,t.__data__):!e-!t}for(var t=this._groups,r=t.length,i=new Array(r),o=0;o<r;++o){for(var a,s=t[o],l=s.length,u=i[o]=new Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(e)}return new f.Selection(i,this._parents).order()};var f=e("./index.js");function d(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}},{"./index.js":365}],384:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return new Array(e.length)}},{}],385:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){return 1<arguments.length?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(t,n,r){return function(){var e=n.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,r)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):i(this.node(),e)},n.styleValue=i;var r=(e=e("../window.js"))&&e.__esModule?e:{default:e};function i(e,t){return e.style.getPropertyValue(t)||(0,r.default)(e).getComputedStyle(e,null).getPropertyValue(t)}},{"../window.js":390}],386:[function(e,t,n){"use strict";function r(){this.textContent=""}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return arguments.length?this.each(null==e?r:("function"==typeof e?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent}},{}],387:[function(e,t,n){"use strict";function r(){}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return null==e?r:function(){return this.querySelector(e)}}},{}],388:[function(e,t,n){"use strict";function r(){return[]}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return null==e?r:function(){return this.querySelectorAll(e)}}},{}],389:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t;for(;t=e.sourceEvent;)e=t;return e}},{}],390:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}},{}],391:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=u,n.utcParse=n.utcFormat=n.timeParse=n.timeFormat=void 0;var r,i,o,a,s,l=(e=e("./locale.js"))&&e.__esModule?e:{default:e};function u(e){return r=(0,l.default)(e),n.timeFormat=i=r.format,n.timeParse=o=r.parse,n.utcFormat=a=r.utcFormat,n.utcParse=s=r.utcParse,r}n.timeFormat=i,n.timeParse=o,n.utcFormat=a,n.utcParse=s,u({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})},{"./locale.js":395}],392:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"isoFormat",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"isoParse",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"timeFormat",{enumerable:!0,get:function(){return r.timeFormat}}),Object.defineProperty(n,"timeFormatDefaultLocale",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"timeFormatLocale",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"timeParse",{enumerable:!0,get:function(){return r.timeParse}}),Object.defineProperty(n,"utcFormat",{enumerable:!0,get:function(){return r.utcFormat}}),Object.defineProperty(n,"utcParse",{enumerable:!0,get:function(){return r.utcParse}});var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./defaultLocale.js")),i=l(e("./locale.js")),o=l(e("./isoFormat.js")),s=l(e("./isoParse.js"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}},{"./defaultLocale.js":391,"./isoFormat.js":393,"./isoParse.js":394,"./locale.js":395}],393:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isoSpecifier=n.default=void 0;var r=e("./defaultLocale.js"),e="%Y-%m-%dT%H:%M:%S.%LZ";n.isoSpecifier=e;e=Date.prototype.toISOString?function(e){return e.toISOString()}:(0,r.utcFormat)(e);n.default=e},{"./defaultLocale.js":391}],394:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("./isoFormat.js"),e=e("./defaultLocale.js");r=+new Date("2000-01-01T00:00:00.000Z")?function(e){return e=new Date(e),isNaN(e)?null:e}:(0,e.utcParse)(r.isoSpecifier);n.default=r},{"./defaultLocale.js":391,"./isoFormat.js":393}],395:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var r=e.dateTime,i=e.date,o=e.time,t=e.periods,n=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,u=S(t),c=E(t),f=S(n),d=E(n),h=S(a),p=E(a),y=S(s),g=E(s),v=S(l),m=E(l),b={a:function(e){return a[e.getDay()]},A:function(e){return n[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Q,e:Q,f:re,g:he,G:ye,H:J,I:ee,j:te,L:ne,m:ie,M:oe,p:function(e){return t[+(12<=e.getHours())]},q:function(e){return 1+~~(e.getMonth()/3)},Q:De,s:Ne,S:ae,u:se,U:le,V:ue,w:ce,W:fe,x:null,X:null,y:de,Y:pe,Z:ge,"%":ze},x={a:function(e){return a[e.getUTCDay()]},A:function(e){return n[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:ve,e:ve,f:we,g:Ce,G:Re,H:me,I:be,j:xe,L:_e,m:Me,M:je,p:function(e){return t[+(12<=e.getUTCHours())]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:De,s:Ne,S:ke,u:Oe,U:Ae,V:Te,w:Pe,W:Se,x:null,X:null,y:Ee,Y:Le,Z:Ie,"%":ze},_={a:function(e,t,n){t=h.exec(t.slice(n));return t?(e.w=p.get(t[0].toLowerCase()),n+t[0].length):-1},A:function(e,t,n){t=f.exec(t.slice(n));return t?(e.w=d.get(t[0].toLowerCase()),n+t[0].length):-1},b:function(e,t,n){t=v.exec(t.slice(n));return t?(e.m=m.get(t[0].toLowerCase()),n+t[0].length):-1},B:function(e,t,n){t=y.exec(t.slice(n));return t?(e.m=g.get(t[0].toLowerCase()),n+t[0].length):-1},c:function(e,t,n){return j(e,r,t,n)},d:q,e:q,f:X,g:N,G:D,H:V,I:V,j:H,L:Y,m:U,M:G,p:function(e,t,n){t=u.exec(t.slice(n));return t?(e.p=c.get(t[0].toLowerCase()),n+t[0].length):-1},q:B,Q:$,s:K,S:W,u:L,U:R,V:I,w:C,W:z,x:function(e,t,n){return j(e,i,t,n)},X:function(e,t,n){return j(e,o,t,n)},y:N,Y:D,Z:F,"%":Z};function w(l,u){return function(e){var t,n,r,i=[],o=-1,a=0,s=l.length;for(e instanceof Date||(e=new Date(+e));++o<s;)37===l.charCodeAt(o)&&(i.push(l.slice(a,o)),null!=(n=P[t=l.charAt(++o)])?t=l.charAt(++o):n="e"===t?" ":"0",(r=u[t])&&(t=r(e,n)),i.push(t),a=o+1);return i.push(l.slice(a,o)),i.join("")}}function M(i,o){return function(e){var t,n,r=T(1900,void 0,1);if(j(r,i,e+="",0)!=e.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(!o||"Z"in r||(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(t=4<(n=(t=A(T(r.y,0,1))).getUTCDay())||0===n?k.utcMonday.ceil(t):(0,k.utcMonday)(t),t=k.utcDay.offset(t,7*(r.V-1)),r.y=t.getUTCFullYear(),r.m=t.getUTCMonth(),r.d=t.getUTCDate()+(r.w+6)%7):(t=4<(n=(t=O(T(r.y,0,1))).getDay())||0===n?k.timeMonday.ceil(t):(0,k.timeMonday)(t),t=k.timeDay.offset(t,7*(r.V-1)),r.y=t.getFullYear(),r.m=t.getMonth(),r.d=t.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?A(T(r.y,0,1)).getUTCDay():O(T(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,A(r)):O(r)}}function j(e,t,n,r){for(var i,o,a=0,s=t.length,l=n.length;a<s;){if(l<=r)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=_[i in P?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=w(i,b),b.X=w(o,b),b.c=w(r,b),x.x=w(i,x),x.X=w(o,x),x.c=w(r,x),{format:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=M(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=M(e+="",!0);return t.toString=function(){return e},t}}};var k=e("d3-time");function O(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function A(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function T(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var P={"-":"",_:" ",0:"0"},r=/^\s*\d+/,i=/^%/,o=/[\\^$*+?|[\]().{}]/g;function a(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",e=i.length;return r+(e<n?new Array(n-e+1).join(t)+i:i)}function s(e){return e.replace(o,"\\$&")}function S(e){return new RegExp("^(?:"+e.map(s).join("|")+")","i")}function E(e){return new Map(e.map(function(e,t){return[e.toLowerCase(),t]}))}function C(e,t,n){t=r.exec(t.slice(n,n+1));return t?(e.w=+t[0],n+t[0].length):-1}function L(e,t,n){t=r.exec(t.slice(n,n+1));return t?(e.u=+t[0],n+t[0].length):-1}function R(e,t,n){t=r.exec(t.slice(n,n+2));return t?(e.U=+t[0],n+t[0].length):-1}function I(e,t,n){t=r.exec(t.slice(n,n+2));return t?(e.V=+t[0],n+t[0].length):-1}function z(e,t,n){t=r.exec(t.slice(n,n+2));return t?(e.W=+t[0],n+t[0].length):-1}function D(e,t,n){t=r.exec(t.slice(n,n+4));return t?(e.y=+t[0],n+t[0].length):-1}function N(e,t,n){t=r.exec(t.slice(n,n+2));return t?(e.y=+t[0]+(68<+t[0]?1900:2e3),n+t[0].length):-1}function F(e,t,n){t=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return t?(e.Z=t[1]?0:-(t[2]+(t[3]||"00")),n+t[0].length):-1}function B(e,t,n){t=r.exec(t.slice(n,n+1));return t?(e.q=3*t[0]-3,n+t[0].length):-1}function U(e,t,n){t=r.exec(t.slice(n,n+2));return t?(e.m=t[0]-1,n+t[0].length):-1}function q(e,t,n){t=r.exec(t.slice(n,n+2));return t?(e.d=+t[0],n+t[0].length):-1}function H(e,t,n){t=r.exec(t.slice(n,n+3));return t?(e.m=0,e.d=+t[0],n+t[0].length):-1}function V(e,t,n){t=r.exec(t.slice(n,n+2));return t?(e.H=+t[0],n+t[0].length):-1}function G(e,t,n){t=r.exec(t.slice(n,n+2));return t?(e.M=+t[0],n+t[0].length):-1}function W(e,t,n){t=r.exec(t.slice(n,n+2));return t?(e.S=+t[0],n+t[0].length):-1}function Y(e,t,n){t=r.exec(t.slice(n,n+3));return t?(e.L=+t[0],n+t[0].length):-1}function X(e,t,n){t=r.exec(t.slice(n,n+6));return t?(e.L=Math.floor(t[0]/1e3),n+t[0].length):-1}function Z(e,t,n){t=i.exec(t.slice(n,n+1));return t?n+t[0].length:-1}function $(e,t,n){t=r.exec(t.slice(n));return t?(e.Q=+t[0],n+t[0].length):-1}function K(e,t,n){t=r.exec(t.slice(n));return t?(e.s=+t[0],n+t[0].length):-1}function Q(e,t){return a(e.getDate(),t,2)}function J(e,t){return a(e.getHours(),t,2)}function ee(e,t){return a(e.getHours()%12||12,t,2)}function te(e,t){return a(1+k.timeDay.count((0,k.timeYear)(e),e),t,3)}function ne(e,t){return a(e.getMilliseconds(),t,3)}function re(e,t){return ne(e,t)+"000"}function ie(e,t){return a(e.getMonth()+1,t,2)}function oe(e,t){return a(e.getMinutes(),t,2)}function ae(e,t){return a(e.getSeconds(),t,2)}function se(e){e=e.getDay();return 0===e?7:e}function le(e,t){return a(k.timeSunday.count((0,k.timeYear)(e)-1,e),t,2)}function l(e){var t=e.getDay();return 4<=t||0===t?(0,k.timeThursday)(e):k.timeThursday.ceil(e)}function ue(e,t){return e=l(e),a(k.timeThursday.count((0,k.timeYear)(e),e)+(4===(0,k.timeYear)(e).getDay()),t,2)}function ce(e){return e.getDay()}function fe(e,t){return a(k.timeMonday.count((0,k.timeYear)(e)-1,e),t,2)}function de(e,t){return a(e.getFullYear()%100,t,2)}function he(e,t){return a((e=l(e)).getFullYear()%100,t,2)}function pe(e,t){return a(e.getFullYear()%1e4,t,4)}function ye(e,t){var n=e.getDay();return a((e=4<=n||0===n?(0,k.timeThursday)(e):k.timeThursday.ceil(e)).getFullYear()%1e4,t,4)}function ge(e){e=e.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+a(e/60|0,"0",2)+a(e%60,"0",2)}function ve(e,t){return a(e.getUTCDate(),t,2)}function me(e,t){return a(e.getUTCHours(),t,2)}function be(e,t){return a(e.getUTCHours()%12||12,t,2)}function xe(e,t){return a(1+k.utcDay.count((0,k.utcYear)(e),e),t,3)}function _e(e,t){return a(e.getUTCMilliseconds(),t,3)}function we(e,t){return _e(e,t)+"000"}function Me(e,t){return a(e.getUTCMonth()+1,t,2)}function je(e,t){return a(e.getUTCMinutes(),t,2)}function ke(e,t){return a(e.getUTCSeconds(),t,2)}function Oe(e){e=e.getUTCDay();return 0===e?7:e}function Ae(e,t){return a(k.utcSunday.count((0,k.utcYear)(e)-1,e),t,2)}function u(e){var t=e.getUTCDay();return 4<=t||0===t?(0,k.utcThursday)(e):k.utcThursday.ceil(e)}function Te(e,t){return e=u(e),a(k.utcThursday.count((0,k.utcYear)(e),e)+(4===(0,k.utcYear)(e).getUTCDay()),t,2)}function Pe(e){return e.getUTCDay()}function Se(e,t){return a(k.utcMonday.count((0,k.utcYear)(e)-1,e),t,2)}function Ee(e,t){return a(e.getUTCFullYear()%100,t,2)}function Ce(e,t){return a((e=u(e)).getUTCFullYear()%100,t,2)}function Le(e,t){return a(e.getUTCFullYear()%1e4,t,4)}function Re(e,t){var n=e.getUTCDay();return a((e=4<=n||0===n?(0,k.utcThursday)(e):k.utcThursday.ceil(e)).getUTCFullYear()%1e4,t,4)}function Ie(){return"+0000"}function ze(){return"%"}function De(e){return+e}function Ne(e){return Math.floor(+e/1e3)}},{"d3-time":399}],396:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.days=void 0;var r=(r=e("./interval.js"))&&r.__esModule?r:{default:r},i=e("./duration.js");r=(0,r.default)(function(e){return e.setHours(0,0,0,0)},function(e,t){return e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i.durationMinute)/i.durationDay},function(e){return e.getDate()-1}),r=(n.default=r).range;n.days=r},{"./duration.js":397,"./interval.js":400}],397:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.durationYear=n.durationWeek=n.durationSecond=n.durationMonth=n.durationMinute=n.durationHour=n.durationDay=void 0;n.durationSecond=1e3;n.durationMinute=6e4;n.durationHour=36e5;n.durationDay=864e5;n.durationWeek=6048e5;n.durationMonth=2592e6;n.durationYear=31536e6},{}],398:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.hours=n.default=void 0;var r=(r=e("./interval.js"))&&r.__esModule?r:{default:r},i=e("./duration.js");r=(0,r.default)(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*i.durationSecond-e.getMinutes()*i.durationMinute)},function(e,t){e.setTime(+e+t*i.durationHour)},function(e,t){return(t-e)/i.durationHour},function(e){return e.getHours()}),r=(n.default=r).range;n.hours=r},{"./duration.js":397,"./interval.js":400}],399:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"timeDay",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"timeDays",{enumerable:!0,get:function(){return u.days}}),Object.defineProperty(n,"timeFriday",{enumerable:!0,get:function(){return c.friday}}),Object.defineProperty(n,"timeFridays",{enumerable:!0,get:function(){return c.fridays}}),Object.defineProperty(n,"timeHour",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"timeHours",{enumerable:!0,get:function(){return l.hours}}),Object.defineProperty(n,"timeInterval",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"timeMillisecond",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"timeMilliseconds",{enumerable:!0,get:function(){return i.milliseconds}}),Object.defineProperty(n,"timeMinute",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"timeMinutes",{enumerable:!0,get:function(){return s.minutes}}),Object.defineProperty(n,"timeMonday",{enumerable:!0,get:function(){return c.monday}}),Object.defineProperty(n,"timeMondays",{enumerable:!0,get:function(){return c.mondays}}),Object.defineProperty(n,"timeMonth",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(n,"timeMonths",{enumerable:!0,get:function(){return f.months}}),Object.defineProperty(n,"timeSaturday",{enumerable:!0,get:function(){return c.saturday}}),Object.defineProperty(n,"timeSaturdays",{enumerable:!0,get:function(){return c.saturdays}}),Object.defineProperty(n,"timeSecond",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"timeSeconds",{enumerable:!0,get:function(){return o.seconds}}),Object.defineProperty(n,"timeSunday",{enumerable:!0,get:function(){return c.sunday}}),Object.defineProperty(n,"timeSundays",{enumerable:!0,get:function(){return c.sundays}}),Object.defineProperty(n,"timeThursday",{enumerable:!0,get:function(){return c.thursday}}),Object.defineProperty(n,"timeThursdays",{enumerable:!0,get:function(){return c.thursdays}}),Object.defineProperty(n,"timeTickInterval",{enumerable:!0,get:function(){return b.timeTickInterval}}),Object.defineProperty(n,"timeTicks",{enumerable:!0,get:function(){return b.timeTicks}}),Object.defineProperty(n,"timeTuesday",{enumerable:!0,get:function(){return c.tuesday}}),Object.defineProperty(n,"timeTuesdays",{enumerable:!0,get:function(){return c.tuesdays}}),Object.defineProperty(n,"timeWednesday",{enumerable:!0,get:function(){return c.wednesday}}),Object.defineProperty(n,"timeWednesdays",{enumerable:!0,get:function(){return c.wednesdays}}),Object.defineProperty(n,"timeWeek",{enumerable:!0,get:function(){return c.sunday}}),Object.defineProperty(n,"timeWeeks",{enumerable:!0,get:function(){return c.sundays}}),Object.defineProperty(n,"timeYear",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(n,"timeYears",{enumerable:!0,get:function(){return d.years}}),Object.defineProperty(n,"utcDay",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(n,"utcDays",{enumerable:!0,get:function(){return y.utcDays}}),Object.defineProperty(n,"utcFriday",{enumerable:!0,get:function(){return g.utcFriday}}),Object.defineProperty(n,"utcFridays",{enumerable:!0,get:function(){return g.utcFridays}}),Object.defineProperty(n,"utcHour",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(n,"utcHours",{enumerable:!0,get:function(){return p.utcHours}}),Object.defineProperty(n,"utcMillisecond",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"utcMilliseconds",{enumerable:!0,get:function(){return i.milliseconds}}),Object.defineProperty(n,"utcMinute",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(n,"utcMinutes",{enumerable:!0,get:function(){return h.utcMinutes}}),Object.defineProperty(n,"utcMonday",{enumerable:!0,get:function(){return g.utcMonday}}),Object.defineProperty(n,"utcMondays",{enumerable:!0,get:function(){return g.utcMondays}}),Object.defineProperty(n,"utcMonth",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(n,"utcMonths",{enumerable:!0,get:function(){return v.utcMonths}}),Object.defineProperty(n,"utcSaturday",{enumerable:!0,get:function(){return g.utcSaturday}}),Object.defineProperty(n,"utcSaturdays",{enumerable:!0,get:function(){return g.utcSaturdays}}),Object.defineProperty(n,"utcSecond",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"utcSeconds",{enumerable:!0,get:function(){return o.seconds}}),Object.defineProperty(n,"utcSunday",{enumerable:!0,get:function(){return g.utcSunday}}),Object.defineProperty(n,"utcSundays",{enumerable:!0,get:function(){return g.utcSundays}}),Object.defineProperty(n,"utcThursday",{enumerable:!0,get:function(){return g.utcThursday}}),Object.defineProperty(n,"utcThursdays",{enumerable:!0,get:function(){return g.utcThursdays}}),Object.defineProperty(n,"utcTickInterval",{enumerable:!0,get:function(){return b.utcTickInterval}}),Object.defineProperty(n,"utcTicks",{enumerable:!0,get:function(){return b.utcTicks}}),Object.defineProperty(n,"utcTuesday",{enumerable:!0,get:function(){return g.utcTuesday}}),Object.defineProperty(n,"utcTuesdays",{enumerable:!0,get:function(){return g.utcTuesdays}}),Object.defineProperty(n,"utcWednesday",{enumerable:!0,get:function(){return g.utcWednesday}}),Object.defineProperty(n,"utcWednesdays",{enumerable:!0,get:function(){return g.utcWednesdays}}),Object.defineProperty(n,"utcWeek",{enumerable:!0,get:function(){return g.utcSunday}}),Object.defineProperty(n,"utcWeeks",{enumerable:!0,get:function(){return g.utcSundays}}),Object.defineProperty(n,"utcYear",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(n,"utcYears",{enumerable:!0,get:function(){return m.utcYears}});var r=(n=e("./interval.js"))&&n.__esModule?n:{default:n},i=_(e("./millisecond.js")),o=_(e("./second.js")),s=_(e("./minute.js")),l=_(e("./hour.js")),u=_(e("./day.js")),c=e("./week.js"),f=_(e("./month.js")),d=_(e("./year.js")),h=_(e("./utcMinute.js")),p=_(e("./utcHour.js")),y=_(e("./utcDay.js")),g=e("./utcWeek.js"),v=_(e("./utcMonth.js")),m=_(e("./utcYear.js")),b=e("./ticks.js");function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}function _(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=x(t);if(t&&t.has(e))return t.get(e);var n,r,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=o?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=e[n]);return i.default=e,t&&t.set(e,i),i}},{"./day.js":396,"./hour.js":398,"./interval.js":400,"./millisecond.js":401,"./minute.js":402,"./month.js":403,"./second.js":404,"./ticks.js":405,"./utcDay.js":406,"./utcHour.js":407,"./utcMinute.js":408,"./utcMonth.js":409,"./utcWeek.js":410,"./utcYear.js":411,"./week.js":412,"./year.js":413}],400:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(o,a,n,r){function s(e){return o(e=0===arguments.length?new Date:new Date(+e)),e}s.floor=function(e){return o(e=new Date(+e)),e};s.ceil=function(e){return o(e=new Date(e-1)),a(e,1),o(e),e};s.round=function(e){var t=s(e),n=s.ceil(e);return e-t<n-e?t:n};s.offset=function(e,t){return a(e=new Date(+e),null==t?1:Math.floor(t)),e};s.range=function(e,t,n){var r,i=[];if(e=s.ceil(e),n=null==n?1:Math.floor(n),!(e<t&&0<n))return i;for(;i.push(r=new Date(+e)),a(e,n),o(e),r<e&&e<t;);return i};s.filter=function(n){return e(function(e){if(e<=e)for(;o(e),!n(e);)e.setTime(e-1)},function(e,t){if(e<=e)if(t<0)for(;++t<=0;)for(;a(e,-1),!n(e););else for(;0<=--t;)for(;a(e,1),!n(e););})};n&&(s.count=function(e,t){return i.setTime(+e),l.setTime(+t),o(i),o(l),Math.floor(n(i,l))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&0<t?1<t?s.filter(r?function(e){return r(e)%t==0}:function(e){return s.count(0,e)%t==0}):s:null});return s};var i=new Date,l=new Date},{}],401:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.milliseconds=n.default=void 0;var r=(e=e("./interval.js"))&&e.__esModule?e:{default:e};var i=(0,r.default)(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});i.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?(0,r.default)(function(e){e.setTime(Math.floor(e/n)*n)},function(e,t){e.setTime(+e+t*n)},function(e,t){return(t-e)/n}):i:null};e=(n.default=i).range;n.milliseconds=e},{"./interval.js":400}],402:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.minutes=n.default=void 0;var r=(r=e("./interval.js"))&&r.__esModule?r:{default:r},i=e("./duration.js");r=(0,r.default)(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*i.durationSecond)},function(e,t){e.setTime(+e+t*i.durationMinute)},function(e,t){return(t-e)/i.durationMinute},function(e){return e.getMinutes()}),r=(n.default=r).range;n.minutes=r},{"./duration.js":397,"./interval.js":400}],403:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});e=(n.months=n.default=void 0,((e=e("./interval.js"))&&e.__esModule?e:{default:e}).default)(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),e=(n.default=e).range;n.months=e},{"./interval.js":400}],404:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.seconds=n.default=void 0;var r=(r=e("./interval.js"))&&r.__esModule?r:{default:r},i=e("./duration.js");r=(0,r.default)(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*i.durationSecond)},function(e,t){return(t-e)/i.durationSecond},function(e){return e.getUTCSeconds()}),r=(n.default=r).range;n.seconds=r},{"./duration.js":397,"./interval.js":400}],405:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.utcTicks=n.utcTickInterval=n.timeTicks=n.timeTickInterval=void 0;var l=e("d3-array"),u=e("./duration.js"),c=m(e("./millisecond.js")),f=m(e("./second.js")),r=m(e("./minute.js")),i=m(e("./hour.js")),o=m(e("./day.js")),a=e("./week.js"),s=m(e("./month.js")),d=m(e("./year.js")),h=m(e("./utcMinute.js")),p=m(e("./utcHour.js")),y=m(e("./utcDay.js")),g=e("./utcWeek.js"),v=m(e("./utcMonth.js"));function m(e){return e&&e.__esModule?e:{default:e}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(o,e,t,n,r,i){var a=[[f.default,1,u.durationSecond],[f.default,5,5*u.durationSecond],[f.default,15,15*u.durationSecond],[f.default,30,30*u.durationSecond],[i,1,u.durationMinute],[i,5,5*u.durationMinute],[i,15,15*u.durationMinute],[i,30,30*u.durationMinute],[r,1,u.durationHour],[r,3,3*u.durationHour],[r,6,6*u.durationHour],[r,12,12*u.durationHour],[n,1,u.durationDay],[n,2,2*u.durationDay],[t,1,u.durationWeek],[e,1,u.durationMonth],[e,3,3*u.durationMonth],[o,1,u.durationYear]];function s(e,t,n){var r=Math.abs(t-e)/n,i=(0,l.bisector)(function(e){return b(e,3)[2]}).right(a,r);if(i===a.length)return o.every((0,l.tickStep)(e/u.durationYear,t/u.durationYear,n));if(0===i)return c.default.every(Math.max((0,l.tickStep)(e,t,n),1));r=b(a[r/a[i-1][2]<a[i][2]/r?i-1:i],2),i=r[0],r=r[1];return i.every(r)}return[function(e,t,n){var r,i=t<e;return i&&(e=(r=[t,e])[0],t=r[1]),n=n&&"function"==typeof n.range?n:s(e,t,n),t=n?n.range(e,+t+1):[],i?t.reverse():t},s]}p=b(_(m(e("./utcYear.js")).default,v.default,g.utcSunday,y.default,p.default,h.default),2),h=p[0],p=p[1];n.utcTickInterval=p,n.utcTicks=h;i=b(_(d.default,s.default,a.sunday,o.default,i.default,r.default),2),r=i[0],i=i[1];n.timeTickInterval=i,n.timeTicks=r},{"./day.js":396,"./duration.js":397,"./hour.js":398,"./millisecond.js":401,"./minute.js":402,"./month.js":403,"./second.js":404,"./utcDay.js":406,"./utcHour.js":407,"./utcMinute.js":408,"./utcMonth.js":409,"./utcWeek.js":410,"./utcYear.js":411,"./week.js":412,"./year.js":413,"d3-array":32}],406:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.utcDays=n.default=void 0;var r=(r=e("./interval.js"))&&r.__esModule?r:{default:r},i=e("./duration.js");r=(0,r.default)(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/i.durationDay},function(e){return e.getUTCDate()-1}),r=(n.default=r).range;n.utcDays=r},{"./duration.js":397,"./interval.js":400}],407:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.utcHours=n.default=void 0;var r=(r=e("./interval.js"))&&r.__esModule?r:{default:r},i=e("./duration.js");r=(0,r.default)(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*i.durationHour)},function(e,t){return(t-e)/i.durationHour},function(e){return e.getUTCHours()}),r=(n.default=r).range;n.utcHours=r},{"./duration.js":397,"./interval.js":400}],408:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.utcMinutes=n.default=void 0;var r=(r=e("./interval.js"))&&r.__esModule?r:{default:r},i=e("./duration.js");r=(0,r.default)(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*i.durationMinute)},function(e,t){return(t-e)/i.durationMinute},function(e){return e.getUTCMinutes()}),r=(n.default=r).range;n.utcMinutes=r},{"./duration.js":397,"./interval.js":400}],409:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});e=(n.utcMonths=n.default=void 0,((e=e("./interval.js"))&&e.__esModule?e:{default:e}).default)(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),e=(n.default=e).range;n.utcMonths=e},{"./interval.js":400}],410:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.utcWednesdays=n.utcWednesday=n.utcTuesdays=n.utcTuesday=n.utcThursdays=n.utcThursday=n.utcSundays=n.utcSunday=n.utcSaturdays=n.utcSaturday=n.utcMondays=n.utcMonday=n.utcFridays=n.utcFriday=void 0;var r=(f=e("./interval.js"))&&f.__esModule?f:{default:f},i=e("./duration.js");function o(t){return(0,r.default)(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/i.durationWeek})}var a=o(0);n.utcSunday=a;var s=o(1);n.utcMonday=s;var l=o(2);n.utcTuesday=l;var u=o(3);n.utcWednesday=u;var c=o(4);n.utcThursday=c;var f=o(5);n.utcFriday=f;e=o(6);n.utcSaturday=e;a=a.range;n.utcSundays=a;s=s.range;n.utcMondays=s;l=l.range;n.utcTuesdays=l;u=u.range;n.utcWednesdays=u;c=c.range;n.utcThursdays=c;f=f.range;n.utcFridays=f;e=e.range;n.utcSaturdays=e},{"./duration.js":397,"./interval.js":400}],411:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.utcYears=n.default=void 0;var r=(e=e("./interval.js"))&&e.__esModule?e:{default:e};e=(0,r.default)(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});e.every=function(n){return isFinite(n=Math.floor(n))&&0<n?(0,r.default)(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*n)}):null};e=(n.default=e).range;n.utcYears=e},{"./interval.js":400}],412:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.wednesdays=n.wednesday=n.tuesdays=n.tuesday=n.thursdays=n.thursday=n.sundays=n.sunday=n.saturdays=n.saturday=n.mondays=n.monday=n.fridays=n.friday=void 0;var r=(f=e("./interval.js"))&&f.__esModule?f:{default:f},i=e("./duration.js");function o(t){return(0,r.default)(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i.durationMinute)/i.durationWeek})}var a=o(0);n.sunday=a;var s=o(1);n.monday=s;var l=o(2);n.tuesday=l;var u=o(3);n.wednesday=u;var c=o(4);n.thursday=c;var f=o(5);n.friday=f;e=o(6);n.saturday=e;a=a.range;n.sundays=a;s=s.range;n.mondays=s;l=l.range;n.tuesdays=l;u=u.range;n.wednesdays=u;c=c.range;n.thursdays=c;f=f.range;n.fridays=f;e=e.range;n.saturdays=e},{"./duration.js":397,"./interval.js":400}],413:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.years=n.default=void 0;var r=(e=e("./interval.js"))&&e.__esModule?e:{default:e};e=(0,r.default)(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});e.every=function(n){return isFinite(n=Math.floor(n))&&0<n?(0,r.default)(function(e){e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*n)}):null};e=(n.default=e).range;n.years=e},{"./interval.js":400}],414:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"interval",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"now",{enumerable:!0,get:function(){return r.now}}),Object.defineProperty(n,"timeout",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"timer",{enumerable:!0,get:function(){return r.timer}}),Object.defineProperty(n,"timerFlush",{enumerable:!0,get:function(){return r.timerFlush}});var r=e("./timer.js"),i=a(e("./timeout.js")),o=a(e("./interval.js"));function a(e){return e&&e.__esModule?e:{default:e}}},{"./interval.js":415,"./timeout.js":416,"./timer.js":417}],415:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){var o=new s.Timer,a=t;return null==t||(o._restart=o.restart,o.restart=function(n,r,i){r=+r,i=null==i?(0,s.now)():+i,o._restart(function e(t){t+=a,o._restart(e,a+=r,i),n(t)},r,i)}),o.restart(e,t,n),o};var s=e("./timer.js")},{"./timer.js":417}],416:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,n,e){var r=new i.Timer;return n=null==n?0:+n,r.restart(function(e){r.stop(),t(e+n)},n,e),r};var i=e("./timer.js")},{"./timer.js":417}],417:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Timer=v,n.now=y,n.timer=m,n.timerFlush=b;var i,o,a=0,s=0,l=0,u=1e3,c=0,f=0,d=0,h="object"===("undefined"==typeof performance?"undefined":r(performance))&&performance.now?performance:Date,p="object"===("undefined"==typeof window?"undefined":r(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function y(){return f||(p(g),f=h.now()+d)}function g(){f=0}function v(){this._call=this._time=this._next=null}function m(e,t,n){var r=new v;return r.restart(e,t,n),r}function b(){y(),++a;for(var e,t=i;t;)0<=(e=f-t._time)&&t._call.call(void 0,e),t=t._next;--a}function x(){f=(c=h.now())+d,a=s=0;try{b()}finally{a=0,function(){var e,t,n=i,r=1/0;for(;n;)n=n._call?(r>n._time&&(r=n._time),(e=n)._next):(t=n._next,n._next=null,e?e._next=t:i=t);o=e,w(r)}(),f=0}}function _(){var e=h.now(),t=e-c;u<t&&(d-=t,c=e)}function w(e){a||(s=s&&clearTimeout(s),24<e-f?(e<1/0&&(s=setTimeout(x,e-h.now()-d)),l=l&&clearInterval(l)):(l||(c=h.now(),l=setInterval(_,u)),a=1,p(x)))}v.prototype=m.prototype={constructor:v,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?y():+n)+(null==t?0:+t),this._next||o===this||(o?o._next=this:i=this,o=this),this._call=e,this._time=n,w()},stop:function(){this._call&&(this._call=null,this._time=1/0,w())}}},{}],418:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n,r,i=e.__transition;if(i)for(r in t=null==t?null:t+"",i)if((n=i[r]).state>a.SCHEDULED&&n.name===t)return new o.Transition([[e]],s,t,+r);return null};var o=e("./transition/index.js"),a=e("./transition/schedule.js"),s=[null]},{"./transition/index.js":432,"./transition/schedule.js":437}],419:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"active",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"interrupt",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"transition",{enumerable:!0,get:function(){return r.default}}),e("./selection/index.js");var r=a(e("./transition/index.js")),i=a(e("./active.js")),o=a(e("./interrupt.js"));function a(e){return e&&e.__esModule?e:{default:e}}},{"./active.js":418,"./interrupt.js":420,"./selection/index.js":421,"./transition/index.js":432}],420:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>s.STARTING&&n.state<s.ENDING,n.state=s.ENDED,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}};var s=e("./transition/schedule.js")},{"./transition/schedule.js":437}],421:[function(e,t,n){"use strict";var r=e("d3-selection"),i=o(e("./interrupt.js")),e=o(e("./transition.js"));function o(e){return e&&e.__esModule?e:{default:e}}r.selection.prototype.interrupt=i.default,r.selection.prototype.transition=e.default},{"./interrupt.js":422,"./transition.js":423,"d3-selection":342}],422:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return this.each(function(){(0,r.default)(this,e)})};var r=(e=e("../interrupt.js"))&&e.__esModule?e:{default:e}},{"../interrupt.js":420}],423:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t,n;e=e instanceof c.Transition?(t=e._id,e._name):(t=(0,c.newId)(),(n=h).time=(0,d.now)(),null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)(a=s[u])&&(0,f.default)(a,e,t,u,s,n||function(e,t){var n;for(;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}(a,t));return new c.Transition(r,this._parents,e,t)};var c=e("../transition/index.js"),f=(n=e("../transition/schedule.js"))&&n.__esModule?n:{default:n},n=e("d3-ease"),d=e("d3-timer");var h={time:null,delay:0,duration:250,ease:n.easeCubicInOut}},{"../transition/index.js":432,"../transition/schedule.js":437,"d3-ease":124,"d3-timer":414}],424:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=(0,o.namespace)(e),r="transform"===n?i.interpolateTransformSvg:s.default;return this.attrTween(e,"function"==typeof t?(n.local?function(r,i,o){var a,s,l;return function(){var e,t,n=o(this);if(null!=n)return(e=this.getAttributeNS(r.space,r.local))===(t=n+"")?null:e===a&&t===s?l:(s=t,l=i(a=e,n));this.removeAttributeNS(r.space,r.local)}}:function(r,i,o){var a,s,l;return function(){var e,t,n=o(this);if(null!=n)return(e=this.getAttribute(r))===(t=n+"")?null:e===a&&t===s?l:(s=t,l=i(a=e,n));this.removeAttribute(r)}})(n,r,(0,a.tweenValue)(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(t,n,r){var i,o,a=r+"";return function(){var e=this.getAttributeNS(t.space,t.local);return e===a?null:e===i?o:o=n(i=e,r)}}:function(t,n,r){var i,o,a=r+"";return function(){var e=this.getAttribute(t);return e===a?null:e===i?o:o=n(i=e,r)}})(n,r,t))};var i=e("d3-interpolate"),o=e("d3-selection"),a=e("./tween.js"),s=(e=e("./interpolate.js"))&&e.__esModule?e:{default:e}},{"./interpolate.js":433,"./tween.js":446,"d3-interpolate":210,"d3-selection":342}],425:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;e=(0,r.namespace)(e);return this.tween(n,(e.local?function(r,i){var o,a;function e(){var t,n,e=i.apply(this,arguments);return o=e!==a?(a=e)&&(t=r,n=e,function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}):o}return e._value=i,e}:function(r,i){var o,a;function e(){var t,n,e=i.apply(this,arguments);return o=e!==a?(a=e)&&(t=r,n=e,function(e){this.setAttribute(t,n.call(this,e))}):o}return e._value=i,e})(e,t))};var r=e("d3-selection")},{"d3-selection":342}],426:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){(0,r.init)(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){(0,r.init)(this,e).delay=t}})(t,e)):(0,r.get)(this.node(),t).delay};var r=e("./schedule.js")},{"./schedule.js":437}],427:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){(0,r.set)(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){(0,r.set)(this,e).duration=t}})(t,e)):(0,r.get)(this.node(),t).duration};var r=e("./schedule.js")},{"./schedule.js":437}],428:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){(0,r.set)(this,e).ease=t}}(t,e)):(0,r.get)(this.node(),t).ease};var r=e("./schedule.js")},{"./schedule.js":437}],429:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if("function"!=typeof e)throw new Error;return this.each(function(t,n){return function(){var e=n.apply(this,arguments);if("function"!=typeof e)throw new Error;(0,r.set)(this,t).ease=e}}(this._id,e))};var r=e("./schedule.js")},{"./schedule.js":437}],430:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var i,o,a=this,s=a._id,l=a.size();return new Promise(function(e,t){var n={value:t},r={value:function(){0==--l&&e()}};a.each(function(){var e=(0,u.set)(this,s),t=e.on;t!==i&&((o=(i=t).copy())._.cancel.push(n),o._.interrupt.push(n),o._.end.push(r)),e.on=o}),0===l&&e()})};var u=e("./schedule.js")},{"./schedule.js":437}],431:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){"function"!=typeof e&&(e=(0,c.matcher)(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&e.call(o,o.__data__,u,a)&&l.push(o);return new f.Transition(r,this._parents,this._name,this._id)};var c=e("d3-selection"),f=e("./index.js")},{"./index.js":432,"d3-selection":342}],432:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Transition=k,n.default=O,n.newId=function(){return++j};var r=e("d3-selection"),i=M(e("./attr.js")),o=M(e("./attrTween.js")),a=M(e("./delay.js")),s=M(e("./duration.js")),l=M(e("./ease.js")),u=M(e("./easeVarying.js")),c=M(e("./filter.js")),f=M(e("./merge.js")),d=M(e("./on.js")),h=M(e("./remove.js")),p=M(e("./select.js")),y=M(e("./selectAll.js")),g=M(e("./selection.js")),v=M(e("./style.js")),m=M(e("./styleTween.js")),b=M(e("./text.js")),x=M(e("./textTween.js")),_=M(e("./transition.js")),w=M(e("./tween.js")),n=M(e("./end.js"));function M(e){return e&&e.__esModule?e:{default:e}}var j=0;function k(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function O(e){return(0,r.selection)().transition(e)}var e=r.selection.prototype;k.prototype=O.prototype=(u={constructor:k,select:p.default,selectAll:y.default,selectChild:e.selectChild,selectChildren:e.selectChildren,filter:c.default,merge:f.default,selection:g.default,transition:_.default,call:e.call,nodes:e.nodes,node:e.node,size:e.size,empty:e.empty,each:e.each,on:d.default,attr:i.default,attrTween:o.default,style:v.default,styleTween:m.default,text:b.default,textTween:x.default,remove:h.default,tween:w.default,delay:a.default,duration:s.default,ease:l.default,easeVarying:u.default,end:n.default},n=Symbol.iterator,e=e[Symbol.iterator],n in u?Object.defineProperty(u,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):u[n]=e,u)},{"./attr.js":424,"./attrTween.js":425,"./delay.js":426,"./duration.js":427,"./ease.js":428,"./easeVarying.js":429,"./end.js":430,"./filter.js":431,"./merge.js":434,"./on.js":435,"./remove.js":436,"./select.js":438,"./selectAll.js":439,"./selection.js":440,"./style.js":441,"./styleTween.js":442,"./text.js":443,"./textTween.js":444,"./transition.js":445,"./tween.js":446,"d3-selection":342}],433:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n;return("number"==typeof t?i.interpolateNumber:t instanceof r.color?i.interpolateRgb:(n=(0,r.color)(t))?(t=n,i.interpolateRgb):i.interpolateString)(e,t)};var r=e("d3-color"),i=e("d3-interpolate")},{"d3-color":87,"d3-interpolate":210}],434:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,e=n.length,i=Math.min(r,e),o=new Array(r),a=0;a<i;++a)for(var s,l=t[a],u=n[a],c=l.length,f=o[a]=new Array(c),d=0;d<c;++d)(s=l[d]||u[d])&&(f[d]=s);for(;a<r;++a)o[a]=t[a];return new h.Transition(o,this._parents,this._name,this._id)};var h=e("./index.js")},{"./index.js":432}],435:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=this._id;return arguments.length<2?(0,l.get)(this.node(),n).on.on(e):this.each(function(n,r,i){var o,a,s=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return!(e=0<=t?e.slice(0,t):e)||"start"===e})}(r)?l.init:l.set;return function(){var e=s(this,n),t=e.on;t!==o&&(a=(o=t).copy()).on(r,i),e.on=a}}(n,e,t))};var l=e("./schedule.js")},{"./schedule.js":437}],436:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return this.on("end.remove",function(n){return function(){var e,t=this.parentNode;for(e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}}(this._id))}},{}],437:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.STARTING=n.STARTED=n.SCHEDULED=n.RUNNING=n.ENDING=n.ENDED=n.CREATED=void 0,n.default=function(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(o,a,s){var l,u=o.__transition;function c(e){var t,n,r,i;if(s.state!==p)return d();for(t in u)if((i=u[t]).name===s.name){if(i.state===g)return(0,h.timeout)(c);i.state===v?(i.state=b,i.timer.stop(),i.on.call("interrupt",o,o.__data__,i.index,i.group),delete u[t]):+t<a&&(i.state=b,i.timer.stop(),i.on.call("cancel",o,o.__data__,i.index,i.group),delete u[t])}if((0,h.timeout)(function(){s.state===g&&(s.state=v,s.timer.restart(f,s.delay,s.time),f(e))}),s.state=y,s.on.call("start",o,o.__data__,s.index,s.group),s.state===y){for(s.state=g,l=new Array(r=s.tween.length),t=0,n=-1;t<r;++t)(i=s.tween[t].value.call(o,o.__data__,s.index,s.group))&&(l[++n]=i);l.length=n+1}}function f(e){for(var t=e<s.duration?s.ease.call(null,e/s.duration):(s.timer.restart(d),s.state=m,1),n=-1,r=l.length;++n<r;)l[n].call(o,t);s.state===m&&(s.on.call("end",o,o.__data__,s.index,s.group),d())}function d(){for(var e in s.state=b,s.timer.stop(),delete u[a],u)return;delete o.__transition}(u[a]=s).timer=(0,h.timer)(function(e){s.state=p,s.timer.restart(c,s.delay,s.time),s.delay<=e&&c(e-s.delay)},0,s.time)}(e,n,{name:t,index:r,group:i,on:s,tween:l,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:u})},n.get=i,n.init=function(e,t){t=i(e,t);if(t.state>u)throw new Error("too late; already scheduled");return t},n.set=function(e,t){t=i(e,t);if(t.state>g)throw new Error("too late; already running");return t};var r=e("d3-dispatch"),h=e("d3-timer"),s=(0,r.dispatch)("start","end","cancel","interrupt"),l=[],u=0;n.CREATED=u;var p=1;n.SCHEDULED=p;var y=2;n.STARTING=y;var g=3;n.STARTED=g;var v=4;n.RUNNING=v;var m=5;n.ENDING=m;var b=6;function i(e,t){e=e.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}n.ENDED=b},{"d3-dispatch":106,"d3-timer":414}],438:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=(0,h.selector)(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,l,u=r[a],c=u.length,f=o[a]=new Array(c),d=0;d<c;++d)(s=u[d])&&(l=e.call(s,s.__data__,d,u))&&("__data__"in s&&(l.__data__=s.__data__),f[d]=l,(0,y.default)(f[d],t,n,d,f,(0,y.get)(s,n)));return new p.Transition(o,this._parents,t,n)};var h=e("d3-selection"),p=e("./index.js"),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./schedule.js"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}},{"./index.js":432,"./schedule.js":437,"d3-selection":342}],439:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=(0,v.selectorAll)(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,u=r[s],c=u.length,f=0;f<c;++f)if(l=u[f]){for(var d,h=e.call(l,l.__data__,f,u),p=(0,b.get)(l,n),y=0,g=h.length;y<g;++y)(d=h[y])&&(0,b.default)(d,t,n,y,h,p);o.push(h),a.push(l)}return new m.Transition(o,a,t,n)};var v=e("d3-selection"),m=e("./index.js"),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./schedule.js"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}},{"./index.js":432,"./schedule.js":437,"d3-selection":342}],440:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return new r(this._groups,this._parents)};var r=e("d3-selection").selection.prototype.constructor},{"d3-selection":342}],441:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){var r="transform"==(e+="")?i.interpolateTransformCss:a.default;return null==t?this.styleTween(e,function(n,r){var i,o,a;return function(){var e=(0,u.style)(this,n),t=(this.style.removeProperty(n),(0,u.style)(this,n));return e===t?null:e===i&&t===o?a:a=r(i=e,o=t)}}(e,r)).on("end.style."+e,d(e)):"function"==typeof t?this.styleTween(e,function(r,i,o){var a,s,l;return function(){var e=(0,u.style)(this,r),t=o(this),n=t+"";return null==t&&(this.style.removeProperty(r),n=t=(0,u.style)(this,r)),e===n?null:e===a&&n===s?l:(s=n,l=i(a=e,t))}}(e,r,(0,o.tweenValue)(this,"style."+e,t))).each(function(r,i){var o,a,s,l,u="style."+i,c="end."+u;return function(){var e=(0,f.set)(this,r),t=e.on,n=null==e.value[u]?l=l||d(i):void 0;t===o&&s===n||(a=(o=t).copy()).on(c,s=n),e.on=a}}(this._id,e)):this.styleTween(e,function(t,n,r){var i,o,a=r+"";return function(){var e=(0,u.style)(this,t);return e===a?null:e===i?o:o=n(i=e,r)}}(e,r,t),n).on("end.style."+e,null)};var i=e("d3-interpolate"),u=e("d3-selection"),f=e("./schedule.js"),o=e("./tween.js"),a=(e=e("./interpolate.js"))&&e.__esModule?e:{default:e};function d(e){return function(){this.style.removeProperty(e)}}},{"./interpolate.js":433,"./schedule.js":437,"./tween.js":446,"d3-interpolate":210,"d3-selection":342}],442:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(i,o,a){var s,l;function e(){var t,n,r,e=o.apply(this,arguments);return s=e!==l?(l=e)&&(t=i,n=e,r=a,function(e){this.style.setProperty(t,n.call(this,e),r)}):s}return e._value=o,e}(e,t,null==n?"":n))}},{}],443:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return this.tween("text","function"==typeof e?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}((0,r.tweenValue)(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))};var r=e("./tween.js")},{"./tween.js":446}],444:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(n){var r,i;function e(){var t,e=n.apply(this,arguments);return r=e!==i?(i=e)&&(t=e,function(e){this.textContent=t.call(this,e)}):r}return e._value=n,e}(e))}},{}],445:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){for(var e=this._name,t=this._id,n=(0,f.newId)(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s,l=r[o],u=l.length,c=0;c<u;++c)(a=l[c])&&(s=(0,d.get)(a,t),(0,d.default)(a,e,n,c,l,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease}));return new f.Transition(r,this._parents,e,n)};var f=e("./index.js"),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./schedule.js"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}},{"./index.js":432,"./schedule.js":437}],446:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=(0,c.get)(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?function(i,o){var a,s;return function(){var e=(0,c.set)(this,i),t=e.tween;if(t!==a)for(var n=0,r=(s=a=t).length;n<r;++n)if(s[n].name===o){(s=s.slice()).splice(n,1);break}e.tween=s}}:function(o,a,s){var l,u;if("function"!=typeof s)throw new Error;return function(){var e=(0,c.set)(this,o),t=e.tween;if(t!==l){u=(l=t).slice();for(var n={name:a,value:s},r=0,i=u.length;r<i;++r)if(u[r].name===a){u[r]=n;break}r===i&&u.push(n)}e.tween=u}})(n,e,t))},n.tweenValue=function(e,t,n){var r=e._id;return e.each(function(){var e=(0,c.set)(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return(0,c.get)(e,r).value[t]}};var c=e("./schedule.js")},{"./schedule.js":437}],447:[function(e,t,n){arguments[4][74][0].apply(n,arguments)},{dup:74}],448:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=t.sourceEvent,r=t.target,i=t.transform,t=t.dispatch;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:t}})}},{}],449:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"ZoomTransform",{enumerable:!0,get:function(){return i.Transform}}),Object.defineProperty(n,"zoom",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"zoomIdentity",{enumerable:!0,get:function(){return i.identity}}),Object.defineProperty(n,"zoomTransform",{enumerable:!0,get:function(){return i.default}});var r=(n=e("./zoom.js"))&&n.__esModule?n:{default:n},i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./transform.js"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}},{"./transform.js":451,"./zoom.js":452}],450:[function(e,t,n){arguments[4][77][0].apply(n,arguments)},{dup:77}],451:[function(e,t,n){"use strict";function r(e,t,n){this.k=e,this.x=t,this.y=n}Object.defineProperty(n,"__esModule",{value:!0}),n.Transform=r,n.default=o,n.identity=void 0,r.prototype={constructor:r,scale:function(e){return 1===e?this:new r(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new r(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var i=new r(1,0,0);function o(e){for(;!e.__zoom;)if(!(e=e.parentNode))return i;return e.__zoom}n.identity=i,o.prototype=r.prototype},{}],452:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var f,d,c,h=B,p=U,y=G,l=H,t=V,u=[0,1/0],g=[[-1/0,-1/0],[1/0,1/0]],v=250,m=L.interpolateZoom,n=(0,E.dispatch)("start","zoom","end"),b=500,x=150,_=0,w=10;function M(e){e.property("__zoom",q).on("wheel.zoom",i,{passive:!1}).on("mousedown.zoom",o).on("dblclick.zoom",a).filter(t).on("touchstart.zoom",s).on("touchmove.zoom",P).on("touchend.zoom touchcancel.zoom",S).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function j(e,t){return(t=Math.max(u[0],Math.min(u[1],t)))===e.k?e:new N.Transform(t,e.x,e.y)}function k(e,t,n){var r=t[0]-n[0]*e.k,n=t[1]-n[1]*e.k;return r===e.x&&n===e.y?e:new N.Transform(e.k,r,n)}function O(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function A(e,n,l,u){e.on("start.zoom",function(){T(this,arguments).event(u).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(u).end()}).tween("zoom",function(){var e=arguments,r=T(this,e).event(u),t=p.apply(this,e),i=null==l?O(t):"function"==typeof l?l.apply(this,e):l,o=Math.max(t[1][0]-t[0][0],t[1][1]-t[0][1]),t=this.__zoom,a="function"==typeof n?n.apply(this,e):n,s=m(t.invert(i).concat(o/t.k),a.invert(i).concat(o/a.k));return function(e){var t,n;e=1===e?a:(t=s(e),n=o/t[2],new N.Transform(n,i[0]-t[0]*n,i[1]-t[1]*n)),r.zoom(null,e)}})}function T(e,t,n){return!n&&e.__zooming||new r(e,t)}function r(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=p.apply(e,t),this.taps=0}function i(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(h.apply(this,arguments)){var i=T(this,n).event(e),o=this.__zoom,a=Math.max(u[0],Math.min(u[1],o.k*Math.pow(2,l.apply(this,arguments)))),s=(0,R.pointer)(e);if(i.wheel)i.mouse[0][0]===s[0]&&i.mouse[0][1]===s[1]||(i.mouse[1]=o.invert(i.mouse[0]=s)),clearTimeout(i.wheel);else{if(o.k===a)return;i.mouse=[s,o.invert(s)],(0,I.interrupt)(this),i.start()}(0,F.default)(e),i.wheel=setTimeout(function(){i.wheel=null,i.end()},x),i.zoom("mouse",y(k(j(o,a),i.mouse[0],i.mouse[1]),i.extent,g))}}function o(e){for(var r,i,t,n,o,a,s=arguments.length,l=new Array(1<s?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];!c&&h.apply(this,arguments)&&(r=e.currentTarget,i=T(this,l,!0).event(e),t=(0,R.select)(e.view).on("mousemove.zoom",function(e){{var t,n;(0,F.default)(e),i.moved||(t=e.clientX-o,n=e.clientY-a,i.moved=_<t*t+n*n)}i.event(e).zoom("mouse",y(k(i.that.__zoom,i.mouse[0]=(0,R.pointer)(e,r),i.mouse[1]),i.extent,g))},!0).on("mouseup.zoom",function(e){t.on("mousemove.zoom mouseup.zoom",null),(0,C.dragEnable)(e.view,i.moved),(0,F.default)(e),i.event(e).end()},!0),n=(0,R.pointer)(e,r),o=e.clientX,a=e.clientY,(0,C.dragDisable)(e.view),(0,F.nopropagation)(e),i.mouse=[n,this.__zoom.invert(n)],(0,I.interrupt)(this),i.start())}function a(e){for(var t,n,r,i,o=arguments.length,a=new Array(1<o?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];h.apply(this,arguments)&&(t=this.__zoom,n=(0,R.pointer)(e.changedTouches?e.changedTouches[0]:e,this),i=t.invert(n),r=t.k*(e.shiftKey?.5:2),i=y(k(j(t,r),n,i),p.apply(this,a),g),(0,F.default)(e),0<v?(0,R.select)(this).transition().duration(v).call(A,i,n,e):(0,R.select)(this).call(M.transform,i,n,e))}function s(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(h.apply(this,arguments)){var i,o,a,s,l=e.touches,u=l.length,c=T(this,n,e.changedTouches.length===u).event(e);for((0,F.nopropagation)(e),o=0;o<u;++o)a=l[o],s=[s=(0,R.pointer)(a,this),this.__zoom.invert(s),a.identifier],c.touch0?c.touch1||c.touch0[2]===s[2]||(c.touch1=s,c.taps=0):(c.touch0=s,i=!0,c.taps=1+!!f);f=f&&clearTimeout(f),i&&(c.taps<2&&(d=s[0],f=setTimeout(function(){f=null},b)),(0,I.interrupt)(this),c.start())}}function P(e){if(this.__zooming){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o=T(this,n).event(e),a=e.changedTouches,s=a.length;for((0,F.default)(e),i=0;i<s;++i)h=a[i],p=(0,R.pointer)(h,this),o.touch0&&o.touch0[2]===h.identifier?o.touch0[0]=p:o.touch1&&o.touch1[2]===h.identifier&&(o.touch1[0]=p);if(h=o.that.__zoom,o.touch1)var l=o.touch0[0],u=o.touch0[1],c=o.touch1[0],f=o.touch1[1],d=(d=c[0]-l[0])*d+(d=c[1]-l[1])*d,e=(e=f[0]-u[0])*e+(e=f[1]-u[1])*e,h=j(h,Math.sqrt(d/e)),p=[(l[0]+c[0])/2,(l[1]+c[1])/2],f=[(u[0]+f[0])/2,(u[1]+f[1])/2];else{if(!o.touch0)return;p=o.touch0[0],f=o.touch0[1]}o.zoom("touch",y(k(h,p,f),o.extent,g))}}function S(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.__zooming){var i,o,a=T(this,n).event(e),s=e.changedTouches,l=s.length;for((0,F.nopropagation)(e),c&&clearTimeout(c),c=setTimeout(function(){c=null},b),i=0;i<l;++i)o=s[i],a.touch0&&a.touch0[2]===o.identifier?delete a.touch0:a.touch1&&a.touch1[2]===o.identifier&&delete a.touch1;a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0?a.touch0[1]=this.__zoom.invert(a.touch0[0]):(a.end(),2===a.taps&&(o=(0,R.pointer)(o,this),Math.hypot(d[0]-o[0],d[1]-o[1])<w&&((e=(0,R.select)(this).on("dblclick.zoom"))&&e.apply(this,arguments))))}}return M.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property("__zoom",q),e!==i?A(e,t,n,r):i.interrupt().each(function(){T(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},M.scaleBy=function(e,t,n,r){M.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)},n,r)},M.scaleTo=function(e,o,a,t){M.transform(e,function(){var e=p.apply(this,arguments),t=this.__zoom,n=null==a?O(e):"function"==typeof a?a.apply(this,arguments):a,r=t.invert(n),i="function"==typeof o?o.apply(this,arguments):o;return y(k(j(t,i),n,r),e,g)},a,t)},M.translateBy=function(e,t,n,r){M.transform(e,function(){return y(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),p.apply(this,arguments),g)},null,r)},M.translateTo=function(e,r,i,o,t){M.transform(e,function(){var e=p.apply(this,arguments),t=this.__zoom,n=null==o?O(e):"function"==typeof o?o.apply(this,arguments):o;return y(N.identity.translate(n[0],n[1]).scale(t.k).translate("function"==typeof r?-r.apply(this,arguments):-r,"function"==typeof i?-i.apply(this,arguments):-i),e,g)},o,t)},r.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this).emit("start"),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=(0,R.select)(this.that).datum();n.call(e,this.that,new D.default(e,{sourceEvent:this.sourceEvent,target:M,type:e,transform:this.that.__zoom,dispatch:n}),t)}},M.wheelDelta=function(e){return arguments.length?(l="function"==typeof e?e:(0,z.default)(+e),M):l},M.filter=function(e){return arguments.length?(h="function"==typeof e?e:(0,z.default)(!!e),M):h},M.touchable=function(e){return arguments.length?(t="function"==typeof e?e:(0,z.default)(!!e),M):t},M.extent=function(e){return arguments.length?(p="function"==typeof e?e:(0,z.default)([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),M):p},M.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],M):[u[0],u[1]]},M.translateExtent=function(e){return arguments.length?(g[0][0]=+e[0][0],g[1][0]=+e[1][0],g[0][1]=+e[0][1],g[1][1]=+e[1][1],M):[[g[0][0],g[0][1]],[g[1][0],g[1][1]]]},M.constrain=function(e){return arguments.length?(y=e,M):y},M.duration=function(e){return arguments.length?(v=+e,M):v},M.interpolate=function(e){return arguments.length?(m=e,M):m},M.on=function(){var e=n.on.apply(n,arguments);return e===n?M:e},M.clickDistance=function(e){return arguments.length?(_=(e=+e)*e,M):Math.sqrt(_)},M.tapDistance=function(e){return arguments.length?(w=+e,M):w},M};var E=e("d3-dispatch"),C=e("d3-drag"),L=e("d3-interpolate"),R=e("d3-selection"),I=e("d3-transition"),z=r(e("./constant.js")),D=r(e("./event.js")),N=e("./transform.js"),F=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./noevent.js"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function r(e){return e&&e.__esModule?e:{default:e}}function B(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function U(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function q(){return this.__zoom||N.identity}function H(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function V(){return navigator.maxTouchPoints||"ontouchstart"in this}function G(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],n=e.invertY(t[1][1])-n[1][1];return e.translate(r<i?(r+i)/2:Math.min(0,r)||Math.max(0,i),o<n?(o+n)/2:Math.min(0,o)||Math.max(0,n))}},{"./constant.js":447,"./event.js":448,"./noevent.js":450,"./transform.js":451,"d3-dispatch":106,"d3-drag":110,"d3-interpolate":210,"d3-selection":342,"d3-transition":419}],453:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.areaStream=n.areaRingSum=void 0,n.default=function(e){return p=new r.Adder,(0,o.default)(e,y),2*p};var r=e("d3-array"),s=e("./math.js"),i=a(e("./noop.js")),o=a(e("./stream.js"));function a(e){return e&&e.__esModule?e:{default:e}}var l=new r.Adder;n.areaRingSum=l;var u,c,f,d,h,p=new r.Adder,y={point:i.default,lineStart:i.default,lineEnd:i.default,polygonStart:function(){n.areaRingSum=l=new r.Adder,y.lineStart=g,y.lineEnd=v},polygonEnd:function(){var e=+l;p.add(e<0?s.tau+e:e),this.lineStart=this.lineEnd=this.point=i.default},sphere:function(){p.add(s.tau)}};function g(){y.point=m}function v(){b(u,c)}function m(e,t){y.point=b,u=e,c=t,e*=s.radians,t*=s.radians,f=e,d=(0,s.cos)(t=t/2+s.quarterPi),h=(0,s.sin)(t)}function b(e,t){e*=s.radians,t=(t*=s.radians)/2+s.quarterPi;var n=e-f,r=0<=n?1:-1,i=r*n,o=(0,s.cos)(t),a=(0,s.sin)(t),n=h*a,t=d*o+n*(0,s.cos)(i),i=n*r*(0,s.sin)(i);l.add((0,s.atan2)(i,t)),f=e,d=o,h=a}n.areaStream=y},{"./math.js":475,"./noop.js":476,"./stream.js":509,"d3-array":32}],454:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t,n,r,i,o,a,s;if(f=c=-(l=u=1/0),p=[],(0,m.default)(e,b),n=p.length){for(p.sort(T),t=1,r=p[0],o=[r];t<n;++t)i=p[t],P(r,i[0])||P(r,i[1])?(A(r[0],i[1])>A(r[0],r[1])&&(r[1]=i[1]),A(i[0],r[1])>A(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(s=A(r[1],i[0]))>a&&(a=s,l=i[0],c=r[1])}return p=y=null,l===1/0||u===1/0?[[NaN,NaN],[NaN,NaN]]:[[l,u],[c,f]]};var l,u,c,f,d,r,i,h,o,p,y,a=e("d3-array"),s=e("./area.js"),g=e("./cartesian.js"),v=e("./math.js"),m=(e=e("./stream.js"))&&e.__esModule?e:{default:e};var b={point:x,lineStart:w,lineEnd:M,polygonStart:function(){b.point=j,b.lineStart=k,b.lineEnd=O,o=new a.Adder,s.areaStream.polygonStart()},polygonEnd:function(){s.areaStream.polygonEnd(),b.point=x,b.lineStart=w,b.lineEnd=M,s.areaRingSum<0?(l=-(c=180),u=-(f=90)):o>v.epsilon?f=90:o<-v.epsilon&&(u=-90),y[0]=l,y[1]=c},sphere:function(){l=-(c=180),u=-(f=90)}};function x(e,t){p.push(y=[l=e,c=e]),t<u&&(u=t),f<t&&(f=t)}function _(e,t){var n,r,i,o,a,s=(0,g.cartesian)([e*v.radians,t*v.radians]);h?(r=[(i=(0,g.cartesianCross)(h,s))[1],-i[0],0],n=(0,g.cartesianCross)(r,i),(0,g.cartesianNormalizeInPlace)(n),n=(0,g.spherical)(n),a=e-d,i=n[0]*v.degrees*(r=0<a?1:-1),(a=180<(0,v.abs)(a))^(r*d<i&&i<r*e)?(o=n[1]*v.degrees,f<o&&(f=o)):a^(r*d<(i=(i+360)%360-180)&&i<r*e)?(o=-n[1]*v.degrees)<u&&(u=o):(t<u&&(u=t),f<t&&(f=t)),a?e<d?A(l,e)>A(l,c)&&(c=e):A(e,c)>A(l,c)&&(l=e):l<=c?(e<l&&(l=e),c<e&&(c=e)):d<e?A(l,e)>A(l,c)&&(c=e):A(e,c)>A(l,c)&&(l=e)):p.push(y=[l=e,c=e]),t<u&&(u=t),f<t&&(f=t),h=s,d=e}function w(){b.point=_}function M(){y[0]=l,y[1]=c,b.point=x,h=null}function j(e,t){var n;h?(n=e-d,o.add(180<(0,v.abs)(n)?n+(0<n?360:-360):n)):(r=e,i=t),s.areaStream.point(e,t),_(e,t)}function k(){s.areaStream.lineStart()}function O(){j(r,i),s.areaStream.lineEnd(),(0,v.abs)(o)>v.epsilon&&(l=-(c=180)),y[0]=l,y[1]=c,h=null}function A(e,t){return(t-=e)<0?t+360:t}function T(e,t){return e[0]-t[0]}function P(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}},{"./area.js":453,"./cartesian.js":455,"./math.js":475,"./stream.js":509,"d3-array":32}],455:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.cartesian=function(e){var t=e[0],n=e[1],e=(0,r.cos)(n);return[e*(0,r.cos)(t),e*(0,r.sin)(t),(0,r.sin)(n)]},n.cartesianAddInPlace=function(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]},n.cartesianCross=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},n.cartesianDot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},n.cartesianNormalizeInPlace=function(e){var t=(0,r.sqrt)(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t},n.cartesianScale=function(e,t){return[e[0]*t,e[1]*t,e[2]*t]},n.spherical=function(e){return[(0,r.atan2)(e[1],e[0]),(0,r.asin)(e[2])]};var r=e("./math.js")},{"./math.js":475}],456:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){i=l=o=a=s=u=c=f=0,d=new b.Adder,h=new b.Adder,p=new b.Adder,(0,_.default)(e,M);var t=+d,n=+h,r=+p,e=(0,x.hypot)(t,n,r);if(e<x.epsilon2&&(t=u,n=c,r=f,l<x.epsilon&&(t=o,n=a,r=s),(e=(0,x.hypot)(t,n,r))<x.epsilon2))return[NaN,NaN];return[(0,x.atan2)(n,t)*x.degrees,(0,x.asin)(r/e)*x.degrees]};var i,l,o,a,s,u,c,f,d,h,p,r,y,g,v,m,b=e("d3-array"),x=e("./math.js"),n=w(e("./noop.js")),_=w(e("./stream.js"));function w(e){return e&&e.__esModule?e:{default:e}}var M={sphere:n.default,point:j,lineStart:O,lineEnd:P,polygonStart:function(){M.lineStart=S,M.lineEnd=E},polygonEnd:function(){M.lineStart=O,M.lineEnd=P}};function j(e,t){e*=x.radians,t*=x.radians;var n=(0,x.cos)(t);k(n*(0,x.cos)(e),n*(0,x.sin)(e),(0,x.sin)(t))}function k(e,t,n){o+=(e-o)/++i,a+=(t-a)/i,s+=(n-s)/i}function O(){M.point=A}function A(e,t){e*=x.radians,t*=x.radians;var n=(0,x.cos)(t);g=n*(0,x.cos)(e),v=n*(0,x.sin)(e),m=(0,x.sin)(t),M.point=T,k(g,v,m)}function T(e,t){e*=x.radians,t*=x.radians;var n=(0,x.cos)(t),r=n*(0,x.cos)(e),n=n*(0,x.sin)(e),e=(0,x.sin)(t),t=(0,x.atan2)((0,x.sqrt)((t=v*e-m*n)*t+(t=m*r-g*e)*t+(t=g*n-v*r)*t),g*r+v*n+m*e);l+=t,u+=t*(g+(g=r)),c+=t*(v+(v=n)),f+=t*(m+(m=e)),k(g,v,m)}function P(){M.point=j}function S(){M.point=C}function E(){L(r,y),M.point=j}function C(e,t){r=e,y=t,e*=x.radians,t*=x.radians,M.point=L;var n=(0,x.cos)(t);g=n*(0,x.cos)(e),v=n*(0,x.sin)(e),m=(0,x.sin)(t),k(g,v,m)}function L(e,t){e*=x.radians,t*=x.radians;var n=(0,x.cos)(t),r=n*(0,x.cos)(e),i=n*(0,x.sin)(e),o=(0,x.sin)(t),a=v*o-m*i,s=m*r-g*o,n=g*i-v*r,e=(0,x.hypot)(a,s,n),t=(0,x.asin)(e),e=e&&-t/e;d.add(e*a),h.add(e*s),p.add(e*n),l+=t,u+=t*(g+(g=r)),c+=t*(v+(v=i)),f+=t*(m+(m=o)),k(g,v,m)}},{"./math.js":475,"./noop.js":476,"./stream.js":509,"d3-array":32}],457:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.circleStream=h,n.default=function(){var r,i,o=(0,u.default)([0,0]),a=(0,u.default)(90),s=(0,u.default)(6),l={point:function(e,t){r.push(e=i(e,t)),e[0]*=d.degrees,e[1]*=d.degrees}};function t(){var e=o.apply(this,arguments),t=a.apply(this,arguments)*d.radians,n=s.apply(this,arguments)*d.radians;return r=[],i=(0,c.rotateRadians)(-e[0]*d.radians,-e[1]*d.radians,0).invert,h(l,t,n,1),e={type:"Polygon",coordinates:[r]},r=i=null,e}return t.center=function(e){return arguments.length?(o="function"==typeof e?e:(0,u.default)([+e[0],+e[1]]),t):o},t.radius=function(e){return arguments.length?(a="function"==typeof e?e:(0,u.default)(+e),t):a},t.precision=function(e){return arguments.length?(s="function"==typeof e?e:(0,u.default)(+e),t):s},t};var f=e("./cartesian.js"),u=(n=e("./constant.js"))&&n.__esModule?n:{default:n},d=e("./math.js"),c=e("./rotation.js");function h(e,t,n,r,i,o){if(n){var a=(0,d.cos)(t),s=(0,d.sin)(t),l=r*n;null==i?(i=t+r*d.tau,o=t-l/2):(i=p(a,i),o=p(a,o),(0<r?i<o:o<i)&&(i+=r*d.tau));for(var u,c=i;0<r?o<c:c<o;c-=l)u=(0,f.spherical)([a,-s*(0,d.cos)(c),-s*(0,d.sin)(c)]),e.point(u[0],u[1])}}function p(e,t){(t=(0,f.cartesian)(t))[0]-=e,(0,f.cartesianNormalizeInPlace)(t);e=(0,d.acos)(-t[1]);return((-t[2]<0?-e:e)+d.tau-d.epsilon)%d.tau}},{"./cartesian.js":455,"./constant.js":467,"./math.js":475,"./rotation.js":508}],458:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(r=e("./index.js"))&&r.__esModule?r:{default:r},p=e("../math.js");r=(0,r.default)(function(){return!0},function(u){var c,f=NaN,d=NaN,h=NaN;return{lineStart:function(){u.lineStart(),c=1},point:function(e,t){var n,r,i,o,a,s=0<e?p.pi:-p.pi,l=(0,p.abs)(e-f);(0,p.abs)(l-p.pi)<p.epsilon?(u.point(f,d=0<(d+t)/2?p.halfPi:-p.halfPi),u.point(h,d),u.lineEnd(),u.lineStart(),u.point(s,d),u.point(e,d),c=0):h!==s&&l>=p.pi&&((0,p.abs)(f-h)<p.epsilon&&(f-=h*p.epsilon),(0,p.abs)(e-s)<p.epsilon&&(e-=s*p.epsilon),n=f,r=d,i=e,o=t,a=(0,p.sin)(n-i),d=(0,p.abs)(a)>p.epsilon?(0,p.atan)(((0,p.sin)(r)*(l=(0,p.cos)(o))*(0,p.sin)(i)-(0,p.sin)(o)*(i=(0,p.cos)(r))*(0,p.sin)(n))/(i*l*a)):(r+o)/2,u.point(h,d),u.lineEnd(),u.lineStart(),u.point(s,d),c=0),u.point(f=e,d=t),h=s},lineEnd:function(){u.lineEnd(),f=d=NaN},clean:function(){return 2-c}}},function(e,t,n,r){var i;null==e?(i=n*p.halfPi,r.point(-p.pi,i),r.point(0,i),r.point(p.pi,i),r.point(p.pi,0),r.point(p.pi,-i),r.point(0,-i),r.point(-p.pi,-i),r.point(-p.pi,0),r.point(-p.pi,i)):(0,p.abs)(e[0]-t[0])>p.epsilon?(e=e[0]<t[0]?p.pi:-p.pi,i=n*e/2,r.point(-e,i),r.point(0,i),r.point(e,i)):r.point(t[0],t[1])},[-p.pi,-p.halfPi]);n.default=r},{"../math.js":475,"./index.js":462}],459:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var r,t=[];return{point:function(e,t,n){r.push([e,t,n])},lineStart:function(){t.push(r=[])},lineEnd:i.default,rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],r=null,e}}};var i=(e=e("../noop.js"))&&e.__esModule?e:{default:e}},{"../noop.js":476}],460:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(i){var h=(0,b.cos)(i),o=6*b.radians,d=0<h,p=(0,b.abs)(h)>b.epsilon;function y(e,t){return(0,b.cos)(e)*(0,b.cos)(t)>h}function g(e,t,n){var r=(0,m.cartesian)(e),i=(0,m.cartesian)(t),o=[1,0,0],a=(0,m.cartesianCross)(r,i),s=(0,m.cartesianDot)(a,a),l=a[0],u=s-l*l;if(!u)return!n&&e;var c=h*s/u,f=-h*l/u,r=(0,m.cartesianCross)(o,a),i=(0,m.cartesianScale)(o,c),s=(0,m.cartesianScale)(a,f);(0,m.cartesianAddInPlace)(i,s);l=r,u=(0,m.cartesianDot)(i,l),o=(0,m.cartesianDot)(l,l),c=u*u-o*((0,m.cartesianDot)(i,i)-1);if(!(c<0)){a=(0,b.sqrt)(c),f=(0,m.cartesianScale)(l,(-u-a)/o);if((0,m.cartesianAddInPlace)(f,i),f=(0,m.spherical)(f),!n)return f;var d,s=e[0],r=t[0],c=e[1],n=t[1];r<s&&(d=s,s=r,r=d);e=r-s,t=(0,b.abs)(e-b.pi)<b.epsilon;if(!t&&n<c&&(d=c,c=n,n=d),t||e<b.epsilon?t?0<c+n^f[1]<((0,b.abs)(f[0]-s)<b.epsilon?c:n):c<=f[1]&&f[1]<=n:e>b.pi^(s<=f[0]&&f[0]<=r)){o=(0,m.cartesianScale)(l,(-u+a)/o);return(0,m.cartesianAddInPlace)(o,i),[f,(0,m.spherical)(o)]}}}function v(e,t){var n=d?i:b.pi-i,r=0;return e<-n?r|=1:n<e&&(r|=2),t<-n?r|=4:n<t&&(r|=8),r}return(0,r.default)(y,function(a){var s,l,u,c,f;return{lineStart:function(){c=u=!1,f=1},point:function(e,t){var n,r,i=[e,t],o=y(e,t),t=d?o?0:v(e,t):o?v(e+(e<0?b.pi:-b.pi),t):0;!s&&(c=u=o)&&a.lineStart(),o!==u&&((n=g(s,i))&&!(0,x.default)(s,n)&&!(0,x.default)(i,n)||(i[2]=1)),o!==u?(f=0,o?(a.lineStart(),n=g(i,s),a.point(n[0],n[1])):(n=g(s,i),a.point(n[0],n[1],2),a.lineEnd()),s=n):p&&s&&d^o&&(t&l||!(r=g(i,s,!0))||(f=0,d?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1],3)))),!o||s&&(0,x.default)(s,i)||a.point(i[0],i[1]),s=i,u=o,l=t},lineEnd:function(){u&&a.lineEnd(),s=null},clean:function(){return f|(c&&u)<<1}}},function(e,t,n,r){(0,a.circleStream)(r,i,o,n,e,t)},d?[0,-i]:[-b.pi,i-b.pi])};var m=e("../cartesian.js"),a=e("../circle.js"),b=e("../math.js"),x=i(e("../pointEqual.js")),r=i(e("./index.js"));function i(e){return e&&e.__esModule?e:{default:e}}},{"../cartesian.js":455,"../circle.js":457,"../math.js":475,"../pointEqual.js":484,"./index.js":462}],461:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var t,n,r,i=0,o=0,a=960,s=500;return r={stream:function(e){return t&&n===e?t:t=(0,l.default)(i,o,a,s)(n=e)},extent:function(e){return arguments.length?(i=+e[0][0],o=+e[0][1],a=+e[1][0],s=+e[1][1],t=n=null,r):[[i,o],[a,s]]}}};var l=(e=e("./rectangle.js"))&&e.__esModule?e:{default:e}},{"./rectangle.js":464}],462:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(g,v,m,b){return function(s){var l,u,c,n=v(s),f=(0,x.default)(),d=v(f),h=!1,t={point:r,lineStart:i,lineEnd:o,polygonStart:function(){t.point=p,t.lineStart=a,t.lineEnd=y,u=[],l=[]},polygonEnd:function(){t.point=r,t.lineStart=i,t.lineEnd=o,u=(0,M.merge)(u);var e=(0,w.default)(l,b);u.length?(h||(s.polygonStart(),h=!0),(0,_.default)(u,k,e,m,s)):e&&(h||(s.polygonStart(),h=!0),s.lineStart(),m(null,null,1,s),s.lineEnd()),h&&(s.polygonEnd(),h=!1),u=l=null},sphere:function(){s.polygonStart(),s.lineStart(),m(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function r(e,t){g(e,t)&&s.point(e,t)}function e(e,t){n.point(e,t)}function i(){t.point=e,n.lineStart()}function o(){t.point=r,n.lineEnd()}function p(e,t){c.push([e,t]),d.point(e,t)}function a(){d.lineStart(),c=[]}function y(){p(c[0][0],c[0][1]),d.lineEnd();var e,t,n,r,i=d.clean(),o=f.result(),a=o.length;if(c.pop(),l.push(c),c=null,a)if(1&i){if(0<(t=(n=o[0]).length-1)){for(h||(s.polygonStart(),h=!0),s.lineStart(),e=0;e<t;++e)s.point((r=n[e])[0],r[1]);s.lineEnd()}}else 1<a&&2&i&&o.push(o.pop().concat(o.shift())),u.push(o.filter(j))}return t}};var x=i(e("./buffer.js")),_=i(e("./rejoin.js")),r=e("../math.js"),w=i(e("../polygonContains.js")),M=e("d3-array");function i(e){return e&&e.__esModule?e:{default:e}}function j(e){return 1<e.length}function k(e,t){return((e=e.x)[0]<0?e[1]-r.halfPi-r.epsilon:r.halfPi-e[1])-((t=t.x)[0]<0?t[1]-r.halfPi-r.epsilon:r.halfPi-t[1])}},{"../math.js":475,"../polygonContains.js":485,"./buffer.js":459,"./rejoin.js":465,"d3-array":32}],463:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r,i,o){var a=e[0],s=e[1],l=t[0],u=t[1],c=0,f=1,l=l-a,u=u-s;if(n=n-a,l||!(0<n)){if(n/=l,l<0){if(n<c)return;n<f&&(f=n)}else if(0<l){if(f<n)return;c<n&&(c=n)}if(n=i-a,l||!(n<0)){if(n/=l,l<0){if(f<n)return;c<n&&(c=n)}else if(0<l){if(n<c)return;n<f&&(f=n)}if(n=r-s,u||!(0<n)){if(n/=u,u<0){if(n<c)return;n<f&&(f=n)}else if(0<u){if(f<n)return;c<n&&(c=n)}if(n=o-s,u||!(n<0)){if(n/=u,u<0){if(f<n)return;c<n&&(c=n)}else if(0<u){if(n<c)return;n<f&&(f=n)}return 0<c&&(e[0]=a+c*l,e[1]=s+c*u),f<1&&(t[0]=a+f*l,t[1]=s+f*u),!0}}}}}},{}],464:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(v,m,b,x){function _(e,t){return v<=e&&e<=b&&m<=t&&t<=x}function w(e,t,n,r){var i=0,o=0;if(null==e||(i=a(e,n))!==(o=a(t,n))||s(e,t)<0^0<n)for(;r.point(0===i||3===i?v:b,1<i?x:m),(i=(i+n+4)%4)!==o;);else r.point(t[0],t[1])}function a(e,t){return(0,r.abs)(e[0]-v)<r.epsilon?0<t?0:3:(0,r.abs)(e[0]-b)<r.epsilon?0<t?2:1:(0,r.abs)(e[1]-m)<r.epsilon?0<t?1:0:0<t?3:2}function M(e,t){return s(e.x,t.x)}function s(e,t){var n=a(e,1),r=a(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(r){var i,f,o,a,s,l,u,c,d,h,p,y=r,e=(0,j.default)(),t={point:n,lineStart:function(){t.point=g,f&&f.push(o=[]);h=!0,d=!1,u=c=NaN},lineEnd:function(){i&&(g(a,s),l&&d&&e.rejoin(),i.push(e.result()));t.point=n,d&&y.lineEnd()},polygonStart:function(){y=e,i=[],f=[],p=!0},polygonEnd:function(){var e=function(){for(var e=0,t=0,n=f.length;t<n;++t)for(var r,i,o=f[t],a=1,s=o.length,l=o[0],u=l[0],c=l[1];a<s;++a)r=u,i=c,l=o[a],u=l[0],c=l[1],i<=x?x<c&&(c-i)*(v-r)<(u-r)*(x-i)&&++e:c<=x&&(u-r)*(x-i)<(c-i)*(v-r)&&--e;return e}(),t=p&&e,n=(i=(0,A.merge)(i)).length;(t||n)&&(r.polygonStart(),t&&(r.lineStart(),w(null,null,1,r),r.lineEnd()),n&&(0,O.default)(i,M,e,w,r),r.polygonEnd());y=r,i=f=o=null}};function n(e,t){_(e,t)&&y.point(e,t)}function g(e,t){var n,r,i=_(e,t);f&&o.push([e,t]),h?(a=e,s=t,h=!1,(l=i)&&(y.lineStart(),y.point(e,t))):i&&d?y.point(e,t):(n=[u=Math.max(P,Math.min(T,u)),c=Math.max(P,Math.min(T,c))],r=[e=Math.max(P,Math.min(T,e)),t=Math.max(P,Math.min(T,t))],(0,k.default)(n,r,v,m,b,x)?(d||(y.lineStart(),y.point(n[0],n[1])),y.point(r[0],r[1]),i||y.lineEnd(),p=!1):i&&(y.lineStart(),y.point(e,t),p=!1)),u=e,c=t,d=i}return t}};var r=e("../math.js"),j=i(e("./buffer.js")),k=i(e("./line.js")),O=i(e("./rejoin.js")),A=e("d3-array");function i(e){return e&&e.__esModule?e:{default:e}}var T=1e9,P=-T},{"../math.js":475,"./buffer.js":459,"./line.js":463,"./rejoin.js":465,"d3-array":32}],465:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r,o){var a,i,s=[],l=[];if(e.forEach(function(e){if((t=e.length-1)<=0)return;var t,n=e[0],r=e[t],i;if((0,p.default)(n,r)){if(!n[2]&&!r[2]){o.lineStart();for(a=0;a<t;++a)o.point((n=e[a])[0],n[1]);o.lineEnd();return}r[0]+=2*y.epsilon}s.push(i=new g(n,e,null,true));l.push(i.o=new g(n,null,i,false));s.push(i=new g(r,e,null,false));l.push(i.o=new g(r,null,i,true))}),s.length){for(l.sort(t),v(s),v(l),a=0,i=l.length;a<i;++a)l[a].e=n=!n;for(var u,c,f=s[0];;){for(var d=f,h=!0;d.v;)if((d=d.n)===f)return;u=d.z,o.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,i=u.length;a<i;++a)o.point((c=u[a])[0],c[1]);else r(d.x,d.n.x,1,o);d=d.n}else{if(h)for(u=d.p.z,a=u.length-1;0<=a;--a)o.point((c=u[a])[0],c[1]);else r(d.x,d.p.x,-1,o);d=d.p}}while(d=d.o,u=d.z,h=!h,!d.v);o.lineEnd()}}};var p=(n=e("../pointEqual.js"))&&n.__esModule?n:{default:n},y=e("../math.js");function g(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function v(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}},{"../math.js":475,"../pointEqual.js":484}],466:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(n,r){function e(e,t){return e=n(e,t),r(e[0],e[1])}n.invert&&r.invert&&(e.invert=function(e,t){return(e=r.invert(e,t))&&n.invert(e[0],e[1])});return e}},{}],467:[function(e,t,n){arguments[4][80][0].apply(n,arguments)},{dup:80}],468:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return(e&&o.hasOwnProperty(e.type)?o[e.type]:u)(e,t)};var r=i(e("./polygonContains.js")),s=i(e("./distance.js")),l=e("./math.js");function i(e){return e&&e.__esModule?e:{default:e}}var o={Feature:function(e,t){return u(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)if(u(n[r].geometry,t))return!0;return!1}},a={Sphere:function(){return!0},Point:function(e,t){return c(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(c(n[r],t))return!0;return!1},LineString:function(e,t){return f(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(f(n[r],t))return!0;return!1},Polygon:function(e,t){return d(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(d(n[r],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)if(u(n[r],t))return!0;return!1}};function u(e,t){return!(!e||!a.hasOwnProperty(e.type))&&a[e.type](e,t)}function c(e,t){return 0===(0,s.default)(e,t)}function f(e,t){for(var n,r,i,o=0,a=e.length;o<a;o++){if(0===(r=(0,s.default)(e[o],t)))return!0;if(0<o&&0<(i=(0,s.default)(e[o],e[o-1]))&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<l.epsilon2*i)return!0;n=r}return!1}function d(e,t){return!!(0,r.default)(e.map(h),p(t))}function h(e){return(e=e.map(p)).pop(),e}function p(e){return[e[0]*l.radians,e[1]*l.radians]}},{"./distance.js":469,"./math.js":475,"./polygonContains.js":485}],469:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return i[0]=e,i[1]=t,(0,r.default)(o)};var r=(e=e("./length.js"))&&e.__esModule?e:{default:e};var i=[null,null],o={type:"LineString",coordinates:i}},{"./length.js":474}],470:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,n.graticule10=function(){return r()()};var b=e("d3-array"),x=e("./math.js");function _(e,t,n){var r=(0,b.range)(e,t-x.epsilon,n).concat(t);return function(t){return r.map(function(e){return[t,e]})}}function w(e,t,n){var r=(0,b.range)(e,t-x.epsilon,n).concat(t);return function(t){return r.map(function(e){return[e,t]})}}function r(){var t,n,r,i,o,a,s,l,u,c,f,d,h=10,p=h,y=90,g=360,v=2.5;function m(){return{type:"MultiLineString",coordinates:e()}}function e(){return(0,b.range)((0,x.ceil)(i/y)*y,r,y).map(f).concat((0,b.range)((0,x.ceil)(l/g)*g,s,g).map(d)).concat((0,b.range)((0,x.ceil)(n/h)*h,t,h).filter(function(e){return(0,x.abs)(e%y)>x.epsilon}).map(u)).concat((0,b.range)((0,x.ceil)(a/p)*p,o,p).filter(function(e){return(0,x.abs)(e%g)>x.epsilon}).map(c))}return m.lines=function(){return e().map(function(e){return{type:"LineString",coordinates:e}})},m.outline=function(){return{type:"Polygon",coordinates:[f(i).concat(d(s).slice(1),f(r).reverse().slice(1),d(l).reverse().slice(1))]}},m.extent=function(e){return arguments.length?m.extentMajor(e).extentMinor(e):m.extentMinor()},m.extentMajor=function(e){return arguments.length?(i=+e[0][0],r=+e[1][0],l=+e[0][1],s=+e[1][1],r<i&&(e=i,i=r,r=e),s<l&&(e=l,l=s,s=e),m.precision(v)):[[i,l],[r,s]]},m.extentMinor=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],a=+e[0][1],o=+e[1][1],t<n&&(e=n,n=t,t=e),o<a&&(e=a,a=o,o=e),m.precision(v)):[[n,a],[t,o]]},m.step=function(e){return arguments.length?m.stepMajor(e).stepMinor(e):m.stepMinor()},m.stepMajor=function(e){return arguments.length?(y=+e[0],g=+e[1],m):[y,g]},m.stepMinor=function(e){return arguments.length?(h=+e[0],p=+e[1],m):[h,p]},m.precision=function(e){return arguments.length?(v=+e,u=_(a,o,90),c=w(n,t,v),f=_(l,s,90),d=w(i,r,v),m):v},m.extentMajor([[-180,-90+x.epsilon],[180,90-x.epsilon]]).extentMinor([[-180,-80-x.epsilon],[180,80+x.epsilon]])}},{"./math.js":475,"d3-array":32}],471:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=function(e){return e}},{}],472:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"geoAlbers",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(n,"geoAlbersUsa",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(n,"geoArea",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"geoAzimuthalEqualArea",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(n,"geoAzimuthalEqualAreaRaw",{enumerable:!0,get:function(){return x.azimuthalEqualAreaRaw}}),Object.defineProperty(n,"geoAzimuthalEquidistant",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(n,"geoAzimuthalEquidistantRaw",{enumerable:!0,get:function(){return _.azimuthalEquidistantRaw}}),Object.defineProperty(n,"geoBounds",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"geoCentroid",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"geoCircle",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"geoClipAntimeridian",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"geoClipCircle",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"geoClipExtent",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"geoClipRectangle",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(n,"geoConicConformal",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(n,"geoConicConformalRaw",{enumerable:!0,get:function(){return w.conicConformalRaw}}),Object.defineProperty(n,"geoConicEqualArea",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(n,"geoConicEqualAreaRaw",{enumerable:!0,get:function(){return M.conicEqualAreaRaw}}),Object.defineProperty(n,"geoConicEquidistant",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(n,"geoConicEquidistantRaw",{enumerable:!0,get:function(){return j.conicEquidistantRaw}}),Object.defineProperty(n,"geoContains",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(n,"geoDistance",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(n,"geoEqualEarth",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(n,"geoEqualEarthRaw",{enumerable:!0,get:function(){return k.equalEarthRaw}}),Object.defineProperty(n,"geoEquirectangular",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(n,"geoEquirectangularRaw",{enumerable:!0,get:function(){return O.equirectangularRaw}}),Object.defineProperty(n,"geoGnomonic",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(n,"geoGnomonicRaw",{enumerable:!0,get:function(){return A.gnomonicRaw}}),Object.defineProperty(n,"geoGraticule",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(n,"geoGraticule10",{enumerable:!0,get:function(){return p.graticule10}}),Object.defineProperty(n,"geoIdentity",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(n,"geoInterpolate",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(n,"geoLength",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(n,"geoMercator",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(n,"geoMercatorRaw",{enumerable:!0,get:function(){return S.mercatorRaw}}),Object.defineProperty(n,"geoNaturalEarth1",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(n,"geoNaturalEarth1Raw",{enumerable:!0,get:function(){return E.naturalEarth1Raw}}),Object.defineProperty(n,"geoOrthographic",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(n,"geoOrthographicRaw",{enumerable:!0,get:function(){return C.orthographicRaw}}),Object.defineProperty(n,"geoPath",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(n,"geoProjection",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(n,"geoProjectionMutator",{enumerable:!0,get:function(){return P.projectionMutator}}),Object.defineProperty(n,"geoRotation",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(n,"geoStereographic",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(n,"geoStereographicRaw",{enumerable:!0,get:function(){return L.stereographicRaw}}),Object.defineProperty(n,"geoStream",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(n,"geoTransform",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(n,"geoTransverseMercator",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(n,"geoTransverseMercatorRaw",{enumerable:!0,get:function(){return R.transverseMercatorRaw}});var r=B(e("./area.js")),i=B(e("./bounds.js")),o=B(e("./centroid.js")),s=B(e("./circle.js")),l=B(e("./clip/antimeridian.js")),u=B(e("./clip/circle.js")),c=B(e("./clip/extent.js")),f=B(e("./clip/rectangle.js")),d=B(e("./contains.js")),h=B(e("./distance.js")),p=F(e("./graticule.js")),y=B(e("./interpolate.js")),g=B(e("./length.js")),v=B(e("./path/index.js")),m=B(e("./projection/albers.js")),b=B(e("./projection/albersUsa.js")),x=F(e("./projection/azimuthalEqualArea.js")),_=F(e("./projection/azimuthalEquidistant.js")),w=F(e("./projection/conicConformal.js")),M=F(e("./projection/conicEqualArea.js")),j=F(e("./projection/conicEquidistant.js")),k=F(e("./projection/equalEarth.js")),O=F(e("./projection/equirectangular.js")),A=F(e("./projection/gnomonic.js")),T=B(e("./projection/identity.js")),P=F(e("./projection/index.js")),S=F(e("./projection/mercator.js")),E=F(e("./projection/naturalEarth1.js")),C=F(e("./projection/orthographic.js")),L=F(e("./projection/stereographic.js")),R=F(e("./projection/transverseMercator.js")),I=B(e("./rotation.js")),z=B(e("./stream.js")),D=B(e("./transform.js"));function N(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(N=function(e){return e?n:t})(e)}function F(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=N(t);if(t&&t.has(e))return t.get(e);var n,r,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=o?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=e[n]);return i.default=e,t&&t.set(e,i),i}function B(e){return e&&e.__esModule?e:{default:e}}},{"./area.js":453,"./bounds.js":454,"./centroid.js":456,"./circle.js":457,"./clip/antimeridian.js":458,"./clip/circle.js":460,"./clip/extent.js":461,"./clip/rectangle.js":464,"./contains.js":468,"./distance.js":469,"./graticule.js":470,"./interpolate.js":473,"./length.js":474,"./path/index.js":481,"./projection/albers.js":486,"./projection/albersUsa.js":487,"./projection/azimuthalEqualArea.js":489,"./projection/azimuthalEquidistant.js":490,"./projection/conicConformal.js":492,"./projection/conicEqualArea.js":493,"./projection/conicEquidistant.js":494,"./projection/equalEarth.js":496,"./projection/equirectangular.js":497,"./projection/gnomonic.js":499,"./projection/identity.js":500,"./projection/index.js":501,"./projection/mercator.js":502,"./projection/naturalEarth1.js":503,"./projection/orthographic.js":504,"./projection/stereographic.js":506,"./projection/transverseMercator.js":507,"./rotation.js":508,"./stream.js":509,"./transform.js":510}],473:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=e[0]*p.radians,r=e[1]*p.radians,i=t[0]*p.radians,o=t[1]*p.radians,e=(0,p.cos)(r),a=(0,p.sin)(r),t=(0,p.cos)(o),s=(0,p.sin)(o),l=e*(0,p.cos)(n),u=e*(0,p.sin)(n),c=t*(0,p.cos)(i),f=t*(0,p.sin)(i),d=2*(0,p.asin)((0,p.sqrt)((0,p.haversin)(o-r)+e*t*(0,p.haversin)(i-n))),h=(0,p.sin)(d),i=d?function(e){var t=(0,p.sin)(e*=d)/h,n=(0,p.sin)(d-e)/h,r=n*l+t*c,e=n*u+t*f,t=n*a+t*s;return[(0,p.atan2)(e,r)*p.degrees,(0,p.atan2)(t,(0,p.sqrt)(r*r+e*e))*p.degrees]}:function(){return[n*p.degrees,r*p.degrees]};return i.distance=d,i};var p=e("./math.js")},{"./math.js":475}],474:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return a=new r.Adder,(0,o.default)(e,d),+a};var a,s,l,u,r=e("d3-array"),c=e("./math.js"),i=f(e("./noop.js")),o=f(e("./stream.js"));function f(e){return e&&e.__esModule?e:{default:e}}var d={sphere:i.default,point:i.default,lineStart:function(){d.point=p,d.lineEnd=h},lineEnd:i.default,polygonStart:i.default,polygonEnd:i.default};function h(){d.point=d.lineEnd=i.default}function p(e,t){e*=c.radians,t*=c.radians,s=e,l=(0,c.sin)(t),u=(0,c.cos)(t),d.point=y}function y(e,t){e*=c.radians,t*=c.radians;var n=(0,c.sin)(t),r=(0,c.cos)(t),i=(0,c.abs)(e-s),o=(0,c.cos)(i),t=r*(0,c.sin)(i),i=u*n-l*r*o,o=l*n+u*r*o;a.add((0,c.atan2)((0,c.sqrt)(t*t+i*i),o)),s=e,l=n,u=r}},{"./math.js":475,"./noop.js":476,"./stream.js":509,"d3-array":32}],475:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.abs=void 0,n.acos=function(e){return 1<e?0:e<-1?r:Math.acos(e)},n.asin=function(e){return 1<e?i:e<-1?-i:Math.asin(e)},n.halfPi=n.floor=n.exp=n.epsilon2=n.epsilon=n.degrees=n.cos=n.ceil=n.atan2=n.atan=void 0,n.haversin=function(e){return(e=a(e/2))*e},n.tau=n.tan=n.sqrt=n.sin=n.sign=n.radians=n.quarterPi=n.pow=n.pi=n.log=n.hypot=void 0;n.epsilon=1e-6;n.epsilon2=1e-12;var r=Math.PI,i=(n.pi=r)/2;n.halfPi=i,n.quarterPi=r/4,n.tau=2*r,n.degrees=180/r,n.radians=r/180;var o=Math.abs;n.abs=o;o=Math.atan;n.atan=o;o=Math.atan2;n.atan2=o;o=Math.cos;n.cos=o;o=Math.ceil;n.ceil=o;o=Math.exp;n.exp=o;o=Math.floor;n.floor=o;o=Math.hypot;n.hypot=o;o=Math.log;n.log=o;o=Math.pow;n.pow=o;var a=Math.sin;n.sin=a;o=Math.sign||function(e){return 0<e?1:e<0?-1:0};n.sign=o;o=Math.sqrt;n.sqrt=o;o=Math.tan;n.tan=o},{}],476:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){}},{}],477:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("d3-array"),i=e("../math.js"),o=(e=e("../noop.js"))&&e.__esModule?e:{default:e};var a,s,l,u,c=new r.Adder,f=new r.Adder,d={point:o.default,lineStart:o.default,lineEnd:o.default,polygonStart:function(){d.lineStart=h,d.lineEnd=g},polygonEnd:function(){d.lineStart=d.lineEnd=d.point=o.default,c.add((0,i.abs)(f)),f=new r.Adder},result:function(){var e=c/2;return c=new r.Adder,e}};function h(){d.point=p}function p(e,t){d.point=y,a=l=e,s=u=t}function y(e,t){f.add(u*e-l*t),l=e,u=t}function g(){y(a,s)}n.default=d},{"../math.js":475,"../noop.js":476,"d3-array":32}],478:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;e=(e=e("../noop.js"))&&e.__esModule?e:{default:e};var r=1/0,i=r,o=-r,a=o,e={point:function(e,t){e<r&&(r=e);o<e&&(o=e);t<i&&(i=t);a<t&&(a=t)},lineStart:e.default,lineEnd:e.default,polygonStart:e.default,polygonEnd:e.default,result:function(){var e=[[r,i],[o,a]];return o=a=-(i=r=1/0),e}};n.default=e},{"../noop.js":476}],479:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i,o,a,s=e("../math.js"),l=0,u=0,c=0,f=0,d=0,h=0,p=0,y=0,g=0,v={point:m,lineStart:b,lineEnd:w,polygonStart:function(){v.lineStart=M,v.lineEnd=j},polygonEnd:function(){v.point=m,v.lineStart=b,v.lineEnd=w},result:function(){var e=g?[p/g,y/g]:h?[f/h,d/h]:c?[l/c,u/c]:[NaN,NaN];return l=u=c=f=d=h=p=y=g=0,e}};function m(e,t){l+=e,u+=t,++c}function b(){v.point=x}function x(e,t){v.point=_,m(o=e,a=t)}function _(e,t){var n=e-o,r=t-a,r=(0,s.sqrt)(n*n+r*r);f+=r*(o+e)/2,d+=r*(a+t)/2,h+=r,m(o=e,a=t)}function w(){v.point=m}function M(){v.point=k}function j(){O(r,i)}function k(e,t){v.point=O,m(r=o=e,i=a=t)}function O(e,t){var n=e-o,r=t-a,r=(0,s.sqrt)(n*n+r*r);f+=r*(o+e)/2,d+=r*(a+t)/2,h+=r,p+=(r=a*e-o*t)*(o+e),y+=r*(a+t),g+=3*r,m(o=e,a=t)}n.default=v},{"../math.js":475}],480:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var r=e("../math.js"),e=(e=e("../noop.js"))&&e.__esModule?e:{default:e};function i(e){this._context=e}i.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,r.tau)}},result:e.default}},{"../math.js":475,"../noop.js":476}],481:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,n){var r,i,o=4.5;function a(e){return e&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),(0,l.default)(e,r(i))),i.result()}return a.area=function(e){return(0,l.default)(e,r(u.default)),u.default.result()},a.measure=function(e){return(0,l.default)(e,r(h.default)),h.default.result()},a.bounds=function(e){return(0,l.default)(e,r(c.default)),c.default.result()},a.centroid=function(e){return(0,l.default)(e,r(f.default)),f.default.result()},a.projection=function(e){return arguments.length?(r=null==e?(t=null,s.default):(t=e).stream,a):t},a.context=function(e){return arguments.length?(i=null==e?(n=null,new p.default):new d.default(n=e),"function"!=typeof o&&i.pointRadius(o),a):n},a.pointRadius=function(e){return arguments.length?(o="function"==typeof e?e:(i.pointRadius(+e),+e),a):o},a.projection(t).context(n)};var s=r(e("../identity.js")),l=r(e("../stream.js")),u=r(e("./area.js")),c=r(e("./bounds.js")),f=r(e("./centroid.js")),d=r(e("./context.js")),h=r(e("./measure.js")),p=r(e("./string.js"));function r(e){return e&&e.__esModule?e:{default:e}}},{"../identity.js":471,"../stream.js":509,"./area.js":477,"./bounds.js":478,"./centroid.js":479,"./context.js":480,"./measure.js":482,"./string.js":483}],482:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("d3-array"),i=e("../math.js"),o=(e=e("../noop.js"))&&e.__esModule?e:{default:e};var a,s,l,u,c,f=new r.Adder,d={point:o.default,lineStart:function(){d.point=h},lineEnd:function(){a&&p(s,l),d.point=o.default},polygonStart:function(){a=!0},polygonEnd:function(){a=null},result:function(){var e=+f;return f=new r.Adder,e}};function h(e,t){d.point=p,s=u=e,l=c=t}function p(e,t){u-=e,c-=t,f.add((0,i.sqrt)(u*u+c*c)),u=e,c=t}n.default=d},{"../math.js":475,"../noop.js":476,"d3-array":32}],483:[function(e,t,n){"use strict";function r(){this._string=[]}function i(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=r).prototype={_radius:4.5,_circle:i(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=i(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}}},{}],484:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return(0,r.abs)(e[0]-t[0])<r.epsilon&&(0,r.abs)(e[1]-t[1])<r.epsilon};var r=e("./math.js")},{"./math.js":475}],485:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=S(t),r=t[1],t=(0,P.sin)(r),i=[(0,P.sin)(n),-(0,P.cos)(n),0],o=0,a=0,s=new A.Adder;1===t?r=P.halfPi+P.epsilon:-1===t&&(r=-P.halfPi-P.epsilon);for(var l=0,u=e.length;l<u;++l)if(f=(c=e[l]).length)for(var c,f,d=c[f-1],h=S(d),p=d[1]/2+P.quarterPi,y=(0,P.sin)(p),g=(0,P.cos)(p),v=0;v<f;++v,h=b,y=_,g=w,d=m){var m=c[v],b=S(m),x=m[1]/2+P.quarterPi,_=(0,P.sin)(x),w=(0,P.cos)(x),M=b-h,j=0<=M?1:-1,k=j*M,O=k>P.pi,x=y*_;s.add((0,P.atan2)(x*j*(0,P.sin)(k),g*w+x*(0,P.cos)(k))),o+=O?M+j*P.tau:M,O^n<=h^n<=b&&(k=(0,T.cartesianCross)((0,T.cartesian)(d),(0,T.cartesian)(m)),(0,T.cartesianNormalizeInPlace)(k),j=(0,T.cartesianCross)(i,k),(0,T.cartesianNormalizeInPlace)(j),((j=(O^0<=M?-1:1)*(0,P.asin)(j[2]))<r||r===j&&(k[0]||k[1]))&&(a+=O^0<=M?1:-1))}return(o<-P.epsilon||o<P.epsilon&&s<-P.epsilon2)^1&a};var A=e("d3-array"),T=e("./cartesian.js"),P=e("./math.js");function S(e){return(0,P.abs)(e[0])<=P.pi?e[0]:(0,P.sign)(e[0])*(((0,P.abs)(e[0])+P.pi)%P.tau-P.pi)}},{"./cartesian.js":455,"./math.js":475,"d3-array":32}],486:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return(0,r.default)().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};var r=(e=e("./conicEqualArea.js"))&&e.__esModule?e:{default:e}},{"./conicEqualArea.js":493}],487:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var t,n,i,o,a,r,s=(0,p.default)(),l=(0,y.default)().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=(0,y.default)().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){r=[e,t]}};function f(e){var t=e[0],e=e[1];return r=null,i.point(t,e),r||(o.point(t,e),r)||(a.point(t,e),r)}function d(){return t=n=null,f}return f.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,t=(e[1]-n[1])/t;return(.12<=t&&t<.234&&-.425<=r&&r<-.214?l:.166<=t&&t<.234&&-.214<=r&&r<-.115?u:s).invert(e)},f.stream=function(e){return t&&n===e?t:(r=[s.stream(n=e),l.stream(e),u.stream(e)],i=r.length,t={point:function(e,t){for(var n=-1;++n<i;)r[n].point(e,t)},sphere:function(){for(var e=-1;++e<i;)r[e].sphere()},lineStart:function(){for(var e=-1;++e<i;)r[e].lineStart()},lineEnd:function(){for(var e=-1;++e<i;)r[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<i;)r[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<i;)r[e].polygonEnd()}});var r,i},f.precision=function(e){return arguments.length?(s.precision(e),l.precision(e),u.precision(e),d()):s.precision()},f.scale=function(e){return arguments.length?(s.scale(e),l.scale(.35*e),u.scale(e),f.translate(s.translate())):s.scale()},f.translate=function(e){if(!arguments.length)return s.translate();var t=s.scale(),n=+e[0],r=+e[1];return i=s.translate(e).clipExtent([[n-.455*t,r-.238*t],[n+.455*t,r+.238*t]]).stream(c),o=l.translate([n-.307*t,r+.201*t]).clipExtent([[n-.425*t+h.epsilon,r+.12*t+h.epsilon],[n-.214*t-h.epsilon,r+.234*t-h.epsilon]]).stream(c),a=u.translate([n-.205*t,r+.212*t]).clipExtent([[n-.214*t+h.epsilon,r+.166*t+h.epsilon],[n-.115*t-h.epsilon,r+.234*t-h.epsilon]]).stream(c),d()},f.fitExtent=function(e,t){return(0,g.fitExtent)(f,e,t)},f.fitSize=function(e,t){return(0,g.fitSize)(f,e,t)},f.fitWidth=function(e,t){return(0,g.fitWidth)(f,e,t)},f.fitHeight=function(e,t){return(0,g.fitHeight)(f,e,t)},f.scale(1070)};var h=e("../math.js"),p=r(e("./albers.js")),y=r(e("./conicEqualArea.js")),g=e("./fit.js");function r(e){return e&&e.__esModule?e:{default:e}}},{"../math.js":475,"./albers.js":486,"./conicEqualArea.js":493,"./fit.js":498}],488:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.azimuthalInvert=function(o){return function(e,t){var n=(0,a.sqrt)(e*e+t*t),r=o(n),i=(0,a.sin)(r),r=(0,a.cos)(r);return[(0,a.atan2)(e*i,n*r),(0,a.asin)(n&&t*i/n)]}},n.azimuthalRaw=function(i){return function(e,t){var n=(0,a.cos)(e),r=(0,a.cos)(t),n=i(n*r);return n===1/0?[2,0]:[n*r*(0,a.sin)(e),n*(0,a.sin)(t)]}};var a=e("../math.js")},{"../math.js":475}],489:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.azimuthalEqualAreaRaw=void 0,n.default=function(){return(0,o.default)(a).scale(124.75).clipAngle(179.999)};var r=e("../math.js"),i=e("./azimuthal.js"),o=(e=e("./index.js"))&&e.__esModule?e:{default:e};var a=(0,i.azimuthalRaw)(function(e){return(0,r.sqrt)(2/(1+e))});(n.azimuthalEqualAreaRaw=a).invert=(0,i.azimuthalInvert)(function(e){return 2*(0,r.asin)(e/2)})},{"../math.js":475,"./azimuthal.js":488,"./index.js":501}],490:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.azimuthalEquidistantRaw=void 0,n.default=function(){return(0,o.default)(a).scale(79.4188).clipAngle(179.999)};var r=e("../math.js"),i=e("./azimuthal.js"),o=(e=e("./index.js"))&&e.__esModule?e:{default:e};var a=(0,i.azimuthalRaw)(function(e){return(e=(0,r.acos)(e))&&e/(0,r.sin)(e)});(n.azimuthalEquidistantRaw=a).invert=(0,i.azimuthalInvert)(function(e){return e})},{"../math.js":475,"./azimuthal.js":488,"./index.js":501}],491:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.conicProjection=function(e){var t=0,n=i.pi/3,r=(0,o.projectionMutator)(e),e=r(t,n);return e.parallels=function(e){return arguments.length?r(t=e[0]*i.radians,n=e[1]*i.radians):[t*i.degrees,n*i.degrees]},e};var i=e("../math.js"),o=e("./index.js")},{"../math.js":475,"./index.js":501}],492:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.conicConformalRaw=i,n.default=function(){return(0,r.conicProjection)(i).scale(109.5).parallels([30,30])};var a=e("../math.js"),r=e("./conic.js"),s=e("./mercator.js");function l(e){return(0,a.tan)((a.halfPi+e)/2)}function i(e,t){var n=(0,a.cos)(e),i=e===t?(0,a.sin)(e):(0,a.log)(n/(0,a.cos)(t))/(0,a.log)(l(t)/l(e)),o=n*(0,a.pow)(l(e),i)/i;return i?(r.invert=function(e,t){var n=o-t,r=(0,a.sign)(i)*(0,a.sqrt)(e*e+n*n),t=(0,a.atan2)(e,(0,a.abs)(n))*(0,a.sign)(n);return n*i<0&&(t-=a.pi*(0,a.sign)(e)*(0,a.sign)(n)),[t/i,2*(0,a.atan)((0,a.pow)(o/r,1/i))-a.halfPi]},r):s.mercatorRaw;function r(e,t){0<o?t<-a.halfPi+a.epsilon&&(t=-a.halfPi+a.epsilon):t>a.halfPi-a.epsilon&&(t=a.halfPi-a.epsilon);t=o/(0,a.pow)(l(t),i);return[t*(0,a.sin)(i*e),o-t*(0,a.cos)(i*e)]}}},{"../math.js":475,"./conic.js":491,"./mercator.js":502}],493:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.conicEqualAreaRaw=i,n.default=function(){return(0,r.conicProjection)(i).scale(155.424).center([0,33.6442])};var s=e("../math.js"),r=e("./conic.js"),l=e("./cylindricalEqualArea.js");function i(e,t){var n=(0,s.sin)(e),r=(n+(0,s.sin)(t))/2;if((0,s.abs)(r)<s.epsilon)return(0,l.cylindricalEqualAreaRaw)(e);var i=1+n*(2*r-n),o=(0,s.sqrt)(i)/r;function a(e,t){t=(0,s.sqrt)(i-2*r*(0,s.sin)(t))/r;return[t*(0,s.sin)(e*=r),o-t*(0,s.cos)(e)]}return a.invert=function(e,t){var n=o-t,t=(0,s.atan2)(e,(0,s.abs)(n))*(0,s.sign)(n);return n*r<0&&(t-=s.pi*(0,s.sign)(e)*(0,s.sign)(n)),[t/r,(0,s.asin)((i-(e*e+n*n)*r*r)/(2*r))]},a}},{"../math.js":475,"./conic.js":491,"./cylindricalEqualArea.js":495}],494:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.conicEquidistantRaw=i,n.default=function(){return(0,r.conicProjection)(i).scale(131.154).center([0,13.9389])};var a=e("../math.js"),r=e("./conic.js"),s=e("./equirectangular.js");function i(e,t){var n=(0,a.cos)(e),r=e===t?(0,a.sin)(e):(n-(0,a.cos)(t))/(t-e),i=n/r+e;return(0,a.abs)(r)<a.epsilon?s.equirectangularRaw:(o.invert=function(e,t){var n=i-t,t=(0,a.atan2)(e,(0,a.abs)(n))*(0,a.sign)(n);return n*r<0&&(t-=a.pi*(0,a.sign)(e)*(0,a.sign)(n)),[t/r,i-(0,a.sign)(r)*(0,a.sqrt)(e*e+n*n)]},o);function o(e,t){t=i-t,e*=r;return[t*(0,a.sin)(e),i-t*(0,a.cos)(e)]}}},{"../math.js":475,"./conic.js":491,"./equirectangular.js":497}],495:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.cylindricalEqualAreaRaw=function(e){var n=(0,r.cos)(e);function t(e,t){return[e*n,(0,r.sin)(t)/n]}return t.invert=function(e,t){return[e/n,(0,r.asin)(t*n)]},t};var r=e("../math.js")},{"../math.js":475}],496:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return(0,r.default)(i).scale(177.158)},n.equalEarthRaw=i;var r=(n=e("./index.js"))&&n.__esModule?n:{default:n},s=e("../math.js");var l=1.340264,u=-.081106,c=893e-6,f=.003796,d=(0,s.sqrt)(3)/2;function i(e,t){var n=(0,s.asin)(d*(0,s.sin)(t)),r=n*n,t=r*r*r;return[e*(0,s.cos)(n)/(d*(l+3*u*r+t*(7*c+9*f*r))),n*(l+u*r+t*(c+f*r))]}i.invert=function(e,t){for(var n,r=t,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(l+u*i+o*(c+f*i))-t)/(l+3*u*i+o*(7*c+9*f*i)))*r)*i*i,!((0,s.abs)(n)<s.epsilon2));++a);return[d*e*(l+3*u*i+o*(7*c+9*f*i))/(0,s.cos)(r),(0,s.asin)((0,s.sin)(r)/d)]}},{"../math.js":475,"./index.js":501}],497:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return(0,r.default)(i).scale(152.63)},n.equirectangularRaw=i;var r=(e=e("./index.js"))&&e.__esModule?e:{default:e};function i(e,t){return[e,t]}i.invert=i},{"./index.js":501}],498:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fitExtent=s,n.fitHeight=function(i,o,e){return a(i,function(e){var t=+o,n=t/(e[1][1]-e[0][1]),r=-n*e[0][0],e=(t-n*(e[1][1]+e[0][1]))/2;i.scale(150*n).translate([r,e])},e)},n.fitSize=function(e,t,n){return s(e,[[0,0],t],n)},n.fitWidth=function(r,i,e){return a(r,function(e){var t=+i,n=t/(e[1][0]-e[0][0]),t=(t-n*(e[1][0]+e[0][0]))/2,e=-n*e[0][1];r.scale(150*n).translate([t,e])},e)};var i=r(e("../stream.js")),o=r(e("../path/bounds.js"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),(0,i.default)(n,e.stream(o.default)),t(o.default.result()),null!=r&&e.clipExtent(r),e}function s(i,o,e){return a(i,function(e){var t=o[1][0]-o[0][0],n=o[1][1]-o[0][1],r=Math.min(t/(e[1][0]-e[0][0]),n/(e[1][1]-e[0][1])),t=+o[0][0]+(t-r*(e[1][0]+e[0][0]))/2,e=+o[0][1]+(n-r*(e[1][1]+e[0][1]))/2;i.scale(150*r).translate([t,e])},e)}},{"../path/bounds.js":478,"../stream.js":509}],499:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return(0,r.default)(o).scale(144.049).clipAngle(60)},n.gnomonicRaw=o;var i=e("../math.js"),n=e("./azimuthal.js"),r=(e=e("./index.js"))&&e.__esModule?e:{default:e};function o(e,t){var n=(0,i.cos)(t),r=(0,i.cos)(e)*n;return[n*(0,i.sin)(e)/r,(0,i.sin)(t)/r]}o.invert=(0,n.azimuthalInvert)(i.atan)},{"../math.js":475,"./azimuthal.js":488,"./index.js":501}],500:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var r,i,t,n,o,a,s,l=1,u=0,c=0,f=1,d=1,h=0,p=null,y=1,g=1,v=(0,M.transformer)({point:function(e,t){t=x([e,t]);this.stream.point(t[0],t[1])}}),m=w.default;function b(){return y=l*f,g=l*d,a=s=null,x}function x(e){var t=e[0]*y,n=e[1]*g;return h&&(e=n*r-t*i,t=t*r+n*i,n=e),[t+u,n+c]}return x.invert=function(e){var t=e[0]-u,n=e[1]-c;return h&&(e=n*r+t*i,t=t*r-n*i,n=e),[t/y,n/g]},x.stream=function(e){return a&&s===e?a:a=v(m(s=e))},x.postclip=function(e){return arguments.length?(m=e,p=t=n=o=null,b()):m},x.clipExtent=function(e){return arguments.length?(m=null==e?(p=t=n=o=null,w.default):(0,_.default)(p=+e[0][0],t=+e[0][1],n=+e[1][0],o=+e[1][1]),b()):null==p?null:[[p,t],[n,o]]},x.scale=function(e){return arguments.length?(l=+e,b()):l},x.translate=function(e){return arguments.length?(u=+e[0],c=+e[1],b()):[u,c]},x.angle=function(e){return arguments.length?(h=e%360*k.radians,i=(0,k.sin)(h),r=(0,k.cos)(h),b()):h*k.degrees},x.reflectX=function(e){return arguments.length?(f=e?-1:1,b()):f<0},x.reflectY=function(e){return arguments.length?(d=e?-1:1,b()):d<0},x.fitExtent=function(e,t){return(0,j.fitExtent)(x,e,t)},x.fitSize=function(e,t){return(0,j.fitSize)(x,e,t)},x.fitWidth=function(e,t){return(0,j.fitWidth)(x,e,t)},x.fitHeight=function(e,t){return(0,j.fitHeight)(x,e,t)},x};var _=r(e("../clip/rectangle.js")),w=r(e("../identity.js")),M=e("../transform.js"),j=e("./fit.js"),k=e("../math.js");function r(e){return e&&e.__esModule?e:{default:e}}},{"../clip/rectangle.js":464,"../identity.js":471,"../math.js":475,"../transform.js":510,"./fit.js":498}],501:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return i(function(){return e})()},n.projectionMutator=i;var E=r(e("../clip/antimeridian.js")),C=r(e("../clip/circle.js")),L=r(e("../clip/rectangle.js")),R=r(e("../compose.js")),I=r(e("../identity.js")),z=e("../math.js"),D=e("../rotation.js"),N=e("../transform.js"),F=e("./fit.js"),B=r(e("./resample.js"));function r(e){return e&&e.__esModule?e:{default:e}}var U=(0,N.transformer)({point:function(e,t){this.stream.point(e*z.radians,t*z.radians)}});function q(e,n,r,i,o,t){if(!t)return s=e,l=n,u=r,c=i,f=o,a.invert=function(e,t){return[(e-l)/s*c,(u-t)/s*f]},a;function a(e,t){return[l+s*(e*=c),u-s*(t*=f)]}var s,l,u,c,f,d=(0,z.cos)(t),t=(0,z.sin)(t),h=d*e,p=t*e,y=d/e,g=t/e,v=(t*r-d*n)/e,m=(t*n+d*r)/e;function b(e,t){return[h*(e*=i)-p*(t*=o)+n,r-p*e-h*t]}return b.invert=function(e,t){return[i*(y*e-g*t+v),o*(m-g*e-y*t)]},b}function i(e){var t,r,n,i,o,a,s,l,u,c,f=150,d=480,h=250,p=0,y=0,g=0,v=0,m=0,b=0,x=1,_=1,w=null,M=E.default,j=null,k=I.default,O=.5;function A(e){return l(e[0]*z.radians,e[1]*z.radians)}function T(e){return(e=l.invert(e[0],e[1]))&&[e[0]*z.degrees,e[1]*z.degrees]}function P(){var e=q(f,0,0,x,_,b).apply(null,t(p,y)),e=q(f,d-e[0],h-e[1],x,_,b);return r=(0,D.rotateRadians)(g,v,m),s=(0,R.default)(t,e),l=(0,R.default)(r,s),a=(0,B.default)(s,O),S()}function S(){return u=c=null,A}return A.stream=function(e){return u&&c===e?u:u=U((n=r,(0,N.transformer)({point:function(e,t){t=n(e,t);return this.stream.point(t[0],t[1])}})(M(a(k(c=e))))));var n},A.preclip=function(e){return arguments.length?(M=e,w=void 0,S()):M},A.postclip=function(e){return arguments.length?(k=e,j=n=i=o=null,S()):k},A.clipAngle=function(e){return arguments.length?(M=+e?(0,C.default)(w=e*z.radians):(w=null,E.default),S()):w*z.degrees},A.clipExtent=function(e){return arguments.length?(k=null==e?(j=n=i=o=null,I.default):(0,L.default)(j=+e[0][0],n=+e[0][1],i=+e[1][0],o=+e[1][1]),S()):null==j?null:[[j,n],[i,o]]},A.scale=function(e){return arguments.length?(f=+e,P()):f},A.translate=function(e){return arguments.length?(d=+e[0],h=+e[1],P()):[d,h]},A.center=function(e){return arguments.length?(p=e[0]%360*z.radians,y=e[1]%360*z.radians,P()):[p*z.degrees,y*z.degrees]},A.rotate=function(e){return arguments.length?(g=e[0]%360*z.radians,v=e[1]%360*z.radians,m=2<e.length?e[2]%360*z.radians:0,P()):[g*z.degrees,v*z.degrees,m*z.degrees]},A.angle=function(e){return arguments.length?(b=e%360*z.radians,P()):b*z.degrees},A.reflectX=function(e){return arguments.length?(x=e?-1:1,P()):x<0},A.reflectY=function(e){return arguments.length?(_=e?-1:1,P()):_<0},A.precision=function(e){return arguments.length?(a=(0,B.default)(s,O=e*e),S()):(0,z.sqrt)(O)},A.fitExtent=function(e,t){return(0,F.fitExtent)(A,e,t)},A.fitSize=function(e,t){return(0,F.fitSize)(A,e,t)},A.fitWidth=function(e,t){return(0,F.fitWidth)(A,e,t)},A.fitHeight=function(e,t){return(0,F.fitHeight)(A,e,t)},function(){return t=e.apply(this,arguments),A.invert=t.invert&&T,P()}}},{"../clip/antimeridian.js":458,"../clip/circle.js":460,"../clip/rectangle.js":464,"../compose.js":466,"../identity.js":471,"../math.js":475,"../rotation.js":508,"../transform.js":510,"./fit.js":498,"./resample.js":505}],502:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return i(y).scale(961/d.tau)},n.mercatorProjection=i,n.mercatorRaw=y;var d=e("../math.js"),h=r(e("../rotation.js")),p=r(e("./index.js"));function r(e){return e&&e.__esModule?e:{default:e}}function y(e,t){return[e,(0,d.log)((0,d.tan)((d.halfPi+t)/2))]}function i(n){var r,i,o,a=(0,p.default)(n),t=a.center,s=a.scale,l=a.translate,u=a.clipExtent,c=null;function f(){var e=d.pi*s(),t=a((0,h.default)(a.rotate()).invert([0,0]));return u(null==c?[[t[0]-e,t[1]-e],[t[0]+e,t[1]+e]]:n===y?[[Math.max(t[0]-e,c),r],[Math.min(t[0]+e,i),o]]:[[c,Math.max(t[1]-e,r)],[i,Math.min(t[1]+e,o)]])}return a.scale=function(e){return arguments.length?(s(e),f()):s()},a.translate=function(e){return arguments.length?(l(e),f()):l()},a.center=function(e){return arguments.length?(t(e),f()):t()},a.clipExtent=function(e){return arguments.length?(null==e?c=r=i=o=null:(c=+e[0][0],r=+e[0][1],i=+e[1][0],o=+e[1][1]),f()):null==c?null:[[c,r],[i,o]]},f()}y.invert=function(e,t){return[e,2*(0,d.atan)((0,d.exp)(t))-d.halfPi]}},{"../math.js":475,"../rotation.js":508,"./index.js":501}],503:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return(0,r.default)(i).scale(175.295)},n.naturalEarth1Raw=i;var r=(n=e("./index.js"))&&n.__esModule?n:{default:n},a=e("../math.js");function i(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}i.invert=function(e,t){var n=t,r=25;do{var i=n*n,o=i*i}while(n-=o=(n*(1.007226+i*(.015085+o*(.028874*i-.044475-.005916*o)))-t)/(1.007226+i*(.045255+o*(.259866*i-.311325-.005916*11*o))),(0,a.abs)(o)>a.epsilon&&0<--r);return[e/(.8707+(i=n*n)*(i*(i*i*i*(.003971-.001529*i)-.013791)-.131979)),n]}},{"../math.js":475,"./index.js":501}],504:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return(0,i.default)(o).scale(249.5).clipAngle(90+r.epsilon)},n.orthographicRaw=o;var r=e("../math.js"),n=e("./azimuthal.js"),i=(e=e("./index.js"))&&e.__esModule?e:{default:e};function o(e,t){return[(0,r.cos)(t)*(0,r.sin)(e),(0,r.sin)(t)]}o.invert=(0,n.azimuthalInvert)(r.asin)},{"../math.js":475,"./azimuthal.js":488,"./index.js":501}],505:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return+t?function(A,T){function P(e,t,n,r,i,o,a,s,l,u,c,f,d,h){var p,y,g,v,m,b,x,_,w,M,j=a-e,k=s-t,O=j*j+k*k;4*T<O&&d--&&(v=(0,S.sqrt)((p=r+u)*p+(y=i+c)*y+(g=o+f)*g),w=(0,S.asin)(g/=v),m=(0,S.abs)((0,S.abs)(g)-1)<S.epsilon||(0,S.abs)(n-l)<S.epsilon?(n+l)/2:(0,S.atan2)(y,p),b=(M=A(m,w))[0],x=M[1],(T<(M=k*(_=b-e)-j*(w=x-t))*M/O||.3<(0,S.abs)((j*_+k*w)/O-.5)||r*u+i*c+o*f<E)&&(P(e,t,n,r,i,o,b,x,m,p/=v,y/=v,g,d,h),h.point(b,x),P(b,x,m,p,y,g,a,s,l,u,c,f,d,h)))}return function(r){var n,i,o,a,s,l,u,c,f,d,h,p,y={point:e,lineStart:t,lineEnd:v,polygonStart:function(){r.polygonStart(),y.lineStart=m},polygonEnd:function(){r.polygonEnd(),y.lineStart=t}};function e(e,t){e=A(e,t),r.point(e[0],e[1])}function t(){c=NaN,y.point=g,r.lineStart()}function g(e,t){var n=(0,_.cartesian)([e,t]),t=A(e,t);P(c,f,u,d,h,p,c=t[0],f=t[1],u=e,d=n[0],h=n[1],p=n[2],w,r),r.point(c,f)}function v(){y.point=e,r.lineEnd()}function m(){t(),y.point=b,y.lineEnd=x}function b(e,t){g(n=e,t),i=c,o=f,a=d,s=h,l=p,y.point=g}function x(){P(c,f,u,d,h,p,i,o,n,a,s,l,w,r),y.lineEnd=v,v()}return y}}(e,t):function(n){return(0,r.transformer)({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}})}(e)};var _=e("../cartesian.js"),S=e("../math.js"),r=e("../transform.js"),w=16,E=(0,S.cos)(30*S.radians)},{"../cartesian.js":455,"../math.js":475,"../transform.js":510}],506:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return(0,r.default)(o).scale(250).clipAngle(142)},n.stereographicRaw=o;var i=e("../math.js"),n=e("./azimuthal.js"),r=(e=e("./index.js"))&&e.__esModule?e:{default:e};function o(e,t){var n=(0,i.cos)(t),r=1+(0,i.cos)(e)*n;return[n*(0,i.sin)(e)/r,(0,i.sin)(t)/r]}o.invert=(0,n.azimuthalInvert)(function(e){return 2*(0,i.atan)(e)})},{"../math.js":475,"./azimuthal.js":488,"./index.js":501}],507:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=(0,i.mercatorProjection)(o),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],2<e.length?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)},n.transverseMercatorRaw=o;var r=e("../math.js"),i=e("./mercator.js");function o(e,t){return[(0,r.log)((0,r.tan)((r.halfPi+t)/2)),-e]}o.invert=function(e,t){return[-t,2*(0,r.atan)((0,r.exp)(e))-r.halfPi]}},{"../math.js":475,"./mercator.js":502}],508:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){function e(e){return(e=t(e[0]*l.radians,e[1]*l.radians))[0]*=l.degrees,e[1]*=l.degrees,e}return t=o(t[0]*l.radians,t[1]*l.radians,2<t.length?t[2]*l.radians:0),e.invert=function(e){return(e=t.invert(e[0]*l.radians,e[1]*l.radians))[0]*=l.degrees,e[1]*=l.degrees,e},e},n.rotateRadians=o;var r=(n=e("./compose.js"))&&n.__esModule?n:{default:n},l=e("./math.js");function i(e,t){return[(0,l.abs)(e)>l.pi?e+Math.round(-e/l.tau)*l.tau:e,t]}function o(e,t,n){return(e%=l.tau)?t||n?(0,r.default)(s(e),u(t,n)):s(e):t||n?u(t,n):i}function a(n){return function(e,t){return[(e+=n)>l.pi?e-l.tau:e<-l.pi?e+l.tau:e,t]}}function s(e){var t=a(e);return t.invert=a(-e),t}function u(e,t){var i=(0,l.cos)(e),o=(0,l.sin)(e),a=(0,l.cos)(t),s=(0,l.sin)(t);function n(e,t){var n=(0,l.cos)(t),r=(0,l.cos)(e)*n,e=(0,l.sin)(e)*n,n=(0,l.sin)(t),t=n*i+r*o;return[(0,l.atan2)(e*a-t*s,r*i-n*o),(0,l.asin)(t*a+e*s)]}return n.invert=function(e,t){var n=(0,l.cos)(t),r=(0,l.cos)(e)*n,e=(0,l.sin)(e)*n,n=(0,l.sin)(t),t=n*a-e*s;return[(0,l.atan2)(e*a+n*s,r*i+t*o),(0,l.asin)(t*i-r*o)]},n}i.invert=i},{"./compose.js":466,"./math.js":475}],509:[function(e,t,n){"use strict";function o(e,t){e&&i.hasOwnProperty(e.type)&&i[e.type](e,t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){e&&r.hasOwnProperty(e.type)?r[e.type](e,t):o(e,t)};var r={Feature:function(e,t){o(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)o(n[r].geometry,t)}},i={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){a(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)a(n[r],t,0)},Polygon:function(e,t){s(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)s(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)o(n[r],t)}};function a(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function s(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)a(e[n],t,1);t.polygonEnd()}},{}],510:[function(e,t,n){"use strict";function r(r){return function(e){var t,n=new i;for(t in r)n[t]=r[t];return n.stream=e,n}}function i(){}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return{stream:r(e)}},n.transformer=r,i.prototype={constructor:i,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},{}],511:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var T=i,P=o,S=(0,r.default)(0),E=null,C=a,L=s,R=l,I=null;function t(){var e,t,n,r,i,o,a,s,l,u,c,f,d,h,p,y,g,v,m,b,x,_,w=+T.apply(this,arguments),M=+P.apply(this,arguments),j=C.apply(this,arguments)-D.halfPi,k=L.apply(this,arguments)-D.halfPi,O=(0,D.abs)(k-j),A=j<k;if(I=I||(e=(0,z.path)()),M<w&&(c=M,M=w,w=c),M>D.epsilon?O>D.tau-D.epsilon?(I.moveTo(M*(0,D.cos)(j),M*(0,D.sin)(j)),I.arc(0,0,M,j,k,!A),w>D.epsilon&&(I.moveTo(w*(0,D.cos)(k),w*(0,D.sin)(k)),I.arc(0,0,w,k,j,A))):(r=t=j,i=n=k,a=o=O,f=(d=R.apply(this,arguments)/2)>D.epsilon&&(E?+E.apply(this,arguments):(0,D.sqrt)(w*w+M*M)),_=x=s=(0,D.min)((0,D.abs)(M-w)/2,+S.apply(this,arguments)),f>D.epsilon&&(h=(0,D.asin)(f/w*(0,D.sin)(d)),m=(0,D.asin)(f/M*(0,D.sin)(d)),(o-=2*h)>D.epsilon?(r+=h*=A?1:-1,i-=h):(o=0,r=i=(j+k)/2),(a-=2*m)>D.epsilon?(t+=m*=A?1:-1,n-=m):(a=0,t=n=(j+k)/2)),c=M*(0,D.cos)(t),f=M*(0,D.sin)(t),d=w*(0,D.cos)(i),h=w*(0,D.sin)(i),s>D.epsilon&&(p=M*(0,D.cos)(n),y=M*(0,D.sin)(n),g=w*(0,D.cos)(r),v=w*(0,D.sin)(r),O<D.pi&&(b=function(e,t,n,r,i,o,a,s){var l=n-e,n=r-t,r=a-i,a=s-o,s=a*l-r*n;if(!(s*s<D.epsilon))return[e+(s=(r*(t-o)-a*(e-i))/s)*l,t+s*n]}(c,f,g,v,p,y,d,h))&&(m=c-b[0],j=f-b[1],k=p-b[0],O=y-b[1],O=1/(0,D.sin)((0,D.acos)((m*k+j*O)/((0,D.sqrt)(m*m+j*j)*(0,D.sqrt)(k*k+O*O)))/2),b=(0,D.sqrt)(b[0]*b[0]+b[1]*b[1]),x=(0,D.min)(s,(w-b)/(O-1)),_=(0,D.min)(s,(M-b)/(1+O)))),a>D.epsilon?_>D.epsilon?(l=N(g,v,c,f,M,_,A),u=N(p,y,d,h,M,_,A),I.moveTo(l.cx+l.x01,l.cy+l.y01),_<s?I.arc(l.cx,l.cy,_,(0,D.atan2)(l.y01,l.x01),(0,D.atan2)(u.y01,u.x01),!A):(I.arc(l.cx,l.cy,_,(0,D.atan2)(l.y01,l.x01),(0,D.atan2)(l.y11,l.x11),!A),I.arc(0,0,M,(0,D.atan2)(l.cy+l.y11,l.cx+l.x11),(0,D.atan2)(u.cy+u.y11,u.cx+u.x11),!A),I.arc(u.cx,u.cy,_,(0,D.atan2)(u.y11,u.x11),(0,D.atan2)(u.y01,u.x01),!A))):(I.moveTo(c,f),I.arc(0,0,M,t,n,!A)):I.moveTo(c,f),w>D.epsilon&&o>D.epsilon?x>D.epsilon?(l=N(d,h,p,y,w,-x,A),u=N(c,f,g,v,w,-x,A),I.lineTo(l.cx+l.x01,l.cy+l.y01),x<s?I.arc(l.cx,l.cy,x,(0,D.atan2)(l.y01,l.x01),(0,D.atan2)(u.y01,u.x01),!A):(I.arc(l.cx,l.cy,x,(0,D.atan2)(l.y01,l.x01),(0,D.atan2)(l.y11,l.x11),!A),I.arc(0,0,w,(0,D.atan2)(l.cy+l.y11,l.cx+l.x11),(0,D.atan2)(u.cy+u.y11,u.cx+u.x11),A),I.arc(u.cx,u.cy,x,(0,D.atan2)(u.y11,u.x11),(0,D.atan2)(u.y01,u.x01),!A))):I.arc(0,0,w,i,r,A):I.lineTo(d,h)):I.moveTo(0,0),I.closePath(),e)return I=null,e+""||null}return t.centroid=function(){var e=(+T.apply(this,arguments)+ +P.apply(this,arguments))/2,t=(+C.apply(this,arguments)+ +L.apply(this,arguments))/2-D.pi/2;return[(0,D.cos)(t)*e,(0,D.sin)(t)*e]},t.innerRadius=function(e){return arguments.length?(T="function"==typeof e?e:(0,r.default)(+e),t):T},t.outerRadius=function(e){return arguments.length?(P="function"==typeof e?e:(0,r.default)(+e),t):P},t.cornerRadius=function(e){return arguments.length?(S="function"==typeof e?e:(0,r.default)(+e),t):S},t.padRadius=function(e){return arguments.length?(E=null==e?null:"function"==typeof e?e:(0,r.default)(+e),t):E},t.startAngle=function(e){return arguments.length?(C="function"==typeof e?e:(0,r.default)(+e),t):C},t.endAngle=function(e){return arguments.length?(L="function"==typeof e?e:(0,r.default)(+e),t):L},t.padAngle=function(e){return arguments.length?(R="function"==typeof e?e:(0,r.default)(+e),t):R},t.context=function(e){return arguments.length?(I=null==e?null:e,t):I},t};var z=e("d3-path"),r=(n=e("./constant.js"))&&n.__esModule?n:{default:n},D=e("./math.js");function i(e){return e.innerRadius}function o(e){return e.outerRadius}function a(e){return e.startAngle}function s(e){return e.endAngle}function l(e){return e&&e.padAngle}function N(e,t,n,r,i,o,a){var s=e-n,l=t-r,u=(a?o:-o)/(0,D.sqrt)(s*s+l*l),c=u*l,f=-u*s,d=e+c,h=t+f,a=n+c,l=r+f,u=(d+a)/2,s=(h+l)/2,e=a-d,t=l-h,n=e*e+t*t,r=i-o,o=d*l-a*h,d=(t<0?-1:1)*(0,D.sqrt)((0,D.max)(0,r*r*n-o*o)),l=(o*t-e*d)/n,a=(-o*e-t*d)/n,h=(o*t+e*d)/n,t=(-o*e+t*d)/n,d=l-u,n=a-s,u=h-u,s=t-s;return u*u+s*s<d*d+n*n&&(l=h,a=t),{cx:l,cy:a,x01:-c,y01:-f,x11:l*(i/r-1),y11:a*(i/r-1)}}},{"./constant.js":515,"./math.js":539,"d3-path":225}],512:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(c,f,d){var h=null,p=(0,r.default)(!0),y=null,g=i.default,v=null;function t(e){var t,n,r,i,o,a=(e=(0,b.default)(e)).length,s=!1,l=new Array(a),u=new Array(a);for(null==y&&(v=g(o=(0,m.path)())),t=0;t<=a;++t){if(!(t<a&&p(i=e[t],t,e))===s)if(s=!s)n=t,v.areaStart(),v.lineStart();else{for(v.lineEnd(),v.lineStart(),r=t-1;n<=r;--r)v.point(l[r],u[r]);v.lineEnd(),v.areaEnd()}s&&(l[t]=+c(i,t,e),u[t]=+f(i,t,e),v.point(h?+h(i,t,e):l[t],d?+d(i,t,e):u[t]))}if(o)return v=null,o+""||null}function e(){return(0,o.default)().defined(p).curve(g).context(y)}return c="function"==typeof c?c:void 0===c?a.x:(0,r.default)(+c),f="function"==typeof f?f:void 0===f?(0,r.default)(0):(0,r.default)(+f),d="function"==typeof d?d:void 0===d?a.y:(0,r.default)(+d),t.x=function(e){return arguments.length?(c="function"==typeof e?e:(0,r.default)(+e),h=null,t):c},t.x0=function(e){return arguments.length?(c="function"==typeof e?e:(0,r.default)(+e),t):c},t.x1=function(e){return arguments.length?(h=null==e?null:"function"==typeof e?e:(0,r.default)(+e),t):h},t.y=function(e){return arguments.length?(f="function"==typeof e?e:(0,r.default)(+e),d=null,t):f},t.y0=function(e){return arguments.length?(f="function"==typeof e?e:(0,r.default)(+e),t):f},t.y1=function(e){return arguments.length?(d=null==e?null:"function"==typeof e?e:(0,r.default)(+e),t):d},t.lineX0=t.lineY0=function(){return e().x(c).y(f)},t.lineY1=function(){return e().x(c).y(d)},t.lineX1=function(){return e().x(h).y(f)},t.defined=function(e){return arguments.length?(p="function"==typeof e?e:(0,r.default)(!!e),t):p},t.curve=function(e){return arguments.length?(g=e,null!=y&&(v=g(y)),t):g},t.context=function(e){return arguments.length?(null==e?y=v=null:v=g(y=e),t):y},t};var m=e("d3-path"),b=s(e("./array.js")),r=s(e("./constant.js")),i=s(e("./curve/linear.js")),o=s(e("./line.js")),a=e("./point.js");function s(e){return e&&e.__esModule?e:{default:e}}},{"./array.js":514,"./constant.js":515,"./curve/linear.js":527,"./line.js":536,"./point.js":553,"d3-path":225}],513:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=(0,l.default)().curve(s.curveRadialLinear),t=e.curve,n=e.lineX0,r=e.lineX1,i=e.lineY0,o=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return(0,u.lineRadial)(n())},delete e.lineX0,e.lineEndAngle=function(){return(0,u.lineRadial)(r())},delete e.lineX1,e.lineInnerRadius=function(){return(0,u.lineRadial)(i())},delete e.lineY0,e.lineOuterRadius=function(){return(0,u.lineRadial)(o())},delete e.lineY1,e.curve=function(e){return arguments.length?t((0,s.default)(e)):t()._curve},e};var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=c(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./curve/radial.js")),l=(n=e("./area.js"))&&n.__esModule?n:{default:n},u=e("./lineRadial.js");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}},{"./area.js":512,"./curve/radial.js":531,"./lineRadial.js":537}],514:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return"object"===r(e)&&"length"in e?e:Array.from(e)},n.slice=void 0;var i=Array.prototype.slice;n.slice=i},{}],515:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(){return e}}},{}],516:[function(e,t,n){"use strict";function r(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function i(e){this._context=e}Object.defineProperty(n,"__esModule",{value:!0}),n.Basis=i,n.default=function(e){return new i(e)},n.point=r,i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:r(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:r(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}}},{}],517:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return new i(e)};var n=(n=e("../noop.js"))&&n.__esModule?n:{default:n},r=e("./basis.js");function i(e){this._context=e}i.prototype={areaStart:n.default,areaEnd:n.default,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:(0,r.point)(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}}},{"../noop.js":540,"./basis.js":516}],518:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return new r(e)};var i=e("./basis.js");function r(e){this._context=e}r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:(0,i.point)(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}}},{"./basis.js":516}],519:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.bumpRadial=function(e){return new c(e)},n.bumpX=function(e){return new u(e,!0)},n.bumpY=function(e){return new u(e,!1)};var o=(e=e("../pointRadial.js"))&&e.__esModule?e:{default:e};function a(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var u=function(){function n(e,t){i(this,n),this._context=e,this._x=t}return l(n,[{key:"areaStart",value:function(){this._line=0}},{key:"areaEnd",value:function(){this._line=NaN}},{key:"lineStart",value:function(){this._point=0}},{key:"lineEnd",value:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}},{key:"point",value:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}]),n}(),c=function(){function t(e){i(this,t),this._context=e}return l(t,[{key:"lineStart",value:function(){this._point=0}},{key:"lineEnd",value:function(){}},{key:"point",value:function(e,t){var n,r,i;e=+e,t=+t,0==this._point++?(this._x0=e,this._y0=t):(n=(0,o.default)(this._x0,this._y0),r=(0,o.default)(this._x0,this._y0=(this._y0+t)/2),i=(0,o.default)(e,this._y0),e=(0,o.default)(e,t),(t=this._context).moveTo.apply(t,a(n)),(n=this._context).bezierCurveTo.apply(n,a(r).concat(a(i),a(e))))}}]),t}()},{"../pointRadial.js":554}],520:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("./basis.js");function i(e,t){this._basis=new r.Basis(e),this._beta=t}i.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(0<n)for(var r,i=e[0],o=t[0],a=e[n]-i,s=t[n]-o,l=-1;++l<=n;)this._basis.point(this._beta*e[l]+(1-this._beta)*(i+(r=l/n)*a),this._beta*t[l]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};e=function t(n){function e(e){return 1===n?new r.Basis(e):new i(e,n)}return e.beta=function(e){return t(+e)},e}(.85);n.default=e},{"./basis.js":516}],521:[function(e,t,n){"use strict";function r(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function i(e,t){this._context=e,this._k=(1-t)/6}Object.defineProperty(n,"__esModule",{value:!0}),n.Cardinal=i,n.default=void 0,n.point=r,i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:r(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:r(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var o=function t(n){function e(e){return new i(e,n)}return e.tension=function(e){return t(+e)},e}(0);n.default=o},{}],522:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CardinalClosed=o,n.default=void 0;var r=(r=e("../noop.js"))&&r.__esModule?r:{default:r},i=e("./cardinal.js");function o(e,t){this._context=e,this._k=(1-t)/6}o.prototype={areaStart:r.default,areaEnd:r.default,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:(0,i.point)(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};r=function t(n){function e(e){return new o(e,n)}return e.tension=function(e){return t(+e)},e}(0);n.default=r},{"../noop.js":540,"./cardinal.js":521}],523:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CardinalOpen=i,n.default=void 0;var r=e("./cardinal.js");function i(e,t){this._context=e,this._k=(1-t)/6}i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:(0,r.point)(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};e=function t(n){function e(e){return new i(e,n)}return e.tension=function(e){return t(+e)},e}(0);n.default=e},{"./cardinal.js":521}],524:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.point=i;var u=e("../math.js"),r=e("./cardinal.js");function i(e,t,n){var r,i,o=e._x1,a=e._y1,s=e._x2,l=e._y2;e._l01_a>u.epsilon&&(r=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,i=3*e._l01_a*(e._l01_a+e._l12_a),o=(o*r-e._x0*e._l12_2a+e._x2*e._l01_2a)/i,a=(a*r-e._y0*e._l12_2a+e._y2*e._l01_2a)/i),e._l23_a>u.epsilon&&(r=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,i=3*e._l23_a*(e._l23_a+e._l12_a),s=(s*r+e._x1*e._l23_2a-t*e._l12_2a)/i,l=(l*r+e._y1*e._l23_2a-n*e._l12_2a)/i),e._context.bezierCurveTo(o,a,s,l,e._x2,e._y2)}function o(e,t){this._context=e,this._alpha=t}o.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n,r;switch(e=+e,t=+t,this._point&&(n=this._x2-e,r=this._y2-t,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))),this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:i(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};e=function t(n){function e(e){return n?new o(e,n):new r.Cardinal(e,0)}return e.alpha=function(e){return t(+e)},e}(.5);n.default=e},{"../math.js":539,"./cardinal.js":521}],525:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("./cardinalClosed.js"),i=(i=e("../noop.js"))&&i.__esModule?i:{default:i},o=e("./catmullRom.js");function a(e,t){this._context=e,this._alpha=t}a.prototype={areaStart:i.default,areaEnd:i.default,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){var n,r;switch(e=+e,t=+t,this._point&&(n=this._x2-e,r=this._y2-t,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))),this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:(0,o.point)(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};i=function t(n){function e(e){return n?new a(e,n):new r.CardinalClosed(e,0)}return e.alpha=function(e){return t(+e)},e}(.5);n.default=i},{"../noop.js":540,"./cardinalClosed.js":522,"./catmullRom.js":524}],526:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("./cardinalOpen.js"),i=e("./catmullRom.js");function o(e,t){this._context=e,this._alpha=t}o.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n,r;switch(e=+e,t=+t,this._point&&(n=this._x2-e,r=this._y2-t,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))),this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:(0,i.point)(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};e=function t(n){function e(e){return n?new o(e,n):new r.CardinalOpen(e,0)}return e.alpha=function(e){return t(+e)},e}(.5);n.default=e},{"./cardinalOpen.js":523,"./catmullRom.js":524}],527:[function(e,t,n){"use strict";function r(e){this._context=e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return new r(e)},r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}}},{}],528:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return new r(e)};e=(e=e("../noop.js"))&&e.__esModule?e:{default:e};function r(e){this._context=e}r.prototype={areaStart:e.default,areaEnd:e.default,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}}},{"../noop.js":540}],529:[function(e,t,n){"use strict";function o(e){return e<0?-1:1}function r(e,t,n){var r=e._x1-e._x0,i=t-e._x1,t=(e._y1-e._y0)/(r||i<0&&-0),e=(n-e._y1)/(i||r<0&&-0),i=(t*i+e*r)/(r+i);return(o(t)+o(e))*Math.min(Math.abs(t),Math.abs(e),.5*Math.abs(i))||0}function i(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function a(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function s(e){this._context=e}function l(e){this._context=new u(e)}function u(e){this._context=e}Object.defineProperty(n,"__esModule",{value:!0}),n.monotoneX=function(e){return new s(e)},n.monotoneY=function(e){return new l(e)},s.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:a(this,this._t0,i(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,a(this,i(this,n=r(this,e,t)),n);break;default:a(this,this._t0,n=r(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(l.prototype=Object.create(s.prototype)).point=function(e,t){s.prototype.point.call(this,t,e)},u.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}}},{}],530:[function(e,t,n){"use strict";function r(e){this._context=e}function s(e){var t,n,r=e.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(o[i[0]=0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/o[r-1],t=r-2;0<=t;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return new r(e)},r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=s(e),i=s(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}}},{}],531:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.curveRadialLinear=void 0;e=(n.default=i)(((e=e("./linear.js"))&&e.__esModule?e:{default:e}).default);function r(e){this._curve=e}function i(t){function e(e){return new r(t(e))}return e._curve=t,e}n.curveRadialLinear=e,r.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}}},{"./linear.js":527}],532:[function(e,t,n){"use strict";function r(e,t){this._context=e,this._t=t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return new r(e,.5)},n.stepAfter=function(e){return new r(e,1)},n.stepBefore=function(e){return new r(e,0)},r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:var n;this._t<=0?(this._context.lineTo(this._x,t),this._context.lineTo(e,t)):(n=this._x*(1-this._t)+e*this._t,this._context.lineTo(n,this._y),this._context.lineTo(n,t))}this._x=e,this._y=t}}},{}],533:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return t<e?-1:e<t?1:e<=t?0:NaN}},{}],534:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e}},{}],535:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"arc",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"area",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"areaRadial",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"curveBasis",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(n,"curveBasisClosed",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(n,"curveBasisOpen",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(n,"curveBumpX",{enumerable:!0,get:function(){return P.bumpX}}),Object.defineProperty(n,"curveBumpY",{enumerable:!0,get:function(){return P.bumpY}}),Object.defineProperty(n,"curveBundle",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(n,"curveCardinal",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(n,"curveCardinalClosed",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(n,"curveCardinalOpen",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(n,"curveCatmullRom",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(n,"curveCatmullRomClosed",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(n,"curveCatmullRomOpen",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(n,"curveLinear",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(n,"curveLinearClosed",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(n,"curveMonotoneX",{enumerable:!0,get:function(){return F.monotoneX}}),Object.defineProperty(n,"curveMonotoneY",{enumerable:!0,get:function(){return F.monotoneY}}),Object.defineProperty(n,"curveNatural",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(n,"curveStep",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(n,"curveStepAfter",{enumerable:!0,get:function(){return U.stepAfter}}),Object.defineProperty(n,"curveStepBefore",{enumerable:!0,get:function(){return U.stepBefore}}),Object.defineProperty(n,"line",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"lineRadial",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"link",{enumerable:!0,get:function(){return f.link}}),Object.defineProperty(n,"linkHorizontal",{enumerable:!0,get:function(){return f.linkHorizontal}}),Object.defineProperty(n,"linkRadial",{enumerable:!0,get:function(){return f.linkRadial}}),Object.defineProperty(n,"linkVertical",{enumerable:!0,get:function(){return f.linkVertical}}),Object.defineProperty(n,"pie",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"pointRadial",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"radialArea",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"radialLine",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"stack",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(n,"stackOffsetDiverging",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(n,"stackOffsetExpand",{enumerable:!0,get:function(){return H.default}}),Object.defineProperty(n,"stackOffsetNone",{enumerable:!0,get:function(){return G.default}}),Object.defineProperty(n,"stackOffsetSilhouette",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(n,"stackOffsetWiggle",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(n,"stackOrderAppearance",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(n,"stackOrderAscending",{enumerable:!0,get:function(){return Z.default}}),Object.defineProperty(n,"stackOrderDescending",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(n,"stackOrderInsideOut",{enumerable:!0,get:function(){return K.default}}),Object.defineProperty(n,"stackOrderNone",{enumerable:!0,get:function(){return Q.default}}),Object.defineProperty(n,"stackOrderReverse",{enumerable:!0,get:function(){return J.default}}),Object.defineProperty(n,"symbol",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(n,"symbolAsterisk",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(n,"symbolCircle",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(n,"symbolCross",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(n,"symbolDiamond",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(n,"symbolDiamond2",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(n,"symbolPlus",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(n,"symbolSquare",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(n,"symbolSquare2",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(n,"symbolStar",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(n,"symbolTriangle",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(n,"symbolTriangle2",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(n,"symbolWye",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(n,"symbolX",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(n,"symbols",{enumerable:!0,get:function(){return d.symbolsFill}}),Object.defineProperty(n,"symbolsFill",{enumerable:!0,get:function(){return d.symbolsFill}}),Object.defineProperty(n,"symbolsStroke",{enumerable:!0,get:function(){return d.symbolsStroke}});var r=ne(e("./arc.js")),i=ne(e("./area.js")),o=ne(e("./line.js")),s=ne(e("./pie.js")),l=ne(e("./areaRadial.js")),u=ne(e("./lineRadial.js")),c=ne(e("./pointRadial.js")),f=e("./link.js"),d=te(e("./symbol.js")),h=ne(e("./symbol/asterisk.js")),p=ne(e("./symbol/circle.js")),y=ne(e("./symbol/cross.js")),g=ne(e("./symbol/diamond.js")),v=ne(e("./symbol/diamond2.js")),m=ne(e("./symbol/plus.js")),b=ne(e("./symbol/square.js")),x=ne(e("./symbol/square2.js")),_=ne(e("./symbol/star.js")),w=ne(e("./symbol/triangle.js")),M=ne(e("./symbol/triangle2.js")),j=ne(e("./symbol/wye.js")),k=ne(e("./symbol/x.js")),O=ne(e("./curve/basisClosed.js")),A=ne(e("./curve/basisOpen.js")),T=ne(e("./curve/basis.js")),P=e("./curve/bump.js"),S=ne(e("./curve/bundle.js")),E=ne(e("./curve/cardinalClosed.js")),C=ne(e("./curve/cardinalOpen.js")),L=ne(e("./curve/cardinal.js")),R=ne(e("./curve/catmullRomClosed.js")),I=ne(e("./curve/catmullRomOpen.js")),z=ne(e("./curve/catmullRom.js")),D=ne(e("./curve/linearClosed.js")),N=ne(e("./curve/linear.js")),F=e("./curve/monotone.js"),B=ne(e("./curve/natural.js")),U=te(e("./curve/step.js")),q=ne(e("./stack.js")),H=ne(e("./offset/expand.js")),V=ne(e("./offset/diverging.js")),G=ne(e("./offset/none.js")),W=ne(e("./offset/silhouette.js")),Y=ne(e("./offset/wiggle.js")),X=ne(e("./order/appearance.js")),Z=ne(e("./order/ascending.js")),$=ne(e("./order/descending.js")),K=ne(e("./order/insideOut.js")),Q=ne(e("./order/none.js")),J=ne(e("./order/reverse.js"));function ee(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(ee=function(e){return e?n:t})(e)}function te(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=ee(t);if(t&&t.has(e))return t.get(e);var n,r,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=o?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=e[n]);return i.default=e,t&&t.set(e,i),i}function ne(e){return e&&e.__esModule?e:{default:e}}},{"./arc.js":511,"./area.js":512,"./areaRadial.js":513,"./curve/basis.js":516,"./curve/basisClosed.js":517,"./curve/basisOpen.js":518,"./curve/bump.js":519,"./curve/bundle.js":520,"./curve/cardinal.js":521,"./curve/cardinalClosed.js":522,"./curve/cardinalOpen.js":523,"./curve/catmullRom.js":524,"./curve/catmullRomClosed.js":525,"./curve/catmullRomOpen.js":526,"./curve/linear.js":527,"./curve/linearClosed.js":528,"./curve/monotone.js":529,"./curve/natural.js":530,"./curve/step.js":532,"./line.js":536,"./lineRadial.js":537,"./link.js":538,"./offset/diverging.js":541,"./offset/expand.js":542,"./offset/none.js":543,"./offset/silhouette.js":544,"./offset/wiggle.js":545,"./order/appearance.js":546,"./order/ascending.js":547,"./order/descending.js":548,"./order/insideOut.js":549,"./order/none.js":550,"./order/reverse.js":551,"./pie.js":552,"./pointRadial.js":554,"./stack.js":555,"./symbol.js":556,"./symbol/asterisk.js":557,"./symbol/circle.js":558,"./symbol/cross.js":559,"./symbol/diamond.js":560,"./symbol/diamond2.js":561,"./symbol/plus.js":562,"./symbol/square.js":563,"./symbol/square2.js":564,"./symbol/star.js":565,"./symbol/triangle.js":566,"./symbol/triangle2.js":567,"./symbol/wye.js":568,"./symbol/x.js":569}],536:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(a,s){var l=(0,r.default)(!0),u=null,c=i.default,f=null;function t(e){var t,n,r,i=(e=(0,h.default)(e)).length,o=!1;for(null==u&&(f=c(r=(0,d.path)())),t=0;t<=i;++t)!(t<i&&l(n=e[t],t,e))===o&&((o=!o)?f.lineStart():f.lineEnd()),o&&f.point(+a(n,t,e),+s(n,t,e));if(r)return f=null,r+""||null}return a="function"==typeof a?a:void 0===a?o.x:(0,r.default)(a),s="function"==typeof s?s:void 0===s?o.y:(0,r.default)(s),t.x=function(e){return arguments.length?(a="function"==typeof e?e:(0,r.default)(+e),t):a},t.y=function(e){return arguments.length?(s="function"==typeof e?e:(0,r.default)(+e),t):s},t.defined=function(e){return arguments.length?(l="function"==typeof e?e:(0,r.default)(!!e),t):l},t.curve=function(e){return arguments.length?(c=e,null!=u&&(f=c(u)),t):c},t.context=function(e){return arguments.length?(null==e?u=f=null:f=c(u=e),t):u},t};var d=e("d3-path"),h=a(e("./array.js")),r=a(e("./constant.js")),i=a(e("./curve/linear.js")),o=e("./point.js");function a(e){return e&&e.__esModule?e:{default:e}}},{"./array.js":514,"./constant.js":515,"./curve/linear.js":527,"./point.js":553,"d3-path":225}],537:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return o((0,i.default)().curve(r.curveRadialLinear))},n.lineRadial=o;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./curve/radial.js")),i=(e=e("./line.js"))&&e.__esModule?e:{default:e};function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function o(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t((0,r.default)(e)):t()._curve},e}},{"./curve/radial.js":531,"./line.js":536}],538:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.link=o,n.linkHorizontal=function(){return o(i.bumpX)},n.linkRadial=function(){var e=o(i.bumpRadial);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e},n.linkVertical=function(){return o(i.bumpY)};var f=e("d3-path"),d=e("./array.js"),r=(n=e("./constant.js"))&&n.__esModule?n:{default:n},i=e("./curve/bump.js"),h=e("./point.js");function p(e){return e.source}function y(e){return e.target}function o(i){var o=p,a=y,s=h.x,l=h.y,u=null,c=null;function t(){var e,t=d.slice.call(arguments),n=o.apply(this,t),r=a.apply(this,t);if((c=null==u?i(e=(0,f.path)()):c).lineStart(),t[0]=n,c.point(+s.apply(this,t),+l.apply(this,t)),t[0]=r,c.point(+s.apply(this,t),+l.apply(this,t)),c.lineEnd(),e)return c=null,e+""||null}return t.source=function(e){return arguments.length?(o=e,t):o},t.target=function(e){return arguments.length?(a=e,t):a},t.x=function(e){return arguments.length?(s="function"==typeof e?e:(0,r.default)(+e),t):s},t.y=function(e){return arguments.length?(l="function"==typeof e?e:(0,r.default)(+e),t):l},t.context=function(e){return arguments.length?(null==e?u=c=null:c=i(u=e),t):u},t}},{"./array.js":514,"./constant.js":515,"./curve/bump.js":519,"./point.js":553,"d3-path":225}],539:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.abs=void 0,n.acos=function(e){return 1<e?0:e<-1?i:Math.acos(e)},n.asin=function(e){return 1<=e?o:e<=-1?-o:Math.asin(e)},n.tau=n.sqrt=n.sin=n.pi=n.min=n.max=n.halfPi=n.epsilon=n.cos=n.atan2=void 0;var r=Math.abs;n.abs=r;r=Math.atan2;n.atan2=r;r=Math.cos;n.cos=r;r=Math.max;n.max=r;r=Math.min;n.min=r;r=Math.sin;n.sin=r;r=Math.sqrt;n.sqrt=r;n.epsilon=1e-12;var i=Math.PI,o=(n.pi=i)/2;n.halfPi=o,n.tau=2*i},{}],540:[function(e,t,n){arguments[4][99][0].apply(n,arguments)},{dup:99}],541:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if(0<(s=e.length))for(var n,r,i,o,a,s,l=0,u=e[t[0]].length;l<u;++l)for(o=a=0,n=0;n<s;++n)0<(i=(r=e[t[n]][l])[1]-r[0])?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):(r[0]=0,r[1]=i)}},{}],542:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if(0<(r=e.length)){for(var n,r,i,o=0,a=e[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=e[n][o][1]||0;if(i)for(n=0;n<r;++n)e[n][o][1]/=i}(0,s.default)(e,t)}};var s=(e=e("./none.js"))&&e.__esModule?e:{default:e}},{"./none.js":543}],543:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if(1<(i=e.length))for(var n,r,i,o=1,a=e[t[0]],s=a.length;o<i;++o)for(r=a,a=e[t[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}},{}],544:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if(0<(n=e.length)){for(var n,r=0,i=e[t[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=e[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}(0,l.default)(e,t)}};var l=(e=e("./none.js"))&&e.__esModule?e:{default:e}},{"./none.js":543}],545:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if(0<(i=e.length)&&0<(r=(n=e[t[0]]).length)){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,l=0,u=0;s<i;++s){for(var c=e[t[s]],f=c[a][1]||0,c=c[a-1][1]||0,d=(f-c)/2,h=0;h<s;++h){var p=e[t[h]],y=p[a][1]||0,p=p[a-1][1]||0;d+=y-p}l+=f,u+=d*f}n[a-1][1]+=n[a-1][0]=o,l&&(o-=u/l)}n[a-1][1]+=n[a-1][0]=o,(0,g.default)(e,t)}};var g=(e=e("./none.js"))&&e.__esModule?e:{default:e}},{"./none.js":543}],546:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var n=e.map(i);return(0,r.default)(e).sort(function(e,t){return n[e]-n[t]})};var r=(e=e("./none.js"))&&e.__esModule?e:{default:e};function i(e){for(var t,n=-1,r=0,i=e.length,o=-1/0;++n<i;)(t=+e[n][1])>o&&(o=t,r=n);return r}},{"./none.js":550}],547:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var n=e.map(i);return(0,r.default)(e).sort(function(e,t){return n[e]-n[t]})},n.sum=i;var r=(e=e("./none.js"))&&e.__esModule?e:{default:e};function i(e){for(var t,n=0,r=-1,i=e.length;++r<i;)(t=+e[r][1])&&(n+=t);return n}},{"./none.js":550}],548:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return(0,r.default)(e).reverse()};var r=(e=e("./ascending.js"))&&e.__esModule?e:{default:e}},{"./ascending.js":547}],549:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t,n,r=e.length,i=e.map(f.sum),o=(0,c.default)(e),a=0,s=0,l=[],u=[];for(t=0;t<r;++t)n=o[t],a<s?(a+=i[n],l.push(n)):(s+=i[n],u.push(n));return u.reverse().concat(l)};var c=(n=e("./appearance.js"))&&n.__esModule?n:{default:n},f=e("./ascending.js")},{"./appearance.js":546,"./ascending.js":547}],550:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.length,n=new Array(t);for(;0<=--t;)n[t]=t;return n}},{}],551:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return(0,r.default)(e).reverse()};var r=(e=e("./none.js"))&&e.__esModule?e:{default:e}},{"./none.js":550}],552:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var h=o.default,p=i.default,y=null,g=(0,r.default)(0),v=(0,r.default)(x.tau),m=(0,r.default)(0);function t(n){for(var e,t,r,i=(n=(0,b.default)(n)).length,o=0,a=new Array(i),s=new Array(i),l=+g.apply(this,arguments),u=Math.min(x.tau,Math.max(-x.tau,v.apply(this,arguments)-l)),c=Math.min(Math.abs(u)/i,m.apply(this,arguments)),f=c*(u<0?-1:1),d=0;d<i;++d)0<(r=s[a[d]=d]=+h(n[d],d,n))&&(o+=r);for(null!=p?a.sort(function(e,t){return p(s[e],s[t])}):null!=y&&a.sort(function(e,t){return y(n[e],n[t])}),d=0,e=o?(u-i*f)/o:0;d<i;++d,l=t)t=a[d],r=s[t],s[t]={data:n[t],index:d,value:r,startAngle:l,endAngle:t=l+(0<r?r*e:0)+f,padAngle:c};return s}return t.value=function(e){return arguments.length?(h="function"==typeof e?e:(0,r.default)(+e),t):h},t.sortValues=function(e){return arguments.length?(p=e,y=null,t):p},t.sort=function(e){return arguments.length?(y=e,p=null,t):y},t.startAngle=function(e){return arguments.length?(g="function"==typeof e?e:(0,r.default)(+e),t):g},t.endAngle=function(e){return arguments.length?(v="function"==typeof e?e:(0,r.default)(+e),t):v},t.padAngle=function(e){return arguments.length?(m="function"==typeof e?e:(0,r.default)(+e),t):m},t};var b=a(e("./array.js")),r=a(e("./constant.js")),i=a(e("./descending.js")),o=a(e("./identity.js")),x=e("./math.js");function a(e){return e&&e.__esModule?e:{default:e}}},{"./array.js":514,"./constant.js":515,"./descending.js":533,"./identity.js":534,"./math.js":539}],553:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.x=function(e){return e[0]},n.y=function(e){return e[1]}},{}],554:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}},{}],555:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var u=(0,r.default)([]),c=o.default,f=i.default,d=s;function t(e){var t,n,r=Array.from(u.apply(this,arguments),y),i=r.length,o=-1,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(e);try{for(a.s();!(n=a.n()).done;){var s=n.value,l=0;for(++o;l<i;++l)(r[l][o]=[0,+d(s,r[l].key,o,e)]).data=s}}catch(e){a.e(e)}finally{a.f()}for(t=(l=0,h.default)(c(r));l<i;++l)r[t[l]].index=l;return f(r,t),r}return t.keys=function(e){return arguments.length?(u="function"==typeof e?e:(0,r.default)(Array.from(e)),t):u},t.value=function(e){return arguments.length?(d="function"==typeof e?e:(0,r.default)(+e),t):d},t.order=function(e){return arguments.length?(c=null==e?o.default:"function"==typeof e?e:(0,r.default)(Array.from(e)),t):c},t.offset=function(e){return arguments.length?(f=null==e?i.default:e,t):f},t};var h=a(e("./array.js")),r=a(e("./constant.js")),i=a(e("./offset/none.js")),o=a(e("./order/none.js"));function a(e){return e&&e.__esModule?e:{default:e}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){return e[t]}function y(e){var t=[];return t.key=e,t}},{"./array.js":514,"./constant.js":515,"./offset/none.js":543,"./order/none.js":550}],556:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,n){var r=null;function i(){var e;if(r=r||(e=(0,o.path)()),t.apply(this,arguments).draw(r,+n.apply(this,arguments)),e)return r=null,e+""||null}return t="function"==typeof t?t:(0,a.default)(t||s.default),n="function"==typeof n?n:(0,a.default)(void 0===n?64:+n),i.type=function(e){return arguments.length?(t="function"==typeof e?e:(0,a.default)(e),i):t},i.size=function(e){return arguments.length?(n="function"==typeof e?e:(0,a.default)(+e),i):n},i.context=function(e){return arguments.length?(r=null==e?null:e,i):r},i},n.symbolsStroke=n.symbolsFill=void 0;var o=e("d3-path"),a=v(e("./constant.js")),r=v(e("./symbol/asterisk.js")),s=v(e("./symbol/circle.js")),i=v(e("./symbol/cross.js")),l=v(e("./symbol/diamond.js")),u=v(e("./symbol/diamond2.js")),c=v(e("./symbol/plus.js")),f=v(e("./symbol/square.js")),d=v(e("./symbol/square2.js")),h=v(e("./symbol/star.js")),p=v(e("./symbol/triangle.js")),y=v(e("./symbol/triangle2.js")),g=v(e("./symbol/wye.js")),e=v(e("./symbol/x.js"));function v(e){return e&&e.__esModule?e:{default:e}}g=[s.default,i.default,l.default,f.default,h.default,p.default,g.default];n.symbolsFill=g;u=[s.default,c.default,e.default,y.default,r.default,d.default,u.default];n.symbolsStroke=u},{"./constant.js":515,"./symbol/asterisk.js":557,"./symbol/circle.js":558,"./symbol/cross.js":559,"./symbol/diamond.js":560,"./symbol/diamond2.js":561,"./symbol/plus.js":562,"./symbol/square.js":563,"./symbol/square2.js":564,"./symbol/star.js":565,"./symbol/triangle.js":566,"./symbol/triangle2.js":567,"./symbol/wye.js":568,"./symbol/x.js":569,"d3-path":225}],557:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("../math.js"),o=(0,i.sqrt)(3);n.default={draw:function(e,t){var n=.59436*(0,i.sqrt)(t+(0,i.min)(t/28,.75)),r=n/2,t=r*o;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-t,-r),e.lineTo(t,r),e.moveTo(-t,r),e.lineTo(t,-r)}}},{"../math.js":539}],558:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../math.js");n.default={draw:function(e,t){t=(0,r.sqrt)(t/r.pi);e.moveTo(t,0),e.arc(0,0,t,0,r.tau)}}},{"../math.js":539}],559:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../math.js");n.default={draw:function(e,t){t=(0,r.sqrt)(t/5)/2;e.moveTo(-3*t,-t),e.lineTo(-t,-t),e.lineTo(-t,-3*t),e.lineTo(t,-3*t),e.lineTo(t,-t),e.lineTo(3*t,-t),e.lineTo(3*t,t),e.lineTo(t,t),e.lineTo(t,3*t),e.lineTo(-t,3*t),e.lineTo(-t,t),e.lineTo(-3*t,t),e.closePath()}}},{"../math.js":539}],560:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../math.js"),i=(0,r.sqrt)(1/3),o=2*i;n.default={draw:function(e,t){var n=(0,r.sqrt)(t/o),t=n*i;e.moveTo(0,-n),e.lineTo(t,0),e.lineTo(0,n),e.lineTo(-t,0),e.closePath()}}},{"../math.js":539}],561:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../math.js");n.default={draw:function(e,t){t=.62625*(0,r.sqrt)(t);e.moveTo(0,-t),e.lineTo(t,0),e.lineTo(0,t),e.lineTo(-t,0),e.closePath()}}},{"../math.js":539}],562:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../math.js");n.default={draw:function(e,t){t=.87559*(0,r.sqrt)(t-(0,r.min)(t/7,2));e.moveTo(-t,0),e.lineTo(t,0),e.moveTo(0,t),e.lineTo(0,-t)}}},{"../math.js":539}],563:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../math.js");n.default={draw:function(e,t){var n=(0,r.sqrt)(t),t=-n/2;e.rect(t,t,n,n)}}},{"../math.js":539}],564:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../math.js");n.default={draw:function(e,t){t=.4431*(0,r.sqrt)(t);e.moveTo(t,t),e.lineTo(t,-t),e.lineTo(-t,-t),e.lineTo(-t,t),e.closePath()}}},{"../math.js":539}],565:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=e("../math.js"),e=(0,l.sin)(l.pi/10)/(0,l.sin)(7*l.pi/10),u=(0,l.sin)(l.tau/10)*e,c=-(0,l.cos)(l.tau/10)*e;n.default={draw:function(e,t){var n=(0,l.sqrt)(.8908130915292852*t),r=u*n,i=c*n;e.moveTo(0,-n),e.lineTo(r,i);for(var o=1;o<5;++o){var a=l.tau*o/5,s=(0,l.cos)(a),a=(0,l.sin)(a);e.lineTo(a*n,-s*n),e.lineTo(s*r-a*i,a*r+s*i)}e.closePath()}}},{"../math.js":539}],566:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../math.js"),i=(0,r.sqrt)(3);n.default={draw:function(e,t){t=-(0,r.sqrt)(t/(3*i));e.moveTo(0,2*t),e.lineTo(-i*t,-t),e.lineTo(i*t,-t),e.closePath()}}},{"../math.js":539}],567:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("../math.js"),o=(0,i.sqrt)(3);n.default={draw:function(e,t){var n=.6824*(0,i.sqrt)(t),r=n/2,t=n*o/2;e.moveTo(0,-n),e.lineTo(t,r),e.lineTo(-t,r),e.closePath()}}},{"../math.js":539}],568:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("../math.js"),l=(0,s.sqrt)(3)/2,u=1/(0,s.sqrt)(12),c=3*(u/2+1);n.default={draw:function(e,t){var n=(0,s.sqrt)(t/c),r=n/2,i=n*u,o=r,a=n*u+n,t=-o,n=a;e.moveTo(r,i),e.lineTo(o,a),e.lineTo(t,n),e.lineTo(-.5*r-l*i,l*r+-.5*i),e.lineTo(-.5*o-l*a,l*o+-.5*a),e.lineTo(-.5*t-l*n,l*t+-.5*n),e.lineTo(-.5*r+l*i,-.5*i-l*r),e.lineTo(-.5*o+l*a,-.5*a-l*o),e.lineTo(-.5*t+l*n,-.5*n-l*t),e.closePath()}}},{"../math.js":539}],569:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../math.js");n.default={draw:function(e,t){t=.6189*(0,r.sqrt)(t-(0,r.min)(t/6,1.7));e.moveTo(-t,-t),e.lineTo(t,t),e.moveTo(-t,t),e.lineTo(t,-t)}}},{"../math.js":539}],570:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("d3-array");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))});var i=e("d3-axis");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===i[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}}))});var o=e("d3-brush");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===o[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}}))});var a=e("d3-chord");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))});var s=e("d3-color");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===s[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}}))});var l=e("d3-contour");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===l[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return l[e]}}))});var u=e("d3-delaunay");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===u[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}}))});var c=e("d3-dispatch");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===c[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return c[e]}}))});var f=e("d3-drag");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===f[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return f[e]}}))});var d=e("d3-dsv");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===d[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return d[e]}}))});var h=e("d3-ease");Object.keys(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===h[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return h[e]}}))});var p=e("d3-fetch");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===p[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return p[e]}}))});var y=e("d3-force");Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===y[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return y[e]}}))});var g=e("d3-format");Object.keys(g).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===g[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return g[e]}}))});var v=e("d3-geo");Object.keys(v).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===v[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return v[e]}}))});var m=e("d3-hierarchy");Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===m[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return m[e]}}))});var b=e("d3-interpolate");Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===b[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return b[e]}}))});var x=e("d3-path");Object.keys(x).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===x[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return x[e]}}))});var _=e("d3-polygon");Object.keys(_).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===_[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return _[e]}}))});var w=e("d3-quadtree");Object.keys(w).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===w[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return w[e]}}))});var M=e("d3-random");Object.keys(M).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===M[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return M[e]}}))});var j=e("d3-scale");Object.keys(j).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===j[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return j[e]}}))});var k=e("d3-scale-chromatic");Object.keys(k).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===k[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return k[e]}}))});var O=e("d3-selection");Object.keys(O).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===O[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return O[e]}}))});var A=e("d3-shape");Object.keys(A).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===A[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return A[e]}}))});var T=e("d3-time");Object.keys(T).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===T[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return T[e]}}))});var P=e("d3-time-format");Object.keys(P).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===P[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return P[e]}}))});var S=e("d3-timer");Object.keys(S).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===S[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return S[e]}}))});var E=e("d3-transition");Object.keys(E).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===E[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return E[e]}}))});var C=e("d3-zoom");Object.keys(C).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===C[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return C[e]}}))})},{"d3-array":32,"d3-axis":72,"d3-brush":76,"d3-chord":81,"d3-color":87,"d3-contour":98,"d3-delaunay":101,"d3-dispatch":106,"d3-drag":110,"d3-dsv":116,"d3-ease":124,"d3-fetch":134,"d3-force":141,"d3-format":161,"d3-geo":472,"d3-hierarchy":184,"d3-interpolate":210,"d3-path":225,"d3-polygon":232,"d3-quadtree":239,"d3-random":258,"d3-scale":320,"d3-scale-chromatic":289,"d3-selection":342,"d3-shape":535,"d3-time":399,"d3-time-format":392,"d3-timer":414,"d3-transition":419,"d3-zoom":449}],571:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var ye=e("robust-predicates");function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ge=Math.pow(2,-52),p=new Uint32Array(512);function ve(e,t,n,r){n=e-n,r=t-r;return n*n+r*r}function me(e,t,n,r){if(r-n<=20)for(var i=n+1;i<=r;i++){for(var o=e[i],a=t[o],s=i-1;n<=s&&t[e[s]]>a;)e[s+1]=e[s--];e[s+1]=o}else{var l=n+1,u=r;d(e,n+r>>1,l),t[e[n]]>t[e[r]]&&d(e,n,r),t[e[l]]>t[e[r]]&&d(e,l,r),t[e[n]]>t[e[l]]&&d(e,n,l);for(var c=e[l],f=t[c];;){for(;t[e[++l]]<f;);for(;t[e[--u]]>f;);if(u<l)break;d(e,l,u)}e[n+1]=e[u],e[u]=c,u-n<=r-l+1?(me(e,t,l,r),me(e,t,n,u-1)):(me(e,t,n,u-1),me(e,t,l,r))}}function d(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function l(e){return e[0]}function u(e){return e[1]}n.default=function(){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=e.length>>1;if(0<t&&"number"!=typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;e=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*e),this._halfedges=new Int32Array(3*e),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}var e,t,n;return e=s,n=[{key:"from",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:l,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:u,r=e.length,i=new Float64Array(2*r),o=0;o<r;o++){var a=e[o];i[2*o]=t(a),i[2*o+1]=n(a)}return new s(i)}}],(t=[{key:"update",value:function(){for(var e=this.coords,t=this._hullPrev,n=this._hullNext,r=this._hullTri,i=this._hullHash,o=e.length>>1,a=1/0,s=1/0,l=-1/0,u=-1/0,c=0;c<o;c++){var f=e[2*c],d=e[2*c+1];f<a&&(a=f),d<s&&(s=d),l<f&&(l=f),u<d&&(u=d),this._ids[c]=c}for(var h,p=(a+l)/2,y=(s+u)/2,g=1/0,v=0;v<o;v++){var m=ve(p,y,e[2*v],e[2*v+1]);m<g&&(h=v,g=m)}for(var b,x=e[2*h],_=e[2*h+1],g=1/0,w=0;w<o;w++)w!==h&&((b=ve(x,_,e[2*w],e[2*w+1]))<g&&0<b&&(R=w,g=b));for(var M,j,k,O,A,T,P,S=e[2*R],E=e[2*R+1],C=1/0,L=0;L<o;L++)L!==h&&L!==R&&(M=x,j=_,k=S,O=E,A=e[2*L],T=e[2*L+1],P=void 0,P=k-M,k=O-j,O=A-M,(j=(k=((A=T-j)*(M=P*P+k*k)-k*(T=O*O+A*A))*(j=.5/(P*A-k*O)))*k+(j*=P*T-O*M)*j)<C&&(I=L,C=j));var R,I,z=e[2*I],D=e[2*I+1];if(C===1/0){for(var N=0;N<o;N++)this._dists[N]=e[2*N]-e[0]||e[2*N+1]-e[1];me(this._ids,this._dists,0,o-1);for(var F=new Uint32Array(o),B=0,U=0,q=-1/0;U<o;U++){var H=this._ids[U];this._dists[H]>q&&(F[B++]=H,q=this._dists[H])}return this.hull=F.subarray(0,B),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}(0,ye.orient2d)(x,_,S,E,z,D)<0&&(Z=R,W=S,$=E,R=I,S=z,E=D,I=Z,z=W,D=$);var V,G,W,Y,X,Z,$,K=(X=(V=S)-x,{x:x+((V=(Y=D)-_)*(G=X*X+(Z=(G=E)-_)*Z)-Z*(W=($=(W=z)-x)*$+V*V))*(Y=.5/(X*V-Z*$)),y:_+(X*W-$*G)*Y});this._cx=K.x,this._cy=K.y;for(var Q=0;Q<o;Q++)this._dists[Q]=ve(e[2*Q],e[2*Q+1],K.x,K.y);me(this._ids,this._dists,0,o-1);var J=3;n[this._hullStart=h]=t[I]=R,n[R]=t[h]=I,r[n[I]=t[R]=h]=0,r[R]=1,r[I]=2,i.fill(-1),i[this._hashKey(x,_)]=h,i[this._hashKey(S,E)]=R,i[this._hashKey(z,D)]=I,this.trianglesLen=0,this._addTriangle(h,R,I,-1,-1,-1);for(var ee,te,ne=0;ne<this._ids.length;ne++){var re=this._ids[ne],ie=e[2*re],oe=e[2*re+1];if(!(0<ne&&Math.abs(ie-ee)<=ge&&Math.abs(oe-te)<=ge)&&(ee=ie,te=oe,re!==h&&re!==R&&re!==I)){for(var ae=0,se=0,le=this._hashKey(ie,oe);se<this._hashSize&&(-1===(ae=i[(le+se)%this._hashSize])||ae===n[ae]);se++);for(var ue=ae=t[ae],ce=void 0;ce=n[ue],0<=(0,ye.orient2d)(ie,oe,e[2*ue],e[2*ue+1],e[2*ce],e[2*ce+1]);)if((ue=ce)===ae){ue=-1;break}if(-1!==ue){var fe=this._addTriangle(ue,re,n[ue],-1,-1,r[ue]);r[re]=this._legalize(fe+2),r[ue]=fe,J++;for(var de=n[ue];ce=n[de],(0,ye.orient2d)(ie,oe,e[2*de],e[2*de+1],e[2*ce],e[2*ce+1])<0;)fe=this._addTriangle(de,re,ce,r[re],-1,r[de]),r[re]=this._legalize(fe+2),n[de]=de,J--,de=ce;if(ue===ae)for(;ce=t[ue],(0,ye.orient2d)(ie,oe,e[2*ce],e[2*ce+1],e[2*ue],e[2*ue+1])<0;)fe=this._addTriangle(ce,re,ue,-1,r[ue],r[ce]),this._legalize(fe+2),r[ce]=fe,n[ue]=ue,J--,ue=ce;n[this._hullStart=t[re]=ue]=t[de]=re,n[re]=de,i[this._hashKey(ie,oe)]=re,i[this._hashKey(e[2*ue],e[2*ue+1])]=ue}}}this.hull=new Uint32Array(J);for(var he=0,pe=this._hullStart;he<J;he++)pe=n[this.hull[he]=pe];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}},{key:"_hashKey",value:function(e,t){return Math.floor(function(e,t){e/=Math.abs(e)+Math.abs(t);return(0<t?3-e:1+e)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}},{key:"_legalize",value:function(e){for(var t=this._triangles,n=this._halfedges,r=this.coords,i=0,o=0;;){var a=n[e],s=e-e%3,o=s+(e+2)%3;if(-1!==a){var l=a-a%3,u=l+(a+2)%3,c=t[o],f=t[e],d=t[s+(e+1)%3],s=t[u];if(function(e,t,n,r,i,o,a,s){e-=a,t-=s,n-=a,r-=s,i-=a,a=o-s,o=n*n+r*r,s=i*i+a*a;return e*(r*s-o*a)-t*(n*s-o*i)+(e*e+t*t)*(n*a-r*i)<0}(r[2*c],r[2*c+1],r[2*f],r[2*f+1],r[2*d],r[2*d+1],r[2*s],r[2*s+1])){t[e]=s,t[a]=c;c=n[u];if(-1===c){var h=this._hullStart;do{if(this._hullTri[h]===u){this._hullTri[h]=e;break}}while((h=this._hullPrev[h])!==this._hullStart)}this._link(e,c),this._link(a,n[o]),this._link(o,u),i<p.length&&(p[i++]=l+(a+1)%3)}else{if(0===i)break;e=p[--i]}}else{if(0===i)break;e=p[--i]}}return o}},{key:"_link",value:function(e,t){-1!==(this._halfedges[e]=t)&&(this._halfedges[t]=e)}},{key:"_addTriangle",value:function(e,t,n,r,i,o){var a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=t,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}])&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}()},{"robust-predicates":978}],572:[function(e,t,n){"use strict";t.exports=function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],573:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=Object.create||function(e){function t(){}return t.prototype=e,new t},l=Object.keys||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return t},r=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function i(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=s(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=i).EventEmitter=i).prototype._events=void 0,i.prototype._maxListeners=void 0;var o,u=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),o=0===c.x}catch(e){o=!1}function f(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var i,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return(i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener||n),i=e._events),o=i[t]):(i=e._events=s(null),e._eventsCount=0),o?("function"==typeof o?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),o.warned||(r=f(e))&&0<r&&o.length>r&&(o.warned=!0,(r=new Error("Possible EventEmitter memory leak detected. "+o.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.')).name="MaxListenersExceededWarning",r.emitter=e,r.type=t,r.count=o.length,"object"===("undefined"==typeof console?"undefined":a(console))&&console.warn&&console.warn("%s: %s",r.name,r.message))):(o=i[t]=n,++e._eventsCount),e}function h(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function p(e,t,n){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},t=r.call(h,e);return t.listener=n,e.wrapFn=t}function y(e,t,n){e=e._events;if(!e)return[];t=e[t];return t?"function"==typeof t?n?[t.listener||t]:[t]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):v(t,t.length):[]}function g(e){var t=this._events;if(t){e=t[e];if("function"==typeof e)return 1;if(e)return e.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}o?Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');u=e}}):i.defaultMaxListeners=u,i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return f(this)},i.prototype.emit=function(e){var t,n,r,i,o="error"===e,a=this._events;if(a)o=o&&null==a.error;else if(!o)return!1;if(o){if((t=1<arguments.length?arguments[1]:t)instanceof Error)throw t;o=new Error('Unhandled "error" event. ('+t+")");throw o.context=t,o}if(!(n=a[e]))return!1;var s,l="function"==typeof n;switch(s=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=v(e,r),o=0;o<r;++o)i[o].call(n)}(n,l,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=v(e,i),a=0;a<i;++a)o[a].call(n,r)}(n,l,this,arguments[1]);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,a=v(e,o),s=0;s<o;++s)a[s].call(n,r,i)}(n,l,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var a=e.length,s=v(e,a),l=0;l<a;++l)s[l].call(n,r,i,o)}(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(r=new Array(s-1),i=1;i<s;i++)r[i-1]=arguments[i];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=v(e,i),a=0;a<i;++a)o[a].apply(n,r)}(n,l,this,r)}return!0},i.prototype.on=i.prototype.addListener=function(e,t){return d(this,e,t,!1)},i.prototype.prependListener=function(e,t){return d(this,e,t,!0)},i.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,p(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,p(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=s(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;0<=o;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,a||t)}return this},i.prototype.removeAllListeners=function(e){var t,n=this._events;if(!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=s(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=s(null):delete n[e]),this;if(0===arguments.length){for(var r,i=l(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=s(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(o=t.length-1;0<=o;o--)this.removeListener(e,t[o]);return this},i.prototype.listeners=function(e){return y(this,e,!0)},i.prototype.rawListeners=function(e){return y(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},i.prototype.listenerCount=g,i.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],574:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=e("is-string-blank");t.exports=function(e){var t=r(e);if("string"===t){var n=e;if(0===(e=+e)&&i(n))return!1}else if("number"!==t)return!1;return e-e<1}},{"is-string-blank":611}],575:[function(e,t,n){"use strict";t.exports=function(e,t){if("string"!=typeof e)throw new TypeError("must specify type string");if(t=t||{},"undefined"==typeof document&&!t.canvas)return null;var n=t.canvas||document.createElement("canvas");"number"==typeof t.width&&(n.width=t.width);"number"==typeof t.height&&(n.height=t.height);var r,i=t;try{var o=[e];0===e.indexOf("webgl")&&o.push("experimental-"+e);for(var a=0;a<o.length;a++)if(r=n.getContext(o[a],i))return r}catch(e){r=null}return r||null}},{}],576:[function(e,t,n){"use strict";t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],h=t[11],p=t[12],y=t[13],g=t[14],t=t[15];return e[0]=s*(d*t-h*g)-f*(l*t-u*g)+y*(l*h-u*d),e[1]=-(r*(d*t-h*g)-f*(i*t-o*g)+y*(i*h-o*d)),e[2]=r*(l*t-u*g)-s*(i*t-o*g)+y*(i*u-o*l),e[3]=-(r*(l*h-u*d)-s*(i*h-o*d)+f*(i*u-o*l)),e[4]=-(a*(d*t-h*g)-c*(l*t-u*g)+p*(l*h-u*d)),e[5]=n*(d*t-h*g)-c*(i*t-o*g)+p*(i*h-o*d),e[6]=-(n*(l*t-u*g)-a*(i*t-o*g)+p*(i*u-o*l)),e[7]=n*(l*h-u*d)-a*(i*h-o*d)+c*(i*u-o*l),e[8]=a*(f*t-h*y)-c*(s*t-u*y)+p*(s*h-u*f),e[9]=-(n*(f*t-h*y)-c*(r*t-o*y)+p*(r*h-o*f)),e[10]=n*(s*t-u*y)-a*(r*t-o*y)+p*(r*u-o*s),e[11]=-(n*(s*h-u*f)-a*(r*h-o*f)+c*(r*u-o*s)),e[12]=-(a*(f*g-d*y)-c*(s*g-l*y)+p*(s*d-l*f)),e[13]=n*(f*g-d*y)-c*(r*g-i*y)+p*(r*d-i*f),e[14]=-(n*(s*g-l*y)-a*(r*g-i*y)+p*(r*l-i*s)),e[15]=n*(s*d-l*f)-a*(r*d-i*f)+c*(r*l-i*s),e}},{}],577:[function(e,t,n){"use strict";t.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],578:[function(e,t,n){"use strict";t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],579:[function(e,t,n){"use strict";t.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],580:[function(e,t,n){"use strict";t.exports=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11],h=e[12],p=e[13],y=e[14],e=e[15];return(t*a-n*o)*(f*e-d*y)-(t*s-r*o)*(c*e-d*p)+(t*l-i*o)*(c*y-f*p)+(n*s-r*a)*(u*e-d*h)-(n*l-i*a)*(u*y-f*h)+(r*l-i*s)*(u*p-c*h)}},{}],581:[function(e,t,n){"use strict";t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,u=n*a,c=r*a,t=r*s,n=i*a,r=i*s,i=i*l,a=o*a,s=o*s,l=o*l;return e[0]=1-t-i,e[1]=c+l,e[2]=n-s,e[3]=0,e[4]=c-l,e[5]=1-u-i,e[6]=r+a,e[7]=0,e[8]=n+s,e[9]=r-a,e[10]=1-u-t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],582:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r=n[0],i=n[1],o=n[2],a=Math.sqrt(r*r+i*i+o*o);if(Math.abs(a)<1e-6)return null;return r*=a=1/a,i*=a,o*=a,n=Math.sin(t),a=Math.cos(t),t=1-a,e[0]=r*r*t+a,e[1]=i*r*t+o*n,e[2]=o*r*t-i*n,e[3]=0,e[4]=r*i*t-o*n,e[5]=i*i*t+a,e[6]=o*i*t+r*n,e[7]=0,e[8]=r*o*t+i*n,e[9]=i*o*t-r*n,e[10]=o*o*t+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],583:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=r+r,l=i+i,u=o+o,c=r*s,f=r*l,t=r*u,r=i*l,i=i*u,o=o*u,s=a*s,l=a*l,u=a*u;return e[0]=1-(r+o),e[1]=f+u,e[2]=t-l,e[3]=0,e[4]=f-u,e[5]=1-(c+o),e[6]=i+s,e[7]=0,e[8]=t+l,e[9]=i-s,e[10]=1-(c+r),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}},{}],584:[function(e,t,n){"use strict";t.exports=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],585:[function(e,t,n){"use strict";t.exports=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}},{}],586:[function(e,t,n){"use strict";t.exports=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],587:[function(e,t,n){"use strict";t.exports=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],588:[function(e,t,n){"use strict";t.exports=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],589:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i,o,a){var s=1/(n-t),l=1/(i-r),u=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*l,e[10]=(a+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*u,e[15]=0,e}},{}],590:[function(e,t,n){"use strict";t.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],591:[function(e,t,n){"use strict";t.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":576,"./clone":577,"./copy":578,"./create":579,"./determinant":580,"./fromQuat":581,"./fromRotation":582,"./fromRotationTranslation":583,"./fromScaling":584,"./fromTranslation":585,"./fromXRotation":586,"./fromYRotation":587,"./fromZRotation":588,"./frustum":589,"./identity":590,"./invert":592,"./lookAt":593,"./multiply":594,"./ortho":595,"./perspective":596,"./perspectiveFromFieldOfView":597,"./rotate":598,"./rotateX":599,"./rotateY":600,"./rotateZ":601,"./scale":602,"./str":603,"./translate":604,"./transpose":605}],592:[function(e,t,n){"use strict";t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],h=t[11],p=t[12],y=t[13],g=t[14],v=t[15],m=n*s-r*a,b=n*l-i*a,x=n*u-o*a,_=r*l-i*s,w=r*u-o*s,M=i*u-o*l,j=c*y-f*p,k=c*g-d*p,O=c*v-h*p,A=f*g-d*y,T=f*v-h*y,P=d*v-h*g,t=m*P-b*T+x*A+_*O-w*k+M*j;return t?(t=1/t,e[0]=(s*P-l*T+u*A)*t,e[1]=(i*T-r*P-o*A)*t,e[2]=(y*M-g*w+v*_)*t,e[3]=(d*w-f*M-h*_)*t,e[4]=(l*O-a*P-u*k)*t,e[5]=(n*P-i*O+o*k)*t,e[6]=(g*x-p*M-v*b)*t,e[7]=(c*M-d*x+h*b)*t,e[8]=(a*T-s*O+u*j)*t,e[9]=(r*O-n*T-o*j)*t,e[10]=(p*w-y*x+v*m)*t,e[11]=(f*x-c*w-h*m)*t,e[12]=(s*k-a*A-l*j)*t,e[13]=(n*A-r*k+i*j)*t,e[14]=(y*b-p*_-g*m)*t,e[15]=(c*_-f*b+d*m)*t,e):null}},{}],593:[function(e,t,n){"use strict";var p=e("./identity");t.exports=function(e,t,n,r){var i,o=t[0],a=t[1],s=t[2],l=r[0],u=r[1],c=r[2],f=n[0],d=n[1],h=n[2];if(Math.abs(o-f)<1e-6&&Math.abs(a-d)<1e-6&&Math.abs(s-h)<1e-6)return p(e);i=o-f,t=a-d,r=s-h,n=1/Math.sqrt(i*i+t*t+r*r),f=u*(r*=n)-c*(t*=n),d=c*(i*=n)-l*r,h=l*t-u*i,(n=Math.sqrt(f*f+d*d+h*h))?(f*=n=1/n,d*=n,h*=n):h=d=f=0;c=t*h-r*d,l=r*f-i*h,u=i*d-t*f,(n=Math.sqrt(c*c+l*l+u*u))?(c*=n=1/n,l*=n,u*=n):u=l=c=0;return e[0]=f,e[1]=c,e[2]=i,e[3]=0,e[4]=d,e[5]=l,e[6]=t,e[7]=0,e[8]=h,e[9]=u,e[10]=r,e[11]=0,e[12]=-(f*o+d*a+h*s),e[13]=-(c*o+l*a+u*s),e[14]=-(i*o+t*a+r*s),e[15]=1,e}},{"./identity":590}],594:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],h=t[10],p=t[11],y=t[12],g=t[13],v=t[14],m=t[15],b=n[0],x=n[1],_=n[2],t=n[3];return e[0]=b*r+x*s+_*f+t*y,e[1]=b*i+x*l+_*d+t*g,e[2]=b*o+x*u+_*h+t*v,e[3]=b*a+x*c+_*p+t*m,b=n[4],x=n[5],_=n[6],t=n[7],e[4]=b*r+x*s+_*f+t*y,e[5]=b*i+x*l+_*d+t*g,e[6]=b*o+x*u+_*h+t*v,e[7]=b*a+x*c+_*p+t*m,b=n[8],x=n[9],_=n[10],t=n[11],e[8]=b*r+x*s+_*f+t*y,e[9]=b*i+x*l+_*d+t*g,e[10]=b*o+x*u+_*h+t*v,e[11]=b*a+x*c+_*p+t*m,b=n[12],x=n[13],_=n[14],t=n[15],e[12]=b*r+x*s+_*f+t*y,e[13]=b*i+x*l+_*d+t*g,e[14]=b*o+x*u+_*h+t*v,e[15]=b*a+x*c+_*p+t*m,e}},{}],595:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*u,e[15]=1,e}},{}],596:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i){var o=1/Math.tan(t/2),t=1/(r-i);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*t,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*t,e[15]=0,e}},{}],597:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(a+s),t=2/(i+o);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=-(a-s)*l*.5,e[9]=(i-o)*t*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}},{}],598:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i,o,a,s,l,u,c,f,d,h,p,y,g,v,m,b,x,_,w,M=r[0],j=r[1],k=r[2],O=Math.sqrt(M*M+j*j+k*k);if(Math.abs(O)<1e-6)return null;M*=O=1/O,j*=O,k*=O,_=Math.sin(n),w=Math.cos(n),i=1-w,o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],d=t[7],h=t[8],p=t[9],y=t[10],g=t[11],v=M*M*i+w,m=j*M*i+k*_,b=k*M*i-j*_,x=M*j*i-k*_,r=j*j*i+w,O=k*j*i+M*_,n=M*k*i+j*_,_=j*k*i-M*_,w=k*k*i+w,e[0]=o*v+u*m+h*b,e[1]=a*v+c*m+p*b,e[2]=s*v+f*m+y*b,e[3]=l*v+d*m+g*b,e[4]=o*x+u*r+h*O,e[5]=a*x+c*r+p*O,e[6]=s*x+f*r+y*O,e[7]=l*x+d*r+g*O,e[8]=o*n+u*_+h*w,e[9]=a*n+c*_+p*w,e[10]=s*n+f*_+y*w,e[11]=l*n+d*_+g*w,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e}},{}],599:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],n=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=o*i+u*r,e[5]=a*i+c*r,e[6]=s*i+f*r,e[7]=l*i+n*r,e[8]=u*i-o*r,e[9]=c*i-a*r,e[10]=f*i-s*r,e[11]=n*i-l*r,e}},{}],600:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],n=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=o*i-u*r,e[1]=a*i-c*r,e[2]=s*i-f*r,e[3]=l*i-n*r,e[8]=o*r+u*i,e[9]=a*r+c*i,e[10]=s*r+f*i,e[11]=l*r+n*i,e}},{}],601:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],n=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=o*i+u*r,e[1]=a*i+c*r,e[2]=s*i+f*r,e[3]=l*i+n*r,e[4]=u*i-o*r,e[5]=c*i-a*r,e[6]=f*i-s*r,e[7]=n*i-l*r,e}},{}],602:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r=n[0],i=n[1],n=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],603:[function(e,t,n){"use strict";t.exports=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},{}],604:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r,i,o,a,s,l,u,c,f,d,h,p=n[0],y=n[1],g=n[2];t===e?(e[12]=t[0]*p+t[4]*y+t[8]*g+t[12],e[13]=t[1]*p+t[5]*y+t[9]*g+t[13],e[14]=t[2]*p+t[6]*y+t[10]*g+t[14],e[15]=t[3]*p+t[7]*y+t[11]*g+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],h=t[10],n=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=f,e[9]=d,e[10]=h,e[11]=n,e[12]=r*p+s*y+f*g+t[12],e[13]=i*p+l*y+d*g+t[13],e[14]=o*p+u*y+h*g+t[14],e[15]=a*p+c*y+n*g+t[15]);return e}},{}],605:[function(e,t,n){"use strict";t.exports=function(e,t){{var n,r,i,o,a,s;e===t?(n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],s=t[11],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s):(e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15])}return e}},{}],606:[function(n,r,e){!function(t){!function(){"use strict";var e=n("is-browser"),e="function"==typeof t.matchMedia?!t.matchMedia("(hover: none)").matches:e;r.exports=e}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":609}],607:[function(e,t,n){"use strict";e=e("is-browser");t.exports=e&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}()},{"is-browser":609}],608:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function g(n){var r=l();return function(){var e,t=b(n);return function(e,t){{if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return v(e)}(this,r?(e=b(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){var n="function"==typeof Map?new Map:void 0;return(m=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,b(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),u(t,e)})(e)}function a(e,t,n){return(a=l()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);r=new(Function.bind.apply(e,r));return n&&u(r,n.prototype),r}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.InternSet=n.InternMap=void 0;var x=function(){y(u,m(Map));var l=g(u);function u(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;if(d(this,u),t=l.call(this),Object.defineProperties(v(t),{_intern:{value:new Map},_key:{value:n}}),null!=e){var r,i=f(e);try{for(i.s();!(r=i.n()).done;){var o=c(r.value,2),a=o[0],s=o[1];t.set(a,s)}}catch(e){i.e(e)}finally{i.f()}}return t}return h(u,[{key:"get",value:function(e){return p(b(u.prototype),"get",this).call(this,_(this,e))}},{key:"has",value:function(e){return p(b(u.prototype),"has",this).call(this,_(this,e))}},{key:"set",value:function(e,t){return p(b(u.prototype),"set",this).call(this,w(this,e),t)}},{key:"delete",value:function(e){return p(b(u.prototype),"delete",this).call(this,M(this,e))}}]),u}();n.InternMap=x;x=function(){y(s,m(Set));var a=g(s);function s(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j;if(d(this,s),t=a.call(this),Object.defineProperties(v(t),{_intern:{value:new Map},_key:{value:n}}),null!=e){var r,i=f(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.add(o)}}catch(e){i.e(e)}finally{i.f()}}return t}return h(s,[{key:"has",value:function(e){return p(b(s.prototype),"has",this).call(this,_(this,e))}},{key:"add",value:function(e){return p(b(s.prototype),"add",this).call(this,w(this,e))}},{key:"delete",value:function(e){return p(b(s.prototype),"delete",this).call(this,M(this,e))}}]),s}();function _(e,t){var n=e._intern,e=(0,e._key)(t);return n.has(e)?n.get(e):t}function w(e,t){var n=e._intern,e=(0,e._key)(t);return n.has(e)?n.get(e):(n.set(e,t),t)}function M(e,t){var n=e._intern,e=(0,e._key)(t);return n.has(e)&&(t=n.get(e),n.delete(e)),t}function j(e){return null!==e&&"object"===i(e)?e.valueOf():e}n.InternSet=x},{}],609:[function(e,t,n){"use strict";t.exports=!0},{}],610:[function(e,t,n){"use strict";t.exports=o,t.exports.isMobile=o,t.exports.default=o;var r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function o(e){var t=(e=e||{}).ua;if("string"!=typeof(t=(t=!t&&"undefined"!=typeof navigator?navigator.userAgent:t)&&t.headers&&"string"==typeof t.headers["user-agent"]?t.headers["user-agent"]:t))return!1;var n=(e.tablet?i:r).test(t);return n=!n&&e.tablet&&e.featureDetect&&navigator&&1<navigator.maxTouchPoints&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")?!0:n}},{}],611:[function(e,t,n){"use strict";t.exports=function(e){for(var t,n=e.length,r=0;r<n;r++)if(((t=e.charCodeAt(r))<9||13<t)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||8205<t)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}},{}],612:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0});var r={LitElement:!0,UpdatingElement:!0,_$LE:!0};n._$LE=n.UpdatingElement=n.LitElement=void 0;var o=e("@lit/reactive-element");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in n&&n[e]===o[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}}))});var a=e("lit-html");function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=d(n);return function(e,t){{if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return f(e)}(this,r?(e=d(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))});var h=o.ReactiveElement;n.UpdatingElement=h;var e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(i,o.ReactiveElement);var e,t,n,r=c(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.apply(this,arguments)).renderOptions={host:f(e)},e._$Dt=void 0,e}return e=i,(t=[{key:"createRenderRoot",value:function(){var e,t,n=l(d(i.prototype),"createRenderRoot",this).call(this);return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=n.firstChild),n}},{key:"update",value:function(e){var t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),l(d(i.prototype),"update",this).call(this,e),this._$Dt=(0,a.render)(t,this.renderRoot,this.renderOptions)}},{key:"connectedCallback",value:function(){var e;l(d(i.prototype),"connectedCallback",this).call(this),null===(e=this._$Dt)||void 0===e||e.setConnected(!0)}},{key:"disconnectedCallback",value:function(){var e;l(d(i.prototype),"disconnectedCallback",this).call(this),null===(e=this._$Dt)||void 0===e||e.setConnected(!1)}},{key:"render",value:function(){return a.noChange}}])&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();(n.LitElement=e).finalized=!0,e._$litElement$=!0,null===(h=globalThis.litElementHydrateSupport)||void 0===h||h.call(globalThis,{LitElement:e});h=globalThis.litElementPolyfillSupport;null==h||h({LitElement:e});n._$LE={_$AK:function(e,t,n){e._$AK(t,n)},_$AL:function(e){return e._$AL}},(null!==(e=globalThis.litElementVersions)&&void 0!==e?e:globalThis.litElementVersions=[]).push("3.1.1")},{"@lit/reactive-element":2,"lit-html":614}],613:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ifDefined=void 0;var r=e("../lit-html.js");n.ifDefined=function(e){return null!=e?e:r.nothing}},{"../lit-html.js":614}],614:[function(e,t,n){"use strict";function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=o(n);return function(e,t){{if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=o(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function O(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.svg=n.render=n.nothing=n.noChange=n.html=n._$LH=void 0;function P(){return v.createComment(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"")}function d(e){return null===e||"object"!=f(e)&&"function"!=typeof e}function h(e){return m(e)||"function"==typeof(null===e||void 0===e?void 0:e[Symbol.iterator])}function p(i){return function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{_$litType$:i,strings:e,values:n}}}function S(e,t){for(var n,r=e.length-1,i=[],o=2===t?"<svg>":"",a=b,s=0;s<r;s++){for(var l=e[s],u=void 0,c=void 0,f=-1,d=0;d<l.length&&(a.lastIndex=d,null!==(c=a.exec(l)));)d=a.lastIndex,a===b?"!--"===c[1]?a=x:void 0!==c[1]?a=_:void 0!==c[2]?(R.test(c[2])&&(n=RegExp("</"+c[2],"g")),a=w):void 0!==c[3]&&(a=w):a===w?">"===c[0]?(a=null!=n?n:b,f=-1):void 0===c[1]?f=-2:(f=a.lastIndex-c[2].length,u=c[1],a=void 0===c[3]?w:'"'===c[3]?j:M):a===j||a===M?a=w:a===x||a===_?a=b:(a=w,n=void 0);var h=a===w&&e[s+1].startsWith("/>")?" ":"";o+=a===b?l+g:0<=f?(i.push(u),l.slice(0,f)+"$lit$"+l.slice(f)+C+h):l+C+(-2===f?(i.push(void 0),s):h)}if(t=o+(e[r]||"<?>")+(2===t?"</svg>":""),!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==y?y.createHTML(t):t,i]}var E=globalThis.trustedTypes,y=E?E.createPolicy("lit-html",{createHTML:function(e){return e}}):void 0,C="lit$".concat((Math.random()+"").slice(9),"$"),L="?"+C,g="<".concat(L,">"),v=document,m=Array.isArray,b=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,x=/-->/g,_=/>/g,w=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,M=/'/g,j=/"/g,R=/^(?:script|style|textarea)$/i,I=p(1),z=p(2),D=Symbol.for("lit-noChange"),N=Symbol.for("lit-nothing"),F=new WeakMap,B=v.createTreeWalker(v,129,null,!1);n.render=function(e,t,n){var r,i=null!==(r=null==n?void 0:n.renderBefore)&&void 0!==r?r:t,o=i._$litPart$;return void 0===o&&(r=null!==(r=null==n?void 0:n.renderBefore)&&void 0!==r?r:null,i._$litPart$=o=new V(t.insertBefore(P(),r),r,void 0,null!=n?n:{})),o._$AI(e),o},n.nothing=N,n.noChange=D,n.svg=z,n.html=I;var U=function(){function j(e,t){var n,r=e.strings,i=e._$litType$;T(this,j),this.parts=[];var o=0,a=0,s=r.length-1,l=this.parts,e=A(S(r,i),2),r=e[0],u=e[1];for(this.el=j.createElement(r,t),B.currentNode=this.el.content,2===i&&((i=(t=this.el.content).firstChild).remove(),t.append.apply(t,O(i.childNodes)));null!==(n=B.nextNode())&&l.length<s;){if(1===n.nodeType){if(n.hasAttributes()){var c,f=[],d=k(n.getAttributeNames());try{for(d.s();!(c=d.n()).done;){var h,p,y,g=c.value;(g.endsWith("$lit$")||g.startsWith(C))&&(h=u[a++],f.push(g),void 0!==h?(p=n.getAttribute(h.toLowerCase()+"$lit$").split(C),y=/([.?@])?(.*)/.exec(h),l.push({type:1,index:o,name:y[2],strings:p,ctor:"."===y[1]?W:"?"===y[1]?X:"@"===y[1]?Z:G})):l.push({type:6,index:o}))}}catch(e){d.e(e)}finally{d.f()}for(var v=0,m=f;v<m.length;v++){var b=m[v];n.removeAttribute(b)}}if(R.test(n.tagName)){var x=n.textContent.split(C),_=x.length-1;if(0<_){n.textContent=E?E.emptyScript:"";for(var w=0;w<_;w++)n.append(x[w],P()),B.nextNode(),l.push({type:2,index:++o});n.append(x[_],P())}}}else if(8===n.nodeType)if(n.data===L)l.push({type:2,index:o});else for(var M=-1;-1!==(M=n.data.indexOf(C,M+1));)l.push({type:7,index:o}),M+=C.length-1;o++}}return c(j,null,[{key:"createElement",value:function(e,t){var n=v.createElement("template");return n.innerHTML=e,n}}]),j}();function q(e,t){var n,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e,i=3<arguments.length?arguments[3]:void 0;if(t===D)return t;var o=void 0!==i?null===(n=r._$Cl)||void 0===n?void 0:n[i]:r._$Cu,a=d(t)?void 0:t._$litDirective$;return(null==o?void 0:o.constructor)!==a&&(null===(n=null==o?void 0:o._$AO)||void 0===n||n.call(o,!1),void 0===a?o=void 0:(o=new a(e))._$AT(e,r,i),void 0!==i?(null!==(a=r._$Cl)&&void 0!==a?a:r._$Cl=[])[i]=o:r._$Cu=o),t=void 0!==o?q(e,o._$AS(e,t.values),o,i):t}var H=function(){function n(e,t){T(this,n),this.v=[],this._$AN=void 0,this._$AD=e,this._$AM=t}return c(n,[{key:"parentNode",get:function(){return this._$AM.parentNode}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"p",value:function(e){var t=this._$AD,n=t.el.content,r=t.parts,n=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:v).importNode(n,!0);B.currentNode=n;for(var i,o=B.nextNode(),a=0,s=0,l=r[0];void 0!==l;)a===l.index&&(i=void 0,2===l.type?i=new V(o,o.nextSibling,this,e):1===l.type?i=new l.ctor(o,l.name,l.strings,this,e):6===l.type&&(i=new $(o,this,e)),this.v.push(i),l=r[++s]),a!==(null==l?void 0:l.index)&&(o=B.nextNode(),a++);return n}},{key:"m",value:function(e){var t,n=0,r=k(this.v);try{for(r.s();!(t=r.n()).done;){var i=t.value;void 0!==i&&(void 0!==i.strings?(i._$AI(e,i,n),n+=i.strings.length-2):i._$AI(e[n])),n++}}catch(e){r.e(e)}finally{r.f()}}}]),n}(),V=function(){function s(e,t,n,r){T(this,s),this.type=2,this._$AH=N,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=r,this._$Cg=null===(r=null==r?void 0:r.isConnected)||void 0===r||r}return c(s,[{key:"_$AU",get:function(){var e;return null!==(e=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==e?e:this._$Cg}},{key:"parentNode",get:function(){var e=this._$AA.parentNode,t=this._$AM;return e=void 0!==t&&11===e.nodeType?t.parentNode:e}},{key:"startNode",get:function(){return this._$AA}},{key:"endNode",get:function(){return this._$AB}},{key:"_$AI",value:function(e){e=q(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:this),d(e)?e===N||null==e||""===e?(this._$AH!==N&&this._$AR(),this._$AH=N):e!==this._$AH&&e!==D&&this.$(e):void 0!==e._$litType$?this.T(e):void 0!==e.nodeType?this.S(e):h(e)?this.A(e):this.$(e)}},{key:"M",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._$AB;return this._$AA.parentNode.insertBefore(e,t)}},{key:"S",value:function(e){this._$AH!==e&&(this._$AR(),this._$AH=this.M(e))}},{key:"$",value:function(e){this._$AH!==N&&d(this._$AH)?this._$AA.nextSibling.data=e:this.S(v.createTextNode(e)),this._$AH=e}},{key:"T",value:function(e){var t=e.values,n=e._$litType$,e="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=U.createElement(n.h,this.options)),n);(null===(n=this._$AH)||void 0===n?void 0:n._$AD)===e?this._$AH.m(t):(e=(n=new H(e,this)).p(this.options),n.m(t),this.S(e),this._$AH=n)}},{key:"_$AC",value:function(e){var t=F.get(e.strings);return void 0===t&&F.set(e.strings,t=new U(e)),t}},{key:"A",value:function(e){m(this._$AH)||(this._$AH=[],this._$AR());var t,n,r=this._$AH,i=0,o=k(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;i===r.length?r.push(t=new s(this.M(P()),this.M(P()),this,this.options)):t=r[i],t._$AI(a),i++}}catch(e){o.e(e)}finally{o.f()}i<r.length&&(this._$AR(t&&t._$AB.nextSibling,i),r.length=i)}},{key:"_$AR",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._$AA.nextSibling;for(null===(e=this._$AP)||void 0===e||e.call(this,!1,!0,1<arguments.length?arguments[1]:void 0);t&&t!==this._$AB;){var n=t.nextSibling;t.remove(),t=n}}},{key:"setConnected",value:function(e){var t;void 0===this._$AM&&(this._$Cg=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}]),s}(),G=function(){function o(e,t,n,r,i){T(this,o),this.type=1,this._$AH=N,this._$AN=void 0,this.element=e,this.name=t,this._$AM=r,this.options=i,2<n.length||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=N}return c(o,[{key:"tagName",get:function(){return this.element.tagName}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this,n=2<arguments.length?arguments[2]:void 0,r=3<arguments.length?arguments[3]:void 0,i=this.strings,o=!1;if(void 0===i)e=q(this,e,t,0),(o=!d(e)||e!==this._$AH&&e!==D)&&(this._$AH=e);else{var a,s,l=e;for(e=i[0],a=0;a<i.length-1;a++)(s=q(this,l[n+a],t,a))===D&&(s=this._$AH[a]),o=o||(!d(s)||s!==this._$AH[a]),s===N?e=N:e!==N&&(e+=(null!=s?s:"")+i[a+1]),this._$AH[a]=s}o&&!r&&this.k(e)}},{key:"k",value:function(e){e===N?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}]),o}(),W=function(){r(n,G);var t=s(n);function n(){var e;return T(this,n),(e=t.apply(this,arguments)).type=3,e}return c(n,[{key:"k",value:function(e){this.element[this.name]=e===N?void 0:e}}]),n}(),Y=E?E.emptyScript:"",X=function(){r(n,G);var t=s(n);function n(){var e;return T(this,n),(e=t.apply(this,arguments)).type=4,e}return c(n,[{key:"k",value:function(e){e&&e!==N?this.element.setAttribute(this.name,Y):this.element.removeAttribute(this.name)}}]),n}(),Z=function(){r(a,G);var o=s(a);function a(e,t,n,r,i){return T(this,a),(i=o.call(this,e,t,n,r,i)).type=5,i}return c(a,[{key:"_$AI",value:function(e){var t,n,r;(e=null!==(r=q(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:this,0))&&void 0!==r?r:N)!==D&&(t=this._$AH,n=e===N&&t!==N||e.capture!==t.capture||e.once!==t.once||e.passive!==t.passive,r=e!==N&&(t===N||n),n&&this.element.removeEventListener(this.name,this,t),r&&this.element.addEventListener(this.name,this,e),this._$AH=e)}},{key:"handleEvent",value:function(e){var t;"function"==typeof this._$AH?this._$AH.call(null!==(t=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==t?t:this.element,e):this._$AH.handleEvent(e)}}]),a}(),$=function(){function r(e,t,n){T(this,r),this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}return c(r,[{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(e){q(this,e)}}]),r}(),z={P:"$lit$",V:C,L:L,I:1,N:S,R:H,D:h,j:q,H:V,O:G,F:X,B:Z,W:W,Z:$},I=window.litHtmlPolyfillSupport;n._$LH=z,null==I||I(U,V),(null!==(I=globalThis.litHtmlVersions)&&void 0!==I?I:globalThis.litHtmlVersions=[]).push("2.1.1")},{}],615:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("lit-html/directives/if-defined.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))})},{"lit-html/directives/if-defined.js":613}],616:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("@lit/reactive-element"),e("lit-html");var r=e("lit-element/lit-element.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))})},{"@lit/reactive-element":2,"lit-element/lit-element.js":612,"lit-html":614}],617:[function(e,t,n){"use strict";var i={left:0,top:0};t.exports=function(e,t,n){t=t||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var r=e.clientX||0,e=e.clientY||0,t=function(e){return e===window||e===document||e===document.body?i:e.getBoundingClientRect()}(t);return n[0]=r-t.left,n[1]=e-t.top,n}},{}],618:[function(e,i,t){!function(r,x){!function(){"use strict";function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var e,t,n;n=function(){var t,n,r,i,o,e=Object.prototype.toString,a=void 0!==x?function(e){return x(e)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(e,t,n,r){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==r})}}catch(e){t=function(e,t,n){return e[t]=n,e}}function s(e,t){this.fn=e,this.self=t,this.next=void 0}function l(e,t){v.add(e,t),n=n||a(v.drain)}function u(e){var t,n=b(e);return"function"==typeof(t=null!=e&&("object"==n||"function"==n)?e.then:t)&&t}function c(){for(var e=0;e<this.chain.length;e++)!function(e,t,n){var r,i;try{!1===t?n.reject(e.msg):(r=!0===t?e.msg:t.call(void 0,e.msg))===n.promise?n.reject(TypeError("Promise-chain cycle")):(i=u(r))?i.call(r,n.resolve,n.reject):n.resolve(r)}catch(e){n.reject(e)}}(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function f(e){var n,r=this;if(!r.triggered){r.triggered=!0,r.def&&(r=r.def);try{(n=u(e))?l(function(){var t=new p(r);try{n.call(e,function(){f.apply(t,arguments)},function(){d.apply(t,arguments)})}catch(e){d.call(t,e)}}):(r.msg=e,r.state=1,0<r.chain.length&&l(c,r))}catch(e){d.call(new p(r),e)}}}function d(e){var t=this;t.triggered||(t.triggered=!0,(t=t.def?t.def:t).msg=e,t.state=2,0<t.chain.length&&l(c,t))}function h(e,n,r,i){for(var t=0;t<n.length;t++)!function(t){e.resolve(n[t]).then(function(e){r(t,e)},i)}(t)}function p(e){this.def=e,this.triggered=!1}function y(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var r=new y(this);this.then=function(e,t){var n={success:"function"!=typeof e||e,failure:"function"==typeof t&&t};return n.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");n.resolve=e,n.reject=t}),r.chain.push(n),0!==r.state&&l(c,r),n.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,function(e){f.call(r,e)},function(e){d.call(r,e)})}catch(e){d.call(r,e)}}var v={add:function(e,t){o=new s(e,t),i?i.next=o:r=o,i=o,o=void 0},drain:function(){var e=r;for(r=i=n=void 0;e;)e.fn.call(e.self),e=e.next}},m=t({},"constructor",g,!1);return t(g.prototype=m,"__NPO__",0,!1),t(g,"resolve",function(n){return n&&"object"==b(n)&&1===n.__NPO__?n:new this(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");e(n)})}),t(g,"reject",function(n){return new this(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");t(n)})}),t(g,"all",function(t){var a=this;return"[object Array]"!=e.call(t)?a.reject(TypeError("Not an array")):0===t.length?a.resolve([]):new a(function(n,e){if("function"!=typeof n||"function"!=typeof e)throw TypeError("Not a function");var r=t.length,i=Array(r),o=0;h(a,t,function(e,t){i[e]=t,++o===r&&n(i)},e)})}),t(g,"race",function(t){var r=this;return"[object Array]"!=e.call(t)?r.reject(TypeError("Not an array")):new r(function(n,e){if("function"!=typeof n||"function"!=typeof e)throw TypeError("Not a function");h(r,t,function(e,t){n(t)},e)})}),g},(t=void 0!==r?r:void 0)[e="Promise"]=t[e]||n(),void 0!==i&&i.exports&&(i.exports=t[e])}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{timers:979}],619:[function(e,t,n){"use strict";t.exports=function(e){var i=[];return e.replace(r,function(e,t,n){var r=t.toLowerCase();for(n=function(e){e=e.match(a);return e?e.map(Number):[]}(n),"m"==r&&2<n.length&&(i.push([t].concat(n.splice(0,2))),r="l",t="m"==t?"l":"L");;){if(n.length==o[r])return n.unshift(t),i.push(n);if(n.length<o[r])throw new Error("malformed path data");i.push([t].concat(n.splice(0,o[r])))}}),i};var o={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var a=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],620:[function(e,t,n){"use strict";var r,i=e("../src/lib"),o={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(r in o){var a=r.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");i.addStyleRule(a,o[r])}},{"../src/lib":779}],621:[function(e,t,n){"use strict";t.exports=e("../src/core")},{"../src/core":760}],622:[function(e,t,n){"use strict";t.exports=e("../src/traces/histogram")},{"../src/traces/histogram":914}],623:[function(e,t,n){"use strict";t.exports=e("../src/traces/isosurface")},{"../src/traces/isosurface":920}],624:[function(e,t,n){"use strict";t.exports=e("../src/traces/scatter3d")},{"../src/traces/scatter3d":929}],625:[function(e,t,n){"use strict";var i=e("color-rgba"),o=e("clamp"),a=e("dtype");t.exports=function(e,t){var n=new(a(t="uint_clamped"===(t="uint"===(t="float"===t||!t?"array":t)?"uint8":t)?"uint8_clamped":t))(4),r="uint8"!==t&&"uint8_clamped"!==t;return e.length&&"string"!=typeof e||((e=i(e))[0]/=255,e[1]/=255,e[2]/=255),(t=e)instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(1<t[0]||0===t[0])&&(1<t[1]||0===t[1])&&(1<t[2]||0===t[2])&&(!t[3]||1<t[3]))?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=null!=e[3]?e[3]:255,r&&(n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255)):r?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=null!=e[3]?e[3]:1):(n[0]=o(Math.floor(255*e[0]),0,255),n[1]=o(Math.floor(255*e[1]),0,255),n[2]=o(Math.floor(255*e[2]),0,255),n[3]=null==e[3]?255:o(Math.floor(255*e[3]),0,255)),n}},{clamp:6,"color-rgba":627,dtype:572}],626:[function(e,t,n){"use strict";var u=e("color-name");t.exports=function(e){var t,n,r=[],i=1;{var o,a,s,l;"string"==typeof e?u[e]?(r=u[e].slice(),n="rgb"):"transparent"===e?(n="rgb",r=[i=0,0,0]):/^#[A-Fa-f0-9]+$/.test(e)?(l=(s=e.slice(1)).length,i=1,l<=4?(r=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],4===l&&(i=parseInt(s[3]+s[3],16)/255)):(r=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],8===l&&(i=parseInt(s[6]+s[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),n="rgb"):(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(e))?(o=t[1],a="rgb"===o,s=o.replace(/a$/,""),l="cmyk"===(n=s)?4:"gray"===s?1:3,r=t[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(e,t){if(/%$/.test(e))return t===l?parseFloat(e)/100:"rgb"===s?255*parseFloat(e)/100:parseFloat(e);if("h"===s[t]){if(/deg$/.test(e))return parseFloat(e);if(void 0!==c[e])return c[e]}return parseFloat(e)}),o===s&&r.push(1),i=a||void 0===r[l]?1:r[l],r=r.slice(0,l)):10<e.length&&/[0-9](?:\s|\/)/.test(e)&&(r=e.match(/([0-9]+)/g).map(function(e){return parseFloat(e)}),n=e.match(/([a-z])/gi).join("").toLowerCase()):isNaN(e)?Array.isArray(e)||e.length?(r=[e[0],e[1],e[2]],n="rgb",i=4===e.length?e[3]:1):e instanceof Object&&(r=null!=e.r||null!=e.red||null!=e.R?(n="rgb",[e.r||e.red||e.R||0,e.g||e.green||e.G||0,e.b||e.blue||e.B||0]):(n="hsl",[e.h||e.hue||e.H||0,e.s||e.saturation||e.S||0,e.l||e.lightness||e.L||e.b||e.brightness]),i=e.a||e.alpha||e.opacity||1,null!=e.opacity&&(i/=100)):(n="rgb",r=[e>>>16,(65280&e)>>>8,255&e])}return{space:n,values:r,alpha:i}};var c={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},{"color-name":7}],627:[function(e,t,n){"use strict";var i=e("color-parse"),o=e("color-space/rgb"),a=e("color-space/hsl");t.exports=function(e){Array.isArray(e)&&e.raw&&(e=String.raw.apply(null,arguments));var t=i(e);if(!t.space)return[];var n=("h"===t.space[0]?a:o).min,r=("h"===t.space[0]?a:o).max;return(e=Array(3))[0]=Math.min(Math.max(t.values[0],n[0]),r[0]),e[1]=Math.min(Math.max(t.values[1],n[1]),r[1]),e[2]=Math.min(Math.max(t.values[2],n[2]),r[2]),(e="h"===t.space[0]?a.rgb(e):e).push(Math.min(Math.max(t.alpha,0),1)),e}},{"color-parse":626,"color-space/hsl":8,"color-space/rgb":9}],628:[function(e,t,n){var r,i;r=this,i=function(t){"use strict";function o(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,t=e.slice(0,n);return[1<t.length?t[0]+t.slice(2):t,+e.slice(n+1)]}function u(e){return(e=o(Math.abs(e)))?e[1]:NaN}var A,n=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function T(e){if(!(t=n.exec(e)))throw new Error("invalid format: "+e);var t;return new r({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function r(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function i(e,t){t=o(e,t);if(!t)return e+"";e=t[0],t=t[1];return t<0?"0."+new Array(-t).join("0")+e:e.length>t+1?e.slice(0,t+1)+"."+e.slice(t+1):e+new Array(t-e.length+2).join("0")}T.prototype=r.prototype,r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var P={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return 1e21<=Math.abs(e=Math.round(e))?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return i(100*e,t)},r:i,s:function(e,t){if(!(r=o(e,t)))return e+"";var n=r[0],r=(i=r[1])-(A=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,i=n.length;return r===i?n:i<r?n+new Array(r-i+1).join("0"):0<r?n.slice(0,r)+"."+n.slice(r):"0."+new Array(1-r).join("0")+o(e,Math.max(0,t+r-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function c(e){return e}var a,f=Array.prototype.map,S=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function s(e){var t,s,l,w=void 0===e.grouping||void 0===e.thousands?c:(s=f.call(e.grouping,Number),l=e.thousands+"",function(e,t){for(var n=e.length,r=[],i=0,o=s[0],a=0;0<n&&0<o&&(t<a+o+1&&(o=Math.max(1,t-a)),r.push(e.substring(n-=o,n+o)),!((a+=o+1)>t));)o=s[i=(i+1)%s.length];return r.reverse().join(l)}),r=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",M=void 0===e.decimal?".":e.decimal+"",j=void 0===e.numerals?c:(t=f.call(e.numerals,String),function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}),o=void 0===e.percent?"%":e.percent+"",k=void 0===e.minus?"-":e.minus+"",O=void 0===e.nan?"NaN":e.nan+"";function a(e){var u=(e=T(e)).fill,c=e.align,f=e.sign,t=e.symbol,d=e.zero,h=e.width,p=e.comma,y=e.precision,g=e.trim,v=e.type;"n"===v?(p=!0,v="g"):P[v]||(void 0===y&&(y=12),g=!0,v="g"),(d||"0"===u&&"="===c)&&(d=!0,u="0",c="=");var m="$"===t?r:"#"===t&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===t?i:/[%p]/.test(v)?o:"",x=P[v],_=/[defgprs%]/.test(v);function n(e){var t,n,r,i=m,o=b;if("c"===v)o=x(e)+o,e="";else{var a=(e=+e)<0||1/e<0;if(e=isNaN(e)?O:x(Math.abs(e),y),g&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;0<i&&(i=0)}return 0<i?e.slice(0,i)+e.slice(t+1):e}(e)),i=((a=a&&0==+e&&"+"!==f?!1:a)?"("===f?f:k:"-"===f||"("===f?"":f)+i,o=("s"===v?S[8+A/3]:"")+o+(a&&"("===f?")":""),_)for(t=-1,n=e.length;++t<n;)if((r=e.charCodeAt(t))<48||57<r){o=(46===r?M+e.slice(t+1):e.slice(t))+o,e=e.slice(0,t);break}}p&&!d&&(e=w(e,1/0));var s=i.length+e.length+o.length,l=s<h?new Array(h-s+1).join(u):"";switch(p&&d&&(e=w(l+e,l.length?h-o.length:1/0),l=""),c){case"<":e=i+e+o+l;break;case"=":e=i+l+e+o;break;case"^":e=l.slice(0,s=l.length>>1)+i+e+o+l.slice(s);break;default:e=l+i+e+o}return j(e)}return y=void 0===y?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),n.toString=function(){return e+""},n}return{format:a,formatPrefix:function(e,t){var n=a(((e=T(e)).type="f",e)),t=3*Math.max(-8,Math.min(8,Math.floor(u(t)/3))),r=Math.pow(10,-t),i=S[8+t/3];return function(e){return n(r*e)+i}}}}function e(e){return a=s(e),t.format=a.format,t.formatPrefix=a.formatPrefix,a}e({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),t.FormatSpecifier=r,t.formatDefaultLocale=e,t.formatLocale=s,t.formatSpecifier=T,t.precisionFixed=function(e){return Math.max(0,-u(Math.abs(e)))},t.precisionPrefix=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(u(t)/3)))-u(Math.abs(e)))},t.precisionRound=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,u(t)-u(e))+1},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):i((r="undefined"!=typeof globalThis?globalThis:r||self).d3=r.d3||{})},{}],629:[function(e,t,n){var r,i;r=this,i=function(t,k){"use strict";function O(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function A(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function T(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function n(e){var r=e.dateTime,i=e.date,o=e.time,t=e.periods,n=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,u=S(t),c=E(t),f=S(n),d=E(n),h=S(a),p=E(a),y=S(s),g=E(s),v=S(l),m=E(l),b={a:function(e){return a[e.getDay()]},A:function(e){return n[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Q,e:Q,f:re,g:he,G:ye,H:J,I:ee,j:te,L:ne,m:ie,M:oe,p:function(e){return t[+(12<=e.getHours())]},q:function(e){return 1+~~(e.getMonth()/3)},Q:De,s:Ne,S:ae,u:se,U:le,V:ue,w:ce,W:fe,x:null,X:null,y:de,Y:pe,Z:ge,"%":ze},x={a:function(e){return a[e.getUTCDay()]},A:function(e){return n[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:ve,e:ve,f:we,g:Ce,G:Re,H:me,I:be,j:xe,L:_e,m:Me,M:je,p:function(e){return t[+(12<=e.getUTCHours())]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:De,s:Ne,S:ke,u:Oe,U:Ae,V:Te,w:Pe,W:Se,x:null,X:null,y:Ee,Y:Le,Z:Ie,"%":ze},_={a:function(e,t,n){t=h.exec(t.slice(n));return t?(e.w=p[t[0].toLowerCase()],n+t[0].length):-1},A:function(e,t,n){t=f.exec(t.slice(n));return t?(e.w=d[t[0].toLowerCase()],n+t[0].length):-1},b:function(e,t,n){t=v.exec(t.slice(n));return t?(e.m=m[t[0].toLowerCase()],n+t[0].length):-1},B:function(e,t,n){t=y.exec(t.slice(n));return t?(e.m=g[t[0].toLowerCase()],n+t[0].length):-1},c:function(e,t,n){return j(e,r,t,n)},d:q,e:q,f:X,g:N,G:D,H:V,I:V,j:H,L:Y,m:U,M:G,p:function(e,t,n){t=u.exec(t.slice(n));return t?(e.p=c[t[0].toLowerCase()],n+t[0].length):-1},q:B,Q:$,s:K,S:W,u:L,U:R,V:I,w:C,W:z,x:function(e,t,n){return j(e,i,t,n)},X:function(e,t,n){return j(e,o,t,n)},y:N,Y:D,Z:F,"%":Z};function w(l,u){return function(e){var t,n,r,i=[],o=-1,a=0,s=l.length;for(e instanceof Date||(e=new Date(+e));++o<s;)37===l.charCodeAt(o)&&(i.push(l.slice(a,o)),null!=(n=P[t=l.charAt(++o)])?t=l.charAt(++o):n="e"===t?" ":"0",(r=u[t])&&(t=r(e,n)),i.push(t),a=o+1);return i.push(l.slice(a,o)),i.join("")}}function M(i,o){return function(e){var t,n,r=T(1900,void 0,1);if(j(r,i,e+="",0)!=e.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(!o||"Z"in r||(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(t=4<(n=(t=A(T(r.y,0,1))).getUTCDay())||0===n?k.utcMonday.ceil(t):k.utcMonday(t),t=k.utcDay.offset(t,7*(r.V-1)),r.y=t.getUTCFullYear(),r.m=t.getUTCMonth(),r.d=t.getUTCDate()+(r.w+6)%7):(t=4<(n=(t=O(T(r.y,0,1))).getDay())||0===n?k.timeMonday.ceil(t):k.timeMonday(t),t=k.timeDay.offset(t,7*(r.V-1)),r.y=t.getFullYear(),r.m=t.getMonth(),r.d=t.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?A(T(r.y,0,1)).getUTCDay():O(T(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,A(r)):O(r)}}function j(e,t,n,r){for(var i,o,a=0,s=t.length,l=n.length;a<s;){if(l<=r)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=_[i in P?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=w(i,b),b.X=w(o,b),b.c=w(r,b),x.x=w(i,x),x.X=w(o,x),x.c=w(r,x),{format:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=M(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=M(e+="",!0);return t.toString=function(){return e},t}}}var r,P={"-":"",_:" ",0:"0"},i=/^\s*\d+/,o=/^%/,a=/[\\^$*+?|[\]().{}]/g;function s(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",e=i.length;return r+(e<n?new Array(n-e+1).join(t)+i:i)}function l(e){return e.replace(a,"\\$&")}function S(e){return new RegExp("^(?:"+e.map(l).join("|")+")","i")}function E(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function C(e,t,n){t=i.exec(t.slice(n,n+1));return t?(e.w=+t[0],n+t[0].length):-1}function L(e,t,n){t=i.exec(t.slice(n,n+1));return t?(e.u=+t[0],n+t[0].length):-1}function R(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.U=+t[0],n+t[0].length):-1}function I(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.V=+t[0],n+t[0].length):-1}function z(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.W=+t[0],n+t[0].length):-1}function D(e,t,n){t=i.exec(t.slice(n,n+4));return t?(e.y=+t[0],n+t[0].length):-1}function N(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.y=+t[0]+(68<+t[0]?1900:2e3),n+t[0].length):-1}function F(e,t,n){t=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return t?(e.Z=t[1]?0:-(t[2]+(t[3]||"00")),n+t[0].length):-1}function B(e,t,n){t=i.exec(t.slice(n,n+1));return t?(e.q=3*t[0]-3,n+t[0].length):-1}function U(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.m=t[0]-1,n+t[0].length):-1}function q(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.d=+t[0],n+t[0].length):-1}function H(e,t,n){t=i.exec(t.slice(n,n+3));return t?(e.m=0,e.d=+t[0],n+t[0].length):-1}function V(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.H=+t[0],n+t[0].length):-1}function G(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.M=+t[0],n+t[0].length):-1}function W(e,t,n){t=i.exec(t.slice(n,n+2));return t?(e.S=+t[0],n+t[0].length):-1}function Y(e,t,n){t=i.exec(t.slice(n,n+3));return t?(e.L=+t[0],n+t[0].length):-1}function X(e,t,n){t=i.exec(t.slice(n,n+6));return t?(e.L=Math.floor(t[0]/1e3),n+t[0].length):-1}function Z(e,t,n){t=o.exec(t.slice(n,n+1));return t?n+t[0].length:-1}function $(e,t,n){t=i.exec(t.slice(n));return t?(e.Q=+t[0],n+t[0].length):-1}function K(e,t,n){t=i.exec(t.slice(n));return t?(e.s=+t[0],n+t[0].length):-1}function Q(e,t){return s(e.getDate(),t,2)}function J(e,t){return s(e.getHours(),t,2)}function ee(e,t){return s(e.getHours()%12||12,t,2)}function te(e,t){return s(1+k.timeDay.count(k.timeYear(e),e),t,3)}function ne(e,t){return s(e.getMilliseconds(),t,3)}function re(e,t){return ne(e,t)+"000"}function ie(e,t){return s(e.getMonth()+1,t,2)}function oe(e,t){return s(e.getMinutes(),t,2)}function ae(e,t){return s(e.getSeconds(),t,2)}function se(e){e=e.getDay();return 0===e?7:e}function le(e,t){return s(k.timeSunday.count(k.timeYear(e)-1,e),t,2)}function u(e){var t=e.getDay();return 4<=t||0===t?k.timeThursday(e):k.timeThursday.ceil(e)}function ue(e,t){return e=u(e),s(k.timeThursday.count(k.timeYear(e),e)+(4===k.timeYear(e).getDay()),t,2)}function ce(e){return e.getDay()}function fe(e,t){return s(k.timeMonday.count(k.timeYear(e)-1,e),t,2)}function de(e,t){return s(e.getFullYear()%100,t,2)}function he(e,t){return s((e=u(e)).getFullYear()%100,t,2)}function pe(e,t){return s(e.getFullYear()%1e4,t,4)}function ye(e,t){var n=e.getDay();return s((e=4<=n||0===n?k.timeThursday(e):k.timeThursday.ceil(e)).getFullYear()%1e4,t,4)}function ge(e){e=e.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+s(e/60|0,"0",2)+s(e%60,"0",2)}function ve(e,t){return s(e.getUTCDate(),t,2)}function me(e,t){return s(e.getUTCHours(),t,2)}function be(e,t){return s(e.getUTCHours()%12||12,t,2)}function xe(e,t){return s(1+k.utcDay.count(k.utcYear(e),e),t,3)}function _e(e,t){return s(e.getUTCMilliseconds(),t,3)}function we(e,t){return _e(e,t)+"000"}function Me(e,t){return s(e.getUTCMonth()+1,t,2)}function je(e,t){return s(e.getUTCMinutes(),t,2)}function ke(e,t){return s(e.getUTCSeconds(),t,2)}function Oe(e){e=e.getUTCDay();return 0===e?7:e}function Ae(e,t){return s(k.utcSunday.count(k.utcYear(e)-1,e),t,2)}function c(e){var t=e.getUTCDay();return 4<=t||0===t?k.utcThursday(e):k.utcThursday.ceil(e)}function Te(e,t){return e=c(e),s(k.utcThursday.count(k.utcYear(e),e)+(4===k.utcYear(e).getUTCDay()),t,2)}function Pe(e){return e.getUTCDay()}function Se(e,t){return s(k.utcMonday.count(k.utcYear(e)-1,e),t,2)}function Ee(e,t){return s(e.getUTCFullYear()%100,t,2)}function Ce(e,t){return s((e=c(e)).getUTCFullYear()%100,t,2)}function Le(e,t){return s(e.getUTCFullYear()%1e4,t,4)}function Re(e,t){var n=e.getUTCDay();return s((e=4<=n||0===n?k.utcThursday(e):k.utcThursday.ceil(e)).getUTCFullYear()%1e4,t,4)}function Ie(){return"+0000"}function ze(){return"%"}function De(e){return+e}function Ne(e){return Math.floor(+e/1e3)}function e(e){return r=n(e),t.timeFormat=r.format,t.timeParse=r.parse,t.utcFormat=r.utcFormat,t.utcParse=r.utcParse,r}e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var f="%Y-%m-%dT%H:%M:%S.%LZ";var d=Date.prototype.toISOString?function(e){return e.toISOString()}:t.utcFormat(f);f=+new Date("2000-01-01T00:00:00.000Z")?function(e){return e=new Date(e),isNaN(e)?null:e}:t.utcParse(f);t.isoFormat=d,t.isoParse=f,t.timeFormatDefaultLocale=e,t.timeFormatLocale=n,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-time")):i((r=r||self).d3=r.d3||{},r.d3)},{"d3-time":630}],630:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";var i=new Date,l=new Date;function u(o,a,n,r){function s(e){return o(e=0===arguments.length?new Date:new Date(+e)),e}return s.floor=function(e){return o(e=new Date(+e)),e},s.ceil=function(e){return o(e=new Date(e-1)),a(e,1),o(e),e},s.round=function(e){var t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=function(e,t){return a(e=new Date(+e),null==t?1:Math.floor(t)),e},s.range=function(e,t,n){var r,i=[];if(e=s.ceil(e),n=null==n?1:Math.floor(n),!(e<t&&0<n))return i;for(;i.push(r=new Date(+e)),a(e,n),o(e),r<e&&e<t;);return i},s.filter=function(n){return u(function(e){if(e<=e)for(;o(e),!n(e);)e.setTime(e-1)},function(e,t){if(e<=e)if(t<0)for(;++t<=0;)for(;a(e,-1),!n(e););else for(;0<=--t;)for(;a(e,1),!n(e););})},n&&(s.count=function(e,t){return i.setTime(+e),l.setTime(+t),o(i),o(l),Math.floor(n(i,l))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&0<t?1<t?s.filter(r?function(e){return r(e)%t==0}:function(e){return s.count(0,e)%t==0}):s:null}),s}var t=u(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});t.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?u(function(e){e.setTime(Math.floor(e/n)*n)},function(e,t){e.setTime(+e+t*n)},function(e,t){return(t-e)/n}):t:null};var n=t.range,r=u(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),o=r.range,a=u(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getMinutes()}),s=a.range,c=u(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),f=c.range,d=u(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5},function(e){return e.getDate()-1}),h=d.range;function p(t){return u(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}var y=p(0),g=p(1),v=p(2),m=p(3),b=p(4),x=p(5),_=p(6),w=y.range,M=g.range,j=v.range,k=m.range,O=b.range,A=x.range,T=_.range,P=u(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),S=P.range,E=u(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});E.every=function(n){return isFinite(n=Math.floor(n))&&0<n?u(function(e){e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*n)}):null};var C=E.range,L=u(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getUTCMinutes()}),R=L.range,I=u(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),z=I.range,D=u(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),N=D.range;function F(t){return u(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}var B=F(0),U=F(1),q=F(2),H=F(3),V=F(4),G=F(5),W=F(6),Y=B.range,X=U.range,Z=q.range,$=H.range,K=V.range,Q=G.range,J=W.range,ee=u(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),te=ee.range,ne=u(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});ne.every=function(n){return isFinite(n=Math.floor(n))&&0<n?u(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*n)}):null};var re=ne.range;e.timeDay=d,e.timeDays=h,e.timeFriday=x,e.timeFridays=A,e.timeHour=c,e.timeHours=f,e.timeInterval=u,e.timeMillisecond=t,e.timeMilliseconds=n,e.timeMinute=a,e.timeMinutes=s,e.timeMonday=g,e.timeMondays=M,e.timeMonth=P,e.timeMonths=S,e.timeSaturday=_,e.timeSaturdays=T,e.timeSecond=r,e.timeSeconds=o,e.timeSunday=y,e.timeSundays=w,e.timeThursday=b,e.timeThursdays=O,e.timeTuesday=v,e.timeTuesdays=j,e.timeWednesday=m,e.timeWednesdays=k,e.timeWeek=y,e.timeWeeks=w,e.timeYear=E,e.timeYears=C,e.utcDay=D,e.utcDays=N,e.utcFriday=G,e.utcFridays=Q,e.utcHour=I,e.utcHours=z,e.utcMillisecond=t,e.utcMilliseconds=n,e.utcMinute=L,e.utcMinutes=R,e.utcMonday=U,e.utcMondays=X,e.utcMonth=ee,e.utcMonths=te,e.utcSaturday=W,e.utcSaturdays=J,e.utcSecond=r,e.utcSeconds=o,e.utcSunday=B,e.utcSundays=Y,e.utcThursday=V,e.utcThursdays=K,e.utcTuesday=q,e.utcTuesdays=Z,e.utcWednesday=H,e.utcWednesdays=$,e.utcWeek=B,e.utcWeeks=Y,e.utcYear=ne,e.utcYears=re,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):i((r=r||self).d3=r.d3||{})},{}],631:[function(e,t,n){"use strict";var r=e("../annotations/attributes"),i=e("../../plot_api/edit_types").overrideAll,e=e("../../plot_api/plot_template").templatedArray;t.exports=i(e("annotation",{visible:r.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:r.xanchor,xshift:r.xshift,yanchor:r.yanchor,yshift:r.yshift,text:r.text,textangle:r.textangle,font:r.font,width:r.width,height:r.height,opacity:r.opacity,align:r.align,valign:r.valign,bgcolor:r.bgcolor,bordercolor:r.bordercolor,borderpad:r.borderpad,borderwidth:r.borderwidth,showarrow:r.showarrow,arrowcolor:r.arrowcolor,arrowhead:r.arrowhead,startarrowhead:r.startarrowhead,arrowside:r.arrowside,arrowsize:r.arrowsize,startarrowsize:r.startarrowsize,arrowwidth:r.arrowwidth,standoff:r.standoff,startstandoff:r.startstandoff,hovertext:r.hovertext,hoverlabel:r.hoverlabel,captureevents:r.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../annotations/attributes":637}],632:[function(e,t,n){"use strict";var i=e("../../lib"),o=e("../../plots/cartesian/axes");t.exports=function(e){for(var t=e.fullSceneLayout.annotations,n=0;n<t.length;n++)!function(e,t){var n=t.fullSceneLayout.domain,r=t.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},i.extendFlat(e._xa,t),o.setConvert(e._xa),e._xa._offset=r.l+n.x[0]*r.w,e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*r.w*(n.x[1]-n.x[0])},e._ya={},i.extendFlat(e._ya,t),o.setConvert(e._ya),e._ya._offset=r.t+(1-n.y[1])*r.h,e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*r.h*(n.y[1]-n.y[0])}}(t[n],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()}},{"../../lib":779,"../../plots/cartesian/axes":828}],633:[function(e,t,n){"use strict";var a=e("../../lib"),s=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),l=e("../annotations/common_defaults"),u=e("./attributes");function i(n,r,i,e){function o(e,t){return a.coerce(n,r,u,e,t)}function t(e){var t=e+"axis",n={_fullLayout:{}};return n._fullLayout[t]=i[t],s.coercePosition(r,n,o,e,e,.5)}o("visible")&&(l(n,r,e.fullLayout,o),t("x"),t("y"),t("z"),a.noneOrAll(n,r,["x","y","z"]),r.xref="x",r.yref="y",r.zref="z",o("xanchor"),o("yanchor"),o("xshift"),o("yshift"),r.showarrow&&(r.axref="pixel",r.ayref="pixel",o("ax",-10),o("ay",-30),a.noneOrAll(n,r,["ax","ay"])))}t.exports=function(e,t,n){r(e,t,{name:"annotations",handleItemDefaults:i,fullLayout:n.fullLayout})}},{"../../lib":779,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"../annotations/common_defaults":640,"./attributes":631}],634:[function(e,t,n){"use strict";var c=e("../annotations/draw").drawRaw,f=e("../../plots/gl3d/project"),d=["x","y","z"];t.exports=function(e){for(var t=e.fullSceneLayout,n=e.dataScale,r=t.annotations,i=0;i<r.length;i++){for(var o=r[i],a=!1,s=0;s<3;s++){var l=d[s],u=o[l],u=t[l+"axis"].r2fraction(u);if(u<0||1<u){a=!0;break}}a?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+i+'"]').remove():(o._pdata=f(e.glplot.cameraParams,[t.xaxis.r2l(o.x)*n[0],t.yaxis.r2l(o.y)*n[1],t.zaxis.r2l(o.z)*n[2]]),c(e.graphDiv,o,i,e.id,o._xa,o._ya))}}},{"../../plots/gl3d/project":871,"../annotations/draw":643}],635:[function(e,t,n){"use strict";var s=e("../../registry"),l=e("../../lib");t.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:function(e,t){var n=s.subplotsRegistry.gl3d;if(n)for(var r=n.attrRegex,i=Object.keys(e),o=0;o<i.length;o++){var a=i[o];r.test(a)&&(e[a].annotations||[]).length&&(l.pushUnique(t._basePlotModules,n),l.pushUnique(t._subplots.gl3d,a))}},convert:e("./convert"),draw:e("./draw")}},{"../../lib":779,"../../registry":879,"./attributes":631,"./convert":632,"./defaults":633,"./draw":634}],636:[function(e,t,n){"use strict";t.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],637:[function(e,t,n){"use strict";var r=e("./arrow_paths"),i=e("../../plots/font_attributes"),o=e("../../plots/cartesian/constants"),a=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects");t.exports=a("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:i({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",o.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",o.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:i({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":753,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":835,"../../plots/font_attributes":859,"./arrow_paths":636}],638:[function(e,t,n){"use strict";var r=e("../../lib"),p=e("../../plots/cartesian/axes"),i=e("./draw").draw;function o(o){var e=o._fullLayout;r.filterVisible(e.annotations).forEach(function(e){var t=p.getFromId(o,e.xref),n=p.getFromId(o,e.yref),r=p.getRefType(e.xref),i=p.getRefType(e.yref);e._extremes={},"range"===r&&a(e,t),"range"===i&&a(e,n)})}function a(e,t){var n=t._id,r=n.charAt(0),i=e[r],o=e["a"+r],a=e[r+"ref"],s=e["a"+r+"ref"],l=e["_"+r+"padplus"],u=e["_"+r+"padminus"],c={x:1,y:-1}[r]*e[r+"shift"],f=3*e.arrowsize*e.arrowwidth||0,d=f+c,h=f-c,r=3*e.startarrowsize*e.arrowwidth||0,f=r+c,c=r-c;c=s===a?(s=p.findExtremes(t,[t.r2c(i)],{ppadplus:d,ppadminus:h}),a=p.findExtremes(t,[t.r2c(o)],{ppadplus:Math.max(l,f),ppadminus:Math.max(u,c)}),{min:[s.min[0],a.min[0]],max:[s.max[0],a.max[0]]}):(f=o?f+o:f,c=o?c-o:c,p.findExtremes(t,[t.r2c(i)],{ppadplus:Math.max(l,d,f),ppadminus:Math.max(u,h,c)})),e._extremes[n]=c}t.exports=function(e){var t=e._fullLayout;if(r.filterVisible(t.annotations).length&&e._fullData.length)return r.syncOrAsync([i,o],e)}},{"../../lib":779,"../../plots/cartesian/axes":828,"./draw":643}],639:[function(e,t,n){"use strict";var l=e("../../lib"),u=e("../../registry"),c=e("../../plot_api/plot_template").arrayEditor;function f(e,t){for(var n,r,i,o,a,s,l=e._fullLayout.annotations,u=[],c=[],f=[],d=(t||[]).length,h=0;h<l.length;h++)if(i=(r=l[h]).clicktoshow){for(n=0;n<d;n++)if(a=(o=t[n]).xaxis,s=o.yaxis,a._id===r.xref&&s._id===r.yref&&a.d2r(o.x)===p(r._xclick,a)&&s.d2r(o.y)===p(r._yclick,s)){(r.visible?"onout"===i?c:f:u).push(h);break}n===d&&r.visible&&"onout"===i&&c.push(h)}return{on:u,off:c,explicitOff:f}}function p(e,t){return"log"===t.type?t.l2r(e):t.d2r(e)}t.exports={hasClickToShow:function(e,t){t=f(e,t);return 0<t.on.length||0<t.explicitOff.length},onClick:function(e,t){var n,r,t=f(e,t),i=t.on,o=t.off.concat(t.explicitOff),a={},s=e._fullLayout.annotations;if(i.length||o.length){for(n=0;n<i.length;n++)(r=c(e.layout,"annotations",s[i[n]])).modifyItem("visible",!0),l.extendFlat(a,r.getUpdateObj());for(n=0;n<o.length;n++)(r=c(e.layout,"annotations",s[o[n]])).modifyItem("visible",!1),l.extendFlat(a,r.getUpdateObj());return u.call("update",e,{},a)}}}},{"../../lib":779,"../../plot_api/plot_template":817,"../../registry":879}],640:[function(e,t,n){"use strict";var c=e("../../lib"),f=e("../color");t.exports=function(e,t,n,r){r("opacity");var i=r("bgcolor"),o=r("bordercolor"),a=f.opacity(o);r("borderpad");var s,l,u=r("borderwidth"),o=r("showarrow");r("text",o?" ":n._dfltTitle.annotation),r("textangle"),c.coerceFont(r,"font",n.font),r("width"),r("align"),r("height")&&r("valign"),o&&(-1!==(o=r("arrowside")).indexOf("end")&&(s=r("arrowhead"),l=r("arrowsize")),-1!==o.indexOf("start")&&(r("startarrowhead",s),r("startarrowsize",l)),r("arrowcolor",a?t.bordercolor:f.defaultLine),r("arrowwidth",2*(a&&u||1)),r("standoff"),r("startstandoff"));u=r("hovertext"),n=n.hoverlabel||{};u&&(i=r("hoverlabel.bgcolor",n.bgcolor||(f.opacity(i)?f.rgb(i):f.defaultLine)),i=r("hoverlabel.bordercolor",n.bordercolor||f.contrast(i)),c.coerceFont(r,"hoverlabel.font",{family:n.font.family,size:n.font.size,color:n.font.color||i})),r("captureevents",!!u)}},{"../../lib":779,"../color":647}],641:[function(e,t,n){"use strict";var f=e("fast-isnumeric"),d=e("../../lib/to_log_range");t.exports=function(e,r,t,i){r=r||{};var o="log"===t&&"linear"===r.type,t="linear"===t&&"log"===r.type;if(o||t)for(var a,s,n=e._fullLayout.annotations,l=r._id.charAt(0),u=0;u<n.length;u++)a=n[u],s="annotations["+u+"].",a[l+"ref"]===r._id&&c(l),a["a"+l+"ref"]===r._id&&c("a"+l);function c(e){var t=a[e],n=null,n=o?d(t,r.range):Math.pow(10,t);f(n)||(n=null),i(s+e,n)}}},{"../../lib/to_log_range":806,"fast-isnumeric":574}],642:[function(e,t,n){"use strict";var y=e("../../lib"),g=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),v=e("./common_defaults"),m=e("./attributes");function i(n,r,e){function t(e,t){return y.coerce(n,r,m,e,t)}var i=t("visible"),o=t("clicktoshow");if(i||o){v(n,r,e,t);for(var a=r.showarrow,s=["x","y"],l=[-10,-30],u={_fullLayout:e},c=0;c<2;c++){var f,d,h=s[c],p=g.coerceRef(n,r,u,h,"","paper");"paper"!==p&&g.getFromId(u,p)._annIndices.push(r._index),g.coercePosition(r,u,t,p,h,.5),a&&("pixel"!==(d=g.coerceRef(n,r,u,f="a"+h,"pixel",["pixel","paper"]))&&d!==p&&(d=r[f]="pixel"),g.coercePosition(r,u,t,d,f,"pixel"===d?l[c]:.4)),t(h+"anchor"),t(h+"shift")}y.noneOrAll(n,r,["x","y"]),a&&y.noneOrAll(n,r,["ax","ay"]),o&&(e=t("xclick"),o=t("yclick"),r._xclick=void 0===e?r.x:g.cleanPosition(e,u,r.xref),r._yclick=void 0===o?r.y:g.cleanPosition(o,u,r.yref))}}t.exports=function(e,t){r(e,t,{name:"annotations",handleItemDefaults:i})}},{"../../lib":779,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"./attributes":637,"./common_defaults":640}],643:[function(e,t,n){"use strict";var a=e("@plotly/d3"),ie=e("../../registry"),r=e("../../plots/plots"),oe=e("../../lib"),ae=oe.strTranslate,se=e("../../plots/cartesian/axes"),le=e("../color"),ue=e("../drawing"),s=e("../fx"),ce=e("../../lib/svg_text_utils"),fe=e("../../lib/setcursor"),de=e("../dragelement"),l=e("../../plot_api/plot_template").arrayEditor,he=e("./draw_arrow_head");function i(e,t){var n=e._fullLayout.annotations[t]||{},r=se.getFromId(e,n.xref),i=se.getFromId(e,n.yref);r&&r.setScale(),i&&i.setScale(),o(e,n,t,!1,r,i)}function pe(e,t,n,r,i){var o=i[n],i=i[n+"ref"],n=-1!==n.indexOf("y"),i="domain"===se.getRefType(i),r=n?r.h:r.w;return e?i?o+(n?-t:t)/e._length:e.p2r(e.r2p(o)+t):o+(n?-t:t)/r}function o(L,R,t,I,z,D){var N=L._fullLayout,F=L._fullLayout._size,B=L._context.edits,e=I?(r="annotation-"+I,I+".annotations"):(r="annotation","annotations"),e=l(L.layout,e,R),U=e.modifyBase,q=e.modifyItem,H=e.getUpdateObj;N._infolayer.selectAll("."+r+'[data-index="'+t+'"]').remove();var V,G,W,Y,X,Z,$,K,Q,J,ee,n,r,te,ne="clip"+N._uid+"_ann"+t;function re(e){e={index:t,annotation:R._input,fullAnnotation:R,event:e};return I&&(e.subplotId=I),e}function i(e){return e.call(ue.font,n).attr({"text-anchor":{left:"start",right:"end"}[R.align]||"middle"}),ce.convertToTspans(e,L,o),e}function o(){var e=te.selectAll("a");1===e.size()&&e.text()===te.text()&&Z.insert("a",":first-child").attr({"xlink:xlink:href":e.attr("xlink:href"),"xlink:xlink:show":e.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(Q.node());var t=Z.select(".annotation-text-math-group"),n=!t.empty(),r=ue.bBox((n?t:te).node()),i=r.width,o=r.height,a=R.width||i,s=R.height||o,l=Math.round(a+2*K),u=Math.round(s+2*K);function c(e,t){return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t="auto"===t?e<1/3?"left":2/3<e?"right":"center":t]}for(var f,d,h,p=!1,y=["x","y"],g=0;g<y.length;g++){var v,m,b,x,_,w=y[g],M=R[w+"ref"]||w,j=R["a"+w+"ref"],k={x:z,y:D}[w],O=(G+("x"===w?0:-90))*Math.PI/180,A=l*Math.cos(O),T=u*Math.sin(O),P=Math.abs(A)+Math.abs(T),S=R[w+"anchor"],E=R[w+"shift"]*("x"===w?1:-1),C=V[w],O=se.getRefType(M);O=k&&"domain"!==O?(((m=k.r2fraction(R[w]))<0||1<m)&&(j!==M||(m=k.r2fraction(R["a"+w]))<0||1<m)&&(p=!0),m=k._offset+k.r2p(R[w]),.5):(_="domain"===O,m="x"===w?(v=R[w],_?k._offset+k._length*v:F.l+F.w*v):(v=1-R[w],_?k._offset+k._length*v:F.t+F.h*v),R.showarrow?.5:v),R.showarrow?(C.head=m,_=R["a"+w],b=A*c(.5,R.xanchor)-T*c(.5,R.yanchor),x=j===M?(x=se.getRefType(j),C.tail="domain"===x?k._offset+k._length*(_="y"===w?1-_:_):"paper"===x?"y"===w?F.t+F.h*(_=1-_):F.l+F.w*_:k._offset+k.r2p(_),b):(C.tail=m+_,b+_),C.text=C.tail+b,_=N["x"===w?"width":"height"],"paper"===M&&(C.head=oe.constrain(C.head,1,_-1)),"pixel"===j&&(j=-Math.max(C.tail-3,C.text),_=Math.min(C.tail+3,C.text)-_,0<j?(C.tail+=j,C.text+=j):0<_&&(C.tail-=_,C.text-=_)),C.tail+=E,C.head+=E):(x=b=P*c(O,S),C.text=m+b),C.text+=E,b+=E,x+=E,R["_"+w+"padplus"]=P/2+x,R["_"+w+"padminus"]=P/2-x,R["_"+w+"size"]=P,R["_"+w+"shift"]=b}p?Z.remove():(e=f=0,"left"!==R.align&&(f=(a-i)*("center"===R.align?.5:1)),"top"!==R.valign&&(e=(s-o)*("middle"===R.valign?.5:1)),n?t.select("svg").attr({x:K+f-1,y:K+e}).call(ue.setClipUrl,J?ne:null,L):(e=K+e-r.top,r=K+f-r.left,te.call(ce.positionText,r,e).call(ue.setClipUrl,J?ne:null,L)),ee.select("rect").call(ue.setRect,K,K,a,s),Q.call(ue.setRect,$/2,$/2,l-$,u-$),Z.call(ue.setTranslate,Math.round(V.x.text-l/2),Math.round(V.y.text-u/2)),Y.attr({transform:"rotate("+G+","+V.x.text+","+V.y.text+")"}),d=function(e,t){W.selectAll(".annotation-arrow-g").remove();var i,o,a,n=V.x.head,r=V.y.head,s=V.x.tail+e,l=V.y.tail+t,u=V.x.text+e,c=V.y.text+t,f=oe.rotationXYMatrix(G,u,c),d=oe.apply2DTransform(f),e=oe.apply2DTransform2(f),t=+Q.attr("width"),f=+Q.attr("height"),u=u-.5*t,t=u+t,c=c-.5*f,f=c+f,t=[[u,c,u,f],[u,f,t,f],[t,f,t,c],[t,c,u,c]].map(e);t.reduce(function(e,t){return e^!!oe.segmentsIntersect(n,r,n+1e6,r+1e6,t[0],t[1],t[2],t[3])},!1)||(t.forEach(function(e){e=oe.segmentsIntersect(s,l,n,r,e[0],e[1],e[2],e[3]);e&&(s=e.x,l=e.y)}),u=R.arrowwidth,c=R.arrowcolor,e=R.arrowside,t=(i=W.append("g").style({opacity:le.opacity(c)}).classed("annotation-arrow-g",!0)).append("path").attr("d","M"+s+","+l+"L"+n+","+r).style("stroke-width",u+"px").call(le.stroke,le.rgb(c)),he(t,e,R),B.annotationPosition&&t.node().parentNode&&!I&&(c=n,e=r,R.standoff&&(t=Math.sqrt(Math.pow(n-s,2)+Math.pow(r-l,2)),c+=R.standoff*(s-n)/t,e+=R.standoff*(l-r)/t),u=i.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(s-c)+","+(l-e),transform:ae(c,e)}).style("stroke-width",u+6+"px").call(le.stroke,"rgba(0,0,0,0)").call(le.fill,"rgba(0,0,0,0)"),de.init({element:u.node(),gd:L,prepFn:function(){var e=ue.getTranslate(Z);o=e.x,a=e.y,z&&z.autorange&&U(z._name+".autorange",!0),D&&D.autorange&&U(D._name+".autorange",!0)},moveFn:function(e,t){var n=d(o,a),r=n[0]+e,n=n[1]+t;Z.call(ue.setTranslate,r,n),q("x",pe(z,e,"x",F,R)),q("y",pe(D,t,"y",F,R)),R.axref===R.xref&&q("ax",pe(z,e,"ax",F,R)),R.ayref===R.yref&&q("ay",pe(D,t,"ay",F,R)),i.attr("transform",ae(e,t)),Y.attr({transform:"rotate("+G+","+r+","+n+")"})},doneFn:function(){ie.call("_guiRelayout",L,H());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})))},R.showarrow&&d(0,0),X&&de.init({element:Z.node(),gd:L,prepFn:function(){h=Y.attr("transform")},moveFn:function(e,t){var n,r,i,o="pointer";if(R.showarrow)R.axref===R.xref?q("ax",pe(z,e,"ax",F,R)):q("ax",R.ax+e),R.ayref===R.yref?q("ay",pe(D,t,"ay",F.w,R)):q("ay",R.ay+t),d(e,t);else{if(I)return;n=z?pe(z,e,"x",F,R):(r=R._xsize/F.w,n=R.x+(R._xshift-R.xshift)/F.w-r/2,de.align(n+e/F.w,r,0,1,R.xanchor)),i=D?pe(D,t,"y",F,R):(i=R._ysize/F.h,r=R.y-(R._yshift+R.yshift)/F.h-i/2,de.align(r-t/F.h,i,0,1,R.yanchor)),q("x",n),q("y",i),z&&D||(o=de.getCursor(z?.5:n,D?.5:i,R.xanchor,R.yanchor))}Y.attr({transform:ae(e,t)+h}),fe(Z,o)},clickFn:function(e,t){R.captureevents&&L.emit("plotly_clickannotation",re(t))},doneFn:function(){fe(Z),ie.call("_guiRelayout",L,H());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}}))}R._input&&!1!==R.visible?(V={x:{},y:{}},G=+R.textangle||0,W=N._infolayer.append("g").classed(r,!0).attr("data-index",String(t)).style("opacity",R.opacity),Y=W.append("g").classed("annotation-text-g",!0),X=B[R.showarrow?"annotationTail":"annotationPosition"],r=R.captureevents||B.annotationText||X,Z=Y.append("g").style("pointer-events",r?"all":null).call(fe,"pointer").on("click",function(){L._dragging=!1,L.emit("plotly_clickannotation",re(a.event))}),R.hovertext&&Z.on("mouseover",function(){var e=R.hoverlabel,t=e.font,n=this.getBoundingClientRect(),r=L.getBoundingClientRect();s.loneHover({x0:n.left-r.left,x1:n.right-r.left,y:(n.top+n.bottom)/2-r.top,text:R.hovertext,color:e.bgcolor,borderColor:e.bordercolor,fontFamily:t.family,fontSize:t.size,fontColor:t.color},{container:N._hoverlayer.node(),outerContainer:N._paper.node(),gd:L})}).on("mouseout",function(){s.loneUnhover(N._hoverlayer.node())}),$=R.borderwidth,r=R.borderpad,K=$+r,Q=Z.append("rect").attr("class","bg").style("stroke-width",$+"px").call(le.stroke,R.bordercolor).call(le.fill,R.bgcolor),J=R.width||R.height,(ee=N._topclips.selectAll("#"+ne).data(J?[0]:[])).enter().append("clipPath").classed("annclip",!0).attr("id",ne).append("rect"),ee.exit().remove(),n=R.font,r=N._meta?oe.templateString(R.text,N._meta):R.text,te=Z.append("text").classed("annotation-text",!0).text(r),B.annotationText?te.call(ce.makeEditable,{delegate:Z,gd:L}).call(i).on("edit",function(e){R.text=e,this.call(i),q("text",e),z&&z.autorange&&U(z._name+".autorange",!0),D&&D.autorange&&U(D._name+".autorange",!0),ie.call("_guiRelayout",L,H())}):te.call(i)):a.selectAll("#"+ne).remove()}t.exports={draw:function(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var n=0;n<t.annotations.length;n++)t.annotations[n].visible&&i(e,n);return r.previousPromises(e)},drawOne:i,drawRaw:o}},{"../../lib":779,"../../lib/setcursor":799,"../../lib/svg_text_utils":804,"../../plot_api/plot_template":817,"../../plots/cartesian/axes":828,"../../plots/plots":876,"../../registry":879,"../color":647,"../dragelement":666,"../drawing":669,"../fx":687,"./draw_arrow_head":644,"@plotly/d3":3}],644:[function(e,t,n){"use strict";var M=e("@plotly/d3"),j=e("../color"),k=e("./arrow_paths"),e=e("../../lib"),O=e.strScale,A=e.strRotate,T=e.strTranslate;t.exports=function(i,e,o){var a=i.node(),t=k[o.arrowhead||0],n=k[o.startarrowhead||0],r=(o.arrowwidth||1)*(o.arrowsize||1),s=(o.arrowwidth||1)*(o.startarrowsize||1),l=0<=e.indexOf("start"),u=0<=e.indexOf("end"),c=t.backoff*r+o.standoff,f=n.backoff*s+o.startstandoff;if("line"===a.nodeName){var d,h={x:+i.attr("x1"),y:+i.attr("y1")},p={x:+i.attr("x2"),y:+i.attr("y2")},y=h.x-p.x,g=h.y-p.y,v=(d=Math.atan2(g,y))+Math.PI;if(c&&f&&c+f>Math.sqrt(y*y+g*g))return void _();if(c){if(y*y+g*g<c*c)return void _();var m=c*Math.cos(d),e=c*Math.sin(d);p.x+=m,p.y+=e,i.attr({x2:p.x,y2:p.y})}if(f){if(y*y+g*g<f*f)return void _();var b=f*Math.cos(d),x=f*Math.sin(d);h.x-=b,h.y-=x,i.attr({x1:h.x,y1:h.y})}}else if("path"===a.nodeName){y=a.getTotalLength();if(y<c+f)return void _();g=a.getPointAtLength(0),b=a.getPointAtLength(.1);d=Math.atan2(g.y-b.y,g.x-b.x),h=a.getPointAtLength(Math.min(f,y));x="0px,"+f+"px,",g=a.getPointAtLength(y),b=a.getPointAtLength(y-.1);v=Math.atan2(g.y-b.y,g.x-b.x),p=a.getPointAtLength(Math.max(0,y-c)),i.style("stroke-dasharray",x+=y-(x?f+c:c)+"px,"+y+"px")}function _(){i.style("stroke-dasharray","0px,100px")}function w(e,t,n,r){e.path&&(e.noRotate&&(n=0),M.select(a.parentNode).append("path").attr({class:i.attr("class"),d:e.path,transform:T(t.x,t.y)+A(180*n/Math.PI)+O(r)}).style({fill:j.rgb(o.arrowcolor),"stroke-width":0}))}l&&w(n,h,d,s),u&&w(t,p,v,r)}},{"../../lib":779,"../color":647,"./arrow_paths":636,"@plotly/d3":3}],645:[function(e,t,n){"use strict";var r=e("./draw"),i=e("./click");t.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne,drawRaw:r.drawRaw,hasClickToShow:i.hasClickToShow,onClick:i.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":841,"./attributes":637,"./calc_autorange":638,"./click":639,"./convert_coords":641,"./defaults":642,"./draw":643}],646:[function(e,t,n){"use strict";n.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n.defaultLine="#444",n.lightLine="#eee",n.background="#fff",n.borderLine="#BEC8D9",n.lightFraction=1e3/11},{}],647:[function(e,t,n){"use strict";var i=e("tinycolor2"),o=e("fast-isnumeric"),a=e("../../lib/array").isTypedArray,s=t.exports={},e=e("./attributes");s.defaults=e.defaults;var l=s.defaultLine=e.defaultLine;s.lightLine=e.lightLine;var u=s.background=e.background;function c(e){if(o(e)||"string"!=typeof e)return e;var t=e.trim();if("rgb"!==t.substr(0,3))return e;var n=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return e;var r=n[1].trim().split(/\s*[\s,]\s*/),n="a"===t.charAt(3)&&4===r.length;if(!n&&3!==r.length)return e;for(var i=0;i<r.length;i++){if(!r[i].length)return e;if(r[i]=Number(r[i]),!(0<=r[i]))return e;if(3===i)1<r[i]&&(r[i]=1);else if(1<=r[i])return e}t=Math.round(255*r[0])+", "+Math.round(255*r[1])+", "+Math.round(255*r[2]);return n?"rgba("+t+", "+r[3]+")":"rgb("+t+")"}s.tinyRGB=function(e){e=e.toRgb();return"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+")"},s.rgb=function(e){return s.tinyRGB(i(e))},s.opacity=function(e){return e?i(e).getAlpha():0},s.addOpacity=function(e,t){e=i(e).toRgb();return"rgba("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+", "+t+")"},s.combine=function(e,t){var n=i(e).toRgb();if(1===n.a)return i(e).toRgbString();t=i(t||u).toRgb(),t=1===t.a?t:{r:255*(1-t.a)+t.r*t.a,g:255*(1-t.a)+t.g*t.a,b:255*(1-t.a)+t.b*t.a},n={r:t.r*(1-n.a)+n.r*n.a,g:t.g*(1-n.a)+n.g*n.a,b:t.b*(1-n.a)+n.b*n.a};return i(n).toRgbString()},s.contrast=function(e,t,n){var r=i(e);return((r=1!==r.getAlpha()?i(s.combine(e,u)):r).isDark()?t?r.lighten(t):u:n?r.darken(n):l).toString()},s.stroke=function(e,t){t=i(t);e.style({stroke:s.tinyRGB(t),"stroke-opacity":t.getAlpha()})},s.fill=function(e,t){t=i(t);e.style({fill:s.tinyRGB(t),"fill-opacity":t.getAlpha()})},s.clean=function(e){if(e&&"object"==typeof e)for(var t,n,r=Object.keys(e),i=0;i<r.length;i++)if(n=e[o=r[i]],"color"===o.substr(o.length-5))if(Array.isArray(n))for(t=0;t<n.length;t++)n[t]=c(n[t]);else e[o]=c(n);else if("colorscale"===o.substr(o.length-10)&&Array.isArray(n))for(t=0;t<n.length;t++)Array.isArray(n[t])&&(n[t][1]=c(n[t][1]));else if(Array.isArray(n)){var o=n[0];if(!Array.isArray(o)&&o&&"object"==typeof o)for(t=0;t<n.length;t++)s.clean(n[t])}else n&&"object"==typeof n&&!a(n)&&s.clean(n)}},{"../../lib/array":764,"./attributes":646,"fast-isnumeric":574,tinycolor2:980}],648:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/layout_attributes"),i=e("../../plots/font_attributes"),o=e("../../lib/extend").extendFlat,e=e("../../plot_api/edit_types").overrideAll;t.exports=e({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:r.linecolor,outlinewidth:r.linewidth,bordercolor:r.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:o({},r.ticks,{dflt:""}),ticklabeloverflow:o({},r.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:i({}),tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,minexponent:r.minexponent,showexponent:r.showexponent,title:{text:{valType:"string"},font:i({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:i({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":772,"../../plot_api/edit_types":810,"../../plots/cartesian/layout_attributes":843,"../../plots/font_attributes":859}],649:[function(e,t,n){"use strict";t.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],650:[function(e,t,n){"use strict";var l=e("../../lib"),u=e("../../plot_api/plot_template"),c=e("../../plots/cartesian/tick_value_defaults"),f=e("../../plots/cartesian/tick_mark_defaults"),d=e("../../plots/cartesian/tick_label_defaults"),h=e("../../plots/cartesian/prefix_suffix_defaults"),p=e("./attributes");t.exports=function(e,t,n){var r=u.newContainer(t,"colorbar"),i=e.colorbar||{};function o(e,t){return l.coerce(i,r,p,e,t)}var a=n.margin||{t:0,b:0,l:0,r:0},s=n.width-a.l-a.r,t=n.height-a.t-a.b,e="v"===o("orientation"),a=o("thicknessmode");o("thickness","fraction"===a?30/(e?s:t):30);a=o("lenmode");o("len","fraction"===a?1:e?t:s),o("x",e?1.02:.5),o("xanchor",e?"left":"center"),o("xpad"),o("y",e?.5:1.02),o("yanchor",e?"middle":"bottom"),o("ypad"),l.noneOrAll(i,r,["x","y"]),o("outlinecolor"),o("outlinewidth"),o("bordercolor"),o("borderwidth"),o("bgcolor");a=l.coerce(i,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:e?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");o("ticklabeloverflow",-1!==a.indexOf("inside")?"hide past domain":"hide past div"),c(i,r,o,"linear");t=n.font,s={outerTicks:!1,font:t};-1!==a.indexOf("inside")&&(s.bgColor="black"),h(i,r,o,"linear",s),d(i,r,o,"linear",s),f(i,r,o,"linear",s),o("title.text",n._dfltTitle.colorbar);n=r.tickfont,n=l.extendFlat({},n,{color:t.color,size:l.bigFont(n.size)});l.coerceFont(o,"title.font",n),o("title.side",e?"top":"right")}},{"../../lib":779,"../../plot_api/plot_template":817,"../../plots/cartesian/prefix_suffix_defaults":847,"../../plots/cartesian/tick_label_defaults":852,"../../plots/cartesian/tick_mark_defaults":853,"../../plots/cartesian/tick_value_defaults":854,"./attributes":648}],651:[function(e,t,n){"use strict";var $=e("@plotly/d3"),K=e("tinycolor2"),Q=e("../../plots/plots"),d=e("../../registry"),J=e("../../plots/cartesian/axes"),h=e("../dragelement"),ee=e("../../lib"),te=ee.strTranslate,ne=e("../../lib/extend").extendFlat,p=e("../../lib/setcursor"),re=e("../drawing"),ie=e("../color"),oe=e("../titles"),ae=e("../../lib/svg_text_utils"),m=e("../colorscale/helpers").flipScale,se=e("../../plots/cartesian/axis_defaults"),le=e("../../plots/cartesian/position_defaults"),ue=e("../../plots/cartesian/layout_attributes"),r=e("../../constants/alignment"),ce=r.LINE_SPACING,fe=r.FROM_TL,de=r.FROM_BR,he=e("./constants").cn;t.exports={draw:function(f){var e=f._fullLayout._infolayer.selectAll("g."+he.colorbar).data(function(e){var t,n,r,i,o=e._fullLayout,a=e.calcdata,s=[];function l(e){return ne(e,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function u(){"function"==typeof i.calc?i.calc(e,r,t):(t._fillgradient=n.reversescale?m(n.colorscale):n.colorscale,t._zrange=[n[i.min],n[i.max]])}for(var c,f=0;f<a.length;f++){var d=a[f],d=(r=d[0].trace)._module.colorbar;if(!0===r.visible&&d)for(var h=Array.isArray(d),p=h?d:[d],y=0;y<p.length;y++){var g=(i=p[y]).container;(n=g?r[g]:r)&&n.showscale&&((t=l(n.colorbar))._id="cb"+r.uid+(h&&g?"-"+g:""),t._traceIndex=r.index,t._propPrefix=(g?g+".":"")+"colorbar.",t._meta=r._meta,u(),s.push(t))}}for(c in o._colorAxes){var v;(n=o[c]).showscale&&(v=o._colorAxes[c],(t=l(n.colorbar))._id="cb"+c,t._propPrefix=c+".colorbar.",t._meta=o._meta,i={min:"cmin",max:"cmax"},"heatmap"!==v[0]&&(r=v[1],i.calc=r._module.colorbar.calc),u(),s.push(t))}return s}(f),function(e){return e._id});e.enter().append("g").attr("class",function(e){return e._id}).classed(he.colorbar,!0),e.each(function(e){var t=$.select(this);ee.ensureSingle(t,"rect",he.cbbg),ee.ensureSingle(t,"g",he.cbfills),ee.ensureSingle(t,"g",he.cblines),ee.ensureSingle(t,"g",he.cbaxis,function(e){e.classed(he.crisp,!0)}),ee.ensureSingle(t,"g",he.cbtitleunshift,function(e){e.append("g").classed(he.cbtitle,!0)}),ee.ensureSingle(t,"rect",he.cboutline);var n,r,i,o,a,s,l,u,c=function(h,p,y){var g="v"===p.orientation,v=p.len,m=p.lenmode,b=p.thickness,x=p.thicknessmode,_=p.outlinewidth,w=p.borderwidth,M=p.bgcolor,j=p.xanchor,k=p.yanchor,O=p.xpad,A=p.ypad,T=p.x,P=g?p.y:1-p.y,S=y._fullLayout,E=S._size,e=p._fillcolor,s=p._line,C=p.title,L=C.side,l=p._zrange||$.extent(("function"==typeof e?e:s.color).domain()),u="function"==typeof s.color?s.color:function(){return s.color},c="function"==typeof e?e:function(){return e},t=p._levels,n=function(e,t){var n,r,i=e._levels,o=[],a=[],s=i.end+i.size/100,l=i.size,u=1.001*t[0]-.001*t[1],c=1.001*t[1]-.001*t[0];for(r=0;r<1e5&&(n=i.start+r*l,!(0<l?s<=n:n<=s));r++)u<n&&n<c&&o.push(n);if(e._fillgradient)a=[0];else if("function"==typeof e._fillcolor){var f=e._filllevels;if(f)for(s=f.end+f.size/100,l=f.size,r=0;r<1e5&&(n=f.start+r*l,!(0<l?s<=n:n<=s));r++)n>t[0]&&n<t[1]&&a.push(n);else(a=o.map(function(e){return e-i.size/2})).push(a[a.length-1]+i.size)}else e._fillcolor&&"string"==typeof e._fillcolor&&(a=[0]);i.size<0&&(o.reverse(),a.reverse());return{line:o,fill:a}}(p,l),f=n.fill,d=n.line,R=Math.round(b*("fraction"===x?g?E.w:E.h:1)),r=R/(g?E.w:E.h),I=Math.round(v*("fraction"===m?g?E.h:E.w:1)),i=I/(g?E.h:E.w),z=Math.round(g?T*E.w+O:P*E.h+A),D={center:.5,right:1}[j]||0,N={top:1,middle:.5}[k]||0,o=g?T-D*r:P-N*r,a=g?P-N*i:T-D*i,F=Math.round(g?E.h*(1-a):E.w*a);p._lenFrac=i,p._thickFrac=r,p._uFrac=o,p._vFrac=a;var B=p._axis=function(e,t,n){var r=e._fullLayout,e="v"===t.orientation,i={type:"linear",range:n,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:!0,anchor:"free",side:e?"right":"bottom",position:1},e=e?"y":"x",o={type:"linear",_id:e+t._id},e={letter:e,font:r.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:r.calendar};function a(e,t){return ee.coerce(i,o,ue,e,t)}return se(i,o,a,e,r),le(i,o,a,e),o}(y,p,l);B.position=r+(g?T+O/E.w:P+A/E.h);var U=-1!==["top","bottom"].indexOf(L);g&&U&&(B.title.side=L,B.titlex=T+O/E.w,B.titley=a+("top"===C.side?i-A/E.h:A/E.h));g||U||(B.title.side=L,B.titley=P+A/E.h,B.titlex=a+O/E.w);s.color&&"auto"===p.tickmode&&(B.tickmode="linear",B.tick0=t.start,n=t.size,o=ee.constrain(I/50,4,15)+1,1<(r=(l[1]-l[0])/((p.nticks||o)*n))&&(o=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),n*=o*ee.roundUp(r/o,[2,5,10]),(Math.abs(t.start)/t.size+1e-6)%1<2e-6&&(B.tick0=0)),B.dtick=n);B.domain=g?[a+A/E.h,a+i-A/E.h]:[a+O/E.w,a+i-O/E.w],B.setScale(),h.attr("transform",te(Math.round(E.l),Math.round(E.t)));var q,H=h.select("."+he.cbtitleunshift).attr("transform",te(-Math.round(E.l),-Math.round(E.t))),V=B.ticklabelposition,G=B.title.font.size,W=h.select("."+he.cbaxis),Y=0,X=0;function Z(e,t){var n={propContainer:B,propName:p._propPrefix+"title",traceIndex:p._traceIndex,_meta:p._meta,placeholder:S._dfltTitle.colorbar,containerGroup:h.select("."+he.cbtitle)},r="h"===e.charAt(0)?e.substr(1):"h"+e;h.selectAll("."+r+",."+r+"-math-group").remove(),oe.draw(y,e,ne(n,t||{}))}return ee.syncOrAsync([Q.previousPromises,function(){var e,t;(g&&U||!g&&!U)&&("top"===L&&(e=O+E.l+E.w*T,t=A+E.t+E.h*(1-a-i)+3+.75*G),"bottom"===L&&(e=O+E.l+E.w*T,t=A+E.t+E.h*(1-a)-3-.25*G),"right"===L&&(t=A+E.t+E.h*P+3+.75*G,e=O+E.l+E.w*a),Z(B._id+"title",{attributes:{x:e,y:t,"text-anchor":g?"start":"middle"}}))},function(){var e,t,n;(!g&&!U||g&&U)&&(n=(a=h.select("."+he.cbtitle)).select("text"),i=[-_/2,_/2],e=a.select(".h"+B._id+"title-math-group").node(),o=15.6,n.node()&&(o=parseInt(n.node().style.fontSize,10)*ce),e?(t=re.bBox(e),X=t.width,o<(Y=t.height)&&(i[1]-=(Y-o)/2)):n.node()&&!n.classed(he.jsPlaceholder)&&(t=re.bBox(n.node()),X=t.width,Y=t.height),g?Y&&(Y+=5,"top"===L?(B.domain[1]-=Y/E.h,i[1]*=-1):(B.domain[0]+=Y/E.h,n=ae.lineCount(n),i[1]+=(1-n)*o),a.attr("transform",te(i[0],i[1])),B.setScale()):X&&("right"===L&&(B.domain[0]+=(X+G/2)/E.w),a.attr("transform",te(i[0],i[1])),B.setScale())),h.selectAll("."+he.cbfills+",."+he.cblines).attr("transform",g?te(0,Math.round(E.h*(1-B.domain[1]))):te(Math.round(E.w*B.domain[0]),0)),W.attr("transform",g?te(0,Math.round(-E.t)):te(Math.round(-E.l),0)),(o=h.select("."+he.cbfills).selectAll("rect."+he.cbfill).attr("style","").data(f)).enter().append("rect").classed(he.cbfill,!0).style("stroke","none"),o.exit().remove();var r=l.map(B.c2p).map(Math.round).sort(function(e,t){return e-t});o.each(function(e,t){t=[0===t?l[0]:(f[t]+f[t-1])/2,t===f.length-1?l[1]:(f[t]+f[t+1])/2].map(B.c2p).map(Math.round);g&&(t[1]=ee.constrain(t[1]+(t[1]>t[0])?1:-1,r[0],r[1]));t=$.select(this).attr(g?"x":"y",z).attr(g?"y":"x",$.min(t)).attr(g?"width":"height",Math.max(R,2)).attr(g?"height":"width",Math.max($.max(t)-$.min(t),2));p._fillgradient?re.gradient(t,y,p._id,g?"vertical":"horizontalreversed",p._fillgradient,"fill"):(e=c(e).replace("e-",""),t.attr("fill",K(e).toHexString()))}),(a=h.select("."+he.cblines).selectAll("path."+he.cbline).data(s.color&&s.width?d:[])).enter().append("path").classed(he.cbline,!0),a.exit().remove(),a.each(function(e){var t=z,n=Math.round(B.c2p(e))+s.width/2%1;$.select(this).attr("d","M"+(g?t+","+n:n+","+t)+(g?"h":"v")+R).call(re.lineGroupStyle,s.width,u(e),s.dash)}),W.selectAll("g."+B._id+"tick,path").remove();var i=z+R+(_||0)/2-("outside"===p.ticks?1:0),o=J.calcTicks(B),a=J.getTickSigns(B)[2];return J.drawTicks(y,B,{vals:"inside"===B.ticks?J.clipEnds(B,o):o,layer:W,path:J.makeTickPath(B,i,a),transFn:J.makeTransTickFn(B)}),J.drawLabels(y,B,{vals:o,layer:W,transFn:J.makeTransTickLabelFn(B),labelFns:J.makeLabelFns(B,i)})},function(){var e,t,n,r;(g&&!U||!g&&U)&&(e=B.position||0,t=B._offset+B._length/2,"right"===L?(n=t,r=E.l+E.w*e+10+G*(B.showticklabels?1:.5)):(r=t,"bottom"===L&&(n=E.t+E.h*e+10+(-1===V.indexOf("inside")?B.tickfont.size:0)+("intside"!==B.ticks&&p.ticklen||0)),"top"===L&&(t=C.text.split("<br>").length,n=E.t+E.h*e+10-R-ce*G*t)),Z((g?"h":"v")+B._id+"title",{avoid:{selection:$.select(y).selectAll("g."+B._id+"tick"),side:L,offsetTop:g?0:E.t,offsetLeft:g?E.l:0,maxShift:g?S.width:S.height},attributes:{x:r,y:n,"text-anchor":"middle"},transform:{rotate:g?-90:0,offset:0}}))},Q.previousPromises,function(){var e=R+_/2;-1===V.indexOf("inside")&&(a=re.bBox(W.node()),e+=g?a.width:a.height),q=H.select("text");var t,n=0,r=g&&"top"===L,i=!g&&"right"===L,o=0;q.node()&&!q.classed(he.jsPlaceholder)&&((t=H.select(".h"+B._id+"title-math-group").node())&&(g&&U||!g&&!U)?(n=(a=re.bBox(t)).width,s=a.height):(n=(a=re.bBox(H.node())).right-E.l-(g?z:F),s=a.bottom-E.t-(g?F:z),g||"top"!==L||(e+=a.height,o=a.height)),i&&(q.attr("transform",te(n/2+G/2,0)),n*=2),e=Math.max(e,g?n:s));var a=2*(g?O:A)+e+w+_/2,s=0;!g&&C.text&&"bottom"===k&&P<=0&&(a+=s=a/2,o+=s),S._hColorbarMoveTitle=s,S._hColorbarMoveCBTitle=o,e=w+_,h.select("."+he.cbbg).attr("x",(g?z:F)-e/2-(g?O:0)).attr("y",(g?F:z)-(g?I:A+o-s)).attr(g?"width":"height",Math.max(a-s,2)).attr(g?"height":"width",Math.max(I+e,2)).call(ie.fill,M).call(ie.stroke,p.bordercolor).style("stroke-width",w);var l,u,c,i=i?Math.max(n-10,0):0;h.selectAll("."+he.cboutline).attr("x",(g?z:F+O)+i).attr("y",(g?F+A-I:z)+(r?Y:0)).attr(g?"width":"height",Math.max(R,2)).attr(g?"height":"width",Math.max(I-(g?2*A+Y:2*O+i),2)).call(ie.stroke,p.outlinecolor).style({fill:"none","stroke-width":_}),h.attr("transform",te(E.l-(g?D*a:0),E.t-(g?0:(1-N)*a-o))),!g&&(w||K(M).getAlpha()&&!K.equals(S.paper_bgcolor,M))&&(d=W.selectAll("text"),l=d[0].length,f=h.select("."+he.cbbg).node(),u=re.bBox(f),c=re.getTranslate(h),d.each(function(e,t){var n,r,i,o=l-1;0!==t&&t!==o||(n=re.bBox(this),i=re.getTranslate(this),t===o?(r=n.right+i.x,0<(r=u.right+c.x+F-w-2+T-r)&&(r=0)):0===t&&(i=n.left+i.x,(r=u.left+c.x+F+w+2-i)<0&&(r=0)),r&&(l<3?this.setAttribute("transform","translate("+r+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden")))}));var n={},r=fe[j],i=de[j],o=fe[k],f=de[k],d=a-R;g?("pixels"===m?(n.y=P,n.t=I*o,n.b=I*f):(n.t=n.b=0,n.yt=P+v*o,n.yb=P-v*f),"pixels"===x?(n.x=T,n.l=a*r,n.r=a*i):(n.l=d*r,n.r=d*i,n.xl=T-b*r,n.xr=T+b*i)):("pixels"===m?(n.x=T,n.l=I*r,n.r=I*i):(n.l=n.r=0,n.xl=T+v*r,n.xr=T-v*i),"pixels"===x?(n.y=1-P,n.t=a*o,n.b=a*f):(n.t=d*o,n.b=d*f,n.yt=P-b*o,n.yb=P+b*f)),Q.autoMargin(y,p._id,n)}],y)}(t,e,f);c&&c.then&&(f._promises||[]).push(c),f._context.edits.colorbarPosition&&(n=t,i=f,l="v"===(r=e).orientation,u=i._fullLayout._size,h.init({element:n.node(),gd:i,prepFn:function(){o=n.attr("transform"),p(n)},moveFn:function(e,t){n.attr("transform",o+te(e,t)),a=h.align((l?r._uFrac:r._vFrac)+e/u.w,l?r._thickFrac:r._lenFrac,0,1,r.xanchor),s=h.align((l?r._vFrac:1-r._uFrac)-t/u.h,l?r._lenFrac:r._thickFrac,0,1,r.yanchor);t=h.getCursor(a,s,r.xanchor,r.yanchor);p(n,t)},doneFn:function(){var e;p(n),void 0!==a&&void 0!==s&&((e={})[r._propPrefix+"x"]=a,e[r._propPrefix+"y"]=s,void 0!==r._traceIndex?d.call("_guiRestyle",i,e,r._traceIndex):d.call("_guiRelayout",i,e))}}))}),e.exit().each(function(e){Q.autoMargin(f,e._id)}).remove(),e.order()}}},{"../../constants/alignment":752,"../../lib":779,"../../lib/extend":772,"../../lib/setcursor":799,"../../lib/svg_text_utils":804,"../../plots/cartesian/axes":828,"../../plots/cartesian/axis_defaults":830,"../../plots/cartesian/layout_attributes":843,"../../plots/cartesian/position_defaults":846,"../../plots/plots":876,"../../registry":879,"../color":647,"../colorscale/helpers":658,"../dragelement":666,"../drawing":669,"../titles":745,"./constants":649,"@plotly/d3":3,tinycolor2:980}],652:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e){return r.isPlainObject(e.colorbar)}},{"../../lib":779}],653:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"colorbar",attributes:e("./attributes"),supplyDefaults:e("./defaults"),draw:e("./draw").draw,hasColorbar:e("./has_colorbar")}},{"./attributes":648,"./defaults":650,"./draw":651,"./has_colorbar":652}],654:[function(e,t,n){"use strict";var h=e("../colorbar/attributes"),p=e("../../lib/regex").counter,r=e("../../lib/sort_object_keys"),y=e("./scales.js").scales;r(y);t.exports=function(e,t){e=e||"";var n,r=(t=t||{}).cLetter||"c",i=("onlyIfNumerical"in t?t.onlyIfNumerical:Boolean(e),"noScale"in t?t.noScale:"marker.line"===e),o="showScaleDflt"in t?t.showScaleDflt:"z"===r,a="string"==typeof t.colorscaleDflt?y[t.colorscaleDflt]:null,s=t.editTypeOverride||"",l=("colorAttr"in t?(n=t.colorAttr,t.colorAttr):n={z:"z",c:"color"}[r],r+"auto"),u=r+"min",c=r+"max",f=r+"mid",d={};d[u]=d[c]=void 0;e={};e[l]=!1;r={};return"color"===n&&(r.color={valType:"color",arrayOk:!0,editType:s||"style"},t.anim&&(r.color.anim=!0)),r[l]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:d},r[u]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:e},r[c]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:e},r[f]={valType:"number",dflt:null,editType:"calc",impliedEdits:d},r.colorscale={valType:"colorscale",editType:"calc",dflt:a,impliedEdits:{autocolorscale:!1}},r.autocolorscale={valType:"boolean",dflt:!1!==t.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},r.reversescale={valType:"boolean",dflt:!1,editType:"plot"},i||(r.showscale={valType:"boolean",dflt:o,editType:"calc"},r.colorbar=h),t.noColorAxis||(r.coloraxis={valType:"subplotid",regex:p("coloraxis"),dflt:null,editType:"calc"}),r}},{"../../lib/regex":795,"../../lib/sort_object_keys":801,"../colorbar/attributes":648,"./scales.js":662}],655:[function(e,t,n){"use strict";var c=e("fast-isnumeric"),f=e("../../lib"),d=e("./helpers").extractOpts;t.exports=function(e,t,n){function r(){return f.aggNums(Math.min,null,a)}function i(){return f.aggNums(Math.max,null,a)}var o=e._fullLayout,a=n.vals,s=n.containerStr,l=s?f.nestedProperty(t,s).get():t,u=d(l),e=!1!==u.auto,n=u.min,s=u.max,t=u.mid;void 0===n?n=r():e&&(n=l._colorAx&&c(n)?Math.min(n,r()):r()),void 0===s?s=i():e&&(s=l._colorAx&&c(s)?Math.max(s,i()):i()),e&&void 0!==t&&(t-n<s-t?n=t-(s-t):s-t<t-n&&(s=t+(t-n))),n===s&&(n-=.5,s+=.5),u._sync("min",n),u._sync("max",s),u.autocolorscale&&(o=n*s<0?o.colorscale.diverging:0<=n?o.colorscale.sequential:o.colorscale.sequentialminus,u._sync("colorscale",o))}},{"../../lib":779,"./helpers":658,"fast-isnumeric":574}],656:[function(e,t,n){"use strict";var u=e("../../lib"),c=e("./helpers").hasColorscale,f=e("./helpers").extractOpts;t.exports=function(e,i){function o(e,t){var n=e["_"+t];void 0!==n&&(e[t]=n)}function t(e,t){var n,r=t.container?u.nestedProperty(e,t.container).get():e;r&&(r.coloraxis?r._colorAx=i[r.coloraxis]:(!(e=(n=f(r)).auto)&&void 0!==n.min||o(r,t.min),!e&&void 0!==n.max||o(r,t.max),n.autocolorscale&&o(r,"colorscale")))}for(var n,r=0;r<e.length;r++){var a=e[r],s=a._module.colorbar;if(s)if(Array.isArray(s))for(var l=0;l<s.length;l++)t(a,s[l]);else t(a,s);c(a,"marker.line")&&t(a,{container:"marker.line",min:"cmin",max:"cmax"})}for(n in i._colorAxes)t(i[n],{min:"cmin",max:"cmax"})}},{"../../lib":779,"./helpers":658}],657:[function(e,t,n){"use strict";var b=e("fast-isnumeric"),x=e("../../lib"),_=e("../colorbar/has_colorbar"),w=e("../colorbar/defaults"),M=e("./scales").isValid,j=e("../../registry").traceIs;function k(e,t){var n=t.slice(0,t.length-1);return t?x.nestedProperty(e,n).get()||{}:e}t.exports=function e(t,n,r,i,o){function a(){return delete t.coloraxis,delete n.coloraxis,e(t,n,r,i,o)}var s=o.prefix,l=o.cLetter,u="_module"in n,c=k(t,s),f=k(n,s),d=k(n._template||{},s)||{};if(u){var h=r._colorAxes||{},p=i(s+"coloraxis");if(p){var y=j(n,"contour")&&x.nestedProperty(n,"contours.coloring").get()||"heatmap",g=h[p];return void(g?(g[2].push(a),g[0]!==y&&(g[0]=!1,x.warn(["Ignoring coloraxis:",p,"setting","as it is linked to incompatible colorscales."].join(" ")))):h[p]=[y,n,[a]])}}p=c[l+"min"],y=c[l+"max"],y=b(p)&&b(y)&&p<y;i(s+l+"auto",!y)?i(s+l+"mid"):(i(s+l+"min"),i(s+l+"max"));var v,m,y=c.colorscale,l=d.colorscale;void 0!==y&&(v=!M(y)),void 0!==l&&(v=!M(l)),i(s+"autocolorscale",v),i(s+"colorscale"),i(s+"reversescale"),"marker.line."!==s&&(s&&u&&(m=_(c)),i(s+"showscale",m)&&(s&&d&&(f._template=d),w(c,f,r)))}},{"../../lib":779,"../../registry":879,"../colorbar/defaults":650,"../colorbar/has_colorbar":652,"./scales":662,"fast-isnumeric":574}],658:[function(e,t,n){"use strict";var u=e("@plotly/d3"),c=e("tinycolor2"),f=e("fast-isnumeric"),a=e("../../lib"),d=e("../color"),s=e("./scales").isValid;var l=["showscale","autocolorscale","colorscale","reversescale","colorbar"],h=["min","max","mid","auto"];function p(e){var n,t,r=e._colorAx,i=r||e,o={};for(s=0;s<l.length;s++)o[t=l[s]]=i[t];if(r)for(n="c",s=0;s<h.length;s++)o[t=h[s]]=i["c"+t];else{for(var a,s=0;s<h.length;s++)((a="c"+(t=h[s]))in i||(a="z"+t)in i)&&(o[t]=i[a]);n=a.charAt(0)}return o._sync=function(e,t){e=-1!==h.indexOf(e)?n+e:e;i[e]=i["_"+e]=t},o}function r(e){for(var e=p(e),t=e.min,n=e.max,r=e.reversescale?y(e.colorscale):e.colorscale,i=r.length,o=new Array(i),a=new Array(i),s=0;s<i;s++){var l=r[s];o[s]=t+l[0]*(n-t),a[s]=l[1]}return{domain:o,range:a}}function y(e){for(var t=e.length,n=new Array(t),r=t-1,i=0;0<=r;r--,i++){var o=e[r];n[i]=[1-o[0],o[1]]}return n}function i(e,t){t=t||{};for(var n=e.domain,r=e.range,i=r.length,o=new Array(i),a=0;a<i;a++){var s=c(r[a]).toRgb();o[a]=[s.r,s.g,s.b,s.a]}var l=u.scale.linear().domain(n).range(o).clamp(!0),n=t.noNumericCheck,t=t.returnArray,t=n&&t?l:n?function(e){return g(l(e))}:t?function(e){return f(e)?l(e):c(e).isValid()?e:d.defaultLine}:function(e){return f(e)?g(l(e)):c(e).isValid()?e:d.defaultLine};return t.domain=l.domain,t.range=function(){return r},t}function g(e){e={r:e[0],g:e[1],b:e[2],a:e[3]};return c(e).toRgbString()}t.exports={hasColorscale:function(e,t,n){var r=(e=t?a.nestedProperty(e,t).get()||{}:e)[n||"color"],i=!1;if(a.isArrayOrTypedArray(r))for(var o=0;o<r.length;o++)if(f(r[o])){i=!0;break}return a.isPlainObject(e)&&(i||!0===e.showscale||f(e.cmin)&&f(e.cmax)||s(e.colorscale)||a.isPlainObject(e.colorbar))},extractOpts:p,extractScale:r,flipScale:y,makeColorScaleFunc:i,makeColorScaleFuncFromTrace:function(e,t){return i(r(e),t)}}},{"../../lib":779,"../color":647,"./scales":662,"@plotly/d3":3,"fast-isnumeric":574,tinycolor2:980}],659:[function(e,t,n){"use strict";var r=e("./scales"),i=e("./helpers");t.exports={moduleType:"component",name:"colorscale",attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),handleDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc"),scales:r.scales,defaultScale:r.defaultScale,getScale:r.get,isValidScale:r.isValid,hasColorscale:i.hasColorscale,extractOpts:i.extractOpts,extractScale:i.extractScale,flipScale:i.flipScale,makeColorScaleFunc:i.makeColorScaleFunc,makeColorScaleFuncFromTrace:i.makeColorScaleFuncFromTrace}},{"./attributes":654,"./calc":655,"./cross_trace_defaults":656,"./defaults":657,"./helpers":658,"./layout_attributes":660,"./layout_defaults":661,"./scales":662}],660:[function(e,t,n){"use strict";var r=e("../../lib/extend").extendFlat,i=e("./attributes"),e=e("./scales").scales;t.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:e.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:e.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:e.RdBu,editType:"calc"}},coloraxis:r({_isSubplotObj:!0,editType:"calc"},i("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":772,"./attributes":654,"./scales":662}],661:[function(e,t,n){"use strict";var c=e("../../lib"),f=e("../../plot_api/plot_template"),d=e("./layout_attributes"),h=e("./defaults");t.exports=function(n,r){function e(e,t){return c.coerce(n,r,d,e,t)}e("colorscale.sequential"),e("colorscale.sequentialminus"),e("colorscale.diverging");var i,o,t,a=r._colorAxes;function s(e,t){return c.coerce(i,o,d.coloraxis,e,t)}for(t in a){var l=a[t];if(l[0])i=n[t]||{},(o=f.newContainer(r,t,"coloraxis"))._name=t,h(i,o,r,s,{prefix:"",cLetter:"c"});else{for(var u=0;u<l[2].length;u++)l[2][u]();delete r._colorAxes[t]}}}},{"../../lib":779,"../../plot_api/plot_template":817,"./defaults":657,"./layout_attributes":660}],662:[function(e,t,n){"use strict";var i=e("tinycolor2"),r={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},o=r.RdBu;function a(e){var t=0;if(!Array.isArray(e)||e.length<2)return!1;if(!e[0]||!e[e.length-1])return!1;if(0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var n=0;n<e.length;n++){var r=e[n];if(2!==r.length||+r[0]<t||!i(r[1]).isValid())return!1;t=+r[0]}return!0}t.exports={scales:r,defaultScale:o,get:function(t,n){return n=n||o,t?("string"==typeof t&&(e(),"string"==typeof t&&e()),a(t)?t:n):n;function e(){try{t=r[t]||JSON.parse(t)}catch(e){t=n}}},isValid:function(e){return void 0!==r[e]||a(e)}}},{tinycolor2:980}],663:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i){e=(e-n)/(r-n),r=e+t/(r-n),n=(e+r)/2;return"left"===i||"bottom"===i?e:"center"===i||"middle"===i?n:"right"===i||"top"===i?r:e<2/3-n?e:4/3-n<r?r:n}},{}],664:[function(e,t,n){"use strict";var i=e("../../lib"),o=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];t.exports=function(e,t,n,r){return e="left"===n?0:"center"===n?1:"right"===n?2:i.constrain(Math.floor(3*e),0,2),t="bottom"===r?0:"middle"===r?1:"top"===r?2:i.constrain(Math.floor(3*t),0,2),o[t][e]}},{"../../lib":779}],665:[function(e,t,n){"use strict";n.selectMode=function(e){return"lasso"===e||"select"===e},n.drawMode=function(e){return"drawclosedpath"===e||"drawopenpath"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},n.openMode=function(e){return"drawline"===e||"drawopenpath"===e},n.rectMode=function(e){return"select"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},n.freeMode=function(e){return"lasso"===e||"drawclosedpath"===e||"drawopenpath"===e},n.selectingOrDrawing=function(e){return n.freeMode(e)||n.rectMode(e)}},{}],666:[function(e,t,n){"use strict";var r=e("mouse-event-offset"),m=e("has-hover"),b=e("has-passive-events"),x=e("../../lib").removeElement,_=e("../../plots/cartesian/constants"),w=t.exports={};w.align=e("./align"),w.getCursor=e("./cursor");e=e("./unhover");function M(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}function j(e){return r(e.changedTouches?e.changedTouches[0]:e,document.body)}w.unhover=e.wrapped,w.unhoverRaw=e.raw,w.init=function(i){var r,o,n,a,s,l,u,c,f=i.gd,d=1,h=f._context.doubleClickDelay,p=i.element;f._mouseDownTime||(f._mouseDownTime=0),p.style.pointerEvents="all",p.onmousedown=e,b?(p._ontouchstart&&p.removeEventListener("touchstart",p._ontouchstart),p._ontouchstart=e,p.addEventListener("touchstart",e,{passive:!1})):p.ontouchstart=e;var y=i.clampFn||function(e,t,n){return[e=Math.abs(e)<n?0:e,t=Math.abs(t)<n?0:t]};function e(e){f._dragged=!1,f._dragging=!0;var t=j(e);r=t[0],o=t[1],u=e.target,c=2===(l=e).buttons||e.ctrlKey,void 0===e.clientX&&void 0===e.clientY&&(e.clientX=r,e.clientY=o),(n=(new Date).getTime())-f._mouseDownTime<h?d+=1:(d=1,f._mouseDownTime=n),i.prepFn&&i.prepFn(e,r,o),m&&!c?(s=M()).style.cursor=window.getComputedStyle(p).cursor:m||(s=document,a=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(p).cursor),document.addEventListener("mouseup",v),document.addEventListener("touchend",v),!1!==i.dragmode&&(e.preventDefault(),document.addEventListener("mousemove",g),document.addEventListener("touchmove",g,{passive:!1}))}function g(e){e.preventDefault();var t=j(e),n=i.minDrag||_.MINDRAG,t=y(t[0]-r,t[1]-o,n),n=t[0],t=t[1];(n||t)&&(f._dragged=!0,w.unhover(f,e)),f._dragged&&i.moveFn&&!c&&(f._dragdata={element:p,dx:n,dy:t},i.moveFn(n,t))}function v(t){if(delete f._dragdata,!1!==i.dragmode&&(t.preventDefault(),document.removeEventListener("mousemove",g),document.removeEventListener("touchmove",g)),document.removeEventListener("mouseup",v),document.removeEventListener("touchend",v),m?x(s):a&&(s.documentElement.style.cursor=a,a=null),f._dragging){if(f._dragging=!1,(new Date).getTime()-f._mouseDownTime>h&&(d=Math.max(d-1,1)),f._dragged)i.doneFn&&i.doneFn();else if(i.clickFn&&i.clickFn(d,l),!c){try{n=new MouseEvent("click",t)}catch(e){var n,r=j(t);(n=document.createEvent("MouseEvents")).initMouseEvent("click",t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,r[0],r[1],t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}u.dispatchEvent(n)}f._dragging=!1,f._dragged=!1}else f._dragged=!1}},w.coverSlip=M},{"../../lib":779,"../../plots/cartesian/constants":835,"./align":663,"./cursor":664,"./unhover":667,"has-hover":606,"has-passive-events":607,"mouse-event-offset":617}],667:[function(e,t,n){"use strict";var i=e("../../lib/events"),r=e("../../lib/throttle"),o=e("../../lib/dom").getGraphDiv,a=e("../fx/constants"),s=t.exports={wrapped:function(e,t,n){(e=o(e))._fullLayout&&r.clear(e._fullLayout._uid+a.HOVERID),s.raw(e,t,n)},raw:function(e,t){var n=e._fullLayout,r=e._hoverdata;(t=t||{}).target&&!e._dragged&&!1===i.triggerHandler(e,"plotly_beforehover",t)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),e._hoverdata=void 0,t.target&&r&&e.emit("plotly_unhover",{event:t,points:r}))}}},{"../../lib/dom":770,"../../lib/events":771,"../../lib/throttle":805,"../fx/constants":681}],668:[function(e,t,n){"use strict";n.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},n.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],669:[function(e,t,n){"use strict";var M=e("@plotly/d3"),j=e("../../lib"),r=j.numberFormat,i=e("fast-isnumeric"),h=e("tinycolor2"),m=e("../../registry"),k=e("../color"),o=e("../colorscale"),u=j.strTranslate,f=e("../../lib/svg_text_utils"),a=e("../../constants/xmlns_namespaces"),c=e("../../constants/alignment").LINE_SPACING,b=e("../../constants/interactions").DESELECTDIM,s=e("../../traces/scatter/subtypes"),l=e("../../traces/scatter/make_bubble_size_func"),d=e("../../components/fx/helpers").appendArrayPointValue,y=t.exports={font:function(e,t,n,r){j.isPlainObject(t)&&(r=t.color,n=t.size,t=t.family),t&&e.style("font-family",t),n+1&&e.style("font-size",n+"px"),r&&e.call(k.fill,r)},setPosition:function(e,t,n){e.attr("x",t).attr("y",n)},setSize:function(e,t,n){e.attr("width",t).attr("height",n)},setRect:function(e,t,n,r,i){e.call(y.setPosition,t,n).call(y.setSize,r,i)},translatePoint:function(e,t,n,r){n=n.c2p(e.x),e=r.c2p(e.y);return!!(i(n)&&i(e)&&t.node())&&("text"===t.node().nodeName?t.attr("x",n).attr("y",e):t.attr("transform",u(n,e)),!0)},translatePoints:function(e,n,r){e.each(function(e){var t=M.select(this);y.translatePoint(e,t,n,r)})},hideOutsideRangePoint:function(e,t,n,r,i,o){t.attr("display",n.isPtWithinRange(e,i)&&r.isPtWithinRange(e,o)?null:"none")},hideOutsideRangePoints:function(r,e){var i,o;e._hasClipOnAxisFalse&&(i=e.xaxis,o=e.yaxis,r.each(function(e){var e=e[0].trace,t=e.xcalendar,n=e.ycalendar,e=m.traceIs(e,"bar-like")?".bartext":".point,.textpoint";r.selectAll(e).each(function(e){y.hideOutsideRangePoint(e,M.select(this),i,o,t,n)})}))},crispRound:function(e,t,n){return t&&i(t)?e._context.staticPlot?t:t<1?1:Math.round(t):n||0},singleLineStyle:function(e,t,n,r,i){t.style("fill","none");e=(((e||[])[0]||{}).trace||{}).line||{},n=n||e.width||0,i=i||e.dash||"";k.stroke(t,r||e.color),y.dashLine(t,i,n)},lineGroupStyle:function(e,r,i,o){e.style("fill","none").each(function(e){var t=(((e||[])[0]||{}).trace||{}).line||{},n=r||t.width||0,e=o||t.dash||"";M.select(this).call(k.stroke,i||t.color).call(y.dashLine,e,n)})},dashLine:function(e,t,n){t=y.dashStyle(t,n=+n||0),e.style({"stroke-dasharray":t,"stroke-width":n+"px"})},dashStyle:function(e,t){t=+t||1;t=Math.max(t,3);return"solid"===e?e="":"dot"===e?e=t+"px,"+t+"px":"dash"===e?e=3*t+"px,"+3*t+"px":"longdash"===e?e=5*t+"px,"+5*t+"px":"dashdot"===e?e=3*t+"px,"+t+"px,"+t+"px,"+t+"px":"longdashdot"===e&&(e=5*t+"px,"+2*t+"px,"+t+"px,"+2*t+"px"),e},singleFillStyle:function(e){var t=(((M.select(e.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;t&&e.call(k.fill,t)},fillGroupStyle:function(e){e.style("stroke-width",0).each(function(e){var t=M.select(this);e[0].trace&&t.call(k.fill,e[0].trace.fillcolor)})}},p=e("./symbol_defs");y.symbolNames=[],y.symbolFuncs=[],y.symbolNeedLines={},y.symbolNoDot={},y.symbolNoFill={},y.symbolList=[],Object.keys(p).forEach(function(e){var t=p[e],n=t.n;y.symbolList.push(n,String(n),e,n+100,String(n+100),e+"-open"),y.symbolNames[n]=e,y.symbolFuncs[n]=t.f,t.needLine&&(y.symbolNeedLines[n]=!0),t.noDot?y.symbolNoDot[n]=!0:y.symbolList.push(n+200,String(n+200),e+"-dot",n+300,String(n+300),e+"-open-dot"),t.noFill&&(y.symbolNoFill[n]=!0)});var g=y.symbolNames.length;function v(e,t){return y.symbolFuncs[e%100](t)+(200<=e?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}y.symbolNumber=function(e){var t;return i(e)?e=+e:"string"==typeof e&&((t=0)<e.indexOf("-open")&&(t=100,e=e.replace("-open","")),0<e.indexOf("-dot")&&(t+=200,e=e.replace("-dot","")),0<=(e=y.symbolNames.indexOf(e))&&(e+=t)),g<=e%100||400<=e?0:Math.floor(Math.max(e,0))};var t={x1:1,x2:0,y1:0,y2:0},e={x1:0,x2:0,y1:1,y2:0},x=r("~f"),_={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:t},horizontalreversed:{node:"linearGradient",attrs:t,reversed:!0},vertical:{node:"linearGradient",attrs:e},verticalreversed:{node:"linearGradient",attrs:e,reversed:!0}};y.gradient=function(e,t,n,r,i,o){for(var a=i.length,s=_[r],l=new Array(a),u=0;u<a;u++)s.reversed?l[a-1-u]=[x(100*(1-i[u][0])),i[u][1]]:l[u]=[x(100*i[u][0]),i[u][1]];var c=t._fullLayout,f="g"+c._uid+"-"+n,r=c._defs.select(".gradients").selectAll("#"+f).data([r+l.join(";")],j.identity);r.exit().remove(),r.enter().append(s.node).each(function(){var e=M.select(this);s.attrs&&e.attr(s.attrs),e.attr("id",f);e=e.selectAll("stop").data(l);e.exit().remove(),e.enter().append("stop"),e.each(function(e){var t=h(e[1]);M.select(this).attr({offset:e[0]+"%","stop-color":k.tinyRGB(t),"stop-opacity":t.getAlpha()})})}),e.style(o,L(f,t)).style(o+"-opacity",null);function d(e){return"."+e.attr("class").replace(/\s/g,".")}e=d(M.select(e.node().parentNode))+">"+d(e);c._gradientUrlQueryParts[e]=1},y.pattern=function(e,t,n,r,i,o,a,s,l,u,c,f){var d="legend"===t;s&&(c="overlay"===l?(u=s,k.contrast(u)):(u=void 0,s));var h,p,y,g,v,m,b,x,s=n._fullLayout,_="p"+s._uid+"-"+r,w={};switch(i){case"/":h=o*Math.sqrt(2),p=o*Math.sqrt(2),y="path",w={d:b="M-"+h/4+","+p/4+"l"+h/2+",-"+p/2+"M0,"+p+"L"+h+",0M"+h/4*3+","+p/4*5+"l"+h/2+",-"+p/2,opacity:f,stroke:c,"stroke-width":(x=a*o)+"px"};break;case"\\":h=o*Math.sqrt(2),p=o*Math.sqrt(2),y="path",w={d:b="M"+h/4*3+",-"+p/4+"l"+h/2+","+p/2+"M0,0L"+h+","+p+"M-"+h/4+","+p/4*3+"l"+h/2+","+p/2,opacity:f,stroke:c,"stroke-width":(x=a*o)+"px"};break;case"x":h=o*Math.sqrt(2),p=o*Math.sqrt(2),b="M-"+h/4+","+p/4+"l"+h/2+",-"+p/2+"M0,"+p+"L"+h+",0M"+h/4*3+","+p/4*5+"l"+h/2+",-"+p/2+"M"+h/4*3+",-"+p/4+"l"+h/2+","+p/2+"M0,0L"+h+","+p+"M-"+h/4+","+p/4*3+"l"+h/2+","+p/2,x=o-o*Math.sqrt(1-a),y="path",w={d:b,opacity:f,stroke:c,"stroke-width":x+"px"};break;case"|":y=y="path",w={d:b="M"+(h=o)/2+",0L"+h/2+","+(p=o),opacity:f,stroke:c,"stroke-width":(x=a*o)+"px"};break;case"-":y=y="path",w={d:b="M0,"+(p=h=o)/2+"L"+h+","+p/2,opacity:f,stroke:c,"stroke-width":(x=a*o)+"px"};break;case"+":y="path",b="M"+(h=o)/2+",0L"+h/2+","+(p=o)+"M0,"+p/2+"L"+h+","+p/2,x=o-o*Math.sqrt(1-a),y="path",w={d:b,opacity:f,stroke:c,"stroke-width":x+"px"};break;case".":p=h=o,v=a<Math.PI/4?Math.sqrt(a*o*o/Math.PI):(g=a,v=Math.PI/4,m=1,b=o/2,x=o/Math.sqrt(2),b+(x-b)*(g-v)/(m-v)),y="circle",w={cx:h/2,cy:p/2,r:v,opacity:f,fill:c}}i=[i||"noSh",u||"noBg",c||"noFg",o,a].join(";"),i=s._defs.select(".patterns").selectAll("#"+_).data([i],j.identity);i.exit().remove(),i.enter().append("pattern").each(function(){var e,t=M.select(this);t.attr({id:_,width:h+"px",height:p+"px",patternUnits:"userSpaceOnUse",patternTransform:d?"scale(0.8)":""}),u&&((e=t.selectAll("rect").data([0])).exit().remove(),e.enter().append("rect").attr({width:h+"px",height:p+"px",fill:u}));t=t.selectAll(y).data([0]);t.exit().remove(),t.enter().append(y).attr(w)}),e.style("fill",L(_,n)).style("fill-opacity",null),e.classed("pattern_filled",!0);e="."+M.select(e.node().parentNode).attr("class").replace(/\s/g,".")+">.pattern_filled";s._patternUrlQueryParts[e]=1},y.initGradients=function(e){e=e._fullLayout;j.ensureSingle(e._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),e._gradientUrlQueryParts={}},y.initPatterns=function(e){e=e._fullLayout;j.ensureSingle(e._defs,"g","patterns").selectAll("pattern").remove(),e._patternUrlQueryParts={}},y.getPatternAttr=function(e,t,n){return e&&j.isArrayOrTypedArray(e)?t<e.length?e[t]:n:e},y.pointStyle=function(e,t,n){var r;e.size()&&(r=y.makePointStyleFns(t),e.each(function(e){y.singlePointStyle(e,M.select(this),t,r,n)}))},y.singlePointStyle=function(e,t,n,r,i){var o=n.marker,a=o.line;t.style("opacity",r.selectedOpacityFn?r.selectedOpacityFn(e):void 0===e.mo?o.opacity:e.mo),r.ms2mrc&&(c="various"===e.ms||"various"===o.size?3:r.ms2mrc(e.ms),e.mrc=c,r.selectedSizeFn&&(c=e.mrc=r.selectedSizeFn(e)),p=y.symbolNumber(e.mx||o.symbol)||0,e.om=100<=p%200,t.attr("d",v(p,c)));var s,l,u,c,f,d,h,p=!1;e.so?(l=a.outlierwidth,u=a.outliercolor,s=o.outliercolor):(d=(a||{}).width,l=(e.mlw+1||d+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0,u="mlc"in e?e.mlcc=r.lineScale(e.mlc):j.isArrayOrTypedArray(a.color)?k.defaultLine:a.color,j.isArrayOrTypedArray(o.color)&&(s=k.defaultLine,p=!0),s="mc"in e?e.mcc=r.markerScale(e.mc):o.color||"rgba(0,0,0,0)",r.selectedColorFn&&(s=r.selectedColorFn(e))),e.om?t.call(k.stroke,s).style({"stroke-width":(l||1)+"px",fill:"none"}):(t.style("stroke-width",(e.isBlank?0:l)+"px"),c=o.gradient,(d=e.mgt)?p=!0:d=c&&c.type,j.isArrayOrTypedArray(d)&&(d=d[0],_[d]||(d=0)),r=(a=o.pattern)&&y.getPatternAttr(a.shape,e.i,""),d&&"none"!==d?((h=e.mgc)?p=!0:h=c.color,f=n.uid,p&&(f+="-"+e.i),y.gradient(t,i,f,d,[[0,h],[1,s]],"fill")):r?(o=y.getPatternAttr(a.bgcolor,e.i,null),c=y.getPatternAttr(a.fgcolor,e.i,null),p=a.fgopacity,f=y.getPatternAttr(a.size,e.i,8),d=y.getPatternAttr(a.solidity,e.i,.3),h=e.mcc||j.isArrayOrTypedArray(a.shape)||j.isArrayOrTypedArray(a.bgcolor)||j.isArrayOrTypedArray(a.size)||j.isArrayOrTypedArray(a.solidity),n=n.uid,h&&(n+="-"+e.i),y.pattern(t,"point",i,n,r,f,d,e.mcc,a.fillmode,o,c,p)):k.fill(t,s),l&&k.stroke(t,u))},y.makePointStyleFns=function(e){var t={},n=e.marker;return t.markerScale=y.tryColorscale(n,""),t.lineScale=y.tryColorscale(n,"line"),m.traceIs(e,"symbols")&&(t.ms2mrc=s.isBubble(e)?l(e):function(){return(n.size||6)/2}),e.selectedpoints&&j.extendFlat(t,y.makeSelectedPointStyleFns(e)),t},y.makeSelectedPointStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},i=e.marker||{},o=n.marker||{},n=r.marker||{},r=i.opacity,a=o.opacity,s=n.opacity,l=void 0!==a,u=void 0!==s;(j.isArrayOrTypedArray(r)||l||u)&&(t.selectedOpacityFn=function(e){var t=void 0===e.mo?i.opacity:e.mo;return e.selected?l?a:t:u?s:b*t});var c=i.color,f=o.color,d=n.color;(f||d)&&(t.selectedColorFn=function(e){var t=e.mcc||c;return e.selected?f||t:d||t});var h=i.size,p=o.size,y=n.size,g=void 0!==p,v=void 0!==y;return m.traceIs(e,"symbols")&&(g||v)&&(t.selectedSizeFn=function(e){var t=e.mrc||h/2;return e.selected?g?p/2:t:v?y/2:t}),t},y.makeSelectedTextStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},e=e.textfont||{},n=n.textfont||{},r=r.textfont||{},i=e.color,o=n.color,a=r.color;return t.selectedTextColorFn=function(e){var t=e.tc||i;return e.selected?o||t:a||(o?t:k.addOpacity(t,b))},t},y.selectedPointStyle=function(e,t){var i,o,r;e.size()&&t.selectedpoints&&(i=y.makeSelectedPointStyleFns(t),o=t.marker||{},r=[],i.selectedOpacityFn&&r.push(function(e,t){e.style("opacity",i.selectedOpacityFn(t))}),i.selectedColorFn&&r.push(function(e,t){k.fill(e,i.selectedColorFn(t))}),i.selectedSizeFn&&r.push(function(e,t){var n=t.mx||o.symbol||0,r=i.selectedSizeFn(t);e.attr("d",v(y.symbolNumber(n),r)),t.mrc2=r}),r.length&&e.each(function(e){for(var t=M.select(this),n=0;n<r.length;n++)r[n](t,e)}))},y.tryColorscale=function(e,t){t=t?j.nestedProperty(e,t).get():e;if(t){e=t.color;if((t.colorscale||t._colorAx)&&j.isArrayOrTypedArray(e))return o.makeColorScaleFuncFromTrace(t)}return j.identity};var w={start:1,end:-1,middle:0,bottom:1,top:-1};function O(e,t,n,r,i){var o=M.select(e.node().parentNode),a=-1!==t.indexOf("top")?"top":-1!==t.indexOf("bottom")?"bottom":"middle",s=-1!==t.indexOf("left")?"end":-1!==t.indexOf("right")?"start":"middle",l=r?r/.8+1:0,t=(f.lineCount(e)-1)*c+1,r=w[s]*l,n=.75*n+w[a]*l+(w[a]-1)*t*n/2;e.attr("text-anchor",s),i||o.attr("transform",u(r,n))}function A(e,t){t=e.ts||t.textfont.size;return i(t)&&0<t?t:0}y.textPointStyle=function(e,a,s){var l,u,c;e.size()&&(a.selectedpoints&&(l=y.makeSelectedTextStyleFns(a).selectedTextColorFn),u=a.texttemplate,c=s._fullLayout,e.each(function(e){var t,n,r,i=M.select(this),o=u?j.extractOption(e,a,"txt","texttemplate"):j.extractOption(e,a,"tx","text");o||0===o?(u&&(t=(r=a._module.formatLabels)?r(e,a,c):{},d(n={},a,e.i),r=a._meta||{},o=j.texttemplateString(o,t,c._d3locale,n,e,r)),t=e.tp||a.textposition,n=A(e,a),r=l?l(e):e.tc||a.textfont.color,i.call(y.font,e.tf||a.textfont.family,n,r).text(o).call(f.convertToTspans,s).call(O,t,n,e.mrc)):i.remove()}))},y.selectedTextStyle=function(e,o){var a;e.size()&&o.selectedpoints&&(a=y.makeSelectedTextStyleFns(o),e.each(function(e){var t=M.select(this),n=a.selectedTextColorFn(e),r=e.tp||o.textposition,i=A(e,o);k.fill(t,n);n=m.traceIs(o,"bar-like");O(t,r,i,e.mrc2||e.mrc,n)}))};function T(e,t,n,r){var i=e[0]-t[0],o=e[1]-t[1],a=n[0]-t[0],s=n[1]-t[1],e=Math.pow(i*i+o*o,.25),n=Math.pow(a*a+s*s,.25),a=(n*n*i-e*e*a)*r,s=(n*n*o-e*e*s)*r,r=3*n*(e+n),n=3*e*(e+n);return[[M.round(t[0]+(r&&a/r),2),M.round(t[1]+(r&&s/r),2)],[M.round(t[0]-(n&&a/n),2),M.round(t[1]-(n&&s/n),2)]]}y.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");for(var n="M"+e[0],r=[],i=1;i<e.length-1;i++)r.push(T(e[i-1],e[i],e[i+1],t));for(n+="Q"+r[0][0]+" "+e[1],i=2;i<e.length-1;i++)n+="C"+r[i-2][1]+" "+r[i-1][0]+" "+e[i];return n+="Q"+r[e.length-3][1]+" "+e[e.length-1]},y.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";for(var n="M"+e[0],r=e.length-1,i=[T(e[r],e[0],e[1],t)],o=1;o<r;o++)i.push(T(e[o-1],e[o],e[o+1],t));for(i.push(T(e[r-1],e[r],e[0],t)),o=1;o<=r;o++)n+="C"+i[o-1][1]+" "+i[o][0]+" "+e[o];return n+="C"+i[r][1]+" "+i[0][0]+" "+e[0]+"Z"};function P(e,t){return"L"+M.round(t[0],2)+","+M.round(t[1],2)}var S={hv:function(e,t){return"H"+M.round(t[0],2)+"V"+M.round(t[1],2)},vh:function(e,t){return"V"+M.round(t[1],2)+"H"+M.round(t[0],2)},hvh:function(e,t){return"H"+M.round((e[0]+t[0])/2,2)+"V"+M.round(t[1],2)+"H"+M.round(t[0],2)},vhv:function(e,t){return"V"+M.round((e[1]+t[1])/2,2)+"H"+M.round(t[0],2)+"V"+M.round(t[1],2)}};y.steps=function(e){var r=S[e]||P;return function(e){for(var t="M"+M.round(e[0][0],2)+","+M.round(e[0][1],2),n=1;n<e.length;n++)t+=r(e[n-1],e[n]);return t}},y.makeTester=function(){var e=j.ensureSingleById(M.select("body"),"svg","js-plotly-tester",function(e){e.attr(a.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),t=j.ensureSingle(e,"path","js-reference-point",function(e){e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});y.tester=e,y.testref=t},y.savedBBoxes={};var E=0;function C(e){var t=e.getAttribute("data-unformatted");if(null!==t)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}function L(e,t){if(!e)return null;t=t._context,t=!t._exportedPlot&&t._baseUrl||"";return t?"url('"+t+"#"+e+"')":"url(#"+e+")"}y.bBox=function(e,t,n){var r,i;if(n=n||C(e)){if(u=y.savedBBoxes[n])return j.extendFlat({},u)}else if(1===e.childNodes.length){var o=e.childNodes[0];if(n=C(o)){var a=+o.getAttribute("x")||0,s=+o.getAttribute("y")||0,l=o.getAttribute("transform");if(!l){o=y.bBox(o,!1,n);return a&&(o.left+=a,o.right+=a),s&&(o.top+=s,o.bottom+=s),o}if(u=y.savedBBoxes[n+="~"+a+"~"+s+"~"+l])return j.extendFlat({},u)}}t?r=e:(i=y.tester.node(),r=e.cloneNode(!0),i.appendChild(r)),M.select(r).attr("transform",null).call(f.positionText,0,0);var u=r.getBoundingClientRect(),e=y.testref.node().getBoundingClientRect();t||i.removeChild(r);e={height:u.height,width:u.width,left:u.left-e.left,top:u.top-e.top,right:u.right-e.left,bottom:u.bottom-e.top};return 1e4<=E&&(y.savedBBoxes={},E=0),n&&(y.savedBBoxes[n]=e),E++,j.extendFlat({},e)},y.setClipUrl=function(e,t,n){e.attr("clip-path",L(t,n))},y.getTranslate=function(e){e=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+e[0]||0,y:+e[1]||0}},y.setTranslate=function(e,t,n){var r=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",r=e[r]("transform")||"";return t=t||0,n=n||0,r=r.replace(/(\btranslate\(.*?\);?)/,"").trim(),r=(r+=u(t,n)).trim(),e[i]("transform",r),r},y.getScale=function(e){e=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+e[0]||1,y:+e[1]||1}},y.setScale=function(e,t,n){var r=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",r=e[r]("transform")||"";return t=t||1,n=n||1,r=r.replace(/(\bscale\(.*?\);?)/,"").trim(),r=(r+="scale("+t+","+n+")").trim(),e[i]("transform",r),r};var R=/\s*sc.*/;y.setPointGroupScale=function(e,t,n){var r;t=t||1,n=n||1,e&&(r=1===t&&1===n?"":"scale("+t+","+n+")",e.each(function(){var e=(this.getAttribute("transform")||"").replace(R,""),e=(e+=r).trim();this.setAttribute("transform",e)}))};var I=/translate\([^)]*\)\s*$/;y.setTextPointsScale=function(e,i,o){e&&e.each(function(){var e,t,n=M.select(this),r=n.select("text");r.node()&&(e=parseFloat(r.attr("x")||0),t=parseFloat(r.attr("y")||0),r=(n.attr("transform")||"").match(I),t=1===i&&1===o?[]:[u(e,t),"scale("+i+","+o+")",u(-e,-t)],r&&t.push(r),n.attr("transform",t.join("")))})}},{"../../components/fx/helpers":683,"../../constants/alignment":752,"../../constants/interactions":757,"../../constants/xmlns_namespaces":759,"../../lib":779,"../../lib/svg_text_utils":804,"../../registry":879,"../../traces/scatter/make_bubble_size_func":948,"../../traces/scatter/subtypes":956,"../color":647,"../colorscale":659,"./symbol_defs":670,"@plotly/d3":3,"fast-isnumeric":574,tinycolor2:980}],670:[function(e,t,n){"use strict";var u=e("@plotly/d3");t.exports={circle:{n:0,f:function(e){e=u.round(e,2);return"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"}},square:{n:1,f:function(e){e=u.round(e,2);return"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"}},diamond:{n:2,f:function(e){e=u.round(1.3*e,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"Z"}},cross:{n:3,f:function(e){var t=u.round(.4*e,2),e=u.round(1.2*e,2);return"M"+e+","+t+"H"+t+"V"+e+"H-"+t+"V"+t+"H-"+e+"V-"+t+"H-"+t+"V-"+e+"H"+t+"V-"+t+"H"+e+"Z"}},x:{n:4,f:function(e){var t=u.round(.8*e/Math.sqrt(2),2),n="l"+t+","+t,r="l"+t+",-"+t,i="l-"+t+",-"+t,e="l-"+t+","+t;return"M0,"+t+n+r+i+r+i+e+i+e+n+e+n+"Z"}},"triangle-up":{n:5,f:function(e){var t=u.round(2*e/Math.sqrt(3),2);return"M-"+t+","+u.round(e/2,2)+"H"+t+"L0,-"+u.round(e,2)+"Z"}},"triangle-down":{n:6,f:function(e){var t=u.round(2*e/Math.sqrt(3),2);return"M-"+t+",-"+u.round(e/2,2)+"H"+t+"L0,"+u.round(e,2)+"Z"}},"triangle-left":{n:7,f:function(e){var t=u.round(2*e/Math.sqrt(3),2);return"M"+u.round(e/2,2)+",-"+t+"V"+t+"L-"+u.round(e,2)+",0Z"}},"triangle-right":{n:8,f:function(e){var t=u.round(2*e/Math.sqrt(3),2);return"M-"+u.round(e/2,2)+",-"+t+"V"+t+"L"+u.round(e,2)+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=u.round(.6*e,2),e=u.round(1.2*e,2);return"M-"+e+",-"+t+"H"+t+"V"+e+"Z"}},"triangle-se":{n:10,f:function(e){var t=u.round(.6*e,2),e=u.round(1.2*e,2);return"M"+t+",-"+e+"V"+t+"H-"+e+"Z"}},"triangle-sw":{n:11,f:function(e){var t=u.round(.6*e,2),e=u.round(1.2*e,2);return"M"+e+","+t+"H-"+t+"V-"+e+"Z"}},"triangle-nw":{n:12,f:function(e){var t=u.round(.6*e,2),e=u.round(1.2*e,2);return"M-"+t+","+e+"V-"+t+"H"+e+"Z"}},pentagon:{n:13,f:function(e){var t=u.round(.951*e,2),n=u.round(.588*e,2),r=u.round(-e,2),i=u.round(-.309*e,2);return"M"+t+","+i+"L"+n+","+u.round(.809*e,2)+"H-"+n+"L-"+t+","+i+"L0,"+r+"Z"}},hexagon:{n:14,f:function(e){var t=u.round(e,2),n=u.round(e/2,2),e=u.round(e*Math.sqrt(3)/2,2);return"M"+e+",-"+n+"V"+n+"L0,"+t+"L-"+e+","+n+"V-"+n+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=u.round(e,2),n=u.round(e/2,2),e=u.round(e*Math.sqrt(3)/2,2);return"M-"+n+","+e+"H"+n+"L"+t+",0L"+n+",-"+e+"H-"+n+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=u.round(.924*e,2),e=u.round(.383*e,2);return"M-"+e+",-"+t+"H"+e+"L"+t+",-"+e+"V"+e+"L"+e+","+t+"H-"+e+"L-"+t+","+e+"V-"+e+"Z"}},star:{n:17,f:function(e){var t=1.4*e,n=u.round(.225*t,2),r=u.round(.951*t,2),i=u.round(.363*t,2),o=u.round(.588*t,2),a=u.round(-t,2),s=u.round(-.309*t,2),l=u.round(.118*t,2),e=u.round(.809*t,2);return"M"+n+","+s+"H"+r+"L"+i+","+l+"L"+o+","+e+"L0,"+u.round(.382*t,2)+"L-"+o+","+e+"L-"+i+","+l+"L-"+r+","+s+"H-"+n+"L0,"+a+"Z"}},hexagram:{n:18,f:function(e){var t=u.round(.66*e,2),n=u.round(.38*e,2),e=u.round(.76*e,2);return"M-"+e+",0l-"+n+",-"+t+"h"+e+"l"+n+",-"+t+"l"+n+","+t+"h"+e+"l-"+n+","+t+"l"+n+","+t+"h-"+e+"l-"+n+","+t+"l-"+n+",-"+t+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=u.round(e*Math.sqrt(3)*.8,2),n=u.round(.8*e,2),r=u.round(1.6*e,2),e=u.round(4*e,2),e="A "+e+","+e+" 0 0 1 ";return"M-"+t+","+n+e+t+","+n+e+"0,-"+r+e+"-"+t+","+n+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=u.round(e*Math.sqrt(3)*.8,2),n=u.round(.8*e,2),r=u.round(1.6*e,2),e=u.round(4*e,2),e="A "+e+","+e+" 0 0 1 ";return"M"+t+",-"+n+e+"-"+t+",-"+n+e+"0,"+r+e+t+",-"+n+"Z"}},"star-square":{n:21,f:function(e){var t=u.round(1.1*e,2),e=u.round(2*e,2),e="A "+e+","+e+" 0 0 1 ";return"M-"+t+",-"+t+e+"-"+t+","+t+e+t+","+t+e+t+",-"+t+e+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=u.round(1.4*e,2),e=u.round(1.9*e,2),e="A "+e+","+e+" 0 0 1 ";return"M-"+t+",0"+e+"0,"+t+e+t+",0"+e+"0,-"+t+e+"-"+t+",0Z"}},"diamond-tall":{n:23,f:function(e){var t=u.round(.7*e,2),e=u.round(1.4*e,2);return"M0,"+e+"L"+t+",0L0,-"+e+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=u.round(1.4*e,2),e=u.round(.7*e,2);return"M0,"+e+"L"+t+",0L0,-"+e+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){e=u.round(e,2);return"M"+e+","+e+"H-"+e+"L"+e+",-"+e+"H-"+e+"Z"},noDot:!0},bowtie:{n:26,f:function(e){e=u.round(e,2);return"M"+e+","+e+"V-"+e+"L-"+e+","+e+"V-"+e+"Z"},noDot:!0},"circle-cross":{n:27,f:function(e){e=u.round(e,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e){var t=u.round(e,2),e=u.round(e/Math.sqrt(2),2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e){e=u.round(e,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e){e=u.round(e,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e){e=u.round(1.3*e,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"ZM0,-"+e+"V"+e+"M-"+e+",0H"+e},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e){var t=u.round(1.3*e,2),e=u.round(.65*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM-"+e+",-"+e+"L"+e+","+e+"M-"+e+","+e+"L"+e+",-"+e},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e){e=u.round(1.4*e,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e){e=u.round(e,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e){var t=u.round(1.2*e,2),e=u.round(.85*e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e){var t=u.round(e/2,2),e=u.round(e,2);return"M"+t+","+e+"V-"+e+"m-"+e+",0V"+e+"M"+e+","+t+"H-"+e+"m0,-"+e+"H"+e},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e){var t=u.round(1.2*e,2),n=u.round(1.6*e,2),e=u.round(.8*e,2);return"M-"+t+","+e+"L0,0M"+t+","+e+"L0,0M0,-"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e){var t=u.round(1.2*e,2),n=u.round(1.6*e,2),e=u.round(.8*e,2);return"M-"+t+",-"+e+"L0,0M"+t+",-"+e+"L0,0M0,"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e){var t=u.round(1.2*e,2),n=u.round(1.6*e,2),e=u.round(.8*e,2);return"M"+e+","+t+"L0,0M"+e+",-"+t+"L0,0M-"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e){var t=u.round(1.2*e,2),n=u.round(1.6*e,2),e=u.round(.8*e,2);return"M-"+e+","+t+"L0,0M-"+e+",-"+t+"L0,0M"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e){e=u.round(1.4*e,2);return"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e){e=u.round(1.4*e,2);return"M0,"+e+"V-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e){e=u.round(e,2);return"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e){e=u.round(e,2);return"M"+e+","+e+"L-"+e+",-"+e},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(e){var t=u.round(e,2);return"M0,0L-"+t+","+u.round(2*e,2)+"H"+t+"Z"},noDot:!0},"arrow-down":{n:46,f:function(e){var t=u.round(e,2);return"M0,0L-"+t+",-"+u.round(2*e,2)+"H"+t+"Z"},noDot:!0},"arrow-left":{n:47,f:function(e){var t=u.round(2*e,2),e=u.round(e,2);return"M0,0L"+t+",-"+e+"V"+e+"Z"},noDot:!0},"arrow-right":{n:48,f:function(e){var t=u.round(2*e,2),e=u.round(e,2);return"M0,0L-"+t+",-"+e+"V"+e+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(e){var t=u.round(e,2);return"M-"+t+",0H"+t+"M0,0L-"+t+","+u.round(2*e,2)+"H"+t+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(e){var t=u.round(e,2);return"M-"+t+",0H"+t+"M0,0L-"+t+",-"+u.round(2*e,2)+"H"+t+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(e){var t=u.round(2*e,2),e=u.round(e,2);return"M0,-"+e+"V"+e+"M0,0L"+t+",-"+e+"V"+e+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(e){var t=u.round(2*e,2),e=u.round(e,2);return"M0,-"+e+"V"+e+"M0,0L-"+t+",-"+e+"V"+e+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":3}],671:[function(e,t,n){"use strict";t.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],672:[function(e,t,n){"use strict";var d=e("fast-isnumeric"),s=e("../../registry"),h=e("../../plots/cartesian/axes"),p=e("../../lib"),y=e("./compute_error");function l(e,t,n,r){var i=t["error_"+r]||{},o=[];if(i.visible&&-1!==["linear","log"].indexOf(n.type)){for(var a=y(i),s=0;s<e.length;s++){var l=e[s],u=l.i;if(void 0===u)u=s;else if(null===u)continue;var c,f=l[r];d(n.c2l(f))&&(c=a(f,u),d(c[0])&&d(c[1])&&(u=l[r+"s"]=f-c[0],c=l[r+"h"]=f+c[1],o.push(u,c)))}i=n._id,t=t._extremes[i],i=h.findExtremes(n,o,p.extendFlat({tozero:t.opts.tozero},{padded:!0}));t.min=t.min.concat(i.min),t.max=t.max.concat(i.max)}}t.exports=function(e){for(var t=e.calcdata,n=0;n<t.length;n++){var r,i,o=t[n],a=o[0].trace;!0===a.visible&&s.traceIs(a,"errorBarsOK")&&(r=h.getFromId(e,a.xaxis),i=h.getFromId(e,a.yaxis),l(o,a,r,"x"),l(o,a,i,"y"))}}},{"../../lib":779,"../../plots/cartesian/axes":828,"../../registry":879,"./compute_error":673,"fast-isnumeric":574}],673:[function(e,t,n){"use strict";function s(e,t){return"percent"===e?function(e){return Math.abs(e*t/100)}:"constant"===e?function(){return Math.abs(t)}:"sqrt"===e?function(e){return Math.sqrt(Math.abs(e))}:void 0}t.exports=function(e){var t=e.type,n=e.symmetric;if("data"===t){var r=e.array||[];if(n)return function(e,t){t=+r[t];return[t,t]};var i=e.arrayminus||[];return function(e,t){var n=+r[t],t=+i[t];return isNaN(n)&&isNaN(t)?[NaN,NaN]:[t||0,n||0]}}var o=s(t,e.value),a=s(t,e.valueminus);return n||void 0===e.valueminus?function(e){e=o(e);return[e,e]}:function(e){return[a(e),o(e)]}}},{}],674:[function(e,t,n){"use strict";var l=e("fast-isnumeric"),u=e("../../registry"),c=e("../../lib"),f=e("../../plot_api/plot_template"),d=e("./attributes");t.exports=function(e,t,n,r){var i="error_"+r.axis,o=f.newContainer(t,i),a=e[i]||{};function s(e,t){return c.coerce(a,o,d,e,t)}!1!==s("visible",void 0!==a.array||void 0!==a.value||"sqrt"===a.type)&&(e=!0,"sqrt"!==(i=s("type","array"in a?"data":"percent"))&&(e=s("symmetric",!(("data"===i?"arrayminus":"valueminus")in a))),"data"===i?(s("array"),s("traceref"),e||(s("arrayminus"),s("tracerefminus"))):"percent"!==i&&"constant"!==i||(s("value"),e||s("valueminus")),e="copy_"+r.inherit+"style",r.inherit&&(t["error_"+r.inherit]||{}).visible&&s(e,!(a.color||l(a.thickness)||l(a.width))),r.inherit&&o[e]||(s("color",n),s("thickness"),s("width",u.traceIs(t,"gl3d")?0:4)))}},{"../../lib":779,"../../plot_api/plot_template":817,"../../registry":879,"./attributes":671,"fast-isnumeric":574}],675:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plot_api/edit_types").overrideAll,o=e("./attributes"),a={error_x:r.extendFlat({},o),error_y:r.extendFlat({},o)};delete a.error_x.copy_zstyle,delete a.error_y.copy_zstyle,delete a.error_y.copy_ystyle;o={error_x:r.extendFlat({},o),error_y:r.extendFlat({},o),error_z:r.extendFlat({},o)};delete o.error_x.copy_ystyle,delete o.error_y.copy_ystyle,delete o.error_z.copy_ystyle,delete o.error_z.copy_zstyle,t.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:a,bar:a,histogram:a,scatter3d:i(o,"calc","nested"),scattergl:i(a,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:function(e,t,n){(t.error_y||{}).visible&&(n.yerr=e.yh-e.y,t.error_y.symmetric||(n.yerrneg=e.y-e.ys));(t.error_x||{}).visible&&(n.xerr=e.xh-e.x,t.error_x.symmetric||(n.xerrneg=e.x-e.xs))}}},{"../../lib":779,"../../plot_api/edit_types":810,"./attributes":671,"./calc":672,"./compute_error":673,"./defaults":674,"./plot":676,"./style":677}],676:[function(e,t,n){"use strict";var d=e("@plotly/d3"),h=e("fast-isnumeric"),p=e("../drawing"),y=e("../../traces/scatter/subtypes");t.exports=function(r,e,i,l){var u=i.xaxis,c=i.yaxis,f=l&&0<l.duration;e.each(function(e){var t=e[0].trace,o=t.error_x||{},a=t.error_y||{};t.ids&&(n=function(e){return e.id});var s=y.hasMarkers(t)&&0<t.marker.maxdisplayed;a.visible||o.visible||(e=[]);var n=d.select(this).selectAll("g.errorbar").data(e,n);n.exit().remove(),e.length&&(o.visible||n.selectAll("path.xerror").remove(),a.visible||n.selectAll("path.yerror").remove(),n.style("opacity",1),e=n.enter().append("g").classed("errorbar",!0),f&&e.style("opacity",0).transition().duration(l.duration).style("opacity",1),p.setClipUrl(n,i.layerClipId,r),n.each(function(e){var t,n,r=d.select(this),i=function(e,t,n){var r={x:t.c2p(e.x),y:n.c2p(e.y)};void 0!==e.yh&&(r.yh=n.c2p(e.yh),r.ys=n.c2p(e.ys),h(r.ys)||(r.noYS=!0,r.ys=n.c2p(e.ys,!0)));void 0!==e.xh&&(r.xh=t.c2p(e.xh),r.xs=t.c2p(e.xs),h(r.xs)||(r.noXS=!0,r.xs=t.c2p(e.xs,!0)));return r}(e,u,c);s&&!e.vis||(e=r.select("path.yerror"),a.visible&&h(i.x)&&h(i.yh)&&h(i.ys)?(n=a.width,t="M"+(i.x-n)+","+i.yh+"h"+2*n+"m-"+n+",0V"+i.ys,i.noYS||(t+="m-"+n+",0h"+2*n),!e.size()?e=r.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):f&&(e=e.transition().duration(l.duration).ease(l.easing)),e.attr("d",t)):e.remove(),n=r.select("path.xerror"),o.visible&&h(i.y)&&h(i.xh)&&h(i.xs)?(e=(o.copy_ystyle?a:o).width,t="M"+i.xh+","+(i.y-e)+"v"+2*e+"m0,-"+e+"H"+i.xs,i.noXS||(t+="m0,-"+e+"v"+2*e),!n.size()?n=r.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):f&&(n=n.transition().duration(l.duration).ease(l.easing)),n.attr("d",t)):n.remove())}))})}},{"../../traces/scatter/subtypes":956,"../drawing":669,"@plotly/d3":3,"fast-isnumeric":574}],677:[function(e,t,n){"use strict";var r=e("@plotly/d3"),i=e("../color");t.exports=function(e){e.each(function(e){var t=e[0].trace,n=t.error_y||{},e=t.error_x||{},t=r.select(this);t.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(i.stroke,n.color),e.copy_ystyle&&(e=n),t.selectAll("path.xerror").style("stroke-width",e.thickness+"px").call(i.stroke,e.color)})}},{"../color":647,"@plotly/d3":3}],678:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("./layout_attributes").hoverlabel,e=e("../../lib/extend").extendFlat;t.exports={hoverlabel:{bgcolor:e({},i.bgcolor,{arrayOk:!0}),bordercolor:e({},i.bordercolor,{arrayOk:!0}),font:r({arrayOk:!0,editType:"none"}),align:e({},i.align,{arrayOk:!0}),namelength:e({},i.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":772,"../../plots/font_attributes":859,"./layout_attributes":688}],679:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../registry");function u(e,t,n,r){r=r||s.identity,Array.isArray(e)&&(t[0][n]=r(e))}t.exports=function(e){var t=e.calcdata,n=e._fullLayout;for(var r=0;r<t.length;r++){var i,o=t[r],a=o[0].trace;l.traceIs(a,"pie-like")||((i=l.traceIs(a,"2dMap")?u:s.fillArray)(a.hoverinfo,o,"hi",function(t){return function(e){return s.coerceHoverinfo({hoverinfo:e},{_module:t._module},n)}}(a)),a.hovertemplate&&i(a.hovertemplate,o,"ht"),a.hoverlabel&&(i(a.hoverlabel.bgcolor,o,"hbg"),i(a.hoverlabel.bordercolor,o,"hbc"),i(a.hoverlabel.font.size,o,"hts"),i(a.hoverlabel.font.color,o,"htc"),i(a.hoverlabel.font.family,o,"htf"),i(a.hoverlabel.namelength,o,"hnl"),i(a.hoverlabel.align,o,"hta")))}}},{"../../lib":779,"../../registry":879}],680:[function(e,t,n){"use strict";var o=e("../../registry"),a=e("./hover").hover;t.exports=function(e,t,n){var r=o.getComponentMethod("annotations","onClick")(e,e._hoverdata);function i(){e.emit("plotly_click",{points:e._hoverdata,event:t})}void 0!==n&&a(e,t,n,!0),e._hoverdata&&t&&t.target&&(r&&r.then?r.then(i):i(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},{"../../registry":879,"./hover":684}],681:[function(e,t,n){"use strict";t.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],682:[function(e,t,n){"use strict";var i=e("../../lib"),o=e("./attributes"),a=e("./hoverlabel_defaults");t.exports=function(n,r,e,t){t=i.extendFlat({},t.hoverlabel);r.hovertemplate&&(t.namelength=-1),a(n,r,function(e,t){return i.coerce(n,r,o,e,t)},t)}},{"../../lib":779,"./attributes":678,"./hoverlabel_defaults":685}],683:[function(e,t,a){"use strict";var c=e("../../lib");a.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo},a.isTraceInSubplots=function(e,t){if("splom"!==e.type)return-1!==t.indexOf(a.getSubplot(e));for(var n=e.xaxes||[],r=e.yaxes||[],i=0;i<n.length;i++)for(var o=0;o<r.length;o++)if(-1!==t.indexOf(n[i]+r[o]))return!0;return!1},a.flat=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=t;return n},a.p2c=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r].p2c(t);return n},a.getDistanceFunction=function(e,t,n,r){return"closest"===e?r||a.quadrature(t,n):"x"===e.charAt(0)?t:n},a.getClosest=function(e,t,n){if(!1!==n.index)0<=n.index&&n.index<e.length?n.distance=0:n.index=!1;else for(var r=0;r<e.length;r++){var i=t(e[r]);i<=n.distance&&(n.index=r,n.distance=i)}return n},a.inbox=function(e,t,n){return e*t<0||0===e?n:1/0},a.quadrature=function(n,r){return function(e){var t=n(e),e=r(e);return Math.sqrt(t*t+e*e)}},a.makeEventData=function(e,t,n){var r,i="index"in e?e.index:e.pointNumber,o={data:t._input,fullData:t,curveNumber:t.index,pointNumber:i};return t._indexToPoints?1===(r=t._indexToPoints[i]).length?o.pointIndex=r[0]:o.pointIndices=r:o.pointIndex=i,t._module.eventData?o=t._module.eventData(o,e,t,n,i):("xVal"in e?o.x=e.xVal:"x"in e&&(o.x=e.x),"yVal"in e?o.y=e.yVal:"y"in e&&(o.y=e.y),e.xa&&(o.xaxis=e.xa),e.ya&&(o.yaxis=e.ya),void 0!==e.zLabelVal&&(o.z=e.zLabelVal)),a.appendArrayPointValue(o,t,i),o},a.appendArrayPointValue=function(e,t,n){var r=t._arrayAttrs;if(r)for(var i=0;i<r.length;i++){var o=r[i],a=f(o);void 0!==e[a]||void 0!==(o=d(c.nestedProperty(t,o).get(),n))&&(e[a]=o)}},a.appendArrayMultiPointValues=function(e,t,n){var r=t._arrayAttrs;if(r)for(var i=0;i<r.length;i++){var o=r[i],a=f(o);if(void 0===e[a]){for(var s=c.nestedProperty(t,o).get(),l=new Array(n.length),u=0;u<n.length;u++)l[u]=d(s,n[u]);e[a]=l}}};var n={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function f(e){return n[e]||e}function d(e,t){return Array.isArray(t)?Array.isArray(e)&&Array.isArray(e[t[0]])?e[t[0]][t[1]]:void 0:e[t]}var r={x:!0,y:!0},i={"x unified":!0,"y unified":!0};a.isUnifiedHover=function(e){return"string"==typeof e&&!!i[e]},a.isXYhover=function(e){return"string"==typeof e&&!!r[e]}},{"../../lib":779}],684:[function(e,t,n){"use strict";var ue=e("@plotly/d3"),ce=e("fast-isnumeric"),_=e("tinycolor2"),fe=e("../../lib"),N=fe.strTranslate,F=fe.strRotate,de=e("../../lib/events"),B=e("../../lib/svg_text_utils"),he=e("../../lib/override_cursor"),U=e("../drawing"),pe=e("../color"),ye=e("../dragelement"),ge=e("../../plots/cartesian/axes"),ve=e("../../registry"),me=e("./helpers"),q=e("./constants"),H=e("../legend/defaults"),V=e("../legend/draw"),G=q.YANGLE,e=Math.PI*G/180,be=1/Math.sin(e),v=Math.cos(e),m=Math.sin(e),W=q.HOVERARROWSIZE,Y=q.HOVERTEXTPAD,xe={box:!0,ohlc:!0,violin:!0,candlestick:!0},_e={scatter:!0,scattergl:!0,splom:!0};function we(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa?e.xa._id:"",e.ya?e.ya._id:""].join(",")}n.hover=function(e,t,n,r){e=fe.getGraphDiv(e);var i=t.target;fe.throttle(e._fullLayout._uid+q.HOVERID,q.HOVERMINTIME,function(){!function(e,l,t,n,r){t=t||"xy";var u=Array.isArray(t)?t:[t],c=e._fullLayout,i=c._plots||[],t=i[t],f=c._has("cartesian");t&&(t=t.overlays.map(function(e){return e.id}),u=u.concat(t));for(var o=u.length,d=new Array(o),h=new Array(o),a=!1,s=0;s<o;s++){var p=u[s];if(i[p])a=!0,d[s]=i[p].xaxis,h[s]=i[p].yaxis;else{if(!c[p]||!c[p]._subplot)return fe.warn("Unrecognized subplot: "+p);p=c[p]._subplot;d[s]=p.xaxis,h[s]=p.yaxis}}var y=l.hovermode||c.hovermode;y&&!a&&(y="closest");if(-1===["x","y","closest","x unified","y unified"].indexOf(y)||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return ye.unhoverRaw(e,l);var g=c.hoverdistance;-1===g&&(g=1/0);var v=c.spikedistance;-1===v&&(v=1/0);var m,b,x,_,w,M,j,k,O,A,T,P,S,E=[],C=[],L={hLinePoint:null,vLinePoint:null},R=!1;if(Array.isArray(l))for(y="array",x=0;x<l.length;x++)(w=e.calcdata[l[x].curveNumber||0])&&(M=w[0].trace,"skip"!==w[0].trace.hoverinfo&&(C.push(w),"h"===M.orientation&&(R=!0)));else{for(_=0;_<e.calcdata.length;_++)w=e.calcdata[_],"skip"!==(M=w[0].trace).hoverinfo&&me.isTraceInSubplots(M,u)&&(C.push(w),"h"===M.orientation&&(R=!0));if(!r)B="xpx"in l?l.xpx:d[0]._length/2,U="ypx"in l?l.ypx:h[0]._length/2;else{if(!1===de.triggerHandler(e,"plotly_beforehover",l))return;var I=r.getBoundingClientRect();B=l.clientX-I.left,U=l.clientY-I.top,c._calcInverseTransform(e);I=fe.apply3DTransform(c._invTransform)(B,U);if(B=I[0],U=I[1],B<0||B>d[0]._length||U<0||U>h[0]._length)return ye.unhoverRaw(e,l)}if(l.pointerX=B+d[0]._offset,l.pointerY=U+h[0]._offset,m="xval"in l?me.flat(u,l.xval):me.p2c(d,B),b="yval"in l?me.flat(u,l.yval):me.p2c(h,U),!ce(m[0])||!ce(b[0]))return fe.warn("Fx.hover failed",l,e),ye.unhoverRaw(e,l)}var z=1/0;function D(e,t){for(_=0;_<C.length;_++)if((w=C[_])&&w[0]&&w[0].trace&&!0===(M=w[0].trace).visible&&0!==M._length&&-1===["carpet","contourcarpet"].indexOf(M._module.name)){var n,r,i;if("splom"===M.type?j=u[k=0]:(j=me.getSubplot(M),k=u.indexOf(j)),O=y,me.isUnifiedHover(O)&&(O=O.charAt(0)),P={cd:w,trace:M,xa:d[k],ya:h[k],maxHoverDistance:g,maxSpikeDistance:v,index:!1,distance:Math.min(z,g),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:pe.defaultLine,name:M.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},c[j]&&(P.subplot=c[j]._subplot),c._splomScenes&&c._splomScenes[M.uid]&&(P.scene=c._splomScenes[M.uid]),S=E.length,"array"===O?"pointNumber"in(r=l[_])?(P.index=r.pointNumber,O="closest"):(O="","xval"in r&&(A=r.xval,O="x"),"yval"in r&&(T=r.yval,O=O?"closest":"y")):T=void 0!==e&&void 0!==t?(A=e,t):(A=m[k],b[k]),0!==g)if(M._module&&M._module.hoverPoints){var o=M._module.hoverPoints(P,A,T,O,{finiteRange:!0,hoverLayer:c._hoverlayer});if(o)for(var a,s=0;s<o.length;s++)a=o[s],ce(a.x0)&&ce(a.y0)&&E.push(function(r,e){var n=r.index,i=r.trace||{},o=r.cd[0],a=r.cd[n]||{};function s(e){return e||ce(e)&&0===e}var l=Array.isArray(n)?function(e,t){e=fe.castOption(o,n,e);return s(e)?e:fe.extractOption({},i,"",t)}:function(e,t){return fe.extractOption(a,i,e,t)};function t(e,t,n){n=l(t,n);s(n)&&(r[e]=n)}t("hoverinfo","hi","hoverinfo"),t("bgcolor","hbg","hoverlabel.bgcolor"),t("borderColor","hbc","hoverlabel.bordercolor"),t("fontFamily","htf","hoverlabel.font.family"),t("fontSize","hts","hoverlabel.font.size"),t("fontColor","htc","hoverlabel.font.color"),t("nameLength","hnl","hoverlabel.namelength"),t("textAlign","hta","hoverlabel.align"),r.posref="y"===e||"closest"===e&&"h"===i.orientation?r.xa._offset+(r.x0+r.x1)/2:r.ya._offset+(r.y0+r.y1)/2,r.x0=fe.constrain(r.x0,0,r.xa._length),r.x1=fe.constrain(r.x1,0,r.xa._length),r.y0=fe.constrain(r.y0,0,r.ya._length),r.y1=fe.constrain(r.y1,0,r.ya._length),void 0!==r.xLabelVal&&(r.xLabel="xLabel"in r?r.xLabel:ge.hoverLabelText(r.xa,r.xLabelVal,i.xhoverformat),r.xVal=r.xa.c2d(r.xLabelVal));void 0!==r.yLabelVal&&(r.yLabel="yLabel"in r?r.yLabel:ge.hoverLabelText(r.ya,r.yLabelVal,i.yhoverformat),r.yVal=r.ya.c2d(r.yLabelVal));void 0!==r.zLabelVal&&void 0===r.zLabel&&(r.zLabel=String(r.zLabelVal));isNaN(r.xerr)||"log"===r.xa.type&&r.xerr<=0||(u=ge.tickText(r.xa,r.xa.c2l(r.xerr),"hover").text,void 0!==r.xerrneg?r.xLabel+=" +"+u+" / -"+ge.tickText(r.xa,r.xa.c2l(r.xerrneg),"hover").text:r.xLabel+=" ± "+u,"x"===e&&(r.distance+=1));{var u;isNaN(r.yerr)||"log"===r.ya.type&&r.yerr<=0||(u=ge.tickText(r.ya,r.ya.c2l(r.yerr),"hover").text,void 0!==r.yerrneg?r.yLabel+=" +"+u+" / -"+ge.tickText(r.ya,r.ya.c2l(r.yerrneg),"hover").text:r.yLabel+=" ± "+u,"y"===e&&(r.distance+=1))}e=r.hoverinfo||r.trace.hoverinfo;e&&"all"!==e&&(-1===(e=Array.isArray(e)?e:e.split("+")).indexOf("x")&&(r.xLabel=void 0),-1===e.indexOf("y")&&(r.yLabel=void 0),-1===e.indexOf("z")&&(r.zLabel=void 0),-1===e.indexOf("text")&&(r.text=void 0),-1===e.indexOf("name")&&(r.name=void 0));return r}(a,y))}else fe.log("Unrecognized trace type in hover:",M);"closest"===y&&E.length>S&&(E.splice(0,S),z=E[0].distance),f&&0!==v&&0===E.length&&(P.distance=v,P.index=!1,(i=(i=M._module.hoverPoints(P,A,T,"closest",{hoverLayer:c._hoverlayer}))&&i.filter(function(e){return e.spikeDistance<=v}))&&i.length&&((r=i.filter(function(e){return e.xa.showspikes&&"hovered data"!==e.xa.spikesnap})).length&&(r=r[0],ce(r.x0)&&ce(r.y0)&&(n=F(r),(!L.vLinePoint||L.vLinePoint.spikeDistance>n.spikeDistance)&&(L.vLinePoint=n))),(i=i.filter(function(e){return e.ya.showspikes&&"hovered data"!==e.ya.spikesnap})).length&&(i=i[0],ce(i.x0)&&ce(i.y0)&&(n=F(i),(!L.hLinePoint||L.hLinePoint.spikeDistance>n.spikeDistance)&&(L.hLinePoint=n)))))}}function N(e,t,n){for(var r,i=null,o=1/0,a=0;a<e.length;a++)r=e[a].spikeDistance,(r=n&&0===a?-1/0:r)<=o&&r<=t&&(i=e[a],o=r);return i}function F(e){return e?{xa:e.xa,ya:e.ya,x:void 0!==e.xSpike?e.xSpike:(e.x0+e.x1)/2,y:void 0!==e.ySpike?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}:null}D();var I={fullLayout:c,container:c._hoverlayer,event:l},B=e._spikepoints,U={vLinePoint:L.vLinePoint,hLinePoint:L.hLinePoint};e._spikepoints=U;function q(){E.sort(function(e,t){return e.distance-t.distance}),E=function(e,t){for(var n=t.charAt(0),r=[],i=[],o=[],a=0;a<e.length;a++){var s=e[a];(ve.traceIs(s.trace,"bar-like")||ve.traceIs(s.trace,"box-violin")?o:s.trace[n+"period"]?i:r).push(s)}return r.concat(i).concat(o)}(E,y)}q();var H,U=y.charAt(0),U=("x"===U||"y"===U)&&E[0]&&_e[E[0].trace.type];f&&0!==v&&0!==E.length&&(V=N(E.filter(function(e){return e.ya.showspikes}),v,U),L.hLinePoint=F(V),V=N(E.filter(function(e){return e.xa.showspikes}),v,U),L.vLinePoint=F(V));if(0===E.length){var V=ye.unhoverRaw(e,l);return!f||null===L.hLinePoint&&null===L.vLinePoint||Oe(B)&&ke(e,L,I)}f&&Oe(B)&&ke(e,L,I);if(me.isXYhover(O)&&0!==E[0].length&&"splom"!==E[0].trace.type){var G=E[0],W=(E=xe[G.trace.type]?E.filter(function(e){return e.trace.index===G.trace.index}):[G]).length,Y=Ae("x",G,c),X=Ae("y",G,c);D(Y,X);var Z=[],$={},K=0,Q=function(e){var t,n,r=xe[e.trace.type]?we(e):e.trace.index;$[r]?(t=$[r]-1,n=Z[t],0<t&&Math.abs(e.distance)<Math.abs(n.distance)&&(Z[t]=e)):(K++,$[r]=K,Z.push(e))};for(H=0;H<W;H++)Q(E[H]);for(H=E.length-1;W-1<H;H--)Q(E[H]);E=Z,q()}var I=e._hoverdata,J=[],ee=Te(e),te=Pe(e);for(x=0;x<E.length;x++){var ne,re,ie,oe,ae,se=E[x],le=me.makeEventData(se,se.trace,se.cd);!1!==se.hovertemplate&&(re=!1,se.cd[se.index]&&se.cd[se.index].ht&&(re=se.cd[se.index].ht),se.hovertemplate=re||se.trace.hovertemplate||!1),se.xa&&se.ya&&(ie=se.x0+se.xa._offset,oe=se.x1+se.xa._offset,ne=se.y0+se.ya._offset,ae=se.y1+se.ya._offset,re=Math.min(ie,oe),ie=Math.max(ie,oe),oe=Math.min(ne,ae),ae=Math.max(ne,ae),le.bbox={x0:re+te,x1:ie+te,y0:oe+ee,y1:ae+ee}),se.eventData=[le],J.push(le)}e._hoverdata=J;Y="y"===y&&(1<C.length||1<E.length)||"closest"===y&&R&&1<E.length,X=pe.combine(c.plot_bgcolor||pe.background,c.paper_bgcolor),X=Me(E,{gd:e,hovermode:y,rotateLabels:Y,bgColor:X,container:c._hoverlayer,outerContainer:c._paper.node(),commonLabelOpts:c.hoverlabel,hoverdistance:c.hoverdistance});me.isUnifiedHover(y)||(function(e,r,i){var o,a,s,l,u,c,t,n=0,f=1,d=e.size(),h=new Array(d),p=0;function y(e){var t=e[0],n=e[e.length-1];if(a=t.pmin-t.pos-t.dp+t.size,s=n.pos+n.dp+n.size-t.pmax,.01<a){for(u=e.length-1;0<=u;u--)e[u].dp+=a;o=!1}if(!(s<.01)){if(a<-.01){for(u=e.length-1;0<=u;u--)e[u].dp-=s;o=!1}if(o){var r=0;for(l=0;l<e.length;l++)(c=e[l]).pos+c.dp+c.size>t.pmax&&r++;for(l=e.length-1;0<=l&&!(r<=0);l--)(c=e[l]).pos>t.pmax-1&&(c.del=!0,r--);for(l=0;l<e.length&&!(r<=0);l++)if((c=e[l]).pos<t.pmin+1)for(c.del=!0,r--,s=2*c.size,u=e.length-1;0<=u;u--)e[u].dp-=s;for(l=e.length-1;0<=l&&!(r<=0);l--)(c=e[l]).pos+c.dp+c.size>t.pmax&&(c.del=!0,r--)}}}e.each(function(e){var t=e[r],n="x"===t._id.charAt(0),t=t.range;0===p&&t&&t[0]>t[1]!=n&&(f=-1),h[p++]=[{datum:e,traceIndex:e.trace.index,dp:0,pos:e.pos,posref:e.posref,size:e.by*(n?be:1)/2,pmin:0,pmax:n?i.width:i.height}]}),h.sort(function(e,t){return e[0].posref-t[0].posref||f*(t[0].traceIndex-e[0].traceIndex)});for(;!o&&n<=d;){for(n++,o=!0,l=0;l<h.length-1;){var g=h[l],v=h[l+1],m=g[g.length-1],b=v[0];if(.01<(a=m.pos+m.dp+m.size-b.pos-b.dp+b.size)&&m.pmin===b.pmin&&m.pmax===b.pmax){for(u=v.length-1;0<=u;u--)v[u].dp+=a;for(g.push.apply(g,v),h.splice(l+1,1),t=0,u=g.length-1;0<=u;u--)t+=g[u].dp;for(s=t/g.length,u=g.length-1;0<=u;u--)g[u].dp-=s;o=!1}else l++}h.forEach(y)}for(l=h.length-1;0<=l;l--){var x=h[l];for(u=x.length-1;0<=u;u--){var _=x[u],w=_.datum;w.offset=_.dp,w.del=_.del}}}(X,Y?"xa":"ya",c),je(X,Y,c._invScaleX,c._invScaleY));r&&r.tagName&&(Y=ve.getComponentMethod("annotations","hasClickToShow")(e,J),he(ue.select(r),Y?"pointer":""));r&&!n&&function(e,t){if(!t||t.length!==e._hoverdata.length)return!0;for(var n=t.length-1;0<=n;n--){var r=t[n],i=e._hoverdata[n];if(r.curveNumber!==i.curveNumber||String(r.pointNumber)!==String(i.pointNumber)||String(r.pointNumbers)!==String(i.pointNumbers))return!0}return!1}(e,I)&&(I&&e.emit("plotly_unhover",{event:l,points:I}),e.emit("plotly_hover",{event:l,points:e._hoverdata,xaxes:d,yaxes:h,xvals:m,yvals:b}))}(e,t,n,r,i)})},n.loneHover=function(e,l){var t=!0;Array.isArray(e)||(t=!1,e=[e]);var u=l.gd,c=Te(u),f=Pe(u),e=Me(e.map(function(e){var t,n,r=e._x0||e.x0||e.x||0,i=e._x1||e.x1||e.x||0,o=e._y0||e.y0||e.y||0,a=e._y1||e.y1||e.y||0,s=e.eventData;return s?(t=Math.min(r,i),n=Math.max(r,i),r=Math.min(o,a),i=Math.max(o,a),o=e.trace,ve.traceIs(o,"gl3d")&&(t+=o=(a=u._fullLayout[o.scene]._scene.container).offsetLeft,n+=o,r+=a=a.offsetTop,i+=a),s.bbox={x0:t+f,x1:n+f,y0:r+c,y1:i+c},l.inOut_bbox&&l.inOut_bbox.push(s.bbox)):s=!1,{color:e.color||pe.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,nameLength:e.nameLength,textAlign:e.textAlign,trace:e.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:e.hovertemplate||!1,hovertemplateLabels:e.hovertemplateLabels||!1,eventData:s}}),{gd:u,hovermode:"closest",rotateLabels:!1,bgColor:l.bgColor||pe.background,container:ue.select(l.container),outerContainer:l.outerContainer||l.container}),r=0,i=0;return e.sort(function(e,t){return e.y0-t.y0}).each(function(e,t){var n=e.y0-e.by/2;e.offset=n-5<r?r-n+5:0,r=n+e.by+e.offset,t===l.anchorIndex&&(i=e.offset)}).each(function(e){e.offset-=i}),je(e,!1,u._fullLayout._invScaleX,u._fullLayout._invScaleY),t?e:e.node()};var l=/<extra>([\s\S]*)<\/extra>/;function Me(e,t){var g=t.gd,v=g._fullLayout,m=t.hovermode,y=t.rotateLabels,b=t.bgColor,n=t.container,r=t.outerContainer,x=t.commonLabelOpts||{};if(0===e.length)return[[]];var _=t.fontFamily||q.HOVERFONT,w=t.fontSize||q.HOVERFONTSIZE,M=e[0],j=M.xa,k=M.ya,i=m.charAt(0),O=M[i+"Label"],o=Z(g,r),A=o.top,T=o.width,P=o.height,S=void 0!==O&&M.distance<=t.hoverdistance&&("x"===m||"y"===m);if(S){for(var a=!0,s=0;s<e.length;s++)if(a&&void 0===e[s].zLabel&&(a=!1),l=e[s].hoverinfo||e[s].trace.hoverinfo){var l=Array.isArray(l)?l:l.split("+");if(-1===l.indexOf("all")&&-1===l.indexOf(m)){S=!1;break}}a&&(S=!1)}var u=n.selectAll("g.axistext").data(S?[0]:[]);if(u.enter().append("g").classed("axistext",!0),u.exit().remove(),u.each(function(){var e=ue.select(this),t=fe.ensureSingle(e,"path","",function(e){e.style({"stroke-width":"1px"})}),n=fe.ensureSingle(e,"text","",function(e){e.attr("data-notex",1)}),r=x.bgcolor||pe.defaultLine,i=x.bordercolor||pe.contrast(r),o=pe.contrast(r),a={family:x.font.family||_,size:x.font.size||w,color:x.font.color||o};t.style({fill:r,stroke:i}),n.text(O).call(U.font,a).call(B.positionText,0,0).call(B.convertToTspans,g),e.attr("transform","");var s,l,u,c,f,d,h,p,y=Z(g,n.node());"x"===m?(f="top"===j.side?"-":"",n.attr("text-anchor","middle").call(B.positionText,0,"top"===j.side?A-y.bottom-W-Y:A-y.top+W+Y),s=j._offset+(M.x0+M.x1)/2,l=k._offset+("top"===j.side?0:k._length),s<(i=y.width/2+Y)?t.attr("d","M-"+((s=i)-W)+",0L-"+(i-2*W)+","+f+W+"H"+(Y+y.width/2)+"v"+f+(2*Y+y.height)+"H-"+i+"V"+f+W+"Z"):s>v.width-i?(s=v.width-i,t.attr("d","M"+(i-W)+",0L"+i+","+f+W+"v"+f+(2*Y+y.height)+"H-"+i+"V"+f+W+"H"+(i-2*W)+"Z")):t.attr("d","M0,0L"+W+","+f+W+"H"+(Y+y.width/2)+"v"+f+(2*Y+y.height)+"H-"+(Y+y.width/2)+"V"+f+W+"H-"+W+"Z")):(s="right"===k.side?(u="start",c=1,d="",j._offset+j._length):(u="end",c=-1,d="-",j._offset),l=k._offset+(M.y0+M.y1)/2,n.attr("text-anchor",u),t.attr("d","M0,0L"+d+W+","+W+"V"+(Y+y.height/2)+"h"+d+(2*Y+y.width)+"V-"+(Y+y.height/2)+"H"+d+W+"V-"+W+"Z"),f=y.height/2,t=A-y.top-f,d="clip"+v._uid+"commonlabel"+k._id,s<y.width+2*Y+W?(h="M-"+(W+Y)+"-"+f+"h-"+(y.width-Y)+"V"+f+"h"+(y.width-Y)+"Z",p=y.width-s+Y,B.positionText(n,p,t),"end"===u&&n.selectAll("tspan").each(function(){var e=ue.select(this),t=U.tester.append("text").text(e.text()).call(U.font,a),n=Z(g,t.node());Math.round(n.width)<Math.round(y.width)&&e.attr("x",p-n.width),t.remove()})):(B.positionText(n,c*(Y+W),t),h=null),(t=v._topclips.selectAll("#"+d).data(h?[0]:[])).enter().append("clipPath").attr("id",d).append("path"),t.exit().remove(),t.select("path").attr("d",h),U.setClipUrl(n,h?d:null,g)),e.attr("transform",N(s,l))}),me.isUnifiedHover(m)){n.selectAll("g.hovertext").remove();var c=e.filter(function(e){return"none"!==e.hoverinfo});if(0===c.length)return;var f=v.hoverlabel,d=f.font,r={showlegend:!0,legend:{title:{text:O,font:d},font:d,bgcolor:f.bgcolor,bordercolor:f.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:v.legend?v.legend.traceorder:void 0,orientation:"v"}},o={font:d};H(r,o,g._fullData);var h=o.legend;h.entries=[];for(var p=0;p<c.length;p++){var E,C,L=c[p];"none"!==L.hoverinfo&&(C=(E=X(L,!0,m,v,O))[0],E=E[1],L.name=E,L.text=""!==E?E+" : "+C:C,(C=L.cd[L.index])&&(C.mc&&(L.mc=C.mc),C.mcc&&(L.mc=C.mcc),C.mlc&&(L.mlc=C.mlc),C.mlcc&&(L.mlc=C.mlcc),C.mlw&&(L.mlw=C.mlw),C.mrc&&(L.mrc=C.mrc),C.dir&&(L.dir=C.dir)),L._distinct=!0,h.entries.push([L]))}h.entries.sort(function(e,t){return e[0].trace.index-t[0].trace.index}),h.layer=n,h._inHover=!0,h._groupTitleFont=f.grouptitlefont,V(g,h);var R,I,z,D,t=n.select("g.legend"),u=Z(g,t.node()),d=u.width+2*Y,r=u.height+2*Y,o=c[0],f=(o.x0+o.x1)/2,u=(o.y0+o.y1)/2,o=!(ve.traceIs(o.trace,"bar-like")||ve.traceIs(o.trace,"box-violin"));"y"===i?R=o?(I=u-Y,u+Y):(I=Math.min.apply(null,c.map(function(e){return Math.min(e.y0,e.y1)})),Math.max.apply(null,c.map(function(e){return Math.max(e.y0,e.y1)}))):I=R=fe.mean(c.map(function(e){return(e.y0+e.y1)/2}))-r/2,"x"===i?D=o?(z=f+Y,f-Y):(z=Math.max.apply(null,c.map(function(e){return Math.max(e.x0,e.x1)})),Math.min.apply(null,c.map(function(e){return Math.min(e.x0,e.x1)}))):z=D=fe.mean(c.map(function(e){return(e.x0+e.x1)/2}))-d/2;i=j._offset,o=k._offset;return D+=i-d,I+=o-r,d=(z+=i)+d<T&&0<=z?z:D+d<T&&0<=D?D:i+d<T?i:z-f<f-D+d?T-d:0,r=(R+=o)+r<P&&0<=R?R:I+r<P&&0<=I?I:o+r<P?o:R-u<u-I+r?P-r:0,t.attr("transform",N((d+=Y)-1,(r+=Y)-1)),t}n=n.selectAll("g.hovertext").data(e,we);return n.enter().append("g").classed("hovertext",!0).each(function(){var e=ue.select(this);e.append("rect").call(pe.fill,pe.addOpacity(b,.8)),e.append("text").classed("name",!0),e.append("path").style("stroke-width","1px"),e.append("text").classed("nums",!0).call(U.font,_,w)}),n.exit().remove(),n.each(function(e){var t=ue.select(this).attr("transform",""),n=e.color;Array.isArray(n)&&(n=n[e.eventData[0].pointNumber]);var r=e.bgcolor||n,i=pe.combine(pe.opacity(r)?r:pe.defaultLine,b),o=pe.combine(pe.opacity(n)?n:pe.defaultLine,b),a=e.borderColor||pe.contrast(i),s=X(e,S,m,v,O,t),l=s[0],u=s[1],c=t.select("text.nums").call(U.font,e.fontFamily||_,e.fontSize||w,e.fontColor||a).text(l).attr("data-notex",1).call(B.positionText,0,0).call(B.convertToTspans,g),f=t.select("text.name"),r=0,n=0;u&&u!==l?(f.call(U.font,e.fontFamily||_,e.fontSize||w,o).text(u).attr("data-notex",1).call(B.positionText,0,0).call(B.convertToTspans,g),r=(d=Z(g,f.node())).width+2*Y,n=d.height+2*Y):(f.remove(),t.select("rect").remove()),t.select("path").style({fill:i,stroke:a});var s=e.xa._offset+(e.x0+e.x1)/2,l=e.ya._offset+(e.y0+e.y1)/2,o=Math.abs(e.x1-e.x0),u=Math.abs(e.y1-e.y0),d=Z(g,c.node()),i=d.width/v._invScaleX,a=d.height/v._invScaleY;e.ty0=(A-d.top)/v._invScaleY,e.bx=i+2*Y,e.by=Math.max(a+2*Y,n),e.anchor="start",e.txwidth=i,e.tx2width=r,e.offset=0;var h,p,i=(i+W+Y+r)*v._invScaleX;y?(e.pos=s,p=l+u/2+i<=P,h=0<=l-u/2-i,"top"!==e.idealAlign&&p||!h?p?(l+=u/2,e.anchor="start"):e.anchor="middle":(l-=u/2,e.anchor="end")):(e.pos=l,p=s+o/2+i<=T,h=0<=s-o/2-i,"left"!==e.idealAlign&&p||!h?p?(s+=o/2,e.anchor="start"):(e.anchor="middle",i=s-(p=i/2),0<(p=s+p-T)&&(s-=p),i<0&&(s+=-i)):(s-=o/2,e.anchor="end")),c.attr("text-anchor",e.anchor),r&&f.attr("text-anchor",e.anchor),t.attr("transform",N(s,l)+(y?F(G):""))}),n}function X(n,e,t,r,i,o){var a="",s="";void 0!==n.nameOverride&&(n.name=n.nameOverride),n.name&&(n.trace._meta&&(n.name=fe.templateString(n.name,n.trace._meta)),a=u(n.name,n.nameLength));t=t.charAt(0);void 0!==n.zLabel?(void 0!==n.xLabel&&(s+="x: "+n.xLabel+"<br>"),void 0!==n.yLabel&&(s+="y: "+n.yLabel+"<br>"),"choropleth"!==n.trace.type&&"choroplethmapbox"!==n.trace.type&&(s+=(s?"z: ":"")+n.zLabel)):e&&n[t+"Label"]===i?s=n[("x"===t?"y":"x")+"Label"]||"":void 0===n.xLabel?void 0!==n.yLabel&&"scattercarpet"!==n.trace.type&&(s=n.yLabel):s=void 0===n.yLabel?n.xLabel:"("+n.xLabel+", "+n.yLabel+")",!n.text&&0!==n.text||Array.isArray(n.text)||(s+=(s?"<br>":"")+n.text),void 0!==n.extraText&&(s+=(s?"<br>":"")+n.extraText),o&&""===s&&!n.hovertemplate&&(""===a&&o.remove(),s=a);e=n.hovertemplate||!1;return e&&(o=n.hovertemplateLabels||n,n[t+"Label"]!==i&&(o[t+"other"]=o[t+"Val"],o[t+"otherLabel"]=o[t+"Label"]),s=(s=fe.hovertemplateString(e,o,r._d3locale,n.eventData[0]||{},n.trace._meta)).replace(l,function(e,t){return a=u(t,n.nameLength),""})),[s,a]}function je(e,d,h,p){function y(e){return e*h}function g(e){return e*p}e.each(function(e){var t=ue.select(this);if(e.del)return t.remove();var n=t.select("text.nums"),r=e.anchor,i="end"===r?-1:1,o={start:1,end:-1,middle:0}[r],a=o*(W+Y),s=a+o*(e.txwidth+Y),l=0,u=e.offset,c="middle"===r;c&&(a-=e.tx2width/2,s+=e.txwidth/2+Y),d&&(u*=-m,l=e.offset*v),t.select("path").attr("d",c?"M-"+y(e.bx/2+e.tx2width/2)+","+g(u-e.by/2)+"h"+y(e.bx)+"v"+g(e.by)+"h-"+y(e.bx)+"Z":"M0,0L"+y(i*W+l)+","+g(W+u)+"v"+g(e.by/2-W)+"h"+y(i*e.bx)+"v-"+g(e.by)+"H"+y(i*W+l)+"V"+g(u-W)+"Z");var f=l+a,i=u+e.ty0-e.by/2+Y,a=e.textAlign||"auto";"auto"!==a&&("left"===a&&"start"!==r?(n.attr("text-anchor","start"),f=c?-e.bx/2-e.tx2width/2+Y:-e.bx-Y):"right"===a&&"end"!==r&&(n.attr("text-anchor","end"),f=c?e.bx/2-e.tx2width/2-Y:e.bx+Y)),n.call(B.positionText,f*h,i*p),e.tx2width&&(t.select("text.name").call(B.positionText,y(s+o*Y+l),g(u+e.ty0-e.by/2+Y)),t.select("rect").call(U.setRect,y(s+(o-1)*e.tx2width/2+l),g(u-e.by/2-1),y(e.tx2width),g(e.by+2)))})}function ke(e,t,n){var r,i,o,a,s,l,u,c,f,d,h,p,y=n.container,g=n.fullLayout,v=g._size,m=n.event,b=!!t.hLinePoint,x=!!t.vLinePoint;y.selectAll(".spikeline").remove(),(x||b)&&(r=pe.combine(g.plot_bgcolor,g.paper_bgcolor),b&&(i=(a=t.hLinePoint)&&a.xa,o="cursor"===(f=a&&a.ya).spikesnap?(u=m.pointerX,m.pointerY):(u=i._offset+a.x,f._offset+a.y),n=_.readability(a.color,r)<1.5?pe.contrast(r):a.color,g=f.spikemode,b=f.spikethickness,d=f.spikecolor||n,a=ge.getPxPosition(e,f),-1===g.indexOf("toaxis")&&-1===g.indexOf("across")||(-1!==g.indexOf("toaxis")&&(s=a,l=u),-1!==g.indexOf("across")&&(n=f._counterDomainMin,u=f._counterDomainMax,"free"===f.anchor&&(n=Math.min(n,f.position),u=Math.max(u,f.position)),s=v.l+n*v.w,l=v.l+u*v.w),y.insert("line",":first-child").attr({x1:s,x2:l,y1:o,y2:o,"stroke-width":b,stroke:d,"stroke-dasharray":U.dashStyle(f.spikedash,b)}).classed("spikeline",!0).classed("crisp",!0),y.insert("line",":first-child").attr({x1:s,x2:l,y1:o,y2:o,"stroke-width":b+2,stroke:r}).classed("spikeline",!0).classed("crisp",!0)),-1!==g.indexOf("marker")&&y.insert("circle",":first-child").attr({cx:a+("right"!==f.side?b:-b),cy:o,r:b,fill:d}).classed("spikeline",!0)),x&&(i=(d=t.vLinePoint)&&d.xa,f=d&&d.ya,x="cursor"===i.spikesnap?(c=m.pointerX,m.pointerY):(c=i._offset+d.x,f._offset+d.y),t=_.readability(d.color,r)<1.5?pe.contrast(r):d.color,m=i.spikemode,f=i.spikethickness,d=i.spikecolor||t,t=ge.getPxPosition(e,i),-1===m.indexOf("toaxis")&&-1===m.indexOf("across")||(-1!==m.indexOf("toaxis")&&(h=t,p=x),-1!==m.indexOf("across")&&(e=i._counterDomainMin,x=i._counterDomainMax,"free"===i.anchor&&(e=Math.min(e,i.position),x=Math.max(x,i.position)),h=v.t+(1-x)*v.h,p=v.t+(1-e)*v.h),y.insert("line",":first-child").attr({x1:c,x2:c,y1:h,y2:p,"stroke-width":f,stroke:d,"stroke-dasharray":U.dashStyle(i.spikedash,f)}).classed("spikeline",!0).classed("crisp",!0),y.insert("line",":first-child").attr({x1:c,x2:c,y1:h,y2:p,"stroke-width":f+2,stroke:r}).classed("spikeline",!0).classed("crisp",!0)),-1!==m.indexOf("marker")&&y.insert("circle",":first-child").attr({cx:c,cy:t-("top"!==i.side?f:-f),r:f,fill:d}).classed("spikeline",!0)))}function Oe(e,t){return!t||(t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint)}function u(e,t){return B.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em"]})}function Ae(e,t,n){var r,i,o,a=t[e+"a"],s=t[e+"Val"],l=t.cd[0];return"category"===a.type?s=a._categoriesMap[s]:"date"===a.type&&((r=t.trace[e+"periodalignment"])&&(void 0===(o=(i=t.cd[t.index])[e+"Start"])&&(o=i[e]),o=(t=void 0===(t=i[e+"End"])?i[e]:t)-o,"end"===r?s+=o:"middle"===r&&(s+=o/2)),s=a.d2c(s)),l&&l.t&&l.t.posLetter===a._id&&("group"!==n.boxmode&&"group"!==n.violinmode||(s+=l.t.dPos)),s}function Te(e){return e.offsetTop+e.clientTop}function Pe(e){return e.offsetLeft+e.clientLeft}function Z(e,t){var n=e._fullLayout,r=t.getBoundingClientRect(),i=r.x,e=r.y,t=i+r.width,r=e+r.height,e=fe.apply3DTransform(n._invTransform)(i,e),n=fe.apply3DTransform(n._invTransform)(t,r),t=e[0],r=e[1],e=n[0],n=n[1];return{x:t,y:r,width:e-t,height:n-r,top:Math.min(r,n),left:Math.min(t,e),right:Math.max(t,e),bottom:Math.max(r,n)}}},{"../../lib":779,"../../lib/events":771,"../../lib/override_cursor":790,"../../lib/svg_text_utils":804,"../../plots/cartesian/axes":828,"../../registry":879,"../color":647,"../dragelement":666,"../drawing":669,"../legend/defaults":699,"../legend/draw":700,"./constants":681,"./helpers":683,"@plotly/d3":3,"fast-isnumeric":574,tinycolor2:980}],685:[function(e,t,n){"use strict";var a=e("../../lib"),s=e("../color"),l=e("./helpers").isUnifiedHover;t.exports=function(e,t,n,r){r=r||{};var i=t.legend;function o(e){r.font[e]||(r.font[e]=(i?t.legend:t).font[e])}t&&l(t.hovermode)&&(r.font||(r.font={}),o("size"),o("family"),o("color"),i?(r.bgcolor||(r.bgcolor=s.combine(t.legend.bgcolor,t.paper_bgcolor)),r.bordercolor||(r.bordercolor=t.legend.bordercolor)):r.bgcolor||(r.bgcolor=t.paper_bgcolor)),n("hoverlabel.bgcolor",r.bgcolor),n("hoverlabel.bordercolor",r.bordercolor),n("hoverlabel.namelength",r.namelength),a.coerceFont(n,"hoverlabel.font",r.font),n("hoverlabel.align",r.align)}},{"../../lib":779,"../color":647,"./helpers":683}],686:[function(e,t,n){"use strict";var i=e("../../lib"),o=e("./layout_attributes");t.exports=function(n,r){function e(e,t){return void 0!==r[e]?r[e]:i.coerce(n,r,o,e,t)}return e("clickmode"),e("hovermode")}},{"../../lib":779,"./layout_attributes":688}],687:[function(e,t,n){"use strict";var r=e("@plotly/d3"),i=e("../../lib"),o=e("../dragelement"),a=e("./helpers"),s=e("./layout_attributes"),l=e("./hover");t.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:s},attributes:e("./attributes"),layoutAttributes:s,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:a.getDistanceFunction,getClosest:a.getClosest,inbox:a.inbox,quadrature:a.quadrature,appendArrayPointValue:a.appendArrayPointValue,castHoverOption:function(e,t,n){return i.castOption(e,t,"hoverlabel."+n)},castHoverinfo:function(t,n,e){return i.castOption(t,e,"hoverinfo",function(e){return i.coerceHoverinfo({hoverinfo:e},{_module:t._module},n)})},hover:l.hover,unhover:o.unhover,loneHover:l.loneHover,loneUnhover:function(e){e=i.isD3Selection(e)?e:r.select(e);e.selectAll("g.hovertext").remove(),e.selectAll(".spikeline").remove()},click:e("./click")}},{"../../lib":779,"../dragelement":666,"./attributes":678,"./calc":679,"./click":680,"./constants":681,"./defaults":682,"./helpers":683,"./hover":684,"./layout_attributes":688,"./layout_defaults":689,"./layout_global_defaults":690,"@plotly/d3":3}],688:[function(e,t,n){"use strict";var r=e("./constants"),i=e("../../plots/font_attributes"),e=i({editType:"none"});e.family.dflt=r.HOVERFONT,e.size.dflt=r.HOVERFONTSIZE,t.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:e,grouptitlefont:i({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":859,"./constants":681}],689:[function(e,t,n){"use strict";var a=e("../../lib"),s=e("./layout_attributes"),l=e("./hovermode_defaults"),u=e("./hoverlabel_defaults");t.exports=function(n,r){function e(e,t){return a.coerce(n,r,s,e,t)}l(n,r)&&(e("hoverdistance"),e("spikedistance")),"select"===e("dragmode")&&e("selectdirection");var t=r._has("mapbox"),i=r._has("geo"),o=r._basePlotModules.length;"zoom"===r.dragmode&&((t||i)&&1===o||t&&i&&2===o)&&(r.dragmode="pan"),u(n,r,e),a.coerceFont(e,"hoverlabel.grouptitlefont",r.hoverlabel.font)}},{"../../lib":779,"./hoverlabel_defaults":685,"./hovermode_defaults":686,"./layout_attributes":688}],690:[function(e,t,n){"use strict";var i=e("../../lib"),o=e("./hoverlabel_defaults"),a=e("./layout_attributes");t.exports=function(n,r){o(n,r,function(e,t){return i.coerce(n,r,a,e,t)})}},{"../../lib":779,"./hoverlabel_defaults":685,"./layout_attributes":688}],691:[function(e,t,n){"use strict";var p=e("../../lib"),r=e("../../lib/regex").counter,i=e("../../plots/domain").attributes,o=e("../../plots/cartesian/constants").idRegex,y=e("../../plot_api/plot_template"),g={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[r("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[o.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[o.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:i({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function E(e,t,n){t=t[n+"axes"],n=Object.keys((e._splomAxes||{})[n]||{});return Array.isArray(t)?t:n.length?n:void 0}function v(e,t,n,r,i,o){var a=t(e+"gap",n),n=t("domain."+e);t(e+"side",r);for(var s=new Array(i),l=n[0],u=(n[1]-l)/(i-a),c=u*(1-a),f=0;f<i;f++){var d=l+u*f;s[o?i-1-f:f]=[d,d+c]}return s}function C(e,n,t,r,i){var o,a=new Array(t);function s(e,t){-1!==n.indexOf(t)&&void 0===r[t]?(a[e]=t,r[t]=e):a[e]=""}if(Array.isArray(e))for(o=0;o<t;o++)s(o,e[o]);else for(s(0,i),o=1;o<t;o++)s(o,i+(o+1));return a}t.exports={moduleType:"component",name:"grid",schema:{layout:{grid:g}},layoutAttributes:g,sizeDefaults:function(e,t){var n,r,i,o,a,s,l,u,c=e.grid||{},f=E(t,c,"x"),d=E(t,c,"y");function h(e,t){return p.coerce(c,r,g,e,t)}(e.grid||f||d)&&(n=Array.isArray(c.subplots)&&Array.isArray(c.subplots[0]),a=Array.isArray(f),s=Array.isArray(d),e=a&&f!==c.xaxes&&s&&d!==c.yaxes,n?(i=c.subplots.length,o=c.subplots[0].length):(s&&(i=d.length),a&&(o=f.length)),r=y.newContainer(t,"grid"),1<(i=h("rows",i))*(o=h("columns",o))?(n||a||s||"independent"===h("pattern")&&(n=!0),r._hasSubplotGrid=n,a="top to bottom"===h("roworder"),s=n?.3:.1,e&&t._splomGridDflt&&(l=t._splomGridDflt.xside,u=t._splomGridDflt.yside),r._domains={x:v("x",h,n?.2:.1,l,o),y:v("y",h,s,u,i,a)}):delete t.grid)},contentDefaults:function(e,t){var n=t.grid;if(n&&n._domains){var r,i,o,a,s=e.grid||{},l=t._subplots,u=n._hasSubplotGrid,c=n.rows,f=n.columns,d="independent"===n.pattern,h=n._axisMap={};if(u)for(var p=s.subplots||[],y=n.subplots=new Array(c),g=1,v=0;v<c;v++)for(var m=y[v]=new Array(f),b=p[v]||[],x=0;x<f;x++)d?(o=1===g?"xy":"x"+g+"y"+g,g++):o=b[x],m[x]="",-1!==l.cartesian.indexOf(o)&&(a=o.indexOf("y"),r=o.slice(0,a),i=o.slice(a),void 0!==h[r]&&h[r]!==x||void 0!==h[i]&&h[i]!==v||(m[x]=o,h[r]=x,h[i]=v));else{e=E(t,s,"x"),s=E(t,s,"y");n.xaxes=C(e,l.xaxis,f,h,"x"),n.yaxes=C(s,l.yaxis,c,h,"y")}var _,w=n._anchors={},M="top to bottom"===n.roworder;for(_ in h){var j,k,O,A=_.charAt(0),T=n[A+"side"];if(T.length<8)w[_]="free";else if("x"===A){if(O="t"===T.charAt(0)==M?(j=0,k=1,c):(j=c-1,k=-1),u){var P=h[_];for(v=j;v!==O;v+=k)if((o=y[v][P])&&(a=o.indexOf("y"),o.slice(0,a)===_)){w[_]=o.slice(a);break}}else for(v=j;v!==O;v+=k)if(i=n.yaxes[v],-1!==l.cartesian.indexOf(_+i)){w[_]=i;break}}else if(O="l"===T.charAt(0)?(j=0,k=1,f):(j=f-1,k=-1),u){var S=h[_];for(v=j;v!==O;v+=k)if((o=y[S][v])&&(a=o.indexOf("y"),o.slice(a)===_)){w[_]=o.slice(0,a);break}}else for(v=j;v!==O;v+=k)if(r=n.xaxes[v],-1!==l.cartesian.indexOf(r+_)){w[_]=r;break}}}}}},{"../../lib":779,"../../lib/regex":795,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":835,"../../plots/domain":858}],692:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/constants"),i=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects");t.exports=i("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":753,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":835}],693:[function(e,t,n){"use strict";var p=e("fast-isnumeric"),y=e("../../lib/to_log_range");t.exports=function(e,t,n,r){t=t||{};var i="log"===n&&"linear"===t.type,n="linear"===n&&"log"===t.type;if(i||n)for(var o=e._fullLayout.images,a=t._id.charAt(0),s=0;s<o.length;s++){var l,u,c,f,d,h="images["+s+"].";(d=o[s])[a+"ref"]===t._id&&(l=d[a],u=d["size"+a],f=c=null,f=i?(c=y(l,t.range),d=u/Math.pow(10,c)/2,2*Math.log(d+Math.sqrt(1+d*d))/Math.LN10):(c=Math.pow(10,l))*(Math.pow(10,u/2)-Math.pow(10,-u/2)),p(c)?p(f)||(f=null):f=c=null,r(h+a,c),r(h+"size"+a,f))}}},{"../../lib/to_log_range":806,"fast-isnumeric":574}],694:[function(e,t,n){"use strict";var c=e("../../lib"),f=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),d=e("./attributes");function i(n,r,e){function t(e,t){return c.coerce(n,r,d,e,t)}var i=t("source");if(!t("visible",!!i))return r;t("layer"),t("xanchor"),t("yanchor"),t("sizex"),t("sizey"),t("sizing"),t("opacity");for(var o={_fullLayout:e},a=["x","y"],s=0;s<2;s++){var l=a[s],u=f.coerceRef(n,r,o,l,"paper",void 0);"paper"!==u&&f.getFromId(o,u)._imgIndices.push(r._index),f.coercePosition(r,o,t,u,l,0)}return r}t.exports=function(e,t){r(e,t,{name:"images",handleItemDefaults:i})}},{"../../lib":779,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"./attributes":692}],695:[function(e,t,n){"use strict";var v=e("@plotly/d3"),m=e("../drawing"),b=e("../../plots/cartesian/axes"),x=e("../../plots/cartesian/axis_ids"),_=e("../../constants/xmlns_namespaces");t.exports=function(d){for(var h=d._fullLayout,e=[],t={},n=[],r=0;r<h.images.length;r++){var i,o,a=h.images[r];a.visible&&("below"===a.layer&&"paper"!==a.xref&&"paper"!==a.yref?(i=x.ref2id(a.xref)+x.ref2id(a.yref),(o=h._plots[i])?(t[i=o.mainplot?o.mainplot.id:i]||(t[i]=[]),t[i].push(a)):n.push(a)):("above"===a.layer?e:n).push(a))}var p={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function s(r){var e,i=v.select(this);this._imgSrc!==r.source&&(i.attr("xmlns",_.svg),r.source&&"data:"===r.source.slice(0,5)?(i.attr("xlink:href",r.source),this._imgSrc=r.source):(e=new Promise(function(t){var e=new Image;function n(){i.remove(),t()}(this.img=e).setAttribute("crossOrigin","anonymous"),e.onerror=n,e.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,e.getContext("2d").drawImage(this,0,0);e=e.toDataURL("image/png");i.attr("xlink:href",e),t()},i.on("error",n),e.src=r.source,this._imgSrc=r.source}.bind(this)),d._promises.push(e)))}function l(e){var t=v.select(this),n=b.getFromId(d,e.xref),r=b.getFromId(d,e.yref),i="domain"===b.getRefType(e.xref),o="domain"===b.getRefType(e.yref),a=h._size,s=void 0!==n?"string"==typeof e.xref&&i?n._length*e.sizex:Math.abs(n.l2p(e.sizex)-n.l2p(0)):e.sizex*a.w,l=void 0!==r?"string"==typeof e.yref&&o?r._length*e.sizey:Math.abs(r.l2p(e.sizey)-r.l2p(0)):e.sizey*a.h,u=s*p[e.xanchor].offset,c=l*y[e.yanchor].offset,f=p[e.xanchor].sizing+y[e.yanchor].sizing,i=void 0!==n?"string"==typeof e.xref&&i?n._length*e.x+n._offset:n.r2p(e.x)+n._offset:e.x*a.w+a.l;switch(i+=u,a=void 0!==r?"string"==typeof e.yref&&o?r._length*(1-e.y)+r._offset:r.r2p(e.y)+r._offset:a.h-e.y*a.h+a.t,a+=c,e.sizing){case"fill":f+=" slice";break;case"stretch":f="none"}t.attr({x:i,y:a,width:s,height:l,preserveAspectRatio:f,opacity:e.opacity});r=(n&&"domain"!==b.getRefType(e.xref)?n._id:"")+(r&&"domain"!==b.getRefType(e.yref)?r._id:"");m.setClipUrl(t,r?"clip"+h._uid+r:null,d)}var u=h._imageLowerLayer.selectAll("image").data(n),c=h._imageUpperLayer.selectAll("image").data(e);u.enter().append("image"),c.enter().append("image"),u.exit().remove(),c.exit().remove(),u.each(function(e){s.bind(this)(e),l.bind(this)(e)}),c.each(function(e){s.bind(this)(e),l.bind(this)(e)});var f=Object.keys(h._plots);for(r=0;r<f.length;r++){i=f[r];var g=h._plots[i];g.imagelayer&&((g=g.imagelayer.selectAll("image").data(t[i]||[])).enter().append("image"),g.exit().remove(),g.each(function(e){s.bind(this)(e),l.bind(this)(e)}))}}},{"../../constants/xmlns_namespaces":759,"../../plots/cartesian/axes":828,"../../plots/cartesian/axis_ids":832,"../drawing":669,"@plotly/d3":3}],696:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":841,"./attributes":692,"./convert_coords":693,"./defaults":694,"./draw":695}],697:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),e=e("../color/attributes");t.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:r({editType:"legend"}),grouptitlefont:r({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:r({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":859,"../color/attributes":646}],698:[function(e,t,n){"use strict";t.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],699:[function(e,t,n){"use strict";var v=e("../../registry"),m=e("../../lib"),b=e("../../plot_api/plot_template"),x=e("../../plots/attributes"),_=e("./attributes"),w=e("../../plots/layout_attributes"),M=e("./helpers");t.exports=function(e,t,n){var r,i=e.legend||{},o=b.newContainer(t,"legend");function a(e,t){return m.coerce(i,o,_,e,t)}for(var s=function(e,t){var n=r._input;return m.coerce(n,r,x,e,t)},l=t.font||{},u=m.coerceFont(a,"grouptitlefont",m.extendFlat({},l,{size:Math.round(1.1*l.size)})),c=0,f=!1,d="normal",h=0;h<n.length;h++)(r=n[h]).visible&&(!r.showlegend&&(!r._dfltShowLegend||r._module&&r._module.attributes&&r._module.attributes.showlegend&&!1===r._module.attributes.showlegend.dflt)||(c++,r.showlegend&&(f=!0,!v.traceIs(r,"pie-like")&&!0!==r._input.showlegend||c++),m.coerceFont(s,"legendgrouptitle.font",u)),(v.traceIs(r,"bar")&&"stack"===t.barmode||-1!==["tonextx","tonexty"].indexOf(r.fill))&&(d=M.isGrouped({traceorder:d})?"grouped+reversed":"reversed"),void 0!==r.legendgroup&&""!==r.legendgroup&&(d=M.isReversed({traceorder:d})?"reversed+grouped":"grouped"));var p,y,g=m.coerce(e,t,w,"showlegend",f&&1<c);!1===g&&(t.legend=void 0),!1===g&&!i.uirevision||(a("uirevision",t.uirevision),!1!==g&&(a("bgcolor",t.paper_bgcolor),a("bordercolor"),a("borderwidth"),l=m.coerceFont(a,"font",t.font),e=(g="h"===a("orientation"))?(p=0,v.getComponentMethod("rangeslider","isVisible")(e.xaxis)?(y=1.1,"bottom"):(y=-.1,"top")):(p=1.02,y=1,"auto"),a("traceorder",d),M.isGrouped(t.legend)&&a("tracegroupgap"),a("itemsizing"),a("itemwidth"),a("itemclick"),a("itemdoubleclick"),a("groupclick"),a("x",p),a("xanchor"),a("y",y),a("yanchor",e),a("valign"),m.noneOrAll(i,o,["x","y"]),a("title.text")&&(a("title.side",g?"left":"top"),l=m.extendFlat({},l,{size:m.bigFont(l.size)}),m.coerceFont(a,"title.font",l))))}},{"../../lib":779,"../../plot_api/plot_template":817,"../../plots/attributes":824,"../../plots/layout_attributes":874,"../../registry":879,"./attributes":697,"./helpers":703}],700:[function(e,t,n){"use strict";var L=e("@plotly/d3"),E=e("../../lib"),C=e("../../plots/plots"),R=e("../../registry"),a=e("../../lib/events"),I=e("../dragelement"),z=e("../drawing"),s=e("../color"),y=e("../../lib/svg_text_utils"),l=e("./handle_click"),D=e("./constants"),r=e("../../constants/alignment"),g=r.LINE_SPACING,N=r.FROM_TL,F=r.FROM_BR,u=e("./get_legend_data"),c=e("./style"),B=e("./helpers"),v=1;function U(e,t,n,r,i){var o=n.data()[0][0].trace,i={event:i,node:n.node(),curveNumber:o.index,expandedIndex:o._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};o._group&&(i.group=o._group),R.traceIs(o,"pie-like")&&(i.label=n.datum()[0].label),!1!==a.triggerHandler(e,"plotly_legendclick",i)&&(1===r?t._clickTimeout=setTimeout(function(){e._fullLayout&&l(n,e,r)},e._context.doubleClickDelay):2===r&&(t._clickTimeout&&clearTimeout(t._clickTimeout),e._legendMouseDownTime=0,!1!==a.triggerHandler(e,"plotly_legenddoubleclick",i)&&l(n,e,r)))}function f(i,o,a){var e,s=i.data()[0][0],l=s.trace,t=R.traceIs(l,"pie-like"),n=!a._inHover&&o._context.edits.legendText&&!t,u=a._maxNameLength;s.groupTitle?(e=s.groupTitle.text,r=s.groupTitle.font):(r=a.font,a.entries?e=s.text:(e=t?s.label:l.name,l._meta&&(e=E.templateString(e,l._meta))));t=E.ensureSingle(i,"text","legendtext");t.attr("text-anchor","start").call(z.font,r).text(n?d(e,u):e);var r=a.itemwidth+2*D.itemGap;y.positionText(t,r,0),n?t.call(y.makeEditable,{gd:o,text:e}).call(p,i,o,a).on("edit",function(e){this.text(d(e,u)).call(p,i,o,a);var t,n=s.trace._fullInput||{},r={};return R.hasTransform(n,"groupby")?(t=(t=R.getTransformIndices(n,"groupby"))[t.length-1],(t=E.keyedContainer(n,"transforms["+t+"].styles","target","value.name")).set(s.trace._group,e),r=t.constructUpdate()):r.name=e,R.call("_guiRestyle",o,r,l.index)}):p(t,i,o,a)}function d(e,t){t=Math.max(4,t);if(e&&e.trim().length>=t/2)return e;for(var n=t-(e=e||"").length;0<n;n--)e+=" ";return e}function h(t,n){var e,r=n._context.doubleClickDelay,i=1,o=E.ensureSingle(t,"rect","legendtoggle",function(e){n._context.staticPlot||e.style("cursor","pointer").attr("pointer-events","all"),e.call(s.fill,"rgba(0,0,0,0)")});n._context.staticPlot||(o.on("mousedown",function(){(e=(new Date).getTime())-n._legendMouseDownTime<r?i+=1:(i=1,n._legendMouseDownTime=e)}),o.on("mouseup",function(){var e;n._dragged||n._editing||(e=n._fullLayout.legend,(new Date).getTime()-n._legendMouseDownTime>r&&(i=Math.max(i-1,1)),U(n,e,t,i,L.event))}))}function p(e,f,d,h,p){h._inHover&&e.attr("data-notex",!0),y.convertToTspans(e,d,function(){var e,t,n,r,i,o,a,s,l,u,c;t=d,n=h,r=p,c=(e=f).data()[0][0],n._inHover||!c||c.trace.showlegend?(l=e.select("g[class*=math-group]"),a=l.node(),u=(n=n||t._fullLayout.legend).borderwidth,t=(r===v?n.title:c.groupTitle||n).font.size*g,a?(s=z.bBox(a),i=s.height,o=s.width,r===v?z.setTranslate(l,u,u+.75*i):z.setTranslate(l,0,.25*i)):(a=e.select(r===v?".legendtitletext":".legendtext"),s=y.lineCount(a),l=a.node(),i=t*s,o=l?z.bBox(l).width:0,r===v?("left"===n.title.side&&(o+=2*D.itemGap),y.positionText(a,u+D.titlePad,u+t)):(u=2*D.itemGap+n.itemwidth,c.groupTitle&&(u=D.itemGap,o-=n.itemwidth),y.positionText(a,u,-t*((s-1)/2-.3)))),r===v?(n._titleWidth=o,n._titleHeight=i):(c.lineHeight=t,c.height=Math.max(i,16)+3,c.width=o)):e.remove()})}function q(e){return E.isRightAnchor(e)?"right":E.isCenterAnchor(e)?"center":"left"}function H(e){return E.isBottomAnchor(e)?"bottom":E.isMiddleAnchor(e)?"middle":"top"}t.exports=function(e,t){return function(x,_){var w,e,M=x._fullLayout,j="legend"+M._uid,k=_._inHover;k?(w=_.layer,j+="-hover"):w=M._infolayer;if(w){if(x._legendMouseDownTime||(x._legendMouseDownTime=0),k){if(!_.entries)return;e=u(_.entries,_)}else{if(!x.calcdata)return;e=M.showlegend&&u(x.calcdata,_)}var n=M.hiddenlabels||[];if(!(k||M.showlegend&&e.length))return w.selectAll(".legend").remove(),M._topdefs.select("#"+j).remove(),C.autoMargin(x,"legend");var O=E.ensureSingle(w,"g","legend",function(e){k||e.attr("pointer-events","all")}),A=E.ensureSingleById(M._topdefs,"clipPath",j,function(e){e.append("rect")}),T=E.ensureSingle(O,"rect","bg",function(e){e.attr("shape-rendering","crispEdges")});T.call(s.stroke,_.bordercolor).call(s.fill,_.bgcolor).style("stroke-width",_.borderwidth+"px");var t,P=E.ensureSingle(O,"g","scrollbox"),r=_.title;_._titleWidth=0,_._titleHeight=0,r.text?((t=E.ensureSingle(P,"text","legendtitletext")).attr("text-anchor","start").call(z.font,r.font).text(r.text),p(t,P,x,_,v)):P.selectAll(".legendtitletext").remove();var S=E.ensureSingle(O,"rect","scrollbar",function(e){e.attr(D.scrollBarEnterAttrs).call(s.fill,D.scrollBarColor)}),i=P.selectAll("g.groups").data(e);i.enter().append("g").attr("class","groups"),i.exit().remove();var o=i.selectAll("g.traces").data(E.identity);o.enter().append("g").attr("class","traces"),o.exit().remove(),o.style("opacity",function(e){var t=e[0].trace;return R.traceIs(t,"pie-like")?-1!==n.indexOf(e[0].label)?.5:1:"legendonly"===t.visible?.5:1}).each(function(){L.select(this).call(f,x,_)}).call(c,x,_).each(function(){k||L.select(this).call(h,x)}),E.syncOrAsync([C.previousPromises,function(){return function(e,t,n,i){var r=e._fullLayout;i=i||r.legend;var o=r._size,a=B.isVertical(i),s=B.isGrouped(i),l=i.borderwidth,u=2*l,c=D.itemGap,f=i.itemwidth+2*c,d=2*(l+c),h=H(i),p=i.y<0||0===i.y&&"top"===h,y=1<i.y||1===i.y&&"bottom"===h,g=i.tracegroupgap;i._maxHeight=Math.max(p||y?r.height/2:o.h,30);var v=0;i._width=0,i._height=0;var m=function(e){var t=0,n=0,r=e.title.side;r&&(-1!==r.indexOf("left")&&(t=e._titleWidth),-1!==r.indexOf("top")&&(n=e._titleHeight));return[t,n]}(i);{var b,x,_,w,M,j,k,O,A,T,P,S,E;a?(n.each(function(e){var t=e[0].height;z.setTranslate(this,l+m[0],l+m[1]+i._height+t/2+c),i._height+=t,i._width=Math.max(i._width,e[0].width)}),v=f+i._width,i._width+=c+f+u,i._height+=d,s&&(t.each(function(e,t){z.setTranslate(this,0,t*i.tracegroupgap)}),i._height+=(i._lgroupsLength-1)*i.tracegroupgap)):(b=q(i),x=i.x<0||0===i.x&&"right"===b,h=1<i.x||1===i.x&&"left"===b,p=y||p,r=r.width/2,i._maxWidth=Math.max(x?p&&"left"===b?o.l+o.w:r:h?p&&"right"===b?o.r+o.w:r:o.w,2*f),w=_=0,n.each(function(e){e=e[0].width+f;_=Math.max(_,e),w+=e}),v=null,M=0,s?(O=k=j=0,t.each(function(){var n=0,r=0;L.select(this).selectAll("g.traces").each(function(e){var t=e[0].width,e=e[0].height;z.setTranslate(this,m[0],m[1]+l+c+e/2+r),r+=e,n=Math.max(n,f+t)}),j=Math.max(j,r);var e=n+c;0<k&&e+l+k>i._maxWidth&&(M=Math.max(M,k),k=0,O+=j+g,j=r),z.setTranslate(this,k,O),k+=e}),i._width=Math.max(M,k)+l,i._height=O+j+d):(t=n.size(),A=w+u+(t-1)*c<i._maxWidth,E=S=P=T=0,n.each(function(e){var t=e[0].height,n=f+e[0].width,e=(A?n:_)+c;e+l+P-c>=i._maxWidth&&(M=Math.max(M,E),P=0,S+=T,i._height+=T,T=0),z.setTranslate(this,m[0]+l+P,m[1]+l+S+t/2+c),E=P+n+c,P+=e,T=Math.max(T,t)}),A?(i._width=P+u,i._height=T+d):(i._width=Math.max(M,E)+u,i._height+=T+d)))}i._width=Math.ceil(Math.max(i._width+m[0],i._titleWidth+2*(l+D.titlePad))),i._height=Math.ceil(Math.max(i._height+m[1],i._titleHeight+2*(l+D.itemGap))),i._effHeight=Math.min(i._height,i._maxHeight);var e=e._context.edits,C=e.legendText||e.legendPosition;n.each(function(e){var t=L.select(this).select(".legendtoggle"),n=e[0].height,e=C?f:v||f+e[0].width;a||(e+=c/2),z.setRect(t,0,-n/2,e,n)})}(x,i,o,_)},function(){var t,e,r,i,n,o,a,s,l,u,c,f,d,h=M._size,p=_.borderwidth;if(!k){if(y=(v=x)._fullLayout.legend,m=q(y),g=H(y),C.autoMargin(v,"legend",{x:y.x,y:y.y,l:y._width*N[m],r:y._width*F[m],b:y._effHeight*F[g],t:y._effHeight*N[g]}))return;var y,g,v=h.l+h.w*_.x-N[q(_)]*_._width,m=h.t+h.h*(1-_.y)-N[H(_)]*_._effHeight;M.margin.autoexpand&&(y=v,g=m,v=E.constrain(v,0,M.width-_._width),m=E.constrain(m,0,M.height-_._effHeight),v!==y&&E.log("Constrain legend.x to make legend fit inside graph"),m!==g&&E.log("Constrain legend.y to make legend fit inside graph")),z.setTranslate(O,v,m)}function b(e,t,n){_._scrollY=x._fullLayout.legend._scrollY=e,z.setTranslate(P,0,-e),z.setRect(S,_._width,D.scrollBarMargin+e*n,D.scrollBarWidth,t),A.select("rect").attr("y",p+e)}S.on(".drag",null),O.on("wheel",null),k||_._height<=_._maxHeight||x._context.staticPlot?(l=_._effHeight,k&&(l=_._height),T.attr({width:_._width-p,height:l-p,x:p/2,y:p/2}),z.setTranslate(P,0,0),A.select("rect").attr({width:_._width-2*p,height:l-2*p,x:p,y:p}),z.setClipUrl(P,j,x),z.setRect(S,0,0,0,0),delete _._scrollY):(t=Math.max(D.scrollBarMinHeight,_._effHeight*_._effHeight/_._height),e=_._effHeight-t-2*D.scrollBarMargin,r=_._height-_._effHeight,i=e/r,n=Math.min(_._scrollY||0,r),T.attr({width:_._width-2*p+D.scrollBarWidth+D.scrollBarMargin,height:_._effHeight-p,x:p/2,y:p/2}),A.select("rect").attr({width:_._width-2*p+D.scrollBarWidth+D.scrollBarMargin,height:_._effHeight-2*p,x:p,y:p+n}),z.setClipUrl(P,j,x),b(n,t,i),O.on("wheel",function(){b(n=E.constrain(_._scrollY+L.event.deltaY/e*r,0,r),t,i),0!==n&&n!==r&&L.event.preventDefault()}),l=L.behavior.drag().on("dragstart",function(){var e=L.event.sourceEvent;o=("touchstart"===e.type?e.changedTouches[0]:e).clientY,s=n}).on("drag",function(){var e=L.event.sourceEvent;2===e.buttons||e.ctrlKey||(a=("touchmove"===e.type?e.changedTouches[0]:e).clientY,b(n=function(e,t,n){e=(n-t)/i+e;return E.constrain(e,0,r)}(s,o,a),t,i))}),S.call(l),l=L.behavior.drag().on("dragstart",function(){var e=L.event.sourceEvent;"touchstart"===e.type&&(o=e.changedTouches[0].clientY,s=n)}).on("drag",function(){var e=L.event.sourceEvent;"touchmove"===e.type&&(a=e.changedTouches[0].clientY,b(n=function(e,t,n){e=(t-n)/i+e;return E.constrain(e,0,r)}(s,o,a),t,i))}),P.call(l)),x._context.edits.legendPosition&&(O.classed("cursor-move",!0),I.init({element:O.node(),gd:x,prepFn:function(){var e=z.getTranslate(O);f=e.x,d=e.y},moveFn:function(e,t){e=f+e,t=d+t;z.setTranslate(O,e,t),u=I.align(e,0,h.l,h.l+h.w,_.xanchor),c=I.align(t,0,h.t+h.h,h.t,_.yanchor)},doneFn:function(){void 0!==u&&void 0!==c&&R.call("_guiRelayout",x,{"legend.x":u,"legend.y":c})},clickFn:function(e,t){var n=w.selectAll("g.traces").filter(function(){var e=this.getBoundingClientRect();return t.clientX>=e.left&&t.clientX<=e.right&&t.clientY>=e.top&&t.clientY<=e.bottom});0<n.size()&&U(x,O,n,e,t)}}))}],x)}}(e,t=t||(e._fullLayout.legend||{}))}},{"../../constants/alignment":752,"../../lib":779,"../../lib/events":771,"../../lib/svg_text_utils":804,"../../plots/plots":876,"../../registry":879,"../color":647,"../dragelement":666,"../drawing":669,"./constants":698,"./get_legend_data":701,"./handle_click":702,"./helpers":703,"./style":705,"@plotly/d3":3}],701:[function(e,t,n){"use strict";var P=e("../../registry"),S=e("./helpers");t.exports=function(e,n){var t=n._inHover,r=S.isGrouped(n),i=S.isReversed(n),o={},a=[],s=!1,l={},u=0,c=0;function f(e,t){""!==e&&S.isGrouped(n)?-1===a.indexOf(e)?(a.push(e),s=!0,o[e]=[t]):o[e].push(t):(e="~~i"+u,a.push(e),o[e]=[t],u++)}for(b=0;b<e.length;b++){var d=e[b],h=d[0],p=h.trace,y=p.legendgroup;if(t||p.visible&&p.showlegend)if(P.traceIs(p,"pie-like"))for(l[y]||(l[y]={}),w=0;w<d.length;w++){var g=d[w].label;l[y][g]||(f(y,{label:g,color:d[w].color,i:d[w].i,trace:p,pts:d[w].pts}),l[y][g]=!0,c=Math.max(c,(g||"").length))}else f(y,h),c=Math.max(c,(p.name||"").length)}if(!a.length)return[];for(var v=!s||!r,m=[],b=0;b<a.length;b++){var x=o[a[b]];v?m.push(x[0]):m.push(x)}for(v&&(m=[m]),b=0;b<m.length;b++){for(var _=1/0,w=0;w<m[b].length;w++){var M=m[b][w].trace.legendrank;M<_&&(_=M)}m[b][0]._groupMinRank=_,m[b][0]._preGroupSort=b}function j(e,t){return e.trace.legendrank-t.trace.legendrank||e._preSort-t._preSort}for(m.forEach(function(e,t){e[0]._preGroupSort=t}),m.sort(function(e,t){return e[0]._groupMinRank-t[0]._groupMinRank||e[0]._preGroupSort-t[0]._preGroupSort}),b=0;b<m.length;b++){m[b].forEach(function(e,t){e._preSort=t}),m[b].sort(j);var k=m[b][0].trace,O=null;for(w=0;w<m[b].length;w++){var A=m[b][w].trace.legendgrouptitle;if(A&&A.text){O=A,t&&(A.font=n._groupTitleFont);break}}if(i&&m[b].reverse(),O){var T=!1;for(w=0;w<m[b].length;w++)if(P.traceIs(m[b][w].trace,"pie-like")){T=!0;break}m[b].unshift({i:-1,groupTitle:O,noClick:T,trace:{showlegend:k.showlegend,legendgroup:k.legendgroup,visible:"toggleitem"===n.groupclick||k.visible}})}for(w=0;w<m[b].length;w++)m[b][w]=[m[b][w]]}return n._lgroupsLength=m.length,n._maxNameLength=c,m}},{"../../registry":879,"./helpers":703}],702:[function(e,t,n){"use strict";var z=e("../../lib"),D=e("../../registry"),N=!0;t.exports=function(e,t,n){var r=t._fullLayout;if(!t._dragged&&!t._editing){var i,o=r.legend.itemclick,a=r.legend.itemdoubleclick,s=r.legend.groupclick;if(N=(1===n&&"toggle"===o&&"toggleothers"===a&&N&&t.data&&t._context.showTips&&z.notifier(z._(t,"Double-click on legend to isolate one trace"),"long"),!1),1===n?i=o:2===n&&(i=a),i){var l="togglegroup"===s,u=r.hiddenlabels?r.hiddenlabels.slice():[],c=e.data()[0][0];if(!c.groupTitle||!c.noClick){var f,d,h,p=t._fullData,y=c.trace,g=y.legendgroup,v={},m=[],b=[],x=[];if(D.traceIs(y,"pie-like")){var _=c.label,e=u.indexOf(_);"toggle"===i?-1===e?u.push(_):u.splice(e,1):"toggleothers"===i&&(u=[],t.calcdata[0].forEach(function(e){_!==e.label&&u.push(e.label)}),t._fullLayout.hiddenlabels&&t._fullLayout.hiddenlabels.length===u.length&&-1===e&&(u=[])),D.call("_guiRelayout",t,"hiddenlabels",u)}else{var w,M,j=g&&g.length,k=[];if(j)for(S=0;S<p.length;S++)(w=p[S]).visible&&w.legendgroup===g&&k.push(S);if("toggle"===i){switch(y.visible){case!0:M="legendonly";break;case!1:M=!1;break;case"legendonly":M=!0}if(j)if(l)for(S=0;S<p.length;S++)!1!==p[S].visible&&p[S].legendgroup===g&&I(p[S],M);else I(y,M);else I(y,M)}else if("toggleothers"===i){for(var O,A,T,P=!0,S=0;S<p.length;S++)if(O=p[S]===y,T=!0!==p[S].showlegend,!(O||T||(A=j&&p[S].legendgroup===g)||!0!==p[S].visible||D.traceIs(p[S],"notLegendIsolatable"))){P=!1;break}for(S=0;S<p.length;S++)if(!1!==p[S].visible&&!D.traceIs(p[S],"notLegendIsolatable"))switch(y.visible){case"legendonly":I(p[S],!0);break;case!0:O=p[S]===y,T=!0!==p[S].showlegend&&!p[S].legendgroup,A=O||j&&p[S].legendgroup===g,I(p[S],!(!A&&!T)||(!!P||"legendonly"))}}for(S=0;S<b.length;S++)if(f=b[S])for(var E=f.constructUpdate(),C=Object.keys(E),L=0;L<C.length;L++)d=C[L],(v[d]=v[d]||[])[x[S]]=E[d];for(h=Object.keys(v),S=0;S<h.length;S++)for(d=h[S],L=0;L<m.length;L++)v[d].hasOwnProperty(L)||(v[d][L]=void 0);D.call("_guiRestyle",t,v,m)}}}}function R(e,t,n){var r=m.indexOf(e),i=(i=v[t])||(v[t]=[]);return-1===m.indexOf(e)&&(m.push(e),r=m.length-1),i[r]=n,r}function I(e,t){var n,r,i;c.groupTitle&&!l||(n=e._fullInput,D.hasTransform(n,"groupby")?((r=b[n.index])||(i=(i=D.getTransformIndices(n,"groupby"))[i.length-1],r=z.keyedContainer(n,"transforms["+i+"].styles","target","value.visible"),b[n.index]=r),!1!==(i=void 0===(i=r.get(e._group))?!0:i)&&r.set(e._group,t),x[n.index]=R(n.index,"visible",!1!==n.visible)):(t=!1!==n.visible&&t,R(n.index,"visible",t)))}}},{"../../lib":779,"../../registry":879}],703:[function(e,t,n){"use strict";n.isGrouped=function(e){return-1!==(e.traceorder||"").indexOf("grouped")},n.isVertical=function(e){return"h"!==e.orientation},n.isReversed=function(e){return-1!==(e.traceorder||"").indexOf("reversed")}},{}],704:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":697,"./defaults":699,"./draw":700,"./style":705}],705:[function(e,t,n){"use strict";var x=e("@plotly/d3"),a=e("../../registry"),y=e("../../lib"),o=y.strTranslate,_=e("../drawing"),w=e("../color"),M=e("../colorscale/helpers").extractOpts,j=e("../../traces/scatter/subtypes"),s=e("../../traces/pie/style_one"),l=e("../../traces/pie/helpers").castOption,i=e("./constants");function k(e,t){return(t?"radial":"horizontal")+(e?"":"reversed")}function O(e){var t=e[0].trace,n=t.contours,r=j.hasLines(t),i=j.hasMarkers(t),o=t.visible&&t.fill&&"none"!==t.fill,a=!1,e=!1;return n&&("lines"===(t=n.coloring)?a=!0:r="none"===t||"heatmap"===t||n.showlines,"constraint"===n.type?o="="!==n._operation:"fill"!==t&&"heatmap"!==t||(e=!0)),{showMarker:i,showLine:r,showFill:o,showGradientLine:a,showGradientFill:e,anyLine:r||a,anyFill:o||e}}function A(e,t,n){return e&&y.isArrayOrTypedArray(e)?t:n<e?n:e}t.exports=function(e,g,v){var t=g._fullLayout,h="constant"===(v=v||t.legend).itemsizing,p=v.itemwidth,t=(p+2*i.itemGap)/2,m=o(t,0),b=function(e,t,n,r){var i;if(e+1)i=e;else{if(!(t&&0<t.width))return 0;i=t.width}return h?r:Math.min(i,n)};function r(e,t,n){var h=e[0].trace,p=h.marker||{},y=p.line||{},r=n?h.visible&&h.type===n:a.traceIs(h,"bar"),e=x.select(t).select("g.legendpoints").selectAll("path.legend"+n).data(r?[e]:[]);e.enter().append("path").classed("legend"+n,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),e.exit().remove(),e.each(function(e){var t=x.select(this),n=e[0],r=b(n.mlw,p.line,5,2);t.style("stroke-width",r+"px");var i=n.mcc;!v._inHover&&"mc"in n&&(void 0===(u=(l=M(p)).mid)&&(u=(l.max+l.min)/2),i=_.tryColorscale(p,"")(u));var o,a,s,l,u,c=i||n.mc||p.color,f=p.pattern,d=f&&_.getPatternAttr(f.shape,0,"");d?(o=_.getPatternAttr(f.bgcolor,0,null),a=_.getPatternAttr(f.fgcolor,0,null),s=f.fgopacity,e=A(f.size,8,10),l=A(f.solidity,.5,1),u="legend-"+h.uid,t.call(_.pattern,"legend",g,u,d,e,l,i,f.fillmode,o,a,s)):t.call(w.fill,c),r&&w.stroke(t,n.mlc||y.color)})}function n(e,t,n){var r=e[0],i=r.trace,o=n?i.visible&&i.type===n:a.traceIs(i,n),o=x.select(t).select("g.legendpoints").selectAll("path.legend"+n).data(o?[e]:[]);o.enter().append("path").classed("legend"+n,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),o.exit().remove(),o.size()&&(e=(i.marker||{}).line,n=b(l(e.width,r.pts),e,5,2),(n=y.minExtend(i,{marker:{line:{width:n}}})).marker.line.color=e.color,r=y.minExtend(r,{trace:n}),s(o,r,n))}e.each(function(e){var t=x.select(this),n=y.ensureSingle(t,"g","layers");n.style("opacity",e[0].trace.opacity);var r=v.valign,i=e[0].lineHeight,t=e[0].height;"middle"!==r&&i&&t?n.attr("transform",o(0,{top:1,bottom:-1}[r]*(.5*(i-t+3)))):n.attr("transform",null),n.selectAll("g.legendfill").data([e]).enter().append("g").classed("legendfill",!0),n.selectAll("g.legendlines").data([e]).enter().append("g").classed("legendlines",!0);n=n.selectAll("g.legendsymbols").data([e]);n.enter().append("g").classed("legendsymbols",!0),n.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",!0)}).each(function(e){var l,u=e[0].trace,t=[];if(u.visible)switch(u.type){case"histogram2d":case"heatmap":t=[["M-15,-2V4H15V-2Z"]],l=!0;break;case"choropleth":case"choroplethmapbox":t=[["M-6,-6V6H6V-6Z"]],l=!0;break;case"densitymapbox":t=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],l="radial";break;case"cone":l=!(t=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]]);break;case"streamtube":l=!(t=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]]);break;case"surface":t=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],l=!0;break;case"mesh3d":l=!(t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]]);break;case"volume":t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],l=!0;break;case"isosurface":l=!(t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]])}e=x.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(t);e.enter().append("path").classed("legend3dandfriends",!0).attr("transform",m).style("stroke-miterlimit",1),e.exit().remove(),e.each(function(e,t){var n,r,i=x.select(this),o=M(u),a=o.colorscale,s=o.reversescale;a?l||(n=a.length,r=(0===t?a[s?n-1:0]:1===t?a[s?0:n-1]:a[Math.floor((n-1)/2)])[1]):(n=u.vertexcolor||u.facecolor||u.color,r=y.isArrayOrTypedArray(n)?n[t]||n[0]:n),i.attr("d",e[0]),r?i.call(w.fill,r):i.call(function(e){var t;e.size()&&(t="legendfill-"+u.uid,_.gradient(e,g,t,k(s,"radial"===l),a,"fill"))})})}).each(function(e){var i=e[0].trace,t="waterfall"===i.type;if(e[0]._distinct&&t){var n=e[0].trace[e[0].dir].marker;return e[0].mc=n.color,e[0].mlw=n.line.width,e[0].mlc=n.line.color,r(e,this,"waterfall")}n=[];i.visible&&t&&(n=e[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);n=x.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(n);n.enter().append("path").classed("legendwaterfall",!0).attr("transform",m).style("stroke-miterlimit",1),n.exit().remove(),n.each(function(e){var t=x.select(this),n=i[e[0]].marker,r=b(void 0,n.line,5,2);t.attr("d",e[1]).style("stroke-width",r+"px").call(w.fill,n.color),r&&t.call(w.stroke,n.line.color)})}).each(function(e){r(e,this,"funnel")}).each(function(e){r(e,this)}).each(function(e){var n=e[0].trace,r=x.select(this).select("g.legendpoints").selectAll("path.legendbox").data(n.visible&&a.traceIs(n,"box-violin")?[e]:[]);r.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),r.exit().remove(),r.each(function(){var e,t=x.select(this);"all"!==n.boxpoints&&"all"!==n.points||0!==w.opacity(n.fillcolor)||0!==w.opacity((n.line||{}).color)?(e=b(void 0,n.line,5,2),t.style("stroke-width",e+"px").call(w.fill,n.fillcolor),e&&w.stroke(t,n.line.color)):(t=y.minExtend(n,{marker:{size:h?12:y.constrain(n.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}}),r.call(_.pointStyle,t,g))})}).each(function(e){n(e,this,"funnelarea")}).each(function(e){n(e,this,"pie")}).each(function(e){var t=O(e),n=t.showFill,r=t.showLine,i=t.showGradientLine,o=t.showGradientFill,a=t.anyFill,s=t.anyLine,l=e[0],u=l.trace,t=M(u),c=t.colorscale,f=t.reversescale,a=j.hasMarkers(u)||!a?"M5,0":s?"M5,-2":"M5,-3",s=x.select(this),e=s.select(".legendfill").selectAll("path").data(n||o?[e]:[]);e.enter().append("path").classed("js-fill",!0),e.exit().remove(),e.attr("d",a+"h"+p+"v6h-"+p+"z").call(n?_.fillGroupStyle:function(e){var t;e.size()&&(t="legendfill-"+u.uid,_.gradient(e,g,t,k(f),c,"fill"))}),(r||i)&&(d=b(void 0,u.line,10,5),d=y.minExtend(u,{line:{width:d}}),d=[y.minExtend(l,{trace:d})]);var d=s.select(".legendlines").selectAll("path").data(r||i?[d]:[]);d.enter().append("path").classed("js-line",!0),d.exit().remove(),d.attr("d",a+(i?"l"+p+",0.0001":"h"+p)).call(r?_.lineGroupStyle:function(e){var t;e.size()&&(t="legendline-"+u.uid,_.lineGroupStyle(e),_.gradient(e,g,t,k(f),c,"stroke"))})}).each(function(e){var t=O(e),n=t.anyFill,r=t.anyLine,i=t.showLine,t=t.showMarker,o=e[0],a=o.trace,n=!t&&!r&&!n&&j.hasText(a);function s(e,t,n,r){e=y.nestedProperty(a,e).get(),e=y.isArrayOrTypedArray(e)&&t?t(e):e;if(h&&e&&void 0!==r&&(e=r),n){if(e<n[0])return n[0];if(e>n[1])return n[1]}return e}function l(e){return o._distinct&&o.index&&e[o.index]?e[o.index]:e[0]}{var u;(t||n||i)&&(c={},f={},t&&(c.mc=s("marker.color",l),c.mx=s("marker.symbol",l),c.mo=s("marker.opacity",y.mean,[.2,1]),c.mlc=s("marker.line.color",l),c.mlw=s("marker.line.width",y.mean,[0,5],2),f.marker={sizeref:1,sizemin:1,sizemode:"diameter"},u=s("marker.size",y.mean,[2,16],12),c.ms=u,f.marker.size=u),i&&(f.line={width:s("line.width",l,[0,10],5)}),n&&(c.tx="Aa",c.tp=s("textposition",l),c.ts=10,c.tc=s("textfont.color",l),c.tf=s("textfont.family",l)),d=[y.minExtend(o,c)],(u=y.minExtend(a,f)).selectedpoints=null,u.texttemplate=null)}var c=x.select(this).select("g.legendpoints"),f=c.selectAll("path.scatterpts").data(t?d:[]);f.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",m),f.exit().remove(),f.call(_.pointStyle,u,g),t&&(d[0].mrc=3);var d=c.selectAll("g.pointtext").data(n?d:[]);d.enter().append("g").classed("pointtext",!0).append("text").attr("transform",m),d.exit().remove(),d.selectAll("text").call(_.textPointStyle,u,g)}).each(function(e){var i=e[0].trace,e=x.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(i.visible&&"candlestick"===i.type?[e,e]:[]);e.enter().append("path").classed("legendcandle",!0).attr("d",function(e,t){return t?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",m).style("stroke-miterlimit",1),e.exit().remove(),e.each(function(e,t){var n=x.select(this),r=i[t?"increasing":"decreasing"],t=b(void 0,r.line,5,2);n.style("stroke-width",t+"px").call(w.fill,r.fillcolor),t&&w.stroke(n,r.line.color)})}).each(function(e){var i=e[0].trace,e=x.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(i.visible&&"ohlc"===i.type?[e,e]:[]);e.enter().append("path").classed("legendohlc",!0).attr("d",function(e,t){return t?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",m).style("stroke-miterlimit",1),e.exit().remove(),e.each(function(e,t){var n=x.select(this),r=i[t?"increasing":"decreasing"],t=b(void 0,r.line,5,2);n.style("fill","none").call(_.dashLine,r.line.dash,t),t&&w.stroke(n,r.line.color)})})}},{"../../lib":779,"../../registry":879,"../../traces/pie/helpers":922,"../../traces/pie/style_one":923,"../../traces/scatter/subtypes":956,"../color":647,"../colorscale/helpers":658,"../drawing":669,"./constants":698,"@plotly/d3":3}],706:[function(e,t,n){"use strict";e("./constants");t.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":708}],707:[function(e,t,n){"use strict";var y=e("../../registry"),r=e("../../plots/plots"),g=e("../../plots/cartesian/axis_ids"),i=e("../../fonts/ploticon"),o=e("../shapes/draw").eraseActiveShape,a=e("../../lib"),s=a._,t=t.exports={};function l(e,t){var n=t.currentTarget,r=n.getAttribute("data-attr"),i=n.getAttribute("data-val")||!0,o=e._fullLayout,a={},s=g.list(e,null,!0),l=o._cartesianSpikesEnabled;if("zoom"===r)for(var u,c,f,t="in"===i?.5:2,d=(1+t)/2,h=(1-t)/2,p=0;p<s.length;p++)(f=s[p]).fixedrange||(c=f._name,"auto"===i?a[c+".autorange"]=!0:"reset"===i?(void 0===f._rangeInitial?a[c+".autorange"]=!0:(u=f._rangeInitial.slice(),a[c+".range[0]"]=u[0],a[c+".range[1]"]=u[1]),void 0!==f._showSpikeInitial&&(a[c+".showspikes"]=f._showSpikeInitial,"on"!==l||f._showSpikeInitial||(l="off"))):(u=[f.r2l(f.range[0]),f.r2l(f.range[1])],a[c+".range[0]"]=f.l2r((u=[d*u[0]+h*u[1],d*u[1]+h*u[0]])[0]),a[c+".range[1]"]=f.l2r(u[1])));else"hovermode"!==r||"x"!==i&&"y"!==i||(i=o._isHoriz?"y":"x",n.setAttribute("data-val",i)),a[r]=i;o._cartesianSpikesEnabled=l,y.call("_guiRelayout",e,a)}function u(e,t){for(var n=t.currentTarget,t=n.getAttribute("data-attr"),r=n.getAttribute("data-val")||!0,i=e._fullLayout._subplots.gl3d||[],o={},a=t.split("."),s=0;s<i.length;s++)o[i[s]+"."+a[1]]=r;o.dragmode="pan"===r?r:"zoom",y.call("_guiRelayout",e,o)}function c(e,t){for(var t=t.currentTarget.getAttribute("data-attr"),n="resetLastSave"===t,r="resetDefault"===t,i=e._fullLayout,o=i._subplots.gl3d||[],a={},s=0;s<o.length;s++){var l,u=o[s],c=u+".camera",f=u+".aspectratio",d=u+".aspectmode",u=i[u]._scene;n?(a[c+".up"]=u.viewInitial.up,a[c+".eye"]=u.viewInitial.eye,a[c+".center"]=u.viewInitial.center,l=!0):r&&(a[c+".up"]=null,a[c+".eye"]=null,l=!(a[c+".center"]=null)),l&&(a[f+".x"]=u.viewInitial.aspectratio.x,a[f+".y"]=u.viewInitial.aspectratio.y,a[f+".z"]=u.viewInitial.aspectratio.z,a[d]=u.viewInitial.aspectmode)}y.call("_guiRelayout",e,a)}function f(e,t){var n=t.currentTarget,t=n._previousVal,r=e._fullLayout,i=r._subplots.gl3d||[],o=["xaxis","yaxis","zaxis"],a={},s={};if(t)s=t,n._previousVal=null;else{for(var l=0;l<i.length;l++){var u=i[l],c=r[u],f=u+".hovermode";a[f]=c.hovermode,s[f]=!1;for(var d=0;d<3;d++){var h=o[d],p=u+"."+h+".showspikes";s[p]=!1,a[p]=c[h].showspikes}}n._previousVal=a}return s}function d(e,t){for(var t=t.currentTarget,n=t.getAttribute("data-attr"),r=t.getAttribute("data-val")||!0,i=e._fullLayout,o=i._subplots.geo||[],a=0;a<o.length;a++){var s=o[a],l=i[s];"zoom"===n&&(l=l.projection.scale,y.call("_guiRelayout",e,s+".projection.scale","in"===r?2*l:.5*l))}"reset"===n&&m(e,"geo")}function h(e){e=e._fullLayout;return!e.hovermode&&(e._has("cartesian")?e._isHoriz?"y":"x":"closest")}function p(e){var t=h(e);y.call("_guiRelayout",e,"hovermode",t)}function v(e,t){for(var n=t.currentTarget.getAttribute("data-val"),r=e._fullLayout,i=r._subplots.mapbox||[],o={},a=0;a<i.length;a++){var s=i[a],l=r[s].zoom;o[s+".zoom"]="in"===n?1.05*l:l/1.05}y.call("_guiRelayout",e,o)}function m(e,t){for(var n=e._fullLayout,r=n._subplots[t]||[],i={},o=0;o<r.length;o++)for(var a=r[o],s=n[a]._subplot.viewInitial,l=Object.keys(s),u=0;u<l.length;u++){var c=l[u];i[a+"."+c]=s[c]}y.call("_guiRelayout",e,i)}t.toImage={name:"toImage",title:function(e){var t=(e._context.toImageButtonOptions||{}).format||"png";return s(e,"png"===t?"Download plot as a png":"Download plot")},icon:i.camera,click:function(t){var n=t._context.toImageButtonOptions,r={format:n.format||"png"};a.notifier(s(t,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==r.format&&a.isIE()&&(a.notifier(s(t,"IE only supports svg.  Changing format to svg."),"long"),r.format="svg"),["filename","width","height","scale"].forEach(function(e){e in n&&(r[e]=n[e])}),y.call("downloadImage",t,r).then(function(e){a.notifier(s(t,"Snapshot succeeded")+" - "+e,"long")}).catch(function(){a.notifier(s(t,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(e){return s(e,"Edit in Chart Studio")},icon:i.disk,click:function(e){r.sendDataToCloud(e)}},t.editInChartStudio={name:"editInChartStudio",title:function(e){return s(e,"Edit in Chart Studio")},icon:i.pencil,click:function(e){r.sendDataToCloud(e)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"dragmode",val:"zoom",icon:i.zoombox,click:l},t.pan2d={name:"pan2d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"dragmode",val:"pan",icon:i.pan,click:l},t.select2d={name:"select2d",_cat:"select",title:function(e){return s(e,"Box Select")},attr:"dragmode",val:"select",icon:i.selectbox,click:l},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return s(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:i.lasso,click:l},t.drawclosedpath={name:"drawclosedpath",title:function(e){return s(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:i.drawclosedpath,click:l},t.drawopenpath={name:"drawopenpath",title:function(e){return s(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:i.drawopenpath,click:l},t.drawline={name:"drawline",title:function(e){return s(e,"Draw line")},attr:"dragmode",val:"drawline",icon:i.drawline,click:l},t.drawrect={name:"drawrect",title:function(e){return s(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:i.drawrect,click:l},t.drawcircle={name:"drawcircle",title:function(e){return s(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:i.drawcircle,click:l},t.eraseshape={name:"eraseshape",title:function(e){return s(e,"Erase active shape")},icon:i.eraseshape,click:o},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:i.zoom_plus,click:l},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:i.zoom_minus,click:l},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return s(e,"Autoscale")},attr:"zoom",val:"auto",icon:i.autoscale,click:l},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return s(e,"Reset axes")},attr:"zoom",val:"reset",icon:i.home,click:l},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return s(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:i.tooltip_basic,gravity:"ne",click:l},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return s(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:i.tooltip_compare,gravity:"ne",click:l},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:i.zoombox,click:u},t.pan3d={name:"pan3d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:i.pan,click:u},t.orbitRotation={name:"orbitRotation",title:function(e){return s(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:i["3d_rotate"],click:u},t.tableRotation={name:"tableRotation",title:function(e){return s(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:i["z-axis"],click:u},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return s(e,"Reset camera to default")},attr:"resetDefault",icon:i.home,click:c},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return s(e,"Reset camera to last save")},attr:"resetLastSave",icon:i.movie,click:c},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:i.tooltip_basic,gravity:"ne",click:function(e,t){t=f(e,t);y.call("_guiRelayout",e,t)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:i.zoom_plus,click:d},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:i.zoom_minus,click:d},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return s(e,"Reset")},attr:"reset",val:null,icon:i.autoscale,click:d},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:i.tooltip_basic,gravity:"ne",click:p},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:i.tooltip_basic,gravity:"ne",click:p},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:i.tooltip_basic,gravity:"ne",click:p},t.resetViewSankey={name:"resetSankeyGroup",title:function(e){return s(e,"Reset view")},icon:i.home,click:function(e){for(var t={"node.groups":[],"node.x":[],"node.y":[]},n=0;n<e._fullData.length;n++){var r=e._fullData[n]._viewInitial;t["node.groups"].push(r.node.groups.slice()),t["node.x"].push(r.node.x.slice()),t["node.y"].push(r.node.y.slice())}y.call("restyle",e,t)}},t.toggleHover={name:"toggleHover",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:i.tooltip_basic,gravity:"ne",click:function(e,t){t=f(e,t);t.hovermode=h(e),y.call("_guiRelayout",e,t)}},t.resetViews={name:"resetViews",title:function(e){return s(e,"Reset views")},icon:i.home,click:function(e,t){var n=t.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),l(e,t),n.setAttribute("data-attr","resetLastSave"),c(e,t),m(e,"geo"),m(e,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(e){return s(e,"Toggle Spike Lines")},icon:i.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout,n=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled="on"===n?"off":"on",y.call("_guiRelayout",e,function(e){for(var t="on"===e._fullLayout._cartesianSpikesEnabled,n=g.list(e,null,!0),r={},i=0;i<n.length;i++){var o=n[i];r[o._name+".showspikes"]=t||o._showSpikeInitial}return r}(e))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return s(e,"Reset view")},attr:"reset",icon:i.home,click:function(e){m(e,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:i.zoom_plus,click:v},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:i.zoom_minus,click:v}},{"../../fonts/ploticon":761,"../../lib":779,"../../plots/cartesian/axis_ids":832,"../../plots/plots":876,"../../registry":879,"../shapes/draw":731}],708:[function(e,t,n){"use strict";var r=e("./buttons"),i=Object.keys(r),e=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],o=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(e),a=[];i.forEach(function(e){var t;t=r[e],-1===o.indexOf(t._cat||t.name)&&(e=t.name,t=(t._cat||t.name).toLowerCase(),-1===a.indexOf(e)&&a.push(e),-1===a.indexOf(t)&&a.push(t))}),a.sort(),t.exports={DRAW_MODES:e,backButtons:o,foreButtons:a}},{"./buttons":707}],709:[function(e,t,n){"use strict";var o=e("../../lib"),a=e("../color"),s=e("../../plot_api/plot_template"),l=e("./attributes");t.exports=function(e,t){var n=e.modebar||{},r=s.newContainer(t,"modebar");function i(e,t){return o.coerce(n,r,l,e,t)}i("orientation"),i("bgcolor",a.addOpacity(t.paper_bgcolor,.5));e=a.contrast(a.rgb(t.modebar.bgcolor));i("color",a.addOpacity(e,.3)),i("activecolor",a.addOpacity(e,.7)),i("uirevision",t.uirevision),i("add"),i("remove")}},{"../../lib":779,"../../plot_api/plot_template":817,"../color":647,"./attributes":706}],710:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"modebar",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),manage:e("./manage")}},{"./attributes":706,"./defaults":709,"./manage":711}],711:[function(e,t,n){"use strict";var S=e("../../plots/cartesian/axis_ids"),E=e("../../traces/scatter/subtypes"),C=e("../../registry"),L=e("../fx/helpers").isUnifiedHover,o=e("./modebar"),R=e("./buttons"),I=e("./constants").DRAW_MODES;t.exports=function(e){var t=e._fullLayout,n=e._context,r=t._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var i=n.modeBarButtons,n=Array.isArray(i)&&i.length?function(e){for(var t=0;t<e.length;t++)for(var n=e[t],r=0;r<n.length;r++){var i=n[r];if("string"==typeof i){if(void 0===R[i])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));e[t][r]=R[i]}}return e}(i):!n.displayModeBar&&n.watermark?[]:function(e){var t=e._fullLayout,n=e._fullData,r=e._context;function i(e,t){if("string"==typeof t){if(t.toLowerCase()===e.toLowerCase())return 1}else{var n=t.name,t=t._cat||t.name;if(n===e||t===e.toLowerCase())return 1}}var o=t.modebar.add;"string"==typeof o&&(o=[o]);var a=t.modebar.remove;"string"==typeof a&&(a=[a]);var s=r.modeBarButtonsToAdd.concat(o.filter(function(e){for(var t=0;t<r.modeBarButtonsToRemove.length;t++)if(i(e,r.modeBarButtonsToRemove[t]))return!1;return!0})),c=r.modeBarButtonsToRemove.concat(a.filter(function(e){for(var t=0;t<r.modeBarButtonsToAdd.length;t++)if(i(e,r.modeBarButtonsToAdd[t]))return!1;return!0})),l=t._has("cartesian"),u=t._has("gl3d"),f=t._has("geo"),d=t._has("pie"),h=t._has("funnelarea"),p=t._has("gl2d"),y=t._has("ternary"),g=t._has("mapbox"),v=t._has("polar"),m=t._has("smith"),b=t._has("sankey"),x=function(e){for(var t=S.list({_fullLayout:e},null,!0),n=0;n<t.length;n++)if(!t[n].fixedrange)return!1;return!0}(t),e=L(t.hovermode),_=[];function w(e){if(e.length){for(var t=[],n=0;n<e.length;n++){for(var r=e[n],i=R[r],o=i.name.toLowerCase(),a=(i._cat||i.name).toLowerCase(),s=!1,l=0;l<c.length;l++){var u=c[l].toLowerCase();if(u===o||u===a){s=!0;break}}s||t.push(R[r])}_.push(t)}}o=["toImage"];r.showEditInChartStudio?o.push("editInChartStudio"):r.showSendToCloud&&o.push("sendDataToCloud");w(o);var a=[],M=[],o=[],j=[];1<(l||p||d||h||y)+f+u+g+v+m?(M=["toggleHover"],o=["resetViews"]):f?(a=["zoomInGeo","zoomOutGeo"],M=["hoverClosestGeo"],o=["resetGeo"]):u?(M=["hoverClosest3d"],o=["resetCameraDefault3d","resetCameraLastSave3d"]):g?(a=["zoomInMapbox","zoomOutMapbox"],M=["toggleHover"],o=["resetViewMapbox"]):p?M=["hoverClosestGl2d"]:d?M=["hoverClosestPie"]:b?(M=["hoverClosestCartesian","hoverCompareCartesian"],o=["resetViewSankey"]):M=["toggleHover"];l&&(M=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);(function(e){for(var t=0;t<e.length;t++)if(!C.traceIs(e[t],"noHover"))return!1;return!0}(n)||e)&&(M=[]);!l&&!p||x||(a=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==o[0]&&(o=["resetScale2d"]));u?j=["zoom3d","pan3d","orbitRotation","tableRotation"]:(l||p)&&!x||y?j=["zoom2d","pan2d"]:g||f?j=["pan2d"]:v&&(j=["zoom2d"]);!function(e){for(var t=!1,n=0;n<e.length&&!t;n++){var r=e[n];r._module&&r._module.selectPoints&&(C.traceIs(r,"scatter-like")?(E.hasMarkers(r)||E.hasText(r))&&(t=!0):C.traceIs(r,"box-violin")&&"all"!==r.boxpoints&&"all"!==r.points||(t=!0))}return t}(n)||j.push("select2d","lasso2d");function k(e){-1===O.indexOf(e)&&-1!==M.indexOf(e)&&O.push(e)}var O=[];if(Array.isArray(s)){for(var A=[],T=0;T<s.length;T++){var P=s[T];"string"==typeof P?(P=P.toLowerCase(),-1!==I.indexOf(P)?(t._has("mapbox")||t._has("cartesian"))&&j.push(P):"togglespikelines"===P?k("toggleSpikelines"):"togglehover"===P?k("toggleHover"):"hovercompare"===P?k("hoverCompareCartesian"):"hoverclosest"===P?(k("hoverClosestCartesian"),k("hoverClosestGeo"),k("hoverClosest3d"),k("hoverClosestGl2d"),k("hoverClosestPie")):"v1hovermode"===P&&(k("toggleHover"),k("hoverClosestCartesian"),k("hoverCompareCartesian"),k("hoverClosestGeo"),k("hoverClosest3d"),k("hoverClosestGl2d"),k("hoverClosestPie"))):A.push(P)}s=A}return w(j),w(a.concat(o)),w(O),function(e,t){if(t.length)if(Array.isArray(t[0]))for(var n=0;n<t.length;n++)e.push(t[n]);else e.push(t);return e}(_,s)}(e);r?r.update(e,n):t._modeBar=o(e,n)}else r&&(r.destroy(),delete t._modeBar)}},{"../../plots/cartesian/axis_ids":832,"../../registry":879,"../../traces/scatter/subtypes":956,"../fx/helpers":683,"./buttons":707,"./constants":708,"./modebar":712}],712:[function(e,t,n){"use strict";var a=e("@plotly/d3"),i=e("fast-isnumeric"),s=e("../../lib"),o=e("../../fonts/ploticon"),l=new DOMParser;function r(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}e=r.prototype;e.update=function(e,t){this.graphInfo=e;var n=this.graphInfo._context,r=this.graphInfo._fullLayout,i="modebar-"+r._uid;this.element.setAttribute("id",i),this._uid=i,this.element.className="modebar","hover"===n.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===r.modebar.orientation&&(this.element.className+=" vertical",t=t.reverse());var o=r.modebar,e="hover"===n.displayModeBar?".js-plotly-plot .plotly:hover ":"";s.deleteRelatedStyleRule(i),s.addRelatedStyleRule(i,e+"#"+i+" .modebar-group","background-color: "+o.bgcolor),s.addRelatedStyleRule(i,"#"+i+" .modebar-btn .icon path","fill: "+o.color),s.addRelatedStyleRule(i,"#"+i+" .modebar-btn:hover .icon path","fill: "+o.activecolor),s.addRelatedStyleRule(i,"#"+i+" .modebar-btn.active .icon path","fill: "+o.activecolor);e=!this.hasButtons(t),i=this.hasLogo!==n.displaylogo,o=this.locale!==n.locale;this.locale=n.locale,(e||i||o)&&(this.removeAllButtons(),this.updateButtons(t),(n.watermark||n.displaylogo)&&(t=this.getLogo(),n.watermark&&(t.className=t.className+" watermark"),"v"===r.modebar.orientation?this.element.insertBefore(t,this.element.childNodes[0]):this.element.appendChild(t),this.hasLogo=!0)),this.updateActiveButton()},e.updateButtons=function(e){var r=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(e){var n=r.createGroup();e.forEach(function(e){var t=e.name;if(!t)throw new Error("must provide button 'name' in button config");if(-1!==r.buttonsNames.indexOf(t))throw new Error("button name '"+t+"' is taken");r.buttonsNames.push(t);e=r.createButton(e);r.buttonElements.push(e),n.appendChild(e)}),r.element.appendChild(n)})},e.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e},e.createButton=function(t){var n=this,e=document.createElement("a");e.setAttribute("rel","tooltip"),e.className="modebar-btn";var r=t.title;void 0===r?r=t.name:"function"==typeof r&&(r=r(this.graphInfo)),!r&&0!==r||e.setAttribute("data-title",r),void 0!==t.attr&&e.setAttribute("data-attr",t.attr);r=t.val;if(void 0!==r&&("function"==typeof r&&(r=r(this.graphInfo)),e.setAttribute("data-val",r)),"function"!=typeof t.click)throw new Error("must provide button 'click' function in button config");e.addEventListener("click",function(e){t.click(n.graphInfo,e),n.updateActiveButton(e.currentTarget)}),e.setAttribute("data-toggle",t.toggle||!1),t.toggle&&a.select(e).classed("active",!0);r=t.icon;return"function"==typeof r?e.appendChild(r()):e.appendChild(this.createIcon(r||o.question)),e.setAttribute("data-gravity",t.gravity||"n"),e},e.createIcon=function(e){var t,n=i(e.height)?Number(e.height):e.ascent-e.descent,r="http://www.w3.org/2000/svg";return e.path&&((t=document.createElementNS(r,"svg")).setAttribute("viewBox",[0,0,e.width,n].join(" ")),t.setAttribute("class","icon"),(r=document.createElementNS(r,"path")).setAttribute("d",e.path),e.transform?r.setAttribute("transform",e.transform):void 0!==e.ascent&&r.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),t.appendChild(r)),(t=e.svg?l.parseFromString(e.svg,"application/xml").childNodes[0]:t).setAttribute("height","1em"),t.setAttribute("width","1em"),t},e.updateActiveButton=function(e){var i=this.graphInfo._fullLayout,o=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var t=e.getAttribute("data-val")||!0,n=e.getAttribute("data-attr"),r="true"===e.getAttribute("data-toggle"),e=a.select(e);r?n===o&&e.classed("active",!e.classed("active")):(n=null===n?n:s.nestedProperty(i,n).get(),e.classed("active",n===t))})},e.hasButtons=function(e){var t=this.buttons;if(!t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;r++)if(e[n][r].name!==t[n][r].name)return!1}return!0},e.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plotly.com/",t.target="_blank",t.setAttribute("data-title",s._(this.graphInfo,"Produced with Plotly")),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(o.newplotlylogo)),e.appendChild(t),e},e.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},e.destroy=function(){s.removeElement(this.container.querySelector(".modebar")),s.deleteRelatedStyleRule(this._uid)},t.exports=function(e,t){var n=e._fullLayout,t=new r({graphInfo:e,container:n._modebardiv.node(),buttons:t});return n._privateplot&&a.select(t.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),t}},{"../../fonts/ploticon":761,"../../lib":779,"@plotly/d3":3,"fast-isnumeric":574}],713:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("../color/attributes"),e=(0,e("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});t.exports={visible:{valType:"boolean",editType:"plot"},buttons:e,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:r({editType:"plot"}),bgcolor:{valType:"color",dflt:i.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:i.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":817,"../../plots/font_attributes":859,"../color/attributes":646}],714:[function(e,t,n){"use strict";t.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],715:[function(e,t,n){"use strict";var l=e("../../lib"),u=e("../color"),c=e("../../plot_api/plot_template"),f=e("../../plots/array_container_defaults"),d=e("./attributes"),h=e("./constants");function p(n,r,e,t){var i=t.calendar;function o(e,t){return l.coerce(n,r,d.buttons,e,t)}o("visible")&&("all"!==(t=o("step"))&&(!i||"gregorian"===i||"month"!==t&&"year"!==t?o("stepmode"):r.stepmode="backward",o("count")),o("label"))}t.exports=function(e,t,n,r,i){var o=e.rangeselector||{},a=c.newContainer(t,"rangeselector");function s(e,t){return l.coerce(o,a,d,e,t)}s("visible",0<f(o,a,{name:"buttons",handleItemDefaults:p,calendar:i}).length)&&(s("x",(r=function(t,n,e){for(var r=e.filter(function(e){return n[e].anchor===t._id}),i=0,o=0;o<r.length;o++){var a=n[r[o]].domain;a&&(i=Math.max(a[1],i))}return[t.domain[0],i+h.yPad]}(t,n,r))[0]),s("y",r[1]),l.noneOrAll(e,t,["x","y"]),s("xanchor"),s("yanchor"),l.coerceFont(s,"font",n.font),n=s("bgcolor"),s("activecolor",u.contrast(n,h.lightAmount,h.darkAmount)),s("bordercolor"),s("borderwidth"))}},{"../../lib":779,"../../plot_api/plot_template":817,"../../plots/array_container_defaults":823,"../color":647,"./attributes":713,"./constants":714}],716:[function(e,t,n){"use strict";var f=e("@plotly/d3"),a=e("../../registry"),d=e("../../plots/plots"),r=e("../color"),h=e("../drawing"),p=e("../../lib"),y=p.strTranslate,g=e("../../lib/svg_text_utils"),s=e("../../plots/cartesian/axis_ids"),i=e("../../constants/alignment"),v=i.LINE_SPACING,m=i.FROM_TL,b=i.FROM_BR,x=e("./constants"),l=e("./get_update_object");function u(e){return e._id}function c(e,t,n){var e=p.ensureSingle(e,"rect","selector-rect",function(e){e.attr("shape-rendering","crispEdges")});e.attr({rx:x.rx,ry:x.ry}),e.call(r.stroke,t.bordercolor).call(r.fill,(e=t,(n=n)._isActive||n._isHovered?e.activecolor:e.bgcolor)).style("stroke-width",t.borderwidth+"px")}function _(e,t,n,r){p.ensureSingle(e,"text","selector-text",function(e){e.attr("text-anchor","middle")}).call(h.font,t.font).text(function(e,t){if(e.label)return t?p.templateString(e.label,t):e.label;return"all"===e.step?"all":e.count+e.step.charAt(0)}(n,r._fullLayout._meta)).call(function(e){g.convertToTspans(e,r)})}t.exports=function(o){var e=o._fullLayout._infolayer.selectAll(".rangeselector").data(function(e){for(var t=s.list(e,"x",!0),n=[],r=0;r<t.length;r++){var i=t[r];i.rangeselector&&i.rangeselector.visible&&n.push(i)}return n}(o),u);e.enter().append("g").classed("rangeselector",!0),e.exit().remove(),e.style({cursor:"pointer","pointer-events":"all"}),e.each(function(e){var t=f.select(this),r=e,i=r.rangeselector,e=t.selectAll("g.button").data(p.filterVisible(i.buttons));e.enter().append("g").classed("button",!0),e.exit().remove(),e.each(function(e){var t=f.select(this),n=l(r,e);e._isActive=function(e,t,n){{if("all"===t.step)return!0===e.autorange;t=Object.keys(n);return e.range[0]===n[t[0]]&&e.range[1]===n[t[1]]}}(r,e,n),t.call(c,i,e),t.call(_,i,e,o),t.on("click",function(){o._dragged||a.call("_guiRelayout",o,n)}),t.on("mouseover",function(){e._isHovered=!0,t.call(c,i,e)}),t.on("mouseout",function(){e._isHovered=!1,t.call(c,i,e)})}),function(e,t,a,n,r){var s=0,l=0,u=a.borderwidth;t.each(function(){var e=f.select(this).select(".selector-text"),t=a.font.size*v,e=Math.max(t*g.lineCount(e),16)+3;l=Math.max(l,e)}),t.each(function(){var e=f.select(this),t=e.select(".selector-rect"),n=e.select(".selector-text"),r=n.node()&&h.bBox(n.node()).width,i=a.font.size*v,o=g.lineCount(n),r=Math.max(r+10,x.minButtonWidth);e.attr("transform",y(u+s,u)),t.attr({x:0,y:0,width:r,height:l}),g.positionText(n,r/2,l/2-(o-1)*i/2+3),s+=r+5});var i=e._fullLayout._size,o=i.l+i.w*a.x,c=i.t+i.h*(1-a.y),t="left";p.isRightAnchor(a)&&(o-=s,t="right");p.isCenterAnchor(a)&&(o-=s/2,t="center");i="top";p.isBottomAnchor(a)&&(c-=l,i="bottom");p.isMiddleAnchor(a)&&(c-=l/2,i="middle");s=Math.ceil(s),l=Math.ceil(l),o=Math.round(o),c=Math.round(c),d.autoMargin(e,n+"-range-selector",{x:a.x,y:a.y,l:s*m[t],r:s*b[t],b:l*b[i],t:l*m[i]}),r.attr("transform",y(o,c))}(o,e,i,r._name,t)})}},{"../../constants/alignment":752,"../../lib":779,"../../lib/svg_text_utils":804,"../../plots/cartesian/axis_ids":832,"../../plots/plots":876,"../../registry":879,"../color":647,"../drawing":669,"./constants":714,"./get_update_object":717,"@plotly/d3":3}],717:[function(e,t,n){"use strict";var u=e("d3-time"),c=e("../../lib").titleCase;t.exports=function(e,t){var n=e._name,r={};return"all"===t.step?r[n+".autorange"]=!0:(t=function(e,t){var n,r=e.range,i=new Date(e.r2l(r[1])),o=t.step,a=u["utc"+c(o)],s=t.count;switch(t.stepmode){case"backward":n=e.l2r(+a.offset(i,-s));break;case"todate":var l=a.offset(i,-s);n=e.l2r(+a.ceil(l))}r=r[1];return[n,r]}(e,t),r[n+".range[0]"]=t[0],r[n+".range[1]"]=t[1]),r}},{"../../lib":779,"d3-time":630}],718:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":713,"./defaults":715,"./draw":716}],719:[function(e,t,n){"use strict";e=e("../color/attributes");t.exports={bgcolor:{valType:"color",dflt:e.background,editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":646}],720:[function(e,t,n){"use strict";var o=e("../../plots/cartesian/axis_ids").list,a=e("../../plots/cartesian/autorange").getAutoRange,s=e("./constants");t.exports=function(e){for(var t=o(e,"x",!0),n=0;n<t.length;n++){var r=t[n],i=r[s.name];i&&i.visible&&i.autorange&&(i._input.autorange=!0,i._input.range=i.range=a(e,r))}}},{"../../plots/cartesian/autorange":827,"../../plots/cartesian/axis_ids":832,"./constants":721}],721:[function(e,t,n){"use strict";t.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],722:[function(e,t,n){"use strict";var p=e("../../lib"),y=e("../../plot_api/plot_template"),g=e("../../plots/cartesian/axis_ids"),v=e("./attributes"),m=e("./oppaxis_attributes");t.exports=function(e,t,n){var r=e[n],e=t[n];if(r.rangeslider||t._requestRangeslider[e._id]){p.isPlainObject(r.rangeslider)||(r.rangeslider={});var i=r.rangeslider,o=y.newContainer(e,"rangeslider");if(d("visible")){d("bgcolor",t.plot_bgcolor),d("bordercolor"),d("borderwidth"),d("thickness"),d("autorange",!e.isValidRange(i.range)),d("range");e=t._subplots;if(e)for(var e=e.cartesian.filter(function(e){return e.substr(0,e.indexOf("y"))===g.name2id(n)}).map(function(e){return e.substr(e.indexOf("y"),e.length)}),a=p.simpleMap(e,g.id2name),s=0;s<a.length;s++){var l,u=a[s],c=i[u]||{},f=y.newContainer(o,u,"yaxis"),u=t[u];"match"!==h("rangemode",l=c.range&&u.isValidRange(c.range)?"fixed":l)&&h("range",u.range.slice())}o._input=i}}function d(e,t){return p.coerce(i,o,v,e,t)}function h(e,t){return p.coerce(c,f,m,e,t)}}},{"../../lib":779,"../../plot_api/plot_template":817,"../../plots/cartesian/axis_ids":832,"./attributes":719,"./oppaxis_attributes":726}],723:[function(e,t,n){"use strict";var A=e("@plotly/d3"),T=e("../../registry"),d=e("../../plots/plots"),P=e("../../lib"),S=P.strTranslate,a=e("../drawing"),l=e("../color"),E=e("../titles"),h=e("../../plots/cartesian"),C=e("../../plots/cartesian/axis_ids"),L=e("../dragelement"),R=e("../../lib/setcursor"),I=e("./constants");function z(e,t,n,r){var i=P.ensureSingle(e,"rect",I.bgClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),o=r.borderwidth%2==0?r.borderwidth:r.borderwidth-1,e=-r._offsetShift,t=a.crispRound(t,r.borderwidth);i.attr({width:r._width+o,height:r._height+o,transform:S(e,e),fill:r.bgcolor,stroke:r.bordercolor,"stroke-width":t})}function D(e,t,n,r){t=t._fullLayout;P.ensureSingleById(t._topdefs,"clipPath",r._clipId,function(e){e.append("rect").attr({x:0,y:0})}).select("rect").attr({width:r._width,height:r._height})}function N(e,s,l,u){var c,f=s.calcdata,e=e.selectAll("g."+I.rangePlotClassName).data(l._subplotsWith,P.identity);e.enter().append("g").attr("class",function(e){return I.rangePlotClassName+" "+e}).call(a.setClipUrl,u._clipId,s),e.order(),e.exit().remove(),e.each(function(e,t){var n=A.select(this),r=0===t,i=C.getFromId(s,e,"y"),o=i._name,a=u[o],t={data:[],layout:{xaxis:{type:l.type,domain:[0,1],range:u.range.slice(),calendar:l.calendar},width:u._width,height:u._height,margin:{t:0,b:0,l:0,r:0}},_context:s._context};l.rangebreaks&&(t.layout.xaxis.rangebreaks=l.rangebreaks),t.layout[o]={type:i.type,domain:[0,1],range:("match"!==a.rangemode?a:i).range.slice(),calendar:i.calendar},i.rangebreaks&&(t.layout[o].rangebreaks=i.rangebreaks),d.supplyDefaults(t);i=t._fullLayout.xaxis,o=t._fullLayout[o];i.clearCalc(),i.setScale(),o.clearCalc(),o.setScale();o={id:e,plotgroup:n,xaxis:i,yaxis:o,isRangePlot:!0};r?c=o:(o.mainplot="xy",o.mainplotinfo=c),h.rangePlot(s,o,function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=i[0].trace;o.xaxis+o.yaxis===t&&n.push(i)}return n}(f,e))})}function F(e,t,n,r,i){P.ensureSingle(e,"rect",I.maskMinClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",r._height).call(l.fill,I.maskColor),P.ensureSingle(e,"rect",I.maskMaxClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",r._height).call(l.fill,I.maskColor),"match"!==i.rangemode&&(P.ensureSingle(e,"rect",I.maskMinOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",r._width).call(l.fill,I.maskOppAxisColor),P.ensureSingle(e,"rect",I.maskMaxOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",r._width).style("border-top",I.maskOppBorder).call(l.fill,I.maskOppAxisColor))}function B(e,t,n,r){t._context.staticPlot||P.ensureSingle(e,"rect",I.slideBoxClassName,function(e){e.attr({y:0,cursor:I.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:r._height,fill:I.slideBoxFill})}function U(e,t,n,r){var i=P.ensureSingle(e,"g",I.grabberMinClassName),o=P.ensureSingle(e,"g",I.grabberMaxClassName),a={x:0,width:I.handleWidth,rx:I.handleRadius,fill:l.background,stroke:l.defaultLine,"stroke-width":I.handleStrokeWidth,"shape-rendering":"crispEdges"},e={y:Math.round(r._height/4),height:Math.round(r._height/2)};P.ensureSingle(i,"rect",I.handleMinClassName,function(e){e.attr(a)}).attr(e),P.ensureSingle(o,"rect",I.handleMaxClassName,function(e){e.attr(a)}).attr(e);var s={width:I.grabAreaWidth,x:0,y:0,fill:I.grabAreaFill,cursor:t._context.staticPlot?void 0:I.grabAreaCursor};P.ensureSingle(i,"rect",I.grabAreaMinClassName,function(e){e.attr(s)}).attr("height",r._height),P.ensureSingle(o,"rect",I.grabAreaMaxClassName,function(e){e.attr(s)}).attr("height",r._height)}t.exports=function(k){for(var O=k._fullLayout,e=O._rangeSliderData,t=0;t<e.length;t++){var n=e[t][I.name];n._clipId=n._id+"-"+O._uid}var r=O._infolayer.selectAll("g."+I.containerClassName).data(e,function(e){return e._name});r.exit().each(function(e){e=e[I.name];O._topdefs.select("#"+e._clipId).remove()}).remove(),0!==e.length&&(r.enter().append("g").classed(I.containerClassName,!0).attr("pointer-events","all"),r.each(function(e){var t=A.select(this),n=e[I.name],r=O[C.id2name(e.anchor)],i=n[C.id2name(e.anchor)];n.range&&(a=P.simpleMap(n.range,e.r2l),a=(o=P.simpleMap(e.range,e.r2l))[0]<o[1]?[Math.min(a[0],o[0]),Math.max(a[1],o[1])]:[Math.max(a[0],o[0]),Math.min(a[1],o[1])],n.range=n._input.range=P.simpleMap(a,e.l2r)),e.cleanRange("rangeslider.range");var o=O._size,a=e.domain;n._width=o.w*(a[1]-a[0]);a=Math.round(o.l+o.w*a[0]),o=Math.round(o.t+o.h*(1-e._counterDomainMin)+("bottom"===e.side?e._depth:0)+n._offsetShift+I.extraPad);t.attr("transform",S(a,o)),n._rl=P.simpleMap(n.range,e.r2l);var s,l,u,v,m,b,x,_,w,c=n._rl[0],a=n._rl[1],f=a-c;if(n.p2d=function(e){return e/n._width*f+c},n.d2p=function(e){return(e-c)/f*n._width},e.rangebreaks){var d=e.locateBreaks(c,a);if(d.length){for(var h,p=0,y=0;y<d.length;y++)p+=(h=d[y]).max-h.min;var g=n._width/(a-c-p),M=[-g*c];for(y=0;y<d.length;y++)h=d[y],M.push(M[M.length-1]-g*(h.max-h.min));for(n.d2p=function(e){for(var t=M[0],n=0;n<d.length;n++){var r=d[n];if(e>=r.max)t=M[n+1];else if(e<r.min)break}return t+g*e},y=0;y<d.length;y++)(h=d[y]).pmin=n.d2p(h.min),h.pmax=n.d2p(h.max);n.p2d=function(e){for(var t=M[0],n=0;n<d.length;n++){var r=d[n];if(e>=r.pmax)t=M[n+1];else if(e<r.pmin)break}return(e-t)/g}}}function j(){var e=A.event,f=e.target,d=e.clientX||e.touches[0].clientX,h=d-u.node().getBoundingClientRect().left,p=b.d2p(m._rl[0]),y=b.d2p(m._rl[1]),g=L.coverSlip();function t(e){var t,n,r,i,o,a,s,l,u=+(e.clientX||e.touches[0].clientX)-d;switch(f){case x:t="ew-resize",r=p+u,n=y+u;break;case _:t="col-resize",r=p+u,n=y;break;case w:t="col-resize",r=p,n=y+u;break;default:t="ew-resize",n=(r=h)+u}function c(e){return o.l2r(P.constrain(e,a._rl[0],a._rl[1]))}n<r&&(e=n,n=r,r=e),b._pixelMin=r,b._pixelMax=n,R(A.select(g),t),i=v,o=m,s=c((a=b).p2d(a._pixelMin)),l=c(a.p2d(a._pixelMax)),window.requestAnimationFrame(function(){T.call("_guiRelayout",i,o._name+".range",[s,l])})}function n(){g.removeEventListener("mousemove",t),g.removeEventListener("mouseup",n),this.removeEventListener("touchmove",t),this.removeEventListener("touchend",n),P.removeElement(g)}this.addEventListener("touchmove",t),this.addEventListener("touchend",n),g.addEventListener("mousemove",t),g.addEventListener("mouseup",n)}"match"!==i.rangemode&&(s=r.r2l(i.range[0]),l=r.r2l(i.range[1])-s,n.d2pOppAxis=function(e){return(e-s)/l*n._height}),t.call(z,k,e,n).call(D,k,e,n).call(N,k,e,n).call(F,k,e,n,i).call(B,k,e,n).call(U,k,e,n),u=t,m=e,b=n,(v=k)._context.staticPlot||(x=u.select("rect."+I.slideBoxClassName).node(),_=u.select("rect."+I.grabAreaMinClassName).node(),w=u.select("rect."+I.grabAreaMaxClassName).node(),u.on("mousedown",j),u.on("touchstart",j)),function(e,t,n,r,i){var o=I.handleWidth/2;function a(e){return P.constrain(e,0,n._width)}function s(e){return P.constrain(e,0,n._height)}function l(e){return P.constrain(e,-o,n._width+o)}var u=a(n.d2p(t._rl[0])),t=a(n.d2p(t._rl[1]));e.select("rect."+I.slideBoxClassName).attr("x",u).attr("width",t-u),e.select("rect."+I.maskMinClassName).attr("width",u),e.select("rect."+I.maskMaxClassName).attr("x",t).attr("width",n._width-t),"match"!==i.rangemode&&(i=n._height-s(n.d2pOppAxis(r._rl[1])),r=n._height-s(n.d2pOppAxis(r._rl[0])),e.select("rect."+I.maskMinOppAxisClassName).attr("x",u).attr("height",i).attr("width",t-u),e.select("rect."+I.maskMaxOppAxisClassName).attr("x",u).attr("y",r).attr("height",n._height-r).attr("width",t-u),e.select("rect."+I.slideBoxClassName).attr("y",i).attr("height",r-i));u=Math.round(l(u-o))-.5,t=Math.round(l(t-o))+.5;e.select("g."+I.grabberMinClassName).attr("transform",S(u,.5)),e.select("g."+I.grabberMaxClassName).attr("transform",S(t,.5))}(t,e,n,r,i),"bottom"===e.side&&E.draw(k,e._id+"title",{propContainer:e,propName:e._name+".title",placeholder:O._dfltTitle.x,attributes:{x:e._offset+e._length/2,y:o+n._height+n._offsetShift+10+1.5*e.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":779,"../../lib/setcursor":799,"../../plots/cartesian":842,"../../plots/cartesian/axis_ids":832,"../../plots/plots":876,"../../registry":879,"../color":647,"../dragelement":666,"../drawing":669,"../titles":745,"./constants":721,"@plotly/d3":3}],724:[function(e,t,n){"use strict";var s=e("../../plots/cartesian/axis_ids"),a=e("../../lib/svg_text_utils"),l=e("./constants"),u=e("../../constants/alignment").LINE_SPACING,c=l.name;function f(e){e=e&&e[c];return e&&e.visible}n.isVisible=f,n.makeData=function(e){var t=s.list({_fullLayout:e},"x",!0),n=e.margin,r=[];if(!e._has("gl2d"))for(var i=0;i<t.length;i++){var o,a=t[i];f(a)&&(r.push(a),(o=a[c])._id=c+a._id,o._height=(e.height-n.b-n.t)*o.thickness,o._offsetShift=Math.floor(o.borderwidth/2))}e._rangeSliderData=r},n.autoMarginOpts=function(e,t){var n=e._fullLayout,r=t[c],i=t._id.charAt(0),o=0,e=0;return"bottom"===t.side&&(o=t._depth,t.title.text!==n._dfltTitle[i]&&(e=1.5*t.title.font.size+10+r._offsetShift,e+=(t.title.text.match(a.BR_TAG_ALL)||[]).length*t.title.font.size*u)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:r._height+o+Math.max(n.margin.b,e),pad:l.extraPad+2*r._offsetShift}}},{"../../constants/alignment":752,"../../lib/svg_text_utils":804,"../../plots/cartesian/axis_ids":832,"./constants":721}],725:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./attributes"),o=e("./oppaxis_attributes"),a=e("./helpers");t.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:r.extendFlat({},i,{yaxis:o})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw"),isVisible:a.isVisible,makeData:a.makeData,autoMarginOpts:a.autoMarginOpts}},{"../../lib":779,"./attributes":719,"./calc_autorange":720,"./defaults":722,"./draw":723,"./helpers":724,"./oppaxis_attributes":726}],726:[function(e,t,n){"use strict";t.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],727:[function(e,t,n){"use strict";var r=e("../annotations/attributes"),i=e("../../traces/scatter/attributes").line,o=e("../drawing/attributes").dash,a=e("../../lib/extend").extendFlat,s=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects");t.exports=s("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:a({},r.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:a({},r.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:a({},i.color,{editType:"arraydraw"}),width:a({},i.width,{editType:"calc+arraydraw"}),dash:a({},o,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":753,"../../lib/extend":772,"../../plot_api/plot_template":817,"../../traces/scatter/attributes":931,"../annotations/attributes":637,"../drawing/attributes":668}],728:[function(e,t,n){"use strict";var c=e("../../lib"),f=e("../../plots/cartesian/axes"),d=e("./constants"),h=e("./helpers");function p(e,t,n,r,i,o){var a=e/2,e=o;if("pixel"!==t)return{ppad:a};n=i?h.extractPathCoords(i,o?d.paramIsY:d.paramIsX):[n,r],r=c.aggNums(Math.max,null,n),n=c.aggNums(Math.min,null,n),n=n<0?Math.abs(n)+a:a,r=0<r?r+a:a;return{ppad:a,ppadplus:e?n:r,ppadminus:e?r:n}}function y(e,t,n,r,i){var o="category"===e.type||"multicategory"===e.type?e.r2c:e.d2c;if(void 0!==t)return[o(t),o(n)];if(r){var a,s,l,u=1/0,c=-1/0,f=r.match(d.segmentRE);for("date"===e.type&&(o=h.decodeDate(o)),a=0;a<f.length;a++)void 0!==(l=i[f[a].charAt(0)].drawn)&&(!(s=f[a].substr(1).match(d.paramRE))||s.length<l||((l=o(s[l]))<u&&(u=l),c<l&&(c=l)));return u<=c?[u,c]:void 0}}t.exports=function(e){var t=e._fullLayout,n=c.filterVisible(t.shapes);if(n.length&&e._fullData.length)for(var r=0;r<n.length;r++){var i=n[r];i._extremes={};var o,a,s,l=f.getRefType(i.xref),u=f.getRefType(i.yref);"paper"!==i.xref&&"domain"!==l&&(a="pixel"===i.xsizemode?i.xanchor:i.x0,s="pixel"===i.xsizemode?i.xanchor:i.x1,(a=y(o=f.getFromId(e,i.xref),a,s,i.path,d.paramIsX))&&(i._extremes[o._id]=f.findExtremes(o,a,p(i.line.width,i.xsizemode,i.x0,i.x1,i.path,!1)))),"paper"!==i.yref&&"domain"!==u&&(s="pixel"===i.ysizemode?i.yanchor:i.y0,u="pixel"===i.ysizemode?i.yanchor:i.y1,(a=y(o=f.getFromId(e,i.yref),s,u,i.path,d.paramIsY))&&(i._extremes[o._id]=f.findExtremes(o,a,p(i.line.width,i.ysizemode,i.y0,i.y1,i.path,!0))))}}},{"../../lib":779,"../../plots/cartesian/axes":828,"./constants":729,"./helpers":738}],729:[function(e,t,n){"use strict";t.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],730:[function(e,t,n){"use strict";var x=e("../../lib"),_=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),w=e("./attributes"),M=e("./helpers");function i(n,r,e){function t(e,t){return x.coerce(n,r,w,e,t)}if(t("visible")){var i=t("path"),o=t("type",i?"path":"rect");"path"!==r.type&&delete r.path,t("editable"),t("layer"),t("opacity"),t("fillcolor"),t("fillrule"),t("line.width")&&(t("line.color"),t("line.dash"));for(var a=t("xsizemode"),s=t("ysizemode"),l=["x","y"],u=0;u<2;u++){var c,f,d,h,p=l[u],y=p+"anchor",g="x"===p?a:s,v={_fullLayout:e},m=_.coerceRef(n,r,v,p,void 0,"paper"),b="range"===_.getRefType(m)?((d=_.getFromId(v,m))._shapeIndices.push(r._index),c=M.rangeToShapePosition(d),M.shapePositionToRange(d)):c=x.identity;"path"!==o&&(h=n[f=p+"0"],p=n[d=p+"1"],n[f]=b(n[f],!0),n[d]=b(n[d],!0),"pixel"===g?(t(f,0),t(d,10)):(_.coercePosition(r,v,t,m,f,.25),_.coercePosition(r,v,t,m,d,.75)),r[f]=c(r[f]),r[d]=c(r[d]),n[f]=h,n[d]=p),"pixel"===g&&(g=n[y],n[y]=b(n[y],!0),_.coercePosition(r,v,t,m,y,.25),r[y]=c(r[y]),n[y]=g)}"path"===o?t("path"):x.noneOrAll(n,r,["x0","x1","y0","y1"])}}t.exports=function(e,t){r(e,t,{name:"shapes",handleItemDefaults:i})}},{"../../lib":779,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"./attributes":727,"./helpers":738}],731:[function(e,t,n){"use strict";var re=e("../../registry"),ie=e("../../lib"),oe=e("../../plots/cartesian/axes"),ae=e("./draw_newshape/helpers").readPaths,se=e("./draw_newshape/display_outlines"),o=e("../../plots/cartesian/handle_outline").clearOutlineControllers,le=e("../color"),ue=e("../drawing"),ce=e("../../plot_api/plot_template").arrayEditor,fe=e("../dragelement"),de=e("../../lib/setcursor"),he=e("./constants"),pe=e("./helpers");function ye(e){var t,n=e._fullLayout;for(t in n._shapeUpperLayer.selectAll("path").remove(),n._shapeLowerLayer.selectAll("path").remove(),n._plots){var r=n._plots[t].shapelayer;r&&r.selectAll("path").remove()}for(var i=0;i<n.shapes.length;i++)n.shapes[i].visible&&a(e,i)}function ge(e){return e._fullLayout._drawing}function ve(e){return!e._context.edits.shapePosition}function a(J,ee){J._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+ee+'"]').remove();var e=pe.makeOptionsAndPlotinfo(J,ee),te=e.options,ne=e.plotinfo;function t(e){var t=be(J,te),n={"data-index":ee,"fill-rule":te.fillrule,d:t},r=te.opacity,i=te.fillcolor,o=te.line.width?te.line.color:"rgba(0,0,0,0)",a=te.line.width,s=te.line.dash;a||!0!==te.editable||(a=5,s="solid");var l="Z"!==t[t.length-1],u=ve(J)&&te.editable&&J._fullLayout._activeShapeIndex===ee;u&&(i=l?"rgba(0,0,0,0)":J._fullLayout.activeshape.fillcolor,r=J._fullLayout.activeshape.opacity);var c,f,d,h,p,y,g,v,m,b,x,_,w,M,j,k,O,A,T,P,S,E,C,L,R,I,z,D,N,F,B,U,q,H,V,G,W,Y=e.append("path").attr(n).style("opacity",r).call(le.stroke,o).call(le.fill,i).call(ue.dashLine,s,a);function X(e){var t,n,r,i;E=ge(c)?null:z?"path"===e.target.tagName?"move":"start-point"===e.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point":(t=(r=W.element.getBoundingClientRect()).right-r.left,i=r.bottom-r.top,n=e.clientX-r.left,r=e.clientY-r.top,i=!D&&C<t&&L<i&&!e.shiftKey?fe.getCursor(n/t,1-r/i):"move",de(f,i),i.split("-")[0])}function Z(t,n){var e,r;"path"===d.type?(r=e=function(e){return e},R?N("xanchor",d.xanchor=V(x+t)):(e=function(e){return V(q(e)+t)},F&&"date"===F.type&&(e=pe.encodeDate(e))),I?N("yanchor",d.yanchor=G(_+n)):(r=function(e){return G(H(e)+n)},B&&"date"===B.type&&(r=pe.encodeDate(r))),N("path",d.path=xe(S,e,r))):(R?N("xanchor",d.xanchor=V(x+t)):(N("x0",d.x0=V(g+t)),N("x1",d.x1=V(m+t))),I?N("yanchor",d.yanchor=G(_+n)):(N("y0",d.y0=G(v+n)),N("y1",d.y1=G(b+n)))),f.attr("d",be(c,d)),K(p,d)}function $(t,n){var e,r,i,o,a,s;D?(e=o=function(e){return e},R?N("xanchor",d.xanchor=V(x+t)):(o=function(e){return V(q(e)+t)},F&&"date"===F.type&&(o=pe.encodeDate(o))),I?N("yanchor",d.yanchor=G(_+n)):(e=function(e){return G(H(e)+n)},B&&"date"===B.type&&(e=pe.encodeDate(e))),N("path",d.path=xe(S,o,e))):z?"resize-over-start-point"===E?(r=g+t,a=I?v-n:v+n,N("x0",d.x0=R?r:V(r)),N("y0",d.y0=I?a:G(a))):"resize-over-end-point"===E&&(s=m+t,i=I?b-n:b+n,N("x1",d.x1=R?s:V(s)),N("y1",d.y1=I?i:G(i))):(e=(o=function(e){return-1!==E.indexOf(e)})("n"),r=o("s"),a=o("w"),s=o("e"),i=e?w+n:w,o=r?M+n:M,a=a?j+t:j,s=s?k+t:k,I&&(e&&(i=w-n),r&&(o=M-n)),(!I&&L<o-i||I&&L<i-o)&&(N(O,d[O]=I?i:G(i)),N(A,d[A]=I?o:G(o))),C<s-a&&(N(T,d[T]=R?a:V(a)),N(P,d[P]=R?s:V(s)))),f.attr("d",be(c,d)),K(p,d)}function K(i,o){(R||I)&&function(){var e="path"!==o.type,t=i.selectAll(".visual-cue").data([0]);t.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var n=q(R?o.xanchor:ie.midRange(e?[o.x0,o.x1]:pe.extractPathCoords(o.path,he.paramIsX))),e=H(I?o.yanchor:ie.midRange(e?[o.y0,o.y1]:pe.extractPathCoords(o.path,he.paramIsY)));{var r;n=pe.roundPositionForSharpStrokeRendering(n,1),e=pe.roundPositionForSharpStrokeRendering(e,1),R&&I?(r="M"+(n-1-1)+","+(e-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z",t.attr("d",r)):R?(r="M"+(n-1-1)+","+(e-9-1)+"v18 h2 v-18 Z",t.attr("d",r)):(e="M"+(n-9-1)+","+(e-1-1)+"h18 v2 h-18 Z",t.attr("d",e))}}()}function Q(e){e.selectAll(".visual-cue").remove()}me(Y,J,te),(u||J._context.edits.shapePosition)&&(U=ce(J.layout,"shapes",te)),u?(Y.style({cursor:"move"}),u={element:Y.node(),plotinfo:ne,gd:J,editHelpers:U,isActiveShape:!0},t=ae(t,J),se(t,Y,u)):J._context.edits.shapePosition?(c=J,f=Y,h=ee,p=e,y=U,L=C=10,R="pixel"===(d=te).xsizemode,I="pixel"===d.ysizemode,z="line"===d.type,D="path"===d.type,N=y.modifyItem,F=oe.getFromId(c,d.xref),e=oe.getRefType(d.xref),B=oe.getFromId(c,d.yref),U=oe.getRefType(d.yref),q=pe.getDataToPixel(c,F,!1,e),H=pe.getDataToPixel(c,B,!0,U),V=pe.getPixelToData(c,F,!1,e),G=pe.getPixelToData(c,B,!0,U),U=z?function(){var e=Math.max(d.line.width,10),t=p.append("g").attr("data-index",h);t.append("path").attr("d",f.attr("d")).style({cursor:"move","stroke-width":e,"stroke-opacity":"0"});var n={"fill-opacity":"0"},e=Math.max(e/2,10);return t.append("circle").attr({"data-line-point":"start-point",cx:R?q(d.xanchor)+d.x0:q(d.x0),cy:I?H(d.yanchor)-d.y0:H(d.y0),r:e}).style(n).classed("cursor-grab",!0),t.append("circle").attr({"data-line-point":"end-point",cx:R?q(d.xanchor)+d.x1:q(d.x1),cy:I?H(d.yanchor)-d.y1:H(d.y1),r:e}).style(n).classed("cursor-grab",!0),t}():f,W={element:U.node(),gd:c,prepFn:function(e){ge(c)||(R&&(x=q(d.xanchor)),I&&(_=H(d.yanchor)),"path"===d.type?S=d.path:(g=R?d.x0:q(d.x0),v=I?d.y0:H(d.y0),m=R?d.x1:q(d.x1),b=I?d.y1:H(d.y1)),P=g<m?(j=g,T="x0",k=m,"x1"):(j=m,T="x1",k=g,"x0"),A=!I&&v<b||I&&b<v?(w=v,O="y0",M=b,"y1"):(w=b,O="y1",M=v,"y0"),X(e),K(p,d),function(e,t,n){var r=t.xref,i=t.yref,o=oe.getFromId(n,r),a=oe.getFromId(n,i),t="";"paper"===r||o.autorange||(t+=r);"paper"===i||a.autorange||(t+=i);ue.setClipUrl(e,t?"clip"+n._fullLayout._uid+t:null,n)}(f,d,c),W.moveFn="move"===E?Z:$,W.altKey=e.altKey)},doneFn:function(){ge(c)||(de(f),Q(p),me(f,c,d),re.call("_guiRelayout",c,y.getUpdateObj()))},clickFn:function(){ge(c)||Q(p)}},fe.init(W),U.node().onmousemove=X):!0===te.editable&&Y.style("pointer-events",l||le.opacity(i)*r<=.5?"stroke":"all"),Y.node().addEventListener("click",function(){var e,t;t=Y,!ve(e=J)||0<=(t=+t.node().getAttribute("data-index"))&&(t!==e._fullLayout._activeShapeIndex?(e._fullLayout._activeShapeIndex=t,e._fullLayout._deactivateShape=_e,ye(e)):_e(e))})}te._input&&!1!==te.visible&&("below"!==te.layer?t(J._fullLayout._shapeUpperLayer):"paper"!==te.xref&&"paper"!==te.yref&&ne._hadPlotinfo?t((ne.mainplotinfo||ne).shapelayer):t(J._fullLayout._shapeLowerLayer))}function me(e,t,n){n=(n.xref+n.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");ue.setClipUrl(e,n?"clip"+t._fullLayout._uid+n:null,t)}function be(e,t){var n,r,s,l,u,c,f,d,i=t.type,o=oe.getRefType(t.xref),a=oe.getRefType(t.yref),h=oe.getFromId(e,t.xref),p=oe.getFromId(e,t.yref),y=e._fullLayout._size,e=h?"domain"===o?function(e){return h._offset+h._length*e}:(n=pe.shapePositionToRange(h),function(e){return h._offset+h.r2p(n(e,!0))}):function(e){return y.l+y.w*e},o=p?"domain"===a?function(e){return p._offset+p._length*(1-e)}:(r=pe.shapePositionToRange(p),function(e){return p._offset+p.r2p(r(e,!0))}):function(e){return y.t+y.h*(1-e)};if("path"===i)return h&&"date"===h.type&&(e=pe.decodeDate(e)),p&&"date"===p.type&&(o=pe.decodeDate(o)),s=e,l=o,a=t.path,u=t.xsizemode,c=t.ysizemode,f=t.xanchor,d=t.yanchor,a.replace(he.segmentRE,function(e){var t=0,n=e.charAt(0),r=he.paramIsX[n],i=he.paramIsY[n],o=he.numParams[n],a=e.substr(1).replace(he.paramRE,function(e){return r[t]?e="pixel"===u?s(f)+Number(e):s(e):i[t]&&(e="pixel"===c?l(d)-Number(e):l(e)),e=o<++t?"X":e});return o<t&&(a=a.replace(/[\s,]*X.*/,""),ie.log("Ignoring extra params in segment "+e)),n+a});if(g="pixel"===t.xsizemode?(v=(g=e(t.xanchor))+t.x0,g+t.x1):(v=e(t.x0),e(t.x1)),t="pixel"===t.ysizemode?(m=(e=o(t.yanchor))-t.y0,e-t.y1):(m=o(t.y0),o(t.y1)),"line"===i)return"M"+v+","+m+"L"+g+","+t;if("rect"===i)return"M"+v+","+m+"H"+g+"V"+t+"H"+v+"Z";var i=(v+g)/2,g=(m+t)/2,t=Math.abs(i-v),v=Math.abs(g-m),m="A"+t+","+v,t=i+t+","+g;return"M"+t+m+" 0 1,1 "+(i+","+(g-v))+m+" 0 0,1 "+t+"Z"}function xe(e,a,s){return e.replace(he.segmentRE,function(e){var t=0,n=e.charAt(0),r=he.paramIsX[n],i=he.paramIsY[n],o=he.numParams[n];return n+e.substr(1).replace(he.paramRE,function(e){return o<=t||(r[t]?e=a(e):i[t]&&(e=s(e)),t++),e})})}function _e(e){ve(e)&&0<=e._fullLayout._activeShapeIndex&&(o(e),delete e._fullLayout._activeShapeIndex,ye(e))}t.exports={draw:ye,drawOne:a,eraseActiveShape:function(e){if(ve(e)){o(e);var t=e._fullLayout._activeShapeIndex,n=(e.layout||{}).shapes||[];if(t<n.length){for(var r=[],i=0;i<n.length;i++)i!==t&&r.push(n[i]);delete e._fullLayout._activeShapeIndex,re.call("_guiRelayout",e,{shapes:r})}}}}},{"../../lib":779,"../../lib/setcursor":799,"../../plot_api/plot_template":817,"../../plots/cartesian/axes":828,"../../plots/cartesian/handle_outline":839,"../../registry":879,"../color":647,"../dragelement":666,"../drawing":669,"./constants":729,"./draw_newshape/display_outlines":735,"./draw_newshape/helpers":736,"./helpers":738}],732:[function(e,t,n){"use strict";var r=e("../../drawing/attributes").dash,e=e("../../../lib/extend").extendFlat;t.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:e({},r,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":772,"../../drawing/attributes":668}],733:[function(e,t,n){"use strict";t.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],734:[function(e,t,n){"use strict";var r=e("../../color");t.exports=function(e,t,n){n("newshape.drawdirection"),n("newshape.layer"),n("newshape.fillcolor"),n("newshape.fillrule"),n("newshape.opacity"),n("newshape.line.width")&&(e=(e||{}).plot_bgcolor||"#FFF",n("newshape.line.color",r.contrast(e)),n("newshape.line.dash")),n("activeshape.fillcolor"),n("activeshape.opacity")}},{"../../color":647}],735:[function(e,t,n){"use strict";var M=e("../../dragelement"),j=e("../../dragelement/helpers").drawMode,k=e("../../../registry"),r=e("./constants"),O=r.i000,A=r.i090,T=r.i180,P=r.i270,S=e("../../../plots/cartesian/handle_outline").clearOutlineControllers,r=e("./helpers"),E=r.pointsShapeRectangle,C=r.pointsShapeEllipse,L=r.writePaths,R=e("./newshapes");t.exports=function e(c,n,r,t){t=t||0;var s=r.gd;function f(){e(c,n,r,t++),C(c[0])&&i({redrawing:!0})}function i(e){r.isActiveShape=!1;var t=R(n,r);Object.keys(t).length&&k.call((e||{}).redrawing?"relayout":"_guiRelayout",s,t)}var l,o,d,h,p,a=r.isActiveShape,u=s._fullLayout._zoomlayer,y=r.dragmode;function g(e){d=+e.srcElement.getAttribute("data-i"),h=+e.srcElement.getAttribute("data-j"),l[d][h].moveFn=v}function v(e,t){if(c.length){var n=p[d][h][1],r=p[d][h][2],i=c[d],o=i.length;if(E(i)){for(var a,s=0;s<o;s++)s!==h&&((a=i[s])[1]===i[h][1]&&(a[1]=n+e),a[2]===i[h][2]&&(a[2]=r+t));if(i[h][1]=n+e,i[h][2]=r+t,!E(i))for(var l=0;l<o;l++)for(var u=0;u<i[l].length;u++)i[l][u]=p[d][l][u]}else i[h][1]=n+e,i[h][2]=r+t;f()}}function m(){i()}function b(e,t){2===e&&(d=+t.srcElement.getAttribute("data-i"),h=+t.srcElement.getAttribute("data-j"),t=c[d],E(t)||C(t)||function(){if(c.length&&c[d]&&c[d].length){for(var e=[],t=0;t<c[d].length;t++)t!==h&&e.push(c[d][t]);1<e.length&&(2!==e.length||"Z"!==e[1][0])&&(0===h&&(e[0][0]="M"),c[d]=e,f(),i())}}())}function x(e,t){!function(e,t){if(c.length)for(var n=0;n<c.length;n++)for(var r=0;r<c[n].length;r++)for(var i=0;i+2<c[n][r].length;i+=2)c[n][r][i+1]=p[n][r][i+1]+e,c[n][r][i+2]=p[n][r][i+2]+t}(e,t),f()}function _(e){d=+e.srcElement.getAttribute("data-i"),o[d=d||0].moveFn=x}function w(){i()}j(y)?s._fullLayout._drawing=!0:0<=s._fullLayout._activeShapeIndex&&S(s),n.attr("d",L(c)),a&&!t&&(p=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e[n]=[];for(var i=0;i<r.length;i++){e[n][i]=[];for(var o=0;o<r[i].length;o++)e[n][i][o]=r[i][o]}}return e}([],c),function(e){l=[];for(var t=0;t<c.length;t++){var n=c[t],r=!E(n)&&C(n);l[t]=[];for(var i,o,a=0;a<n.length;a++)"Z"!==n[a][0]&&(r&&a!==O&&a!==A&&a!==T&&a!==P||(i=n[a][1],o=n[a][2],o=e.append("circle").classed("cursor-grab",!0).attr("data-i",t).attr("data-j",a).attr("cx",i).attr("cy",o).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1}),l[t][a]={element:o.node(),gd:s,prepFn:g,doneFn:m,clickFn:b},M.init(l[t][a])))}}(u.append("g").attr("class","outline-controllers")),o=[],c.length&&(o[0]={element:n[0][0],gd:s,prepFn:_,doneFn:w},M.init(o[0])))}},{"../../../plots/cartesian/handle_outline":839,"../../../registry":879,"../../dragelement":666,"../../dragelement/helpers":665,"./constants":733,"./helpers":736,"./newshapes":737}],736:[function(e,t,c){"use strict";var R=e("parse-svg-path"),n=e("./constants"),I=n.CIRCLE_SIDES,f=n.SQRT2,e=e("../../../plots/cartesian/helpers"),z=e.p2r,D=e.r2p,d=[0,3,4,5,6,1,2],h=[0,3,4,1,2];function o(e,t){return Math.abs(e-t)<=1e-6}function a(e,t){var n=t[1]-e[1],e=t[2]-e[2];return Math.sqrt(n*n+e*e)}c.writePaths=function(e){var t=e.length;if(!t)return"M0,0Z";for(var n="",r=0;r<t;r++)for(var i=e[r].length,o=0;o<i;o++){var a=e[r][o][0];if("Z"===a)n+="Z";else for(var s=e[r][o].length,l=0;l<s;l++){var u=l;"Q"===a||"S"===a?u=h[l]:"C"===a&&(u=d[l]),n+=e[r][o][u],0<l&&l<s-1&&(n+=",")}}return n},c.readPaths=function(e,t,n,r){function i(){o=c,a=f}var o,a,s=R(e),l=[],u=-1,c=0,f=0;i();for(var d=0;d<s.length;d++){var h,p,y,g,v=[],m=s[d][0],b=m;switch(m){case"M":l[++u]=[],c=+s[d][1],f=+s[d][2],v.push([b,c,f]),i();break;case"Q":case"S":h=+s[d][1],y=+s[d][2],c=+s[d][3],f=+s[d][4],v.push([b,c,f,h,y]);break;case"C":h=+s[d][1],y=+s[d][2],p=+s[d][3],g=+s[d][4],c=+s[d][5],f=+s[d][6],v.push([b,c,f,h,y,p,g]);break;case"T":case"L":c=+s[d][1],f=+s[d][2],v.push([b,c,f]);break;case"H":c=+s[d][1],v.push([b="L",c,f]);break;case"V":f=+s[d][1],v.push([b="L",c,f]);break;case"A":var b="L",x=+s[d][1],_=+s[d][2];+s[d][4]||(x=-x,_=-_);for(var w=c-x,M=f,j=1;j<=I/2;j++){var k=2*Math.PI*j/I;v.push([b,w+x*Math.cos(k),M+_*Math.sin(k)])}break;case"Z":c===o&&f===a||(c=o,f=a,v.push([b,c,f]))}for(var O=(n||{}).domain,A=t._fullLayout._size,T=n&&"pixel"===n.xsizemode,P=n&&"pixel"===n.ysizemode,S=!1===r,E=0;E<v.length;E++){for(j=0;j+2<7;j+=2){var C=v[E][j+1],L=v[E][j+2];void 0!==C&&void 0!==L&&(c=C,f=L,n&&(n.xaxis&&n.xaxis.p2r?(S&&(C-=n.xaxis._offset),C=T?D(n.xaxis,n.xanchor)+C:z(n.xaxis,C)):(S&&(C-=A.l),O?C=O.x[0]+C/A.w:C/=A.w),L=n.yaxis&&n.yaxis.p2r?(S&&(L-=n.yaxis._offset),P?D(n.yaxis,n.yanchor)-L:z(n.yaxis,L)):(S&&(L-=A.t),O?O.y[1]-L/A.h:1-L/A.h)),v[E][j+1]=C,v[E][j+2]=L)}l[u].push(v[E].slice())}}return l},c.pointsShapeRectangle=function(e){if(5!==e.length)return!1;for(var t=1;t<3;t++){if(!o(e[0][t]-e[1][t],e[3][t]-e[2][t]))return!1;if(!o(e[0][t]-e[3][t],e[1][t]-e[2][t]))return!1}return!(!o(e[0][1],e[1][1])&&!o(e[0][1],e[3][1]))&&!!(a(e[0],e[1])*a(e[0],e[3]))},c.pointsShapeEllipse=function(e){if((t=e.length)!==I+1)return!1;for(var t=I,n=0;n<t;n++){var r=(2*t-n)%t,i=(t/2+r)%t;if(!o(a(e[n],e[(t/2+n)%t]),a(e[r],e[i])))return!1}return!0},c.handleEllipse=function(e,t,n){if(!e)return[t,n];for(var n=c.ellipseOver({x0:t[0],y0:t[1],x1:n[0],y1:n[1]}),r=(n.x1+n.x0)/2,i=(n.y1+n.y0)/2,o=(n.x1-n.x0)/2,a=(n.y1-n.y0)/2,o=o||(a/=f),a=a||(o/=f),s=[],l=0;l<I;l++){var u=2*l*Math.PI/I;s.push([r+o*Math.cos(u),i+a*Math.sin(u)])}return s},c.ellipseOver=function(e){var t=e.x0,n=e.y0,r=e.x1,i=e.y1,o=r-t,e=i-n,r=((t-=o)+r)/2,i=((n-=e)+i)/2;return{x0:r-(o*=f),y0:i-(e*=f),x1:r+o,y1:i+e}}},{"../../../plots/cartesian/helpers":840,"./constants":733,"parse-svg-path":619}],737:[function(e,t,n){"use strict";var r=e("../../dragelement/helpers"),S=r.drawMode,E=r.openMode,r=e("./constants"),C=r.i000,L=r.i090,R=r.i180,I=r.i270,z=r.cos45,D=r.sin45,r=e("../../../plots/cartesian/helpers"),N=r.p2r,F=r.r2p,B=e("../../../plots/cartesian/handle_outline").clearSelect,e=e("./helpers"),U=e.readPaths,q=e.writePaths,H=e.ellipseOver;t.exports=function(e,t){if(e.length){var n=e[0][0];if(n){var r=n.getAttribute("d"),i=t.gd,o=i._fullLayout.newshape,a=t.plotinfo,s=a.xaxis,l=a.yaxis,u=!!a.domain||!a.xaxis,c=!!a.domain||!a.yaxis,f=t.isActiveShape,d=t.dragmode,h=(i.layout||{}).shapes||[];if(!S(d)&&void 0!==f){var p=i._fullLayout._activeShapeIndex;if(p<h.length)switch(i._fullLayout.shapes[p].type){case"rect":d="drawrect";break;case"circle":d="drawcircle";break;case"line":d="drawline";break;case"path":var y=h[p].path||"",d="Z"===y[y.length-1]?"drawclosedpath":"drawopenpath"}}var g,v,m,b,x,_,w=E(d),M=U(r,i,a,f),j={editable:!0,xref:u?"paper":s._id,yref:c?"paper":l._id,layer:o.layer,opacity:o.opacity,line:{color:o.line.color,width:o.line.width,dash:o.line.dash}};w||(j.fillcolor=o.fillcolor,j.fillrule=o.fillrule),(g=1===M.length?M[0]:g)&&"drawrect"===d?(j.type="rect",j.x0=g[0][1],j.y0=g[0][2],j.x1=g[2][1],j.y1=g[2][2]):g&&"drawline"===d?(j.type="line",j.x0=g[0][1],j.y0=g[0][2],j.x1=g[1][1],j.y1=g[1][2]):g&&"drawcircle"===d?(j.type="circle",v=g[C][1],m=g[L][1],b=g[R][1],x=g[I][1],_=g[C][2],e=g[L][2],n=g[R][2],r=g[I][2],u=a.xaxis&&("date"===a.xaxis.type||"log"===a.xaxis.type),c=a.yaxis&&("date"===a.yaxis.type||"log"===a.yaxis.type),u&&(v=F(a.xaxis,v),m=F(a.xaxis,m),b=F(a.xaxis,b),x=F(a.xaxis,x)),c&&(_=F(a.yaxis,_),e=F(a.yaxis,e),n=F(a.yaxis,n),r=F(a.yaxis,r)),_=H({x0:w=(m+x)/2,y0:o=(_+n)/2,x1:w+(x-m+b-v)/2*z,y1:o+(r-e+n-_)/2*D}),u&&(_.x0=N(a.xaxis,_.x0),_.x1=N(a.xaxis,_.x1)),c&&(_.y0=N(a.yaxis,_.y0),_.y1=N(a.yaxis,_.y1)),j.x0=_.x0,j.y0=_.y0,j.x1=_.x1,j.y1=_.y1):(j.type="path",s&&l&&function(e,t,n){var r="date"===t.type,i="date"===n.type;if(!r&&!i)return;for(var o=0;o<e.length;o++)for(var a=0;a<e[o].length;a++)for(var s=0;s+2<e[o][a].length;s+=2)r&&(e[o][a][s+1]=e[o][a][s+1].replace(" ","_")),i&&(e[o][a][s+2]=e[o][a][s+2].replace(" ","_"))}(M,s,l),j.path=q(M),g=null),B(i);for(var t=t.editHelpers,k=(t||{}).modifyItem,O=[],A=0;A<h.length;A++){var T=i._fullLayout.shapes[A];if(O[A]=T._input,void 0!==f&&A===i._fullLayout._activeShapeIndex){var P=j;switch(T.type){case"line":case"rect":case"circle":k("x0",P.x0),k("x1",P.x1),k("y0",P.y0),k("y1",P.y1);break;case"path":k("path",P.path)}}}return void 0===f?(O.push(j),O):t?t.getUpdateObj():{}}}}},{"../../../plots/cartesian/handle_outline":839,"../../../plots/cartesian/helpers":840,"../../dragelement/helpers":665,"./constants":733,"./helpers":736}],738:[function(e,t,s){"use strict";var i=e("./constants"),o=e("../../lib");s.rangeToShapePosition=function(e){return"log"===e.type?e.r2d:function(e){return e}},s.shapePositionToRange=function(e){return"log"===e.type?e.d2r:function(e){return e}},s.decodeDate=function(t){return function(e){return e.replace&&(e=e.replace("_"," ")),t(e)}},s.encodeDate=function(t){return function(e){return t(e).replace(" ","_")}},s.extractPathCoords=function(e,n){var r=[];return e.match(i.segmentRE).forEach(function(e){var t=n[e.charAt(0)].drawn;void 0!==t&&(!(e=e.substr(1).match(i.paramRE))||e.length<t||r.push(o.cleanNumber(e[t])))}),r},s.getDataToPixel=function(e,t,n,r){var i,o,a=e._fullLayout._size;return t?"domain"===r?o=function(e){return t._length*(n?1-e:e)+t._offset}:(i=s.shapePositionToRange(t),o=function(e){return t._offset+t.r2p(i(e,!0))},"date"===t.type&&(o=s.decodeDate(o))):o=n?function(e){return a.t+a.h*(1-e)}:function(e){return a.l+a.w*e},o},s.getPixelToData=function(e,t,n,r){var i,o=e._fullLayout._size;return t?"domain"===r?function(e){e=(e-t._offset)/t._length;return n?1-e:e}:(i=s.rangeToShapePosition(t),function(e){return i(t.p2r(e-t._offset))}):n?function(e){return 1-(e-o.t)/o.h}:function(e){return(e-o.l)/o.w}},s.roundPositionForSharpStrokeRendering=function(e,t){t=1===Math.round(t%2),e=Math.round(e);return t?e+.5:e},s.makeOptionsAndPlotinfo=function(e,t){var n=e._fullLayout.shapes[t]||{},t=e._fullLayout._plots[n.xref+n.yref];return!!t?t._hadPlotinfo=!0:(t={},n.xref&&"paper"!==n.xref&&(t.xaxis=e._fullLayout[n.xref+"axis"]),n.yref&&"paper"!==n.yref&&(t.yaxis=e._fullLayout[n.yref+"axis"])),t.xsizemode=n.xsizemode,t.ysizemode=n.ysizemode,t.xanchor=n.xanchor,t.yanchor=n.yanchor,{options:n,plotinfo:t}}},{"../../lib":779,"./constants":729}],739:[function(e,t,n){"use strict";var r=e("./draw");t.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),supplyDrawNewShapeDefaults:e("./draw_newshape/defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne}},{"../../plots/cartesian/include_components":841,"./attributes":727,"./calc_autorange":728,"./defaults":730,"./draw":731,"./draw_newshape/defaults":734}],740:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("../../plots/pad_attributes"),o=e("../../lib/extend").extendDeepAll,a=e("../../plot_api/edit_types").overrideAll,s=e("../../plots/animation_attributes"),l=e("../../plot_api/plot_template").templatedArray,u=e("./constants"),e=l("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});t.exports=a(l("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:e,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:o(i({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:r({})},font:r({}),activebgcolor:{valType:"color",dflt:u.gripBgActiveColor},bgcolor:{valType:"color",dflt:u.railBgColor},bordercolor:{valType:"color",dflt:u.railBorderColor},borderwidth:{valType:"number",min:0,dflt:u.railBorderWidth},ticklen:{valType:"number",min:0,dflt:u.tickLength},tickcolor:{valType:"color",dflt:u.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:u.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":772,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../plots/animation_attributes":822,"../../plots/font_attributes":859,"../../plots/pad_attributes":875,"./constants":741}],741:[function(e,t,n){"use strict";t.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],742:[function(e,t,n){"use strict";var l=e("../../lib"),u=e("../../plots/array_container_defaults"),c=e("./attributes"),r=e("./constants").name,i=c.steps;function o(n,r,e){function t(e,t){return l.coerce(n,r,c,e,t)}for(var i,o=u(n,r,{name:"steps",handleItemDefaults:f}),a=0,s=0;s<o.length;s++)o[s].visible&&a++;(a<2?r.visible=!1:t("visible"))&&(r._stepCount=a,i=r._visibleSteps=l.filterVisible(o),(o[t("active")]||{}).visible||(r.active=i[0]._index),t("x"),t("y"),l.noneOrAll(n,r,["x","y"]),t("xanchor"),t("yanchor"),t("len"),t("lenmode"),t("pad.t"),t("pad.r"),t("pad.b"),t("pad.l"),l.coerceFont(t,"font",e.font),t("currentvalue.visible")&&(t("currentvalue.xanchor"),t("currentvalue.prefix"),t("currentvalue.suffix"),t("currentvalue.offset"),l.coerceFont(t,"currentvalue.font",r.font)),t("transition.duration"),t("transition.easing"),t("bgcolor"),t("activebgcolor"),t("bordercolor"),t("borderwidth"),t("ticklen"),t("tickwidth"),t("tickcolor"),t("minorticklen"))}function f(n,r){function e(e,t){return l.coerce(n,r,i,e,t)}var t="skip"===n.method||Array.isArray(n.args)?e("visible"):r.visible=!1;t&&(e("method"),e("args"),t=e("label","step-"+r._index),e("value",t),e("execute"))}t.exports=function(e,t){u(e,t,{name:r,handleItemDefaults:o})}},{"../../lib":779,"../../plots/array_container_defaults":823,"./attributes":740,"./constants":741}],743:[function(e,t,n){"use strict";var c=e("@plotly/d3"),u=e("../../plots/plots"),f=e("../color"),d=e("../drawing"),h=e("../../lib"),s=h.strTranslate,p=e("../../lib/svg_text_utils"),l=e("../../plot_api/plot_template").arrayEditor,y=e("./constants"),e=e("../../constants/alignment"),g=e.LINE_SPACING,v=e.FROM_TL,m=e.FROM_BR;function b(e){return y.autoMarginIdRoot+e._index}function a(e){return e._index}function x(e,t,n){if(t.currentvalue.visible){var r,i,o=t._dims;switch(t.currentvalue.xanchor){case"right":r=o.inputAreaLength-y.currentValueInset-o.currentValueMaxWidth,i="left";break;case"center":r=.5*o.inputAreaLength,i="middle";break;default:r=y.currentValueInset,i="left"}var a=h.ensureSingle(e,"text",y.labelClass,function(e){e.attr({"text-anchor":i,"data-notex":1})}),s=t.currentvalue.prefix||"";"string"==typeof n?s+=n:(e=t.steps[t.active].label,s+=e=(n=t._gd._fullLayout._meta)?h.templateString(e,n):e),t.currentvalue.suffix&&(s+=t.currentvalue.suffix),a.call(d.font,t.currentvalue.font).text(s).call(p.convertToTspans,t._gd);s=p.lineCount(a),t=(o.currentValueMaxLines+1-s)*t.currentvalue.font.size*g;return p.positionText(a,r,t),a}}function _(t,n,r){h.ensureSingle(t,"rect",y.gripRectClass,function(e){e.call(o,n,t,r).style("pointer-events","all")}).attr({width:y.gripWidth,height:y.gripHeight,rx:y.gripRadius,ry:y.gripRadius}).call(f.stroke,r.bordercolor).call(f.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function w(e,t,n){var r=h.ensureSingle(e,"text",y.labelClass,function(e){e.attr({"text-anchor":"middle","data-notex":1})}),e=t.step.label,t=n._gd._fullLayout._meta;return t&&(e=h.templateString(e,t)),r.call(d.font,n.font).text(e).call(p.convertToTspans,n._gd),r}function M(e,n){var e=h.ensureSingle(e,"g",y.labelsClass),r=n._dims,e=e.selectAll("g."+y.labelGroupClass).data(r.labelSteps);e.enter().append("g").classed(y.labelGroupClass,!0),e.exit().remove(),e.each(function(e){var t=c.select(this);t.call(w,e,n),d.setTranslate(t,T(n,e.fraction),y.tickOffset+n.ticklen+n.font.size*g+y.labelOffset+r.currentValueTotalHeight)})}function j(e,t,n,r,i){r=Math.round(r*(n._stepCount-1)),r=n._visibleSteps[r]._index;r!==n.active&&k(e,t,n,r,!0,i)}function k(t,n,e,r,i,o){var a=e.active;e.active=r,l(t.layout,y.name,e).applyUpdate("active",r);r=e.steps[e.active];n.call(A,e,o),n.call(x,e),t.emit("plotly_sliderchange",{slider:e,step:e.steps[e.active],interaction:i,previousActive:a}),r&&r.method&&i&&(n._nextMethod?(n._nextMethod.step=r,n._nextMethod.doCallback=i,n._nextMethod.doTransition=o):(n._nextMethod={step:r,doCallback:i,doTransition:o},n._nextMethodRaf=window.requestAnimationFrame(function(){var e=n._nextMethod.step;e.method&&(e.execute&&u.executeAPICommand(t,e.method,e.args),n._nextMethod=null,n._nextMethodRaf=null)})))}function o(e,o,a){var s=a.node(),l=c.select(o);function u(){return a.data()[0]}function t(){var e=u();o.emit("plotly_sliderstart",{slider:e});var t=a.select("."+y.gripRectClass);c.event.stopPropagation(),c.event.preventDefault(),t.call(f.fill,e.activebgcolor);var n=P(e,c.mouse(s)[0]);function r(){var e=u(),t=P(e,c.mouse(s)[0]);j(o,a,e,t,!1)}function i(){var e=u();e._dragging=!1,t.call(f.fill,e.bgcolor),l.on("mouseup",null),l.on("mousemove",null),l.on("touchend",null),l.on("touchmove",null),o.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})}j(o,a,e,n,!0),e._dragging=!0,l.on("mousemove",r),l.on("touchmove",r),l.on("mouseup",i),l.on("touchend",i)}e.on("mousedown",t),e.on("touchstart",t)}function O(e,i){var e=e.selectAll("rect."+y.tickRectClass).data(i._visibleSteps),o=i._dims;e.enter().append("rect").classed(y.tickRectClass,!0),e.exit().remove(),e.attr({width:i.tickwidth+"px","shape-rendering":"crispEdges"}),e.each(function(e,t){var n=t%o.labelStride==0,r=c.select(this);r.attr({height:n?i.ticklen:i.minorticklen}).call(f.fill,i.tickcolor),d.setTranslate(r,T(i,t/(i._stepCount-1))-.5*i.tickwidth,(n?y.tickOffset:y.minorTickOffset)+o.currentValueTotalHeight)})}function A(e,t,n){for(var r=e.select("rect."+y.gripRectClass),i=0,o=0;o<t._stepCount;o++)if(t._visibleSteps[o]._index===t.active){i=o;break}var a=T(t,i/(t._stepCount-1));t._invokingCommand||(e=r,(e=n&&0<t.transition.duration?r.transition().duration(t.transition.duration).ease(t.transition.easing):e).attr("transform",s(a-.5*y.gripWidth,t._dims.currentValueTotalHeight)))}function T(e,t){e=e._dims;return e.inputAreaStart+y.stepInset+(e.inputAreaLength-2*y.stepInset)*Math.min(1,Math.max(0,t))}function P(e,t){e=e._dims;return Math.min(1,Math.max(0,(t-y.stepInset-e.inputAreaStart)/(e.inputAreaLength-2*y.stepInset-2*e.inputAreaStart)))}function S(t,n,r){var e=r._dims,i=h.ensureSingle(t,"rect",y.railTouchRectClass,function(e){e.call(o,n,t,r).style("pointer-events","all")});i.attr({width:e.inputAreaLength,height:Math.max(e.inputAreaWidth,y.tickOffset+r.ticklen+e.labelHeight)}).call(f.fill,r.bgcolor).attr("opacity",0),d.setTranslate(i,0,e.currentValueTotalHeight)}function E(e,t){var n=t._dims,r=n.inputAreaLength-2*y.railInset,e=h.ensureSingle(e,"rect",y.railRectClass);e.attr({width:r,height:y.railWidth,rx:y.railRadius,ry:y.railRadius,"shape-rendering":"crispEdges"}).call(f.stroke,t.bordercolor).call(f.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),d.setTranslate(e,y.railInset,.5*(n.inputAreaWidth-y.railWidth)+n.currentValueTotalHeight)}t.exports=function(r){var e=r._fullLayout,t=function(e,t){for(var n=e[y.name],r=[],i=0;i<n.length;i++){var o=n[i];o.visible&&(o._gd=t,r.push(o))}return r}(e,r),e=e._infolayer.selectAll("g."+y.containerClassName).data(0<t.length?[0]:[]);function n(e){e._commandObserver&&(e._commandObserver.remove(),delete e._commandObserver),u.autoMargin(r,b(e))}if(e.enter().append("g").classed(y.containerClassName,!0).style("cursor","ew-resize"),e.exit().each(function(){c.select(this).selectAll("g."+y.groupClassName).each(n)}).remove(),0!==t.length){e=e.selectAll("g."+y.groupClassName).data(t,a);e.enter().append("g").classed(y.groupClassName,!0),e.exit().each(n).remove();for(var i=0;i<t.length;i++){var o=t[i];!function(e,n){var t=d.tester.selectAll("g."+y.labelGroupClass).data(n._visibleSteps);t.enter().append("g").classed(y.labelGroupClass,!0);var r=0,i=0;t.each(function(e){var e=w(c.select(this),{step:e},n).node();e&&(e=d.bBox(e),i=Math.max(i,e.height),r=Math.max(r,e.width))}),t.remove();var o=n._dims={};o.inputAreaWidth=Math.max(y.railWidth,y.gripHeight);var a=e._fullLayout._size;o.lx=a.l+a.w*n.x,o.ly=a.t+a.h*(1-n.y),"fraction"===n.lenmode?o.outerLength=Math.round(a.w*n.len):o.outerLength=n.len;o.inputAreaStart=0,o.inputAreaLength=Math.round(o.outerLength-n.pad.l-n.pad.r);var s=(o.inputAreaLength-2*y.stepInset)/(n._stepCount-1),a=r+y.labelPadding;{var l;o.labelStride=Math.max(1,Math.ceil(a/s)),o.labelHeight=i,o.currentValueMaxWidth=0,o.currentValueHeight=0,o.currentValueTotalHeight=0,o.currentValueMaxLines=1,n.currentvalue.visible&&(l=d.tester.append("g"),t.each(function(e){var t=x(l,n,e.label),e=t.node()&&d.bBox(t.node())||{width:0,height:0},t=p.lineCount(t);o.currentValueMaxWidth=Math.max(o.currentValueMaxWidth,Math.ceil(e.width)),o.currentValueHeight=Math.max(o.currentValueHeight,Math.ceil(e.height)),o.currentValueMaxLines=Math.max(o.currentValueMaxLines,t)}),o.currentValueTotalHeight=o.currentValueHeight+n.currentvalue.offset,l.remove())}o.height=o.currentValueTotalHeight+y.tickOffset+n.ticklen+y.labelOffset+o.labelHeight+n.pad.t+n.pad.b;s="left";h.isRightAnchor(n)&&(o.lx-=o.outerLength,s="right");h.isCenterAnchor(n)&&(o.lx-=o.outerLength/2,s="center");t="top";h.isBottomAnchor(n)&&(o.ly-=o.height,t="bottom");h.isMiddleAnchor(n)&&(o.ly-=o.height/2,t="middle");o.outerLength=Math.ceil(o.outerLength),o.height=Math.ceil(o.height),o.lx=Math.round(o.lx),o.ly=Math.round(o.ly);t={y:n.y,b:o.height*m[t],t:o.height*v[t]};"fraction"===n.lenmode?(t.l=0,t.xl=n.x-n.len*v[s],t.r=0,t.xr=n.x+n.len*m[s]):(t.x=n.x,t.l=o.outerLength*v[s],t.r=o.outerLength*m[s]);u.autoMargin(e,b(n),t)}(r,o)}e.each(function(e){var n=c.select(this);!function(e){var t=e._dims;t.labelSteps=[];for(var n=e._stepCount,r=0;r<n;r+=t.labelStride)t.labelSteps.push({fraction:r/(n-1),step:e._visibleSteps[r]})}(e),u.manageCommandObserver(r,e,e._visibleSteps,function(e){var t=n.data()[0];t.active!==e.index&&(t._dragging||k(r,n,t,e.index,!1,!0))}),function(e,t,n){(n.steps[n.active]||{}).visible||(n.active=n._visibleSteps[0]._index);t.call(x,n).call(E,n).call(M,n).call(O,n).call(S,e,n).call(_,e,n);e=n._dims;d.setTranslate(t,e.lx+n.pad.l,e.ly+n.pad.t),t.call(A,n,!1),t.call(x,n)}(r,c.select(this),e)})}}},{"../../constants/alignment":752,"../../lib":779,"../../lib/svg_text_utils":804,"../../plot_api/plot_template":817,"../../plots/plots":876,"../color":647,"../drawing":669,"./constants":741,"@plotly/d3":3}],744:[function(e,t,n){"use strict";var r=e("./constants");t.exports={moduleType:"component",name:r.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":740,"./constants":741,"./defaults":742,"./draw":743}],745:[function(e,t,n){"use strict";var M=e("@plotly/d3"),j=e("fast-isnumeric"),k=e("../../plots/plots"),O=e("../../registry"),A=e("../../lib"),T=A.strTranslate,P=e("../drawing"),S=e("../color"),E=e("../../lib/svg_text_utils"),C=e("../../constants/interactions"),L=e("../../constants/alignment").OPPOSITE_SIDE,R=/ [XY][0-9]* /;t.exports={draw:function(n,e,t){var r=t.propContainer,i=t.propName,o=t.placeholder,a=t.traceIndex,u=t.avoid||{},s=t.attributes,l=t.transform,c=t.containerGroup,f=n._fullLayout,d=1,h=!1,p=((r=r.title)&&r.text?r.text:"").trim(),y=(r=r&&r.font?r.font:{}).family,g=r.size,v=r.color;"title.text"===i?b="titleText":-1!==i.indexOf("axis")?b="axisTitleText":i.indexOf(!0)&&(b="colorbarTitleText"),r=n._context.edits[b],""===p?d=0:p.replace(R," % ")===o.replace(R," % ")&&(d=.2,h=!0,r||(p="")),t._meta?p=A.templateString(p,t._meta):f._meta&&(p=A.templateString(p,f._meta));var m,b=p||r;return c||(c=A.ensureSingle(f._infolayer,"g","g-"+e),m=f._hColorbarMoveTitle),(t=c.selectAll("text").data(b?[0]:[])).enter().append("text"),t.text(p).attr("class",e),t.exit().remove(),b&&(t.call(x),r&&(p?t.on(".opacity",null):(h=!(d=0),t.text(o).on("mouseover.opacity",function(){M.select(this).transition().duration(C.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){M.select(this).transition().duration(C.HIDE_PLACEHOLDER).style("opacity",0)})),t.call(E.makeEditable,{gd:n}).on("edit",function(e){void 0!==a?O.call("_guiRestyle",n,i,e,a):O.call("_guiRelayout",n,i,e)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(x)}).on("input",function(e){this.text(e||" ").call(E.positionText,s.x,s.y)})),t.classed("js-placeholder",h)),c;function x(e){A.syncOrAsync([_,w],e)}function _(e){var t;return(l=!l&&m?{}:l)?(t="",l.rotate&&(t+="rotate("+[l.rotate,s.x,s.y]+")"),(l.offset||m)&&(t+=T(0,(l.offset||0)-(m||0)))):t=null,e.attr("transform",t),e.style({"font-family":y,"font-size":M.round(g,2)+"px",fill:S.rgb(v),opacity:d*S.opacity(v),"font-weight":k.fontWeight}).attr(s).call(E.convertToTspans,n),k.previousPromises(n)}function w(e){var t,n,r,i,o,a,s,l=M.select(e.node().parentNode);u&&u.selection&&u.side&&p&&(l.attr("transform",null),t=L[u.side],n="left"===u.side||"top"===u.side?-1:1,r=j(u.pad)?u.pad:2,i=P.bBox(l.node()),o={left:0,top:0,right:f.width,bottom:f.height},a=u.maxShift||n*(o[u.side]-i[u.side]),((s=0)<(s=a<0?a:(e=u.offsetLeft||0,o=u.offsetTop||0,i.left-=e,i.right-=e,i.top-=o,i.bottom-=o,u.selection.each(function(){var e=P.bBox(this);A.bBoxIntersect(i,e,r)&&(s=Math.max(s,n*(e[u.side]-i[t])+r))}),Math.min(a,s)))||a<0)&&(a={left:[-s,0],right:[s,0],top:[0,-s],bottom:[0,s]}[u.side],l.attr("transform",T(a[0],a[1]))))}}}},{"../../constants/alignment":752,"../../constants/interactions":757,"../../lib":779,"../../lib/svg_text_utils":804,"../../plots/plots":876,"../../registry":879,"../color":647,"../drawing":669,"@plotly/d3":3,"fast-isnumeric":574}],746:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("../color/attributes"),o=e("../../lib/extend").extendFlat,a=e("../../plot_api/edit_types").overrideAll,s=e("../../plots/pad_attributes"),l=e("../../plot_api/plot_template").templatedArray,e=l("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});t.exports=a(l("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:e,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:o(s({editType:"arraydraw"}),{}),font:r({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:i.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":772,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../plots/font_attributes":859,"../../plots/pad_attributes":875,"../color/attributes":646}],747:[function(e,t,n){"use strict";t.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},{}],748:[function(e,t,n){"use strict";var i=e("../../lib"),o=e("../../plots/array_container_defaults"),a=e("./attributes"),r=e("./constants").name,s=a.buttons;function l(n,r,e){function t(e,t){return i.coerce(n,r,a,e,t)}t("visible",0<o(n,r,{name:"buttons",handleItemDefaults:u}).length)&&(t("active"),t("direction"),t("type"),t("showactive"),t("x"),t("y"),i.noneOrAll(n,r,["x","y"]),t("xanchor"),t("yanchor"),t("pad.t"),t("pad.r"),t("pad.b"),t("pad.l"),i.coerceFont(t,"font",e.font),t("bgcolor",e.paper_bgcolor),t("bordercolor"),t("borderwidth"))}function u(n,r){function e(e,t){return i.coerce(n,r,s,e,t)}e("visible","skip"===n.method||Array.isArray(n.args))&&(e("method"),e("args"),e("args2"),e("label"),e("execute"))}t.exports=function(e,t){o(e,t,{name:r,handleItemDefaults:l})}},{"../../lib":779,"../../plots/array_container_defaults":823,"./attributes":746,"./constants":747}],749:[function(e,t,n){"use strict";var f=e("@plotly/d3"),d=e("../../plots/plots"),o=e("../color"),c=e("../drawing"),h=e("../../lib"),p=e("../../lib/svg_text_utils"),l=e("../../plot_api/plot_template").arrayEditor,y=e("../../constants/alignment").LINE_SPACING,g=e("./constants"),v=e("./scrollbox");function m(e){return e._index}function b(e,t){return+e.attr(g.menuIndexAttrName)===t._index}function x(e,t,n,r,i,o,a,s){t.active=a,l(e.layout,g.name,t).applyUpdate("active",a),"buttons"===t.type?w(e,r,null,null,t):"dropdown"===t.type&&(i.attr(g.menuIndexAttrName,"-1"),_(e,r,i,o,t),s||w(e,r,i,o,t))}function _(e,t,n,r,i){var o=h.ensureSingle(t,"g",g.headerClassName,function(e){e.style("pointer-events","all")}),a=i._dims,s=i.active,l=i.buttons[s]||g.blankHeaderOpts,u={y:i.pad.t,yPad:0,x:i.pad.l,xPad:0,index:0},s={width:a.headerWidth,height:a.headerHeight};o.call(M,i,l,e).call(T,i,u,s),h.ensureSingle(t,"text",g.headerArrowClassName,function(e){e.attr("text-anchor","end").call(c.font,i.font).text(g.arrowSymbol[i.direction])}).attr({x:a.headerWidth-g.arrowOffsetX+i.pad.l,y:a.headerHeight/2+g.textOffsetY+i.pad.t}),o.on("click",function(){n.call(P,String(b(n,i)?-1:i._index)),w(e,t,n,r,i)}),o.on("mouseover",function(){o.call(k)}),o.on("mouseout",function(){o.call(O,i)}),c.setTranslate(t,a.lx,a.ly)}function w(r,i,o,a,s){o||(o=i).attr("pointer-events","all");var e=-1!=+o.attr(g.menuIndexAttrName)||"buttons"===s.type?s.buttons:[],t="dropdown"===s.type?g.dropdownButtonClassName:g.buttonClassName,l=o.selectAll("g."+t).data(h.filterVisible(e)),n=l.enter().append("g").classed(t,!0),u=l.exit();"dropdown"===s.type?(n.attr("opacity","0").transition().attr("opacity","1"),u.transition().attr("opacity","0").remove()):u.remove();e=0,t=0,n=s._dims,u=-1!==["up","down"].indexOf(s.direction);"dropdown"===s.type&&(u?t=n.headerHeight+g.gapButtonHeader:e=n.headerWidth+g.gapButtonHeader),"dropdown"===s.type&&"up"===s.direction&&(t=-g.gapButtonHeader+g.gapButton-n.openHeight),"dropdown"===s.type&&"left"===s.direction&&(e=-g.gapButtonHeader+g.gapButton-n.openWidth);var c={x:n.lx+e+s.pad.l,y:n.ly+t+s.pad.t,yPad:g.gapButton,xPad:g.gapButton,index:0},t={l:c.x+s.borderwidth,t:c.y+s.borderwidth};l.each(function(e,t){var n=f.select(this);n.call(M,s,e,r).call(T,s,c),n.on("click",function(){f.event.defaultPrevented||(e.execute&&(e.args2&&s.active===t?(x(r,s,0,i,o,a,-1),d.executeAPICommand(r,e.method,e.args2)):(x(r,s,0,i,o,a,t),d.executeAPICommand(r,e.method,e.args))),r.emit("plotly_buttonclicked",{menu:s,button:e,active:s.active}))}),n.on("mouseover",function(){n.call(k)}),n.on("mouseout",function(){n.call(O,s),l.call(j,s)})}),l.call(j,s),u?(t.w=Math.max(n.openWidth,n.headerWidth),t.h=c.y-t.t):(t.w=c.x-t.l,t.h=Math.max(n.openHeight,n.headerHeight)),t.direction=s.direction,a&&(l.size()?function(e,t,n){var r,i,o,a=t.direction,a="up"===a||"down"===a,s=t._dims,l=t.active;if(a)for(o=i=0;o<l;o++)i+=s.heights[o]+g.gapButton;else for(o=r=0;o<l;o++)r+=s.widths[o]+g.gapButton;e.enable(n,r,i),e.hbar&&e.hbar.attr("opacity","0").transition().attr("opacity","1");e.vbar&&e.vbar.attr("opacity","0").transition().attr("opacity","1")}(a,s,t):function(e){var t=!!e.hbar,n=!!e.vbar;t&&e.hbar.transition().attr("opacity","0").each("end",function(){t=!1,n||e.disable()});n&&e.vbar.transition().attr("opacity","0").each("end",function(){n=!1,t||e.disable()})}(a))}function M(e,t,n,r){e.call(i,t).call(a,t,n,r)}function i(e,t){h.ensureSingle(e,"rect",g.itemRectClassName,function(e){e.attr({rx:g.rx,ry:g.ry,"shape-rendering":"crispEdges"})}).call(o.stroke,t.bordercolor).call(o.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function a(e,t,n,r){var i=h.ensureSingle(e,"text",g.itemTextClassName,function(e){e.attr({"text-anchor":"start","data-notex":1})}),e=n.label,n=r._fullLayout._meta;n&&(e=h.templateString(e,n)),i.call(c.font,t.font).text(e).call(p.convertToTspans,r)}function j(e,r){var i=r.active;e.each(function(e,t){var n=f.select(this);t===i&&r.showactive&&n.select("rect."+g.itemRectClassName).call(o.fill,g.activeColor)})}function k(e){e.select("rect."+g.itemRectClassName).call(o.fill,g.hoverColor)}function O(e,t){e.select("rect."+g.itemRectClassName).call(o.fill,t.bgcolor)}function A(e){return g.autoMarginIdRoot+e._index}function T(e,t,n,r){r=r||{};var i=e.select("."+g.itemRectClassName),o=e.select("."+g.itemTextClassName),a=t.borderwidth,s=n.index,l=t._dims;c.setTranslate(e,a+n.x,a+n.y);e=-1!==["up","down"].indexOf(t.direction),a=r.height||(e?l.heights[s]:l.height1);i.attr({x:0,y:0,width:r.width||(e?l.width1:l.widths[s]),height:a});r=t.font.size*y,t=p.lineCount(o);p.positionText(o,g.textOffsetX,a/2-(t-1)*r/2+g.textOffsetY),e?n.y+=l.heights[s]+n.yPad:n.x+=l.widths[s]+n.xPad,n.index++}function P(e,t){e.attr(g.menuIndexAttrName,t||"-1").selectAll("g."+g.dropdownButtonClassName).remove()}t.exports=function(i){var e=i._fullLayout,t=h.filterVisible(e[g.name]);function n(e){d.autoMargin(i,A(e))}var r=e._menulayer.selectAll("g."+g.containerClassName).data(0<t.length?[0]:[]);if(r.enter().append("g").classed(g.containerClassName,!0).style("cursor","pointer"),r.exit().each(function(){f.select(this).selectAll("g."+g.headerGroupClassName).each(n)}).remove(),0!==t.length){var o=r.selectAll("g."+g.headerGroupClassName).data(t,m);o.enter().append("g").classed(g.headerGroupClassName,!0);for(var a=h.ensureSingle(r,"g",g.dropdownButtonGroupClassName,function(e){e.style("pointer-events","all")}),s=0;s<t.length;s++){var l=t[s];!function(i,o){var a=o._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},e=c.tester.selectAll("g."+g.dropdownButtonClassName).data(h.filterVisible(o.buttons));e.enter().append("g").classed(g.dropdownButtonClassName,!0);var s=-1!==["up","down"].indexOf(o.direction);e.each(function(e,t){var n=f.select(this);n.call(M,o,e,i);var r=n.select("."+g.itemTextClassName),e=r.node()&&c.bBox(r.node()).width,n=Math.max(e+g.textPadX,g.minWidth),e=o.font.size*y,r=p.lineCount(r),r=Math.max(e*r,g.minHeight)+g.textOffsetY,r=Math.ceil(r),n=Math.ceil(n);a.widths[t]=n,a.heights[t]=r,a.height1=Math.max(a.height1,r),a.width1=Math.max(a.width1,n),s?(a.totalWidth=Math.max(a.totalWidth,n),a.openWidth=a.totalWidth,a.totalHeight+=r+g.gapButton,a.openHeight+=r+g.gapButton):(a.totalWidth+=n+g.gapButton,a.openWidth+=n+g.gapButton,a.totalHeight=Math.max(a.totalHeight,r),a.openHeight=a.totalHeight)}),s?a.totalHeight-=g.gapButton:a.totalWidth-=g.gapButton;a.headerWidth=a.width1+g.arrowPadX,a.headerHeight=a.height1,"dropdown"===o.type&&(s?(a.width1+=g.arrowPadX,a.totalHeight=a.height1):a.totalWidth=a.width1,a.totalWidth+=g.arrowPadX);e.remove();var t=a.totalWidth+o.pad.l+o.pad.r,n=a.totalHeight+o.pad.t+o.pad.b,r=i._fullLayout._size;a.lx=r.l+r.w*o.x,a.ly=r.t+r.h*(1-o.y);e="left";h.isRightAnchor(o)&&(a.lx-=t,e="right");h.isCenterAnchor(o)&&(a.lx-=t/2,e="center");r="top";h.isBottomAnchor(o)&&(a.ly-=n,r="bottom");h.isMiddleAnchor(o)&&(a.ly-=n/2,r="middle");a.totalWidth=Math.ceil(a.totalWidth),a.totalHeight=Math.ceil(a.totalHeight),a.lx=Math.round(a.lx),a.ly=Math.round(a.ly),d.autoMargin(i,A(o),{x:o.x,y:o.y,l:t*({right:1,center:.5}[e]||0),r:t*({left:1,center:.5}[e]||0),b:n*({top:1,middle:.5}[r]||0),t:n*({bottom:1,middle:.5}[r]||0)})}(i,l)}var e="updatemenus"+e._uid,u=new v(i,a,e);o.enter().size()&&(a.node().parentNode.appendChild(a.node()),a.call(P)),o.exit().each(function(e){a.call(P),n(e)}).remove(),o.each(function(t){var n=f.select(this),r="dropdown"===t.type?a:null;d.manageCommandObserver(i,t,t.buttons,function(e){x(i,t,t.buttons[e.index],n,r,u,e.index,!0)}),"dropdown"===t.type?(_(i,n,a,u,t),b(a,t)&&w(i,n,a,u,t)):w(i,n,null,null,t)})}}},{"../../constants/alignment":752,"../../lib":779,"../../lib/svg_text_utils":804,"../../plot_api/plot_template":817,"../../plots/plots":876,"../color":647,"../drawing":669,"./constants":747,"./scrollbox":751,"@plotly/d3":3}],750:[function(e,t,n){arguments[4][744][0].apply(n,arguments)},{"./attributes":746,"./constants":747,"./defaults":748,"./draw":749,dup:744}],751:[function(e,t,n){"use strict";t.exports=M;var x=e("@plotly/d3"),_=e("../color"),w=e("../drawing"),i=e("../../lib");function M(e,t,n){this.gd=e,this.container=t,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}M.barWidth=2,M.barLength=20,M.barRadius=2,M.barPad=1,M.barColor="#808BA4",M.prototype.enable=function(e,t,n){var r=this.gd._fullLayout,i=r.width,o=r.height;this.position=e;var a=this.position.l,s=this.position.w,l=this.position.t,u=this.position.h,c=this.position.direction,f="down"===c,d="left"===c,h="up"===c,p=s,y=u;f||d||"right"===c||h||(this.position.direction="down",f=!0),f||h?(v=(g=a)+p,y=f?(m=l,(b=Math.min(m+y,o))-m):(b=l+y)-(m=Math.max(b-y,0))):(b=(m=l)+y,p=d?(v=a+p)-(g=Math.max(v-p,0)):(g=a,(v=Math.min(g+p,i))-g)),this._box={l:g,t:m,w:p,h:y};e=p<s,c=M.barLength+2*M.barPad,h=M.barWidth+2*M.barPad,f=a,d=l+u;o<d+h&&(d=o-h);o=this.container.selectAll("rect.scrollbar-horizontal").data(e?[0]:[]);o.exit().on(".drag",null).remove(),o.enter().append("rect").classed("scrollbar-horizontal",!0).call(_.fill,M.barColor),e?(this.hbar=o.attr({rx:M.barRadius,ry:M.barRadius,x:f,y:d,width:c,height:h}),this._hbarXMin=f+c/2,this._hbarTranslateMax=p-c):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);o=y<u,d=M.barWidth+2*M.barPad,f=M.barLength+2*M.barPad,p=a+s,c=l;i<p+d&&(p=i-d);i=this.container.selectAll("rect.scrollbar-vertical").data(o?[0]:[]);i.exit().on(".drag",null).remove(),i.enter().append("rect").classed("scrollbar-vertical",!0).call(_.fill,M.barColor),o?(this.vbar=i.attr({rx:M.barRadius,ry:M.barRadius,x:p,y:c,width:d,height:f}),this._vbarYMin=c+f/2,this._vbarTranslateMax=y-f):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var f=this.id,g=g-.5,v=o?v+d+.5:v+.5,m=m-.5,b=e?b+h+.5:b+.5,r=r._topdefs.selectAll("#"+f).data(e||o?[0]:[]);r.exit().remove(),r.enter().append("clipPath").attr("id",f).append("rect"),e||o?(this._clipRect=r.select("rect").attr({x:Math.floor(g),y:Math.floor(m),width:Math.ceil(v)-Math.floor(g),height:Math.ceil(b)-Math.floor(m)}),this.container.call(w.setClipUrl,f,this.gd),this.bg.attr({x:a,y:l,width:s,height:u})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(w.setClipUrl,null),delete this._clipRect),(e||o)&&(u=x.behavior.drag().on("dragstart",function(){x.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this)),this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(u),u=x.behavior.drag().on("dragstart",function(){x.event.sourceEvent.preventDefault(),x.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this)),e&&this.hbar.on(".drag",null).call(u),o&&this.vbar.on(".drag",null).call(u)),this.setTranslate(t,n)},M.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(w.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},M.prototype._onBoxDrag=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e-=x.event.dx),this.vbar&&(t-=x.event.dy),this.setTranslate(e,t)},M.prototype._onBoxWheel=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e+=x.event.deltaY),this.vbar&&(t+=x.event.deltaY),this.setTranslate(e,t)},M.prototype._onBarDrag=function(){var e,t,n=this.translateX,r=this.translateY;this.hbar&&(e=(t=n+this._hbarXMin)+this._hbarTranslateMax,n=(i.constrain(x.event.x,t,e)-t)/(e-t)*(this.position.w-this._box.w)),this.vbar&&(t=(e=r+this._vbarYMin)+this._vbarTranslateMax,r=(i.constrain(x.event.y,e,t)-e)/(t-e)*(this.position.h-this._box.h)),this.setTranslate(n,r)},M.prototype.setTranslate=function(e,t){var n=this.position.w-this._box.w,r=this.position.h-this._box.h;e=i.constrain(e||0,0,n),t=i.constrain(t||0,0,r),this.translateX=e,this.translateY=t,this.container.call(w.setTranslate,this._box.l-this.position.l-e,this._box.t-this.position.t-t),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+e-.5),y:Math.floor(this.position.t+t-.5)}),this.hbar&&this.hbar.call(w.setTranslate,e+e/n*this._hbarTranslateMax,t),this.vbar&&this.vbar.call(w.setTranslate,e,t+t/r*this._vbarTranslateMax)}},{"../../lib":779,"../color":647,"../drawing":669,"@plotly/d3":3}],752:[function(e,t,n){"use strict";t.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],753:[function(e,t,n){"use strict";t.exports={axisRefDescription:function(e,t,n){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+n+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",n,"of the domain of the","second",e,"axis."].join(" ")}}},{}],754:[function(e,t,n){"use strict";t.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],755:[function(e,t,n){"use strict";t.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],756:[function(e,t,n){"use strict";t.exports={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"}},{}],757:[function(e,t,n){"use strict";t.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],758:[function(e,t,n){"use strict";t.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"−"}},{}],759:[function(e,t,n){"use strict";n.xmlns="http://www.w3.org/2000/xmlns/",n.svg="http://www.w3.org/2000/svg",n.xlink="http://www.w3.org/1999/xlink",n.svgAttrs={xmlns:n.svg,"xmlns:xlink":n.xlink}},{}],760:[function(e,t,n){"use strict";n.version=e("./version").version,e("native-promise-only"),e("../build/plotcss");for(var r=e("./registry"),i=n.register=r.register,o=e("./plot_api"),a=Object.keys(o),s=0;s<a.length;s++){var l=a[s];"_"!==l.charAt(0)&&(n[l]=o[l]),i({moduleType:"apiMethod",name:l,fn:o[l]})}i(e("./traces/scatter")),i([e("./components/legend"),e("./components/fx"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars"),e("./components/colorscale"),e("./components/colorbar"),e("./components/modebar")]),i([e("./locale-en"),e("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(i(window.PlotlyLocales),delete window.PlotlyLocales),n.Icons=e("./fonts/ploticon");var u=e("./components/fx"),r=e("./plots/plots");n.Plots={resize:r.resize,graphJson:r.graphJson,sendDataToCloud:r.sendDataToCloud},n.Fx={hover:u.hover,unhover:u.unhover,loneHover:u.loneHover,loneUnhover:u.loneUnhover},n.Snapshot=e("./snapshot"),n.PlotSchema=e("./plot_api/plot_schema")},{"../build/plotcss":620,"./components/annotations":645,"./components/annotations3d":635,"./components/colorbar":653,"./components/colorscale":659,"./components/errorbars":675,"./components/fx":687,"./components/grid":691,"./components/images":696,"./components/legend":704,"./components/modebar":710,"./components/rangeselector":718,"./components/rangeslider":725,"./components/shapes":739,"./components/sliders":744,"./components/updatemenus":750,"./fonts/ploticon":761,"./locale-en":808,"./locale-en-us":807,"./plot_api":812,"./plot_api/plot_schema":816,"./plots/plots":876,"./registry":879,"./snapshot":884,"./traces/scatter":943,"./version":961,"native-promise-only":618}],761:[function(e,t,n){"use strict";t.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],762:[function(e,t,n){"use strict";n.isLeftAnchor=function(e){return"left"===e.xanchor||"auto"===e.xanchor&&e.x<=1/3},n.isCenterAnchor=function(e){return"center"===e.xanchor||"auto"===e.xanchor&&e.x>1/3&&e.x<2/3},n.isRightAnchor=function(e){return"right"===e.xanchor||"auto"===e.xanchor&&e.x>=2/3},n.isTopAnchor=function(e){return"top"===e.yanchor||"auto"===e.yanchor&&e.y>=2/3},n.isMiddleAnchor=function(e){return"middle"===e.yanchor||"auto"===e.yanchor&&e.y>1/3&&e.y<2/3},n.isBottomAnchor=function(e){return"bottom"===e.yanchor||"auto"===e.yanchor&&e.y<=1/3}},{}],763:[function(e,t,n){"use strict";var e=e("./mod"),i=e.mod,r=e.modHalf,y=Math.PI,g=2*y;function v(e){return Math.abs(e[1]-e[0])>g-1e-14}function o(e,t){return r(t-e,g)}function a(e,t){if(v(t))return!0;var n=t[0]<t[1]?(r=t[0],t[1]):(r=t[1],t[0]),r=i(r,g);(n=i(n,g))<r&&(n+=g);t=i(e,g),e=t+g;return r<=t&&t<=n||r<=e&&e<=n}function s(e,t,n,r,i,o,a){i=i||0,o=o||0;var s,l,u,c=v([n,r]);function f(e,t){return[e*Math.cos(t)+i,o-e*Math.sin(t)]}var d,n=c?(s=0,l=y,g):n<r?(s=n,r):(s=r,n),e=e<t?(u=e,t):(u=t,e),h=Math.abs(n-s)<=y?0:1;function p(e,t,n){return"A"+[e,e]+" "+[0,h,n]+" "+f(e,t)}return c?d=null===u?"M"+f(e,s)+p(e,l,0)+p(e,n,0)+"Z":"M"+f(u,s)+p(u,l,0)+p(u,n,0)+"ZM"+f(e,s)+p(e,l,1)+p(e,n,1)+"Z":null===u?(d="M"+f(e,s)+p(e,n,0),a&&(d+="L0,0Z")):d="M"+f(u,s)+"L"+f(e,s)+p(e,n,0)+"L"+f(u,n)+p(u,s,1)+"Z",d}t.exports={deg2rad:function(e){return e/180*y},rad2deg:function(e){return e/y*180},angleDelta:o,angleDist:function(e,t){return Math.abs(o(e,t))},isFullCircle:v,isAngleInsideSector:a,isPtInsideSector:function(e,t,n,r){if(!a(t,r))return!1;var i,n=n[0]<n[1]?(i=n[0],n[1]):(i=n[1],n[0]);return i<=e&&e<=n},pathArc:function(e,t,n,r,i){return s(null,e,t,n,r,i,0)},pathSector:function(e,t,n,r,i){return s(null,e,t,n,r,i,1)},pathAnnulus:function(e,t,n,r,i,o){return s(e,t,n,r,i,o,1)}}},{"./mod":786}],764:[function(e,t,n){"use strict";var f=Array.isArray,r=ArrayBuffer,i=DataView;function o(e){return r.isView(e)&&!(e instanceof i)}function a(e){return f(e)||o(e)}function s(e,t,n){if(a(e)){if(a(e[0])){for(var r=n,i=0;i<e.length;i++)r=t(r,e[i].length);return r}return e.length}return 0}n.isTypedArray=o,n.isArrayOrTypedArray=a,n.isArray1D=function(e){return!a(e[0])},n.ensureArray=function(e,t){return(e=!f(e)?[]:e).length=t,e},n.concat=function(){for(var e,t,n,r,i,o,a,s=[],l=!0,u=0,c=0;c<arguments.length;c++)(i=(n=arguments[c]).length)&&(t?s.push(n):(t=n,r=i),f(n)?e=!1:(l=!1,u?e!==n.constructor&&(e=!1):e=n.constructor),u+=i);if(!u)return[];if(!s.length)return t;if(l)return t.concat.apply(t,s);if(e){for((o=new e(u)).set(t),c=0;c<s.length;c++)n=s[c],o.set(n,r),r+=n.length;return o}for(o=new Array(u),a=0;a<t.length;a++)o[a]=t[a];for(c=0;c<s.length;c++){for(n=s[c],a=0;a<n.length;a++)o[r+a]=n[a];r+=a}return o},n.maxRowLength=function(e){return s(e,Math.max,0)},n.minRowLength=function(e){return s(e,Math.min,1/0)}},{}],765:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../constants/numerical").BADNUM,o=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;t.exports=function(e){return"string"==typeof e&&(e=e.replace(o,"")),r(e)?Number(e):i}},{"../constants/numerical":758,"fast-isnumeric":574}],766:[function(e,t,n){"use strict";t.exports=function(e){e=e._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(e){e.regl&&e.regl.clear({color:!0,depth:!0})})}},{}],767:[function(e,t,n){"use strict";t.exports=function(e){e._responsiveChartHandler&&(window.removeEventListener("resize",e._responsiveChartHandler),delete e._responsiveChartHandler)}},{}],768:[function(e,t,v){"use strict";var i=e("fast-isnumeric"),r=e("tinycolor2"),a=e("../plots/attributes"),o=e("../components/colorscale/scales"),s=e("../components/color"),l=e("../constants/interactions").DESELECTDIM,u=e("./nested_property"),c=e("./regex").counter,f=e("./mod").modHalf,d=e("./array").isArrayOrTypedArray;function h(e,t){var n=v.valObjectMeta[t.valType];if(t.arrayOk&&d(e))return!0;if(n.validateFunction)return n.validateFunction(e,t);var r={},i=r;return n.coerceFunction(e,{set:function(e){i=e}},r,t),i!==r}v.valObjectMeta={data_array:{coerceFunction:function(e,t,n){d(e)?t.set(e):void 0!==n&&t.set(n)}},enumerated:{coerceFunction:function(e,t,n,r){r.coerceNumber&&(e=+e),-1===r.values.indexOf(e)?t.set(n):t.set(e)},validateFunction:function(e,t){t.coerceNumber&&(e=+e);for(var n=t.values,r=0;r<n.length;r++){var i=String(n[r]);if("/"===i.charAt(0)&&"/"===i.charAt(i.length-1)){if(new RegExp(i.substr(1,i.length-2)).test(e))return!0}else if(e===n[r])return!0}return!1}},boolean:{coerceFunction:function(e,t,n){!0===e||!1===e?t.set(e):t.set(n)}},number:{coerceFunction:function(e,t,n,r){!i(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?t.set(n):t.set(+e)}},integer:{coerceFunction:function(e,t,n,r){e%1||!i(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?t.set(n):t.set(+e)}},string:{coerceFunction:function(e,t,n,r){"string"!=typeof e?!0!==r.strict&&"number"==typeof e?t.set(String(e)):t.set(n):r.noBlank&&!e?t.set(n):t.set(e)}},color:{coerceFunction:function(e,t,n){r(e).isValid()?t.set(e):t.set(n)}},colorlist:{coerceFunction:function(e,t,n){Array.isArray(e)&&e.length&&e.every(function(e){return r(e).isValid()})?t.set(e):t.set(n)}},colorscale:{coerceFunction:function(e,t,n){t.set(o.get(e,n))}},angle:{coerceFunction:function(e,t,n){"auto"===e?t.set("auto"):i(e)?t.set(f(+e,360)):t.set(n)}},subplotid:{coerceFunction:function(e,t,n,r){r=r.regex||c(n);"string"==typeof e&&r.test(e)?t.set(e):t.set(n)},validateFunction:function(e,t){t=t.dflt;return e===t||"string"==typeof e&&!!c(t).test(e)}},flaglist:{coerceFunction:function(e,t,n,r){if("string"==typeof e)if(-1===(r.extras||[]).indexOf(e)){for(var i=e.split("+"),o=0;o<i.length;){var a=i[o];-1===r.flags.indexOf(a)||i.indexOf(a)<o?i.splice(o,1):o++}i.length?t.set(i.join("+")):t.set(n)}else t.set(e);else t.set(n)}},any:{coerceFunction:function(e,t,n){void 0===e?t.set(n):t.set(e)}},info_array:{coerceFunction:function(e,t,n,r){function i(e,t,n){var r;return void 0===n&&(n=t.dflt),v.valObjectMeta[t.valType].coerceFunction(e,{set:function(e){r=e}},n,t),r}var o=2===r.dimensions||"1-2"===r.dimensions&&Array.isArray(e)&&Array.isArray(e[0]);if(Array.isArray(e)){var a,s,l,u,c,f,d=r.items,h=[],p=Array.isArray(d),r=p&&o&&Array.isArray(d[0]),y=o&&p&&!r,g=(p&&!y?d:e).length;if(n=Array.isArray(n)?n:[],o)for(a=0;a<g;a++)for(h[a]=[],l=Array.isArray(e[a])?e[a]:[],c=(y?d:p?d[a]:l).length,s=0;s<c;s++)u=y?d[s]:p?d[a][s]:d,void 0!==(f=i(l[s],u,(n[a]||[])[s]))&&(h[a][s]=f);else for(a=0;a<g;a++)void 0!==(f=i(e[a],p?d[a]:d,n[a]))&&(h[a]=f);t.set(h)}else t.set(n)},validateFunction:function(e,t){if(!Array.isArray(e))return!1;var n=t.items,r=Array.isArray(n),i=2===t.dimensions;if(!t.freeLength&&e.length!==n.length)return!1;for(var o=0;o<e.length;o++)if(i){if(!Array.isArray(e[o])||!t.freeLength&&e[o].length!==n[o].length)return!1;for(var a=0;a<e[o].length;a++)if(!h(e[o][a],r?n[o][a]:n))return!1}else if(!h(e[o],r?n[o]:n))return!1;return!0}}},v.coerce=function(e,t,n,r,i){var o=u(n,r).get(),a=u(e,r),s=u(t,r),n=a.get(),e=t._template;if(void 0===n&&e&&(n=u(e,r).get(),e=0),void 0===i&&(i=o.dflt),o.arrayOk&&d(n))return s.set(n),n;a=v.valObjectMeta[o.valType].coerceFunction;a(n,s,i,o);t=s.get();return e&&t===i&&!h(n,o)&&(a(n=u(e,r).get(),s,i,o),t=s.get()),t},v.coerce2=function(e,t,n,r,i){var o=u(e,r),i=v.coerce(e,t,n,r,i),o=o.get();return null!=o&&i},v.coerceFont=function(e,t,n){var r={};return r.family=e(t+".family",(n=n||{}).family),r.size=e(t+".size",n.size),r.color=e(t+".color",n.color),r},v.coercePattern=function(e,t,n,r){var i;e(t+".shape")&&(e(t+".solidity"),e(t+".size"),i="overlay"===e(t+".fillmode"),r||(r=e(t+".bgcolor",i?n:void 0),e(t+".fgcolor",i?s.contrast(r):n)),e(t+".fgopacity",i?.5:1))},v.coerceHoverinfo=function(e,t,n){var r,i=t._module.attributes,o=i.hoverinfo?i:a,i=o.hoverinfo;return 1===n._dataLength&&((r="all"===i.dflt?i.flags.slice():i.dflt.split("+")).splice(r.indexOf("name"),1),r=r.join("+")),v.coerce(e,t,o,"hoverinfo",r)},v.coerceSelectionMarkerOpacity=function(e,t){var n,r,i;!e.marker||void 0!==(n=e.marker.opacity)&&(d(n)||e.selected||e.unselected||(i=l*(r=n)),t("selected.marker.opacity",r),t("unselected.marker.opacity",i))},v.validate=h},{"../components/color":647,"../components/colorscale/scales":662,"../constants/interactions":757,"../plots/attributes":824,"./array":764,"./mod":786,"./nested_property":787,"./regex":795,"fast-isnumeric":574,tinycolor2:980}],769:[function(e,t,d){"use strict";var h,p,n=e("d3-time-format").timeFormat,c=e("fast-isnumeric"),s=e("./loggers"),y=e("./mod").mod,r=e("../constants/numerical"),g=r.BADNUM,v=r.ONEDAY,m=r.ONEHOUR,b=r.ONEMIN,x=r.ONESEC,_=r.EPOCHJD,w=e("../registry"),f=e("d3-time-format").utcFormat,M=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,j=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,k=(new Date).getFullYear()-70;function O(e){return e&&w.componentsRegistry.calendars&&"string"==typeof e&&"gregorian"!==e}function l(e,t){return String(e+Math.pow(10,t)).substr(1)}d.dateTick0=function(e,t){var n,r=(r=!!t,O(n=e)?(r?w.getComponentMethod("calendars","CANONICAL_SUNDAY"):w.getComponentMethod("calendars","CANONICAL_TICK"))[n]:r?"2000-01-02":"2000-01-01");if(t<2)return r;r=d.dateTime2ms(r,e);return d.ms2DateTime(r+=v*(t-1),0,e)},d.dfltRange=function(e){return O(e)?w.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]},d.isJSDate=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.getTime},d.dateTime2ms=function(e,t){if(d.isJSDate(e)){var n=e.getTimezoneOffset()*b,r=(e.getUTCMinutes()-e.getMinutes())*b+(e.getUTCSeconds()-e.getSeconds())*x+(e.getUTCMilliseconds()-e.getMilliseconds());return r&&(n=n-(l=3*b)/2+y(r-n+l/2,l)),e=Number(e)-n,h<=e&&e<=p?e:g}if("string"!=typeof e&&"number"!=typeof e)return g;e=String(e);var i=O(t),o=e.charAt(0);!i||"G"!==o&&"g"!==o||(e=e.substr(1),t="");var a=i&&"chinese"===t.substr(0,7),s=e.match(a?j:M);if(!s)return g;var r=s[1],l=s[3]||"1",n=Number(s[5]||1),o=Number(s[7]||0),e=Number(s[9]||0),s=Number(s[11]||0);if(i){if(2===r.length)return g;r=Number(r);try{var u,c,f=w.getComponentMethod("calendars","getCal")(t);c=a?(u="i"===l.charAt(l.length-1),l=parseInt(l,10),f.newDate(r,f.toMonthIndex(r,l,u),n)):f.newDate(r,Number(l),n)}catch(e){return g}return c?(c.toJD()-_)*v+o*m+e*b+s*x:g}r=2===r.length?(Number(r)+2e3-k)%100+k:Number(r),--l;e=new Date(Date.UTC(2e3,l,n,o,e));return e.setUTCFullYear(r),e.getUTCMonth()!==l||e.getUTCDate()!==n?g:e.getTime()+s*x},h=d.MIN_MS=d.dateTime2ms("-9999"),p=d.MAX_MS=d.dateTime2ms("9999-12-31 23:59:59.9999"),d.isDateTime=function(e,t){return d.dateTime2ms(e,t)!==g};var A=90*v,T=3*m,P=5*b;function S(e,t,n,r,i){if((t||n||r||i)&&(e+=" "+l(t,2)+":"+l(n,2),(r||i)&&(e+=":"+l(r,2),i))){for(var o=4;i%10==0;)--o,i/=10;e+="."+l(i,o)}return e}d.ms2DateTime=function(e,t,n){if("number"!=typeof e||!(h<=e&&e<=p))return g;t=t||0;var r,i,o,a=Math.floor(10*y(e+.05,1)),s=Math.round(e-a/10);if(O(n)){var l=Math.floor(s/v)+_,u=Math.floor(y(e,v));try{r=w.getComponentMethod("calendars","getCal")(n).fromJD(l).formatDate("yyyy-mm-dd")}catch(e){r=f("G%Y-%m-%d")(new Date(s))}if("-"===r.charAt(0))for(;r.length<11;)r="-0"+r.substr(1);else for(;r.length<10;)r="0"+r;i=t<A?Math.floor(u/m):0,o=t<A?Math.floor(u%m/b):0,l=t<T?Math.floor(u%b/x):0,u=t<P?u%x*10+a:0}else s=new Date(s),r=f("%Y-%m-%d")(s),i=t<A?s.getUTCHours():0,o=t<A?s.getUTCMinutes():0,l=t<T?s.getUTCSeconds():0,u=t<P?10*s.getUTCMilliseconds()+a:0;return S(r,i,o,l,u)},d.ms2DateTimeLocal=function(e){if(!(h+v<=e&&e<=p-v))return g;var t=Math.floor(10*y(e+.05,1)),e=new Date(Math.round(e-t/10));return S(n("%Y-%m-%d")(e),e.getHours(),e.getMinutes(),e.getSeconds(),10*e.getUTCMilliseconds()+t)},d.cleanDate=function(e,t,n){if(e===g)return t;if(d.isJSDate(e)||"number"==typeof e&&isFinite(e)){if(O(n))return s.error("JS Dates and milliseconds are incompatible with world calendars",e),t;if(!(e=d.ms2DateTimeLocal(+e))&&void 0!==t)return t}else if(!d.isDateTime(e,n))return s.error("unrecognized date",e),t;return e};var o=/%\d?f/g,a=/%h/g,u={1:"1",2:"1",3:"2",4:"2"};function E(e,t,n,r){e=e.replace(o,function(e){e=Math.min(+e.charAt(1)||6,6);return(t/1e3%1+2).toFixed(e).substr(2).replace(/0+$/,"")||"0"});var i=new Date(Math.floor(t+.05));if(e=e.replace(a,function(){return u[n("%q")(i)]}),O(r))try{e=w.getComponentMethod("calendars","worldCalFmt")(e,t,r)}catch(e){return"Invalid"}return n(e)(i)}var C=[59,59.9,59.99,59.999,59.9999];d.formatDate=function(e,t,n,r,i,o){if(i=O(i)&&i,!t)if("y"===n)t=o.year;else if("m"===n)t=o.month;else{if("d"!==n)return s=n,n=y((a=e)+.05,v),n=l(Math.floor(n/m),2)+":"+l(y(Math.floor(n/b),60),2),"M"!==s&&(c(s)||(s=0),a=(100+Math.min(y(a/x,60),C[s])).toFixed(s).substr(1),n+=":"+(a=0<s?a.replace(/0+$/,"").replace(/[\.]$/,""):a)),n+"\n"+E(o.dayMonthYear,e,r,i);t=o.dayMonth+"\n"+o.year}var a,s;return E(t,e,r,i)};var L=3*v;d.incrementMonth=function(t,e,n){n=O(n)&&n;var r=y(t,v);if(t=Math.round(t-r),n)try{var i=Math.round(t/v)+_,o=w.getComponentMethod("calendars","getCal")(n),a=o.fromJD(i);return e%12?o.add(a,e,"m"):o.add(a,e/12,"y"),(a.toJD()-_)*v+r}catch(e){s.error("invalid ms "+t+" in calendar "+n)}t=new Date(t+L);return t.setUTCMonth(t.getUTCMonth()+e)+r-L},d.findExactDates=function(e,t){for(var n,r,i=0,o=0,a=0,s=0,l=O(t)&&w.getComponentMethod("calendars","getCal")(t),u=0;u<e.length;u++)if(r=e[u],c(r)){if(!(r%v))if(l)try{1===(n=l.fromJD(r/v+_)).day()?1===n.month()?i++:o++:a++}catch(e){}else 1===(n=new Date(r)).getUTCDate()?0===n.getUTCMonth()?i++:o++:a++}else s++;t=e.length-s;return{exactYears:i/t,exactMonths:(o+=i)/t,exactDays:(a+=o)/t}}},{"../constants/numerical":758,"../registry":879,"./loggers":783,"./mod":786,"d3-time-format":629,"fast-isnumeric":574}],770:[function(e,t,n){"use strict";var r=e("@plotly/d3"),i=e("./loggers"),o=e("./matrix"),a=e("gl-mat4");function s(e){var t=e&&e.parentNode;t&&t.removeChild(e)}function l(e,t,n){var r="plotly.js-style-"+e,e=document.getElementById(r);e||((e=document.createElement("style")).setAttribute("id",r),e.appendChild(document.createTextNode("")),document.head.appendChild(e));e=e.sheet;e.insertRule?e.insertRule(t+"{"+n+"}",0):e.addRule?e.addRule(t,n,0):i.warn("addStyleRule failed")}function u(e){e=window.getComputedStyle(e,null),e=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform");return"none"===e?null:e.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(e){return+e})}function c(e){for(var t,n=[];(t=e)&&(t instanceof Element||t instanceof HTMLElement);)n.push(e),e=e.parentNode;return n}t.exports={getGraphDiv:function(e){var t;if("string"==typeof e){if(null===(t=document.getElementById(e)))throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}if(null==e)throw new Error("DOM element provided is null or undefined");return e},isPlotDiv:function(e){return(e=r.select(e)).node()instanceof HTMLElement&&e.size()&&e.classed("js-plotly-plot")},removeElement:s,addStyleRule:function(e,t){l("global",e,t)},addRelatedStyleRule:l,deleteRelatedStyleRule:function(e){(e=document.getElementById("plotly.js-style-"+e))&&s(e)},getFullTransformMatrix:function(e){var e=c(e),t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return e.forEach(function(e){var e=u(e);e&&(e=o.convertCssMatrix(e),t=a.multiply(t,t,e))}),t},getElementTransformMatrix:u,getElementAndAncestors:c,equalDomRects:function(e,t){return e&&t&&e.x===t.x&&e.y===t.y&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}}},{"./loggers":783,"./matrix":785,"@plotly/d3":3,"gl-mat4":591}],771:[function(e,t,n){"use strict";var o=e("events").EventEmitter;t.exports={init:function(n){if(n._ev instanceof o)return n;var r=new o,i=new o;return n._ev=r,n._internalEv=i,n.on=r.on.bind(r),n.once=r.once.bind(r),n.removeListener=r.removeListener.bind(r),n.removeAllListeners=r.removeAllListeners.bind(r),n._internalOn=i.on.bind(i),n._internalOnce=i.once.bind(i),n._removeInternalListener=i.removeListener.bind(i),n._removeAllInternalListeners=i.removeAllListeners.bind(i),n.emit=function(e,t){"undefined"!=typeof jQuery&&jQuery(n).trigger(e,t),r.emit(e,t),i.emit(e,t)},n},triggerHandler:function(e,t,n){var r;"undefined"!=typeof jQuery&&(r=jQuery(e).triggerHandler(t,n));var i=e._ev;if(!i)return r;var o,a=i._events[t];if(!a)return r;function s(e){return e.listener?(i.removeListener(t,e.listener),e.fired?void 0:(e.fired=!0,e.listener.apply(i,[n]))):e.apply(i,[n])}for(a=Array.isArray(a)?a:[a],o=0;o<a.length-1;o++)s(a[o]);return e=s(a[o]),void 0!==r?r:e},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}}},{events:573}],772:[function(e,t,n){"use strict";var d=e("./is_plain_object.js"),h=Array.isArray;function p(e,t,n,r){var i,o,a,s,l,u=e[0],c=e.length;if(2===c&&h(u)&&h(e[1])&&0===u.length){if(function(e,t){for(var n,r=0;r<e.length;r++){if(null!==(n=e[r])&&"object"==typeof n)return!1;void 0!==n&&(t[r]=n)}return!0}(e[1],u))return u;u.splice(0,u.length)}for(var f=1;f<c;f++)for(o in i=e[f])l=u[o],a=i[o],r&&h(a)?u[o]=a:t&&a&&(d(a)||(s=h(a)))?(l=s?(s=!1,l&&h(l)?l:[]):l&&d(l)?l:{},u[o]=p([l,a],t,n,r)):void 0===a&&!n||(u[o]=a);return u}n.extendFlat=function(){return p(arguments,!1,!1,!1)},n.extendDeep=function(){return p(arguments,!0,!1,!1)},n.extendDeepAll=function(){return p(arguments,!0,!0,!1)},n.extendDeepNoArrays=function(){return p(arguments,!0,!1,!0)}},{"./is_plain_object.js":780}],773:[function(e,t,n){"use strict";t.exports=function(e){for(var t={},n=[],r=0,i=0;i<e.length;i++){var o=e[i];1!==t[o]&&(t[o]=1,n[r++]=o)}return n}},{}],774:[function(e,t,n){"use strict";function a(e){return!0===e.visible}function s(e){e=e[0].trace;return!0===e.visible&&0!==e._length}t.exports=function(e){for(var t,n=(t=e,Array.isArray(t)&&Array.isArray(t[0])&&t[0][0]&&t[0][0].trace?s:a),r=[],i=0;i<e.length;i++){var o=e[i];n(o)&&r.push(o)}return r}},{}],775:[function(e,t,n){"use strict";var a,s,l,u=e("./mod").mod;function p(e,t,n,r,i,o,a,s){var l=n-e,n=i-e,a=a-i,i=r-t,r=o-t,s=s-o,o=l*s-a*i;if(0==o)return null;a=(n*s-a*r)/o,o=(n*i-l*r)/o;return o<0||1<o||a<0||1<a?null:{x:e+l*a,y:t+i*a}}function y(e,t,n,r,i){var o=r*e+i*t;if(o<0)return r*r+i*i;if(n<o){var a=r-e,o=i-t;return a*a+o*o}e=r*t-i*e;return e*e/n}n.segmentsIntersect=p,n.segmentDistance=function(e,t,n,r,i,o,a,s){if(p(e,t,n,r,i,o,a,s))return 0;var l=n-e,u=r-t,c=a-i,f=s-o,d=l*l+u*u,h=c*c+f*f,o=Math.min(y(l,u,d,i-e,o-t),y(l,u,d,a-e,s-t),y(c,f,h,e-i,t-o),y(c,f,h,n-i,r-o));return Math.sqrt(o)},n.getTextLocation=function(e,t,n,r){if(e===s&&r===l||(a={},s=e,l=r),a[n])return a[n];var i=e.getPointAtLength(u(n-r/2,t)),o=e.getPointAtLength(u(n+r/2,t)),r=Math.atan((o.y-i.y)/(o.x-i.x)),t=e.getPointAtLength(u(n,t)),r={x:(4*t.x+i.x+o.x)/6,y:(4*t.y+i.y+o.y)/6,theta:r};return a[n]=r},n.clearLocationCache=function(){s=null},n.getVisibleSegment=function(n,e,t){var r,i,o=e.left,a=e.right,s=e.top,l=e.bottom,u=0,c=n.getTotalLength(),f=c;function d(e){var t=n.getPointAtLength(e);0===e?r=t:e===c&&(i=t);e=t.x<o?o-t.x:t.x>a?t.x-a:0,t=t.y<s?s-t.y:t.y>l?t.y-l:0;return Math.sqrt(e*e+t*t)}for(var h=d(u);h;){if(f<(u+=h+t))return;h=d(u)}for(h=d(f);h;){if((f-=h+t)<u)return;h=d(f)}return{min:u,max:f,len:f-u,total:c,isClosed:0===u&&f===c&&Math.abs(r.x-i.x)<.1&&Math.abs(r.y-i.y)<.1}},n.findPointOnPath=function(e,t,n,r){for(var i,o,a,s=(r=r||{}).pathLength||e.getTotalLength(),l=r.tolerance||.001,u=r.iterationLimit||30,c=e.getPointAtLength(0)[n]>e.getPointAtLength(s)[n]?-1:1,f=0,d=0,h=s;f<u;){if(a=(o=e.getPointAtLength(i=(d+h)/2))[n]-t,Math.abs(a)<l)return o;0<c*a?h=i:d=i,f++}return o}},{"./mod":786}],776:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("tinycolor2"),h=e("color-normalize"),p=e("../components/colorscale"),o=e("../components/color/attributes").defaultLine,y=e("./array").isArrayOrTypedArray,g=h(o),v=1;function m(e,t){return e[3]*=t,e}function b(e){if(r(e))return g;e=h(e);return e.length?e:g}function x(e){return r(e)?e:v}t.exports={formatColor:function(e,t,n){var r,i,o=e.color,a=y(o),s=y(t),l=[],u=void 0!==p.extractOpts(e).colorscale?p.makeColorScaleFuncFromTrace(e):b,c=a?function(e,t){return void 0===e[t]?g:h(u(e[t]))}:b,f=s?function(e,t){return void 0===e[t]?v:x(e[t])}:x;if(a||s)for(var d=0;d<n;d++)r=c(o,d),i=f(t,d),l[d]=m(r,i);else l=m(h(o),t);return l},parseColorScale:function(e){var t=p.extractOpts(e),e=t.colorscale;return(e=t.reversescale?p.flipScale(t.colorscale):e).map(function(e){var t=e[0],e=i(e[1]).toRgb();return{index:t,rgb:[e.r,e.g,e.b,e.a]}})}}},{"../components/color/attributes":646,"../components/colorscale":659,"./array":764,"color-normalize":625,"fast-isnumeric":574,tinycolor2:980}],777:[function(e,t,n){"use strict";t.exports=function(e){return e}},{}],778:[function(e,t,n){"use strict";t.exports=function(e,t){if(!t)return e;var n=1/Math.abs(t),r=1<n?(n*e+n*t)/n:e+t,n=String(r).length;return 16<n&&(t=String(t).length,String(e).length+t<=n&&(-1===(n=parseFloat(r).toPrecision(12)).indexOf("e+")&&(r=+n))),r}},{}],779:[function(e,t,n){"use strict";var r=e("@plotly/d3"),v=e("d3-time-format").utcFormat,i=e("d3-format").format,o=e("fast-isnumeric"),a=e("../constants/numerical"),s=a.FP_SAFE,l=-s,u=a.BADNUM,m=t.exports={adjustFormat:function(e){return!e||/^\d[.]\df/.test(e)||/[.]\d%/.test(e)?e:"0.f"===e?"~f":/^\d%/.test(e)?"~%":/^\ds/.test(e)?"~s":!/^[~,.0$]/.test(e)&&/[&fps]/.test(e)?"~"+e:e}},c={};m.warnBadFormat=function(e){e=String(e);c[e]||(c[e]=1,m.warn('encountered bad format: "'+e+'"'))},m.noFormat=function(e){return String(e)},m.numberFormat=function(t){var e;try{e=i(m.adjustFormat(t))}catch(e){return m.warnBadFormat(t),m.noFormat}return e},m.nestedProperty=e("./nested_property"),m.keyedContainer=e("./keyed_container"),m.relativeAttr=e("./relative_attr"),m.isPlainObject=e("./is_plain_object"),m.toLogRange=e("./to_log_range"),m.relinkPrivateKeys=e("./relink_private");t=e("./array");m.isTypedArray=t.isTypedArray,m.isArrayOrTypedArray=t.isArrayOrTypedArray,m.isArray1D=t.isArray1D,m.ensureArray=t.ensureArray,m.concat=t.concat,m.maxRowLength=t.maxRowLength,m.minRowLength=t.minRowLength;t=e("./mod");m.mod=t.mod,m.modHalf=t.modHalf;t=e("./coerce");m.valObjectMeta=t.valObjectMeta,m.coerce=t.coerce,m.coerce2=t.coerce2,m.coerceFont=t.coerceFont,m.coercePattern=t.coercePattern,m.coerceHoverinfo=t.coerceHoverinfo,m.coerceSelectionMarkerOpacity=t.coerceSelectionMarkerOpacity,m.validate=t.validate;t=e("./dates");m.dateTime2ms=t.dateTime2ms,m.isDateTime=t.isDateTime,m.ms2DateTime=t.ms2DateTime,m.ms2DateTimeLocal=t.ms2DateTimeLocal,m.cleanDate=t.cleanDate,m.isJSDate=t.isJSDate,m.formatDate=t.formatDate,m.incrementMonth=t.incrementMonth,m.dateTick0=t.dateTick0,m.dfltRange=t.dfltRange,m.findExactDates=t.findExactDates,m.MIN_MS=t.MIN_MS,m.MAX_MS=t.MAX_MS;t=e("./search");m.findBin=t.findBin,m.sorterAsc=t.sorterAsc,m.sorterDes=t.sorterDes,m.distinctVals=t.distinctVals,m.roundUp=t.roundUp,m.sort=t.sort,m.findIndexOfMin=t.findIndexOfMin,m.sortObjectKeys=e("./sort_object_keys");t=e("./stats");m.aggNums=t.aggNums,m.len=t.len,m.mean=t.mean,m.median=t.median,m.midRange=t.midRange,m.variance=t.variance,m.stdev=t.stdev,m.interp=t.interp;t=e("./matrix");m.init2dArray=t.init2dArray,m.transposeRagged=t.transposeRagged,m.dot=t.dot,m.translationMatrix=t.translationMatrix,m.rotationMatrix=t.rotationMatrix,m.rotationXYMatrix=t.rotationXYMatrix,m.apply3DTransform=t.apply3DTransform,m.apply2DTransform=t.apply2DTransform,m.apply2DTransform2=t.apply2DTransform2,m.convertCssMatrix=t.convertCssMatrix,m.inverseTransformMatrix=t.inverseTransformMatrix;t=e("./angles");m.deg2rad=t.deg2rad,m.rad2deg=t.rad2deg,m.angleDelta=t.angleDelta,m.angleDist=t.angleDist,m.isFullCircle=t.isFullCircle,m.isAngleInsideSector=t.isAngleInsideSector,m.isPtInsideSector=t.isPtInsideSector,m.pathArc=t.pathArc,m.pathSector=t.pathSector,m.pathAnnulus=t.pathAnnulus;t=e("./anchor_utils");m.isLeftAnchor=t.isLeftAnchor,m.isCenterAnchor=t.isCenterAnchor,m.isRightAnchor=t.isRightAnchor,m.isTopAnchor=t.isTopAnchor,m.isMiddleAnchor=t.isMiddleAnchor,m.isBottomAnchor=t.isBottomAnchor;t=e("./geometry2d");m.segmentsIntersect=t.segmentsIntersect,m.segmentDistance=t.segmentDistance,m.getTextLocation=t.getTextLocation,m.clearLocationCache=t.clearLocationCache,m.getVisibleSegment=t.getVisibleSegment,m.findPointOnPath=t.findPointOnPath;t=e("./extend");m.extendFlat=t.extendFlat,m.extendDeep=t.extendDeep,m.extendDeepAll=t.extendDeepAll,m.extendDeepNoArrays=t.extendDeepNoArrays;t=e("./loggers");m.log=t.log,m.warn=t.warn,m.error=t.error;t=e("./regex");m.counterRegex=t.counter;t=e("./throttle");m.throttle=t.throttle,m.throttleDone=t.done,m.clearThrottle=t.clear;t=e("./dom");function f(e){var t,n={};for(t in e)for(var r=e[t],i=0;i<r.length;i++)n[r[i]]=+t;return n}m.getGraphDiv=t.getGraphDiv,m.isPlotDiv=t.isPlotDiv,m.removeElement=t.removeElement,m.addStyleRule=t.addStyleRule,m.addRelatedStyleRule=t.addRelatedStyleRule,m.deleteRelatedStyleRule=t.deleteRelatedStyleRule,m.getFullTransformMatrix=t.getFullTransformMatrix,m.getElementTransformMatrix=t.getElementTransformMatrix,m.getElementAndAncestors=t.getElementAndAncestors,m.equalDomRects=t.equalDomRects,m.clearResponsive=e("./clear_responsive"),m.preserveDrawingBuffer=e("./preserve_drawing_buffer"),m.makeTraceGroups=e("./make_trace_groups"),m._=e("./localize"),m.notifier=e("./notifier"),m.filterUnique=e("./filter_unique"),m.filterVisible=e("./filter_visible"),m.pushUnique=e("./push_unique"),m.increment=e("./increment"),m.cleanNumber=e("./clean_number"),m.ensureNumber=function(e){return o(e)?(e=Number(e),s<e||e<l?u:e):u},m.isIndex=function(e,t){return!(void 0!==t&&t<=e)&&(o(e)&&0<=e&&e%1==0)},m.noop=e("./noop"),m.identity=e("./identity"),m.repeat=function(e,t){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n},m.swapAttrs=function(e,t,n,r){n=n||"x",r=r||"y";for(var i=0;i<t.length;i++){var o=t[i],a=m.nestedProperty(e,o.replace("?",n)),s=m.nestedProperty(e,o.replace("?",r)),o=a.get();a.set(s.get()),s.set(o)}},m.raiseToTop=function(e){e.parentNode.appendChild(e)},m.cancelTransition=function(e){return e.transition().duration(0)},m.constrain=function(e,t,n){return n<t?Math.max(n,Math.min(t,e)):Math.max(t,Math.min(n,e))},m.bBoxIntersect=function(e,t,n){return e.left<=t.right+(n=n||0)&&t.left<=e.right+n&&e.top<=t.bottom+n&&t.top<=e.bottom+n},m.simpleMap=function(e,t,n,r,i){for(var o=e.length,a=new Array(o),s=0;s<o;s++)a[s]=t(e[s],n,r,i);return a},m.randstr=function e(t,n,r,i){if(r=r||16,(n=void 0===n?24:n)<=0)return"0";for(var o=Math.log(Math.pow(2,n))/Math.log(r),a="",s=2;o===1/0;s*=2)o=Math.log(Math.pow(2,n/s))/Math.log(r)*s;var l=o-Math.floor(o);for(s=0;s<Math.floor(o);s++)a=Math.floor(Math.random()*r).toString(r)+a;l&&(u=Math.pow(r,l),a=Math.floor(Math.random()*u).toString(r)+a);var u=parseInt(a,r);return t&&t[a]||u!==1/0&&u>=Math.pow(2,n)?10<i?(m.warn("randstr failed uniqueness"),a):e(t,n,r,(i||0)+1):a},m.OptionControl=function(t,n){t=t||{};var r={optionList:[],_newoption:function(e){e[n]=t,r[e.name]=e,r.optionList.push(e)}};return r["_"+(n=n||"opt")]=t,r},m.smooth=function(e,t){if((t=Math.round(t)||0)<2)return e;for(var n,r,i,o=e.length,a=2*o,s=2*t-1,l=new Array(s),u=new Array(o),c=0;c<s;c++)l[c]=(1-Math.cos(Math.PI*(c+1)/t))/(2*t);for(c=0;c<o;c++){for(n=i=0;n<s;n++)(r=c+n+1-t)<-o?r-=a*Math.round(r/a):a<=r&&(r-=a*Math.floor(r/a)),r<0?r=-1-r:o<=r&&(r=a-1-r),i+=e[r]*l[n];u[c]=i}return u},m.syncOrAsync=function(e,t,n){var r;function i(){return m.syncOrAsync(e,t,n)}for(;e.length;)if((r=(0,e.splice(0,1)[0])(t))&&r.then)return r.then(i);return n&&n(t)},m.stripTrailingSlash=function(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e},m.noneOrAll=function(e,t,n){if(e){for(var r=!1,i=!0,o=0;o<n.length;o++)null!=e[n[o]]?r=!0:i=!1;if(r&&!i)for(o=0;o<n.length;o++)e[n[o]]=t[n[o]]}},m.mergeArray=function(e,t,n,r){var i="function"==typeof r;if(m.isArrayOrTypedArray(e))for(var o=Math.min(e.length,t.length),a=0;a<o;a++){var s=e[a];t[a][n]=i?r(s):s}},m.mergeArrayCastPositive=function(e,t,n){return m.mergeArray(e,t,n,function(e){e=+e;return isFinite(e)&&0<e?e:0})},m.fillArray=function(e,t,n,r){if(r=r||m.identity,m.isArrayOrTypedArray(e))for(var i=0;i<t.length;i++)t[i][n]=r(e[i])},m.castOption=function(e,t,n,r){r=r||m.identity;n=m.nestedProperty(e,n).get();return m.isArrayOrTypedArray(n)?Array.isArray(t)&&m.isArrayOrTypedArray(n[t[0]])?r(n[t[0]][t[1]]):r(n[t]):n},m.extractOption=function(e,t,n,r){if(n in e)return e[n];r=m.nestedProperty(t,r).get();return Array.isArray(r)?void 0:r},m.tagSelected=function(e,t,n){var r,i=t.selectedpoints,t=t._indexToPoints;t&&(r=f(t));for(var o=0;o<i.length;o++){var a,s=i[o];(m.isIndex(s)||m.isArrayOrTypedArray(s)&&m.isIndex(s[0])&&m.isIndex(s[1]))&&(a=r?r[s]:s,s=n?n[a]:a,void 0!==(a=s)&&a<e.length&&(e[s].selected=1))}},m.selIndices2selPoints=function(e){var t=e.selectedpoints,e=e._indexToPoints;if(e){for(var n=f(e),r=[],i=0;i<t.length;i++){var o=t[i];m.isIndex(o)&&(o=n[o],m.isIndex(o)&&r.push(o))}return r}return t},m.getTargetArray=function(e,t){t=t.target;if("string"==typeof t&&t){e=m.nestedProperty(e,t).get();return!!Array.isArray(e)&&e}return!!Array.isArray(t)&&t},m.minExtend=function(e,t){var n={};"object"!=typeof t&&(t={});for(var r,i,o=Object.keys(e),a=0;a<o.length;a++)i=e[r=o[a]],"_"!==r.charAt(0)&&"function"!=typeof i&&("module"===r?n[r]=i:Array.isArray(i)?n[r]="colorscale"===r?i.slice():i.slice(0,3):m.isTypedArray(i)?n[r]=i.subarray(0,3):n[r]=i&&"object"==typeof i?m.minExtend(e[r],t[r]):i);for(o=Object.keys(t),a=0;a<o.length;a++)"object"==typeof(i=t[r=o[a]])&&r in n&&"object"==typeof n[r]||(n[r]=i);return n},m.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},m.containsAny=function(e,t){for(var n=0;n<t.length;n++)if(-1!==e.indexOf(t[n]))return!0;return!1},m.isIE=function(){return void 0!==window.navigator.msSaveBlob};var d=/Version\/[\d\.]+.*Safari/;m.isSafari=function(){return d.test(window.navigator.userAgent)};var h=/iPad|iPhone|iPod/;m.isIOS=function(){return h.test(window.navigator.userAgent)};var p=/Firefox\/(\d+)\.\d+/;m.getFirefoxVersion=function(){var e=p.exec(window.navigator.userAgent);if(e&&2===e.length){e=parseInt(e[1]);if(!isNaN(e))return e}return null},m.isD3Selection=function(e){return e instanceof r.selection},m.ensureSingle=function(e,t,n,r){var i=e.select(t+(n?"."+n:""));if(i.size())return i;t=e.append(t);return n&&t.classed(n,!0),r&&t.call(r),t},m.ensureSingleById=function(e,t,n,r){var i=e.select(t+"#"+n);if(i.size())return i;n=e.append(t).attr("id",n);return r&&n.call(r),n},m.objectFromPath=function(e,t){for(var n=e.split("."),e=a={},r=0;r<n.length;r++)var i=n[r],o=n[r].match(/(.*)\[([0-9]+)\]/),a=o?(i=o[1],o=o[2],a=a[i]=[],r===n.length-1?a[o]=t:a[o]={},a[o]):(r===n.length-1?a[i]=t:a[i]={},a[i]);return e};var y=/^([^\[\.]+)\.(.+)?/,g=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;m.expandObjectPaths=function(e){var t,n,r,i,o,a;if("object"==typeof e&&!Array.isArray(e))for(t in e)e.hasOwnProperty(t)&&((o=t.match(y))?(r=e[t],n=o[1],delete e[t],e[n]=m.extendDeepNoArrays(e[n]||{},m.objectFromPath(t,m.expandObjectPaths(r))[n])):(o=t.match(g))?(r=e[t],n=o[1],i=parseInt(o[2]),delete e[t],e[n]=e[n]||[],"."===o[3]?(a=o[4],o=e[n][i]=e[n][i]||{},m.extendDeepNoArrays(o,m.objectFromPath(a,m.expandObjectPaths(r)))):e[n][i]=m.expandObjectPaths(r)):e[t]=m.expandObjectPaths(e[t]));return e},m.numSeparate=function(e,t,n){if(n=n||!1,"string"!=typeof t||0===t.length)throw new Error("Separator string required for formatting!");"number"==typeof e&&(e=String(e));var r=/(\d+)(\d{3})/,i=t.charAt(0),o=t.charAt(1),e=e.split("."),a=e[0],i=1<e.length?i+e[1]:"";if(o&&(1<e.length||4<a.length||n))for(;r.test(a);)a=a.replace(r,"$1"+o+"$2");return a+i},m.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var b=/^\w*$/;m.templateString=function(e,n){var r={};return e.replace(m.TEMPLATE_STRING_REGEX,function(e,t){t=b.test(t)?n[t]:(r[t]=r[t]||m.nestedProperty(n,t).get,r[t]());return m.isValidTextValue(t)?t:""})};var x={max:10,count:0,name:"hovertemplate"};m.hovertemplateString=function(){return M.apply(x,arguments)};var _={max:10,count:0,name:"texttemplate"};m.texttemplateString=function(){return M.apply(_,arguments)};var w=/^[:|\|]/;function M(e,d,h){var p=this,y=arguments;d=d||{};var g={};return e.replace(m.TEMPLATE_STRING_REGEX,function(e,t,n){var r,i,o="_xother"===t||"_yother"===t,a="_xother_"===t||"_yother_"===t,s="xother_"===t||"yother_"===t,l="xother"===t||"yother"===t||o||s||a,u=t;if((o||a)&&(u=u.substring(1)),(s||a)&&(u=u.substring(0,u.length-1)),l){if(void 0===(r=d[u]))return""}else for(var c,f=3;f<y.length;f++)if(c=y[f]){if(c.hasOwnProperty(u)){r=c[u];break}if(b.test(u)||(r=m.nestedProperty(c,u).get(),(r=g[u]||m.nestedProperty(c,u).get())&&(g[u]=r)),void 0!==r)break}return void 0===r&&p?(p.count<p.max&&(m.warn("Variable '"+u+"' in "+p.name+" could not be found!"),r=e),p.count===p.max&&m.warn("Too many "+p.name+" warnings - additional warnings will be suppressed"),p.count++,e):(n?(":"===n[0]&&(r=(i=(h||m).numberFormat)(n.replace(w,""))(r)),"|"===n[0]&&(i=h?h.timeFormat:v,e=m.dateTime2ms(r),r=m.formatDate(e,n.replace(w,""),!1,i))):d.hasOwnProperty(i=u+"Label")&&(r=d[i]),l&&(r="("+r+")",(o||a)&&(r=" "+r),(s||a)&&(r+=" ")),r)})}m.subplotSort=function(e,t){for(var n=Math.min(e.length,t.length)+1,r=0,i=0,o=0;o<n;o++){var a=e.charCodeAt(o)||0,s=t.charCodeAt(o)||0,l=48<=a&&a<=57,u=48<=s&&s<=57;if(l&&(r=10*r+a-48),u&&(i=10*i+s-48),!l||!u){if(r!==i)return r-i;if(a!==s)return a-s}}return i-r};var j=2e9;m.seedPseudoRandom=function(){j=2e9},m.pseudoRandom=function(){var e=j;return j=(69069*j+1)%4294967296,Math.abs(j-e)<429496729?m.pseudoRandom():j/4294967296},m.fillText=function(e,t,n){var r=Array.isArray(n)?function(e){n.push(e)}:function(e){n.text=e},i=m.extractOption(e,t,"htx","hovertext");if(m.isValidTextValue(i))return r(i);t=m.extractOption(e,t,"tx","text");return m.isValidTextValue(t)?r(t):void 0},m.isValidTextValue=function(e){return e||0===e},m.formatPercent=function(e,t){t=t||0;for(var n=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%",r=0;r<t;r++)-1!==n.indexOf(".")&&(n=(n=n.replace("0%","%")).replace(".%","%"));return n},m.isHidden=function(e){e=window.getComputedStyle(e).display;return!e||"none"===e},m.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""},m.strRotate=function(e){return e?"rotate("+e+")":""},m.strScale=function(e){return 1!==e?"scale("+e+")":""},m.getTextTransform=function(e){var t=e.noCenter,n=e.textX,r=e.textY,i=e.targetX,o=e.targetY,a=e.anchorX||0,s=e.anchorY||0,l=e.rotate,e=e.scale;return e?1<e&&(e=1):e=0,m.strTranslate(i-e*(n+a),o-e*(r+s))+m.strScale(e)+(l?"rotate("+l+(t?"":" "+n+" "+r)+")":"")},m.ensureUniformFontSize=function(e,t){var n=m.extendFlat({},t);return n.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0),n},m.join2=function(e,t,n){var r=e.length;return 1<r?e.slice(0,-1).join(t)+n+e[r-1]:e.join(t)},m.bigFont=function(e){return Math.round(1.2*e)};var e=m.getFirefoxVersion(),k=null!==e&&e<86;m.getPositionFromD3Event=function(){return k?[r.event.layerX,r.event.layerY]:[r.event.offsetX,r.event.offsetY]}},{"../constants/numerical":758,"./anchor_utils":762,"./angles":763,"./array":764,"./clean_number":765,"./clear_responsive":767,"./coerce":768,"./dates":769,"./dom":770,"./extend":772,"./filter_unique":773,"./filter_visible":774,"./geometry2d":775,"./identity":777,"./increment":778,"./is_plain_object":780,"./keyed_container":781,"./localize":782,"./loggers":783,"./make_trace_groups":784,"./matrix":785,"./mod":786,"./nested_property":787,"./noop":788,"./notifier":789,"./preserve_drawing_buffer":792,"./push_unique":793,"./regex":795,"./relative_attr":796,"./relink_private":797,"./search":798,"./sort_object_keys":801,"./stats":802,"./throttle":805,"./to_log_range":806,"@plotly/d3":3,"d3-format":628,"d3-time-format":629,"fast-isnumeric":574}],780:[function(e,t,n){"use strict";t.exports=function(e){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(e):"[object Object]"===Object.prototype.toString.call(e)&&Object.getPrototypeOf(e).hasOwnProperty("hasOwnProperty")}},{}],781:[function(e,t,n){"use strict";var p=e("./nested_property"),i=/^\w*$/;t.exports=function(e,o,a,s){var r,l;a=a||"name",s=s||"value";var u={},c=o&&o.length?(l=p(e,o)).get():e;o=o||"";var f={};if(c)for(r=0;r<c.length;r++)f[c[r][a]]=r;var d=i.test(s),h={set:function(e,t){var n=null===t?4:0;if(!c){if(!l||4===n)return;c=[],l.set(c)}var r=f[e];if(void 0===r){if(4===n)return;n|=3,r=c.length,f[e]=r}else t!==(d?c[r][s]:p(c[r],s).get())&&(n|=2);var i=c[r]=c[r]||{};return i[a]=e,d?i[s]=t:p(i,s).set(t),null!==t&&(n&=-5),u[r]=u[r]|n,h},get:function(e){if(c){e=f[e];return void 0!==e?d?c[e][s]:p(c[e],s).get():void 0}},rename:function(e,t){var n=f[e];return void 0===n||(u[n]=1|u[n],f[t]=n,delete f[e],c[n][a]=t),h},remove:function(e){var t=f[e];if(void 0===t)return h;var n=c[t];if(2<Object.keys(n).length)return u[t]=2|u[t],h.set(e,null);if(d){for(r=t;r<c.length;r++)u[r]=3|u[r];for(r=t;r<c.length;r++)f[c[r][a]]--;c.splice(t,1),delete f[e]}else p(n,s).set(null),u[t]=6|u[t];return h},constructUpdate:function(){for(var e,t,n={},r=Object.keys(u),i=0;i<r.length;i++)t=r[i],e=o+"["+t+"]",c[t]?(1&u[t]&&(n[e+"."+a]=c[t][a]),2&u[t]&&(n[e+"."+s]=d?4&u[t]?null:c[t][s]:4&u[t]?null:p(c[t],s).get())):n[e]=null;return n}};return h}},{"./nested_property":787}],782:[function(e,t,n){"use strict";var l=e("../registry");t.exports=function(e,t){for(var n=e._context.locale,r=0;r<2;r++){for(var i=e._context.locales,o=0;o<2;o++){var a=(i[n]||{}).dictionary;if(a){a=a[t];if(a)return a}i=l.localeRegistry}var s=n.split("-")[0];if(s===n)break;n=s}return t}},{"../registry":879}],783:[function(e,t,n){"use strict";var r=e("../plot_api/plot_config").dfltConfig,i=e("./notifier");t.exports={log:function(){if(1<r.logging){for(var e=["LOG:"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.trace.apply(console,e)}if(1<r.notifyOnLogging){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);i(n.join("<br>"),"long")}},warn:function(){if(0<r.logging){for(var e=["WARN:"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.trace.apply(console,e)}if(0<r.notifyOnLogging){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);i(n.join("<br>"),"stick")}},error:function(){if(0<r.logging){for(var e=["ERROR:"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.error.apply(console,e)}if(0<r.notifyOnLogging){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);i(n.join("<br>"),"stick")}}}},{"../plot_api/plot_config":815,"./notifier":789}],784:[function(e,t,n){"use strict";var i=e("@plotly/d3");t.exports=function(e,t,n){t=e.selectAll("g."+n.replace(/\s/g,".")).data(t,function(e){return e[0].trace.uid});t.exit().remove(),t.enter().append("g").attr("class",n),t.order();var r=e.classed("rangeplot")?"nodeRangePlot3":"node3";return t.each(function(e){e[0][r]=i.select(this)}),t}},{"@plotly/d3":3}],785:[function(e,t,a){"use strict";var n=e("gl-mat4");a.init2dArray=function(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=new Array(t);return n},a.transposeRagged=function(e){for(var t,n=0,r=e.length,i=0;i<r;i++)n=Math.max(n,e[i].length);var o=new Array(n);for(i=0;i<n;i++)for(o[i]=new Array(r),t=0;t<r;t++)o[i][t]=e[t][i];return o},a.dot=function(e,t){if(!e.length||!t.length||e.length!==t.length)return null;var n=e.length;if(e[0].length)for(i=new Array(n),o=0;o<n;o++)i[o]=a.dot(e[o],t);else if(t[0].length)for(var r=a.transposeRagged(t),i=new Array(r.length),o=0;o<r.length;o++)i[o]=a.dot(e,r[o]);else for(o=i=0;o<n;o++)i+=e[o]*t[o];return i},a.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},a.rotationMatrix=function(e){e=e*Math.PI/180;return[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]]},a.rotationXYMatrix=function(e,t,n){return a.dot(a.dot(a.translationMatrix(t,n),a.rotationMatrix(e)),a.translationMatrix(-t,-n))},a.apply3DTransform=function(t){return function(){var e=arguments,e=1===arguments.length?e[0]:[e[0],e[1],e[2]||0];return a.dot(t,[e[0],e[1],e[2],1]).slice(0,3)}},a.apply2DTransform=function(t){return function(){var e=arguments;3===e.length&&(e=e[0]);e=1===arguments.length?e[0]:[e[0],e[1]];return a.dot(t,[e[0],e[1],1]).slice(0,2)}},a.apply2DTransform2=function(e){var t=a.apply2DTransform(e);return function(e){return t(e.slice(0,2)).concat(t(e.slice(2,4)))}},a.convertCssMatrix=function(e){if(e){var t=e.length;if(16===t)return e;if(6===t)return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},a.inverseTransformMatrix=function(e){var t=[];return n.invert(t,e),[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}},{"gl-mat4":591}],786:[function(e,t,n){"use strict";t.exports={mod:function(e,t){return(e%=t)<0?e+t:e},modHalf:function(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}}},{}],787:[function(e,t,n){"use strict";var c=e("fast-isnumeric"),f=e("./array").isArrayOrTypedArray;t.exports=function(e,t){if(c(t))t=String(t);else if("string"!=typeof t||"[-1]"===t.substr(t.length-4))throw"bad property string";for(var n,r,i,o=0,a=t.split(".");o<a.length;){if(n=String(a[o]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])a[o]=n[1];else{if(0!==o)throw"bad property string";a.splice(0,1)}for(r=n[2].substr(1,n[2].length-2).split("]["),i=0;i<r.length;i++)o++,a.splice(o,0,Number(r[i]))}o++}return"object"!=typeof e?{set:function(){throw"bad container"},get:function(){},astr:t,parts:a,obj:e}:{set:h(e,a,t),get:function a(s,l){return function(){var e,t,n,r,i,o=s;for(r=0;r<l.length-1;r++){if(-1===(e=l[r])){for(t=!0,n=[],i=0;i<o.length;i++)n[i]=a(o[i],l.slice(r+1))(),n[i]!==n[0]&&(t=!1);return t?n[0]:n}if("number"==typeof e&&!f(o))return;if("object"!=typeof(o=o[e])||null===o)return}if("object"==typeof o&&null!==o&&null!==(n=o[l[r]]))return n}}(e,a),astr:t,parts:a,obj:e}};var r=/(^|\.)args\[/;function d(e,t){return void 0===e||null===e&&!t.match(r)}function h(s,l,u){return function(e){for(var t,n=s,r="",i=[[s,r]],o=d(e,u),a=0;a<l.length-1;a++){if("number"==typeof(t=l[a])&&!f(n))throw"array index but container is not an array";if(-1===t){if(o=!function(e,t,n,r){var i,o=f(n),a=!0,s=n,l=r.replace("-1",0),u=!o&&d(n,l),c=t[0];for(i=0;i<e.length;i++)l=r.replace("-1",i),o&&(s=n[i%n.length],u=d(s,l)),u&&(a=!1),p(e,i,c,u)&&h(e[i],t,r.replace("-1",i))(s);return a}(n,l.slice(a+1),e,u))break;return}if(!p(n,t,l[a+1],o))break;if("object"!=typeof(n=n[t])||null===n)throw"container is not an object";r=function(e,t){var n=t;c(t)?n="["+t+"]":e&&(n="."+t);return e+n}(r,t),i.push([n,r])}if(o){if(a===l.length-1&&(delete n[l[a]],Array.isArray(n)&&+l[a]==n.length-1))for(;n.length&&void 0===n[n.length-1];)n.pop()}else n[l[a]]=e}}function p(e,t,n,r){if(void 0===e[t]){if(r)return;e[t]="number"==typeof n?[]:{}}return 1}},{"./array":764,"fast-isnumeric":574}],788:[function(e,t,n){"use strict";t.exports=function(){}},{}],789:[function(e,t,n){"use strict";var l=e("@plotly/d3"),r=e("fast-isnumeric"),i=[];t.exports=function(e,o){var a;function s(e){e.duration(700).style("opacity",0).each("end",function(e){e=i.indexOf(e);-1!==e&&i.splice(e,1),l.select(this).remove()})}-1===i.indexOf(e)&&(i.push(e),a=1e3,r(o)?a=o:"long"===o&&(a=3e3),(e=l.select("body").selectAll(".plotly-notifier").data([0])).enter().append("div").classed("plotly-notifier",!0),e.selectAll(".notifier-note").data(i).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(e){var t=l.select(this);t.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){t.transition().call(s)});for(var n=t.append("p"),r=e.split(/<br\s*\/?>/g),i=0;i<r.length;i++)i&&n.append("br"),n.append("span").text(r[i]);"stick"===o?t.transition().duration(350).style("opacity",1):t.transition().duration(700).style("opacity",1).transition().delay(a).call(s)}))}},{"@plotly/d3":3,"fast-isnumeric":574}],790:[function(e,t,n){"use strict";var a=e("./setcursor"),s="data-savedcursor";t.exports=function(e,t){var n=e.attr(s);if(t){if(!n){for(var r=(e.attr("class")||"").split(" "),i=0;i<r.length;i++){var o=r[i];0===o.indexOf("cursor-")&&e.attr(s,o.substr(7)).classed(o,!1)}e.attr(s)||e.attr(s,"!!")}a(e,t)}else n&&(e.attr(s,null),"!!"===n?a(e):a(e,n))}},{"./setcursor":799}],791:[function(e,t,n){"use strict";var d=e("./matrix").dot,v=e("../constants/numerical").BADNUM,u=t.exports={};u.tester=function(e){var d=e.slice(),h=d[0][0],p=h,y=d[0][1],g=y;for(d.push(d[0]),r=1;r<d.length;r++)h=Math.min(h,d[r][0]),p=Math.max(p,d[r][0]),y=Math.min(y,d[r][1]),g=Math.max(g,d[r][1]);var i,e=!1;5===d.length&&(d[0][0]===d[1][0]?d[2][0]===d[3][0]&&d[0][1]===d[3][1]&&d[1][1]===d[2][1]&&(e=!0,i=function(e){return e[0]===d[0][0]}):d[0][1]===d[1][1]&&d[2][1]===d[3][1]&&d[0][0]===d[3][0]&&d[1][0]===d[2][0]&&(e=!0,i=function(e){return e[1]===d[0][1]}));for(var t=!0,n=d[0],r=1;r<d.length;r++)if(n[0]!==d[r][0]||n[1]!==d[r][1]){t=!1;break}return{xmin:h,xmax:p,ymin:y,ymax:g,pts:d,contains:e?function(e,t){var n=e[0],r=e[1];return!(n===v||n<h||p<n||r===v||r<y||g<r)&&(!t||!i(e))}:function(e,t){var n=e[0],r=e[1];if(n===v||n<h||p<n||r===v||r<y||g<r)return!1;for(var i,o,a,s=d.length,l=d[0][0],u=d[0][1],c=0,f=1;f<s;f++)if(a=l,i=u,l=d[f][0],u=d[f][1],!(n<(o=Math.min(a,l))||n>Math.max(a,l)||r>Math.max(i,u)))if(r<Math.min(i,u))n!==o&&c++;else{if(r===(a=l===a?r:i+(n-a)*(u-i)/(l-a)))return 1!==f||!t;r<=a&&n!==o&&c++}return c%2==1},isRect:e,degenerate:t}},u.isSegmentBent=function(e,t,n,r){for(var i,o,a=e[t],s=[e[n][0]-a[0],e[n][1]-a[1]],l=d(s,s),u=Math.sqrt(l),c=[-s[1]/u,s[0]/u],f=t+1;f<n;f++)if(i=[e[f][0]-a[0],e[f][1]-a[1]],(o=d(i,s))<0||l<o||Math.abs(d(i,c))>r)return!0;return!1},u.filter=function(i,o){var a=[i[0]],s=0,l=0;function e(e){i.push(e);var t=a.length,n=s;a.splice(l+1);for(var r=n+1;r<i.length;r++)r!==i.length-1&&!u.isSegmentBent(i,n,r+1,o)||(a.push(i[r]),a.length<t-2&&(s=r,l=a.length-1),n=r)}return 1<i.length&&e(i.pop()),{addPt:e,raw:i,filtered:a}}},{"../constants/numerical":758,"./matrix":785}],792:[function(e,t,n){"use strict";var a=e("fast-isnumeric"),s=e("is-mobile");t.exports=function(e){var t=e&&e.hasOwnProperty("userAgent")?e.userAgent:function(){var e;"undefined"!=typeof navigator&&(e=navigator.userAgent);e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]);return e}();if("string"!=typeof t)return!0;e=s({ua:{headers:{"user-agent":t}},tablet:!0,featureDetect:!1});if(!e)for(var n=t.split(" "),r=1;r<n.length;r++)if(-1!==n[r].indexOf("Safari"))for(var i=r-1;-1<i;i--){var o=n[i];if("Version/"===o.substr(0,8)){o=o.substr(8).split(".")[0];if(13<=(o=a(o)?+o:o))return!0}}return e}},{"fast-isnumeric":574,"is-mobile":610}],793:[function(e,t,n){"use strict";t.exports=function(e,t){if(t instanceof RegExp){for(var n=t.toString(),r=0;r<e.length;r++)if(e[r]instanceof RegExp&&e[r].toString()===n)return e;e.push(t)}else!t&&0!==t||-1!==e.indexOf(t)||e.push(t);return e}},{}],794:[function(e,t,n){"use strict";var o=e("../lib"),s=e("../plot_api/plot_config").dfltConfig;var r={add:function(e,t,n,r,i){var o,a;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},a=e.undoQueue.index,e.autoplay?e.undoQueue.inSequence||(e.autoplay=!1):(!e.undoQueue.sequence||e.undoQueue.beginSequence?(e.undoQueue.queue.splice(a,e.undoQueue.queue.length-a,o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),e.undoQueue.index+=1):o=e.undoQueue.queue[a-1],e.undoQueue.beginSequence=!1,o&&(o.undo.calls.unshift(t),o.undo.args.unshift(n),o.redo.calls.push(r),o.redo.args.push(i)),e.undoQueue.queue.length>s.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--))},startSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},stopSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},undo:function(e){var t,n;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index<=0)){for(e.undoQueue.index--,t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.undo.calls.length;n++)r.plotDo(e,t.undo.calls[n],t.undo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1}},redo:function(e){var t,n;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index>=e.undoQueue.queue.length)){for(t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.redo.calls.length;n++)r.plotDo(e,t.redo.calls[n],t.redo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1,e.undoQueue.index++}}};r.plotDo=function(e,t,n){e.autoplay=!0,n=function(e,t){for(var n,r=[],i=0;i<t.length;i++)n=t[i],r[i]=n!==e&&"object"==typeof n?Array.isArray(n)?o.extendDeep([],n):o.extendDeepAll({},n):n;return r}(e,n),t.apply(null,n)},t.exports=r},{"../lib":779,"../plot_api/plot_config":815}],795:[function(e,t,n){"use strict";n.counter=function(e,t,n,r){n=(t||"")+(n?"":"$"),r=!1===r?"":"^";return"xy"===e?new RegExp(r+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n):new RegExp(r+e+"([2-9]|[1-9][0-9]+)?"+n)}},{}],796:[function(e,t,n){"use strict";var r=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,i=/^[^\.\[\]]+$/;t.exports=function(e,t){for(;t;){var n=e.match(r);if(n)e=n[1];else{if(!e.match(i))throw new Error("bad relativeAttr call:"+[e,t]);e=""}if("^"!==t.charAt(0))break;t=t.slice(1)}return e&&"["!==t.charAt(0)?e+"."+t:e+t}},{}],797:[function(e,t,n){"use strict";var l=e("./array").isArrayOrTypedArray,u=e("./is_plain_object");t.exports=function e(t,n){for(var r in n){var i=n[r],o=t[r];if(o!==i)if("_"===r.charAt(0)||"function"==typeof i)r in t||(t[r]=i);else if(l(i)&&l(o)&&u(i[0])){if("customdata"!==r&&"ids"!==r)for(var a=Math.min(i.length,o.length),s=0;s<a;s++)o[s]!==i[s]&&u(i[s])&&u(o[s])&&e(o[s],i[s])}else u(i)&&u(o)&&(e(o,i),Object.keys(o).length||delete t[r])}}},{"./array":764,"./is_plain_object":780}],798:[function(e,t,c){"use strict";var u=e("fast-isnumeric"),f=e("./loggers"),a=e("./identity"),d=e("../constants/numerical").BADNUM;function h(e,t){return e<t}function p(e,t){return e<=t}function y(e,t){return t<e}function g(e,t){return t<=e}c.findBin=function(e,t,n){if(u(t.start))return n?Math.ceil((e-t.start)/t.size-1e-9)-1:Math.floor((e-t.start)/t.size+1e-9);var r,i=0,o=t.length,a=0,s=1<o?(t[o-1]-t[0])/(o-1):1,l=0<=s?n?h:p:n?g:y;for(e+=1e-9*s*(n?-1:1)*(0<=s?1:-1);i<o&&a++<100;)l(t[r=Math.floor((i+o)/2)],e)?i=r+1:o=r;return 90<a&&f.log("Long binary search..."),i-1},c.sorterAsc=function(e,t){return e-t},c.sorterDes=function(e,t){return t-e},c.distinctVals=function(e){var t,n=e.slice();for(n.sort(c.sorterAsc),t=n.length-1;-1<t&&n[t]===d;t--);for(var r,i=n[t]-n[0]||1,o=i/(t||1)/1e4,a=[],s=0;s<=t;s++){var l=n[s],u=l-r;void 0===r?(a.push(l),r=l):o<u&&(i=Math.min(i,u),a.push(l),r=l)}return{vals:a,minDiff:i}},c.roundUp=function(e,t,n){for(var r,i=0,o=t.length-1,a=0,s=n?0:1,l=n?1:0,u=n?Math.ceil:Math.floor;i<o&&a++<100;)t[r=u((i+o)/2)]<=e?i=r+s:o=r-l;return t[i]},c.sort=function(e,t){for(var n=0,r=0,i=1;i<e.length;i++){var o=t(e[i],e[i-1]);if(o<0?n=1:0<o&&(r=1),n&&r)return e.sort(t)}return r?e:e.reverse()},c.findIndexOfMin=function(e,t){t=t||a;for(var n,r=1/0,i=0;i<e.length;i++){var o=t(e[i]);o<r&&(r=o,n=i)}return n}},{"../constants/numerical":758,"./identity":777,"./loggers":783,"fast-isnumeric":574}],799:[function(e,t,n){"use strict";t.exports=function(t,e){(t.attr("class")||"").split(" ").forEach(function(e){0===e.indexOf("cursor-")&&t.classed(e,!1)}),e&&t.classed("cursor-"+e,!0)}},{}],800:[function(e,t,n){"use strict";function i(){}var o=e("../components/color");t.exports=function(e){for(var t in e)"function"==typeof e[t]&&(e[t]=i);e.destroy=function(){e.container.parentNode.removeChild(e.container)};var n=document.createElement("div");n.className="no-webgl",n.style.cursor="pointer",n.style.fontSize="24px",n.style.color=o.defaults[0],n.style.position="absolute",n.style.left=n.style.top="0px",n.style.width=n.style.height="100%",n.style["background-color"]=o.lightLine,n.style["z-index"]=30;var r=document.createElement("p");return r.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",r.style.position="relative",r.style.top="50%",r.style.left="50%",r.style.height="30%",r.style.width="50%",r.style.margin="-15% 0 0 -25%",n.appendChild(r),e.container.appendChild(n),e.container.style.background="#FFFFFF",!(e.container.onclick=function(){window.open("https://get.webgl.org")})}},{"../components/color":647}],801:[function(e,t,n){"use strict";t.exports=function(e){return Object.keys(e).sort()}},{}],802:[function(e,t,a){"use strict";var s=e("fast-isnumeric"),l=e("./array").isArrayOrTypedArray;a.aggNums=function(e,t,n,r){var i,o;if((!r||r>n.length)&&(r=n.length),s(t)||(t=!1),l(n[0])){for(o=new Array(r),i=0;i<r;i++)o[i]=a.aggNums(e,t,n[i]);n=o}for(i=0;i<r;i++)s(t)?s(n[i])&&(t=e(+t,+n[i])):t=n[i];return t},a.len=function(e){return a.aggNums(function(e){return e+1},0,e)},a.mean=function(e,t){return t=t||a.len(e),a.aggNums(function(e,t){return e+t},0,e)/t},a.midRange=function(e){if(void 0!==e&&0!==e.length)return(a.aggNums(Math.max,null,e)+a.aggNums(Math.min,null,e))/2},a.variance=function(e,t,n){return t=t||a.len(e),s(n)||(n=a.mean(e,t)),a.aggNums(function(e,t){return e+Math.pow(t-n,2)},0,e)/t},a.stdev=function(e,t,n){return Math.sqrt(a.variance(e,t,n))},a.median=function(e){e=e.slice().sort();return a.interp(e,.5)},a.interp=function(e,t){if(!s(t))throw"n should be a finite number";if((t=t*e.length-.5)<0)return e[0];if(t>e.length-1)return e[e.length-1];var n=t%1;return n*e[Math.ceil(t)]+(1-n)*e[Math.floor(t)]}},{"./array":764,"fast-isnumeric":574}],803:[function(e,t,n){"use strict";var r=e("color-normalize");t.exports=function(e){return e?r(e):[0,0,0,1]}},{"color-normalize":625}],804:[function(e,t,n){"use strict";var g=e("@plotly/d3"),v=e("../lib"),m=v.strTranslate,b=e("../constants/xmlns_namespaces"),x=e("../constants/alignment").LINE_SPACING,r=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;n.convertToTspans=function(u,e,c){var f=u.text(),d=!u.attr("data-notex")&&"undefined"!=typeof MathJax&&f.match(r),h=g.select(u.node().parentNode);if(!h.empty()){var p=u.attr("class")?u.attr("class").split(" ")[0]:"text";return p+="-math",h.selectAll("svg."+p).remove(),h.selectAll("g."+p+"-group").remove(),u.style("display",null).attr({"data-unformatted":f,"data-math":"N"}),d?(e&&e._promises||[]).push(new Promise(function(s){u.style("display","none");var n,t,r,i,e,o,a,l=parseInt(u.node().style.fontSize,10);n=d[2],t={fontSize:l},r=function(e,t,n){h.selectAll("svg."+p).remove(),h.selectAll("g."+p+"-group").remove();var r=e&&e.select("svg");if(!r||!r.node())return y(),void s();var i=h.append("g").classed(p+"-group",!0).attr({"pointer-events":"none","data-unformatted":f,"data-math":"Y"});i.node().appendChild(r.node()),t&&t.node()&&r.node().insertBefore(t.node().cloneNode(!0),r.node().firstChild);var o=n.width,a=n.height;r.attr({class:p,height:a,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});e=u.node().style.fill||"black",t=r.select("g");t.attr({fill:e,stroke:e});n=t.node().getBoundingClientRect(),e=n.width,t=n.height;(o<e||a<t)&&(r.style("overflow","hidden"),e=(n=r.node().getBoundingClientRect()).width,t=n.height);o=+u.attr("x"),a=+u.attr("y"),n=-(l||u.node().getBoundingClientRect().height)/4;"y"===p[0]?i.attr({transform:"rotate("+[-90,o,a]+")"+m(-e/2,n-t/2)}):a="l"===p[0]?n-t/2:"a"===p[0]&&0!==p.indexOf("atitle")?(o=0,n):(o-=e*("middle"===(e=u.attr("text-anchor"))?.5:"end"===e?1:0),a+n-t/2),r.attr({x:o,y:a}),c&&c.call(u,i),s(i)},MathJax.Hub.Queue(function(){return e=v.extendDeepAll({},MathJax.Hub.config),o=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if("SVG"!==(i=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},function(){var e="math-output-"+v.randstr({},64);return a=g.select("body").append("div").attr({id:e}).style({visibility:"hidden",position:"absolute"}).style({"font-size":t.fontSize+"px"}).text(n.replace(_,"\\lt ").replace(w,"\\gt ")),MathJax.Hub.Typeset(a.node())},function(){var e,t=g.select("body").select("#MathJax_SVG_glyphs");if(a.select(".MathJax_SVG").empty()||!a.select("svg").node()?(v.log("There was an error in the tex syntax.",n),r()):(e=a.select("svg").node().getBoundingClientRect(),r(a.select(".MathJax_SVG"),t,e)),a.remove(),"SVG"!==i)return MathJax.Hub.setRenderer(i)},function(){return void 0!==o&&(MathJax.Hub.processSectionDelay=o),MathJax.Hub.Config(e)})})):y(),u}function y(){h.empty()||(p=u.attr("class")+"-math",h.select("svg."+p).remove()),u.text("").style("white-space","pre"),function(r,n){n=n.replace(A," ");var s,e=!1,l=[],i=-1;function t(){i++;var e=document.createElementNS(b.svg,"tspan");g.select(e).attr({class:"line",dy:i*x+"em"}),r.appendChild(e);var t=l;if(l=[{node:s=e}],1<t.length)for(var n=1;n<t.length;n++)o(t[n])}function o(e){var t,n,r=e.type,i={};"a"===r?(o="a",t=e.target,n=e.href,a=e.popup,n&&(i={"xlink:xlink:show":"_blank"===t||"_"!==t.charAt(0)?"new":"replace",target:t,"xlink:xlink:href":n},a&&(i.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+a+'");return false;'))):o="tspan",e.style&&(i.style=e.style);var o,a=document.createElementNS(b.svg,o);"sup"===r||"sub"===r?(u(s,O),s.appendChild(a),u(o=document.createElementNS(b.svg,"tspan"),O),g.select(o).attr("dy",k[r]),i.dy=j[r],s.appendChild(a),s.appendChild(o)):s.appendChild(a),g.select(a).attr(i),s=e.node=a,l.push(e)}function u(e,t){e.appendChild(document.createTextNode(t))}S.test(n)?t():l=[{node:s=r}];for(var a=n.split(T),c=0;c<a.length;c++){var f,d=a[c],h=d.match(P),p=h&&h[2].toLowerCase(),y=M[p];"br"===p?t():void 0===y?u(s,D(d)):h[1]?function(e){var t;1!==l.length?(e!==(t=l.pop()).type&&v.log("Start tag <"+t.type+"> doesnt match end tag <"+e+">. Pretending it did match.",n),s=l[l.length-1].node):v.log("Ignoring unexpected end tag </"+e+">.",n)}(p):(f=h[4],d={type:p},(h=I(f,E))?(h=h.replace(z,"$1 fill:"),y&&(h+=";"+y)):y&&(h=y),h&&(d.style=h),"a"===p&&(e=!0,!(p=I(f,C))||(p=N(p))&&(d.href=p,d.target=I(f,L)||"_blank",d.popup=I(f,R))),o(d))}return e}(u.node(),f)&&u.style("pointer-events","all"),n.positionText(u),c&&c.call(u)}};var _=/(<|&lt;|&#60;)/g,w=/(>|&gt;|&#62;)/g;var M={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},j={sub:"0.3em",sup:"-0.6em"},k={sub:"-0.21em",sup:"0.42em"},O="​",i=["http:","https:","mailto:","",void 0,":"],A=n.NEWLINES=/(\r\n?|\n)/g,T=/(<[^<>]*>)/,P=/<(\/?)([^ >]*)(\s+(.*))?>/i,S=/<br(\s+.*)?>/i;n.BR_TAG_ALL=/<br(\s+.*)?>/gi;var E=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,C=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,L=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,R=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function I(e,t){if(!e)return null;t=e.match(t),t=t&&(t[3]||t[4]);return t&&D(t)}var z=/(^|;)\s*color:/;n.plainText=function(e,t){for(var n=void 0!==(t=t||{}).len&&-1!==t.len?t.len:1/0,r=void 0!==t.allowedTags?t.allowedTags:["br"],i="...".length,o=e.split(T),a=[],s="",l=0,u=0;u<o.length;u++){var c=o[u],f=c.match(P),d=f&&f[2].toLowerCase();if(d)-1!==r.indexOf(d)&&(a.push(c),s=d);else{f=c.length;if(l+f<n)a.push(c),l+=f;else if(l<n){d=n-l;s&&("br"!==s||d<=i||f<=i)&&a.pop(),i<n?a.push(c.substr(0,d-i)+"..."):a.push(c.substr(0,d));break}s=""}}return a.join("")};var o={mu:"μ",amp:"&",lt:"<",gt:">",nbsp:" ",times:"×",plusmn:"±",deg:"°"},a=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function D(e){return e.replace(a,function(e,t){t="#"===t.charAt(0)?function(e){if(!(1114111<e)){var t=String.fromCodePoint;if(t)return t(e);t=String.fromCharCode;return e<=65535?t(e):t(55232+(e>>10),e%1024+56320)}}("x"===t.charAt(1)?parseInt(t.substr(2),16):parseInt(t.substr(1),10)):o[t];return t||e})}function N(e){var t=encodeURI(decodeURI(e)),n=document.createElement("a"),r=document.createElement("a");n.href=e,r.href=t;n=n.protocol,r=r.protocol;return-1!==i.indexOf(n)&&-1!==i.indexOf(r)?t:""}function c(e,t,r){var i,n=r.horizontalAlign,o=r.verticalAlign||"top",a=e.node().getBoundingClientRect(),s=t.node().getBoundingClientRect(),l="bottom"===o?function(){return a.bottom-i.height}:"middle"===o?function(){return a.top+(a.height-i.height)/2}:function(){return a.top},u="right"===n?function(){return a.right-i.width}:"center"===n?function(){return a.left+(a.width-i.width)/2}:function(){return a.left};return function(){i=this.node().getBoundingClientRect();var e=u()-s.left,t=l()-s.top,n=r.gd||{};return r.gd&&(n._fullLayout._calcInverseTransform(n),e=(n=v.apply3DTransform(n._fullLayout._invTransform)(e,t))[0],t=n[1]),this.style({top:t+"px",left:e+"px","z-index":1e3}),this}}n.convertEntities=D,n.sanitizeHTML=function(e){e=e.replace(A," ");for(var t=document.createElement("p"),n=t,r=[],i=e.split(T),o=0;o<i.length;o++){var a,s,l=i[o],u=l.match(P),c=u&&u[2].toLowerCase();c in M?u[1]?r.length&&(n=r.pop()):(u=(a=I(s=u[4],E))?{style:a}:{},"a"===c&&(!(a=I(s,C))||(a=N(a))&&(u.href=a,(s=I(s,L))&&(u.target=s))),c=document.createElement(c),n.appendChild(c),g.select(c).attr(u),r.push(n=c)):n.appendChild(document.createTextNode(D(l)))}return t.innerHTML},n.lineCount=function(e){return e.selectAll("tspan.line").size()||1},n.positionText=function(e,i,o){return e.each(function(){var n=g.select(this);function e(e,t){return void 0===t?null===(t=n.attr(e))&&(n.attr(e,0),t=0):n.attr(e,t),t}var t=e("x",i),r=e("y",o);"text"===this.nodeName&&n.selectAll("tspan.line").attr({x:t,y:r})})};n.makeTextShadow=function(e){var t="1px ",n="1px ",r="1px ";return t+n+r+e+", -"+t+"-"+n+r+e+", "+t+"-"+n+r+e+", -"+t+n+r+e},n.makeEditable=function(o,a){var s=a.gd,e=a.delegate,l=g.dispatch("edit","input","cancel"),t=e||o;if(o.style({"pointer-events":e?"none":"all"}),1!==o.size())throw new Error("boo");function n(){!function(){var e=g.select(s).select(".svg-container"),t=e.append("div"),n=o.node().style,r=parseFloat(n.fontSize||12),i=a.text;void 0===i&&(i=o.attr("data-unformatted"));t.classed("plugin-editable editable",!0).style({position:"absolute","font-family":n.fontFamily||"Arial","font-size":r,color:a.fill||n.fill||"black",opacity:1,"background-color":a.background||"transparent",outline:"#ffffff33 1px solid",margin:[-r/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(i).call(c(o,e,a)).on("blur",function(){s._editing=!1,o.text(this.textContent).style({opacity:1});var e=g.select(this).attr("class"),e=e?"."+e.split(" ")[0]+"-math-group":"[class*=-math-group]";e&&g.select(o.node().parentNode).select(e).style({opacity:0});e=this.textContent;g.select(this).transition().duration(0).remove(),g.select(document).on("mouseup",null),l.edit.call(o,e)}).on("focus",function(){var e=this;s._editing=!0,g.select(document).on("mouseup",function(){return g.event.target!==e&&void(document.activeElement===t.node()&&t.node().blur())})}).on("keyup",function(){27===g.event.which?(s._editing=!1,o.style({opacity:1}),g.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),l.cancel.call(o,this.textContent)):(l.input.call(o,this.textContent),g.select(this).call(c(o,e,a)))}).on("keydown",function(){13===g.event.which&&this.blur()}).call(u)}(),o.style({opacity:0});var e=t.attr("class"),e=e?"."+e.split(" ")[0]+"-math-group":"[class*=-math-group]";e&&g.select(o.node().parentNode).select(e).style({opacity:0})}function u(e){var t=e.node(),n=document.createRange();n.selectNodeContents(t);e=window.getSelection();e.removeAllRanges(),e.addRange(n),t.focus()}return a.immediate?n():t.on("click",n),g.rebind(o,l,"on")}},{"../constants/alignment":752,"../constants/xmlns_namespaces":759,"../lib":779,"@plotly/d3":3}],805:[function(e,t,n){"use strict";var s={};function l(e){e&&null!==e.timer&&(clearTimeout(e.timer),e.timer=null)}n.throttle=function(e,t,n){var r=s[e],i=Date.now();if(!r){for(var o in s)s[o].ts<i-6e4&&delete s[o];r=s[e]={ts:0,timer:null}}function a(){n(),r.ts=Date.now(),r.onDone&&(r.onDone(),r.onDone=null)}l(r),i>r.ts+t?a():r.timer=setTimeout(function(){a(),r.timer=null},t)},n.done=function(e){var n=s[e];return n&&n.timer?new Promise(function(e){var t=n.onDone;n.onDone=function(){t&&t(),e(),n.onDone=null}}):Promise.resolve()},n.clear=function(e){if(e)l(s[e]),delete s[e];else for(var t in s)n.clear(t)}},{}],806:[function(e,t,n){"use strict";var r=e("fast-isnumeric");t.exports=function(e,t){if(0<e)return Math.log(e)/Math.LN10;e=Math.log(Math.min(t[0],t[1]))/Math.LN10;return e=!r(e)?Math.log(Math.max(t[0],t[1]))/Math.LN10-6:e}},{"fast-isnumeric":574}],807:[function(e,t,n){"use strict";t.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],808:[function(e,t,n){"use strict";t.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],809:[function(e,t,n){"use strict";var s=e("../registry");t.exports=function(e){for(var t,n,r=s.layoutArrayContainers,i=s.layoutArrayRegexes,o=e.split("[")[0],a=0;a<i.length;a++)if((n=e.match(i[a]))&&0===n.index){t=n[0];break}if(!(t=t||r[r.indexOf(o)]))return!1;o=e.substr(t.length);return o?!!(n=o.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:t,index:Number(n[1]),property:n[3]||""}:{array:t,index:"",property:""}}},{"../registry":879}],810:[function(e,t,n){"use strict";var r=e("../lib"),s=r.extendFlat,a=r.isPlainObject,e={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},r={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},i=e.flags.slice().concat(["fullReplot"]),o=r.flags.slice().concat("layoutReplot");function l(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!1;return t}function u(e,t,n){var r,i=s({},e);for(r in i){var o=i[r];a(o)&&(i[r]=function e(t,n,r,i){{if(t.valType){var o=s({},t);if(o.editType=n,Array.isArray(t.items)){o.items=new Array(t.items.length);for(var a=0;a<t.items.length;a++)o.items[a]=e(t.items[a],n,"from-root")}return o}return u(t,n,"_"===i.charAt(0)?"nested":"from-root")}}(o,t,0,r))}return"from-root"===n&&(i.editType=t),i}t.exports={traces:e,layout:r,traceFlags:function(){return l(i)},layoutFlags:function(){return l(o)},update:function(e,t){t=t.editType;if(t&&"none"!==t)for(var n=t.split("+"),r=0;r<n.length;r++)e[n[r]]=!0},overrideAll:u}},{"../lib":779}],811:[function(e,t,w){"use strict";var l=e("fast-isnumeric"),M=e("gl-mat4/fromQuat"),y=e("../registry"),j=e("../lib"),k=e("../plots/plots"),n=e("../plots/cartesian/axis_ids"),O=e("../components/color"),A=n.cleanId,u=n.getFromTrace,g=y.traceIs;function T(e,t){var n=e[t],r=t.charAt(0);n&&"paper"!==n&&(e[t]=A(n,r,!0))}function P(i){function e(e,t){var n=i[e],r=i.title&&i.title[t];n&&!r&&(i.title||(i.title={}),i.title[t]=i[e],delete i[e])}i&&("string"!=typeof i.title&&"number"!=typeof i.title||(i.title={text:i.title}),e("titlefont","font"),e("titleposition","position"),e("titleside","side"),e("titleoffset","offset"))}function v(e){if(!j.isPlainObject(e))return!1;var t=e.name;return delete e.name,delete e.showlegend,("string"==typeof t||"number"==typeof t)&&String(t)}function m(e){var t="middle",n="center";return"string"==typeof e&&(-1!==e.indexOf("top")?t="top":-1!==e.indexOf("bottom")&&(t="bottom"),-1!==e.indexOf("left")?n="left":-1!==e.indexOf("right")&&(n="right")),t+" "+n}function S(e,t){return t in e&&"object"==typeof e[t]&&0===Object.keys(e[t]).length}w.clearPromiseQueue=function(e){Array.isArray(e._promises)&&0<e._promises.length&&j.log("Clearing previous rejected promises from queue."),e._promises=[]},w.cleanLayout=function(e){(e=e||{}).xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);for(var t=(k.subplotsRegistry.cartesian||{}).attrRegex,n=(k.subplotsRegistry.polar||{}).attrRegex,r=(k.subplotsRegistry.ternary||{}).attrRegex,i=(k.subplotsRegistry.gl3d||{}).attrRegex,o=Object.keys(e),a=0;a<o.length;a++){var s=o[a];if(t&&t.test(s)){var l=e[s];l.anchor&&"free"!==l.anchor&&(l.anchor=A(l.anchor)),l.overlaying&&(l.overlaying=A(l.overlaying)),l.type||(l.isdate?l.type="date":l.islog?l.type="log":!1===l.isdate&&!1===l.islog&&(l.type="linear")),"withzero"!==l.autorange&&"tozero"!==l.autorange||(l.autorange=!0,l.rangemode="tozero"),delete l.islog,delete l.isdate,delete l.categories,S(l,"domain")&&delete l.domain,void 0!==l.autotick&&(void 0===l.tickmode&&(l.tickmode=l.autotick?"auto":"linear"),delete l.autotick),P(l)}else if(n&&n.test(s))P(e[s].radialaxis);else if(r&&r.test(s)){var u=e[s];P(u.aaxis),P(u.baxis),P(u.caxis)}else if(i&&i.test(s)){l=e[s],u=l.cameraposition;if(Array.isArray(u)&&4===u[0].length){for(var s=u[0],c=u[1],f=u[2],d=M([],s),h=[],p=0;p<3;++p)h[p]=c[p]+f*d[2+4*p];l.camera={eye:{x:h[0],y:h[1],z:h[2]},center:{x:c[0],y:c[1],z:c[2]},up:{x:0,y:0,z:1}},delete l.cameraposition}P(l.xaxis),P(l.yaxis),P(l.zaxis)}}var y=Array.isArray(e.annotations)?e.annotations.length:0;for(a=0;a<y;a++){var g=e.annotations[a];j.isPlainObject(g)&&(g.ref&&("paper"===g.ref?(g.xref="paper",g.yref="paper"):"data"===g.ref&&(g.xref="x",g.yref="y"),delete g.ref),T(g,"xref"),T(g,"yref"))}var v=Array.isArray(e.shapes)?e.shapes.length:0;for(a=0;a<v;a++){var m=e.shapes[a];j.isPlainObject(m)&&(T(m,"xref"),T(m,"yref"))}var b=Array.isArray(e.images)?e.images.length:0;for(a=0;a<b;a++){var x=e.images[a];j.isPlainObject(x)&&(T(x,"xref"),T(x,"yref"))}var _=e.legend;return _&&(3<_.x?(_.x=1.02,_.xanchor="left"):_.x<-2&&(_.x=-.02,_.xanchor="right"),3<_.y?(_.y=1.02,_.yanchor="bottom"):_.y<-2&&(_.y=-.02,_.yanchor="top")),P(e),"rotate"===e.dragmode&&(e.dragmode="orbit"),O.clean(e),e.template&&e.template.layout&&w.cleanLayout(e.template.layout),e},w.cleanData=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("histogramy"===n.type&&"xbins"in n&&!("ybins"in n)&&(n.ybins=n.xbins,delete n.xbins),n.error_y&&"opacity"in n.error_y&&(a=O.defaults,r=n.error_y.color||(g(n,"bar")?O.defaultLine:a[t%a.length]),n.error_y.color=O.addOpacity(O.rgb(r),O.opacity(r)*n.error_y.opacity),delete n.error_y.opacity),"bardir"in n&&("h"!==n.bardir||!g(n,"bar")&&"histogram"!==n.type.substr(0,9)||(n.orientation="h",w.swapXYData(n)),delete n.bardir),"histogramy"===n.type&&w.swapXYData(n),"histogramx"!==n.type&&"histogramy"!==n.type||(n.type="histogram"),"scl"in n&&!("colorscale"in n)&&(n.colorscale=n.scl,delete n.scl),"reversescl"in n&&!("reversescale"in n)&&(n.reversescale=n.reversescl,delete n.reversescl),n.xaxis&&(n.xaxis=A(n.xaxis,"x")),n.yaxis&&(n.yaxis=A(n.yaxis,"y")),g(n,"gl3d")&&n.scene&&(n.scene=k.subplotsRegistry.gl3d.cleanId(n.scene)),!g(n,"pie-like")&&!g(n,"bar-like"))if(Array.isArray(n.textposition))for(l=0;l<n.textposition.length;l++)n.textposition[l]=m(n.textposition[l]);else n.textposition&&(n.textposition=m(n.textposition));var r,i,o,a=y.getModule(n);if(a&&a.colorbar&&((o=(i=a.colorbar.container)?n[i]:n)&&o.colorscale&&("YIGnBu"===o.colorscale&&(o.colorscale="YlGnBu"),"YIOrRd"===o.colorscale&&(o.colorscale="YlOrRd"))),"surface"===n.type&&j.isPlainObject(n.contours))for(var s=["x","y","z"],l=0;l<s.length;l++){var u=n.contours[s[l]];j.isPlainObject(u)&&(u.highlightColor&&(u.highlightcolor=u.highlightColor,delete u.highlightColor),u.highlightWidth&&(u.highlightwidth=u.highlightWidth,delete u.highlightWidth))}if("candlestick"!==n.type&&"ohlc"!==n.type||(r=!1!==(n.increasing||{}).showlegend,a=!1!==(n.decreasing||{}).showlegend,i=v(n.increasing),o=v(n.decreasing),!1!==i&&!1!==o?(a=function(e,t,n,r){if(n&&!r)return e;if(r&&!n)return t;if(!e.trim())return t;if(!t.trim())return e;var i,o=Math.min(e.length,t.length);for(i=0;i<o&&e.charAt(i)===t.charAt(i);i++);return e.substr(0,i).trim()}(i,o,r,a))&&(n.name=a):!i&&!o||n.name||(n.name=i||o)),Array.isArray(n.transforms)){var c=n.transforms;for(l=0;l<c.length;l++){var f=c[l];if(j.isPlainObject(f))switch(f.type){case"filter":f.filtersrc&&(f.target=f.filtersrc,delete f.filtersrc),f.calendar&&(f.valuecalendar||(f.valuecalendar=f.calendar),delete f.calendar);break;case"groupby":if(f.styles=f.styles||f.style,f.styles&&!Array.isArray(f.styles)){var d=f.styles,h=Object.keys(d);f.styles=[];for(var p=0;p<h.length;p++)f.styles.push({target:h[p],value:d[h[p]]})}}}}S(n,"line")&&delete n.line,"marker"in n&&(S(n.marker,"line")&&delete n.marker.line,S(n,"marker")&&delete n.marker),O.clean(n),n.autobinx&&(delete n.autobinx,delete n.xbins),n.autobiny&&(delete n.autobiny,delete n.ybins),P(n),n.colorbar&&P(n.colorbar),n.marker&&n.marker.colorbar&&P(n.marker.colorbar),n.line&&n.line.colorbar&&P(n.line.colorbar),n.aaxis&&P(n.aaxis),n.baxis&&P(n.baxis)}},w.swapXYData=function(e){var t;if(j.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y&&(t="copy_ystyle"in(t=e.error_y)?t.copy_ystyle:!(t.color||t.thickness||t.width),j.swapAttrs(e,["error_?.copy_ystyle"]),t&&j.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])),"string"==typeof e.hoverinfo){for(var n=e.hoverinfo.split("+"),r=0;r<n.length;r++)"x"===n[r]?n[r]="y":"y"===n[r]&&(n[r]="x");e.hoverinfo=n.join("+")}},w.coerceTraceIndices=function(e,t){if(l(t))return[t];if(!Array.isArray(t)||!t.length)return e.data.map(function(e,t){return t});if(Array.isArray(t)){for(var n=[],r=0;r<t.length;r++)j.isIndex(t[r],e.data.length)?n.push(t[r]):j.warn("trace index (",t[r],") is not a number or is out of bounds");return n}return t},w.manageArrayContainers=function(e,t,n){var r=e.obj,i=e.parts,o=i.length,a=i[o-1],s=l(a);s&&null===t?(o=i.slice(0,o-1).join("."),j.nestedProperty(r,o).get().splice(a,1)):(s&&void 0===e.get()&&void 0===e.get()&&(n[e.astr]=null),e.set(t))};var r=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function i(e){var t=e.search(r);if(0<t)return e.substr(0,t)}w.hasParent=function(e,t){for(var n=i(t);n;){if(n in e)return!0;n=i(n)}return!1};var c=["x","y","z"];w.clearAxisTypes=function(e,t,n){for(var r=0;r<t.length;r++)for(var i=e._fullData[r],o=0;o<3;o++){var a=u(e,i,c[o]);if(a&&"log"!==a.type){var s=a._name,a=a._id.substr(1);if("scene"===a.substr(0,5)){if(void 0!==n[a])continue;s=a+"."+s}a=s+".type";void 0===n[s]&&void 0===n[a]&&j.nestedProperty(e.layout,a).set(null)}}}},{"../components/color":647,"../lib":779,"../plots/cartesian/axis_ids":832,"../plots/plots":876,"../registry":879,"fast-isnumeric":574,"gl-mat4/fromQuat":581}],812:[function(e,t,n){"use strict";var r=e("./plot_api");n._doPlot=r._doPlot,n.newPlot=r.newPlot,n.restyle=r.restyle,n.relayout=r.relayout,n.redraw=r.redraw,n.update=r.update,n._guiRestyle=r._guiRestyle,n._guiRelayout=r._guiRelayout,n._guiUpdate=r._guiUpdate,n._storeDirectGUIEdit=r._storeDirectGUIEdit,n.react=r.react,n.extendTraces=r.extendTraces,n.prependTraces=r.prependTraces,n.addTraces=r.addTraces,n.deleteTraces=r.deleteTraces,n.moveTraces=r.moveTraces,n.purge=r.purge,n.addFrames=r.addFrames,n.deleteFrames=r.deleteFrames,n.animate=r.animate,n.setPlotConfig=r.setPlotConfig,n.toImage=e("./to_image"),n.validate=e("./validate"),n.downloadImage=e("../snapshot/download");e=e("./template_api");n.makeTemplate=e.makeTemplate,n.validateTemplate=e.validateTemplate},{"../snapshot/download":881,"./plot_api":814,"./template_api":819,"./to_image":820,"./validate":821}],813:[function(e,t,n){"use strict";var r=e("../lib/is_plain_object"),O=e("../lib/noop"),A=e("../lib/loggers"),T=e("../lib/search").sorterAsc,P=e("../registry");n.containerArrayMatch=e("./container_array_match");var S=n.isAddVal=function(e){return"add"===e||r(e)},E=n.isRemoveVal=function(e){return null===e||"remove"===e};n.applyContainerArrayChanges=function(e,t,n,r,i){var o=t.astr,a=P.getComponentMethod(o,"supplyLayoutDefaults"),s=P.getComponentMethod(o,"draw"),l=P.getComponentMethod(o,"drawOne"),u=r.replot||r.recalc||a===O||s===O,c=e.layout,r=e._fullLayout;if(n[""]){1<Object.keys(n).length&&A.warn("Full array edits are incompatible with other edits",o);var f=n[""][""];if(E(f))t.set(null);else{if(!Array.isArray(f))return A.warn("Unrecognized full array edit value",o,f),!0;t.set(f)}return u?!1:(a(c,r),s(e),!0)}for(var d,h,p,y,g,v,m,b=Object.keys(n).map(Number).sort(T),f=t.get(),x=f||[],_=i(r,o).get(),w=[],M=-1,j=x.length,k=0;k<b.length;k++)if(p=n[h=b[k]],y=Object.keys(p),g=p[""],v=S(g),h<0||h>x.length-(v?0:1))A.warn("index out of range",o,h);else if(void 0!==g)1<y.length&&A.warn("Insertion & removal are incompatible with edits to the same index.",o,h),E(g)?w.push(h):v?(x.splice(h,0,g="add"===g?{}:g),_&&_.splice(h,0,{})):A.warn("Unrecognized full object edit value",o,h,g),-1===M&&(M=h);else for(d=0;d<y.length;d++)i(x[h],y[d],o+"["+h+"].").set(p[y[d]]);for(k=w.length-1;0<=k;k--)x.splice(w[k],1),_&&_.splice(w[k],1);if(x.length?f||t.set(x):t.set(null),u)return!1;if(a(c,r),l!==O){if(-1===M)m=b;else{for(j=Math.max(x.length,j),m=[],k=0;k<b.length&&!(M<=(h=b[k]));k++)m.push(h);for(k=M;k<j;k++)m.push(k)}for(k=0;k<m.length;k++)l(e,m[k])}else s(e);return!0}},{"../lib/is_plain_object":780,"../lib/loggers":783,"../lib/noop":788,"../lib/search":798,"../registry":879,"./container_array_match":809}],814:[function(e,t,j){"use strict";var p=e("@plotly/d3"),d=e("fast-isnumeric"),c=e("has-hover"),F=e("../lib"),B=F.nestedProperty,y=e("../lib/events"),_=e("../lib/queue"),U=e("../registry"),q=e("./plot_schema"),N=e("../plots/plots"),H=e("../plots/cartesian/axes"),g=e("../components/drawing"),n=e("../components/color"),v=e("../plots/cartesian/graph_interact").initInteractions,m=e("../constants/xmlns_namespaces"),r=e("../plots/cartesian/select").clearSelect,f=e("./plot_config").dfltConfig,V=e("./manage_arrays"),G=e("./helpers"),k=e("./subroutines"),W=e("./edit_types"),Y=e("../plots/cartesian/constants").AX_NAME_PATTERN,w=0;function O(e){var t=e._fullLayout;t._redrawFromAutoMarginCount?t._redrawFromAutoMarginCount--:e.emit("plotly_afterplot")}function h(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){F.error(e)}}function b(e,t){h(e,n.combine(t,"white"))}function A(e,t){var n;e._context||(e._context=F.extendDeep({},f),n=p.select("base"),e._context._baseUrl=n.size()&&n.attr("href")?window.location.href.split("#")[0]:"");var r,i,o=e._context;if(t){for(r=Object.keys(t),u=0;u<r.length;u++)"editable"!==(i=r[u])&&"edits"!==i&&i in o&&("setBackground"===i&&"opaque"===t[i]?o[i]=b:o[i]=t[i]);t.plot3dPixelRatio&&!o.plotGlPixelRatio&&(o.plotGlPixelRatio=o.plot3dPixelRatio);var a=t.editable;if(void 0!==a)for(o.editable=a,r=Object.keys(o.edits),u=0;u<r.length;u++)o.edits[r[u]]=a;if(t.edits)for(r=Object.keys(t.edits),u=0;u<r.length;u++)(i=r[u])in o.edits&&(o.edits[i]=t.edits[i]);o._exportedPlot=t._exportedPlot}o.staticPlot&&(o.editable=!1,o.edits={},o.autosizable=!1,o.scrollZoom=!1,o.doubleClick=!1,o.showTips=!1,o.showLink=!1,o.displayModeBar=!1),"hover"!==o.displayModeBar||c||(o.displayModeBar=!0),"transparent"!==o.setBackground&&"function"==typeof o.setBackground||(o.setBackground=h),o._hasZeroHeight=o._hasZeroHeight||0===e.clientHeight,o._hasZeroWidth=o._hasZeroWidth||0===e.clientWidth;var e=o.scrollZoom,s=o._scrollZoom={};if(!0===e)s.cartesian=1,s.gl3d=1,s.geo=1,s.mapbox=1;else if("string"==typeof e)for(var l=e.split("+"),u=0;u<l.length;u++)s[l[u]]=1;else!1!==e&&(s.gl3d=1,s.geo=1,s.mapbox=1)}function x(e,t){for(var n,r=t+1,i=[],o=0;o<e.length;o++)(n=e[o])<0?i.push(r+n):i.push(n);return i}function M(e,t,n){for(var r,i=0;i<t.length;i++){if((r=t[i])!==parseInt(r,10))throw new Error("all values in "+n+" must be integers");if(r>=e.data.length||r<-e.data.length)throw new Error(n+" must be valid indices for gd.data.");if(-1<t.indexOf(r,i+1)||0<=r&&-1<t.indexOf(-e.data.length+r)||r<0&&-1<t.indexOf(e.data.length+r))throw new Error("each index in "+n+" must be unique.")}}function T(e,t,n){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("currentIndices is a required argument.");if(M(e,t=!Array.isArray(t)?[t]:t,"currentIndices"),void 0!==(n=void 0!==n&&!Array.isArray(n)?[n]:n)&&M(e,n,"newIndices"),void 0!==n&&t.length!==n.length)throw new Error("current and new indices must be of equal length.")}function o(e,t,n,r,i){!function(e,t,n,r){var i,o=F.isPlainObject(r);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!F.isPlainObject(t))throw new Error("update must be a key:value object");if(void 0===n)throw new Error("indices must be an integer or array of integers");for(i in M(e,n,"indices"),t){if(!Array.isArray(t[i])||t[i].length!==n.length)throw new Error("attribute "+i+" must be an array of length equal to indices array length");if(o&&(!(i in r)||!Array.isArray(r[i])||r[i].length!==t[i].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(e,t,n,r);for(var o=function(e,t,n,r){var i,o,a,s,l,u=F.isPlainObject(r),c=[];for(l in n=x(n=!Array.isArray(n)?[n]:n,e.data.length-1),t)for(var f=0;f<n.length;f++){if(s=e.data[n[f]],i=(o=B(s,l)).get(),a=t[l][f],!F.isArrayOrTypedArray(a))throw new Error("attribute: "+l+" index: "+f+" must be an array");if(!F.isArrayOrTypedArray(i))throw new Error("cannot extend missing or non-array attribute: "+l);if(i.constructor!==a.constructor)throw new Error("cannot extend array with an array of a different type: "+l);s=u?r[l][f]:r,d(s)||(s=-1),c.push({prop:o,target:i,insert:a,maxp:Math.floor(s)})}return c}(e,t,n,r),a={},s={},l=0;l<o.length;l++){var u=o[l].prop,c=o[l].maxp,c=i(o[l].target,o[l].insert,c);u.set(c[0]),Array.isArray(a[u.astr])||(a[u.astr]=[]),a[u.astr].push(c[1]),Array.isArray(s[u.astr])||(s[u.astr]=[]),s[u.astr].push(o[l].target.length)}return{update:a,maxPoints:s}}function s(e,t){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}function a(e,t,n,r){e=F.getGraphDiv(e),G.clearPromiseQueue(e);var i={};if("string"==typeof t)i[t]=n;else{if(!F.isPlainObject(t))return F.warn("Restyle fail.",t,n,r),Promise.reject();i=F.extendFlat({},t),void 0===r&&(r=n)}Object.keys(i).length&&(e.changed=!0);var r=G.coerceTraceIndices(e,r),o=l(e,i,r),i=o.flags;i.calc&&(e.calcdata=void 0),i.clearAxisTypes&&G.clearAxisTypes(e,r,{});r=[];i.fullReplot?r.push(j._doPlot):(r.push(N.previousPromises),N.supplyDefaults(e),i.markerSize&&(N.doCalcdata(e),E(r)),i.style&&r.push(k.doTraceStyle),i.colorbars&&r.push(k.doColorBars),r.push(O)),r.push(N.rehover,N.redrag),_.add(e,a,[e,o.undoit,o.traces],a,[e,o.redoit,o.traces]);r=F.syncOrAsync(r,e);return(r=!r||!r.then?Promise.resolve():r).then(function(){return e.emit("plotly_restyle",o.eventData),e})}function X(e){return void 0===e?null:e}function Z(o,e){return e?function(e,t,n){var r=B(e,t),i=r.set;return r.set=function(e){P((n||"")+t,r.get(),e,o),i(e)},r}:B}function P(e,t,n,r){if(Array.isArray(t)||Array.isArray(n))for(var i=Array.isArray(t)?t:[],o=Array.isArray(n)?n:[],a=Math.max(i.length,o.length),s=0;s<a;s++)P(e+"["+s+"]",i[s],o[s],r);else if(F.isPlainObject(t)||F.isPlainObject(n)){var l,u=F.isPlainObject(t)?t:{},c=F.isPlainObject(n)?n:{};for(l in F.extendFlat({},u,c))P(e+"."+l,u[l],c[l],r)}else void 0===r[e]&&(r[e]=X(t))}function l(i,o,a){var e,s=i._fullLayout,r=i._fullData,l=i.data,u=s._guiEditing,c=Z(s._preGUI,u),t=F.extendDeepAll({},o);$(o);var n,f,d=W.traceFlags(),h={},p={};function y(){return a.map(function(){})}function g(e){e=H.id2name(e);-1===n.indexOf(e)&&n.push(e)}function v(e){return"LAYOUT"+e+".autorange"}function m(e){return"LAYOUT"+e+".range"}function b(e){for(var t=e;t<r.length;t++)if(r[t]._input===l[e])return r[t]}function x(e,t,n){var r;Array.isArray(e)?e.forEach(function(e){x(e,t,n)}):e in o||G.hasParent(o,e)||(r="LAYOUT"===e.substr(0,6)?c(i.layout,e.replace("LAYOUT","")):(r=a[n],Z(s._tracePreGUI[b(r)._fullInput.uid],u)(l[r],e)),e in p||(p[e]=y()),void 0===p[e][n]&&(p[e][n]=X(r.get())),void 0!==t&&r.set(t))}for(f in o){if(G.hasParent(o,f))throw new Error("cannot set "+f+" and a parent attribute simultaneously");var _,w,M=o[f];if("autobinx"!==f&&"autobiny"!==f||(f=f.charAt(f.length-1)+"bins",M=Array.isArray(M)?M.map(function(n){return function(e,t){return!1===e?r[a[t]][n]:null}}(f)):!1===M?a.map(function(t){return function(e){return r[e][t]}}(f)):null),h[f]=M,"LAYOUT"!==f.substr(0,6)){for(p[f]=y(),e=0;e<a.length;e++){var j,k,O=l[a[e]],A=b(a[e]),T=(j=Z(s._tracePreGUI[A._fullInput.uid],u)(O,f)).get();if(void 0!==(k=Array.isArray(M)?M[e%M.length]:M)){var P,S,E=j.parts[j.parts.length-1],C=f.substr(0,f.length-E.length-1),L=C?C+".":"",C=C?B(A,C).get():A,R=q.getTraceValObject(A,j.parts);if(R&&R.impliedEdits&&null!==k)for(var I in R.impliedEdits)x(F.relativeAttr(f,I),R.impliedEdits[I],e);else"thicknessmode"!==E&&"lenmode"!==E||T===k||"fraction"!==k&&"pixels"!==k||!C?"type"!==f||"pie"===k==("pie"===T)&&"funnelarea"===k==("funnelarea"===T)||(P="x",S="y","bar"!==k&&"bar"!==T||"h"!==O.orientation||(P="y",S="x"),F.swapAttrs(O,["?","?src"],"labels",P),F.swapAttrs(O,["d?","?0"],"label",P),F.swapAttrs(O,["?","?src"],"values",S),"pie"===T||"funnelarea"===T?(B(O,"marker.color").set(B(O,"marker.colors").get()),s._pielayer.selectAll("g.trace").remove()):U.traceIs(O,"cartesian")&&B(O,"marker.colors").set(B(O,"marker.color").get())):(P=s._size,S="top"===(S=C.orient)||"bottom"===S,"thicknessmode"===E?(E=S?P.h:P.w,x(L+"thickness",C.thickness*("fraction"===k?1/E:E),e)):(z=S?P.w:P.h,x(L+"len",C.len*("fraction"===k?1/z:z),e)));p[f][e]=X(T);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(f)){if("orientation"===f){j.set(k);var z=O.x&&!O.y?"h":"v";if((j.get()||z)===A.orientation)continue}else"orientationaxes"===f&&(O.orientation={v:"h",h:"v"}[A.orientation]);G.swapXYData(O),d.calc=d.clearAxisTypes=!0}else-1!==N.dataArrayContainers.indexOf(j.parts[0])?(G.manageArrayContainers(j,k,p),d.calc=!0):(!R||R.arrayOk&&!U.traceIs(A,"regl")&&(F.isArrayOrTypedArray(k)||F.isArrayOrTypedArray(T))?d.calc=!0:W.update(d,R),j.set(k))}}if(-1!==["swapxyaxes","orientationaxes"].indexOf(f)&&H.swap(i,a),"orientationaxes"===f&&("x"===(w=(_=B(i.layout,"hovermode")).get())?_.set("y"):"y"===w?_.set("x"):"x unified"===w?_.set("y unified"):"y unified"===w&&_.set("x unified")),-1!==["orientation","type"].indexOf(f)){for(n=[],e=0;e<a.length;e++){var D=l[a[e]];U.traceIs(D,"cartesian")&&(g(D.xaxis||"x"),g(D.yaxis||"y"))}x(n.map(v),!0,0),x(n.map(m),[0,1],0)}}else j=c(i.layout,f.replace("LAYOUT","")),p[f]=[X(j.get())],j.set(Array.isArray(M)?M[0]:M),d.calc=!0}return(d.calc||d.plot)&&(d.fullReplot=!0),{flags:d,undoit:p,redoit:h,traces:a,eventData:F.extendDeepNoArrays([],[t,a])}}function $(n){for(var e,t,r=F.counterRegex("axis",".title",!1,!1),i=/colorbar\.title$/,o=Object.keys(n),a=0;a<o.length;a++)e=o[a],t=n[e],"title"!==e&&!r.test(e)&&!i.test(e)||"string"!=typeof t&&"number"!=typeof t?-1<e.indexOf("titlefont")&&-1===e.indexOf("grouptitlefont")?s(e,e.replace("titlefont","title.font")):-1<e.indexOf("titleposition")?s(e,e.replace("titleposition","title.position")):-1<e.indexOf("titleside")?s(e,e.replace("titleside","title.side")):-1<e.indexOf("titleoffset")&&s(e,e.replace("titleoffset","title.offset")):s(e,e.replace("title","title.text"));function s(e,t){n[t]=n[e],delete n[e]}}function S(e,t,n){e=F.getGraphDiv(e),G.clearPromiseQueue(e);var r={};if("string"==typeof t)r[t]=n;else{if(!F.isPlainObject(t))return F.warn("Relayout fail.",t,n),Promise.reject();r=F.extendFlat({},t)}Object.keys(r).length&&(e.changed=!0);var i=C(e,r),n=i.flags;n.calc&&(e.calcdata=void 0);t=[N.previousPromises];n.layoutReplot?t.push(k.layoutReplot):Object.keys(r).length&&(u(e,n,i)||N.supplyDefaults(e),n.legend&&t.push(k.doLegend),n.layoutstyle&&t.push(k.layoutStyles),n.axrange&&E(t,i.rangesAltered),n.ticks&&t.push(k.doTicksRelayout),n.modebar&&t.push(k.doModeBar),n.camera&&t.push(k.doCamera),n.colorbars&&t.push(k.doColorBars),t.push(O)),t.push(N.rehover,N.redrag),_.add(e,S,[e,i.undoit],S,[e,i.redoit]);t=F.syncOrAsync(t,e);return(t=!t||!t.then?Promise.resolve(e):t).then(function(){return e.emit("plotly_relayout",i.eventData),e})}function u(e,t,n){var r=e._fullLayout;if(t.axrange){for(var i in t)if("axrange"!==i&&t[i])return;for(var o in n.rangesAltered){var a=H.id2name(o),s=e.layout[a],l=r[a];if(l.autorange=s.autorange,s.range&&(l.range=s.range.slice()),l.cleanRange(),l._matchGroup)for(var u in l._matchGroup)u!==o&&((u=r[H.id2name(u)]).autorange=l.autorange,u.range=l.range.slice(),u._input.range=l.range.slice())}return 1}}function E(e,a){e.push(r,k.doAutoRangeAndConstraints,a?function(e){var t,n=[],r=!0;for(t in a){var i=H.getFromId(e,t);if(n.push(t),-1!==(i.ticklabelposition||"").indexOf("inside")&&i._anchorAxis&&n.push(i._anchorAxis._id),i._matchGroup)for(var o in i._matchGroup)a[o]||n.push(o);i.automargin&&(r=!1)}return H.draw(e,n,{skipTitle:r})}:function(e){return H.draw(e,"redraw")},k.drawData,k.finalDraw)}var K=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Q=/^[xyz]axis[0-9]*\.autorange$/,J=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function C(e,r){var t,i=e.layout,n=e._fullLayout,o=n._guiEditing,a=Z(n._preGUI,o),s=Object.keys(r),l=H.list(e),o=F.extendDeepAll({},r),u={};for($(r),s=Object.keys(r),R=0;R<s.length;R++)if(0===s[R].indexOf("allaxes")){for(t=0;t<l.length;t++){var c=l[t]._id.substr(1),c=-1!==c.indexOf("scene")?c+".":"",c=s[R].replace("allaxes",c+l[t]._name);r[c]||(r[c]=r[s[R]])}delete r[s[R]]}var f=W.layoutFlags(),d={},h={};function p(e,t){var n;Array.isArray(e)?e.forEach(function(e){p(e,t)}):e in r||G.hasParent(r,e)||(n=a(i,e),e in h||(h[e]=X(n.get())),void 0!==t&&n.set(t))}var y,g,v={};function m(e){e=H.name2id(e.split(".")[0]);return v[e]=1,e}for(y in r){if(G.hasParent(r,y))throw new Error("cannot set "+y+" and a parent attribute simultaneously");for(var b=a(i,y),x=r[y],_=b.parts.length-1;0<_&&"string"!=typeof b.parts[_];)_--;var w=b.parts[_],M=b.parts[_-1]+"."+w,j=b.parts.slice(0,_).join("."),k=B(e.layout,j).get(),O=B(n,j).get(),A=b.get();if(void 0!==x){d[y]=x,h[y]="reverse"===w?x:X(A);var T,P,S,E=q.getLayoutValObject(n,b.parts);if(E&&E.impliedEdits&&null!==x)for(var C in E.impliedEdits)p(F.relativeAttr(y,C),E.impliedEdits[C]);-1!==["width","height"].indexOf(y)?x?(p("autosize",null),p(P="height"===y?"width":"height",n[P])):n[y]=e._initialAutoSize[y]:"autosize"===y?(p("width",x?null:n.width),p("height",x?null:n.height)):M.match(K)?(m(M),B(n,j+"._inputRange").set(null)):M.match(Q)?(m(M),B(n,j+"._inputRange").set(null),(S=B(n,j).get())._inputDomain&&(S._input.domain=S._inputDomain.slice())):M.match(J)&&B(n,j+"._inputDomain").set(null),"type"===w?(T=k,P="linear"===O.type&&"log"===x,S="log"===O.type&&"linear"===x,P||S?(T&&T.range?O.autorange?P&&(T.range=T.range[1]>T.range[0]?[1,2]:[2,1]):(M=T.range[0],S=T.range[1],P?(M<=0&&S<=0&&p(j+".autorange",!0),M<=0?M=S/1e6:S<=0&&(S=M/1e6),p(j+".range[0]",Math.log(M)/Math.LN10),p(j+".range[1]",Math.log(S)/Math.LN10)):(p(j+".range[0]",Math.pow(10,M)),p(j+".range[1]",Math.pow(10,S)))):p(j+".autorange",!0),Array.isArray(n._subplots.polar)&&n._subplots.polar.length&&n[b.parts[0]]&&"radialaxis"===b.parts[1]&&delete n[b.parts[0]]._subplot.viewInitial["radialaxis.range"],U.getComponentMethod("annotations","convertCoords")(e,O,x,p),U.getComponentMethod("images","convertCoords")(e,O,x,p)):(p(j+".autorange",!0),p(j+".range",null)),B(n,j+"._inputRange").set(null)):w.match(Y)&&(z=B(n,y).get(),(I=(x||{}).type)&&"-"!==I||(I="linear"),U.getComponentMethod("annotations","convertCoords")(e,z,I,p),U.getComponentMethod("images","convertCoords")(e,z,I,p));var L,R,I,z=V.containerArrayMatch(y);z?(L=z.array,R=z.index,I=z.property,z=E||{editType:"calc"},""!==R&&""===I&&(V.isAddVal(x)?h[y]=null:V.isRemoveVal(x)?h[y]=(B(i,L).get()||[])[R]:F.warn("unrecognized full object value",r)),W.update(f,z),u[L]||(u[L]={}),(u[L][R]||(u[L][R]={}))[I]=x,delete r[y]):"reverse"===w?(k.range?k.range.reverse():(p(j+".autorange",!0),k.range=[1,0]),O.autorange?f.calc=!0:f.plot=!0):(n._has("scatter-like")&&n._has("regl")&&"dragmode"===y&&("lasso"===x||"select"===x)&&"lasso"!==A&&"select"!==A||n._has("gl2d")?f.plot=!0:E?W.update(f,E):f.calc=!0,b.set(x))}}for(L in u)V.applyContainerArrayChanges(e,a(i,L),u[L],f,a)||(f.plot=!0);for(g in v){var D=(T=H.getFromId(e,g))&&T._constraintGroup;if(D)for(var N in f.calc=!0,D)v[N]||(H.getFromId(e,N)._constraintShrinkable=!0)}return(ee(e)||r.height||r.width)&&(f.plot=!0),(f.plot||f.calc)&&(f.layoutReplot=!0),{flags:f,rangesAltered:v,undoit:h,redoit:d,eventData:o}}function ee(e){var t=e._fullLayout,n=t.width,r=t.height;return e.layout.autosize&&N.plotAutoSize(e,e.layout,t),t.width!==n||t.height!==r}function L(e,t,n,r){e=F.getGraphDiv(e),G.clearPromiseQueue(e),F.isPlainObject(t)||(t={}),F.isPlainObject(n)||(n={}),Object.keys(t).length&&(e.changed=!0),Object.keys(n).length&&(e.changed=!0);var i=G.coerceTraceIndices(e,r),o=l(e,F.extendFlat({},t),i),r=o.flags,a=C(e,F.extendFlat({},n)),t=a.flags;(r.calc||t.calc)&&(e.calcdata=void 0),r.clearAxisTypes&&G.clearAxisTypes(e,i,n);n=[];t.layoutReplot?n.push(k.layoutReplot):r.fullReplot?n.push(j._doPlot):(n.push(N.previousPromises),u(e,t,a)||N.supplyDefaults(e),r.style&&n.push(k.doTraceStyle),(r.colorbars||t.colorbars)&&n.push(k.doColorBars),t.legend&&n.push(k.doLegend),t.layoutstyle&&n.push(k.layoutStyles),t.axrange&&E(n,a.rangesAltered),t.ticks&&n.push(k.doTicksRelayout),t.modebar&&n.push(k.doModeBar),t.camera&&n.push(k.doCamera),n.push(O)),n.push(N.rehover,N.redrag),_.add(e,L,[e,o.undoit,a.undoit,o.traces],L,[e,o.redoit,a.redoit,o.traces]);n=F.syncOrAsync(n,e);return(n=!n||!n.then?Promise.resolve(e):n).then(function(){return e.emit("plotly_update",{data:o.eventData,layout:a.eventData}),e})}function i(n){return function(e){e._fullLayout._guiEditing=!0;var t=n.apply(null,arguments);return e._fullLayout._guiEditing=!1,t}}var R=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],I=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function z(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=e.match(r.pattern);if(i){i=i[1]||"";return{head:i,tail:e.substr(i.length+1),attr:r.attr}}}}function D(e,t){var n=B(t,e).get();if(void 0!==n)return n;var r=e.split(".");for(r.pop();1<r.length;)if(r.pop(),void 0!==(n=B(t,r.join(".")+".uirevision").get()))return n;return t.uirevision}function te(e,t){var n=F.isPlainObject(e),r=Array.isArray(e);return n||r?(n&&F.isPlainObject(t)||r&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t):e===t}function ne(e,t,n,r){var i,o,a,s,l,u,c,f,d=r._preGUI,h=[],p={},y={};for(i in d){if(s=z(i,R)){if(f=s.head,m=s.tail,v=s.attr||f+".uirevision",(a=(o=B(r,v).get())&&D(v,t))&&a===o){if(null===(l=d[i])&&(l=void 0),te(c=(u=B(t,i)).get(),l)){void 0===c&&"autorange"===m&&h.push(f),u.set(X(B(r,i).get()));continue}if("autorange"===m||"range["===m.substr(0,6)){var g=d[f+".range[0]"],v=d[f+".range[1]"],m=d[f+".autorange"];if(m||null===m&&null===g&&null===v)if(f in p||(v=B(t,f).get(),p[f]=v&&(v.autorange||!1!==v.autorange&&(!v.range||2!==v.range.length))),p[f]){u.set(X(B(r,i).get()));continue}}}}else F.warn("unrecognized GUI edit: "+i);delete d[i],s&&"range["===s.tail.substr(0,6)&&(y[s.head]=1)}for(var b=0;b<h.length;b++){var x=h[b];!y[x]||(x=B(t,x).get())&&delete x.autorange}var _,w=r._tracePreGUI;for(_ in w){var M=w[_],j=null;for(i in M){if(!j){var k=function(e,t){for(var n=0;n<t.length;n++)if(t[n]._fullInput.uid===e)return n;return-1}(_,n);if(k<0){delete w[_];break}var O,k=function(e,t,n){for(var r=0;r<t.length;r++)if(t[r].uid===e)return r;return!t[n]||t[n].uid?-1:n}(_,e,(O=n[k]._fullInput).index);if(k<0){delete w[_];break}j=e[k]}if(s=z(i,I)){if(s.attr?a=(o=B(r,s.attr).get())&&D(s.attr,t):(o=O.uirevision,void 0===(a=j.uirevision)&&(a=t.uirevision)),a&&a===o&&(null===(l=M[i])&&(l=void 0),te(c=(u=B(j,i)).get(),l))){u.set(X(B(O,i).get()));continue}}else F.warn("unrecognized GUI edit: "+i+" in trace uid "+_);delete M[i]}}}function re(e,t,n,r){var i,o,a=r.getValObject,s=r.flags,l=r.immutable,u=r.inArray,c=r.arrayIndex;function f(){var e=i.editType;u&&-1!==e.indexOf("arraydraw")?F.pushUnique(s.arrays[u],c):(W.update(s,i),"none"!==e&&s.nChanges++,r.transition&&i.anim&&s.nChangesAnim++,(K.test(g)||Q.test(g))&&(s.rangesAltered[n[0]]=1),J.test(g)&&B(t,"_inputDomain").set(null),"datarevision"===o&&(s.newDataRevision=1))}function d(e){return"data_array"===e.valType||e.arrayOk}for(o in e){if(s.calc&&!r.transition)return;var h=e[o],p=t[o],y=n.concat(o),g=y.join(".");if("_"!==o.charAt(0)&&"function"!=typeof h&&h!==p){if(("tick0"===o||"dtick"===o)&&"geo"!==n[0]){var v=t.tickmode;if("auto"===v||"array"===v||!v)continue}if(("range"!==o||!t.autorange)&&("zmin"!==o&&"zmax"!==o||"contourcarpet"!==t.type)&&(i=a(y))&&(!i._compareAsJSON||JSON.stringify(h)!==JSON.stringify(p))){var m,b=i.valType,x=d(i),_=Array.isArray(h),w=Array.isArray(p);if(_&&w){var M="_input_"+o,v=e[M],M=t[M];if(Array.isArray(v)&&v===M)continue}if(void 0===p)x&&_?s.calc=!0:f();else if(i._isLinkedToArray){var j=[],M=!1;u||(s.arrays[o]=j);var k=Math.min(h.length,p.length),O=Math.max(h.length,p.length);if(k!==O){if("arraydraw"!==i.editType){f();continue}M=!0}for(m=0;m<k;m++)re(h[m],p[m],y.concat(m),F.extendFlat({inArray:o,arrayIndex:m},r));if(M)for(m=k;m<O;m++)j.push(m)}else!b&&F.isPlainObject(h)?re(h,p,y,r):x?_&&w?(l&&(s.calc=!0),(l||r.newDataRevision)&&f()):_!==w?s.calc=!0:f():_&&w&&h.length===p.length&&String(h)===String(p)||f()}}}for(o in t)if(!(o in e||"_"===o.charAt(0)||"function"==typeof t[o])){if(d(i=a(n.concat(o)))&&Array.isArray(t[o]))return void(s.calc=!0);f()}}function ie(e){var t=e._fullLayout,n=e.getBoundingClientRect();F.equalDomRects(n,t._lastBBox)||(e=t._invTransform=F.inverseTransformMatrix(F.getFullTransformMatrix(e)),t._invScaleX=Math.sqrt(e[0][0]*e[0][0]+e[0][1]*e[0][1]+e[0][2]*e[0][2]),t._invScaleY=Math.sqrt(e[1][0]*e[1][0]+e[1][1]*e[1][1]+e[1][2]*e[1][2]),t._lastBBox=n)}j.animate=function(p,y,g){if(p=F.getGraphDiv(p),!F.isPlotDiv(p))throw new Error("This element is not a Plotly plot: "+p+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var v=p._transitionData;v._frameQueue||(v._frameQueue=[]);var m=(g=N.supplyAnimationDefaults(g)).transition,b=g.frame;return void 0===v._frameWaitingCnt&&(v._frameWaitingCnt=0),new Promise(function(o,a){function e(e){if(0!==e.length){for(var t=0;t<e.length;t++){var n="byname"===e[t].type?N.computeFrame(p,e[t].name):e[t].data,r=(i=t,Array.isArray(b)?i>=b.length?b[0]:b[i]:b),i=(i=t,Array.isArray(m)?i>=m.length?m[0]:m[i]:m);i.duration=Math.min(i.duration,r.duration);i={frame:n,name:e[t].name,frameOpts:r,transitionOpts:i};t===e.length-1&&(i.onComplete=function(e,t){var n=0;return function(){if(e&&++n===t)return e()}}(o,2),i.onInterrupt=a),v._frameQueue.push(i)}"immediate"===g.mode&&(v._lastFrameAt=-1/0),v._animationRaf||function(){p.emit("plotly_animating"),v._lastFrameAt=-1/0,v._timeToNext=0,v._runningTransitions=0,v._currentFrame=null;function e(){v._animationRaf=window.requestAnimationFrame(e),Date.now()-v._lastFrameAt>v._timeToNext&&function(){v._currentFrame&&v._currentFrame.onComplete&&v._currentFrame.onComplete();var e=v._currentFrame=v._frameQueue.shift();{var t;e?(t=e.name?e.name.toString():null,p._fullLayout._currentFrame=t,v._lastFrameAt=Date.now(),v._timeToNext=e.frameOpts.duration,N.transition(p,e.frame.data,e.frame.layout,G.coerceTraceIndices(p,e.frame.traces),e.frameOpts,e.transitionOpts).then(function(){e.onComplete&&e.onComplete()}),p.emit("plotly_animatingframe",{name:t,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})):(p.emit("plotly_animated"),window.cancelAnimationFrame(v._animationRaf),v._animationRaf=null)}}()}e()}()}}var t,n=0;function r(e){return Array.isArray(m)?n>=m.length?e.transitionOpts=m[n]:e.transitionOpts=m[0]:e.transitionOpts=m,n++,e}var i=[],s=null==y,l=Array.isArray(y);if(!s&&!l&&F.isPlainObject(y))i.push({type:"object",data:r(F.extendFlat({},y))});else if(s||-1!==["string","number"].indexOf(typeof y))for(h=0;h<v._frames.length;h++)(t=v._frames[h])&&(!s&&String(t.group)!==String(y)||i.push({type:"byname",name:String(t.name),data:r({name:t.name})}));else if(l)for(h=0;h<y.length;h++){var u=y[h];-1!==["number","string"].indexOf(typeof u)?(u=String(u),i.push({type:"byname",name:u,data:r({name:u})})):F.isPlainObject(u)&&i.push({type:"object",data:r(F.extendFlat({},u))})}for(h=0;h<i.length;h++)if("byname"===(t=i[h]).type&&!v._frameHash[t.data.name])return F.warn('animate failure: frame not found: "'+t.data.name+'"'),void a();-1!==["next","immediate"].indexOf(g.mode)&&function(){if(0!==v._frameQueue.length){for(;v._frameQueue.length;){var e=v._frameQueue.pop();e.onInterrupt&&e.onInterrupt()}p.emit("plotly_animationinterrupted",[])}}(),"reverse"===g.direction&&i.reverse();var c=p._fullLayout._currentFrame;if(c&&g.fromcurrent){var f=-1;for(h=0;h<i.length;h++)if("byname"===(t=i[h]).type&&t.name===c){f=h;break}if(0<f&&f<i.length-1){for(var d=[],h=0;h<i.length;h++)t=i[h],("byname"!==i[h].type||f<h)&&d.push(t);i=d}}0<i.length?e(i):(p.emit("plotly_animated"),o())})},j.addFrames=function(e,t,n){if(e=F.getGraphDiv(e),null==t)return Promise.resolve();if(!F.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var r,i,o,a=e._transitionData._frames,s=e._transitionData._frameHash;if(!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);for(var l,u,c,f,d=a.length+2*t.length,h=[],p={},y=t.length-1;0<=y;y--)F.isPlainObject(t[y])&&(u=(s[l=t[y].name]||p[l]||{}).name,c=t[y].name,f=s[u]||p[u],u&&c&&"number"==typeof c&&f&&w<5&&(w++,F.warn('addFrames: overwriting frame "'+(s[u]||p[u]).name+'" with a frame whose name of type "number" also equates to "'+u+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===w&&F.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),p[l]={name:l},h.push({frame:N.supplyFrameDefaults(t[y]),index:n&&void 0!==n[y]&&null!==n[y]?n[y]:d+y}));h.sort(function(e,t){return e.index>t.index?-1:e.index<t.index?1:0});var g=[],v=[],m=a.length;for(y=h.length-1;0<=y;y--){if("number"==typeof(r=h[y].frame).name&&F.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!r.name)for(;s[r.name="frame "+e._transitionData._counter++];);if(s[r.name]){for(i=0;i<a.length&&(a[i]||{}).name!==r.name;i++);g.push({type:"replace",index:i,value:r}),v.unshift({type:"replace",index:i,value:a[i]})}else o=Math.max(0,Math.min(h[y].index,m)),g.push({type:"insert",index:o,value:r}),v.unshift({type:"delete",index:o}),m++}var b=N.modifyFrames,x=N.modifyFrames;return _&&_.add(e,b,[e,v],x,[e,g]),N.modifyFrames(e,g)},j.deleteFrames=function(e,t){if(e=F.getGraphDiv(e),!F.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var n,r,i=e._transitionData._frames,o=[],a=[];if(!t)for(t=[],n=0;n<i.length;n++)t.push(n);for((t=t.slice()).sort(),n=t.length-1;0<=n;n--)r=t[n],o.push({type:"delete",index:r}),a.unshift({type:"insert",index:r,value:i[r]});var s=N.modifyFrames,l=N.modifyFrames;return _&&_.add(e,s,[e,a],l,[e,o]),N.modifyFrames(e,o)},j.addTraces=function e(t,n,r){t=F.getGraphDiv(t);var i,o,a=[],s=j.deleteTraces,l=e,u=[t,a],c=[t,n];for(function(e,t,n){var r,i;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),r=0;r<t.length;r++)if("object"!=typeof(i=t[r])||Array.isArray(i)||null===i)throw new Error("all values in traces array must be non-array objects");if(void 0!==(n=void 0===n||Array.isArray(n)?n:[n])&&n.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(t,n,r),n=(n=Array.isArray(n)?n:[n]).map(function(e){return F.extendFlat({},e)}),G.cleanData(n),i=0;i<n.length;i++)t.data.push(n[i]);for(i=0;i<n.length;i++)a.push(-n.length+i);if(void 0===r)return o=j.redraw(t),_.add(t,s,u,l,c),o;Array.isArray(r)||(r=[r]);try{T(t,a,r)}catch(e){throw t.data.splice(t.data.length-n.length,n.length),e}return _.startSequence(t),_.add(t,s,u,l,c),o=j.moveTraces(t,a,r),_.stopSequence(t),o},j.deleteTraces=function e(t,n){t=F.getGraphDiv(t);var r,i,o=[],a=j.addTraces,s=e,l=[t,o,n],u=[t,n];if(void 0===n)throw new Error("indices must be an integer or array of integers.");for(M(t,n=Array.isArray(n)?n:[n],"indices"),(n=x(n,t.data.length-1)).sort(F.sorterDes),r=0;r<n.length;r+=1)i=t.data.splice(n[r],1)[0],o.push(i);var c=j.redraw(t);return _.add(t,a,l,s,u),c},j.extendTraces=function e(t,n,r,i){n=o(t=F.getGraphDiv(t),n,r,i,function(e,t,n){var r,i,o,a;return F.isTypedArray(e)?n<0?(r=new e.constructor(0),i=s(e,t),r=n<0?(a=i,r):(a=r,i)):(a=new e.constructor(n),r=new e.constructor(e.length+t.length-n),n===t.length?(a.set(t),r.set(e)):n<t.length?(o=t.length-n,a.set(t.subarray(o)),r.set(e),r.set(t.subarray(0,o),e.length)):(i=n-t.length,o=e.length-i,a.set(e.subarray(o)),a.set(t,i),r.set(e.subarray(0,o)))):(a=e.concat(t),r=0<=n&&n<a.length?a.splice(0,a.length-n):[]),[a,r]}),i=j.redraw(t),n=[t,n.update,r,n.maxPoints];return _.add(t,j.prependTraces,n,e,arguments),i},j.moveTraces=function e(t,n,r){var i,o=[],a=[],s=e,l=e,u=[t=F.getGraphDiv(t),r,n],c=[t,n,r];if(T(t,n,r),n=Array.isArray(n)?n:[n],void 0===r)for(r=[],i=0;i<n.length;i++)r.push(-n.length+i);for(r=Array.isArray(r)?r:[r],n=x(n,t.data.length-1),r=x(r,t.data.length-1),i=0;i<t.data.length;i++)-1===n.indexOf(i)&&o.push(t.data[i]);for(i=0;i<n.length;i++)a.push({newIndex:r[i],trace:t.data[n[i]]});for(a.sort(function(e,t){return e.newIndex-t.newIndex}),i=0;i<a.length;i+=1)o.splice(a[i].newIndex,0,a[i].trace);t.data=o;var f=j.redraw(t);return _.add(t,s,u,l,c),f},j.prependTraces=function e(t,n,r,i){n=o(t=F.getGraphDiv(t),n,r,i,function(e,t,n){var r,i,o,a;return F.isTypedArray(e)?n<=0?(r=new e.constructor(0),i=s(t,e),i=n<0?(a=i,r):(a=r,i)):(a=new e.constructor(n),i=new e.constructor(e.length+t.length-n),n===t.length?(a.set(t),i.set(e)):n<t.length?(o=t.length-n,a.set(t.subarray(0,o)),i.set(t.subarray(o)),i.set(e,o)):(o=n-t.length,a.set(t),a.set(e.subarray(0,o),t.length),i.set(e.subarray(o)))):(a=t.concat(e),i=0<=n&&n<a.length?a.splice(n,a.length):[]),[a,i]}),i=j.redraw(t),n=[t,n.update,r,n.maxPoints];return _.add(t,j.extendTraces,n,e,arguments),i},j.newPlot=function(e,t,n,r){return e=F.getGraphDiv(e),N.cleanPlot([],{},e._fullData||[],e._fullLayout||{}),N.purge(e),j._doPlot(e,t,n,r)},j._doPlot=function(o,e,t,n){var r,i;if(o=F.getGraphDiv(o),y.init(o),F.isPlainObject(e)&&(e=(i=e).data,t=i.layout,n=i.config,r=i.frames),!1===y.triggerHandler(o,"plotly_beforeplot",[e,t,n]))return Promise.reject();e||t||F.isPlotDiv(o)||F.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",o),A(o,n),t=t||{},p.select(o).classed("js-plotly-plot",!0),g.makeTester(),Array.isArray(o._promises)||(o._promises=[]);var a=0===(o.data||[]).length&&Array.isArray(e);Array.isArray(e)&&(G.cleanData(e),a?o.data=e:o.data.push.apply(o.data,e),o.empty=!1),o.layout&&!a||(o.layout=G.cleanLayout(t)),N.supplyDefaults(o);var s=o._fullLayout,e=s._has("cartesian");s._replotting=!0,(a||s._shouldCreateBgLayer)&&(function(e){var t=p.select(e),n=e._fullLayout;{var r;n._calcInverseTransform=ie,n._calcInverseTransform(e),n._container=t.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([{}]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._paperdiv.selectAll(".main-svg").remove(),n._paperdiv.select(".modebar-container").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0),n._modebardiv=n._paperdiv.append("div"),delete n._modeBar,n._hoverpaper=n._paperdiv.append("svg").classed("main-svg",!0),n._uid||(r={},p.selectAll("defs").each(function(){this.id&&(r[this.id.split("-")[1]]=1)}),n._uid=F.randstr(r))}n._paperdiv.selectAll(".main-svg").attr(m.svgAttrs),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._clips=n._defs.append("g").classed("clips",!0),n._topdefs=n._toppaper.append("defs").attr("id","topdefs-"+n._uid),n._topclips=n._topdefs.append("g").classed("clips",!0),n._bgLayer=n._paper.append("g").classed("bglayer",!0),n._draggers=n._paper.append("g").classed("draglayer",!0);t=n._paper.append("g").classed("layer-below",!0);n._imageLowerLayer=t.append("g").classed("imagelayer",!0),n._shapeLowerLayer=t.append("g").classed("shapelayer",!0),n._cartesianlayer=n._paper.append("g").classed("cartesianlayer",!0),n._polarlayer=n._paper.append("g").classed("polarlayer",!0),n._smithlayer=n._paper.append("g").classed("smithlayer",!0),n._ternarylayer=n._paper.append("g").classed("ternarylayer",!0),n._geolayer=n._paper.append("g").classed("geolayer",!0),n._funnelarealayer=n._paper.append("g").classed("funnelarealayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._iciclelayer=n._paper.append("g").classed("iciclelayer",!0),n._treemaplayer=n._paper.append("g").classed("treemaplayer",!0),n._sunburstlayer=n._paper.append("g").classed("sunburstlayer",!0),n._indicatorlayer=n._toppaper.append("g").classed("indicatorlayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0);t=n._toppaper.append("g").classed("layer-above",!0);n._imageUpperLayer=t.append("g").classed("imagelayer",!0),n._shapeUpperLayer=t.append("g").classed("shapelayer",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._menulayer=n._toppaper.append("g").classed("menulayer",!0),n._zoomlayer=n._toppaper.append("g").classed("zoomlayer",!0),n._hoverlayer=n._hoverpaper.append("g").classed("hoverlayer",!0),n._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),e.emit("plotly_framework")}(o),s._shouldCreateBgLayer&&delete s._shouldCreateBgLayer),g.initGradients(o),g.initPatterns(o),a&&H.saveShowSpikeInitial(o);var l=!o.calcdata||o.calcdata.length!==(o._fullData||[]).length;l&&N.doCalcdata(o);for(var u=0;u<o.calcdata.length;u++)o.calcdata[u][0].trace=o._fullData[u];o._context.responsive?o._responsiveChartHandler||(o._responsiveChartHandler=function(){F.isHidden(o)||N.resize(o)},window.addEventListener("resize",o._responsiveChartHandler)):F.clearResponsive(o);var c=F.extendFlat({},s._size),f=0;function d(){if(N.clearAutoMarginIds(o),k.drawMarginPushers(o),H.allowAutoMargin(o),s._has("pie"))for(var e=o._fullData,t=0;t<e.length;t++){var n=e[t];"pie"===n.type&&n.automargin&&N.allowAutoMargin(o,"pie."+n.uid+".automargin")}return N.doAutoMargin(o),N.previousPromises(o)}function h(){o._transitioning||(k.doAutoRangeAndConstraints(o),a&&H.saveRangeInitial(o),U.getComponentMethod("rangeslider","calcAutorange")(o))}return t=[N.previousPromises,function(){if(r)return j.addFrames(o,r)},function e(){for(var t=s._basePlotModules,n=0;n<t.length;n++)t[n].drawFramework&&t[n].drawFramework(o);!s._glcanvas&&s._has("gl")&&(s._glcanvas=s._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(e){return e.key}),s._glcanvas.enter().append("canvas").attr("class",function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var r=o._context.plotGlPixelRatio;if(s._glcanvas){s._glcanvas.attr("width",s.width*r).attr("height",s.height*r).style("width",s.width+"px").style("height",s.height+"px");var i=s._glcanvas.data()[0].regl;if(i&&(Math.floor(s.width*r)!==i._gl.drawingBufferWidth||Math.floor(s.height*r)!==i._gl.drawingBufferHeight)){if(i="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.",!f)return F.log(i+" Clearing graph and plotting again."),N.cleanPlot([],{},o._fullData,s),N.supplyDefaults(o),s=o._fullLayout,N.doCalcdata(o),f++,e();F.error(i)}}return"h"===s.modebar.orientation?s._modebardiv.style("height",null).style("width","100%"):s._modebardiv.style("width",null).style("height",s.height+"px"),N.previousPromises(o)},d,function(){if(N.didMarginChange(c,s._size))return F.syncOrAsync([d,k.layoutStyles],o)}],e&&t.push(function(){if(l)return F.syncOrAsync([U.getComponentMethod("shapes","calcAutorange"),U.getComponentMethod("annotations","calcAutorange"),h],o);h()}),t.push(k.layoutStyles),e&&t.push(function(){return H.draw(o,a?"":"redraw")},function(e){e._fullLayout._insideTickLabelsAutorange&&S(e,e._fullLayout._insideTickLabelsAutorange).then(function(){e._fullLayout._insideTickLabelsAutorange=void 0})}),t.push(k.drawData,k.finalDraw,v,N.addLinks,N.rehover,N.redrag,N.doAutoMargin,function(e){e._fullLayout._insideTickLabelsAutorange&&a&&H.saveRangeInitial(e,!0)},N.previousPromises),(t=!(t=F.syncOrAsync(t,o))||!t.then?Promise.resolve():t).then(function(){return O(o),o})},j.purge=function(e){var t=(e=F.getGraphDiv(e))._fullLayout||{},n=e._fullData||[];return N.cleanPlot([],{},n,t),N.purge(e),y.purge(e),t._container&&t._container.remove(),delete e._context,e},j.react=function(e,t,n,r){var i;e=F.getGraphDiv(e),G.clearPromiseQueue(e);var o=e._fullData,a=e._fullLayout;if(F.isPlotDiv(e)&&o&&a){F.isPlainObject(t)&&(t=(f=t).data,n=f.layout,r=f.config,i=f.frames);var s=!1;r&&(h=F.extendDeep({},e._context),e._context=void 0,A(e,r),s=function e(t,n){for(var r in t)if("_"!==r.charAt(0)){var i=t[r],o=n[r];if(i!==o)if(F.isPlainObject(i)&&F.isPlainObject(o)){if(e(i,o))return!0}else{if(!Array.isArray(i)||!Array.isArray(o))return!0;if(i.length!==o.length)return!0;for(var a=0;a<i.length;a++)if(i[a]!==o[a]){if(!F.isPlainObject(i[a])||!F.isPlainObject(o[a]))return!0;if(e(i[a],o[a]))return!0}}}}(h,e._context)),e.data=t||[],G.cleanData(e.data),e.layout=n||{},G.cleanLayout(e.layout),ne(e.data,e.layout,o,a),N.supplyDefaults(e,{skipUpdateCalc:!0});var l=e._fullData,u=e._fullLayout,c=void 0===u.datarevision,f=u.transition,d=function(e,t,n,r,i){var o=W.layoutFlags();o.arrays={},o.rangesAltered={},o.nChanges=0,o.nChangesAnim=0,re(t,n,[],{getValObject:function(e){return q.getLayoutValObject(n,e)},flags:o,immutable:r,transition:i,gd:e}),(o.plot||o.calc)&&(o.layoutReplot=!0);i&&o.nChanges&&o.nChangesAnim&&(o.anim=o.nChanges===o.nChangesAnim?"all":"some");return o}(e,a,u,c,f),h=d.newDataRevision,p=function(e,t,n,r,i,o){var a=t.length===n.length;if(!i&&!a)return{fullReplot:!0,calc:!0};var s,l,u=W.traceFlags();u.arrays={},u.nChanges=0,u.nChangesAnim=0;var c={getValObject:function(e){return e=q.getTraceValObject(l,e),!l._module.animatable&&e.anim&&(e.anim=!1),e},flags:u,immutable:r,transition:i,newDataRevision:o,gd:e},f={};for(s=0;s<t.length;s++)n[s]&&(l=n[s]._fullInput,N.hasMakesDataTransform(l)&&(l=n[s]),f[l.uid]||(f[l.uid]=1,re(t[s]._fullInput,l,[],c)));(u.calc||u.plot)&&(u.fullReplot=!0);i&&u.nChanges&&u.nChangesAnim&&(u.anim=u.nChanges===u.nChangesAnim&&a?"all":"some");return u}(e,o,l,c,f,h);if(ee(e)&&(d.layoutReplot=!0),p.calc||d.calc){e.calcdata=void 0;for(var y=Object.getOwnPropertyNames(u),g=0;g<y.length;g++){var v=y[g],m=v.substring(0,5);"xaxis"!==m&&"yaxis"!==m||(v=u[v]._emptyCategories)&&v()}}else N.supplyDefaultsUpdateCalc(e.calcdata,l);var l=[];if(i&&(e._transitionData={},N.createTransitionData(e),l.push(function(){return j.addFrames(e,i)})),u.transition&&!s&&(p.anim||d.anim))d.ticks&&l.push(k.doTicksRelayout),N.doCalcdata(e),k.doAutoRangeAndConstraints(e),l.push(function(){return N.transitionFromReact(e,p,d,a)});else if(p.fullReplot||d.layoutReplot||s)e._fullLayout._skipDefaults=!0,l.push(j._doPlot);else{for(var b in d.arrays){var x=d.arrays[b];if(x.length){var _=U.getComponentMethod(b,"drawOne");if(_!==F.noop)for(var w=0;w<x.length;w++)_(e,x[w]);else{var M=U.getComponentMethod(b,"draw");if(M===F.noop)throw new Error("cannot draw components: "+b);M(e)}}}l.push(N.previousPromises),p.style&&l.push(k.doTraceStyle),(p.colorbars||d.colorbars)&&l.push(k.doColorBars),d.legend&&l.push(k.doLegend),d.layoutstyle&&l.push(k.layoutStyles),d.axrange&&E(l),d.ticks&&l.push(k.doTicksRelayout),d.modebar&&l.push(k.doModeBar),d.camera&&l.push(k.doCamera),l.push(O)}l.push(N.rehover,N.redrag),(l=F.syncOrAsync(l,e))&&l.then||(l=Promise.resolve(e))}else l=j.newPlot(e,t,n,r);return l.then(function(){return e.emit("plotly_react",{data:t,layout:n}),e})},j.redraw=function(e){if(e=F.getGraphDiv(e),!F.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);return G.cleanData(e.data),G.cleanLayout(e.layout),e.calcdata=void 0,j._doPlot(e).then(function(){return e.emit("plotly_redraw"),e})},j.relayout=S,j.restyle=a,j.setPlotConfig=function(e){return F.extendFlat(f,e)},j.update=L,j._guiRelayout=i(S),j._guiRestyle=i(a),j._guiUpdate=i(L),j._storeDirectGUIEdit=function(e,t,n){for(var r in n)P(r,B(e,r).get(),n[r],t)}},{"../components/color":647,"../components/drawing":669,"../constants/xmlns_namespaces":759,"../lib":779,"../lib/events":771,"../lib/queue":794,"../plots/cartesian/axes":828,"../plots/cartesian/constants":835,"../plots/cartesian/graph_interact":838,"../plots/cartesian/select":849,"../plots/plots":876,"../registry":879,"./edit_types":810,"./helpers":811,"./manage_arrays":813,"./plot_config":815,"./plot_schema":816,"./subroutines":818,"@plotly/d3":3,"fast-isnumeric":574,"has-hover":606}],815:[function(e,t,n){"use strict";var r={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},i={};!function e(t,n){for(var r in t){var i=t[r];i.valType?n[r]=i.dflt:(n[r]||(n[r]={}),e(i,n[r]))}}(r,i),t.exports={configAttributes:r,dfltConfig:i}},{}],816:[function(e,t,f){"use strict";var c=e("../registry"),n=e("../lib"),d=e("../plots/attributes"),h=e("../plots/layout_attributes"),r=e("../plots/frame_attributes"),o=e("../plots/animation_attributes"),a=e("./plot_config").configAttributes,s=e("./edit_types"),l=n.extendDeepAll,p=n.isPlainObject,y=n.isArrayOrTypedArray,u=n.nestedProperty,g=n.valObjectMeta,i="_isSubplotObj",v="_isLinkedToArray",n="_deprecated",m=[i,v,"_arrayAttrRegexps",n];function b(e,t,n){if(!e)return!1;if(e._isLinkedToArray)if(x(t[n]))n++;else if(n<t.length)return!1;for(;n<t.length;n++){var r=e[t[n]];if(!p(r))break;if(e=r,n===t.length-1)break;if(e._isLinkedToArray){if(!x(t[++n]))return!1}else if("info_array"===e.valType){var i=t[++n];if(!x(i))return!1;var o=e.items;if(Array.isArray(o)){if(i>=o.length)return!1;if(2===e.dimensions){if(n++,t.length===n)return e;r=t[n];if(!x(r))return!1;e=o[i][r]}else e=o[i]}else e=o}}return e}function x(e){return e===Math.round(e)&&0<=e}function _(e){return f.crawl(e,function(e,t,n){f.isValObject(e)?!0!==e.arrayOk&&"data_array"!==e.valType||(n[t+"src"]={valType:"string",editType:"none"}):p(e)&&(e.role="object")}),f.crawl(e,function(e,t,n){var r;!e||(r=e[v])&&(delete e[v],n[t]={items:{}},n[t].items[r]=e,n[t].role="object")}),function e(t){for(var n in t)if(p(t[n]))e(t[n]);else if(Array.isArray(t[n]))for(var r=0;r<t[n].length;r++)e(t[n][r]);else t[n]instanceof RegExp&&(t[n]=t[n].toString())}(e),e}function w(e,t,n){n=u(e,n),t=l({},t.layoutAttributes);t[i]=!0,n.set(t)}function M(e,t,n){n=u(e,n);n.set(l(n.get()||{},t))}f.IS_SUBPLOT_OBJ=i,f.IS_LINKED_TO_ARRAY=v,f.DEPRECATED=n,f.UNDERSCORE_ATTRS=m,f.get=function(){var t={};c.allTypes.forEach(function(e){t[e]=function(e){var t,n;t=c.modules[e]._module,n=t.basePlotModule;var r={type:null},o=l({},d),a=l({},t.attributes);f.crawl(a,function(e,t,n,r,i){u(o,i).set(void 0),void 0===e&&u(a,i).set(void 0)}),l(r,o),c.traceIs(e,"noOpacity")&&delete r.opacity;c.traceIs(e,"showLegend")||(delete r.showlegend,delete r.legendgroup);c.traceIs(e,"noHover")&&(delete r.hoverinfo,delete r.hoverlabel);t.selectPoints||delete r.selectedpoints;l(r,a),n.attributes&&l(r,n.attributes);r.type=e;e={meta:t.meta||{},categories:t.categories||{},animatable:Boolean(t.animatable),type:e,attributes:_(r)};t.layoutAttributes&&(l(r={},t.layoutAttributes),e.layoutAttributes=_(r));t.animatable||f.crawl(e,function(e){f.isValObject(e)&&"anim"in e&&delete e.anim});return e}(e)});var e,i={};return Object.keys(c.transformsRegistry).forEach(function(e){var n,r;i[e]=(n=e,e=c.transformsRegistry[n],r=l({},e.attributes),Object.keys(c.componentsRegistry).forEach(function(e){var t=c.componentsRegistry[e];t.schema&&t.schema.transforms&&t.schema.transforms[n]&&Object.keys(t.schema.transforms[n]).forEach(function(e){M(r,t.schema.transforms[n][e],e)})}),{attributes:_(r)})}),{defs:{valObjects:g,metaKeys:m.concat(["description","role","editType","impliedEdits"]),editType:{traces:s.traces,layout:s.layout},impliedEdits:{}},traces:t,layout:function(){var e,t,n={};for(e in l(n,h),c.subplotsRegistry)if((t=c.subplotsRegistry[e]).layoutAttributes)if(Array.isArray(t.attr))for(var r=0;r<t.attr.length;r++)w(n,t,t.attr[r]);else{var i="subplot"===t.attr?t.name:t.attr;w(n,t,i)}for(e in c.componentsRegistry){var o=(t=c.componentsRegistry[e]).schema;if(o&&(o.subplots||o.layout)){o=o.subplots;if(o&&o.xaxis&&!o.yaxis)for(var a in o.xaxis)delete n.yaxis[a]}else"colorscale"===t.name?l(n,t.layoutAttributes):t.layoutAttributes&&M(n,t.layoutAttributes,t.name)}return{layoutAttributes:_(n)}}(),transforms:i,frames:(_(e={frames:l({},r)}),e.frames),animation:_(o),config:_(a)}},f.crawl=function(r,i,e,o){var a=e||0;o=o||"",Object.keys(r).forEach(function(e){var t,n=r[e];-1===m.indexOf(e)&&(i(n,e,r,a,t=(o?o+".":"")+e),f.isValObject(n)||p(n)&&"impliedEdits"!==e&&f.crawl(n,i,a+1,t))})},f.isValObject=function(e){return e&&void 0!==e.valType},f.findArrayAttributes=function(e){var i,s,l=[],u=[],c=[];function t(e,t,n,r){u=u.slice(0,r).concat([t]),c=c.slice(0,r).concat([e&&e._isLinkedToArray]),!e||"data_array"!==e.valType&&!0!==e.arrayOk||"colorbar"===u[r-1]&&("ticktext"===t||"tickvals"===t)||function e(t,n,r){var i=t[u[n]];var o=r+u[n];if(n===u.length-1)y(i)&&l.push(s+o);else if(c[n]){if(Array.isArray(i))for(var a=0;a<i.length;a++)p(i[a])&&e(i[a],n+1,o+"["+a+"].")}else p(i)&&e(i,n+1,o+".")}(i,0,"")}i=e,s="",f.crawl(d,t),e._module&&e._module.attributes&&f.crawl(e._module.attributes,t);var n=e.transforms;if(n)for(var r=0;r<n.length;r++){var o=n[r],a=o._module;a&&(s="transforms["+r+"].",i=o,f.crawl(a.attributes,t))}return l},f.getTraceValObject=function(e,t){var n,r=t[0],i=1;if("transforms"===r){if(1===t.length)return d.transforms;var o=e.transforms;if(!Array.isArray(o)||!o.length)return!1;var a=t[1];if(!x(a)||a>=o.length)return!1;o=(n=(c.transformsRegistry[o[a].type]||{}).attributes)&&n[t[2]],i=3}else{var a=e._module;if(!(a=a||(c.modules[e.type||d.type.dflt]||{})._module))return!1;(o=(n=a.attributes)&&n[r])||(a=a.basePlotModule)&&a.attributes&&(o=a.attributes[r]),o=o||d[r]}return b(o,t,i)},f.getLayoutValObject=function(e,t){return b(function(e,t){var n,r,i,o,a,s=e._basePlotModules;if(s){for(n=0;n<s.length;n++){if((i=s[n]).attrRegex&&i.attrRegex.test(t)){if(i.layoutAttrOverrides)return i.layoutAttrOverrides;!a&&i.layoutAttributes&&(a=i.layoutAttributes)}var l=i.baseLayoutAttrOverrides;if(l&&t in l)return l[t]}if(a)return a}var u=e._modules;if(u)for(n=0;n<u.length;n++)if((o=u[n].layoutAttributes)&&t in o)return o[t];for(r in c.componentsRegistry){if("colorscale"===(i=c.componentsRegistry[r]).name&&0===t.indexOf("coloraxis"))return i.layoutAttributes[t];if(!i.schema&&t===i.name)return i.layoutAttributes}return t in h&&h[t]}(e,t[0]),t,1)}},{"../lib":779,"../plots/animation_attributes":822,"../plots/attributes":824,"../plots/frame_attributes":860,"../plots/layout_attributes":874,"../registry":879,"./edit_types":810,"./plot_config":815}],817:[function(e,t,n){"use strict";var f=e("../lib"),a=e("../plots/attributes"),d="templateitemname",r={name:{valType:"string",editType:"none"}};function u(e){return e&&"string"==typeof e}function i(e){var t=e.length-1;return"s"!==e.charAt(t)&&f.warn("bad argument to arrayDefaultKey: "+e),e.substr(0,e.length-1)+"defaults"}r[d]={valType:"string",editType:"calc"},n.templatedArray=function(e,t){return t._isLinkedToArray=e,t.name=r.name,t[d]=r[d],t},n.traceTemplater=function(n){var r,i,o={};for(r in n)i=n[r],Array.isArray(i)&&i.length&&(o[r]=0);return{newTrace:function(e){var t={type:r=f.coerce(e,{},a,"type"),_template:null};return r in o&&(i=n[r],e=o[r]%i.length,o[r]++,t._template=i[e]),t}}},n.newContainer=function(e,t,n){var r=e._template,n=r&&(r[t]||n&&r[n]);return f.isPlainObject(n)||(n=null),e[t]={_template:n}},n.arrayTemplater=function(e,t,o){var e=e._template,a=e&&e[i(t)],s=e&&e[t];Array.isArray(s)&&s.length||(s=[]);var l={};return{newItem:function(e){var t={name:e.name,_input:e},n=t[d]=e[d];if(!u(n))return t._template=a,t;for(var r=0;r<s.length;r++){var i=s[r];if(i.name===n)return l[n]=1,t._template=i,t}return t[o]=e[o]||!1,t._template=!1,t},defaultItems:function(){for(var e=[],t=0;t<s.length;t++){var n,r=s[t],i=r.name;u(i)&&!l[i]&&((n={_template:r,name:i,_input:{_templateitemname:i}})[d]=r[d],e.push(n),l[i]=1)}return e}}},n.arrayDefaultKey=i,n.arrayEditor=function(i,e,t){var n,r=(f.nestedProperty(i,e).get()||[]).length,o=t._index,a=r<=o&&(t._input||{})._templateitemname,s=e+"["+(o=a?r:o)+"]";function l(){n={},a&&(n[s]={},n[s][d]=a)}function u(e,t){a?f.nestedProperty(n[s],e).set(t):n[s+"."+e]=t}function c(){var e=n;return l(),e}return l(),{modifyBase:function(e,t){n[e]=t},modifyItem:u,getUpdateObj:c,applyUpdate:function(e,t){e&&u(e,t);var n,r=c();for(n in r)f.nestedProperty(i,n).set(r[n])}}}},{"../lib":779,"../plots/attributes":824}],818:[function(e,t,D){"use strict";var N=e("@plotly/d3"),c=e("../registry"),F=e("../plots/plots"),B=e("../lib"),f=e("../lib/clear_gl_canvases"),U=e("../components/color"),q=e("../components/drawing"),i=e("../components/titles"),H=e("../components/modebar"),V=e("../plots/cartesian/axes"),G=e("../constants/alignment"),n=e("../plots/cartesian/constraints"),l=n.enforce,u=n.clean,d=e("../plots/cartesian/autorange").doAutoRange;function r(e){var t,r,n=e._fullLayout,i=n._size,o=i.p,a=V.list(e,"",!0);if(n._paperdiv.style({width:e._context.responsive&&n.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":n.width+"px",height:e._context.responsive&&n.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":n.height+"px"}).selectAll(".main-svg").call(q.setSize,n.width,n.height),e._context.setBackground(e,n.paper_bgcolor),D.drawMainTitle(e),H.manage(e),!n._has("cartesian"))return F.previousPromises(e);function s(e,t,n){var r=e._lw/2;return"x"===e._id.charAt(0)?t?"top"===n?t._offset-o-r:t._offset+t._length+o+r:i.t+i.h*(1-(e.position||0))+r%1:t?"right"===n?t._offset+t._length+o+r:t._offset-o-r:i.l+i.w*(e.position||0)+r%1}for(t=0;t<a.length;t++){var l,u=(l=a[t])._anchorAxis;l._linepositions={},l._lw=q.crispRound(e,l.linewidth,1),l._mainLinePosition=s(l,u,l.side),l._mainMirrorPosition=l.mirror&&u?s(l,u,G.OPPOSITE_SIDE[l.side]):null}var c,f,d,h,p=[],y=[],g=[],v=1===U.opacity(n.paper_bgcolor)&&1===U.opacity(n.plot_bgcolor)&&n.paper_bgcolor===n.plot_bgcolor;for(r in n._plots)(h=n._plots[r]).mainplot?(h.bg&&h.bg.remove(),h.bg=void 0):(c=h.xaxis.domain,f=h.yaxis.domain,d=h.plotgroup,!function(e,t,n){for(var r=0;r<n.length;r++){var i=n[r][0],o=n[r][1];if(!(i[0]>=e[1]||i[1]<=e[0])&&(o[0]<t[1]&&o[1]>t[0]))return 1}}(c,f,g)?(d.select("rect.bg").remove(),g.push([c,f]),v||(p.push(r),y.push(r))):(f=d.node(),d=h.bg=B.ensureSingle(d,"rect","bg"),f.insertBefore(d.node(),f.childNodes[0]),y.push(r)));var m,b,x,_,w,M,j=n._bgLayer.selectAll(".bg").data(p);for(j.enter().append("rect").classed("bg",!0),j.exit().remove(),j.each(function(e){n._plots[e].bg=N.select(this)}),t=0;t<y.length;t++)h=n._plots[y[t]],O=h.xaxis,A=h.yaxis,h.bg&&void 0!==O._offset&&void 0!==A._offset&&h.bg.call(q.setRect,O._offset-o,A._offset-o,O._length+2*o,A._length+2*o).call(U.fill,n.plot_bgcolor).style("stroke-width",0);if(!n._hasOnlyLargeSploms)for(r in n._plots){var k,O=(h=n._plots[r]).xaxis,A=h.yaxis,T=h.clipId="clip"+n._uid+r+"plot",P=B.ensureSingleById(n._clips,"clipPath",T,function(e){e.classed("plotclip",!0).append("rect")});h.clipRect=P.select("rect").attr({width:O._length,height:A._length}),q.setTranslate(h.plot,O._offset,A._offset),T=h._hasClipOnAxisFalse?(k=null,T):(k=T,null),q.setClipUrl(h.plot,k,e),h.layerClipId=T}function S(e){return"M"+m+","+e+"H"+b}function E(e){return"M"+O._offset+","+e+"h"+O._length}function C(e){return"M"+e+","+_+"V"+x}function L(e){return"M"+e+","+A._offset+"v"+A._length}function R(e,t,n){if(!e.showline||r!==e._mainSubplot)return"";if(!e._anchorAxis)return n(e._mainLinePosition);n=t(e._mainLinePosition);return e.mirror&&(n+=t(e._mainMirrorPosition)),n}for(r in n._plots){h=n._plots[r],O=h.xaxis,A=h.yaxis;var I="M0,0";W(O,r)&&(w=Y(O,"left",A,a),m=O._offset-(w?o+w:0),M=Y(O,"right",A,a),b=O._offset+O._length+(M?o+M:0),z=s(O,A,"bottom"),w=s(O,A,"top"),!(M=!O._anchorAxis||r!==O._mainSubplot)||"allticks"!==O.mirror&&"all"!==O.mirror||(O._linepositions[r]=[z,w]),I=R(O,S,E),M&&O.showline&&("all"===O.mirror||"allticks"===O.mirror)&&(I+=S(z)+S(w)),h.xlines.style("stroke-width",O._lw+"px").call(U.stroke,O.showline?O.linecolor:"rgba(0,0,0,0)")),h.xlines.attr("d",I);var z="M0,0";W(A,r)&&(w=Y(A,"bottom",O,a),x=A._offset+A._length+(w?o:0),I=Y(A,"top",O,a),_=A._offset-(I?o:0),w=s(A,O,"left"),I=s(A,O,"right"),!(M=!A._anchorAxis||r!==A._mainSubplot)||"allticks"!==A.mirror&&"all"!==A.mirror||(A._linepositions[r]=[w,I]),z=R(A,C,L),M&&A.showline&&("all"===A.mirror||"allticks"===A.mirror)&&(z+=C(w)+C(I)),h.ylines.style("stroke-width",A._lw+"px").call(U.stroke,A.showline?A.linecolor:"rgba(0,0,0,0)")),h.ylines.attr("d",z)}return V.makeClipPaths(e),F.previousPromises(e)}function W(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||"all"===e.mirror||"allticks"===e.mirror)}function a(e,t,n){if(n.showline&&n._lw){if("all"===n.mirror||"allticks"===n.mirror)return 1;var r=n._anchorAxis;if(r){var i=G.FROM_BL[t];return n.side===t?r.domain[i]===e.domain[i]:n.mirror&&r.domain[1-i]===e.domain[1-i]}}}function Y(e,t,n,r){if(a(e,t,n))return n._lw;for(var i=0;i<r.length;i++){var o=r[i];if(o._mainAxis===n._mainAxis&&a(e,t,o))return o._lw}return 0}D.layoutStyles=function(e){return B.syncOrAsync([F.doAutoMargin,r],e)},D.drawMainTitle=function(e){var t=e._fullLayout,n=function(e){var t=e.title,e="middle";B.isRightAnchor(t)?e="end":B.isLeftAnchor(t)&&(e="start");return e}(t),r=function(e){var t=e.title,e="0em";B.isTopAnchor(t)?e=G.CAP_SHIFT+"em":B.isMiddleAnchor(t)&&(e=G.MID_SHIFT+"em");return e}(t);i.draw(e,"gtitle",{propContainer:t,propName:"title.text",placeholder:t._dfltTitle.plot,attributes:{x:function(e,t){var n=e.title,r=e._size,i=0;"start"===t?i=n.pad.l:"end"===t&&(i=-n.pad.r);return"paper"!==n.xref?e.width*n.x+i:r.l+r.w*n.x+i}(t,n),y:function(e,t){var n=e.title,r=e._size,i=0;"0em"!==t&&t?t===G.CAP_SHIFT+"em"&&(i=n.pad.t):i=-n.pad.b;return"auto"===n.y?r.t/2:"paper"!==n.yref?e.height-e.height*n.y+i:r.t+r.h-r.h*n.y+i}(t,r),"text-anchor":n,dy:r}})},D.doTraceStyle=function(e){for(var t=e.calcdata,n=[],r=0;r<t.length;r++){var i=t[r],o=i[0]||{},a=o.trace||{},s=a._module||{},l=s.arraysToCalcdata;l&&l(i,a);s=s.editStyle;s&&n.push({fn:s,cd0:o})}if(n.length){for(r=0;r<n.length;r++){var u=n[r];u.fn(e,u.cd0)}f(e),D.redrawReglTraces(e)}return F.style(e),c.getComponentMethod("legend","draw")(e),F.previousPromises(e)},D.doColorBars=function(e){return c.getComponentMethod("colorbar","draw")(e),F.previousPromises(e)},D.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,c.call("_doPlot",e,"",t)},D.doLegend=function(e){return c.getComponentMethod("legend","draw")(e),F.previousPromises(e)},D.doTicksRelayout=function(e){return V.draw(e,"redraw"),e._fullLayout._hasOnlyLargeSploms&&(c.subplotsRegistry.splom.updateGrid(e),f(e),D.redrawReglTraces(e)),D.drawMainTitle(e),F.previousPromises(e)},D.doModeBar=function(e){var t=e._fullLayout;H.manage(e);for(var n=0;n<t._basePlotModules.length;n++){var r=t._basePlotModules[n].updateFx;r&&r(e)}return F.previousPromises(e)},D.doCamera=function(e){for(var t=e._fullLayout,n=t._subplots.gl3d,r=0;r<n.length;r++){var i=t[n[r]];i._scene.setViewport(i)}},D.drawData=function(e){var t=e._fullLayout;f(e);for(var n=t._basePlotModules,r=0;r<n.length;r++)n[r].plot(e);return D.redrawReglTraces(e),F.style(e),c.getComponentMethod("shapes","draw")(e),c.getComponentMethod("annotations","draw")(e),c.getComponentMethod("images","draw")(e),t._replotting=!1,F.previousPromises(e)},D.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var n,r,i=e._fullData,o=[],a=[];for(t._hasOnlyLargeSploms&&t._splomGrid.draw(),n=0;n<i.length;n++){var s=i[n];!0===s.visible&&0!==s._length&&("splom"===s.type?t._splomScenes[s.uid].draw():"scattergl"===s.type?B.pushUnique(o,s.xaxis+s.yaxis):"scatterpolargl"===s.type&&B.pushUnique(a,s.subplot))}for(n=0;n<o.length;n++)(r=t._plots[o[n]])._scene&&r._scene.draw();for(n=0;n<a.length;n++)(r=t[a[n]]._subplot)._scene&&r._scene.draw()}},D.doAutoRangeAndConstraints=function(e){for(var t,n=V.list(e,"",!0),r={},i=0;i<n.length;i++)if(!r[(t=n[i])._id]){r[t._id]=1,u(e,t),d(e,t);var o=t._matchGroup;if(o)for(var a in o){var s=V.getFromId(e,a);d(e,s,t.range),r[a]=1}}l(e)},D.finalDraw=function(e){c.getComponentMethod("rangeslider","draw")(e),c.getComponentMethod("rangeselector","draw")(e)},D.drawMarginPushers=function(e){c.getComponentMethod("legend","draw")(e),c.getComponentMethod("rangeselector","draw")(e),c.getComponentMethod("sliders","draw")(e),c.getComponentMethod("updatemenus","draw")(e),c.getComponentMethod("colorbar","draw")(e)}},{"../components/color":647,"../components/drawing":669,"../components/modebar":710,"../components/titles":745,"../constants/alignment":752,"../lib":779,"../lib/clear_gl_canvases":766,"../plots/cartesian/autorange":827,"../plots/cartesian/axes":828,"../plots/cartesian/constraints":836,"../plots/plots":876,"../registry":879,"@plotly/d3":3}],819:[function(e,t,n){"use strict";var m=e("../lib"),b=m.isPlainObject,f=e("./plot_schema"),p=e("../plots/plots"),d=e("../plots/attributes"),x=e("./plot_template"),y=e("./plot_config").dfltConfig;function h(s,e){s=m.extendDeep({},s);var t,l,n=Object.keys(s).sort();function r(e,t,n){if(b(t)&&b(e))h(e,t);else if(Array.isArray(t)&&Array.isArray(e)){var r=x.arrayTemplater({_template:s},n);for(l=0;l<t.length;l++){var i=t[l],o=r.newItem(i)._template;o&&h(o,i)}var a=r.defaultItems();for(l=0;l<a.length;l++)t.push(a[l]._template);for(l=0;l<t.length;l++)delete t[l].templateitemname}}for(t=0;t<n.length;t++){var i=n[t],o=s[i];if(i in e?r(o,e[i],i):e[i]=o,_(i)===i)for(var a in e){var u=_(a);a===u||u!==i||a in s||r(o,e[a],i)}}}function _(e){return e.replace(/[0-9]+$/,"")}function w(e,t,n,r,i){var o,a=i&&n(i);for(o in e){var s,l=e[o],u=M(e,o,r),c=M(e,o,i),f=n(c);if(f||(s=_(o))!==o&&(f=n(c=M(e,s,i))),(!a||a!==f)&&!(!f||f._noTemplating||"data_array"===f.valType||f.arrayOk&&Array.isArray(l)))if(!f.valType&&b(l))w(l,t,n,u,c);else if(f._isLinkedToArray&&Array.isArray(l))for(var d=!1,h=0,p={},y=0;y<l.length;y++){var g,v=l[y];b(v)&&((g=v.name)?p[g]||(w(v,t,n,M(l,h,u),M(l,h,c)),h++,p[g]=1):d||(g=M(e,x.arrayDefaultKey(o),r),w(v,t,n,v=M(l,h,u),M(l,h,c)),v=m.nestedProperty(t,v),m.nestedProperty(t,g).set(v.get()),v.set(null),d=!0))}else m.nestedProperty(t,u).set(l)}}function M(e,t,n){t=n?Array.isArray(e)?n+"["+t+"]":n+"."+t:t;return t}function g(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":t=e.path?"There are no templates for item "+e.path+" with name "+e.templateitemname:"There are no templates for trace "+e.index+", of type "+e.traceType+".";break;case"unused":t=e.path?"The template item at "+e.path+" was not used in constructing the plot.":e.dataCount?"Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type.":"The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data.";break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type."}return e.msg=t,e}n.makeTemplate=function(e){e=m.isPlainObject(e)?e:m.getGraphDiv(e),e=m.extendDeep({_context:y},{data:e.data,layout:e.layout}),p.supplyDefaults(e);var t=e.data||[],n=e.layout||{};n._basePlotModules=e._fullLayout._basePlotModules,n._modules=e._fullLayout._modules;var r={data:{},layout:{}};t.forEach(function(e){var t={};w(e,t,function(e,t){return f.getTraceValObject(e,m.nestedProperty({},t).parts)}.bind(null,e));e=m.coerce(e,{},d,"type");(r.data[e]||(r.data[e]=[])).push(t)}),w(n,r.layout,function(e,t){return f.getLayoutValObject(e,m.nestedProperty({},t).parts)}.bind(null,n)),delete r.layout.template;t=n.template;if(b(t)){var i,o,a,s,l,u,n=t.layout;b(n)&&h(n,r.layout);var c=t.data;if(b(c)){for(o in r.data)if(a=c[o],Array.isArray(a)){for(u=(l=r.data[o]).length,s=a.length,i=0;i<u;i++)h(a[i%s],l[i]);for(i=u;i<s;i++)l.push(m.extendDeep({},a[i]))}for(o in c)o in r.data||(r.data[o]=m.extendDeep([],c[o]))}}return r},n.validateTemplate=function(e,t){var n=m.extendDeep({},{_context:y,data:e.data,layout:e.layout}),r=n.layout||{},e=(t=!b(t)?r.template||{}:t).layout,i=t.data,o=[];n.layout=r,n.layout.template=t,p.supplyDefaults(n);var t=n._fullLayout,a=n._fullData,s={};if(b(e)?(function e(t,n){for(var r in t)if("_"!==r.charAt(0)&&b(t[r])){for(var i=_(r),o=[],a=0;a<n.length;a++)o.push(M(t,r,n[a])),i!==r&&o.push(M(t,i,n[a]));for(a=0;a<o.length;a++)s[o[a]]=1;e(t[r],o)}}(t,["layout"]),function e(t,n){for(var r in t){var i;-1===r.indexOf("defaults")&&b(t[r])&&(i=M(t,r,n),s[i]?e(t[r],i):o.push({code:"unused",path:i}))}}(e,"layout")):o.push({code:"layout"}),b(i)){for(var l={},u=0;u<a.length;u++){var c,f=a[u];l[c=f.type]=(l[c]||0)+1,f._fullInput._template||o.push({code:"missing",index:f._fullInput.index,traceType:c})}for(c in i){var d=i[c].length,h=l[c]||0;h<d?o.push({code:"unused",traceType:c,templateCount:d,dataCount:h}):d<h&&o.push({code:"reused",traceType:c,templateCount:d,dataCount:h})}}else o.push({code:"data"});if(!function e(t,n){for(var r in t){var i;"_"!==r.charAt(0)&&(i=t[r],r=M(t,r,n),b(i)?(Array.isArray(t)&&!1===i._template&&i.templateitemname&&o.push({code:"missing",path:r,templateitemname:i.templateitemname}),e(i,r)):Array.isArray(i)&&function(e){for(var t=0;t<e.length;t++)if(b(e[t]))return 1}(i)&&e(i,r))}}({data:a,layout:t},""),o.length)return o.map(g)}},{"../lib":779,"../plots/attributes":824,"../plots/plots":876,"./plot_config":815,"./plot_schema":816,"./plot_template":817}],820:[function(e,t,n){"use strict";var x=e("fast-isnumeric"),_=e("./plot_api"),w=e("../plots/plots"),M=e("../lib"),j=e("../snapshot/helpers"),k=e("../snapshot/tosvg"),O=e("../snapshot/svgtoimg"),A=e("../version").version,T={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};t.exports=function(e,n){var r,t,i,o;function a(e){return!(e in n)||M.validate(n[e],T[e])}if(n=n||{},o=M.isPlainObject(e)?(r=e.data||[],t=e.layout||{},i=e.config||{},{}):(e=M.getGraphDiv(e),r=M.extendDeep([],e.data),t=M.extendDeep({},e.layout),i=e._context,e._fullLayout||{}),!a("width")&&null!==n.width||!a("height")&&null!==n.height)throw new Error("Height and width should be pixel values.");if(!a("format"))throw new Error("Export format is not "+M.join2(T.format.values,", "," or ")+".");var s={};function l(e,t){return M.coerce(n,s,T,e,t)}var u=l("format"),c=l("width"),f=l("height"),d=l("scale"),e=l("setBackground"),h=l("imageDataOnly"),p=document.createElement("div");p.style.position="absolute",p.style.left="-5000px",document.body.appendChild(p);var y=M.extendFlat({},t);c?y.width=c:null===n.width&&x(o.width)&&(y.width=o.width),f?y.height=f:null===n.height&&x(o.height)&&(y.height=o.height);var g=M.extendFlat({},i,{_exportedPlot:!0,staticPlot:!0,setBackground:e}),v=j.getRedrawFunc(p);function m(){return new Promise(function(e){setTimeout(e,j.getDelay(p._fullLayout))})}function b(){return new Promise(function(e,t){var n=k(p,u,d),r=p._fullLayout.width,i=p._fullLayout.height;function o(){_.purge(p),document.body.removeChild(p)}if("full-json"===u){var a=w.graphJson(p,!1,"keepdata","object",!0,!0);return a.version=A,a=JSON.stringify(a),o(),e(h?a:j.encodeJSON(a))}if(o(),"svg"===u)return e(h?n:j.encodeSVG(n));a=document.createElement("canvas");a.id=M.randstr(),O({format:u,width:r,height:i,scale:d,canvas:a,svg:n,promise:!0}).then(e).catch(t)})}return new Promise(function(t,n){_.newPlot(p,r,y,g).then(v).then(m).then(b).then(function(e){t((e=e,h?e.replace(j.IMAGE_URL_PREFIX,""):e))}).catch(function(e){n(e)})})}},{"../lib":779,"../plots/plots":876,"../snapshot/helpers":883,"../snapshot/svgtoimg":885,"../snapshot/tosvg":887,"../version":961,"./plot_api":814,"fast-isnumeric":574}],821:[function(e,t,n){"use strict";var E=e("../lib"),x=e("../plots/plots"),_=e("./plot_schema"),w=e("./plot_config").dfltConfig,C=E.isPlainObject,L=Array.isArray,R=E.isArrayOrTypedArray;function I(e,t,n,r,i,o){o=o||[];for(var a=Object.keys(e),s=0;s<a.length;s++){var l=a[s];if("transforms"!==l){var u=o.slice();u.push(l);var c=e[l],f=t[l],d=function(e,t){if(t in e)return e[t];t=D(t);return e[t.keyMinusId]}(n,l),h=(d||{}).valType,p="info_array"===h,y="colorscale"===h,g=(d||{}).items;if(function(e,t){var n=D(t),r=n.keyMinusId,n=n.id;if(r in e&&e[r]._isSubplotObj&&n)return!0;return t in e}(n,l))if(C(c)&&C(f)&&"any"!==h)I(c,f,d,r,i,u);else if(p&&L(c)){c.length>f.length&&r.push(z("unused",i,u.concat(f.length)));var v,m,b,x,_=f.length,w=Array.isArray(g);if(w&&(_=Math.min(_,g.length)),2===d.dimensions)for(v=0;v<_;v++)if(L(c[v])){c[v].length>f[v].length&&r.push(z("unused",i,u.concat(v,f[v].length)));for(var M=f[v].length,j=0;j<(w?Math.min(M,g[v].length):M);j++)m=w?g[v][j]:g,b=c[v][j],x=f[v][j],E.validate(b,m)?x!==b&&x!==+b&&r.push(z("dynamic",i,u.concat(v,j),b,x)):r.push(z("value",i,u.concat(v,j),b))}else r.push(z("array",i,u.concat(v),c[v]));else for(v=0;v<_;v++)m=w?g[v]:g,b=c[v],x=f[v],E.validate(b,m)?x!==b&&x!==+b&&r.push(z("dynamic",i,u.concat(v),b,x)):r.push(z("value",i,u.concat(v),b))}else if(d.items&&!p&&L(c)){for(var k=g[Object.keys(g)[0]],O=[],A=0;A<f.length;A++){var T,P,S=f[A]._index||A;(P=u.slice()).push(S),C(c[S])&&C(f[A])&&(O.push(S),T=c[S],S=f[A],C(T)&&!1!==T.visible&&!1===S.visible?r.push(z("invisible",i,P)):I(T,S,k,r,i,P))}for(A=0;A<c.length;A++)(P=u.slice()).push(A),C(c[A])?-1===O.indexOf(A)&&r.push(z("unused",i,P)):r.push(z("object",i,P,c[A]))}else!C(c)&&C(f)?r.push(z("object",i,u,c)):R(c)||!R(f)||p||y?l in t?E.validate(c,d)?"enumerated"===d.valType&&(d.coerceNumber&&c!==+f||c!==f)&&r.push(z("dynamic",i,u,c,f)):r.push(z("value",i,u,c)):r.push(z("unused",i,u,c)):r.push(z("array",i,u,c));else r.push(z("schema",i,u))}}return r}t.exports=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});var n,r,i=_.get(),o=[],a={_context:E.extendFlat({},w)};L(e)?(a.data=E.extendDeep([],e),n=e):(a.data=[],n=[],o.push(z("array","data"))),C(t)?(a.layout=E.extendDeep({},t),r=t):(a.layout={},r={},1<arguments.length&&o.push(z("object","layout"))),x.supplyDefaults(a);for(var s=a._fullData,l=n.length,u=0;u<l;u++){var c=n[u],f=["data",u];if(C(c)){var d=s[u],h=d.type,p=i.traces[h].attributes;!(p.type={valType:"enumerated",values:[h]})===d.visible&&!1!==c.visible&&o.push(z("invisible",f)),I(c,d,p,o,f);var y=c.transforms,g=d.transforms;if(y){L(y)||o.push(z("array",f,["transforms"])),f.push("transforms");for(var v=0;v<y.length;v++){var m=["transforms",v],b=y[v].type;C(y[v])?((b=i.transforms[b]?i.transforms[b].attributes:{}).type={valType:"enumerated",values:Object.keys(i.transforms)},I(y[v],g[v],b,o,f,m)):o.push(z("object",f,m))}}}else o.push(z("object",f))}return I(r,a._fullLayout,function(e,t){for(var n=e.layout.layoutAttributes,r=0;r<t.length;r++){var i=t[r],o=e.traces[i.type],a=o.layoutAttributes;a&&(i.subplot?E.extendFlat(n[o.attributes.subplot.dflt],a):E.extendFlat(n,a))}return n}(i,s),o,"layout"),0===o.length?void 0:o};var l={object:function(e,t){t="layout"===e&&""===t?"The layout argument":"data"===e[0]&&""===t?"Trace "+e[1]+" in the data argument":i(e)+"key "+t;return t+" must be linked to an object container"},array:function(e,t){t="data"===e?"The data argument":i(e)+"key "+t;return t+" must be linked to an array container"},schema:function(e,t){return i(e)+"key "+t+" is not part of the schema"},unused:function(e,t,n){n=C(n)?"container":"key";return i(e)+n+" "+t+" did not get coerced"},dynamic:function(e,t,n,r){return[i(e)+"key",t,"(set to '"+n+"')","got reset to","'"+r+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?i(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,n){return[i(e)+"key "+t,"is set to an invalid value ("+n+")"].join(" ")}};function i(e){return L(e)?"In data trace "+e[1]+", ":"In "+e+", "}function z(e,t,n,r,i){var o;n=n||"";var a=L(t)?(o=t[0],t[1]):(o=t,null),s=function(e){if(!L(e))return String(e);for(var t="",n=0;n<e.length;n++){var r=e[n];"number"==typeof r?t=t.substr(0,t.length-1)+"["+r+"]":t+=r,n<e.length-1&&(t+=".")}return t}(n),i=l[e](t,s,r,i);return E.log(i),{code:e,container:o,trace:a,path:n,astr:s,msg:i}}var r=E.counterRegex("([a-z]+)");function D(e){e=e.match(r);return{keyMinusId:e&&e[1],id:e&&e[2]}}},{"../lib":779,"../plots/plots":876,"./plot_config":815,"./plot_schema":816}],822:[function(e,t,n){"use strict";t.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],823:[function(e,t,n){"use strict";var p=e("../lib"),y=e("../plot_api/plot_template");t.exports=function(e,t,n){var r,i=n.name,o=n.inclusionAttr||"visible",a=t[i],s=p.isArrayOrTypedArray(e[i])?e[i]:[],l=t[i]=[],u=y.arrayTemplater(t,i,o);for(h=0;h<s.length;h++){var c=s[h];p.isPlainObject(c)?r=u.newItem(c):(r=u.newItem({}))[o]=!1,r._index=h,!1!==r[o]&&n.handleItemDefaults(c,r,t,n),l.push(r)}var f=u.defaultItems();for(h=0;h<f.length;h++)(r=f[h])._index=l.length,n.handleItemDefaults({},r,t,n,{}),l.push(r);if(p.isArrayOrTypedArray(a))for(var d=Math.min(a.length,l.length),h=0;h<d;h++)p.relinkPrivateKeys(l[h],a[h]);return l}},{"../lib":779,"../plot_api/plot_template":817}],824:[function(e,t,n){"use strict";var r=e("./font_attributes"),e=e("../components/fx/attributes");t.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:r({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:e.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":678,"./font_attributes":859}],825:[function(e,t,n){"use strict";var _=e("fast-isnumeric"),r=e("../../lib"),w=r.dateTime2ms,M=r.incrementMonth,j=e("../../constants/numerical").ONEAVGMONTH;t.exports=function(e,t,n,r){if("date"!==t.type)return{vals:r};var i=e[n+"periodalignment"];if(!i)return{vals:r};var o,a=e[n+"period"];if(_(a)){if((a=+a)<=0)return{vals:r}}else if("string"==typeof a&&"M"===a.charAt(0)){var s=+a.substring(1);if(!(0<s&&Math.round(s)===s))return{vals:r};o=s}for(var l=t.calendar,u="start"===i,c="end"===i,n=e[n+"period0"],f=w(n,l)||0,d=[],h=[],p=[],y=r.length,g=0;g<y;g++){var v,m,b,x=r[g];if(o){for(v=Math.round((x-f)/(o*j)),b=M(f,o*v,l);x<b;)b=M(b,-o,l);for(;b<=x;)b=M(b,o,l);m=M(b,-o,l)}else{for(b=f+(v=Math.round((x-f)/a))*a;x<b;)b-=a;for(;b<=x;)b+=a;m=b-a}d[g]=u?m:c?b:(m+b)/2,h[g]=m,p[g]=b}return{vals:d,starts:h,ends:p}}},{"../../constants/numerical":758,"../../lib":779,"fast-isnumeric":574}],826:[function(e,t,n){"use strict";t.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],827:[function(e,t,n){"use strict";var h=e("@plotly/d3"),A=e("fast-isnumeric"),k=e("../../lib"),T=e("../../constants/numerical").FP_SAFE,o=e("../../registry"),p=e("../../components/drawing"),e=e("./axis_ids"),y=e.getFromId,s=e.isLinked;function a(e,t){var n,r=[],i=e._fullLayout,o=P(i,t,0),a=P(i,t,1),s=S(e,t),l=s.min,u=s.max;if(0===l.length||0===u.length)return k.simpleMap(t.range,t.r2l);for(var c=l[0].val,f=u[0].val,d=1;d<l.length&&c===f;d++)c=Math.min(c,l[d].val);for(d=1;d<u.length&&c===f;d++)f=Math.max(f,u[d].val);var h=!1;t.range&&(h=(x=k.simpleMap(t.range,t.r2l))[1]<x[0]),"reversed"===t.autorange&&(t.autorange=h=!0);var p,y,g,v,m,b,x,_=t.rangemode,i="tozero"===_,e="nonnegative"===_,w=t._length,M=w/10,j=0;for(d=0;d<l.length;d++)for(p=l[d],n=0;n<u.length;n++)0<(b=(y=u[n]).val-p.val-O(t,p.val,y.val))&&(M<(m=w-o(p)-a(y))?j<b/m&&(g=p,v=y,j=b/m):j<b/w&&(g={val:p.val,nopad:1},v={val:y.val,nopad:1},j=b/w));return r=c===f?(s=c-1,x=c+1,i?0===c?[0,1]:(_=(0<c?u:l).reduce(function(e,t){return Math.max(e,a(t))},0),_=c/(1-Math.min(.5,_/w)),0<c?[0,_]:[_,0]):e?[Math.max(0,s),Math.max(1,x)]:[s,x]):(i?(0<=g.val&&(g={val:0,nopad:1}),v.val<=0&&(v={val:0,nopad:1})):e&&(g.val-j*o(g)<0&&(g={val:0,nopad:1}),v.val<=0&&(v={val:1,nopad:1})),j=(v.val-g.val-O(t,p.val,y.val))/(w-o(g)-a(v)),[g.val-j*o(g),v.val+j*a(v)]),h&&r.reverse(),k.simpleMap(r,t.l2r||Number)}function O(e,t,n){var r=0;if(e.rangebreaks)for(var i=e.locateBreaks(t,n),o=0;o<i.length;o++){var a=i[o];r+=a.max-a.min}return r}function P(e,t,n){var r,i=.05*t._length,o=t._anchorAxis||{};-1===(t.ticklabelposition||"").indexOf("inside")&&-1===(o.ticklabelposition||"").indexOf("inside")||(r=!(r="reversed"===t.autorange)?(o=k.simpleMap(t.range,t.r2l))[1]<o[0]:r)&&(n=!n);var a=0;return s(e,t._id)||(a=function(e,t,n){var r,i=0,o="x"===t._id.charAt(0);for(r in e._plots){var a=e._plots[r];if(t._id===a.xaxis._id||t._id===a.yaxis._id){var s=(o?a.yaxis:a.xaxis)||{};if(-1!==(s.ticklabelposition||"").indexOf("inside")&&(!n&&("left"===s.side||"bottom"===s.side)||n&&("top"===s.side||"right"===s.side))){if(s._vals){var a=k.deg2rad(s._tickAngles[s._id+"tick"]||0),l=Math.abs(Math.cos(a)),u=Math.abs(Math.sin(a));s._vals[0].bb||(a=s._id+"tick",s._selections[a].each(function(e){var t=h.select(this);t.select(".text-math-group").empty()&&(e.bb=p.bBox(t.node()))}));for(var c=0;c<s._vals.length;c++){var f,d=s._vals[c].bb;d&&(f=2*g+d.width,d=2*g+d.height,i=Math.max(i,o?Math.max(f*l,d*u):Math.max(d*l,f*u)))}}"inside"===s.ticks&&"inside"===s.ticklabelposition&&(i+=s.ticklen||0)}}}return i}(e,t,n)),i=Math.max(a,i),"domain"===t.constrain&&t._inputDomain&&(i*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(e){return e.nopad?0:e.pad+(e.extrapad?i:a)}}t.exports={getAutoRange:a,makePadFn:P,doAutoRange:function(e,t,n){t.setScale(),t.autorange&&(t.range=n?n.slice():a(e,t),t._r=t.range.slice(),t._rl=k.simpleMap(t._r,t.r2l),i=t._input,(r={})[t._attr+".range"]=t.range,r[t._attr+".autorange"]=t.autorange,o.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,r),i.range=t.range.slice(),i.autorange=t.autorange);var r=t._anchorAxis;{var i;r&&r.rangeslider&&((i=r.rangeslider[t._name])&&"auto"===i.rangemode&&(i.range=a(e,t)),r._input.rangeslider[t._name]=k.extendFlat({},i))}},findExtremes:function(t,n,e){e=e||{};t._m||t.setScale();var r,i,o,a,s,l,u,c,f=[],d=[],h=n.length,p=e.padded||!1,y=e.tozero&&("linear"===t.type||"-"===t.type),g="log"===t.type,v=!1,m=e.vpadLinearized||!1;function b(t){if(Array.isArray(t))return v=!0,function(e){return Math.max(Number(t[e]||0),0)};var e=Math.max(Number(t||0),0);return function(){return e}}var x=b((0<t._m?e.ppadplus:e.ppadminus)||e.ppad||0),_=b((0<t._m?e.ppadminus:e.ppadplus)||e.ppad||0),w=b(e.vpadplus||e.vpad),M=b(e.vpadminus||e.vpad);if(!v){if(u=1/0,c=-1/0,g)for(r=0;r<h;r++)(i=n[r])<u&&0<i&&(u=i),c<i&&i<T&&(c=i);else for(r=0;r<h;r++)(i=n[r])<u&&-T<i&&(u=i),c<i&&i<T&&(c=i);n=[u,c],h=2}var j={tozero:y,extrapad:p};function k(e){a=n[e],A(a)&&(s=x(e),l=_(e),a=m?(o=t.c2l(a)-M(e),t.c2l(a)+w(e)):(u=a-M(e),c=a+w(e),g&&u<c/10&&(u=c/10),o=t.c2l(u),t.c2l(c)),y&&(o=Math.min(0,o),a=Math.max(0,a)),L(o)&&E(f,o,l,j),L(a)&&C(d,a,s,j))}var O=Math.min(6,h);for(r=0;r<O;r++)k(r);for(r=h-1;O<=r;r--)k(r);return{min:f,max:d,opts:e}},concatExtremes:S};var g=3;function S(e,t,n){var i,o,a=t._id,r=e._fullData,s=e._fullLayout,l=[],u=[];function c(e,t){for(i=0;i<t.length;i++){var n=e[t[i]],r=(n._extremes||{})[a];if(!0===n.visible&&r){for(p=0;p<r.min.length;p++)o=r.min[p],E(l,o.val,o.pad,{extrapad:o.extrapad});for(p=0;p<r.max.length;p++)o=r.max[p],C(u,o.val,o.pad,{extrapad:o.extrapad})}}}if(c(r,t._traceIndices),c(s.annotations||[],t._annIndices||[]),c(s.shapes||[],t._shapeIndices||[]),t._matchGroup&&!n)for(var f in t._matchGroup)if(f!==t._id){for(var f=y(e,f),d=S(e,f,!0),h=t._length/f._length,p=0;p<d.min.length;p++)o=d.min[p],E(l,o.val,o.pad*h,{extrapad:o.extrapad});for(p=0;p<d.max.length;p++)o=d.max[p],C(u,o.val,o.pad*h,{extrapad:o.extrapad})}return{min:l,max:u}}function E(e,t,n,r){i(e,t,n,r,l)}function C(e,t,n,r){i(e,t,n,r,u)}function i(e,t,n,r,i){for(var o=r.tozero,a=r.extrapad,s=!0,l=0;l<e.length&&s;l++){var u=e[l];if(i(u.val,t)&&u.pad>=n&&(u.extrapad||!a)){s=!1;break}i(t,u.val)&&u.pad<=n&&(a||!u.extrapad)&&(e.splice(l,1),l--)}s&&e.push({val:t,pad:(o=o&&0===t)?0:n,extrapad:!o&&a})}function L(e){return A(e)&&Math.abs(e)<T}function l(e,t){return e<=t}function u(e,t){return t<=e}},{"../../components/drawing":669,"../../constants/numerical":758,"../../lib":779,"../../registry":879,"./axis_ids":832,"@plotly/d3":3,"fast-isnumeric":574}],828:[function(e,t,n){"use strict";var w=e("@plotly/d3"),M=e("fast-isnumeric"),F=e("../../plots/plots"),B=e("../../registry"),U=e("../../lib"),c=U.strTranslate,f=e("../../lib/svg_text_utils"),q=e("../../components/titles"),H=e("../../components/color"),V=e("../../components/drawing"),x=e("./layout_attributes"),d=e("./clean_ticks"),r=e("../../constants/numerical"),j=r.ONEMAXYEAR,k=r.ONEAVGYEAR,O=r.ONEMINYEAR,A=r.ONEMAXQUARTER,T=r.ONEAVGQUARTER,P=r.ONEMINQUARTER,S=r.ONEMAXMONTH,E=r.ONEAVGMONTH,C=r.ONEMINMONTH,L=r.ONEWEEK,R=r.ONEDAY,I=R/2,z=r.ONEHOUR,s=r.ONEMIN,l=r.ONESEC,v=r.MINUS_SIGN,D=r.BADNUM,a={K:"zeroline"},N={K:"gridline",L:"path"},G={K:"tick",L:"path"},W={K:"tick",L:"text"},r=e("../../constants/alignment"),_=r.MID_SHIFT,Y=r.CAP_SHIFT,X=r.LINE_SPACING,Z=r.OPPOSITE_SIDE,$=t.exports={};$.setConvert=e("./set_convert");var u=e("./axis_autotype"),t=e("./axis_ids"),o=t.idSort,K=t.isLinked;$.id2name=t.id2name,$.name2id=t.name2id,$.cleanId=t.cleanId,$.list=t.list,$.listIds=t.listIds,$.getFromId=t.getFromId,$.getFromTrace=t.getFromTrace;e=e("./autorange");$.getAutoRange=e.getAutoRange,$.findExtremes=e.findExtremes;var i=1e-4;function Q(e){var t=(e[1]-e[0])*i;return[e[0]-t,e[1]+t]}$.coerceRef=function(e,t,n,r,i,o){var a=r.charAt(r.length-1),n=n._fullLayout._subplots[a+"axis"],a=r+"ref",r={};return i=i||(n[0]||("string"==typeof o?o:o[0])),o=o||i,n=n.concat(n.map(function(e){return e+" domain"})),r[a]={valType:"enumerated",values:n.concat(o?"string"==typeof o?[o]:o:[]),dflt:i},U.coerce(e,t,r,a)},$.getRefType=function(e){return void 0===e?e:"paper"===e?"paper":"pixel"===e?"pixel":/( domain)$/.test(e)?"domain":"range"},$.coercePosition=function(e,t,n,r,i,o){var a,s;"range"!==$.getRefType(r)?(s=U.ensureNumber,a=n(i,o)):(a=n(i,o=(r=$.getFromId(t,r)).fraction2r(o)),s=r.cleanPos),e[i]=s(a)},$.cleanPosition=function(e,t,n){return("paper"===n||"pixel"===n?U.ensureNumber:$.getFromId(t,n).cleanPos)(e)},$.redrawComponents=function(c,f){f=f||$.listIds(c);var d=c._fullLayout;function e(e,t,n,r){for(var i=B.getComponentMethod(e,t),o={},a=0;a<f.length;a++)for(var s=d[$.id2name(f[a])][n],l=0;l<s.length;l++){var u=s[l];if(!o[u]&&(i(c,u),o[u]=1,r))return}}e("annotations","drawOne","_annIndices"),e("shapes","drawOne","_shapeIndices"),e("images","draw","_imgIndices",!0)};var h=$.getDataConversions=function(e,t,n,r){var i,n="x"===n||"y"===n||"z"===n?n:r;if(Array.isArray(n)){if(i={type:u(r,void 0,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]},$.setConvert(i),"category"===i.type)for(var o=0;o<r.length;o++)i.d2c(r[o])}else i=$.getFromTrace(e,t,n);return i?{d2c:i.d2c,c2d:i.c2d}:"ids"===n?{d2c:y,c2d:y}:{d2c:p,c2d:p}};function p(e){return+e}function y(e){return String(e)}function g(e){return+e.substring(1)}$.getDataToCoordFunc=function(e,t,n,r){return h(e,t,n,r).d2c},$.counterLetter=function(e){e=e.charAt(0);return"x"===e?"y":"y"===e?"x":void 0},$.minDtick=function(e,t,n,r){-1===["log","category","multicategory"].indexOf(e.type)&&r?void 0===e._minDtick?(e._minDtick=t,e._forceTick0=n):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((n-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=n):(2e-6<(t/e._minDtick+1e-6)%1||2e-6<((n-e._forceTick0)/e._minDtick%1+1.000001)%1)&&(e._minDtick=0)):e._minDtick=0},$.saveRangeInitial=function(e,t){for(var n=$.list(e,"",!0),r=!1,i=0;i<n.length;i++){var o=n[i],a=void 0===o._rangeInitial,s=a||!(o.range[0]===o._rangeInitial[0]&&o.range[1]===o._rangeInitial[1]);(a&&!1===o.autorange||t&&s)&&(o._rangeInitial=o.range.slice(),r=!0)}return r},$.saveShowSpikeInitial=function(e,t){for(var n=$.list(e,"",!0),r=!1,i="on",o=0;o<n.length;o++){var a=n[o],s=void 0===a._showSpikeInitial,l=s||!(a.showspikes===a._showspikes);(s||t&&l)&&(a._showSpikeInitial=a.showspikes,r=!0),"on"!==i||a.showspikes||(i="off")}return e._fullLayout._cartesianSpikesEnabled=i,r},$.autoBin=function(e,t,n,r,i,o){var a,s=U.aggNums(Math.min,null,e),l=U.aggNums(Math.max,null,e);if("category"===t.type||"multicategory"===t.type)return{start:s-.5,end:l+.5,size:Math.max(1,Math.round(o)||1),_dataSpan:l-s};i=i||t.calendar,a="log"===t.type?{type:"linear",range:[s,l]}:{type:t.type,range:U.simpleMap([s,l],t.c2r,0,i),calendar:i},$.setConvert(a),(o=o&&d.dtick(o,a.type))?(a.dtick=o,a.tick0=d.tick0(void 0,a.type,i)):(n?f=(l-s)/n:(o=U.distinctVals(e),n=(n=Math.pow(10,Math.floor(Math.log(o.minDiff)/Math.LN10)))*U.roundUp(o.minDiff/n,[.9,1.9,4.9,9.9],!0),f=Math.max(n,2*U.stdev(e)/Math.pow(e.length,r?.25:.4)),M(f)||(f=1)),$.autoTicks(a,f));var u,c=a.dtick,f=$.tickIncrement($.tickFirst(a),c,"reverse",i);if("number"==typeof c)u=(f=function(t,e,n,r,i){var o=0,a=0,s=0,l=0;function u(e){return(1+100*(e-t)/n.dtick)%100<2}for(var c=0;c<e.length;c++)e[c]%1==0?s++:M(e[c])||l++,u(e[c])&&o++,u(e[c]+n.dtick/2)&&a++;var f=e.length-l;s===f&&"date"!==n.type?n.dtick<1?t=r-.5*n.dtick:(t-=.5)+n.dtick<r&&(t+=n.dtick):a<.1*f&&(.3*f<o||u(r)||u(i))&&(i=n.dtick/2,t+=t+i<r?i:-i);return t}(f,e,a,s,l))+(1+Math.floor((l-f)/c))*c;else for(u=f="M"===a.dtick.charAt(0)?function(e,t,n,r,i){t=U.findExactDates(t,i);if(.8<t.exactDays){i=Number(n.substr(1));.8<t.exactYears&&i%12==0?e=$.tickIncrement(e,"M6","reverse")+1.5*R:.8<t.exactMonths?e=$.tickIncrement(e,"M1","reverse")+15.5*R:e-=I;n=$.tickIncrement(e,n);if(n<=r)return n}return e}(f,e,c,s,i):f,0;u<=l;)u=$.tickIncrement(u,c,!1,i),0;return{start:t.c2r(f,0,i),end:t.c2r(u,0,i),size:c,_dataSpan:l-s}},$.prepTicks=function(e,t){var n,r=U.simpleMap(e.range,e.r2l,void 0,void 0,t);e._dtickInit=e.dtick,e._tick0Init=e.tick0,"auto"!==e.tickmode&&e.dtick||((t=e.nticks)||(t="category"===e.type||"multicategory"===e.type?(n=e.tickfont?U.bigFont(e.tickfont.size||12):15,e._length/n):(n="y"===e._id.charAt(0)?40:80,U.constrain(e._length/n,4,9)+1),"radialaxis"===e._name&&(t*=2)),"array"===e.tickmode&&(t*=100),e._roughDTick=Math.abs(r[1]-r[0])/t,$.autoTicks(e,e._roughDTick),0<e._minDtick&&e.dtick<2*e._minDtick&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))),"period"===e.ticklabelmode&&function(e){var t;function n(){return!(M(e.dtick)||"M"!==e.dtick.charAt(0))}var r=n(),i=$.getTickFormat(e);{var o;i&&(o=e._dtickInit!==e.dtick,/%[fLQsSMX]/.test(i)||(/%[HI]/.test(i)?(t=z,o&&!r&&e.dtick<z&&(e.dtick=z)):/%p/.test(i)?(t=I,o&&!r&&e.dtick<I&&(e.dtick=I)):/%[Aadejuwx]/.test(i)?(t=R,o&&!r&&e.dtick<R&&(e.dtick=R)):/%[UVW]/.test(i)?(t=L,o&&!r&&e.dtick<L&&(e.dtick=L)):/%[Bbm]/.test(i)?(t=E,o&&(r?g(e.dtick)<1:e.dtick<C)&&(e.dtick="M1")):/%[q]/.test(i)?(t=T,o&&(r?g(e.dtick)<3:e.dtick<P)&&(e.dtick="M3")):/%[Yy]/.test(i)&&(t=k,o&&(r?g(e.dtick)<12:e.dtick<O)&&(e.dtick="M12"))))}(r=n())&&e.tick0===e._dowTick0&&(e.tick0=e._rawTick0);e._definedDelta=t}(e),e.tick0||(e.tick0="date"===e.type?"2000-01-01":0),"date"===e.type&&e.dtick<.1&&(e.dtick=.1),oe(e)},$.calcTicks=function(e,t){$.prepTicks(e,t);var n=U.simpleMap(e.range,e.r2l,void 0,void 0,t);if("array"===e.tickmode)return function(t){var e=t.tickvals,n=t.ticktext,r=new Array(e.length),i=Q(U.simpleMap(t.range,t.r2l)),o=Math.min(i[0],i[1]),a=Math.max(i[0],i[1]),s=0;Array.isArray(n)||(n=[]);var l="category"===t.type?t.d2l_noadd:t.d2l;"log"===t.type&&"L"!==String(t.dtick).charAt(0)&&(t.dtick="L"+Math.pow(10,Math.floor(Math.min(t.range[0],t.range[1]))-1));for(var u=0;u<e.length;u++){var c=l(e[u]);o<c&&c<a&&(void 0===n[u]?r[s]=$.tickText(t,c):r[s]=ae(t,c,String(n[u])),s++)}s<e.length&&r.splice(s,e.length-s);t.rangebreaks&&(r=r.filter(function(e){return t.maskBreaks(e.x)!==D}));return r}(e);var r=Q(n),i=r[0],o=r[1],a=n[1]<n[0],s=Math.min(n[0],n[1]),l=Math.max(n[0],n[1]),u="log"===e.type&&!(M(e.dtick)||"L"===e.dtick.charAt(0)),r="period"===e.ticklabelmode;if(e._tmin=$.tickFirst(e,t),e._tmin<i!=a)return[];"category"!==e.type&&"multicategory"!==e.type||(o=a?Math.max(-.5,o):Math.min(e._categories.length-.5,o));var c=e._tmin;e.rangebreaks&&e._tick0Init!==e.tick0&&(c=_e(c,e),a||(c=$.tickIncrement(c,e.dtick,!a,e.calendar))),r&&(c=$.tickIncrement(c,e.dtick,!a,e.calendar));for(var f=Math.max(1e3,e._length||0),d=[],h=null;a?o<=c:c<=o;c=$.tickIncrement(c,e.dtick,a,e.calendar)){if(e.rangebreaks&&!a){if(c<i)continue;if(e.maskBreaks(c)===D&&_e(c,e)>=l)break}if(d.length>f||c===h)break;var h=c,p=u&&c!==(0|c)?!0:!1;d.push({minor:p,value:c})}if(r&&function(e,t,n){for(var r=0;r<e.length;r++){var i,o=e[r].value,a=r,s=r+1,s=r<e.length-1?(a=r)+1:0<r?(a=r-1,r):a=r,l=e[a].value,a=e[s].value,s=Math.abs(a-l),a=n||s,l=0;O<=a?l=O<=s&&s<=j?s:k:n===T&&P<=a?l=P<=s&&s<=A?s:T:C<=a?l=C<=s&&s<=S?s:E:n===L&&L<=a?l=L:R<=a?l=R:n===I&&I<=a?l=I:n===z&&z<=a&&(l=z),s<=l&&(l=s,i=!0);var u=o+l;if(t.rangebreaks&&0<l){for(var c=0,f=0;f<84;f++){var d=(f+.5)/84;t.maskBreaks(o*(1-d)+d*u)!==D&&c++}(l*=c/84)||(e[r].drop=!0),i&&L<s&&(l=s)}(0<l||0===r)&&(e[r].periodX=o+l/2)}}(d,e,e._definedDelta),e.rangebreaks){var y="y"===e._id.charAt(0),g=1;"auto"===e.tickmode&&(g=e.tickfont?e.tickfont.size:12);for(var v,m=NaN,b=d.length-1;-1<b;b--)d[b].drop?d.splice(b,1):(d[b].value=_e(d[b].value,e),v=e.c2p(d[b].value),(y?v-g<m:m<v+g)?d.splice(a?b+1:b,1):m=v)}xe(e)&&360===Math.abs(n[1]-n[0])&&d.pop(),e._tmax=(d[d.length-1]||{}).value,e._prevDateHead="",e._inCalcTicks=!0;var x=[];for(b=0;b<d.length;b++){var _=d[b].minor,w=d[b].value,w=$.tickText(e,w,!1,_);void 0!==(_=d[b].periodX)&&(l<(w.periodX=_)||_<s)&&(l<_&&(w.periodX=l),_<s&&(w.periodX=s),w.text=" ",e._prevDateHead=""),x.push(w)}return e._inCalcTicks=!1,x};var m=[2,5,10],b=[1,2,3,6,12],J=[1,2,5,10,15,30],ee=[1,2,3,7,14],te=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],ne=[-.301,0,.301,.699,1],re=[15,30,45,90,180];function ie(e,t,n){return t*U.roundUp(e/t,n)}function oe(e){var t,n,r,i,o=e.dtick;e._tickexponent=0,M(o)||"string"==typeof o||(o=1),"category"!==e.type&&"multicategory"!==e.type||(e._tickround=null),"date"===e.type?(t=e.r2l(e.tick0),r=(n=e.l2r(t).replace(/(^-|i)/g,"")).length,"M"===String(o).charAt(0)?10<r||"01-01"!==n.substr(5)?e._tickround="d":e._tickround=+o.substr(1)%12==0?"y":"m":R<=o&&r<=10||15*R<=o?e._tickround="d":s<=o&&r<=16||z<=o?e._tickround="M":l<=o&&r<=19||s<=o?e._tickround="S":(i=e.l2r(t+o).replace(/^-/,"").length,e._tickround=Math.max(r,i)-20,e._tickround<0&&(e._tickround=4))):M(o)||"L"===o.charAt(0)?(i=e.range.map(e.r2d||Number),M(o)||(o=Number(o.substr(1))),e._tickround=2-Math.floor(Math.log(o)/Math.LN10+.01),o=Math.max(Math.abs(i[0]),Math.abs(i[1])),i=Math.floor(Math.log(o)/Math.LN10+.01),o=void 0===e.minexponent?3:e.minexponent,Math.abs(i)>o&&(le(e.exponentformat)&&!ue(i)?e._tickexponent=3*Math.round((i-1)/3):e._tickexponent=i)):e._tickround=null}function ae(e,t,n){e=e.tickfont||{};return{x:t,dx:0,dy:0,text:n||"",fontSize:e.size,font:e.family,fontColor:e.color}}$.autoTicks=function(e,t){var n,r,i;function o(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if("date"===e.type?(e.tick0=U.dateTick0(e.calendar,0),k<(i=2*t)?(t/=k,a=o(10),e.dtick="M"+12*ie(t,a,m)):E<i?(t/=E,e.dtick="M"+ie(t,1,b)):R<i?(e.dtick=ie(t,R,e._hasDayOfWeekBreaks?[1,2,7,14]:ee),n=$.getTickFormat(e),(r="period"===e.ticklabelmode)&&(e._rawTick0=e.tick0),/%[uVW]/.test(n)?e.tick0=U.dateTick0(e.calendar,2):e.tick0=U.dateTick0(e.calendar,1),r&&(e._dowTick0=e.tick0)):z<i?e.dtick=ie(t,z,b):s<i?e.dtick=ie(t,s,J):l<i?e.dtick=ie(t,l,J):(a=o(10),e.dtick=ie(t,a,m))):"log"===e.type?(e.tick0=0,r=U.simpleMap(e.range,e.r2l),.7<t?e.dtick=Math.ceil(t):Math.abs(r[1]-r[0])<1?(i=1.5*Math.abs((r[1]-r[0])/t),t=Math.abs(Math.pow(10,r[1])-Math.pow(10,r[0]))/i,a=o(10),e.dtick="L"+ie(t,a,m)):e.dtick=.3<t?"D2":"D1"):"category"===e.type||"multicategory"===e.type?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):xe(e)?(e.tick0=0,e.dtick=ie(t,a=1,re)):(e.tick0=0,a=o(10),e.dtick=ie(t,a,m)),0===e.dtick&&(e.dtick=1),!M(e.dtick)&&"string"!=typeof e.dtick){var a=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(a)}},$.tickIncrement=function(e,t,n,r){var i=n?-1:1;if(M(t))return U.increment(e,i*t);var o=t.charAt(0),a=i*Number(t.substr(1));if("M"===o)return U.incrementMonth(e,a,r);if("L"===o)return Math.log(Math.pow(10,e)+a)/Math.LN10;if("D"!==o)throw"unrecognized dtick "+String(t);t="D2"===t?ne:te,i=e+.01*i,n=U.roundUp(U.mod(i,1),t,n);return Math.floor(i)+Math.log(w.round(Math.pow(10,n),1))/Math.LN10},$.tickFirst=function(e,t){var n=e.r2l||Number,r=U.simpleMap(e.range,n,void 0,void 0,t),i=r[1]<r[0],t=i?Math.floor:Math.ceil,o=Q(r)[0],a=e.dtick,r=n(e.tick0);if(M(a)){n=t((o-r)/a)*a+r;return n="category"===e.type||"multicategory"===e.type?U.constrain(n,0,e._categories.length-1):n}var s=a.charAt(0),l=Number(a.substr(1));if("M"===s){for(var u,c,f=0,d=r;f<10;){if(((c=$.tickIncrement(d,a,i,e.calendar))-o)*(d-o)<=0)return i?Math.min(d,c):Math.max(d,c);u=(o-(d+c)/2)/(c-d),c=s+(Math.abs(Math.round(u))||1)*l,d=$.tickIncrement(d,c,u<0?!i:i,e.calendar),f++}return U.error("tickFirst did not converge",e),d}if("L"===s)return Math.log(t((Math.pow(10,o)-r)/l)*l+r)/Math.LN10;if("D"!==s)throw"unrecognized dtick "+String(a);r="D2"===a?ne:te,r=U.roundUp(U.mod(o,1),r,i);return Math.floor(o)+Math.log(w.round(Math.pow(10,r),1))/Math.LN10},$.tickText=function(n,r,i,e){var t=ae(n,r),o="array"===n.tickmode,a=i||o,s=n.type,l="category"===s?n.d2l_noadd:n.d2l;if(o&&Array.isArray(n.ticktext)){for(var u=U.simpleMap(n.range,n.r2l),c=(Math.abs(u[1]-u[0])-(n._lBreaks||0))/1e4,f=0;f<n.ticktext.length&&!(Math.abs(r-l(n.tickvals[f]))<c);f++);if(f<n.ticktext.length)return t.text=String(n.ticktext[f]),t}function d(e){if(void 0===e)return 1;if(i)return"none"===e;var t={first:n._tmin,last:n._tmax}[e];return"all"!==e&&r!==t}var h,p,y,g,u=i?"never":"none"!==n.exponentformat&&d(n.showexponent)?"hide":"";return"date"===s?function(e,t,n,r){var i=e._tickround,o=n&&e.hoverformat||$.getTickFormat(e);r&&(i=M(i)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[i]);var a,s=U.formatDate(t.x,o,i,e._dateFormat,e.calendar,e._extraFormat),o=s.indexOf("\n");-1!==o&&(a=s.substr(o+1),s=s.substr(0,o));r&&("00:00:00"===s||"00:00"===s?(s=a,a=""):8===s.length&&(s=s.replace(/:00$/,"")));a&&(n?"d"===i?s+=", "+a:s=a+(s?", "+s:""):e._inCalcTicks&&e._prevDateHead===a?(n=we(e),i=e._trueSide||e.side,(!n&&"top"===i||n&&"bottom"===i)&&(s+="<br> ")):(e._prevDateHead=a,s+="<br>"+a));t.text=s}(n,t,i,a):"log"===s?function(e,t,n,r){var i=e.dtick,o=t.x,a=e.tickformat,s="string"==typeof i&&i.charAt(0);"never"===r&&(r="");n&&"L"!==s&&(i="L3",s="L");if(a||"L"===s)t.text=ce(Math.pow(10,o),e,r,n);else if(M(i)||"D"===s&&U.mod(o+.01,1)<.1){a=Math.round(o),r=Math.abs(a),n=e.exponentformat;"power"===n||le(n)&&ue(a)?(t.text=0===a?1:1===a?"10":"10<sup>"+(1<a?"":v)+r+"</sup>",t.fontSize*=1.25):("e"===n||"E"===n)&&2<r?t.text="1"+n+(0<a?"+":v)+r:(t.text=ce(Math.pow(10,o),e,"","fakehover"),"D1"===i&&"y"===e._id.charAt(0)&&(t.dy-=t.fontSize/6))}else{if("D"!==s)throw"unrecognized dtick "+String(i);t.text=String(Math.round(Math.pow(10,U.mod(o,1)))),t.fontSize*=.75}"D1"===e.dtick&&("0"!==(i=String(t.text).charAt(0))&&"1"!==i||("y"===e._id.charAt(0)?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(o<0?.5:.25))))}(n,t,a,u):"category"===s?function(e,t){e=e._categories[Math.round(t.x)];void 0===e&&(e="");t.text=String(e)}(n,t):"multicategory"===s?(h=n,p=t,y=i,g=Math.round(p.x),h=h._categories[g]||[],g=void 0===h[1]?"":String(h[1]),h=void 0===h[0]?"":String(h[0]),y?p.text=h+" - "+g:(p.text=g,p.text2=h)):xe(n)?(s=t,y=i,g=a,p=u,"radians"!==(h=n).thetaunit||y?s.text=ce(s.x,h,p,g):0==(y=s.x/180)?s.text="0":100<=(y=function(e){function r(e,t){return Math.abs(e-t)<=1e-6}var t=function(e){for(var t=1;!r(Math.round(e*t)/t,e);)t*=10;return t}(e),n=e*t,e=Math.abs(function e(t,n){return r(n,0)?t:e(n,t%n)}(n,t));return[Math.round(n/e),Math.round(t/e)]}(y))[1]?s.text=ce(U.deg2rad(s.x),h,p,g):(g=s.x<0,1===y[1]?1===y[0]?s.text="π":s.text=y[0]+"π":s.text=["<sup>",y[0],"</sup>","⁄","<sub>",y[1],"</sub>","π"].join(""),g&&(s.text=v+s.text))):function(e,t,n,r){"never"===r?r="":"all"===e.showexponent&&Math.abs(t.x/e.dtick)<1e-6&&(r="hide");t.text=ce(t.x,e,r,n)}(n,t,a,u),e||(n.tickprefix&&!d(n.showtickprefix)&&(t.text=n.tickprefix+t.text),n.ticksuffix&&!d(n.showticksuffix)&&(t.text+=n.ticksuffix)),"boundaries"!==n.tickson&&!n.showdividers||(t.xbnd=[(e=function(e){var t=n.l2p(e);return 0<=t&&t<=n._length?e:null})(t.x-.5),e(t.x+n.dtick-.5)]),t},$.hoverLabelText=function(e,t,n){n&&(e=U.extendFlat({},e,{hoverformat:n}));var r=Array.isArray(t)?t[0]:t,t=Array.isArray(t)?t[1]:void 0;if(void 0!==t&&t!==r)return $.hoverLabelText(e,r,n)+" - "+$.hoverLabelText(e,t,n);n="log"===e.type&&r<=0,e=$.tickText(e,e.c2l(n?-r:r),"hover").text;return n?0===r?"0":v+e:e};var se=["f","p","n","μ","m","","k","M","G","T"];function le(e){return"SI"===e||"B"===e}function ue(e){return 14<e||e<-15}function ce(e,t,n,r){var i=e<0,o=t._tickround,a=n||t.exponentformat||"B",s=t._tickexponent,l=$.getTickFormat(t),n=t.separatethousands;if(r&&(oe(r={exponentformat:a,minexponent:t.minexponent,dtick:"none"===t.showexponent?t.dtick:M(e)&&Math.abs(e)||1,range:"none"===t.showexponent?t.range.map(t.r2d):[0,e||1]}),o=(Number(r._tickround)||0)+4,s=r._tickexponent,t.hoverformat&&(l=t.hoverformat)),l)return t._numFormat(l)(e).replace(/-/g,v);l=Math.pow(10,-o)/2;if("none"===a&&(s=0),(e=Math.abs(e))<l)i=!(e="0");else{if(e+=l,s&&(e*=Math.pow(10,-s),o+=s),0===o)e=String(Math.floor(e));else if(o<0){e=(e=String(Math.round(e))).substr(0,e.length+o);for(var u=o;u<0;u++)e+="0"}else{l=(e=String(e)).indexOf(".")+1;l&&(e=e.substr(0,l+o).replace(/\.?0+$/,""))}e=U.numSeparate(e,t._separators,n)}return s&&"hide"!==a&&(le(a)&&ue(s)&&(a="power"),n=s<0?v+-s:"power"!==a?"+"+s:String(s),"e"===a||"E"===a?e+=a+n:"power"===a?e+="×10<sup>"+n+"</sup>":"B"===a&&9===s?e+="B":le(a)&&(e+=se[s/3+5])),i?v+e:e}function fe(e){return void 0!==e.periodX?e.periodX:e.x}function de(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}function he(e){var t=e.title.font.size,n=(e.title.text.match(f.BR_TAG_ALL)||[]).length;return e.title.hasOwnProperty("standoff")?n?t*(Y+n*X):t*Y:n?t*(n+1)*X:t}function pe(e,t){t=e.l2p(t);return 1<t&&t<e._length-1}function ye(e){var t=w.select(e),e=t.select(".text-math-group");return e.empty()?t.select("text"):e}function ge(e){return e._id+".automargin"}function ve(e){return ge(e)+".mirror"}function me(e){return e._id+".rangeslider"}function be(e,t){for(var n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n])}function xe(e){return"angularaxis"===e._id}function _e(e,t){for(var n=t._rangebreaks.length,r=0;r<n;r++){var i=t._rangebreaks[r];if(e>=i.min&&e<i.max)return i.max}return e}function we(e){return-1!==(e.ticklabelposition||"").indexOf("inside")}function Me(e,t){we(e._anchorAxis||{})&&e._hideCounterAxisInsideTickLabels&&e._hideCounterAxisInsideTickLabels(t)}$.getTickFormat=function(e){var t,n,r,i,o,a,s,l,u,c,f,d;function h(e){return"string"!=typeof e?e:Number(e.replace("M",""))*E}function p(e,t){var n=["L","D"];if(typeof e!=typeof t)return"number"==typeof e?1:-1;if("number"==typeof e)return e-t;var r=n.indexOf(e.charAt(0)),n=n.indexOf(t.charAt(0));return r===n?Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,"")):r-n}if(e.tickformatstops&&0<e.tickformatstops.length)switch(e.type){case"date":case"linear":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&(u=e.dtick,c=r.dtickrange,d=void 0,d=(f=h)||function(e){return e},f=c[0],c=c[1],(!f&&"number"!=typeof f||d(f)<=d(u))&&(!c&&"number"!=typeof c||d(c)>=d(u)))){n=r;break}break;case"log":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&(i=e.dtick,o=r.dtickrange,l=s=a=void 0,a=null===o[0],s=null===o[1],l=0<=p(i,o[0]),o=p(i,o[1])<=0,(a||l)&&(s||o))){n=r;break}}return n?n.value:e.tickformat},$.getSubplots=function(e,t){e=e._fullLayout._subplots,e=e.cartesian.concat(e.gl2d||[]),e=t?$.findSubplotsWithAxis(e,t):e;return e.sort(function(e,t){e=e.substr(1).split("y"),t=t.substr(1).split("y");return e[0]===t[0]?+e[1]-+t[1]:+e[0]-+t[0]}),e},$.findSubplotsWithAxis=function(e,t){for(var n=new RegExp("x"===t._id.charAt(0)?"^"+t._id+"y":t._id+"$"),r=[],i=0;i<e.length;i++){var o=e[i];n.test(o)&&r.push(o)}return r},$.makeClipPaths=function(e){var t=e._fullLayout;if(!t._hasOnlyLargeSploms){for(var n,r={_offset:0,_length:t.width,_id:""},i={_offset:0,_length:t.height,_id:""},o=$.list(e,"x",!0),a=$.list(e,"y",!0),s=[],l=0;l<o.length;l++)for(s.push({x:o[l],y:i}),n=0;n<a.length;n++)0===l&&s.push({x:r,y:a[n]}),s.push({x:o[l],y:a[n]});e=t._clips.selectAll(".axesclip").data(s,function(e){return e.x._id+e.y._id});e.enter().append("clipPath").classed("axesclip",!0).attr("id",function(e){return"clip"+t._uid+e.x._id+e.y._id}).append("rect"),e.exit().remove(),e.each(function(e){w.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})}},$.draw=function(r,e,i){var o=r._fullLayout;"redraw"===e&&o._paper.selectAll("g.subplot").each(function(e){var t=e[0],n=o._plots[t];n&&(e=n.xaxis,t=n.yaxis,n.xaxislayer.selectAll("."+e._id+"tick").remove(),n.yaxislayer.selectAll("."+t._id+"tick").remove(),n.xaxislayer.selectAll("."+e._id+"tick2").remove(),n.yaxislayer.selectAll("."+t._id+"tick2").remove(),n.xaxislayer.selectAll("."+e._id+"divider").remove(),n.yaxislayer.selectAll("."+t._id+"divider").remove(),n.gridlayer&&n.gridlayer.selectAll("path").remove(),n.zerolinelayer&&n.zerolinelayer.selectAll("path").remove(),o._infolayer.select(".g-"+e._id+"title").remove(),o._infolayer.select(".g-"+t._id+"title").remove())});e=e&&"redraw"!==e?e:$.listIds(r);return U.syncOrAsync(e.map(function(n){return function(){if(n){var e=$.getFromId(r,n),t=$.drawOne(r,e,i);return e._r=e.range.slice(),e._rl=U.simpleMap(e._r,e.r2l),t}}}))},$.drawOne=function(c,f,e){e=e||{},f.setScale();var d=c._fullLayout,t=f._id,h=t.charAt(0),p=$.counterLetter(t),n=d._plots[f._mainSubplot];if(n){var o=n[h+"axislayer"],a=f._mainLinePosition,r=f._mainMirrorPosition,i=f._vals=$.calcTicks(f),s=[f.mirror,a,r].join("_");for(M=0;M<i.length;M++)i[M].axInfo=s;f._selections={},f._tickAngles&&(f._prevTickAngles=f._tickAngles),f._tickAngles={},f._depth=null;var l={};if(f.visible){var u,y=$.makeTransTickFn(f),g=$.makeTransTickLabelFn(f),v="inside"===f.ticks,m="outside"===f.ticks;u="boundaries"===f.tickson?(n=function(e){function t(e,t){null!==(t=e.xbnd[t])&&r.push(U.extendFlat({},e,{x:t}))}var n,r=[];if(e.length){for(n=0;n<e.length;n++)t(e[n],0);t(e[n-1],1)}return r}(i),E=$.clipEnds(f,n),v?E:n):(E=$.clipEnds(f,i),v&&"period"!==f.ticklabelmode?E:i);var b=f._gridVals=E,x=function(e,t){function n(e,t){null!==(t=e.xbnd[t])&&o.push(U.extendFlat({},e,{x:t}))}var r,i,o=[],a=t.length&&t[t.length-1].x<t[0].x;if(e.showdividers&&t.length){for(r=0;r<t.length;r++){var s=t[r];s.text2!==i&&n(s,a?1:0),i=s.text2}n(t[r-1],a?0:1)}return o}(f,i);if(!d._hasOnlyLargeSploms)for(var _=f._subplotsWith,w={},M=0;M<_.length;M++){var j,k=_[M],O=(j=d._plots[k])[p+"axis"],A=O._mainAxis._id;w[A]||(w[A]=1,A="x"===h?"M0,"+O._offset+"v"+O._length:"M"+O._offset+",0h"+O._length,$.drawGrid(c,f,{vals:b,counterAxis:O,layer:j.gridlayer.select("."+t),path:A,transFn:y}),$.drawZeroLine(c,f,{counterAxis:O,layer:j.zerolinelayer,path:A,transFn:y}))}var T=$.getTickSigns(f),P=[];if(f.ticks){var S,E=$.makeTickPath(f,a,T[2]),C=f._anchorAxis&&f.mirror&&!0!==f.mirror?E+(S=$.makeTickPath(f,r,T[3])):(S="",E);if(f.showdividers&&m&&"boundaries"===f.tickson){var L={};for(M=0;M<x.length;M++)L[x[M].x]=1;z=function(e){return L[e.x]?S:C}}else z=C;$.drawTicks(c,f,{vals:u,layer:o,path:z,transFn:y}),"allticks"===f.mirror&&(P=Object.keys(f._linepositions||{}))}for(M=0;M<P.length;M++){k=P[M],j=d._plots[k];var R=f._linepositions[k]||[],R=$.makeTickPath(f,R[0],T[0])+$.makeTickPath(f,R[1],T[1]);$.drawTicks(c,f,{vals:u,layer:j[h+"axislayer"],path:R,transFn:y})}var I,z=[];z.push(function(){return $.drawLabels(c,f,{vals:i,layer:o,plotinfo:j,transFn:g,labelFns:$.makeLabelFns(f,a)})}),"multicategory"===f.type?(I={x:2,y:10}[h],z.push(function(){var e={x:"height",y:"width"}[h],e=N()[e]+I+(f._tickAngles[t+"tick"]?f.tickfont.size*X:0);return $.drawLabels(c,f,{vals:function(e,t){for(var n,r=[],i={},o=0;o<t.length;o++){var a=t[o];i[a.text2]?i[a.text2].push(a.x):i[a.text2]=[a.x]}for(n in i)r.push(ae(e,U.interp(i[n],.5),n));return r}(f,i),layer:o,cls:t+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:y,labelFns:$.makeLabelFns(f,a+e*T[4])})}),z.push(function(){var e,t,n,r,i;f._depth=T[4]*(N("tick2")[f.side]-a),e=c,t=f,n={vals:x,layer:o,path:$.makeTickPath(f,a,T[4],f._depth),transFn:y},r=t._id+"divider",i=n.vals,(i=n.layer.selectAll("path."+r).data(i,de)).exit().remove(),i.enter().insert("path",":first-child").classed(r,1).classed("crisp",1).call(H.stroke,t.dividercolor).style("stroke-width",V.crispRound(e,t.dividerwidth,1)+"px"),i.attr("transform",n.transFn).attr("d",n.path)})):f.title.hasOwnProperty("standoff")&&z.push(function(){f._depth=T[4]*(N()[f.side]-a)});var D=B.getComponentMethod("rangeslider","isVisible")(f);return z.push(function(){var e,t,n,r,i,o,a=f.side.charAt(0),s=Z[f.side].charAt(0),l=$.getPxPosition(c,f),u=m?f.ticklen:0;(f.automargin||D)&&("multicategory"===f.type?o=N("tick2"):(o=N(),"x"===h&&"b"===a&&(f._depth=Math.max(0<o.width?o.bottom-l:0,u)))),f.automargin&&(n={x:0,y:0,r:0,l:0,t:0,b:0},r=[0,1],"x"===h?("b"===a?n[a]=f._depth:(n[a]=f._depth=Math.max(0<o.width?l-o.top:0,u),r.reverse()),0<o.width&&(0<(i=o.right-(f._offset+f._length))&&(n.xr=1,n.r=i),0<(i=f._offset-o.left)&&(n.xl=0,n.l=i))):("l"===a?n[a]=f._depth=Math.max(0<o.height?l-o.left:0,u):(n[a]=f._depth=Math.max(0<o.height?o.right-l:0,u),r.reverse()),0<o.height&&(0<(l=o.bottom-(f._offset+f._length))&&(n.yb=0,n.b=l),0<(o=f._offset-o.top)&&(n.yt=1,n.t=o))),n[p]="free"===f.anchor?f.position:f._anchorAxis.domain[r[0]],f.title.text!==d._dfltTitle[h]&&(n[a]+=he(f)+(f.title.standoff||0)),f.mirror&&"free"!==f.anchor&&((e={x:0,y:0,r:0,l:0,t:0,b:0})[s]=f.linewidth,f.mirror&&!0!==f.mirror&&(e[s]+=u),!0===f.mirror||"ticks"===f.mirror?e[p]=f._anchorAxis.domain[r[1]]:"all"!==f.mirror&&"allticks"!==f.mirror||(e[p]=[f._counterDomainMin,f._counterDomainMax][r[1]]))),D&&(t=B.getComponentMethod("rangeslider","autoMarginOpts")(c,f)),F.autoMargin(c,ge(f),n),F.autoMargin(c,ve(f),e),F.autoMargin(c,me(f),t)}),e.skipTitle||D&&"bottom"===f.side||z.push(function(){return function(e,t){var n=e._fullLayout,r=t._id,i=r.charAt(0),o=t.title.font.size;{var a,s;t.title.hasOwnProperty("standoff")?d=t._depth+t.title.standoff+he(t):(a=we(t),d="multicategory"===t.type?t._depth:(s=1.5*o,a&&(s=.5*o,"outside"===t.ticks&&(s+=t.ticklen)),10+s+(t.linewidth?t.linewidth-1:0)),a||(d+="x"===i?"top"===t.side?o*(t.showticklabels?1:0):o*(t.showticklabels?1.5:.5):"right"===t.side?o*(t.showticklabels?1:.5):o*(t.showticklabels?.5:0)))}var l,u,c,f,o=$.getPxPosition(e,t);"x"===i?(u=t._offset+t._length/2,c="top"===t.side?o-d:o+d):(c=t._offset+t._length/2,u="right"===t.side?o+d:o-d,l={rotate:"-90",offset:0});{var d;"multicategory"!==t.type&&(d=t._selections[t._id+"tick"],f={selection:d,side:t.side},d&&d.node()&&d.node().parentNode&&(d=V.getTranslate(d.node().parentNode),f.offsetLeft=d.x,f.offsetTop=d.y),t.title.hasOwnProperty("standoff")&&(f.pad=0))}return q.draw(e,r+"title",{propContainer:t,propName:t._name+".title.text",placeholder:n._dfltTitle[i],avoid:f,transform:l,attributes:{x:u,y:c,"text-anchor":"middle"}})}(c,f)}),U.syncOrAsync(z)}}function N(e){e=t+(e||"tick");return l[e]||(l[e]=function(e,t){var n,r,i,o;e._selections[t].size()?(i=n=1/0,o=r=-1/0,e._selections[t].each(function(){var e=ye(this),e=V.bBox(e.node().parentNode);n=Math.min(n,e.top),r=Math.max(r,e.bottom),i=Math.min(i,e.left),o=Math.max(o,e.right)})):o=i=r=n=0;return{top:n,bottom:r,left:i,right:o,height:r-n,width:o-i}}(f,e)),l[e]}},$.getTickSigns=function(e){var t=e._id.charAt(0),n=e.side==={x:"top",y:"right"}[t]?1:-1,n=[-1,1,n,-n];return"inside"!==e.ticks==("x"===t)&&(n=n.map(function(e){return-e})),e.side&&n.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)]),n},$.makeTransTickFn=function(t){return"x"===t._id.charAt(0)?function(e){return c(t._offset+t.l2p(e.x),0)}:function(e){return c(0,t._offset+t.l2p(e.x))}},$.makeTransTickLabelFn=function(t){var e=function(e){function t(e){return-1!==n.indexOf(e)}var n=e.ticklabelposition||"",r=t("top"),i=t("left"),o=t("right"),a=t("bottom"),s=t("inside"),l=a||i||r||o;if(!l&&!s)return[0,0];var u=e.side,c=l?(e.tickwidth||0)/2:0,f=3,d=e.tickfont?e.tickfont.size:12;(a||r)&&(c+=d*Y,f+=(e.linewidth||0)/2);(i||o)&&(c+=(e.linewidth||0)/2,f+=3);s&&"top"===u&&(f-=d*(1-Y));(i||r)&&(c=-c);"bottom"!==u&&"right"!==u||(f=-f);return[l?c:0,s?f:0]}(t),n=e[0],r=e[1];return"x"===t._id.charAt(0)?function(e){return c(n+t._offset+t.l2p(fe(e)),r)}:function(e){return c(r,n+t._offset+t.l2p(fe(e)))}},$.makeTickPath=function(e,t,n,r){r=void 0!==r?r:e.ticklen;var i=e._id.charAt(0),e=(e.linewidth||1)/2;return"x"===i?"M0,"+(t+e*n)+"v"+r*n:"M"+(t+e*n)+",0h"+r*n},$.makeLabelFns=function(r,t,e){function n(e){return-1!==i.indexOf(e)}var i=r.ticklabelposition||"",o=n("top"),a=n("left"),s=n("right"),l=n("bottom")||a||o||s,u=n("inside"),c="inside"===i&&"inside"===r.ticks||!u&&"outside"===r.ticks&&"boundaries"!==r.tickson,f=0,d=0,o=c?r.ticklen:0;u?o*=-1:l&&(o=0),c&&(f+=o,e&&(b=U.deg2rad(e),f=o*Math.cos(b)+1,d=o*Math.sin(b))),r.showticklabels&&(c||r.showline)&&(f+=.2*r.tickfont.size);var h,p,y,g,v,e={labelStandoff:f+=(r.linewidth||1)/2*(u?-1:1),labelShift:d},m=0,o=r.side,b=r._id.charAt(0),c=r.tickangle;return"x"===b?(v=(g=!u&&"bottom"===o||u&&"top"===o)?1:-1,u&&(v*=-1),h=d*v,p=t+f*v,y=g?1:-.2,90===Math.abs(c)&&(u?y+=_:y=-90===c&&"bottom"===o?Y:90===c&&"top"===o?_:.5,m=_/2*(c/90)),e.xFn=function(e){return e.dx+h+m*e.fontSize},e.yFn=function(e){return e.dy+p+e.fontSize*y},e.anchorFn=function(e,t){if(l){if(a)return"end";if(s)return"start"}return M(t)&&0!==t&&180!==t?t*v<0!==u?"end":"start":"middle"},e.heightFn=function(e,t,n){return t<-60||60<t?-.5*n:"top"===r.side!==u?-n:0}):"y"===b&&(v=(g=!u&&"left"===o||u&&"right"===o)?1:-1,u&&(v*=-1),h=f,p=d*v,y=0,u||90!==Math.abs(c)||(y=-90===c&&"left"===o||90===c&&"right"===o?Y:.5),!u||0!=(c=M(c)?+c:0)&&(c=U.deg2rad(c),m=Math.abs(Math.sin(c))*Y*v,y=0),e.xFn=function(e){return e.dx+t-(h+e.fontSize*y)*v+m*e.fontSize},e.yFn=function(e){return e.dy+p+e.fontSize*_},e.anchorFn=function(e,t){return M(t)&&90===Math.abs(t)?"middle":g?"end":"start"},e.heightFn=function(e,t,n){return"right"===r.side&&(t*=-1),t<-30?-n:t<30?-.5*n:0}),e},$.drawTicks=function(e,t,n){var r=t._id+"tick",i=(n=n||{}).vals;"period"===t.ticklabelmode&&(i=i.slice()).shift();i=n.layer.selectAll("path."+r).data(t.ticks?i:[],de);i.exit().remove(),i.enter().append("path").classed(r,1).classed("ticks",1).classed("crisp",!1!==n.crisp).call(H.stroke,t.tickcolor).style("stroke-width",V.crispRound(e,t.tickwidth,1)+"px").attr("d",n.path).style("display",null),Me(t,[G]),i.attr("transform",n.transFn)},$.drawGrid=function(e,t,n){var r=t._id+"grid",i=(n=n||{}).vals,o=n.counterAxis;if(!1===t.showgrid)i=[];else if(o&&$.shouldShowZeroLine(e,t,o))for(var a="array"===t.tickmode,s=0;s<i.length;s++){var l=i[s].x;if(a?!l:Math.abs(l)<t.dtick/100){if(i=i.slice(0,s).concat(i.slice(s+1)),!a)break;s--}}o=n.layer.selectAll("path."+r).data(i,de);o.exit().remove(),o.enter().append("path").classed(r,1).classed("crisp",!1!==n.crisp),t._gw=V.crispRound(e,t.gridwidth,1),o.attr("transform",n.transFn).attr("d",n.path).call(H.stroke,t.gridcolor||"#ddd").style("stroke-width",t._gw+"px").style("display",null),Me(t,[N]),"function"==typeof n.path&&o.attr("d",n.path)},$.drawZeroLine=function(e,t,n){var r=t._id+"zl",i=$.shouldShowZeroLine(e,t,n.counterAxis),i=n.layer.selectAll("path."+r).data(i?[{x:0,id:t._id}]:[]);i.exit().remove(),i.enter().append("path").classed(r,1).classed("zl",1).classed("crisp",!1!==n.crisp).each(function(){n.layer.selectAll("path").sort(function(e,t){return o(e.id,t.id)})}),i.attr("transform",n.transFn).attr("d",n.path).call(H.stroke,t.zerolinecolor||H.defaultLine).style("stroke-width",V.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null),Me(t,[a])},$.drawLabels=function(d,p,y){y=y||{};var h=d._fullLayout,e=p._id,g=e.charAt(0),t=y.cls||e+"tick",v=y.vals,u=y.labelFns,m=y.secondary?0:p.tickangle,n=(p._prevTickAngles||{})[t],b=y.layer.selectAll("g."+t).data(p.showticklabels?v:[],de),r=[];function x(e,l){e.each(function(e){var t,n=w.select(this),r=n.select(".text-math-group"),i=u.anchorFn(e,l),o=y.transFn.call(n.node(),e)+(M(l)&&0!=+l?" rotate("+l+","+u.xFn(e)+","+(u.yFn(e)-e.fontSize/2)+")":""),a=f.lineCount(n),s=X*e.fontSize,s=u.heightFn(e,M(l)?+l:0,(a-1)*s);s&&(o+=c(0,s)),r.empty()?((t=n.select("text")).attr({transform:o,"text-anchor":i}),t.style("opacity",1),p._adjustTickLabelsOverflow&&p._adjustTickLabelsOverflow()):(t=V.bBox(r.node()).width,r.attr("transform",o+c(t*{end:-.5,start:.5}[i],0)))})}b.enter().append("g").classed(t,1).append("text").attr("text-anchor","middle").each(function(e){var t=w.select(this),n=d._promises.length;t.call(f.positionText,u.xFn(e),u.yFn(e)).call(V.font,e.font,e.fontSize,e.fontColor).text(e.text).call(f.convertToTspans,d),d._promises[n]?r.push(d._promises.pop().then(function(){x(t,m)})):x(t,m)}),Me(p,[W]),b.exit().remove(),y.repositionOnUpdate&&b.each(function(e){w.select(this).select("text").call(f.positionText,u.xFn(e),u.yFn(e))}),p._adjustTickLabelsOverflow=function(){var e=p.ticklabeloverflow;if(e&&"allow"!==e){var i=-1!==e.indexOf("hide"),o="x"===p._id.charAt(0),t=0,n=o?d._fullLayout.width:d._fullLayout.height;-1!==e.indexOf("domain")&&(e=U.simpleMap(p.range,p.r2l),t=p.l2p(e[0])+p._offset,n=p.l2p(e[1])+p._offset);var r,a=Math.min(t,n),s=Math.max(t,n),l=p.side,u=1/0,c=-1/0;for(r in b.each(function(e){var t,n,r=w.select(this);r.select(".text-math-group").empty()&&(t=V.bBox(r.node()),n=0,o?(t.right>s||t.left<a)&&(n=1):(t.bottom>s||t.top+(p.tickangle?0:e.fontSize/4)<a)&&(n=1),r=r.select("text"),n?i&&r.style("opacity",0):(r.style("opacity",1),u="bottom"===l||"right"===l?Math.min(u,o?t.top:t.left):-1/0,c="top"===l||"left"===l?Math.max(c,o?t.bottom:t.right):1/0))}),h._plots){var f=h._plots[r];p._id!==f.xaxis._id&&p._id!==f.yaxis._id||(f=o?f.yaxis:f.xaxis)&&(f["_visibleLabelMin_"+p._id]=u,f["_visibleLabelMax_"+p._id]=c)}}},p._hideCounterAxisInsideTickLabels=function(e){var t,n="x"===p._id.charAt(0),r=[];for(t in h._plots){var i=h._plots[t];p._id!==i.xaxis._id&&p._id!==i.yaxis._id||r.push(n?i.yaxis:i.xaxis)}r.forEach(function(i,o){i&&we(i)&&(e||[a,N,G,W]).forEach(function(n){var r="tick"===n.K&&"text"===n.L&&"period"===p.ticklabelmode,e=h._plots[p._mainSubplot],e=n.K===a.K?e.zerolinelayer.selectAll("."+p._id+"zl"):n.K===N.K?e.gridlayer.selectAll("."+p._id):e[p._id.charAt(0)+"axislayer"];e.each(function(){var e=w.select(this);(e=n.L?e.selectAll(n.L):e).each(function(e){var t=p.l2p(r?fe(e):e.x)+p._offset,e=w.select(this);t<p["_visibleLabelMax_"+i._id]&&t>p["_visibleLabelMin_"+i._id]?e.style("display","none"):"tick"!==n.K||o||e.style("display",null)})})})})},x(b,n+1?n:m);var _=null;p._selections&&(p._selections[t]=b);var i=[function(){return r.length&&Promise.all(r)}];p.automargin&&h._redrawFromAutoMarginCount&&90===n?(_=90,i.push(function(){x(b,n)})):i.push(function(){if(x(b,m),v.length&&"x"===g&&!M(m)&&("log"!==p.type||"D"!==String(p.dtick).charAt(0))){var n=_=0,r=[];if(b.each(function(e){n=Math.max(n,e.fontSize);var t=p.l2p(e.x),e=ye(this),e=V.bBox(e.node());r.push({top:0,bottom:10,height:10,left:t-e.width/2,right:t+e.width/2+2,width:e.width+2})}),"boundaries"!==p.tickson&&!p.showdividers||y.secondary){for(var e=v.length,t=Math.abs((v[e-1].x-v[0].x)*p._m)/(e-1),i=p.ticklabelposition||"",o=function(e){return-1!==i.indexOf(e)},a=o("top"),s=o("left"),e=o("right"),l=o("bottom")||s||a||e?(p.tickwidth||0)+6:0,u=t<2.5*n||"multicategory"===p.type||"realaxis"===p._name,c=0;c<r.length-1;c++)if(U.bBoxIntersect(r[c],r[c+1],l)){_=u?90:30;break}}else{var f=2;for(p.ticks&&(f+=p.tickwidth/2),c=0;c<r.length;c++){var d=v[c].xbnd,h=r[c];if(null!==d[0]&&h.left-p.l2p(d[0])<f||null!==d[1]&&p.l2p(d[1])-h.right<f){_=90;break}}}_&&x(b,_)}}),p._tickAngles&&i.push(function(){p._tickAngles[t]=null===_?M(m)?m:0:_});e=p._anchorAxis;e&&e.autorange&&we(p)&&!K(h,p._id)&&(h._insideTickLabelsAutorange||(h._insideTickLabelsAutorange={}),h._insideTickLabelsAutorange[e._name+".autorange"]=e.autorange,i.push(function(){b.each(function(e,t){var n=ye(this);n.select(".text-math-group").empty()&&(p._vals[t].bb=V.bBox(n.node()))})}));i=U.syncOrAsync(i);return i&&i.then&&d._promises.push(i),i},$.getPxPosition=function(e,t){var n,r=e._fullLayout._size,i=t._id.charAt(0),e=t.side;return"free"!==t.anchor?n=t._anchorAxis:"x"===i?n={_offset:r.t+(1-(t.position||0))*r.h,_length:0}:"y"===i&&(n={_offset:r.l+(t.position||0)*r.w,_length:0}),"top"===e||"left"===e?n._offset:"bottom"===e||"right"===e?n._offset+n._length:void 0},$.shouldShowZeroLine=function(e,t,n){var r=U.simpleMap(t.range,t.r2l);return r[0]*r[1]<=0&&t.zeroline&&("linear"===t.type||"-"===t.type)&&!(t.rangebreaks&&t.maskBreaks(0)===D)&&(pe(t,0)||!function(e,o,t,n){var r=t._mainAxis;if(r){var i=e._fullLayout,a=o._id.charAt(0),s=$.counterLetter(o._id),l=o._offset+(Math.abs(n[0])<Math.abs(n[1])==("x"===a)?0:o._length),i=i._plots[t._mainSubplot];if(!(i.mainplotinfo||i).overlays.length)return d(t);for(var u=$.list(e,s),c=0;c<u.length;c++){var f=u[c];if(f._mainAxis===r&&d(f))return!0}}function d(e){if(!e.showline||!e.linewidth)return!1;var t=Math.max((e.linewidth+o.zerolinewidth)/2,1);function n(e){return"number"==typeof e&&Math.abs(e-l)<t}if(n(e._mainLinePosition)||n(e._mainMirrorPosition))return!0;var r,i=e._linepositions||{};for(r in i)if(n(i[r][0])||n(i[r][1]))return!0}}(e,t,n,r)||function(e,t){for(var n=e._fullData,r=t._mainSubplot,i=t._id.charAt(0),o=0;o<n.length;o++){var a=n[o];if(!0===a.visible&&a.xaxis+a.yaxis===r){if(B.traceIs(a,"bar-like")&&a.orientation==={x:"h",y:"v"}[i])return!0;if(a.fill&&a.fill.charAt(a.fill.length-1)===i)return!0}}return!1}(e,t))},$.clipEnds=function(t,e){return e.filter(function(e){return pe(t,e.x)})},$.allowAutoMargin=function(e){for(var t=$.list(e,"",!0),n=0;n<t.length;n++){var r=t[n];r.automargin&&(F.allowAutoMargin(e,ge(r)),r.mirror&&F.allowAutoMargin(e,ve(r))),B.getComponentMethod("rangeslider","isVisible")(r)&&F.allowAutoMargin(e,me(r))}},$.swap=function(e,t){for(var n=function(e,t){var n,r,i,o=[];for(n=0;n<t.length;n++){var a=[],s=e._fullData[t[n]].xaxis,l=e._fullData[t[n]].yaxis;if(s&&l){for(r=0;r<o.length;r++)-1===o[r].x.indexOf(s)&&-1===o[r].y.indexOf(l)||a.push(r);if(a.length){var u=o[a[0]];if(1<a.length)for(r=1;r<a.length;r++)i=o[a[r]],be(u.x,i.x),be(u.y,i.y);be(u.x,[s]),be(u.y,[l])}else o.push({x:[s],y:[l]})}}return o}(e,t),r=0;r<n.length;r++)!function(e,t,n){var r,i,o=[],a=[],s=e.layout;for(r=0;r<t.length;r++)o.push($.getFromId(e,t[r]));for(r=0;r<n.length;r++)a.push($.getFromId(e,n[r]));var l=Object.keys(x),u=["anchor","domain","overlaying","position","side","tickangle","editType"],c=["linear","log"];for(r=0;r<l.length;r++){var f=l[r],d=o[0][f],h=a[0][f],p=!0,y=!1,g=!1;if("_"!==f.charAt(0)&&"function"!=typeof d&&-1===u.indexOf(f)){for(i=1;i<o.length&&p;i++){var v=o[i][f];"type"===f&&-1!==c.indexOf(d)&&-1!==c.indexOf(v)&&d!==v?y=!0:v!==d&&(p=!1)}for(i=1;i<a.length&&p;i++){var m=a[i][f];"type"===f&&-1!==c.indexOf(h)&&-1!==c.indexOf(m)&&h!==m?g=!0:a[i][f]!==h&&(p=!1)}p&&(y&&(s[o[0]._name].type="linear"),g&&(s[a[0]._name].type="linear"),function(e,t,n,r,i){var o,a=U.nestedProperty,s=a(e[n[0]._name],t).get(),l=a(e[r[0]._name],t).get();"title"===t&&(s&&s.text===i.x&&(s.text=i.y),l&&l.text===i.y&&(l.text=i.x));for(o=0;o<n.length;o++)a(e,n[o]._name+"."+t).set(l);for(o=0;o<r.length;o++)a(e,r[o]._name+"."+t).set(s)}(s,f,o,a,e._fullLayout._dfltTitle))}}for(r=0;r<e._fullLayout.annotations.length;r++){var b=e._fullLayout.annotations[r];-1!==t.indexOf(b.xref)&&-1!==n.indexOf(b.yref)&&U.swapAttrs(s.annotations[r],["?"])}}(e,n[r].x,n[r].y)}},{"../../components/color":647,"../../components/drawing":669,"../../components/titles":745,"../../constants/alignment":752,"../../constants/numerical":758,"../../lib":779,"../../lib/svg_text_utils":804,"../../plots/plots":876,"../../registry":879,"./autorange":827,"./axis_autotype":829,"./axis_ids":832,"./clean_ticks":834,"./layout_attributes":843,"./set_convert":850,"@plotly/d3":3,"fast-isnumeric":574}],829:[function(e,t,n){"use strict";var c=e("fast-isnumeric"),r=e("../../lib"),f=e("../../constants/numerical").BADNUM,l=r.isArrayOrTypedArray,d=r.isDateTime,h=r.cleanNumber,p=Math.round;function y(e){return Math.max(1,(e-1)/1e3)}t.exports=function(e,t,n){var r=e,i=n.noMultiCategory;if(l(r)&&!r.length)return"-";if(!i&&(l((e=r)[0])&&l(e[1])))return"multicategory";if(i&&Array.isArray(r[0])){for(var o=[],a=0;a<r.length;a++)if(l(r[a]))for(var s=0;s<r[a].length;s++)o.push(r[a][s]);r=o}if(function(e,t){for(var n=e.length,r=y(n),i=0,o=0,a={},s=0;s<n;s+=r){var l=p(s),u=e[l],l=String(u);a[l]||(a[l]=1,d(u,t)&&i++,c(u)&&o++)}return 2*o<i}(r,t))return"date";n="strict"!==n.autotypenumbers;return function(e,t){for(var n=e.length,r=y(n),i=0,o=0,a={},s=0;s<n;s+=r){var l=p(s),u=e[l],l=String(u);a[l]||(a[l]=1,"boolean"==(l=typeof u)?o++:(t?h(u)!==f:"number"==l)?i++:"string"==l&&o++)}return 2*i<o}(r,n)?"category":function(e,t){for(var n=e.length,r=0;r<n;r++)if(function(e,t){return t?c(e):"number"==typeof e}(e[r],t))return!0;return!1}(r,n)?"linear":"-"}},{"../../constants/numerical":758,"../../lib":779,"fast-isnumeric":574}],830:[function(e,t,n){"use strict";var c=e("fast-isnumeric"),g=e("../../registry"),v=e("../../lib"),m=e("../array_container_defaults"),b=e("./layout_attributes"),x=e("./tick_value_defaults"),_=e("./tick_mark_defaults"),w=e("./tick_label_defaults"),M=e("./prefix_suffix_defaults"),j=e("./category_order_defaults"),k=e("./line_grid_defaults"),O=e("./set_convert"),A=e("./constants").WEEKDAY_PATTERN,f=e("./constants").HOUR_PATTERN;function T(n,r,e){function t(e,t){return v.coerce(n,r,b.rangebreaks,e,t)}if(t("enabled")){var i=t("bounds");if(i&&2<=i.length){var o,a,s="";if(2===i.length)for(o=0;o<2;o++)if(a=d(i[o])){s=A;break}var l=t("pattern",s);if(l===A)for(o=0;o<2;o++)(a=d(i[o]))&&(r.bounds[o]=i[o]=a-1);if(l)for(o=0;o<2;o++)switch(a=i[o],l){case A:if(!c(a))return void(r.enabled=!1);if((a=+a)!==Math.floor(a)||a<0||7<=a)return void(r.enabled=!1);r.bounds[o]=i[o]=a;break;case f:if(!c(a))return void(r.enabled=!1);if((a=+a)<0||24<a)return void(r.enabled=!1);r.bounds[o]=i[o]=a}!1===e.autorange&&((u=e.range)[0]<u[1]?i[0]<u[0]&&i[1]>u[1]&&(r.enabled=!1):i[0]>u[0]&&i[1]<u[1]&&(r.enabled=!1))}else{var u=t("values");u&&u.length?t("dvalue"):r.enabled=!1}}}t.exports=function(e,t,n,r,i){var o=r.letter,a=r.font||{},s=r.splomStash||{},l=n("visible",!r.visibleDflt),u=t._template||{},c=t.type||u.type||"-";"date"===c&&(g.getComponentMethod("calendars","handleDefaults")(e,t,"calendar",r.calendar),r.noTicklabelmode||(f=n("ticklabelmode")));u="";r.noTicklabelposition&&"multicategory"!==c||(u=v.coerce(e,t,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===f?["outside","inside"]:"x"===o?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),r.noTicklabeloverflow||n("ticklabeloverflow",-1!==u.indexOf("inside")?"hide past domain":"category"===c||"multicategory"===c?"allow":"hide past div"),O(t,i);var f=!t.isValidRange(e.range);!n("autorange",f=f&&r.reverseDflt?"reversed":f)||"linear"!==c&&"-"!==c||n("rangemode"),n("range"),t.cleanRange(),j(e,t,n,r),"category"===c||r.noHover||n("hoverformat");u=n("color"),f=u!==b.color.dflt?u:a.color,o=s.label||i._dfltTitle[o];if(M(e,t,n,c,r),!l)return t;n("title.text",o),v.coerceFont(n,"title.font",{family:a.family,size:v.bigFont(a.size),color:f}),x(e,t,n,c),w(e,t,n,c,r),_(e,t,n,r),k(e,t,n,{dfltColor:u,bgColor:r.bgColor,showGrid:r.showGrid,attributes:b}),(t.showline||t.ticks)&&n("mirror"),r.automargin&&n("automargin");var d,u="multicategory"===c;if(r.noTickson||"category"!==c&&!u||!t.ticks&&!t.showgrid||"boundaries"===n("tickson",d=u?"boundaries":d)&&delete t.ticklabelposition,u&&n("showdividers")&&(n("dividercolor"),n("dividerwidth")),"date"===c)if(m(e,t,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:T}),t.rangebreaks.length){for(var h=0;h<t.rangebreaks.length;h++)if(t.rangebreaks[h].pattern===A){t._hasDayOfWeekBreaks=!0;break}if(O(t,i),i._has("scattergl")||i._has("splom"))for(var p=0;p<r.data.length;p++){var y=r.data[p];"scattergl"!==y.type&&"splom"!==y.type||(y.visible=!1,v.warn(y.type+" traces do not work on axes with rangebreaks. Setting trace "+y.index+" to `visible: false`."))}}else delete t.rangebreaks;return t};var r={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function d(e){if("string"==typeof e)return r[e.substr(0,3).toLowerCase()]}},{"../../lib":779,"../../registry":879,"../array_container_defaults":823,"./category_order_defaults":833,"./constants":835,"./layout_attributes":843,"./line_grid_defaults":845,"./prefix_suffix_defaults":847,"./set_convert":850,"./tick_label_defaults":852,"./tick_mark_defaults":853,"./tick_value_defaults":854,"fast-isnumeric":574}],831:[function(e,t,n){"use strict";var e=e("../../constants/docs"),r=e.FORMAT_LINK,i=e.DATE_FORMAT_LINK;function o(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+r+"."].join(" ")}function a(e,t){return o(e,t)+[" And for dates see: "+i+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}t.exports={axisHoverFormat:function(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?o:a)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:o,descriptionWithDates:a}},{"../../constants/docs":754}],832:[function(e,t,c){"use strict";var a=e("../../registry"),i=e("./constants");function n(e,t){if(t&&t.length)for(var n=0;n<t.length;n++)if(t[n][e])return!0;return!1}c.id2name=function(e){if("string"==typeof e&&e.match(i.AX_ID_PATTERN)){var t=e.split(" ")[0].substr(1);return"1"===t&&(t=""),e.charAt(0)+"axis"+t}},c.name2id=function(e){if(e.match(i.AX_NAME_PATTERN)){var t=e.substr(5);return"1"===t&&(t=""),e.charAt(0)+t}},c.cleanId=function(e,t,n){var r=/( domain)$/.test(e);if("string"==typeof e&&e.match(i.AX_ID_PATTERN)&&(!t||e.charAt(0)===t)&&(!r||n)){t=e.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===t&&(t=""),e.charAt(0)+t+(r&&n?" domain":"")}},c.list=function(e,t,n){var r=e._fullLayout;if(!r)return[];var i=c.listIds(e,t),o=new Array(i.length);for(l=0;l<i.length;l++){var a=i[l];o[l]=r[a.charAt(0)+"axis"+a.substr(1)]}if(!n)for(var s=r._subplots.gl3d||[],l=0;l<s.length;l++){var u=r[s[l]];t?o.push(u[t+"axis"]):o.push(u.xaxis,u.yaxis,u.zaxis)}return o},c.listIds=function(e,t){e=e._fullLayout;if(!e)return[];e=e._subplots;return t?e[t+"axis"]:e.xaxis.concat(e.yaxis)},c.getFromId=function(e,t,n){e=e._fullLayout;return t=void 0===t||"string"!=typeof t?t:t.replace(" domain",""),"x"===n?t=t.replace(/y[0-9]*/,""):"y"===n&&(t=t.replace(/x[0-9]*/,"")),e[c.id2name(t)]},c.getFromTrace=function(e,t,n){var r,i=e._fullLayout,o=null;return a.traceIs(t,"gl3d")?"scene"===(r=t.scene).substr(0,5)&&(o=i[r][n+"axis"]):o=c.getFromId(e,t[n+"axis"]||n),o},c.idSort=function(e,t){var n=e.charAt(0),r=t.charAt(0);return n!==r?r<n?1:-1:+(e.substr(1)||1)-+(t.substr(1)||1)},c.ref2id=function(e){return!!/^[xyz]/.test(e)&&e.split(" ")[0]},c.isLinked=function(e,t){return n(t,e._axisMatchGroups)||n(t,e._axisConstraintGroups)}},{"../../registry":879,"./constants":835}],833:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i,o;"category"===t.type&&(e=e.categoryarray,"array"===(i=n("categoryorder",i=(e=Array.isArray(e)&&0<e.length)?"array":i))&&(o=n("categoryarray")),"trace"===(i=!e&&"array"===i?t.categoryorder="trace":i)?t._initialCategories=[]:"array"===i?t._initialCategories=o.slice():(o=function(e,t){var n,r,i=t.dataAttr||e._id.charAt(0),o={};if(t.axData)n=t.axData;else for(n=[],r=0;r<t.data.length;r++){var a=t.data[r];a[i+"axis"]===e._id&&n.push(a)}for(r=0;r<n.length;r++)for(var s=n[r][i],l=0;l<s.length;l++){var u=s[l];null!=u&&(o[u]=1)}return Object.keys(o)}(t,r).sort(),"category ascending"===i?t._initialCategories=o:"category descending"===i&&(t._initialCategories=o.reverse())))}},{}],834:[function(e,t,n){"use strict";var a=e("fast-isnumeric"),i=e("../../lib"),e=e("../../constants/numerical"),s=e.ONEDAY,o=e.ONEWEEK;n.dtick=function(e,t){var n="log"===t,r="date"===t,i="category"===t,o=r?s:1;if(!e)return o;if(a(e))return(e=Number(e))<=0?o:i?Math.max(1,Math.round(e)):r?Math.max(.1,e):e;if("string"!=typeof e||!r&&!n)return o;var t=e.charAt(0),i=e.substr(1);return(i=a(i)?Number(i):0)<=0||!(r&&"M"===t&&i===Math.round(i)||n&&"L"===t||n&&"D"===t&&(1===i||2===i))?o:e},n.tick0=function(e,t,n,r){return"date"===t?i.cleanDate(e,i.dateTick0(n,r%o==0?1:0)):"D1"!==r&&"D2"!==r?a(e)?Number(e):0:void 0}},{"../../constants/numerical":758,"../../lib":779,"fast-isnumeric":574}],835:[function(e,t,n){"use strict";e=e("../../lib/regex").counter;t.exports={idRegex:{x:e("x","( domain)?"),y:e("y","( domain)?")},attrRegex:e("[xy]axis"),xAxisMatch:e("xaxis"),yAxisMatch:e("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":795}],836:[function(e,t,n){"use strict";var M=e("../../lib"),C=e("./autorange"),L=e("./axis_ids").id2name,j=e("./layout_attributes"),R=e("./scale_zoom"),k=e("./set_convert"),I=e("../../constants/numerical").ALMOST_EQUAL,i=e("../../constants/alignment").FROM_BL;function O(e,t){var n=t.domain;return(n=n||e[L(t.overlaying)].domain)[1]-n[0]}function A(e,t){for(var n=0;n<e.length;n++)if(e[n][t])return e[n];return null}function T(e,t,n,r){var i,o,a,s=A(e,t);null===s?((s={})[t]=1,a=e.length,e.push(s)):a=e.indexOf(s);for(var l=Object.keys(s),u=0;u<e.length;u++)if(i=e[u],u!==a&&i[n]){for(var c=i[n],f=0;f<l.length;f++)i[o=l[f]]=h(c,h(r,s[o]));return void e.splice(a,1)}if(1!==r)for(f=0;f<l.length;f++){var d=l[f];s[d]=h(r,s[d])}s[n]=1}function h(e,t){var n,r,i="",o="";"string"==typeof e&&(n=(i=e.match(/^[xy]*/)[0]).length,e=+e.substr(n)),"string"==typeof t&&(r=(o=t.match(/^[xy]*/)[0]).length,t=+t.substr(r));var a=e*t;return n||r?n&&r&&i.charAt(0)!==o.charAt(0)?n===r?a:(r<n?i.substr(r):o.substr(n))+a:i+o+e*t:a}function z(e,t){var n=e._inputDomain,r=i[e.constraintoward],r=n[0]+(n[1]-n[0])*r;e.domain=e._input.domain=[r+(n[0]-r)/t,r+(n[1]-r)/t],e.setScale()}n.handleDefaults=function(e,n,t){for(var r,i,o,a,s=t.axIds,l=t.axHasImage,u=n._axisConstraintGroups=[],c=n._axisMatchGroups=[],f=0;f<s.length;f++)!function(n,r,e){var t=e.axIds,i=e.layoutOut,o=e.hasImage,a=i._axisConstraintGroups,s=i._axisMatchGroups,l=r._id,u=l.charAt(0),e=((i._splomAxes||{})[u]||{})[l]||{},c=r._id,u="x"===c.charAt(0);function f(e,t){return M.coerce(n,r,j,e,t)}r._matchGroup=null,r._constraintGroup=null,f("constrain",o?"domain":"range"),M.coerce(n,r,{constraintoward:{valType:"enumerated",values:u?["left","center","right"]:["bottom","middle","top"],dflt:u?"center":"middle"}},"constraintoward");var d,h,p=r.type,y=[];for(d=0;d<t.length;d++)(h=t[d])!==c&&i[L(h)].type===p&&y.push(h);var g=A(a,c);if(g){var v=[];for(d=0;d<y.length;d++)h=y[d],g[h]||v.push(h);y=v}var m,b,l=y.length;l&&(n.matches||e.matches)&&(m=M.coerce(n,r,{matches:{valType:"enumerated",values:y,dflt:-1!==y.indexOf(e.matches)?e.matches:void 0}},"matches"));o=o&&!u?r.anchor:void 0;l&&!m&&(n.scaleanchor||o)&&(b=M.coerce(n,r,{scaleanchor:{valType:"enumerated",values:y}},"scaleanchor",o));m?(r._matchGroup=T(s,c,m,1),x=i[L(m)],x=O(i,r)/O(i,x),u!=("x"===m.charAt(0))&&(x=(u?"x":"y")+x),T(a,c,m,x)):n.matches&&-1!==t.indexOf(n.matches)&&M.warn("ignored "+r._name+'.matches: "'+n.matches+'" to avoid an infinite loop');{var x;b?(x=(x=f("scaleratio"))||(r.scaleratio=1),T(a,c,b,x)):n.scaleanchor&&-1!==t.indexOf(n.scaleanchor)&&M.warn("ignored "+r._name+'.scaleanchor: "'+n.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}}(o=e[i=L(s[f])],a=n[i],{axIds:s,layoutOut:n,hasImage:l[i]});function d(e,t){for(f=0;f<e.length;f++)for(r in m=e[f])n[L(r)][t]=m}for(d(c,"_matchGroup"),f=0;f<u.length;f++)for(r in m=u[f])if((a=n[L(r)]).fixedrange){for(var h in m){h=L(h);!1===(e[h]||{}).fixedrange&&M.warn("fixedrange was specified as false for axis "+h+" but was overridden because another axis in its constraint group has fixedrange true"),n[h].fixedrange=!0}break}for(f=0;f<u.length;){for(r in m=u[f]){(a=n[L(r)])._matchGroup&&Object.keys(a._matchGroup).length===Object.keys(m).length&&(u.splice(f,1),f--);break}f++}d(u,"_constraintGroup");var p=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],y=!1,g=!1;function v(){w=a[_],"rangebreaks"===_&&(g=a._hasDayOfWeekBreaks)}for(f=0;f<c.length;f++)for(var m=c[f],b=0;b<p.length;b++){var x,_=p[b],w=null;for(r in m)if(o=e[i=L(r)],a=n[i],_ in a){if(!a.matches&&(x=a,_ in o)){v();break}null===w&&_ in o&&v()}if("range"===_&&w&&(y=!0),null!==(w=null===(w="autorange"===_&&null===w&&y?!1:w)&&_ in x?x[_]:w))for(r in m)(a=n[L(r)])[_]="range"===_?w.slice():w,"rangebreaks"===_&&(a._hasDayOfWeekBreaks=g,k(a,n))}},n.enforce=function(e){for(var t,n,r,i,o=e._fullLayout,a=o._axisConstraintGroups||[],s=0;s<a.length;s++){for(var l=function(e,t){for(var n=(t=t._size).h/t.w,r={},i=Object.keys(e),o=0;o<i.length;o++){var a=i[o];if("string"==typeof(u=e[a]))for(var s=u.match(/^[xy]*/)[0],l=s.length,u=+u.substr(l),c="y"===s.charAt(0)?n:1/n,f=0;f<l;f++)u*=c;r[a]=u}return r}(a[s],o),u=Object.keys(l),c=1/0,f=0,d=1/0,h={},p={},y=!1,g=0;g<u.length;g++)p[t=u[g]]=n=o[L(t)],n._inputDomain?n.domain=n._inputDomain.slice():n._inputDomain=n.domain.slice(),n._inputRange||(n._inputRange=n.range.slice()),n.setScale(),h[t]=r=Math.abs(n._m)/l[t],c=Math.min(c,r),"domain"!==n.constrain&&n._constraintShrinkable||(d=Math.min(d,r)),delete n._constraintShrinkable,f=Math.max(f,r),"domain"===n.constrain&&(y=!0);if(!(I*f<c)||y)for(g=0;g<u.length;g++)if(r=h[t=u[g]],x=(n=p[t]).constrain,r!==d||"domain"===x)if(i=r/d,"range"===x)R(n,i);else{var v=n._inputDomain,m=(n.domain[1]-n.domain[0])/(v[1]-v[0]),b=(n.r2l(n.range[1])-n.r2l(n.range[0]))/(n.r2l(n._inputRange[1])-n.r2l(n._inputRange[0]));if((i/=m)*b<1)n.domain=n._input.domain=v.slice(),R(n,i);else{if(b<1&&(n.range=n._input.range=n._inputRange.slice(),i*=b),n.autorange){var x=n.r2l(n.range[0]),m=n.r2l(n.range[1]),v=(x+m)/2,_=v,w=v,b=Math.abs(m-v),M=v-b*i*1.0001,j=v+b*i*1.0001,k=C.makePadFn(o,n,0),O=C.makePadFn(o,n,1);z(n,i);for(var A,T=Math.abs(n._m),v=C.concatExtremes(e,n),P=v.min,S=v.max,E=0;E<P.length;E++)M<(A=P[E].val-k(P[E])/T)&&A<_&&(_=A);for(E=0;E<S.length;E++)(A=S[E].val+O(S[E])/T)<j&&w<A&&(w=A);i/=(w-_)/(2*b),_=n.l2r(_),w=n.l2r(w),n.range=n._input.range=x<m?[_,w]:[w,_]}z(n,i)}}}},n.getAxisGroup=function(e,t){for(var n=e._axisMatchGroups,r=0;r<n.length;r++)if(n[r][t])return"g"+r;return t},n.clean=function(e,t){if(t._inputDomain){for(var n=!1,r=t._id,i=e._fullLayout._axisConstraintGroups,o=0;o<i.length;o++)if(i[o][r]){n=!0;break}n&&"domain"===t.constrain||(t._input.domain=t.domain=t._inputDomain,delete t._inputDomain)}}},{"../../constants/alignment":752,"../../constants/numerical":758,"../../lib":779,"./autorange":827,"./axis_ids":832,"./layout_attributes":843,"./scale_zoom":848,"./set_convert":850}],837:[function(e,t,n){"use strict";var pe=e("@plotly/d3"),ye=e("../../lib"),ge=ye.numberFormat,ve=e("tinycolor2"),r=e("has-passive-events"),me=e("../../registry"),o=ye.strTranslate,be=e("../../lib/svg_text_utils"),i=e("../../components/color"),xe=e("../../components/drawing"),_e=e("../../components/fx"),we=e("./axes"),a=e("../../lib/setcursor"),Me=e("../../components/dragelement"),s=e("../../components/dragelement/helpers"),je=s.selectingOrDrawing,ke=s.freeMode,Oe=e("../../constants/alignment").FROM_TL,Ae=e("../../lib/clear_gl_canvases"),Te=e("../../plot_api/subroutines").redrawReglTraces,Pe=e("../plots"),Se=e("./axis_ids").getFromId,Ee=e("./select").prepSelect,Ce=e("./select").clearSelect,Le=e("./select").selectOnClick,Re=e("./scale_zoom"),Ie=e("./constants"),ze=Ie.MINDRAG,De=Ie.MINZOOM,l=!0;function u(t,e,n,r){n=ye.ensureSingle(t.draglayer,e,n,function(e){e.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id)});return n.call(a,r),n.node()}function Ne(e,t,n,r,i,o,a){n=u(e,"rect",t,n);return pe.select(n).call(xe.setRect,r,i,o,a),n}function Fe(e,t){for(var n=0;n<e.length;n++)if(!e[n].fixedrange)return t;return""}function Be(e,t,n,r,i){for(var o=0;o<e.length;o++){var a,s,l=e[o];l.fixedrange||(l.rangebreaks?(s=(a="y"===l._id.charAt(0))?1-n:n,r[l._name+".range[0]"]=l.l2r(l.p2l((a?1-t:t)*l._length)),r[l._name+".range[1]"]=l.l2r(l.p2l(s*l._length))):(a=l._rl[0],s=l._rl[1]-a,r[l._name+".range[0]"]=l.l2r(a+s*t),r[l._name+".range[1]"]=l.l2r(a+s*n)))}i&&i.length&&Be(i,i=(t+(1-n))/2,1-i,r,[])}function Ue(e,t){for(var n=0;n<e.length;n++){var r,i=e[n];i.fixedrange||(i.rangebreaks?(r=i._length,r=(i.p2l(0+t)-i.p2l(0)+(i.p2l(r+t)-i.p2l(r)))/2,i.range=[i.l2r(i._rl[0]-r),i.l2r(i._rl[1]-r)]):i.range=[i.l2r(i._rl[0]-t/i._m),i.l2r(i._rl[1]-t/i._m)])}}function qe(e,t,n,r,i){return e.append("path").attr("class","zoombox").style({fill:.2<t?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",o(n,r)).attr("d",i+"Z")}function He(e,t,n){return e.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("transform",o(t,n)).attr("d","M0,0Z")}function Ve(e,t,n,r,i,o){e.attr("d",r+"M"+n.l+","+n.t+"v"+n.h+"h"+n.w+"v-"+n.h+"h-"+n.w+"Z"),c(e,t,i,o)}function c(e,t,n,r){n||(e.transition().style("fill",.2<r?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function Ge(e){pe.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function We(e){l&&e.data&&e._context.showTips&&(ye.notifier(ye._(e,"Double-click to zoom back out"),"long"),l=!1)}function Ye(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,De)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function Xe(e,t,n,r,i){for(var o,a,s,l,u=!1,c={},f={},d=(i||{}).xaHash,h=(i||{}).yaHash,p=0;p<t.length;p++){var y=t[p];for(o in n)if(y[o]){for(s in y)i&&(d[s]||h[s])||("x"===s.charAt(0)?n:r)[s]||(c[s]=o);for(a in r)i&&(d[a]||h[a])||!y[a]||(u=!0)}for(a in r)if(y[a])for(l in y)i&&(d[l]||h[l])||("x"===l.charAt(0)?n:r)[l]||(f[l]=a)}u&&(ye.extendFlat(c,f),f={});var g={},v=[];for(s in c){var m=Se(e,s);v.push(m),g[m._id]=m}var b={},x=[];for(l in f){var _=Se(e,l);x.push(_),b[_._id]=_}return{xaHash:g,yaHash:b,xaxes:v,yaxes:x,xLinks:c,yLinks:f,isSubplotConstrained:u}}function Ze(e,t){var n;r?(n=void 0!==e.onwheel?"wheel":"mousewheel",e._onwheel&&e.removeEventListener(n,e._onwheel),e._onwheel=t,e.addEventListener(n,t,{passive:!1})):void 0!==e.onwheel?e.onwheel=t:void 0!==e.onmousewheel?e.onmousewheel=t:e.isAddedWheelEvent||(e.isAddedWheelEvent=!0,e.addEventListener("wheel",t,{passive:!1}))}function $e(e){var t,n=[];for(t in e)n.push(e[t]);return n}t.exports={makeDragBox:function(m,s,e,t,n,r,b,x){var _,w,M,j,l,u,o,a,c,f,d,k,O,A,h,T,P,S,E,C,p,y,g,v=m._fullLayout._zoomlayer,L=b+x==="nsew",R=1===(b+x).length;function I(){if(_=s.xaxis,w=s.yaxis,c=_._length,f=w._length,o=_._offset,a=w._offset,(M={})[_._id]=_,(j={})[w._id]=w,b&&x)for(var e=s.overlays,t=0;t<e.length;t++){var n=e[t].xaxis;M[n._id]=n;n=e[t].yaxis;j[n._id]=n}l=$e(M),u=$e(j),O=Fe(l,x),A=Fe(u,b),h=!A&&!O,k=Xe(m,m._fullLayout._axisMatchGroups,M,j);var r=(d=Xe(m,m._fullLayout._axisConstraintGroups,M,j,k)).isSubplotConstrained||k.isSubplotConstrained;T=x||r,P=b||r;r=m._fullLayout;S=r._has("scattergl"),E=r._has("splom"),C=r._has("svg")}I();var i,z,D=(i=A+O,D=m._fullLayout.dragmode,z=L,i?"nsew"!==i?i.toLowerCase()+"-resize":z?"":"pan"===D?"move":"crosshair":"pointer"),N=Ne(s,b+x+"drag",D,e,t,n,r);if(h&&!L)return N.onmousedown=null,N.style.pointerEvents="none",N;var F,B,U,q,H,V,G,W,Y,X,Z={element:N,gd:m,plotinfo:s};function $(){Z.plotinfo.selection=!1,Ce(m)}function K(e,t){var n,r,i,o,a=Z.gd;0<=a._fullLayout._activeShapeIndex?a._fullLayout._deactivateShape(a):(o=a._fullLayout.clickmode,Ge(a),2!==e||R||function(){if(!m._transitioningWithDuration){var e=m._context.doubleClick,t=[];O&&(t=t.concat(l)),A&&(t=t.concat(u)),k.xaxes&&(t=t.concat(k.xaxes)),k.yaxes&&(t=t.concat(k.yaxes));var n,r,i,o={};if("reset+autosize"===e)for(e="autosize",r=0;r<t.length;r++)if((n=t[r])._rangeInitial&&(n.range[0]!==n._rangeInitial[0]||n.range[1]!==n._rangeInitial[1])||!n._rangeInitial&&!n.autorange){e="reset";break}if("autosize"===e)for(r=0;r<t.length;r++)(n=t[r]).fixedrange||(o[n._name+".autorange"]=!0);else if("reset"===e)for((O||d.isSubplotConstrained)&&(t=t.concat(d.xaxes)),A&&!d.isSubplotConstrained&&(t=t.concat(d.yaxes)),d.isSubplotConstrained&&(O?A||(t=t.concat(u)):t=t.concat(l)),r=0;r<t.length;r++)(n=t[r]).fixedrange||(n._rangeInitial?(i=n._rangeInitial,o[n._name+".range[0]"]=i[0],o[n._name+".range[1]"]=i[1]):o[n._name+".autorange"]=!0);m.emit("plotly_doubleclick",null),me.call("_guiRelayout",m,o)}}(),L?(-1<o.indexOf("select")&&Le(t,a,l,u,s.id,Z),-1<o.indexOf("event")&&_e.click(a,t,s.id)):1===e&&R&&(r=(n=b?w:_)._name+".range["+(o="s"===b||"w"===x?0:1)+"]",t=o,o=(e=n).range[t],t=Math.abs(o-e.range[1-t]),t="date"===e.type?o:"log"===e.type?(i=Math.ceil(Math.max(0,-Math.log(t)/Math.LN10))+3,ge("."+i+"g")(Math.pow(10,o))):(i=Math.floor(Math.log(Math.abs(o))/Math.LN10)-Math.floor(Math.log(t)/Math.LN10)+4,ge("."+String(i)+"g")(o)),i="left",o="middle",n.fixedrange||(b?(o="n"===b?"top":"bottom","right"===n.side&&(i="right")):"e"===x&&(i="right"),a._context.showAxisRangeEntryBoxes&&pe.select(N).call(be.makeEditable,{gd:a,immediate:!0,background:a._fullLayout.paper_bgcolor,text:String(t),fill:n.tickfont?n.tickfont.color:"#444",horizontalAlign:i,verticalAlign:o}).on("edit",function(e){e=n.d2r(e);void 0!==e&&me.call("_guiRelayout",a,r,e)}))))}function Q(e,t){if(m._transitioningWithDuration)return!1;var n,r,i=Math.max(0,Math.min(c,y*e+F)),o=Math.max(0,Math.min(f,g*t+B)),e=Math.abs(i-F),t=Math.abs(o-B);function a(){G="",U.r=U.l,U.t=U.b,Y.attr("d","M0,0Z")}U.l=Math.min(F,i),U.r=Math.max(F,i),U.t=Math.min(B,o),U.b=Math.max(B,o),d.isSubplotConstrained?De<e||De<t?(G="xy",t/f<e/c?(t=e*f/c,o<B?U.t=B-t:U.b=B+t):(e=t*c/f,i<F?U.l=F-e:U.r=F+e),Y.attr("d",Ye(U))):a():k.isSubplotConstrained?De<e||De<t?(G="xy",r=Math.min(U.l/c,(f-U.b)/f),n=Math.max(U.r/c,(f-U.t)/f),U.l=r*c,U.r=n*c,U.b=(1-r)*f,U.t=(1-n)*f,Y.attr("d",Ye(U))):a():!A||t<Math.min(Math.max(.6*e,ze),De)?e<ze||!O?a():(U.t=0,U.b=f,G="x",Y.attr("d",(r=B,"M"+((n=U).l-.5)+","+(r-De-.5)+"h-3v"+(2*De+1)+"h3ZM"+(n.r+.5)+","+(r-De-.5)+"h3v"+(2*De+1)+"h-3Z"))):!O||e<Math.min(.6*t,De)?(U.l=0,U.r=c,G="y",Y.attr("d","M"+((e=F)-De-.5)+","+((t=U).t-.5)+"v-3h"+(2*De+1)+"v3ZM"+(e-De-.5)+","+(t.b+.5)+"v3h"+(2*De+1)+"v-3Z")):(G="xy",Y.attr("d",Ye(U))),U.w=U.r-U.l,U.h=U.b-U.t,G&&(X=!0),m._dragged=X,Ve(W,Y,U,H,V,q),J(),m.emit("plotly_relayouting",p),V=!0}function J(){p={},"xy"!==G&&"x"!==G||(Be(l,U.l/c,U.r/c,p,d.xaxes),se("x",p)),"xy"!==G&&"y"!==G||(Be(u,(f-U.b)/f,(f-U.t)/f,p,d.yaxes),se("y",p))}function ee(){J(),Ge(m),ue(),We(m)}Z.prepFn=function(e,t,n){var r=Z.dragmode,i=m._fullLayout.dragmode;i!==r&&(Z.dragmode=i),I(),y=m._fullLayout._invScaleX,g=m._fullLayout._invScaleY,h||(L?e.shiftKey?"pan"===i?i="zoom":je(i)||(i="pan"):e.ctrlKey&&(i="pan"):i="pan"),ke(i)?Z.minDrag=1:Z.minDrag=void 0,je(i)?(Z.xaxes=l,Z.yaxes=u,Ee(e,t,n,Z,i)):(Z.clickFn=K,je(r)&&$(),h||("zoom"===i?(Z.moveFn=Q,Z.doneFn=ee,Z.minDrag=1,function(e,t){var n=N.getBoundingClientRect();F=e-n.left,B=t-n.top,m._fullLayout._calcInverseTransform(m);n=ye.apply3DTransform(m._fullLayout._invTransform)(F,B);F=n[0],B=n[1],U={l:F,r:F,w:0,t:B,b:B,h:0},q=m._hmpixcount?m._hmlumcount/m._hmpixcount:ve(m._fullLayout.plot_bgcolor).getLuminance(),G="xy",X=V=!1,W=qe(v,q,o,a,H="M0,0H"+c+"V"+f+"H0V0"),Y=He(v,o,a)}(t,n)):"pan"===i&&(Z.moveFn=ae,Z.doneFn=ue))),m._fullLayout._redrag=function(){var e,t=m._dragdata;t&&t.element===N&&(e=m._fullLayout.dragmode,je(e)||(I(),ce([0,0,c,f]),Z.moveFn(t.dx,t.dy)))}},Me.init(Z);var te=[0,0,c,f],ne=null,re=Ie.REDRAWDELAY,ie=s.mainplot?m._fullLayout._plots[s.mainplot]:s;function oe(e){if(m._context._scrollZoom.cartesian||m._fullLayout._enablescrollzoom){if($(),m._transitioningWithDuration)return e.preventDefault(),void e.stopPropagation();I(),clearTimeout(ne);var t=-e.deltaY;if(isFinite(t)||(t=e.wheelDelta/10),isFinite(t)){var n,r=Math.exp(-Math.min(Math.max(t,-20),20)/200),t=ie.draglayer.select(".nsewdrag").node().getBoundingClientRect(),i=(e.clientX-t.left)/t.width,o=(t.bottom-e.clientY)/t.height;if(T){for(x||(i=.5),n=0;n<l.length;n++)a(l[n],i,r);se("x"),te[2]*=r,te[0]+=te[2]*i*(1/r-1)}if(P){for(b||(o=.5),n=0;n<u.length;n++)a(u[n],o,r);se("y"),te[3]*=r,te[1]+=te[3]*(1-o)*(1/r-1)}ce(te),le(),m.emit("plotly_relayouting",p),ne=setTimeout(function(){m._fullLayout&&(te=[0,0,c,f],ue())},re),e.preventDefault()}else ye.log("Did not find wheel motion attributes: ",e)}function a(t,e,n){var r,i;t.fixedrange||(r=ye.simpleMap(t.range,t.r2l),i=r[0]+(r[1]-r[0])*e,t.range=r.map(function(e){return t.l2r(i+(e-i)*n)}))}}function ae(e,t){if(e*=y,t*=g,!m._transitioningWithDuration){if(m._fullLayout._replotting=!0,"ew"===O||"ns"===A){var n=O?-e:0,r=A?-t:0;return k.isSubplotConstrained&&(O&&A&&(n=-(e=(o=(e/c-t/f)/2)*c),r=-(t=-o*f)),A?n=-r*c/f:r=-n*f/c),O&&(Ue(l,e),se("x")),A&&(Ue(u,t),se("y")),ce([n,r,c,f]),le(),void m.emit("plotly_relayouting",p)}var i,o="w"===O==("n"===A)?1:-1;if(O&&A&&(d.isSubplotConstrained||k.isSubplotConstrained)&&(e=(a=(e/c+o*t/f)/2)*c,t=o*a*f),"w"===O?e=s(l,0,e):"e"===O?e=s(l,1,-e):O||(e=0),"n"===A?t=s(u,1,t):"s"===A?t=s(u,0,-t):A||(t=0),n="w"===O?e:0,r="n"===A?t:0,d.isSubplotConstrained&&!k.isSubplotConstrained||k.isSubplotConstrained&&O&&A&&0<o){if(k.isSubplotConstrained||!O&&1===A.length){for(i=0;i<l.length;i++)l[i].range=l[i]._r.slice(),Re(l[i],1-t/f);n=(e=t*c/f)/2}if(k.isSubplotConstrained||!A&&1===O.length){for(i=0;i<u.length;i++)u[i].range=u[i]._r.slice(),Re(u[i],1-e/c);r=(t=e*f/c)/2}}k.isSubplotConstrained&&A||se("x"),k.isSubplotConstrained&&O||se("y");var a=c-e,o=f-t;!k.isSubplotConstrained||O&&A||(O?(r=n?0:e*f/c,o=a*f/c):(n=r?0:t*c/f,a=o*c/f)),ce([n,r,a,o]),le(),m.emit("plotly_relayouting",p)}function s(e,t,n){for(var r=1-t,i=0;i<e.length;i++){var o,a,s,l=e[i];l.fixedrange||(a=(o=l)._rl[r]+(l._rl[t]-l._rl[r])/(1-(0<=(s=n/l._length)?Math.min(s,.9):1/(1/Math.max(s,-.3)+3.222))),!1!==(s=l.l2r(a))&&void 0!==s&&(l.range[t]=s))}return o._length*(o._rl[t]-a)/(o._rl[t]-o._rl[r])}}function se(e,t){for(var n=k.isSubplotConstrained?{x:u,y:l}[e]:k[e+"axes"],r=k.isSubplotConstrained?{x:l,y:u}[e]:[],i=0;i<n.length;i++){var o=n[i],a=o._id,a=k.xLinks[a]||k.yLinks[a],a=r[0]||M[a]||j[a];a&&(t?(t[o._name+".range[0]"]=t[a._name+".range[0]"],t[o._name+".range[1]"]=t[a._name+".range[1]"]):o.range=a.range.slice())}}function le(){var t,n=[];function e(e){for(t=0;t<e.length;t++)e[t].fixedrange||n.push(e[t]._id)}for(T&&(e(l),e(d.xaxes),e(k.xaxes)),P&&(e(u),e(d.yaxes),e(k.yaxes)),p={},t=0;t<n.length;t++){var r=n[t],r=Se(m,r);we.drawOne(m,r,{skipTitle:!0}),p[r._name+".range[0]"]=r.range[0],p[r._name+".range[1]"]=r.range[1]}we.redrawComponents(m,n)}function ue(){ce([0,0,c,f]),ye.syncOrAsync([Pe.previousPromises,function(){m._fullLayout._replotting=!1,me.call("_guiRelayout",m,p)}],m)}function ce(e){var t=m._fullLayout,n=t._plots,r=t._subplots.cartesian;if(E&&me.subplotsRegistry.splom.drag(m),S)for(f=0;f<r.length;f++){var i,o,a,s=(a=n[r[f]]).xaxis,l=a.yaxis;a._scene&&(i=ye.simpleMap(s.range,s.r2l),o=ye.simpleMap(l.range,l.r2l),a._scene.update({range:[i[0],o[0],i[1],o[1]]}))}if((E||S)&&(Ae(m),Te(m)),C)for(var u=e[2]/_._length,c=e[3]/w._length,f=0;f<r.length;f++){s=(a=n[r[f]]).xaxis,l=a.yaxis;var d,h,p=(T||k.isSubplotConstrained)&&!s.fixedrange&&M[s._id],y=(P||k.isSubplotConstrained)&&!l.fixedrange&&j[l._id],g=p?(d=u,x||k.isSubplotConstrained?e[0]:he(s,d)):k.xaHash[s._id]?(d=u,e[0]*s._length/_._length):k.yaHash[s._id]?(d=c,"ns"===A?-e[1]*s._length/w._length:he(s,d,{n:"top",s:"bottom"}[A])):de(s,d=fe(s,u,c)),v=y?(h=c,b||k.isSubplotConstrained?e[1]:he(l,h)):k.yaHash[l._id]?(h=c,e[1]*l._length/w._length):k.xaHash[l._id]?(h=u,"ew"===O?-e[0]*l._length/_._length:he(l,h,{e:"right",w:"left"}[O])):de(l,h=fe(l,u,c));(d||h)&&(p=s._offset-g/(d=d||1),y=l._offset-v/(h=h||1),a.clipRect.call(xe.setTranslate,g,v).call(xe.setScale,d,h),a.plot.call(xe.setTranslate,p,y).call(xe.setScale,1/d,1/h),d===a.xScaleFactor&&h===a.yScaleFactor||(xe.setPointGroupScale(a.zoomScalePts,d,h),xe.setTextPointsScale(a.zoomScaleTxt,d,h)),xe.hideOutsideRangePoints(a.clipOnAxisFalseTraces,a),a.xScaleFactor=d,a.yScaleFactor=h)}}function fe(e,t,n){return e.fixedrange?0:T&&d.xaHash[e._id]?t:P&&(d.isSubplotConstrained?d.xaHash:d.yaHash)[e._id]?n:0}function de(e,t){return t?(e.range=e._r.slice(),Re(e,t),he(e,t)):0}function he(e,t,n){return e._length*(1-t)*Oe[n||e.constraintoward||"middle"]}return b.length*x.length!=1&&Ze(N,oe),N},makeDragger:u,makeRectDragger:Ne,makeZoombox:qe,makeCorners:He,updateZoombox:Ve,xyCorners:Ye,transitionZoombox:c,removeZoombox:Ge,showDoubleClickNotifier:We,attachWheelEventHandler:Ze}},{"../../components/color":647,"../../components/dragelement":666,"../../components/dragelement/helpers":665,"../../components/drawing":669,"../../components/fx":687,"../../constants/alignment":752,"../../lib":779,"../../lib/clear_gl_canvases":766,"../../lib/setcursor":799,"../../lib/svg_text_utils":804,"../../plot_api/subroutines":818,"../../registry":879,"../plots":876,"./axes":828,"./axis_ids":832,"./constants":835,"./scale_zoom":848,"./select":849,"@plotly/d3":3,"has-passive-events":607,tinycolor2:980}],838:[function(e,t,n){"use strict";var r=e("@plotly/d3"),l=e("../../components/fx"),u=e("../../components/dragelement"),i=e("../../lib/setcursor"),c=e("./dragbox").makeDragBox,f=e("./constants").DRAGGERSIZE;n.initInteractions=function(a){var e,s=a._fullLayout;a._context.staticPlot?r.select(a).selectAll(".drag").remove():(s._has("cartesian")||s._has("splom"))&&(Object.keys(s._plots||{}).sort(function(e,t){if((s._plots[e].mainplot&&!0)!==(s._plots[t].mainplot&&!0))return s._plots[e].mainplot?1:-1;e=e.split("y"),t=t.split("y");return e[0]===t[0]?Number(e[1]||1)-Number(t[1]||1):Number(e[0]||1)-Number(t[0]||1)}).forEach(function(t){var n,e,r=s._plots[t],i=r.xaxis,o=r.yaxis;r.mainplot||((n=c(a,r,i._offset,o._offset,i._length,o._length,"ns","ew")).onmousemove=function(e){a._fullLayout._rehover=function(){a._fullLayout._hoversubplot===t&&a._fullLayout._plots[t]&&l.hover(a,e,t)},l.hover(a,e,t),a._fullLayout._lasthover=n,a._fullLayout._hoversubplot=t},n.onmouseout=function(e){a._dragging||(a._fullLayout._hoversubplot=null,u.unhover(a,e))},a._context.showAxisDragHandles&&(c(a,r,i._offset-f,o._offset-f,f,f,"n","w"),c(a,r,i._offset+i._length,o._offset-f,f,f,"n","e"),c(a,r,i._offset-f,o._offset+o._length,f,f,"s","w"),c(a,r,i._offset+i._length,o._offset+o._length,f,f,"s","e"))),a._context.showAxisDragHandles&&(t===i._mainSubplot&&(e=i._mainLinePosition,"top"===i.side&&(e-=f),c(a,r,i._offset+.1*i._length,e,.8*i._length,f,"","ew"),c(a,r,i._offset,e,.1*i._length,f,"","w"),c(a,r,i._offset+.9*i._length,e,.1*i._length,f,"","e")),t===o._mainSubplot&&(i=o._mainLinePosition,"right"!==o.side&&(i-=f),c(a,r,i,o._offset+.1*o._length,f,.8*o._length,"ns",""),c(a,r,i,o._offset+.9*o._length,f,.1*o._length,"s",""),c(a,r,i,o._offset,f,.1*o._length,"n","")))}),(e=s._hoverlayer.node()).onmousemove=function(e){e.target=a._fullLayout._lasthover,l.hover(a,e,s._hoversubplot)},e.onclick=function(e){e.target=a._fullLayout._lasthover,l.click(a,e)},e.onmousedown=function(e){a._fullLayout._lasthover.onmousedown(e)},n.updateFx(a))},n.updateFx=function(e){var t=e._fullLayout,e="pan"===t.dragmode?"move":"crosshair";i(t._draggers,e)}},{"../../components/dragelement":666,"../../components/fx":687,"../../lib/setcursor":799,"./constants":835,"./dragbox":837,"@plotly/d3":3}],839:[function(e,t,n){"use strict";t.exports={clearOutlineControllers:function(e){(e=e._fullLayout._zoomlayer)&&e.selectAll(".outline-controllers").remove()},clearSelect:function(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".select-outline").remove(),e._fullLayout._drawing=!1}}},{}],840:[function(e,t,n){"use strict";var r=e("../../lib").strTranslate;function i(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}t.exports={p2r:i,r2p:function(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}},axValue:function(t){var n="y"===t._id.charAt(0)?1:0;return function(e){return i(t,e[n])}},getTransform:function(e){return r(e.xaxis._offset,e.yaxis._offset)}}},{"../../lib":779}],841:[function(e,t,n){"use strict";var g=e("../../registry"),v=e("../../lib"),m=e("./axis_ids");t.exports=function(y){return function(e,t){var n=e[y];if(Array.isArray(n))for(var r=g.subplotsRegistry.cartesian,i=r.idRegex,e=t._subplots,o=e.xaxis,a=e.yaxis,s=e.cartesian,l=t._has("cartesian")||t._has("gl2d"),u=0;u<n.length;u++){var c,f,d,h,p=n[u];v.isPlainObject(p)&&(c=m.cleanId(p.xref,"x",!1),f=m.cleanId(p.yref,"y",!1),d=i.x.test(c),h=i.y.test(f),(d||h)&&(l||v.pushUnique(t._basePlotModules,r),p=!1,d&&-1===o.indexOf(c)&&(o.push(c),p=!0),h&&-1===a.indexOf(f)&&(a.push(f),p=!0),p&&d&&h&&s.push(c+f)))}}}},{"../../lib":779,"../../registry":879,"./axis_ids":832}],842:[function(e,t,n){"use strict";var m=e("@plotly/d3"),b=e("../../registry"),h=e("../../lib"),r=e("../plots"),x=e("../../components/drawing"),_=e("../get_data").getModuleCalcData,y=e("./axis_ids"),w=e("./constants"),i=e("../../constants/xmlns_namespaces"),c=h.ensureSingle;function f(e,t,n){return h.ensureSingle(e,t,n,function(e){e.datum(n)})}function g(r,i,e,o,a){for(var t=w.traceLayerClasses,n=r._fullLayout,s=n._modules,l=[],u=[],c=0;c<s.length;c++){var f,d,h,p,y=(f=s[c]).name,g=b.modules[y].categories;g.svg&&(d=f.layerName||y+"layer",h=f.plot,p=(y=_(e,h))[0],e=y[1],p.length&&l.push({i:t.indexOf(d),className:d,plotMethod:h,cdModule:p}),g.zoomScale&&u.push("."+d))}l.sort(function(e,t){return e.i-t.i});var v=i.plot.selectAll("g.mlayer").data(l,function(e){return e.className});v.enter().append("g").attr("class",function(e){return e.className}).classed("mlayer",!0).classed("rangeplot",i.isRangePlot),v.exit().remove(),v.order(),v.each(function(e){var t=m.select(this),n=e.className;e.plotMethod(r,i,e.cdModule,t,o,a),-1===w.clipOnAxisFalseQuery.indexOf("."+n)&&x.setClipUrl(t,i.layerClipId,r)}),n._has("scattergl")&&(f=b.getModule("scattergl"),p=_(e,f)[0],f.plot(r,i,p)),r._context.staticPlot||(i._hasClipOnAxisFalse&&(i.clipOnAxisFalseTraces=i.plot.selectAll(w.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),u.length&&(n=i.plot.selectAll(u.join(",")).selectAll(".trace"),i.zoomScalePts=n.selectAll("path.point"),i.zoomScaleTxt=n.selectAll(".textpoint")))}function o(e,t){var n,r,i,o=t.plotgroup,a=t.id,s=w.layerValue2layerClass[t.xaxis.layer],l=w.layerValue2layerClass[t.yaxis.layer],u=e._fullLayout._hasOnlyLargeSploms;t.mainplot?(r=(n=t.mainplotinfo).plotgroup,e=a+"-x",i=a+"-y",t.gridlayer=n.gridlayer,t.zerolinelayer=n.zerolinelayer,c(n.overlinesBelow,"path",e),c(n.overlinesBelow,"path",i),c(n.overaxesBelow,"g",e),c(n.overaxesBelow,"g",i),t.plot=c(n.overplot,"g",a),c(n.overlinesAbove,"path",e),c(n.overlinesAbove,"path",i),c(n.overaxesAbove,"g",e),c(n.overaxesAbove,"g",i),t.xlines=r.select(".overlines-"+s).select("."+e),t.ylines=r.select(".overlines-"+l).select("."+i),t.xaxislayer=r.select(".overaxes-"+s).select("."+e),t.yaxislayer=r.select(".overaxes-"+l).select("."+i)):u?(t.xlines=c(o,"path","xlines-above"),t.ylines=c(o,"path","ylines-above"),t.xaxislayer=c(o,"g","xaxislayer-above"),t.yaxislayer=c(o,"g","yaxislayer-above")):(i=c(o,"g","layer-subplot"),t.shapelayer=c(i,"g","shapelayer"),t.imagelayer=c(i,"g","imagelayer"),t.gridlayer=c(o,"g","gridlayer"),t.zerolinelayer=c(o,"g","zerolinelayer"),c(o,"path","xlines-below"),c(o,"path","ylines-below"),t.overlinesBelow=c(o,"g","overlines-below"),c(o,"g","xaxislayer-below"),c(o,"g","yaxislayer-below"),t.overaxesBelow=c(o,"g","overaxes-below"),t.plot=c(o,"g","plot"),t.overplot=c(o,"g","overplot"),t.xlines=c(o,"path","xlines-above"),t.ylines=c(o,"path","ylines-above"),t.overlinesAbove=c(o,"g","overlines-above"),c(o,"g","xaxislayer-above"),c(o,"g","yaxislayer-above"),t.overaxesAbove=c(o,"g","overaxes-above"),t.xlines=o.select(".xlines-"+s),t.ylines=o.select(".ylines-"+l),t.xaxislayer=o.select(".xaxislayer-"+s),t.yaxislayer=o.select(".yaxislayer-"+l)),u||(f(t.gridlayer,"g",t.xaxis._id),f(t.gridlayer,"g",t.yaxis._id),t.gridlayer.selectAll("g").map(function(e){return e[0]}).sort(y.idSort)),t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0)}function v(e,t){if(e){var n,r={};for(n in e.each(function(e){e=e[0];m.select(this).remove(),M(e,t),r[e]=!0}),t._plots)for(var i=t._plots[n].overlays||[],o=0;o<i.length;o++){var a=i[o];r[a.id]&&a.plot.selectAll(".trace").remove()}}}function M(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}n.name="cartesian",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex=w.idRegex,n.attrRegex=w.attrRegex,n.attributes=e("./attributes"),n.layoutAttributes=e("./layout_attributes"),n.supplyLayoutDefaults=e("./layout_defaults"),n.transitionAxes=e("./transition_axes"),n.finalizeSubplots=function(e,t){for(var n,r,t=t._subplots,i=t.xaxis,o=t.yaxis,a=t.cartesian,s=a.concat(t.gl2d||[]),l={},u={},c=0;c<s.length;c++){var f=s[c].split("y");u["y"+f[l[f[0]]=1]]=1}for(c=0;c<i.length;c++)l[n=i[c]]||(r=(e[y.id2name(n)]||{}).anchor,w.idRegex.y.test(r)||(r="y"),a.push(n+r),s.push(n+r),u[r]||(u[r]=1,h.pushUnique(o,r)));for(c=0;c<o.length;c++)u[r=o[c]]||(n=(e[y.id2name(r)]||{}).anchor,w.idRegex.x.test(n)||(n="x"),a.push(n+r),s.push(n+r),l[n]||(l[n]=1,h.pushUnique(i,n)));if(!s.length){for(var d in r=n="",e)w.attrRegex.test(d)&&("x"===d.charAt(0)?(!n||+d.substr(5)<+n.substr(5))&&(n=d):(!r||+d.substr(5)<+r.substr(5))&&(r=d));n=n?y.name2id(n):"x",r=r?y.name2id(r):"y",i.push(n),o.push(r),a.push(n+r)}},n.plot=function(e,t,n,r){var i,o=e._fullLayout,a=o._subplots.cartesian,s=e.calcdata;if(!Array.isArray(t))for(t=[],i=0;i<s.length;i++)t.push(i);for(i=0;i<a.length;i++){for(var l,u=a[i],c=o._plots[u],f=[],d=0;d<s.length;d++){var h=s[d],p=h[0].trace;p.xaxis+p.yaxis===u&&(-1===t.indexOf(p.index)&&!p.carpet||(l&&l[0].trace.xaxis+l[0].trace.yaxis===u&&-1!==["tonextx","tonexty","tonext"].indexOf(p.fill)&&-1===f.indexOf(l)&&f.push(l),f.push(h)),l=h)}g(e,c,f,n,r)}},n.clean=function(e,t,n,r){var i,o,a=r._plots||{},s=t._plots||{},l=r._subplots||{};if(r._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms)for(o in a)(i=a[o]).plotgroup&&i.plotgroup.remove();var u=r._has&&r._has("gl"),c=t._has&&t._has("gl");if(u&&!c)for(o in a)(i=a[o])._scene&&i._scene.destroy();if(l.xaxis&&l.yaxis)for(var f=y.listIds({_fullLayout:r}),d=0;d<f.length;d++){var h=f[d];t[y.id2name(h)]||r._infolayer.selectAll(".g-"+h+"title").remove()}u=r._has&&r._has("cartesian"),c=t._has&&t._has("cartesian");if(u&&!c)v(r._cartesianlayer.selectAll(".subplot"),r),r._defs.selectAll(".axesclip").remove(),delete r._axisConstraintGroups,delete r._axisMatchGroups;else if(l.cartesian)for(d=0;d<l.cartesian.length;d++){var p=l.cartesian[d];s[p]||(r._cartesianlayer.selectAll("."+p+",."+p+"-x,."+p+"-y").remove(),M(p,r))}},n.drawFramework=function(n){var r=n._fullLayout,e=function(e){var t,n,r,i,o,a,s=e._fullLayout,l=s._subplots.cartesian,u=l.length,c=[],f=[];for(t=0;t<u;t++){r=l[t],i=s._plots[r],o=i.xaxis,a=i.yaxis;var d=o._mainAxis,h=a._mainAxis,d=d._id+h._id,h=s._plots[d];i.overlays=[],d!==r&&h?(i.mainplot=d,i.mainplotinfo=h,f.push(r)):(i.mainplot=void 0,i.mainplotinfo=void 0,c.push(r))}for(t=0;t<f.length;t++)r=f[t],(i=s._plots[r]).mainplotinfo.overlays.push(i);var p=c.concat(f),y=new Array(u);for(t=0;t<u;t++){r=p[t],i=s._plots[r],o=i.xaxis,a=i.yaxis;var g=[r,o.layer,a.layer,o.overlaying||"",a.overlaying||""];for(n=0;n<i.overlays.length;n++)g.push(i.overlays[n].id);y[t]=g}return y}(n),e=r._cartesianlayer.selectAll(".subplot").data(e,String);e.enter().append("g").attr("class",function(e){return"subplot "+e[0]}),e.order(),e.exit().call(v,r),e.each(function(e){var t=e[0],e=r._plots[t];e.plotgroup=m.select(this),o(n,e),e.draglayer=c(r._draggers,"g",t)})},n.rangePlot=function(e,t,n){o(e,t),g(e,t,n),r.style(e)},n.toSVG=function(e){var t=e._fullLayout._glimages,n=m.select(e).selectAll(".svg-container");n.filter(function(e,t){return t===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var e=this.toDataURL("image/png");t.append("svg:image").attr({xmlns:i.svg,"xlink:href":e,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})},n.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":669,"../../constants/xmlns_namespaces":759,"../../lib":779,"../../registry":879,"../get_data":861,"../plots":876,"./attributes":826,"./axis_ids":832,"./constants":835,"./graph_interact":838,"./layout_attributes":843,"./layout_defaults":844,"./transition_axes":855,"@plotly/d3":3}],843:[function(e,t,n){"use strict";var r=e("../font_attributes"),i=e("../../components/color/attributes"),o=e("../../components/drawing/attributes").dash,a=e("../../lib/extend").extendFlat,s=e("../../plot_api/plot_template").templatedArray,l=e("../../plots/cartesian/axis_format_attributes").descriptionWithDates,u=e("../../constants/numerical").ONEDAY,c=e("./constants"),f=c.HOUR_PATTERN,e=c.WEEKDAY_PATTERN;t.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:i.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:r({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[c.idRegex.x.toString(),c.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[c.idRegex.x.toString(),c.idRegex.y.toString()],editType:"calc"},rangebreaks:s("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[e,f,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:u},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:a({},o,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:r({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:l("tick label")},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:l("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:i.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:i.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",c.idRegex.x.toString(),c.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",c.idRegex.x.toString(),c.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:r({editType:"ticks"})}}},{"../../components/color/attributes":646,"../../components/drawing/attributes":668,"../../constants/numerical":758,"../../lib/extend":772,"../../plot_api/plot_template":817,"../../plots/cartesian/axis_format_attributes":831,"../font_attributes":859,"./constants":835}],844:[function(e,t,n){"use strict";var Q=e("../../lib"),J=e("../../components/color"),ee=e("../../components/fx/helpers").isUnifiedHover,te=e("../../components/fx/hovermode_defaults"),ne=e("../../plot_api/plot_template"),re=e("../layout_attributes"),ie=e("./layout_attributes"),oe=e("./type_defaults"),ae=e("./axis_defaults"),se=e("./constraints"),le=e("./position_defaults"),ue=e("./axis_ids"),ce=ue.id2name,fe=ue.name2id,de=e("./constants").AX_ID_PATTERN,e=e("../../registry"),he=e.traceIs,pe=e.getComponentMethod;function ye(e,t,n){Array.isArray(e[t])?e[t].push(n):e[t]=[n]}t.exports=function(a,e,t){for(var n,r=e.autotypenumbers,i={},o={},s={},l={},u={},c={},f={},d={},h={},p={},y=0;y<t.length;y++){var g,v,m=t[y];if(he(m,"cartesian")||he(m,"gl2d")){if(m.xaxis)g=ce(m.xaxis),ye(i,g,m);else if(m.xaxes)for(n=0;n<m.xaxes.length;n++)ye(i,ce(m.xaxes[n]),m);if(m.yaxis)v=ce(m.yaxis),ye(i,v,m);else if(m.yaxes)for(n=0;n<m.yaxes.length;n++)ye(i,ce(m.yaxes[n]),m);"funnel"===m.type?"h"===m.orientation?(g&&(o[g]=!0),v&&(f[v]=!0)):v&&(s[v]=!0):"image"===m.type?(v&&(d[v]=!0),g&&(d[g]=!0)):(v&&(u[v]=!0,c[v]=!0),he(m,"carpet")&&("carpet"!==m.type||m._cheater)||g&&(l[g]=!0)),"carpet"===m.type&&m._cheater&&g&&(o[g]=!0),he(m,"2dMap")&&(h[g]=!0,h[v]=!0),he(m,"oriented")&&(p["h"===m.orientation?v:g]=!0)}}var b=e._subplots,x=b.xaxis,_=b.yaxis,w=Q.simpleMap(x,ce),M=Q.simpleMap(_,ce),j=w.concat(M),b=J.background;x.length&&_.length&&(b=Q.coerce(a,e,re,"plot_bgcolor"));var k,O,A=J.combine(b,e.paper_bgcolor);function T(){var e=i[X]||[];$._traceIndices=e.map(function(e){return e._expandedIndex}),$._annIndices=[],$._shapeIndices=[],$._imgIndices=[],$._subplotsWith=[],$._counterAxes=[],$._name=$._attr=X,$._id=k}function P(e,t){return Q.coerce(Z,$,ie,e,t)}function S(e,t){return Q.coerce2(Z,$,ie,e,t)}function E(e,t){for(var n="x"===e?w:M,r=[],i=0;i<n.length;i++){var o=n[i];o===t||(a[o]||{}).overlaying||r.push(fe(o))}return r}var C={x:_,y:x},L=C.x.concat(C.y),R={},I=[];function z(){var e=Z.matches;de.test(e)&&-1===L.indexOf(e)&&(R[e]=Z.type,I=Object.keys(R))}var D=te(a,e),N=ee(D);for(y=0;y<j.length;y++){X=j[y],k=fe(X),O=X.charAt(0),Q.isPlainObject(a[X])||(a[X]={}),Z=a[X],$=ne.newContainer(e,X,O+"axis"),T();var F="x"===O&&!l[X]&&o[X]||"y"===O&&!u[X]&&s[X],B="y"===O&&(!c[X]&&f[X]||d[X]),U={letter:O,font:e.font,outerTicks:h[X],showGrid:!p[X],data:i[X]||[],bgColor:A,calendar:e.calendar,automargin:!0,visibleDflt:F,reverseDflt:B,autotypenumbersDflt:r,splomStash:((e._splomAxes||{})[O]||{})[k]};P("uirevision",e.uirevision),oe(Z,$,P,U),ae(Z,$,P,U,e);var q=N&&O===D.charAt(0),H=S("spikecolor",N?$.color:void 0),V=S("spikethickness",N?1.5:void 0),F=S("spikedash",N?"dot":void 0),B=S("spikemode",N?"across":void 0),U=S("spikesnap");P("showspikes",!!(q||H||V||F||B||U))||(delete $.spikecolor,delete $.spikethickness,delete $.spikedash,delete $.spikemode,delete $.spikesnap),le(Z,$,P,{letter:O,counterAxes:C[O],overlayableAxes:E(O,X),grid:e.grid}),P("title.standoff"),z(),$._input=Z}for(y=0;y<I.length;){k=I[y++],O=(X=ce(k)).charAt(0),Q.isPlainObject(a[X])||(a[X]={}),Z=a[X],$=ne.newContainer(e,X,O+"axis"),T();var G={letter:O,font:e.font,outerTicks:h[X],showGrid:!p[X],data:[],bgColor:A,calendar:e.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:r,splomStash:((e._splomAxes||{})[O]||{})[k]};P("uirevision",e.uirevision),$.type=R[k]||"linear",ae(Z,$,P,G,e),le(Z,$,P,{letter:O,counterAxes:C[O],overlayableAxes:E(O,X),grid:e.grid}),P("fixedrange"),z(),$._input=Z}var W=pe("rangeslider","handleDefaults"),Y=pe("rangeselector","handleDefaults");for(y=0;y<w.length;y++)X=w[y],Z=a[X],$=e[X],W(a,e,X),"date"===$.type&&Y(Z,$,e,M,$.calendar),P("fixedrange");for(y=0;y<M.length;y++){var X=M[y],Z=a[X],$=e[X],K=e[ce($.anchor)];P("fixedrange",pe("rangeslider","isVisible")(K))}se.handleDefaults(a,e,{axIds:L.concat(I).sort(ue.idSort),axHasImage:d})}},{"../../components/color":647,"../../components/fx/helpers":683,"../../components/fx/hovermode_defaults":686,"../../lib":779,"../../plot_api/plot_template":817,"../../registry":879,"../layout_attributes":874,"./axis_defaults":830,"./axis_ids":832,"./constants":835,"./constraints":836,"./layout_attributes":843,"./position_defaults":846,"./type_defaults":856}],845:[function(e,t,n){"use strict";var l=e("tinycolor2").mix,u=e("../../components/color/attributes").lightFraction,c=e("../../lib");t.exports=function(n,r,e,i){var t=(i=i||{}).dfltColor;function o(e,t){return c.coerce2(n,r,i.attributes,e,t)}var a=o("linecolor",t),s=o("linewidth");e("showline",i.showLine||!!a||!!s)||(delete r.linecolor,delete r.linewidth);var a=o("gridcolor",l(t,i.bgColor,i.blend||u).toRgbString()),s=o("gridwidth");e("showgrid",i.showGrid||!!a||!!s)||(delete r.gridcolor,delete r.gridwidth),i.noZeroLine||(s=o("zerolinecolor",t),t=o("zerolinewidth"),e("zeroline",i.showGrid||!!s||!!t)||(delete r.zerolinecolor,delete r.zerolinewidth))}},{"../../components/color/attributes":646,"../../lib":779,tinycolor2:980}],846:[function(e,t,n){"use strict";var f=e("fast-isnumeric"),d=e("../../lib");t.exports=function(e,t,n,r){var i=r.counterAxes||[],o=r.overlayableAxes||[],a=r.letter,r=r.grid;r&&(s=r._domains[a][r._axisMap[t._id]],l=r._anchors[t._id],s&&(u=r[a+"side"].split(" ")[0],c=r.domain[a]["right"===u||"top"===u?1:0]));var s=s||[0,1],l=l||!f(e.position)&&i[0]||"free",u=u||("x"===a?"bottom":"left"),c=c||0;"free"===d.coerce(e,t,{anchor:{valType:"enumerated",values:["free"].concat(i),dflt:l}},"anchor")&&n("position",c),d.coerce(e,t,{side:{valType:"enumerated",values:"x"===a?["bottom","top"]:["left","right"],dflt:u}},"side");var u=!1;return(u=o.length?d.coerce(e,t,{overlaying:{valType:"enumerated",values:[!1].concat(o),dflt:!1}},"overlaying"):u)||((u=n("domain",s))[0]>u[1]-1/4096&&(t.domain=s),d.noneOrAll(e.domain,t.domain,s)),n("layer"),t}},{"../../lib":779,"fast-isnumeric":574}],847:[function(e,t,n){"use strict";var o=e("./show_dflt");t.exports=function(e,t,n,r,i){i=(i=i||{}).tickSuffixDflt,e=o(e);n("tickprefix")&&n("showtickprefix",e),n("ticksuffix",i)&&n("showticksuffix",e)}},{"./show_dflt":851}],848:[function(e,t,n){"use strict";var i=e("../../constants/alignment").FROM_BL;t.exports=function(e,t,n){void 0===n&&(n=i[e.constraintoward||"center"]);var r=[e.r2l(e.range[0]),e.r2l(e.range[1])],n=r[0]+(r[1]-r[0])*n;e.range=e._input.range=[e.l2r(n+(r[0]-n)*t),e.l2r(n+(r[1]-n)*t)],e.setScale()}},{"../../constants/alignment":752}],849:[function(e,t,n){"use strict";var q=e("polybooljs"),p=e("../../registry"),H=e("../../components/drawing").dashStyle,V=e("../../components/color"),G=e("../../components/fx"),o=e("../../components/fx/helpers").makeEventData,r=e("../../components/dragelement/helpers"),W=r.freeMode,Y=r.rectMode,X=r.drawMode,Z=r.openMode,$=r.selectMode,K=e("../../components/shapes/draw_newshape/display_outlines"),Q=e("../../components/shapes/draw_newshape/helpers").handleEllipse,i=e("../../components/shapes/draw_newshape/newshapes"),J=e("../../lib"),l=e("../../lib/polygon"),ee=e("../../lib/throttle"),d=e("./axis_ids").getFromId,y=e("../../lib/clear_gl_canvases"),g=e("../../plot_api/subroutines").redrawReglTraces,te=e("./constants"),ne=te.MINSELECT,re=l.filter,ie=l.tester,s=e("./handle_outline").clearSelect,e=e("./helpers"),oe=e.p2r,ae=e.axValue,se=e.getTransform;function le(e,t,n,r,i,o,a){var s,l,u,c=t._hoverdata,f=-1<t._fullLayout.clickmode.indexOf("event"),d=[];if((u=c)&&Array.isArray(u)&&!0!==u[0].hoverOnBox){ce(e,t,o);var h,i=function(e,t){var n,r,i=e[0],o=-1,a=[];for(r=0;r<t.length;r++)if(n=t[r],i.fullData._expandedIndex===n.cd[0].trace._expandedIndex){if(!0===i.hoverOnBox)break;void 0!==i.pointNumber?o=i.pointNumber:void 0!==i.binNumber&&(o=i.binNumber,a=i.pointNumbers);break}return{pointNumber:o,pointNumbers:a,searchInfo:n}}(c,h=de(t,n,r,i));if(0<i.pointNumbers.length?function(e,t){var n,r,i,o=[];for(i=0;i<e.length;i++)(n=e[i]).cd[0].trace.selectedpoints&&0<n.cd[0].trace.selectedpoints.length&&o.push(n);if(1===o.length&&o[0]===t.searchInfo&&(r=t.searchInfo.cd[0].trace).selectedpoints.length===t.pointNumbers.length){for(i=0;i<t.pointNumbers.length;i++)if(r.selectedpoints.indexOf(t.pointNumbers[i])<0)return!1;return!0}return!1}(h,i):function(e){var t,n,r=0;for(n=0;n<e.length;n++)if(t=e[n],(t=t.cd[0].trace).selectedpoints){if(1<t.selectedpoints.length)return!1;if(1<(r+=t.selectedpoints.length))return!1}return 1===r}(h)&&(p=m(i))){for(a&&a.remove(),g=0;g<h.length;g++)(s=h[g])._module.selectPoints(s,!1);he(t,h),fe(o),f&&t.emit("plotly_deselect",null)}else{for(var e=e.shiftKey&&(void 0!==p?p:m(i)),p={pointNumber:i.pointNumber,searchInfo:i.searchInfo,subtract:e},y=ue(o.selectionDefs.concat([p])),g=0;g<h.length;g++)if(l=pe(h[g]._module.selectPoints(h[g],y),h[g]),d.length)for(var v=0;v<l.length;v++)d.push(l[v]);else d=l;he(t,h,i={points:d}),o&&o.selectionDefs.push(p),a&&(e=o.mergedPolygons,p=Z(o.dragmode),K(ye(e,p),a,o)),f&&t.emit("plotly_selected",i)}}}function u(e){return"pointNumber"in e&&"searchInfo"in e}function ue(e){for(var t,a=[],n=u(e[0])?0:e[0][0][0],r=n,i=u(e[0])?0:e[0][0][1],o=i,s=0;s<e.length;s++)u(e[s])?a.push(function(o){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(e,t,n,r){var i=o.searchInfo.cd[0].trace._expandedIndex;return r.cd[0].trace._expandedIndex===i&&n===o.pointNumber},isRect:!1,degenerate:!1,subtract:o.subtract}}(e[s])):((t=l.tester(e[s])).subtract=e[s].subtract,a.push(t),n=Math.min(n,t.xmin),r=Math.max(r,t.xmax),i=Math.min(i,t.ymin),o=Math.max(o,t.ymax));return{xmin:n,xmax:r,ymin:i,ymax:o,pts:[],contains:function(e,t,n,r){for(var i=!1,o=0;o<a.length;o++)a[o].contains(e,t,n,r)&&(i=!1===a[o].subtract);return i},isRect:!1,degenerate:!1}}function ce(e,t,n){t._fullLayout._drawing=!1;var r=t._fullLayout,i=n.plotinfo,o=n.dragmode,a=r._lastSelectedSubplot&&r._lastSelectedSubplot===i.id,o=(e.shiftKey||e.altKey)&&!(X(o)&&Z(o));a&&o&&i.selection&&i.selection.selectionDefs&&!n.selectionDefs?(n.selectionDefs=i.selection.selectionDefs,n.mergedPolygons=i.selection.mergedPolygons):o&&i.selection||fe(n),a||(s(t),r._lastSelectedSubplot=i.id)}function fe(e){var t=e.dragmode,n=e.plotinfo,r=e.gd;0<=r._fullLayout._activeShapeIndex&&r._fullLayout._deactivateShape(r),!X(t)||(t=r._fullLayout._zoomlayer.selectAll(".select-outline-"+n.id))&&r._fullLayout._drawing&&((t=i(t,e))&&p.call("_guiRelayout",r,{shapes:t}),r._fullLayout._drawing=!1),n.selection={},n.selection.selectionDefs=e.selectionDefs=[],n.selection.mergedPolygons=e.mergedPolygons=[]}function de(e,t,n,r){for(var i,o,a,s=[],l=t.map(function(e){return e._id}),u=n.map(function(e){return e._id}),c=0;c<e.calcdata.length;c++)!0===(a=(i=e.calcdata[c])[0].trace).visible&&a._module&&a._module.selectPoints&&(!r||a.subplot!==r&&a.geo!==r?"splom"===a.type&&a._xaxes[l[0]]&&a._yaxes[u[0]]?((o=f(a._module,i,t[0],n[0])).scene=e._fullLayout._splomScenes[a.uid],s.push(o)):"sankey"===a.type?(o=f(a._module,i,t[0],n[0]),s.push(o)):-1!==l.indexOf(a.xaxis)&&-1!==u.indexOf(a.yaxis)&&s.push(f(a._module,i,d(e,a.xaxis),d(e,a.yaxis))):s.push(f(a._module,i,t[0],n[0])));return s;function f(e,t,n,r){return{_module:e,cd:t,xaxis:n,yaxis:r}}}function m(e){var t=e.searchInfo.cd[0].trace,n=e.pointNumber,e=e.pointNumbers,n=0<e.length?e[0]:n;return!!t.selectedpoints&&-1<t.selectedpoints.indexOf(n)}function he(e,t,n){var r,i;for(l=0;l<t.length;l++){var o=t[l].cd[0].trace._fullInput,a=e._fullLayout._tracePreGUI[o.uid]||{};void 0===a.selectedpoints&&(a.selectedpoints=o._input.selectedpoints||null)}if(n){for(var s=n.points||[],l=0;l<t.length;l++)(i=t[l].cd[0].trace)._input.selectedpoints=i._fullInput.selectedpoints=[],i._fullInput!==i&&(i.selectedpoints=[]);for(l=0;l<s.length;l++){var u=s[l],c=u.data,f=u.fullData;u.pointIndices?([].push.apply(c.selectedpoints,u.pointIndices),i._fullInput!==i&&[].push.apply(f.selectedpoints,u.pointIndices)):(c.selectedpoints.push(u.pointIndex),i._fullInput!==i&&f.selectedpoints.push(u.pointIndex))}}else for(l=0;l<t.length;l++)delete(i=t[l].cd[0].trace).selectedpoints,delete i._input.selectedpoints,i._fullInput!==i&&delete i._fullInput.selectedpoints;var d=!1;for(l=0;l<t.length;l++){i=(r=(h=t[l]).cd)[0].trace,p.traceIs(i,"regl")&&(d=!0);var h=h._module,h=h.styleOnSelect||h.style;h&&(h(e,r,r[0].node3),r[0].nodeRangePlot3&&h(e,r,r[0].nodeRangePlot3))}d&&(y(e),g(e))}function pe(e,t){if(Array.isArray(e))for(var n=t.cd,r=t.cd[0].trace,i=0;i<e.length;i++)e[i]=o(e[i],r,n);return e}function ye(e,t){for(var n=[],r=0;r<e.length;r++){n[r]=[];for(var i=0;i<e[r].length;i++){n[r][i]=[],n[r][i][0]=i?"L":"M";for(var o=0;o<e[r][i].length;o++)n[r][i].push(e[r][i][o])}t||n[r].push(["Z",n[r][0][1],n[r][0][2]])}return n}t.exports={prepSelect:function(e,t,n,s,r){var l=W(r),u=Y(r),c=Z(r),f=X(r),d=$(r),h="drawcircle"===r,p="drawline"===r||h,y=s.gd,g=y._fullLayout,i=g._zoomlayer,o=s.element.getBoundingClientRect(),a=s.plotinfo,v=se(a),m=t-o.left,b=n-o.top;g._calcInverseTransform(y);var x,_,w,M,j,k,O,A,T,m=(o=J.apply3DTransform(g._invTransform)(m,b))[0],b=o[1],P=g._invScaleX,S=g._invScaleY,o="M"+m+","+b,E=s.xaxes[0]._length,C=s.yaxes[0]._length,L=s.xaxes.concat(s.yaxes),R=e.altKey&&!(X(r)&&c);ce(e,y,s),l&&(w=re([[m,b]],te.BENDPX));var I=i.selectAll("path.select-outline-"+a.id).data(f?[0]:[1,2]),e=g.newshape;I.enter().append("path").attr("class",function(e){return"select-outline select-outline-"+e+" select-outline-"+a.id}).style(f?{opacity:e.opacity/2,fill:c?void 0:e.fillcolor,stroke:e.line.color,"stroke-dasharray":H(e.line.dash,e.line.width),"stroke-width":e.line.width+"px"}:{}).attr("fill-rule",e.fillrule).classed("cursor-move",!!f).attr("transform",v).attr("d",o+"Z");var z,D=i.append("path").attr("class","zoombox-corners").style({fill:V.background,stroke:V.defaultLine,"stroke-width":1}).attr("transform",v).attr("d","M0,0Z"),N=g._uid+te.SELECTID,F=[],B=de(y,s.xaxes,s.yaxes,s.subplot);function U(e,t){return e-t}z=a.fillRangeItems||(u?function(e,t){var n=e.range={};for(O=0;O<L.length;O++){var r=L[O],i=r._id.charAt(0);n[r._id]=[oe(r,t[i+"min"]),oe(r,t[i+"max"])].sort(U)}}:function(e,t,n){var r=e.lassoPoints={};for(O=0;O<L.length;O++){var i=L[O];r[i._id]=n.filtered.map(ae(i))}}),s.moveFn=function(e,t){x=Math.max(0,Math.min(E,P*e+m)),_=Math.max(0,Math.min(C,S*t+b));var n,r,i=Math.abs(x-m),o=Math.abs(_-b);if(u){if(d){var a,t=g.selectdirection;switch(a="any"===t?o<Math.min(.6*i,ne)?"h":i<Math.min(.6*o,ne)?"v":"d":t){case"h":n=h?C/2:0,r=C;break;case"v":n=h?E/2:0,r=E}}if(f)switch(g.newshape.drawdirection){case"vertical":a="h",n=h?C/2:0,r=C;break;case"horizontal":a="v",n=h?E/2:0,r=E;break;case"ortho":r=i<o?(a="h",n=b,_):(a="v",n=m,x);break;default:a="d"}"h"===a?((k=p?Q(h,[x,n],[x,r]):[[m,n],[m,r],[x,r],[x,n]]).xmin=p?x:Math.min(m,x),k.xmax=p?x:Math.max(m,x),k.ymin=Math.min(n,r),k.ymax=Math.max(n,r),D.attr("d","M"+k.xmin+","+(b-ne)+"h-4v"+2*ne+"h4ZM"+(k.xmax-1)+","+(b-ne)+"h4v"+2*ne+"h-4Z")):"v"===a?((k=p?Q(h,[n,_],[r,_]):[[n,b],[n,_],[r,_],[r,b]]).xmin=Math.min(n,r),k.xmax=Math.max(n,r),k.ymin=p?_:Math.min(b,_),k.ymax=p?_:Math.max(b,_),D.attr("d","M"+(m-ne)+","+k.ymin+"v-4h"+2*ne+"v4ZM"+(m-ne)+","+(k.ymax-1)+"v4h"+2*ne+"v-4Z")):"d"===a&&((k=p?Q(h,[m,b],[x,_]):[[m,b],[m,_],[x,_],[x,b]]).xmin=Math.min(m,x),k.xmax=Math.max(m,x),k.ymin=Math.min(b,_),k.ymax=Math.max(b,_),D.attr("d","M0,0Z"))}else l&&(w.addPt([x,_]),k=w.filtered);M=s.selectionDefs&&s.selectionDefs.length?(j=function(e,t,n){if(n)return q.difference({regions:e,inverted:!1},{regions:[t],inverted:!1}).regions;return q.union({regions:e,inverted:!1},{regions:[t],inverted:!1}).regions}(s.mergedPolygons,k,R),k.subtract=R,ue(s.selectionDefs.concat([k]))):(j=[k],ie(k)),K(ye(j,c),I,s),d&&ee.throttle(N,te.SELECTDELAY,function(){var e;F=[];var t,n=[];for(O=0;O<B.length;O++)if(t=(A=B[O])._module.selectPoints(A,M),n.push(t),e=pe(t,A),F.length)for(var r=0;r<e.length;r++)F.push(e[r]);else F=e;he(y,B,T={points:F}),z(T,k,w),s.gd.emit("plotly_selecting",T)})},s.clickFn=function(e,t){var n;D.remove(),0<=y._fullLayout._activeShapeIndex?y._fullLayout._deactivateShape(y):f||(n=g.clickmode,ee.done(N).then(function(){if(ee.clear(N),2===e){for(I.remove(),O=0;O<B.length;O++)(A=B[O])._module.selectPoints(A,!1);he(y,B),fe(s),y.emit("plotly_deselect",null)}else-1<n.indexOf("select")&&le(t,y,s.xaxes,s.yaxes,s.subplot,s,I),"event"===n&&y.emit("plotly_selected",void 0);G.click(y,t)}).catch(J.error))},s.doneFn=function(){D.remove(),ee.done(N).then(function(){ee.clear(N),s.gd.emit("plotly_selected",T),k&&s.selectionDefs&&(k.subtract=R,s.selectionDefs.push(k),s.mergedPolygons.length=0,[].push.apply(s.mergedPolygons,j)),s.doneFnCompleted&&s.doneFnCompleted(F)}).catch(J.error),f&&fe(s)}},clearSelect:s,clearSelectionsCache:fe,selectOnClick:le}},{"../../components/color":647,"../../components/dragelement/helpers":665,"../../components/drawing":669,"../../components/fx":687,"../../components/fx/helpers":683,"../../components/shapes/draw_newshape/display_outlines":735,"../../components/shapes/draw_newshape/helpers":736,"../../components/shapes/draw_newshape/newshapes":737,"../../lib":779,"../../lib/clear_gl_canvases":766,"../../lib/polygon":791,"../../lib/throttle":805,"../../plot_api/subroutines":818,"../../registry":879,"./axis_ids":832,"./constants":835,"./handle_outline":839,"./helpers":840,polybooljs:963}],850:[function(e,t,n){"use strict";var v=e("@plotly/d3"),b=e("d3-time-format").utcFormat,x=e("../../lib"),_=x.numberFormat,w=e("fast-isnumeric"),M=x.cleanNumber,j=x.ms2DateTime,k=x.dateTime2ms,O=x.ensureNumber,A=x.isArrayOrTypedArray,r=e("../../constants/numerical"),T=r.FP_SAFE,P=r.BADNUM,S=r.LOG_CLIP,E=r.ONEWEEK,C=r.ONEDAY,L=r.ONEHOUR,R=r.ONEMIN,I=r.ONESEC,z=e("./axis_ids"),D=e("./constants"),N=D.HOUR_PATTERN,F=D.WEEKDAY_PATTERN;function B(e){return Math.pow(10,e)}function U(e){return null!=e}t.exports=function(m,h){h=h||{};var p=m._id||"x",y=p.charAt(0);function n(e,t){if(0<e)return Math.log(e)/Math.LN10;if(e<=0&&t&&m.range&&2===m.range.length){e=m.range[0],t=m.range[1];return.5*(e+t-2*S*Math.abs(e-t))}return P}function r(e,t,n,r){if((r||{}).msUTC&&w(e))return+e;if((r=k(e,n||m.calendar))===P){if(!w(e))return P;e=+e;n=Math.floor(10*x.mod(e+.05,1)),e=Math.round(e-n/10),r=k(new Date(e))+n/10}return r}function i(e,t,n){return j(e,t,n||m.calendar)}function t(e){return m._categories[Math.round(e)]}function g(e){if(U(e)){if(void 0===m._categoriesMap&&(m._categoriesMap={}),void 0!==m._categoriesMap[e])return m._categoriesMap[e];m._categories.push("number"==typeof e?String(e):e);var t=m._categories.length-1;return m._categoriesMap[e]=t}return P}function f(e){if(m._categoriesMap)return m._categoriesMap[e]}function o(e){var t=f(e);return void 0!==t?t:w(e)?+e:void 0}function a(e){return w(e)?+e:f(e)}function u(e,t,n){return v.round(n+t*e,2)}function s(e,t,n){return(e-n)/t}var c,l=function(e){return w(e)?u(e,m._m,m._b):P},d=function(e){return s(e,m._m,m._b)};m.rangebreaks&&(c="y"===y,l=function(e){if(!w(e))return P;var t=m._rangebreaks.length;if(!t)return u(e,m._m,m._b);for(var n=c,r=(n=m.range[0]>m.range[1]?!n:n)?-1:1,i=r*e,o=0,a=0;a<t;a++){var s=r*m._rangebreaks[a].min,l=r*m._rangebreaks[a].max;if(i<s)break;if(!(l<i)){o=i<(s+l)/2?a:a+1;break}o=a+1}n=m._B[o]||0;return isFinite(n)?u(e,m._m2,n):0},d=function(e){var t=m._rangebreaks.length;if(!t)return s(e,m._m,m._b);for(var n=0,r=0;r<t&&!(e<m._rangebreaks[r].pmin);r++)e>m._rangebreaks[r].pmax&&(n=r+1);return s(e,m._m2,m._B[n])}),m.c2l="log"===m.type?n:O,m.l2c="log"===m.type?B:O,m.l2p=l,m.p2l=d,m.c2p="log"===m.type?function(e,t){return l(n(e,t))}:l,m.p2c="log"===m.type?function(e){return B(d(e))}:d,-1!==["linear","-"].indexOf(m.type)?(m.d2r=m.r2d=m.d2c=m.r2c=m.d2l=m.r2l=M,m.c2d=m.c2r=m.l2d=m.l2r=O,m.d2p=m.r2p=function(e){return m.l2p(M(e))},m.p2d=m.p2r=d,m.cleanPos=O):"log"===m.type?(m.d2r=m.d2l=function(e,t){return n(M(e),t)},m.r2d=m.r2c=function(e){return B(M(e))},m.d2c=m.r2l=M,m.c2d=m.l2r=O,m.c2r=n,m.l2d=B,m.d2p=function(e,t){return m.l2p(m.d2r(e,t))},m.p2d=function(e){return B(d(e))},m.r2p=function(e){return m.l2p(M(e))},m.p2r=d,m.cleanPos=O):"date"===m.type?(m.d2r=m.r2d=x.identity,m.d2c=m.r2c=m.d2l=m.r2l=r,m.c2d=m.c2r=m.l2d=m.l2r=i,m.d2p=m.r2p=function(e,t,n){return m.l2p(r(e,0,n))},m.p2d=m.p2r=function(e,t,n){return i(d(e),t,n)},m.cleanPos=function(e){return x.cleanDate(e,P,m.calendar)}):"category"===m.type?(m.d2c=m.d2l=g,m.r2d=m.c2d=m.l2d=t,m.d2r=m.d2l_noadd=o,m.r2c=function(e){e=a(e);return void 0!==e?e:m.fraction2r(.5)},m.l2r=m.c2r=O,m.r2l=a,m.d2p=function(e){return m.l2p(m.r2c(e))},m.p2d=function(e){return t(d(e))},m.r2p=m.d2p,m.p2r=d,m.cleanPos=function(e){return"string"==typeof e&&""!==e?e:O(e)}):"multicategory"===m.type&&(m.r2d=m.c2d=m.l2d=t,m.d2r=m.d2l_noadd=o,m.r2c=function(e){e=o(e);return void 0!==e?e:m.fraction2r(.5)},m.r2c_just_indices=f,m.l2r=m.c2r=O,m.r2l=o,m.d2p=function(e){return m.l2p(m.r2c(e))},m.p2d=function(e){return t(d(e))},m.r2p=m.d2p,m.p2r=d,m.cleanPos=function(e){return Array.isArray(e)||"string"==typeof e&&""!==e?e:O(e)},m.setupMultiCategory=function(e){var t,n=m._traceIndices,r=m._matchGroup;if(r&&0===m._categories.length)for(var i in r)i!==p&&(i=h[z.id2name(i)],n=n.concat(i._traceIndices));for(var o=[[0,{}],[0,{}]],a=[],s=0;s<n.length;s++){var l=e[n[s]];if(y in l){var u=l[y],c=l._length||x.minRowLength(u);if(A(u[0])&&A(u[1]))for(t=0;t<c;t++){var f=u[0][t],d=u[1][t];U(f)&&U(d)&&(a.push([f,d]),f in o[0][1]||(o[0][1][f]=o[0][0]++),d in o[1][1]||(o[1][1][d]=o[1][0]++))}}}for(a.sort(function(e,t){var n=o[0][1],n=n[e[0]]-n[t[0]];if(n)return n;n=o[1][1];return n[e[1]]-n[t[1]]}),s=0;s<a.length;s++)g(a[s])}),m.fraction2r=function(e){var t=m.r2l(m.range[0]),n=m.r2l(m.range[1]);return m.l2r(t+e*(n-t))},m.r2fraction=function(e){var t=m.r2l(m.range[0]),n=m.r2l(m.range[1]);return(m.r2l(e)-t)/(n-t)},m.cleanRange=function(e,t){t=t||{};var n,r=x.nestedProperty(m,e=e||"range").get(),i="date"===m.type?x.dfltRange(m.calendar):"y"===y?D.DFLTRANGEY:"realaxis"===m._name?[0,1]:t.dfltRange||D.DFLTRANGEX;if(i=i.slice(),"tozero"!==m.rangemode&&"nonnegative"!==m.rangemode||(i[0]=0),r&&2===r.length)for("date"!==m.type||m.autorange||(r[0]=x.cleanDate(r[0],P,m.calendar),r[1]=x.cleanDate(r[1],P,m.calendar)),n=0;n<2;n++)if("date"===m.type){if(!x.isDateTime(r[n],m.calendar)){m[e]=i;break}if(m.r2l(r[0])===m.r2l(r[1])){var o=x.constrain(m.r2l(r[0]),x.MIN_MS+1e3,x.MAX_MS-1e3);r[0]=m.l2r(o-1e3),r[1]=m.l2r(o+1e3);break}}else{if(!w(r[n])){if(!w(r[1-n])){m[e]=i;break}r[n]=r[1-n]*(n?10:.1)}r[n]<-T?r[n]=-T:r[n]>T&&(r[n]=T),r[0]===r[1]&&(o=Math.max(1,Math.abs(1e-6*r[0])),r[0]-=o,r[1]+=o)}else x.nestedProperty(m,e).set(i)},m.setScale=function(e){var t=h._size;m.overlaying&&(r=z.getFromId({_fullLayout:h},m.overlaying),m.domain=r.domain);var n=e&&m._r?"_r":"range",r=m.calendar;m.cleanRange(n);var i,o,e=m.r2l(m[n][0],r),n=m.r2l(m[n][1],r),r="y"===y;if((r?(m._offset=t.t+(1-m.domain[1])*t.h,m._length=t.h*(m.domain[1]-m.domain[0]),m._m=m._length/(e-n),m._b=-m._m*n):(m._offset=t.l+m.domain[0]*t.w,m._length=t.w*(m.domain[1]-m.domain[0]),m._m=m._length/(n-e),m._b=-m._m*e),m._rangebreaks=[],m._lBreaks=0,m._m2=0,m._B=[],m.rangebreaks)&&(m._rangebreaks=m.locateBreaks(Math.min(e,n),Math.max(e,n)),m._rangebreaks.length)){for(i=0;i<m._rangebreaks.length;i++)o=m._rangebreaks[i],m._lBreaks+=Math.abs(o.max-o.min);t=r;(t=n<e?!r:r)&&m._rangebreaks.reverse();var a=t?-1:1;for(m._m2=a*m._length/(Math.abs(n-e)-m._lBreaks),m._B.push(-m._m2*(r?n:e)),i=0;i<m._rangebreaks.length;i++)o=m._rangebreaks[i],m._B.push(m._B[m._B.length-1]-a*m._m2*(o.max-o.min));for(i=0;i<m._rangebreaks.length;i++)(o=m._rangebreaks[i]).pmin=l(o.min),o.pmax=l(o.max)}if(!isFinite(m._m)||!isFinite(m._b)||m._length<0)throw h._replotting=!1,new Error("Something went wrong with axis scaling")},m.maskBreaks=function(e){var t=m.rangebreaks||[];t._cachedPatterns||(t._cachedPatterns=t.map(function(e){return e.enabled&&e.bounds?x.simpleMap(e.bounds,e.pattern?M:m.d2c):null})),t._cachedValues||(t._cachedValues=t.map(function(e){return e.enabled&&e.values?x.simpleMap(e.values,m.d2c).sort(x.sorterAsc):null}));for(var n=0;n<t.length;n++){var r=t[n];if(r.enabled)if(r.bounds){var i,o=r.pattern,a=(i=t._cachedPatterns[n])[0],s=i[1];switch(o){case F:u=(l=new Date(e)).getUTCDay(),s<a&&(s+=7,u<a&&(u+=7));break;case N:var l,u=(l=new Date(e)).getUTCHours()+(l.getUTCMinutes()/60+l.getUTCSeconds()/3600+l.getUTCMilliseconds()/36e5);s<a&&(s+=24,u<a&&(u+=24));break;case"":u=e}if(a<=u&&u<s)return P}else for(var c=t._cachedValues[n],f=0;f<c.length;f++)if(s=(a=c[f])+r.dvalue,a<=e&&e<s)return P}return e},m.locateBreaks=function(o,a){var s=[];if(!m.rangebreaks)return s;for(var e=m.rangebreaks.slice().sort(function(e,t){return e.pattern===F&&t.pattern===N?-1:t.pattern===F&&e.pattern===N?1:0}),t=function(e,t){if((e=x.constrain(e,o,a))!==(t=x.constrain(t,o,a))){for(var n=!0,r=0;r<s.length;r++){var i=s[r];e<i.max&&t>=i.min&&(e<i.min&&(i.min=e),t>i.max&&(i.max=t),n=!1)}n&&s.push({min:e,max:t})}},n=0;n<e.length;n++){var r=e[n];if(r.enabled)if(r.bounds){var i=o,l=a;r.pattern&&(i=Math.floor(i));var u,c,f,d=(u=x.simpleMap(r.bounds,r.pattern?M:m.r2l))[0],h=u[1],p=new Date(i);switch(r.pattern){case F:f=E,c=(h-d+(h<d?7:0))*C,i+=d*C-(p.getUTCDay()*C+p.getUTCHours()*L+p.getUTCMinutes()*R+p.getUTCSeconds()*I+p.getUTCMilliseconds());break;case N:f=C,c=(h-d+(h<d?24:0))*L,i+=d*L-(p.getUTCHours()*L+p.getUTCMinutes()*R+p.getUTCSeconds()*I+p.getUTCMilliseconds());break;default:i=Math.min(u[0],u[1]),c=f=(l=Math.max(u[0],u[1]))-i}for(var y=i;y<l;y+=f)t(y,y+c)}else for(var g=x.simpleMap(r.values,m.d2c),v=0;v<g.length;v++)t(d=g[v],h=d+r.dvalue)}return s.sort(function(e,t){return e.min-t.min}),s},m.makeCalcdata=function(e,t,n){var r=m.type,i="date"===r&&e[t+"calendar"];if(t in e){if(s=e[t],l=e._length||x.minRowLength(s),x.isTypedArray(s)&&("linear"===r||"log"===r)){if(l===s.length)return s;if(s.subarray)return s.subarray(0,l)}if("multicategory"===r)return function(e,t){for(var n=new Array(t),r=0;r<t;r++){var i=(e[0]||[])[r],o=(e[1]||[])[r];n[r]=f([i,o])}return n}(s,l);for(u=new Array(l),c=0;c<l;c++)u[c]=m.d2c(s[c],0,i,n)}else for(var o=(t+"0"in e?m.d2c(e[t+"0"],0,i):0),a=e["d"+t]?Number(e["d"+t]):1,s=e[{x:"y",y:"x"}[t]],l=e._length||s.length,u=new Array(l),c=0;c<l;c++)u[c]=o+c*a;if(m.rangebreaks)for(c=0;c<l;c++)u[c]=m.maskBreaks(u[c]);return u},m.isValidRange=function(e){return Array.isArray(e)&&2===e.length&&w(m.r2l(e[0]))&&w(m.r2l(e[1]))},m.isPtWithinRange=function(e,t){var n=m.c2l(e[y],null,t),e=m.r2l(m.range[0]),t=m.r2l(m.range[1]);return e<t?e<=n&&n<=t:t<=n&&n<=e},m._emptyCategories=function(){m._categories=[],m._categoriesMap={}},m.clearCalc=function(){var e=m._matchGroup;if(e){var t,n=null,r=null;for(t in e){var i=h[z.id2name(t)];if(i._categories){n=i._categories,r=i._categoriesMap;break}}n&&r?(m._categories=n,m._categoriesMap=r):m._emptyCategories()}else m._emptyCategories();if(m._initialCategories)for(var o=0;o<m._initialCategories.length;o++)g(m._initialCategories[o])},m.sortByInitialCategories=function(){var e=[];if(m._emptyCategories(),m._initialCategories)for(var t=0;t<m._initialCategories.length;t++)g(m._initialCategories[t]);var n,r,e=e.concat(m._traceIndices);for(n in m._matchGroup)p!==n&&((r=h[z.id2name(n)])._categories=m._categories,r._categoriesMap=m._categoriesMap,e=e.concat(r._traceIndices));return e};var e=h._d3locale;"date"===m.type&&(m._dateFormat=e?e.timeFormat:b,m._extraFormat=h._extraFormat),m._separators=h.separators,m._numFormat=e?e.numberFormat:_,delete m._minDtick,delete m._forceTick0}},{"../../constants/numerical":758,"../../lib":779,"./axis_ids":832,"./constants":835,"@plotly/d3":3,"d3-time-format":629,"fast-isnumeric":574}],851:[function(e,t,n){"use strict";t.exports=function(t){var n=["showexponent","showtickprefix","showticksuffix"].filter(function(e){return void 0!==t[e]});if(n.every(function(e){return t[e]===t[n[0]]})||1===n.length)return t[n[0]]}},{}],852:[function(e,t,n){"use strict";var l=e("../../lib"),u=e("../../components/color").contrast,c=e("./layout_attributes"),f=e("./show_dflt"),d=e("../array_container_defaults");function h(n,r){function e(e,t){return l.coerce(n,r,c.tickformatstops,e,t)}e("enabled")&&(e("dtickrange"),e("value"))}t.exports=function(e,t,n,r,i){i=i||{};var o,a,s=f(e);n("showticklabels")&&(o=i.font||{},a=t.color,a=-1!==(t.ticklabelposition||"").indexOf("inside")?u(i.bgColor):a&&a!==c.color.dflt?a:o.color,l.coerceFont(n,"tickfont",{family:o.family,size:o.size,color:a}),i.noAng||n("tickangle"),"category"!==r&&(a=n("tickformat"),d(e,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:h}),t.tickformatstops.length||delete t.tickformatstops,i.noExp||a||"date"===r||(n("showexponent",s),n("exponentformat"),n("minexponent"),n("separatethousands"))))}},{"../../components/color":647,"../../lib":779,"../array_container_defaults":823,"./layout_attributes":843,"./show_dflt":851}],853:[function(e,t,n){"use strict";var a=e("../../lib"),s=e("./layout_attributes");t.exports=function(e,t,n,r){var i=a.coerce2(e,t,s,"ticklen"),o=a.coerce2(e,t,s,"tickwidth"),e=a.coerce2(e,t,s,"tickcolor",t.color);n("ticks",r.outerTicks||i||o||e?"outside":"")||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)}},{"../../lib":779,"./layout_attributes":843}],854:[function(e,t,n){"use strict";var l=e("./clean_ticks"),u=e("../../lib").isArrayOrTypedArray;t.exports=function(n,r,e,t){function i(e){var t=n[e];return void 0!==t?t:(r._template||{})[e]}var o=i("tick0"),a=i("dtick"),s=i("tickvals"),s=e("tickmode",u(s)?"array":a?"linear":"auto");"auto"===s?e("nticks"):"linear"===s?(a=r.dtick=l.dtick(a,t),r.tick0=l.tick0(o,t,r.calendar,a)):"multicategory"!==t&&(void 0===e("tickvals")?r.tickmode="auto":e("ticktext"))}},{"../../lib":779,"./clean_ticks":834}],855:[function(e,t,n){"use strict";var d=e("@plotly/d3"),h=e("../../registry"),m=e("../../lib"),b=e("../../components/drawing"),x=e("./axes");t.exports=function(v,o,i,e){var a,s,l,u,r=v._fullLayout;if(0!==o.length){e&&(a=e());var c=d.ease(i.easing);return v._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(u),u=null,function(){for(var e={},t=0;t<o.length;t++){var n=o[t],r=n.plotinfo.xaxis,i=n.plotinfo.yaxis;n.xr0&&(e[r._name+".range"]=n.xr0.slice()),n.yr0&&(e[i._name+".range"]=n.yr0.slice())}return h.call("relayout",v,e).then(function(){for(var e=0;e<o.length;e++)f(o[e].plotinfo)})}()}),s=Date.now(),u=window.requestAnimationFrame(function e(){l=Date.now();for(var t=Math.min(1,(l-s)/i.duration),n=c(t),r=0;r<o.length;r++)!function(e,t){var n,r,i,o,a=e.plotinfo,s=a.xaxis,l=a.yaxis,u=s._length,c=l._length,f=!!e.xr1,d=!!e.yr1,h=[];f?(n=m.simpleMap(e.xr0,s.r2l),r=m.simpleMap(e.xr1,s.r2l),i=n[1]-n[0],o=r[1]-r[0],h[0]=(n[0]*(1-t)+t*r[0]-n[0])/(n[1]-n[0])*u,h[2]=u*(1-t+t*o/i),s.range[0]=s.l2r(n[0]*(1-t)+t*r[0]),s.range[1]=s.l2r(n[1]*(1-t)+t*r[1])):(h[0]=0,h[2]=u),d?(y=m.simpleMap(e.yr0,l.r2l),g=m.simpleMap(e.yr1,l.r2l),p=y[1]-y[0],e=g[1]-g[0],h[1]=(y[1]*(1-t)+t*g[1]-y[1])/(y[0]-y[1])*c,h[3]=c*(1-t+t*e/p),l.range[0]=s.l2r(y[0]*(1-t)+t*g[0]),l.range[1]=l.l2r(y[1]*(1-t)+t*g[1])):(h[1]=0,h[3]=c),x.drawOne(v,s,{skipTitle:!0}),x.drawOne(v,l,{skipTitle:!0}),x.redrawComponents(v,[s._id,l._id]);var p=f?u/h[2]:1,y=d?c/h[3]:1,t=f?h[0]:0,g=d?h[1]:0,u=f?h[0]/h[2]*u:0,c=d?h[1]/h[3]*c:0,u=s._offset-u,c=l._offset-c;a.clipRect.call(b.setTranslate,t,g).call(b.setScale,1/p,1/y),a.plot.call(b.setTranslate,u,c).call(b.setScale,p,y),b.setPointGroupScale(a.zoomScalePts,1/p,1/y),b.setTextPointsScale(a.zoomScaleTxt,1/p,1/y)}(o[r],n);u=l-s>i.duration?(function(){for(var e={},t=0;t<o.length;t++){var n=o[t],r=n.plotinfo.xaxis,i=n.plotinfo.yaxis;n.xr1&&(e[r._name+".range"]=n.xr1.slice()),n.yr1&&(e[i._name+".range"]=n.yr1.slice())}a&&a(),h.call("relayout",v,e).then(function(){for(var e=0;e<o.length;e++)f(o[e].plotinfo)})}(),window.cancelAnimationFrame(e)):window.requestAnimationFrame(e)}),Promise.resolve()}function f(e){var t=e.xaxis,n=e.yaxis;r._defs.select("#"+e.clipId+"> rect").call(b.setTranslate,0,0).call(b.setScale,1,1),e.plot.call(b.setTranslate,t._offset,n._offset).call(b.setScale,1,1);n=e.plot.selectAll(".scatterlayer .trace");n.selectAll(".point").call(b.setPointGroupScale,1,1),n.selectAll(".textpoint").call(b.setTextPointsScale,1,1),n.call(b.hideOutsideRangePoints,e)}x.redrawComponents(v)}},{"../../components/drawing":669,"../../lib":779,"../../registry":879,"./axes":828,"@plotly/d3":3}],856:[function(e,t,n){"use strict";var h=e("../../registry").traceIs,p=e("./axis_autotype");function y(e){return{v:"x",h:"y"}[e.orientation||"v"]}function g(e,t){var n=y(e),r=h(e,"box-violin"),i=h(e._fullInput||{},"candlestick");return r&&!i&&t===n&&void 0===e[n]&&void 0===e[n+"0"]}t.exports=function(e,t,n,r){n("autotypenumbers",r.autotypenumbersDflt),"-"===n("type",(r.splomStash||{}).type)&&(function(e,t){if("-"===e.type){var n,r=e._id,i=r.charAt(0);-1!==r.indexOf("scene")&&(r=i);var o=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if("splom"===i.type&&0<i._length&&(i["_"+n+"axes"]||{})[t])return i;if((i[n+"axis"]||n)===t){if(g(i,n))return i;if((i[n]||[]).length||i[n+"0"])return i}}}(t,r,i);if(o)if("histogram"!==o.type||i!=={v:"y",h:"x"}[o.orientation||"v"]){var a,s=i+"calendar",l=o[s],u={noMultiCategory:!h(o,"cartesian")||h(o,"noMultiCategory")};if("box"===o.type&&o._hasPreCompStats&&i==={h:"x",v:"y"}[o.orientation||"v"]&&(u.noMultiCategory=!0),u.autotypenumbers=e.autotypenumbers,g(o,i)){var c=y(o),f=[];for(n=0;n<t.length;n++){var d=t[n];h(d,"box-violin")&&(d[i+"axis"]||i)===r&&(void 0!==d[c]?f.push(d[c][0]):void 0!==d.name?f.push(d.name):f.push("text"),d[s]!==l&&(l=void 0))}e.type=p(f,l,u)}else"splom"===o.type?(a=o.dimensions[o._axesDim[r]]).visible&&(e.type=p(a.values,l,u)):e.type=p(o[i]||[o[i+"0"]],l,u)}else e.type="linear"}}(t,r.data),"-"===t.type?t.type="linear":e.type=t.type)}},{"../../registry":879,"./axis_autotype":829}],857:[function(e,t,c){"use strict";var a=e("../registry"),d=e("../lib");function u(e,t,n){var r,i=!1;if("data"===t.type)r=e._fullData[null!==t.traces?t.traces[0]:0];else{if("layout"!==t.type)return!1;r=e._fullLayout}return r=d.nestedProperty(r,t.prop).get(),{changed:i=(n=n[t.type]=n[t.type]||{}).hasOwnProperty(t.prop)&&n[t.prop]!==r?!0:i,value:n[t.prop]=r}}function o(e,t){var r=[],n=t[0],i={};if("string"==typeof n)i[n]=t[1];else{if(!d.isPlainObject(n))return r;i=n}return l(i,function(e,t,n){r.push({type:"layout",prop:e,value:n})},"",0),r}function s(u,e){var c=[],t=e[0],n=e[1],f=e[2],e={};if("string"==typeof t)e[t]=n;else{if(!d.isPlainObject(t))return c;e=t,void 0===f&&(f=n)}return void 0===f&&(f=null),l(e,function(e,t,n){if(Array.isArray(n)){var r=n.slice(),i=Math.min(r.length,u.data.length);f&&(i=Math.min(i,f.length));for(var o=[],a=0;a<i;a++)o[a]=f?f[a]:a}else r=n,o=f?f.slice():null;if(null===o)Array.isArray(r)&&(r=r[0]);else if(Array.isArray(o)){if(!Array.isArray(r)){var s=r;r=[];for(var l=0;l<o.length;l++)r[l]=s}r.length=Math.min(o.length,r.length)}c.push({type:"data",prop:e,traces:o,value:r})},"",0),c}function l(r,i,o,a){Object.keys(r).forEach(function(e){var t,n=r[e];"_"!==e[0]&&(t=o+(0<a?".":"")+e,d.isPlainObject(n)?l(n,i,t,a+1):i(t,e,n))})}c.manageCommandObserver=function(t,e,n,r){var i={},o=!0;(i=e&&e._commandObserver?e._commandObserver:i).cache||(i.cache={}),i.lookupTable={};var a=c.hasSimpleAPICommandBindings(t,n,i.lookupTable);if(e&&e._commandObserver){if(a)return i;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,i}if(a){u(t,a,i.cache),i.check=function(){if(o){var e=u(t,a,i.cache);return e.changed&&r&&void 0!==i.lookupTable[e.value]&&(i.disable(),Promise.resolve(r({value:e.value,type:a.type,prop:a.prop,traces:a.traces,index:i.lookupTable[e.value]})).then(i.enable,i.enable)),e.changed}};for(var s=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],l=0;l<s.length;l++)t._internalOn(s[l],i.check);i.remove=function(){for(var e=0;e<s.length;e++)t._removeInternalListener(s[e],i.check)}}else d.log("Unable to automatically bind plot updates to API command"),i.lookupTable={},i.remove=function(){};return i.disable=function(){o=!1},i.enable=function(){o=!0},e&&(e._commandObserver=i),i},c.hasSimpleAPICommandBindings=function(e,t,n){for(var r,i=t.length,o=0;o<i;o++){var a=t[o],s=a.method,a=a.args;if(Array.isArray(a)||(a=[]),!s)return!1;a=c.computeAPICommandBindings(e,s,a);if(1!==a.length)return!1;if(r){if((u=a[0]).type!==r.type)return!1;if(u.prop!==r.prop)return!1;if(Array.isArray(r.traces)){if(!Array.isArray(u.traces))return!1;u.traces.sort();for(var l=0;l<r.traces.length;l++)if(r.traces[l]!==u.traces[l])return!1}else if(u.prop!==r.prop)return!1}else r=a[0],Array.isArray(r.traces)&&r.traces.sort();var u,a=(u=a[0]).value;if(Array.isArray(a)){if(1!==a.length)return!1;a=a[0]}n&&(n[a]=o)}return r},c.executeAPICommand=function(e,t,n){if("skip"===t)return Promise.resolve();var r=a.apiMethodRegistry[t],i=[e];Array.isArray(n)||(n=[]);for(var o=0;o<n.length;o++)i.push(n[o]);return r.apply(null,i).catch(function(e){return d.warn("API call to Plotly."+t+" rejected.",e),Promise.reject(e)})},c.computeAPICommandBindings=function(e,t,n){var r,i;switch(Array.isArray(n)||(n=[]),t){case"restyle":r=s(e,n);break;case"relayout":r=o(0,n);break;case"update":r=s(e,[n[0],n[2]]).concat(o(0,[n[1]]));break;case"animate":i=n,r=Array.isArray(i[0])&&1===i[0].length&&-1!==["string","number"].indexOf(typeof i[0][0])?[{type:"layout",prop:"_currentFrame",value:i[0][0].toString()}]:[];break;default:r=[]}return r}},{"../lib":779,"../registry":879}],858:[function(e,t,n){"use strict";var r=e("../lib/extend").extendFlat;n.attributes=function(e,t){var n={valType:"info_array",editType:(e=e||{}).editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},n=(e.name&&e.name,e.trace,(t=t||{}).description&&t.description,{x:r({},n,{}),y:r({},n,{}),editType:e.editType});return e.noGridCell||(n.row={valType:"integer",min:0,dflt:0,editType:e.editType},n.column={valType:"integer",min:0,dflt:0,editType:e.editType}),n},n.defaults=function(e,t,n,r){var i=r&&r.x||[0,1],r=r&&r.y||[0,1],t=t.grid;t&&(void 0!==(o=n("domain.column"))&&(o<t.columns?i=t._domains.x[o]:delete e.domain.column),void 0!==(o=n("domain.row"))&&(o<t.rows?r=t._domains.y[o]:delete e.domain.row));var o=n("domain.x",i),n=n("domain.y",r);o[0]<o[1]||(e.domain.x=i.slice()),n[0]<n[1]||(e.domain.y=r.slice())}},{"../lib/extend":772}],859:[function(e,t,n){"use strict";t.exports=function(e){var t=e.editType,n=e.colorEditType,t={family:{valType:"string",noBlank:!0,strict:!0,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:n=void 0===n?t:n},editType:t};return e.autoSize&&(t.size.dflt="auto"),e.autoColor&&(t.color.dflt="auto"),e.arrayOk&&(t.family.arrayOk=!0,t.size.arrayOk=!0,t.color.arrayOk=!0),t}},{}],860:[function(e,t,n){"use strict";t.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],861:[function(e,t,n){"use strict";var c=e("../registry"),f=e("./cartesian/constants").SUBPLOT_PATTERN;n.getSubplotCalcData=function(e,t,n){t=c.subplotsRegistry[t];if(!t)return[];for(var r=t.attr,i=[],o=0;o<e.length;o++){var a=e[o];a[0].trace[r]===n&&i.push(a)}return i},n.getModuleCalcData=function(e,t){var n=[],r=[],i="string"==typeof t?c.getModule(t).plot:"function"==typeof t?t:t.plot;if(!i)return[n,e];for(var o=0;o<e.length;o++){var a=e[o],s=a[0].trace;!0===s.visible&&0!==s._length&&(s._module.plot===i?n:r).push(a)}return[n,r]},n.getSubplotData=function(e,t,n){if(!c.subplotsRegistry[t])return[];var r,i,o,a,s=c.subplotsRegistry[t].attr,l=[];"gl2d"===t&&(o="x"+(i=n.match(f))[1],a="y"+i[2]);for(var u=0;u<e.length;u++)r=e[u],"gl2d"===t&&c.traceIs(r,"gl2d")?r[s[0]]===o&&r[s[1]]===a&&l.push(r):r[s]===n&&l.push(r);return l}},{"../registry":879,"./cartesian/constants":835}],862:[function(e,t,n){"use strict";var r=e("../../plot_api/edit_types").overrideAll,i=e("../../components/fx/layout_attributes"),c=e("./scene"),f=e("../get_data").getSubplotData,o=e("../../lib"),l=e("../../constants/xmlns_namespaces"),d="gl3d";n.name=d,n.attr="scene",n.idRoot="scene",n.idRegex=n.attrRegex=o.counterRegex("scene"),n.attributes=e("./layout/attributes"),n.layoutAttributes=e("./layout/layout_attributes"),n.baseLayoutAttrOverrides=r({hoverlabel:i.hoverlabel},"plot","nested"),n.supplyLayoutDefaults=e("./layout/defaults"),n.plot=function(e){for(var t=e._fullLayout,n=e._fullData,r=t._subplots.gl3d,i=0;i<r.length;i++){var o=r[i],a=f(n,d,o),s=t[o],l=s.camera,u=s._scene;u||(u=new c({id:o,graphDiv:e,container:e.querySelector(".gl-container"),staticPlot:e._context.staticPlot,plotGlPixelRatio:e._context.plotGlPixelRatio,camera:l},t),s._scene=u),u.viewInitial||(u.viewInitial={up:{x:l.up.x,y:l.up.y,z:l.up.z},eye:{x:l.eye.x,y:l.eye.y,z:l.eye.z},center:{x:l.center.x,y:l.center.y,z:l.center.z}}),u.plot(a,t,e.layout)}},n.clean=function(e,t,n,r){for(var i=r._subplots.gl3d||[],o=0;o<i.length;o++){var a=i[o];!t[a]&&r[a]._scene&&(r[a]._scene.destroy(),r._infolayer&&r._infolayer.selectAll(".annotation-"+a).remove())}},n.toSVG=function(e){for(var t=e._fullLayout,n=t._subplots.gl3d,r=t._size,i=0;i<n.length;i++){var o=t[n[i]],a=o.domain,s=o._scene,o=s.toImage("png");t._glimages.append("svg:image").attr({xmlns:l.svg,"xlink:href":o,x:r.l+r.w*a.x[0],y:r.t+r.h*(1-a.y[1]),width:r.w*(a.x[1]-a.x[0]),height:r.h*(a.y[1]-a.y[0]),preserveAspectRatio:"none"}),s.destroy()}},n.cleanId=function(e){if(e.match(/^scene[0-9]*$/)){e=e.substr(5);return"scene"+(e="1"===e?"":e)}},n.updateFx=function(e){for(var t=e._fullLayout,n=t._subplots.gl3d,r=0;r<n.length;r++)t[n[r]]._scene.updateFx(t.dragmode,t.hovermode)}},{"../../components/fx/layout_attributes":688,"../../constants/xmlns_namespaces":759,"../../lib":779,"../../plot_api/edit_types":810,"../get_data":861,"./layout/attributes":863,"./layout/defaults":867,"./layout/layout_attributes":868,"./scene":872}],863:[function(e,t,n){"use strict";t.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],864:[function(e,t,n){"use strict";var r=e("../../../components/color"),i=e("../../cartesian/layout_attributes"),o=e("../../../lib/extend").extendFlat,e=e("../../../plot_api/edit_types").overrideAll;t.exports=e({visible:i.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:r.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:i.color,categoryorder:i.categoryorder,categoryarray:i.categoryarray,title:{text:i.title.text,font:i.title.font},type:o({},i.type,{values:["-","linear","log","date","category"]}),autotypenumbers:i.autotypenumbers,autorange:i.autorange,rangemode:i.rangemode,range:o({},i.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:i.tickmode,nticks:i.nticks,tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:i.ticks,mirror:i.mirror,ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,showticklabels:i.showticklabels,tickfont:i.tickfont,tickangle:i.tickangle,tickprefix:i.tickprefix,showtickprefix:i.showtickprefix,ticksuffix:i.ticksuffix,showticksuffix:i.showticksuffix,showexponent:i.showexponent,exponentformat:i.exponentformat,minexponent:i.minexponent,separatethousands:i.separatethousands,tickformat:i.tickformat,tickformatstops:i.tickformatstops,hoverformat:i.hoverformat,showline:i.showline,linecolor:i.linecolor,linewidth:i.linewidth,showgrid:i.showgrid,gridcolor:o({},i.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:i.gridwidth,zeroline:i.zeroline,zerolinecolor:i.zerolinecolor,zerolinewidth:i.zerolinewidth,_deprecated:{title:i._deprecated.title,titlefont:i._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":647,"../../../lib/extend":772,"../../../plot_api/edit_types":810,"../../cartesian/layout_attributes":843}],865:[function(e,t,n){"use strict";var l=e("tinycolor2").mix,u=e("../../../lib"),c=e("../../../plot_api/plot_template"),f=e("./axis_attributes"),d=e("../../cartesian/type_defaults"),h=e("../../cartesian/axis_defaults"),p=["xaxis","yaxis","zaxis"];t.exports=function(e,t,n){function r(e,t){return u.coerce(s,o,f,e,t)}for(var i=0;i<p.length;i++){var o,a=p[i],s=e[a]||{};(o=c.newContainer(t,a))._id=a[0]+n.scene,o._name=a,d(s,o,r,n),h(s,o,r,{font:n.font,letter:a[0],data:n.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:n.bgColor,calendar:n.calendar},n.fullLayout),r("gridcolor",l(o.color,n.bgColor,13600/187).toRgbString()),r("title.text",a[0]),o.setScale=u.noop,r("showspikes")&&(r("spikesides"),r("spikethickness"),r("spikecolor",o.color)),r("showaxeslabels"),r("showbackground")&&r("backgroundcolor")}}},{"../../../lib":779,"../../../plot_api/plot_template":817,"../../cartesian/axis_defaults":830,"../../cartesian/type_defaults":856,"./axis_attributes":864,tinycolor2:980}],866:[function(e,t,n){"use strict";var o=e("../../../lib/str2rgbarray"),a=e("../../../lib"),s=["xaxis","yaxis","zaxis"];function r(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}r.prototype.merge=function(e,t){for(var n=this,r=0;r<3;++r){var i=t[s[r]];i.visible?(n.labels[r]=e._meta?a.templateString(i.title.text,e._meta):i.title.text,"font"in i.title&&(i.title.font.color&&(n.labelColor[r]=o(i.title.font.color)),i.title.font.family&&(n.labelFont[r]=i.title.font.family),i.title.font.size&&(n.labelSize[r]=i.title.font.size)),"showline"in i&&(n.lineEnable[r]=i.showline),"linecolor"in i&&(n.lineColor[r]=o(i.linecolor)),"linewidth"in i&&(n.lineWidth[r]=i.linewidth),"showgrid"in i&&(n.gridEnable[r]=i.showgrid),"gridcolor"in i&&(n.gridColor[r]=o(i.gridcolor)),"gridwidth"in i&&(n.gridWidth[r]=i.gridwidth),"log"===i.type?n.zeroEnable[r]=!1:"zeroline"in i&&(n.zeroEnable[r]=i.zeroline),"zerolinecolor"in i&&(n.zeroLineColor[r]=o(i.zerolinecolor)),"zerolinewidth"in i&&(n.zeroLineWidth[r]=i.zerolinewidth),"ticks"in i&&i.ticks?n.lineTickEnable[r]=!0:n.lineTickEnable[r]=!1,"ticklen"in i&&(n.lineTickLength[r]=n._defaultLineTickLength[r]=i.ticklen),"tickcolor"in i&&(n.lineTickColor[r]=o(i.tickcolor)),"tickwidth"in i&&(n.lineTickWidth[r]=i.tickwidth),"tickangle"in i&&(n.tickAngle[r]="auto"===i.tickangle?-3600:Math.PI*-i.tickangle/180),"showticklabels"in i&&(n.tickEnable[r]=i.showticklabels),"tickfont"in i&&(i.tickfont.color&&(n.tickColor[r]=o(i.tickfont.color)),i.tickfont.family&&(n.tickFont[r]=i.tickfont.family),i.tickfont.size&&(n.tickSize[r]=i.tickfont.size)),"mirror"in i?-1!==["ticks","all","allticks"].indexOf(i.mirror)?(n.lineTickMirror[r]=!0,n.lineMirror[r]=!0):!0===i.mirror?(n.lineTickMirror[r]=!1,n.lineMirror[r]=!0):(n.lineTickMirror[r]=!1,n.lineMirror[r]=!1):n.lineMirror[r]=!1,"showbackground"in i&&!1!==i.showbackground?(n.backgroundEnable[r]=!0,n.backgroundColor[r]=o(i.backgroundcolor)):n.backgroundEnable[r]=!1):(n.tickEnable[r]=!1,n.labelEnable[r]=!1,n.lineEnable[r]=!1,n.lineTickEnable[r]=!1,n.gridEnable[r]=!1,n.zeroEnable[r]=!1,n.backgroundEnable[r]=!1)}},t.exports=function(e,t){var n=new r;return n.merge(e,t),n}},{"../../../lib":779,"../../../lib/str2rgbarray":803}],867:[function(e,t,n){"use strict";var i=e("../../../lib"),u=e("../../../components/color"),c=e("../../../registry"),o=e("../../subplot_defaults"),f=e("./axis_defaults"),a=e("./layout_attributes"),d=e("../../get_data").getSubplotData;function s(e,t,n,r){for(var i=n("bgcolor"),o=u.combine(i,r.paper_bgcolor),a=["up","center","eye"],s=0;s<a.length;s++)n("camera."+a[s]+".x"),n("camera."+a[s]+".y"),n("camera."+a[s]+".z");n("camera.projection.type");var l=!!n("aspectratio.x")&&!!n("aspectratio.y")&&!!n("aspectratio.z"),i=n("aspectmode",l?"manual":"auto");l||(e.aspectratio=t.aspectratio={x:1,y:1,z:1},"manual"===i&&(t.aspectmode="auto"),e.aspectmode=t.aspectmode);i=d(r.fullData,"gl3d",r.id);f(e,t,{font:r.font,scene:r.id,data:i,bgColor:o,calendar:r.calendar,autotypenumbersDflt:r.autotypenumbersDflt,fullLayout:r.fullLayout}),c.getComponentMethod("annotations3d","handleDefaults")(e,t,r);i=r.getDfltFromLayout("dragmode");!1!==i&&(i||(i="orbit",e.camera&&e.camera.up?(o=e.camera.up.x,t=e.camera.up.y,0===(e=e.camera.up.z)||o&&t&&e&&!(.999<e/Math.sqrt(o*o+t*t+e*e))||(i="turntable")):i="turntable")),n("dragmode",i),n("hovermode",r.getDfltFromLayout("hovermode"))}t.exports=function(t,e,n){var r=1<e._basePlotModules.length;o(t,e,n,{type:"gl3d",attributes:a,handleDefaults:s,fullLayout:e,font:e.font,fullData:n,getDfltFromLayout:function(e){if(!r)return i.validate(t[e],a[e])?t[e]:void 0},autotypenumbersDflt:e.autotypenumbers,paper_bgcolor:e.paper_bgcolor,calendar:e.calendar})}},{"../../../components/color":647,"../../../lib":779,"../../../registry":879,"../../get_data":861,"../../subplot_defaults":877,"./axis_defaults":865,"./layout_attributes":868}],868:[function(e,t,n){"use strict";var r=e("./axis_attributes"),i=e("../../domain").attributes,o=e("../../../lib/extend").extendFlat,e=e("../../../lib").counterRegex;function a(e,t,n){return{x:{valType:"number",dflt:e,editType:"camera"},y:{valType:"number",dflt:t,editType:"camera"},z:{valType:"number",dflt:n,editType:"camera"},editType:"camera"}}t.exports={_arrayAttrRegexps:[e("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:o(a(0,0,1),{}),center:o(a(0,0,0),{}),eye:o(a(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:i({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:r,yaxis:r,zaxis:r,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":779,"../../../lib/extend":772,"../../domain":858,"./axis_attributes":864}],869:[function(e,t,n){"use strict";var r=e("../../../lib/str2rgbarray"),i=["xaxis","yaxis","zaxis"];function o(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}o.prototype.merge=function(e){for(var t=0;t<3;++t){var n=e[i[t]];n.visible?(this.enabled[t]=n.showspikes,this.colors[t]=r(n.spikecolor),this.drawSides[t]=n.spikesides,this.lineWidth[t]=n.spikethickness):(this.enabled[t]=!1,this.drawSides[t]=!1)}},t.exports=function(e){var t=new o;return t.merge(e),t}},{"../../../lib/str2rgbarray":803}],870:[function(e,t,n){"use strict";t.exports=function(e){for(var t=e.axesOptions,n=e.glplot.axesPixels,r=e.fullSceneLayout,i=[[],[],[]],o=0;o<3;++o){var a=r[h[o]];if(a._length=(n[o].hi-n[o].lo)*n[o].pixelsPerDataUnit/e.dataScale[o],Math.abs(a._length)===1/0||isNaN(a._length))i[o]=[];else{a._input_range=a.range.slice(),a.range[0]=n[o].lo/e.dataScale[o],a.range[1]=n[o].hi/e.dataScale[o],a._m=1/(e.dataScale[o]*n[o].pixelsPerDataUnit),a.range[0]===a.range[1]&&(--a.range[0],a.range[1]+=1);var s,l=a.tickmode;"auto"===a.tickmode&&(a.tickmode="linear",s=a.nticks||d.constrain(a._length/40,4,9),f.autoTicks(a,Math.abs(a.range[1]-a.range[0])/s));for(var u=f.calcTicks(a,{msUTC:!0}),c=0;c<u.length;++c)u[c].x=u[c].x*e.dataScale[o],"date"===a.type&&(u[c].text=u[c].text.replace(/\<br\>/g," "));i[o]=u,a.tickmode=l}}t.ticks=i;for(o=0;o<3;++o){p[o]=.5*(e.glplot.bounds[0][o]+e.glplot.bounds[1][o]);for(c=0;c<2;++c)t.bounds[c][o]=e.glplot.bounds[c][o]}e.contourLevels=function(e){for(var t=new Array(3),n=0;n<3;++n){for(var r=e[n],i=new Array(r.length),o=0;o<r.length;++o)i[o]=r[o].x;t[n]=i}return t}(i)};var f=e("../../cartesian/axes"),d=e("../../../lib"),h=["xaxis","yaxis","zaxis"],p=[0,0,0]},{"../../../lib":779,"../../cartesian/axes":828}],871:[function(e,t,n){"use strict";function r(e,t){for(var n,r=[0,0,0,0],i=0;i<4;++i)for(n=0;n<4;++n)r[n]+=e[4*i+n]*t[i];return r}t.exports=function(e,t){return r(e.projection,r(e.view,r(e.model,[t[0],t[1],t[2],1])))}},{}],872:[function(e,t,n){"use strict";var s,r,i=e("../../../stackgl_modules").gl_plot3d,o=i.createCamera,a=i.createScene,l=e("webgl-context"),u=e("has-passive-events"),d=e("../../registry"),E=e("../../lib"),c=E.preserveDrawingBuffer(),b=e("../../plots/cartesian/axes"),x=e("../../components/fx"),C=e("../../lib/str2rgbarray"),f=e("../../lib/show_no_webgl_msg"),_=e("./project"),h=e("./layout/convert"),p=e("./layout/spikes"),w=e("./layout/tick_marks");function y(e,t){var n=document.createElement("div"),r=e.container;this.graphDiv=e.graphDiv;var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.style.position="absolute",i.style.top=i.style.left="0px",i.style.width=i.style.height="100%",i.style["z-index"]=20,i.style["pointer-events"]="none",n.appendChild(i),this.svgContainer=i,n.id=e.id,n.style.position="absolute",n.style.top=n.style.left="0px",n.style.width=n.style.height="100%",r.appendChild(n),this.fullLayout=t,this.id=e.id||"scene",this.fullSceneLayout=t[this.id],this.plotArgs=[[],{},{}],this.axesOptions=h(t,t[this.id]),this.spikeOptions=p(t[this.id]),this.container=n,this.staticMode=!!e.staticPlot,this.pixelRatio=this.pixelRatio||e.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=d.getComponentMethod("annotations3d","convert"),this.drawAnnotations=d.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}e=y.prototype;e.prepareOptions=function(){var e={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:c,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(r||(s=document.createElement("canvas"),r=l({canvas:s,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");e.gl=r,e.canvas=s}return e};var g=!0;e.tryCreatePlot=function(){var t=this.prepareOptions(),n=!0;try{this.glplot=a(t)}catch(e){if(this.staticMode||!g||c)n=!1;else{E.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{c=t.glOptions.preserveDrawingBuffer=!0,this.glplot=a(t)}catch(e){n=c=t.glOptions.preserveDrawingBuffer=!1}}}return g=!1,n},e.initializeGLCamera=function(){var e=this.fullSceneLayout.camera,t="orthographic"===e.projection.type;this.camera=o(this.container,{center:[e.center.x,e.center.y,e.center.z],eye:[e.eye.x,e.eye.y,e.eye.z],up:[e.up.x,e.up.y,e.up.z],_ortho:t,zoomMin:.01,zoomMax:100,mode:"orbit"})},e.initializeGLPlot=function(){var n=this;if(n.initializeGLCamera(),!n.tryCreatePlot())return f(n);n.traces={},n.make4thDimension();function r(e){var t;!1!==e.fullSceneLayout.dragmode&&(t=a(),e.saveLayout(o),e.graphDiv.emit("plotly_relayout",t))}var i=n.graphDiv,o=i.layout,a=function(){var e={};return n.isCameraChanged(o)&&(e[n.id+".camera"]=n.getCamera()),n.isAspectChanged(o)&&(e[n.id+".aspectratio"]=n.glplot.getAspectratio(),"manual"!==o[n.id].aspectmode&&(n.fullSceneLayout.aspectmode=o[n.id].aspectmode=e[n.id+".aspectmode"]="manual")),e};return n.glplot.canvas&&(n.glplot.canvas.addEventListener("mouseup",function(){r(n)}),n.glplot.canvas.addEventListener("wheel",function(e){var t;i._context._scrollZoom.gl3d&&(n.camera._ortho&&(t=e.deltaX>e.deltaY?1.1:1/1.1,e=n.glplot.getAspectratio(),n.glplot.setAspectratio({x:t*e.x,y:t*e.y,z:t*e.z})),r(n))},!!u&&{passive:!1}),n.glplot.canvas.addEventListener("mousemove",function(){var e;!1!==n.fullSceneLayout.dragmode&&0!==n.camera.mouseListener.buttons&&(e=a(),n.graphDiv.emit("plotly_relayouting",e))}),n.staticMode||n.glplot.canvas.addEventListener("webglcontextlost",function(e){i&&i.emit&&i.emit("plotly_webglcontextlost",{event:e,layer:n.id})},!1)),n.glplot.oncontextloss=function(){n.recoverContext()},n.glplot.onrender=function(){n.render()},!0},e.render=function(){var r=this,e=r.graphDiv,t=r.svgContainer,n=r.container.getBoundingClientRect();e._fullLayout._calcInverseTransform(e);var i=e._fullLayout._invScaleX,o=e._fullLayout._invScaleY,a=n.width*i,s=n.height*o;t.setAttributeNS(null,"viewBox","0 0 "+a+" "+s),t.setAttributeNS(null,"width",a),t.setAttributeNS(null,"height",s),w(r),r.glplot.axes.update(r.axesOptions);for(var l,u,c,f,d,h,p=Object.keys(r.traces),y=null,g=r.glplot.selection,v=0;v<p.length;++v)"skip"!==(u=r.traces[p[v]]).data.hoverinfo&&u.handlePick(g)&&(y=u),u.setContourLevels&&u.setContourLevels();function m(e,t,n){e=r.fullSceneLayout[e+"axis"];return"log"!==e.type&&(t=e.d2l(t)),b.hoverLabelText(e,t,n)}null!==y?(l=_(r.glplot.cameraParams,g.dataCoordinate),u=y.data,c=e._fullData[u.index],f=g.index,d={xLabel:m("x",g.traceCoordinate[0],u.xhoverformat),yLabel:m("y",g.traceCoordinate[1],u.yhoverformat),zLabel:m("z",g.traceCoordinate[2],u.zhoverformat)},i=((h=x.castHoverinfo(c,r.fullLayout,f))||"").split("+"),n=h&&"all"===h,c.hovertemplate||n||(-1===i.indexOf("x")&&(d.xLabel=void 0),-1===i.indexOf("y")&&(d.yLabel=void 0),-1===i.indexOf("z")&&(d.zLabel=void 0),-1===i.indexOf("text")&&(g.textLabel=void 0),-1===i.indexOf("name")&&(y.name=void 0)),o=[],h="cone"===u.type||"streamtube"===u.type?(d.uLabel=m("x",g.traceCoordinate[3],u.uhoverformat),!n&&-1===i.indexOf("u")||o.push("u: "+d.uLabel),d.vLabel=m("y",g.traceCoordinate[4],u.vhoverformat),!n&&-1===i.indexOf("v")||o.push("v: "+d.vLabel),d.wLabel=m("z",g.traceCoordinate[5],u.whoverformat),!n&&-1===i.indexOf("w")||o.push("w: "+d.wLabel),d.normLabel=g.traceCoordinate[6].toPrecision(3),!n&&-1===i.indexOf("norm")||o.push("norm: "+d.normLabel),"streamtube"===u.type&&(d.divergenceLabel=g.traceCoordinate[7].toPrecision(3),!n&&-1===i.indexOf("divergence")||o.push("divergence: "+d.divergenceLabel)),g.textLabel&&o.push(g.textLabel),o.join("<br>")):"isosurface"===u.type||"volume"===u.type?(d.valueLabel=b.hoverLabelText(r._mockAxis,r._mockAxis.d2l(g.traceCoordinate[3]),u.valuehoverformat),o.push("value: "+d.valueLabel),g.textLabel&&o.push(g.textLabel),o.join("<br>")):g.textLabel,n={x:g.traceCoordinate[0],y:g.traceCoordinate[1],z:g.traceCoordinate[2],data:c._input,fullData:c,curveNumber:c.index,pointNumber:f},x.appendArrayPointValue(n,c,f),i={points:[n=u._module.eventData?c._module.eventData(n,g,c,{},f):n]},r.fullSceneLayout.hovermode&&(o=[],x.loneHover({trace:c,x:(.5+.5*l[0]/l[3])*a,y:(.5-.5*l[1]/l[3])*s,xLabel:d.xLabel,yLabel:d.yLabel,zLabel:d.zLabel,text:h,name:y.name,color:x.castHoverOption(c,f,"bgcolor")||y.color,borderColor:x.castHoverOption(c,f,"bordercolor"),fontFamily:x.castHoverOption(c,f,"font.family"),fontSize:x.castHoverOption(c,f,"font.size"),fontColor:x.castHoverOption(c,f,"font.color"),nameLength:x.castHoverOption(c,f,"namelength"),textAlign:x.castHoverOption(c,f,"align"),hovertemplate:E.castOption(c,f,"hovertemplate"),hovertemplateLabels:E.extendFlat({},n,d),eventData:[n]},{container:t,gd:e,inOut_bbox:o}),n.bbox=o[0]),g.buttons&&g.distance<5?e.emit("plotly_click",i):e.emit("plotly_hover",i),this.oldEventData=i):(x.loneUnhover(t),this.oldEventData&&e.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0),r.drawAnnotations(r)},e.recoverContext=function(){var e=this;e.glplot.dispose();var t=function(){e.glplot.gl.isContextLost()?requestAnimationFrame(t):e.initializeGLPlot()?e.plot.apply(e,e.plotArgs):E.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(t)};var L=["xaxis","yaxis","zaxis"];e.plot=function(e,t,n){var r=this;if(r.plotArgs=[e,t,n],!r.glplot.contextLost){var i,o,a=t[r.id],s=n[r.id];r.fullLayout=t,r.fullSceneLayout=a,r.axesOptions.merge(t,a),r.spikeOptions.merge(a),r.setViewport(a),r.updateFx(a.dragmode,a.hovermode),r.camera.enableWheel=r.graphDiv._context._scrollZoom.gl3d,r.glplot.setClearColor(C(a.bgcolor)),r.setConvert(T),e?Array.isArray(e)||(e=[e]):e=[];var l=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(A=0;A<e.length;++A)!0===(i=e[A]).visible&&0!==i._length&&function(e,t,n){for(var r=e.fullSceneLayout,i=0;i<3;i++){var o=L[i],a=o.charAt(0),s=r[o],l=t[a],u=t[a+"calendar"],c=t["_"+a+"length"];if(E.isArrayOrTypedArray(l))for(var f,d=0;d<(c||l.length);d++)if(E.isArrayOrTypedArray(l[d]))for(var h=0;h<l[d].length;++h)f=s.d2l(l[d][h],0,u),!isNaN(f)&&isFinite(f)&&(n[0][i]=Math.min(n[0][i],f),n[1][i]=Math.max(n[1][i],f));else f=s.d2l(l[d],0,u),!isNaN(f)&&isFinite(f)&&(n[0][i]=Math.min(n[0][i],f),n[1][i]=Math.max(n[1][i],f));else n[0][i]=Math.min(n[0][i],0),n[1][i]=Math.max(n[1][i],c-1)}}(this,i,l);!function(e,t){for(var n=e.fullSceneLayout,r=n.annotations||[],i=0;i<3;i++)for(var o=L[i],a=o.charAt(0),s=n[o],l=0;l<r.length;l++){var u=r[l];u.visible&&(u=s.r2l(u[a]),!isNaN(u)&&isFinite(u)&&(t[0][i]=Math.min(t[0][i],u),t[1][i]=Math.max(t[1][i],u)))}}(this,l);var u=[1,1,1];for(m=0;m<3;++m)l[1][m]===l[0][m]?u[m]=1:u[m]=1/(l[1][m]-l[0][m]);for(r.dataScale=u,r.convertAnnotations(this),A=0;A<e.length;++A)!0===(i=e[A]).visible&&0!==i._length&&((o=r.traces[i.uid])?o.data.type===i.type?o.update(i):(o.dispose(),o=i._module.plot(this,i),r.traces[i.uid]=o):(o=i._module.plot(this,i),r.traces[i.uid]=o),o.name=i.name);var c=Object.keys(r.traces);e:for(A=0;A<c.length;++A){for(m=0;m<e.length;++m)if(e[m].uid===c[A]&&!0===e[m].visible&&0!==e[m]._length)continue e;(o=r.traces[c[A]]).dispose(),delete r.traces[c[A]]}r.glplot.objects.sort(function(e,t){return e._trace.data.index-t._trace.data.index});var f=[[0,0,0],[0,0,0]],d=[],h={};for(A=0;A<3;++A){if((P=(T=a[L[A]]).type)in h?(h[P].acc*=u[A],h[P].count+=1):h[P]={acc:u[A],count:1},T.autorange){f[0][A]=1/0,f[1][A]=-1/0;for(var p,y=r.glplot.objects,g=r.fullSceneLayout.annotations||[],v=T._name.charAt(0),m=0;m<y.length;m++){var b=y[m],x=b.bounds,_=b._trace.data._pad||0;"ErrorBars"===b.constructor.name&&T._lowerLogErrorBound?f[0][A]=Math.min(f[0][A],T._lowerLogErrorBound):f[0][A]=Math.min(f[0][A],x[0][A]/u[A]-_),f[1][A]=Math.max(f[1][A],x[1][A]/u[A]+_)}for(m=0;m<g.length;m++){var w=g[m];w.visible&&(w=T.r2l(w[v]),f[0][A]=Math.min(f[0][A],w),f[1][A]=Math.max(f[1][A],w))}"rangemode"in T&&"tozero"===T.rangemode&&(f[0][A]=Math.min(f[0][A],0),f[1][A]=Math.max(f[1][A],0)),f[0][A]>f[1][A]?(f[0][A]=-1,f[1][A]=1):(p=f[1][A]-f[0][A],f[0][A]-=p/32,f[1][A]+=p/32),"reversed"===T.autorange&&(M=f[0][A],f[0][A]=f[1][A],f[1][A]=M)}else{var M=T.range;f[0][A]=T.r2l(M[0]),f[1][A]=T.r2l(M[1])}f[0][A]===f[1][A]&&(--f[0][A],f[1][A]+=1),d[A]=f[1][A]-f[0][A],r.glplot.setBounds(A,{min:f[0][A]*u[A],max:f[1][A]*u[A]})}var j=a.aspectmode;if("cube"===j)k=[1,1,1];else if("manual"===j)var n=a.aspectratio,k=[n.x,n.y,n.z];else{if("auto"!==j&&"data"!==j)throw new Error("scene.js aspectRatio was not one of the enumerated types");for(var O=[1,1,1],A=0;A<3;++A){var T,P,S=h[P=(T=a[L[A]]).type];O[A]=Math.pow(S.acc,1/S.count)/u[A]}k="data"===j||Math.max.apply(null,O)/Math.min.apply(null,O)<=4?O:[1,1,1]}a.aspectratio.x=s.aspectratio.x=k[0],a.aspectratio.y=s.aspectratio.y=k[1],a.aspectratio.z=s.aspectratio.z=k[2],r.glplot.setAspectratio(a.aspectratio),r.viewInitial.aspectratio||(r.viewInitial.aspectratio={x:a.aspectratio.x,y:a.aspectratio.y,z:a.aspectratio.z}),r.viewInitial.aspectmode||(r.viewInitial.aspectmode=a.aspectmode);s=a.domain||null,k=t._size||null;s&&k&&((t=r.container.style).position="absolute",t.left=k.l+s.x[0]*k.w+"px",t.top=k.t+(1-s.y[1])*k.h+"px",t.width=k.w*(s.x[1]-s.x[0])+"px",t.height=k.h*(s.y[1]-s.y[0])+"px"),r.glplot.redraw()}},e.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},e.getCamera=function(){var e;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(e=this.camera).up[0],y:e.up[1],z:e.up[2]},center:{x:e.center[0],y:e.center[1],z:e.center[2]},eye:{x:e.eye[0],y:e.eye[1],z:e.eye[2]},projection:{type:!0===e._ortho?"orthographic":"perspective"}}},e.setViewport=function(e){var t=e.camera;this.camera.lookAt.apply(this,[[t.eye.x,t.eye.y,t.eye.z],[t.center.x,t.center.y,t.center.z],[t.up.x,t.up.y,t.up.z]]),this.glplot.setAspectratio(e.aspectratio),"orthographic"===t.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},e.isCameraChanged=function(e){var t=this.getCamera(),n=E.nestedProperty(e,this.id+".camera").get();var r,i,o,a,s,l,u=!1;if(void 0===n)u=!0;else{for(var c=0;c<3;c++)for(var f=0;f<3;f++)if(r=t,a=f,l=s=void 0,l=["x","y","z"],!(i=n)[(s=["up","center","eye"])[o=c]]||r[s[o]][l[a]]!==i[s[o]][l[a]]){u=!0;break}(!n.projection||t.projection&&t.projection.type!==n.projection.type)&&(u=!0)}return u},e.isAspectChanged=function(e){var t=this.glplot.getAspectratio(),e=E.nestedProperty(e,this.id+".aspectratio").get();return void 0===e||e.x!==t.x||e.y!==t.y||e.z!==t.z},e.saveLayout=function(e){var t,n,r,i,o,a,s=this,l=s.fullLayout,u=s.isCameraChanged(e),c=s.isAspectChanged(e),f=u||c;return f&&(a={},u&&(t=s.getCamera(),o=(n=E.nestedProperty(e,s.id+".camera")).get(),a[s.id+".camera"]=o),c&&(r=s.glplot.getAspectratio(),o=(i=E.nestedProperty(e,s.id+".aspectratio")).get(),a[s.id+".aspectratio"]=o),d.call("_storeDirectGUIEdit",e,l._preGUI,a),u&&(n.set(t),E.nestedProperty(l,s.id+".camera").set(t)),c&&(i.set(r),E.nestedProperty(l,s.id+".aspectratio").set(r),s.glplot.redraw())),f},e.updateFx=function(e,t){var n,r,i,o,a,s,l=this.camera;l&&("orbit"===e?(l.mode="orbit",l.keyBindingMode="rotate"):"turntable"===e?(l.up=[0,0,1],l.mode="turntable",l.keyBindingMode="rotate",n=(s=this.graphDiv)._fullLayout,a=(r=this.fullSceneLayout.camera).up.x,i=r.up.y,(o=r.up.z)/Math.sqrt(a*a+i*i+o*o)<.999&&((a={})[i=this.id+".camera.up"]=o={x:0,y:0,z:1},s=s.layout,d.call("_storeDirectGUIEdit",s,n._preGUI,a),r.up=o,E.nestedProperty(s,i).set(o))):l.keyBindingMode=e),this.fullSceneLayout.hovermode=t},e.toImage=function(e){e=e||"png",this.staticMode&&this.container.appendChild(s),this.glplot.redraw();var t=this.glplot.gl,n=t.drawingBufferWidth,r=t.drawingBufferHeight;t.bindFramebuffer(t.FRAMEBUFFER,null);var i=new Uint8Array(n*r*4);t.readPixels(0,0,n,r,t.RGBA,t.UNSIGNED_BYTE,i),function(e,t,n){for(var r=0,i=n-1;r<i;++r,--i)for(var o=0;o<t;++o)for(var a=0;a<4;++a){var s=4*(t*r+o)+a,l=4*(t*i+o)+a,u=e[s];e[s]=e[l],e[l]=u}}(i,n,r),function(e,t,n){for(var r=0;r<n;++r)for(var i=0;i<t;++i){var o=4*(t*r+i),a=e[3+o];if(0<a)for(var s=255/a,l=0;l<3;++l)e[o+l]=Math.min(s*e[o+l],255)}}(i,n,r);var o=document.createElement("canvas");o.width=n,o.height=r;var a,t=o.getContext("2d"),r=t.createImageData(n,r);switch(r.data.set(i),t.putImageData(r,0,0),e){case"jpeg":a=o.toDataURL("image/jpeg");break;case"webp":a=o.toDataURL("image/webp");break;default:a=o.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(s),a},e.setConvert=function(){for(var e=0;e<3;e++){var t=this.fullSceneLayout[L[e]];b.setConvert(t,this.fullLayout),t.setScale=E.noop}},e.make4thDimension=function(){var e=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},b.setConvert(this._mockAxis,e)},t.exports=y},{"../../../stackgl_modules":962,"../../components/fx":687,"../../lib":779,"../../lib/show_no_webgl_msg":800,"../../lib/str2rgbarray":803,"../../plots/cartesian/axes":828,"../../registry":879,"./layout/convert":866,"./layout/spikes":869,"./layout/tick_marks":870,"./project":871,"has-passive-events":607,"webgl-context":981}],873:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){r=r||e.length;for(var i=new Array(r),o=0;o<r;o++)i[o]=[e[o],t[o],n[o]];return i}},{}],874:[function(e,t,n){"use strict";var r=e("./font_attributes"),i=e("./animation_attributes"),o=e("../components/color/attributes"),a=e("../components/shapes/draw_newshape/attributes"),s=e("./pad_attributes"),l=e("../lib/extend").extendFlat,e=r({editType:"calc"});e.family.dflt='"Open Sans", verdana, arial, sans-serif',e.size.dflt=12,e.color.dflt=o.defaultLine,t.exports={font:e,title:{text:{valType:"string",editType:"layoutstyle"},font:r({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:l(s({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:o.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:o.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:o.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:a.newshape,activeshape:a.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:l({},i.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:r({editType:"layoutstyle"})}}},{"../components/color/attributes":646,"../components/shapes/draw_newshape/attributes":732,"../lib/extend":772,"./animation_attributes":822,"./font_attributes":859,"./pad_attributes":875}],875:[function(e,t,n){"use strict";t.exports=function(e){e=e.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},{}],876:[function(e,t,n){"use strict";var o=e("@plotly/d3"),O=e("d3-time-format").timeFormatLocale,A=e("d3-format").formatLocale,T=e("fast-isnumeric"),S=e("../registry"),v=e("../plot_api/plot_schema"),M=e("../plot_api/plot_template"),E=e("../lib"),y=e("../components/color"),m=e("../constants/numerical").BADNUM,C=e("./cartesian/axis_ids"),P=e("./cartesian/handle_outline").clearSelect,i=e("./animation_attributes"),a=e("./frame_attributes"),s=e("../plots/get_data").getModuleCalcData,L=E.relinkPrivateKeys,R=E._,I=t.exports={};E.extendFlat(I,S),I.attributes=e("./attributes"),I.attributes.type.values=I.allTypes,I.fontAttrs=e("./font_attributes"),I.layoutAttributes=e("./layout_attributes"),I.fontWeight="normal";var j=I.transformsRegistry,e=e("./command");I.executeAPICommand=e.executeAPICommand,I.computeAPICommandBindings=e.computeAPICommandBindings,I.manageCommandObserver=e.manageCommandObserver,I.hasSimpleAPICommandBindings=e.hasSimpleAPICommandBindings,I.redrawText=function(t){return t=E.getGraphDiv(t),new Promise(function(e){setTimeout(function(){t._fullLayout&&(S.getComponentMethod("annotations","draw")(t),S.getComponentMethod("legend","draw")(t),S.getComponentMethod("colorbar","draw")(t),e(I.previousPromises(t)))},300)})},I.resize=function(n){var r;n=E.getGraphDiv(n);var e=new Promise(function(t,e){n&&!E.isHidden(n)||e(new Error("Resize must be passed a displayed plot div element.")),n._redrawTimer&&clearTimeout(n._redrawTimer),n._resolveResize&&(r=n._resolveResize),n._resolveResize=t,n._redrawTimer=setTimeout(function(){var e;!n.layout||n.layout.width&&n.layout.height||E.isHidden(n)?t(n):(delete n.layout.width,delete n.layout.height,e=n.changed,n.autoplay=!0,S.call("relayout",n,{autosize:!0}).then(function(){n.changed=e,n._resolveResize===t&&(delete n._resolveResize,t(n))}))},100)});return r&&r(e),e},I.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then(function(){e._promises=[]})},I.addLinks=function(e){var t,n,r,i;(e._context.showLink||e._context.showSources)&&(n=e._fullLayout,t=(i=E.ensureSingle(n._paper,"text","js-plot-link-container",function(e){e.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:y.defaultLine,"pointer-events":"all"}).each(function(){var e=o.select(this);e.append("tspan").classed("js-link-to-tool",!0),e.append("tspan").classed("js-link-spacer",!0),e.append("tspan").classed("js-sourcelinks",!0)})})).node(),r={y:n._paper.attr("height")-9},document.body.contains(t)&&t.getComputedTextLength()>=n.width-20?(r["text-anchor"]="start",r.x=5):(r["text-anchor"]="end",r.x=n._paper.attr("width")-7),i.attr(r),n=i.select(".js-link-to-tool"),r=i.select(".js-link-spacer"),i=i.select(".js-sourcelinks"),e._context.showSources&&e._context.showSources(e),e._context.showLink&&function(e,t){t.text("");var n=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));{var r;e._context.sendData?n.on("click",function(){I.sendDataToCloud(e)}):(r=window.location.pathname.split("/"),t=window.location.search,n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+r[2].split(".")[0]+"/"+r[1]+t}))}}(e,n),r.text(n.text()&&i.text()?" - ":""))},I.sendDataToCloud=function(e){var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(t){e.emit("plotly_beforeexport");var n=o.select(e).append("div").attr("id","hiddenform").style("display","none"),t=n.append("form").attr({action:t+"/external",method:"post",target:"_blank"});return t.append("input").attr({type:"text",name:"data"}).node().value=I.graphJson(e,!1,"keepdata"),t.node().submit(),n.remove(),e.emit("plotly_afterexport"),!1}};var z=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],D=["year","month","dayMonth","dayMonthYear"];function N(e,i){var t=(t=e._context.locale)||"en-US",o=!1,a={};function n(e){for(var t=!0,n=0;n<i.length;n++){var r=i[n];a[r]||(e[r]?a[r]=e[r]:t=!1)}t&&(o=!0)}for(var r=0;r<2;r++){for(var s=e._context.locales,l=0;l<2;l++){var u=(s[t]||{}).format;if(u&&(n(u),o))break;s=S.localeRegistry}var c=t.split("-")[0];if(o||c===t)break;t=c}return o||n(S.localeRegistry.en.format),a}function g(e){var t=e.transforms;if(Array.isArray(t)&&t.length)for(var n=0;n<t.length;n++){var r=t[n],r=r._module||j[r.type];if(r&&r.makesData)return!0}return!1}function u(e){return"string"==typeof e&&"px"===e.substr(e.length-2)&&parseFloat(e)}function F(e){var t=e.margin;e._size||((t=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)}).w=Math.round(e.width)-t.l-t.r,t.h=Math.round(e.height)-t.t-t.b),e._pushmargin||(e._pushmargin={}),e._pushmarginIds||(e._pushmarginIds={})}I.supplyDefaults=function(e,t){var n=t&&t.skipUpdateCalc,r=e._fullLayout||{};if(r._skipDefaults)delete r._skipDefaults;else{var i=e._fullLayout={},o=e.layout||{},a=e._fullData||[],s=e._fullData=[],l=e.data||[],u=e.calcdata||[],c=e._context||{};e._transitionData||I.createTransitionData(e),i._dfltTitle={plot:R(e,"Click to enter Plot title"),x:R(e,"Click to enter X axis title"),y:R(e,"Click to enter Y axis title"),colorbar:R(e,"Click to enter Colorscale title"),annotation:R(e,"new text")},i._traceWord=R(e,"trace");var f,d,h=N(e,z);i._mapboxAccessToken=c.mapboxAccessToken,r._initialAutoSizeIsDone?(t=r.width,f=r.height,I.supplyLayoutGlobalDefaults(o,i,h),o.width||(i.width=t),o.height||(i.height=f),I.sanitizeMargins(i)):(I.supplyLayoutGlobalDefaults(o,i,h),y=!o.width||!o.height,f=i.autosize,c=c.autosizable,y&&(f||c)?I.plotAutoSize(e,o,i):y&&I.sanitizeMargins(i),!f&&y&&(o.width=i.width,o.height=i.height)),i._d3locale=(d=h,y=i.separators,d.decimal=y.charAt(0),d.thousands=y.charAt(1),{numberFormat:function(t){try{t=A(d).format(E.adjustFormat(t))}catch(e){return E.warnBadFormat(t),E.noFormat}return t},timeFormat:O(d).utcFormat}),i._extraFormat=N(e,D),i._initialAutoSizeIsDone=!0,i._dataLength=l.length,i._modules=[],i._visibleModules=[],i._basePlotModules=[];var p=i._subplots=function(){var e,t,n=S.collectableSubplotTypes,r={};if(!n){n=[];var i,o=S.subplotsRegistry;for(i in o){var a=o[i].attr;if(a&&(n.push(i),Array.isArray(a)))for(t=0;t<a.length;t++)E.pushUnique(n,a[t])}}for(e=0;e<n.length;e++)r[n[e]]=[];return r}(),h=i._splomAxes={x:{},y:{}},y=i._splomSubplots={};i._splomGridDflt={},i._scatterStackOpts={},i._firstScatter={},i._alignmentOpts={},i._colorAxes={},i._requestRangeslider={},i._traceUids=function(e,t){var n,r,i=t.length,o=[];for(n=0;n<e.length;n++){var a=e[n]._fullInput;a!==r&&o.push(a),r=a}var s=o.length,l=new Array(i),u={};function c(e,t){l[t]=e,u[e]=1}function f(e,t){return e&&"string"==typeof e&&!u[e]&&(c(e,t),1)}for(n=0;n<i;n++){var d=t[n].uid;f(d="number"==typeof d?String(d):d,n)||n<s&&f(o[n].uid,n)||c(E.randstr(u),n)}return l}(a,l),i._globalTransforms=(e._context||{}).globalTransforms,I.supplyDataDefaults(l,s,o,i);var g=Object.keys(h.x),v=Object.keys(h.y);if(1<g.length&&1<v.length){for(S.getComponentMethod("grid","sizeDefaults")(o,i),_=0;_<g.length;_++)E.pushUnique(p.xaxis,g[_]);for(_=0;_<v.length;_++)E.pushUnique(p.yaxis,v[_]);for(var m in y)E.pushUnique(p.cartesian,m)}if(i._has=I._hasPlotType.bind(i),a.length===s.length)for(_=0;_<s.length;_++)L(s[_],a[_]);I.supplyLayoutModuleDefaults(o,i,s,e._transitionData);for(var b=i._visibleModules,x=[],_=0;_<b.length;_++){var w=b[_].crossTraceDefaults;w&&E.pushUnique(x,w)}for(_=0;_<x.length;_++)x[_](s,i);i._hasOnlyLargeSploms=1===i._basePlotModules.length&&"splom"===i._basePlotModules[0].name&&15<g.length&&15<v.length&&0===i.shapes.length&&0===i.images.length,I.linkSubplots(s,i,a,r),I.cleanPlot(s,i,a,r);y=!(!r._has||!r._has("gl2d")),o=!(!i._has||!i._has("gl2d")),y=!(!r._has||!r._has("cartesian"))||y,o=!(!i._has||!i._has("cartesian"))||o;y&&!o?r._bgLayer.remove():o&&!y&&(i._shouldCreateBgLayer=!0),r._zoomlayer&&!e._dragging&&P({_fullLayout:r}),function(e,t){var n,r=[];t.meta&&(n=t._meta={meta:t.meta,layout:{meta:t.meta}});for(var i=0;i<e.length;i++){var o=e[i];o.meta?r[o.index]=o._meta={meta:o.meta}:t.meta&&(o._meta={meta:t.meta}),t.meta&&(o._meta.layout={meta:t.meta})}r.length&&((n=n||(t._meta={})).data=r)}(s,i),L(i,r),S.getComponentMethod("colorscale","crossTraceDefaults")(s,i),i._preGUI||(i._preGUI={}),i._tracePreGUI||(i._tracePreGUI={});var M,j=i._tracePreGUI,k={};for(M in j)k[M]="old";for(_=0;_<s.length;_++)k[M=s[_]._fullInput.uid]||(j[M]={}),k[M]="new";for(M in k)"old"===k[M]&&delete j[M];F(i),S.getComponentMethod("rangeslider","makeData")(i),n||u.length!==s.length||I.supplyDefaultsUpdateCalc(u,s)}},I.supplyDefaultsUpdateCalc=function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=(e[n]||[])[0];if(i&&i.trace){var o=i.trace;if(o._hasCalcTransform)for(var a,s,l=o._arrayAttrs,u=0;u<l.length;u++)a=l[u],s=E.nestedProperty(o,a).get().slice(),E.nestedProperty(r,a).set(s);i.trace=r}}},I.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])},I._hasPlotType=function(e){for(var t=this._basePlotModules||[],n=0;n<t.length;n++)if(t[n].name===e)return!0;var r=this._modules||[];for(n=0;n<r.length;n++){var i=r[n].name;if(i===e)return!0;i=S.modules[i];if(i&&i.categories[e])return!0}return!1},I.cleanPlot=function(e,t,n,r){for(var i=r._basePlotModules||[],o=0;o<i.length;o++){var a=i[o];a.clean&&a.clean(e,t,n,r)}var s=r._has&&r._has("gl"),l=t._has&&t._has("gl");s&&!l&&void 0!==r._glcontainer&&(r._glcontainer.selectAll(".gl-canvas").remove(),r._glcontainer.selectAll(".no-webgl").remove(),r._glcanvas=null);var u=!!r._infolayer;e:for(o=0;o<n.length;o++){for(var c=n[o].uid,f=0;f<e.length;f++)if(c===e[f].uid)continue e;u&&r._infolayer.select(".cb"+c).remove()}},I.linkSubplots=function(e,t,n,r){for(var i=r._plots||{},o=t._plots={},r=t._subplots,a={_fullData:e,_fullLayout:t},s=r.cartesian.concat(r.gl2d||[]),l=0;l<s.length;l++){var u,c=s[l],f=i[c],d=C.getFromId(a,c,"x"),h=C.getFromId(a,c,"y");for(f?u=o[c]=f:(u=o[c]={}).id=c,d._counterAxes.push(h._id),h._counterAxes.push(d._id),d._subplotsWith.push(c),h._subplotsWith.push(c),u.xaxis=d,u.yaxis=h,u._hasClipOnAxisFalse=!1,x=0;x<e.length;x++){var p=e[x];if(p.xaxis===u.xaxis._id&&p.yaxis===u.yaxis._id&&!1===p.cliponaxis){u._hasClipOnAxisFalse=!0;break}}}var y=C.list(a,null,!0);for(l=0;l<y.length;l++){var g,v=null;(g=y[l]).overlaying&&(v=C.getFromId(a,g.overlaying))&&v.overlaying&&(g.overlaying=!1,v=null),g._mainAxis=v||g,v&&(g.domain=v.domain.slice()),g._anchorAxis="free"===g.anchor?null:C.getFromId(a,g.anchor)}for(l=0;l<y.length;l++)if((g=y[l])._counterAxes.sort(C.idSort),g._subplotsWith.sort(E.subplotSort),g._mainSubplot=function(e,t){var n={_fullLayout:t},r="x"===e._id.charAt(0),i=e._mainAxis._anchorAxis,o="",a="",s="";i&&(s=i._mainAxis._id,o=r?e._id+s:s+e._id);if(!o||!t._plots[o]){o="";for(var l=e._counterAxes,u=0;u<l.length;u++){var c=l[u],f=r?e._id+c:c+e._id;a=a||f;c=C.getFromId(n,c);if(s&&c.overlaying===s){o=f;break}}}return o||a}(g,t),g._counterAxes.length&&(g.spikemode&&-1!==g.spikemode.indexOf("across")||g.automargin&&g.mirror&&"free"!==g.anchor||S.getComponentMethod("rangeslider","isVisible")(g))){for(var m=1,b=0,x=0;x<g._counterAxes.length;x++)var _=C.getFromId(a,g._counterAxes[x]),m=Math.min(m,_.domain[0]),b=Math.max(b,_.domain[1]);m<b&&(g._counterDomainMin=m,g._counterDomainMax=b)}},I.clearExpandedTraceDefaultColors=function(e){var i,o,t;for(o=[],(i=e._module._colorAttrs)||(e._module._colorAttrs=i=[],v.crawl(e._module.attributes,function(e,t,n,r){o[r]=t,o.length=r+1,"color"===e.valType&&void 0===e.dflt&&i.push(o.join("."))})),t=0;t<i.length;t++)E.nestedProperty(e,"_input."+i[t]).get()||E.nestedProperty(e,i[t]).set(null)},I.supplyDataDefaults=function(e,n,t,r){var i,o=r._modules,a=r._visibleModules,s=r._basePlotModules,l=0,u=0;function c(e){n.push(e);var t=e._module;t&&(E.pushUnique(o,t),!0===e.visible&&E.pushUnique(a,t),E.pushUnique(s,e._module.basePlotModule),l++,!1!==e._input.visible&&u++)}r._transformModules=[];for(var f,d,h={},p=[],y=(t.template||{}).data||{},g=M.traceTemplater(y),v=0;v<e.length;v++){if(i=e[v],(d=g.newTrace(i)).uid=r._traceUids[v],I.supplyTraceDefaults(i,d,u,r,v),d.index=v,d._input=i,d._expandedIndex=l,d.transforms&&d.transforms.length)for(var m=!1!==i.visible&&!1===d.visible,b=function(e,t,n,r){for(var i=e.transforms,o=[e],a=0;a<i.length;a++){var s=i[a],l=j[s.type];l&&l.transform&&(o=l.transform(o,{transform:s,fullTrace:e,fullData:t,layout:n,fullLayout:r,transformIndex:a}))}return o}(d,n,t,r),x=0;x<b.length;x++){var _=b[x],w={_template:d._template,type:d.type,uid:d.uid+x};m&&!1===_.visible&&delete _.visible,I.supplyTraceDefaults(_,w,l,r,v),L(w,_),w.index=v,w._input=i,w._fullInput=d,w._expandedIndex=l,w._expandedInput=_,c(w)}else c((d._fullInput=d)._expandedInput=d);S.traceIs(d,"carpetAxis")&&(h[d.carpet]=d),S.traceIs(d,"carpetDependent")&&p.push(v)}for(v=0;v<p.length;v++)(d=n[p[v]]).visible&&(f=h[d.carpet],(d._carpet=f)&&f.visible?(d.xaxis=f.xaxis,d.yaxis=f.yaxis):d.visible=!1)},I.supplyAnimationDefaults=function(n){var e;n=n||{};var r={};function t(e,t){return E.coerce(n||{},r,i,e,t)}if(t("mode"),t("direction"),t("fromcurrent"),Array.isArray(n.frame))for(r.frame=[],e=0;e<n.frame.length;e++)r.frame[e]=I.supplyAnimationFrameDefaults(n.frame[e]||{});else r.frame=I.supplyAnimationFrameDefaults(n.frame||{});if(Array.isArray(n.transition))for(r.transition=[],e=0;e<n.transition.length;e++)r.transition[e]=I.supplyAnimationTransitionDefaults(n.transition[e]||{});else r.transition=I.supplyAnimationTransitionDefaults(n.transition||{});return r},I.supplyAnimationFrameDefaults=function(n){var r={};function e(e,t){return E.coerce(n||{},r,i.frame,e,t)}return e("duration"),e("redraw"),r},I.supplyAnimationTransitionDefaults=function(n){var r={};function e(e,t){return E.coerce(n||{},r,i.transition,e,t)}return e("duration"),e("easing"),r},I.supplyFrameDefaults=function(n){var r={};function e(e,t){return E.coerce(n,r,a,e,t)}return e("group"),e("name"),e("traces"),e("baseframe"),e("data"),e("layout"),r},I.supplyTraceDefaults=function(n,r,e,t,i){var o,a=t.colorway||y.defaults,s=a[e%a.length];function l(e,t){return E.coerce(n,r,I.attributes,e,t)}e=l("visible");l("type"),l("name",t._traceWord+" "+i),l("uirevision",t.uirevision);a=I.getModule(r);if(r._module=a){var i=a.basePlotModule,u=i.attr,c=i.attributes;if(u&&c){var f=t._subplots,d="";if(e||"gl2d"!==i.name){if(Array.isArray(u))for(o=0;o<u.length;o++){var h=u[o],p=E.coerce(n,r,c,h);f[h]&&E.pushUnique(f[h],p),d+=p}else d=E.coerce(n,r,c,u);f[i.name]&&E.pushUnique(f[i.name],d)}}}return e&&(l("customdata"),l("ids"),l("meta"),S.traceIs(r,"showLegend")?(E.coerce(n,r,(a.attributes.showlegend?a:I).attributes,"showlegend"),l("legendgroup"),l("legendgrouptitle.text"),l("legendrank"),r._dfltShowLegend=!0):r._dfltShowLegend=!1,a&&a.supplyDefaults(n,r,s,t),S.traceIs(r,"noOpacity")||l("opacity"),S.traceIs(r,"notLegendIsolatable")&&(r.visible=!!r.visible),S.traceIs(r,"noHover")||(r.hovertemplate||E.coerceHoverinfo(n,r,t),"parcats"!==r.type&&S.getComponentMethod("fx","supplyDefaults")(n,r,s,t)),a&&a.selectPoints&&l("selectedpoints"),I.supplyTransformDefaults(n,r,t)),r},I.hasMakesDataTransform=g,I.supplyTransformDefaults=function(e,t,n){if(t._length||g(e)){var r=n._globalTransforms||[],i=n._transformModules||[];if(Array.isArray(e.transforms)||0!==r.length)for(var o=e.transforms||[],a=r.concat(o),s=t.transforms=[],l=0;l<a.length;l++){var u,c=a[l],f=c.type,d=j[f],h=!(c._module&&c._module===d),p=d&&"function"==typeof d.transform;d||E.warn("Unrecognized transform type "+f+"."),d&&d.supplyDefaults&&(h||p)?((u=d.supplyDefaults(c,t,n,e)).type=f,u._module=d,E.pushUnique(i,d)):u=E.extendFlat({},c),s.push(u)}}},I.supplyLayoutGlobalDefaults=function(n,r,e){function t(e,t){return E.coerce(n,r,I.layoutAttributes,e,t)}var i=n.template;E.isPlainObject(i)&&(r.template=i,r._template=i.layout,r._dataTemplate=i.data),t("autotypenumbers");var o=E.coerceFont(t,"font"),i=o.size;E.coerceFont(t,"title.font",E.extendFlat({},o,{size:Math.round(1.4*i)})),t("title.text",r._dfltTitle.plot),t("title.xref"),t("title.yref"),t("title.x"),t("title.y"),t("title.xanchor"),t("title.yanchor"),t("title.pad.t"),t("title.pad.r"),t("title.pad.b"),t("title.pad.l"),t("uniformtext.mode")&&t("uniformtext.minsize"),t("autosize",!(n.width&&n.height)),t("width"),t("height"),t("margin.l"),t("margin.r"),t("margin.t"),t("margin.b"),t("margin.pad"),t("margin.autoexpand"),n.width&&n.height&&I.sanitizeMargins(r),S.getComponentMethod("grid","sizeDefaults")(n,r),t("paper_bgcolor"),t("separators",e.decimal+e.thousands),t("hidesources"),t("colorway"),t("datarevision");e=t("uirevision");t("editrevision",e),t("selectionrevision",e),S.getComponentMethod("modebar","supplyLayoutDefaults")(n,r),S.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(n,r,t),t("meta"),E.isPlainObject(n.transition)&&(t("transition.duration"),t("transition.easing"),t("transition.ordering")),S.getComponentMethod("calendars","handleDefaults")(n,r,"calendar"),S.getComponentMethod("fx","supplyLayoutGlobalDefaults")(n,r,t)},I.plotAutoSize=function(e,t,n){var r,i,o=e._context||{},a=o.frameMargins,s=E.isPlotDiv(e);s&&e.emit("plotly_autosize"),o.fillFrame?(r=window.innerWidth,i=window.innerHeight,document.body.style.overflow="hidden"):(r=u((s=s?window.getComputedStyle(e):{}).width)||u(s.maxWidth)||n.width,i=u(s.height)||u(s.maxHeight)||n.height,T(a)&&0<a&&(l=1-2*a,r=Math.round(l*r),i=Math.round(l*i)));var a=I.layoutAttributes.width.min,l=I.layoutAttributes.height.min;r<a&&(r=a),i<l&&(i=l);l=!t.width&&1<Math.abs(n.width-r),t=!t.height&&1<Math.abs(n.height-i);(t||l)&&(l&&(n.width=r),t&&(n.height=i)),e._initialAutoSize||(e._initialAutoSize={width:r,height:i}),I.sanitizeMargins(n)},I.supplyLayoutModuleDefaults=function(e,t,n,r){var i,o,a,s=S.componentsRegistry,l=t._basePlotModules,u=S.subplotsRegistry.cartesian;for(i in s)(o=s[i]).includeBasePlot&&o.includeBasePlot(e,t);for(a in l.length||l.push(u),t._has("cartesian")&&(S.getComponentMethod("grid","contentDefaults")(e,t),u.finalizeSubplots(e,t)),t._subplots)t._subplots[a].sort(E.subplotSort);for(f=0;f<l.length;f++)(o=l[f]).supplyLayoutDefaults&&o.supplyLayoutDefaults(e,t,n);for(var c=t._modules,f=0;f<c.length;f++)(o=c[f]).supplyLayoutDefaults&&o.supplyLayoutDefaults(e,t,n);var d=t._transformModules;for(f=0;f<d.length;f++)(o=d[f]).supplyLayoutDefaults&&o.supplyLayoutDefaults(e,t,n,r);for(i in s)(o=s[i]).supplyLayoutDefaults&&o.supplyLayoutDefaults(e,t,n)},I.purge=function(e){var t=e._fullLayout||{};void 0!==t._glcontainer&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),E.clearThrottle(),E.clearResponsive(e),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._dragdata,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()},I.style=function(e){for(var t=e._fullLayout._visibleModules,n=[],r=0;r<t.length;r++){var i=t[r];i.style&&E.pushUnique(n,i.style)}for(r=0;r<n.length;r++)n[r](e)},I.sanitizeMargins=function(e){var t,n,r,i,o;e&&e.margin&&(t=e.width,n=e.height,i=t-((r=e.margin).l+r.r),e=n-(r.t+r.b),i<0&&(o=(t-1)/(r.l+r.r),r.l=Math.floor(o*r.l),r.r=Math.floor(o*r.r)),e<0&&(o=(n-1)/(r.t+r.b),r.t=Math.floor(o*r.t),r.b=Math.floor(o*r.b)))},I.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}},I.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};I.autoMargin=function(e,t,n){var r,i,o=e._fullLayout,a=o.width,s=o.height,l=o.margin,u=E.constrain(a-l.l-l.r,2,64),c=E.constrain(s-l.t-l.b,2,64),f=Math.max(0,a-u),a=Math.max(0,s-c),u=o._pushmargin,s=o._pushmarginIds;if(!1!==l.autoexpand&&(n?(void 0===(c=n.pad)&&(c=Math.min(12,l.l,l.r,l.t,l.b)),!f||1<(r=(n.l+n.r)/f)&&(n.l/=r,n.r/=r),!a||1<(i=(n.t+n.b)/a)&&(n.t/=i,n.b/=i),f=void 0!==n.xl?n.xl:n.x,r=void 0!==n.xr?n.xr:n.x,a=void 0!==n.yt?n.yt:n.y,i=void 0!==n.yb?n.yb:n.y,u[t]={l:{val:f,size:n.l+c},r:{val:r,size:n.r+c},b:{val:i,size:n.b+c},t:{val:a,size:n.t+c}},s[t]=1):(delete u[t],delete s[t]),!o._replotting))return I.doAutoMargin(e)},I.doAutoMargin=function(e){var t=e._fullLayout,n=t.width,r=t.height;t._size||(t._size={}),F(t);var i=t._size,o=t.margin,a=E.extendFlat({},i),s=o.l,l=o.r,u=o.t,c=o.b,f=t._pushmargin,d=t._pushmarginIds;if(!1!==t.margin.autoexpand){for(var h in f)d[h]||delete f[h];for(var p in f.base={l:{val:0,size:s},r:{val:1,size:l},t:{val:1,size:u},b:{val:0,size:c}},f){var y,g,v,m,b,x=f[p].l||{},p=f[p].b||{},_=x.val,w=x.size,M=p.val,j=p.size;for(y in f)T(w)&&f[y].r&&(b=f[y].r.val,g=f[y].r.size,_<b&&(s+l<(v=(w*b+(g-n)*_)/(b-_))+(m=(g*(1-_)+(w-n)*(1-b))/(b-_))&&(s=v,l=m))),T(j)&&f[y].t&&(b=f[y].t.val,v=f[y].t.size,M<b&&(c+u<(m=(j*b+(v-r)*M)/(b-M))+(b=(v*(1-M)+(j-r)*(1-b))/(b-M))&&(c=m,u=b)))}}var k,O=E.constrain(n-o.l-o.r,2,64),A=E.constrain(r-o.t-o.b,2,64),O=Math.max(0,n-O),A=Math.max(0,r-A);if(!O||1<(O=(s+l)/O)&&(s/=O,l/=O),!A||1<(A=(c+u)/A)&&(c/=A,u/=A),i.l=Math.round(s),i.r=Math.round(l),i.t=Math.round(u),i.b=Math.round(c),i.p=Math.round(o.pad),i.w=Math.round(n)-i.l-i.r,i.h=Math.round(r)-i.t-i.b,!t._replotting&&I.didMarginChange(a,i)){"_redrawFromAutoMarginCount"in t?t._redrawFromAutoMarginCount++:t._redrawFromAutoMarginCount=1;i=3*(1+Object.keys(d).length);if(t._redrawFromAutoMarginCount<i)return S.call("_doPlot",e);t._size=a,E.warn("Too many auto-margin redraws.")}k=C.list(e,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(e){for(var t=0;t<k.length;t++){var n=k[t][e];n&&n()}})};var l=["l","r","t","b","p","w","h"];function r(i,o,a){var s=!1;var e=[I.previousPromises,function(){if(i._transitionData)return i._transitioning=!1,function(e){var t=Promise.resolve();if(!e)return t;for(;e.length;)t=t.then(e.shift());return t}(i._transitionData._interruptCallbacks)},a.prepareFn,I.rehover,function(){return i.emit("plotly_transitioning",[]),new Promise(function(e){i._transitioning=!0,0<o.duration&&(i._transitioningWithDuration=!0),i._transitionData._interruptCallbacks.push(function(){s=!0}),a.redraw&&i._transitionData._interruptCallbacks.push(function(){return S.call("redraw",i)}),i._transitionData._interruptCallbacks.push(function(){i.emit("plotly_transitioninterrupted",[])});var t=0,n=0;function r(){return t++,function(){n++,s||n!==t||function(e){if(i._transitionData)(function(e){if(e)for(;e.length;)e.shift()})(i._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(a.redraw)return S.call("redraw",i)}).then(function(){i._transitioning=!1,i._transitioningWithDuration=!1,i.emit("plotly_transitioned",[])}).then(e)}(e)}}a.runFn(r),setTimeout(r())})}],e=E.syncOrAsync(e,i);return(e=!e||!e.then?Promise.resolve():e).then(function(){return i})}I.didMarginChange=function(e,t){for(var n=0;n<l.length;n++){var r=l[n],i=e[r],r=t[r];if(!T(i)||1<Math.abs(r-i))return!0}return!1},I.graphJson=function(e,t,o,n,r,i){(r&&t&&!e._fullData||r&&!t&&!e._fullLayout)&&I.supplyDefaults(e);var a=r?e._fullData:e.data,s=r?e._fullLayout:e.layout,l=(e._transitionData||{})._frames;function u(t,n){if("function"==typeof t)return n?"_function_":null;if(E.isPlainObject(t)){var r,i={};return Object.keys(t).sort().forEach(function(e){if(-1===["_","["].indexOf(e.charAt(0)))if("function"!=typeof t[e]){if("keepdata"===o){if("src"===e.substr(e.length-3))return}else if("keepstream"===o){if("string"==typeof(r=t[e+"src"])&&0<r.indexOf(":")&&!E.isPlainObject(t.stream))return}else if("keepall"!==o&&"string"==typeof(r=t[e+"src"])&&0<r.indexOf(":"))return;i[e]=u(t[e],n)}else n&&(i[e]="_function")}),i}return Array.isArray(t)?t.map(function(e){return u(e,n)}):E.isTypedArray(t)?E.simpleMap(t,E.identity):E.isJSDate(t)?E.ms2DateTimeLocal(+t):t}a={data:(a||[]).map(function(e){e=u(e);return t&&delete e.fit,e})};return t||(a.layout=u(s),r&&(s=s._size,a.layout.computed={margin:{b:s.b,l:s.l,r:s.r,t:s.t}})),l&&(a.frames=u(l)),i&&(a.config=u(e._context,!0)),"object"===n?a:JSON.stringify(a)},I.modifyFrames=function(e,t){for(var n,r=e._transitionData._frames,i=e._transitionData._frameHash,o=0;o<t.length;o++)switch((n=t[o]).type){case"replace":var a=n.value,s=(r[n.index]||{}).name,l=a.name;r[n.index]=i[l]=a,l!==s&&(delete i[s],i[l]=a);break;case"insert":i[(a=n.value).name]=a,r.splice(n.index,0,a);break;case"delete":delete i[(a=r[n.index]).name],r.splice(n.index,1)}return Promise.resolve()},I.computeFrame=function(e,t){var n,r,i,o,a=e._transitionData._frameHash;if(!t)throw new Error("computeFrame must be given a string frame name");var s=a[t.toString()];if(!s)return!1;for(var l=[s],u=[s.name];s.baseframe&&(s=a[s.baseframe.toString()])&&-1===u.indexOf(s.name);)l.push(s),u.push(s.name);for(var c={};s=l.pop();)if(s.layout&&(c.layout=I.extendLayout(c.layout,s.layout)),s.data){if(c.data||(c.data=[]),!(r=s.traces))for(r=[],n=0;n<s.data.length;n++)r[n]=n;for(c.traces||(c.traces=[]),n=0;n<s.data.length;n++)null!=(i=r[n])&&(-1===(o=c.traces.indexOf(i))&&(o=c.data.length,c.traces[o]=i),c.data[o]=I.extendTrace(c.data[o],s.data[n]))}return c},I.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},n=e._transitionData._frames,r=0;r<n.length;r++){var i=n[r];i&&i.name&&(t[i.name]=i)}},I.extendObjectWithContainers=function(e,t,n){var r,i,o,a,s,l,u,t=E.extendDeepNoArrays({},t||{}),c=E.expandObjectPaths(t),f={};if(n&&n.length)for(o=0;o<n.length;o++)void 0===(i=(r=E.nestedProperty(c,n[o])).get())?E.nestedProperty(f,n[o]).set(null):(r.set(null),E.nestedProperty(f,n[o]).set(i));if(e=E.extendDeepNoArrays(e||{},c),n&&n.length)for(o=0;o<n.length;o++)if(l=E.nestedProperty(f,n[o]).get()){for(u=(s=E.nestedProperty(e,n[o])).get(),Array.isArray(u)||s.set(u=[]),a=0;a<l.length;a++){var d=l[a];u[a]=null===d?null:I.extendObjectWithContainers(u[a],d)}s.set(u)}return e},I.dataArrayContainers=["transforms","dimensions"],I.layoutArrayContainers=S.layoutArrayContainers,I.extendTrace=function(e,t){return I.extendObjectWithContainers(e,t,I.dataArrayContainers)},I.extendLayout=function(e,t){return I.extendObjectWithContainers(e,t,I.layoutArrayContainers)},I.transition=function(x,_,w,M,e,s){var e={redraw:e.redraw},j={},k=[];return e.prepareFn=function(){for(var e=Array.isArray(_)?_.length:0,t=M.slice(0,e),n=0;n<t.length;n++){var r=t[n],i=x._fullData[r]._module;i&&(i.animatable&&(i=i.basePlotModule.name,j[i]||(j[i]=[]),j[i].push(r)),x.data[t[n]]=I.extendTrace(x.data[t[n]],_[n]))}var o,a=E.expandObjectPaths(E.extendDeepNoArrays({},w)),s=/^[xy]axis[0-9]*$/;for(o in a)s.test(o)&&delete a[o].range;I.extendLayout(x.layout,a),delete x.calcdata,I.supplyDefaults(x),I.doCalcdata(x);var l=E.expandObjectPaths(w);if(l){var u,c=x._fullLayout._plots;for(u in c){var f=c[u],d=f.xaxis,h=f.yaxis,p=d.range.slice(),y=h.range.slice(),g=null,v=null,m=null,b=null;Array.isArray(l[d._name+".range"])?g=l[d._name+".range"].slice():Array.isArray((l[d._name]||{}).range)&&(g=l[d._name].range.slice()),Array.isArray(l[h._name+".range"])?v=l[h._name+".range"].slice():Array.isArray((l[h._name]||{}).range)&&(v=l[h._name].range.slice()),p&&g&&(d.r2l(p[0])!==d.r2l(g[0])||d.r2l(p[1])!==d.r2l(g[1]))&&(m={xr0:p,xr1:g}),y&&v&&(h.r2l(y[0])!==h.r2l(v[0])||h.r2l(y[1])!==h.r2l(v[1]))&&(b={yr0:y,yr1:v}),(m||b)&&k.push(E.extendFlat({plotinfo:f},m,b))}}return Promise.resolve()},e.runFn=function(e){var t,n,r,i=x._fullLayout._basePlotModules,o=k.length;if(w)for(n=0;n<i.length;n++)i[n].transitionAxes&&i[n].transitionAxes(x,k,s,e);for(r in o?((t=E.extendFlat({},s)).duration=0,delete j.cartesian):t=s,j){var a=j[r];x._fullData[a[0]]._module.basePlotModule.plot(x,a,t,e)}},r(x,s,e)},I.transitionFromReact=function(c,f,d,h){var p=c._fullLayout,y=p.transition,g={},v=[];return g.prepareFn=function(){var e,t=p._plots;for(e in g.redraw=!1,"some"===f.anim&&(g.redraw=!0),"some"===d.anim&&(g.redraw=!0),t){var n=t[e],r=n.xaxis,i=n.yaxis,o=h[r._name].range.slice(),a=h[i._name].range.slice(),s=r.range.slice(),l=i.range.slice();r.setScale(),i.setScale();var u=null,c=null;r.r2l(o[0])===r.r2l(s[0])&&r.r2l(o[1])===r.r2l(s[1])||(u={xr0:o,xr1:s}),i.r2l(a[0])===i.r2l(l[0])&&i.r2l(a[1])===i.r2l(l[1])||(c={yr0:a,yr1:l}),(u||c)&&v.push(E.extendFlat({plotinfo:n},u,c))}return Promise.resolve()},g.runFn=function(t){for(var n,r,i,e=c._fullData,o=c._fullLayout._basePlotModules,a=[],s=0;s<e.length;s++)a.push(s);function l(){if(c._fullLayout)for(var e=0;e<o.length;e++)o[e].transitionAxes&&o[e].transitionAxes(c,v,n,t)}function u(){if(c._fullLayout)for(var e=0;e<o.length;e++)o[e].plot(c,i,r,t)}v.length&&f.anim?"traces first"===y.ordering?(n=E.extendFlat({},y,{duration:0}),i=a,r=y,setTimeout(l,y.duration),u()):(n=y,i=null,r=E.extendFlat({},y,{duration:0}),setTimeout(u,n.duration),l()):v.length?(n=y,l()):f.anim&&(i=a,r=y,u())},r(c,y,g)},I.doCalcdata=function(r,e){var i,o,a,t=C.list(r),s=r._fullData,n=r._fullLayout,l=new Array(s.length),u=(r.calcdata||[]).slice();for(r.calcdata=l,n._numBoxes=0,n._numViolins=0,n._violinScaleGroupStats={},r._hmpixcount=0,r._hmlumcount=0,n._piecolormap={},n._sunburstcolormap={},n._treemapcolormap={},n._iciclecolormap={},n._funnelareacolormap={},d=0;d<s.length;d++)Array.isArray(e)&&-1===e.indexOf(d)&&(l[d]=u[d]);for(d=0;d<s.length;d++)(i=s[d])._arrayAttrs=v.findArrayAttributes(i),i._extremes={};for(var c,f=n._subplots.polar||[],d=0;d<f.length;d++)t.push(n[f[d]].radialaxis,n[f[d]].angularaxis);for(c in n._colorAxes){var h=n[c];!1!==h.cauto&&(delete h.cmin,delete h.cmax)}var p=!1;function y(e,t){if(i=s[e],!!(o=i._module).isContainer===t){t=[];if(!0===i.visible&&0!==i._length){delete i._indexToPoints;var n=i.transforms||[];for(a=n.length-1;0<=a;a--)if(n[a].enabled){i._indexToPoints=n[a]._indexToPoints;break}o&&o.calc&&(t=o.calc(r,i))}(t=!Array.isArray(t)||!t[0]?[{x:m,y:m}]:t)[0].t||(t[0].t={}),t[0].trace=i,l[e]=t}}for(b(t,s,n),d=0;d<s.length;d++)y(d,!0);for(d=0;d<s.length;d++)!function(e){if(i=s[e],o=i._module,!0===i.visible&&i.transforms)for(o&&o.calc&&((e=o.calc(r,i))[0]&&e[0].t&&e[0].t._scene&&delete e[0].t._scene.dirty),a=0;a<i.transforms.length;a++){var t=i.transforms[a];(o=j[t.type])&&o.calcTransform&&(i._hasCalcTransform=!0,p=!0,o.calcTransform(r,i,t))}}(d);for(p&&b(t,s,n),d=0;d<s.length;d++)y(d,!0);for(d=0;d<s.length;d++)y(d,!1);x(r);var g=function(e,a){var t,n,r,i,o,s=[];var l,u,c={min:function(e){return E.aggNums(Math.min,null,e)},max:function(e){return E.aggNums(Math.max,null,e)},sum:function(e){return E.aggNums(function(e,t){return e+t},null,e)},total:function(e){return E.aggNums(function(e,t){return e+t},null,e)},mean:function(e){return E.mean(e)},median:function(e){return E.median(e)}};for(t=0;t<e.length;t++){var f=e[t];if("category"===f.type){var d=f.categoryorder.match(B);if(d){var h=d[1],d=d[2],p=f._id.charAt(0),y="x"===p,g=[];for(n=0;n<f._categories.length;n++)g.push([f._categories[n],[]]);for(n=0;n<f._traceIndices.length;n++){var v=f._traceIndices[n],m=a._fullData[v];if(!0===m.visible){var b=m.type;S.traceIs(m,"histogram")&&(delete m._xautoBinFinished,delete m._yautoBinFinished);var x="splom"===b,_="scattergl"===b,w=a.calcdata[v];for(r=0;r<w.length;r++){var M=w[r];if(x){var j,k=m._axesDim[f._id];y||(j=m._diag[k][0])&&(f=a._fullLayout[C.id2name(j)]);var O,A=M.trace.dimensions[k].values;for(i=0;i<A.length;i++)for(l=f._categoriesMap[A[i]],o=0;o<M.trace.dimensions.length;o++)o!==k&&(O=M.trace.dimensions[o],g[l][1].push(O.values[i]))}else if(_){for(i=0;i<M.t.x.length;i++)u=y?(l=M.t.x[i],M.t.y[i]):(l=M.t.y[i],M.t.x[i]),g[l][1].push(u);M.t&&M.t._scene&&delete M.t._scene.dirty}else if(M.hasOwnProperty("z")){u=M.z;var T=function(e,t,n){var r=t._id.charAt(0);if("histogram2dcontour"!==e)return function(e,t){return"y"===r?t:e};var e=t._counterAxes[0],t=C.getFromId(a,e),i="x"===r||"x"===e&&"category"===t.type,o="y"===r||"y"===e&&"category"===t.type;return function(e,t){return 0===e||0===t||i&&e===n[t].length-1||o&&t===n.length-1?-1:("y"===r?t:e)-1}}(m.type,f,u);for(i=0;i<u.length;i++)for(o=0;o<u[i].length;o++)(l=T(o,i))+1&&g[l][1].push(u[i][o])}else for(void 0===(l=M.p)&&(l=M[p]),void 0===(u=void 0===(u=M.s)?M.v:u)&&(u=y?M.y:M.x),Array.isArray(u)||(u=void 0===u?[]:[u]),i=0;i<u.length;i++)g[l][1].push(u[i])}}}f._categoriesValue=g;var P=[];for(n=0;n<g.length;n++)P.push([g[n][0],c[h](g[n][1])]);P.sort(function(e,t){return e[1]-t[1]}),f._categoriesAggregatedValue=P,f._initialCategories=P.map(function(e){return e[0]}),"descending"===d&&f._initialCategories.reverse(),s=s.concat(f.sortByInitialCategories())}}}return s}(t,r);if(g.length){for(n._numBoxes=0,d=n._numViolins=0;d<g.length;d++)y(g[d],!0);for(d=0;d<g.length;d++)y(g[d],!1);x(r)}S.getComponentMethod("fx","calc")(r),S.getComponentMethod("errorbars","calc")(r)};var B=/(total|sum|min|max|mean|median) (ascending|descending)/;function b(e,t,n){var r={};function i(e){e.clearCalc(),"multicategory"===e.type&&e.setupMultiCategory(t),r[e._id]=1}E.simpleMap(e,i);for(var o=n._axisMatchGroups||[],a=0;a<o.length;a++)for(var s in o[a])r[s]||i(n[C.id2name(s)])}function x(e){var t,n,r=e._fullLayout,i=r._visibleModules,o={};for(d=0;d<i.length;d++){var a=i[d],s=a.crossTraceCalc;s&&(o[a=a.basePlotModule.name]?E.pushUnique(o[a],s):o[a]=[s])}for(n in o){var l=o[n],u=r._subplots[n];if(Array.isArray(u))for(t=0;t<u.length;t++)for(var c=u[t],f=("cartesian"===n?r._plots:r)[c],d=0;d<l.length;d++)l[d](e,f,c);else for(d=0;d<l.length;d++)l[d](e)}}I.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()},I.redrag=function(e){e._fullLayout._redrag&&e._fullLayout._redrag()},I.generalUpdatePerTraceModule=function(e,t,n,r){for(var i,o,a,s=t.traceHash,l={},u=0;u<n.length;u++){var c=n[u],f=c[0].trace;f.visible&&(l[f.type]=l[f.type]||[],l[f.type].push(c))}for(i in s)l[i]||((o=s[i][0])[0].trace.visible=!1,l[i]=[o]);for(a in l){var d=l[a];d[0][0].trace._module.plot(e,t,E.filterVisible(d),r)}t.traceHash=l},I.plotBasePlot=function(e,t,n,r,i){var o=S.getModule(e),e=s(t.calcdata,o)[0];o.plot(t,e,r,i)},I.cleanBasePlot=function(e,t,n,r,i){var o=i._has&&i._has(e),n=n._has&&n._has(e);o&&!n&&i["_"+e+"layer"].selectAll("g.trace").remove()}},{"../components/color":647,"../constants/numerical":758,"../lib":779,"../plot_api/plot_schema":816,"../plot_api/plot_template":817,"../plots/get_data":861,"../registry":879,"./animation_attributes":822,"./attributes":824,"./cartesian/axis_ids":832,"./cartesian/handle_outline":839,"./command":857,"./font_attributes":859,"./frame_attributes":860,"./layout_attributes":874,"@plotly/d3":3,"d3-format":628,"d3-time-format":629,"fast-isnumeric":574}],877:[function(e,t,n){"use strict";var v=e("../lib"),m=e("../plot_api/plot_template"),b=e("./domain").defaults;t.exports=function(e,t,n,r){var i=r.type,o=r.attributes,a=r.handleDefaults,s=r.partition||"x",l=t._subplots[i],u=l.length,c=u&&l[0].replace(/\d+$/,"");function f(e,t){return v.coerce(p,y,o,e,t)}for(var d=0;d<u;d++){var h=l[d],p=e[h]||(e[h]={}),y=m.newContainer(t,h,c);r.noUirevision||f("uirevision",t.uirevision);var g={};g[s]=[d/u,(d+1)/u],b(y,t,f,g),r.id=h,a(p,y,f,r)}}},{"../lib":779,"../plot_api/plot_template":817,"./domain":858}],878:[function(e,t,n){"use strict";e=e("../constants/docs");e.FORMAT_LINK,e.DATE_FORMAT_LINK;function r(e){var t=e.description?" "+e.description:"",n=e.keys||[];if(0<n.length){for(var r=[],i=0;i<n.length;i++)r[i]="`"+n[i]+"`";t+="Finally, the template string has access to ",t=1===n.length?"variable "+r[0]:"variables "+r.slice(0,-1).join(", ")+" and "+r.slice(-1)+"."}return t}n.hovertemplateAttrs=function(e,t){e=e||{};r(t=t||{});t={valType:"string",dflt:"",editType:e.editType||"none"};return!1!==e.arrayOk&&(t.arrayOk=!0),t},n.texttemplateAttrs=function(e,t){e=e||{};r(t=t||{});t={valType:"string",dflt:"",editType:e.editType||"calc"};return!1!==e.arrayOk&&(t.arrayOk=!0),t}},{"../constants/docs":754}],879:[function(e,t,u){"use strict";var c=e("./lib/loggers"),n=e("./lib/noop"),o=e("./lib/push_unique"),a=e("./lib/is_plain_object"),f=e("./lib/dom").addStyleRule,r=e("./lib/extend"),i=e("./plots/attributes"),s=e("./plots/layout_attributes"),d=r.extendFlat,l=r.extendDeepAll;function h(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t)for(var n=0;n<t.length;n++)o(u.layoutArrayRegexes,t[n])}}function p(e,t){var e=u.componentsRegistry[e].schema;e&&e.traces&&((e=e.traces[t])&&l(u.modules[t]._module.attributes,e))}function y(e,t){var e=u.componentsRegistry[e].schema;e&&e.transforms&&((e=e.transforms[t])&&l(u.transformsRegistry[t].attributes,e))}function g(e,t){var n=u.componentsRegistry[e].schema;n&&n.subplots&&(t=(e=u.subplotsRegistry[t]).layoutAttributes,e="subplot"===e.attr?e.name:e.attr,Array.isArray(e)&&(e=e[0]),e=n.subplots[e],t&&e&&l(t,e))}function v(e){return e="object"==typeof e?e.type:e}u.modules={},u.allCategories={},u.allTypes=[],u.subplotsRegistry={},u.transformsRegistry={},u.componentsRegistry={},u.layoutArrayContainers=[],u.layoutArrayRegexes=[],u.traceLayoutAttributes={},u.localeRegistry={},u.apiMethodRegistry={},u.collectableSubplotTypes=null,u.register=function(e){if(u.collectableSubplotTypes=null,!e)throw new Error("No argument passed to Plotly.register.");Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];if(!n)throw new Error("Invalid module was attempted to be registered!");switch(n.moduleType){case"trace":!function(e){var t=e.name,n=e.categories,r=e.meta;if(u.modules[t])c.log("Type "+t+" already registered");else{u.subplotsRegistry[e.basePlotModule.name]||function(e){var t=e.name;if(u.subplotsRegistry[t])c.log("Plot type "+t+" already registered.");else for(var n in h(e),u.subplotsRegistry[t]=e,u.componentsRegistry)g(n,e.name)}(e.basePlotModule);for(var i,o={},a=0;a<n.length;a++)o[n[a]]=!0,u.allCategories[n[a]]=!0;for(i in u.modules[t]={_module:e,categories:o},r&&Object.keys(r).length&&(u.modules[t].meta=r),u.allTypes.push(t),u.componentsRegistry)p(i,t);e.layoutAttributes&&d(u.traceLayoutAttributes,e.layoutAttributes);r=e.basePlotModule,e=r.name;if("mapbox"===e){var s,l=r.constants.styleRules;for(s in l)f(".js-plotly-plot .plotly .mapboxgl-"+s,l[s])}"geo"!==e&&"mapbox"!==e||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}(n);break;case"transform":!function(e){if("string"!=typeof e.name)throw new Error("Transform module *name* must be a string.");var t,n="Transform module "+e.name,r="function"==typeof e.transform,i="function"==typeof e.calcTransform;if(!r&&!i)throw new Error(n+" is missing a *transform* or *calcTransform* method.");r&&i&&c.log([n+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" "));a(e.attributes)||c.log(n+" registered without an *attributes* object.");"function"!=typeof e.supplyDefaults&&c.log(n+" registered without a *supplyDefaults* method.");for(t in u.transformsRegistry[e.name]=e,u.componentsRegistry)y(t,e.name)}(n);break;case"component":!function(e){if("string"!=typeof e.name)throw new Error("Component module *name* must be a string.");var t,n,r,i=e.name;(u.componentsRegistry[i]=e).layoutAttributes&&(e.layoutAttributes._isLinkedToArray&&o(u.layoutArrayContainers,i),h(e));for(t in u.modules)p(i,t);for(n in u.subplotsRegistry)g(i,n);for(r in u.transformsRegistry)y(i,r);e.schema&&e.schema.layout&&l(s,e.schema.layout)}(n);break;case"locale":!function(e){var t=e.name,n=t.split("-")[0],r=e.dictionary,i=e.format,o=r&&Object.keys(r).length,a=i&&Object.keys(i).length,s=u.localeRegistry,e=s[t];e||(s[t]=e={});n!==t&&((t=s[n])||(s[n]=t={}),o&&t.dictionary===e.dictionary&&(t.dictionary=r),a&&t.format===e.format&&(t.format=i));o&&(e.dictionary=r);a&&(e.format=i)}(n);break;case"apiMethod":var r=n.name;u.apiMethodRegistry[r]=n.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},u.getModule=function(e){e=u.modules[v(e)];return!!e&&e._module},u.traceIs=function(e,t){if("various"===(e=v(e)))return!1;var n=u.modules[e];return n||(e&&c.log("Unrecognized trace type "+e+"."),n=u.modules[i.type.dflt]),!!n.categories[t]},u.getTransformIndices=function(e,t){for(var n=[],r=e.transforms||[],i=0;i<r.length;i++)r[i].type===t&&n.push(i);return n},u.hasTransform=function(e,t){for(var n=e.transforms||[],r=0;r<n.length;r++)if(n[r].type===t)return!0;return!1},u.getComponentMethod=function(e,t){e=u.componentsRegistry[e];return e&&e[t]||n},u.call=function(){var e=arguments[0],t=[].slice.call(arguments,1);return u.apiMethodRegistry[e].apply(null,t)}},{"./lib/dom":770,"./lib/extend":772,"./lib/is_plain_object":780,"./lib/loggers":783,"./lib/noop":788,"./lib/push_unique":793,"./plots/attributes":824,"./plots/layout_attributes":874}],880:[function(e,t,n){"use strict";var h=e("../registry"),e=e("../lib"),p=e.extendFlat,y=e.extendDeep;function g(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}t.exports=function(e,t){var n,r=e.data,i=e.layout,o=y([],r),a=y({},i,g(t.tileClass)),i=e._context||{};if(t.width&&(a.width=t.width),t.height&&(a.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){a.annotations=[];for(var s=Object.keys(a),l=0;l<s.length;l++)n=s[l],-1<["xaxis","yaxis","zaxis"].indexOf(n.slice(0,5))&&(a[s[l]].title={text:""});for(l=0;l<o.length;l++){var u=o[l];u.showscale=!1,u.marker&&(u.marker.showscale=!1),h.traceIs(u,"pie-like")&&(u.textposition="none")}}if(Array.isArray(t.annotations))for(l=0;l<t.annotations.length;l++)a.annotations.push(t.annotations[l]);var c=Object.keys(a).filter(function(e){return e.match(/^scene\d*$/)});if(c.length){var f={};for("thumbnail"===t.tileClass&&(f={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),l=0;l<c.length;l++){var d=a[c[l]];d.xaxis||(d.xaxis={}),d.yaxis||(d.yaxis={}),d.zaxis||(d.zaxis={}),p(d.xaxis,f),p(d.yaxis,f),p(d.zaxis,f),d._scene=null}}e=document.createElement("div");t.tileClass&&(e.className=t.tileClass);i={gd:e,td:e,layout:a,data:o,config:{staticPlot:void 0===t.staticPlot||t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:i.mapboxAccessToken}};return"transparent"!==t.setBackground&&(i.config.setBackground=t.setBackground||"opaque"),i.gd.defaultLayout=g(t.tileClass),i}},{"../lib":779,"../registry":879}],881:[function(e,t,n){"use strict";var s=e("../lib"),l=e("../plot_api/to_image"),u=e("./filesaver"),c=e("./helpers");t.exports=function(i,o){var a;return s.isPlainObject(i)||(a=s.getGraphDiv(i)),(o=o||{}).format=o.format||"png",o.width=o.width||null,o.height=o.height||null,o.imageDataOnly=!0,new Promise(function(t,n){a&&a._snapshotInProgress&&n(new Error("Snapshotting already in progress.")),s.isIE()&&"svg"!==o.format&&n(new Error(c.MSG_IE_BAD_FORMAT)),a&&(a._snapshotInProgress=!0);var e=l(i,o),r=o.filename||i.fn||"newplot";r+="."+o.format.replace("-","."),e.then(function(e){return a&&(a._snapshotInProgress=!1),u(e,r,o.format)}).then(function(e){t(e)}).catch(function(e){a&&(a._snapshotInProgress=!1),n(e)})})}},{"../lib":779,"../plot_api/to_image":820,"./filesaver":882,"./helpers":883}],882:[function(e,t,n){"use strict";var u=e("../lib"),c=e("./helpers");t.exports=function(i,o,a){var s=document.createElement("a"),l="download"in s;return new Promise(function(e,t){var n,r;return u.isIE()?(n=c.createBlob(i,"svg"),window.navigator.msSaveBlob(n,o),n=null,e(o)):l?(n=c.createBlob(i,a),r=c.createObjectURL(n),s.href=r,s.download=o,document.body.appendChild(s),s.click(),document.body.removeChild(s),c.revokeObjectURL(r),n=null,e(o)):u.isSafari()?(c.octetStream(("svg"===a?",":";base64,")+encodeURIComponent(i)),e(o)):void t(new Error("download error"))})}},{"../lib":779,"./helpers":883}],883:[function(e,t,n){"use strict";var r=e("../registry");n.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d")||e._has("mapbox"))?500:0},n.getRedrawFunc=function(e){return function(){r.getComponentMethod("colorbar","draw")(e)}},n.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)},n.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var i=window.URL||window.webkitURL;n.createObjectURL=function(e){return i.createObjectURL(e)},n.revokeObjectURL=function(e){return i.revokeObjectURL(e)},n.createBlob=function(e,t){if("svg"===t)return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"});if("full-json"===t)return new window.Blob([e],{type:"application/json;charset=utf-8"});e=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(window.atob(e));return new window.Blob([e],{type:"image/"+t})},n.octetStream=function(e){document.location.href="data:application/octet-stream"+e},n.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,n.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":879}],884:[function(e,t,n){"use strict";var r=e("./helpers"),e={getDelay:r.getDelay,getRedrawFunc:r.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};t.exports=e},{"./cloneplot":880,"./download":881,"./helpers":883,"./svgtoimg":885,"./toimage":886,"./tosvg":887}],885:[function(e,t,n){"use strict";var m=e("../lib"),r=e("events").EventEmitter,b=e("./helpers");t.exports=function(y){var g=y.emitter||new r,v=new Promise(function(n,r){var e=window.Image,t=y.svg,i=y.format||"png";if(m.isIE()&&"svg"!==i){var o=new Error(b.MSG_IE_BAD_FORMAT);return r(o),y.promise?v:g.emit("error",o)}var a,s=y.canvas,l=y.scale||1,u=y.width||300,o=y.height||150,c=l*u,f=l*o,d=s.getContext("2d"),h=new e,p="svg"===i||m.isSafari()?b.encodeSVG(t):(a=b.createBlob(t,"svg"),b.createObjectURL(a));s.width=c,s.height=f,h.onload=function(){var e;switch(a=null,b.revokeObjectURL(p),"svg"!==i&&d.drawImage(h,0,0,c,f),i){case"jpeg":e=s.toDataURL("image/jpeg");break;case"png":e=s.toDataURL("image/png");break;case"webp":e=s.toDataURL("image/webp");break;case"svg":e=p;break;default:var t="Image format is not jpeg, png, svg or webp.";if(r(new Error(t)),!y.promise)return g.emit("error",t)}n(e),y.promise||g.emit("success",e)},h.onerror=function(e){if(a=null,b.revokeObjectURL(p),r(e),!y.promise)return g.emit("error",e)},h.src=p});return y.promise?v:g}},{"../lib":779,"./helpers":883,events:573}],886:[function(e,t,n){"use strict";var o=e("events").EventEmitter,a=e("../registry"),s=e("../lib"),l=e("./helpers"),u=e("./cloneplot"),c=e("./tosvg"),f=e("./svgtoimg");t.exports=function(e,n){var r=new o,t=u(e,{format:"png"}),i=t.gd;return i.style.position="absolute",i.style.left="-5000px",document.body.appendChild(i),e=l.getRedrawFunc(i),a.call("_doPlot",i,t.data,t.layout,t.config).then(e).then(function(){var e=l.getDelay(i._fullLayout);setTimeout(function(){var e=c(i),t=document.createElement("canvas");t.id=s.randstr(),(r=f({format:n.format,width:i._fullLayout.width,height:i._fullLayout.height,canvas:t,emitter:r,svg:e})).clean=function(){i&&document.body.removeChild(i)}},e)}).catch(function(e){r.emit("error",e)}),r}},{"../lib":779,"../registry":879,"./cloneplot":880,"./helpers":883,"./svgtoimg":885,"./tosvg":887,events:573}],887:[function(e,t,n){"use strict";var g=e("@plotly/d3"),v=e("../lib"),m=e("../components/drawing"),b=e("../components/color"),x=e("../constants/xmlns_namespaces"),_=/"/g,w="TOBESTRIPPED",M=new RegExp('("'+w+")|("+w+'")',"g");t.exports=function(e,t,n){var r,i=e._fullLayout,o=i._paper,a=i._toppaper,s=i.width,l=i.height;o.insert("rect",":first-child").call(m.setRect,0,0,s,l).call(b.fill,i.paper_bgcolor);var u=i._basePlotModules||[];for(d=0;d<u.length;d++){var c=u[d];c.toSVG&&c.toSVG(e)}if(a)for(var a=a.node().childNodes,f=Array.prototype.slice.call(a),d=0;d<f.length;d++){var h=f[d];h.childNodes.length&&o.node().appendChild(h)}i._draggers&&i._draggers.remove(),o.node().style.background="",o.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var e,t=g.select(this);"hidden"!==this.style.visibility&&"none"!==this.style.display?(t.style({visibility:null,display:null}),(e=this.style.fontFamily)&&-1!==e.indexOf('"')&&t.style("font-family",e.replace(_,w))):t.remove()});var p=[];if(i._gradientUrlQueryParts)for(r in i._gradientUrlQueryParts)p.push(r);if(i._patternUrlQueryParts)for(r in i._patternUrlQueryParts)p.push(r);p.length&&o.selectAll(p.join(",")).each(function(){var e=g.select(this),t=this.style.fill;t&&-1!==t.indexOf("url(")&&e.style("fill",t.replace(_,w));t=this.style.stroke;t&&-1!==t.indexOf("url(")&&e.style("stroke",t.replace(_,w))}),"pdf"!==t&&"eps"!==t||o.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),o.node().setAttributeNS(x.xmlns,"xmlns",x.svg),o.node().setAttributeNS(x.xmlns,"xmlns:xlink",x.xlink),"svg"===t&&n&&(o.attr("width",n*s),o.attr("height",n*l),o.attr("viewBox","0 0 "+s+" "+l));var y,s=(new window.XMLSerializer).serializeToString(o.node());return l=s,y=g.select("body").append("div").style({display:"none"}).html(""),l=l.replace(/(&[^;]*;)/gi,function(e){return"&lt;"===e?"&#60;":"&rt;"===e?"&#62;":-1!==e.indexOf("<")||-1!==e.indexOf(">")?"":y.html(e).text()}),y.remove(),s=(s=(s=l).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(M,"'"),s=v.isIE()?(s=(s=s.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"'):s}},{"../components/color":647,"../components/drawing":669,"../constants/xmlns_namespaces":759,"../lib":779,"@plotly/d3":3}],888:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;r.mergeArray(t.text,e,"tx"),r.mergeArray(t.hovertext,e,"htx");var t=t.marker;t&&(r.mergeArray(t.opacity,e,"mo",!0),r.mergeArray(t.color,e,"mc"),(t=t.line)&&(r.mergeArray(t.color,e,"mlc"),r.mergeArrayCastPositive(t.width,e,"mlw")))}},{"../../lib":779}],889:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),i=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,o=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,s=e("../../components/colorscale/attributes"),l=e("../../plots/font_attributes"),u=e("./constants"),c=e("../../components/drawing/attributes").pattern,f=e("../../lib/extend").extendFlat,e=l({editType:"calc",arrayOk:!0,colorEditType:"style"}),l=f({},r.marker.line.width,{dflt:0}),l=f({width:l,editType:"calc"},s("marker.line")),c=f({line:l,editType:"calc"},s("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:c});t.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,xhoverformat:i("x"),yhoverformat:i("y"),text:r.text,texttemplate:a({editType:"plot"},{keys:u.eventDataKeys}),hovertext:r.hovertext,hovertemplate:o({},{keys:u.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:f({},e,{}),insidetextfont:f({},e,{}),outsidetextfont:f({},e,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:f({},r.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:c,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":654,"../../components/drawing/attributes":668,"../../lib/extend":772,"../../plots/cartesian/axis_format_attributes":831,"../../plots/font_attributes":859,"../../plots/template_attributes":878,"../scatter/attributes":931,"./constants":890}],890:[function(e,t,n){"use strict";t.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],891:[function(e,t,n){"use strict";var x=e("fast-isnumeric"),d=e("../../lib").isArrayOrTypedArray,_=e("../../constants/numerical").BADNUM,h=e("../../registry"),w=e("../../plots/cartesian/axes"),m=e("../../plots/cartesian/constraints").getAxisGroup,u=e("./sieve.js");function p(e,t,n,r,i){if(r.length){var o,a,s,l;switch(!function(e,t){var n,r,i;for(n=0;n<t.length;n++){var o=t[n],a=o[0].trace,s="funnel"===a.type?a._base:a.base,l="h"===a.orientation?a.xcalendar:a.ycalendar,u="category"===e.type||"multicategory"===e.type?function(){return null}:e.d2c;if(d(s)){for(r=0;r<Math.min(s.length,o.length);r++)i=u(s[r],0,l),x(i)?(o[r].b=+i,o[r].hasB=1):o[r].b=0;for(;r<o.length;r++)o[r].b=0}else{i=u(s,0,l);var c=x(i);for(i=c?i:0,r=0;r<o.length;r++)o[r].b=i,c&&(o[r].hasB=1)}}}(n,r),i.mode){case"overlay":c(t,n,r,i);break;case"group":for(o=[],a=[],s=0;s<r.length;s++)(void 0===(l=r[s])[0].trace.offset?a:o).push(l);a.length&&function(e,t,n,r,i){r=new u(r,{posAxis:t,sepNegVal:!1,overlapNoMerge:!i.norm});(function(e,t,n,r){for(var i,o=e._fullLayout,a=n.positions,e=n.distinctPositions,s=n.minDiff,l=n.traces,u=l.length,c=a.length!==e.length,f=s*(1-r.gap),e=m(o,t._id)+l[0][0].trace.orientation,d=o._alignmentOpts[e]||{},h=0;h<u;h++){var p=l[h],y=p[0].trace,g=d[y.alignmentgroup]||{},v=Object.keys(g.offsetGroups||{}).length,g=(i=v?f/v:c?f/u:f)*(1-(r.groupgap||0));i=v?((2*y._offsetIndex+1-v)*i-g)/2:c?((2*h+1-u)*i-g)/2:-g/2;p=p[0].t;p.barwidth=g,p.poffset=i,p.bargroupwidth=f,p.bardelta=s}n.binWidth=l[0][0].t.barwidth/100,b(n),M(t,n),j(t,n,c)})(e,t,r,i),function(e,t){for(var n=e.traces,r=0;r<n.length;r++){var i=n[r];if(void 0===i[0].trace.base)for(var o=new u([i],{posAxis:t,sepNegVal:!0,overlapNoMerge:!0}),a=0;a<i.length;a++){var s,l=i[a];l.p===_||(s=o.put(l.p,l.b+l.s))&&(l.b=s)}}}(r,t),i.norm?(g(r),v(n,r,i)):y(n,r)}(e,t,n,a,i),o.length&&c(t,n,o,i);break;case"stack":case"relative":for(o=[],a=[],s=0;s<r.length;s++)(void 0===(l=r[s])[0].trace.base?a:o).push(l);a.length&&function(e,t,n,r){var i=new u(n,{posAxis:e,sepNegVal:"relative"===r.mode,overlapNoMerge:!(r.norm||"stack"===r.mode||"relative"===r.mode)});f(e,i,r),function(e,t,n){var r,i,o,a,s,l,u=k(e),c=t.traces;for(a=0;a<c.length;a++)if(r=c[a],"funnel"===(i=r[0].trace).type)for(s=0;s<r.length;s++)(l=r[s]).s!==_&&t.put(l.p,-.5*l.s);for(a=0;a<c.length;a++){r=c[a],i=r[0].trace,o="funnel"===i.type;var f,d,h=[];for(s=0;s<r.length;s++)(l=r[s]).s!==_&&(d=o?l.s:l.s+l.b,f=t.put(l.p,d),d=f+d,l.b=f,l[u]=d,n.norm||(h.push(d),l.hasB&&h.push(f)));n.norm||(i._extremes[e._id]=w.findExtremes(e,h,{tozero:!0,padded:!0}))}}(t,i,r);for(var o=0;o<n.length;o++)for(var a=n[o],s=0;s<a.length;s++){var l=a[s];l.s!==_&&l.b+l.s===i.get(l.p,l.s)&&(l._outmost=!0)}r.norm&&v(t,i,r)}(t,n,a,i),o.length&&c(t,n,o,i)}!function(e,t){var n,r,i,o=k(t),a={},s=1/0,l=-1/0;for(n=0;n<e.length;n++)for(i=e[n],r=0;r<i.length;r++){var u=i[r].p;x(u)&&(s=Math.min(s,u),l=Math.max(l,u))}var c=1e4/(l-s),f=a.round=function(e){return String(Math.round(c*(e-s)))};for(n=0;n<e.length;n++){(i=e[n])[0].t.extents=a;var d=i[0].t.poffset,h=Array.isArray(d);for(r=0;r<i.length;r++){var p,y,g=i[r],v=g[o]-g.w/2;x(v)&&(p=g[o]+g.w/2,y=f(g.p),a[y]?a[y]=[Math.min(v,a[y][0]),Math.max(p,a[y][1])]:a[y]=[v,p]),g.p0=g.p+(h?d[r]:d),g.p1=g.p0+g.w,g.s0=g.b,g.s1=g.s0+g.s}}}(r,t)}}function c(e,t,n,r){for(var i=0;i<n.length;i++){var o=n[i],o=new u([o],{posAxis:e,sepNegVal:!1,overlapNoMerge:!r.norm});f(e,o,r),r.norm?(g(o),v(t,o,r)):y(t,o)}}function f(e,t,n){for(var r=t.minDiff,i=t.traces,o=r*(1-n.gap),a=o*(1-(n.groupgap||0)),s=-a/2,l=0;l<i.length;l++){var u=i[l][0].t;u.barwidth=a,u.poffset=s,u.bargroupwidth=o,u.bardelta=r}t.binWidth=i[0][0].t.barwidth/100,b(t),M(e,t),j(e,t)}function b(e){for(var t=e.traces,n=0;n<t.length;n++){var r,i=t[n],o=i[0],a=o.trace,s=o.t,o=a._offset||a.offset,l=s.poffset;if(d(o)){for(r=Array.prototype.slice.call(o,0,i.length),f=0;f<r.length;f++)x(r[f])||(r[f]=l);for(f=r.length;f<i.length;f++)r.push(l);s.poffset=r}else void 0!==o&&(s.poffset=o);var a=a._width||a.width,u=s.barwidth;if(d(a)){for(var c=Array.prototype.slice.call(a,0,i.length),f=0;f<c.length;f++)x(c[f])||(c[f]=u);for(f=c.length;f<i.length;f++)c.push(u);if(s.barwidth=c,void 0===o){for(r=[],f=0;f<i.length;f++)r.push(l+(u-c[f])/2);s.poffset=r}}else void 0!==a&&(s.barwidth=a,void 0===o&&(s.poffset=l+(u-a)/2))}}function M(e,t){for(var n=t.traces,r=k(e),i=0;i<n.length;i++)for(var o=n[i],a=o[0].t,s=a.poffset,l=Array.isArray(s),u=a.barwidth,c=Array.isArray(u),f=0;f<o.length;f++){var d=o[f],h=d.w=c?u[f]:u;d[r]=d.p+(l?s[f]:s)+h/2}}function j(e,t,n){var r=t.traces,i=t.minDiff/2;w.minDtick(e,t.minDiff,t.distinctPositions[0],n);for(var o=0;o<r.length;o++){var a=r[o],s=a[0],l=s.trace,u=[];for(p=0;p<a.length;p++)y=(g=a[p]).p-i,b=g.p+i,u.push(y,b);if(l.width||l.offset)for(var s=s.t,c=s.poffset,f=s.barwidth,d=Array.isArray(c),h=Array.isArray(f),p=0;p<a.length;p++){var y,g=a[p],v=d?c[p]:c,m=h?f[p]:f,b=(y=g.p+v)+m;u.push(y,b)}l._extremes[e._id]=w.findExtremes(e,u,{padded:!1})}}function y(e,t){for(var n=t.traces,r=k(e),i=0;i<n.length;i++){for(var o=n[i],a=o[0].trace,s=[],l=!1,u=0;u<o.length;u++){var c=o[u],f=c.b,d=f+c.s;c[r]=d,s.push(d),c.hasB&&s.push(f),c.hasB&&c.b||(l=!0)}a._extremes[e._id]=w.findExtremes(e,s,{tozero:l,padded:!0})}}function g(e){for(var t=e.traces,n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++){var o=r[i];o.s!==_&&e.put(o.p,o.b+o.s)}}function v(t,e,n){var r=e.traces,i=k(t),o="fraction"===n.norm?1:100,a=o/1e9,s=t.l2c(t.c2l(0)),l="stack"===n.mode?o:s;function u(e){return x(t.c2l(e))&&(e<s-a||l+a<e||!x(s))}for(var c=0;c<r.length;c++){for(var f=r[c],d=f[0].trace,h=[],p=!1,y=!1,g=0;g<f.length;g++){var v,m,b=f[g];b.s!==_&&(m=Math.abs(o/e.get(b.p,b.s)),b.b*=m,b.s*=m,m=(v=b.b)+b.s,b[i]=m,h.push(m),y=y||u(m),b.hasB&&(h.push(v),y=y||u(v)),b.hasB&&b.b||(p=!0))}d._extremes[t._id]=w.findExtremes(t,h,{tozero:p,padded:y})}}function k(e){return e._id.charAt(0)}t.exports={crossTraceCalc:function(e,t){for(var n=t.xaxis,r=t.yaxis,t=e._fullLayout,i=e._fullData,o=e.calcdata,a=[],s=[],l=0;l<i.length;l++){var u=i[l];if(!0===u.visible&&h.traceIs(u,"bar")&&u.xaxis===n._id&&u.yaxis===r._id&&(("h"===u.orientation?a:s).push(o[l]),u._computePh))for(var c=e.calcdata[l],f=0;f<c.length;f++)"function"==typeof c[f].ph0&&(c[f].ph0=c[f].ph0()),"function"==typeof c[f].ph1&&(c[f].ph1=c[f].ph1())}t={xCat:"category"===n.type||"multicategory"===n.type,yCat:"category"===r.type||"multicategory"===r.type,mode:t.barmode,norm:t.barnorm,gap:t.bargap,groupgap:t.bargroupgap},p(e,n,r,s,t),p(e,r,n,a,t)},setGroupPositions:p}},{"../../constants/numerical":758,"../../lib":779,"../../plots/cartesian/axes":828,"../../plots/cartesian/constraints":836,"../../registry":879,"./sieve.js":899,"fast-isnumeric":574}],892:[function(e,t,n){"use strict";var p=e("../../lib"),a=e("../../components/color"),s=e("../../registry"),l=e("../scatter/xy_defaults"),u=e("../scatter/period_defaults"),c=e("./style_defaults"),f=e("../../plots/cartesian/constraints").getAxisGroup,d=e("./attributes"),y=p.coerceFont;function o(e,t,n,r){var i=t.orientation,o=t[{v:"x",h:"y"}[i]+"axis"],a=f(n,o)+i,o=n._alignmentOpts||{},i=r("alignmentgroup"),n=o[a],a=(n=n||(o[a]={}))[i];a?a.traces.push(t):a=n[i]={traces:[t],alignmentIndex:Object.keys(n).length,offsetGroups:{}};n=r("offsetgroup"),r=a.offsetGroups,a=r[n];n&&(a=a||(r[n]={offsetIndex:Object.keys(r).length}),t._offsetIndex=a.offsetIndex)}function h(e,t,n,r,i,o){var a=!(!1===(o=o||{}).moduleHasSelected),s=!(!1===o.moduleHasUnselected),l=!(!1===o.moduleHasConstrain),u=!(!1===o.moduleHasCliponaxis),c=!(!1===o.moduleHasTextangle),f=!(!1===o.moduleHasInsideanchor),d=!!o.hasPathbar,h=Array.isArray(i)||"auto"===i,o=h||"inside"===i,h=h||"outside"===i;(o||h)&&(i=y(r,"textfont",n.font),n=p.extendFlat({},i),(e=!(e.textfont&&e.textfont.color))&&delete n.color,y(r,"insidetextfont",n),d&&(d=p.extendFlat({},i),e&&delete d.color,y(r,"pathbar.textfont",d)),h&&y(r,"outsidetextfont",i),a&&r("selected.textfont.color"),s&&r("unselected.textfont.color"),l&&r("constraintext"),u&&r("cliponaxis"),c&&r("textangle"),r("texttemplate")),o&&f&&r("insidetextanchor")}t.exports={supplyDefaults:function(n,r,e,t){function i(e,t){return p.coerce(n,r,d,e,t)}var o;l(n,r,t,i)?(u(n,r,t,i),i("xhoverformat"),i("yhoverformat"),i("orientation",r.x&&!r.y?"h":"v"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate"),o=i("textposition"),h(n,0,t,i,o,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),c(n,r,i,e,t),e=(r.marker.line||{}).color,(t=s.getComponentMethod("errorbars","supplyDefaults"))(n,r,e||a.defaultLine,{axis:"y"}),t(n,r,e||a.defaultLine,{axis:"x",inherit:"y"}),p.coerceSelectionMarkerOpacity(r,i)):r.visible=!1},crossTraceDefaults:function(e,t){var n;function r(e){return p.coerce(n._input,n,d,e)}if("group"===t.barmode)for(var i=0;i<e.length;i++)"bar"===(n=e[i]).type&&(n._input,o(0,n,t,r))},handleGroupingDefaults:o,handleText:h}},{"../../components/color":647,"../../lib":779,"../../plots/cartesian/constraints":836,"../../registry":879,"../scatter/period_defaults":951,"../scatter/xy_defaults":958,"./attributes":889,"./style_defaults":901}],893:[function(e,t,n){"use strict";var o=e("fast-isnumeric"),r=e("tinycolor2"),i=e("../../lib").isArrayOrTypedArray;n.coerceString=function(e,t,n){if("string"==typeof t){if(t||!e.noBlank)return t}else if(("number"==typeof t||!0===t)&&!e.strict)return String(t);return void 0!==n?n:e.dflt},n.coerceNumber=function(e,t,n){if(o(t)){t=+t;var r=e.min,i=e.max;if(!(void 0!==r&&t<r||void 0!==i&&i<t))return t}return void 0!==n?n:e.dflt},n.coerceColor=function(e,t,n){return r(t).isValid()?t:void 0!==n?n:e.dflt},n.coerceEnumerated=function(e,t,n){return e.coerceNumber&&(t=+t),-1!==e.values.indexOf(t)?t:void 0!==n?n:e.dflt},n.getValue=function(e,t){var n;return Array.isArray(e)?t<e.length&&(n=e[t]):n=e,n},n.getLineWidth=function(e,t){return 0<t.mlw?t.mlw:i(e.marker.line.width)?0:e.marker.line.width}},{"../../lib":779,"fast-isnumeric":574,tinycolor2:980}],894:[function(e,t,n){"use strict";var S=e("../../components/fx"),o=e("../../registry"),i=e("../../components/color"),E=e("../../lib").fillText,a=e("./helpers").getLineWidth,C=e("../../plots/cartesian/axes").hoverLabelText,L=e("../../constants/numerical").BADNUM;function s(e,t,n,r,i){var o,a,s,l,u,c,f=e.cd,d=f[0].trace,h=f[0].t,p="closest"===r,y="waterfall"===d.type,g=e.maxHoverDistance,v=e.maxSpikeDistance;"h"===d.orientation?(o=n,a=t,s="y",l="x",u=T,c=O):(o=t,a=n,s="x",l="y",c=T,u=O);var m=d[s+"period"],t=p||m;function b(e){return _(e,-1)}function x(e){return _(e,1)}function _(e,t){var n=e.w;return e[s]+t*n/2}function w(e){return e[s+"End"]-e[s+"Start"]}var M=p?b:m?function(e){return e.p-w(e)/2}:function(e){return Math.min(b(e),e.p-h.bardelta/2)},j=p?x:m?function(e){return e.p+w(e)/2}:function(e){return Math.max(x(e),e.p+h.bardelta/2)};function k(e,t,n){return i.finiteRange&&(n=0),S.inbox(e-o,t-o,n+Math.min(1,Math.abs(t-e)/P)-1)}function O(e){return k(M(e),j(e),g)}function A(e){var t=e[l];return y&&(e=Math.abs(e.rawS)||0,0<a?t+=e:a<0&&(t-=e)),t}function T(e){var t=a,n=e.b,e=A(e);return S.inbox(n-t,e-t,g+(e-t)/(e-n)-1)}n=e[s+"a"],m=e[l+"a"];var P=Math.abs(n.r2c(n.range[1])-n.r2c(n.range[0])),r=S.getDistanceFunction(r,u,c,function(e){return(u(e)+c(e))/2});if(S.getClosest(f,r,e),!1!==e.index&&f[e.index].p!==L){t||(M=function(e){return Math.min(b(e),e.p-h.bargroupwidth/2)},j=function(e){return Math.max(x(e),e.p+h.bargroupwidth/2)});t=f[e.index],f=d.base?t.b+t.s:t.s;e[l+"0"]=e[l+"1"]=m.c2p(t[l],!0),e[l+"LabelVal"]=f;f=h.extents[h.extents.round(t.p)];e[s+"0"]=n.c2p(p?M(t):f[0],!0),e[s+"1"]=n.c2p(p?j(t):f[1],!0);var p=void 0!==t.orig_p;return e[s+"LabelVal"]=p?t.orig_p:t.p,e.labelLabel=C(n,e[s+"LabelVal"],d[s+"hoverformat"]),e.valueLabel=C(m,e[l+"LabelVal"],d[l+"hoverformat"]),e.baseLabel=C(m,t.b,d[l+"hoverformat"]),e.spikeDistance=(f=a,m=(p=t).b,p=A(p),(S.inbox(m-f,p-f,v+(p-f)/(p-m)-1)+k(b(t),x(t),v))/2),e[s+"Spike"]=n.c2p(t.p,!0),E(t,d,e),e.hovertemplate=d.hovertemplate,e}}function l(e,t){var n=t.mcc||e.marker.color,r=t.mlcc||e.marker.line.color,t=a(e,t);return i.opacity(n)?n:i.opacity(r)&&t?r:void 0}t.exports={hoverPoints:function(e,t,n,r,i){if(n=s(e,t,n,r,i)){r=n.cd,i=r[0].trace,r=r[n.index];return n.color=l(i,r),o.getComponentMethod("errorbars","hoverInfo")(r,i,n),[n]}},hoverOnBars:s,getTraceColor:l}},{"../../components/color":647,"../../components/fx":687,"../../constants/numerical":758,"../../lib":779,"../../plots/cartesian/axes":828,"../../registry":879,"./helpers":893}],895:[function(e,t,n){"use strict";t.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],896:[function(e,t,n){"use strict";var d=e("../../registry"),h=e("../../plots/cartesian/axes"),p=e("../../lib"),y=e("./layout_attributes");t.exports=function(n,r,e){function t(e,t){return p.coerce(n,r,y,e,t)}for(var i=!1,o=!1,a=!1,s={},l=t("barmode"),u=0;u<e.length;u++){var c,f=e[u];d.traceIs(f,"bar")&&f.visible&&(i=!0,"group"===l&&(s[c=f.xaxis+f.yaxis]&&(a=!0),s[c]=!0),f.visible&&"histogram"===f.type&&"category"!==h.getFromId({_fullLayout:r},f["v"===f.orientation?"xaxis":"yaxis"]).type&&(o=!0))}i?("overlay"!==l&&t("barnorm"),t("bargap",o&&!a?0:.2),t("bargroupgap")):delete r.barmode}},{"../../lib":779,"../../plots/cartesian/axes":828,"../../registry":879,"./layout_attributes":895}],897:[function(e,t,n){"use strict";var O=e("@plotly/d3"),A=e("fast-isnumeric"),T=e("../../lib"),P=e("../../lib/svg_text_utils"),S=e("../../components/color"),E=e("../../components/drawing"),r=e("../../registry"),C=e("../../plots/cartesian/axes").tickText,i=e("./uniform_text"),L=i.recordMinTextSize,o=i.clearMinTextSize,R=e("./style"),I=e("./helpers"),a=e("./constants"),i=e("./attributes"),z=i.text,D=i.textposition,N=e("../../components/fx/helpers").appendArrayPointValue,F=a.TEXTPAD;function s(e){return e.id}function B(e,t,n,r){return t.uniformtext.mode||!l(n)?e:(r&&(i=r()),e.transition().duration(n.duration).ease(n.easing).each("end",function(){i&&i()}).each("interrupt",function(){i&&i()}));var i}function l(e){return e&&0<e.duration}function U(e){return"auto"===e?0:e}function q(e,t){var n=Math.PI/180*t,t=Math.abs(Math.sin(n)),n=Math.abs(Math.cos(n));return{x:e.width*n+e.height*t,y:e.width*t+e.height*n}}function H(e,t,n,r,i,o){var a=!!o.isHorizontal,s=!!o.constrained,l=o.angle||0,u=o.anchor||"end",c="end"===u,f="start"===u,d=((o.leftToRight||0)+1)/2,h=1-d,p=i.width,y=i.height,g=Math.abs(t-e),v=Math.abs(r-n),u=2*F<g&&2*F<v?F:0;g-=2*u,v-=2*u;o=U(l);"auto"!==l||p<=g&&y<=v||!(g<p||v<y)||(v<p||g<y)&&p<y==g<v||(o+=90);p=q(i,o),y=1;s&&(y=Math.min(1,g/p.x,v/p.y));s=i.left*h+i.right*d,g=(i.top+i.bottom)/2,v=(e+F)*h+(t-F)*d,i=(n+r)/2,h=0,d=0;return(f||c)&&(c=(a?p.x:p.y)/2,p=a?e<t?1:-1:n<r?1:-1,a?h=f?(v=e+p*u,-p*c):(v=t-p*u,p*c):d=f?(i=n+p*u,-p*c):(i=r-p*u,p*c)),{textX:s,textY:g,targetX:v,targetY:i,anchorX:h,anchorY:d,scale:y,rotate:o}}t.exports={plot:function(b,x,e,t,_,w){var M=x.xaxis,j=x.yaxis,k=b._fullLayout;_||(_={mode:k.barmode,norm:k.barmode,gap:k.bargap,groupgap:k.bargroupgap},o("bar",k)),e=T.makeTraceGroups(t,e,"trace bars").each(function(h){var e=O.select(this),p=h[0].trace,t="waterfall"===p.type,n="funnel"===p.type,y="bar"===p.type||n,g=0;t&&p.connector.visible&&"between"===p.connector.mode&&(g=p.connector.line.width/2);var v="h"===p.orientation,m=l(_),n=T.ensureSingle(e,"g","points"),t=function(e){if(e.ids)return s}(p),t=n.selectAll("g.point").data(T.identity,t);t.enter().append("g").classed("point",!0),t.exit().remove(),t.each(function(e,t){var n,r,i,o=O.select(this),a=(s=e,a=M,c=j,u=[],n=(l=v)?a:c,a=l?c:a,(c=[])[0]=n.c2p(s.s0,!0),u[0]=a.c2p(s.p0,!0),c[1]=n.c2p(s.s1,!0),u[1]=a.c2p(s.p1,!0),l?[c,u]:[u,c]),s=a[0][0],l=a[0][1],u=a[1][0],c=a[1][1],a=0==(v?l-s:c-u);function f(e){var t=O.round(r/2%1,2);return 0===_.gap&&0===_.groupgap?O.round(Math.round(e)-t,2):e}a=(a=a&&y&&I.getLineWidth(p,e)?!1:a)||!(A(s)&&A(l)&&A(u)&&A(c)),(e.isBlank=a)&&(v?l=s:c=u),g&&!a&&(v?l+=((s-=(s<l?1:-1)*g)<l?1:-1)*g:c+=((u-=(u<c?1:-1)*g)<c?1:-1)*g),"waterfall"===p.type?a||(i=p[e.dir].marker,r=i.line.width,i=i.color):(r=I.getLineWidth(p,e),i=e.mc||p.marker.color),b._context.staticPlot||(s=(d=S.opacity(i)<1||.01<r?f:function(e,t,n){return n&&e===t?e:2<=Math.abs(e-t)?f(e):t<e?Math.ceil(e):Math.floor(e)})(s,l,v),l=d(l,s,v),u=d(u,c,!v),c=d(c,u,!v));var d=B(T.ensureSingle(o,"path"),k,_,w);d.style("vector-effect","non-scaling-stroke").attr("d",isNaN((l-s)*(c-u))||a&&b._context.staticPlot?"M0,0Z":"M"+s+","+u+"V"+c+"H"+l+"V"+u+"Z").call(E.setClipUrl,x.layerClipId,b),!k.uniformtext.mode&&m&&(a=E.makePointStyleFns(p),E.singlePointStyle(e,d,p,a,b)),function(r,e,t,n,i,o,a,s,l,u,c){var f,d=e.xaxis,h=e.yaxis,p=r._fullLayout;function y(e,t,n){return T.ensureSingle(e,"text").text(t).attr({class:"bartext bartext-"+f,"text-anchor":"middle","data-notex":1}).call(E.font,n).call(P.convertToTspans,r)}var g=n[0].trace,v="h"===g.orientation,m=function(e,t,n,r,i){var o=t[0].trace;n=o.texttemplate?function(e,t,n,r,i){var o=t[0].trace,a=T.castOption(o,n,"texttemplate");if(!a)return"";var s,l,u="histogram"===o.type,c="waterfall"===o.type,f="funnel"===o.type,d="h"===o.orientation;l=d?(p="y",s=i,y="x",r):(p="x",s=r,y="y",i);function h(e){return C(l,l.c2l(e),!0).text}t=t[n],n={};n.label=t.p,n.labelLabel=n[p+"Label"]=function(e){return C(s,s.c2l(e),!0).text}(t.p);var p=T.castOption(o,t.i,"text");0!==p&&!p||(n.text=p);n.value=t.s,n.valueLabel=n[y+"Label"]=h(t.s);var y={};N(y,o,t.i),!u&&void 0!==y.x||(y.x=d?n.value:n.label);!u&&void 0!==y.y||(y.y=d?n.label:n.value);!u&&void 0!==y.xLabel||(y.xLabel=d?n.valueLabel:n.labelLabel);!u&&void 0!==y.yLabel||(y.yLabel=d?n.labelLabel:n.valueLabel);c&&(n.delta=+t.rawS||t.s,n.deltaLabel=h(n.delta),n.final=t.v,n.finalLabel=h(n.final),n.initial=n.final-n.delta,n.initialLabel=h(n.initial));f&&(n.value=t.s,n.valueLabel=h(n.value),n.percentInitial=t.begR,n.percentInitialLabel=T.formatPercent(t.begR),n.percentPrevious=t.difR,n.percentPreviousLabel=T.formatPercent(t.difR),n.percentTotal=t.sumR,n.percenTotalLabel=T.formatPercent(t.sumR));t=T.castOption(o,t.i,"customdata");t&&(n.customdata=t);return T.texttemplateString(a,n,e._d3locale,y,n,o._meta||{})}(e,t,n,r,i):o.textinfo?function(e,t,n,r){var i=e[0].trace,o="h"===i.orientation,a="waterfall"===i.type,s="funnel"===i.type;function l(e){return C(o?n:r,+e,!0).text}function u(e){return-1!==h.indexOf(e)}var c,f=i.textinfo,d=e[t],h=f.split("+"),f=[];u("label")&&f.push(function(e){return C(o?r:n,e,!0).text}(e[t].p));u("text")&&(0!==(c=T.castOption(i,d.i,"text"))&&!c||f.push(c));a&&(t=+d.rawS||d.s,i=d.v,a=i-t,u("initial")&&f.push(l(a)),u("delta")&&f.push(l(t)),u("final")&&f.push(l(i)));s&&(u("value")&&f.push(l(d.s)),s=0,u("percent initial")&&s++,u("percent previous")&&s++,u("percent total")&&s++,s=1<s,u("percent initial")&&(c=T.formatPercent(d.begR),s&&(c+=" of initial"),f.push(c)),u("percent previous")&&(c=T.formatPercent(d.difR),s&&(c+=" of previous"),f.push(c)),u("percent total")&&(c=T.formatPercent(d.sumR),s&&(c+=" of total"),f.push(c)));return f.join("<br>")}(t,n,r,i):I.getValue(o.text,n);return I.coerceString(z,n)}(p,n,i,d,h);f=function(e,t){t=I.getValue(e.textposition,t);return I.coerceEnumerated(D,t)}(g,i);var b="stack"===u.mode||"relative"===u.mode,x=n[i],e=!b||x._outmost;if(m&&"none"!==f&&(!x.isBlank&&o!==a&&s!==l||"auto"!==f&&"inside"!==f)){b=p.font,n=R.getBarColor(n[i],g),n=R.getInsideTextFont(g,i,b,n),i=R.getOutsideTextFont(g,i,b),b=t.datum();v?"log"===d.type&&b.s0<=0&&(o=d.range[0]<d.range[1]?0:d._length):"log"===h.type&&b.s0<=0&&(s=h.range[0]<h.range[1]?h._length:0);var _,w,M,j,d=Math.abs(a-o)-2*F,b=Math.abs(l-s)-2*F;if("outside"===f&&(e||x.hasB||(f="inside")),"auto"===f&&(e?(f="inside",j=T.ensureUniformFontSize(r,n),_=y(t,m,j),w=E.bBox(_.node()),M=w.width,O=w.height,h=M<=d&&O<=b,e=M<=b&&O<=d,b=v?M*(b/O)<=d:O*(d/M)<=b,0<M&&0<O&&(h||e||b)?f="inside":(f="outside",_.remove(),_=null)):f="inside"),!_){j=T.ensureUniformFontSize(r,"outside"===f?i:n);m=(_=y(t,m,j)).attr("transform");if(_.attr("transform",""),w=E.bBox(_.node()),M=w.width,O=w.height,_.attr("transform",m),M<=0||O<=0)return _.remove()}var k,O=g.textangle;(O="outside"===f?(k="both"===g.constraintext||"outside"===g.constraintext,function(e,t,n,r,i,o){var a,s=!!o.isHorizontal,l=!!o.constrained,u=o.angle||0,c=i.width,f=i.height,d=Math.abs(t-e),h=Math.abs(r-n);a=s?2*F<h?F:0:2*F<d?F:0;var p=1;l&&(p=s?Math.min(1,h/f):Math.min(1,d/c));o=U(u),l=q(i,o),h=(s?l.x:l.y)/2,f=(i.left+i.right)/2,d=(i.top+i.bottom)/2,c=(e+t)/2,u=(n+r)/2,l=0,i=0,n=s?t<e?1:-1:n<r?1:-1;s?(c=t-n*a,l=n*h):(u=r+n*a,i=-n*h);return{textX:f,textY:d,targetX:c,targetY:u,anchorX:l,anchorY:i,scale:p,rotate:o}}(o,a,s,l,w,{isHorizontal:v,constrained:k,angle:O})):(k="both"===g.constraintext||"inside"===g.constraintext,H(o,a,s,l,w,{isHorizontal:v,constrained:k,angle:O,anchor:g.insidetextanchor}))).fontSize=j.size,L("histogram"===g.type?"bar":g.type,O,p),x.transform=O,B(_,p,u,c).attr("transform",T.getTextTransform(O))}else t.select("text").remove()}(b,x,o,h,t,s,l,u,c,_,w),x.layerClipId&&E.hideOutsideRangePoint(e,o.select("text"),M,j,p.xcalendar,p.ycalendar)});t=!1===p.cliponaxis;E.setClipUrl(e,t?null:x.layerClipId,b)}),r.getComponentMethod("errorbars","plot")(b,e,x,_)},toMoveInsideBar:H}},{"../../components/color":647,"../../components/drawing":669,"../../components/fx/helpers":683,"../../lib":779,"../../lib/svg_text_utils":804,"../../plots/cartesian/axes":828,"../../registry":879,"./attributes":889,"./constants":890,"./helpers":893,"./style":900,"./uniform_text":902,"@plotly/d3":3,"fast-isnumeric":574}],898:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,i,o,a,s,l,u=e.cd,c=e.xaxis,f=e.yaxis,d=u[0].trace,h="funnel"===d.type,p="h"===d.orientation,y=[];if(!1===t)for(n=0;n<u.length;n++)u[n].selected=0;else for(n=0;n<u.length;n++){var g=u[n],v="ct"in g?g.ct:(v=g,i=f,o=p,a=h,l=s=void 0,s=(r=c).c2p(o?v.s0:v.p0,!0),l=r.c2p(o?v.s1:v.p1,!0),r=i.c2p(o?v.p0:v.s0,!0),v=i.c2p(o?v.p1:v.s1,!0),a?[(s+l)/2,(r+v)/2]:o?[l,(r+v)/2]:[(s+l)/2,v]);t.contains(v,!1,n,e)?(y.push({pointNumber:n,x:c.c2d(g.x),y:f.c2d(g.y)}),g.selected=1):g.selected=0}return y}},{}],899:[function(e,t,n){"use strict";t.exports=r;var u=e("../../lib").distinctVals,c=e("../../constants/numerical").BADNUM;function r(e,t){this.traces=e,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var n=1/0,r=[],i=0;i<e.length;i++){for(var o=e[i],a=0;a<o.length;a++){var s=o[a];s.p!==c&&r.push(s.p)}o[0]&&o[0].width1&&(n=Math.min(o[0].width1,n))}this.positions=r;var l=u(r);this.distinctPositions=l.vals,1===l.vals.length&&n!==1/0?this.minDiff=n:this.minDiff=Math.min(l.minDiff,n);t=(t.posAxis||{}).type;"category"!==t&&"multicategory"!==t||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}r.prototype.put=function(e,t){var n=this.getLabel(e,t),e=this.bins[n]||0;return this.bins[n]=e+t,e},r.prototype.get=function(e,t){t=this.getLabel(e,t);return this.bins[t]||0},r.prototype.getLabel=function(e,t){return(t<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?e:Math.round(e/this.binWidth))}},{"../../constants/numerical":758,"../../lib":779}],900:[function(e,t,n){"use strict";var a=e("@plotly/d3"),i=e("../../components/color"),s=e("../../components/drawing"),l=e("../../lib"),u=e("../../registry"),o=e("./uniform_text").resizeText,r=e("./attributes"),c=r.textfont,f=r.insidetextfont,d=r.outsidetextfont,h=e("./helpers");function p(e,t,n){s.pointStyle(e.selectAll("path"),t,n),y(e,t,n)}function y(e,n,r){e.selectAll("text").each(function(e){var t=a.select(this),e=l.ensureUniformFontSize(r,g(t,e,n,r));s.font(t,e)})}function g(e,t,n,r){var i=r._fullLayout.font,o=n.textfont;return e.classed("bartext-inside")?(r=_(t,n),o=m(n,t.i,i,r)):e.classed("bartext-outside")&&(o=b(n,t.i,i)),o}function v(e,t,n){return x(c,e.textfont,t,n)}function m(e,t,n,r){n=v(e,t,n);return(void 0===e._input.textfont||void 0===e._input.textfont.color||Array.isArray(e.textfont.color)&&void 0===e.textfont.color[t])&&(n={color:i.contrast(r),family:n.family,size:n.size}),x(f,e.insidetextfont,t,n)}function b(e,t,n){n=v(e,t,n);return x(d,e.outsidetextfont,t,n)}function x(e,t,n,r){var i=h.getValue((t=t||{}).family,n),o=h.getValue(t.size,n),n=h.getValue(t.color,n);return{family:h.coerceString(e.family,i,r.family),size:h.coerceNumber(e.size,o,r.size),color:h.coerceColor(e.color,n,r.color)}}function _(e,t){return"waterfall"===t.type?t[e.dir].marker.color:e.mcc||e.mc||t.marker.color}t.exports={style:function(t){var e=a.select(t).selectAll("g.barlayer").selectAll("g.trace");o(t,e,"bar");var n=e.size(),r=t._fullLayout;e.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){("stack"===r.barmode&&1<n||0===r.bargap&&0===r.bargroupgap&&!e[0].trace.marker.line.width)&&a.select(this).attr("shape-rendering","crispEdges")}),e.selectAll("g.points").each(function(e){p(a.select(this),e[0].trace,t)}),u.getComponentMethod("errorbars","style")(e)},styleTextPoints:y,styleOnSelect:function(e,t,n){var r,i,o=t[0].trace;o.selectedpoints?(r=n,i=o,t=e,s.selectedPointStyle(r.selectAll("path"),i),function(e,r,i){e.each(function(e){var t,n=a.select(this);e.selected?(t=l.ensureUniformFontSize(i,g(n,e,r,i)),(e=r.selected.textfont&&r.selected.textfont.color)&&(t.color=e),s.font(n,t)):s.selectedTextStyle(n,r)})}(r.selectAll("text"),i,t)):(p(n,o,e),u.getComponentMethod("errorbars","style")(n))},getInsideTextFont:m,getOutsideTextFont:b,getBarColor:_,resizeText:o}},{"../../components/color":647,"../../components/drawing":669,"../../lib":779,"../../registry":879,"./attributes":889,"./helpers":893,"./uniform_text":902,"@plotly/d3":3}],901:[function(e,t,n){"use strict";var a=e("../../components/color"),s=e("../../components/colorscale/helpers").hasColorscale,l=e("../../components/colorscale/defaults"),u=e("../../lib").coercePattern;t.exports=function(e,t,n,r,i){var o=n("marker.color",r),r=s(e,"marker");r&&l(e,t,i,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",a.defaultLine),s(e,"marker.line")&&l(e,t,i,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),u(n,"marker.pattern",o,r),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":647,"../../components/colorscale/defaults":657,"../../components/colorscale/helpers":658,"../../lib":779}],902:[function(e,t,n){"use strict";var a=e("@plotly/d3"),s=e("../../lib");function o(e){return"_"+e+"Text_minsize"}t.exports={recordMinTextSize:function(e,t,n){var r,i;n.uniformtext.mode&&(r=o(e),i=n.uniformtext.minsize,e=t.scale*t.fontSize,t.hide=e<i,n[r]=n[r]||1/0,t.hide||(n[r]=Math.min(n[r],Math.max(e,i))))},clearMinTextSize:function(e,t){t[o(e)]=void 0},resizeText:function(e,t,n){var r=(e=e._fullLayout)["_"+n+"Text_minsize"];if(r){var i,o="hide"===e.uniformtext.mode;switch(n){case"funnelarea":case"pie":case"sunburst":i="g.slice";break;case"treemap":case"icicle":i="g.slice, g.pathbar";break;default:i="g.points > g.point"}t.selectAll(i).each(function(e){e=e.transform;e&&(e.scale=o&&e.hide?0:r/e.fontSize,a.select(this).select("text").attr("transform",s.getTextTransform(e)))})}}}},{"../../lib":779,"@plotly/d3":3}],903:[function(e,t,n){"use strict";var r=e("../bar/attributes"),i=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,o=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,s=e("../../plots/font_attributes"),l=e("./bin_attributes"),u=e("./constants"),e=e("../../lib/extend").extendFlat;t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:i("x"),yhoverformat:i("y"),text:e({},r.text,{}),hovertext:e({},r.hovertext,{}),orientation:r.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:l("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:l("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:o({},{keys:u.eventDataKeys}),texttemplate:a({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:e({},r.textposition,{arrayOk:!1}),textfont:s({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:s({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:s({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:r.insidetextanchor,textangle:r.textangle,cliponaxis:r.cliponaxis,constraintext:r.constraintext,marker:r.marker,offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:r.selected,unselected:r.unselected,_deprecated:{bardir:r._deprecated.bardir}}},{"../../lib/extend":772,"../../plots/cartesian/axis_format_attributes":831,"../../plots/font_attributes":859,"../../plots/template_attributes":878,"../bar/attributes":889,"./bin_attributes":905,"./constants":909}],904:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n=e.length,r=0,i=0;i<n;i++)t[i]?(e[i]/=t[i],r+=e[i]):e[i]=null;return r}},{}],905:[function(e,t,n){"use strict";t.exports=function(e,t){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],906:[function(e,t,n){"use strict";var o=e("fast-isnumeric");t.exports={count:function(e,t,n){return n[e]++,1},sum:function(e,t,n,r){t=r[t];return o(t)?(t=Number(t),n[e]+=t,t):0},avg:function(e,t,n,r,i){t=r[t];return o(t)&&(t=Number(t),n[e]+=t,i[e]++),0},min:function(e,t,n,r){r=r[t];if(o(r)){if(r=Number(r),!o(n[e]))return n[e]=r;if(n[e]>r){t=r-n[e];return n[e]=r,t}}return 0},max:function(e,t,n,r){r=r[t];if(o(r)){if(r=Number(r),!o(n[e]))return n[e]=r;if(n[e]<r){t=r-n[e];return n[e]=r,t}}return 0}}},{"fast-isnumeric":574}],907:[function(e,t,n){"use strict";var r=e("../../constants/numerical"),d=r.ONEAVGYEAR,i=r.ONEAVGMONTH,h=r.ONEDAY,o=r.ONEHOUR,a=r.ONEMIN,s=r.ONESEC,p=e("../../plots/cartesian/axes").tickIncrement;function y(e,t,n,r){if(e*t<=0)return 1/0;for(var i=Math.abs(t-e),o="date"===n.type,a=u(i,o),s=0;s<10;s++){var l=u(80*a,o);if(a===l)break;if(!function(e,t,n,r,i,o){if(r&&h<e){r=c(t,i,o),i=c(n,i,o),o=e===d?0:1;return r[o]!==i[o]}return.1<Math.floor(n/e)-Math.floor(t/e)}(l,e,t,o,n,r))break;a=l}return a}function u(e,t){return t&&s<e?h<e?1.1*d<e?d:1.1*i<e?i:h:o<e?o:a<e?a:s:Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function c(e,t,n){n=t.c2d(e,d,n).split("-");return""===n[0]&&(n.unshift(),n[0]="-"+n[0]),n}t.exports=function(i,e,t,o,a){var r,n=-1.1*e,s=-.1*e,l=i-s,e=t[0],t=t[1],l=Math.min(y(e+s,e+l,o,a),y(t+s,t+l,o,a)),s=Math.min(y(e+n,e+s,o,a),y(t+n,t+s,o,a)),u=s<l&&s<Math.abs(t-e)/4e3?(r=l,!1):(r=Math.min(l,s),!0);if("date"===o.type&&h<r){var c=r===d?1:6,f=r===d?"M12":"M1";return function(e,t){var n=o.c2d(e,d,a),r=n.indexOf("-",c);0<r&&(n=n.substr(0,r));r=o.d2c(n,0,a);return r<e&&((r+(n=p(r,f,!1,a)))/2<e+i&&(r=n)),t&&u?p(r,f,!0,a):r}}return function(e,t){var n=r*Math.round(e/r);return n+r/10<e&&n+.9*r<e+i&&(n+=r),t&&u&&(n-=r),n}}},{"../../constants/numerical":758,"../../plots/cartesian/axes":828}],908:[function(e,t,n){"use strict";var H=e("fast-isnumeric"),V=e("../../lib"),A=e("../../registry"),G=e("../../plots/cartesian/axes"),W=e("../bar/arrays_to_calcdata"),Y=e("./bin_functions"),X=e("./norm_functions"),Z=e("./average"),$=e("./bin_label_vals");function K(e,t,n,r,i){function o(e){return n.r2c(e,0,w)}function a(e){return n.c2r(e,0,w)}var s=r+"bins",l=e._fullLayout,u=t["_"+r+"bingroup"],c=l._histogramBinOpts[u],l="overlay"===l.barmode,f="date"===n.type?function(e){return e||0===e?V.cleanDate(e,null,w):null}:function(e){return H(e)?Number(e):null};function d(e,t,n){t[e+"Found"]?(t[e]=f(t[e]),null===t[e]&&(t[e]=n[e])):(j[e]=t[e]=n[e],V.nestedProperty(g[0],s+"."+e).set(n[e]))}if(t["_"+r+"autoBinFinished"])delete t["_"+r+"autoBinFinished"];else{for(var h,p,y,g=c.traces,v=[],m=!0,b=!1,x=!1,_=0;_<g.length;_++)(y=g[_]).visible&&(p=y["_"+(h=c.dirs[_])+"pos0"]=n.makeCalcdata(y,h),v=V.concat(v,p),delete y["_"+r+"autoBinFinished"],!0===t.visible&&(m?m=!1:(delete y._autoBin,y["_"+r+"autoBinFinished"]=1),A.traceIs(y,"2dMap")&&(b=!0),"histogram2dcontour"===y.type&&(x=!0)));var w=g[0][r+"calendar"],M=G.autoBin(v,n,c.nbins,b,w,c.sizeFound&&c.size),j=(g[0]._autoBin={})[c.dirs[0]]={};if(x&&(c.size||(M.start=a(G.tickIncrement(o(M.start),M.size,!0,w))),void 0===c.end&&(M.end=a(G.tickIncrement(o(M.end),M.size,!1,w)))),l&&!A.traceIs(t,"2dMap")&&0===M._dataSpan&&"category"!==n.type&&"multicategory"!==n.type){if(i)return[M,p,!0];M=function(e,t,n,r,i){var o,a,s,l=e._fullLayout,u=function(e,t){for(var n=t.xaxis,r=t.yaxis,i=t.orientation,o=[],a=e._fullData,s=0;s<a.length;s++){var l=a[s];"histogram"===l.type&&!0===l.visible&&l.orientation===i&&l.xaxis===n&&l.yaxis===r&&o.push(l)}return o}(e,t),c=!1,f=1/0,d=[t];for(o=0;o<u.length;o++){var h,p,y;(a=u[o])===t?c=!0:c?(h=K(e,a,n,r,!0),p=h[0],y=h[2],a["_"+r+"autoBinFinished"]=1,a["_"+r+"pos0"]=h[1],y?d.push(a):f=Math.min(f,p.size)):(s=l._histogramBinOpts[a["_"+r+"bingroup"]],f=Math.min(f,s.size||a[i].size))}var g=new Array(d.length);for(o=0;o<d.length;o++)for(var v=d[o]["_"+r+"pos0"],m=0;m<v.length;m++)if(void 0!==v[m]){g[o]=v[m];break}isFinite(f)||(f=V.distinctVals(g).minDiff);for(o=0;o<d.length;o++){var b=(a=d[o])[r+"calendar"],b={start:n.c2r(g[o]-f/2,0,b),end:n.c2r(g[o]+f/2,0,b),size:f};a._input[i]=a[i]=b,(s=l._histogramBinOpts[a["_"+r+"bingroup"]])&&V.extendFlat(s,b)}return t[i]}(e,t,n,r,s)}(k=y.cumulative||{}).enabled&&"include"!==k.currentbin&&("decreasing"===k.direction?M.start=a(G.tickIncrement(o(M.start),M.size,!0,w)):M.end=a(G.tickIncrement(o(M.end),M.size,!1,w))),c.size=M.size,c.sizeFound||(j.size=M.size,V.nestedProperty(g[0],s+".size").set(M.size)),d("start",c,M),d("end",c,M)}p=t["_"+r+"pos0"],delete t["_"+r+"pos0"];var l=t._input[s]||{},i=V.extendFlat({},c),e=c.start,k=n.r2l(l.start),M=void 0!==k;(c.startFound||M)&&k!==n.r2l(e)&&(k=M?k:V.aggNums(Math.min,null,p),O={type:"category"===n.type||"multicategory"===n.type?"linear":n.type,r2l:n.r2l,dtick:c.size,tick0:e,calendar:w,range:[k,G.tickIncrement(k,c.size,!1,w)].map(n.l2r)},(O=G.tickFirst(O))>n.r2l(k)&&(O=G.tickIncrement(O,c.size,!0,w)),i.start=n.l2r(O),M||V.nestedProperty(t,s+".start").set(i.start));var O=c.end,M=n.r2l(l.end),l=void 0!==M;(c.endFound||l)&&M!==n.r2l(O)&&(M=l?M:V.aggNums(Math.max,null,p),i.end=n.l2r(M),l||V.nestedProperty(t,s+".start").set(i.end));l="autobin"+r;return!1===t._input[l]&&(t._input[s]=V.extendFlat({},t[s]||{}),delete t._input[l],delete t[l]),[i,p]}t.exports={calc:function(r,e){var t,n,i=[],o=[],a="h"===e.orientation,s=G.getFromId(r,a?e.yaxis:e.xaxis),l={x:"y",y:"x"}[T=a?"y":"x"],u=e[T+"calendar"],c=e.cumulative,f=(x=K(r,e,s,T))[0],d=x[1],h="string"==typeof f.size,p=[],y=h?p:f,g=[],v=[],m=[],b=0,a=e.histnorm,x=e.histfunc,_=-1!==a.indexOf("density");function w(e){return s.r2c(e,0,u)}c.enabled&&_&&(a=a.replace(/ ?density$/,""),_=!1);var M,j="max"===x||"min"===x?null:0,k=Y.count,a=X[a],O=!1;for(V.isArrayOrTypedArray(e[l])&&"count"!==x&&(M=e[l],O="avg"===x,k=Y[x]),I=w(f.start),n=w(f.end)+(I-G.tickIncrement(I,f.size,!1,u))/1e6;I<n&&i.length<1e6&&(t=G.tickIncrement(I,f.size,!1,u),i.push((I+t)/2),o.push(j),m.push([]),p.push(I),_&&g.push(1/(t-I)),O&&v.push(0),!(t<=I));)I=t;p.push(I),h||"date"!==s.type||(y={start:w(y.start),end:w(y.end),size:y.size}),r._fullLayout._roundFnOpts||(r._fullLayout._roundFnOpts={});var A=e["_"+T+"bingroup"],T={leftGap:1/0,rightGap:1/0};A&&(r._fullLayout._roundFnOpts[A]||(r._fullLayout._roundFnOpts[A]=T),T=r._fullLayout._roundFnOpts[A]);for(var P,S=o.length,E=!0,C=T.leftGap,L=T.rightGap,R={},I=0;I<d.length;I++){var z,D=d[I];0<=(z=V.findBin(D,y))&&z<S&&(b+=k(z,I,o,M,v),E&&m[z].length&&D!==d[m[z][0]]&&(E=!1),m[z].push(I),R[I]=z,C=Math.min(C,D-p[z]),L=Math.min(L,p[z+1]-D))}T.leftGap=C,T.rightGap=L,E||(P=function(t,n){return function(){var e=r._fullLayout._roundFnOpts[A];return $(e.leftGap,e.rightGap,p,s,u)(t,n)}}),O&&(b=Z(o,v)),a&&a(o,b,g),c.enabled&&function(t,e,n){var r,i,o;function a(e){o=t[e],t[e]/=2}function s(e){i=t[e],t[e]=o+i/2,o+=i}if("half"===n)if("increasing"===e)for(a(0),r=1;r<t.length;r++)s(r);else for(a(t.length-1),r=t.length-2;0<=r;r--)s(r);else if("increasing"===e){for(r=1;r<t.length;r++)t[r]+=t[r-1];"exclude"===n&&(t.unshift(0),t.pop())}else{for(r=t.length-2;0<=r;r--)t[r]+=t[r+1];"exclude"===n&&(t.push(0),t.shift())}}(o,c.direction,c.currentbin);var N,F=Math.min(i.length,o.length),B=[],U=0,q=F-1;for(I=0;I<F;I++)if(o[I]){U=I;break}for(I=F-1;U<=I;I--)if(o[I]){q=I;break}for(I=U;I<=q;I++)H(i[I])&&H(o[I])&&(N={p:i[I],s:o[I],b:0},c.enabled||(N.pts=m[I],E?N.ph0=N.ph1=m[I].length?d[m[I][0]]:i[I]:(e._computePh=!0,N.ph0=P(p[I]),N.ph1=P(p[I+1],!0))),B.push(N));return 1===B.length&&(B[0].width1=G.tickIncrement(B[0].p,f.size,!1,u)-B[0].p),W(B,e),V.isArrayOrTypedArray(e.selectedpoints)&&V.tagSelected(B,e,R),B},calcAllAutoBins:K}},{"../../lib":779,"../../plots/cartesian/axes":828,"../../registry":879,"../bar/arrays_to_calcdata":888,"./average":904,"./bin_functions":906,"./bin_label_vals":907,"./norm_functions":915,"fast-isnumeric":574}],909:[function(e,t,n){"use strict";t.exports={eventDataKeys:["binNumber"]}},{}],910:[function(e,t,n){"use strict";var A=e("../../lib"),T=e("../../plots/cartesian/axis_ids"),P=e("../../registry").traceIs,S=e("../bar/defaults").handleGroupingDefaults,E=A.nestedProperty,C=e("../../plots/cartesian/constraints").getAxisGroup,L=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],R=["x","y"];t.exports=function(e,l){var t,u=l._histogramBinOpts={},n=[],r={},i=[];function o(e,t){return A.coerce(p._input,p,p._module.attributes,e,t)}function a(e){return"v"===e.orientation?"x":"y"}function s(e,t,n){var r=e.uid+"__"+n;t=t||r;var i=T.getFromTrace({_fullLayout:l},e,n).type,o=e[n+"calendar"]||"",a=u[t],s=!0;a&&(i===a.axType&&o===a.calendar?(s=!1,a.traces.push(e),a.dirs.push(n)):(t=r,i!==a.axType&&A.warn(["Attempted to group the bins of trace",e.index,"set on a","type:"+i,"axis","with bins on","type:"+a.axType,"axis."].join(" ")),o!==a.calendar&&A.warn(["Attempted to group the bins of trace",e.index,"set with a",o,"calendar","with bins",a.calendar?"on a "+a.calendar+" calendar":"w/o a set calendar"].join(" ")))),s&&(u[t]={traces:[e],dirs:[n],axType:i,calendar:e[n+"calendar"]||""}),e["_"+n+"bingroup"]=t}for(f=0;f<e.length;f++)p=e[f],P(p,"histogram")&&(n.push(p),delete p._xautoBinFinished,delete p._yautoBinFinished,P(p,"2dMap")||S(p._input,p,l,o));for(var c=l._alignmentOpts||{},f=0;f<n.length;f++){var d,h,p=n[f],y="";P(p,"2dMap")||(h=a(p),"group"===l.barmode&&p.alignmentgroup&&(d=p[h+"axis"],(c[d=C(l,d)+p.orientation]||{})[p.alignmentgroup]&&(y=d)),y||"overlay"===l.barmode||(y=C(l,p.xaxis)+C(l,p.yaxis)+a(p))),y?(r[y]||(r[y]=[]),r[y].push(p)):i.push(p)}for(y in r)if(1!==(_=r[y]).length){var g=!1;for(_.length&&(p=_[0],g=o("bingroup")),y=g||y,f=0;f<_.length;f++){var v=(p=_[f])._input.bingroup;v&&v!==y&&A.warn(["Trace",p.index,"must match","within bingroup",y+".","Ignoring its bingroup:",v,"setting."].join(" ")),p.bingroup=y,s(p,y,a(p))}}else i.push(_[0]);for(f=0;f<i.length;f++){p=i[f];var m=o("bingroup");if(P(p,"2dMap"))for(t=0;t<2;t++){var b=o((h=R[t])+"bingroup",m?m+"__"+h:null);s(p,b,h)}else s(p,m,a(p))}for(y in u)for(var x=u[y],_=x.traces,w=0;w<L.length;w++){var M,j,k=L[w],O=k.name;if("nbins"!==O||!x.sizeFound){for(f=0;f<_.length;f++){if(p=_[f],h=x.dirs[f],M=k.aStr[h],void 0!==E(p._input,M).get()){x[O]=o(M),x[O+"Found"]=!0;break}(j=(p._autoBin||{})[h]||{})[O]&&E(p,M).set(j[O])}if("start"===O||"end"===O)for(;f<_.length;f++)(p=_[f])["_"+h+"bingroup"]&&o(M,(j=(p._autoBin||{})[h]||{})[O]);"nbins"!==O||x.sizeFound||x.nbinsFound||(p=_[0],x[O]=o(M))}}}},{"../../lib":779,"../../plots/cartesian/axis_ids":832,"../../plots/cartesian/constraints":836,"../../registry":879,"../bar/defaults":892}],911:[function(e,t,n){"use strict";var u=e("../../registry"),c=e("../../lib"),f=e("../../components/color"),d=e("../bar/defaults").handleText,h=e("../bar/style_defaults"),p=e("./attributes");t.exports=function(n,r,e,t){function i(e,t){return c.coerce(n,r,p,e,t)}var o=i("x"),a=i("y");i("cumulative.enabled")&&(i("cumulative.direction"),i("cumulative.currentbin")),i("text");var s=i("textposition");d(n,r,t,i,s,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat");var l=i("orientation",a&&!o?"h":"v"),s="v"===l?"x":"y",l="v"===l?"y":"x",a=o&&a?Math.min(c.minRowLength(o)&&c.minRowLength(a)):c.minRowLength(r[s]||[]);a?(r._length=a,u.getComponentMethod("calendars","handleTraceDefaults")(n,r,["x","y"],t),r[l]&&i("histfunc"),i("histnorm"),i("autobin"+s),h(n,r,i,e,t),c.coerceSelectionMarkerOpacity(r,i),e=(r.marker.line||{}).color,(t=u.getComponentMethod("errorbars","supplyDefaults"))(n,r,e||f.defaultLine,{axis:"y"}),t(n,r,e||f.defaultLine,{axis:"x",inherit:"y"})):r.visible=!1}},{"../../components/color":647,"../../lib":779,"../../registry":879,"../bar/defaults":892,"../bar/style_defaults":901,"./attributes":903}],912:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i){if(e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,"zLabelVal"in t&&(e.z=t.zLabelVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),!(n.cumulative||{}).enabled){var o=Array.isArray(i)?r[0].pts[i[0]][i[1]]:r[i].pts;if(e.pointNumbers=o,e.binNumber=e.pointNumber,delete e.pointNumber,delete e.pointIndex,n._indexToPoints)for(var a=[],s=0;s<o.length;s++)a=a.concat(n._indexToPoints[o[s]]);else a=o;e.pointIndices=a}return e}},{}],913:[function(e,t,n){"use strict";var o=e("../bar/hover").hoverPoints,a=e("../../plots/cartesian/axes").hoverLabelText;t.exports=function(e,t,n,r,i){t=o(e,t,n,r,i);if(t){n=(e=t[0]).cd[e.index],r=e.cd[0].trace;return r.cumulative.enabled||(e[(i="h"===r.orientation?"y":"x")+"Label"]=a(e[i+"a"],[n.ph0,n.ph1],r[i+"hoverformat"])),t}}},{"../../plots/cartesian/axes":828,"../bar/hover":894}],914:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("../bar/layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),supplyLayoutDefaults:e("../bar/layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("../bar/cross_trace_calc").crossTraceCalc,plot:e("../bar/plot").plot,layerName:"barlayer",style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,colorbar:e("../scatter/marker_colorbar"),hoverPoints:e("./hover"),selectPoints:e("../bar/select"),eventData:e("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":842,"../bar/cross_trace_calc":891,"../bar/layout_attributes":895,"../bar/layout_defaults":896,"../bar/plot":897,"../bar/select":898,"../bar/style":900,"../scatter/marker_colorbar":949,"./attributes":903,"./calc":908,"./cross_trace_defaults":910,"./defaults":911,"./event_data":912,"./hover":913}],915:[function(e,t,n){"use strict";t.exports={percent:function(e,t){for(var n=e.length,r=100/t,i=0;i<n;i++)e[i]*=r},probability:function(e,t){for(var n=e.length,r=0;r<n;r++)e[r]/=t},density:function(e,t,n,r){var i=e.length;r=r||1;for(var o=0;o<i;o++)e[o]*=n[o]*r},"probability density":function(e,t,n,r){var i=e.length;r&&(t/=r);for(var o=0;o<i;o++)e[o]*=n[o]/t}}},{}],916:[function(e,t,n){"use strict";var r=e("../../components/colorscale/attributes"),i=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,o=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../mesh3d/attributes"),s=e("../../plots/attributes"),l=e("../../lib/extend").extendFlat,e=e("../../plot_api/edit_types").overrideAll;function u(){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function c(){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}s=t.exports=e(l({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:u(),y:u(),z:u()},caps:{x:c(),y:c(),z:c()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:o(),xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z"),valuehoverformat:i("value",1),showlegend:l({},s.showlegend,{dflt:!1})},r("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:a.opacity,lightposition:a.lightposition,lighting:a.lighting,flatshading:a.flatshading,contour:a.contour,hoverinfo:l({},s.hoverinfo)}),"calc","nested");s.flatshading.dflt=!0,s.lighting.facenormalsepsilon.dflt=0,s.x.editType=s.y.editType=s.z.editType=s.value.editType="calc+clearAxisTypes",s.transforms=void 0},{"../../components/colorscale/attributes":654,"../../lib/extend":772,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/cartesian/axis_format_attributes":831,"../../plots/template_attributes":878,"../mesh3d/attributes":921}],917:[function(e,t,n){"use strict";var s=e("../../components/colorscale/calc"),l=e("../streamtube/calc").processGrid,u=e("../streamtube/calc").filter;t.exports=function(e,t){t._len=Math.min(t.x.length,t.y.length,t.z.length,t.value.length),t._x=u(t.x,t._len),t._y=u(t.y,t._len),t._z=u(t.z,t._len),t._value=u(t.value,t._len);var n=l(t);t._gridFill=n.fill,t._Xs=n.Xs,t._Ys=n.Ys,t._Zs=n.Zs,t._len=n.len;for(var r=1/0,i=-1/0,o=0;o<t._len;o++)var a=t._value[o],r=Math.min(r,a),i=Math.max(i,a);t._minValues=r,t._maxValues=i,t._vMin=void 0===t.isomin||null===t.isomin?r:t.isomin,t._vMax=void 0===t.isomax||null===t.isomin?i:t.isomax,s(e,t,{vals:[t._vMin,t._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":655,"../streamtube/calc":959}],918:[function(e,t,n){"use strict";function J(e,t){for(var n=t.length-1;0<n;n--){var r=Math.min(t[n],t[n-1]),i=Math.max(t[n],t[n-1]);if(r<i&&r<e&&e<=i)return{id:n,distRatio:(i-e)/(i-r)}}return{id:0,distRatio:0}}var i=e("../../../stackgl_modules").gl_mesh3d,o=e("../../lib/gl_format_color").parseColorScale,a=e("../../lib/str2rgbarray"),s=e("../../components/colorscale").extractOpts,l=e("../../plots/gl3d/zip3");function u(e,t,n){this.scene=e,this.uid=n,this.mesh=t,this.name="",this.data=null,this.showContour=!1}e=u.prototype;e.handlePick=function(e){if(e.object===this.mesh){var t=e.data.index,n=this.data._meshX[t],r=this.data._meshY[t],i=this.data._meshZ[t],o=this.data._Ys.length,t=this.data._Zs.length,n=J(n,this.data._Xs).id,r=J(r,this.data._Ys).id,i=J(i,this.data._Zs).id,o=e.index=i+t*r+t*o*n;e.traceCoordinate=[this.data._meshX[o],this.data._meshY[o],this.data._meshZ[o],this.data._value[o]];n=this.data.hovertext||this.data.text;return Array.isArray(n)&&void 0!==n[o]?e.textLabel=n[o]:n&&(e.textLabel=n),!0}},e.update=function(e){var t=this.scene,n=t.fullSceneLayout;function r(t,e,n,r){return e.map(function(e){return t.d2l(e,0,r)*n})}this.data=c(e);n={positions:l(r(n.xaxis,e._meshX,t.dataScale[0],e.xcalendar),r(n.yaxis,e._meshY,t.dataScale[1],e.ycalendar),r(n.zaxis,e._meshZ,t.dataScale[2],e.zcalendar)),cells:l(e._meshI,e._meshJ,e._meshK),lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,contourEnable:e.contour.show,contourColor:a(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading},t=s(e);n.vertexIntensity=e._meshIntensity,n.vertexIntensityBounds=[t.min,t.max],n.colormap=o(e),this.mesh.update(n)},e.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var ee=["xyz","xzy","yxz","yzx","zxy","zyx"];function c(v){v._meshI=[],v._meshJ=[],v._meshK=[];var i,m,b,x,_,w,M,o=v.surface.show,a=v.spaceframe.show,s=v.surface.fill,l=v.spaceframe.fill,j=!1,y=!1,k=0,g=v._Xs,O=v._Ys,A=v._Zs,T=g.length,P=O.length,S=A.length,r=ee.indexOf(v._gridFill.replace(/-/g,"").replace(/\+/g,"")),E=function(e,t,n){switch(r){case 5:return n+S*t+S*P*e;case 4:return n+S*e+S*T*t;case 3:return t+P*n+P*S*e;case 2:return t+P*e+P*T*n;case 1:return e+T*n+T*S*t;default:return e+T*t+T*P*n}},u=v._minValues,c=v._maxValues,C=v._vMin,L=v._vMax;function R(){m=i}function f(){b=[],x=[],_=[],w=[],i=0,R()}function I(e,t,n,r){return b.push(e),x.push(t),_.push(n),w.push(r),++i-1}function z(e,t,n){for(var r=[],i=0;i<e.length;i++)r[i]=e[i]*(1-n)+n*t[i];return r}function D(e){M=e}function N(e,t){var n=e[0],r=e[1],i=e[2],o=function(e,t,n){for(var r=[],i=0;i<e.length;i++)r[i]=(e[i]+t[i]+n[i])/3;return r}(n,r,i),a=Math.sqrt(1-M),s=z(o,n,a),l=z(o,r,a),e=z(o,i,a),o=t[0],a=t[1],t=t[2];return{xyzv:[[n,r,l],[l,s,n],[r,i,e],[e,l,r],[i,n,s],[s,e,i]],abc:[[o,a,-1],[-1,-1,o],[a,t,-1],[-1,-1,a],[t,o,-1],[-1,-1,t]]}}function d(e,t){return"all"===e||null===e||-1<e.indexOf(t)}function p(e,t,n){R();var r,i=[t],o=[n];1<=M?(i=[t],o=[n]):0<M&&(i=(r=N(t,n)).xyzv,o=r.abc);for(var a,s,l,u=0;u<i.length;u++){t=i[u],n=o[u];for(var c=[],f=0;f<3;f++){var d=t[f][0],h=t[f][1],p=t[f][2],y=t[f][3],g=-1<n[f]?n[f]:function(e,t,n){for(var r=w.length,i=m;i<r;i++)if(e===b[i]&&t===x[i]&&n===_[i])return i;return-1}(d,h,p);c[f]=-1<g?g:I(d,h,p,(p=y,null===(y=e)?p:y))}a=c[0],s=c[1],l=c[2],v._meshI.push(a),v._meshJ.push(s),v._meshK.push(l),++k}}function F(r,i,o){function e(e,t,n){p(r,[i[e],i[t],i[n]],[o[e],o[t],o[n]])}e(0,1,2),e(2,3,0)}function t(r,i,o){function e(e,t,n){p(r,[i[e],i[t],i[n]],[o[e],o[t],o[n]])}e(0,1,2),e(3,0,1),e(2,3,0),e(1,2,3)}function B(e,t,n,r){for(var i=e[3],o=(e[3]-(i=r<(i=i<n?n:i)?r:i))/(e[3]-t[3]+1e-9),a=[],s=0;s<4;s++)a[s]=(1-o)*e[s]+o*t[s];return a}function n(e,t,n){return t<=e&&e<=n}function U(e){var t=.001*(L-C);return C-t<=e&&e<=L+t}function q(e){for(var t=[],n=0;n<4;n++){var r=e[n];t.push([v._x[r],v._y[r],v._z[r],v._value[r]])}return t}function H(o,a,s,l,u,r){r=r||1;var c=!(s=[-1,-1,-1]),f=[n(a[0][3],l,u),n(a[1][3],l,u),n(a[2][3],l,u)];if(!f[0]&&!f[1]&&!f[2])return!1;function d(e,t,n){return U(t[0][3])&&U(t[1][3])&&U(t[2][3])?(p(e,t,n),!0):r<3&&H(e,t,0,C,L,++r)}if(f[0]&&f[1]&&f[2])return d(o,a,s)||c;var h=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(e){var t,n,r,i;f[e[0]]&&f[e[1]]&&!f[e[2]]&&(t=a[e[0]],n=a[e[1]],r=B(i=a[e[2]],t,l,u),i=B(i,n,l,u),c=d(o,[i,r,t],[-1,-1,s[e[0]]])||c,c=d(o,[t,n,i],[s[e[0]],s[e[1]],-1])||c,h=!0)}),h||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(e){var t,n,r;!f[e[0]]||f[e[1]]||f[e[2]]||(t=a[e[0]],n=a[e[1]],r=a[e[2]],n=B(n,t,l,u),r=B(r,t,l,u),c=d(o,[r,n,t],[-1,-1,s[e[0]]])||c,h=!0)}),c}function h(s,l,u,c){var e=!1,f=q(l),d=[n(f[0][3],u,c),n(f[1][3],u,c),n(f[2][3],u,c),n(f[3][3],u,c)];if(!(d[0]||d[1]||d[2]||d[3]))return e;if(d[0]&&d[1]&&d[2]&&d[3])return y&&t(s,f,l),e;var h=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(e){var t,n,r,i;d[e[0]]&&d[e[1]]&&d[e[2]]&&!d[e[3]]&&(t=f[e[0]],n=f[e[1]],r=f[e[2]],i=f[e[3]],y?p(s,[t,n,r],[l[e[0]],l[e[1]],l[e[2]]]):p(null,[B(i,t,u,c),B(i,n,u,c),B(i,r,u,c)],[-1,-1,-1]),h=!0)}),h?e:([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(e){var t,n,r,i,o,a;d[e[0]]&&d[e[1]]&&!d[e[2]]&&!d[e[3]]&&(t=f[e[0]],n=f[e[1]],o=f[e[2]],a=f[e[3]],r=B(o,t,u,c),i=B(o,n,u,c),o=B(a,n,u,c),a=B(a,t,u,c),y?(p(s,[t,a,r],[l[e[0]],-1,-1]),p(s,[n,i,o],[l[e[1]],-1,-1])):F(null,[r,i,o,a],[-1,-1,-1,-1]),h=!0)}),h||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(e){var t,n,r,i;!d[e[0]]||d[e[1]]||d[e[2]]||d[e[3]]||(t=f[e[0]],n=f[e[1]],r=f[e[2]],i=f[e[3]],n=B(n,t,u,c),r=B(r,t,u,c),i=B(i,t,u,c),y?(p(s,[t,n,r],[l[e[0]],-1,-1]),p(s,[t,r,i],[l[e[0]],-1,-1]),p(s,[t,i,n],[l[e[0]],-1,-1])):p(null,[n,r,i],[-1,-1,-1]),h=!0)}),e)}function V(e,t,n,r,i,o,a,s,l,u,c){var f=!1;return j&&(d(e,"A")&&(f=h(null,[t,n,r,o],u,c)||f),d(e,"B")&&(f=h(null,[n,r,i,l],u,c)||f),d(e,"C")&&(f=h(null,[n,o,a,l],u,c)||f),d(e,"D")&&(f=h(null,[r,o,s,l],u,c)||f),d(e,"E")&&(f=h(null,[n,r,o,l],u,c)||f)),f=y?h(e,[n,r,o,l],u,c)||f:f}function G(e,t,n,r,i,o,a,s){return[!0===s[0]||H(e,q([t,n,r]),0,o,a),!0===s[1]||H(e,q([r,i,t]),0,o,a)]}function W(e,t,n,r,i,o,a,s,l){return s?G(e,t,n,i,r,o,a,l):G(e,n,i,r,t,o,a,l)}function Y(e,t,n,r,i,o,a){function s(){d=H(e,[l,u,c],0,i,o)||d,d=H(e,[c,f,l],0,i,o)||d}var l,u,c,f,d=!1,h=a[0],p=a[1],a=a[2];return h&&(l=z(q([E(t,+n,+r)])[0],q([E(t-1,+n,+r)])[0],h),u=z(q([E(t,+n,r-1)])[0],q([E(t-1,+n,r-1)])[0],h),c=z(q([E(t,n-1,r-1)])[0],q([E(t-1,n-1,r-1)])[0],h),f=z(q([E(t,n-1,+r)])[0],q([E(t-1,n-1,+r)])[0],h),s()),p&&(l=z(q([E(+t,n,+r)])[0],q([E(+t,n-1,+r)])[0],p),u=z(q([E(+t,n,r-1)])[0],q([E(+t,n-1,r-1)])[0],p),c=z(q([E(t-1,n,r-1)])[0],q([E(t-1,n-1,r-1)])[0],p),f=z(q([E(t-1,n,+r)])[0],q([E(t-1,n-1,+r)])[0],p),s()),a&&(l=z(q([E(+t,+n,r)])[0],q([E(+t,+n,r-1)])[0],a),u=z(q([E(+t,n-1,r)])[0],q([E(+t,n-1,r-1)])[0],a),c=z(q([E(t-1,n-1,r)])[0],q([E(t-1,n-1,r-1)])[0],a),f=z(q([E(t-1,+n,r)])[0],q([E(t-1,+n,r-1)])[0],a),s()),d}function X(e,t,n,r,i){for(var o=[],a=0,s=0;s<t.length;s++)for(var l=t[s],u=1;u<S;u++)for(var c=1;c<P;c++)o.push(W(e,E(l,c-1,u-1),E(l,c-1,u),E(l,c,u-1),E(l,c,u),n,r,(l+c+u)%2,i&&i[a]?i[a]:[])),a++;return o}function Z(e,t,n,r,i){for(var o=[],a=0,s=0;s<t.length;s++)for(var l=t[s],u=1;u<T;u++)for(var c=1;c<S;c++)o.push(W(e,E(u-1,l,c-1),E(u,l,c-1),E(u-1,l,c),E(u,l,c),n,r,(u+l+c)%2,i&&i[a]?i[a]:[])),a++;return o}function $(e,t,n,r,i){for(var o=[],a=0,s=0;s<t.length;s++)for(var l=t[s],u=1;u<P;u++)for(var c=1;c<T;c++)o.push(W(e,E(c-1,u-1,l),E(c-1,u,l),E(c,u-1,l),E(c,u,l),n,r,(c+u+l)%2,i&&i[a]?i[a]:[])),a++;return o}function K(e,t,n){for(var r,i,o,a,s,l,u,c,f,d,h,p,y=1;y<S;y++)for(var g=1;g<P;g++)for(var v=1;v<T;v++)r=e,i=E(v-1,g-1,y-1),o=E(v-1,g-1,y),a=E(v-1,g,y-1),s=E(v-1,g,y),l=E(v,g-1,y-1),u=E(v,g-1,y),c=E(v,g,y-1),f=E(v,g,y),d=t,h=n,p=void 0,p=r,(v+g+y)%2?V(p=j&&"even"===r?null:r,i,o,a,s,l,u,c,f,d,h):V(p=j&&"odd"===r?null:p,f,c,u,l,s,a,o,i,d,h)}function Q(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n}return function(){f(),function(){for(var e=0;e<T;e++)for(var t=0;t<P;t++)for(var n=0;n<S;n++){var r=E(e,t,n);I(v._x[r],v._y[r],v._z[r],v._value[r])}}();var h=null;if(a&&l&&(D(l),y=!0,K(h,C,L),y=!1),o&&s){D(s);for(var e=v.surface.pattern,t=v.surface.count,n=0;n<t;n++){var r=1===t?.5:n/(t-1),i=(1-r)*C+r*L,r=Math.abs(i-u),i=Math.abs(i-c)<r?[u,i]:[i,c];j=!0,K(e,i[0],i[1]),j=!1}}var p=[[Math.min(C,c),Math.max(C,c)],[Math.min(u,L),Math.max(u,L)]];["x","y","z"].forEach(function(e){for(var t=[],n=0;n<p.length;n++){var r=0,i=p[n][0],o=p[n][1],a=v.slices[e];if(a.show&&a.fill){D(a.fill);var s=[],l=[],u=[];if(a.locations.length)for(var c=0;c<a.locations.length;c++){var f=J(a.locations[c],"x"===e?g:"y"===e?O:A);0===f.distRatio?s.push(f.id):0<f.id&&(l.push(f.id),"x"===e?u.push([f.distRatio,0,0]):"y"===e?u.push([0,f.distRatio,0]):u.push([0,0,f.distRatio]))}else s=Q(1,"x"===e?T-1:"y"===e?P-1:S-1);0<l.length&&(t[r]=("x"===e?function(e,t,n,r,i,o){for(var a=[],s=0,l=0;l<t.length;l++)for(var u=t[l],c=1;c<S;c++)for(var f=1;f<P;f++)a.push(Y(e,u,f,c,n,r,i[l],o&&o[s]&&o[s])),s++;return a}:"y"===e?function(e,t,n,r,i,o){for(var a=[],s=0,l=0;l<t.length;l++)for(var u=t[l],c=1;c<T;c++)for(var f=1;f<S;f++)a.push(Y(e,c,u,f,n,r,i[l],o&&o[s]&&o[s])),s++;return a}:function(e,t,n,r,i,o){for(var a=[],s=0,l=0;l<t.length;l++)for(var u=t[l],c=1;c<P;c++)for(var f=1;f<T;f++)a.push(Y(e,f,c,u,n,r,i[l],o&&o[s]&&o[s])),s++;return a})(h,l,i,o,u,t[r]),r++),0<s.length&&(t[r]=("x"===e?X:"y"===e?Z:$)(h,s,i,o,t[r]),r++)}var d=v.caps[e];d.show&&d.fill&&(D(d.fill),t[r]="x"===e?X(h,[0,T-1],i,o,t[r]):"y"===e?Z(h,[0,P-1],i,o,t[r]):$(h,[0,S-1],i,o,t[r]),r++)}}),0===k&&f(),v._meshX=b,v._meshY=x,v._meshZ=_,v._meshIntensity=w,v._Xs=g,v._Ys=O,v._Zs=A}(),v}t.exports={findNearestOnAxis:J,generateIsoMeshes:c,createIsosurfaceTrace:function(e,t){var n=e.glplot.gl,r=i({gl:n}),n=new u(e,r,t.uid);return(r._trace=n).update(t),e.glplot.add(r),n}}},{"../../../stackgl_modules":962,"../../components/colorscale":659,"../../lib/gl_format_color":776,"../../lib/str2rgbarray":803,"../../plots/gl3d/zip3":873}],919:[function(e,t,n){"use strict";var i=e("../../lib"),u=e("../../registry"),o=e("./attributes"),c=e("../../components/colorscale/defaults");function a(e,t,n,r,i){var o=i("isomin"),a=i("isomax");null!=a&&null!=o&&a<o&&(t.isomin=null,t.isomax=null);var s=i("x"),l=i("y"),a=i("z"),o=i("value");s&&s.length&&l&&l.length&&a&&a.length&&o&&o.length?(u.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y","z"],r),i("valuehoverformat"),["x","y","z"].forEach(function(e){i(e+"hoverformat");var t="caps."+e;i(t+".show")&&i(t+".fill");e="slices."+e;i(e+".show")&&(i(e+".fill"),i(e+".locations"))}),i("spaceframe.show")&&i("spaceframe.fill"),i("surface.show")&&(i("surface.count"),i("surface.fill"),i("surface.pattern")),i("contour.show")&&(i("contour.color"),i("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(e){i(e)}),c(e,t,r,i,{prefix:"",cLetter:"c"}),t._length=null):t.visible=!1}t.exports={supplyDefaults:function(n,r,e,t){a(n,r,0,t,function(e,t){return i.coerce(n,r,o,e,t)})},supplyIsoDefaults:a}},{"../../components/colorscale/defaults":657,"../../lib":779,"../../registry":879,"./attributes":916}],920:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,calc:e("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":862,"./attributes":916,"./calc":917,"./convert":918,"./defaults":919}],921:[function(e,t,n){"use strict";var r=e("../../components/colorscale/attributes"),i=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,o=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../surface/attributes"),s=e("../../plots/attributes"),e=e("../../lib/extend").extendFlat;t.exports=e({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:o({editType:"calc"}),xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},r("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:a.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:e({},a.contours.x.show,{}),color:a.contours.x.color,width:a.contours.x.width,editType:"calc"},lightposition:{x:e({},a.lightposition.x,{dflt:1e5}),y:e({},a.lightposition.y,{dflt:1e5}),z:e({},a.lightposition.z,{dflt:0}),editType:"calc"},lighting:e({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},a.lighting),hoverinfo:e({},s.hoverinfo,{editType:"calc"}),showlegend:e({},s.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":654,"../../lib/extend":772,"../../plots/attributes":824,"../../plots/cartesian/axis_format_attributes":831,"../../plots/template_attributes":878,"../surface/attributes":960}],922:[function(e,t,n){"use strict";var r=e("../../lib");function i(e){return-1!==e.indexOf("e")?e.replace(/[.]?0+e/,"e"):-1!==e.indexOf(".")?e.replace(/[.]?0+$/,""):e}n.formatPiePercent=function(e,t){e=i((100*e).toPrecision(3));return r.numSeparate(e,t)+"%"},n.formatPieValue=function(e,t){e=i(e.toPrecision(10));return r.numSeparate(e,t)},n.getFirstFilled=function(e,t){if(Array.isArray(e))for(var n=0;n<t.length;n++){var r=e[t[n]];if(r||0===r||""===r)return r}},n.castOption=function(e,t){return Array.isArray(e)?n.getFirstFilled(e,t):e||void 0},n.getRotationAngle=function(e){return("auto"===e?0:e)*Math.PI/180}},{"../../lib":779}],923:[function(e,t,n){"use strict";var i=e("../../components/color"),o=e("./helpers").castOption;t.exports=function(e,t,n){var r=n.marker.line,n=o(r.color,t.pts)||i.defaultLine,r=o(r.width,t.pts)||0;e.style("stroke-width",r).call(i.fill,t.color).call(i.stroke,n)}},{"../../components/color":647,"./helpers":922}],924:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),i=e("../../components/colorscale/attributes"),o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../../plots/template_attributes").texttemplateAttrs,l=e("../../plots/attributes"),u=e("../../constants/gl3d_dashes"),c=e("../../constants/gl3d_markers"),f=e("../../lib/extend").extendFlat,d=e("../../plot_api/edit_types").overrideAll,h=e("../../lib/sort_object_keys"),p=r.line,y=r.marker,e=y.line,u=f({width:p.width,dash:{valType:"enumerated",values:h(u),dflt:"solid"}},i("line"));function g(){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}l=t.exports=d({x:r.x,y:r.y,z:{valType:"data_array"},text:f({},r.text,{}),texttemplate:s({},{}),hovertext:f({},r.hovertext,{}),hovertemplate:a(),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),mode:f({},r.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:g(),y:g(),z:g()},connectgaps:r.connectgaps,line:u,marker:f({symbol:{valType:"enumerated",values:h(c),dflt:"circle",arrayOk:!0},size:f({},y.size,{dflt:8}),sizeref:y.sizeref,sizemin:y.sizemin,sizemode:y.sizemode,opacity:f({},y.opacity,{arrayOk:!1}),colorbar:y.colorbar,line:f({width:f({},e.width,{arrayOk:!1})},i("marker.line"))},i("marker")),textposition:f({},r.textposition,{dflt:"top center"}),textfont:{color:r.textfont.color,size:r.textfont.size,family:f({},r.textfont.family,{arrayOk:!1})},opacity:l.opacity,hoverinfo:f({},l.hoverinfo)},"calc","nested");l.x.editType=l.y.editType=l.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":654,"../../constants/gl3d_dashes":755,"../../constants/gl3d_markers":756,"../../lib/extend":772,"../../lib/sort_object_keys":801,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/cartesian/axis_format_attributes":831,"../../plots/template_attributes":878,"../scatter/attributes":931}],925:[function(e,t,n){"use strict";var r=e("../scatter/arrays_to_calcdata"),i=e("../scatter/colorscale_calc");t.exports=function(e,t){var n=[{x:!1,y:!1,trace:t,t:{}}];return r(n,t),i(e,t),n}},{"../scatter/arrays_to_calcdata":930,"../scatter/colorscale_calc":934}],926:[function(e,t,n){"use strict";var f=e("../../registry");function c(e,t,n,r){if(!t||!t.visible)return null;for(var i=f.getComponentMethod("errorbars","makeComputeError")(t),o=new Array(e.length),a=0;a<e.length;a++){var s,l,u,c=i(+e[a],a);"log"===r.type?(s=r.c2l(e[a]),u=e[a]-c[0],l=e[a]+c[1],o[a]=[(r.c2l(u,!0)-s)*n,(r.c2l(l,!0)-s)*n],0<u&&(u=r.c2l(u),r._lowerLogErrorBound||(r._lowerLogErrorBound=u),r._lowerErrorBound=Math.min(r._lowerLogErrorBound,u))):o[a]=[-c[0]*n,c[1]*n]}return o}t.exports=function(e,t,n){var r=[c(e.x,e.error_x,t[0],n.xaxis),c(e.y,e.error_y,t[1],n.yaxis),c(e.z,e.error_z,t[2],n.zaxis)],i=function(e){for(var t=0;t<e.length;t++)if(e[t])return e[t].length;return 0}(r);if(0===i)return null;for(var o=new Array(i),a=0;a<i;a++){for(var s=[[0,0,0],[0,0,0]],l=0;l<3;l++)if(r[l])for(var u=0;u<2;u++)s[u][l]=r[l][a][u];o[a]=s}return o}},{"../../registry":879}],927:[function(e,t,n){"use strict";var i=e("../../../stackgl_modules").gl_line3d,o=e("../../../stackgl_modules").gl_scatter3d,a=e("../../../stackgl_modules").gl_error3d,s=e("../../../stackgl_modules").gl_mesh3d,d=e("../../../stackgl_modules").delaunay_triangulate,R=e("../../lib"),I=e("../../lib/str2rgbarray"),z=e("../../lib/gl_format_color").formatColor,D=e("../scatter/make_bubble_size_func"),l=e("../../constants/gl3d_dashes"),r=e("../../constants/gl3d_markers"),N=e("../../plots/cartesian/axes"),F=e("../../components/fx/helpers").appendArrayPointValue,B=e("./calc_errors");function u(e,t){this.scene=e,this.uid=t,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}e=u.prototype;function U(e){return null==e?0:-1<e.indexOf("left")?-1:-1<e.indexOf("right")?1:0}function q(e){return null==e?0:-1<e.indexOf("top")?-1:-1<e.indexOf("bottom")?1:0}function H(e,t){return t(4*e)}function V(e){return r[e]}function G(e,t,n,r,i){var o=null;if(R.isArrayOrTypedArray(e))for(var o=[],a=0;a<t;a++)void 0===e[a]?o[a]=r:o[a]=n(e[a],i);else o=n(e,R.identity);return o}function c(e,t){var n,r,i,o,a=[],s=e.fullSceneLayout,l=e.dataScale,u=s.xaxis,c=s.yaxis,f=s.zaxis,d=t.marker,h=t.line,p=t.x||[],y=t.y||[],g=t.z||[],v=p.length,m=t.xcalendar,b=t.ycalendar,x=t.zcalendar;for(A=0;A<v;A++)n=u.d2l(p[A],0,m)*l[0],r=c.d2l(y[A],0,b)*l[1],i=f.d2l(g[A],0,x)*l[2],a[A]=[n,r,i];if(Array.isArray(t.text))O=t.text;else if(void 0!==t.text)for(O=new Array(v),A=0;A<v;A++)O[A]=t.text;function _(e,t){e=s[e];return N.tickText(e,e.d2l(t),!0).text}var w=t.texttemplate;if(w)for(var M=e.fullLayout._d3locale,e=Array.isArray(w),j=e?Math.min(w.length,v):v,k=e?function(e){return w[e]}:function(){return w},O=new Array(j),A=0;A<j;A++){var T={x:p[A],y:y[A],z:g[A]},P={xLabel:_("xaxis",p[A]),yLabel:_("yaxis",y[A]),zLabel:_("zaxis",g[A])},S={};F(S,t,A);var E=t._meta||{};O[A]=R.texttemplateString(k(A),P,M,S,T,E)}o={position:a,mode:t.mode,text:O},"line"in t&&(o.lineColor=z(h,1,v),o.lineWidth=h.width,o.lineDashes=h.dash),"marker"in t&&(h=D(t),o.scatterColor=z(d,1,v),o.scatterSize=G(d.size,v,H,20,h),o.scatterMarker=G(d.symbol,v,V,"●"),o.scatterLineWidth=d.line.width,o.scatterLineColor=z(d.line,1,v),o.scatterAngle=0),"textposition"in t&&(o.textOffset=function(e){var t=[0,0];if(Array.isArray(e))for(var n=0;n<e.length;n++)t[n]=[0,0],e[n]&&(t[n][0]=U(e[n]),t[n][1]=q(e[n]));else t[0]=U(e),t[1]=q(e);return t}(t.textposition),o.textColor=z(t.textfont,1,v),o.textSize=G(t.textfont.size,v,R.identity,12),o.textFont=t.textfont.family,o.textAngle=0);var C=["x","y","z"];for(o.project=[!1,!1,!1],o.projectScale=[1,1,1],o.projectOpacity=[1,1,1],A=0;A<3;++A){var L=t.projection[C[A]];(o.project[A]=L.show)&&(o.projectOpacity[A]=L.opacity,o.projectScale[A]=L.scale)}o.errorBounds=B(t,l,s);d=function(e){for(var t=[0,0,0],n=[[0,0,0],[0,0,0],[0,0,0]],r=[1,1,1],i=0;i<3;i++){var o=e[i];(o=o&&!1!==o.copy_zstyle&&!1!==e[2].visible?e[2]:o)&&o.visible&&(t[i]=o.width/2,n[i]=I(o.color),r[i]=o.thickness)}return{capSize:t,color:n,lineWidth:r}}([t.error_x,t.error_y,t.error_z]);return o.errorColor=d.color,o.errorLineWidth=d.lineWidth,o.errorCapSize=d.capSize,o.delaunayAxis=t.surfaceaxis,o.delaunayColor=I(t.surfacecolor),o}function f(e){if(R.isArrayOrTypedArray(e)){var t=e[0];return"rgb("+(e=R.isArrayOrTypedArray(t)?t:e).slice(0,3).map(function(e){return Math.round(255*e)})+")"}return null}function h(e){return R.isArrayOrTypedArray(e)?4===e.length&&"number"==typeof e[0]?f(e):e.map(f):null}e.handlePick=function(e){if(e.object&&(e.object===this.linePlot||e.object===this.delaunayMesh||e.object===this.textMarkers||e.object===this.scatterPlot)){var t=e.index=e.data.index;return e.object.highlight&&e.object.highlight(null),this.scatterPlot&&(e.object=this.scatterPlot,this.scatterPlot.highlight(e.data)),e.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?!this.textLabels[t]&&0!==this.textLabels[t]||(e.textLabel=this.textLabels[t]):e.textLabel=this.textLabels),e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]],!0}},e.update=function(e){var t=this.scene.glplot.gl,n=l.solid;this.data=e;var r=c(this.scene,e);"mode"in r&&(this.mode=r.mode),"lineDashes"in r&&r.lineDashes in l&&(n=l[r.lineDashes]),this.color=h(r.scatterColor)||h(r.lineColor),this.dataPoints=r.position,n={gl:this.scene.glplot.gl,position:r.position,color:r.lineColor,lineWidth:r.lineWidth||1,dashes:n[0],dashScale:n[1],opacity:e.opacity,connectGaps:e.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(n):(this.linePlot=i(n),(this.linePlot._trace=this).scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var n=e.opacity;e.marker&&e.marker.opacity&&(n*=e.marker.opacity),n={gl:this.scene.glplot.gl,position:r.position,color:r.scatterColor,size:r.scatterSize,glyph:r.scatterMarker,opacity:n,orthographic:!0,lineWidth:r.scatterLineWidth,lineColor:r.scatterLineColor,project:r.project,projectScale:r.projectScale,projectOpacity:r.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(n):(this.scatterPlot=o(n),(this.scatterPlot._trace=this).scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),n={gl:this.scene.glplot.gl,position:r.position,glyph:r.text,color:r.textColor,size:r.textSize,angle:r.textAngle,alignment:r.textOffset,font:r.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:e.opacity},this.textLabels=e.hovertext||e.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(n):(this.textMarkers=o(n),(this.textMarkers._trace=this).textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),n={gl:this.scene.glplot.gl,position:r.position,color:r.errorColor,error:r.errorBounds,lineWidth:r.errorLineWidth,capSize:r.errorCapSize,opacity:e.opacity},this.errorBars?r.errorBounds?this.errorBars.update(n):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):r.errorBounds&&(this.errorBars=a(n),(this.errorBars._trace=this).scene.glplot.add(this.errorBars)),0<=r.delaunayAxis?((r=function(e,t,n){for(var r=(n+1)%3,i=(n+2)%3,o=[],a=[],s=0;s<e.length;++s){var l=e[s];!isNaN(l[r])&&isFinite(l[r])&&!isNaN(l[i])&&isFinite(l[i])&&(o.push([l[r],l[i]]),a.push(s))}var u=d(o);for(s=0;s<u.length;++s)for(var c=u[s],f=0;f<c.length;++f)c[f]=a[c[f]];return{positions:e,cells:u,meshColor:t}}(r.position,r.delaunayColor,r.delaunayAxis)).opacity=e.opacity,this.delaunayMesh?this.delaunayMesh.update(r):(r.gl=t,this.delaunayMesh=s(r),(this.delaunayMesh._trace=this).scene.glplot.add(this.delaunayMesh))):this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},e.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},t.exports=function(e,t){return(e=new u(e,t.uid)).update(t),e}},{"../../../stackgl_modules":962,"../../components/fx/helpers":683,"../../constants/gl3d_dashes":755,"../../constants/gl3d_markers":756,"../../lib":779,"../../lib/gl_format_color":776,"../../lib/str2rgbarray":803,"../../plots/cartesian/axes":828,"../scatter/make_bubble_size_func":948,"./calc_errors":926}],928:[function(e,t,n){"use strict";var c=e("../../registry"),f=e("../../lib"),d=e("../scatter/subtypes"),h=e("../scatter/marker_defaults"),p=e("../scatter/line_defaults"),y=e("../scatter/text_defaults"),g=e("./attributes");t.exports=function(n,r,e,t){function i(e,t){return f.coerce(n,r,g,e,t)}if(function(e,t,n,r){var i=0,o=n("x"),a=n("y"),n=n("z");c.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y","z"],r),o&&a&&n&&(i=Math.min(o.length,a.length,n.length),t._length=t._xlength=t._ylength=t._zlength=i);return i}(n,r,i,t)){i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),i("mode"),d.hasLines(r)&&(i("connectgaps"),p(n,r,e,t,i)),d.hasMarkers(r)&&h(n,r,e,t,i,{noSelect:!0}),d.hasText(r)&&(i("texttemplate"),y(n,r,t,i,{noSelect:!0}));var o=(r.line||{}).color,a=(r.marker||{}).color;0<=i("surfaceaxis")&&i("surfacecolor",o||a);for(var s=["x","y","z"],l=0;l<3;++l){var u="projection."+s[l];i(u+".show")&&(i(u+".opacity"),i(u+".scale"))}t=c.getComponentMethod("errorbars","supplyDefaults");t(n,r,o||a||e,{axis:"z"}),t(n,r,o||a||e,{axis:"y",inherit:"z"}),t(n,r,o||a||e,{axis:"x",inherit:"z"})}else r.visible=!1}},{"../../lib":779,"../../registry":879,"../scatter/line_defaults":944,"../scatter/marker_defaults":950,"../scatter/subtypes":956,"../scatter/text_defaults":957,"./attributes":924}],929:[function(e,t,n){"use strict";t.exports={plot:e("./convert"),attributes:e("./attributes"),markerSymbols:e("../../constants/gl3d_markers"),supplyDefaults:e("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":756,"../../plots/gl3d":862,"./attributes":924,"./calc":925,"./convert":927,"./defaults":928}],930:[function(e,t,n){"use strict";var i=e("../../lib");t.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;i.mergeArray(t.text,e,"tx"),i.mergeArray(t.texttemplate,e,"txt"),i.mergeArray(t.hovertext,e,"htx"),i.mergeArray(t.customdata,e,"data"),i.mergeArray(t.textposition,e,"tp"),t.textfont&&(i.mergeArrayCastPositive(t.textfont.size,e,"ts"),i.mergeArray(t.textfont.color,e,"tc"),i.mergeArray(t.textfont.family,e,"tf"));var r=t.marker;r&&(i.mergeArrayCastPositive(r.size,e,"ms"),i.mergeArrayCastPositive(r.opacity,e,"mo"),i.mergeArray(r.symbol,e,"mx"),i.mergeArray(r.color,e,"mc"),t=r.line,r.line&&(i.mergeArray(t.color,e,"mlc"),i.mergeArrayCastPositive(t.width,e,"mlw")),(r=r.gradient)&&"none"!==r.type&&(i.mergeArray(r.type,e,"mgt"),i.mergeArray(r.color,e,"mgc")))}},{"../../lib":779}],931:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,i=e("../../plots/template_attributes").texttemplateAttrs,o=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../components/colorscale/attributes"),s=e("../../plots/font_attributes"),l=e("../../components/drawing/attributes").dash,u=e("../../components/drawing"),c=e("./constants"),e=e("../../lib/extend").extendFlat;function f(){return{valType:"any",dflt:0,editType:"calc"}}function d(){return{valType:"any",editType:"calc"}}function h(){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:f(),yperiod:f(),xperiod0:d(),yperiod0:d(),xperiodalignment:h(),yperiodalignment:h(),xhoverformat:r("x"),yhoverformat:r("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:i({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:o({},{keys:c.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:e({},l,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:e({symbol:{valType:"enumerated",values:u.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:e({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},a("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},a("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:s({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":654,"../../components/drawing":669,"../../components/drawing/attributes":668,"../../lib/extend":772,"../../plots/cartesian/axis_format_attributes":831,"../../plots/font_attributes":859,"../../plots/template_attributes":878,"./constants":935}],932:[function(e,t,n){"use strict";var L=e("fast-isnumeric"),R=e("../../lib"),I=e("../../plots/cartesian/axes"),z=e("../../plots/cartesian/align_period"),D=e("../../constants/numerical").BADNUM,p=e("./subtypes"),N=e("./colorscale_calc"),F=e("./arrays_to_calcdata"),B=e("./calc_selection");function U(e,t,n,r,i,o,a){var s=t._length,l=e._fullLayout,u=n._id,c=r._id,f=l._firstScatter[y(t)]===t.uid,d=(V(t,l,n,r)||{}).orientation,h=t.fill;n._minDtick=0;e={padded:!(r._minDtick=0)},l={padded:!0};a&&(e.ppad=l.ppad=a);s=s<2||i[0]!==i[s-1]||o[0]!==o[s-1];s&&("tozerox"===h||"tonextx"===h&&(f||"h"===d))?e.tozero=!0:(t.error_y||{}).visible||"tonexty"!==h&&"tozeroy"!==h&&(p.hasMarkers(t)||p.hasText(t))||(e.padded=!1,e.ppad=0),s&&("tozeroy"===h||"tonexty"===h&&(f||"v"===d))?l.tozero=!0:"tonextx"!==h&&"tozerox"!==h||(l.padded=!1),u&&(t._extremes[u]=I.findExtremes(n,i,e)),c&&(t._extremes[c]=I.findExtremes(r,o,l))}function q(e,t){if(p.hasMarkers(e)){var n=e.marker,r=1.6*(e.marker.sizeref||1),i="area"===e.marker.sizemode?function(e){return Math.max(Math.sqrt((e||0)/r),3)}:function(e){return Math.max((e||0)/r,3)};if(R.isArrayOrTypedArray(n.size)){var o={type:"linear"};I.setConvert(o);for(var a=o.makeCalcdata(e.marker,"size"),s=new Array(t),l=0;l<t;l++)s[l]=i(a[l]);return s}return i(n.size)}}function H(e,t){var n=y(t),e=e._firstScatter;e[n]||(e[n]=t.uid)}function y(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function V(e,t,n,r){e=e.stackgroup;if(e){e=t._scatterStackOpts[n._id+r._id][e],n="v"===e.orientation?r:n;return"linear"===n.type||"log"===n.type?e:void 0}}t.exports={calc:function(e,t){var n,r,i,o,a,s=e._fullLayout,l=I.getFromId(e,t.xaxis||"x"),u=I.getFromId(e,t.yaxis||"y"),c=l.makeCalcdata(t,"x"),f=u.makeCalcdata(t,"y"),d=z(t,l,"x",c),h=z(t,u,"y",f),p=d.vals,y=h.vals,g=t._length,v=new Array(g),m=t.ids,b=V(t,s,l,u),x=!1;H(s,t);var _,w="x",M="y";b?(R.pushUnique(b.traceIndices,t._expandedIndex),n="v"===b.orientation,_=n?(M="s","x"):(w="s","y"),o="interpolate"===b.stackgaps):U(e,t,l,u,p,y,q(t,g));for(var j=!!t.xperiodalignment,k=!!t.yperiodalignment,O=0;O<g;O++){var A=v[O]={},T=L(p[O]),P=L(y[O]);T&&P?(A[w]=p[O],A[M]=y[O],j&&(A.orig_x=c[O],A.xEnd=d.ends[O],A.xStart=d.starts[O]),k&&(A.orig_y=f[O],A.yEnd=h.ends[O],A.yStart=h.starts[O])):b&&(n?T:P)?(A[_]=(n?p:y)[O],A.gap=!0,o?(A.s=D,x=!0):A.s=0):A[w]=A[M]=D,m&&(A.id=String(m[O]))}if(F(v,t),N(e,t),B(v,t),b){for(O=0;O<v.length;)v[O][_]===D?v.splice(O,1):O++;if(R.sort(v,function(e,t){return e[_]-t[_]||e.i-t.i}),x){for(O=0;O<v.length-1&&v[O].gap;)O++;for(a=(a=v[O].s)||(v[O].s=0),r=0;r<O;r++)v[r].s=a;for(i=v.length-1;O<i&&v[i].gap;)i--;for(a=v[i].s,r=v.length-1;i<r;r--)v[r].s=a;for(;O<i;)if(v[++O].gap){for(r=O+1;v[r].gap;)r++;for(var S=v[O-1][_],E=v[O-1].s,C=(v[r].s-E)/(v[r][_]-S);O<r;)v[O].s=E+(v[O][_]-S)*C,O++}}}return v},calcMarkerSize:q,calcAxisExpansion:U,setFirstScatter:H,getStackOpts:V}},{"../../constants/numerical":758,"../../lib":779,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"./arrays_to_calcdata":930,"./calc_selection":933,"./colorscale_calc":934,"./subtypes":956,"fast-isnumeric":574}],933:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t){r.isArrayOrTypedArray(t.selectedpoints)&&r.tagSelected(e,t)}},{"../../lib":779}],934:[function(e,t,n){"use strict";var r=e("../../components/colorscale/helpers").hasColorscale,i=e("../../components/colorscale/calc"),o=e("./subtypes");t.exports=function(e,t){o.hasLines(t)&&r(t,"line")&&i(e,t,{vals:t.line.color,containerStr:"line",cLetter:"c"}),o.hasMarkers(t)&&(r(t,"marker")&&i(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),r(t,"marker.line")&&i(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":655,"../../components/colorscale/helpers":658,"./subtypes":956}],935:[function(e,t,n){"use strict";t.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],936:[function(e,t,n){"use strict";var C=e("./calc");function L(e,t,n,r,i,o,a){var i={i:null,gap:i[r]=!0,s:0};i[a]=n,e.splice(t,0,i),t&&n===e[t-1][a]?(r=e[t-1],i.s=r.s,i.i=r.i,i.gap=r.gap):o&&(i.s=(o=n,i=a,a=e[(n=t)-1],(n=e[n+1])?a?a.s+(n.s-a.s)*(o-a[i])/(n[i]-a[i]):n.s:a.s)),t||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}t.exports=function(e,t){var n=t.xaxis,r=t.yaxis,t=n._id+r._id,i=e._fullLayout._scatterStackOpts[t];if(i){var o,a,s,l,u,c,f,d,h,p,y,g=e.calcdata;for(y in i){var v,m=(v=i[y]).traceIndices;if(m.length){for(c="interpolate"===v.stackgaps,f=v.groupnorm,h="v"===v.orientation?(d="x","y"):(d="y","x"),p=new Array(m.length),_=0;_<p.length;_++)p[_]=!1;for(var b=g[m[0]],x=new Array(b.length),_=0;_<b.length;_++)x[_]=b[_][d];for(_=1;_<m.length;_++){for(j=g[m[_]],P=o=0;P<j.length;P++){for(s=j[P][d];s>x[o]&&o<x.length;o++)L(j,P,x[o],_,p,c,d),P++;if(s!==x[o]){for(a=0;a<_;a++)L(g[m[a]],o,s,a,p,c,d);x.splice(o,0,s)}o++}for(;o<x.length;o++)L(j,P,x[o],_,p,c,d),P++}var w=x.length;for(P=0;P<b.length;P++){for(l=b[P][h]=b[P].s,_=1;_<m.length;_++)(j=g[m[_]])[0].trace._rawLength=j[0].trace._length,j[0].trace._length=w,l+=j[P].s,j[P][h]=l;if(f)for(u=("fraction"===f?l:l/100)||1,_=0;_<m.length;_++){var M=g[m[_]][P];M[h]/=u,M.sNorm=M.s/u}}for(_=0;_<m.length;_++){var j,k=(j=g[m[_]])[0].trace,O=C.calcMarkerSize(k,k._rawLength),A=Array.isArray(O);if(O&&p[_]||A)for(var T=O,O=new Array(w),P=0;P<w;P++)O[P]=j[P].gap?0:A?T[j[P].i]:T;var S=new Array(w),E=new Array(w);for(P=0;P<w;P++)S[P]=j[P].x,E[P]=j[P].y;C.calcAxisExpansion(e,k,n,r,S,E,O),j[0].t.orientation=v.orientation}}}}}},{"./calc":932}],937:[function(e,t,n){"use strict";t.exports=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("scatter"===n.type){var r=n.fill;if("none"!==r&&"toself"!==r&&(n.opacity=void 0,"tonexty"===r||"tonextx"===r))for(var i=t-1;0<=i;i--){var o=e[i];if("scatter"===o.type&&o.xaxis===n.xaxis&&o.yaxis===n.yaxis){o.opacity=void 0;break}}}}}},{}],938:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../registry"),u=e("./attributes"),c=e("./constants"),f=e("./subtypes"),d=e("./xy_defaults"),h=e("./period_defaults"),p=e("./stack_defaults"),y=e("./marker_defaults"),g=e("./line_defaults"),v=e("./line_shape_defaults"),m=e("./text_defaults"),b=e("./fillcolor_defaults");t.exports=function(n,r,e,t){function i(e,t){return s.coerce(n,r,u,e,t)}var o,a=d(n,r,t,i);a||(r.visible=!1),r.visible&&(h(n,r,t,i),i("xhoverformat"),i("yhoverformat"),a=!(o=p(n,r,t,i))&&a<c.PTS_LINESONLY?"lines+markers":"lines",i("text"),i("hovertext"),i("mode",a),f.hasLines(r)&&(g(n,r,e,t,i),v(n,r,i),i("connectgaps"),i("line.simplify")),f.hasMarkers(r)&&y(n,r,e,t,i,{gradient:!0}),f.hasText(r)&&(i("texttemplate"),m(n,r,t,i)),a=[],(f.hasMarkers(r)||f.hasText(r))&&(i("cliponaxis"),i("marker.maxdisplayed"),a.push("points")),i("fill",o?o.fillDflt:"none"),"none"!==r.fill&&(b(n,r,e,i),f.hasLines(r)||v(n,r,i)),t=(r.line||{}).color,o=(r.marker||{}).color,"tonext"!==r.fill&&"toself"!==r.fill||a.push("fills"),i("hoveron",a.join("+")||"points"),"fills"!==r.hoveron&&i("hovertemplate"),(a=l.getComponentMethod("errorbars","supplyDefaults"))(n,r,t||o||e,{axis:"y"}),a(n,r,t||o||e,{axis:"x",inherit:"y"}),s.coerceSelectionMarkerOpacity(r,i))}},{"../../lib":779,"../../registry":879,"./attributes":931,"./constants":935,"./fillcolor_defaults":939,"./line_defaults":944,"./line_shape_defaults":946,"./marker_defaults":950,"./period_defaults":951,"./stack_defaults":954,"./subtypes":956,"./text_defaults":957,"./xy_defaults":958}],939:[function(e,t,n){"use strict";var s=e("../../components/color"),l=e("../../lib").isArrayOrTypedArray;t.exports=function(e,t,n,r){var i,o,a=!1;t.marker&&(i=t.marker.color,o=(t.marker.line||{}).color,i&&!l(i)?a=i:o&&!l(o)&&(a=o)),r("fillcolor",s.addOpacity((t.line||{}).color||a||n,.5))}},{"../../components/color":647,"../../lib":779}],940:[function(e,t,n){"use strict";var o=e("../../plots/cartesian/axes");t.exports=function(e,t,n){var r={},i={_fullLayout:n},n=o.getFromTrace(i,t,"x"),t=o.getFromTrace(i,t,"y");return r.xLabel=o.tickText(n,n.c2l(e.x),!0).text,r.yLabel=o.tickText(t,t.c2l(e.y),!0).text,r}},{"../../plots/cartesian/axes":828}],941:[function(e,t,n){"use strict";var o=e("../../components/color"),a=e("./subtypes");t.exports=function(e,t){var n;if("lines"===e.mode)return(n=e.line.color)&&o.opacity(n)?n:e.fillcolor;if("none"===e.mode)return e.fill?e.fillcolor:"";var r=t.mcc||(e.marker||{}).color,i=t.mlcc||((e.marker||{}).line||{}).color;return(i=r&&o.opacity(r)?r:i&&o.opacity(i)&&(t.mlw||((e.marker||{}).line||{}).width)?i:"")?o.opacity(i)<.3?o.addOpacity(i,.3):i:(n=(e.line||{}).color)&&o.opacity(n)&&a.hasLines(e)&&e.line.width?n:e.fillcolor}},{"../../components/color":647,"./subtypes":956}],942:[function(e,t,n){"use strict";var I=e("../../lib"),z=e("../../components/fx"),D=e("../../registry"),N=e("./get_trace_color"),F=e("../../components/color"),B=I.fillText;t.exports=function(e,t,n,r){var i=e.cd,o=i[0].trace,a=e.xa,s=e.ya,l=a.c2p(t),u=s.c2p(n),c=[l,u],f=o.hoveron||"",d=-1!==o.mode.indexOf("markers")?3:.5,h=!!o.xperiodalignment,p=!!o.yperiodalignment;if(-1!==f.indexOf("points")){var y=function(e){var t=Math.max(d,e.mrc||0),n=a.c2p(e.x)-l,e=s.c2p(e.y)-u;return Math.max(Math.sqrt(n*n+e*e)-t,1-d/t)},g=z.getDistanceFunction(r,function(e){if(h){var t=a.c2p(e.xStart),n=a.c2p(e.xEnd);return l>=Math.min(t,n)&&l<=Math.max(t,n)?0:1/0}t=Math.max(3,e.mrc||0),n=1-1/t,e=Math.abs(a.c2p(e.x)-l);return e<t?n*e/t:e-t+n},function(e){if(p){var t=s.c2p(e.yStart),n=s.c2p(e.yEnd);return u>=Math.min(t,n)&&u<=Math.max(t,n)?0:1/0}t=Math.max(3,e.mrc||0),n=1-1/t,e=Math.abs(s.c2p(e.y)-u);return e<t?n*e/t:e-t+n},y);if(z.getClosest(i,g,e),!1!==e.index){var v=i[e.index],m=a.c2p(v.x,!0),t=s.c2p(v.y,!0),n=v.mrc||1;e.index=v.i;r=i[0].t.orientation,g=r&&(v.sNorm||v.s),i="h"===r?g:void 0!==v.orig_x?v.orig_x:v.x,g="v"===r?g:void 0!==v.orig_y?v.orig_y:v.y;return I.extendFlat(e,{color:N(o,v),x0:m-n,x1:m+n,xLabelVal:i,y0:t-n,y1:t+n,yLabelVal:g,spikeDistance:y(v),hovertemplate:o.hovertemplate}),B(v,o,e),D.getComponentMethod("errorbars","hoverInfo")(v,o,e),[e]}}if(-1!==f.indexOf("fills")&&o._polygons){var b,x,_,w,M,j,k,O=o._polygons,A=[],T=!1,P=1/0,S=-1/0,E=1/0,C=-1/0;for(R=0;R<O.length;R++)(x=O[R]).contains(c)&&(T=!T,A.push(x),E=Math.min(E,x.ymin),C=Math.max(C,x.ymax));if(T){for(var L=((E=Math.max(E,0))+(C=Math.min(C,s._length)))/2,R=0;R<A.length;R++)for(_=A[R].pts,b=1;b<_.length;b++)L<(j=_[b-1][1])!=L<=(k=_[b][1])&&(w=_[b-1][0],M=_[b][0],k-j&&(j=w+(M-w)*(L-j)/(k-j),P=Math.min(P,j),S=Math.max(S,j)));P=Math.max(P,0),S=Math.min(S,a._length),f=F.defaultLine;return F.opacity(o.fillcolor)?f=o.fillcolor:F.opacity((o.line||{}).color)&&(f=o.line.color),I.extendFlat(e,{distance:e.maxHoverDistance,x0:P,x1:S,y0:L,y1:L,color:f,hovertemplate:!1}),delete e.index,o.text&&!Array.isArray(o.text)?e.text=String(o.text):e.text=o.name,[e]}}}},{"../../components/color":647,"../../components/fx":687,"../../lib":779,"../../registry":879,"./get_trace_color":941}],943:[function(e,t,n){"use strict";var r=e("./subtypes");t.exports={hasLines:r.hasLines,hasMarkers:r.hasMarkers,hasText:r.hasText,isBubble:r.isBubble,attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./cross_trace_calc"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot"),colorbar:e("./marker_colorbar"),formatLabels:e("./format_labels"),style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":842,"./arrays_to_calcdata":930,"./attributes":931,"./calc":932,"./cross_trace_calc":936,"./cross_trace_defaults":937,"./defaults":938,"./format_labels":940,"./hover":942,"./marker_colorbar":949,"./plot":952,"./select":953,"./style":955,"./subtypes":956}],944:[function(e,t,n){"use strict";var s=e("../../lib").isArrayOrTypedArray,l=e("../../components/colorscale/helpers").hasColorscale,u=e("../../components/colorscale/defaults");t.exports=function(e,t,n,r,i,o){var a=(e.marker||{}).color;i("line.color",n),l(e,"line")?u(e,t,r,i,{prefix:"line.",cLetter:"c"}):i("line.color",!s(a)&&a||n),i("line.width"),(o||{}).noDash||i("line.dash")}},{"../../components/colorscale/defaults":657,"../../components/colorscale/helpers":658,"../../lib":779}],945:[function(e,t,n){"use strict";var r=e("../../constants/numerical"),oe=r.BADNUM,r=r.LOG_CLIP,ae=r+.5,se=r-.5,le=e("../../lib"),ue=le.segmentsIntersect,ce=le.constrain,fe=e("./constants");t.exports=function(r,i){var e,t,n,o,a,s,l,u,c,f,d,h,p,y,g,v,m=i.xaxis,b=i.yaxis,x="log"===m.type,_="log"===b.type,w=m._length,M=b._length,j=i.connectGaps,k=i.baseTolerance,O=i.shape,A="linear"===O,T=i.fill&&"none"!==i.fill,P=[],S=fe.minTolerance,E=r.length,C=new Array(E),L=0;function R(e){var t=r[e];if(!t)return!1;var n=i.linearized?m.l2p(t.x):m.c2p(t.x),e=i.linearized?b.l2p(t.y):b.c2p(t.y);if(n===oe){if((n=x?m.c2p(t.x,!0):n)===oe)return!1;_&&e===oe&&(n*=Math.abs(m._m*M*(0<m._m?ae:se)/(b._m*w*(0<b._m?ae:se)))),n*=1e3}if(e===oe){if((e=_?b.c2p(t.y,!0):e)===oe)return!1;e*=1e3}return[n,e]}function I(e,t,n,r){var i=n-e,o=r-t,n=.5-e,r=.5-t,e=i*i+o*o,t=i*n+o*r;if(0<t&&t<e){i=n*o-r*i;return i*i<e?1:void 0}}function z(e,t){var n=e[0]/w,r=e[1]/M,e=Math.max(0,-n,n-1,-r,r-1);return(e=e&&void 0!==g&&I(n,r,g,v)?0:e)&&t&&I(n,r,t[0]/w,t[1]/M)&&(e=0),(1+fe.toleranceGrowth*e)*k}function D(e,t){var n=e[0]-t[0],t=e[1]-t[1];return Math.sqrt(n*n+t*t)}var N,F,B,U,q,H,V,G=fe.maxScreensAway,W=-w*G,Y=w*(1+G),X=-M*G,Z=M*(1+G),$=[[W,X,Y,X],[Y,X,Y,Z],[Y,Z,W,Z],[W,Z,W,X]];function K(e){if(e[0]<W||e[0]>Y||e[1]<X||e[1]>Z)return[ce(e[0],W,Y),ce(e[1],X,Z)]}function Q(e,t){return e[0]===t[0]&&(e[0]===W||e[0]===Y)||e[1]===t[1]&&(e[1]===X||e[1]===Z)}function J(o,a,s){return function(e,t){var n=K(e),r=K(t),i=[];if(n&&r&&Q(n,r))return i;n&&i.push(n),r&&i.push(r);t=2*le.constrain((e[o]+t[o])/2,a,s)-((n||e)[o]+(r||t)[o]);return t&&((n&&r?0<t==n[o]>r[o]?n:r:n||r)[o]+=t),i}}function ee(e){var t,n,r=e[0],i=e[1],o=r===C[L-1][0],a=i===C[L-1][1];o&&a||(1<L?(t=r===C[L-2][0],n=i===C[L-2][1],o&&(r===W||r===Y)&&t?n?L--:C[L-1]=e:a&&(i===X||i===Z)&&n?t?L--:C[L-1]=e:C[L++]=e):C[L++]=e)}function te(e){C[L-1][0]!==e[0]&&C[L-1][1]!==e[1]&&ee([B,U]),ee(e),q=null,B=U=0}function ne(e){var t,n,r;g=e[0]/w,v=e[1]/M,N=e[0]<W?W:e[0]>Y?Y:0,F=e[1]<X?X:e[1]>Z?Z:0,N||F?(L?q?1<(n=V(q,e)).length&&(te(n[0]),C[L++]=n[1]):(H=V(C[L-1],e)[0],C[L++]=H):C[L++]=[N||e[0],F||e[1]],r=C[L-1],N&&F&&(r[0]!==N||r[1]!==F)?(q&&(B!==N&&U!==F?ee(B&&U?(t=q,n=e[0]-t[0],r=(e[1]-t[1])/n,0<(t[1]*e[0]-e[1]*t[0])/n?[0<r?W:Y,Z]:[0<r?Y:W,X]):[B||N,U||F]):B&&U&&ee([B,U])),ee([N,F])):B-N&&U-F&&ee([N||B,F||U]),q=e,B=N,U=F):(q&&te(V(q,e)[0]),C[L++]=e)}for("linear"===O||"spline"===O?V=function(e,t){for(var n=[],r=0,i=0;i<4;i++){var o=$[i],o=ue(e[0],e[1],t[0],t[1],o[0],o[1],o[2],o[3]);o&&(!r||1<Math.abs(o.x-n[0][0])||1<Math.abs(o.y-n[0][1]))&&(o=[o.x,o.y],r&&D(o,e)<D(n[0],e)?n.unshift(o):n.push(o),r++)}return n}:"hv"===O||"vh"===O?V=function(e,t){var n=[],e=K(e),t=K(t);return e&&t&&Q(e,t)||(e&&n.push(e),t&&n.push(t)),n}:"hvh"===O?V=J(0,W,Y):"vhv"===O&&(V=J(1,X,Z)),e=0;e<E;e++)if(t=R(e)){for(L=0,q=null,ne(t),e++;e<E;e++){if(!(o=R(e))){if(j)continue;break}if(A&&i.simplify){var re=R(e+1),ie=D(o,t);if(T&&(0===L||L===E-1)||!(ie<z(o,re)*S)){for(a=t,l=!(u=[(o[f=h=p=0]-t[0])/(c=ie),(o[1]-t[1])/ie]),n=o,e++;e<r.length;e++){if(s=re,re=R(e+1),!s){if(j)continue;break}if(y=(d=[s[0]-t[0],s[1]-t[1]])[0]*u[1]-d[1]*u[0],h=Math.min(h,y),(p=Math.max(p,y))-h>z(s,re))break;n=s,c<(d=d[0]*u[0]+d[1]*u[1])?(c=d,o=s,l=!1):d<f&&(f=d,a=s,l=!0)}if(l?(ne(o),n!==a&&ne(a)):(a!==t&&ne(a),n!==o&&ne(o)),ne(n),e>=r.length||!s)break;ne(s),t=s}}else ne(o)}q&&ee([B||q[0],U||q[1]]),P.push(C.slice(0,L))}return P}},{"../../constants/numerical":758,"../../lib":779,"./constants":935}],946:[function(e,t,n){"use strict";t.exports=function(e,t,n){"spline"===n("line.shape")&&n("line.smoothing")}},{}],947:[function(e,t,n){"use strict";var y={tonextx:1,tonexty:1,tonext:1};t.exports=function(e,t,n){for(var r,i,o,a,s={},l=!1,u=-1,c=0,f=-1,d=0;d<n.length;d++)(i=(r=n[d][0].trace).stackgroup||"")?i in s?a=s[i]:(a=s[i]=c,c++):r.fill in y&&0<=f?a=f:(a=f=c,c++),a<u&&(l=!0),r._groupIndex=u=a;var h=n.slice();l&&h.sort(function(e,t){e=e[0].trace,t=t[0].trace;return e._groupIndex-t._groupIndex||e.index-t.index});var p={};for(d=0;d<h.length;d++)i=(r=h[d][0].trace).stackgroup||"",!0===r.visible?(r._nexttrace=null,r.fill in y&&(o=p[i],r._prevtrace=o||null,o&&(o._nexttrace=r)),r._ownfill=r.fill&&("tozero"===r.fill.substr(0,6)||"toself"===r.fill||"to"===r.fill.substr(0,2)&&!r._prevtrace),p[i]=r):r._prevtrace=r._nexttrace=r._ownfill=null;return h}},{}],948:[function(e,t,n){"use strict";var o=e("fast-isnumeric");t.exports=function(e,t){t=t||2;var e=e.marker,n=e.sizeref||1,r=e.sizemin||0,i="area"===e.sizemode?function(e){return Math.sqrt(e/n)}:function(e){return e/n};return function(e){e=i(e/t);return o(e)&&0<e?Math.max(e,r):0}}},{"fast-isnumeric":574}],949:[function(e,t,n){"use strict";t.exports={container:"marker",min:"cmin",max:"cmax"}},{}],950:[function(e,t,n){"use strict";var l=e("../../components/color"),u=e("../../components/colorscale/helpers").hasColorscale,c=e("../../components/colorscale/defaults"),f=e("./subtypes");t.exports=function(e,t,n,r,i,o){var a=f.isBubble(e),s=(e.line||{}).color;o=o||{},s&&(n=s),i("marker.symbol"),i("marker.opacity",a?.7:1),i("marker.size"),i("marker.color",n),u(e,"marker")&&c(e,t,r,i,{prefix:"marker.",cLetter:"c"}),o.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),o.noLine||(i("marker.line.color",s&&!Array.isArray(s)&&t.marker.color!==s?s:a?l.background:l.defaultLine),u(e,"marker.line")&&c(e,t,r,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",a?1:0)),a&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),o.gradient&&"none"!==i("marker.gradient.type")&&i("marker.gradient.color")}},{"../../components/color":647,"../../components/colorscale/defaults":657,"../../components/colorscale/helpers":658,"./subtypes":956}],951:[function(e,t,n){"use strict";var r=e("../../lib").dateTick0,i=e("../../constants/numerical").ONEWEEK;function a(e,t){return r(t,e%i==0?1:0)}t.exports=function(e,t,n,r,i){var o;!(i=i||{x:!0,y:!0}).x||(o=r("xperiod"))&&(r("xperiod0",a(o,t.xcalendar)),r("xperiodalignment")),!i.y||(i=r("yperiod"))&&(r("yperiod0",a(i,t.ycalendar)),r("yperiodalignment"))}},{"../../constants/numerical":758,"../../lib":779}],952:[function(e,t,n){"use strict";var q=e("@plotly/d3"),H=e("../../registry"),V=e("../../lib"),G=V.ensureSingle,W=V.identity,Y=e("../../components/drawing"),X=e("./subtypes"),Z=e("./line_points"),d=e("./link_traces"),$=e("../../lib/polygon").tester;function h(d,e,h,n,t,r,i){var o,a,s,l,u,c,f;a=e,w=n,_=t,e=(x=h).xaxis,x=x.yaxis,c=q.extent(V.simpleMap(e.range,e.r2c)),f=q.extent(V.simpleMap(x.range,x.r2c)),e=w[0].trace,!X.hasMarkers(e)||0!==(x=e.marker.maxdisplayed)&&(e=w.filter(function(e){return e.x>=c[0]&&e.x<=c[1]&&e.y>=f[0]&&e.y<=f[1]}),s=Math.ceil(e.length/x),l=0,_.forEach(function(e,t){e=e[0].trace;X.hasMarkers(e)&&0<e.marker.maxdisplayed&&t<a&&l++}),u=Math.round(l*s/3+Math.floor(l/3)*s/7.1),w.forEach(function(e){delete e.vis}),e.forEach(function(e,t){0===Math.round((t+u)%s)&&(e.vis=!0)}));var p=!!i&&0<i.duration;function y(e){return p?e.transition():e}var g=h.xaxis,v=h.yaxis,m=n[0].trace,b=m.line,t=q.select(r),x=G(t,"g","errorbars"),_=G(t,"g","lines"),w=G(t,"g","points"),e=G(t,"g","text");if(H.getComponentMethod("errorbars","plot")(d,x,h,i),!0===m.visible){y(t).style("opacity",m.opacity);var M=m.fill.charAt(m.fill.length-1);"x"!==M&&"y"!==M&&(M=""),n[0][h.isRangePlot?"nodeRangePlot3":"node3"]=t;var j,k,r="",x=[],i=m._prevtrace;i&&(r=i._prevRevpath||"",I=i._nextFill,x=i._polygons);var O,A,T,P,S,E,C="",L="",R=[],t=V.noop,i=m._ownFill;if(X.hasLines(m)||"none"!==m.fill){for(I&&I.datum(n),-1!==["hv","vh","hvh","vhv"].indexOf(b.shape)?(O=Y.steps(b.shape),A=Y.steps(b.shape.split("").reverse().join(""))):O=A="spline"===b.shape?function(e){var t=e[e.length-1];return 1<e.length&&e[0][0]===t[0]&&e[0][1]===t[1]?Y.smoothclosed(e.slice(1),b.smoothing):Y.smoothopen(e,b.smoothing)}:function(e){return"M"+e.join("L")},T=function(e){return A(e.reverse())},R=Z(n,{xaxis:g,yaxis:v,connectGaps:m.connectgaps,baseTolerance:Math.max(b.width||1,3)/4,shape:b.shape,simplify:b.simplify,fill:m.fill}),E=m._polygons=new Array(R.length),o=0;o<R.length;o++)m._polygons[o]=$(R[o]);R.length&&(P=R[0][0],S=(S=R[R.length-1])[S.length-1]),t=function(t){return function(e){j=O(e),k=T(e),L=C?M?(C+="L"+j.substr(1),k+("L"+L.substr(1))):(C+="Z"+j,k+"Z"+L):(C=j,k),X.hasLines(m)&&1<e.length&&((e=q.select(this)).datum(n),t?y(e.style("opacity",0).attr("d",j).call(Y.lineGroupStyle)).style("opacity",1):((e=y(e)).attr("d",j),Y.singleLineStyle(n,e)))}}}_=_.selectAll(".js-line").data(R);y(_.exit()).style("opacity",0).remove(),_.each(t(!1)),_.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(Y.lineGroupStyle).each(t(!0)),Y.setClipUrl(_,h.layerClipId,d),R.length?(i?(i.datum(n),P&&S&&(M?("y"===M?P[1]=S[1]=v.c2p(0,!0):"x"===M&&(P[0]=S[0]=g.c2p(0,!0)),y(i).attr("d","M"+S+"L"+P+"L"+C.substr(1)).call(Y.singleFillStyle)):y(i).attr("d",C+"Z").call(Y.singleFillStyle))):I&&("tonext"===m.fill.substr(0,6)&&C&&r?(("tonext"===m.fill?y(I).attr("d",C+"Z"+r+"Z"):y(I).attr("d",C+"L"+r.substr(1)+"Z")).call(Y.singleFillStyle),m._polygons=m._polygons.concat(x)):(z(I),m._polygons=null)),m._prevRevpath=L,m._prevPolygons=E):(i?z(i):I&&z(I),m._polygons=m._prevRevpath=m._prevPolygons=null),w.datum(n),e.datum(n),function(e,t,n){var r,i,o=n[0].trace,a=X.hasMarkers(o),s=X.hasText(o),l=function(e){if(e.ids)return B}(o),u=U,c=U;(a||s)&&(r=W,n=(i=o.stackgroup)&&"infer zero"===d._fullLayout._scatterStackOpts[g._id+v._id][i].stackgaps,o.marker.maxdisplayed||o._needsCull?r=n?N:D:i&&!n&&(r=F),a&&(u=r),s&&(c=r));var f,u=(e=e.selectAll("path.point").data(u,l)).enter().append("path").classed("point",!0);p&&u.call(Y.pointStyle,o,d).call(Y.translatePoints,g,v).style("opacity",0).transition().style("opacity",1),e.order(),a&&(f=Y.makePointStyleFns(o)),e.each(function(e){var t=q.select(this),n=y(t);Y.translatePoint(e,n,g,v)?(Y.singlePointStyle(e,n,o,f,d),h.layerClipId&&Y.hideOutsideRangePoint(e,n,g,v,o.xcalendar,o.ycalendar),o.customdata&&t.classed("plotly-customdata",null!==e.data&&void 0!==e.data)):n.remove()}),(p?e.exit().transition().style("opacity",0):e.exit()).remove(),(e=t.selectAll("g").data(c,l)).enter().append("g").classed("textpoint",!0).append("text"),e.order(),e.each(function(e){var t=q.select(this),n=y(t.select("text"));Y.translatePoint(e,n,g,v)?h.layerClipId&&Y.hideOutsideRangePoint(e,t,g,v,o.xcalendar,o.ycalendar):t.remove()}),e.selectAll("text").call(Y.textPointStyle,o,d).each(function(e){var t=g.c2p(e.x),n=v.c2p(e.y);q.select(this).selectAll("tspan.line").each(function(){y(q.select(this)).attr({x:t,y:n})})}),e.exit().remove()}(w,e,n);var I=!1===m.cliponaxis?null:h.layerClipId;Y.setClipUrl(w,I,d),Y.setClipUrl(e,I,d)}function z(e){y(e).attr("d","M0,0Z")}function D(e){return e.filter(function(e){return!e.gap&&e.vis})}function N(e){return e.filter(function(e){return e.vis})}function F(e){return e.filter(function(e){return!e.gap})}function B(e){return e.id}function U(){return!1}}t.exports=function(n,r,e,t,i,o){var a,s,l,u=!i,c=!!i&&0<i.duration,f=d(n,r,e),e=t.selectAll("g.trace").data(f,function(e){return e[0].trace.uid});e.enter().append("g").attr("class",function(e){return"trace scatter trace"+e[0].trace.uid}).style("stroke-miterlimit",2),e.order(),s=n,l=r,e.each(function(e){var t=G(q.select(this),"g","fills");Y.setClipUrl(t,l.layerClipId,s);var n=e[0].trace,e=[];n._ownfill&&e.push("_ownFill"),n._nexttrace&&e.push("_nextFill");e=t.selectAll("g").data(e,W);e.enter().append("g"),e.exit().each(function(e){n[e]=null}).remove(),e.order().each(function(e){n[e]=G(q.select(this),"path","js-fill")})}),c?(o&&(a=o()),q.transition().duration(i.duration).ease(i.easing).each("end",function(){a&&a()}).each("interrupt",function(){a&&a()}).each(function(){t.selectAll("g.trace").each(function(e,t){h(n,t,r,e,f,this,i)})})):e.each(function(e,t){h(n,t,r,e,f,this,i)}),u&&e.exit().remove(),t.selectAll("path:not([d])").remove()}},{"../../components/drawing":669,"../../lib":779,"../../lib/polygon":791,"../../registry":879,"./line_points":945,"./link_traces":947,"./subtypes":956,"@plotly/d3":3}],953:[function(e,t,n){"use strict";var f=e("./subtypes");t.exports=function(e,t){var n,r,i,o,a=e.cd,s=e.xaxis,l=e.yaxis,u=[],c=a[0].trace;if(!f.hasMarkers(c)&&!f.hasText(c))return[];if(!1===t)for(n=0;n<a.length;n++)a[n].selected=0;else for(n=0;n<a.length;n++)r=a[n],i=s.c2p(r.x),o=l.c2p(r.y),null!==r.i&&t.contains([i,o],!1,n,e)?(u.push({pointNumber:r.i,x:s.c2d(r.x),y:l.c2d(r.y)}),r.selected=1):r.selected=0;return u}},{"./subtypes":956}],954:[function(e,t,n){"use strict";var v=["orientation","groupnorm","stackgaps"];t.exports=function(e,t,n,r){var i=n._scatterStackOpts,o=r("stackgroup");if(o){var a=t.xaxis+t.yaxis,n=i[a],s=(n=n||(i[a]={}))[o],l=!1;s?s.traces.push(t):(s=n[o]={traceIndices:[],traces:[t]},l=!0);for(var u={orientation:t.x&&!t.y?"h":"v"},c=0;c<v.length;c++){var f=v[c],d=f+"Found";if(!s[d]){var h=void 0!==e[f],p="orientation"===f;if((h||l)&&(s[f]=r(f,u[f]),p&&(s.fillDflt="h"===s[f]?"tonextx":"tonexty"),h&&(s[d]=!0,!l&&(delete s.traces[0][f],p))))for(var y=0;y<s.traces.length-1;y++){var g=s.traces[y];g._input.fill!==g.fill&&(g.fill=s.fillDflt)}}}return s}}},{}],955:[function(e,t,n){"use strict";var r=e("@plotly/d3"),i=e("../../components/drawing"),o=e("../../registry");function a(e,t,n){i.pointStyle(e.selectAll("path.point"),t,n)}function s(e,t,n){i.textPointStyle(e.selectAll("text"),t,n)}t.exports={style:function(t){var e=r.select(t).selectAll("g.trace.scatter");e.style("opacity",function(e){return e[0].trace.opacity}),e.selectAll("g.points").each(function(e){a(r.select(this),e.trace||e[0].trace,t)}),e.selectAll("g.text").each(function(e){s(r.select(this),e.trace||e[0].trace,t)}),e.selectAll("g.trace path.js-line").call(i.lineGroupStyle),e.selectAll("g.trace path.js-fill").call(i.fillGroupStyle),o.getComponentMethod("errorbars","style")(e)},stylePoints:a,styleText:s,styleOnSelect:function(e,t,n){(t=t[0].trace).selectedpoints?(i.selectedPointStyle(n.selectAll("path.point"),t),i.selectedTextStyle(n.selectAll("text"),t)):(a(n,t,e),s(n,t,e))}}},{"../../components/drawing":669,"../../registry":879,"@plotly/d3":3}],956:[function(e,t,n){"use strict";var r=e("../../lib");t.exports={hasLines:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("lines")},hasMarkers:function(e){return e.visible&&(e.mode&&-1!==e.mode.indexOf("markers")||"splom"===e.type)},hasText:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("text")},isBubble:function(e){return r.isPlainObject(e.marker)&&r.isArrayOrTypedArray(e.marker.size)}}},{"../../lib":779}],957:[function(e,t,n){"use strict";var o=e("../../lib");t.exports=function(e,t,n,r,i){i=i||{},r("textposition"),o.coerceFont(r,"textfont",n.font),i.noSelect||(r("selected.textfont.color"),r("unselected.textfont.color"))}},{"../../lib":779}],958:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../registry");t.exports=function(e,t,n,r){var i,o=r("x"),a=r("y");if(l.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],n),o){o=s.minRowLength(o);a?i=Math.min(o,s.minRowLength(a)):(i=o,r("y0"),r("dy"))}else{if(!a)return 0;i=s.minRowLength(a),r("x0"),r("dx")}return t._length=i}},{"../../lib":779,"../../registry":879}],959:[function(e,t,n){"use strict";var H=e("../../lib"),p=e("../../components/colorscale/calc");function y(e){var t,n,r,i,o,a,s,l,u=e._x,c=e._y,f=e._z,d=e._len,h=-1/0,p=1/0,y=-1/0,g=1/0,v=-1/0,m=1/0,b="";for(d&&(a=u[0],s=c[0],l=f[0]),1<d&&(j=u[d-1],k=c[d-1],O=f[d-1]),N=0;N<d;N++)h=Math.max(h,u[N]),p=Math.min(p,u[N]),y=Math.max(y,c[N]),g=Math.min(g,c[N]),v=Math.max(v,f[N]),m=Math.min(m,f[N]),r||u[N]===a||(r=!0,b+="x"),i||c[N]===s||(i=!0,b+="y"),o||f[N]===l||(o=!0,b+="z");r||(b+="x"),i||(b+="y"),o||(b+="z");var x=V(e._x),_=V(e._y),w=V(e._z);b=(b=(b=b.replace("x",(j<a?"-":"+")+"x")).replace("y",(k<s?"-":"+")+"y")).replace("z",(O<l?"-":"+")+"z");function M(){d=0,x=[],_=[],w=[]}(!d||d<x.length*_.length*w.length)&&M();for(var j=function(e){return"x"===e?u:"y"===e?c:f},k=function(e){return"x"===e?x:"y"===e?_:w},O=function(e){return e[d-1]<e[0]?-1:1},A=j(b[1]),T=j(b[3]),P=j(b[5]),S=k(b[1]).length,E=k(b[3]).length,C=k(b[5]).length,L=!1,R=function(e,t,n){return S*(E*e+t)+n},I=O(j(b[1])),z=O(j(b[3])),D=O(j(b[5])),N=0;N<C-1;N++){for(t=0;t<E-1;t++){for(n=0;n<S-1;n++){var F=R(N,t,n),B=R(N,t,n+1),U=R(N,t+1,n),q=R(N+1,t,n);if(L=!(A[F]*I<A[B]*I&&T[F]*z<T[U]*z&&P[F]*D<P[q]*D)?!0:L)break}if(L)break}if(L)break}return L&&(H.warn("Encountered arbitrary coordinates! Unable to input data grid."),M()),{xMin:p,yMin:g,zMin:m,xMax:h,yMax:y,zMax:v,Xs:x,Ys:_,Zs:w,len:d,fill:b}}function V(e){return H.distinctVals(e).vals}function g(e,t){if(void 0===t&&(t=e.length),H.isTypedArray(e))return e.subarray(0,t);for(var n=[],r=0;r<t;r++)n[r]=+e[r];return n}t.exports={calc:function(e,t){t._len=Math.min(t.u.length,t.v.length,t.w.length,t.x.length,t.y.length,t.z.length),t._u=g(t.u,t._len),t._v=g(t.v,t._len),t._w=g(t.w,t._len),t._x=g(t.x,t._len),t._y=g(t.y,t._len),t._z=g(t.z,t._len);var n=y(t);t._gridFill=n.fill,t._Xs=n.Xs,t._Ys=n.Ys,t._Zs=n.Zs,t._len=n.len;var r,i,o,a=0;t.starts&&(r=g(t.starts.x||[]),i=g(t.starts.y||[]),o=g(t.starts.z||[]),a=Math.min(r.length,i.length,o.length)),t._startsX=r||[],t._startsY=i||[],t._startsZ=o||[];for(var s=0,l=1/0,u=0;u<t._len;u++)var c=t._u[u],f=t._v[u],d=t._w[u],d=Math.sqrt(c*c+f*f+d*d),s=Math.max(s,d),l=Math.min(l,d);for(p(e,t,{vals:[l,s],containerStr:"",cLetter:"c"}),u=0;u<a;u++){var h=r[u];n.xMax=Math.max(n.xMax,h),n.xMin=Math.min(n.xMin,h);h=i[u];n.yMax=Math.max(n.yMax,h),n.yMin=Math.min(n.yMin,h);h=o[u];n.zMax=Math.max(n.zMax,h),n.zMin=Math.min(n.zMin,h)}t._slen=a,t._normMax=s,t._xbnds=[n.xMin,n.xMax],t._ybnds=[n.yMin,n.yMax],t._zbnds=[n.zMin,n.zMax]},filter:g,processGrid:y}},{"../../components/colorscale/calc":655,"../../lib":779}],960:[function(e,t,n){"use strict";var r=e("../../components/color"),i=e("../../components/colorscale/attributes"),o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../../plots/attributes"),l=e("../../lib/extend").extendFlat,e=e("../../plot_api/edit_types").overrideAll;function u(){return{valType:"boolean",dflt:!1}}function c(){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:u(),y:u(),z:u()},color:{valType:"color",dflt:r.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:r.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}s=t.exports=e(l({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:a(),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},i("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:c(),y:c(),z:c()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:l({},i.zauto,{}),zmin:l({},i.zmin,{}),zmax:l({},i.zmax,{})},hoverinfo:l({},s.hoverinfo),showlegend:l({},s.showlegend,{dflt:!1})}),"calc","nested");s.x.editType=s.y.editType=s.z.editType="calc+clearAxisTypes",s.transforms=void 0},{"../../components/color":647,"../../components/colorscale/attributes":654,"../../lib/extend":772,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/cartesian/axis_format_attributes":831,"../../plots/template_attributes":878}],961:[function(e,t,n){"use strict";n.version="2.8.3"},{}],962:[function(u,t,n){!function(r){!function(){!function(e){"object"==typeof n&&void 0!==t?t.exports=e():("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).stackgl=e()}(function(){return function r(i,o,a){function s(t,e){if(!o[t]){if(!i[t]){var n="function"==typeof u&&u;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=o[t]={exports:{}},i[t][0].call(n.exports,function(e){return s(i[t][1][e]||e)},n,n.exports,r,i,o,a)}return o[t].exports}for(var l="function"==typeof u&&u,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,n){"use strict";n.byteLength=function(e){var t=c(e),e=t[0],t=t[1];return 3*(e+t)/4-t},n.toByteArray=function(e){var t,n,r=c(e),i=r[0],r=r[1],o=new u(function(e,t){return 3*(e+t)/4-t}(i,r)),a=0,s=0<r?i-4:i;for(n=0;n<s;n+=4)t=l[e.charCodeAt(n)]<<18|l[e.charCodeAt(n+1)]<<12|l[e.charCodeAt(n+2)]<<6|l[e.charCodeAt(n+3)],o[a++]=t>>16&255,o[a++]=t>>8&255,o[a++]=255&t;2===r&&(t=l[e.charCodeAt(n)]<<2|l[e.charCodeAt(n+1)]>>4,o[a++]=255&t);1===r&&(t=l[e.charCodeAt(n)]<<10|l[e.charCodeAt(n+1)]<<4|l[e.charCodeAt(n+2)]>>2,o[a++]=t>>8&255,o[a++]=255&t);return o},n.fromByteArray=function(e){for(var t,n=e.length,r=n%3,i=[],o=0,a=n-r;o<a;o+=16383)i.push(function(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(function(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}(r));return i.join("")}(e,o,a<o+16383?a:o+16383));1==r?(t=e[n-1],i.push(s[t>>2]+s[t<<4&63]+"==")):2==r&&(t=(e[n-2]<<8)+e[n-1],i.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return i.join("")};for(var s=[],l=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)s[i]=r[i],l[r.charCodeAt(i)]=i;function c(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("=");return[e=-1===e?t:e,e===t?0:4-e%4]}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},{}],2:[function(e,t,n){},{}],3:[function(E,e,C){!function(e){!function(){"use strict";var s=E("base64-js"),o=E("ieee754");C.Buffer=f,C.SlowBuffer=function(e){+e!=e&&(e=0);return f.alloc(+e)},C.INSPECT_MAX_BYTES=50;var t=2147483647;function i(e){if(t<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return e.__proto__=f.prototype,e}function f(e,t,n){if("number"!=typeof e)return r(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}function r(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!f.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|d(e,t),r=i(n),t=r.write(e,t);t!==n&&(r=r.slice(0,t));return r}(e,t);if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(P(e,ArrayBuffer)||e&&P(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');n=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n);return n.__proto__=f.prototype,n}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return f.from(r,t,n);r=function(e){if(f.isBuffer(e)){var t=0|c(e.length),n=i(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}if(void 0!==e.length)return"number"!=typeof e.length||S(e.length)?i(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return f.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return a(e),i(e<0?0:0|c(e))}function u(e){for(var t=e.length<0?0:0|c(e.length),n=i(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function c(e){if(t<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|e}function d(e,t){if(f.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||P(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return O(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return A(e).length;default:if(i)return r?-1:O(e).length;t=(""+t).toLowerCase(),i=!0}}function n(e,t,n){var r,i,o,a=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0);(!n||n<0||r<n)&&(n=r);for(var i="",o=t;o<n;++o)i+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[o]);return i}(this,t,n);case"utf8":case"utf-8":return m(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,t,n);case"base64":return r=this,o=n,0===(i=t)&&o===r.length?s.fromByteArray(r):s.fromByteArray(r.slice(i,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(this,t,n);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function h(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function p(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),(n=(n=S(n=+n)?i?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=f.from(t,r)),f.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var o=1,a=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a/=o=2,s/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i)for(var u=-1,c=n;c<a;c++)if(l(e,c)===l(t,-1===u?0:c-u)){if(c-(u=-1===u?c:u)+1===s)return u*o}else-1!==u&&(c-=c-u),u=-1;else for(c=n=a<n+s?a-s:n;0<=c;c--){for(var f=!0,d=0;d<s;d++)if(l(e,c+d)!==l(t,d)){f=!1;break}if(f)return c}return-1}function g(e,t,n,r){return T(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function v(e,t,n,r){return T(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,r=r%256,i.push(r),i.push(n);return i}(t,e.length-n),e,n,r)}function m(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,l,u=e[i],c=null,f=239<u?4:223<u?3:191<u?2:1;if(i+f<=n)switch(f){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[i+1]))&&127<(l=(31&u)<<6|63&o)&&(c=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&2047<(l=(15&u)<<12|(63&o)<<6|63&a)&&(l<55296||57343<l)&&(c=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,f=1):65535<c&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(e){var t=e.length;if(t<=b)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=b));return n}(r)}C.kMaxLength=t,(f.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192,f.from=r,f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,f.alloc=function(e,t,n){return t=t,n=n,a(e=e),!(e<=0)&&void 0!==t?"string"==typeof n?i(e).fill(t,n):i(e).fill(t):i(e)},f.allocUnsafe=l,f.allocUnsafeSlow=l,f.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==f.prototype},f.compare=function(e,t){if(P(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),P(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(e)||!f.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return f.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var n=f.allocUnsafe(t),r=0,i=0;i<e.length;++i){var o=e[i];if(P(o,Uint8Array)&&(o=f.from(o)),!f.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},f.byteLength=d,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},f.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},f.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},f.prototype.toLocaleString=f.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?m(this,0,e):n.apply(this,arguments)},f.prototype.equals=function(e){if(!f.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===f.compare(this,e)},f.prototype.inspect=function(){var e="",t=C.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},f.prototype.compare=function(e,t,n,r,i){if(P(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),(t=void 0===t?0:t)<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),l=this.slice(r,i),u=e.slice(t,n),c=0;c<s;++c)if(l[c]!==u[c]){o=l[c],a=u[c];break}return o<a?-1:a<o?1:0},f.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},f.prototype.indexOf=function(e,t,n){return p(this,e,t,n,!0)},f.prototype.lastIndexOf=function(e,t,n){return p(this,e,t,n,!1)},f.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,a,s,l=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var i=e.length-n;(!r||i<(r=Number(r)))&&(r=i),(i=t.length)/2<r&&(r=i/2);for(var o=0;o<r;++o){var a=parseInt(t.substr(2*o,2),16);if(S(a))return o;e[n+o]=a}return o}(this,e,t,n);case"utf8":case"utf-8":return a=t,s=n,T(O(e,(o=this).length-a),o,a,s);case"ascii":return g(this,e,t,n);case"latin1":case"binary":return g(this,e,t,n);case"base64":return o=this,a=t,s=n,T(A(e),o,a,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,e,t,n);default:if(l)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),l=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function x(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function _(e,t,n,r,i,o){if(!f.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function w(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(e,t,n,r,i){return t=+t,n>>>=0,i||w(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,i){return t=+t,n>>>=0,i||w(e,0,n,8),o.write(e,t,n,r,52,8),n+8}f.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e);t=this.subarray(e,t);return t.__proto__=f.prototype,t},f.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},f.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},f.prototype.readUInt8=function(e,t){return e>>>=0,t||x(e,1,this.length),this[e]},f.prototype.readUInt16LE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]|this[e+1]<<8},f.prototype.readUInt16BE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]<<8|this[e+1]},f.prototype.readUInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},f.prototype.readUInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},f.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},f.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},f.prototype.readInt8=function(e,t){return e>>>=0,t||x(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},f.prototype.readInt16LE=function(e,t){e>>>=0,t||x(e,2,this.length);e=this[e]|this[e+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(e,t){e>>>=0,t||x(e,2,this.length);e=this[e+1]|this[e]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},f.prototype.readInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},f.prototype.readFloatLE=function(e,t){return e>>>=0,t||x(e,4,this.length),o.read(this,e,!0,23,4)},f.prototype.readFloatBE=function(e,t){return e>>>=0,t||x(e,4,this.length),o.read(this,e,!1,23,4)},f.prototype.readDoubleLE=function(e,t){return e>>>=0,t||x(e,8,this.length),o.read(this,e,!0,52,8)},f.prototype.readDoubleBE=function(e,t){return e>>>=0,t||x(e,8,this.length),o.read(this,e,!1,52,8)},f.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||_(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},f.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||_(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},f.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,1,255,0),this[t]=255&e,t+1},f.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},f.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeIntLE=function(e,t,n,r){e=+e,t>>>=0,r||_(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=0,o=1,a=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},f.prototype.writeIntBE=function(e,t,n,r){e=+e,t>>>=0,r||_(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=n-1,o=1,a=0;for(this[t+i]=255&e;0<=--i&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},f.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},f.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},f.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||_(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeFloatLE=function(e,t,n){return M(this,e,t,!0,n)},f.prototype.writeFloatBE=function(e,t,n){return M(this,e,t,!1,n)},f.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},f.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},f.prototype.copy=function(e,t,n,r){if(!f.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var i=(r=e.length-t<r-n?e.length-t+n:r)-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var o=i-1;0<=o;--o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},f.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!f.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var i;1===e.length&&(i=e.charCodeAt(0),("utf8"===r&&i<128||"latin1"===r)&&(e=i))}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(o=t;o<n;++o)this[o]=e;else{var a=f.isBuffer(e)?e:f.from(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var k=/[^+/0-9A-Za-z-_]/g;function O(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if(55295<(n=e.charCodeAt(a))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(a+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,n<128){if(--t<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function A(e){return s.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(k,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function T(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function P(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function S(e){return e!=e}}.call(this)}.call(this,E("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,f=n?i-1:0,d=n?-1:1,n=e[t+f];for(f+=d,o=n&(1<<-c)-1,n>>=-c,c+=s;0<c;o=256*o+e[t+f],f+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;0<c;a=256*a+e[t+f],f+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(n?-1:1);a+=Math.pow(2,r),o-=u}return(n?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,s,l=8*o-i-1,u=(1<<l)-1,c=u>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,h=r?1:-1,o=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-a))<1&&(a--,r*=2),2<=(t+=1<=a+c?f/r:f*Math.pow(2,1-c))*r&&(a++,r/=2),u<=a+c?(s=0,a=u):1<=a+c?(s=(t*r-1)*Math.pow(2,i),a+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,i),a=0));8<=i;e[n+d]=255&s,d+=h,s/=256,i-=8);for(a=a<<i|s,l+=i;0<l;e[n+d]=255&a,d+=h,a/=256,l-=8);e[n+d-h]|=128*o}},{}],5:[function(e,t,n){var r,i,t=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var l,u=[],c=!1,f=-1;function d(){c&&l&&(c=!1,l.length?u=l.concat(u):f=-1,u.length&&h())}function h(){if(!c){var e=s(d);c=!0;for(var t=u.length;t;){for(l=u,u=[];++f<t;)l&&l[f].run();f=-1,t=u.length}l=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function y(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||c||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=y,t.addListener=y,t.once=y,t.off=y,t.removeListener=y,t.removeAllListeners=y,t.emit=y,t.prependListener=y,t.prependOnceListener=y,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],6:[function(e,t,n){t.exports={alpha_shape:e("alpha-shape"),convex_hull:e("convex-hull"),delaunay_triangulate:e("delaunay-triangulate"),gl_cone3d:e("gl-cone3d"),gl_error3d:e("gl-error3d"),gl_heatmap2d:e("gl-heatmap2d"),gl_line3d:e("gl-line3d"),gl_mesh3d:e("gl-mesh3d"),gl_plot2d:e("gl-plot2d"),gl_plot3d:e("gl-plot3d"),gl_pointcloud2d:e("gl-pointcloud2d"),gl_scatter3d:e("gl-scatter3d"),gl_select_box:e("gl-select-box"),gl_spikes2d:e("gl-spikes2d"),gl_streamtube3d:e("gl-streamtube3d"),gl_surface3d:e("gl-surface3d"),ndarray:e("ndarray"),ndarray_linear_interpolate:e("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(e,t,n){"use strict";t.exports=function(e){var t=(e=e||{}).eye||[0,0,1],n=e.center||[0,0,0],r=e.up||[0,1,0],i=e.distanceLimits||[0,1/0],o=e.mode||"turntable",a=l(),s=u(),e=c();return a.setDistanceLimits(i[0],i[1]),a.lookAt(0,t,n,r),s.setDistanceLimits(i[0],i[1]),s.lookAt(0,t,n,r),e.setDistanceLimits(i[0],i[1]),e.lookAt(0,t,n,r),new f({turntable:a,orbit:s,matrix:e},o)};var l=e("turntable-camera-controller"),u=e("orbit-camera-controller"),c=e("matrix-camera-controller");function f(t,e){this._controllerNames=Object.keys(t),this._controllerList=this._controllerNames.map(function(e){return t[e]}),this._mode=e,this._active=t[e],this._active||(this._mode="turntable",this._active=t.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}e=f.prototype;e.flush=function(e){for(var t=this._controllerList,n=0;n<t.length;++n)t[n].flush(e)},e.idle=function(e){for(var t=this._controllerList,n=0;n<t.length;++n)t[n].idle(e)},e.lookAt=function(e,t,n,r){for(var i=this._controllerList,o=0;o<i.length;++o)i[o].lookAt(e,t,n,r)},e.rotate=function(e,t,n,r){for(var i=this._controllerList,o=0;o<i.length;++o)i[o].rotate(e,t,n,r)},e.pan=function(e,t,n,r){for(var i=this._controllerList,o=0;o<i.length;++o)i[o].pan(e,t,n,r)},e.translate=function(e,t,n,r){for(var i=this._controllerList,o=0;o<i.length;++o)i[o].translate(e,t,n,r)},e.setMatrix=function(e,t){for(var n=this._controllerList,r=0;r<n.length;++r)n[r].setMatrix(e,t)},e.setDistanceLimits=function(e,t){for(var n=this._controllerList,r=0;r<n.length;++r)n[r].setDistanceLimits(e,t)},e.setDistance=function(e,t){for(var n=this._controllerList,r=0;r<n.length;++r)n[r].setDistance(e,t)},e.recalcMatrix=function(e){this._active.recalcMatrix(e)},e.getDistance=function(e){return this._active.getDistance(e)},e.getDistanceLimits=function(e){return this._active.getDistanceLimits(e)},e.lastT=function(){return this._active.lastT()},e.setMode=function(e){var t,n,r;e!==this._mode&&((r=this._controllerNames.indexOf(e))<0||(t=this._active,n=this._controllerList[r],r=Math.max(t.lastT(),n.lastT()),t.recalcMatrix(r),n.setMatrix(r,t.computedMatrix),this._active=n,this._mode=e,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius))},e.getMode=function(){return this._mode}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(e,t,n){"use strict";var r="undefined"==typeof WeakMap?e("weak-map"):WeakMap,i=e("gl-buffer"),o=e("gl-vao"),a=new r;t.exports=function(e){var t=a.get(e),n=t&&(t._triangleBuffer.handle||t._triangleBuffer.buffer);n&&e.isBuffer(n)||(n=i(e,new Float32Array([-1,-1,-1,4,4,-1])),(t=o(e,[{buffer:n,type:e.FLOAT,size:2}]))._triangleBuffer=n,a.set(e,t)),t.bind(),e.drawArrays(e.TRIANGLES,0,3),t.unbind()}},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(e,t,n){var a=e("pad-left");t.exports=function(e,r,i){r="number"==typeof r?r:1,i=i||": ";var e=e.split(/\r?\n/),o=String(e.length+r-1).length;return e.map(function(e,t){var n=t+r,t=String(n).length;return a(n,o-t)+i+e}).join("\n")}},{"pad-left":264}],10:[function(e,t,n){"use strict";t.exports=function(e){var t=e.length;if(0===t)return[];if(1===t)return[0];for(var n=e[0].length,r=[e[0]],i=[0],o=1;o<t;++o)if(r.push(e[o]),function(e,t){for(var n=new Array(t+1),r=0;r<e.length;++r)n[r]=e[r];for(r=0;r<=e.length;++r){for(var i=e.length;i<=t;++i){for(var o=new Array(t),a=0;a<t;++a)o[a]=Math.pow(i+1-r,a);n[i]=o}if(s.apply(void 0,n))return!0}return!1}(r,n)){if(i.push(o),i.length===n+1)return i}else r.pop();return i};var s=e("robust-orientation")},{"robust-orientation":284}],11:[function(e,t,n){"use strict";t.exports=function(r,i){return o(i).filter(function(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=i[e[n]];return a(t)*r<1})};var o=e("delaunay-triangulate"),a=e("circumradius")},{circumradius:49,"delaunay-triangulate":63}],12:[function(e,t,n){t.exports=function(e,t){return i(r(e,t))};var r=e("alpha-complex"),i=e("simplicial-complex-boundary")},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(e,t,n){t.exports=function(e){return atob(e)}},{}],14:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n=t.length,r=new Array(n+1),i=0;i<n;++i){for(var o=new Array(n+1),a=0;a<=n;++a)o[a]=e[a][i];r[i]=o}r[n]=new Array(n+1);for(i=0;i<=n;++i)r[n][i]=1;for(var s=new Array(n+1),i=0;i<n;++i)s[i]=t[i];s[n]=1;var l=f(r,s),u=d(l[n+1]);0===u&&(u=1);for(var c=new Array(n+1),i=0;i<=n;++i)c[i]=d(l[i])/u;return c};var f=e("robust-linear-solve");function d(e){for(var t=0,n=0;n<e.length;++n)t+=e[n];return t}},{"robust-linear-solve":283}],15:[function(e,t,n){"use strict";var r=e("./lib/rationalize");t.exports=function(e,t){return r(e[0].mul(t[1]).add(t[0].mul(e[1])),e[1].mul(t[1]))}},{"./lib/rationalize":25}],16:[function(e,t,n){"use strict";t.exports=function(e,t){return e[0].mul(t[1]).cmp(t[0].mul(e[1]))}},{}],17:[function(e,t,n){"use strict";var r=e("./lib/rationalize");t.exports=function(e,t){return r(e[0].mul(t[1]),e[1].mul(t[0]))}},{"./lib/rationalize":25}],18:[function(e,t,n){"use strict";var a=e("./is-rat"),s=e("./lib/is-bn"),l=e("./lib/num-to-bn"),u=e("./lib/str-to-bn"),c=e("./lib/rationalize"),f=e("./div");t.exports=function e(t,n){if(a(t))return n?f(t,e(n)):[t[0].clone(),t[1].clone()];var r=0;var i,o;if(s(t))i=t.clone();else if("string"==typeof t)i=u(t);else{if(0===t)return[l(0),l(1)];if(t===Math.floor(t))i=l(t);else{for(;t!==Math.floor(t);)t*=Math.pow(2,256),r-=256;i=l(t)}}if(a(n))i.mul(n[1]),o=n[0].clone();else if(s(n))o=n.clone();else if("string"==typeof n)o=u(n);else if(n)if(n===Math.floor(n))o=l(n);else{for(;n!==Math.floor(n);)n*=Math.pow(2,256),r+=256;o=l(n)}else o=l(1);0<r?i=i.ushln(r):r<0&&(o=o.ushln(-r));return c(i,o)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(e,t,n){"use strict";var r=e("./lib/is-bn");t.exports=function(e){return Array.isArray(e)&&2===e.length&&r(e[0])&&r(e[1])}},{"./lib/is-bn":23}],20:[function(e,t,n){"use strict";var r=e("bn.js");t.exports=function(e){return e.cmp(new r(0))}},{"bn.js":33}],21:[function(e,t,n){"use strict";var a=e("./bn-sign");t.exports=function(e){var t=e.length,n=e.words,r=0;if(1===t)r=n[0];else if(2===t)r=n[0]+67108864*n[1];else for(var i=0;i<t;i++){var o=n[i];r+=o*Math.pow(67108864,i)}return a(e)*r}},{"./bn-sign":20}],22:[function(e,t,n){"use strict";var r=e("double-bits"),i=e("bit-twiddle").countTrailingZeros;t.exports=function(e){var t=i(r.lo(e));if(t<32)return t;e=i(r.hi(e));if(20<e)return 52;return e+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(e,t,n){"use strict";e("bn.js");t.exports=function(e){return e&&"object"==typeof e&&Boolean(e.words)}},{"bn.js":33}],24:[function(e,t,n){"use strict";var r=e("bn.js"),i=e("double-bits");t.exports=function(e){var t=i.exponent(e);return t<52?new r(e):new r(e*Math.pow(2,52-t)).ushln(t-52)}},{"bn.js":33,"double-bits":64}],25:[function(e,t,n){"use strict";var i=e("./num-to-bn"),o=e("./bn-sign");t.exports=function(e,t){var n=o(e),r=o(t);if(0===n)return[i(0),i(1)];if(0===r)return[i(0),i(0)];r<0&&(e=e.neg(),t=t.neg());r=e.gcd(t);if(r.cmpn(1))return[e.div(r),t.div(r)];return[e,t]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(e,t,n){"use strict";var r=e("bn.js");t.exports=function(e){return new r(e)}},{"bn.js":33}],27:[function(e,t,n){"use strict";var r=e("./lib/rationalize");t.exports=function(e,t){return r(e[0].mul(t[0]),e[1].mul(t[1]))}},{"./lib/rationalize":25}],28:[function(e,t,n){"use strict";var r=e("./lib/bn-sign");t.exports=function(e){return r(e[0])*r(e[1])}},{"./lib/bn-sign":20}],29:[function(e,t,n){"use strict";var r=e("./lib/rationalize");t.exports=function(e,t){return r(e[0].mul(t[1]).sub(e[1].mul(t[0])),e[1].mul(t[1]))}},{"./lib/rationalize":25}],30:[function(e,t,n){"use strict";var a=e("./lib/bn-to-num"),s=e("./lib/ctz");t.exports=function(e){var t=e[0],n=e[1];if(0===t.cmpn(0))return 0;var r=t.abs().divmod(n.abs()),e=r.div,e=a(e),r=r.mod,t=t.negative!==n.negative?-1:1;if(0===r.cmpn(0))return t*e;{if(e){var i=s(e)+4,o=a(r.ushln(i).divRound(n));return t*(e+o*Math.pow(2,-i))}i=n.bitLength()-r.bitLength()+53,o=a(r.ushln(i).divRound(n));return i<1023?t*o*Math.pow(2,-i):(o*=Math.pow(2,-1023),t*o*Math.pow(2,1023-i))}}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(e,t,n){"use strict";function o(e,t,n,r,i){for(var o=i+1;r<=i;){var a=r+i>>>1,s=e[a];0<=(void 0!==n?n(s,t):s-t)?i=(o=a)-1:r=1+a}return o}function a(e,t,n,r,i){for(var o=i+1;r<=i;){var a=r+i>>>1,s=e[a];0<(void 0!==n?n(s,t):s-t)?i=(o=a)-1:r=1+a}return o}function s(e,t,n,r,i){for(var o=r-1;r<=i;){var a=r+i>>>1,s=e[a];(void 0!==n?n(s,t):s-t)<0?r=1+(o=a):i=a-1}return o}function l(e,t,n,r,i){for(var o=r-1;r<=i;){var a=r+i>>>1,s=e[a];(void 0!==n?n(s,t):s-t)<=0?r=1+(o=a):i=a-1}return o}function u(e,t,n,r,i){for(;r<=i;){var o=r+i>>>1,a=e[o],a=void 0!==n?n(a,t):a-t;if(0===a)return o;a<=0?r=1+o:i=o-1}return-1}function c(e,t,n,r,i,o){return"function"==typeof n?o(e,t,n,void 0===r?0:0|r,void 0===i?e.length-1:0|i):o(e,t,void 0,void 0===n?0:0|n,void 0===r?e.length-1:0|r)}t.exports={ge:function(e,t,n,r,i){return c(e,t,n,r,i,o)},gt:function(e,t,n,r,i){return c(e,t,n,r,i,a)},lt:function(e,t,n,r,i){return c(e,t,n,r,i,s)},le:function(e,t,n,r,i){return c(e,t,n,r,i,l)},eq:function(e,t,n,r,i){return c(e,t,n,r,i,u)}}},{}],32:[function(e,t,n){"use strict";function r(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&--t,t}n.INT_BITS=32,n.INT_MAX=2147483647,n.INT_MIN=-1<<31,n.sign=function(e){return(0<e)-(e<0)},n.abs=function(e){var t=e>>31;return(e^t)-t},n.min=function(e,t){return t^(e^t)&-(e<t)},n.max=function(e,t){return e^(e^t)&-(e<t)},n.isPow2=function(e){return!(e&e-1||!e)},n.log2=function(e){var t,n=(65535<e)<<4;return n|=t=(255<(e>>>=n))<<3,n|=t=(15<(e>>>=t))<<2,(n|=t=(3<(e>>>=t))<<1)|(e>>>=t)>>1},n.log10=function(e){return 1e9<=e?9:1e8<=e?8:1e7<=e?7:1e6<=e?6:1e5<=e?5:1e4<=e?4:1e3<=e?3:100<=e?2:10<=e?1:0},n.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},n.countTrailingZeros=r,n.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},n.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},n.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var i=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(i),n.reverse=function(e){return i[255&e]<<24|i[e>>>8&255]<<16|i[e>>>16&255]<<8|i[e>>>24&255]},n.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},n.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},n.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},n.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},n.nextCombination=function(e){var t=e|e-1;return 1+t|(~t&-~t)-1>>>r(e)+1}},{}],33:[function(j,e,t){!function(e,t){"use strict";function y(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function g(e,t,n){if(g.isBN(e))return e;this.negative=0,this.words=null,this.length=0,(this.red=null)!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var r;"object"==typeof e?e.exports=g:t.BN=g,(g.BN=g).wordSize=26;try{r=("undefined"!=typeof window&&void 0!==window.Buffer?window:j("buffer")).Buffer}catch(e){}function i(e,t){t=e.charCodeAt(t);return 65<=t&&t<=70?t-55:97<=t&&t<=102?t-87:t-48&15}function s(e,t,n){var r=i(e,n);return t<=n-1&&(r|=i(e,n-1)<<4),r}function f(e,t,n,r){for(var i=0,o=Math.min(e.length,n),a=t;a<o;a++){var s=e.charCodeAt(a)-48;i*=r,i+=49<=s?s-49+10:17<=s?s-17+10:s}return i}g.isBN=function(e){return e instanceof g||null!==e&&"object"==typeof e&&e.constructor.wordSize===g.wordSize&&Array.isArray(e.words)},g.max=function(e,t){return 0<e.cmp(t)?e:t},g.min=function(e,t){return e.cmp(t)<0?e:t},g.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);y((t="hex"===t?16:t)===(0|t)&&2<=t&&t<=36);var r=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<e.length&&(16===t?this._parseHex(e,r,n):(this._parseBase(e,t,r),"le"===n&&this._initArray(this.toArray(),t,n)))},g.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(y(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},g.prototype._initArray=function(e,t,n){if(y("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var r,i,o=0;o<this.length;o++)this.words[o]=0;var a=0;if("be"===n)for(o=e.length-1,r=0;0<=o;o-=3)i=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[r]|=i<<a&67108863,this.words[r+1]=i>>>26-a&67108863,26<=(a+=24)&&(a-=26,r++);else if("le"===n)for(r=o=0;o<e.length;o+=3)i=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[r]|=i<<a&67108863,this.words[r+1]=i>>>26-a&67108863,26<=(a+=24)&&(a-=26,r++);return this.strip()},g.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,a=0;if("be"===n)for(r=e.length-1;t<=r;r-=2)i=s(e,t,r)<<o,this.words[a]|=67108863&i,18<=o?(o-=18,this.words[a+=1]|=i>>>26):o+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)i=s(e,t,r)<<o,this.words[a]|=67108863&i,18<=o?(o-=18,this.words[a+=1]|=i>>>26):o+=8;this.strip()},g.prototype._parseBase=function(e,t,n){this.words=[0];for(var r=0,i=this.length=1;i<=67108863;i*=t)r++;for(var i=i/t|0,o=e.length-n,a=o%--r,s=Math.min(o,o-a)+n,l=0,u=n;u<s;u+=r)l=f(e,u,u+r,t),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!=a){for(var c=1,l=f(e,u,e.length,t),u=0;u<a;u++)c*=t;this.imuln(c),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},g.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},g.prototype.clone=function(){var e=new g(null);return this.copy(e),e},g.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},g.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},g.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},g.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function o(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0,r=(n.length=r)-1|0,i=(a=(0|e.words[0])*(0|t.words[0]))/67108864|0;n.words[0]=67108863&a;for(var o=1;o<r;o++){for(var a,s=i>>>26,l=67108863&i,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++)s+=(a=(0|e.words[o-c|0])*(0|t.words[c])+l)/67108864|0,l=67108863&a;n.words[o]=0|l,i=0|s}return 0!==i?n.words[o]=0|i:n.length--,n.strip()}g.prototype.toString=function(e,t){if(t=0|t||1,16===(e=e||10)||"hex"===e){s="";for(var n=0,r=0,i=0;i<this.length;i++){var o=this.words[i],a=(16777215&(o<<n|r)).toString(16),s=0!==(r=o>>>24-n&16777215)||i!==this.length-1?d[6-a.length]+a+s:a+s;26<=(n+=2)&&(n-=26,i--)}for(0!==r&&(s=r.toString(16)+s);s.length%t!=0;)s="0"+s;return s=0!==this.negative?"-"+s:s}if(e===(0|e)&&2<=e&&e<=36){var l=h[e],u=p[e];for(s="",(c=this.clone()).negative=0;!c.isZero();){var c,f=c.modn(u).toString(e);s=(c=c.idivn(u)).isZero()?f+s:d[l-f.length]+f+s}for(this.isZero()&&(s="0"+s);s.length%t!=0;)s="0"+s;return s=0!==this.negative?"-"+s:s}y(!1,"Base should be between 2 and 36")},g.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:2<this.length&&y(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},g.prototype.toJSON=function(){return this.toString(16)},g.prototype.toBuffer=function(e,t){return y(void 0!==r),this.toArrayLike(r,e,t)},g.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},g.prototype.toArrayLike=function(e,t,n){var r=this.byteLength(),i=n||Math.max(1,r);y(r<=i,"byte array longer than desired length"),y(0<i,"Requested array length <= 0"),this.strip();var o,a,t="le"===t,s=new e(i),l=this.clone();if(t){for(a=0;!l.isZero();a++)o=l.andln(255),l.iushrn(8),s[a]=o;for(;a<i;a++)s[a]=0}else{for(a=0;a<i-r;a++)s[a]=0;for(a=0;!l.isZero();a++)o=l.andln(255),l.iushrn(8),s[i-a-1]=o}return s},Math.clz32?g.prototype._countBits=function(e){return 32-Math.clz32(e)}:g.prototype._countBits=function(e){var t=e,e=0;return 4096<=t&&(e+=13,t>>>=13),64<=t&&(e+=7,t>>>=7),8<=t&&(e+=4,t>>>=4),2<=t&&(e+=2,t>>>=2),e+t},g.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,e=0;return 0==(8191&t)&&(e+=13,t>>>=13),0==(127&t)&&(e+=7,t>>>=7),0==(15&t)&&(e+=4,t>>>=4),0==(3&t)&&(e+=2,t>>>=2),0==(1&t)&&e++,e},g.prototype.bitLength=function(){var e=this.words[this.length-1],e=this._countBits(e);return 26*(this.length-1)+e},g.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},g.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},g.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},g.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},g.prototype.isNeg=function(){return 0!==this.negative},g.prototype.neg=function(){return this.clone().ineg()},g.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},g.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},g.prototype.ior=function(e){return y(0==(this.negative|e.negative)),this.iuor(e)},g.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},g.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},g.prototype.iuand=function(e){for(var t=this.length>e.length?e:this,n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},g.prototype.iand=function(e){return y(0==(this.negative|e.negative)),this.iuand(e)},g.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},g.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},g.prototype.iuxor=function(e){for(var t,n=this.length>e.length?(t=this,e):(t=e,this),r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},g.prototype.ixor=function(e){return y(0==(this.negative|e.negative)),this.iuxor(e)},g.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},g.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},g.prototype.inotn=function(e){y("number"==typeof e&&0<=e);var t=0|Math.ceil(e/26),e=e%26;this._expand(t),0<e&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return 0<e&&(this.words[n]=~this.words[n]&67108863>>26-e),this.strip()},g.prototype.notn=function(e){return this.clone().inotn(e)},g.prototype.setn=function(e,t){y("number"==typeof e&&0<=e);var n=e/26|0,e=e%26;return this._expand(1+n),this.words[n]=t?this.words[n]|1<<e:this.words[n]&~(1<<e),this.strip()},g.prototype.iadd=function(e){var t,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();for(var r=this.length>e.length?(n=this,e):(n=e,this),i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},g.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},g.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r=this.cmp(e);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;for(var i=0<r?(n=this,e):(n=e,this),o=0,a=0;a<i.length;a++)o=(t=(0|n.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<n.length;a++)o=(t=(0|n.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this.strip()},g.prototype.sub=function(e){return this.clone().isub(e)};var a=function(e,t,n){var r=e.words,i=t.words,o=n.words,a=0|r[0],s=8191&a,l=a>>>13,u=0|r[1],c=8191&u,f=u>>>13,d=0|r[2],h=8191&d,p=d>>>13,y=0|r[3],g=8191&y,v=y>>>13,m=0|r[4],b=8191&m,x=m>>>13,_=0|r[5],w=8191&_,M=_>>>13,j=0|r[6],k=8191&j,O=j>>>13,A=0|r[7],T=8191&A,P=A>>>13,S=0|r[8],E=8191&S,C=S>>>13,L=0|r[9],R=8191&L,I=L>>>13,z=0|i[0],D=8191&z,N=z>>>13,F=0|i[1],B=8191&F,U=F>>>13,q=0|i[2],H=8191&q,V=q>>>13,G=0|i[3],W=8191&G,Y=G>>>13,X=0|i[4],Z=8191&X,$=X>>>13,K=0|i[5],Q=8191&K,J=K>>>13,ee=0|i[6],a=8191&ee,u=ee>>>13,d=0|i[7],y=8191&d,m=d>>>13,_=0|i[8],j=8191&_,A=_>>>13,S=0|i[9],r=8191&S,L=S>>>13;n.negative=e.negative^t.negative,n.length=19;F=(0+Math.imul(s,D)|0)+((8191&(z=(z=Math.imul(s,N))+Math.imul(l,D)|0))<<13)|0,G=((q=Math.imul(l,N))+(z>>>13)|0)+(F>>>26)|0;F&=67108863,X=Math.imul(c,D),z=(z=Math.imul(c,N))+Math.imul(f,D)|0,q=Math.imul(f,N);K=(G+(X+Math.imul(s,B)|0)|0)+((8191&(z=(z=z+Math.imul(s,U)|0)+Math.imul(l,B)|0))<<13)|0;G=((q=q+Math.imul(l,U)|0)+(z>>>13)|0)+(K>>>26)|0,K&=67108863,X=Math.imul(h,D),z=(z=Math.imul(h,N))+Math.imul(p,D)|0,q=Math.imul(p,N),X=X+Math.imul(c,B)|0,z=(z=z+Math.imul(c,U)|0)+Math.imul(f,B)|0,q=q+Math.imul(f,U)|0;ee=(G+(X+Math.imul(s,H)|0)|0)+((8191&(z=(z=z+Math.imul(s,V)|0)+Math.imul(l,H)|0))<<13)|0;G=((q=q+Math.imul(l,V)|0)+(z>>>13)|0)+(ee>>>26)|0,ee&=67108863,X=Math.imul(g,D),z=(z=Math.imul(g,N))+Math.imul(v,D)|0,q=Math.imul(v,N),X=X+Math.imul(h,B)|0,z=(z=z+Math.imul(h,U)|0)+Math.imul(p,B)|0,q=q+Math.imul(p,U)|0,X=X+Math.imul(c,H)|0,z=(z=z+Math.imul(c,V)|0)+Math.imul(f,H)|0,q=q+Math.imul(f,V)|0;d=(G+(X+Math.imul(s,W)|0)|0)+((8191&(z=(z=z+Math.imul(s,Y)|0)+Math.imul(l,W)|0))<<13)|0;G=((q=q+Math.imul(l,Y)|0)+(z>>>13)|0)+(d>>>26)|0,d&=67108863,X=Math.imul(b,D),z=(z=Math.imul(b,N))+Math.imul(x,D)|0,q=Math.imul(x,N),X=X+Math.imul(g,B)|0,z=(z=z+Math.imul(g,U)|0)+Math.imul(v,B)|0,q=q+Math.imul(v,U)|0,X=X+Math.imul(h,H)|0,z=(z=z+Math.imul(h,V)|0)+Math.imul(p,H)|0,q=q+Math.imul(p,V)|0,X=X+Math.imul(c,W)|0,z=(z=z+Math.imul(c,Y)|0)+Math.imul(f,W)|0,q=q+Math.imul(f,Y)|0;_=(G+(X+Math.imul(s,Z)|0)|0)+((8191&(z=(z=z+Math.imul(s,$)|0)+Math.imul(l,Z)|0))<<13)|0;G=((q=q+Math.imul(l,$)|0)+(z>>>13)|0)+(_>>>26)|0,_&=67108863,X=Math.imul(w,D),z=(z=Math.imul(w,N))+Math.imul(M,D)|0,q=Math.imul(M,N),X=X+Math.imul(b,B)|0,z=(z=z+Math.imul(b,U)|0)+Math.imul(x,B)|0,q=q+Math.imul(x,U)|0,X=X+Math.imul(g,H)|0,z=(z=z+Math.imul(g,V)|0)+Math.imul(v,H)|0,q=q+Math.imul(v,V)|0,X=X+Math.imul(h,W)|0,z=(z=z+Math.imul(h,Y)|0)+Math.imul(p,W)|0,q=q+Math.imul(p,Y)|0,X=X+Math.imul(c,Z)|0,z=(z=z+Math.imul(c,$)|0)+Math.imul(f,Z)|0,q=q+Math.imul(f,$)|0;i=(G+(X+Math.imul(s,Q)|0)|0)+((8191&(z=(z=z+Math.imul(s,J)|0)+Math.imul(l,Q)|0))<<13)|0;G=((q=q+Math.imul(l,J)|0)+(z>>>13)|0)+(i>>>26)|0,i&=67108863,X=Math.imul(k,D),z=(z=Math.imul(k,N))+Math.imul(O,D)|0,q=Math.imul(O,N),X=X+Math.imul(w,B)|0,z=(z=z+Math.imul(w,U)|0)+Math.imul(M,B)|0,q=q+Math.imul(M,U)|0,X=X+Math.imul(b,H)|0,z=(z=z+Math.imul(b,V)|0)+Math.imul(x,H)|0,q=q+Math.imul(x,V)|0,X=X+Math.imul(g,W)|0,z=(z=z+Math.imul(g,Y)|0)+Math.imul(v,W)|0,q=q+Math.imul(v,Y)|0,X=X+Math.imul(h,Z)|0,z=(z=z+Math.imul(h,$)|0)+Math.imul(p,Z)|0,q=q+Math.imul(p,$)|0,X=X+Math.imul(c,Q)|0,z=(z=z+Math.imul(c,J)|0)+Math.imul(f,Q)|0,q=q+Math.imul(f,J)|0;S=(G+(X+Math.imul(s,a)|0)|0)+((8191&(z=(z=z+Math.imul(s,u)|0)+Math.imul(l,a)|0))<<13)|0;G=((q=q+Math.imul(l,u)|0)+(z>>>13)|0)+(S>>>26)|0,S&=67108863,X=Math.imul(T,D),z=(z=Math.imul(T,N))+Math.imul(P,D)|0,q=Math.imul(P,N),X=X+Math.imul(k,B)|0,z=(z=z+Math.imul(k,U)|0)+Math.imul(O,B)|0,q=q+Math.imul(O,U)|0,X=X+Math.imul(w,H)|0,z=(z=z+Math.imul(w,V)|0)+Math.imul(M,H)|0,q=q+Math.imul(M,V)|0,X=X+Math.imul(b,W)|0,z=(z=z+Math.imul(b,Y)|0)+Math.imul(x,W)|0,q=q+Math.imul(x,Y)|0,X=X+Math.imul(g,Z)|0,z=(z=z+Math.imul(g,$)|0)+Math.imul(v,Z)|0,q=q+Math.imul(v,$)|0,X=X+Math.imul(h,Q)|0,z=(z=z+Math.imul(h,J)|0)+Math.imul(p,Q)|0,q=q+Math.imul(p,J)|0,X=X+Math.imul(c,a)|0,z=(z=z+Math.imul(c,u)|0)+Math.imul(f,a)|0,q=q+Math.imul(f,u)|0;e=(G+(X+Math.imul(s,y)|0)|0)+((8191&(z=(z=z+Math.imul(s,m)|0)+Math.imul(l,y)|0))<<13)|0;G=((q=q+Math.imul(l,m)|0)+(z>>>13)|0)+(e>>>26)|0,e&=67108863,X=Math.imul(E,D),z=(z=Math.imul(E,N))+Math.imul(C,D)|0,q=Math.imul(C,N),X=X+Math.imul(T,B)|0,z=(z=z+Math.imul(T,U)|0)+Math.imul(P,B)|0,q=q+Math.imul(P,U)|0,X=X+Math.imul(k,H)|0,z=(z=z+Math.imul(k,V)|0)+Math.imul(O,H)|0,q=q+Math.imul(O,V)|0,X=X+Math.imul(w,W)|0,z=(z=z+Math.imul(w,Y)|0)+Math.imul(M,W)|0,q=q+Math.imul(M,Y)|0,X=X+Math.imul(b,Z)|0,z=(z=z+Math.imul(b,$)|0)+Math.imul(x,Z)|0,q=q+Math.imul(x,$)|0,X=X+Math.imul(g,Q)|0,z=(z=z+Math.imul(g,J)|0)+Math.imul(v,Q)|0,q=q+Math.imul(v,J)|0,X=X+Math.imul(h,a)|0,z=(z=z+Math.imul(h,u)|0)+Math.imul(p,a)|0,q=q+Math.imul(p,u)|0,X=X+Math.imul(c,y)|0,z=(z=z+Math.imul(c,m)|0)+Math.imul(f,y)|0,q=q+Math.imul(f,m)|0;t=(G+(X+Math.imul(s,j)|0)|0)+((8191&(z=(z=z+Math.imul(s,A)|0)+Math.imul(l,j)|0))<<13)|0;G=((q=q+Math.imul(l,A)|0)+(z>>>13)|0)+(t>>>26)|0,t&=67108863,X=Math.imul(R,D),z=(z=Math.imul(R,N))+Math.imul(I,D)|0,q=Math.imul(I,N),X=X+Math.imul(E,B)|0,z=(z=z+Math.imul(E,U)|0)+Math.imul(C,B)|0,q=q+Math.imul(C,U)|0,X=X+Math.imul(T,H)|0,z=(z=z+Math.imul(T,V)|0)+Math.imul(P,H)|0,q=q+Math.imul(P,V)|0,X=X+Math.imul(k,W)|0,z=(z=z+Math.imul(k,Y)|0)+Math.imul(O,W)|0,q=q+Math.imul(O,Y)|0,X=X+Math.imul(w,Z)|0,z=(z=z+Math.imul(w,$)|0)+Math.imul(M,Z)|0,q=q+Math.imul(M,$)|0,X=X+Math.imul(b,Q)|0,z=(z=z+Math.imul(b,J)|0)+Math.imul(x,Q)|0,q=q+Math.imul(x,J)|0,X=X+Math.imul(g,a)|0,z=(z=z+Math.imul(g,u)|0)+Math.imul(v,a)|0,q=q+Math.imul(v,u)|0,X=X+Math.imul(h,y)|0,z=(z=z+Math.imul(h,m)|0)+Math.imul(p,y)|0,q=q+Math.imul(p,m)|0,X=X+Math.imul(c,j)|0,z=(z=z+Math.imul(c,A)|0)+Math.imul(f,j)|0,q=q+Math.imul(f,A)|0;s=(G+(X+Math.imul(s,r)|0)|0)+((8191&(z=(z=z+Math.imul(s,L)|0)+Math.imul(l,r)|0))<<13)|0;G=((q=q+Math.imul(l,L)|0)+(z>>>13)|0)+(s>>>26)|0,s&=67108863,X=Math.imul(R,B),z=(z=Math.imul(R,U))+Math.imul(I,B)|0,q=Math.imul(I,U),X=X+Math.imul(E,H)|0,z=(z=z+Math.imul(E,V)|0)+Math.imul(C,H)|0,q=q+Math.imul(C,V)|0,X=X+Math.imul(T,W)|0,z=(z=z+Math.imul(T,Y)|0)+Math.imul(P,W)|0,q=q+Math.imul(P,Y)|0,X=X+Math.imul(k,Z)|0,z=(z=z+Math.imul(k,$)|0)+Math.imul(O,Z)|0,q=q+Math.imul(O,$)|0,X=X+Math.imul(w,Q)|0,z=(z=z+Math.imul(w,J)|0)+Math.imul(M,Q)|0,q=q+Math.imul(M,J)|0,X=X+Math.imul(b,a)|0,z=(z=z+Math.imul(b,u)|0)+Math.imul(x,a)|0,q=q+Math.imul(x,u)|0,X=X+Math.imul(g,y)|0,z=(z=z+Math.imul(g,m)|0)+Math.imul(v,y)|0,q=q+Math.imul(v,m)|0,X=X+Math.imul(h,j)|0,z=(z=z+Math.imul(h,A)|0)+Math.imul(p,j)|0,q=q+Math.imul(p,A)|0;c=(G+(X+Math.imul(c,r)|0)|0)+((8191&(z=(z=z+Math.imul(c,L)|0)+Math.imul(f,r)|0))<<13)|0;G=((q=q+Math.imul(f,L)|0)+(z>>>13)|0)+(c>>>26)|0,c&=67108863,X=Math.imul(R,H),z=(z=Math.imul(R,V))+Math.imul(I,H)|0,q=Math.imul(I,V),X=X+Math.imul(E,W)|0,z=(z=z+Math.imul(E,Y)|0)+Math.imul(C,W)|0,q=q+Math.imul(C,Y)|0,X=X+Math.imul(T,Z)|0,z=(z=z+Math.imul(T,$)|0)+Math.imul(P,Z)|0,q=q+Math.imul(P,$)|0,X=X+Math.imul(k,Q)|0,z=(z=z+Math.imul(k,J)|0)+Math.imul(O,Q)|0,q=q+Math.imul(O,J)|0,X=X+Math.imul(w,a)|0,z=(z=z+Math.imul(w,u)|0)+Math.imul(M,a)|0,q=q+Math.imul(M,u)|0,X=X+Math.imul(b,y)|0,z=(z=z+Math.imul(b,m)|0)+Math.imul(x,y)|0,q=q+Math.imul(x,m)|0,X=X+Math.imul(g,j)|0,z=(z=z+Math.imul(g,A)|0)+Math.imul(v,j)|0,q=q+Math.imul(v,A)|0;h=(G+(X+Math.imul(h,r)|0)|0)+((8191&(z=(z=z+Math.imul(h,L)|0)+Math.imul(p,r)|0))<<13)|0;G=((q=q+Math.imul(p,L)|0)+(z>>>13)|0)+(h>>>26)|0,h&=67108863,X=Math.imul(R,W),z=(z=Math.imul(R,Y))+Math.imul(I,W)|0,q=Math.imul(I,Y),X=X+Math.imul(E,Z)|0,z=(z=z+Math.imul(E,$)|0)+Math.imul(C,Z)|0,q=q+Math.imul(C,$)|0,X=X+Math.imul(T,Q)|0,z=(z=z+Math.imul(T,J)|0)+Math.imul(P,Q)|0,q=q+Math.imul(P,J)|0,X=X+Math.imul(k,a)|0,z=(z=z+Math.imul(k,u)|0)+Math.imul(O,a)|0,q=q+Math.imul(O,u)|0,X=X+Math.imul(w,y)|0,z=(z=z+Math.imul(w,m)|0)+Math.imul(M,y)|0,q=q+Math.imul(M,m)|0,X=X+Math.imul(b,j)|0,z=(z=z+Math.imul(b,A)|0)+Math.imul(x,j)|0,q=q+Math.imul(x,A)|0;g=(G+(X+Math.imul(g,r)|0)|0)+((8191&(z=(z=z+Math.imul(g,L)|0)+Math.imul(v,r)|0))<<13)|0;G=((q=q+Math.imul(v,L)|0)+(z>>>13)|0)+(g>>>26)|0,g&=67108863,X=Math.imul(R,Z),z=(z=Math.imul(R,$))+Math.imul(I,Z)|0,q=Math.imul(I,$),X=X+Math.imul(E,Q)|0,z=(z=z+Math.imul(E,J)|0)+Math.imul(C,Q)|0,q=q+Math.imul(C,J)|0,X=X+Math.imul(T,a)|0,z=(z=z+Math.imul(T,u)|0)+Math.imul(P,a)|0,q=q+Math.imul(P,u)|0,X=X+Math.imul(k,y)|0,z=(z=z+Math.imul(k,m)|0)+Math.imul(O,y)|0,q=q+Math.imul(O,m)|0,X=X+Math.imul(w,j)|0,z=(z=z+Math.imul(w,A)|0)+Math.imul(M,j)|0,q=q+Math.imul(M,A)|0;b=(G+(X+Math.imul(b,r)|0)|0)+((8191&(z=(z=z+Math.imul(b,L)|0)+Math.imul(x,r)|0))<<13)|0;G=((q=q+Math.imul(x,L)|0)+(z>>>13)|0)+(b>>>26)|0,b&=67108863,X=Math.imul(R,Q),z=(z=Math.imul(R,J))+Math.imul(I,Q)|0,q=Math.imul(I,J),X=X+Math.imul(E,a)|0,z=(z=z+Math.imul(E,u)|0)+Math.imul(C,a)|0,q=q+Math.imul(C,u)|0,X=X+Math.imul(T,y)|0,z=(z=z+Math.imul(T,m)|0)+Math.imul(P,y)|0,q=q+Math.imul(P,m)|0,X=X+Math.imul(k,j)|0,z=(z=z+Math.imul(k,A)|0)+Math.imul(O,j)|0,q=q+Math.imul(O,A)|0;w=(G+(X+Math.imul(w,r)|0)|0)+((8191&(z=(z=z+Math.imul(w,L)|0)+Math.imul(M,r)|0))<<13)|0;G=((q=q+Math.imul(M,L)|0)+(z>>>13)|0)+(w>>>26)|0,w&=67108863,X=Math.imul(R,a),z=(z=Math.imul(R,u))+Math.imul(I,a)|0,q=Math.imul(I,u),X=X+Math.imul(E,y)|0,z=(z=z+Math.imul(E,m)|0)+Math.imul(C,y)|0,q=q+Math.imul(C,m)|0,X=X+Math.imul(T,j)|0,z=(z=z+Math.imul(T,A)|0)+Math.imul(P,j)|0,q=q+Math.imul(P,A)|0;k=(G+(X+Math.imul(k,r)|0)|0)+((8191&(z=(z=z+Math.imul(k,L)|0)+Math.imul(O,r)|0))<<13)|0;G=((q=q+Math.imul(O,L)|0)+(z>>>13)|0)+(k>>>26)|0,k&=67108863,X=Math.imul(R,y),z=(z=Math.imul(R,m))+Math.imul(I,y)|0,q=Math.imul(I,m),X=X+Math.imul(E,j)|0,z=(z=z+Math.imul(E,A)|0)+Math.imul(C,j)|0,q=q+Math.imul(C,A)|0;T=(G+(X+Math.imul(T,r)|0)|0)+((8191&(z=(z=z+Math.imul(T,L)|0)+Math.imul(P,r)|0))<<13)|0;G=((q=q+Math.imul(P,L)|0)+(z>>>13)|0)+(T>>>26)|0,T&=67108863,X=Math.imul(R,j),z=(z=Math.imul(R,A))+Math.imul(I,j)|0,q=Math.imul(I,A);E=(G+(X+Math.imul(E,r)|0)|0)+((8191&(z=(z=z+Math.imul(E,L)|0)+Math.imul(C,r)|0))<<13)|0;G=((q=q+Math.imul(C,L)|0)+(z>>>13)|0)+(E>>>26)|0,E&=67108863;r=(G+Math.imul(R,r)|0)+((8191&(z=(z=Math.imul(R,L))+Math.imul(I,r)|0))<<13)|0;return G=((q=Math.imul(I,L))+(z>>>13)|0)+(r>>>26)|0,r&=67108863,o[0]=F,o[1]=K,o[2]=ee,o[3]=d,o[4]=_,o[5]=i,o[6]=S,o[7]=e,o[8]=t,o[9]=s,o[10]=c,o[11]=h,o[12]=g,o[13]=b,o[14]=w,o[15]=k,o[16]=T,o[17]=E,o[18]=r,0!=G&&(o[19]=G,n.length++),n};function l(e,t,n){return(new u).mulp(e,t,n)}function u(e,t){this.x=e,this.y=t}Math.imul||(a=o),g.prototype.mulTo=function(e,t){var n=this.length+e.length,t=(10===this.length&&10===e.length?a:n<63?o:n<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){for(var a=i,i=0,s=67108863&r,l=Math.min(o,t.length-1),u=Math.max(0,o-e.length+1);u<=l;u++){var c,f=(0|e.words[o-u])*(0|t.words[u]),s=67108863&(c=(c=67108863&f)+s|0);i+=(a=(a=a+(f/67108864|0)|0)+(c>>>26)|0)>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}:l)(this,e,t);return t},u.prototype.makeRBT=function(e){for(var t=new Array(e),n=g.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},u.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},u.prototype.permute=function(e,t,n,r,i,o){for(var a=0;a<o;a++)r[a]=t[e[a]],i[a]=n[e[a]]},u.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,l=Math.cos(2*Math.PI/s),u=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var f=l,d=u,h=0;h<a;h++){var p=n[c+h],y=r[c+h],g=n[c+h+a],v=f*g-d*(m=r[c+h+a]),m=f*m+d*g;n[c+h]=p+(g=v),r[c+h]=y+m,n[c+h+a]=p-g,r[c+h+a]=y-m,h!==s&&(v=l*f-u*d,d=l*d+u*f,f=v)}},u.prototype.guessLen13b=function(e,t){for(var e=1&(r=1|Math.max(t,e)),n=0,r=r/2|0;r;r>>>=1)n++;return 1<<n+1+e},u.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},u.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},u.prototype.convert13b=function(e,t,n,r){for(var i=0,o=0;o<t;o++)i+=0|e[o],n[2*o]=8191&i,n[2*o+1]=8191&(i>>>=13),i>>>=13;for(o=2*t;o<r;++o)n[o]=0;y(0===i),y(0==(-8192&i))},u.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},u.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),l=new Array(r),u=new Array(r),c=new Array(r),f=new Array(r),d=n.words;d.length=r,this.convert13b(e.words,e.length,a,r),this.convert13b(t.words,t.length,u,r),this.transform(a,o,s,l,r,i),this.transform(u,o,c,f,r,i);for(var h=0;h<r;h++){var p=s[h]*c[h]-l[h]*f[h];l[h]=s[h]*f[h]+l[h]*c[h],s[h]=p}return this.conjugate(s,l,r),this.transform(s,l,d,o,r,i),this.conjugate(d,o,r),this.normalize13b(d,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},g.prototype.mul=function(e){var t=new g(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},g.prototype.mulf=function(e){var t=new g(null);return t.words=new Array(this.length+e.length),l(this,e,t)},g.prototype.imul=function(e){return this.clone().mulTo(e,this)},g.prototype.imuln=function(e){y("number"==typeof e),y(e<67108864);for(var t=0,n=0;n<this.length;n++){var r=(0|this.words[n])*e,i=(67108863&r)+(67108863&t);t>>=26,t+=r/67108864|0,t+=i>>>26,this.words[n]=67108863&i}return 0!==t&&(this.words[n]=t,this.length++),this},g.prototype.muln=function(e){return this.clone().imuln(e)},g.prototype.sqr=function(){return this.mul(this)},g.prototype.isqr=function(){return this.imul(this.clone())},g.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n%26;t[n]=(e.words[n/26|0]&1<<r)>>>r}return t}(e);if(0===t.length)return new g(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var i=n.sqr();r<t.length;r++,i=i.sqr())0!==t[r]&&(n=n.mul(i));return n},g.prototype.iushln=function(e){y("number"==typeof e&&0<=e);var t=e%26,n=(e-t)/26,r=67108863>>>26-t<<26-t;if(0!=t){for(var i=0,o=0;o<this.length;o++){var a=this.words[o]&r,s=(0|this.words[o])-a<<t;this.words[o]=s|i,i=a>>>26-t}i&&(this.words[o]=i,this.length++)}if(0!=n){for(o=this.length-1;0<=o;o--)this.words[o+n]=this.words[o];for(o=0;o<n;o++)this.words[o]=0;this.length+=n}return this.strip()},g.prototype.ishln=function(e){return y(0===this.negative),this.iushln(e)},g.prototype.iushrn=function(e,t,n){y("number"==typeof e&&0<=e);var r=t?(t-t%26)/26:0,i=e%26,o=Math.min((e-i)/26,this.length),a=67108863^67108863>>>i<<i,s=n;if(r-=o,r=Math.max(0,r),s){for(var l=0;l<o;l++)s.words[l]=this.words[l];s.length=o}if(0!==o)if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;for(var u=0,l=this.length-1;0<=l&&(0!==u||r<=l);l--){var c=0|this.words[l];this.words[l]=u<<26-i|c>>>i,u=c&a}return s&&0!==u&&(s.words[s.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},g.prototype.ishrn=function(e,t,n){return y(0===this.negative),this.iushrn(e,t,n)},g.prototype.shln=function(e){return this.clone().ishln(e)},g.prototype.ushln=function(e){return this.clone().iushln(e)},g.prototype.shrn=function(e){return this.clone().ishrn(e)},g.prototype.ushrn=function(e){return this.clone().iushrn(e)},g.prototype.testn=function(e){y("number"==typeof e&&0<=e);var t=e%26,e=(e-t)/26;return!(this.length<=e)&&!!(this.words[e]&1<<t)},g.prototype.imaskn=function(e){y("number"==typeof e&&0<=e);var t=e%26,e=(e-t)/26;return y(0===this.negative,"imaskn works only with positive numbers"),this.length<=e?this:(0!=t&&e++,this.length=Math.min(e,this.length),0!=t&&(this.words[this.length-1]&=67108863^67108863>>>t<<t),this.strip())},g.prototype.maskn=function(e){return this.clone().imaskn(e)},g.prototype.iaddn=function(e){return y("number"==typeof e),y(e<67108864),e<0?this.isubn(-e):0!==this.negative?(1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(e),this.negative=1),this):this._iaddn(e)},g.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&67108864<=this.words[t];t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},g.prototype.isubn=function(e){if(y("number"==typeof e),y(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,--this.words[t+1];return this.strip()},g.prototype.addn=function(e){return this.clone().iaddn(e)},g.prototype.subn=function(e){return this.clone().isubn(e)},g.prototype.iabs=function(){return this.negative=0,this},g.prototype.abs=function(){return this.clone().iabs()},g.prototype._ishlnsubmul=function(e,t,n){var r=e.length+n;this._expand(r);for(var i=0,o=0;o<e.length;o++){var a=(0|this.words[o+n])+i,s=(0|e.words[o])*t,i=((a-=67108863&s)>>26)-(s/67108864|0);this.words[o+n]=67108863&a}for(;o<this.length-n;o++)i=(a=(0|this.words[o+n])+i)>>26,this.words[o+n]=67108863&a;if(0===i)return this.strip();for(y(-1===i),o=i=0;o<this.length;o++)i=(a=-(0|this.words[o])+i)>>26,this.words[o]=67108863&a;return this.negative=1,this.strip()},g.prototype._wordDiv=function(e,t){var n=this.length-e.length,r=this.clone(),i=e,o=0|i.words[i.length-1];0!=(n=26-this._countBits(o))&&(i=i.ushln(n),r.iushln(n),o=0|i.words[i.length-1]);var a,s=r.length-i.length;if("mod"!==t){(a=new g(null)).length=1+s,a.words=new Array(a.length);for(var l=0;l<a.length;l++)a.words[l]=0}e=r.clone()._ishlnsubmul(i,1,s);0===e.negative&&(r=e,a&&(a.words[s]=1));for(var u=s-1;0<=u;u--){var c=67108864*(0|r.words[i.length+u])+(0|r.words[i.length+u-1]),c=Math.min(c/o|0,67108863);for(r._ishlnsubmul(i,c,u);0!==r.negative;)c--,r.negative=0,r._ishlnsubmul(i,1,u),r.isZero()||(r.negative^=1);a&&(a.words[u]=c)}return a&&a.strip(),r.strip(),"div"!==t&&0!=n&&r.iushrn(n),{div:a||null,mod:r}},g.prototype.divmod=function(e,t,n){return y(!e.isZero()),this.isZero()?{div:new g(0),mod:new g(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(r=o.div.neg()),"div"!==t&&(i=o.mod.neg(),n&&0!==i.negative&&i.iadd(e)),{div:r,mod:i}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),{div:r="mod"!==t?o.div.neg():r,mod:o.mod}):0!=(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(i=o.mod.neg(),n&&0!==i.negative&&i.isub(e)),{div:o.div,mod:i}):e.length>this.length||this.cmp(e)<0?{div:new g(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new g(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new g(this.modn(e.words[0]))}:this._wordDiv(e,t);var r,i,o},g.prototype.div=function(e){return this.divmod(e,"div",!1).div},g.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},g.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},g.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),e=e.andln(1),r=n.cmp(r);return r<0||1===e&&0===r?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},g.prototype.modn=function(e){y(e<=67108863);for(var t=(1<<26)%e,n=0,r=this.length-1;0<=r;r--)n=(t*n+(0|this.words[r]))%e;return n},g.prototype.idivn=function(e){y(e<=67108863);for(var t=0,n=this.length-1;0<=n;n--){var r=(0|this.words[n])+67108864*t;this.words[n]=r/e|0,t=r%e}return this.strip()},g.prototype.divn=function(e){return this.clone().idivn(e)},g.prototype.egcd=function(e){y(0===e.negative),y(!e.isZero());for(var t=this,n=e.clone(),t=0!==t.negative?t.umod(e):t.clone(),r=new g(1),i=new g(0),o=new g(0),a=new g(1),s=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++s;for(var l=n.clone(),u=t.clone();!t.isZero();){for(var c=0,f=1;0==(t.words[0]&f)&&c<26;++c,f<<=1);if(0<c)for(t.iushrn(c);0<c--;)(r.isOdd()||i.isOdd())&&(r.iadd(l),i.isub(u)),r.iushrn(1),i.iushrn(1);for(var d=0,h=1;0==(n.words[0]&h)&&d<26;++d,h<<=1);if(0<d)for(n.iushrn(d);0<d--;)(o.isOdd()||a.isOdd())&&(o.iadd(l),a.isub(u)),o.iushrn(1),a.iushrn(1);0<=t.cmp(n)?(t.isub(n),r.isub(o),i.isub(a)):(n.isub(t),o.isub(r),a.isub(i))}return{a:o,b:a,gcd:n.iushln(s)}},g.prototype._invmp=function(e){y(0===e.negative),y(!e.isZero());for(var t,n=this,r=e.clone(),n=0!==n.negative?n.umod(e):n.clone(),i=new g(1),o=new g(0),a=r.clone();0<n.cmpn(1)&&0<r.cmpn(1);){for(var s=0,l=1;0==(n.words[0]&l)&&s<26;++s,l<<=1);if(0<s)for(n.iushrn(s);0<s--;)i.isOdd()&&i.iadd(a),i.iushrn(1);for(var u=0,c=1;0==(r.words[0]&c)&&u<26;++u,c<<=1);if(0<u)for(r.iushrn(u);0<u--;)o.isOdd()&&o.iadd(a),o.iushrn(1);0<=n.cmp(r)?(n.isub(r),i.isub(o)):(r.isub(n),o.isub(i))}return(t=0===n.cmpn(1)?i:o).cmpn(0)<0&&t.iadd(e),t},g.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0;for(var r=n.negative=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0)var o=t,t=n,n=o;else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},g.prototype.invm=function(e){return this.egcd(e).a.umod(e)},g.prototype.isEven=function(){return 0==(1&this.words[0])},g.prototype.isOdd=function(){return 1==(1&this.words[0])},g.prototype.andln=function(e){return this.words[0]&e},g.prototype.bincn=function(e){y("number"==typeof e);var t=e%26,e=(e-t)/26,t=1<<t;if(this.length<=e)return this._expand(1+e),this.words[e]|=t,this;for(var n=t,r=e;0!==n&&r<this.length;r++){var i=0|this.words[r],n=(i+=n)>>>26;i&=67108863,this.words[r]=i}return 0!==n&&(this.words[r]=n,this.length++),this},g.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},g.prototype.cmpn=function(e){var t=e<0;return 0===this.negative||t?0===this.negative&&t?1:(this.strip(),e=1<this.length?1:(y((e=t?-e:e)<=67108863,"Number is too big"),(t=0|this.words[0])===e?0:t<e?-1:1),0!==this.negative?0|-e:e):-1},g.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;e=this.ucmp(e);return 0!==this.negative?0|-e:e},g.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;0<=n;n--){var r=0|this.words[n],i=0|e.words[n];if(r!=i){r<i?t=-1:i<r&&(t=1);break}}return t},g.prototype.gtn=function(e){return 1===this.cmpn(e)},g.prototype.gt=function(e){return 1===this.cmp(e)},g.prototype.gten=function(e){return 0<=this.cmpn(e)},g.prototype.gte=function(e){return 0<=this.cmp(e)},g.prototype.ltn=function(e){return-1===this.cmpn(e)},g.prototype.lt=function(e){return-1===this.cmp(e)},g.prototype.lten=function(e){return this.cmpn(e)<=0},g.prototype.lte=function(e){return this.cmp(e)<=0},g.prototype.eqn=function(e){return 0===this.cmpn(e)},g.prototype.eq=function(e){return 0===this.cmp(e)},g.red=function(e){return new w(e)},g.prototype.toRed=function(e){return y(!this.red,"Already a number in reduction context"),y(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},g.prototype.fromRed=function(){return y(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},g.prototype._forceRed=function(e){return this.red=e,this},g.prototype.forceRed=function(e){return y(!this.red,"Already a number in reduction context"),this._forceRed(e)},g.prototype.redAdd=function(e){return y(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},g.prototype.redIAdd=function(e){return y(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},g.prototype.redSub=function(e){return y(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},g.prototype.redISub=function(e){return y(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},g.prototype.redShl=function(e){return y(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},g.prototype.redMul=function(e){return y(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},g.prototype.redIMul=function(e){return y(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},g.prototype.redSqr=function(){return y(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},g.prototype.redISqr=function(){return y(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},g.prototype.redSqrt=function(){return y(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},g.prototype.redInvm=function(){return y(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},g.prototype.redNeg=function(){return y(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},g.prototype.redPow=function(e){return y(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var c={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new g(t,16),this.n=this.p.bitLength(),this.k=new g(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function m(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function w(e){var t;"string"==typeof e?(t=g._prime(e),this.m=t.p,this.prime=t):(y(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null)}function M(e){w.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new g(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new g(null);return e.words=new Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){for(var t,n=e;this.split(n,this.tmp),(t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength())>this.n;);e=t<this.n?-1:n.ucmp(this.p);return 0===e?(n.words[0]=0,n.length=1):0<e?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},n(m,v),m.prototype.split=function(e,t){for(var n=Math.min(e.length,9),r=0;r<n;r++)t.words[r]=e.words[r];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,r=10;r<e.length;r++){var o=0|e.words[r];e.words[r-10]=(4194303&o)<<4|i>>>22,i=o}0===(e.words[r-10]=i>>>=22)&&10<e.length?e.length-=10:e.length-=9},m.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(b,v),n(x,v),n(_,v),_.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},g._prime=function(e){if(c[e])return c[e];var t;if("k256"===e)t=new m;else if("p224"===e)t=new b;else if("p192"===e)t=new x;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return c[e]=t},w.prototype._verify1=function(e){y(0===e.negative,"red works only with positives"),y(e.red,"red works only with red numbers")},w.prototype._verify2=function(e,t){y(0==(e.negative|t.negative),"red works only with positives"),y(e.red&&e.red===t.red,"red works only with red numbers")},w.prototype.imod=function(e){return(this.prime?this.prime.ireduce(e):e.umod(this.m))._forceRed(this)},w.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},w.prototype.add=function(e,t){this._verify2(e,t);t=e.add(t);return 0<=t.cmp(this.m)&&t.isub(this.m),t._forceRed(this)},w.prototype.iadd=function(e,t){this._verify2(e,t);t=e.iadd(t);return 0<=t.cmp(this.m)&&t.isub(this.m),t},w.prototype.sub=function(e,t){this._verify2(e,t);t=e.sub(t);return t.cmpn(0)<0&&t.iadd(this.m),t._forceRed(this)},w.prototype.isub=function(e,t){this._verify2(e,t);t=e.isub(t);return t.cmpn(0)<0&&t.iadd(this.m),t},w.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},w.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},w.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},w.prototype.isqr=function(e){return this.imul(e,e.clone())},w.prototype.sqr=function(e){return this.mul(e,e)},w.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(y(t%2==1),3===t){t=this.m.add(new g(1)).iushrn(2);return this.pow(e,t)}for(var n=this.m.subn(1),r=0;!n.isZero()&&0===n.andln(1);)r++,n.iushrn(1);y(!n.isZero());for(var i=new g(1).toRed(this),o=i.redNeg(),a=this.m.subn(1).iushrn(1),s=new g(2*(s=this.m.bitLength())*s).toRed(this);0!==this.pow(s,a).cmp(o);)s.redIAdd(o);for(var l=this.pow(s,n),u=this.pow(e,n.addn(1).iushrn(1)),c=this.pow(e,n),f=r;0!==c.cmp(i);){for(var d=c,h=0;0!==d.cmp(i);h++)d=d.redSqr();y(h<f);var p=this.pow(l,new g(1).iushln(f-h-1)),u=u.redMul(p),l=p.redSqr(),c=c.redMul(l),f=h}return u},w.prototype.invm=function(e){e=e._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},w.prototype.pow=function(e,t){if(t.isZero())return new g(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new g(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var i=n[0],o=0,a=0,s=t.bitLength()%26;for(0===s&&(s=26),r=t.length-1;0<=r;r--){for(var l=t.words[r],u=s-1;0<=u;u--){var c=l>>u&1;i!==n[0]&&(i=this.sqr(i)),0!=c||0!==o?(o<<=1,o|=c,(4===++a||0===r&&0===u)&&(i=this.mul(i,n[o]),o=a=0)):a=0}s=26}return i},w.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},w.prototype.convertFrom=function(e){e=e.clone();return e.red=null,e},g.mont=function(e){return new M(e)},n(M,w),M.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},M.prototype.convertFrom=function(e){e=this.imod(e.mul(this.rinv));return e.red=null,e},M.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;e=e.imul(t),t=e.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=e.isub(t).iushrn(this.shift),t=e;return 0<=e.cmp(this.m)?t=e.isub(this.m):e.cmpn(0)<0&&(t=e.iadd(this.m)),t._forceRed(this)},M.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new g(0)._forceRed(this);e=e.mul(t),t=e.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=e.isub(t).iushrn(this.shift),t=e;return 0<=e.cmp(this.m)?t=e.isub(this.m):e.cmpn(0)<0&&(t=e.iadd(this.m)),t._forceRed(this)},M.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===e||e,this)},{buffer:2}],34:[function(e,t,n){"use strict";t.exports=function(e){var t,n,r,i=e.length,o=0;for(t=0;t<i;++t)o+=e[t].length;var a=new Array(o),s=0;for(t=0;t<i;++t){var l=e[t],u=l.length;for(n=0;n<u;++n){var c,f=a[s++]=new Array(u-1),d=0;for(r=0;r<u;++r)r!==n&&(f[d++]=l[r]);1&n&&(c=f[1],f[1]=f[0],f[0]=c)}}return a}},{}],35:[function(e,t,n){"use strict";t.exports=function(e,t,n){switch(arguments.length){case 1:return function(e){return r=[],i(e,e,o,!0),r}(e);case 2:return"function"==typeof t?i(e,e,t,!0):function(e,t){return r=[],i(e,t,o,!1),r}(e,t);case 3:return i(e,t,n,!1);default:throw new Error("box-intersect: Invalid arguments")}};var r,c=e("typedarray-pool"),f=e("./lib/sweep"),d=e("./lib/intersect");function h(e,t,n,r){for(var i=0,o=0,a=0,s=e.length;a<s;++a){var l=e[a];if(!function(e,t){for(var n=0;n<e;++n)if(!(t[n]<=t[n+e]))return 1}(t,l)){for(var u=0;u<2*t;++u)n[i++]=l[u];r[o++]=a}}return o}function i(e,t,n,r){var i=e.length,o=t.length;if(!(i<=0||o<=0)){var a=e[0].length>>>1;if(!(a<=0)){var s,l=c.mallocDouble(2*a*i),u=c.mallocInt32(i);return 0<(i=h(e,a,l,u))&&(1==a&&r?(f.init(i),s=f.sweepComplete(a,n,0,i,l,u,0,i,l,u)):0<(o=h(t,a,e=c.mallocDouble(2*a*o),t=c.mallocInt32(o)))&&(f.init(i+o),s=1==a?f.sweepBipartite(a,n,0,i,l,u,0,o,e,t):d(a,n,r,i,l,u,o,e,t),c.free(e),c.free(t)),c.free(l),c.free(u)),s}}}function o(e,t){r.push([e,t])}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(e,t,n){"use strict";function r(){return function(e,t,n,r,i,o,a,s,l,u,c){return(l-s<i-r?function(e,t,n,r,i,o,a,s,l,u,c){for(var f=2*e,d=r,h=f*r;d<i;++d,h+=f){var p=o[t+h],y=o[t+h+e],g=a[d];e:for(var v=s,m=f*s;v<l;++v,m+=f){var b=u[t+m],x=u[t+m+e],_=c[v];if(!(x<p||y<b)){for(var w=t+1;w<e;++w){var M=o[w+h],j=o[w+e+h],k=u[w+m],O=u[w+e+m];if(j<k||O<M)continue e}_=n(g,_);if(void 0!==_)return _}}}}:function(e,t,n,r,i,o,a,s,l,u,c){for(var f=2*e,d=s,h=f*s;d<l;++d,h+=f){var p=u[t+h],y=u[t+h+e],g=c[d];e:for(var v=r,m=f*r;v<i;++v,m+=f){var b=o[t+m],x=o[t+m+e],_=a[v];if(!(y<b||x<p)){for(var w=t+1;w<e;++w){var M=o[w+m],j=o[w+e+m],k=u[w+h],O=u[w+e+h];if(j<k||O<M)continue e}_=n(_,g);if(void 0!==_)return _}}}})(e,t,n,r,i,o,a,s,l,u,c)}}function i(){return function(e,t,n,r,i,o,a,s,l,u,c,f){return(u-l<o-i?r?function(e,t,n,r,i,o,a,s,l,u,c){for(var f=2*e,d=r,h=f*r;d<i;++d,h+=f){var p=o[t+h],y=o[t+h+e],g=a[d];e:for(var v=s,m=f*s;v<l;++v,m+=f){var b=u[t+m],x=c[v];if(!(b<=p||y<b)){for(var _=t+1;_<e;++_){var w=o[_+h],M=o[_+e+h],j=u[_+m],k=u[_+e+m];if(M<j||k<w)continue e}x=n(x,g);if(void 0!==x)return x}}}}:function(e,t,n,r,i,o,a,s,l,u,c){for(var f=2*e,d=r,h=f*r;d<i;++d,h+=f){var p=o[t+h],y=o[t+h+e],g=a[d];e:for(var v=s,m=f*s;v<l;++v,m+=f){var b=u[t+m],x=c[v];if(!(b<p||y<b)){for(var _=t+1;_<e;++_){var w=o[_+h],M=o[_+e+h],j=u[_+m],k=u[_+e+m];if(M<j||k<w)continue e}x=n(g,x);if(void 0!==x)return x}}}}:r?function(e,t,n,r,i,o,a,s,l,u,c){for(var f=2*e,d=s,h=f*s;d<l;++d,h+=f){var p=u[t+h],y=c[d];e:for(var g=r,v=f*r;g<i;++g,v+=f){var m=o[t+v],b=o[t+v+e],x=a[g];if(!(p<=m||b<p)){for(var _=t+1;_<e;++_){var w=o[_+v],M=o[_+e+v],j=u[_+h],k=u[_+e+h];if(M<j||k<w)continue e}x=n(y,x);if(void 0!==x)return x}}}}:function(e,t,n,r,i,o,a,s,l,u,c){for(var f=2*e,d=s,h=f*s;d<l;++d,h+=f){var p=u[t+h],y=c[d];e:for(var g=r,v=f*r;g<i;++g,v+=f){var m=o[t+v],b=o[t+v+e],x=a[g];if(!(p<m||b<p)){for(var _=t+1;_<e;++_){var w=o[_+v],M=o[_+e+v],j=u[_+h],k=u[_+e+h];if(M<j||k<w)continue e}x=n(x,y);if(void 0!==x)return x}}}})(e,t,n,i,o,a,s,l,u,c,f)}}function o(e){return(e?r:i)()}n.partial=o(!1),n.full=o(!0)},{}],37:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i,o,a,s,l){!function(e,t){t=8*S.log2(t+1)*(e+1)|0,e=S.nextPow2(V*t);W.length<e&&(P.free(W),W=P.mallocInt32(e));t=S.nextPow2(G*t);Y.length<t&&(P.free(Y),Y=P.mallocDouble(t))}(e,r+a);var u,c,f=0,d=2*e;X(f++,0,0,r,0,a,n?16:0,-1/0,1/0),n||X(f++,0,0,a,0,r,1,-1/0,1/0);for(;0<f;){var h=--f*V,p=W[h],y=W[1+h],g=W[2+h],v=W[3+h],m=W[4+h],b=W[5+h],x=f*G,_=Y[x],w=Y[1+x],M=1&b,j=!!(16&b),k=i,O=o,A=s,T=l;if(M&&(k=s,O=l,A=i,T=o),!(2&b&&(g=B(e,p,y,g,k,O,w))<=y)&&!(4&b&&(y=U(e,p,y,g,k,O,_),g<=y))){h=g-y,x=m-v;if(j){if(e*h*(h+x)<D){if(void 0!==(u=L.scanComplete(e,p,t,y,g,k,O,v,m,A,T)))return u;continue}}else{if(e*Math.min(h,x)<I){if(void 0!==(u=E(e,p,t,M,y,g,k,O,v,m,A,T)))return u;continue}if(e*h*x<z){if(void 0!==(u=L.scanBipartite(e,p,t,M,y,g,k,O,v,m,A,T)))return u;continue}}b=N(e,p,y,g,k,O,_,w);if(y<b)if(e*(b-y)<I){if(void 0!==(u=C(e,p+1,t,y,b,k,O,v,m,A,T)))return u}else if(p===e-2){if(void 0!==(u=M?L.sweepBipartite(e,t,v,m,A,T,y,b,k,O):L.sweepBipartite(e,t,y,b,k,O,v,m,A,T)))return u}else X(f++,p+1,y,b,v,m,M,-1/0,1/0),X(f++,p+1,v,m,y,b,1^M,-1/0,1/0);if(b<g){h=R(e,p,v,m,A,T),x=A[d*h+p],y=F(e,p,h,m,A,T,x);if(y<m&&X(f++,p,b,g,y,m,(4|M)+(j?16:0),x,w),v<h&&X(f++,p,b,g,v,h,(2|M)+(j?16:0),_,x),h+1===y){if(void 0!==(u=j?function(e,t,n,r,i,o,a,s,l,u){var c=2*e,f=s*c,d=l[f+t];e:for(var h=r,p=r*c;h<i;++h,p+=c){var y=a[h];if(y!==u){var g=o[p+t],v=o[p+t+e];if(!(d<g||v<d)){for(var m=t+1;m<e;++m){var g=o[p+m],v=o[p+m+e],b=l[f+m],x=l[f+m+e];if(v<b||x<g)continue e}y=n(y,u);if(void 0!==y)return y}}}}(e,p,t,b,g,k,O,h,A,T[h]):function(e,t,n,r,i,o,a,s,l,u,c){var f=2*e,d=l*f,h=u[d+t];e:for(var p=i,y=i*f;p<o;++p,y+=f){var g=a[y+t],v=a[y+t+e];if(!(h<g||v<h)&&(!r||h!==g)){for(var m=s[p],b=t+1;b<e;++b){var g=a[y+b],v=a[y+b+e],x=u[d+b],_=u[d+b+e];if(v<x||_<g)continue e}if(void 0!==(m=r?n(c,m):n(m,c)))return m}}}(e,p,t,M,b,g,k,O,h,A,T[h])))return u}else if(h<y)if(j){if(c=q(e,p,b,g,k,O,x),b<c){j=F(e,p,b,c,k,O,x);if(p===e-2){if(b<j&&void 0!==(u=L.sweepComplete(e,t,b,j,k,O,h,y,A,T)))return u;if(j<c&&void 0!==(u=L.sweepBipartite(e,t,j,c,k,O,h,y,A,T)))return u}else b<j&&X(f++,p+1,b,j,h,y,16,-1/0,1/0),j<c&&(X(f++,p+1,j,c,h,y,0,-1/0,1/0),X(f++,p+1,h,y,j,c,1,-1/0,1/0))}}else c=(M?H:q)(e,p,b,g,k,O,x),b<c&&(p===e-2?u=M?L.sweepBipartite(e,t,h,y,A,T,b,c,k,O):L.sweepBipartite(e,t,b,c,k,O,h,y,A,T):(X(f++,p+1,b,c,h,y,M,-1/0,1/0),X(f++,p+1,h,y,b,c,1^M,-1/0,1/0)))}}}};var P=e("typedarray-pool"),S=e("bit-twiddle"),t=e("./brute"),E=t.partial,C=t.full,L=e("./sweep"),R=e("./median"),e=e("./partition"),I=128,z=1<<22,D=1<<22,N=e("!(lo>=p0)&&!(p1>=hi)"),F=e("lo===p0"),B=e("lo<p0"),U=e("hi<=p0"),q=e("lo<=p0&&p0<=hi"),H=e("lo<p0&&p0<=hi"),V=6,G=2,W=P.mallocInt32(1024),Y=P.mallocDouble(1024);function X(e,t,n,r,i,o,a,s,l){var u=V*e;W[u]=t,W[1+u]=n,W[2+u]=r,W[3+u]=i,W[4+u]=o,W[5+u]=a;e*=G;Y[e]=s,Y[1+e]=l}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i,o){if(r<=n+1)return n;var a=n,s=r,l=r+n>>>1,u=2*e,c=l,f=i[u*l+t];for(;a<s;){if(s-a<M){!function(e,t,n,r,i,o){for(var a=2*e,s=a*(n+1)+t,l=n+1;l<r;++l,s+=a)for(var u=i[s],c=l,f=a*(l-1);n<c&&i[f+t]>u;--c,f-=a){for(var d=f,h=f+a,p=0;p<a;++p,++d,++h){var y=i[d];i[d]=i[h],i[h]=y}var g=o[c];o[c]=o[c-1],o[c-1]=g}}(e,t,a,s,i,o),f=i[u*l+t];break}var d=s-a,h=Math.random()*d+a|0,p=i[u*h+t],y=Math.random()*d+a|0,g=i[u*y+t],v=Math.random()*d+a|0,d=i[u*v+t];f=p<=g?g<=d?(c=y,g):d<=p?(c=h,p):(c=v,d):d<=g?(c=y,g):p<=d?(c=h,p):(c=v,d);for(var m=u*(s-1),b=u*c,x=0;x<u;++x,++m,++b){var _=i[m];i[m]=i[b],i[b]=_}d=o[s-1];o[s-1]=o[c],o[c]=d,c=w(e,t,a,s-1,i,o,f);for(m=u*(s-1),b=u*c,x=0;x<u;++x,++m,++b){_=i[m];i[m]=i[b],i[b]=_}d=o[s-1];if(o[s-1]=o[c],o[c]=d,l<c){for(s=c-1;a<s&&i[u*(s-1)+t]===f;)--s;s+=1}else{if(!(c<l))break;for(a=c+1;a<s&&i[u*a+t]===f;)a+=1}}return w(e,t,n,l,i,o,i[u*l+t])};var w=e("./partition")("lo<p0"),M=8},{"./partition":39}],39:[function(e,t,n){"use strict";t.exports=function(e){return r[e]};var r={"lo===p0":function(e,t,n,r,i,o,a){for(var s=2*e,l=s*n,u=l,c=n,f=t,d=n;d<r;++d,l+=s)if(i[l+f]===a)if(c===d)c+=1,u+=s;else{for(var h=0;h<s;++h){var p=i[l+h];i[l+h]=i[u],i[u++]=p}var y=o[d];o[d]=o[c],o[c++]=y}return c},"lo<p0":function(e,t,n,r,i,o,a){for(var s=2*e,l=s*n,u=l,c=n,f=t,d=n;d<r;++d,l+=s)if(i[l+f]<a)if(c===d)c+=1,u+=s;else{for(var h=0;h<s;++h){var p=i[l+h];i[l+h]=i[u],i[u++]=p}var y=o[d];o[d]=o[c],o[c++]=y}return c},"lo<=p0":function(e,t,n,r,i,o,a){for(var s=2*e,l=s*n,u=l,c=n,f=e+t,d=n;d<r;++d,l+=s)if(i[l+f]<=a)if(c===d)c+=1,u+=s;else{for(var h=0;h<s;++h){var p=i[l+h];i[l+h]=i[u],i[u++]=p}var y=o[d];o[d]=o[c],o[c++]=y}return c},"hi<=p0":function(e,t,n,r,i,o,a){for(var s=2*e,l=s*n,u=l,c=n,f=e+t,d=n;d<r;++d,l+=s)if(i[l+f]<=a)if(c===d)c+=1,u+=s;else{for(var h=0;h<s;++h){var p=i[l+h];i[l+h]=i[u],i[u++]=p}var y=o[d];o[d]=o[c],o[c++]=y}return c},"lo<p0&&p0<=hi":function(e,t,n,r,i,o,a){for(var s=2*e,l=s*n,u=l,c=n,f=t,d=e+t,h=n;h<r;++h,l+=s){var p=i[l+f],y=i[l+d];if(p<a&&a<=y)if(c===h)c+=1,u+=s;else{for(var g=0;g<s;++g){var v=i[l+g];i[l+g]=i[u],i[u++]=v}y=o[h];o[h]=o[c],o[c++]=y}}return c},"lo<=p0&&p0<=hi":function(e,t,n,r,i,o,a){for(var s=2*e,l=s*n,u=l,c=n,f=t,d=e+t,h=n;h<r;++h,l+=s){var p=i[l+f],y=i[l+d];if(p<=a&&a<=y)if(c===h)c+=1,u+=s;else{for(var g=0;g<s;++g){var v=i[l+g];i[l+g]=i[u],i[u++]=v}y=o[h];o[h]=o[c],o[c++]=y}}return c},"!(lo>=p0)&&!(p1>=hi)":function(e,t,n,r,i,o,a,s){for(var l=2*e,u=l*n,c=u,f=n,d=t,h=e+t,p=n;p<r;++p,u+=l){var y=i[u+d],g=i[u+h];if(!(a<=y||g<=s))if(f===p)f+=1,c+=l;else{for(var v=0;v<l;++v){var m=i[u+v];i[u+v]=i[c],i[c++]=m}g=o[p];o[p]=o[f],o[f++]=g}}return f}}},{}],40:[function(e,t,n){"use strict";t.exports=function(e,t){(t<=4*C?L:function e(t,n,r){var i=(n-t+1)/6|0,o=t+i,a=n-i,s=t+n>>1,l=s-i,u=s+i,c=o,f=l,d=s,h=u,p=a,y=t+1,g=n-1,i=0;N(c,f,r)&&(i=c,c=f,f=i);N(h,p,r)&&(i=h,h=p,p=i);N(c,d,r)&&(i=c,c=d,d=i);N(f,d,r)&&(i=f,f=d,d=i);N(c,h,r)&&(i=c,c=h,h=i);N(d,h,r)&&(i=d,d=h,h=i);N(f,p,r)&&(i=f,f=p,p=i);N(f,d,r)&&(i=f,f=d,d=i);N(h,p,r)&&(i=h,h=p,p=i);var v=r[2*f];var m=r[2*f+1];var b=r[2*h];var x=r[2*h+1];var _=2*c;var w=2*d;var M=2*p;var j=2*o;var k=2*s;var O=2*a;for(var A=0;A<2;++A){var T=r[_+A],P=r[w+A],S=r[M+A];r[j+A]=T,r[k+A]=P,r[O+A]=S}I(l,t,r);I(u,n,r);for(var E=y;E<=g;++E)if(F(E,v,m,r))E!==y&&R(E,y,r),++y;else if(!F(E,b,x,r))for(;;){if(F(g,b,x,r)){F(g,v,m,r)?(z(E,y,g,r),++y):R(E,g,r),--g;break}if(--g<E)break}D(t,y-1,v,m,r);D(n,g+1,b,x,r);(y-2-t<=C?L:e)(t,y-2,r);(n-(g+2)<=C?L:e)(g+2,n,r);(g-y<=C?L:e)(y,g,r)})(0,t-1,e)};var C=32;function L(e,t,n){for(var r=2*(e+1),i=e+1;i<=t;++i){for(var o=n[r++],a=n[r++],s=i,l=r-2;s-- >e;){var u=n[l-2],c=n[l-1];if(u<o)break;if(u===o&&c<a)break;n[l]=u,n[l+1]=c,l-=2}n[l]=o,n[l+1]=a}}function R(e,t,n){var r=n[e*=2],i=n[e+1];n[e]=n[t*=2],n[e+1]=n[t+1],n[t]=r,n[t+1]=i}function I(e,t,n){n[e*=2]=n[t*=2],n[e+1]=n[t+1]}function z(e,t,n,r){n*=2;var i=r[e*=2],o=r[e+1];r[e]=r[t*=2],r[e+1]=r[t+1],r[t]=r[n],r[t+1]=r[n+1],r[n]=i,r[n+1]=o}function D(e,t,n,r,i){i[e*=2]=i[t*=2],i[t]=n,i[e+1]=i[t+1],i[t+1]=r}function N(e,t,n){var r=n[e*=2],i=n[t*=2];return!(r<i)&&(r!==i||n[e+1]>n[t+1])}function F(e,t,n,r){var i=r[e*=2];return i<t||i===t&&r[e+1]<n}},{}],41:[function(e,t,n){"use strict";t.exports={init:function(e){e=i.nextPow2(e);z.length<e&&(r.free(z),z=r.mallocInt32(e));D.length<e&&(r.free(D),D=r.mallocInt32(e));A.length<e&&(r.free(A),A=r.mallocInt32(e));T.length<e&&(r.free(T),T=r.mallocInt32(e));P.length<e&&(r.free(P),P=r.mallocInt32(e));S.length<e&&(r.free(S),S=r.mallocInt32(e));e*=8;N.length<e&&(r.free(N),N=r.mallocDouble(e))},sweepBipartite:function(e,t,n,r,i,o,a,s,l,u){for(var c=0,f=2*e,d=e-1,h=f-1,p=n;p<r;++p){var y=o[p],g=f*p;N[c++]=i[g+d],N[c++]=-(y+1),N[c++]=i[g+h],N[c++]=y}for(p=a;p<s;++p){var y=u[p]+I,v=f*p;N[c++]=l[v+d],N[c++]=-y,N[c++]=l[v+h],N[c++]=y}var m=c>>>1;R(N,m);for(var b=0,x=0,p=0;p<m;++p){var _=0|N[2*p+1];if(I<=_)F(A,T,x--,_=_-I|0);else if(0<=_)F(z,D,b--,_);else if(_<=-I){_=-_-I|0;for(var w=0;w<b;++w)if(void 0!==(M=t(z[w],_)))return M;B(A,T,x++,_)}else{_=-_-1|0;for(var M,w=0;w<x;++w)if(void 0!==(M=t(_,A[w])))return M;B(z,D,b++,_)}}},sweepComplete:function(e,t,n,r,i,o,a,s,l,u){for(var c=0,f=2*e,d=e-1,h=f-1,p=n;p<r;++p){var y=o[p]+1<<1,g=f*p;N[c++]=i[g+d],N[c++]=-y,N[c++]=i[g+h],N[c++]=y}for(p=a;p<s;++p){var y=u[p]+1<<1,v=f*p;N[c++]=l[v+d],N[c++]=1|-y,N[c++]=l[v+h],N[c++]=1|y}var m=c>>>1;R(N,m);for(var b=0,x=0,_=0,p=0;p<m;++p){var w=0|N[2*p+1],M=1&w;if(p<m-1&&w>>1==N[2*p+3]>>1&&(M=2,p+=1),w<0){for(var j=-(w>>1)-1,k=0;k<_;++k)if(void 0!==(O=t(P[k],j)))return O;if(0!==M)for(k=0;k<b;++k)if(void 0!==(O=t(z[k],j)))return O;if(1!==M)for(var O,k=0;k<x;++k)if(void 0!==(O=t(A[k],j)))return O;0===M?B(z,D,b++,j):1===M?B(A,T,x++,j):2===M&&B(P,S,_++,j)}else{j=(w>>1)-1;0===M?F(z,D,b--,j):1===M?F(A,T,x--,j):2===M&&F(P,S,_--,j)}}},scanBipartite:function(e,t,n,r,i,o,a,s,l,u,c,f){var d=0,h=2*e,p=t,y=t+e,g=1,v=1;r?v=I:g=I;for(var m=i;m<o;++m){var b=m+g,x=h*m;N[d++]=a[x+p],N[d++]=-b,N[d++]=a[x+y],N[d++]=b}for(m=l;m<u;++m){var b=m+v,_=h*m;N[d++]=c[_+p],N[d++]=-b}var w=d>>>1;R(N,w);for(var M=0,m=0;m<w;++m){var j=0|N[2*m+1];if(j<0){var k=!1;if(I<=(b=-j)?(k=!r,b-=I):(k=!!r,--b),k)B(z,D,M++,b);else{var O=f[b],A=h*b,T=c[A+t+1],P=c[A+t+1+e];e:for(var S=0;S<M;++S){var E=z[S],C=h*E;if(!(P<a[C+t+1]||a[C+t+1+e]<T)){for(var L=t+2;L<e;++L)if(c[A+L+e]<a[C+L]||a[C+L+e]<c[A+L])continue e;var E=s[E];if(void 0!==(E=r?n(O,E):n(E,O)))return E}}}}else F(z,D,M--,j-g)}},scanComplete:function(e,t,n,r,i,o,a,s,l,u,c){for(var f=0,d=2*e,h=t,p=t+e,y=r;y<i;++y){var g=y+I,v=d*y;N[f++]=o[v+h],N[f++]=-g,N[f++]=o[v+p],N[f++]=g}for(y=s;y<l;++y){var g=y+1,m=d*y;N[f++]=u[m+h],N[f++]=-g}var b=f>>>1;R(N,b);for(var x=0,y=0;y<b;++y){var _=0|N[2*y+1];if(_<0)if(I<=(g=-_))z[x++]=g-I;else{var w=c[--g],M=d*g,j=u[M+t+1],k=u[M+t+1+e];e:for(var O=0;O<x;++O){var A=z[O],T=a[A];if(T===w)break;var P=d*A;if(!(k<o[P+t+1]||o[P+t+1+e]<j)){for(var S=t+2;S<e;++S)if(u[M+S+e]<o[P+S]||o[P+S+e]<u[M+S])continue e;T=n(T,w);if(void 0!==T)return T}}}else{for(g=_-I,O=x-1;0<=O;--O)if(z[O]===g){for(S=O+1;S<x;++S)z[S-1]=z[S];break}--x}}}};var r=e("typedarray-pool"),i=e("bit-twiddle"),R=e("./sort"),I=1<<28,z=r.mallocInt32(1024),D=r.mallocInt32(1024),A=r.mallocInt32(1024),T=r.mallocInt32(1024),P=r.mallocInt32(1024),S=r.mallocInt32(1024),N=r.mallocDouble(8192);function F(e,t,n,r){r=t[r],n=e[n-1];t[e[r]=n]=r}function B(e,t,n,r){t[e[n]=r]=n}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(e,t,n){"use strict";var c=e("./lib/monotone"),f=e("./lib/triangulation"),d=e("./lib/delaunay"),h=e("./lib/filter");function p(e){return[Math.min(e[0],e[1]),Math.max(e[0],e[1])]}function y(e,t){return e[0]-t[0]||e[1]-t[1]}function g(e,t,n){return t in e?e[t]:n}t.exports=function(e,t,n){t=Array.isArray(t)?(n=n||{},t||[]):(n=t||{},[]);var r=!!g(n,"delaunay",!0),i=!!g(n,"interior",!0),o=!!g(n,"exterior",!0),n=!!g(n,"infinity",!1);if(!i&&!o||0===e.length)return[];var a=c(e,t);{if(r||i!=o||n){for(var s=f(e.length,function(e){return e.map(p).sort(y)}(t)),l=0;l<a.length;++l){var u=a[l];s.addTriangle(u[0],u[1],u[2])}return r&&d(e,s),o?i?n?h(s,0,n):s.cells():h(s,1,n):h(s,-1)}return a}}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(e,t,n){"use strict";var y=e("robust-in-sphere")[4];e("binary-search-bounds");function g(e,t,n,r,i,o){var a,s=t.opposite(r,i);s<0||(i<r&&(a=r,r=i,i=a,a=o,o=s,s=a),t.isConstraint(r,i)||y(e[r],e[i],e[o],e[s])<0&&n.push(r,i))}t.exports=function(e,t){for(var n=[],r=e.length,i=t.stars,o=0;o<r;++o)for(var a=i[o],s=1;s<a.length;s+=2){var l=a[s];if(!(l<o)&&!t.isConstraint(o,l)){for(var u=a[s-1],c=-1,f=1;f<a.length;f+=2)if(a[f-1]===l){c=a[f];break}c<0||y(e[o],e[l],e[u],e[c])<0&&n.push(o,l)}}for(;0<n.length;){for(var l=n.pop(),o=n.pop(),u=-1,c=-1,a=i[o],d=1;d<a.length;d+=2){var h=a[d-1],p=a[d];h===l?c=p:p===l&&(u=h)}u<0||c<0||0<=y(e[o],e[l],e[u],e[c])||(t.flip(o,l),g(e,t,n,u,o,c),g(e,t,n,o,c,u),g(e,t,n,c,l,u),g(e,t,n,l,u,c))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(e,t,n){"use strict";var a,s=e("binary-search-bounds");function b(e,t,n,r,i,o,a){this.cells=e,this.neighbor=t,this.flags=r,this.constraint=n,this.active=i,this.next=o,this.boundary=a}function x(e,t){return e[0]-t[0]||e[1]-t[1]||e[2]-t[2]}t.exports=function(e,t,n){e=function(e,t){for(var n=e.cells(),r=n.length,i=0;i<r;++i){var o=(y=n[i])[0],a=y[1],s=y[2];a<s?a<o&&(y[0]=a,y[1]=s,y[2]=o):s<o&&(y[0]=s,y[1]=o,y[2]=a)}n.sort(x);for(var l=new Array(r),i=0;i<l.length;++i)l[i]=0;var u=[],c=[],f=new Array(3*r),d=new Array(3*r),h=null;t&&(h=[]);for(var p=new b(n,f,d,l,u,c,h),i=0;i<r;++i)for(var y=n[i],g=0;g<3;++g){var o=y[g],a=y[(g+1)%3],v=f[3*i+g]=p.locate(a,o,e.opposite(a,o)),m=d[3*i+g]=e.isConstraint(o,a);v<0&&(m?c.push(i):(u.push(i),l[i]=1),t&&h.push([a,o,-1]))}return p}(e,n);if(0===t)return n?e.cells.concat(e.boundary):e.cells;var r=1,i=e.active,o=e.next,a=e.flags,s=e.cells,l=e.constraint,u=e.neighbor;for(;0<i.length||0<o.length;){for(;0<i.length;){var c=i.pop();if(a[c]!==-r){a[c]=r;s[c];for(var f=0;f<3;++f){var d=u[3*c+f];0<=d&&0===a[d]&&(l[3*c+f]?o.push(d):(i.push(d),a[d]=r))}}}var h=o;o=i,i=h,o.length=0,r=-r}t=function(e,t,n){for(var r=0,i=0;i<e.length;++i)t[i]===n&&(e[r++]=e[i]);return e.length=r,e}(s,a,t);if(n)return t.concat(e.boundary);return t},b.prototype.locate=(a=[0,0,0],function(e,t,n){var r=e,i=t,o=n;return t<n?t<e&&(r=t,i=n,o=e):n<e&&(r=n,i=e,o=t),r<0?-1:(a[0]=r,a[1]=i,a[2]=o,s.eq(this.cells,a,x))})},{"binary-search-bounds":31}],45:[function(e,t,n){"use strict";var p=e("binary-search-bounds"),y=e("robust-orientation")[3],g=0;function v(e,t,n,r,i){this.a=e,this.b=t,this.idx=n,this.lowerIds=r,this.upperIds=i}function m(e,t,n,r){this.a=e,this.b=t,this.type=n,this.idx=r}function b(e,t){var n=e.a[0]-t.a[0]||e.a[1]-t.a[1]||e.type-t.type;return n||(e.type!==g&&(n=y(e.a,e.b,t.b))?n:e.idx-t.idx)}function x(e,t){return y(e.a,e.b,t)}function _(e,t){var n=e.a[0]<t.a[0]?y(e.a,e.b,t.a):y(t.b,t.a,e.a);return(n=n||(t.b[0]<e.b[0]?y(e.a,e.b,t.b):y(t.b,t.a,e.b)))||e.idx-t.idx}t.exports=function(e,t){for(var n=e.length,r=t.length,i=[],o=0;o<n;++o)i.push(new m(e[o],null,g,o));for(o=0;o<r;++o){var a=t[o],s=e[a[0]],a=e[a[1]];s[0]<a[0]?i.push(new m(s,a,2,o),new m(a,s,1,o)):s[0]>a[0]&&i.push(new m(a,s,2,o),new m(s,a,1,o))}i.sort(b);for(var l=i[0].a[0]-(1+Math.abs(i[0].a[0]))*Math.pow(2,-52),u=[new v([l,1],[l,0],-1,[],[])],c=[],o=0,f=i.length;o<f;++o){var d=i[o],h=d.type;h===g?function(e,t,n,r,i){for(var o=p.lt(t,r,x),a=p.gt(t,r,x),s=o;s<a;++s){for(var l=t[s],u=l.lowerIds,c=u.length;1<c&&0<y(n[u[c-2]],n[u[c-1]],r);)e.push([u[c-1],u[c-2],i]),--c;u.length=c,u.push(i);for(var f=l.upperIds,c=f.length;1<c&&y(n[f[c-2]],n[f[c-1]],r)<0;)e.push([f[c-2],f[c-1],i]),--c;f.length=c,f.push(i)}}(c,u,e,d.a,d.idx):(2===h?function(e,t){var n=p.le(e,t,_),r=e[n],i=r.upperIds,o=i[i.length-1];r.upperIds=[o],e.splice(n+1,0,new v(t.a,t.b,t.idx,[o],i))}:function(e,t){var n=t.a;t.a=t.b,t.b=n;n=p.eq(e,t,_),t=e[n];e[n-1].upperIds=t.upperIds,e.splice(n,1)})(u,d)}return c}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(e,t,n){"use strict";var r=e("binary-search-bounds");function i(e,t){this.stars=e,this.edges=t}t.exports=function(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=[];return new i(n,t)};var o,t=i.prototype;function a(e,t,n){for(var r=1,i=e.length;r<i;r+=2)if(e[r-1]===t&&e[r]===n)return e[r-1]=e[i-2],e[r]=e[i-1],void(e.length=i-2)}function s(e,t){return e[0]-t[0]||e[1]-t[1]}t.isConstraint=(o=[0,0],function(e,t){return o[0]=Math.min(e,t),o[1]=Math.max(e,t),0<=r.eq(this.edges,o,s)}),t.removeTriangle=function(e,t,n){var r=this.stars;a(r[e],t,n),a(r[t],n,e),a(r[n],e,t)},t.addTriangle=function(e,t,n){var r=this.stars;r[e].push(t,n),r[t].push(n,e),r[n].push(e,t)},t.opposite=function(e,t){for(var n=this.stars[t],r=1,i=n.length;r<i;r+=2)if(n[r]===e)return n[r-1];return-1},t.flip=function(e,t){var n=this.opposite(e,t),r=this.opposite(t,e);this.removeTriangle(e,t,n),this.removeTriangle(t,e,r),this.addTriangle(e,r,n),this.addTriangle(t,n,r)},t.edges=function(){for(var e=this.stars,t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length;o<a;o+=2)t.push([i[o],i[o+1]]);return t},t.cells=function(){for(var e=this.stars,t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length;o<a;o+=2){var s=i[o],l=i[o+1];n<Math.min(s,l)&&t.push([n,s,l])}return t}},{"binary-search-bounds":31}],47:[function(e,t,n){"use strict";t.exports=function(e){for(var t=1,n=1;n<e.length;++n)for(var r=0;r<n;++r)if(e[n]<e[r])t=-t;else if(e[r]===e[n])return 0;return t}},{}],48:[function(e,t,n){"use strict";var f=e("dup"),d=e("robust-linear-solve");function h(e,t){for(var n=0,r=e.length,i=0;i<r;++i)n+=e[i]*t[i];return n}function a(e){var t=e.length;if(0===t)return[];e[0].length;for(var n=f([e.length+1,e.length+1],1),r=f([e.length+1],1),i=n[t][t]=0;i<t;++i){for(var o=0;o<=i;++o)n[o][i]=n[i][o]=2*h(e[i],e[o]);r[i]=h(e[i],e[i])}for(var a=d(n,r),s=0,l=a[t+1],i=0;i<l.length;++i)s+=l[i];for(var u=new Array(t),i=0;i<t;++i){for(var l=a[i],c=0,o=0;o<l.length;++o)c+=l[o];u[i]=c/s}return u}function r(e){if(0===e.length)return[];for(var t=e[0].length,n=f([t]),r=a(e),i=0;i<e.length;++i)for(var o=0;o<t;++o)n[o]+=e[i][o]*r[i];return n}r.barycenetric=a,t.exports=r},{dup:65,"robust-linear-solve":283}],49:[function(e,t,n){t.exports=function(e){for(var t=a(e),n=0,r=0;r<e.length;++r)for(var i=e[r],o=0;o<t.length;++o)n+=Math.pow(i[o]-t[o],2);return Math.sqrt(n/e.length)};var a=e("circumcenter")},{circumcenter:48}],50:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r;if(n){r=t;for(var i=new Array(t.length),o=0;o<t.length;++o){var a=t[o];i[o]=[a[0],a[1],n[o]]}t=i}var s=function(e,t,n){e=c(e,[],l(e));return v(t,e,n),!!e}(e,t,!!n);for(;function(e,t,n){var r=function(e,t){for(var n=new Array(t.length),r=0;r<t.length;++r){var i=t[r],o=e[i[0]],i=e[i[1]];n[r]=[p(Math.min(o[0],i[0]),-1/0),p(Math.min(o[1],i[1]),-1/0),p(Math.max(o[0],i[0]),1/0),p(Math.max(o[1],i[1]),1/0)]}return n}(e,t),i=function(a,s,e){var l=[];return h(e,function(e,t){var n,r,i=s[e],o=s[t];i[0]!==o[0]&&i[0]!==o[1]&&i[1]!==o[0]&&i[1]!==o[1]&&(n=a[i[0]],r=a[i[1]],i=a[o[0]],o=a[o[1]],u(n,r,i,o)&&l.push([e,t]))}),l}(e,t,r),o=l(e),a=function(o,a,e,t){var s=[];return h(e,t,function(e,t){var n,r,i=a[e];i[0]!==t&&i[1]!==t&&(n=o[t],r=o[i[0]],i=o[i[1]],u(r,i,n,n)&&s.push([e,t]))}),s}(e,t,r,o),r=function(e,t,n,r,i){var o,a,s,l=e.map(function(e){return[x(e[0]),x(e[1])]});for(o=0;o<n.length;++o){var u=n[o];a=u[0];var c=u[1],f=t[a],u=t[c],f=j(M(e[f[0]]),M(e[f[1]]),M(e[u[0]]),M(e[u[1]]));f&&(u=e.length,e.push([w(f[0]),w(f[1])]),l.push(f),r.push([a,u],[c,u]))}for(r.sort(function(e,t){if(e[0]!==t[0])return e[0]-t[0];e=l[e[1]],t=l[t[1]];return _(e[0],t[0])||_(e[1],t[1])}),o=r.length-1;0<=o;--o){var d=r[o];a=d[0];var h=t[a],p=h[0],y=h[1],g=e[p],v=e[y];(g[0]-v[0]||g[1]-v[1])<0&&(v=p,p=y,y=v),h[0]=p;var m=h[1]=d[1];for(i&&(s=h[2]);0<o&&r[o-1][0]===a;){var b=(d=r[--o])[1];i?t.push([m,b,s]):t.push([m,b]),m=b}i?t.push([m,y,s]):t.push([m,y])}return l}(e,t,i,a,n),o=c(e,r);return v(t,o,n),!!o||(0<i.length||0<a.length)}(e,t,!!n);)s=!0;if(n&&s){r.length=0;for(o=n.length=0;o<t.length;++o){a=t[o];r.push([a[0],a[1]]),n.push(a[2])}}return s};var d=e("union-find"),h=e("box-intersect"),u=e("robust-segment-intersect"),x=e("big-rat"),_=e("big-rat/cmp"),w=e("big-rat/to-float"),M=e("rat-vec"),p=e("nextafter"),j=e("./lib/rat-seg-intersect");function y(e){e=w(e);return[p(e,-1/0),p(e,1/0)]}function l(e){for(var t=new Array(e.length),n=0;n<e.length;++n){var r=e[n];t[n]=[p(r[0],-1/0),p(r[1],-1/0),p(r[0],1/0),p(r[1],1/0)]}return t}function c(e,t){for(var n=t.length,r=new d(n),i=[],o=0;o<t.length;++o){var a=t[o],s=y(a[0]),a=y(a[1]);i.push([p(s[0],-1/0),p(a[0],-1/0),p(s[1],1/0),p(a[1],1/0)])}h(i,function(e,t){r.link(e,t)});for(var l=!0,u=new Array(n),o=0;o<n;++o)(c=r.find(o))!==o&&(l=!1,e[c]=[Math.min(e[o][0],e[c][0]),Math.min(e[o][1],e[c][1])]);if(l)return null;for(var c,f=0,o=0;o<n;++o)(c=r.find(o))===o?(u[o]=f,e[f++]=e[o]):u[o]=-1;e.length=f;for(o=0;o<n;++o)u[o]<0&&(u[o]=u[r.find(o)]);return u}function f(e,t){return e[0]-t[0]||e[1]-t[1]}function g(e,t){var n=e[0]-t[0]||e[1]-t[1];return n||(e[2]<t[2]?-1:e[2]>t[2]?1:0)}function v(e,t,n){if(0!==e.length){if(t)for(var r=0;r<e.length;++r){var i=t[(a=e[r])[0]],o=t[a[1]];a[0]=Math.min(i,o),a[1]=Math.max(i,o)}else for(r=0;r<e.length;++r){var a,i=(a=e[r])[0],o=a[1];a[0]=Math.min(i,o),a[1]=Math.max(i,o)}n?e.sort(g):e.sort(f);for(var s=1,r=1;r<e.length;++r){var l=e[r-1],u=e[r];(u[0]!==l[0]||u[1]!==l[1]||n&&u[2]!==l[2])&&(e[s++]=u)}e.length=s}}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i=s(t,e),t=s(r,n),r=c(i,t);if(0===a(r))return null;n=s(e,n),n=c(t,n),r=o(n,r),r=u(i,r);return l(e,r)};var r=e("big-rat/mul"),o=e("big-rat/div"),i=e("big-rat/sub"),a=e("big-rat/sign"),s=e("rat-vec/sub"),l=e("rat-vec/add"),u=e("rat-vec/muls");function c(e,t){return i(r(e[0],t[1]),r(e[1],t[0]))}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(e,t,n){t.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(e,t,n){"use strict";var y=e("./colorScale"),g=e("lerp");function v(e){return[e[0]/255,e[1]/255,e[2]/255,e[3]]}function m(e){for(var t,n="#",r=0;r<3;++r)n+=("00"+(t=(t=e[r]).toString(16))).substr(t.length);return n}function b(e){return"rgba("+e.join(",")+")"}t.exports=function(e){var t,n,r,i,o,a,s,l,u,c;e=e||{};l=(e.nshades||72)-1,s=e.format||"hex",(a=e.colormap)||(a="jet");if("string"==typeof a){if(a=a.toLowerCase(),!y[a])throw Error(a+" not a supported colorscale");o=y[a]}else{if(!Array.isArray(a))throw Error("unsupported colormap option",a);o=a.slice()}if(o.length>1+l)throw new Error(a+" map requires nshades to be at least size "+o.length);u=Array.isArray(e.alpha)?2!==e.alpha.length?[1,1]:e.alpha.slice():"number"==typeof e.alpha?[e.alpha,e.alpha]:[1,1];t=o.map(function(e){return Math.round(e.index*l)}),u[0]=Math.min(Math.max(u[0],0),1),u[1]=Math.min(Math.max(u[1],0),1);var f=o.map(function(e,t){var n=o[t].index,t=o[t].rgb.slice();return 4===t.length&&0<=t[3]&&t[3]<=1||(t[3]=u[0]+(u[1]-u[0])*n),t}),d=[];for(c=0;c<t.length-1;++c){i=t[c+1]-t[c],n=f[c],r=f[c+1];for(var h=0;h<i;h++){var p=h/i;d.push([Math.round(g(n[0],r[0],p)),Math.round(g(n[1],r[1],p)),Math.round(g(n[2],r[2],p)),g(n[3],r[3],p)])}}d.push(o[o.length-1].rgb.concat(u[1])),"hex"===s?d=d.map(m):"rgbaString"===s?d=d.map(b):"float"===s&&(d=d.map(v));return d}},{"./colorScale":52,lerp:240}],54:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i=s(t,n,r);if(0===i){var o=l(s(e,t,n)),a=l(s(e,t,r));if(o!==a)return 0===a?0<o||c(e,t,r)?-1:1:0===o?0<a||c(e,t,n)?1:-1:l(a-o);if(0!==o)return 0;a=c(e,t,n),o=c(e,t,r);return a===o?0:a?1:-1}a=s(e,t,n);return 0<a?0<i&&0<s(e,t,r)?1:-1:a<0?0<i||0<s(e,t,r)?1:-1:0<s(e,t,r)||c(e,t,n)?1:-1};var s=e("robust-orientation"),l=e("signum"),o=e("two-sum"),a=e("robust-product"),u=e("robust-sum");function c(e,t,n){var r=o(e[0],-t[0]),i=o(e[1],-t[1]),e=o(n[0],-t[0]),t=o(n[1],-t[1]),t=u(a(r,e),a(i,t));return 0<=t[t.length-1]}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(e,t,n){"use strict";t.exports=function(e){return e<0?-1:0<e?1:0}},{}],56:[function(e,t,n){t.exports=function(e,t){var n=e.length,r=e.length-t.length;if(r)return r;switch(n){case 0:return 0;case 1:return e[0]-t[0];case 2:return e[0]+e[1]-t[0]-t[1]||y(e[0],e[1])-y(t[0],t[1]);case 3:var i=e[0]+e[1],o=t[0]+t[1];if(r=i+e[2]-(o+t[2]))return r;var a=y(e[0],e[1]),s=y(t[0],t[1]);return y(a,e[2])-y(s,t[2])||y(a+e[2],i)-y(s+t[2],o);case 4:var l=e[0],u=e[1],c=e[2],f=e[3],a=t[0],i=t[1],s=t[2],o=t[3];return l+u+c+f-(a+i+s+o)||y(l,u,c,f)-y(a,i,s,o,a)||y(l+u,l+c,l+f,u+c,u+f,c+f)-y(a+i,a+s,a+o,i+s,i+o,s+o)||y(l+u+c,l+u+f,l+c+f,u+c+f)-y(a+i+s,a+i+o,a+s+o,i+s+o);default:for(var d=e.slice().sort(g),h=t.slice().sort(g),p=0;p<n;++p)if(r=d[p]-h[p])return r;return 0}};var y=Math.min;function g(e,t){return e-t}},{}],57:[function(e,t,n){"use strict";var r=e("compare-cell"),i=e("cell-orientation");t.exports=function(e,t){return r(e,t)||i(e)-i(t)}},{"cell-orientation":47,"compare-cell":56}],58:[function(e,t,n){"use strict";var r=e("./lib/ch1d"),i=e("./lib/ch2d"),o=e("./lib/chnd");t.exports=function(e){var t=e.length;{if(0===t)return[];if(1===t)return[[0]]}t=e[0].length;{if(0===t)return[];if(1===t)return r(e);if(2===t)return i(e)}return o(e,t)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(e,t,n){"use strict";t.exports=function(e){for(var t=0,n=0,r=1;r<e.length;++r)e[r][0]<e[t][0]&&(t=r),e[r][0]>e[n][0]&&(n=r);return t<n?[[t],[n]]:n<t?[[n],[t]]:[[t]]}},{}],60:[function(e,t,n){"use strict";t.exports=function(e){var t=s(e),n=t.length;if(n<=2)return[];for(var r=new Array(n),i=t[n-1],o=0;o<n;++o){var a=t[o];r[o]=[i,a],i=a}return r};var s=e("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":246}],61:[function(e,t,n){"use strict";t.exports=function(t,n){try{return i(t,!0)}catch(e){var r=o(t);if(r.length<=n)return[];t=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<t.length;++i)r[i]=e[t[i]];for(var o=t.length,i=0;i<n;++i)t.indexOf(i)<0&&(r[o++]=e[i]);return r}(t,r);return function(e,t){for(var n=e.length,r=t.length,i=0;i<n;++i)for(var o=e[i],a=0;a<o.length;++a){var s=o[a];if(s<r)o[a]=t[s];else{s-=r;for(var l=0;l<r;++l)s>=t[l]&&(s+=1);o[a]=s}}return e}(i(t,!0),r)}};var i=e("incremental-convex-hull"),o=e("affine-hull")},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i,o){var a=i-1,s=i*i,l=a*a,u=(1+2*i)*l,c=i*l,f=s*(3-2*i),d=s*a;if(e.length){o=o||new Array(e.length);for(var h=e.length-1;0<=h;--h)o[h]=u*e[h]+c*t[h]+f*n[h]+d*r[h];return o}return u*e+c*t+f*n+d*r},t.exports.derivative=function(e,t,n,r,i,o){var a=6*i*i-6*i,s=3*i*i-4*i+1,l=-6*i*i+6*i,u=3*i*i-2*i;if(e.length){o=o||new Array(e.length);for(var c=e.length-1;0<=c;--c)o[c]=a*e[c]+s*t[c]+l*n[c]+u*r[c];return o}return a*e+s*t+l*n[c]+u*r}},{}],63:[function(e,t,n){"use strict";var m=e("incremental-convex-hull"),b=e("uniq");function x(e,t){this.point=e,this.index=t}function _(e,t){for(var n=e.point,r=t.point,i=n.length,o=0;o<i;++o){var a=r[o]-n[o];if(a)return a}return 0}t.exports=function(e,t){var n=e.length;if(0===n)return[];var i=e[0].length;if(i<1)return[];if(1===i)return function(e,t,n){if(1===e)return n?[[-1,0]]:[];var r=t.map(function(e,t){return[e[0],t]});r.sort(function(e,t){return e[0]-t[0]});for(var i=new Array(e-1),o=1;o<e;++o){var a=r[o-1],s=r[o];i[o-1]=[a[1],s[1]]}n&&i.push([-1,i[0][1]],[i[e-1][1],-1]);return i}(n,e,t);for(var r=new Array(n),o=1,a=0;a<n;++a){for(var s=e[a],l=new Array(i+1),u=0,c=0;c<i;++c){var f=s[c];l[c]=f,u+=f*f}l[i]=u,r[a]=new x(l,a),o=Math.max(u,o)}b(r,_),n=r.length;for(var d=new Array(n+i+1),h=new Array(n+i+1),p=(i+1)*(i+1)*o,y=new Array(i+1),a=0;a<=i;++a)y[a]=0;y[i]=p,d[0]=y.slice(),h[0]=-1;for(a=0;a<=i;++a)(l=y.slice())[a]=1,d[a+1]=l,h[a+1]=-1;for(a=0;a<n;++a){var g=r[a];d[a+i+1]=g.point,h[a+i+1]=g.index}var v=m(d,!1);v=t?v.filter(function(e){for(var t=0,n=0;n<=i;++n){var r=h[e[n]];if(r<0&&2<=++t)return!1;e[n]=r}return!0}):v.filter(function(e){for(var t=0;t<=i;++t){var n=h[e[t]];if(n<0)return!1;e[t]=n}return!0});if(1&i)for(a=0;a<v.length;++a){l=(g=v[a])[0];g[0]=g[1],g[1]=l}return v}},{"incremental-convex-hull":233,uniq:310}],64:[function(e,o,t){!function(t){!function(){var n,r,i,e=!1;"undefined"!=typeof Float64Array&&(n=new Float64Array(1),r=new Uint32Array(n.buffer),n[0]=1,e=!0,1072693248===r[1]?(o.exports=function(e){return n[0]=e,[r[0],r[1]]},o.exports.pack=function(e,t){return r[0]=e,r[1]=t,n[0]},o.exports.lo=function(e){return n[0]=e,r[0]},o.exports.hi=function(e){return n[0]=e,r[1]}):1072693248===r[0]?(o.exports=function(e){return n[0]=e,[r[1],r[0]]},o.exports.pack=function(e,t){return r[1]=e,r[0]=t,n[0]},o.exports.lo=function(e){return n[0]=e,r[1]},o.exports.hi=function(e){return n[0]=e,r[0]}):e=!1),e||(i=new t(8),o.exports=function(e){return i.writeDoubleLE(e,0,!0),[i.readUInt32LE(0,!0),i.readUInt32LE(4,!0)]},o.exports.pack=function(e,t){return i.writeUInt32LE(e,0,!0),i.writeUInt32LE(t,4,!0),i.readDoubleLE(0,!0)},o.exports.lo=function(e){return i.writeDoubleLE(e,0,!0),i.readUInt32LE(0,!0)},o.exports.hi=function(e){return i.writeDoubleLE(e,0,!0),i.readUInt32LE(4,!0)}),o.exports.sign=function(e){return o.exports.hi(e)>>>31},o.exports.exponent=function(e){return(o.exports.hi(e)<<1>>>21)-1023},o.exports.fraction=function(e){var t=o.exports.lo(e),n=o.exports.hi(e),e=1048575&n;return 2146435072&n&&(e+=1<<20),[t,e]},o.exports.denormalized=function(e){return!(2146435072&o.exports.hi(e))}}.call(this)}.call(this,e("buffer").Buffer)},{buffer:3}],65:[function(e,t,n){"use strict";t.exports=function(e,t){switch(void 0===t&&(t=0),typeof e){case"number":if(0<e)return function(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=t;return n}(0|e,t);break;case"object":if("number"==typeof e.length)return function e(t,n,r){var i=0|t[r];if(i<=0)return[];var o,a=new Array(i);if(r===t.length-1)for(o=0;o<i;++o)a[o]=n;else for(o=0;o<i;++o)a[o]=e(t,n,r+1);return a}(e,t,0)}return[]}},{}],66:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.length;if("number"!=typeof t){for(var r=t=0;r<n;++r){var i=e[r];t=Math.max(t,i[0],i[1])}t=1+(0|t)}t|=0;for(var o=new Array(t),r=0;r<t;++r)o[r]=[];for(r=0;r<n;++r){i=e[r];o[i[0]].push(i[1]),o[i[1]].push(i[0])}for(var a=0;a<t;++a)s(o[a],function(e,t){return e-t});return o};var s=e("uniq")},{uniq:310}],67:[function(e,t,n){"use strict";t.exports=function(e,t,n){t=t||0,n=n||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[t*e[12]+e[8],t*e[13]+e[9],t*e[14]+e[10],t*e[15]+e[11]],[n*e[12]-e[8],n*e[13]-e[9],n*e[14]-e[10],n*e[15]-e[11]]]}},{}],68:[function(e,t,n){"use strict";t.exports=function(e,t,n){switch(arguments.length){case 0:return new i([0],[0],0);case 1:return"number"!=typeof e?new i(e,o(e.length),0):new i(r=o(e),r,0);case 2:if("number"==typeof t){var r=o(e.length);return new i(e,r,+t)}n=0;case 3:if(e.length!==t.length)throw new Error("state and velocity lengths must match");return new i(e,t,n)}};var x=e("cubic-hermite"),_=e("binary-search-bounds");function w(e,t,n){return Math.min(t,Math.max(e,n))}function i(e,t,n){this.dimension=e.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var r=0;r<this.dimension;++r)this.bounds[0][r]=-1/0,this.bounds[1][r]=1/0;this._state=e.slice().reverse(),this._velocity=t.slice().reverse(),this._time=[n],this._scratch=[e.slice(),e.slice(),e.slice(),e.slice(),e.slice()]}e=i.prototype;function o(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}e.flush=function(e){e=_.gt(this._time,e)-1;e<=0||(this._time.splice(0,e),this._state.splice(0,e*this.dimension),this._velocity.splice(0,e*this.dimension))},e.curve=function(e){var t=this._time,n=t.length,r=_.le(t,e),i=this._scratch[0],o=this._state,a=this._velocity,s=this.dimension,l=this.bounds;if(r<0)for(var u=s-1,c=0;c<s;++c,--u)i[c]=o[u];else if(n-1<=r)for(var u=o.length-1,f=e-t[n-1],c=0;c<s;++c,--u)i[c]=o[u]+f*a[u];else{for(var u=s*(r+1)-1,n=t[r],d=t[r+1]-n||1,h=this._scratch[1],p=this._scratch[2],y=this._scratch[3],g=this._scratch[4],v=!0,c=0;c<s;++c,--u)h[c]=o[u],y[c]=a[u]*d,p[c]=o[u+s],g[c]=a[u+s]*d,v=v&&h[c]===p[c]&&y[c]===g[c]&&0===y[c];if(v)for(c=0;c<s;++c)i[c]=h[c];else x(h,y,p,g,(e-n)/d,i)}for(var m=l[0],b=l[1],c=0;c<s;++c)i[c]=w(m[c],b[c],i[c]);return i},e.dcurve=function(e){var t=this._time,n=t.length,r=_.le(t,e),i=this._scratch[0],o=this._state,a=this._velocity,s=this.dimension;if(n-1<=r)for(var l=o.length-1,u=(t[n-1],0);u<s;++u,--l)i[u]=a[l];else{for(var l=s*(r+1)-1,n=t[r],c=t[r+1]-n||1,f=this._scratch[1],d=this._scratch[2],h=this._scratch[3],p=this._scratch[4],y=!0,u=0;u<s;++u,--l)f[u]=o[l],h[u]=a[l]*c,d[u]=o[l+s],p[u]=a[l+s]*c,y=y&&f[u]===d[u]&&h[u]===p[u]&&0===h[u];if(y)for(u=0;u<s;++u)i[u]=0;else{x.derivative(f,h,d,p,(e-n)/c,i);for(u=0;u<s;++u)i[u]/=c}}return i},e.lastT=function(){var e=this._time;return e[e.length-1]},e.stable=function(){for(var e=this._velocity,t=e.length,n=this.dimension-1;0<=n;--n)if(e[--t])return!1;return!0},e.jump=function(e){var t=this.lastT(),n=this.dimension;if(!(e<t||arguments.length!==n+1)){var r=this._state,i=this._velocity,o=r.length-this.dimension,a=this.bounds,s=a[0],l=a[1];this._time.push(t,e);for(var u=0;u<2;++u)for(var c=0;c<n;++c)r.push(r[o++]),i.push(0);this._time.push(e);for(c=n;0<c;--c)r.push(w(s[c-1],l[c-1],arguments[c])),i.push(0)}},e.push=function(e){var t=this.lastT(),n=this.dimension;if(!(e<t||arguments.length!==n+1)){var r=this._state,i=this._velocity,o=r.length-this.dimension,a=e-t,t=this.bounds,s=t[0],l=t[1],u=1e-6<a?1/a:0;this._time.push(e);for(var c=n;0<c;--c){var f=w(s[c-1],l[c-1],arguments[c]);r.push(f),i.push((f-r[o++])*u)}}},e.set=function(e){var t=this.dimension;if(!(e<this.lastT()||arguments.length!==t+1)){var n=this._state,r=this._velocity,i=this.bounds,o=i[0],a=i[1];this._time.push(e);for(var s=t;0<s;--s)n.push(w(o[s-1],a[s-1],arguments[s])),r.push(0)}},e.move=function(e){var t=this.lastT(),n=this.dimension;if(!(e<=t||arguments.length!==n+1)){var r=this._state,i=this._velocity,o=r.length-this.dimension,a=this.bounds,s=a[0],l=a[1],t=e-t,u=1e-6<t?1/t:0;this._time.push(e);for(var c=n;0<c;--c){var f=arguments[c];r.push(w(s[c-1],l[c-1],r[o++]+f)),i.push(f*u)}}},e.idle=function(e){var t=this.lastT();if(!(e<t)){var n=this.dimension,r=this._state,i=this._velocity,o=r.length-n,a=this.bounds,s=a[0],l=a[1],u=e-t;this._time.push(e);for(var c=n-1;0<=c;--c)r.push(w(s[c],l[c],r[o]+u*i[o])),i.push(0),o+=1}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(e,t,n){"use strict";t.exports=function(e){return new y(e||r,null)};function d(e,t,n,r,i,o){this._color=e,this.key=t,this.value=n,this.left=r,this.right=i,this._count=o}function s(e){return new d(e._color,e.key,e.value,e.left,e.right,e._count)}function h(e,t){return new d(e,t.key,t.value,t.left,t.right,t._count)}function p(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function y(e,t){this._compare=e,this.root=t}t=y.prototype;function a(e,t){this.tree=e,this._stack=t}Object.defineProperty(t,"keys",{get:function(){var n=[];return this.forEach(function(e,t){n.push(e)}),n}}),Object.defineProperty(t,"values",{get:function(){var n=[];return this.forEach(function(e,t){n.push(t)}),n}}),Object.defineProperty(t,"length",{get:function(){return this.root?this.root._count:0}}),t.insert=function(e,t){for(var n=this._compare,r=this.root,i=[],o=[];r;){var a=n(e,r.key);i.push(r),o.push(a),r=a<=0?r.left:r.right}i.push(new d(0,e,t,null,null,1));for(var s=i.length-2;0<=s;--s){r=i[s];o[s]<=0?i[s]=new d(r._color,r.key,r.value,i[s+1],r.right,r._count+1):i[s]=new d(r._color,r.key,r.value,r.left,i[s+1],r._count+1)}for(s=i.length-1;1<s;--s){var l=i[s-1],r=i[s];if(1===l._color||1===r._color)break;var u,c,f=i[s-2];if(f.left===l)if(l.left===r){if(!(u=f.right)||0!==u._color){f._color=0,f.left=l.right,l._color=1,l.right=f,i[s-2]=l,i[s-1]=r,p(f),p(l),3<=s&&((c=i[s-3]).left===f?c.left=l:c.right=l);break}l._color=1,f.right=h(1,u),f._color=0,--s}else{if(!(u=f.right)||0!==u._color){l.right=r.left,f._color=0,f.left=r.right,r._color=1,r.left=l,r.right=f,i[s-2]=r,i[s-1]=l,p(f),p(l),p(r),3<=s&&((c=i[s-3]).left===f?c.left=r:c.right=r);break}l._color=1,f.right=h(1,u),f._color=0,--s}else if(l.right===r){if(!(u=f.left)||0!==u._color){f._color=0,f.right=l.left,l._color=1,l.left=f,i[s-2]=l,i[s-1]=r,p(f),p(l),3<=s&&((c=i[s-3]).right===f?c.right=l:c.left=l);break}l._color=1,f.left=h(1,u),f._color=0,--s}else{if(!(u=f.left)||0!==u._color){l.left=r.right,f._color=0,f.right=r.left,r._color=1,r.right=l,r.left=f,i[s-2]=r,i[s-1]=l,p(f),p(l),p(r),3<=s&&((c=i[s-3]).right===f?c.right=r:c.left=r);break}l._color=1,f.left=h(1,u),f._color=0,--s}}return i[0]._color=1,new y(n,i[0])},t.forEach=function(e,t,n){if(this.root)switch(arguments.length){case 1:return function e(t,n){var r;if(n.left&&(r=e(t,n.left)))return r;return(r=t(n.key,n.value))?r:n.right?e(t,n.right):void 0}(e,this.root);case 2:return function e(t,n,r,i){var o;if(n(t,i.key)<=0){if(i.left&&(o=e(t,n,r,i.left)))return o;if(o=r(i.key,i.value))return o}if(i.right)return e(t,n,r,i.right)}(t,this._compare,e,this.root);case 3:return 0<=this._compare(t,n)?void 0:function e(t,n,r,i,o){var a,s=r(t,o.key),l=r(n,o.key);if(s<=0){if(o.left&&(a=e(t,n,r,i,o.left)))return a;if(0<l&&(a=i(o.key,o.value)))return a}if(0<l&&o.right)return e(t,n,r,i,o.right)}(t,n,this._compare,e,this.root)}},Object.defineProperty(t,"begin",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.left;return new a(this,e)}}),Object.defineProperty(t,"end",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.right;return new a(this,e)}}),t.at=function(e){if(e<0)return new a(this,[]);for(var t=this.root,n=[];;){if(n.push(t),t.left){if(e<t.left._count){t=t.left;continue}e-=t.left._count}if(!e)return new a(this,n);if(--e,!t.right)break;if(e>=t.right._count)break;t=t.right}return new a(this,[])},t.ge=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var o=t(e,n.key);r.push(n),o<=0&&(i=r.length),n=o<=0?n.left:n.right}return r.length=i,new a(this,r)},t.gt=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var o=t(e,n.key);r.push(n),o<0&&(i=r.length),n=o<0?n.left:n.right}return r.length=i,new a(this,r)},t.lt=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var o=t(e,n.key);r.push(n),0<o&&(i=r.length),n=o<=0?n.left:n.right}return r.length=i,new a(this,r)},t.le=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var o=t(e,n.key);r.push(n),0<=o&&(i=r.length),n=o<0?n.left:n.right}return r.length=i,new a(this,r)},t.find=function(e){for(var t=this._compare,n=this.root,r=[];n;){var i=t(e,n.key);if(r.push(n),0===i)return new a(this,r);n=i<=0?n.left:n.right}return new a(this,[])},t.remove=function(e){e=this.find(e);return e?e.remove():this},t.get=function(e){for(var t=this._compare,n=this.root;n;){var r=t(e,n.key);if(0===r)return n.value;n=r<=0?n.left:n.right}};t=a.prototype;function l(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e._color=t._color,e._count=t._count}function r(e,t){return e<t?-1:t<e?1:0}Object.defineProperty(t,"valid",{get:function(){return 0<this._stack.length}}),Object.defineProperty(t,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0}),t.clone=function(){return new a(this.tree,this._stack.slice())},t.remove=function(){var e=this._stack;if(0===e.length)return this.tree;var t=new Array(e.length),n=e[e.length-1];t[t.length-1]=new d(n._color,n.key,n.value,n.left,n.right,n._count);for(var r=e.length-2;0<=r;--r)(n=e[r]).left===e[r+1]?t[r]=new d(n._color,n.key,n.value,t[r+1],n.right,n._count):t[r]=new d(n._color,n.key,n.value,n.left,t[r+1],n._count);if((n=t[t.length-1]).left&&n.right){var i=t.length;for(n=n.left;n.right;)t.push(n),n=n.right;var o=t[i-1];t.push(new d(n._color,o.key,o.value,n.left,n.right,n._count)),t[i-1].key=n.key,t[i-1].value=n.value;for(r=t.length-2;i<=r;--r)n=t[r],t[r]=new d(n._color,n.key,n.value,n.left,t[r+1],n._count);t[i-1].left=t[i]}if(0===(n=t[t.length-1])._color){var a=t[t.length-2];a.left===n?a.left=null:a.right===n&&(a.right=null),t.pop();for(r=0;r<t.length;++r)t[r]._count--;return new y(this.tree._compare,t[0])}if(n.left||n.right){n.left?l(n,n.left):n.right&&l(n,n.right),n._color=1;for(r=0;r<t.length-1;++r)t[r]._count--;return new y(this.tree._compare,t[0])}if(1===t.length)return new y(this.tree._compare,null);for(r=0;r<t.length;++r)t[r]._count--;a=t[t.length-2];return function(e){for(var t,n,r=e.length-1;0<=r;--r){if(t=e[r],0===r)return t._color=1;if((n=e[r-1]).left===t){if((o=n.right).right&&0===o.right._color){var i,o,a=(o=n.right=s(o)).right=s(o.right);return n.right=o.left,o.left=n,o.right=a,o._color=n._color,t._color=1,n._color=1,a._color=1,p(n),p(o),1<r&&((i=e[r-2]).left===n?i.left=o:i.right=o),e[r-1]=o}if(o.left&&0===o.left._color)return a=(o=n.right=s(o)).left=s(o.left),n.right=a.left,o.left=a.right,a.left=n,a.right=o,a._color=n._color,n._color=1,o._color=1,t._color=1,p(n),p(o),p(a),1<r&&((i=e[r-2]).left===n?i.left=a:i.right=a),e[r-1]=a;if(1!==o._color)o=s(o),n.right=o.left,o.left=n,o._color=n._color,n._color=0,p(n),p(o),1<r&&((i=e[r-2]).left===n?i.left=o:i.right=o),e[r-1]=o,e[r]=n,r+1<e.length?e[r+1]=t:e.push(t),r+=2;else{if(0===n._color)return n._color=1,n.right=h(0,o);n.right=h(0,o)}}else{if((o=n.left).left&&0===o.left._color)return a=(o=n.left=s(o)).left=s(o.left),n.left=o.right,o.right=n,o.left=a,o._color=n._color,t._color=1,n._color=1,a._color=1,p(n),p(o),1<r&&((i=e[r-2]).right===n?i.right=o:i.left=o),e[r-1]=o;if(o.right&&0===o.right._color)return a=(o=n.left=s(o)).right=s(o.right),n.left=a.right,o.right=a.left,a.right=n,a.left=o,a._color=n._color,n._color=1,o._color=1,t._color=1,p(n),p(o),p(a),1<r&&((i=e[r-2]).right===n?i.right=a:i.left=a),e[r-1]=a;if(1!==o._color)o=s(o),n.left=o.right,o.right=n,o._color=n._color,n._color=0,p(n),p(o),1<r&&((i=e[r-2]).right===n?i.right=o:i.left=o),e[r-1]=o,e[r]=n,r+1<e.length?e[r+1]=t:e.push(t),r+=2;else{if(0===n._color)return n._color=1,n.left=h(0,o);n.left=h(0,o)}}}}(t),a.left===n?a.left=null:a.right=null,new y(this.tree._compare,t[0])},Object.defineProperty(t,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(t,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(t,"index",{get:function(){var e=0,t=this._stack;if(0===t.length){var n=this.tree.root;return n?n._count:0}t[t.length-1].left&&(e=t[t.length-1].left._count);for(var r=t.length-2;0<=r;--r)t[r+1]===t[r].right&&(++e,t[r].left&&(e+=t[r].left._count));return e},enumerable:!0}),t.next=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.right)for(t=t.right;t;)e.push(t),t=t.left;else for(e.pop();0<e.length&&e[e.length-1].right===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(t,"hasNext",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].right)return!0;for(var t=e.length-1;0<t;--t)if(e[t-1].left===e[t])return!0;return!1}}),t.update=function(e){var t=this._stack;if(0===t.length)throw new Error("Can't update empty node!");var n=new Array(t.length),r=t[t.length-1];n[n.length-1]=new d(r._color,r.key,e,r.left,r.right,r._count);for(var i=t.length-2;0<=i;--i)(r=t[i]).left===t[i+1]?n[i]=new d(r._color,r.key,r.value,n[i+1],r.right,r._count):n[i]=new d(r._color,r.key,r.value,r.left,n[i+1],r._count);return new y(this.tree._compare,n[0])},t.prev=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.left)for(t=t.left;t;)e.push(t),t=t.right;else for(e.pop();0<e.length&&e[e.length-1].left===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(t,"hasPrev",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].left)return!0;for(var t=e.length-1;0<t;--t)if(e[t-1].right===e[t])return!0;return!1}})},{}],70:[function(e,t,n){"use strict";t.exports=function(e,t){e=new i(e);return e.update(t),e};var h=e("./lib/text.js"),p=e("./lib/lines.js"),r=e("./lib/background.js"),D=e("./lib/cube.js"),y=e("./lib/ticks.js"),N=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function F(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function i(e){this.gl=e,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=r(e)}e=i.prototype;function o(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}e.update=function(s){function e(e,t,n){if(n in s){var r,i=s[n],o=this[n];(e?Array.isArray(i)&&Array.isArray(i[0]):Array.isArray(i))?this[n]=r=[t(i[0]),t(i[1]),t(i[2])]:this[n]=r=[t(i),t(i),t(i)];for(var a=0;a<3;++a)if(r[a]!==o[a])return!0}return!1}s=s||{};var t,n=e.bind(this,!1,Number),r=e.bind(this,!1,Boolean),i=e.bind(this,!1,String),o=e.bind(this,!0,function(e){if(Array.isArray(e)){if(3===e.length)return[+e[0],+e[1],+e[2],1];if(4===e.length)return[+e[0],+e[1],+e[2],+e[3]]}return[0,0,0,1]}),a=!1,l=!1;if("bounds"in s)for(var u=s.bounds,c=0;c<2;++c)for(var f=0;f<3;++f)u[c][f]!==this.bounds[c][f]&&(l=!0),this.bounds[c][f]=u[c][f];if("ticks"in s){t=s.ticks,this.autoTicks=!(a=!0);for(c=0;c<3;++c)this.tickSpacing[c]=0}else n("tickSpacing")&&(l=this.autoTicks=!0);if(this._firstInit&&("ticks"in s||"tickSpacing"in s||(this.autoTicks=!0),this._firstInit=!(a=l=!0)),l&&this.autoTicks&&(t=y.create(this.bounds,this.tickSpacing),a=!0),a){for(c=0;c<3;++c)t[c].sort(function(e,t){return e.x-t.x});y.equal(t,this.ticks)?a=!1:this.ticks=t}r("tickEnable"),i("tickFont")&&(a=!0),n("tickSize"),n("tickAngle"),n("tickPad"),o("tickColor");var d=i("labels");i("labelFont")&&(d=!0),r("labelEnable"),n("labelSize"),n("labelPad"),o("labelColor"),r("lineEnable"),r("lineMirror"),n("lineWidth"),o("lineColor"),r("lineTickEnable"),r("lineTickMirror"),n("lineTickLength"),n("lineTickWidth"),o("lineTickColor"),r("gridEnable"),n("gridWidth"),o("gridColor"),r("zeroEnable"),o("zeroLineColor"),n("zeroLineWidth"),r("backgroundEnable"),o("backgroundColor"),this._text?this._text&&(d||a)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=h(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&a&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=p(this.gl,this.bounds,this.ticks))};var B=[new o,new o,new o];var U=[0,0,0],q={model:N,view:N,projection:N,_ortho:!1};e.isOpaque=function(){return!0},e.isTransparent=function(){return!1},e.drawTransparent=function(e){};var H=[0,0,0],V=[0,0,0],G=[0,0,0];e.draw=function(e){for(var t=this.gl,n=(e=e||q).model||N,r=e.view||N,i=e.projection||N,o=this.bounds,a=e._ortho||!1,s=D(n,r,i,o,a),l=s.cubeEdges,u=s.axis,c=r[12],f=r[13],e=r[14],s=r[15],d=(a?2:1)*this.pixelRatio*(i[3]*c+i[7]*f+i[11]*e+i[15]*s)/t.drawingBufferHeight,h=0;h<3;++h)this.lastCubeProps.cubeEdges[h]=l[h],this.lastCubeProps.axis[h]=u[h];for(var p=B,h=0;h<3;++h)!function(e,t,n,r,i){for(var o,a,s,l,u=e.primalOffset,c=e.primalMinor,f=e.mirrorOffset,d=e.mirrorMinor,h=r[t],p=0;p<3;++p)t!==p&&(o=u,a=f,s=c,l=d,h&1<<p&&(o=f,a=u,s=d,l=c),o[p]=n[0][p],a[p]=n[1][p],0<i[p]?(s[p]=-1,l[p]=0):(s[p]=0,l[p]=1))}(B[h],h,this.bounds,l,u);this.gl;for(var y=U,h=0;h<3;++h)this.backgroundEnable[h]?y[h]=u[h]:y[h]=0;this._background.draw(n,r,i,o,y,this.backgroundColor),this._lines.bind(n,r,i,this);for(h=0;h<3;++h){var g=[0,0,0];0<u[h]?g[h]=o[1][h]:g[h]=o[0][h];for(var v=0;v<2;++v){var m=(h+1+v)%3,b=(h+1+(1^v))%3;this.gridEnable[m]&&this._lines.drawGrid(m,b,this.bounds,g,this.gridColor[m],this.gridWidth[m]*this.pixelRatio)}for(v=0;v<2;++v){m=(h+1+v)%3,b=(h+1+(1^v))%3;this.zeroEnable[b]&&Math.min(o[0][b],o[1][b])<=0&&0<=Math.max(o[0][b],o[1][b])&&this._lines.drawZero(m,b,this.bounds,g,this.zeroLineColor[b],this.zeroLineWidth[b]*this.pixelRatio)}}for(var x,h=0;h<3;++h){this.lineEnable[h]&&this._lines.drawAxisLine(h,this.bounds,p[h].primalOffset,this.lineColor[h],this.lineWidth[h]*this.pixelRatio),this.lineMirror[h]&&this._lines.drawAxisLine(h,this.bounds,p[h].mirrorOffset,this.lineColor[h],this.lineWidth[h]*this.pixelRatio);for(var _=F(H,p[h].primalMinor),w=F(V,p[h].mirrorMinor),M=this.lineTickLength,v=0;v<3;++v){var j=d/n[5*v];_[v]*=M[v]*j,w[v]*=M[v]*j}this.lineTickEnable[h]&&this._lines.drawAxisTicks(h,p[h].primalOffset,_,this.lineTickColor[h],this.lineTickWidth[h]*this.pixelRatio),this.lineTickMirror[h]&&this._lines.drawAxisTicks(h,p[h].mirrorOffset,w,this.lineTickColor[h],this.lineTickWidth[h]*this.pixelRatio)}this._lines.unbind(),this._text.bind(n,r,i,this.pixelRatio);var k,O;function A(e){(O=[0,0,0])[e]=1}for(var T,P,S,E,C,h=0;h<3;++h){for(var L=p[h].primalMinor,R=p[h].mirrorMinor,I=F(G,p[h].primalOffset),v=0;v<3;++v)this.lineTickEnable[h]&&(I[v]+=d*L[v]*Math.max(this.lineTickLength[v],0)/n[5*v]);var z=[0,0,0];if(z[h]=1,this.tickEnable[h]){-3600===this.tickAngle[h]?(this.tickAngle[h]=0,this.tickAlign[h]="auto"):this.tickAlign[h]=-1,"auto"===(x=[this.tickAlign[h],.5,k=1])[0]?x[0]=0:x[0]=parseInt(""+x[0]),O=[0,0,0],P=R,C=E=S=void 0,E=((T=h)+2)%3,C=(R=L)[S=(T+1)%3],T=R[E],R=P[S],P=P[E],0<C&&0<P||0<C&&P<0||C<0&&0<P||C<0&&P<0?A(S):(0<T&&0<R||0<T&&R<0||T<0&&0<R||T<0&&R<0)&&A(E);for(v=0;v<3;++v)I[v]+=d*L[v]*this.tickPad[v]/n[5*v];this._text.drawTicks(h,this.tickSize[h],this.tickAngle[h],I,this.tickColor[h],z,O,x)}if(this.labelEnable[h]){O=[k=0,0,0],4<this.labels[h].length&&(A(h),k=1),"auto"===(x=[this.labelAlign[h],.5,k])[0]?x[0]=0:x[0]=parseInt(""+x[0]);for(v=0;v<3;++v)I[v]+=d*L[v]*this.labelPad[v]/n[5*v];I[h]+=.5*(o[0][h]+o[1][h]),this._text.drawLabel(h,this.labelSize[h],this.labelAngle[h],I,this.labelColor[h],[0,0,0],O,x)}}this._text.unbind()},e.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(e,t,n){"use strict";t.exports=function(e){for(var t=[],n=[],r=0,i=0;i<3;++i)for(var o=(i+1)%3,a=(i+2)%3,s=[0,0,0],l=[0,0,0],u=-1;u<=1;u+=2){n.push(r,r+2,r+1,r+1,r+2,r+3),s[i]=u,l[i]=u;for(var c=-1;c<=1;c+=2){s[o]=c;for(var f=-1;f<=1;f+=2)s[a]=f,t.push(s[0],s[1],s[2],l[0],l[1],l[2]),r+=1}var d=o;o=a,a=d}var h=g(e,new Float32Array(t)),p=g(e,new Uint16Array(n),e.ELEMENT_ARRAY_BUFFER),y=v(e,[{buffer:h,type:e.FLOAT,size:3,offset:0,stride:24},{buffer:h,type:e.FLOAT,size:3,offset:12,stride:24}],p),p=m(e);return p.attributes.position.location=0,p.attributes.normal.location=1,new b(e,h,y,p)};var g=e("gl-buffer"),v=e("gl-vao"),m=e("./shaders").bg;function b(e,t,n,r){this.gl=e,this.buffer=t,this.vao=n,this.shader=r}e=b.prototype;e.draw=function(e,t,n,r,i,o){for(var a,s=!1,l=0;l<3;++l)s=s||i[l];s&&((a=this.gl).enable(a.POLYGON_OFFSET_FILL),a.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:e,view:t,projection:n,bounds:r,enable:i,colors:o},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),a.disable(a.POLYGON_OFFSET_FILL))},e.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i){S(L,t,e),S(L,n,L);for(var o=0,a=0;a<2;++a){z[2]=r[a][2];for(var s=0;s<2;++s){z[1]=r[s][1];for(var l=0;l<2;++l)z[0]=r[l][0],function(e,t,n){for(var r=0;r<4;++r){e[r]=n[12+r];for(var i=0;i<3;++i)e[r]+=t[i]*n[4*i+r]}}(R[o],z,L),o+=1}}for(var u=-1,a=0;a<8;++a){for(var c=R[a][3],f=0;f<3;++f)I[a][f]=R[a][f]/c;i&&(I[a][2]*=-1),c<0&&(u<0||I[a][2]<I[u][2])&&(u=a)}if(u<0)for(var d=u=0;d<3;++d){for(var h=(d+2)%3,p=(d+1)%3,y=-1,g=-1,v=0;v<2;++v){var m=(x=v<<d)+(v<<h)+(1-v<<p),b=x+(1-v<<h)+(v<<p);C(I[x],I[m],I[b],D)<0||(v?y=1:g=1)}if(y<0||g<0)y<g&&(u|=1<<d);else{for(v=0;v<2;++v){var x,m=(x=v<<d)+(v<<h)+(1-v<<p),b=x+(1-v<<h)+(v<<p),_=function(e){for(var t=0;t<N.length;++t)if((e=E.positive(e,N[t])).length<3)return 0;for(var n=e[0],r=n[0]/n[3],i=n[1]/n[3],o=0,t=1;t+1<e.length;++t){var a=e[t],s=e[t+1],l=a[0]/a[3],u=a[1]/a[3],a=s[0]/s[3],s=s[1]/s[3],l=l-r,u=u-i,a=a-r,s=s-i;o+=Math.abs(l*s-u*a)}return o}([R[x],R[m],R[b],R[x+(1<<h)+(1<<p)]]);v?y=_:g=_}y<g&&(u|=1<<d)}}for(var w=7^u,M=-1,a=0;a<8;++a)a!==u&&a!==w&&(M<0||I[M][1]>I[a][1])&&(M=a);for(var j=-1,a=0;a<3;++a)(O=M^1<<a)!==u&&O!==w&&(j<0&&(j=O),(p=I[O])[0]<I[j][0]&&(j=O));for(var k=-1,a=0;a<3;++a){var O;(O=M^1<<a)!==u&&O!==w&&O!==j&&(k<0&&(k=O),(p=I[O])[0]>I[k][0]&&(k=O))}e=F;e[0]=e[1]=e[2]=0,e[P.log2(j^M)]=M&j,e[P.log2(M^k)]=M&k;n=7^k;n===u||n===w?(n=7^j,e[P.log2(k^n)]=n&k):e[P.log2(j^n)]=n&j;for(var A=B,T=u,d=0;d<3;++d)A[d]=T&1<<d?-1:1;return U};var P=e("bit-twiddle"),S=e("gl-mat4/multiply"),E=e("split-polygon"),C=e("robust-orientation"),L=new Array(16),R=new Array(8),I=new Array(8),z=new Array(3),D=[0,0,0];!function(){for(var e=0;e<8;++e)R[e]=[1,1,1,1],I[e]=[1,1,1]}();var N=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];var F=[1,1,1],B=[0,0,0],U={cubeEdges:F,axis:B}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r=[],i=[0,0,0],o=[0,0,0],a=[0,0,0],s=[0,0,0];r.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var l=0;l<3;++l){for(var u=r.length/3|0,c=0;c<n[l].length;++c){var f=+n[l][c].x;r.push(f,0,1,f,1,1,f,0,-1,f,0,-1,f,1,1,f,1,-1)}var d=r.length/3|0;i[l]=u,o[l]=d-u;for(var u=r.length/3|0,h=0;h<n[l].length;++h){f=+n[l][h].x;r.push(f,0,1,f,1,1,f,0,-1,f,0,-1,f,1,1,f,1,-1)}d=r.length/3|0;a[l]=u,s[l]=d-u}var p=v(e,new Float32Array(r)),y=m(e,[{buffer:p,type:e.FLOAT,size:3,stride:0,offset:0}]),g=b(e);return g.attributes.position.location=0,new x(e,p,y,g,o,i,s,a)};var v=e("gl-buffer"),m=e("gl-vao"),b=e("./shaders").line,s=[0,0,0],l=[0,0,0],u=[0,0,0],c=[0,0,0],r=[1,1];function f(e){return e[0]=e[1]=e[2]=0,e}function d(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function x(e,t,n,r,i,o,a,s){this.gl=e,this.vertBuffer=t,this.vao=n,this.shader=r,this.tickCount=i,this.tickOffset=o,this.gridCount=a,this.gridOffset=s}e=x.prototype;e.bind=function(e,t,n){this.shader.bind(),this.shader.uniforms.model=e,this.shader.uniforms.view=t,this.shader.uniforms.projection=n,r[0]=this.gl.drawingBufferWidth,r[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=r,this.vao.bind()},e.unbind=function(){this.vao.unbind()},e.drawAxisLine=function(e,t,n,r,i){var o=f(l);this.shader.uniforms.majorAxis=l,o[e]=t[1][e]-t[0][e],this.shader.uniforms.minorAxis=o;n=d(c,n);n[e]+=t[0][e],this.shader.uniforms.offset=n,this.shader.uniforms.lineWidth=i,this.shader.uniforms.color=r;var r=f(u);r[(e+2)%3]=1,this.shader.uniforms.screenAxis=r,this.vao.draw(this.gl.TRIANGLES,6),(r=f(u))[(e+1)%3]=1,this.shader.uniforms.screenAxis=r,this.vao.draw(this.gl.TRIANGLES,6)},e.drawAxisTicks=function(e,t,n,r,i){var o;this.tickCount[e]&&((o=f(s))[e]=1,this.shader.uniforms.majorAxis=o,this.shader.uniforms.offset=t,this.shader.uniforms.minorAxis=n,this.shader.uniforms.color=r,this.shader.uniforms.lineWidth=i,(i=f(u))[e]=1,this.shader.uniforms.screenAxis=i,this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e]))},e.drawGrid=function(e,t,n,r,i,o){var a;this.gridCount[e]&&((a=f(l))[t]=n[1][t]-n[0][t],this.shader.uniforms.minorAxis=a,(r=d(c,r))[t]+=n[0][t],this.shader.uniforms.offset=r,(r=f(s))[e]=1,this.shader.uniforms.majorAxis=r,(r=f(u))[e]=1,this.shader.uniforms.screenAxis=r,this.shader.uniforms.lineWidth=o,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,this.gridCount[e],this.gridOffset[e]))},e.drawZero=function(e,t,n,r,i,o){var a=f(l);(this.shader.uniforms.majorAxis=a)[e]=n[1][e]-n[0][e],this.shader.uniforms.minorAxis=a;r=d(c,r);r[e]+=n[0][e],this.shader.uniforms.offset=r;r=f(u);r[t]=1,this.shader.uniforms.screenAxis=r,this.shader.uniforms.lineWidth=o,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,6)},e.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(e,t,n){"use strict";var r=e("glslify"),i=e("gl-shader"),o=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),a=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);n.line=function(e){return i(e,o,a,null,[{name:"position",type:"vec3"}])};var s=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),l=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);n.text=function(e){return i(e,s,l,null,[{name:"position",type:"vec3"}])};var u=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),c=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);n.bg=function(e){return i(e,u,c,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(n,r,e){!function(t){!function(){"use strict";r.exports=function(e,t,n,r,i,o){var a=u(e),s=c(e,[{buffer:a,size:3}]),l=f(e);l.attributes.position.location=0;s=new d(e,l,a,s);return s.update(t,n,r,i,o),s};var u=n("gl-buffer"),c=n("gl-vao"),v=n("vectorize-text"),f=n("./shaders").text,e=window||t.global||{},m=e.__TEXT_CACHE||{};e.__TEXT_CACHE={};function d(e,t,n,r){this.gl=e,this.shader=t,this.buffer=n,this.vao=r,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var e=d.prototype,o=[0,0];e.bind=function(e,t,n,r){this.vao.bind(),this.shader.bind();var i=this.shader.uniforms;i.model=e,i.view=t,i.projection=n,i.pixelScale=r,o[0]=this.gl.drawingBufferWidth,o[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=o},e.unbind=function(){this.vao.unbind()},e.update=function(e,t,n,r,i){var g=[];function o(e,t,n,r,i,o){for(var a=m[n],s=(a=a||(m[n]={}))[t],l=(r||12)/12,u=(s=s||(a[t]=function(t,e){try{return v(t,e)}catch(e){return console.warn('error vectorizing text:"'+t+'" error:',e),{cells:[],positions:[]}}}(t,{triangles:!0,font:n,textAlign:"center",textBaseline:"middle",lineSpacing:i,styletags:o}))).positions,c=s.cells,f=0,d=c.length;f<d;++f)for(var h=c[f],p=2;0<=p;--p){var y=u[h[p]];g.push(l*y[0],-l*y[1],e)}}for(var a=[0,0,0],s=[0,0,0],l=[0,0,0],u=[0,0,0],c={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},f=0;f<3;++f){l[f]=g.length/3|0,o(.5*(e[0][f]+e[1][f]),t[f],n[f],12,1.25,c),u[f]=(g.length/3|0)-l[f],a[f]=g.length/3|0;for(var d=0;d<r[f].length;++d)r[f][d].text&&o(r[f][d].x,r[f][d].text,r[f][d].font||i,r[f][d].fontSize||12,1.25,c);s[f]=(g.length/3|0)-a[f]}this.buffer.update(g),this.tickOffset=a,this.tickCount=s,this.labelOffset=l,this.labelCount=u},e.drawTicks=function(e,t,n,r,i,o,a,s){this.tickCount[e]&&(this.shader.uniforms.axis=o,this.shader.uniforms.color=i,this.shader.uniforms.angle=n,this.shader.uniforms.scale=t,this.shader.uniforms.offset=r,this.shader.uniforms.alignDir=a,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e]))},e.drawLabel=function(e,t,n,r,i,o,a,s){this.labelCount[e]&&(this.shader.uniforms.axis=o,this.shader.uniforms.color=i,this.shader.uniforms.angle=n,this.shader.uniforms.scale=t,this.shader.uniforms.offset=r,this.shader.uniforms.alignDir=a,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.labelCount[e],this.labelOffset[e]))},e.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}.call(this)}.call(this,n("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(e,t,n){"use strict";function a(e,t){var n=e+"",r=n.indexOf("."),i=0;0<=r&&(i=n.length-r-1);r=Math.pow(10,i),e=Math.round(e*t*r),t=e+"";if(0<=t.indexOf("e"))return t;t=e/r,r=e%r;e<0?(t=0|-Math.ceil(t),r=0|-r):(t=0|Math.floor(t),r|=0);t=""+t;if(e<0&&(t="-"+t),i){for(var o=""+r;o.length<i;)o="0"+o;return t+"."+o}return t}n.create=function(e,t){for(var n=[],r=0;r<3;++r){for(var i=[],o=(e[0][r],e[1][r],0);o*t[r]<=e[1][r];++o)i.push({x:o*t[r],text:a(t[r],o)});for(o=-1;o*t[r]>=e[0][r];--o)i.push({x:o*t[r],text:a(t[r],o)});n.push(i)}return n},n.equal=function(e,t){for(var n=0;n<3;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;++r){var i=e[n][r],o=t[n][r];if(i.x!==o.x||i.text!==o.text||i.font!==o.font||i.fontColor!==o.fontColor||i.fontSize!==o.fontSize||i.dx!==o.dx||i.dy!==o.dy)return!1}}return!0}},{}],77:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i){var o=t.model||P,a=t.view||P,s=t.projection||P,l=t._ortho||!1,u=e.bounds,c=(i=i||k(o,a,s,u,l)).axis;O(S,a,o),O(S,s,S);for(var f=L,d=0;d<3;++d)f[d].lo=1/0,f[d].hi=-1/0,f[d].pixelsPerDataUnit=1/0;var h=M(A(S,S));A(S,S);for(var p=0;p<3;++p){var y=(p+1)%3,g=(p+2)%3,v=R;e:for(d=0;d<2;++d){var m=[];if(c[p]<0!=!!d){v[p]=u[d][p];for(var b=0;b<2;++b){v[y]=u[b^d][y];for(var x=0;x<2;++x)v[g]=u[x^b^d][g],m.push(v.slice())}for(var _=l?5:4,b=_;b===_;++b){if(0===m.length)continue e;m=j.positive(m,h[b])}for(b=0;b<m.length;++b)for(var g=m[b],w=function(e,t,n,r,i){for(var o=0;o<3;++o){for(var a=E,s=C,l=0;l<3;++l)s[l]=a[l]=n[l];s[3]=a[3]=1,s[o]+=1,T(s,s,t),s[3]<0&&(e[o]=1/0),--a[o],T(a,a,t),a[3]<0&&(e[o]=1/0);var u=(a[0]/a[3]-s[0]/s[3])*r,c=(a[1]/a[3]-s[1]/s[3])*i;e[o]=.25*Math.sqrt(u*u+c*c)}return e}(R,S,g,n,r),x=0;x<3;++x)f[x].lo=Math.min(f[x].lo,g[x]),f[x].hi=Math.max(f[x].hi,g[x]),x!==p&&(f[x].pixelsPerDataUnit=Math.min(f[x].pixelsPerDataUnit,Math.abs(w[x])))}}}return f};var M=e("extract-frustum-planes"),j=e("split-polygon"),k=e("./lib/cube.js"),O=e("gl-mat4/multiply"),A=e("gl-mat4/transpose"),T=e("gl-vec4/transformMat4"),P=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),S=new Float32Array(16);function r(e,t,n){this.lo=e,this.hi=t,this.pixelsPerDataUnit=n}var E=[0,0,0,1],C=[0,0,0,1];var L=[new r(1/0,-1/0,1/0),new r(1/0,-1/0,1/0),new r(1/0,-1/0,1/0)],R=[0,0,0]},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(e,t,n){"use strict";var o=e("typedarray-pool"),i=e("ndarray-ops"),a=e("ndarray"),s=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function l(e,t,n,r,i){this.gl=e,this.type=t,this.handle=n,this.length=r,this.usage=i}e=l.prototype;function u(e,t,n,r,i,o){var a=i.length*i.BYTES_PER_ELEMENT;if(o<0)return e.bufferData(t,i,r),a;if(n<a+o)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return e.bufferSubData(t,o,i),n}function c(e,t){for(var n=o.malloc(e.length,t),r=e.length,i=0;i<r;++i)n[i]=e[i];return n}e.bind=function(){this.gl.bindBuffer(this.type,this.handle)},e.unbind=function(){this.gl.bindBuffer(this.type,null)},e.dispose=function(){this.gl.deleteBuffer(this.handle)},e.update=function(e,t){if("number"!=typeof t&&(t=-1),this.bind(),"object"==typeof e&&void 0!==e.shape){var n=e.dtype;s.indexOf(n)<0&&(n="float32"),(n=this.type===this.gl.ELEMENT_ARRAY_BUFFER?gl.getExtension("OES_element_index_uint")&&"uint16"!==n?"uint32":"uint16":n)===e.dtype&&function(e,t){for(var n=1,r=t.length-1;0<=r;--r){if(t[r]!==n)return;n*=e[r]}return 1}(e.shape,e.stride)?0===e.offset&&e.data.length===e.shape[0]?this.length=u(this.gl,this.type,this.length,this.usage,e.data,t):this.length=u(this.gl,this.type,this.length,this.usage,e.data.subarray(e.offset,e.shape[0]),t):(r=o.malloc(e.size,n),n=a(r,e.shape),i.assign(n,e),this.length=u(this.gl,this.type,this.length,this.usage,t<0?r:r.subarray(0,e.size),t),o.free(r))}else if(Array.isArray(e)){var r=this.type===this.gl.ELEMENT_ARRAY_BUFFER?c(e,"uint16"):c(e,"float32");this.length=u(this.gl,this.type,this.length,this.usage,t<0?r:r.subarray(0,e.length),t),o.free(r)}else if("object"==typeof e&&"number"==typeof e.length)this.length=u(this.gl,this.type,this.length,this.usage,e,t);else{if("number"!=typeof e&&void 0!==e)throw new Error("gl-buffer: Invalid data type");if(0<=t)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");this.gl.bufferData(this.type,0|(e=(e|=0)<=0?1:e),this.usage),this.length=e}},t.exports=function(e,t,n,r){if(n=n||e.ARRAY_BUFFER,r=r||e.DYNAMIC_DRAW,n!==e.ARRAY_BUFFER&&n!==e.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(r!==e.DYNAMIC_DRAW&&r!==e.STATIC_DRAW&&r!==e.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var i=e.createBuffer();return(r=new l(e,n,i,0,r)).update(t),r}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(e,n,t){"use strict";var E=e("gl-vec3");n.exports=function(e,t){var n=e.positions,r=e.vectors,i={positions:[],vertexIntensity:[],vertexIntensityBounds:e.vertexIntensityBounds,vectors:[],cells:[],coneOffset:e.coneOffset,colormap:e.colormap};if(0===e.positions.length)return t&&(t[0]=[0,0,0],t[1]=[0,0,0]),i;for(var o=0,a=1/0,s=-1/0,l=1/0,u=-1/0,c=1/0,f=-1/0,d=null,h=null,p=[],y=1/0,g=!1,v=0;v<n.length;v++){var m,b=n[v],a=Math.min(b[0],a),s=Math.max(b[0],s),l=Math.min(b[1],l),u=Math.max(b[1],u),c=Math.min(b[2],c),f=Math.max(b[2],f),x=r[v];E.length(x)>o&&(o=E.length(x)),(g=v?!(m=2*E.distance(d,b)/(E.length(h)+E.length(x)))||(y=Math.min(y,m),!1):g)||(d=b,h=x),p.push(x)}var _=[s,u,f];t&&(t[0]=[a,l,c],t[1]=_);var w=1/(o=0===o?1:o);isFinite(y)||(y=1),i.vectorScale=y;_=e.coneSize||.5;e.absoluteConeSize&&(_=e.absoluteConeSize*w),i.coneScale=_;for(var v=0,M=0;v<n.length;v++)for(var j=(b=n[v])[0],k=b[1],O=b[2],A=p[v],T=E.length(A)*w,P=0;P<8;P++){i.positions.push([j,k,O,M++]),i.positions.push([j,k,O,M++]),i.positions.push([j,k,O,M++]),i.positions.push([j,k,O,M++]),i.positions.push([j,k,O,M++]),i.positions.push([j,k,O,M++]),i.vectors.push(A),i.vectors.push(A),i.vectors.push(A),i.vectors.push(A),i.vectors.push(A),i.vectors.push(A),i.vertexIntensity.push(T,T,T),i.vertexIntensity.push(T,T,T);var S=i.positions.length;i.cells.push([S-6,S-5,S-4],[S-3,S-2,S-1])}return i};var r=e("./lib/shaders");n.exports.createMesh=e("./create_mesh"),n.exports.createConeMesh=function(e,t){return n.exports.createMesh(e,t,{shaders:r,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(e,t,n){"use strict";var f=e("gl-shader"),d=e("gl-buffer"),h=e("gl-vao"),p=e("gl-texture2d"),y=e("gl-mat4/multiply"),g=e("gl-mat4/invert"),M=e("ndarray"),j=e("colormap"),v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function m(e,t,n,r,i,o,a,s,l,u,c){this.gl=e,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=t,this.dirty=!0,this.triShader=n,this.pickShader=r,this.trianglePositions=i,this.triangleVectors=o,this.triangleColors=s,this.triangleUVs=l,this.triangleIds=a,this.triangleVAO=u,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=c,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=v,this._view=v,this._projection=v,this._resolution=[1,1]}e=m.prototype;e.isOpaque=function(){return 1<=this.opacity},e.isTransparent=function(){return this.opacity<1},e.pickSlots=1,e.setPickBase=function(e){this.pickId=e},e.update=function(e){e=e||{};var t=this.gl;this.dirty=!0,"lightPosition"in e&&(this.lightPosition=e.lightPosition),"opacity"in e&&(this.opacity=e.opacity),"ambient"in e&&(this.ambientLight=e.ambient),"diffuse"in e&&(this.diffuseLight=e.diffuse),"specular"in e&&(this.specularLight=e.specular),"roughness"in e&&(this.roughness=e.roughness),"fresnel"in e&&(this.fresnel=e.fresnel),void 0!==e.tubeScale&&(this.tubeScale=e.tubeScale),void 0!==e.vectorScale&&(this.vectorScale=e.vectorScale),void 0!==e.coneScale&&(this.coneScale=e.coneScale),void 0!==e.coneOffset&&(this.coneOffset=e.coneOffset),e.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=t.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=t.LINEAR,this.texture.setPixels(function(e){for(var t=j({colormap:e,nshades:256,format:"rgba"}),n=new Uint8Array(1024),r=0;r<256;++r){for(var i=t[r],o=0;o<3;++o)n[4*r+o]=i[o];n[4*r+3]=255*i[3]}return M(n,[256,256,4],[4,0,1])}(e.colormap)),this.texture.generateMipmap());var n=e.cells,r=e.positions,i=e.vectors;if(r&&n&&i){var o=[],a=[],s=[],l=[],u=[];this.cells=n,this.positions=r,this.vectors=i;var c=e.meshColor||[1,1,1,1],f=e.vertexIntensity,d=1/0,h=-1/0;if(f)if(e.vertexIntensityBounds)d=+e.vertexIntensityBounds[0],h=+e.vertexIntensityBounds[1];else for(var p=0;p<f.length;++p)var y=f[p],d=Math.min(d,y),h=Math.max(h,y);else for(p=0;p<r.length;++p){y=r[p][2];d=Math.min(d,y),h=Math.max(h,y)}this.intensity=f||function(e){for(var t=e.length,n=new Array(t),r=0;r<t;++r)n[r]=e[r][2];return n}(r),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(p=0;p<r.length;++p)for(var g=r[p],v=0;v<3;++v)!isNaN(g[v])&&isFinite(g[v])&&(this.bounds[0][v]=Math.min(this.bounds[0][v],g[v]),this.bounds[1][v]=Math.max(this.bounds[1][v],g[v]));var m=0;e:for(p=0;p<n.length;++p){var b=n[p];if(3===b.length){for(v=0;v<3;++v)for(var g=r[_=b[v]],x=0;x<3;++x)if(isNaN(g[x])||!isFinite(g[x]))continue e;for(v=0;v<3;++v){var _,g=r[_=b[2-v]];o.push(g[0],g[1],g[2],g[3]);var w=i[_];a.push(w[0],w[1],w[2],w[3]||0);var w=c;3===w.length?s.push(w[0],w[1],w[2],1):s.push(w[0],w[1],w[2],w[3]),w=f?[(f[_]-d)/(h-d),0]:[(g[2]-d)/(h-d),0],l.push(w[0],w[1]),u.push(p)}m+=1}}this.triangleCount=m,this.trianglePositions.update(o),this.triangleVectors.update(a),this.triangleColors.update(s),this.triangleUVs.update(l),this.triangleIds.update(new Uint32Array(u))}},e.drawTransparent=e.draw=function(e){for(var t=this.gl,n=(e=e||{}).model||v,r=e.view||v,e=e.projection||v,i=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)i[0][o]=Math.max(i[0][o],this.clipBounds[0][o]),i[1][o]=Math.min(i[1][o],this.clipBounds[1][o]);var a={model:n,view:r,projection:e,inverseModel:v.slice(),clipBounds:i,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};a.inverseModel=g(a.inverseModel,a.model),t.disable(t.CULL_FACE),this.texture.bind(0);var s=new Array(16);y(s,a.view,a.model),y(s,a.projection,s),g(s,s);for(o=0;o<3;++o)a.eyePosition[o]=s[12+o]/s[15];for(var l=s[15],o=0;o<3;++o)l+=this.lightPosition[o]*s[4*o+3];for(o=0;o<3;++o){for(var u=s[12+o],c=0;c<3;++c)u+=s[4*c+o]*this.lightPosition[c];a.lightPosition[o]=u/l}0<this.triangleCount&&((e=this.triShader).bind(),e.uniforms=a,this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},e.drawPick=function(e){for(var t=this.gl,n=(e=e||{}).model||v,r=e.view||v,e=e.projection||v,i=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)i[0][o]=Math.max(i[0][o],this.clipBounds[0][o]),i[1][o]=Math.min(i[1][o],this.clipBounds[1][o]);this._model=[].slice.call(n),this._view=[].slice.call(r),this._projection=[].slice.call(e),this._resolution=[t.drawingBufferWidth,t.drawingBufferHeight];r={model:n,view:r,projection:e,clipBounds:i,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},e=this.pickShader;e.bind(),e.uniforms=r,0<this.triangleCount&&(this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},e.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=e.value[0]+256*e.value[1]+65536*e.value[2],n=this.cells[t],e=this.positions[n[1]].slice(0,3),e={position:e,dataCoordinate:e,index:Math.floor(n[1]/48)};return"cone"===this.traceType?e.index=Math.floor(n[1]/48):"streamtube"===this.traceType&&(e.intensity=this.intensity[n[1]],e.velocity=this.vectors[n[1]].slice(0,3),e.divergence=this.vectors[n[1]][3],e.index=t),e},e.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},t.exports=function(e,t,n){var r=n.shaders;1===arguments.length&&(e=(t=e).gl);var i=((u=f(e,(u=r).meshShader.vertex,u.meshShader.fragment,null,u.meshShader.attributes)).attributes.position.location=0,u.attributes.color.location=2,u.attributes.uv.location=3,u.attributes.vector.location=4,u),o=((c=f(e,(c=r).pickShader.vertex,c.pickShader.fragment,null,c.pickShader.attributes)).attributes.position.location=0,c.attributes.id.location=1,c.attributes.vector.location=4,c),a=p(e,M(new Uint8Array([255,255,255,255]),[1,1,4]));a.generateMipmap(),a.minFilter=e.LINEAR_MIPMAP_LINEAR,a.magFilter=e.LINEAR;var s=d(e),l=d(e),u=d(e),r=d(e),c=d(e),n=new m(e,a,i,o,s,l,c,u,r,h(e,[{buffer:s,type:e.FLOAT,size:4},{buffer:c,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:u,type:e.FLOAT,size:4},{buffer:r,type:e.FLOAT,size:2},{buffer:l,type:e.FLOAT,size:4}]),n.traceType||"cone");return n.update(t),n}},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(e,t,n){var r=e("glslify"),i=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),o=r(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),e=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),r=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);n.meshShader={vertex:i,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},n.pickShader={vertex:e,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(e,t,n){t.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(e,t,n){var r=e("./1.0/numbers");t.exports=function(e){return r[e]}},{"./1.0/numbers":82}],84:[function(e,t,n){"use strict";t.exports=function(e){var t=e.gl,n=o(t),r=a(t,[{buffer:n,type:t.FLOAT,size:3,offset:0,stride:40},{buffer:n,type:t.FLOAT,size:4,offset:12,stride:40},{buffer:n,type:t.FLOAT,size:3,offset:28,stride:40}]),i=s(t);i.attributes.position.location=0,i.attributes.color.location=1,i.attributes.offset.location=2;i=new l(t,n,r,i);return i.update(e),i};var o=e("gl-buffer"),a=e("gl-vao"),s=e("./shaders/index"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(e,t,n,r){this.gl=e,this.shader=r,this.buffer=t,this.vao=n,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}e=l.prototype;function p(e,t){for(var n=0;n<3;++n)e[0][n]=Math.min(e[0][n],t[n]),e[1][n]=Math.max(e[1][n],t[n])}e.isOpaque=function(){return!this.hasAlpha},e.isTransparent=function(){return this.hasAlpha},e.drawTransparent=e.draw=function(e){var t=this.gl,n=this.shader.uniforms;this.shader.bind();var r=n.view=e.view||c,i=n.projection=e.projection||c;n.model=e.model||c,n.clipBounds=this.clipBounds,n.opacity=this.opacity;var o=r[12],a=r[13],s=r[14],r=r[15],l=(e._ortho||!1?2:1)*this.pixelRatio*(i[3]*o+i[7]*a+i[11]*s+i[15]*r)/t.drawingBufferHeight;this.vao.bind();for(var u=0;u<3;++u)t.lineWidth(this.lineWidth[u]*this.pixelRatio),n.capSize=this.capSize[u]*l,this.lineCount[u]&&t.drawArrays(t.LINES,this.lineOffset[u],this.lineCount[u]);this.vao.unbind()};var u=function(){for(var e=new Array(3),t=0;t<3;++t){for(var n=[],r=1;r<=2;++r)for(var i=-1;i<=1;i+=2){var o=[0,0,0];o[(r+t)%3]=i,n.push(o)}e[t]=n}return e}();function y(e,t,n,r){for(var i=u[r],o=0;o<i.length;++o){var a=i[o];e.push(t[0],t[1],t[2],n[0],n[1],n[2],n[3],a[0],a[1],a[2])}return i.length}e.update=function(e){"lineWidth"in(e=e||{})&&(this.lineWidth=e.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in e&&(this.capSize=e.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in e&&(this.opacity=+e.opacity,this.opacity<1&&(this.hasAlpha=!0));var t=e.color||[[0,0,0],[0,0,0],[0,0,0]],n=e.position,r=e.error;if(Array.isArray(t[0])||(t=[t,t,t]),n&&r){var i=[],o=n.length,a=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var s=0;s<3;++s){this.lineOffset[s]=a;e:for(var l=0;l<o;++l){for(var u=n[l],c=0;c<3;++c)if(isNaN(u[c])||!isFinite(u[c]))continue e;var f,d=r[l],h=t[s];3===(h=Array.isArray(h[0])?t[l]:h).length?h=[h[0],h[1],h[2],1]:4===h.length&&(h=[h[0],h[1],h[2],h[3]],!this.hasAlpha&&h[3]<1&&(this.hasAlpha=!0)),isNaN(d[0][s])||isNaN(d[1][s])||(d[0][s]<0&&((f=u.slice())[s]+=d[0][s],i.push(u[0],u[1],u[2],h[0],h[1],h[2],h[3],0,0,0,f[0],f[1],f[2],h[0],h[1],h[2],h[3],0,0,0),p(this.bounds,f),a+=2+y(i,f,h,s)),0<d[1][s]&&((f=u.slice())[s]+=d[1][s],i.push(u[0],u[1],u[2],h[0],h[1],h[2],h[3],0,0,0,f[0],f[1],f[2],h[0],h[1],h[2],h[3],0,0,0),p(this.bounds,f),a+=2+y(i,f,h,s)))}this.lineCount[s]=a-this.lineOffset[s]}this.buffer.update(i)}},e.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(e,t,n){"use strict";var r=e("glslify"),i=e("gl-shader"),o=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),a=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);t.exports=function(e){return i(e,o,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(e,t,n){"use strict";var a=e("gl-texture2d");t.exports=function(e,t,n,r){u||(u=e.FRAMEBUFFER_UNSUPPORTED,c=e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,f=e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,d=e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var i=e.getExtension("WEBGL_draw_buffers");!h&&i&&function(e,t){var n=e.getParameter(t.MAX_COLOR_ATTACHMENTS_WEBGL);h=new Array(n+1);for(var r=0;r<=n;++r){for(var i=new Array(n),o=0;o<r;++o)i[o]=e.COLOR_ATTACHMENT0+o;for(o=r;o<n;++o)i[o]=e.NONE;h[r]=i}}(e,i);Array.isArray(t)&&(r=n,n=0|t[1],t=0|t[0]);if("number"!=typeof t)throw new Error("gl-fbo: Missing shape parameter");var o=e.getParameter(e.MAX_RENDERBUFFER_SIZE);if(t<0||o<t||n<0||o<n)throw new Error("gl-fbo: Parameters are too large for FBO");var a=1;if("color"in(r=r||{})){if((a=Math.max(0|r.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(1<a){if(!i)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(a>e.getParameter(i.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+a+" draw buffers")}}var s=e.UNSIGNED_BYTE,l=e.getExtension("OES_texture_float");if(r.float&&0<a){if(!l)throw new Error("gl-fbo: Context does not support floating point textures");s=e.FLOAT}else r.preferFloat&&0<a&&l&&(s=e.FLOAT);o=!0;"depth"in r&&(o=!!r.depth);l=!1;"stencil"in r&&(l=!!r.stencil);return new b(e,t,n,s,a,o,l,i)};var u,c,f,d,h=null;function p(e){return[e.getParameter(e.FRAMEBUFFER_BINDING),e.getParameter(e.RENDERBUFFER_BINDING),e.getParameter(e.TEXTURE_BINDING_2D)]}function y(e,t){e.bindFramebuffer(e.FRAMEBUFFER,t[0]),e.bindRenderbuffer(e.RENDERBUFFER,t[1]),e.bindTexture(e.TEXTURE_2D,t[2])}function g(e){switch(e){case u:throw new Error("gl-fbo: Framebuffer unsupported");case c:throw new Error("gl-fbo: Framebuffer incomplete attachment");case f:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case d:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function v(e,t,n,r,i,o){if(!r)return null;r=a(e,t,n,i,r);return r.magFilter=e.NEAREST,r.minFilter=e.NEAREST,r.mipSamples=1,r.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,o,e.TEXTURE_2D,r.handle,0),r}function m(e,t,n,r,i){var o=e.createRenderbuffer();return e.bindRenderbuffer(e.RENDERBUFFER,o),e.renderbufferStorage(e.RENDERBUFFER,r,t,n),e.framebufferRenderbuffer(e.FRAMEBUFFER,i,e.RENDERBUFFER,o),o}function b(e,t,n,r,i,o,a,s){this.gl=e,this._shape=[0|t,0|n],this._destroyed=!1,this._ext=s,this.color=new Array(i);for(var l=0;l<i;++l)this.color[l]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=r,this._useDepth=o,this._useStencil=a;var u=this,n=[0|t,0|n];Object.defineProperties(n,{0:{get:function(){return u._shape[0]},set:function(e){return u.width=e}},1:{get:function(){return u._shape[1]},set:function(e){return u.height=e}}}),this._shapeVector=n,function(e){var t=p(e.gl),n=e.gl,r=e.handle=n.createFramebuffer(),i=e._shape[0],o=e._shape[1],a=e.color.length,s=e._ext,l=e._useStencil,u=e._useDepth,c=e._colorType;n.bindFramebuffer(n.FRAMEBUFFER,r);for(var f=0;f<a;++f)e.color[f]=v(n,i,o,c,n.RGBA,n.COLOR_ATTACHMENT0+f);if(0===a?(e._color_rb=m(n,i,o,n.RGBA4,n.COLOR_ATTACHMENT0),s&&s.drawBuffersWEBGL(h[0])):1<a&&s.drawBuffersWEBGL(h[a]),(s=n.getExtension("WEBGL_depth_texture"))?l?e.depth=v(n,i,o,s.UNSIGNED_INT_24_8_WEBGL,n.DEPTH_STENCIL,n.DEPTH_STENCIL_ATTACHMENT):u&&(e.depth=v(n,i,o,n.UNSIGNED_SHORT,n.DEPTH_COMPONENT,n.DEPTH_ATTACHMENT)):u&&l?e._depth_rb=m(n,i,o,n.DEPTH_STENCIL,n.DEPTH_STENCIL_ATTACHMENT):u?e._depth_rb=m(n,i,o,n.DEPTH_COMPONENT16,n.DEPTH_ATTACHMENT):l&&(e._depth_rb=m(n,i,o,n.STENCIL_INDEX,n.STENCIL_ATTACHMENT)),(l=n.checkFramebufferStatus(n.FRAMEBUFFER))!==n.FRAMEBUFFER_COMPLETE){e._destroyed=!0,n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteFramebuffer(e.handle),e.handle=null,e.depth&&(e.depth.dispose(),e.depth=null),e._depth_rb&&(n.deleteRenderbuffer(e._depth_rb),e._depth_rb=null);for(f=0;f<e.color.length;++f)e.color[f].dispose(),e.color[f]=null;e._color_rb&&(n.deleteRenderbuffer(e._color_rb),e._color_rb=null),y(n,t),g(l)}y(n,t)}(this)}t=b.prototype;function r(e,t,n){if(e._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(e._shape[0]!==t||e._shape[1]!==n){var r=e.gl,i=r.getParameter(r.MAX_RENDERBUFFER_SIZE);if(t<0||i<t||n<0||i<n)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");e._shape[0]=t,e._shape[1]=n;for(var t=p(r),o=0;o<e.color.length;++o)e.color[o].shape=e._shape;e._color_rb&&(r.bindRenderbuffer(r.RENDERBUFFER,e._color_rb),r.renderbufferStorage(r.RENDERBUFFER,r.RGBA4,e._shape[0],e._shape[1])),e.depth&&(e.depth.shape=e._shape),e._depth_rb&&(r.bindRenderbuffer(r.RENDERBUFFER,e._depth_rb),e._useDepth&&e._useStencil?r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e._shape[0],e._shape[1]):e._useDepth?r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,e._shape[0],e._shape[1]):e._useStencil&&r.renderbufferStorage(r.RENDERBUFFER,r.STENCIL_INDEX,e._shape[0],e._shape[1])),r.bindFramebuffer(r.FRAMEBUFFER,e.handle);n=r.checkFramebufferStatus(r.FRAMEBUFFER);n!==r.FRAMEBUFFER_COMPLETE&&(e.dispose(),y(r,t),g(n)),y(r,t)}}Object.defineProperties(t,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(e){if(2!==(e=!Array.isArray(e)?[0|e,0|e]:e).length)throw new Error("gl-fbo: Shape vector must be length 2");var t=0|e[0],e=0|e[1];return r(this,t,e),[t,e]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(e){return r(this,e|=0,this._shape[1]),e},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(e){return r(this,this._shape[0],e|=0),e},enumerable:!1}}),t.bind=function(){var e;this._destroyed||((e=this.gl).bindFramebuffer(e.FRAMEBUFFER,this.handle),e.viewport(0,0,this._shape[0],this._shape[1]))},t.dispose=function(){if(!this._destroyed){this._destroyed=!0;var e=this.gl;e.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(e.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var t=0;t<this.color.length;++t)this.color[t].dispose(),this.color[t]=null;this._color_rb&&(e.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":146}],87:[function(e,t,n){var h=e("sprintf-js").sprintf,p=e("gl-constants/lookup"),y=e("glsl-shader-name"),g=e("add-line-numbers");t.exports=function(e,t,n){"use strict";var r=y(t)||"of unknown name (see npm glsl-shader-name)",i="unknown type";void 0!==n&&(i=n===p.FRAGMENT_SHADER?"fragment":"vertex");for(var o=h("Error compiling %s shader %s:\n",i,r),r=h("%s%s",o,e),a=e.split("\n"),s={},l=0;l<a.length;l++){var u=a[l];if(""!==u&&"\0"!==u){var c=parseInt(u.split(":")[2]);if(isNaN(c))throw new Error(h("Could not parse error: %s",u));s[c]=u}}for(var f=g(t).split("\n"),l=0;l<f.length;l++){var d;(s[l+3]||s[l+2]||s[l+1])&&(d=f[l],o+=d+"\n",s[l+1]&&(d=(d=s[l+1]).substr(d.split(":",3).join(":").length+1).trim(),o+=h("^^^ %s\n\n",d)))}return{long:o.trim(),short:r.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.gl,r=l(n,c.vertex,c.fragment),i=l(n,c.pickVertex,c.pickFragment),o=u(n),a=u(n),s=u(n),n=u(n),n=new f(e,r,i,o,a,s,n);return n.update(t),e.addObject(n),n};var B=e("binary-search-bounds"),U=e("iota-array"),q=e("typedarray-pool"),l=e("gl-shader"),u=e("gl-buffer"),c=e("./lib/shaders");function f(e,t,n,r,i,o,a){this.plot=e,this.shader=t,this.pickShader=n,this.positionBuffer=r,this.weightBuffer=i,this.colorBuffer=o,this.idBuffer=a,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var d,h,p,e=f.prototype,H=[0,0,1,0,0,1,1,0,1,1,0,1];e.draw=(d=[1,0,0,0,1,0,0,0,1],function(){var e,t,n,r,i,o=this.plot,a=this.shader,s=this.bounds,l=this.numVertices;l<=0||(e=o.gl,t=o.dataBox,n=s[2]-s[0],r=s[3]-s[1],i=t[2]-t[0],o=t[3]-t[1],d[0]=2*n/i,d[4]=2*r/o,d[6]=2*(s[0]-t[0])/i-1,d[7]=2*(s[1]-t[1])/o-1,a.bind(),(o=a.uniforms).viewTransform=d,o.shape=this.shape,a=a.attributes,this.positionBuffer.bind(),a.position.pointer(),this.weightBuffer.bind(),a.weight.pointer(e.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),a.color.pointer(e.UNSIGNED_BYTE,!0),e.drawArrays(e.TRIANGLES,0,l))}),e.drawPick=(h=[1,0,0,0,1,0,0,0,1],p=[0,0,0,0],function(e){var t=this.plot,n=this.pickShader,r=this.bounds,i=this.numVertices;if(!(i<=0)){var o=t.gl,a=t.dataBox,s=r[2]-r[0],l=r[3]-r[1],u=a[2]-a[0],t=a[3]-a[1];h[0]=2*s/u,h[4]=2*l/t,h[6]=2*(r[0]-a[0])/u-1,h[7]=2*(r[1]-a[1])/t-1;for(var c=0;c<4;++c)p[c]=e>>8*c&255;this.pickOffset=e,n.bind();t=n.uniforms;t.viewTransform=h,t.pickOffset=p,t.shape=this.shape;n=n.attributes;return this.positionBuffer.bind(),n.position.pointer(),this.weightBuffer.bind(),n.weight.pointer(o.UNSIGNED_BYTE,!1),this.idBuffer.bind(),n.pickId.pointer(o.UNSIGNED_BYTE,!1),o.drawArrays(o.TRIANGLES,0,i),e+this.shape[0]*this.shape[1]}}),e.pick=function(e,t,n){var r=this.pickOffset,i=this.shape[0]*this.shape[1];if(n<r||r+i<=n)return null;i=n-r,n=this.xData,r=this.yData;return{object:this,pointId:i,dataCoord:[n[i%this.shape[0]],r[i/this.shape[0]|0]]}},e.update=function(e){var t=(e=e||{}).shape||[0,0],n=e.x||U(t[0]),r=e.y||U(t[1]),i=e.z||new Float32Array(t[0]*t[1]),o=!1!==e.zsmooth;this.xData=n,this.yData=r;var a,s,l,u=e.colorLevels||[0],c=e.colorValues||[0,0,0,1],f=u.length,e=this.bounds,e=o?(a=e[0]=n[0],s=e[1]=r[0],l=e[2]=n[n.length-1],e[3]=r[r.length-1]):(a=e[0]=n[0]+(n[1]-n[0])/2,s=e[1]=r[0]+(r[1]-r[0])/2,l=e[2]=n[n.length-1]+(n[n.length-1]-n[n.length-2])/2,e[3]=r[r.length-1]+(r[r.length-1]-r[r.length-2])/2),d=1/(l-a),h=1/(e-s),p=t[0],y=t[1];this.shape=[p,y];t=(o?(p-1)*(y-1):p*y)*(H.length>>>1);this.numVertices=t;for(var g=q.mallocUint8(4*t),v=q.mallocFloat32(2*t),m=q.mallocUint8(2*t),b=q.mallocUint32(t),x=0,_=o?p-1:p,w=o?y-1:y,M=0;M<w;++M)for(var j,k=o?(j=h*(r[M]-s),h*(r[M+1]-s)):(j=M<y-1?h*(r[M]-(r[M+1]-r[M])/2-s):h*(r[M]-(r[M]-r[M-1])/2-s),M<y-1?h*(r[M]+(r[M+1]-r[M])/2-s):h*(r[M]+(r[M]-r[M-1])/2-s)),O=0;O<_;++O)for(var A,T=o?(A=d*(n[O]-a),d*(n[O+1]-a)):(A=O<p-1?d*(n[O]-(n[O+1]-n[O])/2-a):d*(n[O]-(n[O]-n[O-1])/2-a),O<p-1?d*(n[O]+(n[O+1]-n[O])/2-a):d*(n[O]+(n[O]-n[O-1])/2-a)),P=0;P<H.length;P+=2){var S,E,C,L,R,I,z=H[P],D=H[P+1],N=i[o?(M+D)*p+(O+z):M*p+O],F=B.le(u,N);I=F<0?(C=c[0],L=c[1],R=c[2],c[3]):F===f-1?(C=c[4*f-4],L=c[4*f-3],R=c[4*f-2],c[4*f-1]):(C=(E=1-(S=(N-u[F])/(u[F+1]-u[F])))*c[N=4*F]+S*c[I=4*(F+1)],L=E*c[1+N]+S*c[1+I],R=E*c[2+N]+S*c[2+I],E*c[3+N]+S*c[3+I]),g[4*x]=255*C,g[4*x+1]=255*L,g[4*x+2]=255*R,g[4*x+3]=255*I,v[2*x]=.5*A+.5*T,v[2*x+1]=.5*j+.5*k,m[2*x]=z,m[2*x+1]=D,b[x]=M*p+O,x+=1}this.positionBuffer.update(v),this.weightBuffer.update(m),this.colorBuffer.update(g),this.idBuffer.update(b),q.free(v),q.free(g),q.free(m),q.free(b)},e.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(e,t,n){"use strict";e=e("glslify");t.exports={fragment:e(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:231}],90:[function(e,t,n){var r=e("glslify"),i=e("gl-shader"),o=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),a=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),l=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];n.createShader=function(e){return i(e,o,a,null,l)},n.createPickShader=function(e){return i(e,o,s,null,l)}},{"gl-shader":132,glslify:231}],91:[function(e,t,n){"use strict";t.exports=function(e){var t=e.gl||e.scene&&e.scene.gl,n=p(t);n.attributes.position.location=0,n.attributes.nextPosition.location=1,n.attributes.arcLength.location=2,n.attributes.lineWidth.location=3,n.attributes.color.location=4;var r=y(t);r.attributes.position.location=0,r.attributes.nextPosition.location=1,r.attributes.arcLength.location=2,r.attributes.lineWidth.location=3,r.attributes.color.location=4;for(var i=u(t),o=c(t,[{buffer:i,size:3,offset:0,stride:48},{buffer:i,size:3,offset:12,stride:48},{buffer:i,size:1,offset:24,stride:48},{buffer:i,size:1,offset:28,stride:48},{buffer:i,size:4,offset:32,stride:48}]),a=j(new Array(1024),[256,1,4]),s=0;s<1024;++s)a.data[s]=255;var l=f(t,a);l.wrap=t.REPEAT;l=new v(t,n,r,i,o,l);return l.update(e),l};var u=e("gl-buffer"),c=e("gl-vao"),f=e("gl-texture2d"),d=new Uint8Array(4),h=new Float32Array(d.buffer);var M=e("binary-search-bounds"),j=e("ndarray"),e=e("./lib/shaders"),p=e.createShader,y=e.createPickShader,i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function o(e){for(var t=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],n=0;n<3;++n)t[0][n]=Math.max(e[0][n],t[0][n]),t[1][n]=Math.min(e[1][n],t[1][n]);return t}function g(e,t,n,r){this.arcLength=e,this.position=t,this.index=n,this.dataCoordinate=r}function v(e,t,n,r,i,o){this.gl=e,this.shader=t,this.pickShader=n,this.buffer=r,this.vao=i,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=o,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}e=v.prototype;e.isTransparent=function(){return this.hasAlpha},e.isOpaque=function(){return!this.hasAlpha},e.pickSlots=1,e.setPickBase=function(e){this.pickId=e},e.drawTransparent=e.draw=function(e){var t,n,r;this.vertexCount&&(t=this.gl,n=this.shader,r=this.vao,n.bind(),n.uniforms={model:e.model||i,view:e.view||i,projection:e.projection||i,clipBounds:o(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio},r.bind(),r.draw(t.TRIANGLE_STRIP,this.vertexCount),r.unbind())},e.drawPick=function(e){var t,n,r;this.vertexCount&&(t=this.gl,n=this.pickShader,r=this.vao,n.bind(),n.uniforms={model:e.model||i,view:e.view||i,projection:e.projection||i,pickId:this.pickId,clipBounds:o(this.clipBounds),screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio},r.bind(),r.draw(t.TRIANGLE_STRIP,this.vertexCount),r.unbind())},e.update=function(e){var t;this.dirty=!0;var n=!!e.connectGaps;"dashScale"in e&&(this.dashScale=e.dashScale),this.hasAlpha=!1,"opacity"in e&&(this.opacity=+e.opacity,this.opacity<1&&(this.hasAlpha=!0));var r=[],i=[],o=[],a=0,s=0,l=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],u=e.position||e.positions;if(u){var c=e.color||e.colors||[0,0,0,1],f=e.lineWidth||1,d=!1;e:for(w=1;w<u.length;++w){var h,p,y=u[w-1],g=u[w];for(i.push(a),o.push(y.slice()),t=0;t<3;++t){if(isNaN(y[t])||isNaN(g[t])||!isFinite(y[t])||!isFinite(g[t])){if(!n&&0<r.length){for(var v=0;v<24;++v)r.push(r[r.length-12]);s+=2,d=!0}continue e}l[0][t]=Math.min(l[0][t],y[t],g[t]),l[1][t]=Math.max(l[1][t],y[t],g[t])}Array.isArray(c[0])?(h=c.length>w-1?c[w-1]:0<c.length?c[c.length-1]:[0,0,0,1],p=c.length>w?c[w]:0<c.length?c[c.length-1]:[0,0,0,1]):h=p=c,3===h.length&&(h=[h[0],h[1],h[2],1]),3===p.length&&(p=[p[0],p[1],p[2],1]),!this.hasAlpha&&h[3]<1&&(this.hasAlpha=!0);var m=Array.isArray(f)?f.length>w-1?f[w-1]:0<f.length?f[f.length-1]:[0,0,0,1]:f,b=a;if(a+=function(e,t){for(var n=0,r=0;r<3;++r){var i=e[r]-t[r];n+=i*i}return Math.sqrt(n)}(y,g),d){for(t=0;t<2;++t)r.push(y[0],y[1],y[2],g[0],g[1],g[2],b,m,h[0],h[1],h[2],h[3]);s+=2,d=!1}r.push(y[0],y[1],y[2],g[0],g[1],g[2],b,m,h[0],h[1],h[2],h[3],y[0],y[1],y[2],g[0],g[1],g[2],b,-m,h[0],h[1],h[2],h[3],g[0],g[1],g[2],y[0],y[1],y[2],a,-m,p[0],p[1],p[2],p[3],g[0],g[1],g[2],y[0],y[1],y[2],a,m,p[0],p[1],p[2],p[3]),s+=4}}if(this.buffer.update(r),i.push(a),o.push(u[u.length-1].slice()),this.bounds=l,this.vertexCount=s,this.points=o,this.arcLength=i,"dashes"in e){var x=e.dashes.slice();for(x.unshift(0),w=1;w<x.length;++w)x[w]=x[w-1]+x[w];for(var _=j(new Array(1024),[256,1,4]),w=0;w<256;++w){for(t=0;t<4;++t)_.set(w,0,t,0);1&M.le(x,x[x.length-1]*w/255)?_.set(w,0,0,0):_.set(w,0,0,255)}this.texture.setPixels(_)}},e.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},e.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t,n=(r=e.value[0],n=e.value[1],t=e.value[2],d[e=0]=e,d[1]=t,d[2]=n,d[3]=r,h[0]),r=M.le(this.arcLength,n);if(r<0)return null;if(r===this.arcLength.length-1)return new g(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),r);for(var i=this.points[r],o=this.points[Math.min(r+1,this.points.length-1)],a=(n-this.arcLength[r])/(this.arcLength[r+1]-this.arcLength[r]),s=1-a,l=[0,0,0],u=0;u<3;++u)l[u]=s*i[u]+a*o[u];r=Math.min(a<.5?r:r+1,this.points.length-1);return new g(n,l,r,this.points[r])}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(e,t,n){t.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],93:[function(e,t,n){t.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],94:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11],h=e[12],p=e[13],y=e[14],e=e[15];return(t*a-n*o)*(f*e-d*y)-(t*s-r*o)*(c*e-d*p)+(t*l-i*o)*(c*y-f*p)+(n*s-r*a)*(u*e-d*h)-(n*l-i*a)*(u*y-f*h)+(r*l-i*s)*(u*p-c*h)}},{}],95:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,u=n*a,c=r*a,t=r*s,n=i*a,r=i*s,i=i*l,a=o*a,s=o*s,l=o*l;return e[0]=1-t-i,e[1]=c+l,e[2]=n-s,e[3]=0,e[4]=c-l,e[5]=1-u-i,e[6]=r+a,e[7]=0,e[8]=n+s,e[9]=r-a,e[10]=1-u-t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],96:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=r+r,l=i+i,u=o+o,c=r*s,f=r*l,t=r*u,r=i*l,i=i*u,o=o*u,s=a*s,l=a*l,u=a*u;return e[0]=1-(r+o),e[1]=f+u,e[2]=t-l,e[3]=0,e[4]=f-u,e[5]=1-(c+o),e[6]=i+s,e[7]=0,e[8]=t+l,e[9]=i-s,e[10]=1-(c+r),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}},{}],97:[function(e,t,n){t.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],98:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],h=t[11],p=t[12],y=t[13],g=t[14],v=t[15],m=n*s-r*a,b=n*l-i*a,x=n*u-o*a,_=r*l-i*s,w=r*u-o*s,M=i*u-o*l,j=c*y-f*p,k=c*g-d*p,O=c*v-h*p,A=f*g-d*y,T=f*v-h*y,P=d*v-h*g,t=m*P-b*T+x*A+_*O-w*k+M*j;return t?(t=1/t,e[0]=(s*P-l*T+u*A)*t,e[1]=(i*T-r*P-o*A)*t,e[2]=(y*M-g*w+v*_)*t,e[3]=(d*w-f*M-h*_)*t,e[4]=(l*O-a*P-u*k)*t,e[5]=(n*P-i*O+o*k)*t,e[6]=(g*x-p*M-v*b)*t,e[7]=(c*M-d*x+h*b)*t,e[8]=(a*T-s*O+u*j)*t,e[9]=(r*O-n*T-o*j)*t,e[10]=(p*w-y*x+v*m)*t,e[11]=(f*x-c*w-h*m)*t,e[12]=(s*k-a*A-l*j)*t,e[13]=(n*A-r*k+i*j)*t,e[14]=(y*b-p*_-g*m)*t,e[15]=(c*_-f*b+d*m)*t,e):null}},{}],99:[function(e,t,n){var p=e("./identity");t.exports=function(e,t,n,r){var i,o=t[0],a=t[1],s=t[2],l=r[0],u=r[1],c=r[2],f=n[0],d=n[1],h=n[2];if(Math.abs(o-f)<1e-6&&Math.abs(a-d)<1e-6&&Math.abs(s-h)<1e-6)return p(e);i=o-f,t=a-d,r=s-h,n=1/Math.sqrt(i*i+t*t+r*r),f=u*(r*=n)-c*(t*=n),d=c*(i*=n)-l*r,h=l*t-u*i,(n=Math.sqrt(f*f+d*d+h*h))?(f*=n=1/n,d*=n,h*=n):h=d=f=0;c=t*h-r*d,l=r*f-i*h,u=i*d-t*f,(n=Math.sqrt(c*c+l*l+u*u))?(c*=n=1/n,l*=n,u*=n):u=l=c=0;return e[0]=f,e[1]=c,e[2]=i,e[3]=0,e[4]=d,e[5]=l,e[6]=t,e[7]=0,e[8]=h,e[9]=u,e[10]=r,e[11]=0,e[12]=-(f*o+d*a+h*s),e[13]=-(c*o+l*a+u*s),e[14]=-(i*o+t*a+r*s),e[15]=1,e}},{"./identity":97}],100:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],h=t[10],p=t[11],y=t[12],g=t[13],v=t[14],m=t[15],b=n[0],x=n[1],_=n[2],t=n[3];return e[0]=b*r+x*s+_*f+t*y,e[1]=b*i+x*l+_*d+t*g,e[2]=b*o+x*u+_*h+t*v,e[3]=b*a+x*c+_*p+t*m,b=n[4],x=n[5],_=n[6],t=n[7],e[4]=b*r+x*s+_*f+t*y,e[5]=b*i+x*l+_*d+t*g,e[6]=b*o+x*u+_*h+t*v,e[7]=b*a+x*c+_*p+t*m,b=n[8],x=n[9],_=n[10],t=n[11],e[8]=b*r+x*s+_*f+t*y,e[9]=b*i+x*l+_*d+t*g,e[10]=b*o+x*u+_*h+t*v,e[11]=b*a+x*c+_*p+t*m,b=n[12],x=n[13],_=n[14],t=n[15],e[12]=b*r+x*s+_*f+t*y,e[13]=b*i+x*l+_*d+t*g,e[14]=b*o+x*u+_*h+t*v,e[15]=b*a+x*c+_*p+t*m,e}},{}],101:[function(e,t,n){t.exports=function(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*u,e[15]=1,e}},{}],102:[function(e,t,n){t.exports=function(e,t,n,r,i){var o=1/Math.tan(t/2),t=1/(r-i);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*t,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*t,e[15]=0,e}},{}],103:[function(e,t,n){t.exports=function(e,t,n,r){var i,o,a,s,l,u,c,f,d,h,p,y,g,v,m,b,x,_,w,M=r[0],j=r[1],k=r[2],O=Math.sqrt(M*M+j*j+k*k);if(Math.abs(O)<1e-6)return null;M*=O=1/O,j*=O,k*=O,_=Math.sin(n),w=Math.cos(n),i=1-w,o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],d=t[7],h=t[8],p=t[9],y=t[10],g=t[11],v=M*M*i+w,m=j*M*i+k*_,b=k*M*i-j*_,x=M*j*i-k*_,r=j*j*i+w,O=k*j*i+M*_,n=M*k*i+j*_,_=j*k*i-M*_,w=k*k*i+w,e[0]=o*v+u*m+h*b,e[1]=a*v+c*m+p*b,e[2]=s*v+f*m+y*b,e[3]=l*v+d*m+g*b,e[4]=o*x+u*r+h*O,e[5]=a*x+c*r+p*O,e[6]=s*x+f*r+y*O,e[7]=l*x+d*r+g*O,e[8]=o*n+u*_+h*w,e[9]=a*n+c*_+p*w,e[10]=s*n+f*_+y*w,e[11]=l*n+d*_+g*w,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e}},{}],104:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],n=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=o*i+u*r,e[5]=a*i+c*r,e[6]=s*i+f*r,e[7]=l*i+n*r,e[8]=u*i-o*r,e[9]=c*i-a*r,e[10]=f*i-s*r,e[11]=n*i-l*r,e}},{}],105:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],n=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=o*i-u*r,e[1]=a*i-c*r,e[2]=s*i-f*r,e[3]=l*i-n*r,e[8]=o*r+u*i,e[9]=a*r+c*i,e[10]=s*r+f*i,e[11]=l*r+n*i,e}},{}],106:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],n=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=o*i+u*r,e[1]=a*i+c*r,e[2]=s*i+f*r,e[3]=l*i+n*r,e[4]=u*i-o*r,e[5]=c*i-a*r,e[6]=f*i-s*r,e[7]=n*i-l*r,e}},{}],107:[function(e,t,n){t.exports=function(e,t,n){var r=n[0],i=n[1],n=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],108:[function(e,t,n){t.exports=function(e,t,n){var r,i,o,a,s,l,u,c,f,d,h,p=n[0],y=n[1],g=n[2];t===e?(e[12]=t[0]*p+t[4]*y+t[8]*g+t[12],e[13]=t[1]*p+t[5]*y+t[9]*g+t[13],e[14]=t[2]*p+t[6]*y+t[10]*g+t[14],e[15]=t[3]*p+t[7]*y+t[11]*g+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],h=t[10],n=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=f,e[9]=d,e[10]=h,e[11]=n,e[12]=r*p+s*y+f*g+t[12],e[13]=i*p+l*y+d*g+t[13],e[14]=o*p+u*y+h*g+t[14],e[15]=a*p+c*y+n*g+t[15]);return e}},{}],109:[function(e,t,n){t.exports=function(e,t){{var n,r,i,o,a,s;e===t?(n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],s=t[11],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s):(e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15])}return e}},{}],110:[function(e,t,n){"use strict";var p=e("barycentric"),y=e("polytope-closest-point/lib/closest_point_2d.js");function g(e,t){for(var n=[0,0,0,0],r=0;r<4;++r)for(var i=0;i<4;++i)n[i]+=e[4*r+i]*t[r];return n}t.exports=function(e,t,n,r,i,o){if(1===e.length)return[0,e[0].slice()];for(var a=new Array(e.length),s=0;s<e.length;++s)a[s]=function(e,t,n,r,i){for(var o=g(r,g(n,g(t,[e[0],e[1],e[2],1]))),a=0;a<3;++a)o[a]/=o[3];return[.5*i[0]*(1+o[0]),.5*i[1]*(1-o[1])]}(e[s],n,r,i,o);for(var l=0,u=1/0,s=0;s<a.length;++s){for(var c=0,f=0;f<2;++f)c+=Math.pow(a[s][f]-t[f],2);c<u&&(u=c,l=s)}for(var d=function(e,t){{if(2===e.length){for(var n=0,r=0,i=0;i<2;++i)n+=Math.pow(t[i]-e[0][i],2),r+=Math.pow(t[i]-e[1][i],2);return n=Math.sqrt(n),r=Math.sqrt(r),n+r<1e-6?[1,0]:[r/(n+r),n/(r+n)]}if(3===e.length){var o=[0,0];return y(e[0],e[1],e[2],t,o),p(e,o)}}return[]}(a,t),h=0,s=0;s<3;++s){if(d[s]<-.001||1.0001<d[s])return null;h+=d[s]}if(.001<Math.abs(h-1))return null;return[l,function(e,t){for(var n=[0,0,0],r=0;r<e.length;++r)for(var i=e[r],o=t[r],a=0;a<3;++a)n[a]+=o*i[a];return n}(e,d),d]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(e,t,n){var r=e("glslify"),i=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),o=r(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),a=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),l=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),u=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),c=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),f=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),d=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),e=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),r=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);n.meshShader={vertex:i,fragment:o,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},n.wireShader={vertex:a,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},n.pointShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},n.pickShader={vertex:c,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},n.pointPickShader={vertex:d,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},n.contourShader={vertex:e,fragment:r,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(e,t,n){"use strict";var A=e("gl-shader"),T=e("gl-buffer"),P=e("gl-vao"),G=e("gl-texture2d"),W=e("normals"),d=e("gl-mat4/multiply"),h=e("gl-mat4/invert"),Y=e("ndarray"),X=e("colormap"),m=e("simplicial-complex-contour"),b=e("typedarray-pool"),r=e("./lib/shaders"),p=e("./lib/closest-point"),S=r.meshShader,E=r.wireShader,C=r.pointShader,L=r.pickShader,R=r.pointPickShader,I=r.contourShader,z=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function D(e,t,n,r,i,o,a,s,l,u,c,f,d,h,p,y,g,v,m,b,x,_,w,M,j,k,O){this.gl=e,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=t,this.dirty=!0,this.triShader=n,this.lineShader=r,this.pointShader=i,this.pickShader=o,this.pointPickShader=a,this.contourShader=s,this.trianglePositions=l,this.triangleColors=c,this.triangleNormals=d,this.triangleUVs=f,this.triangleIds=u,this.triangleVAO=h,this.triangleCount=0,this.lineWidth=1,this.edgePositions=p,this.edgeColors=g,this.edgeUVs=v,this.edgeIds=y,this.edgeVAO=m,this.edgeCount=0,this.pointPositions=b,this.pointColors=_,this.pointUVs=w,this.pointSizes=M,this.pointIds=x,this.pointVAO=j,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=k,this.contourVAO=O,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=z,this._view=z,this._projection=z,this._resolution=[1,1]}r=D.prototype;function Z(e,t){if(!t)return 1;if(!t.length)return 1;for(var n=0;n<t.length;++n){if(t.length<2)return 1;if(t[n][0]===e)return t[n][1];if(t[n][0]>e&&0<n){var r=(t[n][0]-e)/(t[n][0]-t[n-1][0]);return t[n][1]*(1-r)+r*t[n-1][1]}}return 1}r.isOpaque=function(){return!this.hasAlpha},r.isTransparent=function(){return this.hasAlpha},r.pickSlots=1,r.setPickBase=function(e){this.pickId=e},r.highlight=function(e){if(e&&this.contourEnable){for(var e=m(this.cells,this.intensity,e.intensity),t=e.cells,n=e.vertexIds,r=e.vertexWeights,i=t.length,o=b.mallocFloat32(6*i),a=0,s=0;s<i;++s)for(var l=t[s],u=0;u<2;++u)for(var c=l[0],f=n[c=2===l.length?l[u]:c][0],d=n[c][1],h=r[c],p=1-h,y=this.positions[f],g=this.positions[d],v=0;v<3;++v)o[a++]=h*y[v]+p*g[v];this.contourCount=a/3|0,this.contourPositions.update(o.subarray(0,a)),b.free(o)}else this.contourCount=0},r.update=function(e){e=e||{};var t=this.gl;this.dirty=!0,"contourEnable"in e&&(this.contourEnable=e.contourEnable),"contourColor"in e&&(this.contourColor=e.contourColor),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"lightPosition"in e&&(this.lightPosition=e.lightPosition),this.hasAlpha=!1,"opacity"in e&&(this.opacity=e.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in e&&(this.opacityscale=e.opacityscale,this.hasAlpha=!0),"ambient"in e&&(this.ambientLight=e.ambient),"diffuse"in e&&(this.diffuseLight=e.diffuse),"specular"in e&&(this.specularLight=e.specular),"roughness"in e&&(this.roughness=e.roughness),"fresnel"in e&&(this.fresnel=e.fresnel),e.texture?(this.texture.dispose(),this.texture=G(t,e.texture)):e.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=t.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=t.LINEAR,this.texture.setPixels(function(e,t){for(var n=X({colormap:e,nshades:256,format:"rgba"}),r=new Uint8Array(1024),i=0;i<256;++i){for(var o=n[i],a=0;a<3;++a)r[4*i+a]=o[a];r[4*i+3]=t?255*Z(i/255,t):255*o[3]}return Y(r,[256,256,4],[4,0,1])}(e.colormap,this.opacityscale)),this.texture.generateMipmap());var n=e.cells,r=e.positions;if(r&&n){var i=[],o=[],a=[],s=[],l=[],u=[],c=[],f=[],d=[],h=[],p=[],y=[],g=[],v=[];this.cells=n,this.positions=r;var m=e.vertexNormals,b=e.cellNormals,x=void 0===e.vertexNormalsEpsilon?1e-6:e.vertexNormalsEpsilon,t=void 0===e.faceNormalsEpsilon?1e-6:e.faceNormalsEpsilon;(b=e.useFacetNormals&&!b?W.faceNormals(n,r,t):b)||m||(m=W.vertexNormals(n,r,x));var _=e.vertexColors,w=e.cellColors,M=e.meshColor||[1,1,1,1],j=e.vertexUVs,k=e.vertexIntensity,O=e.cellUVs,A=e.cellIntensity,T=1/0,P=-1/0;if(!j&&!O)if(k)if(e.vertexIntensityBounds)T=+e.vertexIntensityBounds[0],P=+e.vertexIntensityBounds[1];else for(var S=0;S<k.length;++S)var E=k[S],T=Math.min(T,E),P=Math.max(P,E);else if(A)if(e.cellIntensityBounds)T=+e.cellIntensityBounds[0],P=+e.cellIntensityBounds[1];else for(S=0;S<A.length;++S){E=A[S];T=Math.min(T,E),P=Math.max(P,E)}else for(S=0;S<r.length;++S){E=r[S][2];T=Math.min(T,E),P=Math.max(P,E)}this.intensity=k||A||function(e){for(var t=e.length,n=new Array(t),r=0;r<t;++r)n[r]=e[r][2];return n}(r),this.pickVertex=!(A||w);var C=e.pointSizes,L=e.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(S=0;S<r.length;++S)for(var R=r[S],I=0;I<3;++I)!isNaN(R[I])&&isFinite(R[I])&&(this.bounds[0][I]=Math.min(this.bounds[0][I],R[I]),this.bounds[1][I]=Math.max(this.bounds[1][I],R[I]));var z=0,D=0,N=0;e:for(S=0;S<n.length;++S){var F=n[S];switch(F.length){case 1:for(R=r[U=F[0]],I=0;I<3;++I)if(isNaN(R[I])||!isFinite(R[I]))continue e;h.push(R[0],R[1],R[2]),q=_?_[U]:w?w[S]:M,this.opacityscale&&k?o.push(q[0],q[1],q[2],this.opacity*Z((k[U]-T)/(P-T),this.opacityscale)):3===q.length?p.push(q[0],q[1],q[2],this.opacity):(p.push(q[0],q[1],q[2],q[3]*this.opacity),q[3]<1&&(this.hasAlpha=!0)),H=j?j[U]:k?[(k[U]-T)/(P-T),0]:O?O[S]:A?[(A[S]-T)/(P-T),0]:[(R[2]-T)/(P-T),0],y.push(H[0],H[1]),C?g.push(C[U]):g.push(L),v.push(S),N+=1;break;case 2:for(I=0;I<2;++I)for(var R=r[U=F[I]],B=0;B<3;++B)if(isNaN(R[B])||!isFinite(R[B]))continue e;for(I=0;I<2;++I){R=r[U=F[I]];u.push(R[0],R[1],R[2]),q=_?_[U]:w?w[S]:M,this.opacityscale&&k?o.push(q[0],q[1],q[2],this.opacity*Z((k[U]-T)/(P-T),this.opacityscale)):3===q.length?c.push(q[0],q[1],q[2],this.opacity):(c.push(q[0],q[1],q[2],q[3]*this.opacity),q[3]<1&&(this.hasAlpha=!0)),H=j?j[U]:k?[(k[U]-T)/(P-T),0]:O?O[S]:A?[(A[S]-T)/(P-T),0]:[(R[2]-T)/(P-T),0],f.push(H[0],H[1]),d.push(S)}D+=1;break;case 3:for(I=0;I<3;++I)for(R=r[U=F[I]],B=0;B<3;++B)if(isNaN(R[B])||!isFinite(R[B]))continue e;for(I=0;I<3;++I){var U,q,H,V,R=r[U=F[2-I]];i.push(R[0],R[1],R[2]),(q=_?_[U]:w?w[S]:M)?this.opacityscale&&k?o.push(q[0],q[1],q[2],this.opacity*Z((k[U]-T)/(P-T),this.opacityscale)):3===q.length?o.push(q[0],q[1],q[2],this.opacity):(o.push(q[0],q[1],q[2],q[3]*this.opacity),q[3]<1&&(this.hasAlpha=!0)):o.push(.5,.5,.5,1),H=j?j[U]:k?[(k[U]-T)/(P-T),0]:O?O[S]:A?[(A[S]-T)/(P-T),0]:[(R[2]-T)/(P-T),0],s.push(H[0],H[1]),V=m?m[U]:b[S],a.push(V[0],V[1],V[2]),l.push(S)}z+=1}}this.pointCount=N,this.edgeCount=D,this.triangleCount=z,this.pointPositions.update(h),this.pointColors.update(p),this.pointUVs.update(y),this.pointSizes.update(g),this.pointIds.update(new Uint32Array(v)),this.edgePositions.update(u),this.edgeColors.update(c),this.edgeUVs.update(f),this.edgeIds.update(new Uint32Array(d)),this.trianglePositions.update(i),this.triangleColors.update(o),this.triangleUVs.update(s),this.triangleNormals.update(a),this.triangleIds.update(new Uint32Array(l))}},r.drawTransparent=r.draw=function(e){for(var t=this.gl,n=(e=e||{}).model||z,r=e.view||z,e=e.projection||z,i=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)i[0][o]=Math.max(i[0][o],this.clipBounds[0][o]),i[1][o]=Math.min(i[1][o],this.clipBounds[1][o]);var a={model:n,view:r,projection:e,inverseModel:z.slice(),clipBounds:i,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};a.inverseModel=h(a.inverseModel,a.model),t.disable(t.CULL_FACE),this.texture.bind(0);var s=new Array(16);d(s,a.view,a.model),d(s,a.projection,s),h(s,s);for(o=0;o<3;++o)a.eyePosition[o]=s[12+o]/s[15];for(var l=s[15],o=0;o<3;++o)l+=this.lightPosition[o]*s[4*o+3];for(var u,o=0;o<3;++o){for(var c=s[12+o],f=0;f<3;++f)c+=s[4*f+o]*this.lightPosition[f];a.lightPosition[o]=c/l}0<this.triangleCount&&((u=this.triShader).bind(),u.uniforms=a,this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),0<this.edgeCount&&0<this.lineWidth&&((u=this.lineShader).bind(),u.uniforms=a,this.edgeVAO.bind(),t.lineWidth(this.lineWidth*this.pixelRatio),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),0<this.pointCount&&((u=this.pointShader).bind(),u.uniforms=a,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&0<this.contourCount&&0<this.contourLineWidth&&((u=this.contourShader).bind(),u.uniforms=a,this.contourVAO.bind(),t.drawArrays(t.LINES,0,this.contourCount),this.contourVAO.unbind())},r.drawPick=function(e){for(var t=this.gl,n=(e=e||{}).model||z,r=e.view||z,e=e.projection||z,i=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)i[0][o]=Math.max(i[0][o],this.clipBounds[0][o]),i[1][o]=Math.min(i[1][o],this.clipBounds[1][o]);this._model=[].slice.call(n),this._view=[].slice.call(r),this._projection=[].slice.call(e),this._resolution=[t.drawingBufferWidth,t.drawingBufferHeight];r={model:n,view:r,projection:e,clipBounds:i,pickId:this.pickId/255},e=this.pickShader;e.bind(),e.uniforms=r,0<this.triangleCount&&(this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),0<this.edgeCount&&(this.edgeVAO.bind(),t.lineWidth(this.lineWidth*this.pixelRatio),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),0<this.pointCount&&((e=this.pointPickShader).bind(),e.uniforms=r,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind())},r.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;for(var t=e.value[0]+256*e.value[1]+65536*e.value[2],n=this.cells[t],r=this.positions,i=new Array(n.length),o=0;o<n.length;++o)i[o]=r[n[o]];var a=e.coord[0],s=e.coord[1];if(!this.pickVertex){var l=this.positions[n[0]],u=this.positions[n[1]],e=this.positions[n[2]],e=[(l[0]+u[0]+e[0])/3,(l[1]+u[1]+e[1])/3,(l[2]+u[2]+e[2])/3];return{_cellCenter:!0,position:[a,s],index:t,cell:n,cellId:t,intensity:this.intensity[t],dataCoordinate:e}}s=p(i,[a*this.pixelRatio,this._resolution[1]-s*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!s)return null;for(var c=s[2],f=0,o=0;o<n.length;++o)f+=c[o]*this.intensity[n[o]];return{position:s[1],index:n[s[0]],cell:n,cellId:t,intensity:f,dataCoordinate:this.positions[n[s[0]]]}},r.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},t.exports=function(e,t){if(!((e=1===arguments.length?(t=e).gl:e).getExtension("OES_standard_derivatives")||e.getExtension("MOZ_OES_standard_derivatives")||e.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var n=((_=A(_=e,S.vertex,S.fragment)).attributes.position.location=0,_.attributes.color.location=2,_.attributes.uv.location=3,_.attributes.normal.location=4,_),r=((w=A(w=e,E.vertex,E.fragment)).attributes.position.location=0,w.attributes.color.location=2,w.attributes.uv.location=3,w),i=((M=A(M=e,C.vertex,C.fragment)).attributes.position.location=0,M.attributes.color.location=2,M.attributes.uv.location=3,M.attributes.pointSize.location=4,M),o=((j=A(j=e,L.vertex,L.fragment)).attributes.position.location=0,j.attributes.id.location=1,j),a=((k=A(k=e,R.vertex,R.fragment)).attributes.position.location=0,k.attributes.id.location=1,k.attributes.pointSize.location=4,k),s=((O=A(O=e,I.vertex,I.fragment)).attributes.position.location=0,O),l=G(e,Y(new Uint8Array([255,255,255,255]),[1,1,4]));l.generateMipmap(),l.minFilter=e.LINEAR_MIPMAP_LINEAR,l.magFilter=e.LINEAR;var u=T(e),c=T(e),f=T(e),d=T(e),h=T(e),p=P(e,[{buffer:u,type:e.FLOAT,size:3},{buffer:h,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:c,type:e.FLOAT,size:4},{buffer:f,type:e.FLOAT,size:2},{buffer:d,type:e.FLOAT,size:3}]),y=T(e),g=T(e),v=T(e),m=T(e),b=P(e,[{buffer:y,type:e.FLOAT,size:3},{buffer:m,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:g,type:e.FLOAT,size:4},{buffer:v,type:e.FLOAT,size:2}]),x=T(e),_=T(e),w=T(e),M=T(e),j=T(e),k=P(e,[{buffer:x,type:e.FLOAT,size:3},{buffer:j,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:_,type:e.FLOAT,size:4},{buffer:w,type:e.FLOAT,size:2},{buffer:M,type:e.FLOAT,size:1}]),O=T(e),e=new D(e,l,n,r,i,o,a,s,u,h,c,f,d,p,y,m,g,v,b,x,j,_,w,M,k,O,P(e,[{buffer:O,type:e.FLOAT,size:3}]));return e.update(t),e}},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(e,t,n){"use strict";t.exports=function(e){var t=e.gl,n=r(t,[0,0,0,1,1,0,1,1]),t=i(t,o.boxVert,o.lineFrag);return new a(e,n,t)};var r=e("gl-buffer"),i=e("gl-shader"),o=e("./shaders");function a(e,t,n){this.plot=e,this.vbo=t,this.shader=n}var s,l,e=a.prototype;e.bind=function(){var e=this.shader;this.vbo.bind(),this.shader.bind(),e.attributes.coord.pointer(),e.uniforms.screenBox=this.plot.screenBox},e.drawBox=(s=[0,0],l=[0,0],function(e,t,n,r,i){var o=this.plot,a=this.shader,o=o.gl;s[0]=e,s[1]=t,l[0]=n,l[1]=r,a.uniforms.lo=s,a.uniforms.hi=l,a.uniforms.color=i,o.drawArrays(o.TRIANGLE_STRIP,0,4)}),e.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(e,t,n){"use strict";t.exports=function(e){var t=e.gl,n=i(t),r=o(t,a.gridVert,a.gridFrag),t=o(t,a.tickVert,a.gridFrag);return new s(e,n,r,t)};var i=e("gl-buffer"),o=e("gl-shader"),_=e("binary-search-bounds"),a=e("./shaders");function s(e,t,n,r){this.plot=e,this.vbo=t,this.shader=n,this.tickShader=r,this.ticks=[[],[]]}function w(e,t){return e-t}var b,x,M,j,k,O,A,T,P,p,y,e=s.prototype;e.draw=(b=[0,0],x=[0,0],M=[0,0],function(){for(var e=this.plot,t=this.vbo,n=this.shader,r=this.ticks,i=e.gl,o=e._tickBounds,a=e.dataBox,s=e.viewBox,l=e.gridLineWidth,u=e.gridLineColor,c=e.gridLineEnable,f=e.pixelRatio,d=0;d<2;++d){var h=o[d],p=o[d+2],y=.5*(a[d+2]+a[d]),g=a[d+2]-a[d];x[d]=2*(p-h)/g,b[d]=2*(h-y)/g}n.bind(),t.bind(),n.attributes.dataCoord.pointer(),n.uniforms.dataShift=b,n.uniforms.dataScale=x;for(var v=0,d=0;d<2;++d){M[0]=M[1]=0,M[d]=1,n.uniforms.dataAxis=M,n.uniforms.lineWidth=l[d]/(s[d+2]-s[d])*f,n.uniforms.color=u[d];var m=6*r[d].length;c[d]&&m&&i.drawArrays(i.TRIANGLES,v,m),v+=m}}),e.drawTickMarks=(j=[0,0],k=[0,0],O=[1,0],A=[0,1],T=[0,0],P=[0,0],function(){for(var e=this.plot,t=this.vbo,n=this.tickShader,r=this.ticks,i=e.gl,o=e._tickBounds,a=e.dataBox,s=e.viewBox,l=e.pixelRatio,u=e.screenBox,c=u[2]-u[0],f=u[3]-u[1],d=s[2]-s[0],h=s[3]-s[1],p=0;p<2;++p){var y=o[p],g=o[p+2],v=.5*(a[p+2]+a[p]),m=a[p+2]-a[p];k[p]=2*(g-y)/m,j[p]=2*(y-v)/m}k[0]*=d/c,j[0]*=d/c,k[1]*=h/f,j[1]*=h/f,n.bind(),t.bind(),n.attributes.dataCoord.pointer();var b=n.uniforms;b.dataShift=j,b.dataScale=k;var x=e.tickMarkLength,u=e.tickMarkWidth,d=e.tickMarkColor,h=6*r[0].length,t=Math.min(_.ge(r[0],(a[0]-o[0])/(o[2]-o[0]),w),r[0].length),n=Math.min(_.gt(r[0],(a[2]-o[0])/(o[2]-o[0]),w),r[0].length),e=0+6*t,n=6*Math.max(0,n-t),t=Math.min(_.ge(r[1],(a[1]-o[1])/(o[3]-o[1]),w),r[1].length),r=Math.min(_.gt(r[1],(a[3]-o[1])/(o[3]-o[1]),w),r[1].length),h=h+6*t,t=6*Math.max(0,r-t);T[0]=2*(s[0]-x[1])/c-1,T[1]=(s[3]+s[1])/f-1,P[0]=x[1]*l/c,P[1]=u[1]*l/f,t&&(b.color=d[1],b.tickScale=P,b.dataAxis=A,b.screenOffset=T,i.drawArrays(i.TRIANGLES,h,t)),T[0]=(s[2]+s[0])/c-1,T[1]=2*(s[1]-x[0])/f-1,P[0]=u[0]*l/c,P[1]=x[0]*l/f,n&&(b.color=d[0],b.tickScale=P,b.dataAxis=O,b.screenOffset=T,i.drawArrays(i.TRIANGLES,e,n)),T[0]=2*(s[2]+x[3])/c-1,T[1]=(s[3]+s[1])/f-1,P[0]=x[3]*l/c,P[1]=u[3]*l/f,t&&(b.color=d[3],b.tickScale=P,b.dataAxis=A,b.screenOffset=T,i.drawArrays(i.TRIANGLES,h,t)),T[0]=(s[2]+s[0])/c-1,T[1]=2*(s[3]+x[2])/f-1,P[0]=u[2]*l/c,P[1]=x[2]*l/f,n&&(b.color=d[2],b.tickScale=P,b.dataAxis=O,b.screenOffset=T,i.drawArrays(i.TRIANGLES,e,n))}),e.update=(p=[1,1,-1,-1,1,-1],y=[1,-1,1,1,-1,-1],function(e){for(var t=e.ticks,n=e.bounds,r=new Float32Array(18*(t[0].length+t[1].length)),i=(this.plot.zeroLineEnable,0),o=[[],[]],a=0;a<2;++a)for(var s=o[a],l=t[a],u=n[a],c=n[a+2],f=0;f<l.length;++f){var d=(l[f].x-u)/(c-u);s.push(d);for(var h=0;h<6;++h)r[i++]=d,r[i++]=p[h],r[i++]=y[h]}this.ticks=o,this.vbo.update(r)}),e.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(e,t,n){"use strict";t.exports=function(e){var t=e.gl,n=r(t,[-1,-1,-1,1,1,-1,1,1]),t=i(t,o.lineVert,o.lineFrag);return new a(e,n,t)};var r=e("gl-buffer"),i=e("gl-shader"),o=e("./shaders");function a(e,t,n){this.plot=e,this.vbo=t,this.shader=n}var u,c,e=a.prototype;e.bind=function(){var e=this.shader;this.vbo.bind(),this.shader.bind(),e.attributes.coord.pointer(),e.uniforms.screenBox=this.plot.screenBox},e.drawLine=(u=[0,0],c=[0,0],function(e,t,n,r,i,o){var a=this.plot,s=this.shader,l=a.gl;u[0]=e,u[1]=t,c[0]=n,c[1]=r,s.uniforms.start=u,s.uniforms.end=c,s.uniforms.width=i*a.pixelRatio,s.uniforms.color=o,l.drawArrays(l.TRIANGLE_STRIP,0,4)}),e.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(e,t,n){"use strict";var r=e("glslify"),e=r(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);t.exports={lineVert:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:e,textVert:r(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:e,gridVert:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:e,boxVert:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:231}],117:[function(e,t,n){"use strict";t.exports=function(e){var t=e.gl,n=r(t),t=i(t,o.textVert,o.textFrag);return new a(e,n,t)};var r=e("gl-buffer"),i=e("gl-shader"),x=e("text-cache"),_=e("binary-search-bounds"),o=e("./shaders");function a(e,t,n){this.plot=e,this.vbo=t,this.shader=n,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var w,M,j,u,c,h,p,y,e=a.prototype;e.drawTicks=(w=[0,0],M=[0,0],j=[0,0],function(e){var t=this.plot,n=this.shader,r=this.tickX[e],i=this.tickOffset[e],o=t.gl,a=t.viewBox,s=t.dataBox,l=t.screenBox,u=t.pixelRatio,c=t.tickEnable,f=t.tickPad,d=t.tickColor,h=t.tickAngle,p=t.labelEnable,y=t.labelPad,g=t.labelColor,v=t.labelAngle,m=this.labelOffset[e],b=this.labelCount[e],t=_.lt(r,s[e]),s=_.le(r,s[e+2]);w[0]=w[1]=0,w[e]=1,M[e]=(a[2+e]+a[e])/(l[2+e]-l[e])-1;l=2/l[2+(1^e)]-l[1^e];M[1^e]=l*a[1^e]-1,c[e]&&(M[1^e]-=l*u*f[e],t<s&&i[s]>i[t]&&(n.uniforms.dataAxis=w,n.uniforms.screenOffset=M,n.uniforms.color=d[e],n.uniforms.angle=h[e],o.drawArrays(o.TRIANGLES,i[t],i[s]-i[t]))),p[e]&&b&&(M[1^e]-=l*u*y[e],n.uniforms.dataAxis=j,n.uniforms.screenOffset=M,n.uniforms.color=g[e],n.uniforms.angle=v[e],o.drawArrays(o.TRIANGLES,m,b)),M[1^e]=l*a[2+(1^e)]-1,c[e+2]&&(M[1^e]+=l*u*f[e+2],t<s&&i[s]>i[t]&&(n.uniforms.dataAxis=w,n.uniforms.screenOffset=M,n.uniforms.color=d[e+2],n.uniforms.angle=h[e+2],o.drawArrays(o.TRIANGLES,i[t],i[s]-i[t]))),p[e+2]&&b&&(M[1^e]+=l*u*y[e+2],n.uniforms.dataAxis=j,n.uniforms.screenOffset=M,n.uniforms.color=g[e+2],n.uniforms.angle=v[e+2],o.drawArrays(o.TRIANGLES,m,b))}),e.drawTitle=(u=[0,0],c=[0,0],function(){var e=this.plot,t=this.shader,n=e.gl,r=e.screenBox,i=e.titleCenter,o=e.titleAngle,a=e.titleColor,s=e.pixelRatio;if(this.titleCount){for(var l=0;l<2;++l)c[l]=2*(i[l]*s-r[l])/(r[2+l]-r[l])-1;t.bind(),t.uniforms.dataAxis=u,t.uniforms.screenOffset=c,t.uniforms.angle=o,t.uniforms.color=a,n.drawArrays(n.TRIANGLES,this.titleOffset,this.titleCount)}}),e.bind=(h=[0,0],p=[0,0],y=[0,0],function(){var e=this.plot,t=this.shader,n=e._tickBounds,r=e.dataBox,i=e.screenBox,o=e.viewBox;t.bind();for(var a=0;a<2;++a){var s=n[a],l=n[a+2],u=.5*(r[a+2]+r[a]),c=r[a+2]-r[a],f=o[a],d=o[a+2]-f,f=i[a],f=i[a+2]-f;p[a]=2*(l-s)/c*d/f,h[a]=2*(s-u)/c*d/f}y[1]=2*e.pixelRatio/(i[3]-i[1]),y[0]=y[1]*(i[3]-i[1])/(i[2]-i[0]),t.uniforms.dataScale=p,t.uniforms.dataShift=h,t.uniforms.textScale=y,this.vbo.bind(),t.attributes.textCoordinate.pointer()}),e.update=function(e){for(var t,n,r=[],i=e.ticks,o=e.bounds,a=0;a<2;++a){for(var s=[Math.floor(r.length/3)],l=[-1/0],u=i[a],c=0;c<u.length;++c){for(var f=u[c],d=f.x,h=f.text,p=f.font||"sans-serif",y=f.fontSize||12,g=1/(o[a+2]-o[a]),v=o[a],m=h.split("\n"),b=0;b<m.length;b++)for(n=x(p,m[b]).data,t=0;t<n.length;t+=2)r.push(n[t]*y,-n[t+1]*y-b*y*1.2,(d-v)*g);s.push(Math.floor(r.length/3)),l.push(d)}this.tickOffset[a]=s,this.tickX[a]=l}for(a=0;a<2;++a){for(this.labelOffset[a]=Math.floor(r.length/3),n=x(e.labelFont[a],e.labels[a],{textAlign:"center"}).data,y=e.labelSize[a],c=0;c<n.length;c+=2)r.push(n[c]*y,-n[c+1]*y,0);this.labelCount[a]=Math.floor(r.length/3)-this.labelOffset[a]}for(this.titleOffset=Math.floor(r.length/3),n=x(e.titleFont,e.title).data,y=e.titleSize,c=0;c<n.length;c+=2)r.push(n[c]*y,-n[c+1]*y,0);this.titleCount=Math.floor(r.length/3)-this.titleOffset,this.vbo.update(r)},e.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(e,t,n){"use strict";t.exports=function(e){var t=e.gl,n=r(t,[t.drawingBufferWidth,t.drawingBufferHeight]),n=new l(t,n);return n.grid=i(n),n.text=o(n),n.line=a(n),n.box=s(n),n.update(e),n};var r=e("gl-select-static"),i=e("./lib/grid"),o=e("./lib/text"),a=e("./lib/line"),s=e("./lib/box");function l(e,t){this.gl=e,this.pickBuffer=t,this.screenBox=[0,0,e.drawingBufferWidth,e.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}e=l.prototype;function u(e){for(var t=e.slice(),n=0;n<t.length;++n)t[n]=t[n].slice();return t}function c(e,t){return e.x-t.x}e.setDirty=function(){this.dirty=this.pickDirty=!0},e.setOverlayDirty=function(){this.dirty=!0},e.nextDepthValue=function(){return this._depthCounter++/65536},e.draw=function(){var e=this.gl,t=this.screenBox,n=this.viewBox,r=this.dataBox,i=this.pixelRatio,o=this.grid,a=this.line,s=this.text,l=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){this.dirty=!1,e.bindFramebuffer(e.FRAMEBUFFER,null),e.enable(e.SCISSOR_TEST),e.disable(e.DEPTH_TEST),e.depthFunc(e.LESS),e.depthMask(!1),e.enable(e.BLEND),e.blendEquation(e.FUNC_ADD,e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),this.borderColor&&(e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]),y=this.borderColor,e.clearColor(y[0]*y[3],y[1]*y[3],y[2]*y[3],y[3]),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)),e.scissor(n[0],n[1],n[2]-n[0],n[3]-n[1]),e.viewport(n[0],n[1],n[2]-n[0],n[3]-n[1]);var u=this.backgroundColor;e.clearColor(u[0]*u[3],u[1]*u[3],u[2]*u[3],u[3]),e.clear(e.COLOR_BUFFER_BIT),o.draw();var c=this.zeroLineEnable,f=this.zeroLineColor,d=this.zeroLineWidth;if(c[0]||c[1]){a.bind();for(var h,p=0;p<2;++p)c[p]&&r[p]<=0&&0<=r[p+2]&&(h=t[p]-r[p]*(t[p+2]-t[p])/(r[p+2]-r[p]),0===p?a.drawLine(h,t[1],h,t[3],d[p],f[p]):a.drawLine(t[0],h,t[2],h,d[p],f[p]))}for(p=0;p<l.length;++p)l[p].draw();e.viewport(t[0],t[1],t[2]-t[0],t[3]-t[1]),e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]),this.grid.drawTickMarks(),a.bind();var y=this.borderLineEnable,u=this.borderLineWidth,o=this.borderLineColor;y[1]&&a.drawLine(n[0],n[1]-.5*u[1]*i,n[0],n[3]+.5*u[3]*i,u[1],o[1]),y[0]&&a.drawLine(n[0]-.5*u[0]*i,n[1],n[2]+.5*u[2]*i,n[1],u[0],o[0]),y[3]&&a.drawLine(n[2],n[1]-.5*u[1]*i,n[2],n[3]+.5*u[3]*i,u[3],o[3]),y[2]&&a.drawLine(n[0]-.5*u[0]*i,n[3],n[2]+.5*u[2]*i,n[3],u[2],o[2]),s.bind();for(p=0;p<2;++p)s.drawTicks(p);this.titleEnable&&s.drawTitle();for(var g=this.overlays,p=0;p<g.length;++p)g[p].draw();e.disable(e.SCISSOR_TEST),e.disable(e.BLEND),e.depthMask(!0)}},e.drawPick=function(){if(!this.static){var e=this.pickBuffer;this.gl;this._pickTimeout=null,e.begin();for(var t=1,n=this.objects,r=0;r<n.length;++r)t=n[r].drawPick(t);e.end()}},e.pick=function(e,t){if(!this.static){var n=this.pixelRatio,r=this.pickPixelRatio,i=this.viewBox,o=0|Math.round((e-i[0]/n)*r),a=0|Math.round((t-i[1]/n)*r),r=this.pickBuffer.query(o,a,this.pickRadius);if(!r)return null;for(var s=r.id+(r.value[0]<<8)+(r.value[1]<<16)+(r.value[2]<<24),l=this.objects,u=0;u<l.length;++u){var c=l[u].pick(o,a,s);if(c)return c}return null}},e.setScreenBox=function(e){var t=this.screenBox,n=this.pixelRatio;t[0]=0|Math.round(e[0]*n),t[1]=0|Math.round(e[1]*n),t[2]=0|Math.round(e[2]*n),t[3]=0|Math.round(e[3]*n),this.setDirty()},e.setDataBox=function(e){var t=this.dataBox;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],this.setDirty())},e.setViewBox=function(e){var t=this.pixelRatio,n=this.viewBox;n[0]=0|Math.round(e[0]*t),n[1]=0|Math.round(e[1]*t),n[2]=0|Math.round(e[2]*t),n[3]=0|Math.round(e[3]*t);t=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((e[2]-e[0])*t),0|Math.round((e[3]-e[1])*t)],this.setDirty()},e.update=function(e){var t=this.gl;this.pixelRatio=(e=e||{}).pixelRatio||1;var n=this.pixelRatio;this.pickPixelRatio=Math.max(n,1),this.setScreenBox(e.screenBox||[0,0,t.drawingBufferWidth/n,t.drawingBufferHeight/n]);this.screenBox;this.setViewBox(e.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/n,.125*(this.screenBox[3]-this.screenBox[1])/n,.875*(this.screenBox[2]-this.screenBox[0])/n,.875*(this.screenBox[3]-this.screenBox[1])/n]);var r=this.viewBox,t=(r[2]-r[0])/(r[3]-r[1]);this.setDataBox(e.dataBox||[-10,-10/t,10,10/t]),this.borderColor=!1!==e.borderColor&&(e.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(e.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(e.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(e.gridLineWidth||[1,1]).slice(),this.gridLineColor=u(e.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(e.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(e.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=u(e.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(e.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(e.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=u(e.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(e.titleCenter||[.5*(r[0]+r[2])/n,(r[3]+120)/n]).slice(),this.titleEnable=!("titleEnable"in e&&!e.titleEnable),this.titleAngle=e.titleAngle||0,this.titleColor=(e.titleColor||[0,0,0,1]).slice(),this.labelPad=(e.labelPad||[15,15,15,15]).slice(),this.labelAngle=(e.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(e.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=u(e.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(e.tickPad||[15,15,15,15]).slice(),this.tickAngle=(e.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(e.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=u(e.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(e.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(e.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=u(e.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var i=e.ticks||[[],[]],o=this._tickBounds;o[0]=o[1]=1/0,o[2]=o[3]=-1/0;for(var a=0;a<2;++a){var s=i[a].slice(0);0!==s.length&&(s.sort(c),o[a]=Math.min(o[a],s[0].x),o[a+2]=Math.max(o[a+2],s[s.length-1].x))}this.grid.update({bounds:o,ticks:i}),this.text.update({bounds:o,ticks:i,labels:e.labels||["x","y"],labelSize:e.labelSize||[12,12],labelFont:e.labelFont||["sans-serif","sans-serif"],title:e.title||"",titleSize:e.titleSize||18,titleFont:e.titleFont||"sans-serif"}),this.static=!!e.static,this.setDirty()},e.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var e=this.objects.length-1;0<=e;--e)this.objects[e].dispose();this.objects.length=0;for(e=this.overlays.length-1;0<=e;--e)this.overlays[e].dispose();this.overlays.length=0,this.gl=null},e.addObject=function(e){this.objects.indexOf(e)<0&&(this.objects.push(e),this.setDirty())},e.removeObject=function(e){for(var t=this.objects,n=0;n<t.length;++n)if(t[n]===e){t.splice(n,1),this.setDirty();break}},e.addOverlay=function(e){this.overlays.indexOf(e)<0&&(this.overlays.push(e),this.setOverlayDirty())},e.removeOverlay=function(e){for(var t=this.overlays,n=0;n<t.length;++n)if(t[n]===e){t.splice(n,1),this.setOverlayDirty();break}}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(e,t,n){"use strict";t.exports=function(m,e){m=m||document.body,e=e||{};var t=[.01,1/0];"distanceLimits"in e&&(t[0]=e.distanceLimits[0],t[1]=e.distanceLimits[1]);"zoomMin"in e&&(t[0]=e.zoomMin);"zoomMax"in e&&(t[1]=e.zoomMax);var b=r({center:e.center||[0,0,0],up:e.up||[0,1,0],eye:e.eye||[0,0,10],mode:e.mode||"orbit",distanceLimits:t}),a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],x=0,s=m.clientWidth,l=m.clientHeight,_={keyBindingMode:"rotate",enableWheel:!0,view:b,element:m,delay:e.delay||16,rotateSpeed:e.rotateSpeed||1,zoomSpeed:e.zoomSpeed||1,translateSpeed:e.translateSpeed||1,flipX:!!e.flipX,flipY:!!e.flipY,modes:b.modes,_ortho:e._ortho||e.projection&&"orthographic"===e.projection.type||!1,tick:function(){var e=w(),t=this.delay,n=e-2*t;b.idle(e-t),b.recalcMatrix(n),b.flush(e-(100+2*t));for(var r=!0,i=b.computedMatrix,o=0;o<16;++o)r=r&&a[o]===i[o],a[o]=i[o];t=m.clientWidth===s&&m.clientHeight===l;return s=m.clientWidth,l=m.clientHeight,r?!t:(x=Math.exp(b.computedRadius[0]),!0)},lookAt:function(e,t,n){b.lookAt(b.lastT(),e,t,n)},rotate:function(e,t,n){b.rotate(b.lastT(),e,t,n)},pan:function(e,t,n){b.pan(b.lastT(),e,t,n)},translate:function(e,t,n){b.translate(b.lastT(),e,t,n)}};return Object.defineProperties(_,{matrix:{get:function(){return b.computedMatrix},set:function(e){return b.setMatrix(b.lastT(),e),b.computedMatrix},enumerable:!0},mode:{get:function(){return b.getMode()},set:function(e){var t=b.computedUp.slice(),n=b.computedEye.slice(),r=b.computedCenter.slice();return b.setMode(e),"turntable"===e&&(e=w(),b._active.lookAt(e,n,r,t),b._active.lookAt(e+500,n,r,[0,0,1]),b._active.flush(e)),b.getMode()},enumerable:!0},center:{get:function(){return b.computedCenter},set:function(e){return b.lookAt(b.lastT(),null,e),b.computedCenter},enumerable:!0},eye:{get:function(){return b.computedEye},set:function(e){return b.lookAt(b.lastT(),e),b.computedEye},enumerable:!0},up:{get:function(){return b.computedUp},set:function(e){return b.lookAt(b.lastT(),null,null,e),b.computedUp},enumerable:!0},distance:{get:function(){return x},set:function(e){return b.setDistance(b.lastT(),e),e},enumerable:!0},distanceLimits:{get:function(){return b.getDistanceLimits(t)},set:function(e){return b.setDistanceLimits(e),e},enumerable:!0}}),m.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),_._lastX=-1,_._lastY=-1,_._lastMods={shift:!1,control:!1,alt:!1,meta:!1},_.enableMouseListeners=function(){function n(e,t,n,r){var i=_.keyBindingMode;if(!1!==i){var o="rotate"===i,a="pan"===i,s="zoom"===i,l=!!r.control,u=!!r.alt,c=!!r.shift,f=!!(1&e),d=!!(2&e),h=!!(4&e),p=1/m.clientHeight,y=p*(t-_._lastX),g=p*(n-_._lastY),v=_.flipX?1:-1,i=_.flipY?1:-1,e=Math.PI*_.rotateSpeed,p=w();return-1!==_._lastX&&-1!==_._lastY&&((o&&f&&!l&&!u&&!c||f&&!l&&!u&&c)&&b.rotate(p,v*e*y,-i*e*g,0),(a&&f&&!l&&!u&&!c||d||f&&l&&!u&&!c)&&b.pan(p,-_.translateSpeed*y*x,_.translateSpeed*g*x,0),(s&&f&&!l&&!u&&!c||h||f&&!l&&u&&!c)&&(g=-_.zoomSpeed*g/window.innerHeight*(p-b.lastT())*100,b.pan(p,0,0,x*(Math.exp(g)-1)))),_._lastX=t,_._lastY=n,_._lastMods=r,!0}}_.mouseListener=i(m,n),m.addEventListener("touchstart",function(e){e=u(e.changedTouches[0],m);n(0,e[0],e[1],_._lastMods),n(1,e[0],e[1],_._lastMods)},!!c&&{passive:!0}),m.addEventListener("touchmove",function(e){var t=u(e.changedTouches[0],m);n(1,t[0],t[1],_._lastMods),e.preventDefault()},!!c&&{passive:!1}),m.addEventListener("touchend",function(e){n(0,_._lastX,_._lastY,_._lastMods)},!!c&&{passive:!0}),_.wheelListener=o(m,function(e,t){var n,r,i;!1!==_.keyBindingMode&&_.enableWheel&&(n=_.flipX?1:-1,r=_.flipY?1:-1,i=w(),Math.abs(e)>Math.abs(t)?b.rotate(i,0,0,-e*n*Math.PI*_.rotateSpeed/window.innerWidth):_._ortho||(t=-_.zoomSpeed*r*t/window.innerHeight*(i-b.lastT())/20,b.pan(i,0,0,x*(Math.exp(t)-1))))},!0)},_.enableMouseListeners(),_};var w=e("right-now"),r=e("3d-view"),i=e("mouse-change"),o=e("mouse-wheel"),u=e("mouse-event-offset"),c=e("has-passive-events")},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(e,t,n){var r=e("glslify"),i=e("gl-shader"),o=r(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),a=r(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);t.exports=function(e){return i(e,o,a,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(e,t,n){"use strict";var u=e("./camera.js"),c=e("gl-axes3d"),z=e("gl-axes3d/properties"),f=e("gl-spikes3d"),d=e("gl-select-static"),h=e("gl-fbo"),D=e("a-big-triangle"),p=e("mouse-change"),N=e("gl-mat4/perspective"),F=e("gl-mat4/ortho"),y=e("./lib/shader"),B=e("is-mobile")({tablet:!0,featureDetect:!0});function U(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function q(e){return"boolean"!=typeof e||e}t.exports={createScene:function(e){(e=e||{}).camera=e.camera||{};var i=e.canvas;i||(i=document.createElement("canvas"),(e.container||document.body).appendChild(i));var g=e.gl;g||(e.glOptions&&(B=!!e.glOptions.preserveDrawingBuffer),g=function(e,t){var n=null;try{n=(n=e.getContext("webgl",t))||e.getContext("experimental-webgl",t)}catch(e){return null}return n}(i,e.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:B}));if(!g)throw new Error("webgl not supported");var t=e.bounds||[[-10,-10,-10],[10,10,10]],v=new U,m=h(g,g.drawingBufferWidth,g.drawingBufferHeight,{preferFloat:!B}),b=y(g),x=e.cameraObject&&!0===e.cameraObject._ortho||e.camera.projection&&"orthographic"===e.camera.projection.type||!1,n={eye:e.camera.eye||[2,0,0],center:e.camera.center||[0,0,0],up:e.camera.up||[0,1,0],zoomMin:e.camera.zoomMax||.1,zoomMax:e.camera.zoomMin||100,mode:e.camera.mode||"turntable",_ortho:x},r=e.axes||{},_=c(g,r);_.enable=!r.disable;var o=e.spikes||{},w=f(g,o),M=[],j=[],s=[],k=[],O=!0,A=!0,r=new Array(16),o=new Array(16),T={view:null,projection:r,model:o,_ortho:!1},A=!0,P=[g.drawingBufferWidth,g.drawingBufferHeight],n=e.cameraObject||u(i,n),S={gl:g,contextLost:!1,pixelRatio:e.pixelRatio||1,canvas:i,selection:v,camera:n,axes:_,axesPixels:null,spikes:w,bounds:t,objects:M,shape:P,aspect:e.aspectRatio||[1,1,1],pickRadius:e.pickRadius||10,zNear:e.zNear||.01,zFar:e.zFar||1e3,fovy:e.fovy||Math.PI/4,clearColor:e.clearColor||[0,0,0,0],autoResize:q(e.autoResize),autoBounds:q(e.autoBounds),autoScale:!!e.autoScale,autoCenter:q(e.autoCenter),clipToBounds:q(e.clipToBounds),snapToData:!!e.snapToData,onselect:e.onselect||null,onrender:e.onrender||null,onclick:e.onclick||null,cameraParams:T,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(e){this.aspect[0]=e.x,this.aspect[1]=e.y,this.aspect[2]=e.z,A=!0},setBounds:function(e,t){this.bounds[0][e]=t.min,this.bounds[1][e]=t.max},setClearColor:function(e){this.clearColor=e},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},E=[g.drawingBufferWidth/S.pixelRatio|0,g.drawingBufferHeight/S.pixelRatio|0];function C(){var e,t,n,r;S._stopped||S.autoResize&&(t=e=1,t=(r=i.parentNode)&&r!==document.body?(e=r.clientWidth,r.clientHeight):(e=window.innerWidth,window.innerHeight),n=0|Math.ceil(e*S.pixelRatio),r=0|Math.ceil(t*S.pixelRatio),n===i.width&&r===i.height||(i.width=n,i.height=r,(r=i.style).position=r.position||"absolute",r.left="0px",r.top="0px",r.width=e+"px",r.height=t+"px",O=!0))}S.autoResize&&C();function a(){for(var e=M.length,t=k.length,n=0;n<t;++n)s[n]=0;e:for(n=0;n<e;++n){var r=M[n],i=r.pickSlots;if(i){for(var o=0;o<t;++o)if(s[o]+i<255){j[n]=o,r.setPickBase(s[o]+1),s[o]+=i;continue e}var a=d(g,P);j[n]=t,k.push(a),s.push(i),r.setPickBase(1),t+=1}else j[n]=-1}for(;0<t&&0===s[t-1];)s.pop(),k.pop().dispose()}function L(){if(S.contextLost)return!0;g.isContextLost()&&(S.contextLost=!0,S.mouseListener.enabled=!1,S.selection.object=null,S.oncontextloss&&S.oncontextloss())}window.addEventListener("resize",C),S.update=function(e){S._stopped||(A=O=!0)},S.add=function(e){S._stopped||(e.axes=_,M.push(e),j.push(-1),A=O=!0,a())},S.remove=function(e){S._stopped||((e=M.indexOf(e))<0||(M.splice(e,1),j.pop(),A=O=!0,a()))},S.dispose=function(){if(!S._stopped&&(S._stopped=!0,window.removeEventListener("resize",C),i.removeEventListener("webglcontextlost",L),S.mouseListener.enabled=!1,!S.contextLost)){_.dispose(),w.dispose();for(var e=0;e<M.length;++e)M[e].dispose();m.dispose();for(e=0;e<k.length;++e)k[e].dispose();b.dispose(),w=_=g=null,M=[]}},S._mouseRotating=!1,S._prevButtons=0,S.enableMouseListeners=function(){S.mouseListener=p(i,function(e,t,n){if(!S._stopped){var r=k.length,i=M.length,o=v.object;v.distance=1/0,v.mouse[0]=t,v.mouse[1]=n,v.object=null,v.screen=null,v.dataCoordinate=v.dataPosition=null;var a=!1;if(e&&S._prevButtons)S._mouseRotating=!0;else{S._mouseRotating&&(A=!0),S._mouseRotating=!1;for(var s=0;s<r;++s){var l=k[s].query(t,E[1]-n-1,S.pickRadius);if(l&&!(l.distance>v.distance))for(var u=0;u<i;++u){var c,f=M[u];j[u]===s&&((c=f.pick(l))&&(v.buttons=e,v.screen=l.coord,v.distance=l.distance,v.object=f,v.index=c.distance,v.dataPosition=c.position,v.dataCoordinate=c.dataCoordinate,v.data=c,a=!0))}}}o&&o!==v.object&&(o.highlight&&o.highlight(null),O=!0),v.object&&(v.object.highlight&&v.object.highlight(v.data),O=!0),(a=a||v.object!==o)&&S.onselect&&S.onselect(v),1&e&&!(1&S._prevButtons)&&S.onclick&&S.onclick(v),S._prevButtons=e}})},i.addEventListener("webglcontextlost",L);var R=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],I=[R[0].slice(),R[1].slice()];function l(){if(!L()){C();var e=S.camera.tick();T.view=S.camera.matrix,O=O||e,A=A||e,_.pixelRatio=S.pixelRatio,w.pixelRatio=S.pixelRatio;var t=M.length,n=R[0],r=R[1];n[0]=n[1]=n[2]=1/0,r[0]=r[1]=r[2]=-1/0;for(var i=0;i<t;++i){(y=M[i]).pixelRatio=S.pixelRatio,y.axes=S.axes,O=O||!!y.dirty,A=A||!!y.dirty;var o=y.bounds;if(o)for(var a=o[0],s=o[1],l=0;l<3;++l)n[l]=Math.min(n[l],a[l]),r[l]=Math.max(r[l],s[l])}var u=S.bounds;if(S.autoBounds)for(var c,l=0;l<3;++l)r[l]<n[l]?(n[l]=-1,r[l]=1):(n[l]===r[l]&&(--n[l],r[l]+=1),c=.05*(r[l]-n[l]),n[l]=n[l]-c,r[l]=r[l]+c),u[0][l]=n[l],u[1][l]=r[l];for(var f=!1,l=0;l<3;++l)f=f||I[0][l]!==u[0][l]||I[1][l]!==u[1][l],I[0][l]=u[0][l],I[1][l]=u[1][l];if(A=A||f,O=O||f){if(f){for(var d=[0,0,0],i=0;i<3;++i)d[i]=function(e){var t=Math.round(Math.log(Math.abs(e))/Math.log(10));{if(t<0){var n=Math.round(Math.pow(10,-t));return Math.ceil(e*n)/n}if(0<t){n=Math.round(Math.pow(10,t));return Math.ceil(e/n)*n}}return Math.ceil(e)}((u[1][i]-u[0][i])/10);_.autoTicks?_.update({bounds:u,tickSpacing:d}):_.update({bounds:u})}var h=g.drawingBufferWidth,e=g.drawingBufferHeight;P[0]=h,P[1]=e,E[0]=0|Math.max(h/S.pixelRatio,1),E[1]=0|Math.max(e/S.pixelRatio,1),function(e,t){var n=e.bounds,r=e.cameraParams,i=r.projection,o=r.model,a=e.gl.drawingBufferWidth,s=e.gl.drawingBufferHeight,l=e.zNear,u=e.zFar,c=e.fovy,s=a/s;t?(F(i,-s,s,-1,1,l,u),r._ortho=!0):(N(i,c,s,l,u),r._ortho=!1);for(var f=0;f<16;++f)o[f]=0;o[15]=1;for(var d=0,f=0;f<3;++f)d=Math.max(d,n[1][f]-n[0][f]);for(f=0;f<3;++f)e.autoScale?o[5*f]=e.aspect[f]/(n[1][f]-n[0][f]):o[5*f]=1/d,e.autoCenter&&(o[12+f]=.5*-o[5*f]*(n[0][f]+n[1][f]))}(S,x);for(i=0;i<t;++i)(y=M[i]).axesBounds=u,S.clipToBounds&&(y.clipBounds=u);v.object&&(S.snapToData?w.position=v.dataCoordinate:w.position=v.dataPosition,w.bounds=u),A&&(A=!1,function(){if(!L()){g.colorMask(!0,!0,!0,!0),g.depthMask(!0),g.disable(g.BLEND),g.enable(g.DEPTH_TEST),g.depthFunc(g.LEQUAL);for(var e=M.length,t=k.length,n=0;n<t;++n){var r=k[n];r.shape=E,r.begin();for(var i,o=0;o<e;++o)j[o]===n&&((i=M[o]).drawPick&&(i.pixelRatio=1,i.drawPick(T)));r.end()}}}()),S.axesPixels=z(S.axes,T,h,e),S.onrender&&S.onrender(),g.bindFramebuffer(g.FRAMEBUFFER,null),g.viewport(0,0,h,e),S.clearRGBA(),g.depthMask(!0),g.colorMask(!0,!0,!0,!0),g.enable(g.DEPTH_TEST),g.depthFunc(g.LEQUAL),g.disable(g.BLEND),g.disable(g.CULL_FACE);var p=!1;_.enable&&(p=p||_.isTransparent(),_.draw(T)),w.axes=_,v.object&&w.draw(T),g.disable(g.CULL_FACE);for(i=0;i<t;++i)(y=M[i]).axes=_,y.pixelRatio=S.pixelRatio,y.isOpaque&&y.isOpaque()&&y.draw(T),y.isTransparent&&y.isTransparent()&&(p=!0);if(p){m.shape=P,m.bind(),g.clear(g.DEPTH_BUFFER_BIT),g.colorMask(!1,!1,!1,!1),g.depthMask(!0),g.depthFunc(g.LESS),_.enable&&_.isTransparent()&&_.drawTransparent(T);for(i=0;i<t;++i)(y=M[i]).isOpaque&&y.isOpaque()&&y.draw(T);g.enable(g.BLEND),g.blendEquation(g.FUNC_ADD),g.blendFunc(g.ONE,g.ONE_MINUS_SRC_ALPHA),g.colorMask(!0,!0,!0,!0),g.depthMask(!1),g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT),_.isTransparent()&&_.drawTransparent(T);for(var y,i=0;i<t;++i)(y=M[i]).isTransparent&&y.isTransparent()&&y.drawTransparent(T);g.bindFramebuffer(g.FRAMEBUFFER,null),g.blendFunc(g.ONE,g.ONE_MINUS_SRC_ALPHA),g.disable(g.DEPTH_TEST),b.bind(),m.color[0].bind(0),b.uniforms.accumBuffer=0,D(g),g.disable(g.BLEND)}O=!1;for(i=0;i<t;++i)M[i].dirty=!1}}}return S.enableMouseListeners(),function e(){S._stopped||S.contextLost||(l(),requestAnimationFrame(e))}(),S.redraw=function(){S._stopped||(O=!0,l())},S},createCamera:u}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(e,t,n){e=e("glslify");n.pointVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),n.pointFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),n.pickVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),n.pickFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:231}],123:[function(e,t,n){"use strict";var a=e("gl-shader"),s=e("gl-buffer"),u=e("typedarray-pool"),l=e("./lib/shader");function c(e,t,n,r,i){this.plot=e,this.offsetBuffer=t,this.pickBuffer=n,this.shader=r,this.pickShader=i,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}t.exports=function(e,t){var n=e.gl,r=s(n),i=s(n),o=a(n,l.pointVertex,l.pointFragment),n=a(n,l.pickVertex,l.pickFragment),n=new c(e,r,i,o,n);return n.update(t),e.addObject(n),n};var f,d,t=c.prototype;t.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},t.update=function(n){var e;function t(e,t){return e in n?n[e]:t}n=n||{},this.sizeMin=t("sizeMin",.5),this.sizeMax=t("sizeMax",20),this.color=t("color",[1,0,0,1]).slice(),this.areaRatio=t("areaRatio",1),this.borderColor=t("borderColor",[0,0,0,1]).slice(),this.blend=t("blend",!1);var r=n.positions.length>>>1,i=n.positions instanceof Float32Array,o=n.idToIndex instanceof Int32Array&&n.idToIndex.length>=r,a=n.positions,s=i?a:u.mallocFloat32(a.length),l=o?n.idToIndex:u.mallocInt32(r);if(i||s.set(a),!o)for(s.set(a),e=0;e<r;e++)l[e]=e;this.points=a,this.offsetBuffer.update(s),this.pickBuffer.update(l),i||u.free(s),o||u.free(l),this.pointCount=r,this.pickOffset=0},t.unifiedDraw=(f=[1,0,0,0,1,0,0,0,1],d=[0,0,0,0],function(e){var t=void 0!==e,n=t?this.pickShader:this.shader,r=this.plot.gl,i=this.plot.dataBox;if(0===this.pointCount)return e;var o=i[2]-i[0],a=i[3]-i[1],s=function(e,t){for(var n=0,r=e.length>>>1,i=0;i<r;i++){var o=e[2*i],a=e[2*i+1];o>=t[0]&&o<=t[2]&&a>=t[1]&&a<=t[3]&&n++}return n}(this.points,i),s=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(s,.33333)));f[0]=2/o,f[4]=2/a,f[6]=-2*i[0]/o-1,f[7]=-2*i[1]/a-1,this.offsetBuffer.bind(),n.bind(),n.attributes.position.pointer(),n.uniforms.matrix=f,n.uniforms.color=this.color,n.uniforms.borderColor=this.borderColor,n.uniforms.pointCloud=s<5,n.uniforms.pointSize=s,n.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),t&&(d[0]=255&e,d[1]=e>>8&255,d[2]=e>>16&255,d[3]=e>>24&255,this.pickBuffer.bind(),n.attributes.pickId.pointer(r.UNSIGNED_BYTE),n.uniforms.pickOffset=d,this.pickOffset=e);t=r.getParameter(r.BLEND),n=r.getParameter(r.DITHER);return t&&!this.blend&&r.disable(r.BLEND),n&&r.disable(r.DITHER),r.drawArrays(r.POINTS,0,this.pointCount),t&&!this.blend&&r.enable(r.BLEND),n&&r.enable(r.DITHER),e+this.pointCount}),t.draw=t.unifiedDraw,t.drawPick=t.unifiedDraw,t.pick=function(e,t,n){var r=this.pickOffset,i=this.pointCount;if(n<r||r+i<=n)return null;n-=r,r=this.points;return{object:this,pointId:n,dataCoord:[r[2*n],r[2*n+1]]}}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(e,t,n){t.exports=function(e,t,n,r){var i,o=t[0],a=t[1],s=t[2],l=t[3],u=n[0],c=n[1],f=n[2],d=n[3];(t=o*u+a*c+s*f+l*d)<0&&(t=-t,u=-u,c=-c,f=-f,d=-d);r=1e-6<1-t?(n=Math.acos(t),t=Math.sin(n),i=Math.sin((1-r)*n)/t,Math.sin(r*n)/t):(i=1-r,r);return e[0]=i*o+r*u,e[1]=i*a+r*c,e[2]=i*s+r*f,e[3]=i*l+r*d,e}},{}],125:[function(e,t,n){"use strict";t.exports=function(e){return e||0===e?e.toString():""}},{}],126:[function(e,t,n){"use strict";var f=e("vectorize-text");t.exports=function(e,t,n){var r=d[t];r=r||(d[t]={});if(e in r)return r[e];var t={textAlign:"center",textBaseline:"middle",lineHeight:1,font:t,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},i=f(e,t);t.triangles=!1;var o,a,s=f(e,t);if(n&&1!==n){for(o=0;o<i.positions.length;++o)for(a=0;a<i.positions[o].length;++a)i.positions[o][a]/=n;for(o=0;o<s.positions.length;++o)for(a=0;a<s.positions[o].length;++a)s.positions[o][a]/=n}var l=[[1/0,1/0],[-1/0,-1/0]],u=s.positions.length;for(o=0;o<u;++o){var c=s.positions[o];for(a=0;a<2;++a)l[0][a]=Math.min(l[0][a],c[a]),l[1][a]=Math.max(l[1][a],c[a])}return r[e]=[i,s,l]};var d={}},{"vectorize-text":311}],127:[function(e,t,n){var r=e("gl-shader"),i=e("glslify"),o=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),a=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),l=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),e=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),i=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],u={vertex:o,fragment:l,attributes:i},c={vertex:a,fragment:l,attributes:i},f={vertex:s,fragment:l,attributes:i},d={vertex:o,fragment:e,attributes:i},h={vertex:a,fragment:e,attributes:i},p={vertex:s,fragment:e,attributes:i};function y(e,t){e=r(e,t),t=e.attributes;return t.position.location=0,t.color.location=1,t.glyph.location=2,t.id.location=3,e}n.createPerspective=function(e){return y(e,u)},n.createOrtho=function(e){return y(e,c)},n.createProject=function(e){return y(e,f)},n.createPickPerspective=function(e){return y(e,d)},n.createPickOrtho=function(e){return y(e,h)},n.createPickProject=function(e){return y(e,p)}},{"gl-shader":132,glslify:231}],128:[function(e,t,n){"use strict";var i=e("is-string-blank"),h=e("gl-buffer"),p=e("gl-vao"),Z=e("typedarray-pool"),j=e("gl-mat4/multiply"),y=e("./lib/shaders"),o=e("./lib/glyphs"),a=e("./lib/get-simple-string"),k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];return e[0]=t[0]*n+t[4]*r+t[8]*i+t[12]*o,e[1]=t[1]*n+t[5]*r+t[9]*i+t[13]*o,e[2]=t[2]*n+t[6]*r+t[10]*i+t[14]*o,e[3]=t[3]*n+t[7]*r+t[11]*i+t[15]*o,e}function O(e,t,n,r){return s(r,r),s(r,r),s(r,r)}function d(e,t){this.index=e,this.dataCoordinate=this.position=t}function $(e){return!0===e||1<e?1:e}function g(e,t,n,r,i,o,a,s,l,u,c,f){this.gl=e,this.pixelRatio=1,this.shader=t,this.orthoShader=n,this.projectShader=r,this.pointBuffer=i,this.colorBuffer=o,this.glyphBuffer=a,this.idBuffer=s,this.vao=l,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=u,this.pickOrthoShader=c,this.pickProjectShader=f,this.points=[],this._selectResult=new d(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}t.exports=function(e){var t=e.gl,n=y.createPerspective(t),r=y.createOrtho(t),i=y.createProject(t),o=y.createPickPerspective(t),a=y.createPickOrtho(t),s=y.createPickProject(t),l=h(t),u=h(t),c=h(t),f=h(t),d=p(t,[{buffer:l,size:3,type:t.FLOAT},{buffer:u,size:4,type:t.FLOAT},{buffer:c,size:2,type:t.FLOAT},{buffer:f,size:4,type:t.UNSIGNED_BYTE,normalized:!0}]),s=new g(t,n,r,i,l,u,c,f,d,o,a,s);return s.update(e),s};t=g.prototype;t.pickSlots=1,t.setPickBase=function(e){this.pickId=e},t.isTransparent=function(){if(this.hasAlpha)return!0;for(var e=0;e<3;++e)if(this.axesProject[e]&&this.projectHasAlpha)return!0;return!1},t.isOpaque=function(){if(!this.hasAlpha)return!0;for(var e=0;e<3;++e)if(this.axesProject[e]&&!this.projectHasAlpha)return!0;return!1};var A=[0,0],T=[0,0,0],P=[0,0,0],S=[0,0,0,1],E=[0,0,0,1],C=k.slice(),L=[0,0,0],R=[[0,0,0],[0,0,0]];function I(e){return e[0]=e[1]=e[2]=0,e}function z(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1,e}function D(e,t,n,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[n]=r,e}function l(e,t,n,r){var i=t.axesProject,o=t.gl,a=e.uniforms,s=n.model||k,l=n.view||k,n=n.projection||k,u=t.axesBounds,c=function(e){for(var t=R,n=0;n<2;++n)for(var r=0;r<3;++r)t[n][r]=Math.max(Math.min(e[n][r],1e8),-1e8);return t}(t.clipBounds),f=t.axes&&t.axes.lastCubeProps?t.axes.lastCubeProps.axis:[1,1,1];A[0]=2/o.drawingBufferWidth,A[1]=2/o.drawingBufferHeight,e.bind(),a.view=l,a.projection=n,a.screenSize=A,a.highlightId=t.highlightId,a.highlightScale=t.highlightScale,a.clipBounds=c,a.pickGroup=t.pickId/255,a.pixelRatio=r;for(var d=0;d<3;++d)if(i[d]){a.scale=t.projectScale[d],a.opacity=t.projectOpacity[d];for(var h=C,p=0;p<16;++p)h[p]=0;for(p=0;p<4;++p)h[5*p]=1;h[5*d]=0,f[d]<0?h[12+d]=u[0][d]:h[12+d]=u[1][d],j(h,s,h),a.model=h;var y=(d+1)%3,g=(d+2)%3,v=I(T),m=I(P);v[y]=1,m[g]=1;var b,x=O(0,0,0,z(S,v)),_=O(0,0,0,z(E,m));Math.abs(x[1])>Math.abs(_[1])&&(b=x,x=_,_=b,b=v,v=m,m=b,b=y,y=g,g=b),x[0]<0&&(v[y]=-1),0<_[1]&&(m[g]=-1);for(var w=0,M=0,p=0;p<4;++p)w+=Math.pow(s[4*y+p],2),M+=Math.pow(s[4*g+p],2);v[y]/=Math.sqrt(w),m[g]/=Math.sqrt(M),a.axes[0]=v,a.axes[1]=m,a.fragClipBounds[0]=D(L,c[0],d,-1e8),a.fragClipBounds[1]=D(L,c[1],d,1e8),t.vao.bind(),t.vao.draw(o.TRIANGLES,t.vertexCount),0<t.lineWidth&&(o.lineWidth(t.lineWidth*r),t.vao.draw(o.LINES,t.lineVertexCount,t.vertexCount)),t.vao.unbind()}}var u=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function r(e,t,n,r,i,o,a){var s=n.gl;o!==n.projectHasAlpha&&!a||l(t,n,r,i),o!==n.hasAlpha&&!a||(e.bind(),(e=e.uniforms).model=r.model||k,e.view=r.view||k,e.projection=r.projection||k,A[0]=2/s.drawingBufferWidth,A[1]=2/s.drawingBufferHeight,e.screenSize=A,e.highlightId=n.highlightId,e.highlightScale=n.highlightScale,e.fragClipBounds=u,e.clipBounds=n.axes.bounds,e.opacity=n.opacity,e.pickGroup=n.pickId/255,e.pixelRatio=i,n.vao.bind(),n.vao.draw(s.TRIANGLES,n.vertexCount),0<n.lineWidth&&(s.lineWidth(n.lineWidth*i),n.vao.draw(s.LINES,n.lineVertexCount,n.vertexCount)),n.vao.unbind())}function K(e,t,n,r){t=Array.isArray(e)?t<e.length?e[t]:void 0:e;t=a(t);e=!0;i(t)&&(e=!(t="▼"));r=o(t,n,r);return{mesh:r[0],lines:r[1],bounds:r[2],visible:e}}t.draw=function(e){r(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,e,this.pixelRatio,!1,!1)},t.drawTransparent=function(e){r(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,e,this.pixelRatio,!0,!1)},t.drawPick=function(e){r(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,e,1,!0,!0)},t.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;e=e.value[2]+(e.value[1]<<8)+(e.value[0]<<16);if(e>=this.pointCount||e<0)return null;var t=this.points[e],n=this._selectResult;n.index=e;for(var r=0;r<3;++r)n.position[r]=n.dataCoordinate[r]=t[r];return n},t.highlight=function(e){e?(e=e.index,this.highlightId=[(255&e)/255,(e>>8&255)/255,(e>>16&255)/255,0]):this.highlightId=[1,1,1,1]},t.update=function(e){var t,n;if("perspective"in(e=e||{})&&(this.useOrtho=!e.perspective),"orthographic"in e&&(this.useOrtho=!!e.orthographic),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"project"in e&&(Array.isArray(e.project)?this.axesProject=e.project:(t=!!e.project,this.axesProject=[t,t,t])),"projectScale"in e&&(Array.isArray(e.projectScale)?this.projectScale=e.projectScale.slice():(n=+e.projectScale,this.projectScale=[n,n,n])),this.projectHasAlpha=!1,"projectOpacity"in e){Array.isArray(e.projectOpacity)?this.projectOpacity=e.projectOpacity.slice():(n=+e.projectOpacity,this.projectOpacity=[n,n,n]);for(var r=0;r<3;++r)this.projectOpacity[r]=$(this.projectOpacity[r]),this.projectOpacity[r]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in e&&(this.opacity=$(e.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var i=e.position,o=e.font||"normal",a=e.alignment||[0,0];if(2===a.length)s=a[0],l=a[1];else for(var s=[],l=[],r=0;r<a.length;++r)s[r]=a[r][0],l[r]=a[r][1];var u=[1/0,1/0,1/0],c=[-1/0,-1/0,-1/0],f=e.glyph,d=e.color,h=e.size,p=e.angle,y=e.lineColor,g=-1,v=0,m=0,b=0;if(i.length){b=i.length;e:for(r=0;r<b;++r){for(var x=i[r],_=0;_<3;++_)if(isNaN(x[_])||!isFinite(x[_]))continue e;var w=(I=K(f,r,o,this.pixelRatio)).mesh,M=I.lines,j=I.bounds;v+=3*w.cells.length,m+=2*M.edges.length}}var e=v+m,k=Z.mallocFloat(3*e),O=Z.mallocFloat(4*e),A=Z.mallocFloat(2*e),T=Z.mallocUint32(e);if(0<e){var P=0,S=v,E=[0,0,0,1],C=[0,0,0,1],L=Array.isArray(d)&&Array.isArray(d[0]),R=Array.isArray(y)&&Array.isArray(y[0]);e:for(r=0;r<b;++r){g+=1;for(x=i[r],_=0;_<3;++_){if(isNaN(x[_])||!isFinite(x[_]))continue e;c[_]=Math.max(c[_],x[_]),u[_]=Math.min(u[_],x[_])}var I,z,w=(I=K(f,r,o,this.pixelRatio)).mesh,M=I.lines,j=I.bounds,D=I.visible;if(D)if(Array.isArray(d)){if(3===(z=L?r<d.length?d[r]:[0,0,0,0]:d).length){for(_=0;_<3;++_)E[_]=z[_];E[3]=1}else if(4===z.length){for(_=0;_<4;++_)E[_]=z[_];!this.hasAlpha&&z[3]<1&&(this.hasAlpha=!0)}}else E[0]=E[1]=E[2]=0,E[3]=1;else E=[1,1,1,0];if(D)if(Array.isArray(y)){if(3===(z=R?r<y.length?y[r]:[0,0,0,0]:y).length){for(_=0;_<3;++_)C[_]=z[_];C[_]=1}else if(4===z.length){for(_=0;_<4;++_)C[_]=z[_];!this.hasAlpha&&z[3]<1&&(this.hasAlpha=!0)}}else C[0]=C[1]=C[2]=0,C[3]=1;else C=[1,1,1,0];var N=.5;D?Array.isArray(h)?N=r<h.length?+h[r]:12:h?N=+h:this.useOrtho&&(N=12):N=0;var F=0;Array.isArray(p)?F=r<p.length?+p[r]:0:p&&(F=+p);for(var B=Math.cos(F),U=Math.sin(F),x=i[r],_=0;_<3;++_)c[_]=Math.max(c[_],x[_]),u[_]=Math.min(u[_],x[_]);var D=s,F=l,D=0;Array.isArray(s)?D=r<s.length?s[r]:0:s&&(D=s);F=0;Array.isArray(l)?F=r<l.length?l[r]:0:l&&(F=l);for(var q=[D*=0<D?1-j[0][0]:D<0?1+j[1][0]:1,F*=0<F?1-j[0][1]:F<0?1+j[1][1]:1],H=w.cells||[],V=w.positions||[],_=0;_<H.length;++_)for(var G=H[_],W=0;W<3;++W){for(var Y=0;Y<3;++Y)k[3*P+Y]=x[Y];for(Y=0;Y<4;++Y)O[4*P+Y]=E[Y];T[P]=g;var X=V[G[W]];A[2*P]=N*(B*X[0]-U*X[1]+q[0]),A[2*P+1]=N*(U*X[0]+B*X[1]+q[1]),P+=1}for(H=M.edges,V=M.positions,_=0;_<H.length;++_)for(G=H[_],W=0;W<2;++W){for(Y=0;Y<3;++Y)k[3*S+Y]=x[Y];for(Y=0;Y<4;++Y)O[4*S+Y]=C[Y];T[S]=g;X=V[G[W]];A[2*S]=N*(B*X[0]-U*X[1]+q[0]),A[2*S+1]=N*(U*X[0]+B*X[1]+q[1]),S+=1}}}this.bounds=[u,c],this.points=i,this.pointCount=i.length,this.vertexCount=v,this.lineVertexCount=m,this.pointBuffer.update(k),this.colorBuffer.update(O),this.glyphBuffer.update(A),this.idBuffer.update(T),Z.free(k),Z.free(O),Z.free(A),Z.free(T)},t.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(e,t,n){"use strict";e=e("glslify");n.boxVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),n.boxFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:231}],130:[function(e,t,n){"use strict";var i=e("gl-shader"),o=e("gl-buffer"),a=e("./lib/shaders");function s(e,t,n){this.plot=e,this.boxBuffer=t,this.boxShader=n,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}t.exports=function(e,t){var n=e.gl,r=o(n,[0,0,0,1,1,0,1,1]),n=i(n,a.boxVertex,a.boxFragment),n=new s(e,r,n);return n.update(t),e.addOverlay(n),n};t=s.prototype;t.draw=function(){var e,t,n,r,i,o,a,s,l,u,c,f,d;this.enabled&&(f=this.plot,e=this.selectBox,t=this.borderWidth,this.innerFill,n=this.innerColor,this.outerFill,r=this.outerColor,i=this.borderColor,o=f.box,s=f.screenBox,d=f.dataBox,a=f.viewBox,l=f.pixelRatio,u=(e[0]-d[0])*(a[2]-a[0])/(d[2]-d[0])+a[0],c=(e[1]-d[1])*(a[3]-a[1])/(d[3]-d[1])+a[1],f=(e[2]-d[0])*(a[2]-a[0])/(d[2]-d[0])+a[0],d=(e[3]-d[1])*(a[3]-a[1])/(d[3]-d[1])+a[1],u=Math.max(u,a[0]),c=Math.max(c,a[1]),f=Math.min(f,a[2]),d=Math.min(d,a[3]),f<u||d<c||(o.bind(),a=s[2]-s[0],s=s[3]-s[1],this.outerFill&&(o.drawBox(0,0,a,c,r),o.drawBox(0,c,u,d,r),o.drawBox(0,d,a,s,r),o.drawBox(f,c,a,d,r)),this.innerFill&&o.drawBox(u,c,f,d,n),0<t&&(o.drawBox(u-(l=t*l),c-l,f+l,c+l,i),o.drawBox(u-l,d-l,f+l,d+l,i),o.drawBox(u-l,c-l,u+l,d+l,i),o.drawBox(f-l,c-l,f+l,d+l,i))))},t.update=function(e){this.innerFill=!!(e=e||{}).innerFill,this.outerFill=!!e.outerFill,this.innerColor=(e.innerColor||[0,0,0,.5]).slice(),this.outerColor=(e.outerColor||[0,0,0,.5]).slice(),this.borderColor=(e.borderColor||[0,0,0,1]).slice(),this.borderWidth=e.borderWidth||0,this.selectBox=(e.selectBox||this.selectBox).slice()},t.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(e,t,n){"use strict";t.exports=function(e,t){var n=t[0],r=t[1],t=i(e,n,r,{}),r=o.mallocUint8(n*r*4);return new u(e,t,r)};var i=e("gl-fbo"),o=e("typedarray-pool"),a=e("ndarray"),s=e("bit-twiddle").nextPow2;function l(e,t,n,r,i){this.coord=[e,t],this.id=n,this.value=r,this.distance=i}function u(e,t,n){this.gl=e,this.fbo=t,this.buffer=n,this._readTimeout=null;var r=this;this._readCallback=function(){r.gl&&(t.bind(),e.readPixels(0,0,t.shape[0],t.shape[1],e.RGBA,e.UNSIGNED_BYTE,r.buffer),r._readTimeout=null)}}e=u.prototype;Object.defineProperty(e,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(e){if(this.gl){this.fbo.shape=e;var t=this.fbo.shape[0],n=this.fbo.shape[1];if(n*t*4>this.buffer.length){o.free(this.buffer);for(var r=this.buffer=o.mallocUint8(s(n*t*4)),i=0;i<n*t*4;++i)r[i]=255}return e}}}),e.begin=function(){var e=this.gl;this.shape;e&&(this.fbo.bind(),e.clearColor(1,1,1,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT))},e.end=function(){var e=this.gl;e&&(e.bindFramebuffer(e.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},e.query=function(e,t,n){if(!this.gl)return null;var r=this.fbo.shape.slice();e|=0,t|=0,"number"!=typeof n&&(n=1);var i=0|Math.min(Math.max(e-n,0),r[0]),o=0|Math.min(Math.max(e+n,0),r[0]),e=0|Math.min(Math.max(t-n,0),r[1]),t=0|Math.min(Math.max(t+n,0),r[1]);if(o<=i||t<=e)return null;o=[o-i,t-e],t=a(this.buffer,[o[0],o[1],4],[4,4*r[0],1],4*(i+r[0]*e)),r=function(e,t,n){for(var r=1e8,i=-1,o=-1,a=e.shape[0],s=e.shape[1],l=0;l<a;l++)for(var u=0;u<s;u++){var c=e.get(l,u,0),f=e.get(l,u,1),d=e.get(l,u,2),h=e.get(l,u,3);!(c<255||f<255||d<255||h<255)||(h=(h=t-l)*h+(h=n-u)*h)<r&&(r=h,i=l,o=u)}return[i,o,r]}(t.hi(o[0],o[1],1),n,n),o=r[0],n=r[1];return o<0||Math.pow(this.radius,2)<r[2]?null:new l(o+i|0,n+e|0,t.get(o,n,0),[t.get(o,n,1),t.get(o,n,2),t.get(o,n,3)],Math.sqrt(r[2]))},e.dispose=function(){this.gl&&(this.fbo.dispose(),o.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(e,t,n){"use strict";var m=e("./lib/create-uniforms"),b=e("./lib/create-attributes"),x=e("./lib/reflect"),_=e("./lib/shader-cache"),w=e("./lib/runtime-reflect"),M=e("./lib/GLError");function o(e){this.gl=e,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}e=o.prototype;function j(e,t){return e.name<t.name?-1:1}e.bind=function(){var e;this.program||this._relink();var t=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),n=this.gl.lastAttribCount;if(n<t)for(e=n;e<t;e++)this.gl.enableVertexAttribArray(e);else if(t<n)for(e=t;e<n;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=t,this.gl.useProgram(this.program)},e.dispose=function(){for(var e=this.gl.lastAttribCount,t=0;t<e;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},e.update=function(e,t,n,r){t&&1!==arguments.length||(e=(a=e).vertex,t=a.fragment,n=a.uniforms,r=a.attributes);var i=this,o=i.gl,a=i._vref;i._vref=_.shader(o,o.VERTEX_SHADER,e),a&&a.dispose(),i.vertShader=i._vref.shader;a=this._fref;if(i._fref=_.shader(o,o.FRAGMENT_SHADER,t),a&&a.dispose(),i.fragShader=i._fref.shader,!n||!r){t=o.createProgram();if(o.attachShader(t,i.fragShader),o.attachShader(t,i.vertShader),o.linkProgram(t),!o.getProgramParameter(t,o.LINK_STATUS)){a=o.getProgramInfoLog(t);throw new M(a,"Error linking program:"+a)}n=n||w.uniforms(o,t),r=r||w.attributes(o,t),o.deleteProgram(t)}(r=r.slice()).sort(j);for(var s=[],l=[],u=[],c=0;c<r.length;++c){var f=r[c];if(0<=f.type.indexOf("mat")){for(var d=0|f.type.charAt(f.type.length-1),h=new Array(d),p=0;p<d;++p)h[p]=u.length,l.push(f.name+"["+p+"]"),"number"==typeof f.location?u.push(f.location+p):Array.isArray(f.location)&&f.location.length===d&&"number"==typeof f.location[p]?u.push(0|f.location[p]):u.push(-1);s.push({name:f.name,type:f.type,locations:h})}else s.push({name:f.name,type:f.type,locations:[u.length]}),l.push(f.name),"number"==typeof f.location?u.push(0|f.location):u.push(-1)}var y=0;for(c=0;c<u.length;++c)if(u[c]<0){for(;0<=u.indexOf(y);)y+=1;u[c]=y}var g=new Array(n.length);function v(){i.program=_.program(o,i._vref,i._fref,l,u);for(var e=0;e<n.length;++e)g[e]=o.getUniformLocation(i.program,n[e].name)}v(),i._relink=v,i.types={uniforms:x(n),attributes:x(r)},i.attributes=b(o,i,s,u),Object.defineProperty(i,"uniforms",m(o,i,n,g))},t.exports=function(e,t,n,r,i){return(e=new o(e)).update(t,n,r,i),e}},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(e,t,n){function r(e,t,n){this.shortMessage=t||"",this.longMessage=n||"",this.rawError=e||"",this.message="gl-shader: "+(t||e||"")+(n?"\n"+n:""),this.stack=(new Error).stack}(r.prototype=new Error).name="GLError",t.exports=r.prototype.constructor=r},{}],134:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){for(var i={},o=0,a=n.length;o<a;++o){var s,l=n[o],u=l.name,c=l.type,f=l.locations;switch(c){case"bool":case"int":case"float":h(e,t,f[0],r,1,i,u);break;default:if(0<=c.indexOf("vec")){if((s=c.charCodeAt(c.length-1)-48)<2||4<s)throw new d("","Invalid data type for attribute "+u+": "+c);h(e,t,f[0],r,s,i,u)}else{if(!(0<=c.indexOf("mat")))throw new d("","Unknown data type for attribute "+u+": "+c);if((s=c.charCodeAt(c.length-1)-48)<2||4<s)throw new d("","Invalid data type for attribute "+u+": "+c);!function(a,e,s,l,u,t,n){for(var r=new Array(u),i=new Array(u),o=0;o<u;++o)h(a,e,s[o],l,u,r,o),i[o]=r[o];Object.defineProperty(r,"location",{set:function(e){if(Array.isArray(e))for(var t=0;t<u;++t)i[t].location=e[t];else for(t=0;t<u;++t)i[t].location=e+t;return e},get:function(){for(var e=new Array(u),t=0;t<u;++t)e[t]=l[s[t]];return e},enumerable:!0}),r.pointer=function(e,t,n,r){e=e||a.FLOAT,t=!!t,n=n||u*u,r=r||0;for(var i=0;i<u;++i){var o=l[s[i]];a.vertexAttribPointer(o,u,e,t,n,r+i*u),a.enableVertexAttribArray(o)}};var c=new Array(u),f=a["vertexAttrib"+u+"fv"];Object.defineProperty(t,n,{set:function(e){for(var t=0;t<u;++t){var n=l[s[t]];if(a.disableVertexAttribArray(n),Array.isArray(e[0]))f.call(a,n,e[t]);else{for(var r=0;r<u;++r)c[r]=e[u*t+r];f.call(a,n,c)}}return e},get:function(){return r},enumerable:!0})}(e,t,f,r,s,i,u)}}}return i};var d=e("./GLError");function u(e,t,n,r,i,o){this._gl=e,this._wrapper=t,this._index=n,this._locations=r,this._dimension=i,this._constFunc=o}e=u.prototype;e.pointer=function(e,t,n,r){var i=this._gl,o=this._locations[this._index];i.vertexAttribPointer(o,this._dimension,e||i.FLOAT,!!t,n||0,r||0),i.enableVertexAttribArray(o)},e.set=function(e,t,n,r){return this._constFunc(this._locations[this._index],e,t,n,r)},Object.defineProperty(e,"location",{get:function(){return this._locations[this._index]},set:function(e){return e!==this._locations[this._index]&&(this._locations[this._index]=0|e,this._wrapper.program=null),0|e}});var c=[function(e,t,n){return void 0===n.length?e.vertexAttrib1f(t,n):e.vertexAttrib1fv(t,n)},function(e,t,n,r){return void 0===n.length?e.vertexAttrib2f(t,n,r):e.vertexAttrib2fv(t,n)},function(e,t,n,r,i){return void 0===n.length?e.vertexAttrib3f(t,n,r,i):e.vertexAttrib3fv(t,n)},function(e,t,n,r,i,o){return void 0===n.length?e.vertexAttrib4f(t,n,r,i,o):e.vertexAttrib4fv(t,n)}];function h(t,e,n,r,i,o,a){var s=c[i],l=new u(t,e,n,r,i,s);Object.defineProperty(o,a,{set:function(e){return t.disableVertexAttribArray(r[n]),s(t,r[n],e),e},get:function(){return l},enumerable:!0})}},{"./GLError":133}],135:[function(e,t,n){"use strict";var r=e("./reflect"),y=e("./GLError");function s(e){return function(){return e}}function l(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=t;return n}t.exports=function(d,e,h,p){function o(f){return function(e){for(var t=function e(t,n){if("object"!=typeof n)return[[t,n]];var r=[];for(var i in n){var o=n[i],a=t;parseInt(i)+""===i?a+="["+i+"]":a+="."+i,"object"==typeof o?r.push.apply(r,e(a,o)):r.push([a,o])}return r}("",f),n=0;n<t.length;++n){var r=t[n],i=r[0],o=r[1];if(p[o]){var a,s=e;"string"!=typeof i||0!==i.indexOf(".")&&0!==i.indexOf("[")||(s=(a=0===(a=i).indexOf(".")?i.slice(1):a).indexOf("]")===a.length-1?(r=a.indexOf("["),i=a.slice(0,r),r=a.slice(r+1,a.length-1),(i?e[i]:e)[r]):e[a]);var l,u=h[o].type;switch(u){case"bool":case"int":case"sampler2D":case"samplerCube":d.uniform1i(p[o],s);break;case"float":d.uniform1f(p[o],s);break;default:var c=u.indexOf("vec");if(!(0<=c&&c<=1&&u.length===4+c)){if(0!==u.indexOf("mat")||4!==u.length)throw new y("","Unknown uniform data type for "+name+": "+u);if((l=u.charCodeAt(u.length-1)-48)<2||4<l)throw new y("","Invalid uniform dimension type for matrix "+name+": "+u);d["uniformMatrix"+l+"fv"](p[o],!1,s);break}if((l=u.charCodeAt(u.length-1)-48)<2||4<l)throw new y("","Invalid data type");switch(u.charAt(0)){case"b":case"i":d["uniform"+l+"iv"](p[o],s);break;case"v":d["uniform"+l+"fv"](p[o],s);break;default:throw new y("","Unrecognized data type for vector "+name+": "+u)}}}}}}function i(e,t,n){var r,i;"object"==typeof n?(r=a(n),Object.defineProperty(e,t,{get:s(r),set:o(n),enumerable:!0,configurable:!1})):p[n]?Object.defineProperty(e,t,{get:function(e,t,n){return e.getUniform(t.program,n[i])},set:o(i=n),enumerable:!0,configurable:!1}):e[t]=function(e){switch(e){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var t,n=e.indexOf("vec");if(0<=n&&n<=1&&e.length===4+n){if((t=e.charCodeAt(e.length-1)-48)<2||4<t)throw new y("","Invalid data type");return"b"===e.charAt(0)?l(t,!1):l(t,0)}if(0!==e.indexOf("mat")||4!==e.length)throw new y("","Unknown uniform data type for "+name+": "+e);if((t=e.charCodeAt(e.length-1)-48)<2||4<t)throw new y("","Invalid uniform dimension type for matrix "+name+": "+e);return l(t*t,0)}}(h[n].type)}function a(e){if(Array.isArray(e))for(var t=new Array(e.length),n=0;n<e.length;++n)i(t,n,e[n]);else for(var r in t={},e)i(t,r,e[r]);return t}var t=r(h,!0);return{get:s(a(t)),set:o(t),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n={},r=0;r<e.length;++r)for(var i=e[r].name.split("."),o=n,a=0;a<i.length;++a){var s=i[a].split("[");if(1<s.length){s[0]in o||(o[s[0]]=[]),o=o[s[0]];for(var l=1;l<s.length;++l){var u=parseInt(s[l]);l<s.length-1||a<i.length-1?(u in o||(l<s.length-1?o[u]=[]:o[u]={}),o=o[u]):o[u]=t?r:e[r].type}}else a<i.length-1?(s[0]in o||(o[s[0]]={}),o=o[s[0]]):o[s[0]]=t?r:e[r].type}return n}},{}],137:[function(e,t,n){"use strict";n.uniforms=function(e,t){for(var n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=[],i=0;i<n;++i){var o=e.getActiveUniform(t,i);if(o){var a=l(e,o.type);if(1<o.size)for(var s=0;s<o.size;++s)r.push({name:o.name.replace("[0]","["+s+"]"),type:a});else r.push({name:o.name,type:a})}}return r},n.attributes=function(e,t){for(var n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),r=[],i=0;i<n;++i){var o=e.getActiveAttrib(t,i);o&&r.push({name:o.name,type:l(e,o.type)})}return r};var o={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},a=null;function l(e,t){if(!a){var n=Object.keys(o);a={};for(var r=0;r<n.length;++r){var i=n[r];a[e[i]]=o[i]}}return a[t]}},{}],138:[function(e,t,n){"use strict";n.shader=function(e,t,n){return u(e).getShaderReference(t,n)},n.program=function(e,t,n,r,i){return u(e).getProgram(t,n,r,i)};var s=e("./GLError"),o=e("gl-format-compiler-error"),r=new("undefined"==typeof WeakMap?e("weakmap-shim"):WeakMap),a=0;function l(e,t,n,r,i,o,a){this.id=e,this.src=t,this.type=n,this.shader=r,this.count=o,this.programs=[],this.cache=a}function i(e){this.gl=e,this.shaders=[{},{}],this.programs={}}l.prototype.dispose=function(){if(0==--this.count){for(var e=this.cache,t=e.gl,n=this.programs,r=0,i=n.length;r<i;++r){var o=e.programs[n[r]];o&&(delete e.programs[r],t.deleteProgram(o))}t.deleteShader(this.shader),delete e.shaders[this.type===t.FRAGMENT_SHADER|0][this.src]}};e=i.prototype;function u(e){var t=r.get(e);return t||(t=new i(e),r.set(e,t)),t}e.getShaderReference=function(e,t){var n=this.gl,r=this.shaders[e===n.FRAGMENT_SHADER|0],i=r[t];return i&&n.isShader(i.shader)?i.count+=1:(n=function(e,t,n){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))return r;r=e.getShaderInfoLog(r);try{var i=o(r,n,t)}catch(e){throw console.warn("Failed to format compiler error: "+e),new s(r,"Error compiling shader:\n"+r)}throw new s(r,i.short,i.long)}(n,e,t),i=r[t]=new l(a++,t,e,n,0,1,this)),i},e.getProgram=function(e,t,n,r){var i=[e.id,t.id,n.join(":"),r.join(":")].join("@"),o=this.programs[i];return o&&this.gl.isProgram(o)||(this.programs[i]=o=function(e,t,n,r,i){var o=e.createProgram();e.attachShader(o,t),e.attachShader(o,n);for(var a=0;a<r.length;++a)e.bindAttribLocation(o,i[a],r[a]);if(e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS))return o;throw n=e.getProgramInfoLog(o),new s(n,"Error linking program: "+n)}(this.gl,e.shader,t.shader,n,r),e.programs.push(i),t.programs.push(i)),o}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(e,t,n){"use strict";function r(e){this.plot=e,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}t.exports=function(e,t){var n=new r(e);return n.update(t),e.addOverlay(n),n};t=r.prototype;t.update=function(e){this.enable=((e=e||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(e.width||[1,1,1,1]).slice(),this.color=(e.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(e){return e.slice()}),this.center=(e.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var e=this.enable,t=this.width,n=this.color,r=this.center,i=this.plot,o=i.line,a=i.dataBox,s=i.viewBox;o.bind(),a[0]<=r[0]&&r[0]<=a[2]&&a[1]<=r[1]&&r[1]<=a[3]&&(i=s[0]+(r[0]-a[0])/(a[2]-a[0])*(s[2]-s[0]),a=s[1]+(r[1]-a[1])/(a[3]-a[1])*(s[3]-s[1]),e[0]&&o.drawLine(i,a,s[0],a,t[0],n[0]),e[1]&&o.drawLine(i,a,i,s[1],t[1],n[1]),e[2]&&o.drawLine(i,a,s[2],a,t[2],n[2]),e[3]&&o.drawLine(i,a,i,s[3],t[3],n[3]))},t.dispose=function(){this.plot.removeOverlay(this)}},{}],140:[function(e,t,n){"use strict";var r=e("glslify"),i=e("gl-shader"),o=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),a=r(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);t.exports=function(e){return i(e,o,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(e,t,n){"use strict";var s=e("gl-buffer"),l=e("gl-vao"),u=e("./shaders/index");t.exports=function(e,t){var a=[];function n(e,t,n,r,i,o){n=[e,t,n,0,0,0,1];n[r+3]=1,n[r]=i,a.push.apply(a,n),n[6]=-1,a.push.apply(a,n),n[r]=o,a.push.apply(a,n),a.push.apply(a,n),n[6]=1,a.push.apply(a,n),n[r]=i,a.push.apply(a,n)}n(0,0,0,0,0,1),n(0,0,0,1,0,1),n(0,0,0,2,0,1),n(1,0,0,1,-1,1),n(1,0,0,2,-1,1),n(0,1,0,0,-1,1),n(0,1,0,2,-1,1),n(0,0,1,0,-1,1),n(0,0,1,1,-1,1);var r=s(e,a),i=l(e,[{type:e.FLOAT,buffer:r,size:3,offset:0,stride:28},{type:e.FLOAT,buffer:r,size:3,offset:12,stride:28},{type:e.FLOAT,buffer:r,size:1,offset:24,stride:28}]),o=u(e);o.attributes.position.location=0,o.attributes.color.location=1,o.attributes.weight.location=2;o=new f(e,r,i,o);return o.update(t),o};var c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function f(e,t,n,r){this.gl=e,this.buffer=t,this.vao=n,this.shader=r,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var t=f.prototype,d=[0,0,0],h=[0,0,0],p=[0,0];t.isTransparent=function(){return!1},t.drawTransparent=function(e){},t.draw=function(e){var t=this.gl,n=this.vao,r=this.shader;n.bind(),r.bind();var i,o=e.model||c,a=e.view||c,e=e.projection||c;this.axes&&(i=this.axes.lastCubeProps.axis);for(var s=d,l=h,u=0;u<3;++u)i&&i[u]<0?(s[u]=this.bounds[0][u],l[u]=this.bounds[1][u]):(s[u]=this.bounds[1][u],l[u]=this.bounds[0][u]);p[0]=t.drawingBufferWidth,p[1]=t.drawingBufferHeight,r.uniforms.model=o,r.uniforms.view=a,r.uniforms.projection=e,r.uniforms.coordinates=[this.position,s,l],r.uniforms.colors=this.colors,r.uniforms.screenShape=p;for(u=0;u<3;++u)r.uniforms.lineWidth=this.lineWidth[u]*this.pixelRatio,this.enabled[u]&&(n.draw(t.TRIANGLES,6,6*u),this.drawSides[u]&&n.draw(t.TRIANGLES,12,18+12*u));n.unbind()},t.update=function(e){e&&("bounds"in e&&(this.bounds=e.bounds),"position"in e&&(this.position=e.position),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"colors"in e&&(this.colors=e.colors),"enabled"in e&&(this.enabled=e.enabled),"drawSides"in e&&(this.drawSides=e.drawSides))},t.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(e,t,n){var r=e("glslify"),i=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),o=r(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),e=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),r=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);n.meshShader={vertex:i,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},n.pickShader={vertex:e,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(e,t,n){"use strict";function R(e,t,n,r){for(var i=0,o=0;o<e.length;o++)for(var a=e[o].velocities,s=0;s<a.length;s++)i=Math.max(i,N.length(a[s]));for(var l=e.map(function(e){return function(e,t,n,r){for(var i=e.points,o=e.velocities,a=e.divergences,s=[],l=[],u=[],c=[],f=[],d=[],h=0,p=0,y=M.create(),g=M.create(),v=0;v<i.length;v++){var m=i[v],b=o[v],x=a[v];0===t&&(x=.05*n),p=N.length(b)/r,y=M.create(),N.copy(y,b),y[3]=x;for(var _=0;_<8;_++)f[_]=[m[0],m[1],m[2],_];if(0<c.length)for(_=0;_<8;_++){var w=(_+1)%8;s.push(c[_],f[_],f[w],f[w],c[w],c[_]),u.push(g,y,y,y,g,g),d.push(h,p,p,p,h,h);w=s.length;l.push([w-6,w-5,w-4],[w-3,w-2,w-1])}x=c,c=f,f=x,x=g,g=y,y=x,x=h,h=p,p=x}return{positions:s,cells:l,vectors:u,vertexIntensity:d}}(e,n,r,i)}),u=[],c=[],f=[],d=[],o=0;o<l.length;o++)for(var h=l[o],p=u.length,u=u.concat(h.positions),f=f.concat(h.vectors),d=d.concat(h.vertexIntensity),s=0;s<h.cells.length;s++){var y=h.cells[s],g=[];c.push(g);for(var v=0;v<y.length;v++)g.push(y[v]+p)}return{positions:u,cells:c,vectors:f,vertexIntensity:d,colormap:t}}function I(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];if(i===t)return r;if(t<i)return r-1}return r}function z(e,t,n){return e<t?t:n<e?n:e}function D(e){var t=1/0;e.sort(function(e,t){return e-t});for(var n=e.length,r=1;r<n;r++){var i=Math.abs(e[r]-e[r-1]);i<t&&(t=i)}return t}var N=e("gl-vec3"),M=e("gl-vec4"),F=["xyz","xzy","yxz","yzx","zxy","zyx"];t.exports=function(t,e){var n=t.startingPositions,r=t.maxLength||1e3,i=t.tubeSize||1,o=t.absoluteTubeSize,a=t.gridFill||"+x+y+z",s={};-1!==a.indexOf("-x")&&(s.reversedX=!0),-1!==a.indexOf("-y")&&(s.reversedY=!0),-1!==a.indexOf("-z")&&(s.reversedZ=!0),s.filled=F.indexOf(a.replace(/-/g,"").replace(/\+/g,""));var l=t.getVelocity||function(e){return function(e,t,n){var r=t.vectors,i=t.meshgrid,o=e[0],a=e[1],s=e[2],l=i[0].length,u=i[1].length,c=i[2].length,f=(p=I(i[0],o))+1,d=(y=I(i[1],a))+1,h=(g=I(i[2],s))+1,p=z(p,0,l-1),f=z(f,0,l-1),y=z(y,0,u-1),d=z(d,0,u-1),g=z(g,0,c-1),h=z(h,0,c-1);if(p<0||y<0||g<0||l-1<f||u-1<d||c-1<h)return N.create();var v,m,b,x,_,w,M=i[0][p],j=i[0][f],k=i[1][y],O=i[1][d],A=i[2][g],T=(o-M)/(j-M),P=(a-k)/(O-k),t=(s-A)/(i[2][h]-A);switch(isFinite(T)||(T=.5),isFinite(P)||(P=.5),isFinite(t)||(t=.5),n.reversedX&&(p=l-1-p,f=l-1-f),n.reversedY&&(y=u-1-y,d=u-1-d),n.reversedZ&&(g=c-1-g,h=c-1-h),n.filled){case 5:_=g,w=h,b=y*c,x=d*c,v=p*c*u,m=f*c*u;break;case 4:_=g,w=h,v=p*c,m=f*c,b=y*c*l,x=d*c*l;break;case 3:b=y,x=d,_=g*u,w=h*u,v=p*u*c,m=f*u*c;break;case 2:b=y,x=d,v=p*u,m=f*u,_=g*u*l,w=h*u*l;break;case 1:v=p,m=f,_=g*l,w=h*l,b=y*l*c,x=d*l*c;break;default:v=p,m=f,b=y*l,x=d*l,_=g*l*u,w=h*l*u}e=r[v+b+_],o=r[v+b+w],j=r[v+x+_],M=r[v+x+w],a=r[m+b+_],O=r[m+b+w],k=r[m+x+_],s=r[m+x+w],i=N.create(),A=N.create(),n=N.create(),r=N.create();N.lerp(i,e,a,T),N.lerp(A,o,O,T),N.lerp(n,j,k,T),N.lerp(r,M,s,T);s=N.create(),T=N.create();N.lerp(s,i,n,P),N.lerp(T,A,r,P);P=N.create();return N.lerp(P,s,T,t),P}(e,t,s)},u=t.getDivergence||function(e,t){var n=N.create();N.add(n,e,[1e-4,0,0]);var r=l(n);N.subtract(r,r,t),N.scale(r,r,1e4),N.add(n,e,[0,1e-4,0]);var i=l(n);N.subtract(i,i,t),N.scale(i,i,1e4),N.add(n,e,[0,0,1e-4]);e=l(n);return N.subtract(e,e,t),N.scale(e,e,1e4),N.add(n,r,i),N.add(n,n,e),n},c=[],f=e[0][0],d=e[0][1],h=e[0][2],p=e[1][0],y=e[1][1],g=e[1][2],v=10*N.distance(e[0],e[1])/r,m=v*v,a=1,b=0,x=n.length;1<x&&(a=function(e){for(var t=[],n=[],r=[],i={},o={},a={},s=e.length,l=0;l<s;l++){var u=e[l],c=u[0],f=u[1],u=u[2];i[c]||(t.push(c),i[c]=!0),o[f]||(n.push(f),o[f]=!0),a[u]||(r.push(u),a[u]=!0)}var d=D(t),h=D(n),p=D(r),p=Math.min(d,h,p);return isFinite(p)?p:1}(n));for(var _,w=0;w<x;w++){var M=N.create();N.copy(M,n[w]);var j=[M],k=[],O=l(M),A=M;k.push(O);var T=[],P=u(M,O),S=N.length(P);isFinite(S)&&b<S&&(b=S),T.push(S),c.push({points:j,velocities:k,divergences:T});for(var E=0;E<100*r&&j.length<r&&(C=_=void 0,_=(L=M)[0],C=L[1],L=L[2],!(_<f||p<_||C<d||y<C||L<h||g<L));){E++;var C=N.clone(O),L=N.squaredLength(C);if(0===L)break;m<L&&N.scale(C,C,v/Math.sqrt(L)),N.add(C,C,M),O=l(C),N.squaredDistance(A,C)-m>-1e-4*m&&(j.push(C),A=C,k.push(O),P=u(C,O),S=N.length(P),isFinite(S)&&b<S&&(b=S),T.push(S)),M=C}}e=R(c,t.colormap,b,a);return e.tubeScale=o||.5*i*a/(b=0===b?1:b),e};var r=e("./lib/shaders"),i=e("gl-cone3d").createMesh;t.exports.createTubeMesh=function(e,t){return i(e,t,{shaders:r,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(e,t,n){var r=e("gl-shader"),e=e("glslify"),i=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),o=e(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color — in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),s=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);n.createShader=function(e){e=r(e,i,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e.attributes.normal.location=2,e},n.createPickShader=function(e){e=r(e,i,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e.attributes.normal.location=2,e},n.createContourShader=function(e){e=r(e,a,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e},n.createPickContourShader=function(e){e=r(e,a,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e}},{"gl-shader":132,glslify:231}],145:[function(e,t,n){"use strict";t.exports=function(e){var t=e.gl,n=b(t),r=w(t),i=_(t),o=M(t),a=y(t),s=g(t,[{buffer:a,size:4,stride:j,offset:0},{buffer:a,size:3,stride:j,offset:16},{buffer:a,size:3,stride:j,offset:28}]),l=y(t),u=g(t,[{buffer:l,size:4,stride:20,offset:0},{buffer:l,size:1,stride:20,offset:16}]),c=y(t),f=g(t,[{buffer:c,size:2,type:t.FLOAT}]),d=v(t,1,T,t.RGBA,t.UNSIGNED_BYTE);d.minFilter=t.LINEAR,d.magFilter=t.LINEAR;var h,f=new P(t,[0,0],[[0,0,0],[0,0,0]],n,r,a,s,d,i,o,l,u,c,f,[0,0,0]),p={levels:[[],[],[]]};for(h in e)p[h]=e[h];return p.colormap=p.colormap||"jet",f.update(p),f};var ue=e("bit-twiddle"),y=e("gl-buffer"),g=e("gl-vao"),v=e("gl-texture2d"),ce=e("typedarray-pool"),i=e("colormap"),o=e("ndarray-ops"),a=e("ndarray-pack"),fe=e("ndarray"),de=e("surface-nets"),p=e("gl-mat4/multiply"),m=e("gl-mat4/invert"),x=e("binary-search-bounds"),he=e("ndarray-gradient"),e=e("./lib/shaders"),b=e.createShader,_=e.createContourShader,w=e.createPickShader,M=e.createPickContourShader,j=40,k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],pe=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],O=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function A(e,t,n,r,i){this.position=e,this.index=t,this.uv=n,this.level=r,this.dataCoordinate=i}!function(){for(var e=0;e<3;++e){var t=O[e],n=(e+2)%3;t[0+(e+1)%3]=1,t[3+n]=1,t[e+6]=1}}();var T=256;function P(e,t,n,r,i,o,a,s,l,u,c,f,d,h,p){this.gl=e,this.shape=t,this.bounds=n,this.objectOffset=p,this.intensityBounds=[],this._shader=r,this._pickShader=i,this._coordinateBuffer=o,this._vao=a,this._colorMap=s,this._contourShader=l,this._contourPickShader=u,this._contourBuffer=c,this._contourVAO=f,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new A([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=d,this._dynamicVAO=h,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[fe(ce.mallocFloat(1024),[0,0]),fe(ce.mallocFloat(1024),[0,0]),fe(ce.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}e=P.prototype;e.genColormap=function(e,n){var r=!1,e=a([i({colormap:e,nshades:T,format:"rgba"}).map(function(e,t){t=n?function(e,t){if(!t)return 1;if(!t.length)return 1;for(var n=0;n<t.length;++n){if(t.length<2)return 1;if(t[n][0]===e)return t[n][1];if(t[n][0]>e&&0<n){var r=(t[n][0]-e)/(t[n][0]-t[n-1][0]);return t[n][1]*(1-r)+r*t[n-1][1]}}return 1}(t/255,n):e[3];return t<1&&(r=!0),[e[0],e[1],e[2],255*t]})]);return o.divseq(e,255),this.hasAlphaScale=r,e},e.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},e.isOpaque=function(){return!this.isTransparent()},e.pickSlots=1,e.setPickBase=function(e){this.pickId=e};var c=[0,0,0],f={showSurface:!1,showContour:!1,projections:[k.slice(),k.slice(),k.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function S(e,t){for(var n=t.axes&&t.axes.lastCubeProps.axis||c,r=t.showSurface,i=t.showContour,o=0;o<3;++o)for(r=r||t.surfaceProject[o],s=0;s<3;++s)i=i||t.contourProject[o][s];for(o=0;o<3;++o){for(var a=f.projections[o],s=0;s<16;++s)a[s]=0;for(s=0;s<4;++s)a[5*s]=1;a[5*o]=0,a[12+o]=t.axesBounds[+(0<n[o])][o],p(a,e.model,a);for(var l=f.clipBounds[o],u=0;u<2;++u)for(s=0;s<3;++s)l[u][s]=e.clipBounds[u][s];l[0][o]=-1e8,l[1][o]=1e8}return f.showSurface=r,f.showContour=i,f}var E={model:k,view:k,projection:k,inverseModel:k.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},C=k.slice(),L=[1,0,0,0,1,0,0,0,1];function r(e,t){e=e||{};var n=this.gl;n.disable(n.CULL_FACE),this._colorMap.bind(0);var r=E;r.model=e.model||k,r.view=e.view||k,r.projection=e.projection||k,r.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],r.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],r.objectOffset=this.objectOffset,r.contourColor=this.contourColor[0],r.inverseModel=m(r.inverseModel,r.model);for(var i=0;i<2;++i)for(var o=r.clipBounds[i],a=0;a<3;++a)o[a]=Math.min(Math.max(this.clipBounds[i][a],-1e8),1e8);r.kambient=this.ambientLight,r.kdiffuse=this.diffuseLight,r.kspecular=this.specularLight,r.roughness=this.roughness,r.fresnel=this.fresnel,r.opacity=this.opacity,r.height=0,r.permutation=L,r.vertexColor=this.vertexColor;var s=C;for(p(s,r.view,r.model),p(s,r.projection,s),m(s,s),i=0;i<3;++i)r.eyePosition[i]=s[12+i]/s[15];for(var l=s[15],i=0;i<3;++i)l+=this.lightPosition[i]*s[4*i+3];for(i=0;i<3;++i){for(var u=s[12+i],a=0;a<3;++a)u+=s[4*a+i]*this.lightPosition[a];r.lightPosition[i]=u/l}var c=S(r,this);if(c.showSurface){for(this._shader.bind(),this._shader.uniforms=r,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(n.TRIANGLES,this._vertexCount),i=0;i<3;++i)this.surfaceProject[i]&&this.vertexCount&&(this._shader.uniforms.model=c.projections[i],this._shader.uniforms.clipBounds=c.clipBounds[i],this._vao.draw(n.TRIANGLES,this._vertexCount));this._vao.unbind()}if(c.showContour){var f=this._contourShader;r.kambient=1,r.kdiffuse=0,r.kspecular=0,r.opacity=1,f.bind(),f.uniforms=r;var d=this._contourVAO;for(d.bind(),i=0;i<3;++i)for(f.uniforms.permutation=O[i],n.lineWidth(this.contourWidth[i]*this.pixelRatio),a=0;a<this.contourLevels[i].length;++a)a===this.highlightLevel[i]?(f.uniforms.contourColor=this.highlightColor[i],f.uniforms.contourTint=this.highlightTint[i]):0!==a&&a-1!==this.highlightLevel[i]||(f.uniforms.contourColor=this.contourColor[i],f.uniforms.contourTint=this.contourTint[i]),this._contourCounts[i][a]&&(f.uniforms.height=this.contourLevels[i][a],d.draw(n.LINES,this._contourCounts[i][a],this._contourOffsets[i][a]));for(i=0;i<3;++i)for(f.uniforms.model=c.projections[i],f.uniforms.clipBounds=c.clipBounds[i],a=0;a<3;++a)if(this.contourProject[i][a]){f.uniforms.permutation=O[a],n.lineWidth(this.contourWidth[a]*this.pixelRatio);for(var h=0;h<this.contourLevels[a].length;++h)h===this.highlightLevel[a]?(f.uniforms.contourColor=this.highlightColor[a],f.uniforms.contourTint=this.highlightTint[a]):0!==h&&h-1!==this.highlightLevel[a]||(f.uniforms.contourColor=this.contourColor[a],f.uniforms.contourTint=this.contourTint[a]),this._contourCounts[a][h]&&(f.uniforms.height=this.contourLevels[a][h],d.draw(n.LINES,this._contourCounts[a][h],this._contourOffsets[a][h]))}for(d.unbind(),(d=this._dynamicVAO).bind(),i=0;i<3;++i)if(0!==this._dynamicCounts[i])for(f.uniforms.model=r.model,f.uniforms.clipBounds=r.clipBounds,f.uniforms.permutation=O[i],n.lineWidth(this.dynamicWidth[i]*this.pixelRatio),f.uniforms.contourColor=this.dynamicColor[i],f.uniforms.contourTint=this.dynamicTint[i],f.uniforms.height=this.dynamicLevel[i],d.draw(n.LINES,this._dynamicCounts[i],this._dynamicOffsets[i]),a=0;a<3;++a)this.contourProject[a][i]&&(f.uniforms.model=c.projections[a],f.uniforms.clipBounds=c.clipBounds[a],d.draw(n.LINES,this._dynamicCounts[i],this._dynamicOffsets[i]));d.unbind()}}e.draw=function(e){return r.call(this,e,!1)},e.drawTransparent=function(e){return r.call(this,e,!0)};var d={model:k,view:k,projection:k,inverseModel:k,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function ye(e,t){return Array.isArray(e)?[t(e[0]),t(e[1]),t(e[2])]:[t(e),t(e),t(e)]}function s(e){return Array.isArray(e)?3===e.length?[e[0],e[1],e[2],1]:[e[0],e[1],e[2],e[3]]:[0,0,0,1]}function ge(e){if(Array.isArray(e)){if(Array.isArray(e))return[s(e[0]),s(e[1]),s(e[2])];e=s(e);return[e.slice(),e.slice(),e.slice()]}}e.drawPick=function(e){e=e||{};var t=this.gl;t.disable(t.CULL_FACE);var n=d;n.model=e.model||k,n.view=e.view||k,n.projection=e.projection||k,n.shape=this._field[2].shape,n.pickId=this.pickId/255,n.lowerBound=this.bounds[0],n.upperBound=this.bounds[1],n.objectOffset=this.objectOffset,n.permutation=L;for(var r=0;r<2;++r)for(var i=n.clipBounds[r],o=0;o<3;++o)i[o]=Math.min(Math.max(this.clipBounds[r][o],-1e8),1e8);var a=S(n,this);if(a.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=n,this._vao.bind(),this._vao.draw(t.TRIANGLES,this._vertexCount),r=0;r<3;++r)this.surfaceProject[r]&&(this._pickShader.uniforms.model=a.projections[r],this._pickShader.uniforms.clipBounds=a.clipBounds[r],this._vao.draw(t.TRIANGLES,this._vertexCount));this._vao.unbind()}if(a.showContour){var s=this._contourPickShader;s.bind(),s.uniforms=n;var l=this._contourVAO;for(l.bind(),o=0;o<3;++o)for(t.lineWidth(this.contourWidth[o]*this.pixelRatio),s.uniforms.permutation=O[o],r=0;r<this.contourLevels[o].length;++r)this._contourCounts[o][r]&&(s.uniforms.height=this.contourLevels[o][r],l.draw(t.LINES,this._contourCounts[o][r],this._contourOffsets[o][r]));for(r=0;r<3;++r)for(s.uniforms.model=a.projections[r],s.uniforms.clipBounds=a.clipBounds[r],o=0;o<3;++o)if(this.contourProject[r][o]){s.uniforms.permutation=O[o],t.lineWidth(this.contourWidth[o]*this.pixelRatio);for(var u=0;u<this.contourLevels[o].length;++u)this._contourCounts[o][u]&&(s.uniforms.height=this.contourLevels[o][u],l.draw(t.LINES,this._contourCounts[o][u],this._contourOffsets[o][u]))}l.unbind()}},e.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=this._field[2].shape,n=this._pickResult,r=t[0]*(e.value[0]+(e.value[2]>>4)/16)/255,i=Math.floor(r),o=r-i,e=t[1]*(e.value[1]+(15&e.value[2])/16)/255,a=Math.floor(e),s=e-a;i+=1,a+=1;for(var l=n.position,u=l[0]=l[1]=l[2]=0;u<2;++u)for(var c=u?o:1-o,f=0;f<2;++f)for(var d=i+u,h=a+f,p=c*(f?s:1-s),y=0;y<3;++y)l[y]+=this._field[y].get(d,h)*p;for(var g,v,m=this._pickResult.level,b=0;b<3;++b)m[b]=x.le(this.contourLevels[b],l[b]),m[b]<0?0<this.contourLevels[b].length&&(m[b]=0):m[b]<this.contourLevels[b].length-1&&(g=this.contourLevels[b][m[b]],v=this.contourLevels[b][m[b]+1],Math.abs(g-l[b])>Math.abs(v-l[b])&&(m[b]+=1));for(n.index[0]=o<.5?i:i+1,n.index[1]=s<.5?a:a+1,n.uv[0]=r/t[0],n.uv[1]=e/t[1],y=0;y<3;++y)n.dataCoordinate[y]=this._field[y].get(n.index[0],n.index[1]);return n},e.padField=function(e,t){var n=t.shape.slice(),r=e.shape.slice();o.assign(e.lo(1,1).hi(n[0],n[1]),t),o.assign(e.lo(1).hi(n[0],1),t.hi(n[0],1)),o.assign(e.lo(1,r[1]-1).hi(n[0],1),t.lo(0,n[1]-1).hi(n[0],1)),o.assign(e.lo(0,1).hi(1,n[1]),t.hi(1)),o.assign(e.lo(r[0]-1,1).hi(1,n[1]),t.lo(n[0]-1)),e.set(0,0,t.get(0,0)),e.set(0,r[1]-1,t.get(0,n[1]-1)),e.set(r[0]-1,0,t.get(n[0]-1,0)),e.set(r[0]-1,r[1]-1,t.get(n[0]-1,n[1]-1))},e.update=function(e){this.objectOffset=(e=e||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in e&&(this.contourWidth=ye(e.contourWidth,Number)),"showContour"in e&&(this.showContour=ye(e.showContour,Boolean)),"showSurface"in e&&(this.showSurface=!!e.showSurface),"contourTint"in e&&(this.contourTint=ye(e.contourTint,Boolean)),"contourColor"in e&&(this.contourColor=ge(e.contourColor)),"contourProject"in e&&(this.contourProject=ye(e.contourProject,function(e){return ye(e,Boolean)})),"surfaceProject"in e&&(this.surfaceProject=e.surfaceProject),"dynamicColor"in e&&(this.dynamicColor=ge(e.dynamicColor)),"dynamicTint"in e&&(this.dynamicTint=ye(e.dynamicTint,Number)),"dynamicWidth"in e&&(this.dynamicWidth=ye(e.dynamicWidth,Number)),"opacity"in e&&(this.opacity=e.opacity),"opacityscale"in e&&(this.opacityscale=e.opacityscale),"colorBounds"in e&&(this.colorBounds=e.colorBounds),"vertexColor"in e&&(this.vertexColor=e.vertexColor?1:0),"colormap"in e&&this._colorMap.setPixels(this.genColormap(e.colormap,this.opacityscale));var t=!1,n=(n=e.field||e.coords&&e.coords[2]||null)||(this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0));if("field"in e||"coords"in e){var r=(n.shape[0]+2)*(n.shape[1]+2);r>this._field[2].data.length&&(ce.freeFloat(this._field[2].data),this._field[2].data=ce.mallocFloat(ue.nextPow2(r))),this._field[2]=fe(this._field[2].data,[n.shape[0]+2,n.shape[1]+2]),this.padField(this._field[2],n),this.shape=n.shape.slice();for(var i=this.shape,o=0;o<2;++o)this._field[2].size>this._field[o].data.length&&(ce.freeFloat(this._field[o].data),this._field[o].data=ce.mallocFloat(this._field[2].size)),this._field[o]=fe(this._field[o].data,[i[0]+2,i[1]+2]);if(e.coords){var a=e.coords;if(!Array.isArray(a)||3!==a.length)throw new Error("gl-surface: invalid coordinates for x/y");for(o=0;o<2;++o){for(var s=a[o],l=0;l<2;++l)if(s.shape[l]!==i[l])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[o],s)}}else if(e.ticks){var u=e.ticks;if(!Array.isArray(u)||2!==u.length)throw new Error("gl-surface: invalid ticks");for(o=0;o<2;++o){var c=u[o];if((c=Array.isArray(c)||c.length?fe(c):c).shape[0]!==i[o])throw new Error("gl-surface: invalid tick length");var f=fe(c.data,i);f.stride[o]=c.stride[0],f.stride[1^o]=0,this.padField(this._field[o],f)}}else{for(o=0;o<2;++o){var d=[0,0];d[o]=1,this._field[o]=fe(this._field[o].data,[i[0]+2,i[1]+2],d,0)}this._field[0].set(0,0,0);for(var l=0;l<i[0];++l)this._field[0].set(l+1,0,l);for(this._field[0].set(i[0]+1,0,i[0]-1),this._field[1].set(0,0,0),l=0;l<i[1];++l)this._field[1].set(0,l+1,l);this._field[1].set(0,i[1]+1,i[1]-1)}for(var h=this._field,p=fe(ce.mallocFloat(3*h[2].size*2),[3,i[0]+2,i[1]+2,2]),o=0;o<3;++o)he(p.pick(o),h[o],"mirror");var y=fe(ce.mallocFloat(3*h[2].size),[i[0]+2,i[1]+2,3]);for(o=0;o<i[0]+2;++o)for(l=0;l<i[1]+2;++l){var g=p.get(0,o,l,0),v=p.get(0,o,l,1),m=p.get(1,o,l,0),b=p.get(1,o,l,1),x=p.get(2,o,l,0),_=p.get(2,o,l,1),w=m*_-b*x,M=x*v-_*g,j=g*b-v*m,m=(m=Math.sqrt(w*w+M*M+j*j))<1e-8?(m=Math.max(Math.abs(w),Math.abs(M),Math.abs(j)))<1e-8?(M=w=0,j=1):1/m:1/Math.sqrt(m);y.set(o,l,0,w*m),y.set(o,l,1,M*m),y.set(o,l,2,j*m)}ce.free(p.data);var k=[1/0,1/0,1/0],O=[-1/0,-1/0,-1/0],A=1/0,T=-1/0,n=(i[0]-1)*(i[1]-1)*6,P=ce.mallocFloat(ue.nextPow2(10*n)),S=0,E=0;for(o=0;o<i[0]-1;++o)e:for(l=0;l<i[1]-1;++l){for(var C=0;C<2;++C)for(var L=0;L<2;++L)for(var R=0;R<3;++R){var I=this._field[R].get(1+o+C,1+l+L);if(isNaN(I)||!isFinite(I))continue e}for(R=0;R<6;++R){var z=o+pe[R][0],D=l+pe[R][1],N=this._field[0].get(z+1,D+1),F=this._field[1].get(z+1,D+1),I=this._field[2].get(z+1,D+1),w=y.get(z+1,D+1,0),M=y.get(z+1,D+1,1),j=y.get(z+1,D+1,2);e.intensity&&(B=e.intensity.get(z,D));var B=e.intensity?e.intensity.get(z,D):I+this.objectOffset[2];P[S++]=z,P[S++]=D,P[S++]=N,P[S++]=F,P[S++]=I,P[S++]=0,P[S++]=B,P[S++]=w,P[S++]=M,P[S++]=j,k[0]=Math.min(k[0],N+this.objectOffset[0]),k[1]=Math.min(k[1],F+this.objectOffset[1]),k[2]=Math.min(k[2],I+this.objectOffset[2]),A=Math.min(A,B),O[0]=Math.max(O[0],N+this.objectOffset[0]),O[1]=Math.max(O[1],F+this.objectOffset[1]),O[2]=Math.max(O[2],I+this.objectOffset[2]),T=Math.max(T,B),E+=1}}for(e.intensityBounds&&(A=+e.intensityBounds[0],T=+e.intensityBounds[1]),o=6;o<S;o+=10)P[o]=(P[o]-A)/(T-A);this._vertexCount=E,this._coordinateBuffer.update(P.subarray(0,S)),ce.freeFloat(P),ce.free(y.data),this.bounds=[k,O],this.intensity=e.intensity||this._field[2],this.intensityBounds[0]===A&&this.intensityBounds[1]===T||(t=!0),this.intensityBounds=[A,T]}if("levels"in e){var U=e.levels,U=Array.isArray(U[0])?U.slice():[[],[],U];for(o=0;o<3;++o)U[o]=U[o].slice(),U[o].sort(function(e,t){return e-t});for(o=0;o<3;++o)for(l=0;l<U[o].length;++l)U[o][l]-=this.objectOffset[o];e:for(o=0;o<3;++o){if(U[o].length!==this.contourLevels[o].length){t=!0;break}for(l=0;l<U[o].length;++l)if(U[o][l]!==this.contourLevels[o][l]){t=!0;break e}}this.contourLevels=U}if(t){for(var h=this._field,i=this.shape,q=[],H=0;H<3;++H){var V=this.contourLevels[H],G=[],W=[],Y=[0,0,0];for(o=0;o<V.length;++o){var X=de(this._field[H],V[o]);G.push(q.length/5|0);e:for(l=E=0;l<X.cells.length;++l)for(var Z=X.cells[l],R=0;R<2;++R){var $=X.positions[Z[R]],K=$[0],Q=0|Math.floor(K),J=K-Q,K=$[1],ee=0|Math.floor(K),te=K-ee,ne=!1;t:for(var re=0;re<3;++re)for(var ie=(H+re+1)%3,C=Y[re]=0;C<2;++C)for(var oe=C?J:1-J,z=0|Math.min(Math.max(Q+C,0),i[0]),L=0;L<2;++L){var ae=L?te:1-te,D=0|Math.min(Math.max(ee+L,0),i[1]);if(I=re<2?this._field[ie].get(z,D):(this.intensity.get(z,D)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(I)||isNaN(I)){ne=!0;break t}Y[re]+=oe*ae*I}if(ne){if(0<R){for(var se=0;se<5;++se)q.pop();--E}continue e}q.push(Y[0],Y[1],$[0],$[1],Y[2]),E+=1}W.push(E)}this._contourOffsets[H]=G,this._contourCounts[H]=W}var le=ce.mallocFloat(q.length);for(o=0;o<q.length;++o)le[o]=q[o];this._contourBuffer.update(le),ce.freeFloat(le)}},e.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var e=0;e<3;++e)ce.freeFloat(this._field[e].data)},e.highlight=function(e){var t,n;if(!e)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(t=0;t<3;++t)this.enableHighlight[t]?this.highlightLevel[t]=e.level[t]:this.highlightLevel[t]=-1;for(n=this.snapToData?e.dataCoordinate:e.position,t=0;t<3;++t)n[t]-=this.objectOffset[t];if(this.enableDynamic[0]&&n[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&n[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&n[2]!==this.dynamicLevel[2]){for(var r=0,i=this.shape,o=ce.mallocFloat(12*i[0]*i[1]),a=0;a<3;++a)if(this.enableDynamic[a]){this.dynamicLevel[a]=n[a];var s=this._field[a],l=this._field[(a+1)%3],u=this._field[(a+2)%3],s=de(s,n[a]),c=s.cells,f=s.positions;for(this._dynamicOffsets[a]=r,t=0;t<c.length;++t)for(var d=c[t],h=0;h<2;++h){var p=f[d[h]],y=+p[0],g=0|y,v=0|Math.min(1+g,i[0]),m=y-g,b=1-m,x=+p[1],_=0|x,w=0|Math.min(1+_,i[1]),y=x-_,p=1-y,x=b*p,b=b*y,p=m*p,m=m*y,y=x*l.get(g,_)+b*l.get(g,w)+p*l.get(v,_)+m*l.get(v,w),w=x*u.get(g,_)+b*u.get(g,w)+p*u.get(v,_)+m*u.get(v,w);if(isNaN(y)||isNaN(w)){h&&--r;break}o[2*r+0]=y,o[2*r+1]=w,r+=1}this._dynamicCounts[a]=r-this._dynamicOffsets[a]}else this.dynamicLevel[a]=NaN,this._dynamicCounts[a]=0;this._dynamicBuffer.update(o.subarray(0,2*r)),ce.freeFloat(o)}}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(e,t,n){"use strict";var h=e("ndarray"),p=e("ndarray-ops"),y=e("typedarray-pool");t.exports=function(e){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");r||function(e){r=[e.LINEAR,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_NEAREST],i=[e.NEAREST,e.LINEAR,e.NEAREST_MIPMAP_NEAREST,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_LINEAR],o=[e.REPEAT,e.CLAMP_TO_EDGE,e.MIRRORED_REPEAT]}(e);if("number"==typeof arguments[1])return l(e,arguments[1],arguments[2],arguments[3]||e.RGBA,arguments[4]||e.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return l(e,0|arguments[1][0],0|arguments[1][1],arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var t=arguments[1],n=a(t)?t:t.raw;if(n)return function(e,t,n,r,i,o){var a=f(e);return e.texImage2D(e.TEXTURE_2D,0,i,i,o,t),new c(e,a,n,r,i,o)}(e,n,0|t.width,0|t.height,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if(t.shape&&t.data&&t.stride)return function(e,t){var n=t.dtype,r=t.shape.slice(),i=e.getParameter(e.MAX_TEXTURE_SIZE);if(r[0]<0||r[0]>i||r[1]<0||r[1]>i)throw new Error("gl-texture2d: Invalid texture size");var o=v(r,t.stride.slice()),a=0;"float32"===n?a=e.FLOAT:"float64"===n?(a=e.FLOAT,o=!1,n="float32"):"uint8"===n?a=e.UNSIGNED_BYTE:(a=e.UNSIGNED_BYTE,o=!1,n="uint8");var s,l=0;if(2===r.length)l=e.LUMINANCE,r=[r[0],r[1],1],t=h(t.data,r,[t.stride[0],t.stride[1],1],t.offset);else{if(3!==r.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===r[2])l=e.ALPHA;else if(2===r[2])l=e.LUMINANCE_ALPHA;else if(3===r[2])l=e.RGB;else{if(4!==r[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");l=e.RGBA}}a!==e.FLOAT||e.getExtension("OES_texture_float")||(a=e.UNSIGNED_BYTE,o=!1);var u=t.size;t=o?0===t.offset&&t.data.length===u?t.data:t.data.subarray(t.offset,t.offset+u):(i=[r[2],r[2]*r[0],1],s=y.malloc(u,n),i=h(s,r,i,0),"float32"!==n&&"float64"!==n||a!==e.UNSIGNED_BYTE?p.assign(i,t):g(i,t),s.subarray(0,u));u=f(e);e.texImage2D(e.TEXTURE_2D,0,l,r[0],r[1],0,l,a,t),o||y.free(s);return new c(e,u,r[0],r[1],l,a)}(e,t)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var r=null,i=null,o=null;function a(e){return"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&e instanceof ImageData}var g=function(e,t){p.muls(e,t,255)};function s(e,t,n){var r=e.gl,i=r.getParameter(r.MAX_TEXTURE_SIZE);if(t<0||i<t||n<0||i<n)throw new Error("gl-texture2d: Invalid texture size");return e._shape=[t,n],e.bind(),r.texImage2D(r.TEXTURE_2D,0,e.format,t,n,0,e.format,e.type,null),e._mipLevels=[0],e}function c(e,t,n,r,i,o){this.gl=e,this.handle=t,this.format=i,this.type=o,this._shape=[n,r],this._mipLevels=[0],this._magFilter=e.NEAREST,this._minFilter=e.NEAREST,this._wrapS=e.CLAMP_TO_EDGE,this._wrapT=e.CLAMP_TO_EDGE,this._anisoSamples=1;var a=this,e=[this._wrapS,this._wrapT];Object.defineProperties(e,[{get:function(){return a._wrapS},set:function(e){return a.wrapS=e}},{get:function(){return a._wrapT},set:function(e){return a.wrapT=e}}]),this._wrapVector=e;e=[this._shape[0],this._shape[1]];Object.defineProperties(e,[{get:function(){return a._shape[0]},set:function(e){return a.width=e}},{get:function(){return a._shape[1]},set:function(e){return a.height=e}}]),this._shapeVector=e}t=c.prototype;function v(e,t){return 3===e.length?1===t[2]&&t[1]===e[0]*e[2]&&t[0]===e[2]:1===t[0]&&t[1]===e[0]}function f(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t}function l(e,t,n,r,i){var o=e.getParameter(e.MAX_TEXTURE_SIZE);if(t<0||o<t||n<0||o<n)throw new Error("gl-texture2d: Invalid texture shape");if(i===e.FLOAT&&!e.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");o=f(e);return e.texImage2D(e.TEXTURE_2D,0,r,t,n,0,r,i,null),new c(e,o,t,n,r,i)}Object.defineProperties(t,{minFilter:{get:function(){return this._minFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&0<=r.indexOf(e)&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),i.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e),this._minFilter=e}},magFilter:{get:function(){return this._magFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&0<=r.indexOf(e)&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),i.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e),this._magFilter=e}},mipSamples:{get:function(){return this._anisoSamples},set:function(e){var t=this._anisoSamples;return this._anisoSamples=0|Math.max(e,1),t===this._anisoSamples||(t=this.gl.getExtension("EXT_texture_filter_anisotropic"))&&this.gl.texParameterf(this.gl.TEXTURE_2D,t.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples),this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(e){if(this.bind(),o.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,e),this._wrapS=e}},wrapT:{get:function(){return this._wrapT},set:function(e){if(this.bind(),o.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,e),this._wrapT=e}},wrap:{get:function(){return this._wrapVector},set:function(e){if(2!==(e=!Array.isArray(e)?[e,e]:e).length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var t=0;t<2;++t)if(o.indexOf(e[t])<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);this._wrapS=e[0],this._wrapT=e[1];var n=this.gl;return this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,this._wrapS),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,this._wrapT),e}},shape:{get:function(){return this._shapeVector},set:function(e){if(Array.isArray(e)){if(2!==e.length)throw new Error("gl-texture2d: Invalid texture shape")}else e=[0|e,0|e];return s(this,0|e[0],0|e[1]),[0|e[0],0|e[1]]}},width:{get:function(){return this._shape[0]},set:function(e){return s(this,e|=0,this._shape[1]),e}},height:{get:function(){return this._shape[1]},set:function(e){return s(this,this._shape[0],e|=0),e}}}),t.bind=function(e){var t=this.gl;return void 0!==e&&t.activeTexture(t.TEXTURE0+(0|e)),t.bindTexture(t.TEXTURE_2D,this.handle),void 0!==e?0|e:t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0},t.dispose=function(){this.gl.deleteTexture(this.handle)},t.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var e=Math.min(this._shape[0],this._shape[1]),t=0;0<e;++t,e>>>=1)this._mipLevels.indexOf(t)<0&&this._mipLevels.push(t)},t.setPixels=function(e,t,n,r){var i=this.gl;this.bind(),Array.isArray(t)?(r=n,n=0|t[1],t=0|t[0]):(t=t||0,n=n||0),r=r||0;var o=a(e)?e:e.raw;if(o)this._mipLevels.indexOf(r)<0?(i.texImage2D(i.TEXTURE_2D,0,this.format,this.format,this.type,o),this._mipLevels.push(r)):i.texSubImage2D(i.TEXTURE_2D,r,t,n,this.format,this.type,o);else{if(!(e.shape&&e.stride&&e.data))throw new Error("gl-texture2d: Unsupported data type");if(e.shape.length<2||t+e.shape[1]>this._shape[1]>>>r||n+e.shape[0]>this._shape[0]>>>r||t<0||n<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(e,t,n,r,i,o,a,s){var l=s.dtype,u=s.shape.slice();if(u.length<2||3<u.length)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var c=0,f=0,d=v(u,s.stride.slice());"float32"===l?c=e.FLOAT:"float64"===l?(c=e.FLOAT,d=!1,l="float32"):"uint8"===l?c=e.UNSIGNED_BYTE:(c=e.UNSIGNED_BYTE,d=!1,l="uint8");if(2===u.length)f=e.LUMINANCE,u=[u[0],u[1],1],s=h(s.data,u,[s.stride[0],s.stride[1],1],s.offset);else{if(3!==u.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===u[2])f=e.ALPHA;else if(2===u[2])f=e.LUMINANCE_ALPHA;else if(3===u[2])f=e.RGB;else{if(4!==u[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");f=e.RGBA}u[2]}f!==e.LUMINANCE&&f!==e.ALPHA||i!==e.LUMINANCE&&i!==e.ALPHA||(f=i);if(f!==i)throw new Error("gl-texture2d: Incompatible texture format for setPixels");l=s.size,f=a.indexOf(r)<0;f&&a.push(r);c===o&&d?0===s.offset&&s.data.length===l?f?e.texImage2D(e.TEXTURE_2D,r,i,u[0],u[1],0,i,o,s.data):e.texSubImage2D(e.TEXTURE_2D,r,t,n,u[0],u[1],i,o,s.data):f?e.texImage2D(e.TEXTURE_2D,r,i,u[0],u[1],0,i,o,s.data.subarray(s.offset,s.offset+l)):e.texSubImage2D(e.TEXTURE_2D,r,t,n,u[0],u[1],i,o,s.data.subarray(s.offset,s.offset+l)):(a=o===e.FLOAT?y.mallocFloat32(l):y.mallocUint8(l),d=h(a,u,[u[2],u[2]*u[0],1]),c===e.FLOAT&&o===e.UNSIGNED_BYTE?g(d,s):p.assign(d,s),f?e.texImage2D(e.TEXTURE_2D,r,i,u[0],u[1],0,i,o,a.subarray(0,l)):e.texSubImage2D(e.TEXTURE_2D,r,t,n,u[0],u[1],i,o,a.subarray(0,l)),o===e.FLOAT?y.freeFloat32(a):y.freeUint8(a))}(i,t,n,r,this.format,this.type,this._mipLevels,e)}}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(e,t,n){"use strict";t.exports=function(e,t,n){t?t.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var r=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(n){if(n.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var i=0;i<n.length;++i){var o=n[i];if(o.buffer){var a=o.buffer,s=o.size||4,l=o.type||e.FLOAT,u=!!o.normalized,c=o.stride||0,f=o.offset||0;a.bind(),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,s,l,u,c,f)}else{if("number"==typeof o)e.vertexAttrib1f(i,o);else if(1===o.length)e.vertexAttrib1f(i,o[0]);else if(2===o.length)e.vertexAttrib2f(i,o[0],o[1]);else if(3===o.length)e.vertexAttrib3f(i,o[0],o[1],o[2]);else{if(4!==o.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(i,o[0],o[1],o[2],o[3])}e.disableVertexAttribArray(i)}}for(;i<r;++i)e.disableVertexAttribArray(i)}else{e.bindBuffer(e.ARRAY_BUFFER,null);for(i=0;i<r;++i)e.disableVertexAttribArray(i)}}},{}],148:[function(e,t,n){"use strict";var r=e("./do-bind.js");function i(e){this.gl=e,this._elements=null,this._attributes=null,this._elementsType=e.UNSIGNED_SHORT}i.prototype.bind=function(){r(this.gl,this._elements,this._attributes)},i.prototype.update=function(e,t,n){this._elements=t,this._attributes=e,this._elementsType=n||this.gl.UNSIGNED_SHORT},i.prototype.dispose=function(){},i.prototype.unbind=function(){},i.prototype.draw=function(e,t,n){n=n||0;var r=this.gl;this._elements?r.drawElements(e,t,this._elementsType,n):r.drawArrays(e,n,t)},t.exports=function(e){return new i(e)}},{"./do-bind.js":147}],149:[function(e,t,n){"use strict";var o=e("./do-bind.js");function a(e,t,n,r,i,o){this.location=e,this.dimension=t,this.a=n,this.b=r,this.c=i,this.d=o}function r(e,t,n){this.gl=e,this._ext=t,this.handle=n,this._attribs=[],this._useElements=!1,this._elementsType=e.UNSIGNED_SHORT}a.prototype.bind=function(e){switch(this.dimension){case 1:e.vertexAttrib1f(this.location,this.a);break;case 2:e.vertexAttrib2f(this.location,this.a,this.b);break;case 3:e.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:e.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},r.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var e=0;e<this._attribs.length;++e)this._attribs[e].bind(this.gl)},r.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},r.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},r.prototype.update=function(e,t,n){if(this.bind(),o(this.gl,t,e),this.unbind(),this._attribs.length=0,e)for(var r=0;r<e.length;++r){var i=e[r];"number"==typeof i?this._attribs.push(new a(r,1,i)):Array.isArray(i)&&this._attribs.push(new a(r,i.length,i[0],i[1],i[2],i[3]))}this._useElements=!!t,this._elementsType=n||this.gl.UNSIGNED_SHORT},r.prototype.draw=function(e,t,n){n=n||0;var r=this.gl;this._useElements?r.drawElements(e,t,this._elementsType,n):r.drawArrays(e,n,t)},t.exports=function(e,t){return new r(e,t,t.createVertexArrayOES())}},{"./do-bind.js":147}],150:[function(e,t,n){"use strict";var o=e("./lib/vao-native.js"),a=e("./lib/vao-emulated.js");function s(e){this.bindVertexArrayOES=e.bindVertexArray.bind(e),this.createVertexArrayOES=e.createVertexArray.bind(e),this.deleteVertexArrayOES=e.deleteVertexArray.bind(e)}t.exports=function(e,t,n,r){var i=e.createVertexArray?new s(e):e.getExtension("OES_vertex_array_object");return(e=i?o(e,i):a(e)).update(t,n,r),e}},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}},{}],152:[function(e,t,n){t.exports=function(e,t){e=r(e[0],e[1],e[2]),t=r(t[0],t[1],t[2]);i(e,e),i(t,t);t=o(e,t);return 1<t?0:Math.acos(t)};var r=e("./fromValues"),i=e("./normalize"),o=e("./dot")},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(e,t,n){t.exports=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}},{}],154:[function(e,t,n){t.exports=function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},{}],155:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},{}],156:[function(e,t,n){t.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},{}],157:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],t=n[1],n=n[2];return e[0]=i*n-o*t,e[1]=o*a-r*n,e[2]=r*t-i*a,e}},{}],158:[function(e,t,n){t.exports=e("./distance")},{"./distance":159}],159:[function(e,t,n){t.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],e=t[2]-e[2];return Math.sqrt(n*n+r*r+e*e)}},{}],160:[function(e,t,n){t.exports=e("./divide")},{"./divide":161}],161:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}},{}],162:[function(e,t,n){t.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},{}],163:[function(e,t,n){t.exports=1e-6},{}],164:[function(e,t,n){t.exports=function(e,t){var n=e[0],r=e[1],i=e[2],o=t[0],e=t[1],t=t[2];return Math.abs(n-o)<=a*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-e)<=a*Math.max(1,Math.abs(r),Math.abs(e))&&Math.abs(i-t)<=a*Math.max(1,Math.abs(i),Math.abs(t))};var a=e("./epsilon")},{"./epsilon":163}],165:[function(e,t,n){t.exports=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}},{}],166:[function(e,t,n){t.exports=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}},{}],167:[function(e,t,n){t.exports=function(e,t,n,r,i,o){var a,s;t=t||3;n=n||0;s=r?Math.min(r*t+n,e.length):e.length;for(a=n;a<s;a+=t)l[0]=e[a],l[1]=e[a+1],l[2]=e[a+2],i(l,l,o),e[a]=l[0],e[a+1]=l[1],e[a+2]=l[2];return e};var l=e("./create")()},{"./create":156}],168:[function(e,t,n){t.exports=function(e,t,n){var r=new Float32Array(3);return r[0]=e,r[1]=t,r[2]=n,r}},{}],169:[function(e,t,n){t.exports={EPSILON:e("./epsilon"),create:e("./create"),clone:e("./clone"),angle:e("./angle"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),equals:e("./equals"),exactEquals:e("./exactEquals"),add:e("./add"),subtract:e("./subtract"),sub:e("./sub"),multiply:e("./multiply"),mul:e("./mul"),divide:e("./divide"),div:e("./div"),min:e("./min"),max:e("./max"),floor:e("./floor"),ceil:e("./ceil"),round:e("./round"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),dist:e("./dist"),squaredDistance:e("./squaredDistance"),sqrDist:e("./sqrDist"),length:e("./length"),len:e("./len"),squaredLength:e("./squaredLength"),sqrLen:e("./sqrLen"),negate:e("./negate"),inverse:e("./inverse"),normalize:e("./normalize"),dot:e("./dot"),cross:e("./cross"),lerp:e("./lerp"),random:e("./random"),transformMat4:e("./transformMat4"),transformMat3:e("./transformMat3"),transformQuat:e("./transformQuat"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),forEach:e("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(e,t,n){t.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}},{}],171:[function(e,t,n){t.exports=e("./length")},{"./length":172}],172:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1],e=e[2];return Math.sqrt(t*t+n*n+e*e)}},{}],173:[function(e,t,n){t.exports=function(e,t,n,r){var i=t[0],o=t[1],t=t[2];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=t+r*(n[2]-t),e}},{}],174:[function(e,t,n){t.exports=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}},{}],175:[function(e,t,n){t.exports=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}},{}],176:[function(e,t,n){t.exports=e("./multiply")},{"./multiply":177}],177:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}},{}],178:[function(e,t,n){t.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}},{}],179:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],i=n*n+r*r+i*i;0<i&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i);return e}},{}],180:[function(e,t,n){t.exports=function(e,t){t=t||1;var n=2*Math.random()*Math.PI,r=2*Math.random()-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e}},{}],181:[function(e,t,n){t.exports=function(e,t,n,r){var i=n[1],o=n[2],a=t[1]-i,s=t[2]-o,n=Math.sin(r),r=Math.cos(r);return e[0]=t[0],e[1]=i+a*r-s*n,e[2]=o+a*n+s*r,e}},{}],182:[function(e,t,n){t.exports=function(e,t,n,r){var i=n[0],o=n[2],a=t[0]-i,s=t[2]-o,n=Math.sin(r),r=Math.cos(r);return e[0]=i+s*n+a*r,e[1]=t[1],e[2]=o+s*r-a*n,e}},{}],183:[function(e,t,n){t.exports=function(e,t,n,r){var i=n[0],o=n[1],a=t[0]-i,s=t[1]-o,n=Math.sin(r),r=Math.cos(r);return e[0]=i+a*r-s*n,e[1]=o+a*n+s*r,e[2]=t[2],e}},{}],184:[function(e,t,n){t.exports=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}},{}],185:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}},{}],186:[function(e,t,n){t.exports=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}},{}],187:[function(e,t,n){t.exports=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}},{}],188:[function(e,t,n){t.exports=e("./squaredDistance")},{"./squaredDistance":190}],189:[function(e,t,n){t.exports=e("./squaredLength")},{"./squaredLength":191}],190:[function(e,t,n){t.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],e=t[2]-e[2];return n*n+r*r+e*e}},{}],191:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1],e=e[2];return t*t+n*n+e*e}},{}],192:[function(e,t,n){t.exports=e("./subtract")},{"./subtract":193}],193:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}},{}],194:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],t=t[2];return e[0]=r*n[0]+i*n[3]+t*n[6],e[1]=r*n[1]+i*n[4]+t*n[7],e[2]=r*n[2]+i*n[5]+t*n[8],e}},{}],195:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2];return t=n[3]*r+n[7]*i+n[11]*o+n[15]||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/t,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/t,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/t,e}},{}],196:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*o-l*i,t=u*i+l*r-a*o,n=u*o+a*i-s*r,o=-a*r-s*i-l*o;return e[0]=c*u+o*-a+t*-l-n*-s,e[1]=t*u+o*-s+n*-a-c*-l,e[2]=n*u+o*-l+c*-s-t*-a,e}},{}],197:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}},{}],198:[function(e,t,n){t.exports=function(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}},{}],199:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},{}],200:[function(e,t,n){t.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},{}],201:[function(e,t,n){t.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],e=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+e*e)}},{}],202:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}},{}],203:[function(e,t,n){t.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}},{}],204:[function(e,t,n){t.exports=function(e,t,n,r){var i=new Float32Array(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}},{}],205:[function(e,t,n){t.exports={create:e("./create"),clone:e("./clone"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),add:e("./add"),subtract:e("./subtract"),multiply:e("./multiply"),divide:e("./divide"),min:e("./min"),max:e("./max"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),squaredDistance:e("./squaredDistance"),length:e("./length"),squaredLength:e("./squaredLength"),negate:e("./negate"),inverse:e("./inverse"),normalize:e("./normalize"),dot:e("./dot"),lerp:e("./lerp"),random:e("./random"),transformMat4:e("./transformMat4"),transformQuat:e("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(e,t,n){t.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}},{}],207:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1],r=e[2],e=e[3];return Math.sqrt(t*t+n*n+r*r+e*e)}},{}],208:[function(e,t,n){t.exports=function(e,t,n,r){var i=t[0],o=t[1],a=t[2],t=t[3];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e[3]=t+r*(n[3]-t),e}},{}],209:[function(e,t,n){t.exports=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}},{}],210:[function(e,t,n){t.exports=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}},{}],211:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}},{}],212:[function(e,t,n){t.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}},{}],213:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],t=n*n+r*r+i*i+o*o;0<t&&(t=1/Math.sqrt(t),e[0]=n*t,e[1]=r*t,e[2]=i*t,e[3]=o*t);return e}},{}],214:[function(e,t,n){var r=e("./normalize"),i=e("./scale");t.exports=function(e,t){return t=t||1,e[0]=Math.random(),e[1]=Math.random(),e[2]=Math.random(),e[3]=Math.random(),r(e,e),i(e,e,t),e}},{"./normalize":213,"./scale":215}],215:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}},{}],216:[function(e,t,n){t.exports=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}},{}],217:[function(e,t,n){t.exports=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}},{}],218:[function(e,t,n){t.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],e=t[3]-e[3];return n*n+r*r+i*i+e*e}},{}],219:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1],r=e[2],e=e[3];return t*t+n*n+r*r+e*e}},{}],220:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}},{}],221:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],t=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*t,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*t,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*t,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*t,e}},{}],222:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*o-l*i,f=u*i+l*r-a*o,n=u*o+a*i-s*r,o=-a*r-s*i-l*o;return e[0]=c*u+o*-a+f*-l-n*-s,e[1]=f*u+o*-s+n*-a-c*-l,e[2]=n*u+o*-l+c*-s-f*-a,e[3]=t[3],e}},{}],223:[function(e,t,n){var o=e("glsl-tokenizer"),a=e("atob-lite");t.exports=function(e){for(var t=Array.isArray(e)?e:o(e),n=0;n<t.length;n++){var r=t[n];if("preprocessor"===r.type){var i=r.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(i&&i[2]){r=i[1],i=i[2];return(r?a(i):i).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(e,t,n){t.exports=function(e){var n,r,i,o=0,a=0,s=A,l=[],u=[],c=1,f=0,d=0,h=!1,p=!1,y="",t=j,g=w;"300 es"===(e=e||{}).version&&(t=O,g=k);for(var v={},m={},o=0;o<t.length;o++)v[t[o]]=!0;for(o=0;o<g.length;o++)m[g[o]]=!0;return function(e){return u=[],null!==e?function(e){o=0,e.toString&&(e=e.toString());var t;y+=e.replace(/\r\n/g,"\n"),i=y.length;for(;n=y[o],o<i;){switch(t=o,s){case P:"/"!==n||"*"!==r?(l.push(n),r=n):(l.push(n),b(l.join("")),s=A),o+=1;break;case S:case E:o=x();break;case C:o=function(){if("."===r&&/\d/.test(n))return s=R,o;if("/"===r&&"*"===n)return s=P,o;if("/"===r&&"/"===n)return s=S,o;if("."===n&&l.length){for(;_(l););return s=R,o}if(";"===n||")"===n||"("===n){if(l.length)for(;_(l););return b(n),s=A,o+1}var e=2===l.length&&"="!==n;if(/[\w_\d\s]/.test(n)||e){for(;_(l););return s=A,o}return l.push(n),r=n,o+1}();break;case L:o=function(){if("."===n)return l.push(n),s=R,r=n,o+1;if(/[eE]/.test(n))return l.push(n),s=R,r=n,o+1;if("x"===n&&1===l.length&&"0"===l[0])return s=B,l.push(n),r=n,o+1;if(/[^\d]/.test(n))return b(l.join("")),s=A,o;return l.push(n),r=n,o+1}();break;case B:o=function(){if(/[^a-fA-F0-9]/.test(n))return b(l.join("")),s=A,o;return l.push(n),r=n,o+1}();break;case R:o=function(){"f"===n&&(l.push(n),r=n,o+=1);if(/[eE]/.test(n))return l.push(n),r=n,o+1;if(("-"===n||"+"===n)&&/[eE]/.test(r))return l.push(n),r=n,o+1;if(/[^\d]/.test(n))return b(l.join("")),s=A,o;return l.push(n),r=n,o+1}();break;case T:o=function(){if(/[^\d\w_]/.test(n)){var e=l.join("");return s=m[e]?D:v[e]?z:I,b(l.join("")),s=A,o}return l.push(n),r=n,o+1}();break;case N:o=function(){if(/[^\s]/g.test(n))return b(l.join("")),s=A,o;return l.push(n),r=n,o+1}();break;case A:o=function(){if(l=l.length?[]:l,"/"===r&&"*"===n)return d=a+o-1,s=P,r=n,o+1;if("/"===r&&"/"===n)return d=a+o-1,s=S,r=n,o+1;if("#"===n)return s=E,d=a+o,o;if(/\s/.test(n))return s=N,d=a+o,o;return h=/\d/.test(n),p=/[^\w_]/.test(n),d=a+o,s=h?L:p?C:T,o}()}t!==o&&("\n"===y[t]?(f=0,++c):++f)}return a+=o,y=y.slice(o),u}(e):function(){l.length&&b(l.join(""));return s=F,b("(eof)"),u}()};function b(e){e.length&&u.push({type:U[s],data:e,position:d,line:c,column:f})}function x(){return"\r"!==n&&"\n"!==n||"\\"===r?(l.push(n),r=n,o+1):(b(l.join("")),s=A,o)}function _(e){var t,n,r=0;do{if(t=M.indexOf(e.slice(0,e.length+r).join("")),n=M[t],-1===t){if(0<r--+e.length)continue;n=e.slice(0,1).join("")}return b(n),d+=n.length,(l=l.slice(n.length)).length}while(1)}};var w=e("./lib/literals"),M=e("./lib/operators"),j=e("./lib/builtins"),k=e("./lib/literals-300es"),O=e("./lib/builtins-300es"),A=999,T=9999,P=0,S=1,E=2,C=3,L=4,R=5,I=6,z=7,D=8,N=9,F=10,B=11,U=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(e,t,n){e=(e=e("./builtins")).slice().filter(function(e){return!/^(gl\_|texture)/.test(e)});t.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(e,t,n){t.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(e,t,n){e=e("./literals");t.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(e,t,n){t.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(e,t,n){t.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(e,t,n){var r=e("./index");t.exports=function(e,t){var n=r(t),t=[];return t=(t=t.concat(n(e))).concat(n(null))}},{"./index":224}],231:[function(e,t,n){t.exports=function(e){"string"==typeof e&&(e=[e]);for(var t=[].slice.call(arguments,1),n=[],r=0;r<e.length-1;r++)n.push(e[r],t[r]||"");return n.push(e[r]),n.join("")}},{}],232:[function(e,t,n){"use strict";e=e("is-browser");t.exports=e&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}()},{"is-browser":236}],233:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.length;if(0===n)throw new Error("Must have at least d+1 points");var r=e[0].length;if(n<=r)throw new Error("Must input at least d+1 points");var i=e.slice(0,r+1),o=b.apply(void 0,i);if(0===o)throw new Error("Input not in general position");for(var a=new Array(r+1),s=0;s<=r;++s)a[s]=s;o<0&&(a[0]=1,a[1]=0);for(var l=new C(a,new Array(r+1),!1),u=l.adjacent,c=new Array(r+2),s=0;s<=r;++s){for(var f=a.slice(),d=0;d<=r;++d)d===s&&(f[d]=-1);var h=f[0];f[0]=f[1],f[1]=h;h=new C(f,new Array(r+1),!0);u[s]=h,c[s]=h}c[r+1]=l;for(s=0;s<=r;++s)for(var f=u[s].vertices,p=u[s].adjacent,d=0;d<=r;++d){var y=f[d];if(y<0)p[d]=l;else for(var g=0;g<=r;++g)u[g].vertices.indexOf(y)<0&&(p[d]=u[g])}for(var v=new x(r,i,c),m=!!t,s=r+1;s<n;++s)v.insert(e[s],m);return v.boundary()};var b=e("robust-orientation"),r=e("simplicial-complex").compareCells;function C(e,t,n){this.vertices=e,this.adjacent=t,this.boundary=n,this.lastVisited=-1}function L(e,t,n){this.vertices=e,this.cell=t,this.index=n}function R(e,t){return r(e.vertices,t.vertices)}C.prototype.flip=function(){var e=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=e;e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e};var o=[];function x(e,t,n){this.dimension=e,this.vertices=t,this.simplices=n,this.interior=n.filter(function(e){return!e.boundary}),this.tuple=new Array(e+1);for(var r=0;r<=e;++r)this.tuple[r]=this.vertices[r];var i,t=(t=o[e])||(o[e]=(n=b[(n=e)+1],i=n=n||b,function(){var e=this.tuple;return i.apply(this,e)}));this.orient=t}e=x.prototype;e.handleBoundaryDegeneracy=function(e,t){var n=this.dimension,r=this.vertices.length-1,i=this.tuple,o=this.vertices,a=[e];for(e.lastVisited=-r;0<a.length;)for(var s=(e=a.pop()).adjacent,l=0;l<=n;++l){var u=s[l];if(u.boundary&&!(u.lastVisited<=-r)){for(var c=u.vertices,f=0;f<=n;++f){var d=c[f];i[f]=d<0?t:o[d]}var h=this.orient();if(0<h)return u;u.lastVisited=-r,0===h&&a.push(u)}}return null},e.walk=function(e,t){var n=this.vertices.length-1,r=this.dimension,i=this.vertices,o=this.tuple,t=t?this.interior.length*Math.random()|0:this.interior.length-1,a=this.interior[t];e:for(;!a.boundary;){for(var s=a.vertices,l=a.adjacent,u=0;u<=r;++u)o[u]=i[s[u]];a.lastVisited=n;for(u=0;u<=r;++u){var c=l[u];if(!(c.lastVisited>=n)){var f=o[u];o[u]=e;var d=this.orient();if(o[u]=f,d<0){a=c;continue e}c.boundary?c.lastVisited=-n:c.lastVisited=n}}return}return a},e.addPeaks=function(e,t){var n=this.vertices.length-1,r=this.dimension,i=this.vertices,o=this.tuple,a=this.interior,s=this.simplices,l=[t];t.lastVisited=n,t.vertices[t.vertices.indexOf(-1)]=n,t.boundary=!1,a.push(t);for(var u=[];0<l.length;){var c=(t=l.pop()).vertices,f=t.adjacent,d=c.indexOf(n);if(!(d<0))for(var h=0;h<=r;++h)if(h!==d){var p=f[h];if(p.boundary&&!(p.lastVisited>=n)){var y=p.vertices;if(p.lastVisited!==-n){for(var g=0,v=0;v<=r;++v)y[v]<0?o[g=v]=e:o[v]=i[y[v]];if(0<this.orient()){y[g]=n,p.boundary=!1,a.push(p),l.push(p),p.lastVisited=n;continue}p.lastVisited=-n}var m=p.adjacent,b=c.slice(),x=f.slice(),_=new C(b,x,!0);s.push(_);var w=m.indexOf(t);if(!(w<0)){m[w]=_,x[d]=p,b[h]=-1,x[h]=t,(f[h]=_).flip();for(v=0;v<=r;++v){var M=b[v];if(!(M<0||M===n)){for(var j=new Array(r-1),k=0,O=0;O<=r;++O){var A=b[O];A<0||O===v||(j[k++]=A)}u.push(new L(j,_,v))}}}}}}u.sort(R);for(h=0;h+1<u.length;h+=2){var T=u[h],P=u[h+1],S=T.index,E=P.index;S<0||E<0||(T.cell.adjacent[T.index]=P.cell,P.cell.adjacent[P.index]=T.cell)}},e.insert=function(e,t){var n=this.vertices;n.push(e);var r=this.walk(e,t);if(r){for(var i=this.dimension,o=this.tuple,a=0;a<=i;++a){var s=r.vertices[a];o[a]=s<0?e:n[s]}t=this.orient(o);t<0||0===t&&!(r=this.handleBoundaryDegeneracy(r,e))||this.addPeaks(e,r)}},e.boundary=function(){for(var e=this.dimension,t=[],n=this.simplices,r=n.length,i=0;i<r;++i){var o=n[i];if(o.boundary){for(var a=new Array(e),s=o.vertices,l=0,u=0,c=0;c<=e;++c)0<=s[c]?a[l++]=s[c]:u=1&c;u===(1&e)&&(o=a[0],a[0]=a[1],a[1]=o),t.push(a)}}return t}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(e,t,n){"use strict";var a=e("binary-search-bounds");function c(e,t,n,r,i){this.mid=e,this.left=t,this.right=n,this.leftPoints=r,this.rightPoints=i,this.count=(t?t.count:0)+(n?n.count:0)+r.length}t.exports=function(e){return e&&0!==e.length?new g(y(e)):new g(null)};t=c.prototype;function s(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function r(e,t){t=y(t);e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function i(e,t){var n=e.intervals([]);n.push(t),r(e,n)}function l(e,t){var n=e.intervals([]),t=n.indexOf(t);return t<0?0:(n.splice(t,1),r(e,n),1)}function o(e,t,n){for(var r=0;r<e.length&&e[r][0]<=t;++r){var i=n(e[r]);if(i)return i}}function u(e,t,n){for(var r=e.length-1;0<=r&&e[r][1]>=t;--r){var i=n(e[r]);if(i)return i}}function f(e,t){for(var n=0;n<e.length;++n){var r=t(e[n]);if(r)return r}}function d(e,t){return e-t}function h(e,t){var n=e[0]-t[0];return n||e[1]-t[1]}function p(e,t){var n=e[1]-t[1];return n||e[0]-t[0]}function y(e){if(0===e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(d);for(var r=t[t.length>>1],i=[],o=[],a=[],n=0;n<e.length;++n){var s=e[n];(s[1]<r?i:r<s[0]?o:a).push(s)}var l=a,u=a.slice();return l.sort(h),u.sort(p),new c(r,y(i),y(o),l,u)}function g(e){this.root=e}t.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e},t.insert=function(e){var t,n=this.count-this.leftPoints.length;this.count+=1,e[1]<this.mid?this.left?4*(this.left.count+1)>3*(1+n)?i(this,e):this.left.insert(e):this.left=y([e]):e[0]>this.mid?this.right?4*(this.right.count+1)>3*(1+n)?i(this,e):this.right.insert(e):this.right=y([e]):(t=a.ge(this.leftPoints,e,h),n=a.ge(this.rightPoints,e,p),this.leftPoints.splice(t,0,e),this.rightPoints.splice(n,0,e))},t.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid)return this.left?3*(t-1)<4*(this.right?this.right.count:0)?l(this,e):2===(o=this.left.remove(e))?(this.left=null,--this.count,1):(1===o&&--this.count,o):0;if(e[0]>this.mid)return this.right?3*(t-1)<4*(this.left?this.left.count:0)?l(this,e):2===(o=this.right.remove(e))?(this.right=null,--this.count,1):(1===o&&--this.count,o):0;if(1===this.count)return this.leftPoints[0]===e?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===e){if(this.left&&this.right){for(var n=this,r=this.left;r.right;)r=(n=r).right;n===this?r.right=this.right:(i=this.left,o=this.right,n.count-=r.count,n.right=r.left,r.left=i,r.right=o),s(this,r),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?s(this,this.left):s(this,this.right);return 1}for(var i=a.ge(this.leftPoints,e,h);i<this.leftPoints.length&&this.leftPoints[i][0]===e[0];++i)if(this.leftPoints[i]===e){--this.count,this.leftPoints.splice(i,1);for(var o=a.ge(this.rightPoints,e,p);o<this.rightPoints.length&&this.rightPoints[o][1]===e[1];++o)if(this.rightPoints[o]===e)return this.rightPoints.splice(o,1),1}return 0},t.queryPoint=function(e,t){if(e<this.mid){if(this.left)if(n=this.left.queryPoint(e,t))return n;return o(this.leftPoints,e,t)}if(e>this.mid){var n;if(this.right)if(n=this.right.queryPoint(e,t))return n;return u(this.rightPoints,e,t)}return f(this.leftPoints,t)},t.queryInterval=function(e,t,n){var r;if(e<this.mid&&this.left&&(r=this.left.queryInterval(e,t,n)))return r;if(t>this.mid&&this.right&&(r=this.right.queryInterval(e,t,n)))return r;return t<this.mid?o(this.leftPoints,t,n):e>this.mid?u(this.rightPoints,e,n):f(this.leftPoints,n)};t=g.prototype;t.insert=function(e){this.root?this.root.insert(e):this.root=new c(e[0],null,null,[e],[e])},t.remove=function(e){if(this.root){e=this.root.remove(e);return 2===e&&(this.root=null),0!==e}return!1},t.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)},t.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)},Object.defineProperty(t,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(t,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":31}],235:[function(e,t,n){"use strict";t.exports=function(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t}},{}],236:[function(e,t,n){t.exports=!0},{}],237:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(r(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))||!!e._isBuffer);var t}},{}],238:[function(e,t,n){"use strict";t.exports=o,t.exports.isMobile=o,t.exports.default=o;var r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function o(e){var t=(e=e||{}).ua;if("string"!=typeof(t=(t=!t&&"undefined"!=typeof navigator?navigator.userAgent:t)&&t.headers&&"string"==typeof t.headers["user-agent"]?t.headers["user-agent"]:t))return!1;var n=(e.tablet?i:r).test(t);return n=!n&&e.tablet&&e.featureDetect&&navigator&&1<navigator.maxTouchPoints&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")?!0:n}},{}],239:[function(e,t,n){"use strict";t.exports=function(e){for(var t,n=e.length,r=0;r<n;r++)if(((t=e.charCodeAt(r))<9||13<t)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||8205<t)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}},{}],240:[function(e,t,n){t.exports=function(e,t,n){return e*(1-n)+t*n}},{}],241:[function(e,t,n){var y=e("./normalize"),r=e("gl-mat4/create"),g=e("gl-mat4/clone"),v=e("gl-mat4/determinant"),m=e("gl-mat4/invert"),b=e("gl-mat4/transpose"),x={length:e("gl-vec3/length"),normalize:e("gl-vec3/normalize"),dot:e("gl-vec3/dot"),cross:e("gl-vec3/cross")},_=r(),w=r(),M=[0,0,0,0],j=[[0,0,0],[0,0,0],[0,0,0]],k=[0,0,0];function O(e,t,n,r,i){e[0]=t[0]*r+n[0]*i,e[1]=t[1]*r+n[1]*i,e[2]=t[2]*r+n[2]*i}t.exports=function(e,t,n,r,i,o){if(t=t||[0,0,0],n=n||[0,0,0],r=r||[0,0,0],i=i||[0,0,0,1],o=o||[0,0,0,1],!y(_,e))return!1;if(g(w,_),w[3]=0,w[7]=0,w[11]=0,w[15]=1,Math.abs(v(w)<1e-8))return!1;var a,s=_[3],l=_[7],u=_[11],c=_[12],f=_[13],d=_[14],h=_[15];if(0!==s||0!==l||0!==u){if(M[0]=s,M[1]=l,M[2]=u,M[3]=h,!m(w,w))return!1;b(w,w),a=i,e=w,l=(s=M)[0],u=s[1],h=s[2],s=s[3],a[0]=e[0]*l+e[4]*u+e[8]*h+e[12]*s,a[1]=e[1]*l+e[5]*u+e[9]*h+e[13]*s,a[2]=e[2]*l+e[6]*u+e[10]*h+e[14]*s,a[3]=e[3]*l+e[7]*u+e[11]*h+e[15]*s}else i[0]=i[1]=i[2]=0,i[3]=1;if(t[0]=c,t[1]=f,t[2]=d,t=_,(d=j)[0][0]=t[0],d[0][1]=t[1],d[0][2]=t[2],d[1][0]=t[4],d[1][1]=t[5],d[1][2]=t[6],d[2][0]=t[8],d[2][1]=t[9],d[2][2]=t[10],n[0]=x.length(j[0]),x.normalize(j[0],j[0]),r[0]=x.dot(j[0],j[1]),O(j[1],j[1],j[0],1,-r[0]),n[1]=x.length(j[1]),x.normalize(j[1],j[1]),r[0]/=n[1],r[1]=x.dot(j[0],j[2]),O(j[2],j[2],j[0],1,-r[1]),r[2]=x.dot(j[1],j[2]),O(j[2],j[2],j[1],1,-r[2]),n[2]=x.length(j[2]),x.normalize(j[2],j[2]),r[1]/=n[2],r[2]/=n[2],x.cross(k,j[1],j[2]),x.dot(j[0],k)<0)for(var p=0;p<3;p++)n[p]*=-1,j[p][0]*=-1,j[p][1]*=-1,j[p][2]*=-1;return o[0]=.5*Math.sqrt(Math.max(1+j[0][0]-j[1][1]-j[2][2],0)),o[1]=.5*Math.sqrt(Math.max(1-j[0][0]+j[1][1]-j[2][2],0)),o[2]=.5*Math.sqrt(Math.max(1-j[0][0]-j[1][1]+j[2][2],0)),o[3]=.5*Math.sqrt(Math.max(1+j[0][0]+j[1][1]+j[2][2],0)),j[2][1]>j[1][2]&&(o[0]=-o[0]),j[0][2]>j[2][0]&&(o[1]=-o[1]),j[1][0]>j[0][1]&&(o[2]=-o[2]),!0}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(e,t,n){t.exports=function(e,t){var n=t[15];if(0===n)return!1;for(var r=1/n,i=0;i<16;i++)e[i]=t[i]*r;return!0}},{}],243:[function(e,t,n){var i=e("gl-vec3/lerp"),o=e("mat4-recompose"),a=e("mat4-decompose"),s=e("gl-mat4/determinant"),l=e("quat-slerp"),u=r(),c=r(),f=r();function r(){return{translate:d(),scale:d(1),skew:d(),perspective:h(),quaternion:h()}}function d(e){return[e||0,e||0,e||0]}function h(){return[0,0,0,1]}t.exports=function(e,t,n,r){if(0===s(t)||0===s(n))return!1;t=a(t,u.translate,u.scale,u.skew,u.perspective,u.quaternion),n=a(n,c.translate,c.scale,c.skew,c.perspective,c.quaternion);return!(!t||!n)&&(i(f.translate,u.translate,c.translate,r),i(f.skew,u.skew,c.skew,r),i(f.scale,u.scale,c.scale,r),i(f.perspective,u.perspective,c.perspective,r),l(f.quaternion,u.quaternion,c.quaternion,r),o(e,f.translate,f.scale,f.skew,f.perspective,f.quaternion),!0)}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(e,t,n){var a={identity:e("gl-mat4/identity"),translate:e("gl-mat4/translate"),multiply:e("gl-mat4/multiply"),create:e("gl-mat4/create"),scale:e("gl-mat4/scale"),fromRotationTranslation:e("gl-mat4/fromRotationTranslation")},s=(a.create(),a.create());t.exports=function(e,t,n,r,i,o){return a.identity(e),a.fromRotationTranslation(e,o,t),e[3]=i[0],e[7]=i[1],e[11]=i[2],e[15]=i[3],a.identity(s),0!==r[2]&&(s[9]=r[2],a.multiply(e,e,s)),0!==r[1]&&(s[9]=0,s[8]=r[1],a.multiply(e,e,s)),0!==r[0]&&(s[8]=0,s[4]=r[0],a.multiply(e,e,s)),a.scale(e,e,n),e}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(e,t,n){"use strict";var p=e("binary-search-bounds"),y=e("mat4-interpolate"),g=e("gl-mat4/invert"),o=e("gl-mat4/rotateX"),a=e("gl-mat4/rotateY"),s=e("gl-mat4/rotateZ"),l=e("gl-mat4/lookAt"),i=e("gl-mat4/translate"),v=(e("gl-mat4/scale"),e("gl-vec3/normalize")),u=[0,0,0];function r(e){this._components=e.slice(),this._time=[0],this.prevMatrix=e.slice(),this.nextMatrix=e.slice(),this.computedMatrix=e.slice(),this.computedInverse=e.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}t.exports=function(e){return new r((e=e||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};t=r.prototype;t.recalcMatrix=function(e){var t=this._time,n=p.le(t,e),r=this.computedMatrix;if(!(n<0)){var i=this._components;if(n===t.length-1)for(var o=16*n,a=0;a<16;++a)r[a]=i[o++];else{for(var s=t[n+1]-t[n],o=16*n,l=this.prevMatrix,u=!0,a=0;a<16;++a)l[a]=i[o++];for(var c=this.nextMatrix,a=0;a<16;++a)c[a]=i[o++],u=u&&l[a]===c[a];if(s<1e-6||u)for(a=0;a<16;++a)r[a]=l[a];else y(r,l,c,(e-t[n])/s)}n=this.computedUp;n[0]=r[1],n[1]=r[5],n[2]=r[9],v(n,n);s=this.computedInverse;g(s,r);var f=this.computedEye,n=s[15];f[0]=s[12]/n,f[1]=s[13]/n,f[2]=s[14]/n;for(var d=this.computedCenter,h=Math.exp(this.computedRadius[0]),a=0;a<3;++a)d[a]=f[a]-r[2+4*a]*h}},t.idle=function(e){if(!(e<this.lastT())){for(var t=this._components,n=t.length-16,r=0;r<16;++r)t.push(t[n++]);this._time.push(e)}},t.flush=function(e){e=p.gt(this._time,e)-2;e<0||(this._time.splice(0,e),this._components.splice(0,16*e))},t.lastT=function(){return this._time[this._time.length-1]},t.lookAt=function(e,t,n,r){this.recalcMatrix(e),t=t||this.computedEye,r=r||this.computedUp,this.setMatrix(e,l(this.computedMatrix,t,n=n||u,r));for(var i=0,o=0;o<3;++o)i+=Math.pow(n[o]-t[o],2);i=Math.log(Math.sqrt(i)),this.computedRadius[0]=i},t.rotate=function(e,t,n,r){this.recalcMatrix(e);var i=this.computedInverse;t&&a(i,i,t),n&&o(i,i,n),r&&s(i,i,r),this.setMatrix(e,g(this.computedMatrix,i))};var c=[0,0,0];t.pan=function(e,t,n,r){c[0]=-(t||0),c[1]=-(n||0),c[2]=-(r||0),this.recalcMatrix(e);r=this.computedInverse;i(r,r,c),this.setMatrix(e,g(r,r))},t.translate=function(e,t,n,r){c[0]=t||0,c[1]=n||0,c[2]=r||0,this.recalcMatrix(e);r=this.computedMatrix;i(r,r,c),this.setMatrix(e,r)},t.setMatrix=function(e,t){if(!(e<this.lastT())){this._time.push(e);for(var n=0;n<16;++n)this._components.push(t[n])}},t.setDistance=function(e,t){this.computedRadius[0]=t},t.setDistanceLimits=function(e,t){var n=this._limits;n[0]=e,n[1]=t},t.getDistanceLimits=function(e){var t=this._limits;return e?(e[0]=t[0],e[1]=t[1],e):t}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(e,t,n){"use strict";t.exports=function(r){var e=r.length;if(e<3){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return 2===e&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:t}for(var i=new Array(e),n=0;n<e;++n)i[n]=n;i.sort(function(e,t){var n=r[e][0]-r[t][0];return n||r[e][1]-r[t][1]});for(var o=[i[0],i[1]],a=[i[0],i[1]],n=2;n<e;++n){for(var s=i[n],l=r[s],u=o.length;1<u&&h(r[o[u-2]],r[o[u-1]],l)<=0;)--u,o.pop();for(o.push(s),u=a.length;1<u&&0<=h(r[a[u-2]],r[a[u-1]],l);)--u,a.pop();a.push(s)}for(var t=new Array(a.length+o.length-2),c=0,n=0,f=o.length;n<f;++n)t[c++]=o[n];for(var d=a.length-2;0<d;--d)t[c++]=a[d];return t};var h=e("robust-orientation")[3]},{"robust-orientation":284}],247:[function(e,t,n){"use strict";t.exports=function(t,i){i||(i=t,t=window);var o=0,a=0,s=0,l={shift:!1,alt:!1,control:!1,meta:!1},n=!1;function u(e){var t=!1;return"altKey"in e&&(t=t||e.altKey!==l.alt,l.alt=!!e.altKey),"shiftKey"in e&&(t=t||e.shiftKey!==l.shift,l.shift=!!e.shiftKey),"ctrlKey"in e&&(t=t||e.ctrlKey!==l.control,l.control=!!e.ctrlKey),"metaKey"in e&&(t=t||e.metaKey!==l.meta,l.meta=!!e.metaKey),t}function r(e,t){var n=v.x(t),r=v.y(t);(e="buttons"in t?0|t.buttons:e)===o&&n===a&&r===s&&!u(t)||(o=0|e,a=n||0,s=r||0,i&&i(o,a,s,l))}function c(e){r(0,e)}function f(){(o||a||s||l.shift||l.alt||l.meta||l.control)&&(a=s=0,o=0,l.shift=l.alt=l.control=l.meta=!1,i&&i(0,0,0,l))}function d(e){u(e)&&i&&i(o,a,s,l)}function h(e){0===v.buttons(e)?r(0,e):r(o,e)}function p(e){r(o|v.buttons(e),e)}function y(e){r(o&~v.buttons(e),e)}function g(){n||(n=!0,t.addEventListener("mousemove",h),t.addEventListener("mousedown",p),t.addEventListener("mouseup",y),t.addEventListener("mouseleave",c),t.addEventListener("mouseenter",c),t.addEventListener("mouseout",c),t.addEventListener("mouseover",c),t.addEventListener("blur",f),t.addEventListener("keyup",d),t.addEventListener("keydown",d),t.addEventListener("keypress",d),t!==window&&(window.addEventListener("blur",f),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}g();var e={element:t};return Object.defineProperties(e,{enabled:{get:function(){return n},set:function(e){e?g():n&&(n=!1,t.removeEventListener("mousemove",h),t.removeEventListener("mousedown",p),t.removeEventListener("mouseup",y),t.removeEventListener("mouseleave",c),t.removeEventListener("mouseenter",c),t.removeEventListener("mouseout",c),t.removeEventListener("mouseover",c),t.removeEventListener("blur",f),t.removeEventListener("keyup",d),t.removeEventListener("keydown",d),t.removeEventListener("keypress",d),t!==window&&(window.removeEventListener("blur",f),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))},enumerable:!0},buttons:{get:function(){return o},enumerable:!0},x:{get:function(){return a},enumerable:!0},y:{get:function(){return s},enumerable:!0},mods:{get:function(){return l},enumerable:!0}}),e};var v=e("mouse-event")},{"mouse-event":249}],248:[function(e,t,n){var i={left:0,top:0};t.exports=function(e,t,n){t=t||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var r=e.clientX||0,e=e.clientY||0,t=function(e){return e===window||e===document||e===document.body?i:e.getBoundingClientRect()}(t);return n[0]=r-t.left,n[1]=e-t.top,n}},{}],249:[function(e,t,n){"use strict";function r(e){return e.target||e.srcElement||window}n.buttons=function(e){if("object"==typeof e){if("buttons"in e)return e.buttons;if("which"in e){if(2===(t=e.which))return 4;if(3===t)return 2;if(0<t)return 1<<t-1}else if("button"in e){var t;if(1===(t=e.button))return 4;if(2===t)return 2;if(0<=t)return 1<<t}}return 0},n.element=r,n.x=function(e){if("object"!=typeof e)return 0;if("offsetX"in e)return e.offsetX;var t=r(e).getBoundingClientRect();return e.clientX-t.left},n.y=function(e){if("object"!=typeof e)return 0;if("offsetY"in e)return e.offsetY;var t=r(e).getBoundingClientRect();return e.clientY-t.top}},{}],250:[function(e,t,n){"use strict";var r=e("to-px");t.exports=function(e,o,a){"function"==typeof e&&(a=!!o,o=e,e=window);function t(e){a&&e.preventDefault();var t=e.deltaX||0,n=e.deltaY||0,r=e.deltaZ||0,i=1;switch(e.deltaMode){case 1:i=s;break;case 2:i=window.innerHeight}if(n*=i,r*=i,(t*=i)||n||r)return o(t,n,r,e)}var s=r("ex",e);return e.addEventListener("wheel",t),t}},{"to-px":304}],251:[function(e,t,n){"use strict";var l=e("typedarray-pool");t.exports=function(e){function t(e){throw new Error("ndarray-extract-contour: "+e)}"object"!=typeof e&&t("Must specify arguments");var n=e.order;Array.isArray(n)||t("Must specify order");var r=e.arrayArguments||1;r<1&&t("Must have at least one array argument");var i=e.scalarArguments||0;i<0&&t("Scalar arg count must be > 0");"function"!=typeof e.vertex&&t("Must specify vertex creation function");"function"!=typeof e.cell&&t("Must specify cell creation function");"function"!=typeof e.phase&&t("Must specify phase function");for(var o=e.getters||[],a=new Array(r),s=0;s<r;++s)0<=o.indexOf(s)?a[s]=!0:a[s]=!1;return function(e,t,n,r,i){r=[i,r].join(",");return(0,u[r])(e,t,n,l.mallocUint32,l.freeUint32)}(e.vertex,e.cell,e.phase,n,a)};var u={"false,0,1":function(D,N,F,B,U){return function(e,t,n,r){for(var i,o,a=0|e.shape[0],s=0|e.shape[1],l=e.data,u=0|e.offset,c=0|e.stride[0],e=0|e.stride[1],f=u,d=0|-c,h=0,p=0|-e,y=0,g=-c-e|0,v=0,m=0|c,b=e-c*a|0,x=0,_=0,w=0,c=2*a|0,M=B(c),j=B(c),k=0,O=0,A=-1,T=-1,P=0,S=0|-a,E=0|a,C=0,L=-a-1|0,R=a-1|0,I=0,z=0,x=0;x<a;++x)M[k++]=F(l[f],t,n,r),f+=m;if(f+=b,0<s){if(_=1,M[k++]=F(l[f],t,n,r),f+=m,0<a)for(x=1,i=l[f],O=M[k]=F(i,t,n,r),P=M[k+A],C=M[k+S],I=M[k+L],O===P&&O===C&&O===I||(h=l[f+d],y=l[f+p],v=l[f+g],D(x,_,i,h,y,v,O,P,C,I,t,n,r),z=j[k]=w++),k+=1,f+=m,x=2;x<a;++x)i=l[f],O=M[k]=F(i,t,n,r),P=M[k+A],C=M[k+S],I=M[k+L],O===P&&O===C&&O===I||(h=l[f+d],y=l[f+p],v=l[f+g],D(x,_,i,h,y,v,O,P,C,I,t,n,r),z=j[k]=w++,I!==P&&N(j[k+A],z,v,h,I,P,t,n,r)),k+=1,f+=m;for(f+=b,k=0,o=A,A=T,T=o,o=S,S=E,E=o,o=L,L=R,R=o,_=2;_<s;++_){if(M[k++]=F(l[f],t,n,r),f+=m,0<a)for(x=1,i=l[f],O=M[k]=F(i,t,n,r),P=M[k+A],C=M[k+S],I=M[k+L],O===P&&O===C&&O===I||(h=l[f+d],y=l[f+p],v=l[f+g],D(x,_,i,h,y,v,O,P,C,I,t,n,r),z=j[k]=w++,I!==C&&N(j[k+S],z,y,v,C,I,t,n,r)),k+=1,f+=m,x=2;x<a;++x)i=l[f],O=M[k]=F(i,t,n,r),P=M[k+A],C=M[k+S],I=M[k+L],O===P&&O===C&&O===I||(h=l[f+d],y=l[f+p],v=l[f+g],D(x,_,i,h,y,v,O,P,C,I,t,n,r),z=j[k]=w++,I!==C&&N(j[k+S],z,y,v,C,I,t,n,r),I!==P&&N(j[k+A],z,v,h,I,P,t,n,r)),k+=1,f+=m;1&_&&(k=0),o=A,A=T,T=o,o=S,S=E,E=o,o=L,L=R,R=o,f+=b}}U(j),U(M)}},"false,1,0":function(D,N,F,B,U){return function(e,t,n,r){for(var i,o,a=0|e.shape[0],s=0|e.shape[1],l=e.data,u=0|e.offset,c=0|e.stride[0],e=0|e.stride[1],f=u,d=0|-c,h=0,p=0|-e,y=0,g=-c-e|0,v=0,m=0|e,b=c-e*s|0,x=0,_=0,w=0,e=2*s|0,M=B(e),j=B(e),k=0,O=0,A=-1,T=-1,P=0,S=0|-s,E=0|s,C=0,L=-s-1|0,R=s-1|0,I=0,z=0,_=0;_<s;++_)M[k++]=F(l[f],t,n,r),f+=m;if(f+=b,0<a){if(x=1,M[k++]=F(l[f],t,n,r),f+=m,0<s)for(_=1,i=l[f],O=M[k]=F(i,t,n,r),C=M[k+S],P=M[k+A],I=M[k+L],O===C&&O===P&&O===I||(h=l[f+d],y=l[f+p],v=l[f+g],D(x,_,i,h,y,v,O,C,P,I,t,n,r),z=j[k]=w++),k+=1,f+=m,_=2;_<s;++_)i=l[f],O=M[k]=F(i,t,n,r),C=M[k+S],P=M[k+A],I=M[k+L],O===C&&O===P&&O===I||(h=l[f+d],y=l[f+p],v=l[f+g],D(x,_,i,h,y,v,O,C,P,I,t,n,r),z=j[k]=w++,I!==P&&N(j[k+A],z,y,v,P,I,t,n,r)),k+=1,f+=m;for(f+=b,k=0,o=S,S=E,E=o,o=A,A=T,T=o,o=L,L=R,R=o,x=2;x<a;++x){if(M[k++]=F(l[f],t,n,r),f+=m,0<s)for(_=1,i=l[f],O=M[k]=F(i,t,n,r),C=M[k+S],P=M[k+A],I=M[k+L],O===C&&O===P&&O===I||(h=l[f+d],y=l[f+p],v=l[f+g],D(x,_,i,h,y,v,O,C,P,I,t,n,r),z=j[k]=w++,I!==C&&N(j[k+S],z,v,h,I,C,t,n,r)),k+=1,f+=m,_=2;_<s;++_)i=l[f],O=M[k]=F(i,t,n,r),C=M[k+S],P=M[k+A],I=M[k+L],O===C&&O===P&&O===I||(h=l[f+d],y=l[f+p],v=l[f+g],D(x,_,i,h,y,v,O,C,P,I,t,n,r),z=j[k]=w++,I!==P&&N(j[k+A],z,y,v,P,I,t,n,r),I!==C&&N(j[k+S],z,v,h,I,C,t,n,r)),k+=1,f+=m;1&x&&(k=0),o=S,S=E,E=o,o=A,A=T,T=o,o=L,L=R,R=o,f+=b}}U(j),U(M)}}}},{"typedarray-pool":308}],252:[function(e,t,n){"use strict";var r=e("dup"),i={zero:function(e,t,n,r){var i=e[0];r|=0;for(var o=0,a=n[0],o=0;o<i;++o)t[r]=0,r+=a},fdTemplate1:function(e,t,n,r,i,o,a){var s=e[0],n=n[0],l=-1*n,u=n;r|=0,a|=0;for(var c=0,f=n,d=o[0],c=0;c<s;++c)i[a]=.5*(t[r+l]-t[r+u]),r+=f,a+=d},fdTemplate2:function(e,t,n,r,i,o,a,s,l,u){var c=e[0],f=e[1],d=n[0],h=n[1],e=o[0],n=o[1],o=l[0],l=l[1],p=-1*d,y=d,g=-1*h,v=h;r|=0,a|=0,u|=0;for(var m=0,b=0,x=h,_=d-f*h,w=n,M=e-f*n,j=l,k=o-f*l,b=0;b<c;++b){for(m=0;m<f;++m)i[a]=.5*(t[r+p]-t[r+y]),s[u]=.5*(t[r+g]-t[r+v]),r+=x,a+=w,u+=j;r+=_,a+=M,u+=k}}},o={cdiff:function(f){var d={};return function(e,t,n){var r=e.dtype,i=e.order,o=t.dtype,a=t.order,s=n.dtype,l=n.order,u=[r,i.join(),o,a.join(),s,l.join()].join(),c=d[u];return c||(d[u]=c=f([r,i,o,a,s,l])),c(e.shape.slice(0),e.data,e.stride,0|e.offset,t.data,t.stride,0|t.offset,n.data,n.stride,0|n.offset)}},zero:function(o){var a={};return function(e){var t=e.dtype,n=e.order,r=[t,n.join()].join(),i=a[r];return i||(a[r]=i=o([t,n])),i(e.shape.slice(0),e.data,e.stride,0|e.offset)}},fdTemplate1:function(l){var u={};return function(e,t){var n=e.dtype,r=e.order,i=t.dtype,o=t.order,a=[n,r.join(),i,o.join()].join(),s=u[a];return s||(u[a]=s=l([n,r,i,o])),s(e.shape.slice(0),e.data,e.stride,0|e.offset,t.data,t.stride,0|t.offset)}},fdTemplate2:function(f){var d={};return function(e,t,n){var r=e.dtype,i=e.order,o=t.dtype,a=t.order,s=n.dtype,l=n.order,u=[r,i.join(),o,a.join(),s,l.join()].join(),c=d[u];return c||(d[u]=c=f([r,i,o,a,s,l])),c(e.shape.slice(0),e.data,e.stride,0|e.offset,t.data,t.stride,0|t.offset,n.data,n.stride,0|n.offset)}}};function a(e){return(0,o[e.funcName])(function(e){return i[e.funcName]}.bind(void 0,e))}function s(e){return a({funcName:e.funcName})}var l={},u={},c=s({funcName:"cdiff"}),f=s({funcName:"zero"});function d(e,r,i,o){return function(e,t){var n=t.shape.slice();return 2<n[0]&&2<n[1]&&o(t.pick(-1,-1).lo(1,1).hi(n[0]-2,n[1]-2),e.pick(-1,-1,0).lo(1,1).hi(n[0]-2,n[1]-2),e.pick(-1,-1,1).lo(1,1).hi(n[0]-2,n[1]-2)),2<n[1]&&(i(t.pick(0,-1).lo(1).hi(n[1]-2),e.pick(0,-1,1).lo(1).hi(n[1]-2)),r(e.pick(0,-1,0).lo(1).hi(n[1]-2))),2<n[1]&&(i(t.pick(n[0]-1,-1).lo(1).hi(n[1]-2),e.pick(n[0]-1,-1,1).lo(1).hi(n[1]-2)),r(e.pick(n[0]-1,-1,0).lo(1).hi(n[1]-2))),2<n[0]&&(i(t.pick(-1,0).lo(1).hi(n[0]-2),e.pick(-1,0,0).lo(1).hi(n[0]-2)),r(e.pick(-1,0,1).lo(1).hi(n[0]-2))),2<n[0]&&(i(t.pick(-1,n[1]-1).lo(1).hi(n[0]-2),e.pick(-1,n[1]-1,0).lo(1).hi(n[0]-2)),r(e.pick(-1,n[1]-1,1).lo(1).hi(n[0]-2))),e.set(0,0,0,0),e.set(0,0,1,0),e.set(n[0]-1,0,0,0),e.set(n[0]-1,0,1,0),e.set(0,n[1]-1,0,0),e.set(0,n[1]-1,1,0),e.set(n[0]-1,n[1]-1,0,0),e.set(n[0]-1,n[1]-1,1,0),e}}function h(e){var t=e.join();if(a=u[t])return a;for(var n,r=e.length,i=[c,f],o=1;o<=r;++o)i.push((n=o)in l?l[n]:l[n]=s({funcName:"fdTemplate"+n}));var a=d.apply(void 0,i);return u[t]=a}t.exports=function(e,t,n){return Array.isArray(n)||(n=r(t.dimension,"string"==typeof n?n:"clamp")),0===t.size?e:0===t.dimension?(e.set(0),e):h(n)(e,t)}},{dup:65}],253:[function(e,t,n){"use strict";function i(e,t){var n=Math.floor(t),r=t-n,i=0<=n&&n<e.shape[0],t=0<=n+1&&n+1<e.shape[0];return(1-r)*(i?+e.get(n):0)+r*(t?+e.get(n+1):0)}function o(e,t,n){var r=Math.floor(t),i=t-r,o=0<=r&&r<e.shape[0],a=0<=r+1&&r+1<e.shape[0],s=Math.floor(n),l=n-s,u=0<=s&&s<e.shape[1],t=0<=s+1&&s+1<e.shape[1],n=o&&u?e.get(r,s):0,o=o&&t?e.get(r,s+1):0;return(1-l)*((1-i)*n+i*(a&&u?e.get(r+1,s):0))+l*((1-i)*o+i*(a&&t?e.get(r+1,s+1):0))}function a(e,t,n,r){var i=Math.floor(t),o=t-i,a=0<=i&&i<e.shape[0],s=0<=i+1&&i+1<e.shape[0],l=Math.floor(n),u=n-l,c=0<=l&&l<e.shape[1],f=0<=l+1&&l+1<e.shape[1],d=Math.floor(r),h=r-d,p=0<=d&&d<e.shape[2],y=0<=d+1&&d+1<e.shape[2],g=a&&c&&p?e.get(i,l,d):0,t=a&&f&&p?e.get(i,l+1,d):0,n=s&&c&&p?e.get(i+1,l,d):0,r=s&&f&&p?e.get(i+1,l+1,d):0,p=a&&c&&y?e.get(i,l,d+1):0,a=a&&f&&y?e.get(i,l+1,d+1):0;return(1-h)*((1-u)*((1-o)*g+o*n)+u*((1-o)*t+o*r))+h*((1-u)*((1-o)*p+o*(s&&c&&y?e.get(i+1,l,d+1):0))+u*((1-o)*a+o*(s&&f&&y?e.get(i+1,l+1,d+1):0)))}t.exports=function(e,t,n,r){switch(e.shape.length){case 0:return 0;case 1:return i(e,t);case 2:return o(e,t,n);case 3:return a(e,t,n,r);default:return function(e){for(var t,n=0|e.shape.length,r=new Array(n),i=new Array(n),o=new Array(n),a=new Array(n),s=0;s<n;++s)t=+arguments[s+1],r[s]=Math.floor(t),i[s]=t-r[s],o[s]=0<=r[s]&&r[s]<e.shape[s],a[s]=0<=r[s]+1&&r[s]+1<e.shape[s];var l,u,c,f=0;e:for(s=0;s<1<<n;++s){for(u=1,c=e.offset,l=0;l<n;++l)if(s&1<<l){if(!a[l])continue e;u*=i[l],c+=e.stride[l]*(r[l]+1)}else{if(!o[l])continue e;u*=1-i[l],c+=e.stride[l]*r[l]}f+=u*e.data[c]}return f}.apply(void 0,arguments)}},t.exports.d1=i,t.exports.d2=o,t.exports.d3=a},{}],254:[function(e,t,n){"use strict";var r={"float64,2,1,0":function(){return function(e,t,n,r,i){var o=e[0],a=e[1],s=e[2],l=n[0],e=n[1],n=n[2];r|=0;for(var u=0,c=0,f=0,d=n,h=e-s*n,p=l-a*e,f=0;f<o;++f){for(c=0;c<a;++c){for(u=0;u<s;++u)t[r]/=i,r+=d;r+=h}r+=p}}},"uint8,2,0,1,float64,2,1,0":function(){return function(e,t,n,r,i,o,a,s){for(var l=e[0],u=e[1],c=e[2],f=n[0],d=n[1],h=n[2],p=o[0],y=o[1],g=o[2],v=r|=0,m=a|=0,b=0|e[0];0<b;){b<64?(l=b,b=0):b-=l=64;for(var x=0|e[1];0<x;){x<64?(u=x,x=0):x-=u=64,r=v+b*f+x*d,a=m+b*p+x*y;for(var _=0,w=0,M=0,j=h,k=f-c*h,O=d-l*f,A=g,T=p-c*g,P=y-l*p,M=0;M<u;++M){for(w=0;w<l;++w){for(_=0;_<c;++_)t[r]=i[a]*s,r+=j,a+=A;r+=k,a+=T}r+=O,a+=P}}}}},"float32,1,0,float32,1,0":function(){return function(e,t,n,r,i,o,a){var s=e[0],l=e[1],u=n[0],e=n[1],n=o[0],o=o[1];r|=0,a|=0;for(var c=0,f=0,d=e,h=u-l*e,p=o,y=n-l*o,f=0;f<s;++f){for(c=0;c<l;++c)t[r]=i[a],r+=d,a+=p;r+=h,a+=y}}},"float32,1,0,float32,0,1":function(){return function(e,t,n,r,i,o,a){for(var s=e[0],l=e[1],u=n[0],c=n[1],f=o[0],d=o[1],h=r|=0,p=a|=0,y=0|e[1];0<y;){y<64?(l=y,y=0):y-=l=64;for(var g=0|e[0];0<g;){g<64?(s=g,g=0):g-=s=64,r=h+y*c+g*u,a=p+y*d+g*f;for(var v=0,m=0,b=c,x=u-l*c,_=d,w=f-l*d,m=0;m<s;++m){for(v=0;v<l;++v)t[r]=i[a],r+=b,a+=_;r+=x,a+=w}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(e,t,n,r,i,o,a){for(var s=e[0],l=e[1],u=e[2],c=n[0],f=n[1],d=n[2],h=o[0],p=o[1],y=o[2],g=r|=0,v=a|=0,m=0|e[2];0<m;){m<64?(u=m,m=0):m-=u=64;for(var b=0|e[0];0<b;){b<64?(s=b,b=0):b-=s=64;for(var x=0|e[1];0<x;){x<64?(l=x,x=0):x-=l=64,r=g+m*d+b*c+x*f,a=v+m*y+b*h+x*p;for(var _=0,w=0,M=0,j=d,k=c-u*d,O=f-s*c,A=y,T=h-u*y,P=p-s*h,M=0;M<l;++M){for(w=0;w<s;++w){for(_=0;_<u;++_)t[r]=i[a],r+=j,a+=A;r+=k,a+=T}r+=O,a+=P}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(e,t,n,r,i,o,a){var s=e[0],l=e[1],u=e[2],c=n[0],f=n[1],d=n[2],e=o[0],n=o[1],o=o[2];r|=0,a|=0;for(var h=0,p=0,y=0,g=d,v=c-u*d,m=f-s*c,b=o,x=e-u*o,_=n-s*e,y=0;y<l;++y){for(p=0;p<s;++p){for(h=0;h<u;++h)t[r]=i[a],r+=g,a+=b;r+=v,a+=x}r+=m,a+=_}}}};var i=function(e,t){return t=t.join(","),(0,r[t])()},o={mul:function(f){var d={};return function(e,t,n){var r=e.dtype,i=e.order,o=t.dtype,a=t.order,s=n.dtype,l=n.order,u=[r,i.join(),o,a.join(),s,l.join()].join(),c=d[u];return c||(d[u]=c=f([r,i,o,a,s,l])),c(e.shape.slice(0),e.data,e.stride,0|e.offset,t.data,t.stride,0|t.offset,n.data,n.stride,0|n.offset)}},muls:function(u){var c={};return function(e,t,n){var r=e.dtype,i=e.order,o=t.dtype,a=t.order,s=[r,i.join(),o,a.join()].join(),l=c[s];return l||(c[s]=l=u([r,i,o,a])),l(e.shape.slice(0),e.data,e.stride,0|e.offset,t.data,t.stride,0|t.offset,n)}},mulseq:function(a){var s={};return function(e,t){var n=e.dtype,r=e.order,i=[n,r.join()].join(),o=s[i];return o||(s[i]=o=a([n,r])),o(e.shape.slice(0),e.data,e.stride,0|e.offset,t)}},div:function(f){var d={};return function(e,t,n){var r=e.dtype,i=e.order,o=t.dtype,a=t.order,s=n.dtype,l=n.order,u=[r,i.join(),o,a.join(),s,l.join()].join(),c=d[u];return c||(d[u]=c=f([r,i,o,a,s,l])),c(e.shape.slice(0),e.data,e.stride,0|e.offset,t.data,t.stride,0|t.offset,n.data,n.stride,0|n.offset)}},divs:function(u){var c={};return function(e,t,n){var r=e.dtype,i=e.order,o=t.dtype,a=t.order,s=[r,i.join(),o,a.join()].join(),l=c[s];return l||(c[s]=l=u([r,i,o,a])),l(e.shape.slice(0),e.data,e.stride,0|e.offset,t.data,t.stride,0|t.offset,n)}},divseq:function(a){var s={};return function(e,t){var n=e.dtype,r=e.order,i=[n,r.join()].join(),o=s[i];return o||(s[i]=o=a([n,r])),o(e.shape.slice(0),e.data,e.stride,0|e.offset,t)}},assign:function(l){var u={};return function(e,t){var n=e.dtype,r=e.order,i=t.dtype,o=t.order,a=[n,r.join(),i,o.join()].join(),s=u[a];return s||(u[a]=s=l([n,r,i,o])),s(e.shape.slice(0),e.data,e.stride,0|e.offset,t.data,t.stride,0|t.offset)}}};function a(e){return e={funcName:e.funcName},(0,o[e.funcName])(i.bind(void 0,e))}var s={mul:"*",div:"/"};!function(){for(var e in s)n[e]=a({funcName:e}),n[e+"s"]=a({funcName:e+"s"}),n[e+"seq"]=a({funcName:e+"seq"})}(),n.assign=a({funcName:"assign"})},{}],255:[function(e,t,n){"use strict";var o=e("ndarray"),a=e("./doConvert.js");t.exports=function(e,t){for(var n=[],r=e,i=1;Array.isArray(r);)n.push(r.length),i*=r.length,r=r[0];return 0===n.length?o():(t=t||o(new Float64Array(i),n),a(t,e),t)}},{"./doConvert.js":256,ndarray:259}],256:[function(e,t,n){"use strict";var a,s,r=function(){return function(e,t,n,r,i){var o=e[0],a=e[1],s=e[2],l=n[0],e=n[1],n=n[2],u=[0,0,0];r|=0;for(var c=0,f=0,d=0,h=n,p=e-s*n,y=l-a*e,d=0;d<o;++d){for(f=0;f<a;++f){for(c=0;c<s;++c){for(var g=i,v=0;v<u.length-1;++v)g=g[u[v]];t[r]=g[u[u.length-1]],r+=h,++u[2]}r+=p,u[2]-=s,++u[1]}r+=y,u[1]-=a,++u[0]}}};t.exports=(t={funcName:(t={funcName:"convert"}).funcName},a=r.bind(void 0,t),s={},function(e,t){var n=e.dtype,r=e.order,i=[n,r.join()].join(),o=s[i];return o||(s[i]=o=a([n,r])),o(e.shape.slice(0),e.data,e.stride,0|e.offset,t)})},{}],257:[function(e,t,n){"use strict";var r=e("typedarray-pool");function o(e){return"uint32"!==e?null:[r.mallocUint32,r.freeUint32]}var a={"uint32,1,0":function(_,w){return function(e,t,n,r,i,o,a,s,l,u,c){for(var f,d,h,p,y,g,v,m=e*i+r,b=_(s),x=e+1;x<=t;++x){for(f=x,y=d=m+=i,h=p=0;h<s;++h)b[p++]=n[y],y+=l;e:for(;f-- >e;){for(y=d-i,h=p=0;h<s;++h){if((g=n[y])<(v=b[p]))break e;if(v<g)break;y+=u,p+=c}for(y=(p=d)-i,h=0;h<s;++h)n[p]=n[y],p+=l,y+=l;d-=i}for(p=d,h=y=0;h<s;++h)n[p]=b[y++],p+=l}w(b)}}};var s={"uint32,1,0":function(ee,te,ne){return function e(t,n,r,i,o,a,s,l,u,c,f){for(var d,h,p,y,g,v,m,b,x,_,w,M,j,k,O,A,T,P,S,E=(n-t+1)/6|0,C=t+E,L=n-E,R=t+n>>1,I=R-E,z=R+E,D=C,N=I,F=R,B=z,U=L,q=t+1,H=n-1,V=!0,G=0,W=0,Y=0,E=l,X=te(E),Z=te(E),$=o*D,K=o*N,Q=i,J=0;J<l;++J){if(0<(Y=r[g=$+Q]-r[v=K+Q])){h=D,D=N,N=h;break}if(Y<0)break;Q+=c}for($=o*B,K=o*U,Q=i,J=0;J<l;++J){if(0<(Y=r[g=$+Q]-r[v=K+Q])){h=B,B=U,U=h;break}if(Y<0)break;Q+=c}for($=o*D,K=o*F,Q=i,J=0;J<l;++J){if(0<(Y=r[g=$+Q]-r[v=K+Q])){h=D,D=F,F=h;break}if(Y<0)break;Q+=c}for($=o*N,K=o*F,Q=i,J=0;J<l;++J){if(0<(Y=r[g=$+Q]-r[v=K+Q])){h=N,N=F,F=h;break}if(Y<0)break;Q+=c}for($=o*D,K=o*B,Q=i,J=0;J<l;++J){if(0<(Y=r[g=$+Q]-r[v=K+Q])){h=D,D=B,B=h;break}if(Y<0)break;Q+=c}for($=o*F,K=o*B,Q=i,J=0;J<l;++J){if(0<(Y=r[g=$+Q]-r[v=K+Q])){h=F,F=B,B=h;break}if(Y<0)break;Q+=c}for($=o*N,K=o*U,Q=i,J=0;J<l;++J){if(0<(Y=r[g=$+Q]-r[v=K+Q])){h=N,N=U,U=h;break}if(Y<0)break;Q+=c}for($=o*N,K=o*F,Q=i,J=0;J<l;++J){if(0<(Y=r[g=$+Q]-r[v=K+Q])){h=N,N=F,F=h;break}if(Y<0)break;Q+=c}for($=o*B,K=o*U,Q=i,J=0;J<l;++J){if(0<(Y=r[g=$+Q]-r[v=K+Q])){h=B,B=U,U=h;break}if(Y<0)break;Q+=c}for($=o*D,K=o*N,b=o*F,x=o*B,_=o*U,w=o*C,M=o*R,j=o*L,Q=i,J=S=0;J<l;++J)g=$+Q,m=b+Q,k=x+Q,O=_+Q,A=w+Q,T=M+Q,P=j+Q,X[S]=r[v=K+Q],Z[S]=r[k],V=V&&X[S]===Z[S],p=r[g],k=r[m],O=r[O],r[A]=p,r[T]=k,r[P]=O,++S,Q+=u;for($=o*I,K=o*t,Q=i,J=0;J<l;++J)r[g=$+Q]=r[v=K+Q],Q+=u;for($=o*z,K=o*n,Q=i,J=0;J<l;++J)r[g=$+Q]=r[v=K+Q],Q+=u;if(V)for(y=q;y<=H;++y){for(g=i+y*o,J=S=0;J<l&&0===(Y=r[g]-X[S]);++J)S+=f,g+=c;if(0!==Y)if(Y<0){if(y!==q)for($=o*y,K=o*q,Q=i,J=0;J<l;++J)d=r[g=$+Q],r[g]=r[v=K+Q],r[v]=d,Q+=u;++q}else for(;;){for(g=i+H*o,J=S=0;J<l&&0===(Y=r[g]-X[S]);++J)S+=f,g+=c;if(!(0<Y)){if(Y<0){for($=o*y,K=o*q,b=o*H,Q=i,J=0;J<l;++J)m=b+Q,d=r[g=$+Q],r[g]=r[v=K+Q],r[v]=r[m],r[m]=d,Q+=u;++q,--H;break}for($=o*y,K=o*H,Q=i,J=0;J<l;++J)d=r[g=$+Q],r[g]=r[v=K+Q],r[v]=d,Q+=u;--H;break}H--}}else for(y=q;y<=H;++y){for(g=i+y*o,J=S=0;J<l&&0===(G=r[g]-X[S]);++J)S+=f,g+=c;if(G<0){if(y!==q)for($=o*y,K=o*q,Q=i,J=0;J<l;++J)d=r[g=$+Q],r[g]=r[v=K+Q],r[v]=d,Q+=u;++q}else{for(g=i+y*o,J=S=0;J<l&&0===(W=r[g]-Z[S]);++J)S+=f,g+=c;if(0<W)for(;;){for(g=i+H*o,J=S=0;J<l&&0===(Y=r[g]-Z[S]);++J)S+=f,g+=c;if(!(0<Y)){for(g=i+H*o,J=S=0;J<l&&0===(Y=r[g]-X[S]);++J)S+=f,g+=c;if(Y<0){for($=o*y,K=o*q,b=o*H,Q=i,J=0;J<l;++J)m=b+Q,d=r[g=$+Q],r[g]=r[v=K+Q],r[v]=r[m],r[m]=d,Q+=u;++q,--H}else{for($=o*y,K=o*H,Q=i,J=0;J<l;++J)d=r[g=$+Q],r[g]=r[v=K+Q],r[v]=d,Q+=u;--H}break}if(--H<y)break}}}for($=o*t,K=o*(q-1),Q=i,J=S=0;J<l;++J)r[g=$+Q]=r[v=K+Q],r[v]=X[S],++S,Q+=u;for($=o*n,K=o*(H+1),Q=i,J=S=0;J<l;++J)r[g=$+Q]=r[v=K+Q],r[v]=Z[S],++S,Q+=u;if((q-2-t<=32?ee:e)(t,q-2,r,i,o,a,s,l,u,c,f),(n-(H+2)<=32?ee:e)(H+2,n,r,i,o,a,s,l,u,c,f),V)return ne(X),void ne(Z);if(q<C&&L<H){e:for(;;){for(g=i+q*o,Q=i,J=S=0;J<l;++J){if(r[g]!==X[S])break e;++S,g+=u}++q}e:for(;;){for(g=i+H*o,Q=i,J=S=0;J<l;++J){if(r[g]!==Z[S])break e;++S,g+=u}--H}for(y=q;y<=H;++y){for(g=i+y*o,J=S=0;J<l&&0===(G=r[g]-X[S]);++J)S+=f,g+=c;if(0===G){if(y!==q)for($=o*y,K=o*q,Q=i,J=0;J<l;++J)d=r[g=$+Q],r[g]=r[v=K+Q],r[v]=d,Q+=u;++q}else{for(g=i+y*o,J=S=0;J<l&&0===(W=r[g]-Z[S]);++J)S+=f,g+=c;if(0===W)for(;;){for(g=i+H*o,J=S=0;J<l&&0===(Y=r[g]-Z[S]);++J)S+=f,g+=c;if(0!==Y){for(g=i+H*o,J=S=0;J<l&&0===(Y=r[g]-X[S]);++J)S+=f,g+=c;if(Y<0){for($=o*y,K=o*q,b=o*H,Q=i,J=0;J<l;++J)m=b+Q,d=r[g=$+Q],r[g]=r[v=K+Q],r[v]=r[m],r[m]=d,Q+=u;++q,--H}else{for($=o*y,K=o*H,Q=i,J=0;J<l;++J)d=r[g=$+Q],r[g]=r[v=K+Q],r[v]=d,Q+=u;--H}break}if(--H<y)break}}}}ne(X),ne(Z),(H-q<=32?ee:e)(q,H,r,i,o,a,s,l,u,c,f)}}};var l={"uint32,1,0":function(l,u){return function(e){var t=e.data,n=0|e.offset,r=e.shape,i=e.stride,o=0|i[0],a=0|r[0],s=0|i[1],e=0|r[1],i=s,r=s;(a<=32?l:u)(0,a-1,t,n,o,s,a,e,i,r,1)}}};t.exports=function(e,t){var n=[t,e].join(","),r=l[n],i=(i=e,n=o(t),i=[t,i].join(","),i=a[i],n?i(n[0],n[1]):i());return r(i,(r=e,e=i,t=o(i=t),i=[i,r].join(","),i=s[i],1<r.length&&t?i(e,t[0],t[1]):i(e)))}},{"typedarray-pool":308}],258:[function(e,t,n){"use strict";var o=e("./lib/compile_sort.js"),a={};t.exports=function(e){var t=e.order,n=e.dtype,r=[t,n].join(":"),i=a[r];return i||(a[r]=i=o(t,n)),i(e),e}},{"./lib/compile_sort.js":257}],259:[function(e,t,n){var u=e("is-buffer"),c="undefined"!=typeof Float64Array;function i(e,t){return e[0]-t[0]}function r(){for(var e=this.stride,t=new Array(e.length),n=0;n<t.length;++n)t[n]=[Math.abs(e[n]),n];t.sort(i);var r=new Array(t.length);for(n=0;n<r.length;++n)r[n]=t[n][1];return r}var o={T:function(e){function t(e){this.data=e}var n=t.prototype;return n.dtype=e,n.index=function(){return-1},n.size=0,n.dimension=-1,n.shape=n.stride=n.order=[],n.lo=n.hi=n.transpose=n.step=function(){return new t(this.data)},n.get=n.set=function(){},n.pick=function(){return null},function(e){return new t(e)}},0:function(t,e){function i(e,t){this.data=e,this.offset=t}var n=i.prototype;return n.dtype=t,n.index=function(){return this.offset},n.dimension=0,n.size=1,n.shape=n.stride=n.order=[],n.lo=n.hi=n.transpose=n.step=function(){return new i(this.data,this.offset)},n.pick=function(){return e(this.data)},n.valueOf=n.get=function(){return"generic"===t?this.data.get(this.offset):this.data[this.offset]},n.set=function(e){return"generic"===t?this.data.set(this.offset,e):this.data[this.offset]=e},function(e,t,n,r){return new i(e,r)}},1:function(n,i,e){function o(e,t,n,r){this.data=e,this.shape=[t],this.stride=[n],this.offset=0|r}var t=o.prototype;return t.dtype=n,t.dimension=1,Object.defineProperty(t,"size",{get:function(){return this.shape[0]}}),t.order=[0],t.set=function(e,t){return"generic"===n?this.data.set(this.offset+this.stride[0]*e,t):this.data[this.offset+this.stride[0]*e]=t},t.get=function(e){return"generic"===n?this.data.get(this.offset+this.stride[0]*e):this.data[this.offset+this.stride[0]*e]},t.index=function(e){return this.offset+this.stride[0]*e},t.hi=function(e){return new o(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,this.stride[0],this.offset)},t.lo=function(e){var t=this.offset,n=this.shape[0],r=this.stride[0];return"number"==typeof e&&0<=e&&(t+=r*(e=0|e),n-=e),new o(this.data,n,r,t)},t.step=function(e){var t=this.shape[0],n=this.stride[0],r=this.offset,i=Math.ceil;return"number"==typeof e&&(t=(e=0|e)<0?(r+=n*(t-1),i(-t/e)):i(t/e),n*=e),new o(this.data,t,n,r)},t.transpose=function(e){var t=this.shape,n=this.stride;return new o(this.data,t[e=void 0===e?0:0|e],n[e],this.offset)},t.pick=function(e){var t=[],n=[],r=this.offset;return"number"==typeof e&&0<=e?r=r+this.stride[0]*e|0:(t.push(this.shape[0]),n.push(this.stride[0])),(0,i[t.length+1])(this.data,t,n,r)},function(e,t,n,r){return new o(e,t[0],n[0],r)}},2:function(r,o,e){function u(e,t,n,r,i,o){this.data=e,this.shape=[t,n],this.stride=[r,i],this.offset=0|o}var t=u.prototype;return t.dtype=r,t.dimension=2,Object.defineProperty(t,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(t,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),t.set=function(e,t,n){return"generic"===r?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*t,n):this.data[this.offset+this.stride[0]*e+this.stride[1]*t]=n},t.get=function(e,t){return"generic"===r?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*t):this.data[this.offset+this.stride[0]*e+this.stride[1]*t]},t.index=function(e,t){return this.offset+this.stride[0]*e+this.stride[1]*t},t.hi=function(e,t){return new u(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,"number"!=typeof t||t<0?this.shape[1]:0|t,this.stride[0],this.stride[1],this.offset)},t.lo=function(e,t){var n=this.offset,r=0,i=this.shape[0],o=this.shape[1],a=this.stride[0],s=this.stride[1];return"number"==typeof e&&0<=e&&(n+=a*(r=0|e),i-=r),"number"==typeof t&&0<=t&&(n+=s*(r=0|t),o-=r),new u(this.data,i,o,a,s,n)},t.step=function(e,t){var n=this.shape[0],r=this.shape[1],i=this.stride[0],o=this.stride[1],a=this.offset,s=0,l=Math.ceil;return"number"==typeof e&&(n=(s=0|e)<0?(a+=i*(n-1),l(-n/s)):l(n/s),i*=s),"number"==typeof t&&(r=(s=0|t)<0?(a+=o*(r-1),l(-r/s)):l(r/s),o*=s),new u(this.data,n,r,i,o,a)},t.transpose=function(e,t){var n=this.shape,r=this.stride;return new u(this.data,n[e=void 0===e?0:0|e],n[t=void 0===t?1:0|t],r[e],r[t],this.offset)},t.pick=function(e,t){var n=[],r=[],i=this.offset;return"number"==typeof e&&0<=e?i=i+this.stride[0]*e|0:(n.push(this.shape[0]),r.push(this.stride[0])),"number"==typeof t&&0<=t?i=i+this.stride[1]*t|0:(n.push(this.shape[1]),r.push(this.stride[1])),(0,o[n.length+1])(this.data,n,r,i)},function(e,t,n,r){return new u(e,t[0],t[1],n[0],n[1],r)}},3:function(i,a,e){function d(e,t,n,r,i,o,a,s){this.data=e,this.shape=[t,n,r],this.stride=[i,o,a],this.offset=0|s}var t=d.prototype;return t.dtype=i,t.dimension=3,Object.defineProperty(t,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(t,"order",{get:function(){var e=Math.abs(this.stride[0]),t=Math.abs(this.stride[1]),n=Math.abs(this.stride[2]);return t<e?n<t?[2,1,0]:n<e?[1,2,0]:[1,0,2]:n<e?[2,0,1]:t<n?[0,1,2]:[0,2,1]}}),t.set=function(e,t,n,r){return"generic"===i?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n,r):this.data[this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n]=r},t.get=function(e,t,n){return"generic"===i?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n):this.data[this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n]},t.index=function(e,t,n){return this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n},t.hi=function(e,t,n){return new d(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,"number"!=typeof t||t<0?this.shape[1]:0|t,"number"!=typeof n||n<0?this.shape[2]:0|n,this.stride[0],this.stride[1],this.stride[2],this.offset)},t.lo=function(e,t,n){var r=this.offset,i=0,o=this.shape[0],a=this.shape[1],s=this.shape[2],l=this.stride[0],u=this.stride[1],c=this.stride[2];return"number"==typeof e&&0<=e&&(r+=l*(i=0|e),o-=i),"number"==typeof t&&0<=t&&(r+=u*(i=0|t),a-=i),"number"==typeof n&&0<=n&&(r+=c*(i=0|n),s-=i),new d(this.data,o,a,s,l,u,c,r)},t.step=function(e,t,n){var r=this.shape[0],i=this.shape[1],o=this.shape[2],a=this.stride[0],s=this.stride[1],l=this.stride[2],u=this.offset,c=0,f=Math.ceil;return"number"==typeof e&&(r=(c=0|e)<0?(u+=a*(r-1),f(-r/c)):f(r/c),a*=c),"number"==typeof t&&(i=(c=0|t)<0?(u+=s*(i-1),f(-i/c)):f(i/c),s*=c),"number"==typeof n&&(o=(c=0|n)<0?(u+=l*(o-1),f(-o/c)):f(o/c),l*=c),new d(this.data,r,i,o,a,s,l,u)},t.transpose=function(e,t,n){var r=this.shape,i=this.stride;return new d(this.data,r[e=void 0===e?0:0|e],r[t=void 0===t?1:0|t],r[n=void 0===n?2:0|n],i[e],i[t],i[n],this.offset)},t.pick=function(e,t,n){var r=[],i=[],o=this.offset;return"number"==typeof e&&0<=e?o=o+this.stride[0]*e|0:(r.push(this.shape[0]),i.push(this.stride[0])),"number"==typeof t&&0<=t?o=o+this.stride[1]*t|0:(r.push(this.shape[1]),i.push(this.stride[1])),"number"==typeof n&&0<=n?o=o+this.stride[2]*n|0:(r.push(this.shape[2]),i.push(this.stride[2])),(0,a[r.length+1])(this.data,r,i,o)},function(e,t,n,r){return new d(e,t[0],t[1],t[2],n[0],n[1],n[2],r)}},4:function(o,s,e){function y(e,t,n,r,i,o,a,s,l,u){this.data=e,this.shape=[t,n,r,i],this.stride=[o,a,s,l],this.offset=0|u}var t=y.prototype;return t.dtype=o,t.dimension=4,Object.defineProperty(t,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(t,"order",{get:e}),t.set=function(e,t,n,r,i){return"generic"===o?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n+this.stride[3]*r,i):this.data[this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n+this.stride[3]*r]=i},t.get=function(e,t,n,r){return"generic"===o?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n+this.stride[3]*r):this.data[this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n+this.stride[3]*r]},t.index=function(e,t,n,r){return this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n+this.stride[3]*r},t.hi=function(e,t,n,r){return new y(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,"number"!=typeof t||t<0?this.shape[1]:0|t,"number"!=typeof n||n<0?this.shape[2]:0|n,"number"!=typeof r||r<0?this.shape[3]:0|r,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},t.lo=function(e,t,n,r){var i=this.offset,o=0,a=this.shape[0],s=this.shape[1],l=this.shape[2],u=this.shape[3],c=this.stride[0],f=this.stride[1],d=this.stride[2],h=this.stride[3];return"number"==typeof e&&0<=e&&(i+=c*(o=0|e),a-=o),"number"==typeof t&&0<=t&&(i+=f*(o=0|t),s-=o),"number"==typeof n&&0<=n&&(i+=d*(o=0|n),l-=o),"number"==typeof r&&0<=r&&(i+=h*(o=0|r),u-=o),new y(this.data,a,s,l,u,c,f,d,h,i)},t.step=function(e,t,n,r){var i=this.shape[0],o=this.shape[1],a=this.shape[2],s=this.shape[3],l=this.stride[0],u=this.stride[1],c=this.stride[2],f=this.stride[3],d=this.offset,h=0,p=Math.ceil;return"number"==typeof e&&(i=(h=0|e)<0?(d+=l*(i-1),p(-i/h)):p(i/h),l*=h),"number"==typeof t&&(o=(h=0|t)<0?(d+=u*(o-1),p(-o/h)):p(o/h),u*=h),"number"==typeof n&&(a=(h=0|n)<0?(d+=c*(a-1),p(-a/h)):p(a/h),c*=h),"number"==typeof r&&(s=(h=0|r)<0?(d+=f*(s-1),p(-s/h)):p(s/h),f*=h),new y(this.data,i,o,a,s,l,u,c,f,d)},t.transpose=function(e,t,n,r){var i=this.shape,o=this.stride;return new y(this.data,i[e=void 0===e?0:0|e],i[t=void 0===t?1:0|t],i[n=void 0===n?2:0|n],i[r=void 0===r?3:0|r],o[e],o[t],o[n],o[r],this.offset)},t.pick=function(e,t,n,r){var i=[],o=[],a=this.offset;return"number"==typeof e&&0<=e?a=a+this.stride[0]*e|0:(i.push(this.shape[0]),o.push(this.stride[0])),"number"==typeof t&&0<=t?a=a+this.stride[1]*t|0:(i.push(this.shape[1]),o.push(this.stride[1])),"number"==typeof n&&0<=n?a=a+this.stride[2]*n|0:(i.push(this.shape[2]),o.push(this.stride[2])),"number"==typeof r&&0<=r?a=a+this.stride[3]*r|0:(i.push(this.shape[3]),o.push(this.stride[3])),(0,s[i.length+1])(this.data,i,o,a)},function(e,t,n,r){return new y(e,t[0],t[1],t[2],t[3],n[0],n[1],n[2],n[3],r)}},5:function(a,l,e){function m(e,t,n,r,i,o,a,s,l,u,c,f){this.data=e,this.shape=[t,n,r,i,o],this.stride=[a,s,l,u,c],this.offset=0|f}var t=m.prototype;return t.dtype=a,t.dimension=5,Object.defineProperty(t,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(t,"order",{get:e}),t.set=function(e,t,n,r,i,o){return"generic"===a?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n+this.stride[3]*r+this.stride[4]*i,o):this.data[this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n+this.stride[3]*r+this.stride[4]*i]=o},t.get=function(e,t,n,r,i){return"generic"===a?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n+this.stride[3]*r+this.stride[4]*i):this.data[this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n+this.stride[3]*r+this.stride[4]*i]},t.index=function(e,t,n,r,i){return this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n+this.stride[3]*r+this.stride[4]*i},t.hi=function(e,t,n,r,i){return new m(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,"number"!=typeof t||t<0?this.shape[1]:0|t,"number"!=typeof n||n<0?this.shape[2]:0|n,"number"!=typeof r||r<0?this.shape[3]:0|r,"number"!=typeof i||i<0?this.shape[4]:0|i,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},t.lo=function(e,t,n,r,i){var o=this.offset,a=0,s=this.shape[0],l=this.shape[1],u=this.shape[2],c=this.shape[3],f=this.shape[4],d=this.stride[0],h=this.stride[1],p=this.stride[2],y=this.stride[3],g=this.stride[4];return"number"==typeof e&&0<=e&&(o+=d*(a=0|e),s-=a),"number"==typeof t&&0<=t&&(o+=h*(a=0|t),l-=a),"number"==typeof n&&0<=n&&(o+=p*(a=0|n),u-=a),"number"==typeof r&&0<=r&&(o+=y*(a=0|r),c-=a),"number"==typeof i&&0<=i&&(o+=g*(a=0|i),f-=a),new m(this.data,s,l,u,c,f,d,h,p,y,g,o)},t.step=function(e,t,n,r,i){var o=this.shape[0],a=this.shape[1],s=this.shape[2],l=this.shape[3],u=this.shape[4],c=this.stride[0],f=this.stride[1],d=this.stride[2],h=this.stride[3],p=this.stride[4],y=this.offset,g=0,v=Math.ceil;return"number"==typeof e&&(o=(g=0|e)<0?(y+=c*(o-1),v(-o/g)):v(o/g),c*=g),"number"==typeof t&&(a=(g=0|t)<0?(y+=f*(a-1),v(-a/g)):v(a/g),f*=g),"number"==typeof n&&(s=(g=0|n)<0?(y+=d*(s-1),v(-s/g)):v(s/g),d*=g),"number"==typeof r&&(l=(g=0|r)<0?(y+=h*(l-1),v(-l/g)):v(l/g),h*=g),"number"==typeof i&&(u=(g=0|i)<0?(y+=p*(u-1),v(-u/g)):v(u/g),p*=g),new m(this.data,o,a,s,l,u,c,f,d,h,p,y)},t.transpose=function(e,t,n,r,i){var o=this.shape,a=this.stride;return new m(this.data,o[e=void 0===e?0:0|e],o[t=void 0===t?1:0|t],o[n=void 0===n?2:0|n],o[r=void 0===r?3:0|r],o[i=void 0===i?4:0|i],a[e],a[t],a[n],a[r],a[i],this.offset)},t.pick=function(e,t,n,r,i){var o=[],a=[],s=this.offset;return"number"==typeof e&&0<=e?s=s+this.stride[0]*e|0:(o.push(this.shape[0]),a.push(this.stride[0])),"number"==typeof t&&0<=t?s=s+this.stride[1]*t|0:(o.push(this.shape[1]),a.push(this.stride[1])),"number"==typeof n&&0<=n?s=s+this.stride[2]*n|0:(o.push(this.shape[2]),a.push(this.stride[2])),"number"==typeof r&&0<=r?s=s+this.stride[3]*r|0:(o.push(this.shape[3]),a.push(this.stride[3])),"number"==typeof i&&0<=i?s=s+this.stride[4]*i|0:(o.push(this.shape[4]),a.push(this.stride[4])),(0,l[o.length+1])(this.data,o,a,s)},function(e,t,n,r){return new m(e,t[0],t[1],t[2],t[3],t[4],n[0],n[1],n[2],n[3],n[4],r)}}};function f(e,t){var n=-1===t?"T":String(t),n=o[n];return-1===t?n(e):0===t?n(e,d[e][0]):n(e,d[e],r)}var d={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};t.exports=function(e,t,n,r){if(void 0===e)return(0,d.array[0])([]);"number"==typeof e&&(e=[e]);var i=(t=void 0===t?[e.length]:t).length;if(void 0===n){n=new Array(i);for(var o=i-1,a=1;0<=o;--o)n[o]=a,a*=t[o]}if(void 0===r)for(o=r=0;o<i;++o)n[o]<0&&(r-=(t[o]-1)*n[o]);for(var s=function(e){if(u(e))return"buffer";if(c)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}(e),l=d[s];l.length<=i+1;)l.push(f(s,l.length-1));return(0,l[i+1])(e,t,n,r)}},{"is-buffer":237}],260:[function(e,t,n){"use strict";var i=e("double-bits"),o=Math.pow(2,-1074);t.exports=function(e,t){if(isNaN(e)||isNaN(t))return NaN;if(e===t)return e;if(0===e)return t<0?-o:o;var n=i.hi(e),r=i.lo(e);e<t==0<e?r===-1>>>0?(n+=1,r=0):r+=1:0===r?(r=-1>>>0,--n):--r;return i.pack(r,n)}},{"double-bits":64}],261:[function(e,t,n){n.vertexNormals=function(e,t,n){for(var r=t.length,i=new Array(r),o=void 0===n?1e-6:n,a=0;a<r;++a)i[a]=[0,0,0];for(a=0;a<e.length;++a)for(var s=e[a],l=s[s.length-1],u=s[0],c=0;c<s.length;++c){for(var f=l,l=u,u=s[(c+1)%s.length],d=t[f],h=t[l],p=t[u],y=new Array(3),g=0,v=new Array(3),m=0,b=0;b<3;++b)y[b]=d[b]-h[b],g+=y[b]*y[b],v[b]=p[b]-h[b],m+=v[b]*v[b];if(o<g*m)for(var x=i[l],_=1/Math.sqrt(g*m),b=0;b<3;++b){var w=(b+1)%3,M=(b+2)%3;x[b]+=_*(v[w]*y[M]-v[M]*y[w])}}for(a=0;a<r;++a){for(var x=i[a],j=0,b=0;b<3;++b)j+=x[b]*x[b];if(o<j)for(_=1/Math.sqrt(j),b=0;b<3;++b)x[b]*=_;else for(b=0;b<3;++b)x[b]=0}return i},n.faceNormals=function(e,t,n){for(var r=e.length,i=new Array(r),o=void 0===n?1e-6:n,a=0;a<r;++a){for(var s=e[a],l=new Array(3),u=0;u<3;++u)l[u]=t[s[u]];for(var c=new Array(3),f=new Array(3),u=0;u<3;++u)c[u]=l[1][u]-l[0][u],f[u]=l[2][u]-l[0][u];for(var d=new Array(3),h=0,u=0;u<3;++u){var p=(u+1)%3,y=(u+2)%3;d[u]=c[p]*f[y]-c[y]*f[p],h+=d[u]*d[u]}for(h=o<h?1/Math.sqrt(h):0,u=0;u<3;++u)d[u]*=h;i[a]=d}return i}},{}],262:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i,o,a,s,l,u){var c=t+o+u;{var f;0<f?(f=Math.sqrt(c+1),e[0]=.5*(a-l)/f,e[1]=.5*(s-r)/f,e[2]=.5*(n-o)/f,e[3]=.5*f):(u=Math.max(t,o,u),f=Math.sqrt(2*u-c+1),u<=t?(e[0]=.5*f,e[1]=.5*(i+n)/f,e[2]=.5*(s+r)/f,e[3]=.5*(a-l)/f):u<=o?(e[0]=.5*(n+i)/f,e[1]=.5*f,e[2]=.5*(l+a)/f,e[3]=.5*(s-r)/f):(e[0]=.5*(r+s)/f,e[1]=.5*(a+l)/f,e[2]=.5*f,e[3]=.5*(n-i)/f))}return e}},{}],263:[function(e,t,n){"use strict";t.exports=function(e){var t=(e=e||{}).center||[0,0,0],n=e.rotation||[0,0,0,1],r=e.radius||1;t=[].slice.call(t,0,3),c(n=[].slice.call(n,0,4),n);r=new i(n,t,Math.log(r));r.setDistanceLimits(e.zoomMin,e.zoomMax),("eye"in e||"up"in e)&&r.lookAt(0,e.eye,e.center,e.up);return r};var r=e("filtered-vector"),s=e("gl-mat4/lookAt"),l=e("gl-mat4/fromQuat"),a=e("gl-mat4/invert"),u=e("./lib/quatFromFrame");function v(e,t,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2))}function m(e,t,n,r){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2)+Math.pow(r,2))}function c(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],t=m(n,r,i,o);1e-6<t?(e[0]=n/t,e[1]=r/t,e[2]=i/t,e[3]=o/t):(e[0]=e[1]=e[2]=0,e[3]=1)}function i(e,t,n){this.radius=r([n]),this.center=r(t),this.rotation=r(e),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}e=i.prototype;e.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},e.recalcMatrix=function(e){this.radius.curve(e),this.center.curve(e),this.rotation.curve(e);var t=this.computedRotation;c(t,t);var n=this.computedMatrix;l(n,t);var r=this.computedCenter,i=this.computedEye,e=this.computedUp,t=Math.exp(this.computedRadius[0]);i[0]=r[0]+t*n[2],i[1]=r[1]+t*n[6],i[2]=r[2]+t*n[10],e[0]=n[1],e[1]=n[5],e[2]=n[9];for(var o=0;o<3;++o){for(var a=0,s=0;s<3;++s)a+=n[o+4*s]*i[s];n[12+o]=-a}},e.getMatrix=function(e,t){this.recalcMatrix(e);var n=this.computedMatrix;if(t){for(var r=0;r<16;++r)t[r]=n[r];return t}return n},e.idle=function(e){this.center.idle(e),this.radius.idle(e),this.rotation.idle(e)},e.flush=function(e){this.center.flush(e),this.radius.flush(e),this.rotation.flush(e)},e.pan=function(e,t,n,r){t=t||0,n=n||0,r=r||0,this.recalcMatrix(e);var i=this.computedMatrix,o=i[1],a=i[5],s=i[9],l=v(o,a,s),u=i[0],c=i[4],f=i[8],d=u*(o/=l)+c*(a/=l)+f*(s/=l),h=v(u-=o*d,c-=a*d,f-=s*d),p=i[2],l=i[6],d=i[10],i=p*o+l*a+d*s,h=p*(u/=h)+l*(c/=h)+d*(f/=h);v(p-=i*o+h*u,l-=i*a+h*c,d-=i*s+h*f);this.center.move(e,u*t+o*n,c*t+a*n,f*t+s*n);n=Math.exp(this.computedRadius[0]),n=Math.max(1e-4,n+r);this.radius.set(e,Math.log(n))},e.rotate=function(e,t,n,r){this.recalcMatrix(e);var i=this.computedMatrix,o=i[0],a=i[4],s=i[8],l=i[1],u=i[5],c=i[9],f=i[2],d=i[6],h=i[10],p=(t=t||0)*o+(n=n||0)*l,y=t*a+n*u,g=t*s+n*c,i=-(d*g-h*y),o=-(h*p-f*g),l=-(f*y-d*p),a=Math.sqrt(Math.max(0,1-Math.pow(i,2)-Math.pow(o,2)-Math.pow(l,2))),u=m(i,o,l,a);1e-6<u?(i/=u,o/=u,l/=u,a/=u):(i=o=l=0,a=1);s=this.computedRotation,n=s[0],c=s[1],g=s[2],y=s[3],p=n*a+y*i+c*l-g*o,u=c*a+y*o+g*i-n*l,s=g*a+y*l+n*o-c*i,g=y*a-n*i-c*o-g*l;r&&(i=f,o=d,l=h,i*=r=Math.sin(r)/v(i,o,l),o*=r,l*=r,g=g*(a=Math.cos(t))-(p=p*a+g*i+u*l-s*o)*i-(u=u*a+g*o+s*i-p*l)*o-(s=s*a+g*l+p*o-u*i)*l);l=m(p,u,s,g);1e-6<l?(p/=l,u/=l,s/=l,g/=l):(p=u=s=0,g=1),this.rotation.set(e,p,u,s,g)},e.lookAt=function(e,t,n,r){this.recalcMatrix(e),n=n||this.computedCenter,t=t||this.computedEye,r=r||this.computedUp;var i=this.computedMatrix;s(i,t,n,r);r=this.computedRotation;u(r,i[0],i[1],i[2],i[4],i[5],i[6],i[8],i[9],i[10]),c(r,r),this.rotation.set(e,r[0],r[1],r[2],r[3]);for(var o=0,a=0;a<3;++a)o+=Math.pow(n[a]-t[a],2);this.radius.set(e,.5*Math.log(Math.max(o,1e-6))),this.center.set(e,n[0],n[1],n[2])},e.translate=function(e,t,n,r){this.center.move(e,t||0,n||0,r||0)},e.setMatrix=function(e,t){var n=this.computedRotation;u(n,t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]),c(n,n),this.rotation.set(e,n[0],n[1],n[2],n[3]);var r=this.computedMatrix;a(r,t);var i,o=r[15];1e-6<Math.abs(o)?(i=r[12]/o,n=r[13]/o,t=r[14]/o,this.recalcMatrix(e),o=Math.exp(this.computedRadius[0]),this.center.set(e,i-r[2]*o,n-r[6]*o,t-r[10]*o)):this.center.idle(e),this.radius.idle(e)},e.setDistance=function(e,t){0<t&&this.radius.set(e,Math.log(t))},e.setDistanceLimits=function(e,t){e=0<e?Math.log(e):-1/0,t=0<t?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},e.getDistanceLimits=function(e){var t=this.radius.bounds;return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},e.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},e.fromJSON=function(e){var t=this.lastT(),n=e.center;n&&this.center.set(t,n[0],n[1],n[2]);n=e.rotation;n&&this.rotation.set(t,n[0],n[1],n[2],n[3]);n=e.distance;n&&0<n&&this.radius.set(t,Math.log(n)),this.setDistanceLimits(e.zoomMin,e.zoomMax)}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(e,t,n){"use strict";var r=e("repeat-string");t.exports=function(e,t,n){return r(n=void 0!==n?n+"":" ",t)+e}},{"repeat-string":277}],265:[function(e,t,n){t.exports=function(e,t){t=t||[0,""],e=String(e);var n=parseFloat(e,10);return t[0]=n,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},{}],266:[function(e,t,n){"use strict";t.exports=function(e,d){for(var t=0|d.length,n=e.length,h=[new Array(t),new Array(t)],r=0;r<t;++r)h[0][r]=[],h[1][r]=[];for(r=0;r<n;++r){var i=e[r];h[0][i[0]].push(i),h[1][i[1]].push(i)}for(var o=[],r=0;r<t;++r)h[0][r].length+h[1][r].length===0&&o.push([r]);function p(e,t){t=h[t][e[t]];t.splice(t.indexOf(e),1)}function u(e,t,n){for(var r,i,o=0;o<2;++o)if(0<h[o][t].length){r=h[o][t][0],i=o;break}for(var a=r[1^i],s=0;s<2;++s)for(var l=h[s][t],u=0;u<l.length;++u){var c=l[u],f=c[1^s];0<y(d[e],d[t],d[a],d[f])&&(r=c,a=f,i=s)}return n||r&&p(r,i),a}for(r=0;r<t;++r)for(var a=0;a<2;++a){for(var s=[];0<h[a][r].length;){h[0][r].length;var l=function(e,t){var n=h[t][e][0],r=[e];p(n,t);for(var i=n[1^t];;){for(;i!==e;)r.push(i),i=u(r[r.length-2],i,!1);if(h[0][e].length+h[1][e].length===0)break;var o=r[r.length-1],a=e,s=r[1],l=u(o,a,!0);if(y(d[o],d[a],d[s],d[l])<0)break;r.push(e),i=u(o,a)}return r}(r,a);!function(e){return e[1]===e[e.length-1]}(l)?(0<s.length&&o.push(s),s=l):s.push.apply(s,l)}0<s.length&&o.push(s)}return o};var y=e("compare-angle")},{"compare-angle":54}],267:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n=y(e,t.length),r=new Array(t.length),i=new Array(t.length),o=[],a=0;a<t.length;++a){var s=n[a].length;i[a]=s,r[a]=!0,s<=1&&o.push(a)}for(;0<o.length;){var l=o.pop();r[l]=!1;for(var u=n[l],a=0;a<u.length;++a){var c=u[a];0==--i[c]&&o.push(c)}}for(var f=new Array(t.length),d=[],a=0;a<t.length;++a)r[a]?(l=d.length,f[a]=l,d.push(t[a])):f[a]=-1;for(var h=[],a=0;a<e.length;++a){var p=e[a];r[p[0]]&&r[p[1]]&&h.push([f[p[0]],f[p[1]]])}return[h,d]};var y=e("edges-to-adjacency-list")},{"edges-to-adjacency-list":66}],268:[function(e,t,n){"use strict";t.exports=function(e,l){var t=H(e,l);e=t[0];for(var n=(l=t[1]).length,r=(e.length,D(e,l.length)),i=0;i<n;++i)if(r[i].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var o=N(e,l);for(var a=(o=o.filter(function(e){for(var t=e.length,n=[0],r=0;r<t;++r)var i=l[e[r]],o=l[e[(r+1)%t]],a=B(-i[0],i[1]),s=B(-i[0],o[1]),i=B(o[0],i[1]),o=B(o[0],o[1]),n=U(n,U(U(a,s),U(i,o)));return 0<n[n.length-1]})).length,s=new Array(a),u=new Array(a),i=0;i<a;++i){s[i]=i;var c=new Array(a),f=o[i].map(function(e){return l[e]}),d=F([f]),h=0;e:for(var p=0;p<a;++p)if(c[p]=0,i!==p){for(var y=(I=o[p]).length,g=0;g<y;++g){var v=d(l[I[g]]);if(0!==v){v<0&&(c[p]=1,h+=1);continue e}}c[p]=1,h+=1}u[i]=[h,i,c]}u.sort(function(e,t){return t[0]-e[0]});for(i=0;i<a;++i)for(var m=(c=u[i])[1],b=c[2],p=0;p<a;++p)b[p]&&(s[p]=m);for(var x=function(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=[];return t}(a),i=0;i<a;++i)x[i].push(s[i]),x[s[i]].push(i);for(var _={},w=V(n,!1),i=0;i<a;++i)for(y=(I=o[i]).length,p=0;p<y;++p){var M,j=I[p],k=I[(p+1)%y],O=Math.min(j,k)+":"+Math.max(j,k);O in _?(M=_[O],x[M].push(i),x[i].push(M),w[j]=w[k]=!0):_[O]=i}function A(e){for(var t=e.length,n=0;n<t;++n)if(!w[e[n]])return;return 1}for(var T=[],P=V(a,-1),i=0;i<a;++i)s[i]!==i||A(o[i])?P[i]=-1:(T.push(i),P[i]=0);var S,t=[];for(;0<T.length;){var E=T.pop(),C=x[E];q(C,function(e,t){return e-t});var L=C.length,R=P[E];0===R&&(I=o[E],S=[I]);for(i=0;i<L;++i){var I,z=C[i];0<=P[z]||(P[z]=1^R,T.push(z),0===R&&(A(I=o[z])||(I.reverse(),S.push(I))))}0===R&&t.push(S)}return t};var D=e("edges-to-adjacency-list"),N=e("planar-dual"),F=e("point-in-big-polygon"),B=e("two-product"),U=e("robust-sum"),q=e("uniq"),H=e("./lib/trim-leaves");function V(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=t;return n}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(e,t,n){t.exports=function(e){for(var t=e.length,n=[],r=[],i=0;i<t;++i)for(var o=e[i],a=o.length,s=a-1,l=0;l<a;s=l++){var u=o[s],c=o[l];(u[0]===c[0]?r:n).push([u,c])}if(0===n.length)return 0===r.length?g:function(t){return function(e){return t(e[0],e[1])?0:1}}(y(r));var f=h(n),f=function(a,s){return function(e){var t=p.le(s,e[0]);if(t<0)return 1;var n=a[t];if(!n){if(!(0<t&&s[t]===e[0]))return 1;n=a[t-1]}for(var r=1;n;){var i=n.key,o=d(e,i[0],i[1]);if(i[0][0]<i[1][0])if(o<0)n=n.left;else{if(!(0<o))return 0;r=-1,n=n.right}else if(0<o)n=n.left;else{if(!(o<0))return 0;r=1,n=n.right}}return r}}(f.slabs,f.coordinates);return 0===r.length?f:function(t,n){return function(e){return t(e[0],e[1])?0:n(e)}}(y(r),f)};var d=e("robust-orientation")[3],h=e("slab-decomposition"),c=e("interval-tree-1d"),p=e("binary-search-bounds");function f(){return!0}function y(e){for(var t={},n=0;n<e.length;++n){var r=e[n],i=r[0][0],o=r[0][1],r=r[1][1],r=[Math.min(o,r),Math.max(o,r)];i in t?t[i].push(r):t[i]=[r]}for(var a,s={},l=Object.keys(t),n=0;n<l.length;++n){var u=t[l[n]];s[l[n]]=c(u)}return a=s,function(e,t){e=a[e];return!!e&&!!e.queryPoint(t,f)}}function g(e){return 1}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(e,t,n){"use strict";var M=new Float64Array(4),j=new Float64Array(4),k=new Float64Array(4);t.exports=function(e,t,n,r,i){M.length<r.length&&(M=new Float64Array(r.length),j=new Float64Array(r.length),k=new Float64Array(r.length));for(var o=0;o<r.length;++o)M[o]=e[o]-r[o],j[o]=t[o]-e[o],k[o]=n[o]-e[o];for(var a=0,s=0,l=0,u=0,c=0,f=0,o=0;o<r.length;++o){var d=j[o],h=k[o],p=M[o];a+=d*d,s+=d*h,l+=h*h,u+=p*d,c+=p*h,f+=p*p}var y,g,v,m,b=Math.abs(a*l-s*s),x=s*c-l*u,_=s*u-a*c;m=x+_<=b?x<0?_<0&&u<0?(_=0,a<=-u?(x=1,a+2*u+f):u*(x=-u/a)+f):(x=0)<=c?(_=0,f):l<=-c?(_=1,l+2*c+f):c*(_=-c/l)+f:_<0?(_=0)<=u?(x=0,f):a<=-u?(x=1,a+2*u+f):u*(x=-u/a)+f:(x*=b=1/b)*(a*x+s*(_*=b)+2*u)+_*(s*x+l*_+2*c)+f:x<0?(y=s+u)<(g=l+c)?(m=a-2*s+l)<=(v=g-y)?(x=1,_=0,a+2*u+f):(x=v/m)*(a*x+s*(_=1-x)+2*u)+_*(s*x+l*_+2*c)+f:g<=(x=0)?(_=1,l+2*c+f):0<=c?(_=0,f):c*(_=-c/l)+f:_<0?(y=s+c)<(g=a+u)?(m=a-2*s+l)<=(v=g-y)?(_=1,x=0,l+2*c+f):(x=1-(_=v/m))*(a*x+s*_+2*u)+_*(s*x+l*_+2*c)+f:g<=(_=0)?(x=1,a+2*u+f):0<=u?(x=0,f):u*(x=-u/a)+f:(v=l+c-s-u)<=0?(x=0,_=1,l+2*c+f):(m=a-2*s+l)<=v?(x=1,_=0,a+2*u+f):(x=v/m)*(a*x+s*(_=1-x)+2*u)+_*(s*x+l*_+2*c)+f;for(var w=1-x-_,o=0;o<r.length;++o)i[o]=w*e[o]+x*t[o]+_*n[o];return m<0?0:m}},{}],271:[function(e,t,n){t.exports=e("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(e,t,n){"use strict";var o=e("big-rat/add");t.exports=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r[i]=o(e[i],t[i]);return r}},{"big-rat/add":15}],273:[function(e,t,n){"use strict";t.exports=function(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=r(e[n]);return t};var r=e("big-rat")},{"big-rat":18}],274:[function(e,t,n){"use strict";var a=e("big-rat"),s=e("big-rat/mul");t.exports=function(e,t){for(var n=a(t),r=e.length,i=new Array(r),o=0;o<r;++o)i[o]=s(e[o],n);return i}},{"big-rat":18,"big-rat/mul":27}],275:[function(e,t,n){"use strict";var o=e("big-rat/sub");t.exports=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r[i]=o(e[i],t[i]);return r}},{"big-rat/sub":29}],276:[function(e,t,n){"use strict";var s=e("compare-cell"),l=e("compare-oriented-cell"),u=e("cell-orientation");t.exports=function(e){e.sort(l);for(var t=e.length,n=0,r=0;r<t;++r){var i=e[r],o=u(i);if(0!==o){if(0<n){var a=e[n-1];if(0===s(i,a)&&u(a)!==o){--n;continue}}e[n++]=i}}return e.length=n,e}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(e,t,n){"use strict";var r,i="";t.exports=function(e,t){if("string"!=typeof e)throw new TypeError("expected a string");if(1===t)return e;if(2===t)return e+e;var n=e.length*t;if(r!==e||void 0===r)r=e,i="";else if(i.length>=n)return i.substr(0,n);for(;n>i.length&&1<t;)1&t&&(i+=e),t>>=1,e+=e;return i=(i+=e).substr(0,n)}},{}],278:[function(e,t,n){!function(e){!function(){t.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}.call(this)}.call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],279:[function(e,t,n){"use strict";t.exports=function(e){for(var t=e.length,n=e[e.length-1],r=t,i=t-2;0<=i;--i){var o=n,a=e[i];(l=a-((n=o+a)-o))&&(e[--r]=n,n=l)}for(var s=0,i=r;i<t;++i){var l,o=e[i];(l=(a=n)-((n=o+a)-o))&&(e[s++]=l)}return e[s++]=n,e.length=s,e}},{}],280:[function(e,t,n){"use strict";var r=e("two-product"),i=e("robust-sum"),o=e("robust-scale"),a=e("robust-compress");function s(t,e,n,r){return function(e){return r(t(n(e[0][0],e[1][1]),n(-e[0][1],e[1][0])))}}function l(t,n,r,i){return function(e){return i(t(n(t(r(e[1][1],e[2][2]),r(-e[1][2],e[2][1])),e[0][0]),t(n(t(r(e[1][0],e[2][2]),r(-e[1][2],e[2][0])),-e[0][1]),n(t(r(e[1][0],e[2][1]),r(-e[1][1],e[2][0])),e[0][2]))))}}function u(e){return(2===e?s:3===e?l:void 0)(i,o,r,a)}var c=[function(){return[0]},function(e){return[e[0][0]]}];!function(){for(;c.length<4;)c.push(u(c.length));t.exports=function(t,n,r,i,o,a){return function(e){switch(e.length){case 0:return t(e);case 1:return n(e);case 2:return r(e);case 3:return i(e)}return(o[e.length]||(o[e.length]=a(e.length)))(e)}}.apply(void 0,c.concat([c,u]));for(var e=0;e<c.length;++e)t.exports[e]=c[e]}()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(e,t,n){"use strict";var i=e("two-product"),o=e("robust-sum");t.exports=function(e,t){for(var n=i(e[0],t[0]),r=1;r<e.length;++r)n=o(n,i(e[r],t[r]));return n}},{"robust-sum":289,"two-product":306}],282:[function(e,t,n){"use strict";var r=e("two-product"),i=e("robust-sum"),o=e("robust-subtract"),a=e("robust-scale");function s(e){return(3===e?l:4===e?u:5===e?c:f)(i,o,r,a)}function l(s,l,u,c){return function(e,t,n){var r=u(e[0],e[0]),i=c(r,t[0]),o=c(r,n[0]),a=u(t[0],t[0]),r=c(a,e[0]),a=c(a,n[0]),n=u(n[0],n[0]),e=c(n,e[0]),t=c(n,t[0]),i=s(l(t,a),l(r,i)),o=l(e,o);return(o=l(i,o))[o.length-1]}}function u(g,v,m,b){return function(e,t,n,r){var i=g(m(e[0],e[0]),m(e[1],e[1])),o=b(i,t[0]),a=b(i,n[0]),s=b(i,r[0]),l=g(m(t[0],t[0]),m(t[1],t[1])),u=b(l,e[0]),c=b(l,n[0]),f=b(l,r[0]),d=g(m(n[0],n[0]),m(n[1],n[1])),h=b(d,e[0]),p=b(d,t[0]),y=b(d,r[0]),i=g(m(r[0],r[0]),m(r[1],r[1])),l=b(i,e[0]),d=b(i,t[0]),i=b(i,n[0]),f=g(g(b(v(i,y),t[1]),g(b(v(d,f),-n[1]),b(v(p,c),r[1]))),g(b(v(d,f),e[1]),g(b(v(l,s),-t[1]),b(v(u,o),r[1])))),n=g(g(b(v(i,y),e[1]),g(b(v(l,s),-n[1]),b(v(h,a),r[1]))),g(b(v(p,c),e[1]),g(b(v(h,a),-t[1]),b(v(u,o),n[1]))));return(n=v(f,n))[n.length-1]}}function c(k,O,A,T){return function(e,t,n,r,i){var o=k(A(e[0],e[0]),k(A(e[1],e[1]),A(e[2],e[2]))),a=T(o,t[0]),s=T(o,n[0]),l=T(o,r[0]),u=T(o,i[0]),c=k(A(t[0],t[0]),k(A(t[1],t[1]),A(t[2],t[2]))),f=T(c,e[0]),d=T(c,n[0]),h=T(c,r[0]),p=T(c,i[0]),y=k(A(n[0],n[0]),k(A(n[1],n[1]),A(n[2],n[2]))),g=T(y,e[0]),v=T(y,t[0]),m=T(y,r[0]),b=T(y,i[0]),x=k(A(r[0],r[0]),k(A(r[1],r[1]),A(r[2],r[2]))),_=T(x,e[0]),w=T(x,t[0]),M=T(x,n[0]),j=T(x,i[0]),o=k(A(i[0],i[0]),k(A(i[1],i[1]),A(i[2],i[2]))),c=T(o,e[0]),y=T(o,t[0]),x=T(o,n[0]),o=T(o,r[0]),h=k(k(k(T(k(T(O(o,j),n[1]),k(T(O(x,b),-r[1]),T(O(M,m),i[1]))),t[2]),k(T(k(T(O(o,j),t[1]),k(T(O(y,p),-r[1]),T(O(w,h),i[1]))),-n[2]),T(k(T(O(x,b),t[1]),k(T(O(y,p),-n[1]),T(O(v,d),i[1]))),r[2]))),k(T(k(T(O(M,m),t[1]),k(T(O(w,h),-n[1]),T(O(v,d),r[1]))),-i[2]),k(T(k(T(O(o,j),t[1]),k(T(O(y,p),-r[1]),T(O(w,h),i[1]))),e[2]),T(k(T(O(o,j),e[1]),k(T(O(c,u),-r[1]),T(O(_,l),i[1]))),-t[2])))),k(k(T(k(T(O(y,p),e[1]),k(T(O(c,u),-t[1]),T(O(f,a),i[1]))),r[2]),k(T(k(T(O(w,h),e[1]),k(T(O(_,l),-t[1]),T(O(f,a),r[1]))),-i[2]),T(k(T(O(M,m),t[1]),k(T(O(w,h),-n[1]),T(O(v,d),r[1]))),e[2]))),k(T(k(T(O(M,m),e[1]),k(T(O(_,l),-n[1]),T(O(g,s),r[1]))),-t[2]),k(T(k(T(O(w,h),e[1]),k(T(O(_,l),-t[1]),T(O(f,a),r[1]))),n[2]),T(k(T(O(v,d),e[1]),k(T(O(g,s),-t[1]),T(O(f,a),n[1]))),-r[2]))))),i=k(k(k(T(k(T(O(o,j),n[1]),k(T(O(x,b),-r[1]),T(O(M,m),i[1]))),e[2]),T(k(T(O(o,j),e[1]),k(T(O(c,u),-r[1]),T(O(_,l),i[1]))),-n[2])),k(T(k(T(O(x,b),e[1]),k(T(O(c,u),-n[1]),T(O(g,s),i[1]))),r[2]),T(k(T(O(M,m),e[1]),k(T(O(_,l),-n[1]),T(O(g,s),r[1]))),-i[2]))),k(k(T(k(T(O(x,b),t[1]),k(T(O(y,p),-n[1]),T(O(v,d),i[1]))),e[2]),T(k(T(O(x,b),e[1]),k(T(O(c,u),-n[1]),T(O(g,s),i[1]))),-t[2])),k(T(k(T(O(y,p),e[1]),k(T(O(c,u),-t[1]),T(O(f,a),i[1]))),n[2]),T(k(T(O(v,d),e[1]),k(T(O(g,s),-t[1]),T(O(f,a),n[1]))),-i[2]))));return(i=O(h,i))[i.length-1]}}function f(D,N,F,B){return function(e,t,n,r,i,o){var a=D(D(F(e[0],e[0]),F(e[1],e[1])),D(F(e[2],e[2]),F(e[3],e[3]))),s=B(a,t[0]),l=B(a,n[0]),u=B(a,r[0]),c=B(a,i[0]),f=B(a,o[0]),d=D(D(F(t[0],t[0]),F(t[1],t[1])),D(F(t[2],t[2]),F(t[3],t[3]))),h=B(d,e[0]),p=B(d,n[0]),y=B(d,r[0]),g=B(d,i[0]),v=B(d,o[0]),m=D(D(F(n[0],n[0]),F(n[1],n[1])),D(F(n[2],n[2]),F(n[3],n[3]))),b=B(m,e[0]),x=B(m,t[0]),_=B(m,r[0]),w=B(m,i[0]),M=B(m,o[0]),j=D(D(F(r[0],r[0]),F(r[1],r[1])),D(F(r[2],r[2]),F(r[3],r[3]))),k=B(j,e[0]),O=B(j,t[0]),A=B(j,n[0]),T=B(j,i[0]),P=B(j,o[0]),S=D(D(F(i[0],i[0]),F(i[1],i[1])),D(F(i[2],i[2]),F(i[3],i[3]))),E=B(S,e[0]),C=B(S,t[0]),L=B(S,n[0]),R=B(S,r[0]),I=B(S,o[0]),z=D(D(F(o[0],o[0]),F(o[1],o[1])),D(F(o[2],o[2]),F(o[3],o[3]))),a=B(z,e[0]),d=B(z,t[0]),m=B(z,n[0]),j=B(z,r[0]),S=B(z,i[0]),z=D(D(D(B(D(D(B(D(B(N(S,I),r[1]),D(B(N(j,P),-i[1]),B(N(R,T),o[1]))),n[2]),B(D(B(N(S,I),n[1]),D(B(N(m,M),-i[1]),B(N(L,w),o[1]))),-r[2])),D(B(D(B(N(j,P),n[1]),D(B(N(m,M),-r[1]),B(N(A,_),o[1]))),i[2]),B(D(B(N(R,T),n[1]),D(B(N(L,w),-r[1]),B(N(A,_),i[1]))),-o[2]))),t[3]),D(B(D(D(B(D(B(N(S,I),r[1]),D(B(N(j,P),-i[1]),B(N(R,T),o[1]))),t[2]),B(D(B(N(S,I),t[1]),D(B(N(d,v),-i[1]),B(N(C,g),o[1]))),-r[2])),D(B(D(B(N(j,P),t[1]),D(B(N(d,v),-r[1]),B(N(O,y),o[1]))),i[2]),B(D(B(N(R,T),t[1]),D(B(N(C,g),-r[1]),B(N(O,y),i[1]))),-o[2]))),-n[3]),B(D(D(B(D(B(N(S,I),n[1]),D(B(N(m,M),-i[1]),B(N(L,w),o[1]))),t[2]),B(D(B(N(S,I),t[1]),D(B(N(d,v),-i[1]),B(N(C,g),o[1]))),-n[2])),D(B(D(B(N(m,M),t[1]),D(B(N(d,v),-n[1]),B(N(x,p),o[1]))),i[2]),B(D(B(N(L,w),t[1]),D(B(N(C,g),-n[1]),B(N(x,p),i[1]))),-o[2]))),r[3]))),D(D(B(D(D(B(D(B(N(j,P),n[1]),D(B(N(m,M),-r[1]),B(N(A,_),o[1]))),t[2]),B(D(B(N(j,P),t[1]),D(B(N(d,v),-r[1]),B(N(O,y),o[1]))),-n[2])),D(B(D(B(N(m,M),t[1]),D(B(N(d,v),-n[1]),B(N(x,p),o[1]))),r[2]),B(D(B(N(A,_),t[1]),D(B(N(O,y),-n[1]),B(N(x,p),r[1]))),-o[2]))),-i[3]),B(D(D(B(D(B(N(R,T),n[1]),D(B(N(L,w),-r[1]),B(N(A,_),i[1]))),t[2]),B(D(B(N(R,T),t[1]),D(B(N(C,g),-r[1]),B(N(O,y),i[1]))),-n[2])),D(B(D(B(N(L,w),t[1]),D(B(N(C,g),-n[1]),B(N(x,p),i[1]))),r[2]),B(D(B(N(A,_),t[1]),D(B(N(O,y),-n[1]),B(N(x,p),r[1]))),-i[2]))),o[3])),D(B(D(D(B(D(B(N(S,I),r[1]),D(B(N(j,P),-i[1]),B(N(R,T),o[1]))),t[2]),B(D(B(N(S,I),t[1]),D(B(N(d,v),-i[1]),B(N(C,g),o[1]))),-r[2])),D(B(D(B(N(j,P),t[1]),D(B(N(d,v),-r[1]),B(N(O,y),o[1]))),i[2]),B(D(B(N(R,T),t[1]),D(B(N(C,g),-r[1]),B(N(O,y),i[1]))),-o[2]))),e[3]),B(D(D(B(D(B(N(S,I),r[1]),D(B(N(j,P),-i[1]),B(N(R,T),o[1]))),e[2]),B(D(B(N(S,I),e[1]),D(B(N(a,f),-i[1]),B(N(E,c),o[1]))),-r[2])),D(B(D(B(N(j,P),e[1]),D(B(N(a,f),-r[1]),B(N(k,u),o[1]))),i[2]),B(D(B(N(R,T),e[1]),D(B(N(E,c),-r[1]),B(N(k,u),i[1]))),-o[2]))),-t[3])))),D(D(D(B(D(D(B(D(B(N(S,I),t[1]),D(B(N(d,v),-i[1]),B(N(C,g),o[1]))),e[2]),B(D(B(N(S,I),e[1]),D(B(N(a,f),-i[1]),B(N(E,c),o[1]))),-t[2])),D(B(D(B(N(d,v),e[1]),D(B(N(a,f),-t[1]),B(N(h,s),o[1]))),i[2]),B(D(B(N(C,g),e[1]),D(B(N(E,c),-t[1]),B(N(h,s),i[1]))),-o[2]))),r[3]),B(D(D(B(D(B(N(j,P),t[1]),D(B(N(d,v),-r[1]),B(N(O,y),o[1]))),e[2]),B(D(B(N(j,P),e[1]),D(B(N(a,f),-r[1]),B(N(k,u),o[1]))),-t[2])),D(B(D(B(N(d,v),e[1]),D(B(N(a,f),-t[1]),B(N(h,s),o[1]))),r[2]),B(D(B(N(O,y),e[1]),D(B(N(k,u),-t[1]),B(N(h,s),r[1]))),-o[2]))),-i[3])),D(B(D(D(B(D(B(N(R,T),t[1]),D(B(N(C,g),-r[1]),B(N(O,y),i[1]))),e[2]),B(D(B(N(R,T),e[1]),D(B(N(E,c),-r[1]),B(N(k,u),i[1]))),-t[2])),D(B(D(B(N(C,g),e[1]),D(B(N(E,c),-t[1]),B(N(h,s),i[1]))),r[2]),B(D(B(N(O,y),e[1]),D(B(N(k,u),-t[1]),B(N(h,s),r[1]))),-i[2]))),o[3]),B(D(D(B(D(B(N(j,P),n[1]),D(B(N(m,M),-r[1]),B(N(A,_),o[1]))),t[2]),B(D(B(N(j,P),t[1]),D(B(N(d,v),-r[1]),B(N(O,y),o[1]))),-n[2])),D(B(D(B(N(m,M),t[1]),D(B(N(d,v),-n[1]),B(N(x,p),o[1]))),r[2]),B(D(B(N(A,_),t[1]),D(B(N(O,y),-n[1]),B(N(x,p),r[1]))),-o[2]))),e[3]))),D(D(B(D(D(B(D(B(N(j,P),n[1]),D(B(N(m,M),-r[1]),B(N(A,_),o[1]))),e[2]),B(D(B(N(j,P),e[1]),D(B(N(a,f),-r[1]),B(N(k,u),o[1]))),-n[2])),D(B(D(B(N(m,M),e[1]),D(B(N(a,f),-n[1]),B(N(b,l),o[1]))),r[2]),B(D(B(N(A,_),e[1]),D(B(N(k,u),-n[1]),B(N(b,l),r[1]))),-o[2]))),-t[3]),B(D(D(B(D(B(N(j,P),t[1]),D(B(N(d,v),-r[1]),B(N(O,y),o[1]))),e[2]),B(D(B(N(j,P),e[1]),D(B(N(a,f),-r[1]),B(N(k,u),o[1]))),-t[2])),D(B(D(B(N(d,v),e[1]),D(B(N(a,f),-t[1]),B(N(h,s),o[1]))),r[2]),B(D(B(N(O,y),e[1]),D(B(N(k,u),-t[1]),B(N(h,s),r[1]))),-o[2]))),n[3])),D(B(D(D(B(D(B(N(m,M),t[1]),D(B(N(d,v),-n[1]),B(N(x,p),o[1]))),e[2]),B(D(B(N(m,M),e[1]),D(B(N(a,f),-n[1]),B(N(b,l),o[1]))),-t[2])),D(B(D(B(N(d,v),e[1]),D(B(N(a,f),-t[1]),B(N(h,s),o[1]))),n[2]),B(D(B(N(x,p),e[1]),D(B(N(b,l),-t[1]),B(N(h,s),n[1]))),-o[2]))),-r[3]),B(D(D(B(D(B(N(A,_),t[1]),D(B(N(O,y),-n[1]),B(N(x,p),r[1]))),e[2]),B(D(B(N(A,_),e[1]),D(B(N(k,u),-n[1]),B(N(b,l),r[1]))),-t[2])),D(B(D(B(N(O,y),e[1]),D(B(N(k,u),-t[1]),B(N(h,s),r[1]))),n[2]),B(D(B(N(x,p),e[1]),D(B(N(b,l),-t[1]),B(N(h,s),n[1]))),-r[2]))),o[3]))))),i=D(D(D(B(D(D(B(D(B(N(S,I),r[1]),D(B(N(j,P),-i[1]),B(N(R,T),o[1]))),n[2]),B(D(B(N(S,I),n[1]),D(B(N(m,M),-i[1]),B(N(L,w),o[1]))),-r[2])),D(B(D(B(N(j,P),n[1]),D(B(N(m,M),-r[1]),B(N(A,_),o[1]))),i[2]),B(D(B(N(R,T),n[1]),D(B(N(L,w),-r[1]),B(N(A,_),i[1]))),-o[2]))),e[3]),D(B(D(D(B(D(B(N(S,I),r[1]),D(B(N(j,P),-i[1]),B(N(R,T),o[1]))),e[2]),B(D(B(N(S,I),e[1]),D(B(N(a,f),-i[1]),B(N(E,c),o[1]))),-r[2])),D(B(D(B(N(j,P),e[1]),D(B(N(a,f),-r[1]),B(N(k,u),o[1]))),i[2]),B(D(B(N(R,T),e[1]),D(B(N(E,c),-r[1]),B(N(k,u),i[1]))),-o[2]))),-n[3]),B(D(D(B(D(B(N(S,I),n[1]),D(B(N(m,M),-i[1]),B(N(L,w),o[1]))),e[2]),B(D(B(N(S,I),e[1]),D(B(N(a,f),-i[1]),B(N(E,c),o[1]))),-n[2])),D(B(D(B(N(m,M),e[1]),D(B(N(a,f),-n[1]),B(N(b,l),o[1]))),i[2]),B(D(B(N(L,w),e[1]),D(B(N(E,c),-n[1]),B(N(b,l),i[1]))),-o[2]))),r[3]))),D(D(B(D(D(B(D(B(N(j,P),n[1]),D(B(N(m,M),-r[1]),B(N(A,_),o[1]))),e[2]),B(D(B(N(j,P),e[1]),D(B(N(a,f),-r[1]),B(N(k,u),o[1]))),-n[2])),D(B(D(B(N(m,M),e[1]),D(B(N(a,f),-n[1]),B(N(b,l),o[1]))),r[2]),B(D(B(N(A,_),e[1]),D(B(N(k,u),-n[1]),B(N(b,l),r[1]))),-o[2]))),-i[3]),B(D(D(B(D(B(N(R,T),n[1]),D(B(N(L,w),-r[1]),B(N(A,_),i[1]))),e[2]),B(D(B(N(R,T),e[1]),D(B(N(E,c),-r[1]),B(N(k,u),i[1]))),-n[2])),D(B(D(B(N(L,w),e[1]),D(B(N(E,c),-n[1]),B(N(b,l),i[1]))),r[2]),B(D(B(N(A,_),e[1]),D(B(N(k,u),-n[1]),B(N(b,l),r[1]))),-i[2]))),o[3])),D(B(D(D(B(D(B(N(S,I),n[1]),D(B(N(m,M),-i[1]),B(N(L,w),o[1]))),t[2]),B(D(B(N(S,I),t[1]),D(B(N(d,v),-i[1]),B(N(C,g),o[1]))),-n[2])),D(B(D(B(N(m,M),t[1]),D(B(N(d,v),-n[1]),B(N(x,p),o[1]))),i[2]),B(D(B(N(L,w),t[1]),D(B(N(C,g),-n[1]),B(N(x,p),i[1]))),-o[2]))),e[3]),B(D(D(B(D(B(N(S,I),n[1]),D(B(N(m,M),-i[1]),B(N(L,w),o[1]))),e[2]),B(D(B(N(S,I),e[1]),D(B(N(a,f),-i[1]),B(N(E,c),o[1]))),-n[2])),D(B(D(B(N(m,M),e[1]),D(B(N(a,f),-n[1]),B(N(b,l),o[1]))),i[2]),B(D(B(N(L,w),e[1]),D(B(N(E,c),-n[1]),B(N(b,l),i[1]))),-o[2]))),-t[3])))),D(D(D(B(D(D(B(D(B(N(S,I),t[1]),D(B(N(d,v),-i[1]),B(N(C,g),o[1]))),e[2]),B(D(B(N(S,I),e[1]),D(B(N(a,f),-i[1]),B(N(E,c),o[1]))),-t[2])),D(B(D(B(N(d,v),e[1]),D(B(N(a,f),-t[1]),B(N(h,s),o[1]))),i[2]),B(D(B(N(C,g),e[1]),D(B(N(E,c),-t[1]),B(N(h,s),i[1]))),-o[2]))),n[3]),B(D(D(B(D(B(N(m,M),t[1]),D(B(N(d,v),-n[1]),B(N(x,p),o[1]))),e[2]),B(D(B(N(m,M),e[1]),D(B(N(a,f),-n[1]),B(N(b,l),o[1]))),-t[2])),D(B(D(B(N(d,v),e[1]),D(B(N(a,f),-t[1]),B(N(h,s),o[1]))),n[2]),B(D(B(N(x,p),e[1]),D(B(N(b,l),-t[1]),B(N(h,s),n[1]))),-o[2]))),-i[3])),D(B(D(D(B(D(B(N(L,w),t[1]),D(B(N(C,g),-n[1]),B(N(x,p),i[1]))),e[2]),B(D(B(N(L,w),e[1]),D(B(N(E,c),-n[1]),B(N(b,l),i[1]))),-t[2])),D(B(D(B(N(C,g),e[1]),D(B(N(E,c),-t[1]),B(N(h,s),i[1]))),n[2]),B(D(B(N(x,p),e[1]),D(B(N(b,l),-t[1]),B(N(h,s),n[1]))),-i[2]))),o[3]),B(D(D(B(D(B(N(R,T),n[1]),D(B(N(L,w),-r[1]),B(N(A,_),i[1]))),t[2]),B(D(B(N(R,T),t[1]),D(B(N(C,g),-r[1]),B(N(O,y),i[1]))),-n[2])),D(B(D(B(N(L,w),t[1]),D(B(N(C,g),-n[1]),B(N(x,p),i[1]))),r[2]),B(D(B(N(A,_),t[1]),D(B(N(O,y),-n[1]),B(N(x,p),r[1]))),-i[2]))),e[3]))),D(D(B(D(D(B(D(B(N(R,T),n[1]),D(B(N(L,w),-r[1]),B(N(A,_),i[1]))),e[2]),B(D(B(N(R,T),e[1]),D(B(N(E,c),-r[1]),B(N(k,u),i[1]))),-n[2])),D(B(D(B(N(L,w),e[1]),D(B(N(E,c),-n[1]),B(N(b,l),i[1]))),r[2]),B(D(B(N(A,_),e[1]),D(B(N(k,u),-n[1]),B(N(b,l),r[1]))),-i[2]))),-t[3]),B(D(D(B(D(B(N(R,T),t[1]),D(B(N(C,g),-r[1]),B(N(O,y),i[1]))),e[2]),B(D(B(N(R,T),e[1]),D(B(N(E,c),-r[1]),B(N(k,u),i[1]))),-t[2])),D(B(D(B(N(C,g),e[1]),D(B(N(E,c),-t[1]),B(N(h,s),i[1]))),r[2]),B(D(B(N(O,y),e[1]),D(B(N(k,u),-t[1]),B(N(h,s),r[1]))),-i[2]))),n[3])),D(B(D(D(B(D(B(N(L,w),t[1]),D(B(N(C,g),-n[1]),B(N(x,p),i[1]))),e[2]),B(D(B(N(L,w),e[1]),D(B(N(E,c),-n[1]),B(N(b,l),i[1]))),-t[2])),D(B(D(B(N(C,g),e[1]),D(B(N(E,c),-t[1]),B(N(h,s),i[1]))),n[2]),B(D(B(N(x,p),e[1]),D(B(N(b,l),-t[1]),B(N(h,s),n[1]))),-i[2]))),-r[3]),B(D(D(B(D(B(N(A,_),t[1]),D(B(N(O,y),-n[1]),B(N(x,p),r[1]))),e[2]),B(D(B(N(A,_),e[1]),D(B(N(k,u),-n[1]),B(N(b,l),r[1]))),-t[2])),D(B(D(B(N(O,y),e[1]),D(B(N(k,u),-t[1]),B(N(h,s),r[1]))),n[2]),B(D(B(N(x,p),e[1]),D(B(N(b,l),-t[1]),B(N(h,s),n[1]))),-r[2]))),i[3])))));return(i=N(z,i))[i.length-1]}}var d=[function(){return 0},function(){return 0},function(){return 0}];function h(l,e,t,u,c,f,d,h){return function(e,t,n,r,i,o){switch(arguments.length){case 0:case 1:return 0;case 2:return u(e,t);case 3:return c(e,t,n);case 4:return f(e,t,n,r);case 5:return d(e,t,n,r,i);case 6:return h(e,t,n,r,i,o)}for(var a=new Array(arguments.length),s=0;s<arguments.length;++s)a[s]=arguments[s];return l(a)}}!function(){for(;d.length<=6;)d.push(s(d.length));t.exports=h.apply(void 0,[function(e){return(d[e.length]||(d[e.length]=s(e.length))).apply(void 0,e)}].concat(d));for(var e=0;e<=6;++e)t.exports[e]=d[e]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(e,t,n){"use strict";var r=e("robust-determinant"),i=3;function o(e){var t=2===e?a:s;return t(e<i?r[e]:r)}function a(n){return function(e,t){return[n([[+t[0],+e[0][1]],[+t[1],+e[1][1]]]),n([[+e[0][0],+t[0]],[+e[1][0],+t[1]]]),n(e)]}}function s(n){return function(e,t){return[n([[+t[0],+e[0][1],+e[0][2]],[+t[1],+e[1][1],+e[1][2]],[+t[2],+e[2][1],+e[2][2]]]),n([[+e[0][0],+t[0],+e[0][2]],[+e[1][0],+t[1],+e[1][2]],[+e[2][0],+t[2],+e[2][2]]]),n([[+e[0][0],+e[0][1],+t[0]],[+e[1][0],+e[1][1],+t[1]],[+e[2][0],+e[2][1],+t[2]]]),n(e)]}}var l=[function(){return[[0]]},function(e,t){return[[t[0]],[e[0][0]]]}];!function(){for(;l.length<=i;)l.push(o(l.length));t.exports=function(n,r,i,o,a,s){return function(e,t){switch(e.length){case 0:return n(e,t);case 1:return r(e,t);case 2:return i(e,t);case 3:return o(e,t)}return(a[e.length]||(a[e.length]=s(e.length)))(e,t)}}.apply(void 0,l.concat([l,o]));for(var e=0;e<i;++e)t.exports[e]=l[e]}()},{"robust-determinant":280}],284:[function(e,t,n){"use strict";var r=e("two-product"),i=e("robust-sum"),o=e("robust-scale"),a=e("robust-subtract");function s(r,i,e,o){return function(e,t,n){t=r(r(i(t[1],n[0]),i(-n[1],t[0])),r(i(e[1],t[0]),i(-t[1],e[0]))),e=r(i(e[1],n[0]),i(-n[1],e[0])),e=o(t,e);return e[e.length-1]}}function l(o,a,s,l){return function(e,t,n,r){var i=o(o(s(o(a(n[1],r[0]),a(-r[1],n[0])),t[2]),o(s(o(a(t[1],r[0]),a(-r[1],t[0])),-n[2]),s(o(a(t[1],n[0]),a(-n[1],t[0])),r[2]))),o(s(o(a(t[1],r[0]),a(-r[1],t[0])),e[2]),o(s(o(a(e[1],r[0]),a(-r[1],e[0])),-t[2]),s(o(a(e[1],t[0]),a(-t[1],e[0])),r[2])))),n=o(o(s(o(a(n[1],r[0]),a(-r[1],n[0])),e[2]),o(s(o(a(e[1],r[0]),a(-r[1],e[0])),-n[2]),s(o(a(e[1],n[0]),a(-n[1],e[0])),r[2]))),o(s(o(a(t[1],n[0]),a(-n[1],t[0])),e[2]),o(s(o(a(e[1],n[0]),a(-n[1],e[0])),-t[2]),s(o(a(e[1],t[0]),a(-t[1],e[0])),n[2])))),n=l(i,n);return n[n.length-1]}}function u(a,s,l,u){return function(e,t,n,r,i){var o=a(a(a(l(a(l(a(s(r[1],i[0]),s(-i[1],r[0])),n[2]),a(l(a(s(n[1],i[0]),s(-i[1],n[0])),-r[2]),l(a(s(n[1],r[0]),s(-r[1],n[0])),i[2]))),t[3]),a(l(a(l(a(s(r[1],i[0]),s(-i[1],r[0])),t[2]),a(l(a(s(t[1],i[0]),s(-i[1],t[0])),-r[2]),l(a(s(t[1],r[0]),s(-r[1],t[0])),i[2]))),-n[3]),l(a(l(a(s(n[1],i[0]),s(-i[1],n[0])),t[2]),a(l(a(s(t[1],i[0]),s(-i[1],t[0])),-n[2]),l(a(s(t[1],n[0]),s(-n[1],t[0])),i[2]))),r[3]))),a(l(a(l(a(s(n[1],r[0]),s(-r[1],n[0])),t[2]),a(l(a(s(t[1],r[0]),s(-r[1],t[0])),-n[2]),l(a(s(t[1],n[0]),s(-n[1],t[0])),r[2]))),-i[3]),a(l(a(l(a(s(r[1],i[0]),s(-i[1],r[0])),t[2]),a(l(a(s(t[1],i[0]),s(-i[1],t[0])),-r[2]),l(a(s(t[1],r[0]),s(-r[1],t[0])),i[2]))),e[3]),l(a(l(a(s(r[1],i[0]),s(-i[1],r[0])),e[2]),a(l(a(s(e[1],i[0]),s(-i[1],e[0])),-r[2]),l(a(s(e[1],r[0]),s(-r[1],e[0])),i[2]))),-t[3])))),a(a(l(a(l(a(s(t[1],i[0]),s(-i[1],t[0])),e[2]),a(l(a(s(e[1],i[0]),s(-i[1],e[0])),-t[2]),l(a(s(e[1],t[0]),s(-t[1],e[0])),i[2]))),r[3]),a(l(a(l(a(s(t[1],r[0]),s(-r[1],t[0])),e[2]),a(l(a(s(e[1],r[0]),s(-r[1],e[0])),-t[2]),l(a(s(e[1],t[0]),s(-t[1],e[0])),r[2]))),-i[3]),l(a(l(a(s(n[1],r[0]),s(-r[1],n[0])),t[2]),a(l(a(s(t[1],r[0]),s(-r[1],t[0])),-n[2]),l(a(s(t[1],n[0]),s(-n[1],t[0])),r[2]))),e[3]))),a(l(a(l(a(s(n[1],r[0]),s(-r[1],n[0])),e[2]),a(l(a(s(e[1],r[0]),s(-r[1],e[0])),-n[2]),l(a(s(e[1],n[0]),s(-n[1],e[0])),r[2]))),-t[3]),a(l(a(l(a(s(t[1],r[0]),s(-r[1],t[0])),e[2]),a(l(a(s(e[1],r[0]),s(-r[1],e[0])),-t[2]),l(a(s(e[1],t[0]),s(-t[1],e[0])),r[2]))),n[3]),l(a(l(a(s(t[1],n[0]),s(-n[1],t[0])),e[2]),a(l(a(s(e[1],n[0]),s(-n[1],e[0])),-t[2]),l(a(s(e[1],t[0]),s(-t[1],e[0])),n[2]))),-r[3]))))),i=a(a(a(l(a(l(a(s(r[1],i[0]),s(-i[1],r[0])),n[2]),a(l(a(s(n[1],i[0]),s(-i[1],n[0])),-r[2]),l(a(s(n[1],r[0]),s(-r[1],n[0])),i[2]))),e[3]),l(a(l(a(s(r[1],i[0]),s(-i[1],r[0])),e[2]),a(l(a(s(e[1],i[0]),s(-i[1],e[0])),-r[2]),l(a(s(e[1],r[0]),s(-r[1],e[0])),i[2]))),-n[3])),a(l(a(l(a(s(n[1],i[0]),s(-i[1],n[0])),e[2]),a(l(a(s(e[1],i[0]),s(-i[1],e[0])),-n[2]),l(a(s(e[1],n[0]),s(-n[1],e[0])),i[2]))),r[3]),l(a(l(a(s(n[1],r[0]),s(-r[1],n[0])),e[2]),a(l(a(s(e[1],r[0]),s(-r[1],e[0])),-n[2]),l(a(s(e[1],n[0]),s(-n[1],e[0])),r[2]))),-i[3]))),a(a(l(a(l(a(s(n[1],i[0]),s(-i[1],n[0])),t[2]),a(l(a(s(t[1],i[0]),s(-i[1],t[0])),-n[2]),l(a(s(t[1],n[0]),s(-n[1],t[0])),i[2]))),e[3]),l(a(l(a(s(n[1],i[0]),s(-i[1],n[0])),e[2]),a(l(a(s(e[1],i[0]),s(-i[1],e[0])),-n[2]),l(a(s(e[1],n[0]),s(-n[1],e[0])),i[2]))),-t[3])),a(l(a(l(a(s(t[1],i[0]),s(-i[1],t[0])),e[2]),a(l(a(s(e[1],i[0]),s(-i[1],e[0])),-t[2]),l(a(s(e[1],t[0]),s(-t[1],e[0])),i[2]))),n[3]),l(a(l(a(s(t[1],n[0]),s(-n[1],t[0])),e[2]),a(l(a(s(e[1],n[0]),s(-n[1],e[0])),-t[2]),l(a(s(e[1],t[0]),s(-t[1],e[0])),n[2]))),-i[3])))),i=u(o,i);return i[i.length-1]}}function c(e){return(3===e?s:4===e?l:u)(i,r,o,a)}var f=c(3),y=c(4),d=[function(){return 0},function(){return 0},function(e,t){return t[0]-e[0]},function(e,t,n){var r=(e[1]-n[1])*(t[0]-n[0]),i=(e[0]-n[0])*(t[1]-n[1]),o=r-i;if(0<r){if(i<=0)return o;a=r+i}else{if(!(r<0))return o;if(0<=i)return o;a=-(r+i)}var a=33306690738754716e-32*a;return a<=o||o<=-a?o:f(e,t,n)},function(e,t,n,r){var i=e[0]-r[0],o=t[0]-r[0],a=n[0]-r[0],s=e[1]-r[1],l=t[1]-r[1],u=n[1]-r[1],c=e[2]-r[2],f=t[2]-r[2],d=n[2]-r[2],h=o*u,p=a*l,a=a*s,u=i*u,l=i*l,o=o*s,s=c*(h-p)+f*(a-u)+d*(l-o),d=7771561172376103e-31*((Math.abs(h)+Math.abs(p))*Math.abs(c)+(Math.abs(a)+Math.abs(u))*Math.abs(f)+(Math.abs(l)+Math.abs(o))*Math.abs(d));return d<s||d<-s?s:y(e,t,n,r)}];!function(){for(;d.length<=5;)d.push(c(d.length));t.exports=function(s,e,t,l,u,c,f){return function(e,t,n,r,i){switch(arguments.length){case 0:case 1:return 0;case 2:return l(e,t);case 3:return u(e,t,n);case 4:return c(e,t,n,r);case 5:return f(e,t,n,r,i)}for(var o=new Array(arguments.length),a=0;a<arguments.length;++a)o[a]=arguments[a];return s(o)}}.apply(void 0,[function(e){return(d[e.length]||(d[e.length]=c(e.length))).apply(void 0,e)}].concat(d));for(var e=0;e<=5;++e)t.exports[e]=d[e]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(e,t,n){"use strict";var i=e("robust-sum"),o=e("robust-scale");t.exports=function(e,t){if(1===e.length)return o(t,e[0]);if(1===t.length)return o(e,t[0]);if(0===e.length||0===t.length)return[0];var n=[0];if(e.length<t.length)for(var r=0;r<e.length;++r)n=i(n,o(t,e[r]));else for(r=0;r<t.length;++r)n=i(n,o(e,t[r]));return n}},{"robust-scale":286,"robust-sum":289}],286:[function(e,t,n){"use strict";var d=e("two-product"),h=e("two-sum");t.exports=function(e,t){var n=e.length;if(1===n){var r=d(e[0],t);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],a=[.1,.1],s=0;d(e[0],t,o),o[0]&&(i[s++]=o[0]);for(var l=1;l<n;++l){d(e[l],t,a);var u=o[1];h(u,a[0],o),o[0]&&(i[s++]=o[0]);var c=a[1],f=o[1],u=c+f,c=f-(u-c);o[1]=u,c&&(i[s++]=c)}o[1]&&(i[s++]=o[1]);0===s&&(i[s++]=0);return i.length=s,i}},{"two-product":306,"two-sum":307}],287:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i=l(e,n,r),o=l(t,n,r);if(0<i&&0<o||i<0&&o<0)return!1;var a=l(n,e,t),s=l(r,e,t);if(0<a&&0<s||a<0&&s<0)return!1;return 0!==i||0!==o||0!==a||0!==s||function(e,t,n,r){for(var i=0;i<2;++i){var o=e[i],a=t[i],s=Math.min(o,a),l=Math.max(o,a),u=n[i],o=r[i],a=Math.min(u,o);if(Math.max(u,o)<s||l<a)return!1}return!0}(e,t,n,r)};var l=e("robust-orientation")[3]},{"robust-orientation":284}],288:[function(e,t,n){"use strict";t.exports=function(e,t){var n=0|e.length,r=0|t.length;if(1==n&&1==r)return function(e,t){var n=e+t,r=n-e,r=e-(n-r)+(t-r);if(r)return[r,n];return[n]}(e[0],-t[0]);var i,o,a=new Array(n+r),s=0,l=0,u=0,c=Math.abs,f=e[l],d=c(f),h=-t[u],p=c(h);d<p?(o=f,(l+=1)<n&&(f=e[l],d=c(f))):(o=h,(u+=1)<r&&(h=-t[u],p=c(h)));l<n&&d<p||r<=u?(i=f,(l+=1)<n&&(f=e[l],d=c(f))):(i=h,(u+=1)<r&&(h=-t[u],p=c(h)));var y,g,v=i+o,m=v-i,b=o-m,x=b,_=v;for(;l<n&&u<r;)d<p?(i=f,(l+=1)<n&&(f=e[l],d=c(f))):(i=h,(u+=1)<r&&(h=-t[u],p=c(h))),(b=(o=x)-(m=(v=i+o)-i))&&(a[s++]=b),x=_-((y=_+v)-(g=y-_))+(v-g),_=y;for(;l<n;)(b=(o=x)-(m=(v=(i=f)+o)-i))&&(a[s++]=b),x=_-((y=_+v)-(g=y-_))+(v-g),_=y,(l+=1)<n&&(f=e[l]);for(;u<r;)(b=(o=x)-(m=(v=(i=h)+o)-i))&&(a[s++]=b),x=_-((y=_+v)-(g=y-_))+(v-g),_=y,(u+=1)<r&&(h=-t[u]);x&&(a[s++]=x);_&&(a[s++]=_);s||(a[s++]=0);return a.length=s,a}},{}],289:[function(e,t,n){"use strict";t.exports=function(e,t){var n=0|e.length,r=0|t.length;if(1==n&&1==r)return function(e,t){var n=e+t,r=n-e,r=e-(n-r)+(t-r);if(r)return[r,n];return[n]}(e[0],t[0]);var i,o,a=new Array(n+r),s=0,l=0,u=0,c=Math.abs,f=e[l],d=c(f),h=t[u],p=c(h);d<p?(o=f,(l+=1)<n&&(f=e[l],d=c(f))):(o=h,(u+=1)<r&&(h=t[u],p=c(h)));l<n&&d<p||r<=u?(i=f,(l+=1)<n&&(f=e[l],d=c(f))):(i=h,(u+=1)<r&&(h=t[u],p=c(h)));var y,g,v=i+o,m=v-i,b=o-m,x=b,_=v;for(;l<n&&u<r;)d<p?(i=f,(l+=1)<n&&(f=e[l],d=c(f))):(i=h,(u+=1)<r&&(h=t[u],p=c(h))),(b=(o=x)-(m=(v=i+o)-i))&&(a[s++]=b),x=_-((y=_+v)-(g=y-_))+(v-g),_=y;for(;l<n;)(b=(o=x)-(m=(v=(i=f)+o)-i))&&(a[s++]=b),x=_-((y=_+v)-(g=y-_))+(v-g),_=y,(l+=1)<n&&(f=e[l]);for(;u<r;)(b=(o=x)-(m=(v=(i=h)+o)-i))&&(a[s++]=b),x=_-((y=_+v)-(g=y-_))+(v-g),_=y,(u+=1)<r&&(h=t[u]);x&&(a[s++]=x);_&&(a[s++]=_);s||(a[s++]=0);return a.length=s,a}},{}],290:[function(e,t,n){"use strict";t.exports=function(e){return i(r(e))};var r=e("boundary-cells"),i=e("reduce-simplicial-complex")},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){n=n||0,void 0===r&&(r=function(e){for(var t=e.length,n=0,r=0;r<t;++r)n=0|Math.max(n,e[r].length);return n-1}(e));if(0===e.length||r<1)return{cells:[],vertexIds:[],vertexWeights:[]};var i=function(e,t){for(var n=e.length,r=p.mallocUint8(n),i=0;i<n;++i)r[i]=e[i]<t|0;return r}(t,+n),o=function(e,t){for(var n=e.length,r=t*(t+1)/2*n|0,i=p.mallocUint32(2*r),o=0,a=0;a<n;++a)for(var s=e[a],t=s.length,l=0;l<t;++l)for(var u=0;u<l;++u){var c=s[u],f=s[l];i[o++]=0|Math.min(c,f),i[o++]=0|Math.max(c,f)}y(h(i,[o/2|0,2]));for(var d=2,a=2;a<o;a+=2)i[a-2]===i[a]&&i[a-1]===i[a+1]||(i[d++]=i[a],i[d++]=i[a+1]);return h(i,[d/2|0,2])}(e,r),a=function(e,t,n,r){for(var i=e.data,o=e.shape[0],a=p.mallocDouble(o),s=0,l=0;l<o;++l){var u,c,f=i[2*l],d=i[2*l+1];n[f]!==n[d]&&(u=t[f],c=t[d],i[2*s]=f,i[2*s+1]=d,a[s++]=(c-r)/(c-u))}return e.shape[0]=s,h(a,[s])}(o,t,i,+n),n=function(e,t){for(var n=p.mallocInt32(2*t),r=e.shape[0],i=e.data,o=n[0]=0,a=0;a<r;++a){var s=i[2*a];if(s!==o){for(n[2*o+1]=a;++o<s;)n[2*o]=a,n[2*o+1]=a;n[2*o]=a}}n[2*o+1]=r;for(;++o<t;)n[2*o]=n[2*o+1]=r;return n}(o,0|t.length),t=s(r)(e,o.data,n,i),r=function(e){for(var t=0|e.shape[0],n=e.data,r=new Array(t),i=0;i<t;++i)r[i]=[n[2*i],n[2*i+1]];return r}(o),e=[].slice.call(a.data,0,a.shape[0]);return p.free(i),p.free(o.data),p.free(a.data),p.free(n),{cells:t,vertexIds:r,vertexWeights:e}};var h=e("ndarray"),p=e("typedarray-pool"),y=e("ndarray-sort"),s=e("./lib/codegen")},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(e,t,n){"use strict";t.exports=function(e){return r[e]()};var r=[function(){return function(e,t,n,r){for(var i=e.length,o=0;o<i;++o)e[o].length;return[]}},function(){function u(e,t,n,r){for(var i=0|Math.min(n,r),o=0|Math.max(n,r),a=e[2*i],s=e[2*i+1];a<s;){var l=a+s>>1,u=t[2*l+1];if(u===o)return l;o<u?s=l:a=1+l}return a}return function(e,t,n,r){for(var i=e.length,o=[],a=0;a<i;++a){var s=e[a];if(2===s.length){var l=(r[s[0]]<<0)+(r[s[1]]<<1);if(0!=l&&3!=l)switch(l){case 0:break;case 1:o.push([u(n,t,s[0],s[1])]);break;case 2:o.push([u(n,t,s[1],s[0])])}}}return o}},function(){function c(e,t,n,r){for(var i=0|Math.min(n,r),o=0|Math.max(n,r),a=e[2*i],s=e[2*i+1];a<s;){var l=a+s>>1,u=t[2*l+1];if(u===o)return l;o<u?s=l:a=1+l}return a}return function(e,t,n,r){for(var i=e.length,o=[],a=0;a<i;++a){var s,l=e[a],u=l.length;if(3===u){if(0!==(s=(r[l[0]]<<0)+(r[l[1]]<<1)+(r[l[2]]<<2))&&7!==s)switch(s){case 0:break;case 1:o.push([c(n,t,l[0],l[2]),c(n,t,l[0],l[1])]);break;case 2:o.push([c(n,t,l[1],l[0]),c(n,t,l[1],l[2])]);break;case 3:o.push([c(n,t,l[0],l[2]),c(n,t,l[1],l[2])]);break;case 4:o.push([c(n,t,l[2],l[1]),c(n,t,l[2],l[0])]);break;case 5:o.push([c(n,t,l[2],l[1]),c(n,t,l[0],l[1])]);break;case 6:o.push([c(n,t,l[1],l[0]),c(n,t,l[2],l[0])])}}else if(2===u)if(0!==(s=(r[l[0]]<<0)+(r[l[1]]<<1))&&3!==s)switch(s){case 0:break;case 1:o.push([c(n,t,l[0],l[1])]);break;case 2:o.push([c(n,t,l[1],l[0])])}}return o}},function(){function c(e,t,n,r){for(var i=0|Math.min(n,r),o=0|Math.max(n,r),a=e[2*i],s=e[2*i+1];a<s;){var l=a+s>>1,u=t[2*l+1];if(u===o)return l;o<u?s=l:a=1+l}return a}return function(e,t,n,r){for(var i=e.length,o=[],a=0;a<i;++a){var s,l=e[a],u=l.length;if(4===u){if(0!==(s=(r[l[0]]<<0)+(r[l[1]]<<1)+(r[l[2]]<<2)+(r[l[3]]<<3))&&15!==s)switch(s){case 0:break;case 1:o.push([c(n,t,l[0],l[1]),c(n,t,l[0],l[2]),c(n,t,l[0],l[3])]);break;case 2:o.push([c(n,t,l[1],l[2]),c(n,t,l[1],l[0]),c(n,t,l[1],l[3])]);break;case 3:o.push([c(n,t,l[1],l[2]),c(n,t,l[0],l[2]),c(n,t,l[0],l[3])],[c(n,t,l[1],l[3]),c(n,t,l[1],l[2]),c(n,t,l[0],l[3])]);break;case 4:o.push([c(n,t,l[2],l[0]),c(n,t,l[2],l[1]),c(n,t,l[2],l[3])]);break;case 5:o.push([c(n,t,l[0],l[1]),c(n,t,l[2],l[1]),c(n,t,l[0],l[3])],[c(n,t,l[2],l[1]),c(n,t,l[2],l[3]),c(n,t,l[0],l[3])]);break;case 6:o.push([c(n,t,l[2],l[0]),c(n,t,l[1],l[0]),c(n,t,l[1],l[3])],[c(n,t,l[2],l[3]),c(n,t,l[2],l[0]),c(n,t,l[1],l[3])]);break;case 7:o.push([c(n,t,l[0],l[3]),c(n,t,l[1],l[3]),c(n,t,l[2],l[3])]);break;case 8:o.push([c(n,t,l[3],l[1]),c(n,t,l[3],l[0]),c(n,t,l[3],l[2])]);break;case 9:o.push([c(n,t,l[3],l[1]),c(n,t,l[0],l[1]),c(n,t,l[0],l[2])],[c(n,t,l[3],l[2]),c(n,t,l[3],l[1]),c(n,t,l[0],l[2])]);break;case 10:o.push([c(n,t,l[1],l[0]),c(n,t,l[3],l[0]),c(n,t,l[1],l[2])],[c(n,t,l[3],l[0]),c(n,t,l[3],l[2]),c(n,t,l[1],l[2])]);break;case 11:o.push([c(n,t,l[1],l[2]),c(n,t,l[0],l[2]),c(n,t,l[3],l[2])]);break;case 12:o.push([c(n,t,l[3],l[0]),c(n,t,l[2],l[0]),c(n,t,l[2],l[1])],[c(n,t,l[3],l[1]),c(n,t,l[3],l[0]),c(n,t,l[2],l[1])]);break;case 13:o.push([c(n,t,l[0],l[1]),c(n,t,l[2],l[1]),c(n,t,l[3],l[1])]);break;case 14:o.push([c(n,t,l[2],l[0]),c(n,t,l[1],l[0]),c(n,t,l[3],l[0])])}}else if(3===u){if(0!==(s=(r[l[0]]<<0)+(r[l[1]]<<1)+(r[l[2]]<<2))&&7!==s)switch(s){case 0:break;case 1:o.push([c(n,t,l[0],l[2]),c(n,t,l[0],l[1])]);break;case 2:o.push([c(n,t,l[1],l[0]),c(n,t,l[1],l[2])]);break;case 3:o.push([c(n,t,l[0],l[2]),c(n,t,l[1],l[2])]);break;case 4:o.push([c(n,t,l[2],l[1]),c(n,t,l[2],l[0])]);break;case 5:o.push([c(n,t,l[2],l[1]),c(n,t,l[0],l[1])]);break;case 6:o.push([c(n,t,l[1],l[0]),c(n,t,l[2],l[0])])}}else if(2===u)if(0!==(s=(r[l[0]]<<0)+(r[l[1]]<<1))&&3!==s)switch(s){case 0:break;case 1:o.push([c(n,t,l[0],l[1])]);break;case 2:o.push([c(n,t,l[1],l[0])])}}return o}}]},{}],293:[function(e,t,n){"use strict";var p=e("bit-twiddle"),f=e("union-find");function y(e,t){var n=e.length,r=e.length-t.length,i=Math.min;if(r)return r;switch(n){case 0:return 0;case 1:return e[0]-t[0];case 2:return(s=e[0]+e[1]-t[0]-t[1])?s:i(e[0],e[1])-i(t[0],t[1]);case 3:var o=e[0]+e[1],a=t[0]+t[1];if(s=o+e[2]-(a+t[2]))return s;var s,l=i(e[0],e[1]),u=i(t[0],t[1]);return(s=i(l,e[2])-i(u,t[2]))?s:i(l+e[2],o)-i(u+t[2],a);default:var c=e.slice(0);c.sort();var f=t.slice(0);f.sort();for(var d=0;d<n;++d)if(r=c[d]-f[d])return r;return 0}}function o(e,t){return y(e[0],t[0])}function d(e,t){if(t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r[i]=[e[i],t[i]];r.sort(o);for(i=0;i<n;++i)e[i]=r[i][0],t[i]=r[i][1];return e}return e.sort(y),e}function h(e){if(0===e.length)return[];for(var t=1,n=e.length,r=1;r<n;++r){var i=e[r];y(i,e[r-1])&&(r!==t?e[t++]=i:t++)}return e.length=t,e}function g(e,t){for(var n=0,r=e.length-1,i=-1;n<=r;){var o=n+r>>1,a=y(e[o],t);a<=0?(0===a&&(i=o),n=1+o):0<a&&(r=o-1)}return i}function l(e,t){for(var n=new Array(e.length),r=0,i=n.length;r<i;++r)n[r]=[];for(var o=[],r=0,a=t.length;r<a;++r)for(var s=t[r],l=s.length,u=1,c=1<<l;u<c;++u){o.length=p.popCount(u);for(var f=0,d=0;d<l;++d)u&1<<d&&(o[f++]=s[d]);var h=g(e,o);if(!(h<0))for(;;)if(n[h++].push(r),h>=e.length||0!==y(e[h],o))break}return n}function v(e,t){if(t<0)return[];for(var n=[],r=(1<<t+1)-1,i=0;i<e.length;++i)for(var o=e[i],a=r;a<1<<o.length;a=p.nextCombination(a)){for(var s=new Array(t+1),l=0,u=0;u<o.length;++u)a&1<<u&&(s[l++]=o[u]);n.push(s)}return d(n)}n.dimension=function(e){for(var t=0,n=Math.max,r=0,i=e.length;r<i;++r)t=n(t,e[r].length);return t-1},n.countVertices=function(e){for(var t=-1,n=Math.max,r=0,i=e.length;r<i;++r)for(var o=e[r],a=0,s=o.length;a<s;++a)t=n(t,o[a]);return t+1},n.cloneCells=function(e){for(var t=new Array(e.length),n=0,r=e.length;n<r;++n)t[n]=e[n].slice(0);return t},n.compareCells=y,n.normalize=d,n.unique=h,n.findCell=g,n.incidence=l,n.dual=function(e,t){if(!t)return l(h(v(e,0)),e);for(var n=new Array(t),r=0;r<t;++r)n[r]=[];for(var r=0,i=e.length;r<i;++r)for(var o=e[r],a=0,s=o.length;a<s;++a)n[o[a]].push(r);return n},n.explode=function(e){for(var t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],o=0|i.length,a=1,s=1<<o;a<s;++a){for(var l=[],u=0;u<o;++u)a>>>u&1&&l.push(i[u]);t.push(l)}return d(t)},n.skeleton=v,n.boundary=function(e){for(var t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length;o<a;++o){for(var s=new Array(i.length-1),l=0,u=0;l<a;++l)l!==o&&(s[u++]=i[l]);t.push(s)}return d(t)},n.connectedComponents=function(e,t){return t?function(e,t){for(var n=new f(t),r=0;r<e.length;++r)for(var i=e[r],o=0;o<i.length;++o)for(var a=o+1;a<i.length;++a)n.link(i[o],i[a]);for(var s=[],l=n.ranks,r=0;r<l.length;++r)l[r]=-1;for(r=0;r<e.length;++r){var u=n.find(e[r][0]);l[u]<0?(l[u]=s.length,s.push([e[r].slice(0)])):s[l[u]].push(e[r].slice(0))}return s}(e,t):function(e){for(var t=h(d(v(e,0))),n=new f(t.length),r=0;r<e.length;++r)for(var i=e[r],o=0;o<i.length;++o)for(var a=g(t,[i[o]]),s=o+1;s<i.length;++s)n.link(a,g(t,[i[s]]));for(var l=[],u=n.ranks,r=0;r<u.length;++r)u[r]=-1;for(r=0;r<e.length;++r){var c=n.find(g(t,[e[r][0]]));u[c]<0?(u[c]=l.length,l.push([e[r].slice(0)])):l[u[c]].push(e[r].slice(0))}return l}(e)}},{"bit-twiddle":32,"union-find":309}],294:[function(e,t,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],295:[function(e,t,n){arguments[4][293][0].apply(n,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(e,t,n){"use strict";function r(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}(t.exports=r).prototype.length=function(){return this.roots.length},r.prototype.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},r.prototype.find=function(e){for(var t=this.roots;t[e]!==e;){var n=t[e];t[e]=t[n],e=n}return e},r.prototype.link=function(e,t){var n,r,i=this.find(e),o=this.find(t);i!==o&&(n=this.ranks,r=this.roots,(e=n[i])<(t=n[o])?r[i]=o:t<e?r[o]=i:++n[r[o]=i])}},{}],297:[function(e,t,n){"use strict";t.exports=function(e,r,t){for(var n=r.length,i=e.length,o=new Array(n),a=new Array(n),s=new Array(n),l=new Array(n),u=0;u<n;++u)o[u]=a[u]=-1,s[u]=1/0,l[u]=!1;for(u=0;u<i;++u){var c=e[u];if(2!==c.length)throw new Error("Input must be a graph");var f=c[1],c=c[0];-1!==a[c]?a[c]=-2:a[c]=f,-1!==o[f]?o[f]=-2:o[f]=c}function d(e){if(l[e])return 1/0;var t=o[e],n=a[e];return t<0||n<0?1/0:function(e,t,n){e=Math.abs(O(e,t,n)),n=Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2));return e/n}(r[e],r[t],r[n])}function h(e,t){var n=b[e],r=b[t];b[e]=r,b[t]=n,x[n]=t,x[r]=e}function p(e){return s[b[e]]}function y(e){for(var t=p(e);;){var n,r=t,i=2*e+1,o=2*(e+1),a=e;if(i<_&&((n=p(i))<r&&(a=i,r=n)),(a=o<_&&p(o)<r?o:a)===e)return e;h(e,a),e=a}}function g(e){for(var t=p(e);0<e;){var n=1&(n=e)?n-1>>1:(n>>1)-1;if(0<=n)if(t<p(n)){h(e,n),e=n;continue}return e}}function v(){if(0<_){var e=b[0];return h(0,_-1),--_,y(0),e}return-1}function m(e,t){var n=b[e];return s[n]===t?e:(s[n]=-1/0,g(e),v(),s[n]=t,g((_+=1)-1))}for(var b=[],x=new Array(n),u=0;u<n;++u)(s[u]=d(u))<1/0?(x[u]=b.length,b.push(u)):x[u]=-1;for(var _=b.length,u=_>>1;0<=u;--u)y(u);for(;;){var w=v();if(w<0||s[w]>t)break;!function(e){var t;l[e]||(l[e]=!0,t=o[e],e=a[e],0<=o[e]&&(o[e]=t),0<=a[t]&&(a[t]=e),0<=x[t]&&m(x[t],d(t)),0<=x[e]&&m(x[e],d(e)))}(w)}for(var M=[],u=0;u<n;++u)l[u]||(x[u]=M.length,M.push(r[u].slice()));M.length;function j(e,t){if(e[t]<0)return t;var n=t,r=t;do{var i=e[r]}while(l[r]&&!(i<0)&&i!==r&&((i=e[r=i],l[r]&&!(i<0)&&i!==r)&&(r=i,(n=e[n])!==r)));for(var o=t;o!==r;o=e[o])e[o]=r;return r}var k=[];return e.forEach(function(e){var t=j(o,e[0]),e=j(a,e[1]);0<=t&&0<=e&&t!==e&&((t=x[t])!==(e=x[e])&&k.push([t,e]))}),A.unique(A.normalize(k)),{positions:M,edges:k}};var O=e("robust-orientation"),A=e("simplicial-complex")},{"robust-orientation":284,"simplicial-complex":295}],298:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,i,o;if(t[0][0]<t[1][0])n=t[0],r=t[1];else{if(!(t[0][0]>t[1][0]))return a(t,e);n=t[1],r=t[0]}if(e[0][0]<e[1][0])i=e[0],o=e[1];else{if(!(e[0][0]>e[1][0]))return-a(e,t);i=e[1],o=e[0]}t=u(n,r,o),e=u(n,r,i);if(t<0){if(e<=0)return t}else if(0<t){if(0<=e)return t}else if(e)return e;if(t=u(o,i,r),e=u(o,i,n),t<0){if(e<=0)return t}else if(0<t){if(0<=e)return t}else if(e)return e;return r[0]-o[0]};var u=e("robust-orientation");function a(e,t){var n,r;if(t[0][0]<t[1][0])n=t[0],r=t[1];else{if(!(t[0][0]>t[1][0])){var i=Math.min(e[0][1],e[1][1]),o=Math.max(e[0][1],e[1][1]),a=Math.min(t[0][1],t[1][1]),s=Math.max(t[0][1],t[1][1]);return o<a?o-a:s<i?i-s:o-s}n=t[1],r=t[0]}var e=e[0][1]<e[1][1]?(l=e[0],e[1]):(l=e[1],e[0]),l=u(r,n,l);return l||((l=u(r,n,e))?l:e-r)}},{"robust-orientation":284}],299:[function(e,t,n){"use strict";t.exports=function(e){for(var t=e.length,n=2*t,r=new Array(n),i=0;i<t;++i){var o=e[i],a=o[0][0]<o[1][0];r[2*i]=new m(o[0][0],o,a,i),r[2*i+1]=new m(o[1][0],o,!a,i)}r.sort(function(e,t){var n=e.x-t.x;return n||((n=e.create-t.create)?n:Math.min(e.segment[0][1],e.segment[1][1])-Math.min(t.segment[0][1],t.segment[1][1]))});for(var s=p(y),l=[],u=[],c=[],i=0;i<n;){for(var f=r[i].x,d=[];i<n;){var h=r[i];if(h.x!==f)break;i+=1,h.segment[0][0]===h.x&&h.segment[1][0]===h.x?h.create&&(h.segment[0][1]<h.segment[1][1]?(d.push(new v(h.segment[0][1],h.index,!0,!0)),d.push(new v(h.segment[1][1],h.index,!1,!1))):(d.push(new v(h.segment[1][1],h.index,!0,!1)),d.push(new v(h.segment[0][1],h.index,!1,!0)))):s=h.create?s.insert(h.segment,h.index):s.remove(h.segment)}l.push(s.root),u.push(f),c.push(d)}return new g(l,u,c)};var l=e("binary-search-bounds"),p=e("functional-red-black-tree"),u=e("robust-orientation"),y=e("./lib/order-segments");function g(e,t,n){this.slabs=e,this.coordinates=t,this.horizontal=n}function c(e,t){return e.y-t}function f(e,t){for(var n=null;e;){var r,i,o=e.key,a=o[0][0]<o[1][0]?(r=o[0],o[1]):(r=o[1],o[0]),a=u(r,a,t);if(a<0)e=e.left;else if(0<a)if(t[0]!==o[1][0])e=(n=e).right;else{if(i=f(e.right,t))return i;e=e.left}else{if(t[0]!==o[1][0])return e;if(i=f(e.right,t))return i;e=e.left}}return n}function v(e,t,n,r){this.y=e,this.index=t,this.start=n,this.closed=r}function m(e,t,n,r){this.x=e,this.segment=t,this.create=n,this.index=r}g.prototype.castUp=function(e){var t=l.le(this.coordinates,e[0]);if(t<0)return-1;this.slabs[t];var n=f(this.slabs[t],e),r=-1;if(n&&(r=n.value),this.coordinates[t]===e[0]){var i=null;n&&(i=n.key),0<t&&((n=f(this.slabs[t-1],e))&&(i?0<y(n.key,i)&&(i=n.key,r=n.value):(r=n.value,i=n.key)));var o=this.horizontal[t];if(0<o.length){var a=l.ge(o,e[1],c);if(a<o.length){var s=o[a];if(e[1]===s.y){if(s.closed)return s.index;for(;a<o.length-1&&o[a+1].y===e[1];)if((s=o[a+=1]).closed)return s.index;if(s.y===e[1]&&!s.start){if((a+=1)>=o.length)return r;s=o[a]}}s.start?i?(t=u(i[0],i[1],[e[0],s.y]),0<(t=i[0][0]>i[1][0]?-t:t)&&(r=s.index)):r=s.index:s.y!==e[1]&&(r=s.index)}}}return r}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(e,t,n){"use strict";var r=e("robust-dot-product"),i=e("robust-sum");function c(e,t){t=i(r(e,t),[t[t.length-1]]);return t[t.length-1]}function f(e,t,n,r){var i=-t/(r-t);i<0?i=0:1<i&&(i=1);for(var o=1-i,a=e.length,s=new Array(a),l=0;l<a;++l)s[l]=i*e[l]+o*n[l];return s}t.exports=function(e,t){for(var n=[],r=[],i=c(e[e.length-1],t),o=e[e.length-1],a=e[0],s=0;s<e.length;++s,o=a){var l,u=c(a=e[s],t);(i<0&&0<u||0<i&&u<0)&&(l=f(o,u,a,i),n.push(l),r.push(l.slice())),u<0?r.push(a.slice()):0<u?n.push(a.slice()):(n.push(a.slice()),r.push(a.slice())),i=u}return{positive:n,negative:r}},t.exports.positive=function(e,t){for(var n=[],r=c(e[e.length-1],t),i=e[e.length-1],o=e[0],a=0;a<e.length;++a,i=o){var s=c(o=e[a],t);(r<0&&0<s||0<r&&s<0)&&n.push(f(i,s,o,r)),0<=s&&n.push(o.slice()),r=s}return n},t.exports.negative=function(e,t){for(var n=[],r=c(e[e.length-1],t),i=e[e.length-1],o=e[0],a=0;a<e.length;++a,i=o){var s=c(o=e[a],t);(r<0&&0<s||0<r&&s<0)&&n.push(f(i,s,o,r)),s<=0&&n.push(o.slice()),r=s}return n}},{"robust-dot-product":281,"robust-sum":289}],301:[function(e,t,n){!function(){"use strict";var h={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function p(e){return function(e,t){var n,r,i,o,a,s,l,u,c=1,f=e.length,d="";for(r=0;r<f;r++)if("string"==typeof e[r])d+=e[r];else if("object"==typeof e[r]){if((o=e[r]).keys)for(n=t[c],i=0;i<o.keys.length;i++){if(null==n)throw new Error(p('[sprintf] Cannot access property "%s" of undefined value "%s"',o.keys[i],o.keys[i-1]));n=n[o.keys[i]]}else n=o.param_no?t[o.param_no]:t[c++];if(h.not_type.test(o.type)&&h.not_primitive.test(o.type)&&n instanceof Function&&(n=n()),h.numeric_arg.test(o.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(p("[sprintf] expecting number but found %T",n));switch(h.number.test(o.type)&&(l=0<=n),o.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,o.width?parseInt(o.width):0);break;case"e":n=o.precision?parseFloat(n).toExponential(o.precision):parseFloat(n).toExponential();break;case"f":n=o.precision?parseFloat(n).toFixed(o.precision):parseFloat(n);break;case"g":n=o.precision?String(Number(n.toPrecision(o.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=o.precision?n.substring(0,o.precision):n;break;case"t":n=String(!!n),n=o.precision?n.substring(0,o.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=o.precision?n.substring(0,o.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=o.precision?n.substring(0,o.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}h.json.test(o.type)?d+=n:(!h.number.test(o.type)||l&&!o.sign?u="":(u=l?"+":"-",n=n.toString().replace(h.sign,"")),a=o.pad_char?"0"===o.pad_char?"0":o.pad_char.charAt(1):" ",s=o.width-(u+n).length,s=o.width&&0<s?a.repeat(s):"",d+=o.align?u+n+s:"0"===a?u+s+n:s+u+n)}return d}(function(e){if(l[e])return l[e];var t,n=e,r=[],i=0;for(;n;){if(null!==(t=h.text.exec(n)))r.push(t[0]);else if(null!==(t=h.modulo.exec(n)))r.push("%");else{if(null===(t=h.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){i|=1;var o=[],a=t[2],s=[];if(null===(s=h.key.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(o.push(s[1]);""!==(a=a.substring(s[0].length));)if(null!==(s=h.key_access.exec(a)))o.push(s[1]);else{if(null===(s=h.index_access.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");o.push(s[1])}t[2]=o}else i|=2;if(3===i)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}n=n.substring(t[0].length)}return l[e]=r}(e),arguments)}function e(e,t){return p.apply(null,[e].concat(t||[]))}var l=Object.create(null);void 0!==n&&(n.sprintf=p,n.vsprintf=e),"undefined"!=typeof window&&(window.sprintf=p,window.vsprintf=e)}()},{}],302:[function(e,t,n){"use strict";t.exports=function(e,t){{if(e.dimension<=0)return{positions:[],cells:[]};if(1===e.dimension)return function(e,t){for(var n=s(e,t),r=n.length,i=new Array(r),o=new Array(r),a=0;a<r;++a)i[a]=[n[a]],o[a]=[a];return{positions:i,cells:o}}(e,t)}var n=e.order.join()+"-"+e.dtype,r=a[n],t=+t||0;r=r||(a[n]=function(e,t){var n=e.length+"d",n=o[n];if(n)return n(i,e,t)}(e.order,e.dtype));return r(e,t)};var i=e("ndarray-extract-contour"),s=e("zero-crossings"),o={"2d":function(e,t,n){var i=e({order:t,scalarArguments:3,getters:"generic"===n?[0]:void 0,phase:function(e,t,n,r){return r<e|0},vertex:function(e,t,n,r,i,o,a,s,l,u,c,f,d){u=(a<<0)+(s<<1)+(l<<2)+(u<<3)|0;if(0!=u&&15!=u)switch(u){case 0:c.push([e-.5,t-.5]);break;case 1:c.push([e-.25-.25*(r+n-2*d)/(n-r),t-.25-.25*(i+n-2*d)/(n-i)]);break;case 2:c.push([e-.75-.25*(-r-n+2*d)/(r-n),t-.25-.25*(o+r-2*d)/(r-o)]);break;case 3:c.push([e-.5,t-.5-.5*(i+n+o+r-4*d)/(n-i+r-o)]);break;case 4:c.push([e-.25-.25*(o+i-2*d)/(i-o),t-.75-.25*(-i-n+2*d)/(i-n)]);break;case 5:c.push([e-.5-.5*(r+n+o+i-4*d)/(n-r+i-o),t-.5]);break;case 6:c.push([e-.5-.25*(-r-n+o+i)/(r-n+i-o),t-.5-.25*(-i-n+o+r)/(i-n+r-o)]);break;case 7:c.push([e-.75-.25*(o+i-2*d)/(i-o),t-.75-.25*(o+r-2*d)/(r-o)]);break;case 8:c.push([e-.75-.25*(-o-i+2*d)/(o-i),t-.75-.25*(-o-r+2*d)/(o-r)]);break;case 9:c.push([e-.5-.25*(r+n+-o-i)/(n-r+o-i),t-.5-.25*(i+n+-o-r)/(n-i+o-r)]);break;case 10:c.push([e-.5-.5*(-r-n-o-i+4*d)/(r-n+o-i),t-.5]);break;case 11:c.push([e-.25-.25*(-o-i+2*d)/(o-i),t-.75-.25*(i+n-2*d)/(n-i)]);break;case 12:c.push([e-.5,t-.5-.5*(-i-n-o-r+4*d)/(i-n+o-r)]);break;case 13:c.push([e-.75-.25*(r+n-2*d)/(n-r),t-.25-.25*(-o-r+2*d)/(o-r)]);break;case 14:c.push([e-.25-.25*(-r-n+2*d)/(r-n),t-.25-.25*(-i-n+2*d)/(i-n)]);break;case 15:c.push([e-.5,t-.5])}},cell:function(e,t,n,r,i,o,a,s,l){i?s.push([e,t]):s.push([t,e])}});return function(e,t){var n=[],r=[];return i(e,n,r,t),{positions:n,cells:r}}}};var a={}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(n,r,e){!function(t){!function(){"use strict";r.exports=function e(t,n,r){r=r||{};var i=v[t];i=i||(v[t]={" ":{data:new Float32Array(0),shape:.2}});var o=i[n];if(!o)if(n.length<=1||!/\d/.test(n))o=i[n]=m(g(n,{triangles:!0,font:t,textAlign:r.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var a=n.split(/(\d|\s)/),s=new Array(a.length),l=0,u=0,c=0;c<a.length;++c)s[c]=e(t,a[c]),l+=s[c].data.length,u+=s[c].shape,0<c&&(u+=.02);for(var f=new Float32Array(l),d=0,h=-.5*u,c=0;c<s.length;++c){for(var p=s[c].data,y=0;y<p.length;y+=2)f[d++]=p[y]+h,f[d++]=p[y+1];h+=s[c].shape+.02}o=i[n]={data:f,shape:u}}return o};var g=n("vectorize-text"),e=window||t.global||{},v=e.__TEXT_CACHE||{};function m(e){for(var t=e.cells,n=e.positions,r=new Float32Array(6*t.length),i=0,o=0,a=0;a<t.length;++a)for(var s=t[a],l=0;l<3;++l){var u=n[s[l]];r[i++]=u[0],r[i++]=u[1]+1.4,o=Math.max(u[0],o)}return{data:r,shape:o}}e.__TEXT_CACHE={}}.call(this)}.call(this,n("_process"))},{_process:5,"vectorize-text":311}],304:[function(e,t,n){"use strict";var r=e("parse-unit");t.exports=i;var o=96;function a(e,t){t=r(getComputedStyle(e).getPropertyValue(t));return t[0]*i(t[1],e)}function i(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return n=e,r=t,(i=document.createElement("div")).style["font-size"]="128"+n,r.appendChild(i),n=a(i,"font-size")/128,r.removeChild(i),n;case"em":return a(t,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return o;case"cm":return o/2.54;case"mm":return o/25.4;case"pt":return o/72;case"pc":return o/6}var n,r,i;return 1}},{"parse-unit":265}],305:[function(e,t,n){"use strict";t.exports=function(e){var t=(e=e||{}).center||[0,0,0],n=e.up||[0,1,0],r=e.right||d(n),i=e.radius||1,o=e.theta||0,a=e.phi||0;{var s,l;t=[].slice.call(t,0,3),n=[].slice.call(n,0,3),P(n,n),r=[].slice.call(r,0,3),P(r,r),"eye"in e&&(s=e.eye,l=[s[0]-t[0],s[1]-t[1],s[2]-t[2]],T(r,l,n),S(r[0],r[1],r[2])<1e-6?r=d(n):P(r,r),i=S(l[0],l[1],l[2]),s=f(n,l)/i,l=f(r,l)/i,a=Math.acos(s),o=Math.acos(l))}return i=Math.log(i),new h(e.zoomMin,e.zoomMax,t,n,r,i,o,a)};var u=e("filtered-vector"),b=e("gl-mat4/invert"),c=e("gl-mat4/rotate"),T=e("gl-vec3/cross"),P=e("gl-vec3/normalize"),f=e("gl-vec3/dot");function S(e,t,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2))}function x(e){return Math.min(1,Math.max(-1,e))}function d(e){var t=Math.abs(e[0]),n=Math.abs(e[1]),r=Math.abs(e[2]),i=[0,0,0];t>Math.max(n,r)?i[2]=1:n>Math.max(t,r)?i[0]=1:i[1]=1;for(var o=0,a=0,s=0;s<3;++s)o+=e[s]*e[s],a+=i[s]*e[s];for(s=0;s<3;++s)i[s]-=a/o*e[s];return P(i,i),i}function h(e,t,n,r,i,o,a,s){this.center=u(n),this.up=u(r),this.right=u(i),this.radius=u([o]),this.angle=u([a,s]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(e,t),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var l=0;l<16;++l)this.computedMatrix[l]=.5;this.recalcMatrix(0)}e=h.prototype;e.setDistanceLimits=function(e,t){e=0<e?Math.log(e):-1/0,t=0<t?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},e.getDistanceLimits=function(e){var t=this.radius.bounds[0];return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},e.recalcMatrix=function(e){this.center.curve(e),this.up.curve(e),this.right.curve(e),this.radius.curve(e),this.angle.curve(e);for(var t=this.computedUp,n=this.computedRight,r=0,i=0,o=0;o<3;++o)i+=t[o]*n[o],r+=t[o]*t[o];for(var a=Math.sqrt(r),s=0,o=0;o<3;++o)n[o]-=t[o]*i/r,s+=n[o]*n[o],t[o]/=a;for(var l=Math.sqrt(s),o=0;o<3;++o)n[o]/=l;var u=this.computedToward;T(u,t,n),P(u,u);for(var c=Math.exp(this.computedRadius[0]),f=this.computedAngle[0],d=this.computedAngle[1],h=Math.cos(f),p=Math.sin(f),y=Math.cos(d),g=Math.sin(d),v=this.computedCenter,m=h*y,b=p*y,x=g,_=-h*g,w=-p*g,M=y,j=this.computedEye,k=this.computedMatrix,o=0;o<3;++o){var O=m*n[o]+b*u[o]+x*t[o];k[4*o+1]=_*n[o]+w*u[o]+M*t[o],k[4*o+2]=O,k[4*o+3]=0}e=k[1],f=k[5],d=k[9],h=k[2],p=k[6],g=k[10],y=f*g-d*p,g=d*h-e*g,f=e*p-f*h,h=S(y,g,f);g/=h,f/=h,k[0]=y/=h,k[4]=g,k[8]=f;for(o=0;o<3;++o)j[o]=v[o]+k[2+4*o]*c;for(o=0;o<3;++o){for(var s=0,A=0;A<3;++A)s+=k[o+4*A]*j[A];k[12+o]=-s}k[15]=1},e.getMatrix=function(e,t){this.recalcMatrix(e);var n=this.computedMatrix;if(t){for(var r=0;r<16;++r)t[r]=n[r];return t}return n};var p=[0,0,0];e.rotate=function(e,t,n,r){if(this.angle.move(e,t,n),r){this.recalcMatrix(e);var i=this.computedMatrix;p[0]=i[2],p[1]=i[6],p[2]=i[10];for(var o=this.computedUp,a=this.computedRight,s=this.computedToward,l=0;l<3;++l)i[4*l]=o[l],i[4*l+1]=a[l],i[4*l+2]=s[l];c(i,i,r,p);for(l=0;l<3;++l)o[l]=i[4*l],a[l]=i[4*l+1];this.up.set(e,o[0],o[1],o[2]),this.right.set(e,a[0],a[1],a[2])}},e.pan=function(e,t,n,r){t=t||0,n=n||0,r=r||0,this.recalcMatrix(e);var i=this.computedMatrix,o=(Math.exp(this.computedRadius[0]),i[1]),a=i[5],s=i[9],l=S(o,a,s),u=i[0],c=i[4],i=i[8],l=u*(o/=l)+c*(a/=l)+i*(s/=l),l=S(u-=o*l,c-=a*l,i-=s*l);this.center.move(e,(u/=l)*t+o*n,(c/=l)*t+a*n,(i/=l)*t+s*n);n=Math.exp(this.computedRadius[0]),n=Math.max(1e-4,n+r);this.radius.set(e,Math.log(n))},e.translate=function(e,t,n,r){this.center.move(e,t||0,n||0,r||0)},e.setMatrix=function(e,t,n,r){var i="number"==typeof n?0|n:1,o=((i=i<0||3<i?1:i)+2)%3;t||(this.recalcMatrix(e),t=this.computedMatrix);var a=t[i],s=t[i+4],n=t[i+8];r?(u=Math.abs(a),c=Math.abs(s),f=Math.abs(n),u===(d=Math.max(u,c,f))?(a=a<0?-1:1,s=n=0):a=f===d?(n=n<0?-1:1,s=0):(s=s<0?-1:1,n=0)):(a/=h=S(a,s,n),s/=h,n/=h);var l,r=t[o],u=t[4+o],c=t[8+o],f=r*a+u*s+c*n,d=S(r-=a*f,u-=s*f,c-=n*f),h=s*(c/=d)-n*(u/=d),o=n*(r/=d)-a*c,f=a*u-s*r,d=S(h,o,f);h/=d,o/=d,f/=d,this.center.jump(e,void 0,void 0,void 0),this.radius.idle(e),this.up.jump(e,a,s,n),this.right.jump(e,r,u,c),v=2===i?(d=t[1],i=t[5],l=t[9],m=p<0?-Math.PI/2:Math.PI/2,Math.atan2(d*h+i*o+l*f,d*r+i*u+l*c)):(p=(l=t[2])*a+(y=t[6])*s+(v=t[10])*n,g=l*r+y*u+v*c,y=l*h+y*o+v*f,m=Math.asin(x(p)),Math.atan2(y,g)),this.angle.jump(e,v,m),this.recalcMatrix(e);var f=t[2],p=t[6],y=t[10],g=this.computedMatrix;b(g,t);var v=g[15],m=g[12]/v,t=g[13]/v,g=g[14]/v,v=Math.exp(this.computedRadius[0]);this.center.jump(e,m-f*v,t-p*v,g-y*v)},e.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},e.idle=function(e){this.center.idle(e),this.up.idle(e),this.right.idle(e),this.radius.idle(e),this.angle.idle(e)},e.flush=function(e){this.center.flush(e),this.up.flush(e),this.right.flush(e),this.radius.flush(e),this.angle.flush(e)},e.setDistance=function(e,t){0<t&&this.radius.set(e,Math.log(t))},e.lookAt=function(e,t,n,r){this.recalcMatrix(e),t=t||this.computedEye,n=n||this.computedCenter;var i,o,a,s,l,u=(r=r||this.computedUp)[0],c=r[1],f=r[2],d=S(u,c,f);d<1e-6||(u/=d,c/=d,f/=d,(s=S(o=t[0]-n[0],l=t[1]-n[1],a=t[2]-n[2]))<1e-6||(o/=s,l/=s,a/=s,r=(i=this.computedRight)[0],(i=S(r-=(i=u*r+c*(d=i[1])+f*(t=i[2]))*u,d-=i*c,t-=i*f))<.01&&(i=S(r=c*a-f*l,d=f*o-u*a,t=u*l-c*o))<1e-6||(r/=i,d/=i,t/=i,this.up.set(e,u,c,f),this.right.set(e,r,d,t),this.center.set(e,n[0],n[1],n[2]),this.radius.set(e,Math.log(s)),n=c*t-f*d,s=r*o+d*l+t*a,d=(n/=r=S(n,t=f*r-u*t,d=u*d-c*r))*o+(t/=r)*l+(d/=r)*a,o=Math.asin(x(u*o+c*l+f*a)),c=Math.atan2(d,s),f=(l=this.angle._state)[l.length-1],a=l[l.length-2],f%=2*Math.PI,d=Math.abs(f+2*Math.PI-c),s=Math.abs(f-c),l=Math.abs(f-2*Math.PI-c),d<s&&(f+=2*Math.PI),l<s&&(f-=2*Math.PI),this.angle.jump(this.angle.lastT(),f,a),this.angle.set(e,c,o))))}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r=e*t,i=a*e,o=i-(i-e),i=e-o,e=a*t,e=e-(e-t),t=t-e,t=i*t-(r-o*e-i*e-o*t);if(n)return n[0]=t,n[1]=r,n;return[t,r]};var a=+(Math.pow(2,27)+1)},{}],307:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r=e+t,i=r-e,t=t-i,i=e-(r-i);if(n)return n[0]=i+t,n[1]=r,n;return[i+t,r]}},{}],308:[function(k,e,O){!function(j){!function(){"use strict";var n=k("bit-twiddle"),e=k("dup"),r=k("buffer").Buffer;j.__TYPEDARRAY_POOL||(j.__TYPEDARRAY_POOL={UINT8:e([32,0]),UINT16:e([32,0]),UINT32:e([32,0]),BIGUINT64:e([32,0]),INT8:e([32,0]),INT16:e([32,0]),INT32:e([32,0]),BIGINT64:e([32,0]),FLOAT:e([32,0]),DOUBLE:e([32,0]),DATA:e([32,0]),UINT8C:e([32,0]),BUFFER:e([32,0])});var t="undefined"!=typeof Uint8ClampedArray,i="undefined"!=typeof BigUint64Array,o="undefined"!=typeof BigInt64Array,a=j.__TYPEDARRAY_POOL;a.UINT8C||(a.UINT8C=e([32,0])),a.BIGUINT64||(a.BIGUINT64=e([32,0])),a.BIGINT64||(a.BIGINT64=e([32,0])),a.BUFFER||(a.BUFFER=e([32,0]));var s=a.DATA,l=a.BUFFER;function u(e){var t;e&&(t=e.length||e.byteLength,t=n.log2(t),s[t].push(e))}function c(e){var e=n.nextPow2(e),t=n.log2(e),t=s[t];return 0<t.length?t.pop():new ArrayBuffer(e)}function f(e){return new Uint8Array(c(e),0,e)}function d(e){return new Uint16Array(c(2*e),0,e)}function h(e){return new Uint32Array(c(4*e),0,e)}function p(e){return new Int8Array(c(e),0,e)}function y(e){return new Int16Array(c(2*e),0,e)}function g(e){return new Int32Array(c(4*e),0,e)}function v(e){return new Float32Array(c(4*e),0,e)}function m(e){return new Float64Array(c(8*e),0,e)}function b(e){return t?new Uint8ClampedArray(c(e),0,e):f(e)}function x(e){return i?new BigUint64Array(c(8*e),0,e):null}function _(e){return o?new BigInt64Array(c(8*e),0,e):null}function w(e){return new DataView(c(e),0,e)}function M(e){e=n.nextPow2(e);var t=n.log2(e),t=l[t];return 0<t.length?t.pop():new r(e)}O.free=function(e){var t;r.isBuffer(e)?l[n.log2(e.length)].push(e):(e="[object ArrayBuffer]"!==Object.prototype.toString.call(e)?e.buffer:e)&&(t=e.length||e.byteLength,t=0|n.log2(t),s[t].push(e))},O.freeUint8=O.freeUint16=O.freeUint32=O.freeBigUint64=O.freeInt8=O.freeInt16=O.freeInt32=O.freeBigInt64=O.freeFloat32=O.freeFloat=O.freeFloat64=O.freeDouble=O.freeUint8Clamped=O.freeDataView=function(e){u(e.buffer)},O.freeArrayBuffer=u,O.freeBuffer=function(e){l[n.log2(e.length)].push(e)},O.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return c(e);switch(t){case"uint8":return f(e);case"uint16":return d(e);case"uint32":return h(e);case"int8":return p(e);case"int16":return y(e);case"int32":return g(e);case"float":case"float32":return v(e);case"double":case"float64":return m(e);case"uint8_clamped":return b(e);case"bigint64":return _(e);case"biguint64":return x(e);case"buffer":return M(e);case"data":case"dataview":return w(e);default:return null}return null},O.mallocArrayBuffer=c,O.mallocUint8=f,O.mallocUint16=d,O.mallocUint32=h,O.mallocInt8=p,O.mallocInt16=y,O.mallocInt32=g,O.mallocFloat32=O.mallocFloat=v,O.mallocFloat64=O.mallocDouble=m,O.mallocUint8Clamped=b,O.mallocBigUint64=x,O.mallocBigInt64=_,O.mallocDataView=w,O.mallocBuffer=M,O.clearCache=function(){for(var e=0;e<32;++e)a.UINT8[e].length=0,a.UINT16[e].length=0,a.UINT32[e].length=0,a.INT8[e].length=0,a.INT16[e].length=0,a.INT32[e].length=0,a.FLOAT[e].length=0,a.DOUBLE[e].length=0,a.BIGUINT64[e].length=0,a.BIGINT64[e].length=0,a.UINT8C[e].length=0,s[e].length=0,l[e].length=0}}.call(this)}.call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(e,t,n){"use strict";function r(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}t=(t.exports=r).prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},t.find=function(e){for(var t=e,n=this.roots;n[e]!==e;)e=n[e];for(;n[t]!==e;){var r=n[t];n[t]=e,t=r}return e},t.link=function(e,t){var n,r,i=this.find(e),o=this.find(t);i!==o&&(n=this.ranks,r=this.roots,(e=n[i])<(t=n[o])?r[i]=o:t<e?r[o]=i:++n[r[o]=i])}},{}],310:[function(e,t,n){"use strict";t.exports=function(e,t,n){return 0===e.length?e:t?(n||e.sort(t),function(e,t){for(var n,r=1,i=e.length,o=e[0],a=(e[0],1);a<i;++a)n=o,t(o=e[a],n)&&(a!==r?e[r++]=o:r++);return e.length=r,e}(e,t)):(n||e.sort(),function(e){for(var t=1,n=e.length,r=e[0],i=e[0],o=1;o<n;++o,i=r)i=r,(r=e[o])!==i&&(o!==t?e[t++]=r:t++);return e.length=t,e}(e))}},{}],311:[function(e,t,n){"use strict";t.exports=function(e,t){"object"==typeof t&&null!==t||(t={});return r(e,t.canvas||i,t.context||o,t)};var r=e("./lib/vtext"),i=null,o=null;"undefined"!=typeof document&&((i=document.createElement("canvas")).width=8192,i.height=1024,o=i.getContext("2d"))},{"./lib/vtext":312}],312:[function(e,t,n){t.exports=function(e,t,n,r){var i=64,o=1.25,a={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};r&&(r.size&&0<r.size&&(i=r.size),r.lineSpacing&&0<r.lineSpacing&&(o=r.lineSpacing),r.styletags&&r.styletags.breaklines&&(a.breaklines=!!r.styletags.breaklines),r.styletags&&r.styletags.bolds&&(a.bolds=!!r.styletags.bolds),r.styletags&&r.styletags.italics&&(a.italics=!!r.styletags.italics),r.styletags&&r.styletags.subscripts&&(a.subscripts=!!r.styletags.subscripts),r.styletags&&r.styletags.superscripts&&(a.superscripts=!!r.styletags.superscripts));return n.font=[r.fontStyle,r.fontVariant,r.fontWeight,i+"px",r.font].filter(function(e){return e}).join(" "),n.textAlign="start",n.textBaseline="alphabetic",n.direction="ltr",s(function(e,l,t,n,r,u){t=t.replace(/\n/g,""),t=!0===u.breaklines?t.replace(/\<br\>/g,"\n"):t.replace(/\<br\>/g," ");var i="",o=[];for(f=0;f<t.length;++f)o[f]=i;!0===u.bolds&&(o=F(P,S,t,o));!0===u.italics&&(o=F(E,C,t,o));!0===u.superscripts&&(o=F(L,I,t,o));!0===u.subscripts&&(o=F(z,N,t,o));var a=[],s="";for(f=0;f<t.length;++f)null!==o[f]&&(s+=t[f],a.push(o[f]));var c,f,d,h,p,y=s.split("\n"),g=y.length,v=Math.round(r*n),m=n,b=2*n,x=0,r=g*v+b;e.height<r&&(e.height=r);l.fillStyle="#000",l.fillRect(0,0,e.width,e.height),l.fillStyle="#fff";var _=0,w="";function M(){var e;""!==w&&(e=l.measureText(w).width,l.fillText(w,m+d,b+h),d+=e)}function j(){return Math.round(p)+"px "}for(c=0;c<g;++c){var k=y[c]+"\n";for(h=c*v,p=n,w="",f=d=0;f<k.length;++f){var O=f+_<a.length?a[f+_]:a[a.length-1];i===O?w+=k[f]:(M(),w=k[f],void 0!==O&&(function(e,t){var n,r,i,o,a,s=""+l.font;!0===u.subscripts&&(n=e.indexOf(D),r=t.indexOf(D),(n=-1<n?parseInt(e[1+n]):0)!==(r=-1<r?parseInt(t[1+r]):0)&&(s=s.replace(j(),"?px "),p*=Math.pow(.75,r-n),s=s.replace("?px ",j())),h+=.25*v*(r-n)),!0===u.superscripts&&(o=e.indexOf(R),i=t.indexOf(R),(o=-1<o?parseInt(e[1+o]):0)!==(i=-1<i?parseInt(t[1+i]):0)&&(s=s.replace(j(),"?px "),p*=Math.pow(.75,i-o),s=s.replace("?px ",j())),h-=.25*v*(i-o)),!0===u.bolds&&(i=-1<e.indexOf(S),o=-1<t.indexOf(S),!i&&o&&(s=a?s.replace("italic ","italic bold "):"bold "+s),i&&!o&&(s=s.replace("bold ",""))),!0===u.italics&&(a=-1<e.indexOf(C),t=-1<t.indexOf(C),!a&&t&&(s="italic "+s),a&&!t&&(s=s.replace("italic ",""))),l.font=s}(i,O),i=O))}M(),_+=k.length;var A=0|Math.round(d+2*m);x<A&&(x=A)}r=x,e=b+v*g;return T(l.getImageData(0,0,r,e).data,[e,r,4]).pick(-1,-1,0).transpose(1,0)}(t,n,e,i,o,a),r,i)},t.exports.processPixels=s;var y=e("surface-nets"),T=e("ndarray"),g=e("simplify-planar-graph"),v=e("clean-pslg"),m=e("cdt2d"),b=e("planar-graph-to-polyline"),P="b",S="b|",E="i",C="i|",L="sup",R="+",I="+1",z="sub",D="-",N="-1";function F(e,t,n,r){for(var i,o="<"+e+">",a="</"+e+">",s=o.length,l=a.length,u=t[0]===R||t[0]===D,c=0;-1<c&&-1!==(c=n.indexOf(o,c))&&-1!==(i=n.indexOf(a,c+s))&&!(i<=c);){for(var f,d=c;d<i+l;++d)d<c+s||i<=d?(r[d]=null,n=n.substr(0,d)+" "+n.substr(d+1)):null!==r[d]&&(-1===(f=r[d].indexOf(t[0]))?r[d]+=t:u&&(r[d]=r[d].substr(0,f+1)+(1+parseInt(r[d][f+1]))+r[d].substr(f+2)));var h=c+s,h=n.substr(h,i-h).indexOf(o),c=-1!==h?h:i+l}return r}function r(e,t,n,r){var e=(r=r,e=y(e=e,128),r?g(e.cells,e.positions,.25):{edges:e.cells,positions:e.positions}),i=function(e,t,n){for(var r=t.textAlign||"start",i=t.textBaseline||"alphabetic",o=[1<<30,1<<30],a=[0,0],s=e.length,l=0;l<s;++l)for(var u=e[l],c=0;c<2;++c)o[c]=0|Math.min(o[c],u[c]),a[c]=0|Math.max(a[c],u[c]);var f=0;switch(r){case"center":f=-.5*(o[0]+a[0]);break;case"right":case"end":f=-a[0];break;case"left":case"start":f=-o[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+r+"'")}var d=0;switch(i){case"hanging":case"top":d=-o[1];break;case"middle":d=-.5*(o[1]+a[1]);break;case"alphabetic":case"ideographic":d=-3*n;break;case"bottom":d=-a[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+i+"'")}var h=1/n;return"lineHeight"in t?h*=+t.lineHeight:"width"in t?h=t.width/(a[0]-o[0]):"height"in t&&(h=t.height/(a[1]-o[1])),e.map(function(e){return[h*(e[0]+f),h*(e[1]+d)]})}(e.positions,t,n),e=e.edges,o="ccw"===t.orientation;if(v(i,e),t.polygons||t.polygon||t.polyline){for(var a=b(e,i),s=new Array(a.length),l=0;l<a.length;++l){for(var u=a[l],c=new Array(u.length),f=0;f<u.length;++f){for(var d=u[f],h=new Array(d.length),p=0;p<d.length;++p)h[p]=i[d[p]].slice();o&&h.reverse(),c[f]=h}s[l]=c}return s}return t.triangles||t.triangulate||t.triangle?{cells:m(i,e,{delaunay:!1,exterior:!1,interior:!0}),positions:i}:{edges:e,positions:i}}function s(e,t,n){try{return r(e,t,n,!0)}catch(e){}try{return r(e,t,n,!1)}catch(e){}return t.polygons||t.polyline||t.polygon?[]:t.triangles||t.triangulate||t.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(e,b,t){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=h);var t=!1;if("function"==typeof WeakMap){var n=WeakMap;if("undefined"==typeof navigator||!/Firefox/.test(navigator.userAgent)){var e=new n,r=Object.freeze({});if(e.set(r,1),1===e.get(r))return b.exports=WeakMap;t=!0}}Object.prototype.hasOwnProperty;var i,o=Object.getOwnPropertyNames,a=Object.defineProperty,s=Object.isExtensible,l="weakmap:",u=l+"ident:"+Math.random()+"___";"undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array&&(r=new ArrayBuffer(25),r=new Uint8Array(r),crypto.getRandomValues(r),u=l+"rand:"+Array.prototype.map.call(r,function(e){return(e%36).toString(36)}).join("")+"___"),a(Object,"getOwnPropertyNames",{value:function(e){return o(e).filter(p)}}),"getPropertyNames"in Object&&(i=Object.getPropertyNames,a(Object,"getPropertyNames",{value:function(e){return i(e).filter(p)}})),function(){var t=Object.freeze;a(Object,"freeze",{value:function(e){return y(e),t(e)}});var n=Object.seal;a(Object,"seal",{value:function(e){return y(e),n(e)}});var r=Object.preventExtensions;a(Object,"preventExtensions",{value:function(e){return y(e),r(e)}})}();var c=!1,f=0,d=function(){this instanceof d||v();var r=[],i=[],o=f++;return Object.create(d.prototype,{get___:{value:g(function(e,t){var n=y(e);return n?o in n?n[o]:t:0<=(e=r.indexOf(e))?i[e]:t})},has___:{value:g(function(e){var t=y(e);return t?o in t:0<=r.indexOf(e)})},set___:{value:g(function(e,t){var n=y(e);return n?n[o]=t:0<=(n=r.indexOf(e))?i[n]=t:(n=r.length,i[n]=t,r[n]=e),this})},delete___:{value:g(function(e){var t=y(e);return t?o in t&&delete t[o]:!((t=r.indexOf(e))<0)&&(e=r.length-1,r[t]=void 0,i[t]=i[e],r[t]=r[e],r.length=e,i.length=e,!0)})}})};d.prototype=Object.create(Object.prototype,{get:{value:function(e,t){return this.get___(e,t)},writable:!0,configurable:!0},has:{value:function(e){return this.has___(e)},writable:!0,configurable:!0},set:{value:function(e,t){return this.set___(e,t)},writable:!0,configurable:!0},delete:{value:function(e){return this.delete___(e)},writable:!0,configurable:!0}}),"function"==typeof n?(t&&"undefined"!=typeof Proxy&&(Proxy=void 0),m.prototype=d.prototype,b.exports=m,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})):("undefined"!=typeof Proxy&&(Proxy=void 0),b.exports=d)}function h(e){e.permitHostObjects___&&e.permitHostObjects___(h)}function p(e){return!(e.substr(0,l.length)==l&&"___"===e.substr(e.length-3))}function y(e){if(e!==Object(e))throw new TypeError("Not an object: "+e);var t=e[u];if(t&&t.key===e)return t;if(s(e)){t={key:e};try{return a(e,u,{value:t,writable:!1,enumerable:!1,configurable:!1}),t}catch(e){return}}}function g(e){return e.prototype=null,Object.freeze(e)}function v(){c||"undefined"==typeof console||(c=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}function m(){this instanceof d||v();var e,r=new n,i=void 0,o=!1;return e=t?function(e,t){return r.set(e,t),r.has(e)||(i=i||new d).set(e,t),this}:function(t,n){if(o)try{r.set(t,n)}catch(e){(i=i||new d).set___(t,n)}else r.set(t,n);return this},Object.create(d.prototype,{get___:{value:g(function(e,t){return i?r.has(e)?r.get(e):i.get___(e,t):r.get(e,t)})},has___:{value:g(function(e){return r.has(e)||!!i&&i.has___(e)})},set___:{value:g(e)},delete___:{value:g(function(e){var t=!!r.delete(e);return i&&i.delete___(e)||t})},permitHostObjects___:{value:g(function(e){if(e!==h)throw new Error("bogus call to permitHostObjects___");o=!0})}})}}()},{}],314:[function(e,t,n){var r=e("./hidden-store.js");t.exports=function(){var n={};return function(e){if(("object"!=typeof e||null===e)&&"function"!=typeof e)throw new Error("Weakmap-shim: Key must be object");var t=e.valueOf(n);return t&&t.identity===n?t:r(e,n)}}},{"./hidden-store.js":315}],315:[function(e,t,n){t.exports=function(e,t){var n={identity:t},r=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?r.apply(this,arguments):n},writable:!0}),n}},{}],316:[function(e,t,n){var r=e("./create-store.js");t.exports=function(){var n=r();return{get:function(e,t){e=n(e);return e.hasOwnProperty("value")?e.value:t},set:function(e,t){return n(e).value=t,this},has:function(e){return"value"in n(e)},delete:function(e){return delete n(e).value}}}},{"./create-store.js":314}],317:[function(e,t,n){"use strict";var s,l,r=function(){return function(e,t,n,r,i,o){var a=e[0],n=n[0],s=[0],l=n;r|=0;for(var u=0,c=n,u=0;u<a;++u){var f=t[r]-o,d=t[r+l]-o;0<=f!=0<=d&&i.push(s[0]+.5+.5*(f+d)/(f-d)),r+=c,++s[0]}}};t.exports=(t={funcName:(t={funcName:"zeroCrossings"}).funcName},s=r.bind(void 0,t),l={},function(e,t,n){var r=e.dtype,i=e.order,o=[r,i.join()].join(),a=l[o];return a||(l[o]=a=s([r,i])),a(e.shape.slice(0),e.data,e.stride,0|e.offset,t,n)})},{}],318:[function(e,t,n){"use strict";t.exports=function(e,t){var n=[];return t=+t||0,r(e.hi(e.shape[0]-1),n,t),n};var r=e("./lib/zc-core")},{"./lib/zc-core":317}]},{},[6])(6)})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],963:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i,o=e("./lib/build-log"),a=e("./lib/epsilon"),s=e("./lib/intersecter"),l=e("./lib/segment-chainer"),u=e("./lib/segment-selector"),c=e("./lib/geojson"),f=!1,d=a();function h(e,t,n){e=i.segments(e),t=i.segments(t),t=n(i.combine(e,t));return i.polygon(t)}i={buildLog:function(e){return!0===e?f=o():!1===e&&(f=!1),!1!==f&&f.list},epsilon:function(e){return d.epsilon(e)},segments:function(e){var t=s(!0,d,f);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){return{combined:s(!1,d,f).calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:u.union(e.combined,f),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:u.intersect(e.combined,f),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:u.difference(e.combined,f),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:u.differenceRev(e.combined,f),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:u.xor(e.combined,f),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:l(e.segments,d,f),inverted:e.inverted}},polygonFromGeoJSON:function(e){return c.toPolygon(i,e)},polygonToGeoJSON:function(e){return c.fromPolygon(i,d,e)},union:function(e,t){return h(e,t,i.selectUnion)},intersect:function(e,t){return h(e,t,i.selectIntersect)},difference:function(e,t){return h(e,t,i.selectDifference)},differenceRev:function(e,t){return h(e,t,i.selectDifferenceRev)},xor:function(e,t){return h(e,t,i.selectXor)}},"object"===("undefined"==typeof window?"undefined":r(window))&&(window.PolyBool=i),t.exports=i},{"./lib/build-log":964,"./lib/epsilon":965,"./lib/geojson":966,"./lib/intersecter":967,"./lib/segment-chainer":969,"./lib/segment-selector":970}],964:[function(e,t,n){"use strict";t.exports=function(){var n,e=0,t=!1;function r(e,t){return n.list.push({type:e,data:t?JSON.parse(JSON.stringify(t)):void 0}),n}return n={list:[],segmentId:function(){return e++},checkIntersection:function(e,t){return r("check",{seg1:e,seg2:t})},segmentChop:function(e,t){return r("div_seg",{seg:e,pt:t}),r("chop",{seg:e,pt:t})},statusRemove:function(e){return r("pop_seg",{seg:e})},segmentUpdate:function(e){return r("seg_update",{seg:e})},segmentNew:function(e,t){return r("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return r("rem_seg",{seg:e})},tempStatus:function(e,t,n){return r("temp_status",{seg:e,above:t,below:n})},rewind:function(e){return r("rewind",{seg:e})},status:function(e,t,n){return r("status",{seg:e,above:t,below:n})},vert:function(e){return e===t?n:r("vert",{x:t=e})},log:function(e){return r("log",{txt:e="string"!=typeof e?JSON.stringify(e,!1,"  "):e})},reset:function(){return r("reset")},selected:function(e){return r("selected",{segs:e})},chainStart:function(e){return r("chain_start",{seg:e})},chainRemoveHead:function(e,t){return r("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return r("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return r("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return r("chain_match",{index:e})},chainClose:function(e){return r("chain_close",{index:e})},chainAddHead:function(e,t){return r("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return r("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return r("chain_con",{index1:e,index2:t})},chainReverse:function(e){return r("chain_rev",{index:e})},chainJoin:function(e,t){return r("chain_join",{index1:e,index2:t})},done:function(){return r("done")}}}},{}],965:[function(e,t,n){"use strict";t.exports=function(c){"number"!=typeof c&&(c=1e-10);var n={epsilon:function(e){return c="number"==typeof e?e:c},pointAboveOrOnLine:function(e,t,n){var r=t[0],i=t[1],o=n[0],t=n[1],n=e[0],e=e[1];return-c<=(o-r)*(e-i)-(t-i)*(n-r)},pointBetween:function(e,t,n){var r=e[1]-t[1],i=n[0]-t[0],e=e[0]-t[0],t=n[1]-t[1],r=e*i+r*t;return!(r<c)&&!(-c<r-(i*i+t*t))},pointsSameX:function(e,t){return Math.abs(e[0]-t[0])<c},pointsSameY:function(e,t){return Math.abs(e[1]-t[1])<c},pointsSame:function(e,t){return n.pointsSameX(e,t)&&n.pointsSameY(e,t)},pointsCompare:function(e,t){return n.pointsSameX(e,t)?n.pointsSameY(e,t)?0:e[1]<t[1]?-1:1:e[0]<t[0]?-1:1},pointsCollinear:function(e,t,n){var r=e[0]-t[0],i=e[1]-t[1],e=t[0]-n[0],n=t[1]-n[1];return Math.abs(r*n-e*i)<c},linesIntersect:function(e,t,n,r){var i=t[0]-e[0],o=t[1]-e[1],a=r[0]-n[0],s=r[1]-n[1],t=i*s-o*a;if(Math.abs(t)<c)return!1;r=e[0]-n[0],n=e[1]-n[1],s=(a*n-s*r)/t,t=(i*n-o*r)/t,o={alongA:0,alongB:0,pt:[e[0]+s*i,e[1]+s*o]};return o.alongA=s<=-c?-2:s<c?-1:s-1<=-c?0:s-1<c?1:2,o.alongB=t<=-c?-2:t<c?-1:t-1<=-c?0:t-1<c?1:2,o},pointInsideRegion:function(e,t){for(var n=e[0],r=e[1],i=t[t.length-1][0],o=t[t.length-1][1],a=!1,s=0;s<t.length;s++){var l=t[s][0],u=t[s][1];c<u-r!=c<o-r&&c<(i-l)*(r-u)/(o-u)+l-n&&(a=!a),i=l,o=u}return a}};return n}},{}],966:[function(e,t,n){"use strict";t.exports={toPolygon:function(i,e){function t(e){if(e.length<=0)return i.segments({inverted:!1,regions:[]});function t(e){e=e.slice(0,e.length-1);return i.segments({inverted:!1,regions:[e]})}for(var n=t(e[0]),r=1;r<e.length;r++)n=i.selectDifference(i.combine(n,t(e[r])));return n}if("Polygon"===e.type)return i.polygon(t(e.coordinates));if("MultiPolygon"!==e.type)throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon");for(var n=i.segments({inverted:!1,regions:[]}),r=0;r<e.coordinates.length;r++)n=i.selectUnion(i.combine(n,t(e.coordinates[r])));return i.polygon(n)},fromPolygon:function(e,n,t){function a(e,t){return n.pointInsideRegion([.5*(e[0][0]+e[1][0]),.5*(e[0][1]+e[1][1])],t)}function s(e){return{region:e,children:[]}}t=e.polygon(e.segments(t));var r=s(null);for(var i=0;i<t.regions.length;i++){var o=t.regions[i];o.length<3||!function e(t,n){for(var r=0;r<t.children.length;r++)if(a(n,(i=t.children[r]).region))return void e(i,n);for(var i,o=s(n),r=0;r<t.children.length;r++)a((i=t.children[r]).region,n)&&(o.children.push(i),t.children.splice(r,1),r--);t.children.push(o)}(r,o)}function l(e,t){for(var n=0,r=e[e.length-1][0],i=e[e.length-1][1],o=[],a=0;a<e.length;a++){var s=e[a][0],l=e[a][1];o.push([s,l]),n+=l*r-s*i,r=s,i=l}return n<0!==t&&o.reverse(),o.push([o[0][0],o[0][1]]),o}var u=[];function c(e){var t=[l(e.region,!1)];u.push(t);for(var n=0;n<e.children.length;n++)t.push(function(e){for(var t=0;t<e.children.length;t++)c(e.children[t]);return l(e.region,!0)}(e.children[n]))}for(i=0;i<r.children.length;i++)c(r.children[i]);return u.length<=0?{type:"Polygon",coordinates:[]}:1==u.length?{type:"Polygon",coordinates:u[0]}:{type:"MultiPolygon",coordinates:u}}}},{}],967:[function(e,t,n){"use strict";var v=e("./linked-list");t.exports=function(d,h,p){function i(e,t,n){return{id:p?p.segmentId():-1,start:e,end:t,myFill:{above:n.myFill.above,below:n.myFill.below},otherFill:null}}var y=v.create();function o(a,s){y.insertBefore(a,function(e){var t,n,r,i,o;return(t=a.isStart,n=a.pt,r=s,i=e.isStart,o=e.pt,e=e.other.pt,0!==(n=h.pointsCompare(n,o))?n:h.pointsSame(r,e)?0:t!==i?t?1:-1:h.pointAboveOrOnLine(r,i?o:e,i?e:o)?1:-1)<0})}function a(e,t){var n,r=(r=e,n=t,o(n=v.node({isStart:!0,pt:r.start,seg:r,primary:n,other:null,status:null}),r.end),n);return n=r,t=t,t=v.node({isStart:!1,pt:e.end,seg:e,primary:t,other:n,status:null}),o(n.other=t,n.pt),r}function g(e,t){var n,r=i(t,e.seg.end,e.seg);return n=e,t=t,p&&p.segmentChop(n.seg,t),n.other.remove(),n.seg.end=t,n.other.pt=t,o(n.other,n.pt),a(r,e.primary)}function s(e,t){var n=v.create();function r(i){return n.findTransition(function(e){var t,n,r;return 0<(t=i,n=e.ev,r=t.seg.start,e=t.seg.end,t=n.seg.start,n=n.seg.end,h.pointsCollinear(r,t,n)?h.pointsCollinear(e,t,n)||h.pointAboveOrOnLine(e,t,n)?1:-1:h.pointAboveOrOnLine(r,t,n)?1:-1)})}function i(e,t){var n=e.seg,r=t.seg,i=n.start,o=n.end,a=r.start,s=r.end;p&&p.checkIntersection(n,r);var l=h.linesIntersect(i,o,a,s);if(!1===l){if(!h.pointsCollinear(i,o,a))return!1;if(h.pointsSame(i,s)||h.pointsSame(o,a))return!1;var u=h.pointsSame(i,a),c=h.pointsSame(o,s);if(u&&c)return t;n=!u&&h.pointBetween(i,a,s),r=!c&&h.pointBetween(o,a,s);if(u)return r?g(t,o):g(e,s),t;n&&(c||(r?g(t,o):g(e,s)),g(t,i))}else 0===l.alongA&&(-1===l.alongB?g(e,a):0===l.alongB?g(e,l.pt):1===l.alongB&&g(e,s)),0===l.alongB&&(-1===l.alongA?g(t,i):0===l.alongA?g(t,l.pt):1===l.alongA&&g(t,o));return!1}for(var o=[];!y.isEmpty();){var a=y.getHead();if(p&&p.vert(a.pt[0]),a.isStart){p&&p.segmentNew(a.seg,a.primary);var s=r(a),l=s.before?s.before.ev:null,u=s.after?s.after.ev:null;p&&p.tempStatus(a.seg,!!l&&l.seg,!!u&&u.seg);var c,f=function(){if(l){var e=i(a,l);if(e)return e}return!!u&&i(a,u)}();if(f&&(d?(c=null===a.seg.myFill.below||a.seg.myFill.above!==a.seg.myFill.below)&&(f.seg.myFill.above=!f.seg.myFill.above):f.seg.otherFill=a.seg.myFill,p&&p.segmentUpdate(f.seg),a.other.remove(),a.remove()),y.getHead()!==a){p&&p.rewind(a.seg);continue}d?(c=null===a.seg.myFill.below||a.seg.myFill.above!==a.seg.myFill.below,a.seg.myFill.below=u?u.seg.myFill.above:e,a.seg.myFill.above=c?!a.seg.myFill.below:a.seg.myFill.below):null===a.seg.otherFill&&(f=u?(a.primary===u.primary?u.seg.otherFill:u.seg.myFill).above:a.primary?t:e,a.seg.otherFill={above:f,below:f}),p&&p.status(a.seg,!!l&&l.seg,!!u&&u.seg),a.other.status=s.insert(v.node({ev:a}))}else{var s=a.status;if(null===s)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");n.exists(s.prev)&&n.exists(s.next)&&i(s.prev.ev,s.next.ev),p&&p.statusRemove(s.ev.seg),s.remove(),a.primary||(s=a.seg.myFill,a.seg.myFill=a.seg.otherFill,a.seg.otherFill=s),o.push(a.seg)}y.getHead().remove()}return p&&p.done(),o}return d?{addRegion:function(e){for(var t,n=e[e.length-1],r=0;r<e.length;r++){var i=n,n=e[r],o=h.pointsCompare(i,n);0!==o&&a((t=o<0?i:n,i=o<0?n:i,{id:p?p.segmentId():-1,start:t,end:i,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(e){return s(e,!1)}}:{calculate:function(e,t,n,r){return e.forEach(function(e){a(i(e.start,e.end,e),!0)}),n.forEach(function(e){a(i(e.start,e.end,e),!1)}),s(t,r)}}}},{"./linked-list":968}],968:[function(e,t,n){"use strict";t.exports={create:function(){var i={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==i.root},isEmpty:function(){return null===i.root.next},getHead:function(){return i.root.next},insertBefore:function(e,t){for(var n=i.root,r=i.root.next;null!==r;){if(t(r))return e.prev=r.prev,(e.next=r).prev.next=e,void(r.prev=e);r=(n=r).next}(n.next=e).prev=n,e.next=null},findTransition:function(e){for(var t=i.root,n=i.root.next;null!==n&&!e(n);)n=(t=n).next;return{before:t===i.root?null:t,after:n,insert:function(e){return e.prev=t,e.next=n,t.next=e,null!==n&&(n.prev=e),e}}}};return i},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}}},{}],969:[function(e,t,n){"use strict";t.exports=function(e,b,x){var _=[],w=[];return e.forEach(function(e){var t=e.start,n=e.end;if(b.pointsSame(t,n))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{x&&x.chainStart(e);for(var r={index:0,matches_head:!1,matches_pt1:!1},i={index:0,matches_head:!1,matches_pt1:!1},o=r,a=0;a<_.length;a++){var s=(d=_[a])[0],l=(d[1],d[d.length-1]);d[d.length-2];if(b.pointsSame(s,t)){if(g(a,!0,!0))break}else if(b.pointsSame(s,n)){if(g(a,!0,!1))break}else if(b.pointsSame(l,t)){if(g(a,!1,!0))break}else if(b.pointsSame(l,n)&&g(a,!1,!1))break}if(o===r)return _.push([t,n]),void(x&&x.chainNew(t,n));if(o===i){x&&x.chainMatch(r.index);var u=r.index,c=r.matches_pt1?n:t,f=r.matches_head,d=_[u],h=f?d[0]:d[d.length-1],p=f?d[1]:d[d.length-2],y=f?d[d.length-1]:d[0],e=f?d[d.length-2]:d[1];return(b.pointsCollinear(p,h,c)&&(f?(x&&x.chainRemoveHead(r.index,c),d.shift()):(x&&x.chainRemoveTail(r.index,c),d.pop()),h=p),b.pointsSame(y,c))?(_.splice(u,1),b.pointsCollinear(e,y,h)&&(f?(x&&x.chainRemoveTail(r.index,h),d.pop()):(x&&x.chainRemoveHead(r.index,h),d.shift())),x&&x.chainClose(r.index),void w.push(d)):void(f?(x&&x.chainAddHead(r.index,c),d.unshift(c)):(x&&x.chainAddTail(r.index,c),d.push(c)))}h=r.index,f=i.index;x&&x.chainConnect(h,f);c=_[h].length<_[f].length;r.matches_head?i.matches_head?c?(v(h),m(h,f)):(v(f),m(f,h)):m(f,h):i.matches_head?m(h,f):c?(v(h),m(f,h)):(v(f),m(h,f))}function g(e,t,n){if(o.index=e,o.matches_head=t,o.matches_pt1=n,o!==r)return o=null,1;o=i}function v(e){x&&x.chainReverse(e),_[e].reverse()}function m(e,t){var n=_[e],r=_[t],i=n[n.length-1],o=n[n.length-2],a=r[0],s=r[1];b.pointsCollinear(o,i,a)&&(x&&x.chainRemoveTail(e,i),n.pop(),i=o),b.pointsCollinear(i,a,s)&&(x&&x.chainRemoveHead(t,a),r.shift()),x&&x.chainJoin(e,t),_[e]=n.concat(r),_.splice(t,1)}}),w}},{}],970:[function(e,t,n){"use strict";function r(e,n,r){var i=[];return e.forEach(function(e){var t=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);0!==n[t]&&i.push({id:r?r.segmentId():-1,start:e.start,end:e.end,myFill:{above:1===n[t],below:2===n[t]},otherFill:null})}),r&&r.selected(i),i}t.exports={union:function(e,t){return r(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return r(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return r(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return r(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return r(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}}},{}],971:[function(e,t,n){"use strict";var r,i,t=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var l,u=[],c=!1,f=-1;function d(){c&&l&&(c=!1,l.length?u=l.concat(u):f=-1,u.length&&h())}function h(){if(!c){var e=s(d);c=!0;for(var t=u.length;t;){for(l=u,u=[];++f<t;)l&&l[f].run();f=-1,t=u.length}l=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function y(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||c||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=y,t.addListener=y,t.once=y,t.off=y,t.removeListener=y,t.removeAllListeners=y,t.emit=y,t.prependListener=y,t.prependOnceListener=y,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],972:[function(e,t,n){"use strict";function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t=function(a){var l,e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function o(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i,o,a,s,t=t&&t.prototype instanceof g?t:g,t=Object.create(t.prototype),r=new k(r||[]);return t._invoke=(i=e,o=n,a=r,s=f,function(e,t){if(s===h)throw new Error("Generator is already running");if(s===p){if("throw"===e)throw t;return A()}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){var r=function e(t,n){var r=t.iterator[n.method];if(r===l){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=l,e(t,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var r=c(r,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,y;r=r.arg;if(!r)return n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y;{if(!r.done)return r;n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=l)}n.delegate=null;return y}(n,a);if(r){if(r===y)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===f)throw s=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=h;r=c(i,o,a);if("normal"===r.type){if(s=a.done?p:d,r.arg!==y)return{value:r.arg,done:a.done}}else"throw"===r.type&&(s=p,a.method="throw",a.arg=r.arg)}}),t}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var f="suspendedStart",d="suspendedYield",h="executing",p="completed",y={};function g(){}function v(){}function m(){}var b={};o(b,r,function(){return this});t=Object.getPrototypeOf,t=t&&t(t(O([])));t&&t!==e&&u.call(t,r)&&(b=t);var x=m.prototype=g.prototype=Object.create(b);function _(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function w(a,s){var t;this._invoke=function(n,r){function e(){return new s(function(e,t){!function t(e,n,r,i){e=c(a[e],a,n);if("throw"!==e.type){var o=e.arg;return(n=o.value)&&"object"===T(n)&&u.call(n,"__await")?s.resolve(n.__await).then(function(e){t("next",e,r,i)},function(e){t("throw",e,r,i)}):s.resolve(n).then(function(e){o.value=e,r(o)},function(e){return t("throw",e,r,i)})}i(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function O(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=l,e.done=!0,e};return e.next=e}}return{next:A}}function A(){return{value:l,done:!0}}return o(x,"constructor",v.prototype=m),o(m,"constructor",v),v.displayName=o(m,i,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,o(e,i,"GeneratorFunction")),e.prototype=Object.create(x),e},a.awrap=function(e){return{__await:e}},_(w.prototype),o(w.prototype,n,function(){return this}),a.AsyncIterator=w,a.async=function(e,t,n,r,i){void 0===i&&(i=Promise);var o=new w(s(e,t,n,r),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},_(x),o(x,i,"Generator"),o(x,r,function(){return this}),o(x,"toString",function(){return"[object Generator]"}),a.keys=function(n){var e,r=[];for(e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return o.type="throw",o.arg=n,r.next=e,t&&(r.method="next",r.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=u.call(i,"catchLoc"),s=u.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r,i=n.completion;return"throw"===i.type&&(r=i.arg,j(n)),r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=l),y}},a}("object"===(void 0===t?"undefined":T(t))?t.exports:{});try{regeneratorRuntime=t}catch(e){"object"===("undefined"==typeof globalThis?"undefined":T(globalThis))?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},{}],973:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.incircle=function(e,t,n,r,i,o,a,s){var l=e-a,u=n-a,c=i-a,f=t-s,d=r-s,h=o-s,p=u*h,y=c*d,g=l*l+f*f,v=c*f,m=l*h,b=u*u+d*d,d=l*d,f=u*f,c=c*c+h*h,h=g*(p-y)+b*(v-m)+c*(d-f),f=(Math.abs(p)+Math.abs(y))*g+(Math.abs(v)+Math.abs(m))*b+(Math.abs(d)+Math.abs(f))*c,c=x*f;if(c<h||c<-h)return h;return function(e,t,n,r,i,o,a,s,l){var u,c,f,d,h,p,y,g,v,m,b,x,_,w,M,j,k,O,A,T=e-a,P=n-a,S=i-a,E=t-s,C=r-s,L=o-s;j=P*L,g=G.splitter*P,m=P-(v=g-(g-P)),g=G.splitter*L,k=m*(x=L-(b=g-(g-L)))-(j-v*b-m*b-v*x),O=S*C,g=G.splitter*S,m=S-(v=g-(g-S)),g=G.splitter*C,V=k-(_=k-(A=m*(x=C-(b=g-(g-C)))-(O-v*b-m*b-v*x))),X[0]=k-(_+V)+(V-A),V=(M=j-((w=j+_)-(V=w-j))+(_-V))-(_=M-O),X[1]=M-(_+V)+(V-O),V=(U=w+_)-w,X[2]=w-(U-V)+(_-V),X[3]=U,j=S*E,g=G.splitter*S,m=S-(v=g-(g-S)),g=G.splitter*E,k=m*(x=E-(b=g-(g-E)))-(j-v*b-m*b-v*x),O=T*L,g=G.splitter*T,m=T-(v=g-(g-T)),g=G.splitter*L,V=k-(_=k-(A=m*(x=L-(b=g-(g-L)))-(O-v*b-m*b-v*x))),Z[0]=k-(_+V)+(V-A),V=(M=j-((w=j+_)-(V=w-j))+(_-V))-(_=M-O),Z[1]=M-(_+V)+(V-O),V=(U=w+_)-w,Z[2]=w-(U-V)+(_-V),Z[3]=U,j=T*C,g=G.splitter*T,m=T-(v=g-(g-T)),g=G.splitter*C,k=m*(x=C-(b=g-(g-C)))-(j-v*b-m*b-v*x),O=P*E,g=G.splitter*P,m=P-(v=g-(g-P)),g=G.splitter*E,V=k-(_=k-(A=m*(x=E-(b=g-(g-E)))-(O-v*b-m*b-v*x))),$[0]=k-(_+V)+(V-A),V=(M=j-((w=j+_)-(V=w-j))+(_-V))-(_=M-O),$[1]=M-(_+V)+(V-O),V=(U=w+_)-w,$[2]=w-(U-V)+(_-V),$[3]=U,u=(0,G.sum)((0,G.sum)((0,G.sum)((0,G.scale)((0,G.scale)(4,X,T,pe),pe,T,ye),ye,(0,G.scale)((0,G.scale)(4,X,E,pe),pe,E,ge),ge,me),me,(0,G.sum)((0,G.scale)((0,G.scale)(4,Z,P,pe),pe,P,ye),ye,(0,G.scale)((0,G.scale)(4,Z,C,pe),pe,C,ge),ge,be),be,_e),_e,(0,G.sum)((0,G.scale)((0,G.scale)(4,$,S,pe),pe,S,ye),ye,(0,G.scale)((0,G.scale)(4,$,L,pe),pe,L,ge),ge,me),me,we);var R=(0,G.estimate)(u,we),I=W*l;if(I<=R||I<=-R)return R;if(e=e-(T+(V=e-T))+(V-a),t=t-(E+(V=t-E))+(V-s),n=n-(P+(V=n-P))+(V-a),r=r-(C+(V=r-C))+(V-s),a=i-(S+(V=i-S))+(V-a),s=o-(L+(V=o-L))+(V-s),0==e&&0==n&&0==a&&0==t&&0==r&&0==s)return R;if(I=Y*l+G.resulterrbound*Math.abs(R),(R+=(T*T+E*E)*(P*s+L*n-(C*a+S*r))+2*(T*e+E*t)*(P*L-C*S)+((P*P+C*C)*(S*t+E*a-(L*e+T*s))+2*(P*n+C*r)*(S*E-L*T))+((S*S+L*L)*(T*r+C*e-(E*n+P*t))+2*(S*a+L*s)*(T*C-E*P)))>=I||I<=-R)return R;0==n&&0==r&&0==a&&0==s||(j=T*T,g=G.splitter*T,k=(m=T-(v=g-(g-T)))*m-(j-v*v-(v+v)*m),O=E*E,g=G.splitter*E,V=(_=k+(A=(m=E-(v=g-(g-E)))*m-(O-v*v-(v+v)*m)))-k,K[0]=k-(_-V)+(A-V),V=(_=(M=j-((w=j+_)-(V=w-j))+(_-V))+O)-M,K[1]=M-(_-V)+(O-V),V=(U=w+_)-w,K[2]=w-(U-V)+(_-V),K[3]=U);0==a&&0==s&&0==e&&0==t||(j=P*P,g=G.splitter*P,k=(m=P-(v=g-(g-P)))*m-(j-v*v-(v+v)*m),O=C*C,g=G.splitter*C,V=(_=k+(A=(m=C-(v=g-(g-C)))*m-(O-v*v-(v+v)*m)))-k,Q[0]=k-(_-V)+(A-V),V=(_=(M=j-((w=j+_)-(V=w-j))+(_-V))+O)-M,Q[1]=M-(_-V)+(O-V),V=(U=w+_)-w,Q[2]=w-(U-V)+(_-V),Q[3]=U);0==e&&0==t&&0==n&&0==r||(j=S*S,g=G.splitter*S,k=(m=S-(v=g-(g-S)))*m-(j-v*v-(v+v)*m),O=L*L,g=G.splitter*L,V=(_=k+(A=(m=L-(v=g-(g-L)))*m-(O-v*v-(v+v)*m)))-k,J[0]=k-(_-V)+(A-V),V=(_=(M=j-((w=j+_)-(V=w-j))+(_-V))+O)-M,J[1]=M-(_-V)+(O-V),V=(U=w+_)-w,J[2]=w-(U-V)+(_-V),J[3]=U);0!=e&&(z=(0,G.scale)(4,X,e,ne),u=Me(u,(0,G.sum_three)((0,G.scale)(z,ne,2*T,ye),ye,(0,G.scale)((0,G.scale)(4,J,e,pe),pe,C,ge),ge,(0,G.scale)((0,G.scale)(4,Q,e,pe),pe,-L,ve),ve,me,xe),xe));0!=t&&(c=(0,G.scale)(4,X,t,re),u=Me(u,(0,G.sum_three)((0,G.scale)(c,re,2*E,ye),ye,(0,G.scale)((0,G.scale)(4,Q,t,pe),pe,S,ge),ge,(0,G.scale)((0,G.scale)(4,J,t,pe),pe,-P,ve),ve,me,xe),xe));0!=n&&(N=(0,G.scale)(4,Z,n,ie),u=Me(u,(0,G.sum_three)((0,G.scale)(N,ie,2*P,ye),ye,(0,G.scale)((0,G.scale)(4,K,n,pe),pe,L,ge),ge,(0,G.scale)((0,G.scale)(4,J,n,pe),pe,-E,ve),ve,me,xe),xe));0!=r&&(f=(0,G.scale)(4,Z,r,oe),u=Me(u,(0,G.sum_three)((0,G.scale)(f,oe,2*C,ye),ye,(0,G.scale)((0,G.scale)(4,J,r,pe),pe,T,ge),ge,(0,G.scale)((0,G.scale)(4,K,r,pe),pe,-S,ve),ve,me,xe),xe));0!=a&&(q=(0,G.scale)(4,$,a,ae),u=Me(u,(0,G.sum_three)((0,G.scale)(q,ae,2*S,ye),ye,(0,G.scale)((0,G.scale)(4,Q,a,pe),pe,E,ge),ge,(0,G.scale)((0,G.scale)(4,K,a,pe),pe,-C,ve),ve,me,xe),xe));0!=s&&(d=(0,G.scale)(4,$,s,se),u=Me(u,(0,G.sum_three)((0,G.scale)(d,se,2*L,ye),ye,(0,G.scale)((0,G.scale)(4,K,s,pe),pe,P,ge),ge,(0,G.scale)((0,G.scale)(4,Q,s,pe),pe,-T,ve),ve,me,xe),xe));{var z;0==e&&0==t||(I=0!=n||0!=r||0!=a||0!=s?(j=n*L,g=G.splitter*n,m=n-(v=g-(g-n)),g=G.splitter*L,k=m*(x=L-(b=g-(g-L)))-(j-v*b-m*b-v*x),O=P*s,g=G.splitter*P,m=P-(v=g-(g-P)),g=G.splitter*s,V=(_=k+(A=m*(x=s-(b=g-(g-s)))-(O-v*b-m*b-v*x)))-k,ee[0]=k-(_-V)+(A-V),V=(_=(M=j-((w=j+_)-(V=w-j))+(_-V))+O)-M,ee[1]=M-(_-V)+(O-V),V=(U=w+_)-w,ee[2]=w-(U-V)+(_-V),ee[3]=U,j=a*-C,g=G.splitter*a,m=a-(v=g-(g-a)),g=G.splitter*-C,k=m*(x=-C-(b=g-(g- -C)))-(j-v*b-m*b-v*x),O=S*-r,g=G.splitter*S,m=S-(v=g-(g-S)),g=G.splitter*-r,V=(_=k+(A=m*(x=-r-(b=g-(g- -r)))-(O-v*b-m*b-v*x)))-k,te[0]=k-(_-V)+(A-V),V=(_=(M=j-((w=j+_)-(V=w-j))+(_-V))+O)-M,te[1]=M-(_-V)+(O-V),V=(U=w+_)-w,te[2]=w-(U-V)+(_-V),te[3]=U,h=(0,G.sum)(4,ee,4,te,ue),j=n*s,g=G.splitter*n,m=n-(v=g-(g-n)),g=G.splitter*s,k=m*(x=s-(b=g-(g-s)))-(j-v*b-m*b-v*x),O=a*r,g=G.splitter*a,m=a-(v=g-(g-a)),g=G.splitter*r,V=k-(_=k-(A=m*(x=r-(b=g-(g-r)))-(O-v*b-m*b-v*x))),de[0]=k-(_+V)+(V-A),V=(M=j-((w=j+_)-(V=w-j))+(_-V))-(_=M-O),de[1]=M-(_+V)+(V-O),V=(U=w+_)-w,de[2]=w-(U-V)+(_-V),de[3]=U,4):(ue[0]=0,h=1,de[0]=0,1),0!=e&&(R=(0,G.scale)(h,ue,e,ve),u=Me(u,(0,G.sum)((0,G.scale)(z,ne,e,ye),ye,(0,G.scale)(R,ve,2*T,me),me,xe),xe),z=(0,G.scale)(I,de,e,pe),u=Me(u,(0,G.sum_three)((0,G.scale)(z,pe,2*T,ye),ye,(0,G.scale)(z,pe,e,ge),ge,(0,G.scale)(R,ve,e,me),me,be,_e),_e),0!=r&&(u=Me(u,(0,G.scale)((0,G.scale)(4,J,e,pe),pe,r,ye),ye)),0!=s&&(u=Me(u,(0,G.scale)((0,G.scale)(4,Q,-e,pe),pe,s,ye),ye))),0!=t&&(D=(0,G.scale)(h,ue,t,ve),u=Me(u,(0,G.sum)((0,G.scale)(c,re,t,ye),ye,(0,G.scale)(D,ve,2*E,me),me,xe),xe),B=(0,G.scale)(I,de,t,pe),u=Me(u,(0,G.sum_three)((0,G.scale)(B,pe,2*E,ye),ye,(0,G.scale)(B,pe,t,ge),ge,(0,G.scale)(D,ve,t,me),me,be,_e),_e)))}{var D,N,F,B;0==n&&0==r||(B=0!=a||0!=s||0!=e||0!=t?(j=a*E,g=G.splitter*a,m=a-(v=g-(g-a)),g=G.splitter*E,k=m*(x=E-(b=g-(g-E)))-(j-v*b-m*b-v*x),O=S*t,g=G.splitter*S,m=S-(v=g-(g-S)),g=G.splitter*t,V=(_=k+(A=m*(x=t-(b=g-(g-t)))-(O-v*b-m*b-v*x)))-k,ee[0]=k-(_-V)+(A-V),V=(_=(M=j-((w=j+_)-(V=w-j))+(_-V))+O)-M,ee[1]=M-(_-V)+(O-V),V=(U=w+_)-w,ee[2]=w-(U-V)+(_-V),ee[3]=U,y=-s,j=e*(p=-L),g=G.splitter*e,m=e-(v=g-(g-e)),g=G.splitter*p,k=m*(x=p-(b=g-(g-p)))-(j-v*b-m*b-v*x),O=T*y,g=G.splitter*T,m=T-(v=g-(g-T)),g=G.splitter*y,V=(_=k+(A=m*(x=y-(b=g-(g-y)))-(O-v*b-m*b-v*x)))-k,te[0]=k-(_-V)+(A-V),V=(_=(M=j-((w=j+_)-(V=w-j))+(_-V))+O)-M,te[1]=M-(_-V)+(O-V),V=(U=w+_)-w,te[2]=w-(U-V)+(_-V),te[3]=U,F=(0,G.sum)(4,ee,4,te,ce),j=a*t,g=G.splitter*a,m=a-(v=g-(g-a)),g=G.splitter*t,k=m*(x=t-(b=g-(g-t)))-(j-v*b-m*b-v*x),O=e*s,g=G.splitter*e,m=e-(v=g-(g-e)),g=G.splitter*s,V=k-(_=k-(A=m*(x=s-(b=g-(g-s)))-(O-v*b-m*b-v*x))),he[0]=k-(_+V)+(V-A),V=(M=j-((w=j+_)-(V=w-j))+(_-V))-(_=M-O),he[1]=M-(_+V)+(V-O),V=(U=w+_)-w,he[2]=w-(U-V)+(_-V),he[3]=U,4):(ce[0]=0,F=1,he[0]=0,1),0!=n&&(D=(0,G.scale)(F,ce,n,ve),u=Me(u,(0,G.sum)((0,G.scale)(N,ie,n,ye),ye,(0,G.scale)(D,ve,2*P,me),me,xe),xe),N=(0,G.scale)(B,he,n,pe),u=Me(u,(0,G.sum_three)((0,G.scale)(N,pe,2*P,ye),ye,(0,G.scale)(N,pe,n,ge),ge,(0,G.scale)(D,ve,n,me),me,be,_e),_e),0!=s&&(u=Me(u,(0,G.scale)((0,G.scale)(4,K,n,pe),pe,s,ye),ye)),0!=t&&(u=Me(u,(0,G.scale)((0,G.scale)(4,J,-n,pe),pe,t,ye),ye))),0!=r&&(F=(0,G.scale)(F,ce,r,ve),u=Me(u,(0,G.sum)((0,G.scale)(f,oe,r,ye),ye,(0,G.scale)(F,ve,2*C,me),me,xe),xe),B=(0,G.scale)(B,he,r,pe),u=Me(u,(0,G.sum_three)((0,G.scale)(B,pe,2*C,ye),ye,(0,G.scale)(B,pe,r,ge),ge,(0,G.scale)(F,ve,r,me),me,be,_e),_e)))}{var U,q,H,V;0==a&&0==s||(V=0!=e||0!=t||0!=n||0!=r?(j=e*C,g=G.splitter*e,m=e-(v=g-(g-e)),g=G.splitter*C,k=m*(x=C-(b=g-(g-C)))-(j-v*b-m*b-v*x),O=T*r,g=G.splitter*T,m=T-(v=g-(g-T)),g=G.splitter*r,V=(_=k+(A=m*(x=r-(b=g-(g-r)))-(O-v*b-m*b-v*x)))-k,ee[0]=k-(_-V)+(A-V),V=(_=(M=j-((w=j+_)-(V=w-j))+(_-V))+O)-M,ee[1]=M-(_-V)+(O-V),V=(U=w+_)-w,ee[2]=w-(U-V)+(_-V),ee[3]=U,y=-t,j=n*(p=-E),g=G.splitter*n,m=n-(v=g-(g-n)),g=G.splitter*p,k=m*(x=p-(b=g-(g-p)))-(j-v*b-m*b-v*x),O=P*y,g=G.splitter*P,m=P-(v=g-(g-P)),g=G.splitter*y,V=(_=k+(A=m*(x=y-(b=g-(g-y)))-(O-v*b-m*b-v*x)))-k,te[0]=k-(_-V)+(A-V),V=(_=(M=j-((w=j+_)-(V=w-j))+(_-V))+O)-M,te[1]=M-(_-V)+(O-V),V=(U=w+_)-w,te[2]=w-(U-V)+(_-V),te[3]=U,H=(0,G.sum)(4,ee,4,te,le),j=e*r,g=G.splitter*e,m=e-(v=g-(g-e)),g=G.splitter*r,k=m*(x=r-(b=g-(g-r)))-(j-v*b-m*b-v*x),O=n*t,g=G.splitter*n,m=n-(v=g-(g-n)),g=G.splitter*t,V=k-(_=k-(A=m*(x=t-(b=g-(g-t)))-(O-v*b-m*b-v*x))),fe[0]=k-(_+V)+(V-A),V=(M=j-((w=j+_)-(V=w-j))+(_-V))-(_=M-O),fe[1]=M-(_+V)+(V-O),V=(U=w+_)-w,fe[2]=w-(U-V)+(_-V),fe[3]=U,4):(le[0]=0,H=1,fe[0]=0,1),0!=a&&(U=(0,G.scale)(H,le,a,ve),u=Me(u,(0,G.sum)((0,G.scale)(q,ae,a,ye),ye,(0,G.scale)(U,ve,2*S,me),me,xe),xe),q=(0,G.scale)(V,fe,a,pe),u=Me(u,(0,G.sum_three)((0,G.scale)(q,pe,2*S,ye),ye,(0,G.scale)(q,pe,a,ge),ge,(0,G.scale)(U,ve,a,me),me,be,_e),_e),0!=t&&(u=Me(u,(0,G.scale)((0,G.scale)(4,Q,a,pe),pe,t,ye),ye)),0!=r&&(u=Me(u,(0,G.scale)((0,G.scale)(4,K,-a,pe),pe,r,ye),ye))),0!=s&&(H=(0,G.scale)(H,le,s,ve),u=Me(u,(0,G.sum)((0,G.scale)(d,se,s,ye),ye,(0,G.scale)(H,ve,2*L,me),me,xe),xe),V=(0,G.scale)(V,fe,s,pe),u=Me(u,(0,G.sum_three)((0,G.scale)(V,pe,2*L,ye),ye,(0,G.scale)(V,pe,s,ge),ge,(0,G.scale)(H,ve,s,me),me,be,_e),_e)))}return we[u-1]}(e,t,n,r,i,o,a,s,f)},n.incirclefast=function(e,t,n,r,i,o,a,s){e-=a,t-=s,n-=a,r-=s,a=i-a,s=o-s;return(e*e+t*t)*(n*s-a*r)+(n*n+r*r)*(a*t-e*s)+(a*a+s*s)*(e*r-n*t)};var G=e("./util.js"),x=(10+96*G.epsilon)*G.epsilon,W=(4+48*G.epsilon)*G.epsilon,Y=(44+576*G.epsilon)*G.epsilon*G.epsilon,X=(0,G.vec)(4),Z=(0,G.vec)(4),$=(0,G.vec)(4),K=(0,G.vec)(4),Q=(0,G.vec)(4),J=(0,G.vec)(4),ee=(0,G.vec)(4),te=(0,G.vec)(4),ne=(0,G.vec)(8),re=(0,G.vec)(8),ie=(0,G.vec)(8),oe=(0,G.vec)(8),ae=(0,G.vec)(8),se=(0,G.vec)(8),le=(0,G.vec)(8),ue=(0,G.vec)(8),ce=(0,G.vec)(8),fe=(0,G.vec)(4),de=(0,G.vec)(4),he=(0,G.vec)(4),pe=(0,G.vec)(8),ye=(0,G.vec)(16),ge=(0,G.vec)(16),ve=(0,G.vec)(16),me=(0,G.vec)(32),be=(0,G.vec)(32),xe=(0,G.vec)(48),_e=(0,G.vec)(64),we=(0,G.vec)(1152),r=(0,G.vec)(1152);function Me(e,t,n){e=(0,G.sum)(e,we,t,n,r);n=we;return we=r,r=n,e}},{"./util.js":977}],974:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.insphere=function(e,t,n,r,i,o,a,s,l,u,c,f,d,h,p){var y=e-d,g=r-d,v=a-d,m=u-d,b=t-h,x=i-h,_=s-h,w=c-h,M=n-p,j=o-p,k=l-p,O=f-p,A=y*x,T=g*b,P=A-T,S=g*_,E=v*x,C=S-E,L=v*w,R=m*_,I=L-R,z=m*b,D=y*w,N=z-D,F=y*_,B=v*b,U=F-B,q=g*w,H=m*x,V=q-H,b=y*y+b*b+M*M,x=g*g+x*x+j*j,_=v*v+_*_+k*k,w=m*m+w*w+O*O,I=_*(O*P+M*V+j*N)-w*(M*C-j*U+k*P)+(b*(j*I-k*V+O*C)-x*(k*N+O*U+M*I)),M=Math.abs(M),j=Math.abs(j),k=Math.abs(k),O=Math.abs(O),A=Math.abs(A),T=Math.abs(T),S=Math.abs(S),E=Math.abs(E),L=Math.abs(L),R=Math.abs(R),z=Math.abs(z),D=Math.abs(D),F=Math.abs(F),B=Math.abs(B),q=Math.abs(q),H=Math.abs(H),k=((L+R)*j+(H+q)*k+(S+E)*O)*b+((z+D)*k+(F+B)*O+(L+R)*M)*x+((A+T)*O+(q+H)*M+(z+D)*j)*_+((S+E)*M+(B+F)*j+(A+T)*k)*w,w=G*k;if(w<I||w<-I)return I;return-function(e,t,n,r,i,o,a,s,l,u,c,f,d,h,p,y){var g,v,m,b,x,_,w,M,j,k,O,A,T,P,S,E,C,L,R=e-d,I=r-d,z=a-d,D=u-d,N=t-h,F=i-h,B=s-h,U=c-h,q=n-p,H=o-p,V=l-p,G=f-p;E=R*F,k=J.splitter*R,A=R-(O=k-(k-R)),k=J.splitter*F,C=A*(P=F-(T=k-(k-F)))-(E-O*T-A*T-O*P),Z=I*N,k=J.splitter*I,A=I-(O=k-(k-I)),k=J.splitter*N,Q=C-(K=C-(L=A*(P=N-(T=k-(k-N)))-(Z-O*T-A*T-O*P))),ne[0]=C-(K+Q)+(Q-L),Q=(S=E-(($=E+K)-(Q=$-E))+(K-Q))-(K=S-Z),ne[1]=S-(K+Q)+(Q-Z),Q=(g=$+K)-$,ne[2]=$-(g-Q)+(K-Q),ne[3]=g,E=I*B,k=J.splitter*I,A=I-(O=k-(k-I)),k=J.splitter*B,C=A*(P=B-(T=k-(k-B)))-(E-O*T-A*T-O*P),Z=z*F,k=J.splitter*z,A=z-(O=k-(k-z)),k=J.splitter*F,Q=C-(K=C-(L=A*(P=F-(T=k-(k-F)))-(Z-O*T-A*T-O*P))),re[0]=C-(K+Q)+(Q-L),Q=(S=E-(($=E+K)-(Q=$-E))+(K-Q))-(K=S-Z),re[1]=S-(K+Q)+(Q-Z),Q=(v=$+K)-$,re[2]=$-(v-Q)+(K-Q),re[3]=v,E=z*U,k=J.splitter*z,A=z-(O=k-(k-z)),k=J.splitter*U,C=A*(P=U-(T=k-(k-U)))-(E-O*T-A*T-O*P),Z=D*B,k=J.splitter*D,A=D-(O=k-(k-D)),k=J.splitter*B,Q=C-(K=C-(L=A*(P=B-(T=k-(k-B)))-(Z-O*T-A*T-O*P))),ie[0]=C-(K+Q)+(Q-L),Q=(S=E-(($=E+K)-(Q=$-E))+(K-Q))-(K=S-Z),ie[1]=S-(K+Q)+(Q-Z),Q=(m=$+K)-$,ie[2]=$-(m-Q)+(K-Q),ie[3]=m,E=D*N,k=J.splitter*D,A=D-(O=k-(k-D)),k=J.splitter*N,C=A*(P=N-(T=k-(k-N)))-(E-O*T-A*T-O*P),Z=R*U,k=J.splitter*R,A=R-(O=k-(k-R)),k=J.splitter*U,Q=C-(K=C-(L=A*(P=U-(T=k-(k-U)))-(Z-O*T-A*T-O*P))),ce[0]=C-(K+Q)+(Q-L),Q=(S=E-(($=E+K)-(Q=$-E))+(K-Q))-(K=S-Z),ce[1]=S-(K+Q)+(Q-Z),Q=(b=$+K)-$,ce[2]=$-(b-Q)+(K-Q),ce[3]=b,E=R*B,k=J.splitter*R,A=R-(O=k-(k-R)),k=J.splitter*B,C=A*(P=B-(T=k-(k-B)))-(E-O*T-A*T-O*P),Z=z*N,k=J.splitter*z,A=z-(O=k-(k-z)),k=J.splitter*N,Q=C-(K=C-(L=A*(P=N-(T=k-(k-N)))-(Z-O*T-A*T-O*P))),se[0]=C-(K+Q)+(Q-L),Q=(S=E-(($=E+K)-(Q=$-E))+(K-Q))-(K=S-Z),se[1]=S-(K+Q)+(Q-Z),Q=(x=$+K)-$,se[2]=$-(x-Q)+(K-Q),se[3]=x,E=I*U,k=J.splitter*I,A=I-(O=k-(k-I)),k=J.splitter*U,C=A*(P=U-(T=k-(k-U)))-(E-O*T-A*T-O*P),Z=D*F,k=J.splitter*D,A=D-(O=k-(k-D)),k=J.splitter*F,Q=C-(K=C-(L=A*(P=F-(T=k-(k-F)))-(Z-O*T-A*T-O*P))),le[0]=C-(K+Q)+(Q-L),Q=(S=E-(($=E+K)-(Q=$-E))+(K-Q))-(K=S-Z),le[1]=S-(K+Q)+(Q-Z),Q=(_=$+K)-$,le[2]=$-(_-Q)+(K-Q),le[3]=_;var W=(0,J.sum)((0,J.sum)((0,J.negate)(Re(re,ie,le,G,H,-V,R,N,q,we),we),we,Re(ie,ce,se,q,V,G,I,F,H,Me),Me,Ae),Ae,(0,J.sum)((0,J.negate)(Re(ce,ne,le,H,G,q,z,B,V,je),je),je,Re(ne,re,se,V,q,-H,D,U,G,ke),ke,Te),Te,Le),Y=(0,J.estimate)(W,Le),X=ee*y;if(X<=Y||X<=-Y)return Y;if(w=e-(R+(Q=e-R))+(Q-d),M=t-(N+(Q=t-N))+(Q-h),j=n-(q+(Q=n-q))+(Q-p),k=r-(I+(Q=r-I))+(Q-d),A=i-(F+(Q=i-F))+(Q-h),T=o-(H+(Q=o-H))+(Q-p),O=a-(z+(Q=a-z))+(Q-d),P=s-(B+(Q=s-B))+(Q-h),C=l-(V+(Q=l-V))+(Q-p),L=u-(D+(Q=u-D))+(Q-d),E=c-(U+(Q=c-U))+(Q-h),S=f-(G+(Q=f-G))+(Q-p),0==w&&0==M&&0==j&&0==k&&0==A&&0==T&&0==O&&0==P&&0==C&&0==L&&0==E&&0==S)return Y;X=te*y+J.resulterrbound*Math.abs(Y);var Z=R*A+F*w-(N*k+I*M),$=I*P+B*k-(F*O+z*A),K=z*E+U*O-(B*L+D*P),W=D*M+N*L-(U*w+R*E),Q=R*P+B*w-(N*O+z*M),y=I*E+U*k-(F*L+D*A);if((Y+=(I*I+F*F+H*H)*(V*W+G*Q+q*K+(C*b+S*x+j*m))+(D*D+U*U+G*G)*(q*$-H*Q+V*Z+(j*v-T*x+C*g))-((R*R+N*N+q*q)*(H*K-V*y+G*$+(T*m-C*_+S*v))+(z*z+B*B+V*V)*(G*Z+q*y+H*W+(S*g+j*_+T*b)))+2*((I*k+F*A+H*T)*(V*b+G*x+q*m)+(D*L+U*E+G*S)*(q*v-H*x+V*g)-((R*w+N*M+q*j)*(H*m-V*_+G*v)+(z*O+B*P+V*C)*(G*g+q*_+H*b))))>=X||X<=-Y)return Y;return function(e,t,n,r,i,o,a,s,l,u,c,f,d,h,p){var y,g,v,m;w=e*i,y=J.splitter*e,v=e-(g=y-(y-e)),y=J.splitter*i,x=v*(b=i-(m=y-(y-i)))-(w-g*m-v*m-g*b),j=r*t,y=J.splitter*r,v=r-(g=y-(y-r)),y=J.splitter*t,A=x-(O=x-(_=v*(b=t-(m=y-(y-t)))-(j-g*m-v*m-g*b))),ne[0]=x-(O+A)+(A-_),A=(M=w-((k=w+O)-(A=k-w))+(O-A))-(O=M-j),ne[1]=M-(O+A)+(A-j),A=(T=k+O)-k,ne[2]=k-(T-A)+(O-A),ne[3]=T,w=r*s,y=J.splitter*r,v=r-(g=y-(y-r)),y=J.splitter*s,x=v*(b=s-(m=y-(y-s)))-(w-g*m-v*m-g*b),j=a*i,y=J.splitter*a,v=a-(g=y-(y-a)),y=J.splitter*i,A=x-(O=x-(_=v*(b=i-(m=y-(y-i)))-(j-g*m-v*m-g*b))),re[0]=x-(O+A)+(A-_),A=(M=w-((k=w+O)-(A=k-w))+(O-A))-(O=M-j),re[1]=M-(O+A)+(A-j),A=(T=k+O)-k,re[2]=k-(T-A)+(O-A),re[3]=T,w=a*c,y=J.splitter*a,v=a-(g=y-(y-a)),y=J.splitter*c,x=v*(b=c-(m=y-(y-c)))-(w-g*m-v*m-g*b),j=u*s,y=J.splitter*u,v=u-(g=y-(y-u)),y=J.splitter*s,A=x-(O=x-(_=v*(b=s-(m=y-(y-s)))-(j-g*m-v*m-g*b))),ie[0]=x-(O+A)+(A-_),A=(M=w-((k=w+O)-(A=k-w))+(O-A))-(O=M-j),ie[1]=M-(O+A)+(A-j),A=(T=k+O)-k,ie[2]=k-(T-A)+(O-A),ie[3]=T,w=u*h,y=J.splitter*u,v=u-(g=y-(y-u)),y=J.splitter*h,x=v*(b=h-(m=y-(y-h)))-(w-g*m-v*m-g*b),j=d*c,y=J.splitter*d,v=d-(g=y-(y-d)),y=J.splitter*c,A=x-(O=x-(_=v*(b=c-(m=y-(y-c)))-(j-g*m-v*m-g*b))),oe[0]=x-(O+A)+(A-_),A=(M=w-((k=w+O)-(A=k-w))+(O-A))-(O=M-j),oe[1]=M-(O+A)+(A-j),A=(T=k+O)-k,oe[2]=k-(T-A)+(O-A),oe[3]=T,w=d*t,y=J.splitter*d,v=d-(g=y-(y-d)),y=J.splitter*t,x=v*(b=t-(m=y-(y-t)))-(w-g*m-v*m-g*b),j=e*h,y=J.splitter*e,v=e-(g=y-(y-e)),y=J.splitter*h,A=x-(O=x-(_=v*(b=h-(m=y-(y-h)))-(j-g*m-v*m-g*b))),ae[0]=x-(O+A)+(A-_),A=(M=w-((k=w+O)-(A=k-w))+(O-A))-(O=M-j),ae[1]=M-(O+A)+(A-j),A=(T=k+O)-k,ae[2]=k-(T-A)+(O-A),ae[3]=T,w=e*s,y=J.splitter*e,v=e-(g=y-(y-e)),y=J.splitter*s,x=v*(b=s-(m=y-(y-s)))-(w-g*m-v*m-g*b),j=a*t,y=J.splitter*a,v=a-(g=y-(y-a)),y=J.splitter*t,A=x-(O=x-(_=v*(b=t-(m=y-(y-t)))-(j-g*m-v*m-g*b))),se[0]=x-(O+A)+(A-_),A=(M=w-((k=w+O)-(A=k-w))+(O-A))-(O=M-j),se[1]=M-(O+A)+(A-j),A=(T=k+O)-k,se[2]=k-(T-A)+(O-A),se[3]=T,w=r*c,y=J.splitter*r,v=r-(g=y-(y-r)),y=J.splitter*c,x=v*(b=c-(m=y-(y-c)))-(w-g*m-v*m-g*b),j=u*i,y=J.splitter*u,v=u-(g=y-(y-u)),y=J.splitter*i,A=x-(O=x-(_=v*(b=i-(m=y-(y-i)))-(j-g*m-v*m-g*b))),le[0]=x-(O+A)+(A-_),A=(M=w-((k=w+O)-(A=k-w))+(O-A))-(O=M-j),le[1]=M-(O+A)+(A-j),A=(T=k+O)-k,le[2]=k-(T-A)+(O-A),le[3]=T,w=a*h,y=J.splitter*a,v=a-(g=y-(y-a)),y=J.splitter*h,x=v*(b=h-(m=y-(y-h)))-(w-g*m-v*m-g*b),j=d*s,y=J.splitter*d,v=d-(g=y-(y-d)),y=J.splitter*s,A=x-(O=x-(_=v*(b=s-(m=y-(y-s)))-(j-g*m-v*m-g*b))),ue[0]=x-(O+A)+(A-_),A=(M=w-((k=w+O)-(A=k-w))+(O-A))-(O=M-j),ue[1]=M-(O+A)+(A-j),A=(T=k+O)-k,ue[2]=k-(T-A)+(O-A),ue[3]=T,w=u*t,y=J.splitter*u,v=u-(g=y-(y-u)),y=J.splitter*t,x=v*(b=t-(m=y-(y-t)))-(w-g*m-v*m-g*b),j=e*c,y=J.splitter*e,v=e-(g=y-(y-e)),y=J.splitter*c,A=x-(O=x-(_=v*(b=c-(m=y-(y-c)))-(j-g*m-v*m-g*b))),ce[0]=x-(O+A)+(A-_),A=(M=w-((k=w+O)-(A=k-w))+(O-A))-(O=M-j),ce[1]=M-(O+A)+(A-j),A=(T=k+O)-k,ce[2]=k-(T-A)+(O-A),ce[3]=T,w=d*i,y=J.splitter*d,v=d-(g=y-(y-d)),y=J.splitter*i,x=v*(b=i-(m=y-(y-i)))-(w-g*m-v*m-g*b),j=r*h,y=J.splitter*r,v=r-(g=y-(y-r)),y=J.splitter*h,A=x-(O=x-(_=v*(b=h-(m=y-(y-h)))-(j-g*m-v*m-g*b))),fe[0]=x-(O+A)+(A-_),A=(M=w-((k=w+O)-(A=k-w))+(O-A))-(O=M-j),fe[1]=M-(O+A)+(A-j),A=(T=k+O)-k,fe[2]=k-(T-A)+(O-A),fe[3]=T;var b=Ee(ne,re,se,l,n,-o,de),x=Ee(re,ie,le,f,o,-l,he),_=Ee(ie,oe,ue,p,l,-f,pe),w=Ee(oe,ae,ce,n,f,-p,ye),M=Ee(ae,ne,fe,o,p,-n,ge),j=Ee(ne,le,ce,f,n,o,ve),k=Ee(re,ue,fe,p,o,l,me),O=Ee(ie,ce,se,n,l,f,be),A=Ee(oe,fe,le,o,f,p,xe),T=Ee(ae,se,ue,l,p,n,_e),p=(0,J.sum_three)(Ce(_,pe,k,me,A,xe,x,he,e,t,n,we),we,Ce(w,ye,O,be,T,_e,_,pe,r,i,o,Me),Me,(0,J.sum_three)(Ce(M,ge,A,xe,j,ve,w,ye,a,s,l,je),je,Ce(b,de,T,_e,k,me,M,ge,u,c,f,ke),ke,Ce(x,he,j,ve,O,be,b,de,d,h,p,Oe),Oe,Te,Pe),Pe,Ae,Se);return Se[p-1]}(e,t,n,r,i,o,a,s,l,u,c,f,d,h,p)}(e,t,n,r,i,o,a,s,l,u,c,f,d,h,p,k)},n.inspherefast=function(e,t,n,r,i,o,a,s,l,u,c,f,d,h,p){var y=e-d,g=r-d,v=a-d,e=u-d,r=t-h,a=i-h,u=s-h,d=c-h,t=n-p,i=o-p,s=l-p,c=f-p,h=y*a-g*r,n=g*u-v*a,o=v*d-e*u,l=e*r-y*d,f=y*u-v*r,p=g*d-e*a;return(v*v+u*u+s*s)*(c*h+t*p+i*l)-(e*e+d*d+c*c)*(t*n-i*f+s*h)+((y*y+r*r+t*t)*(i*o-s*p+c*n)-(g*g+a*a+i*i)*(s*l+c*f+t*o))};var J=e("./util.js"),G=(16+224*J.epsilon)*J.epsilon,ee=(5+72*J.epsilon)*J.epsilon,te=(71+1408*J.epsilon)*J.epsilon*J.epsilon,ne=(0,J.vec)(4),re=(0,J.vec)(4),ie=(0,J.vec)(4),oe=(0,J.vec)(4),ae=(0,J.vec)(4),se=(0,J.vec)(4),le=(0,J.vec)(4),ue=(0,J.vec)(4),ce=(0,J.vec)(4),fe=(0,J.vec)(4),de=(0,J.vec)(24),he=(0,J.vec)(24),pe=(0,J.vec)(24),ye=(0,J.vec)(24),ge=(0,J.vec)(24),ve=(0,J.vec)(24),me=(0,J.vec)(24),be=(0,J.vec)(24),xe=(0,J.vec)(24),_e=(0,J.vec)(24),we=(0,J.vec)(1152),Me=(0,J.vec)(1152),je=(0,J.vec)(1152),ke=(0,J.vec)(1152),Oe=(0,J.vec)(1152),Ae=(0,J.vec)(2304),Te=(0,J.vec)(2304),Pe=(0,J.vec)(3456),Se=(0,J.vec)(5760),s=(0,J.vec)(8),l=(0,J.vec)(8),u=(0,J.vec)(8),c=(0,J.vec)(16),f=(0,J.vec)(24),d=(0,J.vec)(48),h=(0,J.vec)(48),p=(0,J.vec)(96),y=(0,J.vec)(192),g=(0,J.vec)(384),v=(0,J.vec)(384),m=(0,J.vec)(384),b=(0,J.vec)(768);function Ee(e,t,n,r,i,o,a){return(0,J.sum_three)((0,J.scale)(4,e,r,s),s,(0,J.scale)(4,t,i,l),l,(0,J.scale)(4,n,o,u),u,c,a)}function Ce(e,t,n,r,i,o,a,s,l,u,c,f){s=(0,J.sum)((0,J.sum)(e,t,n,r,d),d,(0,J.negate)((0,J.sum)(i,o,a,s,h),h),h,p);return(0,J.sum_three)((0,J.scale)((0,J.scale)(s,p,l,y),y,l,g),g,(0,J.scale)((0,J.scale)(s,p,u,y),y,u,v),v,(0,J.scale)((0,J.scale)(s,p,c,y),y,c,m),m,b,f)}var x=(0,J.vec)(96),_=(0,J.vec)(96),w=(0,J.vec)(96),Le=(0,J.vec)(1152);function Re(e,t,n,r,i,o,a,s,l,u){o=Ee(e,t,n,r,i,o,f);return(0,J.sum_three)((0,J.scale)((0,J.scale)(o,f,a,d),d,a,x),x,(0,J.scale)((0,J.scale)(o,f,s,d),d,s,_),_,(0,J.scale)((0,J.scale)(o,f,l,d),d,l,w),w,y,u)}},{"./util.js":977}],975:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.orient2d=function(e,t,n,r,i,o){var a=(t-o)*(n-i),s=(e-i)*(r-o),l=a-s;if(0==a||0==s||0<a!=0<s)return l;s=Math.abs(a+s);return Math.abs(l)>=u*s?l:-function(e,t,n,r,i,o,a){var s,l,u,c,f,d,h,p,y,g,v,m,b,x,_=e-i,w=n-i,M=t-o,j=r-o;g=_*j,l=A.splitter*_,c=_-(u=l-(l-_)),l=A.splitter*j,v=c*(d=j-(f=l-(l-j)))-(g-u*f-c*f-u*d),m=M*w,l=A.splitter*M,c=M-(u=l-(l-M)),l=A.splitter*w,s=v-(h=v-(b=c*(d=w-(f=l-(l-w)))-(m-u*f-c*f-u*d))),S[0]=v-(h+s)+(s-b),s=(y=g-((p=g+h)-(s=p-g))+(h-s))-(h=y-m),S[1]=y-(h+s)+(s-m),s=(x=p+h)-p,S[2]=p-(x-s)+(h-s),S[3]=x;var k=(0,A.estimate)(4,S),O=T*a;if(O<=k||O<=-k)return k;if(e=e-(_+(s=e-_))+(s-i),i=n-(w+(s=n-w))+(s-i),t=t-(M+(s=t-M))+(s-o),o=r-(j+(s=r-j))+(s-o),0==e&&0==t&&0==i&&0==o)return k;if(O=P*a+A.resulterrbound*Math.abs(k),(k+=_*o+j*e-(M*i+w*t))>=O||O<=-k)return k;g=e*j,l=A.splitter*e,c=e-(u=l-(l-e)),l=A.splitter*j,v=c*(d=j-(f=l-(l-j)))-(g-u*f-c*f-u*d),m=t*w,l=A.splitter*t,c=t-(u=l-(l-t)),l=A.splitter*w,s=v-(h=v-(b=c*(d=w-(f=l-(l-w)))-(m-u*f-c*f-u*d))),R[0]=v-(h+s)+(s-b),s=(y=g-((p=g+h)-(s=p-g))+(h-s))-(h=y-m),R[1]=y-(h+s)+(s-m),s=(x=p+h)-p,R[2]=p-(x-s)+(h-s),R[3]=x;w=(0,A.sum)(4,S,4,R,E);g=_*o,l=A.splitter*_,c=_-(u=l-(l-_)),l=A.splitter*o,v=c*(d=o-(f=l-(l-o)))-(g-u*f-c*f-u*d),m=M*i,l=A.splitter*M,c=M-(u=l-(l-M)),l=A.splitter*i,s=v-(h=v-(b=c*(d=i-(f=l-(l-i)))-(m-u*f-c*f-u*d))),R[0]=v-(h+s)+(s-b),s=(y=g-((p=g+h)-(s=p-g))+(h-s))-(h=y-m),R[1]=y-(h+s)+(s-m),s=(x=p+h)-p,R[2]=p-(x-s)+(h-s),R[3]=x;w=(0,A.sum)(w,E,4,R,C);g=e*o,l=A.splitter*e,c=e-(u=l-(l-e)),l=A.splitter*o,v=c*(d=o-(f=l-(l-o)))-(g-u*f-c*f-u*d),m=t*i,l=A.splitter*t,c=t-(u=l-(l-t)),l=A.splitter*i,s=v-(h=v-(b=c*(d=i-(f=l-(l-i)))-(m-u*f-c*f-u*d))),R[0]=v-(h+s)+(s-b),s=(y=g-((p=g+h)-(s=p-g))+(h-s))-(h=y-m),R[1]=y-(h+s)+(s-m),s=(x=p+h)-p,R[2]=p-(x-s)+(h-s),R[3]=x;w=(0,A.sum)(w,C,4,R,L);return L[w-1]}(e,t,n,r,i,o,s)},n.orient2dfast=function(e,t,n,r,i,o){return(t-o)*(n-i)-(e-i)*(r-o)};var A=e("./util.js"),u=(3+16*A.epsilon)*A.epsilon,T=(2+12*A.epsilon)*A.epsilon,P=(9+64*A.epsilon)*A.epsilon*A.epsilon,S=(0,A.vec)(4),E=(0,A.vec)(8),C=(0,A.vec)(12),L=(0,A.vec)(16),R=(0,A.vec)(4)},{"./util.js":977}],976:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.orient3d=function(e,t,n,r,i,o,a,s,l,u,c,f){var d=e-u,h=r-u,p=a-u,y=t-c,g=i-c,v=s-c,m=n-f,b=o-f,x=l-f,_=h*v,w=p*g,p=p*y,v=d*v,g=d*g,h=h*y,y=m*(_-w)+b*(p-v)+x*(g-h),h=(Math.abs(_)+Math.abs(w))*Math.abs(m)+(Math.abs(p)+Math.abs(v))*Math.abs(b)+(Math.abs(g)+Math.abs(h))*Math.abs(x),x=M*h;if(x<y||x<-y)return y;return function(e,t,n,r,i,o,a,s,l,u,c,f,d){var h,p,y,g,v,m,b,x,_,w,M,j,k=e-u,O=r-u,A=a-u,T=t-c,P=i-c,S=s-c,E=n-f,C=o-f,L=l-f;_=O*S,p=z.splitter*O,g=O-(y=p-(p-O)),p=z.splitter*S,w=g*(m=S-(v=p-(p-S)))-(_-y*v-g*v-y*m),M=A*P,p=z.splitter*A,g=A-(y=p-(p-A)),p=z.splitter*P,h=w-(R=w-(j=g*(m=P-(v=p-(p-P)))-(M-y*v-g*v-y*m))),F[0]=w-(R+h)+(h-j),h=(x=_-((b=_+R)-(h=b-_))+(R-h))-(R=x-M),F[1]=x-(R+h)+(h-M),h=(I=b+R)-b,F[2]=b-(I-h)+(R-h),F[3]=I,_=A*T,p=z.splitter*A,g=A-(y=p-(p-A)),p=z.splitter*T,w=g*(m=T-(v=p-(p-T)))-(_-y*v-g*v-y*m),M=k*S,p=z.splitter*k,g=k-(y=p-(p-k)),p=z.splitter*S,h=w-(R=w-(j=g*(m=S-(v=p-(p-S)))-(M-y*v-g*v-y*m))),B[0]=w-(R+h)+(h-j),h=(x=_-((b=_+R)-(h=b-_))+(R-h))-(R=x-M),B[1]=x-(R+h)+(h-M),h=(I=b+R)-b,B[2]=b-(I-h)+(R-h),B[3]=I,_=k*P,p=z.splitter*k,g=k-(y=p-(p-k)),p=z.splitter*P,w=g*(m=P-(v=p-(p-P)))-(_-y*v-g*v-y*m),M=O*T,p=z.splitter*O,g=O-(y=p-(p-O)),p=z.splitter*T,h=w-(R=w-(j=g*(m=T-(v=p-(p-T)))-(M-y*v-g*v-y*m))),U[0]=w-(R+h)+(h-j),h=(x=_-((b=_+R)-(h=b-_))+(R-h))-(R=x-M),U[1]=x-(R+h)+(h-M),h=(I=b+R)-b,U[2]=b-(I-h)+(R-h),U[3]=I,b=(0,z.sum)((0,z.sum)((0,z.scale)(4,F,E,K),K,(0,z.scale)(4,B,C,Q),Q,J),J,(0,z.scale)(4,U,L,K),K,te);var R=(0,z.estimate)(b,te),I=D*d;if(I<=R||I<=-R)return R;if(e=e-(k+(h=e-k))+(h-u),r=r-(O+(h=r-O))+(h-u),u=a-(A+(h=a-A))+(h-u),t=t-(T+(h=t-T))+(h-c),i=i-(P+(h=i-P))+(h-c),c=s-(S+(h=s-S))+(h-c),n=n-(E+(h=n-E))+(h-f),o=o-(C+(h=o-C))+(h-f),f=l-(L+(h=l-L))+(h-f),0==e&&0==r&&0==u&&0==t&&0==i&&0==c&&0==n&&0==o&&0==f)return R;if(I=N*d+z.resulterrbound*Math.abs(R),(R+=E*(O*c+S*r-(P*u+A*i))+n*(O*S-P*A)+C*(A*t+T*u-(S*e+k*c))+o*(A*T-S*k)+L*(k*i+P*e-(T*r+O*t))+f*(k*P-T*O))>=I||I<=-R)return R;R=re(e,t,O,P,A,S,q,H),S=re(r,i,A,S,k,T,V,G),O=re(u,c,k,T,O,P,W,Y),P=(0,z.sum)(S,V,O,Y,X);b=ne(b,(0,z.scale)(P,X,E,J),J);O=(0,z.sum)(O,W,R,H,Z);b=ne(b,(0,z.scale)(O,Z,C,J),J);S=(0,z.sum)(R,q,S,G,$);b=ne(b,(0,z.scale)(S,$,L,J),J),0!=n&&(b=ne(b,(0,z.scale)(4,F,n,ee),ee),b=ne(b,(0,z.scale)(P,X,n,J),J));0!=o&&(b=ne(b,(0,z.scale)(4,B,o,ee),ee),b=ne(b,(0,z.scale)(O,Z,o,J),J));0!=f&&(b=ne(b,(0,z.scale)(4,U,f,ee),ee),b=ne(b,(0,z.scale)(S,$,f,J),J));0!=e&&(0!=i&&(b=ie(b,e,i,L,f)),0!=c&&(b=ie(b,-e,c,C,o)));0!=r&&(0!=c&&(b=ie(b,r,c,E,n)),0!=t&&(b=ie(b,-r,t,L,f)));0!=u&&(0!=t&&(b=ie(b,u,t,C,o)),0!=i&&(b=ie(b,-u,i,E,n)));return te[b-1]}(e,t,n,r,i,o,a,s,l,u,c,f,h)},n.orient3dfast=function(e,t,n,r,i,o,a,s,l,u,c,f){t-=c,i-=c,c=s-c,n-=f,o-=f,f=l-f;return(e-u)*(i*f-o*c)+(r-u)*(c*n-f*t)+(a-u)*(t*o-n*i)};var z=e("./util.js"),M=(7+56*z.epsilon)*z.epsilon,D=(3+28*z.epsilon)*z.epsilon,N=(26+288*z.epsilon)*z.epsilon*z.epsilon,F=(0,z.vec)(4),B=(0,z.vec)(4),U=(0,z.vec)(4),q=(0,z.vec)(4),H=(0,z.vec)(4),V=(0,z.vec)(4),G=(0,z.vec)(4),W=(0,z.vec)(4),Y=(0,z.vec)(4),X=(0,z.vec)(8),Z=(0,z.vec)(8),$=(0,z.vec)(8),y=(0,z.vec)(4),K=(0,z.vec)(8),Q=(0,z.vec)(8),J=(0,z.vec)(8),ee=(0,z.vec)(12),te=(0,z.vec)(192),r=(0,z.vec)(192);function ne(e,t,n){e=(0,z.sum)(e,te,t,n,r);n=te;return te=r,r=n,e}function re(e,t,n,r,i,o,a,s){var l,u,c,f,d,h,p,y,g,v,m,b;return 0===e?0===t?(s[a[0]=0]=0,1):(c=(u=z.splitter*(b=-t))-(u-b),u=z.splitter*n,a[0]=(f=b-c)*(h=n-(d=u-(u-n)))-((y=b*n)-c*d-f*d-c*h),a[1]=y,c=(u=z.splitter*t)-(u-t),u=z.splitter*i,s[0]=(f=t-c)*(h=i-(d=u-(u-i)))-((y=t*i)-c*d-f*d-c*h),s[1]=y,2):0===t?(c=(u=z.splitter*e)-(u-e),u=z.splitter*r,a[0]=(f=e-c)*(h=r-(d=u-(u-r)))-((y=e*r)-c*d-f*d-c*h),a[1]=y,c=(u=z.splitter*(b=-e))-(u-b),u=z.splitter*o,s[0]=(f=b-c)*(h=o-(d=u-(u-o)))-((y=b*o)-c*d-f*d-c*h),s[1]=y,2):(g=(f=e-(c=(u=z.splitter*e)-(u-e)))*(h=r-(d=(u=z.splitter*r)-(u-r)))-((y=e*r)-c*d-f*d-c*h),c=(u=z.splitter*t)-(u-t),u=z.splitter*n,a[0]=g-((p=g-(m=(f=t-c)*(h=n-(d=u-(u-n)))-((v=t*n)-c*d-f*d-c*h)))+(l=g-p))+(l-m),a[1]=(r=y-((b=y+p)-(l=b-y))+(p-l))-((p=r-v)+(l=r-p))+(l-v),a[2]=b-((n=b+p)-(l=n-b))+(p-l),a[3]=n,g=(f=t-(c=(u=z.splitter*t)-(u-t)))*(h=i-(d=(u=z.splitter*i)-(u-i)))-((y=t*i)-c*d-f*d-c*h),c=(u=z.splitter*e)-(u-e),u=z.splitter*o,s[0]=g-((p=g-(m=(f=e-c)*(h=o-(d=u-(u-o)))-((v=e*o)-c*d-f*d-c*h)))+(l=g-p))+(l-m),s[1]=(r=y-((b=y+p)-(l=b-y))+(p-l))-((p=r-v)+(l=r-p))+(l-v),s[2]=b-((n=b+p)-(l=n-b))+(p-l),s[3]=n,4)}function ie(e,t,n,r,i){var o,a,s,l,u=t*n,c=z.splitter*t,f=c-(c-t),d=t-f,h=d*(o=n-(p=(c=z.splitter*n)-(c-n)))-(u-f*p-d*p-f*o),p=(c=z.splitter*r)-(c-r);return c=z.splitter*h,y[0]=(d=h-(f=c-(c-h)))*(o=r-p)-((a=h*r)-f*p-d*p-f*o),c=z.splitter*u,y[1]=a-((t=a+(l=(d=u-(f=c-(c-u)))*o-((s=u*r)-f*p-d*p-f*o)))-(n=t-a))+(l-n),y[2]=t-((r=s+t)-s),y[3]=r,e=ne(e,4,y),0!==i&&(p=(c=z.splitter*i)-(c-i),c=z.splitter*h,y[0]=(d=h-(f=c-(c-h)))*(o=i-p)-((a=h*i)-f*p-d*p-f*o),c=z.splitter*u,y[1]=a-((t=a+(l=(d=u-(f=c-(c-u)))*o-((s=u*i)-f*p-d*p-f*o)))-(n=t-a))+(l-n),y[2]=t-((r=s+t)-s),y[3]=r,e=ne(e,4,y)),e}},{"./util.js":977}],977:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.epsilon=void 0,n.estimate=function(e,t){for(var n=t[0],r=1;r<e;r++)n+=t[r];return n},n.negate=function(e,t){for(var n=0;n<e;n++)t[n]=-t[n];return e},n.resulterrbound=void 0,n.scale=function(e,t,n,r){var i,o,a,s,l,u,c,f,d,h,p;p=n-(h=(c=m*n)-(c-n));var y=t[0],g=0;0!=(a=(d=y-(f=(c=m*y)-(c-y)))*p-((i=y*n)-f*h-d*h-f*p))&&(r[g++]=a);for(var v=1;v<e;v++)y=t[v],0!==(a=i-((o=i+(l=(d=y-(f=(c=m*y)-(c-y)))*p-((s=y*n)-f*h-d*h-f*p)))-(u=o-i))+(l-u))&&(r[g++]=a),0!==(a=o-((i=s+o)-s))&&(r[g++]=a);0===i&&0!==g||(r[g++]=i);return g},n.splitter=void 0,n.sum=l,n.sum_three=function(e,t,n,r,i,o,a,s){return l(l(e,t,n,r,a),a,i,o,s)},n.vec=function(e){return new Float64Array(e)};var r=11102230246251565e-32;n.epsilon=r;var m=134217729;n.splitter=m;function l(e,t,n,r,i){var o,a,s,l,u=t[0],c=r[0],f=0,d=0;u<c==-u<c?(o=u,u=t[++f]):(o=c,c=r[++d]);var h=0;if(f<e&&d<n)for(u<c==-u<c?(s=o-((a=u+o)-u),u=t[++f]):(s=o-((a=c+o)-c),c=r[++d]),o=a,0!==s&&(i[h++]=s);f<e&&d<n;)u<c==-u<c?(s=o-((a=o+u)-(l=a-o))+(u-l),u=t[++f]):(s=o-((a=o+c)-(l=a-o))+(c-l),c=r[++d]),o=a,0!==s&&(i[h++]=s);for(;f<e;)s=o-((a=o+u)-(l=a-o))+(u-l),u=t[++f],o=a,0!==s&&(i[h++]=s);for(;d<n;)s=o-((a=o+c)-(l=a-o))+(c-l),c=r[++d],o=a,0!==s&&(i[h++]=s);return 0===o&&0!==h||(i[h++]=o),h}n.resulterrbound=33306690738754706e-32},{}],978:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"incircle",{enumerable:!0,get:function(){return o.incircle}}),Object.defineProperty(n,"incirclefast",{enumerable:!0,get:function(){return o.incirclefast}}),Object.defineProperty(n,"insphere",{enumerable:!0,get:function(){return a.insphere}}),Object.defineProperty(n,"inspherefast",{enumerable:!0,get:function(){return a.inspherefast}}),Object.defineProperty(n,"orient2d",{enumerable:!0,get:function(){return r.orient2d}}),Object.defineProperty(n,"orient2dfast",{enumerable:!0,get:function(){return r.orient2dfast}}),Object.defineProperty(n,"orient3d",{enumerable:!0,get:function(){return i.orient3d}}),Object.defineProperty(n,"orient3dfast",{enumerable:!0,get:function(){return i.orient3dfast}});var r=e("./esm/orient2d.js"),i=e("./esm/orient3d.js"),o=e("./esm/incircle.js"),a=e("./esm/insphere.js")},{"./esm/incircle.js":973,"./esm/insphere.js":974,"./esm/orient2d.js":975,"./esm/orient3d.js":976}],979:[function(l,e,u){!function(n,s){!function(){"use strict";var r=l("process/browser.js").nextTick,e=Function.prototype.apply,i=Array.prototype.slice,o={},a=0;function t(e,t){this._id=e,this._clearFn=t}u.setTimeout=function(){return new t(e.call(setTimeout,window,arguments),clearTimeout)},u.setInterval=function(){return new t(e.call(setInterval,window,arguments),clearInterval)},u.clearTimeout=u.clearInterval=function(e){e.close()},t.prototype.unref=t.prototype.ref=function(){},t.prototype.close=function(){this._clearFn.call(window,this._id)},u.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},u.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},u._unrefActive=u.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},u.setImmediate="function"==typeof n?n:function(e){var t=a++,n=!(arguments.length<2)&&i.call(arguments,1);return o[t]=!0,r(function(){o[t]&&(n?e.apply(null,n):e.call(null),u.clearImmediate(t))}),t},u.clearImmediate="function"==typeof s?s:function(e){delete o[e]}}.call(this)}.call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":971,timers:979}],980:[function(e,U,t){"use strict";function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(l){var u=/^\s+/,c=/\s+$/,r=0,o=l.round,f=l.min,d=l.max,e=l.random;function h(e,t){if(t=t||{},(e=e||"")instanceof h)return e;if(!(this instanceof h))return new h(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,o=null,a=!1,s=!1;"string"==typeof e&&(e=function(e){e=e.replace(u,"").replace(c,"").toLowerCase();var t,n=!1;if(O[e])e=O[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=F.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=F.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=F.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=F.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=F.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=F.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=F.hex8.exec(e))return{r:E(t[1]),g:E(t[2]),b:E(t[3]),a:I(t[4]),format:n?"name":"hex8"};if(t=F.hex6.exec(e))return{r:E(t[1]),g:E(t[2]),b:E(t[3]),format:n?"name":"hex"};if(t=F.hex4.exec(e))return{r:E(t[1]+""+t[1]),g:E(t[2]+""+t[2]),b:E(t[3]+""+t[3]),a:I(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=F.hex3.exec(e))return{r:E(t[1]+""+t[1]),g:E(t[2]+""+t[2]),b:E(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==q(e)&&(B(e.r)&&B(e.g)&&B(e.b)?(t=function(e,t,n){return{r:255*P(e,255),g:255*P(t,255),b:255*P(n,255)}}(e.r,e.g,e.b),a=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):B(e.h)&&B(e.s)&&B(e.v)?(r=L(e.s),i=L(e.v),t=function(e,t,n){e=6*P(e,360),t=P(t,100),n=P(n,100);var r=l.floor(e),i=e-r,o=n*(1-t),e=n*(1-i*t),t=n*(1-(1-i)*t),r=r%6;return{r:255*[n,e,o,o,t,n][r],g:255*[t,n,n,e,o,o][r],b:255*[o,o,t,n,n,e][r]}}(e.h,r,i),a=!0,s="hsv"):B(e.h)&&B(e.s)&&B(e.l)&&(r=L(e.s),o=L(e.l),t=function(e,t,n){var r,i,o;function a(e,t,n){return n<0&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}e=P(e,360),t=P(t,100),n=P(n,100),0===t?r=i=o=n:(r=a(t=2*n-(n=n<.5?n*(1+t):n+t-n*t),n,e+1/3),i=a(t,n,e),o=a(t,n,e-1/3));return{r:255*r,g:255*i,b:255*o}}(e.h,r,o),a=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a));return n=T(n),{ok:a,format:e.format||s,r:f(255,d(t.r,0)),g:f(255,d(t.g,0)),b:f(255,d(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=o(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=o(this._r)),this._g<1&&(this._g=o(this._g)),this._b<1&&(this._b=o(this._b)),this._ok=n.ok,this._tc_id=r++}function i(e,t,n){e=P(e,255),t=P(t,255),n=P(n,255);var r,i=d(e,t,n),o=f(e,t,n),a=(i+o)/2;if(i==o)r=l=0;else{var s=i-o,l=.5<a?s/(2-i-o):s/(i+o);switch(i){case e:r=(t-n)/s+(t<n?6:0);break;case t:r=(n-e)/s+2;break;case n:r=(e-t)/s+4}r/=6}return{h:r,s:l,l:a}}function a(e,t,n){e=P(e,255),t=P(t,255),n=P(n,255);var r,i=d(e,t,n),o=f(e,t,n),a=i,s=i-o,l=0===i?0:s/i;if(i==o)r=0;else{switch(i){case e:r=(t-n)/s+(t<n?6:0);break;case t:r=(n-e)/s+2;break;case n:r=(e-t)/s+4}r/=6}return{h:r,s:l,v:a}}function t(e,t,n,r){n=[C(o(e).toString(16)),C(o(t).toString(16)),C(o(n).toString(16))];return r&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function s(e,t,n,r){return[C(R(r)),C(o(e).toString(16)),C(o(t).toString(16)),C(o(n).toString(16))].join("")}function n(e,t){t=0===t?0:t||10;e=h(e).toHsl();return e.s-=t/100,e.s=S(e.s),h(e)}function p(e,t){t=0===t?0:t||10;e=h(e).toHsl();return e.s+=t/100,e.s=S(e.s),h(e)}function y(e){return h(e).desaturate(100)}function g(e,t){t=0===t?0:t||10;e=h(e).toHsl();return e.l+=t/100,e.l=S(e.l),h(e)}function v(e,t){t=0===t?0:t||10;e=h(e).toRgb();return e.r=d(0,f(255,e.r-o(-t/100*255))),e.g=d(0,f(255,e.g-o(-t/100*255))),e.b=d(0,f(255,e.b-o(-t/100*255))),h(e)}function m(e,t){t=0===t?0:t||10;e=h(e).toHsl();return e.l-=t/100,e.l=S(e.l),h(e)}function b(e,t){e=h(e).toHsl(),t=(e.h+t)%360;return e.h=t<0?360+t:t,h(e)}function x(e){e=h(e).toHsl();return e.h=(e.h+180)%360,h(e)}function _(e){var t=h(e).toHsl(),n=t.h;return[h(e),h({h:(n+120)%360,s:t.s,l:t.l}),h({h:(n+240)%360,s:t.s,l:t.l})]}function w(e){var t=h(e).toHsl(),n=t.h;return[h(e),h({h:(n+90)%360,s:t.s,l:t.l}),h({h:(n+180)%360,s:t.s,l:t.l}),h({h:(n+270)%360,s:t.s,l:t.l})]}function M(e){var t=h(e).toHsl(),n=t.h;return[h(e),h({h:(n+72)%360,s:t.s,l:t.l}),h({h:(n+216)%360,s:t.s,l:t.l})]}function j(e,t,n){t=t||6,n=n||30;var r=h(e).toHsl(),i=360/n,o=[h(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(h(r));return o}function k(e,t){t=t||6;for(var e=h(e).toHsv(),n=e.h,r=e.s,i=e.v,o=[],a=1/t;t--;)o.push(h({h:n,s:r,v:i})),i=(i+a)%1;return o}h.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,e=e.b/255,t=t<=.03928?t/12.92:l.pow((.055+t)/1.055,2.4),n=n<=.03928?n/12.92:l.pow((.055+n)/1.055,2.4),e=e<=.03928?e/12.92:l.pow((.055+e)/1.055,2.4);return.2126*t+.7152*n+.0722*e},setAlpha:function(e){return this._a=T(e),this._roundA=o(100*this._a)/100,this},toHsv:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=a(this._r,this._g,this._b),t=o(360*e.h),n=o(100*e.s),e=o(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+e+"%)":"hsva("+t+", "+n+"%, "+e+"%, "+this._roundA+")"},toHsl:function(){var e=i(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=i(this._r,this._g,this._b),t=o(360*e.h),n=o(100*e.s),e=o(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+e+"%)":"hsla("+t+", "+n+"%, "+e+"%, "+this._roundA+")"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){r=[C(o(e).toString(16)),C(o(t).toString(16)),C(o(n).toString(16)),C(R(r))];if(i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1))return r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0);return r.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(100*P(this._r,255))+"%",g:o(100*P(this._g,255))+"%",b:o(100*P(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+o(100*P(this._r,255))+"%, "+o(100*P(this._g,255))+"%, "+o(100*P(this._b,255))+"%)":"rgba("+o(100*P(this._r,255))+"%, "+o(100*P(this._g,255))+"%, "+o(100*P(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&A[t(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+s(this._r,this._g,this._b,this._a),n=t;return"progid:DXImageTransform.Microsoft.gradient("+(this._gradientType?"GradientType = 1, ":"")+"startColorstr="+t+",endColorstr="+(n=e?"#"+s((e=h(e))._r,e._g,e._b,e._a):n)+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&0<=this._a;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),(n="hsv"===e?this.toHsvString():n)||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return h(this.toString())},_applyModification:function(e,t){t=e.apply(null,[this].concat([].slice.call(t)));return this._r=t._r,this._g=t._g,this._b=t._b,this.setAlpha(t._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(v,arguments)},darken:function(){return this._applyModification(m,arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(y,arguments)},spin:function(){return this._applyModification(b,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(j,arguments)},complement:function(){return this._applyCombination(x,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(M,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},h.fromRatio=function(e,t){if("object"==q(e)){var n,r={};for(n in e)e.hasOwnProperty(n)&&(r[n]="a"===n?e[n]:L(e[n]));e=r}return h(e,t)},h.equals=function(e,t){return!(!e||!t)&&h(e).toRgbString()==h(t).toRgbString()},h.random=function(){return h.fromRatio({r:e(),g:e(),b:e()})},h.mix=function(e,t,n){n=0===n?0:n||50;e=h(e).toRgb(),t=h(t).toRgb(),n/=100;return h({r:(t.r-e.r)*n+e.r,g:(t.g-e.g)*n+e.g,b:(t.b-e.b)*n+e.b,a:(t.a-e.a)*n+e.a})},h.readability=function(e,t){e=h(e),t=h(t);return(l.max(e.getLuminance(),t.getLuminance())+.05)/(l.min(e.getLuminance(),t.getLuminance())+.05)},h.isReadable=function(e,t,n){var r=h.readability(e,t),i=!1,n=function(e){var t;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),e=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==e&&"large"!==e&&(e="small");return{level:t,size:e}}(n);switch(n.level+n.size){case"AAsmall":case"AAAlarge":i=4.5<=r;break;case"AAlarge":i=3<=r;break;case"AAAsmall":i=7<=r}return i},h.mostReadable=function(e,t,n){for(var r,i=null,o=0,a=(n=n||{}).includeFallbackColors,s=n.level,l=n.size,u=0;u<t.length;u++)o<(r=h.readability(e,t[u]))&&(o=r,i=h(t[u]));return h.isReadable(e,i,{level:s,size:l})||!a?i:(n.includeFallbackColors=!1,h.mostReadable(e,["#fff","#000"],n))};var O=h.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},A=h.hexNames=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[e[t]]=t);return n}(O);function T(e){return e=parseFloat(e),e=isNaN(e)||e<0||1<e?1:e}function P(e,t){"string"==typeof(n=e)&&-1!=n.indexOf(".")&&1===parseFloat(n)&&(e="100%");var n="string"==typeof(n=e)&&-1!=n.indexOf("%");return e=f(t,d(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),l.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function S(e){return f(1,d(0,e))}function E(e){return parseInt(e,16)}function C(e){return 1==e.length?"0"+e:""+e}function L(e){return e=e<=1?100*e+"%":e}function R(e){return l.round(255*parseFloat(e)).toString(16)}function I(e){return E(e)/255}var z,D,N,F=(D="[\\s|\\(]+("+(z="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",N="[\\s|\\(]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",{CSS_UNIT:new RegExp(z),rgb:new RegExp("rgb"+D),rgba:new RegExp("rgba"+N),hsl:new RegExp("hsl"+D),hsla:new RegExp("hsla"+N),hsv:new RegExp("hsv"+D),hsva:new RegExp("hsva"+N),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function B(e){return F.CSS_UNIT.exec(e)}void 0!==U&&U.exports?U.exports=h:window.tinycolor=h}(Math)},{}],981:[function(e,t,n){"use strict";var r=e("get-canvas-context");t.exports=function(e){return r("webgl",e)}},{"get-canvas-context":575}],982:[function(e,t,n){"use strict";var d=arguments[3],h=arguments[4],p=arguments[5],y=JSON.stringify;t.exports=function(e,t){for(var n=Object.keys(p),r=0,i=n.length;r<i;r++){var o=n[r],a=p[o].exports;if(a===e||a&&a.default===e){s=o;break}}if(!s){for(var s=Math.floor(Math.pow(16,8)*Math.random()).toString(16),l={},r=0,i=n.length;r<i;r++)l[o=n[r]]=o;h[s]=["function(require,module,exports){"+e+"(self); }",l]}var u=Math.floor(Math.pow(16,8)*Math.random()).toString(16),c={};c[s]=s,h[u]=["function(require,module,exports){var f = require("+y(s)+");(f.default ? f.default : f)(self);}",c];var f={};!function e(t){f[t]=!0;for(var n in h[t][1]){n=h[t][1][n];f[n]||e(n)}}(u);c="("+d+")({"+Object.keys(f).map(function(e){return y(e)+":["+h[e][0]+","+y(h[e][1])+"]"}).join(",")+"},{},["+y(u)+"])",u=window.URL||window.webkitURL||window.mozURL||window.msURL,c=new Blob([c],{type:"text/javascript"});if(t&&t.bare)return c;u=u.createObjectURL(c),c=new Worker(u);return c.objectURL=u,c}},{}],983:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,a,s=e("lit"),l=(e=e("./decidable-element"))&&e.__esModule?e:{default:e};function u(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=p(n);return function(e,t){{if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=p(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(i,l.default);var e,t,n,r=h(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).disabled=!1,e}return e=i,n=[{key:"properties",get:function(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}},{key:"styles",get:function(){return[f(p(i),"styles",this),(0,s.css)(a=a||u(["\n        :host {\n          margin: 0.25rem;\n        }\n\n        button {\n          width: 100%;\n          height: 100%;\n          padding: 0.375rem 0.75rem;\n\n          font-family: var(---font-family-base);\n          font-size: 1.125rem;\n          line-height: 1.5;\n          color: var(---color-text-inverse);\n\n          border: 0;\n          border-radius: 0.25rem;\n          outline: none;\n        }\n\n        button:disabled {\n          background-color: var(--decidable-button-background-color, var(---color-element-disabled));\n          outline: none;\n          box-shadow: none;\n        }\n\n        button:enabled {\n          cursor: pointer;\n\n          background-color: var(--decidable-button-background-color, var(---color-element-enabled));\n          outline: none;\n          box-shadow: var(---shadow-2);\n        }\n\n        button:enabled:hover {\n          outline: none;\n          box-shadow: var(---shadow-4);\n        }\n\n        button:enabled:active {\n          outline: none;\n          box-shadow: var(---shadow-8);\n        }\n\n        :host(.keyboard) button:enabled:focus {\n          outline: none;\n          box-shadow: var(---shadow-4);\n        }\n\n        :host(.keyboard) button:enabled:focus:active {\n          outline: none;\n          box-shadow: var(---shadow-8);\n        }\n      "]))]}}],(t=[{key:"render",value:function(){return(0,s.html)(o=o||u(["\n      <button ?disabled=",">\n        <slot></slot>\n      </button>\n    "]),this.disabled)}}])&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=e,customElements.define("decidable-button",e)},{"./decidable-element":986,lit:616}],984:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default={fromAttribute:function(e){return e.split(/\s+/).map(function(e){return Number.parseFloat(e)})},toAttribute:function(e){return e.length?e.map(function(e){return e.toFixed(3)}).join(" "):null}}},{}],985:[function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default={fromAttribute:function(e){return new Set(e.split(/\s+/))},toAttribute:function(e){return e.size?r(e).join(" "):null}}},{}],986:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,s,l,u,c,f,d,h,p,y=e("lit"),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=v(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("d3"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function m(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(){return(x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=M(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=M(n);return function(e,t){{if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=M(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(i,y.LitElement);var e,t,n,r=w(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).uniqueId="decidable-".concat(i.uniqueId),e}return e=i,n=[{key:"uniqueId",get:function(){return i.ID+=1}},{key:"greys",get:function(){var e="#999999",t={white:"#ffffff"};return t.light75=g.interpolateRgb(e,"#ffffff")(.75),t.light50=g.interpolateRgb(e,"#ffffff")(.5),t.light25=g.interpolateRgb(e,"#ffffff")(.25),t.grey=e,t.dark25=g.interpolateRgb(e,"#000000")(.25),t.dark50=g.interpolateRgb(e,"#000000")(.5),t.dark75=g.interpolateRgb(e,"#000000")(.75),t.black="#000000",t}},{key:"shadows",get:function(){return{elevations:[0,2,4,8,16],baselineColor:"#000000",baselineColorString:"0, 0, 0",inverseBaselineColor:"#FFFFFF",inverseBaselineColorString:"255, 255, 255",opacityUmbra:.2,opacityPenumbra:.14,opacityAmbient:.12,opacityBoost:.2,mapUmbra:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:3,b:1,s:-2},4:{x:0,y:2,b:4,s:-1},8:{x:0,y:5,b:5,s:-3},16:{x:0,y:8,b:10,s:-5}},mapPenumbra:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:2,b:2,s:0},4:{x:0,y:4,b:5,s:0},8:{x:0,y:8,b:10,s:1},16:{x:0,y:16,b:24,s:2}},mapAmbient:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:1,b:5,s:0},4:{x:0,y:1,b:10,s:0},8:{x:0,y:3,b:14,s:2},16:{x:0,y:6,b:30,s:5}}}}},{key:"cssBoxShadow",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=this.shadows.opacityUmbra+this.shadows.opacityBoost,i=this.shadows.opacityPenumbra+this.shadows.opacityBoost,o=this.shadows.opacityAmbient+this.shadows.opacityBoost,a="rgba(".concat(n?this.shadows.inverseBaselineColorString:this.shadows.baselineColorString,", ").concat(r,")"),r="rgba(".concat(n?this.shadows.inverseBaselineColorString:this.shadows.baselineColorString,", ").concat(i,")"),i="rgba(".concat(n?this.shadows.inverseBaselineColorString:this.shadows.baselineColorString,", ").concat(o,")"),n=this.shadows.mapUmbra[e],o=this.shadows.mapPenumbra[e],e=this.shadows.mapAmbient[e],n=(t?"".concat(-n.y,"px ").concat(n.y/2,"px "):"".concat(n.y/2,"px ").concat(n.y,"px ")).concat(n.b,"px ").concat(n.s,"px"),o=(t?"".concat(-o.y,"px ").concat(o.y/2,"px "):"".concat(o.y/2,"px ").concat(o.y,"px ")).concat(o.b,"px ").concat(o.s,"px"),e=(t?"".concat(-e.y,"px ").concat(e.y/2,"px "):"".concat(e.y/2,"px ").concat(e.y,"px ")).concat(e.b,"px ").concat(e.s,"px");return"".concat(n," ").concat(a,", ").concat(o," ").concat(r,", ").concat(e," ").concat(i)}},{key:"svgFilters",get:function(){var t=i.shadows,e=t.elevations.map(function(e){return(0,y.svg)(o=o||m(["\n        <filter id=",' filterUnits="userSpaceOnUse" x="-50vw" y="-50vh" width="200vw" height="200vh">\n          <feComponentTransfer in="SourceAlpha" result="solid">\n            <feFuncA  type="table" tableValues="0 1 1"/>\n          </feComponentTransfer>\n          <feOffset in="solid" result="offU" dx='," dy=",' />\n          <feOffset in="solid" result="offP" dx='," dy=",' />\n          <feOffset in="solid" result="offA" dx='," dy="," />\n          ","\n          ","\n          ","\n          <feGaussianBlur in=",' result="blurU" stdDeviation='," />\n          <feGaussianBlur in=",' result="blurP" stdDeviation='," />\n          <feGaussianBlur in=",' result="blurA" stdDeviation=',' />\n          <feFlood in="SourceGraphic" result="opU" flood-color='," flood-opacity=",' />\n          <feFlood in="SourceGraphic" result="opP" flood-color='," flood-opacity=",' />\n          <feFlood in="SourceGraphic" result="opA" flood-color='," flood-opacity=",' />\n          <feComposite in="opU" in2="blurU" result="shU" operator="in" />\n          <feComposite in="opP" in2="blurP" result="shP" operator="in" />\n          <feComposite in="opA" in2="blurA" result="shA" operator="in" />\n          \x3c!-- HACK Edge: Using a dynamic value for erode radius stops Edge from corrupting the "radius" value! --\x3e\n          <feMorphology in="solid" result="smaller" operator="erode" radius=',' />\n          <feComposite in="shU" in2="smaller" result="finalU" operator="out" />\n          <feComposite in="shP" in2="smaller" result="finalP" operator="out" />\n          <feComposite in="shA" in2="smaller" result="finalA" operator="out" />\n          <feMerge>\n            <feMergeNode in="finalU" />\n            <feMergeNode in="finalP" />\n            <feMergeNode in="finalA" />\n            <feMergeNode in="SourceGraphic" />\n          </feMerge>\n        </filter>']),"shadow-".concat(e),t.mapUmbra[e].y/2,t.mapUmbra[e].y,t.mapPenumbra[e].y/2,t.mapPenumbra[e].y,t.mapAmbient[e].y/2,t.mapAmbient[e].y,0===t.mapUmbra[e].s?(0,y.svg)(s=s||m([""])):(0,y.svg)(l=l||m(['<feMorphology in="offU" result="spreadU" operator='," radius="," />"]),0<t.mapUmbra[e].s?"dilate":"erode",Math.abs(t.mapUmbra[e].s)),0===t.mapPenumbra[e].s?(0,y.svg)(u=u||m([""])):(0,y.svg)(c=c||m(['<feMorphology in="offP" result="spreadP" operator='," radius="," />"]),0<t.mapPenumbra[e].s?"dilate":"erode",Math.abs(t.mapPenumbra[e].s)),0===t.mapAmbient[e].s?(0,y.svg)(f=f||m([""])):(0,y.svg)(d=d||m(['<feMorphology in="offA" result="spreadA" operator='," radius="," />"]),0<t.mapAmbient[e].s?"dilate":"erode",Math.abs(t.mapAmbient[e].s)),0===t.mapUmbra[e].s?"offU":"spreadU",t.mapUmbra[e].b/2,0===t.mapPenumbra[e].s?"offP":"spreadP",t.mapPenumbra[e].b/2,0===t.mapAmbient[e].s?"offA":"spreadA",t.mapAmbient[e].b/2,t.baselineColor,t.opacityUmbra+t.opacityBoost,t.baselineColor,t.opacityPenumbra+t.opacityBoost,t.baselineColor,t.opacityAmbient+t.opacityBoost,1)});return(0,y.svg)(h=h||m(['\n      <svg class="defs">\n        <defs>\n          ',"\n        </defs>\n      </svg>\n    "]),e)}},{key:"styles",get:function(){return(0,y.css)(p=p||m(["\n      :host {\n        ---shadow-0: var(--shadow-0, ",");\n        ---shadow-2: var(--shadow-2, ",");\n        ---shadow-4: var(--shadow-4, ",");\n        ---shadow-8: var(--shadow-8, ",");\n\n        ---color-background: var(--color-background, ",");\n        ---color-border: var(--color-border, ",");\n        ---color-text: var(--color-text, ",");\n        ---color-text-inverse: var(--color-text-inverse, ",");\n        ---color-link: var(--color-link, ",");\n        ---color-element-background: var(--color-element-background, ",");\n        ---color-element-disabled: var(--color-element-disabled, ",");\n        ---color-element-enabled: var(--color-element-enabled, ",");\n        ---color-element-selected: var(--color-element-selected, ",");\n        ---color-element-border: var(--color-element-border, ",");\n        ---color-element-emphasis: var(--color-element-emphasis, ",');\n\n        ---font-family-base: var(--font-family-base, "Source Sans Pro", sans-serif);\n        ---font-family-math: var(--font-family-math, "Source Serif Pro", serif);\n\n        ---transition-duration: var(--transition-duration, 500ms);\n\n        font-family: var(---font-family-base);\n      }\n\n      :host,\n      :host *,\n      :host *::before,\n      :host *::after {\n        box-sizing: border-box;\n      }\n\n      .math-greek {\n        font-family: var(---font-family-math);\n        font-style: normal;\n      }\n\n      .math-num {\n        font-family: var(---font-family-base);\n        font-style: normal;\n      }\n\n      .math-var {\n        font-family: var(---font-family-math);\n        font-style: italic;\n      }\n\n      .defs {\n        display: block;\n\n        width: 0;\n        height: 0;\n      }\n    ']),(0,y.unsafeCSS)(this.cssBoxShadow(0)),(0,y.unsafeCSS)(this.cssBoxShadow(2)),(0,y.unsafeCSS)(this.cssBoxShadow(4)),(0,y.unsafeCSS)(this.cssBoxShadow(8)),(0,y.unsafeCSS)(this.greys.white),(0,y.unsafeCSS)(this.greys.light75),(0,y.unsafeCSS)(this.greys.dark75),(0,y.unsafeCSS)(this.greys.white),(0,y.unsafeCSS)(this.greys.dark25),(0,y.unsafeCSS)(this.greys.light75),(0,y.unsafeCSS)(this.greys.light50),(0,y.unsafeCSS)(this.greys.grey),(0,y.unsafeCSS)(this.greys.dark25),(0,y.unsafeCSS)(this.greys.dark50),(0,y.unsafeCSS)(this.greys.dark75))}}],(t=[{key:"getComputedStyleValue",value:function(e){return window.ShadyCSS?window.ShadyCSS.getComputedStyleValue(this,e):getComputedStyle(this).getPropertyValue(e)}},{key:"firstUpdated",value:function(e){x(M(i.prototype),"firstUpdated",this).call(this,e),g.select(this.renderRoot.host).classed("keyboard",!0).on("mousemove.keyboard touchstart.keyboard",function(e){e=e.currentTarget;g.select(e.renderRoot.host).classed("keyboard",!1).on("mousemove.keyboard touchstart.keyboard",null)}).on("keydown.keyboard",function(e){e=e.currentTarget;g.select(e.renderRoot.host).classed("keyboard",!0).on("keydown.keyboard mousemove.keyboard touchstart.keyboard",null)})}}])&&b(e.prototype,t),n&&b(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();(n.default=e).ID=0},{d3:570,lit:616}],987:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DecidableButton",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"DecidableConverterArray",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"DecidableConverterSet",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(n,"DecidableElement",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"DecidableSlider",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"DecidableSpinner",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"DecidableSwitch",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"DecidableToggle",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"DecidableToggleOption",{enumerable:!0,get:function(){return u.default}});var r=d(e("./decidable-element")),i=d(e("./button")),o=d(e("./slider")),a=d(e("./spinner")),s=d(e("./switch")),l=d(e("./toggle")),u=d(e("./toggle-option")),c=d(e("./converter-array")),f=d(e("./converter-set"));function d(e){return e&&e.__esModule?e:{default:e}}},{"./button":983,"./converter-array":984,"./converter-set":985,"./decidable-element":986,"./slider":988,"./spinner":989,"./switch":990,"./toggle":992,"./toggle-option":991}],988:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,a,s=e("lit/directives/if-defined"),l=e("lit"),u=(e=e("./decidable-element"))&&e.__esModule?e:{default:e};function c(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=y(n);return function(e,t){{if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=y(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(i,u.default);var e,t,n,r=p(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).disabled=!1,e.max=void 0,e.min=void 0,e.step=void 0,e.value=void 0,e}return e=i,n=[{key:"properties",get:function(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0},max:{attribute:"max",type:Number,reflect:!0},min:{attribute:"min",type:Number,reflect:!0},step:{attribute:"step",type:Number,reflect:!0},value:{attribute:"value",type:Number,reflect:!0}}}},{key:"styles",get:function(){return[d(y(i),"styles",this),(0,l.css)(a=a||c(["\n        :host {\n          ---shadow-2-rotate: var(--shadow-2-rotate, ",");\n          ---shadow-4-rotate: var(--shadow-4-rotate, ",");\n          ---shadow-8-rotate: var(--shadow-8-rotate, ",");\n\n          display: flex;\n\n          flex-direction: column;\n\n          align-items: center;\n          justify-content: center;\n        }\n\n        label {\n          margin: 0.25rem 0.25rem 0;\n        }\n\n        .range {\n          display: inline-block;\n\n          width: 3.5rem;\n          height: 4.75rem;\n          margin: 0 0.25rem 0.25rem;\n        }\n\n        decidable-spinner {\n          --decidable-spinner-input-width: 3.5rem;\n\n          margin: 0 0.25rem 0.25rem;\n        }\n\n        /* Adapted from http://danielstern.ca/range.css/#/ */\n        /* Overall */\n        input[type=range] {\n          width: 4.75rem;\n          height: 3.5rem;\n          padding: 0;\n          margin: 0;\n\n          background-color: unset;\n\n          transform: rotate(-90deg);\n          transform-origin: 2.375rem 2.375rem;\n\n          /* stylelint-disable-next-line property-no-vendor-prefix */\n          -webkit-appearance: none;\n        }\n\n        input[type=range]:enabled {\n          cursor: ns-resize;\n        }\n\n        input[type=range]:focus {\n          outline: none;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-ms-tooltip {\n          display: none;\n        }\n\n        /* Track */\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-webkit-slider-runnable-track {\n          width: 100%;\n          height: 4px;\n\n          background: var(---color-element-disabled);\n          border: 0;\n          border-radius: 2px;\n          box-shadow: none;\n        }\n\n        input[type=range]:focus::-webkit-slider-runnable-track {\n          background: var(---color-element-disabled);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-moz-range-track {\n          width: 100%;\n          height: 4px;\n\n          background: var(---color-element-disabled);\n          border: 0;\n          border-radius: 2px;\n          box-shadow: none;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-ms-track {\n          width: 100%;\n          height: 4px;\n\n          color: transparent;\n\n          background: transparent;\n          border-color: transparent;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-ms-fill-lower {\n          background: #cccccc;\n          /* background: var(---color-element-disabled); */\n          border: 0;\n          border-radius: 2px;\n          box-shadow: none;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-ms-fill-upper {\n          background: #cccccc;\n          /* background: var(---color-element-disabled); */\n          border: 0;\n          border-radius: 2px;\n          box-shadow: none;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:focus::-ms-fill-lower {\n          background: var(---color-element-disabled);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:focus::-ms-fill-upper {\n          background: var(---color-element-disabled);\n        }\n\n        /* Thumb */\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-webkit-slider-thumb {\n          width: 10px;\n          height: 20px;\n          margin-top: -8px;\n\n          border: 0;\n          border-radius: 4px;\n\n          /* stylelint-disable-next-line property-no-vendor-prefix */\n          -webkit-appearance: none;\n        }\n\n        input[type=range]:disabled::-webkit-slider-thumb {\n          background: var(---color-element-disabled);\n          box-shadow: none;\n        }\n\n        input[type=range]:enabled::-webkit-slider-thumb {\n          background: var(---color-element-enabled);\n          box-shadow: var(---shadow-2-rotate);\n        }\n\n        input[type=range]:enabled:hover::-webkit-slider-thumb {\n          box-shadow: var(---shadow-4-rotate);\n        }\n\n        input[type=range]:enabled:active::-webkit-slider-thumb {\n          box-shadow: var(---shadow-8-rotate);\n        }\n\n        :host(.keyboard) input[type=range]:enabled:focus::-webkit-slider-thumb {\n          box-shadow: var(---shadow-4-rotate);\n        }\n\n        :host(.keyboard) input[type=range]:focus:active::-webkit-slider-thumb {\n          box-shadow: var(---shadow-8-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-moz-range-thumb {\n          width: 10px;\n          height: 20px;\n\n          border: 0;\n          border-radius: 4px;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:disabled::-moz-range-thumb {\n          background: var(---color-element-disabled);\n          box-shadow: none;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:enabled::-moz-range-thumb {\n          background: var(---color-element-enabled);\n          box-shadow: var(---shadow-2-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:enabled:hover::-moz-range-thumb {\n          box-shadow: var(---shadow-4-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:enabled:active::-moz-range-thumb {\n          box-shadow: var(---shadow-8-rotate);\n        }\n\n        :host(.keyboard) input[type=range]:enabled:focus::-moz-range-thumb {\n          box-shadow: var(---shadow-4-rotate);\n        }\n\n        :host(.keyboard) input[type=range]:enabled:focus:active::-moz-range-thumb {\n          box-shadow: var(---shadow-8-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-ms-thumb {\n          width: 10px;\n          height: 20px;\n          margin-top: 0;\n\n          background: #999999;\n          /* background: var(---color-element-enabled); */\n          border: 0;\n          border-radius: 4px;\n          box-shadow: var(---shadow-2-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:disabled::-ms-thumb {\n          background: var(---color-element-disabled);\n          box-shadow: none;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:enabled::-ms-thumb {\n          background: var(---color-element-enabled);\n          box-shadow: var(---shadow-2-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:enabled:hover::-ms-thumb {\n          box-shadow: var(---shadow-4-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:enabled:active::-ms-thumb {\n          box-shadow: var(---shadow-8-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        :host(.keyboard) input[type=range]:enabled:focus::-ms-thumb {\n          box-shadow: var(---shadow-4-rotate);\n        }\n\n        :host(.keyboard) input[type=range]:enabled:focus:active::-ms-thumb {\n          box-shadow: var(---shadow-8-rotate);\n        }\n      "]),(0,l.unsafeCSS)(this.cssBoxShadow(2,!0,!1)),(0,l.unsafeCSS)(this.cssBoxShadow(4,!0,!1)),(0,l.unsafeCSS)(this.cssBoxShadow(8,!0,!1)))]}}],(t=[{key:"changed",value:function(e){this.value=e.target.value,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}},{key:"inputted",value:function(e){this.value=e.target.value}},{key:"render",value:function(){return(0,l.html)(o=o||c(["\n      <label for=",'>\n        <slot></slot>\n      </label>\n      <div class="range">\n        <input type="range" id='," min="," max="," step="," .value="," @change="," @input=",">\n      </div>\n      <decidable-spinner min="," max="," step="," .value="," @input=","></decidable-spinner>\n    "]),"".concat(this.uniqueId,"-slider"),"".concat(this.uniqueId,"-slider"),(0,s.ifDefined)(this.min),(0,s.ifDefined)(this.max),(0,s.ifDefined)(this.step),this.value,this.changed.bind(this),this.inputted.bind(this),(0,s.ifDefined)(this.min),(0,s.ifDefined)(this.max),(0,s.ifDefined)(this.step),this.value,this.inputted.bind(this))}}])&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=e,customElements.define("decidable-slider",e)},{"./decidable-element":986,lit:616,"lit/directives/if-defined":615}],989:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,a,s=e("lit/directives/if-defined"),l=e("lit"),u=(e=e("./decidable-element"))&&e.__esModule?e:{default:e};function c(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=y(n);return function(e,t){{if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=y(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(i,u.default);var e,t,n,r=p(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).disabled=!1,e.max=void 0,e.min=void 0,e.step=void 0,e.value=void 0,e}return e=i,n=[{key:"properties",get:function(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0},max:{attribute:"max",type:Number,reflect:!0},min:{attribute:"min",type:Number,reflect:!0},step:{attribute:"step",type:Number,reflect:!0},value:{attribute:"value",type:Number,reflect:!0}}}},{key:"styles",get:function(){return[d(y(i),"styles",this),(0,l.css)(a=a||c(['\n        :host {\n          ---decidable-spinner-font-size: var(--decidable-spinner-font-size, 1.125rem);\n          ---decidable-spinner-input-width: var(--decidable-spinner-input-width, 4rem);\n          ---decidable-spinner-prefix: var(--decidable-spinner-prefix, "");\n\n          display: block;\n        }\n\n        label {\n          position: relative;\n          display: flex;\n\n          flex-direction: column;\n\n          align-items: center;\n\n          margin: 0;\n\n          font-size: 0.75rem;\n        }\n\n        label::before {\n          position: absolute;\n          bottom: 1px;\n          left: calc(50% - var(---decidable-spinner-input-width) / 2 + 0.25rem);\n\n          font-size: var(---decidable-spinner-font-size);\n          line-height: normal;\n\n          content: var(---decidable-spinner-prefix);\n        }\n\n        input[type=number] {\n          width: var(---decidable-spinner-input-width);\n\n          font-family: var(---font-family-base);\n          font-size: var(---decidable-spinner-font-size);\n          color: inherit;\n          text-align: right;\n\n          background: none;\n          border: 0;\n          border-radius: 0;\n          outline: none;\n          box-shadow: var(---shadow-2);\n\n          -webkit-appearance: none; /* stylelint-disable-line property-no-vendor-prefix */\n        }\n\n        input[type=number]:hover {\n          box-shadow: var(---shadow-4);\n        }\n\n        input[type=number]:focus,\n        input[type=number]:active {\n          box-shadow: var(---shadow-8);\n        }\n\n        input[type=number]:disabled {\n          color: var(---color-text);\n\n          border: 0;\n          box-shadow: none;\n\n          /* HACK: Use correct text color in Safari */\n          -webkit-opacity: 1;\n          /* HACK: Hide spinners in disabled input for Firefox and Safari */\n          -moz-appearance: textfield; /* stylelint-disable-line property-no-vendor-prefix */\n          /* HACK: Use correct text color in Safari */\n          -webkit-text-fill-color: var(---color-text);\n        }\n\n        /* HACK: Hide spinners in disabled input for Firefox and Safari */\n        input[type=number]:disabled::-webkit-outer-spin-button,\n        input[type=number]:disabled::-webkit-inner-spin-button {\n          margin: 0;\n          -webkit-appearance: none; /* stylelint-disable-line property-no-vendor-prefix */\n        }\n      ']))]}}],(t=[{key:"inputted",value:function(e){this.value=e.target.value}},{key:"render",value:function(){return(0,l.html)(o=o||c(["\n      <label>\n        <slot></slot>\n        <input ?disabled=",' type="number" min='," max="," step="," .value="," @input=",">\n      </label>\n    "]),this.disabled,(0,s.ifDefined)(this.min),(0,s.ifDefined)(this.max),(0,s.ifDefined)(this.step),this.value,this.inputted.bind(this))}}])&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=e,customElements.define("decidable-spinner",e)},{"./decidable-element":986,lit:616,"lit/directives/if-defined":615}],990:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,a,s=e("lit"),l=(e=e("./decidable-element"))&&e.__esModule?e:{default:e};function u(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=p(n);return function(e,t){{if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=p(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(i,l.default);var e,t,n,r=h(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).checked=!1,e.disabled=!1,e}return e=i,n=[{key:"properties",get:function(){return{checked:{attribute:"checked",type:Boolean,reflect:!0},disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}},{key:"styles",get:function(){return[f(p(i),"styles",this),(0,s.css)(a=a||u(['\n        :host {\n          display: flex;\n\n          flex-direction: column;\n\n          align-items: center;\n          justify-content: center;\n        }\n\n        /* Adapted from https://codepen.io/guuslieben/pen/YyPRVP */\n        input[type=checkbox] {\n          /* visuallyhidden: https://github.com/h5bp/html5-boilerplate/blob/master/dist/doc/css.md */\n          position: absolute;\n\n          width: 1px;\n          height: 1px;\n          padding: 0;\n          margin: -1px;\n          overflow: hidden;\n          clip: rect(0 0 0 0);\n\n          white-space: nowrap;\n\n          border: 0;\n          clip-path: inset(100%); /* May cause a performance issue: https://github.com/h5bp/html5-boilerplate/issues/2021 */\n        }\n\n        input[type=checkbox] + label {\n          order: 1;\n\n          margin: 0 0.25rem 0.25rem;\n\n          font-weight: 400;\n        }\n\n        input[type=checkbox] + label + label {\n          position: relative;\n\n          min-width: 24px;\n          padding: 0 0 36px;\n          margin: 0.25rem 0.25rem 0;\n\n          font-weight: 400;\n\n          outline: none;\n        }\n\n        input[type=checkbox] + label + label::before,\n        input[type=checkbox] + label + label::after {\n          position: absolute;\n\n          left: 50%;\n\n          margin: 0;\n\n          content: "";\n\n          outline: 0;\n\n          transition: all var(---transition-duration) ease;\n          transform: translate(-50%, 0);\n        }\n\n        input[type=checkbox] + label + label::before {\n          bottom: 1px;\n\n          width: 8px;\n          height: 34px;\n\n          background-color: var(---color-element-disabled);\n          border-radius: 4px;\n        }\n\n        input[type=checkbox] + label + label::after {\n          bottom: 0;\n\n          width: 18px;\n          height: 18px;\n\n          background-color: var(---color-element-enabled);\n          border-radius: 50%;\n          box-shadow: var(---shadow-2);\n        }\n\n        input[type=checkbox]:checked + label + label::after {\n          transform: translate(-50%, -100%);\n        }\n\n        input[type=checkbox]:disabled + label + label::after {\n          background-color: var(---color-element-disabled);\n          box-shadow: none;\n        }\n\n        input[type=checkbox]:enabled + label,\n        input[type=checkbox]:enabled + label + label {\n          cursor: pointer;\n        }\n\n        input[type=checkbox]:enabled + label:hover + label::after,\n        input[type=checkbox]:enabled + label + label:hover::after {\n          box-shadow: var(---shadow-4);\n        }\n\n        input[type=checkbox]:enabled + label:active + label::after,\n        input[type=checkbox]:enabled + label + label:active::after {\n          box-shadow: var(---shadow-8);\n        }\n\n        /* stylelint-disable-next-line selector-max-compound-selectors */\n        :host(.keyboard) input[type=checkbox]:enabled:focus + label + label::after {\n          box-shadow: var(---shadow-4);\n        }\n\n        /* stylelint-disable-next-line selector-max-compound-selectors */\n        :host(.keyboard) input[type=checkbox]:enabled:focus + label + label:active::after,\n        :host(.keyboard) input[type=checkbox]:enabled:focus:active + label + label::after {\n          box-shadow: var(---shadow-8);\n        }\n      ']))]}}],(t=[{key:"changed",value:function(e){this.checked=e.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked},bubbles:!0}))}},{key:"render",value:function(){return(0,s.html)(o=o||u(['\n      <input type="checkbox" id='," ?checked="," ?disabled="," @change=",">\n      <label for=",'>\n        <slot name="off-label"></slot>\n      </label>\n      <label for=',">\n        <slot></slot>\n      </label>\n    "]),"".concat(this.uniqueId,"-checkbox"),this.checked,this.disabled,this.changed.bind(this),"".concat(this.uniqueId,"-checkbox"),"".concat(this.uniqueId,"-checkbox"))}}])&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=e,customElements.define("decidable-switch",e)},{"./decidable-element":986,lit:616}],991:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,a,s=e("lit"),l=(e=e("./decidable-element"))&&e.__esModule?e:{default:e};function u(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=p(n);return function(e,t){{if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=p(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(i,l.default);var e,t,n,r=h(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).checked=!1,e.disabled=!1,e.name=void 0,e.value=void 0,e}return e=i,n=[{key:"properties",get:function(){return{checked:{attribute:"checked",type:Boolean,reflect:!0},disabled:{attribute:"disabled",type:Boolean,reflect:!0},name:{attribute:"name",type:String,reflect:!0},value:{attribute:"value",type:String,reflect:!0}}}},{key:"styles",get:function(){return[f(p(i),"styles",this),(0,s.css)(a=a||u(["\n        :host {\n          display: flex;\n        }\n\n        input[type=radio] {\n          /* visuallyhidden: https://github.com/h5bp/html5-boilerplate/blob/master/dist/doc/css.md */\n          position: absolute;\n\n          width: 1px;\n          height: 1px;\n          padding: 0;\n          margin: -1px;\n          overflow: hidden;\n          clip: rect(0 0 0 0);\n\n          white-space: nowrap;\n\n          border: 0;\n          clip-path: inset(100%); /* May cause a performance issue: https://github.com/h5bp/html5-boilerplate/issues/2021 */\n        }\n\n        input[type=radio] + label {\n          width: 100%;\n          padding: 0.375rem 0.75rem;\n\n          font-family: var(---font-family-base);\n          font-size: 1.125rem;\n          line-height: 1.5;\n          color: var(---color-text-inverse);\n          text-align: center;\n\n          cursor: pointer;\n\n          background-color: var(---color-element-enabled);\n          border: 0;\n          border-radius: 0;\n          outline: none;\n\n          box-shadow: var(---shadow-2);\n        }\n\n        input[type=radio]:checked + label {\n          background-color: var(---color-element-selected);\n          outline: none;\n          box-shadow: var(---shadow-2);\n        }\n\n        input[type=radio] + label:hover {\n          z-index: 1;\n\n          outline: none;\n          box-shadow: var(---shadow-4);\n        }\n\n        input[type=radio] + label:active {\n          z-index: 2;\n\n          outline: none;\n          box-shadow: var(---shadow-8);\n        }\n\n        :host(:first-of-type) input[type=radio] + label {\n          border-top-left-radius: 0.25rem;\n          border-top-right-radius: 0.25rem;\n        }\n\n        :host(:last-of-type) input[type=radio] + label {\n          border-bottom-right-radius: 0.25rem;\n          border-bottom-left-radius: 0.25rem;\n        }\n\n        :host(.keyboard) input[type=radio]:focus + label {\n          z-index: 1;\n\n          outline: none;\n          box-shadow: var(---shadow-4);\n        }\n\n        :host(.keyboard) input[type=radio]:focus:checked + label {\n          z-index: 1;\n\n          background-color: var(---color-element-selected);\n          outline: none;\n          box-shadow: var(---shadow-4);\n        }\n\n        :host(.keyboard) input[type=radio]:focus + label:active {\n          z-index: 2;\n\n          outline: none;\n          box-shadow: var(---shadow-8);\n        }\n      "]))]}}],(t=[{key:"changed",value:function(e){this.checked=e.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked,value:this.value},bubbles:!0}))}},{key:"render",value:function(){return(0,s.html)(o=o||u(['\n      <input type="radio" id='," name="," value="," .checked="," @change=",">\n      <label for=",">\n        <slot></slot>\n      </label>\n    "]),"".concat(this.uniqueId,"-radio"),this.name,this.value,this.checked,this.changed.bind(this),"".concat(this.uniqueId,"-radio"))}}])&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=e,customElements.define("decidable-toggle-option",e)},{"./decidable-element":986,lit:616}],992:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,a,s=e("lit"),l=(e=e("./decidable-element"))&&e.__esModule?e:{default:e};function u(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=p(n);return function(e,t){{if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=p(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(i,l.default);var e,t,n,r=h(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).disabled=!1,e}return e=i,n=[{key:"properties",get:function(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}},{key:"styles",get:function(){return[f(p(i),"styles",this),(0,s.css)(a=a||u(["\n        fieldset {\n          display: flex;\n\n          flex-direction: column;\n\n          align-items: stretch;\n          justify-content: center;\n\n          margin: 0.25rem;\n\n          border: 0;\n        }\n\n        legend {\n          text-align: center;\n        }\n      "]))]}}],(t=[{key:"render",value:function(){return(0,s.html)(o=o||u(["\n      <fieldset ?disabled=",'>\n        <legend><slot name="label"></slot></legend>\n        <slot></slot>\n      </fieldset>\n    ']),this.disabled)}}])&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=e,customElements.define("decidable-toggle",e)},{"./decidable-element":986,lit:616}],993:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var d,h,p,y,g,v,m,b,x,_,w,M,j,k,O,A,T,P,S,E,C,L,R,I,z,D,N,F,B,o,U=e("lit"),a=r(e("@decidable/prospectable-math")),s=r(e("../equations/cpt-equation"));function r(e){return e&&e.__esModule?e:{default:e}}function q(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=H(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=H(n);return function(e,t){{if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=H(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(i,s.default);var e,t,n,r=f(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).numeric=!1,e.xl=0,e.xw=100,e.pw=.75,e.xs=50,e.a=.8,e.l=1.2,e.g=.8,e.alignState(),e}return e=i,n=[{key:"properties",get:function(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0}}}},{key:"styles",get:function(){return[u(H(i),"styles",this),(0,U.css)(o=o||q(["\n        /* :host {\n          display: inline-block;\n        } */\n      "]))]}}],(t=[{key:"alignState",value:function(){this.vw=a.default.xal2v(this.xw,this.a,this.l),this.vl=a.default.xal2v(this.xl,this.a,this.l),this.ww=a.default.pg2w(this.pw,this.g),this.wl=1-this.ww,this.vs=a.default.xal2v(this.xs,this.a,this.l),this.ug=this.vw*this.ww+this.vl*this.wl,this.us=this.vs,this.uDiff=this.ug-this.us}},{key:"sendEvent",value:function(){this.dispatchEvent(new CustomEvent("cpt-calculation-change",{detail:{xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,a:this.a,l:this.l,g:this.g},bubbles:!0}))}},{key:"xwInput",value:function(e){this.xw=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"pwInput",value:function(e){this.pw=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"xsInput",value:function(e){this.xs=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"aInput",value:function(e){this.a=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"lInput",value:function(e){this.l=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"gInput",value:function(e){this.g=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"render",value:function(){var e,t,n,r,i,o,a,s,l,u;this.alignState();var c=this.numeric?(e=(0,U.html)(d=d||q(['<decidable-spinner class="x" ?disabled=',' .value="','" @input=','>\n          <var class="math-var">x<sub class="subscript win">win</sub></var>\n        </decidable-spinner>']),!this.interactive,this.xw,this.xwInput.bind(this)),t=(0,U.html)(h=h||q(['<decidable-spinner class="x" disabled .value="','">\n          <var class="math-var">x<sub class="subscript loss">loss</sub></var>\n        </decidable-spinner>']),this.xl),n=(0,U.html)(p=p||q(['<decidable-spinner class="p" ?disabled=',' min="0" max="1" step=".01" .value="','" @input=','>\n          <var class="math-var">p<sub class="subscript win">win</sub></var>\n        </decidable-spinner>']),!this.interactive,+this.pw.toFixed(2),this.pwInput.bind(this)),r=(0,U.html)(y=y||q(['<decidable-spinner class="x" ?disabled=',' .value="','" @input=','>\n          <var class="math-var">x<sub class="subscript sure">sure</sub></var>\n        </decidable-spinner>']),!this.interactive,this.xs,this.xsInput.bind(this)),i=(0,U.html)(g=g||q(['<decidable-spinner class="v" disabled .value="','">\n          <var class="math-var">v<sub class="subscript win">win</sub></var>\n        </decidable-spinner>']),+this.vw.toFixed(1)),o=(0,U.html)(v=v||q(['<decidable-spinner class="v" disabled .value="','">\n          <var class="math-var">v<sub class="subscript loss">loss</sub></var>\n        </decidable-spinner>']),+this.vl.toFixed(1)),a=(0,U.html)(m=m||q(['<decidable-spinner class="w" disabled .value="','">\n          <var class="math-var">w<sub class="subscript win">win</sub></var>\n        </decidable-spinner>']),+this.ww.toFixed(2)),s=(0,U.html)(b=b||q(['<decidable-spinner class="w" disabled .value="','">\n          <var class="math-var">w<sub class="subscript loss">loss</sub></var>\n        </decidable-spinner>']),+this.wl.toFixed(2)),l=(0,U.html)(x=x||q(['<decidable-spinner class="v" disabled .value="','">\n          <var class="math-var">v<sub class="subscript sure">sure</sub></var>\n        </decidable-spinner>']),+this.vs.toFixed(1)),u=(0,U.html)(_=_||q(['<decidable-spinner class="u" disabled .value="','">\n          <var class="math-var">U<sub class="subscript gamble">gamble</sub></var>\n        </decidable-spinner>']),+this.ug.toFixed(1)),f=(0,U.html)(w=w||q(['<decidable-spinner class="u" disabled .value="','">\n          <var class="math-var">U<sub class="subscript sure">sure</sub></var>\n        </decidable-spinner>']),+this.us.toFixed(1)),(0,U.html)(M=M||q(["",""]),0<this.uDiff?(0,U.html)(j=j||q(['<span class="comparison">&gt;</span>'])):this.uDiff<0?(0,U.html)(k=k||q(['<span class="comparison">&lt;</span>'])):(0,U.html)(O=O||q(['<span class="comparison">=</span>'])))):(e=(0,U.html)(A=A||q(['<var class="math-var x">x<sub class="subscript win">win</sub></var>'])),t=(0,U.html)(T=T||q(['<var class="math-var x">x<sub class="subscript loss">loss</sub></var>'])),n=(0,U.html)(P=P||q(['<var class="math-var p">p<sub class="subscript win">win</sub></var>'])),r=(0,U.html)(S=S||q(['<var class="math-var x">x<sub class="subscript sure">sure</sub></var>'])),i=(0,U.html)(E=E||q(['<var class="math-var v">v<sub class="subscript win">win</sub></var>'])),o=(0,U.html)(C=C||q(['<var class="math-var v">v<sub class="subscript loss">loss</sub></var>'])),a=(0,U.html)(L=L||q(['<var class="math-var w">w<sub class="subscript win">win</sub></var>'])),s=(0,U.html)(R=R||q(['<var class="math-var w">w<sub class="subscript loss">loss</sub></var>'])),l=(0,U.html)(I=I||q(['<var class="math-var v">v<sub class="subscript sure">sure</sub></var>'])),u=(0,U.html)(z=z||q(['<var class="math-var u">U<sub class="subscript gamble">gamble</sub></var>'])),f=(0,U.html)(D=D||q(['<var class="math-var u">U<sub class="subscript sure">sure</sub></var>'])),(0,U.html)(N=N||q(['<span class="comparison">≟</span>']))),f=(0,U.html)(F=F||q(['\n      <tr>\n        <td class="right">\n          <span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>','<span class="paren tight">)</span></span>&nbsp;<span class="function w"><var class="math-var w tight">w</var><span class="paren tight">(</span>','<span class="paren tight">)</span></span><span class="plus">+</span><span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>','<span class="paren tight">)</span></span>&nbsp;<span class="bracket tight">[</span><span class="tight">1</span><span class="minus">−</span><span class="function w"><var class="math-var w">w</var><span class="paren tight">(</span>','<span class="paren tight">)</span></span><span class="bracket tight">]</span>\n        </td>\n        <td>\n          ','\n        </td>\n        <td class="left">\n          <span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>','<span class="paren tight">)</span></span>\n        </td>\n      </tr>\n      <tr>\n        <td class="right">\n          ',"&nbsp;",'<span class="plus">+</span>',"&nbsp;","\n        </td>\n        <td>\n          ",'\n        </td>\n        <td class="left">\n          ','\n        </td>\n      </tr>\n      <tr>\n        <td class="right">\n          ',"\n        </td>\n        <td>\n          ",'\n        </td>\n        <td class="left">\n          ',"\n        </td>\n      </tr>"]),e,n,t,n,c,r,i,a,o,s,c,l,u,c,f);return(0,U.html)(B=B||q(['\n      <div class="holder">\n        <table class="equation">\n          <tbody>\n            ',"\n          </tbody>\n        </table>\n      </div>"]),f)}}])&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=e,customElements.define("cpt-calculation",e)},{"../equations/cpt-equation":1009,"@decidable/prospectable-math":1021,lit:616}],994:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(n){n.onmessage=function(e){var t=new r.AmwgSampler({alpha:{type:"real",lower:0,upper:1},lambda:{type:"real",lower:0,upper:10},gamma:{type:"real",lower:0,upper:1},luce:{type:"real",lower:0,upper:100}},function(o,e){var a=0;a+=s.beta(o.alpha,1.25,1.25);a+=s.gamma(o.lambda,3,1.5);a+=s.beta(o.gamma,1.25,1.25);return a+=s.gamma(o.luce,3,1.5),e.forEach(function(e){var t=l.default.xal2v(e.xl,o.alpha,o.lambda),n=l.default.xal2v(e.xw,o.alpha,o.lambda),r=l.default.xal2v(e.xs,o.alpha,o.lambda),i=l.default.pg2w(e.pw,o.gamma),n=1/(1+Math.exp(o.luce*(r-((1-i)*t+i*n)))),e="sure"===e.response?0:1;a+=s.bern(e,n)}),a},e.data);t.burn(1e3);e=t.sample(5e3),t={alpha:i.median(e.alpha),lambda:i.median(e.lambda),gamma:i.median(e.gamma),luce:i.median(e.luce)};n.postMessage({results:t,samples:e})}},e("regenerator-runtime/runtime");var s=o(e("bayes.js/distributions")),r=o(e("bayes.js/mcmc")),i=o(e("d3")),l=(e=e("@decidable/prospectable-math"))&&e.__esModule?e:{default:e};function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var n,r,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=o?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=e[n]);return i.default=e,t&&t.set(e,i),i}},{"@decidable/prospectable-math":1021,"bayes.js/distributions":4,"bayes.js/mcmc":5,d3:570,"regenerator-runtime/runtime":972}],995:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,s,l=e("lit"),u=y(e("plotly.js/lib/core")),r=y(e("plotly.js/lib/histogram")),c=i(e("webworkify")),f=i(e("./cpt-fit-worker")),d=i(e("../cpt-element")),h=i(e("./plotly-style.auto"));function i(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=p(t);if(t&&t.has(e))return t.get(e);var n,r,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=o?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=e[n]);return i.default=e,t&&t.set(e,i),i}function g(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=_(n);return function(e,t){{if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=_(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}u.register([r]);r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(i,d.default);var e,t,n,r=x(i);function i(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this)).a=1,t.l=1,t.g=1,t.choices=[],t.samples=null,t.working=!1,t.queued=!1,t.worker=(0,c.default)(f.default),t.worker.onmessage=function(e){t.working=!1,t.samples=e.data.samples,t.a=e.data.results.alpha,t.l=e.data.results.lambda,t.g=e.data.results.gamma,t.requestUpdate(),t.dispatchEvent(new CustomEvent("cpt-fit-update",{detail:{a:t.a,l:t.l,g:t.g},bubbles:!0})),t.queued&&t.fit()},t.fit(),t}return e=i,n=[{key:"properties",get:function(){return{}}},{key:"styles",get:function(){return[m(_(i),"styles",this),h.default,(0,l.css)(s=s||g(["\n        /* :host {\n          display: inline-block;\n        } */\n\n        .trace,\n        .hist {\n          display: inline-block;\n\n          width: 20rem;\n          height: 15rem;\n        }\n      "]))]}}],(t=[{key:"fit",value:function(){this.working?this.queued=!0:(this.worker.postMessage(this.choices),this.working=!0,this.queued=!1)}},{key:"clear",value:function(){this.choices=[],this.fit()}},{key:"get",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default",e=this.choices.find(function(e){return e.name===t});return void 0===e?null:e}},{key:"set",value:function(e,t,n,r,i){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"",a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:"",s=this.choices.find(function(e){return e.name===o});void 0===s?this.choices.push({xl:e,xw:t,pw:n,xs:r,response:i,name:o,label:a}):(s.xl=e,s.xw=t,s.pw=n,s.xs=r,s.response=i,s.label=a),this.fit()}},{key:"render",value:function(){return(0,l.html)(o=o||g(["\n      <div>\n        <div>After ",' trials:</div>\n        <div>Current:\n          <var class="math-var a">α</var> = ',',\n          <var class="math-var l">λ</var> = ',',\n          <var class="math-var g">γ</var> = ','\n        </div>\n        <div class="param">\n          <div class="trace alpha"></div>\n          <div class="hist alpha"></div>\n        </div>\n        <div class="param">\n          <div class="trace lambda"></div>\n          <div class="hist lambda"></div>\n        </div>\n        <div class="param">\n          <div class="trace gamma"></div>\n          <div class="hist gamma"></div>\n        </div>\n        <div class="param">\n          <div class="trace luce"></div>\n          <div class="hist luce"></div>\n        </div>\n      </div>\n    ']),this.choices.length,this.a.toFixed(2),this.l.toFixed(2),this.g.toFixed(2))}},{key:"plotParam",value:function(e){var t={l:40,r:10,b:40,t:40,pad:4};u.react(this.shadowRoot.querySelector(".trace.".concat(e)),[{y:this.samples[e]}],{margin:t,title:"Traceplot of ".concat(e)}),u.react(this.shadowRoot.querySelector(".hist.".concat(e)),[{x:this.samples[e],type:"histogram"}],{margin:t,title:"Posterior of ".concat(e)})}},{key:"update",value:function(e){m(_(i.prototype),"update",this).call(this,e),null!==this.samples&&(this.plotParam("alpha"),this.plotParam("lambda"),this.plotParam("gamma"),this.plotParam("luce"))}}])&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=r,customElements.define("cpt-fit",r)},{"../cpt-element":1008,"./cpt-fit-worker":994,"./plotly-style.auto":1007,lit:616,"plotly.js/lib/core":621,"plotly.js/lib/histogram":622,webworkify:982}],996:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o,s=e("lit"),j=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("d3")),k=r(e("@decidable/prospectable-math")),l=r(e("../cpt-element"));function r(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function c(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function f(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function d(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?f(Object(i),!0).forEach(function(e){var t,n;t=r,e=i[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=A(n);return function(e,t){{if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=A(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(M,l.default);var e,t,n,r=y(M);function M(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,M),(e=r.call(this)).firstUpdate=!0,e.drag=!1,e.g=.5,e.p=null,e.label="",e.function="default",e.functions=[{name:"default",g:e.g}],e.probabilities=[{name:"default",p:e.p,label:e.label,function:e.function}],e.xl=null,e.xw=null,e.pw=null,e.xs=null,e.trialCount=null,e.response=null,e.width=NaN,e.height=NaN,e.rem=NaN,e.alignState(),e}return e=M,n=[{key:"properties",get:function(){return{p:{attribute:"probability",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},label:{attribute:"label",type:String,reflect:!0},w:{attribute:!1,type:Number,reflect:!1},width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}},{key:"styles",get:function(){return[O(A(M),"styles",this),(0,s.css)(o=o||c(['\n        :host {\n          display: inline-block;\n        }\n\n        .main {\n          width: 100%;\n          height: 100%;\n        }\n\n        text {\n          /* stylelint-disable property-no-vendor-prefix */\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          -ms-user-select: none;\n          user-select: none;\n        }\n\n        .curve.interactive {\n          cursor: nwse-resize;\n\n          filter: url("#shadow-2");\n          outline: none;\n        }\n\n        .curve.interactive:hover {\n          filter: url("#shadow-4");\n        }\n\n        .curve.interactive:active {\n          filter: url("#shadow-8");\n        }\n\n        :host(.keyboard) .curve.interactive:focus {\n          filter: url("#shadow-8");\n        }\n\n        .point.interactive {\n          cursor: nesw-resize;\n\n          filter: url("#shadow-2");\n          outline: none;\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          /* https://github.com/emilbjorklund/svg-weirdness/issues/27 */\n          stroke: #000000;\n          stroke-opacity: 0;\n          stroke-width: 0;\n        }\n\n        /* Make a larger target for touch users */\n        @media (pointer: coarse) {\n          .point.interactive .circle {\n            stroke: #000000;\n            stroke-opacity: 0;\n            stroke-width: 12px;\n          }\n        }\n\n        .point.interactive:hover {\n          filter: url("#shadow-4");\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          stroke: #ff0000;\n        }\n\n        .point.interactive:active {\n          filter: url("#shadow-8");\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          stroke: #00ff00;\n        }\n\n        :host(.keyboard) .point.interactive:focus {\n          filter: url("#shadow-8");\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          stroke: #0000ff;\n        }\n\n        .background {\n          fill: var(---color-element-background);\n          stroke: var(---color-element-border);\n          stroke-width: 1;\n          shape-rendering: crispEdges;\n        }\n\n        .title-x,\n        .title-y {\n          font-weight: 600;\n\n          fill: currentColor;\n        }\n\n        .tick {\n          font-size: 0.75rem;\n        }\n\n        .scale-x path,\n        .scale-x line,\n        .scale-y path,\n        .scale-y line {\n          stroke: var(---color-element-border);\n        }\n\n        .diagonal {\n          stroke: var(---color-element-border);\n          stroke-dasharray: 4;\n          stroke-width: 1;\n        }\n\n        .curve {\n          fill: none;\n          stroke: var(---color-element-emphasis);\n          stroke-width: 2;\n        }\n\n        .line-p,\n        .line-w {\n          fill: none;\n          stroke-width: 2;\n        }\n\n        .line-p {\n          stroke: var(---color-p);\n        }\n\n        .line-w {\n          stroke: var(---color-w);\n        }\n\n        .point .circle {\n          fill: var(---color-element-emphasis);\n\n          /* r: 6; HACK: Firefox does not support CSS SVG Geometry Properties */\n        }\n\n        .point .label {\n          font-size: 0.75rem;\n\n          dominant-baseline: middle;\n          text-anchor: middle;\n\n          fill: var(---color-text-inverse);\n        }\n      ']))]}}],(t=[{key:"alignState",value:function(){var n=this;this.functions[0].g=this.g,this.probabilities[0].p=this.p,this.probabilities[0].label=this.label,this.probabilities[0].function=this.function,this.probabilities.forEach(function(t){var e=n.functions.find(function(e){return e.name===t.function});t.w=k.default.pg2w(t.p,e.g)}),this.w=this.probabilities[0].w}},{key:"trial",value:function(e,t,n,r,i,o){this.trialCount&&this.removeProbability("".concat(this.trialCount)),this.xl=e,this.xw=t,this.pw=n,this.xs=r,this.trialCount=i,this.response=o,this.setProbability(this.pw,"".concat(this.trialCount),"","default",!0)}},{key:"pauseTrial",value:function(){var e=j.select(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]");e.interrupt("new-1"),e.interrupt("new-2"),e.datum(function(e){return e.paused=!0,e})}},{key:"resumeTrial",value:function(){j.select(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]").datum(function(e){return e.paused=!1,e}),this.requestUpdate()}},{key:"clearFunctions",value:function(){this.functions.splice(1),this.requestUpdate()}},{key:"clearProbabilities",value:function(){this.probabilities.splice(1),this.requestUpdate()}},{key:"clear",value:function(){this.clearFunctions(),this.clearProbabilities()}},{key:"removeFunction",value:function(t){this.functions=this.functions.filter(function(e){return e.name!==t}),this.requestUpdate()}},{key:"removeProbability",value:function(t){this.probabilities=this.probabilities.filter(function(e){return e.name!==t}),this.requestUpdate()}},{key:"remove",value:function(e){this.removeFunction(e),this.removeProbability(e)}},{key:"getFunction",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";return this.functions.find(function(e){return e.name===t})}},{key:"getProbability",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";return this.probabilities.find(function(e){return e.name===t})}},{key:"get",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";return d(d({},this.getFunction(e)),this.getProbability(e))}},{key:"setFunction",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";"default"===t&&(this.g=e);var n=this.functions.find(function(e){return e.name===t});void 0===n?this.functions.push({name:t,g:e}):n.g=e,this.requestUpdate()}},{key:"setProbability",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:t,i=4<arguments.length&&void 0!==arguments[4]&&arguments[4];"default"===t&&(this.p=e,this.label=n);var o=this.probabilities.find(function(e){return e.name===t});void 0===o?this.probabilities.push({name:t,p:e,label:n,function:r,trial:i,new:i}):(o.p=e,o.label=n,o.function=r),this.requestUpdate()}},{key:"set",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"default",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:n;this.setFunction(t,n),this.setProbability(e,n,r,i)}},{key:"render",value:function(){return(0,s.html)(i=i||c(["\n      ","\n    "]),l.default.svgFilters)}},{key:"getDimensions",value:function(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}},{key:"connectedCallback",value:function(){O(A(M.prototype),"connectedCallback",this).call(this),window.addEventListener("resize",this.getDimensions.bind(this))}},{key:"disconnectedCallback",value:function(){window.removeEventListener("resize",this.getDimensions.bind(this)),O(A(M.prototype),"disconnectedCallback",this).call(this)}},{key:"firstUpdated",value:function(e){O(A(M.prototype),"firstUpdated",this).call(this,e),window.setTimeout(this.getDimensions.bind(this),0)}},{key:"update",value:function(e){var t,n,f,d,r,i,o,a,s,l,u,c,h,p,y,g,v,m,b,x,_,w=this;O(A(M.prototype),"update",this).call(this,e),this.alignState(),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem)||(_=this.width,b=this.height,t=(x=Math.min(_,b))-((a={top:2*this.rem,bottom:3*this.rem,left:3*this.rem,right:2*this.rem}).top+a.bottom),s=x-(a.left+a.right),n=parseInt(this.getComputedStyleValue("---transition-duration"),10),f=j.scaleLinear().domain([0,1]).range([0,s]),this.xScale=f,d=j.scaleLinear().domain([1,0]).range([0,t]),this.yScale=d,r=j.drag().subject(function(e,t){return{x:e.x,y:w.yScale(k.default.pg2w(w.xScale.invert(e.x),t.g)),p:w.xScale.invert(e.x),g:t.g,w:k.default.pg2w(w.xScale.invert(e.x),t.g)}}).on("start",function(e){e=e.currentTarget;j.select(e).classed("dragging",!0)}).on("drag",function(e,t){w.drag=!0;var n=w.xScale.invert(e.x),r=w.yScale.invert(e.y),i=n-e.subject.p,n=r-e.subject.w,r=Math.pow(Math.pow(i,2)+Math.pow(n,2),.5),r=e.subject.p>e.subject.w?n<i?e.subject.g-r:e.subject.g+r:n<i?e.subject.g+r:e.subject.g-r;t.g=1<r?1:r<0?0:r,"default"===t.name&&(w.g=t.g),w.alignState(),w.requestUpdate(),w.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:w.get(t.name),bubbles:!0}))}).on("end",function(e){e=e.currentTarget;j.select(e).classed("dragging",!1)}),i=j.drag().subject(function(e,t){return{x:w.xScale(t.p),y:w.yScale(t.w)}}).on("start",function(e){e=e.currentTarget;j.select(e).classed("dragging",!0)}).on("drag",function(e,t){w.drag=!0;e=w.xScale.invert(e.x);t.p=e<0?0:1<e?1:e,"default"===t.name&&(w.p=t.p),w.alignState(),w.requestUpdate(),w.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:{name:t.name,p:t.p,w:t.w,label:t.label,g:w.getFunction(t.function).g},bubbles:!0}))}).on("end",function(e){e=e.currentTarget;j.select(e).classed("dragging",!1)}),o=j.line().x(function(e){return f(e.p)}).y(function(e){return d(e.w)}),b=(_=(g=j.select(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}])).enter().append("svg").classed("main",!0)).merge(g).attr("viewBox","0 0 ".concat(x," ").concat(x)),g=_.append("g").classed("plot",!0),x=b.select(".plot").attr("transform","translate(".concat(a.left,", ").concat(a.top,")")),g.append("clipPath").attr("id","clip-cpt-value").append("rect"),x.select("clipPath rect").attr("height",1+t).attr("width",1+s),_=g.append("g").classed("underlayer",!0),b=x.select(".underlayer"),_.append("rect").classed("background",!0),b.select(".background").attr("height",t).attr("width",s),_.append("g").classed("scale-x",!0),b.select(".scale-x").attr("transform","translate(0, ".concat(t,")")).transition().duration(2*n).ease(j.easeCubicOut).call(j.axisBottom(f)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),(a=_.append("text").classed("title-x",!0).attr("text-anchor","middle")).append("tspan").classed("name",!0).text("Probability ("),a.append("tspan").classed("math-var p",!0).text("p"),a.append("tspan").classed("name",!0).text(")"),b.select(".title-x").attr("transform","translate(".concat(s/2,", ").concat(t+2.25*this.rem,")")),_.append("g").classed("scale-y",!0),b.select(".scale-y").transition().duration(2*n).ease(j.easeCubicOut).call(j.axisLeft(d)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),(s=_.append("text").classed("title-y",!0).attr("text-anchor","middle")).append("tspan").classed("name",!0).text("Decision Weight ("),s.append("tspan").classed("math-var v",!0).text("w"),s.append("tspan").classed("name",!0).text(")"),b.select(".title-y").attr("transform","translate(".concat(-2*this.rem,", ").concat(t/2,")rotate(-90)")),_.append("line").classed("diagonal",!0),b.select(".diagonal").transition().duration(2*n).attr("x1",f(0)).attr("y1",d(0)).attr("x2",f(1)).attr("y2",d(1)),g.append("g").classed("content",!0),(g=(b=(_=x.select(".content")).selectAll(".lines").data(this.probabilities.filter(function(e){return e.p}),function(e){return e.name})).enter().append("g").classed("lines",!0)).each(function(e,t,n){t=n[t],t=j.select(t);t.append("line").classed("line-p above",!0),t.append("line").classed("line-p below",!0),t.append("line").classed("line-w before",!0),t.append("line").classed("line-w after",!0)}),g.filter(function(e){return e.new}).attr("data-animating-ease-time-1",0).attr("data-animating-ease-time-2",0).each(function(e,t,n){t=n[t],t=j.select(t);t.select(".line-p.above").attr("x1",f(e.p)).attr("x2",f(e.p)).attr("y1",d(1)).attr("y2",d(1)),t.select(".line-p.below").attr("x1",f(e.p)).attr("x2",f(e.p)).attr("y1",d(0)).attr("y2",d(0)),t.select(".line-w.before").attr("x1",f(e.p)).attr("x2",f(e.p)).attr("y1",d(e.w)).attr("y2",d(e.w)),t.select(".line-w.after").attr("x1",f(e.p)).attr("x2",f(e.p)).attr("y1",d(e.w)).attr("y2",d(e.w))}),(g=(x=g.merge(b)).filter(function(e){return e.new&&!e.paused})).empty()||(l=g.attr("data-animating-ease-time-1"),u=g.attr("data-animating-ease-time-2"),c=function(e){return j.scaleLinear().range([0,1]).domain([l,1])(e)},h=function(e){return j.scaleLinear().range([0,1]).domain([u,1])(e)},p=function(t){return function(e){return j.scaleLinear().domain([t(l),1]).range([0,1])(t(e))}},y=function(t){return function(e){return j.scaleLinear().domain([t(u),1]).range([0,1])(t(e))}},g.transition("new-1").duration(function(){return Math.floor(n*(1-l))}).ease(function(e){return j.scaleLinear().domain([0,1]).range([l,1])(e)}).attr("data-animating-ease-time-1",1).tween("animating",function(e,t,n){var r=n[t],i=j.select(r),o=j.interpolate((void 0!==r.p?r:e).p,e.p),a=j.interpolate((void 0!==r.g?r:w.getFunction(e.function)).g,w.getFunction(e.function).g),s=j.interpolate(d.invert(i.select(".line-p.above").attr("y1")),e.w),l=j.interpolate(d.invert(i.select(".line-p.below").attr("y1")),e.w);return function(e){r.p=o(j.easeCubicOut(c(e))),r.g=a(j.easeCubicOut(c(e))),r.w=k.default.pg2w(r.p,r.g),i.select(".line-p.above").attr("x1",f(r.p)).attr("x2",f(r.p)).attr("y1",d(s(p(j.easeCubicIn)(e)))).attr("y2",d(1)),i.select(".line-p.below").attr("x1",f(r.p)).attr("x2",f(r.p)).attr("y1",d(l(p(j.easeCubicIn)(e)))).attr("y2",d(0))}}).transition("new-2").duration(function(){return Math.floor(n*(1-u))}).ease(function(e){return j.scaleLinear().domain([0,1]).range([u,1])(e)}).attr("data-animating-ease-time-2",1).tween("animating",function(e,t,n){var r=n[t],i=j.select(r),o=j.interpolate((void 0!==r.p?r:e).p,e.p),a=j.interpolate((void 0!==r.g?r:w.getFunction(e.function)).g,w.getFunction(e.function).g),s=j.interpolate(f.invert(i.select(".line-w.before").attr("x1")),0),l=j.interpolate(f.invert(i.select(".line-w.after").attr("x1")),1);return function(e){r.p=o(j.easeCubicOut(h(e))),r.g=a(j.easeCubicOut(h(e))),r.w=k.default.pg2w(r.p,r.g),i.select(".line-w.before").attr("x1",f(s(y(j.easeCubicOut)(e)))).attr("x2",f(r.p)).attr("y1",d(r.w)).attr("y2",d(r.w)),i.select(".line-w.after").attr("x1",f(l(y(j.easeCubicOut)(e)))).attr("x2",f(r.p)).attr("y1",d(r.w)).attr("y2",d(r.w))}}).on("end",function(e,t,n){t=n[t];t.removeAttribute("data-animating-ease-time-1"),t.removeAttribute("data-animating-ease-time-2"),e.new=!1,w.dispatchEvent(new CustomEvent("decision-response",{detail:{trial:w.trialCount,xl:w.xl,xw:w.xw,pw:w.pw,xs:w.xs,response:w.response},bubbles:!0}))})),(g=x.filter(function(e){return e.new&&e.paused})).empty()||(v=g.attr("data-animating-ease-time-1"),m=g.attr("data-animating-ease-time-2"),g.transition().duration(this.drag?0:this.firstUpdate?2*n:n).ease(j.easeCubicOut).tween("paused",function(e,t,n){var r=n[t],i=j.select(r),o=j.interpolate((void 0!==r.p?r:e).p,e.p),a=j.interpolate((void 0!==r.g?r:w.getFunction(e.function)).g,w.getFunction(e.function).g),s=j.interpolate(1,e.w),l=j.interpolate(0,e.w),u=j.interpolate(e.p,0),c=j.interpolate(e.p,1);return function(e){r.p=o(e),r.g=a(e),r.w=k.default.pg2w(r.p,r.g),i.select(".line-p.above").attr("x1",f(r.p)).attr("x2",f(r.p)).attr("y1",d(s(j.easeCubicIn(v)))).attr("y2",d(1)),i.select(".line-p.below").attr("x1",f(r.p)).attr("x2",f(r.p)).attr("y1",d(l(j.easeCubicIn(v)))).attr("y2",d(0)),i.select(".line-w.before").attr("x1",f(u(j.easeCubicOut(m)))).attr("x2",f(r.p)).attr("y1",d(r.w)).attr("y2",d(r.w)),i.select(".line-w.after").attr("x1",f(c(j.easeCubicOut(m)))).attr("x2",f(r.p)).attr("y1",d(r.w)).attr("y2",d(r.w))}})),x.filter(function(e){return!e.new}).transition().duration(this.drag?0:this.firstUpdate?2*n:n).ease(j.easeCubicOut).tween("non-animating",function(e,t,n){var r=n[t],i=j.select(r),o=j.interpolate((void 0!==r.p?r:e).p,e.p),a=j.interpolate((void 0!==r.g?r:w.getFunction(e.function)).g,w.getFunction(e.function).g);return function(e){r.p=o(e),r.g=a(e),r.w=k.default.pg2w(r.p,r.g),i.select(".line-p.above").attr("x1",f(r.p)).attr("x2",f(r.p)).attr("y1",d(r.w)).attr("y2",d(1)),i.select(".line-p.below").attr("x1",f(r.p)).attr("x2",f(r.p)).attr("y1",d(r.w)).attr("y2",d(0)),i.select(".line-w.before").attr("x1",f(0)).attr("x2",f(r.p)).attr("y1",d(r.w)).attr("y2",d(r.w)),i.select(".line-w.after").attr("x1",f(1)).attr("x2",f(r.p)).attr("y1",d(r.w)).attr("y2",d(r.w))}}),b.exit().remove(),b=(x=_.selectAll(".curve").data(this.functions,function(e){return e.name})).enter().append("path").classed("curve",!0).attr("clip-path","url(#clip-cpt-value)").merge(x),(this.firstUpdate||e.has("interactive"))&&(this.interactive?b.attr("tabindex",0).classed("interactive",!0).call(r).on("keydown",function(e,t){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key)){var n=t.g;switch(e.key){case"ArrowUp":case"ArrowLeft":n+=e.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowRight":n-=e.shiftKey?.01:.05}(n=n<0?0:1<n?1:n)!==t.g&&(t.g=n,"default"===t.name&&(w.g=t.g),w.alignState(),w.requestUpdate(),w.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:w.get(t.name),bubbles:!0}))),e.preventDefault()}}):b.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),b.transition().duration(this.drag?0:this.firstUpdate?2*n:n).ease(j.easeCubicOut).attrTween("d",function(e,t,n){var r=n[t],i=j.interpolate((void 0!==r.g?r:e).g,e.g);return function(e){r.g=i(e);e=j.range(f.range()[0],f.range()[1]+1,1).map(function(e){return{p:f.invert(e),w:k.default.pg2w(f.invert(e),r.g)}});return o(e)}}),x.exit().remove(),(_=(x=_.selectAll(".point").data(this.probabilities.filter(function(e){return e.p}),function(e){return e.name})).enter().append("g").classed("point",!0)).append("circle").classed("circle",!0).attr("r",6),_.append("text").classed("label",!0),(_=_.merge(x)).select("text").text(function(e){return e.label}),_.filter(function(e){return w.interactive&&!e.trial}).attr("tabindex",0).classed("interactive",!0).call(i).on("keydown",function(e,t){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key)){var n=t.p;switch(e.key){case"ArrowUp":case"ArrowRight":n+=e.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowLeft":n-=e.shiftKey?.01:.05}(n=n<0?0:1<n?1:n)!==t.p&&(t.p=n,"default"===t.name&&(w.p=t.p),w.alignState(),w.requestUpdate(),w.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:{name:t.name,p:t.p,w:t.w,label:t.label,g:w.getFunction(t.function).g},bubbles:!0}))),e.preventDefault()}}),_.filter(function(e){return!w.interactive||e.trial}).attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null),_.transition().duration(this.drag?0:this.firstUpdate?2*n:n).ease(j.easeCubicOut).attrTween("transform",function(e,t,n){var r=n[t],i=j.interpolate((void 0!==r.p?r:e).p,e.p),o=j.interpolate((void 0!==r.g?r:w.getFunction(e.function)).g,w.getFunction(e.function).g);return function(e){return r.p=i(e),r.g=o(e),"translate(\n            ".concat(f(r.p),",\n            ").concat(d(k.default.pg2w(r.p,r.g)),"\n          )")}}),x.exit().remove(),this.drag=!1,this.firstUpdate=!1)}}])&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),M}();n.default=e,customElements.define("cpt-probability",e)},{"../cpt-element":1008,"@decidable/prospectable-math":1021,d3:570,lit:616}],997:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o,s=e("lit"),u=g(e("d3")),c=g(e("plotly.js/lib/core")),r=g(e("plotly.js/lib/isosurface")),l=g(e("plotly.js/lib/scatter3d")),f=p(e("@decidable/prospectable-math")),d=p(e("../cpt-element")),h=p(e("./plotly-style.auto"));function p(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=y(t);if(t&&t.has(e))return t.get(e);var n,r,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=o?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=e[n]);return i.default=e,t&&t.set(e,i),i}function v(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=w(n);return function(e,t){{if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=w(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}c.register([r,l]);l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(l,d.default);var e,t,n,r=_(l);function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=r.call(this)).firstUpdate=!0,e.surface=!0,e.point=!0,e.updateable=!1,e.GAMBLE=0,e.SURE=1,e.NR=.25,e.DEFAULT=.75,e.a=.8,e.l=1.2,e.g=.8,e.xl=0,e.xw=20,e.pw=.5,e.xs=10,e.response=e.DEFAULT,e.range={},e.range.a={start:1e-4,stop:1,step:.05},e.range.l={start:0,stop:10,step:.5},e.range.g={start:0,stop:1,step:.05},e.width=NaN,e.height=NaN,e.rem=NaN,e.parameterSpace=[],e.alignState(),e}return e=l,n=[{key:"properties",get:function(){return{surface:{attribute:"surface",type:Boolean,reflect:!0},point:{attribute:"point",type:Boolean,reflect:!0},updateable:{attribute:"updateable",type:Boolean,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0},width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}},{key:"styles",get:function(){return[b(w(l),"styles",this),h.default,(0,s.css)(o=o||v(["\n        :host {\n          display: inline-block;\n        }\n\n        .plotly {\n          height: 100%;\n\n          cursor: grab;\n        }\n\n        /* Plotly modebar styles */\n        /* Drawn from: https://github.com/plotly/plotly.js/blob/master/src/components/modebar/modebar.js */\n        .plotly:hover .modebar .modebar-group {\n          background-color: rgba(255, 255, 255, 0.5);\n        }\n\n        .modebar-btn .icon path {\n          fill: rgba(68, 68, 68, 0.3);\n        }\n\n        .modebar-btn:hover .icon path {\n          fill: rgba(68, 68, 68, 0.7);\n        }\n\n        .modebar-btn.active .icon path {\n          fill: rgba(68, 68, 68, 0.7);\n        }\n      "]))]}}],(t=[{key:"alignState",value:function(){var r=this;this.updateable&&(this.response=f.default.xal2v(this.xw,this.a,this.l)*f.default.pg2w(this.pw,this.g)+f.default.xal2v(this.xl,this.a,this.l)*(1-f.default.pg2w(this.pw,this.g))>f.default.xal2v(this.xs,this.a,this.l)?this.GAMBLE:this.SURE),this.parameterSpace={a:[],l:[],g:[],uDiff:[]},u.range(this.range.a.start,this.range.a.stop+.01,this.range.a.step).forEach(function(n){u.range(r.range.l.start,r.range.l.stop+.01,r.range.l.step).forEach(function(t){u.range(r.range.g.start,r.range.g.stop+.01,r.range.g.step).forEach(function(e){r.parameterSpace.a.push(n),r.parameterSpace.l.push(t),r.parameterSpace.g.push(e);e=f.default.xal2v(r.xw,n,t)*f.default.pg2w(r.pw,e)+f.default.xal2v(r.xl,n,t)*(1-f.default.pg2w(r.pw,e))-f.default.xal2v(r.xs,n,t);r.parameterSpace.uDiff.push(e)})})})}},{key:"render",value:function(){return(0,s.html)(i=i||v(['\n      <div class="plotly"></div>\n    ']))}},{key:"getDimensions",value:function(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}},{key:"connectedCallback",value:function(){b(w(l.prototype),"connectedCallback",this).call(this),window.addEventListener("resize",this.getDimensions.bind(this))}},{key:"disconnectedCallback",value:function(){window.removeEventListener("resize",this.getDimensions.bind(this)),b(w(l.prototype),"disconnectedCallback",this).call(this)}},{key:"firstUpdated",value:function(e){b(w(l.prototype),"firstUpdated",this).call(this,e),window.setTimeout(this.getDimensions.bind(this),0)}},{key:"update",value:function(e){var t,n,r,i,o,a,s;b(w(l.prototype),"update",this).call(this,e),this.alignState(),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem)||(t=this.getComputedStyleValue("---color-text"),s=this.getComputedStyleValue("---color-element-border"),n=this.getComputedStyleValue("---color-element-background"),r=this.getComputedStyleValue("---color-element-emphasis"),i=this.getComputedStyleValue("---color-worse"),o=this.getComputedStyleValue("---color-better"),a=this.getComputedStyleValue("---color-nr"),e=[],this.surface&&e.push({name:"Decision Boundary",type:"isosurface",x:this.parameterSpace.a,y:this.parameterSpace.l,z:this.parameterSpace.g,value:this.parameterSpace.uDiff,coloraxis:"coloraxis",isomin:0,isomax:0,opacity:.5},{name:"Difference in Subjective Utility",type:"isosurface",x:this.parameterSpace.a,y:this.parameterSpace.l,z:this.parameterSpace.g,value:this.parameterSpace.uDiff,caps:{x:{show:!1},y:{show:!1},z:{show:!1}},coloraxis:"coloraxis",isomin:-30,isomax:30,showscale:!1,slices:{x:{show:!0,locations:[this.range.a.stop]},y:{show:!0,locations:[this.range.l.stop]},z:{show:!0,locations:[this.range.g.start]}},surface:{show:!1}}),this.point&&e.push({name:"Current Decision",type:"scatter3d",x:[this.a],y:[this.l],z:[this.g],mode:"markers",marker:{color:[this.response],coloraxis:"coloraxis2",line:{color:r,width:2},size:6}}),s={coloraxis:{cmin:-30,cmax:30,colorbar:{title:{font:{size:1.125*this.rem},text:"Difference in Utility (Gamble - Sure)",side:"right"},thickness:16,ypad:32},colorscale:[[0,"rgb(35, 35, 104)"],[.35,"rgb(69,69,208)"],[.5,"rgb(190,190,190)"],[.65,"rgb(240,50,230)"],[1,"rgb(120,25,115)"]]},coloraxis2:{cmin:0,cmax:1,colorscale:[[0,i],[.01,i],[.24,a],[.26,a],[.74,r],[.76,r],[.99,o],[1,o]],showscale:!1},font:{family:'"Source Sans Pro", sans-serif',color:t},margin:{t:0,l:0,b:0},scene:{hovermode:!1,camera:{center:{x:0,y:.1,z:-.2},eye:{x:-2,y:-.8,z:.8}},xaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:s,showline:!0,linecolor:s,zeroline:!1,range:[Math.round(this.range.a.start),this.range.a.stop],title:{text:"alpha",font:{size:1.125*this.rem}}},yaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:s,showline:!0,linecolor:s,zeroline:!1,range:[this.range.l.start,this.range.l.stop],title:{text:"lambda",font:{size:1.125*this.rem}}},zaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:s,showline:!0,linecolor:s,zeroline:!1,range:[this.range.g.start,this.range.g.stop],title:{text:"gamma",font:{size:1.125*this.rem}}}},uirevision:!0},c.react(this.shadowRoot.querySelector(".plotly"),e,s,{displaylogo:!1,modeBarButtonsToRemove:["orbitRotation","resetCameraDefault3d","hoverClosest3d","toImage"],responsive:!0}),this.firstUpdate=!1)}}])&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();n.default=l,customElements.define("cpt-space",l)},{"../cpt-element":1008,"./plotly-style.auto":1007,"@decidable/prospectable-math":1021,d3:570,lit:616,"plotly.js/lib/core":621,"plotly.js/lib/isosurface":623,"plotly.js/lib/scatter3d":624}],998:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o,s=e("lit"),k=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("d3")),O=r(e("@decidable/prospectable-math")),l=r(e("../cpt-element"));function r(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function c(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function f(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function d(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?f(Object(i),!0).forEach(function(e){var t,n;t=r,e=i[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=T(n);return function(e,t){{if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=T(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(j,l.default);var e,t,n,r=y(j);function j(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,j),(e=r.call(this)).firstUpdate=!0,e.drag=!1,e.a=.5,e.l=2,e.x=null,e.label="",e.function="default",e.functions=[{name:"default",a:e.a,l:e.l}],e.values=[{name:"default",x:e.x,label:e.label,function:e.function}],e.xl=null,e.xw=null,e.pw=null,e.xs=null,e.trialCount=null,e.response=null,e.width=NaN,e.height=NaN,e.rem=NaN,e.alignState(),e}return e=j,n=[{key:"properties",get:function(){return{x:{attribute:"value",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},v:{attribute:!1,type:Number,reflect:!1},width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}},{key:"styles",get:function(){return[A(T(j),"styles",this),(0,s.css)(o=o||c(['\n        :host {\n          display: inline-block;\n        }\n\n        .main {\n          width: 100%;\n          height: 100%;\n        }\n\n        text {\n          /* stylelint-disable property-no-vendor-prefix */\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          -ms-user-select: none;\n          user-select: none;\n        }\n\n        .curve-p.interactive,\n        .curve-n.interactive {\n          cursor: nwse-resize;\n\n          filter: url("#shadow-2");\n          outline: none;\n        }\n\n        .curve-p.interactive:hover,\n        .curve-n.interactive:hover {\n          filter: url("#shadow-4");\n        }\n\n        .curve-p.interactive:active,\n        .curve-n.interactive:active {\n          filter: url("#shadow-8");\n        }\n\n        :host(.keyboard) .curve-p.interactive:focus,\n        :host(.keyboard) .curve-n.interactive:focus {\n          filter: url("#shadow-8");\n        }\n\n        .point.interactive {\n          cursor: nesw-resize;\n\n          filter: url("#shadow-2");\n          outline: none;\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          /* https://github.com/emilbjorklund/svg-weirdness/issues/27 */\n          stroke: #000000;\n          stroke-opacity: 0;\n          stroke-width: 0;\n        }\n\n        /* Make a larger target for touch users */\n        @media (pointer: coarse) {\n          .point.interactive .circle {\n            stroke: #000000;\n            stroke-opacity: 0;\n            stroke-width: 12px;\n          }\n        }\n\n        .point.interactive:hover {\n          filter: url("#shadow-4");\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          stroke: #ff0000;\n        }\n\n        .point.interactive:active {\n          filter: url("#shadow-8");\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          stroke: #00ff00;\n        }\n\n        :host(.keyboard) .point.interactive:focus {\n          filter: url("#shadow-8");\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          stroke: #0000ff;\n        }\n\n        .background {\n          fill: var(---color-element-background);\n          stroke: var(---color-element-border);\n          stroke-width: 1;\n          shape-rendering: crispEdges;\n        }\n\n        .title-x,\n        .title-y {\n          font-weight: 600;\n\n          fill: currentColor;\n        }\n\n        .tick {\n          font-size: 0.75rem;\n        }\n\n        .scale-x path,\n        .scale-x line,\n        .scale-y path,\n        .scale-y line {\n          stroke: var(---color-element-border);\n        }\n\n        .axis-x,\n        .axis-y {\n          stroke: var(---color-element-border);\n          shape-rendering: crispEdges;\n        }\n\n        .diagonal {\n          stroke: var(---color-element-border);\n          stroke-dasharray: 4;\n          stroke-width: 1;\n        }\n\n        .curve-p,\n        .curve-n {\n          fill: none;\n          stroke: var(---color-element-emphasis);\n          stroke-width: 2;\n        }\n\n        .line-x,\n        .line-v {\n          fill: none;\n          stroke-width: 2;\n        }\n\n        .line-x {\n          stroke: var(---color-x);\n        }\n\n        .line-v {\n          stroke: var(---color-v);\n        }\n\n        .point .circle {\n          fill: var(---color-element-emphasis);\n\n          /* r: 6; HACK: Firefox does not support CSS SVG Geometry Properties */\n        }\n\n        .point .label {\n          font-size: 0.75rem;\n\n          dominant-baseline: middle;\n          text-anchor: middle;\n\n          fill: var(---color-text-inverse);\n        }\n      ']))]}}],(t=[{key:"alignState",value:function(){var n=this;this.functions[0].a=this.a,this.functions[0].l=this.l,this.values[0].x=this.x,this.values[0].label=this.label,this.values[0].function=this.function,this.values.forEach(function(t){var e=n.functions.find(function(e){return e.name===t.function});t.v=O.default.xal2v(t.x,e.a,e.l)}),this.v=this.values[0].v}},{key:"trial",value:function(e,t,n,r,i,o){this.trialCount&&this.removeValue("".concat(this.trialCount,"-w")),this.trialCount&&this.removeValue("".concat(this.trialCount,"-s")),this.xl=e,this.xw=t,this.pw=n,this.xs=r,this.trialCount=i,this.response=o,this.setValue(this.xw,"".concat(this.trialCount,"-w"),"g","default",!0),this.setValue(this.xs,"".concat(this.trialCount,"-s"),"s","default",!0)}},{key:"pauseTrial",value:function(){var e=k.select(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]");e.interrupt("new-1"),e.interrupt("new-2"),e.datum(function(e){return e.paused=!0,e})}},{key:"resumeTrial",value:function(){k.select(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]").datum(function(e){return e.paused=!1,e}),this.requestUpdate()}},{key:"clearFunctions",value:function(){this.functions.splice(1),this.requestUpdate()}},{key:"clearValues",value:function(){this.values.splice(1),this.requestUpdate()}},{key:"clear",value:function(){this.clearFunctions(),this.clearValues()}},{key:"removeFunction",value:function(t){this.functions=this.functions.filter(function(e){return e.name!==t}),this.requestUpdate()}},{key:"removeValue",value:function(t){this.values=this.values.filter(function(e){return e.name!==t}),this.requestUpdate()}},{key:"remove",value:function(e){this.removeFunction(e),this.removeValue(e)}},{key:"getFunction",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";return this.functions.find(function(e){return e.name===t})}},{key:"getValue",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";return this.values.find(function(e){return e.name===t})}},{key:"get",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";return d(d({},this.getFunction(e)),this.getValue(e))}},{key:"setFunction",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"default";"default"===n&&(this.a=e,this.l=t);var r=this.functions.find(function(e){return e.name===n});void 0===r?this.functions.push({name:n,a:e,l:t}):(r.a=e,r.l=t),this.requestUpdate()}},{key:"setValue",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:t,i=4<arguments.length&&void 0!==arguments[4]&&arguments[4];"default"===t&&(this.x=e,this.label=n);var o=this.values.find(function(e){return e.name===t});void 0===o?this.values.push({name:t,x:e,label:n,function:r,trial:i,new:i}):(o.x=e,o.label=n,o.function=r),this.requestUpdate()}},{key:"set",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"default",i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"",o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:r;this.setFunction(t,n,r),this.setValue(e,r,i,o)}},{key:"render",value:function(){return(0,s.html)(i=i||c(["\n      ","\n    "]),l.default.svgFilters)}},{key:"getDimensions",value:function(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}},{key:"connectedCallback",value:function(){A(T(j.prototype),"connectedCallback",this).call(this),window.addEventListener("resize",this.getDimensions.bind(this))}},{key:"disconnectedCallback",value:function(){window.removeEventListener("resize",this.getDimensions.bind(this)),A(T(j.prototype),"disconnectedCallback",this).call(this)}},{key:"firstUpdated",value:function(e){A(T(j.prototype),"firstUpdated",this).call(this,e),window.setTimeout(this.getDimensions.bind(this),0)}},{key:"update",value:function(e){var t,n,d,h,r,i,o,a,s,l,u,c,f,p,y,g,v,m,b,x,_,w,M=this;A(T(j.prototype),"update",this).call(this,e),this.alignState(),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem)||(w=this.width,_=this.height,t=(x=Math.min(w,_))-((s={top:2*this.rem,bottom:3*this.rem,left:3*this.rem,right:2*this.rem}).top+s.bottom),l=x-(s.left+s.right),n=parseInt(this.getComputedStyleValue("---transition-duration"),10),d=k.scaleLinear().domain([-20,20]).range([0,l]),this.xScale=d,h=k.scaleLinear().domain([20,-20]).range([0,t]),this.yScale=h,r=k.drag().subject(function(e,t){return{x:e.x,y:M.yScale(O.default.xal2v(M.xScale.invert(e.x),t.a,t.l))}}).on("start",function(e){e=e.currentTarget;k.select(e).classed("dragging",!0)}).on("drag",function(e,t){M.drag=!0;var n=M.xScale.invert(e.x),r=M.yScale.invert(e.y),e=O.default.xlv2a(n,t.l,r);t.a=Number.isNaN(e)||e<0||1<e||n<0||r<0?r<n?0:1:e,"default"===t.name&&(M.a=t.a),M.alignState(),M.requestUpdate(),M.dispatchEvent(new CustomEvent("cpt-value-change",{detail:M.get(t.name),bubbles:!0}))}).on("end",function(e){e=e.currentTarget;k.select(e).classed("dragging",!1)}),i=k.drag().subject(function(e,t){return{x:e.x,y:M.yScale(O.default.xal2v(M.xScale.invert(e.x),t.a,t.l))}}).on("start",function(e){e=e.currentTarget;k.select(e).classed("dragging",!0)}).on("drag",function(e,t){M.drag=!0;var n=M.xScale.invert(e.x),r=M.yScale.invert(e.y),e=O.default.xav2l(n,t.a,r);t.l=Number.isNaN(e)||e<0||100<e||0<n||0<r?r<n?100:0:e,"default"===t.name&&(M.l=t.l),M.alignState(),M.requestUpdate(),M.dispatchEvent(new CustomEvent("cpt-value-change",{detail:M.get(t.name),bubbles:!0}))}).on("end",function(e){e=e.currentTarget;k.select(e).classed("dragging",!1)}),o=k.drag().subject(function(e,t){return{x:M.xScale(t.x),y:M.yScale(t.v)}}).on("start",function(e){e=e.currentTarget;k.select(e).classed("dragging",!0)}).on("drag",function(e,t){M.drag=!0;e=M.xScale.invert(e.x);t.x=e<-20?-20:20<e?20:e,"default"===t.name&&(M.x=t.x),M.alignState(),M.requestUpdate(),M.dispatchEvent(new CustomEvent("cpt-value-change",{detail:{name:t.name,x:t.x,v:t.v,label:t.label,a:M.getFunction(t.function).a,l:M.getFunction(t.function).l},bubbles:!0}))}).on("end",function(e){e=e.currentTarget;k.select(e).classed("dragging",!1)}),a=k.line().x(function(e){return d(e.x)}).y(function(e){return h(e.v)}),_=(w=(v=k.select(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}])).enter().append("svg").classed("main",!0)).merge(v).attr("viewBox","0 0 ".concat(x," ").concat(x)),v=w.append("g").classed("plot",!0),x=_.select(".plot").attr("transform","translate(".concat(s.left,", ").concat(s.top,")")),v.append("clipPath").attr("id","clip-cpt-value").append("rect"),x.select("clipPath rect").attr("height",1+t).attr("width",1+l),w=v.append("g").classed("underlayer",!0),_=x.select(".underlayer"),w.append("rect").classed("background",!0),_.select(".background").attr("height",t).attr("width",l),w.append("g").classed("scale-x",!0),_.select(".scale-x").attr("transform","translate(0, ".concat(h(-20),")")).transition().duration(2*n).ease(k.easeCubicOut).call(k.axisBottom(d)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),w.append("line").classed("axis-x",!0),_.select(".axis-x").transition().duration(n).ease(k.easeCubicOut).attr("x1",d(-20)).attr("x2",d(20)).attr("y1",h(0)).attr("y2",h(0)),(s=w.append("text").classed("title-x",!0).attr("text-anchor","middle")).append("tspan").classed("name",!0).text("Objective Value ("),s.append("tspan").classed("math-var x",!0).text("x"),s.append("tspan").classed("name",!0).text(")"),_.select(".title-x").attr("transform","translate(".concat(l/2,", ").concat(t+2.25*this.rem,")")),w.append("g").classed("scale-y",!0),_.select(".scale-y").transition().duration(2*n).ease(k.easeCubicOut).call(k.axisLeft(h)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),w.append("line").classed("axis-y",!0),_.select(".axis-y").transition().duration(n).ease(k.easeCubicOut).attr("x1",d(0)).attr("x2",d(0)).attr("y1",h(20)).attr("y2",h(-20)),(l=w.append("text").classed("title-y",!0).attr("text-anchor","middle")).append("tspan").classed("name",!0).text("Subjective Value ("),l.append("tspan").classed("math-var v",!0).text("v"),l.append("tspan").classed("name",!0).text(")"),_.select(".title-y").attr("transform","translate(".concat(-2*this.rem,", ").concat(t/2,")rotate(-90)")),w.append("line").classed("diagonal",!0),_.select(".diagonal").transition().duration(2*n).ease(k.easeCubicOut).attr("x1",d(-20)).attr("y1",h(-20)).attr("x2",d(20)).attr("y2",h(20)),v.append("g").classed("content",!0),(v=(_=(w=x.select(".content")).selectAll(".lines").data(this.values.filter(function(e){return e.x}),function(e){return e.name})).enter().append("g").classed("lines",!0)).each(function(e,t,n){t=n[t],t=k.select(t);t.append("line").classed("line-x above",!0),t.append("line").classed("line-x below",!0),t.append("line").classed("line-v before",!0),t.append("line").classed("line-v after",!0)}),v.filter(function(e){return e.new}).attr("data-animating-ease-time-1",0).attr("data-animating-ease-time-2",0).each(function(e,t,n){t=n[t],t=k.select(t);t.select(".line-x.above").attr("x1",d(e.x)).attr("x2",d(e.x)).attr("y1",h(20)).attr("y2",h(20)),t.select(".line-x.below").attr("x1",d(e.x)).attr("x2",d(e.x)).attr("y1",h(-20)).attr("y2",h(-20)),t.select(".line-v.before").attr("x1",d(e.x)).attr("x2",d(e.x)).attr("y1",h(e.v)).attr("y2",h(e.v)),t.select(".line-v.after").attr("x1",d(e.x)).attr("x2",d(e.x)).attr("y1",h(e.v)).attr("y2",h(e.v))}),(v=(x=v.merge(_)).filter(function(e){return e.new&&!e.paused})).empty()||(u=v.attr("data-animating-ease-time-1"),c=v.attr("data-animating-ease-time-2"),f=function(e){return k.scaleLinear().range([0,1]).domain([u,1])(e)},p=function(e){return k.scaleLinear().range([0,1]).domain([c,1])(e)},y=function(t){return function(e){return k.scaleLinear().domain([t(u),1]).range([0,1])(t(e))}},g=function(t){return function(e){return k.scaleLinear().domain([t(c),1]).range([0,1])(t(e))}},v.transition("new-1").duration(function(){return Math.floor(n*(1-u))}).ease(function(e){return k.scaleLinear().domain([0,1]).range([u,1])(e)}).attr("data-animating-ease-time-1",1).tween("animating",function(e,t,n){var r=n[t],i=k.select(r),o=k.interpolate((void 0!==r.x?r:e).x,e.x),a=k.interpolate((void 0!==r.a?r:M.getFunction(e.function)).a,M.getFunction(e.function).a),s=k.interpolate((void 0!==r.l?r:M.getFunction(e.function)).l,M.getFunction(e.function).l),l=k.interpolate(h.invert(i.select(".line-x.above").attr("y1")),e.v),u=k.interpolate(h.invert(i.select(".line-x.below").attr("y1")),e.v);return function(e){r.x=o(k.easeCubicOut(f(e))),r.a=a(k.easeCubicOut(f(e))),r.l=s(k.easeCubicOut(f(e))),r.v=O.default.xal2v(r.x,r.a,r.l),i.select(".line-x.above").attr("x1",d(r.x)).attr("x2",d(r.x)).attr("y1",h(l(y(k.easeCubicIn)(e)))).attr("y2",h(20)),i.select(".line-x.below").attr("x1",d(r.x)).attr("x2",d(r.x)).attr("y1",h(u(y(k.easeCubicIn)(e)))).attr("y2",h(-20))}}).transition("new-2").duration(function(){return Math.floor(n*(1-c))}).ease(function(e){return k.scaleLinear().domain([0,1]).range([c,1])(e)}).attr("data-animating-ease-time-2",1).tween("animating",function(e,t,n){var r=n[t],i=k.select(r),o=k.interpolate((void 0!==r.x?r:e).x,e.x),a=k.interpolate((void 0!==r.a?r:M.getFunction(e.function)).a,M.getFunction(e.function).a),s=k.interpolate((void 0!==r.l?r:M.getFunction(e.function)).l,M.getFunction(e.function).l),l=k.interpolate(d.invert(i.select(".line-v.before").attr("x1")),-20),u=k.interpolate(d.invert(i.select(".line-v.after").attr("x1")),20);return function(e){r.x=o(k.easeCubicOut(p(e))),r.a=a(k.easeCubicOut(p(e))),r.l=s(k.easeCubicOut(p(e))),r.v=O.default.xal2v(r.x,r.a,r.l),i.select(".line-v.before").attr("x1",d(l(g(k.easeCubicOut)(e)))).attr("x2",d(r.x)).attr("y1",h(r.v)).attr("y2",h(r.v)),i.select(".line-v.after").attr("x1",d(u(g(k.easeCubicOut)(e)))).attr("x2",d(r.x)).attr("y1",h(r.v)).attr("y2",h(r.v))}}).on("end",function(e,t,n){t=n[t];t.removeAttribute("data-animating-ease-time-1"),t.removeAttribute("data-animating-ease-time-2"),e.new=!1,M.dispatchEvent(new CustomEvent("decision-response",{detail:{trial:M.trialCount,xl:M.xl,xw:M.xw,pw:M.pw,xs:M.xs,response:M.response},bubbles:!0}))})),(v=x.filter(function(e){return e.new&&e.paused})).empty()||(m=v.attr("data-animating-ease-time-1"),b=v.attr("data-animating-ease-time-2"),v.transition().duration(this.drag?0:this.firstUpdate?2*n:n).ease(k.easeCubicOut).tween("paused",function(e,t,n){var r=n[t],i=k.select(r),o=k.interpolate((void 0!==r.x?r:e).x,e.x),a=k.interpolate((void 0!==r.a?r:M.getFunction(e.function)).a,M.getFunction(e.function).a),s=k.interpolate((void 0!==r.l?r:M.getFunction(e.function)).l,M.getFunction(e.function).l),l=k.interpolate(20,e.v),u=k.interpolate(-20,e.v),c=k.interpolate(e.x,-20),f=k.interpolate(e.x,20);return function(e){r.x=o(e),r.a=a(e),r.l=s(e),r.v=O.default.xal2v(r.x,r.a,r.l),i.select(".line-x.above").attr("x1",d(r.x)).attr("x2",d(r.x)).attr("y1",h(l(k.easeCubicIn(m)))).attr("y2",h(20)),i.select(".line-x.below").attr("x1",d(r.x)).attr("x2",d(r.x)).attr("y1",h(u(k.easeCubicIn(m)))).attr("y2",h(-20)),i.select(".line-v.before").attr("x1",d(c(k.easeCubicOut(b)))).attr("x2",d(r.x)).attr("y1",h(r.v)).attr("y2",h(r.v)),i.select(".line-v.after").attr("x1",d(f(k.easeCubicOut(b)))).attr("x2",d(r.x)).attr("y1",h(r.v)).attr("y2",h(r.v))}})),x.filter(function(e){return!e.new}).transition().duration(this.drag?0:this.firstUpdate?2*n:n).ease(k.easeCubicOut).tween("non-animating",function(e,t,n){var r=n[t],i=k.select(r),o=k.interpolate((void 0!==r.x?r:e).x,e.x),a=k.interpolate((void 0!==r.a?r:M.getFunction(e.function)).a,M.getFunction(e.function).a),s=k.interpolate((void 0!==r.l?r:M.getFunction(e.function)).l,M.getFunction(e.function).l);return function(e){r.x=o(e),r.a=a(e),r.l=s(e),r.v=O.default.xal2v(r.x,r.a,r.l),i.select(".line-x.above").attr("x1",d(r.x)).attr("x2",d(r.x)).attr("y1",h(r.v)).attr("y2",h(20)),i.select(".line-x.below").attr("x1",d(r.x)).attr("x2",d(r.x)).attr("y1",h(r.v)).attr("y2",h(-20)),i.select(".line-v.before").attr("x1",d(-20)).attr("x2",d(r.x)).attr("y1",h(r.v)).attr("y2",h(r.v)),i.select(".line-v.after").attr("x1",d(20)).attr("x2",d(r.x)).attr("y1",h(r.v)).attr("y2",h(r.v))}}),_.exit().remove(),_=(x=w.selectAll(".curve-p").data(this.functions,function(e){return e.name})).enter().append("path").classed("curve-p",!0).attr("clip-path","url(#clip-cpt-value)").merge(x),(this.firstUpdate||e.has("interactive"))&&(this.interactive?_.attr("tabindex",0).classed("interactive",!0).call(r).on("keydown",function(e,t){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key)){var n=t.a;switch(e.key){case"ArrowUp":case"ArrowLeft":n+=e.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowRight":n-=e.shiftKey?.01:.05}(n=n<0?0:1<n?1:n)!==t.a&&(t.a=n,"default"===t.name&&(M.a=t.a),M.alignState(),M.requestUpdate(),M.dispatchEvent(new CustomEvent("cpt-value-change",{detail:M.get(t.name),bubbles:!0}))),e.preventDefault()}}):_.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),_.transition().duration(this.drag?0:this.firstUpdate?2*n:n).ease(k.easeCubicOut).attrTween("d",function(e,t,n){var r=n[t],i=k.interpolate((void 0!==r.a?r:e).a,e.a),o=k.interpolate((void 0!==r.l?r:e).l,e.l);return function(e){r.a=i(e),r.l=o(e);e=k.range(d(0),d.range()[1]+1,1).map(function(e){return{x:d.invert(e),v:O.default.xal2v(d.invert(e),r.a,r.l)}});return a(e)}}),x.exit().remove(),x=(_=w.selectAll(".curve-n").data(this.functions,function(e){return e.name})).enter().append("path").classed("curve-n",!0).attr("clip-path","url(#clip-cpt-value)").merge(_),(this.firstUpdate||e.has("interactive"))&&(this.interactive?x.attr("tabindex",0).classed("interactive",!0).call(i).on("keydown",function(e,t){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key)){var n=t.l;switch(e.key){case"ArrowUp":case"ArrowLeft":n-=e.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowRight":n+=e.shiftKey?.01:.05}(n=n<0?0:100<n?100:n)!==t.l&&(t.l=n,"default"===t.name&&(M.l=t.l),M.alignState(),M.requestUpdate(),M.dispatchEvent(new CustomEvent("cpt-value-change",{detail:M.get(t.name),bubbles:!0}))),e.preventDefault()}}):x.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),x.transition().duration(this.drag?0:this.firstUpdate?2*n:n).ease(k.easeCubicOut).attrTween("d",function(e,t,n){var r=n[t],i=k.interpolate((void 0!==r.a?r:e).a,e.a),o=k.interpolate((void 0!==r.l?r:e).l,e.l);return function(e){r.a=i(e),r.l=o(e);e=k.range(d.range()[0],d(0)+1,1).map(function(e){return{x:d.invert(e),v:O.default.xal2v(d.invert(e),r.a,r.l)}});return a(e)}}),_.exit().remove(),(w=(_=w.selectAll(".point").data(this.values.filter(function(e){return e.v}),function(e){return e.name})).enter().append("g").classed("point",!0)).append("circle").classed("circle",!0).attr("r",6),w.append("text").classed("label",!0),(w=w.merge(_)).select("text").text(function(e){return e.label}),w.filter(function(e){return M.interactive&&!e.trial}).attr("tabindex",0).classed("interactive",!0).call(o).on("keydown",function(e,t){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key)){var n=t.x;switch(e.key){case"ArrowUp":case"ArrowRight":n+=e.shiftKey?.2:1;break;case"ArrowDown":case"ArrowLeft":n-=e.shiftKey?.2:1}(n=n<-20?-20:20<n?20:n)!==t.x&&(t.x=n,"default"===t.name&&(M.x=t.x),M.alignState(),M.requestUpdate(),M.dispatchEvent(new CustomEvent("cpt-value-change",{detail:{name:t.name,x:t.x,v:t.v,label:t.label,a:M.getFunction(t.function).a,l:M.getFunction(t.function).l},bubbles:!0}))),e.preventDefault()}}),w.filter(function(e){return!M.interactive||e.trial}).attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null),w.transition().duration(this.drag?0:this.firstUpdate?2*n:n).ease(k.easeCubicOut).attrTween("transform",function(e,t,n){var r=n[t],i=k.interpolate((void 0!==r.x?r:e).x,e.x),o=k.interpolate((void 0!==r.a?r:M.getFunction(e.function)).a,M.getFunction(e.function).a),a=k.interpolate((void 0!==r.l?r:M.getFunction(e.function)).l,M.getFunction(e.function).l);return function(e){return r.x=i(e),r.a=o(e),r.l=a(e),"translate(\n            ".concat(d(r.x),",\n            ").concat(h(O.default.xal2v(r.x,r.a,r.l)),"\n          )")}}),_.exit().remove(),this.drag=!1,this.firstUpdate=!1)}}])&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),j}();n.default=e,customElements.define("cpt-value",e)},{"../cpt-element":1008,"@decidable/prospectable-math":1021,d3:570,lit:616}],999:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,a,s,l,u,c=e("lit"),f=(e=e("../cpt-element"))&&e.__esModule?e:{default:e};function d(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=v(n);return function(e,t){{if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=v(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(i,f.default);var e,t,n,r=g(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).states=["choice","fixation","blank"],e.state="choice",e.xl=0,e.xw=100,e.pw=.75,e.xs=50,e}return e=i,n=[{key:"properties",get:function(){return{state:{attribute:"state",type:String,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}},{key:"styles",get:function(){return[p(v(i),"styles",this),(0,c.css)(u=u||d(["\n        :host {\n          display: inline-block;\n        }\n\n        .holder {\n          user-select: none;\n        }\n\n        .holder > * {\n          vertical-align: middle;\n        }\n\n        .query {\n          margin: 0 0.5rem;\n\n          font-family: var(--font-family-code);\n          font-size: 1.75rem;\n        }\n\n        decision-option {\n          width: 10rem;\n          height: 10rem;\n        }\n      "]))]}}],(t=[{key:"sendEvent",value:function(){this.dispatchEvent(new CustomEvent("decision-choice-change",{detail:{xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs},bubbles:!0}))}},{key:"winChange",value:function(e){this.xw=parseFloat(e.detail.x),this.pw=parseFloat(e.detail.p),this.sendEvent()}},{key:"sureChange",value:function(e){this.xs=parseFloat(e.detail.x),this.sendEvent()}},{key:"render",value:function(){return(0,c.html)(o=o||d(['\n      <div class="holder">\n        <decision-option ?interactive='," @decision-outcome-change=",">\n          ",'\n        </decision-option><span class="query"\n         >',"</span\n        ><decision-option ?interactive="," @decision-outcome-change=",">\n          ","\n        </decision-option>\n      </div>"]),this.interactive,this.winChange.bind(this),"choice"===this.state?(0,c.html)(a=a||d(['\n              <decision-outcome probability="','" value="','" name="loss"></decision-outcome>\n              <decision-outcome ?interactive=',' probability="','" value="','" name="win"></decision-outcome>']),1-this.pw,this.xl,this.interactive,this.pw,this.xw):"","choice"===this.state?"?":"fixation"===this.state?"+":(0,c.html)(s=s||d(["∙"])),this.interactive,this.sureChange.bind(this),"choice"===this.state?(0,c.html)(l=l||d(["\n              <decision-outcome ?interactive=",' probability="1" value="','" name="sure"></decision-outcome>']),this.interactive,this.xs):"")}}])&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=e,customElements.define("decision-choice",e)},{"../cpt-element":1008,lit:616}],1e3:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e("lit");e("@decidable/decidable-elements");var a,s,l,u,c,f,d,h,p,y,g,v,m=(e=e("../cpt-element"))&&e.__esModule?e:{default:e};function b(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=j(n);return function(e,t){{if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=j(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(i,m.default);var e,t,n,r=M(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).trials=void 0,e.duration=void 0,e.run=!1,e.pause=!1,e.reset=!1,e.states=["resetted","running","paused","ended"],e.state="resetted",e}return e=i,n=[{key:"properties",get:function(){return{trials:{attribute:"trials",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},run:{attribute:"run",type:Boolean,reflect:!0},pause:{attribute:"pause",type:Boolean,reflect:!0},reset:{attribute:"reset",type:Boolean,reflect:!0},state:{atribute:!1,type:String,reflect:!1}}}},{key:"styles",get:function(){return[_(j(i),"styles",this),(0,o.css)(v=v||b(["\n        :host {\n          display: inline-block;\n        }\n\n        .holder {\n          display: flex;\n\n          flex-direction: row;\n\n          align-items: stretch;\n          justify-content: center;\n        }\n\n        .buttons {\n          display: flex;\n\n          flex-direction: column;\n\n          align-items: stretch;\n          justify-content: center;\n        }\n      "]))]}}],(t=[{key:"setTrials",value:function(e){this.trials=e.target.value,this.dispatchEvent(new CustomEvent("decision-control-trials",{detail:{trials:this.trials},bubbles:!0}))}},{key:"setDuration",value:function(e){this.duration=e.target.value,this.dispatchEvent(new CustomEvent("sdt-control-duration",{detail:{duration:this.duration},bubbles:!0}))}},{key:"doRun",value:function(){this.state="running",this.dispatchEvent(new CustomEvent("decision-control-run",{detail:{},bubbles:!0}))}},{key:"doPause",value:function(){this.state="paused",this.dispatchEvent(new CustomEvent("decision-control-pause",{detail:{},bubbles:!0}))}},{key:"doReset",value:function(){this.state="resetted",this.dispatchEvent(new CustomEvent("decision-control-reset",{detail:{},bubbles:!0}))}},{key:"complete",value:function(){this.state="ended"}},{key:"render",value:function(){return(0,o.html)(a=a||b(['\n      <div class="holder">\n        ',"\n        ",'\n        <div class="buttons">\n          ',"\n          ","\n          ","\n        </div>\n      </div>"]),this.trials?(0,o.html)(s=s||b(['<decidable-slider min="1" max="100" step="1" .value='," @change="," @input=",">Trials</decidable-slider>"]),this.trials,this.setTrials.bind(this),this.setTrials.bind(this)):(0,o.html)(l=l||b([""])),this.duration?(0,o.html)(u=u||b(['<decidable-slider min="10" max="4000" step="10" .value='," @change="," @input=",">Duration</decidable-slider>"]),this.duration,this.setDuration.bind(this),this.setDuration.bind(this)):(0,o.html)(c=c||b([""])),this.run?(0,o.html)(f=f||b(['<decidable-button name="run" ?disabled='," @click=",">Run</decidable-button>"]),"running"===this.state||"ended"===this.state,this.doRun.bind(this)):(0,o.html)(d=d||b([""])),this.pause?(0,o.html)(h=h||b(['<decidable-button name="pause" ?disabled='," @click=",">Pause</decidable-button>"]),"running"!==this.state,this.doPause.bind(this)):(0,o.html)(p=p||b([""])),this.reset?(0,o.html)(y=y||b(['<decidable-button name="reset" ?disabled='," @click=",">Reset</decidable-button>"]),"resetted"===this.state,this.doReset.bind(this)):(0,o.html)(g=g||b([""])))}}])&&x(e.prototype,t),n&&x(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=e,customElements.define("decision-control",e)},{"../cpt-element":1008,"@decidable/decidable-elements":987,lit:616}],1001:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o,s=e("lit"),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("d3")),l=(e=e("../cpt-element"))&&e.__esModule?e:{default:e};function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function c(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=v(n);return function(e,t){{if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=v(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(d,l.default);var e,t,n,r=g(d);function d(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(e=r.call(this)).width=NaN,e.height=NaN,e.rem=NaN,e}return e=d,n=[{key:"properties",get:function(){return{width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}},{key:"styles",get:function(){return[p(v(d),"styles",this),(0,s.css)(o=o||c(['\n        :host {\n          display: inline-block;\n        }\n\n        .main {\n          width: 100%;\n          height: 100%;\n          overflow: visible;\n        }\n\n        .outline {\n          fill: var(---color-element-background);\n          stroke: var(---color-element-emphasis);\n          stroke-width: 2;\n        }\n\n        .arc {\n          stroke: var(---color-element-emphasis);\n          stroke-width: 2;\n        }\n\n        .arc.interactive {\n          cursor: move;\n\n          filter: url("#shadow-2");\n          outline: none;\n        }\n\n        .arc.interactive:hover {\n          filter: url("#shadow-4");\n        }\n\n        .arc.interactive:active {\n          filter: url("#shadow-8");\n        }\n\n        :host(.keyboard) .arc.interactive:focus {\n          filter: url("#shadow-8");\n        }\n\n        .arc.win {\n          fill: var(---color-better-light);\n        }\n\n        .arc.loss {\n          fill: var(---color-worse-light);\n        }\n\n        .arc.sure {\n          fill: var(---color-even-light);\n        }\n\n        .label.static {\n          font-size: 1.75rem;\n\n          user-select: none;\n\n          dominant-baseline: middle;\n          text-anchor: middle;\n        }\n\n        .label.interactive {\n          --decidable-spinner-font-size: 1.75rem;\n          --decidable-spinner-input-width: 4rem;\n          --decidable-spinner-prefix: "$";\n\n          width: var(--decidable-spinner-input-width);\n          height: calc(var(--decidable-spinner-font-size) * 1.5);\n          overflow: visible;\n          x: calc(var(--decidable-spinner-input-width) / -2);\n          y: calc(var(--decidable-spinner-font-size) * 1.5 / -2);\n        }\n\n        .label.interactive.win decidable-spinner {\n          background-color: var(---color-better-light);\n        }\n\n        .label.interactive.loss decidable-spinner {\n          background-color: var(---color-worse-light);\n        }\n\n        .label.interactive.sure decidable-spinner {\n          background-color: var(---color-even-light);\n        }\n      ']))]}}],(t=[{key:"render",value:function(){return(0,s.html)(i=i||c(["\n      ","\n      <slot></slot>\n    "]),l.default.svgFilters)}},{key:"getDimensions",value:function(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}},{key:"connectedCallback",value:function(){var t=this;p(v(d.prototype),"connectedCallback",this).call(this),window.addEventListener("resize",this.getDimensions.bind(this)),this.observer=new MutationObserver(function(e){e.some(function(e){return"childList"===e.type||"attributes"===e.type&&e.target!==t})&&t.requestUpdate()}),this.observer.observe(this,{subtree:!0,childList:!0,attributes:!0})}},{key:"disconnectedCallback",value:function(){this.observer.disconnect(),window.removeEventListener("resize",this.getDimensions.bind(this)),p(v(d.prototype),"disconnectedCallback",this).call(this)}},{key:"firstUpdated",value:function(e){p(v(d.prototype),"firstUpdated",this).call(this,e),window.setTimeout(this.getDimensions.bind(this),0)}},{key:"update",value:function(e){var n,r,i,o,t,a,s,l,u,c=this;function f(e){e=(e+2*Math.PI)%(2*Math.PI);return e>Math.PI?e-2*Math.PI:e<-Math.PI?e+2*Math.PI:e}p(v(d.prototype),"update",this).call(this,e),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem)||(s=this.width,a=this.height,u=Math.min(s,a),r=n=u-(0+0),l=(i=this.querySelectorAll("decision-outcome")).length?-i[0].p:0,e=(o=h.pie().startAngle(l*Math.PI-Math.PI).endAngle(l*Math.PI+Math.PI).sortValues(null).value(function(e){return e.p})(i)).filter(function(e){return!e.data.interactive}),t=o.filter(function(e){return e.data.interactive}),s=h.drag().subject(function(e,t){t=f((t.endAngle+t.startAngle)/2),e=f(Math.atan2(e.y,e.x)+Math.PI/2);return i.forEach(function(e){e.startP=e.p}),{arcAngle:t,startAngle:f(e-t)}}).on("start",function(e){e=e.currentTarget;h.select(e).classed("dragging",!0)}).on("drag",function(e,t){var n=f(Math.atan2(e.y,e.x)+Math.PI/2),n=f(n-e.subject.arcAngle),n=f(0<e.subject.startAngle?n-e.subject.startAngle:e.subject.startAngle-n)/Math.PI,n=t.data.startP+n,r=.99<n?.99:n<.01?.01:n;i.forEach(function(e){e.p=e===t.data?r:e.startP/(1-t.data.startP)*(1-r)}),c.dispatchEvent(new CustomEvent("decision-outcome-change",{detail:{x:t.data.x,p:t.data.p,name:t.data.name},bubbles:!0}))}).on("end",function(e){e=e.currentTarget;h.select(e).classed("dragging",!1)}),u=(l=(a=h.select(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}])).enter().append("svg").classed("main",!0)).merge(a).attr("viewBox","0 0 ".concat(u," ").concat(u)),l=l.append("g").classed("pie",!0),u=u.select(".pie").attr("transform","translate(".concat(r/2,", ").concat(n/2,")")),l.append("circle").classed("outline",!0),u.select(".outline").attr("r",Math.min(r,n)/2-1),(l=u.selectAll(".arc").data(o)).enter().append("path").call(s).merge(l).attr("tabindex",function(e){return t.includes(e)&&1<o.length?0:null}).attr("class",function(e){return"arc ".concat(e.data.name)}).classed("interactive",function(e){return t.includes(e)&&1<o.length}).attr("d",h.arc().innerRadius(0).outerRadius(Math.min(r,n)/2-1)),l.exit().remove(),s=u.selectAll(".label.static").data(e),l=u.selectAll(".label.interactive").data(t),e=s.enter().append("text"),(u=l.enter().append("foreignObject")).append("xhtml:decidable-spinner").on("input",function(e,t){t.data.x=parseFloat(e.target.value),c.dispatchEvent(new CustomEvent("decision-outcome-change",{detail:{x:t.data.x,p:t.data.p,name:t.data.name},bubbles:!0}))}),e.merge(s).attr("class",function(e){return"label static ".concat(e.data.name)}).attr("transform",function(e){if(1===o.length)return"translate(0, 0)";var t=Math.min(r,n)/2*.6,t=h.arc().innerRadius(t).outerRadius(t);return"translate(".concat(t.centroid(e),")")}).text(function(e){return"$".concat(e.data.x.toFixed(0))}),u.merge(l).attr("class",function(e){return"label interactive ".concat(e.data.name)}).attr("transform",function(e){if(1===o.length)return"translate(0, 0)";var t=Math.min(r,n)/2*.6,t=h.arc().innerRadius(t).outerRadius(t);return"translate(".concat(t.centroid(e),")")}).select("decidable-spinner").attr("value",function(e){return"".concat(e.data.x.toFixed(0))}),s.exit().remove(),l.exit().remove())}}])&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();n.default=e,customElements.define("decision-option",e)},{"../cpt-element":1008,d3:570,lit:616}],1002:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,a,s=e("lit"),l=(e=e("../cpt-element"))&&e.__esModule?e:{default:e};function u(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=h(n);return function(e,t){{if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=h(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(i,l.default);var e,t,n,r=d(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).x=0,e.p=0,e.name="",e}return e=i,n=[{key:"properties",get:function(){return{x:{attribute:"value",type:Number,reflect:!0},p:{attribute:"probability",type:Number,reflect:!0},name:{attribute:"name",type:String,reflect:!0}}}},{key:"styles",get:function(){return[(0,s.css)(a=a||u(["\n        :host {\n          display: none;\n        }\n      "]))]}}],(t=[{key:"render",value:function(){return(0,s.html)(o=o||u([""]))}}])&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=e,customElements.define("decision-outcome",e)},{"../cpt-element":1008,lit:616}],1003:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e("lit");e("@decidable/decidable-elements");var a,s,l,u,c,f,d,h,p,y,g,v,m,b,x,_,w,M,j=(e=e("../cpt-element"))&&e.__esModule?e:{default:e};function k(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=S(n);return function(e,t){{if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=S(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(i,j.default);var e,t,n,r=P(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).feedbacks=["none","outcome"],e.feedback="none",e.trial=!1,e.payoffs=["none","selection","both"],e.payoff="none",e.states=["off","waiting","feedback"],e.state="off",e.trialCount=0,e.trialTotal=0,e.xl=0,e.xw=0,e.pw=0,e.xs=0,e.gamblePayoff=0,e.surePayoff=0,e.nrPayoff=0,e.betters=["gamble","sure","even"],e.better=void 0,e.responses=["gamble","sure","nr"],e.response=void 0,e.outcomes=["better","worse","even","nr"],e.outcome=void 0,e}return e=i,n=[{key:"properties",get:function(){return{feedback:{attribute:"feedback",type:String,reflect:!0},trial:{attribute:"trial",type:Boolean,reflect:!0},payoff:{attribute:"payoff",type:String,reflect:!0},state:{attribute:!1,type:String,reflect:!1},trialCount:{attribute:!1,type:Number,reflect:!1},trialTotal:{attribute:!1,type:Number,reflect:!1}}}},{key:"styles",get:function(){return[A(S(i),"styles",this),(0,o.css)(M=M||k(['\n        :host {\n          display: inline-block;\n        }\n\n        /* Overall container */\n        .holder {\n          display: flex;\n\n          flex-direction: column;\n        }\n\n        /* Trial messages */\n        .trials {\n          display: flex;\n\n          flex-direction: column;\n\n          justify-content: center;\n        }\n\n        .trial {\n          text-align: center;\n        }\n\n        .trial .label {\n          font-weight: 600;\n        }\n\n        /* Response buttons */\n        .responses {\n          display: flex;\n\n          flex-direction: row;\n\n          align-items: stretch;\n          justify-content: center;\n        }\n\n        .response {\n          width: 5.25rem;\n        }\n\n        .waiting[disabled] {\n          --decidable-button-background-color: var(---color-element-enabled);\n        }\n\n        .selected[disabled][name="gamble"] {\n          --decidable-button-background-color: var(---color-worse);\n        }\n\n        .selected[disabled][name="sure"] {\n          --decidable-button-background-color: var(---color-better);\n        }\n\n        /* Feedback messages */\n        .feedbacks {\n          display: flex;\n\n          flex-direction: row;\n\n          justify-content: center;\n        }\n\n        /* Outcome feedback */\n        .feedback {\n          display: flex;\n\n          flex-direction: column;\n\n          align-items: center;\n          justify-content: center;\n\n          width: 5.25rem;\n          height: 3.5rem;\n          padding: 0.375rem 0.75rem;\n          margin: 0.25rem;\n\n          text-align: center;\n\n          background-color: var(---color-element-background);\n          border: 1px solid var(---color-element-border);\n        }\n\n        .feedback.better {\n          background-color: var(---color-better-light);\n        }\n\n        .feedback.worse {\n          background-color: var(---color-worse-light);\n        }\n\n        .feedback.even {\n          background-color: var(---color-even-light);\n        }\n\n        .feedback.nr {\n          background-color: var(---color-nr-light);\n        }\n\n        .feedback .outcome {\n          font-weight: 600;\n          line-height: 1.15;\n        }\n\n        :host([payoff="selection"]) .feedback,\n        :host([payoff="both"]) .feedback {\n          height: 4rem;\n        }\n\n        /* Payoff feedback */\n        .payoff {\n          text-align: center;\n        }\n\n        .payoff .label {\n          font-weight: 600;\n        }\n      ']))]}}],(t=[{key:"trialPayoff",get:function(){switch(this.response){case"gamble":return this.gamblePayoff;case"sure":return this.surePayoff;case"nr":return this.nrPayoff;default:return}}},{key:"start",value:function(e,t,n,r,i,o,a,s){this.state="waiting",this.xl=e,this.xw=t,this.pw=n,this.xs=r,this.gamblePayoff=i,this.surePayoff=o,this.better=a,this.trialCount=s,this.response=void 0,this.outcome=void 0}},{key:"stop",value:function(){this.state="feedback",void 0===this.response&&(this.outcome="nr")}},{key:"gamble",value:function(){this.responded("gamble")}},{key:"sure",value:function(){this.responded("sure")}},{key:"responded",value:function(e){this.state="feedback",this.response=e,this.outcome="even"===this.better?"even":this.better===this.response?"better":"worse",this.dispatchEvent(new CustomEvent("decision-response",{detail:{trial:this.trialCount,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,response:this.response,outcome:this.outcome,payoff:this.trialPayoff},bubbles:!0}))}},{key:"reset",value:function(){this.state="off",this.trialCount=0,this.better=void 0,this.gamblePayoff=0,this.surePayoff=0,this.response=void 0,this.outcome=void 0}},{key:"render",value:function(){return(0,o.html)(a=a||k(['\n      <div class="holder">\n        ','\n        <div class="responses">\n          <decidable-button name="gamble" class="response ','" ?disabled='," @click=",'>Gamble</decidable-button>\n          <decidable-button name="sure" class="response ','" ?disabled='," @click=",">Sure</decidable-button>\n        </div>\n        ","\n      </div>"]),this.trial?(0,o.html)(s=s||k(['\n            <div class="trials">\n              <div class="trial">\n                <span class="label">Trial: </span><span class="count">','</span><span class="of"> of </span><span class="total">',"</span>\n              </div>\n            </div>"]),this.trialCount,this.trialTotal):(0,o.html)(l=l||k([""])),"feedback"===this.state&&"gamble"===this.response?"selected":"waiting"===this.state?"waiting":"","waiting"!==this.state||!0!==this.interactive,this.gamble.bind(this),"feedback"===this.state&&"sure"===this.response?"selected":"waiting"===this.state?"waiting":"","waiting"!==this.state||!0!==this.interactive,this.sure.bind(this),"none"!==this.feedback||"none"!==this.payoff?(0,o.html)(u=u||k(['\n            <div class="feedbacks">\n              <div class="feedback gamble\n                ','">\n                ',"\n                ",'\n              </div>\n              <div class="feedback sure\n                ','">\n                ',"\n                ","\n              </div>\n            </div>"]),"feedback"===this.state&&"outcome"===this.feedback&&"gamble"===this.response?this.outcome:"","feedback"===this.state&&"outcome"===this.feedback&&"gamble"===this.response?"better"===this.outcome?(0,o.html)(c=c||k(['<span class="outcome">Better</span>'])):"worse"===this.outcome?(0,o.html)(f=f||k(['<span class="outcome">Worse</span>'])):"even"===this.outcome?(0,o.html)(d=d||k(['<span class="outcome">Even</span>'])):(0,o.html)(h=h||k(['<span class="outcome">No<br>Response</span>'])):"","both"!==this.payoff&&"selection"!==this.payoff||"gamble"!==this.response?(0,o.html)(y=y||k([""])):(0,o.html)(p=p||k(['<span class="payoff">'," ","</span>"]),"gamble"===this.response?"Win:":"Miss:",this.trialPayoff),"feedback"===this.state&&"outcome"===this.feedback&&"sure"===this.response?this.outcome:"","feedback"===this.state&&"outcome"===this.feedback&&"sure"===this.response?"better"===this.outcome?(0,o.html)(g=g||k(['<span class="outcome">Better</span>'])):"worse"===this.outcome?(0,o.html)(v=v||k(['<span class="outcome">Worse</span>'])):"even"===this.outcome?(0,o.html)(m=m||k(['<span class="outcome">Even</span>'])):(0,o.html)(b=b||k(['<span class="outcome">No<br>Response</span>'])):"","both"!==this.payoff&&"selection"!==this.payoff||"sure"!==this.response?(0,o.html)(_=_||k([""])):(0,o.html)(x=x||k(['<span class="payoff">'," ","</span>"]),"sure"===this.response?"Win:":"Miss:",this.trialPayoff)):(0,o.html)(w=w||k([""])))}}])&&O(e.prototype,t),n&&O(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=e,customElements.define("decision-response",e)},{"../cpt-element":1008,"@decidable/decidable-elements":987,lit:616}],1004:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o,s=e("lit"),u=g(e("d3")),c=g(e("plotly.js/lib/core")),r=g(e("plotly.js/lib/isosurface")),l=g(e("plotly.js/lib/scatter3d")),f=p(e("@decidable/prospectable-math")),d=p(e("../cpt-element")),h=p(e("./plotly-style.auto"));function p(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=y(t);if(t&&t.has(e))return t.get(e);var n,r,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=o?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=e[n]);return i.default=e,t&&t.set(e,i),i}function v(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=w(n);return function(e,t){{if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=w(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}c.register([r,l]);l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(l,d.default);var e,t,n,r=_(l);function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=r.call(this)).firstUpdate=!0,e.surface=!0,e.points=["all","first","rest","none"],e.point="first",e.updateable=!1,e.a=.8,e.l=1.2,e.g=.8,e.xl=0,e.xw=20,e.pw=.5,e.xs=10,e.response="",e.label="",e.choices=[{name:"default",xw:e.xw,pw:e.pw,xs:e.xs,response:e.response,label:""}],e.GAMBLE=0,e.SURE=1,e.NR=.25,e.DEFAULT=.75,e.pointList=[],e.range={},e.range.xs={start:5,stop:15,step:.5},e.range.xw={start:10,stop:30,step:1},e.range.pw={start:0,stop:1,step:.05},e.width=NaN,e.height=NaN,e.rem=NaN,e.decisionSpace=[],e.alignState(),e}return e=l,n=[{key:"properties",get:function(){return{surface:{attribute:"surface",type:Boolean,reflect:!0},point:{attribute:"point",type:String,reflect:!0},updateable:{attribute:"updateable",type:Boolean,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0},width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}},{key:"styles",get:function(){return[b(w(l),"styles",this),h.default,(0,s.css)(o=o||v(["\n        :host {\n          display: inline-block;\n        }\n\n        .plotly {\n          height: 100%;\n\n          cursor: grab;\n        }\n\n        /* Plotly modebar styles */\n        /* Drawn from: https://github.com/plotly/plotly.js/blob/master/src/components/modebar/modebar.js */\n        .plotly:hover .modebar .modebar-group {\n          background-color: rgba(255, 255, 255, 0.5);\n        }\n\n        .modebar-btn .icon path {\n          fill: rgba(68, 68, 68, 0.3);\n        }\n\n        .modebar-btn:hover .icon path {\n          fill: rgba(68, 68, 68, 0.7);\n        }\n\n        .modebar-btn.active .icon path {\n          fill: rgba(68, 68, 68, 0.7);\n        }\n      "]))]}}],(t=[{key:"alignState",value:function(){var r=this;this.choices[0].name="default",this.choices[0].xw=this.xw,this.choices[0].pw=this.pw,this.choices[0].xs=this.xs,this.choices[0].response=this.response,this.choices[0].label=this.label,this.updateable&&(this.choices.forEach(function(e){e.response=f.default.xal2v(e.xw,r.a,r.l)*f.default.pg2w(e.pw,r.g)+f.default.xal2v(r.xl,r.a,r.l)*(1-f.default.pg2w(e.pw,r.g))>f.default.xal2v(e.xs,r.a,r.l)?"gamble":"sure"}),this.response=this.choices[0].response),this.pointList={xw:[],pw:[],xs:[],response:[],label:[]},this.choices.forEach(function(e,t){(0===t&&("first"===r.point||"all"===r.point)||0<t&&("rest"===r.point||"all"===r.point))&&(r.pointList.xw.push(e.xw),r.pointList.pw.push(e.pw),r.pointList.xs.push(e.xs),r.pointList.response.push("gamble"===e.response?r.GAMBLE:"sure"===e.response?r.SURE:"nr"===e.response?r.NR:r.DEFAULT),r.pointList.label.push(e.label))}),this.decisionSpace={xs:[],xw:[],pw:[],uDiff:[]},u.range(this.range.xs.start,this.range.xs.stop+.01,this.range.xs.step).forEach(function(n){u.range(r.range.xw.start,r.range.xw.stop+.01,r.range.xw.step).forEach(function(t){u.range(r.range.pw.start,r.range.pw.stop+.01,r.range.pw.step).forEach(function(e){r.decisionSpace.xs.push(n),r.decisionSpace.xw.push(t),r.decisionSpace.pw.push(e);e=f.default.xal2v(t,r.a,r.l)*f.default.pg2w(e,r.g)+f.default.xal2v(r.xl,r.a,r.l)*(1-f.default.pg2w(e,r.g))-f.default.xal2v(n,r.a,r.l);r.decisionSpace.uDiff.push(e)})})})}},{key:"clear",value:function(){this.choices=[{}],this.requestUpdate()}},{key:"get",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default",e=this.choices.find(function(e){return e.name===t});return void 0===e?null:e}},{key:"set",value:function(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"default",o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"";"default"===i&&(this.xw=e,this.pw=t,this.xs=n,this.response=r,this.label=o);var a=this.choices.find(function(e){return e.name===i});void 0===a?this.choices.push({name:i,xw:e,pw:t,xs:n,response:r,label:o}):(a.xw=e,a.pw=t,a.xs=n,a.response=r,a.label=o),this.requestUpdate()}},{key:"render",value:function(){return(0,s.html)(i=i||v(['\n      <div class="plotly"></div>\n    ']))}},{key:"getDimensions",value:function(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}},{key:"connectedCallback",value:function(){b(w(l.prototype),"connectedCallback",this).call(this),window.addEventListener("resize",this.getDimensions.bind(this))}},{key:"disconnectedCallback",value:function(){window.removeEventListener("resize",this.getDimensions.bind(this)),b(w(l.prototype),"disconnectedCallback",this).call(this)}},{key:"firstUpdated",value:function(e){b(w(l.prototype),"firstUpdated",this).call(this,e),window.setTimeout(this.getDimensions.bind(this),0)}},{key:"update",value:function(e){var t,n,r,i,o,a,s;b(w(l.prototype),"update",this).call(this,e),this.alignState(),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem)||(t=this.getComputedStyleValue("---color-text"),s=this.getComputedStyleValue("---color-element-border"),n=this.getComputedStyleValue("---color-element-background"),r=this.getComputedStyleValue("---color-element-emphasis"),i=this.getComputedStyleValue("---color-worse"),o=this.getComputedStyleValue("---color-better"),a=this.getComputedStyleValue("---color-nr"),e=[],this.surface&&e.push({name:"Decision Boundary",type:"isosurface",x:this.decisionSpace.xs,y:this.decisionSpace.xw,z:this.decisionSpace.pw,value:this.decisionSpace.uDiff,coloraxis:"coloraxis",isomin:0,isomax:0,opacity:.5},{name:"Difference in Subjective Utility",type:"isosurface",x:this.decisionSpace.xs,y:this.decisionSpace.xw,z:this.decisionSpace.pw,value:this.decisionSpace.uDiff,caps:{x:{show:!1},y:{show:!1},z:{show:!1}},coloraxis:"coloraxis",isomin:-30,isomax:30,showscale:!1,slices:{x:{show:!0,locations:[this.range.xs.stop]},y:{show:!0,locations:[this.range.xw.stop]},z:{show:!0,locations:[this.range.pw.start]}},surface:{show:!1}}),e.push({name:"Current Decision",type:"scatter3d",x:this.pointList.xs,y:this.pointList.xw,z:this.pointList.pw,mode:"markers",marker:{color:this.pointList.response,coloraxis:"coloraxis2",line:{color:r,width:2},size:6}}),s={coloraxis:{cmin:-30,cmax:30,colorbar:{title:{font:{size:1.125*this.rem},text:"Difference in Utility (Gamble - Sure)",side:"right"},thickness:16,ypad:32},colorscale:[[0,"rgb(35, 35, 104)"],[.35,"rgb(69,69,208)"],[.5,"rgb(190,190,190)"],[.65,"rgb(240,50,230)"],[1,"rgb(120,25,115)"]]},coloraxis2:{cmin:0,cmax:1,colorscale:[[0,i],[.01,i],[.24,a],[.26,a],[.74,r],[.76,r],[.99,o],[1,o]],showscale:!1},font:{family:'"Source Sans Pro", sans-serif',color:t},margin:{t:0,l:0,b:0},scene:{hovermode:!1,camera:{center:{x:0,y:.1,z:-.2},eye:{x:-2,y:-.8,z:.8}},xaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:s,showline:!0,linecolor:s,zeroline:!1,range:[this.range.xs.start,this.range.xs.stop],title:{text:"Sure Value",font:{size:1.125*this.rem}}},yaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:s,showline:!0,linecolor:s,zeroline:!1,range:[this.range.xw.start,this.range.xw.stop],title:{text:"Win Value",font:{size:1.125*this.rem}}},zaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:s,showline:!0,linecolor:s,zeroline:!1,range:[this.range.pw.start,this.range.pw.stop],title:{text:"Win Probability",font:{size:1.125*this.rem}}}},uirevision:!0},c.react(this.shadowRoot.querySelector(".plotly"),e,s,{displaylogo:!1,modeBarButtonsToRemove:["orbitRotation","resetCameraDefault3d","hoverClosest3d","toImage"],responsive:!0}),this.firstUpdate=!1)}}])&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();n.default=l,customElements.define("decision-space",l)},{"../cpt-element":1008,"./plotly-style.auto":1007,"@decidable/prospectable-math":1021,d3:570,lit:616,"plotly.js/lib/core":621,"plotly.js/lib/isosurface":623,"plotly.js/lib/scatter3d":624}],1005:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,s,l=e("lit"),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=f(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("d3")),c=(e=e("../cpt-element"))&&e.__esModule?e:{default:e};function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function d(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=v(n);return function(e,t){{if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=v(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(i,c.default);var e,t,n,r=g(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).duration=2e3,e.iti=2e3,e.trials=5,e.running=!1,e.states=["resetted","iti","stimulus","ended"],e.state="resetted",e.range={},e.range.xl={start:0,stop:0,step:1},e.range.xw={start:10,stop:30,step:1},e.range.pw={start:.1,stop:.9,step:.1},e.range.xs={start:5,stop:15,step:1},e.range.xl.values=u.range(e.range.xl.start,e.range.xl.stop+.01,e.range.xl.step),e.range.xw.values=u.range(e.range.xw.start,e.range.xw.stop+.01,e.range.xw.step),e.range.pw.values=u.range(e.range.pw.start,e.range.pw.stop+.01,e.range.pw.step),e.range.xs.values=u.range(e.range.xs.start,e.range.xs.stop+.01,e.range.xs.step),e.xl=0,e.xw=0,e.pw=0,e.xs=0,e.trial=0,e.baseTime=0,e.pauseTime=0,e.startTime=0,e.lastTime=0,e.runner=void 0,e}return e=i,n=[{key:"properties",get:function(){return{duration:{attribute:"duration",type:Number,reflect:!0},iti:{attribute:"iti",type:Number,reflect:!0},trials:{attribute:"trials",type:Number,reflect:!0},running:{attribute:"running",type:Boolean,reflect:!0},state:{attribute:!1,type:String,reflect:!1}}}},{key:"styles",get:function(){return[p(v(i),"styles",this),(0,l.css)(s=s||d(["\n        :host {\n          display: inline-block;\n        }\n      "]))]}}],(t=[{key:"render",value:function(){return(0,l.html)(o=o||d(['\n      <div class="holder">\n        <decision-choice state="','" probability="','" win="','" loss="','" sure="','"></decision-choice>\n      </div>']),"stimulus"===this.state?"choice":"iti"===this.state?"fixation":"blank",this.pw,this.xw,this.xl,this.xs)}},{key:"update",value:function(e){p(v(i.prototype),"update",this).call(this,e),e.has("running")&&(this.running?(this.pauseTime&&(this.baseTime+=u.now()-this.pauseTime,this.pauseTime=0),this.runner=u.interval(this.run.bind(this),20)):void 0!==this.runner&&(this.runner.stop(),this.pauseTime=u.now()))}},{key:"reset",value:function(){this.runner.stop(),this.running=!1,this.trial=0,this.state="resetted",this.xl=0,this.xw=0,this.pw=0,this.xs=0,this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0}},{key:"run",value:function(){var e=u.now(),t=this.baseTime?e-this.baseTime:0,n=this.baseTime?t-this.startTime:0;this.lastTime=t,"resetted"===this.state?(this.state="iti",this.baseTime=e,this.startTime=0,this.dispatchEvent(new CustomEvent("decision-block-start",{detail:{trials:this.trials},bubbles:!0}))):"iti"===this.state&&n>=this.iti?(this.trial+=1,this.state="stimulus",this.startTime=t,this.xl=this.range.xl.values[Math.floor(Math.random()*this.range.xl.values.length)],this.xw=this.range.xw.values[Math.floor(Math.random()*this.range.xw.values.length)],this.pw=this.range.pw.values[Math.floor(Math.random()*this.range.pw.values.length)],this.xs=this.range.xs.values[Math.floor(Math.random()*this.range.xs.values.length)],this.vDiff=this.xw*this.pw+this.xl*(1-this.pw)-this.xs,this.gamblePayoff=Math.random()<this.pw?this.xw:this.xl,this.surePayoff=this.xs,this.better=0<this.vDiff?"gamble":this.vDiff<0?"sure":"equal",this.dispatchEvent(new CustomEvent("decision-trial-start",{detail:{trials:this.trials,duration:this.duration,iti:this.iti,trial:this.trial,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff},bubbles:!0}))):"stimulus"===this.state&&n>=this.duration&&(this.dispatchEvent(new CustomEvent("decision-trial-end",{detail:{trials:this.trials,duration:this.duration,iti:this.iti,trial:this.trial,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff},bubbles:!0})),this.trial>=this.trials?(this.runner.stop(),this.running=!1,this.state="ended",this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.dispatchEvent(new CustomEvent("decision-block-end",{detail:{trials:this.trial},bubbles:!0}))):(this.state="iti",this.startTime=t))}}])&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=e,customElements.define("decision-task",e)},{"../cpt-element":1008,d3:570,lit:616}],1006:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"CPTCalculation",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"CPTFit",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"CPTProbability",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"CPTSpace",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"CPTValue",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"DecisionChoice",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"DecisionControl",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"DecisionOption",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"DecisionOutcome",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(n,"DecisionResponse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(n,"DecisionSpace",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(n,"DecisionTask",{enumerable:!0,get:function(){return p.default}});var r=y(e("./cpt-calculation")),i=y(e("./cpt-fit")),o=y(e("./cpt-probability")),a=y(e("./cpt-space")),s=y(e("./cpt-value")),l=y(e("./decision-choice")),u=y(e("./decision-control")),c=y(e("./decision-option")),f=y(e("./decision-outcome")),d=y(e("./decision-response")),h=y(e("./decision-space")),p=y(e("./decision-task"));function y(e){return e&&e.__esModule?e:{default:e}}},{"./cpt-calculation":993,"./cpt-fit":995,"./cpt-probability":996,"./cpt-space":997,"./cpt-value":998,"./decision-choice":999,"./decision-control":1e3,"./decision-option":1001,"./decision-outcome":1002,"./decision-response":1003,"./decision-space":1004,"./decision-task":1005}],1007:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=(n.default=void 0,e("lit").css)((e=['\n  /* inject:css */\n  .js-plotly-plot .plotly, .js-plotly-plot .plotly div {\n  direction: ltr;\n  font-family: "Open Sans", verdana, arial, sans-serif;\n  margin: 0;\n  padding: 0;\n}\n.js-plotly-plot .plotly input, .js-plotly-plot .plotly button {\n  font-family: "Open Sans", verdana, arial, sans-serif;\n}\n.js-plotly-plot .plotly input:focus, .js-plotly-plot .plotly button:focus {\n  outline: none;\n}\n.js-plotly-plot .plotly a {\n  text-decoration: none;\n}\n.js-plotly-plot .plotly a:hover {\n  text-decoration: none;\n}\n.js-plotly-plot .plotly .crisp {\n  shape-rendering: crispEdges;\n}\n.js-plotly-plot .plotly .user-select-none {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n}\n.js-plotly-plot .plotly svg {\n  overflow: hidden;\n}\n.js-plotly-plot .plotly svg a {\n  fill: #447adb;\n}\n.js-plotly-plot .plotly svg a:hover {\n  fill: #3c6dc5;\n}\n.js-plotly-plot .plotly .main-svg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n}\n.js-plotly-plot .plotly .main-svg .draglayer {\n  pointer-events: all;\n}\n.js-plotly-plot .plotly .cursor-default {\n  cursor: default;\n}\n.js-plotly-plot .plotly .cursor-pointer {\n  cursor: pointer;\n}\n.js-plotly-plot .plotly .cursor-crosshair {\n  cursor: crosshair;\n}\n.js-plotly-plot .plotly .cursor-move {\n  cursor: move;\n}\n.js-plotly-plot .plotly .cursor-col-resize {\n  cursor: col-resize;\n}\n.js-plotly-plot .plotly .cursor-row-resize {\n  cursor: row-resize;\n}\n.js-plotly-plot .plotly .cursor-ns-resize {\n  cursor: ns-resize;\n}\n.js-plotly-plot .plotly .cursor-ew-resize {\n  cursor: ew-resize;\n}\n.js-plotly-plot .plotly .cursor-sw-resize {\n  cursor: sw-resize;\n}\n.js-plotly-plot .plotly .cursor-s-resize {\n  cursor: s-resize;\n}\n.js-plotly-plot .plotly .cursor-se-resize {\n  cursor: se-resize;\n}\n.js-plotly-plot .plotly .cursor-w-resize {\n  cursor: w-resize;\n}\n.js-plotly-plot .plotly .cursor-e-resize {\n  cursor: e-resize;\n}\n.js-plotly-plot .plotly .cursor-nw-resize {\n  cursor: nw-resize;\n}\n.js-plotly-plot .plotly .cursor-n-resize {\n  cursor: n-resize;\n}\n.js-plotly-plot .plotly .cursor-ne-resize {\n  cursor: ne-resize;\n}\n.js-plotly-plot .plotly .cursor-grab {\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.js-plotly-plot .plotly .modebar {\n  position: absolute;\n  top: 2px;\n  right: 2px;\n}\n.js-plotly-plot .plotly .ease-bg {\n  -webkit-transition: background-color 0.3s ease 0s;\n  -moz-transition: background-color 0.3s ease 0s;\n  -ms-transition: background-color 0.3s ease 0s;\n  -o-transition: background-color 0.3s ease 0s;\n  transition: background-color 0.3s ease 0s;\n}\n.js-plotly-plot .plotly .modebar--hover > :not(.watermark) {\n  opacity: 0;\n  -webkit-transition: opacity 0.3s ease 0s;\n  -moz-transition: opacity 0.3s ease 0s;\n  -ms-transition: opacity 0.3s ease 0s;\n  -o-transition: opacity 0.3s ease 0s;\n  transition: opacity 0.3s ease 0s;\n}\n.js-plotly-plot .plotly:hover .modebar--hover .modebar-group {\n  opacity: 1;\n}\n.js-plotly-plot .plotly .modebar-group {\n  float: left;\n  display: inline-block;\n  box-sizing: border-box;\n  padding-left: 8px;\n  position: relative;\n  vertical-align: middle;\n  white-space: nowrap;\n}\n.js-plotly-plot .plotly .modebar-btn {\n  position: relative;\n  font-size: 16px;\n  padding: 3px 4px;\n  height: 22px;\n  /* display: inline-block; including this breaks 3d interaction in .embed mode. Chrome bug? */\n  cursor: pointer;\n  line-height: normal;\n  box-sizing: border-box;\n}\n.js-plotly-plot .plotly .modebar-btn svg {\n  position: relative;\n  top: 2px;\n}\n.js-plotly-plot .plotly .modebar.vertical {\n  display: flex;\n  flex-direction: column;\n  flex-wrap: wrap;\n  align-content: flex-end;\n  max-height: 100%;\n}\n.js-plotly-plot .plotly .modebar.vertical svg {\n  top: -1px;\n}\n.js-plotly-plot .plotly .modebar.vertical .modebar-group {\n  display: block;\n  float: none;\n  padding-left: 0px;\n  padding-bottom: 8px;\n}\n.js-plotly-plot .plotly .modebar.vertical .modebar-group .modebar-btn {\n  display: block;\n  text-align: center;\n}\n.js-plotly-plot .plotly [data-title] {\n  /**\n   * tooltip body\n   */\n}\n.js-plotly-plot .plotly [data-title]:before, .js-plotly-plot .plotly [data-title]:after {\n  position: absolute;\n  -webkit-transform: translate3d(0, 0, 0);\n  -moz-transform: translate3d(0, 0, 0);\n  -ms-transform: translate3d(0, 0, 0);\n  -o-transform: translate3d(0, 0, 0);\n  transform: translate3d(0, 0, 0);\n  display: none;\n  opacity: 0;\n  z-index: 1001;\n  pointer-events: none;\n  top: 110%;\n  right: 50%;\n}\n.js-plotly-plot .plotly [data-title]:hover:before, .js-plotly-plot .plotly [data-title]:hover:after {\n  display: block;\n  opacity: 1;\n}\n.js-plotly-plot .plotly [data-title]:before {\n  content: "";\n  position: absolute;\n  background: transparent;\n  border: 6px solid transparent;\n  z-index: 1002;\n  margin-top: -12px;\n  border-bottom-color: #69738a;\n  margin-right: -6px;\n}\n.js-plotly-plot .plotly [data-title]:after {\n  content: attr(data-title);\n  background: #69738a;\n  color: white;\n  padding: 8px 10px;\n  font-size: 12px;\n  line-height: 12px;\n  white-space: nowrap;\n  margin-right: -18px;\n  border-radius: 2px;\n}\n.js-plotly-plot .plotly .vertical [data-title]:before, .js-plotly-plot .plotly .vertical [data-title]:after {\n  top: 0%;\n  right: 200%;\n}\n.js-plotly-plot .plotly .vertical [data-title]:before {\n  border: 6px solid transparent;\n  border-left-color: #69738a;\n  margin-top: 8px;\n  margin-right: -30px;\n}\n.js-plotly-plot .plotly .select-outline {\n  fill: none;\n  stroke-width: 1;\n  shape-rendering: crispEdges;\n}\n.js-plotly-plot .plotly .select-outline-1 {\n  stroke: white;\n}\n.js-plotly-plot .plotly .select-outline-2 {\n  stroke: black;\n  stroke-dasharray: 2px 2px;\n}\n\n.plotly-notifier {\n  font-family: "Open Sans", verdana, arial, sans-serif;\n  position: fixed;\n  top: 50px;\n  right: 20px;\n  z-index: 10000;\n  font-size: 10pt;\n  max-width: 180px;\n}\n.plotly-notifier p {\n  margin: 0;\n}\n.plotly-notifier .notifier-note {\n  min-width: 180px;\n  max-width: 250px;\n  border: 1px solid #fff;\n  z-index: 3000;\n  margin: 0;\n  background-color: #8c97af;\n  background-color: rgba(140, 151, 175, 0.9);\n  color: #fff;\n  padding: 10px;\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  -ms-hyphens: auto;\n  -webkit-hyphens: auto;\n  hyphens: auto;\n}\n.plotly-notifier .notifier-close {\n  color: #fff;\n  opacity: 0.8;\n  float: right;\n  padding: 0 5px;\n  background: none;\n  border: none;\n  font-size: 20px;\n  font-weight: bold;\n  line-height: 20px;\n}\n.plotly-notifier .notifier-close:hover {\n  color: #444;\n  text-decoration: none;\n  cursor: pointer;\n}\n  /* endinject */\n'],r=r||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))));n.default=r},{lit:616}],1008:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,s=e("lit"),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=c(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("d3")),u=e("@decidable/decidable-elements");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=y(n);return function(e,t){{if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=y(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(i,u.DecidableElement);var e,t,n,r=p(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).interactive=!1,e}return e=i,n=[{key:"properties",get:function(){return{interactive:{attribute:"interactive",type:Boolean,reflect:!0}}}},{key:"colors",get:function(){return{x:l.schemeSet1[1],a:l.schemeSet1[5],l:l.schemeSet1[6],v:l.schemeSet1[8],p:l.schemeSet1[2],g:l.schemeSet1[3],w:l.schemeSet1[4],u:l.schemeSet1[7],chosen:l.schemeSet1[9],better:"#4545d0",worse:"#f032e6",even:"#10dbc9",correct:"#ffffff",error:"#000000",nr:"#cccccc"}}},{key:"lights",get:function(){return Object.keys(i.colors).reduce(function(e,t){return e[t]=l.interpolateRgb(i.colors[t],"#ffffff")(.5),e},{})}},{key:"darks",get:function(){return Object.keys(i.colors).reduce(function(e,t){return e[t]=l.interpolateRgb(i.colors[t],"#000000")(.5),e},{})}},{key:"styles",get:function(){return[d(y(i),"styles",this),(0,s.css)(o||(e=["\n        :host {\n          ---color-x: var(--color-x, ",");\n          ---color-a: var(--color-a, ",");\n          ---color-l: var(--color-l, ",");\n          ---color-v: var(--color-v, ",");\n          ---color-p: var(--color-p, ",");\n          ---color-g: var(--color-g, ",");\n          ---color-w: var(--color-w, ",");\n          ---color-u: var(--color-u, ",");\n          ---color-chosen: var(--color-chosen, ",");\n          ---color-better: var(--color-better, ",");\n          ---color-worse: var(--color-worse, ",");\n          ---color-even: var(--color-even, ",");\n          ---color-correct: var(--color-correct, ",");\n          ---color-error: var(--color-error, ",");\n          ---color-nr: var(--color-nr, ",");\n\n          ---color-x-light: var(--color-x-light, ",");\n          ---color-a-light: var(--color-a-light, ",");\n          ---color-l-light: var(--color-l-light, ",");\n          ---color-v-light: var(--color-v-light, ",");\n          ---color-p-light: var(--color-p-light, ",");\n          ---color-g-light: var(--color-g-light, ",");\n          ---color-w-light: var(--color-w-light, ",");\n          ---color-u-light: var(--color-u-light, ",");\n          ---color-chosen-light: var(--color-chosen-light, ",");\n          ---color-better-light: var(--color-better-light, ",");\n          ---color-worse-light: var(--color-worse-light, ",");\n          ---color-even-light: var(--color-even-light, ",");\n          ---color-correct-light: var(--color-correct-light, ",");\n          ---color-error-light: var(--color-error-light, ",");\n          ---color-nr-light: var(--color-nr-light, ",");\n\n          ---color-x-dark: var(--color-x-dark, ",");\n          ---color-a-dark: var(--color-a-dark, ",");\n          ---color-l-dark: var(--color-l-dark, ",");\n          ---color-v-dark: var(--color-v-dark, ",");\n          ---color-p-dark: var(--color-p-dark, ",");\n          ---color-g-dark: var(--color-g-dark, ",");\n          ---color-w-dark: var(--color-w-dark, ",");\n          ---color-u-dark: var(--color-u-dark, ",");\n          ---color-chosen-dark: var(--color-chosen-dark, ",");\n          ---color-better-dark: var(--color-better-dark, ",");\n          ---color-worse-dark: var(--color-worse-dark, ",");\n          ---color-even-dark: var(--color-even-dark, ",");\n          ---color-correct-dark: var(--color-correct-dark, ",");\n          ---color-error-dark: var(--color-error-dark, ",");\n          ---color-nr-dark: var(--color-nr-dark, ",");\n        }\n      "],t=t||e.slice(0),o=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))),(0,s.unsafeCSS)(this.colors.x),(0,s.unsafeCSS)(this.colors.a),(0,s.unsafeCSS)(this.colors.l),(0,s.unsafeCSS)(this.colors.v),(0,s.unsafeCSS)(this.colors.p),(0,s.unsafeCSS)(this.colors.g),(0,s.unsafeCSS)(this.colors.w),(0,s.unsafeCSS)(this.colors.u),(0,s.unsafeCSS)(this.colors.chosen),(0,s.unsafeCSS)(this.colors.better),(0,s.unsafeCSS)(this.colors.worse),(0,s.unsafeCSS)(this.colors.even),(0,s.unsafeCSS)(this.colors.correct),(0,s.unsafeCSS)(this.colors.error),(0,s.unsafeCSS)(this.colors.nr),(0,s.unsafeCSS)(this.lights.x),(0,s.unsafeCSS)(this.lights.a),(0,s.unsafeCSS)(this.lights.l),(0,s.unsafeCSS)(this.lights.v),(0,s.unsafeCSS)(this.lights.p),(0,s.unsafeCSS)(this.lights.g),(0,s.unsafeCSS)(this.lights.w),(0,s.unsafeCSS)(this.lights.u),(0,s.unsafeCSS)(this.lights.chosen),(0,s.unsafeCSS)(this.lights.better),(0,s.unsafeCSS)(this.lights.worse),(0,s.unsafeCSS)(this.lights.even),(0,s.unsafeCSS)(this.lights.correct),(0,s.unsafeCSS)(this.lights.error),(0,s.unsafeCSS)(this.lights.nr),(0,s.unsafeCSS)(this.darks.x),(0,s.unsafeCSS)(this.darks.a),(0,s.unsafeCSS)(this.darks.l),(0,s.unsafeCSS)(this.darks.v),(0,s.unsafeCSS)(this.darks.p),(0,s.unsafeCSS)(this.darks.g),(0,s.unsafeCSS)(this.darks.w),(0,s.unsafeCSS)(this.darks.u),(0,s.unsafeCSS)(this.darks.chosen),(0,s.unsafeCSS)(this.darks.better),(0,s.unsafeCSS)(this.darks.worse),(0,s.unsafeCSS)(this.darks.even),(0,s.unsafeCSS)(this.darks.correct),(0,s.unsafeCSS)(this.darks.error),(0,s.unsafeCSS)(this.darks.nr))];var e,t}}],(t=null)&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=e},{"@decidable/decidable-elements":987,d3:570,lit:616}],1009:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e("lit");e("@decidable/decidable-elements");var a,s=(e=e("../cpt-element"))&&e.__esModule?e:{default:e};function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=d(n);return function(e,t){{if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=d(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(i,s.default);var e,t,n,r=f(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).numeric=!1,e}return e=i,n=[{key:"properties",get:function(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0}}}},{key:"styles",get:function(){return[u(d(i),"styles",this),(0,o.css)(a||(e=["\n        :host {\n          display: block;\n\n          margin: 1rem;\n        }\n\n        /* Containing <div> */\n        .holder {\n          display: flex;\n\n          flex-direction: row;\n\n          justify-content: left;\n        }\n\n        /* Overall <table> */\n        .equation {\n          text-align: center;\n\n          border-collapse: collapse;\n\n          border: 0;\n        }\n\n        /* Modifies <td> */\n        .underline {\n          border-bottom: 1px solid var(---color-text);\n        }\n\n        /* Basic <span> and <var> w/modifiers */\n        span,\n        var {\n          padding: 0 0.25rem;\n\n          font-style: normal;\n        }\n\n        .tight {\n          padding: 0;\n        }\n\n        .paren {\n          font-size: 150%;\n        }\n\n        .bracket {\n          font-size: 175%;\n        }\n\n        .brace {\n          font-size: 200%;\n        }\n\n        .addend {\n          position: relative;\n          display: inline-block;\n        }\n\n        .comparison {\n          position: relative;\n          display: inline-block;\n\n          font-size: 125%;\n          font-weight: 600;\n        }\n\n        .function {\n          display: inline-block;\n        }\n\n        :host([numeric]) .function {\n          padding: 0.25rem;\n        }\n\n        .exp {\n          display: inline-block;\n\n          font-size: 0.75rem;\n        }\n\n        .subscript {\n          display: inline-block;\n\n          font-size: 66.667%;\n        }\n\n        .summation {\n          display: flex;\n\n          flex-direction: column;\n\n          line-height: 0.8;\n        }\n\n        .sigma {\n          display: inline-block;\n\n          font-size: 200%;\n        }\n\n        /* Input wrapping <label> */\n        decidable-spinner {\n          --decidable-spinner-input-width: 4rem;\n\n          display: inline-block;\n\n          padding: 0.125rem 0.375rem 0.375rem;\n\n          line-height: 1.5;\n          vertical-align: middle;\n        }\n\n        .n {\n          --decidable-spinner-input-width: 2rem;\n        }\n\n        .left {\n          text-align: left;\n        }\n\n        .right {\n          text-align: right;\n        }\n\n        .bottom {\n          vertical-align: bottom;\n        }\n\n        .top {\n          vertical-align: top;\n        }\n\n        /* Color scheme */\n        /* .win {\n          background: var(---color-better);\n        }\n\n        .loss {\n          background: var(---color-worse);\n        }\n\n        .sure {\n          background: var(---color-even);\n        } */\n\n        .x {\n          background: var(---color-x-light);\n        }\n\n        .a {\n          background: var(---color-a-light);\n        }\n\n        .l {\n          background: var(---color-l-light);\n        }\n\n        .v {\n          background: var(---color-v-light);\n        }\n\n        .p {\n          background: var(---color-p-light);\n        }\n\n        .g {\n          background: var(---color-g-light);\n        }\n\n        .w {\n          background: var(---color-w-light);\n        }\n\n        .u {\n          background: var(---color-u-light);\n        }\n      "],t=t||e.slice(0),a=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))))];var e,t}}],(t=null)&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=e},{"../cpt-element":1008,"@decidable/decidable-elements":987,lit:616}],1010:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"CPTEquationPG2W",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"CPTEquationVW2U",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"CPTEquationXAL2V",{enumerable:!0,get:function(){return o.default}});var r=a(e("./pg2w")),i=a(e("./vw2u")),o=a(e("./xal2v"));function a(e){return e&&e.__esModule?e:{default:e}}},{"./pg2w":1011,"./vw2u":1012,"./xal2v":1013}],1011:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,a,s,l,u,c,f,d,h=e("lit"),p=r(e("@decidable/prospectable-math")),y=r(e("./cpt-equation"));function r(e){return e&&e.__esModule?e:{default:e}}function g(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=x(n);return function(e,t){{if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=x(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(i,y.default);var e,t,n,r=b(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).p=.75,e.g=.5,e.alignState(),e}return e=i,n=[{key:"properties",get:function(){return{p:{attribute:"probability",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},w:{attribute:!1,type:Number,reflect:!1}}}}],(t=[{key:"alignState",value:function(){this.w=p.default.pg2w(this.p,this.g)}},{key:"sendEvent",value:function(){this.dispatchEvent(new CustomEvent("cpt-equation-pg2w-change",{detail:{p:this.p,g:this.g,w:this.w},bubbles:!0}))}},{key:"pInput",value:function(e){this.p=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"gInput",value:function(e){this.g=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"render",value:function(){var e;this.alignState();var t=this.numeric?(e=(0,h.html)(o=o||g(['<decidable-spinner class="p bottom" ?disabled=',' min="0" max="1" step="0.01" .value="','" @input=','>\n          <var class="math-var">p</var>\n        </decidable-spinner>']),!this.interactive,this.p,this.pInput.bind(this)),n=(0,h.html)(a=a||g(['<decidable-spinner class="g bottom" ?disabled=',' min="0" max="1" step="0.01" .value="','" @input=','>\n          <var class="math-var">γ</var>\n        </decidable-spinner>']),!this.interactive,this.g,this.gInput.bind(this)),(0,h.html)(s=s||g(['<decidable-spinner class="w bottom" disabled min="0" max="1" step=".01" .value="','">\n          <var class="math-var">w</var>\n        </decidable-spinner>']),+this.w.toFixed(2))):(e=(0,h.html)(l=l||g(['<var class="math-var p">p</var>'])),n=(0,h.html)(u=u||g(['<var class="math-var g">γ</var>'])),(0,h.html)(c=c||g(['<var class="math-var w">w</var>']))),n=(0,h.html)(f=f||g(['\n      <tr>\n        <td rowspan="2">\n          ','<span class="equals">=</span>\n        </td>\n        <td class="underline">\n          ','<sup class="exp">','</sup>\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <span class="bracket tight">[</span>','<sup class="exp">','</sup><span class="plus">+</span><span class="paren tight">(</span>1<span class="minus">−</span>','<span class="paren tight">)</span><sup class="exp">','</sup><span class="bracket tight">]</span><sup class="exp">1/',"</sup>\n        </td>\n      </tr>"]),t,e,n,e,n,e,n,n);return(0,h.html)(d=d||g(['\n      <div class="holder">\n        <table class="equation">\n          <tbody>\n            ',"\n          </tbody>\n        </table>\n      </div>"]),n)}}])&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=e,customElements.define("cpt-equation-pg2w",e)},{"./cpt-equation":1009,"@decidable/prospectable-math":1021,lit:616}],1012:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,a,s,l,u,c,f,d,h,p,y,g,v,m,b=e("lit"),x=e("@decidable/decidable-elements"),_=(e=e("./cpt-equation"))&&e.__esModule?e:{default:e};function w(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=O(n);return function(e,t){{if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=O(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(i,_.default);var e,t,n,r=k(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).v=[10,0],e.w=[.75,.25],e.n=2,e.nMax=4,e.vMax=new Array(e.nMax).fill(0),e.wMax=new Array(e.nMax).fill(0),e.alignState(),e}return e=i,n=[{key:"properties",get:function(){return{v:{attribute:"value",converter:x.DecidableConverterArray,reflect:!0},w:{attribute:"weight",converter:x.DecidableConverterArray,reflect:!0},n:{attribute:"outcomes",type:Number,reflect:!0},u:{attribute:!1,type:Number,reflect:!1}}}}],(t=[{key:"alignState",value:function(){var r=this;this.v=this.v.length<this.n?this.v.concat(this.vMax.slice(this.v.length,this.n)):this.v.length>this.n?this.v.slice(0,this.n):this.v,this.w=this.w.length<this.n?this.w.concat(this.wMax.slice(this.w.length,this.n)):this.w.length>this.n?this.w.slice(0,this.n):this.w,this.v.forEach(function(e,t){r.vMax[t]=e}),this.w.forEach(function(e,t){r.wMax[t]=e}),this.u=this.v.reduce(function(e,t,n){return e+t*r.w[n]},0)}},{key:"sendEvent",value:function(){this.dispatchEvent(new CustomEvent("cpt-equation-vw2u-change",{detail:{v:this.v,w:this.w,n:this.n,u:this.u},bubbles:!0}))}},{key:"vInput",value:function(e,t){this.v[e]=parseFloat(t.target.value),this.alignState(),this.sendEvent()}},{key:"wInput",value:function(e,t){this.w[e]=parseFloat(t.target.value),this.alignState(),this.sendEvent()}},{key:"nInput",value:function(e){this.n=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"vTemplate",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return 2<arguments.length&&void 0!==arguments[2]&&arguments[2]?(e=Number.parseInt(t,10)-1,(0,b.html)(o=o||w(['<decidable-spinner class="v" ?disabled=',' .value="','" @input=','>\n          <var class="math-var">v<sub class="subscript ','">',"</sub></var>\n        </decidable-spinner>"]),!this.interactive,this.v[e],this.vInput.bind(this,e),n,t)):(0,b.html)(a=a||w(['<var class="math-var v">v<sub class="subscript ','">',"</sub></var>"]),n,t)}},{key:"wTemplate",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return 2<arguments.length&&void 0!==arguments[2]&&arguments[2]?(e=Number.parseInt(t,10)-1,(0,b.html)(s=s||w(['<decidable-spinner class="w" ?disabled=',' min="0" max="1" step=".001" .value="','" @input=','>\n          <var class="math-var">w<sub class="subscript ','">',"</sub></var>\n        </decidable-spinner>"]),!this.interactive,this.w[e],this.wInput.bind(this,e),n,t)):(0,b.html)(l=l||w(['<var class="math-var w">w<sub class="subscript ','">',"</sub></var>"]),n,t)}},{key:"render",value:function(){var e,n=this;this.alignState();var t=this.numeric?(e=(0,b.html)(u=u||w(['<decidable-spinner class="u" disabled .value="','">\n          <var class="math-var">U</var>\n        </decidable-spinner>']),+this.u.toFixed(3)),(0,b.html)(c=c||w(['<decidable-spinner class="n" ?disabled=',' min="1" max="4" step="1" .value="','" @input=','>\n          <var class="math-var">n</var>\n        </decidable-spinner>']),!this.interactive,this.n,this.nInput.bind(this))):(e=(0,b.html)(f=f||w(['<var class="math-var u">U</var>'])),(0,b.html)(d=d||w(['<var class="math-var subscript">n</var>']))),t=(0,b.html)(h=h||w(["\n      <tr>\n        <td>\n          ",'<span class="equals">=</span>\n        </td>\n        <td>\n          <div class="summation">\n            <span class="tight">','</span>\n            <span class="tight"><var class="math-greek sigma">Σ</var></span>\n            <span class="tight"><var class="math-var subscript tight">i</var><span class="equals subscript">=</span><span class="subscript tight">1</span></span>\n          </div>\n        </td>\n        <td>\n          ',"&nbsp;",'<span class="equals">=</span>\n        </td>\n        <td>\n          ',"\n        </td>\n      </tr>"]),e,t,this.vTemplate("i","math-var",!1),this.wTemplate("i","math-var",!1),this.numeric?Array(this.nMax).fill().map(function(e,t){return t<n.n?(0,b.html)(p=p||w(['<span class="addend tight">',"","&nbsp;","</span>"]),0!==t?(0,b.html)(y=y||w(['<span class="plus">+</span>'])):(0,b.html)(g=g||w([""])),n.vTemplate(t+1,"math-num",!0),n.wTemplate(t+1,"math-num",!0)):null}):(0,b.html)(v=v||w(["","&nbsp;",'<span class="plus">+</span><span class="ellipsis">…</span><span class="plus">+</span>',"&nbsp;",""]),this.vTemplate("1","math-num",!1),this.wTemplate("1","math-num",!1),this.vTemplate("n","math-var",!1),this.wTemplate("n","math-var",!1)));return(0,b.html)(m=m||w(['\n      <div class="holder">\n        <table class="equation">\n          <tbody>\n            ',"\n          </tbody>\n        </table>\n      </div>"]),t)}}])&&M(e.prototype,t),n&&M(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=e,customElements.define("cpt-equation-vw2u",e)},{"./cpt-equation":1009,"@decidable/decidable-elements":987,lit:616}],1013:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,a,s,l,u,c,f,d,h,p,y=e("lit"),g=r(e("@decidable/prospectable-math")),v=r(e("./cpt-equation"));function r(e){return e&&e.__esModule?e:{default:e}}function m(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=w(n);return function(e,t){{if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=w(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(i,v.default);var e,t,n,r=_(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).x=10,e.a=.5,e.l=2,e.alignState(),e}return e=i,n=[{key:"properties",get:function(){return{x:{attribute:"value",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},v:{attribute:!1,type:Number,reflect:!1}}}}],(t=[{key:"alignState",value:function(){this.v=g.default.xal2v(this.x,this.a,this.l)}},{key:"sendEvent",value:function(){this.dispatchEvent(new CustomEvent("cpt-equation-xal2v-change",{detail:{x:this.x,a:this.a,l:this.l,v:this.v},bubbles:!0}))}},{key:"xInput",value:function(e){this.x=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"aInput",value:function(e){this.a=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"lInput",value:function(e){this.l=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"render",value:function(){var e,t;this.alignState();var n=this.numeric?(r=(0,y.html)(o=o||m(['<decidable-spinner class="x bottom" ?disabled=',' step="1" .value="','" @input=','>\n          <var class="math-var">x</var>\n        </decidable-spinner>']),!this.interactive,this.x,this.xInput.bind(this)),e=(0,y.html)(a=a||m(['<decidable-spinner class="a bottom" ?disabled=',' min="0" max="1" step=".001" .value="','" @input=','>\n          <var class="math-var">α</var>\n        </decidable-spinner>']),!this.interactive,this.a,this.aInput.bind(this)),t=(0,y.html)(s=s||m(['<decidable-spinner class="l bottom" ?disabled=',' min="0" step=".001" .value="','" @input=','>\n          <var class="math-var">λ</var>\n        </decidable-spinner>']),!this.interactive,this.l,this.lInput.bind(this)),(0,y.html)(l=l||m(['<decidable-spinner class="v bottom" disabled step=".001" .value="','">\n          <var class="math-var">v</var>\n        </decidable-spinner>']),+this.v.toFixed(3))):(r=(0,y.html)(u=u||m(['<var class="math-var x">x</var>'])),e=(0,y.html)(c=c||m(['<var class="math-var a">α</var>'])),t=(0,y.html)(f=f||m(['<var class="math-var l">λ</var>'])),(0,y.html)(d=d||m(['<var class="math-var v">v</var>']))),r=(0,y.html)(h=h||m(['\n      <tr>\n        <td rowspan="2">\n          ','<span class="equals">=</span><span class="brace tight">{</span>\n        </td>\n        <td class="left">\n          ','<sup class="exp">',"</sup>,&emsp;if ",'<span class="equals">&ge;</span>0\n        </td>\n      </tr>\n      <tr>\n        <td class="left">\n          <span class="minus tight">−</span>','<span class="paren tight">(</span><span class="minus tight">−</span>','<span class="paren tight">)</span><sup class="exp">',"</sup>,&emsp;if ",'<span class="equals">&lt;</span>0\n        </td>\n      </tr>']),n,r,e,r,t,r,e,r);return(0,y.html)(p=p||m(['\n      <div class="holder">\n        <table class="equation">\n          <tbody>\n            ',"\n          </tbody>\n        </table>\n      </div>"]),r)}}])&&b(e.prototype,t),n&&b(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=e,customElements.define("cpt-equation-xal2v",e)},{"./cpt-equation":1009,"@decidable/prospectable-math":1021,lit:616}],1014:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,a,s=e("lit"),l=(e=e("../cpt-element"))&&e.__esModule?e:{default:e};function u(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=p(n);return function(e,t){{if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=p(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(i,l.default);var e,t,n,r=h(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r.apply(this,arguments)}return e=i,n=[{key:"styles",get:function(){return[f(p(i),"styles",this),(0,s.css)(a=a||u(["\n        :host {\n          ---border: var(--border, 1px solid var(---color-border));\n          display: inline-block;\n\n          /* This makes IE11 happy */\n          width: 100%;\n\n          margin-bottom: 1rem;\n        }\n\n        .holder {\n          display: flex;\n        }\n\n        .body {\n          display: flex;\n\n          flex-wrap: wrap;\n\n          align-items: center;\n          justify-content: left;\n\n          padding: 0.625rem;\n\n          border: var(---border);\n          border-radius: 0.25rem;\n        }\n\n        .body ::slotted(*) {\n          margin: 0.625rem;\n        }\n\n        /* HACK: Sibling selectors not working with ::slotted */\n        /* .body > rdk-task + sdt-response,\n        ::slotted(rdk-task) + ::slotted(sdt-response) { */\n        .body ::slotted(sdt-response) {\n          margin-left: 0;\n        }\n\n        /* HACK: Sibling selectors not working with ::slotted */\n        /* .body > sdt-control + rdk-task,\n        ::slotted(sdt-control) + ::slotted(rdk-task) {\n          margin-left: 0;\n        } */\n        .body ::slotted(rdk-task) {\n          width: 10rem;\n          height: 10rem;\n          margin-left: 0;\n        }\n\n        .body ::slotted(decision-space),\n        .body ::slotted(cpt-space) {\n          width: 28rem;\n          height: 20rem;\n        }\n\n        .body ::slotted(cpt-value) {\n          width: 20rem;\n          height: 20rem;\n        }\n\n        .body ::slotted(cpt-probability) {\n          width: 20rem;\n          height: 20rem;\n        }\n      "]))]}}],(t=[{key:"render",value:function(){return(0,s.html)(o=o||u(['\n      <div class="holder">\n        <div class="body">\n          <slot>Empty!</slot>\n        </div>\n      </div>']))}}])&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=e,customElements.define("cpt-example",e)},{"../cpt-element":1008,lit:616}],1015:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(e=e("./cpt-example"))&&e.__esModule?e:{default:e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=u(n);return function(e,t){{if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=u(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(i,o.default);var e,t,n,r=l(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r.apply(this,arguments)}return e=i,(t=[{key:"firstUpdated",value:function(){var t=this;this.cptFit=this.querySelector("cpt-fit"),this.decisionControl=this.querySelector("decision-control"),this.decisionTask=this.querySelector("decision-task"),this.decisionResponse=this.querySelector("decision-response"),this.decisionSpace=this.querySelector("decision-space"),this.cptCalculation=this.querySelector("cpt-calculation"),this.cptProbability=this.querySelector("cpt-probability"),this.cptSpace=this.querySelector("cpt-space"),this.cptValue=this.querySelector("cpt-value"),this.cptFit&&this.cptFit.addEventListener("cpt-fit-update",function(e){t.cptProbability&&(t.cptProbability.g=e.detail.g),t.cptValue&&(t.cptValue.a=e.detail.a,t.cptValue.l=e.detail.l),t.decisionSpace&&(t.decisionSpace.a=e.detail.a,t.decisionSpace.l=e.detail.l,t.decisionSpace.g=e.detail.g)}),this.decisionControl&&(this.decisionControl.hasAttribute("trials")&&this.decisionControl.addEventListener("decision-control-trials",function(e){t.decisionTask&&(t.decisionTask.trials=e.detail.trials),t.decisionResponse&&(t.decisionResponse.trialTotal=e.detail.trials)}),this.decisionControl.hasAttribute("duration")&&this.decisionControl.addEventListener("decision-control-duration",function(e){t.decisionTask&&(t.decisionTask.duration=e.detail.duration,t.decisionTask.iti=e.detail.duration)}),this.decisionControl.hasAttribute("run")&&this.decisionControl.addEventListener("decision-control-run",function(){t.decisionTask&&(t.decisionTask.running=!0)}),this.decisionControl.hasAttribute("pause")&&this.decisionControl.addEventListener("decision-control-pause",function(){t.decisionTask&&(t.decisionTask.running=!1)}),this.decisionControl.hasAttribute("reset")&&this.decisionControl.addEventListener("decision-control-reset",function(){t.decisionTask&&t.decisionTask.reset(),t.decisionResponse&&t.decisionResponse.reset(),t.decisionSpace&&t.decisionSpace.clear(),t.cptFit&&t.cptFit.clear()})),this.decisionTask&&(this.decisionResponse&&(this.decisionResponse.trialTotal=this.decisionTask.trials),this.decisionTask.addEventListener("decision-trial-start",function(e){t.decisionResponse&&t.decisionResponse.start(e.detail.xl,e.detail.xw,e.detail.pw,e.detail.xs,e.detail.gamblePayoff,e.detail.surePayoff,e.detail.better,e.detail.trial)}),this.decisionTask.addEventListener("decision-trial-end",function(){t.decisionResponse&&t.decisionResponse.stop()}),this.decisionTask.addEventListener("decision-block-end",function(){t.decisionControl&&t.decisionControl.complete()})),this.decisionResponse&&this.decisionResponse.addEventListener("decision-response",function(e){t.decisionSpace&&t.decisionSpace.set(e.detail.xw,e.detail.pw,e.detail.xs,e.detail.response,e.detail.trial.toString(),e.detail.trial.toString()),t.cptFit&&t.cptFit.set(e.detail.xl,e.detail.xw,e.detail.pw,e.detail.xs,e.detail.response,e.detail.trial.toString(),e.detail.trial.toString())})}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=e,customElements.define("cpt-example-human",e)},{"./cpt-example":1014}],1016:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"CPTExampleHuman",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"CPTExampleInteractive",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"CPTExampleModel",{enumerable:!0,get:function(){return o.default}});var r=a(e("./human")),i=a(e("./interactive")),o=a(e("./model"));function a(e){return e&&e.__esModule?e:{default:e}}},{"./human":1015,"./interactive":1017,"./model":1018}],1017:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(e=e("./cpt-example"))&&e.__esModule?e:{default:e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=c(n);return function(e,t){{if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=c(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(i,o.default);var e,t,n,r=u(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).a=.8,e.l=1.2,e.g=.8,e.xl=0,e.xw=20,e.pw=.5,e.xs=10,e.cptCalculation=null,e.cptProbability=null,e.cptSpace=null,e.cptValue=null,e.decisionChoice=null,e.decisionSpace=null,e}return e=i,n=[{key:"properties",get:function(){return{a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}}],(t=[{key:"firstUpdated",value:function(){var t=this;this.cptCalculation=this.querySelector("cpt-calculation"),this.cptProbability=this.querySelector("cpt-probability"),this.cptSpace=this.querySelector("cpt-space"),this.cptValue=this.querySelector("cpt-value"),this.decisionChoice=this.querySelector("decision-choice"),this.decisionSpace=this.querySelector("decision-space"),this.cptCalculation&&this.cptCalculation.addEventListener("cpt-calculation-change",function(e){t.a=e.detail.a,t.l=e.detail.l,t.g=e.detail.g,t.xl=e.detail.xl,t.xw=e.detail.xw,t.pw=e.detail.pw,t.xs=e.detail.xs}),this.cptProbability&&this.cptProbability.addEventListener("cpt-probability-change",function(e){t.g=e.detail.g,t.pw=e.detail.p}),this.cptValue&&this.cptValue.addEventListener("cpt-value-change",function(e){t.a=e.detail.a,t.l=e.detail.l,"default"===e.detail.name?t.xs=e.detail.x:"gamble"===e.detail.name&&(t.xw=e.detail.x)}),this.decisionChoice&&this.decisionChoice.addEventListener("decision-choice-change",function(e){t.xl=e.detail.xl,t.xw=e.detail.xw,t.pw=e.detail.pw,t.xs=e.detail.xs}),this.requestUpdate()}},{key:"update",value:function(e){s(c(i.prototype),"update",this).call(this,e),this.cptCalculation&&(this.cptCalculation.a=this.a,this.cptCalculation.l=this.l,this.cptCalculation.g=this.g,this.cptCalculation.xl=this.xl,this.cptCalculation.xw=this.xw,this.cptCalculation.pw=this.pw,this.cptCalculation.xs=this.xs),this.cptProbability&&this.cptProbability.set(this.pw,this.g,"default",""),this.cptSpace&&(this.cptSpace.a=this.a,this.cptSpace.l=this.l,this.cptSpace.g=this.g,this.cptSpace.xl=this.xl,this.cptSpace.xw=this.xw,this.cptSpace.pw=this.pw,this.cptSpace.xs=this.xs),this.cptValue&&(this.cptValue.set(this.xs,this.a,this.l,"default","s"),this.cptValue.set(this.xw,this.a,this.l,"gamble","g")),this.decisionChoice&&(this.decisionChoice.xl=this.xl,this.decisionChoice.xw=this.xw,this.decisionChoice.pw=this.pw,this.decisionChoice.xs=this.xs),this.decisionSpace&&(this.decisionSpace.a=this.a,this.decisionSpace.l=this.l,this.decisionSpace.g=this.g,this.decisionSpace.xl=this.xl,this.decisionSpace.xw=this.xw,this.decisionSpace.pw=this.pw,this.decisionSpace.xs=this.xs)}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=e,customElements.define("cpt-example-interactive",e)},{"./cpt-example":1014}],1018:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("@decidable/prospectable-math")),a=r(e("./cpt-example"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){t=Object.getOwnPropertyDescriptor(r,t);return t.get?t.get.call(arguments.length<3?e:n):t.value}}).apply(this,arguments)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=f(n);return function(e,t){{if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=f(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(i,a.default);var e,t,n,r=c(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).a=.8,e.l=1.2,e.g=.8,e.xl=0,e.xw=20,e.pw=.5,e.xs=10,e.cptCalculation=null,e.cptProbability=null,e.cptSpace=null,e.cptValue=null,e.decisionControl=null,e.decisionResponse=null,e.decisionSpace=null,e.decisionTask=null,e}return e=i,n=[{key:"properties",get:function(){return{a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0}}}}],(t=[{key:"firstUpdated",value:function(){var n=this;this.cptCalculation=this.querySelector("cpt-calculation"),this.cptProbability=this.querySelector("cpt-probability"),this.cptSpace=this.querySelector("cpt-space"),this.cptValue=this.querySelector("cpt-value"),this.decisionControl=this.querySelector("decision-control"),this.decisionResponse=this.querySelector("decision-response"),this.decisionSpace=this.querySelector("decision-space"),this.decisionTask=this.querySelector("decision-task"),this.cptProbability&&(this.cptProbability.addEventListener("cpt-probability-change",function(e){n.g=e.detail.g}),this.cptProbability.addEventListener("decision-response",function(e){n.decisionResponse&&n.decisionResponse.responded(e.detail.response),n.decisionSpace&&n.decisionSpace.set(e.detail.xw,e.detail.pw,e.detail.xs,e.detail.response,e.detail.trial.toString(),e.detail.trial.toString())})),this.cptValue&&(this.cptValue.addEventListener("cpt-value-change",function(e){n.a=e.detail.a,n.l=e.detail.l}),this.cptProbability||this.cptValue.addEventListener("decision-response",function(e){n.decisionResponse&&n.decisionResponse.responded(e.detail.response),n.decisionSpace&&n.decisionSpace.set(e.detail.xw,e.detail.pw,e.detail.xs,e.detail.response,e.detail.trial.toString(),e.detail.trial.toString())})),this.decisionControl&&(this.decisionControl.hasAttribute("trials")&&this.decisionControl.addEventListener("decision-control-trials",function(e){n.decisionTask&&(n.decisionTask.trials=e.detail.trials),n.decisionResponse&&(n.decisionResponse.trialTotal=e.detail.trials)}),this.decisionControl.hasAttribute("duration")&&this.decisionControl.addEventListener("decision-control-duration",function(e){n.decisionTask&&(n.decisionTask.duration=e.detail.duration,n.decisionTask.iti=e.detail.duration)}),this.decisionControl.hasAttribute("run")&&this.decisionControl.addEventListener("decision-control-run",function(){n.cptProbability&&n.cptProbability.resumeTrial(),n.cptValue&&n.cptValue.resumeTrial(),n.decisionTask&&(n.decisionTask.running=!0)}),this.decisionControl.hasAttribute("pause")&&this.decisionControl.addEventListener("decision-control-pause",function(){n.cptProbability&&n.cptProbability.pauseTrial(),n.cptValue&&n.cptValue.pauseTrial(),n.decisionTask&&(n.decisionTask.running=!1)}),this.decisionControl.hasAttribute("reset")&&this.decisionControl.addEventListener("decision-control-reset",function(){n.cptProbability&&n.cptProbability.clear(),n.cptValue&&n.cptValue.clear(),n.decisionTask&&n.decisionTask.reset(),n.decisionResponse&&n.decisionResponse.reset(),n.decisionSpace&&n.decisionSpace.clear()})),this.decisionTask&&(this.decisionResponse&&(this.decisionResponse.trialTotal=this.decisionTask.trials),this.decisionTask.addEventListener("decision-trial-start",function(e){n.decisionResponse&&n.decisionResponse.start(e.detail.xl,e.detail.xw,e.detail.pw,e.detail.xs,e.detail.gamblePayoff,e.detail.surePayoff,e.detail.better,e.detail.trial),n.vw=o.default.xal2v(n.xw,n.a,n.l),n.vl=o.default.xal2v(n.xl,n.a,n.l),n.ww=o.default.pg2w(n.pw,n.g),n.wl=1-n.ww,n.vs=o.default.xal2v(n.xs,n.a,n.l),n.ug=n.vw*n.ww+n.vl*n.wl,n.us=n.vs;var t=o.default.xal2v(e.detail.xw,n.a,n.l)*o.default.pg2w(e.detail.pw,n.g)+o.default.xal2v(e.detail.xl,n.a,n.l)*(1-o.default.pg2w(e.detail.pw,n.g))>o.default.xal2v(e.detail.xs,n.a,n.l)?"gamble":"sure";n.cptProbability&&n.cptProbability.trial(e.detail.xl,e.detail.xw,e.detail.pw,e.detail.xs,e.detail.trial,t),n.cptValue&&n.cptValue.trial(e.detail.xl,e.detail.xw,e.detail.pw,e.detail.xs,e.detail.trial,t)}),this.decisionTask.addEventListener("decision-trial-end",function(){n.decisionResponse&&n.decisionResponse.stop()}),this.decisionTask.addEventListener("decision-block-end",function(){n.decisionControl&&n.decisionControl.complete()})),this.requestUpdate()}},{key:"update",value:function(e){l(f(i.prototype),"update",this).call(this,e),this.cptCalculation&&(this.cptCalculation.a=this.a,this.cptCalculation.l=this.l,this.cptCalculation.g=this.g),this.cptProbability&&(this.cptProbability.g=this.g),this.cptSpace&&(this.cptSpace.a=this.a,this.cptSpace.l=this.l,this.cptSpace.g=this.g),this.cptValue&&(this.cptValue.a=this.a,this.cptValue.l=this.l),this.decisionSpace&&(this.decisionSpace.a=this.a,this.decisionSpace.l=this.l,this.decisionSpace.g=this.g)}}])&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=e,customElements.define("cpt-example-model",e)},{"./cpt-example":1014,"@decidable/prospectable-math":1021}],1019:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={CPTElement:!0};Object.defineProperty(n,"CPTElement",{enumerable:!0,get:function(){return o.default}});var i,o=(i=e("./cpt-element"))&&i.__esModule?i:{default:i},a=e("./components");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))});var s=e("./equations");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in n&&n[e]===s[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}}))});var l=e("./examples");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in n&&n[e]===l[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return l[e]}}))})},{"./components":1006,"./cpt-element":1008,"./equations":1010,"./examples":1016}],1020:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"xal2v",value:function(e,t,n){return 0<=e?Math.pow(e,t):-n*Math.pow(-e,t)}},{key:"xlv2a",value:function(e,t,n){return 0<=e?Math.log(n)/Math.log(e):(Math.log(-n)-Math.log(t))/Math.log(-e)}},{key:"xav2l",value:function(e,t,n){return 0<=e?1:-n/Math.pow(-e,t)}},{key:"pg2w",value:function(e,t){return Math.pow(e,t)/Math.pow(Math.pow(e,t)+Math.pow(1-e,t),1/t)}}],(n=null)&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},{}],1021:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;e=((e=e("./cpt-math"))&&e.__esModule?e:{default:e}).default;n.default=e},{"./cpt-math":1020}]},{},[1019])(1019)});
//# sourceMappingURL=index.js.map
