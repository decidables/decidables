{"version":3,"sources":["examples/human.js"],"names":["SDTExampleHuman","count","sdtControl","querySelector","rdkTask","sdtResponse","sdtTable","rocSpace","sdtModel","hasAttribute","set","addEventListener","event","trials","detail","trialTotal","duration","wait","iti","coherence","hPayoff","payoff","mPayoff","faPayoff","crPayoff","running","reset","h","m","fa","cr","hr","far","d","c","start","signal","trial","stop","complete","newhr","SDTExample","hm2hr","newfar","facr2far","hrfar2d","hrfar2c","customElements","define"],"mappings":"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","sourcesContent":["\nimport SDTExample from './sdt-example';\n\n/*\n  SDTExample_Human element\n  <sdt-example-human>\n*/\nexport default class SDTExampleHuman extends SDTExample {\n  firstUpdated(/* changedProperties */) {\n    this.count = 1;\n\n    this.sdtControl = this.querySelector('sdt-control');\n    this.rdkTask = this.querySelector('rdk-task');\n    this.sdtResponse = this.querySelector('sdt-response');\n    this.sdtTable = this.querySelector('sdt-table');\n    this.rocSpace = this.querySelector('roc-space');\n    this.sdtModel = this.querySelector('sdt-model');\n\n    if (this.rocSpace) {\n      if (this.rocSpace.hasAttribute('history')) {\n        this.rocSpace.set(0.5, 0.5, 'default', this.count);\n      }\n    }\n\n    if (this.sdtControl && this.sdtControl.hasAttribute('trials')) {\n      this.sdtControl.addEventListener('sdt-control-trials', (event) => {\n        if (this.rdkTask) {\n          this.rdkTask.trials = event.detail.trials;\n        }\n\n        if (this.sdtResponse) {\n          this.sdtResponse.trialTotal = event.detail.trials;\n        }\n      });\n    }\n\n    if (this.sdtControl && this.sdtControl.hasAttribute('duration')) {\n      this.sdtControl.addEventListener('sdt-control-duration', (event) => {\n        if (this.rdkTask) {\n          this.rdkTask.duration = event.detail.duration;\n          this.rdkTask.wait = event.detail.duration;\n          this.rdkTask.iti = event.detail.duration;\n        }\n      });\n    }\n\n    if (this.sdtControl && this.sdtControl.hasAttribute('coherence')) {\n      this.sdtControl.addEventListener('sdt-control-coherence', (event) => {\n        if (this.rdkTask) {\n          this.rdkTask.coherence = event.detail.coherence;\n        }\n      });\n    }\n\n    if (this.sdtControl && this.sdtControl.hasAttribute('payoff')) {\n      this.sdtControl.addEventListener('sdt-control-payoff', (event) => {\n        if (this.sdtResponse) {\n          this.sdtResponse.hPayoff = event.detail.payoff;\n          this.sdtResponse.mPayoff = -event.detail.payoff + 0; // Get rid of -0\n          this.sdtResponse.faPayoff = -(100 - event.detail.payoff) + 0; // Get rid of -0\n          this.sdtResponse.crPayoff = (100 - event.detail.payoff);\n        }\n        if (this.sdtTable) {\n          this.sdtTable.hPayoff = event.detail.payoff;\n          this.sdtTable.mPayoff = -event.detail.payoff + 0; // Get rid of -0\n          this.sdtTable.faPayoff = -(100 - event.detail.payoff) + 0; // Get rid of -0\n          this.sdtTable.crPayoff = (100 - event.detail.payoff);\n        }\n      });\n    }\n\n    if (this.sdtControl && this.sdtControl.hasAttribute('run')) {\n      this.sdtControl.addEventListener('sdt-control-run', (/* event */) => {\n        if (this.rdkTask) {\n          this.rdkTask.running = true;\n        }\n      });\n    }\n\n    if (this.sdtControl && this.sdtControl.hasAttribute('pause')) {\n      this.sdtControl.addEventListener('sdt-control-pause', (/* event */) => {\n        if (this.rdkTask) {\n          this.rdkTask.running = false;\n        }\n      });\n    }\n\n    if (this.sdtControl && this.sdtControl.hasAttribute('reset')) {\n      this.sdtControl.addEventListener('sdt-control-reset', (/* event */) => {\n        if (this.rdkTask) {\n          this.rdkTask.reset();\n        }\n\n        if (this.sdtResponse) {\n          this.sdtResponse.reset();\n        }\n\n        if (this.sdtTable) {\n          this.sdtTable.h = 0;\n          this.sdtTable.m = 0;\n          this.sdtTable.fa = 0;\n          this.sdtTable.cr = 0;\n        }\n\n        if (this.rocSpace) {\n          if (this.rocSpace.hasAttribute('history')) {\n            this.count += 1;\n            this.rocSpace.set(0.5, 0.5, `point${this.count}`, this.count);\n          } else {\n            this.rocSpace.hr = 0.5;\n            this.rocSpace.far = 0.5;\n          }\n        }\n\n        if (this.sdtModel) {\n          this.sdtModel.d = 0;\n          this.sdtModel.c = 0;\n        }\n      });\n    }\n\n    if (this.rdkTask) {\n      if (this.sdtResponse) {\n        this.sdtResponse.trialTotal = this.rdkTask.trials;\n      }\n    }\n\n    if (this.rdkTask) {\n      this.rdkTask.addEventListener('rdk-trial-start', (event) => {\n        if (this.sdtResponse) {\n          this.sdtResponse.start(event.detail.signal, event.detail.trial);\n        }\n      });\n    }\n\n    if (this.rdkTask) {\n      this.rdkTask.addEventListener('rdk-trial-end', (/* event */) => {\n        if (this.sdtResponse) {\n          this.sdtResponse.stop();\n        }\n      });\n    }\n\n    if (this.rdkTask) {\n      this.rdkTask.addEventListener('rdk-block-end', (/* event */) => {\n        if (this.sdtControl) {\n          this.sdtControl.complete();\n        }\n      });\n    }\n\n    if (this.sdtResponse) {\n      this.sdtResponse.addEventListener('sdt-response', (event) => {\n        if (this.sdtTable) {\n          this.sdtTable.h = event.detail.h;\n          this.sdtTable.m = event.detail.m;\n          this.sdtTable.fa = event.detail.fa;\n          this.sdtTable.cr = event.detail.cr;\n        }\n\n        const newhr = SDTExample.hm2hr((event.detail.h + 1), (event.detail.m + 1));\n        const newfar = SDTExample.facr2far((event.detail.fa + 1), (event.detail.cr + 1));\n\n        if (this.rocSpace) {\n          if (this.rocSpace.hasAttribute('history')) {\n            this.rocSpace.set(newhr, newfar, (this.count === 1) ? 'default' : `point${this.count}`, this.count);\n          } else {\n            this.rocSpace.hr = newhr;\n            this.rocSpace.far = newfar;\n          }\n        }\n\n        if (this.sdtModel) {\n          this.sdtModel.d = SDTExample.hrfar2d(newhr, newfar);\n          this.sdtModel.c = SDTExample.hrfar2c(newhr, newfar);\n        }\n      });\n    }\n  }\n}\n\ncustomElements.define('sdt-example-human', SDTExampleHuman);\n"],"file":"human.js"}