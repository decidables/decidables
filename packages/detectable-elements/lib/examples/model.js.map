{"version":3,"sources":["examples/model.js"],"names":["SDTExampleModel","count","sdtControl","querySelector","rdkTask","sdtModel","sdtResponse","sdtTable","rocSpace","hasAttribute","addEventListener","event","color","detail","duration","wait","iti","trials","trialTotal","coherence","running","resumeTrial","pauseTrial","reset","h","m","fa","cr","set","hr","far","start","signal","trial","stop","complete","responded","response","SDTExample","hm2hr","facr2far","customElements","define"],"mappings":"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","sourcesContent":["\nimport SDTExample from './sdt-example';\n\n/*\n  SDTExample_Model element\n  <sdt-example-model>\n*/\nexport default class SDTExampleModel extends SDTExample {\n  firstUpdated(/* changedProperties */) {\n    this.count = 1;\n\n    this.sdtControl = this.querySelector('sdt-control');\n    this.rdkTask = this.querySelector('rdk-task');\n    this.sdtModel = this.querySelector('sdt-model');\n    this.sdtResponse = this.querySelector('sdt-response');\n    this.sdtTable = this.querySelector('sdt-table');\n    this.rocSpace = this.querySelector('roc-space');\n\n    if (this.sdtControl && this.sdtControl.hasAttribute('color')) {\n      this.sdtControl.addEventListener('sdt-control-color', (event) => {\n        if (this.sdtModel) {\n          this.sdtModel.color = event.detail.color;\n        }\n\n        if (this.sdtTable) {\n          this.sdtTable.color = event.detail.color;\n        }\n      });\n    }\n\n    if (this.sdtControl && this.sdtControl.hasAttribute('duration')) {\n      this.sdtControl.addEventListener('sdt-control-duration', (event) => {\n        if (this.rdkTask) {\n          this.rdkTask.duration = event.detail.duration;\n          this.rdkTask.wait = event.detail.duration;\n          this.rdkTask.iti = event.detail.duration;\n        }\n      });\n    }\n\n    if (this.sdtControl && this.sdtControl.hasAttribute('trials')) {\n      this.sdtControl.addEventListener('sdt-control-trials', (event) => {\n        if (this.rdkTask) {\n          this.rdkTask.trials = event.detail.trials;\n        }\n\n        if (this.sdtResponse) {\n          this.sdtResponse.trialTotal = event.detail.trials;\n        }\n      });\n    }\n\n    if (this.sdtControl && this.sdtControl.hasAttribute('coherence')) {\n      this.sdtControl.addEventListener('sdt-control-coherence', (event) => {\n        if (this.rdkTask) {\n          this.rdkTask.coherence = event.detail.coherence;\n        }\n      });\n    }\n\n    if (this.sdtControl && this.sdtControl.hasAttribute('run')) {\n      this.sdtControl.addEventListener('sdt-control-run', (/* event */) => {\n        if (this.rdkTask) {\n          this.rdkTask.running = true;\n        }\n        if (this.sdtModel) {\n          this.sdtModel.resumeTrial();\n        }\n      });\n    }\n\n    if (this.sdtControl && this.sdtControl.hasAttribute('pause')) {\n      this.sdtControl.addEventListener('sdt-control-pause', (/* event */) => {\n        if (this.rdkTask) {\n          this.rdkTask.running = false;\n        }\n        if (this.sdtModel) {\n          this.sdtModel.pauseTrial();\n        }\n      });\n    }\n\n    if (this.sdtControl && this.sdtControl.hasAttribute('reset')) {\n      this.sdtControl.addEventListener('sdt-control-reset', (/* event */) => {\n        if (this.rdkTask) {\n          this.rdkTask.reset();\n        }\n\n        if (this.sdtResponse) {\n          this.sdtResponse.reset();\n        }\n\n        if (this.sdtModel) {\n          this.sdtModel.reset();\n        }\n\n        if (this.sdtTable) {\n          this.sdtTable.h = 0;\n          this.sdtTable.m = 0;\n          this.sdtTable.fa = 0;\n          this.sdtTable.cr = 0;\n        }\n\n        if (this.rocSpace) {\n          if (this.rocSpace.hasAttribute('history')) {\n            this.count += 1;\n            this.rocSpace.set(0.5, 0.5, `point${this.count}`, '', 1);\n          } else {\n            this.rocSpace.hr = 0.5;\n            this.rocSpace.far = 0.5;\n          }\n        }\n      });\n    }\n\n    if (this.rdkTask) {\n      if (this.sdtResponse) {\n        this.sdtResponse.trialTotal = this.rdkTask.trials;\n      }\n    }\n\n    if (this.rdkTask) {\n      this.rdkTask.addEventListener('rdk-trial-start', (event) => {\n        if (this.sdtResponse) {\n          this.sdtResponse.start(event.detail.signal, event.detail.trial);\n        }\n        if (this.sdtModel) {\n          this.sdtModel.trial(\n            event.detail.trial,\n            event.detail.signal,\n            event.detail.duration,\n            event.detail.wait,\n            event.detail.iti,\n          );\n        }\n      });\n    }\n\n    if (this.rdkTask) {\n      this.rdkTask.addEventListener('rdk-trial-middle', (/* event */) => {\n        // if (this.sdtModel) {\n        //   this.sdtModel.trial(event.detail.trial, event.detail.signal);\n        // }\n      });\n    }\n\n    if (this.rdkTask) {\n      this.rdkTask.addEventListener('rdk-trial-end', (/* event */) => {\n        if (this.sdtResponse) {\n          this.sdtResponse.stop();\n        }\n      });\n    }\n\n    if (this.rdkTask) {\n      this.rdkTask.addEventListener('rdk-block-end', (/* event */) => {\n        if (this.sdtControl) {\n          this.sdtControl.complete();\n        }\n      });\n    }\n\n    if (this.sdtModel) {\n      this.sdtModel.addEventListener('sdt-response', (event) => {\n        if (this.sdtResponse) {\n          this.sdtResponse.responded(event.detail.response);\n        }\n\n        if (this.sdtTable) {\n          this.sdtTable.h = event.detail.h;\n          this.sdtTable.m = event.detail.m;\n          this.sdtTable.fa = event.detail.fa;\n          this.sdtTable.cr = event.detail.cr;\n        }\n\n        if (this.rocSpace) {\n          this.rocSpace.hr = SDTExample.hm2hr((event.detail.h), (event.detail.m));\n          this.rocSpace.far = SDTExample.facr2far((event.detail.fa), (event.detail.cr));\n        }\n      });\n    }\n\n    if (this.sdtModel) {\n      this.sdtModel.addEventListener('sdt-model-change', (event) => {\n        if (this.sdtTable) {\n          this.sdtTable.h = event.detail.h;\n          this.sdtTable.m = event.detail.m;\n          this.sdtTable.fa = event.detail.fa;\n          this.sdtTable.cr = event.detail.cr;\n        }\n\n        if (this.rocSpace) {\n          this.rocSpace.hr = SDTExample.hm2hr((event.detail.h), (event.detail.m));\n          this.rocSpace.far = SDTExample.facr2far((event.detail.fa), (event.detail.cr));\n        }\n      });\n    }\n  }\n}\n\ncustomElements.define('sdt-example-model', SDTExampleModel);\n"],"file":"model.js"}