{"version":3,"sources":["sdt-math.js"],"names":["SDTMath","h","m","fa","cr","hr","far","s","jStat","normal","inv","Math","sqrt","d","c","cdf","muN","muS","l","PI","zhr","zfar"],"mappings":"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","sourcesContent":["\nimport * as jStat from 'jstat';\n\n/*\n  SDTMath Static Class - Not intended for instantiation!\n\n  Variables:\n    H = hits\n    M = misses\n    FA = false alarms\n    CR = correct rejections\n    HR = hit rate\n    FAR = false alarm rate\n    ACC = accuracy\n    PPV = positive predictive value\n    FOMR = false omission rate (used FOMR to avoid keyword FOR!)\n    d = sensitivity (d' for equal variance, d_a for unequal variance)\n    c = response bias (c for equal variance, c_a for unequal variance)\n    s = standard deviation of signal distribution, with standard deviation of noise distribution = 1\n    muN = mean of noise distribution\n    muS = mean of signal distribution\n    l = lambda, threshold location, with l = 0 indicating no response bias\n    h = height of signal distribution\n\n  Equations (* = unequal variance):\n    HR = H / (H + M)\n    FAR = FA / (FA + CR)\n    ACC = (H + CR) / (H + M + FA + CR)\n    ACC = (HR + (1 - FAR)) / 2\n    PPV = H / (H + FA)\n    FOMR = M / (M + CR)\n\n    d' = Z^-1(HR) - Z^-1(FAR)\n    *d' = (2 / (s^2 + 1))^(1/2) * (s * Z^-1(HR) - Z^-1(FAR))\n\n    c = -(Z^-1(HR) + Z^-1(FAR))/2\n    *c = (2 / (s^2 + 1))^(1/2) * (s / s + 1) * -(Z^-1(HR) + Z^-1(FAR))\n\n    HR = Z(d'/2 - c)\n    *HR = Z(((s^2 + 1) / 2)^(1/2) * (d' / (s + 1) - c / s))\n\n    FAR = Z(-d'/2 - c)\n    *FAR = Z(((s^2 + 1) / 2)^(1/2) * -(d' / (s + 1) + c))\n\n    HR = Z(d' + Z^-1(FAR))\n    *HR = Z(((s^2 + 1) / 2)^(1/2) * d' + Z^-1(FAR) / s)\n\n    HR = Z(-2c - Z^-1(FAR))\n    *HR = Z(-((s^2 + 1) / 2)^(1/2) * ((s + 1) / s) * c - Z^-1(FAR))\n\n    muN = -d'/2\n    *muN = -((s^2 + 1) / 2)^(1/2) * (1 / (s + 1)) * d'\n\n    d' = -2 * muN\n    *d' = -(2 / (s^2 + 1))^(1/2) * (s + 1) * muN\n\n    muS = d'/2\n    *muS = ((s^2 + 1) / 2)^(1/2) * (s / (s + 1)) * d'\n\n    d' = 2 * muS\n    *d' = (2 / (s^2 + 1))^(1/2) * ((s + 1) / s) * muS\n\n    l = c\n    l = ((s^2 + 1) / 2)^(1/2) * c\n\n    c = l\n    c = (2 / (s^2 + 1))^(1/2) * l\n\n    h = 1 / (s * (2 * pi)^(1/2))\n    s = 1 / (h * (2 * pi)^(1/2))\n*/\nexport default class SDTMath {\n  static hm2hr(h, m) {\n    if ((h === 0) && (m === 0)) {\n      return 0;\n    }\n    return h / (h + m);\n  }\n\n  static facr2far(fa, cr) {\n    if ((fa === 0) && (cr === 0)) {\n      return 0;\n    }\n    return fa / (fa + cr);\n  }\n\n  static hmfacr2acc(h, m, fa, cr) {\n    if ((h === 0) && (m === 0) && (fa === 0) && (cr === 0)) {\n      return 0;\n    }\n    return (h + cr) / (h + m + fa + cr);\n  }\n\n  static hrfar2acc(hr, far) {\n    return (hr + (1 - far)) / 2;\n  }\n\n  static hfa2ppv(h, fa) {\n    if ((h === 0) && (fa === 0)) {\n      return 0;\n    }\n    return h / (h + fa);\n  }\n\n  static mcr2fomr(m, cr) {\n    if ((m === 0) && (cr === 0)) {\n      return 0;\n    }\n    return m / (m + cr);\n  }\n\n  static hrfar2d(hr, far, s = 1) {\n    if (s === 1) return (jStat.normal.inv(hr, 0, 1) - jStat.normal.inv(far, 0, 1));\n    return (\n      Math.sqrt(2 / (s * s + 1))\n      * (s * jStat.normal.inv(hr, 0, 1) - jStat.normal.inv(far, 0, 1))\n    );\n  }\n\n  static hrfar2c(hr, far, s = 1) {\n    if (s === 1) return (-(jStat.normal.inv(hr, 0, 1) + jStat.normal.inv(far, 0, 1)) / 2);\n    return (\n      Math.sqrt(2 / (s * s + 1))\n      * (s / (s + 1))\n      * -(jStat.normal.inv(hr, 0, 1) + jStat.normal.inv(far, 0, 1))\n    );\n  }\n\n  static dc2hr(d, c, s = 1) {\n    if (s === 1) return (jStat.normal.cdf(d / 2 - c, 0, 1));\n    return (jStat.normal.cdf(Math.sqrt((s * s + 1) / 2) * (d / (1 + s) - c / s), 0, 1));\n  }\n\n  static dc2far(d, c, s = 1) {\n    if (s === 1) return (jStat.normal.cdf(-(d / 2 + c), 0, 1));\n    return (jStat.normal.cdf(Math.sqrt((s * s + 1) / 2) * -(d / (1 + s) + c), 0, 1));\n  }\n\n  static dfar2hr(d, far, s = 1) {\n    if (s === 1) return (jStat.normal.cdf(d + jStat.normal.inv(far, 0, 1), 0, 1));\n    return (jStat.normal.cdf(\n      (Math.sqrt((s * s + 1) / 2) * d + jStat.normal.inv(far, 0, 1)) / s,\n      0,\n      1,\n    ));\n  }\n\n  static cfar2hr(c, far, s = 1) {\n    if (s === 1) return (jStat.normal.cdf(-(2 * c) - jStat.normal.inv(far, 0, 1), 0, 1));\n    return (jStat.normal.cdf(\n      -Math.sqrt((s * s + 1) / 2) * ((s + 1) / s) * c - jStat.normal.inv(far, 0, 1),\n      0,\n      1,\n    ));\n  }\n\n  static d2muN(d, s = 1) {\n    if (s === 1) return -d / 2;\n    return -Math.sqrt((s * s + 1) / 2) * (1 / (s + 1)) * d;\n  }\n\n  static muN2d(muN, s = 1) {\n    if (s === 1) return -2 * muN;\n    return -Math.sqrt(2 / (s * s + 1)) * (s + 1) * muN;\n  }\n\n  static d2muS(d, s = 1) {\n    if (s === 1) return d / 2;\n    return Math.sqrt((s * s + 1) / 2) * (s / (s + 1)) * d;\n  }\n\n  static muS2d(muS, s = 1) {\n    if (s === 1) return 2 * muS;\n    return Math.sqrt(2 / (s * s + 1)) * ((s + 1) / s) * muS;\n  }\n\n  static c2l(c, s = 1) {\n    if (s === 1) return c;\n    return Math.sqrt((s * s + 1) / 2) * c;\n  }\n\n  static l2c(l, s = 1) {\n    if (s === 1) return l;\n    return Math.sqrt(2 / (s * s + 1)) * l;\n  }\n\n  static s2h(s = 1) {\n    return 1 / (s * Math.sqrt(2 * Math.PI));\n  }\n\n  static h2s(h) {\n    return 1 / (h * Math.sqrt(2 * Math.PI));\n  }\n\n  static hr2zhr(hr) {\n    return jStat.normal.inv(hr, 0, 1);\n  }\n\n  static far2zfar(far) {\n    return jStat.normal.inv(far, 0, 1);\n  }\n\n  static zhr2hr(zhr) {\n    return jStat.normal.cdf(zhr, 0, 1);\n  }\n\n  static zfar2far(zfar) {\n    return jStat.normal.cdf(zfar, 0, 1);\n  }\n}\n"],"file":"sdt-math.js"}