function _mergeNamespaces(t,e){return e.forEach((function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach((function(r){if("default"!==r&&!(r in t)){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}))})),Object.freeze(t)}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getAugmentedNamespace(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})})),e}function createCommonjsModule(t){var e={exports:{}};return t(e,e.exports),e.exports}function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var match,version$3,check=function(t){return t&&t.Math==Math&&t},global$1=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof commonjsGlobal&&commonjsGlobal)||function(){return this}()||Function("return this")(),path$1=global$1,fails=function(t){try{return!!t()}catch(t){return!0}},functionBindNative=!fails((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),FunctionPrototype$2=Function.prototype,bind$1=FunctionPrototype$2.bind,call$2=FunctionPrototype$2.call,uncurryThis=functionBindNative&&bind$1.bind(call$2,call$2),functionUncurryThis=functionBindNative?function(t){return t&&uncurryThis(t)}:function(t){return t&&function(){return call$2.apply(t,arguments)}},TypeError$k=global$1.TypeError,requireObjectCoercible=function(t){if(null==t)throw TypeError$k("Can't call method on "+t);return t},Object$6=global$1.Object,toObject=function(t){return Object$6(requireObjectCoercible(t))},hasOwnProperty=functionUncurryThis({}.hasOwnProperty),hasOwnProperty_1=Object.hasOwn||function(t,e){return hasOwnProperty(toObject(t),e)},isPure=!1,defineProperty$7=Object.defineProperty,setGlobal=function(t,e){try{defineProperty$7(global$1,t,{value:e,configurable:!0,writable:!0})}catch(r){global$1[t]=e}return e},SHARED="__core-js_shared__",store$1=global$1[SHARED]||setGlobal(SHARED,{}),sharedStore=store$1,shared=createCommonjsModule((function(t){(t.exports=function(t,e){return sharedStore[t]||(sharedStore[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.21.1",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})})),id$1=0,postfix=Math.random(),toString$2=functionUncurryThis(1..toString),uid=function(t){return"Symbol("+(void 0===t?"":t)+")_"+toString$2(++id$1+postfix,36)},isCallable=function(t){return"function"==typeof t},aFunction=function(t){return isCallable(t)?t:void 0},getBuiltIn=function(t,e){return arguments.length<2?aFunction(global$1[t]):global$1[t]&&global$1[t][e]},engineUserAgent=getBuiltIn("navigator","userAgent")||"",process$1=global$1.process,Deno=global$1.Deno,versions=process$1&&process$1.versions||Deno&&Deno.version,v8=versions&&versions.v8;v8&&(version$3=(match=v8.split("."))[0]>0&&match[0]<4?1:+(match[0]+match[1])),!version$3&&engineUserAgent&&(!(match=engineUserAgent.match(/Edge\/(\d+)/))||match[1]>=74)&&(match=engineUserAgent.match(/Chrome\/(\d+)/))&&(version$3=+match[1]);var engineV8Version=version$3,nativeSymbol=!!Object.getOwnPropertySymbols&&!fails((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&engineV8Version&&engineV8Version<41})),useSymbolAsUid=nativeSymbol&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,WellKnownSymbolsStore=shared("wks"),Symbol$1=global$1.Symbol,symbolFor=Symbol$1&&Symbol$1.for,createWellKnownSymbol=useSymbolAsUid?Symbol$1:Symbol$1&&Symbol$1.withoutSetter||uid,wellKnownSymbol=function(t){if(!hasOwnProperty_1(WellKnownSymbolsStore,t)||!nativeSymbol&&"string"!=typeof WellKnownSymbolsStore[t]){var e="Symbol."+t;nativeSymbol&&hasOwnProperty_1(Symbol$1,t)?WellKnownSymbolsStore[t]=Symbol$1[t]:WellKnownSymbolsStore[t]=useSymbolAsUid&&symbolFor?symbolFor(e):createWellKnownSymbol(e)}return WellKnownSymbolsStore[t]},f$9=wellKnownSymbol,wellKnownSymbolWrapped={f:f$9},descriptors=!fails((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),isObject=function(t){return"object"==typeof t?null!==t:isCallable(t)},document$1=global$1.document,EXISTS$1=isObject(document$1)&&isObject(document$1.createElement),documentCreateElement=function(t){return EXISTS$1?document$1.createElement(t):{}},ie8DomDefine=!descriptors&&!fails((function(){return 7!=Object.defineProperty(documentCreateElement("div"),"a",{get:function(){return 7}}).a})),v8PrototypeDefineBug=descriptors&&fails((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),String$6=global$1.String,TypeError$j=global$1.TypeError,anObject=function(t){if(isObject(t))return t;throw TypeError$j(String$6(t)+" is not an object")},call$1=Function.prototype.call,functionCall=functionBindNative?call$1.bind(call$1):function(){return call$1.apply(call$1,arguments)},objectIsPrototypeOf=functionUncurryThis({}.isPrototypeOf),Object$5=global$1.Object,isSymbol=useSymbolAsUid?function(t){return"symbol"==typeof t}:function(t){var e=getBuiltIn("Symbol");return isCallable(e)&&objectIsPrototypeOf(e.prototype,Object$5(t))},String$5=global$1.String,tryToString=function(t){try{return String$5(t)}catch(t){return"Object"}},TypeError$i=global$1.TypeError,aCallable=function(t){if(isCallable(t))return t;throw TypeError$i(tryToString(t)+" is not a function")},getMethod=function(t,e){var r=t[e];return null==r?void 0:aCallable(r)},TypeError$h=global$1.TypeError,ordinaryToPrimitive=function(t,e){var r,n;if("string"===e&&isCallable(r=t.toString)&&!isObject(n=functionCall(r,t)))return n;if(isCallable(r=t.valueOf)&&!isObject(n=functionCall(r,t)))return n;if("string"!==e&&isCallable(r=t.toString)&&!isObject(n=functionCall(r,t)))return n;throw TypeError$h("Can't convert object to primitive value")},TypeError$g=global$1.TypeError,TO_PRIMITIVE=wellKnownSymbol("toPrimitive"),toPrimitive=function(t,e){if(!isObject(t)||isSymbol(t))return t;var r,n=getMethod(t,TO_PRIMITIVE);if(n){if(void 0===e&&(e="default"),r=functionCall(n,t,e),!isObject(r)||isSymbol(r))return r;throw TypeError$g("Can't convert object to primitive value")}return void 0===e&&(e="number"),ordinaryToPrimitive(t,e)},toPropertyKey=function(t){var e=toPrimitive(t,"string");return isSymbol(e)?e:e+""},TypeError$f=global$1.TypeError,$defineProperty=Object.defineProperty,$getOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor,ENUMERABLE="enumerable",CONFIGURABLE$1="configurable",WRITABLE="writable",f$8=descriptors?v8PrototypeDefineBug?function(t,e,r){if(anObject(t),e=toPropertyKey(e),anObject(r),"function"==typeof t&&"prototype"===e&&"value"in r&&WRITABLE in r&&!r[WRITABLE]){var n=$getOwnPropertyDescriptor$1(t,e);n&&n[WRITABLE]&&(t[e]=r.value,r={configurable:CONFIGURABLE$1 in r?r[CONFIGURABLE$1]:n[CONFIGURABLE$1],enumerable:ENUMERABLE in r?r[ENUMERABLE]:n[ENUMERABLE],writable:!1})}return $defineProperty(t,e,r)}:$defineProperty:function(t,e,r){if(anObject(t),e=toPropertyKey(e),anObject(r),ie8DomDefine)try{return $defineProperty(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError$f("Accessors not supported");return"value"in r&&(t[e]=r.value),t},objectDefineProperty={f:f$8},defineProperty$6=objectDefineProperty.f,defineWellKnownSymbol=function(t){var e=path$1.Symbol||(path$1.Symbol={});hasOwnProperty_1(e,t)||defineProperty$6(e,t,{value:wellKnownSymbolWrapped.f(t)})};defineWellKnownSymbol("matchAll");var $propertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor$1&&!$propertyIsEnumerable.call({1:2},1),f$7=NASHORN_BUG?function(t){var e=getOwnPropertyDescriptor$1(this,t);return!!e&&e.enumerable}:$propertyIsEnumerable,objectPropertyIsEnumerable={f:f$7},createPropertyDescriptor=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},toString$1=functionUncurryThis({}.toString),stringSlice$8=functionUncurryThis("".slice),classofRaw=function(t){return stringSlice$8(toString$1(t),8,-1)},Object$4=global$1.Object,split$3=functionUncurryThis("".split),indexedObject=fails((function(){return!Object$4("z").propertyIsEnumerable(0)}))?function(t){return"String"==classofRaw(t)?split$3(t,""):Object$4(t)}:Object$4,toIndexedObject=function(t){return indexedObject(requireObjectCoercible(t))},$getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,f$6=descriptors?$getOwnPropertyDescriptor:function(t,e){if(t=toIndexedObject(t),e=toPropertyKey(e),ie8DomDefine)try{return $getOwnPropertyDescriptor(t,e)}catch(t){}if(hasOwnProperty_1(t,e))return createPropertyDescriptor(!functionCall(objectPropertyIsEnumerable.f,t,e),t[e])},objectGetOwnPropertyDescriptor={f:f$6},createNonEnumerableProperty=descriptors?function(t,e,r){return objectDefineProperty.f(t,e,createPropertyDescriptor(1,r))}:function(t,e,r){return t[e]=r,t},functionToString=functionUncurryThis(Function.toString);isCallable(sharedStore.inspectSource)||(sharedStore.inspectSource=function(t){return functionToString(t)});var set$4,get$3,has,inspectSource=sharedStore.inspectSource,WeakMap$2=global$1.WeakMap,nativeWeakMap=isCallable(WeakMap$2)&&/native code/.test(inspectSource(WeakMap$2)),keys$1=shared("keys"),sharedKey=function(t){return keys$1[t]||(keys$1[t]=uid(t))},hiddenKeys$1={},OBJECT_ALREADY_INITIALIZED="Object already initialized",TypeError$e=global$1.TypeError,WeakMap$1=global$1.WeakMap,enforce$1=function(t){return has(t)?get$3(t):set$4(t,{})},getterFor=function(t){return function(e){var r;if(!isObject(e)||(r=get$3(e)).type!==t)throw TypeError$e("Incompatible receiver, "+t+" required");return r}};if(nativeWeakMap||sharedStore.state){var store=sharedStore.state||(sharedStore.state=new WeakMap$1),wmget=functionUncurryThis(store.get),wmhas=functionUncurryThis(store.has),wmset=functionUncurryThis(store.set);set$4=function(t,e){if(wmhas(store,t))throw new TypeError$e(OBJECT_ALREADY_INITIALIZED);return e.facade=t,wmset(store,t,e),e},get$3=function(t){return wmget(store,t)||{}},has=function(t){return wmhas(store,t)}}else{var STATE=sharedKey("state");hiddenKeys$1[STATE]=!0,set$4=function(t,e){if(hasOwnProperty_1(t,STATE))throw new TypeError$e(OBJECT_ALREADY_INITIALIZED);return e.facade=t,createNonEnumerableProperty(t,STATE,e),e},get$3=function(t){return hasOwnProperty_1(t,STATE)?t[STATE]:{}},has=function(t){return hasOwnProperty_1(t,STATE)}}var internalState={set:set$4,get:get$3,has:has,enforce:enforce$1,getterFor:getterFor},FunctionPrototype$1=Function.prototype,getDescriptor=descriptors&&Object.getOwnPropertyDescriptor,EXISTS=hasOwnProperty_1(FunctionPrototype$1,"name"),PROPER=EXISTS&&"something"===function(){}.name,CONFIGURABLE=EXISTS&&(!descriptors||descriptors&&getDescriptor(FunctionPrototype$1,"name").configurable),functionName={EXISTS:EXISTS,PROPER:PROPER,CONFIGURABLE:CONFIGURABLE},redefine=createCommonjsModule((function(t){var e=functionName.CONFIGURABLE,r=internalState.get,n=internalState.enforce,i=String(String).split("String");(t.exports=function(t,r,a,o){var s,l=!!o&&!!o.unsafe,c=!!o&&!!o.enumerable,u=!!o&&!!o.noTargetGet,d=o&&void 0!==o.name?o.name:r;isCallable(a)&&("Symbol("===String(d).slice(0,7)&&(d="["+String(d).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!hasOwnProperty_1(a,"name")||e&&a.name!==d)&&createNonEnumerableProperty(a,"name",d),(s=n(a)).source||(s.source=i.join("string"==typeof d?d:""))),t!==global$1?(l?!u&&t[r]&&(c=!0):delete t[r],c?t[r]=a:createNonEnumerableProperty(t,r,a)):c?t[r]=a:setGlobal(r,a)})(Function.prototype,"toString",(function(){return isCallable(this)&&r(this).source||inspectSource(this)}))})),ceil=Math.ceil,floor$7=Math.floor,toIntegerOrInfinity=function(t){var e=+t;return e!=e||0===e?0:(e>0?floor$7:ceil)(e)},max$4=Math.max,min$3=Math.min,toAbsoluteIndex=function(t,e){var r=toIntegerOrInfinity(t);return r<0?max$4(r+e,0):min$3(r,e)},min$2=Math.min,toLength=function(t){return t>0?min$2(toIntegerOrInfinity(t),9007199254740991):0},lengthOfArrayLike=function(t){return toLength(t.length)},createMethod$2=function(t){return function(e,r,n){var i,a=toIndexedObject(e),o=lengthOfArrayLike(a),s=toAbsoluteIndex(n,o);if(t&&r!=r){for(;o>s;)if((i=a[s++])!=i)return!0}else for(;o>s;s++)if((t||s in a)&&a[s]===r)return t||s||0;return!t&&-1}},arrayIncludes={includes:createMethod$2(!0),indexOf:createMethod$2(!1)},indexOf$2=arrayIncludes.indexOf,push$7=functionUncurryThis([].push),objectKeysInternal=function(t,e){var r,n=toIndexedObject(t),i=0,a=[];for(r in n)!hasOwnProperty_1(hiddenKeys$1,r)&&hasOwnProperty_1(n,r)&&push$7(a,r);for(;e.length>i;)hasOwnProperty_1(n,r=e[i++])&&(~indexOf$2(a,r)||push$7(a,r));return a},enumBugKeys=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],hiddenKeys=enumBugKeys.concat("length","prototype"),f$5=Object.getOwnPropertyNames||function(t){return objectKeysInternal(t,hiddenKeys)},objectGetOwnPropertyNames={f:f$5},f$4=Object.getOwnPropertySymbols,objectGetOwnPropertySymbols={f:f$4},concat$3=functionUncurryThis([].concat),ownKeys=getBuiltIn("Reflect","ownKeys")||function(t){var e=objectGetOwnPropertyNames.f(anObject(t)),r=objectGetOwnPropertySymbols.f;return r?concat$3(e,r(t)):e},copyConstructorProperties=function(t,e,r){for(var n=ownKeys(e),i=objectDefineProperty.f,a=objectGetOwnPropertyDescriptor.f,o=0;o<n.length;o++){var s=n[o];hasOwnProperty_1(t,s)||r&&hasOwnProperty_1(r,s)||i(t,s,a(e,s))}},replacement=/#|\.prototype\./,isForced=function(t,e){var r=data$1[normalize$1(t)];return r==POLYFILL||r!=NATIVE&&(isCallable(e)?fails(e):!!e)},normalize$1=isForced.normalize=function(t){return String(t).replace(replacement,".").toLowerCase()},data$1=isForced.data={},NATIVE=isForced.NATIVE="N",POLYFILL=isForced.POLYFILL="P",isForced_1=isForced,getOwnPropertyDescriptor=objectGetOwnPropertyDescriptor.f,_export=function(t,e){var r,n,i,a,o,s=t.target,l=t.global,c=t.stat;if(r=l?global$1:c?global$1[s]||setGlobal(s,{}):(global$1[s]||{}).prototype)for(n in e){if(a=e[n],i=t.noTargetGet?(o=getOwnPropertyDescriptor(r,n))&&o.value:r[n],!isForced_1(l?n:s+(c?".":"#")+n,t.forced)&&void 0!==i){if(typeof a==typeof i)continue;copyConstructorProperties(a,i)}(t.sham||i&&i.sham)&&createNonEnumerableProperty(a,"sham",!0),redefine(r,n,a,t)}},FunctionPrototype=Function.prototype,apply=FunctionPrototype.apply,call=FunctionPrototype.call,functionApply="object"==typeof Reflect&&Reflect.apply||(functionBindNative?call.bind(apply):function(){return call.apply(apply,arguments)}),String$4=global$1.String,TypeError$d=global$1.TypeError,aPossiblePrototype=function(t){if("object"==typeof t||isCallable(t))return t;throw TypeError$d("Can't set "+String$4(t)+" as a prototype")},objectSetPrototypeOf=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=functionUncurryThis(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return anObject(r),aPossiblePrototype(n),e?t(r,n):r.__proto__=n,r}}():void 0),inheritIfRequired=function(t,e,r){var n,i;return objectSetPrototypeOf&&isCallable(n=e.constructor)&&n!==r&&isObject(i=n.prototype)&&i!==r.prototype&&objectSetPrototypeOf(t,i),t},TO_STRING_TAG$5=wellKnownSymbol("toStringTag"),test={};test[TO_STRING_TAG$5]="z";var toStringTagSupport="[object z]"===String(test),TO_STRING_TAG$4=wellKnownSymbol("toStringTag"),Object$3=global$1.Object,CORRECT_ARGUMENTS="Arguments"==classofRaw(function(){return arguments}()),tryGet=function(t,e){try{return t[e]}catch(t){}},classof=toStringTagSupport?classofRaw:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=tryGet(e=Object$3(t),TO_STRING_TAG$4))?r:CORRECT_ARGUMENTS?classofRaw(e):"Object"==(n=classofRaw(e))&&isCallable(e.callee)?"Arguments":n},String$3=global$1.String,toString=function(t){if("Symbol"===classof(t))throw TypeError("Cannot convert a Symbol value to a string");return String$3(t)},normalizeStringArgument=function(t,e){return void 0===t?arguments.length<2?"":e:toString(t)},installErrorCause=function(t,e){isObject(e)&&"cause"in e&&createNonEnumerableProperty(t,"cause",e.cause)},replace$5=functionUncurryThis("".replace),TEST=String(Error("zxcasd").stack),V8_OR_CHAKRA_STACK_ENTRY=/\n\s*at [^:]*:[^\n]*/,IS_V8_OR_CHAKRA_STACK=V8_OR_CHAKRA_STACK_ENTRY.test(TEST),clearErrorStack=function(t,e){if(IS_V8_OR_CHAKRA_STACK&&"string"==typeof t)for(;e--;)t=replace$5(t,V8_OR_CHAKRA_STACK_ENTRY,"");return t},errorStackInstallable=!fails((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",createPropertyDescriptor(1,7)),7!==t.stack)})),wrapErrorConstructorWithCause=function(t,e,r,n){var i=n?2:1,a=t.split("."),o=a[a.length-1],s=getBuiltIn.apply(null,a);if(s){var l=s.prototype;if(hasOwnProperty_1(l,"cause")&&delete l.cause,!r)return s;var c=getBuiltIn("Error"),u=e((function(t,e){var r=normalizeStringArgument(n?e:t,void 0),a=n?new s(t):new s;return void 0!==r&&createNonEnumerableProperty(a,"message",r),errorStackInstallable&&createNonEnumerableProperty(a,"stack",clearErrorStack(a.stack,2)),this&&objectIsPrototypeOf(l,this)&&inheritIfRequired(a,this,u),arguments.length>i&&installErrorCause(a,arguments[i]),a}));u.prototype=l,"Error"!==o&&(objectSetPrototypeOf?objectSetPrototypeOf(u,c):copyConstructorProperties(u,c,{name:!0})),copyConstructorProperties(u,s);try{l.name!==o&&createNonEnumerableProperty(l,"name",o),l.constructor=u}catch(t){}return u}},WEB_ASSEMBLY="WebAssembly",WebAssembly$1=global$1[WEB_ASSEMBLY],FORCED$4=7!==Error("e",{cause:7}).cause,exportGlobalErrorCauseWrapper=function(t,e){var r={};r[t]=wrapErrorConstructorWithCause(t,e,FORCED$4),_export({global:!0,forced:FORCED$4},r)},exportWebAssemblyErrorCauseWrapper=function(t,e){if(WebAssembly$1&&WebAssembly$1[t]){var r={};r[t]=wrapErrorConstructorWithCause(WEB_ASSEMBLY+"."+t,e,FORCED$4),_export({target:WEB_ASSEMBLY,stat:!0,forced:FORCED$4},r)}};exportGlobalErrorCauseWrapper("Error",(function(t){return function(e){return functionApply(t,this,arguments)}})),exportGlobalErrorCauseWrapper("EvalError",(function(t){return function(e){return functionApply(t,this,arguments)}})),exportGlobalErrorCauseWrapper("RangeError",(function(t){return function(e){return functionApply(t,this,arguments)}})),exportGlobalErrorCauseWrapper("ReferenceError",(function(t){return function(e){return functionApply(t,this,arguments)}})),exportGlobalErrorCauseWrapper("SyntaxError",(function(t){return function(e){return functionApply(t,this,arguments)}})),exportGlobalErrorCauseWrapper("TypeError",(function(t){return function(e){return functionApply(t,this,arguments)}})),exportGlobalErrorCauseWrapper("URIError",(function(t){return function(e){return functionApply(t,this,arguments)}})),exportWebAssemblyErrorCauseWrapper("CompileError",(function(t){return function(e){return functionApply(t,this,arguments)}})),exportWebAssemblyErrorCauseWrapper("LinkError",(function(t){return function(e){return functionApply(t,this,arguments)}})),exportWebAssemblyErrorCauseWrapper("RuntimeError",(function(t){return function(e){return functionApply(t,this,arguments)}}));var activeXDocument,correctPrototypeGetter=!fails((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),IE_PROTO$1=sharedKey("IE_PROTO"),Object$2=global$1.Object,ObjectPrototype$2=Object$2.prototype,objectGetPrototypeOf=correctPrototypeGetter?Object$2.getPrototypeOf:function(t){var e=toObject(t);if(hasOwnProperty_1(e,IE_PROTO$1))return e[IE_PROTO$1];var r=e.constructor;return isCallable(r)&&e instanceof r?r.prototype:e instanceof Object$2?ObjectPrototype$2:null},objectKeys$1=Object.keys||function(t){return objectKeysInternal(t,enumBugKeys)},f$3=descriptors&&!v8PrototypeDefineBug?Object.defineProperties:function(t,e){anObject(t);for(var r,n=toIndexedObject(e),i=objectKeys$1(e),a=i.length,o=0;a>o;)objectDefineProperty.f(t,r=i[o++],n[r]);return t},objectDefineProperties={f:f$3},html=getBuiltIn("document","documentElement"),GT=">",LT="<",PROTOTYPE$1="prototype",SCRIPT="script",IE_PROTO=sharedKey("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(t){return LT+SCRIPT+GT+t+LT+"/"+SCRIPT+GT},NullProtoObjectViaActiveX=function(t){t.write(scriptTag("")),t.close();var e=t.parentWindow.Object;return t=null,e},NullProtoObjectViaIFrame=function(){var t,e=documentCreateElement("iframe"),r="java"+SCRIPT+":";return e.style.display="none",html.appendChild(e),e.src=String(r),(t=e.contentWindow.document).open(),t.write(scriptTag("document.F=Object")),t.close(),t.F},NullProtoObject=function(){try{activeXDocument=new ActiveXObject("htmlfile")}catch(t){}NullProtoObject="undefined"!=typeof document?document.domain&&activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame():NullProtoObjectViaActiveX(activeXDocument);for(var t=enumBugKeys.length;t--;)delete NullProtoObject[PROTOTYPE$1][enumBugKeys[t]];return NullProtoObject()};hiddenKeys$1[IE_PROTO]=!0;var objectCreate=Object.create||function(t,e){var r;return null!==t?(EmptyConstructor[PROTOTYPE$1]=anObject(t),r=new EmptyConstructor,EmptyConstructor[PROTOTYPE$1]=null,r[IE_PROTO]=t):r=NullProtoObject(),void 0===e?r:objectDefineProperties.f(r,e)},bind=functionUncurryThis(functionUncurryThis.bind),functionBindContext=function(t,e){return aCallable(t),void 0===e?t:functionBindNative?bind(t,e):function(){return t.apply(e,arguments)}},iterators={},ITERATOR$7=wellKnownSymbol("iterator"),ArrayPrototype$1=Array.prototype,isArrayIteratorMethod=function(t){return void 0!==t&&(iterators.Array===t||ArrayPrototype$1[ITERATOR$7]===t)},ITERATOR$6=wellKnownSymbol("iterator"),getIteratorMethod=function(t){if(null!=t)return getMethod(t,ITERATOR$6)||getMethod(t,"@@iterator")||iterators[classof(t)]},TypeError$c=global$1.TypeError,getIterator=function(t,e){var r=arguments.length<2?getIteratorMethod(t):e;if(aCallable(r))return anObject(functionCall(r,t));throw TypeError$c(tryToString(t)+" is not iterable")},iteratorClose=function(t,e,r){var n,i;anObject(t);try{if(!(n=getMethod(t,"return"))){if("throw"===e)throw r;return r}n=functionCall(n,t)}catch(t){i=!0,n=t}if("throw"===e)throw r;if(i)throw n;return anObject(n),r},TypeError$b=global$1.TypeError,Result=function(t,e){this.stopped=t,this.result=e},ResultPrototype=Result.prototype,iterate=function(t,e,r){var n,i,a,o,s,l,c,u=r&&r.that,d=!(!r||!r.AS_ENTRIES),h=!(!r||!r.IS_ITERATOR),g=!(!r||!r.INTERRUPTED),f=functionBindContext(e,u),p=function(t){return n&&iteratorClose(n,"normal",t),new Result(!0,t)},m=function(t){return d?(anObject(t),g?f(t[0],t[1],p):f(t[0],t[1])):g?f(t,p):f(t)};if(h)n=t;else{if(!(i=getIteratorMethod(t)))throw TypeError$b(tryToString(t)+" is not iterable");if(isArrayIteratorMethod(i)){for(a=0,o=lengthOfArrayLike(t);o>a;a++)if((s=m(t[a]))&&objectIsPrototypeOf(ResultPrototype,s))return s;return new Result(!1)}n=getIterator(t,i)}for(l=n.next;!(c=functionCall(l,n)).done;){try{s=m(c.value)}catch(t){iteratorClose(n,"throw",t)}if("object"==typeof s&&s&&objectIsPrototypeOf(ResultPrototype,s))return s}return new Result(!1)},TO_STRING_TAG$3=wellKnownSymbol("toStringTag"),Error$3=global$1.Error,push$6=[].push,$AggregateError$1=function(t,e){var r,n=arguments.length>2?arguments[2]:void 0,i=objectIsPrototypeOf(AggregateErrorPrototype,this);objectSetPrototypeOf?r=objectSetPrototypeOf(new Error$3,i?objectGetPrototypeOf(this):AggregateErrorPrototype):(r=i?this:objectCreate(AggregateErrorPrototype),createNonEnumerableProperty(r,TO_STRING_TAG$3,"Error")),void 0!==e&&createNonEnumerableProperty(r,"message",normalizeStringArgument(e)),errorStackInstallable&&createNonEnumerableProperty(r,"stack",clearErrorStack(r.stack,1)),installErrorCause(r,n);var a=[];return iterate(t,push$6,{that:a}),createNonEnumerableProperty(r,"errors",a),r};objectSetPrototypeOf?objectSetPrototypeOf($AggregateError$1,Error$3):copyConstructorProperties($AggregateError$1,Error$3,{name:!0});var AggregateErrorPrototype=$AggregateError$1.prototype=objectCreate(Error$3.prototype,{constructor:createPropertyDescriptor(1,$AggregateError$1),message:createPropertyDescriptor(1,""),name:createPropertyDescriptor(1,"AggregateError")});_export({global:!0},{AggregateError:$AggregateError$1});var AGGREGATE_ERROR="AggregateError",$AggregateError=getBuiltIn(AGGREGATE_ERROR),FORCED$3=!fails((function(){return 1!==$AggregateError([1]).errors[0]}))&&fails((function(){return 7!==$AggregateError([1],AGGREGATE_ERROR,{cause:7}).cause}));_export({global:!0,forced:FORCED$3},{AggregateError:wrapErrorConstructorWithCause(AGGREGATE_ERROR,(function(t){return function(e,r){return functionApply(t,this,arguments)}}),FORCED$3,!0)});var UNSCOPABLES=wellKnownSymbol("unscopables"),ArrayPrototype=Array.prototype;null==ArrayPrototype[UNSCOPABLES]&&objectDefineProperty.f(ArrayPrototype,UNSCOPABLES,{configurable:!0,value:objectCreate(null)});var addToUnscopables=function(t){ArrayPrototype[UNSCOPABLES][t]=!0};_export({target:"Array",proto:!0},{at:function(t){var e=toObject(this),r=lengthOfArrayLike(e),n=toIntegerOrInfinity(t),i=n>=0?n:r+n;return i<0||i>=r?void 0:e[i]}}),addToUnscopables("at"),addToUnscopables("flat"),addToUnscopables("flatMap");var thisNumberValue=functionUncurryThis(1..valueOf),RangeError$9=global$1.RangeError,stringRepeat=function(t){var e=toString(requireObjectCoercible(this)),r="",n=toIntegerOrInfinity(t);if(n<0||n==1/0)throw RangeError$9("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(r+=e);return r},log$1=Math.log,LOG10E=Math.LOG10E,mathLog10=Math.log10||function(t){return log$1(t)*LOG10E},RangeError$8=global$1.RangeError,String$2=global$1.String,isFinite$1=global$1.isFinite,abs$2=Math.abs,floor$6=Math.floor,pow$2=Math.pow,round$1=Math.round,un$ToExponential=functionUncurryThis(1..toExponential),repeat=functionUncurryThis(stringRepeat),stringSlice$7=functionUncurryThis("".slice),ROUNDS_PROPERLY="-6.9000e-11"===un$ToExponential(-69e-12,4)&&"1.25e+0"===un$ToExponential(1.255,2)&&"1.235e+4"===un$ToExponential(12345,3)&&"3e+1"===un$ToExponential(25,0),THROWS_ON_INFINITY_FRACTION=fails((function(){un$ToExponential(1,1/0)}))&&fails((function(){un$ToExponential(1,-1/0)})),PROPER_NON_FINITE_THIS_CHECK=!fails((function(){un$ToExponential(1/0,1/0)}))&&!fails((function(){un$ToExponential(NaN,1/0)})),FORCED$2=!ROUNDS_PROPERLY||!THROWS_ON_INFINITY_FRACTION||!PROPER_NON_FINITE_THIS_CHECK;_export({target:"Number",proto:!0,forced:FORCED$2},{toExponential:function(t){var e=thisNumberValue(this);if(void 0===t)return un$ToExponential(e);var r=toIntegerOrInfinity(t);if(!isFinite$1(e))return String$2(e);if(r<0||r>20)throw RangeError$8("Incorrect fraction digits");if(ROUNDS_PROPERLY)return un$ToExponential(e,r);var n="",i="",a=0,o="",s="";if(e<0&&(n="-",e=-e),0===e)a=0,i=repeat("0",r+1);else{var l=mathLog10(e);a=floor$6(l);var c=0,u=pow$2(10,a-r);2*e>=(2*(c=round$1(e/u))+1)*u&&(c+=1),c>=pow$2(10,r+1)&&(c/=10,a+=1),i=String$2(c)}return 0!==r&&(i=stringSlice$7(i,0,1)+"."+stringSlice$7(i,1)),0===a?(o="+",s="0"):(o=a>0?"+":"-",s=String$2(abs$2(a))),n+(i+="e"+o+s)}}),_export({target:"Object",stat:!0},{hasOwn:hasOwnProperty_1});var PromiseCapability=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n})),this.resolve=aCallable(e),this.reject=aCallable(r)},f$2=function(t){return new PromiseCapability(t)},newPromiseCapability={f:f$2},perform=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}};_export({target:"Promise",stat:!0},{allSettled:function(t){var e=this,r=newPromiseCapability.f(e),n=r.resolve,i=r.reject,a=perform((function(){var r=aCallable(e.resolve),i=[],a=0,o=1;iterate(t,(function(t){var s=a++,l=!1;o++,functionCall(r,e,t).then((function(t){l||(l=!0,i[s]={status:"fulfilled",value:t},--o||n(i))}),(function(t){l||(l=!0,i[s]={status:"rejected",reason:t},--o||n(i))}))})),--o||n(i)}));return a.error&&i(a.value),r.promise}});var PROMISE_ANY_ERROR="No one promise resolved";_export({target:"Promise",stat:!0},{any:function(t){var e=this,r=getBuiltIn("AggregateError"),n=newPromiseCapability.f(e),i=n.resolve,a=n.reject,o=perform((function(){var n=aCallable(e.resolve),o=[],s=0,l=1,c=!1;iterate(t,(function(t){var u=s++,d=!1;l++,functionCall(n,e,t).then((function(t){d||c||(c=!0,i(t))}),(function(t){d||c||(d=!0,o[u]=t,--l||a(new r(o,PROMISE_ANY_ERROR)))}))})),--l||a(new r(o,PROMISE_ANY_ERROR))}));return o.error&&a(o.value),n.promise}});var nativePromiseConstructor=global$1.Promise,noop$3=function(){},empty$1=[],construct=getBuiltIn("Reflect","construct"),constructorRegExp=/^\s*(?:class|function)\b/,exec$2=functionUncurryThis(constructorRegExp.exec),INCORRECT_TO_STRING=!constructorRegExp.exec(noop$3),isConstructorModern=function(t){if(!isCallable(t))return!1;try{return construct(noop$3,empty$1,t),!0}catch(t){return!1}},isConstructorLegacy=function(t){if(!isCallable(t))return!1;switch(classof(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return INCORRECT_TO_STRING||!!exec$2(constructorRegExp,inspectSource(t))}catch(t){return!0}};isConstructorLegacy.sham=!0;var isConstructor=!construct||fails((function(){var t;return isConstructorModern(isConstructorModern.call)||!isConstructorModern(Object)||!isConstructorModern((function(){t=!0}))||t}))?isConstructorLegacy:isConstructorModern,TypeError$a=global$1.TypeError,aConstructor=function(t){if(isConstructor(t))return t;throw TypeError$a(tryToString(t)+" is not a constructor")},SPECIES$3=wellKnownSymbol("species"),speciesConstructor=function(t,e){var r,n=anObject(t).constructor;return void 0===n||null==(r=anObject(n)[SPECIES$3])?e:aConstructor(r)},promiseResolve=function(t,e){if(anObject(t),isObject(e)&&e.constructor===t)return e;var r=newPromiseCapability.f(t);return(0,r.resolve)(e),r.promise},NON_GENERIC=!!nativePromiseConstructor&&fails((function(){nativePromiseConstructor.prototype.finally.call({then:function(){}},(function(){}))}));if(_export({target:"Promise",proto:!0,real:!0,forced:NON_GENERIC},{finally:function(t){var e=speciesConstructor(this,getBuiltIn("Promise")),r=isCallable(t);return this.then(r?function(r){return promiseResolve(e,t()).then((function(){return r}))}:t,r?function(r){return promiseResolve(e,t()).then((function(){throw r}))}:t)}}),isCallable(nativePromiseConstructor)){var method=getBuiltIn("Promise").prototype.finally;nativePromiseConstructor.prototype.finally!==method&&redefine(nativePromiseConstructor.prototype,"finally",method,{unsafe:!0})}var defineProperty$5=objectDefineProperty.f,TO_STRING_TAG$2=wellKnownSymbol("toStringTag"),setToStringTag=function(t,e,r){t&&!r&&(t=t.prototype),t&&!hasOwnProperty_1(t,TO_STRING_TAG$2)&&defineProperty$5(t,TO_STRING_TAG$2,{configurable:!0,value:e})};_export({global:!0},{Reflect:{}}),setToStringTag(global$1.Reflect,"Reflect",!0);var charAt$7=functionUncurryThis("".charAt),FORCED$1=fails((function(){return"\ud842"!=="ð ®·".at(-2)}));_export({target:"String",proto:!0,forced:FORCED$1},{at:function(t){var e=toString(requireObjectCoercible(this)),r=e.length,n=toIntegerOrInfinity(t),i=n>=0?n:r+n;return i<0||i>=r?void 0:charAt$7(e,i)}});var IteratorPrototype$2,PrototypeOfArrayIteratorPrototype,arrayIterator,ITERATOR$5=wellKnownSymbol("iterator"),BUGGY_SAFARI_ITERATORS$1=!1;[].keys&&("next"in(arrayIterator=[].keys())?(PrototypeOfArrayIteratorPrototype=objectGetPrototypeOf(objectGetPrototypeOf(arrayIterator)))!==Object.prototype&&(IteratorPrototype$2=PrototypeOfArrayIteratorPrototype):BUGGY_SAFARI_ITERATORS$1=!0);var NEW_ITERATOR_PROTOTYPE=null==IteratorPrototype$2||fails((function(){var t={};return IteratorPrototype$2[ITERATOR$5].call(t)!==t}));NEW_ITERATOR_PROTOTYPE&&(IteratorPrototype$2={}),isCallable(IteratorPrototype$2[ITERATOR$5])||redefine(IteratorPrototype$2,ITERATOR$5,(function(){return this}));var iteratorsCore={IteratorPrototype:IteratorPrototype$2,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS$1},IteratorPrototype$1=iteratorsCore.IteratorPrototype,returnThis$1=function(){return this},createIteratorConstructor=function(t,e,r,n){var i=e+" Iterator";return t.prototype=objectCreate(IteratorPrototype$1,{next:createPropertyDescriptor(+!n,r)}),setToStringTag(t,i,!1),iterators[i]=returnThis$1,t},MATCH=wellKnownSymbol("match"),isRegexp=function(t){var e;return isObject(t)&&(void 0!==(e=t[MATCH])?!!e:"RegExp"==classofRaw(t))},regexpFlags=function(){var t=anObject(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},charAt$6=functionUncurryThis("".charAt),charCodeAt$1=functionUncurryThis("".charCodeAt),stringSlice$6=functionUncurryThis("".slice),createMethod$1=function(t){return function(e,r){var n,i,a=toString(requireObjectCoercible(e)),o=toIntegerOrInfinity(r),s=a.length;return o<0||o>=s?t?"":void 0:(n=charCodeAt$1(a,o))<55296||n>56319||o+1===s||(i=charCodeAt$1(a,o+1))<56320||i>57343?t?charAt$6(a,o):n:t?stringSlice$6(a,o,o+2):i-56320+(n-55296<<10)+65536}},stringMultibyte={codeAt:createMethod$1(!1),charAt:createMethod$1(!0)},charAt$5=stringMultibyte.charAt,advanceStringIndex=function(t,e,r){return e+(r?charAt$5(t,e).length:1)},$RegExp$2=global$1.RegExp,UNSUPPORTED_Y$1=fails((function(){var t=$RegExp$2("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),MISSED_STICKY=UNSUPPORTED_Y$1||fails((function(){return!$RegExp$2("a","y").sticky})),BROKEN_CARET=UNSUPPORTED_Y$1||fails((function(){var t=$RegExp$2("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),regexpStickyHelpers={BROKEN_CARET:BROKEN_CARET,MISSED_STICKY:MISSED_STICKY,UNSUPPORTED_Y:UNSUPPORTED_Y$1},$RegExp$1=global$1.RegExp,regexpUnsupportedDotAll=fails((function(){var t=$RegExp$1(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),$RegExp=global$1.RegExp,regexpUnsupportedNcg=fails((function(){var t=$RegExp("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),getInternalState$4=internalState.get,nativeReplace=shared("native-string-replace",String.prototype.replace),nativeExec=RegExp.prototype.exec,patchedExec=nativeExec,charAt$4=functionUncurryThis("".charAt),indexOf$1=functionUncurryThis("".indexOf),replace$4=functionUncurryThis("".replace),stringSlice$5=functionUncurryThis("".slice),UPDATES_LAST_INDEX_WRONG=function(){var t=/a/,e=/b*/g;return functionCall(nativeExec,t,"a"),functionCall(nativeExec,e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),UNSUPPORTED_Y=regexpStickyHelpers.BROKEN_CARET,NPCG_INCLUDED=void 0!==/()??/.exec("")[1],PATCH=UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED||UNSUPPORTED_Y||regexpUnsupportedDotAll||regexpUnsupportedNcg;PATCH&&(patchedExec=function(t){var e,r,n,i,a,o,s,l=this,c=getInternalState$4(l),u=toString(t),d=c.raw;if(d)return d.lastIndex=l.lastIndex,e=functionCall(patchedExec,d,u),l.lastIndex=d.lastIndex,e;var h=c.groups,g=UNSUPPORTED_Y&&l.sticky,f=functionCall(regexpFlags,l),p=l.source,m=0,y=u;if(g&&(f=replace$4(f,"y",""),-1===indexOf$1(f,"g")&&(f+="g"),y=stringSlice$5(u,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&"\n"!==charAt$4(u,l.lastIndex-1))&&(p="(?: "+p+")",y=" "+y,m++),r=new RegExp("^(?:"+p+")",f)),NPCG_INCLUDED&&(r=new RegExp("^"+p+"$(?!\\s)",f)),UPDATES_LAST_INDEX_WRONG&&(n=l.lastIndex),i=functionCall(nativeExec,g?r:l,y),g?i?(i.input=stringSlice$5(i.input,m),i[0]=stringSlice$5(i[0],m),i.index=l.lastIndex,l.lastIndex+=i[0].length):l.lastIndex=0:UPDATES_LAST_INDEX_WRONG&&i&&(l.lastIndex=l.global?i.index+i[0].length:n),NPCG_INCLUDED&&i&&i.length>1&&functionCall(nativeReplace,i[0],r,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i&&h)for(i.groups=o=objectCreate(null),a=0;a<h.length;a++)o[(s=h[a])[0]]=i[s[1]];return i});var regexpExec=patchedExec,TypeError$9=global$1.TypeError,regexpExecAbstract=function(t,e){var r=t.exec;if(isCallable(r)){var n=functionCall(r,t,e);return null!==n&&anObject(n),n}if("RegExp"===classofRaw(t))return functionCall(regexpExec,t,e);throw TypeError$9("RegExp#exec called on incompatible receiver")},MATCH_ALL=wellKnownSymbol("matchAll"),REGEXP_STRING="RegExp String",REGEXP_STRING_ITERATOR=REGEXP_STRING+" Iterator",setInternalState$5=internalState.set,getInternalState$3=internalState.getterFor(REGEXP_STRING_ITERATOR),RegExpPrototype$2=RegExp.prototype,TypeError$8=global$1.TypeError,getFlags$2=functionUncurryThis(regexpFlags),stringIndexOf$2=functionUncurryThis("".indexOf),un$MatchAll=functionUncurryThis("".matchAll),WORKS_WITH_NON_GLOBAL_REGEX=!!un$MatchAll&&!fails((function(){un$MatchAll("a",/./)})),$RegExpStringIterator=createIteratorConstructor((function(t,e,r,n){setInternalState$5(this,{type:REGEXP_STRING_ITERATOR,regexp:t,string:e,global:r,unicode:n,done:!1})}),REGEXP_STRING,(function(){var t=getInternalState$3(this);if(t.done)return{value:void 0,done:!0};var e=t.regexp,r=t.string,n=regexpExecAbstract(e,r);return null===n?{value:void 0,done:t.done=!0}:t.global?(""===toString(n[0])&&(e.lastIndex=advanceStringIndex(r,toLength(e.lastIndex),t.unicode)),{value:n,done:!1}):(t.done=!0,{value:n,done:!1})})),$matchAll=function(t){var e,r,n,i,a,o,s=anObject(this),l=toString(t);return e=speciesConstructor(s,RegExp),void 0===(r=s.flags)&&objectIsPrototypeOf(RegExpPrototype$2,s)&&!("flags"in RegExpPrototype$2)&&(r=getFlags$2(s)),n=void 0===r?"":toString(r),i=new e(e===RegExp?s.source:s,n),a=!!~stringIndexOf$2(n,"g"),o=!!~stringIndexOf$2(n,"u"),i.lastIndex=toLength(s.lastIndex),new $RegExpStringIterator(i,l,a,o)};_export({target:"String",proto:!0,forced:WORKS_WITH_NON_GLOBAL_REGEX},{matchAll:function(t){var e,r,n,i=requireObjectCoercible(this);if(null!=t){if(isRegexp(t)&&(e=toString(requireObjectCoercible("flags"in RegExpPrototype$2?t.flags:getFlags$2(t))),!~stringIndexOf$2(e,"g")))throw TypeError$8("`.matchAll` does not allow non-global regexes");if(WORKS_WITH_NON_GLOBAL_REGEX)return un$MatchAll(i,t);if(void 0===(n=getMethod(t,MATCH_ALL))&&isPure&&"RegExp"==classofRaw(t)&&(n=$matchAll),n)return functionCall(n,t,i)}else if(WORKS_WITH_NON_GLOBAL_REGEX)return un$MatchAll(i,t);return r=toString(i),new RegExp(t,"g")[MATCH_ALL](r)}}),MATCH_ALL in RegExpPrototype$2||redefine(RegExpPrototype$2,MATCH_ALL,$matchAll),_export({target:"RegExp",proto:!0,forced:/./.exec!==regexpExec},{exec:regexpExec});var SPECIES$2=wellKnownSymbol("species"),RegExpPrototype$1=RegExp.prototype,fixRegexpWellKnownSymbolLogic=function(t,e,r,n){var i=wellKnownSymbol(t),a=!fails((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),o=a&&!fails((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[SPECIES$2]=function(){return r},r.flags="",r[i]=/./[i]),r.exec=function(){return e=!0,null},r[i](""),!e}));if(!a||!o||r){var s=functionUncurryThis(/./[i]),l=e(i,""[t],(function(t,e,r,n,i){var o=functionUncurryThis(t),l=e.exec;return l===regexpExec||l===RegExpPrototype$1.exec?a&&!i?{done:!0,value:s(e,r,n)}:{done:!0,value:o(r,e,n)}:{done:!1}}));redefine(String.prototype,t,l[0]),redefine(RegExpPrototype$1,i,l[1])}n&&createNonEnumerableProperty(RegExpPrototype$1[i],"sham",!0)},floor$5=Math.floor,charAt$3=functionUncurryThis("".charAt),replace$3=functionUncurryThis("".replace),stringSlice$4=functionUncurryThis("".slice),SUBSTITUTION_SYMBOLS=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&'`]|\d{1,2})/g,getSubstitution=function(t,e,r,n,i,a){var o=r+t.length,s=n.length,l=SUBSTITUTION_SYMBOLS_NO_NAMED;return void 0!==i&&(i=toObject(i),l=SUBSTITUTION_SYMBOLS),replace$3(a,l,(function(a,l){var c;switch(charAt$3(l,0)){case"$":return"$";case"&":return t;case"`":return stringSlice$4(e,0,r);case"'":return stringSlice$4(e,o);case"<":c=i[stringSlice$4(l,1,-1)];break;default:var u=+l;if(0===u)return a;if(u>s){var d=floor$5(u/10);return 0===d?a:d<=s?void 0===n[d-1]?charAt$3(l,1):n[d-1]+charAt$3(l,1):a}c=n[u-1]}return void 0===c?"":c}))},REPLACE$1=wellKnownSymbol("replace"),max$3=Math.max,min$1=Math.min,concat$2=functionUncurryThis([].concat),push$5=functionUncurryThis([].push),stringIndexOf$1=functionUncurryThis("".indexOf),stringSlice$3=functionUncurryThis("".slice),maybeToString=function(t){return void 0===t?t:String(t)},REPLACE_KEEPS_$0="$0"==="a".replace(/./,"$0"),REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE=!!/./[REPLACE$1]&&""===/./[REPLACE$1]("a","$0"),REPLACE_SUPPORTS_NAMED_GROUPS=!fails((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));fixRegexpWellKnownSymbolLogic("replace",(function(t,e,r){var n=REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE?"$":"$0";return[function(t,r){var n=requireObjectCoercible(this),i=null==t?void 0:getMethod(t,REPLACE$1);return i?functionCall(i,t,n,r):functionCall(e,toString(n),t,r)},function(t,i){var a=anObject(this),o=toString(t);if("string"==typeof i&&-1===stringIndexOf$1(i,n)&&-1===stringIndexOf$1(i,"$<")){var s=r(e,a,o,i);if(s.done)return s.value}var l=isCallable(i);l||(i=toString(i));var c=a.global;if(c){var u=a.unicode;a.lastIndex=0}for(var d=[];;){var h=regexpExecAbstract(a,o);if(null===h)break;if(push$5(d,h),!c)break;""===toString(h[0])&&(a.lastIndex=advanceStringIndex(o,toLength(a.lastIndex),u))}for(var g="",f=0,p=0;p<d.length;p++){for(var m=toString((h=d[p])[0]),y=max$3(min$1(toIntegerOrInfinity(h.index),o.length),0),b=[],v=1;v<h.length;v++)push$5(b,maybeToString(h[v]));var x=h.groups;if(l){var I=concat$2([m],b,y,o);void 0!==x&&push$5(I,x);var B=toString(functionApply(i,void 0,I))}else B=getSubstitution(m,o,y,b,x,i);y>=f&&(g+=stringSlice$3(o,f,y)+B,f=y+m.length)}return g+stringSlice$3(o,f)}]}),!REPLACE_SUPPORTS_NAMED_GROUPS||!REPLACE_KEEPS_$0||REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE);var REPLACE=wellKnownSymbol("replace"),RegExpPrototype=RegExp.prototype,TypeError$7=global$1.TypeError,getFlags$1=functionUncurryThis(regexpFlags),indexOf=functionUncurryThis("".indexOf);functionUncurryThis("".replace);var stringSlice$2=functionUncurryThis("".slice),max$2=Math.max,stringIndexOf=function(t,e,r){return r>t.length?-1:""===e?r:indexOf(t,e,r)};_export({target:"String",proto:!0},{replaceAll:function(t,e){var r,n,i,a,o,s,l,c,u=requireObjectCoercible(this),d=0,h=0,g="";if(null!=t){if(isRegexp(t)&&(r=toString(requireObjectCoercible("flags"in RegExpPrototype?t.flags:getFlags$1(t))),!~indexOf(r,"g")))throw TypeError$7("`.replaceAll` does not allow non-global regexes");if(n=getMethod(t,REPLACE))return functionCall(n,t,u,e)}for(i=toString(u),a=toString(t),(o=isCallable(e))||(e=toString(e)),s=a.length,l=max$2(1,s),d=stringIndexOf(i,a,0);-1!==d;)c=o?toString(e(a,d,i)):getSubstitution(a,i,d,[],void 0,e),g+=stringSlice$2(i,h,d)+c,h=d+s,d=stringIndexOf(i,a,d+l);return h<i.length&&(g+=stringSlice$2(i,h)),g}});var ITERATOR$4=wellKnownSymbol("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR$4]=function(){return this},Array.from(iteratorWithReturn,(function(){throw 2}))}catch(t){}var NAME$1,Constructor,Prototype,checkCorrectnessOfIteration=function(t,e){if(!e&&!SAFE_CLOSING)return!1;var r=!1;try{var n={};n[ITERATOR$4]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r},arrayBufferNative="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,defineProperty$4=objectDefineProperty.f,Int8Array$3=global$1.Int8Array,Int8ArrayPrototype$1=Int8Array$3&&Int8Array$3.prototype,Uint8ClampedArray$1=global$1.Uint8ClampedArray,Uint8ClampedArrayPrototype=Uint8ClampedArray$1&&Uint8ClampedArray$1.prototype,TypedArray=Int8Array$3&&objectGetPrototypeOf(Int8Array$3),TypedArrayPrototype=Int8ArrayPrototype$1&&objectGetPrototypeOf(Int8ArrayPrototype$1),ObjectPrototype$1=Object.prototype,TypeError$6=global$1.TypeError,TO_STRING_TAG$1=wellKnownSymbol("toStringTag"),TYPED_ARRAY_TAG=uid("TYPED_ARRAY_TAG"),TYPED_ARRAY_CONSTRUCTOR=uid("TYPED_ARRAY_CONSTRUCTOR"),NATIVE_ARRAY_BUFFER_VIEWS$1=arrayBufferNative&&!!objectSetPrototypeOf&&"Opera"!==classof(global$1.opera),TYPED_ARRAY_TAG_REQUIRED=!1,TypedArrayConstructorsList={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},BigIntArrayConstructorsList={BigInt64Array:8,BigUint64Array:8},isView=function(t){if(!isObject(t))return!1;var e=classof(t);return"DataView"===e||hasOwnProperty_1(TypedArrayConstructorsList,e)||hasOwnProperty_1(BigIntArrayConstructorsList,e)},isTypedArray$1=function(t){if(!isObject(t))return!1;var e=classof(t);return hasOwnProperty_1(TypedArrayConstructorsList,e)||hasOwnProperty_1(BigIntArrayConstructorsList,e)},aTypedArray$3=function(t){if(isTypedArray$1(t))return t;throw TypeError$6("Target is not a typed array")},aTypedArrayConstructor$2=function(t){if(isCallable(t)&&(!objectSetPrototypeOf||objectIsPrototypeOf(TypedArray,t)))return t;throw TypeError$6(tryToString(t)+" is not a typed array constructor")},exportTypedArrayMethod$3=function(t,e,r,n){if(descriptors){if(r)for(var i in TypedArrayConstructorsList){var a=global$1[i];if(a&&hasOwnProperty_1(a.prototype,t))try{delete a.prototype[t]}catch(r){try{a.prototype[t]=e}catch(t){}}}TypedArrayPrototype[t]&&!r||redefine(TypedArrayPrototype,t,r?e:NATIVE_ARRAY_BUFFER_VIEWS$1&&Int8ArrayPrototype$1[t]||e,n)}},exportTypedArrayStaticMethod$2=function(t,e,r){var n,i;if(descriptors){if(objectSetPrototypeOf){if(r)for(n in TypedArrayConstructorsList)if((i=global$1[n])&&hasOwnProperty_1(i,t))try{delete i[t]}catch(t){}if(TypedArray[t]&&!r)return;try{return redefine(TypedArray,t,r?e:NATIVE_ARRAY_BUFFER_VIEWS$1&&TypedArray[t]||e)}catch(t){}}for(n in TypedArrayConstructorsList)!(i=global$1[n])||i[t]&&!r||redefine(i,t,e)}};for(NAME$1 in TypedArrayConstructorsList)(Prototype=(Constructor=global$1[NAME$1])&&Constructor.prototype)?createNonEnumerableProperty(Prototype,TYPED_ARRAY_CONSTRUCTOR,Constructor):NATIVE_ARRAY_BUFFER_VIEWS$1=!1;for(NAME$1 in BigIntArrayConstructorsList)(Prototype=(Constructor=global$1[NAME$1])&&Constructor.prototype)&&createNonEnumerableProperty(Prototype,TYPED_ARRAY_CONSTRUCTOR,Constructor);if((!NATIVE_ARRAY_BUFFER_VIEWS$1||!isCallable(TypedArray)||TypedArray===Function.prototype)&&(TypedArray=function(){throw TypeError$6("Incorrect invocation")},NATIVE_ARRAY_BUFFER_VIEWS$1))for(NAME$1 in TypedArrayConstructorsList)global$1[NAME$1]&&objectSetPrototypeOf(global$1[NAME$1],TypedArray);if((!NATIVE_ARRAY_BUFFER_VIEWS$1||!TypedArrayPrototype||TypedArrayPrototype===ObjectPrototype$1)&&(TypedArrayPrototype=TypedArray.prototype,NATIVE_ARRAY_BUFFER_VIEWS$1))for(NAME$1 in TypedArrayConstructorsList)global$1[NAME$1]&&objectSetPrototypeOf(global$1[NAME$1].prototype,TypedArrayPrototype);if(NATIVE_ARRAY_BUFFER_VIEWS$1&&objectGetPrototypeOf(Uint8ClampedArrayPrototype)!==TypedArrayPrototype&&objectSetPrototypeOf(Uint8ClampedArrayPrototype,TypedArrayPrototype),descriptors&&!hasOwnProperty_1(TypedArrayPrototype,TO_STRING_TAG$1))for(NAME$1 in TYPED_ARRAY_TAG_REQUIRED=!0,defineProperty$4(TypedArrayPrototype,TO_STRING_TAG$1,{get:function(){return isObject(this)?this[TYPED_ARRAY_TAG]:void 0}}),TypedArrayConstructorsList)global$1[NAME$1]&&createNonEnumerableProperty(global$1[NAME$1],TYPED_ARRAY_TAG,NAME$1);var arrayBufferViewCore={NATIVE_ARRAY_BUFFER_VIEWS:NATIVE_ARRAY_BUFFER_VIEWS$1,TYPED_ARRAY_CONSTRUCTOR:TYPED_ARRAY_CONSTRUCTOR,TYPED_ARRAY_TAG:TYPED_ARRAY_TAG_REQUIRED&&TYPED_ARRAY_TAG,aTypedArray:aTypedArray$3,aTypedArrayConstructor:aTypedArrayConstructor$2,exportTypedArrayMethod:exportTypedArrayMethod$3,exportTypedArrayStaticMethod:exportTypedArrayStaticMethod$2,isView:isView,isTypedArray:isTypedArray$1,TypedArray:TypedArray,TypedArrayPrototype:TypedArrayPrototype},NATIVE_ARRAY_BUFFER_VIEWS=arrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS,ArrayBuffer$1=global$1.ArrayBuffer,Int8Array$2=global$1.Int8Array,typedArrayConstructorsRequireWrappers=!NATIVE_ARRAY_BUFFER_VIEWS||!fails((function(){Int8Array$2(1)}))||!fails((function(){new Int8Array$2(-1)}))||!checkCorrectnessOfIteration((function(t){new Int8Array$2,new Int8Array$2(null),new Int8Array$2(1.5),new Int8Array$2(t)}),!0)||fails((function(){return 1!==new Int8Array$2(new ArrayBuffer$1(2),1,void 0).length})),redefineAll=function(t,e,r){for(var n in e)redefine(t,n,e[n],r);return t},TypeError$5=global$1.TypeError,anInstance=function(t,e){if(objectIsPrototypeOf(e,t))return t;throw TypeError$5("Incorrect invocation")},RangeError$7=global$1.RangeError,toIndex=function(t){if(void 0===t)return 0;var e=toIntegerOrInfinity(t),r=toLength(e);if(e!==r)throw RangeError$7("Wrong length or index");return r},Array$6=global$1.Array,abs$1=Math.abs,pow$1=Math.pow,floor$4=Math.floor,log=Math.log,LN2=Math.LN2,pack=function(t,e,r){var n,i,a,o=Array$6(r),s=8*r-e-1,l=(1<<s)-1,c=l>>1,u=23===e?pow$1(2,-24)-pow$1(2,-77):0,d=t<0||0===t&&1/t<0?1:0,h=0;for((t=abs$1(t))!=t||t===1/0?(i=t!=t?1:0,n=l):(n=floor$4(log(t)/LN2),t*(a=pow$1(2,-n))<1&&(n--,a*=2),(t+=n+c>=1?u/a:u*pow$1(2,1-c))*a>=2&&(n++,a/=2),n+c>=l?(i=0,n=l):n+c>=1?(i=(t*a-1)*pow$1(2,e),n+=c):(i=t*pow$1(2,c-1)*pow$1(2,e),n=0));e>=8;)o[h++]=255&i,i/=256,e-=8;for(n=n<<e|i,s+=e;s>0;)o[h++]=255&n,n/=256,s-=8;return o[--h]|=128*d,o},unpack=function(t,e){var r,n=t.length,i=8*n-e-1,a=(1<<i)-1,o=a>>1,s=i-7,l=n-1,c=t[l--],u=127&c;for(c>>=7;s>0;)u=256*u+t[l--],s-=8;for(r=u&(1<<-s)-1,u>>=-s,s+=e;s>0;)r=256*r+t[l--],s-=8;if(0===u)u=1-o;else{if(u===a)return r?NaN:c?-1/0:1/0;r+=pow$1(2,e),u-=o}return(c?-1:1)*r*pow$1(2,u-e)},ieee754={pack:pack,unpack:unpack},arrayFill=function(t){for(var e=toObject(this),r=lengthOfArrayLike(e),n=arguments.length,i=toAbsoluteIndex(n>1?arguments[1]:void 0,r),a=n>2?arguments[2]:void 0,o=void 0===a?r:toAbsoluteIndex(a,r);o>i;)e[i++]=t;return e},createProperty=function(t,e,r){var n=toPropertyKey(e);n in t?objectDefineProperty.f(t,n,createPropertyDescriptor(0,r)):t[n]=r},Array$5=global$1.Array,max$1=Math.max,arraySliceSimple=function(t,e,r){for(var n=lengthOfArrayLike(t),i=toAbsoluteIndex(e,n),a=toAbsoluteIndex(void 0===r?n:r,n),o=Array$5(max$1(a-i,0)),s=0;i<a;i++,s++)createProperty(o,s,t[i]);return o.length=s,o},getOwnPropertyNames=objectGetOwnPropertyNames.f,defineProperty$3=objectDefineProperty.f,PROPER_FUNCTION_NAME$1=functionName.PROPER,CONFIGURABLE_FUNCTION_NAME$1=functionName.CONFIGURABLE,getInternalState$2=internalState.get,setInternalState$4=internalState.set,ARRAY_BUFFER="ArrayBuffer",DATA_VIEW="DataView",PROTOTYPE="prototype",WRONG_LENGTH="Wrong length",WRONG_INDEX="Wrong index",NativeArrayBuffer=global$1[ARRAY_BUFFER],$ArrayBuffer=NativeArrayBuffer,ArrayBufferPrototype=$ArrayBuffer&&$ArrayBuffer[PROTOTYPE],$DataView=global$1[DATA_VIEW],DataViewPrototype=$DataView&&$DataView[PROTOTYPE],ObjectPrototype=Object.prototype,Array$4=global$1.Array,RangeError$6=global$1.RangeError,fill=functionUncurryThis(arrayFill),reverse=functionUncurryThis([].reverse),packIEEE754=ieee754.pack,unpackIEEE754=ieee754.unpack,packInt8=function(t){return[255&t]},packInt16=function(t){return[255&t,t>>8&255]},packInt32=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},unpackInt32=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},packFloat32=function(t){return packIEEE754(t,23,4)},packFloat64=function(t){return packIEEE754(t,52,8)},addGetter=function(t,e){defineProperty$3(t[PROTOTYPE],e,{get:function(){return getInternalState$2(this)[e]}})},get$2=function(t,e,r,n){var i=toIndex(r),a=getInternalState$2(t);if(i+e>a.byteLength)throw RangeError$6(WRONG_INDEX);var o=getInternalState$2(a.buffer).bytes,s=i+a.byteOffset,l=arraySliceSimple(o,s,s+e);return n?l:reverse(l)},set$3=function(t,e,r,n,i,a){var o=toIndex(r),s=getInternalState$2(t);if(o+e>s.byteLength)throw RangeError$6(WRONG_INDEX);for(var l=getInternalState$2(s.buffer).bytes,c=o+s.byteOffset,u=n(+i),d=0;d<e;d++)l[c+d]=u[a?d:e-d-1]};if(arrayBufferNative){var INCORRECT_ARRAY_BUFFER_NAME=PROPER_FUNCTION_NAME$1&&NativeArrayBuffer.name!==ARRAY_BUFFER;if(fails((function(){NativeArrayBuffer(1)}))&&fails((function(){new NativeArrayBuffer(-1)}))&&!fails((function(){return new NativeArrayBuffer,new NativeArrayBuffer(1.5),new NativeArrayBuffer(NaN),INCORRECT_ARRAY_BUFFER_NAME&&!CONFIGURABLE_FUNCTION_NAME$1})))INCORRECT_ARRAY_BUFFER_NAME&&CONFIGURABLE_FUNCTION_NAME$1&&createNonEnumerableProperty(NativeArrayBuffer,"name",ARRAY_BUFFER);else{$ArrayBuffer=function(t){return anInstance(this,ArrayBufferPrototype),new NativeArrayBuffer(toIndex(t))},$ArrayBuffer[PROTOTYPE]=ArrayBufferPrototype;for(var key$1,keys=getOwnPropertyNames(NativeArrayBuffer),j$1=0;keys.length>j$1;)(key$1=keys[j$1++])in $ArrayBuffer||createNonEnumerableProperty($ArrayBuffer,key$1,NativeArrayBuffer[key$1]);ArrayBufferPrototype.constructor=$ArrayBuffer}objectSetPrototypeOf&&objectGetPrototypeOf(DataViewPrototype)!==ObjectPrototype&&objectSetPrototypeOf(DataViewPrototype,ObjectPrototype);var testView=new $DataView(new $ArrayBuffer(2)),$setInt8=functionUncurryThis(DataViewPrototype.setInt8);testView.setInt8(0,2147483648),testView.setInt8(1,2147483649),!testView.getInt8(0)&&testView.getInt8(1)||redefineAll(DataViewPrototype,{setInt8:function(t,e){$setInt8(this,t,e<<24>>24)},setUint8:function(t,e){$setInt8(this,t,e<<24>>24)}},{unsafe:!0})}else $ArrayBuffer=function(t){anInstance(this,ArrayBufferPrototype);var e=toIndex(t);setInternalState$4(this,{bytes:fill(Array$4(e),0),byteLength:e}),descriptors||(this.byteLength=e)},ArrayBufferPrototype=$ArrayBuffer[PROTOTYPE],DataViewPrototype=($DataView=function(t,e,r){anInstance(this,DataViewPrototype),anInstance(t,ArrayBufferPrototype);var n=getInternalState$2(t).byteLength,i=toIntegerOrInfinity(e);if(i<0||i>n)throw RangeError$6("Wrong offset");if(i+(r=void 0===r?n-i:toLength(r))>n)throw RangeError$6(WRONG_LENGTH);setInternalState$4(this,{buffer:t,byteLength:r,byteOffset:i}),descriptors||(this.buffer=t,this.byteLength=r,this.byteOffset=i)})[PROTOTYPE],descriptors&&(addGetter($ArrayBuffer,"byteLength"),addGetter($DataView,"buffer"),addGetter($DataView,"byteLength"),addGetter($DataView,"byteOffset")),redefineAll(DataViewPrototype,{getInt8:function(t){return get$2(this,1,t)[0]<<24>>24},getUint8:function(t){return get$2(this,1,t)[0]},getInt16:function(t){var e=get$2(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=get$2(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return unpackInt32(get$2(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return unpackInt32(get$2(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return unpackIEEE754(get$2(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return unpackIEEE754(get$2(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){set$3(this,1,t,packInt8,e)},setUint8:function(t,e){set$3(this,1,t,packInt8,e)},setInt16:function(t,e){set$3(this,2,t,packInt16,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){set$3(this,2,t,packInt16,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){set$3(this,4,t,packInt32,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){set$3(this,4,t,packInt32,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){set$3(this,4,t,packFloat32,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){set$3(this,8,t,packFloat64,e,arguments.length>2?arguments[2]:void 0)}});setToStringTag($ArrayBuffer,ARRAY_BUFFER),setToStringTag($DataView,DATA_VIEW);var arrayBuffer={ArrayBuffer:$ArrayBuffer,DataView:$DataView},floor$3=Math.floor,isIntegralNumber=Number.isInteger||function(t){return!isObject(t)&&isFinite(t)&&floor$3(t)===t},RangeError$5=global$1.RangeError,toPositiveInteger=function(t){var e=toIntegerOrInfinity(t);if(e<0)throw RangeError$5("The argument can't be less than 0");return e},RangeError$4=global$1.RangeError,toOffset=function(t,e){var r=toPositiveInteger(t);if(r%e)throw RangeError$4("Wrong offset");return r},aTypedArrayConstructor$1=arrayBufferViewCore.aTypedArrayConstructor,typedArrayFrom=function(t){var e,r,n,i,a,o,s=aConstructor(this),l=toObject(t),c=arguments.length,u=c>1?arguments[1]:void 0,d=void 0!==u,h=getIteratorMethod(l);if(h&&!isArrayIteratorMethod(h))for(o=(a=getIterator(l,h)).next,l=[];!(i=functionCall(o,a)).done;)l.push(i.value);for(d&&c>2&&(u=functionBindContext(u,arguments[2])),r=lengthOfArrayLike(l),n=new(aTypedArrayConstructor$1(s))(r),e=0;r>e;e++)n[e]=d?u(l[e],e):l[e];return n},isArray$3=Array.isArray||function(t){return"Array"==classofRaw(t)},SPECIES$1=wellKnownSymbol("species"),Array$3=global$1.Array,arraySpeciesConstructor=function(t){var e;return isArray$3(t)&&(e=t.constructor,(isConstructor(e)&&(e===Array$3||isArray$3(e.prototype))||isObject(e)&&null===(e=e[SPECIES$1]))&&(e=void 0)),void 0===e?Array$3:e},arraySpeciesCreate=function(t,e){return new(arraySpeciesConstructor(t))(0===e?0:e)},push$4=functionUncurryThis([].push),createMethod=function(t){var e=1==t,r=2==t,n=3==t,i=4==t,a=6==t,o=7==t,s=5==t||a;return function(l,c,u,d){for(var h,g,f=toObject(l),p=indexedObject(f),m=functionBindContext(c,u),y=lengthOfArrayLike(p),b=0,v=d||arraySpeciesCreate,x=e?v(l,y):r||o?v(l,0):void 0;y>b;b++)if((s||b in p)&&(g=m(h=p[b],b,f),t))if(e)x[b]=g;else if(g)switch(t){case 3:return!0;case 5:return h;case 6:return b;case 2:push$4(x,h)}else switch(t){case 4:return!1;case 7:push$4(x,h)}return a?-1:n||i?i:x}},arrayIteration={forEach:createMethod(0),map:createMethod(1),filter:createMethod(2),some:createMethod(3),every:createMethod(4),find:createMethod(5),findIndex:createMethod(6),filterReject:createMethod(7)},SPECIES=wellKnownSymbol("species"),setSpecies=function(t){var e=getBuiltIn(t),r=objectDefineProperty.f;descriptors&&e&&!e[SPECIES]&&r(e,SPECIES,{configurable:!0,get:function(){return this}})},typedArrayConstructor=createCommonjsModule((function(t){var e=objectGetOwnPropertyNames.f,r=arrayIteration.forEach,n=internalState.get,i=internalState.set,a=objectDefineProperty.f,o=objectGetOwnPropertyDescriptor.f,s=Math.round,l=global$1.RangeError,c=arrayBuffer.ArrayBuffer,u=c.prototype,d=arrayBuffer.DataView,h=arrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS,g=arrayBufferViewCore.TYPED_ARRAY_CONSTRUCTOR,f=arrayBufferViewCore.TYPED_ARRAY_TAG,p=arrayBufferViewCore.TypedArray,m=arrayBufferViewCore.TypedArrayPrototype,y=arrayBufferViewCore.aTypedArrayConstructor,b=arrayBufferViewCore.isTypedArray,v="BYTES_PER_ELEMENT",x="Wrong length",I=function(t,e){y(t);for(var r=0,n=e.length,i=new t(n);n>r;)i[r]=e[r++];return i},B=function(t,e){a(t,e,{get:function(){return n(this)[e]}})},C=function(t){var e;return objectIsPrototypeOf(u,t)||"ArrayBuffer"==(e=classof(t))||"SharedArrayBuffer"==e},F=function(t,e){return b(t)&&!isSymbol(e)&&e in t&&isIntegralNumber(+e)&&e>=0},A=function(t,e){return e=toPropertyKey(e),F(t,e)?createPropertyDescriptor(2,t[e]):o(t,e)},Q=function(t,e,r){return e=toPropertyKey(e),!(F(t,e)&&isObject(r)&&hasOwnProperty_1(r,"value"))||hasOwnProperty_1(r,"get")||hasOwnProperty_1(r,"set")||r.configurable||hasOwnProperty_1(r,"writable")&&!r.writable||hasOwnProperty_1(r,"enumerable")&&!r.enumerable?a(t,e,r):(t[e]=r.value,t)};descriptors?(h||(objectGetOwnPropertyDescriptor.f=A,objectDefineProperty.f=Q,B(m,"buffer"),B(m,"byteOffset"),B(m,"byteLength"),B(m,"length")),_export({target:"Object",stat:!0,forced:!h},{getOwnPropertyDescriptor:A,defineProperty:Q}),t.exports=function(t,o,u){var y=t.match(/\d+$/)[0]/8,B=t+(u?"Clamped":"")+"Array",F="get"+t,A="set"+t,Q=global$1[B],_=Q,w=_&&_.prototype,U={},S=function(t,e){a(t,e,{get:function(){return function(t,e){var r=n(t);return r.view[F](e*y+r.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var i=n(t);u&&(r=(r=s(r))<0?0:r>255?255:255&r),i.view[A](e*y+i.byteOffset,r,!0)}(this,e,t)},enumerable:!0})};h?typedArrayConstructorsRequireWrappers&&(_=o((function(t,e,r,n){return anInstance(t,w),inheritIfRequired(isObject(e)?C(e)?void 0!==n?new Q(e,toOffset(r,y),n):void 0!==r?new Q(e,toOffset(r,y)):new Q(e):b(e)?I(_,e):functionCall(typedArrayFrom,_,e):new Q(toIndex(e)),t,_)})),objectSetPrototypeOf&&objectSetPrototypeOf(_,p),r(e(Q),(function(t){t in _||createNonEnumerableProperty(_,t,Q[t])})),_.prototype=w):(_=o((function(t,e,r,n){anInstance(t,w);var a,o,s,u=0,h=0;if(isObject(e)){if(!C(e))return b(e)?I(_,e):functionCall(typedArrayFrom,_,e);a=e,h=toOffset(r,y);var g=e.byteLength;if(void 0===n){if(g%y)throw l(x);if((o=g-h)<0)throw l(x)}else if((o=toLength(n)*y)+h>g)throw l(x);s=o/y}else s=toIndex(e),a=new c(o=s*y);for(i(t,{buffer:a,byteOffset:h,byteLength:o,length:s,view:new d(a)});u<s;)S(t,u++)})),objectSetPrototypeOf&&objectSetPrototypeOf(_,p),w=_.prototype=objectCreate(m)),w.constructor!==_&&createNonEnumerableProperty(w,"constructor",_),createNonEnumerableProperty(w,g,_),f&&createNonEnumerableProperty(w,f,B),U[B]=_,_export({global:!0,forced:_!=Q,sham:!h},U),v in _||createNonEnumerableProperty(_,v,y),v in w||createNonEnumerableProperty(w,v,y),setSpecies(B)}):t.exports=function(){}}));typedArrayConstructor("Float32",(function(t){return function(e,r,n){return t(this,e,r,n)}})),typedArrayConstructor("Float64",(function(t){return function(e,r,n){return t(this,e,r,n)}})),typedArrayConstructor("Int8",(function(t){return function(e,r,n){return t(this,e,r,n)}})),typedArrayConstructor("Int16",(function(t){return function(e,r,n){return t(this,e,r,n)}})),typedArrayConstructor("Int32",(function(t){return function(e,r,n){return t(this,e,r,n)}})),typedArrayConstructor("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}})),typedArrayConstructor("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}}),!0),typedArrayConstructor("Uint16",(function(t){return function(e,r,n){return t(this,e,r,n)}})),typedArrayConstructor("Uint32",(function(t){return function(e,r,n){return t(this,e,r,n)}}));var aTypedArray$2=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$2=arrayBufferViewCore.exportTypedArrayMethod;exportTypedArrayMethod$2("at",(function(t){var e=aTypedArray$2(this),r=lengthOfArrayLike(e),n=toIntegerOrInfinity(t),i=n>=0?n:r+n;return i<0||i>=r?void 0:e[i]}));var exportTypedArrayStaticMethod$1=arrayBufferViewCore.exportTypedArrayStaticMethod;exportTypedArrayStaticMethod$1("from",typedArrayFrom,typedArrayConstructorsRequireWrappers);var aTypedArrayConstructor=arrayBufferViewCore.aTypedArrayConstructor,exportTypedArrayStaticMethod=arrayBufferViewCore.exportTypedArrayStaticMethod;exportTypedArrayStaticMethod("of",(function(){for(var t=0,e=arguments.length,r=new(aTypedArrayConstructor(this))(e);e>t;)r[t]=arguments[t++];return r}),typedArrayConstructorsRequireWrappers);var RangeError$3=global$1.RangeError,Int8Array$1=global$1.Int8Array,Int8ArrayPrototype=Int8Array$1&&Int8Array$1.prototype,$set=Int8ArrayPrototype&&Int8ArrayPrototype.set,aTypedArray$1=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod$1=arrayBufferViewCore.exportTypedArrayMethod,WORKS_WITH_OBJECTS_AND_GEERIC_ON_TYPED_ARRAYS=!fails((function(){var t=new Uint8ClampedArray(2);return functionCall($set,t,{length:1,0:3},1),3!==t[1]})),TO_OBJECT_BUG=WORKS_WITH_OBJECTS_AND_GEERIC_ON_TYPED_ARRAYS&&arrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS&&fails((function(){var t=new Int8Array$1(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));exportTypedArrayMethod$1("set",(function(t){aTypedArray$1(this);var e=toOffset(arguments.length>1?arguments[1]:void 0,1),r=toObject(t);if(WORKS_WITH_OBJECTS_AND_GEERIC_ON_TYPED_ARRAYS)return functionCall($set,this,r,e);var n=this.length,i=lengthOfArrayLike(r),a=0;if(i+e>n)throw RangeError$3("Wrong length");for(;a<i;)this[e+a]=r[a++]}),!WORKS_WITH_OBJECTS_AND_GEERIC_ON_TYPED_ARRAYS||TO_OBJECT_BUG);var floor$2=Math.floor,mergeSort=function(t,e){var r=t.length,n=floor$2(r/2);return r<8?insertionSort(t,e):merge(t,mergeSort(arraySliceSimple(t,0,n),e),mergeSort(arraySliceSimple(t,n),e),e)},insertionSort=function(t,e){for(var r,n,i=t.length,a=1;a<i;){for(n=a,r=t[a];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==a++&&(t[n]=r)}return t},merge=function(t,e,r,n){for(var i=e.length,a=r.length,o=0,s=0;o<i||s<a;)t[o+s]=o<i&&s<a?n(e[o],r[s])<=0?e[o++]:r[s++]:o<i?e[o++]:r[s++];return t},arraySort=mergeSort,firefox=engineUserAgent.match(/firefox\/(\d+)/i),engineFfVersion=!!firefox&&+firefox[1],engineIsIeOrEdge=/MSIE|Trident/.test(engineUserAgent),webkit=engineUserAgent.match(/AppleWebKit\/(\d+)\./),engineWebkitVersion=!!webkit&&+webkit[1],Array$2=global$1.Array,aTypedArray=arrayBufferViewCore.aTypedArray,exportTypedArrayMethod=arrayBufferViewCore.exportTypedArrayMethod,Uint16Array$1=global$1.Uint16Array,un$Sort=Uint16Array$1&&functionUncurryThis(Uint16Array$1.prototype.sort),ACCEPT_INCORRECT_ARGUMENTS=!(!un$Sort||fails((function(){un$Sort(new Uint16Array$1(2),null)}))&&fails((function(){un$Sort(new Uint16Array$1(2),{})}))),STABLE_SORT=!!un$Sort&&!fails((function(){if(engineV8Version)return engineV8Version<74;if(engineFfVersion)return engineFfVersion<67;if(engineIsIeOrEdge)return!0;if(engineWebkitVersion)return engineWebkitVersion<602;var t,e,r=new Uint16Array$1(516),n=Array$2(516);for(t=0;t<516;t++)e=t%4,r[t]=515-t,n[t]=t-2*e+3;for(un$Sort(r,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(r[t]!==n[t])return!0})),getSortCompare=function(t){return function(e,r){return void 0!==t?+t(e,r)||0:r!=r?-1:e!=e?1:0===e&&0===r?1/e>0&&1/r<0?1:-1:e>r}};exportTypedArrayMethod("sort",(function(t){return void 0!==t&&aCallable(t),STABLE_SORT?un$Sort(this,t):arraySort(aTypedArray(this),getSortCompare(t))}),!STABLE_SORT||ACCEPT_INCORRECT_ARGUMENTS);var domIterables={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},classList$1=documentCreateElement("span").classList,DOMTokenListPrototype=classList$1&&classList$1.constructor&&classList$1.constructor.prototype,domTokenListPrototype=DOMTokenListPrototype===Object.prototype?void 0:DOMTokenListPrototype,PROPER_FUNCTION_NAME=functionName.PROPER,CONFIGURABLE_FUNCTION_NAME=functionName.CONFIGURABLE,IteratorPrototype=iteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=iteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR$3=wellKnownSymbol("iterator"),KEYS="keys",VALUES="values",ENTRIES="entries",returnThis=function(){return this},defineIterator=function(t,e,r,n,i,a,o){createIteratorConstructor(r,e,n);var s,l,c,u=function(t){if(t===i&&p)return p;if(!BUGGY_SAFARI_ITERATORS&&t in g)return g[t];switch(t){case KEYS:case VALUES:case ENTRIES:return function(){return new r(this,t)}}return function(){return new r(this)}},d=e+" Iterator",h=!1,g=t.prototype,f=g[ITERATOR$3]||g["@@iterator"]||i&&g[i],p=!BUGGY_SAFARI_ITERATORS&&f||u(i),m="Array"==e&&g.entries||f;if(m&&(s=objectGetPrototypeOf(m.call(new t)))!==Object.prototype&&s.next&&(objectGetPrototypeOf(s)!==IteratorPrototype&&(objectSetPrototypeOf?objectSetPrototypeOf(s,IteratorPrototype):isCallable(s[ITERATOR$3])||redefine(s,ITERATOR$3,returnThis)),setToStringTag(s,d,!0)),PROPER_FUNCTION_NAME&&i==VALUES&&f&&f.name!==VALUES&&(CONFIGURABLE_FUNCTION_NAME?createNonEnumerableProperty(g,"name",VALUES):(h=!0,p=function(){return functionCall(f,this)})),i)if(l={values:u(VALUES),keys:a?p:u(KEYS),entries:u(ENTRIES)},o)for(c in l)(BUGGY_SAFARI_ITERATORS||h||!(c in g))&&redefine(g,c,l[c]);else _export({target:e,proto:!0,forced:BUGGY_SAFARI_ITERATORS||h},l);return g[ITERATOR$3]!==p&&redefine(g,ITERATOR$3,p,{name:i}),iterators[e]=p,l},defineProperty$2=objectDefineProperty.f,ARRAY_ITERATOR="Array Iterator",setInternalState$3=internalState.set,getInternalState$1=internalState.getterFor(ARRAY_ITERATOR),es_array_iterator=defineIterator(Array,"Array",(function(t,e){setInternalState$3(this,{type:ARRAY_ITERATOR,target:toIndexedObject(t),index:0,kind:e})}),(function(){var t=getInternalState$1(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values"),values=iterators.Arguments=iterators.Array;if(addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries"),descriptors&&"values"!==values.name)try{defineProperty$2(values,"name",{value:"values"})}catch(t){}var ITERATOR$2=wellKnownSymbol("iterator"),TO_STRING_TAG=wellKnownSymbol("toStringTag"),ArrayValues=es_array_iterator.values,handlePrototype=function(t,e){if(t){if(t[ITERATOR$2]!==ArrayValues)try{createNonEnumerableProperty(t,ITERATOR$2,ArrayValues)}catch(e){t[ITERATOR$2]=ArrayValues}if(t[TO_STRING_TAG]||createNonEnumerableProperty(t,TO_STRING_TAG,e),domIterables[e])for(var r in es_array_iterator)if(t[r]!==es_array_iterator[r])try{createNonEnumerableProperty(t,r,es_array_iterator[r])}catch(e){t[r]=es_array_iterator[r]}}};for(var COLLECTION_NAME in domIterables)handlePrototype(global$1[COLLECTION_NAME]&&global$1[COLLECTION_NAME].prototype,COLLECTION_NAME);handlePrototype(domTokenListPrototype,"DOMTokenList");var domExceptionConstants={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}},defineProperty$1=objectDefineProperty.f,DOM_EXCEPTION="DOMException",Error$2=getBuiltIn("Error"),NativeDOMException=getBuiltIn(DOM_EXCEPTION),$DOMException=function(){anInstance(this,DOMExceptionPrototype);var t=arguments.length,e=normalizeStringArgument(t<1?void 0:arguments[0]),r=normalizeStringArgument(t<2?void 0:arguments[1],"Error"),n=new NativeDOMException(e,r),i=Error$2(e);return i.name=DOM_EXCEPTION,defineProperty$1(n,"stack",createPropertyDescriptor(1,clearErrorStack(i.stack,1))),inheritIfRequired(n,this,$DOMException),n},DOMExceptionPrototype=$DOMException.prototype=NativeDOMException.prototype,ERROR_HAS_STACK="stack"in Error$2(DOM_EXCEPTION),DOM_EXCEPTION_HAS_STACK="stack"in new NativeDOMException(1,2),FORCED_CONSTRUCTOR=ERROR_HAS_STACK&&!DOM_EXCEPTION_HAS_STACK;_export({global:!0,forced:FORCED_CONSTRUCTOR},{DOMException:FORCED_CONSTRUCTOR?$DOMException:NativeDOMException});var PolyfilledDOMException=getBuiltIn(DOM_EXCEPTION),PolyfilledDOMExceptionPrototype=PolyfilledDOMException.prototype;if(PolyfilledDOMExceptionPrototype.constructor!==PolyfilledDOMException)for(var key in defineProperty$1(PolyfilledDOMExceptionPrototype,"constructor",createPropertyDescriptor(1,PolyfilledDOMException)),domExceptionConstants)if(hasOwnProperty_1(domExceptionConstants,key)){var constant$4=domExceptionConstants[key],constantName=constant$4.s;hasOwnProperty_1(PolyfilledDOMException,constantName)||defineProperty$1(PolyfilledDOMException,constantName,createPropertyDescriptor(6,constant$4.c))}var location,defer,channel,port,arraySlice=functionUncurryThis([].slice),TypeError$4=global$1.TypeError,validateArgumentsLength=function(t,e){if(t<e)throw TypeError$4("Not enough arguments");return t},engineIsIos=/(?:ipad|iphone|ipod).*applewebkit/i.test(engineUserAgent),engineIsNode="process"==classofRaw(global$1.process),set$2=global$1.setImmediate,clear=global$1.clearImmediate,process=global$1.process,Dispatch$1=global$1.Dispatch,Function$1=global$1.Function,MessageChannel=global$1.MessageChannel,String$1=global$1.String,counter$1=0,queue$1={},ONREADYSTATECHANGE="onreadystatechange";try{location=global$1.location}catch(t){}var run=function(t){if(hasOwnProperty_1(queue$1,t)){var e=queue$1[t];delete queue$1[t],e()}},runner=function(t){return function(){run(t)}},listener=function(t){run(t.data)},post=function(t){global$1.postMessage(String$1(t),location.protocol+"//"+location.host)};set$2&&clear||(set$2=function(t){validateArgumentsLength(arguments.length,1);var e=isCallable(t)?t:Function$1(t),r=arraySlice(arguments,1);return queue$1[++counter$1]=function(){functionApply(e,void 0,r)},defer(counter$1),counter$1},clear=function(t){delete queue$1[t]},engineIsNode?defer=function(t){process.nextTick(runner(t))}:Dispatch$1&&Dispatch$1.now?defer=function(t){Dispatch$1.now(runner(t))}:MessageChannel&&!engineIsIos?(port=(channel=new MessageChannel).port2,channel.port1.onmessage=listener,defer=functionBindContext(port.postMessage,port)):global$1.addEventListener&&isCallable(global$1.postMessage)&&!global$1.importScripts&&location&&"file:"!==location.protocol&&!fails(post)?(defer=post,global$1.addEventListener("message",listener,!1)):defer=ONREADYSTATECHANGE in documentCreateElement("script")?function(t){html.appendChild(documentCreateElement("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run(t)}}:function(t){setTimeout(runner(t),0)});var task={set:set$2,clear:clear},FORCED=!global$1.setImmediate||!global$1.clearImmediate;_export({global:!0,bind:!0,enumerable:!0,forced:FORCED},{setImmediate:task.set,clearImmediate:task.clear});var Object$1=global$1.Object,Date$1=global$1.Date,Error$1=global$1.Error,EvalError=global$1.EvalError,RangeError$2=global$1.RangeError,ReferenceError=global$1.ReferenceError,SyntaxError$1=global$1.SyntaxError,TypeError$3=global$1.TypeError,URIError=global$1.URIError,PerformanceMark=global$1.PerformanceMark,WebAssembly=global$1.WebAssembly,CompileError=WebAssembly&&WebAssembly.CompileError||Error$1,LinkError=WebAssembly&&WebAssembly.LinkError||Error$1,RuntimeError=WebAssembly&&WebAssembly.RuntimeError||Error$1,DOMException=getBuiltIn("DOMException"),Set$1=getBuiltIn("Set"),Map$1=getBuiltIn("Map"),MapPrototype=Map$1.prototype,mapHas=functionUncurryThis(MapPrototype.has),mapGet=functionUncurryThis(MapPrototype.get),mapSet=functionUncurryThis(MapPrototype.set),setAdd=functionUncurryThis(Set$1.prototype.add),objectKeys=getBuiltIn("Object","keys"),push$3=functionUncurryThis([].push),booleanValueOf=functionUncurryThis((!0).valueOf),numberValueOf=functionUncurryThis(1..valueOf),stringValueOf=functionUncurryThis("".valueOf),getFlags=functionUncurryThis(regexpFlags),getTime=functionUncurryThis(Date$1.prototype.getTime),PERFORMANCE_MARK=uid("structuredClone"),DATA_CLONE_ERROR="DataCloneError",TRANSFERRING="Transferring",checkBasicSemantic=function(t){return!fails((function(){var e=new global$1.Set([7]),r=t(e),n=t(Object$1(7));return r==e||!r.has(7)||"object"!=typeof n||7!=n}))&&t},checkNewErrorsSemantic=function(t){return!fails((function(){var e=t(new global$1.AggregateError([1],PERFORMANCE_MARK,{cause:3}));return"AggregateError"!=e.name||1!=e.errors[0]||e.message!=PERFORMANCE_MARK||3!=e.cause}))&&t},nativeStructuredClone=global$1.structuredClone,FORCED_REPLACEMENT=!checkNewErrorsSemantic(nativeStructuredClone),structuredCloneFromMark=!nativeStructuredClone&&checkBasicSemantic((function(t){return new PerformanceMark(PERFORMANCE_MARK,{detail:t}).detail})),nativeRestrictedStructuredClone=checkBasicSemantic(nativeStructuredClone)||structuredCloneFromMark,throwUncloneable=function(t){throw new DOMException("Uncloneable type: "+t,DATA_CLONE_ERROR)},throwUnpolyfillable=function(t,e){throw new DOMException((e||"Cloning")+" of "+t+" cannot be properly polyfilled in this engine",DATA_CLONE_ERROR)},structuredCloneInternal=function(t,e){if(isSymbol(t)&&throwUncloneable("Symbol"),!isObject(t))return t;if(e){if(mapHas(e,t))return mapGet(e,t)}else e=new Map$1;var r,n,i,a,o,s,l,c,u,d,h=classof(t),g=!1;switch(h){case"Array":i=[],g=!0;break;case"Object":i={},g=!0;break;case"Map":i=new Map$1,g=!0;break;case"Set":i=new Set$1,g=!0;break;case"RegExp":i=new RegExp(t.source,"flags"in t?t.flags:getFlags(t));break;case"Error":switch(n=t.name){case"AggregateError":i=getBuiltIn("AggregateError")([]);break;case"EvalError":i=EvalError();break;case"RangeError":i=RangeError$2();break;case"ReferenceError":i=ReferenceError();break;case"SyntaxError":i=SyntaxError$1();break;case"TypeError":i=TypeError$3();break;case"URIError":i=URIError();break;case"CompileError":i=CompileError();break;case"LinkError":i=LinkError();break;case"RuntimeError":i=RuntimeError();break;default:i=Error$1()}g=!0;break;case"DOMException":i=new DOMException(t.message,t.name),g=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":r=global$1[h],isObject(r)||throwUnpolyfillable(h),i=new r(structuredCloneInternal(t.buffer,e),t.byteOffset,"DataView"===h?t.byteLength:t.length);break;case"DOMQuad":try{i=new DOMQuad(structuredCloneInternal(t.p1,e),structuredCloneInternal(t.p2,e),structuredCloneInternal(t.p3,e),structuredCloneInternal(t.p4,e))}catch(e){nativeRestrictedStructuredClone?i=nativeRestrictedStructuredClone(t):throwUnpolyfillable(h)}break;case"FileList":if(r=global$1.DataTransfer,isConstructor(r)){for(a=new r,o=0,s=lengthOfArrayLike(t);o<s;o++)a.items.add(structuredCloneInternal(t[o],e));i=a.files}else nativeRestrictedStructuredClone?i=nativeRestrictedStructuredClone(t):throwUnpolyfillable(h);break;case"ImageData":try{i=new ImageData(structuredCloneInternal(t.data,e),t.width,t.height,{colorSpace:t.colorSpace})}catch(e){nativeRestrictedStructuredClone?i=nativeRestrictedStructuredClone(t):throwUnpolyfillable(h)}break;default:if(nativeRestrictedStructuredClone)i=nativeRestrictedStructuredClone(t);else switch(h){case"BigInt":i=Object$1(t.valueOf());break;case"Boolean":i=Object$1(booleanValueOf(t));break;case"Number":i=Object$1(numberValueOf(t));break;case"String":i=Object$1(stringValueOf(t));break;case"Date":i=new Date$1(getTime(t));break;case"ArrayBuffer":(r=global$1.DataView)||"function"==typeof t.slice||throwUnpolyfillable(h);try{if("function"==typeof t.slice)i=t.slice(0);else for(s=t.byteLength,i=new ArrayBuffer(s),u=new r(t),d=new r(i),o=0;o<s;o++)d.setUint8(o,u.getUint8(o))}catch(t){throw new DOMException("ArrayBuffer is detached",DATA_CLONE_ERROR)}break;case"SharedArrayBuffer":i=t;break;case"Blob":try{i=t.slice(0,t.size,t.type)}catch(t){throwUnpolyfillable(h)}break;case"DOMPoint":case"DOMPointReadOnly":r=global$1[h];try{i=r.fromPoint?r.fromPoint(t):new r(t.x,t.y,t.z,t.w)}catch(t){throwUnpolyfillable(h)}break;case"DOMRect":case"DOMRectReadOnly":r=global$1[h];try{i=r.fromRect?r.fromRect(t):new r(t.x,t.y,t.width,t.height)}catch(t){throwUnpolyfillable(h)}break;case"DOMMatrix":case"DOMMatrixReadOnly":r=global$1[h];try{i=r.fromMatrix?r.fromMatrix(t):new r(t)}catch(t){throwUnpolyfillable(h)}break;case"AudioData":case"VideoFrame":isCallable(t.clone)||throwUnpolyfillable(h);try{i=t.clone()}catch(t){throwUncloneable(h)}break;case"File":try{i=new File([t],t.name,t)}catch(t){throwUnpolyfillable(h)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":throwUnpolyfillable(h);default:throwUncloneable(h)}}if(mapSet(e,t,i),g)switch(h){case"Array":case"Object":for(l=objectKeys(t),o=0,s=lengthOfArrayLike(l);o<s;o++)c=l[o],createProperty(i,c,structuredCloneInternal(t[c],e));break;case"Map":t.forEach((function(t,r){mapSet(i,structuredCloneInternal(r,e),structuredCloneInternal(t,e))}));break;case"Set":t.forEach((function(t){setAdd(i,structuredCloneInternal(t,e))}));break;case"Error":createNonEnumerableProperty(i,"message",structuredCloneInternal(t.message,e)),hasOwnProperty_1(t,"cause")&&createNonEnumerableProperty(i,"cause",structuredCloneInternal(t.cause,e)),"AggregateError"==n&&(i.errors=structuredCloneInternal(t.errors,e));case"DOMException":errorStackInstallable&&createNonEnumerableProperty(i,"stack",structuredCloneInternal(t.stack,e))}return i},PROPER_TRANSFER=nativeStructuredClone&&!fails((function(){var t=new ArrayBuffer(8),e=nativeStructuredClone(t,{transfer:[t]});return 0!=t.byteLength||8!=e.byteLength})),tryToTransfer=function(t,e){if(!isObject(t))throw TypeError$3("Transfer option cannot be converted to a sequence");var r=[];iterate(t,(function(t){push$3(r,anObject(t))}));var n,i,a,o,s,l,c=0,u=lengthOfArrayLike(r);if(PROPER_TRANSFER)for(o=nativeStructuredClone(r,{transfer:r});c<u;)mapSet(e,r[c],o[c++]);else for(;c<u;){if(n=r[c++],mapHas(e,n))throw new DOMException("Duplicate transferable",DATA_CLONE_ERROR);switch(i=classof(n)){case"ImageBitmap":a=global$1.OffscreenCanvas,isConstructor(a)||throwUnpolyfillable(i,TRANSFERRING);try{(l=new a(n.width,n.height)).getContext("bitmaprenderer").transferFromImageBitmap(n),s=l.transferToImageBitmap()}catch(t){}break;case"AudioData":case"VideoFrame":isCallable(n.clone)&&isCallable(n.close)||throwUnpolyfillable(i,TRANSFERRING);try{s=n.clone(),n.close()}catch(t){}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":throwUnpolyfillable(i,TRANSFERRING)}if(void 0===s)throw new DOMException("This object cannot be transferred: "+i,DATA_CLONE_ERROR);mapSet(e,n,s)}};_export({global:!0,enumerable:!0,sham:!PROPER_TRANSFER,forced:FORCED_REPLACEMENT},{structuredClone:function(t){var e,r=validateArgumentsLength(arguments.length,1)>1?anObject(arguments[1]):void 0,n=r?r.transfer:void 0;return void 0!==n&&(e=new Map$1,tryToTransfer(n,e)),structuredCloneInternal(t,e)}});var charAt$2=stringMultibyte.charAt,STRING_ITERATOR="String Iterator",setInternalState$2=internalState.set,getInternalState=internalState.getterFor(STRING_ITERATOR);defineIterator(String,"String",(function(t){setInternalState$2(this,{type:STRING_ITERATOR,string:toString(t),index:0})}),(function(){var t,e=getInternalState(this),r=e.string,n=e.index;return n>=r.length?{value:void 0,done:!0}:(t=charAt$2(r,n),e.index+=t.length,{value:t,done:!1})}));var ITERATOR$1=wellKnownSymbol("iterator"),nativeUrl=!fails((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,r="";return t.pathname="c%20d",e.forEach((function(t,n){e.delete("b"),r+=n+t})),isPure&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[ITERATOR$1]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host})),$assign=Object.assign,defineProperty=Object.defineProperty,concat$1=functionUncurryThis([].concat),objectAssign=!$assign||fails((function(){if(descriptors&&1!==$assign({b:1},$assign(defineProperty({},"a",{enumerable:!0,get:function(){defineProperty(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach((function(t){e[t]=t})),7!=$assign({},t)[r]||objectKeys$1($assign({},e)).join("")!=n}))?function(t,e){for(var r=toObject(t),n=arguments.length,i=1,a=objectGetOwnPropertySymbols.f,o=objectPropertyIsEnumerable.f;n>i;)for(var s,l=indexedObject(arguments[i++]),c=a?concat$1(objectKeys$1(l),a(l)):objectKeys$1(l),u=c.length,d=0;u>d;)s=c[d++],descriptors&&!functionCall(o,l,s)||(r[s]=l[s]);return r}:$assign,callWithSafeIterationClosing=function(t,e,r,n){try{return n?e(anObject(r)[0],r[1]):e(r)}catch(e){iteratorClose(t,"throw",e)}},Array$1=global$1.Array,arrayFrom=function(t){var e=toObject(t),r=isConstructor(this),n=arguments.length,i=n>1?arguments[1]:void 0,a=void 0!==i;a&&(i=functionBindContext(i,n>2?arguments[2]:void 0));var o,s,l,c,u,d,h=getIteratorMethod(e),g=0;if(!h||this==Array$1&&isArrayIteratorMethod(h))for(o=lengthOfArrayLike(e),s=r?new this(o):Array$1(o);o>g;g++)d=a?i(e[g],g):e[g],createProperty(s,g,d);else for(u=(c=getIterator(e,h)).next,s=r?new this:[];!(l=functionCall(u,c)).done;g++)d=a?callWithSafeIterationClosing(c,i,[l.value,g],!0):l.value,createProperty(s,g,d);return s.length=g,s},maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexNonASCII=/[^\0-\u007E]/,regexSeparators=/[.\u3002\uFF0E\uFF61]/g,OVERFLOW_ERROR="Overflow: input needs wider integers to process",baseMinusTMin=base-tMin,RangeError$1=global$1.RangeError,exec$1=functionUncurryThis(regexSeparators.exec),floor$1=Math.floor,fromCharCode=String.fromCharCode,charCodeAt=functionUncurryThis("".charCodeAt),join$2=functionUncurryThis([].join),push$2=functionUncurryThis([].push),replace$2=functionUncurryThis("".replace),split$2=functionUncurryThis("".split),toLowerCase$1=functionUncurryThis("".toLowerCase),ucs2decode=function(t){for(var e=[],r=0,n=t.length;r<n;){var i=charCodeAt(t,r++);if(i>=55296&&i<=56319&&r<n){var a=charCodeAt(t,r++);56320==(64512&a)?push$2(e,((1023&i)<<10)+(1023&a)+65536):(push$2(e,i),r--)}else push$2(e,i)}return e},digitToBasic=function(t){return t+22+75*(t<26)},adapt=function(t,e,r){var n=0;for(t=r?floor$1(t/damp):t>>1,t+=floor$1(t/e);t>baseMinusTMin*tMax>>1;)t=floor$1(t/baseMinusTMin),n+=base;return floor$1(n+(baseMinusTMin+1)*t/(t+skew))},encode=function(t){var e,r,n=[],i=(t=ucs2decode(t)).length,a=initialN,o=0,s=initialBias;for(e=0;e<t.length;e++)(r=t[e])<128&&push$2(n,fromCharCode(r));var l=n.length,c=l;for(l&&push$2(n,delimiter);c<i;){var u=maxInt;for(e=0;e<t.length;e++)(r=t[e])>=a&&r<u&&(u=r);var d=c+1;if(u-a>floor$1((maxInt-o)/d))throw RangeError$1(OVERFLOW_ERROR);for(o+=(u-a)*d,a=u,e=0;e<t.length;e++){if((r=t[e])<a&&++o>maxInt)throw RangeError$1(OVERFLOW_ERROR);if(r==a){for(var h=o,g=base;;){var f=g<=s?tMin:g>=s+tMax?tMax:g-s;if(h<f)break;var p=h-f,m=base-f;push$2(n,fromCharCode(digitToBasic(f+p%m))),h=floor$1(p/m),g+=base}push$2(n,fromCharCode(digitToBasic(h))),s=adapt(o,d,c==l),o=0,c++}}o++,a++}return join$2(n,"")},stringPunycodeToAscii=function(t){var e,r,n=[],i=split$2(replace$2(toLowerCase$1(t),regexSeparators,"."),".");for(e=0;e<i.length;e++)r=i[e],push$2(n,exec$1(regexNonASCII,r)?"xn--"+encode(r):r);return join$2(n,".")},ITERATOR=wellKnownSymbol("iterator"),URL_SEARCH_PARAMS="URLSearchParams",URL_SEARCH_PARAMS_ITERATOR=URL_SEARCH_PARAMS+"Iterator",setInternalState$1=internalState.set,getInternalParamsState=internalState.getterFor(URL_SEARCH_PARAMS),getInternalIteratorState=internalState.getterFor(URL_SEARCH_PARAMS_ITERATOR),n$Fetch=getBuiltIn("fetch"),N$Request=getBuiltIn("Request"),Headers=getBuiltIn("Headers"),RequestPrototype=N$Request&&N$Request.prototype,HeadersPrototype=Headers&&Headers.prototype,RegExp$1=global$1.RegExp,TypeError$2=global$1.TypeError,decodeURIComponent=global$1.decodeURIComponent,encodeURIComponent$1=global$1.encodeURIComponent,charAt$1=functionUncurryThis("".charAt),join$1=functionUncurryThis([].join),push$1=functionUncurryThis([].push),replace$1=functionUncurryThis("".replace),shift$1=functionUncurryThis([].shift),splice=functionUncurryThis([].splice),split$1=functionUncurryThis("".split),stringSlice$1=functionUncurryThis("".slice),plus=/\+/g,sequences=Array(4),percentSequence=function(t){return sequences[t-1]||(sequences[t-1]=RegExp$1("((?:%[\\da-f]{2}){"+t+"})","gi"))},percentDecode=function(t){try{return decodeURIComponent(t)}catch(e){return t}},deserialize=function(t){var e=replace$1(t,plus," "),r=4;try{return decodeURIComponent(e)}catch(t){for(;r;)e=replace$1(e,percentSequence(r--),percentDecode);return e}},find$1=/[!'()~]|%20/g,replacements={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},replacer=function(t){return replacements[t]},serialize=function(t){return replace$1(encodeURIComponent$1(t),find$1,replacer)},URLSearchParamsIterator=createIteratorConstructor((function(t,e){setInternalState$1(this,{type:URL_SEARCH_PARAMS_ITERATOR,iterator:getIterator(getInternalParamsState(t).entries),kind:e})}),"Iterator",(function(){var t=getInternalIteratorState(this),e=t.kind,r=t.iterator.next(),n=r.value;return r.done||(r.value="keys"===e?n.key:"values"===e?n.value:[n.key,n.value]),r}),!0),URLSearchParamsState=function(t){this.entries=[],this.url=null,void 0!==t&&(isObject(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===charAt$1(t,0)?stringSlice$1(t,1):t:toString(t)))};URLSearchParamsState.prototype={type:URL_SEARCH_PARAMS,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,r,n,i,a,o,s,l=getIteratorMethod(t);if(l)for(r=(e=getIterator(t,l)).next;!(n=functionCall(r,e)).done;){if(a=(i=getIterator(anObject(n.value))).next,(o=functionCall(a,i)).done||(s=functionCall(a,i)).done||!functionCall(a,i).done)throw TypeError$2("Expected sequence with length 2");push$1(this.entries,{key:toString(o.value),value:toString(s.value)})}else for(var c in t)hasOwnProperty_1(t,c)&&push$1(this.entries,{key:c,value:toString(t[c])})},parseQuery:function(t){if(t)for(var e,r,n=split$1(t,"&"),i=0;i<n.length;)(e=n[i++]).length&&(r=split$1(e,"="),push$1(this.entries,{key:deserialize(shift$1(r)),value:deserialize(join$1(r,"="))}))},serialize:function(){for(var t,e=this.entries,r=[],n=0;n<e.length;)t=e[n++],push$1(r,serialize(t.key)+"="+serialize(t.value));return join$1(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var URLSearchParamsConstructor=function(){anInstance(this,URLSearchParamsPrototype);var t=arguments.length>0?arguments[0]:void 0;setInternalState$1(this,new URLSearchParamsState(t))},URLSearchParamsPrototype=URLSearchParamsConstructor.prototype;if(redefineAll(URLSearchParamsPrototype,{append:function(t,e){validateArgumentsLength(arguments.length,2);var r=getInternalParamsState(this);push$1(r.entries,{key:toString(t),value:toString(e)}),r.updateURL()},delete:function(t){validateArgumentsLength(arguments.length,1);for(var e=getInternalParamsState(this),r=e.entries,n=toString(t),i=0;i<r.length;)r[i].key===n?splice(r,i,1):i++;e.updateURL()},get:function(t){validateArgumentsLength(arguments.length,1);for(var e=getInternalParamsState(this).entries,r=toString(t),n=0;n<e.length;n++)if(e[n].key===r)return e[n].value;return null},getAll:function(t){validateArgumentsLength(arguments.length,1);for(var e=getInternalParamsState(this).entries,r=toString(t),n=[],i=0;i<e.length;i++)e[i].key===r&&push$1(n,e[i].value);return n},has:function(t){validateArgumentsLength(arguments.length,1);for(var e=getInternalParamsState(this).entries,r=toString(t),n=0;n<e.length;)if(e[n++].key===r)return!0;return!1},set:function(t,e){validateArgumentsLength(arguments.length,1);for(var r,n=getInternalParamsState(this),i=n.entries,a=!1,o=toString(t),s=toString(e),l=0;l<i.length;l++)(r=i[l]).key===o&&(a?splice(i,l--,1):(a=!0,r.value=s));a||push$1(i,{key:o,value:s}),n.updateURL()},sort:function(){var t=getInternalParamsState(this);arraySort(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,r=getInternalParamsState(this).entries,n=functionBindContext(t,arguments.length>1?arguments[1]:void 0),i=0;i<r.length;)n((e=r[i++]).value,e.key,this)},keys:function(){return new URLSearchParamsIterator(this,"keys")},values:function(){return new URLSearchParamsIterator(this,"values")},entries:function(){return new URLSearchParamsIterator(this,"entries")}},{enumerable:!0}),redefine(URLSearchParamsPrototype,ITERATOR,URLSearchParamsPrototype.entries,{name:"entries"}),redefine(URLSearchParamsPrototype,"toString",(function(){return getInternalParamsState(this).serialize()}),{enumerable:!0}),setToStringTag(URLSearchParamsConstructor,URL_SEARCH_PARAMS),_export({global:!0,forced:!nativeUrl},{URLSearchParams:URLSearchParamsConstructor}),!nativeUrl&&isCallable(Headers)){var headersHas=functionUncurryThis(HeadersPrototype.has),headersSet=functionUncurryThis(HeadersPrototype.set),wrapRequestOptions=function(t){if(isObject(t)){var e,r=t.body;if(classof(r)===URL_SEARCH_PARAMS)return e=t.headers?new Headers(t.headers):new Headers,headersHas(e,"content-type")||headersSet(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),objectCreate(t,{body:createPropertyDescriptor(0,toString(r)),headers:createPropertyDescriptor(0,e)})}return t};if(isCallable(n$Fetch)&&_export({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return n$Fetch(t,arguments.length>1?wrapRequestOptions(arguments[1]):{})}}),isCallable(N$Request)){var RequestConstructor=function(t){return anInstance(this,RequestPrototype),new N$Request(t,arguments.length>1?wrapRequestOptions(arguments[1]):{})};RequestPrototype.constructor=RequestConstructor,RequestConstructor.prototype=RequestPrototype,_export({global:!0,forced:!0},{Request:RequestConstructor})}}var EOF,web_urlSearchParams={URLSearchParams:URLSearchParamsConstructor,getState:getInternalParamsState},defineProperties=objectDefineProperties.f,codeAt=stringMultibyte.codeAt,setInternalState=internalState.set,getInternalURLState=internalState.getterFor("URL"),URLSearchParams$1=web_urlSearchParams.URLSearchParams,getInternalSearchParamsState=web_urlSearchParams.getState,NativeURL=global$1.URL,TypeError$1=global$1.TypeError,parseInt$1=global$1.parseInt,floor=Math.floor,pow=Math.pow,charAt=functionUncurryThis("".charAt),exec=functionUncurryThis(/./.exec),join=functionUncurryThis([].join),numberToString=functionUncurryThis(1..toString),pop=functionUncurryThis([].pop),push=functionUncurryThis([].push),replace=functionUncurryThis("".replace),shift=functionUncurryThis([].shift),split=functionUncurryThis("".split),stringSlice=functionUncurryThis("".slice),toLowerCase=functionUncurryThis("".toLowerCase),unshift=functionUncurryThis([].unshift),INVALID_AUTHORITY="Invalid authority",INVALID_SCHEME="Invalid scheme",INVALID_HOST="Invalid host",INVALID_PORT="Invalid port",ALPHA=/[a-z]/i,ALPHANUMERIC=/[\d+-.a-z]/i,DIGIT=/\d/,HEX_START=/^0x/i,OCT=/^[0-7]+$/,DEC=/^\d+$/,HEX=/^[\da-f]+$/i,FORBIDDEN_HOST_CODE_POINT=/[\0\t\n\r #%/:<>?@[\\\]^|]/,FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT=/[\0\t\n\r #/:<>?@[\\\]^|]/,LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,TAB_AND_NEW_LINE=/[\t\n\r]/g,parseIPv4=function(t){var e,r,n,i,a,o,s,l=split(t,".");if(l.length&&""==l[l.length-1]&&l.length--,(e=l.length)>4)return t;for(r=[],n=0;n<e;n++){if(""==(i=l[n]))return t;if(a=10,i.length>1&&"0"==charAt(i,0)&&(a=exec(HEX_START,i)?16:8,i=stringSlice(i,8==a?1:2)),""===i)o=0;else{if(!exec(10==a?DEC:8==a?OCT:HEX,i))return t;o=parseInt$1(i,a)}push(r,o)}for(n=0;n<e;n++)if(o=r[n],n==e-1){if(o>=pow(256,5-e))return null}else if(o>255)return null;for(s=pop(r),n=0;n<r.length;n++)s+=r[n]*pow(256,3-n);return s},parseIPv6=function(t){var e,r,n,i,a,o,s,l=[0,0,0,0,0,0,0,0],c=0,u=null,d=0,h=function(){return charAt(t,d)};if(":"==h()){if(":"!=charAt(t,1))return;d+=2,u=++c}for(;h();){if(8==c)return;if(":"!=h()){for(e=r=0;r<4&&exec(HEX,h());)e=16*e+parseInt$1(h(),16),d++,r++;if("."==h()){if(0==r)return;if(d-=r,c>6)return;for(n=0;h();){if(i=null,n>0){if(!("."==h()&&n<4))return;d++}if(!exec(DIGIT,h()))return;for(;exec(DIGIT,h());){if(a=parseInt$1(h(),10),null===i)i=a;else{if(0==i)return;i=10*i+a}if(i>255)return;d++}l[c]=256*l[c]+i,2!=++n&&4!=n||c++}if(4!=n)return;break}if(":"==h()){if(d++,!h())return}else if(h())return;l[c++]=e}else{if(null!==u)return;d++,u=++c}}if(null!==u)for(o=c-u,c=7;0!=c&&o>0;)s=l[c],l[c--]=l[u+o-1],l[u+--o]=s;else if(8!=c)return;return l},findLongestZeroSequence=function(t){for(var e=null,r=1,n=null,i=0,a=0;a<8;a++)0!==t[a]?(i>r&&(e=n,r=i),n=null,i=0):(null===n&&(n=a),++i);return i>r&&(e=n,r=i),e},serializeHost=function(t){var e,r,n,i;if("number"==typeof t){for(e=[],r=0;r<4;r++)unshift(e,t%256),t=floor(t/256);return join(e,".")}if("object"==typeof t){for(e="",n=findLongestZeroSequence(t),r=0;r<8;r++)i&&0===t[r]||(i&&(i=!1),n===r?(e+=r?":":"::",i=!0):(e+=numberToString(t[r],16),r<7&&(e+=":")));return"["+e+"]"}return t},C0ControlPercentEncodeSet={},fragmentPercentEncodeSet=objectAssign({},C0ControlPercentEncodeSet,{" ":1,'"':1,"<":1,">":1,"`":1}),pathPercentEncodeSet=objectAssign({},fragmentPercentEncodeSet,{"#":1,"?":1,"{":1,"}":1}),userinfoPercentEncodeSet=objectAssign({},pathPercentEncodeSet,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),percentEncode=function(t,e){var r=codeAt(t,0);return r>32&&r<127&&!hasOwnProperty_1(e,t)?t:encodeURIComponent(t)},specialSchemes={ftp:21,file:null,http:80,https:443,ws:80,wss:443},isWindowsDriveLetter=function(t,e){var r;return 2==t.length&&exec(ALPHA,charAt(t,0))&&(":"==(r=charAt(t,1))||!e&&"|"==r)},startsWithWindowsDriveLetter=function(t){var e;return t.length>1&&isWindowsDriveLetter(stringSlice(t,0,2))&&(2==t.length||"/"===(e=charAt(t,2))||"\\"===e||"?"===e||"#"===e)},isSingleDot=function(t){return"."===t||"%2e"===toLowerCase(t)},isDoubleDot=function(t){return".."===(t=toLowerCase(t))||"%2e."===t||".%2e"===t||"%2e%2e"===t},SCHEME_START={},SCHEME={},NO_SCHEME={},SPECIAL_RELATIVE_OR_AUTHORITY={},PATH_OR_AUTHORITY={},RELATIVE={},RELATIVE_SLASH={},SPECIAL_AUTHORITY_SLASHES={},SPECIAL_AUTHORITY_IGNORE_SLASHES={},AUTHORITY={},HOST={},HOSTNAME={},PORT={},FILE={},FILE_SLASH={},FILE_HOST={},PATH_START={},PATH={},CANNOT_BE_A_BASE_URL_PATH={},QUERY={},FRAGMENT={},URLState=function(t,e,r){var n,i,a,o=toString(t);if(e){if(i=this.parse(o))throw TypeError$1(i);this.searchParams=null}else{if(void 0!==r&&(n=new URLState(r,!0)),i=this.parse(o,null,n))throw TypeError$1(i);(a=getInternalSearchParamsState(new URLSearchParams$1)).bindURL(this),this.searchParams=a}};URLState.prototype={type:"URL",parse:function(t,e,r){var n,i,a,o,s=this,l=e||SCHEME_START,c=0,u="",d=!1,h=!1,g=!1;for(t=toString(t),e||(s.scheme="",s.username="",s.password="",s.host=null,s.port=null,s.path=[],s.query=null,s.fragment=null,s.cannotBeABaseURL=!1,t=replace(t,LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE,"")),t=replace(t,TAB_AND_NEW_LINE,""),n=arrayFrom(t);c<=n.length;){switch(i=n[c],l){case SCHEME_START:if(!i||!exec(ALPHA,i)){if(e)return INVALID_SCHEME;l=NO_SCHEME;continue}u+=toLowerCase(i),l=SCHEME;break;case SCHEME:if(i&&(exec(ALPHANUMERIC,i)||"+"==i||"-"==i||"."==i))u+=toLowerCase(i);else{if(":"!=i){if(e)return INVALID_SCHEME;u="",l=NO_SCHEME,c=0;continue}if(e&&(s.isSpecial()!=hasOwnProperty_1(specialSchemes,u)||"file"==u&&(s.includesCredentials()||null!==s.port)||"file"==s.scheme&&!s.host))return;if(s.scheme=u,e)return void(s.isSpecial()&&specialSchemes[s.scheme]==s.port&&(s.port=null));u="","file"==s.scheme?l=FILE:s.isSpecial()&&r&&r.scheme==s.scheme?l=SPECIAL_RELATIVE_OR_AUTHORITY:s.isSpecial()?l=SPECIAL_AUTHORITY_SLASHES:"/"==n[c+1]?(l=PATH_OR_AUTHORITY,c++):(s.cannotBeABaseURL=!0,push(s.path,""),l=CANNOT_BE_A_BASE_URL_PATH)}break;case NO_SCHEME:if(!r||r.cannotBeABaseURL&&"#"!=i)return INVALID_SCHEME;if(r.cannotBeABaseURL&&"#"==i){s.scheme=r.scheme,s.path=arraySliceSimple(r.path),s.query=r.query,s.fragment="",s.cannotBeABaseURL=!0,l=FRAGMENT;break}l="file"==r.scheme?FILE:RELATIVE;continue;case SPECIAL_RELATIVE_OR_AUTHORITY:if("/"!=i||"/"!=n[c+1]){l=RELATIVE;continue}l=SPECIAL_AUTHORITY_IGNORE_SLASHES,c++;break;case PATH_OR_AUTHORITY:if("/"==i){l=AUTHORITY;break}l=PATH;continue;case RELATIVE:if(s.scheme=r.scheme,i==EOF)s.username=r.username,s.password=r.password,s.host=r.host,s.port=r.port,s.path=arraySliceSimple(r.path),s.query=r.query;else if("/"==i||"\\"==i&&s.isSpecial())l=RELATIVE_SLASH;else if("?"==i)s.username=r.username,s.password=r.password,s.host=r.host,s.port=r.port,s.path=arraySliceSimple(r.path),s.query="",l=QUERY;else{if("#"!=i){s.username=r.username,s.password=r.password,s.host=r.host,s.port=r.port,s.path=arraySliceSimple(r.path),s.path.length--,l=PATH;continue}s.username=r.username,s.password=r.password,s.host=r.host,s.port=r.port,s.path=arraySliceSimple(r.path),s.query=r.query,s.fragment="",l=FRAGMENT}break;case RELATIVE_SLASH:if(!s.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){s.username=r.username,s.password=r.password,s.host=r.host,s.port=r.port,l=PATH;continue}l=AUTHORITY}else l=SPECIAL_AUTHORITY_IGNORE_SLASHES;break;case SPECIAL_AUTHORITY_SLASHES:if(l=SPECIAL_AUTHORITY_IGNORE_SLASHES,"/"!=i||"/"!=charAt(u,c+1))continue;c++;break;case SPECIAL_AUTHORITY_IGNORE_SLASHES:if("/"!=i&&"\\"!=i){l=AUTHORITY;continue}break;case AUTHORITY:if("@"==i){d&&(u="%40"+u),d=!0,a=arrayFrom(u);for(var f=0;f<a.length;f++){var p=a[f];if(":"!=p||g){var m=percentEncode(p,userinfoPercentEncodeSet);g?s.password+=m:s.username+=m}else g=!0}u=""}else if(i==EOF||"/"==i||"?"==i||"#"==i||"\\"==i&&s.isSpecial()){if(d&&""==u)return INVALID_AUTHORITY;c-=arrayFrom(u).length+1,u="",l=HOST}else u+=i;break;case HOST:case HOSTNAME:if(e&&"file"==s.scheme){l=FILE_HOST;continue}if(":"!=i||h){if(i==EOF||"/"==i||"?"==i||"#"==i||"\\"==i&&s.isSpecial()){if(s.isSpecial()&&""==u)return INVALID_HOST;if(e&&""==u&&(s.includesCredentials()||null!==s.port))return;if(o=s.parseHost(u))return o;if(u="",l=PATH_START,e)return;continue}"["==i?h=!0:"]"==i&&(h=!1),u+=i}else{if(""==u)return INVALID_HOST;if(o=s.parseHost(u))return o;if(u="",l=PORT,e==HOSTNAME)return}break;case PORT:if(!exec(DIGIT,i)){if(i==EOF||"/"==i||"?"==i||"#"==i||"\\"==i&&s.isSpecial()||e){if(""!=u){var y=parseInt$1(u,10);if(y>65535)return INVALID_PORT;s.port=s.isSpecial()&&y===specialSchemes[s.scheme]?null:y,u=""}if(e)return;l=PATH_START;continue}return INVALID_PORT}u+=i;break;case FILE:if(s.scheme="file","/"==i||"\\"==i)l=FILE_SLASH;else{if(!r||"file"!=r.scheme){l=PATH;continue}if(i==EOF)s.host=r.host,s.path=arraySliceSimple(r.path),s.query=r.query;else if("?"==i)s.host=r.host,s.path=arraySliceSimple(r.path),s.query="",l=QUERY;else{if("#"!=i){startsWithWindowsDriveLetter(join(arraySliceSimple(n,c),""))||(s.host=r.host,s.path=arraySliceSimple(r.path),s.shortenPath()),l=PATH;continue}s.host=r.host,s.path=arraySliceSimple(r.path),s.query=r.query,s.fragment="",l=FRAGMENT}}break;case FILE_SLASH:if("/"==i||"\\"==i){l=FILE_HOST;break}r&&"file"==r.scheme&&!startsWithWindowsDriveLetter(join(arraySliceSimple(n,c),""))&&(isWindowsDriveLetter(r.path[0],!0)?push(s.path,r.path[0]):s.host=r.host),l=PATH;continue;case FILE_HOST:if(i==EOF||"/"==i||"\\"==i||"?"==i||"#"==i){if(!e&&isWindowsDriveLetter(u))l=PATH;else if(""==u){if(s.host="",e)return;l=PATH_START}else{if(o=s.parseHost(u))return o;if("localhost"==s.host&&(s.host=""),e)return;u="",l=PATH_START}continue}u+=i;break;case PATH_START:if(s.isSpecial()){if(l=PATH,"/"!=i&&"\\"!=i)continue}else if(e||"?"!=i)if(e||"#"!=i){if(i!=EOF&&(l=PATH,"/"!=i))continue}else s.fragment="",l=FRAGMENT;else s.query="",l=QUERY;break;case PATH:if(i==EOF||"/"==i||"\\"==i&&s.isSpecial()||!e&&("?"==i||"#"==i)){if(isDoubleDot(u)?(s.shortenPath(),"/"==i||"\\"==i&&s.isSpecial()||push(s.path,"")):isSingleDot(u)?"/"==i||"\\"==i&&s.isSpecial()||push(s.path,""):("file"==s.scheme&&!s.path.length&&isWindowsDriveLetter(u)&&(s.host&&(s.host=""),u=charAt(u,0)+":"),push(s.path,u)),u="","file"==s.scheme&&(i==EOF||"?"==i||"#"==i))for(;s.path.length>1&&""===s.path[0];)shift(s.path);"?"==i?(s.query="",l=QUERY):"#"==i&&(s.fragment="",l=FRAGMENT)}else u+=percentEncode(i,pathPercentEncodeSet);break;case CANNOT_BE_A_BASE_URL_PATH:"?"==i?(s.query="",l=QUERY):"#"==i?(s.fragment="",l=FRAGMENT):i!=EOF&&(s.path[0]+=percentEncode(i,C0ControlPercentEncodeSet));break;case QUERY:e||"#"!=i?i!=EOF&&("'"==i&&s.isSpecial()?s.query+="%27":s.query+="#"==i?"%23":percentEncode(i,C0ControlPercentEncodeSet)):(s.fragment="",l=FRAGMENT);break;case FRAGMENT:i!=EOF&&(s.fragment+=percentEncode(i,fragmentPercentEncodeSet))}c++}},parseHost:function(t){var e,r,n;if("["==charAt(t,0)){if("]"!=charAt(t,t.length-1))return INVALID_HOST;if(!(e=parseIPv6(stringSlice(t,1,-1))))return INVALID_HOST;this.host=e}else if(this.isSpecial()){if(t=stringPunycodeToAscii(t),exec(FORBIDDEN_HOST_CODE_POINT,t))return INVALID_HOST;if(null===(e=parseIPv4(t)))return INVALID_HOST;this.host=e}else{if(exec(FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT,t))return INVALID_HOST;for(e="",r=arrayFrom(t),n=0;n<r.length;n++)e+=percentEncode(r[n],C0ControlPercentEncodeSet);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return hasOwnProperty_1(specialSchemes,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"==this.scheme&&1==e&&isWindowsDriveLetter(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,r=t.username,n=t.password,i=t.host,a=t.port,o=t.path,s=t.query,l=t.fragment,c=e+":";return null!==i?(c+="//",t.includesCredentials()&&(c+=r+(n?":"+n:"")+"@"),c+=serializeHost(i),null!==a&&(c+=":"+a)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?o[0]:o.length?"/"+join(o,"/"):"",null!==s&&(c+="?"+s),null!==l&&(c+="#"+l),c},setHref:function(t){var e=this.parse(t);if(e)throw TypeError$1(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"==t)try{return new URLConstructor(t.path[0]).origin}catch(t){return"null"}return"file"!=t&&this.isSpecial()?t+"://"+serializeHost(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(toString(t)+":",SCHEME_START)},getUsername:function(){return this.username},setUsername:function(t){var e=arrayFrom(toString(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<e.length;r++)this.username+=percentEncode(e[r],userinfoPercentEncodeSet)}},getPassword:function(){return this.password},setPassword:function(t){var e=arrayFrom(toString(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<e.length;r++)this.password+=percentEncode(e[r],userinfoPercentEncodeSet)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?serializeHost(t):serializeHost(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,HOST)},getHostname:function(){var t=this.host;return null===t?"":serializeHost(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,HOSTNAME)},getPort:function(){var t=this.port;return null===t?"":toString(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""==(t=toString(t))?this.port=null:this.parse(t,PORT))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+join(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,PATH_START))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""==(t=toString(t))?this.query=null:("?"==charAt(t,0)&&(t=stringSlice(t,1)),this.query="",this.parse(t,QUERY)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!=(t=toString(t))?("#"==charAt(t,0)&&(t=stringSlice(t,1)),this.fragment="",this.parse(t,FRAGMENT)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var URLConstructor=function(t){var e=anInstance(this,URLPrototype),r=validateArgumentsLength(arguments.length,1)>1?arguments[1]:void 0,n=setInternalState(e,new URLState(t,!1,r));descriptors||(e.href=n.serialize(),e.origin=n.getOrigin(),e.protocol=n.getProtocol(),e.username=n.getUsername(),e.password=n.getPassword(),e.host=n.getHost(),e.hostname=n.getHostname(),e.port=n.getPort(),e.pathname=n.getPathname(),e.search=n.getSearch(),e.searchParams=n.getSearchParams(),e.hash=n.getHash())},URLPrototype=URLConstructor.prototype,accessorDescriptor=function(t,e){return{get:function(){return getInternalURLState(this)[t]()},set:e&&function(t){return getInternalURLState(this)[e](t)},configurable:!0,enumerable:!0}};if(descriptors&&defineProperties(URLPrototype,{href:accessorDescriptor("serialize","setHref"),origin:accessorDescriptor("getOrigin"),protocol:accessorDescriptor("getProtocol","setProtocol"),username:accessorDescriptor("getUsername","setUsername"),password:accessorDescriptor("getPassword","setPassword"),host:accessorDescriptor("getHost","setHost"),hostname:accessorDescriptor("getHostname","setHostname"),port:accessorDescriptor("getPort","setPort"),pathname:accessorDescriptor("getPathname","setPathname"),search:accessorDescriptor("getSearch","setSearch"),searchParams:accessorDescriptor("getSearchParams"),hash:accessorDescriptor("getHash","setHash")}),redefine(URLPrototype,"toJSON",(function(){return getInternalURLState(this).serialize()}),{enumerable:!0}),redefine(URLPrototype,"toString",(function(){return getInternalURLState(this).serialize()}),{enumerable:!0}),NativeURL){var nativeCreateObjectURL=NativeURL.createObjectURL,nativeRevokeObjectURL=NativeURL.revokeObjectURL;nativeCreateObjectURL&&redefine(URLConstructor,"createObjectURL",functionBindContext(nativeCreateObjectURL,NativeURL)),nativeRevokeObjectURL&&redefine(URLConstructor,"revokeObjectURL",functionBindContext(nativeRevokeObjectURL,NativeURL))}setToStringTag(URLConstructor,"URL"),_export({global:!0,forced:!nativeUrl,sham:!descriptors},{URL:URLConstructor}),_export({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return functionCall(URL.prototype.toString,this)}});
/*!
  * Bootstrap event-handler.js v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
var eventHandler=createCommonjsModule((function(t,e){t.exports=function(){const t=()=>{const{jQuery:t}=window;return t&&!document.body.hasAttribute("data-bs-no-jquery")?t:null},e=/[^.]*(?=\..*)\.|.*/,r=/\..*/,n=/::\d+$/,i={};let a=1;const o={mouseenter:"mouseover",mouseleave:"mouseout"},s=/^(mouseenter|mouseleave)/i,l=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function c(t,e){return e&&`${e}::${a++}`||t.uidEvent||a++}function u(t){const e=c(t);return t.uidEvent=e,i[e]=i[e]||{},i[e]}function d(t,e){return function r(n){return n.delegateTarget=t,r.oneOff&&v.off(t,n.type,e),e.apply(t,[n])}}function h(t,e,r){return function n(i){const a=t.querySelectorAll(e);for(let{target:o}=i;o&&o!==this;o=o.parentNode)for(let s=a.length;s--;)if(a[s]===o)return i.delegateTarget=o,n.oneOff&&v.off(t,i.type,e,r),r.apply(o,[i]);return null}}function g(t,e,r=null){const n=Object.keys(t);for(let i=0,a=n.length;i<a;i++){const a=t[n[i]];if(a.originalHandler===e&&a.delegationSelector===r)return a}return null}function f(t,e,r){const n="string"==typeof e,i=n?r:e;let a=b(t);return l.has(a)||(a=t),[n,i,a]}function p(t,r,n,i,a){if("string"!=typeof r||!t)return;if(n||(n=i,i=null),s.test(r)){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};i?i=t(i):n=t(n)}const[o,l,p]=f(r,n,i),m=u(t),y=m[p]||(m[p]={}),b=g(y,l,o?n:null);if(b)return void(b.oneOff=b.oneOff&&a);const v=c(l,r.replace(e,"")),x=o?h(t,n,i):d(t,n);x.delegationSelector=o?n:null,x.originalHandler=l,x.oneOff=a,x.uidEvent=v,y[v]=x,t.addEventListener(p,x,o)}function m(t,e,r,n,i){const a=g(e[r],n,i);a&&(t.removeEventListener(r,a,Boolean(i)),delete e[r][a.uidEvent])}function y(t,e,r,n){const i=e[r]||{};Object.keys(i).forEach((a=>{if(a.includes(n)){const n=i[a];m(t,e,r,n.originalHandler,n.delegationSelector)}}))}function b(t){return t=t.replace(r,""),o[t]||t}const v={on(t,e,r,n){p(t,e,r,n,!1)},one(t,e,r,n){p(t,e,r,n,!0)},off(t,e,r,i){if("string"!=typeof e||!t)return;const[a,o,s]=f(e,r,i),l=s!==e,c=u(t),d=e.startsWith(".");if(void 0!==o){if(!c||!c[s])return;return void m(t,c,s,o,a?r:null)}d&&Object.keys(c).forEach((r=>{y(t,c,r,e.slice(1))}));const h=c[s]||{};Object.keys(h).forEach((r=>{const i=r.replace(n,"");if(!l||e.includes(i)){const e=h[r];m(t,c,s,e.originalHandler,e.delegationSelector)}}))},trigger(e,r,n){if("string"!=typeof r||!e)return null;const i=t(),a=b(r),o=r!==a,s=l.has(a);let c,u=!0,d=!0,h=!1,g=null;return o&&i&&(c=i.Event(r,n),i(e).trigger(c),u=!c.isPropagationStopped(),d=!c.isImmediatePropagationStopped(),h=c.isDefaultPrevented()),s?(g=document.createEvent("HTMLEvents"),g.initEvent(a,u,!0)):g=new CustomEvent(r,{bubbles:u,cancelable:!0}),void 0!==n&&Object.keys(n).forEach((t=>{Object.defineProperty(g,t,{get:()=>n[t]})})),h&&g.preventDefault(),d&&e.dispatchEvent(g),g.defaultPrevented&&void 0!==c&&c.preventDefault(),g}};return v}()})),data=createCommonjsModule((function(t,e){t.exports=function(){const t=new Map,e={set(e,r,n){t.has(e)||t.set(e,new Map);const i=t.get(e);i.has(r)||0===i.size?i.set(r,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get:(e,r)=>t.has(e)&&t.get(e).get(r)||null,remove(e,r){if(!t.has(e))return;const n=t.get(e);n.delete(r),0===n.size&&t.delete(e)}};return e}()})),baseComponent=createCommonjsModule((function(t,e){t.exports=function(t,e){const r=t=>t&&"object"==typeof t&&"default"in t?t:{default:t},n=r(t),i=r(e),a=1e3,o="transitionend",s=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:r}=window.getComputedStyle(t);const n=Number.parseFloat(e),i=Number.parseFloat(r);return n||i?(e=e.split(",")[0],r=r.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(r))*a):0},l=t=>{t.dispatchEvent(new Event(o))},c=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),u=t=>c(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(t):null,d=t=>{"function"==typeof t&&t()},h=(t,e,r=!0)=>{if(!r)return void d(t);const n=5,i=s(e)+n;let a=!1;const c=({target:r})=>{r===e&&(a=!0,e.removeEventListener(o,c),d(t))};e.addEventListener(o,c),setTimeout((()=>{a||l(e)}),i)},g="5.1.3";class f{constructor(t){(t=u(t))&&(this._element=t,n.default.set(this._element,this.constructor.DATA_KEY,this))}dispose(){n.default.remove(this._element,this.constructor.DATA_KEY),i.default.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach((t=>{this[t]=null}))}_queueCallback(t,e,r=!0){h(t,e,r)}static getInstance(t){return n.default.get(u(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return g}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}return f}(data,eventHandler)}));
/*!
  * Bootstrap data.js v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
/*!
  * Bootstrap button.js v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
createCommonjsModule((function(t,e){t.exports=function(t,e){const r=t=>t&&"object"==typeof t&&"default"in t?t:{default:t},n=r(t),i=r(e),a=()=>{const{jQuery:t}=window;return t&&!document.body.hasAttribute("data-bs-no-jquery")?t:null},o=[],s=t=>{"loading"===document.readyState?(o.length||document.addEventListener("DOMContentLoaded",(()=>{o.forEach((t=>t()))})),o.push(t)):t()},l=t=>{s((()=>{const e=a();if(e){const r=t.NAME,n=e.fn[r];e.fn[r]=t.jQueryInterface,e.fn[r].Constructor=t,e.fn[r].noConflict=()=>(e.fn[r]=n,t.jQueryInterface)}}))},c="button",u="active",d='[data-bs-toggle="button"]',h="click.bs.button.data-api";class g extends i.default{static get NAME(){return c}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(u))}static jQueryInterface(t){return this.each((function(){const e=g.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}return n.default.on(document,h,d,(t=>{t.preventDefault();const e=t.target.closest(d);g.getOrCreateInstance(e).toggle()})),l(g),g}(eventHandler,baseComponent)}));
/*!
  * Bootstrap manipulator.js v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
var manipulator=createCommonjsModule((function(t,e){t.exports=function(){function t(t){return"true"===t||"false"!==t&&(t===Number(t).toString()?Number(t):""===t||"null"===t?null:t)}function e(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const r={setDataAttribute(t,r,n){t.setAttribute(`data-bs-${e(r)}`,n)},removeDataAttribute(t,r){t.removeAttribute(`data-bs-${e(r)}`)},getDataAttributes(e){if(!e)return{};const r={};return Object.keys(e.dataset).filter((t=>t.startsWith("bs"))).forEach((n=>{let i=n.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),r[i]=t(e.dataset[n])})),r},getDataAttribute:(r,n)=>t(r.getAttribute(`data-bs-${e(n)}`)),offset(t){const e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset,left:e.left+window.pageXOffset}},position:t=>({top:t.offsetTop,left:t.offsetLeft})};return r}()})),selectorEngine=createCommonjsModule((function(t,e){t.exports=function(){const t=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),e=e=>!(!t(e)||0===e.getClientRects().length)&&"visible"===getComputedStyle(e).getPropertyValue("visibility"),r=t=>!t||t.nodeType!==Node.ELEMENT_NODE||!!t.classList.contains("disabled")||(void 0!==t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled")),n=3,i={find:(t,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,t)),findOne:(t,e=document.documentElement)=>Element.prototype.querySelector.call(e,t),children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const r=[];let i=t.parentNode;for(;i&&i.nodeType===Node.ELEMENT_NODE&&i.nodeType!==n;)i.matches(e)&&r.push(i),i=i.parentNode;return r},prev(t,e){let r=t.previousElementSibling;for(;r;){if(r.matches(e))return[r];r=r.previousElementSibling}return[]},next(t,e){let r=t.nextElementSibling;for(;r;){if(r.matches(e))return[r];r=r.nextElementSibling}return[]},focusableChildren(t){const n=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(", ");return this.find(n,t).filter((t=>!r(t)&&e(t)))}};return i}()}));
/*!
  * Bootstrap selector-engine.js v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
/*!
  * Bootstrap collapse.js v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
createCommonjsModule((function(t,e){t.exports=function(t,e,r,n,i){const a=t=>t&&"object"==typeof t&&"default"in t?t:{default:t},o=a(t),s=a(e),l=a(r),c=a(n),u=a(i),d=t=>null==t?`${t}`:{}.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),h=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let r=t.getAttribute("href");if(!r||!r.includes("#")&&!r.startsWith("."))return null;r.includes("#")&&!r.startsWith("#")&&(r=`#${r.split("#")[1]}`),e=r&&"#"!==r?r.trim():null}return e},g=t=>{const e=h(t);return e&&document.querySelector(e)?e:null},f=t=>{const e=h(t);return e?document.querySelector(e):null},p=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),m=t=>p(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(t):null,y=(t,e,r)=>{Object.keys(r).forEach((n=>{const i=r[n],a=e[n],o=a&&p(a)?"element":d(a);if(!new RegExp(i).test(o))throw new TypeError(`${t.toUpperCase()}: Option "${n}" provided type "${o}" but expected type "${i}".`)}))},b=t=>{t.offsetHeight},v=()=>{const{jQuery:t}=window;return t&&!document.body.hasAttribute("data-bs-no-jquery")?t:null},x=[],I=t=>{"loading"===document.readyState?(x.length||document.addEventListener("DOMContentLoaded",(()=>{x.forEach((t=>t()))})),x.push(t)):t()},B=t=>{I((()=>{const e=v();if(e){const r=t.NAME,n=e.fn[r];e.fn[r]=t.jQueryInterface,e.fn[r].Constructor=t,e.fn[r].noConflict=()=>(e.fn[r]=n,t.jQueryInterface)}}))},C="collapse",F="bs.collapse",A=`.${F}`,Q={toggle:!0,parent:null},_={toggle:"boolean",parent:"(null|element)"},w=`show${A}`,U=`shown${A}`,S=`hide${A}`,E=`hidden${A}`,L=`click${A}.data-api`,T="show",R="collapse",k="collapsing",G="collapsed",N=`:scope .${R} .${R}`,M="collapse-horizontal",D="width",X="height",V=".collapse.show, .collapse.collapsing",W='[data-bs-toggle="collapse"]';class Z extends u.default{constructor(t,e){super(t),this._isTransitioning=!1,this._config=this._getConfig(e),this._triggerArray=[];const r=c.default.find(W);for(let t=0,e=r.length;t<e;t++){const e=r[t],n=g(e),i=c.default.find(n).filter((t=>t===this._element));null!==n&&i.length&&(this._selector=n,this._triggerArray.push(e))}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Q}static get NAME(){return C}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t,e=[];if(this._config.parent){const t=c.default.find(N,this._config.parent);e=c.default.find(V,this._config.parent).filter((e=>!t.includes(e)))}const r=c.default.findOne(this._selector);if(e.length){const n=e.find((t=>r!==t));if(t=n?Z.getInstance(n):null,t&&t._isTransitioning)return}if(s.default.trigger(this._element,w).defaultPrevented)return;e.forEach((e=>{r!==e&&Z.getOrCreateInstance(e,{toggle:!1}).hide(),t||o.default.set(e,F,null)}));const n=this._getDimension();this._element.classList.remove(R),this._element.classList.add(k),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(k),this._element.classList.add(R,T),this._element.style[n]="",s.default.trigger(this._element,U)},a=`scroll${n[0].toUpperCase()+n.slice(1)}`;this._queueCallback(i,this._element,!0),this._element.style[n]=`${this._element[a]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(s.default.trigger(this._element,S).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,b(this._element),this._element.classList.add(k),this._element.classList.remove(R,T);const e=this._triggerArray.length;for(let t=0;t<e;t++){const e=this._triggerArray[t],r=f(e);r&&!this._isShown(r)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(k),this._element.classList.add(R),s.default.trigger(this._element,E)};this._element.style[t]="",this._queueCallback(r,this._element,!0)}_isShown(t=this._element){return t.classList.contains(T)}_getConfig(t){return(t={...Q,...l.default.getDataAttributes(this._element),...t}).toggle=Boolean(t.toggle),t.parent=m(t.parent),y(C,t,_),t}_getDimension(){return this._element.classList.contains(M)?D:X}_initializeChildren(){if(!this._config.parent)return;const t=c.default.find(N,this._config.parent);c.default.find(W,this._config.parent).filter((e=>!t.includes(e))).forEach((t=>{const e=f(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}))}_addAriaAndCollapsedClass(t,e){t.length&&t.forEach((t=>{e?t.classList.remove(G):t.classList.add(G),t.setAttribute("aria-expanded",e)}))}static jQueryInterface(t){return this.each((function(){const e={};"string"==typeof t&&/show|hide/.test(t)&&(e.toggle=!1);const r=Z.getOrCreateInstance(this,e);if("string"==typeof t){if(void 0===r[t])throw new TypeError(`No method named "${t}"`);r[t]()}}))}}return s.default.on(document,L,W,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();const e=g(this);c.default.find(e).forEach((t=>{Z.getOrCreateInstance(t,{toggle:!1}).toggle()}))})),B(Z),Z}(data,eventHandler,manipulator,selectorEngine,baseComponent)}));
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const t$3=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,e$5=Symbol(),n$6=new Map;class s$4{constructor(t,e){if(this._$cssResult$=!0,e!==e$5)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){let t=n$6.get(this.cssText);return t$3&&void 0===t&&(n$6.set(this.cssText,t=new CSSStyleSheet),t.replaceSync(this.cssText)),t}toString(){return this.cssText}}const o$5=t=>new s$4("string"==typeof t?t:t+"",e$5),r$6=(t,...e)=>{const r=1===t.length?t[0]:e.reduce(((e,r,n)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+t[n+1]),t[0]);return new s$4(r,e$5)},i$4=(t,e)=>{t$3?t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):e.forEach((e=>{const r=document.createElement("style"),n=window.litNonce;void 0!==n&&r.setAttribute("nonce",n),r.textContent=e.cssText,t.appendChild(r)}))},S$3=t$3?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const r of t.cssRules)e+=r.cssText;return o$5(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var s$3;const e$4=window.trustedTypes,r$5=e$4?e$4.emptyScript:"",h$4=window.reactiveElementPolyfillSupport,o$4={toAttribute(t,e){switch(e){case Boolean:t=t?r$5:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=null!==t;break;case Number:r=null===t?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch(t){r=null}}return r}},n$5=(t,e)=>e!==t&&(e==e||t==t),l$5={attribute:!0,type:String,converter:o$4,reflect:!1,hasChanged:n$5};class a$3 extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(t){var e;null!==(e=this.l)&&void 0!==e||(this.l=[]),this.l.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,r)=>{const n=this._$Eh(r,e);void 0!==n&&(this._$Eu.set(n,r),t.push(n))})),t}static createProperty(t,e=l$5){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const r="symbol"==typeof t?Symbol():"__"+t,n=this.getPropertyDescriptor(t,r,e);void 0!==n&&Object.defineProperty(this.prototype,t,n)}}static getPropertyDescriptor(t,e,r){return{get(){return this[e]},set(n){const i=this[t];this[e]=n,this.requestUpdate(t,i,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||l$5}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const r of e)this.createProperty(r,t[r])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const r=new Set(t.flat(1/0).reverse());for(const t of r)e.unshift(S$3(t))}else void 0!==t&&e.push(S$3(t));return e}static _$Eh(t,e){const r=e.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof t?t.toLowerCase():void 0}o(){var t;this._$Ep=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(t=this.constructor.l)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,r;(null!==(e=this._$Eg)&&void 0!==e?e:this._$Eg=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(r=t.hostConnected)||void 0===r||r.call(t))}removeController(t){var e;null===(e=this._$Eg)||void 0===e||e.splice(this._$Eg.indexOf(t)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Et.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const e=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return i$4(e,this.constructor.elementStyles),e}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,r){this._$AK(t,r)}_$ES(t,e,r=l$5){var n,i;const a=this.constructor._$Eh(t,r);if(void 0!==a&&!0===r.reflect){const o=(null!==(i=null===(n=r.converter)||void 0===n?void 0:n.toAttribute)&&void 0!==i?i:o$4.toAttribute)(e,r.type);this._$Ei=t,null==o?this.removeAttribute(a):this.setAttribute(a,o),this._$Ei=null}}_$AK(t,e){var r,n,i;const a=this.constructor,o=a._$Eu.get(t);if(void 0!==o&&this._$Ei!==o){const t=a.getPropertyOptions(o),s=t.converter,l=null!==(i=null!==(n=null===(r=s)||void 0===r?void 0:r.fromAttribute)&&void 0!==n?n:"function"==typeof s?s:null)&&void 0!==i?i:o$4.fromAttribute;this._$Ei=o,this[o]=l(e,t.type),this._$Ei=null}}requestUpdate(t,e,r){let n=!0;void 0!==t&&(((r=r||this.constructor.getPropertyOptions(t)).hasChanged||n$5)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===r.reflect&&this._$Ei!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,r))):n=!1),!this.isUpdatePending&&n&&(this._$Ep=this._$E_())}async _$E_(){this.isUpdatePending=!0;try{await this._$Ep}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((t,e)=>this[e]=t)),this._$Et=void 0);let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(r)):this._$EU()}catch(t){throw e=!1,this._$EU(),t}e&&this._$AE(r)}willUpdate(t){}_$AE(t){var e;null===(e=this._$Eg)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,e)=>this._$ES(e,this[e],t))),this._$EC=void 0),this._$EU()}updated(t){}firstUpdated(t){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var t$2;a$3.finalized=!0,a$3.elementProperties=new Map,a$3.elementStyles=[],a$3.shadowRootOptions={mode:"open"},null==h$4||h$4({ReactiveElement:a$3}),(null!==(s$3=globalThis.reactiveElementVersions)&&void 0!==s$3?s$3:globalThis.reactiveElementVersions=[]).push("1.3.1");const i$3=globalThis.trustedTypes,s$2=i$3?i$3.createPolicy("lit-html",{createHTML:t=>t}):void 0,e$3=`lit$${(Math.random()+"").slice(9)}$`,o$3="?"+e$3,n$4=`<${o$3}>`,l$4=document,h$3=(t="")=>l$4.createComment(t),r$4=t=>null===t||"object"!=typeof t&&"function"!=typeof t,d$3=Array.isArray,u$1=t=>{var e;return d$3(t)||"function"==typeof(null===(e=t)||void 0===e?void 0:e[Symbol.iterator])},c$1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,v$1=/-->/g,a$2=/>/g,f$1=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,_$q=/'/g,m$1=/"/g,g$2=/^(?:script|style|textarea|title)$/i,p$1=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),$$1=p$1(1),y$1=p$1(2),b$2=Symbol.for("lit-noChange"),w$2=Symbol.for("lit-nothing"),T$1=new WeakMap,x$2=(t,e,r)=>{var n,i;const a=null!==(n=null==r?void 0:r.renderBefore)&&void 0!==n?n:e;let o=a._$litPart$;if(void 0===o){const t=null!==(i=null==r?void 0:r.renderBefore)&&void 0!==i?i:null;a._$litPart$=o=new N$1(e.insertBefore(h$3(),t),t,void 0,null!=r?r:{})}return o._$AI(t),o},A$2=l$4.createTreeWalker(l$4,129,null,!1),C$1=(t,e)=>{const r=t.length-1,n=[];let i,a=2===e?"<svg>":"",o=c$1;for(let e=0;e<r;e++){const r=t[e];let s,l,c=-1,u=0;for(;u<r.length&&(o.lastIndex=u,l=o.exec(r),null!==l);)u=o.lastIndex,o===c$1?"!--"===l[1]?o=v$1:void 0!==l[1]?o=a$2:void 0!==l[2]?(g$2.test(l[2])&&(i=RegExp("</"+l[2],"g")),o=f$1):void 0!==l[3]&&(o=f$1):o===f$1?">"===l[0]?(o=null!=i?i:c$1,c=-1):void 0===l[1]?c=-2:(c=o.lastIndex-l[2].length,s=l[1],o=void 0===l[3]?f$1:'"'===l[3]?m$1:_$q):o===m$1||o===_$q?o=f$1:o===v$1||o===a$2?o=c$1:(o=f$1,i=void 0);const d=o===f$1&&t[e+1].startsWith("/>")?" ":"";a+=o===c$1?r+n$4:c>=0?(n.push(s),r.slice(0,c)+"$lit$"+r.slice(c)+e$3+d):r+e$3+(-2===c?(n.push(void 0),e):d)}const s=a+(t[r]||"<?>")+(2===e?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==s$2?s$2.createHTML(s):s,n]};class E$1{constructor({strings:t,_$litType$:e},r){let n;this.parts=[];let i=0,a=0;const o=t.length-1,s=this.parts,[l,c]=C$1(t,e);if(this.el=E$1.createElement(l,r),A$2.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(n=A$2.nextNode())&&s.length<o;){if(1===n.nodeType){if(n.hasAttributes()){const t=[];for(const e of n.getAttributeNames())if(e.endsWith("$lit$")||e.startsWith(e$3)){const r=c[a++];if(t.push(e),void 0!==r){const t=n.getAttribute(r.toLowerCase()+"$lit$").split(e$3),e=/([.?@])?(.*)/.exec(r);s.push({type:1,index:i,name:e[2],strings:t,ctor:"."===e[1]?M$1:"?"===e[1]?H$1:"@"===e[1]?I$1:S$2})}else s.push({type:6,index:i})}for(const e of t)n.removeAttribute(e)}if(g$2.test(n.tagName)){const t=n.textContent.split(e$3),e=t.length-1;if(e>0){n.textContent=i$3?i$3.emptyScript:"";for(let r=0;r<e;r++)n.append(t[r],h$3()),A$2.nextNode(),s.push({type:2,index:++i});n.append(t[e],h$3())}}}else if(8===n.nodeType)if(n.data===o$3)s.push({type:2,index:i});else{let t=-1;for(;-1!==(t=n.data.indexOf(e$3,t+1));)s.push({type:7,index:i}),t+=e$3.length-1}i++}}static createElement(t,e){const r=l$4.createElement("template");return r.innerHTML=t,r}}function P$1(t,e,r=t,n){var i,a,o,s;if(e===b$2)return e;let l=void 0!==n?null===(i=r._$Cl)||void 0===i?void 0:i[n]:r._$Cu;const c=r$4(e)?void 0:e._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(a=null==l?void 0:l._$AO)||void 0===a||a.call(l,!1),void 0===c?l=void 0:(l=new c(t),l._$AT(t,r,n)),void 0!==n?(null!==(o=(s=r)._$Cl)&&void 0!==o?o:s._$Cl=[])[n]=l:r._$Cu=l),void 0!==l&&(e=P$1(t,l._$AS(t,e.values),l,n)),e}class V$1{constructor(t,e){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var e;const{el:{content:r},parts:n}=this._$AD,i=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:l$4).importNode(r,!0);A$2.currentNode=i;let a=A$2.nextNode(),o=0,s=0,l=n[0];for(;void 0!==l;){if(o===l.index){let e;2===l.type?e=new N$1(a,a.nextSibling,this,t):1===l.type?e=new l.ctor(a,l.name,l.strings,this,t):6===l.type&&(e=new L$1(a,this,t)),this.v.push(e),l=n[++s]}o!==(null==l?void 0:l.index)&&(a=A$2.nextNode(),o++)}return i}m(t){let e=0;for(const r of this.v)void 0!==r&&(void 0!==r.strings?(r._$AI(t,r,e),e+=r.strings.length-2):r._$AI(t[e])),e++}}class N$1{constructor(t,e,r,n){var i;this.type=2,this._$AH=w$2,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=r,this.options=n,this._$Cg=null===(i=null==n?void 0:n.isConnected)||void 0===i||i}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=P$1(this,t,e),r$4(t)?t===w$2||null==t||""===t?(this._$AH!==w$2&&this._$AR(),this._$AH=w$2):t!==this._$AH&&t!==b$2&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.k(t):u$1(t)?this.S(t):this.$(t)}A(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.A(t))}$(t){this._$AH!==w$2&&r$4(this._$AH)?this._$AA.nextSibling.data=t:this.k(l$4.createTextNode(t)),this._$AH=t}T(t){var e;const{values:r,_$litType$:n}=t,i="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=E$1.createElement(n.h,this.options)),n);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===i)this._$AH.m(r);else{const t=new V$1(i,this),e=t.p(this.options);t.m(r),this.k(e),this._$AH=t}}_$AC(t){let e=T$1.get(t.strings);return void 0===e&&T$1.set(t.strings,e=new E$1(t)),e}S(t){d$3(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let r,n=0;for(const i of t)n===e.length?e.push(r=new N$1(this.A(h$3()),this.A(h$3()),this,this.options)):r=e[n],r._$AI(i),n++;n<e.length&&(this._$AR(r&&r._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){var r;for(null===(r=this._$AP)||void 0===r||r.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cg=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class S$2{constructor(t,e,r,n,i){this.type=1,this._$AH=w$2,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=i,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=w$2}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,r,n){const i=this.strings;let a=!1;if(void 0===i)t=P$1(this,t,e,0),a=!r$4(t)||t!==this._$AH&&t!==b$2,a&&(this._$AH=t);else{const n=t;let o,s;for(t=i[0],o=0;o<i.length-1;o++)s=P$1(this,n[r+o],e,o),s===b$2&&(s=this._$AH[o]),a||(a=!r$4(s)||s!==this._$AH[o]),s===w$2?t=w$2:t!==w$2&&(t+=(null!=s?s:"")+i[o+1]),this._$AH[o]=s}a&&!n&&this.C(t)}C(t){t===w$2?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class M$1 extends S$2{constructor(){super(...arguments),this.type=3}C(t){this.element[this.name]=t===w$2?void 0:t}}const k$1=i$3?i$3.emptyScript:"";class H$1 extends S$2{constructor(){super(...arguments),this.type=4}C(t){t&&t!==w$2?this.element.setAttribute(this.name,k$1):this.element.removeAttribute(this.name)}}class I$1 extends S$2{constructor(t,e,r,n,i){super(t,e,r,n,i),this.type=5}_$AI(t,e=this){var r;if((t=null!==(r=P$1(this,t,e,0))&&void 0!==r?r:w$2)===b$2)return;const n=this._$AH,i=t===w$2&&n!==w$2||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,a=t!==w$2&&(n===w$2||i);i&&this.element.removeEventListener(this.name,this,n),a&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,r;"function"==typeof this._$AH?this._$AH.call(null!==(r=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==r?r:this.element,t):this._$AH.handleEvent(t)}}class L$1{constructor(t,e,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){P$1(this,t)}}const z$1=window.litHtmlPolyfillSupport;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var l$3,o$2;null==z$1||z$1(E$1,N$1),(null!==(t$2=globalThis.litHtmlVersions)&&void 0!==t$2?t$2:globalThis.litHtmlVersions=[]).push("2.2.1");class s$1 extends a$3{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var t,e;const r=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=r.firstChild),r}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Dt=x$2(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!1)}render(){return b$2}}s$1.finalized=!0,s$1._$litElement$=!0,null===(l$3=globalThis.litElementHydrateSupport)||void 0===l$3||l$3.call(globalThis,{LitElement:s$1});const n$3=globalThis.litElementPolyfillSupport;function ascending$1(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bisector(t){let e=t,r=t,n=t;function i(t,e,i=0,a=t.length){if(i<a){if(0!==r(e,e))return a;do{const r=i+a>>>1;n(t[r],e)<0?i=r+1:a=r}while(i<a)}return i}return 2!==t.length&&(e=(e,r)=>t(e)-r,r=ascending$1,n=(e,r)=>ascending$1(t(e),r)),{left:i,center:function(t,r,n=0,a=t.length){const o=i(t,r,n,a-1);return o>n&&e(t[o-1],r)>-e(t[o],r)?o-1:o},right:function(t,e,i=0,a=t.length){if(i<a){if(0!==r(e,e))return a;do{const r=i+a>>>1;n(t[r],e)<=0?i=r+1:a=r}while(i<a)}return i}}}function number$3(t){return null===t?NaN:+t}null==n$3||n$3({LitElement:s$1}),(null!==(o$2=globalThis.litElementVersions)&&void 0!==o$2?o$2:globalThis.litElementVersions=[]).push("3.2.0");const ascendingBisect=bisector(ascending$1),bisectRight=ascendingBisect.right;bisector(number$3).center;var bisect=bisectRight,e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function ticks(t,e,r){var n,i,a,o,s=-1;if(r=+r,(t=+t)===(e=+e)&&r>0)return[t];if((n=e<t)&&(i=t,t=e,e=i),0===(o=tickIncrement$1(t,e,r))||!isFinite(o))return[];if(o>0){let r=Math.round(t/o),n=Math.round(e/o);for(r*o<t&&++r,n*o>e&&--n,a=new Array(i=n-r+1);++s<i;)a[s]=(r+s)*o}else{o=-o;let r=Math.round(t*o),n=Math.round(e*o);for(r/o<t&&++r,n/o>e&&--n,a=new Array(i=n-r+1);++s<i;)a[s]=(r+s)/o}return n&&a.reverse(),a}function tickIncrement$1(t,e,r){var n=(e-t)/Math.max(0,r),i=Math.floor(Math.log(n)/Math.LN10),a=n/Math.pow(10,i);return i>=0?(a>=e10?10:a>=e5?5:a>=e2?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=e10?10:a>=e5?5:a>=e2?2:1)}function tickStep(t,e,r){var n=Math.abs(e-t)/Math.max(0,r),i=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),a=n/i;return a>=e10?i*=10:a>=e5?i*=5:a>=e2&&(i*=2),e<t?-i:i}function range(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=0|Math.max(0,Math.ceil((e-t)/r)),a=new Array(i);++n<i;)a[n]=t+n*r;return a}function identity$8(t){return t}var top=1,right=2,bottom=3,left=4,epsilon$4=1e-6;function translateX(t){return"translate("+t+",0)"}function translateY(t){return"translate(0,"+t+")"}function number$2(t){return e=>+t(e)}function center(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),r=>+t(r)+e}function entering(){return!this.__axis}function axis(t,e){var r=[],n=null,i=null,a=6,o=6,s=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=t===top||t===left?-1:1,u=t===left||t===right?"x":"y",d=t===top||t===bottom?translateX:translateY;function h(h){var g=null==n?e.ticks?e.ticks.apply(e,r):e.domain():n,f=null==i?e.tickFormat?e.tickFormat.apply(e,r):identity$8:i,p=Math.max(a,0)+s,m=e.range(),y=+m[0]+l,b=+m[m.length-1]+l,v=(e.bandwidth?center:number$2)(e.copy(),l),x=h.selection?h.selection():h,I=x.selectAll(".domain").data([null]),B=x.selectAll(".tick").data(g,e).order(),C=B.exit(),F=B.enter().append("g").attr("class","tick"),A=B.select("line"),Q=B.select("text");I=I.merge(I.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),B=B.merge(F),A=A.merge(F.append("line").attr("stroke","currentColor").attr(u+"2",c*a)),Q=Q.merge(F.append("text").attr("fill","currentColor").attr(u,c*p).attr("dy",t===top?"0em":t===bottom?"0.71em":"0.32em")),h!==x&&(I=I.transition(h),B=B.transition(h),A=A.transition(h),Q=Q.transition(h),C=C.transition(h).attr("opacity",epsilon$4).attr("transform",(function(t){return isFinite(t=v(t))?d(t+l):this.getAttribute("transform")})),F.attr("opacity",epsilon$4).attr("transform",(function(t){var e=this.parentNode.__axis;return d((e&&isFinite(e=e(t))?e:v(t))+l)}))),C.remove(),I.attr("d",t===left||t===right?o?"M"+c*o+","+y+"H"+l+"V"+b+"H"+c*o:"M"+l+","+y+"V"+b:o?"M"+y+","+c*o+"V"+l+"H"+b+"V"+c*o:"M"+y+","+l+"H"+b),B.attr("opacity",1).attr("transform",(function(t){return d(v(t)+l)})),A.attr(u+"2",c*a),Q.attr(u,c*p).text(f),x.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===right?"start":t===left?"end":"middle"),x.each((function(){this.__axis=v}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.ticks=function(){return r=Array.from(arguments),h},h.tickArguments=function(t){return arguments.length?(r=null==t?[]:Array.from(t),h):r.slice()},h.tickValues=function(t){return arguments.length?(n=null==t?null:Array.from(t),h):n&&n.slice()},h.tickFormat=function(t){return arguments.length?(i=t,h):i},h.tickSize=function(t){return arguments.length?(a=o=+t,h):a},h.tickSizeInner=function(t){return arguments.length?(a=+t,h):a},h.tickSizeOuter=function(t){return arguments.length?(o=+t,h):o},h.tickPadding=function(t){return arguments.length?(s=+t,h):s},h.offset=function(t){return arguments.length?(l=+t,h):l},h}function axisBottom(t){return axis(bottom,t)}function axisLeft(t){return axis(left,t)}var noop$2={value:()=>{}};function dispatch(){for(var t,e=0,r=arguments.length,n={};e<r;++e){if(!(t=arguments[e]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new Dispatch(n)}function Dispatch(t){this._=t}function parseTypenames$1(t,e){return t.trim().split(/^|\s+/).map((function(t){var r="",n=t.indexOf(".");if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}}))}function get$1(t,e){for(var r,n=0,i=t.length;n<i;++n)if((r=t[n]).name===e)return r.value}function set$1(t,e,r){for(var n=0,i=t.length;n<i;++n)if(t[n].name===e){t[n]=noop$2,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=r&&t.push({name:e,value:r}),t}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(t,e){var r,n=this._,i=parseTypenames$1(t+"",n),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<o;)if(r=(t=i[a]).type)n[r]=set$1(n[r],t.name,e);else if(null==e)for(r in n)n[r]=set$1(n[r],t.name,null);return this}for(;++a<o;)if((r=(t=i[a]).type)&&(r=get$1(n[r],t.name)))return r},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Dispatch(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var r,n,i=new Array(r),a=0;a<r;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,r=(n=this._[t]).length;a<r;++a)n[a].value.apply(e,i)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],i=0,a=n.length;i<a;++i)n[i].value.apply(e,r)}};var xhtml="http://www.w3.org/1999/xhtml",namespaces={svg:"http://www.w3.org/2000/svg",xhtml:xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(t){var e=t+="",r=e.indexOf(":");return r>=0&&"xmlns"!==(e=t.slice(0,r))&&(t=t.slice(r+1)),namespaces.hasOwnProperty(e)?{space:namespaces[e],local:t}:t}function creatorInherit(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===xhtml&&e.documentElement.namespaceURI===xhtml?e.createElement(t):e.createElementNS(r,t)}}function creatorFixed(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function creator(t){var e=namespace(t);return(e.local?creatorFixed:creatorInherit)(e)}function none(){}function selector$1(t){return null==t?none:function(){return this.querySelector(t)}}function selection_select(t){"function"!=typeof t&&(t=selector$1(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var a,o,s=e[i],l=s.length,c=n[i]=new Array(l),u=0;u<l;++u)(a=s[u])&&(o=t.call(a,a.__data__,u,s))&&("__data__"in a&&(o.__data__=a.__data__),c[u]=o);return new Selection$1(n,this._parents)}function array$2(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function empty(){return[]}function selectorAll(t){return null==t?empty:function(){return this.querySelectorAll(t)}}function arrayAll(t){return function(){return array$2(t.apply(this,arguments))}}function selection_selectAll(t){t="function"==typeof t?arrayAll(t):selectorAll(t);for(var e=this._groups,r=e.length,n=[],i=[],a=0;a<r;++a)for(var o,s=e[a],l=s.length,c=0;c<l;++c)(o=s[c])&&(n.push(t.call(o,o.__data__,c,s)),i.push(o));return new Selection$1(n,i)}function matcher(t){return function(){return this.matches(t)}}function childMatcher(t){return function(e){return e.matches(t)}}var find=Array.prototype.find;function childFind(t){return function(){return find.call(this.children,t)}}function childFirst(){return this.firstElementChild}function selection_selectChild(t){return this.select(null==t?childFirst:childFind("function"==typeof t?t:childMatcher(t)))}var filter$2=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(t){return function(){return filter$2.call(this.children,t)}}function selection_selectChildren(t){return this.selectAll(null==t?children:childrenFilter("function"==typeof t?t:childMatcher(t)))}function selection_filter(t){"function"!=typeof t&&(t=matcher(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var a,o=e[i],s=o.length,l=n[i]=[],c=0;c<s;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&l.push(a);return new Selection$1(n,this._parents)}function sparse(t){return new Array(t.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function constant$3(t){return function(){return t}}function bindIndex(t,e,r,n,i,a){for(var o,s=0,l=e.length,c=a.length;s<c;++s)(o=e[s])?(o.__data__=a[s],n[s]=o):r[s]=new EnterNode(t,a[s]);for(;s<l;++s)(o=e[s])&&(i[s]=o)}function bindKey(t,e,r,n,i,a,o){var s,l,c,u=new Map,d=e.length,h=a.length,g=new Array(d);for(s=0;s<d;++s)(l=e[s])&&(g[s]=c=o.call(l,l.__data__,s,e)+"",u.has(c)?i[s]=l:u.set(c,l));for(s=0;s<h;++s)c=o.call(t,a[s],s,a)+"",(l=u.get(c))?(n[s]=l,l.__data__=a[s],u.delete(c)):r[s]=new EnterNode(t,a[s]);for(s=0;s<d;++s)(l=e[s])&&u.get(g[s])===l&&(i[s]=l)}function datum(t){return t.__data__}function selection_data(t,e){if(!arguments.length)return Array.from(this,datum);var r=e?bindKey:bindIndex,n=this._parents,i=this._groups;"function"!=typeof t&&(t=constant$3(t));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var u=n[c],d=i[c],h=d.length,g=arraylike(t.call(u,u&&u.__data__,c,n)),f=g.length,p=s[c]=new Array(f),m=o[c]=new Array(f),y=l[c]=new Array(h);r(u,d,p,m,y,g,e);for(var b,v,x=0,I=0;x<f;++x)if(b=p[x]){for(x>=I&&(I=x+1);!(v=m[I])&&++I<f;);b._next=v||null}}return(o=new Selection$1(o,n))._enter=s,o._exit=l,o}function arraylike(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(t,e,r){var n=this.enter(),i=this,a=this.exit();return"function"==typeof t?(n=t(n))&&(n=n.selection()):n=n.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==r?a.remove():r(a),n&&i?n.merge(i).order():i}function selection_merge(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,i=r.length,a=n.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var c,u=r[l],d=n[l],h=u.length,g=s[l]=new Array(h),f=0;f<h;++f)(c=u[f]||d[f])&&(g[f]=c);for(;l<i;++l)s[l]=r[l];return new Selection$1(s,this._parents)}function selection_order(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n,i=t[e],a=i.length-1,o=i[a];--a>=0;)(n=i[a])&&(o&&4^n.compareDocumentPosition(o)&&o.parentNode.insertBefore(n,o),o=n);return this}function selection_sort(t){function e(e,r){return e&&r?t(e.__data__,r.__data__):!e-!r}t||(t=ascending);for(var r=this._groups,n=r.length,i=new Array(n),a=0;a<n;++a){for(var o,s=r[a],l=s.length,c=i[a]=new Array(l),u=0;u<l;++u)(o=s[u])&&(c[u]=o);c.sort(e)}return new Selection$1(i,this._parents).order()}function ascending(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function selection_call(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,a=n.length;i<a;++i){var o=n[i];if(o)return o}return null}function selection_size(){let t=0;for(const e of this)++t;return t}function selection_empty(){return!this.node()}function selection_each(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var i,a=e[r],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this}function attrRemove$1(t){return function(){this.removeAttribute(t)}}function attrRemoveNS$1(t){return function(){this.removeAttributeNS(t.space,t.local)}}function attrConstant$1(t,e){return function(){this.setAttribute(t,e)}}function attrConstantNS$1(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function attrFunction$1(t,e){return function(){var r=e.apply(this,arguments);null==r?this.removeAttribute(t):this.setAttribute(t,r)}}function attrFunctionNS$1(t,e){return function(){var r=e.apply(this,arguments);null==r?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function selection_attr(t,e){var r=namespace(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((null==e?r.local?attrRemoveNS$1:attrRemove$1:"function"==typeof e?r.local?attrFunctionNS$1:attrFunction$1:r.local?attrConstantNS$1:attrConstant$1)(r,e))}function defaultView(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function styleRemove$1(t){return function(){this.style.removeProperty(t)}}function styleConstant$1(t,e,r){return function(){this.style.setProperty(t,e,r)}}function styleFunction$1(t,e,r){return function(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function selection_style(t,e,r){return arguments.length>1?this.each((null==e?styleRemove$1:"function"==typeof e?styleFunction$1:styleConstant$1)(t,e,null==r?"":r)):styleValue(this.node(),t)}function styleValue(t,e){return t.style.getPropertyValue(e)||defaultView(t).getComputedStyle(t,null).getPropertyValue(e)}function propertyRemove(t){return function(){delete this[t]}}function propertyConstant(t,e){return function(){this[t]=e}}function propertyFunction(t,e){return function(){var r=e.apply(this,arguments);null==r?delete this[t]:this[t]=r}}function selection_property(t,e){return arguments.length>1?this.each((null==e?propertyRemove:"function"==typeof e?propertyFunction:propertyConstant)(t,e)):this.node()[t]}function classArray(t){return t.trim().split(/^|\s+/)}function classList(t){return t.classList||new ClassList(t)}function ClassList(t){this._node=t,this._names=classArray(t.getAttribute("class")||"")}function classedAdd(t,e){for(var r=classList(t),n=-1,i=e.length;++n<i;)r.add(e[n])}function classedRemove(t,e){for(var r=classList(t),n=-1,i=e.length;++n<i;)r.remove(e[n])}function classedTrue(t){return function(){classedAdd(this,t)}}function classedFalse(t){return function(){classedRemove(this,t)}}function classedFunction(t,e){return function(){(e.apply(this,arguments)?classedAdd:classedRemove)(this,t)}}function selection_classed(t,e){var r=classArray(t+"");if(arguments.length<2){for(var n=classList(this.node()),i=-1,a=r.length;++i<a;)if(!n.contains(r[i]))return!1;return!0}return this.each(("function"==typeof e?classedFunction:e?classedTrue:classedFalse)(r,e))}function textRemove(){this.textContent=""}function textConstant$1(t){return function(){this.textContent=t}}function textFunction$1(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function selection_text(t){return arguments.length?this.each(null==t?textRemove:("function"==typeof t?textFunction$1:textConstant$1)(t)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(t){return function(){this.innerHTML=t}}function htmlFunction(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function selection_html(t){return arguments.length?this.each(null==t?htmlRemove:("function"==typeof t?htmlFunction:htmlConstant)(t)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(t){var e="function"==typeof t?t:creator(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function constantNull(){return null}function selection_insert(t,e){var r="function"==typeof t?t:creator(t),n=null==e?constantNull:"function"==typeof e?e:selector$1(e);return this.select((function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)}))}function remove(){var t=this.parentNode;t&&t.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function selection_cloneDeep(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function selection_clone(t){return this.select(t?selection_cloneDeep:selection_cloneShallow)}function selection_datum(t){return arguments.length?this.property("__data__",t):this.node().__data__}function contextListener(t){return function(e){t.call(this,e,this.__data__)}}function parseTypenames(t){return t.trim().split(/^|\s+/).map((function(t){var e="",r=t.indexOf(".");return r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),{type:t,name:e}}))}function onRemove(t){return function(){var e=this.__on;if(e){for(var r,n=0,i=-1,a=e.length;n<a;++n)r=e[n],t.type&&r.type!==t.type||r.name!==t.name?e[++i]=r:this.removeEventListener(r.type,r.listener,r.options);++i?e.length=i:delete this.__on}}}function onAdd(t,e,r){return function(){var n,i=this.__on,a=contextListener(e);if(i)for(var o=0,s=i.length;o<s;++o)if((n=i[o]).type===t.type&&n.name===t.name)return this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=a,n.options=r),void(n.value=e);this.addEventListener(t.type,a,r),n={type:t.type,name:t.name,value:e,listener:a,options:r},i?i.push(n):this.__on=[n]}}function selection_on(t,e,r){var n,i,a=parseTypenames(t+""),o=a.length;if(!(arguments.length<2)){for(s=e?onAdd:onRemove,n=0;n<o;++n)this.each(s(a[n],e,r));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(n=0,l=s[c];n<o;++n)if((i=a[n]).type===l.type&&i.name===l.name)return l.value}function dispatchEvent(t,e,r){var n=defaultView(t),i=n.CustomEvent;"function"==typeof i?i=new i(e,r):(i=n.document.createEvent("Event"),r?(i.initEvent(e,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function dispatchConstant(t,e){return function(){return dispatchEvent(this,t,e)}}function dispatchFunction(t,e){return function(){return dispatchEvent(this,t,e.apply(this,arguments))}}function selection_dispatch(t,e){return this.each(("function"==typeof e?dispatchFunction:dispatchConstant)(t,e))}function*selection_iterator(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n,i=t[e],a=0,o=i.length;a<o;++a)(n=i[a])&&(yield n)}EnterNode.prototype={constructor:EnterNode,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},ClassList.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var root=[null];function Selection$1(t,e){this._groups=t,this._parents=e}function selection(){return new Selection$1([[document.documentElement]],root)}function selection_selection(){return this}function select$4(t){return"string"==typeof t?new Selection$1([[document.querySelector(t)]],[document.documentElement]):new Selection$1([[t]],root)}function sourceEvent(t){let e;for(;e=t.sourceEvent;)t=e;return t}function pointer(t,e){if(t=sourceEvent(t),void 0===e&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,[(n=n.matrixTransform(e.getScreenCTM().inverse())).x,n.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};const nonpassive={passive:!1},nonpassivecapture={capture:!0,passive:!1};function nopropagation(t){t.stopImmediatePropagation()}function noevent(t){t.preventDefault(),t.stopImmediatePropagation()}function dragDisable(t){var e=t.document.documentElement,r=select$4(t).on("dragstart.drag",noevent,nonpassivecapture);"onselectstart"in e?r.on("selectstart.drag",noevent,nonpassivecapture):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function yesdrag(t,e){var r=t.document.documentElement,n=select$4(t).on("dragstart.drag",null);e&&(n.on("click.drag",noevent,nonpassivecapture),setTimeout((function(){n.on("click.drag",null)}),0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}var constant$2=t=>()=>t;function DragEvent(t,{sourceEvent:e,subject:r,target:n,identifier:i,active:a,x:o,y:s,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}function defaultFilter(t){return!t.ctrlKey&&!t.button}function defaultContainer(){return this.parentNode}function defaultSubject(t,e){return null==e?{x:t.x,y:t.y}:e}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function drag(){var t,e,r,n,i=defaultFilter,a=defaultContainer,o=defaultSubject,s=defaultTouchable,l={},c=dispatch("start","drag","end"),u=0,d=0;function h(t){t.on("mousedown.drag",g).filter(s).on("touchstart.drag",m).on("touchmove.drag",y,nonpassive).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(o,s){if(!n&&i.call(this,o,s)){var l=v(this,a.call(this,o,s),o,s,"mouse");l&&(select$4(o.view).on("mousemove.drag",f,nonpassivecapture).on("mouseup.drag",p,nonpassivecapture),dragDisable(o.view),nopropagation(o),r=!1,t=o.clientX,e=o.clientY,l("start",o))}}function f(n){if(noevent(n),!r){var i=n.clientX-t,a=n.clientY-e;r=i*i+a*a>d}l.mouse("drag",n)}function p(t){select$4(t.view).on("mousemove.drag mouseup.drag",null),yesdrag(t.view,r),noevent(t),l.mouse("end",t)}function m(t,e){if(i.call(this,t,e)){var r,n,o=t.changedTouches,s=a.call(this,t,e),l=o.length;for(r=0;r<l;++r)(n=v(this,s,t,e,o[r].identifier,o[r]))&&(nopropagation(t),n("start",t,o[r]))}}function y(t){var e,r,n=t.changedTouches,i=n.length;for(e=0;e<i;++e)(r=l[n[e].identifier])&&(noevent(t),r("drag",t,n[e]))}function b(t){var e,r,i=t.changedTouches,a=i.length;for(n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),e=0;e<a;++e)(r=l[i[e].identifier])&&(nopropagation(t),r("end",t,i[e]))}function v(t,e,r,n,i,a){var s,d,g,f=c.copy(),p=pointer(a||r,e);if(null!=(g=o.call(t,new DragEvent("beforestart",{sourceEvent:r,target:h,identifier:i,active:u,x:p[0],y:p[1],dx:0,dy:0,dispatch:f}),n)))return s=g.x-p[0]||0,d=g.y-p[1]||0,function r(a,o,c){var m,y=p;switch(a){case"start":l[i]=r,m=u++;break;case"end":delete l[i],--u;case"drag":p=pointer(c||o,e),m=u}f.call(a,t,new DragEvent(a,{sourceEvent:o,subject:g,target:h,identifier:i,active:m,x:p[0]+s,y:p[1]+d,dx:p[0]-y[0],dy:p[1]-y[1],dispatch:f}),n)}}return h.filter=function(t){return arguments.length?(i="function"==typeof t?t:constant$2(!!t),h):i},h.container=function(t){return arguments.length?(a="function"==typeof t?t:constant$2(t),h):a},h.subject=function(t){return arguments.length?(o="function"==typeof t?t:constant$2(t),h):o},h.touchable=function(t){return arguments.length?(s="function"==typeof t?t:constant$2(!!t),h):s},h.on=function(){var t=c.on.apply(c,arguments);return t===c?h:t},h.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,h):Math.sqrt(d)},h}function define(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function extend$1(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Color(){}DragEvent.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+[reN,reP,reP,reN]+"\\)$"),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=reHex.exec(t))?(r=e[1].length,e=parseInt(e[1],16),6===r?rgbn(e):3===r?new Rgb(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===r?rgba(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===r?rgba(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=reRgbInteger.exec(t))?new Rgb(e[1],e[2],e[3],1):(e=reRgbPercent.exec(t))?new Rgb(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=reRgbaInteger.exec(t))?rgba(e[1],e[2],e[3],e[4]):(e=reRgbaPercent.exec(t))?rgba(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=reHslPercent.exec(t))?hsla(e[1],e[2]/100,e[3]/100,1):(e=reHslaPercent.exec(t))?hsla(e[1],e[2]/100,e[3]/100,e[4]):named.hasOwnProperty(t)?rgbn(named[t]):"transparent"===t?new Rgb(NaN,NaN,NaN,0):null}function rgbn(t){return new Rgb(t>>16&255,t>>8&255,255&t,1)}function rgba(t,e,r,n){return n<=0&&(t=e=r=NaN),new Rgb(t,e,r,n)}function rgbConvert(t){return t instanceof Color||(t=color(t)),t?new Rgb((t=t.rgb()).r,t.g,t.b,t.opacity):new Rgb}function rgb$2(t,e,r,n){return 1===arguments.length?rgbConvert(t):new Rgb(t,e,r,null==n?1:n)}function Rgb(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}function rgb_formatHex(){return"#"+hex(this.r)+hex(this.g)+hex(this.b)}function rgb_formatRgb(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function hex(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function hsla(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Hsl(t,e,r,n)}function hslConvert(t){if(t instanceof Hsl)return new Hsl(t.h,t.s,t.l,t.opacity);if(t instanceof Color||(t=color(t)),!t)return new Hsl;if(t instanceof Hsl)return t;var e=(t=t.rgb()).r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),a=Math.max(e,r,n),o=NaN,s=a-i,l=(a+i)/2;return s?(o=e===a?(r-n)/s+6*(r<n):r===a?(n-e)/s+2:(e-r)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Hsl(o,s,l,t.opacity)}function hsl$1(t,e,r,n){return 1===arguments.length?hslConvert(t):new Hsl(t,e,r,null==n?1:n)}function Hsl(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}function hsl2rgb(t,e,r){return 255*(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)}define(Color,color,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb}),define(Rgb,rgb$2,extend$1(Color,{brighter:function(t){return t=null==t?brighter:Math.pow(brighter,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?darker:Math.pow(darker,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),define(Hsl,hsl$1,extend$1(Color,{brighter:function(t){return t=null==t?brighter:Math.pow(brighter,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?darker:Math.pow(darker,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Rgb(hsl2rgb(t>=240?t-240:t+120,i,n),hsl2rgb(t,i,n),hsl2rgb(t<120?t+240:t-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var constant$1=t=>()=>t;function linear$1(t,e){return function(r){return t+r*e}}function exponential(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function gamma(t){return 1==(t=+t)?nogamma:function(e,r){return r-e?exponential(e,r,t):constant$1(isNaN(e)?r:e)}}function nogamma(t,e){var r=e-t;return r?linear$1(t,r):constant$1(isNaN(t)?e:t)}var interpolateRgb=function t(e){var r=gamma(e);function n(t,e){var n=r((t=rgb$2(t)).r,(e=rgb$2(e)).r),i=r(t.g,e.g),a=r(t.b,e.b),o=nogamma(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return n.gamma=t,n}(1);function numberArray(t,e){e||(e=[]);var r,n=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(r=0;r<n;++r)i[r]=t[r]*(1-a)+e[r]*a;return i}}function isNumberArray(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function genericArray(t,e){var r,n=e?e.length:0,i=t?Math.min(n,t.length):0,a=new Array(i),o=new Array(n);for(r=0;r<i;++r)a[r]=interpolate$1(t[r],e[r]);for(;r<n;++r)o[r]=e[r];return function(t){for(r=0;r<i;++r)o[r]=a[r](t);return o}}function date(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function interpolateNumber(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function object(t,e){var r,n={},i={};for(r in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)r in t?n[r]=interpolate$1(t[r],e[r]):i[r]=e[r];return function(t){for(r in n)i[r]=n[r](t);return i}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(t){return function(){return t}}function one(t){return function(e){return t(e)+""}}function interpolateString(t,e){var r,n,i,a=reA.lastIndex=reB.lastIndex=0,o=-1,s=[],l=[];for(t+="",e+="";(r=reA.exec(t))&&(n=reB.exec(e));)(i=n.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,l.push({i:o,x:interpolateNumber(r,n)})),a=reB.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?one(l[0].x):zero(e):(e=l.length,function(t){for(var r,n=0;n<e;++n)s[(r=l[n]).i]=r.x(t);return s.join("")})}function interpolate$1(t,e){var r,n=typeof e;return null==e||"boolean"===n?constant$1(e):("number"===n?interpolateNumber:"string"===n?(r=color(e))?(e=r,interpolateRgb):interpolateString:e instanceof color?interpolateRgb:e instanceof Date?date:isNumberArray(e)?numberArray:Array.isArray(e)?genericArray:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?object:interpolateNumber)(t,e)}function interpolateRound(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}var svgNode,degrees=180/Math.PI,identity$7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(t,e,r,n,i,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*r+e*n)&&(r-=t*l,n-=e*l),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,l/=s),t*n<e*r&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*degrees,skewX:Math.atan(l)*degrees,scaleX:o,scaleY:s}}function parseCss(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?identity$7:decompose(e.a,e.b,e.c,e.d,e.e,e.f)}function parseSvg(t){return null==t?identity$7:(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",t),(t=svgNode.transform.baseVal.consolidate())?decompose((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):identity$7)}function interpolateTransform(t,e,r,n){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var s=[],l=[];return a=t(a),o=t(o),function(t,n,i,a,o,s){if(t!==i||n!==a){var l=o.push("translate(",null,e,null,r);s.push({i:l-4,x:interpolateNumber(t,i)},{i:l-2,x:interpolateNumber(n,a)})}else(i||a)&&o.push("translate("+i+e+a+r)}(a.translateX,a.translateY,o.translateX,o.translateY,s,l),function(t,e,r,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:r.push(i(r)+"rotate(",null,n)-2,x:interpolateNumber(t,e)})):e&&r.push(i(r)+"rotate("+e+n)}(a.rotate,o.rotate,s,l),function(t,e,r,a){t!==e?a.push({i:r.push(i(r)+"skewX(",null,n)-2,x:interpolateNumber(t,e)}):e&&r.push(i(r)+"skewX("+e+n)}(a.skewX,o.skewX,s,l),function(t,e,r,n,a,o){if(t!==r||e!==n){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:interpolateNumber(t,r)},{i:s-2,x:interpolateNumber(e,n)})}else 1===r&&1===n||a.push(i(a)+"scale("+r+","+n+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,l),a=o=null,function(t){for(var e,r=-1,n=l.length;++r<n;)s[(e=l[r]).i]=e.x(t);return s.join("")}}}var taskHead,taskTail,interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),frame=0,timeout$1=0,interval$1=0,pokeDelay=1e3,clockLast=0,clockNow=0,clockSkew=0,clock="object"==typeof performance&&performance.now?performance:Date,setFrame="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}function timer(t,e,r){var n=new Timer;return n.restart(t,e,r),n}function timerFlush(){now(),++frame;for(var t,e=taskHead;e;)(t=clockNow-e._time)>=0&&e._call.call(void 0,t),e=e._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var t=clock.now(),e=t-clockLast;e>pokeDelay&&(clockSkew-=e,clockLast=t)}function nap(){for(var t,e,r=taskHead,n=1/0;r;)r._call?(n>r._time&&(n=r._time),t=r,r=r._next):(e=r._next,r._next=null,r=t?t._next=e:taskHead=e);taskTail=t,sleep(n)}function sleep(t){frame||(timeout$1&&(timeout$1=clearTimeout(timeout$1)),t-clockNow>24?(t<1/0&&(timeout$1=setTimeout(wake,t-clock.now()-clockSkew)),interval$1&&(interval$1=clearInterval(interval$1))):(interval$1||(clockLast=clock.now(),interval$1=setInterval(poke,pokeDelay)),frame=1,setFrame(wake)))}function timeout(t,e,r){var n=new Timer;return e=null==e?0:+e,n.restart((r=>{n.stop(),t(r+e)}),e,r),n}function interval(t,e,r){var n=new Timer,i=e;return null==e?(n.restart(t,e,r),n):(n._restart=n.restart,n.restart=function(t,e,r){e=+e,r=null==r?now():+r,n._restart((function a(o){o+=i,n._restart(a,i+=e,r),t(o)}),e,r)},n.restart(t,e,r),n)}Timer.prototype=timer.prototype={constructor:Timer,restart:function(t,e,r){if("function"!=typeof t)throw new TypeError("callback is not a function");r=(null==r?now():+r)+(null==e?0:+e),this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=t,this._time=r,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(t,e,r,n,i,a){var o=t.__transition;if(o){if(r in o)return}else t.__transition={};create$1(t,r,{name:e,index:n,group:i,on:emptyOn,tween:emptyTween,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:CREATED})}function init(t,e){var r=get(t,e);if(r.state>CREATED)throw new Error("too late; already scheduled");return r}function set(t,e){var r=get(t,e);if(r.state>STARTED)throw new Error("too late; already running");return r}function get(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function create$1(t,e,r){var n,i=t.__transition;function a(l){var c,u,d,h;if(r.state!==SCHEDULED)return s();for(c in i)if((h=i[c]).name===r.name){if(h.state===STARTED)return timeout(a);h.state===RUNNING?(h.state=ENDED,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[c]):+c<e&&(h.state=ENDED,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[c])}if(timeout((function(){r.state===STARTED&&(r.state=RUNNING,r.timer.restart(o,r.delay,r.time),o(l))})),r.state=STARTING,r.on.call("start",t,t.__data__,r.index,r.group),r.state===STARTING){for(r.state=STARTED,n=new Array(d=r.tween.length),c=0,u=-1;c<d;++c)(h=r.tween[c].value.call(t,t.__data__,r.index,r.group))&&(n[++u]=h);n.length=u+1}}function o(e){for(var i=e<r.duration?r.ease.call(null,e/r.duration):(r.timer.restart(s),r.state=ENDING,1),a=-1,o=n.length;++a<o;)n[a].call(t,i);r.state===ENDING&&(r.on.call("end",t,t.__data__,r.index,r.group),s())}function s(){for(var n in r.state=ENDED,r.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=r,r.timer=timer((function(t){r.state=SCHEDULED,r.timer.restart(a,r.delay,r.time),r.delay<=t&&a(t-r.delay)}),0,r.time)}function interrupt(t,e){var r,n,i,a=t.__transition,o=!0;if(a){for(i in e=null==e?null:e+"",a)(r=a[i]).name===e?(n=r.state>STARTING&&r.state<ENDING,r.state=ENDED,r.timer.stop(),r.on.call(n?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete a[i]):o=!1;o&&delete t.__transition}}function selection_interrupt(t){return this.each((function(){interrupt(this,t)}))}function tweenRemove(t,e){var r,n;return function(){var i=set(this,t),a=i.tween;if(a!==r)for(var o=0,s=(n=r=a).length;o<s;++o)if(n[o].name===e){(n=n.slice()).splice(o,1);break}i.tween=n}}function tweenFunction(t,e,r){var n,i;if("function"!=typeof r)throw new Error;return function(){var a=set(this,t),o=a.tween;if(o!==n){i=(n=o).slice();for(var s={name:e,value:r},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=s;break}l===c&&i.push(s)}a.tween=i}}function transition_tween(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n,i=get(this.node(),r).tween,a=0,o=i.length;a<o;++a)if((n=i[a]).name===t)return n.value;return null}return this.each((null==e?tweenRemove:tweenFunction)(r,t,e))}function tweenValue(t,e,r){var n=t._id;return t.each((function(){var t=set(this,n);(t.value||(t.value={}))[e]=r.apply(this,arguments)})),function(t){return get(t,n).value[e]}}function interpolate(t,e){var r;return("number"==typeof e?interpolateNumber:e instanceof color?interpolateRgb:(r=color(e))?(e=r,interpolateRgb):interpolateString)(t,e)}function attrRemove(t){return function(){this.removeAttribute(t)}}function attrRemoveNS(t){return function(){this.removeAttributeNS(t.space,t.local)}}function attrConstant(t,e,r){var n,i,a=r+"";return function(){var o=this.getAttribute(t);return o===a?null:o===n?i:i=e(n=o,r)}}function attrConstantNS(t,e,r){var n,i,a=r+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===n?i:i=e(n=o,r)}}function attrFunction(t,e,r){var n,i,a;return function(){var o,s,l=r(this);if(null!=l)return(o=this.getAttribute(t))===(s=l+"")?null:o===n&&s===i?a:(i=s,a=e(n=o,l));this.removeAttribute(t)}}function attrFunctionNS(t,e,r){var n,i,a;return function(){var o,s,l=r(this);if(null!=l)return(o=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:o===n&&s===i?a:(i=s,a=e(n=o,l));this.removeAttributeNS(t.space,t.local)}}function transition_attr(t,e){var r=namespace(t),n="transform"===r?interpolateTransformSvg:interpolate;return this.attrTween(t,"function"==typeof e?(r.local?attrFunctionNS:attrFunction)(r,n,tweenValue(this,"attr."+t,e)):null==e?(r.local?attrRemoveNS:attrRemove)(r):(r.local?attrConstantNS:attrConstant)(r,n,e))}function attrInterpolate(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function attrInterpolateNS(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function attrTweenNS(t,e){var r,n;function i(){var i=e.apply(this,arguments);return i!==n&&(r=(n=i)&&attrInterpolateNS(t,i)),r}return i._value=e,i}function attrTween(t,e){var r,n;function i(){var i=e.apply(this,arguments);return i!==n&&(r=(n=i)&&attrInterpolate(t,i)),r}return i._value=e,i}function transition_attrTween(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;var n=namespace(t);return this.tween(r,(n.local?attrTweenNS:attrTween)(n,e))}function delayFunction(t,e){return function(){init(this,t).delay=+e.apply(this,arguments)}}function delayConstant(t,e){return e=+e,function(){init(this,t).delay=e}}function transition_delay(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?delayFunction:delayConstant)(e,t)):get(this.node(),e).delay}function durationFunction(t,e){return function(){set(this,t).duration=+e.apply(this,arguments)}}function durationConstant(t,e){return e=+e,function(){set(this,t).duration=e}}function transition_duration(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?durationFunction:durationConstant)(e,t)):get(this.node(),e).duration}function easeConstant(t,e){if("function"!=typeof e)throw new Error;return function(){set(this,t).ease=e}}function transition_ease(t){var e=this._id;return arguments.length?this.each(easeConstant(e,t)):get(this.node(),e).ease}function easeVarying(t,e){return function(){var r=e.apply(this,arguments);if("function"!=typeof r)throw new Error;set(this,t).ease=r}}function transition_easeVarying(t){if("function"!=typeof t)throw new Error;return this.each(easeVarying(this._id,t))}function transition_filter(t){"function"!=typeof t&&(t=matcher(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var a,o=e[i],s=o.length,l=n[i]=[],c=0;c<s;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&l.push(a);return new Transition(n,this._parents,this._name,this._id)}function transition_merge(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,i=r.length,a=Math.min(n,i),o=new Array(n),s=0;s<a;++s)for(var l,c=e[s],u=r[s],d=c.length,h=o[s]=new Array(d),g=0;g<d;++g)(l=c[g]||u[g])&&(h[g]=l);for(;s<n;++s)o[s]=e[s];return new Transition(o,this._parents,this._name,this._id)}function start(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}function onFunction(t,e,r){var n,i,a=start(e)?init:set;return function(){var o=a(this,t),s=o.on;s!==n&&(i=(n=s).copy()).on(e,r),o.on=i}}function transition_on(t,e){var r=this._id;return arguments.length<2?get(this.node(),r).on.on(t):this.each(onFunction(r,t,e))}function removeFunction(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(t){var e=this._name,r=this._id;"function"!=typeof t&&(t=selector$1(t));for(var n=this._groups,i=n.length,a=new Array(i),o=0;o<i;++o)for(var s,l,c=n[o],u=c.length,d=a[o]=new Array(u),h=0;h<u;++h)(s=c[h])&&(l=t.call(s,s.__data__,h,c))&&("__data__"in s&&(l.__data__=s.__data__),d[h]=l,schedule(d[h],e,r,h,d,get(s,r)));return new Transition(a,this._parents,e,r)}function transition_selectAll(t){var e=this._name,r=this._id;"function"!=typeof t&&(t=selectorAll(t));for(var n=this._groups,i=n.length,a=[],o=[],s=0;s<i;++s)for(var l,c=n[s],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var h,g=t.call(l,l.__data__,d,c),f=get(l,r),p=0,m=g.length;p<m;++p)(h=g[p])&&schedule(h,e,r,p,g,f);a.push(g),o.push(l)}return new Transition(a,o,e,r)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(t,e){var r,n,i;return function(){var a=styleValue(this,t),o=(this.style.removeProperty(t),styleValue(this,t));return a===o?null:a===r&&o===n?i:i=e(r=a,n=o)}}function styleRemove(t){return function(){this.style.removeProperty(t)}}function styleConstant(t,e,r){var n,i,a=r+"";return function(){var o=styleValue(this,t);return o===a?null:o===n?i:i=e(n=o,r)}}function styleFunction(t,e,r){var n,i,a;return function(){var o=styleValue(this,t),s=r(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=styleValue(this,t)),o===l?null:o===n&&l===i?a:(i=l,a=e(n=o,s))}}function styleMaybeRemove(t,e){var r,n,i,a,o="style."+e,s="end."+o;return function(){var l=set(this,t),c=l.on,u=null==l.value[o]?a||(a=styleRemove(e)):void 0;c===r&&i===u||(n=(r=c).copy()).on(s,i=u),l.on=n}}function transition_style(t,e,r){var n="transform"==(t+="")?interpolateTransformCss:interpolate;return null==e?this.styleTween(t,styleNull(t,n)).on("end.style."+t,styleRemove(t)):"function"==typeof e?this.styleTween(t,styleFunction(t,n,tweenValue(this,"style."+t,e))).each(styleMaybeRemove(this._id,t)):this.styleTween(t,styleConstant(t,n,e),r).on("end.style."+t,null)}function styleInterpolate(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function styleTween(t,e,r){var n,i;function a(){var a=e.apply(this,arguments);return a!==i&&(n=(i=a)&&styleInterpolate(t,a,r)),n}return a._value=e,a}function transition_styleTween(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;return this.tween(n,styleTween(t,e,null==r?"":r))}function textConstant(t){return function(){this.textContent=t}}function textFunction(t){return function(){var e=t(this);this.textContent=null==e?"":e}}function transition_text(t){return this.tween("text","function"==typeof t?textFunction(tweenValue(this,"text",t)):textConstant(null==t?"":t+""))}function textInterpolate(t){return function(e){this.textContent=t.call(this,e)}}function textTween(t){var e,r;function n(){var n=t.apply(this,arguments);return n!==r&&(e=(r=n)&&textInterpolate(n)),e}return n._value=t,n}function transition_textTween(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,textTween(t))}function transition_transition(){for(var t=this._name,e=this._id,r=newId(),n=this._groups,i=n.length,a=0;a<i;++a)for(var o,s=n[a],l=s.length,c=0;c<l;++c)if(o=s[c]){var u=get(o,e);schedule(o,t,r,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Transition(n,this._parents,t,r)}function transition_end(){var t,e,r=this,n=r._id,i=r.size();return new Promise((function(a,o){var s={value:o},l={value:function(){0==--i&&a()}};r.each((function(){var r=set(this,n),i=r.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),r.on=e})),0===i&&a()}))}var id=0;function Transition(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function newId(){return++id}var selection_prototype=selection.prototype;function cubicIn(t){return t*t*t}function cubicOut(t){return--t*t*t+1}function cubicInOut(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function selection_transition(t){var e,r;t instanceof Transition?(e=t._id,t=t._name):(e=newId(),(r=defaultTiming).time=now(),t=null==t?null:t+"");for(var n=this._groups,i=n.length,a=0;a<i;++a)for(var o,s=n[a],l=s.length,c=0;c<l;++c)(o=s[c])&&schedule(o,t,e,c,s,r||inherit(o,e));return new Transition(n,this._parents,t,e)}selection.prototype.interrupt=selection_interrupt,selection.prototype.transition=selection_transition;const pi$1=Math.PI,tau$1=2*pi$1,epsilon$3=1e-6,tauEpsilon=tau$1-1e-6;function Path(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path(){return new Path}function formatDecimal$1(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function formatDecimalParts$1(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function exponent$1(t){return(t=formatDecimalParts$1(Math.abs(t)))?t[1]:NaN}function formatGroup$1(t,e){return function(r,n){for(var i=r.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),a.push(r.substring(i-=s,i+s)),!((l+=s+1)>n));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function formatNumerals$1(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}Path.prototype=path.prototype={constructor:Path,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,r,n){this._+="Q"+ +t+","+ +e+","+(this._x1=+r)+","+(this._y1=+n)},bezierCurveTo:function(t,e,r,n,i,a){this._+="C"+ +t+","+ +e+","+ +r+","+ +n+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,r,n,i){t=+t,e=+e,r=+r,n=+n,i=+i;var a=this._x1,o=this._y1,s=r-t,l=n-e,c=a-t,u=o-e,d=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(d>1e-6)if(Math.abs(u*s-l*c)>1e-6&&i){var h=r-a,g=n-o,f=s*s+l*l,p=h*h+g*g,m=Math.sqrt(f),y=Math.sqrt(d),b=i*Math.tan((pi$1-Math.acos((f+d-p)/(2*m*y)))/2),v=b/y,x=b/m;Math.abs(v-1)>1e-6&&(this._+="L"+(t+v*c)+","+(e+v*u)),this._+="A"+i+","+i+",0,0,"+ +(u*h>c*g)+","+(this._x1=t+x*s)+","+(this._y1=e+x*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,r,n,i,a){t=+t,e=+e,a=!!a;var o=(r=+r)*Math.cos(n),s=r*Math.sin(n),l=t+o,c=e+s,u=1^a,d=a?n-i:i-n;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+l+","+c),r&&(d<0&&(d=d%tau$1+tau$1),d>tauEpsilon?this._+="A"+r+","+r+",0,1,"+u+","+(t-o)+","+(e-s)+"A"+r+","+r+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):d>1e-6&&(this._+="A"+r+","+r+",0,"+ +(d>=pi$1)+","+u+","+(this._x1=t+r*Math.cos(i))+","+(this._y1=e+r*Math.sin(i))))},rect:function(t,e,r,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +r+"v"+ +n+"h"+-r+"Z"},toString:function(){return this._}};var prefixExponent$1,re$1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier$1(t){if(!(e=re$1.exec(t)))throw new Error("invalid format: "+t);var e;return new FormatSpecifier$1({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function FormatSpecifier$1(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function formatTrim$1(t){t:for(var e,r=t.length,n=1,i=-1;n<r;++n)switch(t[n]){case".":i=e=n;break;case"0":0===i&&(i=n),e=n;break;default:if(!+t[n])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}function formatPrefixAuto$1(t,e){var r=formatDecimalParts$1(t,e);if(!r)return t+"";var n=r[0],i=r[1],a=i-(prefixExponent$1=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+formatDecimalParts$1(t,Math.max(0,e+a-1))[0]}function formatRounded$1(t,e){var r=formatDecimalParts$1(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}formatSpecifier$1.prototype=FormatSpecifier$1.prototype,FormatSpecifier$1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var formatTypes$1={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:formatDecimal$1,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>formatRounded$1(100*t,e),r:formatRounded$1,s:formatPrefixAuto$1,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function identity$6(t){return t}var locale$2,format$3,formatPrefix$1,map$1=Array.prototype.map,prefixes$1=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$2(t){var e=void 0===t.grouping||void 0===t.thousands?identity$6:formatGroup$1(map$1.call(t.grouping,Number),t.thousands+""),r=void 0===t.currency?"":t.currency[0]+"",n=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?identity$6:formatNumerals$1(map$1.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",s=void 0===t.minus?"â":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function c(t){var c=(t=formatSpecifier$1(t)).fill,u=t.align,d=t.sign,h=t.symbol,g=t.zero,f=t.width,p=t.comma,m=t.precision,y=t.trim,b=t.type;"n"===b?(p=!0,b="g"):formatTypes$1[b]||(void 0===m&&(m=12),y=!0,b="g"),(g||"0"===c&&"="===u)&&(g=!0,c="0",u="=");var v="$"===h?r:"#"===h&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",x="$"===h?n:/[%p]/.test(b)?o:"",I=formatTypes$1[b],B=/[defgprs%]/.test(b);function C(t){var r,n,o,h=v,C=x;if("c"===b)C=I(t)+C,t="";else{var F=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:I(Math.abs(t),m),y&&(t=formatTrim$1(t)),F&&0==+t&&"+"!==d&&(F=!1),h=(F?"("===d?d:s:"-"===d||"("===d?"":d)+h,C=("s"===b?prefixes$1[8+prefixExponent$1/3]:"")+C+(F&&"("===d?")":""),B)for(r=-1,n=t.length;++r<n;)if(48>(o=t.charCodeAt(r))||o>57){C=(46===o?i+t.slice(r+1):t.slice(r))+C,t=t.slice(0,r);break}}p&&!g&&(t=e(t,1/0));var A=h.length+t.length+C.length,Q=A<f?new Array(f-A+1).join(c):"";switch(p&&g&&(t=e(Q+t,Q.length?f-C.length:1/0),Q=""),u){case"<":t=h+t+C+Q;break;case"=":t=h+Q+t+C;break;case"^":t=Q.slice(0,A=Q.length>>1)+h+t+C+Q.slice(A);break;default:t=Q+h+t+C}return a(t)}return m=void 0===m?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),C.toString=function(){return t+""},C}return{format:c,formatPrefix:function(t,e){var r=c(((t=formatSpecifier$1(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(exponent$1(e)/3))),i=Math.pow(10,-n),a=prefixes$1[8+n/3];return function(t){return r(i*t)+a}}}}function defaultLocale$2(t){return locale$2=formatLocale$2(t),format$3=locale$2.format,formatPrefix$1=locale$2.formatPrefix,locale$2}function precisionFixed$1(t){return Math.max(0,-exponent$1(Math.abs(t)))}function precisionPrefix$1(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent$1(e)/3)))-exponent$1(Math.abs(t)))}function precisionRound$1(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,exponent$1(e)-exponent$1(t))+1}function initRange(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function constants$e(t){return function(){return t}}function number$1(t){return+t}defaultLocale$2({thousands:",",grouping:[3],currency:["$",""]});var unit=[0,1];function identity$5(t){return t}function normalize(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:constants$e(isNaN(e)?NaN:.5)}function clamper(t,e){var r;return t>e&&(r=t,t=e,e=r),function(r){return Math.max(t,Math.min(e,r))}}function bimap(t,e,r){var n=t[0],i=t[1],a=e[0],o=e[1];return i<n?(n=normalize(i,n),a=r(o,a)):(n=normalize(n,i),a=r(a,o)),function(t){return a(n(t))}}function polymap(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),a=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)i[o]=normalize(t[o],t[o+1]),a[o]=r(e[o],e[o+1]);return function(e){var r=bisect(t,e,1,n)-1;return a[r](i[r](e))}}function copy$1(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function transformer(){var t,e,r,n,i,a,o=unit,s=unit,l=interpolate$1,c=identity$5;function u(){var t=Math.min(o.length,s.length);return c!==identity$5&&(c=clamper(o[0],o[t-1])),n=t>2?polymap:bimap,i=a=null,d}function d(e){return null==e||isNaN(e=+e)?r:(i||(i=n(o.map(t),s,l)))(t(c(e)))}return d.invert=function(r){return c(e((a||(a=n(s,o.map(t),interpolateNumber)))(r)))},d.domain=function(t){return arguments.length?(o=Array.from(t,number$1),u()):o.slice()},d.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},d.rangeRound=function(t){return s=Array.from(t),l=interpolateRound,u()},d.clamp=function(t){return arguments.length?(c=!!t||identity$5,u()):c!==identity$5},d.interpolate=function(t){return arguments.length?(l=t,u()):l},d.unknown=function(t){return arguments.length?(r=t,d):r},function(r,n){return t=r,e=n,u()}}function continuous(){return transformer()(identity$5,identity$5)}function tickFormat(t,e,r,n){var i,a=tickStep(t,e,r);switch((n=formatSpecifier$1(null==n?",f":n)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=n.precision||isNaN(i=precisionPrefix$1(a,o))||(n.precision=i),formatPrefix$1(n,o);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(i=precisionRound$1(a,Math.max(Math.abs(t),Math.abs(e))))||(n.precision=i-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(i=precisionFixed$1(a))||(n.precision=i-2*("%"===n.type))}return format$3(n)}function linearish(t){var e=t.domain;return t.ticks=function(t){var r=e();return ticks(r[0],r[r.length-1],null==t?10:t)},t.tickFormat=function(t,r){var n=e();return tickFormat(n[0],n[n.length-1],null==t?10:t,r)},t.nice=function(r){null==r&&(r=10);var n,i,a=e(),o=0,s=a.length-1,l=a[o],c=a[s],u=10;for(c<l&&(i=l,l=c,c=i,i=o,o=s,s=i);u-- >0;){if((i=tickIncrement$1(l,c,r))===n)return a[o]=l,a[s]=c,e(a);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}n=i}return t},t}function linear(){var t=continuous();return t.copy=function(){return copy$1(t,linear())},initRange.apply(t,arguments),linearish(t)}function colors(t){for(var e=t.length/6|0,r=new Array(e),n=0;n<e;)r[n]="#"+t.slice(6*n,6*++n);return r}var Set1=colors("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999");function constant(t){return function(){return t}}const abs=Math.abs,atan2=Math.atan2,cos=Math.cos,max=Math.max,min=Math.min,sin=Math.sin,sqrt=Math.sqrt,epsilon$2=1e-12,pi=Math.PI,halfPi=pi/2,tau=2*pi;function acos(t){return t>1?0:t<-1?pi:Math.acos(t)}function asin(t){return t>=1?halfPi:t<=-1?-halfPi:Math.asin(t)}function arcInnerRadius(t){return t.innerRadius}function arcOuterRadius(t){return t.outerRadius}function arcStartAngle(t){return t.startAngle}function arcEndAngle(t){return t.endAngle}function arcPadAngle(t){return t&&t.padAngle}function intersect(t,e,r,n,i,a,o,s){var l=r-t,c=n-e,u=o-i,d=s-a,h=d*l-u*c;if(!(h*h<1e-12))return[t+(h=(u*(e-a)-d*(t-i))/h)*l,e+h*c]}function cornerTangents(t,e,r,n,i,a,o){var s=t-r,l=e-n,c=(o?a:-a)/sqrt(s*s+l*l),u=c*l,d=-c*s,h=t+u,g=e+d,f=r+u,p=n+d,m=(h+f)/2,y=(g+p)/2,b=f-h,v=p-g,x=b*b+v*v,I=i-a,B=h*p-f*g,C=(v<0?-1:1)*sqrt(max(0,I*I*x-B*B)),F=(B*v-b*C)/x,A=(-B*b-v*C)/x,Q=(B*v+b*C)/x,_=(-B*b+v*C)/x,w=F-m,U=A-y,S=Q-m,E=_-y;return w*w+U*U>S*S+E*E&&(F=Q,A=_),{cx:F,cy:A,x01:-u,y01:-d,x11:F*(i/I-1),y11:A*(i/I-1)}}function arc(){var t=arcInnerRadius,e=arcOuterRadius,r=constant(0),n=null,i=arcStartAngle,a=arcEndAngle,o=arcPadAngle,s=null;function l(){var l,c,u=+t.apply(this,arguments),d=+e.apply(this,arguments),h=i.apply(this,arguments)-halfPi,g=a.apply(this,arguments)-halfPi,f=abs(g-h),p=g>h;if(s||(s=l=path()),d<u&&(c=d,d=u,u=c),d>1e-12)if(f>tau-1e-12)s.moveTo(d*cos(h),d*sin(h)),s.arc(0,0,d,h,g,!p),u>1e-12&&(s.moveTo(u*cos(g),u*sin(g)),s.arc(0,0,u,g,h,p));else{var m,y,b=h,v=g,x=h,I=g,B=f,C=f,F=o.apply(this,arguments)/2,A=F>1e-12&&(n?+n.apply(this,arguments):sqrt(u*u+d*d)),Q=min(abs(d-u)/2,+r.apply(this,arguments)),_=Q,w=Q;if(A>1e-12){var U=asin(A/u*sin(F)),S=asin(A/d*sin(F));(B-=2*U)>1e-12?(x+=U*=p?1:-1,I-=U):(B=0,x=I=(h+g)/2),(C-=2*S)>1e-12?(b+=S*=p?1:-1,v-=S):(C=0,b=v=(h+g)/2)}var E=d*cos(b),L=d*sin(b),T=u*cos(I),R=u*sin(I);if(Q>1e-12){var k,G=d*cos(v),N=d*sin(v),M=u*cos(x),D=u*sin(x);if(f<pi&&(k=intersect(E,L,M,D,G,N,T,R))){var X=E-k[0],V=L-k[1],W=G-k[0],Z=N-k[1],O=1/sin(acos((X*W+V*Z)/(sqrt(X*X+V*V)*sqrt(W*W+Z*Z)))/2),$=sqrt(k[0]*k[0]+k[1]*k[1]);_=min(Q,(u-$)/(O-1)),w=min(Q,(d-$)/(O+1))}}C>1e-12?w>1e-12?(m=cornerTangents(M,D,E,L,d,w,p),y=cornerTangents(G,N,T,R,d,w,p),s.moveTo(m.cx+m.x01,m.cy+m.y01),w<Q?s.arc(m.cx,m.cy,w,atan2(m.y01,m.x01),atan2(y.y01,y.x01),!p):(s.arc(m.cx,m.cy,w,atan2(m.y01,m.x01),atan2(m.y11,m.x11),!p),s.arc(0,0,d,atan2(m.cy+m.y11,m.cx+m.x11),atan2(y.cy+y.y11,y.cx+y.x11),!p),s.arc(y.cx,y.cy,w,atan2(y.y11,y.x11),atan2(y.y01,y.x01),!p))):(s.moveTo(E,L),s.arc(0,0,d,b,v,!p)):s.moveTo(E,L),u>1e-12&&B>1e-12?_>1e-12?(m=cornerTangents(T,R,G,N,u,-_,p),y=cornerTangents(E,L,M,D,u,-_,p),s.lineTo(m.cx+m.x01,m.cy+m.y01),_<Q?s.arc(m.cx,m.cy,_,atan2(m.y01,m.x01),atan2(y.y01,y.x01),!p):(s.arc(m.cx,m.cy,_,atan2(m.y01,m.x01),atan2(m.y11,m.x11),!p),s.arc(0,0,u,atan2(m.cy+m.y11,m.cx+m.x11),atan2(y.cy+y.y11,y.cx+y.x11),p),s.arc(y.cx,y.cy,_,atan2(y.y11,y.x11),atan2(y.y01,y.x01),!p))):s.arc(0,0,u,I,x,p):s.lineTo(T,R)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var r=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,n=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-pi/2;return[cos(n)*r,sin(n)*r]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:constant(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:constant(+t),l):e},l.cornerRadius=function(t){return arguments.length?(r="function"==typeof t?t:constant(+t),l):r},l.padRadius=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:constant(+t),l):n},l.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:constant(+t),l):i},l.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:constant(+t),l):a},l.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:constant(+t),l):o},l.context=function(t){return arguments.length?(s=null==t?null:t,l):s},l}function array$1(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Linear(t){this._context=t}function curveLinear(t){return new Linear(t)}function x$1(t){return t[0]}function y(t){return t[1]}function line(t,e){var r=constant(!0),n=null,i=curveLinear,a=null;function o(o){var s,l,c,u=(o=array$1(o)).length,d=!1;for(null==n&&(a=i(c=path())),s=0;s<=u;++s)!(s<u&&r(l=o[s],s,o))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+t(l,s,o),+e(l,s,o));if(c)return a=null,c+""||null}return t="function"==typeof t?t:void 0===t?x$1:constant(t),e="function"==typeof e?e:void 0===e?y:constant(e),o.x=function(e){return arguments.length?(t="function"==typeof e?e:constant(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:constant(+t),o):e},o.defined=function(t){return arguments.length?(r="function"==typeof t?t:constant(!!t),o):r},o.curve=function(t){return arguments.length?(i=t,null!=n&&(a=i(n)),o):i},o.context=function(t){return arguments.length?(null==t?n=a=null:a=i(n=t),o):n},o}function descending(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function identity$4(t){return t}function pie(){var t=identity$4,e=descending,r=null,n=constant(0),i=constant(tau),a=constant(0);function o(o){var s,l,c,u,d,h=(o=array$1(o)).length,g=0,f=new Array(h),p=new Array(h),m=+n.apply(this,arguments),y=Math.min(tau,Math.max(-tau,i.apply(this,arguments)-m)),b=Math.min(Math.abs(y)/h,a.apply(this,arguments)),v=b*(y<0?-1:1);for(s=0;s<h;++s)(d=p[f[s]=s]=+t(o[s],s,o))>0&&(g+=d);for(null!=e?f.sort((function(t,r){return e(p[t],p[r])})):null!=r&&f.sort((function(t,e){return r(o[t],o[e])})),s=0,c=g?(y-h*v)/g:0;s<h;++s,m=u)l=f[s],u=m+((d=p[l])>0?d*c:0)+v,p[l]={data:o[l],index:s,value:d,startAngle:m,endAngle:u,padAngle:b};return p}return o.value=function(e){return arguments.length?(t="function"==typeof e?e:constant(+e),o):t},o.sortValues=function(t){return arguments.length?(e=t,r=null,o):e},o.sort=function(t){return arguments.length?(r=t,e=null,o):r},o.startAngle=function(t){return arguments.length?(n="function"==typeof t?t:constant(+t),o):n},o.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:constant(+t),o):i},o.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:constant(+t),o):a},o}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};let _t$p,_t2$m,_t3$7,_t4$7,_t5$7,_t6$6,_t7$6,_t8$6,_t9$5,_$p=t=>t;class DecidablesElement extends s$1{getComputedStyleValue(t){return getComputedStyle(this).getPropertyValue(t).trim()}firstUpdated(t){super.firstUpdated(t),select$4(this.renderRoot.host).classed("keyboard",!0).on("mousemove.keyboard touchstart.keyboard",(t=>{select$4(t.currentTarget.renderRoot.host).classed("keyboard",!1).on("mousemove.keyboard touchstart.keyboard",null)})).on("keydown.keyboard",(t=>{select$4(t.currentTarget.renderRoot.host).classed("keyboard",!0).on("keydown.keyboard mousemove.keyboard touchstart.keyboard",null)}))}static get greys(){const t="#999999",e={white:"#ffffff"};return e.light75=interpolateRgb(t,"#ffffff")(.75),e.light50=interpolateRgb(t,"#ffffff")(.5),e.light25=interpolateRgb(t,"#ffffff")(.25),e.grey=t,e.dark25=interpolateRgb(t,"#000000")(.25),e.dark50=interpolateRgb(t,"#000000")(.5),e.dark75=interpolateRgb(t,"#000000")(.75),e.black="#000000",e}static get shadows(){return{elevations:[0,2,4,8,16],baselineColor:"#000000",baselineColorString:"0, 0, 0",inverseBaselineColor:"#FFFFFF",inverseBaselineColorString:"255, 255, 255",opacityUmbra:.2,opacityPenumbra:.14,opacityAmbient:.12,opacityBoost:.2,mapUmbra:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:3,b:1,s:-2},4:{x:0,y:2,b:4,s:-1},8:{x:0,y:5,b:5,s:-3},16:{x:0,y:8,b:10,s:-5}},mapPenumbra:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:2,b:2,s:0},4:{x:0,y:4,b:5,s:0},8:{x:0,y:8,b:10,s:1},16:{x:0,y:16,b:24,s:2}},mapAmbient:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:1,b:5,s:0},4:{x:0,y:1,b:10,s:0},8:{x:0,y:3,b:14,s:2},16:{x:0,y:6,b:30,s:5}}}}static cssBoxShadow(t,e=!1,r=!1){const n=this.shadows.opacityUmbra+this.shadows.opacityBoost,i=this.shadows.opacityPenumbra+this.shadows.opacityBoost,a=this.shadows.opacityAmbient+this.shadows.opacityBoost,o=r?`rgba(${this.shadows.inverseBaselineColorString}, ${n})`:`rgba(${this.shadows.baselineColorString}, ${n})`,s=r?`rgba(${this.shadows.inverseBaselineColorString}, ${i})`:`rgba(${this.shadows.baselineColorString}, ${i})`,l=r?`rgba(${this.shadows.inverseBaselineColorString}, ${a})`:`rgba(${this.shadows.baselineColorString}, ${a})`,c=this.shadows.mapUmbra[t],u=this.shadows.mapPenumbra[t],d=this.shadows.mapAmbient[t];return`${e?`${-c.y}px ${c.y/2}px ${c.b}px ${c.s}px`:`${c.y/2}px ${c.y}px ${c.b}px ${c.s}px`} ${o}, ${e?`${-u.y}px ${u.y/2}px ${u.b}px ${u.s}px`:`${u.y/2}px ${u.y}px ${u.b}px ${u.s}px`} ${s}, ${e?`${-d.y}px ${d.y/2}px ${d.b}px ${d.s}px`:`${d.y/2}px ${d.y}px ${d.b}px ${d.s}px`} ${l}`}static get svgFilters(){const t=DecidablesElement.shadows,e=t.elevations.map((e=>y$1(_t$p||(_t$p=_$p`
        <filter id=${0} x="-250%" y="-250%" width="600%" height="600%">
          <feComponentTransfer in="SourceAlpha" result="solid">
            <feFuncA  type="table" tableValues="0 1 1"/>
          </feComponentTransfer>
          <feOffset in="solid" result="offU" dx=${0} dy=${0} />
          <feOffset in="solid" result="offP" dx=${0} dy=${0} />
          <feOffset in="solid" result="offA" dx=${0} dy=${0} />
          ${0}
          ${0}
          ${0}
          <feGaussianBlur in=${0} result="blurU" stdDeviation=${0} />
          <feGaussianBlur in=${0} result="blurP" stdDeviation=${0} />
          <feGaussianBlur in=${0} result="blurA" stdDeviation=${0} />
          <feFlood in="SourceGraphic" result="opU" flood-color=${0} flood-opacity=${0} />
          <feFlood in="SourceGraphic" result="opP" flood-color=${0} flood-opacity=${0} />
          <feFlood in="SourceGraphic" result="opA" flood-color=${0} flood-opacity=${0} />
          <feComposite in="opU" in2="blurU" result="shU" operator="in" />
          <feComposite in="opP" in2="blurP" result="shP" operator="in" />
          <feComposite in="opA" in2="blurA" result="shA" operator="in" />
          <feMorphology in="solid" result="smaller" operator="erode" radius="1" />
          <feComposite in="shU" in2="smaller" result="finalU" operator="out" />
          <feComposite in="shP" in2="smaller" result="finalP" operator="out" />
          <feComposite in="shA" in2="smaller" result="finalA" operator="out" />
          <feMerge>
            <feMergeNode in="finalU" />
            <feMergeNode in="finalP" />
            <feMergeNode in="finalA" />
            <feMergeNode in="SourceGraphic" />
          </feMerge>
        </filter>`),`shadow-${e}`,t.mapUmbra[e].y/2,t.mapUmbra[e].y,t.mapPenumbra[e].y/2,t.mapPenumbra[e].y,t.mapAmbient[e].y/2,t.mapAmbient[e].y,0===t.mapUmbra[e].s?y$1(_t2$m||(_t2$m=_$p``)):y$1(_t3$7||(_t3$7=_$p`<feMorphology in="offU" result="spreadU" operator=${0} radius=${0} />`),t.mapUmbra[e].s>0?"dilate":"erode",Math.abs(t.mapUmbra[e].s)),0===t.mapPenumbra[e].s?y$1(_t4$7||(_t4$7=_$p``)):y$1(_t5$7||(_t5$7=_$p`<feMorphology in="offP" result="spreadP" operator=${0} radius=${0} />`),t.mapPenumbra[e].s>0?"dilate":"erode",Math.abs(t.mapPenumbra[e].s)),0===t.mapAmbient[e].s?y$1(_t6$6||(_t6$6=_$p``)):y$1(_t7$6||(_t7$6=_$p`<feMorphology in="offA" result="spreadA" operator=${0} radius=${0} />`),t.mapAmbient[e].s>0?"dilate":"erode",Math.abs(t.mapAmbient[e].s)),0===t.mapUmbra[e].s?"offU":"spreadU",t.mapUmbra[e].b/2,0===t.mapPenumbra[e].s?"offP":"spreadP",t.mapPenumbra[e].b/2,0===t.mapAmbient[e].s?"offA":"spreadA",t.mapAmbient[e].b/2,t.baselineColor,t.opacityUmbra+t.opacityBoost,t.baselineColor,t.opacityPenumbra+t.opacityBoost,t.baselineColor,t.opacityAmbient+t.opacityBoost)));return y$1(_t8$6||(_t8$6=_$p`
      <svg class="defs">
        <defs>
          ${0}
        </defs>
      </svg>
    `),e)}static get styles(){return r$6(_t9$5||(_t9$5=_$p`
      :host {
        ---shadow-0: var(--shadow-0, ${0});
        ---shadow-2: var(--shadow-2, ${0});
        ---shadow-4: var(--shadow-4, ${0});
        ---shadow-8: var(--shadow-8, ${0});

        ---color-background: var(--color-background, ${0});
        ---color-border: var(--color-border, ${0});
        ---color-text: var(--color-text, ${0});
        ---color-text-inverse: var(--color-text-inverse, ${0});
        ---color-link: var(--color-link, ${0});
        ---color-element-background: var(--color-element-background, ${0});
        ---color-element-disabled: var(--color-element-disabled, ${0});
        ---color-element-enabled: var(--color-element-enabled, ${0});
        ---color-element-selected: var(--color-element-selected, ${0});
        ---color-element-border: var(--color-element-border, ${0});
        ---color-element-emphasis: var(--color-element-emphasis, ${0});

        ---font-family-base: var(--font-family-base, "Source Sans", sans-serif);
        ---font-family-math: var(--font-family-math, "Source Serif", serif);

        ---transition-duration: var(--transition-duration, 500ms);

        font-family: var(---font-family-base);
      }

      :host,
      :host *,
      :host *::before,
      :host *::after {
        box-sizing: border-box;
      }

      .math-greek {
        font-family: var(---font-family-math);
        font-style: normal;
      }

      .math-num {
        font-family: var(---font-family-base);
        font-style: normal;
      }

      .math-var {
        font-family: var(---font-family-math);
        font-style: italic;
      }

      .defs {
        display: block;

        width: 0;
        height: 0;
      }
    `),o$5(this.cssBoxShadow(0)),o$5(this.cssBoxShadow(2)),o$5(this.cssBoxShadow(4)),o$5(this.cssBoxShadow(8)),o$5(this.greys.white),o$5(this.greys.light75),o$5(this.greys.dark75),o$5(this.greys.white),o$5(this.greys.dark25),o$5(this.greys.light75),o$5(this.greys.light50),o$5(this.greys.grey),o$5(this.greys.dark25),o$5(this.greys.dark50),o$5(this.greys.dark75))}}let _t$o,_t2$l,_$o=t=>t;class DecidablesButton extends DecidablesElement{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}constructor(){super(),this.disabled=!1}static get styles(){return[super.styles,r$6(_t$o||(_t$o=_$o`
        :host {
          margin: 0.25rem;
        }

        button {
          width: 100%;
          height: 100%;
          padding: 0.375rem 0.75rem;

          font-family: var(---font-family-base);
          font-size: 1.125rem;
          line-height: 1.5;
          color: var(---color-text-inverse);

          border: 0;
          border-radius: 0.25rem;
          outline: none;
        }

        button:disabled {
          background-color: var(--decidables-button-background-color, var(---color-element-disabled));
          outline: none;
          box-shadow: none;
        }

        button:enabled {
          cursor: pointer;

          background-color: var(--decidables-button-background-color, var(---color-element-enabled));
          outline: none;
          box-shadow: var(---shadow-2);
        }

        button:enabled:hover {
          outline: none;
          box-shadow: var(---shadow-4);
        }

        button:enabled:active {
          outline: none;
          box-shadow: var(---shadow-8);
        }

        :host(.keyboard) button:enabled:focus {
          outline: none;
          box-shadow: var(---shadow-4);
        }

        :host(.keyboard) button:enabled:focus:active {
          outline: none;
          box-shadow: var(---shadow-8);
        }
      `))]}render(){return $$1(_t2$l||(_t2$l=_$o`
      <button ?disabled=${0}>
        <slot></slot>
      </button>
    `),this.disabled)}}customElements.define("decidables-button",DecidablesButton);
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const l$2=t=>null!=t?t:w$2;let _t$n,_t2$k,_$n=t=>t;class DecidablesSlider extends DecidablesElement{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0},max:{attribute:"max",type:Number,reflect:!0},min:{attribute:"min",type:Number,reflect:!0},step:{attribute:"step",type:Number,reflect:!0},value:{attribute:"value",type:Number,reflect:!0}}}constructor(){super(),this.disabled=!1,this.max=void 0,this.min=void 0,this.step=void 0,this.value=void 0}changed(t){this.value=t.target.value,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}inputted(t){this.value=t.target.value}static get styles(){return[super.styles,r$6(_t$n||(_t$n=_$n`
        :host {
          ---shadow-2-rotate: var(--shadow-2-rotate, ${0});
          ---shadow-4-rotate: var(--shadow-4-rotate, ${0});
          ---shadow-8-rotate: var(--shadow-8-rotate, ${0});

          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;
        }

        label {
          margin: 0.25rem 0.25rem 0;
        }

        .range {
          display: inline-block;

          width: 3.5rem;
          height: 4.75rem;
          margin: 0 0.25rem 0.25rem;
        }

        decidables-spinner {
          --decidables-spinner-input-width: 3.5rem;

          margin: 0 0.25rem 0.25rem;
        }

        /* Adapted from http://danielstern.ca/range.css/#/ */
        /* Overall */
        input[type=range] {
          width: 4.75rem;
          height: 3.5rem;
          padding: 0;
          margin: 0;

          background-color: unset;

          transform: rotate(-90deg);
          transform-origin: 2.375rem 2.375rem;

          /* stylelint-disable-next-line property-no-vendor-prefix */
          -webkit-appearance: none;
        }

        input[type=range]:enabled {
          cursor: ns-resize;
        }

        input[type=range]:focus {
          outline: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-tooltip {
          display: none;
        }

        /* Track */
        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-webkit-slider-runnable-track {
          width: 100%;
          height: 4px;

          background: var(---color-element-disabled);
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        input[type=range]:focus::-webkit-slider-runnable-track {
          background: var(---color-element-disabled);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-moz-range-track {
          width: 100%;
          height: 4px;

          background: var(---color-element-disabled);
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-track {
          width: 100%;
          height: 4px;

          color: transparent;

          background: transparent;
          border-color: transparent;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-fill-lower {
          background: #cccccc;
          /* background: var(---color-element-disabled); */
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-fill-upper {
          background: #cccccc;
          /* background: var(---color-element-disabled); */
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:focus::-ms-fill-lower {
          background: var(---color-element-disabled);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:focus::-ms-fill-upper {
          background: var(---color-element-disabled);
        }

        /* Thumb */
        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-webkit-slider-thumb {
          width: 10px;
          height: 20px;
          margin-top: -8px;

          border: 0;
          border-radius: 4px;

          /* stylelint-disable-next-line property-no-vendor-prefix */
          -webkit-appearance: none;
        }

        input[type=range]:disabled::-webkit-slider-thumb {
          background: var(---color-element-disabled);
          box-shadow: none;
        }

        input[type=range]:enabled::-webkit-slider-thumb {
          background: var(---color-element-enabled);
          box-shadow: var(---shadow-2-rotate);
        }

        input[type=range]:enabled:hover::-webkit-slider-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        input[type=range]:enabled:active::-webkit-slider-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus::-webkit-slider-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        :host(.keyboard) input[type=range]:focus:active::-webkit-slider-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-moz-range-thumb {
          width: 10px;
          height: 20px;

          border: 0;
          border-radius: 4px;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:disabled::-moz-range-thumb {
          background: var(---color-element-disabled);
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled::-moz-range-thumb {
          background: var(---color-element-enabled);
          box-shadow: var(---shadow-2-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:hover::-moz-range-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:active::-moz-range-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus::-moz-range-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus:active::-moz-range-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-thumb {
          width: 10px;
          height: 20px;
          margin-top: 0;

          background: #999999;
          /* background: var(---color-element-enabled); */
          border: 0;
          border-radius: 4px;
          box-shadow: var(---shadow-2-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:disabled::-ms-thumb {
          background: var(---color-element-disabled);
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled::-ms-thumb {
          background: var(---color-element-enabled);
          box-shadow: var(---shadow-2-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:hover::-ms-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:active::-ms-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        :host(.keyboard) input[type=range]:enabled:focus::-ms-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus:active::-ms-thumb {
          box-shadow: var(---shadow-8-rotate);
        }
      `),o$5(this.cssBoxShadow(2,!0,!1)),o$5(this.cssBoxShadow(4,!0,!1)),o$5(this.cssBoxShadow(8,!0,!1)))]}render(){return $$1(_t2$k||(_t2$k=_$n`
      <label for="slider">
        <slot></slot>
      </label>
      <div class="range">
        <input type="range" id="slider" min=${0} max=${0} step=${0} .value=${0} @change=${0} @input=${0}>
      </div>
      <decidables-spinner min=${0} max=${0} step=${0} .value=${0} @input=${0}></decidables-spinner>
    `),l$2(this.min),l$2(this.max),l$2(this.step),this.value,this.changed.bind(this),this.inputted.bind(this),l$2(this.min),l$2(this.max),l$2(this.step),this.value,this.inputted.bind(this))}}customElements.define("decidables-slider",DecidablesSlider);let _t$m,_t2$j,_$m=t=>t;class DecidablesSpinner extends DecidablesElement{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0},max:{attribute:"max",type:Number,reflect:!0},min:{attribute:"min",type:Number,reflect:!0},step:{attribute:"step",type:Number,reflect:!0},value:{attribute:"value",type:Number,reflect:!0}}}constructor(){super(),this.disabled=!1,this.max=void 0,this.min=void 0,this.step=void 0,this.value=void 0}inputted(t){this.value=t.target.value}static get styles(){return[super.styles,r$6(_t$m||(_t$m=_$m`
        :host {
          ---decidables-spinner-font-size: var(--decidables-spinner-font-size, 1.125rem);
          ---decidables-spinner-input-width: var(--decidables-spinner-input-width, 4rem);
          ---decidables-spinner-prefix: var(--decidables-spinner-prefix, "");

          display: block;
        }

        label {
          position: relative;
          display: flex;

          flex-direction: column;

          align-items: center;

          margin: 0;

          font-size: 0.75rem;
        }

        label::before {
          position: absolute;
          bottom: 1px;
          left: calc(50% - var(---decidables-spinner-input-width) / 2 + 0.25rem);

          font-size: var(---decidables-spinner-font-size);
          line-height: normal;

          content: var(---decidables-spinner-prefix);
        }

        input[type=number] {
          width: var(---decidables-spinner-input-width);

          font-family: var(---font-family-base);
          font-size: var(---decidables-spinner-font-size);
          color: inherit;
          text-align: right;

          background: none;
          border: 0;
          border-radius: 0;
          outline: none;
          box-shadow: var(---shadow-2);

          -webkit-appearance: none; /* stylelint-disable-line property-no-vendor-prefix */
        }

        input[type=number]:hover {
          box-shadow: var(---shadow-4);
        }

        input[type=number]:focus,
        input[type=number]:active {
          box-shadow: var(---shadow-8);
        }

        input[type=number]:disabled {
          color: var(---color-text);

          border: 0;
          box-shadow: none;

          /* HACK: Use correct text color in Safari */
          -webkit-opacity: 1;
          /* HACK: Hide spinners in disabled input for Firefox and Safari */
          -moz-appearance: textfield; /* stylelint-disable-line property-no-vendor-prefix */
          /* HACK: Use correct text color in Safari */
          -webkit-text-fill-color: var(---color-text);
        }

        /* HACK: Hide spinners in disabled input for Firefox and Safari */
        input[type=number]:disabled::-webkit-outer-spin-button,
        input[type=number]:disabled::-webkit-inner-spin-button {
          margin: 0;
          -webkit-appearance: none; /* stylelint-disable-line property-no-vendor-prefix */
        }
      `))]}render(){return $$1(_t2$j||(_t2$j=_$m`
      <label>
        <slot></slot>
        <input ?disabled=${0} type="number" min=${0} max=${0} step=${0} .value=${0} @input=${0}>
      </label>
    `),this.disabled,l$2(this.min),l$2(this.max),l$2(this.step),this.value,this.inputted.bind(this))}}customElements.define("decidables-spinner",DecidablesSpinner);let _t$l,_t2$i,_$l=t=>t;class DecidablesSwitch extends DecidablesElement{static get properties(){return{checked:{attribute:"checked",type:Boolean,reflect:!0},disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}constructor(){super(),this.checked=!1,this.disabled=!1}changed(t){this.checked=t.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked},bubbles:!0}))}static get styles(){return[super.styles,r$6(_t$l||(_t$l=_$l`
        :host {
          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;
        }

        /* Adapted from https://codepen.io/guuslieben/pen/YyPRVP */
        input[type=checkbox] {
          /* visuallyhidden: https://github.com/h5bp/html5-boilerplate/blob/master/dist/doc/css.md */
          position: absolute;

          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0 0 0 0);

          white-space: nowrap;

          border: 0;
          clip-path: inset(100%); /* May cause a performance issue: https://github.com/h5bp/html5-boilerplate/issues/2021 */
        }

        input[type=checkbox] + label {
          order: 1;

          margin: 0 0.25rem 0.25rem;

          font-weight: 400;
        }

        input[type=checkbox] + label + label {
          position: relative;

          min-width: 24px;
          padding: 0 0 36px;
          margin: 0.25rem 0.25rem 0;

          font-weight: 400;

          outline: none;
        }

        input[type=checkbox] + label + label::before,
        input[type=checkbox] + label + label::after {
          position: absolute;

          left: 50%;

          margin: 0;

          content: "";

          outline: 0;

          transition: all var(---transition-duration) ease;
          transform: translate(-50%, 0);
        }

        input[type=checkbox] + label + label::before {
          bottom: 1px;

          width: 8px;
          height: 34px;

          background-color: var(---color-element-disabled);
          border-radius: 4px;
        }

        input[type=checkbox] + label + label::after {
          bottom: 0;

          width: 18px;
          height: 18px;

          background-color: var(---color-element-enabled);
          border-radius: 50%;
          box-shadow: var(---shadow-2);
        }

        input[type=checkbox]:checked + label + label::after {
          transform: translate(-50%, -100%);
        }

        input[type=checkbox]:disabled + label + label::after {
          background-color: var(---color-element-disabled);
          box-shadow: none;
        }

        input[type=checkbox]:enabled + label,
        input[type=checkbox]:enabled + label + label {
          cursor: pointer;
        }

        input[type=checkbox]:enabled + label:hover + label::after,
        input[type=checkbox]:enabled + label + label:hover::after {
          box-shadow: var(---shadow-4);
        }

        input[type=checkbox]:enabled + label:active + label::after,
        input[type=checkbox]:enabled + label + label:active::after {
          box-shadow: var(---shadow-8);
        }

        /* stylelint-disable-next-line selector-max-compound-selectors */
        :host(.keyboard) input[type=checkbox]:enabled:focus + label + label::after {
          box-shadow: var(---shadow-4);
        }

        /* stylelint-disable-next-line selector-max-compound-selectors */
        :host(.keyboard) input[type=checkbox]:enabled:focus + label + label:active::after,
        :host(.keyboard) input[type=checkbox]:enabled:focus:active + label + label::after {
          box-shadow: var(---shadow-8);
        }
      `))]}render(){return $$1(_t2$i||(_t2$i=_$l`
      <input type="checkbox" id="switch" ?checked=${0} ?disabled=${0} @change=${0}>
      <label for="switch">
        <slot name="off-label"></slot>
      </label>
      <label for="switch">
        <slot></slot>
      </label>
    `),this.checked,this.disabled,this.changed.bind(this))}}customElements.define("decidables-switch",DecidablesSwitch);let _t$k,_t2$h,_$k=t=>t;class DecidablesToggle extends DecidablesElement{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}constructor(){super(),this.disabled=!1}static get styles(){return[super.styles,r$6(_t$k||(_t$k=_$k`
        fieldset {
          display: flex;

          flex-direction: column;

          align-items: stretch;
          justify-content: center;

          margin: 0.25rem;

          border: 0;
        }

        legend {
          text-align: center;
        }
      `))]}render(){return $$1(_t2$h||(_t2$h=_$k`
      <fieldset ?disabled=${0}>
        <legend><slot name="label"></slot></legend>
        <slot></slot>
      </fieldset>
    `),this.disabled)}}customElements.define("decidables-toggle",DecidablesToggle);let _t$j,_t2$g,_$j=t=>t;class DecidablesToggleOption extends DecidablesElement{static get properties(){return{checked:{attribute:"checked",type:Boolean,reflect:!0},disabled:{attribute:"disabled",type:Boolean,reflect:!0},name:{attribute:"name",type:String,reflect:!0},value:{attribute:"value",type:String,reflect:!0}}}constructor(){super(),this.checked=!1,this.disabled=!1,this.name=void 0,this.value=void 0}changed(t){this.checked=t.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked,value:this.value},bubbles:!0}))}static get styles(){return[super.styles,r$6(_t$j||(_t$j=_$j`
        :host {
          display: flex;
        }

        input[type=radio] {
          /* visuallyhidden: https://github.com/h5bp/html5-boilerplate/blob/master/dist/doc/css.md */
          position: absolute;

          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0 0 0 0);

          white-space: nowrap;

          border: 0;
          clip-path: inset(100%); /* May cause a performance issue: https://github.com/h5bp/html5-boilerplate/issues/2021 */
        }

        input[type=radio] + label {
          width: 100%;
          padding: 0.375rem 0.75rem;

          font-family: var(---font-family-base);
          font-size: 1.125rem;
          line-height: 1.5;
          color: var(---color-text-inverse);
          text-align: center;

          cursor: pointer;

          background-color: var(---color-element-enabled);
          border: 0;
          border-radius: 0;
          outline: none;

          box-shadow: var(---shadow-2);
        }

        input[type=radio]:checked + label {
          background-color: var(---color-element-selected);
          outline: none;
          box-shadow: var(---shadow-2);
        }

        input[type=radio] + label:hover {
          z-index: 1;

          outline: none;
          box-shadow: var(---shadow-4);
        }

        input[type=radio] + label:active {
          z-index: 2;

          outline: none;
          box-shadow: var(---shadow-8);
        }

        :host(:first-of-type) input[type=radio] + label {
          border-top-left-radius: 0.25rem;
          border-top-right-radius: 0.25rem;
        }

        :host(:last-of-type) input[type=radio] + label {
          border-bottom-right-radius: 0.25rem;
          border-bottom-left-radius: 0.25rem;
        }

        :host(.keyboard) input[type=radio]:focus + label {
          z-index: 1;

          outline: none;
          box-shadow: var(---shadow-4);
        }

        :host(.keyboard) input[type=radio]:focus:checked + label {
          z-index: 1;

          background-color: var(---color-element-selected);
          outline: none;
          box-shadow: var(---shadow-4);
        }

        :host(.keyboard) input[type=radio]:focus + label:active {
          z-index: 2;

          outline: none;
          box-shadow: var(---shadow-8);
        }
      `))]}render(){return $$1(_t2$g||(_t2$g=_$j`
      <input type="radio" id="toggle-option" name=${0} value=${0} .checked=${0} @change=${0}>
      <label for="toggle-option">
        <slot></slot>
      </label>
    `),this.name,this.value,this.checked,this.changed.bind(this))}}customElements.define("decidables-toggle-option",DecidablesToggleOption);const DecidablesConverterArray={fromAttribute:t=>t.split(/\s+/).map((t=>Number.parseFloat(t))),toAttribute:t=>t.length?t.map((t=>t.toFixed(3))).join(" "):null};let _t$i,_$i=t=>t;class CPTElement extends DecidablesElement{static get properties(){return{interactive:{attribute:"interactive",type:Boolean,reflect:!0}}}constructor(){super(),this.interactive=!1}static get colors(){return{x:Set1[0],a:Set1[4],l:Set1[5],v:Set1[7],p:Set1[1],g:Set1[2],w:Set1[3],u:Set1[6],chosen:Set1[8],better:"#4545d0",worse:"#f032e6",even:"#10dbc9",correct:"#ffffff",error:"#000000",nr:"#cccccc"}}static get lights(){return Object.keys(CPTElement.colors).reduce(((t,e)=>(t[e]=interpolateRgb(CPTElement.colors[e],"#ffffff")(.5),t)),{})}static get darks(){return Object.keys(CPTElement.colors).reduce(((t,e)=>(t[e]=interpolateRgb(CPTElement.colors[e],"#000000")(.5),t)),{})}static get styles(){return[super.styles,r$6(_t$i||(_t$i=_$i`
        :host {
          ---color-x: var(--color-x, ${0});
          ---color-a: var(--color-a, ${0});
          ---color-l: var(--color-l, ${0});
          ---color-v: var(--color-v, ${0});
          ---color-p: var(--color-p, ${0});
          ---color-g: var(--color-g, ${0});
          ---color-w: var(--color-w, ${0});
          ---color-u: var(--color-u, ${0});
          ---color-chosen: var(--color-chosen, ${0});
          ---color-better: var(--color-better, ${0});
          ---color-worse: var(--color-worse, ${0});
          ---color-even: var(--color-even, ${0});
          ---color-correct: var(--color-correct, ${0});
          ---color-error: var(--color-error, ${0});
          ---color-nr: var(--color-nr, ${0});

          ---color-x-light: var(--color-x-light, ${0});
          ---color-a-light: var(--color-a-light, ${0});
          ---color-l-light: var(--color-l-light, ${0});
          ---color-v-light: var(--color-v-light, ${0});
          ---color-p-light: var(--color-p-light, ${0});
          ---color-g-light: var(--color-g-light, ${0});
          ---color-w-light: var(--color-w-light, ${0});
          ---color-u-light: var(--color-u-light, ${0});
          ---color-chosen-light: var(--color-chosen-light, ${0});
          ---color-better-light: var(--color-better-light, ${0});
          ---color-worse-light: var(--color-worse-light, ${0});
          ---color-even-light: var(--color-even-light, ${0});
          ---color-correct-light: var(--color-correct-light, ${0});
          ---color-error-light: var(--color-error-light, ${0});
          ---color-nr-light: var(--color-nr-light, ${0});

          ---color-x-dark: var(--color-x-dark, ${0});
          ---color-a-dark: var(--color-a-dark, ${0});
          ---color-l-dark: var(--color-l-dark, ${0});
          ---color-v-dark: var(--color-v-dark, ${0});
          ---color-p-dark: var(--color-p-dark, ${0});
          ---color-g-dark: var(--color-g-dark, ${0});
          ---color-w-dark: var(--color-w-dark, ${0});
          ---color-u-dark: var(--color-u-dark, ${0});
          ---color-chosen-dark: var(--color-chosen-dark, ${0});
          ---color-better-dark: var(--color-better-dark, ${0});
          ---color-worse-dark: var(--color-worse-dark, ${0});
          ---color-even-dark: var(--color-even-dark, ${0});
          ---color-correct-dark: var(--color-correct-dark, ${0});
          ---color-error-dark: var(--color-error-dark, ${0});
          ---color-nr-dark: var(--color-nr-dark, ${0});
        }
      `),o$5(this.colors.x),o$5(this.colors.a),o$5(this.colors.l),o$5(this.colors.v),o$5(this.colors.p),o$5(this.colors.g),o$5(this.colors.w),o$5(this.colors.u),o$5(this.colors.chosen),o$5(this.colors.better),o$5(this.colors.worse),o$5(this.colors.even),o$5(this.colors.correct),o$5(this.colors.error),o$5(this.colors.nr),o$5(this.lights.x),o$5(this.lights.a),o$5(this.lights.l),o$5(this.lights.v),o$5(this.lights.p),o$5(this.lights.g),o$5(this.lights.w),o$5(this.lights.u),o$5(this.lights.chosen),o$5(this.lights.better),o$5(this.lights.worse),o$5(this.lights.even),o$5(this.lights.correct),o$5(this.lights.error),o$5(this.lights.nr),o$5(this.darks.x),o$5(this.darks.a),o$5(this.darks.l),o$5(this.darks.v),o$5(this.darks.p),o$5(this.darks.g),o$5(this.darks.w),o$5(this.darks.u),o$5(this.darks.chosen),o$5(this.darks.better),o$5(this.darks.worse),o$5(this.darks.even),o$5(this.darks.correct),o$5(this.darks.error),o$5(this.darks.nr))]}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var t$1;const i$2=globalThis.trustedTypes,s=i$2?i$2.createPolicy("lit-html",{createHTML:t=>t}):void 0,e$2=`lit$${(Math.random()+"").slice(9)}$`,o$1="?"+e$2,n$2=`<${o$1}>`,l$1=document,h$2=(t="")=>l$1.createComment(t),r$3=t=>null===t||"object"!=typeof t&&"function"!=typeof t,d$2=Array.isArray,u=t=>{var e;return d$2(t)||"function"==typeof(null===(e=t)||void 0===e?void 0:e[Symbol.iterator])},c=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,v=/-->/g,a$1=/>/g,f=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,_$h=/'/g,m=/"/g,g$1=/^(?:script|style|textarea)$/i,b$1=Symbol.for("lit-noChange"),w$1=Symbol.for("lit-nothing"),T=new WeakMap,A$1=l$1.createTreeWalker(l$1,129,null,!1),C=(t,e)=>{const r=t.length-1,n=[];let i,a=2===e?"<svg>":"",o=c;for(let e=0;e<r;e++){const r=t[e];let s,l,u=-1,d=0;for(;d<r.length&&(o.lastIndex=d,l=o.exec(r),null!==l);)d=o.lastIndex,o===c?"!--"===l[1]?o=v:void 0!==l[1]?o=a$1:void 0!==l[2]?(g$1.test(l[2])&&(i=RegExp("</"+l[2],"g")),o=f):void 0!==l[3]&&(o=f):o===f?">"===l[0]?(o=null!=i?i:c,u=-1):void 0===l[1]?u=-2:(u=o.lastIndex-l[2].length,s=l[1],o=void 0===l[3]?f:'"'===l[3]?m:_$h):o===m||o===_$h?o=f:o===v||o===a$1?o=c:(o=f,i=void 0);const h=o===f&&t[e+1].startsWith("/>")?" ":"";a+=o===c?r+n$2:u>=0?(n.push(s),r.slice(0,u)+"$lit$"+r.slice(u)+e$2+h):r+e$2+(-2===u?(n.push(void 0),e):h)}const l=a+(t[r]||"<?>")+(2===e?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==s?s.createHTML(l):l,n]};class E{constructor({strings:t,_$litType$:e},r){let n;this.parts=[];let i=0,a=0;const o=t.length-1,s=this.parts,[l,c]=C(t,e);if(this.el=E.createElement(l,r),A$1.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(n=A$1.nextNode())&&s.length<o;){if(1===n.nodeType){if(n.hasAttributes()){const t=[];for(const e of n.getAttributeNames())if(e.endsWith("$lit$")||e.startsWith(e$2)){const r=c[a++];if(t.push(e),void 0!==r){const t=n.getAttribute(r.toLowerCase()+"$lit$").split(e$2),e=/([.?@])?(.*)/.exec(r);s.push({type:1,index:i,name:e[2],strings:t,ctor:"."===e[1]?M:"?"===e[1]?H:"@"===e[1]?I:S$1})}else s.push({type:6,index:i})}for(const e of t)n.removeAttribute(e)}if(g$1.test(n.tagName)){const t=n.textContent.split(e$2),e=t.length-1;if(e>0){n.textContent=i$2?i$2.emptyScript:"";for(let r=0;r<e;r++)n.append(t[r],h$2()),A$1.nextNode(),s.push({type:2,index:++i});n.append(t[e],h$2())}}}else if(8===n.nodeType)if(n.data===o$1)s.push({type:2,index:i});else{let t=-1;for(;-1!==(t=n.data.indexOf(e$2,t+1));)s.push({type:7,index:i}),t+=e$2.length-1}i++}}static createElement(t,e){const r=l$1.createElement("template");return r.innerHTML=t,r}}function P(t,e,r=t,n){var i,a,o,s;if(e===b$1)return e;let l=void 0!==n?null===(i=r._$Cl)||void 0===i?void 0:i[n]:r._$Cu;const c=r$3(e)?void 0:e._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(a=null==l?void 0:l._$AO)||void 0===a||a.call(l,!1),void 0===c?l=void 0:(l=new c(t),l._$AT(t,r,n)),void 0!==n?(null!==(o=(s=r)._$Cl)&&void 0!==o?o:s._$Cl=[])[n]=l:r._$Cu=l),void 0!==l&&(e=P(t,l._$AS(t,e.values),l,n)),e}class V{constructor(t,e){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var e;const{el:{content:r},parts:n}=this._$AD,i=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:l$1).importNode(r,!0);A$1.currentNode=i;let a=A$1.nextNode(),o=0,s=0,l=n[0];for(;void 0!==l;){if(o===l.index){let e;2===l.type?e=new N(a,a.nextSibling,this,t):1===l.type?e=new l.ctor(a,l.name,l.strings,this,t):6===l.type&&(e=new L(a,this,t)),this.v.push(e),l=n[++s]}o!==(null==l?void 0:l.index)&&(a=A$1.nextNode(),o++)}return i}m(t){let e=0;for(const r of this.v)void 0!==r&&(void 0!==r.strings?(r._$AI(t,r,e),e+=r.strings.length-2):r._$AI(t[e])),e++}}class N{constructor(t,e,r,n){var i;this.type=2,this._$AH=w$1,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=r,this.options=n,this._$Cg=null===(i=null==n?void 0:n.isConnected)||void 0===i||i}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=P(this,t,e),r$3(t)?t===w$1||null==t||""===t?(this._$AH!==w$1&&this._$AR(),this._$AH=w$1):t!==this._$AH&&t!==b$1&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.S(t):u(t)?this.A(t):this.$(t)}M(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}S(t){this._$AH!==t&&(this._$AR(),this._$AH=this.M(t))}$(t){this._$AH!==w$1&&r$3(this._$AH)?this._$AA.nextSibling.data=t:this.S(l$1.createTextNode(t)),this._$AH=t}T(t){var e;const{values:r,_$litType$:n}=t,i="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=E.createElement(n.h,this.options)),n);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===i)this._$AH.m(r);else{const t=new V(i,this),e=t.p(this.options);t.m(r),this.S(e),this._$AH=t}}_$AC(t){let e=T.get(t.strings);return void 0===e&&T.set(t.strings,e=new E(t)),e}A(t){d$2(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let r,n=0;for(const i of t)n===e.length?e.push(r=new N(this.M(h$2()),this.M(h$2()),this,this.options)):r=e[n],r._$AI(i),n++;n<e.length&&(this._$AR(r&&r._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){var r;for(null===(r=this._$AP)||void 0===r||r.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cg=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class S$1{constructor(t,e,r,n,i){this.type=1,this._$AH=w$1,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=i,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=w$1}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,r,n){const i=this.strings;let a=!1;if(void 0===i)t=P(this,t,e,0),a=!r$3(t)||t!==this._$AH&&t!==b$1,a&&(this._$AH=t);else{const n=t;let o,s;for(t=i[0],o=0;o<i.length-1;o++)s=P(this,n[r+o],e,o),s===b$1&&(s=this._$AH[o]),a||(a=!r$3(s)||s!==this._$AH[o]),s===w$1?t=w$1:t!==w$1&&(t+=(null!=s?s:"")+i[o+1]),this._$AH[o]=s}a&&!n&&this.k(t)}k(t){t===w$1?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class M extends S$1{constructor(){super(...arguments),this.type=3}k(t){this.element[this.name]=t===w$1?void 0:t}}const k=i$2?i$2.emptyScript:"";class H extends S$1{constructor(){super(...arguments),this.type=4}k(t){t&&t!==w$1?this.element.setAttribute(this.name,k):this.element.removeAttribute(this.name)}}class I extends S$1{constructor(t,e,r,n,i){super(t,e,r,n,i),this.type=5}_$AI(t,e=this){var r;if((t=null!==(r=P(this,t,e,0))&&void 0!==r?r:w$1)===b$1)return;const n=this._$AH,i=t===w$1&&n!==w$1||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,a=t!==w$1&&(n===w$1||i);i&&this.element.removeEventListener(this.name,this,n),a&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,r;"function"==typeof this._$AH?this._$AH.call(null!==(r=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==r?r:this.element,t):this._$AH.handleEvent(t)}}class L{constructor(t,e,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){P(this,t)}}const z=window.litHtmlPolyfillSupport;null==z||z(E,N),(null!==(t$1=globalThis.litHtmlVersions)&&void 0!==t$1?t$1:globalThis.litHtmlVersions=[]).push("2.1.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const t={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e$1=t=>(...e)=>({_$litDirective$:t,values:e});class i$1{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,r){this._$Ct=t,this._$AM=e,this._$Ci=r}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const r$2=t=>void 0===t.strings
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,e=(t,r)=>{var n,i;const a=t._$AN;if(void 0===a)return!1;for(const t of a)null===(i=(n=t)._$AO)||void 0===i||i.call(n,r,!1),e(t,r);return!0},o=t=>{let e,r;do{if(void 0===(e=t._$AM))break;r=e._$AN,r.delete(t),t=e}while(0===(null==r?void 0:r.size))},n$1=t=>{for(let e;e=t._$AM;t=e){let r=e._$AN;if(void 0===r)e._$AN=r=new Set;else if(r.has(t))break;r.add(t),l(e)}};function r$1(t){void 0!==this._$AN?(o(this),this._$AM=t,n$1(this)):this._$AM=t}function h$1(t,r=!1,n=0){const i=this._$AH,a=this._$AN;if(void 0!==a&&0!==a.size)if(r)if(Array.isArray(i))for(let t=n;t<i.length;t++)e(i[t],!1),o(i[t]);else null!=i&&(e(i,!1),o(i));else e(this,t)}const l=e=>{var r,n,i,a;e.type==t.CHILD&&(null!==(r=(i=e)._$AP)&&void 0!==r||(i._$AP=h$1),null!==(n=(a=e)._$AQ)&&void 0!==n||(a._$AQ=r$1))};class d$1 extends i$1{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,e,r){super._$AT(t,e,r),n$1(this),this.isConnected=t._$AU}_$AO(t,r=!0){var n,i;t!==this.isConnected&&(this.isConnected=t,t?null===(n=this.reconnected)||void 0===n||n.call(this):null===(i=this.disconnected)||void 0===i||i.call(this)),r&&(e(this,t),o(this))}setValue(t){if(r$2(this._$Ct))this._$Ct._$AI(t,this);else{const e=[...this._$Ct._$AH];e[this._$Ci]=t,this._$Ct._$AI(e,this,0)}}disconnected(){}reconnected(){}}const i=new WeakMap;let h=0;const r=new Map,n=new WeakSet,a=()=>new Promise((t=>requestAnimationFrame(t))),d=[{transform:"translateX(-100%) scale(0)",opacity:0}],p=[{opacity:0},{opacity:1}],g=(t,e)=>{const r=t-e;return 0===r?void 0:r},w=(t,e)=>{const r=t/e;return 1===r?void 0:r},A={left:(t,e)=>{const r=g(t,e);return{value:r,transform:r&&`translateX(${r}px)`}},top:(t,e)=>{const r=g(t,e);return{value:r,transform:r&&`translateY(${r}px)`}},width:(t,e)=>{const r=w(t,e);return{value:r,transform:r&&`scaleX(${r})`}},height:(t,e)=>{const r=w(t,e);return{value:r,transform:r&&`scaleY(${r})`}}},b={duration:333,easing:"ease-in-out"},j=["left","top","width","height","opacity","color","background"],x=new WeakMap;class S extends d$1{constructor(e){if(super(e),this.t=null,this.i=null,this.o=!0,this.shouldLog=!1,e.type===t.CHILD)throw Error("The `animate` directive must be used in attribute position.");this.createFinished()}createFinished(){var t;null===(t=this.resolveFinished)||void 0===t||t.call(this),this.finished=new Promise((t=>{this.h=t}))}async resolveFinished(){var t;null===(t=this.h)||void 0===t||t.call(this),this.h=void 0}render(t){return w$1}getController(){return i.get(this.l)}isDisabled(){var t;return this.options.disabled||(null===(t=this.getController())||void 0===t?void 0:t.disabled)}update(t,[e]){var r;const n=void 0===this.l;return n&&(this.l=null===(r=t.options)||void 0===r?void 0:r.host,this.l.addController(this),this.element=t.element,x.set(this.element,this)),this.optionsOrCallback=e,(n||"function"!=typeof e)&&this.u(e),this.render(e)}u(t){var e,r;t=null!=t?t:{};const n=this.getController();void 0!==n&&((t={...n.defaultOptions,...t}).keyframeOptions={...n.defaultOptions.keyframeOptions,...t.keyframeOptions}),null!==(e=(r=t).properties)&&void 0!==e||(r.properties=j),this.options=t}v(){const t={},e=this.element.getBoundingClientRect(),r=getComputedStyle(this.element);return this.options.properties.forEach((n=>{var i;const a=null!==(i=e[n])&&void 0!==i?i:A[n]?void 0:r[n],o=Number(a);t[n]=isNaN(o)?a+"":o})),t}p(){let t,e=!0;return this.options.guard&&(t=this.options.guard(),e=((t,e)=>{if(Array.isArray(t)){if(Array.isArray(e)&&e.length===t.length&&t.every(((t,r)=>t===e[r])))return!1}else if(e===t)return!1;return!0})(t,this.m)),this.o=this.l.hasUpdated&&!this.isDisabled()&&!this.isAnimating()&&e&&this.element.isConnected,this.o&&(this.m=Array.isArray(t)?Array.from(t):t),this.o}hostUpdate(){var t;"function"==typeof this.optionsOrCallback&&this.u(this.optionsOrCallback()),this.p()&&(this.g=this.v(),this.t=null!==(t=this.t)&&void 0!==t?t:this.element.parentNode,this.i=this.element.nextSibling)}async hostUpdated(){if(!this.o||!this.element.isConnected||this.options.skipInitial&&!this.isHostRendered)return;let t;this.prepare(),await a;const e=this.A(),n=this._(this.options.keyframeOptions,e),i=this.v();if(void 0!==this.g){const{from:r,to:n}=this.j(this.g,i,e);this.log("measured",[this.g,i,r,n]),t=this.calculateKeyframes(r,n)}else{const n=r.get(this.options.inId);if(n){r.delete(this.options.inId);const{from:a,to:o}=this.j(n,i,e);t=this.calculateKeyframes(a,o),t=this.options.in?[{...this.options.in[0],...t[0]},...this.options.in.slice(1),t[1]]:t,h++,t.forEach((t=>t.zIndex=h))}else this.options.in&&(t=[...this.options.in,{}])}this.animate(t,n)}resetStyles(){var t;void 0!==this.S&&(this.element.setAttribute("style",null!==(t=this.S)&&void 0!==t?t:""),this.S=void 0)}commitStyles(){var t,e;this.S=this.element.getAttribute("style"),null===(t=this.webAnimation)||void 0===t||t.commitStyles(),null===(e=this.webAnimation)||void 0===e||e.cancel()}reconnected(){}async disconnected(){var t;if(!this.o)return;if(void 0!==this.options.id&&r.set(this.options.id,this.g),void 0===this.options.out)return;if(this.prepare(),await a(),null===(t=this.t)||void 0===t?void 0:t.isConnected){const t=this.i&&this.i.parentNode===this.t?this.i:null;if(this.t.insertBefore(this.element,t),this.options.stabilizeOut){const t=this.v();this.log("stabilizing out");const e=this.g.left-t.left,r=this.g.top-t.top;!("static"===getComputedStyle(this.element).position)||0===e&&0===r||(this.element.style.position="relative"),0!==e&&(this.element.style.left=e+"px"),0!==r&&(this.element.style.top=r+"px")}}const e=this._(this.options.keyframeOptions);await this.animate(this.options.out,e),this.element.remove()}prepare(){this.createFinished()}start(){var t,e;null===(e=(t=this.options).onStart)||void 0===e||e.call(t,this)}didFinish(t){var e,r;t&&(null===(r=(e=this.options).onComplete)||void 0===r||r.call(e,this)),this.g=void 0,this.animatingProperties=void 0,this.frames=void 0,this.resolveFinished()}A(){const t=[];for(let e=this.element.parentNode;e;e=null==e?void 0:e.parentNode){const r=x.get(e);r&&!r.isDisabled()&&r&&t.push(r)}return t}get isHostRendered(){const t=n.has(this.l);return t||this.l.updateComplete.then((()=>{n.add(this.l)})),t}_(t,e=this.A()){const r={...b};return e.forEach((t=>Object.assign(r,t.options.keyframeOptions))),Object.assign(r,t),r}j(t,e,r){t={...t},e={...e};const n=r.map((t=>t.animatingProperties)).filter((t=>void 0!==t));let i=1,a=1;return void 0!==n&&(n.forEach((t=>{t.width&&(i/=t.width),t.height&&(a/=t.height)})),void 0!==t.left&&void 0!==e.left&&(t.left=i*t.left,e.left=i*e.left),void 0!==t.top&&void 0!==e.top&&(t.top=a*t.top,e.top=a*e.top)),{from:t,to:e}}calculateKeyframes(t,e,r=!1){var n;const i={},a={};let o=!1;const s={};for(const r in e){const l=t[r],c=e[r];if(r in A){const t=A[r];if(void 0===l||void 0===c)continue;const e=t(l,c);void 0!==e.transform&&(s[r]=e.value,o=!0,i.transform=`${null!==(n=i.transform)&&void 0!==n?n:""} ${e.transform}`)}else l!==c&&void 0!==l&&void 0!==c&&(o=!0,i[r]=l,a[r]=c)}return i.transformOrigin=a.transformOrigin=r?"center center":"top left",this.animatingProperties=s,o?[i,a]:void 0}async animate(t,e=this.options.keyframeOptions){this.start(),this.frames=t;let r=!1;if(!this.isAnimating()&&!this.isDisabled()&&(this.options.onFrames&&(this.frames=t=this.options.onFrames(this),this.log("modified frames",t)),void 0!==t)){this.log("animate",[t,e]),r=!0,this.webAnimation=this.element.animate(t,e);const n=this.getController();null==n||n.add(this);try{await this.webAnimation.finished}catch(t){}null==n||n.remove(this)}return this.didFinish(r),r}isAnimating(){var t,e;return"running"===(null===(t=this.webAnimation)||void 0===t?void 0:t.playState)||(null===(e=this.webAnimation)||void 0===e?void 0:e.pending)}log(t,e){this.shouldLog&&!this.isDisabled()&&console.log(t,this.options.id,e)}}const $=e$1(S);class CPTMath{static xal2v(t,e,r){return t>=0?t**e:-r*(-t)**e}static xlv2a(t,e,r){return t>=0?Math.log(r)/Math.log(t):(Math.log(-r)-Math.log(e))/Math.log(-t)}static xav2l(t,e,r){return t>=0?1:-r/(-t)**e}static pg2w(t,e){return t**e/(t**e+(1-t)**e)**(1/e)}}let _t$h,_$g=t=>t;class CPTEquation extends CPTElement{static get properties(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0}}}constructor(){super(),this.numeric=!1}static get styles(){return[super.styles,r$6(_t$h||(_t$h=_$g`
        :host {
          display: block;

          margin: 1rem;
        }

        /* Containing <div> */
        .holder {
          display: flex;

          flex-direction: row;

          justify-content: left;
        }

        /* Overall <table> */
        .equation {
          text-align: center;

          border-collapse: collapse;

          border: 0;
        }

        /* Modifies <td> */
        .underline {
          border-bottom: 1px solid var(---color-text);
        }

        /* Basic <span> and <var> w/modifiers */
        span,
        var {
          padding: 0 0.25rem;

          font-style: normal;
        }

        .tight {
          padding: 0;
        }

        .paren {
          font-size: 150%;
        }

        .bracket {
          font-size: 175%;
        }

        .brace {
          font-size: 200%;
        }

        .addend {
          position: relative;
          display: inline-block;
        }

        .comparison {
          position: relative;
          display: inline-block;

          font-size: 125%;
          font-weight: 600;
        }

        .function {
          display: inline-block;
        }

        :host([numeric]) .function {
          padding: 0.25rem;
        }

        .exp {
          display: inline-block;

          font-size: 0.75rem;
        }

        .subscript {
          display: inline-block;

          font-size: 66.667%;
        }

        .summation {
          display: flex;

          flex-direction: column;

          line-height: 0.8;
        }

        .sigma {
          display: inline-block;

          font-size: 200%;
        }

        /* Input wrapping <label> */
        decidables-spinner {
          --decidables-spinner-input-width: 4rem;

          display: inline-block;

          padding: 0.125rem 0.375rem 0.375rem;

          line-height: 1.5;
          vertical-align: middle;
        }

        .n {
          --decidables-spinner-input-width: 2rem;
        }

        .left {
          text-align: left;
        }

        .right {
          text-align: right;
        }

        .bottom {
          vertical-align: bottom;
        }

        .top {
          vertical-align: top;
        }

        /* Color scheme */
        /* .win {
          background: var(---color-better);
        }

        .loss {
          background: var(---color-worse);
        }

        .sure {
          background: var(---color-even);
        } */

        .x {
          background: var(---color-x-light);
        }

        .a {
          background: var(---color-a-light);
        }

        .l {
          background: var(---color-l-light);
        }

        .v {
          background: var(---color-v-light);
        }

        .p {
          background: var(---color-p-light);
        }

        .g {
          background: var(---color-g-light);
        }

        .w {
          background: var(---color-w-light);
        }

        .u {
          background: var(---color-u-light);
        }
      `))]}}let _t$g,_t2$f,_t3$6,_t4$6,_t5$6,_t6$5,_t7$5,_t8$5,_t9$4,_t10$4,_t11$3,_t12$3,_t13$2,_t14$2,_t15$1,_t16$1,_t17$1,_t18$1,_t19,_t20,_t21,_t22,_t23,_t24,_t25,_t26,_t27,_t28,_t29,_t30,_$f=t=>t;class CPTCalculation extends CPTEquation{static get properties(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0}}}constructor(){super(),this.numeric=!1,this.xl=0,this.xw=100,this.pw=.75,this.xs=50,this.a=.8,this.l=1.2,this.g=.8,this.alignState()}alignState(){this.vw=CPTMath.xal2v(this.xw,this.a,this.l),this.vl=CPTMath.xal2v(this.xl,this.a,this.l),this.ww=CPTMath.pg2w(this.pw,this.g),this.wl=1-this.ww,this.vs=CPTMath.xal2v(this.xs,this.a,this.l),this.ug=this.vw*this.ww+this.vl*this.wl,this.us=this.vs,this.uDiff=this.ug-this.us}sendEvent(){this.dispatchEvent(new CustomEvent("cpt-calculation-change",{detail:{xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,a:this.a,l:this.l,g:this.g},bubbles:!0}))}xwInput(t){this.xw=parseFloat(t.target.value),this.alignState(),this.sendEvent()}pwInput(t){this.pw=parseFloat(t.target.value),this.alignState(),this.sendEvent()}xsInput(t){this.xs=parseFloat(t.target.value),this.alignState(),this.sendEvent()}aInput(t){this.a=parseFloat(t.target.value),this.alignState(),this.sendEvent()}lInput(t){this.l=parseFloat(t.target.value),this.alignState(),this.sendEvent()}gInput(t){this.g=parseFloat(t.target.value),this.alignState(),this.sendEvent()}static get styles(){return[super.styles,r$6(_t$g||(_t$g=_$f`
        /* :host {
          display: inline-block;
        } */
      `))]}render(){let t,e,r,n,i,a,o,s,l,c,u,d;this.alignState(),this.numeric?(t=$$1(_t2$f||(_t2$f=_$f`<decidables-spinner class="x" ?disabled=${0} .value="${0}" @input=${0}>
          <var class="math-var">x<sub class="subscript win">win</sub></var>
        </decidables-spinner>`),!this.interactive,this.xw,this.xwInput.bind(this)),e=$$1(_t3$6||(_t3$6=_$f`<decidables-spinner class="x" disabled .value="${0}">
          <var class="math-var">x<sub class="subscript loss">loss</sub></var>
        </decidables-spinner>`),this.xl),r=$$1(_t4$6||(_t4$6=_$f`<decidables-spinner class="p" ?disabled=${0} min="0" max="1" step=".01" .value="${0}" @input=${0}>
          <var class="math-var">p<sub class="subscript win">win</sub></var>
        </decidables-spinner>`),!this.interactive,+this.pw.toFixed(2),this.pwInput.bind(this)),n=$$1(_t5$6||(_t5$6=_$f`<decidables-spinner class="x" ?disabled=${0} .value="${0}" @input=${0}>
          <var class="math-var">x<sub class="subscript sure">sure</sub></var>
        </decidables-spinner>`),!this.interactive,this.xs,this.xsInput.bind(this)),i=$$1(_t6$5||(_t6$5=_$f`<decidables-spinner class="v" disabled .value="${0}">
          <var class="math-var">v<sub class="subscript win">win</sub></var>
        </decidables-spinner>`),+this.vw.toFixed(1)),a=$$1(_t7$5||(_t7$5=_$f`<decidables-spinner class="v" disabled .value="${0}">
          <var class="math-var">v<sub class="subscript loss">loss</sub></var>
        </decidables-spinner>`),+this.vl.toFixed(1)),o=$$1(_t8$5||(_t8$5=_$f`<decidables-spinner class="w" disabled .value="${0}">
          <var class="math-var">w<sub class="subscript win">win</sub></var>
        </decidables-spinner>`),+this.ww.toFixed(2)),s=$$1(_t9$4||(_t9$4=_$f`<decidables-spinner class="w" disabled .value="${0}">
          <var class="math-var">w<sub class="subscript loss">loss</sub></var>
        </decidables-spinner>`),+this.wl.toFixed(2)),l=$$1(_t10$4||(_t10$4=_$f`<decidables-spinner class="v" disabled .value="${0}">
          <var class="math-var">v<sub class="subscript sure">sure</sub></var>
        </decidables-spinner>`),+this.vs.toFixed(1)),c=$$1(_t11$3||(_t11$3=_$f`<decidables-spinner class="u" disabled .value="${0}">
          <var class="math-var">U<sub class="subscript gamble">gamble</sub></var>
        </decidables-spinner>`),+this.ug.toFixed(1)),u=$$1(_t12$3||(_t12$3=_$f`<decidables-spinner class="u" disabled .value="${0}">
          <var class="math-var">U<sub class="subscript sure">sure</sub></var>
        </decidables-spinner>`),+this.us.toFixed(1)),d=$$1(_t13$2||(_t13$2=_$f`${0}`),this.uDiff>0?$$1(_t14$2||(_t14$2=_$f`<span class="comparison" ${0}>&gt;</span>`),$({in:p})):this.uDiff<0?$$1(_t15$1||(_t15$1=_$f`<span class="comparison" ${0}>&lt;</span>`),$({in:p})):$$1(_t16$1||(_t16$1=_$f`<span class="comparison" ${0}>=</span>`),$({in:p})))):(t=$$1(_t17$1||(_t17$1=_$f`<var class="math-var x">x<sub class="subscript win">win</sub></var>`)),e=$$1(_t18$1||(_t18$1=_$f`<var class="math-var x">x<sub class="subscript loss">loss</sub></var>`)),r=$$1(_t19||(_t19=_$f`<var class="math-var p">p<sub class="subscript win">win</sub></var>`)),n=$$1(_t20||(_t20=_$f`<var class="math-var x">x<sub class="subscript sure">sure</sub></var>`)),i=$$1(_t21||(_t21=_$f`<var class="math-var v">v<sub class="subscript win">win</sub></var>`)),a=$$1(_t22||(_t22=_$f`<var class="math-var v">v<sub class="subscript loss">loss</sub></var>`)),o=$$1(_t23||(_t23=_$f`<var class="math-var w">w<sub class="subscript win">win</sub></var>`)),s=$$1(_t24||(_t24=_$f`<var class="math-var w">w<sub class="subscript loss">loss</sub></var>`)),l=$$1(_t25||(_t25=_$f`<var class="math-var v">v<sub class="subscript sure">sure</sub></var>`)),c=$$1(_t26||(_t26=_$f`<var class="math-var u">U<sub class="subscript gamble">gamble</sub></var>`)),u=$$1(_t27||(_t27=_$f`<var class="math-var u">U<sub class="subscript sure">sure</sub></var>`)),d=$$1(_t28||(_t28=_$f`<span class="comparison">â</span>`)));const h=$$1(_t29||(_t29=_$f`
      <tr>
        <td class="right">
          <span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>${0}<span class="paren tight">)</span></span>&nbsp;<span class="function w"><var class="math-var w tight">w</var><span class="paren tight">(</span>${0}<span class="paren tight">)</span></span><span class="plus">+</span><span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>${0}<span class="paren tight">)</span></span>&nbsp;<span class="bracket tight">[</span><span class="tight">1</span><span class="minus">â</span><span class="function w"><var class="math-var w">w</var><span class="paren tight">(</span>${0}<span class="paren tight">)</span></span><span class="bracket tight">]</span>
        </td>
        <td>
          ${0}
        </td>
        <td class="left">
          <span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>${0}<span class="paren tight">)</span></span>
        </td>
      </tr>
      <tr>
        <td class="right">
          ${0}&nbsp;${0}<span class="plus">+</span>${0}&nbsp;${0}
        </td>
        <td>
          ${0}
        </td>
        <td class="left">
          ${0}
        </td>
      </tr>
      <tr>
        <td class="right">
          ${0}
        </td>
        <td>
          ${0}
        </td>
        <td class="left">
          ${0}
        </td>
      </tr>`),t,r,e,r,d,n,i,o,a,s,d,l,c,d,u);return $$1(_t30||(_t30=_$f`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${0}
          </tbody>
        </table>
      </div>`),h)}}customElements.define("cpt-calculation",CPTCalculation);var version_1="2.11.1",version$2={version:version_1};
/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
createCommonjsModule((function(t){!function(e,r,n){r[e]=r[e]||n(),t.exports&&(t.exports=r[e])}("Promise",commonjsGlobal,(function(){var t,e,r,n=Object.prototype.toString,i="undefined"!=typeof setImmediate?function(t){return setImmediate(t)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(t,e,r,n){return Object.defineProperty(t,e,{value:r,writable:!0,configurable:!1!==n})}}catch(e){t=function(t,e,r){return t[e]=r,t}}function a(t,n){r.add(t,n),e||(e=i(r.drain))}function o(t){var e,r=typeof t;return null==t||"object"!=r&&"function"!=r||(e=t.then),"function"==typeof e&&e}function s(){for(var t=0;t<this.chain.length;t++)l(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function l(t,e,r){var n,i;try{!1===e?r.reject(t.msg):(n=!0===e?t.msg:e.call(void 0,t.msg))===r.promise?r.reject(TypeError("Promise-chain cycle")):(i=o(n))?i.call(n,r.resolve,r.reject):r.resolve(n)}catch(t){r.reject(t)}}function c(t){var e,r=this;if(!r.triggered){r.triggered=!0,r.def&&(r=r.def);try{(e=o(t))?a((function(){var n=new h(r);try{e.call(t,(function(){c.apply(n,arguments)}),(function(){u.apply(n,arguments)}))}catch(t){u.call(n,t)}})):(r.msg=t,r.state=1,r.chain.length>0&&a(s,r))}catch(t){u.call(new h(r),t)}}}function u(t){var e=this;e.triggered||(e.triggered=!0,e.def&&(e=e.def),e.msg=t,e.state=2,e.chain.length>0&&a(s,e))}function d(t,e,r,n){for(var i=0;i<e.length;i++)!function(i){t.resolve(e[i]).then((function(t){r(i,t)}),n)}(i)}function h(t){this.def=t,this.triggered=!1}function g(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function f(t){if("function"!=typeof t)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var e=new g(this);this.then=function(t,r){var n={success:"function"!=typeof t||t,failure:"function"==typeof r&&r};return n.promise=new this.constructor((function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");n.resolve=t,n.reject=e})),e.chain.push(n),0!==e.state&&a(s,e),n.promise},this.catch=function(t){return this.then(void 0,t)};try{t.call(void 0,(function(t){c.call(e,t)}),(function(t){u.call(e,t)}))}catch(t){u.call(e,t)}}r=function(){var t,r,n;function i(t,e){this.fn=t,this.self=e,this.next=void 0}return{add:function(e,a){n=new i(e,a),r?r.next=n:t=n,r=n,n=void 0},drain:function(){var n=t;for(t=r=e=void 0;n;)n.fn.call(n.self),n=n.next}}}();var p=t({},"constructor",f,!1);return f.prototype=p,t(p,"__NPO__",0,!1),t(f,"resolve",(function(t){return t&&"object"==typeof t&&1===t.__NPO__?t:new this((function(e,r){if("function"!=typeof e||"function"!=typeof r)throw TypeError("Not a function");e(t)}))})),t(f,"reject",(function(t){return new this((function(e,r){if("function"!=typeof e||"function"!=typeof r)throw TypeError("Not a function");r(t)}))})),t(f,"all",(function(t){var e=this;return"[object Array]"!=n.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e((function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");var i=t.length,a=Array(i),o=0;d(e,t,(function(t,e){a[t]=e,++o===i&&r(a)}),n)}))})),t(f,"race",(function(t){var e=this;return"[object Array]"!=n.call(t)?e.reject(TypeError("Not an array")):new e((function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");d(e,t,(function(t,e){r(e)}),n)}))})),f}))}));var d3=createCommonjsModule((function(t){(function(){var e={version:"3.8.0"},r=[].slice,n=function(t){return r.call(t)},i=self.document;function a(t){return t&&(t.ownerDocument||t.document||t).documentElement}function o(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(i)try{n(i.documentElement.childNodes)[0].nodeType}catch(t){n=function(t){for(var e=t.length,r=new Array(e);e--;)r[e]=t[e];return r}}if(Date.now||(Date.now=function(){return+new Date}),i)try{i.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var s=this.Element.prototype,l=s.setAttribute,c=s.setAttributeNS,u=this.CSSStyleDeclaration.prototype,d=u.setProperty;s.setAttribute=function(t,e){l.call(this,t,e+"")},s.setAttributeNS=function(t,e,r){c.call(this,t,e,r+"")},u.setProperty=function(t,e,r){d.call(this,t,e+"",r)}}function h(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function g(t){return null===t?NaN:+t}function f(t){return!isNaN(t)}function p(t){return{left:function(e,r,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=e.length);n<i;){var a=n+i>>>1;t(e[a],r)<0?n=a+1:i=a}return n},right:function(e,r,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=e.length);n<i;){var a=n+i>>>1;t(e[a],r)>0?i=a:n=a+1}return n}}}e.ascending=h,e.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},e.min=function(t,e){var r,n,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(n=t[i])&&n>=n){r=n;break}for(;++i<a;)null!=(n=t[i])&&r>n&&(r=n)}else{for(;++i<a;)if(null!=(n=e.call(t,t[i],i))&&n>=n){r=n;break}for(;++i<a;)null!=(n=e.call(t,t[i],i))&&r>n&&(r=n)}return r},e.max=function(t,e){var r,n,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(n=t[i])&&n>=n){r=n;break}for(;++i<a;)null!=(n=t[i])&&n>r&&(r=n)}else{for(;++i<a;)if(null!=(n=e.call(t,t[i],i))&&n>=n){r=n;break}for(;++i<a;)null!=(n=e.call(t,t[i],i))&&n>r&&(r=n)}return r},e.extent=function(t,e){var r,n,i,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(n=t[a])&&n>=n){r=i=n;break}for(;++a<o;)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}else{for(;++a<o;)if(null!=(n=e.call(t,t[a],a))&&n>=n){r=i=n;break}for(;++a<o;)null!=(n=e.call(t,t[a],a))&&(r>n&&(r=n),i<n&&(i=n))}return[r,i]},e.sum=function(t,e){var r,n=0,i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)f(r=+t[a])&&(n+=r);else for(;++a<i;)f(r=+e.call(t,t[a],a))&&(n+=r);return n},e.mean=function(t,e){var r,n=0,i=t.length,a=-1,o=i;if(1===arguments.length)for(;++a<i;)f(r=g(t[a]))?n+=r:--o;else for(;++a<i;)f(r=g(e.call(t,t[a],a)))?n+=r:--o;if(o)return n/o},e.quantile=function(t,e){var r=(t.length-1)*e+1,n=Math.floor(r),i=+t[n-1],a=r-n;return a?i+a*(t[n]-i):i},e.median=function(t,r){var n,i=[],a=t.length,o=-1;if(1===arguments.length)for(;++o<a;)f(n=g(t[o]))&&i.push(n);else for(;++o<a;)f(n=g(r.call(t,t[o],o)))&&i.push(n);if(i.length)return e.quantile(i.sort(h),.5)},e.variance=function(t,e){var r,n,i=t.length,a=0,o=0,s=-1,l=0;if(1===arguments.length)for(;++s<i;)f(r=g(t[s]))&&(o+=(n=r-a)*(r-(a+=n/++l)));else for(;++s<i;)f(r=g(e.call(t,t[s],s)))&&(o+=(n=r-a)*(r-(a+=n/++l)));if(l>1)return o/(l-1)},e.deviation=function(){var t=e.variance.apply(this,arguments);return t?Math.sqrt(t):t};var m=p(h);function y(t){return t.length}e.bisectLeft=m.left,e.bisect=e.bisectRight=m.right,e.bisector=function(t){return p(1===t.length?function(e,r){return h(t(e),r)}:t)},e.shuffle=function(t,e,r){(a=arguments.length)<3&&(r=t.length,a<2&&(e=0));for(var n,i,a=r-e;a;)i=Math.random()*a--|0,n=t[a+e],t[a+e]=t[i+e],t[i+e]=n;return t},e.permute=function(t,e){for(var r=e.length,n=new Array(r);r--;)n[r]=t[e[r]];return n},e.pairs=function(t){for(var e=0,r=t.length-1,n=t[0],i=new Array(r<0?0:r);e<r;)i[e]=[n,n=t[++e]];return i},e.transpose=function(t){if(!(a=t.length))return[];for(var r=-1,n=e.min(t,y),i=new Array(n);++r<n;)for(var a,o=-1,s=i[r]=new Array(a);++o<a;)s[o]=t[o][r];return i},e.zip=function(){return e.transpose(arguments)},e.keys=function(t){var e=[];for(var r in t)e.push(r);return e},e.values=function(t){var e=[];for(var r in t)e.push(t[r]);return e},e.entries=function(t){var e=[];for(var r in t)e.push({key:r,value:t[r]});return e},e.merge=function(t){for(var e,r,n,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(r=new Array(o);--i>=0;)for(e=(n=t[i]).length;--e>=0;)r[--o]=n[e];return r};var b=Math.abs;function v(t){for(var e=1;t*e%1;)e*=10;return e}function x(t,e){for(var r in e)Object.defineProperty(t.prototype,r,{value:e[r],enumerable:!1})}function I(){this._=Object.create(null)}e.range=function(t,e,r){if(arguments.length<3&&(r=1,arguments.length<2&&(e=t,t=0)),(e-t)/r==1/0)throw new Error("infinite range");var n,i=[],a=v(b(r)),o=-1;if(t*=a,e*=a,(r*=a)<0)for(;(n=t+r*++o)>e;)i.push(n/a);else for(;(n=t+r*++o)<e;)i.push(n/a);return i},e.map=function(t,e){var r=new I;if(t instanceof I)t.forEach((function(t,e){r.set(t,e)}));else if(Array.isArray(t)){var n,i=-1,a=t.length;if(1===arguments.length)for(;++i<a;)r.set(i,t[i]);else for(;++i<a;)r.set(e.call(t,n=t[i],i),n)}else for(var o in t)r.set(o,t[o]);return r};function B(t){return"__proto__"==(t+="")||"\0"===t[0]?"\0"+t:t}function C(t){return"\0"===(t+="")[0]?t.slice(1):t}function F(t){return B(t)in this._}function A(t){return(t=B(t))in this._&&delete this._[t]}function Q(){var t=[];for(var e in this._)t.push(C(e));return t}function _(){var t=0;for(var e in this._)++t;return t}function w(){for(var t in this._)return!1;return!0}function U(){this._=Object.create(null)}function S(t){return t}function E(t,e,r){return function(){var n=r.apply(e,arguments);return n===e?t:n}}function L(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var r=0,n=T.length;r<n;++r){var i=T[r]+e;if(i in t)return i}}x(I,{has:F,get:function(t){return this._[B(t)]},set:function(t,e){return this._[B(t)]=e},remove:A,keys:Q,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:C(e),value:this._[e]});return t},size:_,empty:w,forEach:function(t){for(var e in this._)t.call(this,C(e),this._[e])}}),e.nest=function(){var t,r,n={},i=[],a=[];function o(e,a,s){if(s>=i.length)return r?r.call(n,a):t?a.sort(t):a;for(var l,c,u,d,h=-1,g=a.length,f=i[s++],p=new I;++h<g;)(d=p.get(l=f(c=a[h])))?d.push(c):p.set(l,[c]);return e?(c=e(),u=function(t,r){c.set(t,o(e,r,s))}):(c={},u=function(t,r){c[t]=o(e,r,s)}),p.forEach(u),c}function s(t,e){if(e>=i.length)return t;var r=[],n=a[e++];return t.forEach((function(t,n){r.push({key:t,values:s(n,e)})})),n?r.sort((function(t,e){return n(t.key,e.key)})):r}return n.map=function(t,e){return o(e,t,0)},n.entries=function(t){return s(o(e.map,t,0),0)},n.key=function(t){return i.push(t),n},n.sortKeys=function(t){return a[i.length-1]=t,n},n.sortValues=function(e){return t=e,n},n.rollup=function(t){return r=t,n},n},e.set=function(t){var e=new U;if(t)for(var r=0,n=t.length;r<n;++r)e.add(t[r]);return e},x(U,{has:F,add:function(t){return this._[B(t+="")]=!0,t},remove:A,values:Q,size:_,empty:w,forEach:function(t){for(var e in this._)t.call(this,C(e))}}),e.behavior={},e.rebind=function(t,e){for(var r,n=1,i=arguments.length;++n<i;)t[r=arguments[n]]=E(t,e,e[r]);return t};var T=["webkit","ms","moz","Moz","o","O"];function R(){}function k(){}function G(t){var e=[],r=new I;function n(){for(var r,n=e,i=-1,a=n.length;++i<a;)(r=n[i].on)&&r.apply(this,arguments);return t}return n.on=function(n,i){var a,o=r.get(n);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,a=e.indexOf(o)).concat(e.slice(a+1)),r.remove(n)),i&&e.push(r.set(n,{on:i})),t)},n}function N(){e.event.preventDefault()}function M(){for(var t,r=e.event;t=r.sourceEvent;)r=t;return r}function D(t){for(var r=new k,n=0,i=arguments.length;++n<i;)r[arguments[n]]=G(r);return r.of=function(n,i){return function(a){try{var o=a.sourceEvent=e.event;a.target=t,e.event=a,r[a.type].apply(n,i)}finally{e.event=o}}},r}e.dispatch=function(){for(var t=new k,e=-1,r=arguments.length;++e<r;)t[arguments[e]]=G(t);return t},k.prototype.on=function(t,e){var r=t.indexOf("."),n="";if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t)return arguments.length<2?this[t].on(n):this[t].on(n,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(n,null);return this}},e.event=null,e.requote=function(t){return t.replace(X,"\\$&")};var X=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,V={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)t[r]=e[r]};function W(t){return V(t,H),t}var Z=function(t,e){return e.querySelector(t)},O=function(t,e){return e.querySelectorAll(t)},$=function(t,e){var r=t.matches||t[L(t,"matchesSelector")];return $=function(t,e){return r.call(t,e)},$(t,e)};"function"==typeof Sizzle&&(Z=function(t,e){return Sizzle(t,e)[0]||null},O=Sizzle,$=Sizzle.matchesSelector),e.selection=function(){return e.select(i.documentElement)};var H=e.selection.prototype=[];function Y(t){return"function"==typeof t?t:function(){return Z(t,this)}}function P(t){return"function"==typeof t?t:function(){return O(t,this)}}H.select=function(t){var e,r,n,i,a=[];t=Y(t);for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var l=-1,c=n.length;++l<c;)(i=n[l])?(e.push(r=t.call(i,i.__data__,l,o)),r&&"__data__"in i&&(r.__data__=i.__data__)):e.push(null)}return W(a)},H.selectAll=function(t){var e,r,i=[];t=P(t);for(var a=-1,o=this.length;++a<o;)for(var s=this[a],l=-1,c=s.length;++l<c;)(r=s[l])&&(i.push(e=n(t.call(r,r.__data__,l,a))),e.parentNode=r);return W(i)};var z="http://www.w3.org/1999/xhtml",J={svg:"http://www.w3.org/2000/svg",xhtml:z,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function j(t,r){return t=e.ns.qualify(t),null==r?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof r?t.local?function(){var e=r.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}:function(){var e=r.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}:t.local?function(){this.setAttributeNS(t.space,t.local,r)}:function(){this.setAttribute(t,r)}}function K(t){return t.trim().replace(/\s+/g," ")}function q(t){return new RegExp("(?:^|\\s+)"+e.requote(t)+"(?:\\s+|$)","g")}function tt(t){return(t+"").trim().split(/^|\s+/)}function et(t,e){var r=(t=tt(t).map(rt)).length;return"function"==typeof e?function(){for(var n=-1,i=e.apply(this,arguments);++n<r;)t[n](this,i)}:function(){for(var n=-1;++n<r;)t[n](this,e)}}function rt(t){var e=q(t);return function(r,n){if(i=r.classList)return n?i.add(t):i.remove(t);var i=r.getAttribute("class")||"";n?(e.lastIndex=0,e.test(i)||r.setAttribute("class",K(i+" "+t))):r.setAttribute("class",K(i.replace(e," ")))}}function nt(t,e,r){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,r)}:function(){this.style.setProperty(t,e,r)}}function it(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var r=e.apply(this,arguments);null==r?delete this[t]:this[t]=r}:function(){this[t]=e}}function at(t){return"function"==typeof t?t:(t=e.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var e=this.ownerDocument,r=this.namespaceURI;return r===z&&e.documentElement.namespaceURI===z?e.createElement(t):e.createElementNS(r,t)}}function ot(){var t=this.parentNode;t&&t.removeChild(this)}function st(t){return{__data__:t}}function lt(t){return function(){return $(this,t)}}function ct(t){return arguments.length||(t=h),function(e,r){return e&&r?t(e.__data__,r.__data__):!e-!r}}function ut(t,e){for(var r=0,n=t.length;r<n;r++)for(var i,a=t[r],o=0,s=a.length;o<s;o++)(i=a[o])&&e(i,o,r);return t}function dt(t){return V(t,ht),t}e.ns={prefix:J,qualify:function(t){var e=t.indexOf(":"),r=t;return e>=0&&"xmlns"!==(r=t.slice(0,e))&&(t=t.slice(e+1)),J.hasOwnProperty(r)?{space:J[r],local:t}:t}},H.attr=function(t,r){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=e.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(r in t)this.each(j(r,t[r]));return this}return this.each(j(t,r))},H.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var r=this.node(),n=(t=tt(t)).length,i=-1;if(e=r.classList){for(;++i<n;)if(!e.contains(t[i]))return!1}else for(e=r.getAttribute("class");++i<n;)if(!q(t[i]).test(e))return!1;return!0}for(e in t)this.each(et(e,t[e]));return this}return this.each(et(t,e))},H.style=function(t,e,r){var n=arguments.length;if(n<3){if("string"!=typeof t){for(r in n<2&&(e=""),t)this.each(nt(r,t[r],e));return this}if(n<2){var i=this.node();return o(i).getComputedStyle(i,null).getPropertyValue(t)}r=""}return this.each(nt(t,e,r))},H.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(it(e,t[e]));return this}return this.each(it(t,e))},H.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},H.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},H.append=function(t){return t=at(t),this.select((function(){return this.appendChild(t.apply(this,arguments))}))},H.insert=function(t,e){return t=at(t),e=Y(e),this.select((function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)}))},H.remove=function(){return this.each(ot)},H.data=function(t,e){var r,n,i=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++i<a;)(n=r[i])&&(t[i]=n.__data__);return t}function o(t,r){var n,i,a,o=t.length,u=r.length,d=Math.min(o,u),h=new Array(u),g=new Array(u),f=new Array(o);if(e){var p,m=new I,y=new Array(o);for(n=-1;++n<o;)(i=t[n])&&(m.has(p=e.call(i,i.__data__,n))?f[n]=i:m.set(p,i),y[n]=p);for(n=-1;++n<u;)(i=m.get(p=e.call(r,a=r[n],n)))?!0!==i&&(h[n]=i,i.__data__=a):g[n]=st(a),m.set(p,!0);for(n=-1;++n<o;)n in y&&!0!==m.get(y[n])&&(f[n]=t[n])}else{for(n=-1;++n<d;)i=t[n],a=r[n],i?(i.__data__=a,h[n]=i):g[n]=st(a);for(;n<u;++n)g[n]=st(r[n]);for(;n<o;++n)f[n]=t[n]}g.update=h,g.parentNode=h.parentNode=f.parentNode=t.parentNode,s.push(g),l.push(h),c.push(f)}var s=dt([]),l=W([]),c=W([]);if("function"==typeof t)for(;++i<a;)o(r=this[i],t.call(r,r.parentNode.__data__,i));else for(;++i<a;)o(r=this[i],t);return l.enter=function(){return s},l.exit=function(){return c},l},H.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},H.filter=function(t){var e,r,n,i=[];"function"!=typeof t&&(t=lt(t));for(var a=0,o=this.length;a<o;a++){i.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var s=0,l=r.length;s<l;s++)(n=r[s])&&t.call(n,n.__data__,s,a)&&e.push(n)}return W(i)},H.order=function(){for(var t=-1,e=this.length;++t<e;)for(var r,n=this[t],i=n.length-1,a=n[i];--i>=0;)(r=n[i])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},H.sort=function(t){t=ct.apply(this,arguments);for(var e=-1,r=this.length;++e<r;)this[e].sort(t);return this.order()},H.each=function(t){return ut(this,(function(e,r,n){t.call(e,e.__data__,r,n)}))},H.call=function(t){var e=n(arguments);return t.apply(e[0]=this,e),this},H.empty=function(){return!this.node()},H.node=function(){for(var t=0,e=this.length;t<e;t++)for(var r=this[t],n=0,i=r.length;n<i;n++){var a=r[n];if(a)return a}return null},H.size=function(){var t=0;return ut(this,(function(){++t})),t};var ht=[];function gt(t){var e,r;return function(n,i,a){var o,s=t[a].update,l=s.length;for(a!=r&&(r=a,e=0),i>=e&&(e=i+1);!(o=s[e])&&++e<l;);return o}}function ft(t,r,i){var a="__on"+t,o=t.indexOf("."),s=mt;o>0&&(t=t.slice(0,o));var l=pt.get(t);function c(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}return l&&(t=l,s=yt),o?r?function(){var e=s(r,n(arguments));c.call(this),this.addEventListener(t,this[a]=e,e.$=i),e._=r}:c:r?R:function(){var r,n=new RegExp("^__on([^.]+)"+e.requote(t)+"$");for(var i in this)if(r=i.match(n)){var a=this[i];this.removeEventListener(r[1],a,a.$),delete this[i]}}}e.selection.enter=dt,e.selection.enter.prototype=ht,ht.append=H.append,ht.empty=H.empty,ht.node=H.node,ht.call=H.call,ht.size=H.size,ht.select=function(t){for(var e,r,n,i,a,o=[],s=-1,l=this.length;++s<l;){n=(i=this[s]).update,o.push(e=[]),e.parentNode=i.parentNode;for(var c=-1,u=i.length;++c<u;)(a=i[c])?(e.push(n[c]=r=t.call(i.parentNode,a.__data__,c,s)),r.__data__=a.__data__):e.push(null)}return W(o)},ht.insert=function(t,e){return arguments.length<2&&(e=gt(this)),H.insert.call(this,t,e)},e.select=function(t){var e;return"string"==typeof t?(e=[Z(t,i)]).parentNode=i.documentElement:(e=[t]).parentNode=a(t),W([e])},e.selectAll=function(t){var e;return"string"==typeof t?(e=n(O(t,i))).parentNode=i.documentElement:(e=n(t)).parentNode=null,W([e])},H.on=function(t,e,r){var n=arguments.length;if(n<3){if("string"!=typeof t){for(r in n<2&&(e=!1),t)this.each(ft(r,t[r],e));return this}if(n<2)return(n=this.node()["__on"+t])&&n._;r=!1}return this.each(ft(t,e,r))};var pt=e.map({mouseenter:"mouseover",mouseleave:"mouseout"});function mt(t,r){return function(n){var i=e.event;e.event=n,r[0]=this.__data__;try{t.apply(this,r)}finally{e.event=i}}}function yt(t,e){var r=mt(t,e);return function(t){var e=this,n=t.relatedTarget;n&&(n===e||8&n.compareDocumentPosition(e))||r.call(e,t)}}i&&pt.forEach((function(t){"on"+t in i&&pt.remove(t)}));var bt,vt=0;function xt(t){var r=".dragsuppress-"+ ++vt,n="click"+r,i=e.select(o(t)).on("touchmove"+r,N).on("dragstart"+r,N).on("selectstart"+r,N);if(null==bt&&(bt=!("onselectstart"in t)&&L(t.style,"userSelect")),bt){var s=a(t).style,l=s[bt];s[bt]="none"}return function(t){if(i.on(r,null),bt&&(s[bt]=l),t){var e=function(){i.on(n,null)};i.on(n,(function(){N(),e()}),!0),setTimeout(e,0)}}}e.mouse=function(t){return Bt(t,M())};var It=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Bt(t,r){r.changedTouches&&(r=r.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(It<0){var a=o(t);if(a.scrollX||a.scrollY){var s=(n=e.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();It=!(s.f||s.e),n.remove()}}return It?(i.x=r.pageX,i.y=r.pageY):(i.x=r.clientX,i.y=r.clientY),[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var l=t.getBoundingClientRect();return[r.clientX-l.left-t.clientLeft,r.clientY-l.top-t.clientTop]}function Ct(){return e.event.changedTouches[0].identifier}e.touch=function(t,e,r){if(arguments.length<3&&(r=e,e=M().changedTouches),e)for(var n,i=0,a=e.length;i<a;++i)if((n=e[i]).identifier===r)return Bt(t,n)},e.behavior.drag=function(){var t=D(a,"drag","dragstart","dragend"),r=null,n=s(R,e.mouse,o,"mousemove","mouseup"),i=s(Ct,e.touch,S,"touchmove","touchend");function a(){this.on("mousedown.drag",n).on("touchstart.drag",i)}function s(n,i,a,o,s){return function(){var l,c=this,u=e.event.target.correspondingElement||e.event.target,d=c.parentNode,h=t.of(c,arguments),g=0,f=n(),p=".drag"+(null==f?"":"-"+f),m=e.select(a(u)).on(o+p,v).on(s+p,x),y=xt(u),b=i(d,f);function v(){var t,e,r=i(d,f);r&&(t=r[0]-b[0],e=r[1]-b[1],g|=t|e,b=r,h({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:t,dy:e}))}function x(){i(d,f)&&(m.on(o+p,null).on(s+p,null),y(g),h({type:"dragend"}))}l=r?[(l=r.apply(c,arguments)).x-b[0],l.y-b[1]]:[0,0],h({type:"dragstart"})}}return a.origin=function(t){return arguments.length?(r=t,a):r},e.rebind(a,t,"on")},e.touches=function(t,e){return arguments.length<2&&(e=M().touches),e?n(e).map((function(e){var r=Bt(t,e);return r.identifier=e.identifier,r})):[]};var Ft=1e-6,At=Math.PI,Qt=2*At,_t=Qt-Ft,wt=At/2,Ut=At/180,St=180/At;function Et(t,e,r){return(e[0]-t[0])*(r[1]-t[1])-(e[1]-t[1])*(r[0]-t[0])}function Lt(t){return t>1?wt:t<-1?-wt:Math.asin(t)}function Tt(t){return((t=Math.exp(t))+1/t)/2}var Rt=Math.SQRT2;e.interpolateZoom=function(t,e){var r,n,i=t[0],a=t[1],o=t[2],s=e[0],l=e[1],c=e[2],u=s-i,d=l-a,h=u*u+d*d;if(h<1e-12)n=Math.log(c/o)/Rt,r=function(t){return[i+t*u,a+t*d,o*Math.exp(Rt*t*n)]};else{var g=Math.sqrt(h),f=(c*c-o*o+4*h)/(2*o*2*g),p=(c*c-o*o-4*h)/(2*c*2*g),m=Math.log(Math.sqrt(f*f+1)-f),y=Math.log(Math.sqrt(p*p+1)-p);n=(y-m)/Rt,r=function(t){var e=t*n,r=Tt(m),s=o/(2*g)*(r*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(Rt*e+m)-function(t){return((t=Math.exp(t))-1/t)/2}(m));return[i+s*u,a+s*d,o*r/Tt(Rt*e+m)]}}return r.duration=1e3*n,r},e.behavior.zoom=function(){var t,r,n,a,s,l,c,u,d,h={x:0,y:0,k:1},g=[960,500],f=Nt,p=250,m=0,y="mousedown.zoom",b="mousemove.zoom",v="mouseup.zoom",x="touchstart.zoom",I=D(B,"zoomstart","zoom","zoomend");function B(t){t.on(y,E).on(Gt+".zoom",T).on("dblclick.zoom",R).on(x,L)}function C(t){return[(t[0]-h.x)/h.k,(t[1]-h.y)/h.k]}function F(t){h.k=Math.max(f[0],Math.min(f[1],t))}function A(t,e){e=function(t){return[t[0]*h.k+h.x,t[1]*h.k+h.y]}(e),h.x+=t[0]-e[0],h.y+=t[1]-e[1]}function Q(t,n,i,a){t.__chart__={x:h.x,y:h.y,k:h.k},F(Math.pow(2,a)),A(r=n,i),t=e.select(t),p>0&&(t=t.transition().duration(p)),t.call(B.event)}function _(){c&&c.domain(l.range().map((function(t){return(t-h.x)/h.k})).map(l.invert)),d&&d.domain(u.range().map((function(t){return(t-h.y)/h.k})).map(u.invert))}function w(t){m++||t({type:"zoomstart"})}function U(t){_(),t({type:"zoom",scale:h.k,translate:[h.x,h.y]})}function S(t){--m||(t({type:"zoomend"}),r=null)}function E(){var t=this,r=I.of(t,arguments),n=0,i=e.select(o(t)).on(b,l).on(v,c),a=C(e.mouse(t)),s=xt(t);function l(){n=1,A(e.mouse(t),a),U(r)}function c(){i.on(b,null).on(v,null),s(n),S(r)}ji.call(t),w(r)}function L(){var t,r=this,n=I.of(r,arguments),i={},a=0,o=".zoom-"+e.event.changedTouches[0].identifier,l="touchmove"+o,c="touchend"+o,u=[],d=e.select(r),g=xt(r);function f(){var n=e.touches(r);return t=h.k,n.forEach((function(t){t.identifier in i&&(i[t.identifier]=C(t))})),n}function p(){var t=e.event.target;e.select(t).on(l,m).on(c,b),u.push(t);for(var n=e.event.changedTouches,o=0,d=n.length;o<d;++o)i[n[o].identifier]=null;var g=f(),p=Date.now();if(1===g.length){if(p-s<500){var y=g[0];Q(r,y,i[y.identifier],Math.floor(Math.log(h.k)/Math.LN2)+1),N()}s=p}else if(g.length>1){y=g[0];var v=g[1],x=y[0]-v[0],I=y[1]-v[1];a=x*x+I*I}}function m(){var o,l,c,u,d=e.touches(r);ji.call(r);for(var h=0,g=d.length;h<g;++h,u=null)if(c=d[h],u=i[c.identifier]){if(l)break;o=c,l=u}if(u){var f=(f=c[0]-o[0])*f+(f=c[1]-o[1])*f,p=a&&Math.sqrt(f/a);o=[(o[0]+c[0])/2,(o[1]+c[1])/2],l=[(l[0]+u[0])/2,(l[1]+u[1])/2],F(p*t)}s=null,A(o,l),U(n)}function b(){if(e.event.touches.length){for(var t=e.event.changedTouches,r=0,a=t.length;r<a;++r)delete i[t[r].identifier];for(var s in i)return void f()}e.selectAll(u).on(o,null),d.on(y,E).on(x,L),g(),S(n)}p(),w(n),d.on(y,null).on(x,p)}function T(){var i=I.of(this,arguments);a?clearTimeout(a):(ji.call(this),t=C(r=n||e.mouse(this)),w(i)),a=setTimeout((function(){a=null,S(i)}),50),N(),F(Math.pow(2,.002*kt())*h.k),A(r,t),U(i)}function R(){var t=e.mouse(this),r=Math.log(h.k)/Math.LN2;Q(this,t,C(t),e.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1)}return Gt||(Gt="onwheel"in i?(kt=function(){return-e.event.deltaY*(e.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?(kt=function(){return e.event.wheelDelta},"mousewheel"):(kt=function(){return-e.event.detail},"MozMousePixelScroll")),B.event=function(t){t.each((function(){var t=I.of(this,arguments),n=h;ta?e.select(this).transition().each("start.zoom",(function(){h=this.__chart__||{x:0,y:0,k:1},w(t)})).tween("zoom:zoom",(function(){var i=g[0],a=g[1],o=r?r[0]:i/2,s=r?r[1]:a/2,l=e.interpolateZoom([(o-h.x)/h.k,(s-h.y)/h.k,i/h.k],[(o-n.x)/n.k,(s-n.y)/n.k,i/n.k]);return function(e){var r=l(e),n=i/r[2];this.__chart__=h={x:o-r[0]*n,y:s-r[1]*n,k:n},U(t)}})).each("interrupt.zoom",(function(){S(t)})).each("end.zoom",(function(){S(t)})):(this.__chart__=h,w(t),U(t),S(t))}))},B.translate=function(t){return arguments.length?(h={x:+t[0],y:+t[1],k:h.k},_(),B):[h.x,h.y]},B.scale=function(t){return arguments.length?(h={x:h.x,y:h.y,k:null},F(+t),_(),B):h.k},B.scaleExtent=function(t){return arguments.length?(f=null==t?Nt:[+t[0],+t[1]],B):f},B.center=function(t){return arguments.length?(n=t&&[+t[0],+t[1]],B):n},B.size=function(t){return arguments.length?(g=t&&[+t[0],+t[1]],B):g},B.duration=function(t){return arguments.length?(p=+t,B):p},B.x=function(t){return arguments.length?(c=t,l=t.copy(),h={x:0,y:0,k:1},B):c},B.y=function(t){return arguments.length?(d=t,u=t.copy(),h={x:0,y:0,k:1},B):d},e.rebind(B,I,"on")};var kt,Gt,Nt=[0,1/0];function Mt(){}function Dt(t,e,r){return this instanceof Dt?(this.h=+t,this.s=+e,void(this.l=+r)):arguments.length<2?t instanceof Dt?new Dt(t.h,t.s,t.l):oe(""+t,se,Dt):new Dt(t,e,r)}e.color=Mt,Mt.prototype.toString=function(){return this.rgb()+""},e.hsl=Dt;var Xt=Dt.prototype=new Mt;function Vt(t,e,r){var n,i;function a(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?n+(i-n)*t/60:t<180?i:t<240?n+(i-n)*(240-t)/60:n}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)||e<0?0:e>1?1:e,n=2*(r=r<0?0:r>1?1:r)-(i=r<=.5?r*(1+e):r+e-r*e),new ee(a(t+120),a(t),a(t-120))}function Wt(t,r,n){return this instanceof Wt?(this.h=+t,this.c=+r,void(this.l=+n)):arguments.length<2?t instanceof Wt?new Wt(t.h,t.c,t.l):jt(t instanceof $t?t.l:(t=le((t=e.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Wt(t,r,n)}Xt.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Dt(this.h,this.s,this.l/t)},Xt.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Dt(this.h,this.s,t*this.l)},Xt.rgb=function(){return Vt(this.h,this.s,this.l)},e.hcl=Wt;var Zt=Wt.prototype=new Mt;function Ot(t,e,r){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new $t(r,Math.cos(t*=Ut)*e,Math.sin(t)*e)}function $t(t,e,r){return this instanceof $t?(this.l=+t,this.a=+e,void(this.b=+r)):arguments.length<2?t instanceof $t?new $t(t.l,t.a,t.b):t instanceof Wt?Ot(t.h,t.c,t.l):le((t=ee(t)).r,t.g,t.b):new $t(t,e,r)}Zt.brighter=function(t){return new Wt(this.h,this.c,Math.min(100,this.l+Ht*(arguments.length?t:1)))},Zt.darker=function(t){return new Wt(this.h,this.c,Math.max(0,this.l-Ht*(arguments.length?t:1)))},Zt.rgb=function(){return Ot(this.h,this.c,this.l).rgb()},e.lab=$t;var Ht=18,Yt=.95047,Pt=1.08883,zt=$t.prototype=new Mt;function Jt(t,e,r){var n=(t+16)/116,i=n+e/500,a=n-r/200;return new ee(te(3.2404542*(i=Kt(i)*Yt)-1.5371385*(n=1*Kt(n))-.4985314*(a=Kt(a)*Pt)),te(-.969266*i+1.8760108*n+.041556*a),te(.0556434*i-.2040259*n+1.0572252*a))}function jt(t,e,r){return t>0?new Wt(Math.atan2(r,e)*St,Math.sqrt(e*e+r*r),t):new Wt(NaN,NaN,t)}function Kt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function qt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function te(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ee(t,e,r){return this instanceof ee?(this.r=~~t,this.g=~~e,void(this.b=~~r)):arguments.length<2?t instanceof ee?new ee(t.r,t.g,t.b):oe(""+t,ee,Vt):new ee(t,e,r)}function re(t){return new ee(t>>16,t>>8&255,255&t)}function ne(t){return re(t)+""}zt.brighter=function(t){return new $t(Math.min(100,this.l+Ht*(arguments.length?t:1)),this.a,this.b)},zt.darker=function(t){return new $t(Math.max(0,this.l-Ht*(arguments.length?t:1)),this.a,this.b)},zt.rgb=function(){return Jt(this.l,this.a,this.b)},e.rgb=ee;var ie=ee.prototype=new Mt;function ae(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function oe(t,e,r){var n,i,a,o=0,s=0,l=0;if(n=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=n[2].split(","),n[1]){case"hsl":return r(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(ue(i[0]),ue(i[1]),ue(i[2]))}return(a=de.get(t))?e(a.r,a.g,a.b):(null==t||"#"!==t.charAt(0)||isNaN(a=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&a)>>4,o|=o>>4,s=240&a,s|=s>>4,l=15&a,l|=l<<4):7===t.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,l=255&a)),e(o,s,l))}function se(t,e,r){var n,i,a=Math.min(t/=255,e/=255,r/=255),o=Math.max(t,e,r),s=o-a,l=(o+a)/2;return s?(i=l<.5?s/(o+a):s/(2-o-a),n=t==o?(e-r)/s+(e<r?6:0):e==o?(r-t)/s+2:(t-e)/s+4,n*=60):(n=NaN,i=l>0&&l<1?0:n),new Dt(n,i,l)}function le(t,e,r){var n=qt((.4124564*(t=ce(t))+.3575761*(e=ce(e))+.1804375*(r=ce(r)))/Yt),i=qt((.2126729*t+.7151522*e+.072175*r)/1);return $t(116*i-16,500*(n-i),200*(i-qt((.0193339*t+.119192*e+.9503041*r)/Pt)))}function ce(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ue(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}ie.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,r=this.g,n=this.b,i=30;return e||r||n?(e&&e<i&&(e=i),r&&r<i&&(r=i),n&&n<i&&(n=i),new ee(Math.min(255,e/t),Math.min(255,r/t),Math.min(255,n/t))):new ee(i,i,i)},ie.darker=function(t){return new ee((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},ie.hsl=function(){return se(this.r,this.g,this.b)},ie.toString=function(){return"#"+ae(this.r)+ae(this.g)+ae(this.b)};var de=e.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function he(t){return"function"==typeof t?t:function(){return t}}function ge(t){return function(e,r,n){return 2===arguments.length&&"function"==typeof r&&(n=r,r=null),fe(e,r,t,n)}}function fe(t,r,i,a){var o={},s=e.dispatch("beforesend","progress","load","error"),l={},c=new XMLHttpRequest,u=null;function d(){var t,e=c.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(c)||e>=200&&e<300||304===e){try{t=i.call(o,c)}catch(t){return void s.error.call(o,t)}s.load.call(o,t)}else s.error.call(o,c)}return self.XDomainRequest&&!("withCredentials"in c)&&/^(http(s)?:)?\/\//.test(t)&&(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=d:c.onreadystatechange=function(){c.readyState>3&&d()},c.onprogress=function(t){var r=e.event;e.event=t;try{s.progress.call(o,c)}finally{e.event=r}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l[t]:(null==e?delete l[t]:l[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(r=null==t?null:t+"",o):r},o.responseType=function(t){return arguments.length?(u=t,o):u},o.response=function(t){return i=t,o},["get","post"].forEach((function(t){o[t]=function(){return o.send.apply(o,[t].concat(n(arguments)))}})),o.send=function(e,n,i){if(2===arguments.length&&"function"==typeof n&&(i=n,n=null),c.open(e,t,!0),null==r||"accept"in l||(l.accept=r+",*/*"),c.setRequestHeader)for(var a in l)c.setRequestHeader(a,l[a]);return null!=r&&c.overrideMimeType&&c.overrideMimeType(r),null!=u&&(c.responseType=u),null!=i&&o.on("error",i).on("load",(function(t){i(null,t)})),s.beforesend.call(o,c),c.send(null==n?null:n),o},o.abort=function(){return c.abort(),o},e.rebind(o,s,"on"),null==a?o:o.get(function(t){return 1===t.length?function(e,r){t(null==e?r:null)}:t}(a))}de.forEach((function(t,e){de.set(t,re(e))})),e.functor=he,e.xhr=ge(S),e.dsv=function(t,e){var r=new RegExp('["'+t+"\n]"),n=t.charCodeAt(0);function i(t,r,n){arguments.length<3&&(n=r,r=null);var i=fe(t,e,null==r?a:o(r),n);return i.row=function(t){return arguments.length?i.response(null==(r=t)?a:o(t)):r},i}function a(t){return i.parse(t.responseText)}function o(t){return function(e){return i.parse(e.responseText,t)}}function s(e){return e.map(l).join(t)}function l(t){return r.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return i.parse=function(t,e){var r;return i.parseRows(t,(function(t,n){if(r)return r(t,n-1);var i=function(e){for(var r={},n=t.length,i=0;i<n;++i)r[t[i]]=e[i];return r};r=e?function(t,r){return e(i(t),r)}:i}))},i.parseRows=function(t,e){var r,i,a={},o={},s=[],l=t.length,c=0,u=0;function d(){if(c>=l)return o;if(i)return i=!1,a;var e=c;if(34===t.charCodeAt(e)){for(var r=e;r++<l;)if(34===t.charCodeAt(r)){if(34!==t.charCodeAt(r+1))break;++r}return c=r+2,13===(s=t.charCodeAt(r+1))?(i=!0,10===t.charCodeAt(r+2)&&++c):10===s&&(i=!0),t.slice(e+1,r).replace(/""/g,'"')}for(;c<l;){var s,u=1;if(10===(s=t.charCodeAt(c++)))i=!0;else if(13===s)i=!0,10===t.charCodeAt(c)&&(++c,++u);else if(s!==n)continue;return t.slice(e,c-u)}return t.slice(e)}for(;(r=d())!==o;){for(var h=[];r!==a&&r!==o;)h.push(r),r=d();e&&null==(h=e(h,u++))||s.push(h)}return s},i.format=function(e){if(Array.isArray(e[0]))return i.formatRows(e);var r=new U,n=[];return e.forEach((function(t){for(var e in t)r.has(e)||n.push(r.add(e))})),[n.map(l).join(t)].concat(e.map((function(e){return n.map((function(t){return l(e[t])})).join(t)}))).join("\n")},i.formatRows=function(t){return t.map(s).join("\n")},i},e.csv=e.dsv(",","text/csv"),e.tsv=e.dsv("\t","text/tab-separated-values");var pe,me,ye,be,ve=this[L(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function xe(t,e,r){var n=arguments.length;n<2&&(e=0),n<3&&(r=Date.now());var i=r+e,a={c:t,t:i,n:null};return me?me.n=a:pe=a,me=a,ye||(be=clearTimeout(be),ye=1,ve(Ie)),a}function Ie(){var t=Be(),e=Ce()-t;e>24?(isFinite(e)&&(clearTimeout(be),be=setTimeout(Ie,e)),ye=0):(ye=1,ve(Ie))}function Be(){for(var t=Date.now(),e=pe;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Ce(){for(var t,e=pe,r=1/0;e;)e.c?(e.t<r&&(r=e.t),e=(t=e).n):e=t?t.n=e.n:pe=e.n;return me=t,r}function Fe(t){return t[0]}function Ae(t){return t[1]}function Qe(t){for(var e=t.length,r=[0,1],n=2,i=2;i<e;i++){for(;n>1&&Et(t[r[n-2]],t[r[n-1]],t[i])<=0;)--n;r[n++]=i}return r.slice(0,n)}function _e(t,e){return t[0]-e[0]||t[1]-e[1]}e.timer=function(){xe.apply(this,arguments)},e.timer.flush=function(){Be(),Ce()},e.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},e.geom={},e.geom.hull=function(t){var e=Fe,r=Ae;if(arguments.length)return n(t);function n(t){if(t.length<3)return[];var n,i=he(e),a=he(r),o=t.length,s=[],l=[];for(n=0;n<o;n++)s.push([+i.call(this,t[n],n),+a.call(this,t[n],n),n]);for(s.sort(_e),n=0;n<o;n++)l.push([s[n][0],-s[n][1]]);var c=Qe(s),u=Qe(l),d=u[0]===c[0],h=u[u.length-1]===c[c.length-1],g=[];for(n=c.length-1;n>=0;--n)g.push(t[s[c[n]][2]]);for(n=+d;n<u.length-h;++n)g.push(t[s[u[n]][2]]);return g}return n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n},e.geom.polygon=function(t){return V(t,we),t};var we=e.geom.polygon.prototype=[];function Ue(t,e,r){return(r[0]-e[0])*(t[1]-e[1])<(r[1]-e[1])*(t[0]-e[0])}function Se(t,e,r,n){var i=t[0],a=r[0],o=e[0]-i,s=n[0]-a,l=t[1],c=r[1],u=e[1]-l,d=n[1]-c,h=(s*(l-c)-d*(i-a))/(d*o-s*u);return[i+h*o,l+h*u]}function Ee(t){var e=t[0],r=t[t.length-1];return!(e[0]-r[0]||e[1]-r[1])}we.area=function(){for(var t,e=-1,r=this.length,n=this[r-1],i=0;++e<r;)t=n,n=this[e],i+=t[1]*n[0]-t[0]*n[1];return.5*i},we.centroid=function(t){var e,r,n=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++n<i;)e=s,s=this[n],r=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*r,o+=(e[1]+s[1])*r;return[a*t,o*t]},we.clip=function(t){for(var e,r,n,i,a,o,s=Ee(t),l=-1,c=this.length-Ee(this),u=this[c-1];++l<c;){for(e=t.slice(),t.length=0,i=this[l],a=e[(n=e.length-s)-1],r=-1;++r<n;)Ue(o=e[r],u,i)?(Ue(a,u,i)||t.push(Se(a,o,u,i)),t.push(o)):Ue(a,u,i)&&t.push(Se(a,o,u,i)),a=o;s&&t.push(t[0]),u=i}return t};var Le,Te,Re,ke,Ge,Ne=[],Me=[];function De(){ir(this),this.edge=this.site=this.circle=null}function Xe(t){var e=Ne.pop()||new De;return e.site=t,e}function Ve(t){Je(t),Re.remove(t),Ne.push(t),ir(t)}function We(t){var e=t.circle,r=e.x,n=e.cy,i={x:r,y:n},a=t.P,o=t.N,s=[t];Ve(t);for(var l=a;l.circle&&b(r-l.circle.x)<Ft&&b(n-l.circle.cy)<Ft;)a=l.P,s.unshift(l),Ve(l),l=a;s.unshift(l),Je(l);for(var c=o;c.circle&&b(r-c.circle.x)<Ft&&b(n-c.circle.cy)<Ft;)o=c.N,s.push(c),Ve(c),c=o;s.push(c),Je(c);var u,d=s.length;for(u=1;u<d;++u)c=s[u],l=s[u-1],er(c.edge,l.site,c.site,i);l=s[0],(c=s[d-1]).edge=qe(l.site,c.site,null,i),ze(l),ze(c)}function Ze(t){for(var e,r,n,i,a=t.x,o=t.y,s=Re._;s;)if((n=Oe(s,o)-a)>Ft)s=s.L;else{if(!((i=a-$e(s,o))>Ft)){n>-Ft?(e=s.P,r=s):i>-Ft?(e=s,r=s.N):e=r=s;break}if(!s.R){e=s;break}s=s.R}var l=Xe(t);if(Re.insert(e,l),e||r){if(e===r)return Je(e),r=Xe(e.site),Re.insert(l,r),l.edge=r.edge=qe(e.site,l.site),ze(e),void ze(r);if(r){Je(e),Je(r);var c=e.site,u=c.x,d=c.y,h=t.x-u,g=t.y-d,f=r.site,p=f.x-u,m=f.y-d,y=2*(h*m-g*p),b=h*h+g*g,v=p*p+m*m,x={x:(m*b-g*v)/y+u,y:(h*v-p*b)/y+d};er(r.edge,c,f,x),l.edge=qe(c,t,null,x),r.edge=qe(t,f,null,x),ze(e),ze(r)}else l.edge=qe(e.site,l.site)}}function Oe(t,e){var r=t.site,n=r.x,i=r.y,a=i-e;if(!a)return n;var o=t.P;if(!o)return-1/0;var s=(r=o.site).x,l=r.y,c=l-e;if(!c)return s;var u=s-n,d=1/a-1/c,h=u/c;return d?(-h+Math.sqrt(h*h-2*d*(u*u/(-2*c)-l+c/2+i-a/2)))/d+n:(n+s)/2}function $e(t,e){var r=t.N;if(r)return Oe(r,e);var n=t.site;return n.y===e?n.x:1/0}function He(t){this.site=t,this.edges=[]}function Ye(t,e){return e.angle-t.angle}function Pe(){ir(this),this.x=this.y=this.arc=this.site=this.cy=null}function ze(t){var e=t.P,r=t.N;if(e&&r){var n=e.site,i=t.site,a=r.site;if(n!==a){var o=i.x,s=i.y,l=n.x-o,c=n.y-s,u=a.x-o,d=2*(l*(m=a.y-s)-c*u);if(!(d>=-1e-12)){var h=l*l+c*c,g=u*u+m*m,f=(m*h-c*g)/d,p=(l*g-u*h)/d,m=p+s,y=Me.pop()||new Pe;y.arc=t,y.site=i,y.x=f+o,y.y=m+Math.sqrt(f*f+p*p),y.cy=m,t.circle=y;for(var b=null,v=Ge._;v;)if(y.y<v.y||y.y===v.y&&y.x<=v.x){if(!v.L){b=v.P;break}v=v.L}else{if(!v.R){b=v;break}v=v.R}Ge.insert(b,y),b||(ke=y)}}}}function Je(t){var e=t.circle;e&&(e.P||(ke=e.N),Ge.remove(e),Me.push(e),ir(e),t.circle=null)}function je(t,e){var r=t.b;if(r)return!0;var n,i,a=t.a,o=e[0][0],s=e[1][0],l=e[0][1],c=e[1][1],u=t.l,d=t.r,h=u.x,g=u.y,f=d.x,p=d.y,m=(h+f)/2,y=(g+p)/2;if(p===g){if(m<o||m>=s)return;if(h>f){if(a){if(a.y>=c)return}else a={x:m,y:l};r={x:m,y:c}}else{if(a){if(a.y<l)return}else a={x:m,y:c};r={x:m,y:l}}}else if(i=y-(n=(h-f)/(p-g))*m,n<-1||n>1)if(h>f){if(a){if(a.y>=c)return}else a={x:(l-i)/n,y:l};r={x:(c-i)/n,y:c}}else{if(a){if(a.y<l)return}else a={x:(c-i)/n,y:c};r={x:(l-i)/n,y:l}}else if(g<p){if(a){if(a.x>=s)return}else a={x:o,y:n*o+i};r={x:s,y:n*s+i}}else{if(a){if(a.x<o)return}else a={x:s,y:n*s+i};r={x:o,y:n*o+i}}return t.a=a,t.b=r,!0}function Ke(t,e){this.l=t,this.r=e,this.a=this.b=null}function qe(t,e,r,n){var i=new Ke(t,e);return Le.push(i),r&&er(i,t,e,r),n&&er(i,e,t,n),Te[t.i].edges.push(new rr(i,t,e)),Te[e.i].edges.push(new rr(i,e,t)),i}function tr(t,e,r){var n=new Ke(t,null);return n.a=e,n.b=r,Le.push(n),n}function er(t,e,r,n){t.a||t.b?t.l===r?t.b=n:t.a=n:(t.a=n,t.l=e,t.r=r)}function rr(t,e,r){var n=t.a,i=t.b;this.edge=t,this.site=e,this.angle=r?Math.atan2(r.y-e.y,r.x-e.x):t.l===e?Math.atan2(i.x-n.x,n.y-i.y):Math.atan2(n.x-i.x,i.y-n.y)}function nr(){this._=null}function ir(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ar(t,e){var r=e,n=e.R,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.R=n.L,r.R&&(r.R.U=r),n.L=r}function or(t,e){var r=e,n=e.L,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.L=n.R,r.L&&(r.L.U=r),n.R=r}function sr(t){for(;t.L;)t=t.L;return t}function lr(t,e){var r,n,i,a=t.sort(cr).pop();for(Le=[],Te=new Array(t.length),Re=new nr,Ge=new nr;;)if(i=ke,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))a.x===r&&a.y===n||(Te[a.i]=new He(a),Ze(a),r=a.x,n=a.y),a=t.pop();else{if(!i)break;We(i.arc)}e&&(function(t){for(var e,r,n,i,a,o=Le,s=(r=t[0][0],n=t[0][1],i=t[1][0],a=t[1][1],function(t){var e,o=t.a,s=t.b,l=o.x,c=o.y,u=0,d=1,h=s.x-l,g=s.y-c;if(e=r-l,h||!(e>0)){if(e/=h,h<0){if(e<u)return;e<d&&(d=e)}else if(h>0){if(e>d)return;e>u&&(u=e)}if(e=i-l,h||!(e<0)){if(e/=h,h<0){if(e>d)return;e>u&&(u=e)}else if(h>0){if(e<u)return;e<d&&(d=e)}if(e=n-c,g||!(e>0)){if(e/=g,g<0){if(e<u)return;e<d&&(d=e)}else if(g>0){if(e>d)return;e>u&&(u=e)}if(e=a-c,g||!(e<0)){if(e/=g,g<0){if(e>d)return;e>u&&(u=e)}else if(g>0){if(e<u)return;e<d&&(d=e)}return u>0&&(t.a={x:l+u*h,y:c+u*g}),d<1&&(t.b={x:l+d*h,y:c+d*g}),t}}}}}),l=o.length;l--;)(!je(e=o[l],t)||!s(e)||b(e.a.x-e.b.x)<Ft&&b(e.a.y-e.b.y)<Ft)&&(e.a=e.b=null,o.splice(l,1))}(e),function(t){for(var e,r,n,i,a,o,s,l,c,u,d=t[0][0],h=t[1][0],g=t[0][1],f=t[1][1],p=Te,m=p.length;m--;)if((a=p[m])&&a.prepare())for(l=(s=a.edges).length,o=0;o<l;)n=(u=s[o].end()).x,i=u.y,e=(c=s[++o%l].start()).x,r=c.y,(b(n-e)>Ft||b(i-r)>Ft)&&(s.splice(o,0,new rr(tr(a.site,u,b(n-d)<Ft&&f-i>Ft?{x:d,y:b(e-d)<Ft?r:f}:b(i-f)<Ft&&h-n>Ft?{x:b(r-f)<Ft?e:h,y:f}:b(n-h)<Ft&&i-g>Ft?{x:h,y:b(e-h)<Ft?r:g}:b(i-g)<Ft&&n-d>Ft?{x:b(r-g)<Ft?e:d,y:g}:null),a.site,null)),++l)}(e));var o={cells:Te,edges:Le};return Re=Ge=Le=Te=null,o}function cr(t,e){return e.y-t.y||e.x-t.x}He.prototype.prepare=function(){for(var t,e=this.edges,r=e.length;r--;)(t=e[r].edge).b&&t.a||e.splice(r,1);return e.sort(Ye),e.length},rr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nr.prototype={insert:function(t,e){var r,n,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;r=t}else this._?(t=sr(this._),e.P=null,e.N=t,t.P=t.L=e,r=t):(e.P=e.N=null,this._=e,r=null);for(e.L=e.R=null,e.U=r,e.C=!0,t=e;r&&r.C;)r===(n=r.U).L?(i=n.R)&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.R&&(ar(this,r),r=(t=r).U),r.C=!1,n.C=!0,or(this,n)):(i=n.L)&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.L&&(or(this,r),r=(t=r).U),r.C=!1,n.C=!0,ar(this,n)),r=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,r,n,i=t.U,a=t.L,o=t.R;if(r=a?o?sr(o):a:o,i?i.L===t?i.L=r:i.R=r:this._=r,a&&o?(n=r.C,r.C=t.C,r.L=a,a.U=r,r!==o?(i=r.U,r.U=t.U,t=r.R,i.L=t,r.R=o,o.U=r):(r.U=i,i=r,t=r.R)):(n=t.C,t=r),t&&(t.U=i),!n)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,ar(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,or(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,ar(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,or(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ar(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,or(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},e.geom.voronoi=function(t){var e=Fe,r=Ae,n=e,i=r,a=ur;if(t)return o(t);function o(t){var e=new Array(t.length),r=a[0][0],n=a[0][1],i=a[1][0],o=a[1][1];return lr(s(t),a).cells.forEach((function(a,s){var l=a.edges,c=a.site,u=e[s]=l.length?l.map((function(t){var e=t.start();return[e.x,e.y]})):c.x>=r&&c.x<=i&&c.y>=n&&c.y<=o?[[r,o],[i,o],[i,n],[r,n]]:[];u.point=t[s]})),e}function s(t){return t.map((function(t,e){return{x:Math.round(n(t,e)/Ft)*Ft,y:Math.round(i(t,e)/Ft)*Ft,i:e}}))}return o.links=function(t){return lr(s(t)).edges.filter((function(t){return t.l&&t.r})).map((function(e){return{source:t[e.l.i],target:t[e.r.i]}}))},o.triangles=function(t){var e=[];return lr(s(t)).cells.forEach((function(r,n){for(var i,a=r.site,o=r.edges.sort(Ye),s=-1,l=o.length,c=o[l-1].edge,u=c.l===a?c.r:c.l;++s<l;)i=u,u=(c=o[s].edge).l===a?c.r:c.l,n<i.i&&n<u.i&&dr(a,i,u)<0&&e.push([t[n],t[i.i],t[u.i]])})),e},o.x=function(t){return arguments.length?(n=he(e=t),o):e},o.y=function(t){return arguments.length?(i=he(r=t),o):r},o.clipExtent=function(t){return arguments.length?(a=null==t?ur:t,o):a===ur?null:a},o.size=function(t){return arguments.length?o.clipExtent(t&&[[0,0],t]):a===ur?null:a&&a[1]},o};var ur=[[-1e6,-1e6],[1e6,1e6]];function dr(t,e,r){return(t.x-r.x)*(e.y-t.y)-(t.x-e.x)*(r.y-t.y)}function hr(t){return t.x}function gr(t){return t.y}function fr(t,e,r,n,i,a){if(!t(e,r,n,i,a)){var o=.5*(r+i),s=.5*(n+a),l=e.nodes;l[0]&&fr(t,l[0],r,n,o,s),l[1]&&fr(t,l[1],o,n,i,s),l[2]&&fr(t,l[2],r,s,o,a),l[3]&&fr(t,l[3],o,s,i,a)}}function pr(t,e,r,n,i,a,o){var s,l=1/0;return function t(c,u,d,h,g){if(!(u>a||d>o||h<n||g<i)){if(f=c.point){var f,p=e-c.x,m=r-c.y,y=p*p+m*m;if(y<l){var b=Math.sqrt(l=y);n=e-b,i=r-b,a=e+b,o=r+b,s=f}}for(var v=c.nodes,x=.5*(u+h),I=.5*(d+g),B=(r>=I)<<1|e>=x,C=B+4;B<C;++B)if(c=v[3&B])switch(3&B){case 0:t(c,u,d,x,I);break;case 1:t(c,x,d,h,I);break;case 2:t(c,u,I,x,g);break;case 3:t(c,x,I,h,g)}}}(t,n,i,a,o),s}function mr(t,r){t=e.rgb(t),r=e.rgb(r);var n=t.r,i=t.g,a=t.b,o=r.r-n,s=r.g-i,l=r.b-a;return function(t){return"#"+ae(Math.round(n+o*t))+ae(Math.round(i+s*t))+ae(Math.round(a+l*t))}}function yr(t,e){var r,n={},i={};for(r in t)r in e?n[r]=Br(t[r],e[r]):i[r]=t[r];for(r in e)r in t||(i[r]=e[r]);return function(t){for(r in n)i[r]=n[r](t);return i}}function br(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function vr(t,e){var r,n,i,a=xr.lastIndex=Ir.lastIndex=0,o=-1,s=[],l=[];for(t+="",e+="";(r=xr.exec(t))&&(n=Ir.exec(e));)(i=n.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,l.push({i:o,x:br(r,n)})),a=Ir.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var r,n=0;n<e;++n)s[(r=l[n]).i]=r.x(t);return s.join("")})}e.geom.delaunay=function(t){return e.geom.voronoi().triangles(t)},e.geom.quadtree=function(t,e,r,n,i){var a,o=Fe,s=Ae;if(a=arguments.length)return o=hr,s=gr,3===a&&(i=r,n=e,r=e=0),l(t);function l(t){var l,c,u,d,h,g,f,p,m,y=he(o),v=he(s);if(null!=e)g=e,f=r,p=n,m=i;else if(p=m=-(g=f=1/0),c=[],u=[],h=t.length,a)for(d=0;d<h;++d)(l=t[d]).x<g&&(g=l.x),l.y<f&&(f=l.y),l.x>p&&(p=l.x),l.y>m&&(m=l.y),c.push(l.x),u.push(l.y);else for(d=0;d<h;++d){var x=+y(l=t[d],d),I=+v(l,d);x<g&&(g=x),I<f&&(f=I),x>p&&(p=x),I>m&&(m=I),c.push(x),u.push(I)}var B=p-g,C=m-f;function F(t,e,r,n,i,a,o,s){if(!isNaN(r)&&!isNaN(n))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(b(l-r)+b(c-n)<.01)A(t,e,r,n,i,a,o,s);else{var u=t.point;t.x=t.y=t.point=null,A(t,u,l,c,i,a,o,s),A(t,e,r,n,i,a,o,s)}else t.x=r,t.y=n,t.point=e}else A(t,e,r,n,i,a,o,s)}function A(t,e,r,n,i,a,o,s){var l=.5*(i+o),c=.5*(a+s),u=r>=l,d=n>=c,h=d<<1|u;t.leaf=!1,u?i=l:o=l,d?a=c:s=c,F(t=t.nodes[h]||(t.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,r,n,i,a,o,s)}B>C?m=f+B:p=g+C;var Q={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){F(Q,t,+y(t,++d),+v(t,d),g,f,p,m)},visit:function(t){fr(t,Q,g,f,p,m)},find:function(t){return pr(Q,t[0],t[1],g,f,p,m)}};if(d=-1,null==e){for(;++d<h;)F(Q,t[d],c[d],u[d],g,f,p,m);--d}else t.forEach(Q.add);return c=u=t=l=null,Q}return l.x=function(t){return arguments.length?(o=t,l):o},l.y=function(t){return arguments.length?(s=t,l):s},l.extent=function(t){return arguments.length?(null==t?e=r=n=i=null:(e=+t[0][0],r=+t[0][1],n=+t[1][0],i=+t[1][1]),l):null==e?null:[[e,r],[n,i]]},l.size=function(t){return arguments.length?(null==t?e=r=n=i=null:(e=r=0,n=+t[0],i=+t[1]),l):null==e?null:[n-e,i-r]},l},e.interpolateRgb=mr,e.interpolateObject=yr,e.interpolateNumber=br,e.interpolateString=vr;var xr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ir=new RegExp(xr.source,"g");function Br(t,r){for(var n,i=e.interpolators.length;--i>=0&&!(n=e.interpolators[i](t,r)););return n}function Cr(t,e){var r,n=[],i=[],a=t.length,o=e.length,s=Math.min(t.length,e.length);for(r=0;r<s;++r)n.push(Br(t[r],e[r]));for(;r<a;++r)i[r]=t[r];for(;r<o;++r)i[r]=e[r];return function(t){for(r=0;r<s;++r)i[r]=n[r](t);return i}}e.interpolate=Br,e.interpolators=[function(t,e){var r=typeof e;return("string"===r?de.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?mr:vr:e instanceof Mt?mr:Array.isArray(e)?Cr:"object"===r&&isNaN(e)?yr:br)(t,e)}],e.interpolateArray=Cr;var Fr=function(){return S},Ar=e.map({linear:Fr,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return Sr},cubic:function(){return Er},sin:function(){return Tr},exp:function(){return Rr},circle:function(){return kr},elastic:function(t,e){var r;arguments.length<2&&(e=.45);arguments.length?r=e/Qt*Math.asin(1/t):(t=1,r=e/4);return function(n){return 1+t*Math.pow(2,-10*n)*Math.sin((n-r)*Qt/e)}},back:function(t){t||(t=1.70158);return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return Gr}}),Qr=e.map({in:S,out:wr,"in-out":Ur,"out-in":function(t){return Ur(wr(t))}});function _r(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function wr(t){return function(e){return 1-t(1-e)}}function Ur(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function Sr(t){return t*t}function Er(t){return t*t*t}function Lr(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)}function Tr(t){return 1-Math.cos(t*wt)}function Rr(t){return Math.pow(2,10*(t-1))}function kr(t){return 1-Math.sqrt(1-t*t)}function Gr(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Nr(t,e){return e-=t,function(r){return Math.round(t+e*r)}}function Mr(t){var e=[t.a,t.b],r=[t.c,t.d],n=Xr(e),i=Dr(e,r),a=Xr(function(t,e,r){return t[0]+=r*e[0],t[1]+=r*e[1],t}(r,e,-i))||0;e[0]*r[1]<r[0]*e[1]&&(e[0]*=-1,e[1]*=-1,n*=-1,i*=-1),this.rotate=(n?Math.atan2(e[1],e[0]):Math.atan2(-r[0],r[1]))*St,this.translate=[t.e,t.f],this.scale=[n,a],this.skew=a?Math.atan2(i,a)*St:0}function Dr(t,e){return t[0]*e[0]+t[1]*e[1]}function Xr(t){var e=Math.sqrt(Dr(t,t));return e&&(t[0]/=e,t[1]/=e),e}e.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,i=e>=0?t.slice(e+1):"in";return n=Ar.get(n)||Fr,_r((i=Qr.get(i)||S)(n.apply(null,r.call(arguments,1))))},e.interpolateHcl=function(t,r){t=e.hcl(t),r=e.hcl(r);var n=t.h,i=t.c,a=t.l,o=r.h-n,s=r.c-i,l=r.l-a;isNaN(s)&&(s=0,i=isNaN(i)?r.c:i);isNaN(o)?(o=0,n=isNaN(n)?r.h:n):o>180?o-=360:o<-180&&(o+=360);return function(t){return Ot(n+o*t,i+s*t,a+l*t)+""}},e.interpolateHsl=function(t,r){t=e.hsl(t),r=e.hsl(r);var n=t.h,i=t.s,a=t.l,o=r.h-n,s=r.s-i,l=r.l-a;isNaN(s)&&(s=0,i=isNaN(i)?r.s:i);isNaN(o)?(o=0,n=isNaN(n)?r.h:n):o>180?o-=360:o<-180&&(o+=360);return function(t){return Vt(n+o*t,i+s*t,a+l*t)+""}},e.interpolateLab=function(t,r){t=e.lab(t),r=e.lab(r);var n=t.l,i=t.a,a=t.b,o=r.l-n,s=r.a-i,l=r.b-a;return function(t){return Jt(n+o*t,i+s*t,a+l*t)+""}},e.interpolateRound=Nr,e.transform=function(t){var r=i.createElementNS(e.ns.prefix.svg,"g");return(e.transform=function(t){if(null!=t){r.setAttribute("transform",t);var e=r.transform.baseVal.consolidate()}return new Mr(e?e.matrix:Vr)})(t)},Mr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Vr={a:1,b:0,c:0,d:1,e:0,f:0};function Wr(t){return t.length?t.pop()+",":""}function Zr(t,r){var n=[],i=[];return t=e.transform(t),r=e.transform(r),function(t,e,r,n){if(t[0]!==e[0]||t[1]!==e[1]){var i=r.push("translate(",null,",",null,")");n.push({i:i-4,x:br(t[0],e[0])},{i:i-2,x:br(t[1],e[1])})}else(e[0]||e[1])&&r.push("translate("+e+")")}(t.translate,r.translate,n,i),function(t,e,r,n){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),n.push({i:r.push(Wr(r)+"rotate(",null,")")-2,x:br(t,e)})):e&&r.push(Wr(r)+"rotate("+e+")")}(t.rotate,r.rotate,n,i),function(t,e,r,n){t!==e?n.push({i:r.push(Wr(r)+"skewX(",null,")")-2,x:br(t,e)}):e&&r.push(Wr(r)+"skewX("+e+")")}(t.skew,r.skew,n,i),function(t,e,r,n){if(t[0]!==e[0]||t[1]!==e[1]){var i=r.push(Wr(r)+"scale(",null,",",null,")");n.push({i:i-4,x:br(t[0],e[0])},{i:i-2,x:br(t[1],e[1])})}else 1===e[0]&&1===e[1]||r.push(Wr(r)+"scale("+e+")")}(t.scale,r.scale,n,i),t=r=null,function(t){for(var e,r=-1,a=i.length;++r<a;)n[(e=i[r]).i]=e.x(t);return n.join("")}}function Or(t,e){return e=(e-=t=+t)||1/e,function(r){return(r-t)/e}}function $r(t,e){return e=(e-=t=+t)||1/e,function(r){return Math.max(0,Math.min(1,(r-t)/e))}}function Hr(t){for(var e=t.source,r=t.target,n=function(t,e){if(t===e)return t;var r=Yr(t),n=Yr(e),i=r.pop(),a=n.pop(),o=null;for(;i===a;)o=i,i=r.pop(),a=n.pop();return o}(e,r),i=[e];e!==n;)e=e.parent,i.push(e);for(var a=i.length;r!==n;)i.splice(a,0,r),r=r.parent;return i}function Yr(t){for(var e=[],r=t.parent;null!=r;)e.push(t),t=r,r=r.parent;return e.push(t),e}function Pr(t){t.fixed|=2}function zr(t){t.fixed&=-7}function Jr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function jr(t){t.fixed&=-5}function Kr(t,e,r){var n=0,i=0;if(t.charge=0,!t.leaf)for(var a,o=t.nodes,s=o.length,l=-1;++l<s;)null!=(a=o[l])&&(Kr(a,e,r),t.charge+=a.charge,n+=a.charge*a.cx,i+=a.charge*a.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var c=e*r[t.point.index];t.charge+=t.pointCharge=c,n+=c*t.point.x,i+=c*t.point.y}t.cx=n/t.charge,t.cy=i/t.charge}e.interpolateTransform=Zr,e.layout={},e.layout.bundle=function(){return function(t){for(var e=[],r=-1,n=t.length;++r<n;)e.push(Hr(t[r]));return e}},e.layout.chord=function(){var t,r,n,i,a,o,s,l={},c=0;function u(){var l,u,h,g,f,p={},m=[],y=e.range(i),b=[];for(t=[],r=[],l=0,g=-1;++g<i;){for(u=0,f=-1;++f<i;)u+=n[g][f];m.push(u),b.push(e.range(i)),l+=u}for(a&&y.sort((function(t,e){return a(m[t],m[e])})),o&&b.forEach((function(t,e){t.sort((function(t,r){return o(n[e][t],n[e][r])}))})),l=(Qt-c*i)/l,u=0,g=-1;++g<i;){for(h=u,f=-1;++f<i;){var v=y[g],x=b[v][f],I=n[v][x],B=u,C=u+=I*l;p[v+"-"+x]={index:v,subindex:x,startAngle:B,endAngle:C,value:I}}r[v]={index:v,startAngle:h,endAngle:u,value:m[v]},u+=c}for(g=-1;++g<i;)for(f=g-1;++f<i;){var F=p[g+"-"+f],A=p[f+"-"+g];(F.value||A.value)&&t.push(F.value<A.value?{source:A,target:F}:{source:F,target:A})}s&&d()}function d(){t.sort((function(t,e){return s((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)}))}return l.matrix=function(e){return arguments.length?(i=(n=e)&&n.length,t=r=null,l):n},l.padding=function(e){return arguments.length?(c=e,t=r=null,l):c},l.sortGroups=function(e){return arguments.length?(a=e,t=r=null,l):a},l.sortSubgroups=function(e){return arguments.length?(o=e,t=null,l):o},l.sortChords=function(e){return arguments.length?(s=e,t&&d(),l):s},l.chords=function(){return t||u(),t},l.groups=function(){return r||u(),r},l},e.layout.force=function(){var t,r,n,i,a,o,s={},l=e.dispatch("start","tick","end"),c=[1,1],u=.9,d=qr,h=tn,g=-30,f=en,p=.1,m=.64,y=[],b=[];function v(t){return function(e,r,n,i){if(e.point!==t){var a=e.cx-t.x,o=e.cy-t.y,s=i-r,l=a*a+o*o;if(s*s/m<l){if(l<f){var c=e.charge/l;t.px-=a*c,t.py-=o*c}return!0}if(e.point&&l&&l<f){c=e.pointCharge/l;t.px-=a*c,t.py-=o*c}}return!e.charge}}function x(t){t.px=e.event.x,t.py=e.event.y,s.resume()}return s.tick=function(){if((n*=.99)<.005)return t=null,l.end({type:"end",alpha:n=0}),!0;var r,s,d,h,f,m,x,I,B,C=y.length,F=b.length;for(s=0;s<F;++s)h=(d=b[s]).source,(m=(I=(f=d.target).x-h.x)*I+(B=f.y-h.y)*B)&&(I*=m=n*a[s]*((m=Math.sqrt(m))-i[s])/m,B*=m,f.x-=I*(x=h.weight+f.weight?h.weight/(h.weight+f.weight):.5),f.y-=B*x,h.x+=I*(x=1-x),h.y+=B*x);if((x=n*p)&&(I=c[0]/2,B=c[1]/2,s=-1,x))for(;++s<C;)(d=y[s]).x+=(I-d.x)*x,d.y+=(B-d.y)*x;if(g)for(Kr(r=e.geom.quadtree(y),n,o),s=-1;++s<C;)(d=y[s]).fixed||r.visit(v(d));for(s=-1;++s<C;)(d=y[s]).fixed?(d.x=d.px,d.y=d.py):(d.x-=(d.px-(d.px=d.x))*u,d.y-=(d.py-(d.py=d.y))*u);l.tick({type:"tick",alpha:n})},s.nodes=function(t){return arguments.length?(y=t,s):y},s.links=function(t){return arguments.length?(b=t,s):b},s.size=function(t){return arguments.length?(c=t,s):c},s.linkDistance=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.friction=function(t){return arguments.length?(u=+t,s):u},s.charge=function(t){return arguments.length?(g="function"==typeof t?t:+t,s):g},s.chargeDistance=function(t){return arguments.length?(f=t*t,s):Math.sqrt(f)},s.gravity=function(t){return arguments.length?(p=+t,s):p},s.theta=function(t){return arguments.length?(m=t*t,s):Math.sqrt(m)},s.alpha=function(e){return arguments.length?(e=+e,n?e>0?n=e:(t.c=null,t.t=NaN,t=null,l.end({type:"end",alpha:n=0})):e>0&&(l.start({type:"start",alpha:n=e}),t=xe(s.tick)),s):n},s.start=function(){var t,e,r,n=y.length,l=b.length,u=c[0],f=c[1];for(t=0;t<n;++t)(r=y[t]).index=t,r.weight=0;for(t=0;t<l;++t)"number"==typeof(r=b[t]).source&&(r.source=y[r.source]),"number"==typeof r.target&&(r.target=y[r.target]),++r.source.weight,++r.target.weight;for(t=0;t<n;++t)r=y[t],isNaN(r.x)&&(r.x=p("x",u)),isNaN(r.y)&&(r.y=p("y",f)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof d)for(t=0;t<l;++t)i[t]=+d.call(this,b[t],t);else for(t=0;t<l;++t)i[t]=d;if(a=[],"function"==typeof h)for(t=0;t<l;++t)a[t]=+h.call(this,b[t],t);else for(t=0;t<l;++t)a[t]=h;if(o=[],"function"==typeof g)for(t=0;t<n;++t)o[t]=+g.call(this,y[t],t);else for(t=0;t<n;++t)o[t]=g;function p(r,i){if(!e){for(e=new Array(n),c=0;c<n;++c)e[c]=[];for(c=0;c<l;++c){var a=b[c];e[a.source.index].push(a.target),e[a.target.index].push(a.source)}}for(var o,s=e[t],c=-1,u=s.length;++c<u;)if(!isNaN(o=s[c][r]))return o;return Math.random()*i}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(r||(r=e.behavior.drag().origin(S).on("dragstart.force",Pr).on("drag.force",x).on("dragend.force",zr)),!arguments.length)return r;this.on("mouseover.force",Jr).on("mouseout.force",jr).call(r)},e.rebind(s,l,"on")};var qr=20,tn=1,en=1/0;function rn(t,r){return e.rebind(t,r,"sort","children","value"),t.nodes=t,t.links=cn,t}function nn(t,e){for(var r=[t];null!=(t=r.pop());)if(e(t),(i=t.children)&&(n=i.length))for(var n,i;--n>=0;)r.push(i[n])}function an(t,e){for(var r=[t],n=[];null!=(t=r.pop());)if(n.push(t),(a=t.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)r.push(a[o]);for(;null!=(t=n.pop());)e(t)}function on(t){return t.children}function sn(t){return t.value}function ln(t,e){return e.value-t.value}function cn(t){return e.merge(t.map((function(t){return(t.children||[]).map((function(e){return{source:t,target:e}}))})))}e.layout.hierarchy=function(){var t=ln,e=on,r=sn;function n(i){var a,o=[i],s=[];for(i.depth=0;null!=(a=o.pop());)if(s.push(a),(c=e.call(n,a,a.depth))&&(l=c.length)){for(var l,c,u;--l>=0;)o.push(u=c[l]),u.parent=a,u.depth=a.depth+1;r&&(a.value=0),a.children=c}else r&&(a.value=+r.call(n,a,a.depth)||0),delete a.children;return an(i,(function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)})),s}return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&(nn(t,(function(t){t.children&&(t.value=0)})),an(t,(function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)}))),t},n},e.layout.partition=function(){var t=e.layout.hierarchy(),r=[1,1];function n(t,e,r,i){var a=t.children;if(t.x=e,t.y=t.depth*i,t.dx=r,t.dy=i,a&&(o=a.length)){var o,s,l,c=-1;for(r=t.value?r/t.value:0;++c<o;)n(s=a[c],e,l=s.value*r,i),e+=l}}function i(t){var e=t.children,r=0;if(e&&(n=e.length))for(var n,a=-1;++a<n;)r=Math.max(r,i(e[a]));return 1+r}function a(e,a){var o=t.call(this,e,a);return n(o[0],0,r[0],r[1]/i(o[0])),o}return a.size=function(t){return arguments.length?(r=t,a):r},rn(a,t)},e.layout.pie=function(){var t=Number,r=un,n=0,i=Qt,a=0;function o(s){var l,c=s.length,u=s.map((function(e,r){return+t.call(o,e,r)})),d=+("function"==typeof n?n.apply(this,arguments):n),h=("function"==typeof i?i.apply(this,arguments):i)-d,g=Math.min(Math.abs(h)/c,+("function"==typeof a?a.apply(this,arguments):a)),f=g*(h<0?-1:1),p=e.sum(u),m=p?(h-c*f)/p:0,y=e.range(c),b=[];return null!=r&&y.sort(r===un?function(t,e){return u[e]-u[t]}:function(t,e){return r(s[t],s[e])}),y.forEach((function(t){b[t]={data:s[t],value:l=u[t],startAngle:d,endAngle:d+=l*m+f,padAngle:g}})),b}return o.value=function(e){return arguments.length?(t=e,o):t},o.sort=function(t){return arguments.length?(r=t,o):r},o.startAngle=function(t){return arguments.length?(n=t,o):n},o.endAngle=function(t){return arguments.length?(i=t,o):i},o.padAngle=function(t){return arguments.length?(a=t,o):a},o};var un={};function dn(t){return t.x}function hn(t){return t.y}function gn(t,e,r){t.y0=e,t.y=r}e.layout.stack=function(){var t=S,r=mn,n=yn,i=gn,a=dn,o=hn;function s(l,c){if(!(g=l.length))return l;var u=l.map((function(e,r){return t.call(s,e,r)})),d=u.map((function(t){return t.map((function(t,e){return[a.call(s,t,e),o.call(s,t,e)]}))})),h=r.call(s,d,c);u=e.permute(u,h),d=e.permute(d,h);var g,f,p,m,y=n.call(s,d,c),b=u[0].length;for(p=0;p<b;++p)for(i.call(s,u[0][p],m=y[p],d[0][p][1]),f=1;f<g;++f)i.call(s,u[f][p],m+=d[f-1][p][1],d[f][p][1]);return l}return s.values=function(e){return arguments.length?(t=e,s):t},s.order=function(t){return arguments.length?(r="function"==typeof t?t:fn.get(t)||mn,s):r},s.offset=function(t){return arguments.length?(n="function"==typeof t?t:pn.get(t)||yn,s):n},s.x=function(t){return arguments.length?(a=t,s):a},s.y=function(t){return arguments.length?(o=t,s):o},s.out=function(t){return arguments.length?(i=t,s):i},s};var fn=e.map({"inside-out":function(t){var r,n,i=t.length,a=t.map(bn),o=t.map(vn),s=e.range(i).sort((function(t,e){return a[t]-a[e]})),l=0,c=0,u=[],d=[];for(r=0;r<i;++r)n=s[r],l<c?(l+=o[n],u.push(n)):(c+=o[n],d.push(n));return d.reverse().concat(u)},reverse:function(t){return e.range(t.length).reverse()},default:mn}),pn=e.map({silhouette:function(t){var e,r,n,i=t.length,a=t[0].length,o=[],s=0,l=[];for(r=0;r<a;++r){for(e=0,n=0;e<i;e++)n+=t[e][r][1];n>s&&(s=n),o.push(n)}for(r=0;r<a;++r)l[r]=(s-o[r])/2;return l},wiggle:function(t){var e,r,n,i,a,o,s,l,c,u=t.length,d=t[0],h=d.length,g=[];for(g[0]=l=c=0,r=1;r<h;++r){for(e=0,i=0;e<u;++e)i+=t[e][r][1];for(e=0,a=0,s=d[r][0]-d[r-1][0];e<u;++e){for(n=0,o=(t[e][r][1]-t[e][r-1][1])/(2*s);n<e;++n)o+=(t[n][r][1]-t[n][r-1][1])/s;a+=o*t[e][r][1]}g[r]=l-=i?a/i*s:0,l<c&&(c=l)}for(r=0;r<h;++r)g[r]-=c;return g},expand:function(t){var e,r,n,i=t.length,a=t[0].length,o=1/i,s=[];for(r=0;r<a;++r){for(e=0,n=0;e<i;e++)n+=t[e][r][1];if(n)for(e=0;e<i;e++)t[e][r][1]/=n;else for(e=0;e<i;e++)t[e][r][1]=o}for(r=0;r<a;++r)s[r]=0;return s},zero:yn});function mn(t){return e.range(t.length)}function yn(t){for(var e=-1,r=t[0].length,n=[];++e<r;)n[e]=0;return n}function bn(t){for(var e,r=1,n=0,i=t[0][1],a=t.length;r<a;++r)(e=t[r][1])>i&&(n=r,i=e);return n}function vn(t){return t.reduce(xn,0)}function xn(t,e){return t+e[1]}function In(t,e){return Bn(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Bn(t,e){for(var r=-1,n=+t[0],i=(t[1]-n)/e,a=[];++r<=e;)a[r]=i*r+n;return a}function Cn(t){return[e.min(t),e.max(t)]}function Fn(t,e){return t.value-e.value}function An(t,e){var r=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=r,r._pack_prev=e}function Qn(t,e){t._pack_next=e,e._pack_prev=t}function _n(t,e){var r=e.x-t.x,n=e.y-t.y,i=t.r+e.r;return.999*i*i>r*r+n*n}function wn(t){if((e=t.children)&&(l=e.length)){var e,r,n,i,a,o,s,l,c=1/0,u=-1/0,d=1/0,h=-1/0;if(e.forEach(Un),(r=e[0]).x=-r.r,r.y=0,v(r),l>1&&((n=e[1]).x=n.r,n.y=0,v(n),l>2))for(Ln(r,n,i=e[2]),v(i),An(r,i),r._pack_prev=i,An(i,n),n=r._pack_next,a=3;a<l;a++){Ln(r,n,i=e[a]);var g=0,f=1,p=1;for(o=n._pack_next;o!==n;o=o._pack_next,f++)if(_n(o,i)){g=1;break}if(1==g)for(s=r._pack_prev;s!==o._pack_prev&&!_n(s,i);s=s._pack_prev,p++);g?(f<p||f==p&&n.r<r.r?Qn(r,n=o):Qn(r=s,n),a--):(An(r,i),n=i,v(i))}var m=(c+u)/2,y=(d+h)/2,b=0;for(a=0;a<l;a++)(i=e[a]).x-=m,i.y-=y,b=Math.max(b,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=b,e.forEach(Sn)}function v(t){c=Math.min(t.x-t.r,c),u=Math.max(t.x+t.r,u),d=Math.min(t.y-t.r,d),h=Math.max(t.y+t.r,h)}}function Un(t){t._pack_next=t._pack_prev=t}function Sn(t){delete t._pack_next,delete t._pack_prev}function En(t,e,r,n){var i=t.children;if(t.x=e+=n*t.x,t.y=r+=n*t.y,t.r*=n,i)for(var a=-1,o=i.length;++a<o;)En(i[a],e,r,n)}function Ln(t,e,r){var n=t.r+r.r,i=e.x-t.x,a=e.y-t.y;if(n&&(i||a)){var o=e.r+r.r,s=i*i+a*a,l=.5+((n*=n)-(o*=o))/(2*s),c=Math.sqrt(Math.max(0,2*o*(n+s)-(n-=s)*n-o*o))/(2*s);r.x=t.x+l*i+c*a,r.y=t.y+l*a-c*i}else r.x=t.x+n,r.y=t.y}function Tn(t,e){return t.parent==e.parent?1:2}function Rn(t){var e=t.children;return e.length?e[0]:t.t}function kn(t){var e,r=t.children;return(e=r.length)?r[e-1]:t.t}function Gn(t,e,r){var n=r/(e.i-t.i);e.c-=n,e.s+=r,t.c+=n,e.z+=r,e.m+=r}function Nn(t,e,r){return t.a.parent===e.parent?t.a:r}function Mn(t){var e=t.children;return e&&e.length?Mn(e[0]):t}function Dn(t){var e,r=t.children;return r&&(e=r.length)?Dn(r[e-1]):t}function Xn(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Vn(t,e){var r=t.x+e[3],n=t.y+e[0],i=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return i<0&&(r+=i/2,i=0),a<0&&(n+=a/2,a=0),{x:r,y:n,dx:i,dy:a}}function Wn(t){var e=t[0],r=t[t.length-1];return e<r?[e,r]:[r,e]}function Zn(t){return t.rangeExtent?t.rangeExtent():Wn(t.range())}function On(t,e,r,n){var i=r(t[0],t[1]),a=n(e[0],e[1]);return function(t){return a(i(t))}}function $n(t,e){var r,n=0,i=t.length-1,a=t[n],o=t[i];return o<a&&(r=n,n=i,i=r,r=a,a=o,o=r),t[n]=e.floor(a),t[i]=e.ceil(o),t}function Hn(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Yn}e.layout.histogram=function(){var t=!0,r=Number,n=Cn,i=In;function a(a,o){for(var s,l,c=[],u=a.map(r,this),d=n.call(this,u,o),h=i.call(this,d,u,o),g=(o=-1,u.length),f=h.length-1,p=t?1:1/g;++o<f;)(s=c[o]=[]).dx=h[o+1]-(s.x=h[o]),s.y=0;if(f>0)for(o=-1;++o<g;)(l=u[o])>=d[0]&&l<=d[1]&&((s=c[e.bisect(h,l,1,f)-1]).y+=p,s.push(a[o]));return c}return a.value=function(t){return arguments.length?(r=t,a):r},a.range=function(t){return arguments.length?(n=he(t),a):n},a.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return Bn(e,t)}:he(t),a):i},a.frequency=function(e){return arguments.length?(t=!!e,a):t},a},e.layout.pack=function(){var t,r=e.layout.hierarchy().sort(Fn),n=0,i=[1,1];function a(e,a){var o=r.call(this,e,a),s=o[0],l=i[0],c=i[1],u=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,an(s,(function(t){t.r=+u(t.value)})),an(s,wn),n){var d=n*(t?1:Math.max(2*s.r/l,2*s.r/c))/2;an(s,(function(t){t.r+=d})),an(s,wn),an(s,(function(t){t.r-=d}))}return En(s,l/2,c/2,t?1:1/Math.max(2*s.r/l,2*s.r/c)),o}return a.size=function(t){return arguments.length?(i=t,a):i},a.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,a):t},a.padding=function(t){return arguments.length?(n=+t,a):n},rn(a,r)},e.layout.tree=function(){var t=e.layout.hierarchy().sort(null).value(null),r=Tn,n=[1,1],i=null;function a(e,a){var c=t.call(this,e,a),u=c[0],d=function(t){var e,r={A:null,children:[t]},n=[r];for(;null!=(e=n.pop());)for(var i,a=e.children,o=0,s=a.length;o<s;++o)n.push((a[o]=i={_:a[o],parent:e,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return r.children[0]}(u);if(an(d,o),d.parent.m=-d.z,nn(d,s),i)nn(u,l);else{var h=u,g=u,f=u;nn(u,(function(t){t.x<h.x&&(h=t),t.x>g.x&&(g=t),t.depth>f.depth&&(f=t)}));var p=r(h,g)/2-h.x,m=n[0]/(g.x+r(g,h)/2+p),y=n[1]/(f.depth||1);nn(u,(function(t){t.x=(t.x+p)*m,t.y=t.depth*y}))}return c}function o(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e.length){!function(t){var e,r=0,n=0,i=t.children,a=i.length;for(;--a>=0;)(e=i[a]).z+=r,e.m+=r,r+=e.s+(n+=e.c)}(t);var a=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+r(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+r(t._,i._));t.parent.A=function(t,e,n){if(e){for(var i,a=t,o=t,s=e,l=a.parent.children[0],c=a.m,u=o.m,d=s.m,h=l.m;s=kn(s),a=Rn(a),s&&a;)l=Rn(l),(o=kn(o)).a=t,(i=s.z+d-a.z-c+r(s._,a._))>0&&(Gn(Nn(s,t,n),t,i),c+=i,u+=i),d+=s.m,c+=a.m,h+=l.m,u+=o.m;s&&!kn(o)&&(o.t=s,o.m+=d-u),a&&!Rn(l)&&(l.t=a,l.m+=c-h,n=t)}return n}(t,i,t.parent.A||n[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function l(t){t.x*=n[0],t.y=t.depth*n[1]}return a.separation=function(t){return arguments.length?(r=t,a):r},a.size=function(t){return arguments.length?(i=null==(n=t)?l:null,a):i?null:n},a.nodeSize=function(t){return arguments.length?(i=null==(n=t)?null:l,a):i?n:null},rn(a,t)},e.layout.cluster=function(){var t=e.layout.hierarchy().sort(null).value(null),r=Tn,n=[1,1],i=!1;function a(a,o){var s,l=t.call(this,a,o),c=l[0],u=0;an(c,(function(t){var n=t.children;n&&n.length?(t.x=function(t){return t.reduce((function(t,e){return t+e.x}),0)/t.length}(n),t.y=function(t){return 1+e.max(t,(function(t){return t.y}))}(n)):(t.x=s?u+=r(t,s):0,t.y=0,s=t)}));var d=Mn(c),h=Dn(c),g=d.x-r(d,h)/2,f=h.x+r(h,d)/2;return an(c,i?function(t){t.x=(t.x-c.x)*n[0],t.y=(c.y-t.y)*n[1]}:function(t){t.x=(t.x-g)/(f-g)*n[0],t.y=(1-(c.y?t.y/c.y:1))*n[1]}),l}return a.separation=function(t){return arguments.length?(r=t,a):r},a.size=function(t){return arguments.length?(i=null==(n=t),a):i?null:n},a.nodeSize=function(t){return arguments.length?(i=null!=(n=t),a):i?n:null},rn(a,t)},e.layout.treemap=function(){var t,r=e.layout.hierarchy(),n=Math.round,i=[1,1],a=null,o=Xn,s=!1,l="squarify",c=.5*(1+Math.sqrt(5));function u(t,e){for(var r,n,i=-1,a=t.length;++i<a;)n=(r=t[i]).value*(e<0?0:e),r.area=isNaN(n)||n<=0?0:n}function d(t){var e=t.children;if(e&&e.length){var r,n,i,a=o(t),s=[],c=e.slice(),h=1/0,p="slice"===l?a.dx:"dice"===l?a.dy:"slice-dice"===l?1&t.depth?a.dy:a.dx:Math.min(a.dx,a.dy);for(u(c,a.dx*a.dy/t.value),s.area=0;(i=c.length)>0;)s.push(r=c[i-1]),s.area+=r.area,"squarify"!==l||(n=g(s,p))<=h?(c.pop(),h=n):(s.area-=s.pop().area,f(s,p,a,!1),p=Math.min(a.dx,a.dy),s.length=s.area=0,h=1/0);s.length&&(f(s,p,a,!0),s.length=s.area=0),e.forEach(d)}}function h(t){var e=t.children;if(e&&e.length){var r,n=o(t),i=e.slice(),a=[];for(u(i,n.dx*n.dy/t.value),a.area=0;r=i.pop();)a.push(r),a.area+=r.area,null!=r.z&&(f(a,r.z?n.dx:n.dy,n,!i.length),a.length=a.area=0);e.forEach(h)}}function g(t,e){for(var r,n=t.area,i=0,a=1/0,o=-1,s=t.length;++o<s;)(r=t[o].area)&&(r<a&&(a=r),r>i&&(i=r));return e*=e,(n*=n)?Math.max(e*i*c/n,n/(e*a*c)):1/0}function f(t,e,r,i){var a,o=-1,s=t.length,l=r.x,c=r.y,u=e?n(t.area/e):0;if(e==r.dx){for((i||u>r.dy)&&(u=r.dy);++o<s;)(a=t[o]).x=l,a.y=c,a.dy=u,l+=a.dx=Math.min(r.x+r.dx-l,u?n(a.area/u):0);a.z=!0,a.dx+=r.x+r.dx-l,r.y+=u,r.dy-=u}else{for((i||u>r.dx)&&(u=r.dx);++o<s;)(a=t[o]).x=l,a.y=c,a.dx=u,c+=a.dy=Math.min(r.y+r.dy-c,u?n(a.area/u):0);a.z=!1,a.dy+=r.y+r.dy-c,r.x+=u,r.dx-=u}}function p(e){var n=t||r(e),a=n[0];return a.x=a.y=0,a.value?(a.dx=i[0],a.dy=i[1]):a.dx=a.dy=0,t&&r.revalue(a),u([a],a.dx*a.dy/a.value),(t?h:d)(a),s&&(t=n),n}return p.size=function(t){return arguments.length?(i=t,p):i},p.padding=function(t){if(!arguments.length)return a;function e(e){var r=t.call(p,e,e.depth);return null==r?Xn(e):Vn(e,"number"==typeof r?[r,r,r,r]:r)}function r(e){return Vn(e,t)}var n;return o=null==(a=t)?Xn:"function"==(n=typeof t)?e:"number"===n?(t=[t,t,t,t],r):r,p},p.round=function(t){return arguments.length?(n=t?Math.round:Number,p):n!=Number},p.sticky=function(e){return arguments.length?(s=e,t=null,p):s},p.ratio=function(t){return arguments.length?(c=t,p):c},p.mode=function(t){return arguments.length?(l=t+"",p):l},rn(p,r)},e.random={normal:function(t,e){var r=arguments.length;return r<2&&(e=1),r<1&&(t=0),function(){var r,n,i;do{i=(r=2*Math.random()-1)*r+(n=2*Math.random()-1)*n}while(!i||i>1);return t+e*r*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=e.random.normal.apply(e,arguments);return function(){return Math.exp(t())}},bates:function(t){var r=e.random.irwinHall(t);return function(){return r()/t}},irwinHall:function(t){return function(){for(var e=0,r=0;r<t;r++)e+=Math.random();return e}}},e.scale={};var Yn={floor:S,ceil:S};function Pn(t,r,n,i){var a=[],o=[],s=0,l=Math.min(t.length,r.length)-1;for(t[l]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++s<=l;)a.push(n(t[s-1],t[s])),o.push(i(r[s-1],r[s]));return function(r){var n=e.bisect(t,r,1,l)-1;return o[n](a[n](r))}}function zn(t,e,r,n){var i,a;function o(){var o=Math.min(t.length,e.length)>2?Pn:On,l=n?$r:Or;return i=o(t,e,l,r),a=o(e,t,l,Br),s}function s(t){return i(t)}return s.invert=function(t){return a(t)},s.domain=function(e){return arguments.length?(t=e.map(Number),o()):t},s.range=function(t){return arguments.length?(e=t,o()):e},s.rangeRound=function(t){return s.range(t).interpolate(Nr)},s.clamp=function(t){return arguments.length?(n=t,o()):n},s.interpolate=function(t){return arguments.length?(r=t,o()):r},s.ticks=function(e){return qn(t,e)},s.tickFormat=function(e,r){return d3_scale_linearTickFormat(t,e,r)},s.nice=function(e){return jn(t,e),o()},s.copy=function(){return zn(t,e,r,n)},o()}function Jn(t,r){return e.rebind(t,r,"range","rangeRound","interpolate","clamp")}function jn(t,e){return $n(t,Hn(Kn(t,e)[2])),$n(t,Hn(Kn(t,e)[2])),t}function Kn(t,e){null==e&&(e=10);var r=Wn(t),n=r[1]-r[0],i=Math.pow(10,Math.floor(Math.log(n/e)/Math.LN10)),a=e/n*i;return a<=.15?i*=10:a<=.35?i*=5:a<=.75&&(i*=2),r[0]=Math.ceil(r[0]/i)*i,r[1]=Math.floor(r[1]/i)*i+.5*i,r[2]=i,r}function qn(t,r){return e.range.apply(e,Kn(t,r))}function ti(t,e,r,n){function i(t){return(r?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function a(t){return r?Math.pow(e,t):-Math.pow(e,-t)}function o(e){return t(i(e))}return o.invert=function(e){return a(t.invert(e))},o.domain=function(e){return arguments.length?(r=e[0]>=0,t.domain((n=e.map(Number)).map(i)),o):n},o.base=function(r){return arguments.length?(e=+r,t.domain(n.map(i)),o):e},o.nice=function(){var e=$n(n.map(i),r?Math:ei);return t.domain(e),n=e.map(a),o},o.ticks=function(){var t=Wn(n),o=[],s=t[0],l=t[1],c=Math.floor(i(s)),u=Math.ceil(i(l)),d=e%1?2:e;if(isFinite(u-c)){if(r){for(;c<u;c++)for(var h=1;h<d;h++)o.push(a(c)*h);o.push(a(c))}else for(o.push(a(c));c++<u;)for(h=d-1;h>0;h--)o.push(a(c)*h);for(c=0;o[c]<s;c++);for(u=o.length;o[u-1]>l;u--);o=o.slice(c,u)}return o},o.copy=function(){return ti(t.copy(),e,r,n)},Jn(o,t)}e.scale.linear=function(){return zn([0,1],[0,1],Br,!1)},e.scale.log=function(){return ti(e.scale.linear().domain([0,1]),10,!0,[1,10])};var ei={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function ri(t,e,r){var n=ni(e),i=ni(1/e);function a(e){return t(n(e))}return a.invert=function(e){return i(t.invert(e))},a.domain=function(e){return arguments.length?(t.domain((r=e.map(Number)).map(n)),a):r},a.ticks=function(t){return qn(r,t)},a.tickFormat=function(t,e){return d3_scale_linearTickFormat(r,t,e)},a.nice=function(t){return a.domain(jn(r,t))},a.exponent=function(o){return arguments.length?(n=ni(e=o),i=ni(1/e),t.domain(r.map(n)),a):e},a.copy=function(){return ri(t.copy(),e,r)},Jn(a,t)}function ni(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ii(t,r){var n,i,a;function o(e){return i[((n.get(e)||("range"===r.t?n.set(e,t.push(e)):NaN))-1)%i.length]}function s(r,n){return e.range(t.length).map((function(t){return r+n*t}))}return o.domain=function(e){if(!arguments.length)return t;t=[],n=new I;for(var i,a=-1,s=e.length;++a<s;)n.has(i=e[a])||n.set(i,t.push(i));return o[r.t].apply(o,r.a)},o.range=function(t){return arguments.length?(i=t,a=0,r={t:"range",a:arguments},o):i},o.rangePoints=function(e,n){arguments.length<2&&(n=0);var l=e[0],c=e[1],u=t.length<2?(l=(l+c)/2,0):(c-l)/(t.length-1+n);return i=s(l+u*n/2,u),a=0,r={t:"rangePoints",a:arguments},o},o.rangeRoundPoints=function(e,n){arguments.length<2&&(n=0);var l=e[0],c=e[1],u=t.length<2?(l=c=Math.round((l+c)/2),0):(c-l)/(t.length-1+n)|0;return i=s(l+Math.round(u*n/2+(c-l-(t.length-1+n)*u)/2),u),a=0,r={t:"rangeRoundPoints",a:arguments},o},o.rangeBands=function(e,n,l){arguments.length<2&&(n=0),arguments.length<3&&(l=n);var c=e[1]<e[0],u=e[c-0],d=e[1-c],h=(d-u)/(t.length-n+2*l);return i=s(u+h*l,h),c&&i.reverse(),a=h*(1-n),r={t:"rangeBands",a:arguments},o},o.rangeRoundBands=function(e,n,l){arguments.length<2&&(n=0),arguments.length<3&&(l=n);var c=e[1]<e[0],u=e[c-0],d=e[1-c],h=Math.floor((d-u)/(t.length-n+2*l));return i=s(u+Math.round((d-u-(t.length-n)*h)/2),h),c&&i.reverse(),a=Math.round(h*(1-n)),r={t:"rangeRoundBands",a:arguments},o},o.rangeBand=function(){return a},o.rangeExtent=function(){return Wn(r.a[0])},o.copy=function(){return ii(t,r)},o.domain(t)}e.scale.pow=function(){return ri(e.scale.linear(),1,[0,1])},e.scale.sqrt=function(){return e.scale.pow().exponent(.5)},e.scale.ordinal=function(){return ii([],{t:"range",a:[[]]})},e.scale.category10=function(){return e.scale.ordinal().range(ai)},e.scale.category20=function(){return e.scale.ordinal().range(oi)},e.scale.category20b=function(){return e.scale.ordinal().range(si)},e.scale.category20c=function(){return e.scale.ordinal().range(li)};var ai=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ne),oi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ne),si=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ne),li=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ne);function ci(t,r){var n;function i(){var i=0,o=r.length;for(n=[];++i<o;)n[i-1]=e.quantile(t,i/o);return a}function a(t){if(!isNaN(t=+t))return r[e.bisect(n,t)]}return a.domain=function(e){return arguments.length?(t=e.map(g).filter(f).sort(h),i()):t},a.range=function(t){return arguments.length?(r=t,i()):r},a.quantiles=function(){return n},a.invertExtent=function(e){return(e=r.indexOf(e))<0?[NaN,NaN]:[e>0?n[e-1]:t[0],e<n.length?n[e]:t[t.length-1]]},a.copy=function(){return ci(t,r)},i()}function ui(t,e,r){var n,i;function a(e){return r[Math.max(0,Math.min(i,Math.floor(n*(e-t))))]}function o(){return n=r.length/(e-t),i=r.length-1,a}return a.domain=function(r){return arguments.length?(t=+r[0],e=+r[r.length-1],o()):[t,e]},a.range=function(t){return arguments.length?(r=t,o()):r},a.invertExtent=function(e){return[e=(e=r.indexOf(e))<0?NaN:e/n+t,e+1/n]},a.copy=function(){return ui(t,e,r)},o()}function di(t,r){function n(n){if(n<=n)return r[e.bisect(t,n)]}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(r=t,n):r},n.invertExtent=function(e){return e=r.indexOf(e),[t[e-1],t[e]]},n.copy=function(){return di(t,r)},n}function hi(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(r){return arguments.length?(t=r.map(e),e):t},e.ticks=function(e){return qn(t,e)},e.tickFormat=function(e,r){return d3_scale_linearTickFormat(t,e,r)},e.copy=function(){return hi(t)},e}function gi(){return 0}e.scale.quantile=function(){return ci([],[])},e.scale.quantize=function(){return ui(0,1,[0,1])},e.scale.threshold=function(){return di([.5],[0,1])},e.scale.identity=function(){return hi([0,1])},e.svg={},e.svg.arc=function(){var t=pi,e=mi,r=gi,n=fi,i=yi,a=bi,o=vi;function s(){var s=Math.max(0,+t.apply(this,arguments)),c=Math.max(0,+e.apply(this,arguments)),u=i.apply(this,arguments)-wt,d=a.apply(this,arguments)-wt,h=Math.abs(d-u),g=u>d?0:1;if(c<s&&(f=c,c=s,s=f),h>=_t)return l(c,g)+(s?l(s,1-g):"")+"Z";var f,p,m,y,b,v,x,I,B,C,F,A,Q=0,_=0,w=[];if((y=(+o.apply(this,arguments)||0)/2)&&(m=n===fi?Math.sqrt(s*s+c*c):+n.apply(this,arguments),g||(_*=-1),c&&(_=Lt(m/c*Math.sin(y))),s&&(Q=Lt(m/s*Math.sin(y)))),c){b=c*Math.cos(u+_),v=c*Math.sin(u+_),x=c*Math.cos(d-_),I=c*Math.sin(d-_);var U=Math.abs(d-u-2*_)<=At?0:1;if(_&&xi(b,v,x,I)===g^U){var S=(u+d)/2;b=c*Math.cos(S),v=c*Math.sin(S),x=I=null}}else b=v=0;if(s){B=s*Math.cos(d-Q),C=s*Math.sin(d-Q),F=s*Math.cos(u+Q),A=s*Math.sin(u+Q);var E=Math.abs(u-d+2*Q)<=At?0:1;if(Q&&xi(B,C,F,A)===1-g^E){var L=(u+d)/2;B=s*Math.cos(L),C=s*Math.sin(L),F=A=null}}else B=C=0;if(h>Ft&&(f=Math.min(Math.abs(c-s)/2,+r.apply(this,arguments)))>.001){p=s<c^g?0:1;var T=f,R=f;if(h<At){var k=null==F?[B,C]:null==x?[b,v]:Se([b,v],[F,A],[x,I],[B,C]),G=b-k[0],N=v-k[1],M=x-k[0],D=I-k[1],X=1/Math.sin(Math.acos((G*M+N*D)/(Math.sqrt(G*G+N*N)*Math.sqrt(M*M+D*D)))/2),V=Math.sqrt(k[0]*k[0]+k[1]*k[1]);R=Math.min(f,(s-V)/(X-1)),T=Math.min(f,(c-V)/(X+1))}if(null!=x){var W=Ii(null==F?[B,C]:[F,A],[b,v],c,T,g),Z=Ii([x,I],[B,C],c,T,g);f===T?w.push("M",W[0],"A",T,",",T," 0 0,",p," ",W[1],"A",c,",",c," 0 ",1-g^xi(W[1][0],W[1][1],Z[1][0],Z[1][1]),",",g," ",Z[1],"A",T,",",T," 0 0,",p," ",Z[0]):w.push("M",W[0],"A",T,",",T," 0 1,",p," ",Z[0])}else w.push("M",b,",",v);if(null!=F){var O=Ii([b,v],[F,A],s,-R,g),$=Ii([B,C],null==x?[b,v]:[x,I],s,-R,g);f===R?w.push("L",$[0],"A",R,",",R," 0 0,",p," ",$[1],"A",s,",",s," 0 ",g^xi($[1][0],$[1][1],O[1][0],O[1][1]),",",1-g," ",O[1],"A",R,",",R," 0 0,",p," ",O[0]):w.push("L",$[0],"A",R,",",R," 0 0,",p," ",O[0])}else w.push("L",B,",",C)}else w.push("M",b,",",v),null!=x&&w.push("A",c,",",c," 0 ",U,",",g," ",x,",",I),w.push("L",B,",",C),null!=F&&w.push("A",s,",",s," 0 ",E,",",1-g," ",F,",",A);return w.push("Z"),w.join("")}function l(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return s.innerRadius=function(e){return arguments.length?(t=he(e),s):t},s.outerRadius=function(t){return arguments.length?(e=he(t),s):e},s.cornerRadius=function(t){return arguments.length?(r=he(t),s):r},s.padRadius=function(t){return arguments.length?(n=t==fi?fi:he(t),s):n},s.startAngle=function(t){return arguments.length?(i=he(t),s):i},s.endAngle=function(t){return arguments.length?(a=he(t),s):a},s.padAngle=function(t){return arguments.length?(o=he(t),s):o},s.centroid=function(){var r=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,n=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-wt;return[Math.cos(n)*r,Math.sin(n)*r]},s};var fi="auto";function pi(t){return t.innerRadius}function mi(t){return t.outerRadius}function yi(t){return t.startAngle}function bi(t){return t.endAngle}function vi(t){return t&&t.padAngle}function xi(t,e,r,n){return(t-r)*e-(e-n)*t>0?0:1}function Ii(t,e,r,n,i){var a=t[0]-e[0],o=t[1]-e[1],s=(i?n:-n)/Math.sqrt(a*a+o*o),l=s*o,c=-s*a,u=t[0]+l,d=t[1]+c,h=e[0]+l,g=e[1]+c,f=(u+h)/2,p=(d+g)/2,m=h-u,y=g-d,b=m*m+y*y,v=r-n,x=u*g-h*d,I=(y<0?-1:1)*Math.sqrt(Math.max(0,v*v*b-x*x)),B=(x*y-m*I)/b,C=(-x*m-y*I)/b,F=(x*y+m*I)/b,A=(-x*m+y*I)/b,Q=B-f,_=C-p,w=F-f,U=A-p;return Q*Q+_*_>w*w+U*U&&(B=F,C=A),[[B-l,C-c],[B*r/v,C*r/v]]}function Bi(){return!0}function Ci(t){var e=Fe,r=Ae,n=Bi,i=Ai,a=i.key,o=.7;function s(a){var s,l=[],c=[],u=-1,d=a.length,h=he(e),g=he(r);function f(){l.push("M",i(t(c),o))}for(;++u<d;)n.call(this,s=a[u],u)?c.push([+h.call(this,s,u),+g.call(this,s,u)]):c.length&&(f(),c=[]);return c.length&&f(),l.length?l.join(""):null}return s.x=function(t){return arguments.length?(e=t,s):e},s.y=function(t){return arguments.length?(r=t,s):r},s.defined=function(t){return arguments.length?(n=t,s):n},s.interpolate=function(t){return arguments.length?(a="function"==typeof t?i=t:(i=Fi.get(t)||Ai).key,s):a},s.tension=function(t){return arguments.length?(o=t,s):o},s}e.svg.line=function(){return Ci(S)};var Fi=e.map({linear:Ai,"linear-closed":Qi,step:function(t){var e=0,r=t.length,n=t[0],i=[n[0],",",n[1]];for(;++e<r;)i.push("H",(n[0]+(n=t[e])[0])/2,"V",n[1]);r>1&&i.push("H",n[0]);return i.join("")},"step-before":_i,"step-after":wi,basis:Ei,"basis-open":function(t){if(t.length<4)return Ai(t);var e,r=[],n=-1,i=t.length,a=[0],o=[0];for(;++n<3;)e=t[n],a.push(e[0]),o.push(e[1]);r.push(Li(ki,a)+","+Li(ki,o)),--n;for(;++n<i;)e=t[n],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),Gi(r,a,o);return r.join("")},"basis-closed":function(t){var e,r,n=-1,i=t.length,a=i+4,o=[],s=[];for(;++n<4;)r=t[n%i],o.push(r[0]),s.push(r[1]);e=[Li(ki,o),",",Li(ki,s)],--n;for(;++n<a;)r=t[n%i],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),Gi(e,o,s);return e.join("")},bundle:function(t,e){var r=t.length-1;if(r)for(var n,i,a=t[0][0],o=t[0][1],s=t[r][0]-a,l=t[r][1]-o,c=-1;++c<=r;)n=t[c],i=c/r,n[0]=e*n[0]+(1-e)*(a+i*s),n[1]=e*n[1]+(1-e)*(o+i*l);return Ei(t)},cardinal:function(t,e){return t.length<3?Ai(t):t[0]+Ui(t,Si(t,e))},"cardinal-open":function(t,e){return t.length<4?Ai(t):t[1]+Ui(t.slice(1,-1),Si(t,e))},"cardinal-closed":function(t,e){return t.length<3?Qi(t):t[0]+Ui((t.push(t[0]),t),Si([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?Ai(t):t[0]+Ui(t,function(t){var e,r,n,i,a=[],o=function(t){var e=0,r=t.length-1,n=[],i=t[0],a=t[1],o=n[0]=Ni(i,a);for(;++e<r;)n[e]=(o+(o=Ni(i=a,a=t[e+1])))/2;return n[e]=o,n}(t),s=-1,l=t.length-1;for(;++s<l;)e=Ni(t[s],t[s+1]),b(e)<Ft?o[s]=o[s+1]=0:(i=(r=o[s]/e)*r+(n=o[s+1]/e)*n)>9&&(i=3*e/Math.sqrt(i),o[s]=i*r,o[s+1]=i*n);s=-1;for(;++s<=l;)i=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}(t))}});function Ai(t){return t.length>1?t.join("L"):t+"Z"}function Qi(t){return t.join("L")+"Z"}function _i(t){for(var e=0,r=t.length,n=t[0],i=[n[0],",",n[1]];++e<r;)i.push("V",(n=t[e])[1],"H",n[0]);return i.join("")}function wi(t){for(var e=0,r=t.length,n=t[0],i=[n[0],",",n[1]];++e<r;)i.push("H",(n=t[e])[0],"V",n[1]);return i.join("")}function Ui(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Ai(t);var r=t.length!=e.length,n="",i=t[0],a=t[1],o=e[0],s=o,l=1;if(r&&(n+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=t[1],l=2),e.length>1){s=e[1],a=t[l],l++,n+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var c=2;c<e.length;c++,l++)a=t[l],s=e[c],n+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(r){var u=t[l];n+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+u[0]+","+u[1]}return n}function Si(t,e){for(var r,n=[],i=(1-e)/2,a=t[0],o=t[1],s=1,l=t.length;++s<l;)r=a,a=o,o=t[s],n.push([i*(o[0]-r[0]),i*(o[1]-r[1])]);return n}function Ei(t){if(t.length<3)return Ai(t);var e=1,r=t.length,n=t[0],i=n[0],a=n[1],o=[i,i,i,(n=t[1])[0]],s=[a,a,a,n[1]],l=[i,",",a,"L",Li(ki,o),",",Li(ki,s)];for(t.push(t[r-1]);++e<=r;)n=t[e],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Gi(l,o,s);return t.pop(),l.push("L",n),l.join("")}function Li(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}Fi.forEach((function(t,e){e.key=t,e.closed=/-closed$/.test(t)}));var Ti=[0,2/3,1/3,0],Ri=[0,1/3,2/3,0],ki=[0,1/6,2/3,1/6];function Gi(t,e,r){t.push("C",Li(Ti,e),",",Li(Ti,r),",",Li(Ri,e),",",Li(Ri,r),",",Li(ki,e),",",Li(ki,r))}function Ni(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Mi(t){for(var e,r,n,i=-1,a=t.length;++i<a;)r=(e=t[i])[0],n=e[1]-wt,e[0]=r*Math.cos(n),e[1]=r*Math.sin(n);return t}function Di(t){var e=Fe,r=Fe,n=0,i=Ae,a=Bi,o=Ai,s=o.key,l=o,c="L",u=.7;function d(s){var d,h,g,f=[],p=[],m=[],y=-1,b=s.length,v=he(e),x=he(n),I=e===r?function(){return h}:he(r),B=n===i?function(){return g}:he(i);function C(){f.push("M",o(t(m),u),c,l(t(p.reverse()),u),"Z")}for(;++y<b;)a.call(this,d=s[y],y)?(p.push([h=+v.call(this,d,y),g=+x.call(this,d,y)]),m.push([+I.call(this,d,y),+B.call(this,d,y)])):p.length&&(C(),p=[],m=[]);return p.length&&C(),f.length?f.join(""):null}return d.x=function(t){return arguments.length?(e=r=t,d):r},d.x0=function(t){return arguments.length?(e=t,d):e},d.x1=function(t){return arguments.length?(r=t,d):r},d.y=function(t){return arguments.length?(n=i=t,d):i},d.y0=function(t){return arguments.length?(n=t,d):n},d.y1=function(t){return arguments.length?(i=t,d):i},d.defined=function(t){return arguments.length?(a=t,d):a},d.interpolate=function(t){return arguments.length?(s="function"==typeof t?o=t:(o=Fi.get(t)||Ai).key,l=o.reverse||o,c=o.closed?"M":"L",d):s},d.tension=function(t){return arguments.length?(u=t,d):u},d}function Xi(t){return t.source}function Vi(t){return t.target}function Wi(t){return t.radius}function Zi(t){return[t.x,t.y]}function Oi(t){return function(){var e=t.apply(this,arguments),r=e[0],n=e[1]-wt;return[r*Math.cos(n),r*Math.sin(n)]}}function $i(){return 64}function Hi(){return"circle"}function Yi(t){var e=Math.sqrt(t/At);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}e.svg.line.radial=function(){var t=Ci(Mi);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},_i.reverse=wi,wi.reverse=_i,e.svg.area=function(){return Di(S)},e.svg.area.radial=function(){var t=Di(Mi);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},e.svg.chord=function(){var t=Xi,e=Vi,r=Wi,n=yi,i=bi;function a(r,n){var i=o(this,t,r,n),a=o(this,e,r,n);return"M"+i.p0+s(i.r,i.p1,i.a1-i.a0)+(function(t,e){return t.a0==e.a0&&t.a1==e.a1}(i,a)?l(i.r,i.p1,i.r,i.p0):l(i.r,i.p1,a.r,a.p0)+s(a.r,a.p1,a.a1-a.a0)+l(a.r,a.p1,i.r,i.p0))+"Z"}function o(t,e,a,o){var s=e.call(t,a,o),l=r.call(t,s,o),c=n.call(t,s,o)-wt,u=i.call(t,s,o)-wt;return{r:l,a0:c,a1:u,p0:[l*Math.cos(c),l*Math.sin(c)],p1:[l*Math.cos(u),l*Math.sin(u)]}}function s(t,e,r){return"A"+t+","+t+" 0 "+ +(r>At)+",1 "+e}function l(t,e,r,n){return"Q 0,0 "+n}return a.radius=function(t){return arguments.length?(r=he(t),a):r},a.source=function(e){return arguments.length?(t=he(e),a):t},a.target=function(t){return arguments.length?(e=he(t),a):e},a.startAngle=function(t){return arguments.length?(n=he(t),a):n},a.endAngle=function(t){return arguments.length?(i=he(t),a):i},a},e.svg.diagonal=function(){var t=Xi,e=Vi,r=Zi;function n(n,i){var a=t.call(this,n,i),o=e.call(this,n,i),s=(a.y+o.y)/2,l=[a,{x:a.x,y:s},{x:o.x,y:s},o];return"M"+(l=l.map(r))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return n.source=function(e){return arguments.length?(t=he(e),n):t},n.target=function(t){return arguments.length?(e=he(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},e.svg.diagonal.radial=function(){var t=e.svg.diagonal(),r=Zi,n=t.projection;return t.projection=function(t){return arguments.length?n(Oi(r=t)):r},t},e.svg.symbol=function(){var t=Hi,e=$i;function r(r,n){return(Pi.get(t.call(this,r,n))||Yi)(e.call(this,r,n))}return r.type=function(e){return arguments.length?(t=he(e),r):t},r.size=function(t){return arguments.length?(e=he(t),r):e},r};var Pi=e.map({circle:Yi,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Ji)),r=e*Ji;return"M0,"+-e+"L"+r+",0 0,"+e+" "+-r+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/zi),r=e*zi/2;return"M0,"+r+"L"+e+","+-r+" "+-e+","+-r+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/zi),r=e*zi/2;return"M0,"+-r+"L"+e+","+r+" "+-e+","+r+"Z"}});e.svg.symbolTypes=Pi.keys();var zi=Math.sqrt(3),Ji=Math.tan(30*Ut);H.transition=function(t){for(var e,r,n=ta||++na,i=oa(t),a=[],o=ea||{time:Date.now(),ease:Lr,delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(e=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(r=c[u])&&sa(r,u,i,n,o),e.push(r)}return qi(a,i,n)},H.interrupt=function(t){return this.each(null==t?ji:Ki(oa(t)))};var ji=Ki(oa());function Ki(t){return function(){var e,r,n;(e=this[t])&&(n=e[r=e.active])&&(n.timer.c=null,n.timer.t=NaN,--e.count?delete e[r]:delete this[t],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function qi(t,e,r){return V(t,ra),t.namespace=e,t.id=r,t}var ta,ea,ra=[],na=0;function ia(t,e,r,n){var i=t.id,a=t.namespace;return ut(t,"function"==typeof r?function(t,o,s){t[a][i].tween.set(e,n(r.call(t,t.__data__,o,s)))}:(r=n(r),function(t){t[a][i].tween.set(e,r)}))}function aa(t){return null==t&&(t=""),function(){this.textContent=t}}function oa(t){return null==t?"__transition__":"__transition_"+t+"__"}function sa(t,e,r,n,i){var a,o,s,l,c,u=t[r]||(t[r]={active:0,count:0}),d=u[n];function h(r){var i=u.active,h=u[i];for(var f in h&&(h.timer.c=null,h.timer.t=NaN,--u.count,delete u[i],h.event&&h.event.interrupt.call(t,t.__data__,h.index)),u)if(+f<n){var p=u[f];p.timer.c=null,p.timer.t=NaN,--u.count,delete u[f]}o.c=g,xe((function(){return o.c&&g(r||1)&&(o.c=null,o.t=NaN),1}),0,a),u.active=n,d.event&&d.event.start.call(t,t.__data__,e),c=[],d.tween.forEach((function(r,n){(n=n.call(t,t.__data__,e))&&c.push(n)})),l=d.ease,s=d.duration}function g(i){for(var a=i/s,o=l(a),h=c.length;h>0;)c[--h].call(t,o);if(a>=1)return d.event&&d.event.end.call(t,t.__data__,e),--u.count?delete u[n]:delete t[r],1}d||(a=i.time,o=xe((function(t){var e=d.delay;if(o.t=e+a,e<=t)return h(t-e);o.c=h}),0,a),d=u[n]={tween:new I,time:a,timer:o,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++u.count)}ra.call=H.call,ra.empty=H.empty,ra.node=H.node,ra.size=H.size,e.transition=function(t,r){return t&&t.transition?ta?t.transition(r):t:e.selection().transition(t)},e.transition.prototype=ra,ra.select=function(t){var e,r,n,i=this.id,a=this.namespace,o=[];t=Y(t);for(var s=-1,l=this.length;++s<l;){o.push(e=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(n=c[u])&&(r=t.call(n,n.__data__,u,s))?("__data__"in n&&(r.__data__=n.__data__),sa(r,u,a,i,n[a][i]),e.push(r)):e.push(null)}return qi(o,a,i)},ra.selectAll=function(t){var e,r,n,i,a,o=this.id,s=this.namespace,l=[];t=P(t);for(var c=-1,u=this.length;++c<u;)for(var d=this[c],h=-1,g=d.length;++h<g;)if(n=d[h]){a=n[s][o],r=t.call(n,n.__data__,h,c),l.push(e=[]);for(var f=-1,p=r.length;++f<p;)(i=r[f])&&sa(i,f,s,o,a),e.push(i)}return qi(l,s,o)},ra.filter=function(t){var e,r,n=[];"function"!=typeof t&&(t=lt(t));for(var i=0,a=this.length;i<a;i++){n.push(e=[]);for(var o,s=0,l=(o=this[i]).length;s<l;s++)(r=o[s])&&t.call(r,r.__data__,s,i)&&e.push(r)}return qi(n,this.namespace,this.id)},ra.tween=function(t,e){var r=this.id,n=this.namespace;return arguments.length<2?this.node()[n][r].tween.get(t):ut(this,null==e?function(e){e[n][r].tween.remove(t)}:function(i){i[n][r].tween.set(t,e)})},ra.attr=function(t,r){if(arguments.length<2){for(r in t)this.attr(r,t[r]);return this}var n="transform"==t?Zr:Br,i=e.ns.qualify(t);function a(){this.removeAttribute(i)}function o(){this.removeAttributeNS(i.space,i.local)}function s(t){return null==t?a:(t+="",function(){var e,r=this.getAttribute(i);return r!==t&&(e=n(r,t),function(t){this.setAttribute(i,e(t))})})}function l(t){return null==t?o:(t+="",function(){var e,r=this.getAttributeNS(i.space,i.local);return r!==t&&(e=n(r,t),function(t){this.setAttributeNS(i.space,i.local,e(t))})})}return ia(this,"attr."+t,r,i.local?l:s)},ra.attrTween=function(t,r){var n=e.ns.qualify(t);return this.tween("attr."+t,n.local?function(t,e){var i=r.call(this,t,e,this.getAttributeNS(n.space,n.local));return i&&function(t){this.setAttributeNS(n.space,n.local,i(t))}}:function(t,e){var i=r.call(this,t,e,this.getAttribute(n));return i&&function(t){this.setAttribute(n,i(t))}})},ra.style=function(t,e,r){var n=arguments.length;if(n<3){if("string"!=typeof t){for(r in n<2&&(e=""),t)this.style(r,t[r],e);return this}r=""}function i(){this.style.removeProperty(t)}function a(e){return null==e?i:(e+="",function(){var n,i=o(this).getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(n=Br(i,e),function(e){this.style.setProperty(t,n(e),r)})})}return ia(this,"style."+t,e,a)},ra.styleTween=function(t,e,r){function n(n,i){var a=e.call(this,n,i,o(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),r)}}return arguments.length<3&&(r=""),this.tween("style."+t,n)},ra.text=function(t){return ia(this,"text",t,aa)},ra.remove=function(){var t=this.namespace;return this.each("end.transition",(function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)}))},ra.ease=function(t){var r=this.id,n=this.namespace;return arguments.length<1?this.node()[n][r].ease:("function"!=typeof t&&(t=e.ease.apply(e,arguments)),ut(this,(function(e){e[n][r].ease=t})))},ra.delay=function(t){var e=this.id,r=this.namespace;return arguments.length<1?this.node()[r][e].delay:ut(this,"function"==typeof t?function(n,i,a){n[r][e].delay=+t.call(n,n.__data__,i,a)}:(t=+t,function(n){n[r][e].delay=t}))},ra.duration=function(t){var e=this.id,r=this.namespace;return arguments.length<1?this.node()[r][e].duration:ut(this,"function"==typeof t?function(n,i,a){n[r][e].duration=Math.max(1,t.call(n,n.__data__,i,a))}:(t=Math.max(1,t),function(n){n[r][e].duration=t}))},ra.each=function(t,r){var n=this.id,i=this.namespace;if(arguments.length<2){var a=ea,o=ta;try{ta=n,ut(this,(function(e,r,a){ea=e[i][n],t.call(e,e.__data__,r,a)}))}finally{ea=a,ta=o}}else ut(this,(function(a){var o=a[i][n];(o.event||(o.event=e.dispatch("start","end","interrupt"))).on(t,r)}));return this},ra.transition=function(){for(var t,e,r,n=this.id,i=++na,a=this.namespace,o=[],s=0,l=this.length;s<l;s++){o.push(t=[]);for(var c,u=0,d=(c=this[s]).length;u<d;u++)(e=c[u])&&sa(e,u,a,i,{time:(r=e[a][n]).time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration}),t.push(e)}return qi(o,a,i)},e.svg.axis=function(){var t,r=e.scale.linear(),i=la,a=6,o=6,s=3,l=[10],c=null;function u(n){n.each((function(){var n,u=e.select(this),d=this.__chart__||r,h=this.__chart__=r.copy(),g=null==c?h.ticks?h.ticks.apply(h,l):h.domain():c,f=null==t?h.tickFormat?h.tickFormat.apply(h,l):S:t,p=u.selectAll(".tick").data(g,h),m=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Ft),y=e.transition(p.exit()).style("opacity",Ft).remove(),b=e.transition(p.order()).style("opacity",1),v=Math.max(a,0)+s,x=Zn(h),I=u.selectAll(".domain").data([0]),B=(I.enter().append("path").attr("class","domain"),e.transition(I));m.append("line"),m.append("text");var C,F,A,Q,_=m.select("line"),w=b.select("line"),U=p.select("text").text(f),E=m.select("text"),L=b.select("text"),T="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(n=ua,C="x",A="y",F="x2",Q="y2",U.attr("dy",T<0?"0em":".71em").style("text-anchor","middle"),B.attr("d","M"+x[0]+","+T*o+"V0H"+x[1]+"V"+T*o)):(n=da,C="y",A="x",F="y2",Q="x2",U.attr("dy",".32em").style("text-anchor",T<0?"end":"start"),B.attr("d","M"+T*o+","+x[0]+"H0V"+x[1]+"H"+T*o)),_.attr(Q,T*a),E.attr(A,T*v),w.attr(F,0).attr(Q,T*a),L.attr(C,0).attr(A,T*v),h.rangeBand){var R=h,k=R.rangeBand()/2;d=h=function(t){return R(t)+k}}else d.rangeBand?d=h:y.call(n,h,d);m.call(n,d,h),b.call(n,h,h)}))}return u.scale=function(t){return arguments.length?(r=t,u):r},u.orient=function(t){return arguments.length?(i=t in ca?t+"":la,u):i},u.ticks=function(){return arguments.length?(l=n(arguments),u):l},u.tickValues=function(t){return arguments.length?(c=t,u):c},u.tickFormat=function(e){return arguments.length?(t=e,u):t},u.tickSize=function(t){var e=arguments.length;return e?(a=+t,o=+arguments[e-1],u):a},u.innerTickSize=function(t){return arguments.length?(a=+t,u):a},u.outerTickSize=function(t){return arguments.length?(o=+t,u):o},u.tickPadding=function(t){return arguments.length?(s=+t,u):s},u.tickSubdivide=function(){return arguments.length&&u},u};var la="bottom",ca={top:1,right:1,bottom:1,left:1};function ua(t,e,r){t.attr("transform",(function(t){var n=e(t);return"translate("+(isFinite(n)?n:r(t))+",0)"}))}function da(t,e,r){t.attr("transform",(function(t){var n=e(t);return"translate(0,"+(isFinite(n)?n:r(t))+")"}))}e.svg.brush=function(){var t,r,n=D(h,"brushstart","brush","brushend"),i=null,a=null,s=[0,0],l=[0,0],c=!0,u=!0,d=ga[0];function h(t){t.each((function(){var t=e.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m),r=t.selectAll(".background").data([0]);r.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(d,S);n.exit().remove(),n.enter().append("g").attr("class",(function(t){return"resize "+t})).style("cursor",(function(t){return ha[t]})).append("rect").attr("x",(function(t){return/[ew]$/.test(t)?-3:null})).attr("y",(function(t){return/^[ns]/.test(t)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",h.empty()?"none":null);var o,s=e.transition(t),l=e.transition(r);i&&(o=Zn(i),l.attr("x",o[0]).attr("width",o[1]-o[0]),f(s)),a&&(o=Zn(a),l.attr("y",o[0]).attr("height",o[1]-o[0]),p(s)),g(s)}))}function g(t){t.selectAll(".resize").attr("transform",(function(t){return"translate("+s[+/e$/.test(t)]+","+l[+/^s/.test(t)]+")"}))}function f(t){t.select(".extent").attr("x",s[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1]-s[0])}function p(t){t.select(".extent").attr("y",l[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function m(){var d,m,y=this,b=e.select(e.event.target),v=n.of(y,arguments),x=e.select(y),I=b.datum(),B=!/^(n|s)$/.test(I)&&i,C=!/^(e|w)$/.test(I)&&a,F=b.classed("extent"),A=xt(y),Q=e.mouse(y),_=e.select(o(y)).on("keydown.brush",S).on("keyup.brush",E);if(e.event.changedTouches?_.on("touchmove.brush",L).on("touchend.brush",R):_.on("mousemove.brush",L).on("mouseup.brush",R),x.interrupt().selectAll("*").interrupt(),F)Q[0]=s[0]-Q[0],Q[1]=l[0]-Q[1];else if(I){var w=+/w$/.test(I),U=+/^n/.test(I);m=[s[1-w]-Q[0],l[1-U]-Q[1]],Q[0]=s[w],Q[1]=l[U]}else e.event.altKey&&(d=Q.slice());function S(){32==e.event.keyCode&&(F||(d=null,Q[0]-=s[1],Q[1]-=l[1],F=2),N())}function E(){32==e.event.keyCode&&2==F&&(Q[0]+=s[1],Q[1]+=l[1],F=0,N())}function L(){var t=e.mouse(y),r=!1;m&&(t[0]+=m[0],t[1]+=m[1]),F||(e.event.altKey?(d||(d=[(s[0]+s[1])/2,(l[0]+l[1])/2]),Q[0]=s[+(t[0]<d[0])],Q[1]=l[+(t[1]<d[1])]):d=null),B&&T(t,i,0)&&(f(x),r=!0),C&&T(t,a,1)&&(p(x),r=!0),r&&(g(x),v({type:"brush",mode:F?"move":"resize"}))}function T(e,n,i){var a,o,h=Zn(n),g=h[0],f=h[1],p=Q[i],m=i?l:s,y=m[1]-m[0];if(F&&(g-=p,f-=y+p),a=(i?u:c)?Math.max(g,Math.min(f,e[i])):e[i],F?o=(a+=p)+y:(d&&(p=Math.max(g,Math.min(f,2*d[i]-a))),p<a?(o=a,a=p):o=p),m[0]!=a||m[1]!=o)return i?r=null:t=null,m[0]=a,m[1]=o,!0}function R(){L(),x.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null),e.select("body").style("cursor",null),_.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),A(),v({type:"brushend"})}x.style("pointer-events","none").selectAll(".resize").style("display",null),e.select("body").style("cursor",b.style("cursor")),v({type:"brushstart"}),L()}return h.event=function(i){i.each((function(){var i=n.of(this,arguments),a={x:s,y:l,i:t,j:r},o=this.__chart__||a;this.__chart__=a,ta?e.select(this).transition().each("start.brush",(function(){t=o.i,r=o.j,s=o.x,l=o.y,i({type:"brushstart"})})).tween("brush:brush",(function(){var e=Cr(s,a.x),n=Cr(l,a.y);return t=r=null,function(t){s=a.x=e(t),l=a.y=n(t),i({type:"brush",mode:"resize"})}})).each("end.brush",(function(){t=a.i,r=a.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})})):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))}))},h.x=function(t){return arguments.length?(d=ga[!(i=t)<<1|!a],h):i},h.y=function(t){return arguments.length?(d=ga[!i<<1|!(a=t)],h):a},h.clamp=function(t){return arguments.length?(i&&a?(c=!!t[0],u=!!t[1]):i?c=!!t:a&&(u=!!t),h):i&&a?[c,u]:i?c:a?u:null},h.extent=function(e){var n,o,c,u,d;return arguments.length?(i&&(n=e[0],o=e[1],a&&(n=n[0],o=o[0]),t=[n,o],i.invert&&(n=i(n),o=i(o)),o<n&&(d=n,n=o,o=d),n==s[0]&&o==s[1]||(s=[n,o])),a&&(c=e[0],u=e[1],i&&(c=c[1],u=u[1]),r=[c,u],a.invert&&(c=a(c),u=a(u)),u<c&&(d=c,c=u,u=d),c==l[0]&&u==l[1]||(l=[c,u])),h):(i&&(t?(n=t[0],o=t[1]):(n=s[0],o=s[1],i.invert&&(n=i.invert(n),o=i.invert(o)),o<n&&(d=n,n=o,o=d))),a&&(r?(c=r[0],u=r[1]):(c=l[0],u=l[1],a.invert&&(c=a.invert(c),u=a.invert(u)),u<c&&(d=c,c=u,u=d))),i&&a?[[n,c],[o,u]]:i?[n,o]:a&&[c,u])},h.clear=function(){return h.empty()||(s=[0,0],l=[0,0],t=r=null),h},h.empty=function(){return!!i&&s[0]==s[1]||!!a&&l[0]==l[1]},e.rebind(h,n,"on")};var ha={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ga=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function fa(t){return JSON.parse(t.responseText)}function pa(t){var e=i.createRange();return e.selectNode(i.body),e.createContextualFragment(t.responseText)}e.text=ge((function(t){return t.responseText})),e.json=function(t,e){return fe(t,"application/json",fa,e)},e.html=function(t,e){return fe(t,"text/html",pa,e)},e.xml=ge((function(t){return t.responseXML})),t.exports?t.exports=e:this.d3=e}).apply(self)})),t0=new Date,t1=new Date;function newInterval(t,e,r,n){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(r){return t(r=new Date(r-1)),e(r,1),t(r),r},i.round=function(t){var e=i(t),r=i.ceil(t);return t-e<r-t?e:r},i.offset=function(t,r){return e(t=new Date(+t),null==r?1:Math.floor(r)),t},i.range=function(r,n,a){var o,s=[];if(r=i.ceil(r),a=null==a?1:Math.floor(a),!(r<n&&a>0))return s;do{s.push(o=new Date(+r)),e(r,a),t(r)}while(o<r&&r<n);return s},i.filter=function(r){return newInterval((function(e){if(e>=e)for(;t(e),!r(e);)e.setTime(e-1)}),(function(t,n){if(t>=t)if(n<0)for(;++n<=0;)for(;e(t,-1),!r(t););else for(;--n>=0;)for(;e(t,1),!r(t););}))},r&&(i.count=function(e,n){return t0.setTime(+e),t1.setTime(+n),t(t0),t(t1),Math.floor(r(t0,t1))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(n?function(e){return n(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var millisecond=newInterval((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));millisecond.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?newInterval((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,r){e.setTime(+e+r*t)}),(function(e,r){return(r-e)/t})):millisecond:null};var millisecond$1=millisecond,milliseconds=millisecond.range,durationSecond=1e3,durationMinute=6e4,durationHour=36e5,durationDay=864e5,durationWeek=6048e5,second=newInterval((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*durationSecond)}),(function(t,e){return(e-t)/durationSecond}),(function(t){return t.getUTCSeconds()})),second$1=second,seconds=second.range,minute=newInterval((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*durationSecond)}),(function(t,e){t.setTime(+t+e*durationMinute)}),(function(t,e){return(e-t)/durationMinute}),(function(t){return t.getMinutes()})),minute$1=minute,minutes=minute.range,hour=newInterval((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*durationSecond-t.getMinutes()*durationMinute)}),(function(t,e){t.setTime(+t+e*durationHour)}),(function(t,e){return(e-t)/durationHour}),(function(t){return t.getHours()})),hour$1=hour,hours=hour.range,day=newInterval((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*durationMinute)/durationDay}),(function(t){return t.getDate()-1})),timeDay=day,days=day.range;function weekday(t){return newInterval((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*durationMinute)/durationWeek}))}var sunday=weekday(0),monday=weekday(1),tuesday=weekday(2),wednesday=weekday(3),thursday=weekday(4),friday=weekday(5),saturday=weekday(6),sundays=sunday.range,mondays=monday.range,tuesdays=tuesday.range,wednesdays=wednesday.range,thursdays=thursday.range,fridays=friday.range,saturdays=saturday.range,month=newInterval((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),month$1=month,months=month.range,year=newInterval((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));year.every=function(t){return isFinite(t=Math.floor(t))&&t>0?newInterval((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,r){e.setFullYear(e.getFullYear()+r*t)})):null};var timeYear=year,years=year.range,utcMinute=newInterval((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*durationMinute)}),(function(t,e){return(e-t)/durationMinute}),(function(t){return t.getUTCMinutes()})),utcMinute$1=utcMinute,utcMinutes=utcMinute.range,utcHour=newInterval((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*durationHour)}),(function(t,e){return(e-t)/durationHour}),(function(t){return t.getUTCHours()})),utcHour$1=utcHour,utcHours=utcHour.range,utcDay=newInterval((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/durationDay}),(function(t){return t.getUTCDate()-1})),utcDay$1=utcDay,utcDays=utcDay.range;function utcWeekday(t){return newInterval((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/durationWeek}))}var utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6),utcSundays=utcSunday.range,utcMondays=utcMonday.range,utcTuesdays=utcTuesday.range,utcWednesdays=utcWednesday.range,utcThursdays=utcThursday.range,utcFridays=utcFriday.range,utcSaturdays=utcSaturday.range,utcMonth=newInterval((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),utcMonth$1=utcMonth,utcMonths=utcMonth.range,utcYear=newInterval((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));utcYear.every=function(t){return isFinite(t=Math.floor(t))&&t>0?newInterval((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,r){e.setUTCFullYear(e.getUTCFullYear()+r*t)})):null};var utcYear$1=utcYear,utcYears=utcYear.range,src$2=Object.freeze({__proto__:null,timeInterval:newInterval,timeMillisecond:millisecond$1,timeMilliseconds:milliseconds,utcMillisecond:millisecond$1,utcMilliseconds:milliseconds,timeSecond:second$1,timeSeconds:seconds,utcSecond:second$1,utcSeconds:seconds,timeMinute:minute$1,timeMinutes:minutes,timeHour:hour$1,timeHours:hours,timeDay:timeDay,timeDays:days,timeWeek:sunday,timeWeeks:sundays,timeSunday:sunday,timeSundays:sundays,timeMonday:monday,timeMondays:mondays,timeTuesday:tuesday,timeTuesdays:tuesdays,timeWednesday:wednesday,timeWednesdays:wednesdays,timeThursday:thursday,timeThursdays:thursdays,timeFriday:friday,timeFridays:fridays,timeSaturday:saturday,timeSaturdays:saturdays,timeMonth:month$1,timeMonths:months,timeYear:timeYear,timeYears:years,utcMinute:utcMinute$1,utcMinutes:utcMinutes,utcHour:utcHour$1,utcHours:utcHours,utcDay:utcDay$1,utcDays:utcDays,utcWeek:utcSunday,utcWeeks:utcSundays,utcSunday:utcSunday,utcSundays:utcSundays,utcMonday:utcMonday,utcMondays:utcMondays,utcTuesday:utcTuesday,utcTuesdays:utcTuesdays,utcWednesday:utcWednesday,utcWednesdays:utcWednesdays,utcThursday:utcThursday,utcThursdays:utcThursdays,utcFriday:utcFriday,utcFridays:utcFridays,utcSaturday:utcSaturday,utcSaturdays:utcSaturdays,utcMonth:utcMonth$1,utcMonths:utcMonths,utcYear:utcYear$1,utcYears:utcYears});function localDate(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function utcDate(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function newDate(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function formatLocale$1(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,c=formatRe(i),u=formatLookup(i),d=formatRe(a),h=formatLookup(a),g=formatRe(o),f=formatLookup(o),p=formatRe(s),m=formatLookup(s),y=formatRe(l),b=formatLookup(l),v={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},x={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},I={a:function(t,e,r){var n=g.exec(e.slice(r));return n?(t.w=f[n[0].toLowerCase()],r+n[0].length):-1},A:function(t,e,r){var n=d.exec(e.slice(r));return n?(t.w=h[n[0].toLowerCase()],r+n[0].length):-1},b:function(t,e,r){var n=y.exec(e.slice(r));return n?(t.m=b[n[0].toLowerCase()],r+n[0].length):-1},B:function(t,e,r){var n=p.exec(e.slice(r));return n?(t.m=m[n[0].toLowerCase()],r+n[0].length):-1},c:function(t,r,n){return F(t,e,r,n)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function(t,e,r){var n=c.exec(e.slice(r));return n?(t.p=u[n[0].toLowerCase()],r+n[0].length):-1},q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function(t,e,n){return F(t,r,e,n)},X:function(t,e,r){return F(t,n,e,r)},y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function B(t,e){return function(r){var n,i,a,o=[],s=-1,l=0,c=t.length;for(r instanceof Date||(r=new Date(+r));++s<c;)37===t.charCodeAt(s)&&(o.push(t.slice(l,s)),null!=(i=pads[n=t.charAt(++s)])?n=t.charAt(++s):i="e"===n?" ":"0",(a=e[n])&&(n=a(r,i)),o.push(n),l=s+1);return o.push(t.slice(l,s)),o.join("")}}function C(t,e){return function(r){var n,i,a=newDate(1900,void 0,1);if(F(a,t,r+="",0)!=r.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(n=utcDate(newDate(a.y,0,1))).getUTCDay(),n=i>4||0===i?utcMonday.ceil(n):utcMonday(n),n=utcDay$1.offset(n,7*(a.V-1)),a.y=n.getUTCFullYear(),a.m=n.getUTCMonth(),a.d=n.getUTCDate()+(a.w+6)%7):(i=(n=localDate(newDate(a.y,0,1))).getDay(),n=i>4||0===i?monday.ceil(n):monday(n),n=timeDay.offset(n,7*(a.V-1)),a.y=n.getFullYear(),a.m=n.getMonth(),a.d=n.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?utcDate(newDate(a.y,0,1)).getUTCDay():localDate(newDate(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,utcDate(a)):localDate(a)}}function F(t,e,r,n){for(var i,a,o=0,s=e.length,l=r.length;o<s;){if(n>=l)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=I[i in pads?e.charAt(o++):i])||(n=a(t,r,n))<0)return-1}else if(i!=r.charCodeAt(n++))return-1}return n}return v.x=B(r,v),v.X=B(n,v),v.c=B(e,v),x.x=B(r,x),x.X=B(n,x),x.c=B(e,x),{format:function(t){var e=B(t+="",v);return e.toString=function(){return t},e},parse:function(t){var e=C(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=B(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=C(t+="",!0);return e.toString=function(){return t},e}}}var locale$1,timeFormat,timeParse,utcFormat$1,utcParse,pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(e)+i:i)}function requote(t){return t.replace(requoteRe,"\\$&")}function formatRe(t){return new RegExp("^(?:"+t.map(requote).join("|")+")","i")}function formatLookup(t){for(var e={},r=-1,n=t.length;++r<n;)e[t[r].toLowerCase()]=r;return e}function parseWeekdayNumberSunday(t,e,r){var n=numberRe.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function parseWeekdayNumberMonday(t,e,r){var n=numberRe.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function parseWeekNumberSunday(t,e,r){var n=numberRe.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function parseWeekNumberISO(t,e,r){var n=numberRe.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function parseWeekNumberMonday(t,e,r){var n=numberRe.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function parseFullYear(t,e,r){var n=numberRe.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function parseYear(t,e,r){var n=numberRe.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function parseZone(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function parseQuarter(t,e,r){var n=numberRe.exec(e.slice(r,r+1));return n?(t.q=3*n[0]-3,r+n[0].length):-1}function parseMonthNumber(t,e,r){var n=numberRe.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function parseDayOfMonth(t,e,r){var n=numberRe.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function parseDayOfYear(t,e,r){var n=numberRe.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function parseHour24(t,e,r){var n=numberRe.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function parseMinutes(t,e,r){var n=numberRe.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function parseSeconds(t,e,r){var n=numberRe.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function parseMilliseconds(t,e,r){var n=numberRe.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function parseMicroseconds(t,e,r){var n=numberRe.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function parseLiteralPercent(t,e,r){var n=percentRe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function parseUnixTimestamp(t,e,r){var n=numberRe.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function parseUnixTimestampSeconds(t,e,r){var n=numberRe.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function formatDayOfMonth(t,e){return pad(t.getDate(),e,2)}function formatHour24(t,e){return pad(t.getHours(),e,2)}function formatHour12(t,e){return pad(t.getHours()%12||12,e,2)}function formatDayOfYear(t,e){return pad(1+timeDay.count(timeYear(t),t),e,3)}function formatMilliseconds(t,e){return pad(t.getMilliseconds(),e,3)}function formatMicroseconds(t,e){return formatMilliseconds(t,e)+"000"}function formatMonthNumber(t,e){return pad(t.getMonth()+1,e,2)}function formatMinutes(t,e){return pad(t.getMinutes(),e,2)}function formatSeconds(t,e){return pad(t.getSeconds(),e,2)}function formatWeekdayNumberMonday(t){var e=t.getDay();return 0===e?7:e}function formatWeekNumberSunday(t,e){return pad(sunday.count(timeYear(t)-1,t),e,2)}function dISO(t){var e=t.getDay();return e>=4||0===e?thursday(t):thursday.ceil(t)}function formatWeekNumberISO(t,e){return t=dISO(t),pad(thursday.count(timeYear(t),t)+(4===timeYear(t).getDay()),e,2)}function formatWeekdayNumberSunday(t){return t.getDay()}function formatWeekNumberMonday(t,e){return pad(monday.count(timeYear(t)-1,t),e,2)}function formatYear(t,e){return pad(t.getFullYear()%100,e,2)}function formatYearISO(t,e){return pad((t=dISO(t)).getFullYear()%100,e,2)}function formatFullYear(t,e){return pad(t.getFullYear()%1e4,e,4)}function formatFullYearISO(t,e){var r=t.getDay();return pad((t=r>=4||0===r?thursday(t):thursday.ceil(t)).getFullYear()%1e4,e,4)}function formatZone(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+pad(e/60|0,"0",2)+pad(e%60,"0",2)}function formatUTCDayOfMonth(t,e){return pad(t.getUTCDate(),e,2)}function formatUTCHour24(t,e){return pad(t.getUTCHours(),e,2)}function formatUTCHour12(t,e){return pad(t.getUTCHours()%12||12,e,2)}function formatUTCDayOfYear(t,e){return pad(1+utcDay$1.count(utcYear$1(t),t),e,3)}function formatUTCMilliseconds(t,e){return pad(t.getUTCMilliseconds(),e,3)}function formatUTCMicroseconds(t,e){return formatUTCMilliseconds(t,e)+"000"}function formatUTCMonthNumber(t,e){return pad(t.getUTCMonth()+1,e,2)}function formatUTCMinutes(t,e){return pad(t.getUTCMinutes(),e,2)}function formatUTCSeconds(t,e){return pad(t.getUTCSeconds(),e,2)}function formatUTCWeekdayNumberMonday(t){var e=t.getUTCDay();return 0===e?7:e}function formatUTCWeekNumberSunday(t,e){return pad(utcSunday.count(utcYear$1(t)-1,t),e,2)}function UTCdISO(t){var e=t.getUTCDay();return e>=4||0===e?utcThursday(t):utcThursday.ceil(t)}function formatUTCWeekNumberISO(t,e){return t=UTCdISO(t),pad(utcThursday.count(utcYear$1(t),t)+(4===utcYear$1(t).getUTCDay()),e,2)}function formatUTCWeekdayNumberSunday(t){return t.getUTCDay()}function formatUTCWeekNumberMonday(t,e){return pad(utcMonday.count(utcYear$1(t)-1,t),e,2)}function formatUTCYear(t,e){return pad(t.getUTCFullYear()%100,e,2)}function formatUTCYearISO(t,e){return pad((t=UTCdISO(t)).getUTCFullYear()%100,e,2)}function formatUTCFullYear(t,e){return pad(t.getUTCFullYear()%1e4,e,4)}function formatUTCFullYearISO(t,e){var r=t.getUTCDay();return pad((t=r>=4||0===r?utcThursday(t):utcThursday.ceil(t)).getUTCFullYear()%1e4,e,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(t){return+t}function formatUnixTimestampSeconds(t){return Math.floor(+t/1e3)}function defaultLocale$1(t){return locale$1=formatLocale$1(t),timeFormat=locale$1.format,timeParse=locale$1.parse,utcFormat$1=locale$1.utcFormat,utcParse=locale$1.utcParse,locale$1}defaultLocale$1({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var isoSpecifier="%Y-%m-%dT%H:%M:%S.%LZ";function formatIsoNative(t){return t.toISOString()}var formatIso=Date.prototype.toISOString?formatIsoNative:utcFormat$1(isoSpecifier),formatIso$1=formatIso;function parseIsoNative(t){var e=new Date(t);return isNaN(e)?null:e}var parseIso=+new Date("2000-01-01T00:00:00.000Z")?parseIsoNative:utcParse(isoSpecifier),parseIso$1=parseIso,src$1=Object.freeze({__proto__:null,timeFormatDefaultLocale:defaultLocale$1,get timeFormat(){return timeFormat},get timeParse(){return timeParse},get utcFormat(){return utcFormat$1},get utcParse(){return utcParse},timeFormatLocale:formatLocale$1,isoFormat:formatIso$1,isoParse:parseIso$1});function formatDecimal(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function formatDecimalParts(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function exponent(t){return(t=formatDecimalParts(Math.abs(t)))?t[1]:NaN}function formatGroup(t,e){return function(r,n){for(var i=r.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),a.push(r.substring(i-=s,i+s)),!((l+=s+1)>n));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function formatNumerals(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var prefixExponent,re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(t){if(!(e=re.exec(t)))throw new Error("invalid format: "+t);var e;return new FormatSpecifier({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function FormatSpecifier(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function formatTrim(t){t:for(var e,r=t.length,n=1,i=-1;n<r;++n)switch(t[n]){case".":i=e=n;break;case"0":0===i&&(i=n),e=n;break;default:if(!+t[n])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}function formatPrefixAuto(t,e){var r=formatDecimalParts(t,e);if(!r)return t+"";var n=r[0],i=r[1],a=i-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+formatDecimalParts(t,Math.max(0,e+a-1))[0]}function formatRounded(t,e){var r=formatDecimalParts(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var formatTypes={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:formatDecimal,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return formatRounded(100*t,e)},r:formatRounded,s:formatPrefixAuto,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function identity$3(t){return t}var locale,format$2,formatPrefix,map=Array.prototype.map,prefixes=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(t){var e=void 0===t.grouping||void 0===t.thousands?identity$3:formatGroup(map.call(t.grouping,Number),t.thousands+""),r=void 0===t.currency?"":t.currency[0]+"",n=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?identity$3:formatNumerals(map.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",s=void 0===t.minus?"-":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function c(t){var c=(t=formatSpecifier(t)).fill,u=t.align,d=t.sign,h=t.symbol,g=t.zero,f=t.width,p=t.comma,m=t.precision,y=t.trim,b=t.type;"n"===b?(p=!0,b="g"):formatTypes[b]||(void 0===m&&(m=12),y=!0,b="g"),(g||"0"===c&&"="===u)&&(g=!0,c="0",u="=");var v="$"===h?r:"#"===h&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",x="$"===h?n:/[%p]/.test(b)?o:"",I=formatTypes[b],B=/[defgprs%]/.test(b);function C(t){var r,n,o,h=v,C=x;if("c"===b)C=I(t)+C,t="";else{var F=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:I(Math.abs(t),m),y&&(t=formatTrim(t)),F&&0==+t&&"+"!==d&&(F=!1),h=(F?"("===d?d:s:"-"===d||"("===d?"":d)+h,C=("s"===b?prefixes[8+prefixExponent/3]:"")+C+(F&&"("===d?")":""),B)for(r=-1,n=t.length;++r<n;)if(48>(o=t.charCodeAt(r))||o>57){C=(46===o?i+t.slice(r+1):t.slice(r))+C,t=t.slice(0,r);break}}p&&!g&&(t=e(t,1/0));var A=h.length+t.length+C.length,Q=A<f?new Array(f-A+1).join(c):"";switch(p&&g&&(t=e(Q+t,Q.length?f-C.length:1/0),Q=""),u){case"<":t=h+t+C+Q;break;case"=":t=h+Q+t+C;break;case"^":t=Q.slice(0,A=Q.length>>1)+h+t+C+Q.slice(A);break;default:t=Q+h+t+C}return a(t)}return m=void 0===m?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),C.toString=function(){return t+""},C}return{format:c,formatPrefix:function(t,e){var r=c(((t=formatSpecifier(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(exponent(e)/3))),i=Math.pow(10,-n),a=prefixes[8+n/3];return function(t){return r(i*t)+a}}}}function defaultLocale(t){return locale=formatLocale(t),format$2=locale.format,formatPrefix=locale.formatPrefix,locale}function precisionFixed(t){return Math.max(0,-exponent(Math.abs(t)))}function precisionPrefix(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent(e)/3)))-exponent(Math.abs(t)))}function precisionRound(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,exponent(e)-exponent(t))+1}defaultLocale({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var src=Object.freeze({__proto__:null,formatDefaultLocale:defaultLocale,get format(){return format$2},get formatPrefix(){return formatPrefix},formatLocale:formatLocale,formatSpecifier:formatSpecifier,FormatSpecifier:FormatSpecifier,precisionFixed:precisionFixed,precisionPrefix:precisionPrefix,precisionRound:precisionRound}),isStringBlank=function(t){for(var e,r=t.length,n=0;n<r;n++)if(((e=t.charCodeAt(n))<9||e>13)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||e>8205)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0},fastIsnumeric=function(t){var e=typeof t;if("string"===e){var r=t;if(0===(t=+t)&&isStringBlank(r))return!1}else if("number"!==e)return!1;return t-t<1},numerical={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"â"},isArray$2=Array.isArray,ab=ArrayBuffer,dv=DataView;function isTypedArray(t){return ab.isView(t)&&!(t instanceof dv)}var isTypedArray_1=isTypedArray;function isArrayOrTypedArray$b(t){return isArray$2(t)||isTypedArray(t)}var isArrayOrTypedArray_1=isArrayOrTypedArray$b;function isArray1D(t){return!isArrayOrTypedArray$b(t[0])}var isArray1D_1=isArray1D,ensureArray=function(t,e){return isArray$2(t)||(t=[]),t.length=e,t},concat=function(){var t,e,r,n,i,a,o,s,l=[],c=!0,u=0;for(r=0;r<arguments.length;r++)(a=(n=arguments[r]).length)&&(e?l.push(n):(e=n,i=a),isArray$2(n)?t=!1:(c=!1,u?t!==n.constructor&&(t=!1):t=n.constructor),u+=a);if(!u)return[];if(!l.length)return e;if(c)return e.concat.apply(e,l);if(t){for((o=new t(u)).set(e),r=0;r<l.length;r++)n=l[r],o.set(n,i),i+=n.length;return o}for(o=new Array(u),s=0;s<e.length;s++)o[s]=e[s];for(r=0;r<l.length;r++){for(n=l[r],s=0;s<n.length;s++)o[i+s]=n[s];i+=s}return o},maxRowLength=function(t){return _rowLength(t,Math.max,0)},minRowLength=function(t){return _rowLength(t,Math.min,1/0)};function _rowLength(t,e,r){if(isArrayOrTypedArray$b(t)){if(isArrayOrTypedArray$b(t[0])){for(var n=r,i=0;i<t.length;i++)n=e(n,t[i].length);return n}return t.length}return 0}var array={isTypedArray:isTypedArray_1,isArrayOrTypedArray:isArrayOrTypedArray_1,isArray1D:isArray1D_1,ensureArray:ensureArray,concat:concat,maxRowLength:maxRowLength,minRowLength:minRowLength},isArrayOrTypedArray$a=array.isArrayOrTypedArray,nested_property=function(t,e){if(fastIsnumeric(e))e=String(e);else if("string"!=typeof e||"[-1]"===e.substr(e.length-4))throw"bad property string";for(var r,n,i,a=0,o=e.split(".");a<o.length;){if(r=String(o[a]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(r[1])o[a]=r[1];else{if(0!==a)throw"bad property string";o.splice(0,1)}for(n=r[2].substr(1,r[2].length-2).split("]["),i=0;i<n.length;i++)a++,o.splice(a,0,Number(n[i]))}a++}return"object"!=typeof t?badContainer(t,e,o):{set:npSet(t,o,e),get:npGet(t,o),astr:e,parts:o,obj:t}};function npGet(t,e){return function(){var r,n,i,a,o,s=t;for(a=0;a<e.length-1;a++){if(-1===(r=e[a])){for(n=!0,i=[],o=0;o<s.length;o++)i[o]=npGet(s[o],e.slice(a+1))(),i[o]!==i[0]&&(n=!1);return n?i[0]:i}if("number"==typeof r&&!isArrayOrTypedArray$a(s))return;if("object"!=typeof(s=s[r])||null===s)return}if("object"==typeof s&&null!==s&&null!==(i=s[e[a]]))return i}}var ARGS_PATTERN=/(^|\.)args\[/;function isDeletable(t,e){return void 0===t||null===t&&!e.match(ARGS_PATTERN)}function npSet(t,e,r){return function(n){var i,a,o=t,s="",l=isDeletable(n,r);for(a=0;a<e.length-1;a++){if("number"==typeof(i=e[a])&&!isArrayOrTypedArray$a(o))throw"array index but container is not an array";if(-1===i){if(l=!setArrayAll(o,e.slice(a+1),n,r))break;return}if(!checkNewContainer(o,i,e[a+1],l))break;if("object"!=typeof(o=o[i])||null===o)throw"container is not an object";s=joinPropStr(s,i)}if(l){if(a===e.length-1&&(delete o[e[a]],Array.isArray(o)&&+e[a]==o.length-1))for(;o.length&&void 0===o[o.length-1];)o.pop()}else o[e[a]]=n}}function joinPropStr(t,e){var r=e;return fastIsnumeric(e)?r="["+e+"]":t&&(r="."+e),t+r}function setArrayAll(t,e,r,n){var i,a=isArrayOrTypedArray$a(r),o=!0,s=r,l=n.replace("-1",0),c=!a&&isDeletable(r,l),u=e[0];for(i=0;i<t.length;i++)l=n.replace("-1",i),a&&(c=isDeletable(s=r[i%r.length],l)),c&&(o=!1),checkNewContainer(t,i,u,c)&&npSet(t[i],e,n.replace("-1",i))(s);return o}function checkNewContainer(t,e,r,n){if(void 0===t[e]){if(n)return!1;t[e]="number"==typeof r?[]:{}}return!0}function badContainer(t,e,r){return{set:function(){throw"bad container"},get:function(){},astr:e,parts:r,obj:t}}var SIMPLE_PROPERTY_REGEX=/^\w*$/,NONE=0,NAME=1,VALUE=2,BOTH=3,UNSET=4,keyed_container=function(t,e,r,n){var i,a,o;r=r||"name",n=n||"value";var s={};e&&e.length?(o=nested_property(t,e),a=o.get()):a=t,e=e||"";var l={};if(a)for(i=0;i<a.length;i++)l[a[i][r]]=i;var c=SIMPLE_PROPERTY_REGEX.test(n),u={set:function(t,e){var i=null===e?UNSET:NONE;if(!a){if(!o||i===UNSET)return;a=[],o.set(a)}var d=l[t];if(void 0===d){if(i===UNSET)return;i|=BOTH,d=a.length,l[t]=d}else e!==(c?a[d][n]:nested_property(a[d],n).get())&&(i|=VALUE);var h=a[d]=a[d]||{};return h[r]=t,c?h[n]=e:nested_property(h,n).set(e),null!==e&&(i&=~UNSET),s[d]=s[d]|i,u},get:function(t){if(a){var e=l[t];return void 0===e?void 0:c?a[e][n]:nested_property(a[e],n).get()}},rename:function(t,e){var n=l[t];return void 0===n||(s[n]=s[n]|NAME,l[e]=n,delete l[t],a[n][r]=e),u},remove:function(t){var e=l[t];if(void 0===e)return u;var o=a[e];if(Object.keys(o).length>2)return s[e]=s[e]|VALUE,u.set(t,null);if(c){for(i=e;i<a.length;i++)s[i]=s[i]|BOTH;for(i=e;i<a.length;i++)l[a[i][r]]--;a.splice(e,1),delete l[t]}else nested_property(o,n).set(null),s[e]=s[e]|VALUE|UNSET;return u},constructUpdate:function(){for(var t,i,o={},l=Object.keys(s),u=0;u<l.length;u++)i=l[u],t=e+"["+i+"]",a[i]?(s[i]&NAME&&(o[t+"."+r]=a[i][r]),s[i]&VALUE&&(o[t+"."+n]=c?s[i]&UNSET?null:a[i][n]:s[i]&UNSET?null:nested_property(a[i],n).get())):o[t]=null;return o}};return u},ASCEND=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,SIMPLEATTR=/^[^\.\[\]]+$/,relative_attr=function(t,e){for(;e;){var r=t.match(ASCEND);if(r)t=r[1];else{if(!t.match(SIMPLEATTR))throw new Error("bad relativeAttr call:"+[t,e]);t=""}if("^"!==e.charAt(0))break;e=e.slice(1)}return t&&"["!==e.charAt(0)?t+"."+e:t+e},is_plain_object=function(t){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(t):"[object Object]"===Object.prototype.toString.call(t)&&Object.getPrototypeOf(t).hasOwnProperty("hasOwnProperty")},to_log_range=function(t,e){if(t>0)return Math.log(t)/Math.LN10;var r=Math.log(Math.min(e[0],e[1]))/Math.LN10;return fastIsnumeric(r)||(r=Math.log(Math.max(e[0],e[1]))/Math.LN10-6),r},isArrayOrTypedArray$9=array.isArrayOrTypedArray,relink_private=function t(e,r){for(var n in r){var i=r[n],a=e[n];if(a!==i)if("_"===n.charAt(0)||"function"==typeof i){if(n in e)continue;e[n]=i}else if(isArrayOrTypedArray$9(i)&&isArrayOrTypedArray$9(a)&&is_plain_object(i[0])){if("customdata"===n||"ids"===n)continue;for(var o=Math.min(i.length,a.length),s=0;s<o;s++)a[s]!==i[s]&&is_plain_object(i[s])&&is_plain_object(a[s])&&t(a[s],i[s])}else is_plain_object(i)&&is_plain_object(a)&&(t(a,i),Object.keys(a).length||delete e[n])}};function mod$2(t,e){var r=t%e;return r<0?r+e:r}function modHalf$1(t,e){return Math.abs(t)>e/2?t-Math.round(t/e)*e:t}var mod_1={mod:mod$2,modHalf:modHalf$1},tinycolor=createCommonjsModule((function(t){!function(e){var r=/^\s+/,n=/\s+$/,i=0,a=e.round,o=e.min,s=e.max,l=e.random;function c(t,l){if(l=l||{},(t=t||"")instanceof c)return t;if(!(this instanceof c))return new c(t,l);var u=function(t){var i={r:0,g:0,b:0},a=1,l=null,c=null,u=null,d=!1,h=!1;"string"==typeof t&&(t=function(t){t=t.replace(r,"").replace(n,"").toLowerCase();var e,i=!1;if(_[t])t=_[t],i=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=X.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=X.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=X.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=X.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=X.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=X.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=X.hex8.exec(t))return{r:L(e[1]),g:L(e[2]),b:L(e[3]),a:G(e[4]),format:i?"name":"hex8"};if(e=X.hex6.exec(t))return{r:L(e[1]),g:L(e[2]),b:L(e[3]),format:i?"name":"hex"};if(e=X.hex4.exec(t))return{r:L(e[1]+""+e[1]),g:L(e[2]+""+e[2]),b:L(e[3]+""+e[3]),a:G(e[4]+""+e[4]),format:i?"name":"hex8"};if(e=X.hex3.exec(t))return{r:L(e[1]+""+e[1]),g:L(e[2]+""+e[2]),b:L(e[3]+""+e[3]),format:i?"name":"hex"};return!1}(t));"object"==typeof t&&(V(t.r)&&V(t.g)&&V(t.b)?(i=function(t,e,r){return{r:255*S(t,255),g:255*S(e,255),b:255*S(r,255)}}(t.r,t.g,t.b),d=!0,h="%"===String(t.r).substr(-1)?"prgb":"rgb"):V(t.h)&&V(t.s)&&V(t.v)?(l=R(t.s),c=R(t.v),i=function(t,r,n){t=6*S(t,360),r=S(r,100),n=S(n,100);var i=e.floor(t),a=t-i,o=n*(1-r),s=n*(1-a*r),l=n*(1-(1-a)*r),c=i%6;return{r:255*[n,s,o,o,l,n][c],g:255*[l,n,n,s,o,o][c],b:255*[o,o,l,n,n,s][c]}}(t.h,l,c),d=!0,h="hsv"):V(t.h)&&V(t.s)&&V(t.l)&&(l=R(t.s),u=R(t.l),i=function(t,e,r){var n,i,a;function o(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}if(t=S(t,360),e=S(e,100),r=S(r,100),0===e)n=i=a=r;else{var s=r<.5?r*(1+e):r+e-r*e,l=2*r-s;n=o(l,s,t+1/3),i=o(l,s,t),a=o(l,s,t-1/3)}return{r:255*n,g:255*i,b:255*a}}(t.h,l,u),d=!0,h="hsl"),t.hasOwnProperty("a")&&(a=t.a));return a=U(a),{ok:d,format:t.format||h,r:o(255,s(i.r,0)),g:o(255,s(i.g,0)),b:o(255,s(i.b,0)),a:a}}(t);this._originalInput=t,this._r=u.r,this._g=u.g,this._b=u.b,this._a=u.a,this._roundA=a(100*this._a)/100,this._format=l.format||u.format,this._gradientType=l.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=u.ok,this._tc_id=i++}function u(t,e,r){t=S(t,255),e=S(e,255),r=S(r,255);var n,i,a=s(t,e,r),l=o(t,e,r),c=(a+l)/2;if(a==l)n=i=0;else{var u=a-l;switch(i=c>.5?u/(2-a-l):u/(a+l),a){case t:n=(e-r)/u+(e<r?6:0);break;case e:n=(r-t)/u+2;break;case r:n=(t-e)/u+4}n/=6}return{h:n,s:i,l:c}}function d(t,e,r){t=S(t,255),e=S(e,255),r=S(r,255);var n,i,a=s(t,e,r),l=o(t,e,r),c=a,u=a-l;if(i=0===a?0:u/a,a==l)n=0;else{switch(a){case t:n=(e-r)/u+(e<r?6:0);break;case e:n=(r-t)/u+2;break;case r:n=(t-e)/u+4}n/=6}return{h:n,s:i,v:c}}function h(t,e,r,n){var i=[T(a(t).toString(16)),T(a(e).toString(16)),T(a(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function g(t,e,r,n){return[T(k(n)),T(a(t).toString(16)),T(a(e).toString(16)),T(a(r).toString(16))].join("")}function f(t,e){e=0===e?0:e||10;var r=c(t).toHsl();return r.s-=e/100,r.s=E(r.s),c(r)}function p(t,e){e=0===e?0:e||10;var r=c(t).toHsl();return r.s+=e/100,r.s=E(r.s),c(r)}function m(t){return c(t).desaturate(100)}function y(t,e){e=0===e?0:e||10;var r=c(t).toHsl();return r.l+=e/100,r.l=E(r.l),c(r)}function b(t,e){e=0===e?0:e||10;var r=c(t).toRgb();return r.r=s(0,o(255,r.r-a(-e/100*255))),r.g=s(0,o(255,r.g-a(-e/100*255))),r.b=s(0,o(255,r.b-a(-e/100*255))),c(r)}function v(t,e){e=0===e?0:e||10;var r=c(t).toHsl();return r.l-=e/100,r.l=E(r.l),c(r)}function x(t,e){var r=c(t).toHsl(),n=(r.h+e)%360;return r.h=n<0?360+n:n,c(r)}function I(t){var e=c(t).toHsl();return e.h=(e.h+180)%360,c(e)}function B(t){var e=c(t).toHsl(),r=e.h;return[c(t),c({h:(r+120)%360,s:e.s,l:e.l}),c({h:(r+240)%360,s:e.s,l:e.l})]}function C(t){var e=c(t).toHsl(),r=e.h;return[c(t),c({h:(r+90)%360,s:e.s,l:e.l}),c({h:(r+180)%360,s:e.s,l:e.l}),c({h:(r+270)%360,s:e.s,l:e.l})]}function F(t){var e=c(t).toHsl(),r=e.h;return[c(t),c({h:(r+72)%360,s:e.s,l:e.l}),c({h:(r+216)%360,s:e.s,l:e.l})]}function A(t,e,r){e=e||6,r=r||30;var n=c(t).toHsl(),i=360/r,a=[c(t)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,a.push(c(n));return a}function Q(t,e){e=e||6;for(var r=c(t).toHsv(),n=r.h,i=r.s,a=r.v,o=[],s=1/e;e--;)o.push(c({h:n,s:i,v:a})),a=(a+s)%1;return o}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,r,n,i=this.toRgb();return t=i.r/255,r=i.g/255,n=i.b/255,.2126*(t<=.03928?t/12.92:e.pow((t+.055)/1.055,2.4))+.7152*(r<=.03928?r/12.92:e.pow((r+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:e.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=U(t),this._roundA=a(100*this._a)/100,this},toHsv:function(){var t=d(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=d(this._r,this._g,this._b),e=a(360*t.h),r=a(100*t.s),n=a(100*t.v);return 1==this._a?"hsv("+e+", "+r+"%, "+n+"%)":"hsva("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=u(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=u(this._r,this._g,this._b),e=a(360*t.h),r=a(100*t.s),n=a(100*t.l);return 1==this._a?"hsl("+e+", "+r+"%, "+n+"%)":"hsla("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return h(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,r,n,i){var o=[T(a(t).toString(16)),T(a(e).toString(16)),T(a(r).toString(16)),T(k(n))];if(i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*S(this._r,255))+"%",g:a(100*S(this._g,255))+"%",b:a(100*S(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*S(this._r,255))+"%, "+a(100*S(this._g,255))+"%, "+a(100*S(this._b,255))+"%)":"rgba("+a(100*S(this._r,255))+"%, "+a(100*S(this._g,255))+"%, "+a(100*S(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(w[h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+g(this._r,this._g,this._b,this._a),r=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var i=c(t);r="#"+g(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+r+")"},toString:function(t){var e=!!t;t=t||this._format;var r=!1,n=this._a<1&&this._a>=0;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(r=this.toRgbString()),"prgb"===t&&(r=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(r=this.toHexString()),"hex3"===t&&(r=this.toHexString(!0)),"hex4"===t&&(r=this.toHex8String(!0)),"hex8"===t&&(r=this.toHex8String()),"name"===t&&(r=this.toName()),"hsl"===t&&(r=this.toHslString()),"hsv"===t&&(r=this.toHsvString()),r||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return c(this.toString())},_applyModification:function(t,e){var r=t.apply(null,[this].concat([].slice.call(e)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(y,arguments)},brighten:function(){return this._applyModification(b,arguments)},darken:function(){return this._applyModification(v,arguments)},desaturate:function(){return this._applyModification(f,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(A,arguments)},complement:function(){return this._applyCombination(I,arguments)},monochromatic:function(){return this._applyCombination(Q,arguments)},splitcomplement:function(){return this._applyCombination(F,arguments)},triad:function(){return this._applyCombination(B,arguments)},tetrad:function(){return this._applyCombination(C,arguments)}},c.fromRatio=function(t,e){if("object"==typeof t){var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]="a"===n?t[n]:R(t[n]));t=r}return c(t,e)},c.equals=function(t,e){return!(!t||!e)&&c(t).toRgbString()==c(e).toRgbString()},c.random=function(){return c.fromRatio({r:l(),g:l(),b:l()})},c.mix=function(t,e,r){r=0===r?0:r||50;var n=c(t).toRgb(),i=c(e).toRgb(),a=r/100;return c({r:(i.r-n.r)*a+n.r,g:(i.g-n.g)*a+n.g,b:(i.b-n.b)*a+n.b,a:(i.a-n.a)*a+n.a})},c.readability=function(t,r){var n=c(t),i=c(r);return(e.max(n.getLuminance(),i.getLuminance())+.05)/(e.min(n.getLuminance(),i.getLuminance())+.05)},c.isReadable=function(t,e,r){var n,i,a=c.readability(t,e);switch(i=!1,(n=function(t){var e,r;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),r=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==r&&"large"!==r&&(r="small");return{level:e,size:r}}(r)).level+n.size){case"AAsmall":case"AAAlarge":i=a>=4.5;break;case"AAlarge":i=a>=3;break;case"AAAsmall":i=a>=7}return i},c.mostReadable=function(t,e,r){var n,i,a,o,s=null,l=0;i=(r=r||{}).includeFallbackColors,a=r.level,o=r.size;for(var u=0;u<e.length;u++)(n=c.readability(t,e[u]))>l&&(l=n,s=c(e[u]));return c.isReadable(t,s,{level:a,size:o})||!i?s:(r.includeFallbackColors=!1,c.mostReadable(t,["#fff","#000"],r))};var _=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},w=c.hexNames=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}(_);function U(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function S(t,r){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=o(r,s(0,parseFloat(t))),n&&(t=parseInt(t*r,10)/100),e.abs(t-r)<1e-6?1:t%r/parseFloat(r)}function E(t){return o(1,s(0,t))}function L(t){return parseInt(t,16)}function T(t){return 1==t.length?"0"+t:""+t}function R(t){return t<=1&&(t=100*t+"%"),t}function k(t){return e.round(255*parseFloat(t)).toString(16)}function G(t){return L(t)/255}var N,M,D,X=(M="[\\s|\\(]+("+(N="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",D="[\\s|\\(]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",{CSS_UNIT:new RegExp(N),rgb:new RegExp("rgb"+M),rgba:new RegExp("rgba"+D),hsl:new RegExp("hsl"+M),hsla:new RegExp("hsla"+D),hsv:new RegExp("hsv"+M),hsva:new RegExp("hsva"+D),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function V(t){return!!X.CSS_UNIT.exec(t)}t.exports?t.exports=c:window.tinycolor=c}(Math)})),font_attributes=function(t){var e=t.editType,r=t.colorEditType;void 0===r&&(r=e);var n={family:{valType:"string",noBlank:!0,strict:!0,editType:e,description:["HTML font family - the typeface that will be applied by the web browser.","The web browser will only be able to apply a font if it is available on the system","which it operates. Provide multiple font families, separated by commas, to indicate","the preference in which to apply fonts if they aren't available on the system.","The Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise) generates images on a server,","where only a select number of","fonts are installed and supported.","These include *Arial*, *Balto*, *Courier New*, *Droid Sans*,, *Droid Serif*,","*Droid Sans Mono*, *Gravitas One*, *Old Standard TT*, *Open Sans*, *Overpass*,","*PT Sans Narrow*, *Raleway*, *Times New Roman*."].join(" ")},size:{valType:"number",min:1,editType:e},color:{valType:"color",editType:r},editType:e,description:""+(t.description||"")};return t.autoSize&&(n.size.dflt="auto"),t.autoColor&&(n.color.dflt="auto"),t.arrayOk&&(n.family.arrayOk=!0,n.size.arrayOk=!0,n.color.arrayOk=!0),n},constants$d={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"},font=font_attributes({editType:"none",description:"Sets the default hover label font used by all traces on the graph."});font.family.dflt=constants$d.HOVERFONT,font.size.dflt=constants$d.HOVERFONTSIZE;var layout_attributes$5={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"],description:["Determines the mode of single click interactions.","*event* is the default value and emits the `plotly_click`","event. In addition this mode emits the `plotly_selected` event","in drag modes *lasso* and *select*, but with no event data attached","(kept for compatibility reasons).","The *select* flag enables selecting single","data points via click. This mode also supports persistent selections,","meaning that pressing Shift while clicking, adds to / subtracts from an","existing selection. *select* with `hovermode`: *x* can be confusing, consider","explicitly setting `hovermode`: *closest* when using this feature.","Selection events are sent accordingly as long as *event* flag is set as well.","When the *event* flag is missing, `plotly_click` and `plotly_selected`","events are not fired."].join(" ")},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar",description:["Determines the mode of drag interactions.","*select* and *lasso* apply only to scatter traces with","markers or text. *orbit* and *turntable* apply only to","3D scenes."].join(" ")},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar",description:["Determines the mode of hover interactions.","If *closest*, a single hoverlabel will appear","for the *closest* point within the `hoverdistance`.","If *x* (or *y*), multiple hoverlabels will appear for multiple points","at the *closest* x- (or y-) coordinate within the `hoverdistance`,","with the caveat that no more than one hoverlabel will appear per trace.","If *x unified* (or *y unified*), a single hoverlabel will appear","multiple points at the closest x- (or y-) coordinate within the `hoverdistance`","with the caveat that no more than one hoverlabel will appear per trace.","In this mode, spikelines are enabled by default perpendicular to the specified axis.","If false, hover interactions are disabled."].join(" ")},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none",description:["Sets the default distance (in pixels) to look for data","to add hover labels (-1 means no cutoff, 0 means no looking for data).","This is only a real distance for hovering on point-like objects,","like scatter points. For area-like objects (bars, scatter fills, etc)","hovering is on inside the area and off outside, but these objects","will not supersede hover on point-like objects in case of conflict."].join(" ")},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none",description:["Sets the default distance (in pixels) to look for data to draw","spikelines to (-1 means no cutoff, 0 means no looking for data).","As with hoverdistance, distance does not apply to area-like objects.","In addition, some objects can be hovered on but will not generate","spikelines, such as scatter fills."].join(" ")},hoverlabel:{bgcolor:{valType:"color",editType:"none",description:["Sets the background color of all hover labels on graph"].join(" ")},bordercolor:{valType:"color",editType:"none",description:["Sets the border color of all hover labels on graph."].join(" ")},font:font,grouptitlefont:font_attributes({editType:"none",description:["Sets the font for group titles in hover (unified modes).","Defaults to `hoverlabel.font`."].join(" ")}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none",description:["Sets the horizontal alignment of the text content within hover label box.","Has an effect only if the hover label text spans more two or more lines"].join(" ")},namelength:{valType:"integer",min:-1,dflt:15,editType:"none",description:["Sets the default length (in number of characters) of the trace name in","the hover labels for all traces. -1 shows the whole name","regardless of length. 0-3 shows the first 0-3 characters, and","an integer >3 will show the whole name if it is less than that","many characters, but if it is longer, will truncate to","`namelength - 3` characters and add an ellipsis."].join(" ")},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",description:["When `dragmode` is set to *select*, this limits the selection of the drag to","horizontal, vertical or diagonal. *h* only allows horizontal selection,","*v* only vertical, *d* only diagonal and *any* sets no limit."].join(" "),editType:"none"}},isArray$1=Array.isArray;function primitivesLoopSplice(t,e){var r,n;for(r=0;r<t.length;r++){if(null!==(n=t[r])&&"object"==typeof n)return!1;void 0!==n&&(e[r]=n)}return!0}var extendFlat$i=function(){return _extend(arguments,!1,!1,!1)},extendDeep$1=function(){return _extend(arguments,!0,!1,!1)},extendDeepAll$1=function(){return _extend(arguments,!0,!0,!1)},extendDeepNoArrays=function(){return _extend(arguments,!0,!1,!0)};function _extend(t,e,r,n){var i,a,o,s,l,c,u=t[0],d=t.length;if(2===d&&isArray$1(u)&&isArray$1(t[1])&&0===u.length){if(primitivesLoopSplice(t[1],u))return u;u.splice(0,u.length)}for(var h=1;h<d;h++)for(a in i=t[h])o=u[a],s=i[a],n&&isArray$1(s)?u[a]=s:e&&s&&(is_plain_object(s)||(l=isArray$1(s)))?(l?(l=!1,c=o&&isArray$1(o)?o:[]):c=o&&is_plain_object(o)?o:{},u[a]=_extend([c,s],e,r,n)):(void 0!==s||r)&&(u[a]=s);return u}var extend={extendFlat:extendFlat$i,extendDeep:extendDeep$1,extendDeepAll:extendDeepAll$1,extendDeepNoArrays:extendDeepNoArrays},hoverLabelAttrs=layout_attributes$5.hoverlabel,extendFlat$h=extend.extendFlat,attributes$s={hoverlabel:{bgcolor:extendFlat$h({},hoverLabelAttrs.bgcolor,{arrayOk:!0,description:"Sets the background color of the hover labels for this trace"}),bordercolor:extendFlat$h({},hoverLabelAttrs.bordercolor,{arrayOk:!0,description:"Sets the border color of the hover labels for this trace."}),font:font_attributes({arrayOk:!0,editType:"none",description:"Sets the font used in hover labels."}),align:extendFlat$h({},hoverLabelAttrs.align,{arrayOk:!0}),namelength:extendFlat$h({},hoverLabelAttrs.namelength,{arrayOk:!0}),editType:"none"}},attributes$r={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc",description:["Determines whether or not this trace is visible.","If *legendonly*, the trace is not drawn,","but can appear as a legend item","(provided that the legend itself is visible)."].join(" ")},showlegend:{valType:"boolean",dflt:!0,editType:"style",description:["Determines whether or not an item corresponding to this","trace is shown in the legend."].join(" ")},legendgroup:{valType:"string",dflt:"",editType:"style",description:["Sets the legend group for this trace.","Traces part of the same legend group hide/show at the same time","when toggling legend items."].join(" ")},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style",description:["Sets the title of the legend group."].join(" ")},font:font_attributes({editType:"style",description:["Sets this legend group's title font."].join(" ")}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style",description:["Sets the legend rank for this trace.","Items and groups with smaller ranks are presented on top/left side while","with `*reversed* `legend.traceorder` they are on bottom/right side.","The default legendrank is 1000,","so that you can use ranks less than 1000 to place certain items before all unranked items,","and ranks greater than 1000 to go after all unranked items."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style",description:"Sets the opacity of the trace."},name:{valType:"string",editType:"style",description:["Sets the trace name.","The trace name appear as the legend item and on hover."].join(" ")},uid:{valType:"string",editType:"plot",anim:!0,description:["Assign an id to this trace,","Use this to provide object constancy between traces during animations","and transitions."].join(" ")},ids:{valType:"data_array",editType:"calc",anim:!0,description:["Assigns id labels to each datum.","These ids for object constancy of data points during animation.","Should be an array of strings, not numbers or any other type."].join(" ")},customdata:{valType:"data_array",editType:"calc",description:["Assigns extra data each datum.","This may be useful when listening to hover, click and selection events.","Note that, *scatter* traces also appends customdata items in the markers","DOM elements"].join(" ")},meta:{valType:"any",arrayOk:!0,editType:"plot",description:["Assigns extra meta information associated with this trace","that can be used in various text attributes.","Attributes such as trace `name`, graph, axis and colorbar `title.text`, annotation `text`","`rangeselector`, `updatemenues` and `sliders` `label` text","all support `meta`.","To access the trace `meta` values in an attribute in the same trace, simply use","`%{meta[i]}` where `i` is the index or key of the `meta`","item in question.","To access trace `meta` in layout attributes, use","`%{data[n[.meta[i]}` where `i` is the index or key of the `meta`","and `n` is the trace index."].join(" ")},selectedpoints:{valType:"any",editType:"calc",description:["Array containing integer indices of selected points.","Has an effect only for traces that support selections.","Note that an empty array means an empty selection where the `unselected`","are turned on for all points, whereas, any other non-array values means no","selection all where the `selected` and `unselected` styles have no effect."].join(" ")},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none",description:["Determines which trace information appear on hover.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired."].join(" ")},hoverlabel:attributes$s.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc",description:["The stream id number links a data trace on a plot with a stream.","See https://chart-studio.plotly.com/settings for more details."].join(" ")},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc",description:["Sets the maximum number of points to keep on the plots from an","incoming stream.","If `maxpoints` is set to *50*, only the newest 50 points will","be displayed on the plot."].join(" ")},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc",description:["WARNING: All transforms are deprecated and may be removed from the API in next major version.","An array of operations that manipulate the trace data,","for example filtering or sorting the data arrays."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of some user-driven changes to the trace:","`constraintrange` in `parcoords` traces, as well as some","`editable: true` modifications such as `name` and `colorbar.title`.","Defaults to `layout.uirevision`.","Note that other user-driven trace attribute changes are controlled","by `layout` attributes:","`trace.visible` is controlled by `layout.legend.uirevision`,","`selectedpoints` is controlled by `layout.selectionrevision`,","and `colorbar.(x|y)` (accessible with `config: {editable: true}`)","is controlled by `layout.editrevision`.","Trace changes are tracked by `uid`, which only falls back on trace","index if no `uid` is provided. So if your app can add/remove traces","before the end of the `data` array, such that the same trace has a","different index, you can still preserve user-driven changes if you","give each trace a `uid` that stays with it as it moves."].join(" ")}},scales$1={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},defaultScale=scales$1.RdBu;function getScale(t,e){if(e||(e=defaultScale),!t)return e;function r(){try{t=scales$1[t]||JSON.parse(t)}catch(r){t=e}}return"string"==typeof t&&(r(),"string"==typeof t&&r()),isValidScaleArray(t)?t:e}function isValidScaleArray(t){var e=0;if(!Array.isArray(t)||t.length<2)return!1;if(!t[0]||!t[t.length-1])return!1;if(0!=+t[0][0]||1!=+t[t.length-1][0])return!1;for(var r=0;r<t.length;r++){var n=t[r];if(2!==n.length||+n[0]<e||!tinycolor(n[1]).isValid())return!1;e=+n[0]}return!0}function isValidScale$2(t){return void 0!==scales$1[t]||isValidScaleArray(t)}var scales_1={scales:scales$1,defaultScale:defaultScale,get:getScale,isValid:isValidScale$2},defaults$m=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],defaultLine="#444",lightLine="#eee",background="#fff",borderLine="#BEC8D9",lightFraction$1=1e3/11,attributes$q={defaults:defaults$m,defaultLine:defaultLine,lightLine:lightLine,background:background,borderLine:borderLine,lightFraction:lightFraction$1},color_1=createCommonjsModule((function(t){var e=array.isTypedArray,r=t.exports={};r.defaults=attributes$q.defaults;var n=r.defaultLine=attributes$q.defaultLine;r.lightLine=attributes$q.lightLine;var i=r.background=attributes$q.background;function a(t){if(fastIsnumeric(t)||"string"!=typeof t)return t;var e=t.trim();if("rgb"!==e.substr(0,3))return t;var r=e.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return t;var n=r[1].trim().split(/\s*[\s,]\s*/),i="a"===e.charAt(3)&&4===n.length;if(!i&&3!==n.length)return t;for(var a=0;a<n.length;a++){if(!n[a].length)return t;if(n[a]=Number(n[a]),!(n[a]>=0))return t;if(3===a)n[a]>1&&(n[a]=1);else if(n[a]>=1)return t}var o=Math.round(255*n[0])+", "+Math.round(255*n[1])+", "+Math.round(255*n[2]);return i?"rgba("+o+", "+n[3]+")":"rgb("+o+")"}r.tinyRGB=function(t){var e=t.toRgb();return"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+")"},r.rgb=function(t){return r.tinyRGB(tinycolor(t))},r.opacity=function(t){return t?tinycolor(t).getAlpha():0},r.addOpacity=function(t,e){var r=tinycolor(t).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+e+")"},r.combine=function(t,e){var r=tinycolor(t).toRgb();if(1===r.a)return tinycolor(t).toRgbString();var n=tinycolor(e||i).toRgb(),a=1===n.a?n:{r:255*(1-n.a)+n.r*n.a,g:255*(1-n.a)+n.g*n.a,b:255*(1-n.a)+n.b*n.a},o={r:a.r*(1-r.a)+r.r*r.a,g:a.g*(1-r.a)+r.g*r.a,b:a.b*(1-r.a)+r.b*r.a};return tinycolor(o).toRgbString()},r.contrast=function(t,e,a){var o=tinycolor(t);return 1!==o.getAlpha()&&(o=tinycolor(r.combine(t,i))),(o.isDark()?e?o.lighten(e):i:a?o.darken(a):n).toString()},r.stroke=function(t,e){var n=tinycolor(e);t.style({stroke:r.tinyRGB(n),"stroke-opacity":n.getAlpha()})},r.fill=function(t,e){var n=tinycolor(e);t.style({fill:r.tinyRGB(n),"fill-opacity":n.getAlpha()})},r.clean=function(t){if(t&&"object"==typeof t){var n,i,o,s,l=Object.keys(t);for(n=0;n<l.length;n++)if(s=t[o=l[n]],"color"===o.substr(o.length-5))if(Array.isArray(s))for(i=0;i<s.length;i++)s[i]=a(s[i]);else t[o]=a(s);else if("colorscale"===o.substr(o.length-10)&&Array.isArray(s))for(i=0;i<s.length;i++)Array.isArray(s[i])&&(s[i][1]=a(s[i][1]));else if(Array.isArray(s)){var c=s[0];if(!Array.isArray(c)&&c&&"object"==typeof c)for(i=0;i<s.length;i++)r.clean(s[i])}else s&&"object"==typeof s&&!e(s)&&r.clean(s)}}})),interactions={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2},counter=function(t,e,r,n){var i=(e||"")+(r?"":"$"),a=!1===n?"":"^";return"xy"===t?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+i):new RegExp(a+t+"([2-9]|[1-9][0-9]+)?"+i)},regex={counter:counter},coerce=createCommonjsModule((function(t,e){var r=interactions.DESELECTDIM,n=regex.counter,i=mod_1.modHalf,a=array.isArrayOrTypedArray;function o(t,r){var n=e.valObjectMeta[r.valType];if(r.arrayOk&&a(t))return!0;if(n.validateFunction)return n.validateFunction(t,r);var i={},o=i,s={set:function(t){o=t}};return n.coerceFunction(t,s,i,r),o!==i}e.valObjectMeta={data_array:{description:["An {array} of data.","The value MUST be an {array}, or we ignore it.","Note that typed arrays (e.g. Float32Array) are supported."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(t,e,r){a(t)?e.set(t):void 0!==r&&e.set(r)}},enumerated:{description:["Enumerated value type. The available values are listed","in `values`."].join(" "),requiredOpts:["values"],otherOpts:["dflt","coerceNumber","arrayOk"],coerceFunction:function(t,e,r,n){n.coerceNumber&&(t=+t),-1===n.values.indexOf(t)?e.set(r):e.set(t)},validateFunction:function(t,e){e.coerceNumber&&(t=+t);for(var r=e.values,n=0;n<r.length;n++){var i=String(r[n]);if("/"===i.charAt(0)&&"/"===i.charAt(i.length-1)){if(new RegExp(i.substr(1,i.length-2)).test(t))return!0}else if(t===r[n])return!0}return!1}},boolean:{description:"A boolean (true/false) value.",requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(t,e,r){!0===t||!1===t?e.set(t):e.set(r)}},number:{description:["A number or a numeric value","(e.g. a number inside a string).","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk"],coerceFunction:function(t,e,r,n){!fastIsnumeric(t)||void 0!==n.min&&t<n.min||void 0!==n.max&&t>n.max?e.set(r):e.set(+t)}},integer:{description:["An integer or an integer inside a string.","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk"],coerceFunction:function(t,e,r,n){t%1||!fastIsnumeric(t)||void 0!==n.min&&t<n.min||void 0!==n.max&&t>n.max?e.set(r):e.set(+t)}},string:{description:["A string value.","Numbers are converted to strings except for attributes with","`strict` set to true."].join(" "),requiredOpts:[],otherOpts:["dflt","noBlank","strict","arrayOk","values"],coerceFunction:function(t,e,r,n){if("string"!=typeof t){var i="number"==typeof t;!0!==n.strict&&i?e.set(String(t)):e.set(r)}else n.noBlank&&!t?e.set(r):e.set(t)}},color:{description:["A string describing color.","Supported formats:","- hex (e.g. '#d3d3d3')","- rgb (e.g. 'rgb(255, 0, 0)')","- rgba (e.g. 'rgb(255, 0, 0, 0.5)')","- hsl (e.g. 'hsl(0, 100%, 50%)')","- hsv (e.g. 'hsv(0, 100%, 100%)')","- named colors (full list: http://www.w3.org/TR/css3-color/#svg-color)"].join(" "),requiredOpts:[],otherOpts:["dflt","arrayOk"],coerceFunction:function(t,e,r){tinycolor(t).isValid()?e.set(t):e.set(r)}},colorlist:{description:["A list of colors.","Must be an {array} containing valid colors."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(t,e,r){Array.isArray(t)&&t.length&&t.every((function(t){return tinycolor(t).isValid()}))?e.set(t):e.set(r)}},colorscale:{description:["A Plotly colorscale either picked by a name:","(any of",Object.keys(scales_1.scales).join(", "),")","customized as an {array} of 2-element {arrays} where","the first element is the normalized color level value","(starting at *0* and ending at *1*),","and the second item is a valid color string."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(t,e,r){e.set(scales_1.get(t,r))}},angle:{description:["A number (in degree) between -180 and 180."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(t,e,r){"auto"===t?e.set("auto"):fastIsnumeric(t)?e.set(i(+t,360)):e.set(r)}},subplotid:{description:["An id string of a subplot type (given by dflt), optionally","followed by an integer >1. e.g. if dflt='geo', we can have","'geo', 'geo2', 'geo3', ..."].join(" "),requiredOpts:["dflt"],otherOpts:["regex"],coerceFunction:function(t,e,r,i){var a=i.regex||n(r);"string"==typeof t&&a.test(t)?e.set(t):e.set(r)},validateFunction:function(t,e){var r=e.dflt;return t===r||"string"==typeof t&&!!n(r).test(t)}},flaglist:{description:["A string representing a combination of flags","(order does not matter here).","Combine any of the available `flags` with *+*.","(e.g. ('lines+markers')).","Values in `extras` cannot be combined."].join(" "),requiredOpts:["flags"],otherOpts:["dflt","extras","arrayOk"],coerceFunction:function(t,e,r,n){if("string"==typeof t)if(-1===(n.extras||[]).indexOf(t)){for(var i=t.split("+"),a=0;a<i.length;){var o=i[a];-1===n.flags.indexOf(o)||i.indexOf(o)<a?i.splice(a,1):a++}i.length?e.set(i.join("+")):e.set(r)}else e.set(t);else e.set(r)}},any:{description:"Any type.",requiredOpts:[],otherOpts:["dflt","values","arrayOk"],coerceFunction:function(t,e,r){void 0===t?e.set(r):e.set(t)}},info_array:{description:["An {array} of plot information."].join(" "),requiredOpts:["items"],otherOpts:["dflt","freeLength","dimensions"],coerceFunction:function(t,r,n,i){function a(t,r,n){var i,a={set:function(t){i=t}};return void 0===n&&(n=r.dflt),e.valObjectMeta[r.valType].coerceFunction(t,a,n,r),i}var o=2===i.dimensions||"1-2"===i.dimensions&&Array.isArray(t)&&Array.isArray(t[0]);if(Array.isArray(t)){var s,l,c,u,d,h,g=i.items,f=[],p=Array.isArray(g),m=p&&o&&Array.isArray(g[0]),y=o&&p&&!m,b=p&&!y?g.length:t.length;if(n=Array.isArray(n)?n:[],o)for(s=0;s<b;s++)for(f[s]=[],c=Array.isArray(t[s])?t[s]:[],d=y?g.length:p?g[s].length:c.length,l=0;l<d;l++)u=y?g[l]:p?g[s][l]:g,void 0!==(h=a(c[l],u,(n[s]||[])[l]))&&(f[s][l]=h);else for(s=0;s<b;s++)void 0!==(h=a(t[s],p?g[s]:g,n[s]))&&(f[s]=h);r.set(f)}else r.set(n)},validateFunction:function(t,e){if(!Array.isArray(t))return!1;var r=e.items,n=Array.isArray(r),i=2===e.dimensions;if(!e.freeLength&&t.length!==r.length)return!1;for(var a=0;a<t.length;a++)if(i){if(!Array.isArray(t[a])||!e.freeLength&&t[a].length!==r[a].length)return!1;for(var s=0;s<t[a].length;s++)if(!o(t[a][s],n?r[a][s]:r))return!1}else if(!o(t[a],n?r[a]:r))return!1;return!0}}},e.coerce=function(t,r,n,i,s){var l=nested_property(n,i).get(),c=nested_property(t,i),u=nested_property(r,i),d=c.get(),h=r._template;if(void 0===d&&h&&(d=nested_property(h,i).get(),h=0),void 0===s&&(s=l.dflt),l.arrayOk&&a(d))return u.set(d),d;var g=e.valObjectMeta[l.valType].coerceFunction;g(d,u,s,l);var f=u.get();return h&&f===s&&!o(d,l)&&(g(d=nested_property(h,i).get(),u,s,l),f=u.get()),f},e.coerce2=function(t,r,n,i,a){var o=nested_property(t,i),s=e.coerce(t,r,n,i,a),l=o.get();return null!=l&&s},e.coerceFont=function(t,e,r){var n={};return r=r||{},n.family=t(e+".family",r.family),n.size=t(e+".size",r.size),n.color=t(e+".color",r.color),n},e.coercePattern=function(t,e,r,n){if(t(e+".shape")){t(e+".solidity"),t(e+".size");var i="overlay"===t(e+".fillmode");if(!n){var a=t(e+".bgcolor",i?r:void 0);t(e+".fgcolor",i?color_1.contrast(a):r)}t(e+".fgopacity",i?.5:1)}},e.coerceHoverinfo=function(t,r,n){var i,a=r._module.attributes,o=a.hoverinfo?a:attributes$r,s=o.hoverinfo;if(1===n._dataLength){var l="all"===s.dflt?s.flags.slice():s.dflt.split("+");l.splice(l.indexOf("name"),1),i=l.join("+")}return e.coerce(t,r,o,"hoverinfo",i)},e.coerceSelectionMarkerOpacity=function(t,e){if(t.marker){var n,i,o=t.marker.opacity;if(void 0!==o)a(o)||t.selected||t.unselected||(n=o,i=r*o),e("selected.marker.opacity",n),e("unselected.marker.opacity",i)}},e.validate=o})),configAttributes={staticPlot:{valType:"boolean",dflt:!1,description:["Determines whether the graphs are interactive or not.","If *false*, no interactivity, for export or image generation."].join(" ")},typesetMath:{valType:"boolean",dflt:!0,description:["Determines whether math should be typeset or not,","when MathJax (either v2 or v3) is present on the page."].join(" ")},plotlyServerURL:{valType:"string",dflt:"",description:["When set it determines base URL for","the 'Edit in Chart Studio' `showEditInChartStudio`/`showSendToCloud` mode bar button","and the showLink/sendData on-graph link.","To enable sending your data to Chart Studio Cloud, you need to","set both `plotlyServerURL` to 'https://chart-studio.plotly.com' and","also set `showSendToCloud` to true."].join(" ")},editable:{valType:"boolean",dflt:!1,description:["Determines whether the graph is editable or not.","Sets all pieces of `edits`","unless a separate `edits` config item overrides individual parts."].join(" ")},edits:{annotationPosition:{valType:"boolean",dflt:!1,description:["Determines if the main anchor of the annotation is editable.","The main anchor corresponds to the","text (if no arrow) or the arrow (which drags the whole thing leaving","the arrow length & direction unchanged)."].join(" ")},annotationTail:{valType:"boolean",dflt:!1,description:["Has only an effect for annotations with arrows.","Enables changing the length and direction of the arrow."].join(" ")},annotationText:{valType:"boolean",dflt:!1,description:"Enables editing annotation text."},axisTitleText:{valType:"boolean",dflt:!1,description:"Enables editing axis title text."},colorbarPosition:{valType:"boolean",dflt:!1,description:"Enables moving colorbars."},colorbarTitleText:{valType:"boolean",dflt:!1,description:"Enables editing colorbar title text."},legendPosition:{valType:"boolean",dflt:!1,description:"Enables moving the legend."},legendText:{valType:"boolean",dflt:!1,description:"Enables editing the trace name fields from the legend"},shapePosition:{valType:"boolean",dflt:!1,description:"Enables moving shapes."},titleText:{valType:"boolean",dflt:!1,description:"Enables editing the global layout title."}},autosizable:{valType:"boolean",dflt:!1,description:["Determines whether the graphs are plotted with respect to","layout.autosize:true and infer its container size."].join(" ")},responsive:{valType:"boolean",dflt:!1,description:["Determines whether to change the layout size when window is resized.","In v3, this option will be removed and will always be true."].join(" ")},fillFrame:{valType:"boolean",dflt:!1,description:["When `layout.autosize` is turned on, determines whether the graph","fills the container (the default) or the screen (if set to *true*)."].join(" ")},frameMargins:{valType:"number",dflt:0,min:0,max:.5,description:["When `layout.autosize` is turned on, set the frame margins","in fraction of the graph size."].join(" ")},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox",description:["Determines whether mouse wheel or two-finger scroll zooms is enable.","Turned on by default for gl3d, geo and mapbox subplots","(as these subplot types do not have zoombox via pan),","but turned off by default for cartesian subplots.","Set `scrollZoom` to *false* to disable scrolling for all subplots."].join(" ")},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize",description:["Sets the double click interaction mode.","Has an effect only in cartesian plots.","If *false*, double click is disable.","If *reset*, double click resets the axis ranges to their initial values.","If *autosize*, double click set the axis ranges to their autorange values.","If *reset+autosize*, the odd double clicks resets the axis ranges","to their initial values and even double clicks set the axis ranges","to their autorange values."].join(" ")},doubleClickDelay:{valType:"number",dflt:300,min:0,description:["Sets the delay for registering a double-click in ms.","This is the time interval (in ms) between first mousedown and","2nd mouseup to constitute a double-click.","This setting propagates to all on-subplot double clicks","(except for geo and mapbox) and on-legend double clicks."].join(" ")},showAxisDragHandles:{valType:"boolean",dflt:!0,description:["Set to *false* to omit cartesian axis pan/zoom drag handles."].join(" ")},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0,description:["Set to *false* to omit direct range entry at the pan/zoom drag points,","note that `showAxisDragHandles` must be enabled to have an effect."].join(" ")},showTips:{valType:"boolean",dflt:!0,description:["Determines whether or not tips are shown while interacting","with the resulting graphs."].join(" ")},showLink:{valType:"boolean",dflt:!1,description:["Determines whether a link to Chart Studio Cloud is displayed","at the bottom right corner of resulting graphs.","Use with `sendData` and `linkText`."].join(" ")},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0,description:["Sets the text appearing in the `showLink` link."].join(" ")},sendData:{valType:"boolean",dflt:!0,description:["If *showLink* is true, does it contain data","just link to a Chart Studio Cloud file?"].join(" ")},showSources:{valType:"any",dflt:!1,description:["Adds a source-displaying function to show sources on","the resulting graphs."].join(" ")},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover",description:["Determines the mode bar display mode.","If *true*, the mode bar is always visible.","If *false*, the mode bar is always hidden.","If *hover*, the mode bar is visible while the mouse cursor","is on the graph container."].join(" ")},showSendToCloud:{valType:"boolean",dflt:!1,description:['Should we include a ModeBar button, labeled "Edit in Chart Studio",',"that sends this chart to chart-studio.plotly.com (formerly plot.ly) or another plotly server","as specified by `plotlyServerURL` for editing, export, etc? Prior to version 1.43.0","this button was included by default, now it is opt-in using this flag.","Note that this button can (depending on `plotlyServerURL` being set) send your data","to an external server. However that server does not persist your data",'until you arrive at the Chart Studio and explicitly click "Save".'].join(" ")},showEditInChartStudio:{valType:"boolean",dflt:!1,description:["Same as `showSendToCloud`, but use a pencil icon instead of a floppy-disk.","Note that if both `showSendToCloud` and `showEditInChartStudio` are turned,","only `showEditInChartStudio` will be honored."].join(" ")},modeBarButtonsToRemove:{valType:"any",dflt:[],description:["Remove mode bar buttons by name.","See ./components/modebar/buttons.js for the list of names."].join(" ")},modeBarButtonsToAdd:{valType:"any",dflt:[],description:["Add mode bar button using config objects","See ./components/modebar/buttons.js for list of arguments.","To enable predefined modebar buttons e.g. shape drawing, hover and spikelines,","simply provide their string name(s). This could include:","*v1hovermode*, *hoverclosest*, *hovercompare*, *togglehover*, *togglespikelines*,","*drawline*, *drawopenpath*, *drawclosedpath*, *drawcircle*, *drawrect* and *eraseshape*.","Please note that these predefined buttons will only be shown if they are compatible","with all trace types used in a graph."].join(" ")},modeBarButtons:{valType:"any",dflt:!1,description:["Define fully custom mode bar buttons as nested array,","where the outer arrays represents button groups, and","the inner arrays have buttons config objects or names of default buttons","See ./components/modebar/buttons.js for more info."].join(" ")},toImageButtonOptions:{valType:"any",dflt:{},description:["Statically override options for toImage modebar button","allowed keys are format, filename, width, height, scale","see ../components/modebar/buttons.js"].join(" ")},displaylogo:{valType:"boolean",dflt:!0,description:["Determines whether or not the plotly logo is displayed","on the end of the mode bar."].join(" ")},watermark:{valType:"boolean",dflt:!1,description:"watermark the images with the company's logo"},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4,description:["Set the pixel ratio during WebGL image export.","This config option was formerly named `plot3dPixelRatio`","which is now deprecated."].join(" ")},setBackground:{valType:"any",dflt:"transparent",description:["Set function to add the background color (i.e. `layout.paper_color`)","to a different container.","This function take the graph div as first argument and the current background","color as second argument.","Alternatively, set to string *opaque* to ensure there is white behind it."].join(" ")},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/",description:["Set the URL to topojson used in geo charts.","By default, the topojson files are fetched from cdn.plot.ly.","For example, set this option to:","<path-to-plotly.js>/dist/topojson/","to render geographical feature using the topojson files","that ship with the plotly.js module."].join(" ")},mapboxAccessToken:{valType:"string",dflt:null,description:["Mapbox access token (required to plot mapbox trace types)","If using an Mapbox Atlas server, set this option to ''","so that plotly.js won't attempt to authenticate to the public Mapbox server."].join(" ")},logging:{valType:"integer",min:0,max:2,dflt:1,description:["Turn all console logging on or off (errors will be thrown)","This should ONLY be set via Plotly.setPlotConfig","Available levels:","0: no logs","1: warnings and errors, but not informational messages","2: verbose logs"].join(" ")},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0,description:["Set on-graph logging (notifier) level","This should ONLY be set via Plotly.setPlotConfig","Available levels:","0: no on-graph logs","1: warnings and errors, but not informational messages","2: verbose logs"].join(" ")},queueLength:{valType:"integer",min:0,dflt:0,description:"Sets the length of the undo/redo queue."},globalTransforms:{valType:"any",dflt:[],description:["Set global transform to be applied to all traces with no","specification needed"].join(" ")},locale:{valType:"string",dflt:"en-US",description:["Which localization should we use?","Should be a string like 'en' or 'en-US'."].join(" ")},locales:{valType:"any",dflt:{},description:["Localization definitions","Locales can be provided either here (specific to one chart) or globally","by registering them as modules.","Should be an object of objects {locale: {dictionary: {...}, format: {...}}}","{","  da: {","      dictionary: {'Reset axes': 'Nulstil aksler', ...},","      format: {months: [...], shortMonths: [...]}","  },","  ...","}","All parts are optional. When looking for translation or format fields, we","look first for an exact match in a config locale, then in a registered","module. If those fail, we strip off any regionalization ('en-US' -> 'en')","and try each (config, registry) again. The final fallback for translation","is untranslated (which is US English) and for formats is the base English","(the only consequence being the last fallback date format %x is DD/MM/YYYY","instead of MM/DD/YYYY). Currently `grouping` and `currency` are ignored","for our automatic number formatting, but can be used in custom formats."].join(" ")}},dfltConfig$3={};function crawl$1(t,e){for(var r in t){var n=t[r];n.valType?e[r]=n.dflt:(e[r]||(e[r]={}),crawl$1(n,e[r]))}}crawl$1(configAttributes,dfltConfig$3);var plot_config={configAttributes:configAttributes,dfltConfig:dfltConfig$3},NOTEDATA=[],notifier=function(t,e){if(-1===NOTEDATA.indexOf(t)){NOTEDATA.push(t);var r=1e3;fastIsnumeric(e)?r=e:"long"===e&&(r=3e3);var n=d3.select("body").selectAll(".plotly-notifier").data([0]);n.enter().append("div").classed("plotly-notifier",!0),n.selectAll(".notifier-note").data(NOTEDATA).enter().append("div").classed("notifier-note",!0).style("opacity",0).each((function(t){var n=d3.select(this);n.append("button").classed("notifier-close",!0).html("&times;").on("click",(function(){n.transition().call(i)}));for(var a=n.append("p"),o=t.split(/<br\s*\/?>/g),s=0;s<o.length;s++)s&&a.append("br"),a.append("span").text(o[s]);"stick"===e?n.transition().duration(350).style("opacity",1):n.transition().duration(700).style("opacity",1).transition().delay(r).call(i)}))}function i(t){t.duration(700).style("opacity",0).each("end",(function(t){var e=NOTEDATA.indexOf(t);-1!==e&&NOTEDATA.splice(e,1),d3.select(this).remove()}))}},loggers_1=createCommonjsModule((function(t){var e=plot_config.dfltConfig,r=t.exports={};r.log=function(){var t;if(e.logging>1){var r=["LOG:"];for(t=0;t<arguments.length;t++)r.push(arguments[t]);console.trace.apply(console,r)}if(e.notifyOnLogging>1){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);notifier(n.join("<br>"),"long")}},r.warn=function(){var t;if(e.logging>0){var r=["WARN:"];for(t=0;t<arguments.length;t++)r.push(arguments[t]);console.trace.apply(console,r)}if(e.notifyOnLogging>0){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);notifier(n.join("<br>"),"stick")}},r.error=function(){var t;if(e.logging>0){var r=["ERROR:"];for(t=0;t<arguments.length;t++)r.push(arguments[t]);console.error.apply(console,r)}if(e.notifyOnLogging>0){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);notifier(n.join("<br>"),"stick")}}})),noop$1=function(){},push_unique=function(t,e){if(e instanceof RegExp){for(var r=e.toString(),n=0;n<t.length;n++)if(t[n]instanceof RegExp&&t[n].toString()===r)return t;t.push(e)}else!e&&0!==e||-1!==t.indexOf(e)||t.push(e);return t},create_1=create;function create(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}var clone_1=clone;function clone(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}var copy_1=copy;function copy(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}var identity_1=identity$2;function identity$2(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}var transpose_1=transpose;function transpose(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}var invert_1=invert;function invert(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],g=e[11],f=e[12],p=e[13],m=e[14],y=e[15],b=r*s-n*o,v=r*l-i*o,x=r*c-a*o,I=n*l-i*s,B=n*c-a*s,C=i*c-a*l,F=u*p-d*f,A=u*m-h*f,Q=u*y-g*f,_=d*m-h*p,w=d*y-g*p,U=h*y-g*m,S=b*U-v*w+x*_+I*Q-B*A+C*F;return S?(S=1/S,t[0]=(s*U-l*w+c*_)*S,t[1]=(i*w-n*U-a*_)*S,t[2]=(p*C-m*B+y*I)*S,t[3]=(h*B-d*C-g*I)*S,t[4]=(l*Q-o*U-c*A)*S,t[5]=(r*U-i*Q+a*A)*S,t[6]=(m*x-f*C-y*v)*S,t[7]=(u*C-h*x+g*v)*S,t[8]=(o*w-s*Q+c*F)*S,t[9]=(n*Q-r*w-a*F)*S,t[10]=(f*B-p*x+y*b)*S,t[11]=(d*x-u*B-g*b)*S,t[12]=(s*A-o*_-l*F)*S,t[13]=(r*_-n*A+i*F)*S,t[14]=(p*v-f*I-m*b)*S,t[15]=(u*I-d*v+h*b)*S,t):null}var adjoint_1=adjoint;function adjoint(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],g=e[11],f=e[12],p=e[13],m=e[14],y=e[15];return t[0]=s*(h*y-g*m)-d*(l*y-c*m)+p*(l*g-c*h),t[1]=-(n*(h*y-g*m)-d*(i*y-a*m)+p*(i*g-a*h)),t[2]=n*(l*y-c*m)-s*(i*y-a*m)+p*(i*c-a*l),t[3]=-(n*(l*g-c*h)-s*(i*g-a*h)+d*(i*c-a*l)),t[4]=-(o*(h*y-g*m)-u*(l*y-c*m)+f*(l*g-c*h)),t[5]=r*(h*y-g*m)-u*(i*y-a*m)+f*(i*g-a*h),t[6]=-(r*(l*y-c*m)-o*(i*y-a*m)+f*(i*c-a*l)),t[7]=r*(l*g-c*h)-o*(i*g-a*h)+u*(i*c-a*l),t[8]=o*(d*y-g*p)-u*(s*y-c*p)+f*(s*g-c*d),t[9]=-(r*(d*y-g*p)-u*(n*y-a*p)+f*(n*g-a*d)),t[10]=r*(s*y-c*p)-o*(n*y-a*p)+f*(n*c-a*s),t[11]=-(r*(s*g-c*d)-o*(n*g-a*d)+u*(n*c-a*s)),t[12]=-(o*(d*m-h*p)-u*(s*m-l*p)+f*(s*h-l*d)),t[13]=r*(d*m-h*p)-u*(n*m-i*p)+f*(n*h-i*d),t[14]=-(r*(s*m-l*p)-o*(n*m-i*p)+f*(n*l-i*s)),t[15]=r*(s*h-l*d)-o*(n*h-i*d)+u*(n*l-i*s),t}var determinant_1=determinant;function determinant(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11],g=t[12],f=t[13],p=t[14],m=t[15];return(e*o-r*a)*(d*m-h*p)-(e*s-n*a)*(u*m-h*f)+(e*l-i*a)*(u*p-d*f)+(r*s-n*o)*(c*m-h*g)-(r*l-i*o)*(c*p-d*g)+(n*l-i*s)*(c*f-u*g)}var multiply_1=multiply;function multiply(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],g=e[10],f=e[11],p=e[12],m=e[13],y=e[14],b=e[15],v=r[0],x=r[1],I=r[2],B=r[3];return t[0]=v*n+x*s+I*d+B*p,t[1]=v*i+x*l+I*h+B*m,t[2]=v*a+x*c+I*g+B*y,t[3]=v*o+x*u+I*f+B*b,v=r[4],x=r[5],I=r[6],B=r[7],t[4]=v*n+x*s+I*d+B*p,t[5]=v*i+x*l+I*h+B*m,t[6]=v*a+x*c+I*g+B*y,t[7]=v*o+x*u+I*f+B*b,v=r[8],x=r[9],I=r[10],B=r[11],t[8]=v*n+x*s+I*d+B*p,t[9]=v*i+x*l+I*h+B*m,t[10]=v*a+x*c+I*g+B*y,t[11]=v*o+x*u+I*f+B*b,v=r[12],x=r[13],I=r[14],B=r[15],t[12]=v*n+x*s+I*d+B*p,t[13]=v*i+x*l+I*h+B*m,t[14]=v*a+x*c+I*g+B*y,t[15]=v*o+x*u+I*f+B*b,t}var translate_1=translate;function translate(t,e,r){var n,i,a,o,s,l,c,u,d,h,g,f,p=r[0],m=r[1],y=r[2];return e===t?(t[12]=e[0]*p+e[4]*m+e[8]*y+e[12],t[13]=e[1]*p+e[5]*m+e[9]*y+e[13],t[14]=e[2]*p+e[6]*m+e[10]*y+e[14],t[15]=e[3]*p+e[7]*m+e[11]*y+e[15]):(n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],g=e[10],f=e[11],t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=d,t[9]=h,t[10]=g,t[11]=f,t[12]=n*p+s*m+d*y+e[12],t[13]=i*p+l*m+h*y+e[13],t[14]=a*p+c*m+g*y+e[14],t[15]=o*p+u*m+f*y+e[15]),t}var scale_1=scale;function scale(t,e,r){var n=r[0],i=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}var rotate_1=rotate;function rotate(t,e,r,n){var i,a,o,s,l,c,u,d,h,g,f,p,m,y,b,v,x,I,B,C,F,A,Q,_,w=n[0],U=n[1],S=n[2],E=Math.sqrt(w*w+U*U+S*S);return Math.abs(E)<1e-6?null:(w*=E=1/E,U*=E,S*=E,i=Math.sin(r),o=1-(a=Math.cos(r)),s=e[0],l=e[1],c=e[2],u=e[3],d=e[4],h=e[5],g=e[6],f=e[7],p=e[8],m=e[9],y=e[10],b=e[11],v=w*w*o+a,x=U*w*o+S*i,I=S*w*o-U*i,B=w*U*o-S*i,C=U*U*o+a,F=S*U*o+w*i,A=w*S*o+U*i,Q=U*S*o-w*i,_=S*S*o+a,t[0]=s*v+d*x+p*I,t[1]=l*v+h*x+m*I,t[2]=c*v+g*x+y*I,t[3]=u*v+f*x+b*I,t[4]=s*B+d*C+p*F,t[5]=l*B+h*C+m*F,t[6]=c*B+g*C+y*F,t[7]=u*B+f*C+b*F,t[8]=s*A+d*Q+p*_,t[9]=l*A+h*Q+m*_,t[10]=c*A+g*Q+y*_,t[11]=u*A+f*Q+b*_,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}var rotateX_1=rotateX;function rotateX(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+c*n,t[5]=o*i+u*n,t[6]=s*i+d*n,t[7]=l*i+h*n,t[8]=c*i-a*n,t[9]=u*i-o*n,t[10]=d*i-s*n,t[11]=h*i-l*n,t}var rotateY_1=rotateY;function rotateY(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],l=e[3],c=e[8],u=e[9],d=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-c*n,t[1]=o*i-u*n,t[2]=s*i-d*n,t[3]=l*i-h*n,t[8]=a*n+c*i,t[9]=o*n+u*i,t[10]=s*n+d*i,t[11]=l*n+h*i,t}var rotateZ_1=rotateZ;function rotateZ(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],l=e[3],c=e[4],u=e[5],d=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+c*n,t[1]=o*i+u*n,t[2]=s*i+d*n,t[3]=l*i+h*n,t[4]=c*i-a*n,t[5]=u*i-o*n,t[6]=d*i-s*n,t[7]=h*i-l*n,t}var fromRotation_1=fromRotation;function fromRotation(t,e,r){var n,i,a,o=r[0],s=r[1],l=r[2],c=Math.sqrt(o*o+s*s+l*l);return Math.abs(c)<1e-6?null:(o*=c=1/c,s*=c,l*=c,n=Math.sin(e),a=1-(i=Math.cos(e)),t[0]=o*o*a+i,t[1]=s*o*a+l*n,t[2]=l*o*a-s*n,t[3]=0,t[4]=o*s*a-l*n,t[5]=s*s*a+i,t[6]=l*s*a+o*n,t[7]=0,t[8]=o*l*a+s*n,t[9]=s*l*a-o*n,t[10]=l*l*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}var fromRotationTranslation_1=fromRotationTranslation;function fromRotationTranslation(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=n+n,l=i+i,c=a+a,u=n*s,d=n*l,h=n*c,g=i*l,f=i*c,p=a*c,m=o*s,y=o*l,b=o*c;return t[0]=1-(g+p),t[1]=d+b,t[2]=h-y,t[3]=0,t[4]=d-b,t[5]=1-(u+p),t[6]=f+m,t[7]=0,t[8]=h+y,t[9]=f-m,t[10]=1-(u+g),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}var fromScaling_1=fromScaling;function fromScaling(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}var fromTranslation_1=fromTranslation;function fromTranslation(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}var fromXRotation_1=fromXRotation;function fromXRotation(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}var fromYRotation_1=fromYRotation;function fromYRotation(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}var fromZRotation_1=fromZRotation;function fromZRotation(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}var fromQuat_1=fromQuat;function fromQuat(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,s=n+n,l=i+i,c=r*o,u=n*o,d=n*s,h=i*o,g=i*s,f=i*l,p=a*o,m=a*s,y=a*l;return t[0]=1-d-f,t[1]=u+y,t[2]=h-m,t[3]=0,t[4]=u-y,t[5]=1-c-f,t[6]=g+p,t[7]=0,t[8]=h+m,t[9]=g-p,t[10]=1-c-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}var frustum_1=frustum;function frustum(t,e,r,n,i,a,o){var s=1/(r-e),l=1/(i-n),c=1/(a-o);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*l,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(i+n)*l,t[10]=(o+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*c,t[15]=0,t}var perspective_1=perspective;function perspective(t,e,r,n,i){var a=1/Math.tan(e/2),o=1/(n-i);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*o,t[15]=0,t}var perspectiveFromFieldOfView_1=perspectiveFromFieldOfView;function perspectiveFromFieldOfView(t,e,r,n){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+s),c=2/(i+a);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-s)*l*.5,t[9]=(i-a)*c*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}var ortho_1=ortho;function ortho(t,e,r,n,i,a,o){var s=1/(e-r),l=1/(n-i),c=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*l,t[14]=(o+a)*c,t[15]=1,t}var lookAt_1=lookAt;function lookAt(t,e,r,n){var i,a,o,s,l,c,u,d,h,g,f=e[0],p=e[1],m=e[2],y=n[0],b=n[1],v=n[2],x=r[0],I=r[1],B=r[2];return Math.abs(f-x)<1e-6&&Math.abs(p-I)<1e-6&&Math.abs(m-B)<1e-6?identity_1(t):(u=f-x,d=p-I,h=m-B,i=b*(h*=g=1/Math.sqrt(u*u+d*d+h*h))-v*(d*=g),a=v*(u*=g)-y*h,o=y*d-b*u,(g=Math.sqrt(i*i+a*a+o*o))?(i*=g=1/g,a*=g,o*=g):(i=0,a=0,o=0),s=d*o-h*a,l=h*i-u*o,c=u*a-d*i,(g=Math.sqrt(s*s+l*l+c*c))?(s*=g=1/g,l*=g,c*=g):(s=0,l=0,c=0),t[0]=i,t[1]=s,t[2]=u,t[3]=0,t[4]=a,t[5]=l,t[6]=d,t[7]=0,t[8]=o,t[9]=c,t[10]=h,t[11]=0,t[12]=-(i*f+a*p+o*m),t[13]=-(s*f+l*p+c*m),t[14]=-(u*f+d*p+h*m),t[15]=1,t)}var str_1=str;function str(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}var glMat4={create:create_1,clone:clone_1,copy:copy_1,identity:identity_1,transpose:transpose_1,invert:invert_1,adjoint:adjoint_1,determinant:determinant_1,multiply:multiply_1,translate:translate_1,scale:scale_1,rotate:rotate_1,rotateX:rotateX_1,rotateY:rotateY_1,rotateZ:rotateZ_1,fromRotation:fromRotation_1,fromRotationTranslation:fromRotationTranslation_1,fromScaling:fromScaling_1,fromTranslation:fromTranslation_1,fromXRotation:fromXRotation_1,fromYRotation:fromYRotation_1,fromZRotation:fromZRotation_1,fromQuat:fromQuat_1,frustum:frustum_1,perspective:perspective_1,perspectiveFromFieldOfView:perspectiveFromFieldOfView_1,ortho:ortho_1,lookAt:lookAt_1,str:str_1},matrix=createCommonjsModule((function(t,e){e.init2dArray=function(t,e){for(var r=new Array(t),n=0;n<t;n++)r[n]=new Array(e);return r},e.transposeRagged=function(t){var e,r,n=0,i=t.length;for(e=0;e<i;e++)n=Math.max(n,t[e].length);var a=new Array(n);for(e=0;e<n;e++)for(a[e]=new Array(i),r=0;r<i;r++)a[e][r]=t[r][e];return a},e.dot=function(t,r){if(!t.length||!r.length||t.length!==r.length)return null;var n,i,a=t.length;if(t[0].length)for(n=new Array(a),i=0;i<a;i++)n[i]=e.dot(t[i],r);else if(r[0].length){var o=e.transposeRagged(r);for(n=new Array(o.length),i=0;i<o.length;i++)n[i]=e.dot(t,o[i])}else for(n=0,i=0;i<a;i++)n+=t[i]*r[i];return n},e.translationMatrix=function(t,e){return[[1,0,t],[0,1,e],[0,0,1]]},e.rotationMatrix=function(t){var e=t*Math.PI/180;return[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]]},e.rotationXYMatrix=function(t,r,n){return e.dot(e.dot(e.translationMatrix(r,n),e.rotationMatrix(t)),e.translationMatrix(-r,-n))},e.apply3DTransform=function(t){return function(){var r=arguments,n=1===arguments.length?r[0]:[r[0],r[1],r[2]||0];return e.dot(t,[n[0],n[1],n[2],1]).slice(0,3)}},e.apply2DTransform=function(t){return function(){var r=arguments;3===r.length&&(r=r[0]);var n=1===arguments.length?r[0]:[r[0],r[1]];return e.dot(t,[n[0],n[1],1]).slice(0,2)}},e.apply2DTransform2=function(t){var r=e.apply2DTransform(t);return function(t){return r(t.slice(0,2)).concat(r(t.slice(2,4)))}},e.convertCssMatrix=function(t){if(t){var e=t.length;if(16===e)return t;if(6===e)return[t[0],t[1],0,0,t[2],t[3],0,0,0,0,1,0,t[4],t[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},e.inverseTransformMatrix=function(t){var e=[];return glMat4.invert(e,t),[[e[0],e[1],e[2],e[3]],[e[4],e[5],e[6],e[7]],[e[8],e[9],e[10],e[11]],[e[12],e[13],e[14],e[15]]]}}));function getGraphDiv(t){var e;if("string"==typeof t){if(null===(e=document.getElementById(t)))throw new Error("No DOM element with id '"+t+"' exists on the page.");return e}if(null==t)throw new Error("DOM element provided is null or undefined");return t}function isPlotDiv(t){var e=d3.select(t);return e.node()instanceof HTMLElement&&e.size()&&e.classed("js-plotly-plot")}function removeElement(t){var e=t&&t.parentNode;e&&e.removeChild(t)}function addStyleRule(t,e){addRelatedStyleRule("global",t,e)}function addRelatedStyleRule(t,e,r){var n="plotly.js-style-"+t,i=document.getElementById(n);i||((i=document.createElement("style")).setAttribute("id",n),i.appendChild(document.createTextNode("")),document.head.appendChild(i));var a=i.sheet;a.insertRule?a.insertRule(e+"{"+r+"}",0):a.addRule?a.addRule(e,r,0):loggers_1.warn("addStyleRule failed")}function deleteRelatedStyleRule(t){var e="plotly.js-style-"+t,r=document.getElementById(e);r&&removeElement(r)}function getFullTransformMatrix(t){var e=getElementAndAncestors(t),r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return e.forEach((function(t){var e=getElementTransformMatrix(t);if(e){var n=matrix.convertCssMatrix(e);r=glMat4.multiply(r,r,n)}})),r}function getElementTransformMatrix(t){var e=window.getComputedStyle(t,null),r=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform");return"none"===r?null:r.replace("matrix","").replace("3d","").slice(1,-1).split(",").map((function(t){return+t}))}function getElementAndAncestors(t){for(var e=[];isTransformableElement(t);)e.push(t),t=t.parentNode;return e}function isTransformableElement(t){return t&&(t instanceof Element||t instanceof HTMLElement)}function equalDomRects(t,e){return t&&e&&t.x===e.x&&t.y===e.y&&t.top===e.top&&t.left===e.left&&t.right===e.right&&t.bottom===e.bottom}var dom={getGraphDiv:getGraphDiv,isPlotDiv:isPlotDiv,removeElement:removeElement,addStyleRule:addStyleRule,addRelatedStyleRule:addRelatedStyleRule,deleteRelatedStyleRule:deleteRelatedStyleRule,getFullTransformMatrix:getFullTransformMatrix,getElementTransformMatrix:getElementTransformMatrix,getElementAndAncestors:getElementAndAncestors,equalDomRects:equalDomRects},animation_attributes={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"],description:["Describes how a new animate call interacts with currently-running","animations. If `immediate`, current animations are interrupted and","the new animation is started. If `next`, the current frame is allowed","to complete, after which the new animation is started. If `afterall`","all existing frames are animated to completion before the new animation","is started."].join(" ")},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward",description:["The direction in which to play the frames triggered by the animation call"].join(" ")},fromcurrent:{valType:"boolean",dflt:!1,description:["Play frames starting at the current frame instead of the beginning."].join(" ")},frame:{duration:{valType:"number",min:0,dflt:500,description:["The duration in milliseconds of each frame. If greater than the frame","duration, it will be limited to the frame duration."].join(" ")},redraw:{valType:"boolean",dflt:!0,description:["Redraw the plot at completion of the transition. This is desirable","for transitions that include properties that cannot be transitioned,","but may significantly slow down updates that do not require a full","redraw of the plot"].join(" ")}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none",description:["The duration of the transition, in milliseconds. If equal to zero,","updates are synchronous."].join(" ")},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none",description:"The easing function used for the transition"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none",description:["Determines whether the figure's layout or traces smoothly transitions","during updates that make both traces and layout change."].join(" ")}}},dash$4={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style",description:["Sets the dash style of lines. Set to a dash type string","(*solid*, *dot*, *dash*, *longdash*, *dashdot*, or *longdashdot*)","or a dash length list in px (eg *5px,10px,2px,2px*)."].join(" ")},pattern$2={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style",description:["Sets the shape of the pattern fill.","By default, no pattern is used for filling the area."].join(" ")},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style",description:["Determines whether `marker.color` should be used","as a default to `bgcolor` or a `fgcolor`."].join(" ")},bgcolor:{valType:"color",arrayOk:!0,editType:"style",description:["When there is no colorscale sets the color of background pattern fill.","Defaults to a `marker.color` background when `fillmode` is *overlay*.","Otherwise, defaults to a transparent background."].join(" ")},fgcolor:{valType:"color",arrayOk:!0,editType:"style",description:["When there is no colorscale sets the color of foreground pattern fill.","Defaults to a `marker.color` background when `fillmode` is *replace*.","Otherwise, defaults to dark grey or white","to increase contrast with the `bgcolor`."].join(" ")},fgopacity:{valType:"number",editType:"style",min:0,max:1,description:["Sets the opacity of the foreground pattern fill.","Defaults to a 0.5 when `fillmode` is *overlay*.","Otherwise, defaults to 1."].join(" ")},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style",description:["Sets the size of unit squares of the pattern fill in pixels,","which corresponds to the interval of repetition of the pattern."].join(" ")},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style",description:["Sets the solidity of the pattern fill.","Solidity is roughly the fraction of the area filled by the pattern.","Solidity of 0 shows only the background color without pattern","and solidty of 1 shows only the foreground color without pattern."].join(" ")},editType:"style",description:["Sets the pattern within the marker."].join(" ")},attributes$p={dash:dash$4,pattern:pattern$2},dash$3=attributes$p.dash,extendFlat$g=extend.extendFlat,attributes$o={newshape:{line:{color:{valType:"color",editType:"none",description:["Sets the line color.","By default uses either dark grey or white","to increase contrast with background color."].join(" ")},width:{valType:"number",min:0,dflt:4,editType:"none",description:"Sets the line width (in px)."},dash:extendFlat$g({},dash$3,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none",description:["Sets the color filling new shapes' interior.","Please note that if using a fillcolor with alpha greater than half,","drag inside the active shape starts moving the shape underneath,","otherwise a new shape could be started over."].join(" ")},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none",description:["Determines the path's interior.","For more info please visit https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none",description:"Sets the opacity of new shapes."},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none",description:"Specifies whether new shapes are drawn below or above traces."},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none",description:["When `dragmode` is set to *drawrect*, *drawline* or *drawcircle*","this limits the drag to be horizontal, vertical or diagonal.","Using *diagonal* there is no limit e.g. in drawing lines in any direction.","*ortho* limits the draw to be either horizontal or vertical.","*horizontal* allows horizontal extend.","*vertical* allows vertical extend."].join(" ")},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none",description:"Sets the color filling the active shape' interior."},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none",description:"Sets the opacity of the active shape."},editType:"none"}},pad_attributes=function(t){var e=t.editType;return{t:{valType:"number",dflt:0,editType:e,description:"The amount of padding (in px) along the top of the component."},r:{valType:"number",dflt:0,editType:e,description:"The amount of padding (in px) on the right side of the component."},b:{valType:"number",dflt:0,editType:e,description:"The amount of padding (in px) along the bottom of the component."},l:{valType:"number",dflt:0,editType:e,description:"The amount of padding (in px) on the left side of the component."},editType:e}},extendFlat$f=extend.extendFlat,globalFont=font_attributes({editType:"calc",description:["Sets the global font.","Note that fonts used in traces and other","layout components inherit from the global font."].join(" ")});globalFont.family.dflt='"Open Sans", verdana, arial, sans-serif',globalFont.size.dflt=12,globalFont.color.dflt=attributes$q.defaultLine;var layout_attributes$4={font:globalFont,title:{text:{valType:"string",editType:"layoutstyle",description:["Sets the plot's title.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:font_attributes({editType:"layoutstyle",description:["Sets the title font.","Note that the title's font used to be customized","by the now deprecated `titlefont` attribute."].join(" ")}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `x` refers to.","*container* spans the entire `width` of the plot.","*paper* refers to the width of the plotting area only."].join(" ")},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `y` refers to.","*container* spans the entire `height` of the plot.","*paper* refers to the height of the plotting area only."].join(" ")},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle",description:["Sets the x position with respect to `xref` in normalized","coordinates from *0* (left) to *1* (right)."].join(" ")},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle",description:["Sets the y position with respect to `yref` in normalized","coordinates from *0* (bottom) to *1* (top).","*auto* places the baseline of the title onto the","vertical center of the top margin."].join(" ")},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle",description:["Sets the title's horizontal alignment with respect to its x position.","*left* means that the title starts at x,","*right* means that the title ends at x","and *center* means that the title's center is at x.","*auto* divides `xref` by three and calculates the `xanchor`","value automatically based on the value of `x`."].join(" ")},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle",description:["Sets the title's vertical alignment with respect to its y position.","*top* means that the title's cap line is at y,","*bottom* means that the title's baseline is at y","and *middle* means that the title's midline is at y.","*auto* divides `yref` by three and calculates the `yanchor`","value automatically based on the value of `y`."].join(" ")},pad:extendFlat$f(pad_attributes({editType:"layoutstyle"}),{description:["Sets the padding of the title.","Each padding value only applies when the corresponding","`xanchor`/`yanchor` value is set accordingly. E.g. for left","padding to take effect, `xanchor` must be set to *left*.","The same rule applies if `xanchor`/`yanchor` is determined automatically.","Padding is muted if the respective anchor value is *middle*/*center*."].join(" ")}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot",description:["Determines how the font size for various text","elements are uniformed between each trace type.","If the computed text sizes were smaller than","the minimum size defined by `uniformtext.minsize`","using *hide* option hides the text; and","using *show* option shows the text without further downscaling.","Please note that if the size defined by `minsize` is greater than","the font size defined by trace, then the `minsize` is used."].join(" ")},minsize:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the minimum text size between traces of the same type."].join(" ")},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none",description:["Determines whether or not a layout width or height","that has been left undefined by the user","is initialized on each relayout.","Note that, regardless of this attribute,","an undefined layout width or height","is always initialized on the first call to plot."].join(" ")},width:{valType:"number",min:10,dflt:700,editType:"plot",description:["Sets the plot's width (in px)."].join(" ")},height:{valType:"number",min:10,dflt:450,editType:"plot",description:["Sets the plot's height (in px)."].join(" ")},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the left margin (in px)."},r:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the right margin (in px)."},t:{valType:"number",min:0,dflt:100,editType:"plot",description:"Sets the top margin (in px)."},b:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the bottom margin (in px)."},pad:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the amount of padding (in px)","between the plotting area and the axis lines"].join(" ")},autoexpand:{valType:"boolean",dflt:!0,editType:"plot",description:["Turns on/off margin expansion computations.","Legends, colorbars, updatemenus, sliders, axis rangeselector and rangeslider","are allowed to push the margins by defaults."].join(" ")},editType:"plot"},computed:{valType:"any",editType:"none",description:["Placeholder for exporting automargin-impacting values namely","`margin.t`, `margin.b`, `margin.l` and `margin.r` in *full-json* mode."].join(" ")},paper_bgcolor:{valType:"color",dflt:attributes$q.background,editType:"plot",description:"Sets the background color of the paper where the graph is drawn."},plot_bgcolor:{valType:"color",dflt:attributes$q.background,editType:"layoutstyle",description:["Sets the background color of the plotting area in-between x and y axes."].join(" ")},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc",description:["Using *strict* a numeric string in trace data is not converted to a number.","Using *convert types* a numeric string in trace data may be","treated as a number during automatic axis `type` detection.","This is the default value; however it could be overridden for individual axes."].join(" ")},separators:{valType:"string",editType:"plot",description:["Sets the decimal and thousand separators.","For example, *. * puts a '.' before decimals and a space","between thousands. In English locales, dflt is *.,* but","other locales may alter this default."].join(" ")},hidesources:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines whether or not a text link citing the data source is","placed at the bottom-right cored of the figure.","Has only an effect only on graphs that have been generated via","forked graphs from the Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise)."].join(" ")},showlegend:{valType:"boolean",editType:"legend",description:["Determines whether or not a legend is drawn.","Default is `true` if there is a trace to show and any of these:","a) Two or more traces would by default be shown in the legend.","b) One pie trace is shown in the legend.","c) One trace is explicitly given with `showlegend: true`."].join(" ")},colorway:{valType:"colorlist",dflt:attributes$q.defaults,editType:"calc",description:"Sets the default trace colors."},datarevision:{valType:"any",editType:"calc",description:["If provided, a changed value tells `Plotly.react` that","one or more data arrays has changed. This way you can modify","arrays in-place rather than making a complete new copy for an","incremental change.","If NOT provided, `Plotly.react` assumes that data arrays are","being treated as immutable, thus any data array with a","different identity from its predecessor contains new data."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Used to allow user interactions with the plot to persist after","`Plotly.react` calls that are unaware of these interactions.","If `uirevision` is omitted, or if it is given and it changed from","the previous `Plotly.react` call, the exact new figure is used.","If `uirevision` is truthy and did NOT change, any attribute","that has been affected by user interactions and did not receive a","different value in the new figure will keep the interaction value.","`layout.uirevision` attribute serves as the default for","`uirevision` attributes in various sub-containers. For finer","control you can set these sub-attributes directly. For example,","if your app separately controls the data on the x and y axes you","might set `xaxis.uirevision=*time*` and `yaxis.uirevision=*cost*`.","Then if only the y data is changed, you can update","`yaxis.uirevision=*quantity*` and the y axis range will reset but","the x axis range will retain any user-driven zoom."].join(" ")},editrevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in `editable: true`","configuration, other than trace names and axis titles.","Defaults to `layout.uirevision`."].join(" ")},selectionrevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in selected points","from all traces."].join(" ")},template:{valType:"any",editType:"calc",description:["Default attributes to be applied to the plot. Templates can be","created from existing plots using `Plotly.makeTemplate`, or","created manually. They should be objects with format:","`{layout: layoutTemplate, data: {[type]: [traceTemplate, ...]}, ...}`","`layoutTemplate` and `traceTemplate` are objects matching the","attribute structure of `layout` and a data trace. ","Trace templates are applied cyclically to traces of each type.","Container arrays (eg `annotations`) have special handling:","An object ending in `defaults` (eg `annotationdefaults`) is applied","to each array item. But if an item has a `templateitemname` key","we look in the template array for an item with matching `name` and","apply that instead. If no matching `name` is found we mark the item","invisible. Any named template item not referenced is appended to","the end of the array, so you can use this for a watermark annotation","or a logo image, for example. To omit one of these items on the plot,","make an item with matching `templateitemname` and `visible: false`."].join(" ")},newshape:attributes$o.newshape,activeshape:attributes$o.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot",description:["Assigns extra meta information that can be used in various `text` attributes.","Attributes such as the graph, axis and colorbar `title.text`, annotation `text`","`trace.name` in legend items, `rangeselector`, `updatemenus` and `sliders` `label` text","all support `meta`. One can access `meta` fields using template strings:","`%{meta[i]}` where `i` is the index of the `meta`","item in question.","`meta` can also be an object for example `{key: value}` which can be accessed","%{meta[key]}."].join(" ")},transition:extendFlat$f({},animation_attributes.transition,{description:["Sets transition options used during Plotly.react updates."].join(" "),editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle",description:["Value of `title` is no longer a simple *string* but a set of sub-attributes.","To set the contents of the title, please use `title.text` now."].join(" ")},titlefont:font_attributes({editType:"layoutstyle",description:["Former `titlefont` is now the sub-attribute `font` of `title`.","To customize title font properties, please use `title.font` now."].join(" ")})}},registry=createCommonjsModule((function(t,e){var r=dom.addStyleRule,n=extend.extendFlat,i=extend.extendDeepAll;function a(t){var i=t.name,a=t.categories,o=t.meta;if(e.modules[i])loggers_1.log("Type "+i+" already registered");else{e.subplotsRegistry[t.basePlotModule.name]||function(t){var r=t.name;if(e.subplotsRegistry[r])return void loggers_1.log("Plot type "+r+" already registered.");for(var n in c(t),e.subplotsRegistry[r]=t,e.componentsRegistry)h(n,t.name)}(t.basePlotModule);for(var s={},l=0;l<a.length;l++)s[a[l]]=!0,e.allCategories[a[l]]=!0;for(var d in e.modules[i]={_module:t,categories:s},o&&Object.keys(o).length&&(e.modules[i].meta=o),e.allTypes.push(i),e.componentsRegistry)u(d,i);t.layoutAttributes&&n(e.traceLayoutAttributes,t.layoutAttributes);var g=t.basePlotModule,f=g.name;if("mapbox"===f){var p=g.constants.styleRules;for(var m in p)r(".js-plotly-plot .plotly .mapboxgl-"+m,p[m])}"geo"!==f&&"mapbox"!==f||void 0===typeof window||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function o(t){if("string"!=typeof t.name)throw new Error("Component module *name* must be a string.");var r=t.name;for(var n in e.componentsRegistry[r]=t,t.layoutAttributes&&(t.layoutAttributes._isLinkedToArray&&push_unique(e.layoutArrayContainers,r),c(t)),e.modules)u(r,n);for(var a in e.subplotsRegistry)h(r,a);for(var o in e.transformsRegistry)d(r,o);t.schema&&t.schema.layout&&i(layout_attributes$4,t.schema.layout)}function s(t){if("string"!=typeof t.name)throw new Error("Transform module *name* must be a string.");var r="Transform module "+t.name,n="function"==typeof t.transform,i="function"==typeof t.calcTransform;if(!n&&!i)throw new Error(r+" is missing a *transform* or *calcTransform* method.");for(var a in n&&i&&loggers_1.log([r+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),is_plain_object(t.attributes)||loggers_1.log(r+" registered without an *attributes* object."),"function"!=typeof t.supplyDefaults&&loggers_1.log(r+" registered without a *supplyDefaults* method."),e.transformsRegistry[t.name]=t,e.componentsRegistry)d(a,t.name)}function l(t){var r=t.name,n=r.split("-")[0],i=t.dictionary,a=t.format,o=i&&Object.keys(i).length,s=a&&Object.keys(a).length,l=e.localeRegistry,c=l[r];if(c||(l[r]=c={}),n!==r){var u=l[n];u||(l[n]=u={}),o&&u.dictionary===c.dictionary&&(u.dictionary=i),s&&u.format===c.format&&(u.format=a)}o&&(c.dictionary=i),s&&(c.format=a)}function c(t){if(t.layoutAttributes){var r=t.layoutAttributes._arrayAttrRegexps;if(r)for(var n=0;n<r.length;n++)push_unique(e.layoutArrayRegexes,r[n])}}function u(t,r){var n=e.componentsRegistry[t].schema;if(n&&n.traces){var a=n.traces[r];a&&i(e.modules[r]._module.attributes,a)}}function d(t,r){var n=e.componentsRegistry[t].schema;if(n&&n.transforms){var a=n.transforms[r];a&&i(e.transformsRegistry[r].attributes,a)}}function h(t,r){var n=e.componentsRegistry[t].schema;if(n&&n.subplots){var a=e.subplotsRegistry[r],o=a.layoutAttributes,s="subplot"===a.attr?a.name:a.attr;Array.isArray(s)&&(s=s[0]);var l=n.subplots[s];o&&l&&i(o,l)}}function g(t){return"object"==typeof t&&(t=t.type),t}e.modules={},e.allCategories={},e.allTypes=[],e.subplotsRegistry={},e.transformsRegistry={},e.componentsRegistry={},e.layoutArrayContainers=[],e.layoutArrayRegexes=[],e.traceLayoutAttributes={},e.localeRegistry={},e.apiMethodRegistry={},e.collectableSubplotTypes=null,e.register=function(t){if(e.collectableSubplotTypes=null,!t)throw new Error("No argument passed to Plotly.register.");t&&!Array.isArray(t)&&(t=[t]);for(var r=0;r<t.length;r++){var n=t[r];if(!n)throw new Error("Invalid module was attempted to be registered!");switch(n.moduleType){case"trace":a(n);break;case"transform":s(n);break;case"component":o(n);break;case"locale":l(n);break;case"apiMethod":var i=n.name;e.apiMethodRegistry[i]=n.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},e.getModule=function(t){var r=e.modules[g(t)];return!!r&&r._module},e.traceIs=function(t,r){if("various"===(t=g(t)))return!1;var n=e.modules[t];return n||(t&&loggers_1.log("Unrecognized trace type "+t+"."),n=e.modules[attributes$r.type.dflt]),!!n.categories[r]},e.getTransformIndices=function(t,e){for(var r=[],n=t.transforms||[],i=0;i<n.length;i++)n[i].type===e&&r.push(i);return r},e.hasTransform=function(t,e){for(var r=t.transforms||[],n=0;n<r.length;n++)if(r[n].type===e)return!0;return!1},e.getComponentMethod=function(t,r){var n=e.componentsRegistry[t];return n&&n[r]||noop$1},e.call=function(){var t=arguments[0],r=[].slice.call(arguments,1);return e.apiMethodRegistry[t].apply(null,r)}})),require$$0=getAugmentedNamespace(src$1),dates=createCommonjsModule((function(t,e){var r,n,i=require$$0.timeFormat,a=mod_1.mod,o=numerical.BADNUM,s=numerical.ONEDAY,l=numerical.ONEHOUR,c=numerical.ONEMIN,u=numerical.ONESEC,d=numerical.EPOCHJD,h=require$$0.utcFormat,g=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,f=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,p=(new Date).getFullYear()-70;function m(t){return t&&registry.componentsRegistry.calendars&&"string"==typeof t&&"gregorian"!==t}function y(t,e){return String(t+Math.pow(10,e)).substr(1)}e.dateTick0=function(t,r){var n=function(t,e){return m(t)?e?registry.getComponentMethod("calendars","CANONICAL_SUNDAY")[t]:registry.getComponentMethod("calendars","CANONICAL_TICK")[t]:e?"2000-01-02":"2000-01-01"}(t,!!r);if(r<2)return n;var i=e.dateTime2ms(n,t);return i+=s*(r-1),e.ms2DateTime(i,0,t)},e.dfltRange=function(t){return m(t)?registry.getComponentMethod("calendars","DFLTRANGE")[t]:["2000-01-01","2001-01-01"]},e.isJSDate=function(t){return"object"==typeof t&&null!==t&&"function"==typeof t.getTime},e.dateTime2ms=function(t,i){if(e.isJSDate(t)){var h=t.getTimezoneOffset()*c,y=(t.getUTCMinutes()-t.getMinutes())*c+(t.getUTCSeconds()-t.getSeconds())*u+(t.getUTCMilliseconds()-t.getMilliseconds());if(y){var b=3*c;h=h-b/2+a(y-h+b/2,b)}return(t=Number(t)-h)>=r&&t<=n?t:o}if("string"!=typeof t&&"number"!=typeof t)return o;t=String(t);var v=m(i),x=t.charAt(0);!v||"G"!==x&&"g"!==x||(t=t.substr(1),i="");var I=v&&"chinese"===i.substr(0,7),B=t.match(I?f:g);if(!B)return o;var C=B[1],F=B[3]||"1",A=Number(B[5]||1),Q=Number(B[7]||0),_=Number(B[9]||0),w=Number(B[11]||0);if(v){if(2===C.length)return o;var U;C=Number(C);try{var S=registry.getComponentMethod("calendars","getCal")(i);if(I){var E="i"===F.charAt(F.length-1);F=parseInt(F,10),U=S.newDate(C,S.toMonthIndex(C,F,E),A)}else U=S.newDate(C,Number(F),A)}catch(t){return o}return U?(U.toJD()-d)*s+Q*l+_*c+w*u:o}C=2===C.length?(Number(C)+2e3-p)%100+p:Number(C),F-=1;var L=new Date(Date.UTC(2e3,F,A,Q,_));return L.setUTCFullYear(C),L.getUTCMonth()!==F||L.getUTCDate()!==A?o:L.getTime()+w*u},r=e.MIN_MS=e.dateTime2ms("-9999"),n=e.MAX_MS=e.dateTime2ms("9999-12-31 23:59:59.9999"),e.isDateTime=function(t,r){return e.dateTime2ms(t,r)!==o};var b=90*s,v=3*l,x=5*c;function I(t,e,r,n,i){if((e||r||n||i)&&(t+=" "+y(e,2)+":"+y(r,2),(n||i)&&(t+=":"+y(n,2),i))){for(var a=4;i%10==0;)a-=1,i/=10;t+="."+y(i,a)}return t}e.ms2DateTime=function(t,e,i){if("number"!=typeof t||!(t>=r&&t<=n))return o;e||(e=0);var g,f,p,y,B,C,F=Math.floor(10*a(t+.05,1)),A=Math.round(t-F/10);if(m(i)){var Q=Math.floor(A/s)+d,_=Math.floor(a(t,s));try{g=registry.getComponentMethod("calendars","getCal")(i).fromJD(Q).formatDate("yyyy-mm-dd")}catch(t){g=h("G%Y-%m-%d")(new Date(A))}if("-"===g.charAt(0))for(;g.length<11;)g="-0"+g.substr(1);else for(;g.length<10;)g="0"+g;f=e<b?Math.floor(_/l):0,p=e<b?Math.floor(_%l/c):0,y=e<v?Math.floor(_%c/u):0,B=e<x?_%u*10+F:0}else C=new Date(A),g=h("%Y-%m-%d")(C),f=e<b?C.getUTCHours():0,p=e<b?C.getUTCMinutes():0,y=e<v?C.getUTCSeconds():0,B=e<x?10*C.getUTCMilliseconds()+F:0;return I(g,f,p,y,B)},e.ms2DateTimeLocal=function(t){if(!(t>=r+s&&t<=n-s))return o;var e=Math.floor(10*a(t+.05,1)),l=new Date(Math.round(t-e/10));return I(i("%Y-%m-%d")(l),l.getHours(),l.getMinutes(),l.getSeconds(),10*l.getUTCMilliseconds()+e)},e.cleanDate=function(t,r,n){if(t===o)return r;if(e.isJSDate(t)||"number"==typeof t&&isFinite(t)){if(m(n))return loggers_1.error("JS Dates and milliseconds are incompatible with world calendars",t),r;if(!(t=e.ms2DateTimeLocal(+t))&&void 0!==r)return r}else if(!e.isDateTime(t,n))return loggers_1.error("unrecognized date",t),r;return t};var B=/%\d?f/g,C=/%h/g,F={1:"1",2:"1",3:"2",4:"2"};function A(t,e,r,n){t=t.replace(B,(function(t){var r=Math.min(+t.charAt(1)||6,6);return(e/1e3%1+2).toFixed(r).substr(2).replace(/0+$/,"")||"0"}));var i=new Date(Math.floor(e+.05));if(t=t.replace(C,(function(){return F[r("%q")(i)]})),m(n))try{t=registry.getComponentMethod("calendars","worldCalFmt")(t,e,n)}catch(t){return"Invalid"}return r(t)(i)}var Q=[59,59.9,59.99,59.999,59.9999];e.formatDate=function(t,e,r,n,i,o){if(i=m(i)&&i,!e)if("y"===r)e=o.year;else if("m"===r)e=o.month;else{if("d"!==r)return function(t,e){var r=a(t+.05,s),n=y(Math.floor(r/l),2)+":"+y(a(Math.floor(r/c),60),2);if("M"!==e){fastIsnumeric(e)||(e=0);var i=(100+Math.min(a(t/u,60),Q[e])).toFixed(e).substr(1);e>0&&(i=i.replace(/0+$/,"").replace(/[\.]$/,"")),n+=":"+i}return n}(t,r)+"\n"+A(o.dayMonthYear,t,n,i);e=o.dayMonth+"\n"+o.year}return A(e,t,n,i)};var _=3*s;e.incrementMonth=function(t,e,r){r=m(r)&&r;var n=a(t,s);if(t=Math.round(t-n),r)try{var i=Math.round(t/s)+d,o=registry.getComponentMethod("calendars","getCal")(r),l=o.fromJD(i);return e%12?o.add(l,e,"m"):o.add(l,e/12,"y"),(l.toJD()-d)*s+n}catch(e){loggers_1.error("invalid ms "+t+" in calendar "+r)}var c=new Date(t+_);return c.setUTCMonth(c.getUTCMonth()+e)+n-_},e.findExactDates=function(t,e){for(var r,n,i=0,a=0,o=0,l=0,c=m(e)&&registry.getComponentMethod("calendars","getCal")(e),u=0;u<t.length;u++)if(n=t[u],fastIsnumeric(n)){if(!(n%s))if(c)try{1===(r=c.fromJD(n/s+d)).day()?1===r.month()?i++:a++:o++}catch(t){}else 1===(r=new Date(n)).getUTCDate()?0===r.getUTCMonth()?i++:a++:o++}else l++;o+=a+=i;var h=t.length-l;return{exactYears:i/h,exactMonths:a/h,exactDays:o/h}}})),identity$1=function(t){return t},search=createCommonjsModule((function(t,e){var r=numerical.BADNUM,n=1e-9;function i(t,e){return t<e}function a(t,e){return t<=e}function o(t,e){return t>e}function s(t,e){return t>=e}e.findBin=function(t,e,r){if(fastIsnumeric(e.start))return r?Math.ceil((t-e.start)/e.size-n)-1:Math.floor((t-e.start)/e.size+n);var l,c,u=0,d=e.length,h=0,g=d>1?(e[d-1]-e[0])/(d-1):1;for(c=g>=0?r?i:a:r?s:o,t+=g*n*(r?-1:1)*(g>=0?1:-1);u<d&&h++<100;)c(e[l=Math.floor((u+d)/2)],t)?u=l+1:d=l;return h>90&&loggers_1.log("Long binary search..."),u-1},e.sorterAsc=function(t,e){return t-e},e.sorterDes=function(t,e){return e-t},e.distinctVals=function(t){var n,i=t.slice();for(i.sort(e.sorterAsc),n=i.length-1;n>-1&&i[n]===r;n--);for(var a,o=i[n]-i[0]||1,s=o/(n||1)/1e4,l=[],c=0;c<=n;c++){var u=i[c],d=u-a;void 0===a?(l.push(u),a=u):d>s&&(o=Math.min(o,d),l.push(u),a=u)}return{vals:l,minDiff:o}},e.roundUp=function(t,e,r){for(var n,i=0,a=e.length-1,o=0,s=r?0:1,l=r?1:0,c=r?Math.ceil:Math.floor;i<a&&o++<100;)e[n=c((i+a)/2)]<=t?i=n+s:a=n-l;return e[i]},e.sort=function(t,e){for(var r=0,n=0,i=1;i<t.length;i++){var a=e(t[i],t[i-1]);if(a<0?r=1:a>0&&(n=1),r&&n)return t.sort(e)}return n?t:t.reverse()},e.findIndexOfMin=function(t,e){e=e||identity$1;for(var r,n=1/0,i=0;i<t.length;i++){var a=e(t[i]);a<n&&(n=a,r=i)}return r}})),sort_object_keys=function(t){return Object.keys(t).sort()},stats=createCommonjsModule((function(t,e){var r=array.isArrayOrTypedArray;e.aggNums=function(t,n,i,a){var o,s;if((!a||a>i.length)&&(a=i.length),fastIsnumeric(n)||(n=!1),r(i[0])){for(s=new Array(a),o=0;o<a;o++)s[o]=e.aggNums(t,n,i[o]);i=s}for(o=0;o<a;o++)fastIsnumeric(n)?fastIsnumeric(i[o])&&(n=t(+n,+i[o])):n=i[o];return n},e.len=function(t){return e.aggNums((function(t){return t+1}),0,t)},e.mean=function(t,r){return r||(r=e.len(t)),e.aggNums((function(t,e){return t+e}),0,t)/r},e.midRange=function(t){if(void 0!==t&&0!==t.length)return(e.aggNums(Math.max,null,t)+e.aggNums(Math.min,null,t))/2},e.variance=function(t,r,n){return r||(r=e.len(t)),fastIsnumeric(n)||(n=e.mean(t,r)),e.aggNums((function(t,e){return t+Math.pow(e-n,2)}),0,t)/r},e.stdev=function(t,r,n){return Math.sqrt(e.variance(t,r,n))},e.median=function(t){var r=t.slice().sort();return e.interp(r,.5)},e.interp=function(t,e){if(!fastIsnumeric(e))throw"n should be a finite number";if((e=e*t.length-.5)<0)return t[0];if(e>t.length-1)return t[t.length-1];var r=e%1;return r*t[Math.ceil(e)]+(1-r)*t[Math.floor(e)]}})),mod$1=mod_1.mod,modHalf=mod_1.modHalf,PI=Math.PI,twoPI=2*PI;function deg2rad(t){return t/180*PI}function rad2deg(t){return t/PI*180}function isFullCircle(t){return Math.abs(t[1]-t[0])>twoPI-1e-14}function angleDelta(t,e){return modHalf(e-t,twoPI)}function angleDist(t,e){return Math.abs(angleDelta(t,e))}function isAngleInsideSector(t,e){if(isFullCircle(e))return!0;var r,n;e[0]<e[1]?(r=e[0],n=e[1]):(r=e[1],n=e[0]),(r=mod$1(r,twoPI))>(n=mod$1(n,twoPI))&&(n+=twoPI);var i=mod$1(t,twoPI),a=i+twoPI;return i>=r&&i<=n||a>=r&&a<=n}function isPtInsideSector(t,e,r,n){return!!isAngleInsideSector(e,n)&&(r[0]<r[1]?(i=r[0],a=r[1]):(i=r[1],a=r[0]),t>=i&&t<=a);var i,a}function _path(t,e,r,n,i,a,o){i=i||0,a=a||0;var s,l,c,u,d,h=isFullCircle([r,n]);function g(t,e){return[t*Math.cos(e)+i,a-t*Math.sin(e)]}h?(s=0,l=PI,c=twoPI):r<n?(s=r,c=n):(s=n,c=r),t<e?(u=t,d=e):(u=e,d=t);var f,p=Math.abs(c-s)<=PI?0:1;function m(t,e,r){return"A"+[t,t]+" "+[0,p,r]+" "+g(t,e)}return h?f=null===u?"M"+g(d,s)+m(d,l,0)+m(d,c,0)+"Z":"M"+g(u,s)+m(u,l,0)+m(u,c,0)+"ZM"+g(d,s)+m(d,l,1)+m(d,c,1)+"Z":null===u?(f="M"+g(d,s)+m(d,c,0),o&&(f+="L0,0Z")):f="M"+g(u,s)+"L"+g(d,s)+m(d,c,0)+"L"+g(u,c)+m(u,s,1)+"Z",f}function pathArc(t,e,r,n,i){return _path(null,t,e,r,n,i,0)}function pathSector(t,e,r,n,i){return _path(null,t,e,r,n,i,1)}function pathAnnulus(t,e,r,n,i,a){return _path(t,e,r,n,i,a,1)}var angles={deg2rad:deg2rad,rad2deg:rad2deg,angleDelta:angleDelta,angleDist:angleDist,isFullCircle:isFullCircle,isAngleInsideSector:isAngleInsideSector,isPtInsideSector:isPtInsideSector,pathArc:pathArc,pathSector:pathSector,pathAnnulus:pathAnnulus},isLeftAnchor=function(t){return"left"===t.xanchor||"auto"===t.xanchor&&t.x<=1/3},isCenterAnchor=function(t){return"center"===t.xanchor||"auto"===t.xanchor&&t.x>1/3&&t.x<2/3},isRightAnchor=function(t){return"right"===t.xanchor||"auto"===t.xanchor&&t.x>=2/3},isTopAnchor=function(t){return"top"===t.yanchor||"auto"===t.yanchor&&t.y>=2/3},isMiddleAnchor=function(t){return"middle"===t.yanchor||"auto"===t.yanchor&&t.y>1/3&&t.y<2/3},isBottomAnchor=function(t){return"bottom"===t.yanchor||"auto"===t.yanchor&&t.y<=1/3},anchor_utils={isLeftAnchor:isLeftAnchor,isCenterAnchor:isCenterAnchor,isRightAnchor:isRightAnchor,isTopAnchor:isTopAnchor,isMiddleAnchor:isMiddleAnchor,isBottomAnchor:isBottomAnchor},mod=mod_1.mod,segmentsIntersect_1=segmentsIntersect$1;function segmentsIntersect$1(t,e,r,n,i,a,o,s){var l=r-t,c=i-t,u=o-i,d=n-e,h=a-e,g=s-a,f=l*g-u*d;if(0===f)return null;var p=(c*g-u*h)/f,m=(c*d-l*h)/f;return m<0||m>1||p<0||p>1?null:{x:t+l*p,y:e+d*p}}var locationCache,workingPath,workingTextWidth,segmentDistance=function(t,e,r,n,i,a,o,s){if(segmentsIntersect$1(t,e,r,n,i,a,o,s))return 0;var l=r-t,c=n-e,u=o-i,d=s-a,h=l*l+c*c,g=u*u+d*d,f=Math.min(perpDistance2(l,c,h,i-t,a-e),perpDistance2(l,c,h,o-t,s-e),perpDistance2(u,d,g,t-i,e-a),perpDistance2(u,d,g,r-i,n-a));return Math.sqrt(f)};function perpDistance2(t,e,r,n,i){var a=n*t+i*e;if(a<0)return n*n+i*i;if(a>r){var o=n-t,s=i-e;return o*o+s*s}var l=n*e-i*t;return l*l/r}var getTextLocation=function(t,e,r,n){if(t===workingPath&&n===workingTextWidth||(locationCache={},workingPath=t,workingTextWidth=n),locationCache[r])return locationCache[r];var i=t.getPointAtLength(mod(r-n/2,e)),a=t.getPointAtLength(mod(r+n/2,e)),o=Math.atan((a.y-i.y)/(a.x-i.x)),s=t.getPointAtLength(mod(r,e)),l={x:(4*s.x+i.x+a.x)/6,y:(4*s.y+i.y+a.y)/6,theta:o};return locationCache[r]=l,l},clearLocationCache=function(){workingPath=null},getVisibleSegment=function(t,e,r){var n,i,a=e.left,o=e.right,s=e.top,l=e.bottom,c=0,u=t.getTotalLength(),d=u;function h(e){var r=t.getPointAtLength(e);0===e?n=r:e===u&&(i=r);var c=r.x<a?a-r.x:r.x>o?r.x-o:0,d=r.y<s?s-r.y:r.y>l?r.y-l:0;return Math.sqrt(c*c+d*d)}for(var g=h(c);g;){if((c+=g+r)>d)return;g=h(c)}for(g=h(d);g;){if(c>(d-=g+r))return;g=h(d)}return{min:c,max:d,len:d-c,total:u,isClosed:0===c&&d===u&&Math.abs(n.x-i.x)<.1&&Math.abs(n.y-i.y)<.1}},findPointOnPath=function(t,e,r,n){for(var i,a,o,s=(n=n||{}).pathLength||t.getTotalLength(),l=n.tolerance||.001,c=n.iterationLimit||30,u=t.getPointAtLength(0)[r]>t.getPointAtLength(s)[r]?-1:1,d=0,h=0,g=s;d<c;){if(i=(h+g)/2,o=(a=t.getPointAtLength(i))[r]-e,Math.abs(o)<l)return a;u*o>0?g=i:h=i,d++}return a},geometry2d={segmentsIntersect:segmentsIntersect_1,segmentDistance:segmentDistance,getTextLocation:getTextLocation,clearLocationCache:clearLocationCache,getVisibleSegment:getVisibleSegment,findPointOnPath:findPointOnPath},throttle=createCommonjsModule((function(t,e){var r={};function n(t){t&&null!==t.timer&&(clearTimeout(t.timer),t.timer=null)}e.throttle=function(t,e,i){var a=r[t],o=Date.now();if(!a){for(var s in r)r[s].ts<o-6e4&&delete r[s];a=r[t]={ts:0,timer:null}}function l(){i(),a.ts=Date.now(),a.onDone&&(a.onDone(),a.onDone=null)}n(a),o>a.ts+e?l():a.timer=setTimeout((function(){l(),a.timer=null}),e)},e.done=function(t){var e=r[t];return e&&e.timer?new Promise((function(t){var r=e.onDone;e.onDone=function(){r&&r(),t(),e.onDone=null}})):Promise.resolve()},e.clear=function(t){if(t)n(r[t]),delete r[t];else for(var i in r)e.clear(i)}})),clear_responsive=function(t){t._responsiveChartHandler&&(window.removeEventListener("resize",t._responsiveChartHandler),delete t._responsiveChartHandler)},isMobile_1=isMobile,isMobile_2=isMobile,_default=isMobile,mobileRE=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,tabletRE=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function isMobile(t){t||(t={});var e=t.ua;if(e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var r=t.tablet?tabletRE.test(e):mobileRE.test(e);return!r&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(r=!0),r}isMobile_1.isMobile=isMobile_2,isMobile_1.default=_default;var preserve_drawing_buffer=function(t){var e;if("string"!=typeof(e=t&&t.hasOwnProperty("userAgent")?t.userAgent:getUserAgent()))return!0;var r=isMobile_1({ua:{headers:{"user-agent":e}},tablet:!0,featureDetect:!1});if(!r)for(var n=e.split(" "),i=1;i<n.length;i++){if(-1!==n[i].indexOf("Safari"))for(var a=i-1;a>-1;a--){var o=n[a];if("Version/"===o.substr(0,8)){var s=o.substr(8).split(".")[0];if(fastIsnumeric(s)&&(s=+s),s>=13)return!0}}}return r};function getUserAgent(){var t;return"undefined"!=typeof navigator&&(t=navigator.userAgent),t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),t}var make_trace_groups=function(t,e,r){var n=t.selectAll("g."+r.replace(/\s/g,".")).data(e,(function(t){return t[0].trace.uid}));n.exit().remove(),n.enter().append("g").attr("class",r),n.order();var i=t.classed("rangeplot")?"nodeRangePlot3":"node3";return n.each((function(t){t[0][i]=d3.select(this)})),n},localize=function(t,e){for(var r=t._context.locale,n=0;n<2;n++){for(var i=t._context.locales,a=0;a<2;a++){var o=(i[r]||{}).dictionary;if(o){var s=o[e];if(s)return s}i=registry.localeRegistry}var l=r.split("-")[0];if(l===r)break;r=l}return e},filter_unique=function(t){for(var e={},r=[],n=0,i=0;i<t.length;i++){var a=t[i];1!==e[a]&&(e[a]=1,r[n++]=a)}return r},filter_visible=function(t){for(var e=isCalcData(t)?calcDataFilter:baseFilter,r=[],n=0;n<t.length;n++){var i=t[n];e(i)&&r.push(i)}return r};function baseFilter(t){return!0===t.visible}function calcDataFilter(t){var e=t[0].trace;return!0===e.visible&&0!==e._length}function isCalcData(t){return Array.isArray(t)&&Array.isArray(t[0])&&t[0][0]&&t[0][0].trace}var increment=function(t,e){if(!e)return t;var r=1/Math.abs(e),n=r>1?(r*t+r*e)/r:t+e,i=String(n).length;if(i>16){var a=String(e).length;if(i>=String(t).length+a){var o=parseFloat(n).toPrecision(12);-1===o.indexOf("e+")&&(n=+o)}}return n},BADNUM$7=numerical.BADNUM,JUNK=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g,clean_number=function(t){return"string"==typeof t&&(t=t.replace(JUNK,"")),fastIsnumeric(t)?Number(t):BADNUM$7},require$$1=getAugmentedNamespace(src),lib_1=createCommonjsModule((function(t){var e=require$$0.utcFormat,r=require$$1.format,n=numerical.FP_SAFE,i=-n,a=numerical.BADNUM,o=t.exports={};o.adjustFormat=function(t){return!t||/^\d[.]\df/.test(t)||/[.]\d%/.test(t)?t:"0.f"===t?"~f":/^\d%/.test(t)?"~%":/^\ds/.test(t)?"~s":!/^[~,.0$]/.test(t)&&/[&fps]/.test(t)?"~"+t:t};var s={};function l(t){var e={};for(var r in t)for(var n=t[r],i=0;i<n.length;i++)e[n[i]]=+r;return e}o.warnBadFormat=function(t){var e=String(t);s[e]||(s[e]=1,o.warn('encountered bad format: "'+e+'"'))},o.noFormat=function(t){return String(t)},o.numberFormat=function(t){var e;try{e=r(o.adjustFormat(t))}catch(e){return o.warnBadFormat(t),o.noFormat}return e},o.nestedProperty=nested_property,o.keyedContainer=keyed_container,o.relativeAttr=relative_attr,o.isPlainObject=is_plain_object,o.toLogRange=to_log_range,o.relinkPrivateKeys=relink_private,o.isTypedArray=array.isTypedArray,o.isArrayOrTypedArray=array.isArrayOrTypedArray,o.isArray1D=array.isArray1D,o.ensureArray=array.ensureArray,o.concat=array.concat,o.maxRowLength=array.maxRowLength,o.minRowLength=array.minRowLength,o.mod=mod_1.mod,o.modHalf=mod_1.modHalf,o.valObjectMeta=coerce.valObjectMeta,o.coerce=coerce.coerce,o.coerce2=coerce.coerce2,o.coerceFont=coerce.coerceFont,o.coercePattern=coerce.coercePattern,o.coerceHoverinfo=coerce.coerceHoverinfo,o.coerceSelectionMarkerOpacity=coerce.coerceSelectionMarkerOpacity,o.validate=coerce.validate,o.dateTime2ms=dates.dateTime2ms,o.isDateTime=dates.isDateTime,o.ms2DateTime=dates.ms2DateTime,o.ms2DateTimeLocal=dates.ms2DateTimeLocal,o.cleanDate=dates.cleanDate,o.isJSDate=dates.isJSDate,o.formatDate=dates.formatDate,o.incrementMonth=dates.incrementMonth,o.dateTick0=dates.dateTick0,o.dfltRange=dates.dfltRange,o.findExactDates=dates.findExactDates,o.MIN_MS=dates.MIN_MS,o.MAX_MS=dates.MAX_MS,o.findBin=search.findBin,o.sorterAsc=search.sorterAsc,o.sorterDes=search.sorterDes,o.distinctVals=search.distinctVals,o.roundUp=search.roundUp,o.sort=search.sort,o.findIndexOfMin=search.findIndexOfMin,o.sortObjectKeys=sort_object_keys,o.aggNums=stats.aggNums,o.len=stats.len,o.mean=stats.mean,o.median=stats.median,o.midRange=stats.midRange,o.variance=stats.variance,o.stdev=stats.stdev,o.interp=stats.interp,o.init2dArray=matrix.init2dArray,o.transposeRagged=matrix.transposeRagged,o.dot=matrix.dot,o.translationMatrix=matrix.translationMatrix,o.rotationMatrix=matrix.rotationMatrix,o.rotationXYMatrix=matrix.rotationXYMatrix,o.apply3DTransform=matrix.apply3DTransform,o.apply2DTransform=matrix.apply2DTransform,o.apply2DTransform2=matrix.apply2DTransform2,o.convertCssMatrix=matrix.convertCssMatrix,o.inverseTransformMatrix=matrix.inverseTransformMatrix,o.deg2rad=angles.deg2rad,o.rad2deg=angles.rad2deg,o.angleDelta=angles.angleDelta,o.angleDist=angles.angleDist,o.isFullCircle=angles.isFullCircle,o.isAngleInsideSector=angles.isAngleInsideSector,o.isPtInsideSector=angles.isPtInsideSector,o.pathArc=angles.pathArc,o.pathSector=angles.pathSector,o.pathAnnulus=angles.pathAnnulus,o.isLeftAnchor=anchor_utils.isLeftAnchor,o.isCenterAnchor=anchor_utils.isCenterAnchor,o.isRightAnchor=anchor_utils.isRightAnchor,o.isTopAnchor=anchor_utils.isTopAnchor,o.isMiddleAnchor=anchor_utils.isMiddleAnchor,o.isBottomAnchor=anchor_utils.isBottomAnchor,o.segmentsIntersect=geometry2d.segmentsIntersect,o.segmentDistance=geometry2d.segmentDistance,o.getTextLocation=geometry2d.getTextLocation,o.clearLocationCache=geometry2d.clearLocationCache,o.getVisibleSegment=geometry2d.getVisibleSegment,o.findPointOnPath=geometry2d.findPointOnPath,o.extendFlat=extend.extendFlat,o.extendDeep=extend.extendDeep,o.extendDeepAll=extend.extendDeepAll,o.extendDeepNoArrays=extend.extendDeepNoArrays,o.log=loggers_1.log,o.warn=loggers_1.warn,o.error=loggers_1.error,o.counterRegex=regex.counter,o.throttle=throttle.throttle,o.throttleDone=throttle.done,o.clearThrottle=throttle.clear,o.getGraphDiv=dom.getGraphDiv,o.isPlotDiv=dom.isPlotDiv,o.removeElement=dom.removeElement,o.addStyleRule=dom.addStyleRule,o.addRelatedStyleRule=dom.addRelatedStyleRule,o.deleteRelatedStyleRule=dom.deleteRelatedStyleRule,o.getFullTransformMatrix=dom.getFullTransformMatrix,o.getElementTransformMatrix=dom.getElementTransformMatrix,o.getElementAndAncestors=dom.getElementAndAncestors,o.equalDomRects=dom.equalDomRects,o.clearResponsive=clear_responsive,o.preserveDrawingBuffer=preserve_drawing_buffer,o.makeTraceGroups=make_trace_groups,o._=localize,o.notifier=notifier,o.filterUnique=filter_unique,o.filterVisible=filter_visible,o.pushUnique=push_unique,o.increment=increment,o.cleanNumber=clean_number,o.ensureNumber=function(t){return fastIsnumeric(t)?(t=Number(t))>n||t<i?a:t:a},o.isIndex=function(t,e){return!(void 0!==e&&t>=e)&&(fastIsnumeric(t)&&t>=0&&t%1==0)},o.noop=noop$1,o.identity=identity$1,o.repeat=function(t,e){for(var r=new Array(e),n=0;n<e;n++)r[n]=t;return r},o.swapAttrs=function(t,e,r,n){r||(r="x"),n||(n="y");for(var i=0;i<e.length;i++){var a=e[i],s=o.nestedProperty(t,a.replace("?",r)),l=o.nestedProperty(t,a.replace("?",n)),c=s.get();s.set(l.get()),l.set(c)}},o.raiseToTop=function(t){t.parentNode.appendChild(t)},o.cancelTransition=function(t){return t.transition().duration(0)},o.constrain=function(t,e,r){return e>r?Math.max(r,Math.min(e,t)):Math.max(e,Math.min(r,t))},o.bBoxIntersect=function(t,e,r){return r=r||0,t.left<=e.right+r&&e.left<=t.right+r&&t.top<=e.bottom+r&&e.top<=t.bottom+r},o.simpleMap=function(t,e,r,n,i){for(var a=t.length,o=new Array(a),s=0;s<a;s++)o[s]=e(t[s],r,n,i);return o},o.randstr=function t(e,r,n,i){if(n||(n=16),void 0===r&&(r=24),r<=0)return"0";var a,s,l=Math.log(Math.pow(2,r))/Math.log(n),c="";for(a=2;l===1/0;a*=2)l=Math.log(Math.pow(2,r/a))/Math.log(n)*a;var u=l-Math.floor(l);for(a=0;a<Math.floor(l);a++)c=Math.floor(Math.random()*n).toString(n)+c;u&&(s=Math.pow(n,u),c=Math.floor(Math.random()*s).toString(n)+c);var d=parseInt(c,n);return e&&e[c]||d!==1/0&&d>=Math.pow(2,r)?i>10?(o.warn("randstr failed uniqueness"),c):t(e,r,n,(i||0)+1):c},o.OptionControl=function(t,e){t||(t={}),e||(e="opt");var r={optionList:[],_newoption:function(n){n[e]=t,r[n.name]=n,r.optionList.push(n)}};return r["_"+e]=t,r},o.smooth=function(t,e){if((e=Math.round(e)||0)<2)return t;var r,n,i,a,o=t.length,s=2*o,l=2*e-1,c=new Array(l),u=new Array(o);for(r=0;r<l;r++)c[r]=(1-Math.cos(Math.PI*(r+1)/e))/(2*e);for(r=0;r<o;r++){for(a=0,n=0;n<l;n++)(i=r+n+1-e)<-o?i-=s*Math.round(i/s):i>=s&&(i-=s*Math.floor(i/s)),i<0?i=-1-i:i>=o&&(i=s-1-i),a+=t[i]*c[n];u[r]=a}return u},o.syncOrAsync=function(t,e,r){var n;function i(){return o.syncOrAsync(t,e,r)}for(;t.length;)if((n=(0,t.splice(0,1)[0])(e))&&n.then)return n.then(i);return r&&r(e)},o.stripTrailingSlash=function(t){return"/"===t.substr(-1)?t.substr(0,t.length-1):t},o.noneOrAll=function(t,e,r){if(t){var n,i=!1,a=!0;for(n=0;n<r.length;n++)null!=t[r[n]]?i=!0:a=!1;if(i&&!a)for(n=0;n<r.length;n++)t[r[n]]=e[r[n]]}},o.mergeArray=function(t,e,r,n){var i="function"==typeof n;if(o.isArrayOrTypedArray(t))for(var a=Math.min(t.length,e.length),s=0;s<a;s++){var l=t[s];e[s][r]=i?n(l):l}},o.mergeArrayCastPositive=function(t,e,r){return o.mergeArray(t,e,r,(function(t){var e=+t;return isFinite(e)&&e>0?e:0}))},o.fillArray=function(t,e,r,n){if(n=n||o.identity,o.isArrayOrTypedArray(t))for(var i=0;i<e.length;i++)e[i][r]=n(t[i])},o.castOption=function(t,e,r,n){n=n||o.identity;var i=o.nestedProperty(t,r).get();return o.isArrayOrTypedArray(i)?Array.isArray(e)&&o.isArrayOrTypedArray(i[e[0]])?n(i[e[0]][e[1]]):n(i[e]):i},o.extractOption=function(t,e,r,n){if(r in t)return t[r];var i=o.nestedProperty(e,n).get();return Array.isArray(i)?void 0:i},o.tagSelected=function(t,e,r){var n,i=e.selectedpoints,a=e._indexToPoints;function s(e){return void 0!==e&&e<t.length}a&&(n=l(a));for(var c=0;c<i.length;c++){var u=i[c];if(o.isIndex(u)||o.isArrayOrTypedArray(u)&&o.isIndex(u[0])&&o.isIndex(u[1])){var d=n?n[u]:u,h=r?r[d]:d;s(h)&&(t[h].selected=1)}}},o.selIndices2selPoints=function(t){var e=t.selectedpoints,r=t._indexToPoints;if(r){for(var n=l(r),i=[],a=0;a<e.length;a++){var s=e[a];if(o.isIndex(s)){var c=n[s];o.isIndex(c)&&i.push(c)}}return i}return e},o.getTargetArray=function(t,e){var r=e.target;if("string"==typeof r&&r){var n=o.nestedProperty(t,r).get();return!!Array.isArray(n)&&n}return!!Array.isArray(r)&&r},o.minExtend=function(t,e){var r={};"object"!=typeof e&&(e={});var n,i,a,s=Object.keys(t);for(n=0;n<s.length;n++)a=t[i=s[n]],"_"!==i.charAt(0)&&"function"!=typeof a&&("module"===i?r[i]=a:Array.isArray(a)?r[i]="colorscale"===i?a.slice():a.slice(0,3):o.isTypedArray(a)?r[i]=a.subarray(0,3):r[i]=a&&"object"==typeof a?o.minExtend(t[i],e[i]):a);for(s=Object.keys(e),n=0;n<s.length;n++)"object"==typeof(a=e[i=s[n]])&&i in r&&"object"==typeof r[i]||(r[i]=a);return r},o.titleCase=function(t){return t.charAt(0).toUpperCase()+t.substr(1)},o.containsAny=function(t,e){for(var r=0;r<e.length;r++)if(-1!==t.indexOf(e[r]))return!0;return!1},o.isIE=function(){return void 0!==window.navigator.msSaveBlob};var c=/Version\/[\d\.]+.*Safari/;o.isSafari=function(){return c.test(window.navigator.userAgent)};var u=/iPad|iPhone|iPod/;o.isIOS=function(){return u.test(window.navigator.userAgent)};var d=/Firefox\/(\d+)\.\d+/;o.getFirefoxVersion=function(){var t=d.exec(window.navigator.userAgent);if(t&&2===t.length){var e=parseInt(t[1]);if(!isNaN(e))return e}return null},o.isD3Selection=function(t){return t instanceof d3.selection},o.ensureSingle=function(t,e,r,n){var i=t.select(e+(r?"."+r:""));if(i.size())return i;var a=t.append(e);return r&&a.classed(r,!0),n&&a.call(n),a},o.ensureSingleById=function(t,e,r,n){var i=t.select(e+"#"+r);if(i.size())return i;var a=t.append(e).attr("id",r);return n&&a.call(n),a},o.objectFromPath=function(t,e){for(var r,n=t.split("."),i=r={},a=0;a<n.length;a++){var o=n[a],s=null,l=n[a].match(/(.*)\[([0-9]+)\]/);l?(o=l[1],s=l[2],r=r[o]=[],a===n.length-1?r[s]=e:r[s]={},r=r[s]):(a===n.length-1?r[o]=e:r[o]={},r=r[o])}return i};var h=/^([^\[\.]+)\.(.+)?/,g=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;o.expandObjectPaths=function(t){var e,r,n,i,a,s,l;if("object"==typeof t&&!Array.isArray(t))for(r in t)t.hasOwnProperty(r)&&((e=r.match(h))?(i=t[r],n=e[1],delete t[r],t[n]=o.extendDeepNoArrays(t[n]||{},o.objectFromPath(r,o.expandObjectPaths(i))[n])):(e=r.match(g))?(i=t[r],n=e[1],a=parseInt(e[2]),delete t[r],t[n]=t[n]||[],"."===e[3]?(l=e[4],s=t[n][a]=t[n][a]||{},o.extendDeepNoArrays(s,o.objectFromPath(l,o.expandObjectPaths(i)))):t[n][a]=o.expandObjectPaths(i)):t[r]=o.expandObjectPaths(t[r]));return t},o.numSeparate=function(t,e,r){if(r||(r=!1),"string"!=typeof e||0===e.length)throw new Error("Separator string required for formatting!");"number"==typeof t&&(t=String(t));var n=/(\d+)(\d{3})/,i=e.charAt(0),a=e.charAt(1),o=t.split("."),s=o[0],l=o.length>1?i+o[1]:"";if(a&&(o.length>1||s.length>4||r))for(;n.test(s);)s=s.replace(n,"$1"+a+"$2");return s+l},o.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var f=/^\w*$/;o.templateString=function(t,e){var r={};return t.replace(o.TEMPLATE_STRING_REGEX,(function(t,n){var i;return f.test(n)?i=e[n]:(r[n]=r[n]||o.nestedProperty(e,n).get,i=r[n]()),o.isValidTextValue(i)?i:""}))};var p={max:10,count:0,name:"hovertemplate"};o.hovertemplateString=function(){return b.apply(p,arguments)};var m={max:10,count:0,name:"texttemplate"};o.texttemplateString=function(){return b.apply(m,arguments)};var y=/^[:|\|]/;function b(t,r,n){var i=this,a=arguments;r||(r={});var s={};return t.replace(o.TEMPLATE_STRING_REGEX,(function(t,l,c){var u,d,h,g="_xother"===l||"_yother"===l,p="_xother_"===l||"_yother_"===l,m="xother_"===l||"yother_"===l,b="xother"===l||"yother"===l||g||m||p,v=l;if((g||p)&&(v=v.substring(1)),(m||p)&&(v=v.substring(0,v.length-1)),b){if(void 0===(u=r[v]))return""}else for(h=3;h<a.length;h++)if(d=a[h]){if(d.hasOwnProperty(v)){u=d[v];break}if(f.test(v)||(u=o.nestedProperty(d,v).get(),(u=s[v]||o.nestedProperty(d,v).get())&&(s[v]=u)),void 0!==u)break}if(void 0===u&&i)return i.count<i.max&&(o.warn("Variable '"+v+"' in "+i.name+" could not be found!"),u=t),i.count===i.max&&o.warn("Too many "+i.name+" warnings - additional warnings will be suppressed"),i.count++,t;if(c){var x;if(":"===c[0]&&(u=(x=n?n.numberFormat:o.numberFormat)(c.replace(y,""))(u)),"|"===c[0]){x=n?n.timeFormat:e;var I=o.dateTime2ms(u);u=o.formatDate(I,c.replace(y,""),!1,x)}}else{var B=v+"Label";r.hasOwnProperty(B)&&(u=r[B])}return b&&(u="("+u+")",(g||p)&&(u=" "+u),(m||p)&&(u+=" ")),u}))}o.subplotSort=function(t,e){for(var r=Math.min(t.length,e.length)+1,n=0,i=0,a=0;a<r;a++){var o=t.charCodeAt(a)||0,s=e.charCodeAt(a)||0,l=o>=48&&o<=57,c=s>=48&&s<=57;if(l&&(n=10*n+o-48),c&&(i=10*i+s-48),!l||!c){if(n!==i)return n-i;if(o!==s)return o-s}}return i-n};var v=2e9;o.seedPseudoRandom=function(){v=2e9},o.pseudoRandom=function(){var t=v;return v=(69069*v+1)%4294967296,Math.abs(v-t)<429496729?o.pseudoRandom():v/4294967296},o.fillText=function(t,e,r){var n=Array.isArray(r)?function(t){r.push(t)}:function(t){r.text=t},i=o.extractOption(t,e,"htx","hovertext");if(o.isValidTextValue(i))return n(i);var a=o.extractOption(t,e,"tx","text");return o.isValidTextValue(a)?n(a):void 0},o.isValidTextValue=function(t){return t||0===t},o.formatPercent=function(t,e){e=e||0;for(var r=(Math.round(100*t*Math.pow(10,e))*Math.pow(.1,e)).toFixed(e)+"%",n=0;n<e;n++)-1!==r.indexOf(".")&&(r=(r=r.replace("0%","%")).replace(".%","%"));return r},o.isHidden=function(t){var e=window.getComputedStyle(t).display;return!e||"none"===e},o.strTranslate=function(t,e){return t||e?"translate("+t+","+e+")":""},o.strRotate=function(t){return t?"rotate("+t+")":""},o.strScale=function(t){return 1!==t?"scale("+t+")":""},o.getTextTransform=function(t){var e=t.noCenter,r=t.textX,n=t.textY,i=t.targetX,a=t.targetY,s=t.anchorX||0,l=t.anchorY||0,c=t.rotate,u=t.scale;return u?u>1&&(u=1):u=0,o.strTranslate(i-u*(r+s),a-u*(n+l))+o.strScale(u)+(c?"rotate("+c+(e?"":" "+r+" "+n)+")":"")},o.ensureUniformFontSize=function(t,e){var r=o.extendFlat({},e);return r.size=Math.max(e.size,t._fullLayout.uniformtext.minsize||0),r},o.join2=function(t,e,r){var n=t.length;return n>1?t.slice(0,-1).join(e)+r+t[n-1]:t.join(e)},o.bigFont=function(t){return Math.round(1.2*t)};var x=o.getFirefoxVersion(),I=null!==x&&x<86;o.getPositionFromD3Event=function(){return I?[d3.event.layerX,d3.event.layerY]:[d3.event.offsetX,d3.event.offsetY]}})),rules={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var selector in rules){var fullSelector=selector.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");lib_1.addStyleRule(fullSelector,rules[selector])}var hasHover,ReflectOwnKeys,server=!1,hasHover_1=hasHover="function"==typeof commonjsGlobal.matchMedia?!commonjsGlobal.matchMedia("(hover: none)").matches:server,R="object"==typeof Reflect?Reflect:null,ReflectApply=R&&"function"==typeof R.apply?R.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};function ProcessEmitWarning(t){console&&console.warn&&console.warn(t)}ReflectOwnKeys=R&&"function"==typeof R.ownKeys?R.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var NumberIsNaN=Number.isNaN||function(t){return t!=t};function EventEmitter$3(){EventEmitter$3.init.call(this)}var events$1=EventEmitter$3,once_1=once;EventEmitter$3.EventEmitter=EventEmitter$3,EventEmitter$3.prototype._events=void 0,EventEmitter$3.prototype._eventsCount=0,EventEmitter$3.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function _getMaxListeners(t){return void 0===t._maxListeners?EventEmitter$3.defaultMaxListeners:t._maxListeners}function _addListener(t,e,r,n){var i,a,o;if(checkListener(r),void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),o=a[e]),void 0===o)o=a[e]=r,++t._eventsCount;else if("function"==typeof o?o=a[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(i=_getMaxListeners(t))>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=o.length,ProcessEmitWarning(s)}return t}function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=onceWrapper.bind(n);return i.listener=r,n.wrapFn=i,i}function _listeners(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?unwrapListeners(i):arrayClone(i,i.length)}function listenerCount(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function arrayClone(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function spliceOne(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function unwrapListeners(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function once(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,a),n(r)}function a(){"function"==typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}eventTargetAgnosticAddListener(t,e,a,{once:!0}),"error"!==e&&addErrorHandlerIfEventEmitter(t,i,{once:!0})}))}function addErrorHandlerIfEventEmitter(t,e,r){"function"==typeof t.on&&eventTargetAgnosticAddListener(t,"error",e,r)}function eventTargetAgnosticAddListener(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(a){n.once&&t.removeEventListener(e,i),r(a)}))}}Object.defineProperty(EventEmitter$3,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(t){if("number"!=typeof t||t<0||NumberIsNaN(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");defaultMaxListeners=t}}),EventEmitter$3.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter$3.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||NumberIsNaN(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},EventEmitter$3.prototype.getMaxListeners=function(){return _getMaxListeners(this)},EventEmitter$3.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var s=i[t];if(void 0===s)return!1;if("function"==typeof s)ReflectApply(s,this,e);else{var l=s.length,c=arrayClone(s,l);for(r=0;r<l;++r)ReflectApply(c[r],this,e)}return!0},EventEmitter$3.prototype.addListener=function(t,e){return _addListener(this,t,e,!1)},EventEmitter$3.prototype.on=EventEmitter$3.prototype.addListener,EventEmitter$3.prototype.prependListener=function(t,e){return _addListener(this,t,e,!0)},EventEmitter$3.prototype.once=function(t,e){return checkListener(e),this.on(t,_onceWrap(this,t,e)),this},EventEmitter$3.prototype.prependOnceListener=function(t,e){return checkListener(e),this.prependListener(t,_onceWrap(this,t,e)),this},EventEmitter$3.prototype.removeListener=function(t,e){var r,n,i,a,o;if(checkListener(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,a=r.length-1;a>=0;a--)if(r[a]===e||r[a].listener===e){o=r[a].listener,i=a;break}if(i<0)return this;0===i?r.shift():spliceOne(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,o||e)}return this},EventEmitter$3.prototype.off=EventEmitter$3.prototype.removeListener,EventEmitter$3.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,a=Object.keys(r);for(n=0;n<a.length;++n)"removeListener"!==(i=a[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},EventEmitter$3.prototype.listeners=function(t){return _listeners(this,t,!0)},EventEmitter$3.prototype.rawListeners=function(t){return _listeners(this,t,!1)},EventEmitter$3.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):listenerCount.call(t,e)},EventEmitter$3.prototype.listenerCount=listenerCount,EventEmitter$3.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]},events$1.once=once_1;var EventEmitter$2=events$1.EventEmitter,Events={init:function(t){if(t._ev instanceof EventEmitter$2)return t;var e=new EventEmitter$2,r=new EventEmitter$2;return t._ev=e,t._internalEv=r,t.on=e.on.bind(e),t.once=e.once.bind(e),t.removeListener=e.removeListener.bind(e),t.removeAllListeners=e.removeAllListeners.bind(e),t._internalOn=r.on.bind(r),t._internalOnce=r.once.bind(r),t._removeInternalListener=r.removeListener.bind(r),t._removeAllInternalListeners=r.removeAllListeners.bind(r),t.emit=function(n,i){"undefined"!=typeof jQuery&&jQuery(t).trigger(n,i),e.emit(n,i),r.emit(n,i)},t},triggerHandler:function(t,e,r){var n,i;"undefined"!=typeof jQuery&&(n=jQuery(t).triggerHandler(e,r));var a=t._ev;if(!a)return n;var o,s=a._events[e];if(!s)return n;function l(t){return t.listener?(a.removeListener(e,t.listener),t.fired?void 0:(t.fired=!0,t.listener.apply(a,[r]))):t.apply(a,[r])}for(s=Array.isArray(s)?s:[s],o=0;o<s.length-1;o++)l(s[o]);return i=l(s[o]),void 0!==n?n:i},purge:function(t){return delete t._ev,delete t.on,delete t.once,delete t.removeListener,delete t.removeAllListeners,delete t.emit,delete t._ev,delete t._internalEv,delete t._internalOn,delete t._internalOnce,delete t._removeInternalListener,delete t._removeAllInternalListeners,t}},events=Events,dfltConfig$2=plot_config.dfltConfig;function copyArgArray(t,e){for(var r,n=[],i=0;i<e.length;i++)r=e[i],n[i]=r===t?r:"object"==typeof r?Array.isArray(r)?lib_1.extendDeep([],r):lib_1.extendDeepAll({},r):r;return n}var queue={add:function(t,e,r,n,i){var a,o;t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},o=t.undoQueue.index,t.autoplay?t.undoQueue.inSequence||(t.autoplay=!1):(!t.undoQueue.sequence||t.undoQueue.beginSequence?(a={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},t.undoQueue.queue.splice(o,t.undoQueue.queue.length-o,a),t.undoQueue.index+=1):a=t.undoQueue.queue[o-1],t.undoQueue.beginSequence=!1,a&&(a.undo.calls.unshift(e),a.undo.args.unshift(r),a.redo.calls.push(n),a.redo.args.push(i)),t.undoQueue.queue.length>dfltConfig$2.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--))},startSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},stopSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},undo:function(t){var e,r;if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)){for(t.undoQueue.index--,e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,r=0;r<e.undo.calls.length;r++)queue.plotDo(t,e.undo.calls[r],e.undo.args[r]);t.undoQueue.inSequence=!1,t.autoplay=!1}},redo:function(t){var e,r;if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)){for(e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,r=0;r<e.redo.calls.length;r++)queue.plotDo(t,e.redo.calls[r],e.redo.args[r]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++}},plotDo:function(t,e,r){t.autoplay=!0,r=copyArgArray(t,r),e.apply(null,r)}},queue_1=queue,frame_attributes={_isLinkedToArray:"frames_entry",group:{valType:"string",description:["An identifier that specifies the group to which the frame belongs,","used by animate to select a subset of frames."].join(" ")},name:{valType:"string",description:"A label by which to identify the frame"},traces:{valType:"any",description:["A list of trace indices that identify the respective traces in the","data attribute"].join(" ")},baseframe:{valType:"string",description:["The name of the frame into which this frame's properties are merged","before applying. This is used to unify properties and avoid needing","to specify the same values for the same properties in multiple frames."].join(" ")},data:{valType:"any",description:["A list of traces this frame modifies. The format is identical to the","normal trace definition."].join(" ")},layout:{valType:"any",description:["Layout properties which this frame modifies. The format is identical","to the normal layout definition."].join(" ")}},extendFlat$e=lib_1.extendFlat,isPlainObject$2=lib_1.isPlainObject,traceOpts={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"],description:["trace attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full (re)plot starting by clearing `gd.calcdata`","to force it to be regenerated","*clearAxisTypes* resets the types of the axes this trace is on, because new data could","cause the automatic axis type detection to change. Log type will not be cleared, as that","is never automatically chosen so must have been user-specified.","*plot* (re)plots but without first clearing `gd.calcdata`.","*style* only calls `module.style` (or module.editStyle) for all trace modules and redraws the legend.","*markerSize* is like *style*, but propagate axis-range changes due to scatter `marker.size`","*colorbars* only redraws colorbars."].join(" ")},layoutOpts={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"],description:["layout attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full (re)plot starting by clearing `gd.calcdata`","to force it to be regenerated","*plot* (re)plots but without first clearing `gd.calcdata`.","*legend* only redraws the legend.","*ticks* only redraws axis ticks, labels, and gridlines.","*axrange* minimal sequence when updating axis ranges.","*layoutstyle* reapplies global and SVG cartesian axis styles.","*modebar* just updates the modebar.","*camera* just updates the camera settings for gl3d scenes.","*arraydraw* allows component arrays to invoke the redraw routines just for the","component(s) that changed.","*colorbars* only redraws colorbars."].join(" ")},traceEditTypeFlags=traceOpts.flags.slice().concat(["fullReplot"]),layoutEditTypeFlags=layoutOpts.flags.slice().concat("layoutReplot"),edit_types={traces:traceOpts,layout:layoutOpts,traceFlags:function(){return falseObj(traceEditTypeFlags)},layoutFlags:function(){return falseObj(layoutEditTypeFlags)},update:function(t,e){var r=e.editType;if(r&&"none"!==r)for(var n=r.split("+"),i=0;i<n.length;i++)t[n[i]]=!0},overrideAll:overrideAll$6};function falseObj(t){for(var e={},r=0;r<t.length;r++)e[t[r]]=!1;return e}function overrideAll$6(t,e,r){var n=extendFlat$e({},t);for(var i in n){var a=n[i];isPlainObject$2(a)&&(n[i]=overrideOne(a,e,r,i))}return"from-root"===r&&(n.editType=e),n}function overrideOne(t,e,r,n){if(t.valType){var i=extendFlat$e({},t);if(i.editType=e,Array.isArray(t.items)){i.items=new Array(t.items.length);for(var a=0;a<t.items.length;a++)i.items[a]=overrideOne(t.items[a],e)}return i}return overrideAll$6(t,e,"_"===n.charAt(0)?"nested":"from-root")}var plot_schema=createCommonjsModule((function(t,e){var r=plot_config.configAttributes,n=lib_1.extendDeepAll,i=lib_1.isPlainObject,a=lib_1.isArrayOrTypedArray,o=lib_1.nestedProperty,s=lib_1.valObjectMeta,l="_isSubplotObj",c="_isLinkedToArray",u="_deprecated",d=[l,c,"_arrayAttrRegexps",u];function h(t,e,r){if(!t)return!1;if(t._isLinkedToArray)if(g(e[r]))r++;else if(r<e.length)return!1;for(;r<e.length;r++){var n=t[e[r]];if(!i(n))break;if(t=n,r===e.length-1)break;if(t._isLinkedToArray){if(!g(e[++r]))return!1}else if("info_array"===t.valType){var a=e[++r];if(!g(a))return!1;var o=t.items;if(Array.isArray(o)){if(a>=o.length)return!1;if(2===t.dimensions){if(r++,e.length===r)return t;var s=e[r];if(!g(s))return!1;t=o[a][s]}else t=o[a]}else t=o}}return t}function g(t){return t===Math.round(t)&&t>=0}function f(){var t,e,r={};for(t in n(r,layout_attributes$4),registry.subplotsRegistry){if((e=registry.subplotsRegistry[t]).layoutAttributes)if(Array.isArray(e.attr))for(var i=0;i<e.attr.length;i++)y(r,e,e.attr[i]);else y(r,e,"subplot"===e.attr?e.name:e.attr)}for(t in registry.componentsRegistry){var a=(e=registry.componentsRegistry[t]).schema;if(a&&(a.subplots||a.layout)){var o=a.subplots;if(o&&o.xaxis&&!o.yaxis)for(var s in o.xaxis)delete r.yaxis[s]}else"colorscale"===e.name?n(r,e.layoutAttributes):e.layoutAttributes&&b(r,e.layoutAttributes,e.name)}return{layoutAttributes:m(r)}}function p(){var t={frames:n({},frame_attributes)};return m(t),t.frames}function m(t){return function(t){function r(t){return{valType:"string",description:"Sets the source reference on Chart Studio Cloud for `"+t+"`.",editType:"none"}}function n(t,n,a){e.isValObject(t)?!0!==t.arrayOk&&"data_array"!==t.valType||(a[n+"src"]=r(n)):i(t)&&(t.role="object")}e.crawl(t,n)}(t),function(t){function r(t,e,r){if(t){var n=t._isLinkedToArray;n&&(delete t._isLinkedToArray,r[e]={items:{}},r[e].items[n]=t,r[e].role="object")}}e.crawl(t,r)}(t),function(t){function e(t){for(var r in t)if(i(t[r]))e(t[r]);else if(Array.isArray(t[r]))for(var n=0;n<t[r].length;n++)e(t[r][n]);else t[r]instanceof RegExp&&(t[r]=t[r].toString())}e(t)}(t),t}function y(t,e,r){var i=o(t,r),a=n({},e.layoutAttributes);a._isSubplotObj=!0,i.set(a)}function b(t,e,r){var i=o(t,r);i.set(n(i.get()||{},e))}e.IS_SUBPLOT_OBJ=l,e.IS_LINKED_TO_ARRAY=c,e.DEPRECATED=u,e.UNDERSCORE_ATTRS=d,e.get=function(){var t={};registry.allTypes.forEach((function(r){t[r]=function(t){var r,i;r=registry.modules[t]._module,i=r.basePlotModule;var a={type:null},s=n({},attributes$r),l=n({},r.attributes);e.crawl(l,(function(t,e,r,n,i){o(s,i).set(void 0),void 0===t&&o(l,i).set(void 0)})),n(a,s),registry.traceIs(t,"noOpacity")&&delete a.opacity;registry.traceIs(t,"showLegend")||(delete a.showlegend,delete a.legendgroup);registry.traceIs(t,"noHover")&&(delete a.hoverinfo,delete a.hoverlabel);r.selectPoints||delete a.selectedpoints;n(a,l),i.attributes&&n(a,i.attributes);a.type=t;var c={meta:r.meta||{},categories:r.categories||{},animatable:Boolean(r.animatable),type:t,attributes:m(a)};if(r.layoutAttributes){var u={};n(u,r.layoutAttributes),c.layoutAttributes=m(u)}r.animatable||e.crawl(c,(function(t){e.isValObject(t)&&"anim"in t&&delete t.anim}));return c}(r)}));var i={};return Object.keys(registry.transformsRegistry).forEach((function(t){i[t]=function(t){var e=registry.transformsRegistry[t],r=n({},e.attributes);return Object.keys(registry.componentsRegistry).forEach((function(e){var n=registry.componentsRegistry[e];n.schema&&n.schema.transforms&&n.schema.transforms[t]&&Object.keys(n.schema.transforms[t]).forEach((function(e){b(r,n.schema.transforms[t][e],e)}))})),{attributes:m(r)}}(t)})),{defs:{valObjects:s,metaKeys:d.concat(["description","role","editType","impliedEdits"]),editType:{traces:edit_types.traces,layout:edit_types.layout},impliedEdits:{description:["Sometimes when an attribute is changed, other attributes","must be altered as well in order to achieve the intended","result. For example, when `range` is specified, it is","important to set `autorange` to `false` or the new `range`","value would be lost in the redraw. `impliedEdits` is the","mechanism to do this: `impliedEdits: {autorange: false}`.","Each key is a relative paths to the attribute string to","change, using *^* to ascend into the parent container,","for example `range[0]` has `impliedEdits: {*^autorange*: false}`.","A value of `undefined` means that the attribute will not be","changed, but its previous value should be recorded in case","we want to reverse this change later. For example, `autorange`","has `impliedEdits: {*range[0]*: undefined, *range[1]*:undefined}","because the range will likely be changed by redraw."].join(" ")}},traces:t,layout:f(),transforms:i,frames:p(),animation:m(animation_attributes),config:m(r)}},e.crawl=function(t,r,n,a){var o=n||0;a=a||"",Object.keys(t).forEach((function(n){var s=t[n];if(-1===d.indexOf(n)){var l=(a?a+".":"")+n;r(s,n,t,o,l),e.isValObject(s)||i(s)&&"impliedEdits"!==n&&e.crawl(s,r,o+1,l)}}))},e.isValObject=function(t){return t&&void 0!==t.valType},e.findArrayAttributes=function(t){var r,n,o=[],s=[],l=[];function c(t,e,n,i){s=s.slice(0,i).concat([e]),l=l.slice(0,i).concat([t&&t._isLinkedToArray]),t&&("data_array"===t.valType||!0===t.arrayOk)&&!("colorbar"===s[i-1]&&("ticktext"===e||"tickvals"===e))&&u(r,0,"")}function u(t,e,r){var c=t[s[e]],d=r+s[e];if(e===s.length-1)a(c)&&o.push(n+d);else if(l[e]){if(Array.isArray(c))for(var h=0;h<c.length;h++)i(c[h])&&u(c[h],e+1,d+"["+h+"].")}else i(c)&&u(c,e+1,d+".")}r=t,n="",e.crawl(attributes$r,c),t._module&&t._module.attributes&&e.crawl(t._module.attributes,c);var d=t.transforms;if(d)for(var h=0;h<d.length;h++){var g=d[h],f=g._module;f&&(n="transforms["+h+"].",r=g,e.crawl(f.attributes,c))}return o},e.getTraceValObject=function(t,e){var r,n,i=e[0],a=1;if("transforms"===i){if(1===e.length)return attributes$r.transforms;var o=t.transforms;if(!Array.isArray(o)||!o.length)return!1;var s=e[1];if(!g(s)||s>=o.length)return!1;n=(r=(registry.transformsRegistry[o[s].type]||{}).attributes)&&r[e[2]],a=3}else{var l=t._module;if(l||(l=(registry.modules[t.type||attributes$r.type.dflt]||{})._module),!l)return!1;if(!(n=(r=l.attributes)&&r[i])){var c=l.basePlotModule;c&&c.attributes&&(n=c.attributes[i])}n||(n=attributes$r[i])}return h(n,e,a)},e.getLayoutValObject=function(t,e){var r=function(t,e){var r,n,i,a,o=t._basePlotModules;if(o){var s;for(r=0;r<o.length;r++){if((i=o[r]).attrRegex&&i.attrRegex.test(e)){if(i.layoutAttrOverrides)return i.layoutAttrOverrides;!s&&i.layoutAttributes&&(s=i.layoutAttributes)}var l=i.baseLayoutAttrOverrides;if(l&&e in l)return l[e]}if(s)return s}var c=t._modules;if(c)for(r=0;r<c.length;r++)if((a=c[r].layoutAttributes)&&e in a)return a[e];for(n in registry.componentsRegistry){if("colorscale"===(i=registry.componentsRegistry[n]).name&&0===e.indexOf("coloraxis"))return i.layoutAttributes[e];if(!i.schema&&e===i.name)return i.layoutAttributes}return e in layout_attributes$4&&layout_attributes$4[e]}(t,e[0]);return h(r,e,1)}})),TEMPLATEITEMNAME="templateitemname",templateAttrs={name:{valType:"string",editType:"none",description:["When used in a template, named items are created in the output figure","in addition to any items the figure already has in this array.","You can modify these items in the output figure by making your own","item with `templateitemname` matching this `name`","alongside your modifications (including `visible: false` or","`enabled: false` to hide it).","Has no effect outside of a template."].join(" ")}};templateAttrs[TEMPLATEITEMNAME]={valType:"string",editType:"calc",description:["Used to refer to a named item in this array in the template. Named","items from the template will be created even without a matching item","in the input figure, but you can modify one by making an item with","`templateitemname` matching its `name`, alongside your modifications","(including `visible: false` or `enabled: false` to hide it).","If there is no template or no matching item, this item will be","hidden unless you explicitly show it with `visible: true`."].join(" ")};var templatedArray$8=function(t,e){return e._isLinkedToArray=t,e.name=templateAttrs.name,e[TEMPLATEITEMNAME]=templateAttrs[TEMPLATEITEMNAME],e},traceTemplater=function(t){var e,r,n={};for(e in t)r=t[e],Array.isArray(r)&&r.length&&(n[e]=0);return{newTrace:function(i){var a={type:e=lib_1.coerce(i,{},attributes$r,"type"),_template:null};if(e in n){r=t[e];var o=n[e]%r.length;n[e]++,a._template=r[o]}return a}}},newContainer=function(t,e,r){var n=t._template,i=n&&(n[e]||r&&n[r]);return lib_1.isPlainObject(i)||(i=null),t[e]={_template:i}},arrayTemplater=function(t,e,r){var n=t._template,i=n&&n[arrayDefaultKey(e)],a=n&&n[e];Array.isArray(a)&&a.length||(a=[]);var o={};return{newItem:function(t){var e={name:t.name,_input:t},n=e[TEMPLATEITEMNAME]=t[TEMPLATEITEMNAME];if(!validItemName(n))return e._template=i,e;for(var s=0;s<a.length;s++){var l=a[s];if(l.name===n)return o[n]=1,e._template=l,e}return e[r]=t[r]||!1,e._template=!1,e},defaultItems:function(){for(var t=[],e=0;e<a.length;e++){var r=a[e],n=r.name;if(validItemName(n)&&!o[n]){var i={_template:r,name:n,_input:{_templateitemname:n}};i[TEMPLATEITEMNAME]=r[TEMPLATEITEMNAME],t.push(i),o[n]=1}}return t}}};function validItemName(t){return t&&"string"==typeof t}function arrayDefaultKey(t){var e=t.length-1;return"s"!==t.charAt(e)&&lib_1.warn("bad argument to arrayDefaultKey: "+t),t.substr(0,t.length-1)+"defaults"}var arrayDefaultKey_1=arrayDefaultKey,arrayEditor$5=function(t,e,r){var n=(lib_1.nestedProperty(t,e).get()||[]).length,i=r._index,a=i>=n&&(r._input||{})._templateitemname;a&&(i=n);var o,s=e+"["+i+"]";function l(){o={},a&&(o[s]={},o[s][TEMPLATEITEMNAME]=a)}function c(t,e){a?lib_1.nestedProperty(o[s],t).set(e):o[s+"."+t]=e}function u(){var t=o;return l(),t}return l(),{modifyBase:function(t,e){o[t]=e},modifyItem:c,getUpdateObj:u,applyUpdate:function(e,r){e&&c(e,r);var n=u();for(var i in n)lib_1.nestedProperty(t,i).set(n[i])}}},plot_template={templatedArray:templatedArray$8,traceTemplater:traceTemplater,newContainer:newContainer,arrayTemplater:arrayTemplater,arrayDefaultKey:arrayDefaultKey_1,arrayEditor:arrayEditor$5},counterRegex$3=regex.counter,constants$c={idRegex:{x:counterRegex$3("x","( domain)?"),y:counterRegex$3("y","( domain)?")},attrRegex:counterRegex$3("[xy]axis"),xAxisMatch:counterRegex$3("xaxis"),yAxisMatch:counterRegex$3("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}},axis_ids=createCommonjsModule((function(t,e){function r(t,e){if(e&&e.length)for(var r=0;r<e.length;r++)if(e[r][t])return!0;return!1}e.id2name=function(t){if("string"==typeof t&&t.match(constants$c.AX_ID_PATTERN)){var e=t.split(" ")[0].substr(1);return"1"===e&&(e=""),t.charAt(0)+"axis"+e}},e.name2id=function(t){if(t.match(constants$c.AX_NAME_PATTERN)){var e=t.substr(5);return"1"===e&&(e=""),t.charAt(0)+e}},e.cleanId=function(t,e,r){var n=/( domain)$/.test(t);if("string"==typeof t&&t.match(constants$c.AX_ID_PATTERN)&&(!e||t.charAt(0)===e)&&(!n||r)){var i=t.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===i&&(i=""),t.charAt(0)+i+(n&&r?" domain":"")}},e.list=function(t,r,n){var i=t._fullLayout;if(!i)return[];var a,o=e.listIds(t,r),s=new Array(o.length);for(a=0;a<o.length;a++){var l=o[a];s[a]=i[l.charAt(0)+"axis"+l.substr(1)]}if(!n){var c=i._subplots.gl3d||[];for(a=0;a<c.length;a++){var u=i[c[a]];r?s.push(u[r+"axis"]):s.push(u.xaxis,u.yaxis,u.zaxis)}}return s},e.listIds=function(t,e){var r=t._fullLayout;if(!r)return[];var n=r._subplots;return e?n[e+"axis"]:n.xaxis.concat(n.yaxis)},e.getFromId=function(t,r,n){var i=t._fullLayout;return r=void 0===r||"string"!=typeof r?r:r.replace(" domain",""),"x"===n?r=r.replace(/y[0-9]*/,""):"y"===n&&(r=r.replace(/x[0-9]*/,"")),i[e.id2name(r)]},e.getFromTrace=function(t,r,n){var i=t._fullLayout,a=null;if(registry.traceIs(r,"gl3d")){var o=r.scene;"scene"===o.substr(0,5)&&(a=i[o][n+"axis"])}else a=e.getFromId(t,r[n+"axis"]||n);return a},e.idSort=function(t,e){var r=t.charAt(0),n=e.charAt(0);return r!==n?r>n?1:-1:+(t.substr(1)||1)-+(e.substr(1)||1)},e.ref2id=function(t){return!!/^[xyz]/.test(t)&&t.split(" ")[0]},e.isLinked=function(t,e){return r(e,t._axisMatchGroups)||r(e,t._axisConstraintGroups)}}));function clearOutlineControllers$2(t){var e=t._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()}function clearSelect$3(t){var e=t._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),t._fullLayout._drawing=!1}var handle_outline={clearOutlineControllers:clearOutlineControllers$2,clearSelect:clearSelect$3},SUBPLOT_PATTERN=constants$c.SUBPLOT_PATTERN,getSubplotCalcData=function(t,e,r){var n=registry.subplotsRegistry[e];if(!n)return[];for(var i=n.attr,a=[],o=0;o<t.length;o++){var s=t[o];s[0].trace[i]===r&&a.push(s)}return a},getModuleCalcData$1=function(t,e){var r,n=[],i=[];if(!(r="string"==typeof e?registry.getModule(e).plot:"function"==typeof e?e:e.plot))return[n,t];for(var a=0;a<t.length;a++){var o=t[a],s=o[0].trace;!0===s.visible&&0!==s._length&&(s._module.plot===r?n.push(o):i.push(o))}return[n,i]},getSubplotData$1=function(t,e,r){if(!registry.subplotsRegistry[e])return[];var n,i,a,o=registry.subplotsRegistry[e].attr,s=[];if("gl2d"===e){var l=r.match(SUBPLOT_PATTERN);i="x"+l[1],a="y"+l[2]}for(var c=0;c<t.length;c++)n=t[c],"gl2d"===e&&registry.traceIs(n,"gl2d")?n[o[0]]===i&&n[o[1]]===a&&s.push(n):n[o]===r&&s.push(n);return s},get_data={getSubplotCalcData:getSubplotCalcData,getModuleCalcData:getModuleCalcData$1,getSubplotData:getSubplotData$1},command=createCommonjsModule((function(t,e){function r(t,e,r){var n,i,a,o=!1;if("data"===e.type)n=t._fullData[null!==e.traces?e.traces[0]:0];else{if("layout"!==e.type)return!1;n=t._fullLayout}return i=lib_1.nestedProperty(n,e.prop).get(),(a=r[e.type]=r[e.type]||{}).hasOwnProperty(e.prop)&&a[e.prop]!==i&&(o=!0),a[e.prop]=i,{changed:o,value:i}}function n(t,e){var r=[],n=e[0],i={};if("string"==typeof n)i[n]=e[1];else{if(!lib_1.isPlainObject(n))return r;i=n}return a(i,(function(t,e,n){r.push({type:"layout",prop:t,value:n})}),"",0),r}function i(t,e){var r,n,i,o,s=[];if(n=e[0],i=e[1],r=e[2],o={},"string"==typeof n)o[n]=i;else{if(!lib_1.isPlainObject(n))return s;o=n,void 0===r&&(r=i)}return void 0===r&&(r=null),a(o,(function(e,n,i){var a,o;if(Array.isArray(i)){o=i.slice();var l=Math.min(o.length,t.data.length);r&&(l=Math.min(l,r.length)),a=[];for(var c=0;c<l;c++)a[c]=r?r[c]:c}else o=i,a=r?r.slice():null;if(null===a)Array.isArray(o)&&(o=o[0]);else if(Array.isArray(a)){if(!Array.isArray(o)){var u=o;o=[];for(var d=0;d<a.length;d++)o[d]=u}o.length=Math.min(a.length,o.length)}s.push({type:"data",prop:e,traces:a,value:o})}),"",0),s}function a(t,e,r,n){Object.keys(t).forEach((function(i){var o=t[i];if("_"!==i[0]){var s=r+(n>0?".":"")+i;lib_1.isPlainObject(o)?a(o,e,s,n+1):e(s,i,o)}}))}e.manageCommandObserver=function(t,n,i,a){var o={},s=!0;n&&n._commandObserver&&(o=n._commandObserver),o.cache||(o.cache={}),o.lookupTable={};var l=e.hasSimpleAPICommandBindings(t,i,o.lookupTable);if(n&&n._commandObserver){if(l)return o;if(n._commandObserver.remove)return n._commandObserver.remove(),n._commandObserver=null,o}if(l){r(t,l,o.cache),o.check=function(){if(s){var e=r(t,l,o.cache);return e.changed&&a&&void 0!==o.lookupTable[e.value]&&(o.disable(),Promise.resolve(a({value:e.value,type:l.type,prop:l.prop,traces:l.traces,index:o.lookupTable[e.value]})).then(o.enable,o.enable)),e.changed}};for(var c=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],u=0;u<c.length;u++)t._internalOn(c[u],o.check);o.remove=function(){for(var e=0;e<c.length;e++)t._removeInternalListener(c[e],o.check)}}else lib_1.log("Unable to automatically bind plot updates to API command"),o.lookupTable={},o.remove=function(){};return o.disable=function(){s=!1},o.enable=function(){s=!0},n&&(n._commandObserver=o),o},e.hasSimpleAPICommandBindings=function(t,r,n){var i,a,o=r.length;for(i=0;i<o;i++){var s,l=r[i],c=l.method,u=l.args;if(Array.isArray(u)||(u=[]),!c)return!1;var d=e.computeAPICommandBindings(t,c,u);if(1!==d.length)return!1;if(a){if((s=d[0]).type!==a.type)return!1;if(s.prop!==a.prop)return!1;if(Array.isArray(a.traces)){if(!Array.isArray(s.traces))return!1;s.traces.sort();for(var h=0;h<a.traces.length;h++)if(a.traces[h]!==s.traces[h])return!1}else if(s.prop!==a.prop)return!1}else a=d[0],Array.isArray(a.traces)&&a.traces.sort();var g=(s=d[0]).value;if(Array.isArray(g)){if(1!==g.length)return!1;g=g[0]}n&&(n[g]=i)}return a},e.executeAPICommand=function(t,e,r){if("skip"===e)return Promise.resolve();var n=registry.apiMethodRegistry[e],i=[t];Array.isArray(r)||(r=[]);for(var a=0;a<r.length;a++)i.push(r[a]);return n.apply(null,i).catch((function(t){return lib_1.warn("API call to Plotly."+e+" rejected.",t),Promise.reject(t)}))},e.computeAPICommandBindings=function(t,e,r){var a;switch(Array.isArray(r)||(r=[]),e){case"restyle":a=i(t,r);break;case"relayout":a=n(t,r);break;case"update":a=i(t,[r[0],r[2]]).concat(n(t,[r[1]]));break;case"animate":a=function(t,e){return Array.isArray(e[0])&&1===e[0].length&&-1!==["string","number"].indexOf(typeof e[0][0])?[{type:"layout",prop:"_currentFrame",value:e[0][0].toString()}]:[]}(0,r);break;default:a=[]}return a}})),plots_1=createCommonjsModule((function(t){var e=require$$0.timeFormatLocale,r=require$$1.formatLocale,n=numerical.BADNUM,i=handle_outline.clearSelect,a=get_data.getModuleCalcData,o=lib_1.relinkPrivateKeys,s=lib_1._,l=t.exports={};lib_1.extendFlat(l,registry),l.attributes=attributes$r,l.attributes.type.values=l.allTypes,l.fontAttrs=font_attributes,l.layoutAttributes=layout_attributes$4,l.fontWeight="normal";var c=l.transformsRegistry;l.executeAPICommand=command.executeAPICommand,l.computeAPICommandBindings=command.computeAPICommandBindings,l.manageCommandObserver=command.manageCommandObserver,l.hasSimpleAPICommandBindings=command.hasSimpleAPICommandBindings,l.redrawText=function(t){return t=lib_1.getGraphDiv(t),new Promise((function(e){setTimeout((function(){t._fullLayout&&(registry.getComponentMethod("annotations","draw")(t),registry.getComponentMethod("legend","draw")(t),registry.getComponentMethod("colorbar","draw")(t),e(l.previousPromises(t)))}),300)}))},l.resize=function(t){var e;t=lib_1.getGraphDiv(t);var r=new Promise((function(r,n){t&&!lib_1.isHidden(t)||n(new Error("Resize must be passed a displayed plot div element.")),t._redrawTimer&&clearTimeout(t._redrawTimer),t._resolveResize&&(e=t._resolveResize),t._resolveResize=r,t._redrawTimer=setTimeout((function(){if(!t.layout||t.layout.width&&t.layout.height||lib_1.isHidden(t))r(t);else{delete t.layout.width,delete t.layout.height;var e=t.changed;t.autoplay=!0,registry.call("relayout",t,{autosize:!0}).then((function(){t.changed=e,t._resolveResize===r&&(delete t._resolveResize,r(t))}))}}),100)}));return e&&e(r),r},l.previousPromises=function(t){if((t._promises||[]).length)return Promise.all(t._promises).then((function(){t._promises=[]}))},l.addLinks=function(t){if(t._context.showLink||t._context.showSources){var e=t._fullLayout,r=lib_1.ensureSingle(e._paper,"text","js-plot-link-container",(function(t){t.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:color_1.defaultLine,"pointer-events":"all"}).each((function(){var t=d3.select(this);t.append("tspan").classed("js-link-to-tool",!0),t.append("tspan").classed("js-link-spacer",!0),t.append("tspan").classed("js-sourcelinks",!0)}))})),n=r.node(),i={y:e._paper.attr("height")-9};document.body.contains(n)&&n.getComputedTextLength()>=e.width-20?(i["text-anchor"]="start",i.x=5):(i["text-anchor"]="end",i.x=e._paper.attr("width")-7),r.attr(i);var a=r.select(".js-link-to-tool"),o=r.select(".js-link-spacer"),s=r.select(".js-sourcelinks");t._context.showSources&&t._context.showSources(t),t._context.showLink&&function(t,e){e.text("");var r=e.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(t._context.linkText+" "+String.fromCharCode(187));if(t._context.sendData)r.on("click",(function(){l.sendDataToCloud(t)}));else{var n=window.location.pathname.split("/"),i=window.location.search;r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+n[2].split(".")[0]+"/"+n[1]+i})}}(t,a),o.text(a.text()&&s.text()?" - ":"")}},l.sendDataToCloud=function(t){var e=(window.PLOTLYENV||{}).BASE_URL||t._context.plotlyServerURL;if(e){t.emit("plotly_beforeexport");var r=d3.select(t).append("div").attr("id","hiddenform").style("display","none"),n=r.append("form").attr({action:e+"/external",method:"post",target:"_blank"});return n.append("input").attr({type:"text",name:"data"}).node().value=l.graphJson(t,!1,"keepdata"),n.node().submit(),r.remove(),t.emit("plotly_afterexport"),!1}};var u=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],d=["year","month","dayMonth","dayMonthYear"];function h(t,e){var r=t._context.locale;r||(r="en-US");var n=!1,i={};function a(t){for(var r=!0,a=0;a<e.length;a++){var o=e[a];i[o]||(t[o]?i[o]=t[o]:r=!1)}r&&(n=!0)}for(var o=0;o<2;o++){for(var s=t._context.locales,l=0;l<2;l++){var c=(s[r]||{}).format;if(c&&(a(c),n))break;s=registry.localeRegistry}var u=r.split("-")[0];if(n||u===r)break;r=u}return n||a(registry.localeRegistry.en.format),i}function g(t,e){var r={_fullLayout:e},n="x"===t._id.charAt(0),i=t._mainAxis._anchorAxis,a="",o="",s="";if(i&&(s=i._mainAxis._id,a=n?t._id+s:s+t._id),!a||!e._plots[a]){a="";for(var l=t._counterAxes,c=0;c<l.length;c++){var u=l[c],d=n?t._id+u:u+t._id;o||(o=d);var h=axis_ids.getFromId(r,u);if(s&&h.overlaying===s){a=d;break}}}return a||o}function f(t){var e=t.transforms;if(Array.isArray(e)&&e.length)for(var r=0;r<e.length;r++){var n=e[r],i=n._module||c[n.type];if(i&&i.makesData)return!0}return!1}function p(t,e,r,n){for(var i=t.transforms,a=[t],o=0;o<i.length;o++){var s=i[o],l=c[s.type];l&&l.transform&&(a=l.transform(a,{transform:s,fullTrace:t,fullData:e,layout:r,fullLayout:n,transformIndex:o}))}return a}function m(t){return"string"==typeof t&&"px"===t.substr(t.length-2)&&parseFloat(t)}function y(t){var e=t.margin;if(!t._size){var r=t._size={l:Math.round(e.l),r:Math.round(e.r),t:Math.round(e.t),b:Math.round(e.b),p:Math.round(e.pad)};r.w=Math.round(t.width)-r.l-r.r,r.h=Math.round(t.height)-r.t-r.b}t._pushmargin||(t._pushmargin={}),t._pushmarginIds||(t._pushmarginIds={})}l.supplyDefaults=function(t,n){var a=n&&n.skipUpdateCalc,c=t._fullLayout||{};if(c._skipDefaults)delete c._skipDefaults;else{var g,f=t._fullLayout={},p=t.layout||{},m=t._fullData||[],b=t._fullData=[],v=t.data||[],x=t.calcdata||[],I=t._context||{};t._transitionData||l.createTransitionData(t),f._dfltTitle={plot:s(t,"Click to enter Plot title"),x:s(t,"Click to enter X axis title"),y:s(t,"Click to enter Y axis title"),colorbar:s(t,"Click to enter Colorscale title"),annotation:s(t,"new text")},f._traceWord=s(t,"trace");var B=h(t,u);if(f._mapboxAccessToken=I.mapboxAccessToken,c._initialAutoSizeIsDone){var C=c.width,F=c.height;l.supplyLayoutGlobalDefaults(p,f,B),p.width||(f.width=C),p.height||(f.height=F),l.sanitizeMargins(f)}else{l.supplyLayoutGlobalDefaults(p,f,B);var A=!p.width||!p.height,Q=f.autosize,_=I.autosizable;A&&(Q||_)?l.plotAutoSize(t,p,f):A&&l.sanitizeMargins(f),!Q&&A&&(p.width=f.width,p.height=f.height)}f._d3locale=function(t,n){return t.decimal=n.charAt(0),t.thousands=n.charAt(1),{numberFormat:function(e){try{e=r(t).format(lib_1.adjustFormat(e))}catch(t){return lib_1.warnBadFormat(e),lib_1.noFormat}return e},timeFormat:e(t).utcFormat}}(B,f.separators),f._extraFormat=h(t,d),f._initialAutoSizeIsDone=!0,f._dataLength=v.length,f._modules=[],f._visibleModules=[],f._basePlotModules=[];var w=f._subplots=function(){var t,e,r=registry.collectableSubplotTypes,n={};if(!r){r=[];var i=registry.subplotsRegistry;for(var a in i){var o=i[a].attr;if(o&&(r.push(a),Array.isArray(o)))for(e=0;e<o.length;e++)lib_1.pushUnique(r,o[e])}}for(t=0;t<r.length;t++)n[r[t]]=[];return n}(),U=f._splomAxes={x:{},y:{}},S=f._splomSubplots={};f._splomGridDflt={},f._scatterStackOpts={},f._firstScatter={},f._alignmentOpts={},f._colorAxes={},f._requestRangeslider={},f._traceUids=function(t,e){var r,n,i=e.length,a=[];for(r=0;r<t.length;r++){var o=t[r]._fullInput;o!==n&&a.push(o),n=o}var s=a.length,l=new Array(i),c={};function u(t,e){l[e]=t,c[t]=1}function d(t,e){if(t&&"string"==typeof t&&!c[t])return u(t,e),!0}for(r=0;r<i;r++){var h=e[r].uid;"number"==typeof h&&(h=String(h)),d(h,r)||(r<s&&d(a[r].uid,r)||u(lib_1.randstr(c),r))}return l}(m,v),f._globalTransforms=(t._context||{}).globalTransforms,l.supplyDataDefaults(v,b,p,f);var E=Object.keys(U.x),L=Object.keys(U.y);if(E.length>1&&L.length>1){for(registry.getComponentMethod("grid","sizeDefaults")(p,f),g=0;g<E.length;g++)lib_1.pushUnique(w.xaxis,E[g]);for(g=0;g<L.length;g++)lib_1.pushUnique(w.yaxis,L[g]);for(var T in S)lib_1.pushUnique(w.cartesian,T)}if(f._has=l._hasPlotType.bind(f),m.length===b.length)for(g=0;g<b.length;g++)o(b[g],m[g]);l.supplyLayoutModuleDefaults(p,f,b,t._transitionData);var R=f._visibleModules,k=[];for(g=0;g<R.length;g++){var G=R[g].crossTraceDefaults;G&&lib_1.pushUnique(k,G)}for(g=0;g<k.length;g++)k[g](b,f);f._hasOnlyLargeSploms=1===f._basePlotModules.length&&"splom"===f._basePlotModules[0].name&&E.length>15&&L.length>15&&0===f.shapes.length&&0===f.images.length,l.linkSubplots(b,f,m,c),l.cleanPlot(b,f,m,c);var N=!(!c._has||!c._has("gl2d")),M=!(!f._has||!f._has("gl2d")),D=!(!c._has||!c._has("cartesian"))||N,X=!(!f._has||!f._has("cartesian"))||M;D&&!X?c._bgLayer.remove():X&&!D&&(f._shouldCreateBgLayer=!0),c._zoomlayer&&!t._dragging&&i({_fullLayout:c}),function(t,e){var r,n=[];e.meta&&(r=e._meta={meta:e.meta,layout:{meta:e.meta}});for(var i=0;i<t.length;i++){var a=t[i];a.meta?n[a.index]=a._meta={meta:a.meta}:e.meta&&(a._meta={meta:e.meta}),e.meta&&(a._meta.layout={meta:e.meta})}n.length&&(r||(r=e._meta={}),r.data=n)}(b,f),o(f,c),registry.getComponentMethod("colorscale","crossTraceDefaults")(b,f),f._preGUI||(f._preGUI={}),f._tracePreGUI||(f._tracePreGUI={});var V,W=f._tracePreGUI,Z={};for(V in W)Z[V]="old";for(g=0;g<b.length;g++)Z[V=b[g]._fullInput.uid]||(W[V]={}),Z[V]="new";for(V in Z)"old"===Z[V]&&delete W[V];y(f),registry.getComponentMethod("rangeslider","makeData")(f),a||x.length!==b.length||l.supplyDefaultsUpdateCalc(x,b)}},l.supplyDefaultsUpdateCalc=function(t,e){for(var r=0;r<e.length;r++){var n=e[r],i=(t[r]||[])[0];if(i&&i.trace){var a=i.trace;if(a._hasCalcTransform){var o,s,l,c=a._arrayAttrs;for(o=0;o<c.length;o++)s=c[o],l=lib_1.nestedProperty(a,s).get().slice(),lib_1.nestedProperty(n,s).set(l)}i.trace=n}}},l.createTransitionData=function(t){t._transitionData||(t._transitionData={}),t._transitionData._frames||(t._transitionData._frames=[]),t._transitionData._frameHash||(t._transitionData._frameHash={}),t._transitionData._counter||(t._transitionData._counter=0),t._transitionData._interruptCallbacks||(t._transitionData._interruptCallbacks=[])},l._hasPlotType=function(t){var e,r=this._basePlotModules||[];for(e=0;e<r.length;e++)if(r[e].name===t)return!0;var n=this._modules||[];for(e=0;e<n.length;e++){var i=n[e].name;if(i===t)return!0;var a=registry.modules[i];if(a&&a.categories[t])return!0}return!1},l.cleanPlot=function(t,e,r,n){var i,a,o=n._basePlotModules||[];for(i=0;i<o.length;i++){var s=o[i];s.clean&&s.clean(t,e,r,n)}var l=n._has&&n._has("gl"),c=e._has&&e._has("gl");l&&!c&&void 0!==n._glcontainer&&(n._glcontainer.selectAll(".gl-canvas").remove(),n._glcontainer.selectAll(".no-webgl").remove(),n._glcanvas=null);var u=!!n._infolayer;t:for(i=0;i<r.length;i++){var d=r[i].uid;for(a=0;a<t.length;a++){if(d===t[a].uid)continue t}u&&n._infolayer.select(".cb"+d).remove()}},l.linkSubplots=function(t,e,r,n){var i,a,o=n._plots||{},s=e._plots={},l=e._subplots,c={_fullData:t,_fullLayout:e},u=l.cartesian.concat(l.gl2d||[]);for(i=0;i<u.length;i++){var d,h=u[i],f=o[h],p=axis_ids.getFromId(c,h,"x"),m=axis_ids.getFromId(c,h,"y");for(f?d=s[h]=f:(d=s[h]={}).id=h,p._counterAxes.push(m._id),m._counterAxes.push(p._id),p._subplotsWith.push(h),m._subplotsWith.push(h),d.xaxis=p,d.yaxis=m,d._hasClipOnAxisFalse=!1,a=0;a<t.length;a++){var y=t[a];if(y.xaxis===d.xaxis._id&&y.yaxis===d.yaxis._id&&!1===y.cliponaxis){d._hasClipOnAxisFalse=!0;break}}}var b,v=axis_ids.list(c,null,!0);for(i=0;i<v.length;i++){var x=null;(b=v[i]).overlaying&&(x=axis_ids.getFromId(c,b.overlaying))&&x.overlaying&&(b.overlaying=!1,x=null),b._mainAxis=x||b,x&&(b.domain=x.domain.slice()),b._anchorAxis="free"===b.anchor?null:axis_ids.getFromId(c,b.anchor)}for(i=0;i<v.length;i++)if((b=v[i])._counterAxes.sort(axis_ids.idSort),b._subplotsWith.sort(lib_1.subplotSort),b._mainSubplot=g(b,e),b._counterAxes.length&&(b.spikemode&&-1!==b.spikemode.indexOf("across")||b.automargin&&b.mirror&&"free"!==b.anchor||registry.getComponentMethod("rangeslider","isVisible")(b))){var I=1,B=0;for(a=0;a<b._counterAxes.length;a++){var C=axis_ids.getFromId(c,b._counterAxes[a]);I=Math.min(I,C.domain[0]),B=Math.max(B,C.domain[1])}I<B&&(b._counterDomainMin=I,b._counterDomainMax=B)}},l.clearExpandedTraceDefaultColors=function(t){var e,r,n;for(r=[],(e=t._module._colorAttrs)||(t._module._colorAttrs=e=[],plot_schema.crawl(t._module.attributes,(function(t,n,i,a){r[a]=n,r.length=a+1,"color"===t.valType&&void 0===t.dflt&&e.push(r.join("."))}))),n=0;n<e.length;n++){lib_1.nestedProperty(t,"_input."+e[n]).get()||lib_1.nestedProperty(t,e[n]).set(null)}},l.supplyDataDefaults=function(t,e,r,n){var i,a,s,c=n._modules,u=n._visibleModules,d=n._basePlotModules,h=0,g=0;function f(t){e.push(t);var r=t._module;r&&(lib_1.pushUnique(c,r),!0===t.visible&&lib_1.pushUnique(u,r),lib_1.pushUnique(d,t._module.basePlotModule),h++,!1!==t._input.visible&&g++)}n._transformModules=[];var m={},y=[],b=(r.template||{}).data||{},v=plot_template.traceTemplater(b);for(i=0;i<t.length;i++){if(s=t[i],(a=v.newTrace(s)).uid=n._traceUids[i],l.supplyTraceDefaults(s,a,g,n,i),a.index=i,a._input=s,a._expandedIndex=h,a.transforms&&a.transforms.length)for(var x=!1!==s.visible&&!1===a.visible,I=p(a,e,r,n),B=0;B<I.length;B++){var C=I[B],F={_template:a._template,type:a.type,uid:a.uid+B};x&&!1===C.visible&&delete C.visible,l.supplyTraceDefaults(C,F,h,n,i),o(F,C),F.index=i,F._input=s,F._fullInput=a,F._expandedIndex=h,F._expandedInput=C,f(F)}else a._fullInput=a,a._expandedInput=a,f(a);registry.traceIs(a,"carpetAxis")&&(m[a.carpet]=a),registry.traceIs(a,"carpetDependent")&&y.push(i)}for(i=0;i<y.length;i++)if((a=e[y[i]]).visible){var A=m[a.carpet];a._carpet=A,A&&A.visible?(a.xaxis=A.xaxis,a.yaxis=A.yaxis):a.visible=!1}},l.supplyAnimationDefaults=function(t){var e;t=t||{};var r={};function n(e,n){return lib_1.coerce(t||{},r,animation_attributes,e,n)}if(n("mode"),n("direction"),n("fromcurrent"),Array.isArray(t.frame))for(r.frame=[],e=0;e<t.frame.length;e++)r.frame[e]=l.supplyAnimationFrameDefaults(t.frame[e]||{});else r.frame=l.supplyAnimationFrameDefaults(t.frame||{});if(Array.isArray(t.transition))for(r.transition=[],e=0;e<t.transition.length;e++)r.transition[e]=l.supplyAnimationTransitionDefaults(t.transition[e]||{});else r.transition=l.supplyAnimationTransitionDefaults(t.transition||{});return r},l.supplyAnimationFrameDefaults=function(t){var e={};function r(r,n){return lib_1.coerce(t||{},e,animation_attributes.frame,r,n)}return r("duration"),r("redraw"),e},l.supplyAnimationTransitionDefaults=function(t){var e={};function r(r,n){return lib_1.coerce(t||{},e,animation_attributes.transition,r,n)}return r("duration"),r("easing"),e},l.supplyFrameDefaults=function(t){var e={};function r(r,n){return lib_1.coerce(t,e,frame_attributes,r,n)}return r("group"),r("name"),r("traces"),r("baseframe"),r("data"),r("layout"),e},l.supplyTraceDefaults=function(t,e,r,n,i){var a,o=n.colorway||color_1.defaults,s=o[r%o.length];function c(r,n){return lib_1.coerce(t,e,l.attributes,r,n)}var u=c("visible");c("type"),c("name",n._traceWord+" "+i),c("uirevision",n.uirevision);var d=l.getModule(e);if(e._module=d,d){var h=d.basePlotModule,g=h.attr,f=h.attributes;if(g&&f){var p=n._subplots,m="";if(u||"gl2d"!==h.name){if(Array.isArray(g))for(a=0;a<g.length;a++){var y=g[a],b=lib_1.coerce(t,e,f,y);p[y]&&lib_1.pushUnique(p[y],b),m+=b}else m=lib_1.coerce(t,e,f,g);p[h.name]&&lib_1.pushUnique(p[h.name],m)}}}return u&&(c("customdata"),c("ids"),c("meta"),registry.traceIs(e,"showLegend")?(lib_1.coerce(t,e,d.attributes.showlegend?d.attributes:l.attributes,"showlegend"),c("legendgroup"),c("legendgrouptitle.text"),c("legendrank"),e._dfltShowLegend=!0):e._dfltShowLegend=!1,d&&d.supplyDefaults(t,e,s,n),registry.traceIs(e,"noOpacity")||c("opacity"),registry.traceIs(e,"notLegendIsolatable")&&(e.visible=!!e.visible),registry.traceIs(e,"noHover")||(e.hovertemplate||lib_1.coerceHoverinfo(t,e,n),"parcats"!==e.type&&registry.getComponentMethod("fx","supplyDefaults")(t,e,s,n)),d&&d.selectPoints&&c("selectedpoints"),l.supplyTransformDefaults(t,e,n)),e},l.hasMakesDataTransform=f,l.supplyTransformDefaults=function(t,e,r){if(e._length||f(t)){var n=r._globalTransforms||[],i=r._transformModules||[];if(Array.isArray(t.transforms)||0!==n.length)for(var a=t.transforms||[],o=n.concat(a),s=e.transforms=[],l=0;l<o.length;l++){var u,d=o[l],h=d.type,g=c[h],p=!(d._module&&d._module===g),m=g&&"function"==typeof g.transform;g||lib_1.warn("Unrecognized transform type "+h+"."),g&&g.supplyDefaults&&(p||m)?((u=g.supplyDefaults(d,e,r,t)).type=h,u._module=g,lib_1.pushUnique(i,g)):u=lib_1.extendFlat({},d),s.push(u)}}},l.supplyLayoutGlobalDefaults=function(t,e,r){function n(r,n){return lib_1.coerce(t,e,l.layoutAttributes,r,n)}var i=t.template;lib_1.isPlainObject(i)&&(e.template=i,e._template=i.layout,e._dataTemplate=i.data),n("autotypenumbers");var a=lib_1.coerceFont(n,"font"),o=a.size;lib_1.coerceFont(n,"title.font",lib_1.extendFlat({},a,{size:Math.round(1.4*o)})),n("title.text",e._dfltTitle.plot),n("title.xref"),n("title.yref"),n("title.x"),n("title.y"),n("title.xanchor"),n("title.yanchor"),n("title.pad.t"),n("title.pad.r"),n("title.pad.b"),n("title.pad.l"),n("uniformtext.mode")&&n("uniformtext.minsize"),n("autosize",!(t.width&&t.height)),n("width"),n("height"),n("margin.l"),n("margin.r"),n("margin.t"),n("margin.b"),n("margin.pad"),n("margin.autoexpand"),t.width&&t.height&&l.sanitizeMargins(e),registry.getComponentMethod("grid","sizeDefaults")(t,e),n("paper_bgcolor"),n("separators",r.decimal+r.thousands),n("hidesources"),n("colorway"),n("datarevision");var s=n("uirevision");n("editrevision",s),n("selectionrevision",s),registry.getComponentMethod("modebar","supplyLayoutDefaults")(t,e),registry.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(t,e,n),n("meta"),lib_1.isPlainObject(t.transition)&&(n("transition.duration"),n("transition.easing"),n("transition.ordering")),registry.getComponentMethod("calendars","handleDefaults")(t,e,"calendar"),registry.getComponentMethod("fx","supplyLayoutGlobalDefaults")(t,e,n)},l.plotAutoSize=function(t,e,r){var n,i,a=t._context||{},o=a.frameMargins,s=lib_1.isPlotDiv(t);if(s&&t.emit("plotly_autosize"),a.fillFrame)n=window.innerWidth,i=window.innerHeight,document.body.style.overflow="hidden";else{var c=s?window.getComputedStyle(t):{};if(n=m(c.width)||m(c.maxWidth)||r.width,i=m(c.height)||m(c.maxHeight)||r.height,fastIsnumeric(o)&&o>0){var u=1-2*o;n=Math.round(u*n),i=Math.round(u*i)}}var d=l.layoutAttributes.width.min,h=l.layoutAttributes.height.min;n<d&&(n=d),i<h&&(i=h);var g=!e.width&&Math.abs(r.width-n)>1,f=!e.height&&Math.abs(r.height-i)>1;(f||g)&&(g&&(r.width=n),f&&(r.height=i)),t._initialAutoSize||(t._initialAutoSize={width:n,height:i}),l.sanitizeMargins(r)},l.supplyLayoutModuleDefaults=function(t,e,r,n){var i,a,o,s=registry.componentsRegistry,l=e._basePlotModules,c=registry.subplotsRegistry.cartesian;for(i in s)(o=s[i]).includeBasePlot&&o.includeBasePlot(t,e);for(var u in l.length||l.push(c),e._has("cartesian")&&(registry.getComponentMethod("grid","contentDefaults")(t,e),c.finalizeSubplots(t,e)),e._subplots)e._subplots[u].sort(lib_1.subplotSort);for(a=0;a<l.length;a++)(o=l[a]).supplyLayoutDefaults&&o.supplyLayoutDefaults(t,e,r);var d=e._modules;for(a=0;a<d.length;a++)(o=d[a]).supplyLayoutDefaults&&o.supplyLayoutDefaults(t,e,r);var h=e._transformModules;for(a=0;a<h.length;a++)(o=h[a]).supplyLayoutDefaults&&o.supplyLayoutDefaults(t,e,r,n);for(i in s)(o=s[i]).supplyLayoutDefaults&&o.supplyLayoutDefaults(t,e,r)},l.purge=function(t){var e=t._fullLayout||{};void 0!==e._glcontainer&&(e._glcontainer.selectAll(".gl-canvas").remove(),e._glcontainer.remove(),e._glcanvas=null),e._modeBar&&e._modeBar.destroy(),t._transitionData&&(t._transitionData._interruptCallbacks&&(t._transitionData._interruptCallbacks.length=0),t._transitionData._animationRaf&&window.cancelAnimationFrame(t._transitionData._animationRaf)),lib_1.clearThrottle(),lib_1.clearResponsive(t),delete t.data,delete t.layout,delete t._fullData,delete t._fullLayout,delete t.calcdata,delete t.empty,delete t.fid,delete t.undoqueue,delete t.undonum,delete t.autoplay,delete t.changed,delete t._promises,delete t._redrawTimer,delete t._hmlumcount,delete t._hmpixcount,delete t._transitionData,delete t._transitioning,delete t._initialAutoSize,delete t._transitioningWithDuration,delete t._dragging,delete t._dragged,delete t._dragdata,delete t._hoverdata,delete t._snapshotInProgress,delete t._editing,delete t._mouseDownTime,delete t._legendMouseDownTime,t.removeAllListeners&&t.removeAllListeners()},l.style=function(t){var e,r=t._fullLayout._visibleModules,n=[];for(e=0;e<r.length;e++){var i=r[e];i.style&&lib_1.pushUnique(n,i.style)}for(e=0;e<n.length;e++)n[e](t)},l.sanitizeMargins=function(t){if(t&&t.margin){var e,r=t.width,n=t.height,i=t.margin,a=r-(i.l+i.r),o=n-(i.t+i.b);a<0&&(e=(r-1)/(i.l+i.r),i.l=Math.floor(e*i.l),i.r=Math.floor(e*i.r)),o<0&&(e=(n-1)/(i.t+i.b),i.t=Math.floor(e*i.t),i.b=Math.floor(e*i.b))}},l.clearAutoMarginIds=function(t){t._fullLayout._pushmarginIds={}},l.allowAutoMargin=function(t,e){t._fullLayout._pushmarginIds[e]=1};l.autoMargin=function(t,e,r){var n=t._fullLayout,i=n.width,a=n.height,o=n.margin,s=lib_1.constrain(i-o.l-o.r,2,64),c=lib_1.constrain(a-o.t-o.b,2,64),u=Math.max(0,i-s),d=Math.max(0,a-c),h=n._pushmargin,g=n._pushmarginIds;if(!1!==o.autoexpand){if(r){var f=r.pad;if(void 0===f&&(f=Math.min(12,o.l,o.r,o.t,o.b)),u){var p=(r.l+r.r)/u;p>1&&(r.l/=p,r.r/=p)}if(d){var m=(r.t+r.b)/d;m>1&&(r.t/=m,r.b/=m)}var y=void 0!==r.xl?r.xl:r.x,b=void 0!==r.xr?r.xr:r.x,v=void 0!==r.yt?r.yt:r.y,x=void 0!==r.yb?r.yb:r.y;h[e]={l:{val:y,size:r.l+f},r:{val:b,size:r.r+f},b:{val:x,size:r.b+f},t:{val:v,size:r.t+f}},g[e]=1}else delete h[e],delete g[e];if(!n._replotting)return l.doAutoMargin(t)}},l.doAutoMargin=function(t){var e=t._fullLayout,r=e.width,n=e.height;e._size||(e._size={}),y(e);var i=e._size,a=e.margin,o=lib_1.extendFlat({},i),s=a.l,c=a.r,u=a.t,d=a.b,h=e._pushmargin,g=e._pushmarginIds;if(!1!==e.margin.autoexpand){for(var f in h)g[f]||delete h[f];for(var p in h.base={l:{val:0,size:s},r:{val:1,size:c},t:{val:1,size:u},b:{val:0,size:d}},h){var m=h[p].l||{},b=h[p].b||{},v=m.val,x=m.size,I=b.val,B=b.size;for(var C in h){if(fastIsnumeric(x)&&h[C].r){var F=h[C].r.val,A=h[C].r.size;if(F>v){var Q=(x*F+(A-r)*v)/(F-v),_=(A*(1-v)+(x-r)*(1-F))/(F-v);Q+_>s+c&&(s=Q,c=_)}}if(fastIsnumeric(B)&&h[C].t){var w=h[C].t.val,U=h[C].t.size;if(w>I){var S=(B*w+(U-n)*I)/(w-I),E=(U*(1-I)+(B-n)*(1-w))/(w-I);S+E>d+u&&(d=S,u=E)}}}}}var L=lib_1.constrain(r-a.l-a.r,2,64),T=lib_1.constrain(n-a.t-a.b,2,64),R=Math.max(0,r-L),k=Math.max(0,n-T);if(R){var G=(s+c)/R;G>1&&(s/=G,c/=G)}if(k){var N=(d+u)/k;N>1&&(d/=N,u/=N)}if(i.l=Math.round(s),i.r=Math.round(c),i.t=Math.round(u),i.b=Math.round(d),i.p=Math.round(a.pad),i.w=Math.round(r)-i.l-i.r,i.h=Math.round(n)-i.t-i.b,!e._replotting&&l.didMarginChange(o,i)){"_redrawFromAutoMarginCount"in e?e._redrawFromAutoMarginCount++:e._redrawFromAutoMarginCount=1;var M=3*(1+Object.keys(g).length);if(e._redrawFromAutoMarginCount<M)return registry.call("_doPlot",t);e._size=o,lib_1.warn("Too many auto-margin redraws.")}!function(t){var e=axis_ids.list(t,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach((function(t){for(var r=0;r<e.length;r++){var n=e[r][t];n&&n()}}))}(t)};var b=["l","r","t","b","p","w","h"];function v(t,e,r){var n=!1;var i=[l.previousPromises,function(){if(t._transitionData)return t._transitioning=!1,function(t){var e=Promise.resolve();if(!t)return e;for(;t.length;)e=e.then(t.shift());return e}(t._transitionData._interruptCallbacks)},r.prepareFn,l.rehover,function(){return t.emit("plotly_transitioning",[]),new Promise((function(i){t._transitioning=!0,e.duration>0&&(t._transitioningWithDuration=!0),t._transitionData._interruptCallbacks.push((function(){n=!0})),r.redraw&&t._transitionData._interruptCallbacks.push((function(){return registry.call("redraw",t)})),t._transitionData._interruptCallbacks.push((function(){t.emit("plotly_transitioninterrupted",[])}));var a=0,o=0;function s(){return a++,function(){o++,n||o!==a||function(e){if(!t._transitionData)return;(function(t){if(t)for(;t.length;)t.shift()})(t._transitionData._interruptCallbacks),Promise.resolve().then((function(){if(r.redraw)return registry.call("redraw",t)})).then((function(){t._transitioning=!1,t._transitioningWithDuration=!1,t.emit("plotly_transitioned",[])})).then(e)}(i)}}r.runFn(s),setTimeout(s())}))}],a=lib_1.syncOrAsync(i,t);return a&&a.then||(a=Promise.resolve()),a.then((function(){return t}))}l.didMarginChange=function(t,e){for(var r=0;r<b.length;r++){var n=b[r],i=t[n],a=e[n];if(!fastIsnumeric(i)||Math.abs(a-i)>1)return!0}return!1},l.graphJson=function(t,e,r,n,i,a){(i&&e&&!t._fullData||i&&!e&&!t._fullLayout)&&l.supplyDefaults(t);var o=i?t._fullData:t.data,s=i?t._fullLayout:t.layout,c=(t._transitionData||{})._frames;function u(t,e){if("function"==typeof t)return e?"_function_":null;if(lib_1.isPlainObject(t)){var n,i={};return Object.keys(t).sort().forEach((function(a){if(-1===["_","["].indexOf(a.charAt(0)))if("function"!=typeof t[a]){if("keepdata"===r){if("src"===a.substr(a.length-3))return}else if("keepstream"===r){if("string"==typeof(n=t[a+"src"])&&n.indexOf(":")>0&&!lib_1.isPlainObject(t.stream))return}else if("keepall"!==r&&"string"==typeof(n=t[a+"src"])&&n.indexOf(":")>0)return;i[a]=u(t[a],e)}else e&&(i[a]="_function")})),i}return Array.isArray(t)?t.map((function(t){return u(t,e)})):lib_1.isTypedArray(t)?lib_1.simpleMap(t,lib_1.identity):lib_1.isJSDate(t)?lib_1.ms2DateTimeLocal(+t):t}var d={data:(o||[]).map((function(t){var r=u(t);return e&&delete r.fit,r}))};if(!e&&(d.layout=u(s),i)){var h=s._size;d.layout.computed={margin:{b:h.b,l:h.l,r:h.r,t:h.t}}}return c&&(d.frames=u(c)),a&&(d.config=u(t._context,!0)),"object"===n?d:JSON.stringify(d)},l.modifyFrames=function(t,e){var r,n,i,a=t._transitionData._frames,o=t._transitionData._frameHash;for(r=0;r<e.length;r++)switch((n=e[r]).type){case"replace":i=n.value;var s=(a[n.index]||{}).name,l=i.name;a[n.index]=o[l]=i,l!==s&&(delete o[s],o[l]=i);break;case"insert":o[(i=n.value).name]=i,a.splice(n.index,0,i);break;case"delete":delete o[(i=a[n.index]).name],a.splice(n.index,1)}return Promise.resolve()},l.computeFrame=function(t,e){var r,n,i,a,o=t._transitionData._frameHash;if(!e)throw new Error("computeFrame must be given a string frame name");var s=o[e.toString()];if(!s)return!1;for(var c=[s],u=[s.name];s.baseframe&&(s=o[s.baseframe.toString()])&&-1===u.indexOf(s.name);)c.push(s),u.push(s.name);for(var d={};s=c.pop();)if(s.layout&&(d.layout=l.extendLayout(d.layout,s.layout)),s.data){if(d.data||(d.data=[]),!(n=s.traces))for(n=[],r=0;r<s.data.length;r++)n[r]=r;for(d.traces||(d.traces=[]),r=0;r<s.data.length;r++)null!=(i=n[r])&&(-1===(a=d.traces.indexOf(i))&&(a=d.data.length,d.traces[a]=i),d.data[a]=l.extendTrace(d.data[a],s.data[r]))}return d},l.recomputeFrameHash=function(t){for(var e=t._transitionData._frameHash={},r=t._transitionData._frames,n=0;n<r.length;n++){var i=r[n];i&&i.name&&(e[i.name]=i)}},l.extendObjectWithContainers=function(t,e,r){var n,i,a,o,s,c,u,d=lib_1.extendDeepNoArrays({},e||{}),h=lib_1.expandObjectPaths(d),g={};if(r&&r.length)for(a=0;a<r.length;a++)void 0===(i=(n=lib_1.nestedProperty(h,r[a])).get())?lib_1.nestedProperty(g,r[a]).set(null):(n.set(null),lib_1.nestedProperty(g,r[a]).set(i));if(t=lib_1.extendDeepNoArrays(t||{},h),r&&r.length)for(a=0;a<r.length;a++)if(c=lib_1.nestedProperty(g,r[a]).get()){for(u=(s=lib_1.nestedProperty(t,r[a])).get(),Array.isArray(u)||(u=[],s.set(u)),o=0;o<c.length;o++){var f=c[o];u[o]=null===f?null:l.extendObjectWithContainers(u[o],f)}s.set(u)}return t},l.dataArrayContainers=["transforms","dimensions"],l.layoutArrayContainers=registry.layoutArrayContainers,l.extendTrace=function(t,e){return l.extendObjectWithContainers(t,e,l.dataArrayContainers)},l.extendLayout=function(t,e){return l.extendObjectWithContainers(t,e,l.layoutArrayContainers)},l.transition=function(t,e,r,n,i,a){var o={redraw:i.redraw},s={},c=[];return o.prepareFn=function(){for(var i=Array.isArray(e)?e.length:0,a=n.slice(0,i),o=0;o<a.length;o++){var u=a[o],d=t._fullData[u]._module;if(d){if(d.animatable){var h=d.basePlotModule.name;s[h]||(s[h]=[]),s[h].push(u)}t.data[a[o]]=l.extendTrace(t.data[a[o]],e[o])}}var g=lib_1.expandObjectPaths(lib_1.extendDeepNoArrays({},r)),f=/^[xy]axis[0-9]*$/;for(var p in g)f.test(p)&&delete g[p].range;l.extendLayout(t.layout,g),delete t.calcdata,l.supplyDefaults(t),l.doCalcdata(t);var m=lib_1.expandObjectPaths(r);if(m){var y=t._fullLayout._plots;for(var b in y){var v=y[b],x=v.xaxis,I=v.yaxis,B=x.range.slice(),C=I.range.slice(),F=null,A=null,Q=null,_=null;Array.isArray(m[x._name+".range"])?F=m[x._name+".range"].slice():Array.isArray((m[x._name]||{}).range)&&(F=m[x._name].range.slice()),Array.isArray(m[I._name+".range"])?A=m[I._name+".range"].slice():Array.isArray((m[I._name]||{}).range)&&(A=m[I._name].range.slice()),B&&F&&(x.r2l(B[0])!==x.r2l(F[0])||x.r2l(B[1])!==x.r2l(F[1]))&&(Q={xr0:B,xr1:F}),C&&A&&(I.r2l(C[0])!==I.r2l(A[0])||I.r2l(C[1])!==I.r2l(A[1]))&&(_={yr0:C,yr1:A}),(Q||_)&&c.push(lib_1.extendFlat({plotinfo:v},Q,_))}}return Promise.resolve()},o.runFn=function(e){var n,i,o=t._fullLayout._basePlotModules,l=c.length;if(r)for(i=0;i<o.length;i++)o[i].transitionAxes&&o[i].transitionAxes(t,c,a,e);for(var u in l?((n=lib_1.extendFlat({},a)).duration=0,delete s.cartesian):n=a,s){var d=s[u];t._fullData[d[0]]._module.basePlotModule.plot(t,d,n,e)}},v(t,a,o)},l.transitionFromReact=function(t,e,r,n){var i=t._fullLayout,a=i.transition,o={},s=[];return o.prepareFn=function(){var t=i._plots;for(var a in o.redraw=!1,"some"===e.anim&&(o.redraw=!0),"some"===r.anim&&(o.redraw=!0),t){var l=t[a],c=l.xaxis,u=l.yaxis,d=n[c._name].range.slice(),h=n[u._name].range.slice(),g=c.range.slice(),f=u.range.slice();c.setScale(),u.setScale();var p=null,m=null;c.r2l(d[0])===c.r2l(g[0])&&c.r2l(d[1])===c.r2l(g[1])||(p={xr0:d,xr1:g}),u.r2l(h[0])===u.r2l(f[0])&&u.r2l(h[1])===u.r2l(f[1])||(m={yr0:h,yr1:f}),(p||m)&&s.push(lib_1.extendFlat({plotinfo:l},p,m))}return Promise.resolve()},o.runFn=function(r){for(var n,i,o,l=t._fullData,c=t._fullLayout._basePlotModules,u=[],d=0;d<l.length;d++)u.push(d);function h(){if(t._fullLayout)for(var e=0;e<c.length;e++)c[e].transitionAxes&&c[e].transitionAxes(t,s,n,r)}function g(){if(t._fullLayout)for(var e=0;e<c.length;e++)c[e].plot(t,o,i,r)}s.length&&e.anim?"traces first"===a.ordering?(n=lib_1.extendFlat({},a,{duration:0}),o=u,i=a,setTimeout(h,a.duration),g()):(n=a,o=null,i=lib_1.extendFlat({},a,{duration:0}),setTimeout(g,n.duration),h()):s.length?(n=a,h()):e.anim&&(o=u,i=a,g())},v(t,a,o)},l.doCalcdata=function(t,e){var r,i,a,o,s=axis_ids.list(t),l=t._fullData,u=t._fullLayout,d=new Array(l.length),h=(t.calcdata||[]).slice();for(t.calcdata=d,u._numBoxes=0,u._numViolins=0,u._violinScaleGroupStats={},t._hmpixcount=0,t._hmlumcount=0,u._piecolormap={},u._sunburstcolormap={},u._treemapcolormap={},u._iciclecolormap={},u._funnelareacolormap={},a=0;a<l.length;a++)Array.isArray(e)&&-1===e.indexOf(a)&&(d[a]=h[a]);for(a=0;a<l.length;a++)(r=l[a])._arrayAttrs=plot_schema.findArrayAttributes(r),r._extremes={};var g=u._subplots.polar||[];for(a=0;a<g.length;a++)s.push(u[g[a]].radialaxis,u[g[a]].angularaxis);for(var f in u._colorAxes){var p=u[f];!1!==p.cauto&&(delete p.cmin,delete p.cmax)}var m=!1;function y(e){if(r=l[e],i=r._module,!0===r.visible&&r.transforms){if(i&&i.calc){var n=i.calc(t,r);n[0]&&n[0].t&&n[0].t._scene&&delete n[0].t._scene.dirty}for(o=0;o<r.transforms.length;o++){var a=r.transforms[o];(i=c[a.type])&&i.calcTransform&&(r._hasCalcTransform=!0,m=!0,i.calcTransform(t,r,a))}}}function b(e,a){if(r=l[e],!!(i=r._module).isContainer===a){var s=[];if(!0===r.visible&&0!==r._length){delete r._indexToPoints;var c=r.transforms||[];for(o=c.length-1;o>=0;o--)if(c[o].enabled){r._indexToPoints=c[o]._indexToPoints;break}i&&i.calc&&(s=i.calc(t,r))}Array.isArray(s)&&s[0]||(s=[{x:n,y:n}]),s[0].t||(s[0].t={}),s[0].trace=r,d[e]=s}}for(I(s,l,u),a=0;a<l.length;a++)b(a,!0);for(a=0;a<l.length;a++)y(a);for(m&&I(s,l,u),a=0;a<l.length;a++)b(a,!0);for(a=0;a<l.length;a++)b(a,!1);B(t);var v=function(t,e){var r,n,i,a,o,s=[];function l(t,r,n){var i=r._id.charAt(0);if("histogram2dcontour"===t){var a=r._counterAxes[0],o=axis_ids.getFromId(e,a),s="x"===i||"x"===a&&"category"===o.type,l="y"===i||"y"===a&&"category"===o.type;return function(t,e){return 0===t||0===e||s&&t===n[e].length-1||l&&e===n.length-1?-1:("y"===i?e:t)-1}}return function(t,e){return"y"===i?e:t}}var c={min:function(t){return lib_1.aggNums(Math.min,null,t)},max:function(t){return lib_1.aggNums(Math.max,null,t)},sum:function(t){return lib_1.aggNums((function(t,e){return t+e}),null,t)},total:function(t){return lib_1.aggNums((function(t,e){return t+e}),null,t)},mean:function(t){return lib_1.mean(t)},median:function(t){return lib_1.median(t)}};for(r=0;r<t.length;r++){var u=t[r];if("category"===u.type){var d=u.categoryorder.match(x);if(d){var h=d[1],g=d[2],f=u._id.charAt(0),p="x"===f,m=[];for(n=0;n<u._categories.length;n++)m.push([u._categories[n],[]]);for(n=0;n<u._traceIndices.length;n++){var y=u._traceIndices[n],b=e._fullData[y];if(!0===b.visible){var v=b.type;registry.traceIs(b,"histogram")&&(delete b._xautoBinFinished,delete b._yautoBinFinished);var I="splom"===v,B="scattergl"===v,C=e.calcdata[y];for(i=0;i<C.length;i++){var F,A,Q=C[i];if(I){var _=b._axesDim[u._id];if(!p){var w=b._diag[_][0];w&&(u=e._fullLayout[axis_ids.id2name(w)])}var U=Q.trace.dimensions[_].values;for(a=0;a<U.length;a++)for(F=u._categoriesMap[U[a]],o=0;o<Q.trace.dimensions.length;o++)if(o!==_){var S=Q.trace.dimensions[o];m[F][1].push(S.values[a])}}else if(B){for(a=0;a<Q.t.x.length;a++)p?(F=Q.t.x[a],A=Q.t.y[a]):(F=Q.t.y[a],A=Q.t.x[a]),m[F][1].push(A);Q.t&&Q.t._scene&&delete Q.t._scene.dirty}else if(Q.hasOwnProperty("z")){A=Q.z;var E=l(b.type,u,A);for(a=0;a<A.length;a++)for(o=0;o<A[a].length;o++)(F=E(o,a))+1&&m[F][1].push(A[a][o])}else for(void 0===(F=Q.p)&&(F=Q[f]),void 0===(A=Q.s)&&(A=Q.v),void 0===A&&(A=p?Q.y:Q.x),Array.isArray(A)||(A=void 0===A?[]:[A]),a=0;a<A.length;a++)m[F][1].push(A[a])}}}u._categoriesValue=m;var L=[];for(n=0;n<m.length;n++)L.push([m[n][0],c[h](m[n][1])]);L.sort((function(t,e){return t[1]-e[1]})),u._categoriesAggregatedValue=L,u._initialCategories=L.map((function(t){return t[0]})),"descending"===g&&u._initialCategories.reverse(),s=s.concat(u.sortByInitialCategories())}}}return s}(s,t);if(v.length){for(u._numBoxes=0,u._numViolins=0,a=0;a<v.length;a++)b(v[a],!0);for(a=0;a<v.length;a++)b(v[a],!1);B(t)}registry.getComponentMethod("fx","calc")(t),registry.getComponentMethod("errorbars","calc")(t)};var x=/(total|sum|min|max|mean|median) (ascending|descending)/;function I(t,e,r){var n={};function i(t){t.clearCalc(),"multicategory"===t.type&&t.setupMultiCategory(e),n[t._id]=1}lib_1.simpleMap(t,i);for(var a=r._axisMatchGroups||[],o=0;o<a.length;o++)for(var s in a[o])n[s]||i(r[axis_ids.id2name(s)])}function B(t){var e,r,n,i=t._fullLayout,a=i._visibleModules,o={};for(r=0;r<a.length;r++){var s=a[r],l=s.crossTraceCalc;if(l){var c=s.basePlotModule.name;o[c]?lib_1.pushUnique(o[c],l):o[c]=[l]}}for(n in o){var u=o[n],d=i._subplots[n];if(Array.isArray(d))for(e=0;e<d.length;e++){var h=d[e],g="cartesian"===n?i._plots[h]:i[h];for(r=0;r<u.length;r++)u[r](t,g,h)}else for(r=0;r<u.length;r++)u[r](t)}}l.rehover=function(t){t._fullLayout._rehover&&t._fullLayout._rehover()},l.redrag=function(t){t._fullLayout._redrag&&t._fullLayout._redrag()},l.generalUpdatePerTraceModule=function(t,e,r,n){var i,a=e.traceHash,o={};for(i=0;i<r.length;i++){var s=r[i],l=s[0].trace;l.visible&&(o[l.type]=o[l.type]||[],o[l.type].push(s))}for(var c in a)if(!o[c]){var u=a[c][0];u[0].trace.visible=!1,o[c]=[u]}for(var d in o){var h=o[d];h[0][0].trace._module.plot(t,e,lib_1.filterVisible(h),n)}e.traceHash=o},l.plotBasePlot=function(t,e,r,n,i){var o=registry.getModule(t),s=a(e.calcdata,o)[0];o.plot(e,s,n,i)},l.cleanBasePlot=function(t,e,r,n,i){var a=i._has&&i._has(t),o=r._has&&r._has(t);a&&!o&&i["_"+t+"layer"].selectAll("g.trace").remove()}})),xmlns_namespaces=createCommonjsModule((function(t,e){e.xmlns="http://www.w3.org/2000/xmlns/",e.svg="http://www.w3.org/2000/svg",e.xlink="http://www.w3.org/1999/xlink",e.svgAttrs={xmlns:e.svg,"xmlns:xlink":e.xlink}})),alignment={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}},svg_text_utils=createCommonjsModule((function(t,e){var r=lib_1.strTranslate,n=alignment.LINE_SPACING,i=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;e.convertToTspans=function(t,h,C){var F=t.text(),_=!t.attr("data-notex")&&h&&h._context.typesetMath&&"undefined"!=typeof MathJax&&F.match(i),w=d3.select(t.node().parentNode);if(!w.empty()){var U=t.attr("class")?t.attr("class").split(" ")[0]:"text";return U+="-math",w.selectAll("svg."+U).remove(),w.selectAll("g."+U+"-group").remove(),t.style("display",null).attr({"data-unformatted":F,"data-math":"N"}),_?(h&&h._promises||[]).push(new Promise((function(e){t.style("display","none");var n=parseInt(t.node().style.fontSize,10),i={fontSize:n};!function(t,e,r){var n,i,l,c,u=parseInt((MathJax.version||"").split(".")[0]);if(2!==u&&3!==u)return void lib_1.warn("No MathJax version:",MathJax.version);var d=function(){return i=lib_1.extendDeepAll({},MathJax.Hub.config),l=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:s},displayAlign:"left"})},h=function(){i=lib_1.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=s},g=function(){if("SVG"!==(n=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},f=function(){"svg"!==(n=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg")},p=function(){var r="math-output-"+lib_1.randstr({},64);c=d3.select("body").append("div").attr({id:r}).style({visibility:"hidden",position:"absolute","font-size":e.fontSize+"px"}).text(function(t){return t.replace(a,"\\lt ").replace(o,"\\gt ")}(t));var n=c.node();return 2===u?MathJax.Hub.Typeset(n):MathJax.typeset([n])},m=function(){var e=c.select(2===u?".MathJax_SVG":".MathJax"),n=!e.empty()&&c.select("svg").node();if(n){var i,a=n.getBoundingClientRect();i=2===u?d3.select("body").select("#MathJax_SVG_glyphs"):e.select("defs"),r(e,i,a)}else lib_1.log("There was an error in the tex syntax.",t),r();c.remove()},y=function(){if("SVG"!==n)return MathJax.Hub.setRenderer(n)},b=function(){"svg"!==n&&(MathJax.config.startup.output=n)},v=function(){return void 0!==l&&(MathJax.Hub.processSectionDelay=l),MathJax.Hub.Config(i)},x=function(){MathJax.config=i};2===u?MathJax.Hub.Queue(d,g,p,m,y,v):3===u&&(h(),f(),MathJax.startup.defaultReady(),MathJax.startup.promise.then((function(){p(),m(),b(),x()})))}(_[2],i,(function(i,a,o){w.selectAll("svg."+U).remove(),w.selectAll("g."+U+"-group").remove();var s=i&&i.select("svg");if(!s||!s.node())return S(),void e();var l=w.append("g").classed(U+"-group",!0).attr({"pointer-events":"none","data-unformatted":F,"data-math":"Y"});l.node().appendChild(s.node()),a&&a.node()&&s.node().insertBefore(a.node().cloneNode(!0),s.node().firstChild);var c=o.width,u=o.height;s.attr({class:U,height:u,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var d=t.node().style.fill||"black",h=s.select("g");h.attr({fill:d,stroke:d});var g=h.node().getBoundingClientRect(),f=g.width,p=g.height;(f>c||p>u)&&(s.style("overflow","hidden"),f=(g=s.node().getBoundingClientRect()).width,p=g.height);var m=+t.attr("x"),y=+t.attr("y"),b=-(n||t.node().getBoundingClientRect().height)/4;if("y"===U[0])l.attr({transform:"rotate("+[-90,m,y]+")"+r(-f/2,b-p/2)});else if("l"===U[0])y=b-p/2;else if("a"===U[0]&&0!==U.indexOf("atitle"))m=0,y=b;else{var v=t.attr("text-anchor");m-=f*("middle"===v?.5:"end"===v?1:0),y=y+b-p/2}s.attr({x:m,y:y}),C&&C.call(t,l),e(l)}))}))):S(),t}function S(){w.empty()||(U=t.attr("class")+"-math",w.select("svg."+U).remove()),t.text("").style("white-space","pre");var r=function(t,e){e=e.replace(g," ");var r,i=!1,a=[],o=-1;function s(){o++;var e=document.createElementNS(xmlns_namespaces.svg,"tspan");d3.select(e).attr({class:"line",dy:o*n+"em"}),t.appendChild(e),r=e;var i=a;if(a=[{node:e}],i.length>1)for(var s=1;s<i.length;s++)h(i[s])}function h(t){var e,n=t.type,i={};if("a"===n){e="a";var o=t.target,s=t.href,l=t.popup;s&&(i={"xlink:xlink:show":"_blank"===o||"_"!==o.charAt(0)?"new":"replace",target:o,"xlink:xlink:href":s},l&&(i.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+l+'");return false;'))}else e="tspan";t.style&&(i.style=t.style);var h=document.createElementNS(xmlns_namespaces.svg,e);if("sup"===n||"sub"===n){C(r,d),r.appendChild(h);var g=document.createElementNS(xmlns_namespaces.svg,"tspan");C(g,d),d3.select(g).attr("dy",u[n]),i.dy=c[n],r.appendChild(h),r.appendChild(g)}else r.appendChild(h);d3.select(h).attr(i),r=t.node=h,a.push(t)}function C(t,e){t.appendChild(document.createTextNode(e))}function F(t){if(1!==a.length){var n=a.pop();t!==n.type&&lib_1.log("Start tag <"+n.type+"> doesnt match end tag <"+t+">. Pretending it did match.",e),r=a[a.length-1].node}else lib_1.log("Ignoring unexpected end tag </"+t+">.",e)}m.test(e)?s():(r=t,a=[{node:t}]);for(var _=e.split(f),w=0;w<_.length;w++){var U=_[w],S=U.match(p),E=S&&S[2].toLowerCase(),L=l[E];if("br"===E)s();else if(void 0===L)C(r,A(U));else if(S[1])F(E);else{var T=S[4],R={type:E},k=I(T,y);if(k?(k=k.replace(B,"$1 fill:"),L&&(k+=";"+L)):L&&(k=L),k&&(R.style=k),"a"===E){i=!0;var G=I(T,b);if(G){var N=Q(G);N&&(R.href=N,R.target=I(T,v)||"_blank",R.popup=I(T,x))}}h(R)}}return i}(t.node(),F);r&&t.style("pointer-events","all"),e.positionText(t),C&&C.call(t)}};var a=/(<|&lt;|&#60;)/g,o=/(>|&gt;|&#62;)/g;var s=[["$","$"],["\\(","\\)"]];var l={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},c={sub:"0.3em",sup:"-0.6em"},u={sub:"-0.21em",sup:"0.42em"},d="â",h=["http:","https:","mailto:","",void 0,":"],g=e.NEWLINES=/(\r\n?|\n)/g,f=/(<[^<>]*>)/,p=/<(\/?)([^ >]*)(\s+(.*))?>/i,m=/<br(\s+.*)?>/i;e.BR_TAG_ALL=/<br(\s+.*)?>/gi;var y=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,b=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,v=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,x=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function I(t,e){if(!t)return null;var r=t.match(e),n=r&&(r[3]||r[4]);return n&&A(n)}var B=/(^|;)\s*color:/;e.plainText=function(t,e){for(var r=void 0!==(e=e||{}).len&&-1!==e.len?e.len:1/0,n=void 0!==e.allowedTags?e.allowedTags:["br"],i="...".length,a=t.split(f),o=[],s="",l=0,c=0;c<a.length;c++){var u=a[c],d=u.match(p),h=d&&d[2].toLowerCase();if(h)-1!==n.indexOf(h)&&(o.push(u),s=h);else{var g=u.length;if(l+g<r)o.push(u),l+=g;else if(l<r){var m=r-l;s&&("br"!==s||m<=i||g<=i)&&o.pop(),r>i?o.push(u.substr(0,m-i)+"..."):o.push(u.substr(0,m));break}s=""}}return o.join("")};var C={mu:"Î¼",amp:"&",lt:"<",gt:">",nbsp:"Â ",times:"Ã",plusmn:"Â±",deg:"Â°"},F=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function A(t){return t.replace(F,(function(t,e){var r;return r="#"===e.charAt(0)?function(t){if(t>1114111)return;var e=String.fromCodePoint;if(e)return e(t);var r=String.fromCharCode;return t<=65535?r(t):r(55232+(t>>10),t%1024+56320)}("x"===e.charAt(1)?parseInt(e.substr(2),16):parseInt(e.substr(1),10)):C[e],r||t}))}function Q(t){var e=encodeURI(decodeURI(t)),r=document.createElement("a"),n=document.createElement("a");r.href=t,n.href=e;var i=r.protocol,a=n.protocol;return-1!==h.indexOf(i)&&-1!==h.indexOf(a)?e:""}function _(t,e,r){var n,i,a,o=r.horizontalAlign,s=r.verticalAlign||"top",l=t.node().getBoundingClientRect(),c=e.node().getBoundingClientRect();return i="bottom"===s?function(){return l.bottom-n.height}:"middle"===s?function(){return l.top+(l.height-n.height)/2}:function(){return l.top},a="right"===o?function(){return l.right-n.width}:"center"===o?function(){return l.left+(l.width-n.width)/2}:function(){return l.left},function(){n=this.node().getBoundingClientRect();var t=a()-c.left,e=i()-c.top,o=r.gd||{};if(r.gd){o._fullLayout._calcInverseTransform(o);var s=lib_1.apply3DTransform(o._fullLayout._invTransform)(t,e);t=s[0],e=s[1]}return this.style({top:e+"px",left:t+"px","z-index":1e3}),this}}e.convertEntities=A,e.sanitizeHTML=function(t){t=t.replace(g," ");for(var e=document.createElement("p"),r=e,n=[],i=t.split(f),a=0;a<i.length;a++){var o=i[a],s=o.match(p),c=s&&s[2].toLowerCase();if(c in l)if(s[1])n.length&&(r=n.pop());else{var u=s[4],d=I(u,y),h=d?{style:d}:{};if("a"===c){var m=I(u,b);if(m){var x=Q(m);if(x){h.href=x;var B=I(u,v);B&&(h.target=B)}}}var C=document.createElement(c);r.appendChild(C),d3.select(C).attr(h),r=C,n.push(C)}else r.appendChild(document.createTextNode(A(o)))}return e.innerHTML},e.lineCount=function(t){return t.selectAll("tspan.line").size()||1},e.positionText=function(t,e,r){return t.each((function(){var t=d3.select(this);function n(e,r){return void 0===r?null===(r=t.attr(e))&&(t.attr(e,0),r=0):t.attr(e,r),r}var i=n("x",e),a=n("y",r);"text"===this.nodeName&&t.selectAll("tspan.line").attr({x:i,y:a})}))};var w="1px ";e.makeTextShadow=function(t){return w+w+w+t+", -"+w+"-"+w+w+t+", "+w+"-"+w+w+t+", -"+w+w+w+t},e.makeEditable=function(t,e){var r=e.gd,n=e.delegate,i=d3.dispatch("edit","input","cancel"),a=n||t;if(t.style({"pointer-events":n?"none":"all"}),1!==t.size())throw new Error("boo");function o(){!function(){var n=d3.select(r).select(".svg-container"),a=n.append("div"),o=t.node().style,l=parseFloat(o.fontSize||12),c=e.text;void 0===c&&(c=t.attr("data-unformatted"));a.classed("plugin-editable editable",!0).style({position:"absolute","font-family":o.fontFamily||"Arial","font-size":l,color:e.fill||o.fill||"black",opacity:1,"background-color":e.background||"transparent",outline:"#ffffff33 1px solid",margin:[-l/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(c).call(_(t,n,e)).on("blur",(function(){r._editing=!1,t.text(this.textContent).style({opacity:1});var e,n=d3.select(this).attr("class");(e=n?"."+n.split(" ")[0]+"-math-group":"[class*=-math-group]")&&d3.select(t.node().parentNode).select(e).style({opacity:0});var a=this.textContent;d3.select(this).transition().duration(0).remove(),d3.select(document).on("mouseup",null),i.edit.call(t,a)})).on("focus",(function(){var t=this;r._editing=!0,d3.select(document).on("mouseup",(function(){if(d3.event.target===t)return!1;document.activeElement===a.node()&&a.node().blur()}))})).on("keyup",(function(){27===d3.event.which?(r._editing=!1,t.style({opacity:1}),d3.select(this).style({opacity:0}).on("blur",(function(){return!1})).transition().remove(),i.cancel.call(t,this.textContent)):(i.input.call(t,this.textContent),d3.select(this).call(_(t,n,e)))})).on("keydown",(function(){13===d3.event.which&&this.blur()})).call(s)}(),t.style({opacity:0});var n,o=a.attr("class");(n=o?"."+o.split(" ")[0]+"-math-group":"[class*=-math-group]")&&d3.select(t.node().parentNode).select(n).style({opacity:0})}function s(t){var e=t.node(),r=document.createRange();r.selectNodeContents(e);var n=window.getSelection();n.removeAllRanges(),n.addRange(r),e.focus()}return e.immediate?o():a.on("click",o),d3.rebind(t,i,"on")}})),isValidScale$1=scales_1.isValid;function hasColorscale$5(t,e,r){var n=e?lib_1.nestedProperty(t,e).get()||{}:t,i=n[r||"color"],a=!1;if(lib_1.isArrayOrTypedArray(i))for(var o=0;o<i.length;o++)if(fastIsnumeric(i[o])){a=!0;break}return lib_1.isPlainObject(n)&&(a||!0===n.showscale||fastIsnumeric(n.cmin)&&fastIsnumeric(n.cmax)||isValidScale$1(n.colorscale)||lib_1.isPlainObject(n.colorbar))}var constantAttrs=["showscale","autocolorscale","colorscale","reversescale","colorbar"],letterAttrs=["min","max","mid","auto"];function extractOpts$4(t){var e,r,n,i=t._colorAx,a=i||t,o={};for(r=0;r<constantAttrs.length;r++)o[n=constantAttrs[r]]=a[n];if(i)for(e="c",r=0;r<letterAttrs.length;r++)o[n=letterAttrs[r]]=a["c"+n];else{var s;for(r=0;r<letterAttrs.length;r++)((s="c"+(n=letterAttrs[r]))in a||(s="z"+n)in a)&&(o[n]=a[s]);e=s.charAt(0)}return o._sync=function(t,r){var n=-1!==letterAttrs.indexOf(t)?e+t:t;a[n]=a["_"+n]=r},o}function extractScale(t){for(var e=extractOpts$4(t),r=e.min,n=e.max,i=e.reversescale?flipScale$1(e.colorscale):e.colorscale,a=i.length,o=new Array(a),s=new Array(a),l=0;l<a;l++){var c=i[l];o[l]=r+c[0]*(n-r),s[l]=c[1]}return{domain:o,range:s}}function flipScale$1(t){for(var e=t.length,r=new Array(e),n=e-1,i=0;n>=0;n--,i++){var a=t[n];r[i]=[1-a[0],a[1]]}return r}function makeColorScaleFunc(t,e){e=e||{};for(var r=t.domain,n=t.range,i=n.length,a=new Array(i),o=0;o<i;o++){var s=tinycolor(n[o]).toRgb();a[o]=[s.r,s.g,s.b,s.a]}var l,c=d3.scale.linear().domain(r).range(a).clamp(!0),u=e.noNumericCheck,d=e.returnArray;return l=u&&d?c:u?function(t){return colorArray2rbga(c(t))}:d?function(t){return fastIsnumeric(t)?c(t):tinycolor(t).isValid()?t:color_1.defaultLine}:function(t){return fastIsnumeric(t)?colorArray2rbga(c(t)):tinycolor(t).isValid()?t:color_1.defaultLine},l.domain=c.domain,l.range=function(){return n},l}function makeColorScaleFuncFromTrace(t,e){return makeColorScaleFunc(extractScale(t),e)}function colorArray2rbga(t){var e={r:t[0],g:t[1],b:t[2],a:t[3]};return tinycolor(e).toRgbString()}var helpers$b={hasColorscale:hasColorscale$5,extractOpts:extractOpts$4,extractScale:extractScale,flipScale:flipScale$1,makeColorScaleFunc:makeColorScaleFunc,makeColorScaleFuncFromTrace:makeColorScaleFuncFromTrace},docs={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"},FORMAT_LINK$1=docs.FORMAT_LINK,DATE_FORMAT_LINK$1=docs.DATE_FORMAT_LINK;function axisHoverFormat$4(t,e){return{valType:"string",dflt:"",editType:"none",description:(e?descriptionOnlyNumbers:descriptionWithDates$1)("hover text",t)+["By default the values are formatted using "+(e?"generic number format":"`"+t+"axis.hoverformat`")+"."].join(" ")}}function descriptionOnlyNumbers(t,e){return["Sets the "+t+" formatting rule"+(e?"for `"+e+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+FORMAT_LINK$1+"."].join(" ")}function descriptionWithDates$1(t,e){return descriptionOnlyNumbers(t,e)+[" And for dates see: "+DATE_FORMAT_LINK$1+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}var axis_format_attributes={axisHoverFormat:axisHoverFormat$4,descriptionOnlyNumbers:descriptionOnlyNumbers,descriptionWithDates:descriptionWithDates$1},dash$2=attributes$p.dash,extendFlat$d=extend.extendFlat,templatedArray$7=plot_template.templatedArray,descriptionWithDates=axis_format_attributes.descriptionWithDates,ONEDAY$2=numerical.ONEDAY,HOUR$1=constants$c.HOUR_PATTERN,DAY_OF_WEEK$1=constants$c.WEEKDAY_PATTERN,layout_attributes$3={visible:{valType:"boolean",editType:"plot",description:["A single toggle to hide the axis while preserving interaction like dragging.","Default is true when a cheater plot is present on the axis, otherwise","false"].join(" ")},color:{valType:"color",dflt:attributes$q.defaultLine,editType:"ticks",description:["Sets default for all colors associated with this axis","all at once: line, font, tick, and grid colors.","Grid color is lightened by blending this with the plot background","Individual pieces can override this."].join(" ")},title:{text:{valType:"string",editType:"ticks",description:["Sets the title of this axis.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:font_attributes({editType:"ticks",description:["Sets this axis' title font.","Note that the title's font used to be customized","by the now deprecated `titlefont` attribute."].join(" ")}),standoff:{valType:"number",min:0,editType:"ticks",description:["Sets the standoff distance (in px) between the axis labels and the title text","The default value is a function of the axis tick labels, the title `font.size`","and the axis `linewidth`.","Note that the axis title position is always constrained within the margins,","so the actual standoff distance is always less than the set or default value.","By setting `standoff` and turning on `automargin`, plotly.js will push the","margins to fit the axis title at given standoff distance."].join(" ")},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0,description:["Sets the axis type.","By default, plotly attempts to determined the axis type","by looking into the data of the traces that referenced","the axis in question."].join(" ")},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc",description:["Using *strict* a numeric string in trace data is not converted to a number.","Using *convert types* a numeric string in trace data may be","treated as a number during automatic axis `type` detection.","Defaults to layout.autotypenumbers."].join(" ")},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range of this axis is","computed in relation to the input data.","See `rangemode` for more info.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot",description:["If *normal*, the range is computed in relation to the extrema","of the input data.","If *tozero*`, the range extends to 0,","regardless of the input data","If *nonnegative*, the range is non-negative,","regardless of the input data.","Applies only to linear axes."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0,description:["Sets the range of this axis.","If the axis `type` is *log*, then you must take the log of your","desired range (e.g. to set the range from 1 to 100,","set the range from 0 to 2).","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},fixedrange:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not this axis is zoom-able.","If true, then zoom is disabled."].join(" ")},scaleanchor:{valType:"enumerated",values:[constants$c.idRegex.x.toString(),constants$c.idRegex.y.toString()],editType:"plot",description:["If set to another axis id (e.g. `x2`, `y`), the range of this axis","changes together with the range of the corresponding axis","such that the scale of pixels per unit is in a constant ratio.","Both axes are still zoomable, but when you zoom one, the other will","zoom the same amount, keeping a fixed midpoint.","`constrain` and `constraintoward` determine how we enforce the constraint.","You can chain these, ie `yaxis: {scaleanchor: *x*}, xaxis2: {scaleanchor: *y*}`","but you can only link axes of the same `type`.","The linked axis can have the opposite letter (to constrain the aspect ratio)","or the same letter (to match scales across subplots).","Loops (`yaxis: {scaleanchor: *x*}, xaxis: {scaleanchor: *y*}` or longer) are redundant","and the last constraint encountered will be ignored to avoid possible","inconsistent constraints via `scaleratio`.","Note that setting axes simultaneously in both a `scaleanchor` and a `matches` constraint","is currently forbidden."].join(" ")},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot",description:["If this axis is linked to another by `scaleanchor`, this determines the pixel","to unit scale ratio. For example, if this value is 10, then every unit on","this axis spans 10 times the number of pixels as a unit on the linked axis.","Use this for example to create an elevation profile where the vertical scale","is exaggerated a fixed amount with respect to the horizontal."].join(" ")},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines how that happens:","by increasing the *range*, or by decreasing the *domain*.","Default is *domain* for axes containing image traces, *range* otherwise."].join(" ")},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines which direction we push","the originally specified plot area. Options are *left*, *center* (default),","and *right* for x axes, and *top*, *middle* (default), and *bottom* for y axes."].join(" ")},matches:{valType:"enumerated",values:[constants$c.idRegex.x.toString(),constants$c.idRegex.y.toString()],editType:"calc",description:["If set to another axis id (e.g. `x2`, `y`), the range of this axis","will match the range of the corresponding axis in data-coordinates space.","Moreover, matching axes share auto-range values, category lists and","histogram auto-bins.","Note that setting axes simultaneously in both a `scaleanchor` and a `matches` constraint","is currently forbidden.","Moreover, note that matching axes must have the same `type`."].join(" ")},rangebreaks:templatedArray$7("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this axis rangebreak is enabled or disabled.","Please note that `rangebreaks` only work for *date* axis type."].join(" ")},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc",description:["Sets the lower and upper bounds of this axis rangebreak.","Can be used with `pattern`."].join(" ")},pattern:{valType:"enumerated",values:[DAY_OF_WEEK$1,HOUR$1,""],editType:"calc",description:["Determines a pattern on the time line that generates breaks.","If *"+DAY_OF_WEEK$1+"* - days of the week in English e.g. 'Sunday' or `sun`","(matching is case-insensitive and considers only the first three characters),","as well as Sunday-based integers between 0 and 6.","If *"+HOUR$1+"* - hour (24-hour clock) as decimal numbers between 0 and 24.","for more info.","Examples:","- { pattern: '"+DAY_OF_WEEK$1+"', bounds: [6, 1] }"," or simply { bounds: ['sat', 'mon'] }","  breaks from Saturday to Monday (i.e. skips the weekends).","- { pattern: '"+HOUR$1+"', bounds: [17, 8] }","  breaks from 5pm to 8am (i.e. skips non-work hours)."].join(" ")},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"},description:["Sets the coordinate values corresponding to the rangebreaks.","An alternative to `bounds`.","Use `dvalue` to set the size of the values along the axis."].join(" ")},dvalue:{valType:"number",editType:"calc",min:0,dflt:ONEDAY$2,description:["Sets the size of each `values` item.","The default is one day in milliseconds."].join(" ")},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0},description:["Sets the tick mode for this axis.","If *auto*, the number of ticks is set via `nticks`.","If *linear*, the placement of the ticks is determined by","a starting position `tick0` and a tick step `dtick`","(*linear* is the default value if `tick0` and `dtick` are provided).","If *array*, the placement of the ticks is set via `tickvals`","and the tick text is `ticktext`.","(*array* is the default value if `tickvals` is provided)."].join(" ")},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks",description:["Specifies the maximum number of ticks for the particular axis.","The actual number of ticks will be chosen automatically to be","less than or equal to `nticks`.","Has an effect only if `tickmode` is set to *auto*."].join(" ")},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"},description:["Sets the placement of the first tick on this axis.","Use with `dtick`.","If the axis `type` is *log*, then you must take the log of your starting tick","(e.g. to set the starting tick to 100, set the `tick0` to 2)","except when `dtick`=*L<f>* (see `dtick` for more info).","If the axis `type` is *date*, it should be a date string, like date data.","If the axis `type` is *category*, it should be a number, using the scale where","each category is assigned a serial number from zero in the order it appears."].join(" ")},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"},description:["Sets the step in-between ticks on this axis. Use with `tick0`.","Must be a positive number, or special strings available to *log* and *date* axes.","If the axis `type` is *log*, then ticks are set every 10^(n*dtick) where n","is the tick number. For example,","to set a tick mark at 1, 10, 100, 1000, ... set dtick to 1.","To set tick marks at 1, 100, 10000, ... set dtick to 2.","To set tick marks at 1, 5, 25, 125, 625, 3125, ... set dtick to log_10(5), or 0.69897000433.","*log* has several special values; *L<f>*, where `f` is a positive number,","gives ticks linearly spaced in value (but not position).","For example `tick0` = 0.1, `dtick` = *L0.5* will put ticks at 0.1, 0.6, 1.1, 1.6 etc.","To show powers of 10 plus small digits between, use *D1* (all digits) or *D2* (only 2 and 5).","`tick0` is ignored for *D1* and *D2*.","If the axis `type` is *date*, then you must convert the time to milliseconds.","For example, to set the interval between ticks to one day,","set `dtick` to 86400000.0.","*date* also has special values *M<n>* gives ticks spaced by a number of months.","`n` must be a positive integer.","To set ticks on the 15th of every third month, set `tick0` to *2000-01-15* and `dtick` to *M3*.","To set ticks every 4 years, set `dtick` to *M48*"].join(" ")},ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks",description:["Sets the spacing between tick labels as compared to the spacing between ticks.","A value of 1 (default) means each tick gets a label.","A value of 2 means shows every 2nd label.","A larger value n means only every nth tick is labeled.","`tick0` determines which labels are shown.","Not implemented for axes with `type` *log* or *multicategory*, or when `tickmode` is *array*."].join(" ")},tickvals:{valType:"data_array",editType:"ticks",description:["Sets the values at which ticks on this axis appear.","Only has an effect if `tickmode` is set to *array*.","Used with `ticktext`."].join(" ")},ticktext:{valType:"data_array",editType:"ticks",description:["Sets the text displayed at the ticks position via `tickvals`.","Only has an effect if `tickmode` is set to *array*.","Used with `tickvals`."].join(" ")},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks",description:["Determines whether ticks are drawn or not.","If **, this axis' ticks are not drawn.","If *outside* (*inside*), this axis' are drawn outside (inside)","the axis lines."].join(" ")},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks",description:["Determines where ticks and grid lines are drawn with respect to their","corresponding tick labels.","Only has an effect for axes of `type` *category* or *multicategory*.","When set to *boundaries*, ticks and grid lines are drawn half a category","to the left/bottom of labels."].join(" ")},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks",description:["Determines where tick labels are drawn with respect to their","corresponding ticks and grid lines.","Only has an effect for axes of `type` *date*","When set to *period*, tick labels are drawn in the middle of the period","between ticks."].join(" ")},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc",description:["Determines where tick labels are drawn with respect to the axis","Please note that","top or bottom has no effect on x axes or when `ticklabelmode` is set to *period*.","Similarly","left or right has no effect on y axes or when `ticklabelmode` is set to *period*.","Has no effect on *multicategory* axes or when `tickson` is set to *boundaries*.","When used on axes linked by `matches` or `scaleanchor`,","no extra padding for inside labels would be added by autorange,","so that the scales could match."].join(" ")},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc",description:["Determines how we handle tick labels that would overflow either the graph div or the domain of the axis.","The default value for inside tick labels is *hide past domain*.","Otherwise on *category* and *multicategory* axes the default is *allow*.","In other cases the default is *hide past div*."].join(" ")},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle",description:["Determines if the axis lines or/and ticks are mirrored to","the opposite side of the plotting area.","If *true*, the axis lines are mirrored.","If *ticks*, the axis lines and ticks are mirrored.","If *false*, mirroring is disable.","If *all*, axis lines are mirrored on all shared-axes subplots.","If *allticks*, axis lines and ticks are mirrored","on all shared-axes subplots."].join(" ")},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks",description:"Sets the tick length (in px)."},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks",description:"Sets the tick width (in px)."},tickcolor:{valType:"color",dflt:attributes$q.defaultLine,editType:"ticks",description:"Sets the tick color."},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks",description:"Determines whether or not the tick labels are drawn."},automargin:{valType:"boolean",dflt:!1,editType:"ticks",description:["Determines whether long tick labels automatically grow the figure","margins."].join(" ")},showspikes:{valType:"boolean",dflt:!1,editType:"modebar",description:["Determines whether or not spikes (aka droplines) are drawn for this axis.","Note: This only takes affect when hovermode = closest"].join(" ")},spikecolor:{valType:"color",dflt:null,editType:"none",description:"Sets the spike color. If undefined, will use the series color"},spikethickness:{valType:"number",dflt:3,editType:"none",description:"Sets the width (in px) of the zero line."},spikedash:extendFlat$d({},dash$2,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none",description:["Determines the drawing mode for the spike line","If *toaxis*, the line is drawn from the data point to the axis the ","series is plotted on.","If *across*, the line is drawn across the entire plot area, and","supercedes *toaxis*.","If *marker*, then a marker dot is drawn on the axis the series is","plotted on"].join(" ")},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none",description:"Determines whether spikelines are stuck to the cursor or to the closest datapoints."},tickfont:font_attributes({editType:"ticks",description:"Sets the tick font."}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks",description:["Sets the angle of the tick labels with respect to the horizontal.","For example, a `tickangle` of -90 draws the tick labels","vertically."].join(" ")},tickprefix:{valType:"string",dflt:"",editType:"ticks",description:"Sets a tick label prefix."},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:["If *all*, all tick labels are displayed with a prefix.","If *first*, only the first tick is displayed with a prefix.","If *last*, only the last tick is displayed with a suffix.","If *none*, tick prefixes are hidden."].join(" ")},ticksuffix:{valType:"string",dflt:"",editType:"ticks",description:"Sets a tick label suffix."},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:"Same as `showtickprefix` but for tick suffixes."},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:["If *all*, all exponents are shown besides their significands.","If *first*, only the exponent of the first tick is shown.","If *last*, only the exponent of the last tick is shown.","If *none*, no exponents appear."].join(" ")},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks",description:["Determines a formatting rule for the tick exponents.","For example, consider the number 1,000,000,000.","If *none*, it appears as 1,000,000,000.","If *e*, 1e+9.","If *E*, 1E+9.","If *power*, 1x10^9 (with 9 in a super script).","If *SI*, 1G.","If *B*, 1B."].join(" ")},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks",description:["Hide SI prefix for 10^n if |n| is below this number.","This only has an effect when `tickformat` is *SI* or *B*."].join(" ")},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks",description:['If "true", even 4-digit integers are separated'].join(" ")},tickformat:{valType:"string",dflt:"",editType:"ticks",description:descriptionWithDates("tick label")},tickformatstops:templatedArray$7("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks",description:["Determines whether or not this stop is used.","If `false`, this stop is ignored even within its `dtickrange`."].join(" ")},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks",description:["range [*min*, *max*], where *min*, *max* - dtick values","which describe some zoom level, it is possible to omit *min*","or *max* value by passing *null*"].join(" ")},value:{valType:"string",dflt:"",editType:"ticks",description:["string - dtickformat for described zoom level, the same as *tickformat*"].join(" ")},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:descriptionWithDates("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle",description:["Determines whether or not a line bounding this axis is drawn."].join(" ")},linecolor:{valType:"color",dflt:attributes$q.defaultLine,editType:"layoutstyle",description:"Sets the axis line color."},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle",description:"Sets the width (in px) of the axis line."},showgrid:{valType:"boolean",editType:"ticks",description:["Determines whether or not grid lines are drawn.","If *true*, the grid lines are drawn at every tick mark."].join(" ")},gridcolor:{valType:"color",dflt:attributes$q.lightLine,editType:"ticks",description:"Sets the color of the grid lines."},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks",description:"Sets the width (in px) of the grid lines."},zeroline:{valType:"boolean",editType:"ticks",description:["Determines whether or not a line is drawn at along the 0 value","of this axis.","If *true*, the zero line is drawn on top of the grid lines."].join(" ")},zerolinecolor:{valType:"color",dflt:attributes$q.defaultLine,editType:"ticks",description:"Sets the line color of the zero line."},zerolinewidth:{valType:"number",dflt:1,editType:"ticks",description:"Sets the width (in px) of the zero line."},showdividers:{valType:"boolean",dflt:!0,editType:"ticks",description:["Determines whether or not a dividers are drawn","between the category levels of this axis.","Only has an effect on *multicategory* axes."].join(" ")},dividercolor:{valType:"color",dflt:attributes$q.defaultLine,editType:"ticks",description:["Sets the color of the dividers","Only has an effect on *multicategory* axes."].join(" ")},dividerwidth:{valType:"number",dflt:1,editType:"ticks",description:["Sets the width (in px) of the dividers","Only has an effect on *multicategory* axes."].join(" ")},anchor:{valType:"enumerated",values:["free",constants$c.idRegex.x.toString(),constants$c.idRegex.y.toString()],editType:"plot",description:["If set to an opposite-letter axis id (e.g. `x2`, `y`), this axis is bound to","the corresponding opposite-letter axis.","If set to *free*, this axis' position is determined by `position`."].join(" ")},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot",description:["Determines whether a x (y) axis is positioned","at the *bottom* (*left*) or *top* (*right*)","of the plotting area."].join(" ")},overlaying:{valType:"enumerated",values:["free",constants$c.idRegex.x.toString(),constants$c.idRegex.y.toString()],editType:"plot",description:["If set a same-letter axis id, this axis is overlaid on top of","the corresponding same-letter axis, with traces and axes visible for both","axes.","If *false*, this axis does not overlay any same-letter axes.","In this case, for axes with overlapping domains only the highest-numbered","axis will be visible."].join(" ")},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot",description:["Sets the layer on which this axis is displayed.","If *above traces*, this axis is displayed above all the subplot's traces","If *below traces*, this axis is displayed below all the subplot's traces,","but above the grid lines.","Useful when used together with scatter-like traces with `cliponaxis`","set to *false* to show markers and/or text nodes above this axis."].join(" ")},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot",description:["Sets the domain of this axis (in plot fraction)."].join(" ")},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot",description:["Sets the position of this axis in the plotting space","(in normalized coordinates).","Only has an effect if `anchor` is set to *free*."].join(" ")},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc",description:["Specifies the ordering logic for the case of categorical variables.","By default, plotly uses *trace*, which specifies the order that is present in the data supplied.","Set `categoryorder` to *category ascending* or *category descending* if order should be determined by","the alphanumerical order of the category names.","Set `categoryorder` to *array* to derive the ordering from the attribute `categoryarray`. If a category","is not found in the `categoryarray` array, the sorting behavior for that attribute will be identical to","the *trace* mode. The unspecified categories will follow the categories in `categoryarray`.","Set `categoryorder` to *total ascending* or *total descending* if order should be determined by the","numerical order of the values.","Similarly, the order can be determined by the min, max, sum, mean or median of all the values."].join(" ")},categoryarray:{valType:"data_array",editType:"calc",description:["Sets the order in which categories on this axis appear.","Only has an effect if `categoryorder` is set to *array*.","Used with `categoryorder`."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `range`,","`autorange`, and `title` if in `editable: true` configuration.","Defaults to `layout.uirevision`."].join(" ")},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks",description:["Obsolete.","Set `tickmode` to *auto* for old `autotick` *true* behavior.","Set `tickmode` to *linear* for `autotick` *false*."].join(" ")},title:{valType:"string",editType:"ticks",description:["Value of `title` is no longer a simple *string* but a set of sub-attributes.","To set the axis' title, please use `title.text` now."].join(" ")},titlefont:font_attributes({editType:"ticks",description:["Former `titlefont` is now the sub-attribute `font` of `title`.","To customize title font properties, please use `title.font` now."].join(" ")})}},extendFlat$c=extend.extendFlat,overrideAll$5=edit_types.overrideAll,attributes$n=overrideAll$5({orientation:{valType:"enumerated",values:["h","v"],dflt:"v",description:"Sets the orientation of the colorbar."},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",description:["Determines whether this color bar's thickness","(i.e. the measure in the constant color direction)","is set in units of plot *fraction* or in *pixels*.","Use `thickness` to set the value."].join(" ")},thickness:{valType:"number",min:0,dflt:30,description:["Sets the thickness of the color bar","This measure excludes the size of the padding, ticks and labels."].join(" ")},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction",description:["Determines whether this color bar's length","(i.e. the measure in the color variation direction)","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,description:["Sets the length of the color bar","This measure excludes the padding of both ends.","That is, the color bar length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",min:-2,max:3,description:["Sets the x position of the color bar (in plot fraction).","Defaults to 1.02 when `orientation` is *v* and","0.5 when `orientation` is *h*."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],description:["Sets this color bar's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the color bar.","Defaults to *left* when `orientation` is *v* and","*center* when `orientation` is *h*."].join(" ")},xpad:{valType:"number",min:0,dflt:10,description:"Sets the amount of padding (in px) along the x direction."},y:{valType:"number",min:-2,max:3,description:["Sets the y position of the color bar (in plot fraction).","Defaults to 0.5 when `orientation` is *v* and","1.02 when `orientation` is *h*."].join(" ")},yanchor:{valType:"enumerated",values:["top","middle","bottom"],description:["Sets this color bar's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the color bar.","Defaults to *middle* when `orientation` is *v* and","*bottom* when `orientation` is *h*."].join(" ")},ypad:{valType:"number",min:0,dflt:10,description:"Sets the amount of padding (in px) along the y direction."},outlinecolor:layout_attributes$3.linecolor,outlinewidth:layout_attributes$3.linewidth,bordercolor:layout_attributes$3.linecolor,borderwidth:{valType:"number",min:0,dflt:0,description:["Sets the width (in px) or the border enclosing this color bar."].join(" ")},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",description:"Sets the color of padded area."},tickmode:layout_attributes$3.tickmode,nticks:layout_attributes$3.nticks,tick0:layout_attributes$3.tick0,dtick:layout_attributes$3.dtick,tickvals:layout_attributes$3.tickvals,ticktext:layout_attributes$3.ticktext,ticks:extendFlat$c({},layout_attributes$3.ticks,{dflt:""}),ticklabeloverflow:extendFlat$c({},layout_attributes$3.ticklabeloverflow,{description:["Determines how we handle tick labels that would overflow either the graph div or the domain of the axis.","The default value for inside tick labels is *hide past domain*.","In other cases the default is *hide past div*."].join(" ")}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",description:["Determines where tick labels are drawn relative to the ticks.","Left and right options are used when `orientation` is *h*,","top and bottom when `orientation` is *v*."].join(" ")},ticklen:layout_attributes$3.ticklen,tickwidth:layout_attributes$3.tickwidth,tickcolor:layout_attributes$3.tickcolor,ticklabelstep:layout_attributes$3.ticklabelstep,showticklabels:layout_attributes$3.showticklabels,tickfont:font_attributes({description:"Sets the color bar's tick label font"}),tickangle:layout_attributes$3.tickangle,tickformat:layout_attributes$3.tickformat,tickformatstops:layout_attributes$3.tickformatstops,tickprefix:layout_attributes$3.tickprefix,showtickprefix:layout_attributes$3.showtickprefix,ticksuffix:layout_attributes$3.ticksuffix,showticksuffix:layout_attributes$3.showticksuffix,separatethousands:layout_attributes$3.separatethousands,exponentformat:layout_attributes$3.exponentformat,minexponent:layout_attributes$3.minexponent,showexponent:layout_attributes$3.showexponent,title:{text:{valType:"string",description:["Sets the title of the color bar.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:font_attributes({description:["Sets this color bar's title font.","Note that the title's font used to be set","by the now deprecated `titlefont` attribute."].join(" ")}),side:{valType:"enumerated",values:["right","top","bottom"],description:["Determines the location of color bar's title","with respect to the color bar.","Defaults to *top* when `orientation` if *v* and ","defaults to *right* when `orientation` if *h*.","Note that the title's location used to be set","by the now deprecated `titleside` attribute."].join(" ")}},_deprecated:{title:{valType:"string",description:["Deprecated in favor of color bar's `title.text`.","Note that value of color bar's `title` is no longer a simple","*string* but a set of sub-attributes."].join(" ")},titlefont:font_attributes({description:"Deprecated in favor of color bar's `title.font`."}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top",description:"Deprecated in favor of color bar's `title.side`."}}},"colorbars","from-root"),counterRegex$2=regex.counter,palettes=scales_1.scales,paletteStr=sort_object_keys(palettes);function code(t){return"`"+t+"`"}var attributes$m=function(t,e){t=t||"";var r,n,i=(e=e||{}).cLetter||"c",a="onlyIfNumerical"in e?e.onlyIfNumerical:Boolean(t),o="noScale"in e?e.noScale:"marker.line"===t,s="showScaleDflt"in e?e.showScaleDflt:"z"===i,l="string"==typeof e.colorscaleDflt?palettes[e.colorscaleDflt]:null,c=e.editTypeOverride||"",u=t?t+".":"";"colorAttr"in e?(r=e.colorAttr,n=e.colorAttr):n="in "+code(u+(r={z:"z",c:"color"}[i]));var d=a?" Has an effect only if "+n+"is set to a numerical array.":"",h=i+"auto",g=i+"min",f=i+"max",p=i+"mid",m=code(u+h),y=code(u+g),b=code(u+f),v=y+" and "+b,x={};x[g]=x[f]=void 0;var I={};I[h]=!1;var B={};return"color"===r&&(B.color={valType:"color",arrayOk:!0,editType:c||"style",description:["Sets the",t,"color."," It accepts either a specific color"," or an array of numbers that are mapped to the colorscale"," relative to the max and min values of the array or relative to"," "+v+" if set."].join("")},e.anim&&(B.color.anim=!0)),B[h]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:x,description:["Determines whether or not the color domain is computed"," with respect to the input data (here "+n+") or the bounds set in"," ",v," ",d," Defaults to `false` when ",v," are set by the user."].join("")},B[g]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:I,description:["Sets the lower bound of the color domain.",d," Value should have the same units as ",n," and if set, ",b," must be set as well."].join("")},B[f]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:I,description:["Sets the upper bound of the color domain.",d," Value should have the same units as ",n," and if set, ",y," must be set as well."].join("")},B[p]={valType:"number",dflt:null,editType:"calc",impliedEdits:x,description:["Sets the mid-point of the color domain by scaling ",y," and/or ",b," to be equidistant to this point.",d," Value should have the same units as ",n,". ","Has no effect when ",m," is `false`."].join("")},B.colorscale={valType:"colorscale",editType:"calc",dflt:l,impliedEdits:{autocolorscale:!1},description:["Sets the colorscale.",d," The colorscale must be an array containing"," arrays mapping a normalized value to an"," rgb, rgba, hex, hsl, hsv, or named color string."," At minimum, a mapping for the lowest (0) and highest (1)"," values are required. For example,"," `[[0, 'rgb(0,0,255)'], [1, 'rgb(255,0,0)']]`."," To control the bounds of the colorscale in color space,"," use",v,"."," Alternatively, `colorscale` may be a palette name string"," of the following list: "+paletteStr+"."].join("")},B.autocolorscale={valType:"boolean",dflt:!1!==e.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0},description:["Determines whether the colorscale is a default palette (`autocolorscale: true`)"," or the palette determined by ",code(u+"colorscale"),".",d," In case `colorscale` is unspecified or `autocolorscale` is true, the default "," palette will be chosen according to whether numbers in the `color` array are"," all positive, all negative or mixed."].join("")},B.reversescale={valType:"boolean",dflt:!1,editType:"plot",description:["Reverses the color mapping if true.",d," If true, ",y," will correspond to the last color"," in the array and ",b," will correspond to the first color."].join("")},o||(B.showscale={valType:"boolean",dflt:s,editType:"calc",description:["Determines whether or not a colorbar is displayed for this trace.",d].join("")},B.colorbar=attributes$n),e.noColorAxis||(B.coloraxis={valType:"subplotid",regex:counterRegex$2("coloraxis"),dflt:null,editType:"calc",description:["Sets a reference to a shared color axis.","References to these shared color axes are *coloraxis*, *coloraxis2*, *coloraxis3*, etc.","Settings for these shared color axes are set in the layout, under","`layout.coloraxis`, `layout.coloraxis2`, etc.","Note that multiple color scales can be linked to the same color axis."].join(" ")}),B},extendFlat$b=extend.extendFlat,scales=scales_1.scales,msg="Note that `autocolorscale` must be true for this attribute to work.",layout_attributes$2={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:scales.Reds,editType:"calc",description:["Sets the default sequential colorscale for positive values.",msg].join(" ")},sequentialminus:{valType:"colorscale",dflt:scales.Blues,editType:"calc",description:["Sets the default sequential colorscale for negative values.",msg].join(" ")},diverging:{valType:"colorscale",dflt:scales.RdBu,editType:"calc",description:["Sets the default diverging colorscale.",msg].join(" ")}},coloraxis:extendFlat$b({_isSubplotObj:!0,editType:"calc",description:[""].join(" ")},attributes$m("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))},has_colorbar=function(t){return lib_1.isPlainObject(t.colorbar)},ONEDAY$1=numerical.ONEDAY,ONEWEEK$2=numerical.ONEWEEK,dtick=function(t,e){var r="log"===e,n="date"===e,i="category"===e,a=n?ONEDAY$1:1;if(!t)return a;if(fastIsnumeric(t))return(t=Number(t))<=0?a:i?Math.max(1,Math.round(t)):n?Math.max(.1,t):t;if("string"!=typeof t||!n&&!r)return a;var o=t.charAt(0),s=t.substr(1);return(s=fastIsnumeric(s)?Number(s):0)<=0||!(n&&"M"===o&&s===Math.round(s)||r&&"L"===o||r&&"D"===o&&(1===s||2===s))?a:t},tick0=function(t,e,r,n){return"date"===e?lib_1.cleanDate(t,lib_1.dateTick0(r,n%ONEWEEK$2==0?1:0)):"D1"!==n&&"D2"!==n?fastIsnumeric(t)?Number(t):0:void 0},clean_ticks={dtick:dtick,tick0:tick0},isArrayOrTypedArray$8=lib_1.isArrayOrTypedArray,tick_value_defaults=function(t,e,r,n){function i(r){var n=t[r];return void 0!==n?n:(e._template||{})[r]}var a=i("tick0"),o=i("dtick"),s=i("tickvals"),l=r("tickmode",isArrayOrTypedArray$8(s)?"array":o?"linear":"auto");if("auto"===l)r("nticks");else if("linear"===l){var c=e.dtick=clean_ticks.dtick(o,n);e.tick0=clean_ticks.tick0(a,n,e.calendar,c)}else if("multicategory"!==n){void 0===r("tickvals")?e.tickmode="auto":r("ticktext")}},tick_mark_defaults=function(t,e,r,n){var i=lib_1.coerce2(t,e,layout_attributes$3,"ticklen"),a=lib_1.coerce2(t,e,layout_attributes$3,"tickwidth"),o=lib_1.coerce2(t,e,layout_attributes$3,"tickcolor",e.color);r("ticks",n.outerTicks||i||a||o?"outside":"")||(delete e.ticklen,delete e.tickwidth,delete e.tickcolor)},show_dflt=function(t){var e=["showexponent","showtickprefix","showticksuffix"].filter((function(e){return void 0!==t[e]}));if(e.every((function(r){return t[r]===t[e[0]]}))||1===e.length)return t[e[0]]},array_container_defaults=function(t,e,r){var n,i,a=r.name,o=r.inclusionAttr||"visible",s=e[a],l=lib_1.isArrayOrTypedArray(t[a])?t[a]:[],c=e[a]=[],u=plot_template.arrayTemplater(e,a,o);for(n=0;n<l.length;n++){var d=l[n];lib_1.isPlainObject(d)?i=u.newItem(d):(i=u.newItem({}))[o]=!1,i._index=n,!1!==i[o]&&r.handleItemDefaults(d,i,e,r),c.push(i)}var h=u.defaultItems();for(n=0;n<h.length;n++)(i=h[n])._index=c.length,r.handleItemDefaults({},i,e,r,{}),c.push(i);if(lib_1.isArrayOrTypedArray(s)){var g=Math.min(s.length,c.length);for(n=0;n<g;n++)lib_1.relinkPrivateKeys(c[n],s[n])}return c},contrast=color_1.contrast,tick_label_defaults=function(t,e,r,n,i){i||(i={});var a=show_dflt(t);if(r("showticklabels")){var o=i.font||{},s=e.color,l=-1!==(e.ticklabelposition||"").indexOf("inside")?contrast(i.bgColor):s&&s!==layout_attributes$3.color.dflt?s:o.color;if(lib_1.coerceFont(r,"tickfont",{family:o.family,size:o.size,color:l}),i.noTicklabelstep||"multicategory"===n||"log"===n||r("ticklabelstep"),i.noAng||r("tickangle"),"category"!==n){var c=r("tickformat");array_container_defaults(t,e,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:tickformatstopDefaults}),e.tickformatstops.length||delete e.tickformatstops,i.noExp||c||"date"===n||(r("showexponent",a),r("exponentformat"),r("minexponent"),r("separatethousands"))}}};function tickformatstopDefaults(t,e){function r(r,n){return lib_1.coerce(t,e,layout_attributes$3.tickformatstops,r,n)}r("enabled")&&(r("dtickrange"),r("value"))}var prefix_suffix_defaults=function(t,e,r,n,i){i||(i={});var a=i.tickSuffixDflt,o=show_dflt(t);r("tickprefix")&&r("showtickprefix",o),r("ticksuffix",a)&&r("showticksuffix",o)},defaults$l=function(t,e,r){var n=plot_template.newContainer(e,"colorbar"),i=t.colorbar||{};function a(t,e){return lib_1.coerce(i,n,attributes$n,t,e)}var o=r.margin||{t:0,b:0,l:0,r:0},s=r.width-o.l-o.r,l=r.height-o.t-o.b,c="v"===a("orientation"),u=a("thicknessmode");a("thickness","fraction"===u?30/(c?s:l):30);var d=a("lenmode");a("len","fraction"===d?1:c?l:s),a("x",c?1.02:.5),a("xanchor",c?"left":"center"),a("xpad"),a("y",c?.5:1.02),a("yanchor",c?"middle":"bottom"),a("ypad"),lib_1.noneOrAll(i,n,["x","y"]),a("outlinecolor"),a("outlinewidth"),a("bordercolor"),a("borderwidth"),a("bgcolor");var h=lib_1.coerce(i,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:c?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");a("ticklabeloverflow",-1!==h.indexOf("inside")?"hide past domain":"hide past div"),tick_value_defaults(i,n,a,"linear");var g=r.font,f={outerTicks:!1,font:g};-1!==h.indexOf("inside")&&(f.bgColor="black"),prefix_suffix_defaults(i,n,a,"linear",f),tick_label_defaults(i,n,a,"linear",f),tick_mark_defaults(i,n,a,"linear"),a("title.text",r._dfltTitle.colorbar);var p=n.tickfont,m=lib_1.extendFlat({},p,{color:g.color,size:lib_1.bigFont(p.size)});lib_1.coerceFont(a,"title.font",m),a("title.side",c?"top":"right")},isValidScale=scales_1.isValid,traceIs$3=registry.traceIs;function npMaybe(t,e){var r=e.slice(0,e.length-1);return e?lib_1.nestedProperty(t,r).get()||{}:t}var defaults$k=function t(e,r,n,i,a){var o=a.prefix,s=a.cLetter,l="_module"in r,c=npMaybe(e,o),u=npMaybe(r,o),d=npMaybe(r._template||{},o)||{},h=function(){return delete e.coloraxis,delete r.coloraxis,t(e,r,n,i,a)};if(l){var g=n._colorAxes||{},f=i(o+"coloraxis");if(f){var p=traceIs$3(r,"contour")&&lib_1.nestedProperty(r,"contours.coloring").get()||"heatmap",m=g[f];return void(m?(m[2].push(h),m[0]!==p&&(m[0]=!1,lib_1.warn(["Ignoring coloraxis:",f,"setting","as it is linked to incompatible colorscales."].join(" ")))):g[f]=[p,r,[h]])}}var y=c[s+"min"],b=c[s+"max"],v=fastIsnumeric(y)&&fastIsnumeric(b)&&y<b;i(o+s+"auto",!v)?i(o+s+"mid"):(i(o+s+"min"),i(o+s+"max"));var x,I,B=c.colorscale,C=d.colorscale;(void 0!==B&&(x=!isValidScale(B)),void 0!==C&&(x=!isValidScale(C)),i(o+"autocolorscale",x),i(o+"colorscale"),i(o+"reversescale"),"marker.line."!==o)&&(o&&l&&(I=has_colorbar(c)),i(o+"showscale",I)&&(o&&d&&(u._template=d),defaults$l(c,u,n)))},layout_defaults$3=function(t,e){function r(r,n){return lib_1.coerce(t,e,layout_attributes$2,r,n)}r("colorscale.sequential"),r("colorscale.sequentialminus"),r("colorscale.diverging");var n,i,a=e._colorAxes;function o(t,e){return lib_1.coerce(n,i,layout_attributes$2.coloraxis,t,e)}for(var s in a){var l=a[s];if(l[0])n=t[s]||{},(i=plot_template.newContainer(e,s,"coloraxis"))._name=s,defaults$k(n,i,e,o,{prefix:"",cLetter:"c"});else{for(var c=0;c<l[2].length;c++)l[2][c]();delete e._colorAxes[s]}}},hasColorscale$4=helpers$b.hasColorscale,extractOpts$3=helpers$b.extractOpts,cross_trace_defaults$2=function(t,e){function r(t,e){var r=t["_"+e];void 0!==r&&(t[e]=r)}function n(t,n){var i=n.container?lib_1.nestedProperty(t,n.container).get():t;if(i)if(i.coloraxis)i._colorAx=e[i.coloraxis];else{var a=extractOpts$3(i),o=a.auto;(o||void 0===a.min)&&r(i,n.min),(o||void 0===a.max)&&r(i,n.max),a.autocolorscale&&r(i,"colorscale")}}for(var i=0;i<t.length;i++){var a=t[i],o=a._module.colorbar;if(o)if(Array.isArray(o))for(var s=0;s<o.length;s++)n(a,o[s]);else n(a,o);hasColorscale$4(a,"marker.line")&&n(a,{container:"marker.line",min:"cmin",max:"cmax"})}for(var l in e._colorAxes)n(e[l],{min:"cmin",max:"cmax"})},extractOpts$2=helpers$b.extractOpts,calc$7=function(t,e,r){var n,i=t._fullLayout,a=r.vals,o=r.containerStr,s=o?lib_1.nestedProperty(e,o).get():e,l=extractOpts$2(s),c=!1!==l.auto,u=l.min,d=l.max,h=l.mid,g=function(){return lib_1.aggNums(Math.min,null,a)},f=function(){return lib_1.aggNums(Math.max,null,a)};(void 0===u?u=g():c&&(u=s._colorAx&&fastIsnumeric(u)?Math.min(u,g()):g()),void 0===d?d=f():c&&(d=s._colorAx&&fastIsnumeric(d)?Math.max(d,f()):f()),c&&void 0!==h&&(d-h>h-u?u=h-(d-h):d-h<h-u&&(d=h+(h-u))),u===d&&(u-=.5,d+=.5),l._sync("min",u),l._sync("max",d),l.autocolorscale)&&(n=u*d<0?i.colorscale.diverging:u>=0?i.colorscale.sequential:i.colorscale.sequentialminus,l._sync("colorscale",n))},colorscale={moduleType:"component",name:"colorscale",attributes:attributes$m,layoutAttributes:layout_attributes$2,supplyLayoutDefaults:layout_defaults$3,handleDefaults:defaults$k,crossTraceDefaults:cross_trace_defaults$2,calc:calc$7,scales:scales_1.scales,defaultScale:scales_1.defaultScale,getScale:scales_1.get,isValidScale:scales_1.isValid,hasColorscale:helpers$b.hasColorscale,extractOpts:helpers$b.extractOpts,extractScale:helpers$b.extractScale,flipScale:helpers$b.flipScale,makeColorScaleFunc:helpers$b.makeColorScaleFunc,makeColorScaleFuncFromTrace:helpers$b.makeColorScaleFuncFromTrace},subtypes={hasLines:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("lines")},hasMarkers:function(t){return t.visible&&(t.mode&&-1!==t.mode.indexOf("markers")||"splom"===t.type)},hasText:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("text")},isBubble:function(t){return lib_1.isPlainObject(t.marker)&&lib_1.isArrayOrTypedArray(t.marker.size)}},make_bubble_size_func=function(t,e){e||(e=2);var r=t.marker,n=r.sizeref||1,i=r.sizemin||0,a="area"===r.sizemode?function(t){return Math.sqrt(t/n)}:function(t){return t/n};return function(t){var r=a(t/e);return fastIsnumeric(r)&&r>0?Math.max(r,i):0}},helpers$a=createCommonjsModule((function(t,e){e.getSubplot=function(t){return t.subplot||t.xaxis+t.yaxis||t.geo},e.isTraceInSubplots=function(t,r){if("splom"===t.type){for(var n=t.xaxes||[],i=t.yaxes||[],a=0;a<n.length;a++)for(var o=0;o<i.length;o++)if(-1!==r.indexOf(n[a]+i[o]))return!0;return!1}return-1!==r.indexOf(e.getSubplot(t))},e.flat=function(t,e){for(var r=new Array(t.length),n=0;n<t.length;n++)r[n]=e;return r},e.p2c=function(t,e){for(var r=new Array(t.length),n=0;n<t.length;n++)r[n]=t[n].p2c(e);return r},e.getDistanceFunction=function(t,r,n,i){return"closest"===t?i||e.quadrature(r,n):"x"===t.charAt(0)?r:n},e.getClosest=function(t,e,r){if(!1!==r.index)r.index>=0&&r.index<t.length?r.distance=0:r.index=!1;else for(var n=0;n<t.length;n++){var i=e(t[n]);i<=r.distance&&(r.index=n,r.distance=i)}return r},e.inbox=function(t,e,r){return t*e<0||0===t?r:1/0},e.quadrature=function(t,e){return function(r){var n=t(r),i=e(r);return Math.sqrt(n*n+i*i)}},e.makeEventData=function(t,r,n){var i="index"in t?t.index:t.pointNumber,a={data:r._input,fullData:r,curveNumber:r.index,pointNumber:i};if(r._indexToPoints){var o=r._indexToPoints[i];1===o.length?a.pointIndex=o[0]:a.pointIndices=o}else a.pointIndex=i;return r._module.eventData?a=r._module.eventData(a,t,r,n,i):("xVal"in t?a.x=t.xVal:"x"in t&&(a.x=t.x),"yVal"in t?a.y=t.yVal:"y"in t&&(a.y=t.y),t.xa&&(a.xaxis=t.xa),t.ya&&(a.yaxis=t.ya),void 0!==t.zLabelVal&&(a.z=t.zLabelVal)),e.appendArrayPointValue(a,r,i),a},e.appendArrayPointValue=function(t,e,r){var a=e._arrayAttrs;if(a)for(var o=0;o<a.length;o++){var s=a[o],l=n(s);if(void 0===t[l]){var c=i(lib_1.nestedProperty(e,s).get(),r);void 0!==c&&(t[l]=c)}}},e.appendArrayMultiPointValues=function(t,e,r){var a=e._arrayAttrs;if(a)for(var o=0;o<a.length;o++){var s=a[o],l=n(s);if(void 0===t[l]){for(var c=lib_1.nestedProperty(e,s).get(),u=new Array(r.length),d=0;d<r.length;d++)u[d]=i(c,r[d]);t[l]=u}}};var r={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function n(t){return r[t]||t}function i(t,e){return Array.isArray(e)?Array.isArray(t)&&Array.isArray(t[e[0]])?t[e[0]][e[1]]:void 0:t[e]}var a={x:!0,y:!0},o={"x unified":!0,"y unified":!0};e.isUnifiedHover=function(t){return"string"==typeof t&&!!o[t]},e.isXYhover=function(t){return"string"==typeof t&&!!a[t]}})),symbol_defs={circle:{n:0,f:function(t){var e=d3.round(t,2);return"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"}},square:{n:1,f:function(t){var e=d3.round(t,2);return"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"}},diamond:{n:2,f:function(t){var e=d3.round(1.3*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"Z"}},cross:{n:3,f:function(t){var e=d3.round(.4*t,2),r=d3.round(1.2*t,2);return"M"+r+","+e+"H"+e+"V"+r+"H-"+e+"V"+e+"H-"+r+"V-"+e+"H-"+e+"V-"+r+"H"+e+"V-"+e+"H"+r+"Z"}},x:{n:4,f:function(t){var e=d3.round(.8*t/Math.sqrt(2),2),r="l"+e+","+e,n="l"+e+",-"+e,i="l-"+e+",-"+e,a="l-"+e+","+e;return"M0,"+e+r+n+i+n+i+a+i+a+r+a+r+"Z"}},"triangle-up":{n:5,f:function(t){var e=d3.round(2*t/Math.sqrt(3),2);return"M-"+e+","+d3.round(t/2,2)+"H"+e+"L0,-"+d3.round(t,2)+"Z"}},"triangle-down":{n:6,f:function(t){var e=d3.round(2*t/Math.sqrt(3),2);return"M-"+e+",-"+d3.round(t/2,2)+"H"+e+"L0,"+d3.round(t,2)+"Z"}},"triangle-left":{n:7,f:function(t){var e=d3.round(2*t/Math.sqrt(3),2);return"M"+d3.round(t/2,2)+",-"+e+"V"+e+"L-"+d3.round(t,2)+",0Z"}},"triangle-right":{n:8,f:function(t){var e=d3.round(2*t/Math.sqrt(3),2);return"M-"+d3.round(t/2,2)+",-"+e+"V"+e+"L"+d3.round(t,2)+",0Z"}},"triangle-ne":{n:9,f:function(t){var e=d3.round(.6*t,2),r=d3.round(1.2*t,2);return"M-"+r+",-"+e+"H"+e+"V"+r+"Z"}},"triangle-se":{n:10,f:function(t){var e=d3.round(.6*t,2),r=d3.round(1.2*t,2);return"M"+e+",-"+r+"V"+e+"H-"+r+"Z"}},"triangle-sw":{n:11,f:function(t){var e=d3.round(.6*t,2),r=d3.round(1.2*t,2);return"M"+r+","+e+"H-"+e+"V-"+r+"Z"}},"triangle-nw":{n:12,f:function(t){var e=d3.round(.6*t,2),r=d3.round(1.2*t,2);return"M-"+e+","+r+"V-"+e+"H"+r+"Z"}},pentagon:{n:13,f:function(t){var e=d3.round(.951*t,2),r=d3.round(.588*t,2),n=d3.round(-t,2),i=d3.round(-.309*t,2);return"M"+e+","+i+"L"+r+","+d3.round(.809*t,2)+"H-"+r+"L-"+e+","+i+"L0,"+n+"Z"}},hexagon:{n:14,f:function(t){var e=d3.round(t,2),r=d3.round(t/2,2),n=d3.round(t*Math.sqrt(3)/2,2);return"M"+n+",-"+r+"V"+r+"L0,"+e+"L-"+n+","+r+"V-"+r+"L0,-"+e+"Z"}},hexagon2:{n:15,f:function(t){var e=d3.round(t,2),r=d3.round(t/2,2),n=d3.round(t*Math.sqrt(3)/2,2);return"M-"+r+","+n+"H"+r+"L"+e+",0L"+r+",-"+n+"H-"+r+"L-"+e+",0Z"}},octagon:{n:16,f:function(t){var e=d3.round(.924*t,2),r=d3.round(.383*t,2);return"M-"+r+",-"+e+"H"+r+"L"+e+",-"+r+"V"+r+"L"+r+","+e+"H-"+r+"L-"+e+","+r+"V-"+r+"Z"}},star:{n:17,f:function(t){var e=1.4*t,r=d3.round(.225*e,2),n=d3.round(.951*e,2),i=d3.round(.363*e,2),a=d3.round(.588*e,2),o=d3.round(-e,2),s=d3.round(-.309*e,2),l=d3.round(.118*e,2),c=d3.round(.809*e,2);return"M"+r+","+s+"H"+n+"L"+i+","+l+"L"+a+","+c+"L0,"+d3.round(.382*e,2)+"L-"+a+","+c+"L-"+i+","+l+"L-"+n+","+s+"H-"+r+"L0,"+o+"Z"}},hexagram:{n:18,f:function(t){var e=d3.round(.66*t,2),r=d3.round(.38*t,2),n=d3.round(.76*t,2);return"M-"+n+",0l-"+r+",-"+e+"h"+n+"l"+r+",-"+e+"l"+r+","+e+"h"+n+"l-"+r+","+e+"l"+r+","+e+"h-"+n+"l-"+r+","+e+"l-"+r+",-"+e+"h-"+n+"Z"}},"star-triangle-up":{n:19,f:function(t){var e=d3.round(t*Math.sqrt(3)*.8,2),r=d3.round(.8*t,2),n=d3.round(1.6*t,2),i=d3.round(4*t,2),a="A "+i+","+i+" 0 0 1 ";return"M-"+e+","+r+a+e+","+r+a+"0,-"+n+a+"-"+e+","+r+"Z"}},"star-triangle-down":{n:20,f:function(t){var e=d3.round(t*Math.sqrt(3)*.8,2),r=d3.round(.8*t,2),n=d3.round(1.6*t,2),i=d3.round(4*t,2),a="A "+i+","+i+" 0 0 1 ";return"M"+e+",-"+r+a+"-"+e+",-"+r+a+"0,"+n+a+e+",-"+r+"Z"}},"star-square":{n:21,f:function(t){var e=d3.round(1.1*t,2),r=d3.round(2*t,2),n="A "+r+","+r+" 0 0 1 ";return"M-"+e+",-"+e+n+"-"+e+","+e+n+e+","+e+n+e+",-"+e+n+"-"+e+",-"+e+"Z"}},"star-diamond":{n:22,f:function(t){var e=d3.round(1.4*t,2),r=d3.round(1.9*t,2),n="A "+r+","+r+" 0 0 1 ";return"M-"+e+",0"+n+"0,"+e+n+e+",0"+n+"0,-"+e+n+"-"+e+",0Z"}},"diamond-tall":{n:23,f:function(t){var e=d3.round(.7*t,2),r=d3.round(1.4*t,2);return"M0,"+r+"L"+e+",0L0,-"+r+"L-"+e+",0Z"}},"diamond-wide":{n:24,f:function(t){var e=d3.round(1.4*t,2),r=d3.round(.7*t,2);return"M0,"+r+"L"+e+",0L0,-"+r+"L-"+e+",0Z"}},hourglass:{n:25,f:function(t){var e=d3.round(t,2);return"M"+e+","+e+"H-"+e+"L"+e+",-"+e+"H-"+e+"Z"},noDot:!0},bowtie:{n:26,f:function(t){var e=d3.round(t,2);return"M"+e+","+e+"V-"+e+"L-"+e+","+e+"V-"+e+"Z"},noDot:!0},"circle-cross":{n:27,f:function(t){var e=d3.round(t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(t){var e=d3.round(t,2),r=d3.round(t/Math.sqrt(2),2);return"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r+"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(t){var e=d3.round(t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(t){var e=d3.round(t,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(t){var e=d3.round(1.3*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"ZM0,-"+e+"V"+e+"M-"+e+",0H"+e},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(t){var e=d3.round(1.3*t,2),r=d3.round(.65*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"ZM-"+r+",-"+r+"L"+r+","+r+"M-"+r+","+r+"L"+r+",-"+r},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(t){var e=d3.round(1.4*t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(t){var e=d3.round(t,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(t){var e=d3.round(1.2*t,2),r=d3.round(.85*t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(t){var e=d3.round(t/2,2),r=d3.round(t,2);return"M"+e+","+r+"V-"+r+"m-"+r+",0V"+r+"M"+r+","+e+"H-"+r+"m0,-"+r+"H"+r},needLine:!0,noFill:!0},"y-up":{n:37,f:function(t){var e=d3.round(1.2*t,2),r=d3.round(1.6*t,2),n=d3.round(.8*t,2);return"M-"+e+","+n+"L0,0M"+e+","+n+"L0,0M0,-"+r+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(t){var e=d3.round(1.2*t,2),r=d3.round(1.6*t,2),n=d3.round(.8*t,2);return"M-"+e+",-"+n+"L0,0M"+e+",-"+n+"L0,0M0,"+r+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(t){var e=d3.round(1.2*t,2),r=d3.round(1.6*t,2),n=d3.round(.8*t,2);return"M"+n+","+e+"L0,0M"+n+",-"+e+"L0,0M-"+r+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(t){var e=d3.round(1.2*t,2),r=d3.round(1.6*t,2),n=d3.round(.8*t,2);return"M-"+n+","+e+"L0,0M-"+n+",-"+e+"L0,0M"+r+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(t){var e=d3.round(1.4*t,2);return"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(t){var e=d3.round(1.4*t,2);return"M0,"+e+"V-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(t){var e=d3.round(t,2);return"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(t){var e=d3.round(t,2);return"M"+e+","+e+"L-"+e+",-"+e},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(t){var e=d3.round(t,2);return"M0,0L-"+e+","+d3.round(2*t,2)+"H"+e+"Z"},noDot:!0},"arrow-down":{n:46,f:function(t){var e=d3.round(t,2);return"M0,0L-"+e+",-"+d3.round(2*t,2)+"H"+e+"Z"},noDot:!0},"arrow-left":{n:47,f:function(t){var e=d3.round(2*t,2),r=d3.round(t,2);return"M0,0L"+e+",-"+r+"V"+r+"Z"},noDot:!0},"arrow-right":{n:48,f:function(t){var e=d3.round(2*t,2),r=d3.round(t,2);return"M0,0L-"+e+",-"+r+"V"+r+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(t){var e=d3.round(t,2);return"M-"+e+",0H"+e+"M0,0L-"+e+","+d3.round(2*t,2)+"H"+e+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(t){var e=d3.round(t,2);return"M-"+e+",0H"+e+"M0,0L-"+e+",-"+d3.round(2*t,2)+"H"+e+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(t){var e=d3.round(2*t,2),r=d3.round(t,2);return"M0,-"+r+"V"+r+"M0,0L"+e+",-"+r+"V"+r+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(t){var e=d3.round(2*t,2),r=d3.round(t,2);return"M0,-"+r+"V"+r+"M0,0L-"+e+",-"+r+"V"+r+"Z"},needLine:!0,noDot:!0}},drawing_1=createCommonjsModule((function(t){var e=lib_1.numberFormat,r=lib_1.strTranslate,n=alignment.LINE_SPACING,i=interactions.DESELECTDIM,a=helpers$a.appendArrayPointValue,o=t.exports={};function s(t,e,r){var n=e.fillpattern,i=n&&o.getPatternAttr(n.shape,0,"");if(i){var a=o.getPatternAttr(n.bgcolor,0,null),s=o.getPatternAttr(n.fgcolor,0,null),l=n.fgopacity,c=o.getPatternAttr(n.size,0,8),u=o.getPatternAttr(n.solidity,0,.3),d=e.uid;o.pattern(t,"point",r,d,i,c,u,void 0,n.fillmode,a,s,l)}else e.fillcolor&&t.call(color_1.fill,e.fillcolor)}o.font=function(t,e,r,n){lib_1.isPlainObject(e)&&(n=e.color,r=e.size,e=e.family),e&&t.style("font-family",e),r+1&&t.style("font-size",r+"px"),n&&t.call(color_1.fill,n)},o.setPosition=function(t,e,r){t.attr("x",e).attr("y",r)},o.setSize=function(t,e,r){t.attr("width",e).attr("height",r)},o.setRect=function(t,e,r,n,i){t.call(o.setPosition,e,r).call(o.setSize,n,i)},o.translatePoint=function(t,e,n,i){var a=n.c2p(t.x),o=i.c2p(t.y);return!!(fastIsnumeric(a)&&fastIsnumeric(o)&&e.node())&&("text"===e.node().nodeName?e.attr("x",a).attr("y",o):e.attr("transform",r(a,o)),!0)},o.translatePoints=function(t,e,r){t.each((function(t){var n=d3.select(this);o.translatePoint(t,n,e,r)}))},o.hideOutsideRangePoint=function(t,e,r,n,i,a){e.attr("display",r.isPtWithinRange(t,i)&&n.isPtWithinRange(t,a)?null:"none")},o.hideOutsideRangePoints=function(t,e){if(e._hasClipOnAxisFalse){var r=e.xaxis,n=e.yaxis;t.each((function(e){var i=e[0].trace,a=i.xcalendar,s=i.ycalendar,l=registry.traceIs(i,"bar-like")?".bartext":".point,.textpoint";t.selectAll(l).each((function(t){o.hideOutsideRangePoint(t,d3.select(this),r,n,a,s)}))}))}},o.crispRound=function(t,e,r){return e&&fastIsnumeric(e)?t._context.staticPlot?e:e<1?1:Math.round(e):r||0},o.singleLineStyle=function(t,e,r,n,i){e.style("fill","none");var a=(((t||[])[0]||{}).trace||{}).line||{},s=r||a.width||0,l=i||a.dash||"";color_1.stroke(e,n||a.color),o.dashLine(e,l,s)},o.lineGroupStyle=function(t,e,r,n){t.style("fill","none").each((function(t){var i=(((t||[])[0]||{}).trace||{}).line||{},a=e||i.width||0,s=n||i.dash||"";d3.select(this).call(color_1.stroke,r||i.color).call(o.dashLine,s,a)}))},o.dashLine=function(t,e,r){r=+r||0,e=o.dashStyle(e,r),t.style({"stroke-dasharray":e,"stroke-width":r+"px"})},o.dashStyle=function(t,e){e=+e||1;var r=Math.max(e,3);return"solid"===t?t="":"dot"===t?t=r+"px,"+r+"px":"dash"===t?t=3*r+"px,"+3*r+"px":"longdash"===t?t=5*r+"px,"+5*r+"px":"dashdot"===t?t=3*r+"px,"+r+"px,"+r+"px,"+r+"px":"longdashdot"===t&&(t=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"),t},o.singleFillStyle=function(t,e){var r=d3.select(t.node());s(t,((r.data()[0]||[])[0]||{}).trace||{},e)},o.fillGroupStyle=function(t,e){t.style("stroke-width",0).each((function(t){var r=d3.select(this);t[0].trace&&s(r,t[0].trace,e)}))},o.symbolNames=[],o.symbolFuncs=[],o.symbolNeedLines={},o.symbolNoDot={},o.symbolNoFill={},o.symbolList=[],Object.keys(symbol_defs).forEach((function(t){var e=symbol_defs[t],r=e.n;o.symbolList.push(r,String(r),t,r+100,String(r+100),t+"-open"),o.symbolNames[r]=t,o.symbolFuncs[r]=e.f,e.needLine&&(o.symbolNeedLines[r]=!0),e.noDot?o.symbolNoDot[r]=!0:o.symbolList.push(r+200,String(r+200),t+"-dot",r+300,String(r+300),t+"-open-dot"),e.noFill&&(o.symbolNoFill[r]=!0)}));var l=o.symbolNames.length;function c(t,e){var r=t%100;return o.symbolFuncs[r](e)+(t>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}o.symbolNumber=function(t){if(fastIsnumeric(t))t=+t;else if("string"==typeof t){var e=0;t.indexOf("-open")>0&&(e=100,t=t.replace("-open","")),t.indexOf("-dot")>0&&(e+=200,t=t.replace("-dot","")),(t=o.symbolNames.indexOf(t))>=0&&(t+=e)}return t%100>=l||t>=400?0:Math.floor(Math.max(t,0))};var u={x1:1,x2:0,y1:0,y2:0},d={x1:0,x2:0,y1:1,y2:0},h=e("~f"),g={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:u},horizontalreversed:{node:"linearGradient",attrs:u,reversed:!0},vertical:{node:"linearGradient",attrs:d},verticalreversed:{node:"linearGradient",attrs:d,reversed:!0}};o.gradient=function(t,e,r,n,i,a){for(var o=i.length,s=g[n],l=new Array(o),c=0;c<o;c++)s.reversed?l[o-1-c]=[h(100*(1-i[c][0])),i[c][1]]:l[c]=[h(100*i[c][0]),i[c][1]];var u=e._fullLayout,d="g"+u._uid+"-"+r,f=u._defs.select(".gradients").selectAll("#"+d).data([n+l.join(";")],lib_1.identity);f.exit().remove(),f.enter().append(s.node).each((function(){var t=d3.select(this);s.attrs&&t.attr(s.attrs),t.attr("id",d);var e=t.selectAll("stop").data(l);e.exit().remove(),e.enter().append("stop"),e.each((function(t){var e=tinycolor(t[1]);d3.select(this).attr({offset:t[0]+"%","stop-color":color_1.tinyRGB(e),"stop-opacity":e.getAlpha()})}))})),t.style(a,B(d,e)).style(a+"-opacity",null),t.classed("gradient_filled",!0)},o.pattern=function(t,e,r,n,i,a,o,s,l,c,u,d){var h="legend"===e;s&&("overlay"===l?(c=s,u=color_1.contrast(c)):(c=void 0,u=s));var g,f,p,m,y,b,v=r._fullLayout,x="p"+v._uid+"-"+n,I={};switch(i){case"/":g=a*Math.sqrt(2),f=a*Math.sqrt(2),b="path",I={d:p="M-"+g/4+","+f/4+"l"+g/2+",-"+f/2+"M0,"+f+"L"+g+",0M"+g/4*3+","+f/4*5+"l"+g/2+",-"+f/2,opacity:d,stroke:u,"stroke-width":(m=o*a)+"px"};break;case"\\":g=a*Math.sqrt(2),f=a*Math.sqrt(2),b="path",I={d:p="M"+g/4*3+",-"+f/4+"l"+g/2+","+f/2+"M0,0L"+g+","+f+"M-"+g/4+","+f/4*3+"l"+g/2+","+f/2,opacity:d,stroke:u,"stroke-width":(m=o*a)+"px"};break;case"x":g=a*Math.sqrt(2),f=a*Math.sqrt(2),p="M-"+g/4+","+f/4+"l"+g/2+",-"+f/2+"M0,"+f+"L"+g+",0M"+g/4*3+","+f/4*5+"l"+g/2+",-"+f/2+"M"+g/4*3+",-"+f/4+"l"+g/2+","+f/2+"M0,0L"+g+","+f+"M-"+g/4+","+f/4*3+"l"+g/2+","+f/2,m=a-a*Math.sqrt(1-o),b="path",I={d:p,opacity:d,stroke:u,"stroke-width":m+"px"};break;case"|":b="path",b="path",I={d:p="M"+(g=a)/2+",0L"+g/2+","+(f=a),opacity:d,stroke:u,"stroke-width":(m=o*a)+"px"};break;case"-":b="path",b="path",I={d:p="M0,"+(f=a)/2+"L"+(g=a)+","+f/2,opacity:d,stroke:u,"stroke-width":(m=o*a)+"px"};break;case"+":b="path",p="M"+(g=a)/2+",0L"+g/2+","+(f=a)+"M0,"+f/2+"L"+g+","+f/2,m=a-a*Math.sqrt(1-o),b="path",I={d:p,opacity:d,stroke:u,"stroke-width":m+"px"};break;case".":g=a,f=a,y=o<Math.PI/4?Math.sqrt(o*a*a/Math.PI):function(t,e,r,n,i){return n+(i-n)*(t-e)/(r-e)}(o,Math.PI/4,1,a/2,a/Math.sqrt(2)),b="circle",I={cx:g/2,cy:f/2,r:y,opacity:d,fill:u}}var C=[i||"noSh",c||"noBg",u||"noFg",a,o].join(";"),F=v._defs.select(".patterns").selectAll("#"+x).data([C],lib_1.identity);F.exit().remove(),F.enter().append("pattern").each((function(){var t=d3.select(this);if(t.attr({id:x,width:g+"px",height:f+"px",patternUnits:"userSpaceOnUse",patternTransform:h?"scale(0.8)":""}),c){var e=t.selectAll("rect").data([0]);e.exit().remove(),e.enter().append("rect").attr({width:g+"px",height:f+"px",fill:c})}var r=t.selectAll(b).data([0]);r.exit().remove(),r.enter().append(b).attr(I)})),t.style("fill",B(x,r)).style("fill-opacity",null),t.classed("pattern_filled",!0)},o.initGradients=function(t){var e=t._fullLayout;lib_1.ensureSingle(e._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),d3.select(t).selectAll(".gradient_filled").classed("gradient_filled",!1)},o.initPatterns=function(t){var e=t._fullLayout;lib_1.ensureSingle(e._defs,"g","patterns").selectAll("pattern").remove(),d3.select(t).selectAll(".pattern_filled").classed("pattern_filled",!1)},o.getPatternAttr=function(t,e,r){return t&&lib_1.isArrayOrTypedArray(t)?e<t.length?t[e]:r:t},o.pointStyle=function(t,e,r){if(t.size()){var n=o.makePointStyleFns(e);t.each((function(t){o.singlePointStyle(t,d3.select(this),e,n,r)}))}},o.singlePointStyle=function(t,e,r,n,i){var a=r.marker,s=a.line;if(e.style("opacity",n.selectedOpacityFn?n.selectedOpacityFn(t):void 0===t.mo?a.opacity:t.mo),n.ms2mrc){var l;l="various"===t.ms||"various"===a.size?3:n.ms2mrc(t.ms),t.mrc=l,n.selectedSizeFn&&(l=t.mrc=n.selectedSizeFn(t));var u=o.symbolNumber(t.mx||a.symbol)||0;t.om=u%200>=100,e.attr("d",c(u,l))}var d,h,f,p=!1;if(t.so)f=s.outlierwidth,h=s.outliercolor,d=a.outliercolor;else{var m=(s||{}).width;f=(t.mlw+1||m+1||(t.trace?(t.trace.marker.line||{}).width:0)+1)-1||0,h="mlc"in t?t.mlcc=n.lineScale(t.mlc):lib_1.isArrayOrTypedArray(s.color)?color_1.defaultLine:s.color,lib_1.isArrayOrTypedArray(a.color)&&(d=color_1.defaultLine,p=!0),d="mc"in t?t.mcc=n.markerScale(t.mc):a.color||"rgba(0,0,0,0)",n.selectedColorFn&&(d=n.selectedColorFn(t))}if(t.om)e.call(color_1.stroke,d).style({"stroke-width":(f||1)+"px",fill:"none"});else{e.style("stroke-width",(t.isBlank?0:f)+"px");var y=a.gradient,b=t.mgt;b?p=!0:b=y&&y.type,lib_1.isArrayOrTypedArray(b)&&(b=b[0],g[b]||(b=0));var v=a.pattern,x=v&&o.getPatternAttr(v.shape,t.i,"");if(b&&"none"!==b){var I=t.mgc;I?p=!0:I=y.color;var B=r.uid;p&&(B+="-"+t.i),o.gradient(e,i,B,b,[[0,I],[1,d]],"fill")}else if(x){var C=o.getPatternAttr(v.bgcolor,t.i,null),F=o.getPatternAttr(v.fgcolor,t.i,null),A=v.fgopacity,Q=o.getPatternAttr(v.size,t.i,8),_=o.getPatternAttr(v.solidity,t.i,.3),w=t.mcc||lib_1.isArrayOrTypedArray(v.shape)||lib_1.isArrayOrTypedArray(v.bgcolor)||lib_1.isArrayOrTypedArray(v.size)||lib_1.isArrayOrTypedArray(v.solidity),U=r.uid;w&&(U+="-"+t.i),o.pattern(e,"point",i,U,x,Q,_,t.mcc,v.fillmode,C,F,A)}else color_1.fill(e,d);f&&color_1.stroke(e,h)}},o.makePointStyleFns=function(t){var e={},r=t.marker;return e.markerScale=o.tryColorscale(r,""),e.lineScale=o.tryColorscale(r,"line"),registry.traceIs(t,"symbols")&&(e.ms2mrc=subtypes.isBubble(t)?make_bubble_size_func(t):function(){return(r.size||6)/2}),t.selectedpoints&&lib_1.extendFlat(e,o.makeSelectedPointStyleFns(t)),e},o.makeSelectedPointStyleFns=function(t){var e={},r=t.selected||{},n=t.unselected||{},a=t.marker||{},o=r.marker||{},s=n.marker||{},l=a.opacity,c=o.opacity,u=s.opacity,d=void 0!==c,h=void 0!==u;(lib_1.isArrayOrTypedArray(l)||d||h)&&(e.selectedOpacityFn=function(t){var e=void 0===t.mo?a.opacity:t.mo;return t.selected?d?c:e:h?u:i*e});var g=a.color,f=o.color,p=s.color;(f||p)&&(e.selectedColorFn=function(t){var e=t.mcc||g;return t.selected?f||e:p||e});var m=a.size,y=o.size,b=s.size,v=void 0!==y,x=void 0!==b;return registry.traceIs(t,"symbols")&&(v||x)&&(e.selectedSizeFn=function(t){var e=t.mrc||m/2;return t.selected?v?y/2:e:x?b/2:e}),e},o.makeSelectedTextStyleFns=function(t){var e={},r=t.selected||{},n=t.unselected||{},a=t.textfont||{},o=r.textfont||{},s=n.textfont||{},l=a.color,c=o.color,u=s.color;return e.selectedTextColorFn=function(t){var e=t.tc||l;return t.selected?c||e:u||(c?e:color_1.addOpacity(e,i))},e},o.selectedPointStyle=function(t,e){if(t.size()&&e.selectedpoints){var r=o.makeSelectedPointStyleFns(e),n=e.marker||{},i=[];r.selectedOpacityFn&&i.push((function(t,e){t.style("opacity",r.selectedOpacityFn(e))})),r.selectedColorFn&&i.push((function(t,e){color_1.fill(t,r.selectedColorFn(e))})),r.selectedSizeFn&&i.push((function(t,e){var i=e.mx||n.symbol||0,a=r.selectedSizeFn(e);t.attr("d",c(o.symbolNumber(i),a)),e.mrc2=a})),i.length&&t.each((function(t){for(var e=d3.select(this),r=0;r<i.length;r++)i[r](e,t)}))}},o.tryColorscale=function(t,e){var r=e?lib_1.nestedProperty(t,e).get():t;if(r){var n=r.color;if((r.colorscale||r._colorAx)&&lib_1.isArrayOrTypedArray(n))return colorscale.makeColorScaleFuncFromTrace(r)}return lib_1.identity};var f={start:1,end:-1,middle:0,bottom:1,top:-1};function p(t,e,i,a,o){var s=d3.select(t.node().parentNode),l=-1!==e.indexOf("top")?"top":-1!==e.indexOf("bottom")?"bottom":"middle",c=-1!==e.indexOf("left")?"end":-1!==e.indexOf("right")?"start":"middle",u=a?a/.8+1:0,d=(svg_text_utils.lineCount(t)-1)*n+1,h=f[c]*u,g=.75*i+f[l]*u+(f[l]-1)*d*i/2;t.attr("text-anchor",c),o||s.attr("transform",r(h,g))}function m(t,e){var r=t.ts||e.textfont.size;return fastIsnumeric(r)&&r>0?r:0}o.textPointStyle=function(t,e,r){if(t.size()){var n;if(e.selectedpoints){var i=o.makeSelectedTextStyleFns(e);n=i.selectedTextColorFn}var s=e.texttemplate,l=r._fullLayout;t.each((function(t){var i=d3.select(this),c=s?lib_1.extractOption(t,e,"txt","texttemplate"):lib_1.extractOption(t,e,"tx","text");if(c||0===c){if(s){var u=e._module.formatLabels,d=u?u(t,e,l):{},h={};a(h,e,t.i);var g=e._meta||{};c=lib_1.texttemplateString(c,d,l._d3locale,h,t,g)}var f=t.tp||e.textposition,y=m(t,e),b=n?n(t):t.tc||e.textfont.color;i.call(o.font,t.tf||e.textfont.family,y,b).text(c).call(svg_text_utils.convertToTspans,r).call(p,f,y,t.mrc)}else i.remove()}))}},o.selectedTextStyle=function(t,e){if(t.size()&&e.selectedpoints){var r=o.makeSelectedTextStyleFns(e);t.each((function(t){var n=d3.select(this),i=r.selectedTextColorFn(t),a=t.tp||e.textposition,o=m(t,e);color_1.fill(n,i);var s=registry.traceIs(e,"bar-like");p(n,a,o,t.mrc2||t.mrc,s)}))}};function y(t,e,r,n){var i=t[0]-e[0],a=t[1]-e[1],o=r[0]-e[0],s=r[1]-e[1],l=Math.pow(i*i+a*a,.25),c=Math.pow(o*o+s*s,.25),u=(c*c*i-l*l*o)*n,d=(c*c*a-l*l*s)*n,h=3*c*(l+c),g=3*l*(l+c);return[[d3.round(e[0]+(h&&u/h),2),d3.round(e[1]+(h&&d/h),2)],[d3.round(e[0]-(g&&u/g),2),d3.round(e[1]-(g&&d/g),2)]]}o.smoothopen=function(t,e){if(t.length<3)return"M"+t.join("L");var r,n="M"+t[0],i=[];for(r=1;r<t.length-1;r++)i.push(y(t[r-1],t[r],t[r+1],e));for(n+="Q"+i[0][0]+" "+t[1],r=2;r<t.length-1;r++)n+="C"+i[r-2][1]+" "+i[r-1][0]+" "+t[r];return n+="Q"+i[t.length-3][1]+" "+t[t.length-1]},o.smoothclosed=function(t,e){if(t.length<3)return"M"+t.join("L")+"Z";var r,n="M"+t[0],i=t.length-1,a=[y(t[i],t[0],t[1],e)];for(r=1;r<i;r++)a.push(y(t[r-1],t[r],t[r+1],e));for(a.push(y(t[i-1],t[i],t[0],e)),r=1;r<=i;r++)n+="C"+a[r-1][1]+" "+a[r][0]+" "+t[r];return n+="C"+a[i][1]+" "+a[0][0]+" "+t[0]+"Z"};var b={hv:function(t,e){return"H"+d3.round(e[0],2)+"V"+d3.round(e[1],2)},vh:function(t,e){return"V"+d3.round(e[1],2)+"H"+d3.round(e[0],2)},hvh:function(t,e){return"H"+d3.round((t[0]+e[0])/2,2)+"V"+d3.round(e[1],2)+"H"+d3.round(e[0],2)},vhv:function(t,e){return"V"+d3.round((t[1]+e[1])/2,2)+"H"+d3.round(e[0],2)+"V"+d3.round(e[1],2)}},v=function(t,e){return"L"+d3.round(e[0],2)+","+d3.round(e[1],2)};o.steps=function(t){var e=b[t]||v;return function(t){for(var r="M"+d3.round(t[0][0],2)+","+d3.round(t[0][1],2),n=1;n<t.length;n++)r+=e(t[n-1],t[n]);return r}},o.makeTester=function(){var t=lib_1.ensureSingleById(d3.select("body"),"svg","js-plotly-tester",(function(t){t.attr(xmlns_namespaces.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})})),e=lib_1.ensureSingle(t,"path","js-reference-point",(function(t){t.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})}));o.tester=t,o.testref=e},o.savedBBoxes={};var x=0;function I(t){var e=t.getAttribute("data-unformatted");if(null!==e)return e+t.getAttribute("data-math")+t.getAttribute("text-anchor")+t.getAttribute("style")}function B(t,e){if(!t)return null;var r=e._context,n=r._exportedPlot?"":r._baseUrl||"";return n?"url('"+n+"#"+t+"')":"url(#"+t+")"}o.bBox=function(t,e,r){var n,i,a;if(r||(r=I(t)),r){if(n=o.savedBBoxes[r])return lib_1.extendFlat({},n)}else if(1===t.childNodes.length){var s=t.childNodes[0];if(r=I(s)){var l=+s.getAttribute("x")||0,c=+s.getAttribute("y")||0,u=s.getAttribute("transform");if(!u){var d=o.bBox(s,!1,r);return l&&(d.left+=l,d.right+=l),c&&(d.top+=c,d.bottom+=c),d}if(r+="~"+l+"~"+c+"~"+u,n=o.savedBBoxes[r])return lib_1.extendFlat({},n)}}e?i=t:(a=o.tester.node(),i=t.cloneNode(!0),a.appendChild(i)),d3.select(i).attr("transform",null).call(svg_text_utils.positionText,0,0);var h=i.getBoundingClientRect(),g=o.testref.node().getBoundingClientRect();e||a.removeChild(i);var f={height:h.height,width:h.width,left:h.left-g.left,top:h.top-g.top,right:h.right-g.left,bottom:h.bottom-g.top};return x>=1e4&&(o.savedBBoxes={},x=0),r&&(o.savedBBoxes[r]=f),x++,lib_1.extendFlat({},f)},o.setClipUrl=function(t,e,r){t.attr("clip-path",B(e,r))},o.getTranslate=function(t){var e=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,(function(t,e,r){return[e,r].join(" ")})).split(" ");return{x:+e[0]||0,y:+e[1]||0}},o.setTranslate=function(t,e,n){var i=t.attr?"attr":"getAttribute",a=t.attr?"attr":"setAttribute",o=t[i]("transform")||"";return e=e||0,n=n||0,o=o.replace(/(\btranslate\(.*?\);?)/,"").trim(),o=(o+=r(e,n)).trim(),t[a]("transform",o),o},o.getScale=function(t){var e=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,(function(t,e,r){return[e,r].join(" ")})).split(" ");return{x:+e[0]||1,y:+e[1]||1}},o.setScale=function(t,e,r){var n=t.attr?"attr":"getAttribute",i=t.attr?"attr":"setAttribute",a=t[n]("transform")||"";return e=e||1,r=r||1,a=a.replace(/(\bscale\(.*?\);?)/,"").trim(),a=(a+="scale("+e+","+r+")").trim(),t[i]("transform",a),a};var C=/\s*sc.*/;o.setPointGroupScale=function(t,e,r){if(e=e||1,r=r||1,t){var n=1===e&&1===r?"":"scale("+e+","+r+")";t.each((function(){var t=(this.getAttribute("transform")||"").replace(C,"");t=(t+=n).trim(),this.setAttribute("transform",t)}))}};var F=/translate\([^)]*\)\s*$/;o.setTextPointsScale=function(t,e,n){t&&t.each((function(){var t,i=d3.select(this),a=i.select("text");if(a.node()){var o=parseFloat(a.attr("x")||0),s=parseFloat(a.attr("y")||0),l=(i.attr("transform")||"").match(F);t=1===e&&1===n?[]:[r(o,s),"scale("+e+","+n+")",r(-o,-s)],l&&t.push(l),i.attr("transform",t.join(""))}}))}})),strTranslate$a=lib_1.strTranslate,OPPOSITE_SIDE=alignment.OPPOSITE_SIDE,numStripRE=/ [XY][0-9]* /;function draw$b(t,e,r){var n,i=r.propContainer,a=r.propName,o=r.placeholder,s=r.traceIndex,l=r.avoid||{},c=r.attributes,u=r.transform,d=r.containerGroup,h=t._fullLayout,g=1,f=!1,p=i.title,m=(p&&p.text?p.text:"").trim(),y=p&&p.font?p.font:{},b=y.family,v=y.size,x=y.color;"title.text"===a?n="titleText":-1!==a.indexOf("axis")?n="axisTitleText":a.indexOf(!0)&&(n="colorbarTitleText");var I=t._context.edits[n];""===m?g=0:m.replace(numStripRE," % ")===o.replace(numStripRE," % ")&&(g=.2,f=!0,I||(m="")),r._meta?m=lib_1.templateString(m,r._meta):h._meta&&(m=lib_1.templateString(m,h._meta));var B,C=m||I;d||(d=lib_1.ensureSingle(h._infolayer,"g","g-"+e),B=h._hColorbarMoveTitle);var F=d.selectAll("text").data(C?[0]:[]);if(F.enter().append("text"),F.text(m).attr("class",e),F.exit().remove(),!C)return d;function A(t){lib_1.syncOrAsync([Q,_],t)}function Q(e){var r;return!u&&B&&(u={}),u?(r="",u.rotate&&(r+="rotate("+[u.rotate,c.x,c.y]+")"),(u.offset||B)&&(r+=strTranslate$a(0,(u.offset||0)-(B||0)))):r=null,e.attr("transform",r),e.style({"font-family":b,"font-size":d3.round(v,2)+"px",fill:color_1.rgb(x),opacity:g*color_1.opacity(x),"font-weight":plots_1.fontWeight}).attr(c).call(svg_text_utils.convertToTspans,t),plots_1.previousPromises(t)}function _(t){var e=d3.select(t.node().parentNode);if(l&&l.selection&&l.side&&m){e.attr("transform",null);var r=OPPOSITE_SIDE[l.side],n="left"===l.side||"top"===l.side?-1:1,i=fastIsnumeric(l.pad)?l.pad:2,a=drawing_1.bBox(e.node()),o={left:0,top:0,right:h.width,bottom:h.height},s=l.maxShift||n*(o[l.side]-a[l.side]),c=0;if(s<0)c=s;else{var u=l.offsetLeft||0,d=l.offsetTop||0;a.left-=u,a.right-=u,a.top-=d,a.bottom-=d,l.selection.each((function(){var t=drawing_1.bBox(this);lib_1.bBoxIntersect(a,t,i)&&(c=Math.max(c,n*(t[l.side]-a[r])+i))})),c=Math.min(s,c)}if(c>0||s<0){var g={left:[-c,0],right:[c,0],top:[0,-c],bottom:[0,c]}[l.side];e.attr("transform",strTranslate$a(g[0],g[1]))}}}return F.call(A),I&&(m?F.on(".opacity",null):(g=0,f=!0,F.text(o).on("mouseover.opacity",(function(){d3.select(this).transition().duration(interactions.SHOW_PLACEHOLDER).style("opacity",1)})).on("mouseout.opacity",(function(){d3.select(this).transition().duration(interactions.HIDE_PLACEHOLDER).style("opacity",0)}))),F.call(svg_text_utils.makeEditable,{gd:t}).on("edit",(function(e){void 0!==s?registry.call("_guiRestyle",t,a,e,s):registry.call("_guiRelayout",t,a,e)})).on("cancel",(function(){this.text(this.attr("data-unformatted")).call(A)})).on("input",(function(t){this.text(t||" ").call(svg_text_utils.positionText,c.x,c.y)}))),F.classed("js-placeholder",f),d}var titles={draw:draw$b},utcFormat=require$$0.utcFormat,numberFormat$1=lib_1.numberFormat,cleanNumber$1=lib_1.cleanNumber,ms2DateTime=lib_1.ms2DateTime,dateTime2ms$1=lib_1.dateTime2ms,ensureNumber=lib_1.ensureNumber,isArrayOrTypedArray$7=lib_1.isArrayOrTypedArray,FP_SAFE$1=numerical.FP_SAFE,BADNUM$6=numerical.BADNUM,LOG_CLIP$1=numerical.LOG_CLIP,ONEWEEK$1=numerical.ONEWEEK,ONEDAY=numerical.ONEDAY,ONEHOUR=numerical.ONEHOUR,ONEMIN=numerical.ONEMIN,ONESEC=numerical.ONESEC,HOUR_PATTERN=constants$c.HOUR_PATTERN,WEEKDAY_PATTERN=constants$c.WEEKDAY_PATTERN;function fromLog(t){return Math.pow(10,t)}function isValidCategory(t){return null!=t}var set_convert=function(t,e){e=e||{};var r=t._id||"x",n=r.charAt(0);function i(e,r){if(e>0)return Math.log(e)/Math.LN10;if(e<=0&&r&&t.range&&2===t.range.length){var n=t.range[0],i=t.range[1];return.5*(n+i-2*LOG_CLIP$1*Math.abs(n-i))}return BADNUM$6}function a(e,r,n,i){if((i||{}).msUTC&&fastIsnumeric(e))return+e;var a=dateTime2ms$1(e,n||t.calendar);if(a===BADNUM$6){if(!fastIsnumeric(e))return BADNUM$6;e=+e;var o=Math.floor(10*lib_1.mod(e+.05,1)),s=Math.round(e-o/10);a=dateTime2ms$1(new Date(s))+o/10}return a}function o(e,r,n){return ms2DateTime(e,r,n||t.calendar)}function s(e){return t._categories[Math.round(e)]}function l(e){if(isValidCategory(e)){if(void 0===t._categoriesMap&&(t._categoriesMap={}),void 0!==t._categoriesMap[e])return t._categoriesMap[e];t._categories.push("number"==typeof e?String(e):e);var r=t._categories.length-1;return t._categoriesMap[e]=r,r}return BADNUM$6}function c(e){if(t._categoriesMap)return t._categoriesMap[e]}function u(t){var e=c(t);return void 0!==e?e:fastIsnumeric(t)?+t:void 0}function d(t){return fastIsnumeric(t)?+t:c(t)}function h(t,e,r){return d3.round(r+e*t,2)}function g(t,e,r){return(t-r)/e}var f=function(e){return fastIsnumeric(e)?h(e,t._m,t._b):BADNUM$6},p=function(e){return g(e,t._m,t._b)};if(t.rangebreaks){var m="y"===n;f=function(e){if(!fastIsnumeric(e))return BADNUM$6;var r=t._rangebreaks.length;if(!r)return h(e,t._m,t._b);var n=m;t.range[0]>t.range[1]&&(n=!n);for(var i=n?-1:1,a=i*e,o=0,s=0;s<r;s++){var l=i*t._rangebreaks[s].min,c=i*t._rangebreaks[s].max;if(a<l)break;if(!(a>c)){o=a<(l+c)/2?s:s+1;break}o=s+1}var u=t._B[o]||0;return isFinite(u)?h(e,t._m2,u):0},p=function(e){var r=t._rangebreaks.length;if(!r)return g(e,t._m,t._b);for(var n=0,i=0;i<r&&!(e<t._rangebreaks[i].pmin);i++)e>t._rangebreaks[i].pmax&&(n=i+1);return g(e,t._m2,t._B[n])}}t.c2l="log"===t.type?i:ensureNumber,t.l2c="log"===t.type?fromLog:ensureNumber,t.l2p=f,t.p2l=p,t.c2p="log"===t.type?function(t,e){return f(i(t,e))}:f,t.p2c="log"===t.type?function(t){return fromLog(p(t))}:p,-1!==["linear","-"].indexOf(t.type)?(t.d2r=t.r2d=t.d2c=t.r2c=t.d2l=t.r2l=cleanNumber$1,t.c2d=t.c2r=t.l2d=t.l2r=ensureNumber,t.d2p=t.r2p=function(e){return t.l2p(cleanNumber$1(e))},t.p2d=t.p2r=p,t.cleanPos=ensureNumber):"log"===t.type?(t.d2r=t.d2l=function(t,e){return i(cleanNumber$1(t),e)},t.r2d=t.r2c=function(t){return fromLog(cleanNumber$1(t))},t.d2c=t.r2l=cleanNumber$1,t.c2d=t.l2r=ensureNumber,t.c2r=i,t.l2d=fromLog,t.d2p=function(e,r){return t.l2p(t.d2r(e,r))},t.p2d=function(t){return fromLog(p(t))},t.r2p=function(e){return t.l2p(cleanNumber$1(e))},t.p2r=p,t.cleanPos=ensureNumber):"date"===t.type?(t.d2r=t.r2d=lib_1.identity,t.d2c=t.r2c=t.d2l=t.r2l=a,t.c2d=t.c2r=t.l2d=t.l2r=o,t.d2p=t.r2p=function(e,r,n){return t.l2p(a(e,0,n))},t.p2d=t.p2r=function(t,e,r){return o(p(t),e,r)},t.cleanPos=function(e){return lib_1.cleanDate(e,BADNUM$6,t.calendar)}):"category"===t.type?(t.d2c=t.d2l=l,t.r2d=t.c2d=t.l2d=s,t.d2r=t.d2l_noadd=u,t.r2c=function(e){var r=d(e);return void 0!==r?r:t.fraction2r(.5)},t.l2r=t.c2r=ensureNumber,t.r2l=d,t.d2p=function(e){return t.l2p(t.r2c(e))},t.p2d=function(t){return s(p(t))},t.r2p=t.d2p,t.p2r=p,t.cleanPos=function(t){return"string"==typeof t&&""!==t?t:ensureNumber(t)}):"multicategory"===t.type&&(t.r2d=t.c2d=t.l2d=s,t.d2r=t.d2l_noadd=u,t.r2c=function(e){var r=u(e);return void 0!==r?r:t.fraction2r(.5)},t.r2c_just_indices=c,t.l2r=t.c2r=ensureNumber,t.r2l=u,t.d2p=function(e){return t.l2p(t.r2c(e))},t.p2d=function(t){return s(p(t))},t.r2p=t.d2p,t.p2r=p,t.cleanPos=function(t){return Array.isArray(t)||"string"==typeof t&&""!==t?t:ensureNumber(t)},t.setupMultiCategory=function(i){var a,o,s=t._traceIndices,c=t._matchGroup;if(c&&0===t._categories.length)for(var u in c)if(u!==r){var d=e[axis_ids.id2name(u)];s=s.concat(d._traceIndices)}var h=[[0,{}],[0,{}]],g=[];for(a=0;a<s.length;a++){var f=i[s[a]];if(n in f){var p=f[n],m=f._length||lib_1.minRowLength(p);if(isArrayOrTypedArray$7(p[0])&&isArrayOrTypedArray$7(p[1]))for(o=0;o<m;o++){var y=p[0][o],b=p[1][o];isValidCategory(y)&&isValidCategory(b)&&(g.push([y,b]),y in h[0][1]||(h[0][1][y]=h[0][0]++),b in h[1][1]||(h[1][1][b]=h[1][0]++))}}}for(g.sort((function(t,e){var r=h[0][1],n=r[t[0]]-r[e[0]];if(n)return n;var i=h[1][1];return i[t[1]]-i[e[1]]})),a=0;a<g.length;a++)l(g[a])}),t.fraction2r=function(e){var r=t.r2l(t.range[0]),n=t.r2l(t.range[1]);return t.l2r(r+e*(n-r))},t.r2fraction=function(e){var r=t.r2l(t.range[0]),n=t.r2l(t.range[1]);return(t.r2l(e)-r)/(n-r)},t.cleanRange=function(e,r){r||(r={}),e||(e="range");var i,a,o=lib_1.nestedProperty(t,e).get();if(a=(a="date"===t.type?lib_1.dfltRange(t.calendar):"y"===n?constants$c.DFLTRANGEY:"realaxis"===t._name?[0,1]:r.dfltRange||constants$c.DFLTRANGEX).slice(),"tozero"!==t.rangemode&&"nonnegative"!==t.rangemode||(a[0]=0),o&&2===o.length)for("date"!==t.type||t.autorange||(o[0]=lib_1.cleanDate(o[0],BADNUM$6,t.calendar),o[1]=lib_1.cleanDate(o[1],BADNUM$6,t.calendar)),i=0;i<2;i++)if("date"===t.type){if(!lib_1.isDateTime(o[i],t.calendar)){t[e]=a;break}if(t.r2l(o[0])===t.r2l(o[1])){var s=lib_1.constrain(t.r2l(o[0]),lib_1.MIN_MS+1e3,lib_1.MAX_MS-1e3);o[0]=t.l2r(s-1e3),o[1]=t.l2r(s+1e3);break}}else{if(!fastIsnumeric(o[i])){if(!fastIsnumeric(o[1-i])){t[e]=a;break}o[i]=o[1-i]*(i?10:.1)}if(o[i]<-FP_SAFE$1?o[i]=-FP_SAFE$1:o[i]>FP_SAFE$1&&(o[i]=FP_SAFE$1),o[0]===o[1]){var l=Math.max(1,Math.abs(1e-6*o[0]));o[0]-=l,o[1]+=l}}else lib_1.nestedProperty(t,e).set(a)},t.setScale=function(r){var i=e._size;if(t.overlaying){var a=axis_ids.getFromId({_fullLayout:e},t.overlaying);t.domain=a.domain}var o=r&&t._r?"_r":"range",s=t.calendar;t.cleanRange(o);var l,c,u=t.r2l(t[o][0],s),d=t.r2l(t[o][1],s),h="y"===n;if((h?(t._offset=i.t+(1-t.domain[1])*i.h,t._length=i.h*(t.domain[1]-t.domain[0]),t._m=t._length/(u-d),t._b=-t._m*d):(t._offset=i.l+t.domain[0]*i.w,t._length=i.w*(t.domain[1]-t.domain[0]),t._m=t._length/(d-u),t._b=-t._m*u),t._rangebreaks=[],t._lBreaks=0,t._m2=0,t._B=[],t.rangebreaks)&&(t._rangebreaks=t.locateBreaks(Math.min(u,d),Math.max(u,d)),t._rangebreaks.length)){for(l=0;l<t._rangebreaks.length;l++)c=t._rangebreaks[l],t._lBreaks+=Math.abs(c.max-c.min);var g=h;u>d&&(g=!g),g&&t._rangebreaks.reverse();var p=g?-1:1;for(t._m2=p*t._length/(Math.abs(d-u)-t._lBreaks),t._B.push(-t._m2*(h?d:u)),l=0;l<t._rangebreaks.length;l++)c=t._rangebreaks[l],t._B.push(t._B[t._B.length-1]-p*t._m2*(c.max-c.min));for(l=0;l<t._rangebreaks.length;l++)(c=t._rangebreaks[l]).pmin=f(c.min),c.pmax=f(c.max)}if(!isFinite(t._m)||!isFinite(t._b)||t._length<0)throw e._replotting=!1,new Error("Something went wrong with axis scaling")},t.maskBreaks=function(e){var r,n,i,a,o,s=t.rangebreaks||[];s._cachedPatterns||(s._cachedPatterns=s.map((function(e){return e.enabled&&e.bounds?lib_1.simpleMap(e.bounds,e.pattern?cleanNumber$1:t.d2c):null}))),s._cachedValues||(s._cachedValues=s.map((function(e){return e.enabled&&e.values?lib_1.simpleMap(e.values,t.d2c).sort(lib_1.sorterAsc):null})));for(var l=0;l<s.length;l++){var c=s[l];if(c.enabled)if(c.bounds){var u=c.pattern;switch(n=(r=s._cachedPatterns[l])[0],i=r[1],u){case WEEKDAY_PATTERN:a=(o=new Date(e)).getUTCDay(),n>i&&(i+=7,a<n&&(a+=7));break;case HOUR_PATTERN:a=(o=new Date(e)).getUTCHours()+(o.getUTCMinutes()/60+o.getUTCSeconds()/3600+o.getUTCMilliseconds()/36e5),n>i&&(i+=24,a<n&&(a+=24));break;case"":a=e}if(a>=n&&a<i)return BADNUM$6}else for(var d=s._cachedValues[l],h=0;h<d.length;h++)if(i=(n=d[h])+c.dvalue,e>=n&&e<i)return BADNUM$6}return e},t.locateBreaks=function(e,r){var n,i,a,o,s=[];if(!t.rangebreaks)return s;var l=t.rangebreaks.slice().sort((function(t,e){return t.pattern===WEEKDAY_PATTERN&&e.pattern===HOUR_PATTERN?-1:e.pattern===WEEKDAY_PATTERN&&t.pattern===HOUR_PATTERN?1:0})),c=function(t,n){if((t=lib_1.constrain(t,e,r))!==(n=lib_1.constrain(n,e,r))){for(var i=!0,a=0;a<s.length;a++){var o=s[a];t<o.max&&n>=o.min&&(t<o.min&&(o.min=t),n>o.max&&(o.max=n),i=!1)}i&&s.push({min:t,max:n})}};for(n=0;n<l.length;n++){var u=l[n];if(u.enabled)if(u.bounds){var d=e,h=r;u.pattern&&(d=Math.floor(d)),a=(i=lib_1.simpleMap(u.bounds,u.pattern?cleanNumber$1:t.r2l))[0],o=i[1];var g,f,p=new Date(d);switch(u.pattern){case WEEKDAY_PATTERN:f=ONEWEEK$1,g=(o-a+(o<a?7:0))*ONEDAY,d+=a*ONEDAY-(p.getUTCDay()*ONEDAY+p.getUTCHours()*ONEHOUR+p.getUTCMinutes()*ONEMIN+p.getUTCSeconds()*ONESEC+p.getUTCMilliseconds());break;case HOUR_PATTERN:f=ONEDAY,g=(o-a+(o<a?24:0))*ONEHOUR,d+=a*ONEHOUR-(p.getUTCHours()*ONEHOUR+p.getUTCMinutes()*ONEMIN+p.getUTCSeconds()*ONESEC+p.getUTCMilliseconds());break;default:d=Math.min(i[0],i[1]),g=f=(h=Math.max(i[0],i[1]))-d}for(var m=d;m<h;m+=f)c(m,m+g)}else for(var y=lib_1.simpleMap(u.values,t.d2c),b=0;b<y.length;b++)c(a=y[b],o=a+u.dvalue)}return s.sort((function(t,e){return t.min-e.min})),s},t.makeCalcdata=function(e,r,n){var i,a,o,s,l=t.type,u="date"===l&&e[r+"calendar"];if(r in e){if(i=e[r],s=e._length||lib_1.minRowLength(i),lib_1.isTypedArray(i)&&("linear"===l||"log"===l)){if(s===i.length)return i;if(i.subarray)return i.subarray(0,s)}if("multicategory"===l)return function(t,e){for(var r=new Array(e),n=0;n<e;n++){var i=(t[0]||[])[n],a=(t[1]||[])[n];r[n]=c([i,a])}return r}(i,s);for(a=new Array(s),o=0;o<s;o++)a[o]=t.d2c(i[o],0,u,n)}else{var d=r+"0"in e?t.d2c(e[r+"0"],0,u):0,h=e["d"+r]?Number(e["d"+r]):1;for(i=e[{x:"y",y:"x"}[r]],s=e._length||i.length,a=new Array(s),o=0;o<s;o++)a[o]=d+o*h}if(t.rangebreaks)for(o=0;o<s;o++)a[o]=t.maskBreaks(a[o]);return a},t.isValidRange=function(e){return Array.isArray(e)&&2===e.length&&fastIsnumeric(t.r2l(e[0]))&&fastIsnumeric(t.r2l(e[1]))},t.isPtWithinRange=function(e,r){var i=t.c2l(e[n],null,r),a=t.r2l(t.range[0]),o=t.r2l(t.range[1]);return a<o?a<=i&&i<=o:o<=i&&i<=a},t._emptyCategories=function(){t._categories=[],t._categoriesMap={}},t.clearCalc=function(){var r=t._matchGroup;if(r){var n=null,i=null;for(var a in r){var o=e[axis_ids.id2name(a)];if(o._categories){n=o._categories,i=o._categoriesMap;break}}n&&i?(t._categories=n,t._categoriesMap=i):t._emptyCategories()}else t._emptyCategories();if(t._initialCategories)for(var s=0;s<t._initialCategories.length;s++)l(t._initialCategories[s])},t.sortByInitialCategories=function(){var n=[];if(t._emptyCategories(),t._initialCategories)for(var i=0;i<t._initialCategories.length;i++)l(t._initialCategories[i]);n=n.concat(t._traceIndices);var a=t._matchGroup;for(var o in a)if(r!==o){var s=e[axis_ids.id2name(o)];s._categories=t._categories,s._categoriesMap=t._categoriesMap,n=n.concat(s._traceIndices)}return n};var y=e._d3locale;"date"===t.type&&(t._dateFormat=y?y.timeFormat:utcFormat,t._extraFormat=e._extraFormat),t._separators=e.separators,t._numFormat=y?y.numberFormat:numberFormat$1,delete t._minDtick,delete t._forceTick0},BADNUM$5=numerical.BADNUM,isArrayOrTypedArray$6=lib_1.isArrayOrTypedArray,isDateTime=lib_1.isDateTime,cleanNumber=lib_1.cleanNumber,round=Math.round,axis_autotype=function(t,e,r){var n=t,i=r.noMultiCategory;if(isArrayOrTypedArray$6(n)&&!n.length)return"-";if(!i&&multiCategory(n))return"multicategory";if(i&&Array.isArray(n[0])){for(var a=[],o=0;o<n.length;o++)if(isArrayOrTypedArray$6(n[o]))for(var s=0;s<n[o].length;s++)a.push(n[o][s]);n=a}if(moreDates(n,e))return"date";var l="strict"!==r.autotypenumbers;return category(n,l)?"category":linearOK(n,l)?"linear":"-"};function hasTypeNumber(t,e){return e?fastIsnumeric(t):"number"==typeof t}function linearOK(t,e){for(var r=t.length,n=0;n<r;n++)if(hasTypeNumber(t[n],e))return!0;return!1}function moreDates(t,e){for(var r=t.length,n=getIncrement(r),i=0,a=0,o={},s=0;s<r;s+=n){var l=t[round(s)],c=String(l);o[c]||(o[c]=1,isDateTime(l,e)&&i++,fastIsnumeric(l)&&a++)}return i>2*a}function getIncrement(t){return Math.max(1,(t-1)/1e3)}function category(t,e){for(var r=t.length,n=getIncrement(r),i=0,a=0,o={},s=0;s<r;s+=n){var l=t[round(s)],c=String(l);if(!o[c]){o[c]=1;var u=typeof l;"boolean"===u?a++:(e?cleanNumber(l)!==BADNUM$5:"number"===u)?i++:"string"===u&&a++}}return a>2*i}function multiCategory(t){return isArrayOrTypedArray$6(t[0])&&isArrayOrTypedArray$6(t[1])}var FP_SAFE=numerical.FP_SAFE,getFromId$2=axis_ids.getFromId,isLinked=axis_ids.isLinked,autorange={getAutoRange:getAutoRange$1,makePadFn:makePadFn,doAutoRange:doAutoRange,findExtremes:findExtremes,concatExtremes:concatExtremes};function getAutoRange$1(t,e){var r,n,i=[],a=t._fullLayout,o=makePadFn(a,e,0),s=makePadFn(a,e,1),l=concatExtremes(t,e),c=l.min,u=l.max;if(0===c.length||0===u.length)return lib_1.simpleMap(e.range,e.r2l);var d=c[0].val,h=u[0].val;for(r=1;r<c.length&&d===h;r++)d=Math.min(d,c[r].val);for(r=1;r<u.length&&d===h;r++)h=Math.max(h,u[r].val);var g=!1;if(e.range){var f=lib_1.simpleMap(e.range,e.r2l);g=f[1]<f[0]}"reversed"===e.autorange&&(g=!0,e.autorange=!0);var p,m,y,b,v,x,I=e.rangemode,B="tozero"===I,C="nonnegative"===I,F=e._length,A=F/10,Q=0;for(r=0;r<c.length;r++)for(p=c[r],n=0;n<u.length;n++)(x=(m=u[n]).val-p.val-calcBreaksLength(e,p.val,m.val))>0&&((v=F-o(p)-s(m))>A?x/v>Q&&(y=p,b=m,Q=x/v):x/F>Q&&(y={val:p.val,nopad:1},b={val:m.val,nopad:1},Q=x/F));if(d===h){var _=d-1,w=d+1;if(B)if(0===d)i=[0,1];else{var U=(d>0?u:c).reduce((function(t,e){return Math.max(t,s(e))}),0),S=d/(1-Math.min(.5,U/F));i=d>0?[0,S]:[S,0]}else i=C?[Math.max(0,_),Math.max(1,w)]:[_,w]}else B?(y.val>=0&&(y={val:0,nopad:1}),b.val<=0&&(b={val:0,nopad:1})):C&&(y.val-Q*o(y)<0&&(y={val:0,nopad:1}),b.val<=0&&(b={val:1,nopad:1})),Q=(b.val-y.val-calcBreaksLength(e,p.val,m.val))/(F-o(y)-s(b)),i=[y.val-Q*o(y),b.val+Q*s(b)];return g&&i.reverse(),lib_1.simpleMap(i,e.l2r||Number)}function calcBreaksLength(t,e,r){var n=0;if(t.rangebreaks)for(var i=t.locateBreaks(e,r),a=0;a<i.length;a++){var o=i[a];n+=o.max-o.min}return n}function makePadFn(t,e,r){var n=.05*e._length,i=e._anchorAxis||{};if(-1!==(e.ticklabelposition||"").indexOf("inside")||-1!==(i.ticklabelposition||"").indexOf("inside")){var a="reversed"===e.autorange;if(!a){var o=lib_1.simpleMap(e.range,e.r2l);a=o[1]<o[0]}a&&(r=!r)}var s=0;return isLinked(t,e._id)||(s=padInsideLabelsOnAnchorAxis(t,e,r)),n=Math.max(s,n),"domain"===e.constrain&&e._inputDomain&&(n*=(e._inputDomain[1]-e._inputDomain[0])/(e.domain[1]-e.domain[0])),function(t){return t.nopad?0:t.pad+(t.extrapad?n:s)}}var TEXTPAD$1=3;function padInsideLabelsOnAnchorAxis(t,e,r){var n=0,i="x"===e._id.charAt(0);for(var a in t._plots){var o=t._plots[a];if(e._id===o.xaxis._id||e._id===o.yaxis._id){var s=(i?o.yaxis:o.xaxis)||{};if(-1!==(s.ticklabelposition||"").indexOf("inside")&&(!r&&("left"===s.side||"bottom"===s.side)||r&&("top"===s.side||"right"===s.side))){if(s._vals){var l=lib_1.deg2rad(s._tickAngles[s._id+"tick"]||0),c=Math.abs(Math.cos(l)),u=Math.abs(Math.sin(l));if(!s._vals[0].bb){var d=s._id+"tick";s._selections[d].each((function(t){var e=d3.select(this);e.select(".text-math-group").empty()&&(t.bb=drawing_1.bBox(e.node()))}))}for(var h=0;h<s._vals.length;h++){var g=s._vals[h].bb;if(g){var f=2*TEXTPAD$1+g.width,p=2*TEXTPAD$1+g.height;n=Math.max(n,i?Math.max(f*c,p*u):Math.max(p*c,f*u))}}}"inside"===s.ticks&&"inside"===s.ticklabelposition&&(n+=s.ticklen||0)}}}return n}function concatExtremes(t,e,r){var n,i,a,o=e._id,s=t._fullData,l=t._fullLayout,c=[],u=[];function d(t,e){for(n=0;n<e.length;n++){var r=t[e[n]],s=(r._extremes||{})[o];if(!0===r.visible&&s){for(i=0;i<s.min.length;i++)a=s.min[i],collapseMinArray(c,a.val,a.pad,{extrapad:a.extrapad});for(i=0;i<s.max.length;i++)a=s.max[i],collapseMaxArray(u,a.val,a.pad,{extrapad:a.extrapad})}}}if(d(s,e._traceIndices),d(l.annotations||[],e._annIndices||[]),d(l.shapes||[],e._shapeIndices||[]),e._matchGroup&&!r)for(var h in e._matchGroup)if(h!==e._id){var g=getFromId$2(t,h),f=concatExtremes(t,g,!0),p=e._length/g._length;for(i=0;i<f.min.length;i++)a=f.min[i],collapseMinArray(c,a.val,a.pad*p,{extrapad:a.extrapad});for(i=0;i<f.max.length;i++)a=f.max[i],collapseMaxArray(u,a.val,a.pad*p,{extrapad:a.extrapad})}return{min:c,max:u}}function doAutoRange(t,e,r){if(e.setScale(),e.autorange){e.range=r?r.slice():getAutoRange$1(t,e),e._r=e.range.slice(),e._rl=lib_1.simpleMap(e._r,e.r2l);var n=e._input,i={};i[e._attr+".range"]=e.range,i[e._attr+".autorange"]=e.autorange,registry.call("_storeDirectGUIEdit",t.layout,t._fullLayout._preGUI,i),n.range=e.range.slice(),n.autorange=e.autorange}var a=e._anchorAxis;if(a&&a.rangeslider){var o=a.rangeslider[e._name];o&&"auto"===o.rangemode&&(o.range=getAutoRange$1(t,e)),a._input.rangeslider[e._name]=lib_1.extendFlat({},o)}}function findExtremes(t,e,r){r||(r={}),t._m||t.setScale();var n,i,a,o,s,l,c,u,d,h=[],g=[],f=e.length,p=r.padded||!1,m=r.tozero&&("linear"===t.type||"-"===t.type),y="log"===t.type,b=!1,v=r.vpadLinearized||!1;function x(t){if(Array.isArray(t))return b=!0,function(e){return Math.max(Number(t[e]||0),0)};var e=Math.max(Number(t||0),0);return function(){return e}}var I=x((t._m>0?r.ppadplus:r.ppadminus)||r.ppad||0),B=x((t._m>0?r.ppadminus:r.ppadplus)||r.ppad||0),C=x(r.vpadplus||r.vpad),F=x(r.vpadminus||r.vpad);if(!b){if(u=1/0,d=-1/0,y)for(n=0;n<f;n++)(i=e[n])<u&&i>0&&(u=i),i>d&&i<FP_SAFE&&(d=i);else for(n=0;n<f;n++)(i=e[n])<u&&i>-FP_SAFE&&(u=i),i>d&&i<FP_SAFE&&(d=i);e=[u,d],f=2}var A={tozero:m,extrapad:p};function Q(r){a=e[r],fastIsnumeric(a)&&(l=I(r),c=B(r),v?(o=t.c2l(a)-F(r),s=t.c2l(a)+C(r)):(u=a-F(r),d=a+C(r),y&&u<d/10&&(u=d/10),o=t.c2l(u),s=t.c2l(d)),m&&(o=Math.min(0,o),s=Math.max(0,s)),goodNumber(o)&&collapseMinArray(h,o,c,A),goodNumber(s)&&collapseMaxArray(g,s,l,A))}var _=Math.min(6,f);for(n=0;n<_;n++)Q(n);for(n=f-1;n>=_;n--)Q(n);return{min:h,max:g,opts:r}}function collapseMinArray(t,e,r,n){collapseArray(t,e,r,n,lessOrEqual)}function collapseMaxArray(t,e,r,n){collapseArray(t,e,r,n,greaterOrEqual)}function collapseArray(t,e,r,n,i){for(var a=n.tozero,o=n.extrapad,s=!0,l=0;l<t.length&&s;l++){var c=t[l];if(i(c.val,e)&&c.pad>=r&&(c.extrapad||!o)){s=!1;break}i(e,c.val)&&c.pad<=r&&(o||!c.extrapad)&&(t.splice(l,1),l--)}if(s){var u=a&&0===e;t.push({val:e,pad:u?0:r,extrapad:!u&&o})}}function goodNumber(t){return fastIsnumeric(t)&&Math.abs(t)<FP_SAFE}function lessOrEqual(t,e){return t<=e}function greaterOrEqual(t,e){return t>=e}var axes_1=createCommonjsModule((function(t){var e=lib_1.strTranslate,r=numerical.ONEMAXYEAR,n=numerical.ONEAVGYEAR,i=numerical.ONEMINYEAR,a=numerical.ONEMAXQUARTER,o=numerical.ONEAVGQUARTER,s=numerical.ONEMINQUARTER,l=numerical.ONEMAXMONTH,c=numerical.ONEAVGMONTH,u=numerical.ONEMINMONTH,d=numerical.ONEWEEK,h=numerical.ONEDAY,g=h/2,f=numerical.ONEHOUR,p=numerical.ONEMIN,m=numerical.ONESEC,y=numerical.MINUS_SIGN,b=numerical.BADNUM,v={K:"zeroline"},x={K:"gridline",L:"path"},I={K:"tick",L:"path"},B={K:"tick",L:"text"},C=alignment.MID_SHIFT,F=alignment.CAP_SHIFT,A=alignment.LINE_SPACING,Q=alignment.OPPOSITE_SIDE,_=t.exports={};_.setConvert=set_convert;var w=axis_ids.idSort,U=axis_ids.isLinked;_.id2name=axis_ids.id2name,_.name2id=axis_ids.name2id,_.cleanId=axis_ids.cleanId,_.list=axis_ids.list,_.listIds=axis_ids.listIds,_.getFromId=axis_ids.getFromId,_.getFromTrace=axis_ids.getFromTrace,_.getAutoRange=autorange.getAutoRange,_.findExtremes=autorange.findExtremes;function S(t){var e=1e-4*(t[1]-t[0]);return[t[0]-e,t[1]+e]}_.coerceRef=function(t,e,r,n,i,a){var o=n.charAt(n.length-1),s=r._fullLayout._subplots[o+"axis"],l=n+"ref",c={};return i||(i=s[0]||("string"==typeof a?a:a[0])),a||(a=i),s=s.concat(s.map((function(t){return t+" domain"}))),c[l]={valType:"enumerated",values:s.concat(a?"string"==typeof a?[a]:a:[]),dflt:i},lib_1.coerce(t,e,c,l)},_.getRefType=function(t){return void 0===t?t:"paper"===t?"paper":"pixel"===t?"pixel":/( domain)$/.test(t)?"domain":"range"},_.coercePosition=function(t,e,r,n,i,a){var o,s;if("range"!==_.getRefType(n))o=lib_1.ensureNumber,s=r(i,a);else{var l=_.getFromId(e,n);s=r(i,a=l.fraction2r(a)),o=l.cleanPos}t[i]=o(s)},_.cleanPosition=function(t,e,r){return("paper"===r||"pixel"===r?lib_1.ensureNumber:_.getFromId(e,r).cleanPos)(t)},_.redrawComponents=function(t,e){e=e||_.listIds(t);var r=t._fullLayout;function n(n,i,a,o){for(var s=registry.getComponentMethod(n,i),l={},c=0;c<e.length;c++)for(var u=r[_.id2name(e[c])][a],d=0;d<u.length;d++){var h=u[d];if(!l[h]&&(s(t,h),l[h]=1,o))return}}n("annotations","drawOne","_annIndices"),n("shapes","drawOne","_shapeIndices"),n("images","draw","_imgIndices",!0)};var E=_.getDataConversions=function(t,e,r,n){var i,a="x"===r||"y"===r||"z"===r?r:n;if(Array.isArray(a)){if(i={type:axis_autotype(n,void 0,{autotypenumbers:t._fullLayout.autotypenumbers}),_categories:[]},_.setConvert(i),"category"===i.type)for(var o=0;o<n.length;o++)i.d2c(n[o])}else i=_.getFromTrace(t,e,a);return i?{d2c:i.d2c,c2d:i.c2d}:"ids"===a?{d2c:T,c2d:T}:{d2c:L,c2d:L}};function L(t){return+t}function T(t){return String(t)}function R(t){return+t.substring(1)}_.getDataToCoordFunc=function(t,e,r,n){return E(t,e,r,n).d2c},_.counterLetter=function(t){var e=t.charAt(0);return"x"===e?"y":"y"===e?"x":void 0},_.minDtick=function(t,e,r,n){-1===["log","category","multicategory"].indexOf(t.type)&&n?void 0===t._minDtick?(t._minDtick=e,t._forceTick0=r):t._minDtick&&((t._minDtick/e+1e-6)%1<2e-6&&((r-t._forceTick0)/e%1+1.000001)%1<2e-6?(t._minDtick=e,t._forceTick0=r):((e/t._minDtick+1e-6)%1>2e-6||((r-t._forceTick0)/t._minDtick%1+1.000001)%1>2e-6)&&(t._minDtick=0)):t._minDtick=0},_.saveRangeInitial=function(t,e){for(var r=_.list(t,"",!0),n=!1,i=0;i<r.length;i++){var a=r[i],o=void 0===a._rangeInitial,s=o||!(a.range[0]===a._rangeInitial[0]&&a.range[1]===a._rangeInitial[1]);(o&&!1===a.autorange||e&&s)&&(a._rangeInitial=a.range.slice(),n=!0)}return n},_.saveShowSpikeInitial=function(t,e){for(var r=_.list(t,"",!0),n=!1,i="on",a=0;a<r.length;a++){var o=r[a],s=void 0===o._showSpikeInitial,l=s||!(o.showspikes===o._showspikes);(s||e&&l)&&(o._showSpikeInitial=o.showspikes,n=!0),"on"!==i||o.showspikes||(i="off")}return t._fullLayout._cartesianSpikesEnabled=i,n},_.autoBin=function(t,e,r,n,i,a){var o,s=lib_1.aggNums(Math.min,null,t),l=lib_1.aggNums(Math.max,null,t);if("category"===e.type||"multicategory"===e.type)return{start:s-.5,end:l+.5,size:Math.max(1,Math.round(a)||1),_dataSpan:l-s};if(i||(i=e.calendar),o="log"===e.type?{type:"linear",range:[s,l]}:{type:e.type,range:lib_1.simpleMap([s,l],e.c2r,0,i),calendar:i},_.setConvert(o),a=a&&clean_ticks.dtick(a,o.type))o.dtick=a,o.tick0=clean_ticks.tick0(void 0,o.type,i);else{var c;if(r)c=(l-s)/r;else{var u=lib_1.distinctVals(t),d=Math.pow(10,Math.floor(Math.log(u.minDiff)/Math.LN10)),f=d*lib_1.roundUp(u.minDiff/d,[.9,1.9,4.9,9.9],!0);c=Math.max(f,2*lib_1.stdev(t)/Math.pow(t.length,n?.25:.4)),fastIsnumeric(c)||(c=1)}_.autoTicks(o,c)}var p,m=o.dtick,y=_.tickIncrement(_.tickFirst(o),m,"reverse",i);if("number"==typeof m)y=function(t,e,r,n,i){var a=0,o=0,s=0,l=0;function c(e){return(1+100*(e-t)/r.dtick)%100<2}for(var u=0;u<e.length;u++)e[u]%1==0?s++:fastIsnumeric(e[u])||l++,c(e[u])&&a++,c(e[u]+r.dtick/2)&&o++;var d=e.length-l;if(s===d&&"date"!==r.type)r.dtick<1?t=n-.5*r.dtick:(t-=.5)+r.dtick<n&&(t+=r.dtick);else if(o<.1*d&&(a>.3*d||c(n)||c(i))){var h=r.dtick/2;t+=t+h<n?h:-h}return t}(y,t,o,s,l),p=y+(1+Math.floor((l-y)/m))*m;else for("M"===o.dtick.charAt(0)&&(y=function(t,e,r,n,i){var a=lib_1.findExactDates(e,i),o=.8;if(a.exactDays>o){var s=Number(r.substr(1));a.exactYears>o&&s%12==0?t=_.tickIncrement(t,"M6","reverse")+1.5*h:a.exactMonths>o?t=_.tickIncrement(t,"M1","reverse")+15.5*h:t-=g;var l=_.tickIncrement(t,r);if(l<=n)return l}return t}(y,t,m,s,i)),p=y,0;p<=l;)p=_.tickIncrement(p,m,!1,i);return{start:e.c2r(y,0,i),end:e.c2r(p,0,i),size:m,_dataSpan:l-s}},_.prepTicks=function(t,e){var r=lib_1.simpleMap(t.range,t.r2l,void 0,void 0,e);if(t._dtickInit=t.dtick,t._tick0Init=t.tick0,"auto"===t.tickmode||!t.dtick){var a,l=t.nticks;l||("category"===t.type||"multicategory"===t.type?(a=t.tickfont?lib_1.bigFont(t.tickfont.size||12):15,l=t._length/a):(a="y"===t._id.charAt(0)?40:80,l=lib_1.constrain(t._length/a,4,9)+1),"radialaxis"===t._name&&(l*=2)),"array"===t.tickmode&&(l*=100),t._roughDTick=Math.abs(r[1]-r[0])/l,_.autoTicks(t,t._roughDTick),t._minDtick>0&&t.dtick<2*t._minDtick&&(t.dtick=t._minDtick,t.tick0=t.l2r(t._forceTick0))}"period"===t.ticklabelmode&&function(t){var e;function r(){return!(fastIsnumeric(t.dtick)||"M"!==t.dtick.charAt(0))}var a=r(),l=_.getTickFormat(t);if(l){var p=t._dtickInit!==t.dtick;/%[fLQsSMX]/.test(l)||(/%[HI]/.test(l)?(e=f,p&&!a&&t.dtick<f&&(t.dtick=f)):/%p/.test(l)?(e=g,p&&!a&&t.dtick<g&&(t.dtick=g)):/%[Aadejuwx]/.test(l)?(e=h,p&&!a&&t.dtick<h&&(t.dtick=h)):/%[UVW]/.test(l)?(e=d,p&&!a&&t.dtick<d&&(t.dtick=d)):/%[Bbm]/.test(l)?(e=c,p&&(a?R(t.dtick)<1:t.dtick<u)&&(t.dtick="M1")):/%[q]/.test(l)?(e=o,p&&(a?R(t.dtick)<3:t.dtick<s)&&(t.dtick="M3")):/%[Yy]/.test(l)&&(e=n,p&&(a?R(t.dtick)<12:t.dtick<i)&&(t.dtick="M12")))}(a=r())&&t.tick0===t._dowTick0&&(t.tick0=t._rawTick0);t._definedDelta=e}(t),t.tick0||(t.tick0="date"===t.type?"2000-01-01":0),"date"===t.type&&t.dtick<.1&&(t.dtick=.1),Z(t)},_.calcTicks=function(t,e){_.prepTicks(t,e);var p=lib_1.simpleMap(t.range,t.r2l,void 0,void 0,e);if("array"===t.tickmode)return function(t){var e=t.tickvals,r=t.ticktext,n=new Array(e.length),i=S(lib_1.simpleMap(t.range,t.r2l)),a=Math.min(i[0],i[1]),o=Math.max(i[0],i[1]),s=0;Array.isArray(r)||(r=[]);var l="category"===t.type?t.d2l_noadd:t.d2l;"log"===t.type&&"L"!==String(t.dtick).charAt(0)&&(t.dtick="L"+Math.pow(10,Math.floor(Math.min(t.range[0],t.range[1]))-1));for(var c=0;c<e.length;c++){var u=l(e[c]);u>a&&u<o&&(void 0===r[c]?n[s]=_.tickText(t,u):n[s]=O(t,u,String(r[c])),s++)}s<e.length&&n.splice(s,e.length-s);t.rangebreaks&&(n=n.filter((function(e){return t.maskBreaks(e.x)!==b})));return n}(t);var m=S(p),y=m[0],v=m[1],x=p[1]<p[0],I=Math.min(p[0],p[1]),B=Math.max(p[0],p[1]),C=fastIsnumeric(t.dtick),F="log"===t.type&&!(C||"L"===t.dtick.charAt(0)),A="period"===t.ticklabelmode;if(t._tmin=_.tickFirst(t,e),t._tmin<y!==x)return[];"category"!==t.type&&"multicategory"!==t.type||(v=x?Math.max(-.5,v):Math.min(t._categories.length-.5,v));var Q=t._tmin;t.rangebreaks&&t._tick0Init!==t.tick0&&(Q=lt(Q,t),x||(Q=_.tickIncrement(Q,t.dtick,!x,t.calendar))),A&&(Q=_.tickIncrement(Q,t.dtick,!x,t.calendar));var w,U=t.ticklabelstep,E=Math.max(1e3,t._length||0),L=[],T=null;C?w=t.dtick:"date"===t.type?"string"==typeof t.dtick&&"M"===t.dtick.charAt(0)&&(w=c*t.dtick.substring(1)):w=t._roughDTick;for(var R,k,G=Math.round((t.r2l(Q)-t.r2l(t.tick0))/w)-1;x?Q>=v:Q<=v;Q=_.tickIncrement(Q,t.dtick,x,t.calendar)){if(G++,t.rangebreaks&&!x){if(Q<y)continue;if(t.maskBreaks(Q)===b&&lt(Q,t)>=B)break}if(L.length>E||Q===T)break;T=Q;var N=!1;F&&Q!==(0|Q)&&(N=!0);var M={minor:N,value:Q};U>1&&G%U&&(M.skipLabel=!0),L.push(M)}if(A&&function(t,e,p){for(var m=0;m<t.length;m++){var y=t[m].value,v=m,x=m+1;m<t.length-1?(v=m,x=m+1):m>0?(v=m-1,x=m):(v=m,x=m);var I,B=t[v].value,C=t[x].value,F=Math.abs(C-B),A=p||F,Q=0;A>=i?Q=F>=i&&F<=r?F:n:p===o&&A>=s?Q=F>=s&&F<=a?F:o:A>=u?Q=F>=u&&F<=l?F:c:p===d&&A>=d?Q=d:A>=h?Q=h:p===g&&A>=g?Q=g:p===f&&A>=f&&(Q=f),Q>=F&&(Q=F,I=!0);var _=y+Q;if(e.rangebreaks&&Q>0){for(var w=0,U=0;U<84;U++){var S=(U+.5)/84;e.maskBreaks(y*(1-S)+S*_)!==b&&w++}(Q*=w/84)||(t[m].drop=!0),I&&F>d&&(Q=F)}(Q>0||0===m)&&(t[m].periodX=y+Q/2)}}(L,t,t._definedDelta),t.rangebreaks){var D="y"===t._id.charAt(0),X=1;"auto"===t.tickmode&&(X=t.tickfont?t.tickfont.size:12);var V=NaN;for(R=L.length-1;R>-1;R--)if(L[R].drop)L.splice(R,1);else{L[R].value=lt(L[R].value,t);var W=t.c2p(L[R].value);(D?V>W-X:V<W+X)?L.splice(x?R+1:R,1):V=W}}st(t)&&360===Math.abs(p[1]-p[0])&&L.pop(),t._tmax=(L[L.length-1]||{}).value,t._prevDateHead="",t._inCalcTicks=!0;var Z,$,H=function(e){e.text=" ",t._prevDateHead=k},Y=[];for(R=0;R<L.length;R++){var P=L[R].minor,z=L[R].value;k=t._prevDateHead,Z=_.tickText(t,z,!1,P),void 0!==($=L[R].periodX)&&(Z.periodX=$,($>B||$<I)&&($>B&&(Z.periodX=B),$<I&&(Z.periodX=I),H(Z))),L[R].skipLabel&&H(Z),Y.push(Z)}return t._inCalcTicks=!1,Y};var k=[2,5,10],G=[1,2,3,6,12],N=[1,2,5,10,15,30],M=[1,2,3,7,14],D=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],X=[-.301,0,.301,.699,1],V=[15,30,45,90,180];function W(t,e,r){return e*lib_1.roundUp(t/e,r)}function Z(t){var e=t.dtick;if(t._tickexponent=0,fastIsnumeric(e)||"string"==typeof e||(e=1),"category"!==t.type&&"multicategory"!==t.type||(t._tickround=null),"date"===t.type){var r=t.r2l(t.tick0),n=t.l2r(r).replace(/(^-|i)/g,""),i=n.length;if("M"===String(e).charAt(0))i>10||"01-01"!==n.substr(5)?t._tickround="d":t._tickround=+e.substr(1)%12==0?"y":"m";else if(e>=h&&i<=10||e>=15*h)t._tickround="d";else if(e>=p&&i<=16||e>=f)t._tickround="M";else if(e>=m&&i<=19||e>=p)t._tickround="S";else{var a=t.l2r(r+e).replace(/^-/,"").length;t._tickround=Math.max(i,a)-20,t._tickround<0&&(t._tickround=4)}}else if(fastIsnumeric(e)||"L"===e.charAt(0)){var o=t.range.map(t.r2d||Number);fastIsnumeric(e)||(e=Number(e.substr(1))),t._tickround=2-Math.floor(Math.log(e)/Math.LN10+.01);var s=Math.max(Math.abs(o[0]),Math.abs(o[1])),l=Math.floor(Math.log(s)/Math.LN10+.01),c=void 0===t.minexponent?3:t.minexponent;Math.abs(l)>c&&(H(t.exponentformat)&&!Y(l)?t._tickexponent=3*Math.round((l-1)/3):t._tickexponent=l)}else t._tickround=null}function O(t,e,r){var n=t.tickfont||{};return{x:e,dx:0,dy:0,text:r||"",fontSize:n.size,font:n.family,fontColor:n.color}}_.autoTicks=function(t,e){var r;function i(t){return Math.pow(t,Math.floor(Math.log(e)/Math.LN10))}if("date"===t.type){t.tick0=lib_1.dateTick0(t.calendar,0);var a=2*e;if(a>n)e/=n,r=i(10),t.dtick="M"+12*W(e,r,k);else if(a>c)e/=c,t.dtick="M"+W(e,1,G);else if(a>h){t.dtick=W(e,h,t._hasDayOfWeekBreaks?[1,2,7,14]:M);var o=_.getTickFormat(t),s="period"===t.ticklabelmode;s&&(t._rawTick0=t.tick0),/%[uVW]/.test(o)?t.tick0=lib_1.dateTick0(t.calendar,2):t.tick0=lib_1.dateTick0(t.calendar,1),s&&(t._dowTick0=t.tick0)}else a>f?t.dtick=W(e,f,G):a>p?t.dtick=W(e,p,N):a>m?t.dtick=W(e,m,N):(r=i(10),t.dtick=W(e,r,k))}else if("log"===t.type){t.tick0=0;var l=lib_1.simpleMap(t.range,t.r2l);if(e>.7)t.dtick=Math.ceil(e);else if(Math.abs(l[1]-l[0])<1){var u=1.5*Math.abs((l[1]-l[0])/e);e=Math.abs(Math.pow(10,l[1])-Math.pow(10,l[0]))/u,r=i(10),t.dtick="L"+W(e,r,k)}else t.dtick=e>.3?"D2":"D1"}else"category"===t.type||"multicategory"===t.type?(t.tick0=0,t.dtick=Math.ceil(Math.max(e,1))):st(t)?(t.tick0=0,r=1,t.dtick=W(e,r,V)):(t.tick0=0,r=i(10),t.dtick=W(e,r,k));if(0===t.dtick&&(t.dtick=1),!fastIsnumeric(t.dtick)&&"string"!=typeof t.dtick){var d=t.dtick;throw t.dtick=1,"ax.dtick error: "+String(d)}},_.tickIncrement=function(t,e,r,n){var i=r?-1:1;if(fastIsnumeric(e))return lib_1.increment(t,i*e);var a=e.charAt(0),o=i*Number(e.substr(1));if("M"===a)return lib_1.incrementMonth(t,o,n);if("L"===a)return Math.log(Math.pow(10,t)+o)/Math.LN10;if("D"===a){var s="D2"===e?X:D,l=t+.01*i,c=lib_1.roundUp(lib_1.mod(l,1),s,r);return Math.floor(l)+Math.log(d3.round(Math.pow(10,c),1))/Math.LN10}throw"unrecognized dtick "+String(e)},_.tickFirst=function(t,e){var r=t.r2l||Number,n=lib_1.simpleMap(t.range,r,void 0,void 0,e),i=n[1]<n[0],a=i?Math.floor:Math.ceil,o=S(n)[0],s=t.dtick,l=r(t.tick0);if(fastIsnumeric(s)){var c=a((o-l)/s)*s+l;return"category"!==t.type&&"multicategory"!==t.type||(c=lib_1.constrain(c,0,t._categories.length-1)),c}var u=s.charAt(0),d=Number(s.substr(1));if("M"===u){for(var h,g,f,p=0,m=l;p<10;){if(((h=_.tickIncrement(m,s,i,t.calendar))-o)*(m-o)<=0)return i?Math.min(m,h):Math.max(m,h);g=(o-(m+h)/2)/(h-m),f=u+(Math.abs(Math.round(g))||1)*d,m=_.tickIncrement(m,f,g<0?!i:i,t.calendar),p++}return lib_1.error("tickFirst did not converge",t),m}if("L"===u)return Math.log(a((Math.pow(10,o)-l)/d)*d+l)/Math.LN10;if("D"===u){var y="D2"===s?X:D,b=lib_1.roundUp(lib_1.mod(o,1),y,i);return Math.floor(o)+Math.log(d3.round(Math.pow(10,b),1))/Math.LN10}throw"unrecognized dtick "+String(s)},_.tickText=function(t,e,r,n){var i,a=O(t,e),o="array"===t.tickmode,s=r||o,l=t.type,c="category"===l?t.d2l_noadd:t.d2l;if(o&&Array.isArray(t.ticktext)){var u=lib_1.simpleMap(t.range,t.r2l),d=(Math.abs(u[1]-u[0])-(t._lBreaks||0))/1e4;for(i=0;i<t.ticktext.length&&!(Math.abs(e-c(t.tickvals[i]))<d);i++);if(i<t.ticktext.length)return a.text=String(t.ticktext[i]),a}function h(n){if(void 0===n)return!0;if(r)return"none"===n;var i={first:t._tmin,last:t._tmax}[n];return"all"!==n&&e!==i}var g=r?"never":"none"!==t.exponentformat&&h(t.showexponent)?"hide":"";if("date"===l?function(t,e,r,n){var i=t._tickround,a=r&&t.hoverformat||_.getTickFormat(t);n&&(i=fastIsnumeric(i)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[i]);var o,s=lib_1.formatDate(e.x,a,i,t._dateFormat,t.calendar,t._extraFormat),l=s.indexOf("\n");-1!==l&&(o=s.substr(l+1),s=s.substr(0,l));n&&("00:00:00"===s||"00:00"===s?(s=o,o=""):8===s.length&&(s=s.replace(/:00$/,"")));if(o)if(r)"d"===i?s+=", "+o:s=o+(s?", "+s:"");else if(t._inCalcTicks&&t._prevDateHead===o){var c=ct(t),u=t._trueSide||t.side;(!c&&"top"===u||c&&"bottom"===u)&&(s+="<br> ")}else t._prevDateHead=o,s+="<br>"+o;e.text=s}(t,a,r,s):"log"===l?function(t,e,r,n,i){var a=t.dtick,o=e.x,s=t.tickformat,l="string"==typeof a&&a.charAt(0);"never"===i&&(i="");n&&"L"!==l&&(a="L3",l="L");if(s||"L"===l)e.text=P(Math.pow(10,o),t,i,n);else if(fastIsnumeric(a)||"D"===l&&lib_1.mod(o+.01,1)<.1){var c=Math.round(o),u=Math.abs(c),d=t.exponentformat;"power"===d||H(d)&&Y(c)?(e.text=0===c?1:1===c?"10":"10<sup>"+(c>1?"":y)+u+"</sup>",e.fontSize*=1.25):("e"===d||"E"===d)&&u>2?e.text="1"+d+(c>0?"+":y)+u:(e.text=P(Math.pow(10,o),t,"","fakehover"),"D1"===a&&"y"===t._id.charAt(0)&&(e.dy-=e.fontSize/6))}else{if("D"!==l)throw"unrecognized dtick "+String(a);e.text=String(Math.round(Math.pow(10,lib_1.mod(o,1)))),e.fontSize*=.75}if("D1"===t.dtick){var h=String(e.text).charAt(0);"0"!==h&&"1"!==h||("y"===t._id.charAt(0)?e.dx-=e.fontSize/4:(e.dy+=e.fontSize/2,e.dx+=(t.range[1]>t.range[0]?1:-1)*e.fontSize*(o<0?.5:.25)))}}(t,a,0,s,g):"category"===l?function(t,e){var r=t._categories[Math.round(e.x)];void 0===r&&(r="");e.text=String(r)}(t,a):"multicategory"===l?function(t,e,r){var n=Math.round(e.x),i=t._categories[n]||[],a=void 0===i[1]?"":String(i[1]),o=void 0===i[0]?"":String(i[0]);r?e.text=o+" - "+a:(e.text=a,e.text2=o)}(t,a,r):st(t)?function(t,e,r,n,i){if("radians"!==t.thetaunit||r)e.text=P(e.x,t,i,n);else{var a=e.x/180;if(0===a)e.text="0";else{var o=function(t){function e(t,e){return Math.abs(t-e)<=1e-6}function r(t,n){return e(n,0)?t:r(n,t%n)}function n(t){for(var r=1;!e(Math.round(t*r)/r,t);)r*=10;return r}var i=n(t),a=t*i,o=Math.abs(r(a,i));return[Math.round(a/o),Math.round(i/o)]}(a);if(o[1]>=100)e.text=P(lib_1.deg2rad(e.x),t,i,n);else{var s=e.x<0;1===o[1]?1===o[0]?e.text="Ï":e.text=o[0]+"Ï":e.text=["<sup>",o[0],"</sup>","â","<sub>",o[1],"</sub>","Ï"].join(""),s&&(e.text=y+e.text)}}}}(t,a,r,s,g):function(t,e,r,n,i){"never"===i?i="":"all"===t.showexponent&&Math.abs(e.x/t.dtick)<1e-6&&(i="hide");e.text=P(e.x,t,i,n)}(t,a,0,s,g),n||(t.tickprefix&&!h(t.showtickprefix)&&(a.text=t.tickprefix+a.text),t.ticksuffix&&!h(t.showticksuffix)&&(a.text+=t.ticksuffix)),"boundaries"===t.tickson||t.showdividers){var f=function(e){var r=t.l2p(e);return r>=0&&r<=t._length?e:null};a.xbnd=[f(a.x-.5),f(a.x+t.dtick-.5)]}return a},_.hoverLabelText=function(t,e,r){r&&(t=lib_1.extendFlat({},t,{hoverformat:r}));var n=Array.isArray(e)?e[0]:e,i=Array.isArray(e)?e[1]:void 0;if(void 0!==i&&i!==n)return _.hoverLabelText(t,n,r)+" - "+_.hoverLabelText(t,i,r);var a="log"===t.type&&n<=0,o=_.tickText(t,t.c2l(a?-n:n),"hover").text;return a?0===n?"0":y+o:o};var $=["f","p","n","Î¼","m","","k","M","G","T"];function H(t){return"SI"===t||"B"===t}function Y(t){return t>14||t<-15}function P(t,e,r,n){var i=t<0,a=e._tickround,o=r||e.exponentformat||"B",s=e._tickexponent,l=_.getTickFormat(e),c=e.separatethousands;if(n){var u={exponentformat:o,minexponent:e.minexponent,dtick:"none"===e.showexponent?e.dtick:fastIsnumeric(t)&&Math.abs(t)||1,range:"none"===e.showexponent?e.range.map(e.r2d):[0,t||1]};Z(u),a=(Number(u._tickround)||0)+4,s=u._tickexponent,e.hoverformat&&(l=e.hoverformat)}if(l)return e._numFormat(l)(t).replace(/-/g,y);var d,h=Math.pow(10,-a)/2;if("none"===o&&(s=0),(t=Math.abs(t))<h)t="0",i=!1;else{if(t+=h,s&&(t*=Math.pow(10,-s),a+=s),0===a)t=String(Math.floor(t));else if(a<0){t=(t=String(Math.round(t))).substr(0,t.length+a);for(var g=a;g<0;g++)t+="0"}else{var f=(t=String(t)).indexOf(".")+1;f&&(t=t.substr(0,f+a).replace(/\.?0+$/,""))}t=lib_1.numSeparate(t,e._separators,c)}s&&"hide"!==o&&(H(o)&&Y(s)&&(o="power"),d=s<0?y+-s:"power"!==o?"+"+s:String(s),"e"===o||"E"===o?t+=o+d:"power"===o?t+="Ã10<sup>"+d+"</sup>":"B"===o&&9===s?t+="B":H(o)&&(t+=$[s/3+5]));return i?y+t:t}function z(t,e){for(var r=[],n={},i=0;i<e.length;i++){var a=e[i];n[a.text2]?n[a.text2].push(a.x):n[a.text2]=[a.x]}for(var o in n)r.push(O(t,lib_1.interp(n[o],.5),o));return r}function J(t){return void 0!==t.periodX?t.periodX:t.x}function j(t){return[t.text,t.x,t.axInfo,t.font,t.fontSize,t.fontColor].join("_")}function K(t){var e=t.title.font.size,r=(t.title.text.match(svg_text_utils.BR_TAG_ALL)||[]).length;return t.title.hasOwnProperty("standoff")?r?e*(F+r*A):e*F:r?e*(r+1)*A:e}function q(t,e){var r=t.l2p(e);return r>1&&r<t._length-1}function tt(t){var e=d3.select(t),r=e.select(".text-math-group");return r.empty()?e.select("text"):r}function et(t){return t._id+".automargin"}function rt(t){return et(t)+".mirror"}function nt(t){return t._id+".rangeslider"}function it(t,e){for(var r=0;r<e.length;r++)-1===t.indexOf(e[r])&&t.push(e[r])}function at(t,e,r){var n,i,a=[],o=[],s=t.layout;for(n=0;n<e.length;n++)a.push(_.getFromId(t,e[n]));for(n=0;n<r.length;n++)o.push(_.getFromId(t,r[n]));var l=Object.keys(layout_attributes$3),c=["anchor","domain","overlaying","position","side","tickangle","editType"],u=["linear","log"];for(n=0;n<l.length;n++){var d=l[n],h=a[0][d],g=o[0][d],f=!0,p=!1,m=!1;if("_"!==d.charAt(0)&&"function"!=typeof h&&-1===c.indexOf(d)){for(i=1;i<a.length&&f;i++){var y=a[i][d];"type"===d&&-1!==u.indexOf(h)&&-1!==u.indexOf(y)&&h!==y?p=!0:y!==h&&(f=!1)}for(i=1;i<o.length&&f;i++){var b=o[i][d];"type"===d&&-1!==u.indexOf(g)&&-1!==u.indexOf(b)&&g!==b?m=!0:o[i][d]!==g&&(f=!1)}f&&(p&&(s[a[0]._name].type="linear"),m&&(s[o[0]._name].type="linear"),ot(s,d,a,o,t._fullLayout._dfltTitle))}}for(n=0;n<t._fullLayout.annotations.length;n++){var v=t._fullLayout.annotations[n];-1!==e.indexOf(v.xref)&&-1!==r.indexOf(v.yref)&&lib_1.swapAttrs(s.annotations[n],["?"])}}function ot(t,e,r,n,i){var a,o=lib_1.nestedProperty,s=o(t[r[0]._name],e).get(),l=o(t[n[0]._name],e).get();for("title"===e&&(s&&s.text===i.x&&(s.text=i.y),l&&l.text===i.y&&(l.text=i.x)),a=0;a<r.length;a++)o(t,r[a]._name+"."+e).set(l);for(a=0;a<n.length;a++)o(t,n[a]._name+"."+e).set(s)}function st(t){return"angularaxis"===t._id}function lt(t,e){for(var r=e._rangebreaks.length,n=0;n<r;n++){var i=e._rangebreaks[n];if(t>=i.min&&t<i.max)return i.max}return t}function ct(t){return-1!==(t.ticklabelposition||"").indexOf("inside")}function ut(t,e){ct(t._anchorAxis||{})&&t._hideCounterAxisInsideTickLabels&&t._hideCounterAxisInsideTickLabels(e)}_.getTickFormat=function(t){var e,r,n;function i(t){return"string"!=typeof t?t:Number(t.replace("M",""))*c}function a(t,e){var r=["L","D"];if(typeof t==typeof e){if("number"==typeof t)return t-e;var n=r.indexOf(t.charAt(0)),i=r.indexOf(e.charAt(0));return n===i?Number(t.replace(/(L|D)/g,""))-Number(e.replace(/(L|D)/g,"")):n-i}return"number"==typeof t?1:-1}function o(t,e,r){var n=r||function(t){return t},i=e[0],a=e[1];return(!i&&"number"!=typeof i||n(i)<=n(t))&&(!a&&"number"!=typeof a||n(a)>=n(t))}function s(t,e){var r=null===e[0],n=null===e[1],i=a(t,e[0])>=0,o=a(t,e[1])<=0;return(r||i)&&(n||o)}if(t.tickformatstops&&t.tickformatstops.length>0)switch(t.type){case"date":case"linear":for(e=0;e<t.tickformatstops.length;e++)if((n=t.tickformatstops[e]).enabled&&o(t.dtick,n.dtickrange,i)){r=n;break}break;case"log":for(e=0;e<t.tickformatstops.length;e++)if((n=t.tickformatstops[e]).enabled&&s(t.dtick,n.dtickrange)){r=n;break}}return r?r.value:t.tickformat},_.getSubplots=function(t,e){var r=t._fullLayout._subplots,n=r.cartesian.concat(r.gl2d||[]),i=e?_.findSubplotsWithAxis(n,e):n;return i.sort((function(t,e){var r=t.substr(1).split("y"),n=e.substr(1).split("y");return r[0]===n[0]?+r[1]-+n[1]:+r[0]-+n[0]})),i},_.findSubplotsWithAxis=function(t,e){for(var r=new RegExp("x"===e._id.charAt(0)?"^"+e._id+"y":e._id+"$"),n=[],i=0;i<t.length;i++){var a=t[i];r.test(a)&&n.push(a)}return n},_.makeClipPaths=function(t){var e=t._fullLayout;if(!e._hasOnlyLargeSploms){var r,n,i={_offset:0,_length:e.width,_id:""},a={_offset:0,_length:e.height,_id:""},o=_.list(t,"x",!0),s=_.list(t,"y",!0),l=[];for(r=0;r<o.length;r++)for(l.push({x:o[r],y:a}),n=0;n<s.length;n++)0===r&&l.push({x:i,y:s[n]}),l.push({x:o[r],y:s[n]});var c=e._clips.selectAll(".axesclip").data(l,(function(t){return t.x._id+t.y._id}));c.enter().append("clipPath").classed("axesclip",!0).attr("id",(function(t){return"clip"+e._uid+t.x._id+t.y._id})).append("rect"),c.exit().remove(),c.each((function(t){d3.select(this).select("rect").attr({x:t.x._offset||0,y:t.y._offset||0,width:t.x._length||1,height:t.y._length||1})}))}},_.draw=function(t,e,r){var n=t._fullLayout;"redraw"===e&&n._paper.selectAll("g.subplot").each((function(t){var e=t[0],r=n._plots[e];if(r){var i=r.xaxis,a=r.yaxis;r.xaxislayer.selectAll("."+i._id+"tick").remove(),r.yaxislayer.selectAll("."+a._id+"tick").remove(),r.xaxislayer.selectAll("."+i._id+"tick2").remove(),r.yaxislayer.selectAll("."+a._id+"tick2").remove(),r.xaxislayer.selectAll("."+i._id+"divider").remove(),r.yaxislayer.selectAll("."+a._id+"divider").remove(),r.gridlayer&&r.gridlayer.selectAll("path").remove(),r.zerolinelayer&&r.zerolinelayer.selectAll("path").remove(),n._infolayer.select(".g-"+i._id+"title").remove(),n._infolayer.select(".g-"+a._id+"title").remove()}}));var i=e&&"redraw"!==e?e:_.listIds(t);return lib_1.syncOrAsync(i.map((function(e){return function(){if(e){var n=_.getFromId(t,e),i=_.drawOne(t,n,r);return n._r=n.range.slice(),n._rl=lib_1.simpleMap(n._r,n.r2l),i}}})))},_.drawOne=function(t,e,r){var n,i,a;r=r||{},e.setScale();var o=t._fullLayout,s=e._id,l=s.charAt(0),c=_.counterLetter(s),u=o._plots[e._mainSubplot];if(u){var d=u[l+"axislayer"],h=e._mainLinePosition,g=e._mainMirrorPosition,f=e._vals=_.calcTicks(e),p=[e.mirror,h,g].join("_");for(n=0;n<f.length;n++)f[n].axInfo=p;e._selections={},e._tickAngles&&(e._prevTickAngles=e._tickAngles),e._tickAngles={},e._depth=null;var m={};if(e.visible){var y,b,v=_.makeTransTickFn(e),x=_.makeTransTickLabelFn(e),I="inside"===e.ticks,B="outside"===e.ticks;if("boundaries"===e.tickson){var C=function(t,e){var r,n=[],i=function(t,e){var r=t.xbnd[e];null!==r&&n.push(lib_1.extendFlat({},t,{x:r}))};if(e.length){for(r=0;r<e.length;r++)i(e[r],0);i(e[r-1],1)}return n}(0,f);b=_.clipEnds(e,C),y=I?b:C}else b=_.clipEnds(e,f),y=I&&"period"!==e.ticklabelmode?b:f;var F=e._gridVals=b,w=function(t,e){var r,n,i=[],a=e.length&&e[e.length-1].x<e[0].x,o=function(t,e){var r=t.xbnd[e];null!==r&&i.push(lib_1.extendFlat({},t,{x:r}))};if(t.showdividers&&e.length){for(r=0;r<e.length;r++){var s=e[r];s.text2!==n&&o(s,a?1:0),n=s.text2}o(e[r-1],a?0:1)}return i}(e,f);if(!o._hasOnlyLargeSploms){var U=e._subplotsWith,S={};for(n=0;n<U.length;n++){i=U[n];var E=(a=o._plots[i])[c+"axis"],L=E._mainAxis._id;if(!S[L]){S[L]=1;var T="x"===l?"M0,"+E._offset+"v"+E._length:"M"+E._offset+",0h"+E._length;_.drawGrid(t,e,{vals:F,counterAxis:E,layer:a.gridlayer.select("."+s),path:T,transFn:v}),_.drawZeroLine(t,e,{counterAxis:E,layer:a.zerolinelayer,path:T,transFn:v})}}}var R=_.getTickSigns(e),k=[];if(e.ticks){var G,N,M,D=_.makeTickPath(e,h,R[2]);if(e._anchorAxis&&e.mirror&&!0!==e.mirror?(G=_.makeTickPath(e,g,R[3]),N=D+G):(G="",N=D),e.showdividers&&B&&"boundaries"===e.tickson){var X={};for(n=0;n<w.length;n++)X[w[n].x]=1;M=function(t){return X[t.x]?G:N}}else M=N;_.drawTicks(t,e,{vals:y,layer:d,path:M,transFn:v}),"allticks"===e.mirror&&(k=Object.keys(e._linepositions||{}))}for(n=0;n<k.length;n++){i=k[n],a=o._plots[i];var V=e._linepositions[i]||[],W=_.makeTickPath(e,V[0],R[0])+_.makeTickPath(e,V[1],R[1]);_.drawTicks(t,e,{vals:y,layer:a[l+"axislayer"],path:W,transFn:v})}var Z=[];if(Z.push((function(){return _.drawLabels(t,e,{vals:f,layer:d,plotinfo:a,transFn:x,labelFns:_.makeLabelFns(e,h)})})),"multicategory"===e.type){var O={x:2,y:10}[l];Z.push((function(){var r={x:"height",y:"width"}[l],n=H()[r]+O+(e._tickAngles[s+"tick"]?e.tickfont.size*A:0);return _.drawLabels(t,e,{vals:z(e,f),layer:d,cls:s+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:v,labelFns:_.makeLabelFns(e,h+n*R[4])})})),Z.push((function(){return e._depth=R[4]*(H("tick2")[e.side]-h),function(t,e,r){var n=e._id+"divider",i=r.vals,a=r.layer.selectAll("path."+n).data(i,j);a.exit().remove(),a.enter().insert("path",":first-child").classed(n,1).classed("crisp",1).call(color_1.stroke,e.dividercolor).style("stroke-width",drawing_1.crispRound(t,e.dividerwidth,1)+"px"),a.attr("transform",r.transFn).attr("d",r.path)}(t,e,{vals:w,layer:d,path:_.makeTickPath(e,h,R[4],e._depth),transFn:v})}))}else e.title.hasOwnProperty("standoff")&&Z.push((function(){e._depth=R[4]*(H()[e.side]-h)}));var $=registry.getComponentMethod("rangeslider","isVisible")(e);return Z.push((function(){var r,n,i,a,s=e.side.charAt(0),u=Q[e.side].charAt(0),d=_.getPxPosition(t,e),h=B?e.ticklen:0;if((e.automargin||$)&&("multicategory"===e.type?r=H("tick2"):(r=H(),"x"===l&&"b"===s&&(e._depth=Math.max(r.width>0?r.bottom-d:0,h)))),e.automargin){n={x:0,y:0,r:0,l:0,t:0,b:0};var g=[0,1];if("x"===l){if("b"===s?n[s]=e._depth:(n[s]=e._depth=Math.max(r.width>0?d-r.top:0,h),g.reverse()),r.width>0){var f=r.right-(e._offset+e._length);f>0&&(n.xr=1,n.r=f);var p=e._offset-r.left;p>0&&(n.xl=0,n.l=p)}}else if("l"===s?n[s]=e._depth=Math.max(r.height>0?d-r.left:0,h):(n[s]=e._depth=Math.max(r.height>0?r.right-d:0,h),g.reverse()),r.height>0){var m=r.bottom-(e._offset+e._length);m>0&&(n.yb=0,n.b=m);var y=e._offset-r.top;y>0&&(n.yt=1,n.t=y)}n[c]="free"===e.anchor?e.position:e._anchorAxis.domain[g[0]],e.title.text!==o._dfltTitle[l]&&(n[s]+=K(e)+(e.title.standoff||0)),e.mirror&&"free"!==e.anchor&&((i={x:0,y:0,r:0,l:0,t:0,b:0})[u]=e.linewidth,e.mirror&&!0!==e.mirror&&(i[u]+=h),!0===e.mirror||"ticks"===e.mirror?i[c]=e._anchorAxis.domain[g[1]]:"all"!==e.mirror&&"allticks"!==e.mirror||(i[c]=[e._counterDomainMin,e._counterDomainMax][g[1]]))}$&&(a=registry.getComponentMethod("rangeslider","autoMarginOpts")(t,e)),plots_1.autoMargin(t,et(e),n),plots_1.autoMargin(t,rt(e),i),plots_1.autoMargin(t,nt(e),a)})),r.skipTitle||$&&"bottom"===e.side||Z.push((function(){return function(t,e){var r,n=t._fullLayout,i=e._id,a=i.charAt(0),o=e.title.font.size;if(e.title.hasOwnProperty("standoff"))r=e._depth+e.title.standoff+K(e);else{var s=ct(e);if("multicategory"===e.type)r=e._depth;else{var l=1.5*o;s&&(l=.5*o,"outside"===e.ticks&&(l+=e.ticklen)),r=10+l+(e.linewidth?e.linewidth-1:0)}s||(r+="x"===a?"top"===e.side?o*(e.showticklabels?1:0):o*(e.showticklabels?1.5:.5):"right"===e.side?o*(e.showticklabels?1:.5):o*(e.showticklabels?.5:0))}var c,u,d,h,g=_.getPxPosition(t,e);"x"===a?(u=e._offset+e._length/2,d="top"===e.side?g-r:g+r):(d=e._offset+e._length/2,u="right"===e.side?g+r:g-r,c={rotate:"-90",offset:0});if("multicategory"!==e.type){var f=e._selections[e._id+"tick"];if(h={selection:f,side:e.side},f&&f.node()&&f.node().parentNode){var p=drawing_1.getTranslate(f.node().parentNode);h.offsetLeft=p.x,h.offsetTop=p.y}e.title.hasOwnProperty("standoff")&&(h.pad=0)}return titles.draw(t,i+"title",{propContainer:e,propName:e._name+".title.text",placeholder:n._dfltTitle[a],avoid:h,transform:c,attributes:{x:u,y:d,"text-anchor":"middle"}})}(t,e)})),lib_1.syncOrAsync(Z)}}function H(t){var r=s+(t||"tick");return m[r]||(m[r]=function(t,e){var r,n,i,a;t._selections[e].size()?(r=1/0,n=-1/0,i=1/0,a=-1/0,t._selections[e].each((function(){var t=tt(this),e=drawing_1.bBox(t.node().parentNode);r=Math.min(r,e.top),n=Math.max(n,e.bottom),i=Math.min(i,e.left),a=Math.max(a,e.right)}))):(r=0,n=0,i=0,a=0);return{top:r,bottom:n,left:i,right:a,height:n-r,width:a-i}}(e,r)),m[r]}},_.getTickSigns=function(t){var e=t._id.charAt(0),r={x:"top",y:"right"}[e],n=t.side===r?1:-1,i=[-1,1,n,-n];return"inside"!==t.ticks==("x"===e)&&(i=i.map((function(t){return-t}))),t.side&&i.push({l:-1,t:-1,r:1,b:1}[t.side.charAt(0)]),i},_.makeTransTickFn=function(t){return"x"===t._id.charAt(0)?function(r){return e(t._offset+t.l2p(r.x),0)}:function(r){return e(0,t._offset+t.l2p(r.x))}},_.makeTransTickLabelFn=function(t){var r=function(t){var e=t.ticklabelposition||"",r=function(t){return-1!==e.indexOf(t)},n=r("top"),i=r("left"),a=r("right"),o=r("bottom"),s=r("inside"),l=o||i||n||a;if(!l&&!s)return[0,0];var c=t.side,u=l?(t.tickwidth||0)/2:0,d=3,h=t.tickfont?t.tickfont.size:12;(o||n)&&(u+=h*F,d+=(t.linewidth||0)/2);(i||a)&&(u+=(t.linewidth||0)/2,d+=3);s&&"top"===c&&(d-=h*(1-F));(i||n)&&(u=-u);"bottom"!==c&&"right"!==c||(d=-d);return[l?u:0,s?d:0]}(t),n=r[0],i=r[1];return"x"===t._id.charAt(0)?function(r){return e(n+t._offset+t.l2p(J(r)),i)}:function(r){return e(i,n+t._offset+t.l2p(J(r)))}},_.makeTickPath=function(t,e,r,n){n=void 0!==n?n:t.ticklen;var i=t._id.charAt(0),a=(t.linewidth||1)/2;return"x"===i?"M0,"+(e+a*r)+"v"+n*r:"M"+(e+a*r)+",0h"+n*r},_.makeLabelFns=function(t,e,r){var n=t.ticklabelposition||"",i=function(t){return-1!==n.indexOf(t)},a=i("top"),o=i("left"),s=i("right"),l=i("bottom")||o||a||s,c=i("inside"),u="inside"===n&&"inside"===t.ticks||!c&&"outside"===t.ticks&&"boundaries"!==t.tickson,d=0,h=0,g=u?t.ticklen:0;if(c?g*=-1:l&&(g=0),u&&(d+=g,r)){var f=lib_1.deg2rad(r);d=g*Math.cos(f)+1,h=g*Math.sin(f)}t.showticklabels&&(u||t.showline)&&(d+=.2*t.tickfont.size);var p,m,y,b,v,x={labelStandoff:d+=(t.linewidth||1)/2*(c?-1:1),labelShift:h},I=0,B=t.side,A=t._id.charAt(0),Q=t.tickangle;if("x"===A)b=(v=!c&&"bottom"===B||c&&"top"===B)?1:-1,c&&(b*=-1),p=h*b,m=e+d*b,y=v?1:-.2,90===Math.abs(Q)&&(c?y+=C:y=-90===Q&&"bottom"===B?F:90===Q&&"top"===B?C:.5,I=C/2*(Q/90)),x.xFn=function(t){return t.dx+p+I*t.fontSize},x.yFn=function(t){return t.dy+m+t.fontSize*y},x.anchorFn=function(t,e){if(l){if(o)return"end";if(s)return"start"}return fastIsnumeric(e)&&0!==e&&180!==e?e*b<0!==c?"end":"start":"middle"},x.heightFn=function(e,r,n){return r<-60||r>60?-.5*n:"top"===t.side!==c?-n:0};else if("y"===A){if(b=(v=!c&&"left"===B||c&&"right"===B)?1:-1,c&&(b*=-1),p=d,m=h*b,y=0,c||90!==Math.abs(Q)||(y=-90===Q&&"left"===B||90===Q&&"right"===B?F:.5),c){var _=fastIsnumeric(Q)?+Q:0;if(0!==_){var w=lib_1.deg2rad(_);I=Math.abs(Math.sin(w))*F*b,y=0}}x.xFn=function(t){return t.dx+e-(p+t.fontSize*y)*b+I*t.fontSize},x.yFn=function(t){return t.dy+m+t.fontSize*C},x.anchorFn=function(t,e){return fastIsnumeric(e)&&90===Math.abs(e)?"middle":v?"end":"start"},x.heightFn=function(e,r,n){return"right"===t.side&&(r*=-1),r<-30?-n:r<30?-.5*n:0}}return x},_.drawTicks=function(t,e,r){r=r||{};var n=e._id+"tick",i=r.vals;"period"===e.ticklabelmode&&(i=i.slice()).shift();var a=r.layer.selectAll("path."+n).data(e.ticks?i:[],j);a.exit().remove(),a.enter().append("path").classed(n,1).classed("ticks",1).classed("crisp",!1!==r.crisp).call(color_1.stroke,e.tickcolor).style("stroke-width",drawing_1.crispRound(t,e.tickwidth,1)+"px").attr("d",r.path).style("display",null),ut(e,[I]),a.attr("transform",r.transFn)},_.drawGrid=function(t,e,r){r=r||{};var n=e._id+"grid",i=r.vals,a=r.counterAxis;if(!1===e.showgrid)i=[];else if(a&&_.shouldShowZeroLine(t,e,a))for(var o="array"===e.tickmode,s=0;s<i.length;s++){var l=i[s].x;if(o?!l:Math.abs(l)<e.dtick/100){if(i=i.slice(0,s).concat(i.slice(s+1)),!o)break;s--}}var c=r.layer.selectAll("path."+n).data(i,j);c.exit().remove(),c.enter().append("path").classed(n,1).classed("crisp",!1!==r.crisp),e._gw=drawing_1.crispRound(t,e.gridwidth,1),c.attr("transform",r.transFn).attr("d",r.path).call(color_1.stroke,e.gridcolor||"#ddd").style("stroke-width",e._gw+"px").style("display",null),ut(e,[x]),"function"==typeof r.path&&c.attr("d",r.path)},_.drawZeroLine=function(t,e,r){r=r||r;var n=e._id+"zl",i=_.shouldShowZeroLine(t,e,r.counterAxis),a=r.layer.selectAll("path."+n).data(i?[{x:0,id:e._id}]:[]);a.exit().remove(),a.enter().append("path").classed(n,1).classed("zl",1).classed("crisp",!1!==r.crisp).each((function(){r.layer.selectAll("path").sort((function(t,e){return w(t.id,e.id)}))})),a.attr("transform",r.transFn).attr("d",r.path).call(color_1.stroke,e.zerolinecolor||color_1.defaultLine).style("stroke-width",drawing_1.crispRound(t,e.zerolinewidth,e._gw||1)+"px").style("display",null),ut(e,[v])},_.drawLabels=function(t,r,n){n=n||{};var i=t._fullLayout,a=r._id,o=a.charAt(0),s=n.cls||a+"tick",l=n.vals,c=n.labelFns,u=n.secondary?0:r.tickangle,d=(r._prevTickAngles||{})[s],h=n.layer.selectAll("g."+s).data(r.showticklabels?l:[],j),g=[];function f(t,i){t.each((function(t){var a=d3.select(this),o=a.select(".text-math-group"),s=c.anchorFn(t,i),l=n.transFn.call(a.node(),t)+(fastIsnumeric(i)&&0!=+i?" rotate("+i+","+c.xFn(t)+","+(c.yFn(t)-t.fontSize/2)+")":""),u=svg_text_utils.lineCount(a),d=A*t.fontSize,h=c.heightFn(t,fastIsnumeric(i)?+i:0,(u-1)*d);if(h&&(l+=e(0,h)),o.empty()){var g=a.select("text");g.attr({transform:l,"text-anchor":s}),g.style("opacity",1),r._adjustTickLabelsOverflow&&r._adjustTickLabelsOverflow()}else{var f=drawing_1.bBox(o.node()).width*{end:-.5,start:.5}[s];o.attr("transform",l+e(f,0))}}))}h.enter().append("g").classed(s,1).append("text").attr("text-anchor","middle").each((function(e){var r=d3.select(this),n=t._promises.length;r.call(svg_text_utils.positionText,c.xFn(e),c.yFn(e)).call(drawing_1.font,e.font,e.fontSize,e.fontColor).text(e.text).call(svg_text_utils.convertToTspans,t),t._promises[n]?g.push(t._promises.pop().then((function(){f(r,u)}))):f(r,u)})),ut(r,[B]),h.exit().remove(),n.repositionOnUpdate&&h.each((function(t){d3.select(this).select("text").call(svg_text_utils.positionText,c.xFn(t),c.yFn(t))})),r._adjustTickLabelsOverflow=function(){var e=r.ticklabeloverflow;if(e&&"allow"!==e){var n=-1!==e.indexOf("hide"),a="x"===r._id.charAt(0),o=0,s=a?t._fullLayout.width:t._fullLayout.height;if(-1!==e.indexOf("domain")){var l=lib_1.simpleMap(r.range,r.r2l);o=r.l2p(l[0])+r._offset,s=r.l2p(l[1])+r._offset}var c=Math.min(o,s),u=Math.max(o,s),d=r.side,g=1/0,f=-1/0;for(var p in h.each((function(t){var e=d3.select(this);if(e.select(".text-math-group").empty()){var i=drawing_1.bBox(e.node()),o=0;a?(i.right>u||i.left<c)&&(o=1):(i.bottom>u||i.top+(r.tickangle?0:t.fontSize/4)<c)&&(o=1);var s=e.select("text");o?n&&s.style("opacity",0):(s.style("opacity",1),g="bottom"===d||"right"===d?Math.min(g,a?i.top:i.left):-1/0,f="top"===d||"left"===d?Math.max(f,a?i.bottom:i.right):1/0)}})),i._plots){var m=i._plots[p];if(r._id===m.xaxis._id||r._id===m.yaxis._id){var y=a?m.yaxis:m.xaxis;y&&(y["_visibleLabelMin_"+r._id]=g,y["_visibleLabelMax_"+r._id]=f)}}}},r._hideCounterAxisInsideTickLabels=function(t){var e="x"===r._id.charAt(0),n=[];for(var a in i._plots){var o=i._plots[a];r._id!==o.xaxis._id&&r._id!==o.yaxis._id||n.push(e?o.yaxis:o.xaxis)}n.forEach((function(e,n){e&&ct(e)&&(t||[v,x,I,B]).forEach((function(t){var a="tick"===t.K&&"text"===t.L&&"period"===r.ticklabelmode,o=i._plots[r._mainSubplot];(t.K===v.K?o.zerolinelayer.selectAll("."+r._id+"zl"):t.K===x.K?o.gridlayer.selectAll("."+r._id):o[r._id.charAt(0)+"axislayer"]).each((function(){var i=d3.select(this);t.L&&(i=i.selectAll(t.L)),i.each((function(i){var o=r.l2p(a?J(i):i.x)+r._offset,s=d3.select(this);o<r["_visibleLabelMax_"+e._id]&&o>r["_visibleLabelMin_"+e._id]?s.style("display","none"):"tick"!==t.K||n||s.style("display",null)}))}))}))}))},f(h,d+1?d:u);var p=null;r._selections&&(r._selections[s]=h);var m=[function(){return g.length&&Promise.all(g)}];r.automargin&&i._redrawFromAutoMarginCount&&90===d?(p=90,m.push((function(){f(h,d)}))):m.push((function(){if(f(h,u),l.length&&"x"===o&&!fastIsnumeric(u)&&("log"!==r.type||"D"!==String(r.dtick).charAt(0))){p=0;var t,e=0,i=[];if(h.each((function(t){e=Math.max(e,t.fontSize);var n=r.l2p(t.x),a=tt(this),o=drawing_1.bBox(a.node());i.push({top:0,bottom:10,height:10,left:n-o.width/2,right:n+o.width/2+2,width:o.width+2})})),"boundaries"!==r.tickson&&!r.showdividers||n.secondary){var a=l.length,s=Math.abs((l[a-1].x-l[0].x)*r._m)/(a-1),c=r.ticklabelposition||"",d=function(t){return-1!==c.indexOf(t)},g=d("top"),m=d("left"),y=d("right"),b=d("bottom")||m||g||y?(r.tickwidth||0)+6:0,v=s<2.5*e||"multicategory"===r.type||"realaxis"===r._name;for(t=0;t<i.length-1;t++)if(lib_1.bBoxIntersect(i[t],i[t+1],b)){p=v?90:30;break}}else{var x=2;for(r.ticks&&(x+=r.tickwidth/2),t=0;t<i.length;t++){var I=l[t].xbnd,B=i[t];if(null!==I[0]&&B.left-r.l2p(I[0])<x||null!==I[1]&&r.l2p(I[1])-B.right<x){p=90;break}}}p&&f(h,p)}})),r._tickAngles&&m.push((function(){r._tickAngles[s]=null===p?fastIsnumeric(u)?u:0:p}));var y=r._anchorAxis;y&&y.autorange&&ct(r)&&!U(i,r._id)&&(i._insideTickLabelsAutorange||(i._insideTickLabelsAutorange={}),i._insideTickLabelsAutorange[y._name+".autorange"]=y.autorange,m.push((function(){h.each((function(t,e){var n=tt(this);n.select(".text-math-group").empty()&&(r._vals[e].bb=drawing_1.bBox(n.node()))}))})));var b=lib_1.syncOrAsync(m);return b&&b.then&&t._promises.push(b),b},_.getPxPosition=function(t,e){var r,n=t._fullLayout._size,i=e._id.charAt(0),a=e.side;return"free"!==e.anchor?r=e._anchorAxis:"x"===i?r={_offset:n.t+(1-(e.position||0))*n.h,_length:0}:"y"===i&&(r={_offset:n.l+(e.position||0)*n.w,_length:0}),"top"===a||"left"===a?r._offset:"bottom"===a||"right"===a?r._offset+r._length:void 0},_.shouldShowZeroLine=function(t,e,r){var n=lib_1.simpleMap(e.range,e.r2l);return n[0]*n[1]<=0&&e.zeroline&&("linear"===e.type||"-"===e.type)&&!(e.rangebreaks&&e.maskBreaks(0)===b)&&(q(e,0)||!function(t,e,r,n){var i=r._mainAxis;if(!i)return;var a=t._fullLayout,o=e._id.charAt(0),s=_.counterLetter(e._id),l=e._offset+(Math.abs(n[0])<Math.abs(n[1])==("x"===o)?0:e._length);function c(t){if(!t.showline||!t.linewidth)return!1;var r=Math.max((t.linewidth+e.zerolinewidth)/2,1);function n(t){return"number"==typeof t&&Math.abs(t-l)<r}if(n(t._mainLinePosition)||n(t._mainMirrorPosition))return!0;var i=t._linepositions||{};for(var a in i)if(n(i[a][0])||n(i[a][1]))return!0}var u=a._plots[r._mainSubplot];if(!(u.mainplotinfo||u).overlays.length)return c(r);for(var d=_.list(t,s),h=0;h<d.length;h++){var g=d[h];if(g._mainAxis===i&&c(g))return!0}}(t,e,r,n)||function(t,e){for(var r=t._fullData,n=e._mainSubplot,i=e._id.charAt(0),a=0;a<r.length;a++){var o=r[a];if(!0===o.visible&&o.xaxis+o.yaxis===n){if(registry.traceIs(o,"bar-like")&&o.orientation==={x:"h",y:"v"}[i])return!0;if(o.fill&&o.fill.charAt(o.fill.length-1)===i)return!0}}return!1}(t,e))},_.clipEnds=function(t,e){return e.filter((function(e){return q(t,e.x)}))},_.allowAutoMargin=function(t){for(var e=_.list(t,"",!0),r=0;r<e.length;r++){var n=e[r];n.automargin&&(plots_1.allowAutoMargin(t,et(n)),n.mirror&&plots_1.allowAutoMargin(t,rt(n))),registry.getComponentMethod("rangeslider","isVisible")(n)&&plots_1.allowAutoMargin(t,nt(n))}},_.swap=function(t,e){for(var r=function(t,e){var r,n,i=[];for(r=0;r<e.length;r++){var a=[],o=t._fullData[e[r]].xaxis,s=t._fullData[e[r]].yaxis;if(o&&s){for(n=0;n<i.length;n++)-1===i[n].x.indexOf(o)&&-1===i[n].y.indexOf(s)||a.push(n);if(a.length){var l,c=i[a[0]];if(a.length>1)for(n=1;n<a.length;n++)l=i[a[n]],it(c.x,l.x),it(c.y,l.y);it(c.x,[o]),it(c.y,[s])}else i.push({x:[o],y:[s]})}}return i}(t,e),n=0;n<r.length;n++)at(t,r[n].x,r[n].y)}})),rootPosition={left:0,top:0},mouseEventOffset_1=mouseEventOffset;function mouseEventOffset(t,e,r){e=e||t.currentTarget||t.srcElement,Array.isArray(r)||(r=[0,0]);var n=t.clientX||0,i=t.clientY||0,a=getBoundingClientOffset(e);return r[0]=n-a.left,r[1]=i-a.top,r}function getBoundingClientOffset(t){return t===window||t===document||t===document.body?rootPosition:t.getBoundingClientRect()}var align=function(t,e,r,n,i){var a=(t-r)/(n-r),o=a+e/(n-r),s=(a+o)/2;return"left"===i||"bottom"===i?a:"center"===i||"middle"===i?s:"right"===i||"top"===i?o:a<2/3-s?a:o>4/3-s?o:s},cursorset=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]],cursor=function(t,e,r,n){return t="left"===r?0:"center"===r?1:"right"===r?2:lib_1.constrain(Math.floor(3*t),0,2),e="bottom"===n?0:"middle"===n?1:"top"===n?2:lib_1.constrain(Math.floor(3*e),0,2),cursorset[e][t]},unhover_1=createCommonjsModule((function(t){var e=dom.getGraphDiv,r=t.exports={};r.wrapped=function(t,n,i){(t=e(t))._fullLayout&&throttle.clear(t._fullLayout._uid+constants$d.HOVERID),r.raw(t,n,i)},r.raw=function(t,e){var r=t._fullLayout,n=t._hoverdata;e||(e={}),e.target&&!t._dragged&&!1===events.triggerHandler(t,"plotly_beforehover",e)||(r._hoverlayer.selectAll("g").remove(),r._hoverlayer.selectAll("line").remove(),r._hoverlayer.selectAll("circle").remove(),t._hoverdata=void 0,e.target&&n&&t.emit("plotly_unhover",{event:e,points:n}))}})),dragelement=createCommonjsModule((function(t){var e=lib_1.removeElement,r=t.exports={};function n(){var t=document.createElement("div");t.className="dragcover";var e=t.style;return e.position="fixed",e.left=0,e.right=0,e.top=0,e.bottom=0,e.zIndex=999999999,e.background="none",document.body.appendChild(t),t}function i(t){return mouseEventOffset_1(t.changedTouches?t.changedTouches[0]:t,document.body)}r.align=align,r.getCursor=cursor,r.unhover=unhover_1.wrapped,r.unhoverRaw=unhover_1.raw,r.init=function(t){var a,o,s,l,c,u,d,h,g=t.gd,f=1,p=g._context.doubleClickDelay,m=t.element;g._mouseDownTime||(g._mouseDownTime=0),m.style.pointerEvents="all",m.onmousedown=b,m.ontouchstart=b;var y=t.clampFn||function(t,e,r){return Math.abs(t)<r&&(t=0),Math.abs(e)<r&&(e=0),[t,e]};function b(e){g._dragged=!1,g._dragging=!0;var r=i(e);a=r[0],o=r[1],d=e.target,u=e,h=2===e.buttons||e.ctrlKey,void 0===e.clientX&&void 0===e.clientY&&(e.clientX=a,e.clientY=o),(s=(new Date).getTime())-g._mouseDownTime<p?f+=1:(f=1,g._mouseDownTime=s),t.prepFn&&t.prepFn(e,a,o),hasHover_1&&!h?(c=n()).style.cursor=window.getComputedStyle(m).cursor:hasHover_1||(c=document,l=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(m).cursor),document.addEventListener("mouseup",x),document.addEventListener("touchend",x),!1!==t.dragmode&&(e.preventDefault(),document.addEventListener("mousemove",v),document.addEventListener("touchmove",v,{passive:!1}))}function v(e){e.preventDefault();var n=i(e),s=t.minDrag||constants$c.MINDRAG,l=y(n[0]-a,n[1]-o,s),c=l[0],u=l[1];(c||u)&&(g._dragged=!0,r.unhover(g,e)),g._dragged&&t.moveFn&&!h&&(g._dragdata={element:m,dx:c,dy:u},t.moveFn(c,u))}function x(r){if(delete g._dragdata,!1!==t.dragmode&&(r.preventDefault(),document.removeEventListener("mousemove",v),document.removeEventListener("touchmove",v)),document.removeEventListener("mouseup",x),document.removeEventListener("touchend",x),hasHover_1?e(c):l&&(c.documentElement.style.cursor=l,l=null),g._dragging){if(g._dragging=!1,(new Date).getTime()-g._mouseDownTime>p&&(f=Math.max(f-1,1)),g._dragged)t.doneFn&&t.doneFn();else if(t.clickFn&&t.clickFn(f,u),!h){var n;try{n=new MouseEvent("click",r)}catch(t){var a=i(r);(n=document.createEvent("MouseEvents")).initMouseEvent("click",r.bubbles,r.cancelable,r.view,r.detail,r.screenX,r.screenY,a[0],a[1],r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget)}d.dispatchEvent(n)}g._dragging=!1,g._dragged=!1}else g._dragged=!1}},r.coverSlip=n})),setcursor=function(t,e){(t.attr("class")||"").split(" ").forEach((function(e){0===e.indexOf("cursor-")&&t.classed(e,!1)})),e&&t.classed("cursor-"+e,!0)},STASHATTR="data-savedcursor",NO_CURSOR="!!",override_cursor=function(t,e){var r=t.attr(STASHATTR);if(e){if(!r){for(var n=(t.attr("class")||"").split(" "),i=0;i<n.length;i++){var a=n[i];0===a.indexOf("cursor-")&&t.attr(STASHATTR,a.substr(7)).classed(a,!1)}t.attr(STASHATTR)||t.attr(STASHATTR,NO_CURSOR)}setcursor(t,e)}else r&&(t.attr(STASHATTR,null),r===NO_CURSOR?setcursor(t):setcursor(t,r))},attributes$l={bgcolor:{valType:"color",editType:"legend",description:["Sets the legend background color.","Defaults to `layout.paper_bgcolor`."].join(" ")},bordercolor:{valType:"color",dflt:attributes$q.defaultLine,editType:"legend",description:"Sets the color of the border enclosing the legend."},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend",description:"Sets the width (in px) of the border enclosing the legend."},font:font_attributes({editType:"legend",description:"Sets the font used to text the legend items."}),grouptitlefont:font_attributes({editType:"legend",description:["Sets the font for group titles in legend.","Defaults to `legend.font` with its size increased about 10%."].join(" ")}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend",description:"Sets the orientation of the legend."},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend",description:["Determines the order at which the legend items are displayed.","If *normal*, the items are displayed top-to-bottom in the same","order as the input data.","If *reversed*, the items are displayed in the opposite order","as *normal*.","If *grouped*, the items are displayed in groups","(when a trace `legendgroup` is provided).","if *grouped+reversed*, the items are displayed in the opposite order","as *grouped*."].join(" ")},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend",description:["Sets the amount of vertical space (in px) between legend groups."].join(" ")},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend",description:["Determines if the legend items symbols scale with their corresponding *trace* attributes","or remain *constant* independent of the symbol size on the graph."].join(" ")},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend",description:"Sets the width (in px) of the legend item symbols (the part other than the title.text)."},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend",description:["Determines the behavior on legend item click.","*toggle* toggles the visibility of the item clicked on the graph.","*toggleothers* makes the clicked item the sole visible item on the graph.","*false* disables legend item click interactions."].join(" ")},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend",description:["Determines the behavior on legend item double-click.","*toggle* toggles the visibility of the item clicked on the graph.","*toggleothers* makes the clicked item the sole visible item on the graph.","*false* disables legend item double-click interactions."].join(" ")},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend",description:["Determines the behavior on legend group item click.","*toggleitem* toggles the visibility of the individual item clicked on the graph.","*togglegroup* toggles the visibility of all items in the same legendgroup as the item clicked on the graph."].join(" ")},x:{valType:"number",min:-2,max:3,editType:"legend",description:["Sets the x position (in normalized coordinates) of the legend.","Defaults to *1.02* for vertical legends and","defaults to *0* for horizontal legends."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend",description:["Sets the legend's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the legend.","Value *auto* anchors legends to the right for `x` values greater than or equal to 2/3,","anchors legends to the left for `x` values less than or equal to 1/3 and","anchors legends with respect to their center otherwise."].join(" ")},y:{valType:"number",min:-2,max:3,editType:"legend",description:["Sets the y position (in normalized coordinates) of the legend.","Defaults to *1* for vertical legends,","defaults to *-0.1* for horizontal legends on graphs w/o range sliders and","defaults to *1.1* for horizontal legends on graph with one or multiple range sliders."].join(" ")},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend",description:["Sets the legend's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the legend.","Value *auto* anchors legends at their bottom for `y` values less than or equal to 1/3,","anchors legends to at their top for `y` values greater than or equal to 2/3 and","anchors legends with respect to their middle otherwise."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of legend-driven changes in trace and pie label","visibility. Defaults to `layout.uirevision`."].join(" ")},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend",description:["Sets the vertical alignment of the symbols with respect to their associated text."].join(" ")},title:{text:{valType:"string",dflt:"",editType:"legend",description:["Sets the title of the legend."].join(" ")},font:font_attributes({editType:"legend",description:["Sets this legend's title font.","Defaults to `legend.font` with its size increased about 20%."].join(" ")}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend",description:["Determines the location of legend's title","with respect to the legend items.","Defaulted to *top* with `orientation` is *h*.","Defaulted to *left* with `orientation` is *v*.","The *top left* options could be used to expand","legend area in both x and y sides."].join(" ")},editType:"legend"},editType:"legend"},isGrouped=function(t){return-1!==(t.traceorder||"").indexOf("grouped")},isVertical=function(t){return"h"!==t.orientation},isReversed=function(t){return-1!==(t.traceorder||"").indexOf("reversed")},helpers$9={isGrouped:isGrouped,isVertical:isVertical,isReversed:isReversed},defaults$j=function(t,e,r){var n,i=t.legend||{},a=plot_template.newContainer(e,"legend");function o(t,e){return lib_1.coerce(i,a,attributes$l,t,e)}for(var s=function(t,e){var r=n._input,i=n;return lib_1.coerce(r,i,attributes$r,t,e)},l=e.font||{},c=lib_1.coerceFont(o,"grouptitlefont",lib_1.extendFlat({},l,{size:Math.round(1.1*l.size)})),u=0,d=!1,h="normal",g=0;g<r.length;g++)(n=r[g]).visible&&((n.showlegend||n._dfltShowLegend&&!(n._module&&n._module.attributes&&n._module.attributes.showlegend&&!1===n._module.attributes.showlegend.dflt))&&(u++,n.showlegend&&(d=!0,(registry.traceIs(n,"pie-like")||!0===n._input.showlegend)&&u++),lib_1.coerceFont(s,"legendgrouptitle.font",c)),(registry.traceIs(n,"bar")&&"stack"===e.barmode||-1!==["tonextx","tonexty"].indexOf(n.fill))&&(h=helpers$9.isGrouped({traceorder:h})?"grouped+reversed":"reversed"),void 0!==n.legendgroup&&""!==n.legendgroup&&(h=helpers$9.isReversed({traceorder:h})?"reversed+grouped":"grouped"));var f=lib_1.coerce(t,e,layout_attributes$4,"showlegend",d&&u>1);if(!1===f&&(e.legend=void 0),(!1!==f||i.uirevision)&&(o("uirevision",e.uirevision),!1!==f)){o("bgcolor",e.paper_bgcolor),o("bordercolor"),o("borderwidth");var p,m,y,b=lib_1.coerceFont(o,"font",e.font),v="h"===o("orientation");if(v?(p=0,registry.getComponentMethod("rangeslider","isVisible")(t.xaxis)?(m=1.1,y="bottom"):(m=-.1,y="top")):(p=1.02,m=1,y="auto"),o("traceorder",h),helpers$9.isGrouped(e.legend)&&o("tracegroupgap"),o("itemsizing"),o("itemwidth"),o("itemclick"),o("itemdoubleclick"),o("groupclick"),o("x",p),o("xanchor"),o("y",m),o("yanchor",y),o("valign"),lib_1.noneOrAll(i,a,["x","y"]),o("title.text")){o("title.side",v?"left":"top");var x=lib_1.extendFlat({},b,{size:lib_1.bigFont(b.size)});lib_1.coerceFont(o,"title.font",x)}}},SHOWISOLATETIP=!0,handle_click=function(t,e,r){var n=e._fullLayout;if(!e._dragged&&!e._editing){var i,a=n.legend.itemclick,o=n.legend.itemdoubleclick,s=n.legend.groupclick;if(1===r&&"toggle"===a&&"toggleothers"===o&&SHOWISOLATETIP&&e.data&&e._context.showTips?(lib_1.notifier(lib_1._(e,"Double-click on legend to isolate one trace"),"long"),SHOWISOLATETIP=!1):SHOWISOLATETIP=!1,1===r?i=a:2===r&&(i=o),i){var l="togglegroup"===s,c=n.hiddenlabels?n.hiddenlabels.slice():[],u=t.data()[0][0];if(!u.groupTitle||!u.noClick){var d,h,g,f,p,m=e._fullData,y=u.trace,b=y.legendgroup,v={},x=[],I=[],B=[];if(registry.traceIs(y,"pie-like")){var C=u.label,F=c.indexOf(C);"toggle"===i?-1===F?c.push(C):c.splice(F,1):"toggleothers"===i&&(c=[],e.calcdata[0].forEach((function(t){C!==t.label&&c.push(t.label)})),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===c.length&&-1===F&&(c=[])),registry.call("_guiRelayout",e,"hiddenlabels",c)}else{var A,Q=b&&b.length,_=[];if(Q)for(d=0;d<m.length;d++)(A=m[d]).visible&&A.legendgroup===b&&_.push(d);if("toggle"===i){var w;switch(y.visible){case!0:w="legendonly";break;case!1:w=!1;break;case"legendonly":w=!0}if(Q)if(l)for(d=0;d<m.length;d++)!1!==m[d].visible&&m[d].legendgroup===b&&N(m[d],w);else N(y,w);else N(y,w)}else if("toggleothers"===i){var U,S,E,L,T=!0;for(d=0;d<m.length;d++)if(U=m[d]===y,E=!0!==m[d].showlegend,!(U||E||(S=Q&&m[d].legendgroup===b)||!0!==m[d].visible||registry.traceIs(m[d],"notLegendIsolatable"))){T=!1;break}for(d=0;d<m.length;d++)if(!1!==m[d].visible&&!registry.traceIs(m[d],"notLegendIsolatable"))switch(y.visible){case"legendonly":N(m[d],!0);break;case!0:L=!!T||"legendonly",U=m[d]===y,E=!0!==m[d].showlegend&&!m[d].legendgroup,S=U||Q&&m[d].legendgroup===b,N(m[d],!(!S&&!E)||L)}}for(d=0;d<I.length;d++)if(g=I[d]){var R=g.constructUpdate(),k=Object.keys(R);for(h=0;h<k.length;h++)f=k[h],(v[f]=v[f]||[])[B[d]]=R[f]}for(p=Object.keys(v),d=0;d<p.length;d++)for(f=p[d],h=0;h<x.length;h++)v[f].hasOwnProperty(h)||(v[f][h]=void 0);registry.call("_guiRestyle",e,v,x)}}}}function G(t,e,r){var n=x.indexOf(t),i=v[e];return i||(i=v[e]=[]),-1===x.indexOf(t)&&(x.push(t),n=x.length-1),i[n]=r,n}function N(t,e){if(!u.groupTitle||l){var r=t._fullInput;if(registry.hasTransform(r,"groupby")){var n=I[r.index];if(!n){var i=registry.getTransformIndices(r,"groupby"),a=i[i.length-1];n=lib_1.keyedContainer(r,"transforms["+a+"].styles","target","value.visible"),I[r.index]=n}var o=n.get(t._group);void 0===o&&(o=!0),!1!==o&&n.set(t._group,e),B[r.index]=G(r.index,"visible",!1!==r.visible)}else{var s=!1!==r.visible&&e;G(r.index,"visible",s)}}}},constants$b={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5},get_legend_data=function(t,e){var r,n,i=e._inHover,a=helpers$9.isGrouped(e),o=helpers$9.isReversed(e),s={},l=[],c=!1,u={},d=0,h=0;function g(t,r){if(""!==t&&helpers$9.isGrouped(e))-1===l.indexOf(t)?(l.push(t),c=!0,s[t]=[r]):s[t].push(r);else{var n="~~i"+d;l.push(n),s[n]=[r],d++}}for(r=0;r<t.length;r++){var f=t[r],p=f[0],m=p.trace,y=m.legendgroup;if(i||m.visible&&m.showlegend)if(registry.traceIs(m,"pie-like"))for(u[y]||(u[y]={}),n=0;n<f.length;n++){var b=f[n].label;u[y][b]||(g(y,{label:b,color:f[n].color,i:f[n].i,trace:m,pts:f[n].pts}),u[y][b]=!0,h=Math.max(h,(b||"").length))}else g(y,p),h=Math.max(h,(m.name||"").length)}if(!l.length)return[];var v=!c||!a,x=[];for(r=0;r<l.length;r++){var I=s[l[r]];v?x.push(I[0]):x.push(I)}for(v&&(x=[x]),r=0;r<x.length;r++){var B=1/0;for(n=0;n<x[r].length;n++){var C=x[r][n].trace.legendrank;B>C&&(B=C)}x[r][0]._groupMinRank=B,x[r][0]._preGroupSort=r}var F=function(t,e){return t.trace.legendrank-e.trace.legendrank||t._preSort-e._preSort};for(x.forEach((function(t,e){t[0]._preGroupSort=e})),x.sort((function(t,e){return t[0]._groupMinRank-e[0]._groupMinRank||t[0]._preGroupSort-e[0]._preGroupSort})),r=0;r<x.length;r++){x[r].forEach((function(t,e){t._preSort=e})),x[r].sort(F);var A=x[r][0].trace,Q=null;for(n=0;n<x[r].length;n++){var _=x[r][n].trace.legendgrouptitle;if(_&&_.text){Q=_,i&&(_.font=e._groupTitleFont);break}}if(o&&x[r].reverse(),Q){var w=!1;for(n=0;n<x[r].length;n++)if(registry.traceIs(x[r][n].trace,"pie-like")){w=!0;break}x[r].unshift({i:-1,groupTitle:Q,noClick:w,trace:{showlegend:A.showlegend,legendgroup:A.legendgroup,visible:"toggleitem"===e.groupclick||A.visible}})}for(n=0;n<x[r].length;n++)x[r][n]=[x[r][n]]}return e._lgroupsLength=x.length,e._maxNameLength=h,x},helpers$8=createCommonjsModule((function(t,e){function r(t){return-1!==t.indexOf("e")?t.replace(/[.]?0+e/,"e"):-1!==t.indexOf(".")?t.replace(/[.]?0+$/,""):t}e.formatPiePercent=function(t,e){var n=r((100*t).toPrecision(3));return lib_1.numSeparate(n,e)+"%"},e.formatPieValue=function(t,e){var n=r(t.toPrecision(10));return lib_1.numSeparate(n,e)},e.getFirstFilled=function(t,e){if(Array.isArray(t))for(var r=0;r<e.length;r++){var n=t[e[r]];if(n||0===n||""===n)return n}},e.castOption=function(t,r){return Array.isArray(t)?e.getFirstFilled(t,r):t||void 0},e.getRotationAngle=function(t){return("auto"===t?0:t)*Math.PI/180}})),castOption=helpers$8.castOption,style_one=function(t,e,r){var n=r.marker.line,i=castOption(n.color,e.pts)||color_1.defaultLine,a=castOption(n.width,e.pts)||0;t.style("stroke-width",a).call(color_1.fill,e.color).call(color_1.stroke,i)},strTranslate$9=lib_1.strTranslate,extractOpts$1=helpers$b.extractOpts,pieCastOption=helpers$8.castOption,CST_MARKER_SIZE=12,CST_LINE_WIDTH=5,CST_MARKER_LINE_WIDTH=2,MAX_LINE_WIDTH=10,MAX_MARKER_LINE_WIDTH=5,style$3=function(t,e,r){var n=e._fullLayout;r||(r=n.legend);var i="constant"===r.itemsizing,a=r.itemwidth,o=(a+2*constants$b.itemGap)/2,s=strTranslate$9(o,0),l=function(t,e,r,n){var a;if(t+1)a=t;else{if(!(e&&e.width>0))return 0;a=e.width}return i?n:Math.min(a,r)};function c(t,n,i){var a=t[0].trace,o=a.marker||{},c=o.line||{},u=i?a.visible&&a.type===i:registry.traceIs(a,"bar"),d=d3.select(n).select("g.legendpoints").selectAll("path.legend"+i).data(u?[t]:[]);d.enter().append("path").classed("legend"+i,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",s),d.exit().remove(),d.each((function(t){var n=d3.select(this),i=t[0],s=l(i.mlw,o.line,MAX_MARKER_LINE_WIDTH,CST_MARKER_LINE_WIDTH);n.style("stroke-width",s+"px");var u=i.mcc;if(!r._inHover&&"mc"in i){var d=extractOpts$1(o),h=d.mid;void 0===h&&(h=(d.max+d.min)/2),u=drawing_1.tryColorscale(o,"")(h)}var g=u||i.mc||o.color,f=o.pattern,p=f&&drawing_1.getPatternAttr(f.shape,0,"");if(p){var m=drawing_1.getPatternAttr(f.bgcolor,0,null),y=drawing_1.getPatternAttr(f.fgcolor,0,null),b=f.fgopacity,v=dimAttr(f.size,8,10),x=dimAttr(f.solidity,.5,1),I="legend-"+a.uid;n.call(drawing_1.pattern,"legend",e,I,p,v,x,u,f.fillmode,m,y,b)}else n.call(color_1.fill,g);s&&color_1.stroke(n,i.mlc||c.color)}))}function u(t,e,r){var n=t[0],i=n.trace,a=r?i.visible&&i.type===r:registry.traceIs(i,r),o=d3.select(e).select("g.legendpoints").selectAll("path.legend"+r).data(a?[t]:[]);if(o.enter().append("path").classed("legend"+r,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",s),o.exit().remove(),o.size()){var c=(i.marker||{}).line,u=l(pieCastOption(c.width,n.pts),c,MAX_MARKER_LINE_WIDTH,CST_MARKER_LINE_WIDTH),d=lib_1.minExtend(i,{marker:{line:{width:u}}});d.marker.line.color=c.color;var h=lib_1.minExtend(n,{trace:d});style_one(o,h,d)}}t.each((function(t){var e=d3.select(this),n=lib_1.ensureSingle(e,"g","layers");n.style("opacity",t[0].trace.opacity);var i=r.valign,a=t[0].lineHeight,o=t[0].height;if("middle"!==i&&a&&o){var s={top:1,bottom:-1}[i]*(.5*(a-o+3));n.attr("transform",strTranslate$9(0,s))}else n.attr("transform",null);n.selectAll("g.legendfill").data([t]).enter().append("g").classed("legendfill",!0),n.selectAll("g.legendlines").data([t]).enter().append("g").classed("legendlines",!0);var l=n.selectAll("g.legendsymbols").data([t]);l.enter().append("g").classed("legendsymbols",!0),l.selectAll("g.legendpoints").data([t]).enter().append("g").classed("legendpoints",!0)})).each((function(t){var r,n=t[0].trace,i=[];if(n.visible)switch(n.type){case"histogram2d":case"heatmap":i=[["M-15,-2V4H15V-2Z"]],r=!0;break;case"choropleth":case"choroplethmapbox":i=[["M-6,-6V6H6V-6Z"]],r=!0;break;case"densitymapbox":i=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],r="radial";break;case"cone":i=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],r=!1;break;case"streamtube":i=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],r=!1;break;case"surface":i=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],r=!0;break;case"mesh3d":i=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],r=!1;break;case"volume":i=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],r=!0;break;case"isosurface":i=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],r=!1}var a=d3.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(i);a.enter().append("path").classed("legend3dandfriends",!0).attr("transform",s).style("stroke-miterlimit",1),a.exit().remove(),a.each((function(t,i){var a,o=d3.select(this),s=extractOpts$1(n),l=s.colorscale,c=s.reversescale;if(l){if(!r){var u=l.length;a=0===i?l[c?u-1:0][1]:1===i?l[c?0:u-1][1]:l[Math.floor((u-1)/2)][1]}}else{var d=n.vertexcolor||n.facecolor||n.color;a=lib_1.isArrayOrTypedArray(d)?d[i]||d[0]:d}o.attr("d",t[0]),a?o.call(color_1.fill,a):o.call((function(t){if(t.size()){var i="legendfill-"+n.uid;drawing_1.gradient(t,e,i,getGradientDirection(c,"radial"===r),l,"fill")}}))}))})).each((function(t){var e=t[0].trace,r="waterfall"===e.type;if(t[0]._distinct&&r){var n=t[0].trace[t[0].dir].marker;return t[0].mc=n.color,t[0].mlw=n.line.width,t[0].mlc=n.line.color,c(t,this,"waterfall")}var i=[];e.visible&&r&&(i=t[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var a=d3.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(i);a.enter().append("path").classed("legendwaterfall",!0).attr("transform",s).style("stroke-miterlimit",1),a.exit().remove(),a.each((function(t){var r=d3.select(this),n=e[t[0]].marker,i=l(void 0,n.line,MAX_MARKER_LINE_WIDTH,CST_MARKER_LINE_WIDTH);r.attr("d",t[1]).style("stroke-width",i+"px").call(color_1.fill,n.color),i&&r.call(color_1.stroke,n.line.color)}))})).each((function(t){c(t,this,"funnel")})).each((function(t){c(t,this)})).each((function(t){var r=t[0].trace,n=d3.select(this).select("g.legendpoints").selectAll("path.legendbox").data(r.visible&&registry.traceIs(r,"box-violin")?[t]:[]);n.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",s),n.exit().remove(),n.each((function(){var t=d3.select(this);if("all"!==r.boxpoints&&"all"!==r.points||0!==color_1.opacity(r.fillcolor)||0!==color_1.opacity((r.line||{}).color)){var a=l(void 0,r.line,MAX_MARKER_LINE_WIDTH,CST_MARKER_LINE_WIDTH);t.style("stroke-width",a+"px").call(color_1.fill,r.fillcolor),a&&color_1.stroke(t,r.line.color)}else{var o=lib_1.minExtend(r,{marker:{size:i?CST_MARKER_SIZE:lib_1.constrain(r.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});n.call(drawing_1.pointStyle,o,e)}}))})).each((function(t){u(t,this,"funnelarea")})).each((function(t){u(t,this,"pie")})).each((function(t){var r,n,i=getStyleGuide(t),o=i.showFill,s=i.showLine,c=i.showGradientLine,u=i.showGradientFill,d=i.anyFill,h=i.anyLine,g=t[0],f=g.trace,p=extractOpts$1(f),m=p.colorscale,y=p.reversescale,b=function(t){if(t.size())if(o)drawing_1.fillGroupStyle(t,e);else{var r="legendfill-"+f.uid;drawing_1.gradient(t,e,r,getGradientDirection(y),m,"fill")}},v=subtypes.hasMarkers(f)||!d?"M5,0":h?"M5,-2":"M5,-3",x=d3.select(this),I=x.select(".legendfill").selectAll("path").data(o||u?[t]:[]);if(I.enter().append("path").classed("js-fill",!0),I.exit().remove(),I.attr("d",v+"h"+a+"v6h-"+a+"z").call(b),s||c){var B=l(void 0,f.line,MAX_LINE_WIDTH,CST_LINE_WIDTH);n=lib_1.minExtend(f,{line:{width:B}}),r=[lib_1.minExtend(g,{trace:n})]}var C=x.select(".legendlines").selectAll("path").data(s||c?[r]:[]);C.enter().append("path").classed("js-line",!0),C.exit().remove(),C.attr("d",v+(c?"l"+a+",0.0001":"h"+a)).call(s?drawing_1.lineGroupStyle:function(t){if(t.size()){var r="legendline-"+f.uid;drawing_1.lineGroupStyle(t),drawing_1.gradient(t,e,r,getGradientDirection(y),m,"stroke")}})})).each((function(t){var r,n,a=getStyleGuide(t),o=a.anyFill,l=a.anyLine,c=a.showLine,u=a.showMarker,d=t[0],h=d.trace,g=!u&&!l&&!o&&subtypes.hasText(h);function f(t,e,r,n){var a=lib_1.nestedProperty(h,t).get(),o=lib_1.isArrayOrTypedArray(a)&&e?e(a):a;if(i&&o&&void 0!==n&&(o=n),r){if(o<r[0])return r[0];if(o>r[1])return r[1]}return o}function p(t){return d._distinct&&d.index&&t[d.index]?t[d.index]:t[0]}if(u||g||c){var m={},y={};if(u){m.mc=f("marker.color",p),m.mx=f("marker.symbol",p),m.mo=f("marker.opacity",lib_1.mean,[.2,1]),m.mlc=f("marker.line.color",p),m.mlw=f("marker.line.width",lib_1.mean,[0,5],CST_MARKER_LINE_WIDTH),y.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var b=f("marker.size",lib_1.mean,[2,16],CST_MARKER_SIZE);m.ms=b,y.marker.size=b}c&&(y.line={width:f("line.width",p,[0,10],CST_LINE_WIDTH)}),g&&(m.tx="Aa",m.tp=f("textposition",p),m.ts=10,m.tc=f("textfont.color",p),m.tf=f("textfont.family",p)),r=[lib_1.minExtend(d,m)],(n=lib_1.minExtend(h,y)).selectedpoints=null,n.texttemplate=null}var v=d3.select(this).select("g.legendpoints"),x=v.selectAll("path.scatterpts").data(u?r:[]);x.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",s),x.exit().remove(),x.call(drawing_1.pointStyle,n,e),u&&(r[0].mrc=3);var I=v.selectAll("g.pointtext").data(g?r:[]);I.enter().append("g").classed("pointtext",!0).append("text").attr("transform",s),I.exit().remove(),I.selectAll("text").call(drawing_1.textPointStyle,n,e)})).each((function(t){var e=t[0].trace,r=d3.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(e.visible&&"candlestick"===e.type?[t,t]:[]);r.enter().append("path").classed("legendcandle",!0).attr("d",(function(t,e){return e?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"})).attr("transform",s).style("stroke-miterlimit",1),r.exit().remove(),r.each((function(t,r){var n=d3.select(this),i=e[r?"increasing":"decreasing"],a=l(void 0,i.line,MAX_MARKER_LINE_WIDTH,CST_MARKER_LINE_WIDTH);n.style("stroke-width",a+"px").call(color_1.fill,i.fillcolor),a&&color_1.stroke(n,i.line.color)}))})).each((function(t){var e=t[0].trace,r=d3.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(e.visible&&"ohlc"===e.type?[t,t]:[]);r.enter().append("path").classed("legendohlc",!0).attr("d",(function(t,e){return e?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"})).attr("transform",s).style("stroke-miterlimit",1),r.exit().remove(),r.each((function(t,r){var n=d3.select(this),i=e[r?"increasing":"decreasing"],a=l(void 0,i.line,MAX_MARKER_LINE_WIDTH,CST_MARKER_LINE_WIDTH);n.style("fill","none").call(drawing_1.dashLine,i.line.dash,a),a&&color_1.stroke(n,i.line.color)}))}))};function getGradientDirection(t,e){return(e?"radial":"horizontal")+(t?"":"reversed")}function getStyleGuide(t){var e=t[0].trace,r=e.contours,n=subtypes.hasLines(e),i=subtypes.hasMarkers(e),a=e.visible&&e.fill&&"none"!==e.fill,o=!1,s=!1;if(r){var l=r.coloring;"lines"===l?o=!0:n="none"===l||"heatmap"===l||r.showlines,"constraint"===r.type?a="="!==r._operation:"fill"!==l&&"heatmap"!==l||(s=!0)}return{showMarker:i,showLine:n,showFill:a,showGradientLine:o,showGradientFill:s,anyLine:n||o,anyFill:a||s}}function dimAttr(t,e,r){return t&&lib_1.isArrayOrTypedArray(t)?e:t>r?r:t}var LINE_SPACING$5=alignment.LINE_SPACING,FROM_TL$4=alignment.FROM_TL,FROM_BR$3=alignment.FROM_BR,MAIN_TITLE=1,draw$a=function(t,e){return e||(e=t._fullLayout.legend||{}),_draw(t,e)};function _draw(t,e){var r,n=t._fullLayout,i="legend"+n._uid,a=e._inHover;if(a?(r=e.layer,i+="-hover"):r=n._infolayer,r){var o;if(t._legendMouseDownTime||(t._legendMouseDownTime=0),a){if(!e.entries)return;o=get_legend_data(e.entries,e)}else{if(!t.calcdata)return;o=n.showlegend&&get_legend_data(t.calcdata,e)}var s=n.hiddenlabels||[];if(!(a||n.showlegend&&o.length))return r.selectAll(".legend").remove(),n._topdefs.select("#"+i).remove(),plots_1.autoMargin(t,"legend");var l=lib_1.ensureSingle(r,"g","legend",(function(t){a||t.attr("pointer-events","all")})),c=lib_1.ensureSingleById(n._topdefs,"clipPath",i,(function(t){t.append("rect")})),u=lib_1.ensureSingle(l,"rect","bg",(function(t){t.attr("shape-rendering","crispEdges")}));u.call(color_1.stroke,e.bordercolor).call(color_1.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px");var d=lib_1.ensureSingle(l,"g","scrollbox"),h=e.title;if(e._titleWidth=0,e._titleHeight=0,h.text){var g=lib_1.ensureSingle(d,"text","legendtitletext");g.attr("text-anchor","start").call(drawing_1.font,h.font).text(h.text),textLayout(g,d,t,e,MAIN_TITLE)}else d.selectAll(".legendtitletext").remove();var f=lib_1.ensureSingle(l,"rect","scrollbar",(function(t){t.attr(constants$b.scrollBarEnterAttrs).call(color_1.fill,constants$b.scrollBarColor)})),p=d.selectAll("g.groups").data(o);p.enter().append("g").attr("class","groups"),p.exit().remove();var m=p.selectAll("g.traces").data(lib_1.identity);m.enter().append("g").attr("class","traces"),m.exit().remove(),m.style("opacity",(function(t){var e=t[0].trace;return registry.traceIs(e,"pie-like")?-1!==s.indexOf(t[0].label)?.5:1:"legendonly"===e.visible?.5:1})).each((function(){d3.select(this).call(drawTexts,t,e)})).call(style$3,t,e).each((function(){a||d3.select(this).call(setupTraceToggle,t)})),lib_1.syncOrAsync([plots_1.previousPromises,function(){return computeLegendDimensions(t,p,m,e)},function(){var o,s,h,g,p=n._size,m=e.borderwidth;if(!a){if(expandMargin(t))return;var y=p.l+p.w*e.x-FROM_TL$4[getXanchor(e)]*e._width,b=p.t+p.h*(1-e.y)-FROM_TL$4[getYanchor(e)]*e._effHeight;if(n.margin.autoexpand){var v=y,x=b;y=lib_1.constrain(y,0,n.width-e._width),b=lib_1.constrain(b,0,n.height-e._effHeight),y!==v&&lib_1.log("Constrain legend.x to make legend fit inside graph"),b!==x&&lib_1.log("Constrain legend.y to make legend fit inside graph")}drawing_1.setTranslate(l,y,b)}if(f.on(".drag",null),l.on("wheel",null),a||e._height<=e._maxHeight||t._context.staticPlot){var I=e._effHeight;a&&(I=e._height),u.attr({width:e._width-m,height:I-m,x:m/2,y:m/2}),drawing_1.setTranslate(d,0,0),c.select("rect").attr({width:e._width-2*m,height:I-2*m,x:m,y:m}),drawing_1.setClipUrl(d,i,t),drawing_1.setRect(f,0,0,0,0),delete e._scrollY}else{var B,C,F,A=Math.max(constants$b.scrollBarMinHeight,e._effHeight*e._effHeight/e._height),Q=e._effHeight-A-2*constants$b.scrollBarMargin,_=e._height-e._effHeight,w=Q/_,U=Math.min(e._scrollY||0,_);u.attr({width:e._width-2*m+constants$b.scrollBarWidth+constants$b.scrollBarMargin,height:e._effHeight-m,x:m/2,y:m/2}),c.select("rect").attr({width:e._width-2*m+constants$b.scrollBarWidth+constants$b.scrollBarMargin,height:e._effHeight-2*m,x:m,y:m+U}),drawing_1.setClipUrl(d,i,t),L(U,A,w),l.on("wheel",(function(){L(U=lib_1.constrain(e._scrollY+d3.event.deltaY/Q*_,0,_),A,w),0!==U&&U!==_&&d3.event.preventDefault()}));var S=d3.behavior.drag().on("dragstart",(function(){var t=d3.event.sourceEvent;B="touchstart"===t.type?t.changedTouches[0].clientY:t.clientY,F=U})).on("drag",(function(){var t=d3.event.sourceEvent;2===t.buttons||t.ctrlKey||(C="touchmove"===t.type?t.changedTouches[0].clientY:t.clientY,U=function(t,e,r){var n=(r-e)/w+t;return lib_1.constrain(n,0,_)}(F,B,C),L(U,A,w))}));f.call(S);var E=d3.behavior.drag().on("dragstart",(function(){var t=d3.event.sourceEvent;"touchstart"===t.type&&(B=t.changedTouches[0].clientY,F=U)})).on("drag",(function(){var t=d3.event.sourceEvent;"touchmove"===t.type&&(C=t.changedTouches[0].clientY,U=function(t,e,r){var n=(e-r)/w+t;return lib_1.constrain(n,0,_)}(F,B,C),L(U,A,w))}));d.call(E)}function L(r,n,i){e._scrollY=t._fullLayout.legend._scrollY=r,drawing_1.setTranslate(d,0,-r),drawing_1.setRect(f,e._width,constants$b.scrollBarMargin+r*i,constants$b.scrollBarWidth,n),c.select("rect").attr("y",m+r)}t._context.edits.legendPosition&&(l.classed("cursor-move",!0),dragelement.init({element:l.node(),gd:t,prepFn:function(){var t=drawing_1.getTranslate(l);h=t.x,g=t.y},moveFn:function(t,r){var n=h+t,i=g+r;drawing_1.setTranslate(l,n,i),o=dragelement.align(n,0,p.l,p.l+p.w,e.xanchor),s=dragelement.align(i,0,p.t+p.h,p.t,e.yanchor)},doneFn:function(){void 0!==o&&void 0!==s&&registry.call("_guiRelayout",t,{"legend.x":o,"legend.y":s})},clickFn:function(e,n){var i=r.selectAll("g.traces").filter((function(){var t=this.getBoundingClientRect();return n.clientX>=t.left&&n.clientX<=t.right&&n.clientY>=t.top&&n.clientY<=t.bottom}));i.size()>0&&clickOrDoubleClick(t,l,i,e,n)}}))}],t)}}function clickOrDoubleClick(t,e,r,n,i){var a=r.data()[0][0].trace,o={event:i,node:r.node(),curveNumber:a.index,expandedIndex:a._expandedIndex,data:t.data,layout:t.layout,frames:t._transitionData._frames,config:t._context,fullData:t._fullData,fullLayout:t._fullLayout};if(a._group&&(o.group=a._group),registry.traceIs(a,"pie-like")&&(o.label=r.datum()[0].label),!1!==events.triggerHandler(t,"plotly_legendclick",o))if(1===n)e._clickTimeout=setTimeout((function(){t._fullLayout&&handle_click(r,t,n)}),t._context.doubleClickDelay);else if(2===n){e._clickTimeout&&clearTimeout(e._clickTimeout),t._legendMouseDownTime=0,!1!==events.triggerHandler(t,"plotly_legenddoubleclick",o)&&handle_click(r,t,n)}}function drawTexts(t,e,r){var n,i,a=t.data()[0][0],o=a.trace,s=registry.traceIs(o,"pie-like"),l=!r._inHover&&e._context.edits.legendText&&!s,c=r._maxNameLength;a.groupTitle?(n=a.groupTitle.text,i=a.groupTitle.font):(i=r.font,r.entries?n=a.text:(n=s?a.label:o.name,o._meta&&(n=lib_1.templateString(n,o._meta))));var u=lib_1.ensureSingle(t,"text","legendtext");u.attr("text-anchor","start").call(drawing_1.font,i).text(l?ensureLength(n,c):n);var d=r.itemwidth+2*constants$b.itemGap;svg_text_utils.positionText(u,d,0),l?u.call(svg_text_utils.makeEditable,{gd:e,text:n}).call(textLayout,t,e,r).on("edit",(function(n){this.text(ensureLength(n,c)).call(textLayout,t,e,r);var i=a.trace._fullInput||{},s={};if(registry.hasTransform(i,"groupby")){var l=registry.getTransformIndices(i,"groupby"),u=l[l.length-1],d=lib_1.keyedContainer(i,"transforms["+u+"].styles","target","value.name");d.set(a.trace._group,n),s=d.constructUpdate()}else s.name=n;return registry.call("_guiRestyle",e,s,o.index)})):textLayout(u,t,e,r)}function ensureLength(t,e){var r=Math.max(4,e);if(t&&t.trim().length>=r/2)return t;for(var n=r-(t=t||"").length;n>0;n--)t+=" ";return t}function setupTraceToggle(t,e){var r,n=e._context.doubleClickDelay,i=1,a=lib_1.ensureSingle(t,"rect","legendtoggle",(function(t){e._context.staticPlot||t.style("cursor","pointer").attr("pointer-events","all"),t.call(color_1.fill,"rgba(0,0,0,0)")}));e._context.staticPlot||(a.on("mousedown",(function(){(r=(new Date).getTime())-e._legendMouseDownTime<n?i+=1:(i=1,e._legendMouseDownTime=r)})),a.on("mouseup",(function(){if(!e._dragged&&!e._editing){var r=e._fullLayout.legend;(new Date).getTime()-e._legendMouseDownTime>n&&(i=Math.max(i-1,1)),clickOrDoubleClick(e,r,t,i,d3.event)}})))}function textLayout(t,e,r,n,i){n._inHover&&t.attr("data-notex",!0),svg_text_utils.convertToTspans(t,r,(function(){computeTextDimensions(e,r,n,i)}))}function computeTextDimensions(t,e,r,n){var i=t.data()[0][0];if(r._inHover||!i||i.trace.showlegend){var a=t.select("g[class*=math-group]"),o=a.node();r||(r=e._fullLayout.legend);var s,l,c=r.borderwidth,u=(n===MAIN_TITLE?r.title.font:i.groupTitle?i.groupTitle.font:r.font).size*LINE_SPACING$5;if(o){var d=drawing_1.bBox(o);s=d.height,l=d.width,n===MAIN_TITLE?drawing_1.setTranslate(a,c,c+.75*s):drawing_1.setTranslate(a,0,.25*s)}else{var h=t.select(n===MAIN_TITLE?".legendtitletext":".legendtext"),g=svg_text_utils.lineCount(h),f=h.node();if(s=u*g,l=f?drawing_1.bBox(f).width:0,n===MAIN_TITLE)"left"===r.title.side&&(l+=2*constants$b.itemGap),svg_text_utils.positionText(h,c+constants$b.titlePad,c+u);else{var p=2*constants$b.itemGap+r.itemwidth;i.groupTitle&&(p=constants$b.itemGap,l-=r.itemwidth),svg_text_utils.positionText(h,p,-u*((g-1)/2-.3))}}n===MAIN_TITLE?(r._titleWidth=l,r._titleHeight=s):(i.lineHeight=u,i.height=Math.max(s,16)+3,i.width=l)}else t.remove()}function getTitleSize(t){var e=0,r=0,n=t.title.side;return n&&(-1!==n.indexOf("left")&&(e=t._titleWidth),-1!==n.indexOf("top")&&(r=t._titleHeight)),[e,r]}function computeLegendDimensions(t,e,r,n){var i=t._fullLayout;n||(n=i.legend);var a=i._size,o=helpers$9.isVertical(n),s=helpers$9.isGrouped(n),l=n.borderwidth,c=2*l,u=constants$b.itemGap,d=n.itemwidth+2*u,h=2*(l+u),g=getYanchor(n),f=n.y<0||0===n.y&&"top"===g,p=n.y>1||1===n.y&&"bottom"===g,m=n.tracegroupgap;n._maxHeight=Math.max(f||p?i.height/2:a.h,30);var y=0;n._width=0,n._height=0;var b=getTitleSize(n);if(o)r.each((function(t){var e=t[0].height;drawing_1.setTranslate(this,l+b[0],l+b[1]+n._height+e/2+u),n._height+=e,n._width=Math.max(n._width,t[0].width)})),y=d+n._width,n._width+=u+d+c,n._height+=h,s&&(e.each((function(t,e){drawing_1.setTranslate(this,0,e*n.tracegroupgap)})),n._height+=(n._lgroupsLength-1)*n.tracegroupgap);else{var v=getXanchor(n),x=n.x<0||0===n.x&&"right"===v,I=n.x>1||1===n.x&&"left"===v,B=p||f,C=i.width/2;n._maxWidth=Math.max(x?B&&"left"===v?a.l+a.w:C:I?B&&"right"===v?a.r+a.w:C:a.w,2*d);var F=0,A=0;r.each((function(t){var e=t[0].width+d;F=Math.max(F,e),A+=e})),y=null;var Q=0;if(s){var _=0,w=0,U=0;e.each((function(){var t=0,e=0;d3.select(this).selectAll("g.traces").each((function(r){var n=r[0].width,i=r[0].height;drawing_1.setTranslate(this,b[0],b[1]+l+u+i/2+e),e+=i,t=Math.max(t,d+n)}));var r=t+u;w>0&&r+l+w>n._maxWidth?(Q=Math.max(Q,w),w=0,U+=_+m,_=e):_=Math.max(_,e),drawing_1.setTranslate(this,w,U),w+=r})),n._width=Math.max(Q,w)+l,n._height=U+_+h}else{var S=r.size(),E=A+c+(S-1)*u<n._maxWidth,L=0,T=0,R=0,k=0;r.each((function(t){var e=t[0].height,r=d+t[0].width,i=(E?r:F)+u;i+l+T-u>=n._maxWidth&&(Q=Math.max(Q,k),T=0,R+=L,n._height+=L,L=0),drawing_1.setTranslate(this,b[0]+l+T,b[1]+l+R+e/2+u),k=T+r+u,T+=i,L=Math.max(L,e)})),E?(n._width=T+c,n._height=L+h):(n._width=Math.max(Q,k)+c,n._height+=L+h)}}n._width=Math.ceil(Math.max(n._width+b[0],n._titleWidth+2*(l+constants$b.titlePad))),n._height=Math.ceil(Math.max(n._height+b[1],n._titleHeight+2*(l+constants$b.itemGap))),n._effHeight=Math.min(n._height,n._maxHeight);var G=t._context.edits,N=G.legendText||G.legendPosition;r.each((function(t){var e=d3.select(this).select(".legendtoggle"),r=t[0].height,n=N?d:y||d+t[0].width;o||(n+=u/2),drawing_1.setRect(e,0,-r/2,n,r)}))}function expandMargin(t){var e=t._fullLayout.legend,r=getXanchor(e),n=getYanchor(e);return plots_1.autoMargin(t,"legend",{x:e.x,y:e.y,l:e._width*FROM_TL$4[r],r:e._width*FROM_BR$3[r],b:e._effHeight*FROM_BR$3[n],t:e._effHeight*FROM_TL$4[n]})}function getXanchor(t){return lib_1.isRightAnchor(t)?"right":lib_1.isCenterAnchor(t)?"center":"left"}function getYanchor(t){return lib_1.isBottomAnchor(t)?"bottom":lib_1.isMiddleAnchor(t)?"middle":"top"}var strTranslate$8=lib_1.strTranslate,strRotate$1=lib_1.strRotate,YANGLE=constants$d.YANGLE,YA_RADIANS=Math.PI*YANGLE/180,YFACTOR=1/Math.sin(YA_RADIANS),YSHIFTX=Math.cos(YA_RADIANS),YSHIFTY=Math.sin(YA_RADIANS),HOVERARROWSIZE=constants$d.HOVERARROWSIZE,HOVERTEXTPAD=constants$d.HOVERTEXTPAD,multipleHoverPoints={box:!0,ohlc:!0,violin:!0,candlestick:!0},cartesianScatterPoints={scatter:!0,scattergl:!0,splom:!0},hover_1=function(t,e,r,n){t=lib_1.getGraphDiv(t);var i=e.target;lib_1.throttle(t._fullLayout._uid+constants$d.HOVERID,constants$d.HOVERMINTIME,(function(){_hover(t,e,r,n,i)}))},loneHover=function(t,e){var r=!0;Array.isArray(t)||(r=!1,t=[t]);var n=e.gd,i=getTopOffset(n),a=getLeftOffset(n),o=createHoverText(t.map((function(t){var r=t._x0||t.x0||t.x||0,o=t._x1||t.x1||t.x||0,s=t._y0||t.y0||t.y||0,l=t._y1||t.y1||t.y||0,c=t.eventData;if(c){var u=Math.min(r,o),d=Math.max(r,o),h=Math.min(s,l),g=Math.max(s,l),f=t.trace;if(registry.traceIs(f,"gl3d")){var p=n._fullLayout[f.scene]._scene.container,m=p.offsetLeft,y=p.offsetTop;u+=m,d+=m,h+=y,g+=y}c.bbox={x0:u+a,x1:d+a,y0:h+i,y1:g+i},e.inOut_bbox&&e.inOut_bbox.push(c.bbox)}else c=!1;return{color:t.color||color_1.defaultLine,x0:t.x0||t.x||0,x1:t.x1||t.x||0,y0:t.y0||t.y||0,y1:t.y1||t.y||0,xLabel:t.xLabel,yLabel:t.yLabel,zLabel:t.zLabel,text:t.text,name:t.name,idealAlign:t.idealAlign,borderColor:t.borderColor,fontFamily:t.fontFamily,fontSize:t.fontSize,fontColor:t.fontColor,nameLength:t.nameLength,textAlign:t.textAlign,trace:t.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:t.hovertemplate||!1,hovertemplateLabels:t.hovertemplateLabels||!1,eventData:c}})),{gd:n,hovermode:"closest",rotateLabels:false,bgColor:e.bgColor||color_1.background,container:d3.select(e.container),outerContainer:e.outerContainer||e.container}),s=0,l=0;return o.sort((function(t,e){return t.y0-e.y0})).each((function(t,r){var n=t.y0-t.by/2;t.offset=n-5<s?s-n+5:0,s=n+t.by+t.offset,r===e.anchorIndex&&(l=t.offset)})).each((function(t){t.offset-=l})),alignHoverText(o,false,n._fullLayout._invScaleX,n._fullLayout._invScaleY),r?o:o.node()};function _hover(t,e,r,n,i){r||(r="xy");var a=Array.isArray(r)?r:[r],o=t._fullLayout,s=o._plots||[],l=s[r],c=o._has("cartesian");if(l){var u=l.overlays.map((function(t){return t.id}));a=a.concat(u)}for(var d=a.length,h=new Array(d),g=new Array(d),f=!1,p=0;p<d;p++){var m=a[p];if(s[m])f=!0,h[p]=s[m].xaxis,g[p]=s[m].yaxis;else{if(!o[m]||!o[m]._subplot)return void lib_1.warn("Unrecognized subplot: "+m);var y=o[m]._subplot;h[p]=y.xaxis,g[p]=y.yaxis}}var b=e.hovermode||o.hovermode;if(b&&!f&&(b="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(b)||!t.calcdata||t.querySelector(".zoombox")||t._dragging)return dragelement.unhoverRaw(t,e);var v=o.hoverdistance;-1===v&&(v=1/0);var x=o.spikedistance;-1===x&&(x=1/0);var I,B,C,F,A,Q,_,w,U,S,E,L,T,R=[],k=[],G={hLinePoint:null,vLinePoint:null},N=!1;if(Array.isArray(e))for(b="array",C=0;C<e.length;C++)(A=t.calcdata[e[C].curveNumber||0])&&(Q=A[0].trace,"skip"!==A[0].trace.hoverinfo&&(k.push(A),"h"===Q.orientation&&(N=!0)));else{for(F=0;F<t.calcdata.length;F++)A=t.calcdata[F],"skip"!==(Q=A[0].trace).hoverinfo&&helpers$a.isTraceInSubplots(Q,a)&&(k.push(A),"h"===Q.orientation&&(N=!0));var M,D;if(!i)M="xpx"in e?e.xpx:h[0]._length/2,D="ypx"in e?e.ypx:g[0]._length/2;else{if(!1===events.triggerHandler(t,"plotly_beforehover",e))return;var X=i.getBoundingClientRect();M=e.clientX-X.left,D=e.clientY-X.top,o._calcInverseTransform(t);var V=lib_1.apply3DTransform(o._invTransform)(M,D);if(M=V[0],D=V[1],M<0||M>h[0]._length||D<0||D>g[0]._length)return dragelement.unhoverRaw(t,e)}if(e.pointerX=M+h[0]._offset,e.pointerY=D+g[0]._offset,I="xval"in e?helpers$a.flat(a,e.xval):helpers$a.p2c(h,M),B="yval"in e?helpers$a.flat(a,e.yval):helpers$a.p2c(g,D),!fastIsnumeric(I[0])||!fastIsnumeric(B[0]))return lib_1.warn("Fx.hover failed",e,t),dragelement.unhoverRaw(t,e)}var W=1/0;function Z(t,r){for(F=0;F<k.length;F++)if((A=k[F])&&A[0]&&A[0].trace&&!0===(Q=A[0].trace).visible&&0!==Q._length&&-1===["carpet","contourcarpet"].indexOf(Q._module.name)){if("splom"===Q.type?_=a[w=0]:(_=helpers$a.getSubplot(Q),w=a.indexOf(_)),U=b,helpers$a.isUnifiedHover(U)&&(U=U.charAt(0)),L={cd:A,trace:Q,xa:h[w],ya:g[w],maxHoverDistance:v,maxSpikeDistance:x,index:!1,distance:Math.min(W,v),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:color_1.defaultLine,name:Q.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},o[_]&&(L.subplot=o[_]._subplot),o._splomScenes&&o._splomScenes[Q.uid]&&(L.scene=o._splomScenes[Q.uid]),T=R.length,"array"===U){var n=e[F];"pointNumber"in n?(L.index=n.pointNumber,U="closest"):(U="","xval"in n&&(S=n.xval,U="x"),"yval"in n&&(E=n.yval,U=U?"closest":"y"))}else void 0!==t&&void 0!==r?(S=t,E=r):(S=I[w],E=B[w]);if(0!==v)if(Q._module&&Q._module.hoverPoints){var i=Q._module.hoverPoints(L,S,E,U,{finiteRange:!0,hoverLayer:o._hoverlayer});if(i)for(var s,l=0;l<i.length;l++)s=i[l],fastIsnumeric(s.x0)&&fastIsnumeric(s.y0)&&R.push(cleanPoint(s,b))}else lib_1.log("Unrecognized trace type in hover:",Q);if("closest"===b&&R.length>T&&(R.splice(0,T),W=R[0].distance),c&&0!==x&&0===R.length){L.distance=x,L.index=!1;var u=Q._module.hoverPoints(L,S,E,"closest",{hoverLayer:o._hoverlayer});if(u&&(u=u.filter((function(t){return t.spikeDistance<=x}))),u&&u.length){var d,f=u.filter((function(t){return t.xa.showspikes&&"hovered data"!==t.xa.spikesnap}));if(f.length){var p=f[0];fastIsnumeric(p.x0)&&fastIsnumeric(p.y0)&&(d=$(p),(!G.vLinePoint||G.vLinePoint.spikeDistance>d.spikeDistance)&&(G.vLinePoint=d))}var m=u.filter((function(t){return t.ya.showspikes&&"hovered data"!==t.ya.spikesnap}));if(m.length){var y=m[0];fastIsnumeric(y.x0)&&fastIsnumeric(y.y0)&&(d=$(y),(!G.hLinePoint||G.hLinePoint.spikeDistance>d.spikeDistance)&&(G.hLinePoint=d))}}}}}function O(t,e,r){for(var n,i=null,a=1/0,o=0;o<t.length;o++)n=t[o].spikeDistance,r&&0===o&&(n=-1/0),n<=a&&n<=e&&(i=t[o],a=n);return i}function $(t){return t?{xa:t.xa,ya:t.ya,x:void 0!==t.xSpike?t.xSpike:(t.x0+t.x1)/2,y:void 0!==t.ySpike?t.ySpike:(t.y0+t.y1)/2,distance:t.distance,spikeDistance:t.spikeDistance,curveNumber:t.trace.index,color:t.color,pointNumber:t.index}:null}Z();var H={fullLayout:o,container:o._hoverlayer,event:e},Y=t._spikepoints,P={vLinePoint:G.vLinePoint,hLinePoint:G.hLinePoint};t._spikepoints=P;var z=function(){R.sort((function(t,e){return t.distance-e.distance})),R=orderRangePoints(R,b)};z();var J=b.charAt(0),j=("x"===J||"y"===J)&&R[0]&&cartesianScatterPoints[R[0].trace.type];if(c&&0!==x&&0!==R.length){var K=O(R.filter((function(t){return t.ya.showspikes})),x,j);G.hLinePoint=$(K);var q=O(R.filter((function(t){return t.xa.showspikes})),x,j);G.vLinePoint=$(q)}if(0===R.length){var tt=dragelement.unhoverRaw(t,e);return!c||null===G.hLinePoint&&null===G.vLinePoint||spikesChanged(Y)&&createSpikelines(t,G,H),tt}if(c&&spikesChanged(Y)&&createSpikelines(t,G,H),helpers$a.isXYhover(U)&&0!==R[0].length&&"splom"!==R[0].trace.type){var et=R[0];R=multipleHoverPoints[et.trace.type]?R.filter((function(t){return t.trace.index===et.trace.index})):[et];var rt=R.length;Z(getCoord("x",et,o),getCoord("y",et,o));var nt,it=[],at={},ot=0,st=function(t){var e=multipleHoverPoints[t.trace.type]?hoverDataKey(t):t.trace.index;if(at[e]){var r=at[e]-1,n=it[r];r>0&&Math.abs(t.distance)<Math.abs(n.distance)&&(it[r]=t)}else ot++,at[e]=ot,it.push(t)};for(nt=0;nt<rt;nt++)st(R[nt]);for(nt=R.length-1;nt>rt-1;nt--)st(R[nt]);R=it,z()}var lt=t._hoverdata,ct=[],ut=getTopOffset(t),dt=getLeftOffset(t);for(C=0;C<R.length;C++){var ht=R[C],gt=helpers$a.makeEventData(ht,ht.trace,ht.cd);if(!1!==ht.hovertemplate){var ft=!1;ht.cd[ht.index]&&ht.cd[ht.index].ht&&(ft=ht.cd[ht.index].ht),ht.hovertemplate=ft||ht.trace.hovertemplate||!1}if(ht.xa&&ht.ya){var pt=ht.x0+ht.xa._offset,mt=ht.x1+ht.xa._offset,yt=ht.y0+ht.ya._offset,bt=ht.y1+ht.ya._offset,vt=Math.min(pt,mt),xt=Math.max(pt,mt),It=Math.min(yt,bt),Bt=Math.max(yt,bt);gt.bbox={x0:vt+dt,x1:xt+dt,y0:It+ut,y1:Bt+ut}}ht.eventData=[gt],ct.push(gt)}t._hoverdata=ct;var Ct="y"===b&&(k.length>1||R.length>1)||"closest"===b&&N&&R.length>1,Ft=color_1.combine(o.plot_bgcolor||color_1.background,o.paper_bgcolor),At=createHoverText(R,{gd:t,hovermode:b,rotateLabels:Ct,bgColor:Ft,container:o._hoverlayer,outerContainer:o._paper.node(),commonLabelOpts:o.hoverlabel,hoverdistance:o.hoverdistance});if(helpers$a.isUnifiedHover(b)||(hoverAvoidOverlaps(At,Ct?"xa":"ya",o),alignHoverText(At,Ct,o._invScaleX,o._invScaleY)),i&&i.tagName){var Qt=registry.getComponentMethod("annotations","hasClickToShow")(t,ct);override_cursor(d3.select(i),Qt?"pointer":"")}i&&!n&&hoverChanged(t,e,lt)&&(lt&&t.emit("plotly_unhover",{event:e,points:lt}),t.emit("plotly_hover",{event:e,points:t._hoverdata,xaxes:h,yaxes:g,xvals:I,yvals:B}))}function hoverDataKey(t){return[t.trace.index,t.index,t.x0,t.y0,t.name,t.attr,t.xa?t.xa._id:"",t.ya?t.ya._id:""].join(",")}var EXTRA_STRING_REGEX=/<extra>([\s\S]*)<\/extra>/;function createHoverText(t,e){var r=e.gd,n=r._fullLayout,i=e.hovermode,a=e.rotateLabels,o=e.bgColor,s=e.container,l=e.outerContainer,c=e.commonLabelOpts||{};if(0===t.length)return[[]];var u=e.fontFamily||constants$d.HOVERFONT,d=e.fontSize||constants$d.HOVERFONTSIZE,h=t[0],g=h.xa,f=h.ya,p=i.charAt(0),m=h[p+"Label"],y=getBoundingClientRect(r,l),b=y.top,v=y.width,x=y.height,I=void 0!==m&&h.distance<=e.hoverdistance&&("x"===i||"y"===i);if(I){var B,C,F=!0;for(B=0;B<t.length;B++)if(F&&void 0===t[B].zLabel&&(F=!1),C=t[B].hoverinfo||t[B].trace.hoverinfo){var A=Array.isArray(C)?C:C.split("+");if(-1===A.indexOf("all")&&-1===A.indexOf(i)){I=!1;break}}F&&(I=!1)}var Q=s.selectAll("g.axistext").data(I?[0]:[]);if(Q.enter().append("g").classed("axistext",!0),Q.exit().remove(),Q.each((function(){var t=d3.select(this),e=lib_1.ensureSingle(t,"path","",(function(t){t.style({"stroke-width":"1px"})})),a=lib_1.ensureSingle(t,"text","",(function(t){t.attr("data-notex",1)})),o=c.bgcolor||color_1.defaultLine,s=c.bordercolor||color_1.contrast(o),l=color_1.contrast(o),p={family:c.font.family||u,size:c.font.size||d,color:c.font.color||l};e.style({fill:o,stroke:s}),a.text(m).call(drawing_1.font,p).call(svg_text_utils.positionText,0,0).call(svg_text_utils.convertToTspans,r),t.attr("transform","");var y,v,x=getBoundingClientRect(r,a.node());if("x"===i){var I="top"===g.side?"-":"";a.attr("text-anchor","middle").call(svg_text_utils.positionText,0,"top"===g.side?b-x.bottom-HOVERARROWSIZE-HOVERTEXTPAD:b-x.top+HOVERARROWSIZE+HOVERTEXTPAD),y=g._offset+(h.x0+h.x1)/2,v=f._offset+("top"===g.side?0:f._length);var B=x.width/2+HOVERTEXTPAD;y<B?(y=B,e.attr("d","M-"+(B-HOVERARROWSIZE)+",0L-"+(B-2*HOVERARROWSIZE)+","+I+HOVERARROWSIZE+"H"+(HOVERTEXTPAD+x.width/2)+"v"+I+(2*HOVERTEXTPAD+x.height)+"H-"+B+"V"+I+HOVERARROWSIZE+"Z")):y>n.width-B?(y=n.width-B,e.attr("d","M"+(B-HOVERARROWSIZE)+",0L"+B+","+I+HOVERARROWSIZE+"v"+I+(2*HOVERTEXTPAD+x.height)+"H-"+B+"V"+I+HOVERARROWSIZE+"H"+(B-2*HOVERARROWSIZE)+"Z")):e.attr("d","M0,0L"+HOVERARROWSIZE+","+I+HOVERARROWSIZE+"H"+(HOVERTEXTPAD+x.width/2)+"v"+I+(2*HOVERTEXTPAD+x.height)+"H-"+(HOVERTEXTPAD+x.width/2)+"V"+I+HOVERARROWSIZE+"H-"+HOVERARROWSIZE+"Z")}else{var C,F,A;"right"===f.side?(C="start",F=1,A="",y=g._offset+g._length):(C="end",F=-1,A="-",y=g._offset),v=f._offset+(h.y0+h.y1)/2,a.attr("text-anchor",C),e.attr("d","M0,0L"+A+HOVERARROWSIZE+","+HOVERARROWSIZE+"V"+(HOVERTEXTPAD+x.height/2)+"h"+A+(2*HOVERTEXTPAD+x.width)+"V-"+(HOVERTEXTPAD+x.height/2)+"H"+A+HOVERARROWSIZE+"V-"+HOVERARROWSIZE+"Z");var Q,_=x.height/2,w=b-x.top-_,U="clip"+n._uid+"commonlabel"+f._id;if(y<x.width+2*HOVERTEXTPAD+HOVERARROWSIZE){Q="M-"+(HOVERARROWSIZE+HOVERTEXTPAD)+"-"+_+"h-"+(x.width-HOVERTEXTPAD)+"V"+_+"h"+(x.width-HOVERTEXTPAD)+"Z";var S=x.width-y+HOVERTEXTPAD;svg_text_utils.positionText(a,S,w),"end"===C&&a.selectAll("tspan").each((function(){var t=d3.select(this),e=drawing_1.tester.append("text").text(t.text()).call(drawing_1.font,p),n=getBoundingClientRect(r,e.node());Math.round(n.width)<Math.round(x.width)&&t.attr("x",S-n.width),e.remove()}))}else svg_text_utils.positionText(a,F*(HOVERTEXTPAD+HOVERARROWSIZE),w),Q=null;var E=n._topclips.selectAll("#"+U).data(Q?[0]:[]);E.enter().append("clipPath").attr("id",U).append("path"),E.exit().remove(),E.select("path").attr("d",Q),drawing_1.setClipUrl(a,Q?U:null,r)}t.attr("transform",strTranslate$8(y,v))})),helpers$a.isUnifiedHover(i)){s.selectAll("g.hovertext").remove();var _=t.filter((function(t){return"none"!==t.hoverinfo}));if(0===_.length)return;var w=n.hoverlabel,U=w.font,S={showlegend:!0,legend:{title:{text:m,font:U},font:U,bgcolor:w.bgcolor,bordercolor:w.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:n.legend?n.legend.traceorder:void 0,orientation:"v"}},E={font:U};defaults$j(S,E,r._fullData);var L=E.legend;L.entries=[];for(var T=0;T<_.length;T++){var R=_[T];if("none"!==R.hoverinfo){var k=getHoverLabelText(R,!0,i,n,m),G=k[0],N=k[1];R.name=N,R.text=""!==N?N+" : "+G:G;var M=R.cd[R.index];M&&(M.mc&&(R.mc=M.mc),M.mcc&&(R.mc=M.mcc),M.mlc&&(R.mlc=M.mlc),M.mlcc&&(R.mlc=M.mlcc),M.mlw&&(R.mlw=M.mlw),M.mrc&&(R.mrc=M.mrc),M.dir&&(R.dir=M.dir)),R._distinct=!0,L.entries.push([R])}}L.entries.sort((function(t,e){return t[0].trace.index-e[0].trace.index})),L.layer=s,L._inHover=!0,L._groupTitleFont=w.grouptitlefont,draw$a(r,L);var D,X,V,W,Z=s.select("g.legend"),O=getBoundingClientRect(r,Z.node()),$=O.width+2*HOVERTEXTPAD,H=O.height+2*HOVERTEXTPAD,Y=_[0],P=(Y.x0+Y.x1)/2,z=(Y.y0+Y.y1)/2,J=!(registry.traceIs(Y.trace,"bar-like")||registry.traceIs(Y.trace,"box-violin"));"y"===p?J?(X=z-HOVERTEXTPAD,D=z+HOVERTEXTPAD):(X=Math.min.apply(null,_.map((function(t){return Math.min(t.y0,t.y1)}))),D=Math.max.apply(null,_.map((function(t){return Math.max(t.y0,t.y1)})))):X=D=lib_1.mean(_.map((function(t){return(t.y0+t.y1)/2})))-H/2,"x"===p?J?(V=P+HOVERTEXTPAD,W=P-HOVERTEXTPAD):(V=Math.max.apply(null,_.map((function(t){return Math.max(t.x0,t.x1)}))),W=Math.min.apply(null,_.map((function(t){return Math.min(t.x0,t.x1)})))):V=W=lib_1.mean(_.map((function(t){return(t.x0+t.x1)/2})))-$/2;var j,K,q=g._offset,tt=f._offset;return W+=q-$,X+=tt-H,j=(V+=q)+$<v&&V>=0?V:W+$<v&&W>=0?W:q+$<v?q:V-P<P-W+$?v-$:0,j+=HOVERTEXTPAD,K=(D+=tt)+H<x&&D>=0?D:X+H<x&&X>=0?X:tt+H<x?tt:D-z<z-X+H?x-H:0,K+=HOVERTEXTPAD,Z.attr("transform",strTranslate$8(j-1,K-1)),Z}var et=s.selectAll("g.hovertext").data(t,(function(t){return hoverDataKey(t)}));return et.enter().append("g").classed("hovertext",!0).each((function(){var t=d3.select(this);t.append("rect").call(color_1.fill,color_1.addOpacity(o,.8)),t.append("text").classed("name",!0),t.append("path").style("stroke-width","1px"),t.append("text").classed("nums",!0).call(drawing_1.font,u,d)})),et.exit().remove(),et.each((function(t){var e=d3.select(this).attr("transform",""),s=t.color;Array.isArray(s)&&(s=s[t.eventData[0].pointNumber]);var l=t.bgcolor||s,c=color_1.combine(color_1.opacity(l)?l:color_1.defaultLine,o),h=color_1.combine(color_1.opacity(s)?s:color_1.defaultLine,o),g=t.borderColor||color_1.contrast(c),f=getHoverLabelText(t,I,i,n,m,e),p=f[0],y=f[1],B=e.select("text.nums").call(drawing_1.font,t.fontFamily||u,t.fontSize||d,t.fontColor||g).text(p).attr("data-notex",1).call(svg_text_utils.positionText,0,0).call(svg_text_utils.convertToTspans,r),C=e.select("text.name"),F=0,A=0;if(y&&y!==p){C.call(drawing_1.font,t.fontFamily||u,t.fontSize||d,h).text(y).attr("data-notex",1).call(svg_text_utils.positionText,0,0).call(svg_text_utils.convertToTspans,r);var Q=getBoundingClientRect(r,C.node());F=Q.width+2*HOVERTEXTPAD,A=Q.height+2*HOVERTEXTPAD}else C.remove(),e.select("rect").remove();e.select("path").style({fill:c,stroke:g});var _=t.xa._offset+(t.x0+t.x1)/2,w=t.ya._offset+(t.y0+t.y1)/2,U=Math.abs(t.x1-t.x0),S=Math.abs(t.y1-t.y0),E=getBoundingClientRect(r,B.node()),L=E.width/n._invScaleX,T=E.height/n._invScaleY;t.ty0=(b-E.top)/n._invScaleY,t.bx=L+2*HOVERTEXTPAD,t.by=Math.max(T+2*HOVERTEXTPAD,A),t.anchor="start",t.txwidth=L,t.tx2width=F,t.offset=0;var R,k,G=(L+HOVERARROWSIZE+HOVERTEXTPAD+F)*n._invScaleX;if(a)t.pos=_,R=w+S/2+G<=x,k=w-S/2-G>=0,"top"!==t.idealAlign&&R||!k?R?(w+=S/2,t.anchor="start"):t.anchor="middle":(w-=S/2,t.anchor="end");else if(t.pos=w,R=_+U/2+G<=v,k=_-U/2-G>=0,"left"!==t.idealAlign&&R||!k)if(R)_+=U/2,t.anchor="start";else{t.anchor="middle";var N=G/2,M=_+N-v,D=_-N;M>0&&(_-=M),D<0&&(_+=-D)}else _-=U/2,t.anchor="end";B.attr("text-anchor",t.anchor),F&&C.attr("text-anchor",t.anchor),e.attr("transform",strTranslate$8(_,w)+(a?strRotate$1(YANGLE):""))})),et}function getHoverLabelText(t,e,r,n,i,a){var o="",s="";void 0!==t.nameOverride&&(t.name=t.nameOverride),t.name&&(t.trace._meta&&(t.name=lib_1.templateString(t.name,t.trace._meta)),o=plainText(t.name,t.nameLength));var l=r.charAt(0),c="x"===l?"y":"x";void 0!==t.zLabel?(void 0!==t.xLabel&&(s+="x: "+t.xLabel+"<br>"),void 0!==t.yLabel&&(s+="y: "+t.yLabel+"<br>"),"choropleth"!==t.trace.type&&"choroplethmapbox"!==t.trace.type&&(s+=(s?"z: ":"")+t.zLabel)):e&&t[l+"Label"]===i?s=t[c+"Label"]||"":void 0===t.xLabel?void 0!==t.yLabel&&"scattercarpet"!==t.trace.type&&(s=t.yLabel):s=void 0===t.yLabel?t.xLabel:"("+t.xLabel+", "+t.yLabel+")",!t.text&&0!==t.text||Array.isArray(t.text)||(s+=(s?"<br>":"")+t.text),void 0!==t.extraText&&(s+=(s?"<br>":"")+t.extraText),a&&""===s&&!t.hovertemplate&&(""===o&&a.remove(),s=o);var u=t.hovertemplate||!1;if(u){var d=t.hovertemplateLabels||t;t[l+"Label"]!==i&&(d[l+"other"]=d[l+"Val"],d[l+"otherLabel"]=d[l+"Label"]),s=(s=lib_1.hovertemplateString(u,d,n._d3locale,t.eventData[0]||{},t.trace._meta)).replace(EXTRA_STRING_REGEX,(function(e,r){return o=plainText(r,t.nameLength),""}))}return[s,o]}function hoverAvoidOverlaps(t,e,r){var n,i,a,o,s,l,c,u=0,d=1,h=t.size(),g=new Array(h),f=0;function p(t){var e=t[0],r=t[t.length-1];if(i=e.pmin-e.pos-e.dp+e.size,a=r.pos+r.dp+r.size-e.pmax,i>.01){for(s=t.length-1;s>=0;s--)t[s].dp+=i;n=!1}if(!(a<.01)){if(i<-.01){for(s=t.length-1;s>=0;s--)t[s].dp-=a;n=!1}if(n){var c=0;for(o=0;o<t.length;o++)(l=t[o]).pos+l.dp+l.size>e.pmax&&c++;for(o=t.length-1;o>=0&&!(c<=0);o--)(l=t[o]).pos>e.pmax-1&&(l.del=!0,c--);for(o=0;o<t.length&&!(c<=0);o++)if((l=t[o]).pos<e.pmin+1)for(l.del=!0,c--,a=2*l.size,s=t.length-1;s>=0;s--)t[s].dp-=a;for(o=t.length-1;o>=0&&!(c<=0);o--)(l=t[o]).pos+l.dp+l.size>e.pmax&&(l.del=!0,c--)}}}for(t.each((function(t){var n=t[e],i="x"===n._id.charAt(0),a=n.range;0===f&&a&&a[0]>a[1]!==i&&(d=-1),g[f++]=[{datum:t,traceIndex:t.trace.index,dp:0,pos:t.pos,posref:t.posref,size:t.by*(i?YFACTOR:1)/2,pmin:0,pmax:i?r.width:r.height}]})),g.sort((function(t,e){return t[0].posref-e[0].posref||d*(e[0].traceIndex-t[0].traceIndex)}));!n&&u<=h;){for(u++,n=!0,o=0;o<g.length-1;){var m=g[o],y=g[o+1],b=m[m.length-1],v=y[0];if((i=b.pos+b.dp+b.size-v.pos-v.dp+v.size)>.01&&b.pmin===v.pmin&&b.pmax===v.pmax){for(s=y.length-1;s>=0;s--)y[s].dp+=i;for(m.push.apply(m,y),g.splice(o+1,1),c=0,s=m.length-1;s>=0;s--)c+=m[s].dp;for(a=c/m.length,s=m.length-1;s>=0;s--)m[s].dp-=a;n=!1}else o++}g.forEach(p)}for(o=g.length-1;o>=0;o--){var x=g[o];for(s=x.length-1;s>=0;s--){var I=x[s],B=I.datum;B.offset=I.dp,B.del=I.del}}}function alignHoverText(t,e,r,n){var i=function(t){return t*r},a=function(t){return t*n};t.each((function(t){var r=d3.select(this);if(t.del)return r.remove();var n=r.select("text.nums"),o=t.anchor,s="end"===o?-1:1,l={start:1,end:-1,middle:0}[o],c=l*(HOVERARROWSIZE+HOVERTEXTPAD),u=c+l*(t.txwidth+HOVERTEXTPAD),d=0,h=t.offset,g="middle"===o;g&&(c-=t.tx2width/2,u+=t.txwidth/2+HOVERTEXTPAD),e&&(h*=-YSHIFTY,d=t.offset*YSHIFTX),r.select("path").attr("d",g?"M-"+i(t.bx/2+t.tx2width/2)+","+a(h-t.by/2)+"h"+i(t.bx)+"v"+a(t.by)+"h-"+i(t.bx)+"Z":"M0,0L"+i(s*HOVERARROWSIZE+d)+","+a(HOVERARROWSIZE+h)+"v"+a(t.by/2-HOVERARROWSIZE)+"h"+i(s*t.bx)+"v-"+a(t.by)+"H"+i(s*HOVERARROWSIZE+d)+"V"+a(h-HOVERARROWSIZE)+"Z");var f=d+c,p=h+t.ty0-t.by/2+HOVERTEXTPAD,m=t.textAlign||"auto";"auto"!==m&&("left"===m&&"start"!==o?(n.attr("text-anchor","start"),f=g?-t.bx/2-t.tx2width/2+HOVERTEXTPAD:-t.bx-HOVERTEXTPAD):"right"===m&&"end"!==o&&(n.attr("text-anchor","end"),f=g?t.bx/2-t.tx2width/2-HOVERTEXTPAD:t.bx+HOVERTEXTPAD)),n.call(svg_text_utils.positionText,i(f),a(p)),t.tx2width&&(r.select("text.name").call(svg_text_utils.positionText,i(u+l*HOVERTEXTPAD+d),a(h+t.ty0-t.by/2+HOVERTEXTPAD)),r.select("rect").call(drawing_1.setRect,i(u+(l-1)*t.tx2width/2+d),a(h-t.by/2-1),i(t.tx2width),a(t.by+2)))}))}function cleanPoint(t,e){var r=t.index,n=t.trace||{},i=t.cd[0],a=t.cd[r]||{};function o(t){return t||fastIsnumeric(t)&&0===t}var s=Array.isArray(r)?function(t,e){var a=lib_1.castOption(i,r,t);return o(a)?a:lib_1.extractOption({},n,"",e)}:function(t,e){return lib_1.extractOption(a,n,t,e)};function l(e,r,n){var i=s(r,n);o(i)&&(t[e]=i)}if(l("hoverinfo","hi","hoverinfo"),l("bgcolor","hbg","hoverlabel.bgcolor"),l("borderColor","hbc","hoverlabel.bordercolor"),l("fontFamily","htf","hoverlabel.font.family"),l("fontSize","hts","hoverlabel.font.size"),l("fontColor","htc","hoverlabel.font.color"),l("nameLength","hnl","hoverlabel.namelength"),l("textAlign","hta","hoverlabel.align"),t.posref="y"===e||"closest"===e&&"h"===n.orientation?t.xa._offset+(t.x0+t.x1)/2:t.ya._offset+(t.y0+t.y1)/2,t.x0=lib_1.constrain(t.x0,0,t.xa._length),t.x1=lib_1.constrain(t.x1,0,t.xa._length),t.y0=lib_1.constrain(t.y0,0,t.ya._length),t.y1=lib_1.constrain(t.y1,0,t.ya._length),void 0!==t.xLabelVal&&(t.xLabel="xLabel"in t?t.xLabel:axes_1.hoverLabelText(t.xa,t.xLabelVal,n.xhoverformat),t.xVal=t.xa.c2d(t.xLabelVal)),void 0!==t.yLabelVal&&(t.yLabel="yLabel"in t?t.yLabel:axes_1.hoverLabelText(t.ya,t.yLabelVal,n.yhoverformat),t.yVal=t.ya.c2d(t.yLabelVal)),void 0!==t.zLabelVal&&void 0===t.zLabel&&(t.zLabel=String(t.zLabelVal)),!(isNaN(t.xerr)||"log"===t.xa.type&&t.xerr<=0)){var c=axes_1.tickText(t.xa,t.xa.c2l(t.xerr),"hover").text;void 0!==t.xerrneg?t.xLabel+=" +"+c+" / -"+axes_1.tickText(t.xa,t.xa.c2l(t.xerrneg),"hover").text:t.xLabel+=" Â± "+c,"x"===e&&(t.distance+=1)}if(!(isNaN(t.yerr)||"log"===t.ya.type&&t.yerr<=0)){var u=axes_1.tickText(t.ya,t.ya.c2l(t.yerr),"hover").text;void 0!==t.yerrneg?t.yLabel+=" +"+u+" / -"+axes_1.tickText(t.ya,t.ya.c2l(t.yerrneg),"hover").text:t.yLabel+=" Â± "+u,"y"===e&&(t.distance+=1)}var d=t.hoverinfo||t.trace.hoverinfo;return d&&"all"!==d&&(-1===(d=Array.isArray(d)?d:d.split("+")).indexOf("x")&&(t.xLabel=void 0),-1===d.indexOf("y")&&(t.yLabel=void 0),-1===d.indexOf("z")&&(t.zLabel=void 0),-1===d.indexOf("text")&&(t.text=void 0),-1===d.indexOf("name")&&(t.name=void 0)),t}function createSpikelines(t,e,r){var n,i,a=r.container,o=r.fullLayout,s=o._size,l=r.event,c=!!e.hLinePoint,u=!!e.vLinePoint;if(a.selectAll(".spikeline").remove(),u||c){var d=color_1.combine(o.plot_bgcolor,o.paper_bgcolor);if(c){var h,g,f=e.hLinePoint;n=f&&f.xa,"cursor"===(i=f&&f.ya).spikesnap?(h=l.pointerX,g=l.pointerY):(h=n._offset+f.x,g=i._offset+f.y);var p,m,y=tinycolor.readability(f.color,d)<1.5?color_1.contrast(d):f.color,b=i.spikemode,v=i.spikethickness,x=i.spikecolor||y,I=axes_1.getPxPosition(t,i);if(-1!==b.indexOf("toaxis")||-1!==b.indexOf("across")){if(-1!==b.indexOf("toaxis")&&(p=I,m=h),-1!==b.indexOf("across")){var B=i._counterDomainMin,C=i._counterDomainMax;"free"===i.anchor&&(B=Math.min(B,i.position),C=Math.max(C,i.position)),p=s.l+B*s.w,m=s.l+C*s.w}a.insert("line",":first-child").attr({x1:p,x2:m,y1:g,y2:g,"stroke-width":v,stroke:x,"stroke-dasharray":drawing_1.dashStyle(i.spikedash,v)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:p,x2:m,y1:g,y2:g,"stroke-width":v+2,stroke:d}).classed("spikeline",!0).classed("crisp",!0)}-1!==b.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:I+("right"!==i.side?v:-v),cy:g,r:v,fill:x}).classed("spikeline",!0)}if(u){var F,A,Q=e.vLinePoint;n=Q&&Q.xa,i=Q&&Q.ya,"cursor"===n.spikesnap?(F=l.pointerX,A=l.pointerY):(F=n._offset+Q.x,A=i._offset+Q.y);var _,w,U=tinycolor.readability(Q.color,d)<1.5?color_1.contrast(d):Q.color,S=n.spikemode,E=n.spikethickness,L=n.spikecolor||U,T=axes_1.getPxPosition(t,n);if(-1!==S.indexOf("toaxis")||-1!==S.indexOf("across")){if(-1!==S.indexOf("toaxis")&&(_=T,w=A),-1!==S.indexOf("across")){var R=n._counterDomainMin,k=n._counterDomainMax;"free"===n.anchor&&(R=Math.min(R,n.position),k=Math.max(k,n.position)),_=s.t+(1-k)*s.h,w=s.t+(1-R)*s.h}a.insert("line",":first-child").attr({x1:F,x2:F,y1:_,y2:w,"stroke-width":E,stroke:L,"stroke-dasharray":drawing_1.dashStyle(n.spikedash,E)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:F,x2:F,y1:_,y2:w,"stroke-width":E+2,stroke:d}).classed("spikeline",!0).classed("crisp",!0)}-1!==S.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:F,cy:T-("top"!==n.side?E:-E),r:E,fill:L}).classed("spikeline",!0)}}}function hoverChanged(t,e,r){if(!r||r.length!==t._hoverdata.length)return!0;for(var n=r.length-1;n>=0;n--){var i=r[n],a=t._hoverdata[n];if(i.curveNumber!==a.curveNumber||String(i.pointNumber)!==String(a.pointNumber)||String(i.pointNumbers)!==String(a.pointNumbers))return!0}return!1}function spikesChanged(t,e){return!e||(e.vLinePoint!==t._spikepoints.vLinePoint||e.hLinePoint!==t._spikepoints.hLinePoint)}function plainText(t,e){return svg_text_utils.plainText(t||"",{len:e,allowedTags:["br","sub","sup","b","i","em"]})}function orderRangePoints(t,e){for(var r=e.charAt(0),n=[],i=[],a=[],o=0;o<t.length;o++){var s=t[o];registry.traceIs(s.trace,"bar-like")||registry.traceIs(s.trace,"box-violin")?a.push(s):s.trace[r+"period"]?i.push(s):n.push(s)}return n.concat(i).concat(a)}function getCoord(t,e,r){var n=e[t+"a"],i=e[t+"Val"],a=e.cd[0];if("category"===n.type)i=n._categoriesMap[i];else if("date"===n.type){var o=e.trace[t+"periodalignment"];if(o){var s=e.cd[e.index],l=s[t+"Start"];void 0===l&&(l=s[t]);var c=s[t+"End"];void 0===c&&(c=s[t]);var u=c-l;"end"===o?i+=u:"middle"===o&&(i+=u/2)}i=n.d2c(i)}return a&&a.t&&a.t.posLetter===n._id&&("group"!==r.boxmode&&"group"!==r.violinmode||(i+=a.t.dPos)),i}function getTopOffset(t){return t.offsetTop+t.clientTop}function getLeftOffset(t){return t.offsetLeft+t.clientLeft}function getBoundingClientRect(t,e){var r=t._fullLayout,n=e.getBoundingClientRect(),i=n.x,a=n.y,o=i+n.width,s=a+n.height,l=lib_1.apply3DTransform(r._invTransform)(i,a),c=lib_1.apply3DTransform(r._invTransform)(o,s),u=l[0],d=l[1],h=c[0],g=c[1];return{x:u,y:d,width:h-u,height:g-d,top:Math.min(d,g),left:Math.min(u,h),right:Math.max(u,h),bottom:Math.max(d,g)}}var hover$4={hover:hover_1,loneHover:loneHover},isUnifiedHover$2=helpers$a.isUnifiedHover,hoverlabel_defaults=function(t,e,r,n){n=n||{};var i=e.legend;function a(t){n.font[t]||(n.font[t]=i?e.legend.font[t]:e.font[t])}e&&isUnifiedHover$2(e.hovermode)&&(n.font||(n.font={}),a("size"),a("family"),a("color"),i?(n.bgcolor||(n.bgcolor=color_1.combine(e.legend.bgcolor,e.paper_bgcolor)),n.bordercolor||(n.bordercolor=e.legend.bordercolor)):n.bgcolor||(n.bgcolor=e.paper_bgcolor)),r("hoverlabel.bgcolor",n.bgcolor),r("hoverlabel.bordercolor",n.bordercolor),r("hoverlabel.namelength",n.namelength),lib_1.coerceFont(r,"hoverlabel.font",n.font),r("hoverlabel.align",n.align)},layout_global_defaults=function(t,e){hoverlabel_defaults(t,e,(function(r,n){return lib_1.coerce(t,e,layout_attributes$5,r,n)}))},defaults$i=function(t,e,r,n){var i=lib_1.extendFlat({},n.hoverlabel);e.hovertemplate&&(i.namelength=-1),hoverlabel_defaults(t,e,(function(r,n){return lib_1.coerce(t,e,attributes$s,r,n)}),i)},hovermode_defaults=function(t,e){function r(r,n){return void 0!==e[r]?e[r]:lib_1.coerce(t,e,layout_attributes$5,r,n)}return r("clickmode"),r("hovermode")},layout_defaults$2=function(t,e){function r(r,n){return lib_1.coerce(t,e,layout_attributes$5,r,n)}hovermode_defaults(t,e)&&(r("hoverdistance"),r("spikedistance")),"select"===r("dragmode")&&r("selectdirection");var n=e._has("mapbox"),i=e._has("geo"),a=e._basePlotModules.length;"zoom"===e.dragmode&&((n||i)&&1===a||n&&i&&2===a)&&(e.dragmode="pan"),hoverlabel_defaults(t,e,r),lib_1.coerceFont(r,"hoverlabel.grouptitlefont",e.hoverlabel.font)},calc$6=function(t){var e=t.calcdata,r=t._fullLayout;function n(t){return function(e){return lib_1.coerceHoverinfo({hoverinfo:e},{_module:t._module},r)}}for(var i=0;i<e.length;i++){var a=e[i],o=a[0].trace;if(!registry.traceIs(o,"pie-like")){var s=registry.traceIs(o,"2dMap")?paste:lib_1.fillArray;s(o.hoverinfo,a,"hi",n(o)),o.hovertemplate&&s(o.hovertemplate,a,"ht"),o.hoverlabel&&(s(o.hoverlabel.bgcolor,a,"hbg"),s(o.hoverlabel.bordercolor,a,"hbc"),s(o.hoverlabel.font.size,a,"hts"),s(o.hoverlabel.font.color,a,"htc"),s(o.hoverlabel.font.family,a,"htf"),s(o.hoverlabel.namelength,a,"hnl"),s(o.hoverlabel.align,a,"hta"))}}};function paste(t,e,r,n){n=n||lib_1.identity,Array.isArray(t)&&(e[0][r]=n(t))}var hover$3=hover$4.hover,click$1=function(t,e,r){var n=registry.getComponentMethod("annotations","onClick")(t,t._hoverdata);function i(){t.emit("plotly_click",{points:t._hoverdata,event:e})}void 0!==r&&hover$3(t,e,r,!0),t._hoverdata&&e&&e.target&&(n&&n.then?n.then(i):i(),e.stopImmediatePropagation&&e.stopImmediatePropagation())},fx={moduleType:"component",name:"fx",constants:constants$d,schema:{layout:layout_attributes$5},attributes:attributes$s,layoutAttributes:layout_attributes$5,supplyLayoutGlobalDefaults:layout_global_defaults,supplyDefaults:defaults$i,supplyLayoutDefaults:layout_defaults$2,calc:calc$6,getDistanceFunction:helpers$a.getDistanceFunction,getClosest:helpers$a.getClosest,inbox:helpers$a.inbox,quadrature:helpers$a.quadrature,appendArrayPointValue:helpers$a.appendArrayPointValue,castHoverOption:castHoverOption,castHoverinfo:castHoverinfo,hover:hover$4.hover,unhover:dragelement.unhover,loneHover:hover$4.loneHover,loneUnhover:loneUnhover,click:click$1};function loneUnhover(t){var e=lib_1.isD3Selection(t)?t:d3.select(t);e.selectAll("g.hovertext").remove(),e.selectAll(".spikeline").remove()}function castHoverOption(t,e,r){return lib_1.castOption(t,e,"hoverlabel."+r)}function castHoverinfo(t,e,r){return lib_1.castOption(t,r,"hoverinfo",(function(r){return lib_1.coerceHoverinfo({hoverinfo:r},{_module:t._module},e)}))}var helpers$7=createCommonjsModule((function(t,e){e.selectMode=function(t){return"lasso"===t||"select"===t},e.drawMode=function(t){return"drawclosedpath"===t||"drawopenpath"===t||"drawline"===t||"drawrect"===t||"drawcircle"===t},e.openMode=function(t){return"drawline"===t||"drawopenpath"===t},e.rectMode=function(t){return"select"===t||"drawline"===t||"drawrect"===t||"drawcircle"===t},e.freeMode=function(t){return"lasso"===t||"drawclosedpath"===t||"drawopenpath"===t},e.selectingOrDrawing=function(t){return e.freeMode(t)||e.rectMode(t)}})),clear_gl_canvases=function(t){var e=t._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each((function(t){t.regl&&t.regl.clear({color:!0,depth:!0})}))},ploticon={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}},parseSvgPath=parse$1,length={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},segment=/([astvzqmhlc])([^astvzqmhlc]*)/gi;function parse$1(t){var e=[];return t.replace(segment,(function(t,r,n){var i=r.toLowerCase();for(n=parseValues(n),"m"==i&&n.length>2&&(e.push([r].concat(n.splice(0,2))),i="l",r="m"==r?"l":"L");;){if(n.length==length[i])return n.unshift(r),e.push(n);if(n.length<length[i])throw new Error("malformed path data");e.push([r].concat(n.splice(0,length[i])))}})),e}var number=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function parseValues(t){var e=t.match(number);return e?e.map(Number):[]}var CIRCLE_SIDES=32,constants$a={CIRCLE_SIDES:CIRCLE_SIDES,i000:0,i090:CIRCLE_SIDES/4,i180:CIRCLE_SIDES/2,i270:CIRCLE_SIDES/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)},strTranslate$7=lib_1.strTranslate;function p2r$2(t,e){switch(t.type){case"log":return t.p2d(e);case"date":return t.p2r(e,0,t.calendar);default:return t.p2r(e)}}function r2p$1(t,e){switch(t.type){case"log":return t.d2p(e);case"date":return t.r2p(e,0,t.calendar);default:return t.r2p(e)}}function axValue$1(t){var e="y"===t._id.charAt(0)?1:0;return function(r){return p2r$2(t,r[e])}}function getTransform$1(t){return strTranslate$7(t.xaxis._offset,t.yaxis._offset)}var helpers$6={p2r:p2r$2,r2p:r2p$1,axValue:axValue$1,getTransform:getTransform$1},helpers$5=createCommonjsModule((function(t,e){var r=constants$a.CIRCLE_SIDES,n=constants$a.SQRT2,i=helpers$6.p2r,a=helpers$6.r2p,o=[0,3,4,5,6,1,2],s=[0,3,4,1,2];function l(t,e){return Math.abs(t-e)<=1e-6}function c(t,e){var r=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(r*r+n*n)}e.writePaths=function(t){var e=t.length;if(!e)return"M0,0Z";for(var r="",n=0;n<e;n++)for(var i=t[n].length,a=0;a<i;a++){var l=t[n][a][0];if("Z"===l)r+="Z";else for(var c=t[n][a].length,u=0;u<c;u++){var d=u;"Q"===l||"S"===l?d=s[u]:"C"===l&&(d=o[u]),r+=t[n][a][d],u>0&&u<c-1&&(r+=",")}}return r},e.readPaths=function(t,e,n,o){var s,l,c,u=parseSvgPath(t),d=[],h=-1,g=0,f=0,p=function(){l=g,c=f};p();for(var m=0;m<u.length;m++){var y,b,v,x,I=[],B=u[m][0],C=B;switch(B){case"M":h++,d[h]=[],g=+u[m][1],f=+u[m][2],I.push([C,g,f]),p();break;case"Q":case"S":y=+u[m][1],v=+u[m][2],g=+u[m][3],f=+u[m][4],I.push([C,g,f,y,v]);break;case"C":y=+u[m][1],v=+u[m][2],b=+u[m][3],x=+u[m][4],g=+u[m][5],f=+u[m][6],I.push([C,g,f,y,v,b,x]);break;case"T":case"L":g=+u[m][1],f=+u[m][2],I.push([C,g,f]);break;case"H":C="L",g=+u[m][1],I.push([C,g,f]);break;case"V":C="L",f=+u[m][1],I.push([C,g,f]);break;case"A":C="L";var F=+u[m][1],A=+u[m][2];+u[m][4]||(F=-F,A=-A);var Q=g-F,_=f;for(s=1;s<=r/2;s++){var w=2*Math.PI*s/r;I.push([C,Q+F*Math.cos(w),_+A*Math.sin(w)])}break;case"Z":g===l&&f===c||(g=l,f=c,I.push([C,g,f]))}for(var U=(n||{}).domain,S=e._fullLayout._size,E=n&&"pixel"===n.xsizemode,L=n&&"pixel"===n.ysizemode,T=!1===o,R=0;R<I.length;R++){for(s=0;s+2<7;s+=2){var k=I[R][s+1],G=I[R][s+2];void 0!==k&&void 0!==G&&(g=k,f=G,n&&(n.xaxis&&n.xaxis.p2r?(T&&(k-=n.xaxis._offset),k=E?a(n.xaxis,n.xanchor)+k:i(n.xaxis,k)):(T&&(k-=S.l),U?k=U.x[0]+k/S.w:k/=S.w),n.yaxis&&n.yaxis.p2r?(T&&(G-=n.yaxis._offset),G=L?a(n.yaxis,n.yanchor)-G:i(n.yaxis,G)):(T&&(G-=S.t),G=U?U.y[1]-G/S.h:1-G/S.h)),I[R][s+1]=k,I[R][s+2]=G)}d[h].push(I[R].slice())}}return d},e.pointsShapeRectangle=function(t){if(5!==t.length)return!1;for(var e=1;e<3;e++){if(!l(t[0][e]-t[1][e],t[3][e]-t[2][e]))return!1;if(!l(t[0][e]-t[3][e],t[1][e]-t[2][e]))return!1}return!(!l(t[0][1],t[1][1])&&!l(t[0][1],t[3][1]))&&!!(c(t[0],t[1])*c(t[0],t[3]))},e.pointsShapeEllipse=function(t){var e=t.length;if(e!==r+1)return!1;e=r;for(var n=0;n<e;n++){var i=(2*e-n)%e,a=(e/2+i)%e,o=(e/2+n)%e;if(!l(c(t[n],t[o]),c(t[i],t[a])))return!1}return!0},e.handleEllipse=function(t,i,a){if(!t)return[i,a];var o=e.ellipseOver({x0:i[0],y0:i[1],x1:a[0],y1:a[1]}),s=(o.x1+o.x0)/2,l=(o.y1+o.y0)/2,c=(o.x1-o.x0)/2,u=(o.y1-o.y0)/2;c||(c=u/=n),u||(u=c/=n);for(var d=[],h=0;h<r;h++){var g=2*h*Math.PI/r;d.push([s+c*Math.cos(g),l+u*Math.sin(g)])}return d},e.ellipseOver=function(t){var e=t.x0,r=t.y0,i=t.x1,a=t.y1,o=i-e,s=a-r,l=((e-=o)+i)/2,c=((r-=s)+a)/2;return{x0:l-(o*=n),y0:c-(s*=n),x1:l+o,y1:c+s}}})),drawMode$2=helpers$7.drawMode,openMode$1=helpers$7.openMode,i000$1=constants$a.i000,i090$1=constants$a.i090,i180$1=constants$a.i180,i270$1=constants$a.i270,cos45=constants$a.cos45,sin45=constants$a.sin45,p2r$1=helpers$6.p2r,r2p=helpers$6.r2p,clearSelect$2=handle_outline.clearSelect,readPaths$1=helpers$5.readPaths,writePaths$1=helpers$5.writePaths,ellipseOver=helpers$5.ellipseOver,newshapes=function(t,e){if(t.length){var r=t[0][0];if(r){var n=r.getAttribute("d"),i=e.gd,a=i._fullLayout.newshape,o=e.plotinfo,s=o.xaxis,l=o.yaxis,c=!!o.domain||!o.xaxis,u=!!o.domain||!o.yaxis,d=e.isActiveShape,h=e.dragmode,g=(i.layout||{}).shapes||[];if(!drawMode$2(h)&&void 0!==d){var f=i._fullLayout._activeShapeIndex;if(f<g.length)switch(i._fullLayout.shapes[f].type){case"rect":h="drawrect";break;case"circle":h="drawcircle";break;case"line":h="drawline";break;case"path":var p=g[f].path||"";h="Z"===p[p.length-1]?"drawclosedpath":"drawopenpath"}}var m,y=openMode$1(h),b=readPaths$1(n,i,o,d),v={editable:!0,xref:c?"paper":s._id,yref:u?"paper":l._id,layer:a.layer,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};if(y||(v.fillcolor=a.fillcolor,v.fillrule=a.fillrule),1===b.length&&(m=b[0]),m&&"drawrect"===h)v.type="rect",v.x0=m[0][1],v.y0=m[0][2],v.x1=m[2][1],v.y1=m[2][2];else if(m&&"drawline"===h)v.type="line",v.x0=m[0][1],v.y0=m[0][2],v.x1=m[1][1],v.y1=m[1][2];else if(m&&"drawcircle"===h){v.type="circle";var x=m[i000$1][1],I=m[i090$1][1],B=m[i180$1][1],C=m[i270$1][1],F=m[i000$1][2],A=m[i090$1][2],Q=m[i180$1][2],_=m[i270$1][2],w=o.xaxis&&("date"===o.xaxis.type||"log"===o.xaxis.type),U=o.yaxis&&("date"===o.yaxis.type||"log"===o.yaxis.type);w&&(x=r2p(o.xaxis,x),I=r2p(o.xaxis,I),B=r2p(o.xaxis,B),C=r2p(o.xaxis,C)),U&&(F=r2p(o.yaxis,F),A=r2p(o.yaxis,A),Q=r2p(o.yaxis,Q),_=r2p(o.yaxis,_));var S=(I+C)/2,E=(F+Q)/2,L=ellipseOver({x0:S,y0:E,x1:S+(C-I+B-x)/2*cos45,y1:E+(_-A+Q-F)/2*sin45});w&&(L.x0=p2r$1(o.xaxis,L.x0),L.x1=p2r$1(o.xaxis,L.x1)),U&&(L.y0=p2r$1(o.yaxis,L.y0),L.y1=p2r$1(o.yaxis,L.y1)),v.x0=L.x0,v.y0=L.y0,v.x1=L.x1,v.y1=L.y1}else v.type="path",s&&l&&fixDatesForPaths(b,s,l),v.path=writePaths$1(b),m=null;clearSelect$2(i);for(var T=e.editHelpers,R=(T||{}).modifyItem,k=[],G=0;G<g.length;G++){var N=i._fullLayout.shapes[G];if(k[G]=N._input,void 0!==d&&G===i._fullLayout._activeShapeIndex){var M=v;switch(N.type){case"line":case"rect":case"circle":R("x0",M.x0),R("x1",M.x1),R("y0",M.y0),R("y1",M.y1);break;case"path":R("path",M.path)}}}return void 0===d?(k.push(v),k):T?T.getUpdateObj():{}}}};function fixDatesForPaths(t,e,r){var n="date"===e.type,i="date"===r.type;if(!n&&!i)return t;for(var a=0;a<t.length;a++)for(var o=0;o<t[a].length;o++)for(var s=0;s+2<t[a][o].length;s+=2)n&&(t[a][o][s+1]=t[a][o][s+1].replace(" ","_")),i&&(t[a][o][s+2]=t[a][o][s+2].replace(" ","_"));return t}var drawMode$1=helpers$7.drawMode,i000=constants$a.i000,i090=constants$a.i090,i180=constants$a.i180,i270=constants$a.i270,clearOutlineControllers$1=handle_outline.clearOutlineControllers,pointsShapeRectangle=helpers$5.pointsShapeRectangle,pointsShapeEllipse=helpers$5.pointsShapeEllipse,writePaths=helpers$5.writePaths,display_outlines=function t(e,r,n,i){i||(i=0);var a=n.gd;function o(){t(e,r,n,i++),pointsShapeEllipse(e[0])&&s({redrawing:!0})}function s(t){n.isActiveShape=!1;var e=newshapes(r,n);Object.keys(e).length&&registry.call((t||{}).redrawing?"relayout":"_guiRelayout",a,e)}var l,c,u,d,h,g=n.isActiveShape,f=a._fullLayout._zoomlayer,p=n.dragmode;(drawMode$1(p)?a._fullLayout._drawing=!0:a._fullLayout._activeShapeIndex>=0&&clearOutlineControllers$1(a),r.attr("d",writePaths(e)),g&&!i)&&(h=recordPositions([],e),function(t){l=[];for(var r=0;r<e.length;r++){var n=e[r],i=!pointsShapeRectangle(n)&&pointsShapeEllipse(n);l[r]=[];for(var o=0;o<n.length;o++)if("Z"!==n[o][0]&&(!i||o===i000||o===i090||o===i180||o===i270)){var s=n[o][1],c=n[o][2],u=t.append("circle").classed("cursor-grab",!0).attr("data-i",r).attr("data-j",o).attr("cx",s).attr("cy",c).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});l[r][o]={element:u.node(),gd:a,prepFn:m,doneFn:b,clickFn:v},dragelement.init(l[r][o])}}}(f.append("g").attr("class","outline-controllers")),function(){if(c=[],!e.length)return;var t=0;c[t]={element:r[0][0],gd:a,prepFn:I,doneFn:B},dragelement.init(c[t])}());function m(t){u=+t.srcElement.getAttribute("data-i"),d=+t.srcElement.getAttribute("data-j"),l[u][d].moveFn=y}function y(t,r){if(e.length){var n=h[u][d][1],i=h[u][d][2],a=e[u],s=a.length;if(pointsShapeRectangle(a)){for(var l=0;l<s;l++)if(l!==d){var c=a[l];c[1]===a[d][1]&&(c[1]=n+t),c[2]===a[d][2]&&(c[2]=i+r)}if(a[d][1]=n+t,a[d][2]=i+r,!pointsShapeRectangle(a))for(var g=0;g<s;g++)for(var f=0;f<a[g].length;f++)a[g][f]=h[u][g][f]}else a[d][1]=n+t,a[d][2]=i+r;o()}}function b(){s()}function v(t,r){if(2===t){u=+r.srcElement.getAttribute("data-i"),d=+r.srcElement.getAttribute("data-j");var n=e[u];pointsShapeRectangle(n)||pointsShapeEllipse(n)||function(){if(e.length&&e[u]&&e[u].length){for(var t=[],r=0;r<e[u].length;r++)r!==d&&t.push(e[u][r]);t.length>1&&(2!==t.length||"Z"!==t[1][0])&&(0===d&&(t[0][0]="M"),e[u]=t,o(),s())}}()}}function x(t,r){!function(t,r){if(e.length)for(var n=0;n<e.length;n++)for(var i=0;i<e[n].length;i++)for(var a=0;a+2<e[n][i].length;a+=2)e[n][i][a+1]=h[n][i][a+1]+t,e[n][i][a+2]=h[n][i][a+2]+r}(t,r),o()}function I(t){(u=+t.srcElement.getAttribute("data-i"))||(u=0),c[u].moveFn=x}function B(){s()}};function recordPositions(t,e){for(var r=0;r<e.length;r++){var n=e[r];t[r]=[];for(var i=0;i<n.length;i++){t[r][i]=[];for(var a=0;a<n[i].length;a++)t[r][i][a]=n[i][a]}}return t}var constants$9={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}},helpers$4=createCommonjsModule((function(t,e){e.rangeToShapePosition=function(t){return"log"===t.type?t.r2d:function(t){return t}},e.shapePositionToRange=function(t){return"log"===t.type?t.d2r:function(t){return t}},e.decodeDate=function(t){return function(e){return e.replace&&(e=e.replace("_"," ")),t(e)}},e.encodeDate=function(t){return function(e){return t(e).replace(" ","_")}},e.extractPathCoords=function(t,e){var r=[];return t.match(constants$9.segmentRE).forEach((function(t){var n=e[t.charAt(0)].drawn;if(void 0!==n){var i=t.substr(1).match(constants$9.paramRE);!i||i.length<n||r.push(lib_1.cleanNumber(i[n]))}})),r},e.getDataToPixel=function(t,r,n,i){var a,o=t._fullLayout._size;if(r)if("domain"===i)a=function(t){return r._length*(n?1-t:t)+r._offset};else{var s=e.shapePositionToRange(r);a=function(t){return r._offset+r.r2p(s(t,!0))},"date"===r.type&&(a=e.decodeDate(a))}else a=n?function(t){return o.t+o.h*(1-t)}:function(t){return o.l+o.w*t};return a},e.getPixelToData=function(t,r,n,i){var a,o=t._fullLayout._size;if(r)if("domain"===i)a=function(t){var e=(t-r._offset)/r._length;return n?1-e:e};else{var s=e.rangeToShapePosition(r);a=function(t){return s(r.p2r(t-r._offset))}}else a=n?function(t){return 1-(t-o.t)/o.h}:function(t){return(t-o.l)/o.w};return a},e.roundPositionForSharpStrokeRendering=function(t,e){var r=1===Math.round(e%2),n=Math.round(t);return r?n+.5:n},e.makeOptionsAndPlotinfo=function(t,e){var r=t._fullLayout.shapes[e]||{},n=t._fullLayout._plots[r.xref+r.yref];return!!n?n._hadPlotinfo=!0:(n={},r.xref&&"paper"!==r.xref&&(n.xaxis=t._fullLayout[r.xref+"axis"]),r.yref&&"paper"!==r.yref&&(n.yaxis=t._fullLayout[r.yref+"axis"])),n.xsizemode=r.xsizemode,n.ysizemode=r.ysizemode,n.xanchor=r.xanchor,n.yanchor=r.yanchor,{options:r,plotinfo:n}}})),readPaths=helpers$5.readPaths,clearOutlineControllers=handle_outline.clearOutlineControllers,arrayEditor$4=plot_template.arrayEditor,draw_1$2={draw:draw$9,drawOne:drawOne$1,eraseActiveShape:eraseActiveShape};function draw$9(t){var e=t._fullLayout;for(var r in e._shapeUpperLayer.selectAll("path").remove(),e._shapeLowerLayer.selectAll("path").remove(),e._plots){var n=e._plots[r].shapelayer;n&&n.selectAll("path").remove()}for(var i=0;i<e.shapes.length;i++)e.shapes[i].visible&&drawOne$1(t,i)}function shouldSkipEdits(t){return!!t._fullLayout._drawing}function couldHaveActiveShape(t){return!t._context.edits.shapePosition}function drawOne$1(t,e){t._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+e+'"]').remove();var r=helpers$4.makeOptionsAndPlotinfo(t,e),n=r.options,i=r.plotinfo;if(n._input&&!1!==n.visible)if("below"!==n.layer)a(t._fullLayout._shapeUpperLayer);else if("paper"===n.xref||"paper"===n.yref)a(t._fullLayout._shapeLowerLayer);else{if(i._hadPlotinfo)a((i.mainplotinfo||i).shapelayer);else a(t._fullLayout._shapeLowerLayer)}function a(r){var a=getPathString(t,n),o={"data-index":e,"fill-rule":n.fillrule,d:a},s=n.opacity,l=n.fillcolor,c=n.line.width?n.line.color:"rgba(0,0,0,0)",u=n.line.width,d=n.line.dash;u||!0!==n.editable||(u=5,d="solid");var h="Z"!==a[a.length-1],g=couldHaveActiveShape(t)&&n.editable&&t._fullLayout._activeShapeIndex===e;g&&(l=h?"rgba(0,0,0,0)":t._fullLayout.activeshape.fillcolor,s=t._fullLayout.activeshape.opacity);var f,p=r.append("path").attr(o).style("opacity",s).call(color_1.stroke,c).call(color_1.fill,l).call(drawing_1.dashLine,d,u);if(setClipPath(p,t,n),(g||t._context.edits.shapePosition)&&(f=arrayEditor$4(t.layout,"shapes",n)),g){p.style({cursor:"move"});var m={element:p.node(),plotinfo:i,gd:t,editHelpers:f,isActiveShape:!0},y=readPaths(a,t);display_outlines(y,p,m)}else t._context.edits.shapePosition?setupDragElement$1(t,p,n,e,r,f):!0===n.editable&&p.style("pointer-events",h||color_1.opacity(l)*s<=.5?"stroke":"all");p.node().addEventListener("click",(function(){return activateShape(t,p)}))}}function setClipPath(t,e,r){var n=(r.xref+r.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");drawing_1.setClipUrl(t,n?"clip"+e._fullLayout._uid+n:null,e)}function setupDragElement$1(t,e,r,n,i,a){var o,s,l,c,u,d,h,g,f,p,m,y,b,v,x,I,B="pixel"===r.xsizemode,C="pixel"===r.ysizemode,F="line"===r.type,A="path"===r.type,Q=a.modifyItem,_=axes_1.getFromId(t,r.xref),w=axes_1.getRefType(r.xref),U=axes_1.getFromId(t,r.yref),S=axes_1.getRefType(r.yref),E=helpers$4.getDataToPixel(t,_,!1,w),L=helpers$4.getDataToPixel(t,U,!0,S),T=helpers$4.getPixelToData(t,_,!1,w),R=helpers$4.getPixelToData(t,U,!0,S),k=F?function(){var t=10,a=Math.max(r.line.width,t),o=i.append("g").attr("data-index",n);o.append("path").attr("d",e.attr("d")).style({cursor:"move","stroke-width":a,"stroke-opacity":"0"});var s={"fill-opacity":"0"},l=Math.max(a/2,t);return o.append("circle").attr({"data-line-point":"start-point",cx:B?E(r.xanchor)+r.x0:E(r.x0),cy:C?L(r.yanchor)-r.y0:L(r.y0),r:l}).style(s).classed("cursor-grab",!0),o.append("circle").attr({"data-line-point":"end-point",cx:B?E(r.xanchor)+r.x1:E(r.x1),cy:C?L(r.yanchor)-r.y1:L(r.y1),r:l}).style(s).classed("cursor-grab",!0),o}():e,G={element:k.node(),gd:t,prepFn:function(n){if(shouldSkipEdits(t))return;B&&(u=E(r.xanchor));C&&(d=L(r.yanchor));"path"===r.type?x=r.path:(o=B?r.x0:E(r.x0),s=C?r.y0:L(r.y0),l=B?r.x1:E(r.x1),c=C?r.y1:L(r.y1));o<l?(f=o,b="x0",p=l,v="x1"):(f=l,b="x1",p=o,v="x0");!C&&s<c||C&&s>c?(h=s,m="y0",g=c,y="y1"):(h=c,m="y1",g=s,y="y0");N(n),X(i,r),function(t,e,r){var n=e.xref,i=e.yref,a=axes_1.getFromId(r,n),o=axes_1.getFromId(r,i),s="";"paper"===n||a.autorange||(s+=n);"paper"===i||o.autorange||(s+=i);drawing_1.setClipUrl(t,s?"clip"+r._fullLayout._uid+s:null,r)}(e,r,t),G.moveFn="move"===I?M:D,G.altKey=n.altKey},doneFn:function(){if(shouldSkipEdits(t))return;setcursor(e),V(i),setClipPath(e,t,r),registry.call("_guiRelayout",t,a.getUpdateObj())},clickFn:function(){if(shouldSkipEdits(t))return;V(i)}};function N(r){if(shouldSkipEdits(t))I=null;else if(F)I="path"===r.target.tagName?"move":"start-point"===r.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var n=G.element.getBoundingClientRect(),i=n.right-n.left,a=n.bottom-n.top,o=r.clientX-n.left,s=r.clientY-n.top,l=!A&&i>10&&a>10&&!r.shiftKey?dragelement.getCursor(o/i,1-s/a):"move";setcursor(e,l),I=l.split("-")[0]}}function M(n,a){if("path"===r.type){var h=function(t){return t},g=h,f=h;B?Q("xanchor",r.xanchor=T(u+n)):(g=function(t){return T(E(t)+n)},_&&"date"===_.type&&(g=helpers$4.encodeDate(g))),C?Q("yanchor",r.yanchor=R(d+a)):(f=function(t){return R(L(t)+a)},U&&"date"===U.type&&(f=helpers$4.encodeDate(f))),Q("path",r.path=movePath(x,g,f))}else B?Q("xanchor",r.xanchor=T(u+n)):(Q("x0",r.x0=T(o+n)),Q("x1",r.x1=T(l+n))),C?Q("yanchor",r.yanchor=R(d+a)):(Q("y0",r.y0=R(s+a)),Q("y1",r.y1=R(c+a)));e.attr("d",getPathString(t,r)),X(i,r)}function D(n,a){if(A){var w=function(t){return t},S=w,k=w;B?Q("xanchor",r.xanchor=T(u+n)):(S=function(t){return T(E(t)+n)},_&&"date"===_.type&&(S=helpers$4.encodeDate(S))),C?Q("yanchor",r.yanchor=R(d+a)):(k=function(t){return R(L(t)+a)},U&&"date"===U.type&&(k=helpers$4.encodeDate(k))),Q("path",r.path=movePath(x,S,k))}else if(F){if("resize-over-start-point"===I){var G=o+n,N=C?s-a:s+a;Q("x0",r.x0=B?G:T(G)),Q("y0",r.y0=C?N:R(N))}else if("resize-over-end-point"===I){var M=l+n,D=C?c-a:c+a;Q("x1",r.x1=B?M:T(M)),Q("y1",r.y1=C?D:R(D))}}else{var V=function(t){return-1!==I.indexOf(t)},W=V("n"),Z=V("s"),O=V("w"),$=V("e"),H=W?h+a:h,Y=Z?g+a:g,P=O?f+n:f,z=$?p+n:p;C&&(W&&(H=h-a),Z&&(Y=g-a)),(!C&&Y-H>10||C&&H-Y>10)&&(Q(m,r[m]=C?H:R(H)),Q(y,r[y]=C?Y:R(Y))),z-P>10&&(Q(b,r[b]=B?P:T(P)),Q(v,r[v]=B?z:T(z)))}e.attr("d",getPathString(t,r)),X(i,r)}function X(t,e){(B||C)&&function(){var r="path"!==e.type,n=t.selectAll(".visual-cue").data([0]),i=1;n.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":i}).classed("visual-cue",!0);var a=E(B?e.xanchor:lib_1.midRange(r?[e.x0,e.x1]:helpers$4.extractPathCoords(e.path,constants$9.paramIsX))),o=L(C?e.yanchor:lib_1.midRange(r?[e.y0,e.y1]:helpers$4.extractPathCoords(e.path,constants$9.paramIsY)));if(a=helpers$4.roundPositionForSharpStrokeRendering(a,i),o=helpers$4.roundPositionForSharpStrokeRendering(o,i),B&&C){var s="M"+(a-1-i)+","+(o-1-i)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";n.attr("d",s)}else if(B){var l="M"+(a-1-i)+","+(o-9-i)+"v18 h2 v-18 Z";n.attr("d",l)}else{var c="M"+(a-9-i)+","+(o-1-i)+"h18 v2 h-18 Z";n.attr("d",c)}}()}function V(t){t.selectAll(".visual-cue").remove()}dragelement.init(G),k.node().onmousemove=N}function getPathString(t,e){var r,n,i,a,o,s,l,c,u=e.type,d=axes_1.getRefType(e.xref),h=axes_1.getRefType(e.yref),g=axes_1.getFromId(t,e.xref),f=axes_1.getFromId(t,e.yref),p=t._fullLayout._size;if(g?"domain"===d?n=function(t){return g._offset+g._length*t}:(r=helpers$4.shapePositionToRange(g),n=function(t){return g._offset+g.r2p(r(t,!0))}):n=function(t){return p.l+p.w*t},f?"domain"===h?a=function(t){return f._offset+f._length*(1-t)}:(i=helpers$4.shapePositionToRange(f),a=function(t){return f._offset+f.r2p(i(t,!0))}):a=function(t){return p.t+p.h*(1-t)},"path"===u)return g&&"date"===g.type&&(n=helpers$4.decodeDate(n)),f&&"date"===f.type&&(a=helpers$4.decodeDate(a)),convertPath(e,n,a);if("pixel"===e.xsizemode){var m=n(e.xanchor);o=m+e.x0,s=m+e.x1}else o=n(e.x0),s=n(e.x1);if("pixel"===e.ysizemode){var y=a(e.yanchor);l=y-e.y0,c=y-e.y1}else l=a(e.y0),c=a(e.y1);if("line"===u)return"M"+o+","+l+"L"+s+","+c;if("rect"===u)return"M"+o+","+l+"H"+s+"V"+c+"H"+o+"Z";var b=(o+s)/2,v=(l+c)/2,x=Math.abs(b-o),I=Math.abs(v-l),B="A"+x+","+I,C=b+x+","+v;return"M"+C+B+" 0 1,1 "+(b+","+(v-I))+B+" 0 0,1 "+C+"Z"}function convertPath(t,e,r){var n=t.path,i=t.xsizemode,a=t.ysizemode,o=t.xanchor,s=t.yanchor;return n.replace(constants$9.segmentRE,(function(t){var n=0,l=t.charAt(0),c=constants$9.paramIsX[l],u=constants$9.paramIsY[l],d=constants$9.numParams[l],h=t.substr(1).replace(constants$9.paramRE,(function(t){return c[n]?t="pixel"===i?e(o)+Number(t):e(t):u[n]&&(t="pixel"===a?r(s)-Number(t):r(t)),++n>d&&(t="X"),t}));return n>d&&(h=h.replace(/[\s,]*X.*/,""),lib_1.log("Ignoring extra params in segment "+t)),l+h}))}function movePath(t,e,r){return t.replace(constants$9.segmentRE,(function(t){var n=0,i=t.charAt(0),a=constants$9.paramIsX[i],o=constants$9.paramIsY[i],s=constants$9.numParams[i];return i+t.substr(1).replace(constants$9.paramRE,(function(t){return n>=s||(a[n]?t=e(t):o[n]&&(t=r(t)),n++),t}))}))}function activateShape(t,e){if(couldHaveActiveShape(t)){var r=+e.node().getAttribute("data-index");if(r>=0){if(r===t._fullLayout._activeShapeIndex)return void deactivateShape(t);t._fullLayout._activeShapeIndex=r,t._fullLayout._deactivateShape=deactivateShape,draw$9(t)}}}function deactivateShape(t){couldHaveActiveShape(t)&&(t._fullLayout._activeShapeIndex>=0&&(clearOutlineControllers(t),delete t._fullLayout._activeShapeIndex,draw$9(t)))}function eraseActiveShape(t){if(couldHaveActiveShape(t)){clearOutlineControllers(t);var e=t._fullLayout._activeShapeIndex,r=(t.layout||{}).shapes||[];if(e<r.length){for(var n=[],i=0;i<r.length;i++)i!==e&&n.push(r[i]);delete t._fullLayout._activeShapeIndex,registry.call("_guiRelayout",t,{shapes:n})}}}var buttons=createCommonjsModule((function(t){var e=draw_1$2.eraseActiveShape,r=lib_1._,n=t.exports={};function i(t,e){var r,n,i=e.currentTarget,a=i.getAttribute("data-attr"),o=i.getAttribute("data-val")||!0,s=t._fullLayout,l={},c=axis_ids.list(t,null,!0),u=s._cartesianSpikesEnabled;if("zoom"===a){var d,h="in"===o?.5:2,g=(1+h)/2,f=(1-h)/2;for(n=0;n<c.length;n++)if(!(r=c[n]).fixedrange)if(d=r._name,"auto"===o)l[d+".autorange"]=!0;else if("reset"===o){if(void 0===r._rangeInitial)l[d+".autorange"]=!0;else{var p=r._rangeInitial.slice();l[d+".range[0]"]=p[0],l[d+".range[1]"]=p[1]}void 0!==r._showSpikeInitial&&(l[d+".showspikes"]=r._showSpikeInitial,"on"!==u||r._showSpikeInitial||(u="off"))}else{var m=[r.r2l(r.range[0]),r.r2l(r.range[1])],y=[g*m[0]+f*m[1],g*m[1]+f*m[0]];l[d+".range[0]"]=r.l2r(y[0]),l[d+".range[1]"]=r.l2r(y[1])}}else"hovermode"!==a||"x"!==o&&"y"!==o||(o=s._isHoriz?"y":"x",i.setAttribute("data-val",o)),l[a]=o;s._cartesianSpikesEnabled=u,registry.call("_guiRelayout",t,l)}function a(t,e){for(var r=e.currentTarget,n=r.getAttribute("data-attr"),i=r.getAttribute("data-val")||!0,a=t._fullLayout._subplots.gl3d||[],o={},s=n.split("."),l=0;l<a.length;l++)o[a[l]+"."+s[1]]=i;var c="pan"===i?i:"zoom";o.dragmode=c,registry.call("_guiRelayout",t,o)}function o(t,e){for(var r=e.currentTarget.getAttribute("data-attr"),n="resetLastSave"===r,i="resetDefault"===r,a=t._fullLayout,o=a._subplots.gl3d||[],s={},l=0;l<o.length;l++){var c,u=o[l],d=u+".camera",h=u+".aspectratio",g=u+".aspectmode",f=a[u]._scene;n?(s[d+".up"]=f.viewInitial.up,s[d+".eye"]=f.viewInitial.eye,s[d+".center"]=f.viewInitial.center,c=!0):i&&(s[d+".up"]=null,s[d+".eye"]=null,s[d+".center"]=null,c=!0),c&&(s[h+".x"]=f.viewInitial.aspectratio.x,s[h+".y"]=f.viewInitial.aspectratio.y,s[h+".z"]=f.viewInitial.aspectratio.z,s[g]=f.viewInitial.aspectmode)}registry.call("_guiRelayout",t,s)}function s(t,e){var r=e.currentTarget,n=r._previousVal,i=t._fullLayout,a=i._subplots.gl3d||[],o=["xaxis","yaxis","zaxis"],s={},l={};if(n)l=n,r._previousVal=null;else{for(var c=0;c<a.length;c++){var u=a[c],d=i[u],h=u+".hovermode";s[h]=d.hovermode,l[h]=!1;for(var g=0;g<3;g++){var f=o[g],p=u+"."+f+".showspikes";l[p]=!1,s[p]=d[f].showspikes}}r._previousVal=s}return l}function l(t,e){for(var r=e.currentTarget,n=r.getAttribute("data-attr"),i=r.getAttribute("data-val")||!0,a=t._fullLayout,o=a._subplots.geo||[],s=0;s<o.length;s++){var l=o[s],c=a[l];if("zoom"===n){var u=c.projection.scale,d="in"===i?2*u:.5*u;registry.call("_guiRelayout",t,l+".projection.scale",d)}}"reset"===n&&h(t,"geo")}function c(t){var e=t._fullLayout;return!e.hovermode&&(e._has("cartesian")?e._isHoriz?"y":"x":"closest")}function u(t){var e=c(t);registry.call("_guiRelayout",t,"hovermode",e)}function d(t,e){for(var r=e.currentTarget.getAttribute("data-val"),n=t._fullLayout,i=n._subplots.mapbox||[],a={},o=0;o<i.length;o++){var s=i[o],l=n[s].zoom,c="in"===r?1.05*l:l/1.05;a[s+".zoom"]=c}registry.call("_guiRelayout",t,a)}function h(t,e){for(var r=t._fullLayout,n=r._subplots[e]||[],i={},a=0;a<n.length;a++)for(var o=n[a],s=r[o]._subplot.viewInitial,l=Object.keys(s),c=0;c<l.length;c++){var u=l[c];i[o+"."+u]=s[u]}registry.call("_guiRelayout",t,i)}n.toImage={name:"toImage",title:function(t){var e=(t._context.toImageButtonOptions||{}).format||"png";return r(t,"png"===e?"Download plot as a png":"Download plot")},icon:ploticon.camera,click:function(t){var e=t._context.toImageButtonOptions,n={format:e.format||"png"};lib_1.notifier(r(t,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==n.format&&lib_1.isIE()&&(lib_1.notifier(r(t,"IE only supports svg.  Changing format to svg."),"long"),n.format="svg"),["filename","width","height","scale"].forEach((function(t){t in e&&(n[t]=e[t])})),registry.call("downloadImage",t,n).then((function(e){lib_1.notifier(r(t,"Snapshot succeeded")+" - "+e,"long")})).catch((function(){lib_1.notifier(r(t,"Sorry, there was a problem downloading your snapshot!"),"long")}))}},n.sendDataToCloud={name:"sendDataToCloud",title:function(t){return r(t,"Edit in Chart Studio")},icon:ploticon.disk,click:function(t){plots_1.sendDataToCloud(t)}},n.editInChartStudio={name:"editInChartStudio",title:function(t){return r(t,"Edit in Chart Studio")},icon:ploticon.pencil,click:function(t){plots_1.sendDataToCloud(t)}},n.zoom2d={name:"zoom2d",_cat:"zoom",title:function(t){return r(t,"Zoom")},attr:"dragmode",val:"zoom",icon:ploticon.zoombox,click:i},n.pan2d={name:"pan2d",_cat:"pan",title:function(t){return r(t,"Pan")},attr:"dragmode",val:"pan",icon:ploticon.pan,click:i},n.select2d={name:"select2d",_cat:"select",title:function(t){return r(t,"Box Select")},attr:"dragmode",val:"select",icon:ploticon.selectbox,click:i},n.lasso2d={name:"lasso2d",_cat:"lasso",title:function(t){return r(t,"Lasso Select")},attr:"dragmode",val:"lasso",icon:ploticon.lasso,click:i},n.drawclosedpath={name:"drawclosedpath",title:function(t){return r(t,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:ploticon.drawclosedpath,click:i},n.drawopenpath={name:"drawopenpath",title:function(t){return r(t,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:ploticon.drawopenpath,click:i},n.drawline={name:"drawline",title:function(t){return r(t,"Draw line")},attr:"dragmode",val:"drawline",icon:ploticon.drawline,click:i},n.drawrect={name:"drawrect",title:function(t){return r(t,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:ploticon.drawrect,click:i},n.drawcircle={name:"drawcircle",title:function(t){return r(t,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:ploticon.drawcircle,click:i},n.eraseshape={name:"eraseshape",title:function(t){return r(t,"Erase active shape")},icon:ploticon.eraseshape,click:e},n.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(t){return r(t,"Zoom in")},attr:"zoom",val:"in",icon:ploticon.zoom_plus,click:i},n.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(t){return r(t,"Zoom out")},attr:"zoom",val:"out",icon:ploticon.zoom_minus,click:i},n.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(t){return r(t,"Autoscale")},attr:"zoom",val:"auto",icon:ploticon.autoscale,click:i},n.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(t){return r(t,"Reset axes")},attr:"zoom",val:"reset",icon:ploticon.home,click:i},n.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(t){return r(t,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:ploticon.tooltip_basic,gravity:"ne",click:i},n.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(t){return r(t,"Compare data on hover")},attr:"hovermode",val:function(t){return t._fullLayout._isHoriz?"y":"x"},icon:ploticon.tooltip_compare,gravity:"ne",click:i},n.zoom3d={name:"zoom3d",_cat:"zoom",title:function(t){return r(t,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:ploticon.zoombox,click:a},n.pan3d={name:"pan3d",_cat:"pan",title:function(t){return r(t,"Pan")},attr:"scene.dragmode",val:"pan",icon:ploticon.pan,click:a},n.orbitRotation={name:"orbitRotation",title:function(t){return r(t,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:ploticon["3d_rotate"],click:a},n.tableRotation={name:"tableRotation",title:function(t){return r(t,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:ploticon["z-axis"],click:a},n.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(t){return r(t,"Reset camera to default")},attr:"resetDefault",icon:ploticon.home,click:o},n.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(t){return r(t,"Reset camera to last save")},attr:"resetLastSave",icon:ploticon.movie,click:o},n.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(t){return r(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:ploticon.tooltip_basic,gravity:"ne",click:function(t,e){var r=s(t,e);registry.call("_guiRelayout",t,r)}},n.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(t){return r(t,"Zoom in")},attr:"zoom",val:"in",icon:ploticon.zoom_plus,click:l},n.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(t){return r(t,"Zoom out")},attr:"zoom",val:"out",icon:ploticon.zoom_minus,click:l},n.resetGeo={name:"resetGeo",_cat:"reset",title:function(t){return r(t,"Reset")},attr:"reset",val:null,icon:ploticon.autoscale,click:l},n.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(t){return r(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:ploticon.tooltip_basic,gravity:"ne",click:u},n.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(t){return r(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:ploticon.tooltip_basic,gravity:"ne",click:u},n.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(t){return r(t,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:ploticon.tooltip_basic,gravity:"ne",click:u},n.resetViewSankey={name:"resetSankeyGroup",title:function(t){return r(t,"Reset view")},icon:ploticon.home,click:function(t){for(var e={"node.groups":[],"node.x":[],"node.y":[]},r=0;r<t._fullData.length;r++){var n=t._fullData[r]._viewInitial;e["node.groups"].push(n.node.groups.slice()),e["node.x"].push(n.node.x.slice()),e["node.y"].push(n.node.y.slice())}registry.call("restyle",t,e)}},n.toggleHover={name:"toggleHover",title:function(t){return r(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:ploticon.tooltip_basic,gravity:"ne",click:function(t,e){var r=s(t,e);r.hovermode=c(t),registry.call("_guiRelayout",t,r)}},n.resetViews={name:"resetViews",title:function(t){return r(t,"Reset views")},icon:ploticon.home,click:function(t,e){var r=e.currentTarget;r.setAttribute("data-attr","zoom"),r.setAttribute("data-val","reset"),i(t,e),r.setAttribute("data-attr","resetLastSave"),o(t,e),h(t,"geo"),h(t,"mapbox")}},n.toggleSpikelines={name:"toggleSpikelines",title:function(t){return r(t,"Toggle Spike Lines")},icon:ploticon.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(t){var e=t._fullLayout,r=e._cartesianSpikesEnabled;e._cartesianSpikesEnabled="on"===r?"off":"on",registry.call("_guiRelayout",t,function(t){for(var e="on"===t._fullLayout._cartesianSpikesEnabled,r=axis_ids.list(t,null,!0),n={},i=0;i<r.length;i++){var a=r[i];n[a._name+".showspikes"]=!!e||a._showSpikeInitial}return n}(t))}},n.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(t){return r(t,"Reset view")},attr:"reset",icon:ploticon.home,click:function(t){h(t,"mapbox")}},n.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(t){return r(t,"Zoom in")},attr:"zoom",val:"in",icon:ploticon.zoom_plus,click:d},n.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(t){return r(t,"Zoom out")},attr:"zoom",val:"out",icon:ploticon.zoom_minus,click:d}})),buttonList=Object.keys(buttons),DRAW_MODES$1=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],backButtons=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(DRAW_MODES$1),foreButtons=[],addToForeButtons=function(t){if(-1===backButtons.indexOf(t._cat||t.name)){var e=t.name,r=(t._cat||t.name).toLowerCase();-1===foreButtons.indexOf(e)&&foreButtons.push(e),-1===foreButtons.indexOf(r)&&foreButtons.push(r)}};buttonList.forEach((function(t){addToForeButtons(buttons[t])})),foreButtons.sort();var constants$8={DRAW_MODES:DRAW_MODES$1,backButtons:backButtons,foreButtons:foreButtons},attributes$k={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar",description:"Sets the orientation of the modebar."},bgcolor:{valType:"color",editType:"modebar",description:"Sets the background color of the modebar."},color:{valType:"color",editType:"modebar",description:"Sets the color of the icons in the modebar."},activecolor:{valType:"color",editType:"modebar",description:"Sets the color of the active or hovered on icons in the modebar."},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes related to the modebar,","including `hovermode`, `dragmode`, and `showspikes` at both the","root level and inside subplots. Defaults to `layout.uirevision`."].join(" ")},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar",description:["Determines which predefined modebar buttons to add.","Please note that these buttons will only be shown if they are","compatible with all trace types used in a graph.","Similar to `config.modeBarButtonsToAdd` option.","This may include *"+constants$8.backButtons.join("*, *")+"*."].join(" ")},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar",description:["Determines which predefined modebar buttons to remove.","Similar to `config.modeBarButtonsToRemove` option.","This may include *"+constants$8.foreButtons.join("*, *")+"*."].join(" ")}},defaults$h=function(t,e){var r=t.modebar||{},n=plot_template.newContainer(e,"modebar");function i(t,e){return lib_1.coerce(r,n,attributes$k,t,e)}i("orientation"),i("bgcolor",color_1.addOpacity(e.paper_bgcolor,.5));var a=color_1.contrast(color_1.rgb(e.modebar.bgcolor));i("color",color_1.addOpacity(a,.3)),i("activecolor",color_1.addOpacity(a,.7)),i("uirevision",e.uirevision),i("add"),i("remove")},version$1=version$2.version,Parser=new DOMParser;function ModeBar(t){this.container=t.container,this.element=document.createElement("div"),this.update(t.graphInfo,t.buttons),this.container.appendChild(this.element)}var proto$5=ModeBar.prototype;function jsVersion(t){return t+" (v"+version$1+")"}function createModeBar(t,e){var r=t._fullLayout,n=new ModeBar({graphInfo:t,container:r._modebardiv.node(),buttons:e});return r._privateplot&&d3.select(n.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),n}proto$5.update=function(t,e){this.graphInfo=t;var r=this.graphInfo._context,n=this.graphInfo._fullLayout,i="modebar-"+n._uid;this.element.setAttribute("id",i),this._uid=i,this.element.className="modebar","hover"===r.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===n.modebar.orientation&&(this.element.className+=" vertical",e=e.reverse());var a=n.modebar,o="hover"===r.displayModeBar?".js-plotly-plot .plotly:hover ":"";lib_1.deleteRelatedStyleRule(i),lib_1.addRelatedStyleRule(i,o+"#"+i+" .modebar-group","background-color: "+a.bgcolor),lib_1.addRelatedStyleRule(i,"#"+i+" .modebar-btn .icon path","fill: "+a.color),lib_1.addRelatedStyleRule(i,"#"+i+" .modebar-btn:hover .icon path","fill: "+a.activecolor),lib_1.addRelatedStyleRule(i,"#"+i+" .modebar-btn.active .icon path","fill: "+a.activecolor);var s=!this.hasButtons(e),l=this.hasLogo!==r.displaylogo,c=this.locale!==r.locale;if(this.locale=r.locale,(s||l||c)&&(this.removeAllButtons(),this.updateButtons(e),r.watermark||r.displaylogo)){var u=this.getLogo();r.watermark&&(u.className=u.className+" watermark"),"v"===n.modebar.orientation?this.element.insertBefore(u,this.element.childNodes[0]):this.element.appendChild(u),this.hasLogo=!0}this.updateActiveButton()},proto$5.updateButtons=function(t){var e=this;this.buttons=t,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach((function(t){var r=e.createGroup();t.forEach((function(t){var n=t.name;if(!n)throw new Error("must provide button 'name' in button config");if(-1!==e.buttonsNames.indexOf(n))throw new Error("button name '"+n+"' is taken");e.buttonsNames.push(n);var i=e.createButton(t);e.buttonElements.push(i),r.appendChild(i)})),e.element.appendChild(r)}))},proto$5.createGroup=function(){var t=document.createElement("div");return t.className="modebar-group",t},proto$5.createButton=function(t){var e=this,r=document.createElement("a");r.setAttribute("rel","tooltip"),r.className="modebar-btn";var n=t.title;void 0===n?n=t.name:"function"==typeof n&&(n=n(this.graphInfo)),(n||0===n)&&r.setAttribute("data-title",n),void 0!==t.attr&&r.setAttribute("data-attr",t.attr);var i=t.val;if(void 0!==i&&("function"==typeof i&&(i=i(this.graphInfo)),r.setAttribute("data-val",i)),"function"!=typeof t.click)throw new Error("must provide button 'click' function in button config");r.addEventListener("click",(function(r){t.click(e.graphInfo,r),e.updateActiveButton(r.currentTarget)})),r.setAttribute("data-toggle",t.toggle||!1),t.toggle&&d3.select(r).classed("active",!0);var a=t.icon;return"function"==typeof a?r.appendChild(a()):r.appendChild(this.createIcon(a||ploticon.question)),r.setAttribute("data-gravity",t.gravity||"n"),r},proto$5.createIcon=function(t){var e,r=fastIsnumeric(t.height)?Number(t.height):t.ascent-t.descent,n="http://www.w3.org/2000/svg";if(t.path){(e=document.createElementNS(n,"svg")).setAttribute("viewBox",[0,0,t.width,r].join(" ")),e.setAttribute("class","icon");var i=document.createElementNS(n,"path");i.setAttribute("d",t.path),t.transform?i.setAttribute("transform",t.transform):void 0!==t.ascent&&i.setAttribute("transform","matrix(1 0 0 -1 0 "+t.ascent+")"),e.appendChild(i)}t.svg&&(e=Parser.parseFromString(t.svg,"application/xml").childNodes[0]);return e.setAttribute("height","1em"),e.setAttribute("width","1em"),e},proto$5.updateActiveButton=function(t){var e=this.graphInfo._fullLayout,r=void 0!==t?t.getAttribute("data-attr"):null;this.buttonElements.forEach((function(t){var n=t.getAttribute("data-val")||!0,i=t.getAttribute("data-attr"),a="true"===t.getAttribute("data-toggle"),o=d3.select(t);if(a)i===r&&o.classed("active",!o.classed("active"));else{var s=null===i?i:lib_1.nestedProperty(e,i).get();o.classed("active",s===n)}}))},proto$5.hasButtons=function(t){var e=this.buttons;if(!e)return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r){if(t[r].length!==e[r].length)return!1;for(var n=0;n<t[r].length;n++)if(t[r][n].name!==e[r][n].name)return!1}return!0},proto$5.getLogo=function(){var t=this.createGroup(),e=document.createElement("a");return e.href="https://plotly.com/",e.target="_blank",e.setAttribute("data-title",jsVersion(lib_1._(this.graphInfo,"Produced with Plotly.js"))),e.className="modebar-btn plotlyjsicon modebar-btn--logo",e.appendChild(this.createIcon(ploticon.newplotlylogo)),t.appendChild(e),t},proto$5.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},proto$5.destroy=function(){lib_1.removeElement(this.container.querySelector(".modebar")),lib_1.deleteRelatedStyleRule(this._uid)};var modebar$1=createModeBar,isUnifiedHover$1=helpers$a.isUnifiedHover,DRAW_MODES=constants$8.DRAW_MODES,manage=function(t){var e=t._fullLayout,r=t._context,n=e._modeBar;if(r.displayModeBar||r.watermark){if(!Array.isArray(r.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(r.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var i,a=r.modeBarButtons;i=Array.isArray(a)&&a.length?fillCustomButton(a):!r.displayModeBar&&r.watermark?[]:getButtonGroups(t),n?n.update(t,i):e._modeBar=modebar$1(t,i)}else n&&(n.destroy(),delete e._modeBar)};function getButtonGroups(t){var e=t._fullLayout,r=t._fullData,n=t._context;function i(t,e){if("string"==typeof e){if(e.toLowerCase()===t.toLowerCase())return!0}else{var r=e.name,n=e._cat||e.name;if(r===t||n===t.toLowerCase())return!0}return!1}var a=e.modebar.add;"string"==typeof a&&(a=[a]);var o=e.modebar.remove;"string"==typeof o&&(o=[o]);var s=n.modeBarButtonsToAdd.concat(a.filter((function(t){for(var e=0;e<n.modeBarButtonsToRemove.length;e++)if(i(t,n.modeBarButtonsToRemove[e]))return!1;return!0}))),l=n.modeBarButtonsToRemove.concat(o.filter((function(t){for(var e=0;e<n.modeBarButtonsToAdd.length;e++)if(i(t,n.modeBarButtonsToAdd[e]))return!1;return!0}))),c=e._has("cartesian"),u=e._has("gl3d"),d=e._has("geo"),h=e._has("pie"),g=e._has("funnelarea"),f=e._has("gl2d"),p=e._has("ternary"),m=e._has("mapbox"),y=e._has("polar"),b=e._has("smith"),v=e._has("sankey"),x=areAllAxesFixed(e),I=isUnifiedHover$1(e.hovermode),B=[];function C(t){if(t.length){for(var e=[],r=0;r<t.length;r++){for(var n=t[r],i=buttons[n],a=i.name.toLowerCase(),o=(i._cat||i.name).toLowerCase(),s=!1,c=0;c<l.length;c++){var u=l[c].toLowerCase();if(u===a||u===o){s=!0;break}}s||e.push(buttons[n])}B.push(e)}}var F=["toImage"];n.showEditInChartStudio?F.push("editInChartStudio"):n.showSendToCloud&&F.push("sendDataToCloud"),C(F);var A=[],Q=[],_=[],w=[];(c||f||h||g||p)+d+u+m+y+b>1?(Q=["toggleHover"],_=["resetViews"]):d?(A=["zoomInGeo","zoomOutGeo"],Q=["hoverClosestGeo"],_=["resetGeo"]):u?(Q=["hoverClosest3d"],_=["resetCameraDefault3d","resetCameraLastSave3d"]):m?(A=["zoomInMapbox","zoomOutMapbox"],Q=["toggleHover"],_=["resetViewMapbox"]):f?Q=["hoverClosestGl2d"]:h?Q=["hoverClosestPie"]:v?(Q=["hoverClosestCartesian","hoverCompareCartesian"],_=["resetViewSankey"]):Q=["toggleHover"],c&&(Q=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(hasNoHover(r)||I)&&(Q=[]),!c&&!f||x||(A=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==_[0]&&(_=["resetScale2d"])),u?w=["zoom3d","pan3d","orbitRotation","tableRotation"]:(c||f)&&!x||p?w=["zoom2d","pan2d"]:m||d?w=["pan2d"]:y&&(w=["zoom2d"]),isSelectable(r)&&w.push("select2d","lasso2d");var U=[],S=function(t){-1===U.indexOf(t)&&-1!==Q.indexOf(t)&&U.push(t)};if(Array.isArray(s)){for(var E=[],L=0;L<s.length;L++){var T=s[L];"string"==typeof T?(T=T.toLowerCase(),-1!==DRAW_MODES.indexOf(T)?(e._has("mapbox")||e._has("cartesian"))&&w.push(T):"togglespikelines"===T?S("toggleSpikelines"):"togglehover"===T?S("toggleHover"):"hovercompare"===T?S("hoverCompareCartesian"):"hoverclosest"===T?(S("hoverClosestCartesian"),S("hoverClosestGeo"),S("hoverClosest3d"),S("hoverClosestGl2d"),S("hoverClosestPie")):"v1hovermode"===T&&(S("toggleHover"),S("hoverClosestCartesian"),S("hoverCompareCartesian"),S("hoverClosestGeo"),S("hoverClosest3d"),S("hoverClosestGl2d"),S("hoverClosestPie"))):E.push(T)}s=E}return C(w),C(A.concat(_)),C(U),appendButtonsToGroups(B,s)}function areAllAxesFixed(t){for(var e=axis_ids.list({_fullLayout:t},null,!0),r=0;r<e.length;r++)if(!e[r].fixedrange)return!1;return!0}function isSelectable(t){for(var e=!1,r=0;r<t.length&&!e;r++){var n=t[r];n._module&&n._module.selectPoints&&(registry.traceIs(n,"scatter-like")?(subtypes.hasMarkers(n)||subtypes.hasText(n))&&(e=!0):registry.traceIs(n,"box-violin")&&"all"!==n.boxpoints&&"all"!==n.points||(e=!0))}return e}function hasNoHover(t){for(var e=0;e<t.length;e++)if(!registry.traceIs(t[e],"noHover"))return!1;return!0}function appendButtonsToGroups(t,e){if(e.length)if(Array.isArray(e[0]))for(var r=0;r<e.length;r++)t.push(e[r]);else t.push(e);return t}function fillCustomButton(t){for(var e=0;e<t.length;e++)for(var r=t[e],n=0;n<r.length;n++){var i=r[n];if("string"==typeof i){if(void 0===buttons[i])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));t[e][n]=buttons[i]}}return t}var modebar={moduleType:"component",name:"modebar",layoutAttributes:attributes$k,supplyLayoutDefaults:defaults$h,manage:manage},FROM_BL$1=alignment.FROM_BL,scale_zoom=function(t,e,r){void 0===r&&(r=FROM_BL$1[t.constraintoward||"center"]);var n=[t.r2l(t.range[0]),t.r2l(t.range[1])],i=n[0]+(n[1]-n[0])*r;t.range=t._input.range=[t.l2r(i+(n[0]-i)*e),t.l2r(i+(n[1]-i)*e)],t.setScale()},id2name$1=axis_ids.id2name,ALMOST_EQUAL=numerical.ALMOST_EQUAL,FROM_BL=alignment.FROM_BL,handleDefaults=function(t,e,r){var n,i,a,o,s,l,c,u,d=r.axIds,h=r.axHasImage,g=e._axisConstraintGroups=[],f=e._axisMatchGroups=[];for(n=0;n<d.length;n++)handleOneAxDefaults(s=t[o=id2name$1(d[n])],l=e[o],{axIds:d,layoutOut:e,hasImage:h[o]});function p(t,r){for(n=0;n<t.length;n++)for(a in i=t[n])e[id2name$1(a)][r]=i}for(p(f,"_matchGroup"),n=0;n<g.length;n++)for(a in i=g[n])if((l=e[id2name$1(a)]).fixedrange){for(var m in i){var y=id2name$1(m);!1===(t[y]||{}).fixedrange&&lib_1.warn("fixedrange was specified as false for axis "+y+" but was overridden because another axis in its constraint group has fixedrange true"),e[y].fixedrange=!0}break}for(n=0;n<g.length;){for(a in i=g[n]){(l=e[id2name$1(a)])._matchGroup&&Object.keys(l._matchGroup).length===Object.keys(i).length&&(g.splice(n,1),n--);break}n++}p(g,"_constraintGroup");var b=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],v=!1,x=!1;function I(){u=l[c],"rangebreaks"===c&&(x=l._hasDayOfWeekBreaks)}for(n=0;n<f.length;n++){i=f[n];for(var B=0;B<b.length;B++){var C;for(a in c=b[B],u=null,i)if(s=t[o=id2name$1(a)],l=e[o],c in l){if(!l.matches&&(C=l,c in s)){I();break}null===u&&c in s&&I()}if("range"===c&&u&&(v=!0),"autorange"===c&&null===u&&v&&(u=!1),null===u&&c in C&&(u=C[c]),null!==u)for(a in i)(l=e[id2name$1(a)])[c]="range"===c?u.slice():u,"rangebreaks"===c&&(l._hasDayOfWeekBreaks=x,set_convert(l,e))}}};function handleOneAxDefaults(t,e,r){var n=r.axIds,i=r.layoutOut,a=r.hasImage,o=i._axisConstraintGroups,s=i._axisMatchGroups,l=e._id,c=l.charAt(0),u=((i._splomAxes||{})[c]||{})[l]||{},d=e._id,h="x"===d.charAt(0);function g(r,n){return lib_1.coerce(t,e,layout_attributes$3,r,n)}e._matchGroup=null,e._constraintGroup=null,g("constrain",a?"domain":"range"),lib_1.coerce(t,e,{constraintoward:{valType:"enumerated",values:h?["left","center","right"]:["bottom","middle","top"],dflt:h?"center":"middle"}},"constraintoward");var f,p,m=e.type,y=[];for(f=0;f<n.length;f++){if((p=n[f])!==d)i[id2name$1(p)].type===m&&y.push(p)}var b=getConstraintGroup(o,d);if(b){var v=[];for(f=0;f<y.length;f++)b[p=y[f]]||v.push(p);y=v}var x,I,B=y.length;B&&(t.matches||u.matches)&&(x=lib_1.coerce(t,e,{matches:{valType:"enumerated",values:y,dflt:-1!==y.indexOf(u.matches)?u.matches:void 0}},"matches"));var C=a&&!h?e.anchor:void 0;if(B&&!x&&(t.scaleanchor||C)&&(I=lib_1.coerce(t,e,{scaleanchor:{valType:"enumerated",values:y}},"scaleanchor",C)),x){e._matchGroup=updateConstraintGroups(s,d,x,1);var F=i[id2name$1(x)],A=extent(i,e)/extent(i,F);h!==("x"===x.charAt(0))&&(A=(h?"x":"y")+A),updateConstraintGroups(o,d,x,A)}else t.matches&&-1!==n.indexOf(t.matches)&&lib_1.warn("ignored "+e._name+'.matches: "'+t.matches+'" to avoid an infinite loop');if(I){var Q=g("scaleratio");Q||(Q=e.scaleratio=1),updateConstraintGroups(o,d,I,Q)}else t.scaleanchor&&-1!==n.indexOf(t.scaleanchor)&&lib_1.warn("ignored "+e._name+'.scaleanchor: "'+t.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function extent(t,e){var r=e.domain;return r||(r=t[id2name$1(e.overlaying)].domain),r[1]-r[0]}function getConstraintGroup(t,e){for(var r=0;r<t.length;r++)if(t[r][e])return t[r];return null}function updateConstraintGroups(t,e,r,n){var i,a,o,s,l,c=getConstraintGroup(t,e);null===c?((c={})[e]=1,l=t.length,t.push(c)):l=t.indexOf(c);var u=Object.keys(c);for(i=0;i<t.length;i++)if(o=t[i],i!==l&&o[r]){var d=o[r];for(a=0;a<u.length;a++)o[s=u[a]]=multiplyScales(d,multiplyScales(n,c[s]));return void t.splice(l,1)}if(1!==n)for(a=0;a<u.length;a++){var h=u[a];c[h]=multiplyScales(n,c[h])}c[r]=1}function multiplyScales(t,e){var r,n,i="",a="";"string"==typeof t&&(r=(i=t.match(/^[xy]*/)[0]).length,t=+t.substr(r)),"string"==typeof e&&(n=(a=e.match(/^[xy]*/)[0]).length,e=+e.substr(n));var o=t*e;return r||n?r&&n&&i.charAt(0)!==a.charAt(0)?r===n?o:(r>n?i.substr(n):a.substr(r))+o:i+a+t*e:o}function finalRatios(t,e){for(var r=e._size,n=r.h/r.w,i={},a=Object.keys(t),o=0;o<a.length;o++){var s=a[o],l=t[s];if("string"==typeof l){var c=l.match(/^[xy]*/)[0],u=c.length;l=+l.substr(u);for(var d="y"===c.charAt(0)?n:1/n,h=0;h<u;h++)l*=d}i[s]=l}return i}var enforce=function(t){var e,r,n,i,a,o,s,l,c=t._fullLayout,u=c._axisConstraintGroups||[];for(e=0;e<u.length;e++){n=finalRatios(u[e],c);var d=Object.keys(n),h=1/0,g=0,f=1/0,p={},m={},y=!1;for(r=0;r<d.length;r++)m[i=d[r]]=a=c[id2name$1(i)],a._inputDomain?a.domain=a._inputDomain.slice():a._inputDomain=a.domain.slice(),a._inputRange||(a._inputRange=a.range.slice()),a.setScale(),p[i]=o=Math.abs(a._m)/n[i],h=Math.min(h,o),"domain"!==a.constrain&&a._constraintShrinkable||(f=Math.min(f,o)),delete a._constraintShrinkable,g=Math.max(g,o),"domain"===a.constrain&&(y=!0);if(!(h>ALMOST_EQUAL*g)||y)for(r=0;r<d.length;r++)if(o=p[i=d[r]],s=(a=m[i]).constrain,o!==f||"domain"===s)if(l=o/f,"range"===s)scale_zoom(a,l);else{var b=a._inputDomain,v=(a.domain[1]-a.domain[0])/(b[1]-b[0]),x=(a.r2l(a.range[1])-a.r2l(a.range[0]))/(a.r2l(a._inputRange[1])-a.r2l(a._inputRange[0]));if((l/=v)*x<1){a.domain=a._input.domain=b.slice(),scale_zoom(a,l);continue}if(x<1&&(a.range=a._input.range=a._inputRange.slice(),l*=x),a.autorange){var I=a.r2l(a.range[0]),B=a.r2l(a.range[1]),C=(I+B)/2,F=C,A=C,Q=Math.abs(B-C),_=C-Q*l*1.0001,w=C+Q*l*1.0001,U=autorange.makePadFn(c,a,0),S=autorange.makePadFn(c,a,1);updateDomain(a,l);var E,L,T=Math.abs(a._m),R=autorange.concatExtremes(t,a),k=R.min,G=R.max;for(L=0;L<k.length;L++)(E=k[L].val-U(k[L])/T)>_&&E<F&&(F=E);for(L=0;L<G.length;L++)(E=G[L].val+S(G[L])/T)<w&&E>A&&(A=E);l/=(A-F)/(2*Q),F=a.l2r(F),A=a.l2r(A),a.range=a._input.range=I<B?[F,A]:[A,F]}updateDomain(a,l)}}},getAxisGroup$3=function(t,e){for(var r=t._axisMatchGroups,n=0;n<r.length;n++){if(r[n][e])return"g"+n}return e},clean$1=function(t,e){if(e._inputDomain){for(var r=!1,n=e._id,i=t._fullLayout._axisConstraintGroups,a=0;a<i.length;a++)if(i[a][n]){r=!0;break}r&&"domain"===e.constrain||(e._input.domain=e.domain=e._inputDomain,delete e._inputDomain)}};function updateDomain(t,e){var r=t._inputDomain,n=FROM_BL[t.constraintoward],i=r[0]+(r[1]-r[0])*n;t.domain=t._input.domain=[i+(r[0]-i)/e,i+(r[1]-i)/e],t.setScale()}var constraints={handleDefaults:handleDefaults,enforce:enforce,getAxisGroup:getAxisGroup$3,clean:clean$1},subroutines=createCommonjsModule((function(t,e){var r=constraints.enforce,n=constraints.clean,i=autorange.doAutoRange,a="start",o="middle",s="end";function l(t,e,r){for(var n=0;n<r.length;n++){var i=r[n][0],a=r[n][1];if(!(i[0]>=t[1]||i[1]<=t[0])&&(a[0]<e[1]&&a[1]>e[0]))return!0}return!1}function c(t){var r,n,i,a,o,s,c=t._fullLayout,d=c._size,g=d.p,f=axes_1.list(t,"",!0);if(c._paperdiv.style({width:t._context.responsive&&c.autosize&&!t._context._hasZeroWidth&&!t.layout.width?"100%":c.width+"px",height:t._context.responsive&&c.autosize&&!t._context._hasZeroHeight&&!t.layout.height?"100%":c.height+"px"}).selectAll(".main-svg").call(drawing_1.setSize,c.width,c.height),t._context.setBackground(t,c.paper_bgcolor),e.drawMainTitle(t),modebar.manage(t),!c._has("cartesian"))return plots_1.previousPromises(t);function p(t,e,r){var n=t._lw/2;return"x"===t._id.charAt(0)?e?"top"===r?e._offset-g-n:e._offset+e._length+g+n:d.t+d.h*(1-(t.position||0))+n%1:e?"right"===r?e._offset+e._length+g+n:e._offset-g-n:d.l+d.w*(t.position||0)+n%1}for(r=0;r<f.length;r++){var m=(a=f[r])._anchorAxis;a._linepositions={},a._lw=drawing_1.crispRound(t,a.linewidth,1),a._mainLinePosition=p(a,m,a.side),a._mainMirrorPosition=a.mirror&&m?p(a,m,alignment.OPPOSITE_SIDE[a.side]):null}var y=[],b=[],v=[],x=1===color_1.opacity(c.paper_bgcolor)&&1===color_1.opacity(c.plot_bgcolor)&&c.paper_bgcolor===c.plot_bgcolor;for(n in c._plots)if((i=c._plots[n]).mainplot)i.bg&&i.bg.remove(),i.bg=void 0;else{var I=i.xaxis.domain,B=i.yaxis.domain,C=i.plotgroup;if(l(I,B,v)){var F=C.node(),A=i.bg=lib_1.ensureSingle(C,"rect","bg");F.insertBefore(A.node(),F.childNodes[0]),b.push(n)}else C.select("rect.bg").remove(),v.push([I,B]),x||(y.push(n),b.push(n))}var Q,_,w,U,S,E,L,T,R,k,G,N,M,D=c._bgLayer.selectAll(".bg").data(y);for(D.enter().append("rect").classed("bg",!0),D.exit().remove(),D.each((function(t){c._plots[t].bg=d3.select(this)})),r=0;r<b.length;r++)i=c._plots[b[r]],o=i.xaxis,s=i.yaxis,i.bg&&void 0!==o._offset&&void 0!==s._offset&&i.bg.call(drawing_1.setRect,o._offset-g,s._offset-g,o._length+2*g,s._length+2*g).call(color_1.fill,c.plot_bgcolor).style("stroke-width",0);if(!c._hasOnlyLargeSploms)for(n in c._plots){i=c._plots[n],o=i.xaxis,s=i.yaxis;var X,V,W=i.clipId="clip"+c._uid+n+"plot",Z=lib_1.ensureSingleById(c._clips,"clipPath",W,(function(t){t.classed("plotclip",!0).append("rect")}));i.clipRect=Z.select("rect").attr({width:o._length,height:s._length}),drawing_1.setTranslate(i.plot,o._offset,s._offset),i._hasClipOnAxisFalse?(X=null,V=W):(X=W,V=null),drawing_1.setClipUrl(i.plot,X,t),i.layerClipId=V}function O(t){return"M"+Q+","+t+"H"+_}function $(t){return"M"+o._offset+","+t+"h"+o._length}function H(t){return"M"+t+","+T+"V"+L}function Y(t){return"M"+t+","+s._offset+"v"+s._length}function P(t,e,r){if(!t.showline||n!==t._mainSubplot)return"";if(!t._anchorAxis)return r(t._mainLinePosition);var i=e(t._mainLinePosition);return t.mirror&&(i+=e(t._mainMirrorPosition)),i}for(n in c._plots){i=c._plots[n],o=i.xaxis,s=i.yaxis;var z="M0,0";u(o,n)&&(S=h(o,"left",s,f),Q=o._offset-(S?g+S:0),E=h(o,"right",s,f),_=o._offset+o._length+(E?g+E:0),w=p(o,s,"bottom"),U=p(o,s,"top"),!(M=!o._anchorAxis||n!==o._mainSubplot)||"allticks"!==o.mirror&&"all"!==o.mirror||(o._linepositions[n]=[w,U]),z=P(o,O,$),M&&o.showline&&("all"===o.mirror||"allticks"===o.mirror)&&(z+=O(w)+O(U)),i.xlines.style("stroke-width",o._lw+"px").call(color_1.stroke,o.showline?o.linecolor:"rgba(0,0,0,0)")),i.xlines.attr("d",z);var J="M0,0";u(s,n)&&(G=h(s,"bottom",o,f),L=s._offset+s._length+(G?g:0),N=h(s,"top",o,f),T=s._offset-(N?g:0),R=p(s,o,"left"),k=p(s,o,"right"),!(M=!s._anchorAxis||n!==s._mainSubplot)||"allticks"!==s.mirror&&"all"!==s.mirror||(s._linepositions[n]=[R,k]),J=P(s,H,Y),M&&s.showline&&("all"===s.mirror||"allticks"===s.mirror)&&(J+=H(R)+H(k)),i.ylines.style("stroke-width",s._lw+"px").call(color_1.stroke,s.showline?s.linecolor:"rgba(0,0,0,0)")),i.ylines.attr("d",J)}return axes_1.makeClipPaths(t),plots_1.previousPromises(t)}function u(t,e){return(t.ticks||t.showline)&&(e===t._mainSubplot||"all"===t.mirror||"allticks"===t.mirror)}function d(t,e,r){if(!r.showline||!r._lw)return!1;if("all"===r.mirror||"allticks"===r.mirror)return!0;var n=r._anchorAxis;if(!n)return!1;var i=alignment.FROM_BL[e];return r.side===e?n.domain[i]===t.domain[i]:r.mirror&&n.domain[1-i]===t.domain[1-i]}function h(t,e,r,n){if(d(t,e,r))return r._lw;for(var i=0;i<n.length;i++){var a=n[i];if(a._mainAxis===r._mainAxis&&d(t,e,a))return a._lw}return 0}function g(t,e){var r=t.title,n=t._size,i=0;return e===a?i=r.pad.l:e===s&&(i=-r.pad.r),"paper"===r.xref?n.l+n.w*r.x+i:t.width*r.x+i}function f(t,e){var r=t.title,n=t._size,i=0;return"0em"!==e&&e?e===alignment.CAP_SHIFT+"em"&&(i=r.pad.t):i=-r.pad.b,"auto"===r.y?n.t/2:"paper"===r.yref?n.t+n.h-n.h*r.y+i:t.height-t.height*r.y+i}e.layoutStyles=function(t){return lib_1.syncOrAsync([plots_1.doAutoMargin,c],t)},e.drawMainTitle=function(t){var e=t._fullLayout,r=function(t){var e=t.title,r=o;lib_1.isRightAnchor(e)?r=s:lib_1.isLeftAnchor(e)&&(r=a);return r}(e),n=function(t){var e=t.title,r="0em";lib_1.isTopAnchor(e)?r=alignment.CAP_SHIFT+"em":lib_1.isMiddleAnchor(e)&&(r=alignment.MID_SHIFT+"em");return r}(e);titles.draw(t,"gtitle",{propContainer:e,propName:"title.text",placeholder:e._dfltTitle.plot,attributes:{x:g(e,r),y:f(e,n),"text-anchor":r,dy:n}})},e.doTraceStyle=function(t){var r,n=t.calcdata,i=[];for(r=0;r<n.length;r++){var a=n[r],o=a[0]||{},s=o.trace||{},l=s._module||{},c=l.arraysToCalcdata;c&&c(a,s);var u=l.editStyle;u&&i.push({fn:u,cd0:o})}if(i.length){for(r=0;r<i.length;r++){var d=i[r];d.fn(t,d.cd0)}clear_gl_canvases(t),e.redrawReglTraces(t)}return plots_1.style(t),registry.getComponentMethod("legend","draw")(t),plots_1.previousPromises(t)},e.doColorBars=function(t){return registry.getComponentMethod("colorbar","draw")(t),plots_1.previousPromises(t)},e.layoutReplot=function(t){var e=t.layout;return t.layout=void 0,registry.call("_doPlot",t,"",e)},e.doLegend=function(t){return registry.getComponentMethod("legend","draw")(t),plots_1.previousPromises(t)},e.doTicksRelayout=function(t){return axes_1.draw(t,"redraw"),t._fullLayout._hasOnlyLargeSploms&&(registry.subplotsRegistry.splom.updateGrid(t),clear_gl_canvases(t),e.redrawReglTraces(t)),e.drawMainTitle(t),plots_1.previousPromises(t)},e.doModeBar=function(t){var e=t._fullLayout;modebar.manage(t);for(var r=0;r<e._basePlotModules.length;r++){var n=e._basePlotModules[r].updateFx;n&&n(t)}return plots_1.previousPromises(t)},e.doCamera=function(t){for(var e=t._fullLayout,r=e._subplots.gl3d,n=0;n<r.length;n++){var i=e[r[n]];i._scene.setViewport(i)}},e.drawData=function(t){var r=t._fullLayout;clear_gl_canvases(t);for(var n=r._basePlotModules,i=0;i<n.length;i++)n[i].plot(t);return e.redrawReglTraces(t),plots_1.style(t),registry.getComponentMethod("shapes","draw")(t),registry.getComponentMethod("annotations","draw")(t),registry.getComponentMethod("images","draw")(t),r._replotting=!1,plots_1.previousPromises(t)},e.redrawReglTraces=function(t){var e=t._fullLayout;if(e._has("regl")){var r,n,i=t._fullData,a=[],o=[];for(e._hasOnlyLargeSploms&&e._splomGrid.draw(),r=0;r<i.length;r++){var s=i[r];!0===s.visible&&0!==s._length&&("splom"===s.type?e._splomScenes[s.uid].draw():"scattergl"===s.type?lib_1.pushUnique(a,s.xaxis+s.yaxis):"scatterpolargl"===s.type&&lib_1.pushUnique(o,s.subplot))}for(r=0;r<a.length;r++)(n=e._plots[a[r]])._scene&&n._scene.draw();for(r=0;r<o.length;r++)(n=e[o[r]]._subplot)._scene&&n._scene.draw()}},e.doAutoRangeAndConstraints=function(t){for(var e,a=axes_1.list(t,"",!0),o={},s=0;s<a.length;s++)if(!o[(e=a[s])._id]){o[e._id]=1,n(t,e),i(t,e);var l=e._matchGroup;if(l)for(var c in l){var u=axes_1.getFromId(t,c);i(t,u,e.range),o[c]=1}}r(t)},e.finalDraw=function(t){registry.getComponentMethod("rangeslider","draw")(t),registry.getComponentMethod("rangeselector","draw")(t)},e.drawMarginPushers=function(t){registry.getComponentMethod("legend","draw")(t),registry.getComponentMethod("rangeselector","draw")(t),registry.getComponentMethod("sliders","draw")(t),registry.getComponentMethod("updatemenus","draw")(t),registry.getComponentMethod("colorbar","draw")(t)}}));function BuildLog(){var t,e=0,r=!1;function n(e,r){return t.list.push({type:e,data:r?JSON.parse(JSON.stringify(r)):void 0}),t}return t={list:[],segmentId:function(){return e++},checkIntersection:function(t,e){return n("check",{seg1:t,seg2:e})},segmentChop:function(t,e){return n("div_seg",{seg:t,pt:e}),n("chop",{seg:t,pt:e})},statusRemove:function(t){return n("pop_seg",{seg:t})},segmentUpdate:function(t){return n("seg_update",{seg:t})},segmentNew:function(t,e){return n("new_seg",{seg:t,primary:e})},segmentRemove:function(t){return n("rem_seg",{seg:t})},tempStatus:function(t,e,r){return n("temp_status",{seg:t,above:e,below:r})},rewind:function(t){return n("rewind",{seg:t})},status:function(t,e,r){return n("status",{seg:t,above:e,below:r})},vert:function(e){return e===r?t:(r=e,n("vert",{x:e}))},log:function(t){return"string"!=typeof t&&(t=JSON.stringify(t,!1,"  ")),n("log",{txt:t})},reset:function(){return n("reset")},selected:function(t){return n("selected",{segs:t})},chainStart:function(t){return n("chain_start",{seg:t})},chainRemoveHead:function(t,e){return n("chain_rem_head",{index:t,pt:e})},chainRemoveTail:function(t,e){return n("chain_rem_tail",{index:t,pt:e})},chainNew:function(t,e){return n("chain_new",{pt1:t,pt2:e})},chainMatch:function(t){return n("chain_match",{index:t})},chainClose:function(t){return n("chain_close",{index:t})},chainAddHead:function(t,e){return n("chain_add_head",{index:t,pt:e})},chainAddTail:function(t,e){return n("chain_add_tail",{index:t,pt:e})},chainConnect:function(t,e){return n("chain_con",{index1:t,index2:e})},chainReverse:function(t){return n("chain_rev",{index:t})},chainJoin:function(t,e){return n("chain_join",{index1:t,index2:e})},done:function(){return n("done")}},t}var buildLog$1=BuildLog;function Epsilon(t){"number"!=typeof t&&(t=1e-10);var e={epsilon:function(e){return"number"==typeof e&&(t=e),t},pointAboveOrOnLine:function(e,r,n){var i=r[0],a=r[1],o=n[0],s=n[1],l=e[0];return(o-i)*(e[1]-a)-(s-a)*(l-i)>=-t},pointBetween:function(e,r,n){var i=e[1]-r[1],a=n[0]-r[0],o=e[0]-r[0],s=n[1]-r[1],l=o*a+i*s;return!(l<t)&&!(l-(a*a+s*s)>-t)},pointsSameX:function(e,r){return Math.abs(e[0]-r[0])<t},pointsSameY:function(e,r){return Math.abs(e[1]-r[1])<t},pointsSame:function(t,r){return e.pointsSameX(t,r)&&e.pointsSameY(t,r)},pointsCompare:function(t,r){return e.pointsSameX(t,r)?e.pointsSameY(t,r)?0:t[1]<r[1]?-1:1:t[0]<r[0]?-1:1},pointsCollinear:function(e,r,n){var i=e[0]-r[0],a=e[1]-r[1],o=r[0]-n[0],s=r[1]-n[1];return Math.abs(i*s-o*a)<t},linesIntersect:function(e,r,n,i){var a=r[0]-e[0],o=r[1]-e[1],s=i[0]-n[0],l=i[1]-n[1],c=a*l-o*s;if(Math.abs(c)<t)return!1;var u=e[0]-n[0],d=e[1]-n[1],h=(s*d-l*u)/c,g=(a*d-o*u)/c,f={alongA:0,alongB:0,pt:[e[0]+h*a,e[1]+h*o]};return f.alongA=h<=-t?-2:h<t?-1:h-1<=-t?0:h-1<t?1:2,f.alongB=g<=-t?-2:g<t?-1:g-1<=-t?0:g-1<t?1:2,f},pointInsideRegion:function(e,r){for(var n=e[0],i=e[1],a=r[r.length-1][0],o=r[r.length-1][1],s=!1,l=0;l<r.length;l++){var c=r[l][0],u=r[l][1];u-i>t!=o-i>t&&(a-c)*(i-u)/(o-u)+c-n>t&&(s=!s),a=c,o=u}return s}};return e}var epsilon$1=Epsilon,LinkedList={create:function(){var t={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==t.root},isEmpty:function(){return null===t.root.next},getHead:function(){return t.root.next},insertBefore:function(e,r){for(var n=t.root,i=t.root.next;null!==i;){if(r(i))return e.prev=i.prev,e.next=i,i.prev.next=e,void(i.prev=e);n=i,i=i.next}n.next=e,e.prev=n,e.next=null},findTransition:function(e){for(var r=t.root,n=t.root.next;null!==n&&!e(n);)r=n,n=n.next;return{before:r===t.root?null:r,after:n,insert:function(t){return t.prev=r,t.next=n,r.next=t,null!==n&&(n.prev=t),t}}}};return t},node:function(t){return t.prev=null,t.next=null,t.remove=function(){t.prev.next=t.next,t.next&&(t.next.prev=t.prev),t.prev=null,t.next=null},t}},linkedList=LinkedList;function Intersecter(t,e,r){function n(t,e){return{id:r?r.segmentId():-1,start:t,end:e,myFill:{above:null,below:null},otherFill:null}}function i(t,e,n){return{id:r?r.segmentId():-1,start:t,end:e,myFill:{above:n.myFill.above,below:n.myFill.below},otherFill:null}}var a=linkedList.create();function o(t,r){a.insertBefore(t,(function(n){return function(t,r,n,i,a,o){var s=e.pointsCompare(r,a);return 0!==s?s:e.pointsSame(n,o)?0:t!==i?t?1:-1:e.pointAboveOrOnLine(n,i?a:o,i?o:a)?1:-1}(t.isStart,t.pt,r,n.isStart,n.pt,n.other.pt)<0}))}function s(t,e){var r=function(t,e){var r=linkedList.node({isStart:!0,pt:t.start,seg:t,primary:e,other:null,status:null});return o(r,t.end),r}(t,e);return function(t,e,r){var n=linkedList.node({isStart:!1,pt:e.end,seg:e,primary:r,other:t,status:null});t.other=n,o(n,t.pt)}(r,t,e),r}function l(t,e){var n=i(e,t.seg.end,t.seg);return function(t,e){r&&r.segmentChop(t.seg,e),t.other.remove(),t.seg.end=e,t.other.pt=e,o(t.other,t.pt)}(t,e),s(n,t.primary)}function c(n,i){var o=linkedList.create();function s(t){return o.findTransition((function(r){var n,i,a,o,s,l;return(n=t,i=r.ev,a=n.seg.start,o=n.seg.end,s=i.seg.start,l=i.seg.end,e.pointsCollinear(a,s,l)?e.pointsCollinear(o,s,l)||e.pointAboveOrOnLine(o,s,l)?1:-1:e.pointAboveOrOnLine(a,s,l)?1:-1)>0}))}function c(t,n){var i=t.seg,a=n.seg,o=i.start,s=i.end,c=a.start,u=a.end;r&&r.checkIntersection(i,a);var d=e.linesIntersect(o,s,c,u);if(!1===d){if(!e.pointsCollinear(o,s,c))return!1;if(e.pointsSame(o,u)||e.pointsSame(s,c))return!1;var h=e.pointsSame(o,c),g=e.pointsSame(s,u);if(h&&g)return n;var f=!h&&e.pointBetween(o,c,u),p=!g&&e.pointBetween(s,c,u);if(h)return p?l(n,s):l(t,u),n;f&&(g||(p?l(n,s):l(t,u)),l(n,o))}else 0===d.alongA&&(-1===d.alongB?l(t,c):0===d.alongB?l(t,d.pt):1===d.alongB&&l(t,u)),0===d.alongB&&(-1===d.alongA?l(n,o):0===d.alongA?l(n,d.pt):1===d.alongA&&l(n,s));return!1}for(var u=[];!a.isEmpty();){var d=a.getHead();if(r&&r.vert(d.pt[0]),d.isStart){r&&r.segmentNew(d.seg,d.primary);var h=s(d),g=h.before?h.before.ev:null,f=h.after?h.after.ev:null;function p(){if(g){var t=c(d,g);if(t)return t}return!!f&&c(d,f)}r&&r.tempStatus(d.seg,!!g&&g.seg,!!f&&f.seg);var m,y=p();if(y){var b;if(t)(b=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below)&&(y.seg.myFill.above=!y.seg.myFill.above);else y.seg.otherFill=d.seg.myFill;r&&r.segmentUpdate(y.seg),d.other.remove(),d.remove()}if(a.getHead()!==d){r&&r.rewind(d.seg);continue}if(t)b=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below,d.seg.myFill.below=f?f.seg.myFill.above:n,d.seg.myFill.above=b?!d.seg.myFill.below:d.seg.myFill.below;else if(null===d.seg.otherFill)m=f?d.primary===f.primary?f.seg.otherFill.above:f.seg.myFill.above:d.primary?i:n,d.seg.otherFill={above:m,below:m};r&&r.status(d.seg,!!g&&g.seg,!!f&&f.seg),d.other.status=h.insert(linkedList.node({ev:d}))}else{var v=d.status;if(null===v)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(o.exists(v.prev)&&o.exists(v.next)&&c(v.prev.ev,v.next.ev),r&&r.statusRemove(v.ev.seg),v.remove(),!d.primary){var x=d.seg.myFill;d.seg.myFill=d.seg.otherFill,d.seg.otherFill=x}u.push(d.seg)}a.getHead().remove()}return r&&r.done(),u}return t?{addRegion:function(t){for(var r,i=t[t.length-1],a=0;a<t.length;a++){r=i,i=t[a];var o=e.pointsCompare(r,i);0!==o&&s(n(o<0?r:i,o<0?i:r),!0)}},calculate:function(t){return c(t,!1)}}:{calculate:function(t,e,r,n){return t.forEach((function(t){s(i(t.start,t.end,t),!0)})),r.forEach((function(t){s(i(t.start,t.end,t),!1)})),c(e,n)}}}var intersecter=Intersecter;function SegmentChainer(t,e,r){var n=[],i=[];return t.forEach((function(t){var a=t.start,o=t.end;if(e.pointsSame(a,o))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{r&&r.chainStart(t);for(var s={index:0,matches_head:!1,matches_pt1:!1},l={index:0,matches_head:!1,matches_pt1:!1},c=s,u=0;u<n.length;u++){var d=(m=n[u])[0];m[1];var h=m[m.length-1];if(m[m.length-2],e.pointsSame(d,a)){if(F(u,!0,!0))break}else if(e.pointsSame(d,o)){if(F(u,!0,!1))break}else if(e.pointsSame(h,a)){if(F(u,!1,!0))break}else if(e.pointsSame(h,o)&&F(u,!1,!1))break}if(c===s)return n.push([a,o]),void(r&&r.chainNew(a,o));if(c===l){r&&r.chainMatch(s.index);var g=s.index,f=s.matches_pt1?o:a,p=s.matches_head,m=n[g],y=p?m[0]:m[m.length-1],b=p?m[1]:m[m.length-2],v=p?m[m.length-1]:m[0],x=p?m[m.length-2]:m[1];return e.pointsCollinear(b,y,f)&&(p?(r&&r.chainRemoveHead(s.index,f),m.shift()):(r&&r.chainRemoveTail(s.index,f),m.pop()),y=b),e.pointsSame(v,f)?(n.splice(g,1),e.pointsCollinear(x,v,y)&&(p?(r&&r.chainRemoveTail(s.index,y),m.pop()):(r&&r.chainRemoveHead(s.index,y),m.shift())),r&&r.chainClose(s.index),void i.push(m)):void(p?(r&&r.chainAddHead(s.index,f),m.unshift(f)):(r&&r.chainAddTail(s.index,f),m.push(f)))}var I=s.index,B=l.index;r&&r.chainConnect(I,B);var C=n[I].length<n[B].length;s.matches_head?l.matches_head?C?(A(I),Q(I,B)):(A(B),Q(B,I)):Q(B,I):l.matches_head?Q(I,B):C?(A(I),Q(B,I)):(A(B),Q(I,B))}function F(t,e,r){return c.index=t,c.matches_head=e,c.matches_pt1=r,c===s?(c=l,!1):(c=null,!0)}function A(t){r&&r.chainReverse(t),n[t].reverse()}function Q(t,i){var a=n[t],o=n[i],s=a[a.length-1],l=a[a.length-2],c=o[0],u=o[1];e.pointsCollinear(l,s,c)&&(r&&r.chainRemoveTail(t,s),a.pop(),s=l),e.pointsCollinear(s,c,u)&&(r&&r.chainRemoveHead(i,c),o.shift()),r&&r.chainJoin(t,i),n[t]=a.concat(o),n.splice(i,1)}})),i}var segmentChainer=SegmentChainer;function select$3(t,e,r){var n=[];return t.forEach((function(t){var i=(t.myFill.above?8:0)+(t.myFill.below?4:0)+(t.otherFill&&t.otherFill.above?2:0)+(t.otherFill&&t.otherFill.below?1:0);0!==e[i]&&n.push({id:r?r.segmentId():-1,start:t.start,end:t.end,myFill:{above:1===e[i],below:2===e[i]},otherFill:null})})),r&&r.selected(n),n}var PolyBool,SegmentSelector={union:function(t,e){return select$3(t,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],e)},intersect:function(t,e){return select$3(t,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],e)},difference:function(t,e){return select$3(t,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],e)},differenceRev:function(t,e){return select$3(t,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],e)},xor:function(t,e){return select$3(t,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],e)}},segmentSelector=SegmentSelector,GeoJSON={toPolygon:function(t,e){function r(e){if(e.length<=0)return t.segments({inverted:!1,regions:[]});function r(e){var r=e.slice(0,e.length-1);return t.segments({inverted:!1,regions:[r]})}for(var n=r(e[0]),i=1;i<e.length;i++)n=t.selectDifference(t.combine(n,r(e[i])));return n}if("Polygon"===e.type)return t.polygon(r(e.coordinates));if("MultiPolygon"===e.type){for(var n=t.segments({inverted:!1,regions:[]}),i=0;i<e.coordinates.length;i++)n=t.selectUnion(t.combine(n,r(e.coordinates[i])));return t.polygon(n)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(t,e,r){function n(t,r){return e.pointInsideRegion([.5*(t[0][0]+t[1][0]),.5*(t[0][1]+t[1][1])],r)}function i(t){return{region:t,children:[]}}r=t.polygon(t.segments(r));var a=i(null);function o(t,e){for(var r=0;r<t.children.length;r++){if(n(e,(s=t.children[r]).region))return void o(s,e)}var a=i(e);for(r=0;r<t.children.length;r++){var s;n((s=t.children[r]).region,e)&&(a.children.push(s),t.children.splice(r,1),r--)}t.children.push(a)}for(var s=0;s<r.regions.length;s++){var l=r.regions[s];l.length<3||o(a,l)}function c(t,e){for(var r=0,n=t[t.length-1][0],i=t[t.length-1][1],a=[],o=0;o<t.length;o++){var s=t[o][0],l=t[o][1];a.push([s,l]),r+=l*n-s*i,n=s,i=l}return r<0!==e&&a.reverse(),a.push([a[0][0],a[0][1]]),a}var u=[];function d(t){var e=[c(t.region,!1)];u.push(e);for(var r=0;r<t.children.length;r++)e.push(h(t.children[r]))}function h(t){for(var e=0;e<t.children.length;e++)d(t.children[e]);return c(t.region,!0)}for(s=0;s<a.children.length;s++)d(a.children[s]);return u.length<=0?{type:"Polygon",coordinates:[]}:1==u.length?{type:"Polygon",coordinates:u[0]}:{type:"MultiPolygon",coordinates:u}}},geojson=GeoJSON,buildLog=!1,epsilon=epsilon$1();function operate(t,e,r){var n=PolyBool.segments(t),i=PolyBool.segments(e),a=r(PolyBool.combine(n,i));return PolyBool.polygon(a)}PolyBool={buildLog:function(t){return!0===t?buildLog=buildLog$1():!1===t&&(buildLog=!1),!1!==buildLog&&buildLog.list},epsilon:function(t){return epsilon.epsilon(t)},segments:function(t){var e=intersecter(!0,epsilon,buildLog);return t.regions.forEach(e.addRegion),{segments:e.calculate(t.inverted),inverted:t.inverted}},combine:function(t,e){return{combined:intersecter(!1,epsilon,buildLog).calculate(t.segments,t.inverted,e.segments,e.inverted),inverted1:t.inverted,inverted2:e.inverted}},selectUnion:function(t){return{segments:segmentSelector.union(t.combined,buildLog),inverted:t.inverted1||t.inverted2}},selectIntersect:function(t){return{segments:segmentSelector.intersect(t.combined,buildLog),inverted:t.inverted1&&t.inverted2}},selectDifference:function(t){return{segments:segmentSelector.difference(t.combined,buildLog),inverted:t.inverted1&&!t.inverted2}},selectDifferenceRev:function(t){return{segments:segmentSelector.differenceRev(t.combined,buildLog),inverted:!t.inverted1&&t.inverted2}},selectXor:function(t){return{segments:segmentSelector.xor(t.combined,buildLog),inverted:t.inverted1!==t.inverted2}},polygon:function(t){return{regions:segmentChainer(t.segments,epsilon,buildLog),inverted:t.inverted}},polygonFromGeoJSON:function(t){return geojson.toPolygon(PolyBool,t)},polygonToGeoJSON:function(t){return geojson.fromPolygon(PolyBool,epsilon,t)},union:function(t,e){return operate(t,e,PolyBool.selectUnion)},intersect:function(t,e){return operate(t,e,PolyBool.selectIntersect)},difference:function(t,e){return operate(t,e,PolyBool.selectDifference)},differenceRev:function(t,e){return operate(t,e,PolyBool.selectDifferenceRev)},xor:function(t,e){return operate(t,e,PolyBool.selectXor)}},"object"==typeof window&&(window.PolyBool=PolyBool);var polybooljs=PolyBool,polygon_1=createCommonjsModule((function(t){var e=matrix.dot,r=numerical.BADNUM,n=t.exports={};n.tester=function(t){var e,n=t.slice(),i=n[0][0],a=i,o=n[0][1],s=o;for(n.push(n[0]),e=1;e<n.length;e++)i=Math.min(i,n[e][0]),a=Math.max(a,n[e][0]),o=Math.min(o,n[e][1]),s=Math.max(s,n[e][1]);var l,c=!1;5===n.length&&(n[0][0]===n[1][0]?n[2][0]===n[3][0]&&n[0][1]===n[3][1]&&n[1][1]===n[2][1]&&(c=!0,l=function(t){return t[0]===n[0][0]}):n[0][1]===n[1][1]&&n[2][1]===n[3][1]&&n[0][0]===n[3][0]&&n[1][0]===n[2][0]&&(c=!0,l=function(t){return t[1]===n[0][1]}));var u=!0,d=n[0];for(e=1;e<n.length;e++)if(d[0]!==n[e][0]||d[1]!==n[e][1]){u=!1;break}return{xmin:i,xmax:a,ymin:o,ymax:s,pts:n,contains:c?function(t,e){var n=t[0],c=t[1];return!(n===r||n<i||n>a||c===r||c<o||c>s)&&(!e||!l(t))}:function(t,e){var l=t[0],c=t[1];if(l===r||l<i||l>a||c===r||c<o||c>s)return!1;var u,d,h,g,f,p=n.length,m=n[0][0],y=n[0][1],b=0;for(u=1;u<p;u++)if(d=m,h=y,m=n[u][0],y=n[u][1],!(l<(g=Math.min(d,m))||l>Math.max(d,m)||c>Math.max(h,y)))if(c<Math.min(h,y))l!==g&&b++;else{if(c===(f=m===d?c:h+(l-d)*(y-h)/(m-d)))return 1!==u||!e;c<=f&&l!==g&&b++}return b%2==1},isRect:c,degenerate:u}},n.isSegmentBent=function(t,r,n,i){var a,o,s,l=t[r],c=[t[n][0]-l[0],t[n][1]-l[1]],u=e(c,c),d=Math.sqrt(u),h=[-c[1]/d,c[0]/d];for(a=r+1;a<n;a++)if(o=[t[a][0]-l[0],t[a][1]-l[1]],(s=e(o,c))<0||s>u||Math.abs(e(o,h))>i)return!0;return!1},n.filter=function(t,e){var r=[t[0]],i=0,a=0;function o(o){t.push(o);var s=r.length,l=i;r.splice(a+1);for(var c=l+1;c<t.length;c++)(c===t.length-1||n.isSegmentBent(t,l,c+1,e))&&(r.push(t[c]),r.length<s-2&&(i=c,a=r.length-1),l=c)}t.length>1&&o(t.pop());return{addPt:o,raw:t,filtered:r}}})),dashStyle=drawing_1.dashStyle,makeEventData=helpers$a.makeEventData,freeMode$1=helpers$7.freeMode,rectMode=helpers$7.rectMode,drawMode=helpers$7.drawMode,openMode=helpers$7.openMode,selectMode=helpers$7.selectMode,handleEllipse=helpers$5.handleEllipse,getFromId$1=axis_ids.getFromId,redrawReglTraces$1=subroutines.redrawReglTraces,MINSELECT=constants$c.MINSELECT,filteredPolygon=polygon_1.filter,polygonTester$1=polygon_1.tester,clearSelect$1=handle_outline.clearSelect,p2r=helpers$6.p2r,axValue=helpers$6.axValue,getTransform=helpers$6.getTransform;function prepSelect$1(t,e,r,n,i){var a=freeMode$1(i),o=rectMode(i),s=openMode(i),l=drawMode(i),c=selectMode(i),u="drawcircle"===i,d="drawline"===i||u,h=n.gd,g=h._fullLayout,f=g._zoomlayer,p=n.element.getBoundingClientRect(),m=n.plotinfo,y=getTransform(m),b=e-p.left,v=r-p.top;g._calcInverseTransform(h);var x=lib_1.apply3DTransform(g._invTransform)(b,v);b=x[0],v=x[1];var I,B,C,F,A,Q,_,w=g._invScaleX,U=g._invScaleY,S=b,E=v,L="M"+b+","+v,T=n.xaxes[0]._length,R=n.yaxes[0]._length,k=n.xaxes.concat(n.yaxes),G=t.altKey&&!(drawMode(i)&&s);coerceSelectionsCache(t,h,n),a&&(I=filteredPolygon([[b,v]],constants$c.BENDPX));var N=f.selectAll("path.select-outline-"+m.id).data(l?[0]:[1,2]),M=g.newshape;N.enter().append("path").attr("class",(function(t){return"select-outline select-outline-"+t+" select-outline-"+m.id})).style(l?{opacity:M.opacity/2,fill:s?void 0:M.fillcolor,stroke:M.line.color,"stroke-dasharray":dashStyle(M.line.dash,M.line.width),"stroke-width":M.line.width+"px"}:{}).attr("fill-rule",M.fillrule).classed("cursor-move",!!l).attr("transform",y).attr("d",L+"Z");var D,X=f.append("path").attr("class","zoombox-corners").style({fill:color_1.background,stroke:color_1.defaultLine,"stroke-width":1}).attr("transform",y).attr("d","M0,0Z"),V=g._uid+constants$c.SELECTID,W=[],Z=determineSearchTraces(h,n.xaxes,n.yaxes,n.subplot);function O(t,e){return t-e}D=m.fillRangeItems?m.fillRangeItems:o?function(t,e){var r=t.range={};for(A=0;A<k.length;A++){var n=k[A],i=n._id.charAt(0);r[n._id]=[p2r(n,e[i+"min"]),p2r(n,e[i+"max"])].sort(O)}}:function(t,e,r){var n=t.lassoPoints={};for(A=0;A<k.length;A++){var i=k[A];n[i._id]=r.filtered.map(axValue(i))}},n.moveFn=function(t,e){S=Math.max(0,Math.min(T,w*t+b)),E=Math.max(0,Math.min(R,U*e+v));var r=Math.abs(S-b),i=Math.abs(E-v);if(o){var f,p,m;if(c){var y=g.selectdirection;switch(f="any"===y?i<Math.min(.6*r,MINSELECT)?"h":r<Math.min(.6*i,MINSELECT)?"v":"d":y){case"h":p=u?R/2:0,m=R;break;case"v":p=u?T/2:0,m=T}}if(l)switch(g.newshape.drawdirection){case"vertical":f="h",p=u?R/2:0,m=R;break;case"horizontal":f="v",p=u?T/2:0,m=T;break;case"ortho":r<i?(f="h",p=v,m=E):(f="v",p=b,m=S);break;default:f="d"}"h"===f?((F=d?handleEllipse(u,[S,p],[S,m]):[[b,p],[b,m],[S,m],[S,p]]).xmin=d?S:Math.min(b,S),F.xmax=d?S:Math.max(b,S),F.ymin=Math.min(p,m),F.ymax=Math.max(p,m),X.attr("d","M"+F.xmin+","+(v-MINSELECT)+"h-4v"+2*MINSELECT+"h4ZM"+(F.xmax-1)+","+(v-MINSELECT)+"h4v"+2*MINSELECT+"h-4Z")):"v"===f?((F=d?handleEllipse(u,[p,E],[m,E]):[[p,v],[p,E],[m,E],[m,v]]).xmin=Math.min(p,m),F.xmax=Math.max(p,m),F.ymin=d?E:Math.min(v,E),F.ymax=d?E:Math.max(v,E),X.attr("d","M"+(b-MINSELECT)+","+F.ymin+"v-4h"+2*MINSELECT+"v4ZM"+(b-MINSELECT)+","+(F.ymax-1)+"v4h"+2*MINSELECT+"v-4Z")):"d"===f&&((F=d?handleEllipse(u,[b,v],[S,E]):[[b,v],[b,E],[S,E],[S,v]]).xmin=Math.min(b,S),F.xmax=Math.max(b,S),F.ymin=Math.min(v,E),F.ymax=Math.max(v,E),X.attr("d","M0,0Z"))}else a&&(I.addPt([S,E]),F=I.filtered);n.selectionDefs&&n.selectionDefs.length?(C=mergePolygons(n.mergedPolygons,F,G),F.subtract=G,B=multiTester(n.selectionDefs.concat([F]))):(C=[F],B=polygonTester$1(F)),display_outlines(convertPoly(C,s),N,n),c&&throttle.throttle(V,constants$c.SELECTDELAY,(function(){var t;for(W=[],A=0;A<Z.length;A++)if(t=fillSelectionItem((Q=Z[A])._module.selectPoints(Q,B),Q),W.length)for(var e=0;e<t.length;e++)W.push(t[e]);else W=t;updateSelectedState(h,Z,_={points:W}),D(_,F,I),n.gd.emit("plotly_selecting",_)}))},n.clickFn=function(t,e){if(X.remove(),h._fullLayout._activeShapeIndex>=0)h._fullLayout._deactivateShape(h);else if(!l){var r=g.clickmode;throttle.done(V).then((function(){if(throttle.clear(V),2===t){for(N.remove(),A=0;A<Z.length;A++)(Q=Z[A])._module.selectPoints(Q,!1);updateSelectedState(h,Z),clearSelectionsCache(n),h.emit("plotly_deselect",null)}else r.indexOf("select")>-1&&selectOnClick$1(e,h,n.xaxes,n.yaxes,n.subplot,n,N),"event"===r&&h.emit("plotly_selected",void 0);fx.click(h,e)})).catch(lib_1.error)}},n.doneFn=function(){X.remove(),throttle.done(V).then((function(){throttle.clear(V),n.gd.emit("plotly_selected",_),F&&n.selectionDefs&&(F.subtract=G,n.selectionDefs.push(F),n.mergedPolygons.length=0,[].push.apply(n.mergedPolygons,C)),n.doneFnCompleted&&n.doneFnCompleted(W)})).catch(lib_1.error),l&&clearSelectionsCache(n)}}function selectOnClick$1(t,e,r,n,i,a,o){var s,l,c,u,d,h,g,f,p,m=e._hoverdata,y=e._fullLayout.clickmode.indexOf("event")>-1,b=[];if(isHoverDataSet(m)){coerceSelectionsCache(t,e,a);var v=extractClickedPtInfo(m,s=determineSearchTraces(e,r,n,i));if(v.pointNumbers.length>0?isOnlyThisBinSelected(s,v):isOnlyOnePointSelected(s)&&(h=isPointOrBinSelected(v))){for(o&&o.remove(),p=0;p<s.length;p++)(l=s[p])._module.selectPoints(l,!1);updateSelectedState(e,s),clearSelectionsCache(a),y&&e.emit("plotly_deselect",null)}else{for(g=t.shiftKey&&(void 0!==h?h:isPointOrBinSelected(v)),c=newPointSelectionDef(v.pointNumber,v.searchInfo,g),u=multiTester(a.selectionDefs.concat([c])),p=0;p<s.length;p++)if(d=fillSelectionItem(s[p]._module.selectPoints(s[p],u),s[p]),b.length)for(var x=0;x<d.length;x++)b.push(d[x]);else b=d;if(updateSelectedState(e,s,f={points:b}),c&&a&&a.selectionDefs.push(c),o){var I=a.mergedPolygons,B=openMode(a.dragmode);display_outlines(convertPoly(I,B),o,a)}y&&e.emit("plotly_selected",f)}}}function newPointSelectionDef(t,e,r){return{pointNumber:t,searchInfo:e,subtract:r}}function isPointSelectionDef(t){return"pointNumber"in t&&"searchInfo"in t}function newPointNumTester(t){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(e,r,n,i){var a=t.searchInfo.cd[0].trace._expandedIndex;return i.cd[0].trace._expandedIndex===a&&n===t.pointNumber},isRect:!1,degenerate:!1,subtract:t.subtract}}function multiTester(t){for(var e=[],r=isPointSelectionDef(t[0])?0:t[0][0][0],n=r,i=isPointSelectionDef(t[0])?0:t[0][0][1],a=i,o=0;o<t.length;o++)if(isPointSelectionDef(t[o]))e.push(newPointNumTester(t[o]));else{var s=polygon_1.tester(t[o]);s.subtract=t[o].subtract,e.push(s),r=Math.min(r,s.xmin),n=Math.max(n,s.xmax),i=Math.min(i,s.ymin),a=Math.max(a,s.ymax)}return{xmin:r,xmax:n,ymin:i,ymax:a,pts:[],contains:function(t,r,n,i){for(var a=!1,o=0;o<e.length;o++)e[o].contains(t,r,n,i)&&(a=!1===e[o].subtract);return a},isRect:!1,degenerate:!1}}function coerceSelectionsCache(t,e,r){e._fullLayout._drawing=!1;var n=e._fullLayout,i=r.plotinfo,a=r.dragmode,o=n._lastSelectedSubplot&&n._lastSelectedSubplot===i.id,s=(t.shiftKey||t.altKey)&&!(drawMode(a)&&openMode(a));o&&s&&i.selection&&i.selection.selectionDefs&&!r.selectionDefs?(r.selectionDefs=i.selection.selectionDefs,r.mergedPolygons=i.selection.mergedPolygons):s&&i.selection||clearSelectionsCache(r),o||(clearSelect$1(e),n._lastSelectedSubplot=i.id)}function clearSelectionsCache(t){var e=t.dragmode,r=t.plotinfo,n=t.gd;if(n._fullLayout._activeShapeIndex>=0&&n._fullLayout._deactivateShape(n),drawMode(e)){var i=n._fullLayout._zoomlayer.selectAll(".select-outline-"+r.id);if(i&&n._fullLayout._drawing){var a=newshapes(i,t);a&&registry.call("_guiRelayout",n,{shapes:a}),n._fullLayout._drawing=!1}}r.selection={},r.selection.selectionDefs=t.selectionDefs=[],r.selection.mergedPolygons=t.mergedPolygons=[]}function determineSearchTraces(t,e,r,n){var i,a,o,s=[],l=e.map((function(t){return t._id})),c=r.map((function(t){return t._id}));for(o=0;o<t.calcdata.length;o++)if(!0===(a=(i=t.calcdata[o])[0].trace).visible&&a._module&&a._module.selectPoints)if(!n||a.subplot!==n&&a.geo!==n)if("splom"===a.type&&a._xaxes[l[0]]&&a._yaxes[c[0]]){var u=h(a._module,i,e[0],r[0]);u.scene=t._fullLayout._splomScenes[a.uid],s.push(u)}else if("sankey"===a.type){var d=h(a._module,i,e[0],r[0]);s.push(d)}else{if(-1===l.indexOf(a.xaxis))continue;if(-1===c.indexOf(a.yaxis))continue;s.push(h(a._module,i,getFromId$1(t,a.xaxis),getFromId$1(t,a.yaxis)))}else s.push(h(a._module,i,e[0],r[0]));return s;function h(t,e,r,n){return{_module:t,cd:e,xaxis:r,yaxis:n}}}function isHoverDataSet(t){return t&&Array.isArray(t)&&!0!==t[0].hoverOnBox}function extractClickedPtInfo(t,e){var r,n,i=t[0],a=-1,o=[];for(n=0;n<e.length;n++)if(r=e[n],i.fullData._expandedIndex===r.cd[0].trace._expandedIndex){if(!0===i.hoverOnBox)break;void 0!==i.pointNumber?a=i.pointNumber:void 0!==i.binNumber&&(a=i.binNumber,o=i.pointNumbers);break}return{pointNumber:a,pointNumbers:o,searchInfo:r}}function isPointOrBinSelected(t){var e=t.searchInfo.cd[0].trace,r=t.pointNumber,n=t.pointNumbers,i=n.length>0?n[0]:r;return!!e.selectedpoints&&e.selectedpoints.indexOf(i)>-1}function isOnlyThisBinSelected(t,e){var r,n,i,a=[];for(i=0;i<t.length;i++)(r=t[i]).cd[0].trace.selectedpoints&&r.cd[0].trace.selectedpoints.length>0&&a.push(r);if(1===a.length&&a[0]===e.searchInfo&&(n=e.searchInfo.cd[0].trace).selectedpoints.length===e.pointNumbers.length){for(i=0;i<e.pointNumbers.length;i++)if(n.selectedpoints.indexOf(e.pointNumbers[i])<0)return!1;return!0}return!1}function isOnlyOnePointSelected(t){var e,r,n=0;for(r=0;r<t.length;r++)if((e=t[r].cd[0].trace).selectedpoints){if(e.selectedpoints.length>1)return!1;if((n+=e.selectedpoints.length)>1)return!1}return 1===n}function updateSelectedState(t,e,r){var n,i,a,o;for(n=0;n<e.length;n++){var s=e[n].cd[0].trace._fullInput,l=t._fullLayout._tracePreGUI[s.uid]||{};void 0===l.selectedpoints&&(l.selectedpoints=s._input.selectedpoints||null)}if(r){var c=r.points||[];for(n=0;n<e.length;n++)(o=e[n].cd[0].trace)._input.selectedpoints=o._fullInput.selectedpoints=[],o._fullInput!==o&&(o.selectedpoints=[]);for(n=0;n<c.length;n++){var u=c[n],d=u.data,h=u.fullData;u.pointIndices?([].push.apply(d.selectedpoints,u.pointIndices),o._fullInput!==o&&[].push.apply(h.selectedpoints,u.pointIndices)):(d.selectedpoints.push(u.pointIndex),o._fullInput!==o&&h.selectedpoints.push(u.pointIndex))}}else for(n=0;n<e.length;n++)delete(o=e[n].cd[0].trace).selectedpoints,delete o._input.selectedpoints,o._fullInput!==o&&delete o._fullInput.selectedpoints;var g=!1;for(n=0;n<e.length;n++){o=(a=(i=e[n]).cd)[0].trace,registry.traceIs(o,"regl")&&(g=!0);var f=i._module,p=f.styleOnSelect||f.style;p&&(p(t,a,a[0].node3),a[0].nodeRangePlot3&&p(t,a,a[0].nodeRangePlot3))}g&&(clear_gl_canvases(t),redrawReglTraces$1(t))}function mergePolygons(t,e,r){return r?polybooljs.difference({regions:t,inverted:!1},{regions:[e],inverted:!1}).regions:polybooljs.union({regions:t,inverted:!1},{regions:[e],inverted:!1}).regions}function fillSelectionItem(t,e){if(Array.isArray(t))for(var r=e.cd,n=e.cd[0].trace,i=0;i<t.length;i++)t[i]=makeEventData(t[i],n,r);return t}function convertPoly(t,e){for(var r=[],n=0;n<t.length;n++){r[n]=[];for(var i=0;i<t[n].length;i++){r[n][i]=[],r[n][i][0]=i?"L":"M";for(var a=0;a<t[n][i].length;a++)r[n][i].push(t[n][i][a])}e||r[n].push(["Z",r[n][0][1],r[n][0][2]])}return r}var select$2={prepSelect:prepSelect$1,clearSelect:clearSelect$1,clearSelectionsCache:clearSelectionsCache,selectOnClick:selectOnClick$1},numberFormat=lib_1.numberFormat,strTranslate$6=lib_1.strTranslate,selectingOrDrawing=helpers$7.selectingOrDrawing,freeMode=helpers$7.freeMode,FROM_TL$3=alignment.FROM_TL,redrawReglTraces=subroutines.redrawReglTraces,getFromId=axis_ids.getFromId,prepSelect=select$2.prepSelect,clearSelect=select$2.clearSelect,selectOnClick=select$2.selectOnClick,MINDRAG=constants$c.MINDRAG,MINZOOM=constants$c.MINZOOM,SHOWZOOMOUTTIP=!0;function makeDragBox(t,e,r,n,i,a,o,s){var l,c,u,d,h,g,f,p,m,y,b,v,x,I,B,C,F,A,Q,_,w,U,S,E=t._fullLayout._zoomlayer,L=o+s==="nsew",T=1===(o+s).length;function R(){if(l=e.xaxis,c=e.yaxis,m=l._length,y=c._length,f=l._offset,p=c._offset,(u={})[l._id]=l,(d={})[c._id]=c,o&&s)for(var r=e.overlays,n=0;n<r.length;n++){var i=r[n].xaxis;u[i._id]=i;var a=r[n].yaxis;d[a._id]=a}h=hashValues(u),g=hashValues(d),x=isDirectionActive(h,s),I=isDirectionActive(g,o),B=!I&&!x,v=calcLinks(t,t._fullLayout._axisMatchGroups,u,d);var w=(b=calcLinks(t,t._fullLayout._axisConstraintGroups,u,d,v)).isSubplotConstrained||v.isSubplotConstrained;C=s||w,F=o||w;var U=t._fullLayout;A=U._has("scattergl"),Q=U._has("splom"),_=U._has("svg")}R();var k=getDragCursor(I+x,t._fullLayout.dragmode,L),G=makeRectDragger(e,o+s+"drag",k,r,n,i,a);if(B&&!L)return G.onmousedown=null,G.style.pointerEvents="none",G;var N,M,D,X,V,W,Z,O,$,H,Y={element:G,gd:t,plotinfo:e};function P(){Y.plotinfo.selection=!1,clearSelect(t)}function z(t,r){var n=Y.gd;if(n._fullLayout._activeShapeIndex>=0)n._fullLayout._deactivateShape(n);else{var i=n._fullLayout.clickmode;if(removeZoombox(n),2!==t||T||ot(),L)i.indexOf("select")>-1&&selectOnClick(r,n,h,g,e.id,Y),i.indexOf("event")>-1&&fx.click(n,r,e.id);else if(1===t&&T){var a=o?c:l,u="s"===o||"w"===s?0:1,d=a._name+".range["+u+"]",f=getEndText(a,u),p="left",m="middle";if(a.fixedrange)return;o?(m="n"===o?"top":"bottom","right"===a.side&&(p="right")):"e"===s&&(p="right"),n._context.showAxisRangeEntryBoxes&&d3.select(G).call(svg_text_utils.makeEditable,{gd:n,immediate:!0,background:n._fullLayout.paper_bgcolor,text:String(f),fill:a.tickfont?a.tickfont.color:"#444",horizontalAlign:p,verticalAlign:m}).on("edit",(function(t){var e=a.d2r(t);void 0!==e&&registry.call("_guiRelayout",n,d,e)}))}}}function J(e,r){if(t._transitioningWithDuration)return!1;var n=Math.max(0,Math.min(m,U*e+N)),i=Math.max(0,Math.min(y,S*r+M)),a=Math.abs(n-N),o=Math.abs(i-M);function s(){Z="",D.r=D.l,D.t=D.b,$.attr("d","M0,0Z")}if(D.l=Math.min(N,n),D.r=Math.max(N,n),D.t=Math.min(M,i),D.b=Math.max(M,i),b.isSubplotConstrained)a>MINZOOM||o>MINZOOM?(Z="xy",a/m>o/y?(o=a*y/m,M>i?D.t=M-o:D.b=M+o):(a=o*m/y,N>n?D.l=N-a:D.r=N+a),$.attr("d",xyCorners(D))):s();else if(v.isSubplotConstrained)if(a>MINZOOM||o>MINZOOM){Z="xy";var l=Math.min(D.l/m,(y-D.b)/y),c=Math.max(D.r/m,(y-D.t)/y);D.l=l*m,D.r=c*m,D.b=(1-l)*y,D.t=(1-c)*y,$.attr("d",xyCorners(D))}else s();else!I||o<Math.min(Math.max(.6*a,MINDRAG),MINZOOM)?a<MINDRAG||!x?s():(D.t=0,D.b=y,Z="x",$.attr("d",xCorners(D,M))):!x||a<Math.min(.6*o,MINZOOM)?(D.l=0,D.r=m,Z="y",$.attr("d",yCorners(D,N))):(Z="xy",$.attr("d",xyCorners(D)));D.w=D.r-D.l,D.h=D.b-D.t,Z&&(H=!0),t._dragged=H,updateZoombox(O,$,D,V,W,X),j(),t.emit("plotly_relayouting",w),W=!0}function j(){w={},"xy"!==Z&&"x"!==Z||(zoomAxRanges(h,D.l/m,D.r/m,w,b.xaxes),it("x",w)),"xy"!==Z&&"y"!==Z||(zoomAxRanges(g,(y-D.b)/y,(y-D.t)/y,w,b.yaxes),it("y",w))}function K(){j(),removeZoombox(t),st(),showDoubleClickNotifier(t)}Y.prepFn=function(e,r,n){var i=Y.dragmode,a=t._fullLayout.dragmode;a!==i&&(Y.dragmode=a),R(),U=t._fullLayout._invScaleX,S=t._fullLayout._invScaleY,B||(L?e.shiftKey?"pan"===a?a="zoom":selectingOrDrawing(a)||(a="pan"):e.ctrlKey&&(a="pan"):a="pan"),freeMode(a)?Y.minDrag=1:Y.minDrag=void 0,selectingOrDrawing(a)?(Y.xaxes=h,Y.yaxes=g,prepSelect(e,r,n,Y,a)):(Y.clickFn=z,selectingOrDrawing(i)&&P(),B||("zoom"===a?(Y.moveFn=J,Y.doneFn=K,Y.minDrag=1,function(e,r,n){var i=G.getBoundingClientRect();N=r-i.left,M=n-i.top,t._fullLayout._calcInverseTransform(t);var a=lib_1.apply3DTransform(t._fullLayout._invTransform)(N,M);N=a[0],M=a[1],D={l:N,r:N,w:0,t:M,b:M,h:0},X=t._hmpixcount?t._hmlumcount/t._hmpixcount:tinycolor(t._fullLayout.plot_bgcolor).getLuminance(),W=!1,Z="xy",H=!1,O=makeZoombox(E,X,f,p,V="M0,0H"+m+"V"+y+"H0V0"),$=makeCorners(E,f,p)}(0,r,n)):"pan"===a&&(Y.moveFn=nt,Y.doneFn=st))),t._fullLayout._redrag=function(){var e=t._dragdata;if(e&&e.element===G){var r=t._fullLayout.dragmode;selectingOrDrawing(r)||(R(),lt([0,0,m,y]),Y.moveFn(e.dx,e.dy))}}},dragelement.init(Y);var q=[0,0,m,y],tt=null,et=constants$c.REDRAWDELAY,rt=e.mainplot?t._fullLayout._plots[e.mainplot]:e;function nt(e,r){if(e*=U,r*=S,!t._transitioningWithDuration){if(t._fullLayout._replotting=!0,"ew"===x||"ns"===I){var n=x?-e:0,i=I?-r:0;if(v.isSubplotConstrained){if(x&&I){var a=(e/m-r/y)/2;n=-(e=a*m),i=-(r=-a*y)}I?n=-i*m/y:i=-n*y/m}return x&&(dragAxList(h,e),it("x")),I&&(dragAxList(g,r),it("y")),lt([n,i,m,y]),at(),void t.emit("plotly_relayouting",w)}var o,s,l="w"===x==("n"===I)?1:-1;if(x&&I&&(b.isSubplotConstrained||v.isSubplotConstrained)){var c=(e/m+l*r/y)/2;e=c*m,r=l*c*y}if("w"===x?e=p(h,0,e):"e"===x?e=p(h,1,-e):x||(e=0),"n"===I?r=p(g,1,r):"s"===I?r=p(g,0,-r):I||(r=0),o="w"===x?e:0,s="n"===I?r:0,b.isSubplotConstrained&&!v.isSubplotConstrained||v.isSubplotConstrained&&x&&I&&l>0){var u;if(v.isSubplotConstrained||!x&&1===I.length){for(u=0;u<h.length;u++)h[u].range=h[u]._r.slice(),scale_zoom(h[u],1-r/y);o=(e=r*m/y)/2}if(v.isSubplotConstrained||!I&&1===x.length){for(u=0;u<g.length;u++)g[u].range=g[u]._r.slice(),scale_zoom(g[u],1-e/m);s=(r=e*y/m)/2}}v.isSubplotConstrained&&I||it("x"),v.isSubplotConstrained&&x||it("y");var d=m-e,f=y-r;!v.isSubplotConstrained||x&&I||(x?(s=o?0:e*y/m,f=d*y/m):(o=s?0:r*m/y,d=f*m/y)),lt([o,s,d,f]),at(),t.emit("plotly_relayouting",w)}function p(t,e,r){for(var n,i,a=1-e,o=0;o<t.length;o++){var s=t[o];if(!s.fixedrange){n=s,i=s._rl[a]+(s._rl[e]-s._rl[a])/dZoom(r/s._length);var l=s.l2r(i);!1!==l&&void 0!==l&&(s.range[e]=l)}}return n._length*(n._rl[e]-i)/(n._rl[e]-n._rl[a])}}function it(t,e){for(var r=v.isSubplotConstrained?{x:g,y:h}[t]:v[t+"axes"],n=v.isSubplotConstrained?{x:h,y:g}[t]:[],i=0;i<r.length;i++){var a=r[i],o=a._id,s=v.xLinks[o]||v.yLinks[o],l=n[0]||u[s]||d[s];l&&(e?(e[a._name+".range[0]"]=e[l._name+".range[0]"],e[a._name+".range[1]"]=e[l._name+".range[1]"]):a.range=l.range.slice())}}function at(){var e,r=[];function n(t){for(e=0;e<t.length;e++)t[e].fixedrange||r.push(t[e]._id)}for(C&&(n(h),n(b.xaxes),n(v.xaxes)),F&&(n(g),n(b.yaxes),n(v.yaxes)),w={},e=0;e<r.length;e++){var i=r[e],a=getFromId(t,i);axes_1.drawOne(t,a,{skipTitle:!0}),w[a._name+".range[0]"]=a.range[0],w[a._name+".range[1]"]=a.range[1]}axes_1.redrawComponents(t,r)}function ot(){if(!t._transitioningWithDuration){var e=t._context.doubleClick,r=[];x&&(r=r.concat(h)),I&&(r=r.concat(g)),v.xaxes&&(r=r.concat(v.xaxes)),v.yaxes&&(r=r.concat(v.yaxes));var n,i,a,o={};if("reset+autosize"===e)for(e="autosize",i=0;i<r.length;i++)if((n=r[i])._rangeInitial&&(n.range[0]!==n._rangeInitial[0]||n.range[1]!==n._rangeInitial[1])||!n._rangeInitial&&!n.autorange){e="reset";break}if("autosize"===e)for(i=0;i<r.length;i++)(n=r[i]).fixedrange||(o[n._name+".autorange"]=!0);else if("reset"===e)for((x||b.isSubplotConstrained)&&(r=r.concat(b.xaxes)),I&&!b.isSubplotConstrained&&(r=r.concat(b.yaxes)),b.isSubplotConstrained&&(x?I||(r=r.concat(g)):r=r.concat(h)),i=0;i<r.length;i++)(n=r[i]).fixedrange||(n._rangeInitial?(a=n._rangeInitial,o[n._name+".range[0]"]=a[0],o[n._name+".range[1]"]=a[1]):o[n._name+".autorange"]=!0);t.emit("plotly_doubleclick",null),registry.call("_guiRelayout",t,o)}}function st(){lt([0,0,m,y]),lib_1.syncOrAsync([plots_1.previousPromises,function(){t._fullLayout._replotting=!1,registry.call("_guiRelayout",t,w)}],t)}function lt(e){var r,n,i,a,h=t._fullLayout,g=h._plots,f=h._subplots.cartesian;if(Q&&registry.subplotsRegistry.splom.drag(t),A)for(r=0;r<f.length;r++)if(i=(n=g[f[r]]).xaxis,a=n.yaxis,n._scene){var p=lib_1.simpleMap(i.range,i.r2l),m=lib_1.simpleMap(a.range,a.r2l);n._scene.update({range:[p[0],m[0],p[1],m[1]]})}if((Q||A)&&(clear_gl_canvases(t),redrawReglTraces(t)),_){var y=e[2]/l._length,b=e[3]/c._length;for(r=0;r<f.length;r++){i=(n=g[f[r]]).xaxis,a=n.yaxis;var B,w,U,S,E=(C||v.isSubplotConstrained)&&!i.fixedrange&&u[i._id],L=(F||v.isSubplotConstrained)&&!a.fixedrange&&d[a._id];if(E?(B=y,U=s||v.isSubplotConstrained?e[0]:dt(i,B)):v.xaHash[i._id]?(B=y,U=e[0]*i._length/l._length):v.yaHash[i._id]?(B=b,U="ns"===I?-e[1]*i._length/c._length:dt(i,B,{n:"top",s:"bottom"}[I])):U=ut(i,B=ct(i,y,b)),L?(w=b,S=o||v.isSubplotConstrained?e[1]:dt(a,w)):v.yaHash[a._id]?(w=b,S=e[1]*a._length/c._length):v.xaHash[a._id]?(w=y,S="ew"===x?-e[0]*a._length/l._length:dt(a,w,{e:"right",w:"left"}[x])):S=ut(a,w=ct(a,y,b)),B||w){B||(B=1),w||(w=1);var T=i._offset-U/B,R=a._offset-S/w;n.clipRect.call(drawing_1.setTranslate,U,S).call(drawing_1.setScale,B,w),n.plot.call(drawing_1.setTranslate,T,R).call(drawing_1.setScale,1/B,1/w),B===n.xScaleFactor&&w===n.yScaleFactor||(drawing_1.setPointGroupScale(n.zoomScalePts,B,w),drawing_1.setTextPointsScale(n.zoomScaleTxt,B,w)),drawing_1.hideOutsideRangePoints(n.clipOnAxisFalseTraces,n),n.xScaleFactor=B,n.yScaleFactor=w}}}}function ct(t,e,r){return t.fixedrange?0:C&&b.xaHash[t._id]?e:F&&(b.isSubplotConstrained?b.xaHash:b.yaHash)[t._id]?r:0}function ut(t,e){return e?(t.range=t._r.slice(),scale_zoom(t,e),dt(t,e)):0}function dt(t,e,r){return t._length*(1-e)*FROM_TL$3[r||t.constraintoward||"middle"]}return o.length*s.length!=1&&attachWheelEventHandler(G,(function(e){if(t._context._scrollZoom.cartesian||t._fullLayout._enablescrollzoom){if(P(),t._transitioningWithDuration)return e.preventDefault(),void e.stopPropagation();R(),clearTimeout(tt);var r=-e.deltaY;if(isFinite(r)||(r=e.wheelDelta/10),isFinite(r)){var n,i=Math.exp(-Math.min(Math.max(r,-20),20)/200),a=rt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),l=(e.clientX-a.left)/a.width,c=(a.bottom-e.clientY)/a.height;if(C){for(s||(l=.5),n=0;n<h.length;n++)u(h[n],l,i);it("x"),q[2]*=i,q[0]+=q[2]*l*(1/i-1)}if(F){for(o||(c=.5),n=0;n<g.length;n++)u(g[n],c,i);it("y"),q[3]*=i,q[1]+=q[3]*(1-c)*(1/i-1)}lt(q),at(),t.emit("plotly_relayouting",w),tt=setTimeout((function(){t._fullLayout&&(q=[0,0,m,y],st())}),et),e.preventDefault()}else lib_1.log("Did not find wheel motion attributes: ",e)}function u(t,e,r){if(!t.fixedrange){var n=lib_1.simpleMap(t.range,t.r2l),i=n[0]+(n[1]-n[0])*e;t.range=n.map((function(e){return t.l2r(i+(e-i)*r)}))}}})),G}function makeDragger(t,e,r,n){var i=lib_1.ensureSingle(t.draglayer,e,r,(function(e){e.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id)}));return i.call(setcursor,n),i.node()}function makeRectDragger(t,e,r,n,i,a,o){var s=makeDragger(t,"rect",e,r);return d3.select(s).call(drawing_1.setRect,n,i,a,o),s}function isDirectionActive(t,e){for(var r=0;r<t.length;r++)if(!t[r].fixedrange)return e;return""}function getEndText(t,e){var r,n=t.range[e],i=Math.abs(n-t.range[1-e]);return"date"===t.type?n:"log"===t.type?(r=Math.ceil(Math.max(0,-Math.log(i)/Math.LN10))+3,numberFormat("."+r+"g")(Math.pow(10,n))):(r=Math.floor(Math.log(Math.abs(n))/Math.LN10)-Math.floor(Math.log(i)/Math.LN10)+4,numberFormat("."+String(r)+"g")(n))}function zoomAxRanges(t,e,r,n,i){for(var a=0;a<t.length;a++){var o=t[a];if(!o.fixedrange)if(o.rangebreaks){var s="y"===o._id.charAt(0),l=s?1-e:e,c=s?1-r:r;n[o._name+".range[0]"]=o.l2r(o.p2l(l*o._length)),n[o._name+".range[1]"]=o.l2r(o.p2l(c*o._length))}else{var u=o._rl[0],d=o._rl[1]-u;n[o._name+".range[0]"]=o.l2r(u+d*e),n[o._name+".range[1]"]=o.l2r(u+d*r)}}if(i&&i.length){var h=(e+(1-r))/2;zoomAxRanges(i,h,1-h,n,[])}}function dragAxList(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(!n.fixedrange)if(n.rangebreaks){var i=n._length,a=(n.p2l(0+e)-n.p2l(0)+(n.p2l(i+e)-n.p2l(i)))/2;n.range=[n.l2r(n._rl[0]-a),n.l2r(n._rl[1]-a)]}else n.range=[n.l2r(n._rl[0]-e/n._m),n.l2r(n._rl[1]-e/n._m)]}}function dZoom(t){return 1-(t>=0?Math.min(t,.9):1/(1/Math.max(t,-.3)+3.222))}function getDragCursor(t,e,r){return t?"nsew"===t?r?"":"pan"===e?"move":"crosshair":t.toLowerCase()+"-resize":"pointer"}function makeZoombox(t,e,r,n,i){return t.append("path").attr("class","zoombox").style({fill:e>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",strTranslate$6(r,n)).attr("d",i+"Z")}function makeCorners(t,e,r){return t.append("path").attr("class","zoombox-corners").style({fill:color_1.background,stroke:color_1.defaultLine,"stroke-width":1,opacity:0}).attr("transform",strTranslate$6(e,r)).attr("d","M0,0Z")}function updateZoombox(t,e,r,n,i,a){t.attr("d",n+"M"+r.l+","+r.t+"v"+r.h+"h"+r.w+"v-"+r.h+"h-"+r.w+"Z"),transitionZoombox(t,e,i,a)}function transitionZoombox(t,e,r,n){r||(t.transition().style("fill",n>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),e.transition().style("opacity",1).duration(200))}function removeZoombox(t){d3.select(t).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function showDoubleClickNotifier(t){SHOWZOOMOUTTIP&&t.data&&t._context.showTips&&(lib_1.notifier(lib_1._(t,"Double-click to zoom back out"),"long"),SHOWZOOMOUTTIP=!1)}function xCorners(t,e){return"M"+(t.l-.5)+","+(e-MINZOOM-.5)+"h-3v"+(2*MINZOOM+1)+"h3ZM"+(t.r+.5)+","+(e-MINZOOM-.5)+"h3v"+(2*MINZOOM+1)+"h-3Z"}function yCorners(t,e){return"M"+(e-MINZOOM-.5)+","+(t.t-.5)+"v-3h"+(2*MINZOOM+1)+"v3ZM"+(e-MINZOOM-.5)+","+(t.b+.5)+"v3h"+(2*MINZOOM+1)+"v-3Z"}function xyCorners(t){var e=Math.floor(Math.min(t.b-t.t,t.r-t.l,MINZOOM)/2);return"M"+(t.l-3.5)+","+(t.t-.5+e)+"h3v"+-e+"h"+e+"v-3h-"+(e+3)+"ZM"+(t.r+3.5)+","+(t.t-.5+e)+"h-3v"+-e+"h"+-e+"v-3h"+(e+3)+"ZM"+(t.r+3.5)+","+(t.b+.5-e)+"h-3v"+e+"h"+-e+"v3h"+(e+3)+"ZM"+(t.l-3.5)+","+(t.b+.5-e)+"h3v"+e+"h"+e+"v3h-"+(e+3)+"Z"}function calcLinks(t,e,r,n,i){for(var a,o,s,l,c=!1,u={},d={},h=(i||{}).xaHash,g=(i||{}).yaHash,f=0;f<e.length;f++){var p=e[f];for(a in r)if(p[a]){for(s in p)i&&(h[s]||g[s])||("x"===s.charAt(0)?r:n)[s]||(u[s]=a);for(o in n)i&&(h[o]||g[o])||!p[o]||(c=!0)}for(o in n)if(p[o])for(l in p)i&&(h[l]||g[l])||("x"===l.charAt(0)?r:n)[l]||(d[l]=o)}c&&(lib_1.extendFlat(u,d),d={});var m={},y=[];for(s in u){var b=getFromId(t,s);y.push(b),m[b._id]=b}var v={},x=[];for(l in d){var I=getFromId(t,l);x.push(I),v[I._id]=I}return{xaHash:m,yaHash:v,xaxes:y,yaxes:x,xLinks:u,yLinks:d,isSubplotConstrained:c}}function attachWheelEventHandler(t,e){void 0!==t.onwheel?t.onwheel=e:void 0!==t.onmousewheel?t.onmousewheel=e:t.isAddedWheelEvent||(t.isAddedWheelEvent=!0,t.addEventListener("wheel",e,{passive:!1}))}function hashValues(t){var e=[];for(var r in t)e.push(t[r]);return e}var dragbox={makeDragBox:makeDragBox,makeDragger:makeDragger,makeRectDragger:makeRectDragger,makeZoombox:makeZoombox,makeCorners:makeCorners,updateZoombox:updateZoombox,xyCorners:xyCorners,transitionZoombox:transitionZoombox,removeZoombox:removeZoombox,showDoubleClickNotifier:showDoubleClickNotifier,attachWheelEventHandler:attachWheelEventHandler},graph_interact=createCommonjsModule((function(t,e){var r=dragbox.makeDragBox,n=constants$c.DRAGGERSIZE;e.initInteractions=function(t){var i=t._fullLayout;if(t._context.staticPlot)d3.select(t).selectAll(".drag").remove();else if(i._has("cartesian")||i._has("splom")){var a=Object.keys(i._plots||{}).sort((function(t,e){if((i._plots[t].mainplot&&!0)===(i._plots[e].mainplot&&!0)){var r=t.split("y"),n=e.split("y");return r[0]===n[0]?Number(r[1]||1)-Number(n[1]||1):Number(r[0]||1)-Number(n[0]||1)}return i._plots[t].mainplot?1:-1}));a.forEach((function(e){var a=i._plots[e],o=a.xaxis,s=a.yaxis;if(!a.mainplot){var l=r(t,a,o._offset,s._offset,o._length,s._length,"ns","ew");l.onmousemove=function(r){t._fullLayout._rehover=function(){t._fullLayout._hoversubplot===e&&t._fullLayout._plots[e]&&fx.hover(t,r,e)},fx.hover(t,r,e),t._fullLayout._lasthover=l,t._fullLayout._hoversubplot=e},l.onmouseout=function(e){t._dragging||(t._fullLayout._hoversubplot=null,dragelement.unhover(t,e))},t._context.showAxisDragHandles&&(r(t,a,o._offset-n,s._offset-n,n,n,"n","w"),r(t,a,o._offset+o._length,s._offset-n,n,n,"n","e"),r(t,a,o._offset-n,s._offset+s._length,n,n,"s","w"),r(t,a,o._offset+o._length,s._offset+s._length,n,n,"s","e"))}if(t._context.showAxisDragHandles){if(e===o._mainSubplot){var c=o._mainLinePosition;"top"===o.side&&(c-=n),r(t,a,o._offset+.1*o._length,c,.8*o._length,n,"","ew"),r(t,a,o._offset,c,.1*o._length,n,"","w"),r(t,a,o._offset+.9*o._length,c,.1*o._length,n,"","e")}if(e===s._mainSubplot){var u=s._mainLinePosition;"right"!==s.side&&(u-=n),r(t,a,u,s._offset+.1*s._length,n,.8*s._length,"ns",""),r(t,a,u,s._offset+.9*s._length,n,.1*s._length,"s",""),r(t,a,u,s._offset,n,.1*s._length,"n","")}}}));var o=i._hoverlayer.node();o.onmousemove=function(e){e.target=t._fullLayout._lasthover,fx.hover(t,e,i._hoversubplot)},o.onclick=function(e){e.target=t._fullLayout._lasthover,fx.click(t,e)},o.onmousedown=function(e){t._fullLayout._lasthover.onmousedown(e)},e.updateFx(t)}},e.updateFx=function(t){var e=t._fullLayout,r="pan"===e.dragmode?"move":"crosshair";setcursor(e._draggers,r)}})),container_array_match=function(t){for(var e,r,n=registry.layoutArrayContainers,i=registry.layoutArrayRegexes,a=t.split("[")[0],o=0;o<i.length;o++)if((r=t.match(i[o]))&&0===r.index){e=r[0];break}if(e||(e=n[n.indexOf(a)]),!e)return!1;var s=t.substr(e.length);return s?!!(r=s.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:e,index:Number(r[1]),property:r[3]||""}:{array:e,index:"",property:""}},manage_arrays=createCommonjsModule((function(t,e){var r=search.sorterAsc;e.containerArrayMatch=container_array_match;var n=e.isAddVal=function(t){return"add"===t||is_plain_object(t)},i=e.isRemoveVal=function(t){return null===t||"remove"===t};e.applyContainerArrayChanges=function(t,e,a,o,s){var l=e.astr,c=registry.getComponentMethod(l,"supplyLayoutDefaults"),u=registry.getComponentMethod(l,"draw"),d=registry.getComponentMethod(l,"drawOne"),h=o.replot||o.recalc||c===noop$1||u===noop$1,g=t.layout,f=t._fullLayout;if(a[""]){Object.keys(a).length>1&&loggers_1.warn("Full array edits are incompatible with other edits",l);var p=a[""][""];if(i(p))e.set(null);else{if(!Array.isArray(p))return loggers_1.warn("Unrecognized full array edit value",l,p),!0;e.set(p)}return!h&&(c(g,f),u(t),!0)}var m,y,b,v,x,I,B,C,F=Object.keys(a).map(Number).sort(r),A=e.get(),Q=A||[],_=s(f,l).get(),w=[],U=-1,S=Q.length;for(m=0;m<F.length;m++)if(v=a[b=F[m]],x=Object.keys(v),I=v[""],B=n(I),b<0||b>Q.length-(B?0:1))loggers_1.warn("index out of range",l,b);else if(void 0!==I)x.length>1&&loggers_1.warn("Insertion & removal are incompatible with edits to the same index.",l,b),i(I)?w.push(b):B?("add"===I&&(I={}),Q.splice(b,0,I),_&&_.splice(b,0,{})):loggers_1.warn("Unrecognized full object edit value",l,b,I),-1===U&&(U=b);else for(y=0;y<x.length;y++)C=l+"["+b+"].",s(Q[b],x[y],C).set(v[x[y]]);for(m=w.length-1;m>=0;m--)Q.splice(w[m],1),_&&_.splice(w[m],1);if(Q.length?A||e.set(Q):e.set(null),h)return!1;if(c(g,f),d!==noop$1){var E;if(-1===U)E=F;else{for(S=Math.max(Q.length,S),E=[],m=0;m<F.length&&!((b=F[m])>=U);m++)E.push(b);for(m=U;m<S;m++)E.push(m)}for(m=0;m<E.length;m++)d(t,E[m])}else u(t);return!0}})),helpers$3=createCommonjsModule((function(t,e){var r=axis_ids.cleanId,n=axis_ids.getFromTrace,i=registry.traceIs;function a(t,e){var n=t[e],i=e.charAt(0);n&&"paper"!==n&&(t[e]=r(n,i,!0))}function o(t){function e(e,r){var n=t[e],i=t.title&&t.title[r];n&&!i&&(t.title||(t.title={}),t.title[r]=t[e],delete t[e])}t&&("string"!=typeof t.title&&"number"!=typeof t.title||(t.title={text:t.title}),e("titlefont","font"),e("titleposition","position"),e("titleside","side"),e("titleoffset","offset"))}function s(t){if(!lib_1.isPlainObject(t))return!1;var e=t.name;return delete t.name,delete t.showlegend,("string"==typeof e||"number"==typeof e)&&String(e)}function l(t,e,r,n){if(r&&!n)return t;if(n&&!r)return e;if(!t.trim())return e;if(!e.trim())return t;var i,a=Math.min(t.length,e.length);for(i=0;i<a&&t.charAt(i)===e.charAt(i);i++);return t.substr(0,i).trim()}function c(t){var e="middle",r="center";return"string"==typeof t&&(-1!==t.indexOf("top")?e="top":-1!==t.indexOf("bottom")&&(e="bottom"),-1!==t.indexOf("left")?r="left":-1!==t.indexOf("right")&&(r="right")),e+" "+r}function u(t,e){return e in t&&"object"==typeof t[e]&&0===Object.keys(t[e]).length}e.clearPromiseQueue=function(t){Array.isArray(t._promises)&&t._promises.length>0&&lib_1.log("Clearing previous rejected promises from queue."),t._promises=[]},e.cleanLayout=function(t){var n,i;t||(t={}),t.xaxis1&&(t.xaxis||(t.xaxis=t.xaxis1),delete t.xaxis1),t.yaxis1&&(t.yaxis||(t.yaxis=t.yaxis1),delete t.yaxis1),t.scene1&&(t.scene||(t.scene=t.scene1),delete t.scene1);var s=(plots_1.subplotsRegistry.cartesian||{}).attrRegex,l=(plots_1.subplotsRegistry.polar||{}).attrRegex,c=(plots_1.subplotsRegistry.ternary||{}).attrRegex,d=(plots_1.subplotsRegistry.gl3d||{}).attrRegex,h=Object.keys(t);for(n=0;n<h.length;n++){var g=h[n];if(s&&s.test(g)){var f=t[g];f.anchor&&"free"!==f.anchor&&(f.anchor=r(f.anchor)),f.overlaying&&(f.overlaying=r(f.overlaying)),f.type||(f.isdate?f.type="date":f.islog?f.type="log":!1===f.isdate&&!1===f.islog&&(f.type="linear")),"withzero"!==f.autorange&&"tozero"!==f.autorange||(f.autorange=!0,f.rangemode="tozero"),delete f.islog,delete f.isdate,delete f.categories,u(f,"domain")&&delete f.domain,void 0!==f.autotick&&(void 0===f.tickmode&&(f.tickmode=f.autotick?"auto":"linear"),delete f.autotick),o(f)}else if(l&&l.test(g)){o(t[g].radialaxis)}else if(c&&c.test(g)){var p=t[g];o(p.aaxis),o(p.baxis),o(p.caxis)}else if(d&&d.test(g)){var m=t[g],y=m.cameraposition;if(Array.isArray(y)&&4===y[0].length){var b=y[0],v=y[1],x=y[2],I=fromQuat_1([],b),B=[];for(i=0;i<3;++i)B[i]=v[i]+x*I[2+4*i];m.camera={eye:{x:B[0],y:B[1],z:B[2]},center:{x:v[0],y:v[1],z:v[2]},up:{x:0,y:0,z:1}},delete m.cameraposition}o(m.xaxis),o(m.yaxis),o(m.zaxis)}}var C=Array.isArray(t.annotations)?t.annotations.length:0;for(n=0;n<C;n++){var F=t.annotations[n];lib_1.isPlainObject(F)&&(F.ref&&("paper"===F.ref?(F.xref="paper",F.yref="paper"):"data"===F.ref&&(F.xref="x",F.yref="y"),delete F.ref),a(F,"xref"),a(F,"yref"))}var A=Array.isArray(t.shapes)?t.shapes.length:0;for(n=0;n<A;n++){var Q=t.shapes[n];lib_1.isPlainObject(Q)&&(a(Q,"xref"),a(Q,"yref"))}var _=Array.isArray(t.images)?t.images.length:0;for(n=0;n<_;n++){var w=t.images[n];lib_1.isPlainObject(w)&&(a(w,"xref"),a(w,"yref"))}var U=t.legend;return U&&(U.x>3?(U.x=1.02,U.xanchor="left"):U.x<-2&&(U.x=-.02,U.xanchor="right"),U.y>3?(U.y=1.02,U.yanchor="bottom"):U.y<-2&&(U.y=-.02,U.yanchor="top")),o(t),"rotate"===t.dragmode&&(t.dragmode="orbit"),color_1.clean(t),t.template&&t.template.layout&&e.cleanLayout(t.template.layout),t},e.cleanData=function(t){for(var n=0;n<t.length;n++){var a,d=t[n];if("histogramy"===d.type&&"xbins"in d&&!("ybins"in d)&&(d.ybins=d.xbins,delete d.xbins),d.error_y&&"opacity"in d.error_y){var h=color_1.defaults,g=d.error_y.color||(i(d,"bar")?color_1.defaultLine:h[n%h.length]);d.error_y.color=color_1.addOpacity(color_1.rgb(g),color_1.opacity(g)*d.error_y.opacity),delete d.error_y.opacity}if("bardir"in d&&("h"!==d.bardir||!i(d,"bar")&&"histogram"!==d.type.substr(0,9)||(d.orientation="h",e.swapXYData(d)),delete d.bardir),"histogramy"===d.type&&e.swapXYData(d),"histogramx"!==d.type&&"histogramy"!==d.type||(d.type="histogram"),"scl"in d&&!("colorscale"in d)&&(d.colorscale=d.scl,delete d.scl),"reversescl"in d&&!("reversescale"in d)&&(d.reversescale=d.reversescl,delete d.reversescl),d.xaxis&&(d.xaxis=r(d.xaxis,"x")),d.yaxis&&(d.yaxis=r(d.yaxis,"y")),i(d,"gl3d")&&d.scene&&(d.scene=plots_1.subplotsRegistry.gl3d.cleanId(d.scene)),!i(d,"pie-like")&&!i(d,"bar-like"))if(Array.isArray(d.textposition))for(a=0;a<d.textposition.length;a++)d.textposition[a]=c(d.textposition[a]);else d.textposition&&(d.textposition=c(d.textposition));var f=registry.getModule(d);if(f&&f.colorbar){var p=f.colorbar.container,m=p?d[p]:d;m&&m.colorscale&&("YIGnBu"===m.colorscale&&(m.colorscale="YlGnBu"),"YIOrRd"===m.colorscale&&(m.colorscale="YlOrRd"))}if("surface"===d.type&&lib_1.isPlainObject(d.contours)){var y=["x","y","z"];for(a=0;a<y.length;a++){var b=d.contours[y[a]];lib_1.isPlainObject(b)&&(b.highlightColor&&(b.highlightcolor=b.highlightColor,delete b.highlightColor),b.highlightWidth&&(b.highlightwidth=b.highlightWidth,delete b.highlightWidth))}}if("candlestick"===d.type||"ohlc"===d.type){var v=!1!==(d.increasing||{}).showlegend,x=!1!==(d.decreasing||{}).showlegend,I=s(d.increasing),B=s(d.decreasing);if(!1!==I&&!1!==B){var C=l(I,B,v,x);C&&(d.name=C)}else!I&&!B||d.name||(d.name=I||B)}if(Array.isArray(d.transforms)){var F=d.transforms;for(a=0;a<F.length;a++){var A=F[a];if(lib_1.isPlainObject(A))switch(A.type){case"filter":A.filtersrc&&(A.target=A.filtersrc,delete A.filtersrc),A.calendar&&(A.valuecalendar||(A.valuecalendar=A.calendar),delete A.calendar);break;case"groupby":if(A.styles=A.styles||A.style,A.styles&&!Array.isArray(A.styles)){var Q=A.styles,_=Object.keys(Q);A.styles=[];for(var w=0;w<_.length;w++)A.styles.push({target:_[w],value:Q[_[w]]})}}}}u(d,"line")&&delete d.line,"marker"in d&&(u(d.marker,"line")&&delete d.marker.line,u(d,"marker")&&delete d.marker),color_1.clean(d),d.autobinx&&(delete d.autobinx,delete d.xbins),d.autobiny&&(delete d.autobiny,delete d.ybins),o(d),d.colorbar&&o(d.colorbar),d.marker&&d.marker.colorbar&&o(d.marker.colorbar),d.line&&d.line.colorbar&&o(d.line.colorbar),d.aaxis&&o(d.aaxis),d.baxis&&o(d.baxis)}},e.swapXYData=function(t){var e;if(lib_1.swapAttrs(t,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(t.z)&&Array.isArray(t.z[0])&&(t.transpose?delete t.transpose:t.transpose=!0),t.error_x&&t.error_y){var r=t.error_y,n="copy_ystyle"in r?r.copy_ystyle:!(r.color||r.thickness||r.width);lib_1.swapAttrs(t,["error_?.copy_ystyle"]),n&&lib_1.swapAttrs(t,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof t.hoverinfo){var i=t.hoverinfo.split("+");for(e=0;e<i.length;e++)"x"===i[e]?i[e]="y":"y"===i[e]&&(i[e]="x");t.hoverinfo=i.join("+")}},e.coerceTraceIndices=function(t,e){if(fastIsnumeric(e))return[e];if(!Array.isArray(e)||!e.length)return t.data.map((function(t,e){return e}));if(Array.isArray(e)){for(var r=[],n=0;n<e.length;n++)lib_1.isIndex(e[n],t.data.length)?r.push(e[n]):lib_1.warn("trace index (",e[n],") is not a number or is out of bounds");return r}return e},e.manageArrayContainers=function(t,e,r){var n=t.obj,i=t.parts,a=i.length,o=i[a-1],s=fastIsnumeric(o);if(s&&null===e){var l=i.slice(0,a-1).join(".");lib_1.nestedProperty(n,l).get().splice(o,1)}else s&&void 0===t.get()?(void 0===t.get()&&(r[t.astr]=null),t.set(e)):t.set(e)};var d=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function h(t){var e=t.search(d);if(e>0)return t.substr(0,e)}e.hasParent=function(t,e){for(var r=h(e);r;){if(r in t)return!0;r=h(r)}return!1};var g=["x","y","z"];e.clearAxisTypes=function(t,e,r){for(var i=0;i<e.length;i++)for(var a=t._fullData[i],o=0;o<3;o++){var s=n(t,a,g[o]);if(s&&"log"!==s.type){var l=s._name,c=s._id.substr(1);if("scene"===c.substr(0,5)){if(void 0!==r[c])continue;l=c+"."+l}var u=l+".type";void 0===r[l]&&void 0===r[u]&&lib_1.nestedProperty(t.layout,u).set(null)}}}})),plot_api$1=createCommonjsModule((function(t,e){var r=lib_1.nestedProperty,n=graph_interact.initInteractions,i=select$2.clearSelect,a=plot_config.dfltConfig,o=constants$c.AX_NAME_PATTERN,s=0;function l(t){var e=t._fullLayout;e._redrawFromAutoMarginCount?e._redrawFromAutoMarginCount--:t.emit("plotly_afterplot")}function c(t,e){try{t._fullLayout._paper.style("background",e)}catch(t){lib_1.error(t)}}function u(t,e){c(t,color_1.combine(e,"white"))}function d(t,e){if(!t._context){t._context=lib_1.extendDeep({},a);var r=d3.select("base");t._context._baseUrl=r.size()&&r.attr("href")?window.location.href.split("#")[0]:""}var n,i,o,s=t._context;if(e){for(i=Object.keys(e),n=0;n<i.length;n++)"editable"!==(o=i[n])&&"edits"!==o&&o in s&&("setBackground"===o&&"opaque"===e[o]?s[o]=u:s[o]=e[o]);e.plot3dPixelRatio&&!s.plotGlPixelRatio&&(s.plotGlPixelRatio=s.plot3dPixelRatio);var l=e.editable;if(void 0!==l)for(s.editable=l,i=Object.keys(s.edits),n=0;n<i.length;n++)s.edits[i[n]]=l;if(e.edits)for(i=Object.keys(e.edits),n=0;n<i.length;n++)(o=i[n])in s.edits&&(s.edits[o]=e.edits[o]);s._exportedPlot=e._exportedPlot}s.staticPlot&&(s.editable=!1,s.edits={},s.autosizable=!1,s.scrollZoom=!1,s.doubleClick=!1,s.showTips=!1,s.showLink=!1,s.displayModeBar=!1),"hover"!==s.displayModeBar||hasHover_1||(s.displayModeBar=!0),"transparent"!==s.setBackground&&"function"==typeof s.setBackground||(s.setBackground=c),s._hasZeroHeight=s._hasZeroHeight||0===t.clientHeight,s._hasZeroWidth=s._hasZeroWidth||0===t.clientWidth;var d=s.scrollZoom,h=s._scrollZoom={};if(!0===d)h.cartesian=1,h.gl3d=1,h.geo=1,h.mapbox=1;else if("string"==typeof d){var g=d.split("+");for(n=0;n<g.length;n++)h[g[n]]=1}else!1!==d&&(h.gl3d=1,h.geo=1,h.mapbox=1)}function h(t,e){var r,n,i=e+1,a=[];for(r=0;r<t.length;r++)(n=t[r])<0?a.push(i+n):a.push(n);return a}function g(t,e,r){var n,i;for(n=0;n<e.length;n++){if((i=e[n])!==parseInt(i,10))throw new Error("all values in "+r+" must be integers");if(i>=t.data.length||i<-t.data.length)throw new Error(r+" must be valid indices for gd.data.");if(e.indexOf(i,n+1)>-1||i>=0&&e.indexOf(-t.data.length+i)>-1||i<0&&e.indexOf(t.data.length+i)>-1)throw new Error("each index in "+r+" must be unique.")}}function f(t,e,r){if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("currentIndices is a required argument.");if(Array.isArray(e)||(e=[e]),g(t,e,"currentIndices"),void 0===r||Array.isArray(r)||(r=[r]),void 0!==r&&g(t,r,"newIndices"),void 0!==r&&e.length!==r.length)throw new Error("current and new indices must be of equal length.")}function p(t,e,n,i,a){!function(t,e,r,n){var i=lib_1.isPlainObject(n);if(!Array.isArray(t.data))throw new Error("gd.data must be an array");if(!lib_1.isPlainObject(e))throw new Error("update must be a key:value object");if(void 0===r)throw new Error("indices must be an integer or array of integers");for(var a in g(t,r,"indices"),e){if(!Array.isArray(e[a])||e[a].length!==r.length)throw new Error("attribute "+a+" must be an array of length equal to indices array length");if(i&&(!(a in n)||!Array.isArray(n[a])||n[a].length!==e[a].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(t,e,n,i);for(var o=function(t,e,n,i){var a,o,s,l,c,u=lib_1.isPlainObject(i),d=[];for(var g in Array.isArray(n)||(n=[n]),n=h(n,t.data.length-1),e)for(var f=0;f<n.length;f++){if(a=t.data[n[f]],o=(s=r(a,g)).get(),l=e[g][f],!lib_1.isArrayOrTypedArray(l))throw new Error("attribute: "+g+" index: "+f+" must be an array");if(!lib_1.isArrayOrTypedArray(o))throw new Error("cannot extend missing or non-array attribute: "+g);if(o.constructor!==l.constructor)throw new Error("cannot extend array with an array of a different type: "+g);c=u?i[g][f]:i,fastIsnumeric(c)||(c=-1),d.push({prop:s,target:o,insert:l,maxp:Math.floor(c)})}return d}(t,e,n,i),s={},l={},c=0;c<o.length;c++){var u=o[c].prop,d=o[c].maxp,f=a(o[c].target,o[c].insert,d);u.set(f[0]),Array.isArray(s[u.astr])||(s[u.astr]=[]),s[u.astr].push(f[1]),Array.isArray(l[u.astr])||(l[u.astr]=[]),l[u.astr].push(o[c].target.length)}return{update:s,maxPoints:l}}function m(t,e){var r=new t.constructor(t.length+e.length);return r.set(t),r.set(e,t.length),r}function y(t,r,n,i){t=lib_1.getGraphDiv(t),helpers$3.clearPromiseQueue(t);var a={};if("string"==typeof r)a[r]=n;else{if(!lib_1.isPlainObject(r))return lib_1.warn("Restyle fail.",r,n,i),Promise.reject();a=lib_1.extendFlat({},r),void 0===i&&(i=n)}Object.keys(a).length&&(t.changed=!0);var o=helpers$3.coerceTraceIndices(t,i),s=I(t,a,o),c=s.flags;c.calc&&(t.calcdata=void 0),c.clearAxisTypes&&helpers$3.clearAxisTypes(t,o,{});var u=[];c.fullReplot?u.push(e._doPlot):(u.push(plots_1.previousPromises),plots_1.supplyDefaults(t),c.markerSize&&(plots_1.doCalcdata(t),A(u)),c.style&&u.push(subroutines.doTraceStyle),c.colorbars&&u.push(subroutines.doColorBars),u.push(l)),u.push(plots_1.rehover,plots_1.redrag),queue_1.add(t,y,[t,s.undoit,s.traces],y,[t,s.redoit,s.traces]);var d=lib_1.syncOrAsync(u,t);return d&&d.then||(d=Promise.resolve()),d.then((function(){return t.emit("plotly_restyle",s.eventData),t}))}function b(t){return void 0===t?null:t}function v(t,e){return e?function(e,n,i){var a=r(e,n),o=a.set;return a.set=function(e){x((i||"")+n,a.get(),e,t),o(e)},a}:r}function x(t,e,r,n){if(Array.isArray(e)||Array.isArray(r))for(var i=Array.isArray(e)?e:[],a=Array.isArray(r)?r:[],o=Math.max(i.length,a.length),s=0;s<o;s++)x(t+"["+s+"]",i[s],a[s],n);else if(lib_1.isPlainObject(e)||lib_1.isPlainObject(r)){var l=lib_1.isPlainObject(e)?e:{},c=lib_1.isPlainObject(r)?r:{},u=lib_1.extendFlat({},l,c);for(var d in u)x(t+"."+d,l[d],c[d],n)}else void 0===n[t]&&(n[t]=b(e))}function I(t,e,n){var i,a=t._fullLayout,o=t._fullData,s=t.data,l=a._guiEditing,c=v(a._preGUI,l),u=lib_1.extendDeepAll({},e);B(e);var d,h=edit_types.traceFlags(),g={},f={};function p(){return n.map((function(){}))}function m(t){var e=axes_1.id2name(t);-1===d.indexOf(e)&&d.push(e)}function y(t){return"LAYOUT"+t+".autorange"}function x(t){return"LAYOUT"+t+".range"}function I(t){for(var e=t;e<o.length;e++)if(o[e]._input===s[t])return o[e]}function C(r,i,o){if(Array.isArray(r))r.forEach((function(t){C(t,i,o)}));else if(!(r in e)&&!helpers$3.hasParent(e,r)){var u;if("LAYOUT"===r.substr(0,6))u=c(t.layout,r.replace("LAYOUT",""));else{var d=n[o];u=v(a._tracePreGUI[I(d)._fullInput.uid],l)(s[d],r)}r in f||(f[r]=p()),void 0===f[r][o]&&(f[r][o]=b(u.get())),void 0!==i&&u.set(i)}}function F(t){return function(e){return o[e][t]}}function A(t){return function(e,r){return!1===e?o[n[r]][t]:null}}for(var Q in e){if(helpers$3.hasParent(e,Q))throw new Error("cannot set "+Q+" and a parent attribute simultaneously");var _,w,U,S,E,L,T=e[Q];if("autobinx"!==Q&&"autobiny"!==Q||(Q=Q.charAt(Q.length-1)+"bins",T=Array.isArray(T)?T.map(A(Q)):!1===T?n.map(F(Q)):null),g[Q]=T,"LAYOUT"!==Q.substr(0,6)){for(f[Q]=p(),i=0;i<n.length;i++){if(_=s[n[i]],w=I(n[i]),S=(U=v(a._tracePreGUI[w._fullInput.uid],l)(_,Q)).get(),void 0!==(E=Array.isArray(T)?T[i%T.length]:T)){var R=U.parts[U.parts.length-1],k=Q.substr(0,Q.length-R.length-1),G=k?k+".":"",N=k?r(w,k).get():w;if((L=plot_schema.getTraceValObject(w,U.parts))&&L.impliedEdits&&null!==E)for(var M in L.impliedEdits)C(lib_1.relativeAttr(Q,M),L.impliedEdits[M],i);else if("thicknessmode"!==R&&"lenmode"!==R||S===E||"fraction"!==E&&"pixels"!==E||!N){if("type"===Q&&("pie"===E!=("pie"===S)||"funnelarea"===E!=("funnelarea"===S))){var D="x",X="y";"bar"!==E&&"bar"!==S||"h"!==_.orientation||(D="y",X="x"),lib_1.swapAttrs(_,["?","?src"],"labels",D),lib_1.swapAttrs(_,["d?","?0"],"label",D),lib_1.swapAttrs(_,["?","?src"],"values",X),"pie"===S||"funnelarea"===S?(r(_,"marker.color").set(r(_,"marker.colors").get()),a._pielayer.selectAll("g.trace").remove()):registry.traceIs(_,"cartesian")&&r(_,"marker.colors").set(r(_,"marker.color").get())}}else{var V=a._size,W=N.orient,Z="top"===W||"bottom"===W;if("thicknessmode"===R){var O=Z?V.h:V.w;C(G+"thickness",N.thickness*("fraction"===E?1/O:O),i)}else{var $=Z?V.w:V.h;C(G+"len",N.len*("fraction"===E?1/$:$),i)}}f[Q][i]=b(S);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Q)){if("orientation"===Q){U.set(E);var H=_.x&&!_.y?"h":"v";if((U.get()||H)===w.orientation)continue}else"orientationaxes"===Q&&(_.orientation={v:"h",h:"v"}[w.orientation]);helpers$3.swapXYData(_),h.calc=h.clearAxisTypes=!0}else-1!==plots_1.dataArrayContainers.indexOf(U.parts[0])?(helpers$3.manageArrayContainers(U,E,f),h.calc=!0):(L?L.arrayOk&&!registry.traceIs(w,"regl")&&(lib_1.isArrayOrTypedArray(E)||lib_1.isArrayOrTypedArray(S))?h.calc=!0:edit_types.update(h,L):h.calc=!0,U.set(E))}}if(-1!==["swapxyaxes","orientationaxes"].indexOf(Q)&&axes_1.swap(t,n),"orientationaxes"===Q){var Y=r(t.layout,"hovermode"),P=Y.get();"x"===P?Y.set("y"):"y"===P?Y.set("x"):"x unified"===P?Y.set("y unified"):"y unified"===P&&Y.set("x unified")}if(-1!==["orientation","type"].indexOf(Q)){for(d=[],i=0;i<n.length;i++){var z=s[n[i]];registry.traceIs(z,"cartesian")&&(m(z.xaxis||"x"),m(z.yaxis||"y"))}C(d.map(y),!0,0),C(d.map(x),[0,1],0)}}else U=c(t.layout,Q.replace("LAYOUT","")),f[Q]=[b(U.get())],U.set(Array.isArray(T)?T[0]:T),h.calc=!0}return(h.calc||h.plot)&&(h.fullReplot=!0),{flags:h,undoit:f,redoit:g,traces:n,eventData:lib_1.extendDeepNoArrays([],[u,n])}}function B(t){var e,r,n,i=lib_1.counterRegex("axis",".title",!1,!1),a=/colorbar\.title$/,o=Object.keys(t);for(e=0;e<o.length;e++)r=o[e],n=t[r],"title"!==r&&!i.test(r)&&!a.test(r)||"string"!=typeof n&&"number"!=typeof n?r.indexOf("titlefont")>-1&&-1===r.indexOf("grouptitlefont")?s(r,r.replace("titlefont","title.font")):r.indexOf("titleposition")>-1?s(r,r.replace("titleposition","title.position")):r.indexOf("titleside")>-1?s(r,r.replace("titleside","title.side")):r.indexOf("titleoffset")>-1&&s(r,r.replace("titleoffset","title.offset")):s(r,r.replace("title","title.text"));function s(e,r){t[r]=t[e],delete t[e]}}function C(t,e,r){t=lib_1.getGraphDiv(t),helpers$3.clearPromiseQueue(t);var n={};if("string"==typeof e)n[e]=r;else{if(!lib_1.isPlainObject(e))return lib_1.warn("Relayout fail.",e,r),Promise.reject();n=lib_1.extendFlat({},e)}Object.keys(n).length&&(t.changed=!0);var i=U(t,n),a=i.flags;a.calc&&(t.calcdata=void 0);var o=[plots_1.previousPromises];a.layoutReplot?o.push(subroutines.layoutReplot):Object.keys(n).length&&(F(t,a,i)||plots_1.supplyDefaults(t),a.legend&&o.push(subroutines.doLegend),a.layoutstyle&&o.push(subroutines.layoutStyles),a.axrange&&A(o,i.rangesAltered),a.ticks&&o.push(subroutines.doTicksRelayout),a.modebar&&o.push(subroutines.doModeBar),a.camera&&o.push(subroutines.doCamera),a.colorbars&&o.push(subroutines.doColorBars),o.push(l)),o.push(plots_1.rehover,plots_1.redrag),queue_1.add(t,C,[t,i.undoit],C,[t,i.redoit]);var s=lib_1.syncOrAsync(o,t);return s&&s.then||(s=Promise.resolve(t)),s.then((function(){return t.emit("plotly_relayout",i.eventData),t}))}function F(t,e,r){var n=t._fullLayout;if(!e.axrange)return!1;for(var i in e)if("axrange"!==i&&e[i])return!1;for(var a in r.rangesAltered){var o=axes_1.id2name(a),s=t.layout[o],l=n[o];if(l.autorange=s.autorange,s.range&&(l.range=s.range.slice()),l.cleanRange(),l._matchGroup)for(var c in l._matchGroup)if(c!==a){var u=n[axes_1.id2name(c)];u.autorange=l.autorange,u.range=l.range.slice(),u._input.range=l.range.slice()}}return!0}function A(t,e){var r=e?function(t){var r=[],n=!0;for(var i in e){var a=axes_1.getFromId(t,i);if(r.push(i),-1!==(a.ticklabelposition||"").indexOf("inside")&&a._anchorAxis&&r.push(a._anchorAxis._id),a._matchGroup)for(var o in a._matchGroup)e[o]||r.push(o);a.automargin&&(n=!1)}return axes_1.draw(t,r,{skipTitle:n})}:function(t){return axes_1.draw(t,"redraw")};t.push(i,subroutines.doAutoRangeAndConstraints,r,subroutines.drawData,subroutines.finalDraw)}var Q=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,_=/^[xyz]axis[0-9]*\.autorange$/,w=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function U(t,e){var n,i,a,s=t.layout,l=t._fullLayout,c=l._guiEditing,u=v(l._preGUI,c),d=Object.keys(e),h=axes_1.list(t),g=lib_1.extendDeepAll({},e),f={};for(B(e),d=Object.keys(e),i=0;i<d.length;i++)if(0===d[i].indexOf("allaxes")){for(a=0;a<h.length;a++){var p=h[a]._id.substr(1),m=-1!==p.indexOf("scene")?p+".":"",y=d[i].replace("allaxes",m+h[a]._name);e[y]||(e[y]=e[d[i]])}delete e[d[i]]}var x=edit_types.layoutFlags(),I={},C={};function F(t,r){if(Array.isArray(t))t.forEach((function(t){F(t,r)}));else if(!(t in e)&&!helpers$3.hasParent(e,t)){var n=u(s,t);t in C||(C[t]=b(n.get())),void 0!==r&&n.set(r)}}var A,U={};function E(t){var e=axes_1.name2id(t.split(".")[0]);return U[e]=1,e}for(var L in e){if(helpers$3.hasParent(e,L))throw new Error("cannot set "+L+" and a parent attribute simultaneously");for(var T=u(s,L),R=e[L],k=T.parts.length-1;k>0&&"string"!=typeof T.parts[k];)k--;var G=T.parts[k],N=T.parts[k-1]+"."+G,M=T.parts.slice(0,k).join("."),D=r(t.layout,M).get(),X=r(l,M).get(),V=T.get();if(void 0!==R){I[L]=R,C[L]="reverse"===G?R:b(V);var W=plot_schema.getLayoutValObject(l,T.parts);if(W&&W.impliedEdits&&null!==R)for(var Z in W.impliedEdits)F(lib_1.relativeAttr(L,Z),W.impliedEdits[Z]);if(-1!==["width","height"].indexOf(L))if(R){F("autosize",null);var O="height"===L?"width":"height";F(O,l[O])}else l[L]=t._initialAutoSize[L];else if("autosize"===L)F("width",R?null:l.width),F("height",R?null:l.height);else if(N.match(Q))E(N),r(l,M+"._inputRange").set(null);else if(N.match(_)){E(N),r(l,M+"._inputRange").set(null);var $=r(l,M).get();$._inputDomain&&($._input.domain=$._inputDomain.slice())}else N.match(w)&&r(l,M+"._inputDomain").set(null);if("type"===G){A=D;var H="linear"===X.type&&"log"===R,Y="log"===X.type&&"linear"===R;if(H||Y){if(A&&A.range)if(X.autorange)H&&(A.range=A.range[1]>A.range[0]?[1,2]:[2,1]);else{var P=A.range[0],z=A.range[1];H?(P<=0&&z<=0&&F(M+".autorange",!0),P<=0?P=z/1e6:z<=0&&(z=P/1e6),F(M+".range[0]",Math.log(P)/Math.LN10),F(M+".range[1]",Math.log(z)/Math.LN10)):(F(M+".range[0]",Math.pow(10,P)),F(M+".range[1]",Math.pow(10,z)))}else F(M+".autorange",!0);Array.isArray(l._subplots.polar)&&l._subplots.polar.length&&l[T.parts[0]]&&"radialaxis"===T.parts[1]&&delete l[T.parts[0]]._subplot.viewInitial["radialaxis.range"],registry.getComponentMethod("annotations","convertCoords")(t,X,R,F),registry.getComponentMethod("images","convertCoords")(t,X,R,F)}else F(M+".autorange",!0),F(M+".range",null);r(l,M+"._inputRange").set(null)}else if(G.match(o)){var J=r(l,L).get(),j=(R||{}).type;j&&"-"!==j||(j="linear"),registry.getComponentMethod("annotations","convertCoords")(t,J,j,F),registry.getComponentMethod("images","convertCoords")(t,J,j,F)}var K=manage_arrays.containerArrayMatch(L);if(K){n=K.array,i=K.index;var q=K.property,tt=W||{editType:"calc"};""!==i&&""===q&&(manage_arrays.isAddVal(R)?C[L]=null:manage_arrays.isRemoveVal(R)?C[L]=(r(s,n).get()||[])[i]:lib_1.warn("unrecognized full object value",e)),edit_types.update(x,tt),f[n]||(f[n]={});var et=f[n][i];et||(et=f[n][i]={}),et[q]=R,delete e[L]}else"reverse"===G?(D.range?D.range.reverse():(F(M+".autorange",!0),D.range=[1,0]),X.autorange?x.calc=!0:x.plot=!0):(l._has("scatter-like")&&l._has("regl")&&"dragmode"===L&&("lasso"===R||"select"===R)&&"lasso"!==V&&"select"!==V||l._has("gl2d")?x.plot=!0:W?edit_types.update(x,W):x.calc=!0,T.set(R))}}for(n in f){manage_arrays.applyContainerArrayChanges(t,u(s,n),f[n],x,u)||(x.plot=!0)}for(var rt in U){var nt=(A=axes_1.getFromId(t,rt))&&A._constraintGroup;if(nt)for(var it in x.calc=!0,nt)U[it]||(axes_1.getFromId(t,it)._constraintShrinkable=!0)}return(S(t)||e.height||e.width)&&(x.plot=!0),(x.plot||x.calc)&&(x.layoutReplot=!0),{flags:x,rangesAltered:U,undoit:C,redoit:I,eventData:g}}function S(t){var e=t._fullLayout,r=e.width,n=e.height;return t.layout.autosize&&plots_1.plotAutoSize(t,t.layout,e),e.width!==r||e.height!==n}function E(t,r,n,i){t=lib_1.getGraphDiv(t),helpers$3.clearPromiseQueue(t),lib_1.isPlainObject(r)||(r={}),lib_1.isPlainObject(n)||(n={}),Object.keys(r).length&&(t.changed=!0),Object.keys(n).length&&(t.changed=!0);var a=helpers$3.coerceTraceIndices(t,i),o=I(t,lib_1.extendFlat({},r),a),s=o.flags,c=U(t,lib_1.extendFlat({},n)),u=c.flags;(s.calc||u.calc)&&(t.calcdata=void 0),s.clearAxisTypes&&helpers$3.clearAxisTypes(t,a,n);var d=[];u.layoutReplot?d.push(subroutines.layoutReplot):s.fullReplot?d.push(e._doPlot):(d.push(plots_1.previousPromises),F(t,u,c)||plots_1.supplyDefaults(t),s.style&&d.push(subroutines.doTraceStyle),(s.colorbars||u.colorbars)&&d.push(subroutines.doColorBars),u.legend&&d.push(subroutines.doLegend),u.layoutstyle&&d.push(subroutines.layoutStyles),u.axrange&&A(d,c.rangesAltered),u.ticks&&d.push(subroutines.doTicksRelayout),u.modebar&&d.push(subroutines.doModeBar),u.camera&&d.push(subroutines.doCamera),d.push(l)),d.push(plots_1.rehover,plots_1.redrag),queue_1.add(t,E,[t,o.undoit,c.undoit,o.traces],E,[t,o.redoit,c.redoit,o.traces]);var h=lib_1.syncOrAsync(d,t);return h&&h.then||(h=Promise.resolve(t)),h.then((function(){return t.emit("plotly_update",{data:o.eventData,layout:c.eventData}),t}))}function L(t){return function(e){e._fullLayout._guiEditing=!0;var r=t.apply(null,arguments);return e._fullLayout._guiEditing=!1,r}}var T=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],R=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function k(t,e){for(var r=0;r<e.length;r++){var n=e[r],i=t.match(n.pattern);if(i){var a=i[1]||"";return{head:a,tail:t.substr(a.length+1),attr:n.attr}}}}function G(t,e){var n=r(e,t).get();if(void 0!==n)return n;var i=t.split(".");for(i.pop();i.length>1;)if(i.pop(),void 0!==(n=r(e,i.join(".")+".uirevision").get()))return n;return e.uirevision}function N(t,e){for(var r=0;r<e.length;r++)if(e[r]._fullInput.uid===t)return r;return-1}function M(t,e,r){for(var n=0;n<e.length;n++)if(e[n].uid===t)return n;return!e[r]||e[r].uid?-1:r}function D(t,e){var r=lib_1.isPlainObject(t),n=Array.isArray(t);return r||n?(r&&lib_1.isPlainObject(e)||n&&Array.isArray(e))&&JSON.stringify(t)===JSON.stringify(e):t===e}function X(t,e,n,i){var a,o,s,l=i.getValObject,c=i.flags,u=i.immutable,d=i.inArray,h=i.arrayIndex;function g(){var t=a.editType;d&&-1!==t.indexOf("arraydraw")?lib_1.pushUnique(c.arrays[d],h):(edit_types.update(c,a),"none"!==t&&c.nChanges++,i.transition&&a.anim&&c.nChangesAnim++,(Q.test(s)||_.test(s))&&(c.rangesAltered[n[0]]=1),w.test(s)&&r(e,"_inputDomain").set(null),"datarevision"===o&&(c.newDataRevision=1))}function f(t){return"data_array"===t.valType||t.arrayOk}for(o in t){if(c.calc&&!i.transition)return;var p=t[o],m=e[o],y=n.concat(o);if(s=y.join("."),"_"!==o.charAt(0)&&"function"!=typeof p&&p!==m){if(("tick0"===o||"dtick"===o)&&"geo"!==n[0]){var b=e.tickmode;if("auto"===b||"array"===b||!b)continue}if(("range"!==o||!e.autorange)&&("zmin"!==o&&"zmax"!==o||"contourcarpet"!==e.type)&&(a=l(y))&&(!a._compareAsJSON||JSON.stringify(p)!==JSON.stringify(m))){var v,x=a.valType,I=f(a),B=Array.isArray(p),C=Array.isArray(m);if(B&&C){var F="_input_"+o,A=t[F],U=e[F];if(Array.isArray(A)&&A===U)continue}if(void 0===m)I&&B?c.calc=!0:g();else if(a._isLinkedToArray){var S=[],E=!1;d||(c.arrays[o]=S);var L=Math.min(p.length,m.length),T=Math.max(p.length,m.length);if(L!==T){if("arraydraw"!==a.editType){g();continue}E=!0}for(v=0;v<L;v++)X(p[v],m[v],y.concat(v),lib_1.extendFlat({inArray:o,arrayIndex:v},i));if(E)for(v=L;v<T;v++)S.push(v)}else!x&&lib_1.isPlainObject(p)?X(p,m,y,i):I?B&&C?(u&&(c.calc=!0),(u||i.newDataRevision)&&g()):B!==C?c.calc=!0:g():B&&C&&p.length===m.length&&String(p)===String(m)||g()}}}for(o in e)if(!(o in t)&&"_"!==o.charAt(0)&&"function"!=typeof e[o]){if(f(a=l(n.concat(o)))&&Array.isArray(e[o]))return void(c.calc=!0);g()}}function V(t,e){var r;for(r in t)if("_"!==r.charAt(0)){var n=t[r],i=e[r];if(n!==i)if(lib_1.isPlainObject(n)&&lib_1.isPlainObject(i)){if(V(n,i))return!0}else{if(!Array.isArray(n)||!Array.isArray(i))return!0;if(n.length!==i.length)return!0;for(var a=0;a<n.length;a++)if(n[a]!==i[a]){if(!lib_1.isPlainObject(n[a])||!lib_1.isPlainObject(i[a]))return!0;if(V(n[a],i[a]))return!0}}}}function W(t){var e=t._fullLayout,r=t.getBoundingClientRect();if(!lib_1.equalDomRects(r,e._lastBBox)){var n=e._invTransform=lib_1.inverseTransformMatrix(lib_1.getFullTransformMatrix(t));e._invScaleX=Math.sqrt(n[0][0]*n[0][0]+n[0][1]*n[0][1]+n[0][2]*n[0][2]),e._invScaleY=Math.sqrt(n[1][0]*n[1][0]+n[1][1]*n[1][1]+n[1][2]*n[1][2]),e._lastBBox=r}}e.animate=function(t,e,r){if(t=lib_1.getGraphDiv(t),!lib_1.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var n=t._transitionData;n._frameQueue||(n._frameQueue=[]);var i=(r=plots_1.supplyAnimationDefaults(r)).transition,a=r.frame;function o(t){return Array.isArray(i)?t>=i.length?i[0]:i[t]:i}function s(t){return Array.isArray(a)?t>=a.length?a[0]:a[t]:a}function l(t,e){var r=0;return function(){if(t&&++r===e)return t()}}return void 0===n._frameWaitingCnt&&(n._frameWaitingCnt=0),new Promise((function(a,c){function u(){n._currentFrame&&n._currentFrame.onComplete&&n._currentFrame.onComplete();var e=n._currentFrame=n._frameQueue.shift();if(e){var r=e.name?e.name.toString():null;t._fullLayout._currentFrame=r,n._lastFrameAt=Date.now(),n._timeToNext=e.frameOpts.duration,plots_1.transition(t,e.frame.data,e.frame.layout,helpers$3.coerceTraceIndices(t,e.frame.traces),e.frameOpts,e.transitionOpts).then((function(){e.onComplete&&e.onComplete()})),t.emit("plotly_animatingframe",{name:r,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})}else t.emit("plotly_animated"),window.cancelAnimationFrame(n._animationRaf),n._animationRaf=null}function d(){t.emit("plotly_animating"),n._lastFrameAt=-1/0,n._timeToNext=0,n._runningTransitions=0,n._currentFrame=null;var e=function(){n._animationRaf=window.requestAnimationFrame(e),Date.now()-n._lastFrameAt>n._timeToNext&&u()};e()}var h,g,f=0;function p(t){return Array.isArray(i)?f>=i.length?t.transitionOpts=i[f]:t.transitionOpts=i[0]:t.transitionOpts=i,f++,t}var m=[],y=null==e,b=Array.isArray(e);if(!y&&!b&&lib_1.isPlainObject(e))m.push({type:"object",data:p(lib_1.extendFlat({},e))});else if(y||-1!==["string","number"].indexOf(typeof e))for(h=0;h<n._frames.length;h++)(g=n._frames[h])&&(y||String(g.group)===String(e))&&m.push({type:"byname",name:String(g.name),data:p({name:g.name})});else if(b)for(h=0;h<e.length;h++){var v=e[h];-1!==["number","string"].indexOf(typeof v)?(v=String(v),m.push({type:"byname",name:v,data:p({name:v})})):lib_1.isPlainObject(v)&&m.push({type:"object",data:p(lib_1.extendFlat({},v))})}for(h=0;h<m.length;h++)if("byname"===(g=m[h]).type&&!n._frameHash[g.data.name])return lib_1.warn('animate failure: frame not found: "'+g.data.name+'"'),void c();-1!==["next","immediate"].indexOf(r.mode)&&function(){if(0!==n._frameQueue.length){for(;n._frameQueue.length;){var e=n._frameQueue.pop();e.onInterrupt&&e.onInterrupt()}t.emit("plotly_animationinterrupted",[])}}(),"reverse"===r.direction&&m.reverse();var x=t._fullLayout._currentFrame;if(x&&r.fromcurrent){var I=-1;for(h=0;h<m.length;h++)if("byname"===(g=m[h]).type&&g.name===x){I=h;break}if(I>0&&I<m.length-1){var B=[];for(h=0;h<m.length;h++)g=m[h],("byname"!==m[h].type||h>I)&&B.push(g);m=B}}m.length>0?function(e){if(0!==e.length){for(var i=0;i<e.length;i++){var u;u="byname"===e[i].type?plots_1.computeFrame(t,e[i].name):e[i].data;var h=s(i),g=o(i);g.duration=Math.min(g.duration,h.duration);var f={frame:u,name:e[i].name,frameOpts:h,transitionOpts:g};i===e.length-1&&(f.onComplete=l(a,2),f.onInterrupt=c),n._frameQueue.push(f)}"immediate"===r.mode&&(n._lastFrameAt=-1/0),n._animationRaf||d()}}(m):(t.emit("plotly_animated"),a())}))},e.addFrames=function(t,e,r){if(t=lib_1.getGraphDiv(t),null==e)return Promise.resolve();if(!lib_1.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var n,i,a,o,l=t._transitionData._frames,c=t._transitionData._frameHash;if(!Array.isArray(e))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+e);var u=l.length+2*e.length,d=[],h={};for(n=e.length-1;n>=0;n--)if(lib_1.isPlainObject(e[n])){var g=e[n].name,f=(c[g]||h[g]||{}).name,p=e[n].name,m=c[f]||h[f];f&&p&&"number"==typeof p&&m&&s<5&&(s++,lib_1.warn('addFrames: overwriting frame "'+(c[f]||h[f]).name+'" with a frame whose name of type "number" also equates to "'+f+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===s&&lib_1.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),h[g]={name:g},d.push({frame:plots_1.supplyFrameDefaults(e[n]),index:r&&void 0!==r[n]&&null!==r[n]?r[n]:u+n})}d.sort((function(t,e){return t.index>e.index?-1:t.index<e.index?1:0}));var y=[],b=[],v=l.length;for(n=d.length-1;n>=0;n--){if("number"==typeof(i=d[n].frame).name&&lib_1.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!i.name)for(;c[i.name="frame "+t._transitionData._counter++];);if(c[i.name]){for(a=0;a<l.length&&(l[a]||{}).name!==i.name;a++);y.push({type:"replace",index:a,value:i}),b.unshift({type:"replace",index:a,value:l[a]})}else o=Math.max(0,Math.min(d[n].index,v)),y.push({type:"insert",index:o,value:i}),b.unshift({type:"delete",index:o}),v++}var x=plots_1.modifyFrames,I=plots_1.modifyFrames,B=[t,b],C=[t,y];return queue_1&&queue_1.add(t,x,B,I,C),plots_1.modifyFrames(t,y)},e.deleteFrames=function(t,e){if(t=lib_1.getGraphDiv(t),!lib_1.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);var r,n,i=t._transitionData._frames,a=[],o=[];if(!e)for(e=[],r=0;r<i.length;r++)e.push(r);for((e=e.slice()).sort(),r=e.length-1;r>=0;r--)n=e[r],a.push({type:"delete",index:n}),o.unshift({type:"insert",index:n,value:i[n]});var s=plots_1.modifyFrames,l=plots_1.modifyFrames,c=[t,o],u=[t,a];return queue_1&&queue_1.add(t,s,c,l,u),plots_1.modifyFrames(t,a)},e.addTraces=function t(r,n,i){r=lib_1.getGraphDiv(r);var a,o,s=[],l=e.deleteTraces,c=t,u=[r,s],d=[r,n];for(function(t,e,r){var n,i;if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("traces must be defined.");for(Array.isArray(e)||(e=[e]),n=0;n<e.length;n++)if("object"!=typeof(i=e[n])||Array.isArray(i)||null===i)throw new Error("all values in traces array must be non-array objects");if(void 0===r||Array.isArray(r)||(r=[r]),void 0!==r&&r.length!==e.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(r,n,i),Array.isArray(n)||(n=[n]),n=n.map((function(t){return lib_1.extendFlat({},t)})),helpers$3.cleanData(n),a=0;a<n.length;a++)r.data.push(n[a]);for(a=0;a<n.length;a++)s.push(-n.length+a);if(void 0===i)return o=e.redraw(r),queue_1.add(r,l,u,c,d),o;Array.isArray(i)||(i=[i]);try{f(r,s,i)}catch(t){throw r.data.splice(r.data.length-n.length,n.length),t}return queue_1.startSequence(r),queue_1.add(r,l,u,c,d),o=e.moveTraces(r,s,i),queue_1.stopSequence(r),o},e.deleteTraces=function t(r,n){r=lib_1.getGraphDiv(r);var i,a,o=[],s=e.addTraces,l=t,c=[r,o,n],u=[r,n];if(void 0===n)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(n)||(n=[n]),g(r,n,"indices"),(n=h(n,r.data.length-1)).sort(lib_1.sorterDes),i=0;i<n.length;i+=1)a=r.data.splice(n[i],1)[0],o.push(a);var d=e.redraw(r);return queue_1.add(r,s,c,l,u),d},e.extendTraces=function t(r,n,i,a){function o(t,e,r){var n,i;if(lib_1.isTypedArray(t))if(r<0){var a=new t.constructor(0),o=m(t,e);r<0?(n=o,i=a):(n=a,i=o)}else if(n=new t.constructor(r),i=new t.constructor(t.length+e.length-r),r===e.length)n.set(e),i.set(t);else if(r<e.length){var s=e.length-r;n.set(e.subarray(s)),i.set(t),i.set(e.subarray(0,s),t.length)}else{var l=r-e.length,c=t.length-l;n.set(t.subarray(c)),n.set(e,l),i.set(t.subarray(0,c))}else n=t.concat(e),i=r>=0&&r<n.length?n.splice(0,n.length-r):[];return[n,i]}var s=p(r=lib_1.getGraphDiv(r),n,i,a,o),l=e.redraw(r),c=[r,s.update,i,s.maxPoints];return queue_1.add(r,e.prependTraces,c,t,arguments),l},e.moveTraces=function t(r,n,i){var a,o=[],s=[],l=t,c=t,u=[r=lib_1.getGraphDiv(r),i,n],d=[r,n,i];if(f(r,n,i),n=Array.isArray(n)?n:[n],void 0===i)for(i=[],a=0;a<n.length;a++)i.push(-n.length+a);for(i=Array.isArray(i)?i:[i],n=h(n,r.data.length-1),i=h(i,r.data.length-1),a=0;a<r.data.length;a++)-1===n.indexOf(a)&&o.push(r.data[a]);for(a=0;a<n.length;a++)s.push({newIndex:i[a],trace:r.data[n[a]]});for(s.sort((function(t,e){return t.newIndex-e.newIndex})),a=0;a<s.length;a+=1)o.splice(s[a].newIndex,0,s[a].trace);r.data=o;var g=e.redraw(r);return queue_1.add(r,l,u,c,d),g},e.prependTraces=function t(r,n,i,a){function o(t,e,r){var n,i;if(lib_1.isTypedArray(t))if(r<=0){var a=new t.constructor(0),o=m(e,t);r<0?(n=o,i=a):(n=a,i=o)}else if(n=new t.constructor(r),i=new t.constructor(t.length+e.length-r),r===e.length)n.set(e),i.set(t);else if(r<e.length){var s=e.length-r;n.set(e.subarray(0,s)),i.set(e.subarray(s)),i.set(t,s)}else{var l=r-e.length;n.set(e),n.set(t.subarray(0,l),e.length),i.set(t.subarray(l))}else n=e.concat(t),i=r>=0&&r<n.length?n.splice(r,n.length):[];return[n,i]}var s=p(r=lib_1.getGraphDiv(r),n,i,a,o),l=e.redraw(r),c=[r,s.update,i,s.maxPoints];return queue_1.add(r,e.extendTraces,c,t,arguments),l},e.newPlot=function(t,r,n,i){return t=lib_1.getGraphDiv(t),plots_1.cleanPlot([],{},t._fullData||[],t._fullLayout||{}),plots_1.purge(t),e._doPlot(t,r,n,i)},e._doPlot=function(t,r,i,a){var o;if(t=lib_1.getGraphDiv(t),events.init(t),lib_1.isPlainObject(r)){var s=r;r=s.data,i=s.layout,a=s.config,o=s.frames}if(!1===events.triggerHandler(t,"plotly_beforeplot",[r,i,a]))return Promise.reject();r||i||lib_1.isPlotDiv(t)||lib_1.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",t),d(t,a),i||(i={}),d3.select(t).classed("js-plotly-plot",!0),drawing_1.makeTester(),Array.isArray(t._promises)||(t._promises=[]);var c=0===(t.data||[]).length&&Array.isArray(r);Array.isArray(r)&&(helpers$3.cleanData(r),c?t.data=r:t.data.push.apply(t.data,r),t.empty=!1),t.layout&&!c||(t.layout=helpers$3.cleanLayout(i)),plots_1.supplyDefaults(t);var u=t._fullLayout,h=u._has("cartesian");u._replotting=!0,(c||u._shouldCreateBgLayer)&&(!function(t){var e=d3.select(t),r=t._fullLayout;if(r._calcInverseTransform=W,r._calcInverseTransform(t),r._container=e.selectAll(".plot-container").data([0]),r._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),r._paperdiv=r._container.selectAll(".svg-container").data([0]),r._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),r._glcontainer=r._paperdiv.selectAll(".gl-container").data([{}]),r._glcontainer.enter().append("div").classed("gl-container",!0),r._paperdiv.selectAll(".main-svg").remove(),r._paperdiv.select(".modebar-container").remove(),r._paper=r._paperdiv.insert("svg",":first-child").classed("main-svg",!0),r._toppaper=r._paperdiv.append("svg").classed("main-svg",!0),r._modebardiv=r._paperdiv.append("div"),delete r._modeBar,r._hoverpaper=r._paperdiv.append("svg").classed("main-svg",!0),!r._uid){var n={};d3.selectAll("defs").each((function(){this.id&&(n[this.id.split("-")[1]]=1)})),r._uid=lib_1.randstr(n)}r._paperdiv.selectAll(".main-svg").attr(xmlns_namespaces.svgAttrs),r._defs=r._paper.append("defs").attr("id","defs-"+r._uid),r._clips=r._defs.append("g").classed("clips",!0),r._topdefs=r._toppaper.append("defs").attr("id","topdefs-"+r._uid),r._topclips=r._topdefs.append("g").classed("clips",!0),r._bgLayer=r._paper.append("g").classed("bglayer",!0),r._draggers=r._paper.append("g").classed("draglayer",!0);var i=r._paper.append("g").classed("layer-below",!0);r._imageLowerLayer=i.append("g").classed("imagelayer",!0),r._shapeLowerLayer=i.append("g").classed("shapelayer",!0),r._cartesianlayer=r._paper.append("g").classed("cartesianlayer",!0),r._polarlayer=r._paper.append("g").classed("polarlayer",!0),r._smithlayer=r._paper.append("g").classed("smithlayer",!0),r._ternarylayer=r._paper.append("g").classed("ternarylayer",!0),r._geolayer=r._paper.append("g").classed("geolayer",!0),r._funnelarealayer=r._paper.append("g").classed("funnelarealayer",!0),r._pielayer=r._paper.append("g").classed("pielayer",!0),r._iciclelayer=r._paper.append("g").classed("iciclelayer",!0),r._treemaplayer=r._paper.append("g").classed("treemaplayer",!0),r._sunburstlayer=r._paper.append("g").classed("sunburstlayer",!0),r._indicatorlayer=r._toppaper.append("g").classed("indicatorlayer",!0),r._glimages=r._paper.append("g").classed("glimages",!0);var a=r._toppaper.append("g").classed("layer-above",!0);r._imageUpperLayer=a.append("g").classed("imagelayer",!0),r._shapeUpperLayer=a.append("g").classed("shapelayer",!0),r._infolayer=r._toppaper.append("g").classed("infolayer",!0),r._menulayer=r._toppaper.append("g").classed("menulayer",!0),r._zoomlayer=r._toppaper.append("g").classed("zoomlayer",!0),r._hoverlayer=r._hoverpaper.append("g").classed("hoverlayer",!0),r._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),t.emit("plotly_framework")}(t),u._shouldCreateBgLayer&&delete u._shouldCreateBgLayer),drawing_1.initGradients(t),drawing_1.initPatterns(t),c&&axes_1.saveShowSpikeInitial(t);var g=!t.calcdata||t.calcdata.length!==(t._fullData||[]).length;g&&plots_1.doCalcdata(t);for(var f=0;f<t.calcdata.length;f++)t.calcdata[f][0].trace=t._fullData[f];t._context.responsive?t._responsiveChartHandler||(t._responsiveChartHandler=function(){lib_1.isHidden(t)||plots_1.resize(t)},window.addEventListener("resize",t._responsiveChartHandler)):lib_1.clearResponsive(t);var p=lib_1.extendFlat({},u._size),m=0;function y(){if(plots_1.clearAutoMarginIds(t),subroutines.drawMarginPushers(t),axes_1.allowAutoMargin(t),u._has("pie"))for(var e=t._fullData,r=0;r<e.length;r++){var n=e[r];"pie"===n.type&&n.automargin&&plots_1.allowAutoMargin(t,"pie."+n.uid+".automargin")}return plots_1.doAutoMargin(t),plots_1.previousPromises(t)}function b(){t._transitioning||(subroutines.doAutoRangeAndConstraints(t),c&&axes_1.saveRangeInitial(t),registry.getComponentMethod("rangeslider","calcAutorange")(t))}var v=[plots_1.previousPromises,function(){if(o)return e.addFrames(t,o)},function e(){for(var r=u._basePlotModules,n=0;n<r.length;n++)r[n].drawFramework&&r[n].drawFramework(t);!u._glcanvas&&u._has("gl")&&(u._glcanvas=u._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],(function(t){return t.key})),u._glcanvas.enter().append("canvas").attr("class",(function(t){return"gl-canvas gl-canvas-"+t.key.replace("Layer","")})).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var i=t._context.plotGlPixelRatio;if(u._glcanvas){u._glcanvas.attr("width",u.width*i).attr("height",u.height*i).style("width",u.width+"px").style("height",u.height+"px");var a=u._glcanvas.data()[0].regl;if(a&&(Math.floor(u.width*i)!==a._gl.drawingBufferWidth||Math.floor(u.height*i)!==a._gl.drawingBufferHeight)){var o="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!m)return lib_1.log(o+" Clearing graph and plotting again."),plots_1.cleanPlot([],{},t._fullData,u),plots_1.supplyDefaults(t),u=t._fullLayout,plots_1.doCalcdata(t),m++,e();lib_1.error(o)}}return"h"===u.modebar.orientation?u._modebardiv.style("height",null).style("width","100%"):u._modebardiv.style("width",null).style("height",u.height+"px"),plots_1.previousPromises(t)},y,function(){if(plots_1.didMarginChange(p,u._size))return lib_1.syncOrAsync([y,subroutines.layoutStyles],t)}];h&&v.push((function(){if(g)return lib_1.syncOrAsync([registry.getComponentMethod("shapes","calcAutorange"),registry.getComponentMethod("annotations","calcAutorange"),b],t);b()})),v.push(subroutines.layoutStyles),h&&v.push((function(){return axes_1.draw(t,c?"":"redraw")}),(function(t){t._fullLayout._insideTickLabelsAutorange&&C(t,t._fullLayout._insideTickLabelsAutorange).then((function(){t._fullLayout._insideTickLabelsAutorange=void 0}))})),v.push(subroutines.drawData,subroutines.finalDraw,n,plots_1.addLinks,plots_1.rehover,plots_1.redrag,plots_1.doAutoMargin,(function(t){t._fullLayout._insideTickLabelsAutorange&&c&&axes_1.saveRangeInitial(t,!0)}),plots_1.previousPromises);var x=lib_1.syncOrAsync(v,t);return x&&x.then||(x=Promise.resolve()),x.then((function(){return l(t),t}))},e.purge=function(t){var e=(t=lib_1.getGraphDiv(t))._fullLayout||{},r=t._fullData||[];return plots_1.cleanPlot([],{},r,e),plots_1.purge(t),events.purge(t),e._container&&e._container.remove(),delete t._context,t},e.react=function(t,n,i,a){var o,s;t=lib_1.getGraphDiv(t),helpers$3.clearPromiseQueue(t);var c=t._fullData,u=t._fullLayout;if(lib_1.isPlotDiv(t)&&c&&u){if(lib_1.isPlainObject(n)){var h=n;n=h.data,i=h.layout,a=h.config,o=h.frames}var g=!1;if(a){var f=lib_1.extendDeep({},t._context);t._context=void 0,d(t,a),g=V(f,t._context)}t.data=n||[],helpers$3.cleanData(t.data),t.layout=i||{},helpers$3.cleanLayout(t.layout),function(t,e,n,i){var a,o,s,l,c,u,d,h,g,f,p=i._preGUI,m=[],y={},v={};for(a in p){if(c=k(a,T)){if(g=c.head,f=c.tail,o=c.attr||g+".uirevision",(l=(s=r(i,o).get())&&G(o,e))&&l===s){if(null===(u=p[a])&&(u=void 0),D(h=(d=r(e,a)).get(),u)){void 0===h&&"autorange"===f&&m.push(g),d.set(b(r(i,a).get()));continue}if("autorange"===f||"range["===f.substr(0,6)){var x=p[g+".range[0]"],I=p[g+".range[1]"],B=p[g+".autorange"];if(B||null===B&&null===x&&null===I){if(!(g in y)){var C=r(e,g).get();y[g]=C&&(C.autorange||!1!==C.autorange&&(!C.range||2!==C.range.length))}if(y[g]){d.set(b(r(i,a).get()));continue}}}}}else lib_1.warn("unrecognized GUI edit: "+a);delete p[a],c&&"range["===c.tail.substr(0,6)&&(v[c.head]=1)}for(var F=0;F<m.length;F++){var A=m[F];if(v[A]){var Q=r(e,A).get();Q&&delete Q.autorange}}var _=i._tracePreGUI;for(var w in _){var U,S=_[w],E=null;for(a in S){if(!E){var L=N(w,n);if(L<0){delete _[w];break}var X=M(w,t,(U=n[L]._fullInput).index);if(X<0){delete _[w];break}E=t[X]}if(c=k(a,R)){if(c.attr?l=(s=r(i,c.attr).get())&&G(c.attr,e):(s=U.uirevision,void 0===(l=E.uirevision)&&(l=e.uirevision)),l&&l===s&&(null===(u=S[a])&&(u=void 0),D(h=(d=r(E,a)).get(),u))){d.set(b(r(U,a).get()));continue}}else lib_1.warn("unrecognized GUI edit: "+a+" in trace uid "+w);delete S[a]}}}(t.data,t.layout,c,u),plots_1.supplyDefaults(t,{skipUpdateCalc:!0});var p=t._fullData,m=t._fullLayout,y=void 0===m.datarevision,v=m.transition,x=function(t,e,r,n,i){var a=edit_types.layoutFlags();function o(t){return plot_schema.getLayoutValObject(r,t)}a.arrays={},a.rangesAltered={},a.nChanges=0,a.nChangesAnim=0,X(e,r,[],{getValObject:o,flags:a,immutable:n,transition:i,gd:t}),(a.plot||a.calc)&&(a.layoutReplot=!0);i&&a.nChanges&&a.nChangesAnim&&(a.anim=a.nChanges===a.nChangesAnim?"all":"some");return a}(t,u,m,y,v),I=x.newDataRevision,B=function(t,e,r,n,i,a){var o=e.length===r.length;if(!i&&!o)return{fullReplot:!0,calc:!0};var s,l,c=edit_types.traceFlags();function u(t){var e=plot_schema.getTraceValObject(l,t);return!l._module.animatable&&e.anim&&(e.anim=!1),e}c.arrays={},c.nChanges=0,c.nChangesAnim=0;var d={getValObject:u,flags:c,immutable:n,transition:i,newDataRevision:a,gd:t},h={};for(s=0;s<e.length;s++)if(r[s]){if(l=r[s]._fullInput,plots_1.hasMakesDataTransform(l)&&(l=r[s]),h[l.uid])continue;h[l.uid]=1,X(e[s]._fullInput,l,[],d)}(c.calc||c.plot)&&(c.fullReplot=!0);i&&c.nChanges&&c.nChangesAnim&&(c.anim=c.nChanges===c.nChangesAnim&&o?"all":"some");return c}(t,c,p,y,v,I);if(S(t)&&(x.layoutReplot=!0),B.calc||x.calc){t.calcdata=void 0;for(var C=Object.getOwnPropertyNames(m),F=0;F<C.length;F++){var Q=C[F],_=Q.substring(0,5);if("xaxis"===_||"yaxis"===_){var w=m[Q]._emptyCategories;w&&w()}}}else plots_1.supplyDefaultsUpdateCalc(t.calcdata,p);var U=[];if(o&&(t._transitionData={},plots_1.createTransitionData(t),U.push((function(){return e.addFrames(t,o)}))),m.transition&&!g&&(B.anim||x.anim))x.ticks&&U.push(subroutines.doTicksRelayout),plots_1.doCalcdata(t),subroutines.doAutoRangeAndConstraints(t),U.push((function(){return plots_1.transitionFromReact(t,B,x,u)}));else if(B.fullReplot||x.layoutReplot||g)t._fullLayout._skipDefaults=!0,U.push(e._doPlot);else{for(var E in x.arrays){var L=x.arrays[E];if(L.length){var W=registry.getComponentMethod(E,"drawOne");if(W!==lib_1.noop)for(var Z=0;Z<L.length;Z++)W(t,L[Z]);else{var O=registry.getComponentMethod(E,"draw");if(O===lib_1.noop)throw new Error("cannot draw components: "+E);O(t)}}}U.push(plots_1.previousPromises),B.style&&U.push(subroutines.doTraceStyle),(B.colorbars||x.colorbars)&&U.push(subroutines.doColorBars),x.legend&&U.push(subroutines.doLegend),x.layoutstyle&&U.push(subroutines.layoutStyles),x.axrange&&A(U),x.ticks&&U.push(subroutines.doTicksRelayout),x.modebar&&U.push(subroutines.doModeBar),x.camera&&U.push(subroutines.doCamera),U.push(l)}U.push(plots_1.rehover,plots_1.redrag),(s=lib_1.syncOrAsync(U,t))&&s.then||(s=Promise.resolve(t))}else s=e.newPlot(t,n,i,a);return s.then((function(){return t.emit("plotly_react",{data:n,layout:i}),t}))},e.redraw=function(t){if(t=lib_1.getGraphDiv(t),!lib_1.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);return helpers$3.cleanData(t.data),helpers$3.cleanLayout(t.layout),t.calcdata=void 0,e._doPlot(t).then((function(){return t.emit("plotly_redraw"),t}))},e.relayout=C,e.restyle=y,e.setPlotConfig=function(t){return lib_1.extendFlat(a,t)},e.update=E,e._guiRelayout=L(C),e._guiRestyle=L(y),e._guiUpdate=L(E),e._storeDirectGUIEdit=function(t,e,n){for(var i in n){x(i,r(t,i).get(),n[i],e)}}})),getDelay=function(t){return t._has&&(t._has("gl3d")||t._has("gl2d")||t._has("mapbox"))?500:0},getRedrawFunc=function(t){return function(){registry.getComponentMethod("colorbar","draw")(t)}},encodeSVG=function(t){return"data:image/svg+xml,"+encodeURIComponent(t)},encodeJSON=function(t){return"data:application/json,"+encodeURIComponent(t)},DOM_URL=window.URL||window.webkitURL,createObjectURL=function(t){return DOM_URL.createObjectURL(t)},revokeObjectURL=function(t){return DOM_URL.revokeObjectURL(t)},createBlob=function(t,e){if("svg"===e)return new window.Blob([t],{type:"image/svg+xml;charset=utf-8"});if("full-json"===e)return new window.Blob([t],{type:"application/json;charset=utf-8"});var r=fixBinary(window.atob(t));return new window.Blob([r],{type:"image/"+e})},octetStream=function(t){document.location.href="data:application/octet-stream"+t};function fixBinary(t){for(var e=t.length,r=new ArrayBuffer(e),n=new Uint8Array(r),i=0;i<e;i++)n[i]=t.charCodeAt(i);return r}var IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.",helpers$2={getDelay:getDelay,getRedrawFunc:getRedrawFunc,encodeSVG:encodeSVG,encodeJSON:encodeJSON,createObjectURL:createObjectURL,revokeObjectURL:revokeObjectURL,createBlob:createBlob,octetStream:octetStream,IMAGE_URL_PREFIX:IMAGE_URL_PREFIX,MSG_IE_BAD_FORMAT:MSG_IE_BAD_FORMAT},DOUBLEQUOTE_REGEX=/"/g,DUMMY_SUB="TOBESTRIPPED",DUMMY_REGEX=new RegExp('("'+DUMMY_SUB+")|("+DUMMY_SUB+'")',"g");function htmlEntityDecode(t){var e=d3.select("body").append("div").style({display:"none"}).html(""),r=t.replace(/(&[^;]*;)/gi,(function(t){return"&lt;"===t?"&#60;":"&rt;"===t?"&#62;":-1!==t.indexOf("<")||-1!==t.indexOf(">")?"":e.html(t).text()}));return e.remove(),r}function xmlEntityEncode(t){return t.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}var tosvg=function(t,e,r){var n,i=t._fullLayout,a=i._paper,o=i._toppaper,s=i.width,l=i.height;a.insert("rect",":first-child").call(drawing_1.setRect,0,0,s,l).call(color_1.fill,i.paper_bgcolor);var c=i._basePlotModules||[];for(n=0;n<c.length;n++){var u=c[n];u.toSVG&&u.toSVG(t)}if(o){var d=o.node().childNodes,h=Array.prototype.slice.call(d);for(n=0;n<h.length;n++){var g=h[n];g.childNodes.length&&a.node().appendChild(g)}}i._draggers&&i._draggers.remove(),a.node().style.background="",a.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each((function(){var t=d3.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){t.style({visibility:null,display:null});var e=this.style.fontFamily;e&&-1!==e.indexOf('"')&&t.style("font-family",e.replace(DOUBLEQUOTE_REGEX,DUMMY_SUB))}else t.remove()})),a.selectAll(".gradient_filled,.pattern_filled").each((function(){var t=d3.select(this),e=this.style.fill;e&&-1!==e.indexOf("url(")&&t.style("fill",e.replace(DOUBLEQUOTE_REGEX,DUMMY_SUB));var r=this.style.stroke;r&&-1!==r.indexOf("url(")&&t.style("stroke",r.replace(DOUBLEQUOTE_REGEX,DUMMY_SUB))})),"pdf"!==e&&"eps"!==e||a.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),a.node().setAttributeNS(xmlns_namespaces.xmlns,"xmlns",xmlns_namespaces.svg),a.node().setAttributeNS(xmlns_namespaces.xmlns,"xmlns:xlink",xmlns_namespaces.xlink),"svg"===e&&r&&(a.attr("width",r*s),a.attr("height",r*l),a.attr("viewBox","0 0 "+s+" "+l));var f=(new window.XMLSerializer).serializeToString(a.node());return f=(f=xmlEntityEncode(f=htmlEntityDecode(f))).replace(DUMMY_REGEX,"'"),lib_1.isIE()&&(f=(f=(f=f.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),f},EventEmitter$1=events$1.EventEmitter;function svgToImg(t){var e=t.emitter||new EventEmitter$1,r=new Promise((function(n,i){var a=window.Image,o=t.svg,s=t.format||"png";if(lib_1.isIE()&&"svg"!==s){var l=new Error(helpers$2.MSG_IE_BAD_FORMAT);return i(l),t.promise?r:e.emit("error",l)}var c,u,d=t.canvas,h=t.scale||1,g=t.width||300,f=t.height||150,p=h*g,m=h*f,y=d.getContext("2d"),b=new a;"svg"===s||lib_1.isSafari()?u=helpers$2.encodeSVG(o):(c=helpers$2.createBlob(o,"svg"),u=helpers$2.createObjectURL(c)),d.width=p,d.height=m,b.onload=function(){var r;switch(c=null,helpers$2.revokeObjectURL(u),"svg"!==s&&y.drawImage(b,0,0,p,m),s){case"jpeg":r=d.toDataURL("image/jpeg");break;case"png":r=d.toDataURL("image/png");break;case"webp":r=d.toDataURL("image/webp");break;case"svg":r=u;break;default:var a="Image format is not jpeg, png, svg or webp.";if(i(new Error(a)),!t.promise)return e.emit("error",a)}n(r),t.promise||e.emit("success",r)},b.onerror=function(r){if(c=null,helpers$2.revokeObjectURL(u),i(r),!t.promise)return e.emit("error",r)},b.src=u}));return t.promise?r:e}var svgtoimg=svgToImg,version=version$2.version,attrs={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png",description:"Sets the format of exported image."},width:{valType:"number",min:1,description:["Sets the exported image width.","Defaults to the value found in `layout.width`","If set to *null*, the exported image width will match the current graph width."].join(" ")},height:{valType:"number",min:1,description:["Sets the exported image height.","Defaults to the value found in `layout.height`","If set to *null*, the exported image height will match the current graph height."].join(" ")},scale:{valType:"number",min:0,dflt:1,description:["Sets a scaling for the generated image.","If set, all features of a graphs (e.g. text, line width)","are scaled, unlike simply setting","a bigger *width* and *height*."].join(" ")},setBackground:{valType:"any",dflt:!1,description:["Sets the image background mode.","By default, the image background is determined by `layout.paper_bgcolor`,","the *transparent* mode.","One might consider setting `setBackground` to *opaque*","when exporting a *jpeg* image as JPEGs do not support opacity."].join(" ")},imageDataOnly:{valType:"boolean",dflt:!1,description:["Determines whether or not the return value is prefixed by","the image format's corresponding 'data:image;' spec."].join(" ")}};function toImage$2(t,e){var r,n,i,a;function o(t){return!(t in e)||lib_1.validate(e[t],attrs[t])}if(e=e||{},lib_1.isPlainObject(t)?(r=t.data||[],n=t.layout||{},i=t.config||{},a={}):(t=lib_1.getGraphDiv(t),r=lib_1.extendDeep([],t.data),n=lib_1.extendDeep({},t.layout),i=t._context,a=t._fullLayout||{}),!o("width")&&null!==e.width||!o("height")&&null!==e.height)throw new Error("Height and width should be pixel values.");if(!o("format"))throw new Error("Export format is not "+lib_1.join2(attrs.format.values,", "," or ")+".");var s={};function l(t,r){return lib_1.coerce(e,s,attrs,t,r)}var c=l("format"),u=l("width"),d=l("height"),h=l("scale"),g=l("setBackground"),f=l("imageDataOnly"),p=document.createElement("div");p.style.position="absolute",p.style.left="-5000px",document.body.appendChild(p);var m=lib_1.extendFlat({},n);u?m.width=u:null===e.width&&fastIsnumeric(a.width)&&(m.width=a.width),d?m.height=d:null===e.height&&fastIsnumeric(a.height)&&(m.height=a.height);var y=lib_1.extendFlat({},i,{_exportedPlot:!0,staticPlot:!0,setBackground:g}),b=helpers$2.getRedrawFunc(p);function v(){return new Promise((function(t){setTimeout(t,helpers$2.getDelay(p._fullLayout))}))}function x(){return new Promise((function(t,e){var r=tosvg(p,c,h),n=p._fullLayout.width,i=p._fullLayout.height;function a(){plot_api$1.purge(p),document.body.removeChild(p)}if("full-json"===c){var o=plots_1.graphJson(p,!1,"keepdata","object",!0,!0);return o.version=version,o=JSON.stringify(o),a(),t(f?o:helpers$2.encodeJSON(o))}if(a(),"svg"===c)return t(f?r:helpers$2.encodeSVG(r));var s=document.createElement("canvas");s.id=lib_1.randstr(),svgtoimg({format:c,width:n,height:i,scale:h,canvas:s,svg:r,promise:!0}).then(t).catch(e)}))}return new Promise((function(t,e){plot_api$1.newPlot(p,r,m,y).then(b).then(v).then(x).then((function(e){t(function(t){return f?t.replace(helpers$2.IMAGE_URL_PREFIX,""):t}(e))})).catch((function(t){e(t)}))}))}var to_image=toImage$2,dfltConfig$1=plot_config.dfltConfig,isPlainObject$1=lib_1.isPlainObject,isArray=Array.isArray,isArrayOrTypedArray$5=lib_1.isArrayOrTypedArray,validate$1=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={});var r,n,i=plot_schema.get(),a=[],o={_context:lib_1.extendFlat({},dfltConfig$1)};isArray(t)?(o.data=lib_1.extendDeep([],t),r=t):(o.data=[],r=[],a.push(format$1("array","data"))),isPlainObject$1(e)?(o.layout=lib_1.extendDeep({},e),n=e):(o.layout={},n={},arguments.length>1&&a.push(format$1("object","layout"))),plots_1.supplyDefaults(o);for(var s=o._fullData,l=r.length,c=0;c<l;c++){var u=r[c],d=["data",c];if(isPlainObject$1(u)){var h=s[c],g=h.type,f=i.traces[g].attributes;f.type={valType:"enumerated",values:[g]},!1===h.visible&&!1!==u.visible&&a.push(format$1("invisible",d)),crawl(u,h,f,a,d);var p=u.transforms,m=h.transforms;if(p){isArray(p)||a.push(format$1("array",d,["transforms"])),d.push("transforms");for(var y=0;y<p.length;y++){var b=["transforms",y],v=p[y].type;if(isPlainObject$1(p[y])){var x=i.transforms[v]?i.transforms[v].attributes:{};x.type={valType:"enumerated",values:Object.keys(i.transforms)},crawl(p[y],m[y],x,a,d,b)}else a.push(format$1("object",d,b))}}}else a.push(format$1("object",d))}var I=o._fullLayout,B=fillLayoutSchema(i,s);return crawl(n,I,B,a,"layout"),0===a.length?void 0:a};function crawl(t,e,r,n,i,a){a=a||[];for(var o=Object.keys(t),s=0;s<o.length;s++){var l=o[s];if("transforms"!==l){var c=a.slice();c.push(l);var u=t[l],d=e[l],h=getNestedSchema(r,l),g=(h||{}).valType,f="info_array"===g,p="colorscale"===g,m=(h||{}).items;if(isInSchema(r,l))if(isPlainObject$1(u)&&isPlainObject$1(d)&&"any"!==g)crawl(u,d,h,n,i,c);else if(f&&isArray(u)){u.length>d.length&&n.push(format$1("unused",i,c.concat(d.length)));var y,b,v,x,I,B=d.length,C=Array.isArray(m);if(C&&(B=Math.min(B,m.length)),2===h.dimensions)for(b=0;b<B;b++)if(isArray(u[b])){u[b].length>d[b].length&&n.push(format$1("unused",i,c.concat(b,d[b].length)));var F=d[b].length;for(y=0;y<(C?Math.min(F,m[b].length):F);y++)v=C?m[b][y]:m,x=u[b][y],I=d[b][y],lib_1.validate(x,v)?I!==x&&I!==+x&&n.push(format$1("dynamic",i,c.concat(b,y),x,I)):n.push(format$1("value",i,c.concat(b,y),x))}else n.push(format$1("array",i,c.concat(b),u[b]));else for(b=0;b<B;b++)v=C?m[b]:m,x=u[b],I=d[b],lib_1.validate(x,v)?I!==x&&I!==+x&&n.push(format$1("dynamic",i,c.concat(b),x,I)):n.push(format$1("value",i,c.concat(b),x))}else if(h.items&&!f&&isArray(u)){var A,Q,_=m[Object.keys(m)[0]],w=[];for(A=0;A<d.length;A++){var U=d[A]._index||A;if((Q=c.slice()).push(U),isPlainObject$1(u[U])&&isPlainObject$1(d[A])){w.push(U);var S=u[U],E=d[A];isPlainObject$1(S)&&!1!==S.visible&&!1===E.visible?n.push(format$1("invisible",i,Q)):crawl(S,E,_,n,i,Q)}}for(A=0;A<u.length;A++)(Q=c.slice()).push(A),isPlainObject$1(u[A])?-1===w.indexOf(A)&&n.push(format$1("unused",i,Q)):n.push(format$1("object",i,Q,u[A]))}else!isPlainObject$1(u)&&isPlainObject$1(d)?n.push(format$1("object",i,c,u)):isArrayOrTypedArray$5(u)||!isArrayOrTypedArray$5(d)||f||p?l in e?lib_1.validate(u,h)?"enumerated"===h.valType&&(h.coerceNumber&&u!==+d||u!==d)&&n.push(format$1("dynamic",i,c,u,d)):n.push(format$1("value",i,c,u)):n.push(format$1("unused",i,c,u)):n.push(format$1("array",i,c,u));else n.push(format$1("schema",i,c))}}return n}function fillLayoutSchema(t,e){for(var r=t.layout.layoutAttributes,n=0;n<e.length;n++){var i=e[n],a=t.traces[i.type],o=a.layoutAttributes;o&&(i.subplot?lib_1.extendFlat(r[a.attributes.subplot.dflt],o):lib_1.extendFlat(r,o))}return r}var code2msgFunc={object:function(t,e){return("layout"===t&&""===e?"The layout argument":"data"===t[0]&&""===e?"Trace "+t[1]+" in the data argument":inBase(t)+"key "+e)+" must be linked to an object container"},array:function(t,e){return("data"===t?"The data argument":inBase(t)+"key "+e)+" must be linked to an array container"},schema:function(t,e){return inBase(t)+"key "+e+" is not part of the schema"},unused:function(t,e,r){var n=isPlainObject$1(r)?"container":"key";return inBase(t)+n+" "+e+" did not get coerced"},dynamic:function(t,e,r,n){return[inBase(t)+"key",e,"(set to '"+r+"')","got reset to","'"+n+"'","during defaults."].join(" ")},invisible:function(t,e){return(e?inBase(t)+"item "+e:"Trace "+t[1])+" got defaulted to be not visible"},value:function(t,e,r){return[inBase(t)+"key "+e,"is set to an invalid value ("+r+")"].join(" ")}};function inBase(t){return isArray(t)?"In data trace "+t[1]+", ":"In "+t+", "}function format$1(t,e,r,n,i){var a,o;r=r||"",isArray(e)?(a=e[0],o=e[1]):(a=e,o=null);var s=convertPathToAttributeString(r),l=code2msgFunc[t](e,s,n,i);return lib_1.log(l),{code:t,container:a,trace:o,path:r,astr:s,msg:l}}function isInSchema(t,e){var r=splitKey(e),n=r.keyMinusId,i=r.id;return!!(n in t&&t[n]._isSubplotObj&&i)||e in t}function getNestedSchema(t,e){return e in t?t[e]:t[splitKey(e).keyMinusId]}var idRegex$1=lib_1.counterRegex("([a-z]+)");function splitKey(t){var e=t.match(idRegex$1);return{keyMinusId:e&&e[1],id:e&&e[2]}}function convertPathToAttributeString(t){if(!isArray(t))return String(t);for(var e="",r=0;r<t.length;r++){var n=t[r];"number"==typeof n?e=e.substr(0,e.length-1)+"["+n+"]":e+=n,r<t.length-1&&(e+=".")}return e}function fileSaver(t,e,r){var n=document.createElement("a"),i="download"in n;return new Promise((function(a,o){var s,l;if(lib_1.isIE())return s=helpers$2.createBlob(t,"svg"),window.navigator.msSaveBlob(s,e),s=null,a(e);if(i)return s=helpers$2.createBlob(t,r),l=helpers$2.createObjectURL(s),n.href=l,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),helpers$2.revokeObjectURL(l),s=null,a(e);if(lib_1.isSafari()){var c="svg"===r?",":";base64,";return helpers$2.octetStream(c+encodeURIComponent(t)),a(e)}o(new Error("download error"))}))}var filesaver=fileSaver;function downloadImage$1(t,e){var r;return lib_1.isPlainObject(t)||(r=lib_1.getGraphDiv(t)),(e=e||{}).format=e.format||"png",e.width=e.width||null,e.height=e.height||null,e.imageDataOnly=!0,new Promise((function(n,i){r&&r._snapshotInProgress&&i(new Error("Snapshotting already in progress.")),lib_1.isIE()&&"svg"!==e.format&&i(new Error(helpers$2.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var a=to_image(t,e),o=e.filename||t.fn||"newplot";o+="."+e.format.replace("-","."),a.then((function(t){return r&&(r._snapshotInProgress=!1),filesaver(t,o,e.format)})).then((function(t){n(t)})).catch((function(t){r&&(r._snapshotInProgress=!1),i(t)}))}))}var download=downloadImage$1,isPlainObject=lib_1.isPlainObject,dfltConfig=plot_config.dfltConfig,makeTemplate$1=function(t){t=lib_1.isPlainObject(t)?t:lib_1.getGraphDiv(t),t=lib_1.extendDeep({_context:dfltConfig},{data:t.data,layout:t.layout}),plots_1.supplyDefaults(t);var e=t.data||[],r=t.layout||{};r._basePlotModules=t._fullLayout._basePlotModules,r._modules=t._fullLayout._modules;var n={data:{},layout:{}};e.forEach((function(t){var e={};walkStyleKeys(t,e,getTraceInfo.bind(null,t));var r=lib_1.coerce(t,{},attributes$r,"type"),i=n.data[r];i||(i=n.data[r]=[]),i.push(e)})),walkStyleKeys(r,n.layout,getLayoutInfo.bind(null,r)),delete n.layout.template;var i=r.template;if(isPlainObject(i)){var a,o,s,l,c,u,d=i.layout;isPlainObject(d)&&mergeTemplates(d,n.layout);var h=i.data;if(isPlainObject(h)){for(o in n.data)if(s=h[o],Array.isArray(s)){for(u=(c=n.data[o]).length,l=s.length,a=0;a<u;a++)mergeTemplates(s[a%l],c[a]);for(a=u;a<l;a++)c.push(lib_1.extendDeep({},s[a]))}for(o in h)o in n.data||(n.data[o]=lib_1.extendDeep([],h[o]))}}return n};function mergeTemplates(t,e){t=lib_1.extendDeep({},t);var r,n,i=Object.keys(t).sort();function a(e,r,i){if(isPlainObject(r)&&isPlainObject(e))mergeTemplates(e,r);else if(Array.isArray(r)&&Array.isArray(e)){var a=plot_template.arrayTemplater({_template:t},i);for(n=0;n<r.length;n++){var o=r[n],s=a.newItem(o)._template;s&&mergeTemplates(s,o)}var l=a.defaultItems();for(n=0;n<l.length;n++)r.push(l[n]._template);for(n=0;n<r.length;n++)delete r[n].templateitemname}}for(r=0;r<i.length;r++){var o=i[r],s=t[o];if(o in e?a(s,e[o],o):e[o]=s,getBaseKey(o)===o)for(var l in e){var c=getBaseKey(l);l===c||c!==o||l in t||a(s,e[l],o)}}}function getBaseKey(t){return t.replace(/[0-9]+$/,"")}function walkStyleKeys(t,e,r,n,i){var a=i&&r(i);for(var o in t){var s=t[o],l=getNextPath(t,o,n),c=getNextPath(t,o,i),u=r(c);if(!u){var d=getBaseKey(o);d!==o&&(u=r(c=getNextPath(t,d,i)))}if((!a||a!==u)&&!(!u||u._noTemplating||"data_array"===u.valType||u.arrayOk&&Array.isArray(s)))if(!u.valType&&isPlainObject(s))walkStyleKeys(s,e,r,l,c);else if(u._isLinkedToArray&&Array.isArray(s))for(var h=!1,g=0,f={},p=0;p<s.length;p++){var m=s[p];if(isPlainObject(m)){var y=m.name;if(y)f[y]||(walkStyleKeys(m,e,r,getNextPath(s,g,l),getNextPath(s,g,c)),g++,f[y]=1);else if(!h){var b=getNextPath(t,plot_template.arrayDefaultKey(o),n),v=getNextPath(s,g,l);walkStyleKeys(m,e,r,v,getNextPath(s,g,c));var x=lib_1.nestedProperty(e,v);lib_1.nestedProperty(e,b).set(x.get()),x.set(null),h=!0}}}else{lib_1.nestedProperty(e,l).set(s)}}}function getLayoutInfo(t,e){return plot_schema.getLayoutValObject(t,lib_1.nestedProperty({},e).parts)}function getTraceInfo(t,e){return plot_schema.getTraceValObject(t,lib_1.nestedProperty({},e).parts)}function getNextPath(t,e,r){return r?Array.isArray(t)?r+"["+e+"]":r+"."+e:e}var validateTemplate$1=function(t,e){var r=lib_1.extendDeep({},{_context:dfltConfig,data:t.data,layout:t.layout}),n=r.layout||{};isPlainObject(e)||(e=n.template||{});var i=e.layout,a=e.data,o=[];r.layout=n,r.layout.template=e,plots_1.supplyDefaults(r);var s=r._fullLayout,l=r._fullData,c={};if(isPlainObject(i)?(!function t(e,r){for(var n in e)if("_"!==n.charAt(0)&&isPlainObject(e[n])){var i,a=getBaseKey(n),o=[];for(i=0;i<r.length;i++)o.push(getNextPath(e,n,r[i])),a!==n&&o.push(getNextPath(e,a,r[i]));for(i=0;i<o.length;i++)c[o[i]]=1;t(e[n],o)}}(s,["layout"]),function t(e,r){for(var n in e)if(-1===n.indexOf("defaults")&&isPlainObject(e[n])){var i=getNextPath(e,n,r);c[i]?t(e[n],i):o.push({code:"unused",path:i})}}(i,"layout")):o.push({code:"layout"}),isPlainObject(a)){for(var u,d={},h=0;h<l.length;h++){var g=l[h];d[u=g.type]=(d[u]||0)+1,g._fullInput._template||o.push({code:"missing",index:g._fullInput.index,traceType:u})}for(u in a){var f=a[u].length,p=d[u]||0;f>p?o.push({code:"unused",traceType:u,templateCount:f,dataCount:p}):p>f&&o.push({code:"reused",traceType:u,templateCount:f,dataCount:p})}}else o.push({code:"data"});if(function t(e,r){for(var n in e)if("_"!==n.charAt(0)){var i=e[n],a=getNextPath(e,n,r);isPlainObject(i)?(Array.isArray(e)&&!1===i._template&&i.templateitemname&&o.push({code:"missing",path:a,templateitemname:i.templateitemname}),t(i,a)):Array.isArray(i)&&hasPlainObject(i)&&t(i,a)}}({data:l,layout:s},""),o.length)return o.map(format)};function hasPlainObject(t){for(var e=0;e<t.length;e++)if(isPlainObject(t[e]))return!0}function format(t){var e;switch(t.code){case"data":e="The template has no key data.";break;case"layout":e="The template has no key layout.";break;case"missing":e=t.path?"There are no templates for item "+t.path+" with name "+t.templateitemname:"There are no templates for trace "+t.index+", of type "+t.traceType+".";break;case"unused":e=t.path?"The template item at "+t.path+" was not used in constructing the plot.":t.dataCount?"Some of the templates of type "+t.traceType+" were not used. The template has "+t.templateCount+" traces, the data only has "+t.dataCount+" of this type.":"The template has "+t.templateCount+" traces of type "+t.traceType+" but there are none in the data.";break;case"reused":e="Some of the templates of type "+t.traceType+" were used more than once. The template has "+t.templateCount+" traces, the data has "+t.dataCount+" of this type."}return t.msg=e,t}var template_api={makeTemplate:makeTemplate$1,validateTemplate:validateTemplate$1},_doPlot=plot_api$1._doPlot,newPlot=plot_api$1.newPlot,restyle=plot_api$1.restyle,relayout=plot_api$1.relayout,redraw=plot_api$1.redraw,update=plot_api$1.update,_guiRestyle=plot_api$1._guiRestyle,_guiRelayout=plot_api$1._guiRelayout,_guiUpdate=plot_api$1._guiUpdate,_storeDirectGUIEdit=plot_api$1._storeDirectGUIEdit,react=plot_api$1.react,extendTraces=plot_api$1.extendTraces,prependTraces=plot_api$1.prependTraces,addTraces=plot_api$1.addTraces,deleteTraces=plot_api$1.deleteTraces,moveTraces=plot_api$1.moveTraces,purge=plot_api$1.purge,addFrames=plot_api$1.addFrames,deleteFrames=plot_api$1.deleteFrames,animate=plot_api$1.animate,setPlotConfig=plot_api$1.setPlotConfig,toImage$1=to_image,validate=validate$1,downloadImage=download,makeTemplate=template_api.makeTemplate,validateTemplate=template_api.validateTemplate,plot_api={_doPlot:_doPlot,newPlot:newPlot,restyle:restyle,relayout:relayout,redraw:redraw,update:update,_guiRestyle:_guiRestyle,_guiRelayout:_guiRelayout,_guiUpdate:_guiUpdate,_storeDirectGUIEdit:_storeDirectGUIEdit,react:react,extendTraces:extendTraces,prependTraces:prependTraces,addTraces:addTraces,deleteTraces:deleteTraces,moveTraces:moveTraces,purge:purge,addFrames:addFrames,deleteFrames:deleteFrames,animate:animate,setPlotConfig:setPlotConfig,toImage:toImage$1,validate:validate,downloadImage:downloadImage,makeTemplate:makeTemplate,validateTemplate:validateTemplate},FORMAT_LINK=docs.FORMAT_LINK,DATE_FORMAT_LINK=docs.DATE_FORMAT_LINK;function templateFormatStringDescription(t){return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(t&&t.supportOther?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),'Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',FORMAT_LINK,"for details on the formatting syntax.",'Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',DATE_FORMAT_LINK,"for details on the date formatting syntax."].join(" ")}function describeVariables(t){var e=t.description?" "+t.description:"",r=t.keys||[];if(r.length>0){for(var n=[],i=0;i<r.length;i++)n[i]="`"+r[i]+"`";e+="Finally, the template string has access to ",e=1===r.length?"variable "+n[0]:"variables "+n.slice(0,-1).join(", ")+" and "+n.slice(-1)+"."}return e}var hovertemplateAttrs$4=function(t,e){t=t||{};var r=describeVariables(e=e||{}),n={valType:"string",dflt:"",editType:t.editType||"none",description:["Template string used for rendering the information that appear on hover box.","Note that this will override `hoverinfo`.",templateFormatStringDescription({supportOther:!0}),"The variables available in `hovertemplate` are the ones emitted as event data described at this link https://plotly.com/javascript/plotlyjs-events/#event-data.","Additionally, every attributes that can be specified per-point (the ones that are `arrayOk: true`) are available.",r,'Anything contained in tag `<extra>` is displayed in the secondary box, for example "<extra>{fullData.name}</extra>".',"To hide the secondary box completely, use an empty tag `<extra></extra>`."].join(" ")};return!1!==t.arrayOk&&(n.arrayOk=!0),n},texttemplateAttrs$3=function(t,e){t=t||{};var r=describeVariables(e=e||{}),n={valType:"string",dflt:"",editType:t.editType||"calc",description:["Template string used for rendering the information text that appear on points.","Note that this will override `textinfo`.",templateFormatStringDescription(),"Every attributes that can be specified per-point (the ones that are `arrayOk: true`) are available.",r].join(" ")};return!1!==t.arrayOk&&(n.arrayOk=!0),n},template_attributes={hovertemplateAttrs:hovertemplateAttrs$4,texttemplateAttrs:texttemplateAttrs$3},constants$7={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]},axisHoverFormat$3=axis_format_attributes.axisHoverFormat,texttemplateAttrs$2=template_attributes.texttemplateAttrs,hovertemplateAttrs$3=template_attributes.hovertemplateAttrs,dash$1=attributes$p.dash,pattern$1=attributes$p.pattern,extendFlat$a=extend.extendFlat;function axisPeriod(t){return{valType:"any",dflt:0,editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the period positioning in milliseconds or *M<n>* on the "+t+" axis.","Special values in the form of *M<n>* could be used to declare","the number of months. In this case `n` must be a positive integer."].join(" ")}}function axisPeriod0(t){return{valType:"any",editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the base for period positioning in milliseconds or date string on the "+t+" axis.","When `"+t+"period` is round number of weeks,","the `"+t+"period0` by default would be on a Sunday i.e. 2000-01-02,","otherwise it would be at 2000-01-01."].join(" ")}}function axisPeriodAlignment(t){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the alignment of data points on the "+t+" axis."].join(" ")}}var attributes$j={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0,description:"Sets the x coordinates."},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0,description:["Alternate to `x`.","Builds a linear space of x coordinates.","Use with `dx`","where `x0` is the starting coordinate and `dx` the step."].join(" ")},dx:{valType:"number",dflt:1,editType:"calc",anim:!0,description:["Sets the x coordinate step.","See `x0` for more info."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0,description:"Sets the y coordinates."},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0,description:["Alternate to `y`.","Builds a linear space of y coordinates.","Use with `dy`","where `y0` is the starting coordinate and `dy` the step."].join(" ")},dy:{valType:"number",dflt:1,editType:"calc",anim:!0,description:["Sets the y coordinate step.","See `y0` for more info."].join(" ")},xperiod:axisPeriod("x"),yperiod:axisPeriod("y"),xperiod0:axisPeriod0("x0"),yperiod0:axisPeriod0("y0"),xperiodalignment:axisPeriodAlignment("x"),yperiodalignment:axisPeriodAlignment("y"),xhoverformat:axisHoverFormat$3("x"),yhoverformat:axisHoverFormat$3("y"),stackgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several scatter traces (on the same subplot) to the same","stackgroup in order to add their y values (or their x values if","`orientation` is *h*). If blank or omitted this trace will not be","stacked. Stacking also turns `fill` on by default, using *tonexty*","(*tonextx*) if `orientation` is *h* (*v*) and sets the default","`mode` to *lines* irrespective of point count.","You can only stack on a numeric (linear or log) axis.","Traces in a `stackgroup` will only fill to (or be filled to) other","traces in the same group. With multiple `stackgroup`s or some","traces stacked and some not, if fill-linked traces are not already","consecutive, the later ones will be pushed down in the drawing order."].join(" ")},orientation:{valType:"enumerated",values:["v","h"],editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`orientation` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`. Sets the","stacking direction. With *v* (*h*), the y (x) values of subsequent","traces are added. Also affects the default value of `fill`."].join(" ")},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`groupnorm` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`.","Sets the normalization for the sum of this `stackgroup`.","With *fraction*, the value of each trace at each location is","divided by the sum of all trace values at that location.","*percent* is the same but multiplied by 100 to show percentages.","If there are multiple subplots, or multiple `stackgroup`s on one","subplot, each will be normalized within its own set."].join(" ")},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`stackgaps` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`.","Determines how we handle locations at which other traces in this","group have data but this one does not.","With *infer zero* we insert a zero at these locations.","With *interpolate* we linearly interpolate between existing","values, and extrapolate a constant beyond the existing values."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},texttemplate:texttemplateAttrs$2({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style",description:["Sets hover text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc",description:["Determines the drawing mode for this scatter trace.","If the provided `mode` includes *text* then the `text` elements","appear at the coordinates. Otherwise, the `text` elements","appear on hover.","If there are less than "+constants$7.PTS_LINESONLY+" points","and the trace is not stacked","then the default is *lines+markers*. Otherwise, *lines*."].join(" ")},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style",description:["Do the hover effects highlight individual points (markers or","line points) or do they highlight filled regions?","If the fill is *toself* or *tonext* and there are no markers","or text, then the default is *fills*, otherwise it is *points*."].join(" ")},hovertemplate:hovertemplateAttrs$3({},{keys:constants$7.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0,description:"Sets the line color."},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0,description:"Sets the line width (in px)."},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot",description:["Determines the line shape.","With *spline* the lines are drawn using spline interpolation.","The other available values correspond to step-wise line shapes."].join(" ")},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot",description:["Has an effect only if `shape` is set to *spline*","Sets the amount of smoothing.","*0* corresponds to no smoothing (equivalent to a *linear* shape)."].join(" ")},dash:extendFlat$a({},dash$1,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot",description:["Simplifies lines by removing nearly-collinear points. When transitioning","lines, it may be desirable to disable this so that the number of points","along the resulting SVG path is unaffected."].join(" ")},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the provided data arrays are connected."].join(" ")},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines whether or not markers and text nodes","are clipped about the subplot axes.","To show markers and text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc",description:["Sets the area to fill with a solid color.","Defaults to *none* unless this trace is stacked, then it gets","*tonexty* (*tonextx*) if `orientation` is *v* (*h*)","Use with `fillcolor` if not *none*.","*tozerox* and *tozeroy* fill to x=0 and y=0 respectively.","*tonextx* and *tonexty* fill between the endpoints of this","trace and the endpoints of the trace before it, connecting those","endpoints with straight lines (to make a stacked area graph);","if there is no trace before it, they behave like *tozerox* and","*tozeroy*.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other.","Traces in a `stackgroup` will only fill to (or be filled to) other","traces in the same group. With multiple `stackgroup`s or some","traces stacked and some not, if fill-linked traces are not already","consecutive, the later ones will be pushed down in the drawing order."].join(" ")},fillcolor:{valType:"color",editType:"style",anim:!0,description:["Sets the fill color.","Defaults to a half-transparent variant of the line color,","marker color, or marker line color, whichever is available."].join(" ")},fillpattern:pattern$1,marker:extendFlat$a({symbol:{valType:"enumerated",values:drawing_1.symbolList,dflt:"circle",arrayOk:!0,editType:"style",description:["Sets the marker symbol type.","Adding 100 is equivalent to appending *-open* to a symbol name.","Adding 200 is equivalent to appending *-dot* to a symbol name.","Adding 300 is equivalent to appending *-open-dot*","or *dot-open* to a symbol name."].join(" ")},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0,description:"Sets the marker opacity."},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0,description:"Sets the marker size (in px)."},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets a maximum number of points to be drawn on the graph.","*0* corresponds to no limit."].join(" ")},sizeref:{valType:"number",dflt:1,editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the scale factor used to determine the rendered size of","marker points. Use with `sizemin` and `sizemode`."].join(" ")},sizemin:{valType:"number",min:0,dflt:0,editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the minimum size (in px) of the rendered marker points."].join(" ")},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the rule for which the data in `size` is converted","to pixels."].join(" ")},line:extendFlat$a({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0,description:"Sets the width (in px) of the lines bounding the marker points."},editType:"calc"},attributes$m("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc",description:["Sets the type of gradient used to fill the markers"].join(" ")},color:{valType:"color",arrayOk:!0,editType:"calc",description:["Sets the final color of the gradient fill:","the center color for radial, the right for horizontal,","or the bottom for vertical."].join(" ")},editType:"calc"},editType:"calc"},attributes$m("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style",description:"Sets the marker opacity of selected points."},color:{valType:"color",editType:"style",description:"Sets the marker color of selected points."},size:{valType:"number",min:0,editType:"style",description:"Sets the marker size of selected points."},editType:"style"},textfont:{color:{valType:"color",editType:"style",description:"Sets the text font color of selected points."},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style",description:"Sets the marker opacity of unselected points, applied only when a selection exists."},color:{valType:"color",editType:"style",description:"Sets the marker color of unselected points, applied only when a selection exists."},size:{valType:"number",min:0,editType:"style",description:"Sets the marker size of unselected points, applied only when a selection exists."},editType:"style"},textfont:{color:{valType:"color",editType:"style",description:"Sets the text font color of unselected points, applied only when a selection exists."},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc",description:["Sets the positions of the `text` elements","with respects to the (x,y) coordinates."].join(" ")},textfont:font_attributes({editType:"calc",colorEditType:"style",arrayOk:!0,description:"Sets the text font."})},xy_defaults=function(t,e,r,n){var i,a=n("x"),o=n("y");if(registry.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y"],r),a){var s=lib_1.minRowLength(a);o?i=Math.min(s,lib_1.minRowLength(o)):(i=s,n("y0"),n("dy"))}else{if(!o)return 0;i=lib_1.minRowLength(o),n("x0"),n("dx")}return e._length=i,i},dateTick0=lib_1.dateTick0,ONEWEEK=numerical.ONEWEEK;function getPeriod0Dflt(t,e){return dateTick0(e,t%ONEWEEK==0?1:0)}var period_defaults=function(t,e,r,n,i){if(i||(i={x:!0,y:!0}),i.x){var a=n("xperiod");a&&(n("xperiod0",getPeriod0Dflt(a,e.xcalendar)),n("xperiodalignment"))}if(i.y){var o=n("yperiod");o&&(n("yperiod0",getPeriod0Dflt(o,e.ycalendar)),n("yperiodalignment"))}},perStackAttrs=["orientation","groupnorm","stackgaps"],stack_defaults=function(t,e,r,n){var i=r._scatterStackOpts,a=n("stackgroup");if(a){var o=e.xaxis+e.yaxis,s=i[o];s||(s=i[o]={});var l=s[a],c=!1;l?l.traces.push(e):(l=s[a]={traceIndices:[],traces:[e]},c=!0);for(var u={orientation:e.x&&!e.y?"h":"v"},d=0;d<perStackAttrs.length;d++){var h=perStackAttrs[d],g=h+"Found";if(!l[g]){var f=void 0!==t[h],p="orientation"===h;if((f||c)&&(l[h]=n(h,u[h]),p&&(l.fillDflt="h"===l[h]?"tonextx":"tonexty"),f&&(l[g]=!0,!c&&(delete l.traces[0][h],p))))for(var m=0;m<l.traces.length-1;m++){var y=l.traces[m];y._input.fill!==y.fill&&(y.fill=l.fillDflt)}}}return l}},hasColorscale$3=helpers$b.hasColorscale,marker_defaults=function(t,e,r,n,i,a){var o=subtypes.isBubble(t),s=(t.line||{}).color;(a=a||{},s&&(r=s),i("marker.symbol"),i("marker.opacity",o?.7:1),i("marker.size"),i("marker.color",r),hasColorscale$3(t,"marker")&&defaults$k(t,e,n,i,{prefix:"marker.",cLetter:"c"}),a.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),a.noLine||(i("marker.line.color",s&&!Array.isArray(s)&&e.marker.color!==s?s:o?color_1.background:color_1.defaultLine),hasColorscale$3(t,"marker.line")&&defaults$k(t,e,n,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",o?1:0)),o&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),a.gradient)&&("none"!==i("marker.gradient.type")&&i("marker.gradient.color"))},isArrayOrTypedArray$4=lib_1.isArrayOrTypedArray,hasColorscale$2=helpers$b.hasColorscale,line_defaults=function(t,e,r,n,i,a){var o=(t.marker||{}).color;(i("line.color",r),hasColorscale$2(t,"line"))?defaults$k(t,e,n,i,{prefix:"line.",cLetter:"c"}):i("line.color",!isArrayOrTypedArray$4(o)&&o||r);i("line.width"),(a||{}).noDash||i("line.dash")},line_shape_defaults=function(t,e,r){"spline"===r("line.shape")&&r("line.smoothing")},text_defaults=function(t,e,r,n,i){i=i||{},n("textposition"),lib_1.coerceFont(n,"textfont",r.font),i.noSelect||(n("selected.textfont.color"),n("unselected.textfont.color"))},isArrayOrTypedArray$3=lib_1.isArrayOrTypedArray,fillcolor_defaults=function(t,e,r,n){var i=!1;if(e.marker){var a=e.marker.color,o=(e.marker.line||{}).color;a&&!isArrayOrTypedArray$3(a)?i=a:o&&!isArrayOrTypedArray$3(o)&&(i=o)}n("fillcolor",color_1.addOpacity((e.line||{}).color||i||r,.5))},coercePattern$1=lib_1.coercePattern,defaults$g=function(t,e,r,n){function i(r,n){return lib_1.coerce(t,e,attributes$j,r,n)}var a=xy_defaults(t,e,n,i);if(a||(e.visible=!1),e.visible){period_defaults(t,e,n,i),i("xhoverformat"),i("yhoverformat");var o=stack_defaults(t,e,n,i),s=!o&&a<constants$7.PTS_LINESONLY?"lines+markers":"lines";i("text"),i("hovertext"),i("mode",s),subtypes.hasLines(e)&&(line_defaults(t,e,r,n,i),line_shape_defaults(t,e,i),i("connectgaps"),i("line.simplify")),subtypes.hasMarkers(e)&&marker_defaults(t,e,r,n,i,{gradient:!0}),subtypes.hasText(e)&&(i("texttemplate"),text_defaults(t,e,n,i));var l=[];(subtypes.hasMarkers(e)||subtypes.hasText(e))&&(i("cliponaxis"),i("marker.maxdisplayed"),l.push("points")),i("fill",o?o.fillDflt:"none"),"none"!==e.fill&&(fillcolor_defaults(t,e,r,i),subtypes.hasLines(e)||line_shape_defaults(t,e,i),coercePattern$1(i,"fillpattern",e.fillcolor,!1));var c=(e.line||{}).color,u=(e.marker||{}).color;"tonext"!==e.fill&&"toself"!==e.fill||l.push("fills"),i("hoveron",l.join("+")||"points"),"fills"!==e.hoveron&&i("hovertemplate");var d=registry.getComponentMethod("errorbars","supplyDefaults");d(t,e,c||u||r,{axis:"y"}),d(t,e,c||u||r,{axis:"x",inherit:"y"}),lib_1.coerceSelectionMarkerOpacity(e,i)}},cross_trace_defaults$1=function(t){for(var e=0;e<t.length;e++){var r=t[e];if("scatter"===r.type){var n=r.fill;if("none"!==n&&"toself"!==n&&(r.opacity=void 0,"tonexty"===n||"tonextx"===n))for(var i=e-1;i>=0;i--){var a=t[i];if("scatter"===a.type&&a.xaxis===r.xaxis&&a.yaxis===r.yaxis){a.opacity=void 0;break}}}}},dateTime2ms=lib_1.dateTime2ms,incrementMonth=lib_1.incrementMonth,ONEAVGMONTH=numerical.ONEAVGMONTH,align_period=function(t,e,r,n){if("date"!==e.type)return{vals:n};var i=t[r+"periodalignment"];if(!i)return{vals:n};var a,o=t[r+"period"];if(fastIsnumeric(o)){if((o=+o)<=0)return{vals:n}}else if("string"==typeof o&&"M"===o.charAt(0)){var s=+o.substring(1);if(!(s>0&&Math.round(s)===s))return{vals:n};a=s}for(var l=e.calendar,c="start"===i,u="end"===i,d=t[r+"period0"],h=dateTime2ms(d,l)||0,g=[],f=[],p=[],m=n.length,y=0;y<m;y++){var b,v,x,I=n[y];if(a){for(b=Math.round((I-h)/(a*ONEAVGMONTH)),x=incrementMonth(h,a*b,l);x>I;)x=incrementMonth(x,-a,l);for(;x<=I;)x=incrementMonth(x,a,l);v=incrementMonth(x,-a,l)}else{for(x=h+(b=Math.round((I-h)/o))*o;x>I;)x-=o;for(;x<=I;)x+=o;v=x-o}g[y]=c?v:u?x:(v+x)/2,f[y]=v,p[y]=x}return{vals:g,starts:f,ends:p}},hasColorscale$1=helpers$b.hasColorscale,colorscale_calc=function(t,e){subtypes.hasLines(e)&&hasColorscale$1(e,"line")&&calc$7(t,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),subtypes.hasMarkers(e)&&(hasColorscale$1(e,"marker")&&calc$7(t,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),hasColorscale$1(e,"marker.line")&&calc$7(t,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))},arrays_to_calcdata$1=function(t,e){for(var r=0;r<t.length;r++)t[r].i=r;lib_1.mergeArray(e.text,t,"tx"),lib_1.mergeArray(e.texttemplate,t,"txt"),lib_1.mergeArray(e.hovertext,t,"htx"),lib_1.mergeArray(e.customdata,t,"data"),lib_1.mergeArray(e.textposition,t,"tp"),e.textfont&&(lib_1.mergeArrayCastPositive(e.textfont.size,t,"ts"),lib_1.mergeArray(e.textfont.color,t,"tc"),lib_1.mergeArray(e.textfont.family,t,"tf"));var n=e.marker;if(n){lib_1.mergeArrayCastPositive(n.size,t,"ms"),lib_1.mergeArrayCastPositive(n.opacity,t,"mo"),lib_1.mergeArray(n.symbol,t,"mx"),lib_1.mergeArray(n.color,t,"mc");var i=n.line;n.line&&(lib_1.mergeArray(i.color,t,"mlc"),lib_1.mergeArrayCastPositive(i.width,t,"mlw"));var a=n.gradient;a&&"none"!==a.type&&(lib_1.mergeArray(a.type,t,"mgt"),lib_1.mergeArray(a.color,t,"mgc"))}},calc_selection=function(t,e){lib_1.isArrayOrTypedArray(e.selectedpoints)&&lib_1.tagSelected(t,e)},BADNUM$4=numerical.BADNUM;function calc$5(t,e){var r,n,i,a,o,s,l=t._fullLayout,c=axes_1.getFromId(t,e.xaxis||"x"),u=axes_1.getFromId(t,e.yaxis||"y"),d=c.makeCalcdata(e,"x"),h=u.makeCalcdata(e,"y"),g=align_period(e,c,"x",d),f=align_period(e,u,"y",h),p=g.vals,m=f.vals,y=e._length,b=new Array(y),v=e.ids,x=getStackOpts(e,l,c,u),I=!1;setFirstScatter(l,e);var B,C="x",F="y";x?(lib_1.pushUnique(x.traceIndices,e._expandedIndex),(r="v"===x.orientation)?(F="s",B="x"):(C="s",B="y"),o="interpolate"===x.stackgaps):calcAxisExpansion$1(t,e,c,u,p,m,calcMarkerSize(e,y));var A=!!e.xperiodalignment,Q=!!e.yperiodalignment;for(n=0;n<y;n++){var _=b[n]={},w=fastIsnumeric(p[n]),U=fastIsnumeric(m[n]);w&&U?(_[C]=p[n],_[F]=m[n],A&&(_.orig_x=d[n],_.xEnd=g.ends[n],_.xStart=g.starts[n]),Q&&(_.orig_y=h[n],_.yEnd=f.ends[n],_.yStart=f.starts[n])):x&&(r?w:U)?(_[B]=r?p[n]:m[n],_.gap=!0,o?(_.s=BADNUM$4,I=!0):_.s=0):_[C]=_[F]=BADNUM$4,v&&(_.id=String(v[n]))}if(arrays_to_calcdata$1(b,e),colorscale_calc(t,e),calc_selection(b,e),x){for(n=0;n<b.length;)b[n][B]===BADNUM$4?b.splice(n,1):n++;if(lib_1.sort(b,(function(t,e){return t[B]-e[B]||t.i-e.i})),I){for(n=0;n<b.length-1&&b[n].gap;)n++;for((s=b[n].s)||(s=b[n].s=0),i=0;i<n;i++)b[i].s=s;for(a=b.length-1;a>n&&b[a].gap;)a--;for(s=b[a].s,i=b.length-1;i>a;i--)b[i].s=s;for(;n<a;)if(b[++n].gap){for(i=n+1;b[i].gap;)i++;for(var S=b[n-1][B],E=b[n-1].s,L=(b[i].s-E)/(b[i][B]-S);n<i;)b[n].s=E+(b[n][B]-S)*L,n++}}}return b}function calcAxisExpansion$1(t,e,r,n,i,a,o){var s=e._length,l=t._fullLayout,c=r._id,u=n._id,d=l._firstScatter[firstScatterGroup(e)]===e.uid,h=(getStackOpts(e,l,r,n)||{}).orientation,g=e.fill;r._minDtick=0,n._minDtick=0;var f={padded:!0},p={padded:!0};o&&(f.ppad=p.ppad=o);var m=s<2||i[0]!==i[s-1]||a[0]!==a[s-1];m&&("tozerox"===g||"tonextx"===g&&(d||"h"===h))?f.tozero=!0:(e.error_y||{}).visible||"tonexty"!==g&&"tozeroy"!==g&&(subtypes.hasMarkers(e)||subtypes.hasText(e))||(f.padded=!1,f.ppad=0),m&&("tozeroy"===g||"tonexty"===g&&(d||"v"===h))?p.tozero=!0:"tonextx"!==g&&"tozerox"!==g||(p.padded=!1),c&&(e._extremes[c]=axes_1.findExtremes(r,i,f)),u&&(e._extremes[u]=axes_1.findExtremes(n,a,p))}function calcMarkerSize(t,e){if(subtypes.hasMarkers(t)){var r,n=t.marker,i=1.6*(t.marker.sizeref||1);if(r="area"===t.marker.sizemode?function(t){return Math.max(Math.sqrt((t||0)/i),3)}:function(t){return Math.max((t||0)/i,3)},lib_1.isArrayOrTypedArray(n.size)){var a={type:"linear"};axes_1.setConvert(a);for(var o=a.makeCalcdata(t.marker,"size"),s=new Array(e),l=0;l<e;l++)s[l]=r(o[l]);return s}return r(n.size)}}function setFirstScatter(t,e){var r=firstScatterGroup(e),n=t._firstScatter;n[r]||(n[r]=e.uid)}function firstScatterGroup(t){var e=t.stackgroup;return t.xaxis+t.yaxis+t.type+(e?"-"+e:"")}function getStackOpts(t,e,r,n){var i=t.stackgroup;if(i){var a=e._scatterStackOpts[r._id+n._id][i],o="v"===a.orientation?n:r;return"linear"===o.type||"log"===o.type?a:void 0}}var calc_1$2={calc:calc$5,calcMarkerSize:calcMarkerSize,calcAxisExpansion:calcAxisExpansion$1,setFirstScatter:setFirstScatter,getStackOpts:getStackOpts},cross_trace_calc$1=function(t,e){var r=e.xaxis,n=e.yaxis,i=r._id+n._id,a=t._fullLayout._scatterStackOpts[i];if(a){var o,s,l,c,u,d,h,g,f,p,m,y,b,v,x,I=t.calcdata;for(var B in a){var C=(p=a[B]).traceIndices;if(C.length){for(m="interpolate"===p.stackgaps,y=p.groupnorm,"v"===p.orientation?(b="x",v="y"):(b="y",v="x"),x=new Array(C.length),o=0;o<x.length;o++)x[o]=!1;d=I[C[0]];var F=new Array(d.length);for(o=0;o<d.length;o++)F[o]=d[o][b];for(o=1;o<C.length;o++){for(u=I[C[o]],s=l=0;s<u.length;s++){for(h=u[s][b];h>F[l]&&l<F.length;l++)insertBlank(u,s,F[l],o,x,m,b),s++;if(h!==F[l]){for(c=0;c<o;c++)insertBlank(I[C[c]],l,h,c,x,m,b);F.splice(l,0,h)}l++}for(;l<F.length;l++)insertBlank(u,s,F[l],o,x,m,b),s++}var A=F.length;for(s=0;s<d.length;s++){for(g=d[s][v]=d[s].s,o=1;o<C.length;o++)(u=I[C[o]])[0].trace._rawLength=u[0].trace._length,u[0].trace._length=A,g+=u[s].s,u[s][v]=g;if(y)for(f=("fraction"===y?g:g/100)||1,o=0;o<C.length;o++){var Q=I[C[o]][s];Q[v]/=f,Q.sNorm=Q.s/f}}for(o=0;o<C.length;o++){var _=(u=I[C[o]])[0].trace,w=calc_1$2.calcMarkerSize(_,_._rawLength),U=Array.isArray(w);if(w&&x[o]||U){var S=w;for(w=new Array(A),s=0;s<A;s++)w[s]=u[s].gap?0:U?S[u[s].i]:S}var E=new Array(A),L=new Array(A);for(s=0;s<A;s++)E[s]=u[s].x,L[s]=u[s].y;calc_1$2.calcAxisExpansion(t,_,r,n,E,L,w),u[0].t.orientation=p.orientation}}}}};function insertBlank(t,e,r,n,i,a,o){i[n]=!0;var s={i:null,gap:!0,s:0};if(s[o]=r,t.splice(e,0,s),e&&r===t[e-1][o]){var l=t[e-1];s.s=l.s,s.i=l.i,s.gap=l.gap}else a&&(s.s=getInterp(t,e,r,o));e||(t[0].t=t[1].t,t[0].trace=t[1].trace,delete t[1].t,delete t[1].trace)}function getInterp(t,e,r,n){var i=t[e-1],a=t[e+1];return a?i?i.s+(a.s-i.s)*(r-i[n])/(a[n]-i[n]):a.s:i.s}var BADNUM$3=numerical.BADNUM,LOG_CLIP=numerical.LOG_CLIP,LOG_CLIP_PLUS=LOG_CLIP+.5,LOG_CLIP_MINUS=LOG_CLIP-.5,segmentsIntersect=lib_1.segmentsIntersect,constrain=lib_1.constrain,line_points=function(t,e){var r,n,i,a,o,s,l,c,u,d,h,g,f,p,m,y,b,v,x=e.xaxis,I=e.yaxis,B="log"===x.type,C="log"===I.type,F=x._length,A=I._length,Q=e.connectGaps,_=e.baseTolerance,w=e.shape,U="linear"===w,S=e.fill&&"none"!==e.fill,E=[],L=constants$7.minTolerance,T=t.length,R=new Array(T),k=0;function G(r){var n=t[r];if(!n)return!1;var i=e.linearized?x.l2p(n.x):x.c2p(n.x),a=e.linearized?I.l2p(n.y):I.c2p(n.y);if(i===BADNUM$3){if(B&&(i=x.c2p(n.x,!0)),i===BADNUM$3)return!1;C&&a===BADNUM$3&&(i*=Math.abs(x._m*A*(x._m>0?LOG_CLIP_PLUS:LOG_CLIP_MINUS)/(I._m*F*(I._m>0?LOG_CLIP_PLUS:LOG_CLIP_MINUS)))),i*=1e3}if(a===BADNUM$3){if(C&&(a=I.c2p(n.y,!0)),a===BADNUM$3)return!1;a*=1e3}return[i,a]}function N(t,e,r,n){var i=r-t,a=n-e,o=.5-t,s=.5-e,l=i*i+a*a,c=i*o+a*s;if(c>0&&c<l){var u=o*a-s*i;if(u*u<l)return!0}}function M(t,e){var r=t[0]/F,n=t[1]/A,i=Math.max(0,-r,r-1,-n,n-1);return i&&void 0!==b&&N(r,n,b,v)&&(i=0),i&&e&&N(r,n,e[0]/F,e[1]/A)&&(i=0),(1+constants$7.toleranceGrowth*i)*_}function D(t,e){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}var X,V,W,Z,O,$,H,Y=constants$7.maxScreensAway,P=-F*Y,z=F*(1+Y),J=-A*Y,j=A*(1+Y),K=[[P,J,z,J],[z,J,z,j],[z,j,P,j],[P,j,P,J]];function q(t){if(t[0]<P||t[0]>z||t[1]<J||t[1]>j)return[constrain(t[0],P,z),constrain(t[1],J,j)]}function tt(t,e){return t[0]===e[0]&&(t[0]===P||t[0]===z)||(t[1]===e[1]&&(t[1]===J||t[1]===j)||void 0)}function et(t,e,r){return function(n,i){var a=q(n),o=q(i),s=[];if(a&&o&&tt(a,o))return s;a&&s.push(a),o&&s.push(o);var l=2*lib_1.constrain((n[t]+i[t])/2,e,r)-((a||n)[t]+(o||i)[t]);l&&((a&&o?l>0==a[t]>o[t]?a:o:a||o)[t]+=l);return s}}function rt(t){var e=t[0],r=t[1],n=e===R[k-1][0],i=r===R[k-1][1];if(!n||!i)if(k>1){var a=e===R[k-2][0],o=r===R[k-2][1];n&&(e===P||e===z)&&a?o?k--:R[k-1]=t:i&&(r===J||r===j)&&o?a?k--:R[k-1]=t:R[k++]=t}else R[k++]=t}function nt(t){R[k-1][0]!==t[0]&&R[k-1][1]!==t[1]&&rt([W,Z]),rt(t),O=null,W=Z=0}function it(t){if(b=t[0]/F,v=t[1]/A,X=t[0]<P?P:t[0]>z?z:0,V=t[1]<J?J:t[1]>j?j:0,X||V){if(k)if(O){var e=H(O,t);e.length>1&&(nt(e[0]),R[k++]=e[1])}else $=H(R[k-1],t)[0],R[k++]=$;else R[k++]=[X||t[0],V||t[1]];var r=R[k-1];X&&V&&(r[0]!==X||r[1]!==V)?(O&&(W!==X&&Z!==V?rt(W&&Z?function(t,e){var r=e[0]-t[0],n=(e[1]-t[1])/r;return(t[1]*e[0]-e[1]*t[0])/r>0?[n>0?P:z,j]:[n>0?z:P,J]}(O,t):[W||X,Z||V]):W&&Z&&rt([W,Z])),rt([X,V])):W-X&&Z-V&&rt([X||W,V||Z]),O=t,W=X,Z=V}else O&&nt(H(O,t)[0]),R[k++]=t}for("linear"===w||"spline"===w?H=function(t,e){for(var r=[],n=0,i=0;i<4;i++){var a=K[i],o=segmentsIntersect(t[0],t[1],e[0],e[1],a[0],a[1],a[2],a[3]);o&&(!n||Math.abs(o.x-r[0][0])>1||Math.abs(o.y-r[0][1])>1)&&(o=[o.x,o.y],n&&D(o,t)<D(r[0],t)?r.unshift(o):r.push(o),n++)}return r}:"hv"===w||"vh"===w?H=function(t,e){var r=[],n=q(t),i=q(e);return n&&i&&tt(n,i)||(n&&r.push(n),i&&r.push(i)),r}:"hvh"===w?H=et(0,P,z):"vhv"===w&&(H=et(1,J,j)),r=0;r<T;r++)if(n=G(r)){for(k=0,O=null,it(n),r++;r<T;r++){if(!(a=G(r))){if(Q)continue;break}if(U&&e.simplify){var at=G(r+1);if(d=D(a,n),S&&(0===k||k===T-1)||!(d<M(a,at)*L)){for(c=[(a[0]-n[0])/d,(a[1]-n[1])/d],o=n,h=d,g=p=m=0,l=!1,i=a,r++;r<t.length;r++){if(s=at,at=G(r+1),!s){if(Q)continue;break}if(y=(u=[s[0]-n[0],s[1]-n[1]])[0]*c[1]-u[1]*c[0],p=Math.min(p,y),(m=Math.max(m,y))-p>M(s,at))break;i=s,(f=u[0]*c[0]+u[1]*c[1])>h?(h=f,a=s,l=!1):f<g&&(g=f,o=s,l=!0)}if(l?(it(a),i!==o&&it(o)):(o!==n&&it(o),i!==a&&it(a)),it(i),r>=t.length||!s)break;it(s),n=s}}else it(a)}O&&rt([W||O[0],Z||O[1]]),E.push(R.slice(0,k))}return E},LINKEDFILLS={tonextx:1,tonexty:1,tonext:1},link_traces=function(t,e,r){var n,i,a,o,s,l={},c=!1,u=-1,d=0,h=-1;for(i=0;i<r.length;i++)(a=(n=r[i][0].trace).stackgroup||"")?a in l?s=l[a]:(s=l[a]=d,d++):n.fill in LINKEDFILLS&&h>=0?s=h:(s=h=d,d++),s<u&&(c=!0),n._groupIndex=u=s;var g=r.slice();c&&g.sort((function(t,e){var r=t[0].trace,n=e[0].trace;return r._groupIndex-n._groupIndex||r.index-n.index}));var f={};for(i=0;i<g.length;i++)a=(n=g[i][0].trace).stackgroup||"",!0===n.visible?(n._nexttrace=null,n.fill in LINKEDFILLS&&(o=f[a],n._prevtrace=o||null,o&&(o._nexttrace=n)),n._ownfill=n.fill&&("tozero"===n.fill.substr(0,6)||"toself"===n.fill||"to"===n.fill.substr(0,2)&&!n._prevtrace),f[a]=n):n._prevtrace=n._nexttrace=n._ownfill=null;return g},ensureSingle$1=lib_1.ensureSingle,identity=lib_1.identity,polygonTester=polygon_1.tester,plot$3=function(t,e,r,n,i,a){var o,s,l=!i,c=!!i&&i.duration>0,u=link_traces(t,e,r);(o=n.selectAll("g.trace").data(u,(function(t){return t[0].trace.uid})),o.enter().append("g").attr("class",(function(t){return"trace scatter trace"+t[0].trace.uid})).style("stroke-miterlimit",2),o.order(),createFills(t,o,e),c)?(a&&(s=a()),d3.transition().duration(i.duration).ease(i.easing).each("end",(function(){s&&s()})).each("interrupt",(function(){s&&s()})).each((function(){n.selectAll("g.trace").each((function(r,n){plotOne$1(t,n,e,r,u,this,i)}))}))):o.each((function(r,n){plotOne$1(t,n,e,r,u,this,i)}));l&&o.exit().remove(),n.selectAll("path:not([d])").remove()};function createFills(t,e,r){e.each((function(e){var n=ensureSingle$1(d3.select(this),"g","fills");drawing_1.setClipUrl(n,r.layerClipId,t);var i=e[0].trace,a=[];i._ownfill&&a.push("_ownFill"),i._nexttrace&&a.push("_nextFill");var o=n.selectAll("g").data(a,identity);o.enter().append("g"),o.exit().each((function(t){i[t]=null})).remove(),o.order().each((function(t){i[t]=ensureSingle$1(d3.select(this),"path","js-fill")}))}))}function plotOne$1(t,e,r,n,i,a,o){var s;selectMarkers(t,e,r,n,i);var l=!!o&&o.duration>0;function c(t){return l?t.transition():t}var u=r.xaxis,d=r.yaxis,h=n[0].trace,g=h.line,f=d3.select(a),p=ensureSingle$1(f,"g","errorbars"),m=ensureSingle$1(f,"g","lines"),y=ensureSingle$1(f,"g","points"),b=ensureSingle$1(f,"g","text");if(registry.getComponentMethod("errorbars","plot")(t,p,r,o),!0===h.visible){var v,x;c(f).style("opacity",h.opacity);var I=h.fill.charAt(h.fill.length-1);"x"!==I&&"y"!==I&&(I=""),n[0][r.isRangePlot?"nodeRangePlot3":"node3"]=f;var B,C,F="",A=[],Q=h._prevtrace;Q&&(F=Q._prevRevpath||"",x=Q._nextFill,A=Q._polygons);var _,w,U,S,E,L,T,R="",k="",G=[],N=lib_1.noop;if(v=h._ownFill,subtypes.hasLines(h)||"none"!==h.fill){for(x&&x.datum(n),-1!==["hv","vh","hvh","vhv"].indexOf(g.shape)?(_=drawing_1.steps(g.shape),w=drawing_1.steps(g.shape.split("").reverse().join(""))):_=w="spline"===g.shape?function(t){var e=t[t.length-1];return t.length>1&&t[0][0]===e[0]&&t[0][1]===e[1]?drawing_1.smoothclosed(t.slice(1),g.smoothing):drawing_1.smoothopen(t,g.smoothing)}:function(t){return"M"+t.join("L")},U=function(t){return w(t.reverse())},G=line_points(n,{xaxis:u,yaxis:d,connectGaps:h.connectgaps,baseTolerance:Math.max(g.width||1,3)/4,shape:g.shape,simplify:g.simplify,fill:h.fill}),T=h._polygons=new Array(G.length),s=0;s<G.length;s++)h._polygons[s]=polygonTester(G[s]);G.length&&(S=G[0][0],L=(E=G[G.length-1])[E.length-1]),N=function(t){return function(e){if(B=_(e),C=U(e),R?I?(R+="L"+B.substr(1),k=C+"L"+k.substr(1)):(R+="Z"+B,k=C+"Z"+k):(R=B,k=C),subtypes.hasLines(h)&&e.length>1){var r=d3.select(this);if(r.datum(n),t)c(r.style("opacity",0).attr("d",B).call(drawing_1.lineGroupStyle)).style("opacity",1);else{var i=c(r);i.attr("d",B),drawing_1.singleLineStyle(n,i)}}}}}var M=m.selectAll(".js-line").data(G);c(M.exit()).style("opacity",0).remove(),M.each(N(!1)),M.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(drawing_1.lineGroupStyle).each(N(!0)),drawing_1.setClipUrl(M,r.layerClipId,t),G.length?(v?(v.datum(n),S&&L&&(I?("y"===I?S[1]=L[1]=d.c2p(0,!0):"x"===I&&(S[0]=L[0]=u.c2p(0,!0)),c(v).attr("d","M"+L+"L"+S+"L"+R.substr(1)).call(drawing_1.singleFillStyle,t)):c(v).attr("d",R+"Z").call(drawing_1.singleFillStyle,t))):x&&("tonext"===h.fill.substr(0,6)&&R&&F?("tonext"===h.fill?c(x).attr("d",R+"Z"+F+"Z").call(drawing_1.singleFillStyle,t):c(x).attr("d",R+"L"+F.substr(1)+"Z").call(drawing_1.singleFillStyle,t),h._polygons=h._polygons.concat(A)):(X(x),h._polygons=null)),h._prevRevpath=k,h._prevPolygons=T):(v?X(v):x&&X(x),h._polygons=h._prevRevpath=h._prevPolygons=null),y.datum(n),b.datum(n),function(e,n,i){var a,o=i[0].trace,s=subtypes.hasMarkers(o),h=subtypes.hasText(o),g=$(o),f=H,p=H;if(s||h){var m=identity,y=o.stackgroup,b=y&&"infer zero"===t._fullLayout._scatterStackOpts[u._id+d._id][y].stackgaps;o.marker.maxdisplayed||o._needsCull?m=b?W:V:y&&!b&&(m=Z),s&&(f=m),h&&(p=m)}var v,x=(a=e.selectAll("path.point").data(f,g)).enter().append("path").classed("point",!0);l&&x.call(drawing_1.pointStyle,o,t).call(drawing_1.translatePoints,u,d).style("opacity",0).transition().style("opacity",1),a.order(),s&&(v=drawing_1.makePointStyleFns(o)),a.each((function(e){var n=d3.select(this),i=c(n);drawing_1.translatePoint(e,i,u,d)?(drawing_1.singlePointStyle(e,i,o,v,t),r.layerClipId&&drawing_1.hideOutsideRangePoint(e,i,u,d,o.xcalendar,o.ycalendar),o.customdata&&n.classed("plotly-customdata",null!==e.data&&void 0!==e.data)):i.remove()})),l?a.exit().transition().style("opacity",0).remove():a.exit().remove(),(a=n.selectAll("g").data(p,g)).enter().append("g").classed("textpoint",!0).append("text"),a.order(),a.each((function(t){var e=d3.select(this),n=c(e.select("text"));drawing_1.translatePoint(t,n,u,d)?r.layerClipId&&drawing_1.hideOutsideRangePoint(t,e,u,d,o.xcalendar,o.ycalendar):e.remove()})),a.selectAll("text").call(drawing_1.textPointStyle,o,t).each((function(t){var e=u.c2p(t.x),r=d.c2p(t.y);d3.select(this).selectAll("tspan.line").each((function(){c(d3.select(this)).attr({x:e,y:r})}))})),a.exit().remove()}(y,b,n);var D=!1===h.cliponaxis?null:r.layerClipId;drawing_1.setClipUrl(y,D,t),drawing_1.setClipUrl(b,D,t)}function X(t){c(t).attr("d","M0,0Z")}function V(t){return t.filter((function(t){return!t.gap&&t.vis}))}function W(t){return t.filter((function(t){return t.vis}))}function Z(t){return t.filter((function(t){return!t.gap}))}function O(t){return t.id}function $(t){if(t.ids)return O}function H(){return!1}}function selectMarkers(t,e,r,n,i){var a=r.xaxis,o=r.yaxis,s=d3.extent(lib_1.simpleMap(a.range,a.r2c)),l=d3.extent(lib_1.simpleMap(o.range,o.r2c)),c=n[0].trace;if(subtypes.hasMarkers(c)){var u=c.marker.maxdisplayed;if(0!==u){var d=n.filter((function(t){return t.x>=s[0]&&t.x<=s[1]&&t.y>=l[0]&&t.y<=l[1]})),h=Math.ceil(d.length/u),g=0;i.forEach((function(t,r){var n=t[0].trace;subtypes.hasMarkers(n)&&n.marker.maxdisplayed>0&&r<e&&g++}));var f=Math.round(g*h/3+Math.floor(g/3)*h/7.1);n.forEach((function(t){delete t.vis})),d.forEach((function(t,e){0===Math.round((e+f)%h)&&(t.vis=!0)}))}}}var marker_colorbar={container:"marker",min:"cmin",max:"cmax"},format_labels=function(t,e,r){var n={},i={_fullLayout:r},a=axes_1.getFromTrace(i,e,"x"),o=axes_1.getFromTrace(i,e,"y");return n.xLabel=axes_1.tickText(a,a.c2l(t.x),!0).text,n.yLabel=axes_1.tickText(o,o.c2l(t.y),!0).text,n};function style$2(t){var e=d3.select(t).selectAll("g.trace.scatter");e.style("opacity",(function(t){return t[0].trace.opacity})),e.selectAll("g.points").each((function(e){stylePoints$1(d3.select(this),e.trace||e[0].trace,t)})),e.selectAll("g.text").each((function(e){styleText(d3.select(this),e.trace||e[0].trace,t)})),e.selectAll("g.trace path.js-line").call(drawing_1.lineGroupStyle),e.selectAll("g.trace path.js-fill").call(drawing_1.fillGroupStyle,t),registry.getComponentMethod("errorbars","style")(e)}function stylePoints$1(t,e,r){drawing_1.pointStyle(t.selectAll("path.point"),e,r)}function styleText(t,e,r){drawing_1.textPointStyle(t.selectAll("text"),e,r)}function styleOnSelect$1(t,e,r){var n=e[0].trace;n.selectedpoints?(drawing_1.selectedPointStyle(r.selectAll("path.point"),n),drawing_1.selectedTextStyle(r.selectAll("text"),n)):(stylePoints$1(r,n,t),styleText(r,n,t))}var style_1$1={style:style$2,stylePoints:stylePoints$1,styleText:styleText,styleOnSelect:styleOnSelect$1},get_trace_color=function(t,e){var r,n;if("lines"===t.mode)return(r=t.line.color)&&color_1.opacity(r)?r:t.fillcolor;if("none"===t.mode)return t.fill?t.fillcolor:"";var i=e.mcc||(t.marker||{}).color,a=e.mlcc||((t.marker||{}).line||{}).color;return(n=i&&color_1.opacity(i)?i:a&&color_1.opacity(a)&&(e.mlw||((t.marker||{}).line||{}).width)?a:"")?color_1.opacity(n)<.3?color_1.addOpacity(n,.3):n:(r=(t.line||{}).color)&&color_1.opacity(r)&&subtypes.hasLines(t)&&t.line.width?r:t.fillcolor},fillText$1=lib_1.fillText,hover$2=function(t,e,r,n){var i=t.cd,a=i[0].trace,o=t.xa,s=t.ya,l=o.c2p(e),c=s.c2p(r),u=[l,c],d=a.hoveron||"",h=-1!==a.mode.indexOf("markers")?3:.5,g=!!a.xperiodalignment,f=!!a.yperiodalignment;if(-1!==d.indexOf("points")){var p=function(t){var e=Math.max(h,t.mrc||0),r=o.c2p(t.x)-l,n=s.c2p(t.y)-c;return Math.max(Math.sqrt(r*r+n*n)-e,1-h/e)},m=fx.getDistanceFunction(n,(function(t){if(g){var e=o.c2p(t.xStart),r=o.c2p(t.xEnd);return l>=Math.min(e,r)&&l<=Math.max(e,r)?0:1/0}var n=Math.max(3,t.mrc||0),i=1-1/n,a=Math.abs(o.c2p(t.x)-l);return a<n?i*a/n:a-n+i}),(function(t){if(f){var e=s.c2p(t.yStart),r=s.c2p(t.yEnd);return c>=Math.min(e,r)&&c<=Math.max(e,r)?0:1/0}var n=Math.max(3,t.mrc||0),i=1-1/n,a=Math.abs(s.c2p(t.y)-c);return a<n?i*a/n:a-n+i}),p);if(fx.getClosest(i,m,t),!1!==t.index){var y=i[t.index],b=o.c2p(y.x,!0),v=s.c2p(y.y,!0),x=y.mrc||1;t.index=y.i;var I=i[0].t.orientation,B=I&&(y.sNorm||y.s),C="h"===I?B:void 0!==y.orig_x?y.orig_x:y.x,F="v"===I?B:void 0!==y.orig_y?y.orig_y:y.y;return lib_1.extendFlat(t,{color:get_trace_color(a,y),x0:b-x,x1:b+x,xLabelVal:C,y0:v-x,y1:v+x,yLabelVal:F,spikeDistance:p(y),hovertemplate:a.hovertemplate}),fillText$1(y,a,t),registry.getComponentMethod("errorbars","hoverInfo")(y,a,t),[t]}}if(-1!==d.indexOf("fills")&&a._polygons){var A,Q,_,w,U,S,E,L,T,R=a._polygons,k=[],G=!1,N=1/0,M=-1/0,D=1/0,X=-1/0;for(A=0;A<R.length;A++)(_=R[A]).contains(u)&&(G=!G,k.push(_),D=Math.min(D,_.ymin),X=Math.max(X,_.ymax));if(G){var V=((D=Math.max(D,0))+(X=Math.min(X,s._length)))/2;for(A=0;A<k.length;A++)for(w=k[A].pts,Q=1;Q<w.length;Q++)(L=w[Q-1][1])>V!=(T=w[Q][1])>=V&&(S=w[Q-1][0],E=w[Q][0],T-L&&(U=S+(E-S)*(V-L)/(T-L),N=Math.min(N,U),M=Math.max(M,U)));N=Math.max(N,0),M=Math.min(M,o._length);var W=color_1.defaultLine;return color_1.opacity(a.fillcolor)?W=a.fillcolor:color_1.opacity((a.line||{}).color)&&(W=a.line.color),lib_1.extendFlat(t,{distance:t.maxHoverDistance,x0:N,x1:M,y0:V,y1:V,color:W,hovertemplate:!1}),delete t.index,a.text&&!Array.isArray(a.text)?t.text=String(a.text):t.text=a.name,[t]}}},select$1=function(t,e){var r,n,i,a,o=t.cd,s=t.xaxis,l=t.yaxis,c=[],u=o[0].trace;if(!subtypes.hasMarkers(u)&&!subtypes.hasText(u))return[];if(!1===e)for(r=0;r<o.length;r++)o[r].selected=0;else for(r=0;r<o.length;r++)n=o[r],i=s.c2p(n.x),a=l.c2p(n.y),null!==n.i&&e.contains([i,a],!1,r,t)?(c.push({pointNumber:n.i,x:s.c2d(n.x),y:l.c2d(n.y)}),n.selected=1):n.selected=0;return c},attributes$i={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's x coordinates and","a 2D cartesian x axis.","If *x* (the default value), the x coordinates refer to","`layout.xaxis`.","If *x2*, the x coordinates refer to `layout.xaxis2`, and so on."].join(" ")},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's y coordinates and","a 2D cartesian y axis.","If *y* (the default value), the y coordinates refer to","`layout.yaxis`.","If *y2*, the y coordinates refer to `layout.yaxis2`, and so on."].join(" ")}},traceIs$2=registry.traceIs,type_defaults=function(t,e,r,n){r("autotypenumbers",n.autotypenumbersDflt),"-"===r("type",(n.splomStash||{}).type)&&(setAutoType(e,n.data),"-"===e.type?e.type="linear":t.type=e.type)};function setAutoType(t,e){if("-"===t.type){var r,n=t._id,i=n.charAt(0);-1!==n.indexOf("scene")&&(n=i);var a=getFirstNonEmptyTrace(e,n,i);if(a)if("histogram"!==a.type||i!=={v:"y",h:"x"}[a.orientation||"v"]){var o=i+"calendar",s=a[o],l={noMultiCategory:!traceIs$2(a,"cartesian")||traceIs$2(a,"noMultiCategory")};if("box"===a.type&&a._hasPreCompStats&&i==={h:"x",v:"y"}[a.orientation||"v"]&&(l.noMultiCategory=!0),l.autotypenumbers=t.autotypenumbers,isBoxWithoutPositionCoords(a,i)){var c=getBoxPosLetter(a),u=[];for(r=0;r<e.length;r++){var d=e[r];traceIs$2(d,"box-violin")&&(d[i+"axis"]||i)===n&&(void 0!==d[c]?u.push(d[c][0]):void 0!==d.name?u.push(d.name):u.push("text"),d[o]!==s&&(s=void 0))}t.type=axis_autotype(u,s,l)}else if("splom"===a.type){var h=a.dimensions[a._axesDim[n]];h.visible&&(t.type=axis_autotype(h.values,s,l))}else t.type=axis_autotype(a[i]||[a[i+"0"]],s,l)}else t.type="linear"}}function getFirstNonEmptyTrace(t,e,r){for(var n=0;n<t.length;n++){var i=t[n];if("splom"===i.type&&i._length>0&&(i["_"+r+"axes"]||{})[e])return i;if((i[r+"axis"]||r)===e){if(isBoxWithoutPositionCoords(i,r))return i;if((i[r]||[]).length||i[r+"0"])return i}}}function getBoxPosLetter(t){return{v:"x",h:"y"}[t.orientation||"v"]}function isBoxWithoutPositionCoords(t,e){var r=getBoxPosLetter(t),n=traceIs$2(t,"box-violin"),i=traceIs$2(t._fullInput||{},"candlestick");return n&&!i&&e===r&&void 0===t[r]&&void 0===t[r+"0"]}function findCategories(t,e){var r,n,i,a=e.dataAttr||t._id.charAt(0),o={};if(e.axData)r=e.axData;else for(r=[],n=0;n<e.data.length;n++){var s=e.data[n];s[a+"axis"]===t._id&&r.push(s)}for(n=0;n<r.length;n++){var l=r[n][a];for(i=0;i<l.length;i++){var c=l[i];null!=c&&(o[c]=1)}}return Object.keys(o)}var category_order_defaults=function(t,e,r,n){if("category"===e.type){var i,a=t.categoryarray,o=Array.isArray(a)&&a.length>0;o&&(i="array");var s,l=r("categoryorder",i);"array"===l&&(s=r("categoryarray")),o||"array"!==l||(l=e.categoryorder="trace"),"trace"===l?e._initialCategories=[]:"array"===l?e._initialCategories=s.slice():(s=findCategories(e,n).sort(),"category ascending"===l?e._initialCategories=s:"category descending"===l&&(e._initialCategories=s.reverse()))}},colorMix$1=tinycolor.mix,lightFraction=attributes$q.lightFraction,line_grid_defaults=function(t,e,r,n){var i=(n=n||{}).dfltColor;function a(r,i){return lib_1.coerce2(t,e,n.attributes,r,i)}var o=a("linecolor",i),s=a("linewidth");r("showline",n.showLine||!!o||!!s)||(delete e.linecolor,delete e.linewidth);var l=a("gridcolor",colorMix$1(i,n.bgColor,n.blend||lightFraction).toRgbString()),c=a("gridwidth");if(r("showgrid",n.showGrid||!!l||!!c)||(delete e.gridcolor,delete e.gridwidth),!n.noZeroLine){var u=a("zerolinecolor",i),d=a("zerolinewidth");r("zeroline",n.showGrid||!!u||!!d)||(delete e.zerolinecolor,delete e.zerolinewidth)}},DAY_OF_WEEK=constants$c.WEEKDAY_PATTERN,HOUR=constants$c.HOUR_PATTERN,axis_defaults$1=function(t,e,r,n,i){var a,o=n.letter,s=n.font||{},l=n.splomStash||{},c=r("visible",!n.visibleDflt),u=e._template||{},d=e.type||u.type||"-";"date"===d&&(registry.getComponentMethod("calendars","handleDefaults")(t,e,"calendar",n.calendar),n.noTicklabelmode||(a=r("ticklabelmode")));var h="";n.noTicklabelposition&&"multicategory"!==d||(h=lib_1.coerce(t,e,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===a?["outside","inside"]:"x"===o?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),n.noTicklabeloverflow||r("ticklabeloverflow",-1!==h.indexOf("inside")?"hide past domain":"category"===d||"multicategory"===d?"allow":"hide past div"),set_convert(e,i);var g=!e.isValidRange(t.range);g&&n.reverseDflt&&(g="reversed"),!r("autorange",g)||"linear"!==d&&"-"!==d||r("rangemode"),r("range"),e.cleanRange(),category_order_defaults(t,e,r,n),"category"===d||n.noHover||r("hoverformat");var f=r("color"),p=f!==layout_attributes$3.color.dflt?f:s.color,m=l.label||i._dfltTitle[o];if(prefix_suffix_defaults(t,e,r,d,n),!c)return e;r("title.text",m),lib_1.coerceFont(r,"title.font",{family:s.family,size:lib_1.bigFont(s.size),color:p}),tick_value_defaults(t,e,r,d),tick_label_defaults(t,e,r,d,n),tick_mark_defaults(t,e,r,n),line_grid_defaults(t,e,r,{dfltColor:f,bgColor:n.bgColor,showGrid:n.showGrid,attributes:layout_attributes$3}),(e.showline||e.ticks)&&r("mirror"),n.automargin&&r("automargin");var y,b="multicategory"===d;n.noTickson||"category"!==d&&!b||!e.ticks&&!e.showgrid||(b&&(y="boundaries"),"boundaries"===r("tickson",y)&&delete e.ticklabelposition);b&&(r("showdividers")&&(r("dividercolor"),r("dividerwidth")));if("date"===d)if(array_container_defaults(t,e,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:rangebreaksDefaults}),e.rangebreaks.length){for(var v=0;v<e.rangebreaks.length;v++)if(e.rangebreaks[v].pattern===DAY_OF_WEEK){e._hasDayOfWeekBreaks=!0;break}if(set_convert(e,i),i._has("scattergl")||i._has("splom"))for(var x=0;x<n.data.length;x++){var I=n.data[x];"scattergl"!==I.type&&"splom"!==I.type||(I.visible=!1,lib_1.warn(I.type+" traces do not work on axes with rangebreaks. Setting trace "+I.index+" to `visible: false`."))}}else delete e.rangebreaks;return e};function rangebreaksDefaults(t,e,r){function n(r,n){return lib_1.coerce(t,e,layout_attributes$3.rangebreaks,r,n)}if(n("enabled")){var i=n("bounds");if(i&&i.length>=2){var a,o,s="";if(2===i.length)for(a=0;a<2;a++)if(o=indexOfDay(i[a])){s=DAY_OF_WEEK;break}var l=n("pattern",s);if(l===DAY_OF_WEEK)for(a=0;a<2;a++)(o=indexOfDay(i[a]))&&(e.bounds[a]=i[a]=o-1);if(l)for(a=0;a<2;a++)switch(o=i[a],l){case DAY_OF_WEEK:if(!fastIsnumeric(o))return void(e.enabled=!1);if((o=+o)!==Math.floor(o)||o<0||o>=7)return void(e.enabled=!1);e.bounds[a]=i[a]=o;break;case HOUR:if(!fastIsnumeric(o))return void(e.enabled=!1);if((o=+o)<0||o>24)return void(e.enabled=!1);e.bounds[a]=i[a]=o}if(!1===r.autorange){var c=r.range;if(c[0]<c[1]){if(i[0]<c[0]&&i[1]>c[1])return void(e.enabled=!1)}else if(i[0]>c[0]&&i[1]<c[1])return void(e.enabled=!1)}}else{var u=n("values");if(!u||!u.length)return void(e.enabled=!1);n("dvalue")}}}var dayStrToNum={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function indexOfDay(t){if("string"==typeof t)return dayStrToNum[t.substr(0,3).toLowerCase()]}var position_defaults=function(t,e,r,n){var i,a,o,s,l=n.counterAxes||[],c=n.overlayableAxes||[],u=n.letter,d=n.grid;d&&(a=d._domains[u][d._axisMap[e._id]],i=d._anchors[e._id],a&&(o=d[u+"side"].split(" ")[0],s=d.domain[u]["right"===o||"top"===o?1:0])),a=a||[0,1],i=i||(fastIsnumeric(t.position)?"free":l[0]||"free"),o=o||("x"===u?"bottom":"left"),s=s||0,"free"===lib_1.coerce(t,e,{anchor:{valType:"enumerated",values:["free"].concat(l),dflt:i}},"anchor")&&r("position",s),lib_1.coerce(t,e,{side:{valType:"enumerated",values:"x"===u?["bottom","top"]:["left","right"],dflt:o}},"side");var h=!1;if(c.length&&(h=lib_1.coerce(t,e,{overlaying:{valType:"enumerated",values:[!1].concat(c),dflt:!1}},"overlaying")),!h){var g=r("domain",a);g[0]>g[1]-1/4096&&(e.domain=a),lib_1.noneOrAll(t.domain,e.domain,a)}return r("layer"),e},isUnifiedHover=helpers$a.isUnifiedHover,id2name=axis_ids.id2name,name2id=axis_ids.name2id,AX_ID_PATTERN=constants$c.AX_ID_PATTERN,traceIs$1=registry.traceIs,getComponentMethod=registry.getComponentMethod;function appendList(t,e,r){Array.isArray(t[e])?t[e].push(r):t[e]=[r]}var layout_defaults$1=function(t,e,r){var n,i,a=e.autotypenumbers,o={},s={},l={},c={},u={},d={},h={},g={},f={},p={};for(n=0;n<r.length;n++){var m=r[n];if(traceIs$1(m,"cartesian")||traceIs$1(m,"gl2d")){var y,b;if(m.xaxis)y=id2name(m.xaxis),appendList(o,y,m);else if(m.xaxes)for(i=0;i<m.xaxes.length;i++)appendList(o,id2name(m.xaxes[i]),m);if(m.yaxis)b=id2name(m.yaxis),appendList(o,b,m);else if(m.yaxes)for(i=0;i<m.yaxes.length;i++)appendList(o,id2name(m.yaxes[i]),m);if("funnel"===m.type?"h"===m.orientation?(y&&(s[y]=!0),b&&(h[b]=!0)):b&&(l[b]=!0):"image"===m.type?(b&&(g[b]=!0),y&&(g[y]=!0)):(b&&(u[b]=!0,d[b]=!0),traceIs$1(m,"carpet")&&("carpet"!==m.type||m._cheater)||y&&(c[y]=!0)),"carpet"===m.type&&m._cheater&&y&&(s[y]=!0),traceIs$1(m,"2dMap")&&(f[y]=!0,f[b]=!0),traceIs$1(m,"oriented"))p["h"===m.orientation?b:y]=!0}}var v=e._subplots,x=v.xaxis,I=v.yaxis,B=lib_1.simpleMap(x,id2name),C=lib_1.simpleMap(I,id2name),F=B.concat(C),A=color_1.background;x.length&&I.length&&(A=lib_1.coerce(t,e,layout_attributes$4,"plot_bgcolor"));var Q,_,w,U,S,E=color_1.combine(A,e.paper_bgcolor);function L(){var t=o[Q]||[];S._traceIndices=t.map((function(t){return t._expandedIndex})),S._annIndices=[],S._shapeIndices=[],S._imgIndices=[],S._subplotsWith=[],S._counterAxes=[],S._name=S._attr=Q,S._id=_}function T(t,e){return lib_1.coerce(U,S,layout_attributes$3,t,e)}function R(t,e){return lib_1.coerce2(U,S,layout_attributes$3,t,e)}function k(t){return"x"===t?I:x}function G(e,r){for(var n="x"===e?B:C,i=[],a=0;a<n.length;a++){var o=n[a];o===r||(t[o]||{}).overlaying||i.push(name2id(o))}return i}var N={x:k("x"),y:k("y")},M=N.x.concat(N.y),D={},X=[];function V(){var t=U.matches;AX_ID_PATTERN.test(t)&&-1===M.indexOf(t)&&(D[t]=U.type,X=Object.keys(D))}var W=hovermode_defaults(t,e),Z=isUnifiedHover(W);for(n=0;n<F.length;n++){Q=F[n],_=name2id(Q),w=Q.charAt(0),lib_1.isPlainObject(t[Q])||(t[Q]={}),U=t[Q],S=plot_template.newContainer(e,Q,w+"axis"),L();var O="x"===w&&!c[Q]&&s[Q]||"y"===w&&!u[Q]&&l[Q],$="y"===w&&(!d[Q]&&h[Q]||g[Q]),H={letter:w,font:e.font,outerTicks:f[Q],showGrid:!p[Q],data:o[Q]||[],bgColor:E,calendar:e.calendar,automargin:!0,visibleDflt:O,reverseDflt:$,autotypenumbersDflt:a,splomStash:((e._splomAxes||{})[w]||{})[_]};T("uirevision",e.uirevision),type_defaults(U,S,T,H),axis_defaults$1(U,S,T,H,e);var Y=Z&&w===W.charAt(0),P=R("spikecolor",Z?S.color:void 0),z=R("spikethickness",Z?1.5:void 0),J=R("spikedash",Z?"dot":void 0),j=R("spikemode",Z?"across":void 0),K=R("spikesnap");T("showspikes",!!(Y||P||z||J||j||K))||(delete S.spikecolor,delete S.spikethickness,delete S.spikedash,delete S.spikemode,delete S.spikesnap),position_defaults(U,S,T,{letter:w,counterAxes:N[w],overlayableAxes:G(w,Q),grid:e.grid}),T("title.standoff"),V(),S._input=U}for(n=0;n<X.length;){_=X[n++],w=(Q=id2name(_)).charAt(0),lib_1.isPlainObject(t[Q])||(t[Q]={}),U=t[Q],S=plot_template.newContainer(e,Q,w+"axis"),L();var q={letter:w,font:e.font,outerTicks:f[Q],showGrid:!p[Q],data:[],bgColor:E,calendar:e.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:a,splomStash:((e._splomAxes||{})[w]||{})[_]};T("uirevision",e.uirevision),S.type=D[_]||"linear",axis_defaults$1(U,S,T,q,e),position_defaults(U,S,T,{letter:w,counterAxes:N[w],overlayableAxes:G(w,Q),grid:e.grid}),T("fixedrange"),V(),S._input=U}var tt=getComponentMethod("rangeslider","handleDefaults"),et=getComponentMethod("rangeselector","handleDefaults");for(n=0;n<B.length;n++)Q=B[n],U=t[Q],S=e[Q],tt(t,e,Q),"date"===S.type&&et(U,S,e,C,S.calendar),T("fixedrange");for(n=0;n<C.length;n++){Q=C[n],U=t[Q],S=e[Q];var rt=e[id2name(S.anchor)];T("fixedrange",getComponentMethod("rangeslider","isVisible")(rt))}constraints.handleDefaults(t,e,{axIds:M.concat(X).sort(axis_ids.idSort),axHasImage:g})},transition_axes=function(t,e,r,n){var i=t._fullLayout;if(0!==e.length){var a,o,s,l;n&&(a=n());var c=d3.ease(r.easing);return t._transitionData._interruptCallbacks.push((function(){return window.cancelAnimationFrame(l),l=null,function(){for(var r={},n=0;n<e.length;n++){var i=e[n],a=i.plotinfo.xaxis,o=i.plotinfo.yaxis;i.xr0&&(r[a._name+".range"]=i.xr0.slice()),i.yr0&&(r[o._name+".range"]=i.yr0.slice())}return registry.call("relayout",t,r).then((function(){for(var t=0;t<e.length;t++)u(e[t].plotinfo)}))}()})),o=Date.now(),l=window.requestAnimationFrame((function n(){s=Date.now();for(var i=Math.min(1,(s-o)/r.duration),h=c(i),g=0;g<e.length;g++)d(e[g],h);s-o>r.duration?(!function(){for(var r={},n=0;n<e.length;n++){var i=e[n],o=i.plotinfo.xaxis,s=i.plotinfo.yaxis;i.xr1&&(r[o._name+".range"]=i.xr1.slice()),i.yr1&&(r[s._name+".range"]=i.yr1.slice())}a&&a(),registry.call("relayout",t,r).then((function(){for(var t=0;t<e.length;t++)u(e[t].plotinfo)}))}(),l=window.cancelAnimationFrame(n)):l=window.requestAnimationFrame(n)})),Promise.resolve()}function u(t){var e=t.xaxis,r=t.yaxis;i._defs.select("#"+t.clipId+"> rect").call(drawing_1.setTranslate,0,0).call(drawing_1.setScale,1,1),t.plot.call(drawing_1.setTranslate,e._offset,r._offset).call(drawing_1.setScale,1,1);var n=t.plot.selectAll(".scatterlayer .trace");n.selectAll(".point").call(drawing_1.setPointGroupScale,1,1),n.selectAll(".textpoint").call(drawing_1.setTextPointsScale,1,1),n.call(drawing_1.hideOutsideRangePoints,t)}function d(e,r){var n=e.plotinfo,i=n.xaxis,a=n.yaxis,o=i._length,s=a._length,l=!!e.xr1,c=!!e.yr1,u=[];if(l){var d=lib_1.simpleMap(e.xr0,i.r2l),h=lib_1.simpleMap(e.xr1,i.r2l),g=d[1]-d[0],f=h[1]-h[0];u[0]=(d[0]*(1-r)+r*h[0]-d[0])/(d[1]-d[0])*o,u[2]=o*(1-r+r*f/g),i.range[0]=i.l2r(d[0]*(1-r)+r*h[0]),i.range[1]=i.l2r(d[1]*(1-r)+r*h[1])}else u[0]=0,u[2]=o;if(c){var p=lib_1.simpleMap(e.yr0,a.r2l),m=lib_1.simpleMap(e.yr1,a.r2l),y=p[1]-p[0],b=m[1]-m[0];u[1]=(p[1]*(1-r)+r*m[1]-p[1])/(p[0]-p[1])*s,u[3]=s*(1-r+r*b/y),a.range[0]=i.l2r(p[0]*(1-r)+r*m[0]),a.range[1]=a.l2r(p[1]*(1-r)+r*m[1])}else u[1]=0,u[3]=s;axes_1.drawOne(t,i,{skipTitle:!0}),axes_1.drawOne(t,a,{skipTitle:!0}),axes_1.redrawComponents(t,[i._id,a._id]);var v=l?o/u[2]:1,x=c?s/u[3]:1,I=l?u[0]:0,B=c?u[1]:0,C=l?u[0]/u[2]*o:0,F=c?u[1]/u[3]*s:0,A=i._offset-C,Q=a._offset-F;n.clipRect.call(drawing_1.setTranslate,I,B).call(drawing_1.setScale,1/v,1/x),n.plot.call(drawing_1.setTranslate,A,Q).call(drawing_1.setScale,v,x),drawing_1.setPointGroupScale(n.zoomScalePts,1/v,1/x),drawing_1.setTextPointsScale(n.zoomScaleTxt,1/v,1/x)}axes_1.redrawComponents(t)},getModuleCalcData=get_data.getModuleCalcData,ensureSingle=lib_1.ensureSingle;function ensureSingleAndAddDatum(t,e,r){return lib_1.ensureSingle(t,e,r,(function(t){t.datum(r)}))}var name$5="cartesian",attr=["xaxis","yaxis"],idRoot=["x","y"],idRegex=constants$c.idRegex,attrRegex=constants$c.attrRegex,attributes$h=attributes$i,layoutAttributes=layout_attributes$3,supplyLayoutDefaults=layout_defaults$1,transitionAxes=transition_axes,finalizeSubplots=function(t,e){var r,n,i,a=e._subplots,o=a.xaxis,s=a.yaxis,l=a.cartesian,c=l.concat(a.gl2d||[]),u={},d={};for(r=0;r<c.length;r++){var h=c[r].split("y");u[h[0]]=1,d["y"+h[1]]=1}for(r=0;r<o.length;r++)u[n=o[r]]||(i=(t[axis_ids.id2name(n)]||{}).anchor,constants$c.idRegex.y.test(i)||(i="y"),l.push(n+i),c.push(n+i),d[i]||(d[i]=1,lib_1.pushUnique(s,i)));for(r=0;r<s.length;r++)d[i=s[r]]||(n=(t[axis_ids.id2name(i)]||{}).anchor,constants$c.idRegex.x.test(n)||(n="x"),l.push(n+i),c.push(n+i),u[n]||(u[n]=1,lib_1.pushUnique(o,n)));if(!c.length){for(var g in n="",i="",t){if(constants$c.attrRegex.test(g))"x"===g.charAt(0)?(!n||+g.substr(5)<+n.substr(5))&&(n=g):(!i||+g.substr(5)<+i.substr(5))&&(i=g)}n=n?axis_ids.name2id(n):"x",i=i?axis_ids.name2id(i):"y",o.push(n),s.push(i),l.push(n+i)}},plot$2=function(t,e,r,n){var i,a=t._fullLayout,o=a._subplots.cartesian,s=t.calcdata;if(!Array.isArray(e))for(e=[],i=0;i<s.length;i++)e.push(i);for(i=0;i<o.length;i++){for(var l,c=o[i],u=a._plots[c],d=[],h=0;h<s.length;h++){var g=s[h],f=g[0].trace;f.xaxis+f.yaxis===c&&((-1!==e.indexOf(f.index)||f.carpet)&&(l&&l[0].trace.xaxis+l[0].trace.yaxis===c&&-1!==["tonextx","tonexty","tonext"].indexOf(f.fill)&&-1===d.indexOf(l)&&d.push(l),d.push(g)),l=g)}plotOne(t,u,d,r,n)}};function plotOne(t,e,r,n,i){for(var a,o,s,l=constants$c.traceLayerClasses,c=t._fullLayout,u=c._modules,d=[],h=[],g=0;g<u.length;g++){var f=(a=u[g]).name,p=registry.modules[f].categories;if(p.svg){var m=a.layerName||f+"layer",y=a.plot;s=(o=getModuleCalcData(r,y))[0],r=o[1],s.length&&d.push({i:l.indexOf(m),className:m,plotMethod:y,cdModule:s}),p.zoomScale&&h.push("."+m)}}d.sort((function(t,e){return t.i-e.i}));var b=e.plot.selectAll("g.mlayer").data(d,(function(t){return t.className}));if(b.enter().append("g").attr("class",(function(t){return t.className})).classed("mlayer",!0).classed("rangeplot",e.isRangePlot),b.exit().remove(),b.order(),b.each((function(r){var a=d3.select(this),o=r.className;r.plotMethod(t,e,r.cdModule,a,n,i),-1===constants$c.clipOnAxisFalseQuery.indexOf("."+o)&&drawing_1.setClipUrl(a,e.layerClipId,t)})),c._has("scattergl")&&(a=registry.getModule("scattergl"),s=getModuleCalcData(r,a)[0],a.plot(t,e,s)),!t._context.staticPlot&&(e._hasClipOnAxisFalse&&(e.clipOnAxisFalseTraces=e.plot.selectAll(constants$c.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),h.length)){var v=e.plot.selectAll(h.join(",")).selectAll(".trace");e.zoomScalePts=v.selectAll("path.point"),e.zoomScaleTxt=v.selectAll(".textpoint")}}var clean=function(t,e,r,n){var i,a,o,s=n._plots||{},l=e._plots||{},c=n._subplots||{};if(n._hasOnlyLargeSploms&&!e._hasOnlyLargeSploms)for(o in s)(i=s[o]).plotgroup&&i.plotgroup.remove();var u=n._has&&n._has("gl"),d=e._has&&e._has("gl");if(u&&!d)for(o in s)(i=s[o])._scene&&i._scene.destroy();if(c.xaxis&&c.yaxis){var h=axis_ids.listIds({_fullLayout:n});for(a=0;a<h.length;a++){var g=h[a];e[axis_ids.id2name(g)]||n._infolayer.selectAll(".g-"+g+"title").remove()}}var f=n._has&&n._has("cartesian"),p=e._has&&e._has("cartesian");if(f&&!p)purgeSubplotLayers(n._cartesianlayer.selectAll(".subplot"),n),n._defs.selectAll(".axesclip").remove(),delete n._axisConstraintGroups,delete n._axisMatchGroups;else if(c.cartesian)for(a=0;a<c.cartesian.length;a++){var m=c.cartesian[a];if(!l[m]){var y="."+m+",."+m+"-x,."+m+"-y";n._cartesianlayer.selectAll(y).remove(),removeSubplotExtras(m,n)}}},drawFramework=function(t){var e=t._fullLayout,r=makeSubplotData(t),n=e._cartesianlayer.selectAll(".subplot").data(r,String);n.enter().append("g").attr("class",(function(t){return"subplot "+t[0]})),n.order(),n.exit().call(purgeSubplotLayers,e),n.each((function(r){var n=r[0],i=e._plots[n];i.plotgroup=d3.select(this),makeSubplotLayer(t,i),i.draglayer=ensureSingle(e._draggers,"g",n)}))},rangePlot=function(t,e,r){makeSubplotLayer(t,e),plotOne(t,e,r),plots_1.style(t)};function makeSubplotData(t){var e,r,n,i,a,o,s=t._fullLayout,l=s._subplots.cartesian,c=l.length,u=[],d=[];for(e=0;e<c;e++){n=l[e],a=(i=s._plots[n]).xaxis,o=i.yaxis;var h=a._mainAxis,g=o._mainAxis,f=h._id+g._id,p=s._plots[f];i.overlays=[],f!==n&&p?(i.mainplot=f,i.mainplotinfo=p,d.push(n)):(i.mainplot=void 0,i.mainplotinfo=void 0,u.push(n))}for(e=0;e<d.length;e++)n=d[e],(i=s._plots[n]).mainplotinfo.overlays.push(i);var m=u.concat(d),y=new Array(c);for(e=0;e<c;e++){n=m[e],a=(i=s._plots[n]).xaxis,o=i.yaxis;var b=[n,a.layer,o.layer,a.overlaying||"",o.overlaying||""];for(r=0;r<i.overlays.length;r++)b.push(i.overlays[r].id);y[e]=b}return y}function makeSubplotLayer(t,e){var r=e.plotgroup,n=e.id,i=constants$c.layerValue2layerClass[e.xaxis.layer],a=constants$c.layerValue2layerClass[e.yaxis.layer],o=t._fullLayout._hasOnlyLargeSploms;if(e.mainplot){var s=e.mainplotinfo,l=s.plotgroup,c=n+"-x",u=n+"-y";e.gridlayer=s.gridlayer,e.zerolinelayer=s.zerolinelayer,ensureSingle(s.overlinesBelow,"path",c),ensureSingle(s.overlinesBelow,"path",u),ensureSingle(s.overaxesBelow,"g",c),ensureSingle(s.overaxesBelow,"g",u),e.plot=ensureSingle(s.overplot,"g",n),ensureSingle(s.overlinesAbove,"path",c),ensureSingle(s.overlinesAbove,"path",u),ensureSingle(s.overaxesAbove,"g",c),ensureSingle(s.overaxesAbove,"g",u),e.xlines=l.select(".overlines-"+i).select("."+c),e.ylines=l.select(".overlines-"+a).select("."+u),e.xaxislayer=l.select(".overaxes-"+i).select("."+c),e.yaxislayer=l.select(".overaxes-"+a).select("."+u)}else if(o)e.xlines=ensureSingle(r,"path","xlines-above"),e.ylines=ensureSingle(r,"path","ylines-above"),e.xaxislayer=ensureSingle(r,"g","xaxislayer-above"),e.yaxislayer=ensureSingle(r,"g","yaxislayer-above");else{var d=ensureSingle(r,"g","layer-subplot");e.shapelayer=ensureSingle(d,"g","shapelayer"),e.imagelayer=ensureSingle(d,"g","imagelayer"),e.gridlayer=ensureSingle(r,"g","gridlayer"),e.zerolinelayer=ensureSingle(r,"g","zerolinelayer"),ensureSingle(r,"path","xlines-below"),ensureSingle(r,"path","ylines-below"),e.overlinesBelow=ensureSingle(r,"g","overlines-below"),ensureSingle(r,"g","xaxislayer-below"),ensureSingle(r,"g","yaxislayer-below"),e.overaxesBelow=ensureSingle(r,"g","overaxes-below"),e.plot=ensureSingle(r,"g","plot"),e.overplot=ensureSingle(r,"g","overplot"),e.xlines=ensureSingle(r,"path","xlines-above"),e.ylines=ensureSingle(r,"path","ylines-above"),e.overlinesAbove=ensureSingle(r,"g","overlines-above"),ensureSingle(r,"g","xaxislayer-above"),ensureSingle(r,"g","yaxislayer-above"),e.overaxesAbove=ensureSingle(r,"g","overaxes-above"),e.xlines=r.select(".xlines-"+i),e.ylines=r.select(".ylines-"+a),e.xaxislayer=r.select(".xaxislayer-"+i),e.yaxislayer=r.select(".yaxislayer-"+a)}o||(ensureSingleAndAddDatum(e.gridlayer,"g",e.xaxis._id),ensureSingleAndAddDatum(e.gridlayer,"g",e.yaxis._id),e.gridlayer.selectAll("g").map((function(t){return t[0]})).sort(axis_ids.idSort)),e.xlines.style("fill","none").classed("crisp",!0),e.ylines.style("fill","none").classed("crisp",!0)}function purgeSubplotLayers(t,e){if(t){var r={};for(var n in t.each((function(t){var n=t[0];d3.select(this).remove(),removeSubplotExtras(n,e),r[n]=!0})),e._plots)for(var i=e._plots[n].overlays||[],a=0;a<i.length;a++){var o=i[a];r[o.id]&&o.plot.selectAll(".trace").remove()}}}function removeSubplotExtras(t,e){e._draggers.selectAll("g."+t).remove(),e._defs.select("#clip"+e._uid+t+"plot").remove()}var toSVG=function(t){var e=t._fullLayout._glimages,r=d3.select(t).selectAll(".svg-container"),n=r.filter((function(t,e){return e===r.size()-1})).selectAll(".gl-canvas-context, .gl-canvas-focus");n.each((function(){var t=this,r=t.toDataURL("image/png");e.append("svg:image").attr({xmlns:xmlns_namespaces.svg,"xlink:href":r,preserveAspectRatio:"none",x:0,y:0,width:t.style.width,height:t.style.height})}))},updateFx=graph_interact.updateFx,cartesian={name:name$5,attr:attr,idRoot:idRoot,idRegex:idRegex,attrRegex:attrRegex,attributes:attributes$h,layoutAttributes:layoutAttributes,supplyLayoutDefaults:supplyLayoutDefaults,transitionAxes:transitionAxes,finalizeSubplots:finalizeSubplots,plot:plot$2,clean:clean,drawFramework:drawFramework,rangePlot:rangePlot,toSVG:toSVG,updateFx:updateFx},scatter={hasLines:subtypes.hasLines,hasMarkers:subtypes.hasMarkers,hasText:subtypes.hasText,isBubble:subtypes.isBubble,attributes:attributes$j,supplyDefaults:defaults$g,crossTraceDefaults:cross_trace_defaults$1,calc:calc_1$2.calc,crossTraceCalc:cross_trace_calc$1,arraysToCalcdata:arrays_to_calcdata$1,plot:plot$3,colorbar:marker_colorbar,formatLabels:format_labels,style:style_1$1.style,styleOnSelect:style_1$1.styleOnSelect,hoverPoints:hover$2,selectPoints:select$1,animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:cartesian,categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{description:["The scatter trace type encompasses line charts, scatter charts, text charts, and bubble charts.","The data visualized as scatter point or lines is set in `x` and `y`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}},legend={moduleType:"component",name:"legend",layoutAttributes:attributes$l,supplyLayoutDefaults:defaults$j,draw:draw$a,style:style$3},arrow_paths=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}],strScale=lib_1.strScale,strRotate=lib_1.strRotate,strTranslate$5=lib_1.strTranslate,draw_arrow_head=function(t,e,r){var n,i,a,o,s=t.node(),l=arrow_paths[r.arrowhead||0],c=arrow_paths[r.startarrowhead||0],u=(r.arrowwidth||1)*(r.arrowsize||1),d=(r.arrowwidth||1)*(r.startarrowsize||1),h=e.indexOf("start")>=0,g=e.indexOf("end")>=0,f=l.backoff*u+r.standoff,p=c.backoff*d+r.startstandoff;if("line"===s.nodeName){n={x:+t.attr("x1"),y:+t.attr("y1")},i={x:+t.attr("x2"),y:+t.attr("y2")};var m=n.x-i.x,y=n.y-i.y;if(o=(a=Math.atan2(y,m))+Math.PI,f&&p&&f+p>Math.sqrt(m*m+y*y))return void w();if(f){if(f*f>m*m+y*y)return void w();var b=f*Math.cos(a),v=f*Math.sin(a);i.x+=b,i.y+=v,t.attr({x2:i.x,y2:i.y})}if(p){if(p*p>m*m+y*y)return void w();var x=p*Math.cos(a),I=p*Math.sin(a);n.x-=x,n.y-=I,t.attr({x1:n.x,y1:n.y})}}else if("path"===s.nodeName){var B=s.getTotalLength(),C="";if(B<f+p)return void w();var F=s.getPointAtLength(0),A=s.getPointAtLength(.1);a=Math.atan2(F.y-A.y,F.x-A.x),n=s.getPointAtLength(Math.min(p,B)),C="0px,"+p+"px,";var Q=s.getPointAtLength(B),_=s.getPointAtLength(B-.1);o=Math.atan2(Q.y-_.y,Q.x-_.x),i=s.getPointAtLength(Math.max(0,B-f)),C+=B-(C?p+f:f)+"px,"+B+"px",t.style("stroke-dasharray",C)}function w(){t.style("stroke-dasharray","0px,100px")}function U(e,n,i,a){e.path&&(e.noRotate&&(i=0),d3.select(s.parentNode).append("path").attr({class:t.attr("class"),d:e.path,transform:strTranslate$5(n.x,n.y)+strRotate(180*i/Math.PI)+strScale(a)}).style({fill:color_1.rgb(r.arrowcolor),"stroke-width":0}))}h&&U(c,n,a,d),g&&U(l,i,o,u)},strTranslate$4=lib_1.strTranslate,arrayEditor$3=plot_template.arrayEditor,draw_1$1={draw:draw$8,drawOne:drawOne,drawRaw:drawRaw$1};function draw$8(t){var e=t._fullLayout;e._infolayer.selectAll(".annotation").remove();for(var r=0;r<e.annotations.length;r++)e.annotations[r].visible&&drawOne(t,r);return plots_1.previousPromises(t)}function drawOne(t,e){var r=t._fullLayout.annotations[e]||{},n=axes_1.getFromId(t,r.xref),i=axes_1.getFromId(t,r.yref);n&&n.setScale(),i&&i.setScale(),drawRaw$1(t,r,e,!1,n,i)}function shiftPosition(t,e,r,n,i){var a=i[r],o=i[r+"ref"],s=-1!==r.indexOf("y"),l="domain"===axes_1.getRefType(o),c=s?n.h:n.w;return t?l?a+(s?-e:e)/t._length:t.p2r(t.r2p(a)+e):a+(s?-e:e)/c}function drawRaw$1(t,e,r,n,i,a){var o,s,l=t._fullLayout,c=t._fullLayout._size,u=t._context.edits;n?(o="annotation-"+n,s=n+".annotations"):(o="annotation",s="annotations");var d=arrayEditor$3(t.layout,s,e),h=d.modifyBase,g=d.modifyItem,f=d.getUpdateObj;l._infolayer.selectAll("."+o+'[data-index="'+r+'"]').remove();var p="clip"+l._uid+"_ann"+r;if(e._input&&!1!==e.visible){var m={x:{},y:{}},y=+e.textangle||0,b=l._infolayer.append("g").classed(o,!0).attr("data-index",String(r)).style("opacity",e.opacity),v=b.append("g").classed("annotation-text-g",!0),x=u[e.showarrow?"annotationTail":"annotationPosition"],I=e.captureevents||u.annotationText||x,B=v.append("g").style("pointer-events",I?"all":null).call(setcursor,"pointer").on("click",(function(){t._dragging=!1,t.emit("plotly_clickannotation",L(d3.event))}));e.hovertext&&B.on("mouseover",(function(){var r=e.hoverlabel,n=r.font,i=this.getBoundingClientRect(),a=t.getBoundingClientRect();fx.loneHover({x0:i.left-a.left,x1:i.right-a.left,y:(i.top+i.bottom)/2-a.top,text:e.hovertext,color:r.bgcolor,borderColor:r.bordercolor,fontFamily:n.family,fontSize:n.size,fontColor:n.color},{container:l._hoverlayer.node(),outerContainer:l._paper.node(),gd:t})})).on("mouseout",(function(){fx.loneUnhover(l._hoverlayer.node())}));var C=e.borderwidth,F=e.borderpad,A=C+F,Q=B.append("rect").attr("class","bg").style("stroke-width",C+"px").call(color_1.stroke,e.bordercolor).call(color_1.fill,e.bgcolor),_=e.width||e.height,w=l._topclips.selectAll("#"+p).data(_?[0]:[]);w.enter().append("clipPath").classed("annclip",!0).attr("id",p).append("rect"),w.exit().remove();var U=e.font,S=l._meta?lib_1.templateString(e.text,l._meta):e.text,E=B.append("text").classed("annotation-text",!0).text(S);u.annotationText?E.call(svg_text_utils.makeEditable,{delegate:B,gd:t}).call(T).on("edit",(function(r){e.text=r,this.call(T),g("text",r),i&&i.autorange&&h(i._name+".autorange",!0),a&&a.autorange&&h(a._name+".autorange",!0),registry.call("_guiRelayout",t,f())})):E.call(T)}else d3.selectAll("#"+p).remove();function L(t){var i={index:r,annotation:e._input,fullAnnotation:e,event:t};return n&&(i.subplotId=n),i}function T(r){return r.call(drawing_1.font,U).attr({"text-anchor":{left:"start",right:"end"}[e.align]||"middle"}),svg_text_utils.convertToTspans(r,t,R),r}function R(){var r=E.selectAll("a");1===r.size()&&r.text()===E.text()&&B.insert("a",":first-child").attr({"xlink:xlink:href":r.attr("xlink:href"),"xlink:xlink:show":r.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(Q.node());var o=B.select(".annotation-text-math-group"),s=!o.empty(),d=drawing_1.bBox((s?o:E).node()),I=d.width,F=d.height,U=e.width||I,S=e.height||F,T=Math.round(U+2*A),R=Math.round(S+2*A);function k(t,e){return"auto"===e&&(e=t<1/3?"left":t>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[e]}for(var G=!1,N=["x","y"],M=0;M<N.length;M++){var D,X,V,W,Z,O=N[M],$=e[O+"ref"]||O,H=e["a"+O+"ref"],Y={x:i,y:a}[O],P=(y+("x"===O?0:-90))*Math.PI/180,z=T*Math.cos(P),J=R*Math.sin(P),j=Math.abs(z)+Math.abs(J),K=e[O+"anchor"],q=e[O+"shift"]*("x"===O?1:-1),tt=m[O],et=axes_1.getRefType($);if(Y&&"domain"!==et){var rt=Y.r2fraction(e[O]);(rt<0||rt>1)&&(H===$?((rt=Y.r2fraction(e["a"+O]))<0||rt>1)&&(G=!0):G=!0),D=Y._offset+Y.r2p(e[O]),W=.5}else{var nt="domain"===et;"x"===O?(V=e[O],D=nt?Y._offset+Y._length*V:D=c.l+c.w*V):(V=1-e[O],D=nt?Y._offset+Y._length*V:D=c.t+c.h*V),W=e.showarrow?.5:V}if(e.showarrow){tt.head=D;var it=e["a"+O];if(Z=z*k(.5,e.xanchor)-J*k(.5,e.yanchor),H===$){var at=axes_1.getRefType(H);"domain"===at?("y"===O&&(it=1-it),tt.tail=Y._offset+Y._length*it):"paper"===at?"y"===O?(it=1-it,tt.tail=c.t+c.h*it):tt.tail=c.l+c.w*it:tt.tail=Y._offset+Y.r2p(it),X=Z}else tt.tail=D+it,X=Z+it;tt.text=tt.tail+Z;var ot=l["x"===O?"width":"height"];if("paper"===$&&(tt.head=lib_1.constrain(tt.head,1,ot-1)),"pixel"===H){var st=-Math.max(tt.tail-3,tt.text),lt=Math.min(tt.tail+3,tt.text)-ot;st>0?(tt.tail+=st,tt.text+=st):lt>0&&(tt.tail-=lt,tt.text-=lt)}tt.tail+=q,tt.head+=q}else X=Z=j*k(W,K),tt.text=D+Z;tt.text+=q,Z+=q,X+=q,e["_"+O+"padplus"]=j/2+X,e["_"+O+"padminus"]=j/2-X,e["_"+O+"size"]=j,e["_"+O+"shift"]=Z}if(G)B.remove();else{var ct=0,ut=0;if("left"!==e.align&&(ct=(U-I)*("center"===e.align?.5:1)),"top"!==e.valign&&(ut=(S-F)*("middle"===e.valign?.5:1)),s)o.select("svg").attr({x:A+ct-1,y:A+ut}).call(drawing_1.setClipUrl,_?p:null,t);else{var dt=A+ut-d.top,ht=A+ct-d.left;E.call(svg_text_utils.positionText,ht,dt).call(drawing_1.setClipUrl,_?p:null,t)}w.select("rect").call(drawing_1.setRect,A,A,U,S),Q.call(drawing_1.setRect,C/2,C/2,T-C,R-C),B.call(drawing_1.setTranslate,Math.round(m.x.text-T/2),Math.round(m.y.text-R/2)),v.attr({transform:"rotate("+y+","+m.x.text+","+m.y.text+")"});var gt,ft=function(r,o){b.selectAll(".annotation-arrow-g").remove();var s=m.x.head,l=m.y.head,d=m.x.tail+r,p=m.y.tail+o,x=m.x.text+r,I=m.y.text+o,C=lib_1.rotationXYMatrix(y,x,I),F=lib_1.apply2DTransform(C),A=lib_1.apply2DTransform2(C),_=+Q.attr("width"),w=+Q.attr("height"),U=x-.5*_,S=U+_,E=I-.5*w,L=E+w,T=[[U,E,U,L],[U,L,S,L],[S,L,S,E],[S,E,U,E]].map(A);if(!T.reduce((function(t,e){return t^!!lib_1.segmentsIntersect(s,l,s+1e6,l+1e6,e[0],e[1],e[2],e[3])}),!1)){T.forEach((function(t){var e=lib_1.segmentsIntersect(d,p,s,l,t[0],t[1],t[2],t[3]);e&&(d=e.x,p=e.y)}));var R=e.arrowwidth,k=e.arrowcolor,G=e.arrowside,N=b.append("g").style({opacity:color_1.opacity(k)}).classed("annotation-arrow-g",!0),M=N.append("path").attr("d","M"+d+","+p+"L"+s+","+l).style("stroke-width",R+"px").call(color_1.stroke,color_1.rgb(k));if(draw_arrow_head(M,G,e),u.annotationPosition&&M.node().parentNode&&!n){var D=s,X=l;if(e.standoff){var V=Math.sqrt(Math.pow(s-d,2)+Math.pow(l-p,2));D+=e.standoff*(d-s)/V,X+=e.standoff*(p-l)/V}var W,Z,O=N.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(d-D)+","+(p-X),transform:strTranslate$4(D,X)}).style("stroke-width",R+6+"px").call(color_1.stroke,"rgba(0,0,0,0)").call(color_1.fill,"rgba(0,0,0,0)");dragelement.init({element:O.node(),gd:t,prepFn:function(){var t=drawing_1.getTranslate(B);W=t.x,Z=t.y,i&&i.autorange&&h(i._name+".autorange",!0),a&&a.autorange&&h(a._name+".autorange",!0)},moveFn:function(t,r){var n=F(W,Z),o=n[0]+t,s=n[1]+r;B.call(drawing_1.setTranslate,o,s),g("x",shiftPosition(i,t,"x",c,e)),g("y",shiftPosition(a,r,"y",c,e)),e.axref===e.xref&&g("ax",shiftPosition(i,t,"ax",c,e)),e.ayref===e.yref&&g("ay",shiftPosition(a,r,"ay",c,e)),N.attr("transform",strTranslate$4(t,r)),v.attr({transform:"rotate("+y+","+o+","+s+")"})},doneFn:function(){registry.call("_guiRelayout",t,f());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}}};if(e.showarrow&&ft(0,0),x)dragelement.init({element:B.node(),gd:t,prepFn:function(){gt=v.attr("transform")},moveFn:function(t,r){var o="pointer";if(e.showarrow)e.axref===e.xref?g("ax",shiftPosition(i,t,"ax",c,e)):g("ax",e.ax+t),e.ayref===e.yref?g("ay",shiftPosition(a,r,"ay",c.w,e)):g("ay",e.ay+r),ft(t,r);else{if(n)return;var s,l;if(i)s=shiftPosition(i,t,"x",c,e);else{var u=e._xsize/c.w,d=e.x+(e._xshift-e.xshift)/c.w-u/2;s=dragelement.align(d+t/c.w,u,0,1,e.xanchor)}if(a)l=shiftPosition(a,r,"y",c,e);else{var h=e._ysize/c.h,f=e.y-(e._yshift+e.yshift)/c.h-h/2;l=dragelement.align(f-r/c.h,h,0,1,e.yanchor)}g("x",s),g("y",l),i&&a||(o=dragelement.getCursor(i?.5:s,a?.5:l,e.xanchor,e.yanchor))}v.attr({transform:strTranslate$4(t,r)+gt}),setcursor(B,o)},clickFn:function(r,n){e.captureevents&&t.emit("plotly_clickannotation",L(n))},doneFn:function(){setcursor(B),registry.call("_guiRelayout",t,f());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}}}var arrayEditor$2=plot_template.arrayEditor,click={hasClickToShow:hasClickToShow,onClick:onClick};function hasClickToShow(t,e){var r=getToggleSets(t,e);return r.on.length>0||r.explicitOff.length>0}function onClick(t,e){var r,n,i=getToggleSets(t,e),a=i.on,o=i.off.concat(i.explicitOff),s={},l=t._fullLayout.annotations;if(a.length||o.length){for(r=0;r<a.length;r++)(n=arrayEditor$2(t.layout,"annotations",l[a[r]])).modifyItem("visible",!0),lib_1.extendFlat(s,n.getUpdateObj());for(r=0;r<o.length;r++)(n=arrayEditor$2(t.layout,"annotations",l[o[r]])).modifyItem("visible",!1),lib_1.extendFlat(s,n.getUpdateObj());return registry.call("update",t,{},s)}}function getToggleSets(t,e){var r,n,i,a,o,s,l,c=t._fullLayout.annotations,u=[],d=[],h=[],g=(e||[]).length;for(r=0;r<c.length;r++)if(a=(i=c[r]).clicktoshow){for(n=0;n<g;n++)if(s=(o=e[n]).xaxis,l=o.yaxis,s._id===i.xref&&l._id===i.yref&&s.d2r(o.x)===clickData2r(i._xclick,s)&&l.d2r(o.y)===clickData2r(i._yclick,l)){(i.visible?"onout"===a?d:h:u).push(r);break}n===g&&i.visible&&"onout"===a&&d.push(r)}return{on:u,off:d,explicitOff:h}}function clickData2r(t,e){return"log"===e.type?e.l2r(t):e.d2r(t)}var axis_placeable_objects={axisRefDescription:function(t,e,r){return["If set to a",t,"axis id (e.g. *"+t+"* or","*"+t+"2*), the `"+t+"` position refers to a",t,"coordinate. If set to *paper*, the `"+t+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+r+"). If set to a",t,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+t+"2 domain* refers to the domain of the second",t," axis and a",t,"position of 0.5 refers to the","point between the",e,"and the",r,"of the domain of the","second",t,"axis."].join(" ")}},templatedArray$6=plot_template.templatedArray;function arrowAxisRefDescription(t){return["In order for absolute positioning of the arrow to work, *a"+t+"ref* must be exactly the same as *"+t+"ref*, otherwise *a"+t+"ref* will revert to *pixel* (explained next).","For relative positioning, *a"+t+"ref* can be set to *pixel*,","in which case the *a"+t+"* value is specified in pixels","relative to *"+t+"*.","Absolute positioning is useful","for trendline annotations which should continue to indicate","the correct trend when zoomed. Relative positioning is useful","for specifying the text offset for an annotated point."].join(" ")}function arrowCoordinateDescription(t,e,r){return["Sets the",t,"component of the arrow tail about the arrow head.","If `a"+t+"ref` is `pixel`, a positive (negative)","component corresponds to an arrow pointing","from",r,"to",e,"("+e,"to",r+").","If `a"+t+"ref` is not `pixel` and is exactly the same as `"+t+"ref`,","this is an absolute value on that axis,","like `"+t+"`, specified in the same coordinates as `"+t+"ref`."].join(" ")}var attributes$g=templatedArray$6("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not this annotation is visible."].join(" ")},text:{valType:"string",editType:"calc+arraydraw",description:["Sets the text associated with this annotation.","Plotly uses a subset of HTML tags to do things like","newline (<br>), bold (<b></b>), italics (<i></i>),","hyperlinks (<a href='...'></a>). Tags <em>, <sup>, <sub>","<span> are also supported."].join(" ")},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw",description:["Sets the angle at which the `text` is drawn","with respect to the horizontal."].join(" ")},font:font_attributes({editType:"calc+arraydraw",colorEditType:"arraydraw",description:"Sets the annotation text font."}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw",description:["Sets an explicit width for the text box. null (default) lets the","text set the box width. Wider text will be clipped.","There is no automatic wrapping; use <br> to start a new line."].join(" ")},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw",description:["Sets an explicit height for the text box. null (default) lets the","text set the box height. Taller text will be clipped."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the annotation (text + arrow)."},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw",description:["Sets the horizontal alignment of the `text` within the box.","Has an effect only if `text` spans two or more lines","(i.e. `text` contains one or more <br> HTML tags) or if an","explicit width is set to override the text width."].join(" ")},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw",description:["Sets the vertical alignment of the `text` within the box.","Has an effect only if an explicit height is set to override","the text height."].join(" ")},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:"Sets the background color of the annotation."},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:["Sets the color of the border enclosing the annotation `text`."].join(" ")},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw",description:["Sets the padding (in px) between the `text`","and the enclosing border."].join(" ")},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw",description:["Sets the width (in px) of the border enclosing","the annotation `text`."].join(" ")},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not the annotation is drawn with an arrow.","If *true*, `text` is placed near the arrow's tail.","If *false*, `text` lines up with the `x` and `y` provided."].join(" ")},arrowcolor:{valType:"color",editType:"arraydraw",description:"Sets the color of the annotation arrow."},arrowhead:{valType:"integer",min:0,max:arrow_paths.length,dflt:1,editType:"arraydraw",description:"Sets the end annotation arrow head style."},startarrowhead:{valType:"integer",min:0,max:arrow_paths.length,dflt:1,editType:"arraydraw",description:"Sets the start annotation arrow head style."},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw",description:"Sets the annotation arrow head position."},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw",description:["Sets the size of the end annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw",description:["Sets the size of the start annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw",description:"Sets the width (in px) of annotation arrow line."},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw",description:["Sets a distance, in pixels, to move the end arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw",description:["Sets a distance, in pixels, to move the start arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},ax:{valType:"any",editType:"calc+arraydraw",description:[arrowCoordinateDescription("x","left","right")].join(" ")},ay:{valType:"any",editType:"calc+arraydraw",description:[arrowCoordinateDescription("y","top","bottom")].join(" ")},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",constants$c.idRegex.x.toString()],editType:"calc",description:["Indicates in what coordinates the tail of the","annotation (ax,ay) is specified.",axis_placeable_objects.axisRefDescription("ax","left","right"),arrowAxisRefDescription("x")].join(" ")},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",constants$c.idRegex.y.toString()],editType:"calc",description:["Indicates in what coordinates the tail of the","annotation (ax,ay) is specified.",axis_placeable_objects.axisRefDescription("ay","bottom","top"),arrowAxisRefDescription("y")].join(" ")},xref:{valType:"enumerated",values:["paper",constants$c.idRegex.x.toString()],editType:"calc",description:["Sets the annotation's x coordinate axis.",axis_placeable_objects.axisRefDescription("x","left","right")].join(" ")},x:{valType:"any",editType:"calc+arraydraw",description:["Sets the annotation's x position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the text box's horizontal position anchor","This anchor binds the `x` position to the *left*, *center*","or *right* of the annotation.","For example, if `x` is set to 1, `xref` to *paper* and","`xanchor` to *right* then the right-most portion of the","annotation lines up with the right-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *center* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw",description:["Shifts the position of the whole annotation and arrow to the","right (positive) or left (negative) by this many pixels."].join(" ")},yref:{valType:"enumerated",values:["paper",constants$c.idRegex.y.toString()],editType:"calc",description:["Sets the annotation's y coordinate axis.",axis_placeable_objects.axisRefDescription("y","bottom","top")].join(" ")},y:{valType:"any",editType:"calc+arraydraw",description:["Sets the annotation's y position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the text box's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the annotation.","For example, if `y` is set to 1, `yref` to *paper* and","`yanchor` to *top* then the top-most portion of the","annotation lines up with the top-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *middle* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw",description:["Shifts the position of the whole annotation and arrow up","(positive) or down (negative) by this many pixels."].join(" ")},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw",description:["Makes this annotation respond to clicks on the plot.","If you click a data point that exactly matches the `x` and `y`","values of this annotation, and it is hidden (visible: false),","it will appear. In *onoff* mode, you must click the same point","again to make it disappear, so if you click multiple points,","you can show multiple annotations. In *onout* mode, a click","anywhere else in the plot (on another data point or not) will","hide this annotation.","If you need to show/hide this annotation in response to different","`x` or `y` values, you can set `xclick` and/or `yclick`. This is","useful for example to label the side of a bar. To label markers","though, `standoff` is preferred over `xclick` and `yclick`."].join(" ")},xclick:{valType:"any",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `x` value","is `xclick` rather than the annotation's `x` value."].join(" ")},yclick:{valType:"any",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `y` value","is `yclick` rather than the annotation's `y` value."].join(" ")},hovertext:{valType:"string",editType:"arraydraw",description:["Sets text to appear when hovering over this annotation.","If omitted or blank, no hover label will appear."].join(" ")},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw",description:["Sets the background color of the hover label.","By default uses the annotation's `bgcolor` made opaque,","or white if it was transparent."].join(" ")},bordercolor:{valType:"color",editType:"arraydraw",description:["Sets the border color of the hover label.","By default uses either dark grey or white, for maximum","contrast with `hoverlabel.bgcolor`."].join(" ")},font:font_attributes({editType:"arraydraw",description:["Sets the hover label text font.","By default uses the global hover font and size,","with color from `hoverlabel.bordercolor`."].join(" ")}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw",description:["Determines whether the annotation text box captures mouse move","and click events, or allows those events to pass through to data","points in the plot that may be behind the annotation. By default","`captureevents` is *false* unless `hovertext` is provided.","If you use the event `plotly_clickannotation` without `hovertext`","you must explicitly enable `captureevents`."].join(" ")},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc",description:["Obsolete. Set `xref` and `yref` separately instead."].join(" ")}}}),common_defaults=function(t,e,r,n){n("opacity");var i=n("bgcolor"),a=n("bordercolor"),o=color_1.opacity(a);n("borderpad");var s=n("borderwidth"),l=n("showarrow");if(n("text",l?" ":r._dfltTitle.annotation),n("textangle"),lib_1.coerceFont(n,"font",r.font),n("width"),n("align"),n("height")&&n("valign"),l){var c,u,d=n("arrowside");-1!==d.indexOf("end")&&(c=n("arrowhead"),u=n("arrowsize")),-1!==d.indexOf("start")&&(n("startarrowhead",c),n("startarrowsize",u)),n("arrowcolor",o?e.bordercolor:color_1.defaultLine),n("arrowwidth",2*(o&&s||1)),n("standoff"),n("startstandoff")}var h=n("hovertext"),g=r.hoverlabel||{};if(h){var f=n("hoverlabel.bgcolor",g.bgcolor||(color_1.opacity(i)?color_1.rgb(i):color_1.defaultLine)),p=n("hoverlabel.bordercolor",g.bordercolor||color_1.contrast(f));lib_1.coerceFont(n,"hoverlabel.font",{family:g.font.family,size:g.font.size,color:g.font.color||p})}n("captureevents",!!h)},defaults$f=function(t,e){array_container_defaults(t,e,{name:"annotations",handleItemDefaults:handleAnnotationDefaults$1})};function handleAnnotationDefaults$1(t,e,r){function n(r,n){return lib_1.coerce(t,e,attributes$g,r,n)}var i=n("visible"),a=n("clicktoshow");if(i||a){common_defaults(t,e,r,n);for(var o=e.showarrow,s=["x","y"],l=[-10,-30],c={_fullLayout:r},u=0;u<2;u++){var d=s[u],h=axes_1.coerceRef(t,e,c,d,"","paper");if("paper"!==h)axes_1.getFromId(c,h)._annIndices.push(e._index);if(axes_1.coercePosition(e,c,n,h,d,.5),o){var g="a"+d,f=axes_1.coerceRef(t,e,c,g,"pixel",["pixel","paper"]);"pixel"!==f&&f!==h&&(f=e[g]="pixel");var p="pixel"===f?l[u]:.4;axes_1.coercePosition(e,c,n,f,g,p)}n(d+"anchor"),n(d+"shift")}if(lib_1.noneOrAll(t,e,["x","y"]),o&&lib_1.noneOrAll(t,e,["ax","ay"]),a){var m=n("xclick"),y=n("yclick");e._xclick=void 0===m?e.x:axes_1.cleanPosition(m,c,e.xref),e._yclick=void 0===y?e.y:axes_1.cleanPosition(y,c,e.yref)}}}var include_components=function(t){return function(e,r){var n=e[t];if(Array.isArray(n))for(var i=registry.subplotsRegistry.cartesian,a=i.idRegex,o=r._subplots,s=o.xaxis,l=o.yaxis,c=o.cartesian,u=r._has("cartesian")||r._has("gl2d"),d=0;d<n.length;d++){var h=n[d];if(lib_1.isPlainObject(h)){var g=axis_ids.cleanId(h.xref,"x",!1),f=axis_ids.cleanId(h.yref,"y",!1),p=a.x.test(g),m=a.y.test(f);if(p||m){u||lib_1.pushUnique(r._basePlotModules,i);var y=!1;p&&-1===s.indexOf(g)&&(s.push(g),y=!0),m&&-1===l.indexOf(f)&&(l.push(f),y=!0),y&&p&&m&&c.push(g+f)}}}}},draw$7=draw_1$1.draw,calc_autorange$2=function(t){var e=t._fullLayout;if(lib_1.filterVisible(e.annotations).length&&t._fullData.length)return lib_1.syncOrAsync([draw$7,annAutorange],t)};function annAutorange(t){var e=t._fullLayout;lib_1.filterVisible(e.annotations).forEach((function(e){var r=axes_1.getFromId(t,e.xref),n=axes_1.getFromId(t,e.yref),i=axes_1.getRefType(e.xref),a=axes_1.getRefType(e.yref);e._extremes={},"range"===i&&calcAxisExpansion(e,r),"range"===a&&calcAxisExpansion(e,n)}))}function calcAxisExpansion(t,e){var r,n=e._id,i=n.charAt(0),a=t[i],o=t["a"+i],s=t[i+"ref"],l=t["a"+i+"ref"],c=t["_"+i+"padplus"],u=t["_"+i+"padminus"],d={x:1,y:-1}[i]*t[i+"shift"],h=3*t.arrowsize*t.arrowwidth||0,g=h+d,f=h-d,p=3*t.startarrowsize*t.arrowwidth||0,m=p+d,y=p-d;if(l===s){var b=axes_1.findExtremes(e,[e.r2c(a)],{ppadplus:g,ppadminus:f}),v=axes_1.findExtremes(e,[e.r2c(o)],{ppadplus:Math.max(c,m),ppadminus:Math.max(u,y)});r={min:[b.min[0],v.min[0]],max:[b.max[0],v.max[0]]}}else m=o?m+o:m,y=o?y-o:y,r=axes_1.findExtremes(e,[e.r2c(a)],{ppadplus:Math.max(c,g,m),ppadminus:Math.max(u,f,y)});t._extremes[n]=r}var convert_coords$1=function(t,e,r,n){e=e||{};var i="log"===r&&"linear"===e.type,a="linear"===r&&"log"===e.type;if(i||a)for(var o,s,l=t._fullLayout.annotations,c=e._id.charAt(0),u=0;u<l.length;u++)o=l[u],s="annotations["+u+"].",o[c+"ref"]===e._id&&d(c),o["a"+c+"ref"]===e._id&&d("a"+c);function d(t){var r=o[t],a=null;a=i?to_log_range(r,e.range):Math.pow(10,r),fastIsnumeric(a)||(a=null),n(s+t,a)}},annotations={moduleType:"component",name:"annotations",layoutAttributes:attributes$g,supplyLayoutDefaults:defaults$f,includeBasePlot:include_components("annotations"),calcAutorange:calc_autorange$2,draw:draw_1$1.draw,drawOne:draw_1$1.drawOne,drawRaw:draw_1$1.drawRaw,hasClickToShow:click.hasClickToShow,onClick:click.onClick,convertCoords:convert_coords$1},overrideAll$4=edit_types.overrideAll,templatedArray$5=plot_template.templatedArray,attributes$f=overrideAll$4(templatedArray$5("annotation",{visible:attributes$g.visible,x:{valType:"any",description:["Sets the annotation's x position."].join(" ")},y:{valType:"any",description:["Sets the annotation's y position."].join(" ")},z:{valType:"any",description:["Sets the annotation's z position."].join(" ")},ax:{valType:"number",description:["Sets the x component of the arrow tail about the arrow head (in pixels)."].join(" ")},ay:{valType:"number",description:["Sets the y component of the arrow tail about the arrow head (in pixels)."].join(" ")},xanchor:attributes$g.xanchor,xshift:attributes$g.xshift,yanchor:attributes$g.yanchor,yshift:attributes$g.yshift,text:attributes$g.text,textangle:attributes$g.textangle,font:attributes$g.font,width:attributes$g.width,height:attributes$g.height,opacity:attributes$g.opacity,align:attributes$g.align,valign:attributes$g.valign,bgcolor:attributes$g.bgcolor,bordercolor:attributes$g.bordercolor,borderpad:attributes$g.borderpad,borderwidth:attributes$g.borderwidth,showarrow:attributes$g.showarrow,arrowcolor:attributes$g.arrowcolor,arrowhead:attributes$g.arrowhead,startarrowhead:attributes$g.startarrowhead,arrowside:attributes$g.arrowside,arrowsize:attributes$g.arrowsize,startarrowsize:attributes$g.startarrowsize,arrowwidth:attributes$g.arrowwidth,standoff:attributes$g.standoff,startstandoff:attributes$g.startstandoff,hovertext:attributes$g.hovertext,hoverlabel:attributes$g.hoverlabel,captureevents:attributes$g.captureevents}),"calc","from-root"),defaults$e=function(t,e,r){array_container_defaults(t,e,{name:"annotations",handleItemDefaults:handleAnnotationDefaults,fullLayout:r.fullLayout})};function handleAnnotationDefaults(t,e,r,n){function i(r,n){return lib_1.coerce(t,e,attributes$f,r,n)}function a(t){var n=t+"axis",a={_fullLayout:{}};return a._fullLayout[n]=r[n],axes_1.coercePosition(e,a,i,t,t,.5)}i("visible")&&(common_defaults(t,e,n.fullLayout,i),a("x"),a("y"),a("z"),lib_1.noneOrAll(t,e,["x","y","z"]),e.xref="x",e.yref="y",e.zref="z",i("xanchor"),i("yanchor"),i("xshift"),i("yshift"),e.showarrow&&(e.axref="pixel",e.ayref="pixel",i("ax",-10),i("ay",-30),lib_1.noneOrAll(t,e,["ax","ay"])))}var convert$3=function(t){for(var e=t.fullSceneLayout.annotations,r=0;r<e.length;r++)mockAnnAxes(e[r],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function mockAnnAxes(t,e){var r=e.fullSceneLayout.domain,n=e.fullLayout._size,i={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};t._xa={},lib_1.extendFlat(t._xa,i),axes_1.setConvert(t._xa),t._xa._offset=n.l+r.x[0]*n.w,t._xa.l2p=function(){return.5*(1+t._pdata[0]/t._pdata[3])*n.w*(r.x[1]-r.x[0])},t._ya={},lib_1.extendFlat(t._ya,i),axes_1.setConvert(t._ya),t._ya._offset=n.t+(1-r.y[1])*n.h,t._ya.l2p=function(){return.5*(1-t._pdata[1]/t._pdata[3])*n.h*(r.y[1]-r.y[0])}}function xformMatrix(t,e){var r,n,i=[0,0,0,0];for(r=0;r<4;++r)for(n=0;n<4;++n)i[n]+=t[4*r+n]*e[r];return i}function project(t,e){return xformMatrix(t.projection,xformMatrix(t.view,xformMatrix(t.model,[e[0],e[1],e[2],1])))}var project_1=project,drawRaw=draw_1$1.drawRaw,axLetters=["x","y","z"],draw$6=function(t){for(var e=t.fullSceneLayout,r=t.dataScale,n=e.annotations,i=0;i<n.length;i++){for(var a=n[i],o=!1,s=0;s<3;s++){var l=axLetters[s],c=a[l],u=e[l+"axis"].r2fraction(c);if(u<0||u>1){o=!0;break}}o?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+i+'"]').remove():(a._pdata=project_1(t.glplot.cameraParams,[e.xaxis.r2l(a.x)*r[0],e.yaxis.r2l(a.y)*r[1],e.zaxis.r2l(a.z)*r[2]]),drawRaw(t.graphDiv,a,i,t.id,a._xa,a._ya))}},annotations3d={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:attributes$f}}},layoutAttributes:attributes$f,handleDefaults:defaults$e,includeBasePlot:includeGL3D,convert:convert$3,draw:draw$6};function includeGL3D(t,e){var r=registry.subplotsRegistry.gl3d;if(r)for(var n=r.attrRegex,i=Object.keys(t),a=0;a<i.length;a++){var o=i[a];n.test(o)&&(t[o].annotations||[]).length&&(lib_1.pushUnique(e._basePlotModules,r),lib_1.pushUnique(e._subplots.gl3d,o))}}var scatterLineAttrs=attributes$j.line,dash=attributes$p.dash,extendFlat$9=extend.extendFlat,templatedArray$4=plot_template.templatedArray,attributes$e=templatedArray$4("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not this shape is visible."].join(" ")},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw",description:["Specifies the shape type to be drawn.","If *line*, a line is drawn from (`x0`,`y0`) to (`x1`,`y1`)","with respect to the axes' sizing mode.","If *circle*, a circle is drawn from","((`x0`+`x1`)/2, (`y0`+`y1`)/2))","with radius","(|(`x0`+`x1`)/2 - `x0`|, |(`y0`+`y1`)/2 -`y0`)|)","with respect to the axes' sizing mode.","If *rect*, a rectangle is drawn linking","(`x0`,`y0`), (`x1`,`y0`), (`x1`,`y1`), (`x0`,`y1`), (`x0`,`y0`)","with respect to the axes' sizing mode.","If *path*, draw a custom SVG path using `path`.","with respect to the axes' sizing mode."].join(" ")},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw",description:"Specifies whether shapes are drawn below or above traces."},xref:extendFlat$9({},attributes$g.xref,{description:["Sets the shape's x coordinate axis.",axis_placeable_objects.axisRefDescription("x","left","right"),"If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, then you must convert","the date to unix time in milliseconds."].join(" ")}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw",description:["Sets the shapes's sizing mode along the x axis.","If set to *scaled*, `x0`, `x1` and x coordinates within `path` refer to","data values on the x axis or a fraction of the plot area's width","(`xref` set to *paper*).","If set to *pixel*, `xanchor` specifies the x position in terms","of data or plot fraction but `x0`, `x1` and x coordinates within `path`","are pixels relative to `xanchor`. This way, the shape can have","a fixed width while maintaining a position relative to data or","plot fraction."].join(" ")},xanchor:{valType:"any",editType:"calc+arraydraw",description:["Only relevant in conjunction with `xsizemode` set to *pixel*.","Specifies the anchor point on the x axis to which `x0`, `x1`","and x coordinates within `path` are relative to.","E.g. useful to attach a pixel sized shape to a certain data value.","No effect when `xsizemode` not set to *pixel*."].join(" ")},x0:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's starting x position.","See `type` and `xsizemode` for more info."].join(" ")},x1:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's end x position.","See `type` and `xsizemode` for more info."].join(" ")},yref:extendFlat$9({},attributes$g.yref,{description:["Sets the annotation's y coordinate axis.",axis_placeable_objects.axisRefDescription("y","bottom","top")].join(" ")}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw",description:["Sets the shapes's sizing mode along the y axis.","If set to *scaled*, `y0`, `y1` and y coordinates within `path` refer to","data values on the y axis or a fraction of the plot area's height","(`yref` set to *paper*).","If set to *pixel*, `yanchor` specifies the y position in terms","of data or plot fraction but `y0`, `y1` and y coordinates within `path`","are pixels relative to `yanchor`. This way, the shape can have","a fixed height while maintaining a position relative to data or","plot fraction."].join(" ")},yanchor:{valType:"any",editType:"calc+arraydraw",description:["Only relevant in conjunction with `ysizemode` set to *pixel*.","Specifies the anchor point on the y axis to which `y0`, `y1`","and y coordinates within `path` are relative to.","E.g. useful to attach a pixel sized shape to a certain data value.","No effect when `ysizemode` not set to *pixel*."].join(" ")},y0:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's starting y position.","See `type` and `ysizemode` for more info."].join(" ")},y1:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's end y position.","See `type` and `ysizemode` for more info."].join(" ")},path:{valType:"string",editType:"calc+arraydraw",description:["For `type` *path* - a valid SVG path with the pixel values","replaced by data values in `xsizemode`/`ysizemode` being *scaled*","and taken unmodified as pixels relative to `xanchor` and `yanchor`","in case of *pixel* size mode.","There are a few restrictions / quirks","only absolute instructions, not relative. So the allowed segments","are: M, L, H, V, Q, C, T, S, and Z","arcs (A) are not allowed because radius rx and ry are relative.","In the future we could consider supporting relative commands,","but we would have to decide on how to handle date and log axes.","Note that even as is, Q and C Bezier paths that are smooth on","linear axes may not be smooth on log, and vice versa.",'no chained "polybezier" commands - specify the segment type for',"each one.","On category axes, values are numbers scaled to the serial numbers","of categories because using the categories themselves there would","be no way to describe fractional positions","On data axes: because space and T are both normal components of path","strings, we can't use either to separate date from time parts.","Therefore we'll use underscore for this purpose:","2015-02-21_13:45:56.789"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the shape."},line:{color:extendFlat$9({},scatterLineAttrs.color,{editType:"arraydraw"}),width:extendFlat$9({},scatterLineAttrs.width,{editType:"calc+arraydraw"}),dash:extendFlat$9({},dash,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:["Sets the color filling the shape's interior. Only applies to closed shapes."].join(" ")},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw",description:["Determines which regions of complex paths constitute the interior.","For more info please visit https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule"].join(" ")},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw",description:["Determines whether the shape could be activated for edit or not.","Has no effect when the older editable shapes mode is enabled via","`config.editable` or `config.edits.shapePosition`."].join(" ")},editType:"arraydraw"}),defaults$d=function(t,e){array_container_defaults(t,e,{name:"shapes",handleItemDefaults:handleShapeDefaults})};function handleShapeDefaults(t,e,r){function n(r,n){return lib_1.coerce(t,e,attributes$e,r,n)}if(n("visible")){var i=n("path"),a=n("type",i?"path":"rect");"path"!==e.type&&delete e.path,n("editable"),n("layer"),n("opacity"),n("fillcolor"),n("fillrule"),n("line.width")&&(n("line.color"),n("line.dash"));for(var o=n("xsizemode"),s=n("ysizemode"),l=["x","y"],c=0;c<2;c++){var u,d,h,g=l[c],f=g+"anchor",p="x"===g?o:s,m={_fullLayout:r},y=axes_1.coerceRef(t,e,m,g,void 0,"paper");if("range"===axes_1.getRefType(y)?((u=axes_1.getFromId(m,y))._shapeIndices.push(e._index),h=helpers$4.rangeToShapePosition(u),d=helpers$4.shapePositionToRange(u)):d=h=lib_1.identity,"path"!==a){var b=g+"0",v=g+"1",x=t[b],I=t[v];t[b]=d(t[b],!0),t[v]=d(t[v],!0),"pixel"===p?(n(b,0),n(v,10)):(axes_1.coercePosition(e,m,n,y,b,.25),axes_1.coercePosition(e,m,n,y,v,.75)),e[b]=h(e[b]),e[v]=h(e[v]),t[b]=x,t[v]=I}if("pixel"===p){var B=t[f];t[f]=d(t[f],!0),axes_1.coercePosition(e,m,n,y,f,.25),e[f]=h(e[f]),t[f]=B}}"path"===a?n("path"):lib_1.noneOrAll(t,e,["x0","x1","y0","y1"])}}var defaults$c=function(t,e,r){if(r("newshape.drawdirection"),r("newshape.layer"),r("newshape.fillcolor"),r("newshape.fillrule"),r("newshape.opacity"),r("newshape.line.width")){var n=(t||{}).plot_bgcolor||"#FFF";r("newshape.line.color",color_1.contrast(n)),r("newshape.line.dash")}r("activeshape.fillcolor"),r("activeshape.opacity")},calc_autorange$1=function(t){var e=t._fullLayout,r=lib_1.filterVisible(e.shapes);if(r.length&&t._fullData.length)for(var n=0;n<r.length;n++){var i,a,o=r[n];o._extremes={};var s=axes_1.getRefType(o.xref),l=axes_1.getRefType(o.yref);if("paper"!==o.xref&&"domain"!==s){var c="pixel"===o.xsizemode?o.xanchor:o.x0,u="pixel"===o.xsizemode?o.xanchor:o.x1;(a=shapeBounds(i=axes_1.getFromId(t,o.xref),c,u,o.path,constants$9.paramIsX))&&(o._extremes[i._id]=axes_1.findExtremes(i,a,calcXPaddingOptions(o)))}if("paper"!==o.yref&&"domain"!==l){var d="pixel"===o.ysizemode?o.yanchor:o.y0,h="pixel"===o.ysizemode?o.yanchor:o.y1;(a=shapeBounds(i=axes_1.getFromId(t,o.yref),d,h,o.path,constants$9.paramIsY))&&(o._extremes[i._id]=axes_1.findExtremes(i,a,calcYPaddingOptions(o)))}}};function calcXPaddingOptions(t){return calcPaddingOptions(t.line.width,t.xsizemode,t.x0,t.x1,t.path,!1)}function calcYPaddingOptions(t){return calcPaddingOptions(t.line.width,t.ysizemode,t.y0,t.y1,t.path,!0)}function calcPaddingOptions(t,e,r,n,i,a){var o=t/2,s=a;if("pixel"===e){var l=i?helpers$4.extractPathCoords(i,a?constants$9.paramIsY:constants$9.paramIsX):[r,n],c=lib_1.aggNums(Math.max,null,l),u=lib_1.aggNums(Math.min,null,l),d=u<0?Math.abs(u)+o:o,h=c>0?c+o:o;return{ppad:o,ppadplus:s?d:h,ppadminus:s?h:d}}return{ppad:o}}function shapeBounds(t,e,r,n,i){var a="category"===t.type||"multicategory"===t.type?t.r2c:t.d2c;if(void 0!==e)return[a(e),a(r)];if(n){var o,s,l,c,u=1/0,d=-1/0,h=n.match(constants$9.segmentRE);for("date"===t.type&&(a=helpers$4.decodeDate(a)),o=0;o<h.length;o++)void 0!==(s=i[h[o].charAt(0)].drawn)&&(!(l=h[o].substr(1).match(constants$9.paramRE))||l.length<s||((c=a(l[s]))<u&&(u=c),c>d&&(d=c)));return d>=u?[u,d]:void 0}}var shapes={moduleType:"component",name:"shapes",layoutAttributes:attributes$e,supplyLayoutDefaults:defaults$d,supplyDrawNewShapeDefaults:defaults$c,includeBasePlot:include_components("shapes"),calcAutorange:calc_autorange$1,draw:draw_1$2.draw,drawOne:draw_1$2.drawOne},templatedArray$3=plot_template.templatedArray,attributes$d=templatedArray$3("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw",description:["Determines whether or not this image is visible."].join(" ")},source:{valType:"string",editType:"arraydraw",description:["Specifies the URL of the image to be used.","The URL must be accessible from the domain where the","plot code is run, and can be either relative or absolute."].join(" ")},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw",description:["Specifies whether images are drawn below or above traces.","When `xref` and `yref` are both set to `paper`,","image is drawn below the entire plot area."].join(" ")},sizex:{valType:"number",dflt:0,editType:"arraydraw",description:["Sets the image container size horizontally.","The image will be sized based on the `position` value.","When `xref` is set to `paper`, units are sized relative","to the plot width.","When `xref` ends with ` domain`, units are sized relative","to the axis width."].join(" ")},sizey:{valType:"number",dflt:0,editType:"arraydraw",description:["Sets the image container size vertically.","The image will be sized based on the `position` value.","When `yref` is set to `paper`, units are sized relative","to the plot height.","When `yref` ends with ` domain`, units are sized relative","to the axis height."].join(" ")},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw",description:["Specifies which dimension of the image to constrain."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the image."},x:{valType:"any",dflt:0,editType:"arraydraw",description:["Sets the image's x position.","When `xref` is set to `paper`, units are sized relative","to the plot height.","See `xref` for more info"].join(" ")},y:{valType:"any",dflt:0,editType:"arraydraw",description:["Sets the image's y position.","When `yref` is set to `paper`, units are sized relative","to the plot height.","See `yref` for more info"].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw",description:"Sets the anchor for the x position"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw",description:"Sets the anchor for the y position."},xref:{valType:"enumerated",values:["paper",constants$c.idRegex.x.toString()],dflt:"paper",editType:"arraydraw",description:["Sets the images's x coordinate axis.",axis_placeable_objects.axisRefDescription("x","left","right")].join(" ")},yref:{valType:"enumerated",values:["paper",constants$c.idRegex.y.toString()],dflt:"paper",editType:"arraydraw",description:["Sets the images's y coordinate axis.",axis_placeable_objects.axisRefDescription("y","bottom","top")].join(" ")},editType:"arraydraw"}),name$4="images",defaults$b=function(t,e){array_container_defaults(t,e,{name:name$4,handleItemDefaults:imageDefaults})};function imageDefaults(t,e,r){function n(r,n){return lib_1.coerce(t,e,attributes$d,r,n)}var i=n("source");if(!n("visible",!!i))return e;n("layer"),n("xanchor"),n("yanchor"),n("sizex"),n("sizey"),n("sizing"),n("opacity");for(var a={_fullLayout:r},o=["x","y"],s=0;s<2;s++){var l=o[s],c=axes_1.coerceRef(t,e,a,l,"paper",void 0);if("paper"!==c)axes_1.getFromId(a,c)._imgIndices.push(e._index);axes_1.coercePosition(e,a,n,c,l,0)}return e}var draw$5=function(t){var e,r,n=t._fullLayout,i=[],a={},o=[];for(r=0;r<n.images.length;r++){var s=n.images[r];if(s.visible)if("below"===s.layer&&"paper"!==s.xref&&"paper"!==s.yref){e=axis_ids.ref2id(s.xref)+axis_ids.ref2id(s.yref);var l=n._plots[e];if(!l){o.push(s);continue}l.mainplot&&(e=l.mainplot.id),a[e]||(a[e]=[]),a[e].push(s)}else"above"===s.layer?i.push(s):o.push(s)}var c={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},u={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function d(e){var r=d3.select(this);if(this._imgSrc!==e.source)if(r.attr("xmlns",xmlns_namespaces.svg),e.source&&"data:"===e.source.slice(0,5))r.attr("xlink:href",e.source),this._imgSrc=e.source;else{var n=new Promise(function(t){var n=new Image;function i(){r.remove(),t()}this.img=n,n.setAttribute("crossOrigin","anonymous"),n.onerror=i,n.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,e.getContext("2d").drawImage(this,0,0);var n=e.toDataURL("image/png");r.attr("xlink:href",n),t()},r.on("error",i),n.src=e.source,this._imgSrc=e.source}.bind(this));t._promises.push(n)}}function h(e){var r,i,a=d3.select(this),o=axes_1.getFromId(t,e.xref),s=axes_1.getFromId(t,e.yref),l="domain"===axes_1.getRefType(e.xref),d="domain"===axes_1.getRefType(e.yref),h=n._size;r=void 0!==o?"string"==typeof e.xref&&l?o._length*e.sizex:Math.abs(o.l2p(e.sizex)-o.l2p(0)):e.sizex*h.w,i=void 0!==s?"string"==typeof e.yref&&d?s._length*e.sizey:Math.abs(s.l2p(e.sizey)-s.l2p(0)):e.sizey*h.h;var g,f,p=r*c[e.xanchor].offset,m=i*u[e.yanchor].offset,y=c[e.xanchor].sizing+u[e.yanchor].sizing;switch(g=void 0!==o?"string"==typeof e.xref&&l?o._length*e.x+o._offset:o.r2p(e.x)+o._offset:e.x*h.w+h.l,g+=p,f=void 0!==s?"string"==typeof e.yref&&d?s._length*(1-e.y)+s._offset:s.r2p(e.y)+s._offset:h.h-e.y*h.h+h.t,f+=m,e.sizing){case"fill":y+=" slice";break;case"stretch":y="none"}a.attr({x:g,y:f,width:r,height:i,preserveAspectRatio:y,opacity:e.opacity});var b=(o&&"domain"!==axes_1.getRefType(e.xref)?o._id:"")+(s&&"domain"!==axes_1.getRefType(e.yref)?s._id:"");drawing_1.setClipUrl(a,b?"clip"+n._uid+b:null,t)}var g=n._imageLowerLayer.selectAll("image").data(o),f=n._imageUpperLayer.selectAll("image").data(i);g.enter().append("image"),f.enter().append("image"),g.exit().remove(),f.exit().remove(),g.each((function(t){d.bind(this)(t),h.bind(this)(t)})),f.each((function(t){d.bind(this)(t),h.bind(this)(t)}));var p=Object.keys(n._plots);for(r=0;r<p.length;r++){e=p[r];var m=n._plots[e];if(m.imagelayer){var y=m.imagelayer.selectAll("image").data(a[e]||[]);y.enter().append("image"),y.exit().remove(),y.each((function(t){d.bind(this)(t),h.bind(this)(t)}))}}},convert_coords=function(t,e,r,n){e=e||{};var i="log"===r&&"linear"===e.type,a="linear"===r&&"log"===e.type;if(i||a)for(var o,s,l=t._fullLayout.images,c=e._id.charAt(0),u=0;u<l.length;u++)if(s="images["+u+"].",(o=l[u])[c+"ref"]===e._id){var d=o[c],h=o["size"+c],g=null,f=null;if(i){g=to_log_range(d,e.range);var p=h/Math.pow(10,g)/2;f=2*Math.log(p+Math.sqrt(1+p*p))/Math.LN10}else f=(g=Math.pow(10,d))*(Math.pow(10,h/2)-Math.pow(10,-h/2));fastIsnumeric(g)?fastIsnumeric(f)||(f=null):(g=null,f=null),n(s+c,g),n(s+"size"+c,f)}},images={moduleType:"component",name:"images",layoutAttributes:attributes$d,supplyLayoutDefaults:defaults$b,includeBasePlot:include_components("images"),draw:draw$5,convertCoords:convert_coords},constants$6={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"â",right:"âº",up:"â²",down:"â¼"}},extendFlat$8=extend.extendFlat,overrideAll$3=edit_types.overrideAll,templatedArray$2=plot_template.templatedArray,buttonsAttrs=templatedArray$2("button",{visible:{valType:"boolean",description:"Determines whether or not this button is visible."},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",description:["Sets the Plotly method to be called on click.","If the `skip` method is used, the API updatemenu will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","updatemenu events manually via JavaScript."].join(" ")},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on click."].join(" ")},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets a 2nd set of `args`,","these arguments values are passed to the Plotly","method set in `method` when clicking this button while in the active state.","Use this to create toggle buttons."].join(" ")},label:{valType:"string",dflt:"",description:"Sets the text label to appear on the button."},execute:{valType:"boolean",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_buttonclicked` method and executing the API command manually without losing","the benefit of the updatemenu automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}}),attributes$c=overrideAll$3(templatedArray$2("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean",description:["Determines whether or not the update menu is visible."].join(" ")},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown",description:["Determines whether the buttons are accessible via a dropdown menu","or whether the buttons are stacked horizontally or vertically"].join(" ")},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down",description:["Determines the direction in which the buttons are laid out, whether","in a dropdown menu or a row/column of buttons. For `left` and `up`,","the buttons will still appear in left-to-right or top-to-bottom order","respectively."].join(" ")},active:{valType:"integer",min:-1,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},showactive:{valType:"boolean",dflt:!0,description:"Highlights active dropdown item or active button if true."},buttons:buttonsAttrs,x:{valType:"number",min:-2,max:3,dflt:-.05,description:"Sets the x position (in normalized coordinates) of the update menu."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right",description:["Sets the update menu's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:1,description:"Sets the y position (in normalized coordinates) of the update menu."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",description:["Sets the update menu's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},pad:extendFlat$8(pad_attributes({editType:"arraydraw"}),{description:"Sets the padding around the buttons or dropdown menu."}),font:font_attributes({description:"Sets the font of the update menu button text."}),bgcolor:{valType:"color",description:"Sets the background color of the update menu buttons."},bordercolor:{valType:"color",dflt:attributes$q.borderLine,description:"Sets the color of the border enclosing the update menu."},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw",description:"Sets the width (in px) of the border enclosing the update menu."}}),"arraydraw","from-root"),name$3=constants$6.name,buttonAttrs$1=attributes$c.buttons,defaults$a=function(t,e){array_container_defaults(t,e,{name:name$3,handleItemDefaults:menuDefaults})};function menuDefaults(t,e,r){function n(r,n){return lib_1.coerce(t,e,attributes$c,r,n)}n("visible",array_container_defaults(t,e,{name:"buttons",handleItemDefaults:buttonDefaults$1}).length>0)&&(n("active"),n("direction"),n("type"),n("showactive"),n("x"),n("y"),lib_1.noneOrAll(t,e,["x","y"]),n("xanchor"),n("yanchor"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),lib_1.coerceFont(n,"font",r.font),n("bgcolor",r.paper_bgcolor),n("bordercolor"),n("borderwidth"))}function buttonDefaults$1(t,e){function r(r,n){return lib_1.coerce(t,e,buttonAttrs$1,r,n)}r("visible","skip"===t.method||Array.isArray(t.args))&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}var scrollbox=ScrollBox;function ScrollBox(t,e,r){this.gd=t,this.container=e,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}ScrollBox.barWidth=2,ScrollBox.barLength=20,ScrollBox.barRadius=2,ScrollBox.barPad=1,ScrollBox.barColor="#808BA4",ScrollBox.prototype.enable=function(t,e,r){var n=this.gd._fullLayout,i=n.width,a=n.height;this.position=t;var o,s,l,c,u=this.position.l,d=this.position.w,h=this.position.t,g=this.position.h,f=this.position.direction,p="down"===f,m="left"===f,y="up"===f,b=d,v=g;p||m||"right"===f||y||(this.position.direction="down",p=!0),p||y?(s=(o=u)+b,p?(l=h,v=(c=Math.min(l+v,a))-l):v=(c=h+v)-(l=Math.max(c-v,0))):(c=(l=h)+v,m?b=(s=u+b)-(o=Math.max(s-b,0)):(o=u,b=(s=Math.min(o+b,i))-o)),this._box={l:o,t:l,w:b,h:v};var x=d>b,I=ScrollBox.barLength+2*ScrollBox.barPad,B=ScrollBox.barWidth+2*ScrollBox.barPad,C=u,F=h+g;F+B>a&&(F=a-B);var A=this.container.selectAll("rect.scrollbar-horizontal").data(x?[0]:[]);A.exit().on(".drag",null).remove(),A.enter().append("rect").classed("scrollbar-horizontal",!0).call(color_1.fill,ScrollBox.barColor),x?(this.hbar=A.attr({rx:ScrollBox.barRadius,ry:ScrollBox.barRadius,x:C,y:F,width:I,height:B}),this._hbarXMin=C+I/2,this._hbarTranslateMax=b-I):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var Q=g>v,_=ScrollBox.barWidth+2*ScrollBox.barPad,w=ScrollBox.barLength+2*ScrollBox.barPad,U=u+d,S=h;U+_>i&&(U=i-_);var E=this.container.selectAll("rect.scrollbar-vertical").data(Q?[0]:[]);E.exit().on(".drag",null).remove(),E.enter().append("rect").classed("scrollbar-vertical",!0).call(color_1.fill,ScrollBox.barColor),Q?(this.vbar=E.attr({rx:ScrollBox.barRadius,ry:ScrollBox.barRadius,x:U,y:S,width:_,height:w}),this._vbarYMin=S+w/2,this._vbarTranslateMax=v-w):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var L=this.id,T=o-.5,R=Q?s+_+.5:s+.5,k=l-.5,G=x?c+B+.5:c+.5,N=n._topdefs.selectAll("#"+L).data(x||Q?[0]:[]);if(N.exit().remove(),N.enter().append("clipPath").attr("id",L).append("rect"),x||Q?(this._clipRect=N.select("rect").attr({x:Math.floor(T),y:Math.floor(k),width:Math.ceil(R)-Math.floor(T),height:Math.ceil(G)-Math.floor(k)}),this.container.call(drawing_1.setClipUrl,L,this.gd),this.bg.attr({x:u,y:h,width:d,height:g})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(drawing_1.setClipUrl,null),delete this._clipRect),x||Q){var M=d3.behavior.drag().on("dragstart",(function(){d3.event.sourceEvent.preventDefault()})).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(M);var D=d3.behavior.drag().on("dragstart",(function(){d3.event.sourceEvent.preventDefault(),d3.event.sourceEvent.stopPropagation()})).on("drag",this._onBarDrag.bind(this));x&&this.hbar.on(".drag",null).call(D),Q&&this.vbar.on(".drag",null).call(D)}this.setTranslate(e,r)},ScrollBox.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(drawing_1.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},ScrollBox.prototype._onBoxDrag=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t-=d3.event.dx),this.vbar&&(e-=d3.event.dy),this.setTranslate(t,e)},ScrollBox.prototype._onBoxWheel=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t+=d3.event.deltaY),this.vbar&&(e+=d3.event.deltaY),this.setTranslate(t,e)},ScrollBox.prototype._onBarDrag=function(){var t=this.translateX,e=this.translateY;if(this.hbar){var r=t+this._hbarXMin,n=r+this._hbarTranslateMax;t=(lib_1.constrain(d3.event.x,r,n)-r)/(n-r)*(this.position.w-this._box.w)}if(this.vbar){var i=e+this._vbarYMin,a=i+this._vbarTranslateMax;e=(lib_1.constrain(d3.event.y,i,a)-i)/(a-i)*(this.position.h-this._box.h)}this.setTranslate(t,e)},ScrollBox.prototype.setTranslate=function(t,e){var r=this.position.w-this._box.w,n=this.position.h-this._box.h;if(t=lib_1.constrain(t||0,0,r),e=lib_1.constrain(e||0,0,n),this.translateX=t,this.translateY=e,this.container.call(drawing_1.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-e),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+e-.5)}),this.hbar){var i=t/r;this.hbar.call(drawing_1.setTranslate,t+i*this._hbarTranslateMax,e)}if(this.vbar){var a=e/n;this.vbar.call(drawing_1.setTranslate,t,e+a*this._vbarTranslateMax)}};var arrayEditor$1=plot_template.arrayEditor,LINE_SPACING$4=alignment.LINE_SPACING,draw$4=function(t){var e=t._fullLayout,r=lib_1.filterVisible(e[constants$6.name]);function n(e){plots_1.autoMargin(t,autoMarginId$1(e))}var i=e._menulayer.selectAll("g."+constants$6.containerClassName).data(r.length>0?[0]:[]);if(i.enter().append("g").classed(constants$6.containerClassName,!0).style("cursor","pointer"),i.exit().each((function(){d3.select(this).selectAll("g."+constants$6.headerGroupClassName).each(n)})).remove(),0!==r.length){var a=i.selectAll("g."+constants$6.headerGroupClassName).data(r,keyFunction$1);a.enter().append("g").classed(constants$6.headerGroupClassName,!0);for(var o=lib_1.ensureSingle(i,"g",constants$6.dropdownButtonGroupClassName,(function(t){t.style("pointer-events","all")})),s=0;s<r.length;s++){var l=r[s];findDimensions$1(t,l)}var c="updatemenus"+e._uid,u=new scrollbox(t,o,c);a.enter().size()&&(o.node().parentNode.appendChild(o.node()),o.call(removeAllButtons)),a.exit().each((function(t){o.call(removeAllButtons),n(t)})).remove(),a.each((function(e){var r=d3.select(this),n="dropdown"===e.type?o:null;plots_1.manageCommandObserver(t,e,e.buttons,(function(i){setActive$1(t,e,e.buttons[i.index],r,n,u,i.index,!0)})),"dropdown"===e.type?(drawHeader(t,r,o,u,e),isActive$1(o,e)&&drawButtons(t,r,o,u,e)):drawButtons(t,r,null,null,e)}))}};function keyFunction$1(t){return t._index}function isFolded(t){return-1==+t.attr(constants$6.menuIndexAttrName)}function isActive$1(t,e){return+t.attr(constants$6.menuIndexAttrName)===e._index}function setActive$1(t,e,r,n,i,a,o,s){e.active=o,arrayEditor$1(t.layout,constants$6.name,e).applyUpdate("active",o),"buttons"===e.type?drawButtons(t,n,null,null,e):"dropdown"===e.type&&(i.attr(constants$6.menuIndexAttrName,"-1"),drawHeader(t,n,i,a,e),s||drawButtons(t,n,i,a,e))}function drawHeader(t,e,r,n,i){var a=lib_1.ensureSingle(e,"g",constants$6.headerClassName,(function(t){t.style("pointer-events","all")})),o=i._dims,s=i.active,l=i.buttons[s]||constants$6.blankHeaderOpts,c={y:i.pad.t,yPad:0,x:i.pad.l,xPad:0,index:0},u={width:o.headerWidth,height:o.headerHeight};a.call(drawItem,i,l,t).call(setItemPosition,i,c,u);var d=lib_1.ensureSingle(e,"text",constants$6.headerArrowClassName,(function(t){t.attr("text-anchor","end").call(drawing_1.font,i.font).text(constants$6.arrowSymbol[i.direction])}));d.attr({x:o.headerWidth-constants$6.arrowOffsetX+i.pad.l,y:o.headerHeight/2+constants$6.textOffsetY+i.pad.t}),a.on("click",(function(){r.call(removeAllButtons,String(isActive$1(r,i)?-1:i._index)),drawButtons(t,e,r,n,i)})),a.on("mouseover",(function(){a.call(styleOnMouseOver)})),a.on("mouseout",(function(){a.call(styleOnMouseOut,i)})),drawing_1.setTranslate(e,o.lx,o.ly)}function drawButtons(t,e,r,n,i){r||(r=e).attr("pointer-events","all");var a=isFolded(r)&&"buttons"!==i.type?[]:i.buttons,o="dropdown"===i.type?constants$6.dropdownButtonClassName:constants$6.buttonClassName,s=r.selectAll("g."+o).data(lib_1.filterVisible(a)),l=s.enter().append("g").classed(o,!0),c=s.exit();"dropdown"===i.type?(l.attr("opacity","0").transition().attr("opacity","1"),c.transition().attr("opacity","0").remove()):c.remove();var u=0,d=0,h=i._dims,g=-1!==["up","down"].indexOf(i.direction);"dropdown"===i.type&&(g?d=h.headerHeight+constants$6.gapButtonHeader:u=h.headerWidth+constants$6.gapButtonHeader),"dropdown"===i.type&&"up"===i.direction&&(d=-constants$6.gapButtonHeader+constants$6.gapButton-h.openHeight),"dropdown"===i.type&&"left"===i.direction&&(u=-constants$6.gapButtonHeader+constants$6.gapButton-h.openWidth);var f={x:h.lx+u+i.pad.l,y:h.ly+d+i.pad.t,yPad:constants$6.gapButton,xPad:constants$6.gapButton,index:0},p={l:f.x+i.borderwidth,t:f.y+i.borderwidth};s.each((function(a,o){var l=d3.select(this);l.call(drawItem,i,a,t).call(setItemPosition,i,f),l.on("click",(function(){d3.event.defaultPrevented||(a.execute&&(a.args2&&i.active===o?(setActive$1(t,i,a,e,r,n,-1),plots_1.executeAPICommand(t,a.method,a.args2)):(setActive$1(t,i,a,e,r,n,o),plots_1.executeAPICommand(t,a.method,a.args))),t.emit("plotly_buttonclicked",{menu:i,button:a,active:i.active}))})),l.on("mouseover",(function(){l.call(styleOnMouseOver)})),l.on("mouseout",(function(){l.call(styleOnMouseOut,i),s.call(styleButtons,i)}))})),s.call(styleButtons,i),g?(p.w=Math.max(h.openWidth,h.headerWidth),p.h=f.y-p.t):(p.w=f.x-p.l,p.h=Math.max(h.openHeight,h.headerHeight)),p.direction=i.direction,n&&(s.size()?drawScrollBox(t,e,r,n,i,p):hideScrollBox(n))}function drawScrollBox(t,e,r,n,i,a){var o,s,l,c=i.direction,u="up"===c||"down"===c,d=i._dims,h=i.active;if(u)for(s=0,l=0;l<h;l++)s+=d.heights[l]+constants$6.gapButton;else for(o=0,l=0;l<h;l++)o+=d.widths[l]+constants$6.gapButton;n.enable(a,o,s),n.hbar&&n.hbar.attr("opacity","0").transition().attr("opacity","1"),n.vbar&&n.vbar.attr("opacity","0").transition().attr("opacity","1")}function hideScrollBox(t){var e=!!t.hbar,r=!!t.vbar;e&&t.hbar.transition().attr("opacity","0").each("end",(function(){e=!1,r||t.disable()})),r&&t.vbar.transition().attr("opacity","0").each("end",(function(){r=!1,e||t.disable()}))}function drawItem(t,e,r,n){t.call(drawItemRect,e).call(drawItemText,e,r,n)}function drawItemRect(t,e){var r=lib_1.ensureSingle(t,"rect",constants$6.itemRectClassName,(function(t){t.attr({rx:constants$6.rx,ry:constants$6.ry,"shape-rendering":"crispEdges"})}));r.call(color_1.stroke,e.bordercolor).call(color_1.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px")}function drawItemText(t,e,r,n){var i=lib_1.ensureSingle(t,"text",constants$6.itemTextClassName,(function(t){t.attr({"text-anchor":"start","data-notex":1})})),a=r.label,o=n._fullLayout._meta;o&&(a=lib_1.templateString(a,o)),i.call(drawing_1.font,e.font).text(a).call(svg_text_utils.convertToTspans,n)}function styleButtons(t,e){var r=e.active;t.each((function(t,n){var i=d3.select(this);n===r&&e.showactive&&i.select("rect."+constants$6.itemRectClassName).call(color_1.fill,constants$6.activeColor)}))}function styleOnMouseOver(t){t.select("rect."+constants$6.itemRectClassName).call(color_1.fill,constants$6.hoverColor)}function styleOnMouseOut(t,e){t.select("rect."+constants$6.itemRectClassName).call(color_1.fill,e.bgcolor)}function findDimensions$1(t,e){var r=e._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},n=drawing_1.tester.selectAll("g."+constants$6.dropdownButtonClassName).data(lib_1.filterVisible(e.buttons));n.enter().append("g").classed(constants$6.dropdownButtonClassName,!0);var i=-1!==["up","down"].indexOf(e.direction);n.each((function(n,a){var o=d3.select(this);o.call(drawItem,e,n,t);var s=o.select("."+constants$6.itemTextClassName),l=s.node()&&drawing_1.bBox(s.node()).width,c=Math.max(l+constants$6.textPadX,constants$6.minWidth),u=e.font.size*LINE_SPACING$4,d=svg_text_utils.lineCount(s),h=Math.max(u*d,constants$6.minHeight)+constants$6.textOffsetY;h=Math.ceil(h),c=Math.ceil(c),r.widths[a]=c,r.heights[a]=h,r.height1=Math.max(r.height1,h),r.width1=Math.max(r.width1,c),i?(r.totalWidth=Math.max(r.totalWidth,c),r.openWidth=r.totalWidth,r.totalHeight+=h+constants$6.gapButton,r.openHeight+=h+constants$6.gapButton):(r.totalWidth+=c+constants$6.gapButton,r.openWidth+=c+constants$6.gapButton,r.totalHeight=Math.max(r.totalHeight,h),r.openHeight=r.totalHeight)})),i?r.totalHeight-=constants$6.gapButton:r.totalWidth-=constants$6.gapButton,r.headerWidth=r.width1+constants$6.arrowPadX,r.headerHeight=r.height1,"dropdown"===e.type&&(i?(r.width1+=constants$6.arrowPadX,r.totalHeight=r.height1):r.totalWidth=r.width1,r.totalWidth+=constants$6.arrowPadX),n.remove();var a=r.totalWidth+e.pad.l+e.pad.r,o=r.totalHeight+e.pad.t+e.pad.b,s=t._fullLayout._size;r.lx=s.l+s.w*e.x,r.ly=s.t+s.h*(1-e.y);var l="left";lib_1.isRightAnchor(e)&&(r.lx-=a,l="right"),lib_1.isCenterAnchor(e)&&(r.lx-=a/2,l="center");var c="top";lib_1.isBottomAnchor(e)&&(r.ly-=o,c="bottom"),lib_1.isMiddleAnchor(e)&&(r.ly-=o/2,c="middle"),r.totalWidth=Math.ceil(r.totalWidth),r.totalHeight=Math.ceil(r.totalHeight),r.lx=Math.round(r.lx),r.ly=Math.round(r.ly),plots_1.autoMargin(t,autoMarginId$1(e),{x:e.x,y:e.y,l:a*({right:1,center:.5}[l]||0),r:a*({left:1,center:.5}[l]||0),b:o*({top:1,middle:.5}[c]||0),t:o*({bottom:1,middle:.5}[c]||0)})}function autoMarginId$1(t){return constants$6.autoMarginIdRoot+t._index}function setItemPosition(t,e,r,n){n=n||{};var i=t.select("."+constants$6.itemRectClassName),a=t.select("."+constants$6.itemTextClassName),o=e.borderwidth,s=r.index,l=e._dims;drawing_1.setTranslate(t,o+r.x,o+r.y);var c=-1!==["up","down"].indexOf(e.direction),u=n.height||(c?l.heights[s]:l.height1);i.attr({x:0,y:0,width:n.width||(c?l.width1:l.widths[s]),height:u});var d=e.font.size*LINE_SPACING$4,h=(svg_text_utils.lineCount(a)-1)*d/2;svg_text_utils.positionText(a,constants$6.textOffsetX,u/2-h+constants$6.textOffsetY),c?r.y+=l.heights[s]+r.yPad:r.x+=l.widths[s]+r.xPad,r.index++}function removeAllButtons(t,e){t.attr(constants$6.menuIndexAttrName,e||"-1").selectAll("g."+constants$6.dropdownButtonClassName).remove()}var updatemenus={moduleType:"component",name:constants$6.name,layoutAttributes:attributes$c,supplyLayoutDefaults:defaults$a,draw:draw$4},constants$5={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0},extendDeepAll=extend.extendDeepAll,overrideAll$2=edit_types.overrideAll,templatedArray$1=plot_template.templatedArray,stepsAttrs=templatedArray$1("step",{visible:{valType:"boolean",dflt:!0,description:["Determines whether or not this step is included in the slider."].join(" ")},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",description:["Sets the Plotly method to be called when the slider value is changed.","If the `skip` method is used, the API slider will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","slider events manually via JavaScript."].join(" ")},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on slide."].join(" ")},label:{valType:"string",description:"Sets the text label to appear on the slider"},value:{valType:"string",description:["Sets the value of the slider step, used to refer to the step programatically.","Defaults to the slider label if not provided."].join(" ")},execute:{valType:"boolean",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_sliderchange` method and executing the API command manually without losing","the benefit of the slider automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}}),attributes$b=overrideAll$2(templatedArray$1("slider",{visible:{valType:"boolean",dflt:!0,description:["Determines whether or not the slider is visible."].join(" ")},active:{valType:"number",min:0,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},steps:stepsAttrs,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction",description:["Determines whether this slider length","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,description:["Sets the length of the slider","This measure excludes the padding of both ends.","That is, the slider's length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",min:-2,max:3,dflt:0,description:"Sets the x position (in normalized coordinates) of the slider."},pad:extendDeepAll(pad_attributes({editType:"arraydraw"}),{description:"Set the padding of the slider component along each side."},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",description:["Sets the slider's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:0,description:"Sets the y position (in normalized coordinates) of the slider."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",description:["Sets the slider's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},transition:{duration:{valType:"number",min:0,dflt:150,description:"Sets the duration of the slider transition"},easing:{valType:"enumerated",values:animation_attributes.transition.easing.values,dflt:"cubic-in-out",description:"Sets the easing function of the slider transition"}},currentvalue:{visible:{valType:"boolean",dflt:!0,description:["Shows the currently-selected value above the slider."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",description:["The alignment of the value readout relative to the length of the slider."].join(" ")},offset:{valType:"number",dflt:10,description:["The amount of space, in pixels, between the current value label","and the slider."].join(" ")},prefix:{valType:"string",description:"When currentvalue.visible is true, this sets the prefix of the label."},suffix:{valType:"string",description:"When currentvalue.visible is true, this sets the suffix of the label."},font:font_attributes({description:"Sets the font of the current value label text."})},font:font_attributes({description:"Sets the font of the slider step labels."}),activebgcolor:{valType:"color",dflt:constants$5.gripBgActiveColor,description:["Sets the background color of the slider grip","while dragging."].join(" ")},bgcolor:{valType:"color",dflt:constants$5.railBgColor,description:"Sets the background color of the slider."},bordercolor:{valType:"color",dflt:constants$5.railBorderColor,description:"Sets the color of the border enclosing the slider."},borderwidth:{valType:"number",min:0,dflt:constants$5.railBorderWidth,description:"Sets the width (in px) of the border enclosing the slider."},ticklen:{valType:"number",min:0,dflt:constants$5.tickLength,description:"Sets the length in pixels of step tick marks"},tickcolor:{valType:"color",dflt:constants$5.tickColor,description:"Sets the color of the border enclosing the slider."},tickwidth:{valType:"number",min:0,dflt:1,description:"Sets the tick width (in px)."},minorticklen:{valType:"number",min:0,dflt:constants$5.minorTickLength,description:"Sets the length in pixels of minor step tick marks"}}),"arraydraw","from-root"),name$2=constants$5.name,stepAttrs=attributes$b.steps,defaults$9=function(t,e){array_container_defaults(t,e,{name:name$2,handleItemDefaults:sliderDefaults})};function sliderDefaults(t,e,r){function n(r,n){return lib_1.coerce(t,e,attributes$b,r,n)}for(var i=array_container_defaults(t,e,{name:"steps",handleItemDefaults:stepDefaults}),a=0,o=0;o<i.length;o++)i[o].visible&&a++;if(a<2?e.visible=!1:n("visible")){e._stepCount=a;var s=e._visibleSteps=lib_1.filterVisible(i);(i[n("active")]||{}).visible||(e.active=s[0]._index),n("x"),n("y"),lib_1.noneOrAll(t,e,["x","y"]),n("xanchor"),n("yanchor"),n("len"),n("lenmode"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),lib_1.coerceFont(n,"font",r.font),n("currentvalue.visible")&&(n("currentvalue.xanchor"),n("currentvalue.prefix"),n("currentvalue.suffix"),n("currentvalue.offset"),lib_1.coerceFont(n,"currentvalue.font",e.font)),n("transition.duration"),n("transition.easing"),n("bgcolor"),n("activebgcolor"),n("bordercolor"),n("borderwidth"),n("ticklen"),n("tickwidth"),n("tickcolor"),n("minorticklen")}}function stepDefaults(t,e){function r(r,n){return lib_1.coerce(t,e,stepAttrs,r,n)}if("skip"===t.method||Array.isArray(t.args)?r("visible"):e.visible=!1){r("method"),r("args");var n=r("label","step-"+e._index);r("value",n),r("execute")}}var strTranslate$3=lib_1.strTranslate,arrayEditor=plot_template.arrayEditor,LINE_SPACING$3=alignment.LINE_SPACING,FROM_TL$2=alignment.FROM_TL,FROM_BR$2=alignment.FROM_BR,draw$3=function(t){var e=t._fullLayout,r=makeSliderData(e,t),n=e._infolayer.selectAll("g."+constants$5.containerClassName).data(r.length>0?[0]:[]);function i(e){e._commandObserver&&(e._commandObserver.remove(),delete e._commandObserver),plots_1.autoMargin(t,autoMarginId(e))}if(n.enter().append("g").classed(constants$5.containerClassName,!0).style("cursor","ew-resize"),n.exit().each((function(){d3.select(this).selectAll("g."+constants$5.groupClassName).each(i)})).remove(),0!==r.length){var a=n.selectAll("g."+constants$5.groupClassName).data(r,keyFunction);a.enter().append("g").classed(constants$5.groupClassName,!0),a.exit().each(i).remove();for(var o=0;o<r.length;o++){var s=r[o];findDimensions(t,s)}a.each((function(e){var r=d3.select(this);computeLabelSteps(e),plots_1.manageCommandObserver(t,e,e._visibleSteps,(function(e){var n=r.data()[0];n.active!==e.index&&(n._dragging||setActive(t,r,n,e.index,!1,!0))})),drawSlider(t,d3.select(this),e)}))}};function autoMarginId(t){return constants$5.autoMarginIdRoot+t._index}function makeSliderData(t,e){for(var r=t[constants$5.name],n=[],i=0;i<r.length;i++){var a=r[i];a.visible&&(a._gd=e,n.push(a))}return n}function keyFunction(t){return t._index}function findDimensions(t,e){var r=drawing_1.tester.selectAll("g."+constants$5.labelGroupClass).data(e._visibleSteps);r.enter().append("g").classed(constants$5.labelGroupClass,!0);var n=0,i=0;r.each((function(t){var r=drawLabel(d3.select(this),{step:t},e).node();if(r){var a=drawing_1.bBox(r);i=Math.max(i,a.height),n=Math.max(n,a.width)}})),r.remove();var a=e._dims={};a.inputAreaWidth=Math.max(constants$5.railWidth,constants$5.gripHeight);var o=t._fullLayout._size;a.lx=o.l+o.w*e.x,a.ly=o.t+o.h*(1-e.y),"fraction"===e.lenmode?a.outerLength=Math.round(o.w*e.len):a.outerLength=e.len,a.inputAreaStart=0,a.inputAreaLength=Math.round(a.outerLength-e.pad.l-e.pad.r);var s=(a.inputAreaLength-2*constants$5.stepInset)/(e._stepCount-1),l=n+constants$5.labelPadding;if(a.labelStride=Math.max(1,Math.ceil(l/s)),a.labelHeight=i,a.currentValueMaxWidth=0,a.currentValueHeight=0,a.currentValueTotalHeight=0,a.currentValueMaxLines=1,e.currentvalue.visible){var c=drawing_1.tester.append("g");r.each((function(t){var r=drawCurrentValue(c,e,t.label),n=r.node()&&drawing_1.bBox(r.node())||{width:0,height:0},i=svg_text_utils.lineCount(r);a.currentValueMaxWidth=Math.max(a.currentValueMaxWidth,Math.ceil(n.width)),a.currentValueHeight=Math.max(a.currentValueHeight,Math.ceil(n.height)),a.currentValueMaxLines=Math.max(a.currentValueMaxLines,i)})),a.currentValueTotalHeight=a.currentValueHeight+e.currentvalue.offset,c.remove()}a.height=a.currentValueTotalHeight+constants$5.tickOffset+e.ticklen+constants$5.labelOffset+a.labelHeight+e.pad.t+e.pad.b;var u="left";lib_1.isRightAnchor(e)&&(a.lx-=a.outerLength,u="right"),lib_1.isCenterAnchor(e)&&(a.lx-=a.outerLength/2,u="center");var d="top";lib_1.isBottomAnchor(e)&&(a.ly-=a.height,d="bottom"),lib_1.isMiddleAnchor(e)&&(a.ly-=a.height/2,d="middle"),a.outerLength=Math.ceil(a.outerLength),a.height=Math.ceil(a.height),a.lx=Math.round(a.lx),a.ly=Math.round(a.ly);var h={y:e.y,b:a.height*FROM_BR$2[d],t:a.height*FROM_TL$2[d]};"fraction"===e.lenmode?(h.l=0,h.xl=e.x-e.len*FROM_TL$2[u],h.r=0,h.xr=e.x+e.len*FROM_BR$2[u]):(h.x=e.x,h.l=a.outerLength*FROM_TL$2[u],h.r=a.outerLength*FROM_BR$2[u]),plots_1.autoMargin(t,autoMarginId(e),h)}function drawSlider(t,e,r){(r.steps[r.active]||{}).visible||(r.active=r._visibleSteps[0]._index),e.call(drawCurrentValue,r).call(drawRail,r).call(drawLabelGroup,r).call(drawTicks,r).call(drawTouchRect,t,r).call(drawGrip,t,r);var n=r._dims;drawing_1.setTranslate(e,n.lx+r.pad.l,n.ly+r.pad.t),e.call(setGripPosition,r,!1),e.call(drawCurrentValue,r)}function drawCurrentValue(t,e,r){if(e.currentvalue.visible){var n,i,a=e._dims;switch(e.currentvalue.xanchor){case"right":n=a.inputAreaLength-constants$5.currentValueInset-a.currentValueMaxWidth,i="left";break;case"center":n=.5*a.inputAreaLength,i="middle";break;default:n=constants$5.currentValueInset,i="left"}var o=lib_1.ensureSingle(t,"text",constants$5.labelClass,(function(t){t.attr({"text-anchor":i,"data-notex":1})})),s=e.currentvalue.prefix?e.currentvalue.prefix:"";if("string"==typeof r)s+=r;else{var l=e.steps[e.active].label,c=e._gd._fullLayout._meta;c&&(l=lib_1.templateString(l,c)),s+=l}e.currentvalue.suffix&&(s+=e.currentvalue.suffix),o.call(drawing_1.font,e.currentvalue.font).text(s).call(svg_text_utils.convertToTspans,e._gd);var u=svg_text_utils.lineCount(o),d=(a.currentValueMaxLines+1-u)*e.currentvalue.font.size*LINE_SPACING$3;return svg_text_utils.positionText(o,n,d),o}}function drawGrip(t,e,r){var n=lib_1.ensureSingle(t,"rect",constants$5.gripRectClass,(function(n){n.call(attachGripEvents,e,t,r).style("pointer-events","all")}));n.attr({width:constants$5.gripWidth,height:constants$5.gripHeight,rx:constants$5.gripRadius,ry:constants$5.gripRadius}).call(color_1.stroke,r.bordercolor).call(color_1.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function drawLabel(t,e,r){var n=lib_1.ensureSingle(t,"text",constants$5.labelClass,(function(t){t.attr({"text-anchor":"middle","data-notex":1})})),i=e.step.label,a=r._gd._fullLayout._meta;return a&&(i=lib_1.templateString(i,a)),n.call(drawing_1.font,r.font).text(i).call(svg_text_utils.convertToTspans,r._gd),n}function drawLabelGroup(t,e){var r=lib_1.ensureSingle(t,"g",constants$5.labelsClass),n=e._dims,i=r.selectAll("g."+constants$5.labelGroupClass).data(n.labelSteps);i.enter().append("g").classed(constants$5.labelGroupClass,!0),i.exit().remove(),i.each((function(t){var r=d3.select(this);r.call(drawLabel,t,e),drawing_1.setTranslate(r,normalizedValueToPosition(e,t.fraction),constants$5.tickOffset+e.ticklen+e.font.size*LINE_SPACING$3+constants$5.labelOffset+n.currentValueTotalHeight)}))}function handleInput(t,e,r,n,i){var a=Math.round(n*(r._stepCount-1)),o=r._visibleSteps[a]._index;o!==r.active&&setActive(t,e,r,o,!0,i)}function setActive(t,e,r,n,i,a){var o=r.active;r.active=n,arrayEditor(t.layout,constants$5.name,r).applyUpdate("active",n);var s=r.steps[r.active];e.call(setGripPosition,r,a),e.call(drawCurrentValue,r),t.emit("plotly_sliderchange",{slider:r,step:r.steps[r.active],interaction:i,previousActive:o}),s&&s.method&&i&&(e._nextMethod?(e._nextMethod.step=s,e._nextMethod.doCallback=i,e._nextMethod.doTransition=a):(e._nextMethod={step:s,doCallback:i,doTransition:a},e._nextMethodRaf=window.requestAnimationFrame((function(){var r=e._nextMethod.step;r.method&&(r.execute&&plots_1.executeAPICommand(t,r.method,r.args),e._nextMethod=null,e._nextMethodRaf=null)}))))}function attachGripEvents(t,e,r){var n=r.node(),i=d3.select(e);function a(){return r.data()[0]}function o(){var t=a();e.emit("plotly_sliderstart",{slider:t});var o=r.select("."+constants$5.gripRectClass);d3.event.stopPropagation(),d3.event.preventDefault(),o.call(color_1.fill,t.activebgcolor);var s=positionToNormalizedValue(t,d3.mouse(n)[0]);function l(){var t=a(),i=positionToNormalizedValue(t,d3.mouse(n)[0]);handleInput(e,r,t,i,!1)}function c(){var t=a();t._dragging=!1,o.call(color_1.fill,t.bgcolor),i.on("mouseup",null),i.on("mousemove",null),i.on("touchend",null),i.on("touchmove",null),e.emit("plotly_sliderend",{slider:t,step:t.steps[t.active]})}handleInput(e,r,t,s,!0),t._dragging=!0,i.on("mousemove",l),i.on("touchmove",l),i.on("mouseup",c),i.on("touchend",c)}t.on("mousedown",o),t.on("touchstart",o)}function drawTicks(t,e){var r=t.selectAll("rect."+constants$5.tickRectClass).data(e._visibleSteps),n=e._dims;r.enter().append("rect").classed(constants$5.tickRectClass,!0),r.exit().remove(),r.attr({width:e.tickwidth+"px","shape-rendering":"crispEdges"}),r.each((function(t,r){var i=r%n.labelStride==0,a=d3.select(this);a.attr({height:i?e.ticklen:e.minorticklen}).call(color_1.fill,e.tickcolor),drawing_1.setTranslate(a,normalizedValueToPosition(e,r/(e._stepCount-1))-.5*e.tickwidth,(i?constants$5.tickOffset:constants$5.minorTickOffset)+n.currentValueTotalHeight)}))}function computeLabelSteps(t){var e=t._dims;e.labelSteps=[];for(var r=t._stepCount,n=0;n<r;n+=e.labelStride)e.labelSteps.push({fraction:n/(r-1),step:t._visibleSteps[n]})}function setGripPosition(t,e,r){for(var n=t.select("rect."+constants$5.gripRectClass),i=0,a=0;a<e._stepCount;a++)if(e._visibleSteps[a]._index===e.active){i=a;break}var o=normalizedValueToPosition(e,i/(e._stepCount-1));if(!e._invokingCommand){var s=n;r&&e.transition.duration>0&&(s=s.transition().duration(e.transition.duration).ease(e.transition.easing)),s.attr("transform",strTranslate$3(o-.5*constants$5.gripWidth,e._dims.currentValueTotalHeight))}}function normalizedValueToPosition(t,e){var r=t._dims;return r.inputAreaStart+constants$5.stepInset+(r.inputAreaLength-2*constants$5.stepInset)*Math.min(1,Math.max(0,e))}function positionToNormalizedValue(t,e){var r=t._dims;return Math.min(1,Math.max(0,(e-constants$5.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*constants$5.stepInset-2*r.inputAreaStart)))}function drawTouchRect(t,e,r){var n=r._dims,i=lib_1.ensureSingle(t,"rect",constants$5.railTouchRectClass,(function(n){n.call(attachGripEvents,e,t,r).style("pointer-events","all")}));i.attr({width:n.inputAreaLength,height:Math.max(n.inputAreaWidth,constants$5.tickOffset+r.ticklen+n.labelHeight)}).call(color_1.fill,r.bgcolor).attr("opacity",0),drawing_1.setTranslate(i,0,n.currentValueTotalHeight)}function drawRail(t,e){var r=e._dims,n=r.inputAreaLength-2*constants$5.railInset,i=lib_1.ensureSingle(t,"rect",constants$5.railRectClass);i.attr({width:n,height:constants$5.railWidth,rx:constants$5.railRadius,ry:constants$5.railRadius,"shape-rendering":"crispEdges"}).call(color_1.stroke,e.bordercolor).call(color_1.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px"),drawing_1.setTranslate(i,constants$5.railInset,.5*(r.inputAreaWidth-constants$5.railWidth)+r.currentValueTotalHeight)}var sliders={moduleType:"component",name:constants$5.name,layoutAttributes:attributes$b,supplyLayoutDefaults:defaults$9,draw:draw$3},attributes$a={bgcolor:{valType:"color",dflt:attributes$q.background,editType:"plot",description:"Sets the background color of the range slider."},bordercolor:{valType:"color",dflt:attributes$q.defaultLine,editType:"plot",description:"Sets the border color of the range slider."},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot",description:"Sets the border width of the range slider."},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range slider range is","computed in relation to the input data.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1},description:["Sets the range of the range slider.","If not set, defaults to the full xaxis range.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot",description:["The height of the range slider as a fraction of the","total plot area height."].join(" ")},visible:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not the range slider will be visible.","If visible, perpendicular axes will be set to `fixedrange`"].join(" ")},editType:"calc"},oppaxis_attributes={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc",description:["Determines whether or not the range of this axis in","the rangeslider use the same value than in the main plot","when zooming in/out.","If *auto*, the autorange will be used.","If *fixed*, the `range` is used.","If *match*, the current range of the corresponding y-axis on the main subplot is used."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot",description:["Sets the range of this axis for the rangeslider."].join(" ")},editType:"calc"},constants$4={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15},LINE_SPACING$2=alignment.LINE_SPACING,name$1=constants$4.name;function isVisible(t){var e=t&&t[name$1];return e&&e.visible}var isVisible_1=isVisible,makeData=function(t){var e=axis_ids.list({_fullLayout:t},"x",!0),r=t.margin,n=[];if(!t._has("gl2d"))for(var i=0;i<e.length;i++){var a=e[i];if(isVisible(a)){n.push(a);var o=a[name$1];o._id=name$1+a._id,o._height=(t.height-r.b-r.t)*o.thickness,o._offsetShift=Math.floor(o.borderwidth/2)}}t._rangeSliderData=n},autoMarginOpts=function(t,e){var r=t._fullLayout,n=e[name$1],i=e._id.charAt(0),a=0,o=0;"bottom"===e.side&&(a=e._depth,e.title.text!==r._dfltTitle[i]&&(o=1.5*e.title.font.size+10+n._offsetShift,o+=(e.title.text.match(svg_text_utils.BR_TAG_ALL)||[]).length*e.title.font.size*LINE_SPACING$2));return{x:0,y:e._counterDomainMin,l:0,r:0,t:0,b:n._height+a+Math.max(r.margin.b,o),pad:constants$4.extraPad+2*n._offsetShift}},helpers$1={isVisible:isVisible_1,makeData:makeData,autoMarginOpts:autoMarginOpts},defaults$8=function(t,e,r){var n=t[r],i=e[r];if(n.rangeslider||e._requestRangeslider[i._id]){lib_1.isPlainObject(n.rangeslider)||(n.rangeslider={});var a,o,s=n.rangeslider,l=plot_template.newContainer(i,"rangeslider");if(m("visible")){m("bgcolor",e.plot_bgcolor),m("bordercolor"),m("borderwidth"),m("thickness"),m("autorange",!i.isValidRange(s.range)),m("range");var c=e._subplots;if(c)for(var u=c.cartesian.filter((function(t){return t.substr(0,t.indexOf("y"))===axis_ids.name2id(r)})).map((function(t){return t.substr(t.indexOf("y"),t.length)})),d=lib_1.simpleMap(u,axis_ids.id2name),h=0;h<d.length;h++){var g=d[h];a=s[g]||{},o=plot_template.newContainer(l,g,"yaxis");var f,p=e[g];a.range&&p.isValidRange(a.range)&&(f="fixed"),"match"!==y("rangemode",f)&&y("range",p.range.slice())}l._input=s}}function m(t,e){return lib_1.coerce(s,l,attributes$a,t,e)}function y(t,e){return lib_1.coerce(a,o,oppaxis_attributes,t,e)}},listAxes=axis_ids.list,getAutoRange=autorange.getAutoRange,calc_autorange=function(t){for(var e=listAxes(t,"x",!0),r=0;r<e.length;r++){var n=e[r],i=n[constants$4.name];i&&i.visible&&i.autorange&&(i._input.autorange=!0,i._input.range=i.range=getAutoRange(t,n))}},strTranslate$2=lib_1.strTranslate,draw$2=function(t){for(var e=t._fullLayout,r=e._rangeSliderData,n=0;n<r.length;n++){var i=r[n][constants$4.name];i._clipId=i._id+"-"+e._uid}var a=e._infolayer.selectAll("g."+constants$4.containerClassName).data(r,(function(t){return t._name}));a.exit().each((function(t){var r=t[constants$4.name];e._topdefs.select("#"+r._clipId).remove()})).remove(),0!==r.length&&(a.enter().append("g").classed(constants$4.containerClassName,!0).attr("pointer-events","all"),a.each((function(r){var n=d3.select(this),i=r[constants$4.name],a=e[axis_ids.id2name(r.anchor)],o=i[axis_ids.id2name(r.anchor)];if(i.range){var s,l=lib_1.simpleMap(i.range,r.r2l),c=lib_1.simpleMap(r.range,r.r2l);s=c[0]<c[1]?[Math.min(l[0],c[0]),Math.max(l[1],c[1])]:[Math.max(l[0],c[0]),Math.min(l[1],c[1])],i.range=i._input.range=lib_1.simpleMap(s,r.l2r)}r.cleanRange("rangeslider.range");var u=e._size,d=r.domain;i._width=u.w*(d[1]-d[0]);var h=Math.round(u.l+u.w*d[0]),g=Math.round(u.t+u.h*(1-r._counterDomainMin)+("bottom"===r.side?r._depth:0)+i._offsetShift+constants$4.extraPad);n.attr("transform",strTranslate$2(h,g)),i._rl=lib_1.simpleMap(i.range,r.r2l);var f=i._rl[0],p=i._rl[1],m=p-f;if(i.p2d=function(t){return t/i._width*m+f},i.d2p=function(t){return(t-f)/m*i._width},r.rangebreaks){var y=r.locateBreaks(f,p);if(y.length){var b,v,x=0;for(b=0;b<y.length;b++)x+=(v=y[b]).max-v.min;var I=i._width/(p-f-x),B=[-I*f];for(b=0;b<y.length;b++)v=y[b],B.push(B[B.length-1]-I*(v.max-v.min));for(i.d2p=function(t){for(var e=B[0],r=0;r<y.length;r++){var n=y[r];if(t>=n.max)e=B[r+1];else if(t<n.min)break}return e+I*t},b=0;b<y.length;b++)(v=y[b]).pmin=i.d2p(v.min),v.pmax=i.d2p(v.max);i.p2d=function(t){for(var e=B[0],r=0;r<y.length;r++){var n=y[r];if(t>=n.pmax)e=B[r+1];else if(t<n.pmin)break}return(t-e)/I}}}if("match"!==o.rangemode){var C=a.r2l(o.range[0]),F=a.r2l(o.range[1])-C;i.d2pOppAxis=function(t){return(t-C)/F*i._height}}n.call(drawBg,t,r,i).call(addClipPath,t,r,i).call(drawRangePlot,t,r,i).call(drawMasks,t,r,i,o).call(drawSlideBox,t,r,i).call(drawGrabbers,t,r,i),setupDragElement(n,t,r,i),setPixelRange(n,t,r,i,a,o),"bottom"===r.side&&titles.draw(t,r._id+"title",{propContainer:r,propName:r._name+".title",placeholder:e._dfltTitle.x,attributes:{x:r._offset+r._length/2,y:g+i._height+i._offsetShift+10+1.5*r.title.font.size,"text-anchor":"middle"}})})))};function setupDragElement(t,e,r,n){if(!e._context.staticPlot){var i=t.select("rect."+constants$4.slideBoxClassName).node(),a=t.select("rect."+constants$4.grabAreaMinClassName).node(),o=t.select("rect."+constants$4.grabAreaMaxClassName).node();t.on("mousedown",s),t.on("touchstart",s)}function s(){var s=d3.event,l=s.target,c=s.clientX||s.touches[0].clientX,u=c-t.node().getBoundingClientRect().left,d=n.d2p(r._rl[0]),h=n.d2p(r._rl[1]),g=dragelement.coverSlip();function f(s){var f,p,m,y=+(s.clientX||s.touches[0].clientX)-c;switch(l){case i:m="ew-resize",f=d+y,p=h+y;break;case a:m="col-resize",f=d+y,p=h;break;case o:m="col-resize",f=d,p=h+y;break;default:m="ew-resize",f=u,p=u+y}if(p<f){var b=p;p=f,f=b}n._pixelMin=f,n._pixelMax=p,setcursor(d3.select(g),m),setDataRange(t,e,r,n)}function p(){g.removeEventListener("mousemove",f),g.removeEventListener("mouseup",p),this.removeEventListener("touchmove",f),this.removeEventListener("touchend",p),lib_1.removeElement(g)}this.addEventListener("touchmove",f),this.addEventListener("touchend",p),g.addEventListener("mousemove",f),g.addEventListener("mouseup",p)}}function setDataRange(t,e,r,n){function i(t){return r.l2r(lib_1.constrain(t,n._rl[0],n._rl[1]))}var a=i(n.p2d(n._pixelMin)),o=i(n.p2d(n._pixelMax));window.requestAnimationFrame((function(){registry.call("_guiRelayout",e,r._name+".range",[a,o])}))}function setPixelRange(t,e,r,n,i,a){var o=constants$4.handleWidth/2;function s(t){return lib_1.constrain(t,0,n._width)}function l(t){return lib_1.constrain(t,0,n._height)}function c(t){return lib_1.constrain(t,-o,n._width+o)}var u=s(n.d2p(r._rl[0])),d=s(n.d2p(r._rl[1]));if(t.select("rect."+constants$4.slideBoxClassName).attr("x",u).attr("width",d-u),t.select("rect."+constants$4.maskMinClassName).attr("width",u),t.select("rect."+constants$4.maskMaxClassName).attr("x",d).attr("width",n._width-d),"match"!==a.rangemode){var h=n._height-l(n.d2pOppAxis(i._rl[1])),g=n._height-l(n.d2pOppAxis(i._rl[0]));t.select("rect."+constants$4.maskMinOppAxisClassName).attr("x",u).attr("height",h).attr("width",d-u),t.select("rect."+constants$4.maskMaxOppAxisClassName).attr("x",u).attr("y",g).attr("height",n._height-g).attr("width",d-u),t.select("rect."+constants$4.slideBoxClassName).attr("y",h).attr("height",g-h)}var f=.5,p=Math.round(c(u-o))-f,m=Math.round(c(d-o))+f;t.select("g."+constants$4.grabberMinClassName).attr("transform",strTranslate$2(p,f)),t.select("g."+constants$4.grabberMaxClassName).attr("transform",strTranslate$2(m,f))}function drawBg(t,e,r,n){var i=lib_1.ensureSingle(t,"rect",constants$4.bgClassName,(function(t){t.attr({x:0,y:0,"shape-rendering":"crispEdges"})})),a=n.borderwidth%2==0?n.borderwidth:n.borderwidth-1,o=-n._offsetShift,s=drawing_1.crispRound(e,n.borderwidth);i.attr({width:n._width+a,height:n._height+a,transform:strTranslate$2(o,o),fill:n.bgcolor,stroke:n.bordercolor,"stroke-width":s})}function addClipPath(t,e,r,n){var i=e._fullLayout,a=lib_1.ensureSingleById(i._topdefs,"clipPath",n._clipId,(function(t){t.append("rect").attr({x:0,y:0})}));a.select("rect").attr({width:n._width,height:n._height})}function drawRangePlot(t,e,r,n){var i,a=e.calcdata,o=t.selectAll("g."+constants$4.rangePlotClassName).data(r._subplotsWith,lib_1.identity);o.enter().append("g").attr("class",(function(t){return constants$4.rangePlotClassName+" "+t})).call(drawing_1.setClipUrl,n._clipId,e),o.order(),o.exit().remove(),o.each((function(t,o){var s=d3.select(this),l=0===o,c=axis_ids.getFromId(e,t,"y"),u=c._name,d=n[u],h={data:[],layout:{xaxis:{type:r.type,domain:[0,1],range:n.range.slice(),calendar:r.calendar},width:n._width,height:n._height,margin:{t:0,b:0,l:0,r:0}},_context:e._context};r.rangebreaks&&(h.layout.xaxis.rangebreaks=r.rangebreaks),h.layout[u]={type:c.type,domain:[0,1],range:"match"!==d.rangemode?d.range.slice():c.range.slice(),calendar:c.calendar},c.rangebreaks&&(h.layout[u].rangebreaks=c.rangebreaks),plots_1.supplyDefaults(h);var g=h._fullLayout.xaxis,f=h._fullLayout[u];g.clearCalc(),g.setScale(),f.clearCalc(),f.setScale();var p={id:t,plotgroup:s,xaxis:g,yaxis:f,isRangePlot:!0};l?i=p:(p.mainplot="xy",p.mainplotinfo=i),cartesian.rangePlot(e,p,filterRangePlotCalcData(a,t))}))}function filterRangePlotCalcData(t,e){for(var r=[],n=0;n<t.length;n++){var i=t[n],a=i[0].trace;a.xaxis+a.yaxis===e&&r.push(i)}return r}function drawMasks(t,e,r,n,i){var a=lib_1.ensureSingle(t,"rect",constants$4.maskMinClassName,(function(t){t.attr({x:0,y:0,"shape-rendering":"crispEdges"})}));a.attr("height",n._height).call(color_1.fill,constants$4.maskColor);var o=lib_1.ensureSingle(t,"rect",constants$4.maskMaxClassName,(function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}));if(o.attr("height",n._height).call(color_1.fill,constants$4.maskColor),"match"!==i.rangemode){var s=lib_1.ensureSingle(t,"rect",constants$4.maskMinOppAxisClassName,(function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}));s.attr("width",n._width).call(color_1.fill,constants$4.maskOppAxisColor);var l=lib_1.ensureSingle(t,"rect",constants$4.maskMaxOppAxisClassName,(function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}));l.attr("width",n._width).style("border-top",constants$4.maskOppBorder).call(color_1.fill,constants$4.maskOppAxisColor)}}function drawSlideBox(t,e,r,n){if(!e._context.staticPlot){var i=lib_1.ensureSingle(t,"rect",constants$4.slideBoxClassName,(function(t){t.attr({y:0,cursor:constants$4.slideBoxCursor,"shape-rendering":"crispEdges"})}));i.attr({height:n._height,fill:constants$4.slideBoxFill})}}function drawGrabbers(t,e,r,n){var i=lib_1.ensureSingle(t,"g",constants$4.grabberMinClassName),a=lib_1.ensureSingle(t,"g",constants$4.grabberMaxClassName),o={x:0,width:constants$4.handleWidth,rx:constants$4.handleRadius,fill:color_1.background,stroke:color_1.defaultLine,"stroke-width":constants$4.handleStrokeWidth,"shape-rendering":"crispEdges"},s={y:Math.round(n._height/4),height:Math.round(n._height/2)},l=lib_1.ensureSingle(i,"rect",constants$4.handleMinClassName,(function(t){t.attr(o)}));l.attr(s);var c=lib_1.ensureSingle(a,"rect",constants$4.handleMaxClassName,(function(t){t.attr(o)}));c.attr(s);var u={width:constants$4.grabAreaWidth,x:0,y:0,fill:constants$4.grabAreaFill,cursor:e._context.staticPlot?void 0:constants$4.grabAreaCursor},d=lib_1.ensureSingle(i,"rect",constants$4.grabAreaMinClassName,(function(t){t.attr(u)}));d.attr("height",n._height);var h=lib_1.ensureSingle(a,"rect",constants$4.grabAreaMaxClassName,(function(t){t.attr(u)}));h.attr("height",n._height)}var rangeslider={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:lib_1.extendFlat({},attributes$a,{yaxis:oppaxis_attributes})}}},layoutAttributes:attributes$a,handleDefaults:defaults$8,calcAutorange:calc_autorange,draw:draw$2,isVisible:helpers$1.isVisible,makeData:helpers$1.makeData,autoMarginOpts:helpers$1.autoMarginOpts},templatedArray=plot_template.templatedArray,buttonAttrs=templatedArray("button",{visible:{valType:"boolean",dflt:!0,editType:"plot",description:"Determines whether or not this button is visible."},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot",description:["The unit of measurement that the `count` value will set the range by."].join(" ")},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot",description:["Sets the range update mode.","If *backward*, the range update shifts the start of range","back *count* times *step* milliseconds.","If *todate*, the range update shifts the start of range","back to the first timestamp from *count* times","*step* milliseconds back.","For example, with `step` set to *year* and `count` set to *1*","the range update shifts the start of the range back to","January 01 of the current year.","Month and year *todate* are currently available only","for the built-in (Gregorian) calendar."].join(" ")},count:{valType:"number",min:0,dflt:1,editType:"plot",description:["Sets the number of steps to take to update the range.","Use with `step` to specify the update interval."].join(" ")},label:{valType:"string",editType:"plot",description:"Sets the text label to appear on the button."},editType:"plot",description:["Sets the specifications for each buttons.","By default, a range selector comes with no buttons."].join(" ")}),attributes$9={visible:{valType:"boolean",editType:"plot",description:["Determines whether or not this range selector is visible.","Note that range selectors are only available for x axes of","`type` set to or auto-typed to *date*."].join(" ")},buttons:buttonAttrs,x:{valType:"number",min:-2,max:3,editType:"plot",description:"Sets the x position (in normalized coordinates) of the range selector."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot",description:["Sets the range selector's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,editType:"plot",description:"Sets the y position (in normalized coordinates) of the range selector."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot",description:["Sets the range selector's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},font:font_attributes({editType:"plot",description:"Sets the font of the range selector button text."}),bgcolor:{valType:"color",dflt:attributes$q.lightLine,editType:"plot",description:"Sets the background color of the range selector buttons."},activecolor:{valType:"color",editType:"plot",description:"Sets the background color of the active range selector button."},bordercolor:{valType:"color",dflt:attributes$q.defaultLine,editType:"plot",description:"Sets the color of the border enclosing the range selector."},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot",description:"Sets the width (in px) of the border enclosing the range selector."},editType:"plot"},constants$3={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10},defaults$7=function(t,e,r,n,i){var a=t.rangeselector||{},o=plot_template.newContainer(e,"rangeselector");function s(t,e){return lib_1.coerce(a,o,attributes$9,t,e)}if(s("visible",array_container_defaults(a,o,{name:"buttons",handleItemDefaults:buttonDefaults,calendar:i}).length>0)){var l=getPosDflt(e,r,n);s("x",l[0]),s("y",l[1]),lib_1.noneOrAll(t,e,["x","y"]),s("xanchor"),s("yanchor"),lib_1.coerceFont(s,"font",r.font);var c=s("bgcolor");s("activecolor",color_1.contrast(c,constants$3.lightAmount,constants$3.darkAmount)),s("bordercolor"),s("borderwidth")}};function buttonDefaults(t,e,r,n){var i=n.calendar;function a(r,n){return lib_1.coerce(t,e,attributes$9.buttons,r,n)}if(a("visible")){var o=a("step");"all"!==o&&(!i||"gregorian"===i||"month"!==o&&"year"!==o?a("stepmode"):e.stepmode="backward",a("count")),a("label")}}function getPosDflt(t,e,r){for(var n=r.filter((function(r){return e[r].anchor===t._id})),i=0,a=0;a<n.length;a++){var o=e[n[a]].domain;o&&(i=Math.max(o[1],i))}return[t.domain[0],i+constants$3.yPad]}var d3Time=getAugmentedNamespace(src$2),titleCase=lib_1.titleCase,get_update_object=function(t,e){var r=t._name,n={};if("all"===e.step)n[r+".autorange"]=!0;else{var i=getXRange(t,e);n[r+".range[0]"]=i[0],n[r+".range[1]"]=i[1]}return n};function getXRange(t,e){var r,n=t.range,i=new Date(t.r2l(n[1])),a=e.step,o=d3Time["utc"+titleCase(a)],s=e.count;switch(e.stepmode){case"backward":r=t.l2r(+o.offset(i,-s));break;case"todate":var l=o.offset(i,-s);r=t.l2r(+o.ceil(l))}return[r,n[1]]}var strTranslate$1=lib_1.strTranslate,LINE_SPACING$1=alignment.LINE_SPACING,FROM_TL$1=alignment.FROM_TL,FROM_BR$1=alignment.FROM_BR,draw$1=function(t){var e=t._fullLayout._infolayer.selectAll(".rangeselector").data(makeSelectorData(t),selectorKeyFunc);e.enter().append("g").classed("rangeselector",!0),e.exit().remove(),e.style({cursor:"pointer","pointer-events":"all"}),e.each((function(e){var r=d3.select(this),n=e,i=n.rangeselector,a=r.selectAll("g.button").data(lib_1.filterVisible(i.buttons));a.enter().append("g").classed("button",!0),a.exit().remove(),a.each((function(e){var r=d3.select(this),a=get_update_object(n,e);e._isActive=isActive(n,e,a),r.call(drawButtonRect,i,e),r.call(drawButtonText,i,e,t),r.on("click",(function(){t._dragged||registry.call("_guiRelayout",t,a)})),r.on("mouseover",(function(){e._isHovered=!0,r.call(drawButtonRect,i,e)})),r.on("mouseout",(function(){e._isHovered=!1,r.call(drawButtonRect,i,e)}))})),reposition(t,a,i,n._name,r)}))};function makeSelectorData(t){for(var e=axis_ids.list(t,"x",!0),r=[],n=0;n<e.length;n++){var i=e[n];i.rangeselector&&i.rangeselector.visible&&r.push(i)}return r}function selectorKeyFunc(t){return t._id}function isActive(t,e,r){if("all"===e.step)return!0===t.autorange;var n=Object.keys(r);return t.range[0]===r[n[0]]&&t.range[1]===r[n[1]]}function drawButtonRect(t,e,r){var n=lib_1.ensureSingle(t,"rect","selector-rect",(function(t){t.attr("shape-rendering","crispEdges")}));n.attr({rx:constants$3.rx,ry:constants$3.ry}),n.call(color_1.stroke,e.bordercolor).call(color_1.fill,getFillColor(e,r)).style("stroke-width",e.borderwidth+"px")}function getFillColor(t,e){return e._isActive||e._isHovered?t.activecolor:t.bgcolor}function drawButtonText(t,e,r,n){var i=lib_1.ensureSingle(t,"text","selector-text",(function(t){t.attr("text-anchor","middle")}));i.call(drawing_1.font,e.font).text(getLabel(r,n._fullLayout._meta)).call((function(t){svg_text_utils.convertToTspans(t,n)}))}function getLabel(t,e){return t.label?e?lib_1.templateString(t.label,e):t.label:"all"===t.step?"all":t.count+t.step.charAt(0)}function reposition(t,e,r,n,i){var a=0,o=0,s=r.borderwidth;e.each((function(){var t=d3.select(this).select(".selector-text"),e=r.font.size*LINE_SPACING$1,n=Math.max(e*svg_text_utils.lineCount(t),16)+3;o=Math.max(o,n)})),e.each((function(){var t=d3.select(this),e=t.select(".selector-rect"),n=t.select(".selector-text"),i=n.node()&&drawing_1.bBox(n.node()).width,l=r.font.size*LINE_SPACING$1,c=svg_text_utils.lineCount(n),u=Math.max(i+10,constants$3.minButtonWidth);t.attr("transform",strTranslate$1(s+a,s)),e.attr({x:0,y:0,width:u,height:o}),svg_text_utils.positionText(n,u/2,o/2-(c-1)*l/2+3),a+=u+5}));var l=t._fullLayout._size,c=l.l+l.w*r.x,u=l.t+l.h*(1-r.y),d="left";lib_1.isRightAnchor(r)&&(c-=a,d="right"),lib_1.isCenterAnchor(r)&&(c-=a/2,d="center");var h="top";lib_1.isBottomAnchor(r)&&(u-=o,h="bottom"),lib_1.isMiddleAnchor(r)&&(u-=o/2,h="middle"),a=Math.ceil(a),o=Math.ceil(o),c=Math.round(c),u=Math.round(u),plots_1.autoMargin(t,n+"-range-selector",{x:r.x,y:r.y,l:a*FROM_TL$1[d],r:a*FROM_BR$1[d],b:o*FROM_BR$1[h],t:o*FROM_TL$1[h]}),i.attr("transform",strTranslate$1(c,u))}var rangeselector={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:attributes$9}}},layoutAttributes:attributes$9,handleDefaults:defaults$7,draw:draw$1},extendFlat$7=extend.extendFlat,attributes$8=function(t,e){e=e||{};var r={valType:"info_array",editType:(t=t||{}).editType,items:[{valType:"number",min:0,max:1,editType:t.editType},{valType:"number",min:0,max:1,editType:t.editType}],dflt:[0,1]},n=t.name?t.name+" ":"",i=t.trace?"trace ":"subplot ",a=e.description?" "+e.description:"",o={x:extendFlat$7({},r,{description:["Sets the horizontal domain of this ",n,i,"(in plot fraction).",a].join("")}),y:extendFlat$7({},r,{description:["Sets the vertical domain of this ",n,i,"(in plot fraction).",a].join("")}),editType:t.editType};return t.noGridCell||(o.row={valType:"integer",min:0,dflt:0,editType:t.editType,description:["If there is a layout grid, use the domain ","for this row in the grid for this ",n,i,".",a].join("")},o.column={valType:"integer",min:0,dflt:0,editType:t.editType,description:["If there is a layout grid, use the domain ","for this column in the grid for this ",n,i,".",a].join("")}),o},defaults$6=function(t,e,r,n){var i=n&&n.x||[0,1],a=n&&n.y||[0,1],o=e.grid;if(o){var s=r("domain.column");void 0!==s&&(s<o.columns?i=o._domains.x[s]:delete t.domain.column);var l=r("domain.row");void 0!==l&&(l<o.rows?a=o._domains.y[l]:delete t.domain.row)}var c=r("domain.x",i),u=r("domain.y",a);c[0]<c[1]||(t.domain.x=i.slice()),u[0]<u[1]||(t.domain.y=a.slice())},domain={attributes:attributes$8,defaults:defaults$6},counterRegex$1=regex.counter,domainAttrs$1=domain.attributes,cartesianIdRegex=constants$c.idRegex,gridAttrs={rows:{valType:"integer",min:1,editType:"plot",description:["The number of rows in the grid. If you provide a 2D `subplots`","array or a `yaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot",description:["Is the first row the top or the bottom? Note that columns","are always enumerated from left to right."].join(" ")},columns:{valType:"integer",min:1,editType:"plot",description:["The number of columns in the grid. If you provide a 2D `subplots`","array, the length of its longest row is used as the default.","If you give an `xaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[counterRegex$1("xy").toString(),""],editType:"plot"},editType:"plot",description:["Used for freeform grids, where some axes may be shared across subplots","but others are not. Each entry should be a cartesian subplot id, like","*xy* or *x3y2*, or ** to leave that cell empty. You may reuse x axes","within the same column, and y axes within the same row.","Non-cartesian subplots and traces that support `domain` can place themselves","in this grid separately using the `gridcell` attribute."].join(" ")},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[cartesianIdRegex.x.toString(),""],editType:"plot"},editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an x axis id like *x*, *x2*, etc., or ** to","not put an x axis in that column. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `yaxes` is present,","will generate consecutive IDs."].join(" ")},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[cartesianIdRegex.y.toString(),""],editType:"plot"},editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an y axis id like *y*, *y2*, etc., or ** to","not put a y axis in that row. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `xaxes` is present,","will generate consecutive IDs."].join(" ")},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot",description:["If no `subplots`, `xaxes`, or `yaxes` are given but we do have `rows` and `columns`,","we can generate defaults using consecutive axis IDs, in two ways:","*coupled* gives one x axis per column and one y axis per row.","*independent* uses a new xy pair for each cell, left-to-right across each row","then iterating rows according to `roworder`."].join(" ")},xgap:{valType:"number",min:0,max:1,editType:"plot",description:["Horizontal space between grid cells, expressed as a fraction","of the total width available to one cell. Defaults to 0.1","for coupled-axes grids and 0.2 for independent grids."].join(" ")},ygap:{valType:"number",min:0,max:1,editType:"plot",description:["Vertical space between grid cells, expressed as a fraction","of the total height available to one cell. Defaults to 0.1","for coupled-axes grids and 0.3 for independent grids."].join(" ")},domain:domainAttrs$1({name:"grid",editType:"plot",noGridCell:!0},{description:["The first and last cells end exactly at the domain","edges, with no grout around the edges."].join(" ")}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot",description:["Sets where the x axis labels and titles go. *bottom* means","the very bottom of the grid. *bottom plot* is the lowest plot","that each x axis is used in. *top* and *top plot* are similar."].join(" ")},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot",description:["Sets where the y axis labels and titles go. *left* means","the very left edge of the grid. *left plot* is the leftmost plot","that each y axis is used in. *right* and *right plot* are similar."].join(" ")},editType:"plot"};function getAxes(t,e,r){var n=e[r+"axes"],i=Object.keys((t._splomAxes||{})[r]||{});return Array.isArray(n)?n:i.length?i:void 0}function sizeDefaults(t,e){var r=t.grid||{},n=getAxes(e,r,"x"),i=getAxes(e,r,"y");if(t.grid||n||i){var a,o,s=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]),l=Array.isArray(n),c=Array.isArray(i),u=l&&n!==r.xaxes&&c&&i!==r.yaxes;s?(a=r.subplots.length,o=r.subplots[0].length):(c&&(a=i.length),l&&(o=n.length));var d=plot_template.newContainer(e,"grid"),h=v("rows",a),g=v("columns",o);if(h*g>1){if(!s&&!l&&!c)"independent"===v("pattern")&&(s=!0);d._hasSubplotGrid=s;var f,p,m="top to bottom"===v("roworder"),y=s?.2:.1,b=s?.3:.1;u&&e._splomGridDflt&&(f=e._splomGridDflt.xside,p=e._splomGridDflt.yside),d._domains={x:fillGridPositions("x",v,y,f,g),y:fillGridPositions("y",v,b,p,h,m)}}else delete e.grid}function v(t,e){return lib_1.coerce(r,d,gridAttrs,t,e)}}function fillGridPositions(t,e,r,n,i,a){var o=e(t+"gap",r),s=e("domain."+t);e(t+"side",n);for(var l=new Array(i),c=s[0],u=(s[1]-c)/(i-o),d=u*(1-o),h=0;h<i;h++){var g=c+u*h;l[a?i-1-h:h]=[g,g+d]}return l}function contentDefaults(t,e){var r=e.grid;if(r&&r._domains){var n,i,a,o,s,l,c,u=t.grid||{},d=e._subplots,h=r._hasSubplotGrid,g=r.rows,f=r.columns,p="independent"===r.pattern,m=r._axisMap={};if(h){var y=u.subplots||[];l=r.subplots=new Array(g);var b=1;for(n=0;n<g;n++){var v=l[n]=new Array(f),x=y[n]||[];for(i=0;i<f;i++)if(p?(s=1===b?"xy":"x"+b+"y"+b,b++):s=x[i],v[i]="",-1!==d.cartesian.indexOf(s)){if(c=s.indexOf("y"),a=s.slice(0,c),o=s.slice(c),void 0!==m[a]&&m[a]!==i||void 0!==m[o]&&m[o]!==n)continue;v[i]=s,m[a]=i,m[o]=n}}}else{var I=getAxes(e,u,"x"),B=getAxes(e,u,"y");r.xaxes=fillGridAxes(I,d.xaxis,f,m,"x"),r.yaxes=fillGridAxes(B,d.yaxis,g,m,"y")}var C=r._anchors={},F="top to bottom"===r.roworder;for(var A in m){var Q,_,w,U=A.charAt(0),S=r[U+"side"];if(S.length<8)C[A]="free";else if("x"===U){if("t"===S.charAt(0)===F?(Q=0,_=1,w=g):(Q=g-1,_=-1,w=-1),h){var E=m[A];for(n=Q;n!==w;n+=_)if((s=l[n][E])&&(c=s.indexOf("y"),s.slice(0,c)===A)){C[A]=s.slice(c);break}}else for(n=Q;n!==w;n+=_)if(o=r.yaxes[n],-1!==d.cartesian.indexOf(A+o)){C[A]=o;break}}else if("l"===S.charAt(0)?(Q=0,_=1,w=f):(Q=f-1,_=-1,w=-1),h){var L=m[A];for(n=Q;n!==w;n+=_)if((s=l[L][n])&&(c=s.indexOf("y"),s.slice(c)===A)){C[A]=s.slice(0,c);break}}else for(n=Q;n!==w;n+=_)if(a=r.xaxes[n],-1!==d.cartesian.indexOf(a+A)){C[A]=a;break}}}}function fillGridAxes(t,e,r,n,i){var a,o=new Array(r);function s(t,r){-1!==e.indexOf(r)&&void 0===n[r]?(o[t]=r,n[r]=t):o[t]=""}if(Array.isArray(t))for(a=0;a<r;a++)s(a,t[a]);else for(s(0,i),a=1;a<r;a++)s(a,i+(a+1));return o}var grid={moduleType:"component",name:"grid",schema:{layout:{grid:gridAttrs}},layoutAttributes:gridAttrs,sizeDefaults:sizeDefaults,contentDefaults:contentDefaults},attributes$7={visible:{valType:"boolean",editType:"calc",description:["Determines whether or not this set of error bars is visible."].join(" ")},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc",description:["Determines the rule used to generate the error bars.","If *constant`, the bar lengths are of a constant value.","Set this constant in `value`.","If *percent*, the bar lengths correspond to a percentage of","underlying data. Set this percentage in `value`.","If *sqrt*, the bar lengths correspond to the square of the","underlying data.","If *data*, the bar lengths are set with data set `array`."].join(" ")},symmetric:{valType:"boolean",editType:"calc",description:["Determines whether or not the error bars have the same length","in both direction","(top/bottom for vertical bars, left/right for horizontal bars."].join(" ")},array:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar.","Values are plotted relative to the underlying data."].join(" ")},arrayminus:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar in the","bottom (left) direction for vertical (horizontal) bars","Values are plotted relative to the underlying data."].join(" ")},value:{valType:"number",min:0,dflt:10,editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars."].join(" ")},valueminus:{valType:"number",min:0,dflt:10,editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars in the","bottom (left) direction for vertical (horizontal) bars"].join(" ")},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style",description:"Sets the stoke color of the error bars."},thickness:{valType:"number",min:0,dflt:2,editType:"style",description:"Sets the thickness (in px) of the error bars."},width:{valType:"number",min:0,editType:"plot",description:["Sets the width (in px) of the cross-bar at both ends","of the error bars."].join(" ")},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style",description:["Obsolete.","Use the alpha channel in error bar `color` to set the opacity."].join(" ")}}},defaults$5=function(t,e,r,n){var i="error_"+n.axis,a=plot_template.newContainer(e,i),o=t[i]||{};function s(t,e){return lib_1.coerce(o,a,attributes$7,t,e)}if(!1!==s("visible",void 0!==o.array||void 0!==o.value||"sqrt"===o.type)){var l=s("type","array"in o?"data":"percent"),c=!0;"sqrt"!==l&&(c=s("symmetric",!(("data"===l?"arrayminus":"valueminus")in o))),"data"===l?(s("array"),s("traceref"),c||(s("arrayminus"),s("tracerefminus"))):"percent"!==l&&"constant"!==l||(s("value"),c||s("valueminus"));var u="copy_"+n.inherit+"style";if(n.inherit)(e["error_"+n.inherit]||{}).visible&&s(u,!(o.color||fastIsnumeric(o.thickness)||fastIsnumeric(o.width)));n.inherit&&a[u]||(s("color",r),s("thickness"),s("width",registry.traceIs(e,"gl3d")?0:4))}},compute_error=function(t){var e=t.type,r=t.symmetric;if("data"===e){var n=t.array||[];if(r)return function(t,e){var r=+n[e];return[r,r]};var i=t.arrayminus||[];return function(t,e){var r=+n[e],a=+i[e];return isNaN(r)&&isNaN(a)?[NaN,NaN]:[a||0,r||0]}}var a=makeComputeErrorValue(e,t.value),o=makeComputeErrorValue(e,t.valueminus);return r||void 0===t.valueminus?function(t){var e=a(t);return[e,e]}:function(t){return[o(t),a(t)]}};function makeComputeErrorValue(t,e){return"percent"===t?function(t){return Math.abs(t*e/100)}:"constant"===t?function(){return Math.abs(e)}:"sqrt"===t?function(t){return Math.sqrt(Math.abs(t))}:void 0}var calc$4=function(t){for(var e=t.calcdata,r=0;r<e.length;r++){var n=e[r],i=n[0].trace;if(!0===i.visible&&registry.traceIs(i,"errorBarsOK")){var a=axes_1.getFromId(t,i.xaxis),o=axes_1.getFromId(t,i.yaxis);calcOneAxis(n,i,a,"x"),calcOneAxis(n,i,o,"y")}}};function calcOneAxis(t,e,r,n){var i=e["error_"+n]||{},a=[];if(i.visible&&-1!==["linear","log"].indexOf(r.type)){for(var o=compute_error(i),s=0;s<t.length;s++){var l=t[s],c=l.i;if(void 0===c)c=s;else if(null===c)continue;var u=l[n];if(fastIsnumeric(r.c2l(u))){var d=o(u,c);if(fastIsnumeric(d[0])&&fastIsnumeric(d[1])){var h=l[n+"s"]=u-d[0],g=l[n+"h"]=u+d[1];a.push(h,g)}}}var f=r._id,p=e._extremes[f],m=axes_1.findExtremes(r,a,lib_1.extendFlat({tozero:p.opts.tozero},{padded:!0}));p.min=p.min.concat(m.min),p.max=p.max.concat(m.max)}}var plot$1=function(t,e,r,n){var i=r.xaxis,a=r.yaxis,o=n&&n.duration>0;e.each((function(e){var s,l=e[0].trace,c=l.error_x||{},u=l.error_y||{};l.ids&&(s=function(t){return t.id});var d=subtypes.hasMarkers(l)&&l.marker.maxdisplayed>0;u.visible||c.visible||(e=[]);var h=d3.select(this).selectAll("g.errorbar").data(e,s);if(h.exit().remove(),e.length){c.visible||h.selectAll("path.xerror").remove(),u.visible||h.selectAll("path.yerror").remove(),h.style("opacity",1);var g=h.enter().append("g").classed("errorbar",!0);o&&g.style("opacity",0).transition().duration(n.duration).style("opacity",1),drawing_1.setClipUrl(h,r.layerClipId,t),h.each((function(t){var e=d3.select(this),r=errorCoords(t,i,a);if(!d||t.vis){var s,l=e.select("path.yerror");if(u.visible&&fastIsnumeric(r.x)&&fastIsnumeric(r.yh)&&fastIsnumeric(r.ys)){var h=u.width;s="M"+(r.x-h)+","+r.yh+"h"+2*h+"m-"+h+",0V"+r.ys,r.noYS||(s+="m-"+h+",0h"+2*h),!l.size()?l=e.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):o&&(l=l.transition().duration(n.duration).ease(n.easing)),l.attr("d",s)}else l.remove();var g=e.select("path.xerror");if(c.visible&&fastIsnumeric(r.y)&&fastIsnumeric(r.xh)&&fastIsnumeric(r.xs)){var f=(c.copy_ystyle?u:c).width;s="M"+r.xh+","+(r.y-f)+"v"+2*f+"m0,-"+f+"H"+r.xs,r.noXS||(s+="m0,-"+f+"v"+2*f),!g.size()?g=e.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):o&&(g=g.transition().duration(n.duration).ease(n.easing)),g.attr("d",s)}else g.remove()}}))}}))};function errorCoords(t,e,r){var n={x:e.c2p(t.x),y:r.c2p(t.y)};return void 0!==t.yh&&(n.yh=r.c2p(t.yh),n.ys=r.c2p(t.ys),fastIsnumeric(n.ys)||(n.noYS=!0,n.ys=r.c2p(t.ys,!0))),void 0!==t.xh&&(n.xh=e.c2p(t.xh),n.xs=e.c2p(t.xs),fastIsnumeric(n.xs)||(n.noXS=!0,n.xs=e.c2p(t.xs,!0))),n}var style$1=function(t){t.each((function(t){var e=t[0].trace,r=e.error_y||{},n=e.error_x||{},i=d3.select(this);i.selectAll("path.yerror").style("stroke-width",r.thickness+"px").call(color_1.stroke,r.color),n.copy_ystyle&&(n=r),i.selectAll("path.xerror").style("stroke-width",n.thickness+"px").call(color_1.stroke,n.color)}))},overrideAll$1=edit_types.overrideAll,xyAttrs={error_x:lib_1.extendFlat({},attributes$7),error_y:lib_1.extendFlat({},attributes$7)};delete xyAttrs.error_x.copy_zstyle,delete xyAttrs.error_y.copy_zstyle,delete xyAttrs.error_y.copy_ystyle;var xyzAttrs={error_x:lib_1.extendFlat({},attributes$7),error_y:lib_1.extendFlat({},attributes$7),error_z:lib_1.extendFlat({},attributes$7)};delete xyzAttrs.error_x.copy_ystyle,delete xyzAttrs.error_y.copy_ystyle,delete xyzAttrs.error_z.copy_ystyle,delete xyzAttrs.error_z.copy_zstyle;var errorbars={moduleType:"component",name:"errorbars",schema:{traces:{scatter:xyAttrs,bar:xyAttrs,histogram:xyAttrs,scatter3d:overrideAll$1(xyzAttrs,"calc","nested"),scattergl:overrideAll$1(xyAttrs,"calc","nested")}},supplyDefaults:defaults$5,calc:calc$4,makeComputeError:compute_error,plot:plot$1,style:style$1,hoverInfo:hoverInfo};function hoverInfo(t,e,r){(e.error_y||{}).visible&&(r.yerr=t.yh-t.y,e.error_y.symmetric||(r.yerrneg=t.y-t.ys)),(e.error_x||{}).visible&&(r.xerr=t.xh-t.x,e.error_x.symmetric||(r.xerrneg=t.x-t.xs))}var constants$2={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}},strTranslate=lib_1.strTranslate,extendFlat$6=extend.extendFlat,flipScale=helpers$b.flipScale,LINE_SPACING=alignment.LINE_SPACING,FROM_TL=alignment.FROM_TL,FROM_BR=alignment.FROM_BR,cn=constants$2.cn;function draw(t){var e=t._fullLayout._infolayer.selectAll("g."+cn.colorbar).data(makeColorBarData(t),(function(t){return t._id}));e.enter().append("g").attr("class",(function(t){return t._id})).classed(cn.colorbar,!0),e.each((function(e){var r=d3.select(this);lib_1.ensureSingle(r,"rect",cn.cbbg),lib_1.ensureSingle(r,"g",cn.cbfills),lib_1.ensureSingle(r,"g",cn.cblines),lib_1.ensureSingle(r,"g",cn.cbaxis,(function(t){t.classed(cn.crisp,!0)})),lib_1.ensureSingle(r,"g",cn.cbtitleunshift,(function(t){t.append("g").classed(cn.cbtitle,!0)})),lib_1.ensureSingle(r,"rect",cn.cboutline);var n=drawColorBar(r,e,t);n&&n.then&&(t._promises||[]).push(n),t._context.edits.colorbarPosition&&makeEditable(r,e,t)})),e.exit().each((function(e){plots_1.autoMargin(t,e._id)})).remove(),e.order()}function makeColorBarData(t){var e,r,n,i,a=t._fullLayout,o=t.calcdata,s=[];function l(t){return extendFlat$6(t,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function c(){"function"==typeof i.calc?i.calc(t,n,e):(e._fillgradient=r.reversescale?flipScale(r.colorscale):r.colorscale,e._zrange=[r[i.min],r[i.max]])}for(var u=0;u<o.length;u++){var d=o[u],h=(n=d[0].trace)._module.colorbar;if(!0===n.visible&&h)for(var g=Array.isArray(h),f=g?h:[h],p=0;p<f.length;p++){var m=(i=f[p]).container;(r=m?n[m]:n)&&r.showscale&&((e=l(r.colorbar))._id="cb"+n.uid+(g&&m?"-"+m:""),e._traceIndex=n.index,e._propPrefix=(m?m+".":"")+"colorbar.",e._meta=n._meta,c(),s.push(e))}}for(var y in a._colorAxes)if((r=a[y]).showscale){var b=a._colorAxes[y];(e=l(r.colorbar))._id="cb"+y,e._propPrefix=y+".colorbar.",e._meta=a._meta,i={min:"cmin",max:"cmax"},"heatmap"!==b[0]&&(n=b[1],i.calc=n._module.colorbar.calc),c(),s.push(e)}return s}function drawColorBar(t,e,r){var n="v"===e.orientation,i=e.len,a=e.lenmode,o=e.thickness,s=e.thicknessmode,l=e.outlinewidth,c=e.borderwidth,u=e.bgcolor,d=e.xanchor,h=e.yanchor,g=e.xpad,f=e.ypad,p=e.x,m=n?e.y:1-e.y,y=r._fullLayout,b=y._size,v=e._fillcolor,x=e._line,I=e.title,B=I.side,C=e._zrange||d3.extent(("function"==typeof v?v:x.color).domain()),F="function"==typeof x.color?x.color:function(){return x.color},A="function"==typeof v?v:function(){return v},Q=e._levels,_=calcLevels(r,e,C),w=_.fill,U=_.line,S=Math.round(o*("fraction"===s?n?b.w:b.h:1)),E=S/(n?b.w:b.h),L=Math.round(i*("fraction"===a?n?b.h:b.w:1)),T=L/(n?b.h:b.w),R=Math.round(n?p*b.w+g:m*b.h+f),k={center:.5,right:1}[d]||0,G={top:1,middle:.5}[h]||0,N=n?p-k*E:m-G*E,M=n?m-G*T:p-k*T,D=Math.round(n?b.h*(1-M):b.w*M);e._lenFrac=T,e._thickFrac=E,e._uFrac=N,e._vFrac=M;var X=e._axis=mockColorBarAxis(r,e,C);X.position=E+(n?p+g/b.w:m+f/b.h);var V=-1!==["top","bottom"].indexOf(B);if(n&&V&&(X.title.side=B,X.titlex=p+g/b.w,X.titley=M+("top"===I.side?T-f/b.h:f/b.h)),n||V||(X.title.side=B,X.titley=m+f/b.h,X.titlex=M+g/b.w),x.color&&"auto"===e.tickmode){X.tickmode="linear",X.tick0=Q.start;var W=Q.size,Z=lib_1.constrain(L/50,4,15)+1,O=(C[1]-C[0])/((e.nticks||Z)*W);if(O>1){var $=Math.pow(10,Math.floor(Math.log(O)/Math.LN10));W*=$*lib_1.roundUp(O/$,[2,5,10]),(Math.abs(Q.start)/Q.size+1e-6)%1<2e-6&&(X.tick0=0)}X.dtick=W}X.domain=n?[M+f/b.h,M+T-f/b.h]:[M+g/b.w,M+T-g/b.w],X.setScale(),t.attr("transform",strTranslate(Math.round(b.l),Math.round(b.t)));var H,Y=t.select("."+cn.cbtitleunshift).attr("transform",strTranslate(-Math.round(b.l),-Math.round(b.t))),P=X.ticklabelposition,z=X.title.font.size,J=t.select("."+cn.cbaxis),j=0,K=0;function q(n,i){var a={propContainer:X,propName:e._propPrefix+"title",traceIndex:e._traceIndex,_meta:e._meta,placeholder:y._dfltTitle.colorbar,containerGroup:t.select("."+cn.cbtitle)},o="h"===n.charAt(0)?n.substr(1):"h"+n;t.selectAll("."+o+",."+o+"-math-group").remove(),titles.draw(r,n,extendFlat$6(a,i||{}))}return lib_1.syncOrAsync([plots_1.previousPromises,function(){var t,e;(n&&V||!n&&!V)&&("top"===B&&(t=g+b.l+b.w*p,e=f+b.t+b.h*(1-M-T)+3+.75*z),"bottom"===B&&(t=g+b.l+b.w*p,e=f+b.t+b.h*(1-M)-3-.25*z),"right"===B&&(e=f+b.t+b.h*m+3+.75*z,t=g+b.l+b.w*M),q(X._id+"title",{attributes:{x:t,y:e,"text-anchor":n?"start":"middle"}}))},function(){if(!n&&!V||n&&V){var i,a=t.select("."+cn.cbtitle),o=a.select("text"),s=[-l/2,l/2],c=a.select(".h"+X._id+"title-math-group").node(),u=15.6;if(o.node()&&(u=parseInt(o.node().style.fontSize,10)*LINE_SPACING),c?(i=drawing_1.bBox(c),K=i.width,(j=i.height)>u&&(s[1]-=(j-u)/2)):o.node()&&!o.classed(cn.jsPlaceholder)&&(i=drawing_1.bBox(o.node()),K=i.width,j=i.height),n){if(j){if(j+=5,"top"===B)X.domain[1]-=j/b.h,s[1]*=-1;else{X.domain[0]+=j/b.h;var d=svg_text_utils.lineCount(o);s[1]+=(1-d)*u}a.attr("transform",strTranslate(s[0],s[1])),X.setScale()}}else K&&("right"===B&&(X.domain[0]+=(K+z/2)/b.w),a.attr("transform",strTranslate(s[0],s[1])),X.setScale())}t.selectAll("."+cn.cbfills+",."+cn.cblines).attr("transform",n?strTranslate(0,Math.round(b.h*(1-X.domain[1]))):strTranslate(Math.round(b.w*X.domain[0]),0)),J.attr("transform",n?strTranslate(0,Math.round(-b.t)):strTranslate(Math.round(-b.l),0));var h=t.select("."+cn.cbfills).selectAll("rect."+cn.cbfill).attr("style","").data(w);h.enter().append("rect").classed(cn.cbfill,!0).style("stroke","none"),h.exit().remove();var g=C.map(X.c2p).map(Math.round).sort((function(t,e){return t-e}));h.each((function(t,i){var a=[0===i?C[0]:(w[i]+w[i-1])/2,i===w.length-1?C[1]:(w[i]+w[i+1])/2].map(X.c2p).map(Math.round);n&&(a[1]=lib_1.constrain(a[1]+(a[1]>a[0])?1:-1,g[0],g[1]));var o=d3.select(this).attr(n?"x":"y",R).attr(n?"y":"x",d3.min(a)).attr(n?"width":"height",Math.max(S,2)).attr(n?"height":"width",Math.max(d3.max(a)-d3.min(a),2));if(e._fillgradient)drawing_1.gradient(o,r,e._id,n?"vertical":"horizontalreversed",e._fillgradient,"fill");else{var s=A(t).replace("e-","");o.attr("fill",tinycolor(s).toHexString())}}));var f=t.select("."+cn.cblines).selectAll("path."+cn.cbline).data(x.color&&x.width?U:[]);f.enter().append("path").classed(cn.cbline,!0),f.exit().remove(),f.each((function(t){var e=R,r=Math.round(X.c2p(t))+x.width/2%1;d3.select(this).attr("d","M"+(n?e+","+r:r+","+e)+(n?"h":"v")+S).call(drawing_1.lineGroupStyle,x.width,F(t),x.dash)})),J.selectAll("g."+X._id+"tick,path").remove();var p=R+S+(l||0)/2-("outside"===e.ticks?1:0),m=axes_1.calcTicks(X),y=axes_1.getTickSigns(X)[2];return axes_1.drawTicks(r,X,{vals:"inside"===X.ticks?axes_1.clipEnds(X,m):m,layer:J,path:axes_1.makeTickPath(X,p,y),transFn:axes_1.makeTransTickFn(X)}),axes_1.drawLabels(r,X,{vals:m,layer:J,transFn:axes_1.makeTransTickLabelFn(X),labelFns:axes_1.makeLabelFns(X,p)})},function(){if(n&&!V||!n&&V){var t,i,a=X.position||0,o=X._offset+X._length/2;if("right"===B)i=o,t=b.l+b.w*a+10+z*(X.showticklabels?1:.5);else if(t=o,"bottom"===B&&(i=b.t+b.h*a+10+(-1===P.indexOf("inside")?X.tickfont.size:0)+("intside"!==X.ticks&&e.ticklen||0)),"top"===B){var s=I.text.split("<br>").length;i=b.t+b.h*a+10-S-LINE_SPACING*z*s}q((n?"h":"v")+X._id+"title",{avoid:{selection:d3.select(r).selectAll("g."+X._id+"tick"),side:B,offsetTop:n?0:b.t,offsetLeft:n?b.l:0,maxShift:n?y.width:y.height},attributes:{x:t,y:i,"text-anchor":"middle"},transform:{rotate:n?-90:0,offset:0}})}},plots_1.previousPromises,function(){var v,x=S+l/2;-1===P.indexOf("inside")&&(v=drawing_1.bBox(J.node()),x+=n?v.width:v.height),H=Y.select("text");var C=0,F=n&&"top"===B,A=!n&&"right"===B,Q=0;if(H.node()&&!H.classed(cn.jsPlaceholder)){var _,w=Y.select(".h"+X._id+"title-math-group").node();w&&(n&&V||!n&&!V)?(C=(v=drawing_1.bBox(w)).width,_=v.height):(C=(v=drawing_1.bBox(Y.node())).right-b.l-(n?R:D),_=v.bottom-b.t-(n?D:R),n||"top"!==B||(x+=v.height,Q=v.height)),A&&(H.attr("transform",strTranslate(C/2+z/2,0)),C*=2),x=Math.max(x,n?C:_)}var U=2*(n?g:f)+x+c+l/2,E=0;!n&&I.text&&"bottom"===h&&m<=0&&(U+=E=U/2,Q+=E),y._hColorbarMoveTitle=E,y._hColorbarMoveCBTitle=Q;var T=c+l;t.select("."+cn.cbbg).attr("x",(n?R:D)-T/2-(n?g:0)).attr("y",(n?D:R)-(n?L:f+Q-E)).attr(n?"width":"height",Math.max(U-E,2)).attr(n?"height":"width",Math.max(L+T,2)).call(color_1.fill,u).call(color_1.stroke,e.bordercolor).style("stroke-width",c);var N=A?Math.max(C-10,0):0;if(t.selectAll("."+cn.cboutline).attr("x",(n?R:D+g)+N).attr("y",(n?D+f-L:R)+(F?j:0)).attr(n?"width":"height",Math.max(S,2)).attr(n?"height":"width",Math.max(L-(n?2*f+j:2*g+N),2)).call(color_1.stroke,e.outlinecolor).style({fill:"none","stroke-width":l}),t.attr("transform",strTranslate(b.l-(n?k*U:0),b.t-(n?0:(1-G)*U-Q))),!n&&(c||tinycolor(u).getAlpha()&&!tinycolor.equals(y.paper_bgcolor,u))){var M=J.selectAll("text"),W=M[0].length,Z=t.select("."+cn.cbbg).node(),O=drawing_1.bBox(Z),$=drawing_1.getTranslate(t);M.each((function(t,e){var r=W-1;if(0===e||e===r){var n,i=drawing_1.bBox(this),a=drawing_1.getTranslate(this);if(e===r){var o=i.right+a.x;(n=O.right+$.x+D-c-2+p-o)>0&&(n=0)}else if(0===e){var s=i.left+a.x;(n=O.left+$.x+D+c+2-s)<0&&(n=0)}n&&(W<3?this.setAttribute("transform","translate("+n+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}}))}var K={},q=FROM_TL[d],tt=FROM_BR[d],et=FROM_TL[h],rt=FROM_BR[h],nt=U-S;n?("pixels"===a?(K.y=m,K.t=L*et,K.b=L*rt):(K.t=K.b=0,K.yt=m+i*et,K.yb=m-i*rt),"pixels"===s?(K.x=p,K.l=U*q,K.r=U*tt):(K.l=nt*q,K.r=nt*tt,K.xl=p-o*q,K.xr=p+o*tt)):("pixels"===a?(K.x=p,K.l=L*q,K.r=L*tt):(K.l=K.r=0,K.xl=p+i*q,K.xr=p-i*tt),"pixels"===s?(K.y=1-m,K.t=U*et,K.b=U*rt):(K.t=nt*et,K.b=nt*rt,K.yt=m-o*et,K.yb=m+o*rt)),plots_1.autoMargin(r,e._id,K)}],r)}function makeEditable(t,e,r){var n,i,a,o="v"===e.orientation,s=r._fullLayout._size;dragelement.init({element:t.node(),gd:r,prepFn:function(){n=t.attr("transform"),setcursor(t)},moveFn:function(r,l){t.attr("transform",n+strTranslate(r,l)),i=dragelement.align((o?e._uFrac:e._vFrac)+r/s.w,o?e._thickFrac:e._lenFrac,0,1,e.xanchor),a=dragelement.align((o?e._vFrac:1-e._uFrac)-l/s.h,o?e._lenFrac:e._thickFrac,0,1,e.yanchor);var c=dragelement.getCursor(i,a,e.xanchor,e.yanchor);setcursor(t,c)},doneFn:function(){if(setcursor(t),void 0!==i&&void 0!==a){var n={};n[e._propPrefix+"x"]=i,n[e._propPrefix+"y"]=a,void 0!==e._traceIndex?registry.call("_guiRestyle",r,n,e._traceIndex):registry.call("_guiRelayout",r,n)}}})}function calcLevels(t,e,r){var n,i,a=e._levels,o=[],s=[],l=a.end+a.size/100,c=a.size,u=1.001*r[0]-.001*r[1],d=1.001*r[1]-.001*r[0];for(i=0;i<1e5&&(n=a.start+i*c,!(c>0?n>=l:n<=l));i++)n>u&&n<d&&o.push(n);if(e._fillgradient)s=[0];else if("function"==typeof e._fillcolor){var h=e._filllevels;if(h)for(l=h.end+h.size/100,c=h.size,i=0;i<1e5&&(n=h.start+i*c,!(c>0?n>=l:n<=l));i++)n>r[0]&&n<r[1]&&s.push(n);else s=o.map((function(t){return t-a.size/2})),s.push(s[s.length-1]+a.size)}else e._fillcolor&&"string"==typeof e._fillcolor&&(s=[0]);return a.size<0&&(o.reverse(),s.reverse()),{line:o,fill:s}}function mockColorBarAxis(t,e,r){var n=t._fullLayout,i="v"===e.orientation,a={type:"linear",range:r,tickmode:e.tickmode,nticks:e.nticks,tick0:e.tick0,dtick:e.dtick,tickvals:e.tickvals,ticktext:e.ticktext,ticks:e.ticks,ticklen:e.ticklen,tickwidth:e.tickwidth,tickcolor:e.tickcolor,showticklabels:e.showticklabels,ticklabelposition:e.ticklabelposition,ticklabeloverflow:e.ticklabeloverflow,ticklabelstep:e.ticklabelstep,tickfont:e.tickfont,tickangle:e.tickangle,tickformat:e.tickformat,exponentformat:e.exponentformat,minexponent:e.minexponent,separatethousands:e.separatethousands,showexponent:e.showexponent,showtickprefix:e.showtickprefix,tickprefix:e.tickprefix,showticksuffix:e.showticksuffix,ticksuffix:e.ticksuffix,title:e.title,showline:!0,anchor:"free",side:i?"right":"bottom",position:1},o=i?"y":"x",s={type:"linear",_id:o+e._id},l={letter:o,font:n.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:n.calendar};function c(t,e){return lib_1.coerce(a,s,layout_attributes$3,t,e)}return axis_defaults$1(a,s,c,l,n),position_defaults(a,s,c,l),s}var draw_1={draw:draw},colorbar={moduleType:"component",name:"colorbar",attributes:attributes$n,supplyDefaults:defaults$l,draw:draw_1.draw,hasColorbar:has_colorbar},localeEn={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}},localeEnUs={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}},extendFlat$5=lib_1.extendFlat,extendDeep=lib_1.extendDeep;function cloneLayoutOverride(t){var e;switch(t){case"themes__thumb":e={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":e={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:e={}}return e}function keyIsAxis(t){return["xaxis","yaxis","zaxis"].indexOf(t.slice(0,5))>-1}var cloneplot=function(t,e){var r,n=t.data,i=t.layout,a=extendDeep([],n),o=extendDeep({},i,cloneLayoutOverride(e.tileClass)),s=t._context||{};if(e.width&&(o.width=e.width),e.height&&(o.height=e.height),"thumbnail"===e.tileClass||"themes__thumb"===e.tileClass){o.annotations=[];var l=Object.keys(o);for(r=0;r<l.length;r++)keyIsAxis(l[r])&&(o[l[r]].title={text:""});for(r=0;r<a.length;r++){var c=a[r];c.showscale=!1,c.marker&&(c.marker.showscale=!1),registry.traceIs(c,"pie-like")&&(c.textposition="none")}}if(Array.isArray(e.annotations))for(r=0;r<e.annotations.length;r++)o.annotations.push(e.annotations[r]);var u=Object.keys(o).filter((function(t){return t.match(/^scene\d*$/)}));if(u.length){var d={};for("thumbnail"===e.tileClass&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),r=0;r<u.length;r++){var h=o[u[r]];h.xaxis||(h.xaxis={}),h.yaxis||(h.yaxis={}),h.zaxis||(h.zaxis={}),extendFlat$5(h.xaxis,d),extendFlat$5(h.yaxis,d),extendFlat$5(h.zaxis,d),h._scene=null}}var g=document.createElement("div");e.tileClass&&(g.className=e.tileClass);var f={gd:g,td:g,layout:o,data:a,config:{staticPlot:void 0===e.staticPlot||e.staticPlot,plotGlPixelRatio:void 0===e.plotGlPixelRatio?2:e.plotGlPixelRatio,displaylogo:e.displaylogo||!1,showLink:e.showLink||!1,showTips:e.showTips||!1,mapboxAccessToken:s.mapboxAccessToken}};return"transparent"!==e.setBackground&&(f.config.setBackground=e.setBackground||"opaque"),f.gd.defaultLayout=cloneLayoutOverride(e.tileClass),f},EventEmitter=events$1.EventEmitter;function toImage(t,e){var r=new EventEmitter,n=cloneplot(t,{format:"png"}),i=n.gd;i.style.position="absolute",i.style.left="-5000px",document.body.appendChild(i);var a=helpers$2.getRedrawFunc(i);return registry.call("_doPlot",i,n.data,n.layout,n.config).then(a).then((function(){var t=helpers$2.getDelay(i._fullLayout);setTimeout((function(){var t=tosvg(i),n=document.createElement("canvas");n.id=lib_1.randstr(),(r=svgtoimg({format:e.format,width:i._fullLayout.width,height:i._fullLayout.height,canvas:n,emitter:r,svg:t})).clean=function(){i&&document.body.removeChild(i)}}),t)})).catch((function(t){r.emit("error",t)})),r}var toimage=toImage,Snapshot={getDelay:helpers$2.getDelay,getRedrawFunc:helpers$2.getRedrawFunc,clone:cloneplot,toSVG:tosvg,svgToImg:svgtoimg,toImage:toimage,downloadImage:download},snapshot=Snapshot,core$1=createCommonjsModule((function(t,e){e.version=version$2.version;for(var r=e.register=registry.register,n=Object.keys(plot_api),i=0;i<n.length;i++){var a=n[i];"_"!==a.charAt(0)&&(e[a]=plot_api[a]),r({moduleType:"apiMethod",name:a,fn:plot_api[a]})}r(scatter),r([legend,fx,annotations,annotations3d,shapes,images,updatemenus,sliders,rangeslider,rangeselector,grid,errorbars,colorscale,colorbar,modebar]),r([localeEn,localeEnUs]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(r(window.PlotlyLocales),delete window.PlotlyLocales),e.Icons=ploticon,e.Plots={resize:plots_1.resize,graphJson:plots_1.graphJson,sendDataToCloud:plots_1.sendDataToCloud},e.Fx={hover:fx.hover,unhover:fx.unhover,loneHover:fx.loneHover,loneUnhover:fx.loneUnhover},e.Snapshot=snapshot,e.PlotSchema=plot_schema})),core=core$1,constants$1={TEXTPAD:3,eventDataKeys:["value","label"]},axisHoverFormat$2=axis_format_attributes.axisHoverFormat,hovertemplateAttrs$2=template_attributes.hovertemplateAttrs,texttemplateAttrs$1=template_attributes.texttemplateAttrs,pattern=attributes$p.pattern,extendFlat$4=extend.extendFlat,textFontAttrs=font_attributes({editType:"calc",arrayOk:!0,colorEditType:"style",description:""}),scatterMarkerAttrs=attributes$j.marker,scatterMarkerLineAttrs=scatterMarkerAttrs.line,markerLineWidth=extendFlat$4({},scatterMarkerLineAttrs.width,{dflt:0}),markerLine=extendFlat$4({width:markerLineWidth,editType:"calc"},attributes$m("marker.line")),marker=extendFlat$4({line:markerLine,editType:"calc"},attributes$m("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style",description:"Sets the opacity of the bars."},pattern:pattern}),attributes$6={x:attributes$j.x,x0:attributes$j.x0,dx:attributes$j.dx,y:attributes$j.y,y0:attributes$j.y0,dy:attributes$j.dy,xperiod:attributes$j.xperiod,yperiod:attributes$j.yperiod,xperiod0:attributes$j.xperiod0,yperiod0:attributes$j.yperiod0,xperiodalignment:attributes$j.xperiodalignment,yperiodalignment:attributes$j.yperiodalignment,xhoverformat:axisHoverFormat$2("x"),yhoverformat:axisHoverFormat$2("y"),text:attributes$j.text,texttemplate:texttemplateAttrs$1({editType:"plot"},{keys:constants$1.eventDataKeys}),hovertext:attributes$j.hovertext,hovertemplate:hovertemplateAttrs$2({},{keys:constants$1.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc",description:["Specifies the location of the `text`.","*inside* positions `text` inside, next to the bar end","(rotated and scaled if needed).","*outside* positions `text` outside, next to the bar end","(scaled if needed), unless there is another bar stacked on","this one, then the text gets pushed inside.","*auto* tries to position `text` inside the bar, but if","the bar is too small and no bar is stacked on this one","the text is moved outside.","If *none*, no text appears."].join(" ")},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot",description:["Determines if texts are kept at center or start/end points in `textposition` *inside* mode."].join(" ")},textangle:{valType:"angle",dflt:"auto",editType:"plot",description:["Sets the angle of the tick labels with respect to the bar.","For example, a `tickangle` of -90 draws the tick labels","vertically. With *auto* the texts may automatically be","rotated to fit with the maximum size in bars."].join(" ")},textfont:extendFlat$4({},textFontAttrs,{description:"Sets the font used for `text`."}),insidetextfont:extendFlat$4({},textFontAttrs,{description:"Sets the font used for `text` lying inside the bar."}),outsidetextfont:extendFlat$4({},textFontAttrs,{description:"Sets the font used for `text` lying outside the bar."}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc",description:["Constrain the size of text inside or outside a bar to be no","larger than the bar itself."].join(" ")},cliponaxis:extendFlat$4({},attributes$j.cliponaxis,{description:["Determines whether the text nodes","are clipped about the subplot axes.","To show the text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes",description:["Sets the orientation of the bars.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal)."].join(" ")},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc",description:["Sets where the bar base is drawn (in position axis units).","In *stack* or *relative* barmode,","traces that set *base* will be excluded","and drawn in *overlay* mode instead."].join(" ")},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc",description:["Shifts the position where the bar is drawn","(in position axis units).","In *group* barmode,","traces that set *offset* will be excluded","and drawn in *overlay* mode instead."].join(" ")},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc",description:["Sets the bar width (in position axis units)."].join(" ")},marker:marker,offsetgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","offsetgroup where bars of the same position coordinate will line up."].join(" ")},alignmentgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","alignmentgroup. This controls whether bars compute their positional","range dependently or independently."].join(" ")},selected:{marker:{opacity:attributes$j.selected.marker.opacity,color:attributes$j.selected.marker.color,editType:"style"},textfont:attributes$j.selected.textfont,editType:"style"},unselected:{marker:{opacity:attributes$j.unselected.marker.opacity,color:attributes$j.unselected.marker.color,editType:"style"},textfont:attributes$j.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"],description:"Renamed to `orientation`."}}},bin_attributes=function(t,e){return{start:{valType:"any",editType:"calc",description:["Sets the starting value for the",t,"axis bins. Defaults to the minimum data value,","shifted down if necessary to make nice round values","and to remove ambiguous bin edges. For example, if most of the","data is integers we shift the bin edges 0.5 down, so a `size`","of 5 would have a default `start` of -0.5, so it is clear","that 0-4 are in the first bin, 5-9 in the second, but","continuous data gets a start of 0 and bins [0,5), [5,10) etc.","Dates behave similarly, and `start` should be a date string.","For category data, `start` is based on the category serial","numbers, and defaults to -0.5.",e?"If multiple non-overlaying histograms share a subplot, the first explicit `start` is used exactly and all others are shifted down (if necessary) to differ from that one by an integer number of bins.":""].join(" ")},end:{valType:"any",editType:"calc",description:["Sets the end value for the",t,"axis bins. The last bin may not end exactly at this value,","we increment the bin edge by `size` from `start` until we","reach or exceed `end`. Defaults to the maximum data value.","Like `start`, for dates use a date string, and for category","data `end` is based on the category serial numbers."].join(" ")},size:{valType:"any",editType:"calc",description:["Sets the size of each",t,"axis bin.","Default behavior: If `nbins"+t+"` is 0 or omitted,","we choose a nice round bin size such that the number of bins","is about the same as the typical number of samples in each bin.","If `nbins"+t+"` is provided, we choose a nice round","bin size giving no more than that many bins.","For date data, use milliseconds or *M<n>* for months, as in","`axis.dtick`. For category data, the number of categories to","bin together (always defaults to 1).",e?"If multiple non-overlaying histograms share a subplot, the first explicit `size` is used and all others discarded. If no `size` is provided,the sample data from all traces is combined to determine `size` as described above.":""].join(" ")},editType:"calc"}},constants={eventDataKeys:["binNumber"]},axisHoverFormat$1=axis_format_attributes.axisHoverFormat,hovertemplateAttrs$1=template_attributes.hovertemplateAttrs,texttemplateAttrs=template_attributes.texttemplateAttrs,extendFlat$3=extend.extendFlat,attributes$5={x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the x axis."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the y axis."].join(" ")},xhoverformat:axisHoverFormat$1("x"),yhoverformat:axisHoverFormat$1("y"),text:extendFlat$3({},attributes$6.text,{description:["Sets hover text elements associated with each bar.","If a single string, the same string appears over all bars.","If an array of string, the items are mapped in order to the","this trace's coordinates."].join(" ")}),hovertext:extendFlat$3({},attributes$6.hovertext,{description:"Same as `text`."}),orientation:attributes$6.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc",description:["Specifies the binning function used for this histogram trace.","If *count*, the histogram values are computed by counting the","number of values lying inside each bin.","If *sum*, *avg*, *min*, *max*,","the histogram values are computed using","the sum, the average, the minimum or the maximum","of the values lying inside each bin respectively."].join(" ")},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc",description:["Specifies the type of normalization used for this histogram trace.","If **, the span of each bar corresponds to the number of","occurrences (i.e. the number of data points lying inside the bins).","If *percent* / *probability*, the span of each bar corresponds to","the percentage / fraction of occurrences with respect to the total","number of sample points","(here, the sum of all bin HEIGHTS equals 100% / 1).","If *density*, the span of each bar corresponds to the number of","occurrences in a bin divided by the size of the bin interval","(here, the sum of all bin AREAS equals the","total number of sample points).","If *probability density*, the area of each bar corresponds to the","probability that an event will fall into the corresponding bin","(here, the sum of all bin AREAS equals 1)."].join(" ")},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc",description:["If true, display the cumulative distribution by summing the","binned values. Use the `direction` and `centralbin` attributes","to tune the accumulation method.","Note: in this mode, the *density* `histnorm` settings behave","the same as their equivalents without *density*:","** and *density* both rise to the number of data points, and","*probability* and *probability density* both rise to the","number of sample points."].join(" ")},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc",description:["Only applies if cumulative is enabled.","If *increasing* (default) we sum all prior bins, so the result","increases from left to right. If *decreasing* we sum later bins","so the result decreases from left to right."].join(" ")},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc",description:["Only applies if cumulative is enabled.","Sets whether the current bin is included, excluded, or has half","of its value included in the current cumulative value.","*include* is the default for compatibility with various other","tools, however it introduces a half-bin bias to the results.","*exclude* makes the opposite half-bin bias, and *half* removes","it."].join(" ")},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `xbins.size` is provided."].join(" ")},xbins:bin_attributes("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `ybins.size` is provided."].join(" ")},ybins:bin_attributes("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobinx` is not needed. However, we accept","`autobinx: true` or `false` and will update `xbins` accordingly","before deleting `autobinx` from the trace."].join(" ")},autobiny:{valType:"boolean",dflt:null,editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobiny` is not needed. However, we accept","`autobiny: true` or `false` and will update `ybins` accordingly","before deleting `autobiny` from the trace."].join(" ")},bingroup:{valType:"string",dflt:"",editType:"calc",description:["Set a group of histogram traces which will have compatible bin settings.","Note that traces on the same subplot and with the same *orientation*","under `barmode` *stack*, *relative* and *group* are forced into the same bingroup,","Using `bingroup`, traces under `barmode` *overlay* and on different axes","(of the same axis type) can have compatible bin settings.","Note that histogram and histogram2d* trace can share the same `bingroup`"].join(" ")},hovertemplate:hovertemplateAttrs$1({},{keys:constants.eventDataKeys}),texttemplate:texttemplateAttrs({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:extendFlat$3({},attributes$6.textposition,{arrayOk:!1}),textfont:font_attributes({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the text font."}),outsidetextfont:font_attributes({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the font used for `text` lying outside the bar."}),insidetextfont:font_attributes({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the font used for `text` lying inside the bar."}),insidetextanchor:attributes$6.insidetextanchor,textangle:attributes$6.textangle,cliponaxis:attributes$6.cliponaxis,constraintext:attributes$6.constraintext,marker:attributes$6.marker,offsetgroup:attributes$6.offsetgroup,alignmentgroup:attributes$6.alignmentgroup,selected:attributes$6.selected,unselected:attributes$6.unselected,_deprecated:{bardir:attributes$6._deprecated.bardir}},layout_attributes$1={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *relative*, the bars are stacked on top of one another,","with negative values below the axis, positive values above","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to an *opacity* to see multiple bars."].join(" ")},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc",description:["Sets the normalization for bar traces on the graph.","With *fraction*, the value of each bar is divided by the sum of all","values at that location coordinate.","*percent* is the same but multiplied by 100 to show percentages."].join(" ")},bargap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}},hasColorscale=helpers$b.hasColorscale,coercePattern=lib_1.coercePattern,style_defaults=function(t,e,r,n,i){var a=r("marker.color",n),o=hasColorscale(t,"marker");o&&defaults$k(t,e,i,r,{prefix:"marker.",cLetter:"c"}),r("marker.line.color",color_1.defaultLine),hasColorscale(t,"marker.line")&&defaults$k(t,e,i,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width"),r("marker.opacity"),coercePattern(r,"marker.pattern",a,o),r("selected.marker.color"),r("unselected.marker.color")},getAxisGroup$2=constraints.getAxisGroup,coerceFont=lib_1.coerceFont;function supplyDefaults$1(t,e,r,n){function i(r,n){return lib_1.coerce(t,e,attributes$6,r,n)}if(xy_defaults(t,e,n,i)){period_defaults(t,e,n,i),i("xhoverformat"),i("yhoverformat"),i("orientation",e.x&&!e.y?"h":"v"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate");var a=i("textposition");handleText$1(t,e,n,i,a,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),style_defaults(t,e,i,r,n);var o=(e.marker.line||{}).color,s=registry.getComponentMethod("errorbars","supplyDefaults");s(t,e,o||color_1.defaultLine,{axis:"y"}),s(t,e,o||color_1.defaultLine,{axis:"x",inherit:"y"}),lib_1.coerceSelectionMarkerOpacity(e,i)}else e.visible=!1}function handleGroupingDefaults$1(t,e,r,n){var i=e.orientation,a=e[{v:"x",h:"y"}[i]+"axis"],o=getAxisGroup$2(r,a)+i,s=r._alignmentOpts||{},l=n("alignmentgroup"),c=s[o];c||(c=s[o]={});var u=c[l];u?u.traces.push(e):u=c[l]={traces:[e],alignmentIndex:Object.keys(c).length,offsetGroups:{}};var d=n("offsetgroup"),h=u.offsetGroups,g=h[d];d&&(g||(g=h[d]={offsetIndex:Object.keys(h).length}),e._offsetIndex=g.offsetIndex)}function crossTraceDefaults(t,e){var r;function n(t){return lib_1.coerce(r._input,r,attributes$6,t)}if("group"===e.barmode)for(var i=0;i<t.length;i++)"bar"===(r=t[i]).type&&handleGroupingDefaults$1(r._input,r,e,n)}function handleText$1(t,e,r,n,i,a){var o=!(!1===(a=a||{}).moduleHasSelected),s=!(!1===a.moduleHasUnselected),l=!(!1===a.moduleHasConstrain),c=!(!1===a.moduleHasCliponaxis),u=!(!1===a.moduleHasTextangle),d=!(!1===a.moduleHasInsideanchor),h=!!a.hasPathbar,g=Array.isArray(i)||"auto"===i,f=g||"inside"===i,p=g||"outside"===i;if(f||p){var m=coerceFont(n,"textfont",r.font),y=lib_1.extendFlat({},m),b=!(t.textfont&&t.textfont.color);if(b&&delete y.color,coerceFont(n,"insidetextfont",y),h){var v=lib_1.extendFlat({},m);b&&delete v.color,coerceFont(n,"pathbar.textfont",v)}p&&coerceFont(n,"outsidetextfont",m),o&&n("selected.textfont.color"),s&&n("unselected.textfont.color"),l&&n("constraintext"),c&&n("cliponaxis"),u&&n("textangle"),n("texttemplate")}f&&d&&n("insidetextanchor")}var defaults$4={supplyDefaults:supplyDefaults$1,crossTraceDefaults:crossTraceDefaults,handleGroupingDefaults:handleGroupingDefaults$1,handleText:handleText$1},handleText=defaults$4.handleText,defaults$3=function(t,e,r,n){function i(r,n){return lib_1.coerce(t,e,attributes$5,r,n)}var a=i("x"),o=i("y");i("cumulative.enabled")&&(i("cumulative.direction"),i("cumulative.currentbin")),i("text");var s=i("textposition");handleText(t,e,n,i,s,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat");var l=i("orientation",o&&!a?"h":"v"),c="v"===l?"x":"y",u="v"===l?"y":"x",d=a&&o?Math.min(lib_1.minRowLength(a)&&lib_1.minRowLength(o)):lib_1.minRowLength(e[c]||[]);if(d){e._length=d,registry.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y"],n),e[u]&&i("histfunc"),i("histnorm"),i("autobin"+c),style_defaults(t,e,i,r,n),lib_1.coerceSelectionMarkerOpacity(e,i);var h=(e.marker.line||{}).color,g=registry.getComponentMethod("errorbars","supplyDefaults");g(t,e,h||color_1.defaultLine,{axis:"y"}),g(t,e,h||color_1.defaultLine,{axis:"x",inherit:"y"})}else e.visible=!1},traceIs=registry.traceIs,handleGroupingDefaults=defaults$4.handleGroupingDefaults,nestedProperty=lib_1.nestedProperty,getAxisGroup$1=constraints.getAxisGroup,BINATTRS=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],BINDIRECTIONS=["x","y"],cross_trace_defaults=function(t,e){var r,n,i,a,o,s,l,c=e._histogramBinOpts={},u=[],d={},h=[];function g(t,e){return lib_1.coerce(r._input,r,r._module.attributes,t,e)}function f(t){return"v"===t.orientation?"x":"y"}function p(t,r,n){var i=t.uid+"__"+n;r||(r=i);var a=function(t,r){return axis_ids.getFromTrace({_fullLayout:e},t,r).type}(t,n),o=t[n+"calendar"]||"",s=c[r],l=!0;s&&(a===s.axType&&o===s.calendar?(l=!1,s.traces.push(t),s.dirs.push(n)):(r=i,a!==s.axType&&lib_1.warn(["Attempted to group the bins of trace",t.index,"set on a","type:"+a,"axis","with bins on","type:"+s.axType,"axis."].join(" ")),o!==s.calendar&&lib_1.warn(["Attempted to group the bins of trace",t.index,"set with a",o,"calendar","with bins",s.calendar?"on a "+s.calendar+" calendar":"w/o a set calendar"].join(" ")))),l&&(c[r]={traces:[t],dirs:[n],axType:a,calendar:t[n+"calendar"]||""}),t["_"+n+"bingroup"]=r}for(o=0;o<t.length;o++)r=t[o],traceIs(r,"histogram")&&(u.push(r),delete r._xautoBinFinished,delete r._yautoBinFinished,traceIs(r,"2dMap")||handleGroupingDefaults(r._input,r,e,g));var m=e._alignmentOpts||{};for(o=0;o<u.length;o++){if(r=u[o],i="",!traceIs(r,"2dMap")){if(a=f(r),"group"===e.barmode&&r.alignmentgroup){var y=r[a+"axis"],b=getAxisGroup$1(e,y)+r.orientation;(m[b]||{})[r.alignmentgroup]&&(i=b)}i||"overlay"===e.barmode||(i=getAxisGroup$1(e,r.xaxis)+getAxisGroup$1(e,r.yaxis)+f(r))}i?(d[i]||(d[i]=[]),d[i].push(r)):h.push(r)}for(i in d)if(1!==(n=d[i]).length){var v=!1;for(n.length&&(r=n[0],v=g("bingroup")),i=v||i,o=0;o<n.length;o++){var x=(r=n[o])._input.bingroup;x&&x!==i&&lib_1.warn(["Trace",r.index,"must match","within bingroup",i+".","Ignoring its bingroup:",x,"setting."].join(" ")),r.bingroup=i,p(r,i,f(r))}}else h.push(n[0]);for(o=0;o<h.length;o++){r=h[o];var I=g("bingroup");if(traceIs(r,"2dMap"))for(l=0;l<2;l++){var B=g((a=BINDIRECTIONS[l])+"bingroup",I?I+"__"+a:null);p(r,B,a)}else p(r,I,f(r))}for(i in c){var C=c[i];for(n=C.traces,s=0;s<BINATTRS.length;s++){var F,A,Q=BINATTRS[s],_=Q.name;if("nbins"!==_||!C.sizeFound){for(o=0;o<n.length;o++){if(r=n[o],a=C.dirs[o],F=Q.aStr[a],void 0!==nestedProperty(r._input,F).get()){C[_]=g(F),C[_+"Found"]=!0;break}(A=(r._autoBin||{})[a]||{})[_]&&nestedProperty(r,F).set(A[_])}if("start"===_||"end"===_)for(;o<n.length;o++)(r=n[o])["_"+a+"bingroup"]&&g(F,(A=(r._autoBin||{})[a]||{})[_]);"nbins"!==_||C.sizeFound||C.nbinsFound||(r=n[0],C[_]=g(F))}}}},layout_defaults=function(t,e,r){function n(r,n){return lib_1.coerce(t,e,layout_attributes$1,r,n)}for(var i=!1,a=!1,o=!1,s={},l=n("barmode"),c=0;c<r.length;c++){var u=r[c];if(registry.traceIs(u,"bar")&&u.visible){if(i=!0,"group"===l){var d=u.xaxis+u.yaxis;s[d]&&(o=!0),s[d]=!0}if(u.visible&&"histogram"===u.type)"category"!==axes_1.getFromId({_fullLayout:e},u["v"===u.orientation?"xaxis":"yaxis"]).type&&(a=!0)}}i?("overlay"!==l&&n("barnorm"),n("bargap",a&&!o?0:.2),n("bargroupgap")):delete e.barmode},arrays_to_calcdata=function(t,e){for(var r=0;r<t.length;r++)t[r].i=r;lib_1.mergeArray(e.text,t,"tx"),lib_1.mergeArray(e.hovertext,t,"htx");var n=e.marker;if(n){lib_1.mergeArray(n.opacity,t,"mo",!0),lib_1.mergeArray(n.color,t,"mc");var i=n.line;i&&(lib_1.mergeArray(i.color,t,"mlc"),lib_1.mergeArrayCastPositive(i.width,t,"mlw"))}},bin_functions={count:function(t,e,r){return r[t]++,1},sum:function(t,e,r,n){var i=n[e];return fastIsnumeric(i)?(i=Number(i),r[t]+=i,i):0},avg:function(t,e,r,n,i){var a=n[e];return fastIsnumeric(a)&&(a=Number(a),r[t]+=a,i[t]++),0},min:function(t,e,r,n){var i=n[e];if(fastIsnumeric(i)){if(i=Number(i),!fastIsnumeric(r[t]))return r[t]=i,i;if(r[t]>i){var a=i-r[t];return r[t]=i,a}}return 0},max:function(t,e,r,n){var i=n[e];if(fastIsnumeric(i)){if(i=Number(i),!fastIsnumeric(r[t]))return r[t]=i,i;if(r[t]<i){var a=i-r[t];return r[t]=i,a}}return 0}},norm_functions={percent:function(t,e){for(var r=t.length,n=100/e,i=0;i<r;i++)t[i]*=n},probability:function(t,e){for(var r=t.length,n=0;n<r;n++)t[n]/=e},density:function(t,e,r,n){var i=t.length;n=n||1;for(var a=0;a<i;a++)t[a]*=r[a]*n},"probability density":function(t,e,r,n){var i=t.length;n&&(e/=n);for(var a=0;a<i;a++)t[a]*=r[a]/e}},average=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)e[i]?(t[i]/=e[i],n+=t[i]):t[i]=null;return n},oneYear=numerical.ONEAVGYEAR,oneMonth=numerical.ONEAVGMONTH,oneDay=numerical.ONEDAY,oneHour=numerical.ONEHOUR,oneMin=numerical.ONEMIN,oneSec=numerical.ONESEC,tickIncrement=axes_1.tickIncrement,bin_label_vals=function(t,e,r,n,i){var a,o,s=-1.1*e,l=-.1*e,c=t-l,u=r[0],d=r[1],h=Math.min(biggestDigitChanged(u+l,u+c,n,i),biggestDigitChanged(d+l,d+c,n,i)),g=Math.min(biggestDigitChanged(u+s,u+l,n,i),biggestDigitChanged(d+s,d+l,n,i));if(h>g&&g<Math.abs(d-u)/4e3?(a=h,o=!1):(a=Math.min(h,g),o=!0),"date"===n.type&&a>oneDay){var f=a===oneYear?1:6,p=a===oneYear?"M12":"M1";return function(e,r){var a=n.c2d(e,oneYear,i),s=a.indexOf("-",f);s>0&&(a=a.substr(0,s));var l=n.d2c(a,0,i);if(l<e){var c=tickIncrement(l,p,!1,i);(l+c)/2<e+t&&(l=c)}return r&&o?tickIncrement(l,p,!0,i):l}}return function(e,r){var n=a*Math.round(e/a);return n+a/10<e&&n+.9*a<e+t&&(n+=a),r&&o&&(n-=a),n}};function biggestDigitChanged(t,e,r,n){if(t*e<=0)return 1/0;for(var i=Math.abs(e-t),a="date"===r.type,o=biggestGuaranteedDigitChanged(i,a),s=0;s<10;s++){var l=biggestGuaranteedDigitChanged(80*o,a);if(o===l)break;if(!didDigitChange(l,t,e,a,r,n))break;o=l}return o}function biggestGuaranteedDigitChanged(t,e){return e&&t>oneSec?t>oneDay?t>1.1*oneYear?oneYear:t>1.1*oneMonth?oneMonth:oneDay:t>oneHour?oneHour:t>oneMin?oneMin:oneSec:Math.pow(10,Math.floor(Math.log(t)/Math.LN10))}function didDigitChange(t,e,r,n,i,a){if(n&&t>oneDay){var o=dateParts(e,i,a),s=dateParts(r,i,a),l=t===oneYear?0:1;return o[l]!==s[l]}return Math.floor(r/t)-Math.floor(e/t)>.1}function dateParts(t,e,r){var n=e.c2d(t,oneYear,r).split("-");return""===n[0]&&(n.unshift(),n[0]="-"+n[0]),n}function calc$3(t,e){var r,n,i,a,o=[],s=[],l="h"===e.orientation,c=axes_1.getFromId(t,l?e.yaxis:e.xaxis),u=l?"y":"x",d={x:"y",y:"x"}[u],h=e[u+"calendar"],g=e.cumulative,f=calcAllAutoBins(t,e,c,u),p=f[0],m=f[1],y="string"==typeof p.size,b=[],v=y?b:p,x=[],I=[],B=[],C=0,F=e.histnorm,A=e.histfunc,Q=-1!==F.indexOf("density");g.enabled&&Q&&(F=F.replace(/ ?density$/,""),Q=!1);var _,w="max"===A||"min"===A?null:0,U=bin_functions.count,S=norm_functions[F],E=!1,L=function(t){return c.r2c(t,0,h)};for(lib_1.isArrayOrTypedArray(e[d])&&"count"!==A&&(_=e[d],E="avg"===A,U=bin_functions[A]),r=L(p.start),i=L(p.end)+(r-axes_1.tickIncrement(r,p.size,!1,h))/1e6;r<i&&o.length<1e6&&(n=axes_1.tickIncrement(r,p.size,!1,h),o.push((r+n)/2),s.push(w),B.push([]),b.push(r),Q&&x.push(1/(n-r)),E&&I.push(0),!(n<=r));)r=n;b.push(r),y||"date"!==c.type||(v={start:L(v.start),end:L(v.end),size:v.size}),t._fullLayout._roundFnOpts||(t._fullLayout._roundFnOpts={});var T=e["_"+u+"bingroup"],R={leftGap:1/0,rightGap:1/0};T&&(t._fullLayout._roundFnOpts[T]||(t._fullLayout._roundFnOpts[T]=R),R=t._fullLayout._roundFnOpts[T]);var k,G=s.length,N=!0,M=R.leftGap,D=R.rightGap,X={};for(r=0;r<m.length;r++){var V=m[r];(a=lib_1.findBin(V,v))>=0&&a<G&&(C+=U(a,r,s,_,I),N&&B[a].length&&V!==m[B[a][0]]&&(N=!1),B[a].push(r),X[r]=a,M=Math.min(M,V-b[a]),D=Math.min(D,b[a+1]-V))}R.leftGap=M,R.rightGap=D,N||(k=function(e,r){return function(){var n=t._fullLayout._roundFnOpts[T];return bin_label_vals(n.leftGap,n.rightGap,b,c,h)(e,r)}}),E&&(C=average(s,I)),S&&S(s,C,x),g.enabled&&cdf(s,g.direction,g.currentbin);var W=Math.min(o.length,s.length),Z=[],O=0,$=W-1;for(r=0;r<W;r++)if(s[r]){O=r;break}for(r=W-1;r>=O;r--)if(s[r]){$=r;break}for(r=O;r<=$;r++)if(fastIsnumeric(o[r])&&fastIsnumeric(s[r])){var H={p:o[r],s:s[r],b:0};g.enabled||(H.pts=B[r],N?H.ph0=H.ph1=B[r].length?m[B[r][0]]:o[r]:(e._computePh=!0,H.ph0=k(b[r]),H.ph1=k(b[r+1],!0))),Z.push(H)}return 1===Z.length&&(Z[0].width1=axes_1.tickIncrement(Z[0].p,p.size,!1,h)-Z[0].p),arrays_to_calcdata(Z,e),lib_1.isArrayOrTypedArray(e.selectedpoints)&&lib_1.tagSelected(Z,e,X),Z}function calcAllAutoBins(t,e,r,n,i){var a,o,s,l,c,u,d,h=n+"bins",g=t._fullLayout,f=e["_"+n+"bingroup"],p=g._histogramBinOpts[f],m="overlay"===g.barmode,y=function(t){return r.r2c(t,0,l)},b=function(t){return r.c2r(t,0,l)},v="date"===r.type?function(t){return t||0===t?lib_1.cleanDate(t,null,l):null}:function(t){return fastIsnumeric(t)?Number(t):null};function x(t,e,r){e[t+"Found"]?(e[t]=v(e[t]),null===e[t]&&(e[t]=r[t])):(u[t]=e[t]=r[t],lib_1.nestedProperty(o[0],h+"."+t).set(r[t]))}if(e["_"+n+"autoBinFinished"])delete e["_"+n+"autoBinFinished"];else{o=p.traces;var I=[],B=!0,C=!1,F=!1;for(a=0;a<o.length;a++)if((s=o[a]).visible){var A=p.dirs[a];c=s["_"+A+"pos0"]=r.makeCalcdata(s,A),I=lib_1.concat(I,c),delete s["_"+n+"autoBinFinished"],!0===e.visible&&(B?B=!1:(delete s._autoBin,s["_"+n+"autoBinFinished"]=1),registry.traceIs(s,"2dMap")&&(C=!0),"histogram2dcontour"===s.type&&(F=!0))}l=o[0][n+"calendar"];var Q=axes_1.autoBin(I,r,p.nbins,C,l,p.sizeFound&&p.size),_=o[0]._autoBin={};if(u=_[p.dirs[0]]={},F&&(p.size||(Q.start=b(axes_1.tickIncrement(y(Q.start),Q.size,!0,l))),void 0===p.end&&(Q.end=b(axes_1.tickIncrement(y(Q.end),Q.size,!1,l)))),m&&!registry.traceIs(e,"2dMap")&&0===Q._dataSpan&&"category"!==r.type&&"multicategory"!==r.type){if(i)return[Q,c,!0];Q=handleSingleValueOverlays(t,e,r,n,h)}(d=s.cumulative||{}).enabled&&"include"!==d.currentbin&&("decreasing"===d.direction?Q.start=b(axes_1.tickIncrement(y(Q.start),Q.size,!0,l)):Q.end=b(axes_1.tickIncrement(y(Q.end),Q.size,!1,l))),p.size=Q.size,p.sizeFound||(u.size=Q.size,lib_1.nestedProperty(o[0],h+".size").set(Q.size)),x("start",p,Q),x("end",p,Q)}c=e["_"+n+"pos0"],delete e["_"+n+"pos0"];var w=e._input[h]||{},U=lib_1.extendFlat({},p),S=p.start,E=r.r2l(w.start),L=void 0!==E;if((p.startFound||L)&&E!==r.r2l(S)){var T=L?E:lib_1.aggNums(Math.min,null,c),R={type:"category"===r.type||"multicategory"===r.type?"linear":r.type,r2l:r.r2l,dtick:p.size,tick0:S,calendar:l,range:[T,axes_1.tickIncrement(T,p.size,!1,l)].map(r.l2r)},k=axes_1.tickFirst(R);k>r.r2l(T)&&(k=axes_1.tickIncrement(k,p.size,!0,l)),U.start=r.l2r(k),L||lib_1.nestedProperty(e,h+".start").set(U.start)}var G=p.end,N=r.r2l(w.end),M=void 0!==N;if((p.endFound||M)&&N!==r.r2l(G)){var D=M?N:lib_1.aggNums(Math.max,null,c);U.end=r.l2r(D),M||lib_1.nestedProperty(e,h+".start").set(U.end)}var X="autobin"+n;return!1===e._input[X]&&(e._input[h]=lib_1.extendFlat({},e[h]||{}),delete e._input[X],delete e[X]),[U,c]}function handleSingleValueOverlays(t,e,r,n,i){var a,o,s,l=t._fullLayout,c=getConnectedHistograms(t,e),u=!1,d=1/0,h=[e];for(a=0;a<c.length;a++)if((o=c[a])===e)u=!0;else if(u){var g=calcAllAutoBins(t,o,r,n,!0),f=g[0],p=g[2];o["_"+n+"autoBinFinished"]=1,o["_"+n+"pos0"]=g[1],p?h.push(o):d=Math.min(d,f.size)}else s=l._histogramBinOpts[o["_"+n+"bingroup"]],d=Math.min(d,s.size||o[i].size);var m=new Array(h.length);for(a=0;a<h.length;a++)for(var y=h[a]["_"+n+"pos0"],b=0;b<y.length;b++)if(void 0!==y[b]){m[a]=y[b];break}for(isFinite(d)||(d=lib_1.distinctVals(m).minDiff),a=0;a<h.length;a++){var v=(o=h[a])[n+"calendar"],x={start:r.c2r(m[a]-d/2,0,v),end:r.c2r(m[a]+d/2,0,v),size:d};o._input[i]=o[i]=x,(s=l._histogramBinOpts[o["_"+n+"bingroup"]])&&lib_1.extendFlat(s,x)}return e[i]}function getConnectedHistograms(t,e){for(var r=e.xaxis,n=e.yaxis,i=e.orientation,a=[],o=t._fullData,s=0;s<o.length;s++){var l=o[s];"histogram"===l.type&&!0===l.visible&&l.orientation===i&&l.xaxis===r&&l.yaxis===n&&a.push(l)}return a}function cdf(t,e,r){var n,i,a;function o(e){a=t[e],t[e]/=2}function s(e){i=t[e],t[e]=a+i/2,a+=i}if("half"===r)if("increasing"===e)for(o(0),n=1;n<t.length;n++)s(n);else for(o(t.length-1),n=t.length-2;n>=0;n--)s(n);else if("increasing"===e){for(n=1;n<t.length;n++)t[n]+=t[n-1];"exclude"===r&&(t.unshift(0),t.pop())}else{for(n=t.length-2;n>=0;n--)t[n]+=t[n+1];"exclude"===r&&(t.push(0),t.shift())}}var calc_1$1={calc:calc$3,calcAllAutoBins:calcAllAutoBins},sieve=Sieve,distinctVals$1=lib_1.distinctVals,BADNUM$2=numerical.BADNUM;function Sieve(t,e){this.traces=t,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var r=1/0,n=[],i=0;i<t.length;i++){for(var a=t[i],o=0;o<a.length;o++){var s=a[o];s.p!==BADNUM$2&&n.push(s.p)}a[0]&&a[0].width1&&(r=Math.min(a[0].width1,r))}this.positions=n;var l=distinctVals$1(n);this.distinctPositions=l.vals,1===l.vals.length&&r!==1/0?this.minDiff=r:this.minDiff=Math.min(l.minDiff,r);var c=(e.posAxis||{}).type;"category"!==c&&"multicategory"!==c||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}Sieve.prototype.put=function(t,e){var r=this.getLabel(t,e),n=this.bins[r]||0;return this.bins[r]=n+e,n},Sieve.prototype.get=function(t,e){var r=this.getLabel(t,e);return this.bins[r]||0},Sieve.prototype.getLabel=function(t,e){return(e<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?t:Math.round(t/this.binWidth))};var isArrayOrTypedArray$2=lib_1.isArrayOrTypedArray,BADNUM$1=numerical.BADNUM,getAxisGroup=constraints.getAxisGroup;function crossTraceCalc(t,e){for(var r=e.xaxis,n=e.yaxis,i=t._fullLayout,a=t._fullData,o=t.calcdata,s=[],l=[],c=0;c<a.length;c++){var u=a[c];if(!0===u.visible&&registry.traceIs(u,"bar")&&u.xaxis===r._id&&u.yaxis===n._id&&("h"===u.orientation?s.push(o[c]):l.push(o[c]),u._computePh))for(var d=t.calcdata[c],h=0;h<d.length;h++)"function"==typeof d[h].ph0&&(d[h].ph0=d[h].ph0()),"function"==typeof d[h].ph1&&(d[h].ph1=d[h].ph1())}var g={xCat:"category"===r.type||"multicategory"===r.type,yCat:"category"===n.type||"multicategory"===n.type,mode:i.barmode,norm:i.barnorm,gap:i.bargap,groupgap:i.bargroupgap};setGroupPositions(t,r,n,l,g),setGroupPositions(t,n,r,s,g)}function setGroupPositions(t,e,r,n,i){if(n.length){var a,o,s,l;switch(initBase(r,n),i.mode){case"overlay":setGroupPositionsInOverlayMode(e,r,n,i);break;case"group":for(a=[],o=[],s=0;s<n.length;s++)void 0===(l=n[s])[0].trace.offset?o.push(l):a.push(l);o.length&&setGroupPositionsInGroupMode(t,e,r,o,i),a.length&&setGroupPositionsInOverlayMode(e,r,a,i);break;case"stack":case"relative":for(a=[],o=[],s=0;s<n.length;s++)void 0===(l=n[s])[0].trace.base?o.push(l):a.push(l);o.length&&setGroupPositionsInStackOrRelativeMode(t,e,r,o,i),a.length&&setGroupPositionsInOverlayMode(e,r,a,i)}collectExtents(n,e)}}function initBase(t,e){var r,n;for(r=0;r<e.length;r++){var i,a=e[r],o=a[0].trace,s="funnel"===o.type?o._base:o.base,l="h"===o.orientation?o.xcalendar:o.ycalendar,c="category"===t.type||"multicategory"===t.type?function(){return null}:t.d2c;if(isArrayOrTypedArray$2(s)){for(n=0;n<Math.min(s.length,a.length);n++)i=c(s[n],0,l),fastIsnumeric(i)?(a[n].b=+i,a[n].hasB=1):a[n].b=0;for(;n<a.length;n++)a[n].b=0}else{i=c(s,0,l);var u=fastIsnumeric(i);for(i=u?i:0,n=0;n<a.length;n++)a[n].b=i,u&&(a[n].hasB=1)}}}function setGroupPositionsInOverlayMode(t,e,r,n){for(var i=0;i<r.length;i++){var a=r[i],o=new sieve([a],{posAxis:t,sepNegVal:!1,overlapNoMerge:!n.norm});setOffsetAndWidth(t,o,n),n.norm?(sieveBars(o),normalizeBars(e,o,n)):setBaseAndTop(e,o)}}function setGroupPositionsInGroupMode(t,e,r,n,i){var a=new sieve(n,{posAxis:e,sepNegVal:!1,overlapNoMerge:!i.norm});setOffsetAndWidthInGroupMode(t,e,a,i),unhideBarsWithinTrace(a,e),i.norm?(sieveBars(a),normalizeBars(r,a,i)):setBaseAndTop(r,a)}function setGroupPositionsInStackOrRelativeMode(t,e,r,n,i){var a=new sieve(n,{posAxis:e,sepNegVal:"relative"===i.mode,overlapNoMerge:!(i.norm||"stack"===i.mode||"relative"===i.mode)});setOffsetAndWidth(e,a,i),stackBars(r,a,i);for(var o=0;o<n.length;o++)for(var s=n[o],l=0;l<s.length;l++){var c=s[l];if(c.s!==BADNUM$1)c.b+c.s===a.get(c.p,c.s)&&(c._outmost=!0)}i.norm&&normalizeBars(r,a,i)}function setOffsetAndWidth(t,e,r){for(var n=e.minDiff,i=e.traces,a=n*(1-r.gap),o=a*(1-(r.groupgap||0)),s=-o/2,l=0;l<i.length;l++){var c=i[l][0].t;c.barwidth=o,c.poffset=s,c.bargroupwidth=a,c.bardelta=n}e.binWidth=i[0][0].t.barwidth/100,applyAttributes(e),setBarCenterAndWidth(t,e),updatePositionAxis(t,e)}function setOffsetAndWidthInGroupMode(t,e,r,n){for(var i=t._fullLayout,a=r.positions,o=r.distinctPositions,s=r.minDiff,l=r.traces,c=l.length,u=a.length!==o.length,d=s*(1-n.gap),h=getAxisGroup(i,e._id)+l[0][0].trace.orientation,g=i._alignmentOpts[h]||{},f=0;f<c;f++){var p,m,y=l[f],b=y[0].trace,v=g[b.alignmentgroup]||{},x=Object.keys(v.offsetGroups||{}).length,I=(p=x?d/x:u?d/c:d)*(1-(n.groupgap||0));m=x?((2*b._offsetIndex+1-x)*p-I)/2:u?((2*f+1-c)*p-I)/2:-I/2;var B=y[0].t;B.barwidth=I,B.poffset=m,B.bargroupwidth=d,B.bardelta=s}r.binWidth=l[0][0].t.barwidth/100,applyAttributes(r),setBarCenterAndWidth(e,r),updatePositionAxis(e,r,u)}function applyAttributes(t){var e,r,n=t.traces;for(e=0;e<n.length;e++){var i,a=n[e],o=a[0],s=o.trace,l=o.t,c=s._offset||s.offset,u=l.poffset;if(isArrayOrTypedArray$2(c)){for(i=Array.prototype.slice.call(c,0,a.length),r=0;r<i.length;r++)fastIsnumeric(i[r])||(i[r]=u);for(r=i.length;r<a.length;r++)i.push(u);l.poffset=i}else void 0!==c&&(l.poffset=c);var d=s._width||s.width,h=l.barwidth;if(isArrayOrTypedArray$2(d)){var g=Array.prototype.slice.call(d,0,a.length);for(r=0;r<g.length;r++)fastIsnumeric(g[r])||(g[r]=h);for(r=g.length;r<a.length;r++)g.push(h);if(l.barwidth=g,void 0===c){for(i=[],r=0;r<a.length;r++)i.push(u+(h-g[r])/2);l.poffset=i}}else void 0!==d&&(l.barwidth=d,void 0===c&&(l.poffset=u+(h-d)/2))}}function setBarCenterAndWidth(t,e){for(var r=e.traces,n=getAxisLetter(t),i=0;i<r.length;i++)for(var a=r[i],o=a[0].t,s=o.poffset,l=Array.isArray(s),c=o.barwidth,u=Array.isArray(c),d=0;d<a.length;d++){var h=a[d],g=h.w=u?c[d]:c;h[n]=h.p+(l?s[d]:s)+g/2}}function updatePositionAxis(t,e,r){var n=e.traces,i=e.minDiff/2;axes_1.minDtick(t,e.minDiff,e.distinctPositions[0],r);for(var a=0;a<n.length;a++){var o,s,l,c,u=n[a],d=u[0],h=d.trace,g=[];for(c=0;c<u.length;c++)s=(o=u[c]).p-i,l=o.p+i,g.push(s,l);if(h.width||h.offset){var f=d.t,p=f.poffset,m=f.barwidth,y=Array.isArray(p),b=Array.isArray(m);for(c=0;c<u.length;c++){o=u[c];var v=y?p[c]:p,x=b?m[c]:m;l=(s=o.p+v)+x,g.push(s,l)}}h._extremes[t._id]=axes_1.findExtremes(t,g,{padded:!1})}}function setBaseAndTop(t,e){for(var r=e.traces,n=getAxisLetter(t),i=0;i<r.length;i++){for(var a=r[i],o=a[0].trace,s=[],l=!1,c=0;c<a.length;c++){var u=a[c],d=u.b,h=d+u.s;u[n]=h,s.push(h),u.hasB&&s.push(d),u.hasB&&u.b||(l=!0)}o._extremes[t._id]=axes_1.findExtremes(t,s,{tozero:l,padded:!0})}}function stackBars(t,e,r){var n,i,a,o,s,l,c=getAxisLetter(t),u=e.traces;for(o=0;o<u.length;o++)if("funnel"===(i=(n=u[o])[0].trace).type)for(s=0;s<n.length;s++)(l=n[s]).s!==BADNUM$1&&e.put(l.p,-.5*l.s);for(o=0;o<u.length;o++){a="funnel"===(i=(n=u[o])[0].trace).type;var d=[];for(s=0;s<n.length;s++)if((l=n[s]).s!==BADNUM$1){var h;h=a?l.s:l.s+l.b;var g=e.put(l.p,h),f=g+h;l.b=g,l[c]=f,r.norm||(d.push(f),l.hasB&&d.push(g))}r.norm||(i._extremes[t._id]=axes_1.findExtremes(t,d,{tozero:!0,padded:!0}))}}function sieveBars(t){for(var e=t.traces,r=0;r<e.length;r++)for(var n=e[r],i=0;i<n.length;i++){var a=n[i];a.s!==BADNUM$1&&t.put(a.p,a.b+a.s)}}function unhideBarsWithinTrace(t,e){for(var r=t.traces,n=0;n<r.length;n++){var i=r[n];if(void 0===i[0].trace.base)for(var a=new sieve([i],{posAxis:e,sepNegVal:!0,overlapNoMerge:!0}),o=0;o<i.length;o++){var s=i[o];if(s.p!==BADNUM$1){var l=a.put(s.p,s.b+s.s);l&&(s.b=l)}}}}function normalizeBars(t,e,r){var n=e.traces,i=getAxisLetter(t),a="fraction"===r.norm?1:100,o=a/1e9,s=t.l2c(t.c2l(0)),l="stack"===r.mode?a:s;function c(e){return fastIsnumeric(t.c2l(e))&&(e<s-o||e>l+o||!fastIsnumeric(s))}for(var u=0;u<n.length;u++){for(var d=n[u],h=d[0].trace,g=[],f=!1,p=!1,m=0;m<d.length;m++){var y=d[m];if(y.s!==BADNUM$1){var b=Math.abs(a/e.get(y.p,y.s));y.b*=b,y.s*=b;var v=y.b,x=v+y.s;y[i]=x,g.push(x),p=p||c(x),y.hasB&&(g.push(v),p=p||c(v)),y.hasB&&y.b||(f=!0)}}h._extremes[t._id]=axes_1.findExtremes(t,g,{tozero:f,padded:p})}}function collectExtents(t,e){var r,n,i,a=getAxisLetter(e),o={},s=1/0,l=-1/0;for(r=0;r<t.length;r++)for(i=t[r],n=0;n<i.length;n++){var c=i[n].p;fastIsnumeric(c)&&(s=Math.min(s,c),l=Math.max(l,c))}var u=1e4/(l-s),d=o.round=function(t){return String(Math.round(u*(t-s)))};for(r=0;r<t.length;r++){(i=t[r])[0].t.extents=o;var h=i[0].t.poffset,g=Array.isArray(h);for(n=0;n<i.length;n++){var f=i[n],p=f[a]-f.w/2;if(fastIsnumeric(p)){var m=f[a]+f.w/2,y=d(f.p);o[y]?o[y]=[Math.min(p,o[y][0]),Math.max(m,o[y][1])]:o[y]=[p,m]}f.p0=f.p+(g?h[n]:h),f.p1=f.p0+f.w,f.s0=f.b,f.s1=f.s0+f.s}}}function getAxisLetter(t){return t._id.charAt(0)}var cross_trace_calc={crossTraceCalc:crossTraceCalc,setGroupPositions:setGroupPositions};function resizeText$1(t,e,r){var n=t._fullLayout,i=n["_"+r+"Text_minsize"];if(i){var a,o="hide"===n.uniformtext.mode;switch(r){case"funnelarea":case"pie":case"sunburst":a="g.slice";break;case"treemap":case"icicle":a="g.slice, g.pathbar";break;default:a="g.points > g.point"}e.selectAll(a).each((function(t){var e=t.transform;e&&(e.scale=o&&e.hide?0:i/e.fontSize,d3.select(this).select("text").attr("transform",lib_1.getTextTransform(e)))}))}}function recordMinTextSize$1(t,e,r){if(r.uniformtext.mode){var n=getMinKey(t),i=r.uniformtext.minsize,a=e.scale*e.fontSize;e.hide=a<i,r[n]=r[n]||1/0,e.hide||(r[n]=Math.min(r[n],Math.max(a,i)))}}function clearMinTextSize$1(t,e){e[getMinKey(t)]=void 0}function getMinKey(t){return"_"+t+"Text_minsize"}var uniform_text={recordMinTextSize:recordMinTextSize$1,clearMinTextSize:clearMinTextSize$1,resizeText:resizeText$1},isArrayOrTypedArray$1=lib_1.isArrayOrTypedArray,coerceString=function(t,e,r){if("string"==typeof e){if(e||!t.noBlank)return e}else if(("number"==typeof e||!0===e)&&!t.strict)return String(e);return void 0!==r?r:t.dflt},coerceNumber=function(t,e,r){if(fastIsnumeric(e)){e=+e;var n=t.min,i=t.max;if(!(void 0!==n&&e<n||void 0!==i&&e>i))return e}return void 0!==r?r:t.dflt},coerceColor=function(t,e,r){return tinycolor(e).isValid()?e:void 0!==r?r:t.dflt},coerceEnumerated=function(t,e,r){return t.coerceNumber&&(e=+e),-1!==t.values.indexOf(e)?e:void 0!==r?r:t.dflt},getValue=function(t,e){var r;return Array.isArray(t)?e<t.length&&(r=t[e]):r=t,r},getLineWidth$1=function(t,e){return 0<e.mlw?e.mlw:isArrayOrTypedArray$1(t.marker.line.width)?0:t.marker.line.width},helpers={coerceString:coerceString,coerceNumber:coerceNumber,coerceColor:coerceColor,coerceEnumerated:coerceEnumerated,getValue:getValue,getLineWidth:getLineWidth$1},resizeText=uniform_text.resizeText,attributeTextFont=attributes$6.textfont,attributeInsideTextFont=attributes$6.insidetextfont,attributeOutsideTextFont=attributes$6.outsidetextfont;function style(t){var e=d3.select(t).selectAll("g.barlayer").selectAll("g.trace");resizeText(t,e,"bar");var r=e.size(),n=t._fullLayout;e.style("opacity",(function(t){return t[0].trace.opacity})).each((function(t){("stack"===n.barmode&&r>1||0===n.bargap&&0===n.bargroupgap&&!t[0].trace.marker.line.width)&&d3.select(this).attr("shape-rendering","crispEdges")})),e.selectAll("g.points").each((function(e){stylePoints(d3.select(this),e[0].trace,t)})),registry.getComponentMethod("errorbars","style")(e)}function stylePoints(t,e,r){drawing_1.pointStyle(t.selectAll("path"),e,r),styleTextPoints(t,e,r)}function styleTextPoints(t,e,r){t.selectAll("text").each((function(t){var n=d3.select(this),i=lib_1.ensureUniformFontSize(r,determineFont(n,t,e,r));drawing_1.font(n,i)}))}function styleOnSelect(t,e,r){var n=e[0].trace;n.selectedpoints?stylePointsInSelectionMode(r,n,t):(stylePoints(r,n,t),registry.getComponentMethod("errorbars","style")(r))}function stylePointsInSelectionMode(t,e,r){drawing_1.selectedPointStyle(t.selectAll("path"),e),styleTextInSelectionMode(t.selectAll("text"),e,r)}function styleTextInSelectionMode(t,e,r){t.each((function(t){var n,i=d3.select(this);if(t.selected){n=lib_1.ensureUniformFontSize(r,determineFont(i,t,e,r));var a=e.selected.textfont&&e.selected.textfont.color;a&&(n.color=a),drawing_1.font(i,n)}else drawing_1.selectedTextStyle(i,e)}))}function determineFont(t,e,r,n){var i=n._fullLayout.font,a=r.textfont;if(t.classed("bartext-inside")){var o=getBarColor(e,r);a=getInsideTextFont(r,e.i,i,o)}else t.classed("bartext-outside")&&(a=getOutsideTextFont(r,e.i,i));return a}function getTextFont(t,e,r){return getFontValue(attributeTextFont,t.textfont,e,r)}function getInsideTextFont(t,e,r,n){var i=getTextFont(t,e,r);return(void 0===t._input.textfont||void 0===t._input.textfont.color||Array.isArray(t.textfont.color)&&void 0===t.textfont.color[e])&&(i={color:color_1.contrast(n),family:i.family,size:i.size}),getFontValue(attributeInsideTextFont,t.insidetextfont,e,i)}function getOutsideTextFont(t,e,r){var n=getTextFont(t,e,r);return getFontValue(attributeOutsideTextFont,t.outsidetextfont,e,n)}function getFontValue(t,e,r,n){e=e||{};var i=helpers.getValue(e.family,r),a=helpers.getValue(e.size,r),o=helpers.getValue(e.color,r);return{family:helpers.coerceString(t.family,i,n.family),size:helpers.coerceNumber(t.size,a,n.size),color:helpers.coerceColor(t.color,o,n.color)}}function getBarColor(t,e){return"waterfall"===e.type?e[t.dir].marker.color:t.mcc||t.mc||e.marker.color}var style_1={style:style,styleTextPoints:styleTextPoints,styleOnSelect:styleOnSelect,getInsideTextFont:getInsideTextFont,getOutsideTextFont:getOutsideTextFont,getBarColor:getBarColor,resizeText:resizeText},tickText=axes_1.tickText,recordMinTextSize=uniform_text.recordMinTextSize,clearMinTextSize=uniform_text.clearMinTextSize,attributeText=attributes$6.text,attributeTextPosition=attributes$6.textposition,appendArrayPointValue$1=helpers$a.appendArrayPointValue,TEXTPAD=constants$1.TEXTPAD;function keyFunc(t){return t.id}function getKeyFunc(t){if(t.ids)return keyFunc}function dirSign(t,e){return t<e?1:-1}function getXY(t,e,r,n){var i=[],a=[],o=n?e:r,s=n?r:e;return i[0]=o.c2p(t.s0,!0),a[0]=s.c2p(t.p0,!0),i[1]=o.c2p(t.s1,!0),a[1]=s.c2p(t.p1,!0),n?[i,a]:[a,i]}function transition(t,e,r,n){var i;return!e.uniformtext.mode&&hasTransition(r)?(n&&(i=n()),t.transition().duration(r.duration).ease(r.easing).each("end",(function(){i&&i()})).each("interrupt",(function(){i&&i()}))):t}function hasTransition(t){return t&&t.duration>0}function plot(t,e,r,n,i,a){var o=e.xaxis,s=e.yaxis,l=t._fullLayout;i||(i={mode:l.barmode,norm:l.barmode,gap:l.bargap,groupgap:l.bargroupgap},clearMinTextSize("bar",l));var c=lib_1.makeTraceGroups(n,r,"trace bars").each((function(r){var n=d3.select(this),c=r[0].trace,u="waterfall"===c.type,d="funnel"===c.type,h="bar"===c.type||d,g=0;u&&c.connector.visible&&"between"===c.connector.mode&&(g=c.connector.line.width/2);var f="h"===c.orientation,p=hasTransition(i),m=lib_1.ensureSingle(n,"g","points"),y=getKeyFunc(c),b=m.selectAll("g.point").data(lib_1.identity,y);b.enter().append("g").classed("point",!0),b.exit().remove(),b.each((function(n,u){var d,m,y=d3.select(this),b=getXY(n,o,s,f),v=b[0][0],x=b[0][1],I=b[1][0],B=b[1][1],C=0==(f?x-v:B-I);if(C&&h&&helpers.getLineWidth(c,n)&&(C=!1),C||(C=!(fastIsnumeric(v)&&fastIsnumeric(x)&&fastIsnumeric(I)&&fastIsnumeric(B))),n.isBlank=C,C&&(f?x=v:B=I),g&&!C&&(f?(v-=dirSign(v,x)*g,x+=dirSign(v,x)*g):(I-=dirSign(I,B)*g,B+=dirSign(I,B)*g)),"waterfall"===c.type){if(!C){var F=c[n.dir].marker;d=F.line.width,m=F.color}}else d=helpers.getLineWidth(c,n),m=n.mc||c.marker.color;function A(t){var e=d3.round(d/2%1,2);return 0===i.gap&&0===i.groupgap?d3.round(Math.round(t)-e,2):t}if(!t._context.staticPlot){var Q=color_1.opacity(m)<1||d>.01?A:function(t,e,r){return r&&t===e?t:Math.abs(t-e)>=2?A(t):t>e?Math.ceil(t):Math.floor(t)};v=Q(v,x,f),x=Q(x,v,f),I=Q(I,B,!f),B=Q(B,I,!f)}var _=transition(lib_1.ensureSingle(y,"path"),l,i,a);if(_.style("vector-effect","non-scaling-stroke").attr("d",isNaN((x-v)*(B-I))||C&&t._context.staticPlot?"M0,0Z":"M"+v+","+I+"V"+B+"H"+x+"V"+I+"Z").call(drawing_1.setClipUrl,e.layerClipId,t),!l.uniformtext.mode&&p){var w=drawing_1.makePointStyleFns(c);drawing_1.singlePointStyle(n,_,c,w,t)}appendBarText(t,e,y,r,u,v,x,I,B,i,a),e.layerClipId&&drawing_1.hideOutsideRangePoint(n,y.select("text"),o,s,c.xcalendar,c.ycalendar)}));var v=!1===c.cliponaxis;drawing_1.setClipUrl(n,v?null:e.layerClipId,t)}));registry.getComponentMethod("errorbars","plot")(t,c,e,i)}function appendBarText(t,e,r,n,i,a,o,s,l,c,u){var d,h=e.xaxis,g=e.yaxis,f=t._fullLayout;function p(e,r,n){return lib_1.ensureSingle(e,"text").text(r).attr({class:"bartext bartext-"+d,"text-anchor":"middle","data-notex":1}).call(drawing_1.font,n).call(svg_text_utils.convertToTspans,t)}var m=n[0].trace,y="h"===m.orientation,b=getText(f,n,i,h,g);d=getTextPosition(m,i);var v="stack"===c.mode||"relative"===c.mode,x=n[i],I=!v||x._outmost;if(b&&"none"!==d&&(!x.isBlank&&a!==o&&s!==l||"auto"!==d&&"inside"!==d)){var B=f.font,C=style_1.getBarColor(n[i],m),F=style_1.getInsideTextFont(m,i,B,C),A=style_1.getOutsideTextFont(m,i,B),Q=r.datum();y?"log"===h.type&&Q.s0<=0&&(a=h.range[0]<h.range[1]?0:h._length):"log"===g.type&&Q.s0<=0&&(s=g.range[0]<g.range[1]?g._length:0);var _,w,U,S,E,L=Math.abs(o-a)-2*TEXTPAD,T=Math.abs(l-s)-2*TEXTPAD;if("outside"===d&&(I||x.hasB||(d="inside")),"auto"===d)if(I)d="inside",_=p(r,b,E=lib_1.ensureUniformFontSize(t,F)),U=(w=drawing_1.bBox(_.node())).width,S=w.height,U>0&&S>0&&(U<=L&&S<=T||U<=T&&S<=L||(y?L>=U*(T/S):T>=S*(L/U)))?d="inside":(d="outside",_.remove(),_=null);else d="inside";if(!_){var R=(_=p(r,b,E=lib_1.ensureUniformFontSize(t,"outside"===d?A:F))).attr("transform");if(_.attr("transform",""),U=(w=drawing_1.bBox(_.node())).width,S=w.height,_.attr("transform",R),U<=0||S<=0)return void _.remove()}var k,G=m.textangle;(k="outside"===d?toMoveOutsideBar(a,o,s,l,w,{isHorizontal:y,constrained:"both"===m.constraintext||"outside"===m.constraintext,angle:G}):toMoveInsideBar(a,o,s,l,w,{isHorizontal:y,constrained:"both"===m.constraintext||"inside"===m.constraintext,angle:G,anchor:m.insidetextanchor})).fontSize=E.size,recordMinTextSize("histogram"===m.type?"bar":m.type,k,f),x.transform=k,transition(_,f,c,u).attr("transform",lib_1.getTextTransform(k))}else r.select("text").remove()}function getRotateFromAngle(t){return"auto"===t?0:t}function getRotatedTextSize(t,e){var r=Math.PI/180*e,n=Math.abs(Math.sin(r)),i=Math.abs(Math.cos(r));return{x:t.width*i+t.height*n,y:t.width*n+t.height*i}}function toMoveInsideBar(t,e,r,n,i,a){var o=!!a.isHorizontal,s=!!a.constrained,l=a.angle||0,c=a.anchor||"end",u="end"===c,d="start"===c,h=((a.leftToRight||0)+1)/2,g=1-h,f=i.width,p=i.height,m=Math.abs(e-t),y=Math.abs(n-r),b=m>2*TEXTPAD&&y>2*TEXTPAD?TEXTPAD:0;m-=2*b,y-=2*b;var v=getRotateFromAngle(l);"auto"!==l||f<=m&&p<=y||!(f>m||p>y)||(f>y||p>m)&&f<p==m<y||(v+=90);var x=getRotatedTextSize(i,v),I=1;s&&(I=Math.min(1,m/x.x,y/x.y));var B=i.left*g+i.right*h,C=(i.top+i.bottom)/2,F=(t+TEXTPAD)*g+(e-TEXTPAD)*h,A=(r+n)/2,Q=0,_=0;if(d||u){var w=(o?x.x:x.y)/2,U=o?dirSign(t,e):dirSign(r,n);o?d?(F=t+U*b,Q=-U*w):(F=e-U*b,Q=U*w):d?(A=r+U*b,_=-U*w):(A=n-U*b,_=U*w)}return{textX:B,textY:C,targetX:F,targetY:A,anchorX:Q,anchorY:_,scale:I,rotate:v}}function toMoveOutsideBar(t,e,r,n,i,a){var o,s=!!a.isHorizontal,l=!!a.constrained,c=a.angle||0,u=i.width,d=i.height,h=Math.abs(e-t),g=Math.abs(n-r);o=s?g>2*TEXTPAD?TEXTPAD:0:h>2*TEXTPAD?TEXTPAD:0;var f=1;l&&(f=s?Math.min(1,g/d):Math.min(1,h/u));var p=getRotateFromAngle(c),m=getRotatedTextSize(i,p),y=(s?m.x:m.y)/2,b=(i.left+i.right)/2,v=(i.top+i.bottom)/2,x=(t+e)/2,I=(r+n)/2,B=0,C=0,F=s?dirSign(e,t):dirSign(r,n);return s?(x=e-F*o,B=F*y):(I=n+F*o,C=-F*y),{textX:b,textY:v,targetX:x,targetY:I,anchorX:B,anchorY:C,scale:f,rotate:p}}function getText(t,e,r,n,i){var a,o=e[0].trace;return a=o.texttemplate?calcTexttemplate(t,e,r,n,i):o.textinfo?calcTextinfo(e,r,n,i):helpers.getValue(o.text,r),helpers.coerceString(attributeText,a)}function getTextPosition(t,e){var r=helpers.getValue(t.textposition,e);return helpers.coerceEnumerated(attributeTextPosition,r)}function calcTexttemplate(t,e,r,n,i){var a=e[0].trace,o=lib_1.castOption(a,r,"texttemplate");if(!o)return"";var s,l,c,u,d="histogram"===a.type,h="waterfall"===a.type,g="funnel"===a.type,f="h"===a.orientation;function p(t){return tickText(u,u.c2l(t),!0).text}f?(s="y",l=i,c="x",u=n):(s="x",l=n,c="y",u=i);var m=e[r],y={};y.label=m.p,y.labelLabel=y[s+"Label"]=function(t){return tickText(l,l.c2l(t),!0).text}(m.p);var b=lib_1.castOption(a,m.i,"text");(0===b||b)&&(y.text=b),y.value=m.s,y.valueLabel=y[c+"Label"]=p(m.s);var v={};appendArrayPointValue$1(v,a,m.i),(d||void 0===v.x)&&(v.x=f?y.value:y.label),(d||void 0===v.y)&&(v.y=f?y.label:y.value),(d||void 0===v.xLabel)&&(v.xLabel=f?y.valueLabel:y.labelLabel),(d||void 0===v.yLabel)&&(v.yLabel=f?y.labelLabel:y.valueLabel),h&&(y.delta=+m.rawS||m.s,y.deltaLabel=p(y.delta),y.final=m.v,y.finalLabel=p(y.final),y.initial=y.final-y.delta,y.initialLabel=p(y.initial)),g&&(y.value=m.s,y.valueLabel=p(y.value),y.percentInitial=m.begR,y.percentInitialLabel=lib_1.formatPercent(m.begR),y.percentPrevious=m.difR,y.percentPreviousLabel=lib_1.formatPercent(m.difR),y.percentTotal=m.sumR,y.percenTotalLabel=lib_1.formatPercent(m.sumR));var x=lib_1.castOption(a,m.i,"customdata");return x&&(y.customdata=x),lib_1.texttemplateString(o,y,t._d3locale,v,y,a._meta||{})}function calcTextinfo(t,e,r,n){var i=t[0].trace,a="h"===i.orientation,o="waterfall"===i.type,s="funnel"===i.type;function l(t){return tickText(a?r:n,+t,!0).text}var c,u=i.textinfo,d=t[e],h=u.split("+"),g=[],f=function(t){return-1!==h.indexOf(t)};if(f("label")&&g.push(function(t){return tickText(a?n:r,t,!0).text}(t[e].p)),f("text")&&(0===(c=lib_1.castOption(i,d.i,"text"))||c)&&g.push(c),o){var p=+d.rawS||d.s,m=d.v,y=m-p;f("initial")&&g.push(l(y)),f("delta")&&g.push(l(p)),f("final")&&g.push(l(m))}if(s){f("value")&&g.push(l(d.s));var b=0;f("percent initial")&&b++,f("percent previous")&&b++,f("percent total")&&b++;var v=b>1;f("percent initial")&&(c=lib_1.formatPercent(d.begR),v&&(c+=" of initial"),g.push(c)),f("percent previous")&&(c=lib_1.formatPercent(d.difR),v&&(c+=" of previous"),g.push(c)),f("percent total")&&(c=lib_1.formatPercent(d.sumR),v&&(c+=" of total"),g.push(c))}return g.join("<br>")}var plot_1={plot:plot,toMoveInsideBar:toMoveInsideBar},fillText=lib_1.fillText,getLineWidth=helpers.getLineWidth,hoverLabelText$1=axes_1.hoverLabelText,BADNUM=numerical.BADNUM;function hoverPoints(t,e,r,n,i){var a=hoverOnBars(t,e,r,n,i);if(a){var o=a.cd,s=o[0].trace,l=o[a.index];return a.color=getTraceColor(s,l),registry.getComponentMethod("errorbars","hoverInfo")(l,s,a),[a]}}function hoverOnBars(t,e,r,n,i){var a,o,s,l,c,u,d,h=t.cd,g=h[0].trace,f=h[0].t,p="closest"===n,m="waterfall"===g.type,y=t.maxHoverDistance,b=t.maxSpikeDistance;"h"===g.orientation?(a=r,o=e,s="y",l="x",c=S,u=w):(a=e,o=r,s="x",l="y",u=S,c=w);var v=g[s+"period"],x=p||v;function I(t){return C(t,-1)}function B(t){return C(t,1)}function C(t,e){var r=t.w;return t[s]+e*r/2}function F(t){return t[s+"End"]-t[s+"Start"]}var A=p?I:v?function(t){return t.p-F(t)/2}:function(t){return Math.min(I(t),t.p-f.bardelta/2)},Q=p?B:v?function(t){return t.p+F(t)/2}:function(t){return Math.max(B(t),t.p+f.bardelta/2)};function _(t,e,r){return i.finiteRange&&(r=0),fx.inbox(t-a,e-a,r+Math.min(1,Math.abs(e-t)/d)-1)}function w(t){return _(A(t),Q(t),y)}function U(t){var e=t[l];if(m){var r=Math.abs(t.rawS)||0;o>0?e+=r:o<0&&(e-=r)}return e}function S(t){var e=o,r=t.b,n=U(t);return fx.inbox(r-e,n-e,y+(n-e)/(n-r)-1)}var E=t[s+"a"],L=t[l+"a"];d=Math.abs(E.r2c(E.range[1])-E.r2c(E.range[0]));var T=fx.getDistanceFunction(n,c,u,(function(t){return(c(t)+u(t))/2}));if(fx.getClosest(h,T,t),!1!==t.index&&h[t.index].p!==BADNUM){x||(A=function(t){return Math.min(I(t),t.p-f.bargroupwidth/2)},Q=function(t){return Math.max(B(t),t.p+f.bargroupwidth/2)});var R=h[t.index],k=g.base?R.b+R.s:R.s;t[l+"0"]=t[l+"1"]=L.c2p(R[l],!0),t[l+"LabelVal"]=k;var G=f.extents[f.extents.round(R.p)];t[s+"0"]=E.c2p(p?A(R):G[0],!0),t[s+"1"]=E.c2p(p?Q(R):G[1],!0);var N=void 0!==R.orig_p;return t[s+"LabelVal"]=N?R.orig_p:R.p,t.labelLabel=hoverLabelText$1(E,t[s+"LabelVal"],g[s+"hoverformat"]),t.valueLabel=hoverLabelText$1(L,t[l+"LabelVal"],g[l+"hoverformat"]),t.baseLabel=hoverLabelText$1(L,R.b,g[l+"hoverformat"]),t.spikeDistance=(function(t){var e=o,r=t.b,n=U(t);return fx.inbox(r-e,n-e,b+(n-e)/(n-r)-1)}(R)+function(t){return _(I(t),B(t),b)}(R))/2,t[s+"Spike"]=E.c2p(R.p,!0),fillText(R,g,t),t.hovertemplate=g.hovertemplate,t}}function getTraceColor(t,e){var r=e.mcc||t.marker.color,n=e.mlcc||t.marker.line.color,i=getLineWidth(t,e);return color_1.opacity(r)?r:color_1.opacity(n)&&i?n:void 0}var hover$1={hoverPoints:hoverPoints,hoverOnBars:hoverOnBars,getTraceColor:getTraceColor},barHover=hover$1.hoverPoints,hoverLabelText=axes_1.hoverLabelText,hover=function(t,e,r,n,i){var a=barHover(t,e,r,n,i);if(a){var o=(t=a[0]).cd[t.index],s=t.cd[0].trace;if(!s.cumulative.enabled){var l="h"===s.orientation?"y":"x";t[l+"Label"]=hoverLabelText(t[l+"a"],[o.ph0,o.ph1],s[l+"hoverformat"])}return a}},select=function(t,e){var r,n=t.cd,i=t.xaxis,a=t.yaxis,o=n[0].trace,s="funnel"===o.type,l="h"===o.orientation,c=[];if(!1===e)for(r=0;r<n.length;r++)n[r].selected=0;else for(r=0;r<n.length;r++){var u=n[r],d="ct"in u?u.ct:getCentroid(u,i,a,l,s);e.contains(d,!1,r,t)?(c.push({pointNumber:r,x:i.c2d(u.x),y:a.c2d(u.y)}),u.selected=1):u.selected=0}return c};function getCentroid(t,e,r,n,i){var a=e.c2p(n?t.s0:t.p0,!0),o=e.c2p(n?t.s1:t.p1,!0),s=r.c2p(n?t.p0:t.s0,!0),l=r.c2p(n?t.p1:t.s1,!0);return i?[(a+o)/2,(s+l)/2]:n?[o,(s+l)/2]:[(a+o)/2,l]}var event_data=function(t,e,r,n,i){if(t.x="xVal"in e?e.xVal:e.x,t.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(t.z=e.zLabelVal),e.xa&&(t.xaxis=e.xa),e.ya&&(t.yaxis=e.ya),!(r.cumulative||{}).enabled){var a,o=Array.isArray(i)?n[0].pts[i[0]][i[1]]:n[i].pts;if(t.pointNumbers=o,t.binNumber=t.pointNumber,delete t.pointNumber,delete t.pointIndex,r._indexToPoints){a=[];for(var s=0;s<o.length;s++)a=a.concat(r._indexToPoints[o[s]])}else a=o;t.pointIndices=a}return t},histogram$1={attributes:attributes$5,layoutAttributes:layout_attributes$1,supplyDefaults:defaults$3,crossTraceDefaults:cross_trace_defaults,supplyLayoutDefaults:layout_defaults,calc:calc_1$1.calc,crossTraceCalc:cross_trace_calc.crossTraceCalc,plot:plot_1.plot,layerName:"barlayer",style:style_1.style,styleOnSelect:style_1.styleOnSelect,colorbar:marker_colorbar,hoverPoints:hover,selectPoints:select,eventData:event_data,moduleType:"trace",name:"histogram",basePlotModule:cartesian,categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{description:["The sample data from which statistics are computed is set in `x`","for vertically spanning histograms and","in `y` for horizontally spanning histograms.","Binning options are set `xbins` and `ybins` respectively","if no aggregation data is provided."].join(" ")}},histogram=histogram$1,PlotlyHistogram=_mergeNamespaces({__proto__:null,default:histogram$1},[histogram$1]);function decodeBase64(t,e){var r=atob(t);if(e){for(var n=new Uint8Array(r.length),i=0,a=r.length;i<a;++i)n[i]=r.charCodeAt(i);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return r}function createURL(t,e,r){var n=void 0===e?null:e,i=decodeBase64(t,void 0!==r&&r),a=i.indexOf("\n",10)+1,o=i.substring(a)+(n?"//# sourceMappingURL="+n:""),s=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(s)}function createBase64WorkerFactory(t,e,r){var n;return function(i){return n=n||createURL(t,e,r),new Worker(n,i)}}var WorkerFactory=createBase64WorkerFactory("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZuKSB7CgkgIHZhciBtb2R1bGUgPSB7IGV4cG9ydHM6IHt9IH07CgkJcmV0dXJuIGZuKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMpLCBtb2R1bGUuZXhwb3J0czsKCX0KCgl2YXIgZGlzdHJpYnV0aW9ucyA9IGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZ1bmN0aW9uIChtb2R1bGUpIHsKCSAgLy8gc2hvdWxkIG1hdGNoIFIncywgZXhjZXB0IGZvciB0aGF0IGFsbCBmdW5jdGlvbnMgcmVzaWRlIGluIGFuIGxkIG9iamVjdCAoCgkgIC8vIGFzIGluICJsb2cgZGVuc2l0eSIpLCBzbyB0byBnZXQgYSBub3JtYWwgbG9nIGRlbnNpdHkgeW91IHdvdWxkIHdyaXRlCgkgIC8vIGxkLm5vcm0oLi4uKS4KCSAgLy8gTW9zdCBvZiB0aGUgY29kZSBiZWxvdyBpcyBkaXJlY3RseSB0YWtlbiBmcm9tIHRoZSBncmVhdCBKc3RhdCBwcm9qZWN0CgkgIC8vIChodHRwczovL2dpdGh1Yi5jb20vanN0YXQvKSB3aGljaCBpbmNsdWRlcyBQREYgZm9yIG1hbnkgY29tbW9uIHByb2JhYmlsaXR5CgkgIC8vIGRpc3RyaWJ1dGlvbnMuIFdoYXQgSSBoYXZlIGRvbmUgaXMgb25seSB0byBjb252ZXJ0IHRoZXNlIHRvIGxvZyBQREZzLgoKCSAgLyoKCSAgT3JpZ2luYWwgd29yayBDb3B5cmlnaHQgKGMpIDIwMTMgalN0YXQKCSAgTW9kaWZpZWQgd29yayBDb3B5cmlnaHQgKGMpIDIwMTUgUmFzbXVzIELDpcOldGggCgkgIAoJICBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5CgkgIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLCB0byBkZWFsCgkgIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMKCSAgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbAoJICBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMKCSAgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKCSAgCgkgIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluCgkgIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgoJICAKCSAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKCSAgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCgkgIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRQoJICBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSCgkgIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sCgkgIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4KCSAgVEhFIFNPRlRXQVJFLgoJICAKCSAgKi8KCSAgLy8gVGhpcyBib2lsZXIgcGxhdGUgY29kZSBoZXJlIGlzIHRha2VuIGZyb206CgkgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvdGVtcGxhdGVzL3JldHVybkV4cG9ydHMuanMKCSAgLy8gSXQgc2hvdWxkIG1ha2Ugc2h1cmUgdGhhdCBtb2R1bGUgY2FuIGJlIGltcG9ydGVkIGJvdGggaW4gdGhlIGJyb3dzZXIsCgkgIC8vIE5vZGUsIGFuZCBieSB1c2luZyB0aGUgQXN5bmNocm9ub3VzIE1vZHVsZSBEZWZpbml0aW9uIHN0YW5kYXJkLgoJICAvLyBJZiB0aGlzIG1vZHVsZSBpcyBsb2FkZWQgaW4gdGhlIGJyb3dzZXIgaXQgd2lsbCBjcmVhdGVkIHRoZSBnbG9iYWwKCSAgLy8gb2JqZWN0IGxkIC4KCgkgIChmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkgewoJICAgIGlmIChtb2R1bGUuZXhwb3J0cykgewoJICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0CgkgICAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cywKCSAgICAgIC8vIGxpa2UgTm9kZS4KCSAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwoJICAgIH0gZWxzZSB7CgkgICAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KQoJICAgICAgcm9vdC5sZCA9IGZhY3RvcnkoKTsKCSAgICB9CgkgIH0pKGNvbW1vbmpzR2xvYmFsLCBmdW5jdGlvbiAoKSB7CgkgICAgLy8gT2JqZWN0IHRvIGhvbGQgdGhlIGZ1bmN0aW9ucyB0byBiZSBleHBvcnRlZC4KCSAgICB2YXIgbGQgPSB7fTsgLy8vLy8vLy8vLyBIZWxwZXIgZnVuY3Rpb25zIC8vLy8vLy8vLy8KCSAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKCSAgICB2YXIgbGdhbW1hID0gZnVuY3Rpb24gKHgpIHsKCSAgICAgIHZhciBqID0gMDsKCSAgICAgIHZhciBjb2YgPSBbNzYuMTgwMDkxNzI5NDcxNDYsIC04Ni41MDUzMjAzMjk0MTY3NywgMjQuMDE0MDk4MjQwODMwOTEsIC0xLjIzMTczOTU3MjQ1MDE1NSwgMC4xMjA4NjUwOTczODY2MTc5ZS0yLCAtMC41Mzk1MjM5Mzg0OTUzZS01XTsKCSAgICAgIHZhciBzZXIgPSAxLjAwMDAwMDAwMDE5MDAxNTsKCSAgICAgIHZhciB4eCwgeSwgdG1wOwoJICAgICAgdG1wID0gKHkgPSB4eCA9IHgpICsgNS41OwoJICAgICAgdG1wIC09ICh4eCArIDAuNSkgKiBsb2codG1wKTsKCgkgICAgICBmb3IgKDsgaiA8IDY7IGorKykgc2VyICs9IGNvZltqXSAvICsreTsKCgkgICAgICByZXR1cm4gbG9nKDIuNTA2NjI4Mjc0NjMxMDAwNSAqIHNlciAvIHh4KSAtIHRtcDsKCSAgICB9OwoKCSAgICBsZC5sZ2FtbWEgPSBsZ2FtbWE7CgoJICAgIHZhciBsZmFjdG9yaWFsID0gZnVuY3Rpb24gKG4pIHsKCSAgICAgIHJldHVybiBuIDwgMCA/IE5hTiA6IGxnYW1tYShuICsgMSk7CgkgICAgfTsKCgkgICAgbGQubGZhY3RvcmlhbCA9IGxmYWN0b3JpYWw7CgoJICAgIHZhciBsY2hvb3NlID0gZnVuY3Rpb24gKG4sIGspIHsKCSAgICAgIHJldHVybiBsZmFjdG9yaWFsKG4pIC0gbGZhY3RvcmlhbChrKSAtIGxmYWN0b3JpYWwobiAtIGspOwoJICAgIH07CgoJICAgIGxkLmxjaG9vc2UgPSBsY2hvb3NlOwoKCSAgICB2YXIgbGJldGEgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgcmV0dXJuIGxnYW1tYShhKSArIGxnYW1tYShiKSAtIGxnYW1tYShhICsgYik7CgkgICAgfTsKCgkgICAgbGQubGJldGEgPSBsYmV0YTsKCSAgICB2YXIgbG9nID0gTWF0aC5sb2c7CgkgICAgdmFyIGV4cCA9IE1hdGguZXhwOwoJICAgIHZhciBhYnMgPSBNYXRoLmFiczsKCSAgICB2YXIgcG93ID0gTWF0aC5wb3c7CgkgICAgdmFyIHNxcnQgPSBNYXRoLnNxcnQ7CgkgICAgdmFyIHBpID0gTWF0aC5QSTsgLy8vLy8vLy8vLyBDb250aW5vdXMgZGlzdHJpYnV0aW9ucyAvLy8vLy8vLy8vCgkgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgoJICAgIGxkLmJldGEgPSBmdW5jdGlvbiAoeCwgc2hhcGUxLCBzaGFwZTIpIHsKCSAgICAgIGlmICh4ID4gMSB8fCB4IDwgMCkgewoJICAgICAgICByZXR1cm4gLUluZmluaXR5OwoJICAgICAgfQoKCSAgICAgIGlmIChzaGFwZTEgPT09IDEgJiYgc2hhcGUyID09PSAxKSB7CgkgICAgICAgIHJldHVybiAwOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgcmV0dXJuIChzaGFwZTEgLSAxKSAqIGxvZyh4KSArIChzaGFwZTIgLSAxKSAqIGxvZygxIC0geCkgLSBsYmV0YShzaGFwZTEsIHNoYXBlMik7CgkgICAgICB9CgkgICAgfTsKCgkgICAgbGQuY2F1Y2h5ID0gZnVuY3Rpb24gKHgsIGxvY2F0aW9uLCBzY2FsZSkgewoJICAgICAgcmV0dXJuIGxvZyhzY2FsZSkgLSBsb2cocG93KHggLSBsb2NhdGlvbiwgMikgKyBwb3coc2NhbGUsIDIpKSAtIGxvZyhwaSk7CgkgICAgfTsKCgkgICAgbGQubm9ybSA9IGZ1bmN0aW9uICh4LCBtZWFuLCBzZCkgewoJICAgICAgcmV0dXJuIC0wLjUgKiBsb2coMiAqIHBpKSAtIGxvZyhzZCkgLSBwb3coeCAtIG1lYW4sIDIpIC8gKDIgKiBzZCAqIHNkKTsKCSAgICB9OyAvLyBBIGJpdmFyaWF0ZSBOb3JtYWwgZGlzdHJpYnV0aW9uIHBhcmFtZXRlcml6ZWQgYnkgYXJyYXlzIG9mIHR3byBtZWFucyBhbmQgU0RzLCBhbmQgCgkgICAgLy8gdGhlIGNvcnJlbGF0aW9uLgoKCgkgICAgbGQuYml2YXJub3JtID0gZnVuY3Rpb24gKHgsIG1lYW4sIHNkLCBjb3JyKSB7CgkgICAgICB2YXIgeiA9IHBvdyh4WzBdIC0gbWVhblswXSwgMikgLyBwb3coc2RbMF0sIDIpICsgcG93KHhbMV0gLSBtZWFuWzFdLCAyKSAvIHBvdyhzZFsxXSwgMikgLSAyICogY29yciAqICh4WzBdIC0gbWVhblswXSkgKiAoeFsxXSAtIG1lYW5bMV0pIC8gKHNkWzBdICogc2RbMV0pOwoJICAgICAgdmFyIG5vcm1hbGl6aW5nX2ZhY3RvciA9IC0obG9nKDIpICsgbG9nKHBpKSArIGxvZyhzZFswXSkgKyBsb2coc2RbMV0pICsgMC41ICogbG9nKDEgLSBwb3coY29yciwgMikpKTsKCSAgICAgIHZhciBiaXZhcl9sb2dfZGVucyA9IG5vcm1hbGl6aW5nX2ZhY3RvciAtIHogLyAoMiAqICgxIC0gcG93KGNvcnIsIDIpKSk7CgkgICAgICByZXR1cm4gYml2YXJfbG9nX2RlbnM7CgkgICAgfTsKCgkgICAgbGQubGFwbGFjZSA9IGZ1bmN0aW9uICh4LCBsb2NhdGlvbiwgc2NhbGUpIHsKCSAgICAgIHJldHVybiAtYWJzKHggLSBsb2NhdGlvbikgLyBzY2FsZSAtIGxvZygyICogc2NhbGUpOwoJICAgIH07CgoJICAgIGxkLmRleHAgPSBsZC5sYXBsYWNlOwoKCSAgICBsZC5nYW1tYSA9IGZ1bmN0aW9uICh4LCBzaGFwZSwgcmF0ZSkgewoJICAgICAgdmFyIHNjYWxlID0gMSAvIHJhdGU7CgoJICAgICAgaWYgKHggPCAwKSB7CgkgICAgICAgIHJldHVybiAtSW5maW5pdHk7CgkgICAgICB9CgoJICAgICAgaWYgKHggPT09IDAgJiYgc2hhcGUgPT09IDEpIHsKCSAgICAgICAgcmV0dXJuIC1sb2coc2NhbGUpOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgcmV0dXJuIChzaGFwZSAtIDEpICogbG9nKHgpIC0geCAvIHNjYWxlIC0gbGdhbW1hKHNoYXBlKSAtIHNoYXBlICogbG9nKHNjYWxlKTsKCSAgICAgIH0KCSAgICB9OwoKCSAgICBsZC5pbnZnYW1tYSA9IGZ1bmN0aW9uICh4LCBzaGFwZSwgc2NhbGUpIHsKCSAgICAgIGlmICh4IDw9IDApIHsKCSAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsKCSAgICAgIH0KCgkgICAgICByZXR1cm4gLShzaGFwZSArIDEpICogbG9nKHgpIC0gc2NhbGUgLyB4IC0gbGdhbW1hKHNoYXBlKSArIHNoYXBlICogbG9nKHNjYWxlKTsKCSAgICB9OwoKCSAgICBsZC5sbm9ybSA9IGZ1bmN0aW9uICh4LCBtZWFubG9nLCBzZGxvZykgewoJICAgICAgaWYgKHggPD0gMCkgewoJICAgICAgICByZXR1cm4gLUluZmluaXR5OwoJICAgICAgfQoKCSAgICAgIHJldHVybiAtbG9nKHgpIC0gMC41ICogbG9nKDIgKiBwaSkgLSBsb2coc2Rsb2cpIC0gcG93KGxvZyh4KSAtIG1lYW5sb2csIDIpIC8gKDIgKiBzZGxvZyAqIHNkbG9nKTsKCSAgICB9OwoKCSAgICBsZC5wYXJldG8gPSBmdW5jdGlvbiAoeCwgc2NhbGUsIHNoYXBlKSB7CgkgICAgICBpZiAoeCA8IHNjYWxlKSB7CgkgICAgICAgIHJldHVybiAtSW5maW5pdHk7CgkgICAgICB9CgoJICAgICAgcmV0dXJuIGxvZyhzaGFwZSkgKyBzaGFwZSAqIGxvZyhzY2FsZSkgLSAoc2hhcGUgKyAxKSAqIGxvZyh4KTsKCSAgICB9OwoKCSAgICBsZC50ID0gZnVuY3Rpb24gKHgsIGxvY2F0aW9uLCBzY2FsZSwgZGYpIHsKCSAgICAgIGRmID0gZGYgPiAxZTEwMCA/IDFlMTAwIDogZGY7CgkgICAgICByZXR1cm4gbGdhbW1hKChkZiArIDEpIC8gMikgLSBsZ2FtbWEoZGYgLyAyKSAtIGxvZyhzcXJ0KHBpICogZGYpICogc2NhbGUpICsgbG9nKHBvdygxICsgMSAvIGRmICogcG93KCh4IC0gbG9jYXRpb24pIC8gc2NhbGUsIDIpLCAtKGRmICsgMSkgLyAyKSk7CgkgICAgfTsgLy8gVGhpcyBpcyBhIGRpcmVjdCBqYXZhc2NyaXB0IHRyYW5zbGF0aW9uIG9mIHRoZSBSIGNvZGUgdXNlZCB0byBldmFsdWF0ZQoJICAgIC8vIHRoZSBsb2cgZGVuc2l0eSBvZiBhIHdlaWJ1bGwgZGlzdHJpYnV0aW9uOiAKCSAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vd2NoL3Itc291cmNlL2Jsb2IvYjE1NmUzYTcxMTk2N2Y1ODEzMWUyM2MxYjFkYzFlYTkwZTJmMGM0My9zcmMvbm1hdGgvZHdlaWJ1bGwuYwoKCgkgICAgbGQud2VpYnVsbCA9IGZ1bmN0aW9uICh4LCBzaGFwZSwgc2NhbGUpIHsKCSAgICAgIGlmICh4IDwgMCkgcmV0dXJuIC1JbmZpbml0eTsKCSAgICAgIGlmICh4ID09PSAwICYmIHNoYXBlIDwgMSkgcmV0dXJuIEluZmluaXR5OwoJICAgICAgdmFyIHRtcDEgPSBwb3coeCAvIHNjYWxlLCBzaGFwZSAtIDEpOwoJICAgICAgdmFyIHRtcDIgPSB0bXAxICogKHggLyBzY2FsZSk7CgkgICAgICByZXR1cm4gLXRtcDIgKyBsb2coc2hhcGUgKiB0bXAxIC8gc2NhbGUpOwoJICAgIH07IC8vIFRoaXMgaXMgYSBkaXJlY3QgamF2YXNjcmlwdCB0cmFuc2xhdGlvbiBvZiB0aGUgUiBjb2RlIHVzZWQgdG8gZXZhbHVhdGUKCSAgICAvLyB0aGUgbG9nIGRlbnNpdHkgb2YgYSBsb2dpc3RpYyBkaXN0cmlidXRpb246IAoJICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93Y2gvci1zb3VyY2UvYmxvYi9iMTU2ZTNhNzExOTY3ZjU4MTMxZTIzYzFiMWRjMWVhOTBlMmYwYzQzL3NyYy9ubWF0aC9kbG9naXMuYwoKCgkgICAgbGQubG9naXMgPSBmdW5jdGlvbiAoeCwgbG9jYXRpb24sIHNjYWxlKSB7CgkgICAgICB4ID0gYWJzKCh4IC0gbG9jYXRpb24pIC8gc2NhbGUpOwoJICAgICAgdmFyIGUgPSBleHAoLXgpOwoJICAgICAgdmFyIGYgPSAxLjAgKyBlOwoJICAgICAgcmV0dXJuIC0oeCArIGxvZyhzY2FsZSAqIGYgKiBmKSk7CgkgICAgfTsKCgkgICAgbGQuZGlyaWNobGV0ID0gZnVuY3Rpb24gKHgsIGFscGhhKSB7CgkgICAgICB2YXIgc3VtX2FscGhhID0gMDsKCSAgICAgIHZhciBzdW1fbGdhbW1hX2FscGhhID0gMDsKCSAgICAgIHZhciBzdW1fYWxwaGFfc3ViXzFfbG9nX3ggPSAwOwoJICAgICAgdmFyIG4gPSBhbHBoYS5sZW5ndGg7CgoJICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgc3VtX2FscGhhICs9IGFscGhhW2ldOwoJICAgICAgICBzdW1fbGdhbW1hX2FscGhhICs9IGxnYW1tYShhbHBoYVtpXSk7CgkgICAgICAgIHN1bV9hbHBoYV9zdWJfMV9sb2dfeCArPSAoYWxwaGFbaV0gLSAxKSAqIGxvZyh4W2ldKTsKCSAgICAgIH0KCgkgICAgICByZXR1cm4gbGdhbW1hKHN1bV9hbHBoYSkgLSBzdW1fbGdhbW1hX2FscGhhICsgc3VtX2FscGhhX3N1Yl8xX2xvZ194OwoJICAgIH07CgoJICAgIGxkLmV4cCA9IGZ1bmN0aW9uICh4LCByYXRlKSB7CgkgICAgICByZXR1cm4geCA8IDAgPyAtSW5maW5pdHkgOiBsb2cocmF0ZSkgLSByYXRlICogeDsKCSAgICB9OwoKCSAgICBsZC51bmlmID0gZnVuY3Rpb24gKHgsIG1pbiwgbWF4KSB7CgkgICAgICByZXR1cm4geCA8IG1pbiB8fCB4ID4gbWF4ID8gLUluZmluaXR5IDogbG9nKDEgLyAobWF4IC0gbWluKSk7CgkgICAgfTsgLy8vLy8vLy8vLyBEaXNjcmV0ZSBkaXN0cmlidXRpb25zIC8vLy8vLy8vLy8KCSAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKCgkgICAgbGQuYmVybiA9IGZ1bmN0aW9uICh4LCBwcm9iKSB7CgkgICAgICByZXR1cm4gISh4ID09PSAwIHx8IHggPT09IDEpID8gLUluZmluaXR5IDogbG9nKHggKiBwcm9iICsgKDEgLSB4KSAqICgxIC0gcHJvYikpOwoJICAgIH07CgoJICAgIGxkLmNhdCA9IGZ1bmN0aW9uICh4LCBwcm9icykgewoJICAgICAgaWYgKHggPCAxIHx8IHggPiBwcm9icy5sZW5ndGgpIHsKCSAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIHJldHVybiBsb2cocHJvYnNbeCAtIDFdKTsKCSAgICAgIH0KCSAgICB9OwoKCSAgICBsZC5iaW5vbSA9IGZ1bmN0aW9uICh4LCBzaXplLCBwcm9iKSB7CgkgICAgICBpZiAoeCA+IHNpemUgfHwgeCA8IDApIHsKCSAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsKCSAgICAgIH0KCgkgICAgICBpZiAocHJvYiA9PT0gMCB8fCBwcm9iID09PSAxKSB7CgkgICAgICAgIHJldHVybiBzaXplICogcHJvYiA9PT0geCA/IDAgOiAtSW5maW5pdHk7CgkgICAgICB9CgoJICAgICAgcmV0dXJuIGxjaG9vc2Uoc2l6ZSwgeCkgKyB4ICogbG9nKHByb2IpICsgKHNpemUgLSB4KSAqIGxvZygxIC0gcHJvYik7CgkgICAgfTsKCgkgICAgbGQubmJpbm9tID0gZnVuY3Rpb24gKHgsIHNpemUsIHByb2IpIHsKCSAgICAgIGlmICh4IDwgMCkgewoJICAgICAgICByZXR1cm4gLUluZmluaXR5OwoJICAgICAgfQoKCSAgICAgIHJldHVybiBsY2hvb3NlKHggKyBzaXplIC0gMSwgc2l6ZSAtIDEpICsgeCAqIGxvZygxIC0gcHJvYikgKyBzaXplICogbG9nKHByb2IpOwoJICAgIH07CgoJICAgIGxkLmh5cGVyID0gZnVuY3Rpb24gKHgsIG0sIG4sIGspIHsKCSAgICAgIGlmICh4IDwgMCB8fCB4ID4gaykgewoJICAgICAgICByZXR1cm4gLUluZmluaXR5OwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgcmV0dXJuIGxjaG9vc2UobSwgeCkgKyBsY2hvb3NlKG4sIGsgLSB4KSAtIGxjaG9vc2UobSArIG4sIGspOwoJICAgICAgfQoJICAgIH07CgoJICAgIGxkLnBvaXMgPSBmdW5jdGlvbiAoeCwgbGFtYmRhKSB7CgkgICAgICByZXR1cm4geCA8IDAgPyAtSW5maW5pdHkgOiBsb2cobGFtYmRhKSAqIHggLSBsYW1iZGEgLSBsZmFjdG9yaWFsKHgpOwoJICAgIH07CgoJICAgIHJldHVybiBsZDsKCSAgfSk7Cgl9KTsKCgl2YXIgbWNtYyA9IGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZ1bmN0aW9uIChtb2R1bGUpIHsKCSAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3VtZGpzL3VtZC9ibG9iL21hc3Rlci90ZW1wbGF0ZXMvcmV0dXJuRXhwb3J0cy5qcwoJICAvLyBJdCBzaG91bGQgbWFrZSBzaHVyZSB0aGF0IG1vZHVsZSBjYW4gYmUgaW1wb3J0ZWQgYm90aCBpbiB0aGUgYnJvd3NlciwKCSAgLy8gTm9kZSwgYW5kIGJ5IHVzaW5nIHRoZSBBc3luY2hyb25vdXMgTW9kdWxlIERlZmluaXRpb24gc3RhbmRhcmQuCgkgIC8vIElmIHRoaXMgbW9kdWxlIGlzIGxvYWRlZCBpbiB0aGUgYnJvd3NlciBpdCB3aWxsIGNyZWF0ZWQgdGhlIGdsb2JhbAoJICAvLyBvYmplY3QgbWNtYyAuCgoJICAoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHsKCSAgICBpZiAobW9kdWxlLmV4cG9ydHMpIHsKCSAgICAgIC8vIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dAoJICAgICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsCgkgICAgICAvLyBsaWtlIE5vZGUuCgkgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsKCSAgICB9IGVsc2UgewoJICAgICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdykKCSAgICAgIHJvb3QubWNtYyA9IGZhY3RvcnkoKTsKCSAgICB9CgkgIH0pKGNvbW1vbmpzR2xvYmFsLCBmdW5jdGlvbiAoKSB7CgkgICAgLy8vIFRoZSBhY3R1YWwgbW9kdWxlIGNvZGUgc3RhcnRzIGhlcmUgLy8vCgkgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vICAKCSAgICAvLy8vLy8vLy8vIEhlbHBlciBGdW5jdGlvbnMgLy8vLy8vLy8vLwoJICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgoJICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHJlYWwgbnVtYmVyIGJldHdlZW4gbWluIGFuZCBtYXggKi8KCSAgICB2YXIgcnVuaWYgPSBmdW5jdGlvbiAobWluLCBtYXgpIHsKCSAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW47CgkgICAgfTsKCSAgICAvKiogUmV0dXJucyBhIHJhbmRvbSBpbnRlZ2VyIGJldHdlZW4gbWluIGFuZCBtYXggKi8KCgoJICAgIHZhciBydW5pZl9kaXNjcmV0ZSA9IGZ1bmN0aW9uIChtaW4sIG1heCkgewoJICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47CgkgICAgfTsKCSAgICAvKiogUmV0dXJucyBhIHJhbmRvbSByZWFsIG51bWJlciBmcm9tIGEgbm9ybWFsIGRpc3RyaWJidXRpb24gZGVmaW5lZAoJICAgICAqICBieSBtZWFuIGFuZCBzZC4gCgkgICAgICogIEFkYXB0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vanN0YXQvanN0YXQvYmxvYi9tYXN0ZXIvc3JjL3NwZWNpYWwuanMgKi8KCgoJICAgIHZhciBybm9ybSA9IGZ1bmN0aW9uIChtZWFuLCBzZCkgewoJICAgICAgdmFyIHUsIHYsIHgsIHksIHE7CgoJICAgICAgZG8gewoJICAgICAgICB1ID0gTWF0aC5yYW5kb20oKTsKCSAgICAgICAgdiA9IDEuNzE1NiAqIChNYXRoLnJhbmRvbSgpIC0gMC41KTsKCSAgICAgICAgeCA9IHUgLSAwLjQ0OTg3MTsKCSAgICAgICAgeSA9IE1hdGguYWJzKHYpICsgMC4zODY1OTU7CgkgICAgICAgIHEgPSB4ICogeCArIHkgKiAoMC4xOTYwMCAqIHkgLSAwLjI1NDcyICogeCk7CgkgICAgICB9IHdoaWxlIChxID4gMC4yNzU5NyAmJiAocSA+IDAuMjc4NDYgfHwgdiAqIHYgPiAtNCAqIE1hdGgubG9nKHUpICogdSAqIHUpKTsKCgkgICAgICByZXR1cm4gdiAvIHUgKiBzZCArIG1lYW47CgkgICAgfTsKCSAgICAvKiogUmV0dXJucyBhIGRlZXAgY2xvbmUgb2Ygc3JjLCBzb3J0IG9mLi4uIEl0IG9ubHkgY29waWVzIGEgbGltaXRlZAoJICAgICAqIG51bWJlciBvZiB0eXBlcyBhbmQsIGZvciBleGFtcGxlLCBmdW5jdGlvbiBhcmUgbm90IGNvcGllZC4gCgkgICAgICogRnJvbSBodHRwOi8vZGF2aWR3YWxzaC5uYW1lL2phdmFzY3JpcHQtY2xvbmUKCSAgICAgKi8KCgoJICAgIHZhciBkZWVwX2Nsb25lID0gZnVuY3Rpb24gKHNyYykgewoJICAgICAgZnVuY3Rpb24gbWl4aW4oZGVzdCwgc291cmNlLCBjb3B5RnVuYykgewoJICAgICAgICB2YXIgbmFtZSwKCSAgICAgICAgICAgIHMsCgkgICAgICAgICAgICBlbXB0eSA9IHt9OwoKCSAgICAgICAgZm9yIChuYW1lIGluIHNvdXJjZSkgewoJICAgICAgICAgIC8vIHRoZSAoIShuYW1lIGluIGVtcHR5KSB8fCBlbXB0eVtuYW1lXSAhPT0gcykgY29uZGl0aW9uIGF2b2lkcyBjb3B5aW5nIHByb3BlcnRpZXMgaW4gInNvdXJjZSIKCSAgICAgICAgICAvLyBpbmhlcml0ZWQgZnJvbSBPYmplY3QucHJvdG90eXBlLgkgRm9yIGV4YW1wbGUsIGlmIGRlc3QgaGFzIGEgY3VzdG9tIHRvU3RyaW5nKCkgbWV0aG9kLAoJICAgICAgICAgIC8vIGRvbid0IG92ZXJ3cml0ZSBpdCB3aXRoIHRoZSB0b1N0cmluZygpIG1ldGhvZCB0aGF0IHNvdXJjZSBpbmhlcml0ZWQgZnJvbSBPYmplY3QucHJvdG90eXBlCgkgICAgICAgICAgcyA9IHNvdXJjZVtuYW1lXTsKCgkgICAgICAgICAgaWYgKCEobmFtZSBpbiBkZXN0KSB8fCBkZXN0W25hbWVdICE9PSBzICYmICghKG5hbWUgaW4gZW1wdHkpIHx8IGVtcHR5W25hbWVdICE9PSBzKSkgewoJICAgICAgICAgICAgZGVzdFtuYW1lXSA9IGNvcHlGdW5jID8gY29weUZ1bmMocykgOiBzOwoJICAgICAgICAgIH0KCSAgICAgICAgfQoKCSAgICAgICAgcmV0dXJuIGRlc3Q7CgkgICAgICB9CgoJICAgICAgaWYgKCFzcmMgfHwgdHlwZW9mIHNyYyAhPSAib2JqZWN0IiB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc3JjKSA9PT0gIltvYmplY3QgRnVuY3Rpb25dIikgewoJICAgICAgICAvLyBudWxsLCB1bmRlZmluZWQsIGFueSBub24tb2JqZWN0LCBvciBmdW5jdGlvbgoJICAgICAgICByZXR1cm4gc3JjOyAvLyBhbnl0aGluZwoJICAgICAgfQoKCSAgICAgIGlmIChzcmMubm9kZVR5cGUgJiYgImNsb25lTm9kZSIgaW4gc3JjKSB7CgkgICAgICAgIC8vIERPTSBOb2RlCgkgICAgICAgIHJldHVybiBzcmMuY2xvbmVOb2RlKHRydWUpOyAvLyBOb2RlCgkgICAgICB9CgoJICAgICAgaWYgKHNyYyBpbnN0YW5jZW9mIERhdGUpIHsKCSAgICAgICAgLy8gRGF0ZQoJICAgICAgICByZXR1cm4gbmV3IERhdGUoc3JjLmdldFRpbWUoKSk7IC8vIERhdGUKCSAgICAgIH0KCgkgICAgICBpZiAoc3JjIGluc3RhbmNlb2YgUmVnRXhwKSB7CgkgICAgICAgIC8vIFJlZ0V4cAoJICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChzcmMpOyAvLyBSZWdFeHAKCSAgICAgIH0KCgkgICAgICB2YXIgciwgaSwgbDsKCgkgICAgICBpZiAoc3JjIGluc3RhbmNlb2YgQXJyYXkpIHsKCSAgICAgICAgLy8gYXJyYXkKCSAgICAgICAgciA9IFtdOwoKCSAgICAgICAgZm9yIChpID0gMCwgbCA9IHNyYy5sZW5ndGg7IGkgPCBsOyArK2kpIHsKCSAgICAgICAgICBpZiAoaSBpbiBzcmMpIHsKCSAgICAgICAgICAgIHIucHVzaChkZWVwX2Nsb25lKHNyY1tpXSkpOwoJICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgLy8gZ2VuZXJpYyBvYmplY3RzCgkgICAgICAgIHIgPSBzcmMuY29uc3RydWN0b3IgPyBuZXcgc3JjLmNvbnN0cnVjdG9yKCkgOiB7fTsKCSAgICAgIH0KCgkgICAgICByZXR1cm4gbWl4aW4ociwgc3JjLCBkZWVwX2Nsb25lKTsKCSAgICB9OwoJICAgIC8qKiBTcGVjaWFsaXplZCBjbG9uZSBmdW5jdGlvbiB0aGF0IG9ubHkgY2xvbmVzIHNjYWxhcnMgYW5kIG5lc3RlZCBhcnJheXMgd2hlcmUKCSAgICAgKiBlYWNoIGFycmF5IGVpdGhlciBjb25zaXN0cyBvZiBhbGwgYXJyYXlzIG9yIGFsbCBudW1iZXJzLiBUaGlzIGZ1bmN0aW9uCgkgICAgICogaXMgbWVhbnQgYXMgYSBmYXN0IHdheSBvZiBjbG9uaW5nIHBhcmFtZXRlciBkcmF3cyB3aXRoaW4gdGhlIG1jbWMgc2FtcGxpbmcKCSAgICAgKiBsb29wLgoJICAgICAqLwoKCgkgICAgdmFyIGNsb25lX3BhcmFtX2RyYXcgPSBmdW5jdGlvbiAoeCkgewoJICAgICAgaWYgKEFycmF5LmlzQXJyYXkoeCkpIHsKCSAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoeFswXSkpIHsKCSAgICAgICAgICAvLyB4IGlzIGFuIGFycmF5IG9mIGFycmF5cyBzbyB3ZSBuZWVkIHRvIGNsb25lIGl0IHJlY3Vyc2l2ZWx5CgkgICAgICAgICAgdmFyIHhfY29weSA9IFtdOwoKCSAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0geC5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgeF9jb3B5LnB1c2goY2xvbmVfcGFyYW1fZHJhdyh4W2ldKSk7CgkgICAgICAgICAgfQoKCSAgICAgICAgICByZXR1cm4geF9jb3B5OwoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgIC8vIFdlJ2xsIGFzc3VtZSB4IGlzIGEgYXJyYXlzIG9mIHNjYWxhcnMKCSAgICAgICAgICByZXR1cm4geC5zbGljZSgwKTsKCSAgICAgICAgfQoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgLy8gV2UnbGwgYXNzdW1lIHggaXMgYSBzY2FsYXIKCSAgICAgICAgcmV0dXJuIHg7CgkgICAgICB9CgkgICAgfTsKCSAgICAvKiogUmV0dXJucyB0cnVlIGlmIG9iamVjdCBpcyBhIG51bWJlci4KCSAgICAgKi8KCgoJICAgIHZhciBpc19udW1iZXIgPSBmdW5jdGlvbiAob2JqZWN0KSB7CgkgICAgICByZXR1cm4gdHlwZW9mIG9iamVjdCA9PSAibnVtYmVyIiB8fCB0eXBlb2Ygb2JqZWN0ID09ICJvYmplY3QiICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYSAocG9zc2libHkgbXVsdGlkaW1lbnNpb25hbC9uZXN0ZWQpIGFycmF5LgoJICAgICAqIEBwYXJhbSBkaW0gLSBBbiBhcnJheSBnaXZpbmcgdGhlIGRpbWVuc2lvbiBvZiB0aGUgYXJyYXkuIEZvciBleGFtcGxlLAoJICAgICAqICAgWzVdIHdvdWxkIHlpZWxkIGEgNSBlbGVtZW50IGFycmF5LCBhbmQgWzMsM10gd291bGQgeWllbGQgYSAzIGJ5IDMgbWF0cml4LgoJICAgICAqIEBwYXJhbSBpbml0IC0gQSB2YWx1ZSBvciBhIGZ1bmN0aW9uIHVzZWQgdG8gZmlsbCBpbiB0aGUgZWFjaCBlbGVtZW50IGluCgkgICAgICogICB0aGUgYXJyYXkuIElmIGl0IGlzIGEgZnVuY3Rpb24gaXQgc2hvdWxkIHRha2Ugbm8gYXJndW1lbnRzLCBpdCB3aWxsIGJlIAoJICAgICAqICAgZXZhbHVhdGVkIG9uY2UgZm9yIGVhY2ggZWxlbWVudCwgYW5kIGl0J3MgcmV0dXJuIHZhbHVlIHdpbGwgYmUgdXNlZCB0bwoJICAgICAqICAgZmlsbCBpbiBlYWNoIGVsZW1lbnQuCgkgICAgICogQGV4YW1wbGUgCgkgICAgICogLy8gVGhlIGZvbGxvd2luZyB3b3VsZCByZXR1cm4gW1sxLDFdLFsxLDFdLFsxLDFdXQoJICAgICAqIGNyZWF0ZV9hcnJheShbMiwzXSwgMSkKCSAgICAgKi8KCgoJICAgIHZhciBjcmVhdGVfYXJyYXkgPSBmdW5jdGlvbiAoZGltLCBpbml0KSB7CgkgICAgICB2YXIgYXJyID0gbmV3IEFycmF5KGRpbVswXSk7CgkgICAgICB2YXIgaTsKCgkgICAgICBpZiAoZGltLmxlbmd0aCA9PSAxKSB7CgkgICAgICAgIC8vIEZpbGwgaXQgdXAgd2l0aCBpbml0CgkgICAgICAgIGlmICh0eXBlb2YgaW5pdCA9PT0gImZ1bmN0aW9uIikgewoJICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewoJICAgICAgICAgICAgYXJyW2ldID0gaW5pdCgpOwoJICAgICAgICAgIH0KCSAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHsKCSAgICAgICAgICAgIGFycltpXSA9IGluaXQ7CgkgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICB9IGVsc2UgaWYgKGRpbS5sZW5ndGggPiAxKSB7CgkgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewoJICAgICAgICAgIGFycltpXSA9IGNyZWF0ZV9hcnJheShkaW0uc2xpY2UoMSksIGluaXQpOwoJICAgICAgICB9CgkgICAgICB9IGVsc2UgewoJICAgICAgICB0aHJvdyAiY3JlYXRlX2FycmF5IGNhbid0IGNyZWF0ZSBhIGRpbWVuc2lvbmxlc3MgYXJyYXkiOwoJICAgICAgfQoKCSAgICAgIHJldHVybiBhcnI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm4gdGhlIGRpbWVuc2lvbnMgb2YgYSBwb3NzaWJseSBuZXN0ZWQgYXJyYXkgYXMgYW4gYXJyYXkuIEZvciAKCSAgICAgKiBleGFtcGxlLCBhcnJheV9kaW0oIFtbMSwgMl0sIFsxLCAyXV0gKSBzaG91bGQgcmV0dXJuIFsyLCAyXQoJICAgICAqIEFzc3VtZXMgdGhhdCBhbGwgYXJyYXlzIGluc2lkZSBhbm90aGVyIGFycmF5IGFyZSBvZiB0aGUgc2FtZSBsZW5ndGguCgkgICAgICogQGV4YW1wbGUKCSAgICAgKiAvLyBTaG91bGQgcmV0dXJuIFs0LCAyLCAxXQoJICAgICAqIGFycmF5X2RpbShjcmVhdGVfYXJyYXkoWzQsIDIsIDFdLCAwKSkKCSAgICAgKi8KCgoJICAgIHZhciBhcnJheV9kaW0gPSBmdW5jdGlvbiAoYSkgewoJICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYVswXSkpIHsKCSAgICAgICAgcmV0dXJuIFthLmxlbmd0aF0uY29uY2F0KGFycmF5X2RpbShhWzBdKSk7CgkgICAgICB9IGVsc2UgewoJICAgICAgICByZXR1cm4gW2EubGVuZ3RoXTsKCSAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENoZWNrcyBpZiB0d28gYXJyYXlzIGFyZSBlcXVhbCBpbiB0aGUgc2Vuc2UgdGhhdCB0aGV5IGNvbnRhaW4gdGhlIHNhbWUgZWxlbWVudHMKCSAgICAgKiBhcyBqdWRnZWQgYnkgdGhlICI9PSIgb3BlcmF0b3IuIFJldHVybnMgdHJ1ZSBvciBmYWxzZS4KCSAgICAgKiBBZGFwdGVkIGZyb20gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTQ4NTM5NzQvMTAwMTg0OAoJICAgICAqLwoKCgkgICAgdmFyIGFycmF5X2VxdWFsID0gZnVuY3Rpb24gKGExLCBhMikgewoJICAgICAgaWYgKGExLmxlbmd0aCAhPSBhMi5sZW5ndGgpIHJldHVybiBmYWxzZTsKCgkgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGExLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgbmVzdGVkIGFycmF5cwoJICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhMVtpXSkgJiYgQXJyYXkuaXNBcnJheShhMltpXSkpIHsKCSAgICAgICAgICAvLyByZWN1cnNlIGludG8gdGhlIG5lc3RlZCBhcnJheXMKCSAgICAgICAgICBpZiAoIWFycmF5X2VxdWFsKGExW2ldLCBhMltpXSkpIHJldHVybiBmYWxzZTsKCSAgICAgICAgfSBlbHNlIGlmIChhMVtpXSAhPSBhMltpXSkgewoJICAgICAgICAgIC8vIFdhcm5pbmcgLSB0d28gZGlmZmVyZW50IG9iamVjdCBpbnN0YW5jZXMgd2lsbCBuZXZlciBiZSBlcXVhbDoge3g6MjB9ICE9IHt4OjIwfQoJICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgfQoKCSAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVHJhdmVyc2VzIGEgcG9zc2libHkgbmVzdGVkIGFycmF5IGEgYW5kIGFwcGxpZXMgZnVuIHRvIGFsbCAibGVhZiBub2RlcyIsIAoJICAgICAqIHRoYXQgaXMsIHZhbHVlcyB0aGF0IGFyZSBub3QgYXJyYXlzLiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBzYW1lIHNpemUgYXMKCSAgICAgKiBhLgoJICAgICAqLwoKCgkgICAgdmFyIG5lc3RlZF9hcnJheV9hcHBseSA9IGZ1bmN0aW9uIChhLCBmdW4pIHsKCSAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpKSB7CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgQXJyYXkoYS5sZW5ndGgpOwoKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgcmVzdWx0W2ldID0gbmVzdGVkX2FycmF5X2FwcGx5KGFbaV0sIGZ1bik7CgkgICAgICAgIH0KCgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICB9IGVsc2UgewoJICAgICAgICByZXR1cm4gZnVuKGEpOwoJICAgICAgfQoJICAgIH07CgkgICAgLyoqIFJhbmRvbWl6aW5nIHRoZSBhcnJheSBlbGVtZW50IG9yZGVyIGluLXBsYWNlLiBVc2luZyBEdXJzdGVuZmVsZAoJICAgICAqIHNodWZmbGUgYWxnb3JpdGhtLiBBZGFwdGVkIGZyb20gaGVyZTogCgkgICAgICogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTI2NDY4NjQvMTAwMTg0OAoJICAgICAqLwoKCgkgICAgZnVuY3Rpb24gc2h1ZmZsZV9hcnJheShhcnJheSkgewoJICAgICAgZm9yICh2YXIgaSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHsKCSAgICAgICAgdmFyIGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTsKCSAgICAgICAgdmFyIHRlbXAgPSBhcnJheVtpXTsKCSAgICAgICAgYXJyYXlbaV0gPSBhcnJheVtqXTsKCSAgICAgICAgYXJyYXlbal0gPSB0ZW1wOwoJICAgICAgfQoKCSAgICAgIHJldHVybiBhcnJheTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogRG9lcyB0aGUgc2FtZSB0aGluZyBhcyBuZXN0ZWRfYXJyYXlfYXBwbHksIHRoYXQgaXMsIHRyYXZlcnNlcyBhIHBvc3NpYmx5CgkgICAgICogbmVzdGVkIGFycmF5IGEgYW5kIGFwcGxpZXMgZnVuIHRvIGFsbCAibGVhZiBub2RlcyIgYW5kIHJldHVybnMgYW4gYXJyYXkgCgkgICAgICogb2YgdGhlIHNhbWUgc2l6ZSBhcyBhLiBUaGUgZGlmZmVyZW5jZSBpcyB0aGF0IG5lc3RlZF9hcnJheV9yYW5kb21fYXBwbHkKCSAgICAgKiBicmFuY2hlcyByYW5kb21seS4KCSAgICAgKi8KCgoJICAgIHZhciBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5ID0gZnVuY3Rpb24gKGEsIGZ1bikgewoJICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYSkpIHsKCSAgICAgICAgdmFyIGxlbiA9IGEubGVuZ3RoOwoJICAgICAgICB2YXIgaTsKCSAgICAgICAgdmFyIGFycmF5X2lzID0gW107CgoJICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKCSAgICAgICAgICBhcnJheV9pc1tpXSA9IGk7CgkgICAgICAgIH0KCgkgICAgICAgIHNodWZmbGVfYXJyYXkoYXJyYXlfaXMpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gW107CgoJICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKCSAgICAgICAgICB2YXIgYXJyYXlfaSA9IGFycmF5X2lzW2ldOwoJICAgICAgICAgIHJlc3VsdFthcnJheV9pXSA9IG5lc3RlZF9hcnJheV9hcHBseShhW2FycmF5X2ldLCBmdW4pOwoJICAgICAgICB9CgoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgcmV0dXJuIGZ1bihhKTsKCSAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFsbG93cyBhIHByZXR0eSB3YXkgb2Ygc2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgd2hlcmUgdGhlIGRlZnVsdHMgY2FuIGJlCgkgICAgICogb3ZlcnJpZGRlbiBieSBhbiBvcHRpb25zIG9iamVjdC4KCSAgICAgKiAgQHBhcmFtIG9wdGlvbl9uYW1lIC0gdGhlIG5hbWUgb2YgdGhlIG9wdGlvbiBhcyBhIHN0cmluZwoJICAgICAqICBAcGFyYW0gbXlfb3B0aW9ucyAtIGFuIG9wdGlvbiBvYmplY3QgdGhhdCBjb3VsZCBoYXZlIG9wdGlvbl9uYW1lIAoJICAgICAqICAgIGFzIGEgbWVtYmVyLgoJICAgICAqIEBwYXJhbSBkZWZhdWxfdmFsdWUgLSBkZWZ1bHQgdmFsdWUgdGhhdCBpcyByZXR1cm5lZCBpZiBvcHRpb25fbmFtZSAKCSAgICAgKiAgIGlzIG5vdCBkZWZpbmVkIGluIG15X29wdGlvbnMuCgkgICAgICogQGV4YW1wbGUKCSAgICAgKiB2YXIgbXlfb3B0aW9ucyA9IHtwaTogMy4xNDE1OX0KCSAgICAgKiB2YXIgcGkgPSBnZXRfb3B0aW9uKCJwaSIsIG15X29wdGlvbnMsIDMuMTQpCgkgICAgICovCgkgICAgLy8gUHJldHR5IHdheSBvZiBzZXR0aW5nIGRlZmF1bHQgb3B0aW9ucyB3aGVyZSB0aGUgZGVmYXVsdHMgY2FuIGJlIG92ZXJyaWRkZW4KCSAgICAvLyBieSBhbiBvcHRpb25zIG9iamVjdC4gRm9yIGV4YW1wbGU6CgkgICAgLy8gdmFyIHBpID0gZ2V0X29wdGlvbigicGkiLCBteV9vcHRpb25zLCAzLjE0KQoKCgkgICAgdmFyIGdldF9vcHRpb24gPSBmdW5jdGlvbiAob3B0aW9uX25hbWUsIG9wdGlvbnMsIGRlZmF1bF92YWx1ZSkgewoJICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CgkgICAgICByZXR1cm4gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShvcHRpb25fbmFtZSkgJiYgb3B0aW9uc1tvcHRpb25fbmFtZV0gIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zW29wdGlvbl9uYW1lXSAhPT0gbnVsbCA/IG9wdGlvbnNbb3B0aW9uX25hbWVdIDogZGVmYXVsX3ZhbHVlOwoJICAgIH07CgkgICAgLyoqIFZlcnNpb24gb2YgZ2V0X29wdGlvbiB3aGVyZSB0aGUgb3B0aW9uIHNob3VsZCBiZSBhIG9uZSBvciBtdWx0aS1kaW1lbnNpb25hbAoJICAgICAqIGFycmF5IGFuZCB3aGVyZSB0aGUgZGVmYXVsdCBjYW4gYmUgb3ZlcnJpZGRlbiBlaXRoZXIgYnkgYSBzY2FsYXIgb3IgYnkgYW4gYXJyYXkuCgkgICAgICogSWYgaXQncyBhIHNjYWxhciB0aGUgdGhhdCBzY2FsYXIgaXMgdXNlZCB0byBpbml0aWFsaXplIGFuIGFycmF5IHdpdGggCgkgICAgICogZGltIGRpbWVuc2lvbnMuCgkgICAgICogCgkgICAgICovCgoKCSAgICB2YXIgZ2V0X211bHRpZGltX29wdGlvbiA9IGZ1bmN0aW9uIChvcHRpb25fbmFtZSwgb3B0aW9ucywgZGltLCBkZWZhdWxfdmFsdWUpIHsKCSAgICAgIHZhciB2YWx1ZSA9IGdldF9vcHRpb24ob3B0aW9uX25hbWUsIG9wdGlvbnMsIGRlZmF1bF92YWx1ZSk7CgoJICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkgewoJICAgICAgICB2YWx1ZSA9IGNyZWF0ZV9hcnJheShkaW0sIHZhbHVlKTsKCSAgICAgIH0KCgkgICAgICBpZiAoIWFycmF5X2VxdWFsKGFycmF5X2RpbSh2YWx1ZSksIGRpbSkpIHsKCSAgICAgICAgdGhyb3cgIlRoZSBvcHRpb24gIiArIG9wdGlvbl9uYW1lICsgIiBpcyBvZiBkaW1lbnNpb24gWyIgKyBhcnJheV9kaW0odmFsdWUpICsgIl0gYnV0IHNob3VsZCBiZSBbIiArIGRpbSArICJdLiI7CgkgICAgICB9CgoJICAgICAgcmV0dXJuIHZhbHVlOwoJICAgIH07IC8vLy8vLy8vLy8gRnVuY3Rpb25zIGZvciBoYW5kbGluZyBwYXJhbWV0ZXIgb2JqZWN0cyAvLy8vLy8vLy8vCgkgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIGZpeGVkIChzYW1lIGV2ZXJ5IHRpbWUpIG51bWJlciB0aGF0IGNvdWxkIGJlIHVzZWQgdG8gaW5pdGlhbGl6ZQoJICAgICAqIGEgcGFyYW1ldGVyIG9mIGEgY2VydGFpbiB0eXBlLCBwb3NzaWJseSB3aXRoIGxvd2VyIGFuZCB1cHBlciBib3VuZHMuCgkgICAgICogVGhlIHBvc3NpbGUgdHlwZXMgYXJlICJyZWFsIiwgImludCIsIGFuZCAiYmluYXJ5Ii4KCSAgICAgKi8KCgoJICAgIHZhciBwYXJhbV9pbml0X2ZpeGVkID0gZnVuY3Rpb24gKHR5cGUsIGxvd2VyLCB1cHBlcikgewoJICAgICAgaWYgKGxvd2VyID4gdXBwZXIpIHsKCSAgICAgICAgdGhyb3cgIkNhbiBub3QgaW5pdGlhbGl6ZSBwYXJhbWV0ZXIgd2hlcmUgbG93ZXIgYm91bmQgPiB1cHBlciBib3VuZCI7CgkgICAgICB9CgoJICAgICAgaWYgKHR5cGUgPT09ICJyZWFsIikgewoJICAgICAgICBpZiAobG93ZXIgPT09IC1JbmZpbml0eSAmJiB1cHBlciA9PT0gSW5maW5pdHkpIHsKCSAgICAgICAgICByZXR1cm4gMC41OwoJICAgICAgICB9IGVsc2UgaWYgKGxvd2VyID09PSAtSW5maW5pdHkpIHsKCSAgICAgICAgICByZXR1cm4gdXBwZXIgLSAwLjU7CgkgICAgICAgIH0gZWxzZSBpZiAodXBwZXIgPT09IEluZmluaXR5KSB7CgkgICAgICAgICAgcmV0dXJuIGxvd2VyICsgMC41OwoJICAgICAgICB9IGVsc2UgaWYgKGxvd2VyIDw9IHVwcGVyKSB7CgkgICAgICAgICAgcmV0dXJuIChsb3dlciArIHVwcGVyKSAvIDI7CgkgICAgICAgIH0KCSAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gImludCIpIHsKCSAgICAgICAgaWYgKGxvd2VyID09PSAtSW5maW5pdHkgJiYgdXBwZXIgPT09IEluZmluaXR5KSB7CgkgICAgICAgICAgcmV0dXJuIDE7CgkgICAgICAgIH0gZWxzZSBpZiAobG93ZXIgPT09IC1JbmZpbml0eSkgewoJICAgICAgICAgIHJldHVybiB1cHBlciAtIDE7CgkgICAgICAgIH0gZWxzZSBpZiAodXBwZXIgPT09IEluZmluaXR5KSB7CgkgICAgICAgICAgcmV0dXJuIGxvd2VyICsgMTsKCSAgICAgICAgfSBlbHNlIGlmIChsb3dlciA8PSB1cHBlcikgewoJICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKChsb3dlciArIHVwcGVyKSAvIDIpOwoJICAgICAgICB9CgkgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICJiaW5hcnkiKSB7CgkgICAgICAgIHJldHVybiAxOwoJICAgICAgfQoKCSAgICAgIHRocm93ICJDb3VsZCBub3QgaW5pdGlhbGl6ZSBwYXJhbWV0ZXIgb2YgdHlwZSAiICsgdHlwZSArICJbIiArIGxvd2VyICsgIiwgIiArIHVwcGVyICsgIl0iOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tcGxldGVzIHBhcmFtc190b19jb21wbGV0ZSwgYW4gb2JqZWN0IGNvbnRhaW5pbmcgcGFyYW1ldGVyIGRlc2NyaXB0aW9ucywgCgkgICAgICogYW5kIGluaXRpYWxpemVzIG5vbi1pbml0aWFsaXplZCBwYXJhbWV0ZXJzLiBUaGlzIG1vZGlmaWVkIHZlcnNpb24gb2YKCSAgICAgKiBwYXJhbXNfdG9fY29tcGxldGUgaXMgcmV0dXJuZWQgYXMgYSBkZWVwIGNvcHkgYW5kIG5vdCBtb2RpZmllZCBpbiBwbGFjZS4KCSAgICAgKiBJbml0aWFsaXphdGlvbiBpcyBkb25lIGJ5IHN1cHBseWluZyBhIHBhcmFtX2luaXQgZnVuY3Rpb24gd2l0aCBzaWduYXR1cmUKCSAgICAgKiBmdW5jdGlvbih0eXBlLCBsb3dlciwgdXBwZXIpIHRoYXQgc2hvdWxkIHJldHVybiBhIHNpbmdsZSBudW1iZXIgCgkgICAgICogKGxpa2UgcGFyYW1faW5pdF9maXhlZCwgZm9yIGV4YW1wbGUpLgoJICAgICAqIEBleGFtcGxlCgkgICAgICogdmFyIHBhcmFtcyA9IHsgIm11IjogeyJ0eXBlIjogInJlYWwifSB9CgkgICAgICogcGFyYW1zID0gY29tcGxldGVfcGFyYW1zKHBhcmFtcyk7CgkgICAgICogLy8gcGFyYW1zIHNob3VsZCBub3cgYmU6CgkgICAgICogLy8gIHsibXUiOiB7ICJ0eXBlIjogInJlYWwiLCAiZGltIjogWzFdLCAidXBwZXIiOiBJbmZpbml0eSwKCSAgICAgKiAvLyAgICAgICAgICAgImxvd2VyIjogLUluZmluaXR5LCAiaW5pdCI6IDAuNSB9fQoJICAgICAqLwoKCgkgICAgdmFyIGNvbXBsZXRlX3BhcmFtcyA9IGZ1bmN0aW9uIChwYXJhbXNfdG9fY29tcGxldGUsIHBhcmFtX2luaXQpIHsKCSAgICAgIHZhciBwYXJhbXMgPSBkZWVwX2Nsb25lKHBhcmFtc190b19jb21wbGV0ZSk7CgoJICAgICAgZm9yICh2YXIgcGFyYW1fbmFtZSBpbiBwYXJhbXMpIHsKCSAgICAgICAgaWYgKCFwYXJhbXMuaGFzT3duUHJvcGVydHkocGFyYW1fbmFtZSkpIGNvbnRpbnVlOwoJICAgICAgICB2YXIgcGFyYW0gPSBwYXJhbXNbcGFyYW1fbmFtZV07CgoJICAgICAgICBpZiAoIXBhcmFtLmhhc093blByb3BlcnR5KCJ0eXBlIikpIHsKCSAgICAgICAgICBwYXJhbS50eXBlID0gInJlYWwiOwoJICAgICAgICB9CgoJICAgICAgICBpZiAoIXBhcmFtLmhhc093blByb3BlcnR5KCJkaW0iKSkgewoJICAgICAgICAgIHBhcmFtLmRpbSA9IFsxXTsKCSAgICAgICAgfQoKCSAgICAgICAgaWYgKGlzX251bWJlcihwYXJhbS5kaW0pKSB7CgkgICAgICAgICAgcGFyYW0uZGltID0gW3BhcmFtLmRpbV07CgkgICAgICAgIH0KCgkgICAgICAgIGlmIChwYXJhbS50eXBlID09ICJiaW5hcnkiKSB7CgkgICAgICAgICAgcGFyYW0udXBwZXIgPSAxOwoJICAgICAgICAgIHBhcmFtLmxvd2VyID0gMDsKCSAgICAgICAgfQoKCSAgICAgICAgaWYgKCFwYXJhbS5oYXNPd25Qcm9wZXJ0eSgidXBwZXIiKSkgewoJICAgICAgICAgIHBhcmFtLnVwcGVyID0gSW5maW5pdHk7CgkgICAgICAgIH0KCgkgICAgICAgIGlmICghcGFyYW0uaGFzT3duUHJvcGVydHkoImxvd2VyIikpIHsKCSAgICAgICAgICBwYXJhbS5sb3dlciA9IC1JbmZpbml0eTsKCSAgICAgICAgfQoKCSAgICAgICAgaWYgKHBhcmFtLmhhc093blByb3BlcnR5KCJpbml0IikpIHsKCSAgICAgICAgICAvLyBJZiB0aGlzIGlzIGp1c3QgYSBudW1iZXIgb3IgYSBuZXN0ZWQgYXJyYXkgd2UgbGVhdmUgaXQgYWxvbmUsIGJ1dCBpZi4uLgoJICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgdHlwZW9mIHBhcmFtLmluaXQgPT09ICJmdW5jdGlvbiIpIHsKCSAgICAgICAgICAgIC8vIHBhcmFtLmluaXQgaXMgYSBmdW5jdGlvbiwgdXNlIHRoYXQgdG8gaW5pdGlhbGl6ZSB0aGUgcGFyYW1ldGVyLgoJICAgICAgICAgICAgcGFyYW0uaW5pdCA9IHBhcmFtLmluaXQoKTsKCSAgICAgICAgICB9IGVsc2UgaWYgKCFhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgIUFycmF5LmlzQXJyYXkocGFyYW0uaW5pdCkpIHsKCSAgICAgICAgICAgIC8vIFdlIGhhdmUgYSBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlciB3aGVyZSB0aGUgcGFyYW0uaW5pdCBleGlzdCBidXQKCSAgICAgICAgICAgIC8vIGlzIG5vdCBhbiBhcnJheS4gVGhlbiBhc3N1bWUgaXQgaXMgYSBudW1iZXIgb3IgYSBmdW5jdGlvbiBhbmQgdXNlCgkgICAgICAgICAgICAvLyBpdCB0byBpbml0aWFsaXplIHRoZSBwYXJhbWV0ZXIuCgkgICAgICAgICAgICBwYXJhbS5pbml0ID0gY3JlYXRlX2FycmF5KHBhcmFtLmRpbSwgcGFyYW0uaW5pdCk7CgkgICAgICAgICAgfQoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgIC8vIFdlIHVzZSB0aGUgZGVmYXVsdCBpbml0aWFsaXphdGlvbiBmdW5jdGlvbi4KCSAgICAgICAgICBpZiAoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7CgkgICAgICAgICAgICBwYXJhbS5pbml0ID0gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpOwoJICAgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgICBwYXJhbS5pbml0ID0gY3JlYXRlX2FycmF5KHBhcmFtLmRpbSwgZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgICByZXR1cm4gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpOwoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICB9CgoJICAgICAgcmV0dXJuIHBhcmFtczsKCSAgICB9OyAvLy8vLy8vLy8vIFN0ZXBwZXIgRnVuY3Rpb25zIC8vLy8vLy8vLy8vCgkgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKCSAgICAvKioKCSAgICAgKiBAaW50ZXJmYWNlCgkgICAgICogQSBTdGVwcGVyIGlzIGFuIG9iamVjdCByZXNwb25zaWJsZSBmb3IgcHVzaGluZyBhcm91bmQgb25lCgkgICAgICogb3IgbW9yZSBwYXJhbWV0ZXIgdmFsdWVzIGluIGEgc3RhdGUgYWNjb3JkaW5nIHRvIHRoZSBkaXN0cmlidXRpb24KCSAgICAgKiBkZWZpbmVkIGJ5IHRoZSBsb2cgcG9zdGVyaW9yLiBUaGlzIGRlZmluZXMgdGhlIFN0ZXBwZXIgImludGVyZmFjZSIsCgkgICAgICogd2hlcmUgImludGVyZmFjZSIgbWVhbnMgdGhhdCBTdGVwcGVyIGRlZmluZXMgYSBjbGFzcyB0aGF0IGlzIG5ldmVyCgkgICAgICogbWVhbnQgdG8gYmUgaW5zdGFudGlhdGVkLCBidXQganVzdCB0byBiZSBzdWJjbGFzc2VkIGJ5IHNwZWNpYWxpemVkCgkgICAgICogc3RlcHBlciBmdW5jdGlvbnMuCgkgICAgICogQGludGVyZmFjZQoJICAgICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMsIGZvciBleGFtcGxlOgoJICAgICAqICAgeyJtdSI6IHsgInR5cGUiOiAicmVhbCIsICJkaW0iOiBbMV0sICJ1cHBlciI6IEluZmluaXR5LCAKCSAgICAgKiAgICJsb3dlciI6IC1JbmZpbml0eSwgImluaXQiOiAwLjUgfX0KCSAgICAgKiAgIFRoZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMgYXJlIGV4cGVjdGVkIHRvIGJlICJjb21wbGV0ZSIsIHRoYXQgaXMsCgkgICAgICogICBzcGVjaWZ5aW5nIGFsbCByZWxldmFudCBhdHRyaWJ1dGVzIHN1Y2ggYXMgZGltLCBsb3dlciBhbmQgdXBwZXIuCgkgICAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzIGluIHBhcmFtcwoJICAgICAqICAgKGFuZCBwb3NzaWJseSBtb3JlKS4gVGhlIHBhcmFtZXRlciBuYW1lcyBhcmUgZ2l2ZW4gYXMga2V5cyBhbmQgdGhlIHN0YXRlcwoJICAgICAqICAgYXMgc2NhbGFycyBvciwgcG9zc2libHkgbmVzdGVkLCBhcnJheXMuIEZvciBleGFtcGxlOgoJICAgICAqICAge211OiAxMCwgc2lnbWE6IDUsIGJldGE6IFsxLCAyLjVdfQoJICAgICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gKnRha2luZyBubyBwYXJhbWV0ZXJzKiB0aGF0IHJldHVybnMgdGhlCgkgICAgICogICBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBUaGF0IGlzLCB0aGUgdmFsdWUgb2YgbG9nX3Bvc3QKCSAgICAgKiAgIHNob3VsZCBjaGFuZ2UgaWYgdGhlIHRoZSB2YWx1ZXMgaW4gc3RhdGUgYXJlIGNoYW5nZWQuCgkgICAgCgkgICAgICovCgoKCSAgICB2YXIgU3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCkgewoJICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7CgkgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7CgkgICAgICB0aGlzLmxvZ19wb3N0ID0gbG9nX3Bvc3Q7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUYWtlcyBhIHN0ZXAgaW4gdGhlIHBhcmFtZXRlciBzcGFjZS4gU2hvdWxkIHJldHVybiB0aGUgbmV3IHN0YXRlLAoJICAgICAqIGJ1dCBpcyBtYWlubHkgY2FsbGVkIGZvciBpdCdzIHNpZGUgZWZmZWN0IG9mIG1ha2luZyBhIGNoYW5nZSBpbiB0aGUKCSAgICAgKiBzdGF0ZSBvYmplY3QuCgkgICAgICovCgoKCSAgICBTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKCkgewoJICAgICAgdGhyb3cgIkV2ZXJ5IFN0ZXBwZXIgbmVlZCB0byBpbXBsZW1lbnQgc3RlcCgpIjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIElmIGltcGxlbWVudGVkLCBtYWtlcyB0aGUgc3RlcHBlciBhZGFwdCB3aGlsZSBzdGVwcGluZy4KCSAgICAgKi8KCgoJICAgIFN0ZXBwZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbiAoKSB7Ly8gT3B0aW9uYWwsIHNvbWUgc3RlcHBlcnMgbWlnaHQgbm90IGJlIGFkYXB0aXZlLiAqLyAKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIElmIGltcGxlbWVudGVkLCBtYWtlcyB0aGUgc3RlcHBlciBjZWFzZSBhZGFwdGluZyB3aGlsZSBzdGVwcGluZy4KCSAgICAgKi8KCgoJICAgIFN0ZXBwZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uICgpIHsvLyBPcHRpb25hbCwgc29tZSBzdGVwcGVycyBtaWdodCBub3QgYmUgYWRhcHRpdmUuICovIAoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhbiBvYmplY3QgY29udGFpbmcgaW5mbyByZWdhcmRpbmcgdGhlIHN0ZXBwZXIuCgkgICAgICovCgoKCSAgICBTdGVwcGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24gKCkgewoJICAgICAgLy8gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBpbmZvIGFib3V0IHRoZSBzdGF0ZSBvZiB0aGUgc3RlcHBlci4KCSAgICAgIHJldHVybiB7fTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBjbGFzcwoJICAgICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfQoJICAgICAqIENvbnN0cnVjdG9yIGZvciBhbiBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIHRoZSBtZXRyb3BvbGlzIHN0ZXAgaW4KCSAgICAgKiB0aGUgQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluICJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DIgoJICAgICAqIGJ5IFJvYmVydHMgYW5kIFJvc2VudGhhbCAoMjAwOCkuCgkgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIHBhcmFtZXRlciBkZWZpbml0aW9uLgoJICAgICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy4KCSAgICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gCgkgICAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLgoJICAgICAqIEBwYXJhbSBnZW5lcmF0ZV9wcm9wb3NhbCAtIGEgZnVuY3Rpb24gcmV0dXJuaW5nIGEgcHJvcG9zYWwgKGFzIGEgbnVtYmVyKQoJICAgICAqIHdpdGggc2lnbmF0dXJlIGZ1bmN0aW9uKHBhcmFtX3N0YXRlLCBsb2dfc2NhbGUpIHdoZXJlIHBhcmFtX3N0YXRlIGlzIGEKCSAgICAgKiBudW1iZXIgYW5kIGxvZ19zY2FsZSBkZWZpbmVzIHRoZSBzY2FsZSBvZiB0aGUgcHJvcG9zYWwgc29tZWhvdy4KCSAgICAqLwoKCgkgICAgdmFyIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBnZW5lcmF0ZV9wcm9wb3NhbCkgewoJICAgICAgU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KTsKCSAgICAgIHZhciBwYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTsKCgkgICAgICBpZiAocGFyYW1fbmFtZXMubGVuZ3RoICE9IDEpIHsKCSAgICAgICAgdGhyb3cgIk9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIGNhbiBvbmx5IGhhbmRsZSBvbmUgcGFyYW1ldGVyLiI7CgkgICAgICB9CgoJICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07CgkgICAgICB2YXIgcGFyYW0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVdOwoKCSAgICAgIGlmICghYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7CgkgICAgICAgIHRocm93ICJPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBjYW4gb25seSBoYW5kbGUgb25lIG9uZS1kaW1lbnNpb25hbCBwYXJhbWV0ZXIuIjsKCSAgICAgIH0KCgkgICAgICB0aGlzLmxvd2VyID0gcGFyYW0ubG93ZXI7CgkgICAgICB0aGlzLnVwcGVyID0gcGFyYW0udXBwZXI7CgkgICAgICB0aGlzLnByb3BfbG9nX3NjYWxlID0gZ2V0X29wdGlvbigicHJvcF9sb2dfc2NhbGUiLCBvcHRpb25zLCAwKTsKCSAgICAgIHRoaXMuYmF0Y2hfc2l6ZSA9IGdldF9vcHRpb24oImJhdGNoX3NpemUiLCBvcHRpb25zLCA1MCk7CgkgICAgICB0aGlzLm1heF9hZGFwdGF0aW9uID0gZ2V0X29wdGlvbigibWF4X2FkYXB0YXRpb24iLCBvcHRpb25zLCAwLjMzKTsKCSAgICAgIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uID0gZ2V0X29wdGlvbigiaW5pdGlhbF9hZGFwdGF0aW9uIiwgb3B0aW9ucywgMS4wKTsKCSAgICAgIHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlID0gZ2V0X29wdGlvbigidGFyZ2V0X2FjY2VwdF9yYXRlIiwgb3B0aW9ucywgMC40NCk7CgkgICAgICB0aGlzLmlzX2FkYXB0aW5nID0gZ2V0X29wdGlvbigiaXNfYWRhcHRpbmciLCBvcHRpb25zLCB0cnVlKTsKCSAgICAgIHRoaXMuZ2VuZXJhdGVfcHJvcG9zYWwgPSBnZW5lcmF0ZV9wcm9wb3NhbDsKCSAgICAgIHRoaXMuYWNjZXB0YW5jZV9jb3VudCA9IDA7CgkgICAgICB0aGlzLmJhdGNoX2NvdW50ID0gMDsKCSAgICAgIHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiA9IDA7CgkgICAgfTsKCgkgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7CgkgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gT25lZGltTWV0cm9wb2xpc1N0ZXBwZXI7CgoJICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKCkgewoJICAgICAgdmFyIHBhcmFtX3N0YXRlID0gdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdOwoJICAgICAgdmFyIHBhcmFtX3Byb3Bvc2FsID0gdGhpcy5nZW5lcmF0ZV9wcm9wb3NhbChwYXJhbV9zdGF0ZSwgdGhpcy5wcm9wX2xvZ19zY2FsZSk7CgoJICAgICAgaWYgKHBhcmFtX3Byb3Bvc2FsIDwgdGhpcy5sb3dlciB8fCBwYXJhbV9wcm9wb3NhbCA+IHRoaXMudXBwZXIpIDsgZWxzZSB7CgkgICAgICAgIC8vIG1ha2UgYSBNZXRyb3BvbGlzIHN0ZXAKCSAgICAgICAgdmFyIGN1cnJfbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7CgkgICAgICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IHBhcmFtX3Byb3Bvc2FsOwoJICAgICAgICB2YXIgcHJvcF9sb2dfZGVucyA9IHRoaXMubG9nX3Bvc3QoKTsKCSAgICAgICAgdmFyIGFjY2VwdF9wcm9iID0gTWF0aC5leHAocHJvcF9sb2dfZGVucyAtIGN1cnJfbG9nX2RlbnMpOwoKCSAgICAgICAgaWYgKGFjY2VwdF9wcm9iID4gTWF0aC5yYW5kb20oKSkgewoJICAgICAgICAgIC8vIFdlIGRvIG5vdGhpbmcgYXMgdGhlIHN0YXRlIG9mIHBhcmFtIGhhcyBhbHJlYWR5IGJlZW4gY2hhbmdlZCB0byB0aGUgcHJvcG9zYWwKCSAgICAgICAgICBpZiAodGhpcy5pc19hZGFwdGluZykgdGhpcy5hY2NlcHRhbmNlX2NvdW50Kys7CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgLy8gcmV2ZXJ0IHN0YXRlIGJhY2sgdG8gdGhlIG9sZCBzdGF0ZSBvZiBwYXJhbQoJICAgICAgICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IHBhcmFtX3N0YXRlOwoJICAgICAgICB9CgkgICAgICB9CgoJICAgICAgaWYgKHRoaXMuaXNfYWRhcHRpbmcpIHsKCSAgICAgICAgdGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uKys7CgoJICAgICAgICBpZiAodGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uID49IHRoaXMuYmF0Y2hfc2l6ZSkgewoJICAgICAgICAgIC8vIHRoZW4gYWRhcHQKCSAgICAgICAgICB0aGlzLmJhdGNoX2NvdW50Kys7CgkgICAgICAgICAgdmFyIGxvZ19zZF9hZGp1c3RtZW50ID0gTWF0aC5taW4odGhpcy5tYXhfYWRhcHRhdGlvbiwgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24gLyBNYXRoLnNxcnQodGhpcy5iYXRjaF9jb3VudCkpOwoKCSAgICAgICAgICBpZiAodGhpcy5hY2NlcHRhbmNlX2NvdW50IC8gdGhpcy5iYXRjaF9zaXplID4gdGhpcy50YXJnZXRfYWNjZXB0X3JhdGUpIHsKCSAgICAgICAgICAgIHRoaXMucHJvcF9sb2dfc2NhbGUgKz0gbG9nX3NkX2FkanVzdG1lbnQ7CgkgICAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMucHJvcF9sb2dfc2NhbGUgLT0gbG9nX3NkX2FkanVzdG1lbnQ7CgkgICAgICAgICAgfQoKCSAgICAgICAgICB0aGlzLmFjY2VwdGFuY2VfY291bnQgPSAwOwoJICAgICAgICAgIHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiA9IDA7CgkgICAgICAgIH0KCSAgICAgIH0KCgkgICAgICByZXR1cm4gdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdOwoJICAgIH07CgoJICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgdGhpcy5pc19hZGFwdGluZyA9IHRydWU7CgkgICAgfTsKCgkgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgIHRoaXMuaXNfYWRhcHRpbmcgPSBmYWxzZTsKCSAgICB9OwoKCSAgICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgIHJldHVybiB7CgkgICAgICAgIHByb3BfbG9nX3NjYWxlOiB0aGlzLnByb3BfbG9nX3NjYWxlLAoJICAgICAgICBpc19hZGFwdGluZzogdGhpcy5pc19hZGFwdGluZywKCSAgICAgICAgYWNjZXB0YW5jZV9jb3VudDogdGhpcy5hY2NlcHRhbmNlX2NvdW50LAoJICAgICAgICBpdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uOiB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24sCgkgICAgICAgIGJhdGNoX2NvdW50OiB0aGlzLmJhdGNoX2NvdW50CgkgICAgICB9OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRnVuY3Rpb24gcmV0dXJuaW5nIGEgTm9ybWFsIHByb3Bvc2FsLgoJICAgICAqLwoKCgkgICAgdmFyIG5vcm1hbF9wcm9wb3NhbCA9IGZ1bmN0aW9uIChwYXJhbV9zdGF0ZSwgcHJvcF9sb2dfc2NhbGUpIHsKCSAgICAgIHJldHVybiBybm9ybShwYXJhbV9zdGF0ZSwgTWF0aC5leHAocHJvcF9sb2dfc2NhbGUpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBjbGFzcwoJICAgICAqIEBhdWdtZW50cyB7T25lZGltTWV0cm9wb2xpc1N0ZXBwZXJ9CgkgICAgICogQSAic3ViY2xhc3MiIG9mIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBjb250aW5vdXMgTm9ybWFsIHByb3Bvc2Fscy4KCSAgICAgKi8KCgoJICAgIHZhciBSZWFsTWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHsKCSAgICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIG5vcm1hbF9wcm9wb3NhbCk7CgkgICAgfTsKCgkgICAgUmVhbE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsKCSAgICBSZWFsTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUmVhbE1ldHJvcG9saXNTdGVwcGVyOwoJICAgIC8qKgoJICAgICAqIEZ1bmN0aW9uIHJldHVybmluZyBhIGRpc2NyZXRpemVkIE5vcm1hbCBwcm9wb3NhbC4KCSAgICAgKi8KCgkgICAgdmFyIGRpc2NyZXRlX25vcm1hbF9wcm9wb3NhbCA9IGZ1bmN0aW9uIChwYXJhbV9zdGF0ZSwgcHJvcF9sb2dfc2NhbGUpIHsKCSAgICAgIHJldHVybiBNYXRoLnJvdW5kKHJub3JtKHBhcmFtX3N0YXRlLCBNYXRoLmV4cChwcm9wX2xvZ19zY2FsZSkpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICogQGNsYXNzCgkgICAgKiBAYXVnbWVudHMge09uZWRpbU1ldHJvcG9saXNTdGVwcGVyfQoJICAgICogQSAic3ViY2xhc3MiIG9mIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBkaXNjcmV0aXplZCBOb3JtYWwgcHJvcG9zYWxzLgoJICAgICovCgoKCSAgICB2YXIgSW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHsKCSAgICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIGRpc2NyZXRlX25vcm1hbF9wcm9wb3NhbCk7CgkgICAgfTsKCgkgICAgSW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUpOwoJICAgIEludE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEludE1ldHJvcG9saXNTdGVwcGVyOwoJICAgIC8qKgoJICAgICAqIEBjbGFzcwoJICAgICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfQoJICAgICAqIENvbnN0cnVjdG9yIGZvciBhbiBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIHRoZSBtZXRyb3BvbGlzIHN0ZXAgaW4KCSAgICAgKiB0aGUgQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluICJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DIgoJICAgICAqIGJ5IFJvYmVydHMgYW5kIFJvc2VudGhhbCAoMjAwOCkgZm9yIHBvc3NpYmx5IG11bHRpZGltZW5zaW9uYWwgYXJyYXlzLiBUaGF0CgkgICAgICogaXMsIGluc3RlYWQgb2YganVzdCB0YWtpbmcgYSBzdGVwIGZvciBhIG9uZS1kaW1lbnNpb25hbCBwYXJhbWV0ZXIgbGlrZSAKCSAgICAgKiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciwgdGhpcyBTdGVwcGVyIGlzIHJlc3BvbnNpYmxlIGZvciB0YWtpbmcgc3RlcHMgCgkgICAgICogZm9yIGEgbXVsdGlkaW1lbnNpb25hbCBhcnJheS4gSXQncyBzdGlsbCBwcmV0dHkgZHVtYiBhbmQganVzdCB0YWtlcwoJICAgICAqIG9uZS1kaW1lbnNpb25hbCBzdGVwcyBmb3IgZWFjaCBwYXJhbWV0ZXIgY29tcG9uZW50LCB0aG91Z2guCgkgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIHBhcmFtZXRlciBkZWZpbml0aW9uIGZvciBhIAoJICAgICAqICAgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIuCgkgICAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLgoJICAgICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiAKCSAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuCgkgICAgICogQHBhcmFtIFN1YlN0ZXBwZXIgLSBhIGNvbnN0cnVjdG9yIGZvciB0aGUgdHlwZSBvZiBvbmUgZGltZW5zaW9uYWwgU3RlcHBlciB0byBhcHBseSBvbgoJICAgICAqICAgYWxsIHRoZSBjb21wb25lbnRzIG9mIHRoZSBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlci4KCSAgICAqLwoKCSAgICB2YXIgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgU3ViU3RlcHBlcikgewoJICAgICAgU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KTsKCSAgICAgIHZhciBwYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTsKCgkgICAgICBpZiAocGFyYW1fbmFtZXMubGVuZ3RoICE9IDEpIHsKCSAgICAgICAgdGhyb3cgIk11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgY2FuJ3QgaGFuZGxlIG1vcmUgdGhhbiBvbmUgcGFyYW1ldGVyLiI7CgkgICAgICB9CgoJICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07CgkgICAgICB2YXIgcGFyYW0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVdOwoJICAgICAgdGhpcy5sb3dlciA9IHBhcmFtLmxvd2VyOwoJICAgICAgdGhpcy51cHBlciA9IHBhcmFtLnVwcGVyOwoJICAgICAgdGhpcy5kaW0gPSBwYXJhbS5kaW07CgkgICAgICB0aGlzLnByb3BfbG9nX3NjYWxlID0gZ2V0X211bHRpZGltX29wdGlvbigicHJvcF9sb2dfc2NhbGUiLCBvcHRpb25zLCB0aGlzLmRpbSwgMCk7CgkgICAgICB0aGlzLmJhdGNoX3NpemUgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKCJiYXRjaF9zaXplIiwgb3B0aW9ucywgdGhpcy5kaW0sIDUwKTsKCSAgICAgIHRoaXMubWF4X2FkYXB0YXRpb24gPSBnZXRfbXVsdGlkaW1fb3B0aW9uKCJtYXhfYWRhcHRhdGlvbiIsIG9wdGlvbnMsIHRoaXMuZGltLCAwLjMzKTsKCSAgICAgIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uID0gZ2V0X211bHRpZGltX29wdGlvbigiaW5pdGlhbF9hZGFwdGF0aW9uIiwgb3B0aW9ucywgdGhpcy5kaW0sIDEuMCk7CgkgICAgICB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSA9IGdldF9tdWx0aWRpbV9vcHRpb24oInRhcmdldF9hY2NlcHRfcmF0ZSIsIG9wdGlvbnMsIHRoaXMuZGltLCAwLjQ0KTsKCSAgICAgIHRoaXMuaXNfYWRhcHRpbmcgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKCJpc19hZGFwdGluZyIsIG9wdGlvbnMsIHRoaXMuZGltLCB0cnVlKTsgLy8gVGhpcyBoYWNrIGJlbG93IGlzIGEgcmVjdXJzaXZlIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhbiBhcnJheSBvZiAKCSAgICAgIC8vIG9uZSBkaW1lbnNpb25hbCBzdGVwcGVycyBhY2NvcmRpbmcgdG8gZGltLgoKCSAgICAgIHZhciBjcmVhdGVfc3Vic3RlcHBlcnMgPSBmdW5jdGlvbiAoZGltLCBzdWJzdGF0ZSwgbG9nX3Bvc3QsIHByb3BfbG9nX3NjYWxlLCBiYXRjaF9zaXplLCBtYXhfYWRhcHRhdGlvbiwgaW5pdGlhbF9hZGFwdGF0aW9uLCB0YXJnZXRfYWNjZXB0X3JhdGUsIGlzX2FkYXB0aW5nKSB7CgkgICAgICAgIHZhciBzdWJzdGVwcGVycyA9IFtdOwoKCSAgICAgICAgaWYgKGRpbS5sZW5ndGggPT09IDEpIHsKCSAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgc3Vib3B0aW9ucyA9IHsKCSAgICAgICAgICAgICAgcHJvcF9sb2dfc2NhbGU6IHByb3BfbG9nX3NjYWxlW2ldLAoJICAgICAgICAgICAgICBiYXRjaF9zaXplOiBiYXRjaF9zaXplW2ldLAoJICAgICAgICAgICAgICBtYXhfYWRhcHRhdGlvbjogbWF4X2FkYXB0YXRpb25baV0sCgkgICAgICAgICAgICAgIGluaXRpYWxfYWRhcHRhdGlvbjogaW5pdGlhbF9hZGFwdGF0aW9uW2ldLAoJICAgICAgICAgICAgICB0YXJnZXRfYWNjZXB0X3JhdGU6IHRhcmdldF9hY2NlcHRfcmF0ZVtpXSwKCSAgICAgICAgICAgICAgaXNfYWRhcHRpbmc6IGlzX2FkYXB0aW5nW2ldCgkgICAgICAgICAgICB9OwoJICAgICAgICAgICAgdmFyIHN1YnBhcmFtID0ge307CgkgICAgICAgICAgICBzdWJwYXJhbVtpXSA9IGRlZXBfY2xvbmUocGFyYW0pOwoJICAgICAgICAgICAgc3VicGFyYW1baV0uZGltID0gWzFdOyAvLyBBcyB0aGlzIHNob3VsZCBub3cgYmUgYSBvbmUtZGltIHBhcmFtZXRlcgoKCSAgICAgICAgICAgIGRlbGV0ZSBzdWJwYXJhbVtpXS5pbml0OyAvLyBBcyBpdCBzb3VsZCBub3QgYmUgbmVlZGVkCgoJICAgICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBuZXcgU3ViU3RlcHBlcihzdWJwYXJhbSwgc3Vic3RhdGUsIGxvZ19wb3N0LCBzdWJvcHRpb25zKTsKCSAgICAgICAgICB9CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewoJICAgICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBjcmVhdGVfc3Vic3RlcHBlcnMoZGltLnNsaWNlKDEpLCBzdWJzdGF0ZVtpXSwgbG9nX3Bvc3QsIHByb3BfbG9nX3NjYWxlW2ldLCBiYXRjaF9zaXplW2ldLCBtYXhfYWRhcHRhdGlvbltpXSwgaW5pdGlhbF9hZGFwdGF0aW9uW2ldLCB0YXJnZXRfYWNjZXB0X3JhdGVbaV0sIGlzX2FkYXB0aW5nW2ldKTsKCSAgICAgICAgICB9CgkgICAgICAgIH0KCgkgICAgICAgIHJldHVybiBzdWJzdGVwcGVyczsKCSAgICAgIH07CgoJICAgICAgdGhpcy5zdWJzdGVwcGVycyA9IGNyZWF0ZV9zdWJzdGVwcGVycyh0aGlzLmRpbSwgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdLCB0aGlzLmxvZ19wb3N0LCB0aGlzLnByb3BfbG9nX3NjYWxlLCB0aGlzLmJhdGNoX3NpemUsIHRoaXMubWF4X2FkYXB0YXRpb24sIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uLCB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSwgdGhpcy5pc19hZGFwdGluZyk7CgkgICAgfTsKCgkgICAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0ZXBwZXIucHJvdG90eXBlKTsKCSAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7CgoJICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAvLyBHbyB0aHJvdWdoIHRoZSBzdWJzdGVwcGVycyBpbiBhIHJhbmRvbSBvcmRlciBhbmQgY2FsbCBzdGVwKCkgb24gdGhlbS4KCSAgICAgIHJldHVybiBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uIChzdWJzdGVwcGVyKSB7CgkgICAgICAgIHJldHVybiBzdWJzdGVwcGVyLnN0ZXAoKTsKCSAgICAgIH0pOwoJICAgIH07CgoJICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICBuZXN0ZWRfYXJyYXlfYXBwbHkodGhpcy5zdWJzdGVwcGVycywgZnVuY3Rpb24gKHN1YnN0ZXBwZXIpIHsKCSAgICAgICAgc3Vic3RlcHBlci5zdGFydF9hZGFwdGF0aW9uKCk7CgkgICAgICB9KTsKCSAgICB9OwoKCSAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdG9wX2FkYXB0YXRpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICBuZXN0ZWRfYXJyYXlfYXBwbHkodGhpcy5zdWJzdGVwcGVycywgZnVuY3Rpb24gKHN1YnN0ZXBwZXIpIHsKCSAgICAgICAgc3Vic3RlcHBlci5zdG9wX2FkYXB0YXRpb24oKTsKCSAgICAgIH0pOwoJICAgIH07CgoJICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICByZXR1cm4gbmVzdGVkX2FycmF5X2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uIChzdWJzdGVwcGVyKSB7CgkgICAgICAgIHJldHVybiBzdWJzdGVwcGVyLmluZm8oKTsKCSAgICAgIH0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQGNsYXNzCgkgICAgICogQGF1Z21lbnRzIHtNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyfQoJICAgICAqIEEgInN1YmNsYXNzIiBvZiBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBjb250aW5vdXMgTm9ybWFsIHByb3Bvc2Fscy4KCSAgICAgKi8KCgoJICAgIHZhciBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewoJICAgICAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBSZWFsTWV0cm9wb2xpc1N0ZXBwZXIpOwoJICAgIH07CgoJICAgIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUpOwoJICAgIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOwoJICAgIC8qKgoJICAgICAqIEBjbGFzcwoJICAgICAqIEBhdWdtZW50cyB7TXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcn0KCSAgICAgKiBBICJzdWJjbGFzcyIgb2YgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgZGlzY3JldGl6ZWQgTm9ybWFsIHByb3Bvc2Fscy4KCSAgICAgKi8KCgkgICAgdmFyIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHsKCSAgICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgSW50TWV0cm9wb2xpc1N0ZXBwZXIpOwoJICAgIH07CgoJICAgIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7CgkgICAgTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOwoJICAgIC8qKgoJICAgICAqIEBjbGFzcwoJICAgICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfQoJICAgICAqIENvbnN0cnVjdG9yIGZvciBhbiBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIGEgc3RlcCBmb3IgYSBiaW5hcnkgcGFyYW1ldGVyLgoJICAgICAqIFRoaXMgaXMgZG9uZSBieSBldmFsdWF0aW5nIHRoZSBsb2cgcG9zdGVyaW9yIGZvciBib3RoIHN0YXRlcyBvZiB0aGUKCSAgICAgKiBwYXJhbWV0ZXIgYW5kIHRoZW4gc2VsZWN0aW5nIGEgc3RhdGUgcmFuZG9tbHkgd2l0aCBwcm9iYWJpbGl0eSByZWxhdGl2ZSAKCSAgICAgKiB0byB0aGUgcG9zdGVyaW9yIG9mIGVhY2ggc3RhdGUuCgkgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIHBhcmFtZXRlciBkZWZpbml0aW9uLgoJICAgICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy4KCSAgICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gCgkgICAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLgoJICAgICovCgoJICAgIHZhciBCaW5hcnlTdGVwcGVyID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7CgkgICAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpOwoJICAgICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpOwoKCSAgICAgIGlmIChwYXJhbV9uYW1lcy5sZW5ndGggPT0gMSkgewoJICAgICAgICB0aGlzLnBhcmFtX25hbWUgPSBwYXJhbV9uYW1lc1swXTsKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIHRocm93ICJCaW5hcnlTdGVwcGVyIGNhbid0IGhhbmRsZSBtb3JlIHRoYW4gb25lIHBhcmFtZXRlci4iOwoJICAgICAgfQoJICAgIH07CgoJICAgIEJpbmFyeVN0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7CgkgICAgQmluYXJ5U3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCaW5hcnlTdGVwcGVyOwoKCSAgICBCaW5hcnlTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKCkgewoJICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMDsKCSAgICAgIHZhciB6ZXJvX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpOwoJICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMTsKCSAgICAgIHZhciBvbmVfbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7CgkgICAgICB2YXIgbWF4X2xvZ19kZW5zID0gTWF0aC5tYXgoemVyb19sb2dfZGVucywgb25lX2xvZ19kZW5zKTsKCSAgICAgIHplcm9fbG9nX2RlbnMgLT0gbWF4X2xvZ19kZW5zOwoJICAgICAgb25lX2xvZ19kZW5zIC09IG1heF9sb2dfZGVuczsKCSAgICAgIHZhciB6ZXJvX3Byb2IgPSBNYXRoLmV4cCh6ZXJvX2xvZ19kZW5zIC0gTWF0aC5sb2coTWF0aC5leHAoemVyb19sb2dfZGVucykgKyBNYXRoLmV4cChvbmVfbG9nX2RlbnMpKSk7CgoJICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCB6ZXJvX3Byb2IpIHsKCSAgICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMDsKCSAgICAgICAgcmV0dXJuIDA7CgkgICAgICB9IC8vIGVsc2Uga2VlcCB0aGUgcGFyYW0gYXQgMSAuCgoKCSAgICAgIHJldHVybiAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgKiBAY2xhc3MKCSAgICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfQoJICAgICogSnVzdCBsaWtlIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgdGhpcyBTdGVwcGVyIHRha2VzIGEgc3RlcHMgZm9yCgkgICAgKiBhIG11bHRpZGltZW5zaW9uYWwgcGFyYW1ldGVyIGJ5IHVwZGF0aW5nIGVhY2ggY29tcG9uZW50IGluIHR1cm4uIFRoZSBkaWZmZXJlbmNlCgkgICAgKiBpcyB0aGF0IHRoaXMgc3RlcHBlciB3b3JrcyBvbiBiaW5hcnkgcGFyYW1ldGVycy4KCSAgICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbiBmb3IgYSAKCSAgICAqICAgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIuCgkgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuCgkgICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gCgkgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuCgkgICAgKi8KCgoJICAgIHZhciBCaW5hcnlDb21wb25lbnRTdGVwcGVyID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7CgkgICAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpOwoJICAgICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpOwoKCSAgICAgIGlmIChwYXJhbV9uYW1lcy5sZW5ndGggPT0gMSkgewoJICAgICAgICB0aGlzLnBhcmFtX25hbWUgPSBwYXJhbV9uYW1lc1swXTsKCSAgICAgICAgdmFyIHBhcmFtID0gdGhpcy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lXTsKCSAgICAgICAgdGhpcy5kaW0gPSBwYXJhbS5kaW07CgkgICAgICB9IGVsc2UgewoJICAgICAgICB0aHJvdyAiQmluYXJ5Q29tcG9uZW50U3RlcHBlciBjYW4ndCBoYW5kbGUgbW9yZSB0aGFuIG9uZSBwYXJhbWV0ZXIuIjsKCSAgICAgIH0KCgkgICAgICB2YXIgY3JlYXRlX3N1YnN0ZXBwZXJzID0gZnVuY3Rpb24gKGRpbSwgc3Vic3RhdGUsIGxvZ19wb3N0KSB7CgkgICAgICAgIHZhciBzdWJzdGVwcGVycyA9IFtdOwoJICAgICAgICB2YXIgaTsKCgkgICAgICAgIGlmIChkaW0ubGVuZ3RoID09PSAxKSB7CgkgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgc3VicGFyYW1zID0ge307CgkgICAgICAgICAgICBzdWJwYXJhbXNbaV0gPSBwYXJhbTsKCSAgICAgICAgICAgIHN1YnN0ZXBwZXJzW2ldID0gbmV3IEJpbmFyeVN0ZXBwZXIoc3VicGFyYW1zLCBzdWJzdGF0ZSwgbG9nX3Bvc3QpOwoJICAgICAgICAgIH0KCSAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHsKCSAgICAgICAgICAgIHN1YnN0ZXBwZXJzW2ldID0gY3JlYXRlX3N1YnN0ZXBwZXJzKGRpbS5zbGljZSgxKSwgc3Vic3RhdGVbaV0sIGxvZ19wb3N0KTsKCSAgICAgICAgICB9CgkgICAgICAgIH0KCgkgICAgICAgIHJldHVybiBzdWJzdGVwcGVyczsKCSAgICAgIH07CgoJICAgICAgdGhpcy5zdWJzdGVwcGVycyA9IGNyZWF0ZV9zdWJzdGVwcGVycyh0aGlzLmRpbSwgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdLCB0aGlzLmxvZ19wb3N0KTsKCSAgICB9OwoKCSAgICBCaW5hcnlDb21wb25lbnRTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOwoJICAgIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQmluYXJ5Q29tcG9uZW50U3RlcHBlcjsKCgkgICAgQmluYXJ5Q29tcG9uZW50U3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgIC8vIEdvIHRocm91Z2ggdGhlIHN1YnN0ZXBwZXJzIGluIGEgcmFuZG9tIG9yZGVyIGFuZCBjYWxsIHN0ZXAoKSBvbiB0aGVtLgoJICAgICAgcmV0dXJuIG5lc3RlZF9hcnJheV9yYW5kb21fYXBwbHkodGhpcy5zdWJzdGVwcGVycywgZnVuY3Rpb24gKHN1YnN0ZXBwZXIpIHsKCSAgICAgICAgcmV0dXJuIHN1YnN0ZXBwZXIuc3RlcCgpOwoJICAgICAgfSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAY2xhc3MKCSAgICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn0KCSAgICAgKiBUaGlzIHN0ZXBwZXIgY2FuIGJlIHJlc3BvbnNpYmxlIGZvciB0YWtpbmcgYSBzdGVwIGZvciBvbmUgb3IgbW9yZSBwYXJhbWV0ZXJzLgoJICAgICAqIEZvciByZWFsIGFuZCBpbnQgcGFyYW1ldGVycyBpdCB0YWtlcyBNZXRyb3BvbGlzIHdpdGhpbiBHaWJicyBzdGVwcywgYW5kIGZvciAKCSAgICAgKiBiaW5hcnkgcGFyYW1ldGVycyBpdCBkb2VzIGV2YWx1YXRlcyB0aGUgcG9zdGVyaW9yIGZvciBib3RoIHBhcmFtdGVyIHZhbHVlcyBhbmQKCSAgICAgKiByYW5kb21seSBjaGFuZ2VzIHRvIGEgY2VydGFpbiB2YWx1ZSBwcm9wb3J0aW9uYWxseSB0byB0aGF0IHZhbHVlJ3MgcG9zdGVyaW9yCgkgICAgICogKHRoaXMgaXMgYWxzbyBkb25lIGZvciBlYWNoIHBhcmFtZXRlciwgc28gYWxzbyBhICogd2l0aGluIEdpYmJzIGFwcHJvYWNoKS4KCSAgICAgKiBUaGlzIHN0ZXBwZXIgaXMgYWxzbyBhZGFwdGl2ZSBhbmQgY2FuIGJlIGVmZmljaWVudCB3aGVuIHRoZSBudW1iZXIgb2YgcGFyYW1ldGVycwoJICAgICAqIGFyZSBub3QgdG9vIGhpZ2ggYW5kIHRoZSBjb3JyZWxhdGlvbnMgYmV0d2VlbiBwYXJhbWV0ZXJzIGFyZSBsb3cuCgkgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgb25lIG9yIG1vcmUgcGFyYW1ldGVyIGRlZmluaXRpb25zCgkgICAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLgoJICAgICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiAKCSAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuCgkgICAgKi8KCgoJICAgIHZhciBBbXdnU3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewoJICAgICAgU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KTsKCSAgICAgIHRoaXMucGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7CgkgICAgICB0aGlzLnN1YnN0ZXBwZXJzID0gW107CgoJICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmFtX25hbWVzLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgIHZhciBwYXJhbSA9IHBhcmFtc1t0aGlzLnBhcmFtX25hbWVzW2ldXTsKCSAgICAgICAgdmFyIFNlbGVjdFN0ZXBwZXI7CgoJICAgICAgICBzd2l0Y2ggKHBhcmFtLnR5cGUpIHsKCSAgICAgICAgICBjYXNlICJyZWFsIjoKCSAgICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHsKCSAgICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IFJlYWxNZXRyb3BvbGlzU3RlcHBlcjsKCSAgICAgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjsKCSAgICAgICAgICAgIH0KCgkgICAgICAgICAgICBicmVhazsKCgkgICAgICAgICAgY2FzZSAiaW50IjoKCSAgICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHsKCSAgICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IEludE1ldHJvcG9saXNTdGVwcGVyOwoJICAgICAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7CgkgICAgICAgICAgICB9CgoJICAgICAgICAgICAgYnJlYWs7CgoJICAgICAgICAgIGNhc2UgImJpbmFyeSI6CgkgICAgICAgICAgICBpZiAoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7CgkgICAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBCaW5hcnlTdGVwcGVyOwoJICAgICAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IEJpbmFyeUNvbXBvbmVudFN0ZXBwZXI7CgkgICAgICAgICAgICB9CgoJICAgICAgICAgICAgYnJlYWs7CgoJICAgICAgICAgIGRlZmF1bHQ6CgkgICAgICAgICAgICB0aHJvdyAiQW13Z1N0ZXBwZXIgY2FuJ3QgaGFuZGxlIHBhcmFtZXRlciAiICsgdGhpcy5wYXJhbV9uYW1lc1tpXSArICIgd2l0aCB0eXBlICIgKyBwYXJhbS50eXBlOwoJICAgICAgICB9CgoJICAgICAgICB2YXIgcGFyYW1fb2JqZWN0X3dyYXAgPSB7fTsKCSAgICAgICAgcGFyYW1fb2JqZWN0X3dyYXBbdGhpcy5wYXJhbV9uYW1lc1tpXV0gPSBwYXJhbTsKCSAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CgkgICAgICAgIHZhciBwYXJhbV9vcHRpb25zID0gb3B0aW9ucy5wYXJhbXMgJiYgb3B0aW9ucy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lc1tpXV0gfHwge307CgkgICAgICAgIHBhcmFtX29wdGlvbnMucHJvcF9sb2dfc2NhbGUgPSBwYXJhbV9vcHRpb25zLnByb3BfbG9nX3NjYWxlIHx8IG9wdGlvbnMucHJvcF9sb2dfc2NhbGU7CgkgICAgICAgIHBhcmFtX29wdGlvbnMuYmF0Y2hfc2l6ZSA9IHBhcmFtX29wdGlvbnMuYmF0Y2hfc2l6ZSB8fCBvcHRpb25zLmJhdGNoX3NpemU7CgkgICAgICAgIHBhcmFtX29wdGlvbnMubWF4X2FkYXB0YXRpb24gPSBwYXJhbV9vcHRpb25zLm1heF9hZGFwdGF0aW9uIHx8IG9wdGlvbnMubWF4X2FkYXB0YXRpb247CgkgICAgICAgIHBhcmFtX29wdGlvbnMuaW5pdGlhbF9hZGFwdGF0aW9uID0gcGFyYW1fb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb24gfHwgb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb247CgkgICAgICAgIHBhcmFtX29wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlID0gcGFyYW1fb3B0aW9ucy50YXJnZXRfYWNjZXB0X3JhdGUgfHwgb3B0aW9ucy50YXJnZXRfYWNjZXB0X3JhdGU7CgkgICAgICAgIHBhcmFtX29wdGlvbnMuaXNfYWRhcHRpbmcgPSBwYXJhbV9vcHRpb25zLmlzX2FkYXB0aW5nIHx8IG9wdGlvbnMuaXNfYWRhcHRpbmc7CgkgICAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0gPSBuZXcgU2VsZWN0U3RlcHBlcihwYXJhbV9vYmplY3Rfd3JhcCwgc3RhdGUsIGxvZ19wb3N0LCBwYXJhbV9vcHRpb25zKTsKCSAgICAgIH0KCSAgICB9OwoKCSAgICBBbXdnU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0ZXBwZXIucHJvdG90eXBlKTsKCSAgICBBbXdnU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBbXdnU3RlcHBlcjsKCgkgICAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CgkgICAgICBzaHVmZmxlX2FycmF5KHRoaXMuc3Vic3RlcHBlcnMpOwoKCSAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzdGVwcGVycy5sZW5ndGg7IGkrKykgewoJICAgICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldLnN0ZXAoKTsKCSAgICAgIH0KCgkgICAgICByZXR1cm4gdGhpcy5zdGF0ZTsKCSAgICB9OwoKCSAgICBBbXdnU3RlcHBlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzdGVwcGVycy5sZW5ndGg7IGkrKykgewoJICAgICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldLnN0YXJ0X2FkYXB0YXRpb24oKTsKCSAgICAgIH0KCSAgICB9OwoKCSAgICBBbXdnU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0uc3RvcF9hZGFwdGF0aW9uKCk7CgkgICAgICB9CgkgICAgfTsKCgkgICAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICB2YXIgaW5mbyA9IHt9OwoKCSAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzdGVwcGVycy5sZW5ndGg7IGkrKykgewoJICAgICAgICBpbmZvW3RoaXMucGFyYW1fbmFtZXNbaV1dID0gdGhpcy5zdWJzdGVwcGVyc1tpXS5pbmZvKCk7CgkgICAgICB9CgoJICAgICAgcmV0dXJuIGluZm87CgkgICAgfTsgLy8vLy8vLy8vLy8gU2FtcGxlciBGdW5jdGlvbnMgLy8vLy8vLy8vLwoJICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCgkgICAgLyoqCgkgICAgKiBAaW50ZXJmYWNlCgkgICAgKiBXaGlsZSB5b3UgY291bGQgZml0IGEgbW9kZWwgYnkgcGFzdGluZyB0b2dldGhlciBTdGVwcGVycywgYQoJICAgIC8vIFNhbXBsZXIgaXMgaGVyZSBpcyBhIGNvbnZlbmllbmNlIGNsYXNzIHdoZXJlIGFuIGluc3RhbmNlIG9mIFNhbXBsZXIKCSAgICAvLyBzZXRzIHVwIHRoZSBTdGVwcGVycywgY2hlY2tzIHRoZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbiwKCSAgICAvLyBhbmQgbWFuYWdlcyB0aGUgc2FtcGxpbmcuIFRoaXMgaGVyZSBkZWZpbmVzIHRoZSBTYW1wbGVyICJpbnRlcmZhY2UiLgoJICAgICogQGludGVyZmFjZQoJICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlciBkZWZpbml0aW9ucywgZm9yIGV4YW1wbGU6CgkgICAgKiAgIHsibXUiOiB7InR5cGUiOiAicmVhbCJ9LCAic2lnbWEiOiB7InR5cGUiOiAicmVhbCIsICJsb3dlciIgPSAwfX0KCSAgICAqICAgVGhlIHBhcmFtZXRlciBkZWZpbml0aW9ucyBkb2Vzbid0IGhhdmUgdG8gYmUgImNvbXBsZXRlIiBhbmQgcHJvcGVydGllcwoJICAgICogICBsZWZ0IG91dCAobGlrZSBsb3dlciBhbmQgdXBwZXIpIHdpbGwgYmUgZmlsbGVkIGluIGJ5IGRlZmF1bHRzLgoJICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihzdGF0ZSwgZGF0YSkuIEhlcmUKCSAgICAqICAgc3RhdGUgd2lsbCBiZSBhbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzdGF0ZSB3aXRoIGVhY2ggcGFyYW1ldGVyIGFzIGEgCgkgICAgKiAgIGtleSBhbmQgdGhlIHBhcmFtZXRlciB2YWx1ZXMgYXMgbnVtYmVycyBvciBhcnJheXMuIEZvciBleGFtcGxlOgoJICAgICogICB7Im11IjogMywgInNpZ21hIjogMS41fS4gVGhlIGRhdGEgYXJndW1lbnQgd2lsbCBiZSB0aGUgc2FtZSBvYmplY3QgYXMgCgkgICAgKiAgIHRoZSBkYXRhIGFyZ3VtZW50IGdpdmVuIGJlbG93LgoJICAgICogQHBhcmFtIGRhdGEgLSBhbiBvYmplY3QgdGhhdCB3aWxsIGJlIHBhc3NlZCBvbiB0byB0aGUgbG9nX3Bvc3QgZnVuY3Rpb24KCSAgICAqICAgd2hlbiBzYW1wbGluZy4KCSAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc2FtcGxlci4KCSAgICAqLwoKCgkgICAgdmFyIFNhbXBsZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBsb2dfcG9zdCwgZGF0YSwgb3B0aW9ucykgewoJICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7CgkgICAgICB0aGlzLmRhdGEgPSBkYXRhOwoJICAgICAgdGhpcy5wYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTsgLy8gU2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgaWYgbm90IHBhc3NlZCB0aHJvdWdoIHRoZSBvcHRpb25zIG9iamVjdAoKCSAgICAgIHRoaXMucGFyYW1faW5pdF9mdW4gPSBnZXRfb3B0aW9uKCJwYXJhbV9pbml0X2Z1biIsIG9wdGlvbnMsIHBhcmFtX2luaXRfZml4ZWQpOwoJICAgICAgdmFyIHRoaW5uaW5nX2ludGVydmFsID0gZ2V0X29wdGlvbigidGhpbiIsIG9wdGlvbnMsIDEpOwoJICAgICAgdmFyIHBhcmFtc190b19tb25pdG9yID0gZ2V0X29wdGlvbigibW9uaXRvciIsIG9wdGlvbnMsIG51bGwpOwoJICAgICAgdGhpcy50aGluKHRoaW5uaW5nX2ludGVydmFsKTsKCSAgICAgIHRoaXMubW9uaXRvcihwYXJhbXNfdG9fbW9uaXRvcik7CgkgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOyAvLyBDb21wbGV0aW5nIHRoZSBwYXJhbXMgYW5kIGluaXRpYWxpemluZyB0aGUgc3RhdGUuCgoJICAgICAgdGhpcy5wYXJhbXMgPSBjb21wbGV0ZV9wYXJhbXModGhpcy5wYXJhbXMsIHRoaXMucGFyYW1faW5pdF9mdW4pOwoJICAgICAgdmFyIHN0YXRlID0ge307CgoJICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmFtX25hbWVzLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgIHN0YXRlW3RoaXMucGFyYW1fbmFtZXNbaV1dID0gdGhpcy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lc1tpXV0uaW5pdDsKCSAgICAgIH0KCgkgICAgICB0aGlzLmxvZ19wb3N0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbG9nX3Bvc3Qoc3RhdGUsIGRhdGEpOwoJICAgICAgfTsgLy8gUnVubmluZyB0aGUgbG9nX3Bvc3QgZnVuY3Rpb24gb25jZSBpbiBjYXNlIGl0IGZ1cnRoZXIgbW9kaWZpZXMgdGhlIHN0YXRlCgkgICAgICAvLyBmb3IgZXhhbXBsZSBhZGRpbmcgZGVyaXZlZCBxdWFudGl0aWVzLgoKCgkgICAgICB0aGlzLmxvZ19wb3N0KCk7CgkgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7CgkgICAgICB0aGlzLnN0ZXBwZXJzID0gdGhpcy5jcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSh0aGlzLnBhcmFtcywgdGhpcy5zdGF0ZSwgdGhpcy5sb2dfcG9zdCwgdGhpcy5vcHRpb25zKTsKCSAgICB9OwoJICAgIC8qKiBTaG91bGQgcmV0dXJuIGEgdmVjdG9yIG9mIHN0ZXBwZXJzIHRoYXQgd2hlbiBjYWxsZWQgCgkgICAgICogc2hvdWxkIHRha2UgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuCgkgICAgICovCgoKCSAgICBTYW1wbGVyLnByb3RvdHlwZS5jcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgbG9nX3Bvc3QpIHsKCSAgICAgIHRocm93ICJFdmVyeSBTYW1wbGVyIG5lZWRzIHRvIGltcGxlbWVudCBjcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSgpIjsKCSAgICB9OwoJICAgIC8qKiBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGluZm8gYWJvdXQgdGhlIHN0YXRlIG9mIHRoZSBTYW1wbGVyLgoJICAgICAqLwoKCgkgICAgU2FtcGxlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgIHJldHVybiB7CgkgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLAoJICAgICAgICB0aGluOiB0aGlzLnRoaW4sCgkgICAgICAgIG1vbml0b3I6IHRoaXMubW9uaXRvciwKCSAgICAgICAgc3RlcHBlcnM6IHRoaXMuc3RlcHBlcnMKCSAgICAgIH07CgkgICAgfTsKCSAgICAvKiogVGFrZXMgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuIFJldHVybnMgdGhlIG5ldyBzcGFjZQoJICAgICAqIGJ1dCBhbHNvIG1vZGlmaWVzIHRoZSBzdGF0ZSBpbiBwbGFjZS4KCSAgICAgKi8KCgoJICAgIFNhbXBsZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CgkgICAgICBzaHVmZmxlX2FycmF5KHRoaXMuc3RlcHBlcnMpOwoKCSAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdGVwcGVycy5sZW5ndGg7IGkrKykgewoJICAgICAgICB0aGlzLnN0ZXBwZXJzW2ldLnN0ZXAoKTsKCSAgICAgIH0KCgkgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5zdGF0ZSkubGVuZ3RoID4gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpLmxlbmd0aCkgewoJICAgICAgICAvLyBUaGUgc3RhdGUgY29udGFpbnMgZGV2aXZlZCBxdWFudGl0aWVzIChub3Qgb25seSBwYXJhbWV0ZXJzKSBhbmQgd2UKCSAgICAgICAgLy8gbmVlZCB0byBydW4gdGhlIGxvZ19wb3N0IG9uY2UgbW9yZSBpbiBvcmRlciB0byBzZXQgdGhlIGRlcml2ZWQgcXVhbnRpdGllcwoJICAgICAgICAvLyBmb3IgdGhlIGZpbmFsIHBhcmFtZXRlciBzdGF0ZQoJICAgICAgICB0aGlzLmxvZ19wb3N0KCk7CgkgICAgICB9CgoJICAgICAgcmV0dXJuIHRoaXMuc3RhdGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUYWtlcyBuX2l0ZXJhdGlvbnMgc3RlcHMgaW4gdGhlIHBhcmFtZXRlciBzcGFjZSBhbmQgcmV0dXJucyB0aGVtCgkgICAgICogYXMgYW4gb2JqZWN0IG9mIGFycmF5cyB3aXRoIG9uZSBhcnJheSBwZXIgcGFyYW1ldGVyLiBGb3IgZXhhbXBsZToKCSAgICAgKiB7bXU6IFsxLCAtMSwgMiwgMywgLi4uXSwgc2lnbWE6IFsxLCAyLCAyLCAxLCAuLi5dfS4KCSAgICAgKiBJZiB0aGluIGlzID4gMSB0aGVuIG5faXRlcmF0aW9ucyAvIHRoaW4gc2FtcGxlcyBhcmUgcmV0dXJuZWQuCgkgICAgICovCgoKCSAgICBTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGUgPSBmdW5jdGlvbiAobl9pdGVyYXRpb25zKSB7CgkgICAgICAvLyBJbml0aWFsaXppbmcgY3Vycl9zYW1wbGUgd2hlcmUgdGhlIHNhbXBsZSBpcyBnb2luZyB0byBiZSBzYXZlZAoJICAgICAgLy8gYXMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgb25lIGFycmF5IHBlciBwYXJhbWV0ZXIgdG8gYmUgbW9uaXRvcmVkLgoJICAgICAgdmFyIGksIGosIG1vbml0b3JlZF9wYXJhbXM7CgoJICAgICAgaWYgKHRoaXMubW9uaXRvcmVkX3BhcmFtcyA9PT0gbnVsbCkgewoJICAgICAgICBtb25pdG9yZWRfcGFyYW1zID0gT2JqZWN0LmtleXModGhpcy5zdGF0ZSk7CgkgICAgICB9IGVsc2UgewoJICAgICAgICBtb25pdG9yZWRfcGFyYW1zID0gdGhpcy5tb25pdG9yZWRfcGFyYW1zOwoJICAgICAgfQoKCSAgICAgIHZhciBjdXJyX3NhbXBsZSA9IHt9OwoKCSAgICAgIGZvciAoaiA9IDA7IGogPCBtb25pdG9yZWRfcGFyYW1zLmxlbmd0aDsgaisrKSB7CgkgICAgICAgIGN1cnJfc2FtcGxlW21vbml0b3JlZF9wYXJhbXNbal1dID0gW107CgkgICAgICB9CgoJICAgICAgZm9yIChpID0gMDsgaSA8IG5faXRlcmF0aW9uczsgaSsrKSB7CgkgICAgICAgIGlmIChpICUgdGhpcy50aGlubmluZ19pbnRlcnZhbCA9PT0gMCkgewoJICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBtb25pdG9yZWRfcGFyYW1zLmxlbmd0aDsgaisrKSB7CgkgICAgICAgICAgICB2YXIgcGFyYW0gPSBtb25pdG9yZWRfcGFyYW1zW2pdOwoJICAgICAgICAgICAgY3Vycl9zYW1wbGVbcGFyYW1dLnB1c2goY2xvbmVfcGFyYW1fZHJhdyh0aGlzLnN0YXRlW3BhcmFtXSkpOwoJICAgICAgICAgIH0KCSAgICAgICAgfQoKCSAgICAgICAgdGhpcy5zdGVwKCk7CgkgICAgICB9CgoJICAgICAgcmV0dXJuIGN1cnJfc2FtcGxlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGFrZXMgbl9pdGVyYXRpb24gc3RlcHMgaW4gcGFyYW1ldGVyIHNwYWNlIGJ1dCByZXR1cm5zIG5vdGhpbmcuCgkgICAgICovCgoKCSAgICBTYW1wbGVyLnByb3RvdHlwZS5idXJuID0gZnVuY3Rpb24gKG5faXRlcmF0aW9ucykgewoJICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuX2l0ZXJhdGlvbnM7IGkrKykgewoJICAgICAgICB0aGlzLnN0ZXAoKTsKCSAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNldHMgd2hhdCBwYXJhbWV0ZXJzIHNob3VsZCBiZSBtb25pdG9yZWQgYW5kIHJldHVybmVkIHdoZW4gY2FsbGluZwoJICAgICAqIHNhbXBsZS4KCSAgICAgKi8KCgoJICAgIFNhbXBsZXIucHJvdG90eXBlLm1vbml0b3IgPSBmdW5jdGlvbiAocGFyYW1zX3RvX21vbml0b3IpIHsKCSAgICAgIHRoaXMubW9uaXRvcmVkX3BhcmFtcyA9IHBhcmFtc190b19tb25pdG9yOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2V0cyB0aGUgdGhpbm5pbmcuIEZvciBleGFtcGxlIHRoaW4gPT0gMTAgbWVhbnMgdGhhdCBldmVyeSAxMHRoIHBvc3RlcmlvcgoJICAgICAqIGRyYXcgd2lsbCBiZSBrZXB0LgoJICAgICAqLwoKCgkgICAgU2FtcGxlci5wcm90b3R5cGUudGhpbiA9IGZ1bmN0aW9uICh0aGlubmluZ19pbnRlcnZhbCkgewoJICAgICAgdGhpcy50aGlubmluZ19pbnRlcnZhbCA9IHRoaW5uaW5nX2ludGVydmFsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2V0cyBhZGFwdGF0aW9uIG9uLCBpZiBhcHBsaWNhYmxlLCBpbiBhbGwgc3RlcHBlcnMuCgkgICAgICovCgoKCSAgICBTYW1wbGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgIHRoaXMuc3RlcHBlcnNbaV0uc3RhcnRfYWRhcHRhdGlvbigpOwoJICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgKiBTZXRzIGFkYXB0YXRpb24gb2ZmLCBpZiBhcHBsaWNhYmxlLCBpbiBhbGwgc3RlcHBlcnMuCgkgICAgKi8KCgoJICAgIFNhbXBsZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdGVwcGVycy5sZW5ndGg7IGkrKykgewoJICAgICAgICB0aGlzLnN0ZXBwZXJzW2ldLnN0b3BfYWRhcHRhdGlvbigpOwoJICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgKiBAY2xhc3MKCSAgICAqIEBpbXBsZW1lbnRzIHtTYW1wbGVyfQoJICAgICogVGhpcyBzYW1wbGVyIHVzZXMgdGhlIEFtd2dTdGVwcGVyIGFzIHRoZSBzdGVwcGVyIGZ1bmN0aW9uIHdoaWNoIGltcGxlbWVudHMgdGhlIAoJICAgICogQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluICJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DIgoJICAgICogYnkgUm9iZXJ0cyBhbmQgUm9zZW50aGFsICgyMDA4KS4gQW4gYWRpdGlvbiBpcyB0aGF0IGl0IGhhbmRsZXMgaW50IHBhcmFtZXRlcnMKCSAgICAqIGJ5IG1ha2luZyBkaXNjcmV0ZSBOb3JtYWwgcHJvcG9zYWxzIGFuZCBiaW5hcnkgcGFyYW1ldGVycyBieSB0YWtpbmcgb24gYSBuZXcgCgkgICAgKiB2YWx1ZSBwcm9wb3J0aW9uYWwgdG8gdGhlIHBvc3RlcmlvciBvZiB0aGUgdHdvIHBvc3NpYmxlIHN0YXRlcyBvZiB0aGUKCSAgICAqIHBhcmFtZXRlci4gVGhpcyBzYW1wbGVyIGNhbiBiZSBlZmZpY2llbnQgd2hlbiB0aGUgbnVtYmVyIG9mIHBhcmFtZXRlcnMKCSAgICAqIGFyZSBub3QgdG9vIGhpZ2ggYW5kIHRoZSBjb3JyZWxhdGlvbnMgYmV0d2VlbiBwYXJhbWV0ZXJzIGFyZSBsb3cuCgkgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBvbmUgb3IgbW9yZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMKCSAgICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy4KCSAgICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiAKCSAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci4KCSAgICAqLwoKCgkgICAgdmFyIEFtd2dTYW1wbGVyID0gZnVuY3Rpb24gKHBhcmFtcywgbG9nX3Bvc3QsIGRhdGEsIG9wdGlvbnMpIHsKCSAgICAgIFNhbXBsZXIuY2FsbCh0aGlzLCBwYXJhbXMsIGxvZ19wb3N0LCBkYXRhLCBvcHRpb25zKTsKCSAgICB9OwoKCSAgICBBbXdnU2FtcGxlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNhbXBsZXIucHJvdG90eXBlKTsKCSAgICBBbXdnU2FtcGxlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBbXdnU2FtcGxlcjsKCgkgICAgQW13Z1NhbXBsZXIucHJvdG90eXBlLmNyZWF0ZV9zdGVwcGVyX2Vuc2FtYmxlID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7CgkgICAgICByZXR1cm4gW25ldyBBbXdnU3RlcHBlcihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucyldOwoJICAgIH07IC8vIFJldHVybmluZyB0aGUgZnVuY3Rpb25zIHRoYXQgc2hvdWxkIGJlIHB1YmxpY2x5IGV4cG9zZWQgYnkgdGhpcyBtb2R1bGUKCgoJICAgIHJldHVybiB7CgkgICAgICBydW5pZjogcnVuaWYsCgkgICAgICBydW5pZl9kaXNjcmV0ZTogcnVuaWZfZGlzY3JldGUsCgkgICAgICBybm9ybTogcm5vcm0sCgkgICAgICBwYXJhbV9pbml0X2ZpeGVkOiBwYXJhbV9pbml0X2ZpeGVkLAoJICAgICAgY29tcGxldGVfcGFyYW1zOiBjb21wbGV0ZV9wYXJhbXMsCgkgICAgICBSZWFsTWV0cm9wb2xpc1N0ZXBwZXI6IFJlYWxNZXRyb3BvbGlzU3RlcHBlciwKCSAgICAgIEludE1ldHJvcG9saXNTdGVwcGVyOiBJbnRNZXRyb3BvbGlzU3RlcHBlciwKCSAgICAgIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOiBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciwKCSAgICAgIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI6IE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIsCgkgICAgICBCaW5hcnlTdGVwcGVyOiBCaW5hcnlTdGVwcGVyLAoJICAgICAgQmluYXJ5Q29tcG9uZW50U3RlcHBlcjogQmluYXJ5Q29tcG9uZW50U3RlcHBlciwKCSAgICAgIEFtd2dTdGVwcGVyOiBBbXdnU3RlcHBlciwKCSAgICAgIEFtd2dTYW1wbGVyOiBBbXdnU2FtcGxlcgoJICAgIH07CgkgIH0pOwoJfSk7CgoJZnVuY3Rpb24gYXNjZW5kaW5nKGEsIGIpIHsKCSAgcmV0dXJuIGEgPT0gbnVsbCB8fCBiID09IG51bGwgPyBOYU4gOiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogYSA+PSBiID8gMCA6IE5hTjsKCX0KCglmdW5jdGlvbiogbnVtYmVycyh2YWx1ZXMsIHZhbHVlb2YpIHsKCSAgaWYgKHZhbHVlb2YgPT09IHVuZGVmaW5lZCkgewoJICAgIGZvciAobGV0IHZhbHVlIG9mIHZhbHVlcykgewoJICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgKHZhbHVlID0gK3ZhbHVlKSA+PSB2YWx1ZSkgewoJICAgICAgICB5aWVsZCB2YWx1ZTsKCSAgICAgIH0KCSAgICB9CgkgIH0gZWxzZSB7CgkgICAgbGV0IGluZGV4ID0gLTE7CgoJICAgIGZvciAobGV0IHZhbHVlIG9mIHZhbHVlcykgewoJICAgICAgaWYgKCh2YWx1ZSA9IHZhbHVlb2YodmFsdWUsICsraW5kZXgsIHZhbHVlcykpICE9IG51bGwgJiYgKHZhbHVlID0gK3ZhbHVlKSA+PSB2YWx1ZSkgewoJICAgICAgICB5aWVsZCB2YWx1ZTsKCSAgICAgIH0KCSAgICB9CgkgIH0KCX0KCglmdW5jdGlvbiBjb21wYXJlRGVmaW5lZChjb21wYXJlID0gYXNjZW5kaW5nKSB7CgkgIGlmIChjb21wYXJlID09PSBhc2NlbmRpbmcpIHJldHVybiBhc2NlbmRpbmdEZWZpbmVkOwoJICBpZiAodHlwZW9mIGNvbXBhcmUgIT09ICJmdW5jdGlvbiIpIHRocm93IG5ldyBUeXBlRXJyb3IoImNvbXBhcmUgaXMgbm90IGEgZnVuY3Rpb24iKTsKCSAgcmV0dXJuIChhLCBiKSA9PiB7CgkgICAgY29uc3QgeCA9IGNvbXBhcmUoYSwgYik7CgkgICAgaWYgKHggfHwgeCA9PT0gMCkgcmV0dXJuIHg7CgkgICAgcmV0dXJuIChjb21wYXJlKGIsIGIpID09PSAwKSAtIChjb21wYXJlKGEsIGEpID09PSAwKTsKCSAgfTsKCX0KCWZ1bmN0aW9uIGFzY2VuZGluZ0RlZmluZWQoYSwgYikgewoJICByZXR1cm4gKGEgPT0gbnVsbCB8fCAhKGEgPj0gYSkpIC0gKGIgPT0gbnVsbCB8fCAhKGIgPj0gYikpIHx8IChhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogMCk7Cgl9CgoJZnVuY3Rpb24gbWF4KHZhbHVlcywgdmFsdWVvZikgewoJICBsZXQgbWF4OwoKCSAgaWYgKHZhbHVlb2YgPT09IHVuZGVmaW5lZCkgewoJICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7CgkgICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiAobWF4IDwgdmFsdWUgfHwgbWF4ID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSB7CgkgICAgICAgIG1heCA9IHZhbHVlOwoJICAgICAgfQoJICAgIH0KCSAgfSBlbHNlIHsKCSAgICBsZXQgaW5kZXggPSAtMTsKCgkgICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7CgkgICAgICBpZiAoKHZhbHVlID0gdmFsdWVvZih2YWx1ZSwgKytpbmRleCwgdmFsdWVzKSkgIT0gbnVsbCAmJiAobWF4IDwgdmFsdWUgfHwgbWF4ID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSB7CgkgICAgICAgIG1heCA9IHZhbHVlOwoJICAgICAgfQoJICAgIH0KCSAgfQoKCSAgcmV0dXJuIG1heDsKCX0KCglmdW5jdGlvbiBtaW4odmFsdWVzLCB2YWx1ZW9mKSB7CgkgIGxldCBtaW47CgoJICBpZiAodmFsdWVvZiA9PT0gdW5kZWZpbmVkKSB7CgkgICAgZm9yIChjb25zdCB2YWx1ZSBvZiB2YWx1ZXMpIHsKCSAgICAgIGlmICh2YWx1ZSAhPSBudWxsICYmIChtaW4gPiB2YWx1ZSB8fCBtaW4gPT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA+PSB2YWx1ZSkpIHsKCSAgICAgICAgbWluID0gdmFsdWU7CgkgICAgICB9CgkgICAgfQoJICB9IGVsc2UgewoJICAgIGxldCBpbmRleCA9IC0xOwoKCSAgICBmb3IgKGxldCB2YWx1ZSBvZiB2YWx1ZXMpIHsKCSAgICAgIGlmICgodmFsdWUgPSB2YWx1ZW9mKHZhbHVlLCArK2luZGV4LCB2YWx1ZXMpKSAhPSBudWxsICYmIChtaW4gPiB2YWx1ZSB8fCBtaW4gPT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA+PSB2YWx1ZSkpIHsKCSAgICAgICAgbWluID0gdmFsdWU7CgkgICAgICB9CgkgICAgfQoJICB9CgoJICByZXR1cm4gbWluOwoJfQoKCS8vIElTQyBsaWNlbnNlLCBDb3B5cmlnaHQgMjAxOCBWbGFkaW1pciBBZ2Fmb25raW4uCgoJZnVuY3Rpb24gcXVpY2tzZWxlY3QoYXJyYXksIGssIGxlZnQgPSAwLCByaWdodCA9IGFycmF5Lmxlbmd0aCAtIDEsIGNvbXBhcmUpIHsKCSAgY29tcGFyZSA9IGNvbXBhcmUgPT09IHVuZGVmaW5lZCA/IGFzY2VuZGluZ0RlZmluZWQgOiBjb21wYXJlRGVmaW5lZChjb21wYXJlKTsKCgkgIHdoaWxlIChyaWdodCA+IGxlZnQpIHsKCSAgICBpZiAocmlnaHQgLSBsZWZ0ID4gNjAwKSB7CgkgICAgICBjb25zdCBuID0gcmlnaHQgLSBsZWZ0ICsgMTsKCSAgICAgIGNvbnN0IG0gPSBrIC0gbGVmdCArIDE7CgkgICAgICBjb25zdCB6ID0gTWF0aC5sb2cobik7CgkgICAgICBjb25zdCBzID0gMC41ICogTWF0aC5leHAoMiAqIHogLyAzKTsKCSAgICAgIGNvbnN0IHNkID0gMC41ICogTWF0aC5zcXJ0KHogKiBzICogKG4gLSBzKSAvIG4pICogKG0gLSBuIC8gMiA8IDAgPyAtMSA6IDEpOwoJICAgICAgY29uc3QgbmV3TGVmdCA9IE1hdGgubWF4KGxlZnQsIE1hdGguZmxvb3IoayAtIG0gKiBzIC8gbiArIHNkKSk7CgkgICAgICBjb25zdCBuZXdSaWdodCA9IE1hdGgubWluKHJpZ2h0LCBNYXRoLmZsb29yKGsgKyAobiAtIG0pICogcyAvIG4gKyBzZCkpOwoJICAgICAgcXVpY2tzZWxlY3QoYXJyYXksIGssIG5ld0xlZnQsIG5ld1JpZ2h0LCBjb21wYXJlKTsKCSAgICB9CgoJICAgIGNvbnN0IHQgPSBhcnJheVtrXTsKCSAgICBsZXQgaSA9IGxlZnQ7CgkgICAgbGV0IGogPSByaWdodDsKCSAgICBzd2FwKGFycmF5LCBsZWZ0LCBrKTsKCSAgICBpZiAoY29tcGFyZShhcnJheVtyaWdodF0sIHQpID4gMCkgc3dhcChhcnJheSwgbGVmdCwgcmlnaHQpOwoKCSAgICB3aGlsZSAoaSA8IGopIHsKCSAgICAgIHN3YXAoYXJyYXksIGksIGopLCArK2ksIC0tajsKCgkgICAgICB3aGlsZSAoY29tcGFyZShhcnJheVtpXSwgdCkgPCAwKSArK2k7CgoJICAgICAgd2hpbGUgKGNvbXBhcmUoYXJyYXlbal0sIHQpID4gMCkgLS1qOwoJICAgIH0KCgkgICAgaWYgKGNvbXBhcmUoYXJyYXlbbGVmdF0sIHQpID09PSAwKSBzd2FwKGFycmF5LCBsZWZ0LCBqKTtlbHNlICsraiwgc3dhcChhcnJheSwgaiwgcmlnaHQpOwoJICAgIGlmIChqIDw9IGspIGxlZnQgPSBqICsgMTsKCSAgICBpZiAoayA8PSBqKSByaWdodCA9IGogLSAxOwoJICB9CgoJICByZXR1cm4gYXJyYXk7Cgl9CgoJZnVuY3Rpb24gc3dhcChhcnJheSwgaSwgaikgewoJICBjb25zdCB0ID0gYXJyYXlbaV07CgkgIGFycmF5W2ldID0gYXJyYXlbal07CgkgIGFycmF5W2pdID0gdDsKCX0KCglmdW5jdGlvbiBxdWFudGlsZSh2YWx1ZXMsIHAsIHZhbHVlb2YpIHsKCSAgdmFsdWVzID0gRmxvYXQ2NEFycmF5LmZyb20obnVtYmVycyh2YWx1ZXMsIHZhbHVlb2YpKTsKCSAgaWYgKCEobiA9IHZhbHVlcy5sZW5ndGgpKSByZXR1cm47CgkgIGlmICgocCA9ICtwKSA8PSAwIHx8IG4gPCAyKSByZXR1cm4gbWluKHZhbHVlcyk7CgkgIGlmIChwID49IDEpIHJldHVybiBtYXgodmFsdWVzKTsKCSAgdmFyIG4sCgkgICAgICBpID0gKG4gLSAxKSAqIHAsCgkgICAgICBpMCA9IE1hdGguZmxvb3IoaSksCgkgICAgICB2YWx1ZTAgPSBtYXgocXVpY2tzZWxlY3QodmFsdWVzLCBpMCkuc3ViYXJyYXkoMCwgaTAgKyAxKSksCgkgICAgICB2YWx1ZTEgPSBtaW4odmFsdWVzLnN1YmFycmF5KGkwICsgMSkpOwoJICByZXR1cm4gdmFsdWUwICsgKHZhbHVlMSAtIHZhbHVlMCkgKiAoaSAtIGkwKTsKCX0KCglmdW5jdGlvbiBtZWRpYW4odmFsdWVzLCB2YWx1ZW9mKSB7CgkgIHJldHVybiBxdWFudGlsZSh2YWx1ZXMsIDAuNSwgdmFsdWVvZik7Cgl9CgoJLy8gaW1wb3J0ICogYXMgalN0YXQgZnJvbSAnanN0YXQnOwoKCS8qCgkgIENQVE1hdGggU3RhdGljIENsYXNzIC0gTm90IGludGVuZGVkIGZvciBpbnN0YW50aWF0aW9uIQoKCSAgVmFyaWFibGVzOgoJICAgIHggPSBvYmplY3RpdmUgdmFsdWUKCSAgICB2ID0gc3ViamVjdGl2ZSB2YWx1ZS91dGlsaXR5CgkgICAgcCA9IG9iamVjdGl2ZSBwcm9iYWJpbGl0eQoJICAgIHcgPSBzdWJqZWN0aXZlIHByb2JhYmlsaXR5L2RlY2lzaW9uIHdlaWdodAoJICAgIFYgPSBleHBlY3RlZCB2YWx1ZS91dGlsaXR5CgoJICAgIGEgPSBhbHBoYSAoY3VydmF0dXJlIGZvciB2YWx1ZSBmdW5jdGlvbikKCSAgICBsID0gbGFtYmRhIChsb3NzIGF2ZXJzaW9uIGZvciB2YWx1ZSBmdW5jdGlvbikKCSAgICBnID0gZ2FtbWEgKHNlbnNpdGl2aXR5IGZvciBkZWNpc2lvbiB3ZWlnaHRpbmcgZnVuY3Rpb24pCgoJICBFcXVhdGlvbnM6CgkgICAgdiA9IHheYSwgaWYgeCA+PSAwOyAtbCAqIC14XmEsIGlmIHggPCAwCgkgICAgdyA9IHBeZyAvIChwXmcgKyAoMSAtIHApXmcpXigxIC8gZykKCSAgICBWID0gdiAqIHcKCSovCgljbGFzcyBDUFRNYXRoIHsKCSAgc3RhdGljIHhhbDJ2KHgsIGEsIGwpIHsKCSAgICBpZiAoeCA+PSAwKSB7CgkgICAgICByZXR1cm4geCAqKiBhOwoJICAgIH0gLy8gZWxzZSAoeCA8IDApCgoKCSAgICByZXR1cm4gLWwgKiAoLXgpICoqIGE7CgkgIH0KCgkgIHN0YXRpYyB4bHYyYSh4LCBsLCB2KSB7CgkgICAgaWYgKHggPj0gMCkgewoJICAgICAgcmV0dXJuIE1hdGgubG9nKHYpIC8gTWF0aC5sb2coeCk7CgkgICAgfSAvLyBlbHNlICh4IDwgMCkKCgoJICAgIHJldHVybiAoTWF0aC5sb2coLXYpIC0gTWF0aC5sb2cobCkpIC8gTWF0aC5sb2coLXgpOwoJICB9CgoJICBzdGF0aWMgeGF2MmwoeCwgYSwgdikgewoJICAgIGlmICh4ID49IDApIHsKCSAgICAgIHJldHVybiAxOwoJICAgIH0gLy8gZWxzZSAoeCA8IDApCgoKCSAgICByZXR1cm4gLXYgLyAoLXgpICoqIGE7CgkgIH0KCgkgIHN0YXRpYyBwZzJ3KHAsIGcpIHsKCSAgICByZXR1cm4gcCAqKiBnIC8gKHAgKiogZyArICgxIC0gcCkgKiogZykgKiogKDEgLyBnKTsKCSAgfQoKCX0KCgkvLyBJbnRlcm5hbCBkZXBlbmRlbmNpZXMKCgkvKiBlc2xpbnQgbm8tcmVzdHJpY3RlZC1nbG9iYWxzOiBbIm9mZiIsICJzZWxmIl0gKi8KCglzZWxmLm9ubWVzc2FnZSA9IGV2ZW50ID0+IHsKCSAgY29uc3QgcGFyYW1zID0gewoJICAgIGFscGhhOiB7CgkgICAgICB0eXBlOiAncmVhbCcsCgkgICAgICBsb3dlcjogMCwKCSAgICAgIHVwcGVyOiAxCgkgICAgfSwKCSAgICBsYW1iZGE6IHsKCSAgICAgIHR5cGU6ICdyZWFsJywKCSAgICAgIGxvd2VyOiAwLAoJICAgICAgdXBwZXI6IDEwCgkgICAgfSwKCSAgICBnYW1tYTogewoJICAgICAgdHlwZTogJ3JlYWwnLAoJICAgICAgbG93ZXI6IDAsCgkgICAgICB1cHBlcjogMQoJICAgIH0sCgkgICAgbHVjZTogewoJICAgICAgdHlwZTogJ3JlYWwnLAoJICAgICAgbG93ZXI6IDAsCgkgICAgICB1cHBlcjogMTAwCgkgICAgfQoJICB9OwoKCSAgY29uc3QgbG9nUG9zdCA9IChzdGF0ZSwgZGF0YSkgPT4gewoJICAgIGxldCBscCA9IDA7IC8vIFByaW9ycwoKCSAgICBjb25zdCBhbHBoYU1lYW4gPSAwLjU7CgkgICAgY29uc3QgYWxwaGFTYW1wbGVTaXplID0gMi41OwoJICAgIGxwICs9IGRpc3RyaWJ1dGlvbnMuYmV0YShzdGF0ZS5hbHBoYSwgYWxwaGFNZWFuICogYWxwaGFTYW1wbGVTaXplLCAoMSAtIGFscGhhTWVhbikgKiBhbHBoYVNhbXBsZVNpemUpOyAvLyBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMudW5pZihzdGF0ZS5hbHBoYSwgMCwgMSk7CgoJICAgIGNvbnN0IGxhbWJkYU1lYW4gPSAyOwoJICAgIGNvbnN0IGxhbWJkYVNoYXBlID0gMzsKCSAgICBscCArPSBkaXN0cmlidXRpb25zLmdhbW1hKHN0YXRlLmxhbWJkYSwgbGFtYmRhU2hhcGUsIGxhbWJkYVNoYXBlIC8gbGFtYmRhTWVhbik7IC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmxhbWJkYSwgMCwgMTApOwoKCSAgICBjb25zdCBnYW1tYU1lYW4gPSAwLjU7CgkgICAgY29uc3QgZ2FtbWFTYW1wbGVTaXplID0gMi41OwoJICAgIGxwICs9IGRpc3RyaWJ1dGlvbnMuYmV0YShzdGF0ZS5nYW1tYSwgZ2FtbWFNZWFuICogZ2FtbWFTYW1wbGVTaXplLCAoMSAtIGdhbW1hTWVhbikgKiBnYW1tYVNhbXBsZVNpemUpOyAvLyBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMudW5pZihzdGF0ZS5nYW1tYSwgMCwgMSk7CgoJICAgIGNvbnN0IGx1Y2VNZWFuID0gMjsKCSAgICBjb25zdCBsdWNlU2hhcGUgPSAzOwoJICAgIGxwICs9IGRpc3RyaWJ1dGlvbnMuZ2FtbWEoc3RhdGUubHVjZSwgbHVjZVNoYXBlLCBsdWNlU2hhcGUgLyBsdWNlTWVhbik7IC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmx1Y2UsIDAsIDEwMCk7CgkgICAgLy8gTGlrZWxpaG9vZAoKCSAgICBkYXRhLmZvckVhY2goY2hvaWNlID0+IHsKCSAgICAgIC8vIFZhbHVlcwoJICAgICAgY29uc3QgdmwgPSBDUFRNYXRoLnhhbDJ2KGNob2ljZS54bCwgc3RhdGUuYWxwaGEsIHN0YXRlLmxhbWJkYSk7CgkgICAgICBjb25zdCB2dyA9IENQVE1hdGgueGFsMnYoY2hvaWNlLnh3LCBzdGF0ZS5hbHBoYSwgc3RhdGUubGFtYmRhKTsKCSAgICAgIGNvbnN0IHZzID0gQ1BUTWF0aC54YWwydihjaG9pY2UueHMsIHN0YXRlLmFscGhhLCBzdGF0ZS5sYW1iZGEpOyAvLyBQcm9iYWJpbGl0aWVzCgoJICAgICAgY29uc3Qgd3cgPSBDUFRNYXRoLnBnMncoY2hvaWNlLnB3LCBzdGF0ZS5nYW1tYSk7CgkgICAgICBjb25zdCB3bCA9IDEgLSB3dzsgLy8gVXRpbGl0aWVzCgoJICAgICAgY29uc3QgdWcgPSB3bCAqIHZsICsgd3cgKiB2dzsKCSAgICAgIGNvbnN0IHVzID0gdnM7IC8vIENob2ljZSBvZiBnYW1ibGUgb3Igc3VyZSBpcyBzYW1wbGVkIGZyb20gYSBCZXJub3VsbGkgZGlzdHJpYnV0aW9uCgkgICAgICAvLyBMdWNlIGNob2ljZSBydWxlIGlzIHVzZWQgdG8gY29tcHV0ZSBwcm9iYWJpbGl0eSBvZiBnYW1ibGluZyEgKDAgPSBzdXJlLCAxID0gZ2FtYmxlKQoKCSAgICAgIGNvbnN0IGJpbnZhbCA9IDEgLyAoMSArIE1hdGguZXhwKHN0YXRlLmx1Y2UgKiAodXMgLSB1ZykpKTsgLy8gQWN0dWFsIHJlc3BvbnNlCgoJICAgICAgY29uc3QgcmVzcG9uc2UgPSBjaG9pY2UucmVzcG9uc2UgPT09ICdzdXJlJyA/IDAgOiAxOwoJICAgICAgbHAgKz0gZGlzdHJpYnV0aW9ucy5iZXJuKHJlc3BvbnNlLCBiaW52YWwpOwoJICAgIH0pOwoJICAgIHJldHVybiBscDsKCSAgfTsgLy8gSW5pdGlhbGl6aW5nIHRoZSBzYW1wbGVyCgoKCSAgY29uc3Qgc2FtcGxlciA9IG5ldyBtY21jLkFtd2dTYW1wbGVyKHBhcmFtcywgbG9nUG9zdCwgZXZlbnQuZGF0YSk7IC8vIEJ1cm5pbmcgc29tZSBzYW1wbGVzIHRvIHRoZSBNQ01DIGdvZHMgYW5kIHNhbXBsaW5nIDUwMDAgZHJhd3MKCgkgIHNhbXBsZXIuYnVybigxMDAwKTsKCSAgY29uc3Qgc2FtcGxlcyA9IHNhbXBsZXIuc2FtcGxlKDUwMDApOyAvLyBFeHRyYWN0IHN1bW1hcnkgc3RhdHMKCgkgIGNvbnN0IHJlc3VsdHMgPSB7CgkgICAgYWxwaGE6IG1lZGlhbihzYW1wbGVzLmFscGhhKSwKCSAgICBsYW1iZGE6IG1lZGlhbihzYW1wbGVzLmxhbWJkYSksCgkgICAgZ2FtbWE6IG1lZGlhbihzYW1wbGVzLmdhbW1hKSwKCSAgICBsdWNlOiBtZWRpYW4oc2FtcGxlcy5sdWNlKQoJICB9OwoJICBzZWxmLnBvc3RNZXNzYWdlKHsKCSAgICByZXN1bHRzOiByZXN1bHRzLAoJICAgIHNhbXBsZXM6IHNhbXBsZXMKCSAgfSk7Cgl9OwoKfSkoKTsKCg==","data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3B0LWZpdC13b3JrZXIuanMiLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9iYXllcy5qcy9kaXN0cmlidXRpb25zLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2JheWVzLmpzL21jbWMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL2FzY2VuZGluZy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvbnVtYmVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9zb3J0LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9tYXguanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL21pbi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvcXVpY2tzZWxlY3QuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL3F1YW50aWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9tZWRpYW4uanMiLCIuLi8uLi9saWJyYXJpZXMvcHJvc3BlY3RhYmxlLW1hdGgvc3JjL2NwdC1tYXRoLmpzIiwiLi4vLi4vbGlicmFyaWVzL3Byb3NwZWN0YWJsZS1tYXRoL3NyYy9pbmRleC5qcyIsIi4uLy4uL2xpYnJhcmllcy9wcm9zcGVjdGFibGUtZWxlbWVudHMvc3JjL2NvbXBvbmVudHMvY3B0LWZpdC13b3JrZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cblxuLy8gQSBudW1iZXIgb2YgbG9nIHByb2JhYmlsaXR5IGRlbnNpdHkgZnVuY3Rpb25zIChQREYpLiBOYW1pbmcgYW5kIHBhcmFtZXRlcml6YXRpb25cbi8vIHNob3VsZCBtYXRjaCBSJ3MsIGV4Y2VwdCBmb3IgdGhhdCBhbGwgZnVuY3Rpb25zIHJlc2lkZSBpbiBhbiBsZCBvYmplY3QgKFxuLy8gYXMgaW4gXCJsb2cgZGVuc2l0eVwiKSwgc28gdG8gZ2V0IGEgbm9ybWFsIGxvZyBkZW5zaXR5IHlvdSB3b3VsZCB3cml0ZVxuLy8gbGQubm9ybSguLi4pLlxuLy8gTW9zdCBvZiB0aGUgY29kZSBiZWxvdyBpcyBkaXJlY3RseSB0YWtlbiBmcm9tIHRoZSBncmVhdCBKc3RhdCBwcm9qZWN0XG4vLyAoaHR0cHM6Ly9naXRodWIuY29tL2pzdGF0Lykgd2hpY2ggaW5jbHVkZXMgUERGIGZvciBtYW55IGNvbW1vbiBwcm9iYWJpbGl0eVxuLy8gZGlzdHJpYnV0aW9ucy4gV2hhdCBJIGhhdmUgZG9uZSBpcyBvbmx5IHRvIGNvbnZlcnQgdGhlc2UgdG8gbG9nIFBERnMuXG5cbi8qXG5PcmlnaW5hbCB3b3JrIENvcHlyaWdodCAoYykgMjAxMyBqU3RhdFxuTW9kaWZpZWQgd29yayBDb3B5cmlnaHQgKGMpIDIwMTUgUmFzbXVzIELDpcOldGggXG5cblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbm9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbmluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbnRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbmFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG5JTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbkZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbk9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cblRIRSBTT0ZUV0FSRS5cblxuKi9cblxuXG4vLyBUaGlzIGJvaWxlciBwbGF0ZSBjb2RlIGhlcmUgaXMgdGFrZW4gZnJvbTpcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvdGVtcGxhdGVzL3JldHVybkV4cG9ydHMuanNcbi8vIEl0IHNob3VsZCBtYWtlIHNodXJlIHRoYXQgbW9kdWxlIGNhbiBiZSBpbXBvcnRlZCBib3RoIGluIHRoZSBicm93c2VyLFxuLy8gTm9kZSwgYW5kIGJ5IHVzaW5nIHRoZSBBc3luY2hyb25vdXMgTW9kdWxlIERlZmluaXRpb24gc3RhbmRhcmQuXG4vLyBJZiB0aGlzIG1vZHVsZSBpcyBsb2FkZWQgaW4gdGhlIGJyb3dzZXIgaXQgd2lsbCBjcmVhdGVkIHRoZSBnbG9iYWxcbi8vIG9iamVjdCBsZCAuXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgICAgZGVmaW5lKFtdLCBmYWN0b3J5KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgIC8vIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxuICAgICAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAgICAgLy8gbGlrZSBOb2RlLlxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KVxuICAgICAgICByb290LmxkID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uKCkge1xuICAvLyBPYmplY3QgdG8gaG9sZCB0aGUgZnVuY3Rpb25zIHRvIGJlIGV4cG9ydGVkLlxuICB2YXIgbGQgID0ge307XG4gIFxuICAvLy8vLy8vLy8vIEhlbHBlciBmdW5jdGlvbnMgLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgdmFyIGxnYW1tYSA9IGZ1bmN0aW9uKHgpIHtcbiAgICB2YXIgaiA9IDA7XG4gICAgdmFyIGNvZiA9IFtcbiAgICAgIDc2LjE4MDA5MTcyOTQ3MTQ2LCAtODYuNTA1MzIwMzI5NDE2NzcsIDI0LjAxNDA5ODI0MDgzMDkxLFxuICAgICAgLTEuMjMxNzM5NTcyNDUwMTU1LCAwLjEyMDg2NTA5NzM4NjYxNzllLTIsIC0wLjUzOTUyMzkzODQ5NTNlLTVcbiAgICBdO1xuICAgIHZhciBzZXIgPSAxLjAwMDAwMDAwMDE5MDAxNTtcbiAgICB2YXIgeHgsIHksIHRtcDtcbiAgICB0bXAgPSAoeSA9IHh4ID0geCkgKyA1LjU7XG4gICAgdG1wIC09ICh4eCArIDAuNSkgKiBsb2codG1wKTtcbiAgICBmb3IgKDsgaiA8IDY7IGorKylcbiAgICAgIHNlciArPSBjb2Zbal0gLyArK3k7XG4gICAgcmV0dXJuIGxvZygyLjUwNjYyODI3NDYzMTAwMDUgKiBzZXIgLyB4eCkgLSB0bXA7XG4gIH07XG4gIGxkLmxnYW1tYSA9IGxnYW1tYTtcbiAgXG4gIHZhciBsZmFjdG9yaWFsID0gZnVuY3Rpb24obikge1xuICAgIHJldHVybiBuIDwgMCA/IE5hTiA6IGxnYW1tYShuICsgMSk7XG4gIH07XG4gIGxkLmxmYWN0b3JpYWwgPSBsZmFjdG9yaWFsO1xuICBcbiAgdmFyIGxjaG9vc2UgPSBmdW5jdGlvbihuLCBrKXtcbiAgICByZXR1cm4gbGZhY3RvcmlhbChuKSAtIGxmYWN0b3JpYWwoaykgLSBsZmFjdG9yaWFsKG4gLSBrKTtcbiAgfTtcbiAgbGQubGNob29zZSA9IGxjaG9vc2U7XG4gIFxuICB2YXIgbGJldGEgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIGxnYW1tYShhKSArIGxnYW1tYShiKSAtIGxnYW1tYShhICsgYik7XG4gIH07XG4gIGxkLmxiZXRhID0gbGJldGE7XG4gIFxuICB2YXIgbG9nICA9IE1hdGgubG9nO1xuICB2YXIgZXhwICA9IE1hdGguZXhwO1xuICB2YXIgYWJzICA9IE1hdGguYWJzO1xuICB2YXIgcG93ICA9IE1hdGgucG93O1xuICB2YXIgc3FydCA9IE1hdGguc3FydDtcbiAgdmFyIHBpICAgPSBNYXRoLlBJO1xuICBcbiAgLy8vLy8vLy8vLyBDb250aW5vdXMgZGlzdHJpYnV0aW9ucyAvLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgbGQuYmV0YSA9IGZ1bmN0aW9uKHgsIHNoYXBlMSwgc2hhcGUyKSB7XG4gICAgaWYgKHggPiAxIHx8IHggPCAwKSB7XG4gICAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfVxuICAgIGlmKHNoYXBlMSA9PT0gMSAmJiBzaGFwZTIgPT09IDEpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKHNoYXBlMSAtIDEpICogbG9nKHgpICsgKHNoYXBlMiAtIDEpICogbG9nKDEgLSB4KSAtIGxiZXRhKHNoYXBlMSwgc2hhcGUyKTsgIFxuICAgIH1cbiAgfTtcbiAgXG4gIGxkLmNhdWNoeSA9IGZ1bmN0aW9uKHgsIGxvY2F0aW9uLCBzY2FsZSkge1xuICAgIHJldHVybiBsb2coc2NhbGUpIC0gbG9nKHBvdyh4IC0gbG9jYXRpb24sIDIpICsgcG93KHNjYWxlLCAyKSkgIC0gbG9nKHBpKTtcbiAgfTtcbiAgXG4gIGxkLm5vcm0gPSBmdW5jdGlvbih4LCBtZWFuLCBzZCkge1xuICAgICAgcmV0dXJuIC0wLjUgKiBsb2coMiAqIHBpKSAtbG9nKHNkKSAtIHBvdyh4IC0gbWVhbiwgMikgLyAoMiAqIHNkICogc2QpO1xuICB9O1xuXG4gIC8vIEEgYml2YXJpYXRlIE5vcm1hbCBkaXN0cmlidXRpb24gcGFyYW1ldGVyaXplZCBieSBhcnJheXMgb2YgdHdvIG1lYW5zIGFuZCBTRHMsIGFuZCBcbiAgLy8gdGhlIGNvcnJlbGF0aW9uLlxuICBsZC5iaXZhcm5vcm0gPSBmdW5jdGlvbih4LCBtZWFuLCBzZCwgY29ycikge1xuICAgIHZhciB6ID0gcG93KHhbMF0gLSBtZWFuWzBdLCAyKSAvIHBvdyhzZFswXSwgMikgK1xuICAgICAgICAgICAgcG93KHhbMV0gLSBtZWFuWzFdLCAyKSAvIHBvdyhzZFsxXSwgMikgLSBcbiAgICAgICAgICAgICgyICogY29yciAqICh4WzBdIC0gbWVhblswXSkgKiAoeFsxXSAtIG1lYW5bMV0pKSAvIChzZFswXSAqIHNkWzFdKTtcbiAgICB2YXIgbm9ybWFsaXppbmdfZmFjdG9yID0gLSggbG9nKDIpICsgbG9nKHBpKSArIGxvZyhzZFswXSkgKyBsb2coc2RbMV0pICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAuNSAqIGxvZygxIC0gcG93KGNvcnIsIDIpKSApOyBcbiAgICB2YXIgYml2YXJfbG9nX2RlbnMgPSBub3JtYWxpemluZ19mYWN0b3IgLSB6IC8gKDIgKiAoMSAtIHBvdyhjb3JyLCAyKSApICk7IFxuICAgIHJldHVybiBiaXZhcl9sb2dfZGVucztcbiAgfTtcbiAgXG5cbiAgbGQubGFwbGFjZSA9IGZ1bmN0aW9uKHgsIGxvY2F0aW9uLCBzY2FsZSkge1xuICAgIHJldHVybiAoLWFicyh4IC0gbG9jYXRpb24pL3NjYWxlKSAtIGxvZygyICogc2NhbGUpO1xuICB9O1xuICBcbiAgbGQuZGV4cCA9IGxkLmxhcGxhY2U7XG4gIFxuICBsZC5nYW1tYSA9IGZ1bmN0aW9uKHgsIHNoYXBlLCByYXRlKSB7XG4gICAgdmFyIHNjYWxlID0gMSAvIHJhdGU7XG4gICAgaWYgKHggPCAwKSB7XG4gICAgICByZXR1cm4gLUluZmluaXR5O1xuICAgIH1cbiAgICBpZigoeCA9PT0gMCAmJiBzaGFwZSA9PT0gMSkgKSB7XG4gICAgICByZXR1cm4gLWxvZyhzY2FsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoc2hhcGUgLSAxKSAqIGxvZyh4KSAtIHggLyBzY2FsZSAtIGxnYW1tYShzaGFwZSkgLSBzaGFwZSAqIGxvZyhzY2FsZSk7XG4gICAgfVxuICB9O1xuICBcbiAgbGQuaW52Z2FtbWEgPSBmdW5jdGlvbih4LCBzaGFwZSwgc2NhbGUpIHtcbiAgICAgIGlmICh4IDw9IDApIHtcbiAgICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAtKHNoYXBlICsgMSkgKiBsb2coeCkgLSBzY2FsZSAvIHggLSBsZ2FtbWEoc2hhcGUpICsgc2hhcGUgKiBsb2coc2NhbGUpO1xuICAgIH07XG4gIFxuICBsZC5sbm9ybSA9ICBmdW5jdGlvbih4LCBtZWFubG9nLCBzZGxvZykge1xuICAgIGlmICh4IDw9IDApIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfVxuICAgIHJldHVybiAtbG9nKHgpIC0gMC41ICogbG9nKDIgKiBwaSkgLSBsb2coc2Rsb2cpIC0gXG4gICAgICAgICAgICBwb3cobG9nKHgpIC0gbWVhbmxvZywgMikgLyAoMiAqIHNkbG9nICogc2Rsb2cpO1xuICB9O1xuICBcbiAgbGQucGFyZXRvID0gZnVuY3Rpb24oeCwgc2NhbGUsIHNoYXBlKSB7XG4gICAgaWYgKHggPCBzY2FsZSkge1xuICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICB9XG4gICAgcmV0dXJuIGxvZyhzaGFwZSkgKyBzaGFwZSAqIGxvZyhzY2FsZSkgLSAoc2hhcGUgKyAxKSAqIGxvZyh4KTtcbiAgfTtcbiAgXG4gIGxkLnQgID0gIGZ1bmN0aW9uKHgsIGxvY2F0aW9uLCBzY2FsZSwgZGYpIHtcbiAgICBkZiA9IGRmID4gMWUxMDAgPyAxZTEwMCA6IGRmO1xuICAgIHJldHVybiBsZ2FtbWEoKGRmICsgMSkvMikgLSBsZ2FtbWEoZGYvMikgLSBsb2coc3FydChwaSAqIGRmKSAqIHNjYWxlKSArXG4gICAgICAgICAgIGxvZyhwb3coMSArICgxL2RmKSAqIHBvdygoeCAtIGxvY2F0aW9uKS9zY2FsZSwgMiksIC0oZGYgKyAxKS8yKSk7XG4gIH07XG4gIFxuICAvLyBUaGlzIGlzIGEgZGlyZWN0IGphdmFzY3JpcHQgdHJhbnNsYXRpb24gb2YgdGhlIFIgY29kZSB1c2VkIHRvIGV2YWx1YXRlXG4gIC8vIHRoZSBsb2cgZGVuc2l0eSBvZiBhIHdlaWJ1bGwgZGlzdHJpYnV0aW9uOiBcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3djaC9yLXNvdXJjZS9ibG9iL2IxNTZlM2E3MTE5NjdmNTgxMzFlMjNjMWIxZGMxZWE5MGUyZjBjNDMvc3JjL25tYXRoL2R3ZWlidWxsLmNcbiAgbGQud2VpYnVsbCA9IGZ1bmN0aW9uKHgsIHNoYXBlLCBzY2FsZSkge1xuICAgIGlmICh4IDwgMCkgcmV0dXJuIC1JbmZpbml0eTtcbiAgICBpZih4ID09PSAwICYmIHNoYXBlIDwgMSkgcmV0dXJuIEluZmluaXR5O1xuICAgIHZhciB0bXAxID0gcG93KHggLyBzY2FsZSwgc2hhcGUgLSAxKTtcbiAgICB2YXIgdG1wMiA9IHRtcDEgKiAoeCAvIHNjYWxlKTtcblx0ICByZXR1cm4gLXRtcDIgKyBsb2coc2hhcGUgKiB0bXAxIC8gc2NhbGUpO1xuICB9O1xuICBcbiAgLy8gVGhpcyBpcyBhIGRpcmVjdCBqYXZhc2NyaXB0IHRyYW5zbGF0aW9uIG9mIHRoZSBSIGNvZGUgdXNlZCB0byBldmFsdWF0ZVxuICAvLyB0aGUgbG9nIGRlbnNpdHkgb2YgYSBsb2dpc3RpYyBkaXN0cmlidXRpb246IFxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vd2NoL3Itc291cmNlL2Jsb2IvYjE1NmUzYTcxMTk2N2Y1ODEzMWUyM2MxYjFkYzFlYTkwZTJmMGM0My9zcmMvbm1hdGgvZGxvZ2lzLmNcbiAgbGQubG9naXMgPSBmdW5jdGlvbih4LCBsb2NhdGlvbiwgc2NhbGUpIHtcbiAgICB4ID0gYWJzKCh4IC0gbG9jYXRpb24pIC8gc2NhbGUpO1xuICAgIHZhciBlID0gZXhwKC14KTtcbiAgICB2YXIgZiA9IDEuMCArIGU7XG4gICAgcmV0dXJuIC0oeCArIGxvZyhzY2FsZSAqIGYgKiBmKSk7ICAgIFxuICB9O1xuXG4gIGxkLmRpcmljaGxldCA9IGZ1bmN0aW9uKHgsIGFscGhhKSB7XG4gICAgdmFyIHN1bV9hbHBoYSA9IDA7XG4gICAgdmFyIHN1bV9sZ2FtbWFfYWxwaGEgPSAwO1xuICAgIHZhciBzdW1fYWxwaGFfc3ViXzFfbG9nX3ggPSAwO1xuICAgIHZhciBuID0gYWxwaGEubGVuZ3RoO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgIHN1bV9hbHBoYSArPSBhbHBoYVtpXTtcbiAgICAgIHN1bV9sZ2FtbWFfYWxwaGEgKz0gbGdhbW1hKGFscGhhW2ldKTtcbiAgICAgIHN1bV9hbHBoYV9zdWJfMV9sb2dfeCArPSAoYWxwaGFbaV0gLSAxKSAqIGxvZyh4W2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGxnYW1tYShzdW1fYWxwaGEpIC0gc3VtX2xnYW1tYV9hbHBoYSArIHN1bV9hbHBoYV9zdWJfMV9sb2dfeDtcbiAgfTtcbiAgIFxuICAgIFxuICBsZC5leHAgPSBmdW5jdGlvbih4LCByYXRlKSB7XG4gICAgICByZXR1cm4geCA8IDAgPyAtSW5maW5pdHkgOiBsb2cocmF0ZSkgLXJhdGUgKiB4O1xuICB9O1xuICBcbiAgbGQudW5pZiA9IGZ1bmN0aW9uKHgsIG1pbiwgbWF4KSB7XG4gICAgICByZXR1cm4gKHggPCBtaW4gfHwgeCA+IG1heCkgPyAtSW5maW5pdHkgOiBsb2coMSAvIChtYXggLSBtaW4pKTtcbiAgfTtcbiAgXG4gIC8vLy8vLy8vLy8gRGlzY3JldGUgZGlzdHJpYnV0aW9ucyAvLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIFxuICBsZC5iZXJuID0gZnVuY3Rpb24oeCwgcHJvYikge1xuICAgICAgcmV0dXJuICEoeCA9PT0gMCB8fCB4ID09PSAxKSA/IC1JbmZpbml0eSA6IGxvZyh4ICogcHJvYiArICgxIC0geCkgKiAoMSAtIHByb2IpKTtcbiAgfTtcbiAgXG4gIGxkLmNhdCA9IGZ1bmN0aW9uKHgsIHByb2JzKSB7XG4gICAgaWYoeCA8IDEgfHwgeCA+IHByb2JzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGxvZyggcHJvYnNbeCAtIDFdICk7XG4gICAgfVxuICB9O1xuICBcbiAgbGQuYmlub20gPSBmdW5jdGlvbih4LCBzaXplLCBwcm9iKSB7XG4gICAgaWYoeCA+IHNpemUgfHwgeCA8IDApIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfVxuICAgIGlmKHByb2IgPT09IDAgfHwgcHJvYiA9PT0gMSkge1xuICAgICAgcmV0dXJuIChzaXplICogcHJvYikgPT09IHggPyAwIDogLUluZmluaXR5O1xuICAgIH1cbiAgICByZXR1cm4gbGNob29zZShzaXplLCB4KSArIHggKiBsb2cocHJvYikgKyAoc2l6ZSAtIHgpICogbG9nKDEgLSBwcm9iKTtcbiAgfTtcbiAgXG4gIHZhciBtdWx0aW5vbSA9IGZ1bmN0aW9uKHgsIHByb2JzKSB7XG4gICAgdmFyIG4gPSB4Lmxlbmd0aDtcbiAgICB2YXIgc2l6ZSA9IDA7XG4gICAgdmFyIHRtcF90ZXJtID0gMDtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICBpZihwcm9ic1tpXSA9PT0gMCkge1xuICAgICAgICBpZih4W2ldICE9PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsgIFxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzaXplICs9IHhbaV07XG4gICAgICAgIHRtcF90ZXJtICs9IHhbaV0gKiBsb2cocHJvYnNbaV0pIC0gbGdhbW1hKHhbaV0gKyAxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxnYW1tYShzaXplICsgMSkgKyB0bXBfdGVybSA7XG4gIH07XG4gIFxuICBsZC5uYmlub20gPSBmdW5jdGlvbih4LCBzaXplLCBwcm9iKSB7XG4gICAgaWYoeCA8IDApIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfVxuICAgIHJldHVybiBsY2hvb3NlKHggKyBzaXplIC0gMSwgc2l6ZSAtIDEpICsgeCAqIGxvZygxIC0gcHJvYikgKyBzaXplICogbG9nKHByb2IpO1xuICB9O1xuICBcbiAgbGQuaHlwZXIgPSBmdW5jdGlvbih4LCBtLCBuLCBrKSB7XG4gICAgaWYoeCA8IDAgfHwgeCA+IGspIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfSBlbHNlIHtcbiAgICByZXR1cm4gbGNob29zZShtLCB4KSArIGxjaG9vc2Uobiwgay14KSAtIGxjaG9vc2UobStuLCBrKTtcbiAgICB9XG4gIH07XG4gIFxuICBsZC5wb2lzID0gZnVuY3Rpb24oeCwgbGFtYmRhKSB7XG4gICAgICByZXR1cm4geCA8IDAgPyAtSW5maW5pdHkgOiBsb2cobGFtYmRhKSAqIHggLSBsYW1iZGEgLSBsZmFjdG9yaWFsKHgpO1xuICB9O1xuICBcbiAgcmV0dXJuIGxkO1xufSkpOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vLyBUaGlzIGJvaWxlciBwbGF0ZSBjb2RlIGhlcmUgaXMgdGFrZW4gZnJvbTpcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvdGVtcGxhdGVzL3JldHVybkV4cG9ydHMuanNcbi8vIEl0IHNob3VsZCBtYWtlIHNodXJlIHRoYXQgbW9kdWxlIGNhbiBiZSBpbXBvcnRlZCBib3RoIGluIHRoZSBicm93c2VyLFxuLy8gTm9kZSwgYW5kIGJ5IHVzaW5nIHRoZSBBc3luY2hyb25vdXMgTW9kdWxlIERlZmluaXRpb24gc3RhbmRhcmQuXG4vLyBJZiB0aGlzIG1vZHVsZSBpcyBsb2FkZWQgaW4gdGhlIGJyb3dzZXIgaXQgd2lsbCBjcmVhdGVkIHRoZSBnbG9iYWxcbi8vIG9iamVjdCBtY21jIC5cbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgICAgICBkZWZpbmUoW10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XG4gICAgICAgIC8vIG9ubHkgQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgdGhhdCBzdXBwb3J0IG1vZHVsZS5leHBvcnRzLFxuICAgICAgICAvLyBsaWtlIE5vZGUuXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpXG4gICAgICAgIHJvb3QubWNtYyA9IGZhY3RvcnkoKTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbigpe1xuXG4vLy8gVGhlIGFjdHVhbCBtb2R1bGUgY29kZSBzdGFydHMgaGVyZSAvLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyAgXG4gIFxuICAvLy8vLy8vLy8vIEhlbHBlciBGdW5jdGlvbnMgLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgLyoqIFJldHVybnMgYSByYW5kb20gcmVhbCBudW1iZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAqL1xuICB2YXIgcnVuaWYgPSBmdW5jdGlvbihtaW4sIG1heCkge1xuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW47XG4gIH07XG4gIFxuICAvKiogUmV0dXJucyBhIHJhbmRvbSBpbnRlZ2VyIGJldHdlZW4gbWluIGFuZCBtYXggKi9cbiAgdmFyIHJ1bmlmX2Rpc2NyZXRlID0gZnVuY3Rpb24obWluLCBtYXgpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcbiAgfTtcbiAgXG4gIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHJlYWwgbnVtYmVyIGZyb20gYSBub3JtYWwgZGlzdHJpYmJ1dGlvbiBkZWZpbmVkXG4gICAqICBieSBtZWFuIGFuZCBzZC4gXG4gICAqICBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2pzdGF0L2pzdGF0L2Jsb2IvbWFzdGVyL3NyYy9zcGVjaWFsLmpzICovXG4gIHZhciBybm9ybSA9IGZ1bmN0aW9uKG1lYW4sIHNkKSB7XG4gICAgdmFyIHUsIHYsIHgsIHksIHE7XG4gICAgZG8ge1xuICAgICAgdSA9IE1hdGgucmFuZG9tKCk7XG4gICAgICB2ID0gMS43MTU2ICogKE1hdGgucmFuZG9tKCkgLSAwLjUpO1xuICAgICAgeCA9IHUgLSAwLjQ0OTg3MTtcbiAgICAgIHkgPSBNYXRoLmFicyh2KSArIDAuMzg2NTk1O1xuICAgICAgcSA9IHggKiB4ICsgeSAqICgwLjE5NjAwICogeSAtIDAuMjU0NzIgKiB4KTtcbiAgICB9IHdoaWxlIChxID4gMC4yNzU5NyAmJiAocSA+IDAuMjc4NDYgfHwgdiAqIHYgPiAtNCAqIE1hdGgubG9nKHUpICogdSAqIHUpKTtcbiAgICBcbiAgICByZXR1cm4gKHYgLyB1KSAqIHNkICsgbWVhbjtcbiAgfTtcbiAgXG4gIFxuICAvKiogUmV0dXJucyBhIGRlZXAgY2xvbmUgb2Ygc3JjLCBzb3J0IG9mLi4uIEl0IG9ubHkgY29waWVzIGEgbGltaXRlZFxuICAgKiBudW1iZXIgb2YgdHlwZXMgYW5kLCBmb3IgZXhhbXBsZSwgZnVuY3Rpb24gYXJlIG5vdCBjb3BpZWQuIFxuICAgKiBGcm9tIGh0dHA6Ly9kYXZpZHdhbHNoLm5hbWUvamF2YXNjcmlwdC1jbG9uZVxuICAgKi9cbiAgdmFyIGRlZXBfY2xvbmUgPSBmdW5jdGlvbihzcmMpIHtcbiAgXHRmdW5jdGlvbiBtaXhpbihkZXN0LCBzb3VyY2UsIGNvcHlGdW5jKSB7XG4gIFx0XHR2YXIgbmFtZSwgcywgaSwgZW1wdHkgPSB7fTtcbiAgXHRcdGZvcihuYW1lIGluIHNvdXJjZSl7XG4gIFx0XHRcdC8vIHRoZSAoIShuYW1lIGluIGVtcHR5KSB8fCBlbXB0eVtuYW1lXSAhPT0gcykgY29uZGl0aW9uIGF2b2lkcyBjb3B5aW5nIHByb3BlcnRpZXMgaW4gXCJzb3VyY2VcIlxuICBcdFx0XHQvLyBpbmhlcml0ZWQgZnJvbSBPYmplY3QucHJvdG90eXBlLlx0IEZvciBleGFtcGxlLCBpZiBkZXN0IGhhcyBhIGN1c3RvbSB0b1N0cmluZygpIG1ldGhvZCxcbiAgXHRcdFx0Ly8gZG9uJ3Qgb3ZlcndyaXRlIGl0IHdpdGggdGhlIHRvU3RyaW5nKCkgbWV0aG9kIHRoYXQgc291cmNlIGluaGVyaXRlZCBmcm9tIE9iamVjdC5wcm90b3R5cGVcbiAgXHRcdFx0cyA9IHNvdXJjZVtuYW1lXTtcbiAgXHRcdFx0aWYoIShuYW1lIGluIGRlc3QpIHx8IChkZXN0W25hbWVdICE9PSBzICYmICghKG5hbWUgaW4gZW1wdHkpIHx8IGVtcHR5W25hbWVdICE9PSBzKSkpe1xuICBcdFx0XHRcdGRlc3RbbmFtZV0gPSBjb3B5RnVuYyA/IGNvcHlGdW5jKHMpIDogcztcbiAgXHRcdFx0fVxuICBcdFx0fVxuICBcdFx0cmV0dXJuIGRlc3Q7XG4gIFx0fVxuICBcdGlmKCFzcmMgfHwgdHlwZW9mIHNyYyAhPSBcIm9iamVjdFwiIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzcmMpID09PSBcIltvYmplY3QgRnVuY3Rpb25dXCIpe1xuICBcdFx0Ly8gbnVsbCwgdW5kZWZpbmVkLCBhbnkgbm9uLW9iamVjdCwgb3IgZnVuY3Rpb25cbiAgXHRcdHJldHVybiBzcmM7XHQvLyBhbnl0aGluZ1xuICBcdH1cbiAgXHRpZihzcmMubm9kZVR5cGUgJiYgXCJjbG9uZU5vZGVcIiBpbiBzcmMpe1xuICBcdFx0Ly8gRE9NIE5vZGVcbiAgXHRcdHJldHVybiBzcmMuY2xvbmVOb2RlKHRydWUpOyAvLyBOb2RlXG4gIFx0fVxuICBcdGlmKHNyYyBpbnN0YW5jZW9mIERhdGUpe1xuICBcdFx0Ly8gRGF0ZVxuICBcdFx0cmV0dXJuIG5ldyBEYXRlKHNyYy5nZXRUaW1lKCkpO1x0Ly8gRGF0ZVxuICBcdH1cbiAgXHRpZihzcmMgaW5zdGFuY2VvZiBSZWdFeHApe1xuICBcdFx0Ly8gUmVnRXhwXG4gIFx0XHRyZXR1cm4gbmV3IFJlZ0V4cChzcmMpOyAgIC8vIFJlZ0V4cFxuICBcdH1cbiAgXHR2YXIgciwgaSwgbDtcbiAgXHRpZihzcmMgaW5zdGFuY2VvZiBBcnJheSl7XG4gIFx0XHQvLyBhcnJheVxuICBcdFx0ciA9IFtdO1xuICBcdFx0Zm9yKGkgPSAwLCBsID0gc3JjLmxlbmd0aDsgaSA8IGw7ICsraSl7XG4gIFx0XHRcdGlmKGkgaW4gc3JjKXtcbiAgXHRcdFx0XHRyLnB1c2goZGVlcF9jbG9uZShzcmNbaV0pKTtcbiAgXHRcdFx0fVxuICBcdFx0fVxuICBcdH0gZWxzZSB7XG4gIFx0XHQvLyBnZW5lcmljIG9iamVjdHNcbiAgXHRcdHIgPSBzcmMuY29uc3RydWN0b3IgPyBuZXcgc3JjLmNvbnN0cnVjdG9yKCkgOiB7fTtcbiAgXHR9XG4gIFx0cmV0dXJuIG1peGluKHIsIHNyYywgZGVlcF9jbG9uZSk7XG4gIH07XG4gIFxuICAvKiogU3BlY2lhbGl6ZWQgY2xvbmUgZnVuY3Rpb24gdGhhdCBvbmx5IGNsb25lcyBzY2FsYXJzIGFuZCBuZXN0ZWQgYXJyYXlzIHdoZXJlXG4gICAqIGVhY2ggYXJyYXkgZWl0aGVyIGNvbnNpc3RzIG9mIGFsbCBhcnJheXMgb3IgYWxsIG51bWJlcnMuIFRoaXMgZnVuY3Rpb25cbiAgICogaXMgbWVhbnQgYXMgYSBmYXN0IHdheSBvZiBjbG9uaW5nIHBhcmFtZXRlciBkcmF3cyB3aXRoaW4gdGhlIG1jbWMgc2FtcGxpbmdcbiAgICogbG9vcC5cbiAgICovXG4gIHZhciBjbG9uZV9wYXJhbV9kcmF3ID0gZnVuY3Rpb24oeCkge1xuICAgIGlmKEFycmF5LmlzQXJyYXkoeCkpIHtcbiAgICAgIGlmKEFycmF5LmlzQXJyYXkoeFswXSkpIHtcbiAgICAgICAgLy8geCBpcyBhbiBhcnJheSBvZiBhcnJheXMgc28gd2UgbmVlZCB0byBjbG9uZSBpdCByZWN1cnNpdmVseVxuICAgICAgICB2YXIgeF9jb3B5ID0gW107XG4gICAgICAgIGZvcih2YXIgaSA9IDAsIGxlbmd0aCA9IHgubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB4X2NvcHkucHVzaChjbG9uZV9wYXJhbV9kcmF3KHhbaV0pKTtcbiAgICAgICAgfSBcbiAgICAgICAgcmV0dXJuIHhfY29weTtcbiAgICAgIH0gZWxzZSB7IC8vIFdlJ2xsIGFzc3VtZSB4IGlzIGEgYXJyYXlzIG9mIHNjYWxhcnNcbiAgICAgICAgcmV0dXJuIHguc2xpY2UoMCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHsgLy8gV2UnbGwgYXNzdW1lIHggaXMgYSBzY2FsYXJcbiAgICAgIHJldHVybiB4O1xuICAgIH1cbiAgfTtcbiAgXG4gIC8qKiBSZXR1cm5zIHRydWUgaWYgb2JqZWN0IGlzIGEgbnVtYmVyLlxuICAgKi9cbiAgdmFyIGlzX251bWJlciA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiBvYmplY3QgPT0gXCJudW1iZXJcIiB8fCAodHlwZW9mIG9iamVjdCA9PSBcIm9iamVjdFwiICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gTnVtYmVyKTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhIChwb3NzaWJseSBtdWx0aWRpbWVuc2lvbmFsL25lc3RlZCkgYXJyYXkuXG4gICAqIEBwYXJhbSBkaW0gLSBBbiBhcnJheSBnaXZpbmcgdGhlIGRpbWVuc2lvbiBvZiB0aGUgYXJyYXkuIEZvciBleGFtcGxlLFxuICAgKiAgIFs1XSB3b3VsZCB5aWVsZCBhIDUgZWxlbWVudCBhcnJheSwgYW5kIFszLDNdIHdvdWxkIHlpZWxkIGEgMyBieSAzIG1hdHJpeC5cbiAgICogQHBhcmFtIGluaXQgLSBBIHZhbHVlIG9yIGEgZnVuY3Rpb24gdXNlZCB0byBmaWxsIGluIHRoZSBlYWNoIGVsZW1lbnQgaW5cbiAgICogICB0aGUgYXJyYXkuIElmIGl0IGlzIGEgZnVuY3Rpb24gaXQgc2hvdWxkIHRha2Ugbm8gYXJndW1lbnRzLCBpdCB3aWxsIGJlIFxuICAgKiAgIGV2YWx1YXRlZCBvbmNlIGZvciBlYWNoIGVsZW1lbnQsIGFuZCBpdCdzIHJldHVybiB2YWx1ZSB3aWxsIGJlIHVzZWQgdG9cbiAgICogICBmaWxsIGluIGVhY2ggZWxlbWVudC5cbiAgICogQGV4YW1wbGUgXG4gICAqIC8vIFRoZSBmb2xsb3dpbmcgd291bGQgcmV0dXJuIFtbMSwxXSxbMSwxXSxbMSwxXV1cbiAgICogY3JlYXRlX2FycmF5KFsyLDNdLCAxKVxuICAgKi9cbiAgdmFyIGNyZWF0ZV9hcnJheSA9IGZ1bmN0aW9uKGRpbSwgaW5pdCkge1xuICAgIHZhciBhcnIgPSBuZXcgQXJyYXkoZGltWzBdKTtcbiAgICB2YXIgaTtcbiAgICBpZihkaW0ubGVuZ3RoID09IDEpIHsgLy8gRmlsbCBpdCB1cCB3aXRoIGluaXRcbiAgICAgIGlmKHR5cGVvZiBpbml0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgICBhcnJbaV0gPSBpbml0KCk7XG4gICAgICAgIH0gIFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgICBhcnJbaV0gPSBpbml0O1xuICAgICAgICB9IFxuICAgICAgfVxuICAgIH0gZWxzZSBpZihkaW0ubGVuZ3RoID4gMSkge1xuICAgICAgZm9yKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgYXJyW2ldID0gY3JlYXRlX2FycmF5KGRpbS5zbGljZSgxKSwgaW5pdCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IFwiY3JlYXRlX2FycmF5IGNhbid0IGNyZWF0ZSBhIGRpbWVuc2lvbmxlc3MgYXJyYXlcIjtcbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGRpbWVuc2lvbnMgb2YgYSBwb3NzaWJseSBuZXN0ZWQgYXJyYXkgYXMgYW4gYXJyYXkuIEZvciBcbiAgICogZXhhbXBsZSwgYXJyYXlfZGltKCBbWzEsIDJdLCBbMSwgMl1dICkgc2hvdWxkIHJldHVybiBbMiwgMl1cbiAgICogQXNzdW1lcyB0aGF0IGFsbCBhcnJheXMgaW5zaWRlIGFub3RoZXIgYXJyYXkgYXJlIG9mIHRoZSBzYW1lIGxlbmd0aC5cbiAgICogQGV4YW1wbGVcbiAgICogLy8gU2hvdWxkIHJldHVybiBbNCwgMiwgMV1cbiAgICogYXJyYXlfZGltKGNyZWF0ZV9hcnJheShbNCwgMiwgMV0sIDApKVxuICAgKi9cbiAgdmFyIGFycmF5X2RpbSA9IGZ1bmN0aW9uKGEpIHtcbiAgICBpZihBcnJheS5pc0FycmF5KGFbMF0pKSB7XG4gICAgICByZXR1cm4gW2EubGVuZ3RoXS5jb25jYXQoYXJyYXlfZGltKGFbMF0pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFthLmxlbmd0aF07XG4gICAgfVxuICB9O1xuICBcbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0d28gYXJyYXlzIGFyZSBlcXVhbCBpbiB0aGUgc2Vuc2UgdGhhdCB0aGV5IGNvbnRhaW4gdGhlIHNhbWUgZWxlbWVudHNcbiAgICogYXMganVkZ2VkIGJ5IHRoZSBcIj09XCIgb3BlcmF0b3IuIFJldHVybnMgdHJ1ZSBvciBmYWxzZS5cbiAgICogQWRhcHRlZCBmcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE0ODUzOTc0LzEwMDE4NDhcbiAgICovIFxuICB2YXIgYXJyYXlfZXF1YWwgPSBmdW5jdGlvbiAoYTEsIGEyKSB7XG4gICAgICBpZiAoYTEubGVuZ3RoICE9IGEyLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhMS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgbmVzdGVkIGFycmF5c1xuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGExW2ldKSAmJiBBcnJheS5pc0FycmF5KGEyW2ldKSkge1xuICAgICAgICAgICAgICAvLyByZWN1cnNlIGludG8gdGhlIG5lc3RlZCBhcnJheXNcbiAgICAgICAgICAgICAgaWYgKCFhcnJheV9lcXVhbChhMVtpXSwgYTJbaV0pKSByZXR1cm4gZmFsc2U7ICAgICAgIFxuICAgICAgICAgIH0gICAgICAgICAgIFxuICAgICAgICAgIGVsc2UgaWYgKGExW2ldICE9IGEyW2ldKSB7IFxuICAgICAgICAgICAgICAvLyBXYXJuaW5nIC0gdHdvIGRpZmZlcmVudCBvYmplY3QgaW5zdGFuY2VzIHdpbGwgbmV2ZXIgYmUgZXF1YWw6IHt4OjIwfSAhPSB7eDoyMH1cbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAgIFxuICAgICAgICAgIH0gICAgICAgICAgIFxuICAgICAgfSAgICAgICBcbiAgICAgIHJldHVybiB0cnVlO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFRyYXZlcnNlcyBhIHBvc3NpYmx5IG5lc3RlZCBhcnJheSBhIGFuZCBhcHBsaWVzIGZ1biB0byBhbGwgXCJsZWFmIG5vZGVzXCIsIFxuICAgKiB0aGF0IGlzLCB2YWx1ZXMgdGhhdCBhcmUgbm90IGFycmF5cy4gUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgc2FtZSBzaXplIGFzXG4gICAqIGEuXG4gICAqL1xuICB2YXIgbmVzdGVkX2FycmF5X2FwcGx5ID0gZnVuY3Rpb24oYSwgZnVuKSB7XG4gICAgaWYoQXJyYXkuaXNBcnJheShhKSkge1xuICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheShhLmxlbmd0aCk7XG4gICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgICByZXN1bHRbaV0gPSBuZXN0ZWRfYXJyYXlfYXBwbHkoYVtpXSwgZnVuKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmdW4oYSk7XG4gICAgfVxuICB9O1xuICBcbiAgLyoqIFJhbmRvbWl6aW5nIHRoZSBhcnJheSBlbGVtZW50IG9yZGVyIGluLXBsYWNlLiBVc2luZyBEdXJzdGVuZmVsZFxuICAgKiBzaHVmZmxlIGFsZ29yaXRobS4gQWRhcHRlZCBmcm9tIGhlcmU6IFxuICAgKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMjY0Njg2NC8xMDAxODQ4XG4gICAqL1xuICBmdW5jdGlvbiBzaHVmZmxlX2FycmF5KGFycmF5KSB7XG4gICAgICBmb3IgKHZhciBpID0gYXJyYXkubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xuICAgICAgICAgIHZhciBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XG4gICAgICAgICAgdmFyIHRlbXAgPSBhcnJheVtpXTtcbiAgICAgICAgICBhcnJheVtpXSA9IGFycmF5W2pdO1xuICAgICAgICAgIGFycmF5W2pdID0gdGVtcDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnJheTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIERvZXMgdGhlIHNhbWUgdGhpbmcgYXMgbmVzdGVkX2FycmF5X2FwcGx5LCB0aGF0IGlzLCB0cmF2ZXJzZXMgYSBwb3NzaWJseVxuICAgKiBuZXN0ZWQgYXJyYXkgYSBhbmQgYXBwbGllcyBmdW4gdG8gYWxsIFwibGVhZiBub2Rlc1wiIGFuZCByZXR1cm5zIGFuIGFycmF5IFxuICAgKiBvZiB0aGUgc2FtZSBzaXplIGFzIGEuIFRoZSBkaWZmZXJlbmNlIGlzIHRoYXQgbmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseVxuICAgKiBicmFuY2hlcyByYW5kb21seS5cbiAgICovXG4gIHZhciBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5ID0gZnVuY3Rpb24oYSwgZnVuKSB7XG4gICAgaWYoQXJyYXkuaXNBcnJheShhKSkge1xuICAgICAgdmFyIGxlbiA9IGEubGVuZ3RoO1xuICAgICAgdmFyIGk7XG4gICAgICB2YXIgYXJyYXlfaXMgPSBbXTtcbiAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGFycmF5X2lzW2ldID0gaTtcbiAgICAgIH1cbiAgICAgIHNodWZmbGVfYXJyYXkoYXJyYXlfaXMpO1xuICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgXG4gICAgICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgYXJyYXlfaSA9IGFycmF5X2lzW2ldO1xuICAgICAgICByZXN1bHRbYXJyYXlfaV0gPSBuZXN0ZWRfYXJyYXlfYXBwbHkoYVthcnJheV9pXSwgZnVuKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmdW4oYSk7XG4gICAgfVxuICB9O1xuICBcbiAgLyoqXG4gICAqIEFsbG93cyBhIHByZXR0eSB3YXkgb2Ygc2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgd2hlcmUgdGhlIGRlZnVsdHMgY2FuIGJlXG4gICAqIG92ZXJyaWRkZW4gYnkgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAqICBAcGFyYW0gb3B0aW9uX25hbWUgLSB0aGUgbmFtZSBvZiB0aGUgb3B0aW9uIGFzIGEgc3RyaW5nXG4gICAqICBAcGFyYW0gbXlfb3B0aW9ucyAtIGFuIG9wdGlvbiBvYmplY3QgdGhhdCBjb3VsZCBoYXZlIG9wdGlvbl9uYW1lIFxuICAgKiAgICBhcyBhIG1lbWJlci5cbiAgICogQHBhcmFtIGRlZmF1bF92YWx1ZSAtIGRlZnVsdCB2YWx1ZSB0aGF0IGlzIHJldHVybmVkIGlmIG9wdGlvbl9uYW1lIFxuICAgKiAgIGlzIG5vdCBkZWZpbmVkIGluIG15X29wdGlvbnMuXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBteV9vcHRpb25zID0ge3BpOiAzLjE0MTU5fVxuICAgKiB2YXIgcGkgPSBnZXRfb3B0aW9uKFwicGlcIiwgbXlfb3B0aW9ucywgMy4xNClcbiAgICovXG4gIC8vIFByZXR0eSB3YXkgb2Ygc2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgd2hlcmUgdGhlIGRlZmF1bHRzIGNhbiBiZSBvdmVycmlkZGVuXG4gIC8vIGJ5IGFuIG9wdGlvbnMgb2JqZWN0LiBGb3IgZXhhbXBsZTpcbiAgLy8gdmFyIHBpID0gZ2V0X29wdGlvbihcInBpXCIsIG15X29wdGlvbnMsIDMuMTQpXG4gIHZhciBnZXRfb3B0aW9uID0gZnVuY3Rpb24ob3B0aW9uX25hbWUsIG9wdGlvbnMsIGRlZmF1bF92YWx1ZSkge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHJldHVybiBvcHRpb25zLmhhc093blByb3BlcnR5KG9wdGlvbl9uYW1lKSAmJiBcbiAgICAgICAgICAgb3B0aW9uc1tvcHRpb25fbmFtZV0gIT09IHVuZGVmaW5lZCAgJiYgXG4gICAgICAgICAgIG9wdGlvbnNbb3B0aW9uX25hbWVdICE9PSBudWxsID8gb3B0aW9uc1tvcHRpb25fbmFtZV0gOiBkZWZhdWxfdmFsdWU7XG4gIH07XG4gIFxuICAvKiogVmVyc2lvbiBvZiBnZXRfb3B0aW9uIHdoZXJlIHRoZSBvcHRpb24gc2hvdWxkIGJlIGEgb25lIG9yIG11bHRpLWRpbWVuc2lvbmFsXG4gICAqIGFycmF5IGFuZCB3aGVyZSB0aGUgZGVmYXVsdCBjYW4gYmUgb3ZlcnJpZGRlbiBlaXRoZXIgYnkgYSBzY2FsYXIgb3IgYnkgYW4gYXJyYXkuXG4gICAqIElmIGl0J3MgYSBzY2FsYXIgdGhlIHRoYXQgc2NhbGFyIGlzIHVzZWQgdG8gaW5pdGlhbGl6ZSBhbiBhcnJheSB3aXRoIFxuICAgKiBkaW0gZGltZW5zaW9ucy5cbiAgICogXG4gICAqL1xuICB2YXIgZ2V0X211bHRpZGltX29wdGlvbiA9IGZ1bmN0aW9uKG9wdGlvbl9uYW1lLCBvcHRpb25zLCBkaW0sIGRlZmF1bF92YWx1ZSkge1xuICAgIHZhciB2YWx1ZSA9IGdldF9vcHRpb24ob3B0aW9uX25hbWUsIG9wdGlvbnMsIGRlZmF1bF92YWx1ZSk7XG4gICAgIGlmKCEgQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICB2YWx1ZSA9IGNyZWF0ZV9hcnJheShkaW0sIHZhbHVlKTtcbiAgICAgfSBcbiAgICAgaWYoISBhcnJheV9lcXVhbCggYXJyYXlfZGltKHZhbHVlKSwgZGltKSkge1xuICAgICAgIHRocm93IFwiVGhlIG9wdGlvbiBcIiArIG9wdGlvbl9uYW1lICsgXCIgaXMgb2YgZGltZW5zaW9uIFtcIiArIFxuICAgICAgICAgICAgIGFycmF5X2RpbSh2YWx1ZSkgKyBcIl0gYnV0IHNob3VsZCBiZSBbXCIgKyBkaW0gKyBcIl0uXCI7XG4gICAgfVxuICAgICByZXR1cm4gdmFsdWU7XG4gIH07XG4gIFxuICAvLy8vLy8vLy8vIEZ1bmN0aW9ucyBmb3IgaGFuZGxpbmcgcGFyYW1ldGVyIG9iamVjdHMgLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgLyoqXG4gICAqIFJldHVybnMgYSBmaXhlZCAoc2FtZSBldmVyeSB0aW1lKSBudW1iZXIgdGhhdCBjb3VsZCBiZSB1c2VkIHRvIGluaXRpYWxpemVcbiAgICogYSBwYXJhbWV0ZXIgb2YgYSBjZXJ0YWluIHR5cGUsIHBvc3NpYmx5IHdpdGggbG93ZXIgYW5kIHVwcGVyIGJvdW5kcy5cbiAgICogVGhlIHBvc3NpbGUgdHlwZXMgYXJlIFwicmVhbFwiLCBcImludFwiLCBhbmQgXCJiaW5hcnlcIi5cbiAgICovXG4gIHZhciBwYXJhbV9pbml0X2ZpeGVkID0gZnVuY3Rpb24odHlwZSwgbG93ZXIsIHVwcGVyKSB7XG4gICAgaWYobG93ZXIgPiB1cHBlcikge1xuICAgICAgdGhyb3cgXCJDYW4gbm90IGluaXRpYWxpemUgcGFyYW1ldGVyIHdoZXJlIGxvd2VyIGJvdW5kID4gdXBwZXIgYm91bmRcIjtcbiAgICB9XG4gICAgaWYodHlwZSA9PT0gXCJyZWFsXCIpIHtcbiAgICAgIGlmKGxvd2VyID09PSAtSW5maW5pdHkgJiYgdXBwZXIgPT09IEluZmluaXR5KSB7XG4gICAgICAgIHJldHVybiAwLjU7XG4gICAgICB9IGVsc2UgaWYobG93ZXIgPT09IC1JbmZpbml0eSkge1xuICAgICAgICByZXR1cm4gdXBwZXIgLSAwLjU7XG4gICAgICB9IGVsc2UgaWYodXBwZXIgPT09IEluZmluaXR5KSB7XG4gICAgICAgIHJldHVybiBsb3dlciArIDAuNTtcbiAgICAgIH0gZWxzZSBpZihsb3dlciA8PSB1cHBlcikge1xuICAgICAgICByZXR1cm4gKGxvd2VyICsgdXBwZXIpIC8gMjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYodHlwZSA9PT0gXCJpbnRcIikge1xuICAgICAgaWYobG93ZXIgPT09IC1JbmZpbml0eSAmJiB1cHBlciA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9IGVsc2UgaWYobG93ZXIgPT09IC1JbmZpbml0eSkge1xuICAgICAgICByZXR1cm4gdXBwZXIgLSAxO1xuICAgICAgfSBlbHNlIGlmKHVwcGVyID09PSBJbmZpbml0eSkge1xuICAgICAgICByZXR1cm4gbG93ZXIgKyAxO1xuICAgICAgfSBlbHNlIGlmKGxvd2VyIDw9IHVwcGVyKXtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoKGxvd2VyICsgdXBwZXIpIC8gMik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmKHR5cGUgPT09IFwiYmluYXJ5XCIpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICB0aHJvdyBcIkNvdWxkIG5vdCBpbml0aWFsaXplIHBhcmFtZXRlciBvZiB0eXBlIFwiICsgdHlwZSArIFwiW1wiICsgbG93ZXIgKyBcIiwgXCIgKyB1cHBlciArIFwiXVwiO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIENvbXBsZXRlcyBwYXJhbXNfdG9fY29tcGxldGUsIGFuIG9iamVjdCBjb250YWluaW5nIHBhcmFtZXRlciBkZXNjcmlwdGlvbnMsIFxuICAgKiBhbmQgaW5pdGlhbGl6ZXMgbm9uLWluaXRpYWxpemVkIHBhcmFtZXRlcnMuIFRoaXMgbW9kaWZpZWQgdmVyc2lvbiBvZlxuICAgKiBwYXJhbXNfdG9fY29tcGxldGUgaXMgcmV0dXJuZWQgYXMgYSBkZWVwIGNvcHkgYW5kIG5vdCBtb2RpZmllZCBpbiBwbGFjZS5cbiAgICogSW5pdGlhbGl6YXRpb24gaXMgZG9uZSBieSBzdXBwbHlpbmcgYSBwYXJhbV9pbml0IGZ1bmN0aW9uIHdpdGggc2lnbmF0dXJlXG4gICAqIGZ1bmN0aW9uKHR5cGUsIGxvd2VyLCB1cHBlcikgdGhhdCBzaG91bGQgcmV0dXJuIGEgc2luZ2xlIG51bWJlciBcbiAgICogKGxpa2UgcGFyYW1faW5pdF9maXhlZCwgZm9yIGV4YW1wbGUpLlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcGFyYW1zID0geyBcIm11XCI6IHtcInR5cGVcIjogXCJyZWFsXCJ9IH1cbiAgICogcGFyYW1zID0gY29tcGxldGVfcGFyYW1zKHBhcmFtcyk7XG4gICAqIC8vIHBhcmFtcyBzaG91bGQgbm93IGJlOlxuICAgKiAvLyAge1wibXVcIjogeyBcInR5cGVcIjogXCJyZWFsXCIsIFwiZGltXCI6IFsxXSwgXCJ1cHBlclwiOiBJbmZpbml0eSxcbiAgICogLy8gICAgICAgICAgIFwibG93ZXJcIjogLUluZmluaXR5LCBcImluaXRcIjogMC41IH19XG4gICAqLyBcbiAgdmFyIGNvbXBsZXRlX3BhcmFtcyAgPSBmdW5jdGlvbihwYXJhbXNfdG9fY29tcGxldGUsIHBhcmFtX2luaXQpIHtcbiAgICB2YXIgcGFyYW1zID0gZGVlcF9jbG9uZShwYXJhbXNfdG9fY29tcGxldGUpO1xuICAgIGZvciAodmFyIHBhcmFtX25hbWUgaW4gcGFyYW1zKSB7IGlmICghcGFyYW1zLmhhc093blByb3BlcnR5KHBhcmFtX25hbWUpKSBjb250aW51ZTtcbiAgICAgIHZhciBwYXJhbSA9IHBhcmFtc1twYXJhbV9uYW1lXTtcbiAgICAgIGlmKCAhcGFyYW0uaGFzT3duUHJvcGVydHkoXCJ0eXBlXCIpKSB7XG4gICAgICAgIHBhcmFtLnR5cGUgPSBcInJlYWxcIjtcbiAgICAgIH1cbiAgICAgIGlmKCFwYXJhbS5oYXNPd25Qcm9wZXJ0eShcImRpbVwiKSkge1xuICAgICAgICBwYXJhbS5kaW0gPSBbMV07XG4gICAgICB9XG4gICAgICBpZihpc19udW1iZXIocGFyYW0uZGltKSkge1xuICAgICAgICBwYXJhbS5kaW0gPSBbcGFyYW0uZGltXTtcbiAgICAgIH1cbiAgICAgIGlmKHBhcmFtLnR5cGUgPT0gXCJiaW5hcnlcIikge1xuICAgICAgICBwYXJhbS51cHBlciA9IDE7XG4gICAgICAgIHBhcmFtLmxvd2VyID0gMDtcbiAgICAgIH1cbiAgICAgIGlmKCFwYXJhbS5oYXNPd25Qcm9wZXJ0eShcInVwcGVyXCIpKSB7XG4gICAgICAgIHBhcmFtLnVwcGVyID0gSW5maW5pdHk7XG4gICAgICB9XG4gICAgICBpZighcGFyYW0uaGFzT3duUHJvcGVydHkoXCJsb3dlclwiKSkge1xuICAgICAgICBwYXJhbS5sb3dlciA9IC1JbmZpbml0eTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYocGFyYW0uaGFzT3duUHJvcGVydHkoXCJpbml0XCIpKSB7XG4gICAgICAgIC8vIElmIHRoaXMgaXMganVzdCBhIG51bWJlciBvciBhIG5lc3RlZCBhcnJheSB3ZSBsZWF2ZSBpdCBhbG9uZSwgYnV0IGlmLi4uXG4gICAgICAgIGlmKGFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSAmJiB0eXBlb2YgcGFyYW0uaW5pdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgLy8gcGFyYW0uaW5pdCBpcyBhIGZ1bmN0aW9uLCB1c2UgdGhhdCB0byBpbml0aWFsaXplIHRoZSBwYXJhbWV0ZXIuXG4gICAgICAgICAgcGFyYW0uaW5pdCA9IHBhcmFtLmluaXQoKTtcbiAgICAgICAgfSBlbHNlIGlmKCFhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgIUFycmF5LmlzQXJyYXkocGFyYW0uaW5pdCkpIHtcbiAgICAgICAgLy8gV2UgaGF2ZSBhIG11bHRpZGltZW5zaW9uYWwgcGFyYW1ldGVyIHdoZXJlIHRoZSBwYXJhbS5pbml0IGV4aXN0IGJ1dFxuICAgICAgICAvLyBpcyBub3QgYW4gYXJyYXkuIFRoZW4gYXNzdW1lIGl0IGlzIGEgbnVtYmVyIG9yIGEgZnVuY3Rpb24gYW5kIHVzZVxuICAgICAgICAvLyBpdCB0byBpbml0aWFsaXplIHRoZSBwYXJhbWV0ZXIuXG4gICAgICAgIHBhcmFtLmluaXQgPSBjcmVhdGVfYXJyYXkocGFyYW0uZGltLCBwYXJhbS5pbml0KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHsgLy8gV2UgdXNlIHRoZSBkZWZhdWx0IGluaXRpYWxpemF0aW9uIGZ1bmN0aW9uLlxuICAgICAgICBpZihhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHtcbiAgICAgICAgICBwYXJhbS5pbml0ID0gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhcmFtLmluaXQgPSBjcmVhdGVfYXJyYXkocGFyYW0uZGltLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJhbV9pbml0KHBhcmFtLnR5cGUsIHBhcmFtLmxvd2VyLCBwYXJhbS51cHBlcik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfTtcbiAgXG4gIFxuICAvLy8vLy8vLy8vIFN0ZXBwZXIgRnVuY3Rpb25zIC8vLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgXG4gIFxuICAvKipcbiAgICogQGludGVyZmFjZVxuICAgKiBBIFN0ZXBwZXIgaXMgYW4gb2JqZWN0IHJlc3BvbnNpYmxlIGZvciBwdXNoaW5nIGFyb3VuZCBvbmVcbiAgICogb3IgbW9yZSBwYXJhbWV0ZXIgdmFsdWVzIGluIGEgc3RhdGUgYWNjb3JkaW5nIHRvIHRoZSBkaXN0cmlidXRpb25cbiAgICogZGVmaW5lZCBieSB0aGUgbG9nIHBvc3Rlcmlvci4gVGhpcyBkZWZpbmVzIHRoZSBTdGVwcGVyIFwiaW50ZXJmYWNlXCIsXG4gICAqIHdoZXJlIFwiaW50ZXJmYWNlXCIgbWVhbnMgdGhhdCBTdGVwcGVyIGRlZmluZXMgYSBjbGFzcyB0aGF0IGlzIG5ldmVyXG4gICAqIG1lYW50IHRvIGJlIGluc3RhbnRpYXRlZCwgYnV0IGp1c3QgdG8gYmUgc3ViY2xhc3NlZCBieSBzcGVjaWFsaXplZFxuICAgKiBzdGVwcGVyIGZ1bmN0aW9ucy5cbiAgICogQGludGVyZmFjZVxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggcGFyYW1ldGVyIGRlZmluaXRpb25zLCBmb3IgZXhhbXBsZTpcbiAgICogICB7XCJtdVwiOiB7IFwidHlwZVwiOiBcInJlYWxcIiwgXCJkaW1cIjogWzFdLCBcInVwcGVyXCI6IEluZmluaXR5LCBcbiAgICogICBcImxvd2VyXCI6IC1JbmZpbml0eSwgXCJpbml0XCI6IDAuNSB9fVxuICAgKiAgIFRoZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMgYXJlIGV4cGVjdGVkIHRvIGJlIFwiY29tcGxldGVcIiwgdGhhdCBpcyxcbiAgICogICBzcGVjaWZ5aW5nIGFsbCByZWxldmFudCBhdHRyaWJ1dGVzIHN1Y2ggYXMgZGltLCBsb3dlciBhbmQgdXBwZXIuXG4gICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycyBpbiBwYXJhbXNcbiAgICogICAoYW5kIHBvc3NpYmx5IG1vcmUpLiBUaGUgcGFyYW1ldGVyIG5hbWVzIGFyZSBnaXZlbiBhcyBrZXlzIGFuZCB0aGUgc3RhdGVzXG4gICAqICAgYXMgc2NhbGFycyBvciwgcG9zc2libHkgbmVzdGVkLCBhcnJheXMuIEZvciBleGFtcGxlOlxuICAgKiAgIHttdTogMTAsIHNpZ21hOiA1LCBiZXRhOiBbMSwgMi41XX1cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiAqdGFraW5nIG5vIHBhcmFtZXRlcnMqIHRoYXQgcmV0dXJucyB0aGVcbiAgICogICBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBUaGF0IGlzLCB0aGUgdmFsdWUgb2YgbG9nX3Bvc3RcbiAgICogICBzaG91bGQgY2hhbmdlIGlmIHRoZSB0aGUgdmFsdWVzIGluIHN0YXRlIGFyZSBjaGFuZ2VkLlxuICBcbiAgICovXG4gIHZhciBTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpIHtcbiAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5sb2dfcG9zdCA9IGxvZ19wb3N0O1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFRha2VzIGEgc3RlcCBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlLiBTaG91bGQgcmV0dXJuIHRoZSBuZXcgc3RhdGUsXG4gICAqIGJ1dCBpcyBtYWlubHkgY2FsbGVkIGZvciBpdCdzIHNpZGUgZWZmZWN0IG9mIG1ha2luZyBhIGNoYW5nZSBpbiB0aGVcbiAgICogc3RhdGUgb2JqZWN0LlxuICAgKi9cbiAgU3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgIHRocm93IFwiRXZlcnkgU3RlcHBlciBuZWVkIHRvIGltcGxlbWVudCBzdGVwKClcIjtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBJZiBpbXBsZW1lbnRlZCwgbWFrZXMgdGhlIHN0ZXBwZXIgYWRhcHQgd2hpbGUgc3RlcHBpbmcuXG4gICAqLyBcbiAgU3RlcHBlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIE9wdGlvbmFsLCBzb21lIHN0ZXBwZXJzIG1pZ2h0IG5vdCBiZSBhZGFwdGl2ZS4gKi8gXG4gIH07XG4gIFxuICAvKipcbiAgICogSWYgaW1wbGVtZW50ZWQsIG1ha2VzIHRoZSBzdGVwcGVyIGNlYXNlIGFkYXB0aW5nIHdoaWxlIHN0ZXBwaW5nLlxuICAgKi8gXG4gIFN0ZXBwZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIE9wdGlvbmFsLCBzb21lIHN0ZXBwZXJzIG1pZ2h0IG5vdCBiZSBhZGFwdGl2ZS4gKi8gXG4gIH07XG4gIFxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYmplY3QgY29udGFpbmcgaW5mbyByZWdhcmRpbmcgdGhlIHN0ZXBwZXIuXG4gICAqLyBcbiAgU3RlcHBlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIFJldHVybnMgYW4gb2JqZWN0IHdpdGggaW5mbyBhYm91dCB0aGUgc3RhdGUgb2YgdGhlIHN0ZXBwZXIuXG4gICAgcmV0dXJuIHt9O1xuICB9O1xuICBcbiAgXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGltcGxlbWVudHMge1N0ZXBwZXJ9XG4gICAqIENvbnN0cnVjdG9yIGZvciBhbiBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIHRoZSBtZXRyb3BvbGlzIHN0ZXAgaW5cbiAgICogdGhlIEFkYXB0aXZlIE1ldHJvcG9saXMtV2l0aGluLUdpYmJzIGFsZ29yaXRobSBpbiBcIkV4YW1wbGVzIG9mIEFkYXB0aXZlIE1DTUNcIlxuICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpLlxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBzaW5nbGUgcGFyYW1ldGVyIGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy5cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIFxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuXG4gICAqIEBwYXJhbSBnZW5lcmF0ZV9wcm9wb3NhbCAtIGEgZnVuY3Rpb24gcmV0dXJuaW5nIGEgcHJvcG9zYWwgKGFzIGEgbnVtYmVyKVxuICAgKiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihwYXJhbV9zdGF0ZSwgbG9nX3NjYWxlKSB3aGVyZSBwYXJhbV9zdGF0ZSBpcyBhXG4gICAqIG51bWJlciBhbmQgbG9nX3NjYWxlIGRlZmluZXMgdGhlIHNjYWxlIG9mIHRoZSBwcm9wb3NhbCBzb21laG93LlxuICAqL1xuICB2YXIgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgZ2VuZXJhdGVfcHJvcG9zYWwpIHtcbiAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpO1xuICAgIFxuICAgIHZhciBwYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTtcbiAgICBpZihwYXJhbV9uYW1lcy5sZW5ndGggICE9IDEpIHtcbiAgICAgIHRocm93IFwiT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgY2FuIG9ubHkgaGFuZGxlIG9uZSBwYXJhbWV0ZXIuXCI7XG4gICAgfVxuICAgIHRoaXMucGFyYW1fbmFtZSA9IHBhcmFtX25hbWVzWzBdO1xuICAgIHZhciBwYXJhbSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZV07XG4gICAgaWYoIWFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkge1xuICAgICAgdGhyb3cgXCJPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBjYW4gb25seSBoYW5kbGUgb25lIG9uZS1kaW1lbnNpb25hbCBwYXJhbWV0ZXIuXCI7XG4gICAgfVxuICAgIHRoaXMubG93ZXIgPSBwYXJhbS5sb3dlcjtcbiAgICB0aGlzLnVwcGVyID0gcGFyYW0udXBwZXI7XG4gICAgXG4gICAgdGhpcy5wcm9wX2xvZ19zY2FsZSAgICAgPSBnZXRfb3B0aW9uKFwicHJvcF9sb2dfc2NhbGVcIiwgb3B0aW9ucywgMCk7XG4gICAgdGhpcy5iYXRjaF9zaXplICAgICAgICAgPSBnZXRfb3B0aW9uKFwiYmF0Y2hfc2l6ZVwiLCBvcHRpb25zLCA1MCk7XG4gICAgdGhpcy5tYXhfYWRhcHRhdGlvbiAgICAgPSBnZXRfb3B0aW9uKFwibWF4X2FkYXB0YXRpb25cIiwgb3B0aW9ucywgMC4zMyk7XG4gICAgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24gPSBnZXRfb3B0aW9uKFwiaW5pdGlhbF9hZGFwdGF0aW9uXCIsIG9wdGlvbnMsIDEuMCk7XG4gICAgdGhpcy50YXJnZXRfYWNjZXB0X3JhdGUgPSBnZXRfb3B0aW9uKFwidGFyZ2V0X2FjY2VwdF9yYXRlXCIsIG9wdGlvbnMsIDAuNDQpO1xuICAgIHRoaXMuaXNfYWRhcHRpbmcgICAgICAgID0gZ2V0X29wdGlvbihcImlzX2FkYXB0aW5nXCIsIG9wdGlvbnMsIHRydWUpO1xuICAgIFxuICAgIHRoaXMuZ2VuZXJhdGVfcHJvcG9zYWwgPSBnZW5lcmF0ZV9wcm9wb3NhbDtcbiAgICBcbiAgICB0aGlzLmFjY2VwdGFuY2VfY291bnQgPSAwO1xuICAgIHRoaXMuYmF0Y2hfY291bnQgPSAwO1xuICAgIHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiA9IDA7ICBcbiAgfTtcbiAgXG4gIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gT25lZGltTWV0cm9wb2xpc1N0ZXBwZXI7XG4gIFxuICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhcmFtX3N0YXRlID0gdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdO1xuICAgICAgdmFyIHBhcmFtX3Byb3Bvc2FsID0gdGhpcy5nZW5lcmF0ZV9wcm9wb3NhbChwYXJhbV9zdGF0ZSwgdGhpcy5wcm9wX2xvZ19zY2FsZSk7XG4gICAgICBpZihwYXJhbV9wcm9wb3NhbCA8IHRoaXMubG93ZXIgfHwgcGFyYW1fcHJvcG9zYWwgPiB0aGlzLnVwcGVyKSB7XG4gICAgICAgIC8vIE91dHNpZGUgb2YgbGltaXRzIG9mIHRoZSBwYXJhbWV0ZXIsIHJlamVjdCB0aGUgcHJvcG9zYWwgXG4gICAgICAgIC8vIGFuZCBzdGF5IGF0IHRoZSBjdXJyZW50IHN0YXRlLlxuICAgICAgfSBlbHNlIHsgLy8gbWFrZSBhIE1ldHJvcG9saXMgc3RlcFxuICAgICAgICB2YXIgY3Vycl9sb2dfZGVucyA9IHRoaXMubG9nX3Bvc3QoKTtcbiAgICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gcGFyYW1fcHJvcG9zYWw7XG4gICAgICAgIHZhciBwcm9wX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpO1xuICAgICAgICB2YXIgYWNjZXB0X3Byb2IgPSBNYXRoLmV4cChwcm9wX2xvZ19kZW5zIC0gY3Vycl9sb2dfZGVucyk7XG4gICAgICAgIGlmKGFjY2VwdF9wcm9iID4gTWF0aC5yYW5kb20oKSkge1xuICAgICAgICAgIC8vIFdlIGRvIG5vdGhpbmcgYXMgdGhlIHN0YXRlIG9mIHBhcmFtIGhhcyBhbHJlYWR5IGJlZW4gY2hhbmdlZCB0byB0aGUgcHJvcG9zYWxcbiAgICAgICAgICBpZih0aGlzLmlzX2FkYXB0aW5nKSB0aGlzLmFjY2VwdGFuY2VfY291bnQrKyA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gcmV2ZXJ0IHN0YXRlIGJhY2sgdG8gdGhlIG9sZCBzdGF0ZSBvZiBwYXJhbVxuICAgICAgICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IHBhcmFtX3N0YXRlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZih0aGlzLmlzX2FkYXB0aW5nKSB7XG4gICAgICAgIHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiArKztcbiAgICAgICAgaWYodGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uID49IHRoaXMuYmF0Y2hfc2l6ZSkgeyAvLyB0aGVuIGFkYXB0XG4gICAgICAgICAgdGhpcy5iYXRjaF9jb3VudCArKztcbiAgICAgICAgICB2YXIgbG9nX3NkX2FkanVzdG1lbnQgPSBcbiAgICAgICAgICAgIE1hdGgubWluKHRoaXMubWF4X2FkYXB0YXRpb24sIFxuICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24gLyBNYXRoLnNxcnQodGhpcy5iYXRjaF9jb3VudCkpO1xuICAgICAgICAgIGlmKHRoaXMuYWNjZXB0YW5jZV9jb3VudCAvIHRoaXMuYmF0Y2hfc2l6ZSA+IHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BfbG9nX3NjYWxlICs9IGxvZ19zZF9hZGp1c3RtZW50O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnByb3BfbG9nX3NjYWxlIC09IGxvZ19zZF9hZGp1c3RtZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmFjY2VwdGFuY2VfY291bnQgPSAwO1xuICAgICAgICAgIHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiA9IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV07XG4gIH07XG4gIFxuICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaXNfYWRhcHRpbmcgPSB0cnVlO1xuICB9O1xuICBcbiAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaXNfYWRhcHRpbmcgPSBmYWxzZTtcbiAgfTtcbiAgXG4gIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb3BfbG9nX3NjYWxlOiB0aGlzLnByb3BfbG9nX3NjYWxlLFxuICAgICAgaXNfYWRhcHRpbmc6IHRoaXMuaXNfYWRhcHRpbmcsXG4gICAgICBhY2NlcHRhbmNlX2NvdW50OiB0aGlzLmFjY2VwdGFuY2VfY291bnQsXG4gICAgICBpdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uOiB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24sXG4gICAgICBiYXRjaF9jb3VudDogdGhpcy5iYXRjaF9jb3VudFxuICAgIH07XG4gIH07XG4gIFxuICBcbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHJldHVybmluZyBhIE5vcm1hbCBwcm9wb3NhbC5cbiAgICovXG4gIHZhciBub3JtYWxfcHJvcG9zYWwgPSBmdW5jdGlvbihwYXJhbV9zdGF0ZSwgcHJvcF9sb2dfc2NhbGUpIHtcbiAgICByZXR1cm4gcm5vcm0ocGFyYW1fc3RhdGUgLCBNYXRoLmV4cChwcm9wX2xvZ19zY2FsZSkpO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAYXVnbWVudHMge09uZWRpbU1ldHJvcG9saXNTdGVwcGVyfVxuICAgKiBBIFwic3ViY2xhc3NcIiBvZiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgY29udGlub3VzIE5vcm1hbCBwcm9wb3NhbHMuXG4gICAqL1xuICB2YXIgUmVhbE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHtcbiAgICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBub3JtYWxfcHJvcG9zYWwpO1xuICB9O1xuICBcbiAgUmVhbE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsgXG4gIFJlYWxNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBSZWFsTWV0cm9wb2xpc1N0ZXBwZXI7XG4gIFxuICAvKipcbiAgICogRnVuY3Rpb24gcmV0dXJuaW5nIGEgZGlzY3JldGl6ZWQgTm9ybWFsIHByb3Bvc2FsLlxuICAgKi9cbiAgdmFyIGRpc2NyZXRlX25vcm1hbF9wcm9wb3NhbCA9IGZ1bmN0aW9uKHBhcmFtX3N0YXRlLCBwcm9wX2xvZ19zY2FsZSkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKHJub3JtKHBhcmFtX3N0YXRlICwgTWF0aC5leHAocHJvcF9sb2dfc2NhbGUpKSk7XG4gIH07XG4gIFxuICAgIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGF1Z21lbnRzIHtPbmVkaW1NZXRyb3BvbGlzU3RlcHBlcn1cbiAgICogQSBcInN1YmNsYXNzXCIgb2YgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgbWFraW5nIGRpc2NyZXRpemVkIE5vcm1hbCBwcm9wb3NhbHMuXG4gICAqL1xuICB2YXIgSW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIGRpc2NyZXRlX25vcm1hbF9wcm9wb3NhbCk7XG4gIH07XG4gIFxuICBJbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBJbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBJbnRNZXRyb3BvbGlzU3RlcHBlcjtcbiAgXG4gIFxuICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfVxuICAgKiBDb25zdHJ1Y3RvciBmb3IgYW4gb2JqZWN0IHRoYXQgaW1wbGVtZW50cyB0aGUgbWV0cm9wb2xpcyBzdGVwIGluXG4gICAqIHRoZSBBZGFwdGl2ZSBNZXRyb3BvbGlzLVdpdGhpbi1HaWJicyBhbGdvcml0aG0gaW4gXCJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DXCJcbiAgICogYnkgUm9iZXJ0cyBhbmQgUm9zZW50aGFsICgyMDA4KSBmb3IgcG9zc2libHkgbXVsdGlkaW1lbnNpb25hbCBhcnJheXMuIFRoYXRcbiAgICogaXMsIGluc3RlYWQgb2YganVzdCB0YWtpbmcgYSBzdGVwIGZvciBhIG9uZS1kaW1lbnNpb25hbCBwYXJhbWV0ZXIgbGlrZSBcbiAgICogT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIsIHRoaXMgU3RlcHBlciBpcyByZXNwb25zaWJsZSBmb3IgdGFraW5nIHN0ZXBzIFxuICAgKiBmb3IgYSBtdWx0aWRpbWVuc2lvbmFsIGFycmF5LiBJdCdzIHN0aWxsIHByZXR0eSBkdW1iIGFuZCBqdXN0IHRha2VzXG4gICAqIG9uZS1kaW1lbnNpb25hbCBzdGVwcyBmb3IgZWFjaCBwYXJhbWV0ZXIgY29tcG9uZW50LCB0aG91Z2guXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbiBmb3IgYSBcbiAgICogICBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlci5cbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci5cbiAgICogQHBhcmFtIFN1YlN0ZXBwZXIgLSBhIGNvbnN0cnVjdG9yIGZvciB0aGUgdHlwZSBvZiBvbmUgZGltZW5zaW9uYWwgU3RlcHBlciB0byBhcHBseSBvblxuICAgKiAgIGFsbCB0aGUgY29tcG9uZW50cyBvZiB0aGUgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIuXG4gICovXG4gIHZhciBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIFN1YlN0ZXBwZXIpIHtcbiAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpO1xuICAgIFxuICAgIHZhciBwYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTtcbiAgICBpZihwYXJhbV9uYW1lcy5sZW5ndGggICE9IDEpIHtcbiAgICAgIHRocm93IFwiTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciBjYW4ndCBoYW5kbGUgbW9yZSB0aGFuIG9uZSBwYXJhbWV0ZXIuXCI7XG4gICAgfVxuICAgIHRoaXMucGFyYW1fbmFtZSA9IHBhcmFtX25hbWVzWzBdO1xuICAgIHZhciBwYXJhbSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZV07XG4gICAgdGhpcy5sb3dlciA9IHBhcmFtLmxvd2VyO1xuICAgIHRoaXMudXBwZXIgPSBwYXJhbS51cHBlcjtcbiAgICB0aGlzLmRpbSA9IHBhcmFtLmRpbTtcbiAgXG4gICAgdGhpcy5wcm9wX2xvZ19zY2FsZSAgICAgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKFwicHJvcF9sb2dfc2NhbGVcIiwgb3B0aW9ucywgdGhpcy5kaW0sIDApO1xuICAgIHRoaXMuYmF0Y2hfc2l6ZSAgICAgICAgID0gZ2V0X211bHRpZGltX29wdGlvbihcImJhdGNoX3NpemVcIiwgb3B0aW9ucywgdGhpcy5kaW0sIDUwKTtcbiAgICB0aGlzLm1heF9hZGFwdGF0aW9uICAgICA9IGdldF9tdWx0aWRpbV9vcHRpb24oXCJtYXhfYWRhcHRhdGlvblwiLCBvcHRpb25zLCB0aGlzLmRpbSwgMC4zMyk7XG4gICAgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24gPSBnZXRfbXVsdGlkaW1fb3B0aW9uKFwiaW5pdGlhbF9hZGFwdGF0aW9uXCIsIG9wdGlvbnMsIHRoaXMuZGltLCAxLjApO1xuICAgIHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlID0gZ2V0X211bHRpZGltX29wdGlvbihcInRhcmdldF9hY2NlcHRfcmF0ZVwiLCBvcHRpb25zLCB0aGlzLmRpbSwgMC40NCk7XG4gICAgdGhpcy5pc19hZGFwdGluZyAgICAgICAgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKFwiaXNfYWRhcHRpbmdcIiwgb3B0aW9ucywgdGhpcy5kaW0sIHRydWUpO1xuICAgIFxuICAgIC8vIFRoaXMgaGFjayBiZWxvdyBpcyBhIHJlY3Vyc2l2ZSBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMgYW4gYXJyYXkgb2YgXG4gICAgLy8gb25lIGRpbWVuc2lvbmFsIHN0ZXBwZXJzIGFjY29yZGluZyB0byBkaW0uXG4gICAgdmFyIGNyZWF0ZV9zdWJzdGVwcGVycyA9IFxuICAgICAgZnVuY3Rpb24oZGltLCBzdWJzdGF0ZSwgbG9nX3Bvc3QsIHByb3BfbG9nX3NjYWxlLCBiYXRjaF9zaXplLCBtYXhfYWRhcHRhdGlvbiwgaW5pdGlhbF9hZGFwdGF0aW9uLCB0YXJnZXRfYWNjZXB0X3JhdGUsIGlzX2FkYXB0aW5nKSB7XG4gICAgICB2YXIgc3Vic3RlcHBlcnMgPSBbXTtcbiAgICAgIGlmKGRpbS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7XG4gICAgICAgICAgdmFyIHN1Ym9wdGlvbnMgPSB7cHJvcF9sb2dfc2NhbGU6IHByb3BfbG9nX3NjYWxlW2ldLCBiYXRjaF9zaXplOiBiYXRjaF9zaXplW2ldLFxuICAgICAgICAgICAgbWF4X2FkYXB0YXRpb246IG1heF9hZGFwdGF0aW9uW2ldLCBpbml0aWFsX2FkYXB0YXRpb246IGluaXRpYWxfYWRhcHRhdGlvbltpXSxcbiAgICAgICAgICAgIHRhcmdldF9hY2NlcHRfcmF0ZTogdGFyZ2V0X2FjY2VwdF9yYXRlW2ldLCBpc19hZGFwdGluZzogaXNfYWRhcHRpbmdbaV19O1xuICAgICAgICAgICAgdmFyIHN1YnBhcmFtID0ge307XG4gICAgICAgICAgICBzdWJwYXJhbVtpXSA9IGRlZXBfY2xvbmUocGFyYW0pO1xuICAgICAgICAgICAgc3VicGFyYW1baV0uZGltID0gWzFdOyAvLyBBcyB0aGlzIHNob3VsZCBub3cgYmUgYSBvbmUtZGltIHBhcmFtZXRlclxuICAgICAgICAgICAgZGVsZXRlIHN1YnBhcmFtW2ldLmluaXQ7IC8vIEFzIGl0IHNvdWxkIG5vdCBiZSBuZWVkZWRcbiAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IG5ldyBTdWJTdGVwcGVyKHN1YnBhcmFtLCBzdWJzdGF0ZSwgbG9nX3Bvc3QsIHN1Ym9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IGNyZWF0ZV9zdWJzdGVwcGVycyhkaW0uc2xpY2UoMSksIHN1YnN0YXRlW2ldLCBsb2dfcG9zdCwgcHJvcF9sb2dfc2NhbGVbaV0sIFxuICAgICAgICAgICAgYmF0Y2hfc2l6ZVtpXSwgbWF4X2FkYXB0YXRpb25baV0sIGluaXRpYWxfYWRhcHRhdGlvbltpXSwgdGFyZ2V0X2FjY2VwdF9yYXRlW2ldLCBpc19hZGFwdGluZ1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzdWJzdGVwcGVycztcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc3Vic3RlcHBlcnMgPSBjcmVhdGVfc3Vic3RlcHBlcnModGhpcy5kaW0sIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSwgdGhpcy5sb2dfcG9zdCxcbiAgICAgIHRoaXMucHJvcF9sb2dfc2NhbGUsIHRoaXMuYmF0Y2hfc2l6ZSwgdGhpcy5tYXhfYWRhcHRhdGlvbiwgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24sXG4gICAgICB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSwgdGhpcy5pc19hZGFwdGluZyk7XG4gICAgXG4gIH07XG4gIFxuICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyO1xuICBcbiAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIEdvIHRocm91Z2ggdGhlIHN1YnN0ZXBwZXJzIGluIGEgcmFuZG9tIG9yZGVyIGFuZCBjYWxsIHN0ZXAoKSBvbiB0aGVtLlxuICAgIHJldHVybiBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uKHN1YnN0ZXBwZXIpIHtyZXR1cm4gc3Vic3RlcHBlci5zdGVwKCk7IH0pO1xuICB9O1xuICBcbiAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIG5lc3RlZF9hcnJheV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbihzdWJzdGVwcGVyKSB7c3Vic3RlcHBlci5zdGFydF9hZGFwdGF0aW9uKCk7IH0pO1xuICB9O1xuICBcbiAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgbmVzdGVkX2FycmF5X2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uKHN1YnN0ZXBwZXIpIHtzdWJzdGVwcGVyLnN0b3BfYWRhcHRhdGlvbigpOyB9KTtcbiAgfTtcbiAgXG4gIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmVzdGVkX2FycmF5X2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uKHN1YnN0ZXBwZXIpIHtcbiAgICAgIHJldHVybiBzdWJzdGVwcGVyLmluZm8oKTsgXG4gICAgfSk7XG4gIH07XG4gIFxuICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBhdWdtZW50cyB7TXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcn1cbiAgICogQSBcInN1YmNsYXNzXCIgb2YgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgY29udGlub3VzIE5vcm1hbCBwcm9wb3NhbHMuXG4gICAqL1xuICB2YXIgTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgUmVhbE1ldHJvcG9saXNTdGVwcGVyKTtcbiAgfTtcbiAgXG4gIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7XG5cbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAYXVnbWVudHMge011bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXJ9XG4gICAqIEEgXCJzdWJjbGFzc1wiIG9mIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgbWFraW5nIGRpc2NyZXRpemVkIE5vcm1hbCBwcm9wb3NhbHMuXG4gICAqLyAgICBcbiAgdmFyIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgSW50TWV0cm9wb2xpc1N0ZXBwZXIpO1xuICB9O1xuICBcbiAgTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsgXG4gIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjtcbiAgXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGltcGxlbWVudHMge1N0ZXBwZXJ9XG4gICAqIENvbnN0cnVjdG9yIGZvciBhbiBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIGEgc3RlcCBmb3IgYSBiaW5hcnkgcGFyYW1ldGVyLlxuICAgKiBUaGlzIGlzIGRvbmUgYnkgZXZhbHVhdGluZyB0aGUgbG9nIHBvc3RlcmlvciBmb3IgYm90aCBzdGF0ZXMgb2YgdGhlXG4gICAqIHBhcmFtZXRlciBhbmQgdGhlbiBzZWxlY3RpbmcgYSBzdGF0ZSByYW5kb21seSB3aXRoIHByb2JhYmlsaXR5IHJlbGF0aXZlIFxuICAgKiB0byB0aGUgcG9zdGVyaW9yIG9mIGVhY2ggc3RhdGUuXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci5cbiAgKi9cbiAgdmFyIEJpbmFyeVN0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7XG4gICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpO1xuICAgIGlmKHBhcmFtX25hbWVzLmxlbmd0aCAgPT0gMSkge1xuICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IFwiQmluYXJ5U3RlcHBlciBjYW4ndCBoYW5kbGUgbW9yZSB0aGFuIG9uZSBwYXJhbWV0ZXIuXCI7XG4gICAgfVxuICB9O1xuICBcbiAgQmluYXJ5U3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0ZXBwZXIucHJvdG90eXBlKTsgXG4gIEJpbmFyeVN0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQmluYXJ5U3RlcHBlcjtcbiAgXG4gIEJpbmFyeVN0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSAwO1xuICAgIHZhciB6ZXJvX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpO1xuICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IDE7XG4gICAgdmFyIG9uZV9sb2dfZGVucyA9IHRoaXMubG9nX3Bvc3QoKTtcbiAgICB2YXIgbWF4X2xvZ19kZW5zID0gTWF0aC5tYXgoemVyb19sb2dfZGVucywgb25lX2xvZ19kZW5zKTtcbiAgICB6ZXJvX2xvZ19kZW5zIC09IG1heF9sb2dfZGVucztcbiAgICBvbmVfbG9nX2RlbnMgLT0gbWF4X2xvZ19kZW5zO1xuICAgIHZhciB6ZXJvX3Byb2IgPSBNYXRoLmV4cCh6ZXJvX2xvZ19kZW5zIC0gTWF0aC5sb2coIE1hdGguZXhwKHplcm9fbG9nX2RlbnMpICsgTWF0aC5leHAob25lX2xvZ19kZW5zKSApICk7XG4gICAgaWYoTWF0aC5yYW5kb20oKSA8IHplcm9fcHJvYikge1xuICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMDtcbiAgICAgIHJldHVybiAwO1xuICAgIH0gLy8gZWxzZSBrZWVwIHRoZSBwYXJhbSBhdCAxIC5cbiAgICByZXR1cm4gMTtcbiAgfTtcbiAgXG4gICAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn1cbiAgICogSnVzdCBsaWtlIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgdGhpcyBTdGVwcGVyIHRha2VzIGEgc3RlcHMgZm9yXG4gICAqIGEgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIgYnkgdXBkYXRpbmcgZWFjaCBjb21wb25lbnQgaW4gdHVybi4gVGhlIGRpZmZlcmVuY2VcbiAgICogaXMgdGhhdCB0aGlzIHN0ZXBwZXIgd29ya3Mgb24gYmluYXJ5IHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbiBmb3IgYSBcbiAgICogICBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlci5cbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci5cbiAgKi9cbiAgdmFyIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7XG4gICAgXG4gICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpO1xuICAgIGlmKHBhcmFtX25hbWVzLmxlbmd0aCAgPT0gMSkge1xuICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07XG4gICAgICB2YXIgcGFyYW0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVdO1xuICAgICAgdGhpcy5kaW0gPSBwYXJhbS5kaW07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IFwiQmluYXJ5Q29tcG9uZW50U3RlcHBlciBjYW4ndCBoYW5kbGUgbW9yZSB0aGFuIG9uZSBwYXJhbWV0ZXIuXCI7XG4gICAgfVxuICAgIFxuICAgIHZhciBjcmVhdGVfc3Vic3RlcHBlcnMgPSBcbiAgICAgIGZ1bmN0aW9uKGRpbSwgc3Vic3RhdGUsIGxvZ19wb3N0KSB7XG4gICAgICB2YXIgc3Vic3RlcHBlcnMgPSBbXTtcbiAgICAgIHZhciBpO1xuICAgICAgaWYoZGltLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBmb3IoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykge1xuICAgICAgICAgIHZhciBzdWJwYXJhbXMgPSB7fTtcbiAgICAgICAgICBzdWJwYXJhbXNbaV0gPSBwYXJhbTtcbiAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IG5ldyBCaW5hcnlTdGVwcGVyKHN1YnBhcmFtcywgc3Vic3RhdGUsIGxvZ19wb3N0KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IGNyZWF0ZV9zdWJzdGVwcGVycyhkaW0uc2xpY2UoMSksIHN1YnN0YXRlW2ldLCBsb2dfcG9zdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzdWJzdGVwcGVycztcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc3Vic3RlcHBlcnMgPSBjcmVhdGVfc3Vic3RlcHBlcnModGhpcy5kaW0sIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSwgdGhpcy5sb2dfcG9zdCk7XG4gIH07XG4gIFxuICBCaW5hcnlDb21wb25lbnRTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgQmluYXJ5Q29tcG9uZW50U3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCaW5hcnlDb21wb25lbnRTdGVwcGVyO1xuICBcbiAgQmluYXJ5Q29tcG9uZW50U3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIEdvIHRocm91Z2ggdGhlIHN1YnN0ZXBwZXJzIGluIGEgcmFuZG9tIG9yZGVyIGFuZCBjYWxsIHN0ZXAoKSBvbiB0aGVtLlxuICAgIHJldHVybiBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uKHN1YnN0ZXBwZXIpIHtyZXR1cm4gc3Vic3RlcHBlci5zdGVwKCk7IH0pO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn1cbiAgICogVGhpcyBzdGVwcGVyIGNhbiBiZSByZXNwb25zaWJsZSBmb3IgdGFraW5nIGEgc3RlcCBmb3Igb25lIG9yIG1vcmUgcGFyYW1ldGVycy5cbiAgICogRm9yIHJlYWwgYW5kIGludCBwYXJhbWV0ZXJzIGl0IHRha2VzIE1ldHJvcG9saXMgd2l0aGluIEdpYmJzIHN0ZXBzLCBhbmQgZm9yIFxuICAgKiBiaW5hcnkgcGFyYW1ldGVycyBpdCBkb2VzIGV2YWx1YXRlcyB0aGUgcG9zdGVyaW9yIGZvciBib3RoIHBhcmFtdGVyIHZhbHVlcyBhbmRcbiAgICogcmFuZG9tbHkgY2hhbmdlcyB0byBhIGNlcnRhaW4gdmFsdWUgcHJvcG9ydGlvbmFsbHkgdG8gdGhhdCB2YWx1ZSdzIHBvc3RlcmlvclxuICAgKiAodGhpcyBpcyBhbHNvIGRvbmUgZm9yIGVhY2ggcGFyYW1ldGVyLCBzbyBhbHNvIGEgKiB3aXRoaW4gR2liYnMgYXBwcm9hY2gpLlxuICAgKiBUaGlzIHN0ZXBwZXIgaXMgYWxzbyBhZGFwdGl2ZSBhbmQgY2FuIGJlIGVmZmljaWVudCB3aGVuIHRoZSBudW1iZXIgb2YgcGFyYW1ldGVyc1xuICAgKiBhcmUgbm90IHRvbyBoaWdoIGFuZCB0aGUgY29ycmVsYXRpb25zIGJldHdlZW4gcGFyYW1ldGVycyBhcmUgbG93LlxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBvbmUgb3IgbW9yZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnNcbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci5cbiAgKi9cbiAgdmFyIEFtd2dTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHtcbiAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpO1xuICAgIHRoaXMucGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7XG4gICAgdGhpcy5zdWJzdGVwcGVycyA9IFtdO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmFtX25hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcGFyYW0gPSBwYXJhbXNbdGhpcy5wYXJhbV9uYW1lc1tpXV07XG4gICAgICB2YXIgU2VsZWN0U3RlcHBlcjtcbiAgICAgIHN3aXRjaCAocGFyYW0udHlwZSkge1xuICAgICAgICBjYXNlIFwicmVhbFwiOlxuICAgICAgICAgIGlmKGFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkge1xuICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IFJlYWxNZXRyb3BvbGlzU3RlcHBlcjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImludFwiOlxuICAgICAgICAgIGlmKGFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkge1xuICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IEludE1ldHJvcG9saXNTdGVwcGVyO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJiaW5hcnlcIjpcbiAgICAgICAgICBpZihhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHtcbiAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBCaW5hcnlTdGVwcGVyO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gQmluYXJ5Q29tcG9uZW50U3RlcHBlcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgXCJBbXdnU3RlcHBlciBjYW4ndCBoYW5kbGUgcGFyYW1ldGVyIFwiICsgdGhpcy5wYXJhbV9uYW1lc1tpXSAgK1wiIHdpdGggdHlwZSBcIiArIHBhcmFtLnR5cGU7IFxuICAgICAgfVxuICAgICAgdmFyIHBhcmFtX29iamVjdF93cmFwID0ge307XG4gICAgICBwYXJhbV9vYmplY3Rfd3JhcFt0aGlzLnBhcmFtX25hbWVzW2ldXSA9IHBhcmFtO1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICB2YXIgcGFyYW1fb3B0aW9ucyA9IG9wdGlvbnMucGFyYW1zICYmIG9wdGlvbnMucGFyYW1zW3RoaXMucGFyYW1fbmFtZXNbaV1dIHx8IHt9O1xuICAgICAgcGFyYW1fb3B0aW9ucy5wcm9wX2xvZ19zY2FsZSAgICAgPSBwYXJhbV9vcHRpb25zLnByb3BfbG9nX3NjYWxlICAgICB8fCBvcHRpb25zLnByb3BfbG9nX3NjYWxlOyBcbiAgICAgIHBhcmFtX29wdGlvbnMuYmF0Y2hfc2l6ZSAgICAgICAgID0gcGFyYW1fb3B0aW9ucy5iYXRjaF9zaXplICAgICAgICAgfHwgb3B0aW9ucy5iYXRjaF9zaXplOyBcbiAgICAgIHBhcmFtX29wdGlvbnMubWF4X2FkYXB0YXRpb24gICAgID0gcGFyYW1fb3B0aW9ucy5tYXhfYWRhcHRhdGlvbiAgICAgfHwgb3B0aW9ucy5tYXhfYWRhcHRhdGlvbjtcbiAgICAgIHBhcmFtX29wdGlvbnMuaW5pdGlhbF9hZGFwdGF0aW9uID0gcGFyYW1fb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb24gfHwgb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb247XG4gICAgICBwYXJhbV9vcHRpb25zLnRhcmdldF9hY2NlcHRfcmF0ZSA9IHBhcmFtX29wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlIHx8IG9wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlOyBcbiAgICAgIHBhcmFtX29wdGlvbnMuaXNfYWRhcHRpbmcgICAgICAgID0gcGFyYW1fb3B0aW9ucy5pc19hZGFwdGluZyAgICAgICAgfHwgb3B0aW9ucy5pc19hZGFwdGluZzsgXG4gICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldID0gbmV3IFNlbGVjdFN0ZXBwZXIocGFyYW1fb2JqZWN0X3dyYXAsIHN0YXRlLCBsb2dfcG9zdCwgcGFyYW1fb3B0aW9ucyk7XG4gICAgfVxuICB9O1xuICBcbiAgQW13Z1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBBbXdnU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBbXdnU3RlcHBlcjtcbiAgXG4gIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24oKSB7XG4gICAgc2h1ZmZsZV9hcnJheSh0aGlzLnN1YnN0ZXBwZXJzKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzdGVwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5zdWJzdGVwcGVyc1tpXS5zdGVwKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICB9O1xuICBcbiAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzdGVwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5zdWJzdGVwcGVyc1tpXS5zdGFydF9hZGFwdGF0aW9uKCk7XG4gICAgfVxuICB9O1xuICBcbiAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldLnN0b3BfYWRhcHRhdGlvbigpO1xuICAgIH0gXG4gIH07XG4gIFxuICBBbXdnU3RlcHBlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbmZvID0ge307XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGluZm9bdGhpcy5wYXJhbV9uYW1lc1tpXV0gPSB0aGlzLnN1YnN0ZXBwZXJzW2ldLmluZm8oKTtcbiAgICB9XG4gICAgcmV0dXJuIGluZm87XG4gIH07XG4gIFxuICBcbiAgXG4gIC8vLy8vLy8vLy8vIFNhbXBsZXIgRnVuY3Rpb25zIC8vLy8vLy8vLy9cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgXG4gICAvKipcbiAgICogQGludGVyZmFjZVxuICAgKiBXaGlsZSB5b3UgY291bGQgZml0IGEgbW9kZWwgYnkgcGFzdGluZyB0b2dldGhlciBTdGVwcGVycywgYVxuICAvLyBTYW1wbGVyIGlzIGhlcmUgaXMgYSBjb252ZW5pZW5jZSBjbGFzcyB3aGVyZSBhbiBpbnN0YW5jZSBvZiBTYW1wbGVyXG4gIC8vIHNldHMgdXAgdGhlIFN0ZXBwZXJzLCBjaGVja3MgdGhlIHBhcmFtZXRlciBkZWZpbml0aW9uLFxuICAvLyBhbmQgbWFuYWdlcyB0aGUgc2FtcGxpbmcuIFRoaXMgaGVyZSBkZWZpbmVzIHRoZSBTYW1wbGVyIFwiaW50ZXJmYWNlXCIuXG4gICAqIEBpbnRlcmZhY2VcbiAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlciBkZWZpbml0aW9ucywgZm9yIGV4YW1wbGU6XG4gICAqICAge1wibXVcIjoge1widHlwZVwiOiBcInJlYWxcIn0sIFwic2lnbWFcIjoge1widHlwZVwiOiBcInJlYWxcIiwgXCJsb3dlclwiID0gMH19XG4gICAqICAgVGhlIHBhcmFtZXRlciBkZWZpbml0aW9ucyBkb2Vzbid0IGhhdmUgdG8gYmUgXCJjb21wbGV0ZVwiIGFuZCBwcm9wZXJ0aWVzXG4gICAqICAgbGVmdCBvdXQgKGxpa2UgbG93ZXIgYW5kIHVwcGVyKSB3aWxsIGJlIGZpbGxlZCBpbiBieSBkZWZhdWx0cy5cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihzdGF0ZSwgZGF0YSkuIEhlcmVcbiAgICogICBzdGF0ZSB3aWxsIGJlIGFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHN0YXRlIHdpdGggZWFjaCBwYXJhbWV0ZXIgYXMgYSBcbiAgICogICBrZXkgYW5kIHRoZSBwYXJhbWV0ZXIgdmFsdWVzIGFzIG51bWJlcnMgb3IgYXJyYXlzLiBGb3IgZXhhbXBsZTpcbiAgICogICB7XCJtdVwiOiAzLCBcInNpZ21hXCI6IDEuNX0uIFRoZSBkYXRhIGFyZ3VtZW50IHdpbGwgYmUgdGhlIHNhbWUgb2JqZWN0IGFzIFxuICAgKiAgIHRoZSBkYXRhIGFyZ3VtZW50IGdpdmVuIGJlbG93LlxuICAgKiBAcGFyYW0gZGF0YSAtIGFuIG9iamVjdCB0aGF0IHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRoZSBsb2dfcG9zdCBmdW5jdGlvblxuICAgKiAgIHdoZW4gc2FtcGxpbmcuXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc2FtcGxlci5cbiAgICovXG4gIHZhciBTYW1wbGVyID0gZnVuY3Rpb24ocGFyYW1zLCBsb2dfcG9zdCwgZGF0YSwgb3B0aW9ucykge1xuICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5wYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTtcbiAgICBcbiAgICAvLyBTZXR0aW5nIGRlZmF1bHQgb3B0aW9ucyBpZiBub3QgcGFzc2VkIHRocm91Z2ggdGhlIG9wdGlvbnMgb2JqZWN0XG4gICAgdGhpcy5wYXJhbV9pbml0X2Z1biAgID0gZ2V0X29wdGlvbihcInBhcmFtX2luaXRfZnVuXCIsIG9wdGlvbnMsIHBhcmFtX2luaXRfZml4ZWQpO1xuICAgIHZhciB0aGlubmluZ19pbnRlcnZhbCA9IGdldF9vcHRpb24oXCJ0aGluXCIsIG9wdGlvbnMsIDEpO1xuICAgIHZhciBwYXJhbXNfdG9fbW9uaXRvciA9IGdldF9vcHRpb24oXCJtb25pdG9yXCIsIG9wdGlvbnMsIG51bGwpO1xuICAgIHRoaXMudGhpbih0aGlubmluZ19pbnRlcnZhbCk7XG4gICAgdGhpcy5tb25pdG9yKHBhcmFtc190b19tb25pdG9yKTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIC8vIENvbXBsZXRpbmcgdGhlIHBhcmFtcyBhbmQgaW5pdGlhbGl6aW5nIHRoZSBzdGF0ZS5cbiAgICB0aGlzLnBhcmFtcyA9IGNvbXBsZXRlX3BhcmFtcyh0aGlzLnBhcmFtcywgdGhpcy5wYXJhbV9pbml0X2Z1bik7XG4gICAgdmFyIHN0YXRlID0ge307XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMucGFyYW1fbmFtZXMubGVuZ3RoOyBpKysgKSB7XG4gICAgICBzdGF0ZVt0aGlzLnBhcmFtX25hbWVzW2ldXSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZXNbaV1dLmluaXQ7XG4gICAgfVxuICAgIHRoaXMubG9nX3Bvc3QgPSBmdW5jdGlvbigpIHsgXG4gICAgICByZXR1cm4gbG9nX3Bvc3Qoc3RhdGUsIGRhdGEpO1xuICAgIH07XG4gICAgLy8gUnVubmluZyB0aGUgbG9nX3Bvc3QgZnVuY3Rpb24gb25jZSBpbiBjYXNlIGl0IGZ1cnRoZXIgbW9kaWZpZXMgdGhlIHN0YXRlXG4gICAgLy8gZm9yIGV4YW1wbGUgYWRkaW5nIGRlcml2ZWQgcXVhbnRpdGllcy5cbiAgICB0aGlzLmxvZ19wb3N0KCk7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMuc3RlcHBlcnMgPSB0aGlzLmNyZWF0ZV9zdGVwcGVyX2Vuc2FtYmxlKHRoaXMucGFyYW1zLCB0aGlzLnN0YXRlLCB0aGlzLmxvZ19wb3N0LCB0aGlzLm9wdGlvbnMpO1xuICB9O1xuICBcbiAgLyoqIFNob3VsZCByZXR1cm4gYSB2ZWN0b3Igb2Ygc3RlcHBlcnMgdGhhdCB3aGVuIGNhbGxlZCBcbiAgICogc2hvdWxkIHRha2UgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuXG4gICAqL1xuICBTYW1wbGVyLnByb3RvdHlwZS5jcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSA9IGZ1bmN0aW9uKHN0YXRlLCBsb2dfcG9zdCl7XG4gICAgdGhyb3cgXCJFdmVyeSBTYW1wbGVyIG5lZWRzIHRvIGltcGxlbWVudCBjcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSgpXCI7XG4gIH07XG4gIFxuICAvKiogUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBpbmZvIGFib3V0IHRoZSBzdGF0ZSBvZiB0aGUgU2FtcGxlci5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtzdGF0ZTogdGhpcy5zdGF0ZSwgdGhpbjogdGhpcy50aGluLCBtb25pdG9yOiB0aGlzLm1vbml0b3IsXG4gICAgICAgICAgICBzdGVwcGVyczogdGhpcy5zdGVwcGVyc307XG4gIH07XG4gIFxuICAvKiogVGFrZXMgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuIFJldHVybnMgdGhlIG5ldyBzcGFjZVxuICAgKiBidXQgYWxzbyBtb2RpZmllcyB0aGUgc3RhdGUgaW4gcGxhY2UuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgIHNodWZmbGVfYXJyYXkodGhpcy5zdGVwcGVycyk7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3RlcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuc3RlcHBlcnNbaV0uc3RlcCgpO1xuICAgIH1cbiAgICBpZihPYmplY3Qua2V5cyh0aGlzLnN0YXRlKS5sZW5ndGggPiBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcykubGVuZ3RoKSB7XG4gICAgICAvLyBUaGUgc3RhdGUgY29udGFpbnMgZGV2aXZlZCBxdWFudGl0aWVzIChub3Qgb25seSBwYXJhbWV0ZXJzKSBhbmQgd2VcbiAgICAgIC8vIG5lZWQgdG8gcnVuIHRoZSBsb2dfcG9zdCBvbmNlIG1vcmUgaW4gb3JkZXIgdG8gc2V0IHRoZSBkZXJpdmVkIHF1YW50aXRpZXNcbiAgICAgIC8vIGZvciB0aGUgZmluYWwgcGFyYW1ldGVyIHN0YXRlXG4gICAgICB0aGlzLmxvZ19wb3N0KCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFRha2VzIG5faXRlcmF0aW9ucyBzdGVwcyBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlIGFuZCByZXR1cm5zIHRoZW1cbiAgICogYXMgYW4gb2JqZWN0IG9mIGFycmF5cyB3aXRoIG9uZSBhcnJheSBwZXIgcGFyYW1ldGVyLiBGb3IgZXhhbXBsZTpcbiAgICoge211OiBbMSwgLTEsIDIsIDMsIC4uLl0sIHNpZ21hOiBbMSwgMiwgMiwgMSwgLi4uXX0uXG4gICAqIElmIHRoaW4gaXMgPiAxIHRoZW4gbl9pdGVyYXRpb25zIC8gdGhpbiBzYW1wbGVzIGFyZSByZXR1cm5lZC5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGUgPSBmdW5jdGlvbihuX2l0ZXJhdGlvbnMpIHtcbiAgICAgIC8vIEluaXRpYWxpemluZyBjdXJyX3NhbXBsZSB3aGVyZSB0aGUgc2FtcGxlIGlzIGdvaW5nIHRvIGJlIHNhdmVkXG4gICAgICAvLyBhcyBhbiBvYmplY3QgY29udGFpbmluZyBvbmUgYXJyYXkgcGVyIHBhcmFtZXRlciB0byBiZSBtb25pdG9yZWQuXG4gICAgICB2YXIgaSwgaiwgbW9uaXRvcmVkX3BhcmFtcztcbiAgICAgIGlmKHRoaXMubW9uaXRvcmVkX3BhcmFtcyA9PT0gbnVsbCkge1xuICAgICAgICBtb25pdG9yZWRfcGFyYW1zID0gT2JqZWN0LmtleXModGhpcy5zdGF0ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtb25pdG9yZWRfcGFyYW1zID0gdGhpcy5tb25pdG9yZWRfcGFyYW1zO1xuICAgICAgfVxuICAgICAgXG4gICAgICB2YXIgY3Vycl9zYW1wbGUgPSB7fTtcbiAgICAgIGZvcihqID0gMDsgaiA8IG1vbml0b3JlZF9wYXJhbXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgY3Vycl9zYW1wbGVbbW9uaXRvcmVkX3BhcmFtc1tqXV0gPSBbXTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgZm9yKGkgPSAwOyBpIDwgbl9pdGVyYXRpb25zOyBpKyspIHtcbiAgICAgICAgaWYoaSAlIHRoaXMudGhpbm5pbmdfaW50ZXJ2YWwgPT09IDApIHtcbiAgICAgICAgICBmb3IoaiA9IDA7IGogPCBtb25pdG9yZWRfcGFyYW1zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW0gPSBtb25pdG9yZWRfcGFyYW1zW2pdO1xuICAgICAgICAgICAgY3Vycl9zYW1wbGVbcGFyYW1dLnB1c2goIGNsb25lX3BhcmFtX2RyYXcodGhpcy5zdGF0ZVtwYXJhbV0pICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RlcCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGN1cnJfc2FtcGxlO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFRha2VzIG5faXRlcmF0aW9uIHN0ZXBzIGluIHBhcmFtZXRlciBzcGFjZSBidXQgcmV0dXJucyBub3RoaW5nLlxuICAgKi8gXG4gIFNhbXBsZXIucHJvdG90eXBlLmJ1cm4gPSBmdW5jdGlvbihuX2l0ZXJhdGlvbnMpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbl9pdGVyYXRpb25zOyBpKyspIHtcbiAgICAgIHRoaXMuc3RlcCgpO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBTZXRzIHdoYXQgcGFyYW1ldGVycyBzaG91bGQgYmUgbW9uaXRvcmVkIGFuZCByZXR1cm5lZCB3aGVuIGNhbGxpbmdcbiAgICogc2FtcGxlLlxuICAgKi8gXG4gIFNhbXBsZXIucHJvdG90eXBlLm1vbml0b3IgPSBmdW5jdGlvbihwYXJhbXNfdG9fbW9uaXRvcikge1xuICAgICAgdGhpcy5tb25pdG9yZWRfcGFyYW1zID0gcGFyYW1zX3RvX21vbml0b3I7XG4gIH07XG4gIFxuICAvKipcbiAgICogU2V0cyB0aGUgdGhpbm5pbmcuIEZvciBleGFtcGxlIHRoaW4gPT0gMTAgbWVhbnMgdGhhdCBldmVyeSAxMHRoIHBvc3RlcmlvclxuICAgKiBkcmF3IHdpbGwgYmUga2VwdC5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS50aGluID0gZnVuY3Rpb24odGhpbm5pbmdfaW50ZXJ2YWwpIHtcbiAgICB0aGlzLnRoaW5uaW5nX2ludGVydmFsID0gdGhpbm5pbmdfaW50ZXJ2YWw7XG4gIH07XG4gIFxuICAvKipcbiAgICogU2V0cyBhZGFwdGF0aW9uIG9uLCBpZiBhcHBsaWNhYmxlLCBpbiBhbGwgc3RlcHBlcnMuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnN0ZXBwZXJzW2ldLnN0YXJ0X2FkYXB0YXRpb24oKTtcbiAgICB9XG4gIH07XG4gIFxuICAgIC8qKlxuICAgKiBTZXRzIGFkYXB0YXRpb24gb2ZmLCBpZiBhcHBsaWNhYmxlLCBpbiBhbGwgc3RlcHBlcnMuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3RlcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuc3RlcHBlcnNbaV0uc3RvcF9hZGFwdGF0aW9uKCk7XG4gICAgfVxuICB9O1xuICBcbiAgIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGltcGxlbWVudHMge1NhbXBsZXJ9XG4gICAqIFRoaXMgc2FtcGxlciB1c2VzIHRoZSBBbXdnU3RlcHBlciBhcyB0aGUgc3RlcHBlciBmdW5jdGlvbiB3aGljaCBpbXBsZW1lbnRzIHRoZSBcbiAgICogQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluIFwiRXhhbXBsZXMgb2YgQWRhcHRpdmUgTUNNQ1wiXG4gICAqIGJ5IFJvYmVydHMgYW5kIFJvc2VudGhhbCAoMjAwOCkuIEFuIGFkaXRpb24gaXMgdGhhdCBpdCBoYW5kbGVzIGludCBwYXJhbWV0ZXJzXG4gICAqIGJ5IG1ha2luZyBkaXNjcmV0ZSBOb3JtYWwgcHJvcG9zYWxzIGFuZCBiaW5hcnkgcGFyYW1ldGVycyBieSB0YWtpbmcgb24gYSBuZXcgXG4gICAqIHZhbHVlIHByb3BvcnRpb25hbCB0byB0aGUgcG9zdGVyaW9yIG9mIHRoZSB0d28gcG9zc2libGUgc3RhdGVzIG9mIHRoZVxuICAgKiBwYXJhbWV0ZXIuIFRoaXMgc2FtcGxlciBjYW4gYmUgZWZmaWNpZW50IHdoZW4gdGhlIG51bWJlciBvZiBwYXJhbWV0ZXJzXG4gICAqIGFyZSBub3QgdG9vIGhpZ2ggYW5kIHRoZSBjb3JyZWxhdGlvbnMgYmV0d2VlbiBwYXJhbWV0ZXJzIGFyZSBsb3cuXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIG9uZSBvciBtb3JlIHBhcmFtZXRlciBkZWZpbml0aW9uc1xuICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLlxuICAqL1xuICB2YXIgQW13Z1NhbXBsZXIgPSBmdW5jdGlvbihwYXJhbXMsIGxvZ19wb3N0LCBkYXRhLCBvcHRpb25zKSB7XG4gICAgU2FtcGxlci5jYWxsKHRoaXMsIHBhcmFtcywgbG9nX3Bvc3QsIGRhdGEsIG9wdGlvbnMpO1xuICB9O1xuICBcbiAgQW13Z1NhbXBsZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTYW1wbGVyLnByb3RvdHlwZSk7IFxuICBBbXdnU2FtcGxlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBbXdnU2FtcGxlcjtcbiAgXG4gIEFtd2dTYW1wbGVyLnByb3RvdHlwZS5jcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKXtcbiAgICByZXR1cm4gWyBuZXcgQW13Z1N0ZXBwZXIocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIF07XG4gIH07XG4gIFxuICBcbiAgLy8gUmV0dXJuaW5nIHRoZSBmdW5jdGlvbnMgdGhhdCBzaG91bGQgYmUgcHVibGljbHkgZXhwb3NlZCBieSB0aGlzIG1vZHVsZVxuICByZXR1cm4ge1xuICAgIHJ1bmlmOiBydW5pZixcbiAgICBydW5pZl9kaXNjcmV0ZTogcnVuaWZfZGlzY3JldGUsXG4gICAgcm5vcm06IHJub3JtLFxuICAgIHBhcmFtX2luaXRfZml4ZWQ6IHBhcmFtX2luaXRfZml4ZWQsIFxuICAgIGNvbXBsZXRlX3BhcmFtczogY29tcGxldGVfcGFyYW1zLCBcbiAgICBSZWFsTWV0cm9wb2xpc1N0ZXBwZXI6IFJlYWxNZXRyb3BvbGlzU3RlcHBlciwgXG4gICAgSW50TWV0cm9wb2xpc1N0ZXBwZXI6IEludE1ldHJvcG9saXNTdGVwcGVyLCBcbiAgICBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjogTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIsIFxuICAgIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI6IE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIsIFxuICAgIEJpbmFyeVN0ZXBwZXI6IEJpbmFyeVN0ZXBwZXIsIFxuICAgIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXI6IEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIsIFxuICAgIEFtd2dTdGVwcGVyOiBBbXdnU3RlcHBlciwgXG4gICAgQW13Z1NhbXBsZXI6IEFtd2dTYW1wbGVyXG4gIH07XG59KSk7XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBhc2NlbmRpbmcoYSwgYikge1xuICByZXR1cm4gYSA9PSBudWxsIHx8IGIgPT0gbnVsbCA/IE5hTiA6IGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiBhID49IGIgPyAwIDogTmFOO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbnVtYmVyKHgpIHtcbiAgcmV0dXJuIHggPT09IG51bGwgPyBOYU4gOiAreDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uKiBudW1iZXJzKHZhbHVlcywgdmFsdWVvZikge1xuICBpZiAodmFsdWVvZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiAodmFsdWUgPSArdmFsdWUpID49IHZhbHVlKSB7XG4gICAgICAgIHlpZWxkIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBsZXQgaW5kZXggPSAtMTtcbiAgICBmb3IgKGxldCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgIGlmICgodmFsdWUgPSB2YWx1ZW9mKHZhbHVlLCArK2luZGV4LCB2YWx1ZXMpKSAhPSBudWxsICYmICh2YWx1ZSA9ICt2YWx1ZSkgPj0gdmFsdWUpIHtcbiAgICAgICAgeWllbGQgdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgYXNjZW5kaW5nIGZyb20gXCIuL2FzY2VuZGluZy5qc1wiO1xuaW1wb3J0IHBlcm11dGUgZnJvbSBcIi4vcGVybXV0ZS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzb3J0KHZhbHVlcywgLi4uRikge1xuICBpZiAodHlwZW9mIHZhbHVlc1tTeW1ib2wuaXRlcmF0b3JdICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJ2YWx1ZXMgaXMgbm90IGl0ZXJhYmxlXCIpO1xuICB2YWx1ZXMgPSBBcnJheS5mcm9tKHZhbHVlcyk7XG4gIGxldCBbZl0gPSBGO1xuICBpZiAoKGYgJiYgZi5sZW5ndGggIT09IDIpIHx8IEYubGVuZ3RoID4gMSkge1xuICAgIGNvbnN0IGluZGV4ID0gVWludDMyQXJyYXkuZnJvbSh2YWx1ZXMsIChkLCBpKSA9PiBpKTtcbiAgICBpZiAoRi5sZW5ndGggPiAxKSB7XG4gICAgICBGID0gRi5tYXAoZiA9PiB2YWx1ZXMubWFwKGYpKTtcbiAgICAgIGluZGV4LnNvcnQoKGksIGopID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBmIG9mIEYpIHtcbiAgICAgICAgICBjb25zdCBjID0gYXNjZW5kaW5nRGVmaW5lZChmW2ldLCBmW2pdKTtcbiAgICAgICAgICBpZiAoYykgcmV0dXJuIGM7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBmID0gdmFsdWVzLm1hcChmKTtcbiAgICAgIGluZGV4LnNvcnQoKGksIGopID0+IGFzY2VuZGluZ0RlZmluZWQoZltpXSwgZltqXSkpO1xuICAgIH1cbiAgICByZXR1cm4gcGVybXV0ZSh2YWx1ZXMsIGluZGV4KTtcbiAgfVxuICByZXR1cm4gdmFsdWVzLnNvcnQoY29tcGFyZURlZmluZWQoZikpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZURlZmluZWQoY29tcGFyZSA9IGFzY2VuZGluZykge1xuICBpZiAoY29tcGFyZSA9PT0gYXNjZW5kaW5nKSByZXR1cm4gYXNjZW5kaW5nRGVmaW5lZDtcbiAgaWYgKHR5cGVvZiBjb21wYXJlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJjb21wYXJlIGlzIG5vdCBhIGZ1bmN0aW9uXCIpO1xuICByZXR1cm4gKGEsIGIpID0+IHtcbiAgICBjb25zdCB4ID0gY29tcGFyZShhLCBiKTtcbiAgICBpZiAoeCB8fCB4ID09PSAwKSByZXR1cm4geDtcbiAgICByZXR1cm4gKGNvbXBhcmUoYiwgYikgPT09IDApIC0gKGNvbXBhcmUoYSwgYSkgPT09IDApO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXNjZW5kaW5nRGVmaW5lZChhLCBiKSB7XG4gIHJldHVybiAoYSA9PSBudWxsIHx8ICEoYSA+PSBhKSkgLSAoYiA9PSBudWxsIHx8ICEoYiA+PSBiKSkgfHwgKGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiAwKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1heCh2YWx1ZXMsIHZhbHVlb2YpIHtcbiAgbGV0IG1heDtcbiAgaWYgKHZhbHVlb2YgPT09IHVuZGVmaW5lZCkge1xuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAodmFsdWUgIT0gbnVsbFxuICAgICAgICAgICYmIChtYXggPCB2YWx1ZSB8fCAobWF4ID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSkge1xuICAgICAgICBtYXggPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGV0IGluZGV4ID0gLTE7XG4gICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAoKHZhbHVlID0gdmFsdWVvZih2YWx1ZSwgKytpbmRleCwgdmFsdWVzKSkgIT0gbnVsbFxuICAgICAgICAgICYmIChtYXggPCB2YWx1ZSB8fCAobWF4ID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSkge1xuICAgICAgICBtYXggPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1heDtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1pbih2YWx1ZXMsIHZhbHVlb2YpIHtcbiAgbGV0IG1pbjtcbiAgaWYgKHZhbHVlb2YgPT09IHVuZGVmaW5lZCkge1xuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAodmFsdWUgIT0gbnVsbFxuICAgICAgICAgICYmIChtaW4gPiB2YWx1ZSB8fCAobWluID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSkge1xuICAgICAgICBtaW4gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGV0IGluZGV4ID0gLTE7XG4gICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAoKHZhbHVlID0gdmFsdWVvZih2YWx1ZSwgKytpbmRleCwgdmFsdWVzKSkgIT0gbnVsbFxuICAgICAgICAgICYmIChtaW4gPiB2YWx1ZSB8fCAobWluID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSkge1xuICAgICAgICBtaW4gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1pbjtcbn1cbiIsImltcG9ydCB7YXNjZW5kaW5nRGVmaW5lZCwgY29tcGFyZURlZmluZWR9IGZyb20gXCIuL3NvcnQuanNcIjtcblxuLy8gQmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL21vdXJuZXIvcXVpY2tzZWxlY3Rcbi8vIElTQyBsaWNlbnNlLCBDb3B5cmlnaHQgMjAxOCBWbGFkaW1pciBBZ2Fmb25raW4uXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBxdWlja3NlbGVjdChhcnJheSwgaywgbGVmdCA9IDAsIHJpZ2h0ID0gYXJyYXkubGVuZ3RoIC0gMSwgY29tcGFyZSkge1xuICBjb21wYXJlID0gY29tcGFyZSA9PT0gdW5kZWZpbmVkID8gYXNjZW5kaW5nRGVmaW5lZCA6IGNvbXBhcmVEZWZpbmVkKGNvbXBhcmUpO1xuXG4gIHdoaWxlIChyaWdodCA+IGxlZnQpIHtcbiAgICBpZiAocmlnaHQgLSBsZWZ0ID4gNjAwKSB7XG4gICAgICBjb25zdCBuID0gcmlnaHQgLSBsZWZ0ICsgMTtcbiAgICAgIGNvbnN0IG0gPSBrIC0gbGVmdCArIDE7XG4gICAgICBjb25zdCB6ID0gTWF0aC5sb2cobik7XG4gICAgICBjb25zdCBzID0gMC41ICogTWF0aC5leHAoMiAqIHogLyAzKTtcbiAgICAgIGNvbnN0IHNkID0gMC41ICogTWF0aC5zcXJ0KHogKiBzICogKG4gLSBzKSAvIG4pICogKG0gLSBuIC8gMiA8IDAgPyAtMSA6IDEpO1xuICAgICAgY29uc3QgbmV3TGVmdCA9IE1hdGgubWF4KGxlZnQsIE1hdGguZmxvb3IoayAtIG0gKiBzIC8gbiArIHNkKSk7XG4gICAgICBjb25zdCBuZXdSaWdodCA9IE1hdGgubWluKHJpZ2h0LCBNYXRoLmZsb29yKGsgKyAobiAtIG0pICogcyAvIG4gKyBzZCkpO1xuICAgICAgcXVpY2tzZWxlY3QoYXJyYXksIGssIG5ld0xlZnQsIG5ld1JpZ2h0LCBjb21wYXJlKTtcbiAgICB9XG5cbiAgICBjb25zdCB0ID0gYXJyYXlba107XG4gICAgbGV0IGkgPSBsZWZ0O1xuICAgIGxldCBqID0gcmlnaHQ7XG5cbiAgICBzd2FwKGFycmF5LCBsZWZ0LCBrKTtcbiAgICBpZiAoY29tcGFyZShhcnJheVtyaWdodF0sIHQpID4gMCkgc3dhcChhcnJheSwgbGVmdCwgcmlnaHQpO1xuXG4gICAgd2hpbGUgKGkgPCBqKSB7XG4gICAgICBzd2FwKGFycmF5LCBpLCBqKSwgKytpLCAtLWo7XG4gICAgICB3aGlsZSAoY29tcGFyZShhcnJheVtpXSwgdCkgPCAwKSArK2k7XG4gICAgICB3aGlsZSAoY29tcGFyZShhcnJheVtqXSwgdCkgPiAwKSAtLWo7XG4gICAgfVxuXG4gICAgaWYgKGNvbXBhcmUoYXJyYXlbbGVmdF0sIHQpID09PSAwKSBzd2FwKGFycmF5LCBsZWZ0LCBqKTtcbiAgICBlbHNlICsraiwgc3dhcChhcnJheSwgaiwgcmlnaHQpO1xuXG4gICAgaWYgKGogPD0gaykgbGVmdCA9IGogKyAxO1xuICAgIGlmIChrIDw9IGopIHJpZ2h0ID0gaiAtIDE7XG4gIH1cbiAgcmV0dXJuIGFycmF5O1xufVxuXG5mdW5jdGlvbiBzd2FwKGFycmF5LCBpLCBqKSB7XG4gIGNvbnN0IHQgPSBhcnJheVtpXTtcbiAgYXJyYXlbaV0gPSBhcnJheVtqXTtcbiAgYXJyYXlbal0gPSB0O1xufVxuIiwiaW1wb3J0IG1heCBmcm9tIFwiLi9tYXguanNcIjtcbmltcG9ydCBtaW4gZnJvbSBcIi4vbWluLmpzXCI7XG5pbXBvcnQgcXVpY2tzZWxlY3QgZnJvbSBcIi4vcXVpY2tzZWxlY3QuanNcIjtcbmltcG9ydCBudW1iZXIsIHtudW1iZXJzfSBmcm9tIFwiLi9udW1iZXIuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcXVhbnRpbGUodmFsdWVzLCBwLCB2YWx1ZW9mKSB7XG4gIHZhbHVlcyA9IEZsb2F0NjRBcnJheS5mcm9tKG51bWJlcnModmFsdWVzLCB2YWx1ZW9mKSk7XG4gIGlmICghKG4gPSB2YWx1ZXMubGVuZ3RoKSkgcmV0dXJuO1xuICBpZiAoKHAgPSArcCkgPD0gMCB8fCBuIDwgMikgcmV0dXJuIG1pbih2YWx1ZXMpO1xuICBpZiAocCA+PSAxKSByZXR1cm4gbWF4KHZhbHVlcyk7XG4gIHZhciBuLFxuICAgICAgaSA9IChuIC0gMSkgKiBwLFxuICAgICAgaTAgPSBNYXRoLmZsb29yKGkpLFxuICAgICAgdmFsdWUwID0gbWF4KHF1aWNrc2VsZWN0KHZhbHVlcywgaTApLnN1YmFycmF5KDAsIGkwICsgMSkpLFxuICAgICAgdmFsdWUxID0gbWluKHZhbHVlcy5zdWJhcnJheShpMCArIDEpKTtcbiAgcmV0dXJuIHZhbHVlMCArICh2YWx1ZTEgLSB2YWx1ZTApICogKGkgLSBpMCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGlsZVNvcnRlZCh2YWx1ZXMsIHAsIHZhbHVlb2YgPSBudW1iZXIpIHtcbiAgaWYgKCEobiA9IHZhbHVlcy5sZW5ndGgpKSByZXR1cm47XG4gIGlmICgocCA9ICtwKSA8PSAwIHx8IG4gPCAyKSByZXR1cm4gK3ZhbHVlb2YodmFsdWVzWzBdLCAwLCB2YWx1ZXMpO1xuICBpZiAocCA+PSAxKSByZXR1cm4gK3ZhbHVlb2YodmFsdWVzW24gLSAxXSwgbiAtIDEsIHZhbHVlcyk7XG4gIHZhciBuLFxuICAgICAgaSA9IChuIC0gMSkgKiBwLFxuICAgICAgaTAgPSBNYXRoLmZsb29yKGkpLFxuICAgICAgdmFsdWUwID0gK3ZhbHVlb2YodmFsdWVzW2kwXSwgaTAsIHZhbHVlcyksXG4gICAgICB2YWx1ZTEgPSArdmFsdWVvZih2YWx1ZXNbaTAgKyAxXSwgaTAgKyAxLCB2YWx1ZXMpO1xuICByZXR1cm4gdmFsdWUwICsgKHZhbHVlMSAtIHZhbHVlMCkgKiAoaSAtIGkwKTtcbn1cbiIsImltcG9ydCBxdWFudGlsZSBmcm9tIFwiLi9xdWFudGlsZS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtZWRpYW4odmFsdWVzLCB2YWx1ZW9mKSB7XG4gIHJldHVybiBxdWFudGlsZSh2YWx1ZXMsIDAuNSwgdmFsdWVvZik7XG59XG4iLCJcbi8vIGltcG9ydCAqIGFzIGpTdGF0IGZyb20gJ2pzdGF0JztcblxuLypcbiAgQ1BUTWF0aCBTdGF0aWMgQ2xhc3MgLSBOb3QgaW50ZW5kZWQgZm9yIGluc3RhbnRpYXRpb24hXG5cbiAgVmFyaWFibGVzOlxuICAgIHggPSBvYmplY3RpdmUgdmFsdWVcbiAgICB2ID0gc3ViamVjdGl2ZSB2YWx1ZS91dGlsaXR5XG4gICAgcCA9IG9iamVjdGl2ZSBwcm9iYWJpbGl0eVxuICAgIHcgPSBzdWJqZWN0aXZlIHByb2JhYmlsaXR5L2RlY2lzaW9uIHdlaWdodFxuICAgIFYgPSBleHBlY3RlZCB2YWx1ZS91dGlsaXR5XG5cbiAgICBhID0gYWxwaGEgKGN1cnZhdHVyZSBmb3IgdmFsdWUgZnVuY3Rpb24pXG4gICAgbCA9IGxhbWJkYSAobG9zcyBhdmVyc2lvbiBmb3IgdmFsdWUgZnVuY3Rpb24pXG4gICAgZyA9IGdhbW1hIChzZW5zaXRpdml0eSBmb3IgZGVjaXNpb24gd2VpZ2h0aW5nIGZ1bmN0aW9uKVxuXG4gIEVxdWF0aW9uczpcbiAgICB2ID0geF5hLCBpZiB4ID49IDA7IC1sICogLXheYSwgaWYgeCA8IDBcbiAgICB3ID0gcF5nIC8gKHBeZyArICgxIC0gcCleZyleKDEgLyBnKVxuICAgIFYgPSB2ICogd1xuKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENQVE1hdGgge1xuICBzdGF0aWMgeGFsMnYoeCwgYSwgbCkge1xuICAgIGlmICh4ID49IDApIHtcbiAgICAgIHJldHVybiB4ICoqIGE7XG4gICAgfVxuICAgIC8vIGVsc2UgKHggPCAwKVxuICAgIHJldHVybiAtbCAqICgoLXgpICoqIGEpO1xuICB9XG5cbiAgc3RhdGljIHhsdjJhKHgsIGwsIHYpIHtcbiAgICBpZiAoeCA+PSAwKSB7XG4gICAgICByZXR1cm4gTWF0aC5sb2codikgLyBNYXRoLmxvZyh4KTtcbiAgICB9XG4gICAgLy8gZWxzZSAoeCA8IDApXG4gICAgcmV0dXJuIChNYXRoLmxvZygtdikgLSBNYXRoLmxvZyhsKSkgLyBNYXRoLmxvZygteCk7XG4gIH1cblxuICBzdGF0aWMgeGF2MmwoeCwgYSwgdikge1xuICAgIGlmICh4ID49IDApIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICAvLyBlbHNlICh4IDwgMClcbiAgICByZXR1cm4gLXYgLyAoKC14KSAqKiBhKTtcbiAgfVxuXG4gIHN0YXRpYyBwZzJ3KHAsIGcpIHtcbiAgICByZXR1cm4gKHAgKiogZykgLyAoKChwICoqIGcpICsgKCgxIC0gcCkgKiogZykpICoqICgxIC8gZykpO1xuICB9XG59XG4iLCJcbi8vIEludGVybmFsIGRlcGVuZGVuY2llc1xuaW1wb3J0IENQVE1hdGggZnJvbSAnLi9jcHQtbWF0aCc7XG5cbmV4cG9ydCBkZWZhdWx0IENQVE1hdGg7XG4iLCIvKiBlc2xpbnQgbm8tcmVzdHJpY3RlZC1nbG9iYWxzOiBbXCJvZmZcIiwgXCJzZWxmXCJdICovXG5cbi8vIE5lZWRlZCBmb3IgZDMgaW4gV2ViV29ya2VyIVxuaW1wb3J0ICdyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUnO1xuXG5pbXBvcnQgKiBhcyBCYXllc0Rpc3RyaWJ1dGlvbnMgZnJvbSAnYmF5ZXMuanMvZGlzdHJpYnV0aW9ucyc7XG5pbXBvcnQgKiBhcyBCYXllc01jbWMgZnJvbSAnYmF5ZXMuanMvbWNtYyc7XG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgQ1BUTWF0aCBmcm9tICdAZGVjaWRhYmxlcy9wcm9zcGVjdGFibGUtbWF0aCc7XG5cbnNlbGYub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gIGNvbnN0IHBhcmFtcyA9IHtcbiAgICBhbHBoYToge3R5cGU6ICdyZWFsJywgbG93ZXI6IDAsIHVwcGVyOiAxfSxcbiAgICBsYW1iZGE6IHt0eXBlOiAncmVhbCcsIGxvd2VyOiAwLCB1cHBlcjogMTB9LFxuICAgIGdhbW1hOiB7dHlwZTogJ3JlYWwnLCBsb3dlcjogMCwgdXBwZXI6IDF9LFxuICAgIGx1Y2U6IHt0eXBlOiAncmVhbCcsIGxvd2VyOiAwLCB1cHBlcjogMTAwfSxcbiAgfTtcblxuICBjb25zdCBsb2dQb3N0ID0gKHN0YXRlLCBkYXRhKSA9PiB7XG4gICAgbGV0IGxwID0gMDtcblxuICAgIC8vIFByaW9yc1xuICAgIGNvbnN0IGFscGhhTWVhbiA9IDAuNTtcbiAgICBjb25zdCBhbHBoYVNhbXBsZVNpemUgPSAyLjU7XG4gICAgbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLmJldGEoXG4gICAgICBzdGF0ZS5hbHBoYSxcbiAgICAgIGFscGhhTWVhbiAqIGFscGhhU2FtcGxlU2l6ZSxcbiAgICAgICgxIC0gYWxwaGFNZWFuKSAqIGFscGhhU2FtcGxlU2l6ZSxcbiAgICApO1xuICAgIC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmFscGhhLCAwLCAxKTtcblxuICAgIGNvbnN0IGxhbWJkYU1lYW4gPSAyO1xuICAgIGNvbnN0IGxhbWJkYVNoYXBlID0gMztcbiAgICBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMuZ2FtbWEoXG4gICAgICBzdGF0ZS5sYW1iZGEsXG4gICAgICBsYW1iZGFTaGFwZSxcbiAgICAgIGxhbWJkYVNoYXBlIC8gbGFtYmRhTWVhbixcbiAgICApO1xuICAgIC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmxhbWJkYSwgMCwgMTApO1xuXG4gICAgY29uc3QgZ2FtbWFNZWFuID0gMC41O1xuICAgIGNvbnN0IGdhbW1hU2FtcGxlU2l6ZSA9IDIuNTtcbiAgICBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMuYmV0YShcbiAgICAgIHN0YXRlLmdhbW1hLFxuICAgICAgZ2FtbWFNZWFuICogZ2FtbWFTYW1wbGVTaXplLFxuICAgICAgKDEgLSBnYW1tYU1lYW4pICogZ2FtbWFTYW1wbGVTaXplLFxuICAgICk7XG4gICAgLy8gbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLnVuaWYoc3RhdGUuZ2FtbWEsIDAsIDEpO1xuXG4gICAgY29uc3QgbHVjZU1lYW4gPSAyO1xuICAgIGNvbnN0IGx1Y2VTaGFwZSA9IDM7XG4gICAgbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLmdhbW1hKFxuICAgICAgc3RhdGUubHVjZSxcbiAgICAgIGx1Y2VTaGFwZSxcbiAgICAgIGx1Y2VTaGFwZSAvIGx1Y2VNZWFuLFxuICAgICk7XG4gICAgLy8gbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLnVuaWYoc3RhdGUubHVjZSwgMCwgMTAwKTtcblxuICAgIC8vIExpa2VsaWhvb2RcbiAgICBkYXRhLmZvckVhY2goKGNob2ljZSkgPT4ge1xuICAgICAgLy8gVmFsdWVzXG4gICAgICBjb25zdCB2bCA9IENQVE1hdGgueGFsMnYoY2hvaWNlLnhsLCBzdGF0ZS5hbHBoYSwgc3RhdGUubGFtYmRhKTtcbiAgICAgIGNvbnN0IHZ3ID0gQ1BUTWF0aC54YWwydihjaG9pY2UueHcsIHN0YXRlLmFscGhhLCBzdGF0ZS5sYW1iZGEpO1xuICAgICAgY29uc3QgdnMgPSBDUFRNYXRoLnhhbDJ2KGNob2ljZS54cywgc3RhdGUuYWxwaGEsIHN0YXRlLmxhbWJkYSk7XG5cbiAgICAgIC8vIFByb2JhYmlsaXRpZXNcbiAgICAgIGNvbnN0IHd3ID0gQ1BUTWF0aC5wZzJ3KGNob2ljZS5wdywgc3RhdGUuZ2FtbWEpO1xuICAgICAgY29uc3Qgd2wgPSAxIC0gd3c7XG5cbiAgICAgIC8vIFV0aWxpdGllc1xuICAgICAgY29uc3QgdWcgPSB3bCAqIHZsICsgd3cgKiB2dztcbiAgICAgIGNvbnN0IHVzID0gdnM7XG5cbiAgICAgIC8vIENob2ljZSBvZiBnYW1ibGUgb3Igc3VyZSBpcyBzYW1wbGVkIGZyb20gYSBCZXJub3VsbGkgZGlzdHJpYnV0aW9uXG4gICAgICAvLyBMdWNlIGNob2ljZSBydWxlIGlzIHVzZWQgdG8gY29tcHV0ZSBwcm9iYWJpbGl0eSBvZiBnYW1ibGluZyEgKDAgPSBzdXJlLCAxID0gZ2FtYmxlKVxuICAgICAgY29uc3QgYmludmFsID0gMSAvICgxICsgTWF0aC5leHAoc3RhdGUubHVjZSAqICh1cyAtIHVnKSkpO1xuXG4gICAgICAvLyBBY3R1YWwgcmVzcG9uc2VcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gKGNob2ljZS5yZXNwb25zZSA9PT0gJ3N1cmUnKSA/IDAgOiAxO1xuXG4gICAgICBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMuYmVybihyZXNwb25zZSwgYmludmFsKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBscDtcbiAgfTtcblxuICAvLyBJbml0aWFsaXppbmcgdGhlIHNhbXBsZXJcbiAgY29uc3Qgc2FtcGxlciA9IG5ldyBCYXllc01jbWMuQW13Z1NhbXBsZXIocGFyYW1zLCBsb2dQb3N0LCBldmVudC5kYXRhKTtcbiAgLy8gQnVybmluZyBzb21lIHNhbXBsZXMgdG8gdGhlIE1DTUMgZ29kcyBhbmQgc2FtcGxpbmcgNTAwMCBkcmF3c1xuICBzYW1wbGVyLmJ1cm4oMTAwMCk7XG4gIGNvbnN0IHNhbXBsZXMgPSBzYW1wbGVyLnNhbXBsZSg1MDAwKTtcblxuICAvLyBFeHRyYWN0IHN1bW1hcnkgc3RhdHNcbiAgY29uc3QgcmVzdWx0cyA9IHtcbiAgICBhbHBoYTogZDMubWVkaWFuKHNhbXBsZXMuYWxwaGEpLFxuICAgIGxhbWJkYTogZDMubWVkaWFuKHNhbXBsZXMubGFtYmRhKSxcbiAgICBnYW1tYTogZDMubWVkaWFuKHNhbXBsZXMuZ2FtbWEpLFxuICAgIGx1Y2U6IGQzLm1lZGlhbihzYW1wbGVzLmx1Y2UpLFxuICB9O1xuXG4gIHNlbGYucG9zdE1lc3NhZ2Uoe3Jlc3VsdHM6IHJlc3VsdHMsIHNhbXBsZXM6IHNhbXBsZXN9KTtcbn07XG4iXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJtb2R1bGUiLCJleHBvcnRzIiwibGQiLCJ0aGlzIiwibGdhbW1hIiwieCIsImoiLCJjb2YiLCJzZXIiLCJ4eCIsInkiLCJ0bXAiLCJsb2ciLCJsZmFjdG9yaWFsIiwibiIsIk5hTiIsImxjaG9vc2UiLCJrIiwibGJldGEiLCJhIiwiYiIsIk1hdGgiLCJleHAiLCJhYnMiLCJwb3ciLCJzcXJ0IiwicGkiLCJQSSIsImJldGEiLCJzaGFwZTEiLCJzaGFwZTIiLCJJbmZpbml0eSIsImNhdWNoeSIsImxvY2F0aW9uIiwic2NhbGUiLCJub3JtIiwibWVhbiIsInNkIiwiYml2YXJub3JtIiwiY29yciIsInoiLCJub3JtYWxpemluZ19mYWN0b3IiLCJiaXZhcl9sb2dfZGVucyIsImxhcGxhY2UiLCJkZXhwIiwiZ2FtbWEiLCJzaGFwZSIsInJhdGUiLCJpbnZnYW1tYSIsImxub3JtIiwibWVhbmxvZyIsInNkbG9nIiwicGFyZXRvIiwidCIsImRmIiwid2VpYnVsbCIsInRtcDEiLCJ0bXAyIiwibG9naXMiLCJlIiwiZiIsImRpcmljaGxldCIsImFscGhhIiwic3VtX2FscGhhIiwic3VtX2xnYW1tYV9hbHBoYSIsInN1bV9hbHBoYV9zdWJfMV9sb2dfeCIsImxlbmd0aCIsImkiLCJ1bmlmIiwibWluIiwibWF4IiwiYmVybiIsInByb2IiLCJjYXQiLCJwcm9icyIsImJpbm9tIiwic2l6ZSIsIm5iaW5vbSIsImh5cGVyIiwibSIsInBvaXMiLCJsYW1iZGEiLCJtY21jIiwicnVuaWYiLCJyYW5kb20iLCJydW5pZl9kaXNjcmV0ZSIsImZsb29yIiwicm5vcm0iLCJ1IiwidiIsInEiLCJkZWVwX2Nsb25lIiwic3JjIiwibWl4aW4iLCJkZXN0Iiwic291cmNlIiwiY29weUZ1bmMiLCJuYW1lIiwicyIsImVtcHR5IiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwibm9kZVR5cGUiLCJjbG9uZU5vZGUiLCJEYXRlIiwiZ2V0VGltZSIsIlJlZ0V4cCIsInIiLCJsIiwiQXJyYXkiLCJwdXNoIiwiY29uc3RydWN0b3IiLCJjbG9uZV9wYXJhbV9kcmF3IiwiaXNBcnJheSIsInhfY29weSIsInNsaWNlIiwiaXNfbnVtYmVyIiwib2JqZWN0IiwiTnVtYmVyIiwiY3JlYXRlX2FycmF5IiwiZGltIiwiaW5pdCIsImFyciIsImFycmF5X2RpbSIsImNvbmNhdCIsImFycmF5X2VxdWFsIiwiYTEiLCJhMiIsIm5lc3RlZF9hcnJheV9hcHBseSIsImZ1biIsInJlc3VsdCIsInNodWZmbGVfYXJyYXkiLCJhcnJheSIsInRlbXAiLCJuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5IiwibGVuIiwiYXJyYXlfaXMiLCJhcnJheV9pIiwiZ2V0X29wdGlvbiIsIm9wdGlvbl9uYW1lIiwib3B0aW9ucyIsImRlZmF1bF92YWx1ZSIsImhhc093blByb3BlcnR5IiwidW5kZWZpbmVkIiwiZ2V0X211bHRpZGltX29wdGlvbiIsInZhbHVlIiwicGFyYW1faW5pdF9maXhlZCIsInR5cGUiLCJsb3dlciIsInVwcGVyIiwicm91bmQiLCJjb21wbGV0ZV9wYXJhbXMiLCJwYXJhbXNfdG9fY29tcGxldGUiLCJwYXJhbV9pbml0IiwicGFyYW1zIiwicGFyYW1fbmFtZSIsInBhcmFtIiwiU3RlcHBlciIsInN0YXRlIiwibG9nX3Bvc3QiLCJzdGVwIiwic3RhcnRfYWRhcHRhdGlvbiIsInN0b3BfYWRhcHRhdGlvbiIsImluZm8iLCJPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciIsImdlbmVyYXRlX3Byb3Bvc2FsIiwicGFyYW1fbmFtZXMiLCJrZXlzIiwicHJvcF9sb2dfc2NhbGUiLCJiYXRjaF9zaXplIiwibWF4X2FkYXB0YXRpb24iLCJpbml0aWFsX2FkYXB0YXRpb24iLCJ0YXJnZXRfYWNjZXB0X3JhdGUiLCJpc19hZGFwdGluZyIsImFjY2VwdGFuY2VfY291bnQiLCJiYXRjaF9jb3VudCIsIml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24iLCJjcmVhdGUiLCJwYXJhbV9zdGF0ZSIsInBhcmFtX3Byb3Bvc2FsIiwiY3Vycl9sb2dfZGVucyIsInByb3BfbG9nX2RlbnMiLCJhY2NlcHRfcHJvYiIsImxvZ19zZF9hZGp1c3RtZW50Iiwibm9ybWFsX3Byb3Bvc2FsIiwiUmVhbE1ldHJvcG9saXNTdGVwcGVyIiwiZGlzY3JldGVfbm9ybWFsX3Byb3Bvc2FsIiwiSW50TWV0cm9wb2xpc1N0ZXBwZXIiLCJNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIiwiU3ViU3RlcHBlciIsImNyZWF0ZV9zdWJzdGVwcGVycyIsInN1YnN0YXRlIiwic3Vic3RlcHBlcnMiLCJzdWJvcHRpb25zIiwic3VicGFyYW0iLCJzdWJzdGVwcGVyIiwiTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIiLCJNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIiwiQmluYXJ5U3RlcHBlciIsInplcm9fbG9nX2RlbnMiLCJvbmVfbG9nX2RlbnMiLCJtYXhfbG9nX2RlbnMiLCJ6ZXJvX3Byb2IiLCJCaW5hcnlDb21wb25lbnRTdGVwcGVyIiwic3VicGFyYW1zIiwiQW13Z1N0ZXBwZXIiLCJTZWxlY3RTdGVwcGVyIiwicGFyYW1fb2JqZWN0X3dyYXAiLCJwYXJhbV9vcHRpb25zIiwiU2FtcGxlciIsImRhdGEiLCJwYXJhbV9pbml0X2Z1biIsInRoaW5uaW5nX2ludGVydmFsIiwicGFyYW1zX3RvX21vbml0b3IiLCJ0aGluIiwibW9uaXRvciIsInN0ZXBwZXJzIiwiY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUiLCJzYW1wbGUiLCJuX2l0ZXJhdGlvbnMiLCJtb25pdG9yZWRfcGFyYW1zIiwiY3Vycl9zYW1wbGUiLCJidXJuIiwiQW13Z1NhbXBsZXIiLCJhc2NlbmRpbmciLCJudW1iZXJzIiwidmFsdWVzIiwidmFsdWVvZiIsImluZGV4IiwiY29tcGFyZURlZmluZWQiLCJjb21wYXJlIiwiYXNjZW5kaW5nRGVmaW5lZCIsIlR5cGVFcnJvciIsInF1aWNrc2VsZWN0IiwibGVmdCIsInJpZ2h0IiwibmV3TGVmdCIsIm5ld1JpZ2h0Iiwic3dhcCIsInF1YW50aWxlIiwicCIsIkZsb2F0NjRBcnJheSIsImZyb20iLCJpMCIsInZhbHVlMCIsInN1YmFycmF5IiwidmFsdWUxIiwibWVkaWFuIiwiQ1BUTWF0aCIsInhhbDJ2IiwieGx2MmEiLCJ4YXYybCIsInBnMnciLCJnIiwic2VsZiIsIm9ubWVzc2FnZSIsImV2ZW50IiwibHVjZSIsImxvZ1Bvc3QiLCJscCIsImFscGhhTWVhbiIsImFscGhhU2FtcGxlU2l6ZSIsIkJheWVzRGlzdHJpYnV0aW9ucyIsImxhbWJkYU1lYW4iLCJsYW1iZGFTaGFwZSIsImdhbW1hTWVhbiIsImdhbW1hU2FtcGxlU2l6ZSIsImx1Y2VNZWFuIiwibHVjZVNoYXBlIiwiZm9yRWFjaCIsImNob2ljZSIsInZsIiwieGwiLCJ2dyIsInh3IiwidnMiLCJ4cyIsInd3IiwicHciLCJ3bCIsInVnIiwidXMiLCJiaW52YWwiLCJyZXNwb25zZSIsInNhbXBsZXIiLCJCYXllc01jbWMiLCJzYW1wbGVzIiwicmVzdWx0cyIsImQzIiwicG9zdE1lc3NhZ2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0NBSUE7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBOztDQUVBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FHQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7O0NBQ0MsRUFBVUEsQ0FBQUEsVUFBQUEsSUFBVixFQUFnQkMsT0FBaEIsRUFBeUI7Q0FDdEIsSUFHTyxJQUFrQ0MsTUFBTSxDQUFDQyxPQUF6QyxFQUFrRDtDQUM3RDtDQUNBO0NBQ0E7Q0FDUUQsTUFBQUEsTUFBQSxDQUFBQyxPQUFBLEdBQWlCRixPQUFPLEVBQXhCLENBQUE7Q0FDSCxLQUxNLE1BS0E7Q0FDWDtDQUNRRCxNQUFBQSxJQUFJLENBQUNJLEVBQUwsR0FBVUgsT0FBTyxFQUFqQixDQUFBO0NBQ0wsS0FBQTtDQUNGLEdBYkEsRUFhQ0ksY0FiRCxFQWFPLFlBQVc7Q0FDbkI7Q0FDRSxJQUFBLElBQUlELEVBQUUsR0FBSSxFQUFWLENBRmlCO0NBS25COztDQUVFLElBQUEsSUFBSUUsTUFBTSxHQUFHLFVBQVNDLENBQVQsRUFBWTtDQUN2QixNQUFJQyxJQUFBQSxDQUFDLEdBQUcsQ0FBUixDQUFBO0NBQ0EsTUFBQSxJQUFJQyxHQUFHLEdBQUcsQ0FDUixpQkFEUSxFQUNXLENBQUMsaUJBRFosRUFDK0IsaUJBRC9CLEVBRVIsQ0FBQyxpQkFGTyxFQUVZLHFCQUZaLEVBRW1DLENBQUMsa0JBRnBDLENBQVYsQ0FBQTtDQUlBLE1BQUlDLElBQUFBLEdBQUcsR0FBRyxpQkFBVixDQUFBO0NBQ0EsTUFBQSxJQUFJQyxFQUFKLEVBQVFDLENBQVIsRUFBV0MsR0FBWCxDQUFBO0NBQ0FBLE1BQUFBLEdBQUcsR0FBRyxDQUFDRCxDQUFDLEdBQUdELEVBQUUsR0FBR0osQ0FBVixJQUFlLEdBQXJCLENBQUE7Q0FDQU0sTUFBQUEsR0FBRyxJQUFJLENBQUNGLEVBQUUsR0FBRyxHQUFOLElBQWFHLEdBQUcsQ0FBQ0QsR0FBRCxDQUF2QixDQUFBOztDQUNBLE1BQUEsT0FBT0wsQ0FBQyxHQUFHLENBQVgsRUFBY0EsQ0FBQyxFQUFmLEVBQ0VFLEdBQUcsSUFBSUQsR0FBRyxDQUFDRCxDQUFELENBQUgsR0FBUyxFQUFFSSxDQUFsQixDQUFBOztDQUNGLE1BQU9FLE9BQUFBLEdBQUcsQ0FBQyxrQkFBcUJKLEdBQUFBLEdBQXJCLEdBQTJCQyxFQUE1QixDQUFILEdBQXFDRSxHQUE1QyxDQUFBO0NBQ0QsS0FiRCxDQUFBOztDQWNBVCxJQUFBQSxFQUFFLENBQUNFLE1BQUgsR0FBWUEsTUFBWixDQUFBOztDQUVBLElBQUEsSUFBSVMsVUFBVSxHQUFHLFVBQVNDLENBQVQsRUFBWTtDQUMzQixNQUFPQSxPQUFBQSxDQUFDLEdBQUcsQ0FBSixHQUFRQyxHQUFSLEdBQWNYLE1BQU0sQ0FBQ1UsQ0FBQyxHQUFHLENBQUwsQ0FBM0IsQ0FBQTtDQUNELEtBRkQsQ0FBQTs7Q0FHQVosSUFBQUEsRUFBRSxDQUFDVyxVQUFILEdBQWdCQSxVQUFoQixDQUFBOztDQUVBLElBQUEsSUFBSUcsT0FBTyxHQUFHLFVBQVNGLENBQVQsRUFBWUcsQ0FBWixFQUFjO0NBQzFCLE1BQUEsT0FBT0osVUFBVSxDQUFDQyxDQUFELENBQVYsR0FBZ0JELFVBQVUsQ0FBQ0ksQ0FBRCxDQUExQixHQUFnQ0osVUFBVSxDQUFDQyxDQUFDLEdBQUdHLENBQUwsQ0FBakQsQ0FBQTtDQUNELEtBRkQsQ0FBQTs7Q0FHQWYsSUFBQUEsRUFBRSxDQUFDYyxPQUFILEdBQWFBLE9BQWIsQ0FBQTs7Q0FFQSxJQUFBLElBQUlFLEtBQUssR0FBRyxVQUFTQyxDQUFULEVBQVlDLENBQVosRUFBZTtDQUN6QixNQUFBLE9BQU9oQixNQUFNLENBQUNlLENBQUQsQ0FBTixHQUFZZixNQUFNLENBQUNnQixDQUFELENBQWxCLEdBQXdCaEIsTUFBTSxDQUFDZSxDQUFDLEdBQUdDLENBQUwsQ0FBckMsQ0FBQTtDQUNELEtBRkQsQ0FBQTs7Q0FHQWxCLElBQUFBLEVBQUUsQ0FBQ2dCLEtBQUgsR0FBV0EsS0FBWCxDQUFBO0NBRUEsSUFBQSxJQUFJTixHQUFHLEdBQUlTLElBQUksQ0FBQ1QsR0FBaEIsQ0FBQTtDQUNBLElBQUEsSUFBSVUsR0FBRyxHQUFJRCxJQUFJLENBQUNDLEdBQWhCLENBQUE7Q0FDQSxJQUFBLElBQUlDLEdBQUcsR0FBSUYsSUFBSSxDQUFDRSxHQUFoQixDQUFBO0NBQ0EsSUFBQSxJQUFJQyxHQUFHLEdBQUlILElBQUksQ0FBQ0csR0FBaEIsQ0FBQTtDQUNBLElBQUEsSUFBSUMsSUFBSSxHQUFHSixJQUFJLENBQUNJLElBQWhCLENBQUE7Q0FDQSxJQUFBLElBQUlDLEVBQUUsR0FBS0wsSUFBSSxDQUFDTSxFQUFoQixDQTNDaUI7Q0E4Q25COztDQUVFekIsSUFBQUEsRUFBRSxDQUFDMEIsSUFBSCxHQUFVLFVBQVN2QixDQUFULEVBQVl3QixNQUFaLEVBQW9CQyxNQUFwQixFQUE0QjtDQUNwQyxNQUFBLElBQUl6QixDQUFDLEdBQUcsQ0FBSixJQUFTQSxDQUFDLEdBQUcsQ0FBakIsRUFBb0I7Q0FDaEIsUUFBQSxPQUFPLENBQUMwQixRQUFSLENBQUE7Q0FDSCxPQUFBOztDQUNELE1BQUEsSUFBR0YsTUFBTSxLQUFLLENBQVgsSUFBZ0JDLE1BQU0sS0FBSyxDQUE5QixFQUFpQztDQUMvQixRQUFBLE9BQU8sQ0FBUCxDQUFBO0NBQ0QsT0FGRCxNQUVPO0NBQ0wsUUFBTyxPQUFBLENBQUNELE1BQU0sR0FBRyxDQUFWLElBQWVqQixHQUFHLENBQUNQLENBQUQsQ0FBbEIsR0FBd0IsQ0FBQ3lCLE1BQU0sR0FBRyxDQUFWLElBQWVsQixHQUFHLENBQUMsQ0FBQSxHQUFJUCxDQUFMLENBQTFDLEdBQW9EYSxLQUFLLENBQUNXLE1BQUQsRUFBU0MsTUFBVCxDQUFoRSxDQUFBO0NBQ0QsT0FBQTtDQUNGLEtBVEQsQ0FBQTs7Q0FXQTVCLElBQUFBLEVBQUUsQ0FBQzhCLE1BQUgsR0FBWSxVQUFTM0IsQ0FBVCxFQUFZNEIsUUFBWixFQUFzQkMsS0FBdEIsRUFBNkI7Q0FDdkMsTUFBT3RCLE9BQUFBLEdBQUcsQ0FBQ3NCLEtBQUQsQ0FBSCxHQUFhdEIsR0FBRyxDQUFDWSxHQUFHLENBQUNuQixDQUFDLEdBQUc0QixRQUFMLEVBQWUsQ0FBZixDQUFILEdBQXVCVCxHQUFHLENBQUNVLEtBQUQsRUFBUSxDQUFSLENBQTNCLENBQWhCLEdBQTBEdEIsR0FBRyxDQUFDYyxFQUFELENBQXBFLENBQUE7Q0FDRCxLQUZELENBQUE7O0NBSUF4QixJQUFBQSxFQUFFLENBQUNpQyxJQUFILEdBQVUsVUFBUzlCLENBQVQsRUFBWStCLElBQVosRUFBa0JDLEVBQWxCLEVBQXNCO0NBQzVCLE1BQU8sT0FBQSxDQUFDLEdBQUQsR0FBT3pCLEdBQUcsQ0FBQyxDQUFJYyxHQUFBQSxFQUFMLENBQVYsR0FBb0JkLEdBQUcsQ0FBQ3lCLEVBQUQsQ0FBdkIsR0FBOEJiLEdBQUcsQ0FBQ25CLENBQUMsR0FBRytCLElBQUwsRUFBVyxDQUFYLENBQUgsSUFBb0IsQ0FBSUMsR0FBQUEsRUFBSixHQUFTQSxFQUE3QixDQUFyQyxDQUFBO0NBQ0gsS0FGRCxDQS9EaUI7Q0FvRW5COzs7Q0FDRW5DLElBQUFBLEVBQUUsQ0FBQ29DLFNBQUgsR0FBZSxVQUFTakMsQ0FBVCxFQUFZK0IsSUFBWixFQUFrQkMsRUFBbEIsRUFBc0JFLElBQXRCLEVBQTRCO0NBQ3pDLE1BQUEsSUFBSUMsQ0FBQyxHQUFHaEIsR0FBRyxDQUFDbkIsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPK0IsSUFBSSxDQUFDLENBQUQsQ0FBWixFQUFpQixDQUFqQixDQUFILEdBQXlCWixHQUFHLENBQUNhLEVBQUUsQ0FBQyxDQUFELENBQUgsRUFBUSxDQUFSLENBQTVCLEdBQ0FiLEdBQUcsQ0FBQ25CLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBTytCLElBQUksQ0FBQyxDQUFELENBQVosRUFBaUIsQ0FBakIsQ0FBSCxHQUF5QlosR0FBRyxDQUFDYSxFQUFFLENBQUMsQ0FBRCxDQUFILEVBQVEsQ0FBUixDQUQ1QixHQUVDLENBQUEsR0FBSUUsSUFBSixJQUFZbEMsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPK0IsSUFBSSxDQUFDLENBQUQsQ0FBdkIsQ0FBK0IvQixJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8rQixJQUFJLENBQUMsQ0FBRCxDQUExQyxDQUFELElBQW9EQyxFQUFFLENBQUMsQ0FBRCxDQUFGLEdBQVFBLEVBQUUsQ0FBQyxDQUFELENBQTlELENBRlIsQ0FBQTtDQUdBLE1BQUEsSUFBSUksa0JBQWtCLEdBQUcsRUFBRzdCLEdBQUcsQ0FBQyxDQUFELENBQUgsR0FBU0EsR0FBRyxDQUFDYyxFQUFELENBQVosR0FBbUJkLEdBQUcsQ0FBQ3lCLEVBQUUsQ0FBQyxDQUFELENBQUgsQ0FBdEIsR0FBZ0N6QixHQUFHLENBQUN5QixFQUFFLENBQUMsQ0FBRCxDQUFILENBQW5DLEdBQ0EsR0FBTXpCLEdBQUFBLEdBQUcsQ0FBQyxDQUFBLEdBQUlZLEdBQUcsQ0FBQ2UsSUFBRCxFQUFPLENBQVAsQ0FBUixDQURaLENBQXpCLENBQUE7Q0FFQSxNQUFBLElBQUlHLGNBQWMsR0FBR0Qsa0JBQWtCLEdBQUdELENBQUMsSUFBSSxDQUFBLElBQUssQ0FBSWhCLEdBQUFBLEdBQUcsQ0FBQ2UsSUFBRCxFQUFPLENBQVAsQ0FBWixDQUFKLENBQTNDLENBQUE7Q0FDQSxNQUFBLE9BQU9HLGNBQVAsQ0FBQTtDQUNELEtBUkQsQ0FBQTs7Q0FXQXhDLElBQUFBLEVBQUUsQ0FBQ3lDLE9BQUgsR0FBYSxVQUFTdEMsQ0FBVCxFQUFZNEIsUUFBWixFQUFzQkMsS0FBdEIsRUFBNkI7Q0FDeEMsTUFBQSxPQUFRLENBQUNYLEdBQUcsQ0FBQ2xCLENBQUMsR0FBRzRCLFFBQUwsQ0FBSixHQUFtQkMsS0FBcEIsR0FBNkJ0QixHQUFHLENBQUMsQ0FBQSxHQUFJc0IsS0FBTCxDQUF2QyxDQUFBO0NBQ0QsS0FGRCxDQUFBOztDQUlBaEMsSUFBQUEsRUFBRSxDQUFDMEMsSUFBSCxHQUFVMUMsRUFBRSxDQUFDeUMsT0FBYixDQUFBOztDQUVBekMsSUFBQUEsRUFBRSxDQUFDMkMsS0FBSCxHQUFXLFVBQVN4QyxDQUFULEVBQVl5QyxLQUFaLEVBQW1CQyxJQUFuQixFQUF5QjtDQUNsQyxNQUFJYixJQUFBQSxLQUFLLEdBQUcsQ0FBQSxHQUFJYSxJQUFoQixDQUFBOztDQUNBLE1BQUkxQyxJQUFBQSxDQUFDLEdBQUcsQ0FBUixFQUFXO0NBQ1QsUUFBQSxPQUFPLENBQUMwQixRQUFSLENBQUE7Q0FDRCxPQUFBOztDQUNELE1BQUEsSUFBSTFCLENBQUMsS0FBSyxDQUFOLElBQVd5QyxLQUFLLEtBQUssQ0FBekIsRUFBOEI7Q0FDNUIsUUFBQSxPQUFPLENBQUNsQyxHQUFHLENBQUNzQixLQUFELENBQVgsQ0FBQTtDQUNELE9BRkQsTUFFTztDQUNMLFFBQU8sT0FBQSxDQUFDWSxLQUFLLEdBQUcsQ0FBVCxJQUFjbEMsR0FBRyxDQUFDUCxDQUFELENBQWpCLEdBQXVCQSxDQUFDLEdBQUc2QixLQUEzQixHQUFtQzlCLE1BQU0sQ0FBQzBDLEtBQUQsQ0FBekMsR0FBbURBLEtBQUssR0FBR2xDLEdBQUcsQ0FBQ3NCLEtBQUQsQ0FBckUsQ0FBQTtDQUNELE9BQUE7Q0FDRixLQVZELENBQUE7O0NBWUFoQyxJQUFBQSxFQUFFLENBQUM4QyxRQUFILEdBQWMsVUFBUzNDLENBQVQsRUFBWXlDLEtBQVosRUFBbUJaLEtBQW5CLEVBQTBCO0NBQ3BDLE1BQUk3QixJQUFBQSxDQUFDLElBQUksQ0FBVCxFQUFZO0NBQ1YsUUFBQSxPQUFPLENBQUMwQixRQUFSLENBQUE7Q0FDRCxPQUFBOztDQUNELE1BQU8sT0FBQSxFQUFFZSxLQUFLLEdBQUcsQ0FBVixDQUFBLEdBQWVsQyxHQUFHLENBQUNQLENBQUQsQ0FBbEIsR0FBd0I2QixLQUFLLEdBQUc3QixDQUFoQyxHQUFvQ0QsTUFBTSxDQUFDMEMsS0FBRCxDQUExQyxHQUFvREEsS0FBSyxHQUFHbEMsR0FBRyxDQUFDc0IsS0FBRCxDQUF0RSxDQUFBO0NBQ0QsS0FMSCxDQUFBOztDQU9BaEMsSUFBQUEsRUFBRSxDQUFDK0MsS0FBSCxHQUFZLFVBQVM1QyxDQUFULEVBQVk2QyxPQUFaLEVBQXFCQyxLQUFyQixFQUE0QjtDQUN0QyxNQUFJOUMsSUFBQUEsQ0FBQyxJQUFJLENBQVQsRUFBWTtDQUNWLFFBQUEsT0FBTyxDQUFDMEIsUUFBUixDQUFBO0NBQ0QsT0FBQTs7Q0FDRCxNQUFBLE9BQU8sQ0FBQ25CLEdBQUcsQ0FBQ1AsQ0FBRCxDQUFKLEdBQVUsR0FBQSxHQUFNTyxHQUFHLENBQUMsSUFBSWMsRUFBTCxDQUFuQixHQUE4QmQsR0FBRyxDQUFDdUMsS0FBRCxDQUFqQyxHQUNDM0IsR0FBRyxDQUFDWixHQUFHLENBQUNQLENBQUQsQ0FBSCxHQUFTNkMsT0FBVixFQUFtQixDQUFuQixDQUFILElBQTRCLENBQUEsR0FBSUMsS0FBSixHQUFZQSxLQUF4QyxDQURSLENBQUE7Q0FFRCxLQU5ELENBQUE7O0NBUUFqRCxJQUFBQSxFQUFFLENBQUNrRCxNQUFILEdBQVksVUFBUy9DLENBQVQsRUFBWTZCLEtBQVosRUFBbUJZLEtBQW5CLEVBQTBCO0NBQ3BDLE1BQUl6QyxJQUFBQSxDQUFDLEdBQUc2QixLQUFSLEVBQWU7Q0FDYixRQUFBLE9BQU8sQ0FBQ0gsUUFBUixDQUFBO0NBQ0QsT0FBQTs7Q0FDRCxNQUFPbkIsT0FBQUEsR0FBRyxDQUFDa0MsS0FBRCxDQUFILEdBQWFBLEtBQUssR0FBR2xDLEdBQUcsQ0FBQ3NCLEtBQUQsQ0FBeEIsR0FBa0MsQ0FBQ1ksS0FBSyxHQUFHLENBQVQsSUFBY2xDLEdBQUcsQ0FBQ1AsQ0FBRCxDQUExRCxDQUFBO0NBQ0QsS0FMRCxDQUFBOztDQU9BSCxJQUFBQSxFQUFFLENBQUNtRCxDQUFILEdBQVMsVUFBU2hELENBQVQsRUFBWTRCLFFBQVosRUFBc0JDLEtBQXRCLEVBQTZCb0IsRUFBN0IsRUFBaUM7Q0FDeENBLE1BQUFBLEVBQUUsR0FBR0EsRUFBRSxHQUFHLEtBQUwsR0FBYSxLQUFiLEdBQXFCQSxFQUExQixDQUFBO0NBQ0EsTUFBT2xELE9BQUFBLE1BQU0sQ0FBQyxDQUFDa0QsRUFBRSxHQUFHLENBQU4sSUFBUyxDQUFWLENBQU4sR0FBcUJsRCxNQUFNLENBQUNrRCxFQUFFLEdBQUMsQ0FBSixDQUEzQixHQUFvQzFDLEdBQUcsQ0FBQ2EsSUFBSSxDQUFDQyxFQUFFLEdBQUc0QixFQUFOLENBQUosR0FBZ0JwQixLQUFqQixDQUF2QyxHQUNBdEIsR0FBRyxDQUFDWSxHQUFHLENBQUMsQ0FBSyxHQUFBLENBQUEsR0FBRThCLEVBQUgsR0FBUzlCLEdBQUcsQ0FBQyxDQUFDbkIsQ0FBQyxHQUFHNEIsUUFBTCxJQUFlQyxLQUFoQixFQUF1QixDQUF2QixDQUFqQixFQUE0QyxFQUFFb0IsRUFBRSxHQUFHLENBQVAsQ0FBQSxHQUFVLENBQXRELENBQUosQ0FEVixDQUFBO0NBRUQsS0FKRCxDQXhIaUI7Q0ErSG5CO0NBQ0E7OztDQUNFcEQsSUFBQUEsRUFBRSxDQUFDcUQsT0FBSCxHQUFhLFVBQVNsRCxDQUFULEVBQVl5QyxLQUFaLEVBQW1CWixLQUFuQixFQUEwQjtDQUNyQyxNQUFBLElBQUk3QixDQUFDLEdBQUcsQ0FBUixFQUFXLE9BQU8sQ0FBQzBCLFFBQVIsQ0FBQTtDQUNYLE1BQUcxQixJQUFBQSxDQUFDLEtBQUssQ0FBTixJQUFXeUMsS0FBSyxHQUFHLENBQXRCLEVBQXlCLE9BQU9mLFFBQVAsQ0FBQTtDQUN6QixNQUFJeUIsSUFBQUEsSUFBSSxHQUFHaEMsR0FBRyxDQUFDbkIsQ0FBQyxHQUFHNkIsS0FBTCxFQUFZWSxLQUFLLEdBQUcsQ0FBcEIsQ0FBZCxDQUFBO0NBQ0EsTUFBQSxJQUFJVyxJQUFJLEdBQUdELElBQUksSUFBSW5ELENBQUMsR0FBRzZCLEtBQVIsQ0FBZixDQUFBO0NBQ0QsTUFBTyxPQUFBLENBQUN1QixJQUFELEdBQVE3QyxHQUFHLENBQUNrQyxLQUFLLEdBQUdVLElBQVIsR0FBZXRCLEtBQWhCLENBQWxCLENBQUE7Q0FDQSxLQU5ELENBaklpQjtDQTBJbkI7Q0FDQTs7O0NBQ0VoQyxJQUFBQSxFQUFFLENBQUN3RCxLQUFILEdBQVcsVUFBU3JELENBQVQsRUFBWTRCLFFBQVosRUFBc0JDLEtBQXRCLEVBQTZCO0NBQ3RDN0IsTUFBQUEsQ0FBQyxHQUFHa0IsR0FBRyxDQUFDLENBQUNsQixDQUFDLEdBQUc0QixRQUFMLElBQWlCQyxLQUFsQixDQUFQLENBQUE7Q0FDQSxNQUFBLElBQUl5QixDQUFDLEdBQUdyQyxHQUFHLENBQUMsQ0FBQ2pCLENBQUYsQ0FBWCxDQUFBO0NBQ0EsTUFBSXVELElBQUFBLENBQUMsR0FBRyxHQUFBLEdBQU1ELENBQWQsQ0FBQTtDQUNBLE1BQU8sT0FBQSxFQUFFdEQsQ0FBQyxHQUFHTyxHQUFHLENBQUNzQixLQUFLLEdBQUcwQixDQUFSLEdBQVlBLENBQWIsQ0FBVCxDQUFQLENBQUE7Q0FDRCxLQUxELENBQUE7O0NBT0ExRCxJQUFBQSxFQUFFLENBQUMyRCxTQUFILEdBQWUsVUFBU3hELENBQVQsRUFBWXlELEtBQVosRUFBbUI7Q0FDaEMsTUFBSUMsSUFBQUEsU0FBUyxHQUFHLENBQWhCLENBQUE7Q0FDQSxNQUFJQyxJQUFBQSxnQkFBZ0IsR0FBRyxDQUF2QixDQUFBO0NBQ0EsTUFBSUMsSUFBQUEscUJBQXFCLEdBQUcsQ0FBNUIsQ0FBQTtDQUNBLE1BQUEsSUFBSW5ELENBQUMsR0FBR2dELEtBQUssQ0FBQ0ksTUFBZCxDQUFBOztDQUNBLE1BQUksS0FBQSxJQUFJQyxDQUFDLEdBQUcsQ0FBWixFQUFlQSxDQUFDLEdBQUdyRCxDQUFuQixFQUFzQnFELENBQUMsRUFBdkIsRUFBMkI7Q0FDekJKLFFBQUFBLFNBQVMsSUFBSUQsS0FBSyxDQUFDSyxDQUFELENBQWxCLENBQUE7Q0FDQUgsUUFBQUEsZ0JBQWdCLElBQUk1RCxNQUFNLENBQUMwRCxLQUFLLENBQUNLLENBQUQsQ0FBTixDQUExQixDQUFBO0NBQ0FGLFFBQUFBLHFCQUFxQixJQUFJLENBQUNILEtBQUssQ0FBQ0ssQ0FBRCxDQUFMLEdBQVcsQ0FBWixJQUFpQnZELEdBQUcsQ0FBQ1AsQ0FBQyxDQUFDOEQsQ0FBRCxDQUFGLENBQTdDLENBQUE7Q0FDRCxPQUFBOztDQUNELE1BQUEsT0FBTy9ELE1BQU0sQ0FBQzJELFNBQUQsQ0FBTixHQUFvQkMsZ0JBQXBCLEdBQXVDQyxxQkFBOUMsQ0FBQTtDQUNELEtBWEQsQ0FBQTs7Q0FjQS9ELElBQUFBLEVBQUUsQ0FBQ29CLEdBQUgsR0FBUyxVQUFTakIsQ0FBVCxFQUFZMEMsSUFBWixFQUFrQjtDQUN2QixNQUFBLE9BQU8xQyxDQUFDLEdBQUcsQ0FBSixHQUFRLENBQUMwQixRQUFULEdBQW9CbkIsR0FBRyxDQUFDbUMsSUFBRCxDQUFILEdBQVdBLElBQUksR0FBRzFDLENBQTdDLENBQUE7Q0FDSCxLQUZELENBQUE7O0NBSUFILElBQUFBLEVBQUUsQ0FBQ2tFLElBQUgsR0FBVSxVQUFTL0QsQ0FBVCxFQUFZZ0UsR0FBWixFQUFpQkMsR0FBakIsRUFBc0I7Q0FDNUIsTUFBQSxPQUFRakUsQ0FBQyxHQUFHZ0UsR0FBSixJQUFXaEUsQ0FBQyxHQUFHaUUsR0FBaEIsR0FBdUIsQ0FBQ3ZDLFFBQXhCLEdBQW1DbkIsR0FBRyxDQUFDLENBQUEsSUFBSzBELEdBQUcsR0FBR0QsR0FBWCxDQUFELENBQTdDLENBQUE7Q0FDSCxLQUZELENBcktpQjtDQTBLbkI7OztDQUVFbkUsSUFBQUEsRUFBRSxDQUFDcUUsSUFBSCxHQUFVLFVBQVNsRSxDQUFULEVBQVltRSxJQUFaLEVBQWtCO0NBQ3hCLE1BQU8sT0FBQSxFQUFFbkUsQ0FBQyxLQUFLLENBQU4sSUFBV0EsQ0FBQyxLQUFLLENBQW5CLENBQXdCLEdBQUEsQ0FBQzBCLFFBQXpCLEdBQW9DbkIsR0FBRyxDQUFDUCxDQUFDLEdBQUdtRSxJQUFKLEdBQVcsQ0FBQyxDQUFJbkUsR0FBQUEsQ0FBTCxLQUFXLENBQUEsR0FBSW1FLElBQWYsQ0FBWixDQUE5QyxDQUFBO0NBQ0gsS0FGRCxDQUFBOztDQUlBdEUsSUFBQUEsRUFBRSxDQUFDdUUsR0FBSCxHQUFTLFVBQVNwRSxDQUFULEVBQVlxRSxLQUFaLEVBQW1CO0NBQzFCLE1BQUdyRSxJQUFBQSxDQUFDLEdBQUcsQ0FBSixJQUFTQSxDQUFDLEdBQUdxRSxLQUFLLENBQUNSLE1BQXRCLEVBQThCO0NBQzVCLFFBQUEsT0FBTyxDQUFDbkMsUUFBUixDQUFBO0NBQ0QsT0FGRCxNQUVPO0NBQ0wsUUFBT25CLE9BQUFBLEdBQUcsQ0FBRThELEtBQUssQ0FBQ3JFLENBQUMsR0FBRyxDQUFMLENBQVAsQ0FBVixDQUFBO0NBQ0QsT0FBQTtDQUNGLEtBTkQsQ0FBQTs7Q0FRQUgsSUFBQUEsRUFBRSxDQUFDeUUsS0FBSCxHQUFXLFVBQVN0RSxDQUFULEVBQVl1RSxJQUFaLEVBQWtCSixJQUFsQixFQUF3QjtDQUNqQyxNQUFBLElBQUduRSxDQUFDLEdBQUd1RSxJQUFKLElBQVl2RSxDQUFDLEdBQUcsQ0FBbkIsRUFBc0I7Q0FDcEIsUUFBQSxPQUFPLENBQUMwQixRQUFSLENBQUE7Q0FDRCxPQUFBOztDQUNELE1BQUEsSUFBR3lDLElBQUksS0FBSyxDQUFULElBQWNBLElBQUksS0FBSyxDQUExQixFQUE2QjtDQUMzQixRQUFRSSxPQUFBQSxJQUFJLEdBQUdKLElBQVIsS0FBa0JuRSxDQUFsQixHQUFzQixDQUF0QixHQUEwQixDQUFDMEIsUUFBbEMsQ0FBQTtDQUNELE9BQUE7O0NBQ0QsTUFBT2YsT0FBQUEsT0FBTyxDQUFDNEQsSUFBRCxFQUFPdkUsQ0FBUCxDQUFQLEdBQW1CQSxDQUFDLEdBQUdPLEdBQUcsQ0FBQzRELElBQUQsQ0FBMUIsR0FBbUMsQ0FBQ0ksSUFBSSxHQUFHdkUsQ0FBUixJQUFhTyxHQUFHLENBQUMsQ0FBSTRELEdBQUFBLElBQUwsQ0FBMUQsQ0FBQTtDQUNELEtBUkQsQ0FBQTs7Q0EyQkF0RSxJQUFBQSxFQUFFLENBQUMyRSxNQUFILEdBQVksVUFBU3hFLENBQVQsRUFBWXVFLElBQVosRUFBa0JKLElBQWxCLEVBQXdCO0NBQ2xDLE1BQUduRSxJQUFBQSxDQUFDLEdBQUcsQ0FBUCxFQUFVO0NBQ1IsUUFBQSxPQUFPLENBQUMwQixRQUFSLENBQUE7Q0FDRCxPQUFBOztDQUNELE1BQU9mLE9BQUFBLE9BQU8sQ0FBQ1gsQ0FBQyxHQUFHdUUsSUFBSixHQUFXLENBQVosRUFBZUEsSUFBSSxHQUFHLENBQXRCLENBQVAsR0FBa0N2RSxDQUFDLEdBQUdPLEdBQUcsQ0FBQyxDQUFBLEdBQUk0RCxJQUFMLENBQXpDLEdBQXNESSxJQUFJLEdBQUdoRSxHQUFHLENBQUM0RCxJQUFELENBQXZFLENBQUE7Q0FDRCxLQUxELENBQUE7O0NBT0F0RSxJQUFBQSxFQUFFLENBQUM0RSxLQUFILEdBQVcsVUFBU3pFLENBQVQsRUFBWTBFLENBQVosRUFBZWpFLENBQWYsRUFBa0JHLENBQWxCLEVBQXFCO0NBQzlCLE1BQUEsSUFBR1osQ0FBQyxHQUFHLENBQUosSUFBU0EsQ0FBQyxHQUFHWSxDQUFoQixFQUFtQjtDQUNqQixRQUFBLE9BQU8sQ0FBQ2MsUUFBUixDQUFBO0NBQ0QsT0FGRCxNQUVPO0NBQ1AsUUFBT2YsT0FBQUEsT0FBTyxDQUFDK0QsQ0FBRCxFQUFJMUUsQ0FBSixDQUFQLEdBQWdCVyxPQUFPLENBQUNGLENBQUQsRUFBSUcsQ0FBQyxHQUFDWixDQUFOLENBQXZCLEdBQWtDVyxPQUFPLENBQUMrRCxDQUFDLEdBQUNqRSxDQUFILEVBQU1HLENBQU4sQ0FBaEQsQ0FBQTtDQUNDLE9BQUE7Q0FDRixLQU5ELENBQUE7O0NBUUFmLElBQUFBLEVBQUUsQ0FBQzhFLElBQUgsR0FBVSxVQUFTM0UsQ0FBVCxFQUFZNEUsTUFBWixFQUFvQjtDQUMxQixNQUFBLE9BQU81RSxDQUFDLEdBQUcsQ0FBSixHQUFRLENBQUMwQixRQUFULEdBQW9CbkIsR0FBRyxDQUFDcUUsTUFBRCxDQUFILEdBQWM1RSxDQUFkLEdBQWtCNEUsTUFBbEIsR0FBMkJwRSxVQUFVLENBQUNSLENBQUQsQ0FBaEUsQ0FBQTtDQUNILEtBRkQsQ0FBQTs7Q0FJQSxJQUFBLE9BQU9ILEVBQVAsQ0FBQTtDQUNELEdBcFBBLENBQUQsQ0FBQTs7OztDQ3ZDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBOztDQUNDLEVBQVVKLENBQUFBLFVBQUFBLElBQVYsRUFBZ0JDLE9BQWhCLEVBQXlCO0NBQ3RCLElBR08sSUFBa0NDLE1BQU0sQ0FBQ0MsT0FBekMsRUFBa0Q7Q0FDN0Q7Q0FDQTtDQUNBO0NBQ1FELE1BQUFBLE1BQUEsQ0FBQUMsT0FBQSxHQUFpQkYsT0FBTyxFQUF4QixDQUFBO0NBQ0gsS0FMTSxNQUtBO0NBQ1g7Q0FDUUQsTUFBQUEsSUFBSSxDQUFDb0YsSUFBTCxHQUFZbkYsT0FBTyxFQUFuQixDQUFBO0NBQ0wsS0FBQTtDQUNGLEdBYkEsRUFhQ0ksY0FiRCxFQWFPLFlBQVU7Q0FFbEI7Q0FDQTtDQUVBO0NBQ0E7O0NBRUE7Q0FDRSxJQUFBLElBQUlnRixLQUFLLEdBQUcsVUFBU2QsR0FBVCxFQUFjQyxHQUFkLEVBQW1CO0NBQzdCLE1BQU9qRCxPQUFBQSxJQUFJLENBQUMrRCxNQUFMLEVBQUEsSUFBaUJkLEdBQUcsR0FBR0QsR0FBdkIsSUFBOEJBLEdBQXJDLENBQUE7Q0FDRCxLQUZELENBQUE7Q0FJRjs7O0NBQ0UsSUFBQSxJQUFJZ0IsY0FBYyxHQUFHLFVBQVNoQixHQUFULEVBQWNDLEdBQWQsRUFBbUI7Q0FDdEMsTUFBQSxPQUFPakQsSUFBSSxDQUFDaUUsS0FBTCxDQUFXakUsSUFBSSxDQUFDK0QsTUFBTCxFQUFpQmQsSUFBQUEsR0FBRyxHQUFHRCxHQUFOLEdBQVksQ0FBN0IsQ0FBWCxJQUE4Q0EsR0FBckQsQ0FBQTtDQUNELEtBRkQsQ0FBQTtDQUlGO0NBQ0E7Q0FDQTs7O0NBQ0UsSUFBQSxJQUFJa0IsS0FBSyxHQUFHLFVBQVNuRCxJQUFULEVBQWVDLEVBQWYsRUFBbUI7Q0FDN0IsTUFBSW1ELElBQUFBLENBQUosRUFBT0MsQ0FBUCxFQUFVcEYsQ0FBVixFQUFhSyxDQUFiLEVBQWdCZ0YsQ0FBaEIsQ0FBQTs7Q0FDQSxNQUFHLEdBQUE7Q0FDREYsUUFBQUEsQ0FBQyxHQUFHbkUsSUFBSSxDQUFDK0QsTUFBTCxFQUFKLENBQUE7Q0FDQUssUUFBQUEsQ0FBQyxHQUFHLE1BQVVwRSxJQUFBQSxJQUFJLENBQUMrRCxNQUFMLEVBQUEsR0FBZ0IsR0FBMUIsQ0FBSixDQUFBO0NBQ0EvRSxRQUFBQSxDQUFDLEdBQUdtRixDQUFDLEdBQUcsUUFBUixDQUFBO0NBQ0E5RSxRQUFBQSxDQUFDLEdBQUdXLElBQUksQ0FBQ0UsR0FBTCxDQUFTa0UsQ0FBVCxJQUFjLFFBQWxCLENBQUE7Q0FDQUMsUUFBQUEsQ0FBQyxHQUFHckYsQ0FBQyxHQUFHQSxDQUFKLEdBQVFLLENBQUMsSUFBSSxPQUFVQSxHQUFBQSxDQUFWLEdBQWMsT0FBQSxHQUFVTCxDQUE1QixDQUFiLENBQUE7Q0FDRCxPQU5ELFFBTVNxRixDQUFDLEdBQUcsT0FBSixLQUFnQkEsQ0FBQyxHQUFHLE9BQUosSUFBZUQsQ0FBQyxHQUFHQSxDQUFKLEdBQVEsQ0FBQyxDQUFELEdBQUtwRSxJQUFJLENBQUNULEdBQUwsQ0FBUzRFLENBQVQsQ0FBTCxHQUFtQkEsQ0FBbkIsR0FBdUJBLENBQTlELENBTlQsRUFBQTs7Q0FRQSxNQUFBLE9BQVFDLENBQUMsR0FBR0QsQ0FBTCxHQUFVbkQsRUFBVixHQUFlRCxJQUF0QixDQUFBO0NBQ0QsS0FYRCxDQUFBO0NBY0Y7Q0FDQTtDQUNBO0NBQ0E7OztDQUNFLElBQUEsSUFBSXVELFVBQVUsR0FBRyxVQUFTQyxHQUFULEVBQWM7Q0FDOUIsTUFBQSxTQUFTQyxLQUFULENBQWVDLElBQWYsRUFBcUJDLE1BQXJCLEVBQTZCQyxRQUE3QixFQUF1QztDQUN0QyxRQUFBLElBQUlDLElBQUosQ0FBQTtDQUFBLFlBQVVDLENBQVYsQ0FBQTtDQUFBLFlBQWdCQyxLQUFLLEdBQUcsR0FBeEI7O0NBQ0EsUUFBSUYsS0FBQUEsSUFBSixJQUFZRixNQUFaLEVBQW1CO0NBQ3ZCO0NBQ0E7Q0FDQTtDQUNLRyxVQUFBQSxDQUFDLEdBQUdILE1BQU0sQ0FBQ0UsSUFBRCxDQUFWLENBQUE7O0NBQ0EsVUFBRyxJQUFBLEVBQUVBLElBQUksSUFBSUgsSUFBVixDQUFBLElBQW9CQSxJQUFJLENBQUNHLElBQUQsQ0FBSixLQUFlQyxDQUFmLEtBQXFCLEVBQUVELElBQUksSUFBSUUsS0FBVixDQUFBLElBQW9CQSxLQUFLLENBQUNGLElBQUQsQ0FBTCxLQUFnQkMsQ0FBekQsQ0FBdkIsRUFBb0Y7Q0FDbkZKLFlBQUFBLElBQUksQ0FBQ0csSUFBRCxDQUFKLEdBQWFELFFBQVEsR0FBR0EsUUFBUSxDQUFDRSxDQUFELENBQVgsR0FBaUJBLENBQXRDLENBQUE7Q0FDQSxXQUFBO0NBQ0QsU0FBQTs7Q0FDRCxRQUFBLE9BQU9KLElBQVAsQ0FBQTtDQUNBLE9BQUE7O0NBQ0QsTUFBQSxJQUFHLENBQUNGLEdBQUQsSUFBUSxPQUFPQSxHQUFQLElBQWMsUUFBdEIsSUFBa0NRLE1BQU0sQ0FBQ0MsU0FBUCxDQUFpQkMsUUFBakIsQ0FBMEJDLElBQTFCLENBQStCWCxHQUEvQixDQUFBLEtBQXdDLG1CQUE3RSxFQUFpRztDQUNwRztDQUNJLFFBQU9BLE9BQUFBLEdBQVAsQ0FGZ0c7Q0FHaEcsT0FBQTs7Q0FDRCxNQUFBLElBQUdBLEdBQUcsQ0FBQ1ksUUFBSixJQUFnQixXQUFBLElBQWVaLEdBQWxDLEVBQXNDO0NBQ3pDO0NBQ0ksUUFBQSxPQUFPQSxHQUFHLENBQUNhLFNBQUosQ0FBYyxJQUFkLENBQVAsQ0FGcUM7Q0FHckMsT0FBQTs7Q0FDRCxNQUFHYixJQUFBQSxHQUFHLFlBQVljLElBQWxCLEVBQXVCO0NBQzFCO0NBQ0ksUUFBTyxPQUFBLElBQUlBLElBQUosQ0FBU2QsR0FBRyxDQUFDZSxPQUFKLEVBQVQsQ0FBUCxDQUZzQjtDQUd0QixPQUFBOztDQUNELE1BQUdmLElBQUFBLEdBQUcsWUFBWWdCLE1BQWxCLEVBQXlCO0NBQzVCO0NBQ0ksUUFBQSxPQUFPLElBQUlBLE1BQUosQ0FBV2hCLEdBQVgsQ0FBUCxDQUZ3QjtDQUd4QixPQUFBOztDQUNELE1BQUEsSUFBSWlCLENBQUosRUFBTzFDLENBQVAsRUFBVTJDLENBQVYsQ0FBQTs7Q0FDQSxNQUFHbEIsSUFBQUEsR0FBRyxZQUFZbUIsS0FBbEIsRUFBd0I7Q0FDM0I7Q0FDSUYsUUFBQUEsQ0FBQyxHQUFHLEVBQUosQ0FBQTs7Q0FDQSxRQUFBLEtBQUkxQyxDQUFDLEdBQUcsQ0FBSixFQUFPMkMsQ0FBQyxHQUFHbEIsR0FBRyxDQUFDMUIsTUFBbkIsRUFBMkJDLENBQUMsR0FBRzJDLENBQS9CLEVBQWtDLEVBQUUzQyxDQUFwQyxFQUFzQztDQUNyQyxVQUFHQSxJQUFBQSxDQUFDLElBQUl5QixHQUFSLEVBQVk7Q0FDWGlCLFlBQUFBLENBQUMsQ0FBQ0csSUFBRixDQUFPckIsVUFBVSxDQUFDQyxHQUFHLENBQUN6QixDQUFELENBQUosQ0FBakIsQ0FBQSxDQUFBO0NBQ0EsV0FBQTtDQUNELFNBQUE7Q0FDRCxPQVJELE1BUU87Q0FDVjtDQUNJMEMsUUFBQUEsQ0FBQyxHQUFHakIsR0FBRyxDQUFDcUIsV0FBSixHQUFrQixJQUFJckIsR0FBRyxDQUFDcUIsV0FBUixFQUFsQixHQUEwQyxFQUE5QyxDQUFBO0NBQ0EsT0FBQTs7Q0FDRCxNQUFBLE9BQU9wQixLQUFLLENBQUNnQixDQUFELEVBQUlqQixHQUFKLEVBQVNELFVBQVQsQ0FBWixDQUFBO0NBQ0EsS0E1Q0QsQ0FBQTtDQThDRjtDQUNBO0NBQ0E7Q0FDQTtDQUNBOzs7Q0FDRSxJQUFBLElBQUl1QixnQkFBZ0IsR0FBRyxVQUFTN0csQ0FBVCxFQUFZO0NBQ2pDLE1BQUEsSUFBRzBHLEtBQUssQ0FBQ0ksT0FBTixDQUFjOUcsQ0FBZCxDQUFILEVBQXFCO0NBQ25CLFFBQUcwRyxJQUFBQSxLQUFLLENBQUNJLE9BQU4sQ0FBYzlHLENBQUMsQ0FBQyxDQUFELENBQWYsQ0FBSCxFQUF3QjtDQUM5QjtDQUNRLFVBQUkrRyxJQUFBQSxNQUFNLEdBQUcsRUFBYixDQUFBOztDQUNBLFVBQUEsS0FBSSxJQUFJakQsQ0FBQyxHQUFHLENBQVIsRUFBV0QsTUFBTSxHQUFHN0QsQ0FBQyxDQUFDNkQsTUFBMUIsRUFBa0NDLENBQUMsR0FBR0QsTUFBdEMsRUFBOENDLENBQUMsRUFBL0MsRUFBbUQ7Q0FDakRpRCxZQUFBQSxNQUFNLENBQUNKLElBQVAsQ0FBWUUsZ0JBQWdCLENBQUM3RyxDQUFDLENBQUM4RCxDQUFELENBQUYsQ0FBNUIsQ0FBQSxDQUFBO0NBQ0QsV0FBQTs7Q0FDRCxVQUFBLE9BQU9pRCxNQUFQLENBQUE7Q0FDRCxTQVBELE1BT087Q0FBQTtDQUNMLFVBQUEsT0FBTy9HLENBQUMsQ0FBQ2dILEtBQUYsQ0FBUSxDQUFSLENBQVAsQ0FBQTtDQUNELFNBQUE7Q0FDRixPQVhELE1BV087Q0FBQTtDQUNMLFFBQUEsT0FBT2hILENBQVAsQ0FBQTtDQUNELE9BQUE7Q0FDRixLQWZELENBQUE7Q0FpQkY7Q0FDQTs7O0NBQ0UsSUFBQSxJQUFJaUgsU0FBUyxHQUFHLFVBQVNDLE1BQVQsRUFBaUI7Q0FDN0IsTUFBQSxPQUFPLE9BQU9BLE1BQVAsSUFBaUIsUUFBakIsSUFBOEIsT0FBT0EsTUFBUCxJQUFpQixRQUFqQixJQUE2QkEsTUFBTSxDQUFDTixXQUFQLEtBQXVCTyxNQUF6RixDQUFBO0NBQ0gsS0FGRCxDQUFBO0NBSUY7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBOzs7Q0FDRSxJQUFBLElBQUlDLFlBQVksR0FBRyxVQUFTQyxHQUFULEVBQWNDLElBQWQsRUFBb0I7Q0FDckMsTUFBSUMsSUFBQUEsR0FBRyxHQUFHLElBQUliLEtBQUosQ0FBVVcsR0FBRyxDQUFDLENBQUQsQ0FBYixDQUFWLENBQUE7Q0FDQSxNQUFBLElBQUl2RCxDQUFKLENBQUE7O0NBQ0EsTUFBQSxJQUFHdUQsR0FBRyxDQUFDeEQsTUFBSixJQUFjLENBQWpCLEVBQW9CO0NBQUE7Q0FDbEIsUUFBQSxJQUFHLE9BQU95RCxJQUFQLEtBQWdCLFVBQW5CLEVBQStCO0NBQzdCLFVBQUEsS0FBSXhELENBQUMsR0FBRyxDQUFSLEVBQVdBLENBQUMsR0FBR3VELEdBQUcsQ0FBQyxDQUFELENBQWxCLEVBQXVCdkQsQ0FBQyxFQUF4QixFQUE0QjtDQUMxQnlELFlBQUFBLEdBQUcsQ0FBQ3pELENBQUQsQ0FBSCxHQUFTd0QsSUFBSSxFQUFiLENBQUE7Q0FDRCxXQUFBO0NBQ0YsU0FKRCxNQUlPO0NBQ0wsVUFBQSxLQUFJeEQsQ0FBQyxHQUFHLENBQVIsRUFBV0EsQ0FBQyxHQUFHdUQsR0FBRyxDQUFDLENBQUQsQ0FBbEIsRUFBdUJ2RCxDQUFDLEVBQXhCLEVBQTRCO0NBQzFCeUQsWUFBQUEsR0FBRyxDQUFDekQsQ0FBRCxDQUFILEdBQVN3RCxJQUFULENBQUE7Q0FDRCxXQUFBO0NBQ0YsU0FBQTtDQUNGLE9BVkQsTUFVTyxJQUFHRCxHQUFHLENBQUN4RCxNQUFKLEdBQWEsQ0FBaEIsRUFBbUI7Q0FDeEIsUUFBQSxLQUFJQyxDQUFDLEdBQUcsQ0FBUixFQUFXQSxDQUFDLEdBQUd1RCxHQUFHLENBQUMsQ0FBRCxDQUFsQixFQUF1QnZELENBQUMsRUFBeEIsRUFBNEI7Q0FDMUJ5RCxVQUFBQSxHQUFHLENBQUN6RCxDQUFELENBQUgsR0FBU3NELFlBQVksQ0FBQ0MsR0FBRyxDQUFDTCxLQUFKLENBQVUsQ0FBVixDQUFELEVBQWVNLElBQWYsQ0FBckIsQ0FBQTtDQUNELFNBQUE7Q0FDRixPQUpNLE1BSUE7Q0FDTCxRQUFBLE1BQU0saURBQU4sQ0FBQTtDQUNELE9BQUE7O0NBQ0QsTUFBQSxPQUFPQyxHQUFQLENBQUE7Q0FDRCxLQXJCRCxDQUFBO0NBdUJGO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7OztDQUNFLElBQUEsSUFBSUMsU0FBUyxHQUFHLFVBQVMxRyxDQUFULEVBQVk7Q0FDMUIsTUFBRzRGLElBQUFBLEtBQUssQ0FBQ0ksT0FBTixDQUFjaEcsQ0FBQyxDQUFDLENBQUQsQ0FBZixDQUFILEVBQXdCO0NBQ3RCLFFBQUEsT0FBTyxDQUFDQSxDQUFDLENBQUMrQyxNQUFILEVBQVc0RCxNQUFYLENBQWtCRCxTQUFTLENBQUMxRyxDQUFDLENBQUMsQ0FBRCxDQUFGLENBQTNCLENBQVAsQ0FBQTtDQUNELE9BRkQsTUFFTztDQUNMLFFBQUEsT0FBTyxDQUFDQSxDQUFDLENBQUMrQyxNQUFILENBQVAsQ0FBQTtDQUNELE9BQUE7Q0FDRixLQU5ELENBQUE7Q0FRRjtDQUNBO0NBQ0E7Q0FDQTtDQUNBOzs7Q0FDRSxJQUFBLElBQUk2RCxXQUFXLEdBQUcsVUFBVUMsRUFBVixFQUFjQyxFQUFkLEVBQWtCO0NBQ2hDLE1BQUlELElBQUFBLEVBQUUsQ0FBQzlELE1BQUgsSUFBYStELEVBQUUsQ0FBQy9ELE1BQXBCLEVBQTRCLE9BQU8sS0FBUCxDQUFBOztDQUM1QixNQUFBLEtBQUssSUFBSUMsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBRzZELEVBQUUsQ0FBQzlELE1BQXZCLEVBQStCQyxDQUFDLEVBQWhDLEVBQW9DO0NBQzFDO0NBQ1UsUUFBQSxJQUFJNEMsS0FBSyxDQUFDSSxPQUFOLENBQWNhLEVBQUUsQ0FBQzdELENBQUQsQ0FBaEIsQ0FBQSxJQUF3QjRDLEtBQUssQ0FBQ0ksT0FBTixDQUFjYyxFQUFFLENBQUM5RCxDQUFELENBQWhCLENBQTVCLEVBQWtEO0NBQzVEO0NBQ2MsVUFBQSxJQUFJLENBQUM0RCxXQUFXLENBQUNDLEVBQUUsQ0FBQzdELENBQUQsQ0FBSCxFQUFROEQsRUFBRSxDQUFDOUQsQ0FBRCxDQUFWLENBQWhCLEVBQWdDLE9BQU8sS0FBUCxDQUFBO0NBQ25DLFNBSEQsTUFJSyxJQUFJNkQsRUFBRSxDQUFDN0QsQ0FBRCxDQUFGLElBQVM4RCxFQUFFLENBQUM5RCxDQUFELENBQWYsRUFBb0I7Q0FDbkM7Q0FDYyxVQUFBLE9BQU8sS0FBUCxDQUFBO0NBQ0gsU0FBQTtDQUNKLE9BQUE7O0NBQ0QsTUFBQSxPQUFPLElBQVAsQ0FBQTtDQUNILEtBZEQsQ0FBQTtDQWdCRjtDQUNBO0NBQ0E7Q0FDQTtDQUNBOzs7Q0FDRSxJQUFBLElBQUkrRCxrQkFBa0IsR0FBRyxVQUFTL0csQ0FBVCxFQUFZZ0gsR0FBWixFQUFpQjtDQUN4QyxNQUFBLElBQUdwQixLQUFLLENBQUNJLE9BQU4sQ0FBY2hHLENBQWQsQ0FBSCxFQUFxQjtDQUNuQixRQUFJaUgsSUFBQUEsTUFBTSxHQUFHLElBQUlyQixLQUFKLENBQVU1RixDQUFDLENBQUMrQyxNQUFaLENBQWIsQ0FBQTs7Q0FDQSxRQUFBLEtBQUksSUFBSUMsQ0FBQyxHQUFHLENBQVosRUFBZUEsQ0FBQyxHQUFHaEQsQ0FBQyxDQUFDK0MsTUFBckIsRUFBNkJDLENBQUMsRUFBOUIsRUFBa0M7Q0FDaENpRSxVQUFBQSxNQUFNLENBQUNqRSxDQUFELENBQU4sR0FBWStELGtCQUFrQixDQUFDL0csQ0FBQyxDQUFDZ0QsQ0FBRCxDQUFGLEVBQU9nRSxHQUFQLENBQTlCLENBQUE7Q0FDRCxTQUFBOztDQUNELFFBQUEsT0FBT0MsTUFBUCxDQUFBO0NBQ0QsT0FORCxNQU1PO0NBQ0wsUUFBT0QsT0FBQUEsR0FBRyxDQUFDaEgsQ0FBRCxDQUFWLENBQUE7Q0FDRCxPQUFBO0NBQ0YsS0FWRCxDQUFBO0NBWUY7Q0FDQTtDQUNBO0NBQ0E7OztDQUNFLElBQVNrSCxTQUFBQSxhQUFULENBQXVCQyxLQUF2QixFQUE4QjtDQUMxQixNQUFBLEtBQUssSUFBSW5FLENBQUMsR0FBR21FLEtBQUssQ0FBQ3BFLE1BQU4sR0FBZSxDQUE1QixFQUErQkMsQ0FBQyxHQUFHLENBQW5DLEVBQXNDQSxDQUFDLEVBQXZDLEVBQTJDO0NBQ3ZDLFFBQUEsSUFBSTdELENBQUMsR0FBR2UsSUFBSSxDQUFDaUUsS0FBTCxDQUFXakUsSUFBSSxDQUFDK0QsTUFBTCxFQUFpQmpCLElBQUFBLENBQUMsR0FBRyxDQUFyQixDQUFYLENBQVIsQ0FBQTtDQUNBLFFBQUEsSUFBSW9FLElBQUksR0FBR0QsS0FBSyxDQUFDbkUsQ0FBRCxDQUFoQixDQUFBO0NBQ0FtRSxRQUFBQSxLQUFLLENBQUNuRSxDQUFELENBQUwsR0FBV21FLEtBQUssQ0FBQ2hJLENBQUQsQ0FBaEIsQ0FBQTtDQUNBZ0ksUUFBQUEsS0FBSyxDQUFDaEksQ0FBRCxDQUFMLEdBQVdpSSxJQUFYLENBQUE7Q0FDSCxPQUFBOztDQUNELE1BQUEsT0FBT0QsS0FBUCxDQUFBO0NBQ0gsS0FBQTtDQUVIO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTs7O0NBQ0UsSUFBQSxJQUFJRSx5QkFBeUIsR0FBRyxVQUFTckgsQ0FBVCxFQUFZZ0gsR0FBWixFQUFpQjtDQUMvQyxNQUFBLElBQUdwQixLQUFLLENBQUNJLE9BQU4sQ0FBY2hHLENBQWQsQ0FBSCxFQUFxQjtDQUNuQixRQUFBLElBQUlzSCxHQUFHLEdBQUd0SCxDQUFDLENBQUMrQyxNQUFaLENBQUE7Q0FDQSxRQUFBLElBQUlDLENBQUosQ0FBQTtDQUNBLFFBQUl1RSxJQUFBQSxRQUFRLEdBQUcsRUFBZixDQUFBOztDQUNBLFFBQUl2RSxLQUFBQSxDQUFDLEdBQUcsQ0FBUixFQUFXQSxDQUFDLEdBQUdzRSxHQUFmLEVBQW9CdEUsQ0FBQyxFQUFyQixFQUF5QjtDQUN2QnVFLFVBQUFBLFFBQVEsQ0FBQ3ZFLENBQUQsQ0FBUixHQUFjQSxDQUFkLENBQUE7Q0FDRCxTQUFBOztDQUNEa0UsUUFBQUEsYUFBYSxDQUFDSyxRQUFELENBQWIsQ0FBQTtDQUNBLFFBQUlOLElBQUFBLE1BQU0sR0FBRyxFQUFiLENBQUE7O0NBRUEsUUFBSWpFLEtBQUFBLENBQUMsR0FBRyxDQUFSLEVBQVdBLENBQUMsR0FBR3NFLEdBQWYsRUFBb0J0RSxDQUFDLEVBQXJCLEVBQXlCO0NBQ3ZCLFVBQUEsSUFBSXdFLE9BQU8sR0FBR0QsUUFBUSxDQUFDdkUsQ0FBRCxDQUF0QixDQUFBO0NBQ0FpRSxVQUFBQSxNQUFNLENBQUNPLE9BQUQsQ0FBTixHQUFrQlQsa0JBQWtCLENBQUMvRyxDQUFDLENBQUN3SCxPQUFELENBQUYsRUFBYVIsR0FBYixDQUFwQyxDQUFBO0NBQ0QsU0FBQTs7Q0FDRCxRQUFBLE9BQU9DLE1BQVAsQ0FBQTtDQUNELE9BZkQsTUFlTztDQUNMLFFBQU9ELE9BQUFBLEdBQUcsQ0FBQ2hILENBQUQsQ0FBVixDQUFBO0NBQ0QsT0FBQTtDQUNGLEtBbkJELENBQUE7Q0FxQkY7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBOzs7Q0FDRSxJQUFJeUgsSUFBQUEsVUFBVSxHQUFHLFVBQVNDLFdBQVQsRUFBc0JDLE9BQXRCLEVBQStCQyxZQUEvQixFQUE2QztDQUM1REQsTUFBQUEsT0FBTyxHQUFHQSxPQUFPLElBQUksRUFBckIsQ0FBQTtDQUNBLE1BQU9BLE9BQUFBLE9BQU8sQ0FBQ0UsY0FBUixDQUF1QkgsV0FBdkIsS0FDQUMsT0FBTyxDQUFDRCxXQUFELENBQVAsS0FBeUJJLFNBRHpCLElBRUFILE9BQU8sQ0FBQ0QsV0FBRCxDQUFQLEtBQXlCLElBRnpCLEdBRWdDQyxPQUFPLENBQUNELFdBQUQsQ0FGdkMsR0FFdURFLFlBRjlELENBQUE7Q0FHRCxLQUxELENBQUE7Q0FPRjtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7OztDQUNFLElBQUlHLElBQUFBLG1CQUFtQixHQUFHLFVBQVNMLFdBQVQsRUFBc0JDLE9BQXRCLEVBQStCcEIsR0FBL0IsRUFBb0NxQixZQUFwQyxFQUFrRDtDQUMxRSxNQUFJSSxJQUFBQSxLQUFLLEdBQUdQLFVBQVUsQ0FBQ0MsV0FBRCxFQUFjQyxPQUFkLEVBQXVCQyxZQUF2QixDQUF0QixDQUFBOztDQUNDLE1BQUEsSUFBRyxDQUFFaEMsS0FBSyxDQUFDSSxPQUFOLENBQWNnQyxLQUFkLENBQUwsRUFBMkI7Q0FDekJBLFFBQUFBLEtBQUssR0FBRzFCLFlBQVksQ0FBQ0MsR0FBRCxFQUFNeUIsS0FBTixDQUFwQixDQUFBO0NBQ0QsT0FBQTs7Q0FDRCxNQUFHLElBQUEsQ0FBRXBCLFdBQVcsQ0FBRUYsU0FBUyxDQUFDc0IsS0FBRCxDQUFYLEVBQW9CekIsR0FBcEIsQ0FBaEIsRUFBMEM7Q0FDeEMsUUFBQSxNQUFNLGFBQWdCbUIsR0FBQUEsV0FBaEIsR0FBOEIsb0JBQTlCLEdBQ0FoQixTQUFTLENBQUNzQixLQUFELENBRFQsR0FDbUIsbUJBRG5CLEdBQ3lDekIsR0FEekMsR0FDK0MsSUFEckQsQ0FBQTtDQUVGLE9BQUE7O0NBQ0EsTUFBQSxPQUFPeUIsS0FBUCxDQUFBO0NBQ0YsS0FWRCxDQS9RZ0I7Q0E0UmxCOztDQUVBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7OztDQUNFLElBQUlDLElBQUFBLGdCQUFnQixHQUFHLFVBQVNDLElBQVQsRUFBZUMsS0FBZixFQUFzQkMsS0FBdEIsRUFBNkI7Q0FDbEQsTUFBR0QsSUFBQUEsS0FBSyxHQUFHQyxLQUFYLEVBQWtCO0NBQ2hCLFFBQUEsTUFBTSw4REFBTixDQUFBO0NBQ0QsT0FBQTs7Q0FDRCxNQUFHRixJQUFBQSxJQUFJLEtBQUssTUFBWixFQUFvQjtDQUNsQixRQUFHQyxJQUFBQSxLQUFLLEtBQUssQ0FBQ3ZILFFBQVgsSUFBdUJ3SCxLQUFLLEtBQUt4SCxRQUFwQyxFQUE4QztDQUM1QyxVQUFBLE9BQU8sR0FBUCxDQUFBO0NBQ0QsU0FGRCxNQUVPLElBQUd1SCxLQUFLLEtBQUssQ0FBQ3ZILFFBQWQsRUFBd0I7Q0FDN0IsVUFBT3dILE9BQUFBLEtBQUssR0FBRyxHQUFmLENBQUE7Q0FDRCxTQUZNLE1BRUEsSUFBR0EsS0FBSyxLQUFLeEgsUUFBYixFQUF1QjtDQUM1QixVQUFPdUgsT0FBQUEsS0FBSyxHQUFHLEdBQWYsQ0FBQTtDQUNELFNBRk0sTUFFQSxJQUFHQSxLQUFLLElBQUlDLEtBQVosRUFBbUI7Q0FDeEIsVUFBQSxPQUFPLENBQUNELEtBQUssR0FBR0MsS0FBVCxJQUFrQixDQUF6QixDQUFBO0NBQ0QsU0FBQTtDQUNGLE9BVkQsTUFVTyxJQUFHRixJQUFJLEtBQUssS0FBWixFQUFtQjtDQUN4QixRQUFHQyxJQUFBQSxLQUFLLEtBQUssQ0FBQ3ZILFFBQVgsSUFBdUJ3SCxLQUFLLEtBQUt4SCxRQUFwQyxFQUE4QztDQUM1QyxVQUFBLE9BQU8sQ0FBUCxDQUFBO0NBQ0QsU0FGRCxNQUVPLElBQUd1SCxLQUFLLEtBQUssQ0FBQ3ZILFFBQWQsRUFBd0I7Q0FDN0IsVUFBT3dILE9BQUFBLEtBQUssR0FBRyxDQUFmLENBQUE7Q0FDRCxTQUZNLE1BRUEsSUFBR0EsS0FBSyxLQUFLeEgsUUFBYixFQUF1QjtDQUM1QixVQUFPdUgsT0FBQUEsS0FBSyxHQUFHLENBQWYsQ0FBQTtDQUNELFNBRk0sTUFFQSxJQUFHQSxLQUFLLElBQUlDLEtBQVosRUFBa0I7Q0FDdkIsVUFBT2xJLE9BQUFBLElBQUksQ0FBQ21JLEtBQUwsQ0FBVyxDQUFDRixLQUFLLEdBQUdDLEtBQVQsSUFBa0IsQ0FBN0IsQ0FBUCxDQUFBO0NBQ0QsU0FBQTtDQUNGLE9BVk0sTUFVQSxJQUFHRixJQUFJLEtBQUssUUFBWixFQUFzQjtDQUMzQixRQUFBLE9BQU8sQ0FBUCxDQUFBO0NBQ0QsT0FBQTs7Q0FDRCxNQUFNLE1BQUEseUNBQUEsR0FBNENBLElBQTVDLEdBQW1ELEdBQW5ELEdBQXlEQyxLQUF6RCxHQUFpRSxJQUFqRSxHQUF3RUMsS0FBeEUsR0FBZ0YsR0FBdEYsQ0FBQTtDQUNELEtBNUJELENBQUE7Q0E4QkY7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTs7O0NBQ0UsSUFBQSxJQUFJRSxlQUFlLEdBQUksVUFBU0Msa0JBQVQsRUFBNkJDLFVBQTdCLEVBQXlDO0NBQzlELE1BQUEsSUFBSUMsTUFBTSxHQUFHakUsVUFBVSxDQUFDK0Qsa0JBQUQsQ0FBdkIsQ0FBQTs7Q0FDQSxNQUFBLEtBQUssSUFBSUcsVUFBVCxJQUF1QkQsTUFBdkIsRUFBK0I7Q0FBRSxRQUFBLElBQUksQ0FBQ0EsTUFBTSxDQUFDWixjQUFQLENBQXNCYSxVQUF0QixDQUFMLEVBQXdDLFNBQUE7Q0FDdkUsUUFBQSxJQUFJQyxLQUFLLEdBQUdGLE1BQU0sQ0FBQ0MsVUFBRCxDQUFsQixDQUFBOztDQUNBLFFBQUEsSUFBSSxDQUFDQyxLQUFLLENBQUNkLGNBQU4sQ0FBcUIsTUFBckIsQ0FBTCxFQUFtQztDQUNqQ2MsVUFBQUEsS0FBSyxDQUFDVCxJQUFOLEdBQWEsTUFBYixDQUFBO0NBQ0QsU0FBQTs7Q0FDRCxRQUFBLElBQUcsQ0FBQ1MsS0FBSyxDQUFDZCxjQUFOLENBQXFCLEtBQXJCLENBQUosRUFBaUM7Q0FDL0JjLFVBQUFBLEtBQUssQ0FBQ3BDLEdBQU4sR0FBWSxDQUFDLENBQUQsQ0FBWixDQUFBO0NBQ0QsU0FBQTs7Q0FDRCxRQUFBLElBQUdKLFNBQVMsQ0FBQ3dDLEtBQUssQ0FBQ3BDLEdBQVAsQ0FBWixFQUF5QjtDQUN2Qm9DLFVBQUFBLEtBQUssQ0FBQ3BDLEdBQU4sR0FBWSxDQUFDb0MsS0FBSyxDQUFDcEMsR0FBUCxDQUFaLENBQUE7Q0FDRCxTQUFBOztDQUNELFFBQUEsSUFBR29DLEtBQUssQ0FBQ1QsSUFBTixJQUFjLFFBQWpCLEVBQTJCO0NBQ3pCUyxVQUFBQSxLQUFLLENBQUNQLEtBQU4sR0FBYyxDQUFkLENBQUE7Q0FDQU8sVUFBQUEsS0FBSyxDQUFDUixLQUFOLEdBQWMsQ0FBZCxDQUFBO0NBQ0QsU0FBQTs7Q0FDRCxRQUFBLElBQUcsQ0FBQ1EsS0FBSyxDQUFDZCxjQUFOLENBQXFCLE9BQXJCLENBQUosRUFBbUM7Q0FDakNjLFVBQUFBLEtBQUssQ0FBQ1AsS0FBTixHQUFjeEgsUUFBZCxDQUFBO0NBQ0QsU0FBQTs7Q0FDRCxRQUFBLElBQUcsQ0FBQytILEtBQUssQ0FBQ2QsY0FBTixDQUFxQixPQUFyQixDQUFKLEVBQW1DO0NBQ2pDYyxVQUFBQSxLQUFLLENBQUNSLEtBQU4sR0FBYyxDQUFDdkgsUUFBZixDQUFBO0NBQ0QsU0FBQTs7Q0FFRCxRQUFBLElBQUcrSCxLQUFLLENBQUNkLGNBQU4sQ0FBcUIsTUFBckIsQ0FBSCxFQUFpQztDQUN2QztDQUNRLFVBQUEsSUFBR2pCLFdBQVcsQ0FBQytCLEtBQUssQ0FBQ3BDLEdBQVAsRUFBWSxDQUFDLENBQUQsQ0FBWixDQUFYLElBQStCLE9BQU9vQyxLQUFLLENBQUNuQyxJQUFiLEtBQXNCLFVBQXhELEVBQW9FO0NBQzVFO0NBQ1VtQyxZQUFBQSxLQUFLLENBQUNuQyxJQUFOLEdBQWFtQyxLQUFLLENBQUNuQyxJQUFOLEVBQWIsQ0FBQTtDQUNELFdBSEQsTUFHTyxJQUFHLENBQUNJLFdBQVcsQ0FBQytCLEtBQUssQ0FBQ3BDLEdBQVAsRUFBWSxDQUFDLENBQUQsQ0FBWixDQUFaLElBQWdDLENBQUNYLEtBQUssQ0FBQ0ksT0FBTixDQUFjMkMsS0FBSyxDQUFDbkMsSUFBcEIsQ0FBcEMsRUFBK0Q7Q0FDOUU7Q0FDQTtDQUNBO0NBQ1FtQyxZQUFBQSxLQUFLLENBQUNuQyxJQUFOLEdBQWFGLFlBQVksQ0FBQ3FDLEtBQUssQ0FBQ3BDLEdBQVAsRUFBWW9DLEtBQUssQ0FBQ25DLElBQWxCLENBQXpCLENBQUE7Q0FDQyxXQUFBO0NBQ0YsU0FYRCxNQVdPO0NBQUE7Q0FDTCxVQUFHSSxJQUFBQSxXQUFXLENBQUMrQixLQUFLLENBQUNwQyxHQUFQLEVBQVksQ0FBQyxDQUFELENBQVosQ0FBZCxFQUFnQztDQUM5Qm9DLFlBQUFBLEtBQUssQ0FBQ25DLElBQU4sR0FBYWdDLFVBQVUsQ0FBQ0csS0FBSyxDQUFDVCxJQUFQLEVBQWFTLEtBQUssQ0FBQ1IsS0FBbkIsRUFBMEJRLEtBQUssQ0FBQ1AsS0FBaEMsQ0FBdkIsQ0FBQTtDQUNELFdBRkQsTUFFTztDQUNMTyxZQUFBQSxLQUFLLENBQUNuQyxJQUFOLEdBQWFGLFlBQVksQ0FBQ3FDLEtBQUssQ0FBQ3BDLEdBQVAsRUFBWSxZQUFXO0NBQzlDLGNBQUEsT0FBT2lDLFVBQVUsQ0FBQ0csS0FBSyxDQUFDVCxJQUFQLEVBQWFTLEtBQUssQ0FBQ1IsS0FBbkIsRUFBMEJRLEtBQUssQ0FBQ1AsS0FBaEMsQ0FBakIsQ0FBQTtDQUNELGFBRndCLENBQXpCLENBQUE7Q0FHRCxXQUFBO0NBQ0YsU0FBQTtDQUNGLE9BQUE7O0NBQ0QsTUFBQSxPQUFPSyxNQUFQLENBQUE7Q0FDRCxLQTlDRCxDQS9VZ0I7Q0FpWWxCOztDQUdBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7OztDQUNFLElBQUlHLElBQUFBLE9BQU8sR0FBRyxVQUFTSCxNQUFULEVBQWlCSSxLQUFqQixFQUF3QkMsUUFBeEIsRUFBa0M7Q0FDOUMsTUFBS0wsSUFBQUEsQ0FBQUEsTUFBTCxHQUFjQSxNQUFkLENBQUE7Q0FDQSxNQUFLSSxJQUFBQSxDQUFBQSxLQUFMLEdBQWFBLEtBQWIsQ0FBQTtDQUNBLE1BQUtDLElBQUFBLENBQUFBLFFBQUwsR0FBZ0JBLFFBQWhCLENBQUE7Q0FDRCxLQUpELENBQUE7Q0FNRjtDQUNBO0NBQ0E7Q0FDQTtDQUNBOzs7Q0FDRUYsSUFBQUEsT0FBTyxDQUFDMUQsU0FBUixDQUFrQjZELElBQWxCLEdBQXlCLFlBQVc7Q0FDbEMsTUFBQSxNQUFNLHdDQUFOLENBQUE7Q0FDRCxLQUZELENBQUE7Q0FJRjtDQUNBO0NBQ0E7OztDQUNFSCxJQUFBQSxPQUFPLENBQUMxRCxTQUFSLENBQWtCOEQsZ0JBQWxCLEdBQXFDLFlBQVc7Q0FFL0MsS0FGRCxDQUFBO0NBSUY7Q0FDQTtDQUNBOzs7Q0FDRUosSUFBQUEsT0FBTyxDQUFDMUQsU0FBUixDQUFrQitELGVBQWxCLEdBQW9DLFlBQVc7Q0FFOUMsS0FGRCxDQUFBO0NBSUY7Q0FDQTtDQUNBOzs7Q0FDRUwsSUFBQUEsT0FBTyxDQUFDMUQsU0FBUixDQUFrQmdFLElBQWxCLEdBQXlCLFlBQVc7Q0FDdEM7Q0FDSSxNQUFBLE9BQU8sRUFBUCxDQUFBO0NBQ0QsS0FIRCxDQUFBO0NBTUY7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTs7O0NBQ0UsSUFBQSxJQUFJQyx1QkFBdUIsR0FBRyxVQUFTVixNQUFULEVBQWlCSSxLQUFqQixFQUF3QkMsUUFBeEIsRUFBa0NuQixPQUFsQyxFQUEyQ3lCLGlCQUEzQyxFQUE4RDtDQUMxRlIsTUFBQUEsT0FBTyxDQUFDeEQsSUFBUixDQUFhLElBQWIsRUFBbUJxRCxNQUFuQixFQUEyQkksS0FBM0IsRUFBa0NDLFFBQWxDLENBQUEsQ0FBQTtDQUVBLE1BQUlPLElBQUFBLFdBQVcsR0FBR3BFLE1BQU0sQ0FBQ3FFLElBQVAsQ0FBWSxJQUFBLENBQUtiLE1BQWpCLENBQWxCLENBQUE7O0NBQ0EsTUFBQSxJQUFHWSxXQUFXLENBQUN0RyxNQUFaLElBQXVCLENBQTFCLEVBQTZCO0NBQzNCLFFBQUEsTUFBTSx3REFBTixDQUFBO0NBQ0QsT0FBQTs7Q0FDRCxNQUFBLElBQUEsQ0FBSzJGLFVBQUwsR0FBa0JXLFdBQVcsQ0FBQyxDQUFELENBQTdCLENBQUE7Q0FDQSxNQUFBLElBQUlWLEtBQUssR0FBRyxJQUFBLENBQUtGLE1BQUwsQ0FBWSxJQUFBLENBQUtDLFVBQWpCLENBQVosQ0FBQTs7Q0FDQSxNQUFHLElBQUEsQ0FBQzlCLFdBQVcsQ0FBQytCLEtBQUssQ0FBQ3BDLEdBQVAsRUFBWSxDQUFDLENBQUQsQ0FBWixDQUFmLEVBQWlDO0NBQy9CLFFBQUEsTUFBTSx3RUFBTixDQUFBO0NBQ0QsT0FBQTs7Q0FDRCxNQUFBLElBQUEsQ0FBSzRCLEtBQUwsR0FBYVEsS0FBSyxDQUFDUixLQUFuQixDQUFBO0NBQ0EsTUFBQSxJQUFBLENBQUtDLEtBQUwsR0FBYU8sS0FBSyxDQUFDUCxLQUFuQixDQUFBO0NBRUEsTUFBS21CLElBQUFBLENBQUFBLGNBQUwsR0FBMEI5QixVQUFVLENBQUMsZ0JBQUQsRUFBbUJFLE9BQW5CLEVBQTRCLENBQTVCLENBQXBDLENBQUE7Q0FDQSxNQUFLNkIsSUFBQUEsQ0FBQUEsVUFBTCxHQUEwQi9CLFVBQVUsQ0FBQyxZQUFELEVBQWVFLE9BQWYsRUFBd0IsRUFBeEIsQ0FBcEMsQ0FBQTtDQUNBLE1BQUs4QixJQUFBQSxDQUFBQSxjQUFMLEdBQTBCaEMsVUFBVSxDQUFDLGdCQUFELEVBQW1CRSxPQUFuQixFQUE0QixJQUE1QixDQUFwQyxDQUFBO0NBQ0EsTUFBSytCLElBQUFBLENBQUFBLGtCQUFMLEdBQTBCakMsVUFBVSxDQUFDLG9CQUFELEVBQXVCRSxPQUF2QixFQUFnQyxHQUFoQyxDQUFwQyxDQUFBO0NBQ0EsTUFBS2dDLElBQUFBLENBQUFBLGtCQUFMLEdBQTBCbEMsVUFBVSxDQUFDLG9CQUFELEVBQXVCRSxPQUF2QixFQUFnQyxJQUFoQyxDQUFwQyxDQUFBO0NBQ0EsTUFBS2lDLElBQUFBLENBQUFBLFdBQUwsR0FBMEJuQyxVQUFVLENBQUMsYUFBRCxFQUFnQkUsT0FBaEIsRUFBeUIsSUFBekIsQ0FBcEMsQ0FBQTtDQUVBLE1BQUt5QixJQUFBQSxDQUFBQSxpQkFBTCxHQUF5QkEsaUJBQXpCLENBQUE7Q0FFQSxNQUFLUyxJQUFBQSxDQUFBQSxnQkFBTCxHQUF3QixDQUF4QixDQUFBO0NBQ0EsTUFBS0MsSUFBQUEsQ0FBQUEsV0FBTCxHQUFtQixDQUFuQixDQUFBO0NBQ0EsTUFBS0MsSUFBQUEsQ0FBQUEseUJBQUwsR0FBaUMsQ0FBakMsQ0FBQTtDQUNELEtBM0JELENBQUE7O0NBNkJBWixJQUFBQSx1QkFBdUIsQ0FBQ2pFLFNBQXhCLEdBQW9DRCxNQUFNLENBQUMrRSxNQUFQLENBQWNwQixPQUFPLENBQUMxRCxTQUF0QixDQUFwQyxDQUFBO0NBQ0FpRSxJQUFBQSx1QkFBdUIsQ0FBQ2pFLFNBQXhCLENBQWtDWSxXQUFsQyxHQUFnRHFELHVCQUFoRCxDQUFBOztDQUVBQSxJQUFBQSx1QkFBdUIsQ0FBQ2pFLFNBQXhCLENBQWtDNkQsSUFBbEMsR0FBeUMsWUFBVztDQUNoRCxNQUFBLElBQUlrQixXQUFXLEdBQUcsSUFBQSxDQUFLcEIsS0FBTCxDQUFXLElBQUEsQ0FBS0gsVUFBaEIsQ0FBbEIsQ0FBQTtDQUNBLE1BQUl3QixJQUFBQSxjQUFjLEdBQUcsSUFBS2QsQ0FBQUEsaUJBQUwsQ0FBdUJhLFdBQXZCLEVBQW9DLElBQUtWLENBQUFBLGNBQXpDLENBQXJCLENBQUE7O0NBQ0EsTUFBR1csSUFBQUEsY0FBYyxHQUFHLElBQUEsQ0FBSy9CLEtBQXRCLElBQStCK0IsY0FBYyxHQUFHLElBQUEsQ0FBSzlCLEtBQXhELEVBQStELENBQS9ELE1BR087Q0FBQTtDQUNMLFFBQUEsSUFBSStCLGFBQWEsR0FBRyxJQUFLckIsQ0FBQUEsUUFBTCxFQUFwQixDQUFBO0NBQ0EsUUFBQSxJQUFBLENBQUtELEtBQUwsQ0FBVyxJQUFLSCxDQUFBQSxVQUFoQixJQUE4QndCLGNBQTlCLENBQUE7Q0FDQSxRQUFBLElBQUlFLGFBQWEsR0FBRyxJQUFLdEIsQ0FBQUEsUUFBTCxFQUFwQixDQUFBO0NBQ0EsUUFBSXVCLElBQUFBLFdBQVcsR0FBR25LLElBQUksQ0FBQ0MsR0FBTCxDQUFTaUssYUFBYSxHQUFHRCxhQUF6QixDQUFsQixDQUFBOztDQUNBLFFBQUEsSUFBR0UsV0FBVyxHQUFHbkssSUFBSSxDQUFDK0QsTUFBTCxFQUFqQixFQUFnQztDQUN4QztDQUNVLFVBQUEsSUFBRyxJQUFLMkYsQ0FBQUEsV0FBUixFQUFxQixJQUFBLENBQUtDLGdCQUFMLEVBQUEsQ0FBQTtDQUN0QixTQUhELE1BR087Q0FDZjtDQUNVLFVBQUEsSUFBQSxDQUFLaEIsS0FBTCxDQUFXLElBQUtILENBQUFBLFVBQWhCLElBQThCdUIsV0FBOUIsQ0FBQTtDQUNELFNBQUE7Q0FDRixPQUFBOztDQUNELE1BQUcsSUFBQSxJQUFBLENBQUtMLFdBQVIsRUFBcUI7Q0FDbkIsUUFBQSxJQUFBLENBQUtHLHlCQUFMLEVBQUEsQ0FBQTs7Q0FDQSxRQUFBLElBQUcsSUFBS0EsQ0FBQUEseUJBQUwsSUFBa0MsSUFBQSxDQUFLUCxVQUExQyxFQUFzRDtDQUFBO0NBQ3BELFVBQUEsSUFBQSxDQUFLTSxXQUFMLEVBQUEsQ0FBQTtDQUNBLFVBQUEsSUFBSVEsaUJBQWlCLEdBQ25CcEssSUFBSSxDQUFDZ0QsR0FBTCxDQUFTLEtBQUt1RyxjQUFkLEVBQ1MsS0FBS0Msa0JBQUwsR0FBMEJ4SixJQUFJLENBQUNJLElBQUwsQ0FBVSxJQUFLd0osQ0FBQUEsV0FBZixDQURuQyxDQURGLENBQUE7O0NBR0EsVUFBRyxJQUFBLElBQUEsQ0FBS0QsZ0JBQUwsR0FBd0IsSUFBQSxDQUFLTCxVQUE3QixHQUEwQyxJQUFBLENBQUtHLGtCQUFsRCxFQUFzRTtDQUNwRSxZQUFLSixJQUFBQSxDQUFBQSxjQUFMLElBQXVCZSxpQkFBdkIsQ0FBQTtDQUNELFdBRkQsTUFFTztDQUNMLFlBQUtmLElBQUFBLENBQUFBLGNBQUwsSUFBdUJlLGlCQUF2QixDQUFBO0NBQ0QsV0FBQTs7Q0FDRCxVQUFLVCxJQUFBQSxDQUFBQSxnQkFBTCxHQUF3QixDQUF4QixDQUFBO0NBQ0EsVUFBS0UsSUFBQUEsQ0FBQUEseUJBQUwsR0FBaUMsQ0FBakMsQ0FBQTtDQUNELFNBQUE7Q0FDRixPQUFBOztDQUNELE1BQUEsT0FBTyxJQUFLbEIsQ0FBQUEsS0FBTCxDQUFXLElBQUEsQ0FBS0gsVUFBaEIsQ0FBUCxDQUFBO0NBQ0gsS0FwQ0QsQ0FBQTs7Q0FzQ0FTLElBQUFBLHVCQUF1QixDQUFDakUsU0FBeEIsQ0FBa0M4RCxnQkFBbEMsR0FBcUQsWUFBVztDQUM5RCxNQUFLWSxJQUFBQSxDQUFBQSxXQUFMLEdBQW1CLElBQW5CLENBQUE7Q0FDRCxLQUZELENBQUE7O0NBSUFULElBQUFBLHVCQUF1QixDQUFDakUsU0FBeEIsQ0FBa0MrRCxlQUFsQyxHQUFvRCxZQUFXO0NBQzdELE1BQUtXLElBQUFBLENBQUFBLFdBQUwsR0FBbUIsS0FBbkIsQ0FBQTtDQUNELEtBRkQsQ0FBQTs7Q0FJQVQsSUFBQUEsdUJBQXVCLENBQUNqRSxTQUF4QixDQUFrQ2dFLElBQWxDLEdBQXlDLFlBQVc7Q0FDbEQsTUFBTyxPQUFBO0NBQ0xLLFFBQUFBLGNBQWMsRUFBRSxJQUFBLENBQUtBLGNBRGhCO0NBRUxLLFFBQUFBLFdBQVcsRUFBRSxJQUFBLENBQUtBLFdBRmI7Q0FHTEMsUUFBQUEsZ0JBQWdCLEVBQUUsSUFBQSxDQUFLQSxnQkFIbEI7Q0FJTEUsUUFBQUEseUJBQXlCLEVBQUUsSUFBQSxDQUFLQSx5QkFKM0I7Q0FLTEQsUUFBQUEsV0FBVyxFQUFFLElBQUtBLENBQUFBLFdBQUFBO0NBTGIsT0FBUCxDQUFBO0NBT0QsS0FSRCxDQUFBO0NBV0Y7Q0FDQTtDQUNBOzs7Q0FDRSxJQUFBLElBQUlTLGVBQWUsR0FBRyxVQUFTTixXQUFULEVBQXNCVixjQUF0QixFQUFzQztDQUMxRCxNQUFPbkYsT0FBQUEsS0FBSyxDQUFDNkYsV0FBRCxFQUFlL0osSUFBSSxDQUFDQyxHQUFMLENBQVNvSixjQUFULENBQWYsQ0FBWixDQUFBO0NBQ0QsS0FGRCxDQUFBO0NBSUY7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTs7O0NBQ0UsSUFBSWlCLElBQUFBLHFCQUFxQixHQUFHLFVBQVMvQixNQUFULEVBQWlCSSxLQUFqQixFQUF3QkMsUUFBeEIsRUFBa0NuQixPQUFsQyxFQUEyQztDQUNyRXdCLE1BQUFBLHVCQUF1QixDQUFDL0QsSUFBeEIsQ0FBNkIsSUFBN0IsRUFBbUNxRCxNQUFuQyxFQUEyQ0ksS0FBM0MsRUFBa0RDLFFBQWxELEVBQTREbkIsT0FBNUQsRUFBcUU0QyxlQUFyRSxDQUFBLENBQUE7Q0FDRCxLQUZELENBQUE7O0NBSUFDLElBQUFBLHFCQUFxQixDQUFDdEYsU0FBdEIsR0FBa0NELE1BQU0sQ0FBQytFLE1BQVAsQ0FBY2IsdUJBQXVCLENBQUNqRSxTQUF0QyxDQUFsQyxDQUFBO0NBQ0FzRixJQUFBQSxxQkFBcUIsQ0FBQ3RGLFNBQXRCLENBQWdDWSxXQUFoQyxHQUE4QzBFLHFCQUE5QyxDQUFBO0NBRUY7Q0FDQTtDQUNBOztDQUNFLElBQUEsSUFBSUMsd0JBQXdCLEdBQUcsVUFBU1IsV0FBVCxFQUFzQlYsY0FBdEIsRUFBc0M7Q0FDbkUsTUFBQSxPQUFPckosSUFBSSxDQUFDbUksS0FBTCxDQUFXakUsS0FBSyxDQUFDNkYsV0FBRCxFQUFlL0osSUFBSSxDQUFDQyxHQUFMLENBQVNvSixjQUFULENBQWYsQ0FBaEIsQ0FBUCxDQUFBO0NBQ0QsS0FGRCxDQUFBO0NBSUY7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTs7O0NBQ0UsSUFBSW1CLElBQUFBLG9CQUFvQixHQUFHLFVBQVNqQyxNQUFULEVBQWlCSSxLQUFqQixFQUF3QkMsUUFBeEIsRUFBa0NuQixPQUFsQyxFQUEyQztDQUNwRXdCLE1BQUFBLHVCQUF1QixDQUFDL0QsSUFBeEIsQ0FBNkIsSUFBN0IsRUFBbUNxRCxNQUFuQyxFQUEyQ0ksS0FBM0MsRUFBa0RDLFFBQWxELEVBQTREbkIsT0FBNUQsRUFBcUU4Qyx3QkFBckUsQ0FBQSxDQUFBO0NBQ0QsS0FGRCxDQUFBOztDQUlBQyxJQUFBQSxvQkFBb0IsQ0FBQ3hGLFNBQXJCLEdBQWlDRCxNQUFNLENBQUMrRSxNQUFQLENBQWNiLHVCQUF1QixDQUFDakUsU0FBdEMsQ0FBakMsQ0FBQTtDQUNBd0YsSUFBQUEsb0JBQW9CLENBQUN4RixTQUFyQixDQUErQlksV0FBL0IsR0FBNkM0RSxvQkFBN0MsQ0FBQTtDQUdGO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTs7Q0FDRSxJQUFBLElBQUlDLGtDQUFrQyxHQUFHLFVBQVNsQyxNQUFULEVBQWlCSSxLQUFqQixFQUF3QkMsUUFBeEIsRUFBa0NuQixPQUFsQyxFQUEyQ2lELFVBQTNDLEVBQXVEO0NBQzlGaEMsTUFBQUEsT0FBTyxDQUFDeEQsSUFBUixDQUFhLElBQWIsRUFBbUJxRCxNQUFuQixFQUEyQkksS0FBM0IsRUFBa0NDLFFBQWxDLENBQUEsQ0FBQTtDQUVBLE1BQUlPLElBQUFBLFdBQVcsR0FBR3BFLE1BQU0sQ0FBQ3FFLElBQVAsQ0FBWSxJQUFBLENBQUtiLE1BQWpCLENBQWxCLENBQUE7O0NBQ0EsTUFBQSxJQUFHWSxXQUFXLENBQUN0RyxNQUFaLElBQXVCLENBQTFCLEVBQTZCO0NBQzNCLFFBQUEsTUFBTSwwRUFBTixDQUFBO0NBQ0QsT0FBQTs7Q0FDRCxNQUFBLElBQUEsQ0FBSzJGLFVBQUwsR0FBa0JXLFdBQVcsQ0FBQyxDQUFELENBQTdCLENBQUE7Q0FDQSxNQUFBLElBQUlWLEtBQUssR0FBRyxJQUFBLENBQUtGLE1BQUwsQ0FBWSxJQUFBLENBQUtDLFVBQWpCLENBQVosQ0FBQTtDQUNBLE1BQUEsSUFBQSxDQUFLUCxLQUFMLEdBQWFRLEtBQUssQ0FBQ1IsS0FBbkIsQ0FBQTtDQUNBLE1BQUEsSUFBQSxDQUFLQyxLQUFMLEdBQWFPLEtBQUssQ0FBQ1AsS0FBbkIsQ0FBQTtDQUNBLE1BQUEsSUFBQSxDQUFLN0IsR0FBTCxHQUFXb0MsS0FBSyxDQUFDcEMsR0FBakIsQ0FBQTtDQUVBLE1BQUEsSUFBQSxDQUFLZ0QsY0FBTCxHQUEwQnhCLG1CQUFtQixDQUFDLGdCQUFELEVBQW1CSixPQUFuQixFQUE0QixJQUFLcEIsQ0FBQUEsR0FBakMsRUFBc0MsQ0FBdEMsQ0FBN0MsQ0FBQTtDQUNBLE1BQUEsSUFBQSxDQUFLaUQsVUFBTCxHQUEwQnpCLG1CQUFtQixDQUFDLFlBQUQsRUFBZUosT0FBZixFQUF3QixJQUFLcEIsQ0FBQUEsR0FBN0IsRUFBa0MsRUFBbEMsQ0FBN0MsQ0FBQTtDQUNBLE1BQUEsSUFBQSxDQUFLa0QsY0FBTCxHQUEwQjFCLG1CQUFtQixDQUFDLGdCQUFELEVBQW1CSixPQUFuQixFQUE0QixJQUFLcEIsQ0FBQUEsR0FBakMsRUFBc0MsSUFBdEMsQ0FBN0MsQ0FBQTtDQUNBLE1BQUEsSUFBQSxDQUFLbUQsa0JBQUwsR0FBMEIzQixtQkFBbUIsQ0FBQyxvQkFBRCxFQUF1QkosT0FBdkIsRUFBZ0MsSUFBS3BCLENBQUFBLEdBQXJDLEVBQTBDLEdBQTFDLENBQTdDLENBQUE7Q0FDQSxNQUFBLElBQUEsQ0FBS29ELGtCQUFMLEdBQTBCNUIsbUJBQW1CLENBQUMsb0JBQUQsRUFBdUJKLE9BQXZCLEVBQWdDLElBQUtwQixDQUFBQSxHQUFyQyxFQUEwQyxJQUExQyxDQUE3QyxDQUFBO0NBQ0EsTUFBQSxJQUFBLENBQUtxRCxXQUFMLEdBQTBCN0IsbUJBQW1CLENBQUMsYUFBRCxFQUFnQkosT0FBaEIsRUFBeUIsSUFBQSxDQUFLcEIsR0FBOUIsRUFBbUMsSUFBbkMsQ0FBN0MsQ0FsQjhGO0NBcUJsRzs7Q0FDSSxNQUFJc0UsSUFBQUEsa0JBQWtCLEdBQ3BCLFVBQVN0RSxHQUFULEVBQWN1RSxRQUFkLEVBQXdCaEMsUUFBeEIsRUFBa0NTLGNBQWxDLEVBQWtEQyxVQUFsRCxFQUE4REMsY0FBOUQsRUFBOEVDLGtCQUE5RSxFQUFrR0Msa0JBQWxHLEVBQXNIQyxXQUF0SCxFQUFtSTtDQUNuSSxRQUFJbUIsSUFBQUEsV0FBVyxHQUFHLEVBQWxCLENBQUE7O0NBQ0EsUUFBQSxJQUFHeEUsR0FBRyxDQUFDeEQsTUFBSixLQUFlLENBQWxCLEVBQXFCO0NBQ25CLFVBQUEsS0FBSSxJQUFJQyxDQUFDLEdBQUcsQ0FBWixFQUFlQSxDQUFDLEdBQUd1RCxHQUFHLENBQUMsQ0FBRCxDQUF0QixFQUEyQnZELENBQUMsRUFBNUIsRUFBZ0M7Q0FDOUIsWUFBQSxJQUFJZ0ksVUFBVSxHQUFHO0NBQUN6QixjQUFBQSxjQUFjLEVBQUVBLGNBQWMsQ0FBQ3ZHLENBQUQsQ0FBL0I7Q0FBb0N3RyxjQUFBQSxVQUFVLEVBQUVBLFVBQVUsQ0FBQ3hHLENBQUQsQ0FBMUQ7Q0FDZnlHLGNBQUFBLGNBQWMsRUFBRUEsY0FBYyxDQUFDekcsQ0FBRCxDQURmO0NBQ29CMEcsY0FBQUEsa0JBQWtCLEVBQUVBLGtCQUFrQixDQUFDMUcsQ0FBRCxDQUQxRDtDQUVmMkcsY0FBQUEsa0JBQWtCLEVBQUVBLGtCQUFrQixDQUFDM0csQ0FBRCxDQUZ2QjtDQUU0QjRHLGNBQUFBLFdBQVcsRUFBRUEsV0FBVyxDQUFDNUcsQ0FBRCxDQUFBO0NBRnBELGFBQWpCLENBQUE7Q0FHRSxZQUFJaUksSUFBQUEsUUFBUSxHQUFHLEVBQWYsQ0FBQTtDQUNBQSxZQUFBQSxRQUFRLENBQUNqSSxDQUFELENBQVIsR0FBY3dCLFVBQVUsQ0FBQ21FLEtBQUQsQ0FBeEIsQ0FBQTtDQUNBc0MsWUFBQUEsUUFBUSxDQUFDakksQ0FBRCxDQUFSLENBQVl1RCxHQUFaLEdBQWtCLENBQUMsQ0FBRCxDQUFsQixDQU40Qjs7Q0FPNUIsWUFBQSxPQUFPMEUsUUFBUSxDQUFDakksQ0FBRCxDQUFSLENBQVl3RCxJQUFuQixDQVA0Qjs7Q0FROUJ1RSxZQUFBQSxXQUFXLENBQUMvSCxDQUFELENBQVgsR0FBaUIsSUFBSTRILFVBQUosQ0FBZUssUUFBZixFQUF5QkgsUUFBekIsRUFBbUNoQyxRQUFuQyxFQUE2Q2tDLFVBQTdDLENBQWpCLENBQUE7Q0FDRCxXQUFBO0NBQ0YsU0FYRCxNQVdPO0NBQ0wsVUFBQSxLQUFJLElBQUloSSxDQUFDLEdBQUcsQ0FBWixFQUFlQSxDQUFDLEdBQUd1RCxHQUFHLENBQUMsQ0FBRCxDQUF0QixFQUEyQnZELENBQUMsRUFBNUIsRUFBZ0M7Q0FDOUIrSCxZQUFBQSxXQUFXLENBQUMvSCxDQUFELENBQVgsR0FBaUI2SCxrQkFBa0IsQ0FBQ3RFLEdBQUcsQ0FBQ0wsS0FBSixDQUFVLENBQVYsQ0FBRCxFQUFlNEUsUUFBUSxDQUFDOUgsQ0FBRCxDQUF2QixFQUE0QjhGLFFBQTVCLEVBQXNDUyxjQUFjLENBQUN2RyxDQUFELENBQXBELEVBQ2pDd0csVUFBVSxDQUFDeEcsQ0FBRCxDQUR1QixFQUNsQnlHLGNBQWMsQ0FBQ3pHLENBQUQsQ0FESSxFQUNDMEcsa0JBQWtCLENBQUMxRyxDQUFELENBRG5CLEVBQ3dCMkcsa0JBQWtCLENBQUMzRyxDQUFELENBRDFDLEVBQytDNEcsV0FBVyxDQUFDNUcsQ0FBRCxDQUQxRCxDQUFuQyxDQUFBO0NBRUQsV0FBQTtDQUNGLFNBQUE7O0NBQ0QsUUFBQSxPQUFPK0gsV0FBUCxDQUFBO0NBQ0QsT0FyQkQsQ0FBQTs7Q0F1QkEsTUFBQSxJQUFBLENBQUtBLFdBQUwsR0FBbUJGLGtCQUFrQixDQUFDLEtBQUt0RSxHQUFOLEVBQVcsSUFBS3NDLENBQUFBLEtBQUwsQ0FBVyxJQUFLSCxDQUFBQSxVQUFoQixDQUFYLEVBQXdDLEtBQUtJLFFBQTdDLEVBQ25DLElBQUtTLENBQUFBLGNBRDhCLEVBQ2QsSUFBQSxDQUFLQyxVQURTLEVBQ0csS0FBS0MsY0FEUixFQUN3QixJQUFLQyxDQUFBQSxrQkFEN0IsRUFFbkMsSUFBS0MsQ0FBQUEsa0JBRjhCLEVBRVYsSUFBQSxDQUFLQyxXQUZLLENBQXJDLENBQUE7Q0FJRCxLQWpERCxDQUFBOztDQW1EQWUsSUFBQUEsa0NBQWtDLENBQUN6RixTQUFuQyxHQUErQ0QsTUFBTSxDQUFDK0UsTUFBUCxDQUFjcEIsT0FBTyxDQUFDMUQsU0FBdEIsQ0FBL0MsQ0FBQTtDQUNBeUYsSUFBQUEsa0NBQWtDLENBQUN6RixTQUFuQyxDQUE2Q1ksV0FBN0MsR0FBMkQ2RSxrQ0FBM0QsQ0FBQTs7Q0FFQUEsSUFBQUEsa0NBQWtDLENBQUN6RixTQUFuQyxDQUE2QzZELElBQTdDLEdBQW9ELFlBQVc7Q0FDakU7Q0FDSSxNQUFBLE9BQU8xQix5QkFBeUIsQ0FBQyxJQUFBLENBQUswRCxXQUFOLEVBQW1CLFVBQVNHLFVBQVQsRUFBcUI7Q0FBQyxRQUFPQSxPQUFBQSxVQUFVLENBQUNuQyxJQUFYLEVBQVAsQ0FBQTtDQUEyQixPQUFwRSxDQUFoQyxDQUFBO0NBQ0QsS0FIRCxDQUFBOztDQUtBNEIsSUFBQUEsa0NBQWtDLENBQUN6RixTQUFuQyxDQUE2QzhELGdCQUE3QyxHQUFnRSxZQUFXO0NBQ3pFakMsTUFBQUEsa0JBQWtCLENBQUMsSUFBQSxDQUFLZ0UsV0FBTixFQUFtQixVQUFTRyxVQUFULEVBQXFCO0NBQUNBLFFBQUFBLFVBQVUsQ0FBQ2xDLGdCQUFYLEVBQUEsQ0FBQTtDQUFnQyxPQUF6RSxDQUFsQixDQUFBO0NBQ0QsS0FGRCxDQUFBOztDQUlBMkIsSUFBQUEsa0NBQWtDLENBQUN6RixTQUFuQyxDQUE2QytELGVBQTdDLEdBQStELFlBQVc7Q0FDeEVsQyxNQUFBQSxrQkFBa0IsQ0FBQyxJQUFBLENBQUtnRSxXQUFOLEVBQW1CLFVBQVNHLFVBQVQsRUFBcUI7Q0FBQ0EsUUFBQUEsVUFBVSxDQUFDakMsZUFBWCxFQUFBLENBQUE7Q0FBK0IsT0FBeEUsQ0FBbEIsQ0FBQTtDQUNELEtBRkQsQ0FBQTs7Q0FJQTBCLElBQUFBLGtDQUFrQyxDQUFDekYsU0FBbkMsQ0FBNkNnRSxJQUE3QyxHQUFvRCxZQUFXO0NBQzdELE1BQUEsT0FBT25DLGtCQUFrQixDQUFDLElBQUEsQ0FBS2dFLFdBQU4sRUFBbUIsVUFBU0csVUFBVCxFQUFxQjtDQUMvRCxRQUFPQSxPQUFBQSxVQUFVLENBQUNoQyxJQUFYLEVBQVAsQ0FBQTtDQUNELE9BRndCLENBQXpCLENBQUE7Q0FHRCxLQUpELENBQUE7Q0FNRjtDQUNBO0NBQ0E7Q0FDQTtDQUNBOzs7Q0FDRSxJQUFJaUMsSUFBQUEsbUNBQW1DLEdBQUcsVUFBUzFDLE1BQVQsRUFBaUJJLEtBQWpCLEVBQXdCQyxRQUF4QixFQUFrQ25CLE9BQWxDLEVBQTJDO0NBQ25GZ0QsTUFBQUEsa0NBQWtDLENBQUN2RixJQUFuQyxDQUF3QyxJQUF4QyxFQUE4Q3FELE1BQTlDLEVBQXNESSxLQUF0RCxFQUE2REMsUUFBN0QsRUFBdUVuQixPQUF2RSxFQUFnRjZDLHFCQUFoRixDQUFBLENBQUE7Q0FDRCxLQUZELENBQUE7O0NBSUFXLElBQUFBLG1DQUFtQyxDQUFDakcsU0FBcEMsR0FBZ0RELE1BQU0sQ0FBQytFLE1BQVAsQ0FBY1csa0NBQWtDLENBQUN6RixTQUFqRCxDQUFoRCxDQUFBO0NBQ0FpRyxJQUFBQSxtQ0FBbUMsQ0FBQ2pHLFNBQXBDLENBQThDWSxXQUE5QyxHQUE0RHFGLG1DQUE1RCxDQUFBO0NBRUY7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTs7Q0FDRSxJQUFJQyxJQUFBQSxrQ0FBa0MsR0FBRyxVQUFTM0MsTUFBVCxFQUFpQkksS0FBakIsRUFBd0JDLFFBQXhCLEVBQWtDbkIsT0FBbEMsRUFBMkM7Q0FDbEZnRCxNQUFBQSxrQ0FBa0MsQ0FBQ3ZGLElBQW5DLENBQXdDLElBQXhDLEVBQThDcUQsTUFBOUMsRUFBc0RJLEtBQXRELEVBQTZEQyxRQUE3RCxFQUF1RW5CLE9BQXZFLEVBQWdGK0Msb0JBQWhGLENBQUEsQ0FBQTtDQUNELEtBRkQsQ0FBQTs7Q0FJQVUsSUFBQUEsa0NBQWtDLENBQUNsRyxTQUFuQyxHQUErQ0QsTUFBTSxDQUFDK0UsTUFBUCxDQUFjVyxrQ0FBa0MsQ0FBQ3pGLFNBQWpELENBQS9DLENBQUE7Q0FDQWtHLElBQUFBLGtDQUFrQyxDQUFDbEcsU0FBbkMsQ0FBNkNZLFdBQTdDLEdBQTJEc0Ysa0NBQTNELENBQUE7Q0FFRjtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7O0NBQ0UsSUFBSUMsSUFBQUEsYUFBYSxHQUFHLFVBQVM1QyxNQUFULEVBQWlCSSxLQUFqQixFQUF3QkMsUUFBeEIsRUFBa0NuQixPQUFsQyxFQUEyQztDQUM3RGlCLE1BQUFBLE9BQU8sQ0FBQ3hELElBQVIsQ0FBYSxJQUFiLEVBQW1CcUQsTUFBbkIsRUFBMkJJLEtBQTNCLEVBQWtDQyxRQUFsQyxDQUFBLENBQUE7Q0FDQSxNQUFJTyxJQUFBQSxXQUFXLEdBQUdwRSxNQUFNLENBQUNxRSxJQUFQLENBQVksSUFBQSxDQUFLYixNQUFqQixDQUFsQixDQUFBOztDQUNBLE1BQUEsSUFBR1ksV0FBVyxDQUFDdEcsTUFBWixJQUF1QixDQUExQixFQUE2QjtDQUMzQixRQUFBLElBQUEsQ0FBSzJGLFVBQUwsR0FBa0JXLFdBQVcsQ0FBQyxDQUFELENBQTdCLENBQUE7Q0FDRCxPQUZELE1BRU87Q0FDTCxRQUFBLE1BQU0scURBQU4sQ0FBQTtDQUNELE9BQUE7Q0FDRixLQVJELENBQUE7O0NBVUFnQyxJQUFBQSxhQUFhLENBQUNuRyxTQUFkLEdBQTBCRCxNQUFNLENBQUMrRSxNQUFQLENBQWNwQixPQUFPLENBQUMxRCxTQUF0QixDQUExQixDQUFBO0NBQ0FtRyxJQUFBQSxhQUFhLENBQUNuRyxTQUFkLENBQXdCWSxXQUF4QixHQUFzQ3VGLGFBQXRDLENBQUE7O0NBRUFBLElBQUFBLGFBQWEsQ0FBQ25HLFNBQWQsQ0FBd0I2RCxJQUF4QixHQUErQixZQUFXO0NBQ3hDLE1BQUEsSUFBQSxDQUFLRixLQUFMLENBQVcsSUFBS0gsQ0FBQUEsVUFBaEIsSUFBOEIsQ0FBOUIsQ0FBQTtDQUNBLE1BQUEsSUFBSTRDLGFBQWEsR0FBRyxJQUFLeEMsQ0FBQUEsUUFBTCxFQUFwQixDQUFBO0NBQ0EsTUFBQSxJQUFBLENBQUtELEtBQUwsQ0FBVyxJQUFLSCxDQUFBQSxVQUFoQixJQUE4QixDQUE5QixDQUFBO0NBQ0EsTUFBQSxJQUFJNkMsWUFBWSxHQUFHLElBQUt6QyxDQUFBQSxRQUFMLEVBQW5CLENBQUE7Q0FDQSxNQUFJMEMsSUFBQUEsWUFBWSxHQUFHdEwsSUFBSSxDQUFDaUQsR0FBTCxDQUFTbUksYUFBVCxFQUF3QkMsWUFBeEIsQ0FBbkIsQ0FBQTtDQUNBRCxNQUFBQSxhQUFhLElBQUlFLFlBQWpCLENBQUE7Q0FDQUQsTUFBQUEsWUFBWSxJQUFJQyxZQUFoQixDQUFBO0NBQ0EsTUFBSUMsSUFBQUEsU0FBUyxHQUFHdkwsSUFBSSxDQUFDQyxHQUFMLENBQVNtTCxhQUFhLEdBQUdwTCxJQUFJLENBQUNULEdBQUwsQ0FBVVMsSUFBSSxDQUFDQyxHQUFMLENBQVNtTCxhQUFULENBQTBCcEwsR0FBQUEsSUFBSSxDQUFDQyxHQUFMLENBQVNvTCxZQUFULENBQXBDLENBQXpCLENBQWhCLENBQUE7O0NBQ0EsTUFBQSxJQUFHckwsSUFBSSxDQUFDK0QsTUFBTCxFQUFBLEdBQWdCd0gsU0FBbkIsRUFBOEI7Q0FDNUIsUUFBQSxJQUFBLENBQUs1QyxLQUFMLENBQVcsSUFBS0gsQ0FBQUEsVUFBaEIsSUFBOEIsQ0FBOUIsQ0FBQTtDQUNBLFFBQUEsT0FBTyxDQUFQLENBQUE7Q0FDRCxPQVp1Qzs7O0NBYXhDLE1BQUEsT0FBTyxDQUFQLENBQUE7Q0FDRCxLQWRELENBQUE7Q0FnQkY7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBOzs7Q0FDRSxJQUFJZ0QsSUFBQUEsc0JBQXNCLEdBQUcsVUFBU2pELE1BQVQsRUFBaUJJLEtBQWpCLEVBQXdCQyxRQUF4QixFQUFrQ25CLE9BQWxDLEVBQTJDO0NBQ3RFaUIsTUFBQUEsT0FBTyxDQUFDeEQsSUFBUixDQUFhLElBQWIsRUFBbUJxRCxNQUFuQixFQUEyQkksS0FBM0IsRUFBa0NDLFFBQWxDLENBQUEsQ0FBQTtDQUVBLE1BQUlPLElBQUFBLFdBQVcsR0FBR3BFLE1BQU0sQ0FBQ3FFLElBQVAsQ0FBWSxJQUFBLENBQUtiLE1BQWpCLENBQWxCLENBQUE7O0NBQ0EsTUFBQSxJQUFHWSxXQUFXLENBQUN0RyxNQUFaLElBQXVCLENBQTFCLEVBQTZCO0NBQzNCLFFBQUEsSUFBQSxDQUFLMkYsVUFBTCxHQUFrQlcsV0FBVyxDQUFDLENBQUQsQ0FBN0IsQ0FBQTtDQUNBLFFBQUEsSUFBSVYsS0FBSyxHQUFHLElBQUEsQ0FBS0YsTUFBTCxDQUFZLElBQUEsQ0FBS0MsVUFBakIsQ0FBWixDQUFBO0NBQ0EsUUFBQSxJQUFBLENBQUtuQyxHQUFMLEdBQVdvQyxLQUFLLENBQUNwQyxHQUFqQixDQUFBO0NBQ0QsT0FKRCxNQUlPO0NBQ0wsUUFBQSxNQUFNLDhEQUFOLENBQUE7Q0FDRCxPQUFBOztDQUVELE1BQUlzRSxJQUFBQSxrQkFBa0IsR0FDcEIsVUFBU3RFLEdBQVQsRUFBY3VFLFFBQWQsRUFBd0JoQyxRQUF4QixFQUFrQztDQUNsQyxRQUFJaUMsSUFBQUEsV0FBVyxHQUFHLEVBQWxCLENBQUE7Q0FDQSxRQUFBLElBQUkvSCxDQUFKLENBQUE7O0NBQ0EsUUFBQSxJQUFHdUQsR0FBRyxDQUFDeEQsTUFBSixLQUFlLENBQWxCLEVBQXFCO0NBQ25CLFVBQUEsS0FBSUMsQ0FBQyxHQUFHLENBQVIsRUFBV0EsQ0FBQyxHQUFHdUQsR0FBRyxDQUFDLENBQUQsQ0FBbEIsRUFBdUJ2RCxDQUFDLEVBQXhCLEVBQTRCO0NBQzFCLFlBQUkySSxJQUFBQSxTQUFTLEdBQUcsRUFBaEIsQ0FBQTtDQUNBQSxZQUFBQSxTQUFTLENBQUMzSSxDQUFELENBQVQsR0FBZTJGLEtBQWYsQ0FBQTtDQUNBb0MsWUFBQUEsV0FBVyxDQUFDL0gsQ0FBRCxDQUFYLEdBQWlCLElBQUlxSSxhQUFKLENBQWtCTSxTQUFsQixFQUE2QmIsUUFBN0IsRUFBdUNoQyxRQUF2QyxDQUFqQixDQUFBO0NBQ0QsV0FBQTtDQUNGLFNBTkQsTUFNTztDQUNMLFVBQUEsS0FBSTlGLENBQUMsR0FBRyxDQUFSLEVBQVdBLENBQUMsR0FBR3VELEdBQUcsQ0FBQyxDQUFELENBQWxCLEVBQXVCdkQsQ0FBQyxFQUF4QixFQUE0QjtDQUMxQitILFlBQUFBLFdBQVcsQ0FBQy9ILENBQUQsQ0FBWCxHQUFpQjZILGtCQUFrQixDQUFDdEUsR0FBRyxDQUFDTCxLQUFKLENBQVUsQ0FBVixDQUFELEVBQWU0RSxRQUFRLENBQUM5SCxDQUFELENBQXZCLEVBQTRCOEYsUUFBNUIsQ0FBbkMsQ0FBQTtDQUNELFdBQUE7Q0FDRixTQUFBOztDQUNELFFBQUEsT0FBT2lDLFdBQVAsQ0FBQTtDQUNELE9BaEJELENBQUE7O0NBa0JBLE1BQUEsSUFBQSxDQUFLQSxXQUFMLEdBQW1CRixrQkFBa0IsQ0FBQyxJQUFBLENBQUt0RSxHQUFOLEVBQVcsSUFBQSxDQUFLc0MsS0FBTCxDQUFXLEtBQUtILFVBQWhCLENBQVgsRUFBd0MsSUFBQSxDQUFLSSxRQUE3QyxDQUFyQyxDQUFBO0NBQ0QsS0EvQkQsQ0FBQTs7Q0FpQ0E0QyxJQUFBQSxzQkFBc0IsQ0FBQ3hHLFNBQXZCLEdBQW1DRCxNQUFNLENBQUMrRSxNQUFQLENBQWNwQixPQUFPLENBQUMxRCxTQUF0QixDQUFuQyxDQUFBO0NBQ0F3RyxJQUFBQSxzQkFBc0IsQ0FBQ3hHLFNBQXZCLENBQWlDWSxXQUFqQyxHQUErQzRGLHNCQUEvQyxDQUFBOztDQUVBQSxJQUFBQSxzQkFBc0IsQ0FBQ3hHLFNBQXZCLENBQWlDNkQsSUFBakMsR0FBd0MsWUFBVztDQUNyRDtDQUNJLE1BQUEsT0FBTzFCLHlCQUF5QixDQUFDLElBQUEsQ0FBSzBELFdBQU4sRUFBbUIsVUFBU0csVUFBVCxFQUFxQjtDQUFDLFFBQU9BLE9BQUFBLFVBQVUsQ0FBQ25DLElBQVgsRUFBUCxDQUFBO0NBQTJCLE9BQXBFLENBQWhDLENBQUE7Q0FDRCxLQUhELENBQUE7Q0FLRjtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7OztDQUNFLElBQUk2QyxJQUFBQSxXQUFXLEdBQUcsVUFBU25ELE1BQVQsRUFBaUJJLEtBQWpCLEVBQXdCQyxRQUF4QixFQUFrQ25CLE9BQWxDLEVBQTJDO0NBQzNEaUIsTUFBQUEsT0FBTyxDQUFDeEQsSUFBUixDQUFhLElBQWIsRUFBbUJxRCxNQUFuQixFQUEyQkksS0FBM0IsRUFBa0NDLFFBQWxDLENBQUEsQ0FBQTtDQUNBLE1BQUtPLElBQUFBLENBQUFBLFdBQUwsR0FBbUJwRSxNQUFNLENBQUNxRSxJQUFQLENBQVksSUFBQSxDQUFLYixNQUFqQixDQUFuQixDQUFBO0NBQ0EsTUFBS3NDLElBQUFBLENBQUFBLFdBQUwsR0FBbUIsRUFBbkIsQ0FBQTs7Q0FDQSxNQUFBLEtBQUksSUFBSS9ILENBQUMsR0FBRyxDQUFaLEVBQWVBLENBQUMsR0FBRyxJQUFLcUcsQ0FBQUEsV0FBTCxDQUFpQnRHLE1BQXBDLEVBQTRDQyxDQUFDLEVBQTdDLEVBQWlEO0NBQy9DLFFBQUkyRixJQUFBQSxLQUFLLEdBQUdGLE1BQU0sQ0FBQyxLQUFLWSxXQUFMLENBQWlCckcsQ0FBakIsQ0FBRCxDQUFsQixDQUFBO0NBQ0EsUUFBQSxJQUFJNkksYUFBSixDQUFBOztDQUNBLFFBQVFsRCxRQUFBQSxLQUFLLENBQUNULElBQWQ7Q0FDRSxVQUFBLEtBQUssTUFBTDtDQUNFLFlBQUd0QixJQUFBQSxXQUFXLENBQUMrQixLQUFLLENBQUNwQyxHQUFQLEVBQVksQ0FBQyxDQUFELENBQVosQ0FBZCxFQUFnQztDQUM5QnNGLGNBQUFBLGFBQWEsR0FBR3JCLHFCQUFoQixDQUFBO0NBQ0QsYUFGRCxNQUVPO0NBQ0xxQixjQUFBQSxhQUFhLEdBQUdWLG1DQUFoQixDQUFBO0NBQ0QsYUFBQTs7Q0FDRCxZQUFBLE1BQUE7O0NBQ0YsVUFBQSxLQUFLLEtBQUw7Q0FDRSxZQUFHdkUsSUFBQUEsV0FBVyxDQUFDK0IsS0FBSyxDQUFDcEMsR0FBUCxFQUFZLENBQUMsQ0FBRCxDQUFaLENBQWQsRUFBZ0M7Q0FDOUJzRixjQUFBQSxhQUFhLEdBQUduQixvQkFBaEIsQ0FBQTtDQUNELGFBRkQsTUFFTztDQUNMbUIsY0FBQUEsYUFBYSxHQUFHVCxrQ0FBaEIsQ0FBQTtDQUNELGFBQUE7O0NBQ0QsWUFBQSxNQUFBOztDQUNGLFVBQUEsS0FBSyxRQUFMO0NBQ0UsWUFBR3hFLElBQUFBLFdBQVcsQ0FBQytCLEtBQUssQ0FBQ3BDLEdBQVAsRUFBWSxDQUFDLENBQUQsQ0FBWixDQUFkLEVBQWdDO0NBQzlCc0YsY0FBQUEsYUFBYSxHQUFHUixhQUFoQixDQUFBO0NBQ0QsYUFGRCxNQUVPO0NBQ0xRLGNBQUFBLGFBQWEsR0FBR0gsc0JBQWhCLENBQUE7Q0FDRCxhQUFBOztDQUNELFlBQUEsTUFBQTs7Q0FDRixVQUFBO0NBQ0UsWUFBTSxNQUFBLHFDQUFBLEdBQXdDLElBQUtyQyxDQUFBQSxXQUFMLENBQWlCckcsQ0FBakIsQ0FBeEMsR0FBOEQsYUFBOUQsR0FBOEUyRixLQUFLLENBQUNULElBQTFGLENBQUE7Q0F2QkosU0FBQTs7Q0F5QkEsUUFBSTRELElBQUFBLGlCQUFpQixHQUFHLEVBQXhCLENBQUE7Q0FDQUEsUUFBQUEsaUJBQWlCLENBQUMsSUFBS3pDLENBQUFBLFdBQUwsQ0FBaUJyRyxDQUFqQixDQUFELENBQWpCLEdBQXlDMkYsS0FBekMsQ0FBQTtDQUNBaEIsUUFBQUEsT0FBTyxHQUFHQSxPQUFPLElBQUksRUFBckIsQ0FBQTtDQUNBLFFBQUEsSUFBSW9FLGFBQWEsR0FBR3BFLE9BQU8sQ0FBQ2MsTUFBUixJQUFrQmQsT0FBTyxDQUFDYyxNQUFSLENBQWUsS0FBS1ksV0FBTCxDQUFpQnJHLENBQWpCLENBQWYsQ0FBbEIsSUFBeUQsRUFBN0UsQ0FBQTtDQUNBK0ksUUFBQUEsYUFBYSxDQUFDeEMsY0FBZCxHQUFtQ3dDLGFBQWEsQ0FBQ3hDLGNBQWQsSUFBb0M1QixPQUFPLENBQUM0QixjQUEvRSxDQUFBO0NBQ0F3QyxRQUFBQSxhQUFhLENBQUN2QyxVQUFkLEdBQW1DdUMsYUFBYSxDQUFDdkMsVUFBZCxJQUFvQzdCLE9BQU8sQ0FBQzZCLFVBQS9FLENBQUE7Q0FDQXVDLFFBQUFBLGFBQWEsQ0FBQ3RDLGNBQWQsR0FBbUNzQyxhQUFhLENBQUN0QyxjQUFkLElBQW9DOUIsT0FBTyxDQUFDOEIsY0FBL0UsQ0FBQTtDQUNBc0MsUUFBQUEsYUFBYSxDQUFDckMsa0JBQWQsR0FBbUNxQyxhQUFhLENBQUNyQyxrQkFBZCxJQUFvQy9CLE9BQU8sQ0FBQytCLGtCQUEvRSxDQUFBO0NBQ0FxQyxRQUFBQSxhQUFhLENBQUNwQyxrQkFBZCxHQUFtQ29DLGFBQWEsQ0FBQ3BDLGtCQUFkLElBQW9DaEMsT0FBTyxDQUFDZ0Msa0JBQS9FLENBQUE7Q0FDQW9DLFFBQUFBLGFBQWEsQ0FBQ25DLFdBQWQsR0FBbUNtQyxhQUFhLENBQUNuQyxXQUFkLElBQW9DakMsT0FBTyxDQUFDaUMsV0FBL0UsQ0FBQTtDQUNBLFFBQUEsSUFBQSxDQUFLbUIsV0FBTCxDQUFpQi9ILENBQWpCLENBQUEsR0FBc0IsSUFBSTZJLGFBQUosQ0FBa0JDLGlCQUFsQixFQUFxQ2pELEtBQXJDLEVBQTRDQyxRQUE1QyxFQUFzRGlELGFBQXRELENBQXRCLENBQUE7Q0FDRCxPQUFBO0NBQ0YsS0E1Q0QsQ0FBQTs7Q0E4Q0FILElBQUFBLFdBQVcsQ0FBQzFHLFNBQVosR0FBd0JELE1BQU0sQ0FBQytFLE1BQVAsQ0FBY3BCLE9BQU8sQ0FBQzFELFNBQXRCLENBQXhCLENBQUE7Q0FDQTBHLElBQUFBLFdBQVcsQ0FBQzFHLFNBQVosQ0FBc0JZLFdBQXRCLEdBQW9DOEYsV0FBcEMsQ0FBQTs7Q0FFQUEsSUFBQUEsV0FBVyxDQUFDMUcsU0FBWixDQUFzQjZELElBQXRCLEdBQTZCLFlBQVc7Q0FDdEM3QixNQUFBQSxhQUFhLENBQUMsSUFBSzZELENBQUFBLFdBQU4sQ0FBYixDQUFBOztDQUNBLE1BQUEsS0FBSSxJQUFJL0gsQ0FBQyxHQUFHLENBQVosRUFBZUEsQ0FBQyxHQUFHLElBQUsrSCxDQUFBQSxXQUFMLENBQWlCaEksTUFBcEMsRUFBNENDLENBQUMsRUFBN0MsRUFBaUQ7Q0FDL0MsUUFBQSxJQUFBLENBQUsrSCxXQUFMLENBQWlCL0gsQ0FBakIsQ0FBQSxDQUFvQitGLElBQXBCLEVBQUEsQ0FBQTtDQUNELE9BQUE7O0NBQ0QsTUFBQSxPQUFPLEtBQUtGLEtBQVosQ0FBQTtDQUNELEtBTkQsQ0FBQTs7Q0FRQStDLElBQUFBLFdBQVcsQ0FBQzFHLFNBQVosQ0FBc0I4RCxnQkFBdEIsR0FBeUMsWUFBVztDQUNsRCxNQUFBLEtBQUksSUFBSWhHLENBQUMsR0FBRyxDQUFaLEVBQWVBLENBQUMsR0FBRyxJQUFLK0gsQ0FBQUEsV0FBTCxDQUFpQmhJLE1BQXBDLEVBQTRDQyxDQUFDLEVBQTdDLEVBQWlEO0NBQy9DLFFBQUEsSUFBQSxDQUFLK0gsV0FBTCxDQUFpQi9ILENBQWpCLENBQUEsQ0FBb0JnRyxnQkFBcEIsRUFBQSxDQUFBO0NBQ0QsT0FBQTtDQUNGLEtBSkQsQ0FBQTs7Q0FNQTRDLElBQUFBLFdBQVcsQ0FBQzFHLFNBQVosQ0FBc0IrRCxlQUF0QixHQUF3QyxZQUFXO0NBQ2pELE1BQUEsS0FBSSxJQUFJakcsQ0FBQyxHQUFHLENBQVosRUFBZUEsQ0FBQyxHQUFHLElBQUsrSCxDQUFBQSxXQUFMLENBQWlCaEksTUFBcEMsRUFBNENDLENBQUMsRUFBN0MsRUFBaUQ7Q0FDL0MsUUFBQSxJQUFBLENBQUsrSCxXQUFMLENBQWlCL0gsQ0FBakIsQ0FBQSxDQUFvQmlHLGVBQXBCLEVBQUEsQ0FBQTtDQUNELE9BQUE7Q0FDRixLQUpELENBQUE7O0NBTUEyQyxJQUFBQSxXQUFXLENBQUMxRyxTQUFaLENBQXNCZ0UsSUFBdEIsR0FBNkIsWUFBVztDQUN0QyxNQUFJQSxJQUFBQSxJQUFJLEdBQUcsRUFBWCxDQUFBOztDQUNBLE1BQUEsS0FBSSxJQUFJbEcsQ0FBQyxHQUFHLENBQVosRUFBZUEsQ0FBQyxHQUFHLElBQUsrSCxDQUFBQSxXQUFMLENBQWlCaEksTUFBcEMsRUFBNENDLENBQUMsRUFBN0MsRUFBaUQ7Q0FDL0NrRyxRQUFBQSxJQUFJLENBQUMsSUFBS0csQ0FBQUEsV0FBTCxDQUFpQnJHLENBQWpCLENBQUQsQ0FBSixHQUE0QixLQUFLK0gsV0FBTCxDQUFpQi9ILENBQWpCLENBQUEsQ0FBb0JrRyxJQUFwQixFQUE1QixDQUFBO0NBQ0QsT0FBQTs7Q0FDRCxNQUFBLE9BQU9BLElBQVAsQ0FBQTtDQUNELEtBTkQsQ0FwM0JnQjtDQSszQmxCOztDQUdBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7OztDQUNFLElBQUk4QyxJQUFBQSxPQUFPLEdBQUcsVUFBU3ZELE1BQVQsRUFBaUJLLFFBQWpCLEVBQTJCbUQsSUFBM0IsRUFBaUN0RSxPQUFqQyxFQUEwQztDQUN0RCxNQUFLYyxJQUFBQSxDQUFBQSxNQUFMLEdBQWNBLE1BQWQsQ0FBQTtDQUNBLE1BQUt3RCxJQUFBQSxDQUFBQSxJQUFMLEdBQVlBLElBQVosQ0FBQTtDQUNBLE1BQUs1QyxJQUFBQSxDQUFBQSxXQUFMLEdBQW1CcEUsTUFBTSxDQUFDcUUsSUFBUCxDQUFZLElBQUtiLENBQUFBLE1BQWpCLENBQW5CLENBSHNEOztDQU10RCxNQUFLeUQsSUFBQUEsQ0FBQUEsY0FBTCxHQUF3QnpFLFVBQVUsQ0FBQyxnQkFBRCxFQUFtQkUsT0FBbkIsRUFBNEJNLGdCQUE1QixDQUFsQyxDQUFBO0NBQ0EsTUFBSWtFLElBQUFBLGlCQUFpQixHQUFHMUUsVUFBVSxDQUFDLE1BQUQsRUFBU0UsT0FBVCxFQUFrQixDQUFsQixDQUFsQyxDQUFBO0NBQ0EsTUFBSXlFLElBQUFBLGlCQUFpQixHQUFHM0UsVUFBVSxDQUFDLFNBQUQsRUFBWUUsT0FBWixFQUFxQixJQUFyQixDQUFsQyxDQUFBO0NBQ0EsTUFBSzBFLElBQUFBLENBQUFBLElBQUwsQ0FBVUYsaUJBQVYsQ0FBQSxDQUFBO0NBQ0EsTUFBS0csSUFBQUEsQ0FBQUEsT0FBTCxDQUFhRixpQkFBYixDQUFBLENBQUE7Q0FDQSxNQUFBLElBQUEsQ0FBS3pFLE9BQUwsR0FBZUEsT0FBZixDQVhzRDs7Q0FhdEQsTUFBS2MsSUFBQUEsQ0FBQUEsTUFBTCxHQUFjSCxlQUFlLENBQUMsS0FBS0csTUFBTixFQUFjLElBQUt5RCxDQUFBQSxjQUFuQixDQUE3QixDQUFBO0NBQ0EsTUFBSXJELElBQUFBLEtBQUssR0FBRyxFQUFaLENBQUE7O0NBQ0EsTUFBQSxLQUFJLElBQUk3RixDQUFDLEdBQUcsQ0FBWixFQUFlQSxDQUFDLEdBQUcsSUFBS3FHLENBQUFBLFdBQUwsQ0FBaUJ0RyxNQUFwQyxFQUE0Q0MsQ0FBQyxFQUE3QyxFQUFrRDtDQUNoRDZGLFFBQUFBLEtBQUssQ0FBQyxJQUFBLENBQUtRLFdBQUwsQ0FBaUJyRyxDQUFqQixDQUFELENBQUwsR0FBNkIsSUFBS3lGLENBQUFBLE1BQUwsQ0FBWSxJQUFLWSxDQUFBQSxXQUFMLENBQWlCckcsQ0FBakIsQ0FBWixFQUFpQ3dELElBQTlELENBQUE7Q0FDRCxPQUFBOztDQUNELE1BQUtzQyxJQUFBQSxDQUFBQSxRQUFMLEdBQWdCLFlBQVc7Q0FDekIsUUFBQSxPQUFPQSxRQUFRLENBQUNELEtBQUQsRUFBUW9ELElBQVIsQ0FBZixDQUFBO0NBQ0QsT0FGRCxDQWxCc0Q7Q0FzQjFEOzs7Q0FDSSxNQUFBLElBQUEsQ0FBS25ELFFBQUwsRUFBQSxDQUFBO0NBQ0EsTUFBS0QsSUFBQUEsQ0FBQUEsS0FBTCxHQUFhQSxLQUFiLENBQUE7Q0FDQSxNQUFBLElBQUEsQ0FBSzBELFFBQUwsR0FBZ0IsSUFBQSxDQUFLQyx1QkFBTCxDQUE2QixLQUFLL0QsTUFBbEMsRUFBMEMsSUFBS0ksQ0FBQUEsS0FBL0MsRUFBc0QsSUFBS0MsQ0FBQUEsUUFBM0QsRUFBcUUsSUFBQSxDQUFLbkIsT0FBMUUsQ0FBaEIsQ0FBQTtDQUNELEtBMUJELENBQUE7Q0E0QkY7Q0FDQTtDQUNBOzs7Q0FDRXFFLElBQUFBLE9BQU8sQ0FBQzlHLFNBQVIsQ0FBa0JzSCx1QkFBbEIsR0FBNEMsVUFBUzNELEtBQVQsRUFBZ0JDLFFBQWhCLEVBQXlCO0NBQ25FLE1BQUEsTUFBTSw0REFBTixDQUFBO0NBQ0QsS0FGRCxDQUFBO0NBSUY7Q0FDQTs7O0NBQ0VrRCxJQUFBQSxPQUFPLENBQUM5RyxTQUFSLENBQWtCZ0UsSUFBbEIsR0FBeUIsWUFBVztDQUNsQyxNQUFPLE9BQUE7Q0FBQ0wsUUFBQUEsS0FBSyxFQUFFLElBQUEsQ0FBS0EsS0FBYjtDQUFvQndELFFBQUFBLElBQUksRUFBRSxJQUFBLENBQUtBLElBQS9CO0NBQXFDQyxRQUFBQSxPQUFPLEVBQUUsSUFBQSxDQUFLQSxPQUFuRDtDQUNDQyxRQUFBQSxRQUFRLEVBQUUsSUFBS0EsQ0FBQUEsUUFBQUE7Q0FEaEIsT0FBUCxDQUFBO0NBRUQsS0FIRCxDQUFBO0NBS0Y7Q0FDQTtDQUNBOzs7Q0FDRVAsSUFBQUEsT0FBTyxDQUFDOUcsU0FBUixDQUFrQjZELElBQWxCLEdBQXlCLFlBQVc7Q0FDbEM3QixNQUFBQSxhQUFhLENBQUMsSUFBS3FGLENBQUFBLFFBQU4sQ0FBYixDQUFBOztDQUNBLE1BQUEsS0FBSSxJQUFJdkosQ0FBQyxHQUFHLENBQVosRUFBZUEsQ0FBQyxHQUFHLElBQUt1SixDQUFBQSxRQUFMLENBQWN4SixNQUFqQyxFQUF5Q0MsQ0FBQyxFQUExQyxFQUE4QztDQUM1QyxRQUFBLElBQUEsQ0FBS3VKLFFBQUwsQ0FBY3ZKLENBQWQsQ0FBQSxDQUFpQitGLElBQWpCLEVBQUEsQ0FBQTtDQUNELE9BQUE7O0NBQ0QsTUFBQSxJQUFHOUQsTUFBTSxDQUFDcUUsSUFBUCxDQUFZLElBQUEsQ0FBS1QsS0FBakIsQ0FBd0I5RixDQUFBQSxNQUF4QixHQUFpQ2tDLE1BQU0sQ0FBQ3FFLElBQVAsQ0FBWSxLQUFLYixNQUFqQixDQUFBLENBQXlCMUYsTUFBN0QsRUFBcUU7Q0FDekU7Q0FDQTtDQUNBO0NBQ00sUUFBQSxJQUFBLENBQUsrRixRQUFMLEVBQUEsQ0FBQTtDQUNELE9BQUE7O0NBQ0QsTUFBQSxPQUFPLEtBQUtELEtBQVosQ0FBQTtDQUNELEtBWkQsQ0FBQTtDQWNGO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTs7O0NBQ0VtRCxJQUFBQSxPQUFPLENBQUM5RyxTQUFSLENBQWtCdUgsTUFBbEIsR0FBMkIsVUFBU0MsWUFBVCxFQUF1QjtDQUNwRDtDQUNBO0NBQ00sTUFBQSxJQUFJMUosQ0FBSixFQUFPN0QsQ0FBUCxFQUFVd04sZ0JBQVYsQ0FBQTs7Q0FDQSxNQUFBLElBQUcsSUFBS0EsQ0FBQUEsZ0JBQUwsS0FBMEIsSUFBN0IsRUFBbUM7Q0FDakNBLFFBQUFBLGdCQUFnQixHQUFHMUgsTUFBTSxDQUFDcUUsSUFBUCxDQUFZLElBQUEsQ0FBS1QsS0FBakIsQ0FBbkIsQ0FBQTtDQUNELE9BRkQsTUFFTztDQUNMOEQsUUFBQUEsZ0JBQWdCLEdBQUcsSUFBQSxDQUFLQSxnQkFBeEIsQ0FBQTtDQUNELE9BQUE7O0NBRUQsTUFBSUMsSUFBQUEsV0FBVyxHQUFHLEVBQWxCLENBQUE7O0NBQ0EsTUFBQSxLQUFJek4sQ0FBQyxHQUFHLENBQVIsRUFBV0EsQ0FBQyxHQUFHd04sZ0JBQWdCLENBQUM1SixNQUFoQyxFQUF3QzVELENBQUMsRUFBekMsRUFBNkM7Q0FDM0N5TixRQUFBQSxXQUFXLENBQUNELGdCQUFnQixDQUFDeE4sQ0FBRCxDQUFqQixDQUFYLEdBQW1DLEVBQW5DLENBQUE7Q0FDRCxPQUFBOztDQUVELE1BQUk2RCxLQUFBQSxDQUFDLEdBQUcsQ0FBUixFQUFXQSxDQUFDLEdBQUcwSixZQUFmLEVBQTZCMUosQ0FBQyxFQUE5QixFQUFrQztDQUNoQyxRQUFBLElBQUdBLENBQUMsR0FBRyxJQUFBLENBQUttSixpQkFBVCxLQUErQixDQUFsQyxFQUFxQztDQUNuQyxVQUFBLEtBQUloTixDQUFDLEdBQUcsQ0FBUixFQUFXQSxDQUFDLEdBQUd3TixnQkFBZ0IsQ0FBQzVKLE1BQWhDLEVBQXdDNUQsQ0FBQyxFQUF6QyxFQUE2QztDQUMzQyxZQUFBLElBQUl3SixLQUFLLEdBQUdnRSxnQkFBZ0IsQ0FBQ3hOLENBQUQsQ0FBNUIsQ0FBQTtDQUNBeU4sWUFBQUEsV0FBVyxDQUFDakUsS0FBRCxDQUFYLENBQW1COUMsSUFBbkIsQ0FBeUJFLGdCQUFnQixDQUFDLElBQUs4QyxDQUFBQSxLQUFMLENBQVdGLEtBQVgsQ0FBRCxDQUF6QyxDQUFBLENBQUE7Q0FDRCxXQUFBO0NBQ0YsU0FBQTs7Q0FDRCxRQUFBLElBQUEsQ0FBS0ksSUFBTCxFQUFBLENBQUE7Q0FDRCxPQUFBOztDQUNELE1BQUEsT0FBTzZELFdBQVAsQ0FBQTtDQUNILEtBekJELENBQUE7Q0EyQkY7Q0FDQTtDQUNBOzs7Q0FDRVosSUFBQUEsT0FBTyxDQUFDOUcsU0FBUixDQUFrQjJILElBQWxCLEdBQXlCLFVBQVNILFlBQVQsRUFBdUI7Q0FDOUMsTUFBSSxLQUFBLElBQUkxSixDQUFDLEdBQUcsQ0FBWixFQUFlQSxDQUFDLEdBQUcwSixZQUFuQixFQUFpQzFKLENBQUMsRUFBbEMsRUFBc0M7Q0FDcEMsUUFBQSxJQUFBLENBQUsrRixJQUFMLEVBQUEsQ0FBQTtDQUNELE9BQUE7Q0FDRixLQUpELENBQUE7Q0FNRjtDQUNBO0NBQ0E7Q0FDQTs7O0NBQ0VpRCxJQUFBQSxPQUFPLENBQUM5RyxTQUFSLENBQWtCb0gsT0FBbEIsR0FBNEIsVUFBU0YsaUJBQVQsRUFBNEI7Q0FDcEQsTUFBS08sSUFBQUEsQ0FBQUEsZ0JBQUwsR0FBd0JQLGlCQUF4QixDQUFBO0NBQ0gsS0FGRCxDQUFBO0NBSUY7Q0FDQTtDQUNBO0NBQ0E7OztDQUNFSixJQUFBQSxPQUFPLENBQUM5RyxTQUFSLENBQWtCbUgsSUFBbEIsR0FBeUIsVUFBU0YsaUJBQVQsRUFBNEI7Q0FDbkQsTUFBS0EsSUFBQUEsQ0FBQUEsaUJBQUwsR0FBeUJBLGlCQUF6QixDQUFBO0NBQ0QsS0FGRCxDQUFBO0NBSUY7Q0FDQTtDQUNBOzs7Q0FDRUgsSUFBQUEsT0FBTyxDQUFDOUcsU0FBUixDQUFrQjhELGdCQUFsQixHQUFxQyxZQUFXO0NBQzlDLE1BQUEsS0FBSSxJQUFJaEcsQ0FBQyxHQUFHLENBQVosRUFBZUEsQ0FBQyxHQUFHLElBQUt1SixDQUFBQSxRQUFMLENBQWN4SixNQUFqQyxFQUF5Q0MsQ0FBQyxFQUExQyxFQUE4QztDQUM1QyxRQUFBLElBQUEsQ0FBS3VKLFFBQUwsQ0FBY3ZKLENBQWQsQ0FBQSxDQUFpQmdHLGdCQUFqQixFQUFBLENBQUE7Q0FDRCxPQUFBO0NBQ0YsS0FKRCxDQUFBO0NBTUY7Q0FDQTtDQUNBOzs7Q0FDRWdELElBQUFBLE9BQU8sQ0FBQzlHLFNBQVIsQ0FBa0IrRCxlQUFsQixHQUFvQyxZQUFXO0NBQzdDLE1BQUEsS0FBSSxJQUFJakcsQ0FBQyxHQUFHLENBQVosRUFBZUEsQ0FBQyxHQUFHLElBQUt1SixDQUFBQSxRQUFMLENBQWN4SixNQUFqQyxFQUF5Q0MsQ0FBQyxFQUExQyxFQUE4QztDQUM1QyxRQUFBLElBQUEsQ0FBS3VKLFFBQUwsQ0FBY3ZKLENBQWQsQ0FBQSxDQUFpQmlHLGVBQWpCLEVBQUEsQ0FBQTtDQUNELE9BQUE7Q0FDRixLQUpELENBQUE7Q0FNRjtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7OztDQUNFLElBQUk2RCxJQUFBQSxXQUFXLEdBQUcsVUFBU3JFLE1BQVQsRUFBaUJLLFFBQWpCLEVBQTJCbUQsSUFBM0IsRUFBaUN0RSxPQUFqQyxFQUEwQztDQUMxRHFFLE1BQUFBLE9BQU8sQ0FBQzVHLElBQVIsQ0FBYSxJQUFiLEVBQW1CcUQsTUFBbkIsRUFBMkJLLFFBQTNCLEVBQXFDbUQsSUFBckMsRUFBMkN0RSxPQUEzQyxDQUFBLENBQUE7Q0FDRCxLQUZELENBQUE7O0NBSUFtRixJQUFBQSxXQUFXLENBQUM1SCxTQUFaLEdBQXdCRCxNQUFNLENBQUMrRSxNQUFQLENBQWNnQyxPQUFPLENBQUM5RyxTQUF0QixDQUF4QixDQUFBO0NBQ0E0SCxJQUFBQSxXQUFXLENBQUM1SCxTQUFaLENBQXNCWSxXQUF0QixHQUFvQ2dILFdBQXBDLENBQUE7O0NBRUFBLElBQUFBLFdBQVcsQ0FBQzVILFNBQVosQ0FBc0JzSCx1QkFBdEIsR0FBZ0QsVUFBUy9ELE1BQVQsRUFBaUJJLEtBQWpCLEVBQXdCQyxRQUF4QixFQUFrQ25CLE9BQWxDLEVBQTBDO0NBQ3hGLE1BQUEsT0FBTyxDQUFFLElBQUlpRSxXQUFKLENBQWdCbkQsTUFBaEIsRUFBd0JJLEtBQXhCLEVBQStCQyxRQUEvQixFQUF5Q25CLE9BQXpDLENBQUYsQ0FBUCxDQUFBO0NBQ0QsS0FGRCxDQW5qQ2dCOzs7Q0F5akNoQixJQUFPLE9BQUE7Q0FDTDNELE1BQUFBLEtBQUssRUFBRUEsS0FERjtDQUVMRSxNQUFBQSxjQUFjLEVBQUVBLGNBRlg7Q0FHTEUsTUFBQUEsS0FBSyxFQUFFQSxLQUhGO0NBSUw2RCxNQUFBQSxnQkFBZ0IsRUFBRUEsZ0JBSmI7Q0FLTEssTUFBQUEsZUFBZSxFQUFFQSxlQUxaO0NBTUxrQyxNQUFBQSxxQkFBcUIsRUFBRUEscUJBTmxCO0NBT0xFLE1BQUFBLG9CQUFvQixFQUFFQSxvQkFQakI7Q0FRTFMsTUFBQUEsbUNBQW1DLEVBQUVBLG1DQVJoQztDQVNMQyxNQUFBQSxrQ0FBa0MsRUFBRUEsa0NBVC9CO0NBVUxDLE1BQUFBLGFBQWEsRUFBRUEsYUFWVjtDQVdMSyxNQUFBQSxzQkFBc0IsRUFBRUEsc0JBWG5CO0NBWUxFLE1BQUFBLFdBQVcsRUFBRUEsV0FaUjtDQWFMa0IsTUFBQUEsV0FBVyxFQUFFQSxXQUFBQTtDQWJSLEtBQVAsQ0FBQTtDQWVELEdBcmxDQSxDQUFELENBQUE7OztDQ1JlLFNBQVNDLFNBQVQsQ0FBbUIvTSxDQUFuQixFQUFzQkMsQ0FBdEIsRUFBeUI7Q0FDdEMsRUFBQSxPQUFPRCxDQUFDLElBQUksSUFBTCxJQUFhQyxDQUFDLElBQUksSUFBbEIsR0FBeUJMLEdBQXpCLEdBQStCSSxDQUFDLEdBQUdDLENBQUosR0FBUSxDQUFDLENBQVQsR0FBYUQsQ0FBQyxHQUFHQyxDQUFKLEdBQVEsQ0FBUixHQUFZRCxDQUFDLElBQUlDLENBQUwsR0FBUyxDQUFULEdBQWFMLEdBQTVFLENBQUE7Q0FDRDs7Q0NFTSxVQUFVb04sT0FBVixDQUFrQkMsTUFBbEIsRUFBMEJDLE9BQTFCLEVBQW1DO0NBQ3hDLEVBQUlBLElBQUFBLE9BQU8sS0FBS3BGLFNBQWhCLEVBQTJCO0NBQ3pCLElBQUEsS0FBSyxJQUFJRSxLQUFULElBQWtCaUYsTUFBbEIsRUFBMEI7Q0FDeEIsTUFBSWpGLElBQUFBLEtBQUssSUFBSSxJQUFULElBQWlCLENBQUNBLEtBQUssR0FBRyxDQUFDQSxLQUFWLEtBQW9CQSxLQUF6QyxFQUFnRDtDQUM5QyxRQUFBLE1BQU1BLEtBQU4sQ0FBQTtDQUNELE9BQUE7Q0FDRixLQUFBO0NBQ0YsR0FORCxNQU1PO0NBQ0wsSUFBSW1GLElBQUFBLEtBQUssR0FBRyxDQUFDLENBQWIsQ0FBQTs7Q0FDQSxJQUFBLEtBQUssSUFBSW5GLEtBQVQsSUFBa0JpRixNQUFsQixFQUEwQjtDQUN4QixNQUFJLElBQUEsQ0FBQ2pGLEtBQUssR0FBR2tGLE9BQU8sQ0FBQ2xGLEtBQUQsRUFBUSxFQUFFbUYsS0FBVixFQUFpQkYsTUFBakIsQ0FBaEIsS0FBNkMsSUFBN0MsSUFBcUQsQ0FBQ2pGLEtBQUssR0FBRyxDQUFDQSxLQUFWLEtBQW9CQSxLQUE3RSxFQUFvRjtDQUNsRixRQUFBLE1BQU1BLEtBQU4sQ0FBQTtDQUNELE9BQUE7Q0FDRixLQUFBO0NBQ0YsR0FBQTtDQUNGOztDQ09NLFNBQVNvRixjQUFULENBQXdCQyxPQUFPLEdBQUdOLFNBQWxDLEVBQTZDO0NBQ2xELEVBQUEsSUFBSU0sT0FBTyxLQUFLTixTQUFoQixFQUEyQixPQUFPTyxnQkFBUCxDQUFBO0NBQzNCLEVBQUksSUFBQSxPQUFPRCxPQUFQLEtBQW1CLFVBQXZCLEVBQW1DLE1BQU0sSUFBSUUsU0FBSixDQUFjLDJCQUFkLENBQU4sQ0FBQTtDQUNuQyxFQUFBLE9BQU8sQ0FBQ3ZOLENBQUQsRUFBSUMsQ0FBSixLQUFVO0NBQ2YsSUFBQSxNQUFNZixDQUFDLEdBQUdtTyxPQUFPLENBQUNyTixDQUFELEVBQUlDLENBQUosQ0FBakIsQ0FBQTtDQUNBLElBQUEsSUFBSWYsQ0FBQyxJQUFJQSxDQUFDLEtBQUssQ0FBZixFQUFrQixPQUFPQSxDQUFQLENBQUE7Q0FDbEIsSUFBQSxPQUFPLENBQUNtTyxPQUFPLENBQUNwTixDQUFELEVBQUlBLENBQUosQ0FBUCxLQUFrQixDQUFuQixLQUF5Qm9OLE9BQU8sQ0FBQ3JOLENBQUQsRUFBSUEsQ0FBSixDQUFQLEtBQWtCLENBQTNDLENBQVAsQ0FBQTtDQUNELEdBSkQsQ0FBQTtDQUtELENBQUE7Q0FFTSxTQUFTc04sZ0JBQVQsQ0FBMEJ0TixDQUExQixFQUE2QkMsQ0FBN0IsRUFBZ0M7Q0FDckMsRUFBQSxPQUFPLENBQUNELENBQUMsSUFBSSxJQUFMLElBQWEsRUFBRUEsQ0FBQyxJQUFJQSxDQUFQLENBQWQsS0FBNEJDLENBQUMsSUFBSSxJQUFMLElBQWEsRUFBRUEsQ0FBQyxJQUFJQSxDQUFQLENBQXpDLENBQXdERCxLQUFBQSxDQUFDLEdBQUdDLENBQUosR0FBUSxDQUFDLENBQVQsR0FBYUQsQ0FBQyxHQUFHQyxDQUFKLEdBQVEsQ0FBUixHQUFZLENBQWpGLENBQVAsQ0FBQTtDQUNEOztDQ3RDYyxTQUFTa0QsR0FBVCxDQUFhOEosTUFBYixFQUFxQkMsT0FBckIsRUFBOEI7Q0FDM0MsRUFBQSxJQUFJL0osR0FBSixDQUFBOztDQUNBLEVBQUkrSixJQUFBQSxPQUFPLEtBQUtwRixTQUFoQixFQUEyQjtDQUN6QixJQUFBLEtBQUssTUFBTUUsS0FBWCxJQUFvQmlGLE1BQXBCLEVBQTRCO0NBQzFCLE1BQUEsSUFBSWpGLEtBQUssSUFBSSxJQUFULEtBQ0k3RSxHQUFHLEdBQUc2RSxLQUFOLElBQWdCN0UsR0FBRyxLQUFLMkUsU0FBUixJQUFxQkUsS0FBSyxJQUFJQSxLQURsRCxDQUFKLEVBQytEO0NBQzdEN0UsUUFBQUEsR0FBRyxHQUFHNkUsS0FBTixDQUFBO0NBQ0QsT0FBQTtDQUNGLEtBQUE7Q0FDRixHQVBELE1BT087Q0FDTCxJQUFJbUYsSUFBQUEsS0FBSyxHQUFHLENBQUMsQ0FBYixDQUFBOztDQUNBLElBQUEsS0FBSyxJQUFJbkYsS0FBVCxJQUFrQmlGLE1BQWxCLEVBQTBCO0NBQ3hCLE1BQUksSUFBQSxDQUFDakYsS0FBSyxHQUFHa0YsT0FBTyxDQUFDbEYsS0FBRCxFQUFRLEVBQUVtRixLQUFWLEVBQWlCRixNQUFqQixDQUFoQixLQUE2QyxJQUE3QyxLQUNJOUosR0FBRyxHQUFHNkUsS0FBTixJQUFnQjdFLEdBQUcsS0FBSzJFLFNBQVIsSUFBcUJFLEtBQUssSUFBSUEsS0FEbEQsQ0FBSixFQUMrRDtDQUM3RDdFLFFBQUFBLEdBQUcsR0FBRzZFLEtBQU4sQ0FBQTtDQUNELE9BQUE7Q0FDRixLQUFBO0NBQ0YsR0FBQTs7Q0FDRCxFQUFBLE9BQU83RSxHQUFQLENBQUE7Q0FDRDs7Q0NuQmMsU0FBU0QsR0FBVCxDQUFhK0osTUFBYixFQUFxQkMsT0FBckIsRUFBOEI7Q0FDM0MsRUFBQSxJQUFJaEssR0FBSixDQUFBOztDQUNBLEVBQUlnSyxJQUFBQSxPQUFPLEtBQUtwRixTQUFoQixFQUEyQjtDQUN6QixJQUFBLEtBQUssTUFBTUUsS0FBWCxJQUFvQmlGLE1BQXBCLEVBQTRCO0NBQzFCLE1BQUEsSUFBSWpGLEtBQUssSUFBSSxJQUFULEtBQ0k5RSxHQUFHLEdBQUc4RSxLQUFOLElBQWdCOUUsR0FBRyxLQUFLNEUsU0FBUixJQUFxQkUsS0FBSyxJQUFJQSxLQURsRCxDQUFKLEVBQytEO0NBQzdEOUUsUUFBQUEsR0FBRyxHQUFHOEUsS0FBTixDQUFBO0NBQ0QsT0FBQTtDQUNGLEtBQUE7Q0FDRixHQVBELE1BT087Q0FDTCxJQUFJbUYsSUFBQUEsS0FBSyxHQUFHLENBQUMsQ0FBYixDQUFBOztDQUNBLElBQUEsS0FBSyxJQUFJbkYsS0FBVCxJQUFrQmlGLE1BQWxCLEVBQTBCO0NBQ3hCLE1BQUksSUFBQSxDQUFDakYsS0FBSyxHQUFHa0YsT0FBTyxDQUFDbEYsS0FBRCxFQUFRLEVBQUVtRixLQUFWLEVBQWlCRixNQUFqQixDQUFoQixLQUE2QyxJQUE3QyxLQUNJL0osR0FBRyxHQUFHOEUsS0FBTixJQUFnQjlFLEdBQUcsS0FBSzRFLFNBQVIsSUFBcUJFLEtBQUssSUFBSUEsS0FEbEQsQ0FBSixFQUMrRDtDQUM3RDlFLFFBQUFBLEdBQUcsR0FBRzhFLEtBQU4sQ0FBQTtDQUNELE9BQUE7Q0FDRixLQUFBO0NBQ0YsR0FBQTs7Q0FDRCxFQUFBLE9BQU85RSxHQUFQLENBQUE7Q0FDRDs7Q0NoQkQ7O0NBQ2UsU0FBU3NLLFdBQVQsQ0FBcUJyRyxLQUFyQixFQUE0QnJILENBQTVCLEVBQStCMk4sSUFBSSxHQUFHLENBQXRDLEVBQXlDQyxLQUFLLEdBQUd2RyxLQUFLLENBQUNwRSxNQUFOLEdBQWUsQ0FBaEUsRUFBbUVzSyxPQUFuRSxFQUE0RTtDQUN6RkEsRUFBQUEsT0FBTyxHQUFHQSxPQUFPLEtBQUt2RixTQUFaLEdBQXdCd0YsZ0JBQXhCLEdBQTJDRixjQUFjLENBQUNDLE9BQUQsQ0FBbkUsQ0FBQTs7Q0FFQSxFQUFPSyxPQUFBQSxLQUFLLEdBQUdELElBQWYsRUFBcUI7Q0FDbkIsSUFBQSxJQUFJQyxLQUFLLEdBQUdELElBQVIsR0FBZSxHQUFuQixFQUF3QjtDQUN0QixNQUFBLE1BQU05TixDQUFDLEdBQUcrTixLQUFLLEdBQUdELElBQVIsR0FBZSxDQUF6QixDQUFBO0NBQ0EsTUFBQSxNQUFNN0osQ0FBQyxHQUFHOUQsQ0FBQyxHQUFHMk4sSUFBSixHQUFXLENBQXJCLENBQUE7Q0FDQSxNQUFBLE1BQU1wTSxDQUFDLEdBQUduQixJQUFJLENBQUNULEdBQUwsQ0FBU0UsQ0FBVCxDQUFWLENBQUE7Q0FDQSxNQUFNb0YsTUFBQUEsQ0FBQyxHQUFHLEdBQUEsR0FBTTdFLElBQUksQ0FBQ0MsR0FBTCxDQUFTLENBQUlrQixHQUFBQSxDQUFKLEdBQVEsQ0FBakIsQ0FBaEIsQ0FBQTtDQUNBLE1BQUEsTUFBTUgsRUFBRSxHQUFHLEdBQU1oQixHQUFBQSxJQUFJLENBQUNJLElBQUwsQ0FBVWUsQ0FBQyxHQUFHMEQsQ0FBSixJQUFTcEYsQ0FBQyxHQUFHb0YsQ0FBYixDQUFBLEdBQWtCcEYsQ0FBNUIsQ0FBTixJQUF3Q2lFLENBQUMsR0FBR2pFLENBQUMsR0FBRyxDQUFSLEdBQVksQ0FBWixHQUFnQixDQUFDLENBQWpCLEdBQXFCLENBQTdELENBQVgsQ0FBQTtDQUNBLE1BQU1nTyxNQUFBQSxPQUFPLEdBQUd6TixJQUFJLENBQUNpRCxHQUFMLENBQVNzSyxJQUFULEVBQWV2TixJQUFJLENBQUNpRSxLQUFMLENBQVdyRSxDQUFDLEdBQUc4RCxDQUFDLEdBQUdtQixDQUFKLEdBQVFwRixDQUFaLEdBQWdCdUIsRUFBM0IsQ0FBZixDQUFoQixDQUFBO0NBQ0EsTUFBTTBNLE1BQUFBLFFBQVEsR0FBRzFOLElBQUksQ0FBQ2dELEdBQUwsQ0FBU3dLLEtBQVQsRUFBZ0J4TixJQUFJLENBQUNpRSxLQUFMLENBQVdyRSxDQUFDLEdBQUcsQ0FBQ0gsQ0FBQyxHQUFHaUUsQ0FBTCxJQUFVbUIsQ0FBVixHQUFjcEYsQ0FBbEIsR0FBc0J1QixFQUFqQyxDQUFoQixDQUFqQixDQUFBO0NBQ0FzTSxNQUFBQSxXQUFXLENBQUNyRyxLQUFELEVBQVFySCxDQUFSLEVBQVc2TixPQUFYLEVBQW9CQyxRQUFwQixFQUE4QlAsT0FBOUIsQ0FBWCxDQUFBO0NBQ0QsS0FBQTs7Q0FFRCxJQUFBLE1BQU1uTCxDQUFDLEdBQUdpRixLQUFLLENBQUNySCxDQUFELENBQWYsQ0FBQTtDQUNBLElBQUlrRCxJQUFBQSxDQUFDLEdBQUd5SyxJQUFSLENBQUE7Q0FDQSxJQUFJdE8sSUFBQUEsQ0FBQyxHQUFHdU8sS0FBUixDQUFBO0NBRUFHLElBQUFBLElBQUksQ0FBQzFHLEtBQUQsRUFBUXNHLElBQVIsRUFBYzNOLENBQWQsQ0FBSixDQUFBO0NBQ0EsSUFBQSxJQUFJdU4sT0FBTyxDQUFDbEcsS0FBSyxDQUFDdUcsS0FBRCxDQUFOLEVBQWV4TCxDQUFmLENBQVAsR0FBMkIsQ0FBL0IsRUFBa0MyTCxJQUFJLENBQUMxRyxLQUFELEVBQVFzRyxJQUFSLEVBQWNDLEtBQWQsQ0FBSixDQUFBOztDQUVsQyxJQUFPMUssT0FBQUEsQ0FBQyxHQUFHN0QsQ0FBWCxFQUFjO0NBQ1owTyxNQUFBQSxJQUFJLENBQUMxRyxLQUFELEVBQVFuRSxDQUFSLEVBQVc3RCxDQUFYLENBQUosRUFBbUIsRUFBRTZELENBQXJCLEVBQXdCLEVBQUU3RCxDQUExQixDQUFBOztDQUNBLE1BQUEsT0FBT2tPLE9BQU8sQ0FBQ2xHLEtBQUssQ0FBQ25FLENBQUQsQ0FBTixFQUFXZCxDQUFYLENBQVAsR0FBdUIsQ0FBOUIsRUFBaUMsRUFBRWMsQ0FBRixDQUFBOztDQUNqQyxNQUFBLE9BQU9xSyxPQUFPLENBQUNsRyxLQUFLLENBQUNoSSxDQUFELENBQU4sRUFBVytDLENBQVgsQ0FBUCxHQUF1QixDQUE5QixFQUFpQyxFQUFFL0MsQ0FBRixDQUFBO0NBQ2xDLEtBQUE7O0NBRUQsSUFBQSxJQUFJa08sT0FBTyxDQUFDbEcsS0FBSyxDQUFDc0csSUFBRCxDQUFOLEVBQWN2TCxDQUFkLENBQVAsS0FBNEIsQ0FBaEMsRUFBbUMyTCxJQUFJLENBQUMxRyxLQUFELEVBQVFzRyxJQUFSLEVBQWN0TyxDQUFkLENBQUosQ0FBbkMsS0FDSyxFQUFFQSxDQUFGLEVBQUswTyxJQUFJLENBQUMxRyxLQUFELEVBQVFoSSxDQUFSLEVBQVd1TyxLQUFYLENBQVQsQ0FBQTtDQUVMLElBQUl2TyxJQUFBQSxDQUFDLElBQUlXLENBQVQsRUFBWTJOLElBQUksR0FBR3RPLENBQUMsR0FBRyxDQUFYLENBQUE7Q0FDWixJQUFJVyxJQUFBQSxDQUFDLElBQUlYLENBQVQsRUFBWXVPLEtBQUssR0FBR3ZPLENBQUMsR0FBRyxDQUFaLENBQUE7Q0FDYixHQUFBOztDQUNELEVBQUEsT0FBT2dJLEtBQVAsQ0FBQTtDQUNELENBQUE7O0NBRUQsU0FBUzBHLElBQVQsQ0FBYzFHLEtBQWQsRUFBcUJuRSxDQUFyQixFQUF3QjdELENBQXhCLEVBQTJCO0NBQ3pCLEVBQUEsTUFBTStDLENBQUMsR0FBR2lGLEtBQUssQ0FBQ25FLENBQUQsQ0FBZixDQUFBO0NBQ0FtRSxFQUFBQSxLQUFLLENBQUNuRSxDQUFELENBQUwsR0FBV21FLEtBQUssQ0FBQ2hJLENBQUQsQ0FBaEIsQ0FBQTtDQUNBZ0ksRUFBQUEsS0FBSyxDQUFDaEksQ0FBRCxDQUFMLEdBQVcrQyxDQUFYLENBQUE7Q0FDRDs7Q0N4Q2MsU0FBUzRMLFFBQVQsQ0FBa0JiLE1BQWxCLEVBQTBCYyxDQUExQixFQUE2QmIsT0FBN0IsRUFBc0M7Q0FDbkRELEVBQUFBLE1BQU0sR0FBR2UsWUFBWSxDQUFDQyxJQUFiLENBQWtCakIsT0FBTyxDQUFDQyxNQUFELEVBQVNDLE9BQVQsQ0FBekIsQ0FBVCxDQUFBO0NBQ0EsRUFBQSxJQUFJLEVBQUV2TixDQUFDLEdBQUdzTixNQUFNLENBQUNsSyxNQUFiLENBQUosRUFBMEIsT0FBQTtDQUMxQixFQUFBLElBQUksQ0FBQ2dMLENBQUMsR0FBRyxDQUFDQSxDQUFOLEtBQVksQ0FBWixJQUFpQnBPLENBQUMsR0FBRyxDQUF6QixFQUE0QixPQUFPdUQsR0FBRyxDQUFDK0osTUFBRCxDQUFWLENBQUE7Q0FDNUIsRUFBSWMsSUFBQUEsQ0FBQyxJQUFJLENBQVQsRUFBWSxPQUFPNUssR0FBRyxDQUFDOEosTUFBRCxDQUFWLENBQUE7Q0FDWixFQUFBLElBQUl0TixDQUFKO0NBQUEsTUFDSXFELENBQUMsR0FBRyxDQUFDckQsQ0FBQyxHQUFHLENBQUwsSUFBVW9PLENBRGxCO0NBQUEsTUFFSUcsRUFBRSxHQUFHaE8sSUFBSSxDQUFDaUUsS0FBTCxDQUFXbkIsQ0FBWCxDQUZUO0NBQUEsTUFHSW1MLE1BQU0sR0FBR2hMLEdBQUcsQ0FBQ3FLLFdBQVcsQ0FBQ1AsTUFBRCxFQUFTaUIsRUFBVCxDQUFYLENBQXdCRSxRQUF4QixDQUFpQyxDQUFqQyxFQUFvQ0YsRUFBRSxHQUFHLENBQXpDLENBQUQsQ0FIaEI7Q0FBQSxNQUlJRyxNQUFNLEdBQUduTCxHQUFHLENBQUMrSixNQUFNLENBQUNtQixRQUFQLENBQWdCRixFQUFFLEdBQUcsQ0FBckIsQ0FBRCxDQUpoQixDQUFBO0NBS0EsRUFBT0MsT0FBQUEsTUFBTSxHQUFHLENBQUNFLE1BQU0sR0FBR0YsTUFBVixLQUFxQm5MLENBQUMsR0FBR2tMLEVBQXpCLENBQWhCLENBQUE7Q0FDRDs7Q0NkYyxTQUFTSSxNQUFULENBQWdCckIsTUFBaEIsRUFBd0JDLE9BQXhCLEVBQWlDO0NBQzlDLEVBQUEsT0FBT1ksUUFBUSxDQUFDYixNQUFELEVBQVMsR0FBVCxFQUFjQyxPQUFkLENBQWYsQ0FBQTtDQUNEOztDQ0hEOztDQUVBO0NBQ0E7QUFDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtBQUNBO0NBQ0E7Q0FDQTtDQUNBO0FBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ2UsTUFBTXFCLE9BQU4sQ0FBYztDQUNmLEVBQUEsT0FBTEMsS0FBSyxDQUFDdFAsQ0FBRCxFQUFJYyxDQUFKLEVBQU8yRixDQUFQLEVBQVU7Q0FDcEIsSUFBSXpHLElBQUFBLENBQUMsSUFBSSxDQUFULEVBQVk7Q0FDVixNQUFPQSxPQUFBQSxDQUFDLElBQUljLENBQVosQ0FBQTtDQUNELEtBSG1COzs7Q0FLcEIsSUFBQSxPQUFPLENBQUMyRixDQUFELEdBQU0sQ0FBQyxDQUFDekcsQ0FBRixLQUFRYyxDQUFyQixDQUFBO0NBQ0QsR0FBQTs7Q0FFVyxFQUFBLE9BQUx5TyxLQUFLLENBQUN2UCxDQUFELEVBQUl5RyxDQUFKLEVBQU9yQixDQUFQLEVBQVU7Q0FDcEIsSUFBSXBGLElBQUFBLENBQUMsSUFBSSxDQUFULEVBQVk7Q0FDVixNQUFPZ0IsT0FBQUEsSUFBSSxDQUFDVCxHQUFMLENBQVM2RSxDQUFULENBQWNwRSxHQUFBQSxJQUFJLENBQUNULEdBQUwsQ0FBU1AsQ0FBVCxDQUFyQixDQUFBO0NBQ0QsS0FIbUI7OztDQUtwQixJQUFPLE9BQUEsQ0FBQ2dCLElBQUksQ0FBQ1QsR0FBTCxDQUFTLENBQUM2RSxDQUFWLElBQWVwRSxJQUFJLENBQUNULEdBQUwsQ0FBU2tHLENBQVQsQ0FBaEIsSUFBK0J6RixJQUFJLENBQUNULEdBQUwsQ0FBUyxDQUFDUCxDQUFWLENBQXRDLENBQUE7Q0FDRCxHQUFBOztDQUVXLEVBQUEsT0FBTHdQLEtBQUssQ0FBQ3hQLENBQUQsRUFBSWMsQ0FBSixFQUFPc0UsQ0FBUCxFQUFVO0NBQ3BCLElBQUlwRixJQUFBQSxDQUFDLElBQUksQ0FBVCxFQUFZO0NBQ1YsTUFBQSxPQUFPLENBQVAsQ0FBQTtDQUNELEtBSG1COzs7Q0FLcEIsSUFBQSxPQUFPLENBQUNvRixDQUFELEdBQU0sQ0FBQyxDQUFDcEYsQ0FBRixLQUFRYyxDQUFyQixDQUFBO0NBQ0QsR0FBQTs7Q0FFVSxFQUFBLE9BQUoyTyxJQUFJLENBQUNaLENBQUQsRUFBSWEsQ0FBSixFQUFPO0NBQ2hCLElBQUEsT0FBUWIsQ0FBQyxJQUFJYSxDQUFOLEdBQVksQ0FBRWIsQ0FBQyxJQUFJYSxDQUFOLEdBQVksQ0FBQyxJQUFJYixDQUFMLEtBQVdhLENBQXhCLE1BQWdDLENBQUEsR0FBSUEsQ0FBcEMsQ0FBbkIsQ0FBQTtDQUNELEdBQUE7O0NBM0IwQjs7Q0NyQjdCOztDQ0RBOztDQVVBQyxJQUFJLENBQUNDLFNBQUwsR0FBa0JDLEtBQUQsSUFBVztDQUMxQixFQUFBLE1BQU10RyxNQUFNLEdBQUc7Q0FDYjlGLElBQUFBLEtBQUssRUFBRTtDQUFDdUYsTUFBQUEsSUFBSSxFQUFFLE1BQVA7Q0FBZUMsTUFBQUEsS0FBSyxFQUFFLENBQXRCO0NBQXlCQyxNQUFBQSxLQUFLLEVBQUUsQ0FBQTtDQUFoQyxLQURNO0NBRWJ0RSxJQUFBQSxNQUFNLEVBQUU7Q0FBQ29FLE1BQUFBLElBQUksRUFBRSxNQUFQO0NBQWVDLE1BQUFBLEtBQUssRUFBRSxDQUF0QjtDQUF5QkMsTUFBQUEsS0FBSyxFQUFFLEVBQUE7Q0FBaEMsS0FGSztDQUdiMUcsSUFBQUEsS0FBSyxFQUFFO0NBQUN3RyxNQUFBQSxJQUFJLEVBQUUsTUFBUDtDQUFlQyxNQUFBQSxLQUFLLEVBQUUsQ0FBdEI7Q0FBeUJDLE1BQUFBLEtBQUssRUFBRSxDQUFBO0NBQWhDLEtBSE07Q0FJYjRHLElBQUFBLElBQUksRUFBRTtDQUFDOUcsTUFBQUEsSUFBSSxFQUFFLE1BQVA7Q0FBZUMsTUFBQUEsS0FBSyxFQUFFLENBQXRCO0NBQXlCQyxNQUFBQSxLQUFLLEVBQUUsR0FBQTtDQUFoQyxLQUFBO0NBSk8sR0FBZixDQUFBOztDQU9BLEVBQUEsTUFBTTZHLE9BQU8sR0FBRyxDQUFDcEcsS0FBRCxFQUFRb0QsSUFBUixLQUFpQjtDQUMvQixJQUFBLElBQUlpRCxFQUFFLEdBQUcsQ0FBVCxDQUQrQjs7Q0FJL0IsSUFBTUMsTUFBQUEsU0FBUyxHQUFHLEdBQWxCLENBQUE7Q0FDQSxJQUFNQyxNQUFBQSxlQUFlLEdBQUcsR0FBeEIsQ0FBQTtDQUNBRixJQUFBQSxFQUFFLElBQUlHLGtCQUFBLENBQ0p4RyxLQUFLLENBQUNsRyxLQURGLEVBRUp3TSxTQUFTLEdBQUdDLGVBRlIsRUFHSixDQUFDLENBQUEsR0FBSUQsU0FBTCxJQUFrQkMsZUFIZCxDQUFOLENBTitCOztDQWEvQixJQUFNRSxNQUFBQSxVQUFVLEdBQUcsQ0FBbkIsQ0FBQTtDQUNBLElBQU1DLE1BQUFBLFdBQVcsR0FBRyxDQUFwQixDQUFBO0NBQ0FMLElBQUFBLEVBQUUsSUFBSUcsbUJBQUEsQ0FDSnhHLEtBQUssQ0FBQy9FLE1BREYsRUFFSnlMLFdBRkksRUFHSkEsV0FBVyxHQUFHRCxVQUhWLENBQU4sQ0FmK0I7O0NBc0IvQixJQUFNRSxNQUFBQSxTQUFTLEdBQUcsR0FBbEIsQ0FBQTtDQUNBLElBQU1DLE1BQUFBLGVBQWUsR0FBRyxHQUF4QixDQUFBO0NBQ0FQLElBQUFBLEVBQUUsSUFBSUcsa0JBQUEsQ0FDSnhHLEtBQUssQ0FBQ25ILEtBREYsRUFFSjhOLFNBQVMsR0FBR0MsZUFGUixFQUdKLENBQUMsQ0FBQSxHQUFJRCxTQUFMLElBQWtCQyxlQUhkLENBQU4sQ0F4QitCOztDQStCL0IsSUFBTUMsTUFBQUEsUUFBUSxHQUFHLENBQWpCLENBQUE7Q0FDQSxJQUFNQyxNQUFBQSxTQUFTLEdBQUcsQ0FBbEIsQ0FBQTtDQUNBVCxJQUFBQSxFQUFFLElBQUlHLG1CQUFBLENBQ0p4RyxLQUFLLENBQUNtRyxJQURGLEVBRUpXLFNBRkksRUFHSkEsU0FBUyxHQUFHRCxRQUhSLENBQU4sQ0FqQytCO0NBd0MvQjs7Q0FDQXpELElBQUFBLElBQUksQ0FBQzJELE9BQUwsQ0FBY0MsTUFBRCxJQUFZO0NBQ3ZCO0NBQ0EsTUFBQSxNQUFNQyxFQUFFLEdBQUd2QixPQUFPLENBQUNDLEtBQVIsQ0FBY3FCLE1BQU0sQ0FBQ0UsRUFBckIsRUFBeUJsSCxLQUFLLENBQUNsRyxLQUEvQixFQUFzQ2tHLEtBQUssQ0FBQy9FLE1BQTVDLENBQVgsQ0FBQTtDQUNBLE1BQUEsTUFBTWtNLEVBQUUsR0FBR3pCLE9BQU8sQ0FBQ0MsS0FBUixDQUFjcUIsTUFBTSxDQUFDSSxFQUFyQixFQUF5QnBILEtBQUssQ0FBQ2xHLEtBQS9CLEVBQXNDa0csS0FBSyxDQUFDL0UsTUFBNUMsQ0FBWCxDQUFBO0NBQ0EsTUFBQSxNQUFNb00sRUFBRSxHQUFHM0IsT0FBTyxDQUFDQyxLQUFSLENBQWNxQixNQUFNLENBQUNNLEVBQXJCLEVBQXlCdEgsS0FBSyxDQUFDbEcsS0FBL0IsRUFBc0NrRyxLQUFLLENBQUMvRSxNQUE1QyxDQUFYLENBSnVCOztDQU92QixNQUFBLE1BQU1zTSxFQUFFLEdBQUc3QixPQUFPLENBQUNJLElBQVIsQ0FBYWtCLE1BQU0sQ0FBQ1EsRUFBcEIsRUFBd0J4SCxLQUFLLENBQUNuSCxLQUE5QixDQUFYLENBQUE7Q0FDQSxNQUFBLE1BQU00TyxFQUFFLEdBQUcsQ0FBSUYsR0FBQUEsRUFBZixDQVJ1Qjs7Q0FXdkIsTUFBTUcsTUFBQUEsRUFBRSxHQUFHRCxFQUFFLEdBQUdSLEVBQUwsR0FBVU0sRUFBRSxHQUFHSixFQUExQixDQUFBO0NBQ0EsTUFBQSxNQUFNUSxFQUFFLEdBQUdOLEVBQVgsQ0FadUI7Q0FldkI7O0NBQ0EsTUFBQSxNQUFNTyxNQUFNLEdBQUcsQ0FBQSxJQUFLLElBQUl2USxJQUFJLENBQUNDLEdBQUwsQ0FBUzBJLEtBQUssQ0FBQ21HLElBQU4sSUFBY3dCLEVBQUUsR0FBR0QsRUFBbkIsQ0FBVCxDQUFULENBQWYsQ0FoQnVCOztDQW1CdkIsTUFBTUcsTUFBQUEsUUFBUSxHQUFJYixNQUFNLENBQUNhLFFBQVAsS0FBb0IsTUFBckIsR0FBK0IsQ0FBL0IsR0FBbUMsQ0FBcEQsQ0FBQTtDQUVBeEIsTUFBQUEsRUFBRSxJQUFJRyxrQkFBQSxDQUF3QnFCLFFBQXhCLEVBQWtDRCxNQUFsQyxDQUFOLENBQUE7Q0FDRCxLQXRCRCxDQUFBLENBQUE7Q0F3QkEsSUFBQSxPQUFPdkIsRUFBUCxDQUFBO0NBQ0QsR0FsRUQsQ0FSMEI7OztDQTZFMUIsRUFBQSxNQUFNeUIsT0FBTyxHQUFHLElBQUlDLGdCQUFKLENBQTBCbkksTUFBMUIsRUFBa0N3RyxPQUFsQyxFQUEyQ0YsS0FBSyxDQUFDOUMsSUFBakQsQ0FBaEIsQ0E3RTBCOztDQStFMUIwRSxFQUFBQSxPQUFPLENBQUM5RCxJQUFSLENBQWEsSUFBYixDQUFBLENBQUE7Q0FDQSxFQUFNZ0UsTUFBQUEsT0FBTyxHQUFHRixPQUFPLENBQUNsRSxNQUFSLENBQWUsSUFBZixDQUFoQixDQWhGMEI7O0NBbUYxQixFQUFBLE1BQU1xRSxPQUFPLEdBQUc7Q0FDZG5PLElBQUFBLEtBQUssRUFBRW9PLE1BQUEsQ0FBVUYsT0FBTyxDQUFDbE8sS0FBbEIsQ0FETztDQUVkbUIsSUFBQUEsTUFBTSxFQUFFaU4sTUFBQSxDQUFVRixPQUFPLENBQUMvTSxNQUFsQixDQUZNO0NBR2RwQyxJQUFBQSxLQUFLLEVBQUVxUCxNQUFBLENBQVVGLE9BQU8sQ0FBQ25QLEtBQWxCLENBSE87Q0FJZHNOLElBQUFBLElBQUksRUFBRStCLE1BQUEsQ0FBVUYsT0FBTyxDQUFDN0IsSUFBbEIsQ0FBQTtDQUpRLEdBQWhCLENBQUE7Q0FPQUgsRUFBQUEsSUFBSSxDQUFDbUMsV0FBTCxDQUFpQjtDQUFDRixJQUFBQSxPQUFPLEVBQUVBLE9BQVY7Q0FBbUJELElBQUFBLE9BQU8sRUFBRUEsT0FBQUE7Q0FBNUIsR0FBakIsQ0FBQSxDQUFBO0NBQ0QsQ0EzRkQ7Ozs7OzsifQ==",!1);let _t$f,_$e=t=>t;const plotlyStyle=r$6(_t$f||(_t$f=_$e`
  /* inject:css */
  .js-plotly-plot .plotly, .js-plotly-plot .plotly div {
  direction: ltr;
  font-family: "Open Sans", verdana, arial, sans-serif;
  margin: 0;
  padding: 0;
}
.js-plotly-plot .plotly input, .js-plotly-plot .plotly button {
  font-family: "Open Sans", verdana, arial, sans-serif;
}
.js-plotly-plot .plotly input:focus, .js-plotly-plot .plotly button:focus {
  outline: none;
}
.js-plotly-plot .plotly a {
  text-decoration: none;
}
.js-plotly-plot .plotly a:hover {
  text-decoration: none;
}
.js-plotly-plot .plotly .crisp {
  shape-rendering: crispEdges;
}
.js-plotly-plot .plotly .user-select-none {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -o-user-select: none;
  user-select: none;
}
.js-plotly-plot .plotly svg {
  overflow: hidden;
}
.js-plotly-plot .plotly svg a {
  fill: #447adb;
}
.js-plotly-plot .plotly svg a:hover {
  fill: #3c6dc5;
}
.js-plotly-plot .plotly .main-svg {
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
}
.js-plotly-plot .plotly .main-svg .draglayer {
  pointer-events: all;
}
.js-plotly-plot .plotly .cursor-default {
  cursor: default;
}
.js-plotly-plot .plotly .cursor-pointer {
  cursor: pointer;
}
.js-plotly-plot .plotly .cursor-crosshair {
  cursor: crosshair;
}
.js-plotly-plot .plotly .cursor-move {
  cursor: move;
}
.js-plotly-plot .plotly .cursor-col-resize {
  cursor: col-resize;
}
.js-plotly-plot .plotly .cursor-row-resize {
  cursor: row-resize;
}
.js-plotly-plot .plotly .cursor-ns-resize {
  cursor: ns-resize;
}
.js-plotly-plot .plotly .cursor-ew-resize {
  cursor: ew-resize;
}
.js-plotly-plot .plotly .cursor-sw-resize {
  cursor: sw-resize;
}
.js-plotly-plot .plotly .cursor-s-resize {
  cursor: s-resize;
}
.js-plotly-plot .plotly .cursor-se-resize {
  cursor: se-resize;
}
.js-plotly-plot .plotly .cursor-w-resize {
  cursor: w-resize;
}
.js-plotly-plot .plotly .cursor-e-resize {
  cursor: e-resize;
}
.js-plotly-plot .plotly .cursor-nw-resize {
  cursor: nw-resize;
}
.js-plotly-plot .plotly .cursor-n-resize {
  cursor: n-resize;
}
.js-plotly-plot .plotly .cursor-ne-resize {
  cursor: ne-resize;
}
.js-plotly-plot .plotly .cursor-grab {
  cursor: -webkit-grab;
  cursor: grab;
}
.js-plotly-plot .plotly .modebar {
  position: absolute;
  top: 2px;
  right: 2px;
}
.js-plotly-plot .plotly .ease-bg {
  -webkit-transition: background-color 0.3s ease 0s;
  -moz-transition: background-color 0.3s ease 0s;
  -ms-transition: background-color 0.3s ease 0s;
  -o-transition: background-color 0.3s ease 0s;
  transition: background-color 0.3s ease 0s;
}
.js-plotly-plot .plotly .modebar--hover > :not(.watermark) {
  opacity: 0;
  -webkit-transition: opacity 0.3s ease 0s;
  -moz-transition: opacity 0.3s ease 0s;
  -ms-transition: opacity 0.3s ease 0s;
  -o-transition: opacity 0.3s ease 0s;
  transition: opacity 0.3s ease 0s;
}
.js-plotly-plot .plotly:hover .modebar--hover .modebar-group {
  opacity: 1;
}
.js-plotly-plot .plotly .modebar-group {
  float: left;
  display: inline-block;
  box-sizing: border-box;
  padding-left: 8px;
  position: relative;
  vertical-align: middle;
  white-space: nowrap;
}
.js-plotly-plot .plotly .modebar-btn {
  position: relative;
  font-size: 16px;
  padding: 3px 4px;
  height: 22px;
  /* display: inline-block; including this breaks 3d interaction in .embed mode. Chrome bug? */
  cursor: pointer;
  line-height: normal;
  box-sizing: border-box;
}
.js-plotly-plot .plotly .modebar-btn svg {
  position: relative;
  top: 2px;
}
.js-plotly-plot .plotly .modebar.vertical {
  display: flex;
  flex-direction: column;
  flex-wrap: wrap;
  align-content: flex-end;
  max-height: 100%;
}
.js-plotly-plot .plotly .modebar.vertical svg {
  top: -1px;
}
.js-plotly-plot .plotly .modebar.vertical .modebar-group {
  display: block;
  float: none;
  padding-left: 0px;
  padding-bottom: 8px;
}
.js-plotly-plot .plotly .modebar.vertical .modebar-group .modebar-btn {
  display: block;
  text-align: center;
}
.js-plotly-plot .plotly [data-title] {
  /**
   * tooltip body
   */
}
.js-plotly-plot .plotly [data-title]:before, .js-plotly-plot .plotly [data-title]:after {
  position: absolute;
  -webkit-transform: translate3d(0, 0, 0);
  -moz-transform: translate3d(0, 0, 0);
  -ms-transform: translate3d(0, 0, 0);
  -o-transform: translate3d(0, 0, 0);
  transform: translate3d(0, 0, 0);
  display: none;
  opacity: 0;
  z-index: 1001;
  pointer-events: none;
  top: 110%;
  right: 50%;
}
.js-plotly-plot .plotly [data-title]:hover:before, .js-plotly-plot .plotly [data-title]:hover:after {
  display: block;
  opacity: 1;
}
.js-plotly-plot .plotly [data-title]:before {
  content: "";
  position: absolute;
  background: transparent;
  border: 6px solid transparent;
  z-index: 1002;
  margin-top: -12px;
  border-bottom-color: #69738a;
  margin-right: -6px;
}
.js-plotly-plot .plotly [data-title]:after {
  content: attr(data-title);
  background: #69738a;
  color: white;
  padding: 8px 10px;
  font-size: 12px;
  line-height: 12px;
  white-space: nowrap;
  margin-right: -18px;
  border-radius: 2px;
}
.js-plotly-plot .plotly .vertical [data-title]:before, .js-plotly-plot .plotly .vertical [data-title]:after {
  top: 0%;
  right: 200%;
}
.js-plotly-plot .plotly .vertical [data-title]:before {
  border: 6px solid transparent;
  border-left-color: #69738a;
  margin-top: 8px;
  margin-right: -30px;
}
.js-plotly-plot .plotly .select-outline {
  fill: none;
  stroke-width: 1;
  shape-rendering: crispEdges;
}
.js-plotly-plot .plotly .select-outline-1 {
  stroke: white;
}
.js-plotly-plot .plotly .select-outline-2 {
  stroke: black;
  stroke-dasharray: 2px 2px;
}

.plotly-notifier {
  font-family: "Open Sans", verdana, arial, sans-serif;
  position: fixed;
  top: 50px;
  right: 20px;
  z-index: 10000;
  font-size: 10pt;
  max-width: 180px;
}
.plotly-notifier p {
  margin: 0;
}
.plotly-notifier .notifier-note {
  min-width: 180px;
  max-width: 250px;
  border: 1px solid #fff;
  z-index: 3000;
  margin: 0;
  background-color: #8c97af;
  background-color: rgba(140, 151, 175, 0.9);
  color: #fff;
  padding: 10px;
  overflow-wrap: break-word;
  word-wrap: break-word;
  -ms-hyphens: auto;
  -webkit-hyphens: auto;
  hyphens: auto;
}
.plotly-notifier .notifier-close {
  color: #fff;
  opacity: 0.8;
  float: right;
  padding: 0 5px;
  background: none;
  border: none;
  font-size: 20px;
  font-weight: bold;
  line-height: 20px;
}
.plotly-notifier .notifier-close:hover {
  color: #444;
  text-decoration: none;
  cursor: pointer;
}
  /* endinject */
`));let _t$e,_t2$e,_$d=t=>t;core.register([PlotlyHistogram]);class CPTFit extends CPTElement{static get properties(){return{}}constructor(){super(),this.a=1,this.l=1,this.g=1,this.choices=[],this.samples=null,this.working=!1,this.queued=!1,this.worker=new WorkerFactory,this.worker.onmessage=t=>{this.working=!1,this.samples=t.data.samples,this.a=t.data.results.alpha,this.l=t.data.results.lambda,this.g=t.data.results.gamma,this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-fit-update",{detail:{a:this.a,l:this.l,g:this.g},bubbles:!0})),this.queued&&this.fit()},this.fit()}fit(){this.working?this.queued=!0:(this.worker.postMessage(this.choices),this.working=!0,this.queued=!1)}clear(){this.choices=[],this.fit()}get(t="default"){const e=this.choices.find((e=>e.name===t));return void 0===e?null:e}set(t,e,r,n,i,a="",o=""){const s=this.choices.find((t=>t.name===a));void 0===s?this.choices.push({xl:t,xw:e,pw:r,xs:n,response:i,name:a,label:o}):(s.xl=t,s.xw=e,s.pw=r,s.xs=n,s.response=i,s.label=o),this.fit()}static get styles(){return[super.styles,plotlyStyle,r$6(_t$e||(_t$e=_$d`
        /* :host {
          display: inline-block;
        } */

        .trace,
        .hist {
          display: inline-block;

          width: 20rem;
          height: 15rem;
        }
      `))]}render(){return $$1(_t2$e||(_t2$e=_$d`
      <div>
        <div>After ${0} trials:</div>
        <div>Current:
          <var class="math-var a">Î±</var> = ${0},
          <var class="math-var l">Î»</var> = ${0},
          <var class="math-var g">Î³</var> = ${0}
        </div>
        <div class="param">
          <div class="trace alpha"></div>
          <div class="hist alpha"></div>
        </div>
        <div class="param">
          <div class="trace lambda"></div>
          <div class="hist lambda"></div>
        </div>
        <div class="param">
          <div class="trace gamma"></div>
          <div class="hist gamma"></div>
        </div>
        <div class="param">
          <div class="trace luce"></div>
          <div class="hist luce"></div>
        </div>
      </div>
    `),this.choices.length,this.a.toFixed(2),this.l.toFixed(2),this.g.toFixed(2))}plotParam(t){const e={l:40,r:10,b:40,t:40,pad:4};core.react(this.shadowRoot.querySelector(`.trace.${t}`),[{y:this.samples[t]}],{margin:e,title:`Traceplot of ${t}`}),core.react(this.shadowRoot.querySelector(`.hist.${t}`),[{x:this.samples[t],type:"histogram"}],{margin:e,title:`Posterior of ${t}`})}update(t){super.update(t),null!==this.samples&&(this.plotParam("alpha"),this.plotParam("lambda"),this.plotParam("gamma"),this.plotParam("luce"))}}customElements.define("cpt-fit",CPTFit);let _t$d,_t2$d,_$c=t=>t;class CPTProbability extends CPTElement{static get properties(){return{p:{attribute:"probability",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},label:{attribute:"label",type:String,reflect:!0},w:{attribute:!1,type:Number,reflect:!1},width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.firstUpdate=!0,this.drag=!1,this.g=.5,this.p=null,this.label="",this.function="default",this.functions=[{name:"default",g:this.g}],this.probabilities=[{name:"default",p:this.p,label:this.label,function:this.function}],this.xl=null,this.xw=null,this.pw=null,this.xs=null,this.trialCount=null,this.response=null,this.width=NaN,this.height=NaN,this.rem=NaN,this.alignState()}alignState(){this.functions[0].g=this.g,this.probabilities[0].p=this.p,this.probabilities[0].label=this.label,this.probabilities[0].function=this.function,this.probabilities.forEach((t=>{const e=this.functions.find((e=>e.name===t.function));t.w=CPTMath.pg2w(t.p,e.g)})),this.w=this.probabilities[0].w}trial(t,e,r,n,i,a){this.trialCount&&this.removeProbability(`${this.trialCount}`),this.xl=t,this.xw=e,this.pw=r,this.xs=n,this.trialCount=i,this.response=a,this.setProbability(this.pw,`${this.trialCount}`,"","default",!0)}pauseTrial(){const t=select$4(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]");t.interrupt("new-1"),t.interrupt("new-2"),t.datum((t=>(t.paused=!0,t)))}resumeTrial(){select$4(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]").datum((t=>(t.paused=!1,t))),this.requestUpdate()}clearFunctions(){this.functions.splice(1),this.requestUpdate()}clearProbabilities(){this.probabilities.splice(1),this.requestUpdate()}clear(){this.clearFunctions(),this.clearProbabilities()}removeFunction(t){this.functions=this.functions.filter((e=>e.name!==t)),this.requestUpdate()}removeProbability(t){this.probabilities=this.probabilities.filter((e=>e.name!==t)),this.requestUpdate()}remove(t){this.removeFunction(t),this.removeProbability(t)}getFunction(t="default"){return this.functions.find((e=>e.name===t))}getProbability(t="default"){return this.probabilities.find((e=>e.name===t))}get(t="default"){return{...this.getFunction(t),...this.getProbability(t)}}setFunction(t,e="default"){"default"===e&&(this.g=t);const r=this.functions.find((t=>t.name===e));void 0===r?this.functions.push({name:e,g:t}):r.g=t,this.requestUpdate()}setProbability(t,e="default",r="",n=e,i=!1){"default"===e&&(this.p=t,this.label=r);const a=this.probabilities.find((t=>t.name===e));void 0===a?this.probabilities.push({name:e,p:t,label:r,function:n,trial:i,new:i}):(a.p=t,a.label=r,a.function=n),this.requestUpdate()}set(t,e,r="default",n="",i=r){this.setFunction(e,r),this.setProbability(t,r,n,i)}static get styles(){return[super.styles,r$6(_t$d||(_t$d=_$c`
        :host {
          display: inline-block;

          width: 20rem;
          height: 20rem;
        }

        .main {
          width: 100%;
          height: 100%;
        }

        text {
          /* stylelint-disable property-no-vendor-prefix */
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }

        .curve.interactive {
          cursor: nwse-resize;

          filter: url("#shadow-2");
          outline: none;
        }

        .curve.interactive:hover {
          filter: url("#shadow-4");
        }

        .curve.interactive:active {
          filter: url("#shadow-8");
        }

        :host(.keyboard) .curve.interactive:focus {
          filter: url("#shadow-8");
        }

        .point.interactive {
          cursor: nesw-resize;

          filter: url("#shadow-2");
          outline: none;

          /* HACK: This gets Safari to correctly apply the filter! */
          /* https://github.com/emilbjorklund/svg-weirdness/issues/27 */
          stroke: #000000;
          stroke-opacity: 0;
          stroke-width: 0;
        }

        /* Make a larger target for touch users */
        @media (pointer: coarse) {
          .point.interactive .circle {
            stroke: #000000;
            stroke-opacity: 0;
            stroke-width: 12px;
          }
        }

        .point.interactive:hover {
          filter: url("#shadow-4");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #ff0000;
        }

        .point.interactive:active {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #00ff00;
        }

        :host(.keyboard) .point.interactive:focus {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #0000ff;
        }

        .background {
          fill: var(---color-element-background);
          stroke: var(---color-element-border);
          stroke-width: 1;
          shape-rendering: crispEdges;
        }

        .title-x,
        .title-y {
          font-weight: 600;

          fill: currentColor;
        }

        .tick {
          font-size: 0.75rem;
        }

        .scale-x path,
        .scale-x line,
        .scale-y path,
        .scale-y line {
          stroke: var(---color-element-border);
        }

        .diagonal {
          stroke: var(---color-element-border);
          stroke-dasharray: 4;
          stroke-width: 1;
        }

        .curve {
          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .line-p,
        .line-w {
          fill: none;
          stroke-width: 2;
        }

        .line-p {
          stroke: var(---color-p);
        }

        .line-w {
          stroke: var(---color-w);
        }

        .point .circle {
          fill: var(---color-element-emphasis);

          r: 6px;
        }

        .point .label {
          font-size: 0.75rem;

          dominant-baseline: middle;
          text-anchor: middle;

          fill: var(---color-text-inverse);
        }
      `))]}render(){return $$1(_t2$d||(_t2$d=_$c`
      ${0}
    `),CPTElement.svgFilters)}getDimensions(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.getDimensions.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.getDimensions.bind(this)),super.disconnectedCallback()}firstUpdated(t){super.firstUpdated(t),this.getDimensions()}update(t){if(super.update(t),this.alignState(),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const e=this.width,r=this.height,n=Math.min(e,r),i=2*this.rem,a=3*this.rem,o=3*this.rem,s=n-(i+a),l=n-(o+2*this.rem),c=parseInt(this.getComputedStyleValue("---transition-duration"),10),u=linear().domain([0,1]).range([0,l]).clamp(!0);this.xScale=u;const d=linear().domain([1,0]).range([0,s]);this.yScale=d;const h=drag().subject(((t,e)=>({x:t.x,y:this.yScale(CPTMath.pg2w(this.xScale.invert(t.x),e.g)),p:this.xScale.invert(t.x),g:e.g,w:CPTMath.pg2w(this.xScale.invert(t.x),e.g)}))).on("start",(t=>{select$4(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{this.drag=!0;const r=this.xScale.invert(t.x),n=this.yScale.invert(t.y),i=r-t.subject.p,a=n-t.subject.w,o=(i**2+a**2)**.5,s=t.subject.p>t.subject.w?i>a?t.subject.g-o:t.subject.g+o:i>a?t.subject.g+o:t.subject.g-o;e.g=s>1?1:s<0?0:s,"default"===e.name&&(this.g=e.g),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:this.get(e.name),bubbles:!0}))})).on("end",(t=>{select$4(t.currentTarget).classed("dragging",!1)})),g=drag().subject(((t,e)=>({x:this.xScale(e.p),y:this.yScale(e.w)}))).on("start",(t=>{select$4(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{this.drag=!0;const r=this.xScale.invert(t.x);e.p=r<0?0:r>1?1:r,"default"===e.name&&(this.p=e.p),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:{name:e.name,p:e.p,w:e.w,label:e.label,g:this.getFunction(e.function).g},bubbles:!0}))})).on("end",(t=>{select$4(t.currentTarget).classed("dragging",!1)})),f=line().x((t=>u(t.p))).y((t=>d(t.w))),p=select$4(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),m=p.enter().append("svg").classed("main",!0),y=m.merge(p).attr("viewBox",`0 0 ${n} ${n}`),b=m.append("g").classed("plot",!0),v=y.select(".plot").attr("transform",`translate(${o}, ${i})`);b.append("clipPath").attr("id","clip-cpt-value").append("rect"),v.select("clipPath rect").attr("height",s+1).attr("width",l+1);const x=b.append("g").classed("underlayer",!0),I=v.select(".underlayer");x.append("rect").classed("background",!0),I.select(".background").attr("height",s).attr("width",l),x.append("g").classed("scale-x",!0);I.select(".scale-x").attr("transform",`translate(0, ${s})`).transition().duration(2*c).ease(cubicOut).call(axisBottom(u)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null);const B=x.append("text").classed("title-x",!0).attr("text-anchor","middle");B.append("tspan").classed("name",!0).text("Probability ("),B.append("tspan").classed("math-var p",!0).text("p"),B.append("tspan").classed("name",!0).text(")"),I.select(".title-x").attr("transform",`translate(${l/2}, ${s+2.25*this.rem})`),x.append("g").classed("scale-y",!0);I.select(".scale-y").transition().duration(2*c).ease(cubicOut).call(axisLeft(d)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null);const C=x.append("text").classed("title-y",!0).attr("text-anchor","middle");C.append("tspan").classed("name",!0).text("Decision Weight ("),C.append("tspan").classed("math-var v",!0).text("w"),C.append("tspan").classed("name",!0).text(")"),I.select(".title-y").attr("transform",`translate(${-2*this.rem}, ${s/2})rotate(-90)`),x.append("line").classed("diagonal",!0),I.select(".diagonal").transition().duration(2*c).attr("x1",u(0)).attr("y1",d(0)).attr("x2",u(1)).attr("y2",d(1)),b.append("g").classed("content",!0);const F=v.select(".content"),A=F.selectAll(".lines").data(this.probabilities.filter((t=>null!=t.p)),(t=>t.name)),Q=A.enter().append("g").classed("lines",!0);Q.each(((t,e,r)=>{const n=select$4(r[e]);n.append("line").classed("line-p above",!0),n.append("line").classed("line-p below",!0),n.append("line").classed("line-w before",!0),n.append("line").classed("line-w after",!0)})),Q.filter((t=>t.new)).attr("data-animating-ease-time-1",0).attr("data-animating-ease-time-2",0).each(((t,e,r)=>{const n=select$4(r[e]);n.select(".line-p.above").attr("x1",u(t.p)).attr("x2",u(t.p)).attr("y1",d(1)).attr("y2",d(1)),n.select(".line-p.below").attr("x1",u(t.p)).attr("x2",u(t.p)).attr("y1",d(0)).attr("y2",d(0)),n.select(".line-w.before").attr("x1",u(t.p)).attr("x2",u(t.p)).attr("y1",d(t.w)).attr("y2",d(t.w)),n.select(".line-w.after").attr("x1",u(t.p)).attr("x2",u(t.p)).attr("y1",d(t.w)).attr("y2",d(t.w))}));const _=Q.merge(A),w=_.filter((t=>t.new&&!t.paused));if(!w.empty()){const t=w.attr("data-animating-ease-time-1"),e=w.attr("data-animating-ease-time-2"),r=e=>linear().domain([0,1]).range([t,1])(e),n=e=>linear().range([0,1]).domain([t,1])(e),i=t=>linear().domain([0,1]).range([e,1])(t),a=t=>linear().range([0,1]).domain([e,1])(t),o=e=>r=>linear().domain([e(t),1]).range([0,1])(e(r)),s=t=>r=>linear().domain([t(e),1]).range([0,1])(t(r));w.transition("new-1").duration((()=>Math.floor(c*(1-t)))).ease(r).attr("data-animating-ease-time-1",1).tween("animating",((t,e,r)=>{const i=r[e],a=select$4(i),s=interpolate$1(void 0!==i.p?i.p:t.p,t.p),l=interpolate$1(void 0!==i.g?i.g:this.getFunction(t.function).g,this.getFunction(t.function).g),c=interpolate$1(d.invert(a.select(".line-p.above").attr("y1")),t.w),h=interpolate$1(d.invert(a.select(".line-p.below").attr("y1")),t.w);return t=>{i.p=s(cubicOut(n(t))),i.g=l(cubicOut(n(t))),i.w=CPTMath.pg2w(i.p,i.g),a.select(".line-p.above").attr("x1",u(i.p)).attr("x2",u(i.p)).attr("y1",d(c(o(cubicIn)(t)))).attr("y2",d(1)),a.select(".line-p.below").attr("x1",u(i.p)).attr("x2",u(i.p)).attr("y1",d(h(o(cubicIn)(t)))).attr("y2",d(0))}})).transition("new-2").duration((()=>Math.floor(c*(1-e)))).ease(i).attr("data-animating-ease-time-2",1).tween("animating",((t,e,r)=>{const n=r[e],i=select$4(n),o=interpolate$1(void 0!==n.p?n.p:t.p,t.p),l=interpolate$1(void 0!==n.g?n.g:this.getFunction(t.function).g,this.getFunction(t.function).g),c=interpolate$1(u.invert(i.select(".line-w.before").attr("x1")),0),h=interpolate$1(u.invert(i.select(".line-w.after").attr("x1")),1);return t=>{n.p=o(cubicOut(a(t))),n.g=l(cubicOut(a(t))),n.w=CPTMath.pg2w(n.p,n.g),i.select(".line-w.before").attr("x1",u(c(s(cubicOut)(t)))).attr("x2",u(n.p)).attr("y1",d(n.w)).attr("y2",d(n.w)),i.select(".line-w.after").attr("x1",u(h(s(cubicOut)(t)))).attr("x2",u(n.p)).attr("y1",d(n.w)).attr("y2",d(n.w))}})).on("end",((t,e,r)=>{const n=r[e];n.removeAttribute("data-animating-ease-time-1"),n.removeAttribute("data-animating-ease-time-2"),t.new=!1,this.dispatchEvent(new CustomEvent("decision-response",{detail:{trial:this.trialCount,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,response:this.response},bubbles:!0}))}))}const U=_.filter((t=>t.new&&t.paused));if(!U.empty()){const t=U.attr("data-animating-ease-time-1"),e=U.attr("data-animating-ease-time-2");U.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(cubicOut).tween("paused",((r,n,i)=>{const a=i[n],o=select$4(a),s=interpolate$1(void 0!==a.p?a.p:r.p,r.p),l=interpolate$1(void 0!==a.g?a.g:this.getFunction(r.function).g,this.getFunction(r.function).g),c=interpolate$1(1,r.w),h=interpolate$1(0,r.w),g=interpolate$1(r.p,0),f=interpolate$1(r.p,1);return r=>{a.p=s(r),a.g=l(r),a.w=CPTMath.pg2w(a.p,a.g),o.select(".line-p.above").attr("x1",u(a.p)).attr("x2",u(a.p)).attr("y1",d(c(cubicIn(t)))).attr("y2",d(1)),o.select(".line-p.below").attr("x1",u(a.p)).attr("x2",u(a.p)).attr("y1",d(h(cubicIn(t)))).attr("y2",d(0)),o.select(".line-w.before").attr("x1",u(g(cubicOut(e)))).attr("x2",u(a.p)).attr("y1",d(a.w)).attr("y2",d(a.w)),o.select(".line-w.after").attr("x1",u(f(cubicOut(e)))).attr("x2",u(a.p)).attr("y1",d(a.w)).attr("y2",d(a.w))}}))}_.filter((t=>!t.new)).transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(cubicOut).tween("non-animating",((t,e,r)=>{const n=r[e],i=select$4(n),a=interpolate$1(void 0!==n.p?n.p:t.p,t.p),o=interpolate$1(void 0!==n.g?n.g:this.getFunction(t.function).g,this.getFunction(t.function).g);return t=>{n.p=a(t),n.g=o(t),n.w=CPTMath.pg2w(n.p,n.g),i.select(".line-p.above").attr("x1",u(n.p)).attr("x2",u(n.p)).attr("y1",d(n.w)).attr("y2",d(1)),i.select(".line-p.below").attr("x1",u(n.p)).attr("x2",u(n.p)).attr("y1",d(n.w)).attr("y2",d(0)),i.select(".line-w.before").attr("x1",u(0)).attr("x2",u(n.p)).attr("y1",d(n.w)).attr("y2",d(n.w)),i.select(".line-w.after").attr("x1",u(1)).attr("x2",u(n.p)).attr("y1",d(n.w)).attr("y2",d(n.w))}})),A.exit().remove();const S=F.selectAll(".curve").data(this.functions,(t=>t.name)),E=S.enter().append("path").classed("curve",!0).attr("clip-path","url(#clip-cpt-value)").merge(S);(this.firstUpdate||t.has("interactive"))&&(this.interactive?E.attr("tabindex",0).classed("interactive",!0).call(h).on("keydown",((t,e)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let r=e.g;switch(t.key){case"ArrowUp":case"ArrowLeft":r+=t.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowRight":r-=t.shiftKey?.01:.05}r=r<0?0:r>1?1:r,r!==e.g&&(e.g=r,"default"===e.name&&(this.g=e.g),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:this.get(e.name),bubbles:!0}))),t.preventDefault()}})):E.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),E.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(cubicOut).attrTween("d",((t,e,r)=>{const n=r[e],i=interpolate$1(void 0!==n.g?n.g:t.g,t.g);return t=>{n.g=i(t);const e=range(u.range()[0],u.range()[1]+1,1).map((t=>({p:u.invert(t),w:CPTMath.pg2w(u.invert(t),n.g)})));return f(e)}})),S.exit().remove();const L=F.selectAll(".point").data(this.probabilities.filter((t=>null!=t.p)),(t=>t.name)),T=L.enter().append("g").classed("point",!0);T.append("circle").classed("circle",!0),T.append("text").classed("label",!0);const R=T.merge(L);R.select("text").text((t=>t.label)),R.filter((e=>(this.firstUpdate||t.has("interactive"))&&this.interactive&&!e.trial)).attr("tabindex",0).classed("interactive",!0).call(g).on("keydown",((t,e)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let r=e.p;switch(t.key){case"ArrowUp":case"ArrowRight":r+=t.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowLeft":r-=t.shiftKey?.01:.05}r=r<0?0:r>1?1:r,r!==e.p&&(e.p=r,"default"===e.name&&(this.p=e.p),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:{name:e.name,p:e.p,w:e.w,label:e.label,g:this.getFunction(e.function).g},bubbles:!0}))),t.preventDefault()}})),R.filter((e=>(this.firstUpdate||t.has("interactive"))&&!this.interactive||e.trial)).attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null),R.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(cubicOut).attrTween("transform",((t,e,r)=>{const n=r[e],i=interpolate$1(void 0!==n.p?n.p:t.p,t.p),a=interpolate$1(void 0!==n.g?n.g:this.getFunction(t.function).g,this.getFunction(t.function).g);return t=>(n.p=i(t),n.g=a(t),`translate(\n            ${u(n.p)},\n            ${d(CPTMath.pg2w(n.p,n.g))}\n          )`)})),L.exit().remove(),this.drag=!1,this.firstUpdate=!1}}customElements.define("cpt-probability",CPTProbability);var attributes$4=createCommonjsModule((function(t){var e=axis_format_attributes.axisHoverFormat,r=template_attributes.hovertemplateAttrs,n=extend.extendFlat,i=edit_types.overrideAll;function a(t){return{valType:"boolean",dflt:!1,description:["Determines whether or not these contour lines are projected","on the",t,"plane.","If `highlight` is set to *true* (the default), the projected","lines are shown on hover.","If `show` is set to *true*, the projected lines are shown","in permanence."].join(" ")}}function o(t){return{show:{valType:"boolean",dflt:!1,description:["Determines whether or not contour lines about the",t,"dimension are drawn."].join(" ")},start:{valType:"number",dflt:null,editType:"plot",description:["Sets the starting contour level value.","Must be less than `contours.end`"].join(" ")},end:{valType:"number",dflt:null,editType:"plot",description:["Sets the end contour level value.","Must be more than `contours.start`"].join(" ")},size:{valType:"number",dflt:null,min:0,editType:"plot",description:["Sets the step between each contour level.","Must be positive."].join(" ")},project:{x:a("x"),y:a("y"),z:a("z")},color:{valType:"color",dflt:color_1.defaultLine,description:"Sets the color of the contour lines."},usecolormap:{valType:"boolean",dflt:!1,description:["An alternate to *color*.","Determines whether or not the contour lines are colored using","the trace *colorscale*."].join(" ")},width:{valType:"number",min:1,max:16,dflt:2,description:"Sets the width of the contour lines."},highlight:{valType:"boolean",dflt:!0,description:["Determines whether or not contour lines about the",t,"dimension are highlighted on hover."].join(" ")},highlightcolor:{valType:"color",dflt:color_1.defaultLine,description:"Sets the color of the highlighted contour lines."},highlightwidth:{valType:"number",min:1,max:16,dflt:2,description:"Sets the width of the highlighted contour lines."}}}var s=t.exports=i(n({z:{valType:"data_array",description:"Sets the z coordinates."},x:{valType:"data_array",description:"Sets the x coordinates."},y:{valType:"data_array",description:"Sets the y coordinates."},text:{valType:"string",dflt:"",arrayOk:!0,description:["Sets the text elements associated with each z value.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:r(),xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in."].join(" ")},surfacecolor:{valType:"data_array",description:["Sets the surface color values,","used for setting a color scale independent of `z`."].join(" ")}},attributes$m("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:o("x"),y:o("y"),z:o("z")},hidesurface:{valType:"boolean",dflt:!1,description:["Determines whether or not a surface is drawn.","For example, set `hidesurface` to *false*","`contours.x.show` to *true* and","`contours.y.show` to *true* to draw a wire frame plot."].join(" ")},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10,description:"Numeric vector, representing the X coordinate for each vertex."},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4,description:"Numeric vector, representing the Y coordinate for each vertex."},z:{valType:"number",min:-1e5,max:1e5,dflt:0,description:"Numeric vector, representing the Z coordinate for each vertex."}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8,description:"Ambient light increases overall color visibility but can wash out the image."},diffuse:{valType:"number",min:0,max:1,dflt:.8,description:"Represents the extent that incident rays are reflected in a range of angles."},specular:{valType:"number",min:0,max:2,dflt:.05,description:"Represents the level that incident rays are reflected in a single direction, causing shine."},roughness:{valType:"number",min:0,max:1,dflt:.5,description:"Alters specular reflection; the rougher the surface, the wider and less contrasty the shine."},fresnel:{valType:"number",min:0,max:5,dflt:.2,description:["Represents the reflectance as a dependency of the viewing angle; e.g. paper is reflective","when viewing it from the edge of the paper (almost 90 degrees), causing shine."].join(" ")}},opacity:{valType:"number",min:0,max:1,dflt:1,description:["Sets the opacity of the surface.","Please note that in the case of using high `opacity` values for example a value","greater than or equal to 0.5 on two surfaces (and 0.25 with four surfaces), an","overlay of multiple transparent surfaces may not perfectly be sorted in depth by the","webgl API. This behavior may be improved in the near future and is subject to change."].join(" ")},opacityscale:{valType:"any",editType:"calc",description:["Sets the opacityscale."," The opacityscale must be an array containing"," arrays mapping a normalized value to an opacity value."," At minimum, a mapping for the lowest (0) and highest (1)"," values are required. For example,"," `[[0, 1], [0.5, 0.2], [1, 1]]` means that higher/lower values would have"," higher opacity values and those in the middle would be more transparent"," Alternatively, `opacityscale` may be a palette name string"," of the following list: 'min', 'max', 'extremes' and 'uniform'."," The default is 'uniform'."].join("")},_deprecated:{zauto:n({},attributes$m.zauto,{description:"Obsolete. Use `cauto` instead."}),zmin:n({},attributes$m.zmin,{description:"Obsolete. Use `cmin` instead."}),zmax:n({},attributes$m.zmax,{description:"Obsolete. Use `cmax` instead."})},hoverinfo:n({},attributes$r.hoverinfo),showlegend:n({},attributes$r.showlegend,{dflt:!1})}),"calc","nested");s.x.editType=s.y.editType=s.z.editType="calc+clearAxisTypes",s.transforms=void 0})),axisHoverFormat=axis_format_attributes.axisHoverFormat,hovertemplateAttrs=template_attributes.hovertemplateAttrs,extendFlat$2=extend.extendFlat,attributes$3=extendFlat$2({x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the X coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Y coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},z:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Z coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},i:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *first* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `i[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `i` represents a","point in space, which is the first vertex of a triangle."].join(" ")},j:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *second* vertex of a triangle. For example, `{i[m], j[m], k[m]}` ","together represent face m (triangle m) in the mesh, where `j[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `j` represents a","point in space, which is the second vertex of a triangle."].join(" ")},k:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *third* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `k[m] = n` points to the triplet ","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `k` represents a","point in space, which is the third vertex of a triangle."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets the text elements associated with the vertices.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:"Same as `text`."},hovertemplate:hovertemplateAttrs({editType:"calc"}),xhoverformat:axisHoverFormat("x"),yhoverformat:axisHoverFormat("y"),zhoverformat:axisHoverFormat("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc",description:["Sets the Delaunay axis, which is the axis that is perpendicular to the surface of the","Delaunay triangulation.","It has an effect if `i`, `j`, `k` are not provided and `alphahull` is set to indicate","Delaunay triangulation."].join(" ")},alphahull:{valType:"number",dflt:-1,editType:"calc",description:["Determines how the mesh surface triangles are derived from the set of","vertices (points) represented by the `x`, `y` and `z` arrays, if","the `i`, `j`, `k` arrays are not supplied.","For general use of `mesh3d` it is preferred that `i`, `j`, `k` are","supplied.","If *-1*, Delaunay triangulation is used, which is mainly suitable if the","mesh is a single, more or less layer surface that is perpendicular to `delaunayaxis`.","In case the `delaunayaxis` intersects the mesh surface at more than one point","it will result triangles that are very long in the dimension of `delaunayaxis`.","If *>0*, the alpha-shape algorithm is used. In this case, the positive `alphahull` value","signals the use of the alpha-shape algorithm, _and_ its value","acts as the parameter for the mesh fitting.","If *0*,  the convex-hull algorithm is used. It is suitable for convex bodies","or if the intention is to enclose the `x`, `y` and `z` point set into a convex","hull."].join(" ")},intensity:{valType:"data_array",editType:"calc",description:["Sets the intensity values for vertices or cells","as defined by `intensitymode`.","It can be used for plotting fields on meshes."].join(" ")},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc",description:["Determines the source of `intensity` values."].join(" ")},color:{valType:"color",editType:"calc",description:"Sets the color of the whole mesh"},vertexcolor:{valType:"data_array",editType:"calc",description:["Sets the color of each vertex","Overrides *color*. While Red, green and blue colors","are in the range of 0 and 255; in the case of having","vertex color data in RGBA format, the alpha color","should be normalized to be between 0 and 1."].join(" ")},facecolor:{valType:"data_array",editType:"calc",description:["Sets the color of each face","Overrides *color* and *vertexcolor*."].join(" ")},transforms:void 0},attributes$m("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:attributes$4.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not normal smoothing is applied to the meshes,","creating meshes with an angular, low-poly look via flat reflections."].join(" ")},contour:{show:extendFlat$2({},attributes$4.contours.x.show,{description:["Sets whether or not dynamic contours are shown on hover"].join(" ")}),color:attributes$4.contours.x.color,width:attributes$4.contours.x.width,editType:"calc"},lightposition:{x:extendFlat$2({},attributes$4.lightposition.x,{dflt:1e5}),y:extendFlat$2({},attributes$4.lightposition.y,{dflt:1e5}),z:extendFlat$2({},attributes$4.lightposition.z,{dflt:0}),editType:"calc"},lighting:extendFlat$2({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc",description:"Epsilon for vertex normals calculation avoids math issues arising from degenerate geometry."},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc",description:"Epsilon for face normals calculation avoids math issues arising from degenerate geometry."},editType:"calc"},attributes$4.lighting),hoverinfo:extendFlat$2({},attributes$r.hoverinfo,{editType:"calc"}),showlegend:extendFlat$2({},attributes$r.showlegend,{dflt:!1})}),attributes$2=createCommonjsModule((function(t){var e=axis_format_attributes.axisHoverFormat,r=template_attributes.hovertemplateAttrs,n=extend.extendFlat,i=edit_types.overrideAll;function a(t){return{show:{valType:"boolean",dflt:!1,description:["Determines whether or not slice planes about the",t,"dimension are drawn."].join(" ")},locations:{valType:"data_array",dflt:[],description:["Specifies the location(s) of slices on the axis.","When not specified slices would be created for","all points of the axis",t,"except start and end."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `slices`. The default fill value of the","`slices` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")}}}function o(t){return{show:{valType:"boolean",dflt:!0,description:["Sets the fill ratio of the `slices`. The default fill value of the",t,"`slices` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `caps`. The default fill value of the","`caps` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")}}}var s=t.exports=i(n({x:{valType:"data_array",description:["Sets the X coordinates of the vertices on X axis."].join(" ")},y:{valType:"data_array",description:["Sets the Y coordinates of the vertices on Y axis."].join(" ")},z:{valType:"data_array",description:["Sets the Z coordinates of the vertices on Z axis."].join(" ")},value:{valType:"data_array",description:["Sets the 4th dimension (value) of the vertices."].join(" ")},isomin:{valType:"number",description:["Sets the minimum boundary for iso-surface plot."].join(" ")},isomax:{valType:"number",description:["Sets the maximum boundary for iso-surface plot."].join(" ")},surface:{show:{valType:"boolean",dflt:!0,description:["Hides/displays surfaces between minimum and maximum iso-values."].join(" ")},count:{valType:"integer",dflt:2,min:1,description:["Sets the number of iso-surfaces between minimum and maximum iso-values.","By default this value is 2 meaning that only minimum and maximum surfaces","would be drawn."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the iso-surface. The default fill value of the","surface is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all",description:["Sets the surface pattern of the iso-surface 3-D sections. The default pattern of","the surface is `all` meaning that the rest of surface elements would be shaded.","The check options (either 1 or 2) could be used to draw half of the squares","on the surface. Using various combinations of capital `A`, `B`, `C`, `D` and `E`","may also be used to reduce the number of triangles on the iso-surfaces and","creating other patterns of interest."].join(" ")}},spaceframe:{show:{valType:"boolean",dflt:!1,description:["Displays/hides tetrahedron shapes between minimum and","maximum iso-values. Often useful when either caps or","surfaces are disabled or filled with values less than 1."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:.15,description:["Sets the fill ratio of the `spaceframe` elements. The default fill value","is 0.15 meaning that only 15% of the area of every faces of tetras would be","shaded. Applying a greater `fill` ratio would allow the creation of stronger","elements or could be sued to have entirely closed areas (in case of using 1)."].join(" ")}},slices:{x:a("x"),y:a("y"),z:a("z")},caps:{x:o("x"),y:o("y"),z:o("z")},text:{valType:"string",dflt:"",arrayOk:!0,description:["Sets the text elements associated with the vertices.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:r(),xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z"),valuehoverformat:e("value",1),showlegend:n({},attributes$r.showlegend,{dflt:!1})},attributes$m("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:attributes$3.opacity,lightposition:attributes$3.lightposition,lighting:attributes$3.lighting,flatshading:attributes$3.flatshading,contour:attributes$3.contour,hoverinfo:n({},attributes$r.hoverinfo)}),"calc","nested");s.flatshading.dflt=!0,s.lighting.facenormalsepsilon.dflt=0,s.x.editType=s.y.editType=s.z.editType=s.value.editType="calc+clearAxisTypes",s.transforms=void 0}));function supplyDefaults(t,e,r,n){supplyIsoDefaults(t,e,r,n,(function(r,n){return lib_1.coerce(t,e,attributes$2,r,n)}))}function supplyIsoDefaults(t,e,r,n,i){var a=i("isomin"),o=i("isomax");null!=o&&null!=a&&a>o&&(e.isomin=null,e.isomax=null);var s=i("x"),l=i("y"),c=i("z"),u=i("value");s&&s.length&&l&&l.length&&c&&c.length&&u&&u.length?(registry.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y","z"],n),i("valuehoverformat"),["x","y","z"].forEach((function(t){i(t+"hoverformat");var e="caps."+t;i(e+".show")&&i(e+".fill");var r="slices."+t;i(r+".show")&&(i(r+".fill"),i(r+".locations"))})),i("spaceframe.show")&&i("spaceframe.fill"),i("surface.show")&&(i("surface.count"),i("surface.fill"),i("surface.pattern")),i("contour.show")&&(i("contour.color"),i("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach((function(t){i(t)})),defaults$k(t,e,n,i,{prefix:"",cLetter:"c"}),e._length=null):e.visible=!1}var defaults$2={supplyDefaults:supplyDefaults,supplyIsoDefaults:supplyIsoDefaults};function calc$2(t,e){e._len=Math.min(e.u.length,e.v.length,e.w.length,e.x.length,e.y.length,e.z.length),e._u=filter$1(e.u,e._len),e._v=filter$1(e.v,e._len),e._w=filter$1(e.w,e._len),e._x=filter$1(e.x,e._len),e._y=filter$1(e.y,e._len),e._z=filter$1(e.z,e._len);var r=processGrid$1(e);e._gridFill=r.fill,e._Xs=r.Xs,e._Ys=r.Ys,e._Zs=r.Zs,e._len=r.len;var n,i,a,o=0;e.starts&&(n=filter$1(e.starts.x||[]),i=filter$1(e.starts.y||[]),a=filter$1(e.starts.z||[]),o=Math.min(n.length,i.length,a.length)),e._startsX=n||[],e._startsY=i||[],e._startsZ=a||[];var s,l=0,c=1/0;for(s=0;s<e._len;s++){var u=e._u[s],d=e._v[s],h=e._w[s],g=Math.sqrt(u*u+d*d+h*h);l=Math.max(l,g),c=Math.min(c,g)}for(calc$7(t,e,{vals:[c,l],containerStr:"",cLetter:"c"}),s=0;s<o;s++){var f=n[s];r.xMax=Math.max(r.xMax,f),r.xMin=Math.min(r.xMin,f);var p=i[s];r.yMax=Math.max(r.yMax,p),r.yMin=Math.min(r.yMin,p);var m=a[s];r.zMax=Math.max(r.zMax,m),r.zMin=Math.min(r.zMin,m)}e._slen=o,e._normMax=l,e._xbnds=[r.xMin,r.xMax],e._ybnds=[r.yMin,r.yMax],e._zbnds=[r.zMin,r.zMax]}function processGrid$1(t){var e,r,n,i,a,o,s,l,c,u,d,h,g=t._x,f=t._y,p=t._z,m=t._len,y=-1/0,b=1/0,v=-1/0,x=1/0,I=-1/0,B=1/0,C="";for(m&&(s=g[0],c=f[0],d=p[0]),m>1&&(l=g[m-1],u=f[m-1],h=p[m-1]),e=0;e<m;e++)y=Math.max(y,g[e]),b=Math.min(b,g[e]),v=Math.max(v,f[e]),x=Math.min(x,f[e]),I=Math.max(I,p[e]),B=Math.min(B,p[e]),i||g[e]===s||(i=!0,C+="x"),a||f[e]===c||(a=!0,C+="y"),o||p[e]===d||(o=!0,C+="z");i||(C+="x"),a||(C+="y"),o||(C+="z");var F=distinctVals(t._x),A=distinctVals(t._y),Q=distinctVals(t._z);C=(C=(C=C.replace("x",(s>l?"-":"+")+"x")).replace("y",(c>u?"-":"+")+"y")).replace("z",(d>h?"-":"+")+"z");var _=function(){m=0,F=[],A=[],Q=[]};(!m||m<F.length*A.length*Q.length)&&_();var w=function(t){return"x"===t?g:"y"===t?f:p},U=function(t){return"x"===t?F:"y"===t?A:Q},S=function(t){return t[m-1]<t[0]?-1:1},E=w(C[1]),L=w(C[3]),T=w(C[5]),R=U(C[1]).length,k=U(C[3]).length,G=U(C[5]).length,N=!1,M=function(t,e,r){return R*(k*t+e)+r},D=S(w(C[1])),X=S(w(C[3])),V=S(w(C[5]));for(e=0;e<G-1;e++){for(r=0;r<k-1;r++){for(n=0;n<R-1;n++){var W=M(e,r,n),Z=M(e,r,n+1),O=M(e,r+1,n),$=M(e+1,r,n);if(E[W]*D<E[Z]*D&&L[W]*X<L[O]*X&&T[W]*V<T[$]*V||(N=!0),N)break}if(N)break}if(N)break}return N&&(lib_1.warn("Encountered arbitrary coordinates! Unable to input data grid."),_()),{xMin:b,yMin:x,zMin:B,xMax:y,yMax:v,zMax:I,Xs:F,Ys:A,Zs:Q,len:m,fill:C}}function distinctVals(t){return lib_1.distinctVals(t).vals}function filter$1(t,e){if(void 0===e&&(e=t.length),lib_1.isTypedArray(t))return t.subarray(0,e);for(var r=[],n=0;n<e;n++)r[n]=+t[n];return r}var calc_1={calc:calc$2,filter:filter$1,processGrid:processGrid$1},processGrid=calc_1.processGrid,filter=calc_1.filter,calc$1=function(t,e){e._len=Math.min(e.x.length,e.y.length,e.z.length,e.value.length),e._x=filter(e.x,e._len),e._y=filter(e.y,e._len),e._z=filter(e.z,e._len),e._value=filter(e.value,e._len);var r=processGrid(e);e._gridFill=r.fill,e._Xs=r.Xs,e._Ys=r.Ys,e._Zs=r.Zs,e._len=r.len;for(var n=1/0,i=-1/0,a=0;a<e._len;a++){var o=e._value[a];n=Math.min(n,o),i=Math.max(i,o)}e._minValues=n,e._maxValues=i,e._vMin=void 0===e.isomin||null===e.isomin?n:e.isomin,e._vMax=void 0===e.isomax||null===e.isomin?i:e.isomax,calc$7(t,e,{vals:[e._vMin,e._vMax],containerStr:"",cLetter:"c"})},stackgl_modules=createCommonjsModule((function(t,e){t.exports=function(){function t(e,r,n){function i(o,s){if(!r[o]){if(!e[o]){var l="function"==typeof commonjsRequire&&commonjsRequire;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[o]={exports:{}};e[o][0].call(u.exports,(function(t){return i(e[o][1][t]||t)}),u,u.exports,t,e,r,n)}return r[o].exports}for(var a="function"==typeof commonjsRequire&&commonjsRequire,o=0;o<n.length;o++)i(n[o]);return i}return t}()({1:[function(t,e,r){r.byteLength=u,r.toByteArray=h,r.fromByteArray=p;for(var n=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=o.length;s<l;++s)n[s]=o[s],i[o.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function u(t){var e=c(t),r=e[0],n=e[1];return 3*(r+n)/4-n}function d(t,e,r){return 3*(e+r)/4-r}function h(t){var e,r,n=c(t),o=n[0],s=n[1],l=new a(d(t,o,s)),u=0,h=s>0?o-4:o;for(r=0;r<h;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;return 2===s&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,l[u++]=255&e),1===s&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e),l}function g(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function f(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),i.push(g(n));return i.join("")}function p(t){for(var e,r=t.length,i=r%3,a=[],o=16383,s=0,l=r-i;s<l;s+=o)a.push(f(t,s,s+o>l?l:s+o));return 1===i?(e=t[r-1],a.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],a.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],2:[function(t,e,r){},{}],3:[function(t,e,r){(function(e){(function(){var e=t("base64-js"),n=t("ieee754");r.Buffer=s,r.SlowBuffer=y,r.INSPECT_MAX_BYTES=50;var i=2147483647;function a(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}function o(t){if(t>i)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=s.prototype,e}function s(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return d(t)}return l(t,e,r)}function l(t,e,r){if("string"==typeof t)return h(t,e);if(ArrayBuffer.isView(t))return g(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(J(t,ArrayBuffer)||t&&J(t.buffer,ArrayBuffer))return f(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return s.from(n,e,r);var i=p(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return s.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t,e,r){return c(t),t<=0?o(t):void 0!==e?"string"==typeof r?o(t).fill(e,r):o(t).fill(e):o(t)}function d(t){return c(t),o(t<0?0:0|m(t))}function h(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|b(t,e),n=o(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function g(t){for(var e=t.length<0?0:0|m(t.length),r=o(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function f(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return(n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r)).__proto__=s.prototype,n}function p(t){if(s.isBuffer(t)){var e=0|m(t.length),r=o(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||j(t.length)?o(0):g(t):"Buffer"===t.type&&Array.isArray(t.data)?g(t.data):void 0}function m(t){if(t>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|t}function y(t){return+t!=t&&(t=0),s.alloc(+t)}function b(t,e){if(s.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||J(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return P(t).length;default:if(i)return n?-1:$(t).length;e=(""+e).toLowerCase(),i=!0}}function v(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,e,r);case"utf8":case"utf-8":return S(this,e,r);case"ascii":return T(this,e,r);case"latin1":case"binary":return R(this,e,r);case"base64":return U(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function x(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function I(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),j(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=s.from(e,n)),s.isBuffer(e))return 0===e.length?-1:B(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):B(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function B(t,e,r,n,i){var a,o=1,s=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,s/=2,l/=2,r/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var u=-1;for(a=r;a<s;a++)if(c(t,a)===c(e,-1===u?0:a-u)){if(-1===u&&(u=a),a-u+1===l)return u*o}else-1!==u&&(a-=a-u),u=-1}else for(r+l>s&&(r=s-l),a=r;a>=0;a--){for(var d=!0,h=0;h<l;h++)if(c(t,a+h)!==c(e,h)){d=!1;break}if(d)return a}return-1}function C(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=e.length;n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(e.substr(2*o,2),16);if(j(s))return o;t[r+o]=s}return o}function F(t,e,r,n){return z($(e,t.length-r),t,r,n)}function A(t,e,r,n){return z(H(e),t,r,n)}function Q(t,e,r,n){return A(t,e,r,n)}function _(t,e,r,n){return z(P(e),t,r,n)}function w(t,e,r,n){return z(Y(e,t.length-r),t,r,n)}function U(t,r,n){return 0===r&&n===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(r,n))}function S(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var a,o,s,l,c=t[i],u=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=r)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(a=t[i+1]))&&(l=(31&c)<<6|63&a)>127&&(u=l);break;case 3:a=t[i+1],o=t[i+2],128==(192&a)&&128==(192&o)&&(l=(15&c)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:a=t[i+1],o=t[i+2],s=t[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(l=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),i+=d}return L(n)}r.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=a(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(t,e,r){return l(t,e,r)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(t,e,r){return u(t,e,r)},s.allocUnsafe=function(t){return d(t)},s.allocUnsafeSlow=function(t){return d(t)},s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(J(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),J(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,i=0,a=Math.min(r,n);i<a;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=s.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(J(a,Uint8Array)&&(a=s.from(a)),!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},s.byteLength=b,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)x(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)x(this,e,e+3),x(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)x(this,e,e+7),x(this,e+1,e+6),x(this,e+2,e+5),x(this,e+3,e+4);return this},s.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?S(this,0,t):v.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},s.prototype.compare=function(t,e,r,n,i){if(J(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(e>>>=0),l=Math.min(a,o),c=this.slice(n,i),u=t.slice(e,r),d=0;d<l;++d)if(c[d]!==u[d]){a=c[d],o=u[d];break}return a<o?-1:o<a?1:0},s.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},s.prototype.indexOf=function(t,e,r){return I(this,t,e,r,!0)},s.prototype.lastIndexOf=function(t,e,r){return I(this,t,e,r,!1)},s.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return C(this,t,e,r);case"utf8":case"utf-8":return F(this,t,e,r);case"ascii":return A(this,t,e,r);case"latin1":case"binary":return Q(this,t,e,r);case"base64":return _(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,e,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function L(t){var e=t.length;if(e<=E)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=E));return r}function T(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function R(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function k(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=e;a<r;++a)i+=O(t[a]);return i}function G(t,e,r){for(var n=t.slice(e,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function N(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,r,n,i,a){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function D(t,e,r,n,i,a){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function X(t,e,r,i,a){return e=+e,r>>>=0,a||D(t,e,r,4),n.write(t,e,r,i,23,4),r+4}function V(t,e,r,i,a){return e=+e,r>>>=0,a||D(t,e,r,8),n.write(t,e,r,i,52,8),r+8}s.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return n.__proto__=s.prototype,n},s.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);for(var n=this[t],i=1,a=0;++a<e&&(i*=256);)n+=this[t+a]*i;return n},s.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},s.prototype.readUInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);for(var n=this[t],i=1,a=0;++a<e&&(i*=256);)n+=this[t+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},s.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);for(var n=e,i=1,a=this[t+--n];n>0&&(i*=256);)a+=this[t+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},s.prototype.readInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){t>>>=0,e||N(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function(t,e){t>>>=0,e||N(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return t>>>=0,e||N(t,4,this.length),n.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||N(t,4,this.length),n.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||N(t,8,this.length),n.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||N(t,8,this.length),n.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||M(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[e]=255&t;++a<r&&(i*=256);)this[e+a]=t/i&255;return e+r},s.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||M(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+r},s.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||M(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||M(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||M(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||M(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||M(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);M(this,t,e,r,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<r&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+r},s.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);M(this,t,e,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+r},s.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||M(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||M(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||M(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||M(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeFloatLE=function(t,e,r){return X(this,t,e,!0,r)},s.prototype.writeFloatBE=function(t,e,r){return X(this,t,e,!1,r)},s.prototype.writeDoubleLE=function(t,e,r){return V(this,t,e,!0,r)},s.prototype.writeDoubleBE=function(t,e,r){return V(this,t,e,!1,r)},s.prototype.copy=function(t,e,r,n){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,r,n);else if(this===t&&r<e&&e<n)for(var a=i-1;a>=0;--a)t[a+e]=this[a+r];else Uint8Array.prototype.set.call(t,this.subarray(r,n),e);return i},s.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!s.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var a;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(a=e;a<r;++a)this[a]=t;else{var o=s.isBuffer(t)?t:s.from(t,n),l=o.length;if(0===l)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<r-e;++a)this[a+e]=o[a%l]}return this};var W=/[^+/0-9A-Za-z-_]/g;function Z(t){if((t=(t=t.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function O(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,e){var r;e=e||1/0;for(var n=t.length,i=null,a=[],o=0;o<n;++o){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function H(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function Y(t,e){for(var r,n,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)n=(r=t.charCodeAt(o))>>8,i=r%256,a.push(i),a.push(n);return a}function P(t){return e.toByteArray(Z(t))}function z(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function J(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function j(t){return t!=t}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(t,e,r){r.read=function(t,e,r,n,i){var a,o,s=8*i-n-1,l=(1<<s)-1,c=l>>1,u=-7,d=r?i-1:0,h=r?-1:1,g=t[e+d];for(d+=h,a=g&(1<<-u)-1,g>>=-u,u+=s;u>0;a=256*a+t[e+d],d+=h,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=n;u>0;o=256*o+t[e+d],d+=h,u-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(g?-1:1);o+=Math.pow(2,n),a-=c}return(g?-1:1)*o*Math.pow(2,a-n)},r.write=function(t,e,r,n,i,a){var o,s,l,c=8*a-i-1,u=(1<<c)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:a-1,f=n?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(o++,l/=2),o+d>=u?(s=0,o=u):o+d>=1?(s=(e*l-1)*Math.pow(2,i),o+=d):(s=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;t[r+g]=255&s,g+=f,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;t[r+g]=255&o,g+=f,o/=256,c-=8);t[r+g-f]|=128*p}},{}],5:[function(t,e,r){var n,i,a=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}function c(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,d=[],h=!1,g=-1;function f(){h&&u&&(h=!1,u.length?d=u.concat(d):g=-1,d.length&&p())}function p(){if(!h){var t=l(f);h=!0;for(var e=d.length;e;){for(u=d,d=[];++g<e;)u&&u[g].run();g=-1,e=d.length}u=null,h=!1,c(t)}}function m(t,e){this.fun=t,this.array=e}function y(){}a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];d.push(new m(t,e)),1!==d.length||h||l(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=y,a.addListener=y,a.once=y,a.off=y,a.removeListener=y,a.removeAllListeners=y,a.emit=y,a.prependListener=y,a.prependOnceListener=y,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],6:[function(t,e,r){e.exports={alpha_shape:t("alpha-shape"),convex_hull:t("convex-hull"),delaunay_triangulate:t("delaunay-triangulate"),gl_cone3d:t("gl-cone3d"),gl_error3d:t("gl-error3d"),gl_heatmap2d:t("gl-heatmap2d"),gl_line3d:t("gl-line3d"),gl_mesh3d:t("gl-mesh3d"),gl_plot2d:t("gl-plot2d"),gl_plot3d:t("gl-plot3d"),gl_pointcloud2d:t("gl-pointcloud2d"),gl_scatter3d:t("gl-scatter3d"),gl_select_box:t("gl-select-box"),gl_spikes2d:t("gl-spikes2d"),gl_streamtube3d:t("gl-streamtube3d"),gl_surface3d:t("gl-surface3d"),ndarray:t("ndarray"),ndarray_linear_interpolate:t("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(t,e,r){e.exports=l;var n=t("turntable-camera-controller"),i=t("orbit-camera-controller"),a=t("matrix-camera-controller");function o(t,e){this._controllerNames=Object.keys(t),this._controllerList=this._controllerNames.map((function(e){return t[e]})),this._mode=e,this._active=t[e],this._active||(this._mode="turntable",this._active=t.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var s=o.prototype;function l(t){var e=(t=t||{}).eye||[0,0,1],r=t.center||[0,0,0],s=t.up||[0,1,0],l=t.distanceLimits||[0,1/0],c=t.mode||"turntable",u=n(),d=i(),h=a();return u.setDistanceLimits(l[0],l[1]),u.lookAt(0,e,r,s),d.setDistanceLimits(l[0],l[1]),d.lookAt(0,e,r,s),h.setDistanceLimits(l[0],l[1]),h.lookAt(0,e,r,s),new o({turntable:u,orbit:d,matrix:h},c)}s.flush=function(t){for(var e=this._controllerList,r=0;r<e.length;++r)e[r].flush(t)},s.idle=function(t){for(var e=this._controllerList,r=0;r<e.length;++r)e[r].idle(t)},s.lookAt=function(t,e,r,n){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].lookAt(t,e,r,n)},s.rotate=function(t,e,r,n){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].rotate(t,e,r,n)},s.pan=function(t,e,r,n){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].pan(t,e,r,n)},s.translate=function(t,e,r,n){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].translate(t,e,r,n)},s.setMatrix=function(t,e){for(var r=this._controllerList,n=0;n<r.length;++n)r[n].setMatrix(t,e)},s.setDistanceLimits=function(t,e){for(var r=this._controllerList,n=0;n<r.length;++n)r[n].setDistanceLimits(t,e)},s.setDistance=function(t,e){for(var r=this._controllerList,n=0;n<r.length;++n)r[n].setDistance(t,e)},s.recalcMatrix=function(t){this._active.recalcMatrix(t)},s.getDistance=function(t){return this._active.getDistance(t)},s.getDistanceLimits=function(t){return this._active.getDistanceLimits(t)},s.lastT=function(){return this._active.lastT()},s.setMode=function(t){if(t!==this._mode){var e=this._controllerNames.indexOf(t);if(!(e<0)){var r=this._active,n=this._controllerList[e],i=Math.max(r.lastT(),n.lastT());r.recalcMatrix(i),n.setMatrix(i,r.computedMatrix),this._active=n,this._mode=t,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},s.getMode=function(){return this._mode}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(t,e,r){var n="undefined"==typeof WeakMap?t("weak-map"):WeakMap,i=t("gl-buffer"),a=t("gl-vao"),o=new n;function s(t){var e=o.get(t),r=e&&(e._triangleBuffer.handle||e._triangleBuffer.buffer);if(!r||!t.isBuffer(r)){var n=i(t,new Float32Array([-1,-1,-1,4,4,-1]));(e=a(t,[{buffer:n,type:t.FLOAT,size:2}]))._triangleBuffer=n,o.set(t,e)}e.bind(),t.drawArrays(t.TRIANGLES,0,3),e.unbind()}e.exports=s},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(t,e,r){var n=t("pad-left");function i(t,e,r){e="number"==typeof e?e:1,r=r||": ";var i=t.split(/\r?\n/),a=String(i.length+e-1).length;return i.map((function(t,i){var o=i+e,s=String(o).length;return n(o,a-s)+r+t})).join("\n")}e.exports=i},{"pad-left":264}],10:[function(t,e,r){e.exports=a;var n=t("robust-orientation");function i(t,e){for(var r=new Array(e+1),i=0;i<t.length;++i)r[i]=t[i];for(i=0;i<=t.length;++i){for(var a=t.length;a<=e;++a){for(var o=new Array(e),s=0;s<e;++s)o[s]=Math.pow(a+1-i,s);r[a]=o}if(n.apply(void 0,r))return!0}return!1}function a(t){var e=t.length;if(0===e)return[];if(1===e)return[0];for(var r=t[0].length,n=[t[0]],a=[0],o=1;o<e;++o)if(n.push(t[o]),i(n,r)){if(a.push(o),a.length===r+1)return a}else n.pop();return a}},{"robust-orientation":284}],11:[function(t,e,r){e.exports=a;var n=t("delaunay-triangulate"),i=t("circumradius");function a(t,e){return n(e).filter((function(r){for(var n=new Array(r.length),a=0;a<r.length;++a)n[a]=e[r[a]];return i(n)*t<1}))}},{circumradius:49,"delaunay-triangulate":63}],12:[function(t,e,r){e.exports=a;var n=t("alpha-complex"),i=t("simplicial-complex-boundary");function a(t,e){return i(n(t,e))}},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(t,e,r){e.exports=function(t){return atob(t)}},{}],14:[function(t,e,r){e.exports=a;var n=t("robust-linear-solve");function i(t){for(var e=0,r=0;r<t.length;++r)e+=t[r];return e}function a(t,e){for(var r=e.length,a=new Array(r+1),o=0;o<r;++o){for(var s=new Array(r+1),l=0;l<=r;++l)s[l]=t[l][o];a[o]=s}for(a[r]=new Array(r+1),o=0;o<=r;++o)a[r][o]=1;var c=new Array(r+1);for(o=0;o<r;++o)c[o]=e[o];c[r]=1;var u=n(a,c),d=i(u[r+1]);0===d&&(d=1);var h=new Array(r+1);for(o=0;o<=r;++o)h[o]=i(u[o])/d;return h}},{"robust-linear-solve":283}],15:[function(t,e,r){var n=t("./lib/rationalize");function i(t,e){return n(t[0].mul(e[1]).add(e[0].mul(t[1])),t[1].mul(e[1]))}e.exports=i},{"./lib/rationalize":25}],16:[function(t,e,r){function n(t,e){return t[0].mul(e[1]).cmp(e[0].mul(t[1]))}e.exports=n},{}],17:[function(t,e,r){var n=t("./lib/rationalize");function i(t,e){return n(t[0].mul(e[1]),t[1].mul(e[0]))}e.exports=i},{"./lib/rationalize":25}],18:[function(t,e,r){var n=t("./is-rat"),i=t("./lib/is-bn"),a=t("./lib/num-to-bn"),o=t("./lib/str-to-bn"),s=t("./lib/rationalize"),l=t("./div");function c(t,e){if(n(t))return e?l(t,c(e)):[t[0].clone(),t[1].clone()];var r,u,d=0;if(i(t))r=t.clone();else if("string"==typeof t)r=o(t);else{if(0===t)return[a(0),a(1)];if(t===Math.floor(t))r=a(t);else{for(;t!==Math.floor(t);)t*=Math.pow(2,256),d-=256;r=a(t)}}if(n(e))r.mul(e[1]),u=e[0].clone();else if(i(e))u=e.clone();else if("string"==typeof e)u=o(e);else if(e)if(e===Math.floor(e))u=a(e);else{for(;e!==Math.floor(e);)e*=Math.pow(2,256),d+=256;u=a(e)}else u=a(1);return d>0?r=r.ushln(d):d<0&&(u=u.ushln(-d)),s(r,u)}e.exports=c},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(t,e,r){var n=t("./lib/is-bn");function i(t){return Array.isArray(t)&&2===t.length&&n(t[0])&&n(t[1])}e.exports=i},{"./lib/is-bn":23}],20:[function(t,e,r){var n=t("bn.js");function i(t){return t.cmp(new n(0))}e.exports=i},{"bn.js":33}],21:[function(t,e,r){var n=t("./bn-sign");function i(t){var e=t.length,r=t.words,i=0;if(1===e)i=r[0];else if(2===e)i=r[0]+67108864*r[1];else for(var a=0;a<e;a++)i+=r[a]*Math.pow(67108864,a);return n(t)*i}e.exports=i},{"./bn-sign":20}],22:[function(t,e,r){var n=t("double-bits"),i=t("bit-twiddle").countTrailingZeros;function a(t){var e=i(n.lo(t));if(e<32)return e;var r=i(n.hi(t));return r>20?52:r+32}e.exports=a},{"bit-twiddle":32,"double-bits":64}],23:[function(t,e,r){function n(t){return t&&"object"==typeof t&&Boolean(t.words)}t("bn.js"),e.exports=n},{"bn.js":33}],24:[function(t,e,r){var n=t("bn.js"),i=t("double-bits");function a(t){var e=i.exponent(t);return e<52?new n(t):new n(t*Math.pow(2,52-e)).ushln(e-52)}e.exports=a},{"bn.js":33,"double-bits":64}],25:[function(t,e,r){var n=t("./num-to-bn"),i=t("./bn-sign");function a(t,e){var r=i(t),a=i(e);if(0===r)return[n(0),n(1)];if(0===a)return[n(0),n(0)];a<0&&(t=t.neg(),e=e.neg());var o=t.gcd(e);return o.cmpn(1)?[t.div(o),e.div(o)]:[t,e]}e.exports=a},{"./bn-sign":20,"./num-to-bn":24}],26:[function(t,e,r){var n=t("bn.js");function i(t){return new n(t)}e.exports=i},{"bn.js":33}],27:[function(t,e,r){var n=t("./lib/rationalize");function i(t,e){return n(t[0].mul(e[0]),t[1].mul(e[1]))}e.exports=i},{"./lib/rationalize":25}],28:[function(t,e,r){var n=t("./lib/bn-sign");function i(t){return n(t[0])*n(t[1])}e.exports=i},{"./lib/bn-sign":20}],29:[function(t,e,r){var n=t("./lib/rationalize");function i(t,e){return n(t[0].mul(e[1]).sub(t[1].mul(e[0])),t[1].mul(e[1]))}e.exports=i},{"./lib/rationalize":25}],30:[function(t,e,r){var n=t("./lib/bn-to-num"),i=t("./lib/ctz");function a(t){var e=t[0],r=t[1];if(0===e.cmpn(0))return 0;var a=e.abs().divmod(r.abs()),o=a.div,s=n(o),l=a.mod,c=e.negative!==r.negative?-1:1;if(0===l.cmpn(0))return c*s;if(s){var u=i(s)+4;return c*(s+(h=n(l.ushln(u).divRound(r)))*Math.pow(2,-u))}var d=r.bitLength()-l.bitLength()+53,h=n(l.ushln(d).divRound(r));return d<1023?c*h*Math.pow(2,-d):c*(h*=Math.pow(2,-1023))*Math.pow(2,1023-d)}e.exports=a},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(t,e,r){function n(t,e,r,n,i){for(var a=i+1;n<=i;){var o=n+i>>>1,s=t[o];(void 0!==r?r(s,e):s-e)>=0?(a=o,i=o-1):n=o+1}return a}function i(t,e,r,n,i){for(var a=i+1;n<=i;){var o=n+i>>>1,s=t[o];(void 0!==r?r(s,e):s-e)>0?(a=o,i=o-1):n=o+1}return a}function a(t,e,r,n,i){for(var a=n-1;n<=i;){var o=n+i>>>1,s=t[o];(void 0!==r?r(s,e):s-e)<0?(a=o,n=o+1):i=o-1}return a}function o(t,e,r,n,i){for(var a=n-1;n<=i;){var o=n+i>>>1,s=t[o];(void 0!==r?r(s,e):s-e)<=0?(a=o,n=o+1):i=o-1}return a}function s(t,e,r,n,i){for(;n<=i;){var a=n+i>>>1,o=t[a],s=void 0!==r?r(o,e):o-e;if(0===s)return a;s<=0?n=a+1:i=a-1}return-1}function l(t,e,r,n,i,a){return"function"==typeof r?a(t,e,r,void 0===n?0:0|n,void 0===i?t.length-1:0|i):a(t,e,void 0,void 0===r?0:0|r,void 0===n?t.length-1:0|n)}e.exports={ge:function(t,e,r,i,a){return l(t,e,r,i,a,n)},gt:function(t,e,r,n,a){return l(t,e,r,n,a,i)},lt:function(t,e,r,n,i){return l(t,e,r,n,i,a)},le:function(t,e,r,n,i){return l(t,e,r,n,i,o)},eq:function(t,e,r,n,i){return l(t,e,r,n,i,s)}}},{}],32:[function(t,e,r){var n=32;function i(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}r.INT_BITS=n,r.INT_MAX=2147483647,r.INT_MIN=-1<<n-1,r.sign=function(t){return(t>0)-(t<0)},r.abs=function(t){var e=t>>n-1;return(t^e)-e},r.min=function(t,e){return e^(t^e)&-(t<e)},r.max=function(t,e){return t^(t^e)&-(t<e)},r.isPow2=function(t){return!(t&t-1||!t)},r.log2=function(t){var e,r;return e=(t>65535)<<4,e|=r=((t>>>=e)>255)<<3,e|=r=((t>>>=r)>15)<<2,(e|=r=((t>>>=r)>3)<<1)|(t>>>=r)>>1},r.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},r.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},r.countTrailingZeros=i,r.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)},r.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},r.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var a=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,n=e,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;t[e]=n<<i&255}}(a),r.reverse=function(t){return a[255&t]<<24|a[t>>>8&255]<<16|a[t>>>16&255]<<8|a[t>>>24&255]},r.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},r.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},r.interleave3=function(t,e,r){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},r.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},r.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>i(t)+1}},{}],33:[function(t,e,r){!function(e,r){function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function a(t,e,r){if(a.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var o;"object"==typeof e?e.exports=a:r.BN=a,a.BN=a,a.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:t("buffer").Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function l(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function c(t,e,r,n){for(var i=0,a=Math.min(t.length,r),o=e;o<a;o++){var s=t.charCodeAt(o)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}a.isBN=function(t){return t instanceof a||null!==t&&"object"==typeof t&&t.constructor.wordSize===a.wordSize&&Array.isArray(t.words)},a.max=function(t,e){return t.cmp(e)>0?t:e},a.min=function(t,e){return t.cmp(e)<0?t:e},a.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},a.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},a.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o,s=0;if("be"===r)for(i=t.length-1,a=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);else if("le"===r)for(i=0,a=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);return this.strip()},a.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,a=0,o=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=l(t,e,n)<<a,this.words[o]|=67108863&i,a>=18?(a-=18,o+=1,this.words[o]|=i>>>26):a+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=l(t,e,n)<<a,this.words[o]|=67108863&i,a>=18?(a-=18,o+=1,this.words[o]|=i>>>26):a+=8;this.strip()},a.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var a=t.length-r,o=a%n,s=Math.min(a,a-o)+r,l=0,u=r;u<s;u+=n)l=c(t,u,u+n,e),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==o){var d=1;for(l=c(t,u,t.length,e),u=0;u<o;u++)d*=e;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},a.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},a.prototype.clone=function(){var t=new a(null);return this.copy(t),t},a.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function g(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}function f(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],a=0|e.words[0],o=i*a,s=67108863&o,l=o/67108864|0;r.words[0]=s;for(var c=1;c<n;c++){for(var u=l>>>26,d=67108863&l,h=Math.min(c,e.length-1),g=Math.max(0,c-t.length+1);g<=h;g++){var f=c-g|0;u+=(o=(i=0|t.words[f])*(a=0|e.words[g])+d)/67108864|0,d=67108863&o}r.words[c]=0|d,l=0|u}return 0!==l?r.words[c]=0|l:r.length--,r.strip()}a.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,a=0,o=0;o<this.length;o++){var s=this.words[o],l=(16777215&(s<<i|a)).toString(16);r=0!=(a=s>>>24-i&16777215)||o!==this.length-1?u[6-l.length]+l+r:l+r,(i+=2)>=26&&(i-=26,o--)}for(0!==a&&(r=a.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var c=d[t],g=h[t];r="";var f=this.clone();for(f.negative=0;!f.isZero();){var p=f.modn(g).toString(t);r=(f=f.idivn(g)).isZero()?p+r:u[c-p.length]+p+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(t,e){return n(void 0!==o),this.toArrayLike(o,t,e)},a.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},a.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),a=r||Math.max(1,i);n(i<=a,"byte array longer than desired length"),n(a>0,"Requested array length <= 0"),this.strip();var o,s,l="le"===e,c=new t(a),u=this.clone();if(l){for(s=0;!u.isZero();s++)o=u.andln(255),u.iushrn(8),c[s]=o;for(;s<a;s++)c[s]=0}else{for(s=0;s<a-i;s++)c[s]=0;for(s=0;!u.isZero();s++)o=u.andln(255),u.iushrn(8),c[a-s-1]=o}return c},Math.clz32?a.prototype._countBits=function(t){return 32-Math.clz32(t)}:a.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},a.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},a.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},a.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},a.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},a.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},a.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},a.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},a.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},a.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},a.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},a.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},a.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},a.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},a.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},a.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},a.prototype.notn=function(t){return this.clone().inotn(t)},a.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},a.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,a=0;a<n.length;a++)e=(0|r.words[a])+(0|n.words[a])+i,this.words[a]=67108863&e,i=e>>>26;for(;0!==i&&a<r.length;a++)e=(0|r.words[a])+i,this.words[a]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this},a.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},a.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var a=0,o=0;o<n.length;o++)a=(e=(0|r.words[o])-(0|n.words[o])+a)>>26,this.words[o]=67108863&e;for(;0!==a&&o<r.length;o++)a=(e=(0|r.words[o])+a)>>26,this.words[o]=67108863&e;if(0===a&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var n,i,a,o=t.words,s=e.words,l=r.words,c=0,u=0|o[0],d=8191&u,h=u>>>13,g=0|o[1],f=8191&g,p=g>>>13,m=0|o[2],y=8191&m,b=m>>>13,v=0|o[3],x=8191&v,I=v>>>13,B=0|o[4],C=8191&B,F=B>>>13,A=0|o[5],Q=8191&A,_=A>>>13,w=0|o[6],U=8191&w,S=w>>>13,E=0|o[7],L=8191&E,T=E>>>13,R=0|o[8],k=8191&R,G=R>>>13,N=0|o[9],M=8191&N,D=N>>>13,X=0|s[0],V=8191&X,W=X>>>13,Z=0|s[1],O=8191&Z,$=Z>>>13,H=0|s[2],Y=8191&H,P=H>>>13,z=0|s[3],J=8191&z,j=z>>>13,K=0|s[4],q=8191&K,tt=K>>>13,et=0|s[5],rt=8191&et,nt=et>>>13,it=0|s[6],at=8191&it,ot=it>>>13,st=0|s[7],lt=8191&st,ct=st>>>13,ut=0|s[8],dt=8191&ut,ht=ut>>>13,gt=0|s[9],ft=8191&gt,pt=gt>>>13;r.negative=t.negative^e.negative,r.length=19;var mt=(c+(n=Math.imul(d,V))|0)+((8191&(i=(i=Math.imul(d,W))+Math.imul(h,V)|0))<<13)|0;c=((a=Math.imul(h,W))+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(f,V),i=(i=Math.imul(f,W))+Math.imul(p,V)|0,a=Math.imul(p,W);var yt=(c+(n=n+Math.imul(d,O)|0)|0)+((8191&(i=(i=i+Math.imul(d,$)|0)+Math.imul(h,O)|0))<<13)|0;c=((a=a+Math.imul(h,$)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(y,V),i=(i=Math.imul(y,W))+Math.imul(b,V)|0,a=Math.imul(b,W),n=n+Math.imul(f,O)|0,i=(i=i+Math.imul(f,$)|0)+Math.imul(p,O)|0,a=a+Math.imul(p,$)|0;var bt=(c+(n=n+Math.imul(d,Y)|0)|0)+((8191&(i=(i=i+Math.imul(d,P)|0)+Math.imul(h,Y)|0))<<13)|0;c=((a=a+Math.imul(h,P)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(x,V),i=(i=Math.imul(x,W))+Math.imul(I,V)|0,a=Math.imul(I,W),n=n+Math.imul(y,O)|0,i=(i=i+Math.imul(y,$)|0)+Math.imul(b,O)|0,a=a+Math.imul(b,$)|0,n=n+Math.imul(f,Y)|0,i=(i=i+Math.imul(f,P)|0)+Math.imul(p,Y)|0,a=a+Math.imul(p,P)|0;var vt=(c+(n=n+Math.imul(d,J)|0)|0)+((8191&(i=(i=i+Math.imul(d,j)|0)+Math.imul(h,J)|0))<<13)|0;c=((a=a+Math.imul(h,j)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(C,V),i=(i=Math.imul(C,W))+Math.imul(F,V)|0,a=Math.imul(F,W),n=n+Math.imul(x,O)|0,i=(i=i+Math.imul(x,$)|0)+Math.imul(I,O)|0,a=a+Math.imul(I,$)|0,n=n+Math.imul(y,Y)|0,i=(i=i+Math.imul(y,P)|0)+Math.imul(b,Y)|0,a=a+Math.imul(b,P)|0,n=n+Math.imul(f,J)|0,i=(i=i+Math.imul(f,j)|0)+Math.imul(p,J)|0,a=a+Math.imul(p,j)|0;var xt=(c+(n=n+Math.imul(d,q)|0)|0)+((8191&(i=(i=i+Math.imul(d,tt)|0)+Math.imul(h,q)|0))<<13)|0;c=((a=a+Math.imul(h,tt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(Q,V),i=(i=Math.imul(Q,W))+Math.imul(_,V)|0,a=Math.imul(_,W),n=n+Math.imul(C,O)|0,i=(i=i+Math.imul(C,$)|0)+Math.imul(F,O)|0,a=a+Math.imul(F,$)|0,n=n+Math.imul(x,Y)|0,i=(i=i+Math.imul(x,P)|0)+Math.imul(I,Y)|0,a=a+Math.imul(I,P)|0,n=n+Math.imul(y,J)|0,i=(i=i+Math.imul(y,j)|0)+Math.imul(b,J)|0,a=a+Math.imul(b,j)|0,n=n+Math.imul(f,q)|0,i=(i=i+Math.imul(f,tt)|0)+Math.imul(p,q)|0,a=a+Math.imul(p,tt)|0;var It=(c+(n=n+Math.imul(d,rt)|0)|0)+((8191&(i=(i=i+Math.imul(d,nt)|0)+Math.imul(h,rt)|0))<<13)|0;c=((a=a+Math.imul(h,nt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(U,V),i=(i=Math.imul(U,W))+Math.imul(S,V)|0,a=Math.imul(S,W),n=n+Math.imul(Q,O)|0,i=(i=i+Math.imul(Q,$)|0)+Math.imul(_,O)|0,a=a+Math.imul(_,$)|0,n=n+Math.imul(C,Y)|0,i=(i=i+Math.imul(C,P)|0)+Math.imul(F,Y)|0,a=a+Math.imul(F,P)|0,n=n+Math.imul(x,J)|0,i=(i=i+Math.imul(x,j)|0)+Math.imul(I,J)|0,a=a+Math.imul(I,j)|0,n=n+Math.imul(y,q)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(b,q)|0,a=a+Math.imul(b,tt)|0,n=n+Math.imul(f,rt)|0,i=(i=i+Math.imul(f,nt)|0)+Math.imul(p,rt)|0,a=a+Math.imul(p,nt)|0;var Bt=(c+(n=n+Math.imul(d,at)|0)|0)+((8191&(i=(i=i+Math.imul(d,ot)|0)+Math.imul(h,at)|0))<<13)|0;c=((a=a+Math.imul(h,ot)|0)+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(L,V),i=(i=Math.imul(L,W))+Math.imul(T,V)|0,a=Math.imul(T,W),n=n+Math.imul(U,O)|0,i=(i=i+Math.imul(U,$)|0)+Math.imul(S,O)|0,a=a+Math.imul(S,$)|0,n=n+Math.imul(Q,Y)|0,i=(i=i+Math.imul(Q,P)|0)+Math.imul(_,Y)|0,a=a+Math.imul(_,P)|0,n=n+Math.imul(C,J)|0,i=(i=i+Math.imul(C,j)|0)+Math.imul(F,J)|0,a=a+Math.imul(F,j)|0,n=n+Math.imul(x,q)|0,i=(i=i+Math.imul(x,tt)|0)+Math.imul(I,q)|0,a=a+Math.imul(I,tt)|0,n=n+Math.imul(y,rt)|0,i=(i=i+Math.imul(y,nt)|0)+Math.imul(b,rt)|0,a=a+Math.imul(b,nt)|0,n=n+Math.imul(f,at)|0,i=(i=i+Math.imul(f,ot)|0)+Math.imul(p,at)|0,a=a+Math.imul(p,ot)|0;var Ct=(c+(n=n+Math.imul(d,lt)|0)|0)+((8191&(i=(i=i+Math.imul(d,ct)|0)+Math.imul(h,lt)|0))<<13)|0;c=((a=a+Math.imul(h,ct)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(k,V),i=(i=Math.imul(k,W))+Math.imul(G,V)|0,a=Math.imul(G,W),n=n+Math.imul(L,O)|0,i=(i=i+Math.imul(L,$)|0)+Math.imul(T,O)|0,a=a+Math.imul(T,$)|0,n=n+Math.imul(U,Y)|0,i=(i=i+Math.imul(U,P)|0)+Math.imul(S,Y)|0,a=a+Math.imul(S,P)|0,n=n+Math.imul(Q,J)|0,i=(i=i+Math.imul(Q,j)|0)+Math.imul(_,J)|0,a=a+Math.imul(_,j)|0,n=n+Math.imul(C,q)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(F,q)|0,a=a+Math.imul(F,tt)|0,n=n+Math.imul(x,rt)|0,i=(i=i+Math.imul(x,nt)|0)+Math.imul(I,rt)|0,a=a+Math.imul(I,nt)|0,n=n+Math.imul(y,at)|0,i=(i=i+Math.imul(y,ot)|0)+Math.imul(b,at)|0,a=a+Math.imul(b,ot)|0,n=n+Math.imul(f,lt)|0,i=(i=i+Math.imul(f,ct)|0)+Math.imul(p,lt)|0,a=a+Math.imul(p,ct)|0;var Ft=(c+(n=n+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,ht)|0)+Math.imul(h,dt)|0))<<13)|0;c=((a=a+Math.imul(h,ht)|0)+(i>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,n=Math.imul(M,V),i=(i=Math.imul(M,W))+Math.imul(D,V)|0,a=Math.imul(D,W),n=n+Math.imul(k,O)|0,i=(i=i+Math.imul(k,$)|0)+Math.imul(G,O)|0,a=a+Math.imul(G,$)|0,n=n+Math.imul(L,Y)|0,i=(i=i+Math.imul(L,P)|0)+Math.imul(T,Y)|0,a=a+Math.imul(T,P)|0,n=n+Math.imul(U,J)|0,i=(i=i+Math.imul(U,j)|0)+Math.imul(S,J)|0,a=a+Math.imul(S,j)|0,n=n+Math.imul(Q,q)|0,i=(i=i+Math.imul(Q,tt)|0)+Math.imul(_,q)|0,a=a+Math.imul(_,tt)|0,n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(F,rt)|0,a=a+Math.imul(F,nt)|0,n=n+Math.imul(x,at)|0,i=(i=i+Math.imul(x,ot)|0)+Math.imul(I,at)|0,a=a+Math.imul(I,ot)|0,n=n+Math.imul(y,lt)|0,i=(i=i+Math.imul(y,ct)|0)+Math.imul(b,lt)|0,a=a+Math.imul(b,ct)|0,n=n+Math.imul(f,dt)|0,i=(i=i+Math.imul(f,ht)|0)+Math.imul(p,dt)|0,a=a+Math.imul(p,ht)|0;var At=(c+(n=n+Math.imul(d,ft)|0)|0)+((8191&(i=(i=i+Math.imul(d,pt)|0)+Math.imul(h,ft)|0))<<13)|0;c=((a=a+Math.imul(h,pt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(M,O),i=(i=Math.imul(M,$))+Math.imul(D,O)|0,a=Math.imul(D,$),n=n+Math.imul(k,Y)|0,i=(i=i+Math.imul(k,P)|0)+Math.imul(G,Y)|0,a=a+Math.imul(G,P)|0,n=n+Math.imul(L,J)|0,i=(i=i+Math.imul(L,j)|0)+Math.imul(T,J)|0,a=a+Math.imul(T,j)|0,n=n+Math.imul(U,q)|0,i=(i=i+Math.imul(U,tt)|0)+Math.imul(S,q)|0,a=a+Math.imul(S,tt)|0,n=n+Math.imul(Q,rt)|0,i=(i=i+Math.imul(Q,nt)|0)+Math.imul(_,rt)|0,a=a+Math.imul(_,nt)|0,n=n+Math.imul(C,at)|0,i=(i=i+Math.imul(C,ot)|0)+Math.imul(F,at)|0,a=a+Math.imul(F,ot)|0,n=n+Math.imul(x,lt)|0,i=(i=i+Math.imul(x,ct)|0)+Math.imul(I,lt)|0,a=a+Math.imul(I,ct)|0,n=n+Math.imul(y,dt)|0,i=(i=i+Math.imul(y,ht)|0)+Math.imul(b,dt)|0,a=a+Math.imul(b,ht)|0;var Qt=(c+(n=n+Math.imul(f,ft)|0)|0)+((8191&(i=(i=i+Math.imul(f,pt)|0)+Math.imul(p,ft)|0))<<13)|0;c=((a=a+Math.imul(p,pt)|0)+(i>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,n=Math.imul(M,Y),i=(i=Math.imul(M,P))+Math.imul(D,Y)|0,a=Math.imul(D,P),n=n+Math.imul(k,J)|0,i=(i=i+Math.imul(k,j)|0)+Math.imul(G,J)|0,a=a+Math.imul(G,j)|0,n=n+Math.imul(L,q)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(T,q)|0,a=a+Math.imul(T,tt)|0,n=n+Math.imul(U,rt)|0,i=(i=i+Math.imul(U,nt)|0)+Math.imul(S,rt)|0,a=a+Math.imul(S,nt)|0,n=n+Math.imul(Q,at)|0,i=(i=i+Math.imul(Q,ot)|0)+Math.imul(_,at)|0,a=a+Math.imul(_,ot)|0,n=n+Math.imul(C,lt)|0,i=(i=i+Math.imul(C,ct)|0)+Math.imul(F,lt)|0,a=a+Math.imul(F,ct)|0,n=n+Math.imul(x,dt)|0,i=(i=i+Math.imul(x,ht)|0)+Math.imul(I,dt)|0,a=a+Math.imul(I,ht)|0;var _t=(c+(n=n+Math.imul(y,ft)|0)|0)+((8191&(i=(i=i+Math.imul(y,pt)|0)+Math.imul(b,ft)|0))<<13)|0;c=((a=a+Math.imul(b,pt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(M,J),i=(i=Math.imul(M,j))+Math.imul(D,J)|0,a=Math.imul(D,j),n=n+Math.imul(k,q)|0,i=(i=i+Math.imul(k,tt)|0)+Math.imul(G,q)|0,a=a+Math.imul(G,tt)|0,n=n+Math.imul(L,rt)|0,i=(i=i+Math.imul(L,nt)|0)+Math.imul(T,rt)|0,a=a+Math.imul(T,nt)|0,n=n+Math.imul(U,at)|0,i=(i=i+Math.imul(U,ot)|0)+Math.imul(S,at)|0,a=a+Math.imul(S,ot)|0,n=n+Math.imul(Q,lt)|0,i=(i=i+Math.imul(Q,ct)|0)+Math.imul(_,lt)|0,a=a+Math.imul(_,ct)|0,n=n+Math.imul(C,dt)|0,i=(i=i+Math.imul(C,ht)|0)+Math.imul(F,dt)|0,a=a+Math.imul(F,ht)|0;var wt=(c+(n=n+Math.imul(x,ft)|0)|0)+((8191&(i=(i=i+Math.imul(x,pt)|0)+Math.imul(I,ft)|0))<<13)|0;c=((a=a+Math.imul(I,pt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(M,q),i=(i=Math.imul(M,tt))+Math.imul(D,q)|0,a=Math.imul(D,tt),n=n+Math.imul(k,rt)|0,i=(i=i+Math.imul(k,nt)|0)+Math.imul(G,rt)|0,a=a+Math.imul(G,nt)|0,n=n+Math.imul(L,at)|0,i=(i=i+Math.imul(L,ot)|0)+Math.imul(T,at)|0,a=a+Math.imul(T,ot)|0,n=n+Math.imul(U,lt)|0,i=(i=i+Math.imul(U,ct)|0)+Math.imul(S,lt)|0,a=a+Math.imul(S,ct)|0,n=n+Math.imul(Q,dt)|0,i=(i=i+Math.imul(Q,ht)|0)+Math.imul(_,dt)|0,a=a+Math.imul(_,ht)|0;var Ut=(c+(n=n+Math.imul(C,ft)|0)|0)+((8191&(i=(i=i+Math.imul(C,pt)|0)+Math.imul(F,ft)|0))<<13)|0;c=((a=a+Math.imul(F,pt)|0)+(i>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,n=Math.imul(M,rt),i=(i=Math.imul(M,nt))+Math.imul(D,rt)|0,a=Math.imul(D,nt),n=n+Math.imul(k,at)|0,i=(i=i+Math.imul(k,ot)|0)+Math.imul(G,at)|0,a=a+Math.imul(G,ot)|0,n=n+Math.imul(L,lt)|0,i=(i=i+Math.imul(L,ct)|0)+Math.imul(T,lt)|0,a=a+Math.imul(T,ct)|0,n=n+Math.imul(U,dt)|0,i=(i=i+Math.imul(U,ht)|0)+Math.imul(S,dt)|0,a=a+Math.imul(S,ht)|0;var St=(c+(n=n+Math.imul(Q,ft)|0)|0)+((8191&(i=(i=i+Math.imul(Q,pt)|0)+Math.imul(_,ft)|0))<<13)|0;c=((a=a+Math.imul(_,pt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(M,at),i=(i=Math.imul(M,ot))+Math.imul(D,at)|0,a=Math.imul(D,ot),n=n+Math.imul(k,lt)|0,i=(i=i+Math.imul(k,ct)|0)+Math.imul(G,lt)|0,a=a+Math.imul(G,ct)|0,n=n+Math.imul(L,dt)|0,i=(i=i+Math.imul(L,ht)|0)+Math.imul(T,dt)|0,a=a+Math.imul(T,ht)|0;var Et=(c+(n=n+Math.imul(U,ft)|0)|0)+((8191&(i=(i=i+Math.imul(U,pt)|0)+Math.imul(S,ft)|0))<<13)|0;c=((a=a+Math.imul(S,pt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(M,lt),i=(i=Math.imul(M,ct))+Math.imul(D,lt)|0,a=Math.imul(D,ct),n=n+Math.imul(k,dt)|0,i=(i=i+Math.imul(k,ht)|0)+Math.imul(G,dt)|0,a=a+Math.imul(G,ht)|0;var Lt=(c+(n=n+Math.imul(L,ft)|0)|0)+((8191&(i=(i=i+Math.imul(L,pt)|0)+Math.imul(T,ft)|0))<<13)|0;c=((a=a+Math.imul(T,pt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(M,dt),i=(i=Math.imul(M,ht))+Math.imul(D,dt)|0,a=Math.imul(D,ht);var Tt=(c+(n=n+Math.imul(k,ft)|0)|0)+((8191&(i=(i=i+Math.imul(k,pt)|0)+Math.imul(G,ft)|0))<<13)|0;c=((a=a+Math.imul(G,pt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863;var Rt=(c+(n=Math.imul(M,ft))|0)+((8191&(i=(i=Math.imul(M,pt))+Math.imul(D,ft)|0))<<13)|0;return c=((a=Math.imul(D,pt))+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,l[0]=mt,l[1]=yt,l[2]=bt,l[3]=vt,l[4]=xt,l[5]=It,l[6]=Bt,l[7]=Ct,l[8]=Ft,l[9]=At,l[10]=Qt,l[11]=_t,l[12]=wt,l[13]=Ut,l[14]=St,l[15]=Et,l[16]=Lt,l[17]=Tt,l[18]=Rt,0!==c&&(l[19]=c,r.length++),r};function m(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,a=0;a<r.length-1;a++){var o=i;i=0;for(var s=67108863&n,l=Math.min(a,e.length-1),c=Math.max(0,a-t.length+1);c<=l;c++){var u=a-c,d=(0|t.words[u])*(0|e.words[c]),h=67108863&d;s=67108863&(h=h+s|0),i+=(o=(o=o+(d/67108864|0)|0)+(h>>>26)|0)>>>26,o&=67108863}r.words[a]=s,n=o,o=i}return 0!==n?r.words[a]=n:r.length--,r.strip()}function y(t,e,r){return(new b).mulp(t,e,r)}function b(t,e){this.x=t,this.y=e}Math.imul||(p=f),a.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):r<63?f(this,t,e):r<1024?m(this,t,e):y(this,t,e)},b.prototype.makeRBT=function(t){for(var e=new Array(t),r=a.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},b.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},b.prototype.permute=function(t,e,r,n,i,a){for(var o=0;o<a;o++)n[o]=e[t[o]],i[o]=r[t[o]]},b.prototype.transform=function(t,e,r,n,i,a){this.permute(a,t,e,r,n,i);for(var o=1;o<i;o<<=1)for(var s=o<<1,l=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),u=0;u<i;u+=s)for(var d=l,h=c,g=0;g<o;g++){var f=r[u+g],p=n[u+g],m=r[u+g+o],y=n[u+g+o],b=d*m-h*y;y=d*y+h*m,m=b,r[u+g]=f+m,n[u+g]=p+y,r[u+g+o]=f-m,n[u+g+o]=p-y,g!==s&&(b=l*d-c*h,h=l*h+c*d,d=b)}},b.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},b.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},b.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},b.prototype.convert13b=function(t,e,r,i){for(var a=0,o=0;o<e;o++)a+=0|t[o],r[2*o]=8191&a,a>>>=13,r[2*o+1]=8191&a,a>>>=13;for(o=2*e;o<i;++o)r[o]=0;n(0===a),n(0==(-8192&a))},b.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},b.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),a=this.stub(n),o=new Array(n),s=new Array(n),l=new Array(n),c=new Array(n),u=new Array(n),d=new Array(n),h=r.words;h.length=n,this.convert13b(t.words,t.length,o,n),this.convert13b(e.words,e.length,c,n),this.transform(o,a,s,l,n,i),this.transform(c,a,u,d,n,i);for(var g=0;g<n;g++){var f=s[g]*u[g]-l[g]*d[g];l[g]=s[g]*d[g]+l[g]*u[g],s[g]=f}return this.conjugate(s,l,n),this.transform(s,l,h,a,n,i),this.conjugate(h,a,n),this.normalize13b(h,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},a.prototype.mul=function(t){var e=new a(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},a.prototype.mulf=function(t){var e=new a(null);return e.words=new Array(this.length+t.length),y(this,t,e)},a.prototype.imul=function(t){return this.clone().mulTo(t,this)},a.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,a=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=a>>>26,this.words[r]=67108863&a}return 0!==e&&(this.words[r]=e,this.length++),this},a.prototype.muln=function(t){return this.clone().imuln(t)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(t){var e=g(t);if(0===e.length)return new a(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},a.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,a=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(e=0;e<this.length;e++){var s=this.words[e]&a,l=(0|this.words[e])-s<<r;this.words[e]=l|o,o=s>>>26-r}o&&(this.words[e]=o,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},a.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},a.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var a=t%26,o=Math.min((t-a)/26,this.length),s=67108863^67108863>>>a<<a,l=r;if(i-=o,i=Math.max(0,i),l){for(var c=0;c<o;c++)l.words[c]=this.words[c];l.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=i);c--){var d=0|this.words[c];this.words[c]=u<<26-a|d>>>a,u=d&s}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},a.prototype.shln=function(t){return this.clone().ishln(t)},a.prototype.ushln=function(t){return this.clone().iushln(t)},a.prototype.shrn=function(t){return this.clone().ishrn(t)},a.prototype.ushrn=function(t){return this.clone().iushrn(t)},a.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r||!(this.words[r]&i))},a.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},a.prototype.maskn=function(t){return this.clone().imaskn(t)},a.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},a.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},a.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},a.prototype.addn=function(t){return this.clone().iaddn(t)},a.prototype.subn=function(t){return this.clone().isubn(t)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(t,e,r){var i,a,o=t.length+r;this._expand(o);var s=0;for(i=0;i<t.length;i++){a=(0|this.words[i+r])+s;var l=(0|t.words[i])*e;s=((a-=67108863&l)>>26)-(l/67108864|0),this.words[i+r]=67108863&a}for(;i<this.length-r;i++)s=(a=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&a;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=67108863&a;return this.negative=1,this.strip()},a.prototype._wordDiv=function(t,e){var r=this.length-t.length,n=this.clone(),i=t,o=0|i.words[i.length-1];0!=(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var s,l=n.length-i.length;if("mod"!==e){(s=new a(null)).length=l+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var u=n.clone()._ishlnsubmul(i,1,l);0===u.negative&&(n=u,s&&(s.words[l]=1));for(var d=l-1;d>=0;d--){var h=67108864*(0|n.words[i.length+d])+(0|n.words[i.length+d-1]);for(h=Math.min(h/o|0,67108863),n._ishlnsubmul(i,h,d);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,d),n.isZero()||(n.negative^=1);s&&(s.words[d]=h)}return s&&s.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},a.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(o=s.mod.neg(),r&&0!==o.negative&&o.iadd(t)),{div:i,mod:o}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(o=s.mod.neg(),r&&0!==o.negative&&o.isub(t)),{div:s.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new a(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new a(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new a(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,o,s},a.prototype.div=function(t){return this.divmod(t,"div",!1).div},a.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},a.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},a.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),a=r.cmp(n);return a<0||1===i&&0===a?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},a.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},a.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},a.prototype.divn=function(t){return this.clone().idivn(t)},a.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new a(1),o=new a(0),s=new a(0),l=new a(1),c=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++c;for(var u=r.clone(),d=e.clone();!e.isZero();){for(var h=0,g=1;0==(e.words[0]&g)&&h<26;++h,g<<=1);if(h>0)for(e.iushrn(h);h-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(u),o.isub(d)),i.iushrn(1),o.iushrn(1);for(var f=0,p=1;0==(r.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(r.iushrn(f);f-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(u),l.isub(d)),s.iushrn(1),l.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),o.isub(l)):(r.isub(e),s.isub(i),l.isub(o))}return{a:s,b:l,gcd:r.iushln(c)}},a.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,o=new a(1),s=new a(0),l=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,u=1;0==(e.words[0]&u)&&c<26;++c,u<<=1);if(c>0)for(e.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);for(var d=0,h=1;0==(r.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(r.iushrn(d);d-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),o.isub(s)):(r.isub(e),s.isub(o))}return(i=0===e.cmpn(1)?o:s).cmpn(0)<0&&i.iadd(t),i},a.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var a=e;e=r,r=a}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},a.prototype.invm=function(t){return this.egcd(t).a.umod(t)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(t){return this.words[0]&t},a.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var a=i,o=r;0!==a&&o<this.length;o++){var s=0|this.words[o];a=(s+=a)>>>26,s&=67108863,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},a.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},a.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},a.prototype.gtn=function(t){return 1===this.cmpn(t)},a.prototype.gt=function(t){return 1===this.cmp(t)},a.prototype.gten=function(t){return this.cmpn(t)>=0},a.prototype.gte=function(t){return this.cmp(t)>=0},a.prototype.ltn=function(t){return-1===this.cmpn(t)},a.prototype.lt=function(t){return-1===this.cmp(t)},a.prototype.lten=function(t){return this.cmpn(t)<=0},a.prototype.lte=function(t){return this.cmp(t)<=0},a.prototype.eqn=function(t){return 0===this.cmpn(t)},a.prototype.eq=function(t){return 0===this.cmp(t)},a.red=function(t){return new A(t)},a.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},a.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(t){return this.red=t,this},a.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},a.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},a.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},a.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},a.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},a.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},a.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},a.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},a.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function x(t,e){this.name=t,this.p=new a(e,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function I(){x.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function B(){x.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function C(){x.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function F(){x.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function A(t){if("string"==typeof t){var e=a._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function Q(t){A.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}x.prototype._tmp=function(){var t=new a(null);return t.words=new Array(Math.ceil(this.n/13)),t},x.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},x.prototype.split=function(t,e){t.iushrn(this.n,0,e)},x.prototype.imulK=function(t){return t.imul(this.k)},i(I,x),I.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var a=t.words[9];for(e.words[e.length++]=a&r,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(o&r)<<4|a>>>22,a=o}a>>>=22,t.words[i-10]=a,0===a&&t.length>10?t.length-=10:t.length-=9},I.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(B,x),i(C,x),i(F,x),F.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},a._prime=function(t){if(v[t])return v[t];var e;if("k256"===t)e=new I;else if("p224"===t)e=new B;else if("p192"===t)e=new C;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new F}return v[t]=e,e},A.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},A.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},A.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},A.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},A.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},A.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},A.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},A.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},A.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},A.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},A.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},A.prototype.isqr=function(t){return this.imul(t,t.clone())},A.prototype.sqr=function(t){return this.mul(t,t)},A.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new a(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);n(!i.isZero());var s=new a(1).toRed(this),l=s.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new a(2*u*u).toRed(this);0!==this.pow(u,c).cmp(l);)u.redIAdd(l);for(var d=this.pow(u,i),h=this.pow(t,i.addn(1).iushrn(1)),g=this.pow(t,i),f=o;0!==g.cmp(s);){for(var p=g,m=0;0!==p.cmp(s);m++)p=p.redSqr();n(m<f);var y=this.pow(d,new a(1).iushln(f-m-1));h=h.redMul(y),d=y.redSqr(),g=g.redMul(d),f=m}return h},A.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},A.prototype.pow=function(t,e){if(e.isZero())return new a(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=4,n=new Array(1<<r);n[0]=new a(1).toRed(this),n[1]=t;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],t);var o=n[0],s=0,l=0,c=e.bitLength()%26;for(0===c&&(c=26),i=e.length-1;i>=0;i--){for(var u=e.words[i],d=c-1;d>=0;d--){var h=u>>d&1;o!==n[0]&&(o=this.sqr(o)),0!==h||0!==s?(s<<=1,s|=h,(++l===r||0===i&&0===d)&&(o=this.mul(o,n[s]),l=0,s=0)):l=0}c=26}return o},A.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},A.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},a.mont=function(t){return new Q(t)},i(Q,A),Q.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},Q.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},Q.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},Q.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new a(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},Q.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===e||e,this)},{buffer:2}],34:[function(t,e,r){function n(t){var e,r,n,i=t.length,a=0;for(e=0;e<i;++e)a+=t[e].length;var o=new Array(a),s=0;for(e=0;e<i;++e){var l=t[e],c=l.length;for(r=0;r<c;++r){var u=o[s++]=new Array(c-1),d=0;for(n=0;n<c;++n)n!==r&&(u[d++]=l[n]);if(1&r){var h=u[1];u[1]=u[0],u[0]=h}}}return o}e.exports=n},{}],35:[function(t,e,r){e.exports=g;var n,i=t("typedarray-pool"),a=t("./lib/sweep"),o=t("./lib/intersect");function s(t,e){for(var r=0;r<t;++r)if(!(e[r]<=e[r+t]))return!0;return!1}function l(t,e,r,n){for(var i=0,a=0,o=0,l=t.length;o<l;++o){var c=t[o];if(!s(e,c)){for(var u=0;u<2*e;++u)r[i++]=c[u];n[a++]=o}}return a}function c(t,e,r,n){var s=t.length,c=e.length;if(!(s<=0||c<=0)){var u=t[0].length>>>1;if(!(u<=0)){var d,h=i.mallocDouble(2*u*s),g=i.mallocInt32(s);if((s=l(t,u,h,g))>0){if(1===u&&n)a.init(s),d=a.sweepComplete(u,r,0,s,h,g,0,s,h,g);else{var f=i.mallocDouble(2*u*c),p=i.mallocInt32(c);(c=l(e,u,f,p))>0&&(a.init(s+c),d=1===u?a.sweepBipartite(u,r,0,s,h,g,0,c,f,p):o(u,r,n,s,h,g,c,f,p),i.free(f),i.free(p))}i.free(h),i.free(g)}return d}}}function u(t,e){n.push([t,e])}function d(t){return n=[],c(t,t,u,!0),n}function h(t,e){return n=[],c(t,e,u,!1),n}function g(t,e,r){switch(arguments.length){case 1:return d(t);case 2:return"function"==typeof e?c(t,t,e,!0):h(t,e);case 3:return c(t,e,r,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(t,e,r){function n(){function t(t,e,r,n,i,a,o,s,l,c,u){for(var d=2*t,h=n,g=d*n;h<i;++h,g+=d){var f=a[e+g],p=a[e+g+t],m=o[h];t:for(var y=s,b=d*s;y<l;++y,b+=d){var v=c[e+b],x=c[e+b+t],I=u[y];if(!(x<f||p<v)){for(var B=e+1;B<t;++B){var C=a[B+g],F=a[B+t+g],A=c[B+b],Q=c[B+t+b];if(F<A||Q<C)continue t}var _=r(m,I);if(void 0!==_)return _}}}}function e(t,e,r,n,i,a,o,s,l,c,u){for(var d=2*t,h=s,g=d*s;h<l;++h,g+=d){var f=c[e+g],p=c[e+g+t],m=u[h];t:for(var y=n,b=d*n;y<i;++y,b+=d){var v=a[e+b],x=a[e+b+t],I=o[y];if(!(p<v||x<f)){for(var B=e+1;B<t;++B){var C=a[B+b],F=a[B+t+b],A=c[B+g],Q=c[B+t+g];if(F<A||Q<C)continue t}var _=r(I,m);if(void 0!==_)return _}}}}function r(r,n,i,a,o,s,l,c,u,d,h){return o-a>u-c?t(r,n,i,a,o,s,l,c,u,d,h):e(r,n,i,a,o,s,l,c,u,d,h)}return r}function i(){function t(t,e,r,n,i,a,o,s,l,c,u){for(var d=2*t,h=n,g=d*n;h<i;++h,g+=d){var f=a[e+g],p=a[e+g+t],m=o[h];t:for(var y=s,b=d*s;y<l;++y,b+=d){var v=c[e+b],x=u[y];if(!(v<=f||p<v)){for(var I=e+1;I<t;++I){var B=a[I+g],C=a[I+t+g],F=c[I+b],A=c[I+t+b];if(C<F||A<B)continue t}var Q=r(x,m);if(void 0!==Q)return Q}}}}function e(t,e,r,n,i,a,o,s,l,c,u){for(var d=2*t,h=n,g=d*n;h<i;++h,g+=d){var f=a[e+g],p=a[e+g+t],m=o[h];t:for(var y=s,b=d*s;y<l;++y,b+=d){var v=c[e+b],x=u[y];if(!(v<f||p<v)){for(var I=e+1;I<t;++I){var B=a[I+g],C=a[I+t+g],F=c[I+b],A=c[I+t+b];if(C<F||A<B)continue t}var Q=r(m,x);if(void 0!==Q)return Q}}}}function r(t,e,r,n,i,a,o,s,l,c,u){for(var d=2*t,h=s,g=d*s;h<l;++h,g+=d){var f=c[e+g],p=u[h];t:for(var m=n,y=d*n;m<i;++m,y+=d){var b=a[e+y],v=a[e+y+t],x=o[m];if(!(f<=b||v<f)){for(var I=e+1;I<t;++I){var B=a[I+y],C=a[I+t+y],F=c[I+g],A=c[I+t+g];if(C<F||A<B)continue t}var Q=r(p,x);if(void 0!==Q)return Q}}}}function n(t,e,r,n,i,a,o,s,l,c,u){for(var d=2*t,h=s,g=d*s;h<l;++h,g+=d){var f=c[e+g],p=u[h];t:for(var m=n,y=d*n;m<i;++m,y+=d){var b=a[e+y],v=a[e+y+t],x=o[m];if(!(f<b||v<f)){for(var I=e+1;I<t;++I){var B=a[I+y],C=a[I+t+y],F=c[I+g],A=c[I+t+g];if(C<F||A<B)continue t}var Q=r(x,p);if(void 0!==Q)return Q}}}}function i(i,a,o,s,l,c,u,d,h,g,f,p){return c-l>g-h?s?t(i,a,o,l,c,u,d,h,g,f,p):e(i,a,o,l,c,u,d,h,g,f,p):s?r(i,a,o,l,c,u,d,h,g,f,p):n(i,a,o,l,c,u,d,h,g,f,p)}return i}function a(t){return t?n():i()}r.partial=a(!1),r.full=a(!0)},{}],37:[function(t,e,r){e.exports=U;var n=t("typedarray-pool"),i=t("bit-twiddle"),a=t("./brute"),o=a.partial,s=a.full,l=t("./sweep"),c=t("./median"),u=t("./partition"),d=128,h=1<<22,g=1<<22,f=u("!(lo>=p0)&&!(p1>=hi)"),p=u("lo===p0"),m=u("lo<p0"),y=u("hi<=p0"),b=u("lo<=p0&&p0<=hi"),v=u("lo<p0&&p0<=hi"),x=6,I=2,B=1024,C=n.mallocInt32(B),F=n.mallocDouble(B);function A(t,e){var r=8*i.log2(e+1)*(t+1)|0,a=i.nextPow2(x*r);C.length<a&&(n.free(C),C=n.mallocInt32(a));var o=i.nextPow2(I*r);F.length<o&&(n.free(F),F=n.mallocDouble(o))}function Q(t,e,r,n,i,a,o,s,l){var c=x*t;C[c]=e,C[c+1]=r,C[c+2]=n,C[c+3]=i,C[c+4]=a,C[c+5]=o;var u=I*t;F[u]=s,F[u+1]=l}function _(t,e,r,n,i,a,o,s,l,c,u){var d=2*t,h=l*d,g=c[h+e];t:for(var f=i,p=i*d;f<a;++f,p+=d){var m=o[p+e],y=o[p+e+t];if(!(g<m||y<g||n&&g===m)){for(var b,v=s[f],x=e+1;x<t;++x){m=o[p+x],y=o[p+x+t];var I=c[h+x],B=c[h+x+t];if(y<I||B<m)continue t}if(void 0!==(b=n?r(u,v):r(v,u)))return b}}}function w(t,e,r,n,i,a,o,s,l,c){var u=2*t,d=s*u,h=l[d+e];t:for(var g=n,f=n*u;g<i;++g,f+=u){var p=o[g];if(p!==c){var m=a[f+e],y=a[f+e+t];if(!(h<m||y<h)){for(var b=e+1;b<t;++b){m=a[f+b],y=a[f+b+t];var v=l[d+b],x=l[d+b+t];if(y<v||x<m)continue t}var I=r(p,c);if(void 0!==I)return I}}}}function U(t,e,r,n,i,a,u,B,U){A(t,n+u);var S,E=0,L=2*t;for(Q(E++,0,0,n,0,u,r?16:0,-1/0,1/0),r||Q(E++,0,0,u,0,n,1,-1/0,1/0);E>0;){var T=(E-=1)*x,R=C[T],k=C[T+1],G=C[T+2],N=C[T+3],M=C[T+4],D=C[T+5],X=E*I,V=F[X],W=F[X+1],Z=1&D,O=!!(16&D),$=i,H=a,Y=B,P=U;if(Z&&($=B,H=U,Y=i,P=a),!(2&D&&k>=(G=m(t,R,k,G,$,H,W))||4&D&&(k=y(t,R,k,G,$,H,V))>=G)){var z=G-k,J=M-N;if(O){if(t*z*(z+J)<g){if(void 0!==(S=l.scanComplete(t,R,e,k,G,$,H,N,M,Y,P)))return S;continue}}else{if(t*Math.min(z,J)<d){if(void 0!==(S=o(t,R,e,Z,k,G,$,H,N,M,Y,P)))return S;continue}if(t*z*J<h){if(void 0!==(S=l.scanBipartite(t,R,e,Z,k,G,$,H,N,M,Y,P)))return S;continue}}var j=f(t,R,k,G,$,H,V,W);if(k<j)if(t*(j-k)<d){if(void 0!==(S=s(t,R+1,e,k,j,$,H,N,M,Y,P)))return S}else if(R===t-2){if(void 0!==(S=Z?l.sweepBipartite(t,e,N,M,Y,P,k,j,$,H):l.sweepBipartite(t,e,k,j,$,H,N,M,Y,P)))return S}else Q(E++,R+1,k,j,N,M,Z,-1/0,1/0),Q(E++,R+1,N,M,k,j,1^Z,-1/0,1/0);if(j<G){var K=c(t,R,N,M,Y,P),q=Y[L*K+R],tt=p(t,R,K,M,Y,P,q);if(tt<M&&Q(E++,R,j,G,tt,M,(4|Z)+(O?16:0),q,W),N<K&&Q(E++,R,j,G,N,K,(2|Z)+(O?16:0),V,q),K+1===tt){if(void 0!==(S=O?w(t,R,e,j,G,$,H,K,Y,P[K]):_(t,R,e,Z,j,G,$,H,K,Y,P[K])))return S}else if(K<tt){var et;if(O){if(j<(et=b(t,R,j,G,$,H,q))){var rt=p(t,R,j,et,$,H,q);if(R===t-2){if(j<rt&&void 0!==(S=l.sweepComplete(t,e,j,rt,$,H,K,tt,Y,P)))return S;if(rt<et&&void 0!==(S=l.sweepBipartite(t,e,rt,et,$,H,K,tt,Y,P)))return S}else j<rt&&Q(E++,R+1,j,rt,K,tt,16,-1/0,1/0),rt<et&&(Q(E++,R+1,rt,et,K,tt,0,-1/0,1/0),Q(E++,R+1,K,tt,rt,et,1,-1/0,1/0))}}else j<(et=Z?v(t,R,j,G,$,H,q):b(t,R,j,G,$,H,q))&&(R===t-2?S=Z?l.sweepBipartite(t,e,K,tt,Y,P,j,et,$,H):l.sweepBipartite(t,e,j,et,$,H,K,tt,Y,P):(Q(E++,R+1,j,et,K,tt,Z,-1/0,1/0),Q(E++,R+1,K,tt,j,et,1^Z,-1/0,1/0)))}}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(t,e,r){e.exports=o;var n=t("./partition")("lo<p0"),i=8;function a(t,e,r,n,i,a){for(var o=2*t,s=o*(r+1)+e,l=r+1;l<n;++l,s+=o)for(var c=i[s],u=l,d=o*(l-1);u>r&&i[d+e]>c;--u,d-=o){for(var h=d,g=d+o,f=0;f<o;++f,++h,++g){var p=i[h];i[h]=i[g],i[g]=p}var m=a[u];a[u]=a[u-1],a[u-1]=m}}function o(t,e,r,o,s,l){if(o<=r+1)return r;for(var c=r,u=o,d=o+r>>>1,h=2*t,g=d,f=s[h*d+e];c<u;){if(u-c<i){a(t,e,c,u,s,l),f=s[h*d+e];break}var p=u-c,m=Math.random()*p+c|0,y=s[h*m+e],b=Math.random()*p+c|0,v=s[h*b+e],x=Math.random()*p+c|0,I=s[h*x+e];y<=v?I>=v?(g=b,f=v):y>=I?(g=m,f=y):(g=x,f=I):v>=I?(g=b,f=v):I>=y?(g=m,f=y):(g=x,f=I);for(var B=h*(u-1),C=h*g,F=0;F<h;++F,++B,++C){var A=s[B];s[B]=s[C],s[C]=A}var Q=l[u-1];for(l[u-1]=l[g],l[g]=Q,B=h*(u-1),C=h*(g=n(t,e,c,u-1,s,l,f)),F=0;F<h;++F,++B,++C)A=s[B],s[B]=s[C],s[C]=A;if(Q=l[u-1],l[u-1]=l[g],l[g]=Q,d<g){for(u=g-1;c<u&&s[h*(u-1)+e]===f;)u-=1;u+=1}else{if(!(g<d))break;for(c=g+1;c<u&&s[h*c+e]===f;)c+=1}}return n(t,e,r,d,s,l,s[h*d+e])}},{"./partition":39}],39:[function(t,e,r){e.exports=i;var n={"lo===p0":a,"lo<p0":o,"lo<=p0":s,"hi<=p0":l,"lo<p0&&p0<=hi":u,"lo<=p0&&p0<=hi":c,"!(lo>=p0)&&!(p1>=hi)":d};function i(t){return n[t]}function a(t,e,r,n,i,a,o){for(var s=2*t,l=s*r,c=l,u=r,d=e,h=r;n>h;++h,l+=s)if(i[l+d]===o)if(u===h)u+=1,c+=s;else{for(var g=0;s>g;++g){var f=i[l+g];i[l+g]=i[c],i[c++]=f}var p=a[h];a[h]=a[u],a[u++]=p}return u}function o(t,e,r,n,i,a,o){for(var s=2*t,l=s*r,c=l,u=r,d=e,h=r;n>h;++h,l+=s)if(i[l+d]<o)if(u===h)u+=1,c+=s;else{for(var g=0;s>g;++g){var f=i[l+g];i[l+g]=i[c],i[c++]=f}var p=a[h];a[h]=a[u],a[u++]=p}return u}function s(t,e,r,n,i,a,o){for(var s=2*t,l=s*r,c=l,u=r,d=t+e,h=r;n>h;++h,l+=s)if(i[l+d]<=o)if(u===h)u+=1,c+=s;else{for(var g=0;s>g;++g){var f=i[l+g];i[l+g]=i[c],i[c++]=f}var p=a[h];a[h]=a[u],a[u++]=p}return u}function l(t,e,r,n,i,a,o){for(var s=2*t,l=s*r,c=l,u=r,d=t+e,h=r;n>h;++h,l+=s)if(i[l+d]<=o)if(u===h)u+=1,c+=s;else{for(var g=0;s>g;++g){var f=i[l+g];i[l+g]=i[c],i[c++]=f}var p=a[h];a[h]=a[u],a[u++]=p}return u}function c(t,e,r,n,i,a,o){for(var s=2*t,l=s*r,c=l,u=r,d=e,h=t+e,g=r;n>g;++g,l+=s){var f=i[l+d],p=i[l+h];if(f<=o&&o<=p)if(u===g)u+=1,c+=s;else{for(var m=0;s>m;++m){var y=i[l+m];i[l+m]=i[c],i[c++]=y}var b=a[g];a[g]=a[u],a[u++]=b}}return u}function u(t,e,r,n,i,a,o){for(var s=2*t,l=s*r,c=l,u=r,d=e,h=t+e,g=r;n>g;++g,l+=s){var f=i[l+d],p=i[l+h];if(f<o&&o<=p)if(u===g)u+=1,c+=s;else{for(var m=0;s>m;++m){var y=i[l+m];i[l+m]=i[c],i[c++]=y}var b=a[g];a[g]=a[u],a[u++]=b}}return u}function d(t,e,r,n,i,a,o,s){for(var l=2*t,c=l*r,u=c,d=r,h=e,g=t+e,f=r;n>f;++f,c+=l){var p=i[c+h],m=i[c+g];if(!(p>=o||s>=m))if(d===f)d+=1,u+=l;else{for(var y=0;l>y;++y){var b=i[c+y];i[c+y]=i[u],i[u++]=b}var v=a[f];a[f]=a[d],a[d++]=v}}return d}},{}],40:[function(t,e,r){e.exports=i;var n=32;function i(t,e){e<=4*n?a(0,e-1,t):h(0,e-1,t)}function a(t,e,r){for(var n=2*(t+1),i=t+1;i<=e;++i){for(var a=r[n++],o=r[n++],s=i,l=n-2;s-- >t;){var c=r[l-2],u=r[l-1];if(c<a)break;if(c===a&&u<o)break;r[l]=c,r[l+1]=u,l-=2}r[l]=a,r[l+1]=o}}function o(t,e,r){e*=2;var n=r[t*=2],i=r[t+1];r[t]=r[e],r[t+1]=r[e+1],r[e]=n,r[e+1]=i}function s(t,e,r){e*=2,r[t*=2]=r[e],r[t+1]=r[e+1]}function l(t,e,r,n){e*=2,r*=2;var i=n[t*=2],a=n[t+1];n[t]=n[e],n[t+1]=n[e+1],n[e]=n[r],n[e+1]=n[r+1],n[r]=i,n[r+1]=a}function c(t,e,r,n,i){e*=2,i[t*=2]=i[e],i[e]=r,i[t+1]=i[e+1],i[e+1]=n}function u(t,e,r){e*=2;var n=r[t*=2],i=r[e];return!(n<i)&&(n!==i||r[t+1]>r[e+1])}function d(t,e,r,n){var i=n[t*=2];return i<e||i===e&&n[t+1]<r}function h(t,e,r){var i=(e-t+1)/6|0,g=t+i,f=e-i,p=t+e>>1,m=p-i,y=p+i,b=g,v=m,x=p,I=y,B=f,C=t+1,F=e-1,A=0;u(b,v,r)&&(A=b,b=v,v=A),u(I,B,r)&&(A=I,I=B,B=A),u(b,x,r)&&(A=b,b=x,x=A),u(v,x,r)&&(A=v,v=x,x=A),u(b,I,r)&&(A=b,b=I,I=A),u(x,I,r)&&(A=x,x=I,I=A),u(v,B,r)&&(A=v,v=B,B=A),u(v,x,r)&&(A=v,v=x,x=A),u(I,B,r)&&(A=I,I=B,B=A);for(var Q=r[2*v],_=r[2*v+1],w=r[2*I],U=r[2*I+1],S=2*b,E=2*x,L=2*B,T=2*g,R=2*p,k=2*f,G=0;G<2;++G){var N=r[S+G],M=r[E+G],D=r[L+G];r[T+G]=N,r[R+G]=M,r[k+G]=D}s(m,t,r),s(y,e,r);for(var X=C;X<=F;++X)if(d(X,Q,_,r))X!==C&&o(X,C,r),++C;else if(!d(X,w,U,r))for(;;){if(d(F,w,U,r)){d(F,Q,_,r)?(l(X,C,F,r),++C,--F):(o(X,F,r),--F);break}if(--F<X)break}c(t,C-1,Q,_,r),c(e,F+1,w,U,r),C-2-t<=n?a(t,C-2,r):h(t,C-2,r),e-(F+2)<=n?a(F+2,e,r):h(F+2,e,r),F-C<=n?a(C,F,r):h(C,F,r)}},{}],41:[function(t,e,r){e.exports={init:p,sweepBipartite:b,sweepComplete:v,scanBipartite:x,scanComplete:I};var n=t("typedarray-pool"),i=t("bit-twiddle"),a=t("./sort"),o=1<<28,s=1024,l=n.mallocInt32(s),c=n.mallocInt32(s),u=n.mallocInt32(s),d=n.mallocInt32(s),h=n.mallocInt32(s),g=n.mallocInt32(s),f=n.mallocDouble(8*s);function p(t){var e=i.nextPow2(t);l.length<e&&(n.free(l),l=n.mallocInt32(e)),c.length<e&&(n.free(c),c=n.mallocInt32(e)),u.length<e&&(n.free(u),u=n.mallocInt32(e)),d.length<e&&(n.free(d),d=n.mallocInt32(e)),h.length<e&&(n.free(h),h=n.mallocInt32(e)),g.length<e&&(n.free(g),g=n.mallocInt32(e));var r=8*e;f.length<r&&(n.free(f),f=n.mallocDouble(r))}function m(t,e,r,n){var i=e[n],a=t[r-1];t[i]=a,e[a]=i}function y(t,e,r,n){t[r]=n,e[n]=r}function b(t,e,r,n,i,s,h,g,p,b){for(var v=0,x=2*t,I=t-1,B=x-1,C=r;C<n;++C){var F=s[C],A=x*C;f[v++]=i[A+I],f[v++]=-(F+1),f[v++]=i[A+B],f[v++]=F}for(C=h;C<g;++C){F=b[C]+o;var Q=x*C;f[v++]=p[Q+I],f[v++]=-F,f[v++]=p[Q+B],f[v++]=F}var _=v>>>1;a(f,_);var w=0,U=0;for(C=0;C<_;++C){var S=0|f[2*C+1];if(S>=o)m(u,d,U--,S=S-o|0);else if(S>=0)m(l,c,w--,S);else if(S<=-o){S=-S-o|0;for(var E=0;E<w;++E)if(void 0!==(L=e(l[E],S)))return L;y(u,d,U++,S)}else{for(S=-S-1|0,E=0;E<U;++E){var L;if(void 0!==(L=e(S,u[E])))return L}y(l,c,w++,S)}}}function v(t,e,r,n,i,o,s,p,b,v){for(var x=0,I=2*t,B=t-1,C=I-1,F=r;F<n;++F){var A=o[F]+1<<1,Q=I*F;f[x++]=i[Q+B],f[x++]=-A,f[x++]=i[Q+C],f[x++]=A}for(F=s;F<p;++F){A=v[F]+1<<1;var _=I*F;f[x++]=b[_+B],f[x++]=1|-A,f[x++]=b[_+C],f[x++]=1|A}var w=x>>>1;a(f,w);var U=0,S=0,E=0;for(F=0;F<w;++F){var L=0|f[2*F+1],T=1&L;if(F<w-1&&L>>1==f[2*F+3]>>1&&(T=2,F+=1),L<0){for(var R=-(L>>1)-1,k=0;k<E;++k)if(void 0!==(G=e(h[k],R)))return G;if(0!==T)for(k=0;k<U;++k)if(void 0!==(G=e(l[k],R)))return G;if(1!==T)for(k=0;k<S;++k){var G;if(void 0!==(G=e(u[k],R)))return G}0===T?y(l,c,U++,R):1===T?y(u,d,S++,R):2===T&&y(h,g,E++,R)}else R=(L>>1)-1,0===T?m(l,c,U--,R):1===T?m(u,d,S--,R):2===T&&m(h,g,E--,R)}}function x(t,e,r,n,i,s,u,d,h,g,p,b){var v=0,x=2*t,I=e,B=e+t,C=1,F=1;n?F=o:C=o;for(var A=i;A<s;++A){var Q=A+C,_=x*A;f[v++]=u[_+I],f[v++]=-Q,f[v++]=u[_+B],f[v++]=Q}for(A=h;A<g;++A){Q=A+F;var w=x*A;f[v++]=p[w+I],f[v++]=-Q}var U=v>>>1;a(f,U);var S=0;for(A=0;A<U;++A){var E=0|f[2*A+1];if(E<0){var L=!1;if((Q=-E)>=o?(L=!n,Q-=o):(L=!!n,Q-=1),L)y(l,c,S++,Q);else{var T=b[Q],R=x*Q,k=p[R+e+1],G=p[R+e+1+t];t:for(var N=0;N<S;++N){var M=l[N],D=x*M;if(!(G<u[D+e+1]||u[D+e+1+t]<k)){for(var X=e+2;X<t;++X)if(p[R+X+t]<u[D+X]||u[D+X+t]<p[R+X])continue t;var V,W=d[M];if(void 0!==(V=n?r(T,W):r(W,T)))return V}}}}else m(l,c,S--,E-C)}}function I(t,e,r,n,i,s,c,u,d,h,g){for(var p=0,m=2*t,y=e,b=e+t,v=n;v<i;++v){var x=v+o,I=m*v;f[p++]=s[I+y],f[p++]=-x,f[p++]=s[I+b],f[p++]=x}for(v=u;v<d;++v){x=v+1;var B=m*v;f[p++]=h[B+y],f[p++]=-x}var C=p>>>1;a(f,C);var F=0;for(v=0;v<C;++v){var A=0|f[2*v+1];if(A<0)if((x=-A)>=o)l[F++]=x-o;else{var Q=g[x-=1],_=m*x,w=h[_+e+1],U=h[_+e+1+t];t:for(var S=0;S<F;++S){var E=l[S],L=c[E];if(L===Q)break;var T=m*E;if(!(U<s[T+e+1]||s[T+e+1+t]<w)){for(var R=e+2;R<t;++R)if(h[_+R+t]<s[T+R]||s[T+R+t]<h[_+R])continue t;var k=r(L,Q);if(void 0!==k)return k}}}else{for(x=A-o,S=F-1;S>=0;--S)if(l[S]===x){for(R=S+1;R<F;++R)l[R-1]=l[R];break}--F}}}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(t,e,r){var n=t("./lib/monotone"),i=t("./lib/triangulation"),a=t("./lib/delaunay"),o=t("./lib/filter");function s(t){return[Math.min(t[0],t[1]),Math.max(t[0],t[1])]}function l(t,e){return t[0]-e[0]||t[1]-e[1]}function c(t){return t.map(s).sort(l)}function u(t,e,r){return e in t?t[e]:r}function d(t,e,r){Array.isArray(e)?(r=r||{},e=e||[]):(r=e||{},e=[]);var s=!!u(r,"delaunay",!0),l=!!u(r,"interior",!0),d=!!u(r,"exterior",!0),h=!!u(r,"infinity",!1);if(!l&&!d||0===t.length)return[];var g=n(t,e);if(s||l!==d||h){for(var f=i(t.length,c(e)),p=0;p<g.length;++p){var m=g[p];f.addTriangle(m[0],m[1],m[2])}return s&&a(t,f),d?l?h?o(f,0,h):f.cells():o(f,1,h):o(f,-1)}return g}e.exports=d},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(t,e,r){var n=t("robust-in-sphere")[4];function i(t,e,r,i,a,o){var s=e.opposite(i,a);if(!(s<0)){if(a<i){var l=i;i=a,a=l,l=o,o=s,s=l}e.isConstraint(i,a)||n(t[i],t[a],t[o],t[s])<0&&r.push(i,a)}}function a(t,e){for(var r=[],a=t.length,o=e.stars,s=0;s<a;++s)for(var l=o[s],c=1;c<l.length;c+=2)if(!((g=l[c])<s||e.isConstraint(s,g))){for(var u=l[c-1],d=-1,h=1;h<l.length;h+=2)if(l[h-1]===g){d=l[h];break}d<0||n(t[s],t[g],t[u],t[d])<0&&r.push(s,g)}for(;r.length>0;){for(var g=r.pop(),f=(u=-1,d=-1,l=o[s=r.pop()],1);f<l.length;f+=2){var p=l[f-1],m=l[f];p===g?d=m:m===g&&(u=p)}u<0||d<0||n(t[s],t[g],t[u],t[d])>=0||(e.flip(s,g),i(t,e,r,u,s,d),i(t,e,r,s,d,u),i(t,e,r,d,g,u),i(t,e,r,g,u,d))}}t("binary-search-bounds"),e.exports=a},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(t,e,r){var n=t("binary-search-bounds");function i(t,e,r,n,i,a,o){this.cells=t,this.neighbor=e,this.flags=n,this.constraint=r,this.active=i,this.next=a,this.boundary=o}function a(t,e){return t[0]-e[0]||t[1]-e[1]||t[2]-e[2]}function o(t,e){for(var r=t.cells(),n=r.length,o=0;o<n;++o){var s=(y=r[o])[0],l=y[1],c=y[2];l<c?l<s&&(y[0]=l,y[1]=c,y[2]=s):c<s&&(y[0]=c,y[1]=s,y[2]=l)}r.sort(a);var u=new Array(n);for(o=0;o<u.length;++o)u[o]=0;var d=[],h=[],g=new Array(3*n),f=new Array(3*n),p=null;e&&(p=[]);var m=new i(r,g,f,u,d,h,p);for(o=0;o<n;++o)for(var y=r[o],b=0;b<3;++b){s=y[b],l=y[(b+1)%3];var v=g[3*o+b]=m.locate(l,s,t.opposite(l,s)),x=f[3*o+b]=t.isConstraint(s,l);v<0&&(x?h.push(o):(d.push(o),u[o]=1),e&&p.push([l,s,-1]))}return m}function s(t,e,r){for(var n=0,i=0;i<t.length;++i)e[i]===r&&(t[n++]=t[i]);return t.length=n,t}function l(t,e,r){var n=o(t,r);if(0===e)return r?n.cells.concat(n.boundary):n.cells;for(var i=1,a=n.active,l=n.next,c=n.flags,u=n.cells,d=n.constraint,h=n.neighbor;a.length>0||l.length>0;){for(;a.length>0;){var g=a.pop();if(c[g]!==-i){c[g]=i,u[g];for(var f=0;f<3;++f){var p=h[3*g+f];p>=0&&0===c[p]&&(d[3*g+f]?l.push(p):(a.push(p),c[p]=i))}}}var m=l;l=a,a=m,l.length=0,i=-i}var y=s(u,c,e);return r?y.concat(n.boundary):y}e.exports=l,i.prototype.locate=function(){var t=[0,0,0];return function(e,r,i){var o=e,s=r,l=i;return r<i?r<e&&(o=r,s=i,l=e):i<e&&(o=i,s=e,l=r),o<0?-1:(t[0]=o,t[1]=s,t[2]=l,n.eq(this.cells,t,a))}}()},{"binary-search-bounds":31}],45:[function(t,e,r){var n=t("binary-search-bounds"),i=t("robust-orientation")[3],a=0,o=1,s=2;function l(t,e,r,n,i){this.a=t,this.b=e,this.idx=r,this.lowerIds=n,this.upperIds=i}function c(t,e,r,n){this.a=t,this.b=e,this.type=r,this.idx=n}function u(t,e){var r=t.a[0]-e.a[0]||t.a[1]-e.a[1]||t.type-e.type;return r||(t.type!==a&&(r=i(t.a,t.b,e.b))?r:t.idx-e.idx)}function d(t,e){return i(t.a,t.b,e)}function h(t,e,r,a,o){for(var s=n.lt(e,a,d),l=n.gt(e,a,d),c=s;c<l;++c){for(var u=e[c],h=u.lowerIds,g=h.length;g>1&&i(r[h[g-2]],r[h[g-1]],a)>0;)t.push([h[g-1],h[g-2],o]),g-=1;h.length=g,h.push(o);var f=u.upperIds;for(g=f.length;g>1&&i(r[f[g-2]],r[f[g-1]],a)<0;)t.push([f[g-2],f[g-1],o]),g-=1;f.length=g,f.push(o)}}function g(t,e){var r;return(r=t.a[0]<e.a[0]?i(t.a,t.b,e.a):i(e.b,e.a,t.a))?r:(r=e.b[0]<t.b[0]?i(t.a,t.b,e.b):i(e.b,e.a,t.b))||t.idx-e.idx}function f(t,e,r){var i=n.le(t,r,g),a=t[i],o=a.upperIds,s=o[o.length-1];a.upperIds=[s],t.splice(i+1,0,new l(r.a,r.b,r.idx,[s],o))}function p(t,e,r){var i=r.a;r.a=r.b,r.b=i;var a=n.eq(t,r,g),o=t[a];t[a-1].upperIds=o.upperIds,t.splice(a,1)}function m(t,e){for(var r=t.length,n=e.length,i=[],d=0;d<r;++d)i.push(new c(t[d],null,a,d));for(d=0;d<n;++d){var g=e[d],m=t[g[0]],y=t[g[1]];m[0]<y[0]?i.push(new c(m,y,s,d),new c(y,m,o,d)):m[0]>y[0]&&i.push(new c(y,m,s,d),new c(m,y,o,d))}i.sort(u);for(var b=i[0].a[0]-(1+Math.abs(i[0].a[0]))*Math.pow(2,-52),v=[new l([b,1],[b,0],-1,[],[],[],[])],x=[],I=(d=0,i.length);d<I;++d){var B=i[d],C=B.type;C===a?h(x,v,t,B.a,B.idx):C===s?f(v,t,B):p(v,t,B)}return x}e.exports=m},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(t,e,r){var n=t("binary-search-bounds");function i(t,e){this.stars=t,this.edges=e}e.exports=s;var a=i.prototype;function o(t,e,r){for(var n=1,i=t.length;n<i;n+=2)if(t[n-1]===e&&t[n]===r)return t[n-1]=t[i-2],t[n]=t[i-1],void(t.length=i-2)}function s(t,e){for(var r=new Array(t),n=0;n<t;++n)r[n]=[];return new i(r,e)}a.isConstraint=function(){var t=[0,0];function e(t,e){return t[0]-e[0]||t[1]-e[1]}return function(r,i){return t[0]=Math.min(r,i),t[1]=Math.max(r,i),n.eq(this.edges,t,e)>=0}}(),a.removeTriangle=function(t,e,r){var n=this.stars;o(n[t],e,r),o(n[e],r,t),o(n[r],t,e)},a.addTriangle=function(t,e,r){var n=this.stars;n[t].push(e,r),n[e].push(r,t),n[r].push(t,e)},a.opposite=function(t,e){for(var r=this.stars[e],n=1,i=r.length;n<i;n+=2)if(r[n]===t)return r[n-1];return-1},a.flip=function(t,e){var r=this.opposite(t,e),n=this.opposite(e,t);this.removeTriangle(t,e,r),this.removeTriangle(e,t,n),this.addTriangle(t,n,r),this.addTriangle(e,r,n)},a.edges=function(){for(var t=this.stars,e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],a=0,o=i.length;a<o;a+=2)e.push([i[a],i[a+1]]);return e},a.cells=function(){for(var t=this.stars,e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],a=0,o=i.length;a<o;a+=2){var s=i[a],l=i[a+1];r<Math.min(s,l)&&e.push([r,s,l])}return e}},{"binary-search-bounds":31}],47:[function(t,e,r){function n(t){for(var e=1,r=1;r<t.length;++r)for(var n=0;n<r;++n)if(t[r]<t[n])e=-e;else if(t[n]===t[r])return 0;return e}e.exports=n},{}],48:[function(t,e,r){var n=t("dup"),i=t("robust-linear-solve");function a(t,e){for(var r=0,n=t.length,i=0;i<n;++i)r+=t[i]*e[i];return r}function o(t){var e=t.length;if(0===e)return[];t[0].length;var r=n([t.length+1,t.length+1],1),o=n([t.length+1],1);r[e][e]=0;for(var s=0;s<e;++s){for(var l=0;l<=s;++l)r[l][s]=r[s][l]=2*a(t[s],t[l]);o[s]=a(t[s],t[s])}var c=i(r,o),u=0,d=c[e+1];for(s=0;s<d.length;++s)u+=d[s];var h=new Array(e);for(s=0;s<e;++s){d=c[s];var g=0;for(l=0;l<d.length;++l)g+=d[l];h[s]=g/u}return h}function s(t){if(0===t.length)return[];for(var e=t[0].length,r=n([e]),i=o(t),a=0;a<t.length;++a)for(var s=0;s<e;++s)r[s]+=t[a][s]*i[a];return r}s.barycenetric=o,e.exports=s},{dup:65,"robust-linear-solve":283}],49:[function(t,e,r){e.exports=i;var n=t("circumcenter");function i(t){for(var e=n(t),r=0,i=0;i<t.length;++i)for(var a=t[i],o=0;o<e.length;++o)r+=Math.pow(a[o]-e[o],2);return Math.sqrt(r/t.length)}},{circumcenter:48}],50:[function(t,e,r){e.exports=F;var n=t("union-find"),i=t("box-intersect"),a=t("robust-segment-intersect"),o=t("big-rat"),s=t("big-rat/cmp"),l=t("big-rat/to-float"),c=t("rat-vec"),u=t("nextafter"),d=t("./lib/rat-seg-intersect");function h(t){var e=l(t);return[u(e,-1/0),u(e,1/0)]}function g(t,e){for(var r=new Array(e.length),n=0;n<e.length;++n){var i=e[n],a=t[i[0]],o=t[i[1]];r[n]=[u(Math.min(a[0],o[0]),-1/0),u(Math.min(a[1],o[1]),-1/0),u(Math.max(a[0],o[0]),1/0),u(Math.max(a[1],o[1]),1/0)]}return r}function f(t){for(var e=new Array(t.length),r=0;r<t.length;++r){var n=t[r];e[r]=[u(n[0],-1/0),u(n[1],-1/0),u(n[0],1/0),u(n[1],1/0)]}return e}function p(t,e,r){var n=[];return i(r,(function(r,i){var o=e[r],s=e[i];if(o[0]!==s[0]&&o[0]!==s[1]&&o[1]!==s[0]&&o[1]!==s[1]){var l=t[o[0]],c=t[o[1]],u=t[s[0]],d=t[s[1]];a(l,c,u,d)&&n.push([r,i])}})),n}function m(t,e,r,n){var o=[];return i(r,n,(function(r,n){var i=e[r];if(i[0]!==n&&i[1]!==n){var s=t[n],l=t[i[0]],c=t[i[1]];a(l,c,s,s)&&o.push([r,n])}})),o}function y(t,e,r,n,i){var a,u,h=t.map((function(t){return[o(t[0]),o(t[1])]}));for(a=0;a<r.length;++a){var g=r[a];u=g[0];var f=g[1],p=e[u],m=e[f],y=d(c(t[p[0]]),c(t[p[1]]),c(t[m[0]]),c(t[m[1]]));if(y){var b=t.length;t.push([l(y[0]),l(y[1])]),h.push(y),n.push([u,b],[f,b])}}for(n.sort((function(t,e){if(t[0]!==e[0])return t[0]-e[0];var r=h[t[1]],n=h[e[1]];return s(r[0],n[0])||s(r[1],n[1])})),a=n.length-1;a>=0;--a){var v=e[u=(_=n[a])[0]],x=v[0],I=v[1],B=t[x],C=t[I];if((B[0]-C[0]||B[1]-C[1])<0){var F=x;x=I,I=F}v[0]=x;var A,Q=v[1]=_[1];for(i&&(A=v[2]);a>0&&n[a-1][0]===u;){var _,w=(_=n[--a])[1];i?e.push([Q,w,A]):e.push([Q,w]),Q=w}i?e.push([Q,I,A]):e.push([Q,I])}return h}function b(t,e,r){for(var a=e.length,o=new n(a),s=[],l=0;l<e.length;++l){var c=e[l],d=h(c[0]),g=h(c[1]);s.push([u(d[0],-1/0),u(g[0],-1/0),u(d[1],1/0),u(g[1],1/0)])}i(s,(function(t,e){o.link(t,e)}));var f=!0,p=new Array(a);for(l=0;l<a;++l)(y=o.find(l))!==l&&(f=!1,t[y]=[Math.min(t[l][0],t[y][0]),Math.min(t[l][1],t[y][1])]);if(f)return null;var m=0;for(l=0;l<a;++l){var y;(y=o.find(l))===l?(p[l]=m,t[m++]=t[l]):p[l]=-1}for(t.length=m,l=0;l<a;++l)p[l]<0&&(p[l]=p[o.find(l)]);return p}function v(t,e){return t[0]-e[0]||t[1]-e[1]}function x(t,e){var r=t[0]-e[0]||t[1]-e[1];return r||(t[2]<e[2]?-1:t[2]>e[2]?1:0)}function I(t,e,r){if(0!==t.length){if(e)for(var n=0;n<t.length;++n){var i=e[(o=t[n])[0]],a=e[o[1]];o[0]=Math.min(i,a),o[1]=Math.max(i,a)}else for(n=0;n<t.length;++n){var o;i=(o=t[n])[0],a=o[1],o[0]=Math.min(i,a),o[1]=Math.max(i,a)}r?t.sort(x):t.sort(v);var s=1;for(n=1;n<t.length;++n){var l=t[n-1],c=t[n];(c[0]!==l[0]||c[1]!==l[1]||r&&c[2]!==l[2])&&(t[s++]=c)}t.length=s}}function B(t,e,r){var n=b(t,[],f(t));return I(e,n,r),!!n}function C(t,e,r){var n=g(t,e),i=p(t,e,n),a=m(t,e,n,f(t)),o=b(t,y(t,e,i,a,r));return I(e,o,r),!!o||i.length>0||a.length>0}function F(t,e,r){var n;if(r){n=e;for(var i=new Array(e.length),a=0;a<e.length;++a){var o=e[a];i[a]=[o[0],o[1],r[a]]}e=i}for(var s=B(t,e,!!r);C(t,e,!!r);)s=!0;if(r&&s)for(n.length=0,r.length=0,a=0;a<e.length;++a)o=e[a],n.push([o[0],o[1]]),r.push(o[2]);return s}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(t,e,r){e.exports=d;var n=t("big-rat/mul"),i=t("big-rat/div"),a=t("big-rat/sub"),o=t("big-rat/sign"),s=t("rat-vec/sub"),l=t("rat-vec/add"),c=t("rat-vec/muls");function u(t,e){return a(n(t[0],e[1]),n(t[1],e[0]))}function d(t,e,r,n){var a=s(e,t),d=s(n,r),h=u(a,d);if(0===o(h))return null;var g=u(d,s(t,r)),f=i(g,h),p=c(a,f);return l(t,p)}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(t,e,r){e.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(t,e,r){var n=t("./colorScale"),i=t("lerp");function a(t){var e,r,a,c,u,d,h,g,f,p;if(t||(t={}),g=(t.nshades||72)-1,h=t.format||"hex",(d=t.colormap)||(d="jet"),"string"==typeof d){if(d=d.toLowerCase(),!n[d])throw Error(d+" not a supported colorscale");u=n[d]}else{if(!Array.isArray(d))throw Error("unsupported colormap option",d);u=d.slice()}if(u.length>g+1)throw new Error(d+" map requires nshades to be at least size "+u.length);f=Array.isArray(t.alpha)?2!==t.alpha.length?[1,1]:t.alpha.slice():"number"==typeof t.alpha?[t.alpha,t.alpha]:[1,1],e=u.map((function(t){return Math.round(t.index*g)})),f[0]=Math.min(Math.max(f[0],0),1),f[1]=Math.min(Math.max(f[1],0),1);var m=u.map((function(t,e){var r=u[e].index,n=u[e].rgb.slice();return 4===n.length&&n[3]>=0&&n[3]<=1||(n[3]=f[0]+(f[1]-f[0])*r),n})),y=[];for(p=0;p<e.length-1;++p){c=e[p+1]-e[p],r=m[p],a=m[p+1];for(var b=0;b<c;b++){var v=b/c;y.push([Math.round(i(r[0],a[0],v)),Math.round(i(r[1],a[1],v)),Math.round(i(r[2],a[2],v)),i(r[3],a[3],v)])}}return y.push(u[u.length-1].rgb.concat(f[1])),"hex"===h?y=y.map(s):"rgbaString"===h?y=y.map(l):"float"===h&&(y=y.map(o)),y}function o(t){return[t[0]/255,t[1]/255,t[2]/255,t[3]]}function s(t){for(var e,r="#",n=0;n<3;++n)r+=("00"+(e=(e=t[n]).toString(16))).substr(e.length);return r}function l(t){return"rgba("+t.join(",")+")"}e.exports=a},{"./colorScale":52,lerp:240}],54:[function(t,e,r){e.exports=c;var n=t("robust-orientation"),i=t("signum"),a=t("two-sum"),o=t("robust-product"),s=t("robust-sum");function l(t,e,r){var n=a(t[0],-e[0]),i=a(t[1],-e[1]),l=a(r[0],-e[0]),c=a(r[1],-e[1]),u=s(o(n,l),o(i,c));return u[u.length-1]>=0}function c(t,e,r,a){var o=n(e,r,a);if(0===o){var s=i(n(t,e,r)),c=i(n(t,e,a));if(s===c){if(0===s){var u=l(t,e,r);return u===l(t,e,a)?0:u?1:-1}return 0}return 0===c?s>0||l(t,e,a)?-1:1:0===s?c>0||l(t,e,r)?1:-1:i(c-s)}var d=n(t,e,r);return d>0?o>0&&n(t,e,a)>0?1:-1:d<0?o>0||n(t,e,a)>0?1:-1:n(t,e,a)>0||l(t,e,r)?1:-1}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(t,e,r){e.exports=function(t){return t<0?-1:t>0?1:0}},{}],56:[function(t,e,r){e.exports=a;var n=Math.min;function i(t,e){return t-e}function a(t,e){var r=t.length,a=t.length-e.length;if(a)return a;switch(r){case 0:return 0;case 1:return t[0]-e[0];case 2:return t[0]+t[1]-e[0]-e[1]||n(t[0],t[1])-n(e[0],e[1]);case 3:var o=t[0]+t[1],s=e[0]+e[1];if(a=o+t[2]-(s+e[2]))return a;var l=n(t[0],t[1]),c=n(e[0],e[1]);return n(l,t[2])-n(c,e[2])||n(l+t[2],o)-n(c+e[2],s);case 4:var u=t[0],d=t[1],h=t[2],g=t[3],f=e[0],p=e[1],m=e[2],y=e[3];return u+d+h+g-(f+p+m+y)||n(u,d,h,g)-n(f,p,m,y,f)||n(u+d,u+h,u+g,d+h,d+g,h+g)-n(f+p,f+m,f+y,p+m,p+y,m+y)||n(u+d+h,u+d+g,u+h+g,d+h+g)-n(f+p+m,f+p+y,f+m+y,p+m+y);default:for(var b=t.slice().sort(i),v=e.slice().sort(i),x=0;x<r;++x)if(a=b[x]-v[x])return a;return 0}}},{}],57:[function(t,e,r){var n=t("compare-cell"),i=t("cell-orientation");function a(t,e){return n(t,e)||i(t)-i(e)}e.exports=a},{"cell-orientation":47,"compare-cell":56}],58:[function(t,e,r){var n=t("./lib/ch1d"),i=t("./lib/ch2d"),a=t("./lib/chnd");function o(t){var e=t.length;if(0===e)return[];if(1===e)return[[0]];var r=t[0].length;return 0===r?[]:1===r?n(t):2===r?i(t):a(t,r)}e.exports=o},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(t,e,r){function n(t){for(var e=0,r=0,n=1;n<t.length;++n)t[n][0]<t[e][0]&&(e=n),t[n][0]>t[r][0]&&(r=n);return e<r?[[e],[r]]:e>r?[[r],[e]]:[[e]]}e.exports=n},{}],60:[function(t,e,r){e.exports=i;var n=t("monotone-convex-hull-2d");function i(t){var e=n(t),r=e.length;if(r<=2)return[];for(var i=new Array(r),a=e[r-1],o=0;o<r;++o){var s=e[o];i[o]=[a,s],a=s}return i}},{"monotone-convex-hull-2d":246}],61:[function(t,e,r){e.exports=s;var n=t("incremental-convex-hull"),i=t("affine-hull");function a(t,e){for(var r=t.length,n=new Array(r),i=0;i<e.length;++i)n[i]=t[e[i]];var a=e.length;for(i=0;i<r;++i)e.indexOf(i)<0&&(n[a++]=t[i]);return n}function o(t,e){for(var r=t.length,n=e.length,i=0;i<r;++i)for(var a=t[i],o=0;o<a.length;++o){var s=a[o];if(s<n)a[o]=e[s];else{s-=n;for(var l=0;l<n;++l)s>=e[l]&&(s+=1);a[o]=s}}return t}function s(t,e){try{return n(t,!0)}catch(l){var r=i(t);if(r.length<=e)return[];var s=a(t,r);return o(n(s,!0),r)}}},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(t,e,r){function n(t,e,r,n,i,a){var o=6*i*i-6*i,s=3*i*i-4*i+1,l=-6*i*i+6*i,c=3*i*i-2*i;if(t.length){a||(a=new Array(t.length));for(var u=t.length-1;u>=0;--u)a[u]=o*t[u]+s*e[u]+l*r[u]+c*n[u];return a}return o*t+s*e+l*r[u]+c*n}function i(t,e,r,n,i,a){var o=i-1,s=i*i,l=o*o,c=(1+2*i)*l,u=i*l,d=s*(3-2*i),h=s*o;if(t.length){a||(a=new Array(t.length));for(var g=t.length-1;g>=0;--g)a[g]=c*t[g]+u*e[g]+d*r[g]+h*n[g];return a}return c*t+u*e+d*r+h*n}e.exports=i,e.exports.derivative=n},{}],63:[function(t,e,r){var n=t("incremental-convex-hull"),i=t("uniq");function a(t,e){this.point=t,this.index=e}function o(t,e){for(var r=t.point,n=e.point,i=r.length,a=0;a<i;++a){var o=n[a]-r[a];if(o)return o}return 0}function s(t,e,r){if(1===t)return r?[[-1,0]]:[];var n=e.map((function(t,e){return[t[0],e]}));n.sort((function(t,e){return t[0]-e[0]}));for(var i=new Array(t-1),a=1;a<t;++a){var o=n[a-1],s=n[a];i[a-1]=[o[1],s[1]]}return r&&i.push([-1,i[0][1]],[i[t-1][1],-1]),i}function l(t,e){var r=t.length;if(0===r)return[];var l=t[0].length;if(l<1)return[];if(1===l)return s(r,t,e);for(var c=new Array(r),u=1,d=0;d<r;++d){for(var h=t[d],g=new Array(l+1),f=0,p=0;p<l;++p){var m=h[p];g[p]=m,f+=m*m}g[l]=f,c[d]=new a(g,d),u=Math.max(f,u)}i(c,o),r=c.length;var y=new Array(r+l+1),b=new Array(r+l+1),v=(l+1)*(l+1)*u,x=new Array(l+1);for(d=0;d<=l;++d)x[d]=0;for(x[l]=v,y[0]=x.slice(),b[0]=-1,d=0;d<=l;++d)(g=x.slice())[d]=1,y[d+1]=g,b[d+1]=-1;for(d=0;d<r;++d){var I=c[d];y[d+l+1]=I.point,b[d+l+1]=I.index}var B=n(y,!1);if(B=e?B.filter((function(t){for(var e=0,r=0;r<=l;++r){var n=b[t[r]];if(n<0&&++e>=2)return!1;t[r]=n}return!0})):B.filter((function(t){for(var e=0;e<=l;++e){var r=b[t[e]];if(r<0)return!1;t[e]=r}return!0})),1&l)for(d=0;d<B.length;++d)g=(I=B[d])[0],I[0]=I[1],I[1]=g;return B}e.exports=l},{"incremental-convex-hull":233,uniq:310}],64:[function(t,e,r){(function(t){(function(){var r=!1;if("undefined"!=typeof Float64Array){var n=new Float64Array(1),i=new Uint32Array(n.buffer);if(n[0]=1,r=!0,1072693248===i[1]){function a(t,e){return i[0]=t,i[1]=e,n[0]}function o(t){return n[0]=t,i[0]}function s(t){return n[0]=t,i[1]}e.exports=function(t){return n[0]=t,[i[0],i[1]]},e.exports.pack=a,e.exports.lo=o,e.exports.hi=s}else if(1072693248===i[0]){function l(t,e){return i[1]=t,i[0]=e,n[0]}function c(t){return n[0]=t,i[1]}function u(t){return n[0]=t,i[0]}e.exports=function(t){return n[0]=t,[i[1],i[0]]},e.exports.pack=l,e.exports.lo=c,e.exports.hi=u}else r=!1}if(!r){var d=new t(8);function h(t,e){return d.writeUInt32LE(t,0,!0),d.writeUInt32LE(e,4,!0),d.readDoubleLE(0,!0)}function g(t){return d.writeDoubleLE(t,0,!0),d.readUInt32LE(0,!0)}function f(t){return d.writeDoubleLE(t,0,!0),d.readUInt32LE(4,!0)}e.exports=function(t){return d.writeDoubleLE(t,0,!0),[d.readUInt32LE(0,!0),d.readUInt32LE(4,!0)]},e.exports.pack=h,e.exports.lo=g,e.exports.hi=f}e.exports.sign=function(t){return e.exports.hi(t)>>>31},e.exports.exponent=function(t){return(e.exports.hi(t)<<1>>>21)-1023},e.exports.fraction=function(t){var r=e.exports.lo(t),n=e.exports.hi(t),i=1048575&n;return 2146435072&n&&(i+=1<<20),[r,i]},e.exports.denormalized=function(t){return!(2146435072&e.exports.hi(t))}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:3}],65:[function(t,e,r){function n(t,e,r){var i=0|t[r];if(i<=0)return[];var a,o=new Array(i);if(r===t.length-1)for(a=0;a<i;++a)o[a]=e;else for(a=0;a<i;++a)o[a]=n(t,e,r+1);return o}function i(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}function a(t,e){switch(void 0===e&&(e=0),typeof t){case"number":if(t>0)return i(0|t,e);break;case"object":if("number"==typeof t.length)return n(t,e,0)}return[]}e.exports=a},{}],66:[function(t,e,r){e.exports=i;var n=t("uniq");function i(t,e){var r=t.length;if("number"!=typeof e){e=0;for(var i=0;i<r;++i){var a=t[i];e=Math.max(e,a[0],a[1])}e=1+(0|e)}e|=0;var o=new Array(e);for(i=0;i<e;++i)o[i]=[];for(i=0;i<r;++i)o[(a=t[i])[0]].push(a[1]),o[a[1]].push(a[0]);for(var s=0;s<e;++s)n(o[s],(function(t,e){return t-e}));return o}},{uniq:310}],67:[function(t,e,r){function n(t,e,r){var n=e||0,i=r||1;return[[t[12]+t[0],t[13]+t[1],t[14]+t[2],t[15]+t[3]],[t[12]-t[0],t[13]-t[1],t[14]-t[2],t[15]-t[3]],[t[12]+t[4],t[13]+t[5],t[14]+t[6],t[15]+t[7]],[t[12]-t[4],t[13]-t[5],t[14]-t[6],t[15]-t[7]],[n*t[12]+t[8],n*t[13]+t[9],n*t[14]+t[10],n*t[15]+t[11]],[i*t[12]-t[8],i*t[13]-t[9],i*t[14]-t[10],i*t[15]-t[11]]]}e.exports=n},{}],68:[function(t,e,r){e.exports=c;var n=t("cubic-hermite"),i=t("binary-search-bounds");function a(t,e,r){return Math.min(e,Math.max(t,r))}function o(t,e,r){this.dimension=t.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var n=0;n<this.dimension;++n)this.bounds[0][n]=-1/0,this.bounds[1][n]=1/0;this._state=t.slice().reverse(),this._velocity=e.slice().reverse(),this._time=[r],this._scratch=[t.slice(),t.slice(),t.slice(),t.slice(),t.slice()]}var s=o.prototype;function l(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=0;return e}function c(t,e,r){switch(arguments.length){case 0:return new o([0],[0],0);case 1:return"number"==typeof t?new o(n=l(t),n,0):new o(t,l(t.length),0);case 2:var n;if("number"==typeof e)return new o(t,n=l(t.length),+e);r=0;case 3:if(t.length!==e.length)throw new Error("state and velocity lengths must match");return new o(t,e,r)}}s.flush=function(t){var e=i.gt(this._time,t)-1;e<=0||(this._time.splice(0,e),this._state.splice(0,e*this.dimension),this._velocity.splice(0,e*this.dimension))},s.curve=function(t){var e=this._time,r=e.length,o=i.le(e,t),s=this._scratch[0],l=this._state,c=this._velocity,u=this.dimension,d=this.bounds;if(o<0)for(var h=u-1,g=0;g<u;++g,--h)s[g]=l[h];else if(o>=r-1){h=l.length-1;var f=t-e[r-1];for(g=0;g<u;++g,--h)s[g]=l[h]+f*c[h]}else{h=u*(o+1)-1;var p=e[o],m=e[o+1]-p||1,y=this._scratch[1],b=this._scratch[2],v=this._scratch[3],x=this._scratch[4],I=!0;for(g=0;g<u;++g,--h)y[g]=l[h],v[g]=c[h]*m,b[g]=l[h+u],x[g]=c[h+u]*m,I=I&&y[g]===b[g]&&v[g]===x[g]&&0===v[g];if(I)for(g=0;g<u;++g)s[g]=y[g];else n(y,v,b,x,(t-p)/m,s)}var B=d[0],C=d[1];for(g=0;g<u;++g)s[g]=a(B[g],C[g],s[g]);return s},s.dcurve=function(t){var e=this._time,r=e.length,a=i.le(e,t),o=this._scratch[0],s=this._state,l=this._velocity,c=this.dimension;if(a>=r-1){var u=s.length-1;e[r-1];for(var d=0;d<c;++d,--u)o[d]=l[u]}else{u=c*(a+1)-1;var h=e[a],g=e[a+1]-h||1,f=this._scratch[1],p=this._scratch[2],m=this._scratch[3],y=this._scratch[4],b=!0;for(d=0;d<c;++d,--u)f[d]=s[u],m[d]=l[u]*g,p[d]=s[u+c],y[d]=l[u+c]*g,b=b&&f[d]===p[d]&&m[d]===y[d]&&0===m[d];if(b)for(d=0;d<c;++d)o[d]=0;else for(n.derivative(f,m,p,y,(t-h)/g,o),d=0;d<c;++d)o[d]/=g}return o},s.lastT=function(){var t=this._time;return t[t.length-1]},s.stable=function(){for(var t=this._velocity,e=t.length,r=this.dimension-1;r>=0;--r)if(t[--e])return!1;return!0},s.jump=function(t){var e=this.lastT(),r=this.dimension;if(!(t<e||arguments.length!==r+1)){var n=this._state,i=this._velocity,o=n.length-this.dimension,s=this.bounds,l=s[0],c=s[1];this._time.push(e,t);for(var u=0;u<2;++u)for(var d=0;d<r;++d)n.push(n[o++]),i.push(0);for(this._time.push(t),d=r;d>0;--d)n.push(a(l[d-1],c[d-1],arguments[d])),i.push(0)}},s.push=function(t){var e=this.lastT(),r=this.dimension;if(!(t<e||arguments.length!==r+1)){var n=this._state,i=this._velocity,o=n.length-this.dimension,s=t-e,l=this.bounds,c=l[0],u=l[1],d=s>1e-6?1/s:0;this._time.push(t);for(var h=r;h>0;--h){var g=a(c[h-1],u[h-1],arguments[h]);n.push(g),i.push((g-n[o++])*d)}}},s.set=function(t){var e=this.dimension;if(!(t<this.lastT()||arguments.length!==e+1)){var r=this._state,n=this._velocity,i=this.bounds,o=i[0],s=i[1];this._time.push(t);for(var l=e;l>0;--l)r.push(a(o[l-1],s[l-1],arguments[l])),n.push(0)}},s.move=function(t){var e=this.lastT(),r=this.dimension;if(!(t<=e||arguments.length!==r+1)){var n=this._state,i=this._velocity,o=n.length-this.dimension,s=this.bounds,l=s[0],c=s[1],u=t-e,d=u>1e-6?1/u:0;this._time.push(t);for(var h=r;h>0;--h){var g=arguments[h];n.push(a(l[h-1],c[h-1],n[o++]+g)),i.push(g*d)}}},s.idle=function(t){var e=this.lastT();if(!(t<e)){var r=this.dimension,n=this._state,i=this._velocity,o=n.length-r,s=this.bounds,l=s[0],c=s[1],u=t-e;this._time.push(t);for(var d=r-1;d>=0;--d)n.push(a(l[d],c[d],n[o]+u*i[o])),i.push(0),o+=1}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(t,e,r){e.exports=v;var n=0,i=1;function a(t,e,r,n,i,a){this._color=t,this.key=e,this.value=r,this.left=n,this.right=i,this._count=a}function o(t){return new a(t._color,t.key,t.value,t.left,t.right,t._count)}function s(t,e){return new a(t,e.key,e.value,e.left,e.right,e._count)}function l(t){t._count=1+(t.left?t.left._count:0)+(t.right?t.right._count:0)}function c(t,e){this._compare=t,this.root=e}var u=c.prototype;function d(t,e){var r;return e.left&&(r=d(t,e.left))?r:(r=t(e.key,e.value))||(e.right?d(t,e.right):void 0)}function h(t,e,r,n){if(e(t,n.key)<=0){var i;if(n.left&&(i=h(t,e,r,n.left)))return i;if(i=r(n.key,n.value))return i}if(n.right)return h(t,e,r,n.right)}function g(t,e,r,n,i){var a,o=r(t,i.key),s=r(e,i.key);if(o<=0){if(i.left&&(a=g(t,e,r,n,i.left)))return a;if(s>0&&(a=n(i.key,i.value)))return a}if(s>0&&i.right)return g(t,e,r,n,i.right)}function f(t,e){this.tree=t,this._stack=e}Object.defineProperty(u,"keys",{get:function(){var t=[];return this.forEach((function(e,r){t.push(e)})),t}}),Object.defineProperty(u,"values",{get:function(){var t=[];return this.forEach((function(e,r){t.push(r)})),t}}),Object.defineProperty(u,"length",{get:function(){return this.root?this.root._count:0}}),u.insert=function(t,e){for(var r=this._compare,o=this.root,u=[],d=[];o;){var h=r(t,o.key);u.push(o),d.push(h),o=h<=0?o.left:o.right}u.push(new a(n,t,e,null,null,1));for(var g=u.length-2;g>=0;--g)o=u[g],d[g]<=0?u[g]=new a(o._color,o.key,o.value,u[g+1],o.right,o._count+1):u[g]=new a(o._color,o.key,o.value,o.left,u[g+1],o._count+1);for(g=u.length-1;g>1;--g){var f=u[g-1];if(o=u[g],f._color===i||o._color===i)break;var p=u[g-2];if(p.left===f)if(f.left===o){if(!(m=p.right)||m._color!==n){p._color=n,p.left=f.right,f._color=i,f.right=p,u[g-2]=f,u[g-1]=o,l(p),l(f),g>=3&&((y=u[g-3]).left===p?y.left=f:y.right=f);break}f._color=i,p.right=s(i,m),p._color=n,g-=1}else{if(!(m=p.right)||m._color!==n){f.right=o.left,p._color=n,p.left=o.right,o._color=i,o.left=f,o.right=p,u[g-2]=o,u[g-1]=f,l(p),l(f),l(o),g>=3&&((y=u[g-3]).left===p?y.left=o:y.right=o);break}f._color=i,p.right=s(i,m),p._color=n,g-=1}else if(f.right===o){if(!(m=p.left)||m._color!==n){p._color=n,p.right=f.left,f._color=i,f.left=p,u[g-2]=f,u[g-1]=o,l(p),l(f),g>=3&&((y=u[g-3]).right===p?y.right=f:y.left=f);break}f._color=i,p.left=s(i,m),p._color=n,g-=1}else{var m;if(!(m=p.left)||m._color!==n){var y;f.left=o.right,p._color=n,p.right=o.left,o._color=i,o.right=f,o.left=p,u[g-2]=o,u[g-1]=f,l(p),l(f),l(o),g>=3&&((y=u[g-3]).right===p?y.right=o:y.left=o);break}f._color=i,p.left=s(i,m),p._color=n,g-=1}}return u[0]._color=i,new c(r,u[0])},u.forEach=function(t,e,r){if(this.root)switch(arguments.length){case 1:return d(t,this.root);case 2:return h(e,this._compare,t,this.root);case 3:if(this._compare(e,r)>=0)return;return g(e,r,this._compare,t,this.root)}},Object.defineProperty(u,"begin",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.left;return new f(this,t)}}),Object.defineProperty(u,"end",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.right;return new f(this,t)}}),u.at=function(t){if(t<0)return new f(this,[]);for(var e=this.root,r=[];;){if(r.push(e),e.left){if(t<e.left._count){e=e.left;continue}t-=e.left._count}if(!t)return new f(this,r);if(t-=1,!e.right)break;if(t>=e.right._count)break;e=e.right}return new f(this,[])},u.ge=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var a=e(t,r.key);n.push(r),a<=0&&(i=n.length),r=a<=0?r.left:r.right}return n.length=i,new f(this,n)},u.gt=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var a=e(t,r.key);n.push(r),a<0&&(i=n.length),r=a<0?r.left:r.right}return n.length=i,new f(this,n)},u.lt=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var a=e(t,r.key);n.push(r),a>0&&(i=n.length),r=a<=0?r.left:r.right}return n.length=i,new f(this,n)},u.le=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var a=e(t,r.key);n.push(r),a>=0&&(i=n.length),r=a<0?r.left:r.right}return n.length=i,new f(this,n)},u.find=function(t){for(var e=this._compare,r=this.root,n=[];r;){var i=e(t,r.key);if(n.push(r),0===i)return new f(this,n);r=i<=0?r.left:r.right}return new f(this,[])},u.remove=function(t){var e=this.find(t);return e?e.remove():this},u.get=function(t){for(var e=this._compare,r=this.root;r;){var n=e(t,r.key);if(0===n)return r.value;r=n<=0?r.left:r.right}};var p=f.prototype;function m(t,e){t.key=e.key,t.value=e.value,t.left=e.left,t.right=e.right,t._color=e._color,t._count=e._count}function y(t){for(var e,r,a,c,u=t.length-1;u>=0;--u){if(e=t[u],0===u)return void(e._color=i);if((r=t[u-1]).left===e){if((a=r.right).right&&a.right._color===n)return c=(a=r.right=o(a)).right=o(a.right),r.right=a.left,a.left=r,a.right=c,a._color=r._color,e._color=i,r._color=i,c._color=i,l(r),l(a),u>1&&((d=t[u-2]).left===r?d.left=a:d.right=a),void(t[u-1]=a);if(a.left&&a.left._color===n)return c=(a=r.right=o(a)).left=o(a.left),r.right=c.left,a.left=c.right,c.left=r,c.right=a,c._color=r._color,r._color=i,a._color=i,e._color=i,l(r),l(a),l(c),u>1&&((d=t[u-2]).left===r?d.left=c:d.right=c),void(t[u-1]=c);if(a._color===i){if(r._color===n)return r._color=i,void(r.right=s(n,a));r.right=s(n,a);continue}a=o(a),r.right=a.left,a.left=r,a._color=r._color,r._color=n,l(r),l(a),u>1&&((d=t[u-2]).left===r?d.left=a:d.right=a),t[u-1]=a,t[u]=r,u+1<t.length?t[u+1]=e:t.push(e),u+=2}else{if((a=r.left).left&&a.left._color===n)return c=(a=r.left=o(a)).left=o(a.left),r.left=a.right,a.right=r,a.left=c,a._color=r._color,e._color=i,r._color=i,c._color=i,l(r),l(a),u>1&&((d=t[u-2]).right===r?d.right=a:d.left=a),void(t[u-1]=a);if(a.right&&a.right._color===n)return c=(a=r.left=o(a)).right=o(a.right),r.left=c.right,a.right=c.left,c.right=r,c.left=a,c._color=r._color,r._color=i,a._color=i,e._color=i,l(r),l(a),l(c),u>1&&((d=t[u-2]).right===r?d.right=c:d.left=c),void(t[u-1]=c);if(a._color===i){if(r._color===n)return r._color=i,void(r.left=s(n,a));r.left=s(n,a);continue}var d;a=o(a),r.left=a.right,a.right=r,a._color=r._color,r._color=n,l(r),l(a),u>1&&((d=t[u-2]).right===r?d.right=a:d.left=a),t[u-1]=a,t[u]=r,u+1<t.length?t[u+1]=e:t.push(e),u+=2}}}function b(t,e){return t<e?-1:t>e?1:0}function v(t){return new c(t||b,null)}Object.defineProperty(p,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(p,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),p.clone=function(){return new f(this.tree,this._stack.slice())},p.remove=function(){var t=this._stack;if(0===t.length)return this.tree;var e=new Array(t.length),r=t[t.length-1];e[e.length-1]=new a(r._color,r.key,r.value,r.left,r.right,r._count);for(var o=t.length-2;o>=0;--o)(r=t[o]).left===t[o+1]?e[o]=new a(r._color,r.key,r.value,e[o+1],r.right,r._count):e[o]=new a(r._color,r.key,r.value,r.left,e[o+1],r._count);if((r=e[e.length-1]).left&&r.right){var s=e.length;for(r=r.left;r.right;)e.push(r),r=r.right;var l=e[s-1];for(e.push(new a(r._color,l.key,l.value,r.left,r.right,r._count)),e[s-1].key=r.key,e[s-1].value=r.value,o=e.length-2;o>=s;--o)r=e[o],e[o]=new a(r._color,r.key,r.value,r.left,e[o+1],r._count);e[s-1].left=e[s]}if((r=e[e.length-1])._color===n){var u=e[e.length-2];for(u.left===r?u.left=null:u.right===r&&(u.right=null),e.pop(),o=0;o<e.length;++o)e[o]._count--;return new c(this.tree._compare,e[0])}if(r.left||r.right){for(r.left?m(r,r.left):r.right&&m(r,r.right),r._color=i,o=0;o<e.length-1;++o)e[o]._count--;return new c(this.tree._compare,e[0])}if(1===e.length)return new c(this.tree._compare,null);for(o=0;o<e.length;++o)e[o]._count--;var d=e[e.length-2];return y(e),d.left===r?d.left=null:d.right=null,new c(this.tree._compare,e[0])},Object.defineProperty(p,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(p,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(p,"index",{get:function(){var t=0,e=this._stack;if(0===e.length){var r=this.tree.root;return r?r._count:0}e[e.length-1].left&&(t=e[e.length-1].left._count);for(var n=e.length-2;n>=0;--n)e[n+1]===e[n].right&&(++t,e[n].left&&(t+=e[n].left._count));return t},enumerable:!0}),p.next=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.right)for(e=e.right;e;)t.push(e),e=e.left;else for(t.pop();t.length>0&&t[t.length-1].right===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(p,"hasNext",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].right)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].left===t[e])return!0;return!1}}),p.update=function(t){var e=this._stack;if(0===e.length)throw new Error("Can't update empty node!");var r=new Array(e.length),n=e[e.length-1];r[r.length-1]=new a(n._color,n.key,t,n.left,n.right,n._count);for(var i=e.length-2;i>=0;--i)(n=e[i]).left===e[i+1]?r[i]=new a(n._color,n.key,n.value,r[i+1],n.right,n._count):r[i]=new a(n._color,n.key,n.value,n.left,r[i+1],n._count);return new c(this.tree._compare,r[0])},p.prev=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.left)for(e=e.left;e;)t.push(e),e=e.right;else for(t.pop();t.length>0&&t[t.length-1].left===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(p,"hasPrev",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].left)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].right===t[e])return!0;return!1}})},{}],70:[function(t,e,r){e.exports=I;var n=t("./lib/text.js"),i=t("./lib/lines.js"),a=t("./lib/background.js"),o=t("./lib/cube.js"),s=t("./lib/ticks.js"),l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function c(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function u(t){this.gl=t,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=a(t)}var d=u.prototype;function h(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}d.update=function(t){function e(e,r,n){if(n in t){var i,a=t[n],o=this[n];(e?Array.isArray(a)&&Array.isArray(a[0]):Array.isArray(a))?this[n]=i=[r(a[0]),r(a[1]),r(a[2])]:this[n]=i=[r(a),r(a),r(a)];for(var s=0;s<3;++s)if(i[s]!==o[s])return!0}return!1}t=t||{};var r,a=e.bind(this,!1,Number),o=e.bind(this,!1,Boolean),l=e.bind(this,!1,String),c=e.bind(this,!0,(function(t){if(Array.isArray(t)){if(3===t.length)return[+t[0],+t[1],+t[2],1];if(4===t.length)return[+t[0],+t[1],+t[2],+t[3]]}return[0,0,0,1]})),u=!1,d=!1;if("bounds"in t)for(var h=t.bounds,g=0;g<2;++g)for(var f=0;f<3;++f)h[g][f]!==this.bounds[g][f]&&(d=!0),this.bounds[g][f]=h[g][f];if("ticks"in t)for(r=t.ticks,u=!0,this.autoTicks=!1,g=0;g<3;++g)this.tickSpacing[g]=0;else a("tickSpacing")&&(this.autoTicks=!0,d=!0);if(this._firstInit&&("ticks"in t||"tickSpacing"in t||(this.autoTicks=!0),d=!0,u=!0,this._firstInit=!1),d&&this.autoTicks&&(r=s.create(this.bounds,this.tickSpacing),u=!0),u){for(g=0;g<3;++g)r[g].sort((function(t,e){return t.x-e.x}));s.equal(r,this.ticks)?u=!1:this.ticks=r}o("tickEnable"),l("tickFont")&&(u=!0),a("tickSize"),a("tickAngle"),a("tickPad"),c("tickColor");var p=l("labels");l("labelFont")&&(p=!0),o("labelEnable"),a("labelSize"),a("labelPad"),c("labelColor"),o("lineEnable"),o("lineMirror"),a("lineWidth"),c("lineColor"),o("lineTickEnable"),o("lineTickMirror"),a("lineTickLength"),a("lineTickWidth"),c("lineTickColor"),o("gridEnable"),a("gridWidth"),c("gridColor"),o("zeroEnable"),c("zeroLineColor"),a("zeroLineWidth"),o("backgroundEnable"),c("backgroundColor"),this._text?this._text&&(p||u)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=n(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&u&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=i(this.gl,this.bounds,this.ticks))};var g=[new h,new h,new h];function f(t,e,r,n,i){for(var a=t.primalOffset,o=t.primalMinor,s=t.mirrorOffset,l=t.mirrorMinor,c=n[e],u=0;u<3;++u)if(e!==u){var d=a,h=s,g=o,f=l;c&1<<u&&(d=s,h=a,g=l,f=o),d[u]=r[0][u],h[u]=r[1][u],i[u]>0?(g[u]=-1,f[u]=0):(g[u]=0,f[u]=1)}}var p=[0,0,0],m={model:l,view:l,projection:l,_ortho:!1};d.isOpaque=function(){return!0},d.isTransparent=function(){return!1},d.drawTransparent=function(t){};var y=0,b=[0,0,0],v=[0,0,0],x=[0,0,0];function I(t,e){var r=new u(t);return r.update(e),r}d.draw=function(t){t=t||m;for(var e=this.gl,r=t.model||l,n=t.view||l,i=t.projection||l,a=this.bounds,s=t._ortho||!1,u=o(r,n,i,a,s),d=u.cubeEdges,h=u.axis,I=n[12],B=n[13],C=n[14],F=n[15],A=(s?2:1)*this.pixelRatio*(i[3]*I+i[7]*B+i[11]*C+i[15]*F)/e.drawingBufferHeight,Q=0;Q<3;++Q)this.lastCubeProps.cubeEdges[Q]=d[Q],this.lastCubeProps.axis[Q]=h[Q];var _=g;for(Q=0;Q<3;++Q)f(g[Q],Q,this.bounds,d,h);e=this.gl;var w,U=p;for(Q=0;Q<3;++Q)this.backgroundEnable[Q]?U[Q]=h[Q]:U[Q]=0;for(this._background.draw(r,n,i,a,U,this.backgroundColor),this._lines.bind(r,n,i,this),Q=0;Q<3;++Q){var S=[0,0,0];h[Q]>0?S[Q]=a[1][Q]:S[Q]=a[0][Q];for(var E=0;E<2;++E){var L=(Q+1+E)%3,T=(Q+1+(1^E))%3;this.gridEnable[L]&&this._lines.drawGrid(L,T,this.bounds,S,this.gridColor[L],this.gridWidth[L]*this.pixelRatio)}for(E=0;E<2;++E)L=(Q+1+E)%3,T=(Q+1+(1^E))%3,this.zeroEnable[T]&&Math.min(a[0][T],a[1][T])<=0&&Math.max(a[0][T],a[1][T])>=0&&this._lines.drawZero(L,T,this.bounds,S,this.zeroLineColor[T],this.zeroLineWidth[T]*this.pixelRatio)}for(Q=0;Q<3;++Q){this.lineEnable[Q]&&this._lines.drawAxisLine(Q,this.bounds,_[Q].primalOffset,this.lineColor[Q],this.lineWidth[Q]*this.pixelRatio),this.lineMirror[Q]&&this._lines.drawAxisLine(Q,this.bounds,_[Q].mirrorOffset,this.lineColor[Q],this.lineWidth[Q]*this.pixelRatio);var R=c(b,_[Q].primalMinor),k=c(v,_[Q].mirrorMinor),G=this.lineTickLength;for(E=0;E<3;++E){var N=A/r[5*E];R[E]*=G[E]*N,k[E]*=G[E]*N}this.lineTickEnable[Q]&&this._lines.drawAxisTicks(Q,_[Q].primalOffset,R,this.lineTickColor[Q],this.lineTickWidth[Q]*this.pixelRatio),this.lineTickMirror[Q]&&this._lines.drawAxisTicks(Q,_[Q].mirrorOffset,k,this.lineTickColor[Q],this.lineTickWidth[Q]*this.pixelRatio)}this._lines.unbind(),this._text.bind(r,n,i,this.pixelRatio);var M,D,X=.5;function V(t){(D=[0,0,0])[t]=1}function W(t,e,r){var n=(t+1)%3,i=(t+2)%3,a=e[n],o=e[i],s=r[n],l=r[i];a>0&&l>0||a>0&&l<0||a<0&&l>0||a<0&&l<0?V(n):(o>0&&s>0||o>0&&s<0||o<0&&s>0||o<0&&s<0)&&V(i)}for(Q=0;Q<3;++Q){var Z=_[Q].primalMinor,O=_[Q].mirrorMinor,$=c(x,_[Q].primalOffset);for(E=0;E<3;++E)this.lineTickEnable[Q]&&($[E]+=A*Z[E]*Math.max(this.lineTickLength[E],0)/r[5*E]);var H=[0,0,0];if(H[Q]=1,this.tickEnable[Q]){for(-3600===this.tickAngle[Q]?(this.tickAngle[Q]=0,this.tickAlign[Q]="auto"):this.tickAlign[Q]=-1,M=1,"auto"===(w=[this.tickAlign[Q],X,M])[0]?w[0]=y:w[0]=parseInt(""+w[0]),D=[0,0,0],W(Q,Z,O),E=0;E<3;++E)$[E]+=A*Z[E]*this.tickPad[E]/r[5*E];this._text.drawTicks(Q,this.tickSize[Q],this.tickAngle[Q],$,this.tickColor[Q],H,D,w)}if(this.labelEnable[Q]){for(M=0,D=[0,0,0],this.labels[Q].length>4&&(V(Q),M=1),"auto"===(w=[this.labelAlign[Q],X,M])[0]?w[0]=y:w[0]=parseInt(""+w[0]),E=0;E<3;++E)$[E]+=A*Z[E]*this.labelPad[E]/r[5*E];$[Q]+=.5*(a[0][Q]+a[1][Q]),this._text.drawLabel(Q,this.labelSize[Q],this.labelAngle[Q],$,this.labelColor[Q],[0,0,0],D,w)}}this._text.unbind()},d.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(t,e,r){e.exports=l;var n=t("gl-buffer"),i=t("gl-vao"),a=t("./shaders").bg;function o(t,e,r,n){this.gl=t,this.buffer=e,this.vao=r,this.shader=n}var s=o.prototype;function l(t){for(var e=[],r=[],s=0,l=0;l<3;++l)for(var c=(l+1)%3,u=(l+2)%3,d=[0,0,0],h=[0,0,0],g=-1;g<=1;g+=2){r.push(s,s+2,s+1,s+1,s+2,s+3),d[l]=g,h[l]=g;for(var f=-1;f<=1;f+=2){d[c]=f;for(var p=-1;p<=1;p+=2)d[u]=p,e.push(d[0],d[1],d[2],h[0],h[1],h[2]),s+=1}var m=c;c=u,u=m}var y=n(t,new Float32Array(e)),b=n(t,new Uint16Array(r),t.ELEMENT_ARRAY_BUFFER),v=i(t,[{buffer:y,type:t.FLOAT,size:3,offset:0,stride:24},{buffer:y,type:t.FLOAT,size:3,offset:12,stride:24}],b),x=a(t);return x.attributes.position.location=0,x.attributes.normal.location=1,new o(t,y,v,x)}s.draw=function(t,e,r,n,i,a){for(var o=!1,s=0;s<3;++s)o=o||i[s];if(o){var l=this.gl;l.enable(l.POLYGON_OFFSET_FILL),l.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:t,view:e,projection:r,bounds:n,enable:i,colors:a},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),l.disable(l.POLYGON_OFFSET_FILL)}},s.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(t,e,r){e.exports=b;var n=t("bit-twiddle"),i=t("gl-mat4/multiply"),a=t("split-polygon"),o=t("robust-orientation"),s=new Array(16),l=new Array(8),c=new Array(8),u=new Array(3),d=[0,0,0];function h(t,e,r){for(var n=0;n<4;++n){t[n]=r[12+n];for(var i=0;i<3;++i)t[n]+=e[i]*r[4*i+n]}}!function(){for(var t=0;t<8;++t)l[t]=[1,1,1,1],c[t]=[1,1,1]}();var g=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function f(t){for(var e=0;e<g.length;++e)if((t=a.positive(t,g[e])).length<3)return 0;var r=t[0],n=r[0]/r[3],i=r[1]/r[3],o=0;for(e=1;e+1<t.length;++e){var s=t[e],l=t[e+1],c=s[0]/s[3]-n,u=s[1]/s[3]-i,d=l[0]/l[3]-n,h=l[1]/l[3]-i;o+=Math.abs(c*h-u*d)}return o}var p=[1,1,1],m=[0,0,0],y={cubeEdges:p,axis:m};function b(t,e,r,a,g){i(s,e,t),i(s,r,s);for(var b=0,v=0;v<2;++v){u[2]=a[v][2];for(var x=0;x<2;++x){u[1]=a[x][1];for(var I=0;I<2;++I)u[0]=a[I][0],h(l[b],u,s),b+=1}}var B=-1;for(v=0;v<8;++v){for(var C=l[v][3],F=0;F<3;++F)c[v][F]=l[v][F]/C;g&&(c[v][2]*=-1),C<0&&(B<0||c[v][2]<c[B][2])&&(B=v)}if(B<0){B=0;for(var A=0;A<3;++A){for(var Q=(A+2)%3,_=(A+1)%3,w=-1,U=-1,S=0;S<2;++S){var E=(T=S<<A)+(S<<Q)+(1-S<<_),L=T+(1-S<<Q)+(S<<_);o(c[T],c[E],c[L],d)<0||(S?w=1:U=1)}if(w<0||U<0)U>w&&(B|=1<<A);else{for(S=0;S<2;++S){E=(T=S<<A)+(S<<Q)+(1-S<<_),L=T+(1-S<<Q)+(S<<_);var T,R=f([l[T],l[E],l[L],l[T+(1<<Q)+(1<<_)]]);S?w=R:U=R}U>w&&(B|=1<<A)}}}var k=7^B,G=-1;for(v=0;v<8;++v)v!==B&&v!==k&&(G<0||c[G][1]>c[v][1])&&(G=v);var N=-1;for(v=0;v<3;++v)(D=G^1<<v)!==B&&D!==k&&(N<0&&(N=D),(_=c[D])[0]<c[N][0]&&(N=D));var M=-1;for(v=0;v<3;++v){var D;(D=G^1<<v)!==B&&D!==k&&D!==N&&(M<0&&(M=D),(_=c[D])[0]>c[M][0]&&(M=D))}var X=p;X[0]=X[1]=X[2]=0,X[n.log2(N^G)]=G&N,X[n.log2(G^M)]=G&M;var V=7^M;V===B||V===k?(V=7^N,X[n.log2(M^V)]=V&M):X[n.log2(N^V)]=V&N;var W=m,Z=B;for(A=0;A<3;++A)W[A]=Z&1<<A?-1:1;return y}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(t,e,r){e.exports=p;var n=t("gl-buffer"),i=t("gl-vao"),a=t("./shaders").line,o=[0,0,0],s=[0,0,0],l=[0,0,0],c=[0,0,0],u=[1,1];function d(t){return t[0]=t[1]=t[2]=0,t}function h(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function g(t,e,r,n,i,a,o,s){this.gl=t,this.vertBuffer=e,this.vao=r,this.shader=n,this.tickCount=i,this.tickOffset=a,this.gridCount=o,this.gridOffset=s}var f=g.prototype;function p(t,e,r){var o=[],s=[0,0,0],l=[0,0,0],c=[0,0,0],u=[0,0,0];o.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var d=0;d<3;++d){for(var h=o.length/3|0,f=0;f<r[d].length;++f){var p=+r[d][f].x;o.push(p,0,1,p,1,1,p,0,-1,p,0,-1,p,1,1,p,1,-1)}var m=o.length/3|0;s[d]=h,l[d]=m-h,h=o.length/3|0;for(var y=0;y<r[d].length;++y)p=+r[d][y].x,o.push(p,0,1,p,1,1,p,0,-1,p,0,-1,p,1,1,p,1,-1);m=o.length/3|0,c[d]=h,u[d]=m-h}var b=n(t,new Float32Array(o)),v=i(t,[{buffer:b,type:t.FLOAT,size:3,stride:0,offset:0}]),x=a(t);return x.attributes.position.location=0,new g(t,b,v,x,l,s,u,c)}f.bind=function(t,e,r){this.shader.bind(),this.shader.uniforms.model=t,this.shader.uniforms.view=e,this.shader.uniforms.projection=r,u[0]=this.gl.drawingBufferWidth,u[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=u,this.vao.bind()},f.unbind=function(){this.vao.unbind()},f.drawAxisLine=function(t,e,r,n,i){var a=d(s);this.shader.uniforms.majorAxis=s,a[t]=e[1][t]-e[0][t],this.shader.uniforms.minorAxis=a;var o,u=h(c,r);u[t]+=e[0][t],this.shader.uniforms.offset=u,this.shader.uniforms.lineWidth=i,this.shader.uniforms.color=n,(o=d(l))[(t+2)%3]=1,this.shader.uniforms.screenAxis=o,this.vao.draw(this.gl.TRIANGLES,6),(o=d(l))[(t+1)%3]=1,this.shader.uniforms.screenAxis=o,this.vao.draw(this.gl.TRIANGLES,6)},f.drawAxisTicks=function(t,e,r,n,i){if(this.tickCount[t]){var a=d(o);a[t]=1,this.shader.uniforms.majorAxis=a,this.shader.uniforms.offset=e,this.shader.uniforms.minorAxis=r,this.shader.uniforms.color=n,this.shader.uniforms.lineWidth=i;var s=d(l);s[t]=1,this.shader.uniforms.screenAxis=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[t],this.tickOffset[t])}},f.drawGrid=function(t,e,r,n,i,a){if(this.gridCount[t]){var u=d(s);u[e]=r[1][e]-r[0][e],this.shader.uniforms.minorAxis=u;var g=h(c,n);g[e]+=r[0][e],this.shader.uniforms.offset=g;var f=d(o);f[t]=1,this.shader.uniforms.majorAxis=f;var p=d(l);p[t]=1,this.shader.uniforms.screenAxis=p,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,this.gridCount[t],this.gridOffset[t])}},f.drawZero=function(t,e,r,n,i,a){var o=d(s);this.shader.uniforms.majorAxis=o,o[t]=r[1][t]-r[0][t],this.shader.uniforms.minorAxis=o;var u=h(c,n);u[t]+=r[0][t],this.shader.uniforms.offset=u;var g=d(l);g[e]=1,this.shader.uniforms.screenAxis=g,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,6)},f.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(t,e,r){var n=t("glslify"),i=t("gl-shader"),a=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),o=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);r.line=function(t){return i(t,a,o,null,[{name:"position",type:"vec3"}])};var s=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),l=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);r.text=function(t){return i(t,s,l,null,[{name:"position",type:"vec3"}])};var c=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),u=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);r.bg=function(t){return i(t,c,u,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(t,e,r){(function(r){(function(){e.exports=f;var n=t("gl-buffer"),i=t("gl-vao"),a=t("vectorize-text"),o=t("./shaders").text,s=window||r.global||{},l=s.__TEXT_CACHE||{};s.__TEXT_CACHE={};var c=3;function u(t,e,r,n){this.gl=t,this.shader=e,this.buffer=r,this.vao=n,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var d=u.prototype,h=[0,0];function g(t,e){try{return a(t,e)}catch(e){return console.warn('error vectorizing text:"'+t+'" error:',e),{cells:[],positions:[]}}}function f(t,e,r,a,s,l){var c=n(t),d=i(t,[{buffer:c,size:3}]),h=o(t);h.attributes.position.location=0;var g=new u(t,h,c,d);return g.update(e,r,a,s,l),g}d.bind=function(t,e,r,n){this.vao.bind(),this.shader.bind();var i=this.shader.uniforms;i.model=t,i.view=e,i.projection=r,i.pixelScale=n,h[0]=this.gl.drawingBufferWidth,h[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=h},d.unbind=function(){this.vao.unbind()},d.update=function(t,e,r,n,i){var a=[];function o(t,e,r,n,i,o){var s=l[r];s||(s=l[r]={});var c=s[e];c||(c=s[e]=g(e,{triangles:!0,font:r,textAlign:"center",textBaseline:"middle",lineSpacing:i,styletags:o}));for(var u=(n||12)/12,d=c.positions,h=c.cells,f=0,p=h.length;f<p;++f)for(var m=h[f],y=2;y>=0;--y){var b=d[m[y]];a.push(u*b[0],-u*b[1],t)}}for(var s=[0,0,0],u=[0,0,0],d=[0,0,0],h=[0,0,0],f=1.25,p={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},m=0;m<3;++m){d[m]=a.length/c|0,o(.5*(t[0][m]+t[1][m]),e[m],r[m],12,f,p),h[m]=(a.length/c|0)-d[m],s[m]=a.length/c|0;for(var y=0;y<n[m].length;++y)n[m][y].text&&o(n[m][y].x,n[m][y].text,n[m][y].font||i,n[m][y].fontSize||12,f,p);u[m]=(a.length/c|0)-s[m]}this.buffer.update(a),this.tickOffset=s,this.tickCount=u,this.labelOffset=d,this.labelCount=h},d.drawTicks=function(t,e,r,n,i,a,o,s){this.tickCount[t]&&(this.shader.uniforms.axis=a,this.shader.uniforms.color=i,this.shader.uniforms.angle=r,this.shader.uniforms.scale=e,this.shader.uniforms.offset=n,this.shader.uniforms.alignDir=o,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[t],this.tickOffset[t]))},d.drawLabel=function(t,e,r,n,i,a,o,s){this.labelCount[t]&&(this.shader.uniforms.axis=a,this.shader.uniforms.color=i,this.shader.uniforms.angle=r,this.shader.uniforms.scale=e,this.shader.uniforms.offset=n,this.shader.uniforms.alignDir=o,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.labelCount[t],this.labelOffset[t]))},d.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this)}).call(this,t("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(t,e,r){function n(t,e){var r=t+"",n=r.indexOf("."),i=0;n>=0&&(i=r.length-n-1);var a=Math.pow(10,i),o=Math.round(t*e*a),s=o+"";if(s.indexOf("e")>=0)return s;var l=o/a,c=o%a;o<0?(l=0|-Math.ceil(l),c=0|-c):(l=0|Math.floor(l),c|=0);var u=""+l;if(o<0&&(u="-"+u),i){for(var d=""+c;d.length<i;)d="0"+d;return u+"."+d}return u}function i(t,e){for(var r=[],i=0;i<3;++i){var a=[];t[0][i],t[1][i];for(var o=0;o*e[i]<=t[1][i];++o)a.push({x:o*e[i],text:n(e[i],o)});for(o=-1;o*e[i]>=t[0][i];--o)a.push({x:o*e[i],text:n(e[i],o)});r.push(a)}return r}function a(t,e){for(var r=0;r<3;++r){if(t[r].length!==e[r].length)return!1;for(var n=0;n<t[r].length;++n){var i=t[r][n],a=e[r][n];if(i.x!==a.x||i.text!==a.text||i.font!==a.font||i.fontColor!==a.fontColor||i.fontSize!==a.fontSize||i.dx!==a.dx||i.dy!==a.dy)return!1}}return!0}r.create=i,r.equal=a},{}],77:[function(t,e,r){e.exports=y;var n=t("extract-frustum-planes"),i=t("split-polygon"),a=t("./lib/cube.js"),o=t("gl-mat4/multiply"),s=t("gl-mat4/transpose"),l=t("gl-vec4/transformMat4"),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),u=new Float32Array(16);function d(t,e,r){this.lo=t,this.hi=e,this.pixelsPerDataUnit=r}var h=[0,0,0,1],g=[0,0,0,1];function f(t,e,r,n,i){for(var a=0;a<3;++a){for(var o=h,s=g,c=0;c<3;++c)s[c]=o[c]=r[c];s[3]=o[3]=1,s[a]+=1,l(s,s,e),s[3]<0&&(t[a]=1/0),o[a]-=1,l(o,o,e),o[3]<0&&(t[a]=1/0);var u=(o[0]/o[3]-s[0]/s[3])*n,d=(o[1]/o[3]-s[1]/s[3])*i;t[a]=.25*Math.sqrt(u*u+d*d)}return t}var p=[new d(1/0,-1/0,1/0),new d(1/0,-1/0,1/0),new d(1/0,-1/0,1/0)],m=[0,0,0];function y(t,e,r,l,d){var h=e.model||c,g=e.view||c,y=e.projection||c,b=e._ortho||!1,v=t.bounds,x=(d=d||a(h,g,y,v,b)).axis;o(u,g,h),o(u,y,u);for(var I=p,B=0;B<3;++B)I[B].lo=1/0,I[B].hi=-1/0,I[B].pixelsPerDataUnit=1/0;var C=n(s(u,u));s(u,u);for(var F=0;F<3;++F){var A=(F+1)%3,Q=(F+2)%3,_=m;t:for(B=0;B<2;++B){var w=[];if(x[F]<0!=!!B){_[F]=v[B][F];for(var U=0;U<2;++U){_[A]=v[U^B][A];for(var S=0;S<2;++S)_[Q]=v[S^U^B][Q],w.push(_.slice())}var E=b?5:4;for(U=E;U===E;++U){if(0===w.length)continue t;w=i.positive(w,C[U])}for(U=0;U<w.length;++U){Q=w[U];var L=f(m,u,Q,r,l);for(S=0;S<3;++S)I[S].lo=Math.min(I[S].lo,Q[S]),I[S].hi=Math.max(I[S].hi,Q[S]),S!==F&&(I[S].pixelsPerDataUnit=Math.min(I[S].pixelsPerDataUnit,Math.abs(L[S])))}}}}return I}},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(t,e,r){var n=t("typedarray-pool"),i=t("ndarray-ops"),a=t("ndarray"),o=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function s(t,e,r,n,i){this.gl=t,this.type=e,this.handle=r,this.length=n,this.usage=i}var l=s.prototype;function c(t,e,r,n,i,a){var o=i.length*i.BYTES_PER_ELEMENT;if(a<0)return t.bufferData(e,i,n),o;if(o+a>r)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return t.bufferSubData(e,a,i),r}function u(t,e){for(var r=n.malloc(t.length,e),i=t.length,a=0;a<i;++a)r[a]=t[a];return r}function d(t,e){for(var r=1,n=e.length-1;n>=0;--n){if(e[n]!==r)return!1;r*=t[n]}return!0}function h(t,e,r,n){if(r=r||t.ARRAY_BUFFER,n=n||t.DYNAMIC_DRAW,r!==t.ARRAY_BUFFER&&r!==t.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(n!==t.DYNAMIC_DRAW&&n!==t.STATIC_DRAW&&n!==t.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var i=t.createBuffer(),a=new s(t,r,i,0,n);return a.update(e),a}l.bind=function(){this.gl.bindBuffer(this.type,this.handle)},l.unbind=function(){this.gl.bindBuffer(this.type,null)},l.dispose=function(){this.gl.deleteBuffer(this.handle)},l.update=function(t,e){if("number"!=typeof e&&(e=-1),this.bind(),"object"==typeof t&&void 0!==t.shape){var r=t.dtype;if(o.indexOf(r)<0&&(r="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(r=gl.getExtension("OES_element_index_uint")&&"uint16"!==r?"uint32":"uint16"),r===t.dtype&&d(t.shape,t.stride))0===t.offset&&t.data.length===t.shape[0]?this.length=c(this.gl,this.type,this.length,this.usage,t.data,e):this.length=c(this.gl,this.type,this.length,this.usage,t.data.subarray(t.offset,t.shape[0]),e);else{var s=n.malloc(t.size,r),l=a(s,t.shape);i.assign(l,t),this.length=c(this.gl,this.type,this.length,this.usage,e<0?s:s.subarray(0,t.size),e),n.free(s)}}else if(Array.isArray(t)){var h;h=this.type===this.gl.ELEMENT_ARRAY_BUFFER?u(t,"uint16"):u(t,"float32"),this.length=c(this.gl,this.type,this.length,this.usage,e<0?h:h.subarray(0,t.length),e),n.free(h)}else if("object"==typeof t&&"number"==typeof t.length)this.length=c(this.gl,this.type,this.length,this.usage,t,e);else{if("number"!=typeof t&&void 0!==t)throw new Error("gl-buffer: Invalid data type");if(e>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(t|=0)<=0&&(t=1),this.gl.bufferData(this.type,0|t,this.usage),this.length=t}},e.exports=h},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(t,e,r){var n=t("gl-vec3");e.exports=function(t,e){var r=t.positions,i=t.vectors,a={positions:[],vertexIntensity:[],vertexIntensityBounds:t.vertexIntensityBounds,vectors:[],cells:[],coneOffset:t.coneOffset,colormap:t.colormap};if(0===t.positions.length)return e&&(e[0]=[0,0,0],e[1]=[0,0,0]),a;for(var o=0,s=1/0,l=-1/0,c=1/0,u=-1/0,d=1/0,h=-1/0,g=null,f=null,p=[],m=1/0,y=!1,b=0;b<r.length;b++){var v=r[b];s=Math.min(v[0],s),l=Math.max(v[0],l),c=Math.min(v[1],c),u=Math.max(v[1],u),d=Math.min(v[2],d),h=Math.max(v[2],h);var x=i[b];if(n.length(x)>o&&(o=n.length(x)),b){var I=2*n.distance(g,v)/(n.length(f)+n.length(x));I?(m=Math.min(m,I),y=!1):y=!0}y||(g=v,f=x),p.push(x)}var B=[s,c,d],C=[l,u,h];e&&(e[0]=B,e[1]=C),0===o&&(o=1);var F=1/o;isFinite(m)||(m=1),a.vectorScale=m;var A=t.coneSize||.5;t.absoluteConeSize&&(A=t.absoluteConeSize*F),a.coneScale=A,b=0;for(var Q=0;b<r.length;b++)for(var _=(v=r[b])[0],w=v[1],U=v[2],S=p[b],E=n.length(S)*F,L=0,T=8;L<T;L++){a.positions.push([_,w,U,Q++]),a.positions.push([_,w,U,Q++]),a.positions.push([_,w,U,Q++]),a.positions.push([_,w,U,Q++]),a.positions.push([_,w,U,Q++]),a.positions.push([_,w,U,Q++]),a.vectors.push(S),a.vectors.push(S),a.vectors.push(S),a.vectors.push(S),a.vectors.push(S),a.vectors.push(S),a.vertexIntensity.push(E,E,E),a.vertexIntensity.push(E,E,E);var R=a.positions.length;a.cells.push([R-6,R-5,R-4],[R-3,R-2,R-1])}return a};var i=t("./lib/shaders");e.exports.createMesh=t("./create_mesh"),e.exports.createConeMesh=function(t,r){return e.exports.createMesh(t,r,{shaders:i,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(t,e,r){var n=t("gl-shader"),i=t("gl-buffer"),a=t("gl-vao"),o=t("gl-texture2d"),s=t("gl-mat4/multiply"),l=t("gl-mat4/invert"),c=t("ndarray"),u=t("colormap"),d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function h(t,e,r,n,i,a,o,s,l,c,u){this.gl=t,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=e,this.dirty=!0,this.triShader=r,this.pickShader=n,this.trianglePositions=i,this.triangleVectors=a,this.triangleColors=s,this.triangleUVs=l,this.triangleIds=o,this.triangleVAO=c,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=u,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=d,this._view=d,this._projection=d,this._resolution=[1,1]}var g=h.prototype;function f(t){for(var e=u({colormap:t,nshades:256,format:"rgba"}),r=new Uint8Array(1024),n=0;n<256;++n){for(var i=e[n],a=0;a<3;++a)r[4*n+a]=i[a];r[4*n+3]=255*i[3]}return c(r,[256,256,4],[4,0,1])}function p(t){for(var e=t.length,r=new Array(e),n=0;n<e;++n)r[n]=t[n][2];return r}function m(t,e){var r=n(t,e.meshShader.vertex,e.meshShader.fragment,null,e.meshShader.attributes);return r.attributes.position.location=0,r.attributes.color.location=2,r.attributes.uv.location=3,r.attributes.vector.location=4,r}function y(t,e){var r=n(t,e.pickShader.vertex,e.pickShader.fragment,null,e.pickShader.attributes);return r.attributes.position.location=0,r.attributes.id.location=1,r.attributes.vector.location=4,r}function b(t,e,r){var n=r.shaders;1===arguments.length&&(t=(e=t).gl);var s=m(t,n),l=y(t,n),u=o(t,c(new Uint8Array([255,255,255,255]),[1,1,4]));u.generateMipmap(),u.minFilter=t.LINEAR_MIPMAP_LINEAR,u.magFilter=t.LINEAR;var d=i(t),g=i(t),f=i(t),p=i(t),b=i(t),v=new h(t,u,s,l,d,g,b,f,p,a(t,[{buffer:d,type:t.FLOAT,size:4},{buffer:b,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:f,type:t.FLOAT,size:4},{buffer:p,type:t.FLOAT,size:2},{buffer:g,type:t.FLOAT,size:4}]),r.traceType||"cone");return v.update(e),v}g.isOpaque=function(){return this.opacity>=1},g.isTransparent=function(){return this.opacity<1},g.pickSlots=1,g.setPickBase=function(t){this.pickId=t},g.update=function(t){t=t||{};var e=this.gl;this.dirty=!0,"lightPosition"in t&&(this.lightPosition=t.lightPosition),"opacity"in t&&(this.opacity=t.opacity),"ambient"in t&&(this.ambientLight=t.ambient),"diffuse"in t&&(this.diffuseLight=t.diffuse),"specular"in t&&(this.specularLight=t.specular),"roughness"in t&&(this.roughness=t.roughness),"fresnel"in t&&(this.fresnel=t.fresnel),void 0!==t.tubeScale&&(this.tubeScale=t.tubeScale),void 0!==t.vectorScale&&(this.vectorScale=t.vectorScale),void 0!==t.coneScale&&(this.coneScale=t.coneScale),void 0!==t.coneOffset&&(this.coneOffset=t.coneOffset),t.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=e.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=e.LINEAR,this.texture.setPixels(f(t.colormap)),this.texture.generateMipmap());var r=t.cells,n=t.positions,i=t.vectors;if(n&&r&&i){var a=[],o=[],s=[],l=[],c=[];this.cells=r,this.positions=n,this.vectors=i;var u=t.meshColor||[1,1,1,1],d=t.vertexIntensity,h=1/0,g=-1/0;if(d)if(t.vertexIntensityBounds)h=+t.vertexIntensityBounds[0],g=+t.vertexIntensityBounds[1];else for(var m=0;m<d.length;++m){var y=d[m];h=Math.min(h,y),g=Math.max(g,y)}else for(m=0;m<n.length;++m)y=n[m][2],h=Math.min(h,y),g=Math.max(g,y);for(this.intensity=d||p(n),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],m=0;m<n.length;++m)for(var b=n[m],v=0;v<3;++v)!isNaN(b[v])&&isFinite(b[v])&&(this.bounds[0][v]=Math.min(this.bounds[0][v],b[v]),this.bounds[1][v]=Math.max(this.bounds[1][v],b[v]));var x=0;t:for(m=0;m<r.length;++m){var I=r[m];if(3===I.length){for(v=0;v<3;++v){b=n[C=I[v]];for(var B=0;B<3;++B)if(isNaN(b[B])||!isFinite(b[B]))continue t}for(v=0;v<3;++v){var C;b=n[C=I[2-v]],a.push(b[0],b[1],b[2],b[3]);var F=i[C];o.push(F[0],F[1],F[2],F[3]||0);var A,Q=u;3===Q.length?s.push(Q[0],Q[1],Q[2],1):s.push(Q[0],Q[1],Q[2],Q[3]),A=d?[(d[C]-h)/(g-h),0]:[(b[2]-h)/(g-h),0],l.push(A[0],A[1]),c.push(m)}x+=1}}this.triangleCount=x,this.trianglePositions.update(a),this.triangleVectors.update(o),this.triangleColors.update(s),this.triangleUVs.update(l),this.triangleIds.update(new Uint32Array(c))}},g.drawTransparent=g.draw=function(t){t=t||{};for(var e=this.gl,r=t.model||d,n=t.view||d,i=t.projection||d,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);var c={model:r,view:n,projection:i,inverseModel:d.slice(),clipBounds:a,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};c.inverseModel=l(c.inverseModel,c.model),e.disable(e.CULL_FACE),this.texture.bind(0);var u=new Array(16);for(s(u,c.view,c.model),s(u,c.projection,u),l(u,u),o=0;o<3;++o)c.eyePosition[o]=u[12+o]/u[15];var h=u[15];for(o=0;o<3;++o)h+=this.lightPosition[o]*u[4*o+3];for(o=0;o<3;++o){for(var g=u[12+o],f=0;f<3;++f)g+=u[4*f+o]*this.lightPosition[f];c.lightPosition[o]=g/h}if(this.triangleCount>0){var p=this.triShader;p.bind(),p.uniforms=c,this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},g.drawPick=function(t){t=t||{};for(var e=this.gl,r=t.model||d,n=t.view||d,i=t.projection||d,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);this._model=[].slice.call(r),this._view=[].slice.call(n),this._projection=[].slice.call(i),this._resolution=[e.drawingBufferWidth,e.drawingBufferHeight];var s={model:r,view:n,projection:i,clipBounds:a,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},l=this.pickShader;l.bind(),l.uniforms=s,this.triangleCount>0&&(this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},g.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=t.value[0]+256*t.value[1]+65536*t.value[2],r=this.cells[e],n=this.positions[r[1]].slice(0,3),i={position:n,dataCoordinate:n,index:Math.floor(r[1]/48)};return"cone"===this.traceType?i.index=Math.floor(r[1]/48):"streamtube"===this.traceType&&(i.intensity=this.intensity[r[1]],i.velocity=this.vectors[r[1]].slice(0,3),i.divergence=this.vectors[r[1]][3],i.index=e),i},g.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},e.exports=b},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(t,e,r){var n=t("glslify"),i=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),o=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);r.meshShader={vertex:i,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},r.pickShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(t,e,r){e.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(t,e,r){var n=t("./1.0/numbers");e.exports=function(t){return n[t]}},{"./1.0/numbers":82}],84:[function(t,e,r){e.exports=h;var n=t("gl-buffer"),i=t("gl-vao"),a=t("./shaders/index"),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(t,e,r,n){this.gl=t,this.shader=n,this.buffer=e,this.vao=r,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var l=s.prototype;function c(t,e){for(var r=0;r<3;++r)t[0][r]=Math.min(t[0][r],e[r]),t[1][r]=Math.max(t[1][r],e[r])}l.isOpaque=function(){return!this.hasAlpha},l.isTransparent=function(){return this.hasAlpha},l.drawTransparent=l.draw=function(t){var e=this.gl,r=this.shader.uniforms;this.shader.bind();var n=r.view=t.view||o,i=r.projection=t.projection||o;r.model=t.model||o,r.clipBounds=this.clipBounds,r.opacity=this.opacity;var a=n[12],s=n[13],l=n[14],c=n[15],u=(t._ortho?2:1)*this.pixelRatio*(i[3]*a+i[7]*s+i[11]*l+i[15]*c)/e.drawingBufferHeight;this.vao.bind();for(var d=0;d<3;++d)e.lineWidth(this.lineWidth[d]*this.pixelRatio),r.capSize=this.capSize[d]*u,this.lineCount[d]&&e.drawArrays(e.LINES,this.lineOffset[d],this.lineCount[d]);this.vao.unbind()};var u=function(){for(var t=new Array(3),e=0;e<3;++e){for(var r=[],n=1;n<=2;++n)for(var i=-1;i<=1;i+=2){var a=[0,0,0];a[(n+e)%3]=i,r.push(a)}t[e]=r}return t}();function d(t,e,r,n){for(var i=u[n],a=0;a<i.length;++a){var o=i[a];t.push(e[0],e[1],e[2],r[0],r[1],r[2],r[3],o[0],o[1],o[2])}return i.length}function h(t){var e=t.gl,r=n(e),o=i(e,[{buffer:r,type:e.FLOAT,size:3,offset:0,stride:40},{buffer:r,type:e.FLOAT,size:4,offset:12,stride:40},{buffer:r,type:e.FLOAT,size:3,offset:28,stride:40}]),l=a(e);l.attributes.position.location=0,l.attributes.color.location=1,l.attributes.offset.location=2;var c=new s(e,r,o,l);return c.update(t),c}l.update=function(t){"lineWidth"in(t=t||{})&&(this.lineWidth=t.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in t&&(this.capSize=t.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in t&&(this.opacity=+t.opacity,this.opacity<1&&(this.hasAlpha=!0));var e=t.color||[[0,0,0],[0,0,0],[0,0,0]],r=t.position,n=t.error;if(Array.isArray(e[0])||(e=[e,e,e]),r&&n){var i=[],a=r.length,o=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var s=0;s<3;++s){this.lineOffset[s]=o;t:for(var l=0;l<a;++l){for(var u=r[l],h=0;h<3;++h)if(isNaN(u[h])||!isFinite(u[h]))continue t;var g,f=n[l],p=e[s];Array.isArray(p[0])&&(p=e[l]),3===p.length?p=[p[0],p[1],p[2],1]:4===p.length&&(p=[p[0],p[1],p[2],p[3]],!this.hasAlpha&&p[3]<1&&(this.hasAlpha=!0)),isNaN(f[0][s])||isNaN(f[1][s])||(f[0][s]<0&&((g=u.slice())[s]+=f[0][s],i.push(u[0],u[1],u[2],p[0],p[1],p[2],p[3],0,0,0,g[0],g[1],g[2],p[0],p[1],p[2],p[3],0,0,0),c(this.bounds,g),o+=2+d(i,g,p,s)),f[1][s]>0&&((g=u.slice())[s]+=f[1][s],i.push(u[0],u[1],u[2],p[0],p[1],p[2],p[3],0,0,0,g[0],g[1],g[2],p[0],p[1],p[2],p[3],0,0,0),c(this.bounds,g),o+=2+d(i,g,p,s)))}this.lineCount[s]=o-this.lineOffset[s]}this.buffer.update(i)}},l.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(t,e,r){var n=t("glslify"),i=t("gl-shader"),a=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),o=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);e.exports=function(t){return i(t,a,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(t,e,r){var n=t("gl-texture2d");e.exports=v;var i,a,o,s,l=null;function c(t){return[t.getParameter(t.FRAMEBUFFER_BINDING),t.getParameter(t.RENDERBUFFER_BINDING),t.getParameter(t.TEXTURE_BINDING_2D)]}function u(t,e){t.bindFramebuffer(t.FRAMEBUFFER,e[0]),t.bindRenderbuffer(t.RENDERBUFFER,e[1]),t.bindTexture(t.TEXTURE_2D,e[2])}function d(t,e){var r=t.getParameter(e.MAX_COLOR_ATTACHMENTS_WEBGL);l=new Array(r+1);for(var n=0;n<=r;++n){for(var i=new Array(r),a=0;a<n;++a)i[a]=t.COLOR_ATTACHMENT0+a;for(a=n;a<r;++a)i[a]=t.NONE;l[n]=i}}function h(t){switch(t){case i:throw new Error("gl-fbo: Framebuffer unsupported");case a:throw new Error("gl-fbo: Framebuffer incomplete attachment");case o:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case s:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function g(t,e,r,i,a,o){if(!i)return null;var s=n(t,e,r,a,i);return s.magFilter=t.NEAREST,s.minFilter=t.NEAREST,s.mipSamples=1,s.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,o,t.TEXTURE_2D,s.handle,0),s}function f(t,e,r,n,i){var a=t.createRenderbuffer();return t.bindRenderbuffer(t.RENDERBUFFER,a),t.renderbufferStorage(t.RENDERBUFFER,n,e,r),t.framebufferRenderbuffer(t.FRAMEBUFFER,i,t.RENDERBUFFER,a),a}function p(t){var e=c(t.gl),r=t.gl,n=t.handle=r.createFramebuffer(),i=t._shape[0],a=t._shape[1],o=t.color.length,s=t._ext,d=t._useStencil,p=t._useDepth,m=t._colorType;r.bindFramebuffer(r.FRAMEBUFFER,n);for(var y=0;y<o;++y)t.color[y]=g(r,i,a,m,r.RGBA,r.COLOR_ATTACHMENT0+y);0===o?(t._color_rb=f(r,i,a,r.RGBA4,r.COLOR_ATTACHMENT0),s&&s.drawBuffersWEBGL(l[0])):o>1&&s.drawBuffersWEBGL(l[o]);var b=r.getExtension("WEBGL_depth_texture");b?d?t.depth=g(r,i,a,b.UNSIGNED_INT_24_8_WEBGL,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):p&&(t.depth=g(r,i,a,r.UNSIGNED_SHORT,r.DEPTH_COMPONENT,r.DEPTH_ATTACHMENT)):p&&d?t._depth_rb=f(r,i,a,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):p?t._depth_rb=f(r,i,a,r.DEPTH_COMPONENT16,r.DEPTH_ATTACHMENT):d&&(t._depth_rb=f(r,i,a,r.STENCIL_INDEX,r.STENCIL_ATTACHMENT));var v=r.checkFramebufferStatus(r.FRAMEBUFFER);if(v!==r.FRAMEBUFFER_COMPLETE){for(t._destroyed=!0,r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteFramebuffer(t.handle),t.handle=null,t.depth&&(t.depth.dispose(),t.depth=null),t._depth_rb&&(r.deleteRenderbuffer(t._depth_rb),t._depth_rb=null),y=0;y<t.color.length;++y)t.color[y].dispose(),t.color[y]=null;t._color_rb&&(r.deleteRenderbuffer(t._color_rb),t._color_rb=null),u(r,e),h(v)}u(r,e)}function m(t,e,r,n,i,a,o,s){this.gl=t,this._shape=[0|e,0|r],this._destroyed=!1,this._ext=s,this.color=new Array(i);for(var l=0;l<i;++l)this.color[l]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=n,this._useDepth=a,this._useStencil=o;var c=this,u=[0|e,0|r];Object.defineProperties(u,{0:{get:function(){return c._shape[0]},set:function(t){return c.width=t}},1:{get:function(){return c._shape[1]},set:function(t){return c.height=t}}}),this._shapeVector=u,p(this)}var y=m.prototype;function b(t,e,r){if(t._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(t._shape[0]!==e||t._shape[1]!==r){var n=t.gl,i=n.getParameter(n.MAX_RENDERBUFFER_SIZE);if(e<0||e>i||r<0||r>i)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");t._shape[0]=e,t._shape[1]=r;for(var a=c(n),o=0;o<t.color.length;++o)t.color[o].shape=t._shape;t._color_rb&&(n.bindRenderbuffer(n.RENDERBUFFER,t._color_rb),n.renderbufferStorage(n.RENDERBUFFER,n.RGBA4,t._shape[0],t._shape[1])),t.depth&&(t.depth.shape=t._shape),t._depth_rb&&(n.bindRenderbuffer(n.RENDERBUFFER,t._depth_rb),t._useDepth&&t._useStencil?n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t._shape[0],t._shape[1]):t._useDepth?n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t._shape[0],t._shape[1]):t._useStencil&&n.renderbufferStorage(n.RENDERBUFFER,n.STENCIL_INDEX,t._shape[0],t._shape[1])),n.bindFramebuffer(n.FRAMEBUFFER,t.handle);var s=n.checkFramebufferStatus(n.FRAMEBUFFER);s!==n.FRAMEBUFFER_COMPLETE&&(t.dispose(),u(n,a),h(s)),u(n,a)}}function v(t,e,r,n){i||(i=t.FRAMEBUFFER_UNSUPPORTED,a=t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,o=t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,s=t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var c=t.getExtension("WEBGL_draw_buffers");if(!l&&c&&d(t,c),Array.isArray(e)&&(n=r,r=0|e[1],e=0|e[0]),"number"!=typeof e)throw new Error("gl-fbo: Missing shape parameter");var u=t.getParameter(t.MAX_RENDERBUFFER_SIZE);if(e<0||e>u||r<0||r>u)throw new Error("gl-fbo: Parameters are too large for FBO");var h=1;if("color"in(n=n||{})){if((h=Math.max(0|n.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(h>1){if(!c)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(h>t.getParameter(c.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+h+" draw buffers")}}var g=t.UNSIGNED_BYTE,f=t.getExtension("OES_texture_float");if(n.float&&h>0){if(!f)throw new Error("gl-fbo: Context does not support floating point textures");g=t.FLOAT}else n.preferFloat&&h>0&&f&&(g=t.FLOAT);var p=!0;"depth"in n&&(p=!!n.depth);var y=!1;return"stencil"in n&&(y=!!n.stencil),new m(t,e,r,g,h,p,y,c)}Object.defineProperties(y,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(t){if(Array.isArray(t)||(t=[0|t,0|t]),2!==t.length)throw new Error("gl-fbo: Shape vector must be length 2");var e=0|t[0],r=0|t[1];return b(this,e,r),[e,r]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(t){return b(this,t|=0,this._shape[1]),t},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(t){return t|=0,b(this,this._shape[0],t),t},enumerable:!1}}),y.bind=function(){if(!this._destroyed){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.handle),t.viewport(0,0,this._shape[0],this._shape[1])}},y.dispose=function(){if(!this._destroyed){this._destroyed=!0;var t=this.gl;t.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(t.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var e=0;e<this.color.length;++e)this.color[e].dispose(),this.color[e]=null;this._color_rb&&(t.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":146}],87:[function(t,e,r){var n=t("sprintf-js").sprintf,i=t("gl-constants/lookup"),a=t("glsl-shader-name"),o=t("add-line-numbers");function s(t,e,r){var s=a(e)||"of unknown name (see npm glsl-shader-name)",l="unknown type";void 0!==r&&(l=r===i.FRAGMENT_SHADER?"fragment":"vertex");for(var c=n("Error compiling %s shader %s:\n",l,s),u=n("%s%s",c,t),d=t.split("\n"),h={},g=0;g<d.length;g++){var f=d[g];if(""!==f&&"\0"!==f){var p=parseInt(f.split(":")[2]);if(isNaN(p))throw new Error(n("Could not parse error: %s",f));h[p]=f}}var m=o(e).split("\n");for(g=0;g<m.length;g++)if((h[g+3]||h[g+2]||h[g+1])&&(c+=m[g]+"\n",h[g+1])){var y=h[g+1];y=y.substr(y.split(":",3).join(":").length+1).trim(),c+=n("^^^ %s\n\n",y)}return{long:c.trim(),short:u.trim()}}e.exports=s},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(t,e,r){e.exports=g;var n=t("binary-search-bounds"),i=t("iota-array"),a=t("typedarray-pool"),o=t("gl-shader"),s=t("gl-buffer"),l=t("./lib/shaders");function c(t,e,r,n,i,a,o){this.plot=t,this.shader=e,this.pickShader=r,this.positionBuffer=n,this.weightBuffer=i,this.colorBuffer=a,this.idBuffer=o,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var u,d=c.prototype,h=[0,0,1,0,0,1,1,0,1,1,0,1];function g(t,e){var r=t.gl,n=new c(t,o(r,l.vertex,l.fragment),o(r,l.pickVertex,l.pickFragment),s(r),s(r),s(r),s(r));return n.update(e),t.addObject(n),n}d.draw=(u=[1,0,0,0,1,0,0,0,1],function(){var t=this.plot,e=this.shader,r=this.bounds,n=this.numVertices;if(!(n<=0)){var i=t.gl,a=t.dataBox,o=r[2]-r[0],s=r[3]-r[1],l=a[2]-a[0],c=a[3]-a[1];u[0]=2*o/l,u[4]=2*s/c,u[6]=2*(r[0]-a[0])/l-1,u[7]=2*(r[1]-a[1])/c-1,e.bind();var d=e.uniforms;d.viewTransform=u,d.shape=this.shape;var h=e.attributes;this.positionBuffer.bind(),h.position.pointer(),this.weightBuffer.bind(),h.weight.pointer(i.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),h.color.pointer(i.UNSIGNED_BYTE,!0),i.drawArrays(i.TRIANGLES,0,n)}}),d.drawPick=function(){var t=[1,0,0,0,1,0,0,0,1],e=[0,0,0,0];return function(r){var n=this.plot,i=this.pickShader,a=this.bounds,o=this.numVertices;if(!(o<=0)){var s=n.gl,l=n.dataBox,c=a[2]-a[0],u=a[3]-a[1],d=l[2]-l[0],h=l[3]-l[1];t[0]=2*c/d,t[4]=2*u/h,t[6]=2*(a[0]-l[0])/d-1,t[7]=2*(a[1]-l[1])/h-1;for(var g=0;g<4;++g)e[g]=r>>8*g&255;this.pickOffset=r,i.bind();var f=i.uniforms;f.viewTransform=t,f.pickOffset=e,f.shape=this.shape;var p=i.attributes;return this.positionBuffer.bind(),p.position.pointer(),this.weightBuffer.bind(),p.weight.pointer(s.UNSIGNED_BYTE,!1),this.idBuffer.bind(),p.pickId.pointer(s.UNSIGNED_BYTE,!1),s.drawArrays(s.TRIANGLES,0,o),r+this.shape[0]*this.shape[1]}}}(),d.pick=function(t,e,r){var n=this.pickOffset,i=this.shape[0]*this.shape[1];if(r<n||r>=n+i)return null;var a=r-n,o=this.xData,s=this.yData;return{object:this,pointId:a,dataCoord:[o[a%this.shape[0]],s[a/this.shape[0]|0]]}},d.update=function(t){var e=(t=t||{}).shape||[0,0],r=t.x||i(e[0]),o=t.y||i(e[1]),s=t.z||new Float32Array(e[0]*e[1]),l=!1!==t.zsmooth;this.xData=r,this.yData=o;var c,u,d,g,f=t.colorLevels||[0],p=t.colorValues||[0,0,0,1],m=f.length,y=this.bounds;l?(c=y[0]=r[0],u=y[1]=o[0],d=y[2]=r[r.length-1],g=y[3]=o[o.length-1]):(c=y[0]=r[0]+(r[1]-r[0])/2,u=y[1]=o[0]+(o[1]-o[0])/2,d=y[2]=r[r.length-1]+(r[r.length-1]-r[r.length-2])/2,g=y[3]=o[o.length-1]+(o[o.length-1]-o[o.length-2])/2);var b=1/(d-c),v=1/(g-u),x=e[0],I=e[1];this.shape=[x,I];var B=(l?(x-1)*(I-1):x*I)*(h.length>>>1);this.numVertices=B;for(var C=a.mallocUint8(4*B),F=a.mallocFloat32(2*B),A=a.mallocUint8(2*B),Q=a.mallocUint32(B),_=0,w=l?x-1:x,U=l?I-1:I,S=0;S<U;++S){var E,L;l?(E=v*(o[S]-u),L=v*(o[S+1]-u)):(E=S<I-1?v*(o[S]-(o[S+1]-o[S])/2-u):v*(o[S]-(o[S]-o[S-1])/2-u),L=S<I-1?v*(o[S]+(o[S+1]-o[S])/2-u):v*(o[S]+(o[S]-o[S-1])/2-u));for(var T=0;T<w;++T){var R,k;l?(R=b*(r[T]-c),k=b*(r[T+1]-c)):(R=T<x-1?b*(r[T]-(r[T+1]-r[T])/2-c):b*(r[T]-(r[T]-r[T-1])/2-c),k=T<x-1?b*(r[T]+(r[T+1]-r[T])/2-c):b*(r[T]+(r[T]-r[T-1])/2-c));for(var G=0;G<h.length;G+=2){var N,M,D,X,V=h[G],W=h[G+1],Z=s[l?(S+W)*x+(T+V):S*x+T],O=n.le(f,Z);if(O<0)N=p[0],M=p[1],D=p[2],X=p[3];else if(O===m-1)N=p[4*m-4],M=p[4*m-3],D=p[4*m-2],X=p[4*m-1];else{var $=(Z-f[O])/(f[O+1]-f[O]),H=1-$,Y=4*O,P=4*(O+1);N=H*p[Y]+$*p[P],M=H*p[Y+1]+$*p[P+1],D=H*p[Y+2]+$*p[P+2],X=H*p[Y+3]+$*p[P+3]}C[4*_]=255*N,C[4*_+1]=255*M,C[4*_+2]=255*D,C[4*_+3]=255*X,F[2*_]=.5*R+.5*k,F[2*_+1]=.5*E+.5*L,A[2*_]=V,A[2*_+1]=W,Q[_]=S*x+T,_+=1}}}this.positionBuffer.update(F),this.weightBuffer.update(A),this.colorBuffer.update(C),this.idBuffer.update(Q),a.free(F),a.free(C),a.free(A),a.free(Q)},d.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(t,e,r){var n=t("glslify");e.exports={fragment:n(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:n(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:231}],90:[function(t,e,r){var n=t("glslify"),i=t("gl-shader"),a=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),o=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),l=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];r.createShader=function(t){return i(t,a,o,null,l)},r.createPickShader=function(t){return i(t,a,s,null,l)}},{"gl-shader":132,glslify:231}],91:[function(t,e,r){e.exports=x;var n=t("gl-buffer"),i=t("gl-vao"),a=t("gl-texture2d"),o=new Uint8Array(4),s=new Float32Array(o.buffer);function l(t,e,r,n){return o[0]=n,o[1]=r,o[2]=e,o[3]=t,s[0]}var c=t("binary-search-bounds"),u=t("ndarray"),d=t("./lib/shaders"),h=d.createShader,g=d.createPickShader,f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(t,e){for(var r=0,n=0;n<3;++n){var i=t[n]-e[n];r+=i*i}return Math.sqrt(r)}function m(t){for(var e=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],r=0;r<3;++r)e[0][r]=Math.max(t[0][r],e[0][r]),e[1][r]=Math.min(t[1][r],e[1][r]);return e}function y(t,e,r,n){this.arcLength=t,this.position=e,this.index=r,this.dataCoordinate=n}function b(t,e,r,n,i,a){this.gl=t,this.shader=e,this.pickShader=r,this.buffer=n,this.vao=i,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=a,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var v=b.prototype;function x(t){var e=t.gl||t.scene&&t.scene.gl,r=h(e);r.attributes.position.location=0,r.attributes.nextPosition.location=1,r.attributes.arcLength.location=2,r.attributes.lineWidth.location=3,r.attributes.color.location=4;var o=g(e);o.attributes.position.location=0,o.attributes.nextPosition.location=1,o.attributes.arcLength.location=2,o.attributes.lineWidth.location=3,o.attributes.color.location=4;for(var s=n(e),l=i(e,[{buffer:s,size:3,offset:0,stride:48},{buffer:s,size:3,offset:12,stride:48},{buffer:s,size:1,offset:24,stride:48},{buffer:s,size:1,offset:28,stride:48},{buffer:s,size:4,offset:32,stride:48}]),c=u(new Array(1024),[256,1,4]),d=0;d<1024;++d)c.data[d]=255;var f=a(e,c);f.wrap=e.REPEAT;var p=new b(e,r,o,s,l,f);return p.update(t),p}v.isTransparent=function(){return this.hasAlpha},v.isOpaque=function(){return!this.hasAlpha},v.pickSlots=1,v.setPickBase=function(t){this.pickId=t},v.drawTransparent=v.draw=function(t){if(this.vertexCount){var e=this.gl,r=this.shader,n=this.vao;r.bind(),r.uniforms={model:t.model||f,view:t.view||f,projection:t.projection||f,clipBounds:m(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[e.drawingBufferWidth,e.drawingBufferHeight],pixelRatio:this.pixelRatio},n.bind(),n.draw(e.TRIANGLE_STRIP,this.vertexCount),n.unbind()}},v.drawPick=function(t){if(this.vertexCount){var e=this.gl,r=this.pickShader,n=this.vao;r.bind(),r.uniforms={model:t.model||f,view:t.view||f,projection:t.projection||f,pickId:this.pickId,clipBounds:m(this.clipBounds),screenShape:[e.drawingBufferWidth,e.drawingBufferHeight],pixelRatio:this.pixelRatio},n.bind(),n.draw(e.TRIANGLE_STRIP,this.vertexCount),n.unbind()}},v.update=function(t){var e,r;this.dirty=!0;var n=!!t.connectGaps;"dashScale"in t&&(this.dashScale=t.dashScale),this.hasAlpha=!1,"opacity"in t&&(this.opacity=+t.opacity,this.opacity<1&&(this.hasAlpha=!0));var i=[],a=[],o=[],s=0,l=0,d=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],h=t.position||t.positions;if(h){var g=t.color||t.colors||[0,0,0,1],f=t.lineWidth||1,m=!1;t:for(e=1;e<h.length;++e){var y,b,v,x=h[e-1],I=h[e];for(a.push(s),o.push(x.slice()),r=0;r<3;++r){if(isNaN(x[r])||isNaN(I[r])||!isFinite(x[r])||!isFinite(I[r])){if(!n&&i.length>0){for(var B=0;B<24;++B)i.push(i[i.length-12]);l+=2,m=!0}continue t}d[0][r]=Math.min(d[0][r],x[r],I[r]),d[1][r]=Math.max(d[1][r],x[r],I[r])}Array.isArray(g[0])?(y=g.length>e-1?g[e-1]:g.length>0?g[g.length-1]:[0,0,0,1],b=g.length>e?g[e]:g.length>0?g[g.length-1]:[0,0,0,1]):y=b=g,3===y.length&&(y=[y[0],y[1],y[2],1]),3===b.length&&(b=[b[0],b[1],b[2],1]),!this.hasAlpha&&y[3]<1&&(this.hasAlpha=!0),v=Array.isArray(f)?f.length>e-1?f[e-1]:f.length>0?f[f.length-1]:[0,0,0,1]:f;var C=s;if(s+=p(x,I),m){for(r=0;r<2;++r)i.push(x[0],x[1],x[2],I[0],I[1],I[2],C,v,y[0],y[1],y[2],y[3]);l+=2,m=!1}i.push(x[0],x[1],x[2],I[0],I[1],I[2],C,v,y[0],y[1],y[2],y[3],x[0],x[1],x[2],I[0],I[1],I[2],C,-v,y[0],y[1],y[2],y[3],I[0],I[1],I[2],x[0],x[1],x[2],s,-v,b[0],b[1],b[2],b[3],I[0],I[1],I[2],x[0],x[1],x[2],s,v,b[0],b[1],b[2],b[3]),l+=4}}if(this.buffer.update(i),a.push(s),o.push(h[h.length-1].slice()),this.bounds=d,this.vertexCount=l,this.points=o,this.arcLength=a,"dashes"in t){var F=t.dashes.slice();for(F.unshift(0),e=1;e<F.length;++e)F[e]=F[e-1]+F[e];var A=u(new Array(1024),[256,1,4]);for(e=0;e<256;++e){for(r=0;r<4;++r)A.set(e,0,r,0);1&c.le(F,F[F.length-1]*e/255)?A.set(e,0,0,0):A.set(e,0,0,255)}this.texture.setPixels(A)}},v.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},v.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=l(t.value[0],t.value[1],t.value[2],0),r=c.le(this.arcLength,e);if(r<0)return null;if(r===this.arcLength.length-1)return new y(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),r);for(var n=this.points[r],i=this.points[Math.min(r+1,this.points.length-1)],a=(e-this.arcLength[r])/(this.arcLength[r+1]-this.arcLength[r]),o=1-a,s=[0,0,0],u=0;u<3;++u)s[u]=o*n[u]+a*i[u];var d=Math.min(a<.5?r:r+1,this.points.length-1);return new y(e,s,d,this.points[d])}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(t,e,r){function n(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}e.exports=n},{}],93:[function(t,e,r){function n(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}e.exports=n},{}],94:[function(t,e,r){function n(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11],g=t[12],f=t[13],p=t[14],m=t[15];return(e*o-r*a)*(d*m-h*p)-(e*s-n*a)*(u*m-h*f)+(e*l-i*a)*(u*p-d*f)+(r*s-n*o)*(c*m-h*g)-(r*l-i*o)*(c*p-d*g)+(n*l-i*s)*(c*f-u*g)}e.exports=n},{}],95:[function(t,e,r){function n(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,s=n+n,l=i+i,c=r*o,u=n*o,d=n*s,h=i*o,g=i*s,f=i*l,p=a*o,m=a*s,y=a*l;return t[0]=1-d-f,t[1]=u+y,t[2]=h-m,t[3]=0,t[4]=u-y,t[5]=1-c-f,t[6]=g+p,t[7]=0,t[8]=h+m,t[9]=g-p,t[10]=1-c-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}e.exports=n},{}],96:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=n+n,l=i+i,c=a+a,u=n*s,d=n*l,h=n*c,g=i*l,f=i*c,p=a*c,m=o*s,y=o*l,b=o*c;return t[0]=1-(g+p),t[1]=d+b,t[2]=h-y,t[3]=0,t[4]=d-b,t[5]=1-(u+p),t[6]=f+m,t[7]=0,t[8]=h+y,t[9]=f-m,t[10]=1-(u+g),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}e.exports=n},{}],97:[function(t,e,r){function n(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}e.exports=n},{}],98:[function(t,e,r){function n(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],g=e[11],f=e[12],p=e[13],m=e[14],y=e[15],b=r*s-n*o,v=r*l-i*o,x=r*c-a*o,I=n*l-i*s,B=n*c-a*s,C=i*c-a*l,F=u*p-d*f,A=u*m-h*f,Q=u*y-g*f,_=d*m-h*p,w=d*y-g*p,U=h*y-g*m,S=b*U-v*w+x*_+I*Q-B*A+C*F;return S?(S=1/S,t[0]=(s*U-l*w+c*_)*S,t[1]=(i*w-n*U-a*_)*S,t[2]=(p*C-m*B+y*I)*S,t[3]=(h*B-d*C-g*I)*S,t[4]=(l*Q-o*U-c*A)*S,t[5]=(r*U-i*Q+a*A)*S,t[6]=(m*x-f*C-y*v)*S,t[7]=(u*C-h*x+g*v)*S,t[8]=(o*w-s*Q+c*F)*S,t[9]=(n*Q-r*w-a*F)*S,t[10]=(f*B-p*x+y*b)*S,t[11]=(d*x-u*B-g*b)*S,t[12]=(s*A-o*_-l*F)*S,t[13]=(r*_-n*A+i*F)*S,t[14]=(p*v-f*I-m*b)*S,t[15]=(u*I-d*v+h*b)*S,t):null}e.exports=n},{}],99:[function(t,e,r){var n=t("./identity");function i(t,e,r,i){var a,o,s,l,c,u,d,h,g,f,p=e[0],m=e[1],y=e[2],b=i[0],v=i[1],x=i[2],I=r[0],B=r[1],C=r[2];return Math.abs(p-I)<1e-6&&Math.abs(m-B)<1e-6&&Math.abs(y-C)<1e-6?n(t):(d=p-I,h=m-B,g=y-C,a=v*(g*=f=1/Math.sqrt(d*d+h*h+g*g))-x*(h*=f),o=x*(d*=f)-b*g,s=b*h-v*d,(f=Math.sqrt(a*a+o*o+s*s))?(a*=f=1/f,o*=f,s*=f):(a=0,o=0,s=0),l=h*s-g*o,c=g*a-d*s,u=d*o-h*a,(f=Math.sqrt(l*l+c*c+u*u))?(l*=f=1/f,c*=f,u*=f):(l=0,c=0,u=0),t[0]=a,t[1]=l,t[2]=d,t[3]=0,t[4]=o,t[5]=c,t[6]=h,t[7]=0,t[8]=s,t[9]=u,t[10]=g,t[11]=0,t[12]=-(a*p+o*m+s*y),t[13]=-(l*p+c*m+u*y),t[14]=-(d*p+h*m+g*y),t[15]=1,t)}e.exports=i},{"./identity":97}],100:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],g=e[10],f=e[11],p=e[12],m=e[13],y=e[14],b=e[15],v=r[0],x=r[1],I=r[2],B=r[3];return t[0]=v*n+x*s+I*d+B*p,t[1]=v*i+x*l+I*h+B*m,t[2]=v*a+x*c+I*g+B*y,t[3]=v*o+x*u+I*f+B*b,v=r[4],x=r[5],I=r[6],B=r[7],t[4]=v*n+x*s+I*d+B*p,t[5]=v*i+x*l+I*h+B*m,t[6]=v*a+x*c+I*g+B*y,t[7]=v*o+x*u+I*f+B*b,v=r[8],x=r[9],I=r[10],B=r[11],t[8]=v*n+x*s+I*d+B*p,t[9]=v*i+x*l+I*h+B*m,t[10]=v*a+x*c+I*g+B*y,t[11]=v*o+x*u+I*f+B*b,v=r[12],x=r[13],I=r[14],B=r[15],t[12]=v*n+x*s+I*d+B*p,t[13]=v*i+x*l+I*h+B*m,t[14]=v*a+x*c+I*g+B*y,t[15]=v*o+x*u+I*f+B*b,t}e.exports=n},{}],101:[function(t,e,r){function n(t,e,r,n,i,a,o){var s=1/(e-r),l=1/(n-i),c=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*l,t[14]=(o+a)*c,t[15]=1,t}e.exports=n},{}],102:[function(t,e,r){function n(t,e,r,n,i){var a=1/Math.tan(e/2),o=1/(n-i);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*o,t[15]=0,t}e.exports=n},{}],103:[function(t,e,r){function n(t,e,r,n){var i,a,o,s,l,c,u,d,h,g,f,p,m,y,b,v,x,I,B,C,F,A,Q,_,w=n[0],U=n[1],S=n[2],E=Math.sqrt(w*w+U*U+S*S);return Math.abs(E)<1e-6?null:(w*=E=1/E,U*=E,S*=E,i=Math.sin(r),o=1-(a=Math.cos(r)),s=e[0],l=e[1],c=e[2],u=e[3],d=e[4],h=e[5],g=e[6],f=e[7],p=e[8],m=e[9],y=e[10],b=e[11],v=w*w*o+a,x=U*w*o+S*i,I=S*w*o-U*i,B=w*U*o-S*i,C=U*U*o+a,F=S*U*o+w*i,A=w*S*o+U*i,Q=U*S*o-w*i,_=S*S*o+a,t[0]=s*v+d*x+p*I,t[1]=l*v+h*x+m*I,t[2]=c*v+g*x+y*I,t[3]=u*v+f*x+b*I,t[4]=s*B+d*C+p*F,t[5]=l*B+h*C+m*F,t[6]=c*B+g*C+y*F,t[7]=u*B+f*C+b*F,t[8]=s*A+d*Q+p*_,t[9]=l*A+h*Q+m*_,t[10]=c*A+g*Q+y*_,t[11]=u*A+f*Q+b*_,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}e.exports=n},{}],104:[function(t,e,r){function n(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+c*n,t[5]=o*i+u*n,t[6]=s*i+d*n,t[7]=l*i+h*n,t[8]=c*i-a*n,t[9]=u*i-o*n,t[10]=d*i-s*n,t[11]=h*i-l*n,t}e.exports=n},{}],105:[function(t,e,r){function n(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],l=e[3],c=e[8],u=e[9],d=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-c*n,t[1]=o*i-u*n,t[2]=s*i-d*n,t[3]=l*i-h*n,t[8]=a*n+c*i,t[9]=o*n+u*i,t[10]=s*n+d*i,t[11]=l*n+h*i,t}e.exports=n},{}],106:[function(t,e,r){function n(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],l=e[3],c=e[4],u=e[5],d=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+c*n,t[1]=o*i+u*n,t[2]=s*i+d*n,t[3]=l*i+h*n,t[4]=c*i-a*n,t[5]=u*i-o*n,t[6]=d*i-s*n,t[7]=h*i-l*n,t}e.exports=n},{}],107:[function(t,e,r){function n(t,e,r){var n=r[0],i=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}e.exports=n},{}],108:[function(t,e,r){function n(t,e,r){var n,i,a,o,s,l,c,u,d,h,g,f,p=r[0],m=r[1],y=r[2];return e===t?(t[12]=e[0]*p+e[4]*m+e[8]*y+e[12],t[13]=e[1]*p+e[5]*m+e[9]*y+e[13],t[14]=e[2]*p+e[6]*m+e[10]*y+e[14],t[15]=e[3]*p+e[7]*m+e[11]*y+e[15]):(n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],g=e[10],f=e[11],t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=d,t[9]=h,t[10]=g,t[11]=f,t[12]=n*p+s*m+d*y+e[12],t[13]=i*p+l*m+h*y+e[13],t[14]=a*p+c*m+g*y+e[14],t[15]=o*p+u*m+f*y+e[15]),t}e.exports=n},{}],109:[function(t,e,r){function n(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}e.exports=n},{}],110:[function(t,e,r){var n=t("barycentric"),i=t("polytope-closest-point/lib/closest_point_2d.js");function a(t,e){for(var r=[0,0,0,0],n=0;n<4;++n)for(var i=0;i<4;++i)r[i]+=t[4*n+i]*e[n];return r}function o(t,e,r,n,i){for(var o=a(n,a(r,a(e,[t[0],t[1],t[2],1]))),s=0;s<3;++s)o[s]/=o[3];return[.5*i[0]*(1+o[0]),.5*i[1]*(1-o[1])]}function s(t,e){if(2===t.length){for(var r=0,a=0,o=0;o<2;++o)r+=Math.pow(e[o]-t[0][o],2),a+=Math.pow(e[o]-t[1][o],2);return(r=Math.sqrt(r))+(a=Math.sqrt(a))<1e-6?[1,0]:[a/(r+a),r/(a+r)]}if(3===t.length){var s=[0,0];return i(t[0],t[1],t[2],e,s),n(t,s)}return[]}function l(t,e){for(var r=[0,0,0],n=0;n<t.length;++n)for(var i=t[n],a=e[n],o=0;o<3;++o)r[o]+=a*i[o];return r}function c(t,e,r,n,i,a){if(1===t.length)return[0,t[0].slice()];for(var c=new Array(t.length),u=0;u<t.length;++u)c[u]=o(t[u],r,n,i,a);var d=0,h=1/0;for(u=0;u<c.length;++u){for(var g=0,f=0;f<2;++f)g+=Math.pow(c[u][f]-e[f],2);g<h&&(h=g,d=u)}var p=s(c,e),m=0;for(u=0;u<3;++u){if(p[u]<-.001||p[u]>1.0001)return null;m+=p[u]}return Math.abs(m-1)>.001?null:[d,l(t,p),p]}e.exports=c},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(t,e,r){var n=t("glslify"),i=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),a=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),o=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),l=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),c=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),u=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),d=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),h=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),g=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),f=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);r.meshShader={vertex:i,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},r.wireShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},r.pointShader={vertex:l,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},r.pickShader={vertex:u,fragment:d,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},r.pointPickShader={vertex:h,fragment:d,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},r.contourShader={vertex:g,fragment:f,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(t,e,r){var n=1e-6,i=1e-6,a=t("gl-shader"),o=t("gl-buffer"),s=t("gl-vao"),l=t("gl-texture2d"),c=t("normals"),u=t("gl-mat4/multiply"),d=t("gl-mat4/invert"),h=t("ndarray"),g=t("colormap"),f=t("simplicial-complex-contour"),p=t("typedarray-pool"),m=t("./lib/shaders"),y=t("./lib/closest-point"),b=m.meshShader,v=m.wireShader,x=m.pointShader,I=m.pickShader,B=m.pointPickShader,C=m.contourShader,F=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function A(t,e,r,n,i,a,o,s,l,c,u,d,h,g,f,p,m,y,b,v,x,I,B,C,A,Q,_){this.gl=t,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=e,this.dirty=!0,this.triShader=r,this.lineShader=n,this.pointShader=i,this.pickShader=a,this.pointPickShader=o,this.contourShader=s,this.trianglePositions=l,this.triangleColors=u,this.triangleNormals=h,this.triangleUVs=d,this.triangleIds=c,this.triangleVAO=g,this.triangleCount=0,this.lineWidth=1,this.edgePositions=f,this.edgeColors=m,this.edgeUVs=y,this.edgeIds=p,this.edgeVAO=b,this.edgeCount=0,this.pointPositions=v,this.pointColors=I,this.pointUVs=B,this.pointSizes=C,this.pointIds=x,this.pointVAO=A,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Q,this.contourVAO=_,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=F,this._view=F,this._projection=F,this._resolution=[1,1]}var Q=A.prototype;function _(t,e){if(!e)return 1;if(!e.length)return 1;for(var r=0;r<e.length;++r){if(e.length<2)return 1;if(e[r][0]===t)return e[r][1];if(e[r][0]>t&&r>0){var n=(e[r][0]-t)/(e[r][0]-e[r-1][0]);return e[r][1]*(1-n)+n*e[r-1][1]}}return 1}function w(t,e){for(var r=g({colormap:t,nshades:256,format:"rgba"}),n=new Uint8Array(1024),i=0;i<256;++i){for(var a=r[i],o=0;o<3;++o)n[4*i+o]=a[o];n[4*i+3]=e?255*_(i/255,e):255*a[3]}return h(n,[256,256,4],[4,0,1])}function U(t){for(var e=t.length,r=new Array(e),n=0;n<e;++n)r[n]=t[n][2];return r}function S(t){var e=a(t,b.vertex,b.fragment);return e.attributes.position.location=0,e.attributes.color.location=2,e.attributes.uv.location=3,e.attributes.normal.location=4,e}function E(t){var e=a(t,v.vertex,v.fragment);return e.attributes.position.location=0,e.attributes.color.location=2,e.attributes.uv.location=3,e}function L(t){var e=a(t,x.vertex,x.fragment);return e.attributes.position.location=0,e.attributes.color.location=2,e.attributes.uv.location=3,e.attributes.pointSize.location=4,e}function T(t){var e=a(t,I.vertex,I.fragment);return e.attributes.position.location=0,e.attributes.id.location=1,e}function R(t){var e=a(t,B.vertex,B.fragment);return e.attributes.position.location=0,e.attributes.id.location=1,e.attributes.pointSize.location=4,e}function k(t){var e=a(t,C.vertex,C.fragment);return e.attributes.position.location=0,e}function G(t,e){if(1===arguments.length&&(t=(e=t).gl),!(t.getExtension("OES_standard_derivatives")||t.getExtension("MOZ_OES_standard_derivatives")||t.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var r=S(t),n=E(t),i=L(t),a=T(t),c=R(t),u=k(t),d=l(t,h(new Uint8Array([255,255,255,255]),[1,1,4]));d.generateMipmap(),d.minFilter=t.LINEAR_MIPMAP_LINEAR,d.magFilter=t.LINEAR;var g=o(t),f=o(t),p=o(t),m=o(t),y=o(t),b=s(t,[{buffer:g,type:t.FLOAT,size:3},{buffer:y,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:f,type:t.FLOAT,size:4},{buffer:p,type:t.FLOAT,size:2},{buffer:m,type:t.FLOAT,size:3}]),v=o(t),x=o(t),I=o(t),B=o(t),C=s(t,[{buffer:v,type:t.FLOAT,size:3},{buffer:B,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:x,type:t.FLOAT,size:4},{buffer:I,type:t.FLOAT,size:2}]),F=o(t),Q=o(t),_=o(t),w=o(t),U=o(t),G=s(t,[{buffer:F,type:t.FLOAT,size:3},{buffer:U,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Q,type:t.FLOAT,size:4},{buffer:_,type:t.FLOAT,size:2},{buffer:w,type:t.FLOAT,size:1}]),N=o(t),M=new A(t,d,r,n,i,a,c,u,g,y,f,p,m,b,v,B,x,I,C,F,U,Q,_,w,G,N,s(t,[{buffer:N,type:t.FLOAT,size:3}]));return M.update(e),M}Q.isOpaque=function(){return!this.hasAlpha},Q.isTransparent=function(){return this.hasAlpha},Q.pickSlots=1,Q.setPickBase=function(t){this.pickId=t},Q.highlight=function(t){if(t&&this.contourEnable){for(var e=f(this.cells,this.intensity,t.intensity),r=e.cells,n=e.vertexIds,i=e.vertexWeights,a=r.length,o=p.mallocFloat32(6*a),s=0,l=0;l<a;++l)for(var c=r[l],u=0;u<2;++u){var d=c[0];2===c.length&&(d=c[u]);for(var h=n[d][0],g=n[d][1],m=i[d],y=1-m,b=this.positions[h],v=this.positions[g],x=0;x<3;++x)o[s++]=m*b[x]+y*v[x]}this.contourCount=s/3|0,this.contourPositions.update(o.subarray(0,s)),p.free(o)}else this.contourCount=0},Q.update=function(t){t=t||{};var e=this.gl;this.dirty=!0,"contourEnable"in t&&(this.contourEnable=t.contourEnable),"contourColor"in t&&(this.contourColor=t.contourColor),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"lightPosition"in t&&(this.lightPosition=t.lightPosition),this.hasAlpha=!1,"opacity"in t&&(this.opacity=t.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in t&&(this.opacityscale=t.opacityscale,this.hasAlpha=!0),"ambient"in t&&(this.ambientLight=t.ambient),"diffuse"in t&&(this.diffuseLight=t.diffuse),"specular"in t&&(this.specularLight=t.specular),"roughness"in t&&(this.roughness=t.roughness),"fresnel"in t&&(this.fresnel=t.fresnel),t.texture?(this.texture.dispose(),this.texture=l(e,t.texture)):t.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=e.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=e.LINEAR,this.texture.setPixels(w(t.colormap,this.opacityscale)),this.texture.generateMipmap());var r=t.cells,a=t.positions;if(a&&r){var o=[],s=[],u=[],d=[],h=[],g=[],f=[],p=[],m=[],y=[],b=[],v=[],x=[],I=[];this.cells=r,this.positions=a;var B=t.vertexNormals,C=t.cellNormals,F=void 0===t.vertexNormalsEpsilon?n:t.vertexNormalsEpsilon,A=void 0===t.faceNormalsEpsilon?i:t.faceNormalsEpsilon;t.useFacetNormals&&!C&&(C=c.faceNormals(r,a,A)),C||B||(B=c.vertexNormals(r,a,F));var Q=t.vertexColors,S=t.cellColors,E=t.meshColor||[1,1,1,1],L=t.vertexUVs,T=t.vertexIntensity,R=t.cellUVs,k=t.cellIntensity,G=1/0,N=-1/0;if(!L&&!R)if(T)if(t.vertexIntensityBounds)G=+t.vertexIntensityBounds[0],N=+t.vertexIntensityBounds[1];else for(var M=0;M<T.length;++M){var D=T[M];G=Math.min(G,D),N=Math.max(N,D)}else if(k)if(t.cellIntensityBounds)G=+t.cellIntensityBounds[0],N=+t.cellIntensityBounds[1];else for(M=0;M<k.length;++M)D=k[M],G=Math.min(G,D),N=Math.max(N,D);else for(M=0;M<a.length;++M)D=a[M][2],G=Math.min(G,D),N=Math.max(N,D);this.intensity=T||k||U(a),this.pickVertex=!(k||S);var X=t.pointSizes,V=t.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],M=0;M<a.length;++M)for(var W=a[M],Z=0;Z<3;++Z)!isNaN(W[Z])&&isFinite(W[Z])&&(this.bounds[0][Z]=Math.min(this.bounds[0][Z],W[Z]),this.bounds[1][Z]=Math.max(this.bounds[1][Z],W[Z]));var O=0,$=0,H=0;t:for(M=0;M<r.length;++M){var Y=r[M];switch(Y.length){case 1:for(W=a[z=Y[0]],Z=0;Z<3;++Z)if(isNaN(W[Z])||!isFinite(W[Z]))continue t;y.push(W[0],W[1],W[2]),J=Q?Q[z]:S?S[M]:E,this.opacityscale&&T?s.push(J[0],J[1],J[2],this.opacity*_((T[z]-G)/(N-G),this.opacityscale)):3===J.length?b.push(J[0],J[1],J[2],this.opacity):(b.push(J[0],J[1],J[2],J[3]*this.opacity),J[3]<1&&(this.hasAlpha=!0)),j=L?L[z]:T?[(T[z]-G)/(N-G),0]:R?R[M]:k?[(k[M]-G)/(N-G),0]:[(W[2]-G)/(N-G),0],v.push(j[0],j[1]),X?x.push(X[z]):x.push(V),I.push(M),H+=1;break;case 2:for(Z=0;Z<2;++Z){W=a[z=Y[Z]];for(var P=0;P<3;++P)if(isNaN(W[P])||!isFinite(W[P]))continue t}for(Z=0;Z<2;++Z)W=a[z=Y[Z]],g.push(W[0],W[1],W[2]),J=Q?Q[z]:S?S[M]:E,this.opacityscale&&T?s.push(J[0],J[1],J[2],this.opacity*_((T[z]-G)/(N-G),this.opacityscale)):3===J.length?f.push(J[0],J[1],J[2],this.opacity):(f.push(J[0],J[1],J[2],J[3]*this.opacity),J[3]<1&&(this.hasAlpha=!0)),j=L?L[z]:T?[(T[z]-G)/(N-G),0]:R?R[M]:k?[(k[M]-G)/(N-G),0]:[(W[2]-G)/(N-G),0],p.push(j[0],j[1]),m.push(M);$+=1;break;case 3:for(Z=0;Z<3;++Z)for(W=a[z=Y[Z]],P=0;P<3;++P)if(isNaN(W[P])||!isFinite(W[P]))continue t;for(Z=0;Z<3;++Z){var z,J,j,K;W=a[z=Y[2-Z]],o.push(W[0],W[1],W[2]),(J=Q?Q[z]:S?S[M]:E)?this.opacityscale&&T?s.push(J[0],J[1],J[2],this.opacity*_((T[z]-G)/(N-G),this.opacityscale)):3===J.length?s.push(J[0],J[1],J[2],this.opacity):(s.push(J[0],J[1],J[2],J[3]*this.opacity),J[3]<1&&(this.hasAlpha=!0)):s.push(.5,.5,.5,1),j=L?L[z]:T?[(T[z]-G)/(N-G),0]:R?R[M]:k?[(k[M]-G)/(N-G),0]:[(W[2]-G)/(N-G),0],d.push(j[0],j[1]),K=B?B[z]:C[M],u.push(K[0],K[1],K[2]),h.push(M)}O+=1}}this.pointCount=H,this.edgeCount=$,this.triangleCount=O,this.pointPositions.update(y),this.pointColors.update(b),this.pointUVs.update(v),this.pointSizes.update(x),this.pointIds.update(new Uint32Array(I)),this.edgePositions.update(g),this.edgeColors.update(f),this.edgeUVs.update(p),this.edgeIds.update(new Uint32Array(m)),this.trianglePositions.update(o),this.triangleColors.update(s),this.triangleUVs.update(d),this.triangleNormals.update(u),this.triangleIds.update(new Uint32Array(h))}},Q.drawTransparent=Q.draw=function(t){t=t||{};for(var e=this.gl,r=t.model||F,n=t.view||F,i=t.projection||F,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);var s={model:r,view:n,projection:i,inverseModel:F.slice(),clipBounds:a,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};s.inverseModel=d(s.inverseModel,s.model),e.disable(e.CULL_FACE),this.texture.bind(0);var l=new Array(16);for(u(l,s.view,s.model),u(l,s.projection,l),d(l,l),o=0;o<3;++o)s.eyePosition[o]=l[12+o]/l[15];var c,h=l[15];for(o=0;o<3;++o)h+=this.lightPosition[o]*l[4*o+3];for(o=0;o<3;++o){for(var g=l[12+o],f=0;f<3;++f)g+=l[4*f+o]*this.lightPosition[f];s.lightPosition[o]=g/h}this.triangleCount>0&&((c=this.triShader).bind(),c.uniforms=s,this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((c=this.lineShader).bind(),c.uniforms=s,this.edgeVAO.bind(),e.lineWidth(this.lineWidth*this.pixelRatio),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((c=this.pointShader).bind(),c.uniforms=s,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((c=this.contourShader).bind(),c.uniforms=s,this.contourVAO.bind(),e.drawArrays(e.LINES,0,this.contourCount),this.contourVAO.unbind())},Q.drawPick=function(t){t=t||{};for(var e=this.gl,r=t.model||F,n=t.view||F,i=t.projection||F,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);this._model=[].slice.call(r),this._view=[].slice.call(n),this._projection=[].slice.call(i),this._resolution=[e.drawingBufferWidth,e.drawingBufferHeight];var s,l={model:r,view:n,projection:i,clipBounds:a,pickId:this.pickId/255};(s=this.pickShader).bind(),s.uniforms=l,this.triangleCount>0&&(this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),e.lineWidth(this.lineWidth*this.pixelRatio),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((s=this.pointPickShader).bind(),s.uniforms=l,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind())},Q.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;for(var e=t.value[0]+256*t.value[1]+65536*t.value[2],r=this.cells[e],n=this.positions,i=new Array(r.length),a=0;a<r.length;++a)i[a]=n[r[a]];var o=t.coord[0],s=t.coord[1];if(!this.pickVertex){var l=this.positions[r[0]],c=this.positions[r[1]],u=this.positions[r[2]],d=[(l[0]+c[0]+u[0])/3,(l[1]+c[1]+u[1])/3,(l[2]+c[2]+u[2])/3];return{_cellCenter:!0,position:[o,s],index:e,cell:r,cellId:e,intensity:this.intensity[e],dataCoordinate:d}}var h=y(i,[o*this.pixelRatio,this._resolution[1]-s*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!h)return null;var g=h[2],f=0;for(a=0;a<r.length;++a)f+=g[a]*this.intensity[r[a]];return{position:h[1],index:r[h[0]],cell:r,cellId:e,intensity:f,dataCoordinate:this.positions[r[h[0]]]}},Q.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},e.exports=G},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(t,e,r){e.exports=u;var n=t("gl-buffer"),i=t("gl-shader"),a=t("./shaders");function o(t,e,r){this.plot=t,this.vbo=e,this.shader=r}var s,l,c=o.prototype;function u(t){var e=t.gl;return new o(t,n(e,[0,0,0,1,1,0,1,1]),i(e,a.boxVert,a.lineFrag))}c.bind=function(){var t=this.shader;this.vbo.bind(),this.shader.bind(),t.attributes.coord.pointer(),t.uniforms.screenBox=this.plot.screenBox},c.drawBox=(s=[0,0],l=[0,0],function(t,e,r,n,i){var a=this.plot,o=this.shader,c=a.gl;s[0]=t,s[1]=e,l[0]=r,l[1]=n,o.uniforms.lo=s,o.uniforms.hi=l,o.uniforms.color=i,c.drawArrays(c.TRIANGLE_STRIP,0,4)}),c.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(t,e,r){e.exports=p;var n=t("gl-buffer"),i=t("gl-shader"),a=t("binary-search-bounds"),o=t("./shaders");function s(t,e,r,n){this.plot=t,this.vbo=e,this.shader=r,this.tickShader=n,this.ticks=[[],[]]}function l(t,e){return t-e}var c,u,d,h,g,f=s.prototype;function p(t){var e=t.gl;return new s(t,n(e),i(e,o.gridVert,o.gridFrag),i(e,o.tickVert,o.gridFrag))}f.draw=(c=[0,0],u=[0,0],d=[0,0],function(){for(var t=this.plot,e=this.vbo,r=this.shader,n=this.ticks,i=t.gl,a=t._tickBounds,o=t.dataBox,s=t.viewBox,l=t.gridLineWidth,h=t.gridLineColor,g=t.gridLineEnable,f=t.pixelRatio,p=0;p<2;++p){var m=a[p],y=a[p+2]-m,b=.5*(o[p+2]+o[p]),v=o[p+2]-o[p];u[p]=2*y/v,c[p]=2*(m-b)/v}r.bind(),e.bind(),r.attributes.dataCoord.pointer(),r.uniforms.dataShift=c,r.uniforms.dataScale=u;var x=0;for(p=0;p<2;++p){d[0]=d[1]=0,d[p]=1,r.uniforms.dataAxis=d,r.uniforms.lineWidth=l[p]/(s[p+2]-s[p])*f,r.uniforms.color=h[p];var I=6*n[p].length;g[p]&&I&&i.drawArrays(i.TRIANGLES,x,I),x+=I}}),f.drawTickMarks=function(){var t=[0,0],e=[0,0],r=[1,0],n=[0,1],i=[0,0],o=[0,0];return function(){for(var s=this.plot,c=this.vbo,u=this.tickShader,d=this.ticks,h=s.gl,g=s._tickBounds,f=s.dataBox,p=s.viewBox,m=s.pixelRatio,y=s.screenBox,b=y[2]-y[0],v=y[3]-y[1],x=p[2]-p[0],I=p[3]-p[1],B=0;B<2;++B){var C=g[B],F=g[B+2]-C,A=.5*(f[B+2]+f[B]),Q=f[B+2]-f[B];e[B]=2*F/Q,t[B]=2*(C-A)/Q}e[0]*=x/b,t[0]*=x/b,e[1]*=I/v,t[1]*=I/v,u.bind(),c.bind(),u.attributes.dataCoord.pointer();var _=u.uniforms;_.dataShift=t,_.dataScale=e;var w=s.tickMarkLength,U=s.tickMarkWidth,S=s.tickMarkColor,E=0,L=6*d[0].length,T=Math.min(a.ge(d[0],(f[0]-g[0])/(g[2]-g[0]),l),d[0].length),R=Math.min(a.gt(d[0],(f[2]-g[0])/(g[2]-g[0]),l),d[0].length),k=E+6*T,G=6*Math.max(0,R-T),N=Math.min(a.ge(d[1],(f[1]-g[1])/(g[3]-g[1]),l),d[1].length),M=Math.min(a.gt(d[1],(f[3]-g[1])/(g[3]-g[1]),l),d[1].length),D=L+6*N,X=6*Math.max(0,M-N);i[0]=2*(p[0]-w[1])/b-1,i[1]=(p[3]+p[1])/v-1,o[0]=w[1]*m/b,o[1]=U[1]*m/v,X&&(_.color=S[1],_.tickScale=o,_.dataAxis=n,_.screenOffset=i,h.drawArrays(h.TRIANGLES,D,X)),i[0]=(p[2]+p[0])/b-1,i[1]=2*(p[1]-w[0])/v-1,o[0]=U[0]*m/b,o[1]=w[0]*m/v,G&&(_.color=S[0],_.tickScale=o,_.dataAxis=r,_.screenOffset=i,h.drawArrays(h.TRIANGLES,k,G)),i[0]=2*(p[2]+w[3])/b-1,i[1]=(p[3]+p[1])/v-1,o[0]=w[3]*m/b,o[1]=U[3]*m/v,X&&(_.color=S[3],_.tickScale=o,_.dataAxis=n,_.screenOffset=i,h.drawArrays(h.TRIANGLES,D,X)),i[0]=(p[2]+p[0])/b-1,i[1]=2*(p[3]+w[2])/v-1,o[0]=U[2]*m/b,o[1]=w[2]*m/v,G&&(_.color=S[2],_.tickScale=o,_.dataAxis=r,_.screenOffset=i,h.drawArrays(h.TRIANGLES,k,G))}}(),f.update=(h=[1,1,-1,-1,1,-1],g=[1,-1,1,1,-1,-1],function(t){var e=t.ticks,r=t.bounds,n=new Float32Array(18*(e[0].length+e[1].length));this.plot.zeroLineEnable;for(var i=0,a=[[],[]],o=0;o<2;++o)for(var s=a[o],l=e[o],c=r[o],u=r[o+2],d=0;d<l.length;++d){var f=(l[d].x-c)/(u-c);s.push(f);for(var p=0;p<6;++p)n[i++]=f,n[i++]=h[p],n[i++]=g[p]}this.ticks=a,this.vbo.update(n)}),f.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(t,e,r){e.exports=l;var n=t("gl-buffer"),i=t("gl-shader"),a=t("./shaders");function o(t,e,r){this.plot=t,this.vbo=e,this.shader=r}var s=o.prototype;function l(t){var e=t.gl;return new o(t,n(e,[-1,-1,-1,1,1,-1,1,1]),i(e,a.lineVert,a.lineFrag))}s.bind=function(){var t=this.shader;this.vbo.bind(),this.shader.bind(),t.attributes.coord.pointer(),t.uniforms.screenBox=this.plot.screenBox},s.drawLine=function(){var t=[0,0],e=[0,0];return function(r,n,i,a,o,s){var l=this.plot,c=this.shader,u=l.gl;t[0]=r,t[1]=n,e[0]=i,e[1]=a,c.uniforms.start=t,c.uniforms.end=e,c.uniforms.width=o*l.pixelRatio,c.uniforms.color=s,u.drawArrays(u.TRIANGLE_STRIP,0,4)}}(),s.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(t,e,r){var n=t("glslify"),i=n(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);e.exports={lineVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:i,textVert:n(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:i,gridVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:i,boxVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:231}],117:[function(t,e,r){e.exports=m;var n=t("gl-buffer"),i=t("gl-shader"),a=t("text-cache"),o=t("binary-search-bounds"),s=t("./shaders");function l(t,e,r){this.plot=t,this.vbo=e,this.shader=r,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var c,u,d,h,g,f,p=l.prototype;function m(t){var e=t.gl;return new l(t,n(e),i(e,s.textVert,s.textFrag))}p.drawTicks=(c=[0,0],u=[0,0],d=[0,0],function(t){var e=this.plot,r=this.shader,n=this.tickX[t],i=this.tickOffset[t],a=e.gl,s=e.viewBox,l=e.dataBox,h=e.screenBox,g=e.pixelRatio,f=e.tickEnable,p=e.tickPad,m=e.tickColor,y=e.tickAngle,b=e.labelEnable,v=e.labelPad,x=e.labelColor,I=e.labelAngle,B=this.labelOffset[t],C=this.labelCount[t],F=o.lt(n,l[t]),A=o.le(n,l[t+2]);c[0]=c[1]=0,c[t]=1,u[t]=(s[2+t]+s[t])/(h[2+t]-h[t])-1;var Q=2/h[2+(1^t)]-h[1^t];u[1^t]=Q*s[1^t]-1,f[t]&&(u[1^t]-=Q*g*p[t],F<A&&i[A]>i[F]&&(r.uniforms.dataAxis=c,r.uniforms.screenOffset=u,r.uniforms.color=m[t],r.uniforms.angle=y[t],a.drawArrays(a.TRIANGLES,i[F],i[A]-i[F]))),b[t]&&C&&(u[1^t]-=Q*g*v[t],r.uniforms.dataAxis=d,r.uniforms.screenOffset=u,r.uniforms.color=x[t],r.uniforms.angle=I[t],a.drawArrays(a.TRIANGLES,B,C)),u[1^t]=Q*s[2+(1^t)]-1,f[t+2]&&(u[1^t]+=Q*g*p[t+2],F<A&&i[A]>i[F]&&(r.uniforms.dataAxis=c,r.uniforms.screenOffset=u,r.uniforms.color=m[t+2],r.uniforms.angle=y[t+2],a.drawArrays(a.TRIANGLES,i[F],i[A]-i[F]))),b[t+2]&&C&&(u[1^t]+=Q*g*v[t+2],r.uniforms.dataAxis=d,r.uniforms.screenOffset=u,r.uniforms.color=x[t+2],r.uniforms.angle=I[t+2],a.drawArrays(a.TRIANGLES,B,C))}),p.drawTitle=function(){var t=[0,0],e=[0,0];return function(){var r=this.plot,n=this.shader,i=r.gl,a=r.screenBox,o=r.titleCenter,s=r.titleAngle,l=r.titleColor,c=r.pixelRatio;if(this.titleCount){for(var u=0;u<2;++u)e[u]=2*(o[u]*c-a[u])/(a[2+u]-a[u])-1;n.bind(),n.uniforms.dataAxis=t,n.uniforms.screenOffset=e,n.uniforms.angle=s,n.uniforms.color=l,i.drawArrays(i.TRIANGLES,this.titleOffset,this.titleCount)}}}(),p.bind=(h=[0,0],g=[0,0],f=[0,0],function(){var t=this.plot,e=this.shader,r=t._tickBounds,n=t.dataBox,i=t.screenBox,a=t.viewBox;e.bind();for(var o=0;o<2;++o){var s=r[o],l=r[o+2]-s,c=.5*(n[o+2]+n[o]),u=n[o+2]-n[o],d=a[o],p=a[o+2]-d,m=i[o],y=i[o+2]-m;g[o]=2*l/u*p/y,h[o]=2*(s-c)/u*p/y}f[1]=2*t.pixelRatio/(i[3]-i[1]),f[0]=f[1]*(i[3]-i[1])/(i[2]-i[0]),e.uniforms.dataScale=g,e.uniforms.dataShift=h,e.uniforms.textScale=f,this.vbo.bind(),e.attributes.textCoordinate.pointer()}),p.update=function(t){var e,r,n,i,o,s=[],l=t.ticks,c=t.bounds;for(o=0;o<2;++o){var u=[Math.floor(s.length/3)],d=[-1/0],h=l[o];for(e=0;e<h.length;++e){var g=h[e],f=g.x,p=g.text,m=g.font||"sans-serif";i=g.fontSize||12;for(var y=1/(c[o+2]-c[o]),b=c[o],v=p.split("\n"),x=0;x<v.length;x++)for(n=a(m,v[x]).data,r=0;r<n.length;r+=2)s.push(n[r]*i,-n[r+1]*i-x*i*1.2,(f-b)*y);u.push(Math.floor(s.length/3)),d.push(f)}this.tickOffset[o]=u,this.tickX[o]=d}for(o=0;o<2;++o){for(this.labelOffset[o]=Math.floor(s.length/3),n=a(t.labelFont[o],t.labels[o],{textAlign:"center"}).data,i=t.labelSize[o],e=0;e<n.length;e+=2)s.push(n[e]*i,-n[e+1]*i,0);this.labelCount[o]=Math.floor(s.length/3)-this.labelOffset[o]}for(this.titleOffset=Math.floor(s.length/3),n=a(t.titleFont,t.title).data,i=t.titleSize,e=0;e<n.length;e+=2)s.push(n[e]*i,-n[e+1]*i,0);this.titleCount=Math.floor(s.length/3)-this.titleOffset,this.vbo.update(s)},p.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(t,e,r){e.exports=h;var n=t("gl-select-static"),i=t("./lib/grid"),a=t("./lib/text"),o=t("./lib/line"),s=t("./lib/box");function l(t,e){this.gl=t,this.pickBuffer=e,this.screenBox=[0,0,t.drawingBufferWidth,t.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var c=l.prototype;function u(t){for(var e=t.slice(),r=0;r<e.length;++r)e[r]=e[r].slice();return e}function d(t,e){return t.x-e.x}function h(t){var e=t.gl,r=new l(e,n(e,[e.drawingBufferWidth,e.drawingBufferHeight]));return r.grid=i(r),r.text=a(r),r.line=o(r),r.box=s(r),r.update(t),r}c.setDirty=function(){this.dirty=this.pickDirty=!0},c.setOverlayDirty=function(){this.dirty=!0},c.nextDepthValue=function(){return this._depthCounter++/65536},c.draw=function(){var t=this.gl,e=this.screenBox,r=this.viewBox,n=this.dataBox,i=this.pixelRatio,a=this.grid,o=this.line,s=this.text,l=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,t.bindFramebuffer(t.FRAMEBUFFER,null),t.enable(t.SCISSOR_TEST),t.disable(t.DEPTH_TEST),t.depthFunc(t.LESS),t.depthMask(!1),t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD,t.FUNC_ADD),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.borderColor){t.scissor(e[0],e[1],e[2]-e[0],e[3]-e[1]);var c=this.borderColor;t.clearColor(c[0]*c[3],c[1]*c[3],c[2]*c[3],c[3]),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}t.scissor(r[0],r[1],r[2]-r[0],r[3]-r[1]),t.viewport(r[0],r[1],r[2]-r[0],r[3]-r[1]);var u=this.backgroundColor;t.clearColor(u[0]*u[3],u[1]*u[3],u[2]*u[3],u[3]),t.clear(t.COLOR_BUFFER_BIT),a.draw();var d=this.zeroLineEnable,h=this.zeroLineColor,g=this.zeroLineWidth;if(d[0]||d[1]){o.bind();for(var f=0;f<2;++f)if(d[f]&&n[f]<=0&&n[f+2]>=0){var p=e[f]-n[f]*(e[f+2]-e[f])/(n[f+2]-n[f]);0===f?o.drawLine(p,e[1],p,e[3],g[f],h[f]):o.drawLine(e[0],p,e[2],p,g[f],h[f])}}for(f=0;f<l.length;++f)l[f].draw();t.viewport(e[0],e[1],e[2]-e[0],e[3]-e[1]),t.scissor(e[0],e[1],e[2]-e[0],e[3]-e[1]),this.grid.drawTickMarks(),o.bind();var m=this.borderLineEnable,y=this.borderLineWidth,b=this.borderLineColor;for(m[1]&&o.drawLine(r[0],r[1]-.5*y[1]*i,r[0],r[3]+.5*y[3]*i,y[1],b[1]),m[0]&&o.drawLine(r[0]-.5*y[0]*i,r[1],r[2]+.5*y[2]*i,r[1],y[0],b[0]),m[3]&&o.drawLine(r[2],r[1]-.5*y[1]*i,r[2],r[3]+.5*y[3]*i,y[3],b[3]),m[2]&&o.drawLine(r[0]-.5*y[0]*i,r[3],r[2]+.5*y[2]*i,r[3],y[2],b[2]),s.bind(),f=0;f<2;++f)s.drawTicks(f);this.titleEnable&&s.drawTitle();var v=this.overlays;for(f=0;f<v.length;++f)v[f].draw();t.disable(t.SCISSOR_TEST),t.disable(t.BLEND),t.depthMask(!0)}},c.drawPick=function(){if(!this.static){var t=this.pickBuffer;this.gl,this._pickTimeout=null,t.begin();for(var e=1,r=this.objects,n=0;n<r.length;++n)e=r[n].drawPick(e);t.end()}},c.pick=function(t,e){if(!this.static){var r=this.pixelRatio,n=this.pickPixelRatio,i=this.viewBox,a=0|Math.round((t-i[0]/r)*n),o=0|Math.round((e-i[1]/r)*n),s=this.pickBuffer.query(a,o,this.pickRadius);if(!s)return null;for(var l=s.id+(s.value[0]<<8)+(s.value[1]<<16)+(s.value[2]<<24),c=this.objects,u=0;u<c.length;++u){var d=c[u].pick(a,o,l);if(d)return d}return null}},c.setScreenBox=function(t){var e=this.screenBox,r=this.pixelRatio;e[0]=0|Math.round(t[0]*r),e[1]=0|Math.round(t[1]*r),e[2]=0|Math.round(t[2]*r),e[3]=0|Math.round(t[3]*r),this.setDirty()},c.setDataBox=function(t){var e=this.dataBox;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3])&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this.setDirty())},c.setViewBox=function(t){var e=this.pixelRatio,r=this.viewBox;r[0]=0|Math.round(t[0]*e),r[1]=0|Math.round(t[1]*e),r[2]=0|Math.round(t[2]*e),r[3]=0|Math.round(t[3]*e);var n=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((t[2]-t[0])*n),0|Math.round((t[3]-t[1])*n)],this.setDirty()},c.update=function(t){t=t||{};var e=this.gl;this.pixelRatio=t.pixelRatio||1;var r=this.pixelRatio;this.pickPixelRatio=Math.max(r,1),this.setScreenBox(t.screenBox||[0,0,e.drawingBufferWidth/r,e.drawingBufferHeight/r]),this.screenBox,this.setViewBox(t.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/r,.125*(this.screenBox[3]-this.screenBox[1])/r,.875*(this.screenBox[2]-this.screenBox[0])/r,.875*(this.screenBox[3]-this.screenBox[1])/r]);var n=this.viewBox,i=(n[2]-n[0])/(n[3]-n[1]);this.setDataBox(t.dataBox||[-10,-10/i,10,10/i]),this.borderColor=!1!==t.borderColor&&(t.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(t.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(t.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(t.gridLineWidth||[1,1]).slice(),this.gridLineColor=u(t.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(t.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(t.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=u(t.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(t.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(t.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=u(t.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(t.titleCenter||[.5*(n[0]+n[2])/r,(n[3]+120)/r]).slice(),this.titleEnable=!("titleEnable"in t)||!!t.titleEnable,this.titleAngle=t.titleAngle||0,this.titleColor=(t.titleColor||[0,0,0,1]).slice(),this.labelPad=(t.labelPad||[15,15,15,15]).slice(),this.labelAngle=(t.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(t.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=u(t.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(t.tickPad||[15,15,15,15]).slice(),this.tickAngle=(t.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(t.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=u(t.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(t.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(t.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=u(t.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var a=t.ticks||[[],[]],o=this._tickBounds;o[0]=o[1]=1/0,o[2]=o[3]=-1/0;for(var s=0;s<2;++s){var l=a[s].slice(0);0!==l.length&&(l.sort(d),o[s]=Math.min(o[s],l[0].x),o[s+2]=Math.max(o[s+2],l[l.length-1].x))}this.grid.update({bounds:o,ticks:a}),this.text.update({bounds:o,ticks:a,labels:t.labels||["x","y"],labelSize:t.labelSize||[12,12],labelFont:t.labelFont||["sans-serif","sans-serif"],title:t.title||"",titleSize:t.titleSize||18,titleFont:t.titleFont||"sans-serif"}),this.static=!!t.static,this.setDirty()},c.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var t=this.objects.length-1;t>=0;--t)this.objects[t].dispose();for(this.objects.length=0,t=this.overlays.length-1;t>=0;--t)this.overlays[t].dispose();this.overlays.length=0,this.gl=null},c.addObject=function(t){this.objects.indexOf(t)<0&&(this.objects.push(t),this.setDirty())},c.removeObject=function(t){for(var e=this.objects,r=0;r<e.length;++r)if(e[r]===t){e.splice(r,1),this.setDirty();break}},c.addOverlay=function(t){this.overlays.indexOf(t)<0&&(this.overlays.push(t),this.setOverlayDirty())},c.removeOverlay=function(t){for(var e=this.overlays,r=0;r<e.length;++r)if(e[r]===t){e.splice(r,1),this.setOverlayDirty();break}}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(t,e,r){e.exports=c;var n=t("right-now"),i=t("3d-view"),a=t("mouse-change"),o=t("mouse-wheel"),s=t("mouse-event-offset"),l=t("has-passive-events");function c(t,e){t=t||document.body;var r=[.01,1/0];"distanceLimits"in(e=e||{})&&(r[0]=e.distanceLimits[0],r[1]=e.distanceLimits[1]),"zoomMin"in e&&(r[0]=e.zoomMin),"zoomMax"in e&&(r[1]=e.zoomMax);var c=i({center:e.center||[0,0,0],up:e.up||[0,1,0],eye:e.eye||[0,0,10],mode:e.mode||"orbit",distanceLimits:r}),u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d=0,h=t.clientWidth,g=t.clientHeight,f={keyBindingMode:"rotate",enableWheel:!0,view:c,element:t,delay:e.delay||16,rotateSpeed:e.rotateSpeed||1,zoomSpeed:e.zoomSpeed||1,translateSpeed:e.translateSpeed||1,flipX:!!e.flipX,flipY:!!e.flipY,modes:c.modes,_ortho:e._ortho||e.projection&&"orthographic"===e.projection.type||!1,tick:function(){var e=n(),r=this.delay,i=e-2*r;c.idle(e-r),c.recalcMatrix(i),c.flush(e-(100+2*r));for(var a=!0,o=c.computedMatrix,s=0;s<16;++s)a=a&&u[s]===o[s],u[s]=o[s];var l=t.clientWidth===h&&t.clientHeight===g;return h=t.clientWidth,g=t.clientHeight,a?!l:(d=Math.exp(c.computedRadius[0]),!0)},lookAt:function(t,e,r){c.lookAt(c.lastT(),t,e,r)},rotate:function(t,e,r){c.rotate(c.lastT(),t,e,r)},pan:function(t,e,r){c.pan(c.lastT(),t,e,r)},translate:function(t,e,r){c.translate(c.lastT(),t,e,r)}};return Object.defineProperties(f,{matrix:{get:function(){return c.computedMatrix},set:function(t){return c.setMatrix(c.lastT(),t),c.computedMatrix},enumerable:!0},mode:{get:function(){return c.getMode()},set:function(t){var e=c.computedUp.slice(),r=c.computedEye.slice(),i=c.computedCenter.slice();if(c.setMode(t),"turntable"===t){var a=n();c._active.lookAt(a,r,i,e),c._active.lookAt(a+500,r,i,[0,0,1]),c._active.flush(a)}return c.getMode()},enumerable:!0},center:{get:function(){return c.computedCenter},set:function(t){return c.lookAt(c.lastT(),null,t),c.computedCenter},enumerable:!0},eye:{get:function(){return c.computedEye},set:function(t){return c.lookAt(c.lastT(),t),c.computedEye},enumerable:!0},up:{get:function(){return c.computedUp},set:function(t){return c.lookAt(c.lastT(),null,null,t),c.computedUp},enumerable:!0},distance:{get:function(){return d},set:function(t){return c.setDistance(c.lastT(),t),t},enumerable:!0},distanceLimits:{get:function(){return c.getDistanceLimits(r)},set:function(t){return c.setDistanceLimits(t),t},enumerable:!0}}),t.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),f._lastX=-1,f._lastY=-1,f._lastMods={shift:!1,control:!1,alt:!1,meta:!1},f.enableMouseListeners=function(){function e(e,r,i,a){var o=f.keyBindingMode;if(!1!==o){var s="rotate"===o,l="pan"===o,u="zoom"===o,h=!!a.control,g=!!a.alt,p=!!a.shift,m=!!(1&e),y=!!(2&e),b=!!(4&e),v=1/t.clientHeight,x=v*(r-f._lastX),I=v*(i-f._lastY),B=f.flipX?1:-1,C=f.flipY?1:-1,F=Math.PI*f.rotateSpeed,A=n();if(-1!==f._lastX&&-1!==f._lastY&&((s&&m&&!h&&!g&&!p||m&&!h&&!g&&p)&&c.rotate(A,B*F*x,-C*F*I,0),(l&&m&&!h&&!g&&!p||y||m&&h&&!g&&!p)&&c.pan(A,-f.translateSpeed*x*d,f.translateSpeed*I*d,0),u&&m&&!h&&!g&&!p||b||m&&!h&&g&&!p)){var Q=-f.zoomSpeed*I/window.innerHeight*(A-c.lastT())*100;c.pan(A,0,0,d*(Math.exp(Q)-1))}return f._lastX=r,f._lastY=i,f._lastMods=a,!0}}f.mouseListener=a(t,e),t.addEventListener("touchstart",(function(r){var n=s(r.changedTouches[0],t);e(0,n[0],n[1],f._lastMods),e(1,n[0],n[1],f._lastMods)}),!!l&&{passive:!0}),t.addEventListener("touchmove",(function(r){var n=s(r.changedTouches[0],t);e(1,n[0],n[1],f._lastMods),r.preventDefault()}),!!l&&{passive:!1}),t.addEventListener("touchend",(function(t){e(0,f._lastX,f._lastY,f._lastMods)}),!!l&&{passive:!0}),f.wheelListener=o(t,(function(t,e){if(!1!==f.keyBindingMode&&f.enableWheel){var r=f.flipX?1:-1,i=f.flipY?1:-1,a=n();if(Math.abs(t)>Math.abs(e))c.rotate(a,0,0,-t*r*Math.PI*f.rotateSpeed/window.innerWidth);else if(!f._ortho){var o=-f.zoomSpeed*i*e/window.innerHeight*(a-c.lastT())/20;c.pan(a,0,0,d*(Math.exp(o)-1))}}}),!0)},f.enableMouseListeners(),f}},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(t,e,r){var n=t("glslify"),i=t("gl-shader"),a=n(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),o=n(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);e.exports=function(t){return i(t,a,o,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(t,e,r){var n=t("./camera.js"),i=t("gl-axes3d"),a=t("gl-axes3d/properties"),o=t("gl-spikes3d"),s=t("gl-select-static"),l=t("gl-fbo"),c=t("a-big-triangle"),u=t("mouse-change"),d=t("gl-mat4/perspective"),h=t("gl-mat4/ortho"),g=t("./lib/shader"),f=t("is-mobile")({tablet:!0,featureDetect:!0});function p(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function m(t,e){var r=null;try{(r=t.getContext("webgl",e))||(r=t.getContext("experimental-webgl",e))}catch(t){return null}return r}function y(t){var e=Math.round(Math.log(Math.abs(t))/Math.log(10));if(e<0){var r=Math.round(Math.pow(10,-e));return Math.ceil(t*r)/r}return e>0?(r=Math.round(Math.pow(10,e)),Math.ceil(t/r)*r):Math.ceil(t)}function b(t){return"boolean"!=typeof t||t}function v(t){(t=t||{}).camera=t.camera||{};var e=t.canvas;e||(e=document.createElement("canvas"),t.container?t.container.appendChild(e):document.body.appendChild(e));var r=t.gl;if(r||(t.glOptions&&(f=!!t.glOptions.preserveDrawingBuffer),r=m(e,t.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:f})),!r)throw new Error("webgl not supported");var d=t.bounds||[[-10,-10,-10],[10,10,10]],h=new p,v=l(r,r.drawingBufferWidth,r.drawingBufferHeight,{preferFloat:!f}),I=g(r),B=t.cameraObject&&!0===t.cameraObject._ortho||t.camera.projection&&"orthographic"===t.camera.projection.type||!1,C={eye:t.camera.eye||[2,0,0],center:t.camera.center||[0,0,0],up:t.camera.up||[0,1,0],zoomMin:t.camera.zoomMax||.1,zoomMax:t.camera.zoomMin||100,mode:t.camera.mode||"turntable",_ortho:B},F=t.axes||{},A=i(r,F);A.enable=!F.disable;var Q=t.spikes||{},_=o(r,Q),w=[],U=[],S=[],E=[],L=!0,T=!0,R={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},k=(T=!0,[r.drawingBufferWidth,r.drawingBufferHeight]),G=t.cameraObject||n(e,C),N={gl:r,contextLost:!1,pixelRatio:t.pixelRatio||1,canvas:e,selection:h,camera:G,axes:A,axesPixels:null,spikes:_,bounds:d,objects:w,shape:k,aspect:t.aspectRatio||[1,1,1],pickRadius:t.pickRadius||10,zNear:t.zNear||.01,zFar:t.zFar||1e3,fovy:t.fovy||Math.PI/4,clearColor:t.clearColor||[0,0,0,0],autoResize:b(t.autoResize),autoBounds:b(t.autoBounds),autoScale:!!t.autoScale,autoCenter:b(t.autoCenter),clipToBounds:b(t.clipToBounds),snapToData:!!t.snapToData,onselect:t.onselect||null,onrender:t.onrender||null,onclick:t.onclick||null,cameraParams:R,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(t){this.aspect[0]=t.x,this.aspect[1]=t.y,this.aspect[2]=t.z,T=!0},setBounds:function(t,e){this.bounds[0][t]=e.min,this.bounds[1][t]=e.max},setClearColor:function(t){this.clearColor=t},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},M=[r.drawingBufferWidth/N.pixelRatio|0,r.drawingBufferHeight/N.pixelRatio|0];function D(){if(!N._stopped&&N.autoResize){var t=e.parentNode,r=1,n=1;t&&t!==document.body?(r=t.clientWidth,n=t.clientHeight):(r=window.innerWidth,n=window.innerHeight);var i=0|Math.ceil(r*N.pixelRatio),a=0|Math.ceil(n*N.pixelRatio);if(i!==e.width||a!==e.height){e.width=i,e.height=a;var o=e.style;o.position=o.position||"absolute",o.left="0px",o.top="0px",o.width=r+"px",o.height=n+"px",L=!0}}}function X(){for(var t=w.length,e=E.length,n=0;n<e;++n)S[n]=0;t:for(n=0;n<t;++n){var i=w[n],a=i.pickSlots;if(a){for(var o=0;o<e;++o)if(S[o]+a<255){U[n]=o,i.setPickBase(S[o]+1),S[o]+=a;continue t}var l=s(r,k);U[n]=e,E.push(l),S.push(a),i.setPickBase(1),e+=1}else U[n]=-1}for(;e>0&&0===S[e-1];)S.pop(),E.pop().dispose()}function V(){if(N.contextLost)return!0;r.isContextLost()&&(N.contextLost=!0,N.mouseListener.enabled=!1,N.selection.object=null,N.oncontextloss&&N.oncontextloss())}function W(){if(!V()){r.colorMask(!0,!0,!0,!0),r.depthMask(!0),r.disable(r.BLEND),r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL);for(var t=w.length,e=E.length,n=0;n<e;++n){var i=E[n];i.shape=M,i.begin();for(var a=0;a<t;++a)if(U[a]===n){var o=w[a];o.drawPick&&(o.pixelRatio=1,o.drawPick(R))}i.end()}}}N.autoResize&&D(),window.addEventListener("resize",D),N.update=function(t){N._stopped||(L=!0,T=!0)},N.add=function(t){N._stopped||(t.axes=A,w.push(t),U.push(-1),L=!0,T=!0,X())},N.remove=function(t){if(!N._stopped){var e=w.indexOf(t);e<0||(w.splice(e,1),U.pop(),L=!0,T=!0,X())}},N.dispose=function(){if(!N._stopped&&(N._stopped=!0,window.removeEventListener("resize",D),e.removeEventListener("webglcontextlost",V),N.mouseListener.enabled=!1,!N.contextLost)){A.dispose(),_.dispose();for(var t=0;t<w.length;++t)w[t].dispose();for(v.dispose(),t=0;t<E.length;++t)E[t].dispose();I.dispose(),r=null,A=null,_=null,w=[]}},N._mouseRotating=!1,N._prevButtons=0,N.enableMouseListeners=function(){N.mouseListener=u(e,(function(t,e,r){if(!N._stopped){var n=E.length,i=w.length,a=h.object;h.distance=1/0,h.mouse[0]=e,h.mouse[1]=r,h.object=null,h.screen=null,h.dataCoordinate=h.dataPosition=null;var o=!1;if(t&&N._prevButtons)N._mouseRotating=!0;else{N._mouseRotating&&(T=!0),N._mouseRotating=!1;for(var s=0;s<n;++s){var l=E[s].query(e,M[1]-r-1,N.pickRadius);if(l){if(l.distance>h.distance)continue;for(var c=0;c<i;++c){var u=w[c];if(U[c]===s){var d=u.pick(l);d&&(h.buttons=t,h.screen=l.coord,h.distance=l.distance,h.object=u,h.index=d.distance,h.dataPosition=d.position,h.dataCoordinate=d.dataCoordinate,h.data=d,o=!0)}}}}}a&&a!==h.object&&(a.highlight&&a.highlight(null),L=!0),h.object&&(h.object.highlight&&h.object.highlight(h.data),L=!0),(o=o||h.object!==a)&&N.onselect&&N.onselect(h),1&t&&!(1&N._prevButtons)&&N.onclick&&N.onclick(h),N._prevButtons=t}}))},e.addEventListener("webglcontextlost",V);var Z=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],O=[Z[0].slice(),Z[1].slice()];function $(){if(!V()){D();var t=N.camera.tick();R.view=N.camera.matrix,L=L||t,T=T||t,A.pixelRatio=N.pixelRatio,_.pixelRatio=N.pixelRatio;var e=w.length,n=Z[0],i=Z[1];n[0]=n[1]=n[2]=1/0,i[0]=i[1]=i[2]=-1/0;for(var o=0;o<e;++o){(Q=w[o]).pixelRatio=N.pixelRatio,Q.axes=N.axes,L=L||!!Q.dirty,T=T||!!Q.dirty;var s=Q.bounds;if(s)for(var l=s[0],u=s[1],d=0;d<3;++d)n[d]=Math.min(n[d],l[d]),i[d]=Math.max(i[d],u[d])}var g=N.bounds;if(N.autoBounds)for(d=0;d<3;++d){if(i[d]<n[d])n[d]=-1,i[d]=1;else{n[d]===i[d]&&(n[d]-=1,i[d]+=1);var f=.05*(i[d]-n[d]);n[d]=n[d]-f,i[d]=i[d]+f}g[0][d]=n[d],g[1][d]=i[d]}var p=!1;for(d=0;d<3;++d)p=p||O[0][d]!==g[0][d]||O[1][d]!==g[1][d],O[0][d]=g[0][d],O[1][d]=g[1][d];if(T=T||p,L=L||p){if(p){var m=[0,0,0];for(o=0;o<3;++o)m[o]=y((g[1][o]-g[0][o])/10);A.autoTicks?A.update({bounds:g,tickSpacing:m}):A.update({bounds:g})}var b=r.drawingBufferWidth,C=r.drawingBufferHeight;for(k[0]=b,k[1]=C,M[0]=0|Math.max(b/N.pixelRatio,1),M[1]=0|Math.max(C/N.pixelRatio,1),x(N,B),o=0;o<e;++o)(Q=w[o]).axesBounds=g,N.clipToBounds&&(Q.clipBounds=g);h.object&&(N.snapToData?_.position=h.dataCoordinate:_.position=h.dataPosition,_.bounds=g),T&&(T=!1,W()),N.axesPixels=a(N.axes,R,b,C),N.onrender&&N.onrender(),r.bindFramebuffer(r.FRAMEBUFFER,null),r.viewport(0,0,b,C),N.clearRGBA(),r.depthMask(!0),r.colorMask(!0,!0,!0,!0),r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL),r.disable(r.BLEND),r.disable(r.CULL_FACE);var F=!1;for(A.enable&&(F=F||A.isTransparent(),A.draw(R)),_.axes=A,h.object&&_.draw(R),r.disable(r.CULL_FACE),o=0;o<e;++o)(Q=w[o]).axes=A,Q.pixelRatio=N.pixelRatio,Q.isOpaque&&Q.isOpaque()&&Q.draw(R),Q.isTransparent&&Q.isTransparent()&&(F=!0);if(F){for(v.shape=k,v.bind(),r.clear(r.DEPTH_BUFFER_BIT),r.colorMask(!1,!1,!1,!1),r.depthMask(!0),r.depthFunc(r.LESS),A.enable&&A.isTransparent()&&A.drawTransparent(R),o=0;o<e;++o)(Q=w[o]).isOpaque&&Q.isOpaque()&&Q.draw(R);for(r.enable(r.BLEND),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.colorMask(!0,!0,!0,!0),r.depthMask(!1),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),A.isTransparent()&&A.drawTransparent(R),o=0;o<e;++o){var Q;(Q=w[o]).isTransparent&&Q.isTransparent()&&Q.drawTransparent(R)}r.bindFramebuffer(r.FRAMEBUFFER,null),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.disable(r.DEPTH_TEST),I.bind(),v.color[0].bind(0),I.uniforms.accumBuffer=0,c(r),r.disable(r.BLEND)}for(L=!1,o=0;o<e;++o)w[o].dirty=!1}}}function H(){N._stopped||N.contextLost||($(),requestAnimationFrame(H))}return N.enableMouseListeners(),H(),N.redraw=function(){N._stopped||(L=!0,$())},N}function x(t,e){var r=t.bounds,n=t.cameraParams,i=n.projection,a=n.model,o=t.gl.drawingBufferWidth,s=t.gl.drawingBufferHeight,l=t.zNear,c=t.zFar,u=t.fovy,g=o/s;e?(h(i,-g,g,-1,1,l,c),n._ortho=!0):(d(i,u,g,l,c),n._ortho=!1);for(var f=0;f<16;++f)a[f]=0;a[15]=1;var p=0;for(f=0;f<3;++f)p=Math.max(p,r[1][f]-r[0][f]);for(f=0;f<3;++f)t.autoScale?a[5*f]=t.aspect[f]/(r[1][f]-r[0][f]):a[5*f]=1/p,t.autoCenter&&(a[12+f]=.5*-a[5*f]*(r[0][f]+r[1][f]))}e.exports={createScene:v,createCamera:n}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(t,e,r){var n=t("glslify");r.pointVertex=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),r.pointFragment=n(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),r.pickVertex=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),r.pickFragment=n(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:231}],123:[function(t,e,r){var n=t("gl-shader"),i=t("gl-buffer"),a=t("typedarray-pool"),o=t("./lib/shader");function s(t,e,r,n,i){this.plot=t,this.offsetBuffer=e,this.pickBuffer=r,this.shader=n,this.pickShader=i,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}e.exports=h;var l,c,u=s.prototype;function d(t,e){var r,n=0,i=t.length>>>1;for(r=0;r<i;r++){var a=t[2*r],o=t[2*r+1];a>=e[0]&&a<=e[2]&&o>=e[1]&&o<=e[3]&&n++}return n}function h(t,e){var r=t.gl,a=new s(t,i(r),i(r),n(r,o.pointVertex,o.pointFragment),n(r,o.pickVertex,o.pickFragment));return a.update(e),t.addObject(a),a}u.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},u.update=function(t){var e;function r(e,r){return e in t?t[e]:r}t=t||{},this.sizeMin=r("sizeMin",.5),this.sizeMax=r("sizeMax",20),this.color=r("color",[1,0,0,1]).slice(),this.areaRatio=r("areaRatio",1),this.borderColor=r("borderColor",[0,0,0,1]).slice(),this.blend=r("blend",!1);var n=t.positions.length>>>1,i=t.positions instanceof Float32Array,o=t.idToIndex instanceof Int32Array&&t.idToIndex.length>=n,s=t.positions,l=i?s:a.mallocFloat32(s.length),c=o?t.idToIndex:a.mallocInt32(n);if(i||l.set(s),!o)for(l.set(s),e=0;e<n;e++)c[e]=e;this.points=s,this.offsetBuffer.update(l),this.pickBuffer.update(c),i||a.free(l),o||a.free(c),this.pointCount=n,this.pickOffset=0},u.unifiedDraw=(l=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0],function(t){var e=void 0!==t,r=e?this.pickShader:this.shader,n=this.plot.gl,i=this.plot.dataBox;if(0===this.pointCount)return t;var a=i[2]-i[0],o=i[3]-i[1],s=d(this.points,i),u=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(s,.33333)));l[0]=2/a,l[4]=2/o,l[6]=-2*i[0]/a-1,l[7]=-2*i[1]/o-1,this.offsetBuffer.bind(),r.bind(),r.attributes.position.pointer(),r.uniforms.matrix=l,r.uniforms.color=this.color,r.uniforms.borderColor=this.borderColor,r.uniforms.pointCloud=u<5,r.uniforms.pointSize=u,r.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),e&&(c[0]=255&t,c[1]=t>>8&255,c[2]=t>>16&255,c[3]=t>>24&255,this.pickBuffer.bind(),r.attributes.pickId.pointer(n.UNSIGNED_BYTE),r.uniforms.pickOffset=c,this.pickOffset=t);var h=n.getParameter(n.BLEND),g=n.getParameter(n.DITHER);return h&&!this.blend&&n.disable(n.BLEND),g&&n.disable(n.DITHER),n.drawArrays(n.POINTS,0,this.pointCount),h&&!this.blend&&n.enable(n.BLEND),g&&n.enable(n.DITHER),t+this.pointCount}),u.draw=u.unifiedDraw,u.drawPick=u.unifiedDraw,u.pick=function(t,e,r){var n=this.pickOffset,i=this.pointCount;if(r<n||r>=n+i)return null;var a=r-n,o=this.points;return{object:this,pointId:a,dataCoord:[o[2*a],o[2*a+1]]}}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(t,e,r){function n(t,e,r,n){var i,a,o,s,l,c=e[0],u=e[1],d=e[2],h=e[3],g=r[0],f=r[1],p=r[2],m=r[3];return(a=c*g+u*f+d*p+h*m)<0&&(a=-a,g=-g,f=-f,p=-p,m=-m),1-a>1e-6?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-n)*i)/o,l=Math.sin(n*i)/o):(s=1-n,l=n),t[0]=s*c+l*g,t[1]=s*u+l*f,t[2]=s*d+l*p,t[3]=s*h+l*m,t}e.exports=n},{}],125:[function(t,e,r){e.exports=function(t){return t||0===t?t.toString():""}},{}],126:[function(t,e,r){var n=t("vectorize-text");e.exports=a;var i={};function a(t,e,r){var a=i[e];if(a||(a=i[e]={}),t in a)return a[t];var o={textAlign:"center",textBaseline:"middle",lineHeight:1,font:e,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},s=n(t,o);o.triangles=!1;var l,c,u=n(t,o);if(r&&1!==r){for(l=0;l<s.positions.length;++l)for(c=0;c<s.positions[l].length;++c)s.positions[l][c]/=r;for(l=0;l<u.positions.length;++l)for(c=0;c<u.positions[l].length;++c)u.positions[l][c]/=r}var d=[[1/0,1/0],[-1/0,-1/0]],h=u.positions.length;for(l=0;l<h;++l){var g=u.positions[l];for(c=0;c<2;++c)d[0][c]=Math.min(d[0][c],g[c]),d[1][c]=Math.max(d[1][c],g[c])}return a[t]=[s,u,d]}},{"vectorize-text":311}],127:[function(t,e,r){var n=t("gl-shader"),i=t("glslify"),a=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),o=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),l=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),c=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),u=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],d={vertex:a,fragment:l,attributes:u},h={vertex:o,fragment:l,attributes:u},g={vertex:s,fragment:l,attributes:u},f={vertex:a,fragment:c,attributes:u},p={vertex:o,fragment:c,attributes:u},m={vertex:s,fragment:c,attributes:u};function y(t,e){var r=n(t,e),i=r.attributes;return i.position.location=0,i.color.location=1,i.glyph.location=2,i.id.location=3,r}r.createPerspective=function(t){return y(t,d)},r.createOrtho=function(t){return y(t,h)},r.createProject=function(t){return y(t,g)},r.createPickPerspective=function(t){return y(t,f)},r.createPickOrtho=function(t){return y(t,p)},r.createPickProject=function(t){return y(t,m)}},{"gl-shader":132,glslify:231}],128:[function(t,e,r){var n=t("is-string-blank"),i=t("gl-buffer"),a=t("gl-vao"),o=t("typedarray-pool"),s=t("gl-mat4/multiply"),l=t("./lib/shaders"),c=t("./lib/glyphs"),u=t("./lib/get-simple-string"),d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function h(t,e){var r=t[0],n=t[1],i=t[2],a=t[3];return t[0]=e[0]*r+e[4]*n+e[8]*i+e[12]*a,t[1]=e[1]*r+e[5]*n+e[9]*i+e[13]*a,t[2]=e[2]*r+e[6]*n+e[10]*i+e[14]*a,t[3]=e[3]*r+e[7]*n+e[11]*i+e[15]*a,t}function g(t,e,r,n){return h(n,n),h(n,n),h(n,n)}function f(t,e){this.index=t,this.dataCoordinate=this.position=e}function p(t){return!0===t||t>1?1:t}function m(t,e,r,n,i,a,o,s,l,c,u,d){this.gl=t,this.pixelRatio=1,this.shader=e,this.orthoShader=r,this.projectShader=n,this.pointBuffer=i,this.colorBuffer=a,this.glyphBuffer=o,this.idBuffer=s,this.vao=l,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=c,this.pickOrthoShader=u,this.pickProjectShader=d,this.points=[],this._selectResult=new f(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}e.exports=R;var y=m.prototype;y.pickSlots=1,y.setPickBase=function(t){this.pickId=t},y.isTransparent=function(){if(this.hasAlpha)return!0;for(var t=0;t<3;++t)if(this.axesProject[t]&&this.projectHasAlpha)return!0;return!1},y.isOpaque=function(){if(!this.hasAlpha)return!0;for(var t=0;t<3;++t)if(this.axesProject[t]&&!this.projectHasAlpha)return!0;return!1};var b=[0,0],v=[0,0,0],x=[0,0,0],I=[0,0,0,1],B=[0,0,0,1],C=d.slice(),F=[0,0,0],A=[[0,0,0],[0,0,0]];function Q(t){return t[0]=t[1]=t[2]=0,t}function _(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=1,t}function w(t,e,r,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[r]=n,t}function U(t){for(var e=A,r=0;r<2;++r)for(var n=0;n<3;++n)e[r][n]=Math.max(Math.min(t[r][n],1e8),-1e8);return e}function S(t,e,r,n){var i,a=e.axesProject,o=e.gl,l=t.uniforms,c=r.model||d,u=r.view||d,h=r.projection||d,f=e.axesBounds,p=U(e.clipBounds);i=e.axes&&e.axes.lastCubeProps?e.axes.lastCubeProps.axis:[1,1,1],b[0]=2/o.drawingBufferWidth,b[1]=2/o.drawingBufferHeight,t.bind(),l.view=u,l.projection=h,l.screenSize=b,l.highlightId=e.highlightId,l.highlightScale=e.highlightScale,l.clipBounds=p,l.pickGroup=e.pickId/255,l.pixelRatio=n;for(var m=0;m<3;++m)if(a[m]){l.scale=e.projectScale[m],l.opacity=e.projectOpacity[m];for(var y=C,A=0;A<16;++A)y[A]=0;for(A=0;A<4;++A)y[5*A]=1;y[5*m]=0,i[m]<0?y[12+m]=f[0][m]:y[12+m]=f[1][m],s(y,c,y),l.model=y;var S=(m+1)%3,E=(m+2)%3,L=Q(v),T=Q(x);L[S]=1,T[E]=1;var R=g(h,u,c,_(I,L)),k=g(h,u,c,_(B,T));if(Math.abs(R[1])>Math.abs(k[1])){var G=R;R=k,k=G,G=L,L=T,T=G;var N=S;S=E,E=N}R[0]<0&&(L[S]=-1),k[1]>0&&(T[E]=-1);var M=0,D=0;for(A=0;A<4;++A)M+=Math.pow(c[4*S+A],2),D+=Math.pow(c[4*E+A],2);L[S]/=Math.sqrt(M),T[E]/=Math.sqrt(D),l.axes[0]=L,l.axes[1]=T,l.fragClipBounds[0]=w(F,p[0],m,-1e8),l.fragClipBounds[1]=w(F,p[1],m,1e8),e.vao.bind(),e.vao.draw(o.TRIANGLES,e.vertexCount),e.lineWidth>0&&(o.lineWidth(e.lineWidth*n),e.vao.draw(o.LINES,e.lineVertexCount,e.vertexCount)),e.vao.unbind()}}var E=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function L(t,e,r,n,i,a,o){var s=r.gl;if((a===r.projectHasAlpha||o)&&S(e,r,n,i),a===r.hasAlpha||o){t.bind();var l=t.uniforms;l.model=n.model||d,l.view=n.view||d,l.projection=n.projection||d,b[0]=2/s.drawingBufferWidth,b[1]=2/s.drawingBufferHeight,l.screenSize=b,l.highlightId=r.highlightId,l.highlightScale=r.highlightScale,l.fragClipBounds=E,l.clipBounds=r.axes.bounds,l.opacity=r.opacity,l.pickGroup=r.pickId/255,l.pixelRatio=i,r.vao.bind(),r.vao.draw(s.TRIANGLES,r.vertexCount),r.lineWidth>0&&(s.lineWidth(r.lineWidth*i),r.vao.draw(s.LINES,r.lineVertexCount,r.vertexCount)),r.vao.unbind()}}function T(t,e,r,i){var a;a=Array.isArray(t)?e<t.length?t[e]:void 0:t,a=u(a);var o=!0;n(a)&&(a="â¼",o=!1);var s=c(a,r,i);return{mesh:s[0],lines:s[1],bounds:s[2],visible:o}}function R(t){var e=t.gl,r=l.createPerspective(e),n=l.createOrtho(e),o=l.createProject(e),s=l.createPickPerspective(e),c=l.createPickOrtho(e),u=l.createPickProject(e),d=i(e),h=i(e),g=i(e),f=i(e),p=new m(e,r,n,o,d,h,g,f,a(e,[{buffer:d,size:3,type:e.FLOAT},{buffer:h,size:4,type:e.FLOAT},{buffer:g,size:2,type:e.FLOAT},{buffer:f,size:4,type:e.UNSIGNED_BYTE,normalized:!0}]),s,c,u);return p.update(t),p}y.draw=function(t){L(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,t,this.pixelRatio,!1,!1)},y.drawTransparent=function(t){L(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,t,this.pixelRatio,!0,!1)},y.drawPick=function(t){L(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,t,1,!0,!0)},y.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=t.value[2]+(t.value[1]<<8)+(t.value[0]<<16);if(e>=this.pointCount||e<0)return null;var r=this.points[e],n=this._selectResult;n.index=e;for(var i=0;i<3;++i)n.position[i]=n.dataCoordinate[i]=r[i];return n},y.highlight=function(t){if(t){var e=t.index,r=255&e,n=e>>8&255,i=e>>16&255;this.highlightId=[r/255,n/255,i/255,0]}else this.highlightId=[1,1,1,1]},y.update=function(t){if("perspective"in(t=t||{})&&(this.useOrtho=!t.perspective),"orthographic"in t&&(this.useOrtho=!!t.orthographic),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"project"in t)if(Array.isArray(t.project))this.axesProject=t.project;else{var e=!!t.project;this.axesProject=[e,e,e]}if("projectScale"in t)if(Array.isArray(t.projectScale))this.projectScale=t.projectScale.slice();else{var r=+t.projectScale;this.projectScale=[r,r,r]}if(this.projectHasAlpha=!1,"projectOpacity"in t){Array.isArray(t.projectOpacity)?this.projectOpacity=t.projectOpacity.slice():(r=+t.projectOpacity,this.projectOpacity=[r,r,r]);for(var n=0;n<3;++n)this.projectOpacity[n]=p(this.projectOpacity[n]),this.projectOpacity[n]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in t&&(this.opacity=p(t.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var i,a,s=t.position,l=t.font||"normal",c=t.alignment||[0,0];if(2===c.length)i=c[0],a=c[1];else for(i=[],a=[],n=0;n<c.length;++n)i[n]=c[n][0],a[n]=c[n][1];var u=[1/0,1/0,1/0],d=[-1/0,-1/0,-1/0],h=t.glyph,g=t.color,f=t.size,m=t.angle,y=t.lineColor,b=-1,v=0,x=0,I=0;if(s.length){I=s.length;t:for(n=0;n<I;++n){for(var B=s[n],C=0;C<3;++C)if(isNaN(B[C])||!isFinite(B[C]))continue t;var F=(D=T(h,n,l,this.pixelRatio)).mesh,A=D.lines,Q=D.bounds;v+=3*F.cells.length,x+=2*A.edges.length}}var _=v+x,w=o.mallocFloat(3*_),U=o.mallocFloat(4*_),S=o.mallocFloat(2*_),E=o.mallocUint32(_);if(_>0){var L=0,R=v,k=[0,0,0,1],G=[0,0,0,1],N=Array.isArray(g)&&Array.isArray(g[0]),M=Array.isArray(y)&&Array.isArray(y[0]);t:for(n=0;n<I;++n){for(b+=1,B=s[n],C=0;C<3;++C){if(isNaN(B[C])||!isFinite(B[C]))continue t;d[C]=Math.max(d[C],B[C]),u[C]=Math.min(u[C],B[C])}F=(D=T(h,n,l,this.pixelRatio)).mesh,A=D.lines,Q=D.bounds;var D,X=D.visible;if(X)if(Array.isArray(g)){if(3===(V=N?n<g.length?g[n]:[0,0,0,0]:g).length){for(C=0;C<3;++C)k[C]=V[C];k[3]=1}else if(4===V.length){for(C=0;C<4;++C)k[C]=V[C];!this.hasAlpha&&V[3]<1&&(this.hasAlpha=!0)}}else k[0]=k[1]=k[2]=0,k[3]=1;else k=[1,1,1,0];if(X)if(Array.isArray(y)){var V;if(3===(V=M?n<y.length?y[n]:[0,0,0,0]:y).length){for(C=0;C<3;++C)G[C]=V[C];G[C]=1}else if(4===V.length){for(C=0;C<4;++C)G[C]=V[C];!this.hasAlpha&&V[3]<1&&(this.hasAlpha=!0)}}else G[0]=G[1]=G[2]=0,G[3]=1;else G=[1,1,1,0];var W=.5;X?Array.isArray(f)?W=n<f.length?+f[n]:12:f?W=+f:this.useOrtho&&(W=12):W=0;var Z=0;Array.isArray(m)?Z=n<m.length?+m[n]:0:m&&(Z=+m);var O=Math.cos(Z),$=Math.sin(Z);for(B=s[n],C=0;C<3;++C)d[C]=Math.max(d[C],B[C]),u[C]=Math.min(u[C],B[C]);var H=i,Y=a;H=0,Array.isArray(i)?H=n<i.length?i[n]:0:i&&(H=i),Y=0,Array.isArray(a)?Y=n<a.length?a[n]:0:a&&(Y=a);var P=[H*=H>0?1-Q[0][0]:H<0?1+Q[1][0]:1,Y*=Y>0?1-Q[0][1]:Y<0?1+Q[1][1]:1],z=F.cells||[],J=F.positions||[];for(C=0;C<z.length;++C)for(var j=z[C],K=0;K<3;++K){for(var q=0;q<3;++q)w[3*L+q]=B[q];for(q=0;q<4;++q)U[4*L+q]=k[q];E[L]=b;var tt=J[j[K]];S[2*L]=W*(O*tt[0]-$*tt[1]+P[0]),S[2*L+1]=W*($*tt[0]+O*tt[1]+P[1]),L+=1}for(z=A.edges,J=A.positions,C=0;C<z.length;++C)for(j=z[C],K=0;K<2;++K){for(q=0;q<3;++q)w[3*R+q]=B[q];for(q=0;q<4;++q)U[4*R+q]=G[q];E[R]=b,tt=J[j[K]],S[2*R]=W*(O*tt[0]-$*tt[1]+P[0]),S[2*R+1]=W*($*tt[0]+O*tt[1]+P[1]),R+=1}}}this.bounds=[u,d],this.points=s,this.pointCount=s.length,this.vertexCount=v,this.lineVertexCount=x,this.pointBuffer.update(w),this.colorBuffer.update(U),this.glyphBuffer.update(S),this.idBuffer.update(E),o.free(w),o.free(U),o.free(S),o.free(E)},y.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(t,e,r){var n=t("glslify");r.boxVertex=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),r.boxFragment=n(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:231}],130:[function(t,e,r){var n=t("gl-shader"),i=t("gl-buffer"),a=t("./lib/shaders");function o(t,e,r){this.plot=t,this.boxBuffer=e,this.boxShader=r,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}e.exports=l;var s=o.prototype;function l(t,e){var r=t.gl,s=new o(t,i(r,[0,0,0,1,1,0,1,1]),n(r,a.boxVertex,a.boxFragment));return s.update(e),t.addOverlay(s),s}s.draw=function(){if(this.enabled){var t=this.plot,e=this.selectBox,r=this.borderWidth;this.innerFill;var n=this.innerColor;this.outerFill;var i=this.outerColor,a=this.borderColor,o=t.box,s=t.screenBox,l=t.dataBox,c=t.viewBox,u=t.pixelRatio,d=(e[0]-l[0])*(c[2]-c[0])/(l[2]-l[0])+c[0],h=(e[1]-l[1])*(c[3]-c[1])/(l[3]-l[1])+c[1],g=(e[2]-l[0])*(c[2]-c[0])/(l[2]-l[0])+c[0],f=(e[3]-l[1])*(c[3]-c[1])/(l[3]-l[1])+c[1];if(d=Math.max(d,c[0]),h=Math.max(h,c[1]),g=Math.min(g,c[2]),f=Math.min(f,c[3]),!(g<d||f<h)){o.bind();var p=s[2]-s[0],m=s[3]-s[1];if(this.outerFill&&(o.drawBox(0,0,p,h,i),o.drawBox(0,h,d,f,i),o.drawBox(0,f,p,m,i),o.drawBox(g,h,p,f,i)),this.innerFill&&o.drawBox(d,h,g,f,n),r>0){var y=r*u;o.drawBox(d-y,h-y,g+y,h+y,a),o.drawBox(d-y,f-y,g+y,f+y,a),o.drawBox(d-y,h-y,d+y,f+y,a),o.drawBox(g-y,h-y,g+y,f+y,a)}}}},s.update=function(t){t=t||{},this.innerFill=!!t.innerFill,this.outerFill=!!t.outerFill,this.innerColor=(t.innerColor||[0,0,0,.5]).slice(),this.outerColor=(t.outerColor||[0,0,0,.5]).slice(),this.borderColor=(t.borderColor||[0,0,0,1]).slice(),this.borderWidth=t.borderWidth||0,this.selectBox=(t.selectBox||this.selectBox).slice()},s.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(t,e,r){e.exports=d;var n=t("gl-fbo"),i=t("typedarray-pool"),a=t("ndarray"),o=t("bit-twiddle").nextPow2,s=function(t,e,r){for(var n=1e8,i=-1,a=-1,o=t.shape[0],s=t.shape[1],l=0;l<o;l++)for(var c=0;c<s;c++){var u=t.get(l,c,0),d=t.get(l,c,1),h=t.get(l,c,2),g=t.get(l,c,3);if(u<255||d<255||h<255||g<255){var f=e-l,p=r-c,m=f*f+p*p;m<n&&(n=m,i=l,a=c)}}return[i,a,n]};function l(t,e,r,n,i){this.coord=[t,e],this.id=r,this.value=n,this.distance=i}function c(t,e,r){this.gl=t,this.fbo=e,this.buffer=r,this._readTimeout=null;var n=this;this._readCallback=function(){n.gl&&(e.bind(),t.readPixels(0,0,e.shape[0],e.shape[1],t.RGBA,t.UNSIGNED_BYTE,n.buffer),n._readTimeout=null)}}var u=c.prototype;function d(t,e){var r=e[0],a=e[1];return new c(t,n(t,r,a,{}),i.mallocUint8(r*a*4))}Object.defineProperty(u,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(t){if(this.gl){this.fbo.shape=t;var e=this.fbo.shape[0],r=this.fbo.shape[1];if(r*e*4>this.buffer.length){i.free(this.buffer);for(var n=this.buffer=i.mallocUint8(o(r*e*4)),a=0;a<r*e*4;++a)n[a]=255}return t}}}),u.begin=function(){var t=this.gl;this.shape,t&&(this.fbo.bind(),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT))},u.end=function(){var t=this.gl;t&&(t.bindFramebuffer(t.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},u.query=function(t,e,r){if(!this.gl)return null;var n=this.fbo.shape.slice();t|=0,e|=0,"number"!=typeof r&&(r=1);var i=0|Math.min(Math.max(t-r,0),n[0]),o=0|Math.min(Math.max(t+r,0),n[0]),c=0|Math.min(Math.max(e-r,0),n[1]),u=0|Math.min(Math.max(e+r,0),n[1]);if(o<=i||u<=c)return null;var d=[o-i,u-c],h=a(this.buffer,[d[0],d[1],4],[4,4*n[0],1],4*(i+n[0]*c)),g=s(h.hi(d[0],d[1],1),r,r),f=g[0],p=g[1];return f<0||Math.pow(this.radius,2)<g[2]?null:new l(f+i|0,p+c|0,h.get(f,p,0),[h.get(f,p,1),h.get(f,p,2),h.get(f,p,3)],Math.sqrt(g[2]))},u.dispose=function(){this.gl&&(this.fbo.dispose(),i.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(t,e,r){var n=t("./lib/create-uniforms"),i=t("./lib/create-attributes"),a=t("./lib/reflect"),o=t("./lib/shader-cache"),s=t("./lib/runtime-reflect"),l=t("./lib/GLError");function c(t){this.gl=t,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var u=c.prototype;function d(t,e){return t.name<e.name?-1:1}function h(t,e,r,n,i){var a=new c(t);return a.update(e,r,n,i),a}u.bind=function(){var t;this.program||this._relink();var e=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),r=this.gl.lastAttribCount;if(e>r)for(t=r;t<e;t++)this.gl.enableVertexAttribArray(t);else if(r>e)for(t=e;t<r;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=e,this.gl.useProgram(this.program)},u.dispose=function(){for(var t=this.gl.lastAttribCount,e=0;e<t;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},u.update=function(t,e,r,c){if(!e||1===arguments.length){var u=t;t=u.vertex,e=u.fragment,r=u.uniforms,c=u.attributes}var h=this,g=h.gl,f=h._vref;h._vref=o.shader(g,g.VERTEX_SHADER,t),f&&f.dispose(),h.vertShader=h._vref.shader;var p=this._fref;if(h._fref=o.shader(g,g.FRAGMENT_SHADER,e),p&&p.dispose(),h.fragShader=h._fref.shader,!r||!c){var m=g.createProgram();if(g.attachShader(m,h.fragShader),g.attachShader(m,h.vertShader),g.linkProgram(m),!g.getProgramParameter(m,g.LINK_STATUS)){var y=g.getProgramInfoLog(m);throw new l(y,"Error linking program:"+y)}r=r||s.uniforms(g,m),c=c||s.attributes(g,m),g.deleteProgram(m)}(c=c.slice()).sort(d);var b,v=[],x=[],I=[];for(b=0;b<c.length;++b){var B=c[b];if(B.type.indexOf("mat")>=0){for(var C=0|B.type.charAt(B.type.length-1),F=new Array(C),A=0;A<C;++A)F[A]=I.length,x.push(B.name+"["+A+"]"),"number"==typeof B.location?I.push(B.location+A):Array.isArray(B.location)&&B.location.length===C&&"number"==typeof B.location[A]?I.push(0|B.location[A]):I.push(-1);v.push({name:B.name,type:B.type,locations:F})}else v.push({name:B.name,type:B.type,locations:[I.length]}),x.push(B.name),"number"==typeof B.location?I.push(0|B.location):I.push(-1)}var Q=0;for(b=0;b<I.length;++b)if(I[b]<0){for(;I.indexOf(Q)>=0;)Q+=1;I[b]=Q}var _=new Array(r.length);function w(){h.program=o.program(g,h._vref,h._fref,x,I);for(var t=0;t<r.length;++t)_[t]=g.getUniformLocation(h.program,r[t].name)}w(),h._relink=w,h.types={uniforms:a(r),attributes:a(c)},h.attributes=i(g,h,v,I),Object.defineProperty(h,"uniforms",n(g,h,r,_))},e.exports=h},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(t,e,r){function n(t,e,r){this.shortMessage=e||"",this.longMessage=r||"",this.rawError=t||"",this.message="gl-shader: "+(e||t||"")+(r?"\n"+r:""),this.stack=(new Error).stack}n.prototype=new Error,n.prototype.name="GLError",n.prototype.constructor=n,e.exports=n},{}],134:[function(t,e,r){e.exports=c;var n=t("./GLError");function i(t,e,r,n,i,a){this._gl=t,this._wrapper=e,this._index=r,this._locations=n,this._dimension=i,this._constFunc=a}var a=i.prototype;a.pointer=function(t,e,r,n){var i=this,a=i._gl,o=i._locations[i._index];a.vertexAttribPointer(o,i._dimension,t||a.FLOAT,!!e,r||0,n||0),a.enableVertexAttribArray(o)},a.set=function(t,e,r,n){return this._constFunc(this._locations[this._index],t,e,r,n)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(t){return t!==this._locations[this._index]&&(this._locations[this._index]=0|t,this._wrapper.program=null),0|t}});var o=[function(t,e,r){return void 0===r.length?t.vertexAttrib1f(e,r):t.vertexAttrib1fv(e,r)},function(t,e,r,n){return void 0===r.length?t.vertexAttrib2f(e,r,n):t.vertexAttrib2fv(e,r)},function(t,e,r,n,i){return void 0===r.length?t.vertexAttrib3f(e,r,n,i):t.vertexAttrib3fv(e,r)},function(t,e,r,n,i,a){return void 0===r.length?t.vertexAttrib4f(e,r,n,i,a):t.vertexAttrib4fv(e,r)}];function s(t,e,r,n,a,s,l){var c=o[a],u=new i(t,e,r,n,a,c);Object.defineProperty(s,l,{set:function(e){return t.disableVertexAttribArray(n[r]),c(t,n[r],e),e},get:function(){return u},enumerable:!0})}function l(t,e,r,n,i,a,o){for(var l=new Array(i),c=new Array(i),u=0;u<i;++u)s(t,e,r[u],n,i,l,u),c[u]=l[u];Object.defineProperty(l,"location",{set:function(t){if(Array.isArray(t))for(var e=0;e<i;++e)c[e].location=t[e];else for(e=0;e<i;++e)c[e].location=t+e;return t},get:function(){for(var t=new Array(i),e=0;e<i;++e)t[e]=n[r[e]];return t},enumerable:!0}),l.pointer=function(e,a,o,s){e=e||t.FLOAT,a=!!a,o=o||i*i,s=s||0;for(var l=0;l<i;++l){var c=n[r[l]];t.vertexAttribPointer(c,i,e,a,o,s+l*i),t.enableVertexAttribArray(c)}};var d=new Array(i),h=t["vertexAttrib"+i+"fv"];Object.defineProperty(a,o,{set:function(e){for(var a=0;a<i;++a){var o=n[r[a]];if(t.disableVertexAttribArray(o),Array.isArray(e[0]))h.call(t,o,e[a]);else{for(var s=0;s<i;++s)d[s]=e[i*a+s];h.call(t,o,d)}}return e},get:function(){return l},enumerable:!0})}function c(t,e,r,i){for(var a={},o=0,c=r.length;o<c;++o){var u=r[o],d=u.name,h=u.type,g=u.locations;switch(h){case"bool":case"int":case"float":s(t,e,g[0],i,1,a,d);break;default:if(h.indexOf("vec")>=0){if((f=h.charCodeAt(h.length-1)-48)<2||f>4)throw new n("","Invalid data type for attribute "+d+": "+h);s(t,e,g[0],i,f,a,d)}else{if(!(h.indexOf("mat")>=0))throw new n("","Unknown data type for attribute "+d+": "+h);var f;if((f=h.charCodeAt(h.length-1)-48)<2||f>4)throw new n("","Invalid data type for attribute "+d+": "+h);l(t,e,g,i,f,a,d)}}}return a}},{"./GLError":133}],135:[function(t,e,r){var n=t("./reflect"),i=t("./GLError");function a(t){return function(){return t}}function o(t,e){for(var r=new Array(t),n=0;n<t;++n)r[n]=e;return r}function s(t,e,r,s){function l(t){return function(e,r,n){return e.getUniform(r.program,n[t])}}function c(e){return function(n){for(var a=u("",e),o=0;o<a.length;++o){var l=a[o],c=l[0],d=l[1];if(s[d]){var h=n;if("string"==typeof c&&(0===c.indexOf(".")||0===c.indexOf("["))){var g=c;if(0===c.indexOf(".")&&(g=c.slice(1)),g.indexOf("]")===g.length-1){var f=g.indexOf("["),p=g.slice(0,f),m=g.slice(f+1,g.length-1);h=p?n[p][m]:n[m]}else h=n[g]}var y,b=r[d].type;switch(b){case"bool":case"int":case"sampler2D":case"samplerCube":t.uniform1i(s[d],h);break;case"float":t.uniform1f(s[d],h);break;default:var v=b.indexOf("vec");if(!(0<=v&&v<=1&&b.length===4+v)){if(0===b.indexOf("mat")&&4===b.length){if((y=b.charCodeAt(b.length-1)-48)<2||y>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+b);t["uniformMatrix"+y+"fv"](s[d],!1,h);break}throw new i("","Unknown uniform data type for "+name+": "+b)}if((y=b.charCodeAt(b.length-1)-48)<2||y>4)throw new i("","Invalid data type");switch(b.charAt(0)){case"b":case"i":t["uniform"+y+"iv"](s[d],h);break;case"v":t["uniform"+y+"fv"](s[d],h);break;default:throw new i("","Unrecognized data type for vector "+name+": "+b)}}}}}}function u(t,e){if("object"!=typeof e)return[[t,e]];var r=[];for(var n in e){var i=e[n],a=t;parseInt(n)+""===n?a+="["+n+"]":a+="."+n,"object"==typeof i?r.push.apply(r,u(a,i)):r.push([a,i])}return r}function d(t){switch(t){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var e=t.indexOf("vec");if(0<=e&&e<=1&&t.length===4+e){if((r=t.charCodeAt(t.length-1)-48)<2||r>4)throw new i("","Invalid data type");return"b"===t.charAt(0)?o(r,!1):o(r,0)}if(0===t.indexOf("mat")&&4===t.length){var r;if((r=t.charCodeAt(t.length-1)-48)<2||r>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+t);return o(r*r,0)}throw new i("","Unknown uniform data type for "+name+": "+t)}}function h(t,e,n){if("object"==typeof n){var i=g(n);Object.defineProperty(t,e,{get:a(i),set:c(n),enumerable:!0,configurable:!1})}else s[n]?Object.defineProperty(t,e,{get:l(n),set:c(n),enumerable:!0,configurable:!1}):t[e]=d(r[n].type)}function g(t){var e;if(Array.isArray(t)){e=new Array(t.length);for(var r=0;r<t.length;++r)h(e,r,t[r])}else for(var n in e={},t)h(e,n,t[n]);return e}var f=n(r,!0);return{get:a(g(f)),set:c(f),enumerable:!0,configurable:!0}}e.exports=s},{"./GLError":133,"./reflect":136}],136:[function(t,e,r){function n(t,e){for(var r={},n=0;n<t.length;++n)for(var i=t[n].name.split("."),a=r,o=0;o<i.length;++o){var s=i[o].split("[");if(s.length>1){s[0]in a||(a[s[0]]=[]),a=a[s[0]];for(var l=1;l<s.length;++l){var c=parseInt(s[l]);l<s.length-1||o<i.length-1?(c in a||(l<s.length-1?a[c]=[]:a[c]={}),a=a[c]):a[c]=e?n:t[n].type}}else o<i.length-1?(s[0]in a||(a[s[0]]={}),a=a[s[0]]):a[s[0]]=e?n:t[n].type}return r}e.exports=n},{}],137:[function(t,e,r){r.uniforms=o,r.attributes=s;var n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null;function a(t,e){if(!i){var r=Object.keys(n);i={};for(var a=0;a<r.length;++a){var o=r[a];i[t[o]]=n[o]}}return i[e]}function o(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),n=[],i=0;i<r;++i){var o=t.getActiveUniform(e,i);if(o){var s=a(t,o.type);if(o.size>1)for(var l=0;l<o.size;++l)n.push({name:o.name.replace("[0]","["+l+"]"),type:s});else n.push({name:o.name,type:s})}}return n}function s(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),n=[],i=0;i<r;++i){var o=t.getActiveAttrib(e,i);o&&n.push({name:o.name,type:a(t,o.type)})}return n}},{}],138:[function(t,e,r){r.shader=g,r.program=f;var n=t("./GLError"),i=t("gl-format-compiler-error"),a=new("undefined"==typeof WeakMap?t("weakmap-shim"):WeakMap),o=0;function s(t,e,r,n,i,a,o){this.id=t,this.src=e,this.type=r,this.shader=n,this.count=a,this.programs=[],this.cache=o}function l(t){this.gl=t,this.shaders=[{},{}],this.programs={}}s.prototype.dispose=function(){if(0==--this.count){for(var t=this.cache,e=t.gl,r=this.programs,n=0,i=r.length;n<i;++n){var a=t.programs[r[n]];a&&(delete t.programs[n],e.deleteProgram(a))}e.deleteShader(this.shader),delete t.shaders[this.type===e.FRAGMENT_SHADER|0][this.src]}};var c=l.prototype;function u(t,e,r){var a=t.createShader(e);if(t.shaderSource(a,r),t.compileShader(a),!t.getShaderParameter(a,t.COMPILE_STATUS)){var o=t.getShaderInfoLog(a);try{var s=i(o,r,e)}catch(t){throw console.warn("Failed to format compiler error: "+t),new n(o,"Error compiling shader:\n"+o)}throw new n(o,s.short,s.long)}return a}function d(t,e,r,i,a){var o=t.createProgram();t.attachShader(o,e),t.attachShader(o,r);for(var s=0;s<i.length;++s)t.bindAttribLocation(o,a[s],i[s]);if(t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS)){var l=t.getProgramInfoLog(o);throw new n(l,"Error linking program: "+l)}return o}function h(t){var e=a.get(t);return e||(e=new l(t),a.set(t,e)),e}function g(t,e,r){return h(t).getShaderReference(e,r)}function f(t,e,r,n,i){return h(t).getProgram(e,r,n,i)}c.getShaderReference=function(t,e){var r=this.gl,n=this.shaders[t===r.FRAGMENT_SHADER|0],i=n[e];if(i&&r.isShader(i.shader))i.count+=1;else{var a=u(r,t,e);i=n[e]=new s(o++,e,t,a,[],1,this)}return i},c.getProgram=function(t,e,r,n){var i=[t.id,e.id,r.join(":"),n.join(":")].join("@"),a=this.programs[i];return a&&this.gl.isProgram(a)||(this.programs[i]=a=d(this.gl,t.shader,e.shader,r,n),t.programs.push(i),e.programs.push(i)),a}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(t,e,r){function n(t){this.plot=t,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}e.exports=a;var i=n.prototype;function a(t,e){var r=new n(t);return r.update(e),t.addOverlay(r),r}i.update=function(t){t=t||{},this.enable=(t.enable||[!0,!0,!1,!1]).slice(),this.width=(t.width||[1,1,1,1]).slice(),this.color=(t.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map((function(t){return t.slice()})),this.center=(t.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},i.draw=function(){var t=this.enable,e=this.width,r=this.color,n=this.center,i=this.plot,a=i.line,o=i.dataBox,s=i.viewBox;if(a.bind(),o[0]<=n[0]&&n[0]<=o[2]&&o[1]<=n[1]&&n[1]<=o[3]){var l=s[0]+(n[0]-o[0])/(o[2]-o[0])*(s[2]-s[0]),c=s[1]+(n[1]-o[1])/(o[3]-o[1])*(s[3]-s[1]);t[0]&&a.drawLine(l,c,s[0],c,e[0],r[0]),t[1]&&a.drawLine(l,c,l,s[1],e[1],r[1]),t[2]&&a.drawLine(l,c,s[2],c,e[2],r[2]),t[3]&&a.drawLine(l,c,l,s[3],e[3],r[3])}},i.dispose=function(){this.plot.removeOverlay(this)}},{}],140:[function(t,e,r){var n=t("glslify"),i=t("gl-shader"),a=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),o=n(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);e.exports=function(t){return i(t,a,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(t,e,r){var n=t("gl-buffer"),i=t("gl-vao"),a=t("./shaders/index");e.exports=h;var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(t,e,r,n){this.gl=t,this.buffer=e,this.vao=r,this.shader=n,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var l=s.prototype,c=[0,0,0],u=[0,0,0],d=[0,0];function h(t,e){var r=[];function o(t,e,n,i,a,o){var s=[t,e,n,0,0,0,1];s[i+3]=1,s[i]=a,r.push.apply(r,s),s[6]=-1,r.push.apply(r,s),s[i]=o,r.push.apply(r,s),r.push.apply(r,s),s[6]=1,r.push.apply(r,s),s[i]=a,r.push.apply(r,s)}o(0,0,0,0,0,1),o(0,0,0,1,0,1),o(0,0,0,2,0,1),o(1,0,0,1,-1,1),o(1,0,0,2,-1,1),o(0,1,0,0,-1,1),o(0,1,0,2,-1,1),o(0,0,1,0,-1,1),o(0,0,1,1,-1,1);var l=n(t,r),c=i(t,[{type:t.FLOAT,buffer:l,size:3,offset:0,stride:28},{type:t.FLOAT,buffer:l,size:3,offset:12,stride:28},{type:t.FLOAT,buffer:l,size:1,offset:24,stride:28}]),u=a(t);u.attributes.position.location=0,u.attributes.color.location=1,u.attributes.weight.location=2;var d=new s(t,l,c,u);return d.update(e),d}l.isTransparent=function(){return!1},l.drawTransparent=function(t){},l.draw=function(t){var e=this.gl,r=this.vao,n=this.shader;r.bind(),n.bind();var i,a=t.model||o,s=t.view||o,l=t.projection||o;this.axes&&(i=this.axes.lastCubeProps.axis);for(var h=c,g=u,f=0;f<3;++f)i&&i[f]<0?(h[f]=this.bounds[0][f],g[f]=this.bounds[1][f]):(h[f]=this.bounds[1][f],g[f]=this.bounds[0][f]);for(d[0]=e.drawingBufferWidth,d[1]=e.drawingBufferHeight,n.uniforms.model=a,n.uniforms.view=s,n.uniforms.projection=l,n.uniforms.coordinates=[this.position,h,g],n.uniforms.colors=this.colors,n.uniforms.screenShape=d,f=0;f<3;++f)n.uniforms.lineWidth=this.lineWidth[f]*this.pixelRatio,this.enabled[f]&&(r.draw(e.TRIANGLES,6,6*f),this.drawSides[f]&&r.draw(e.TRIANGLES,12,18+12*f));r.unbind()},l.update=function(t){t&&("bounds"in t&&(this.bounds=t.bounds),"position"in t&&(this.position=t.position),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"colors"in t&&(this.colors=t.colors),"enabled"in t&&(this.enabled=t.enabled),"drawSides"in t&&(this.drawSides=t.drawSides))},l.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(t,e,r){var n=t("glslify"),i=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),o=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);r.meshShader={vertex:i,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},r.pickShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(t,e,r){var n=t("gl-vec3"),i=t("gl-vec4"),a=["xyz","xzy","yxz","yzx","zxy","zyx"],o=function(t,e,r,a){for(var o=t.points,s=t.velocities,l=t.divergences,c=[],u=[],d=[],h=[],g=[],f=[],p=0,m=0,y=i.create(),b=i.create(),v=8,x=0;x<o.length;x++){var I=o[x],B=s[x],C=l[x];0===e&&(C=.05*r),m=n.length(B)/a,y=i.create(),n.copy(y,B),y[3]=C;for(var F=0;F<v;F++)g[F]=[I[0],I[1],I[2],F];if(h.length>0)for(F=0;F<v;F++){var A=(F+1)%v;c.push(h[F],g[F],g[A],g[A],h[A],h[F]),d.push(b,y,y,y,b,b),f.push(p,m,m,m,p,p);var Q=c.length;u.push([Q-6,Q-5,Q-4],[Q-3,Q-2,Q-1])}var _=h;h=g,g=_;var w=b;b=y,y=w;var U=p;p=m,m=U}return{positions:c,cells:u,vectors:d,vertexIntensity:f}},s=function(t,e,r,i){for(var a=0,s=0;s<t.length;s++)for(var l=t[s].velocities,c=0;c<l.length;c++)a=Math.max(a,n.length(l[c]));var u=t.map((function(t){return o(t,r,i,a)})),d=[],h=[],g=[],f=[];for(s=0;s<u.length;s++){var p=u[s],m=d.length;for(d=d.concat(p.positions),g=g.concat(p.vectors),f=f.concat(p.vertexIntensity),c=0;c<p.cells.length;c++){var y=p.cells[c],b=[];h.push(b);for(var v=0;v<y.length;v++)b.push(y[v]+m)}}return{positions:d,cells:h,vectors:g,vertexIntensity:f,colormap:e}},l=function(t,e){var r,n=t.length;for(r=0;r<n;r++){var i=t[r];if(i===e)return r;if(i>e)return r-1}return r},c=function(t,e,r){return t<e?e:t>r?r:t},u=function(t,e,r){var i=e.vectors,a=e.meshgrid,o=t[0],s=t[1],u=t[2],d=a[0].length,h=a[1].length,g=a[2].length,f=l(a[0],o),p=l(a[1],s),m=l(a[2],u),y=f+1,b=p+1,v=m+1;if(f=c(f,0,d-1),y=c(y,0,d-1),p=c(p,0,h-1),b=c(b,0,h-1),m=c(m,0,g-1),v=c(v,0,g-1),f<0||p<0||m<0||y>d-1||b>h-1||v>g-1)return n.create();var x,I,B,C,F,A,Q=a[0][f],_=a[0][y],w=a[1][p],U=a[1][b],S=a[2][m],E=(o-Q)/(_-Q),L=(s-w)/(U-w),T=(u-S)/(a[2][v]-S);switch(isFinite(E)||(E=.5),isFinite(L)||(L=.5),isFinite(T)||(T=.5),r.reversedX&&(f=d-1-f,y=d-1-y),r.reversedY&&(p=h-1-p,b=h-1-b),r.reversedZ&&(m=g-1-m,v=g-1-v),r.filled){case 5:F=m,A=v,B=p*g,C=b*g,x=f*g*h,I=y*g*h;break;case 4:F=m,A=v,x=f*g,I=y*g,B=p*g*d,C=b*g*d;break;case 3:B=p,C=b,F=m*h,A=v*h,x=f*h*g,I=y*h*g;break;case 2:B=p,C=b,x=f*h,I=y*h,F=m*h*d,A=v*h*d;break;case 1:x=f,I=y,F=m*d,A=v*d,B=p*d*g,C=b*d*g;break;default:x=f,I=y,B=p*d,C=b*d,F=m*d*h,A=v*d*h}var R=i[x+B+F],k=i[x+B+A],G=i[x+C+F],N=i[x+C+A],M=i[I+B+F],D=i[I+B+A],X=i[I+C+F],V=i[I+C+A],W=n.create(),Z=n.create(),O=n.create(),$=n.create();n.lerp(W,R,M,E),n.lerp(Z,k,D,E),n.lerp(O,G,X,E),n.lerp($,N,V,E);var H=n.create(),Y=n.create();n.lerp(H,W,O,L),n.lerp(Y,Z,$,L);var P=n.create();return n.lerp(P,H,Y,T),P},d=function(t){var e=1/0;t.sort((function(t,e){return t-e}));for(var r=t.length,n=1;n<r;n++){var i=Math.abs(t[n]-t[n-1]);i<e&&(e=i)}return e},h=function(t){for(var e=[],r=[],n=[],i={},a={},o={},s=t.length,l=0;l<s;l++){var c=t[l],u=c[0],h=c[1],g=c[2];i[u]||(e.push(u),i[u]=!0),a[h]||(r.push(h),a[h]=!0),o[g]||(n.push(g),o[g]=!0)}var f=d(e),p=d(r),m=d(n),y=Math.min(f,p,m);return isFinite(y)?y:1};e.exports=function(t,e){var r=t.startingPositions,i=t.maxLength||1e3,o=t.tubeSize||1,l=t.absoluteTubeSize,c=t.gridFill||"+x+y+z",d={};-1!==c.indexOf("-x")&&(d.reversedX=!0),-1!==c.indexOf("-y")&&(d.reversedY=!0),-1!==c.indexOf("-z")&&(d.reversedZ=!0),d.filled=a.indexOf(c.replace(/-/g,"").replace(/\+/g,""));var g=t.getVelocity||function(e){return u(e,t,d)},f=t.getDivergence||function(t,e){var r=n.create(),i=1e-4;n.add(r,t,[i,0,0]);var a=g(r);n.subtract(a,a,e),n.scale(a,a,1/i),n.add(r,t,[0,i,0]);var o=g(r);n.subtract(o,o,e),n.scale(o,o,1/i),n.add(r,t,[0,0,i]);var s=g(r);return n.subtract(s,s,e),n.scale(s,s,1/i),n.add(r,a,o),n.add(r,r,s),r},p=[],m=e[0][0],y=e[0][1],b=e[0][2],v=e[1][0],x=e[1][1],I=e[1][2],B=function(t){var e=t[0],r=t[1],n=t[2];return!(e<m||e>v||r<y||r>x||n<b||n>I)},C=10*n.distance(e[0],e[1])/i,F=C*C,A=1,Q=0,_=r.length;_>1&&(A=h(r));for(var w=0;w<_;w++){var U=n.create();n.copy(U,r[w]);var S=[U],E=[],L=g(U),T=U;E.push(L);var R=[],k=f(U,L),G=n.length(k);isFinite(G)&&G>Q&&(Q=G),R.push(G),p.push({points:S,velocities:E,divergences:R});for(var N=0;N<100*i&&S.length<i&&B(U);){N++;var M=n.clone(L),D=n.squaredLength(M);if(0===D)break;D>F&&n.scale(M,M,C/Math.sqrt(D)),n.add(M,M,U),L=g(M),n.squaredDistance(T,M)-F>-1e-4*F&&(S.push(M),T=M,E.push(L),k=f(M,L),G=n.length(k),isFinite(G)&&G>Q&&(Q=G),R.push(G)),U=M}}var X=s(p,t.colormap,Q,A);return l?X.tubeScale=l:(0===Q&&(Q=1),X.tubeScale=.5*o*A/Q),X};var g=t("./lib/shaders"),f=t("gl-cone3d").createMesh;e.exports.createTubeMesh=function(t,e){return f(t,e,{shaders:g,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(t,e,r){var n=t("gl-shader"),i=t("glslify"),a=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),o=i(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color â in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),l=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);r.createShader=function(t){var e=n(t,a,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e.attributes.normal.location=2,e},r.createPickShader=function(t){var e=n(t,a,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e.attributes.normal.location=2,e},r.createContourShader=function(t){var e=n(t,s,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e},r.createPickContourShader=function(t){var e=n(t,s,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e}},{"gl-shader":132,glslify:231}],145:[function(t,e,r){e.exports=W;var n=t("bit-twiddle"),i=t("gl-buffer"),a=t("gl-vao"),o=t("gl-texture2d"),s=t("typedarray-pool"),l=t("colormap"),c=t("ndarray-ops"),u=t("ndarray-pack"),d=t("ndarray"),h=t("surface-nets"),g=t("gl-mat4/multiply"),f=t("gl-mat4/invert"),p=t("binary-search-bounds"),m=t("ndarray-gradient"),y=t("./lib/shaders"),b=y.createShader,v=y.createContourShader,x=y.createPickShader,I=y.createPickContourShader,B=40,C=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],A=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function Q(t,e,r,n,i){this.position=t,this.index=e,this.uv=r,this.level=n,this.dataCoordinate=i}!function(){for(var t=0;t<3;++t){var e=A[t],r=(t+2)%3;e[(t+1)%3+0]=1,e[r+3]=1,e[t+6]=1}}();var _=256;function w(t,e,r,n,i,a,o,l,c,u,h,g,f,p,m){this.gl=t,this.shape=e,this.bounds=r,this.objectOffset=m,this.intensityBounds=[],this._shader=n,this._pickShader=i,this._coordinateBuffer=a,this._vao=o,this._colorMap=l,this._contourShader=c,this._contourPickShader=u,this._contourBuffer=h,this._contourVAO=g,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new Q([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=f,this._dynamicVAO=p,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[d(s.mallocFloat(1024),[0,0]),d(s.mallocFloat(1024),[0,0]),d(s.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var U=w.prototype;function S(t,e){if(!e)return 1;if(!e.length)return 1;for(var r=0;r<e.length;++r){if(e.length<2)return 1;if(e[r][0]===t)return e[r][1];if(e[r][0]>t&&r>0){var n=(e[r][0]-t)/(e[r][0]-e[r-1][0]);return e[r][1]*(1-n)+n*e[r-1][1]}}return 1}U.genColormap=function(t,e){var r=!1,n=u([l({colormap:t,nshades:_,format:"rgba"}).map((function(t,n){var i=e?S(n/255,e):t[3];return i<1&&(r=!0),[t[0],t[1],t[2],255*i]}))]);return c.divseq(n,255),this.hasAlphaScale=r,n},U.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},U.isOpaque=function(){return!this.isTransparent()},U.pickSlots=1,U.setPickBase=function(t){this.pickId=t};var E=[0,0,0],L={showSurface:!1,showContour:!1,projections:[C.slice(),C.slice(),C.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function T(t,e){var r,n,i,a=e.axes&&e.axes.lastCubeProps.axis||E,o=e.showSurface,s=e.showContour;for(r=0;r<3;++r)for(o=o||e.surfaceProject[r],n=0;n<3;++n)s=s||e.contourProject[r][n];for(r=0;r<3;++r){var l=L.projections[r];for(n=0;n<16;++n)l[n]=0;for(n=0;n<4;++n)l[5*n]=1;l[5*r]=0,l[12+r]=e.axesBounds[+(a[r]>0)][r],g(l,t.model,l);var c=L.clipBounds[r];for(i=0;i<2;++i)for(n=0;n<3;++n)c[i][n]=t.clipBounds[i][n];c[0][r]=-1e8,c[1][r]=1e8}return L.showSurface=o,L.showContour=s,L}var R={model:C,view:C,projection:C,inverseModel:C.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},k=C.slice(),G=[1,0,0,0,1,0,0,0,1];function N(t,e){t=t||{};var r=this.gl;r.disable(r.CULL_FACE),this._colorMap.bind(0);var n=R;n.model=t.model||C,n.view=t.view||C,n.projection=t.projection||C,n.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],n.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],n.objectOffset=this.objectOffset,n.contourColor=this.contourColor[0],n.inverseModel=f(n.inverseModel,n.model);for(var i=0;i<2;++i)for(var a=n.clipBounds[i],o=0;o<3;++o)a[o]=Math.min(Math.max(this.clipBounds[i][o],-1e8),1e8);n.kambient=this.ambientLight,n.kdiffuse=this.diffuseLight,n.kspecular=this.specularLight,n.roughness=this.roughness,n.fresnel=this.fresnel,n.opacity=this.opacity,n.height=0,n.permutation=G,n.vertexColor=this.vertexColor;var s=k;for(g(s,n.view,n.model),g(s,n.projection,s),f(s,s),i=0;i<3;++i)n.eyePosition[i]=s[12+i]/s[15];var l=s[15];for(i=0;i<3;++i)l+=this.lightPosition[i]*s[4*i+3];for(i=0;i<3;++i){var c=s[12+i];for(o=0;o<3;++o)c+=s[4*o+i]*this.lightPosition[o];n.lightPosition[i]=c/l}var u=T(n,this);if(u.showSurface){for(this._shader.bind(),this._shader.uniforms=n,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(r.TRIANGLES,this._vertexCount),i=0;i<3;++i)this.surfaceProject[i]&&this.vertexCount&&(this._shader.uniforms.model=u.projections[i],this._shader.uniforms.clipBounds=u.clipBounds[i],this._vao.draw(r.TRIANGLES,this._vertexCount));this._vao.unbind()}if(u.showContour){var d=this._contourShader;n.kambient=1,n.kdiffuse=0,n.kspecular=0,n.opacity=1,d.bind(),d.uniforms=n;var h=this._contourVAO;for(h.bind(),i=0;i<3;++i)for(d.uniforms.permutation=A[i],r.lineWidth(this.contourWidth[i]*this.pixelRatio),o=0;o<this.contourLevels[i].length;++o)o===this.highlightLevel[i]?(d.uniforms.contourColor=this.highlightColor[i],d.uniforms.contourTint=this.highlightTint[i]):0!==o&&o-1!==this.highlightLevel[i]||(d.uniforms.contourColor=this.contourColor[i],d.uniforms.contourTint=this.contourTint[i]),this._contourCounts[i][o]&&(d.uniforms.height=this.contourLevels[i][o],h.draw(r.LINES,this._contourCounts[i][o],this._contourOffsets[i][o]));for(i=0;i<3;++i)for(d.uniforms.model=u.projections[i],d.uniforms.clipBounds=u.clipBounds[i],o=0;o<3;++o)if(this.contourProject[i][o]){d.uniforms.permutation=A[o],r.lineWidth(this.contourWidth[o]*this.pixelRatio);for(var p=0;p<this.contourLevels[o].length;++p)p===this.highlightLevel[o]?(d.uniforms.contourColor=this.highlightColor[o],d.uniforms.contourTint=this.highlightTint[o]):0!==p&&p-1!==this.highlightLevel[o]||(d.uniforms.contourColor=this.contourColor[o],d.uniforms.contourTint=this.contourTint[o]),this._contourCounts[o][p]&&(d.uniforms.height=this.contourLevels[o][p],h.draw(r.LINES,this._contourCounts[o][p],this._contourOffsets[o][p]))}for(h.unbind(),(h=this._dynamicVAO).bind(),i=0;i<3;++i)if(0!==this._dynamicCounts[i])for(d.uniforms.model=n.model,d.uniforms.clipBounds=n.clipBounds,d.uniforms.permutation=A[i],r.lineWidth(this.dynamicWidth[i]*this.pixelRatio),d.uniforms.contourColor=this.dynamicColor[i],d.uniforms.contourTint=this.dynamicTint[i],d.uniforms.height=this.dynamicLevel[i],h.draw(r.LINES,this._dynamicCounts[i],this._dynamicOffsets[i]),o=0;o<3;++o)this.contourProject[o][i]&&(d.uniforms.model=u.projections[o],d.uniforms.clipBounds=u.clipBounds[o],h.draw(r.LINES,this._dynamicCounts[i],this._dynamicOffsets[i]));h.unbind()}}U.draw=function(t){return N.call(this,t,!1)},U.drawTransparent=function(t){return N.call(this,t,!0)};var M={model:C,view:C,projection:C,inverseModel:C,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function D(t,e){return Array.isArray(t)?[e(t[0]),e(t[1]),e(t[2])]:[e(t),e(t),e(t)]}function X(t){return Array.isArray(t)?3===t.length?[t[0],t[1],t[2],1]:[t[0],t[1],t[2],t[3]]:[0,0,0,1]}function V(t){if(Array.isArray(t)){if(Array.isArray(t))return[X(t[0]),X(t[1]),X(t[2])];var e=X(t);return[e.slice(),e.slice(),e.slice()]}}function W(t){var e=t.gl,r=b(e),n=x(e),s=v(e),l=I(e),c=i(e),u=a(e,[{buffer:c,size:4,stride:B,offset:0},{buffer:c,size:3,stride:B,offset:16},{buffer:c,size:3,stride:B,offset:28}]),d=i(e),h=a(e,[{buffer:d,size:4,stride:20,offset:0},{buffer:d,size:1,stride:20,offset:16}]),g=i(e),f=a(e,[{buffer:g,size:2,type:e.FLOAT}]),p=o(e,1,_,e.RGBA,e.UNSIGNED_BYTE);p.minFilter=e.LINEAR,p.magFilter=e.LINEAR;var m=new w(e,[0,0],[[0,0,0],[0,0,0]],r,n,c,u,p,s,l,d,h,g,f,[0,0,0]),y={levels:[[],[],[]]};for(var C in t)y[C]=t[C];return y.colormap=y.colormap||"jet",m.update(y),m}U.drawPick=function(t){t=t||{};var e=this.gl;e.disable(e.CULL_FACE);var r=M;r.model=t.model||C,r.view=t.view||C,r.projection=t.projection||C,r.shape=this._field[2].shape,r.pickId=this.pickId/255,r.lowerBound=this.bounds[0],r.upperBound=this.bounds[1],r.objectOffset=this.objectOffset,r.permutation=G;for(var n=0;n<2;++n)for(var i=r.clipBounds[n],a=0;a<3;++a)i[a]=Math.min(Math.max(this.clipBounds[n][a],-1e8),1e8);var o=T(r,this);if(o.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=r,this._vao.bind(),this._vao.draw(e.TRIANGLES,this._vertexCount),n=0;n<3;++n)this.surfaceProject[n]&&(this._pickShader.uniforms.model=o.projections[n],this._pickShader.uniforms.clipBounds=o.clipBounds[n],this._vao.draw(e.TRIANGLES,this._vertexCount));this._vao.unbind()}if(o.showContour){var s=this._contourPickShader;s.bind(),s.uniforms=r;var l=this._contourVAO;for(l.bind(),a=0;a<3;++a)for(e.lineWidth(this.contourWidth[a]*this.pixelRatio),s.uniforms.permutation=A[a],n=0;n<this.contourLevels[a].length;++n)this._contourCounts[a][n]&&(s.uniforms.height=this.contourLevels[a][n],l.draw(e.LINES,this._contourCounts[a][n],this._contourOffsets[a][n]));for(n=0;n<3;++n)for(s.uniforms.model=o.projections[n],s.uniforms.clipBounds=o.clipBounds[n],a=0;a<3;++a)if(this.contourProject[n][a]){s.uniforms.permutation=A[a],e.lineWidth(this.contourWidth[a]*this.pixelRatio);for(var c=0;c<this.contourLevels[a].length;++c)this._contourCounts[a][c]&&(s.uniforms.height=this.contourLevels[a][c],l.draw(e.LINES,this._contourCounts[a][c],this._contourOffsets[a][c]))}l.unbind()}},U.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=this._field[2].shape,r=this._pickResult,n=e[0]*(t.value[0]+(t.value[2]>>4)/16)/255,i=Math.floor(n),a=n-i,o=e[1]*(t.value[1]+(15&t.value[2])/16)/255,s=Math.floor(o),l=o-s;i+=1,s+=1;var c=r.position;c[0]=c[1]=c[2]=0;for(var u=0;u<2;++u)for(var d=u?a:1-a,h=0;h<2;++h)for(var g=i+u,f=s+h,m=d*(h?l:1-l),y=0;y<3;++y)c[y]+=this._field[y].get(g,f)*m;for(var b=this._pickResult.level,v=0;v<3;++v)if(b[v]=p.le(this.contourLevels[v],c[v]),b[v]<0)this.contourLevels[v].length>0&&(b[v]=0);else if(b[v]<this.contourLevels[v].length-1){var x=this.contourLevels[v][b[v]],I=this.contourLevels[v][b[v]+1];Math.abs(x-c[v])>Math.abs(I-c[v])&&(b[v]+=1)}for(r.index[0]=a<.5?i:i+1,r.index[1]=l<.5?s:s+1,r.uv[0]=n/e[0],r.uv[1]=o/e[1],y=0;y<3;++y)r.dataCoordinate[y]=this._field[y].get(r.index[0],r.index[1]);return r},U.padField=function(t,e){var r=e.shape.slice(),n=t.shape.slice();c.assign(t.lo(1,1).hi(r[0],r[1]),e),c.assign(t.lo(1).hi(r[0],1),e.hi(r[0],1)),c.assign(t.lo(1,n[1]-1).hi(r[0],1),e.lo(0,r[1]-1).hi(r[0],1)),c.assign(t.lo(0,1).hi(1,r[1]),e.hi(1)),c.assign(t.lo(n[0]-1,1).hi(1,r[1]),e.lo(r[0]-1)),t.set(0,0,e.get(0,0)),t.set(0,n[1]-1,e.get(0,r[1]-1)),t.set(n[0]-1,0,e.get(r[0]-1,0)),t.set(n[0]-1,n[1]-1,e.get(r[0]-1,r[1]-1))},U.update=function(t){t=t||{},this.objectOffset=t.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in t&&(this.contourWidth=D(t.contourWidth,Number)),"showContour"in t&&(this.showContour=D(t.showContour,Boolean)),"showSurface"in t&&(this.showSurface=!!t.showSurface),"contourTint"in t&&(this.contourTint=D(t.contourTint,Boolean)),"contourColor"in t&&(this.contourColor=V(t.contourColor)),"contourProject"in t&&(this.contourProject=D(t.contourProject,(function(t){return D(t,Boolean)}))),"surfaceProject"in t&&(this.surfaceProject=t.surfaceProject),"dynamicColor"in t&&(this.dynamicColor=V(t.dynamicColor)),"dynamicTint"in t&&(this.dynamicTint=D(t.dynamicTint,Number)),"dynamicWidth"in t&&(this.dynamicWidth=D(t.dynamicWidth,Number)),"opacity"in t&&(this.opacity=t.opacity),"opacityscale"in t&&(this.opacityscale=t.opacityscale),"colorBounds"in t&&(this.colorBounds=t.colorBounds),"vertexColor"in t&&(this.vertexColor=t.vertexColor?1:0),"colormap"in t&&this._colorMap.setPixels(this.genColormap(t.colormap,this.opacityscale));var e=t.field||t.coords&&t.coords[2]||null,r=!1;if(e||(e=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in t||"coords"in t){var i=(e.shape[0]+2)*(e.shape[1]+2);i>this._field[2].data.length&&(s.freeFloat(this._field[2].data),this._field[2].data=s.mallocFloat(n.nextPow2(i))),this._field[2]=d(this._field[2].data,[e.shape[0]+2,e.shape[1]+2]),this.padField(this._field[2],e),this.shape=e.shape.slice();for(var a=this.shape,o=0;o<2;++o)this._field[2].size>this._field[o].data.length&&(s.freeFloat(this._field[o].data),this._field[o].data=s.mallocFloat(this._field[2].size)),this._field[o]=d(this._field[o].data,[a[0]+2,a[1]+2]);if(t.coords){var l=t.coords;if(!Array.isArray(l)||3!==l.length)throw new Error("gl-surface: invalid coordinates for x/y");for(o=0;o<2;++o){var c=l[o];for(y=0;y<2;++y)if(c.shape[y]!==a[y])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[o],c)}}else if(t.ticks){var u=t.ticks;if(!Array.isArray(u)||2!==u.length)throw new Error("gl-surface: invalid ticks");for(o=0;o<2;++o){var g=u[o];if((Array.isArray(g)||g.length)&&(g=d(g)),g.shape[0]!==a[o])throw new Error("gl-surface: invalid tick length");var f=d(g.data,a);f.stride[o]=g.stride[0],f.stride[1^o]=0,this.padField(this._field[o],f)}}else{for(o=0;o<2;++o){var p=[0,0];p[o]=1,this._field[o]=d(this._field[o].data,[a[0]+2,a[1]+2],p,0)}this._field[0].set(0,0,0);for(var y=0;y<a[0];++y)this._field[0].set(y+1,0,y);for(this._field[0].set(a[0]+1,0,a[0]-1),this._field[1].set(0,0,0),y=0;y<a[1];++y)this._field[1].set(0,y+1,y);this._field[1].set(0,a[1]+1,a[1]-1)}var b=this._field,v=d(s.mallocFloat(3*b[2].size*2),[3,a[0]+2,a[1]+2,2]);for(o=0;o<3;++o)m(v.pick(o),b[o],"mirror");var x=d(s.mallocFloat(3*b[2].size),[a[0]+2,a[1]+2,3]);for(o=0;o<a[0]+2;++o)for(y=0;y<a[1]+2;++y){var I=v.get(0,o,y,0),B=v.get(0,o,y,1),C=v.get(1,o,y,0),A=v.get(1,o,y,1),Q=v.get(2,o,y,0),_=v.get(2,o,y,1),w=C*_-A*Q,U=Q*B-_*I,S=I*A-B*C,E=Math.sqrt(w*w+U*U+S*S);E<1e-8?(E=Math.max(Math.abs(w),Math.abs(U),Math.abs(S)))<1e-8?(S=1,U=w=0,E=1):E=1/E:E=1/Math.sqrt(E),x.set(o,y,0,w*E),x.set(o,y,1,U*E),x.set(o,y,2,S*E)}s.free(v.data);var L=[1/0,1/0,1/0],T=[-1/0,-1/0,-1/0],R=1/0,k=-1/0,G=(a[0]-1)*(a[1]-1)*6,N=s.mallocFloat(n.nextPow2(10*G)),M=0,X=0;for(o=0;o<a[0]-1;++o)t:for(y=0;y<a[1]-1;++y){for(var W=0;W<2;++W)for(var Z=0;Z<2;++Z)for(var O=0;O<3;++O){var $=this._field[O].get(1+o+W,1+y+Z);if(isNaN($)||!isFinite($))continue t}for(O=0;O<6;++O){var H=o+F[O][0],Y=y+F[O][1],P=this._field[0].get(H+1,Y+1),z=this._field[1].get(H+1,Y+1);$=this._field[2].get(H+1,Y+1),w=x.get(H+1,Y+1,0),U=x.get(H+1,Y+1,1),S=x.get(H+1,Y+1,2),t.intensity&&(J=t.intensity.get(H,Y));var J=t.intensity?t.intensity.get(H,Y):$+this.objectOffset[2];N[M++]=H,N[M++]=Y,N[M++]=P,N[M++]=z,N[M++]=$,N[M++]=0,N[M++]=J,N[M++]=w,N[M++]=U,N[M++]=S,L[0]=Math.min(L[0],P+this.objectOffset[0]),L[1]=Math.min(L[1],z+this.objectOffset[1]),L[2]=Math.min(L[2],$+this.objectOffset[2]),R=Math.min(R,J),T[0]=Math.max(T[0],P+this.objectOffset[0]),T[1]=Math.max(T[1],z+this.objectOffset[1]),T[2]=Math.max(T[2],$+this.objectOffset[2]),k=Math.max(k,J),X+=1}}for(t.intensityBounds&&(R=+t.intensityBounds[0],k=+t.intensityBounds[1]),o=6;o<M;o+=10)N[o]=(N[o]-R)/(k-R);this._vertexCount=X,this._coordinateBuffer.update(N.subarray(0,M)),s.freeFloat(N),s.free(x.data),this.bounds=[L,T],this.intensity=t.intensity||this._field[2],this.intensityBounds[0]===R&&this.intensityBounds[1]===k||(r=!0),this.intensityBounds=[R,k]}if("levels"in t){var j=t.levels;for(j=Array.isArray(j[0])?j.slice():[[],[],j],o=0;o<3;++o)j[o]=j[o].slice(),j[o].sort((function(t,e){return t-e}));for(o=0;o<3;++o)for(y=0;y<j[o].length;++y)j[o][y]-=this.objectOffset[o];t:for(o=0;o<3;++o){if(j[o].length!==this.contourLevels[o].length){r=!0;break}for(y=0;y<j[o].length;++y)if(j[o][y]!==this.contourLevels[o][y]){r=!0;break t}}this.contourLevels=j}if(r){b=this._field,a=this.shape;for(var K=[],q=0;q<3;++q){var tt=this.contourLevels[q],et=[],rt=[],nt=[0,0,0];for(o=0;o<tt.length;++o){var it=h(this._field[q],tt[o]);et.push(K.length/5|0),X=0;t:for(y=0;y<it.cells.length;++y){var at=it.cells[y];for(O=0;O<2;++O){var ot=it.positions[at[O]],st=ot[0],lt=0|Math.floor(st),ct=st-lt,ut=ot[1],dt=0|Math.floor(ut),ht=ut-dt,gt=!1;e:for(var ft=0;ft<3;++ft){nt[ft]=0;var pt=(q+ft+1)%3;for(W=0;W<2;++W){var mt=W?ct:1-ct;for(H=0|Math.min(Math.max(lt+W,0),a[0]),Z=0;Z<2;++Z){var yt=Z?ht:1-ht;if(Y=0|Math.min(Math.max(dt+Z,0),a[1]),$=ft<2?this._field[pt].get(H,Y):(this.intensity.get(H,Y)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite($)||isNaN($)){gt=!0;break e}var bt=mt*yt;nt[ft]+=bt*$}}}if(gt){if(O>0){for(var vt=0;vt<5;++vt)K.pop();X-=1}continue t}K.push(nt[0],nt[1],ot[0],ot[1],nt[2]),X+=1}}rt.push(X)}this._contourOffsets[q]=et,this._contourCounts[q]=rt}var xt=s.mallocFloat(K.length);for(o=0;o<K.length;++o)xt[o]=K[o];this._contourBuffer.update(xt),s.freeFloat(xt)}},U.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var t=0;t<3;++t)s.freeFloat(this._field[t].data)},U.highlight=function(t){var e,r;if(!t)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(e=0;e<3;++e)this.enableHighlight[e]?this.highlightLevel[e]=t.level[e]:this.highlightLevel[e]=-1;for(r=this.snapToData?t.dataCoordinate:t.position,e=0;e<3;++e)r[e]-=this.objectOffset[e];if(this.enableDynamic[0]&&r[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&r[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&r[2]!==this.dynamicLevel[2]){for(var n=0,i=this.shape,a=s.mallocFloat(12*i[0]*i[1]),o=0;o<3;++o)if(this.enableDynamic[o]){this.dynamicLevel[o]=r[o];var l=(o+1)%3,c=(o+2)%3,u=this._field[o],d=this._field[l],g=this._field[c],f=h(u,r[o]),p=f.cells,m=f.positions;for(this._dynamicOffsets[o]=n,e=0;e<p.length;++e)for(var y=p[e],b=0;b<2;++b){var v=m[y[b]],x=+v[0],I=0|x,B=0|Math.min(I+1,i[0]),C=x-I,F=1-C,A=+v[1],Q=0|A,_=0|Math.min(Q+1,i[1]),w=A-Q,U=1-w,S=F*U,E=F*w,L=C*U,T=C*w,R=S*d.get(I,Q)+E*d.get(I,_)+L*d.get(B,Q)+T*d.get(B,_),k=S*g.get(I,Q)+E*g.get(I,_)+L*g.get(B,Q)+T*g.get(B,_);if(isNaN(R)||isNaN(k)){b&&(n-=1);break}a[2*n+0]=R,a[2*n+1]=k,n+=1}this._dynamicCounts[o]=n-this._dynamicOffsets[o]}else this.dynamicLevel[o]=NaN,this._dynamicCounts[o]=0;this._dynamicBuffer.update(a.subarray(0,2*n)),s.freeFloat(a)}}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(t,e,r){var n=t("ndarray"),i=t("ndarray-ops"),a=t("typedarray-pool");e.exports=I;var o=null,s=null,l=null;function c(t){o=[t.LINEAR,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_NEAREST],s=[t.NEAREST,t.LINEAR,t.NEAREST_MIPMAP_NEAREST,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_LINEAR],l=[t.REPEAT,t.CLAMP_TO_EDGE,t.MIRRORED_REPEAT]}function u(t){return"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&t instanceof ImageData}var d=function(t,e){i.muls(t,e,255)};function h(t,e,r){var n=t.gl,i=n.getParameter(n.MAX_TEXTURE_SIZE);if(e<0||e>i||r<0||r>i)throw new Error("gl-texture2d: Invalid texture size");return t._shape=[e,r],t.bind(),n.texImage2D(n.TEXTURE_2D,0,t.format,e,r,0,t.format,t.type,null),t._mipLevels=[0],t}function g(t,e,r,n,i,a){this.gl=t,this.handle=e,this.format=i,this.type=a,this._shape=[r,n],this._mipLevels=[0],this._magFilter=t.NEAREST,this._minFilter=t.NEAREST,this._wrapS=t.CLAMP_TO_EDGE,this._wrapT=t.CLAMP_TO_EDGE,this._anisoSamples=1;var o=this,s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return o._wrapS},set:function(t){return o.wrapS=t}},{get:function(){return o._wrapT},set:function(t){return o.wrapT=t}}]),this._wrapVector=s;var l=[this._shape[0],this._shape[1]];Object.defineProperties(l,[{get:function(){return o._shape[0]},set:function(t){return o.width=t}},{get:function(){return o._shape[1]},set:function(t){return o.height=t}}]),this._shapeVector=l}var f=g.prototype;function p(t,e){return 3===t.length?1===e[2]&&e[1]===t[0]*t[2]&&e[0]===t[2]:1===e[0]&&e[1]===t[0]}function m(t,e,r,o,s,l,c,u){var h=u.dtype,g=u.shape.slice();if(g.length<2||g.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var f=0,m=0,y=p(g,u.stride.slice());if("float32"===h?f=t.FLOAT:"float64"===h?(f=t.FLOAT,y=!1,h="float32"):"uint8"===h?f=t.UNSIGNED_BYTE:(f=t.UNSIGNED_BYTE,y=!1,h="uint8"),2===g.length)m=t.LUMINANCE,g=[g[0],g[1],1],u=n(u.data,g,[u.stride[0],u.stride[1],1],u.offset);else{if(3!==g.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===g[2])m=t.ALPHA;else if(2===g[2])m=t.LUMINANCE_ALPHA;else if(3===g[2])m=t.RGB;else{if(4!==g[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");m=t.RGBA}}if(m!==t.LUMINANCE&&m!==t.ALPHA||s!==t.LUMINANCE&&s!==t.ALPHA||(m=s),m!==s)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var b=u.size,v=c.indexOf(o)<0;if(v&&c.push(o),f===l&&y)0===u.offset&&u.data.length===b?v?t.texImage2D(t.TEXTURE_2D,o,s,g[0],g[1],0,s,l,u.data):t.texSubImage2D(t.TEXTURE_2D,o,e,r,g[0],g[1],s,l,u.data):v?t.texImage2D(t.TEXTURE_2D,o,s,g[0],g[1],0,s,l,u.data.subarray(u.offset,u.offset+b)):t.texSubImage2D(t.TEXTURE_2D,o,e,r,g[0],g[1],s,l,u.data.subarray(u.offset,u.offset+b));else{var x;x=l===t.FLOAT?a.mallocFloat32(b):a.mallocUint8(b);var I=n(x,g,[g[2],g[2]*g[0],1]);f===t.FLOAT&&l===t.UNSIGNED_BYTE?d(I,u):i.assign(I,u),v?t.texImage2D(t.TEXTURE_2D,o,s,g[0],g[1],0,s,l,x.subarray(0,b)):t.texSubImage2D(t.TEXTURE_2D,o,e,r,g[0],g[1],s,l,x.subarray(0,b)),l===t.FLOAT?a.freeFloat32(x):a.freeUint8(x)}}function y(t){var e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e}function b(t,e,r,n,i){var a=t.getParameter(t.MAX_TEXTURE_SIZE);if(e<0||e>a||r<0||r>a)throw new Error("gl-texture2d: Invalid texture shape");if(i===t.FLOAT&&!t.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var o=y(t);return t.texImage2D(t.TEXTURE_2D,0,n,e,r,0,n,i,null),new g(t,o,e,r,n,i)}function v(t,e,r,n,i,a){var o=y(t);return t.texImage2D(t.TEXTURE_2D,0,i,i,a,e),new g(t,o,r,n,i,a)}function x(t,e){var r=e.dtype,o=e.shape.slice(),s=t.getParameter(t.MAX_TEXTURE_SIZE);if(o[0]<0||o[0]>s||o[1]<0||o[1]>s)throw new Error("gl-texture2d: Invalid texture size");var l=p(o,e.stride.slice()),c=0;"float32"===r?c=t.FLOAT:"float64"===r?(c=t.FLOAT,l=!1,r="float32"):"uint8"===r?c=t.UNSIGNED_BYTE:(c=t.UNSIGNED_BYTE,l=!1,r="uint8");var u,h,f=0;if(2===o.length)f=t.LUMINANCE,o=[o[0],o[1],1],e=n(e.data,o,[e.stride[0],e.stride[1],1],e.offset);else{if(3!==o.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===o[2])f=t.ALPHA;else if(2===o[2])f=t.LUMINANCE_ALPHA;else if(3===o[2])f=t.RGB;else{if(4!==o[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");f=t.RGBA}}c!==t.FLOAT||t.getExtension("OES_texture_float")||(c=t.UNSIGNED_BYTE,l=!1);var m=e.size;if(l)u=0===e.offset&&e.data.length===m?e.data:e.data.subarray(e.offset,e.offset+m);else{var b=[o[2],o[2]*o[0],1];h=a.malloc(m,r);var v=n(h,o,b,0);"float32"!==r&&"float64"!==r||c!==t.UNSIGNED_BYTE?i.assign(v,e):d(v,e),u=h.subarray(0,m)}var x=y(t);return t.texImage2D(t.TEXTURE_2D,0,f,o[0],o[1],0,f,c,u),l||a.free(h),new g(t,x,o[0],o[1],f,c)}function I(t){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(o||c(t),"number"==typeof arguments[1])return b(t,arguments[1],arguments[2],arguments[3]||t.RGBA,arguments[4]||t.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return b(t,0|arguments[1][0],0|arguments[1][1],arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var e=arguments[1],r=u(e)?e:e.raw;if(r)return v(t,r,0|e.width,0|e.height,arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if(e.shape&&e.data&&e.stride)return x(t,e)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}Object.defineProperties(f,{minFilter:{get:function(){return this._minFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&o.indexOf(t)>=0&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),s.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t),this._minFilter=t}},magFilter:{get:function(){return this._magFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&o.indexOf(t)>=0&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),s.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t),this._magFilter=t}},mipSamples:{get:function(){return this._anisoSamples},set:function(t){var e=this._anisoSamples;if(this._anisoSamples=0|Math.max(t,1),e!==this._anisoSamples){var r=this.gl.getExtension("EXT_texture_filter_anisotropic");r&&this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(t){if(this.bind(),l.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,t),this._wrapS=t}},wrapT:{get:function(){return this._wrapT},set:function(t){if(this.bind(),l.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,t),this._wrapT=t}},wrap:{get:function(){return this._wrapVector},set:function(t){if(Array.isArray(t)||(t=[t,t]),2!==t.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var e=0;e<2;++e)if(l.indexOf(t[e])<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);this._wrapS=t[0],this._wrapT=t[1];var r=this.gl;return this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT),t}},shape:{get:function(){return this._shapeVector},set:function(t){if(Array.isArray(t)){if(2!==t.length)throw new Error("gl-texture2d: Invalid texture shape")}else t=[0|t,0|t];return h(this,0|t[0],0|t[1]),[0|t[0],0|t[1]]}},width:{get:function(){return this._shape[0]},set:function(t){return h(this,t|=0,this._shape[1]),t}},height:{get:function(){return this._shape[1]},set:function(t){return t|=0,h(this,this._shape[0],t),t}}}),f.bind=function(t){var e=this.gl;return void 0!==t&&e.activeTexture(e.TEXTURE0+(0|t)),e.bindTexture(e.TEXTURE_2D,this.handle),void 0!==t?0|t:e.getParameter(e.ACTIVE_TEXTURE)-e.TEXTURE0},f.dispose=function(){this.gl.deleteTexture(this.handle)},f.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var t=Math.min(this._shape[0],this._shape[1]),e=0;t>0;++e,t>>>=1)this._mipLevels.indexOf(e)<0&&this._mipLevels.push(e)},f.setPixels=function(t,e,r,n){var i=this.gl;this.bind(),Array.isArray(e)?(n=r,r=0|e[1],e=0|e[0]):(e=e||0,r=r||0),n=n||0;var a=u(t)?t:t.raw;if(a)this._mipLevels.indexOf(n)<0?(i.texImage2D(i.TEXTURE_2D,0,this.format,this.format,this.type,a),this._mipLevels.push(n)):i.texSubImage2D(i.TEXTURE_2D,n,e,r,this.format,this.type,a);else{if(!(t.shape&&t.stride&&t.data))throw new Error("gl-texture2d: Unsupported data type");if(t.shape.length<2||e+t.shape[1]>this._shape[1]>>>n||r+t.shape[0]>this._shape[0]>>>n||e<0||r<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");m(i,e,r,n,this.format,this.type,this._mipLevels,t)}}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(t,e,r){function n(t,e,r){e?e.bind():t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null);var n=0|t.getParameter(t.MAX_VERTEX_ATTRIBS);if(r){if(r.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var i=0;i<r.length;++i){var a=r[i];if(a.buffer){var o=a.buffer,s=a.size||4,l=a.type||t.FLOAT,c=!!a.normalized,u=a.stride||0,d=a.offset||0;o.bind(),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,s,l,c,u,d)}else{if("number"==typeof a)t.vertexAttrib1f(i,a);else if(1===a.length)t.vertexAttrib1f(i,a[0]);else if(2===a.length)t.vertexAttrib2f(i,a[0],a[1]);else if(3===a.length)t.vertexAttrib3f(i,a[0],a[1],a[2]);else{if(4!==a.length)throw new Error("gl-vao: Invalid vertex attribute");t.vertexAttrib4f(i,a[0],a[1],a[2],a[3])}t.disableVertexAttribArray(i)}}for(;i<n;++i)t.disableVertexAttribArray(i)}else for(t.bindBuffer(t.ARRAY_BUFFER,null),i=0;i<n;++i)t.disableVertexAttribArray(i)}e.exports=n},{}],148:[function(t,e,r){var n=t("./do-bind.js");function i(t){this.gl=t,this._elements=null,this._attributes=null,this._elementsType=t.UNSIGNED_SHORT}function a(t){return new i(t)}i.prototype.bind=function(){n(this.gl,this._elements,this._attributes)},i.prototype.update=function(t,e,r){this._elements=e,this._attributes=t,this._elementsType=r||this.gl.UNSIGNED_SHORT},i.prototype.dispose=function(){},i.prototype.unbind=function(){},i.prototype.draw=function(t,e,r){r=r||0;var n=this.gl;this._elements?n.drawElements(t,e,this._elementsType,r):n.drawArrays(t,r,e)},e.exports=a},{"./do-bind.js":147}],149:[function(t,e,r){var n=t("./do-bind.js");function i(t,e,r,n,i,a){this.location=t,this.dimension=e,this.a=r,this.b=n,this.c=i,this.d=a}function a(t,e,r){this.gl=t,this._ext=e,this.handle=r,this._attribs=[],this._useElements=!1,this._elementsType=t.UNSIGNED_SHORT}function o(t,e){return new a(t,e,e.createVertexArrayOES())}i.prototype.bind=function(t){switch(this.dimension){case 1:t.vertexAttrib1f(this.location,this.a);break;case 2:t.vertexAttrib2f(this.location,this.a,this.b);break;case 3:t.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:t.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},a.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var t=0;t<this._attribs.length;++t)this._attribs[t].bind(this.gl)},a.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},a.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},a.prototype.update=function(t,e,r){if(this.bind(),n(this.gl,e,t),this.unbind(),this._attribs.length=0,t)for(var a=0;a<t.length;++a){var o=t[a];"number"==typeof o?this._attribs.push(new i(a,1,o)):Array.isArray(o)&&this._attribs.push(new i(a,o.length,o[0],o[1],o[2],o[3]))}this._useElements=!!e,this._elementsType=r||this.gl.UNSIGNED_SHORT},a.prototype.draw=function(t,e,r){r=r||0;var n=this.gl;this._useElements?n.drawElements(t,e,this._elementsType,r):n.drawArrays(t,r,e)},e.exports=o},{"./do-bind.js":147}],150:[function(t,e,r){var n=t("./lib/vao-native.js"),i=t("./lib/vao-emulated.js");function a(t){this.bindVertexArrayOES=t.bindVertexArray.bind(t),this.createVertexArrayOES=t.createVertexArray.bind(t),this.deleteVertexArrayOES=t.deleteVertexArray.bind(t)}function o(t,e,r,o){var s,l=t.createVertexArray?new a(t):t.getExtension("OES_vertex_array_object");return(s=l?n(t,l):i(t)).update(e,r,o),s}e.exports=o},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(t,e,r){function n(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}e.exports=n},{}],152:[function(t,e,r){e.exports=o;var n=t("./fromValues"),i=t("./normalize"),a=t("./dot");function o(t,e){var r=n(t[0],t[1],t[2]),o=n(e[0],e[1],e[2]);i(r,r),i(o,o);var s=a(r,o);return s>1?0:Math.acos(s)}},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(t,e,r){function n(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}e.exports=n},{}],154:[function(t,e,r){function n(t){var e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}e.exports=n},{}],155:[function(t,e,r){function n(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}e.exports=n},{}],156:[function(t,e,r){function n(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}e.exports=n},{}],157:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],l=r[2];return t[0]=i*l-a*s,t[1]=a*o-n*l,t[2]=n*s-i*o,t}e.exports=n},{}],158:[function(t,e,r){e.exports=t("./distance")},{"./distance":159}],159:[function(t,e,r){function n(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)}e.exports=n},{}],160:[function(t,e,r){e.exports=t("./divide")},{"./divide":161}],161:[function(t,e,r){function n(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}e.exports=n},{}],162:[function(t,e,r){function n(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}e.exports=n},{}],163:[function(t,e,r){e.exports=1e-6},{}],164:[function(t,e,r){e.exports=i;var n=t("./epsilon");function i(t,e){var r=t[0],i=t[1],a=t[2],o=e[0],s=e[1],l=e[2];return Math.abs(r-o)<=n*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=n*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-l)<=n*Math.max(1,Math.abs(a),Math.abs(l))}},{"./epsilon":163}],165:[function(t,e,r){function n(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}e.exports=n},{}],166:[function(t,e,r){function n(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}e.exports=n},{}],167:[function(t,e,r){e.exports=i;var n=t("./create")();function i(t,e,r,i,a,o){var s,l;for(e||(e=3),r||(r=0),l=i?Math.min(i*e+r,t.length):t.length,s=r;s<l;s+=e)n[0]=t[s],n[1]=t[s+1],n[2]=t[s+2],a(n,n,o),t[s]=n[0],t[s+1]=n[1],t[s+2]=n[2];return t}},{"./create":156}],168:[function(t,e,r){function n(t,e,r){var n=new Float32Array(3);return n[0]=t,n[1]=e,n[2]=r,n}e.exports=n},{}],169:[function(t,e,r){e.exports={EPSILON:t("./epsilon"),create:t("./create"),clone:t("./clone"),angle:t("./angle"),fromValues:t("./fromValues"),copy:t("./copy"),set:t("./set"),equals:t("./equals"),exactEquals:t("./exactEquals"),add:t("./add"),subtract:t("./subtract"),sub:t("./sub"),multiply:t("./multiply"),mul:t("./mul"),divide:t("./divide"),div:t("./div"),min:t("./min"),max:t("./max"),floor:t("./floor"),ceil:t("./ceil"),round:t("./round"),scale:t("./scale"),scaleAndAdd:t("./scaleAndAdd"),distance:t("./distance"),dist:t("./dist"),squaredDistance:t("./squaredDistance"),sqrDist:t("./sqrDist"),length:t("./length"),len:t("./len"),squaredLength:t("./squaredLength"),sqrLen:t("./sqrLen"),negate:t("./negate"),inverse:t("./inverse"),normalize:t("./normalize"),dot:t("./dot"),cross:t("./cross"),lerp:t("./lerp"),random:t("./random"),transformMat4:t("./transformMat4"),transformMat3:t("./transformMat3"),transformQuat:t("./transformQuat"),rotateX:t("./rotateX"),rotateY:t("./rotateY"),rotateZ:t("./rotateZ"),forEach:t("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(t,e,r){function n(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}e.exports=n},{}],171:[function(t,e,r){e.exports=t("./length")},{"./length":172}],172:[function(t,e,r){function n(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}e.exports=n},{}],173:[function(t,e,r){function n(t,e,r,n){var i=e[0],a=e[1],o=e[2];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t}e.exports=n},{}],174:[function(t,e,r){function n(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}e.exports=n},{}],175:[function(t,e,r){function n(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}e.exports=n},{}],176:[function(t,e,r){e.exports=t("./multiply")},{"./multiply":177}],177:[function(t,e,r){function n(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}e.exports=n},{}],178:[function(t,e,r){function n(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}e.exports=n},{}],179:[function(t,e,r){function n(t,e){var r=e[0],n=e[1],i=e[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t}e.exports=n},{}],180:[function(t,e,r){function n(t,e){e=e||1;var r=2*Math.random()*Math.PI,n=2*Math.random()-1,i=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=n*e,t}e.exports=n},{}],181:[function(t,e,r){function n(t,e,r,n){var i=r[1],a=r[2],o=e[1]-i,s=e[2]-a,l=Math.sin(n),c=Math.cos(n);return t[0]=e[0],t[1]=i+o*c-s*l,t[2]=a+o*l+s*c,t}e.exports=n},{}],182:[function(t,e,r){function n(t,e,r,n){var i=r[0],a=r[2],o=e[0]-i,s=e[2]-a,l=Math.sin(n),c=Math.cos(n);return t[0]=i+s*l+o*c,t[1]=e[1],t[2]=a+s*c-o*l,t}e.exports=n},{}],183:[function(t,e,r){function n(t,e,r,n){var i=r[0],a=r[1],o=e[0]-i,s=e[1]-a,l=Math.sin(n),c=Math.cos(n);return t[0]=i+o*c-s*l,t[1]=a+o*l+s*c,t[2]=e[2],t}e.exports=n},{}],184:[function(t,e,r){function n(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}e.exports=n},{}],185:[function(t,e,r){function n(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}e.exports=n},{}],186:[function(t,e,r){function n(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}e.exports=n},{}],187:[function(t,e,r){function n(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}e.exports=n},{}],188:[function(t,e,r){e.exports=t("./squaredDistance")},{"./squaredDistance":190}],189:[function(t,e,r){e.exports=t("./squaredLength")},{"./squaredLength":191}],190:[function(t,e,r){function n(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}e.exports=n},{}],191:[function(t,e,r){function n(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}e.exports=n},{}],192:[function(t,e,r){e.exports=t("./subtract")},{"./subtract":193}],193:[function(t,e,r){function n(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}e.exports=n},{}],194:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],a=e[2];return t[0]=n*r[0]+i*r[3]+a*r[6],t[1]=n*r[1]+i*r[4]+a*r[7],t[2]=n*r[2]+i*r[5]+a*r[8],t}e.exports=n},{}],195:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[3]*n+r[7]*i+r[11]*a+r[15];return o=o||1,t[0]=(r[0]*n+r[4]*i+r[8]*a+r[12])/o,t[1]=(r[1]*n+r[5]*i+r[9]*a+r[13])/o,t[2]=(r[2]*n+r[6]*i+r[10]*a+r[14])/o,t}e.exports=n},{}],196:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],l=r[2],c=r[3],u=c*n+s*a-l*i,d=c*i+l*n-o*a,h=c*a+o*i-s*n,g=-o*n-s*i-l*a;return t[0]=u*c+g*-o+d*-l-h*-s,t[1]=d*c+g*-s+h*-o-u*-l,t[2]=h*c+g*-l+u*-s-d*-o,t}e.exports=n},{}],197:[function(t,e,r){function n(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}e.exports=n},{}],198:[function(t,e,r){function n(t){var e=new Float32Array(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}e.exports=n},{}],199:[function(t,e,r){function n(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}e.exports=n},{}],200:[function(t,e,r){function n(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}e.exports=n},{}],201:[function(t,e,r){function n(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+a*a)}e.exports=n},{}],202:[function(t,e,r){function n(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}e.exports=n},{}],203:[function(t,e,r){function n(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}e.exports=n},{}],204:[function(t,e,r){function n(t,e,r,n){var i=new Float32Array(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}e.exports=n},{}],205:[function(t,e,r){e.exports={create:t("./create"),clone:t("./clone"),fromValues:t("./fromValues"),copy:t("./copy"),set:t("./set"),add:t("./add"),subtract:t("./subtract"),multiply:t("./multiply"),divide:t("./divide"),min:t("./min"),max:t("./max"),scale:t("./scale"),scaleAndAdd:t("./scaleAndAdd"),distance:t("./distance"),squaredDistance:t("./squaredDistance"),length:t("./length"),squaredLength:t("./squaredLength"),negate:t("./negate"),inverse:t("./inverse"),normalize:t("./normalize"),dot:t("./dot"),lerp:t("./lerp"),random:t("./random"),transformMat4:t("./transformMat4"),transformQuat:t("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(t,e,r){function n(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}e.exports=n},{}],207:[function(t,e,r){function n(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)}e.exports=n},{}],208:[function(t,e,r){function n(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=e[3];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t[3]=s+n*(r[3]-s),t}e.exports=n},{}],209:[function(t,e,r){function n(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}e.exports=n},{}],210:[function(t,e,r){function n(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}e.exports=n},{}],211:[function(t,e,r){function n(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}e.exports=n},{}],212:[function(t,e,r){function n(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}e.exports=n},{}],213:[function(t,e,r){function n(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*r+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=r*o,t[1]=n*o,t[2]=i*o,t[3]=a*o),t}e.exports=n},{}],214:[function(t,e,r){var n=t("./normalize"),i=t("./scale");function a(t,e){return e=e||1,t[0]=Math.random(),t[1]=Math.random(),t[2]=Math.random(),t[3]=Math.random(),n(t,t),i(t,t,e),t}e.exports=a},{"./normalize":213,"./scale":215}],215:[function(t,e,r){function n(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}e.exports=n},{}],216:[function(t,e,r){function n(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}e.exports=n},{}],217:[function(t,e,r){function n(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}e.exports=n},{}],218:[function(t,e,r){function n(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return r*r+n*n+i*i+a*a}e.exports=n},{}],219:[function(t,e,r){function n(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}e.exports=n},{}],220:[function(t,e,r){function n(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}e.exports=n},{}],221:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,t}e.exports=n},{}],222:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],l=r[2],c=r[3],u=c*n+s*a-l*i,d=c*i+l*n-o*a,h=c*a+o*i-s*n,g=-o*n-s*i-l*a;return t[0]=u*c+g*-o+d*-l-h*-s,t[1]=d*c+g*-s+h*-o-u*-l,t[2]=h*c+g*-l+u*-s-d*-o,t[3]=e[3],t}e.exports=n},{}],223:[function(t,e,r){var n=t("glsl-tokenizer"),i=t("atob-lite");function a(t){for(var e=Array.isArray(t)?t:n(t),r=0;r<e.length;r++){var a=e[r];if("preprocessor"===a.type){var o=a.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(o&&o[2]){var s=o[1],l=o[2];return(s?i(l):l).trim()}}}}e.exports=a},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(t,e,r){e.exports=C;var n=t("./lib/literals"),i=t("./lib/operators"),a=t("./lib/builtins"),o=t("./lib/literals-300es"),s=t("./lib/builtins-300es"),l=999,c=9999,u=0,d=1,h=2,g=3,f=4,p=5,m=6,y=7,b=8,v=9,x=10,I=11,B=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function C(t){var e,r,C,F=0,A=0,Q=l,_=[],w=[],U=1,S=0,E=0,L=!1,T=!1,R="",k=a,G=n;"300 es"===(t=t||{}).version&&(k=s,G=o);var N={},M={};for(F=0;F<k.length;F++)N[k[F]]=!0;for(F=0;F<G.length;F++)M[G[F]]=!0;return function(t){return w=[],null!==t?X(t):V()};function D(t){t.length&&w.push({type:B[Q],data:t,position:E,line:U,column:S})}function X(t){var r;for(F=0,t.toString&&(t=t.toString()),R+=t.replace(/\r\n/g,"\n"),C=R.length;e=R[F],F<C;){switch(r=F,Q){case u:F=H();break;case d:F=$();break;case h:F=O();break;case g:F=Y();break;case f:F=J();break;case I:F=z();break;case p:F=j();break;case c:F=K();break;case v:F=Z();break;case l:F=W()}r!==F&&("\n"===R[r]?(S=0,++U):++S)}return A+=F,R=R.slice(F),w}function V(t){return _.length&&D(_.join("")),Q=x,D("(eof)"),w}function W(){return _=_.length?[]:_,"/"===r&&"*"===e?(E=A+F-1,Q=u,r=e,F+1):"/"===r&&"/"===e?(E=A+F-1,Q=d,r=e,F+1):"#"===e?(Q=h,E=A+F,F):/\s/.test(e)?(Q=v,E=A+F,F):(L=/\d/.test(e),T=/[^\w_]/.test(e),E=A+F,Q=L?f:T?g:c,F)}function Z(){return/[^\s]/g.test(e)?(D(_.join("")),Q=l,F):(_.push(e),r=e,F+1)}function O(){return"\r"!==e&&"\n"!==e||"\\"===r?(_.push(e),r=e,F+1):(D(_.join("")),Q=l,F)}function $(){return O()}function H(){return"/"===e&&"*"===r?(_.push(e),D(_.join("")),Q=l,F+1):(_.push(e),r=e,F+1)}function Y(){if("."===r&&/\d/.test(e))return Q=p,F;if("/"===r&&"*"===e)return Q=u,F;if("/"===r&&"/"===e)return Q=d,F;if("."===e&&_.length){for(;P(_););return Q=p,F}if(";"===e||")"===e||"("===e){if(_.length)for(;P(_););return D(e),Q=l,F+1}var t=2===_.length&&"="!==e;if(/[\w_\d\s]/.test(e)||t){for(;P(_););return Q=l,F}return _.push(e),r=e,F+1}function P(t){for(var e,r,n=0;;){if(e=i.indexOf(t.slice(0,t.length+n).join("")),r=i[e],-1===e){if(n--+t.length>0)continue;r=t.slice(0,1).join("")}return D(r),E+=r.length,(_=_.slice(r.length)).length}}function z(){return/[^a-fA-F0-9]/.test(e)?(D(_.join("")),Q=l,F):(_.push(e),r=e,F+1)}function J(){return"."===e||/[eE]/.test(e)?(_.push(e),Q=p,r=e,F+1):"x"===e&&1===_.length&&"0"===_[0]?(Q=I,_.push(e),r=e,F+1):/[^\d]/.test(e)?(D(_.join("")),Q=l,F):(_.push(e),r=e,F+1)}function j(){return"f"===e&&(_.push(e),r=e,F+=1),/[eE]/.test(e)?(_.push(e),r=e,F+1):("-"!==e&&"+"!==e||!/[eE]/.test(r))&&/[^\d]/.test(e)?(D(_.join("")),Q=l,F):(_.push(e),r=e,F+1)}function K(){if(/[^\d\w_]/.test(e)){var t=_.join("");return Q=M[t]?b:N[t]?y:m,D(_.join("")),Q=l,F}return _.push(e),r=e,F+1}}},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(t,e,r){var n=t("./builtins");n=n.slice().filter((function(t){return!/^(gl\_|texture)/.test(t)})),e.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(t,e,r){e.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(t,e,r){var n=t("./literals");e.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(t,e,r){e.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(t,e,r){e.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(t,e,r){var n=t("./index");function i(t,e){var r=n(e),i=[];return i=(i=i.concat(r(t))).concat(r(null))}e.exports=i},{"./index":224}],231:[function(t,e,r){e.exports=function(t){"string"==typeof t&&(t=[t]);for(var e=[].slice.call(arguments,1),r=[],n=0;n<t.length-1;n++)r.push(t[n],e[n]||"");return r.push(t[n]),r.join("")}},{}],232:[function(t,e,r){var n=t("is-browser");function i(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}e.exports=n&&i()},{"is-browser":236}],233:[function(t,e,r){e.exports=g;var n=t("robust-orientation"),i=t("simplicial-complex").compareCells;function a(t,e,r){this.vertices=t,this.adjacent=e,this.boundary=r,this.lastVisited=-1}function o(t,e,r){this.vertices=t,this.cell=e,this.index=r}function s(t,e){return i(t.vertices,e.vertices)}function l(t){return function(){var e=this.tuple;return t.apply(this,e)}}function c(t){var e=n[t+1];return e||(e=n),l(e)}a.prototype.flip=function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;var e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e};var u=[];function d(t,e,r){this.dimension=t,this.vertices=e,this.simplices=r,this.interior=r.filter((function(t){return!t.boundary})),this.tuple=new Array(t+1);for(var n=0;n<=t;++n)this.tuple[n]=this.vertices[n];var i=u[t];i||(i=u[t]=c(t)),this.orient=i}var h=d.prototype;function g(t,e){var r=t.length;if(0===r)throw new Error("Must have at least d+1 points");var i=t[0].length;if(r<=i)throw new Error("Must input at least d+1 points");var o=t.slice(0,i+1),s=n.apply(void 0,o);if(0===s)throw new Error("Input not in general position");for(var l=new Array(i+1),c=0;c<=i;++c)l[c]=c;s<0&&(l[0]=1,l[1]=0);var u=new a(l,new Array(i+1),!1),h=u.adjacent,g=new Array(i+2);for(c=0;c<=i;++c){for(var f=l.slice(),p=0;p<=i;++p)p===c&&(f[p]=-1);var m=f[0];f[0]=f[1],f[1]=m;var y=new a(f,new Array(i+1),!0);h[c]=y,g[c]=y}for(g[i+1]=u,c=0;c<=i;++c){f=h[c].vertices;var b=h[c].adjacent;for(p=0;p<=i;++p){var v=f[p];if(v<0)b[p]=u;else for(var x=0;x<=i;++x)h[x].vertices.indexOf(v)<0&&(b[p]=h[x])}}var I=new d(i,o,g),B=!!e;for(c=i+1;c<r;++c)I.insert(t[c],B);return I.boundary()}h.handleBoundaryDegeneracy=function(t,e){var r=this.dimension,n=this.vertices.length-1,i=this.tuple,a=this.vertices,o=[t];for(t.lastVisited=-n;o.length>0;)for(var s=(t=o.pop()).adjacent,l=0;l<=r;++l){var c=s[l];if(c.boundary&&!(c.lastVisited<=-n)){for(var u=c.vertices,d=0;d<=r;++d){var h=u[d];i[d]=h<0?e:a[h]}var g=this.orient();if(g>0)return c;c.lastVisited=-n,0===g&&o.push(c)}}return null},h.walk=function(t,e){var r=this.vertices.length-1,n=this.dimension,i=this.vertices,a=this.tuple,o=e?this.interior.length*Math.random()|0:this.interior.length-1,s=this.interior[o];t:for(;!s.boundary;){for(var l=s.vertices,c=s.adjacent,u=0;u<=n;++u)a[u]=i[l[u]];for(s.lastVisited=r,u=0;u<=n;++u){var d=c[u];if(!(d.lastVisited>=r)){var h=a[u];a[u]=t;var g=this.orient();if(a[u]=h,g<0){s=d;continue t}d.boundary?d.lastVisited=-r:d.lastVisited=r}}return}return s},h.addPeaks=function(t,e){var r=this.vertices.length-1,n=this.dimension,i=this.vertices,l=this.tuple,c=this.interior,u=this.simplices,d=[e];e.lastVisited=r,e.vertices[e.vertices.indexOf(-1)]=r,e.boundary=!1,c.push(e);for(var h=[];d.length>0;){var g=(e=d.pop()).vertices,f=e.adjacent,p=g.indexOf(r);if(!(p<0))for(var m=0;m<=n;++m)if(m!==p){var y=f[m];if(y.boundary&&!(y.lastVisited>=r)){var b=y.vertices;if(y.lastVisited!==-r){for(var v=0,x=0;x<=n;++x)b[x]<0?(v=x,l[x]=t):l[x]=i[b[x]];if(this.orient()>0){b[v]=r,y.boundary=!1,c.push(y),d.push(y),y.lastVisited=r;continue}y.lastVisited=-r}var I=y.adjacent,B=g.slice(),C=f.slice(),F=new a(B,C,!0);u.push(F);var A=I.indexOf(e);if(!(A<0))for(I[A]=F,C[p]=y,B[m]=-1,C[m]=e,f[m]=F,F.flip(),x=0;x<=n;++x){var Q=B[x];if(!(Q<0||Q===r)){for(var _=new Array(n-1),w=0,U=0;U<=n;++U){var S=B[U];S<0||U===x||(_[w++]=S)}h.push(new o(_,F,x))}}}}}for(h.sort(s),m=0;m+1<h.length;m+=2){var E=h[m],L=h[m+1],T=E.index,R=L.index;T<0||R<0||(E.cell.adjacent[E.index]=L.cell,L.cell.adjacent[L.index]=E.cell)}},h.insert=function(t,e){var r=this.vertices;r.push(t);var n=this.walk(t,e);if(n){for(var i=this.dimension,a=this.tuple,o=0;o<=i;++o){var s=n.vertices[o];a[o]=s<0?t:r[s]}var l=this.orient(a);l<0||(0!==l||(n=this.handleBoundaryDegeneracy(n,t)))&&this.addPeaks(t,n)}},h.boundary=function(){for(var t=this.dimension,e=[],r=this.simplices,n=r.length,i=0;i<n;++i){var a=r[i];if(a.boundary){for(var o=new Array(t),s=a.vertices,l=0,c=0,u=0;u<=t;++u)s[u]>=0?o[l++]=s[u]:c=1&u;if(c===(1&t)){var d=o[0];o[0]=o[1],o[1]=d}e.push(o)}}return e}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(t,e,r){var n=t("binary-search-bounds"),i=0,a=1,o=2;function s(t,e,r,n,i){this.mid=t,this.left=e,this.right=r,this.leftPoints=n,this.rightPoints=i,this.count=(e?e.count:0)+(r?r.count:0)+n.length}e.exports=B;var l=s.prototype;function c(t,e){t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function u(t,e){var r=v(e);t.mid=r.mid,t.left=r.left,t.right=r.right,t.leftPoints=r.leftPoints,t.rightPoints=r.rightPoints,t.count=r.count}function d(t,e){var r=t.intervals([]);r.push(e),u(t,r)}function h(t,e){var r=t.intervals([]),n=r.indexOf(e);return n<0?i:(r.splice(n,1),u(t,r),a)}function g(t,e,r){for(var n=0;n<t.length&&t[n][0]<=e;++n){var i=r(t[n]);if(i)return i}}function f(t,e,r){for(var n=t.length-1;n>=0&&t[n][1]>=e;--n){var i=r(t[n]);if(i)return i}}function p(t,e){for(var r=0;r<t.length;++r){var n=e(t[r]);if(n)return n}}function m(t,e){return t-e}function y(t,e){var r=t[0]-e[0];return r||t[1]-e[1]}function b(t,e){var r=t[1]-e[1];return r||t[0]-e[0]}function v(t){if(0===t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t[r][0],t[r][1]);e.sort(m);var n=e[e.length>>1],i=[],a=[],o=[];for(r=0;r<t.length;++r){var l=t[r];l[1]<n?i.push(l):n<l[0]?a.push(l):o.push(l)}var c=o,u=o.slice();return c.sort(y),u.sort(b),new s(n,v(i),v(a),c,u)}function x(t){this.root=t}l.intervals=function(t){return t.push.apply(t,this.leftPoints),this.left&&this.left.intervals(t),this.right&&this.right.intervals(t),t},l.insert=function(t){var e=this.count-this.leftPoints.length;if(this.count+=1,t[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?d(this,t):this.left.insert(t):this.left=v([t]);else if(t[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?d(this,t):this.right.insert(t):this.right=v([t]);else{var r=n.ge(this.leftPoints,t,y),i=n.ge(this.rightPoints,t,b);this.leftPoints.splice(r,0,t),this.rightPoints.splice(i,0,t)}},l.remove=function(t){var e=this.count-this.leftPoints;if(t[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(e-1)?h(this,t):(u=this.left.remove(t))===o?(this.left=null,this.count-=1,a):(u===a&&(this.count-=1),u):i;if(t[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(e-1)?h(this,t):(u=this.right.remove(t))===o?(this.right=null,this.count-=1,a):(u===a&&(this.count-=1),u):i;if(1===this.count)return this.leftPoints[0]===t?o:i;if(1===this.leftPoints.length&&this.leftPoints[0]===t){if(this.left&&this.right){for(var r=this,s=this.left;s.right;)r=s,s=s.right;if(r===this)s.right=this.right;else{var l=this.left,u=this.right;r.count-=s.count,r.right=s.left,s.left=l,s.right=u}c(this,s),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?c(this,this.left):c(this,this.right);return a}for(l=n.ge(this.leftPoints,t,y);l<this.leftPoints.length&&this.leftPoints[l][0]===t[0];++l)if(this.leftPoints[l]===t)for(this.count-=1,this.leftPoints.splice(l,1),u=n.ge(this.rightPoints,t,b);u<this.rightPoints.length&&this.rightPoints[u][1]===t[1];++u)if(this.rightPoints[u]===t)return this.rightPoints.splice(u,1),a;return i},l.queryPoint=function(t,e){return t<this.mid?this.left&&(r=this.left.queryPoint(t,e))?r:g(this.leftPoints,t,e):t>this.mid?this.right&&(r=this.right.queryPoint(t,e))?r:f(this.rightPoints,t,e):p(this.leftPoints,e);var r},l.queryInterval=function(t,e,r){var n;return t<this.mid&&this.left&&(n=this.left.queryInterval(t,e,r))||e>this.mid&&this.right&&(n=this.right.queryInterval(t,e,r))?n:e<this.mid?g(this.leftPoints,e,r):t>this.mid?f(this.rightPoints,t,r):p(this.leftPoints,r)};var I=x.prototype;function B(t){return t&&0!==t.length?new x(v(t)):new x(null)}I.insert=function(t){this.root?this.root.insert(t):this.root=new s(t[0],null,null,[t],[t])},I.remove=function(t){if(this.root){var e=this.root.remove(t);return e===o&&(this.root=null),e!==i}return!1},I.queryPoint=function(t,e){if(this.root)return this.root.queryPoint(t,e)},I.queryInterval=function(t,e,r){if(t<=e&&this.root)return this.root.queryInterval(t,e,r)},Object.defineProperty(I,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(I,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":31}],235:[function(t,e,r){function n(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}e.exports=n},{}],236:[function(t,e,r){e.exports=!0},{}],237:[function(t,e,r){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function i(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(t){return null!=t&&(n(t)||i(t)||!!t._isBuffer)}},{}],238:[function(t,e,r){e.exports=a,e.exports.isMobile=a,e.exports.default=a;var n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function a(t){t||(t={});var e=t.ua;if(e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var r=t.tablet?i.test(e):n.test(e);return!r&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(r=!0),r}},{}],239:[function(t,e,r){e.exports=function(t){for(var e,r=t.length,n=0;n<r;n++)if(((e=t.charCodeAt(n))<9||e>13)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||e>8205)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0}},{}],240:[function(t,e,r){function n(t,e,r){return t*(1-r)+e*r}e.exports=n},{}],241:[function(t,e,r){var n=t("./normalize"),i=t("gl-mat4/create"),a=t("gl-mat4/clone"),o=t("gl-mat4/determinant"),s=t("gl-mat4/invert"),l=t("gl-mat4/transpose"),c={length:t("gl-vec3/length"),normalize:t("gl-vec3/normalize"),dot:t("gl-vec3/dot"),cross:t("gl-vec3/cross")},u=i(),d=i(),h=[0,0,0,0],g=[[0,0,0],[0,0,0],[0,0,0]],f=[0,0,0];function p(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,t}function m(t,e){t[0][0]=e[0],t[0][1]=e[1],t[0][2]=e[2],t[1][0]=e[4],t[1][1]=e[5],t[1][2]=e[6],t[2][0]=e[8],t[2][1]=e[9],t[2][2]=e[10]}function y(t,e,r,n,i){t[0]=e[0]*n+r[0]*i,t[1]=e[1]*n+r[1]*i,t[2]=e[2]*n+r[2]*i}e.exports=function(t,e,r,i,b,v){if(e||(e=[0,0,0]),r||(r=[0,0,0]),i||(i=[0,0,0]),b||(b=[0,0,0,1]),v||(v=[0,0,0,1]),!n(u,t))return!1;if(a(d,u),d[3]=0,d[7]=0,d[11]=0,d[15]=1,Math.abs(o(d)<1e-8))return!1;var x=u[3],I=u[7],B=u[11],C=u[12],F=u[13],A=u[14],Q=u[15];if(0!==x||0!==I||0!==B){if(h[0]=x,h[1]=I,h[2]=B,h[3]=Q,!s(d,d))return!1;l(d,d),p(b,h,d)}else b[0]=b[1]=b[2]=0,b[3]=1;if(e[0]=C,e[1]=F,e[2]=A,m(g,u),r[0]=c.length(g[0]),c.normalize(g[0],g[0]),i[0]=c.dot(g[0],g[1]),y(g[1],g[1],g[0],1,-i[0]),r[1]=c.length(g[1]),c.normalize(g[1],g[1]),i[0]/=r[1],i[1]=c.dot(g[0],g[2]),y(g[2],g[2],g[0],1,-i[1]),i[2]=c.dot(g[1],g[2]),y(g[2],g[2],g[1],1,-i[2]),r[2]=c.length(g[2]),c.normalize(g[2],g[2]),i[1]/=r[2],i[2]/=r[2],c.cross(f,g[1],g[2]),c.dot(g[0],f)<0)for(var _=0;_<3;_++)r[_]*=-1,g[_][0]*=-1,g[_][1]*=-1,g[_][2]*=-1;return v[0]=.5*Math.sqrt(Math.max(1+g[0][0]-g[1][1]-g[2][2],0)),v[1]=.5*Math.sqrt(Math.max(1-g[0][0]+g[1][1]-g[2][2],0)),v[2]=.5*Math.sqrt(Math.max(1-g[0][0]-g[1][1]+g[2][2],0)),v[3]=.5*Math.sqrt(Math.max(1+g[0][0]+g[1][1]+g[2][2],0)),g[2][1]>g[1][2]&&(v[0]=-v[0]),g[0][2]>g[2][0]&&(v[1]=-v[1]),g[1][0]>g[0][1]&&(v[2]=-v[2]),!0}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(t,e,r){e.exports=function(t,e){var r=e[15];if(0===r)return!1;for(var n=1/r,i=0;i<16;i++)t[i]=e[i]*n;return!0}},{}],243:[function(t,e,r){var n=t("gl-vec3/lerp"),i=t("mat4-recompose"),a=t("mat4-decompose"),o=t("gl-mat4/determinant"),s=t("quat-slerp"),l=h(),c=h(),u=h();function d(t,e,r,d){if(0===o(e)||0===o(r))return!1;var h=a(e,l.translate,l.scale,l.skew,l.perspective,l.quaternion),g=a(r,c.translate,c.scale,c.skew,c.perspective,c.quaternion);return!(!h||!g||(n(u.translate,l.translate,c.translate,d),n(u.skew,l.skew,c.skew,d),n(u.scale,l.scale,c.scale,d),n(u.perspective,l.perspective,c.perspective,d),s(u.quaternion,l.quaternion,c.quaternion,d),i(t,u.translate,u.scale,u.skew,u.perspective,u.quaternion),0))}function h(){return{translate:g(),scale:g(1),skew:g(),perspective:f(),quaternion:f()}}function g(t){return[t||0,t||0,t||0]}function f(){return[0,0,0,1]}e.exports=d},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(t,e,r){var n={identity:t("gl-mat4/identity"),translate:t("gl-mat4/translate"),multiply:t("gl-mat4/multiply"),create:t("gl-mat4/create"),scale:t("gl-mat4/scale"),fromRotationTranslation:t("gl-mat4/fromRotationTranslation")};n.create();var i=n.create();e.exports=function(t,e,r,a,o,s){return n.identity(t),n.fromRotationTranslation(t,s,e),t[3]=o[0],t[7]=o[1],t[11]=o[2],t[15]=o[3],n.identity(i),0!==a[2]&&(i[9]=a[2],n.multiply(t,t,i)),0!==a[1]&&(i[9]=0,i[8]=a[1],n.multiply(t,t,i)),0!==a[0]&&(i[8]=0,i[4]=a[0],n.multiply(t,t,i)),n.scale(t,t,r),t}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(t,e,r){var n=t("binary-search-bounds"),i=t("mat4-interpolate"),a=t("gl-mat4/invert"),o=t("gl-mat4/rotateX"),s=t("gl-mat4/rotateY"),l=t("gl-mat4/rotateZ"),c=t("gl-mat4/lookAt"),u=t("gl-mat4/translate");t("gl-mat4/scale");var d=t("gl-vec3/normalize"),h=[0,0,0];function g(t){this._components=t.slice(),this._time=[0],this.prevMatrix=t.slice(),this.nextMatrix=t.slice(),this.computedMatrix=t.slice(),this.computedInverse=t.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}e.exports=m;var f=g.prototype;f.recalcMatrix=function(t){var e=this._time,r=n.le(e,t),o=this.computedMatrix;if(!(r<0)){var s=this._components;if(r===e.length-1)for(var l=16*r,c=0;c<16;++c)o[c]=s[l++];else{var u=e[r+1]-e[r],h=(l=16*r,this.prevMatrix),g=!0;for(c=0;c<16;++c)h[c]=s[l++];var f=this.nextMatrix;for(c=0;c<16;++c)f[c]=s[l++],g=g&&h[c]===f[c];if(u<1e-6||g)for(c=0;c<16;++c)o[c]=h[c];else i(o,h,f,(t-e[r])/u)}var p=this.computedUp;p[0]=o[1],p[1]=o[5],p[2]=o[9],d(p,p);var m=this.computedInverse;a(m,o);var y=this.computedEye,b=m[15];y[0]=m[12]/b,y[1]=m[13]/b,y[2]=m[14]/b;var v=this.computedCenter,x=Math.exp(this.computedRadius[0]);for(c=0;c<3;++c)v[c]=y[c]-o[2+4*c]*x}},f.idle=function(t){if(!(t<this.lastT())){for(var e=this._components,r=e.length-16,n=0;n<16;++n)e.push(e[r++]);this._time.push(t)}},f.flush=function(t){var e=n.gt(this._time,t)-2;e<0||(this._time.splice(0,e),this._components.splice(0,16*e))},f.lastT=function(){return this._time[this._time.length-1]},f.lookAt=function(t,e,r,n){this.recalcMatrix(t),e=e||this.computedEye,r=r||h,n=n||this.computedUp,this.setMatrix(t,c(this.computedMatrix,e,r,n));for(var i=0,a=0;a<3;++a)i+=Math.pow(r[a]-e[a],2);i=Math.log(Math.sqrt(i)),this.computedRadius[0]=i},f.rotate=function(t,e,r,n){this.recalcMatrix(t);var i=this.computedInverse;e&&s(i,i,e),r&&o(i,i,r),n&&l(i,i,n),this.setMatrix(t,a(this.computedMatrix,i))};var p=[0,0,0];function m(t){return new g((t=t||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}f.pan=function(t,e,r,n){p[0]=-(e||0),p[1]=-(r||0),p[2]=-(n||0),this.recalcMatrix(t);var i=this.computedInverse;u(i,i,p),this.setMatrix(t,a(i,i))},f.translate=function(t,e,r,n){p[0]=e||0,p[1]=r||0,p[2]=n||0,this.recalcMatrix(t);var i=this.computedMatrix;u(i,i,p),this.setMatrix(t,i)},f.setMatrix=function(t,e){if(!(t<this.lastT())){this._time.push(t);for(var r=0;r<16;++r)this._components.push(e[r])}},f.setDistance=function(t,e){this.computedRadius[0]=e},f.setDistanceLimits=function(t,e){var r=this._limits;r[0]=t,r[1]=e},f.getDistanceLimits=function(t){var e=this._limits;return t?(t[0]=e[0],t[1]=e[1],t):e}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(t,e,r){e.exports=i;var n=t("robust-orientation")[3];function i(t){var e=t.length;if(e<3){for(var r=new Array(e),i=0;i<e;++i)r[i]=i;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:r}var a=new Array(e);for(i=0;i<e;++i)a[i]=i;a.sort((function(e,r){var n=t[e][0]-t[r][0];return n||t[e][1]-t[r][1]}));var o=[a[0],a[1]],s=[a[0],a[1]];for(i=2;i<e;++i){for(var l=a[i],c=t[l],u=o.length;u>1&&n(t[o[u-2]],t[o[u-1]],c)<=0;)u-=1,o.pop();for(o.push(l),u=s.length;u>1&&n(t[s[u-2]],t[s[u-1]],c)>=0;)u-=1,s.pop();s.push(l)}r=new Array(s.length+o.length-2);for(var d=0,h=(i=0,o.length);i<h;++i)r[d++]=o[i];for(var g=s.length-2;g>0;--g)r[d++]=s[g];return r}},{"robust-orientation":284}],247:[function(t,e,r){e.exports=i;var n=t("mouse-event");function i(t,e){e||(e=t,t=window);var r=0,i=0,a=0,o={shift:!1,alt:!1,control:!1,meta:!1},s=!1;function l(t){var e=!1;return"altKey"in t&&(e=e||t.altKey!==o.alt,o.alt=!!t.altKey),"shiftKey"in t&&(e=e||t.shiftKey!==o.shift,o.shift=!!t.shiftKey),"ctrlKey"in t&&(e=e||t.ctrlKey!==o.control,o.control=!!t.ctrlKey),"metaKey"in t&&(e=e||t.metaKey!==o.meta,o.meta=!!t.metaKey),e}function c(t,s){var c=n.x(s),u=n.y(s);"buttons"in s&&(t=0|s.buttons),(t!==r||c!==i||u!==a||l(s))&&(r=0|t,i=c||0,a=u||0,e&&e(r,i,a,o))}function u(t){c(0,t)}function d(){(r||i||a||o.shift||o.alt||o.meta||o.control)&&(i=a=0,r=0,o.shift=o.alt=o.control=o.meta=!1,e&&e(0,0,0,o))}function h(t){l(t)&&e&&e(r,i,a,o)}function g(t){0===n.buttons(t)?c(0,t):c(r,t)}function f(t){c(r|n.buttons(t),t)}function p(t){c(r&~n.buttons(t),t)}function m(){s||(s=!0,t.addEventListener("mousemove",g),t.addEventListener("mousedown",f),t.addEventListener("mouseup",p),t.addEventListener("mouseleave",u),t.addEventListener("mouseenter",u),t.addEventListener("mouseout",u),t.addEventListener("mouseover",u),t.addEventListener("blur",d),t.addEventListener("keyup",h),t.addEventListener("keydown",h),t.addEventListener("keypress",h),t!==window&&(window.addEventListener("blur",d),window.addEventListener("keyup",h),window.addEventListener("keydown",h),window.addEventListener("keypress",h)))}function y(){s&&(s=!1,t.removeEventListener("mousemove",g),t.removeEventListener("mousedown",f),t.removeEventListener("mouseup",p),t.removeEventListener("mouseleave",u),t.removeEventListener("mouseenter",u),t.removeEventListener("mouseout",u),t.removeEventListener("mouseover",u),t.removeEventListener("blur",d),t.removeEventListener("keyup",h),t.removeEventListener("keydown",h),t.removeEventListener("keypress",h),t!==window&&(window.removeEventListener("blur",d),window.removeEventListener("keyup",h),window.removeEventListener("keydown",h),window.removeEventListener("keypress",h)))}m();var b={element:t};return Object.defineProperties(b,{enabled:{get:function(){return s},set:function(t){t?m():y()},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return a},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),b}},{"mouse-event":249}],248:[function(t,e,r){var n={left:0,top:0};function i(t,e,r){e=e||t.currentTarget||t.srcElement,Array.isArray(r)||(r=[0,0]);var n=t.clientX||0,i=t.clientY||0,o=a(e);return r[0]=n-o.left,r[1]=i-o.top,r}function a(t){return t===window||t===document||t===document.body?n:t.getBoundingClientRect()}e.exports=i},{}],249:[function(t,e,r){function n(t){if("object"==typeof t){if("buttons"in t)return t.buttons;if("which"in t){if(2===(e=t.which))return 4;if(3===e)return 2;if(e>0)return 1<<e-1}else if("button"in t){var e;if(1===(e=t.button))return 4;if(2===e)return 2;if(e>=0)return 1<<e}}return 0}function i(t){return t.target||t.srcElement||window}function a(t){if("object"==typeof t){if("offsetX"in t)return t.offsetX;var e=i(t).getBoundingClientRect();return t.clientX-e.left}return 0}function o(t){if("object"==typeof t){if("offsetY"in t)return t.offsetY;var e=i(t).getBoundingClientRect();return t.clientY-e.top}return 0}r.buttons=n,r.element=i,r.x=a,r.y=o},{}],250:[function(t,e,r){var n=t("to-px");function i(t,e,r){"function"==typeof t&&(r=!!e,e=t,t=window);var i=n("ex",t),a=function(t){r&&t.preventDefault();var n=t.deltaX||0,a=t.deltaY||0,o=t.deltaZ||0,s=1;switch(t.deltaMode){case 1:s=i;break;case 2:s=window.innerHeight}if(a*=s,o*=s,(n*=s)||a||o)return e(n,a,o,t)};return t.addEventListener("wheel",a),a}e.exports=i},{"to-px":304}],251:[function(t,e,r){var n=t("typedarray-pool");e.exports=o;var i={"false,0,1":function(t,e,r,n,i){return function(a,o,s,l){var c,u=0|a.shape[0],d=0|a.shape[1],h=a.data,g=0|a.offset,f=0|a.stride[0],p=0|a.stride[1],m=g,y=0|-f,b=0,v=0|-p,x=0,I=-f-p|0,B=0,C=0|f,F=p-f*u|0,A=0,Q=0,_=0,w=2*u|0,U=n(w),S=n(w),E=0,L=0,T=-1,R=-1,k=0,G=0|-u,N=0|u,M=0,D=-u-1|0,X=u-1|0,V=0,W=0,Z=0;for(A=0;A<u;++A)U[E++]=r(h[m],o,s,l),m+=C;if(m+=F,d>0){if(Q=1,U[E++]=r(h[m],o,s,l),m+=C,u>0)for(A=1,c=h[m],L=U[E]=r(c,o,s,l),k=U[E+T],M=U[E+G],V=U[E+D],L===k&&L===M&&L===V||(b=h[m+y],x=h[m+v],B=h[m+I],t(A,Q,c,b,x,B,L,k,M,V,o,s,l),W=S[E]=_++),E+=1,m+=C,A=2;A<u;++A)c=h[m],L=U[E]=r(c,o,s,l),k=U[E+T],M=U[E+G],V=U[E+D],L===k&&L===M&&L===V||(b=h[m+y],x=h[m+v],B=h[m+I],t(A,Q,c,b,x,B,L,k,M,V,o,s,l),W=S[E]=_++,V!==k&&e(S[E+T],W,B,b,V,k,o,s,l)),E+=1,m+=C;for(m+=F,E=0,Z=T,T=R,R=Z,Z=G,G=N,N=Z,Z=D,D=X,X=Z,Q=2;Q<d;++Q){if(U[E++]=r(h[m],o,s,l),m+=C,u>0)for(A=1,c=h[m],L=U[E]=r(c,o,s,l),k=U[E+T],M=U[E+G],V=U[E+D],L===k&&L===M&&L===V||(b=h[m+y],x=h[m+v],B=h[m+I],t(A,Q,c,b,x,B,L,k,M,V,o,s,l),W=S[E]=_++,V!==M&&e(S[E+G],W,x,B,M,V,o,s,l)),E+=1,m+=C,A=2;A<u;++A)c=h[m],L=U[E]=r(c,o,s,l),k=U[E+T],M=U[E+G],V=U[E+D],L===k&&L===M&&L===V||(b=h[m+y],x=h[m+v],B=h[m+I],t(A,Q,c,b,x,B,L,k,M,V,o,s,l),W=S[E]=_++,V!==M&&e(S[E+G],W,x,B,M,V,o,s,l),V!==k&&e(S[E+T],W,B,b,V,k,o,s,l)),E+=1,m+=C;1&Q&&(E=0),Z=T,T=R,R=Z,Z=G,G=N,N=Z,Z=D,D=X,X=Z,m+=F}}i(S),i(U)}},"false,1,0":function(t,e,r,n,i){return function(a,o,s,l){var c,u=0|a.shape[0],d=0|a.shape[1],h=a.data,g=0|a.offset,f=0|a.stride[0],p=0|a.stride[1],m=g,y=0|-f,b=0,v=0|-p,x=0,I=-f-p|0,B=0,C=0|p,F=f-p*d|0,A=0,Q=0,_=0,w=2*d|0,U=n(w),S=n(w),E=0,L=0,T=-1,R=-1,k=0,G=0|-d,N=0|d,M=0,D=-d-1|0,X=d-1|0,V=0,W=0,Z=0;for(Q=0;Q<d;++Q)U[E++]=r(h[m],o,s,l),m+=C;if(m+=F,u>0){if(A=1,U[E++]=r(h[m],o,s,l),m+=C,d>0)for(Q=1,c=h[m],L=U[E]=r(c,o,s,l),M=U[E+G],k=U[E+T],V=U[E+D],L===M&&L===k&&L===V||(b=h[m+y],x=h[m+v],B=h[m+I],t(A,Q,c,b,x,B,L,M,k,V,o,s,l),W=S[E]=_++),E+=1,m+=C,Q=2;Q<d;++Q)c=h[m],L=U[E]=r(c,o,s,l),M=U[E+G],k=U[E+T],V=U[E+D],L===M&&L===k&&L===V||(b=h[m+y],x=h[m+v],B=h[m+I],t(A,Q,c,b,x,B,L,M,k,V,o,s,l),W=S[E]=_++,V!==k&&e(S[E+T],W,x,B,k,V,o,s,l)),E+=1,m+=C;for(m+=F,E=0,Z=G,G=N,N=Z,Z=T,T=R,R=Z,Z=D,D=X,X=Z,A=2;A<u;++A){if(U[E++]=r(h[m],o,s,l),m+=C,d>0)for(Q=1,c=h[m],L=U[E]=r(c,o,s,l),M=U[E+G],k=U[E+T],V=U[E+D],L===M&&L===k&&L===V||(b=h[m+y],x=h[m+v],B=h[m+I],t(A,Q,c,b,x,B,L,M,k,V,o,s,l),W=S[E]=_++,V!==M&&e(S[E+G],W,B,b,V,M,o,s,l)),E+=1,m+=C,Q=2;Q<d;++Q)c=h[m],L=U[E]=r(c,o,s,l),M=U[E+G],k=U[E+T],V=U[E+D],L===M&&L===k&&L===V||(b=h[m+y],x=h[m+v],B=h[m+I],t(A,Q,c,b,x,B,L,M,k,V,o,s,l),W=S[E]=_++,V!==k&&e(S[E+T],W,x,B,k,V,o,s,l),V!==M&&e(S[E+G],W,B,b,V,M,o,s,l)),E+=1,m+=C;1&A&&(E=0),Z=G,G=N,N=Z,Z=T,T=R,R=Z,Z=D,D=X,X=Z,m+=F}}i(S),i(U)}}};function a(t,e,r,a,o,s){var l=[s,o].join(",");return(0,i[l])(t,e,r,n.mallocUint32,n.freeUint32)}function o(t){function e(t){throw new Error("ndarray-extract-contour: "+t)}"object"!=typeof t&&e("Must specify arguments");var r=t.order;Array.isArray(r)||e("Must specify order");var n=t.arrayArguments||1;n<1&&e("Must have at least one array argument");var i=t.scalarArguments||0;i<0&&e("Scalar arg count must be > 0"),"function"!=typeof t.vertex&&e("Must specify vertex creation function"),"function"!=typeof t.cell&&e("Must specify cell creation function"),"function"!=typeof t.phase&&e("Must specify phase function");for(var o=t.getters||[],s=new Array(n),l=0;l<n;++l)o.indexOf(l)>=0?s[l]=!0:s[l]=!1;return a(t.vertex,t.cell,t.phase,i,r,s)}},{"typedarray-pool":308}],252:[function(t,e,r){var n=t("dup"),i={zero:function(t,e,r,n){var i=t[0];n|=0;var a=0,o=r[0];for(a=0;a<i;++a)e[n]=0,n+=o},fdTemplate1:function(t,e,r,n,i,a,o){var s=t[0],l=r[0],c=-1*l,u=l;n|=0,o|=0;var d=0,h=l,g=a[0];for(d=0;d<s;++d)i[o]=.5*(e[n+c]-e[n+u]),n+=h,o+=g},fdTemplate2:function(t,e,r,n,i,a,o,s,l,c){var u=t[0],d=t[1],h=r[0],g=r[1],f=a[0],p=a[1],m=l[0],y=l[1],b=-1*h,v=h,x=-1*g,I=g;n|=0,o|=0,c|=0;var B=0,C=0,F=g,A=h-d*g,Q=p,_=f-d*p,w=y,U=m-d*y;for(C=0;C<u;++C){for(B=0;B<d;++B)i[o]=.5*(e[n+b]-e[n+v]),s[c]=.5*(e[n+x]-e[n+I]),n+=F,o+=Q,c+=w;n+=A,o+=_,c+=U}}},a={cdiff:function(t){var e={};return function(r,n,i){var a=r.dtype,o=r.order,s=n.dtype,l=n.order,c=i.dtype,u=i.order,d=[a,o.join(),s,l.join(),c,u.join()].join(),h=e[d];return h||(e[d]=h=t([a,o,s,l,c,u])),h(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset,i.data,i.stride,0|i.offset)}},zero:function(t){var e={};return function(r){var n=r.dtype,i=r.order,a=[n,i.join()].join(),o=e[a];return o||(e[a]=o=t([n,i])),o(r.shape.slice(0),r.data,r.stride,0|r.offset)}},fdTemplate1:function(t){var e={};return function(r,n){var i=r.dtype,a=r.order,o=n.dtype,s=n.order,l=[i,a.join(),o,s.join()].join(),c=e[l];return c||(e[l]=c=t([i,a,o,s])),c(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset)}},fdTemplate2:function(t){var e={};return function(r,n,i){var a=r.dtype,o=r.order,s=n.dtype,l=n.order,c=i.dtype,u=i.order,d=[a,o.join(),s,l.join(),c,u.join()].join(),h=e[d];return h||(e[d]=h=t([a,o,s,l,c,u])),h(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset,i.data,i.stride,0|i.offset)}}};function o(t){return(0,a[t.funcName])(s.bind(void 0,t))}function s(t){return i[t.funcName]}function l(t){return o({funcName:t.funcName})}var c={},u={},d=l({funcName:"cdiff"}),h=l({funcName:"zero"});function g(t){return t in c?c[t]:c[t]=l({funcName:"fdTemplate"+t})}function f(t,e,r,n){return function(t,i){var a=i.shape.slice();return a[0]>2&&a[1]>2&&n(i.pick(-1,-1).lo(1,1).hi(a[0]-2,a[1]-2),t.pick(-1,-1,0).lo(1,1).hi(a[0]-2,a[1]-2),t.pick(-1,-1,1).lo(1,1).hi(a[0]-2,a[1]-2)),a[1]>2&&(r(i.pick(0,-1).lo(1).hi(a[1]-2),t.pick(0,-1,1).lo(1).hi(a[1]-2)),e(t.pick(0,-1,0).lo(1).hi(a[1]-2))),a[1]>2&&(r(i.pick(a[0]-1,-1).lo(1).hi(a[1]-2),t.pick(a[0]-1,-1,1).lo(1).hi(a[1]-2)),e(t.pick(a[0]-1,-1,0).lo(1).hi(a[1]-2))),a[0]>2&&(r(i.pick(-1,0).lo(1).hi(a[0]-2),t.pick(-1,0,0).lo(1).hi(a[0]-2)),e(t.pick(-1,0,1).lo(1).hi(a[0]-2))),a[0]>2&&(r(i.pick(-1,a[1]-1).lo(1).hi(a[0]-2),t.pick(-1,a[1]-1,0).lo(1).hi(a[0]-2)),e(t.pick(-1,a[1]-1,1).lo(1).hi(a[0]-2))),t.set(0,0,0,0),t.set(0,0,1,0),t.set(a[0]-1,0,0,0),t.set(a[0]-1,0,1,0),t.set(0,a[1]-1,0,0),t.set(0,a[1]-1,1,0),t.set(a[0]-1,a[1]-1,0,0),t.set(a[0]-1,a[1]-1,1,0),t}}function p(t){var e=t.join();if(a=u[e])return a;for(var r=t.length,n=[d,h],i=1;i<=r;++i)n.push(g(i));var a=f.apply(void 0,n);return u[e]=a,a}e.exports=function(t,e,r){return Array.isArray(r)||(r=n(e.dimension,"string"==typeof r?r:"clamp")),0===e.size?t:0===e.dimension?(t.set(0),t):p(r)(t,e)}},{dup:65}],253:[function(t,e,r){function n(t,e){var r=Math.floor(e),n=e-r,i=0<=r&&r<t.shape[0],a=0<=r+1&&r+1<t.shape[0];return(1-n)*(i?+t.get(r):0)+n*(a?+t.get(r+1):0)}function i(t,e,r){var n=Math.floor(e),i=e-n,a=0<=n&&n<t.shape[0],o=0<=n+1&&n+1<t.shape[0],s=Math.floor(r),l=r-s,c=0<=s&&s<t.shape[1],u=0<=s+1&&s+1<t.shape[1],d=a&&c?t.get(n,s):0,h=a&&u?t.get(n,s+1):0;return(1-l)*((1-i)*d+i*(o&&c?t.get(n+1,s):0))+l*((1-i)*h+i*(o&&u?t.get(n+1,s+1):0))}function a(t,e,r,n){var i=Math.floor(e),a=e-i,o=0<=i&&i<t.shape[0],s=0<=i+1&&i+1<t.shape[0],l=Math.floor(r),c=r-l,u=0<=l&&l<t.shape[1],d=0<=l+1&&l+1<t.shape[1],h=Math.floor(n),g=n-h,f=0<=h&&h<t.shape[2],p=0<=h+1&&h+1<t.shape[2],m=o&&u&&f?t.get(i,l,h):0,y=o&&d&&f?t.get(i,l+1,h):0,b=s&&u&&f?t.get(i+1,l,h):0,v=s&&d&&f?t.get(i+1,l+1,h):0,x=o&&u&&p?t.get(i,l,h+1):0,I=o&&d&&p?t.get(i,l+1,h+1):0;return(1-g)*((1-c)*((1-a)*m+a*b)+c*((1-a)*y+a*v))+g*((1-c)*((1-a)*x+a*(s&&u&&p?t.get(i+1,l,h+1):0))+c*((1-a)*I+a*(s&&d&&p?t.get(i+1,l+1,h+1):0)))}function o(t){var e,r,n=0|t.shape.length,i=new Array(n),a=new Array(n),o=new Array(n),s=new Array(n);for(e=0;e<n;++e)r=+arguments[e+1],i[e]=Math.floor(r),a[e]=r-i[e],o[e]=0<=i[e]&&i[e]<t.shape[e],s[e]=0<=i[e]+1&&i[e]+1<t.shape[e];var l,c,u,d=0;t:for(e=0;e<1<<n;++e){for(c=1,u=t.offset,l=0;l<n;++l)if(e&1<<l){if(!s[l])continue t;c*=a[l],u+=t.stride[l]*(i[l]+1)}else{if(!o[l])continue t;c*=1-a[l],u+=t.stride[l]*i[l]}d+=c*t.data[u]}return d}function s(t,e,r,s){switch(t.shape.length){case 0:return 0;case 1:return n(t,e);case 2:return i(t,e,r);case 3:return a(t,e,r,s);default:return o.apply(void 0,arguments)}}e.exports=s,e.exports.d1=n,e.exports.d2=i,e.exports.d3=a},{}],254:[function(t,e,r){var n={"float64,2,1,0":function(){return function(t,e,r,n,i){var a=t[0],o=t[1],s=t[2],l=r[0],c=r[1],u=r[2];n|=0;var d=0,h=0,g=0,f=u,p=c-s*u,m=l-o*c;for(g=0;g<a;++g){for(h=0;h<o;++h){for(d=0;d<s;++d)e[n]/=i,n+=f;n+=p}n+=m}}},"uint8,2,0,1,float64,2,1,0":function(){return function(t,e,r,n,i,a,o,s){for(var l=t[0],c=t[1],u=t[2],d=r[0],h=r[1],g=r[2],f=a[0],p=a[1],m=a[2],y=n|=0,b=o|=0,v=0|t[0];v>0;){v<64?(l=v,v=0):(l=64,v-=64);for(var x=0|t[1];x>0;){x<64?(c=x,x=0):(c=64,x-=64),n=y+v*d+x*h,o=b+v*f+x*p;var I=0,B=0,C=0,F=g,A=d-u*g,Q=h-l*d,_=m,w=f-u*m,U=p-l*f;for(C=0;C<c;++C){for(B=0;B<l;++B){for(I=0;I<u;++I)e[n]=i[o]*s,n+=F,o+=_;n+=A,o+=w}n+=Q,o+=U}}}}},"float32,1,0,float32,1,0":function(){return function(t,e,r,n,i,a,o){var s=t[0],l=t[1],c=r[0],u=r[1],d=a[0],h=a[1];n|=0,o|=0;var g=0,f=0,p=u,m=c-l*u,y=h,b=d-l*h;for(f=0;f<s;++f){for(g=0;g<l;++g)e[n]=i[o],n+=p,o+=y;n+=m,o+=b}}},"float32,1,0,float32,0,1":function(){return function(t,e,r,n,i,a,o){for(var s=t[0],l=t[1],c=r[0],u=r[1],d=a[0],h=a[1],g=n|=0,f=o|=0,p=0|t[1];p>0;){p<64?(l=p,p=0):(l=64,p-=64);for(var m=0|t[0];m>0;){m<64?(s=m,m=0):(s=64,m-=64),n=g+p*u+m*c,o=f+p*h+m*d;var y=0,b=0,v=u,x=c-l*u,I=h,B=d-l*h;for(b=0;b<s;++b){for(y=0;y<l;++y)e[n]=i[o],n+=v,o+=I;n+=x,o+=B}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(t,e,r,n,i,a,o){for(var s=t[0],l=t[1],c=t[2],u=r[0],d=r[1],h=r[2],g=a[0],f=a[1],p=a[2],m=n|=0,y=o|=0,b=0|t[2];b>0;){b<64?(c=b,b=0):(c=64,b-=64);for(var v=0|t[0];v>0;){v<64?(s=v,v=0):(s=64,v-=64);for(var x=0|t[1];x>0;){x<64?(l=x,x=0):(l=64,x-=64),n=m+b*h+v*u+x*d,o=y+b*p+v*g+x*f;var I=0,B=0,C=0,F=h,A=u-c*h,Q=d-s*u,_=p,w=g-c*p,U=f-s*g;for(C=0;C<l;++C){for(B=0;B<s;++B){for(I=0;I<c;++I)e[n]=i[o],n+=F,o+=_;n+=A,o+=w}n+=Q,o+=U}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(t,e,r,n,i,a,o){var s=t[0],l=t[1],c=t[2],u=r[0],d=r[1],h=r[2],g=a[0],f=a[1],p=a[2];n|=0,o|=0;var m=0,y=0,b=0,v=h,x=u-c*h,I=d-s*u,B=p,C=g-c*p,F=f-s*g;for(b=0;b<l;++b){for(y=0;y<s;++y){for(m=0;m<c;++m)e[n]=i[o],n+=v,o+=B;n+=x,o+=C}n+=I,o+=F}}}};function i(t,e){var r=e.join(",");return(0,n[r])()}var a=i,o={mul:function(t){var e={};return function(r,n,i){var a=r.dtype,o=r.order,s=n.dtype,l=n.order,c=i.dtype,u=i.order,d=[a,o.join(),s,l.join(),c,u.join()].join(),h=e[d];return h||(e[d]=h=t([a,o,s,l,c,u])),h(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset,i.data,i.stride,0|i.offset)}},muls:function(t){var e={};return function(r,n,i){var a=r.dtype,o=r.order,s=n.dtype,l=n.order,c=[a,o.join(),s,l.join()].join(),u=e[c];return u||(e[c]=u=t([a,o,s,l])),u(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset,i)}},mulseq:function(t){var e={};return function(r,n){var i=r.dtype,a=r.order,o=[i,a.join()].join(),s=e[o];return s||(e[o]=s=t([i,a])),s(r.shape.slice(0),r.data,r.stride,0|r.offset,n)}},div:function(t){var e={};return function(r,n,i){var a=r.dtype,o=r.order,s=n.dtype,l=n.order,c=i.dtype,u=i.order,d=[a,o.join(),s,l.join(),c,u.join()].join(),h=e[d];return h||(e[d]=h=t([a,o,s,l,c,u])),h(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset,i.data,i.stride,0|i.offset)}},divs:function(t){var e={};return function(r,n,i){var a=r.dtype,o=r.order,s=n.dtype,l=n.order,c=[a,o.join(),s,l.join()].join(),u=e[c];return u||(e[c]=u=t([a,o,s,l])),u(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset,i)}},divseq:function(t){var e={};return function(r,n){var i=r.dtype,a=r.order,o=[i,a.join()].join(),s=e[o];return s||(e[o]=s=t([i,a])),s(r.shape.slice(0),r.data,r.stride,0|r.offset,n)}},assign:function(t){var e={};return function(r,n){var i=r.dtype,a=r.order,o=n.dtype,s=n.order,l=[i,a.join(),o,s.join()].join(),c=e[l];return c||(e[l]=c=t([i,a,o,s])),c(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset)}}};function s(t){return(0,o[t.funcName])(a.bind(void 0,t))}function l(t){return s({funcName:t.funcName})}var c={mul:"*",div:"/"};!function(){for(var t in c)r[t]=l({funcName:t}),r[t+"s"]=l({funcName:t+"s"}),r[t+"seq"]=l({funcName:t+"seq"})}(),r.assign=l({funcName:"assign"})},{}],255:[function(t,e,r){var n=t("ndarray"),i=t("./doConvert.js");e.exports=function(t,e){for(var r=[],a=t,o=1;Array.isArray(a);)r.push(a.length),o*=a.length,a=a[0];return 0===r.length?n():(e||(e=n(new Float64Array(o),r)),i(e,t),e)}},{"./doConvert.js":256,ndarray:259}],256:[function(t,e,r){function n(){return function(t,e,r,n,i){var a=t[0],o=t[1],s=t[2],l=r[0],c=r[1],u=r[2],d=[0,0,0];n|=0;var h=0,g=0,f=0,p=u,m=c-s*u,y=l-o*c;for(f=0;f<a;++f){for(g=0;g<o;++g){for(h=0;h<s;++h){var b,v=i;for(b=0;b<d.length-1;++b)v=v[d[b]];e[n]=v[d[d.length-1]],n+=p,++d[2]}n+=m,d[2]-=s,++d[1]}n+=y,d[1]-=o,++d[0]}}}function i(){return n()}var a=i;function o(t){var e={};return function(r,n){var i=r.dtype,a=r.order,o=[i,a.join()].join(),s=e[o];return s||(e[o]=s=t([i,a])),s(r.shape.slice(0),r.data,r.stride,0|r.offset,n)}}function s(t){return o(a.bind(void 0,t))}function l(t){return s({funcName:t.funcName})}e.exports=l({funcName:"convert"})},{}],257:[function(t,e,r){var n=t("typedarray-pool");function i(t){return"uint32"===t?[n.mallocUint32,n.freeUint32]:null}var a={"uint32,1,0":function(t,e){return function(r,n,i,a,o,s,l,c,u,d,h){var g,f,p,m,y,b,v,x,I=r*o+a,B=t(c);for(g=r+1;g<=n;++g){for(f=g,p=I+=o,y=0,b=I,m=0;m<c;++m)B[y++]=i[b],b+=u;t:for(;f-- >r;){y=0,b=p-o;e:for(m=0;m<c;++m){if((v=i[b])<(x=B[y]))break t;if(v>x)break e;b+=d,y+=h}for(y=p,b=p-o,m=0;m<c;++m)i[y]=i[b],y+=u,b+=u;p-=o}for(y=p,b=0,m=0;m<c;++m)i[y]=B[b++],y+=u}e(B)}}};function o(t,e){var r=i(e),n=[e,t].join(","),o=a[n];return r?o(r[0],r[1]):o()}var s={"uint32,1,0":function(t,e,r){return function n(i,a,o,s,l,c,u,d,h,g,f){var p,m,y,b,v,x,I,B,C,F,A,Q,_,w,U,S,E,L,T,R,k,G,N,M,D,X=(a-i+1)/6|0,V=i+X,W=a-X,Z=i+a>>1,O=Z-X,$=Z+X,H=V,Y=O,P=Z,z=$,J=W,j=i+1,K=a-1,q=!0,tt=0,et=0,rt=0,nt=d,it=e(nt),at=e(nt);A=l*H,Q=l*Y,D=s;t:for(F=0;F<d;++F){if(B=Q+D,(rt=o[I=A+D]-o[B])>0){m=H,H=Y,Y=m;break t}if(rt<0)break t;D+=g}A=l*z,Q=l*J,D=s;t:for(F=0;F<d;++F){if(B=Q+D,(rt=o[I=A+D]-o[B])>0){m=z,z=J,J=m;break t}if(rt<0)break t;D+=g}A=l*H,Q=l*P,D=s;t:for(F=0;F<d;++F){if(B=Q+D,(rt=o[I=A+D]-o[B])>0){m=H,H=P,P=m;break t}if(rt<0)break t;D+=g}A=l*Y,Q=l*P,D=s;t:for(F=0;F<d;++F){if(B=Q+D,(rt=o[I=A+D]-o[B])>0){m=Y,Y=P,P=m;break t}if(rt<0)break t;D+=g}A=l*H,Q=l*z,D=s;t:for(F=0;F<d;++F){if(B=Q+D,(rt=o[I=A+D]-o[B])>0){m=H,H=z,z=m;break t}if(rt<0)break t;D+=g}A=l*P,Q=l*z,D=s;t:for(F=0;F<d;++F){if(B=Q+D,(rt=o[I=A+D]-o[B])>0){m=P,P=z,z=m;break t}if(rt<0)break t;D+=g}A=l*Y,Q=l*J,D=s;t:for(F=0;F<d;++F){if(B=Q+D,(rt=o[I=A+D]-o[B])>0){m=Y,Y=J,J=m;break t}if(rt<0)break t;D+=g}A=l*Y,Q=l*P,D=s;t:for(F=0;F<d;++F){if(B=Q+D,(rt=o[I=A+D]-o[B])>0){m=Y,Y=P,P=m;break t}if(rt<0)break t;D+=g}A=l*z,Q=l*J,D=s;t:for(F=0;F<d;++F){if(B=Q+D,(rt=o[I=A+D]-o[B])>0){m=z,z=J,J=m;break t}if(rt<0)break t;D+=g}for(A=l*H,Q=l*Y,_=l*P,w=l*z,U=l*J,S=l*V,E=l*Z,L=l*W,M=0,D=s,F=0;F<d;++F)I=A+D,B=Q+D,C=_+D,T=w+D,R=U+D,k=S+D,G=E+D,N=L+D,it[M]=o[B],at[M]=o[T],q=q&&it[M]===at[M],y=o[I],b=o[C],v=o[R],o[k]=y,o[G]=b,o[N]=v,++M,D+=h;for(A=l*O,Q=l*i,D=s,F=0;F<d;++F)B=Q+D,o[I=A+D]=o[B],D+=h;for(A=l*$,Q=l*a,D=s,F=0;F<d;++F)B=Q+D,o[I=A+D]=o[B],D+=h;if(q)for(x=j;x<=K;++x){for(I=s+x*l,M=0,F=0;F<d&&0==(rt=o[I]-it[M]);++F)M+=f,I+=g;if(0!==rt)if(rt<0){if(x!==j)for(A=l*x,Q=l*j,D=s,F=0;F<d;++F)B=Q+D,p=o[I=A+D],o[I]=o[B],o[B]=p,D+=h;++j}else for(;;){for(I=s+K*l,M=0,F=0;F<d&&0==(rt=o[I]-it[M]);++F)M+=f,I+=g;if(!(rt>0)){if(rt<0){for(A=l*x,Q=l*j,_=l*K,D=s,F=0;F<d;++F)B=Q+D,C=_+D,p=o[I=A+D],o[I]=o[B],o[B]=o[C],o[C]=p,D+=h;++j,--K;break}for(A=l*x,Q=l*K,D=s,F=0;F<d;++F)B=Q+D,p=o[I=A+D],o[I]=o[B],o[B]=p,D+=h;--K;break}K--}}else for(x=j;x<=K;++x){for(I=s+x*l,M=0,F=0;F<d&&0==(tt=o[I]-it[M]);++F)M+=f,I+=g;if(tt<0){if(x!==j)for(A=l*x,Q=l*j,D=s,F=0;F<d;++F)B=Q+D,p=o[I=A+D],o[I]=o[B],o[B]=p,D+=h;++j}else{for(I=s+x*l,M=0,F=0;F<d&&0==(et=o[I]-at[M]);++F)M+=f,I+=g;if(et>0)for(;;){for(I=s+K*l,M=0,F=0;F<d&&0==(rt=o[I]-at[M]);++F)M+=f,I+=g;if(!(rt>0)){for(I=s+K*l,M=0,F=0;F<d&&0==(rt=o[I]-it[M]);++F)M+=f,I+=g;if(rt<0){for(A=l*x,Q=l*j,_=l*K,D=s,F=0;F<d;++F)B=Q+D,C=_+D,p=o[I=A+D],o[I]=o[B],o[B]=o[C],o[C]=p,D+=h;++j,--K}else{for(A=l*x,Q=l*K,D=s,F=0;F<d;++F)B=Q+D,p=o[I=A+D],o[I]=o[B],o[B]=p,D+=h;--K}break}if(--K<x)break}}}for(A=l*i,Q=l*(j-1),M=0,D=s,F=0;F<d;++F)B=Q+D,o[I=A+D]=o[B],o[B]=it[M],++M,D+=h;for(A=l*a,Q=l*(K+1),M=0,D=s,F=0;F<d;++F)B=Q+D,o[I=A+D]=o[B],o[B]=at[M],++M,D+=h;if(j-2-i<=32?t(i,j-2,o,s,l,c,u,d,h,g,f):n(i,j-2,o,s,l,c,u,d,h,g,f),a-(K+2)<=32?t(K+2,a,o,s,l,c,u,d,h,g,f):n(K+2,a,o,s,l,c,u,d,h,g,f),q)return r(it),void r(at);if(j<V&&K>W){t:for(;;){for(I=s+j*l,M=0,D=s,F=0;F<d;++F){if(o[I]!==it[M])break t;++M,I+=h}++j}t:for(;;){for(I=s+K*l,M=0,D=s,F=0;F<d;++F){if(o[I]!==at[M])break t;++M,I+=h}--K}for(x=j;x<=K;++x){for(I=s+x*l,M=0,F=0;F<d&&0==(tt=o[I]-it[M]);++F)M+=f,I+=g;if(0===tt){if(x!==j)for(A=l*x,Q=l*j,D=s,F=0;F<d;++F)B=Q+D,p=o[I=A+D],o[I]=o[B],o[B]=p,D+=h;++j}else{for(I=s+x*l,M=0,F=0;F<d&&0==(et=o[I]-at[M]);++F)M+=f,I+=g;if(0===et)for(;;){for(I=s+K*l,M=0,F=0;F<d&&0==(rt=o[I]-at[M]);++F)M+=f,I+=g;if(0!==rt){for(I=s+K*l,M=0,F=0;F<d&&0==(rt=o[I]-it[M]);++F)M+=f,I+=g;if(rt<0){for(A=l*x,Q=l*j,_=l*K,D=s,F=0;F<d;++F)B=Q+D,C=_+D,p=o[I=A+D],o[I]=o[B],o[B]=o[C],o[C]=p,D+=h;++j,--K}else{for(A=l*x,Q=l*K,D=s,F=0;F<d;++F)B=Q+D,p=o[I=A+D],o[I]=o[B],o[B]=p,D+=h;--K}break}if(--K<x)break}}}}r(it),r(at),K-j<=32?t(j,K,o,s,l,c,u,d,h,g,f):n(j,K,o,s,l,c,u,d,h,g,f)}}};function l(t,e,r){var n=i(e),a=[e,t].join(","),o=s[a];return t.length>1&&n?o(r,n[0],n[1]):o(r)}var c={"uint32,1,0":function(t,e){return function(r){var n=r.data,i=0|r.offset,a=r.shape,o=r.stride,s=0|o[0],l=0|a[0],c=0|o[1],u=0|a[1],d=c,h=c,g=1;l<=32?t(0,l-1,n,i,s,c,l,u,d,h,g):e(0,l-1,n,i,s,c,l,u,d,h,g)}}};function u(t,e){var r=[e,t].join(","),n=c[r],i=o(t,e);return n(i,l(t,e,i))}e.exports=u},{"typedarray-pool":308}],258:[function(t,e,r){var n=t("./lib/compile_sort.js"),i={};function a(t){var e=t.order,r=t.dtype,a=[e,r].join(":"),o=i[a];return o||(i[a]=o=n(e,r)),o(t),t}e.exports=a},{"./lib/compile_sort.js":257}],259:[function(t,e,r){var n=t("is-buffer"),i="undefined"!=typeof Float64Array;function a(t,e){return t[0]-e[0]}function o(){var t,e=this.stride,r=new Array(e.length);for(t=0;t<r.length;++t)r[t]=[Math.abs(e[t]),t];r.sort(a);var n=new Array(r.length);for(t=0;t<n.length;++t)n[t]=r[t][1];return n}var s={T:function(t){function e(t){this.data=t}var r=e.prototype;return r.dtype=t,r.index=function(){return-1},r.size=0,r.dimension=-1,r.shape=r.stride=r.order=[],r.lo=r.hi=r.transpose=r.step=function(){return new e(this.data)},r.get=r.set=function(){},r.pick=function(){return null},function(t){return new e(t)}},0:function(t,e){function r(t,e){this.data=t,this.offset=e}var n=r.prototype;return n.dtype=t,n.index=function(){return this.offset},n.dimension=0,n.size=1,n.shape=n.stride=n.order=[],n.lo=n.hi=n.transpose=n.step=function(){return new r(this.data,this.offset)},n.pick=function(){return e(this.data)},n.valueOf=n.get=function(){return"generic"===t?this.data.get(this.offset):this.data[this.offset]},n.set=function(e){return"generic"===t?this.data.set(this.offset,e):this.data[this.offset]=e},function(t,e,n,i){return new r(t,i)}},1:function(t,e,r){function n(t,e,r,n){this.data=t,this.shape=[e],this.stride=[r],this.offset=0|n}var i=n.prototype;return i.dtype=t,i.dimension=1,Object.defineProperty(i,"size",{get:function(){return this.shape[0]}}),i.order=[0],i.set=function(e,r){return"generic"===t?this.data.set(this.offset+this.stride[0]*e,r):this.data[this.offset+this.stride[0]*e]=r},i.get=function(e){return"generic"===t?this.data.get(this.offset+this.stride[0]*e):this.data[this.offset+this.stride[0]*e]},i.index=function(t){return this.offset+this.stride[0]*t},i.hi=function(t){return new n(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,this.stride[0],this.offset)},i.lo=function(t){var e=this.offset,r=0,i=this.shape[0],a=this.stride[0];return"number"==typeof t&&t>=0&&(e+=a*(r=0|t),i-=r),new n(this.data,i,a,e)},i.step=function(t){var e=this.shape[0],r=this.stride[0],i=this.offset,a=0,o=Math.ceil;return"number"==typeof t&&((a=0|t)<0?(i+=r*(e-1),e=o(-e/a)):e=o(e/a),r*=a),new n(this.data,e,r,i)},i.transpose=function(t){t=void 0===t?0:0|t;var e=this.shape,r=this.stride;return new n(this.data,e[t],r[t],this.offset)},i.pick=function(t){var r=[],n=[],i=this.offset;return"number"==typeof t&&t>=0?i=i+this.stride[0]*t|0:(r.push(this.shape[0]),n.push(this.stride[0])),(0,e[r.length+1])(this.data,r,n,i)},function(t,e,r,i){return new n(t,e[0],r[0],i)}},2:function(t,e,r){function n(t,e,r,n,i,a){this.data=t,this.shape=[e,r],this.stride=[n,i],this.offset=0|a}var i=n.prototype;return i.dtype=t,i.dimension=2,Object.defineProperty(i,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(i,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),i.set=function(e,r,n){return"generic"===t?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*r,n):this.data[this.offset+this.stride[0]*e+this.stride[1]*r]=n},i.get=function(e,r){return"generic"===t?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*r):this.data[this.offset+this.stride[0]*e+this.stride[1]*r]},i.index=function(t,e){return this.offset+this.stride[0]*t+this.stride[1]*e},i.hi=function(t,e){return new n(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,"number"!=typeof e||e<0?this.shape[1]:0|e,this.stride[0],this.stride[1],this.offset)},i.lo=function(t,e){var r=this.offset,i=0,a=this.shape[0],o=this.shape[1],s=this.stride[0],l=this.stride[1];return"number"==typeof t&&t>=0&&(r+=s*(i=0|t),a-=i),"number"==typeof e&&e>=0&&(r+=l*(i=0|e),o-=i),new n(this.data,a,o,s,l,r)},i.step=function(t,e){var r=this.shape[0],i=this.shape[1],a=this.stride[0],o=this.stride[1],s=this.offset,l=0,c=Math.ceil;return"number"==typeof t&&((l=0|t)<0?(s+=a*(r-1),r=c(-r/l)):r=c(r/l),a*=l),"number"==typeof e&&((l=0|e)<0?(s+=o*(i-1),i=c(-i/l)):i=c(i/l),o*=l),new n(this.data,r,i,a,o,s)},i.transpose=function(t,e){t=void 0===t?0:0|t,e=void 0===e?1:0|e;var r=this.shape,i=this.stride;return new n(this.data,r[t],r[e],i[t],i[e],this.offset)},i.pick=function(t,r){var n=[],i=[],a=this.offset;return"number"==typeof t&&t>=0?a=a+this.stride[0]*t|0:(n.push(this.shape[0]),i.push(this.stride[0])),"number"==typeof r&&r>=0?a=a+this.stride[1]*r|0:(n.push(this.shape[1]),i.push(this.stride[1])),(0,e[n.length+1])(this.data,n,i,a)},function(t,e,r,i){return new n(t,e[0],e[1],r[0],r[1],i)}},3:function(t,e,r){function n(t,e,r,n,i,a,o,s){this.data=t,this.shape=[e,r,n],this.stride=[i,a,o],this.offset=0|s}var i=n.prototype;return i.dtype=t,i.dimension=3,Object.defineProperty(i,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(i,"order",{get:function(){var t=Math.abs(this.stride[0]),e=Math.abs(this.stride[1]),r=Math.abs(this.stride[2]);return t>e?e>r?[2,1,0]:t>r?[1,2,0]:[1,0,2]:t>r?[2,0,1]:r>e?[0,1,2]:[0,2,1]}}),i.set=function(e,r,n,i){return"generic"===t?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n,i):this.data[this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n]=i},i.get=function(e,r,n){return"generic"===t?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n):this.data[this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n]},i.index=function(t,e,r){return this.offset+this.stride[0]*t+this.stride[1]*e+this.stride[2]*r},i.hi=function(t,e,r){return new n(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,"number"!=typeof e||e<0?this.shape[1]:0|e,"number"!=typeof r||r<0?this.shape[2]:0|r,this.stride[0],this.stride[1],this.stride[2],this.offset)},i.lo=function(t,e,r){var i=this.offset,a=0,o=this.shape[0],s=this.shape[1],l=this.shape[2],c=this.stride[0],u=this.stride[1],d=this.stride[2];return"number"==typeof t&&t>=0&&(i+=c*(a=0|t),o-=a),"number"==typeof e&&e>=0&&(i+=u*(a=0|e),s-=a),"number"==typeof r&&r>=0&&(i+=d*(a=0|r),l-=a),new n(this.data,o,s,l,c,u,d,i)},i.step=function(t,e,r){var i=this.shape[0],a=this.shape[1],o=this.shape[2],s=this.stride[0],l=this.stride[1],c=this.stride[2],u=this.offset,d=0,h=Math.ceil;return"number"==typeof t&&((d=0|t)<0?(u+=s*(i-1),i=h(-i/d)):i=h(i/d),s*=d),"number"==typeof e&&((d=0|e)<0?(u+=l*(a-1),a=h(-a/d)):a=h(a/d),l*=d),"number"==typeof r&&((d=0|r)<0?(u+=c*(o-1),o=h(-o/d)):o=h(o/d),c*=d),new n(this.data,i,a,o,s,l,c,u)},i.transpose=function(t,e,r){t=void 0===t?0:0|t,e=void 0===e?1:0|e,r=void 0===r?2:0|r;var i=this.shape,a=this.stride;return new n(this.data,i[t],i[e],i[r],a[t],a[e],a[r],this.offset)},i.pick=function(t,r,n){var i=[],a=[],o=this.offset;return"number"==typeof t&&t>=0?o=o+this.stride[0]*t|0:(i.push(this.shape[0]),a.push(this.stride[0])),"number"==typeof r&&r>=0?o=o+this.stride[1]*r|0:(i.push(this.shape[1]),a.push(this.stride[1])),"number"==typeof n&&n>=0?o=o+this.stride[2]*n|0:(i.push(this.shape[2]),a.push(this.stride[2])),(0,e[i.length+1])(this.data,i,a,o)},function(t,e,r,i){return new n(t,e[0],e[1],e[2],r[0],r[1],r[2],i)}},4:function(t,e,r){function n(t,e,r,n,i,a,o,s,l,c){this.data=t,this.shape=[e,r,n,i],this.stride=[a,o,s,l],this.offset=0|c}var i=n.prototype;return i.dtype=t,i.dimension=4,Object.defineProperty(i,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(i,"order",{get:r}),i.set=function(e,r,n,i,a){return"generic"===t?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i,a):this.data[this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i]=a},i.get=function(e,r,n,i){return"generic"===t?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i):this.data[this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i]},i.index=function(t,e,r,n){return this.offset+this.stride[0]*t+this.stride[1]*e+this.stride[2]*r+this.stride[3]*n},i.hi=function(t,e,r,i){return new n(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,"number"!=typeof e||e<0?this.shape[1]:0|e,"number"!=typeof r||r<0?this.shape[2]:0|r,"number"!=typeof i||i<0?this.shape[3]:0|i,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},i.lo=function(t,e,r,i){var a=this.offset,o=0,s=this.shape[0],l=this.shape[1],c=this.shape[2],u=this.shape[3],d=this.stride[0],h=this.stride[1],g=this.stride[2],f=this.stride[3];return"number"==typeof t&&t>=0&&(a+=d*(o=0|t),s-=o),"number"==typeof e&&e>=0&&(a+=h*(o=0|e),l-=o),"number"==typeof r&&r>=0&&(a+=g*(o=0|r),c-=o),"number"==typeof i&&i>=0&&(a+=f*(o=0|i),u-=o),new n(this.data,s,l,c,u,d,h,g,f,a)},i.step=function(t,e,r,i){var a=this.shape[0],o=this.shape[1],s=this.shape[2],l=this.shape[3],c=this.stride[0],u=this.stride[1],d=this.stride[2],h=this.stride[3],g=this.offset,f=0,p=Math.ceil;return"number"==typeof t&&((f=0|t)<0?(g+=c*(a-1),a=p(-a/f)):a=p(a/f),c*=f),"number"==typeof e&&((f=0|e)<0?(g+=u*(o-1),o=p(-o/f)):o=p(o/f),u*=f),"number"==typeof r&&((f=0|r)<0?(g+=d*(s-1),s=p(-s/f)):s=p(s/f),d*=f),"number"==typeof i&&((f=0|i)<0?(g+=h*(l-1),l=p(-l/f)):l=p(l/f),h*=f),new n(this.data,a,o,s,l,c,u,d,h,g)},i.transpose=function(t,e,r,i){t=void 0===t?0:0|t,e=void 0===e?1:0|e,r=void 0===r?2:0|r,i=void 0===i?3:0|i;var a=this.shape,o=this.stride;return new n(this.data,a[t],a[e],a[r],a[i],o[t],o[e],o[r],o[i],this.offset)},i.pick=function(t,r,n,i){var a=[],o=[],s=this.offset;return"number"==typeof t&&t>=0?s=s+this.stride[0]*t|0:(a.push(this.shape[0]),o.push(this.stride[0])),"number"==typeof r&&r>=0?s=s+this.stride[1]*r|0:(a.push(this.shape[1]),o.push(this.stride[1])),"number"==typeof n&&n>=0?s=s+this.stride[2]*n|0:(a.push(this.shape[2]),o.push(this.stride[2])),"number"==typeof i&&i>=0?s=s+this.stride[3]*i|0:(a.push(this.shape[3]),o.push(this.stride[3])),(0,e[a.length+1])(this.data,a,o,s)},function(t,e,r,i){return new n(t,e[0],e[1],e[2],e[3],r[0],r[1],r[2],r[3],i)}},5:function(t,e,r){function n(t,e,r,n,i,a,o,s,l,c,u,d){this.data=t,this.shape=[e,r,n,i,a],this.stride=[o,s,l,c,u],this.offset=0|d}var i=n.prototype;return i.dtype=t,i.dimension=5,Object.defineProperty(i,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(i,"order",{get:r}),i.set=function(e,r,n,i,a,o){return"generic"===t?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i+this.stride[4]*a,o):this.data[this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i+this.stride[4]*a]=o},i.get=function(e,r,n,i,a){return"generic"===t?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i+this.stride[4]*a):this.data[this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i+this.stride[4]*a]},i.index=function(t,e,r,n,i){return this.offset+this.stride[0]*t+this.stride[1]*e+this.stride[2]*r+this.stride[3]*n+this.stride[4]*i},i.hi=function(t,e,r,i,a){return new n(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,"number"!=typeof e||e<0?this.shape[1]:0|e,"number"!=typeof r||r<0?this.shape[2]:0|r,"number"!=typeof i||i<0?this.shape[3]:0|i,"number"!=typeof a||a<0?this.shape[4]:0|a,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},i.lo=function(t,e,r,i,a){var o=this.offset,s=0,l=this.shape[0],c=this.shape[1],u=this.shape[2],d=this.shape[3],h=this.shape[4],g=this.stride[0],f=this.stride[1],p=this.stride[2],m=this.stride[3],y=this.stride[4];return"number"==typeof t&&t>=0&&(o+=g*(s=0|t),l-=s),"number"==typeof e&&e>=0&&(o+=f*(s=0|e),c-=s),"number"==typeof r&&r>=0&&(o+=p*(s=0|r),u-=s),"number"==typeof i&&i>=0&&(o+=m*(s=0|i),d-=s),"number"==typeof a&&a>=0&&(o+=y*(s=0|a),h-=s),new n(this.data,l,c,u,d,h,g,f,p,m,y,o)},i.step=function(t,e,r,i,a){var o=this.shape[0],s=this.shape[1],l=this.shape[2],c=this.shape[3],u=this.shape[4],d=this.stride[0],h=this.stride[1],g=this.stride[2],f=this.stride[3],p=this.stride[4],m=this.offset,y=0,b=Math.ceil;return"number"==typeof t&&((y=0|t)<0?(m+=d*(o-1),o=b(-o/y)):o=b(o/y),d*=y),"number"==typeof e&&((y=0|e)<0?(m+=h*(s-1),s=b(-s/y)):s=b(s/y),h*=y),"number"==typeof r&&((y=0|r)<0?(m+=g*(l-1),l=b(-l/y)):l=b(l/y),g*=y),"number"==typeof i&&((y=0|i)<0?(m+=f*(c-1),c=b(-c/y)):c=b(c/y),f*=y),"number"==typeof a&&((y=0|a)<0?(m+=p*(u-1),u=b(-u/y)):u=b(u/y),p*=y),new n(this.data,o,s,l,c,u,d,h,g,f,p,m)},i.transpose=function(t,e,r,i,a){t=void 0===t?0:0|t,e=void 0===e?1:0|e,r=void 0===r?2:0|r,i=void 0===i?3:0|i,a=void 0===a?4:0|a;var o=this.shape,s=this.stride;return new n(this.data,o[t],o[e],o[r],o[i],o[a],s[t],s[e],s[r],s[i],s[a],this.offset)},i.pick=function(t,r,n,i,a){var o=[],s=[],l=this.offset;return"number"==typeof t&&t>=0?l=l+this.stride[0]*t|0:(o.push(this.shape[0]),s.push(this.stride[0])),"number"==typeof r&&r>=0?l=l+this.stride[1]*r|0:(o.push(this.shape[1]),s.push(this.stride[1])),"number"==typeof n&&n>=0?l=l+this.stride[2]*n|0:(o.push(this.shape[2]),s.push(this.stride[2])),"number"==typeof i&&i>=0?l=l+this.stride[3]*i|0:(o.push(this.shape[3]),s.push(this.stride[3])),"number"==typeof a&&a>=0?l=l+this.stride[4]*a|0:(o.push(this.shape[4]),s.push(this.stride[4])),(0,e[o.length+1])(this.data,o,s,l)},function(t,e,r,i){return new n(t,e[0],e[1],e[2],e[3],e[4],r[0],r[1],r[2],r[3],r[4],i)}}};function l(t,e){var r=-1===e?"T":String(e),n=s[r];return-1===e?n(t):0===e?n(t,u[t][0]):n(t,u[t],o)}function c(t){if(n(t))return"buffer";if(i)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}var u={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function d(t,e,r,n){if(void 0===t)return(0,u.array[0])([]);"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var i=e.length;if(void 0===r){r=new Array(i);for(var a=i-1,o=1;a>=0;--a)r[a]=o,o*=e[a]}if(void 0===n)for(n=0,a=0;a<i;++a)r[a]<0&&(n-=(e[a]-1)*r[a]);for(var s=c(t),d=u[s];d.length<=i+1;)d.push(l(s,d.length-1));return(0,d[i+1])(t,e,r,n)}e.exports=d},{"is-buffer":237}],260:[function(t,e,r){var n=t("double-bits"),i=Math.pow(2,-1074),a=-1>>>0;function o(t,e){if(isNaN(t)||isNaN(e))return NaN;if(t===e)return t;if(0===t)return e<0?-i:i;var r=n.hi(t),o=n.lo(t);return e>t==t>0?o===a?(r+=1,o=0):o+=1:0===o?(o=a,r-=1):o-=1,n.pack(o,r)}e.exports=o},{"double-bits":64}],261:[function(t,e,r){var n=1e-6,i=1e-6;r.vertexNormals=function(t,e,r){for(var i=e.length,a=new Array(i),o=void 0===r?n:r,s=0;s<i;++s)a[s]=[0,0,0];for(s=0;s<t.length;++s)for(var l=t[s],c=0,u=l[l.length-1],d=l[0],h=0;h<l.length;++h){c=u,u=d,d=l[(h+1)%l.length];for(var g=e[c],f=e[u],p=e[d],m=new Array(3),y=0,b=new Array(3),v=0,x=0;x<3;++x)m[x]=g[x]-f[x],y+=m[x]*m[x],b[x]=p[x]-f[x],v+=b[x]*b[x];if(y*v>o){var I=a[u],B=1/Math.sqrt(y*v);for(x=0;x<3;++x){var C=(x+1)%3,F=(x+2)%3;I[x]+=B*(b[C]*m[F]-b[F]*m[C])}}}for(s=0;s<i;++s){I=a[s];var A=0;for(x=0;x<3;++x)A+=I[x]*I[x];if(A>o)for(B=1/Math.sqrt(A),x=0;x<3;++x)I[x]*=B;else for(x=0;x<3;++x)I[x]=0}return a},r.faceNormals=function(t,e,r){for(var n=t.length,a=new Array(n),o=void 0===r?i:r,s=0;s<n;++s){for(var l=t[s],c=new Array(3),u=0;u<3;++u)c[u]=e[l[u]];var d=new Array(3),h=new Array(3);for(u=0;u<3;++u)d[u]=c[1][u]-c[0][u],h[u]=c[2][u]-c[0][u];var g=new Array(3),f=0;for(u=0;u<3;++u){var p=(u+1)%3,m=(u+2)%3;g[u]=d[p]*h[m]-d[m]*h[p],f+=g[u]*g[u]}for(f=f>o?1/Math.sqrt(f):0,u=0;u<3;++u)g[u]*=f;a[s]=g}return a}},{}],262:[function(t,e,r){function n(t,e,r,n,i,a,o,s,l,c){var u=e+a+c;if(d>0){var d=Math.sqrt(u+1);t[0]=.5*(o-l)/d,t[1]=.5*(s-n)/d,t[2]=.5*(r-a)/d,t[3]=.5*d}else{var h=Math.max(e,a,c);d=Math.sqrt(2*h-u+1),e>=h?(t[0]=.5*d,t[1]=.5*(i+r)/d,t[2]=.5*(s+n)/d,t[3]=.5*(o-l)/d):a>=h?(t[0]=.5*(r+i)/d,t[1]=.5*d,t[2]=.5*(l+o)/d,t[3]=.5*(s-n)/d):(t[0]=.5*(n+s)/d,t[1]=.5*(o+l)/d,t[2]=.5*d,t[3]=.5*(r-i)/d)}return t}e.exports=n},{}],263:[function(t,e,r){e.exports=g;var n=t("filtered-vector"),i=t("gl-mat4/lookAt"),a=t("gl-mat4/fromQuat"),o=t("gl-mat4/invert"),s=t("./lib/quatFromFrame");function l(t,e,r){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(r,2))}function c(t,e,r,n){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(r,2)+Math.pow(n,2))}function u(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=c(r,n,i,a);o>1e-6?(t[0]=r/o,t[1]=n/o,t[2]=i/o,t[3]=a/o):(t[0]=t[1]=t[2]=0,t[3]=1)}function d(t,e,r){this.radius=n([r]),this.center=n(e),this.rotation=n(t),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var h=d.prototype;function g(t){var e=(t=t||{}).center||[0,0,0],r=t.rotation||[0,0,0,1],n=t.radius||1;e=[].slice.call(e,0,3),u(r=[].slice.call(r,0,4),r);var i=new d(r,e,Math.log(n));return i.setDistanceLimits(t.zoomMin,t.zoomMax),("eye"in t||"up"in t)&&i.lookAt(0,t.eye,t.center,t.up),i}h.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},h.recalcMatrix=function(t){this.radius.curve(t),this.center.curve(t),this.rotation.curve(t);var e=this.computedRotation;u(e,e);var r=this.computedMatrix;a(r,e);var n=this.computedCenter,i=this.computedEye,o=this.computedUp,s=Math.exp(this.computedRadius[0]);i[0]=n[0]+s*r[2],i[1]=n[1]+s*r[6],i[2]=n[2]+s*r[10],o[0]=r[1],o[1]=r[5],o[2]=r[9];for(var l=0;l<3;++l){for(var c=0,d=0;d<3;++d)c+=r[l+4*d]*i[d];r[12+l]=-c}},h.getMatrix=function(t,e){this.recalcMatrix(t);var r=this.computedMatrix;if(e){for(var n=0;n<16;++n)e[n]=r[n];return e}return r},h.idle=function(t){this.center.idle(t),this.radius.idle(t),this.rotation.idle(t)},h.flush=function(t){this.center.flush(t),this.radius.flush(t),this.rotation.flush(t)},h.pan=function(t,e,r,n){e=e||0,r=r||0,n=n||0,this.recalcMatrix(t);var i=this.computedMatrix,a=i[1],o=i[5],s=i[9],c=l(a,o,s);a/=c,o/=c,s/=c;var u=i[0],d=i[4],h=i[8],g=u*a+d*o+h*s,f=l(u-=a*g,d-=o*g,h-=s*g);u/=f,d/=f,h/=f,i[2],i[6],i[10];var p=u*e+a*r,m=d*e+o*r,y=h*e+s*r;this.center.move(t,p,m,y);var b=Math.exp(this.computedRadius[0]);b=Math.max(1e-4,b+n),this.radius.set(t,Math.log(b))},h.rotate=function(t,e,r,n){this.recalcMatrix(t),e=e||0,r=r||0;var i=this.computedMatrix,a=i[0],o=i[4],s=i[8],u=i[1],d=i[5],h=i[9],g=i[2],f=i[6],p=i[10],m=e*a+r*u,y=e*o+r*d,b=e*s+r*h,v=-(f*b-p*y),x=-(p*m-g*b),I=-(g*y-f*m),B=Math.sqrt(Math.max(0,1-Math.pow(v,2)-Math.pow(x,2)-Math.pow(I,2))),C=c(v,x,I,B);C>1e-6?(v/=C,x/=C,I/=C,B/=C):(v=x=I=0,B=1);var F=this.computedRotation,A=F[0],Q=F[1],_=F[2],w=F[3],U=A*B+w*v+Q*I-_*x,S=Q*B+w*x+_*v-A*I,E=_*B+w*I+A*x-Q*v,L=w*B-A*v-Q*x-_*I;if(n){v=g,x=f,I=p;var T=Math.sin(n)/l(v,x,I);v*=T,x*=T,I*=T,L=L*(B=Math.cos(e))-(U=U*B+L*v+S*I-E*x)*v-(S=S*B+L*x+E*v-U*I)*x-(E=E*B+L*I+U*x-S*v)*I}var R=c(U,S,E,L);R>1e-6?(U/=R,S/=R,E/=R,L/=R):(U=S=E=0,L=1),this.rotation.set(t,U,S,E,L)},h.lookAt=function(t,e,r,n){this.recalcMatrix(t),r=r||this.computedCenter,e=e||this.computedEye,n=n||this.computedUp;var a=this.computedMatrix;i(a,e,r,n);var o=this.computedRotation;s(o,a[0],a[1],a[2],a[4],a[5],a[6],a[8],a[9],a[10]),u(o,o),this.rotation.set(t,o[0],o[1],o[2],o[3]);for(var l=0,c=0;c<3;++c)l+=Math.pow(r[c]-e[c],2);this.radius.set(t,.5*Math.log(Math.max(l,1e-6))),this.center.set(t,r[0],r[1],r[2])},h.translate=function(t,e,r,n){this.center.move(t,e||0,r||0,n||0)},h.setMatrix=function(t,e){var r=this.computedRotation;s(r,e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]),u(r,r),this.rotation.set(t,r[0],r[1],r[2],r[3]);var n=this.computedMatrix;o(n,e);var i=n[15];if(Math.abs(i)>1e-6){var a=n[12]/i,l=n[13]/i,c=n[14]/i;this.recalcMatrix(t);var d=Math.exp(this.computedRadius[0]);this.center.set(t,a-n[2]*d,l-n[6]*d,c-n[10]*d),this.radius.idle(t)}else this.center.idle(t),this.radius.idle(t)},h.setDistance=function(t,e){e>0&&this.radius.set(t,Math.log(e))},h.setDistanceLimits=function(t,e){t=t>0?Math.log(t):-1/0,e=e>0?Math.log(e):1/0,e=Math.max(e,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},h.getDistanceLimits=function(t){var e=this.radius.bounds;return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},h.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},h.fromJSON=function(t){var e=this.lastT(),r=t.center;r&&this.center.set(e,r[0],r[1],r[2]);var n=t.rotation;n&&this.rotation.set(e,n[0],n[1],n[2],n[3]);var i=t.distance;i&&i>0&&this.radius.set(e,Math.log(i)),this.setDistanceLimits(t.zoomMin,t.zoomMax)}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(t,e,r){var n=t("repeat-string");e.exports=function(t,e,r){return n(r=void 0!==r?r+"":" ",e)+t}},{"repeat-string":277}],265:[function(t,e,r){e.exports=function(t,e){e||(e=[0,""]),t=String(t);var r=parseFloat(t,10);return e[0]=r,e[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},{}],266:[function(t,e,r){e.exports=i;var n=t("compare-angle");function i(t,e){for(var r=0|e.length,i=t.length,a=[new Array(r),new Array(r)],o=0;o<r;++o)a[0][o]=[],a[1][o]=[];for(o=0;o<i;++o){var s=t[o];a[0][s[0]].push(s),a[1][s[1]].push(s)}var l=[];for(o=0;o<r;++o)a[0][o].length+a[1][o].length===0&&l.push([o]);function c(t,e){var r=a[e][t[e]];r.splice(r.indexOf(t),1)}function u(t,r,i){for(var o,s,l,u=0;u<2;++u)if(a[u][r].length>0){o=a[u][r][0],l=u;break}s=o[1^l];for(var d=0;d<2;++d)for(var h=a[d][r],g=0;g<h.length;++g){var f=h[g],p=f[1^d];n(e[t],e[r],e[s],e[p])>0&&(o=f,s=p,l=d)}return i||o&&c(o,l),s}function d(t,r){var i=a[r][t][0],o=[t];c(i,r);for(var s=i[1^r];;){for(;s!==t;)o.push(s),s=u(o[o.length-2],s,!1);if(a[0][t].length+a[1][t].length===0)break;var l=o[o.length-1],d=t,h=o[1],g=u(l,d,!0);if(n(e[l],e[d],e[h],e[g])<0)break;o.push(t),s=u(l,d)}return o}function h(t,e){return e[1]===e[e.length-1]}for(o=0;o<r;++o)for(var g=0;g<2;++g){for(var f=[];a[g][o].length>0;){a[0][o].length;var p=d(o,g);h(f,p)?f.push.apply(f,p):(f.length>0&&l.push(f),f=p)}f.length>0&&l.push(f)}return l}},{"compare-angle":54}],267:[function(t,e,r){e.exports=i;var n=t("edges-to-adjacency-list");function i(t,e){for(var r=n(t,e.length),i=new Array(e.length),a=new Array(e.length),o=[],s=0;s<e.length;++s){var l=r[s].length;a[s]=l,i[s]=!0,l<=1&&o.push(s)}for(;o.length>0;){i[g=o.pop()]=!1;var c=r[g];for(s=0;s<c.length;++s){var u=c[s];0==--a[u]&&o.push(u)}}var d=new Array(e.length),h=[];for(s=0;s<e.length;++s)if(i[s]){var g=h.length;d[s]=g,h.push(e[s])}else d[s]=-1;var f=[];for(s=0;s<t.length;++s){var p=t[s];i[p[0]]&&i[p[1]]&&f.push([d[p[0]],d[p[1]]])}return[f,h]}},{"edges-to-adjacency-list":66}],268:[function(t,e,r){e.exports=h;var n=t("edges-to-adjacency-list"),i=t("planar-dual"),a=t("point-in-big-polygon"),o=t("two-product"),s=t("robust-sum"),l=t("uniq"),c=t("./lib/trim-leaves");function u(t,e){for(var r=new Array(t),n=0;n<t;++n)r[n]=e;return r}function d(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=[];return e}function h(t,e){t=(D=c(t,e))[0];var r=(e=D[1]).length;t.length;for(var h=n(t,e.length),g=0;g<r;++g)if(h[g].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var f=i(t,e);function p(t){for(var r=t.length,n=[0],i=0;i<r;++i){var a=e[t[i]],l=e[t[(i+1)%r]],c=o(-a[0],a[1]),u=o(-a[0],l[1]),d=o(l[0],a[1]),h=o(l[0],l[1]);n=s(n,s(s(c,u),s(d,h)))}return n[n.length-1]>0}var m=(f=f.filter(p)).length,y=new Array(m),b=new Array(m);for(g=0;g<m;++g){y[g]=g;var v=new Array(m),x=f[g].map((function(t){return e[t]})),I=a([x]),B=0;t:for(var C=0;C<m;++C)if(v[C]=0,g!==C){for(var F=($=f[C]).length,A=0;A<F;++A){var Q=I(e[$[A]]);if(0!==Q){Q<0&&(v[C]=1,B+=1);continue t}}v[C]=1,B+=1}b[g]=[B,g,v]}for(b.sort((function(t,e){return e[0]-t[0]})),g=0;g<m;++g){var _=(v=b[g])[1],w=v[2];for(C=0;C<m;++C)w[C]&&(y[C]=_)}var U=d(m);for(g=0;g<m;++g)U[g].push(y[g]),U[y[g]].push(g);var S={},E=u(r,!1);for(g=0;g<m;++g)for(F=($=f[g]).length,C=0;C<F;++C){var L=$[C],T=$[(C+1)%F],R=Math.min(L,T)+":"+Math.max(L,T);if(R in S){var k=S[R];U[k].push(g),U[g].push(k),E[L]=E[T]=!0}else S[R]=g}function G(t){for(var e=t.length,r=0;r<e;++r)if(!E[t[r]])return!1;return!0}var N=[],M=u(m,-1);for(g=0;g<m;++g)y[g]!==g||G(f[g])?M[g]=-1:(N.push(g),M[g]=0);for(var D=[];N.length>0;){var X=N.pop(),V=U[X];l(V,(function(t,e){return t-e}));var W,Z=V.length,O=M[X];for(0===O&&(W=[$=f[X]]),g=0;g<Z;++g){var $,H=V[g];M[H]>=0||(M[H]=1^O,N.push(H),0===O&&(G($=f[H])||($.reverse(),W.push($))))}0===O&&D.push(W)}return D}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(t,e,r){e.exports=f;var n=t("robust-orientation")[3],i=t("slab-decomposition"),a=t("interval-tree-1d"),o=t("binary-search-bounds");function s(){return!0}function l(t){return function(e,r){var n=t[e];return!!n&&!!n.queryPoint(r,s)}}function c(t){for(var e={},r=0;r<t.length;++r){var n=t[r],i=n[0][0],o=n[0][1],s=n[1][1],c=[Math.min(o,s),Math.max(o,s)];i in e?e[i].push(c):e[i]=[c]}var u={},d=Object.keys(e);for(r=0;r<d.length;++r){var h=e[d[r]];u[d[r]]=a(h)}return l(u)}function u(t,e){return function(r){var i=o.le(e,r[0]);if(i<0)return 1;var a=t[i];if(!a){if(!(i>0&&e[i]===r[0]))return 1;a=t[i-1]}for(var s=1;a;){var l=a.key,c=n(r,l[0],l[1]);if(l[0][0]<l[1][0])if(c<0)a=a.left;else{if(!(c>0))return 0;s=-1,a=a.right}else if(c>0)a=a.left;else{if(!(c<0))return 0;s=1,a=a.right}}return s}}function d(t){return 1}function h(t){return function(e){return t(e[0],e[1])?0:1}}function g(t,e){return function(r){return t(r[0],r[1])?0:e(r)}}function f(t){for(var e=t.length,r=[],n=[],a=0;a<e;++a)for(var o=t[a],s=o.length,l=s-1,f=0;f<s;l=f++){var p=o[l],m=o[f];p[0]===m[0]?n.push([p,m]):r.push([p,m])}if(0===r.length)return 0===n.length?d:h(c(n));var y=i(r),b=u(y.slabs,y.coordinates);return 0===n.length?b:g(c(n),b)}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(t,e,r){var n=new Float64Array(4),i=new Float64Array(4),a=new Float64Array(4);function o(t,e,r,o,s){n.length<o.length&&(n=new Float64Array(o.length),i=new Float64Array(o.length),a=new Float64Array(o.length));for(var l=0;l<o.length;++l)n[l]=t[l]-o[l],i[l]=e[l]-t[l],a[l]=r[l]-t[l];var c=0,u=0,d=0,h=0,g=0,f=0;for(l=0;l<o.length;++l){var p=i[l],m=a[l],y=n[l];c+=p*p,u+=p*m,d+=m*m,h+=y*p,g+=y*m,f+=y*y}var b,v,x,I,B,C=Math.abs(c*d-u*u),F=u*g-d*h,A=u*h-c*g;if(F+A<=C)if(F<0)A<0&&h<0?(A=0,-h>=c?(F=1,b=c+2*h+f):b=h*(F=-h/c)+f):(F=0,g>=0?(A=0,b=f):-g>=d?(A=1,b=d+2*g+f):b=g*(A=-g/d)+f);else if(A<0)A=0,h>=0?(F=0,b=f):-h>=c?(F=1,b=c+2*h+f):b=h*(F=-h/c)+f;else{var Q=1/C;b=(F*=Q)*(c*F+u*(A*=Q)+2*h)+A*(u*F+d*A+2*g)+f}else F<0?(x=d+g)>(v=u+h)?(I=x-v)>=(B=c-2*u+d)?(F=1,A=0,b=c+2*h+f):b=(F=I/B)*(c*F+u*(A=1-F)+2*h)+A*(u*F+d*A+2*g)+f:(F=0,x<=0?(A=1,b=d+2*g+f):g>=0?(A=0,b=f):b=g*(A=-g/d)+f):A<0?(x=c+h)>(v=u+g)?(I=x-v)>=(B=c-2*u+d)?(A=1,F=0,b=d+2*g+f):b=(F=1-(A=I/B))*(c*F+u*A+2*h)+A*(u*F+d*A+2*g)+f:(A=0,x<=0?(F=1,b=c+2*h+f):h>=0?(F=0,b=f):b=h*(F=-h/c)+f):(I=d+g-u-h)<=0?(F=0,A=1,b=d+2*g+f):I>=(B=c-2*u+d)?(F=1,A=0,b=c+2*h+f):b=(F=I/B)*(c*F+u*(A=1-F)+2*h)+A*(u*F+d*A+2*g)+f;var _=1-F-A;for(l=0;l<o.length;++l)s[l]=_*t[l]+F*e[l]+A*r[l];return b<0?0:b}e.exports=o},{}],271:[function(t,e,r){e.exports=t("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(t,e,r){var n=t("big-rat/add");function i(t,e){for(var r=t.length,i=new Array(r),a=0;a<r;++a)i[a]=n(t[a],e[a]);return i}e.exports=i},{"big-rat/add":15}],273:[function(t,e,r){e.exports=i;var n=t("big-rat");function i(t){for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=n(t[r]);return e}},{"big-rat":18}],274:[function(t,e,r){var n=t("big-rat"),i=t("big-rat/mul");function a(t,e){for(var r=n(e),a=t.length,o=new Array(a),s=0;s<a;++s)o[s]=i(t[s],r);return o}e.exports=a},{"big-rat":18,"big-rat/mul":27}],275:[function(t,e,r){var n=t("big-rat/sub");function i(t,e){for(var r=t.length,i=new Array(r),a=0;a<r;++a)i[a]=n(t[a],e[a]);return i}e.exports=i},{"big-rat/sub":29}],276:[function(t,e,r){var n=t("compare-cell"),i=t("compare-oriented-cell"),a=t("cell-orientation");function o(t){t.sort(i);for(var e=t.length,r=0,o=0;o<e;++o){var s=t[o],l=a(s);if(0!==l){if(r>0){var c=t[r-1];if(0===n(s,c)&&a(c)!==l){r-=1;continue}}t[r++]=s}}return t.length=r,t}e.exports=o},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(t,e,r){var n,i="";function a(t,e){if("string"!=typeof t)throw new TypeError("expected a string");if(1===e)return t;if(2===e)return t+t;var r=t.length*e;if(n!==t||void 0===n)n=t,i="";else if(i.length>=r)return i.substr(0,r);for(;r>i.length&&e>1;)1&e&&(i+=t),e>>=1,t+=t;return i=(i+=t).substr(0,r)}e.exports=a},{}],278:[function(t,e,r){(function(t){(function(){e.exports=t.performance&&t.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],279:[function(t,e,r){function n(t){for(var e=t.length,r=t[t.length-1],n=e,i=e-2;i>=0;--i){var a=r;(l=(s=t[i])-((r=a+s)-a))&&(t[--n]=r,r=l)}var o=0;for(i=n;i<e;++i){var s,l;(l=(s=r)-((r=(a=t[i])+s)-a))&&(t[o++]=l)}return t[o++]=r,t.length=o,t}e.exports=n},{}],280:[function(t,e,r){var n=t("two-product"),i=t("robust-sum"),a=t("robust-scale"),o=t("robust-compress"),s=6;function l(t,e,r,n){return function(e){return n(t(r(e[0][0],e[1][1]),r(-e[0][1],e[1][0])))}}function c(t,e,r,n){return function(i){return n(t(e(t(r(i[1][1],i[2][2]),r(-i[1][2],i[2][1])),i[0][0]),t(e(t(r(i[1][0],i[2][2]),r(-i[1][2],i[2][0])),-i[0][1]),e(t(r(i[1][0],i[2][1]),r(-i[1][1],i[2][0])),i[0][2]))))}}function u(t,e,r,n){return function(i){return n(t(t(e(t(e(t(r(i[2][2],i[3][3]),r(-i[2][3],i[3][2])),i[1][1]),t(e(t(r(i[2][1],i[3][3]),r(-i[2][3],i[3][1])),-i[1][2]),e(t(r(i[2][1],i[3][2]),r(-i[2][2],i[3][1])),i[1][3]))),i[0][0]),e(t(e(t(r(i[2][2],i[3][3]),r(-i[2][3],i[3][2])),i[1][0]),t(e(t(r(i[2][0],i[3][3]),r(-i[2][3],i[3][0])),-i[1][2]),e(t(r(i[2][0],i[3][2]),r(-i[2][2],i[3][0])),i[1][3]))),-i[0][1])),t(e(t(e(t(r(i[2][1],i[3][3]),r(-i[2][3],i[3][1])),i[1][0]),t(e(t(r(i[2][0],i[3][3]),r(-i[2][3],i[3][0])),-i[1][1]),e(t(r(i[2][0],i[3][1]),r(-i[2][1],i[3][0])),i[1][3]))),i[0][2]),e(t(e(t(r(i[2][1],i[3][2]),r(-i[2][2],i[3][1])),i[1][0]),t(e(t(r(i[2][0],i[3][2]),r(-i[2][2],i[3][0])),-i[1][1]),e(t(r(i[2][0],i[3][1]),r(-i[2][1],i[3][0])),i[1][2]))),-i[0][3]))))}}function d(t,e,r,n){return function(i){return n(t(t(e(t(t(e(t(e(t(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][2]),t(e(t(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),-i[2][3]),e(t(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][4]))),i[1][1]),e(t(e(t(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][1]),t(e(t(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),-i[2][3]),e(t(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),i[2][4]))),-i[1][2])),t(e(t(e(t(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),i[2][1]),t(e(t(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),-i[2][2]),e(t(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][4]))),i[1][3]),e(t(e(t(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][1]),t(e(t(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),-i[2][2]),e(t(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][3]))),-i[1][4]))),i[0][0]),e(t(t(e(t(e(t(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][2]),t(e(t(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),-i[2][3]),e(t(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][4]))),i[1][0]),e(t(e(t(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][0]),t(e(t(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][3]),e(t(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),i[2][4]))),-i[1][2])),t(e(t(e(t(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),i[2][0]),t(e(t(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][2]),e(t(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),i[2][4]))),i[1][3]),e(t(e(t(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][0]),t(e(t(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),-i[2][2]),e(t(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),i[2][3]))),-i[1][4]))),-i[0][1])),t(e(t(t(e(t(e(t(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][1]),t(e(t(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),-i[2][3]),e(t(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),i[2][4]))),i[1][0]),e(t(e(t(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][0]),t(e(t(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][3]),e(t(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),i[2][4]))),-i[1][1])),t(e(t(e(t(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),i[2][0]),t(e(t(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][1]),e(t(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][4]))),i[1][3]),e(t(e(t(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),i[2][0]),t(e(t(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),-i[2][1]),e(t(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][3]))),-i[1][4]))),i[0][2]),t(e(t(t(e(t(e(t(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),i[2][1]),t(e(t(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),-i[2][2]),e(t(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][4]))),i[1][0]),e(t(e(t(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),i[2][0]),t(e(t(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][2]),e(t(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),i[2][4]))),-i[1][1])),t(e(t(e(t(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),i[2][0]),t(e(t(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][1]),e(t(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][4]))),i[1][2]),e(t(e(t(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][0]),t(e(t(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),-i[2][1]),e(t(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][2]))),-i[1][4]))),-i[0][3]),e(t(t(e(t(e(t(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][1]),t(e(t(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),-i[2][2]),e(t(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][3]))),i[1][0]),e(t(e(t(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][0]),t(e(t(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),-i[2][2]),e(t(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),i[2][3]))),-i[1][1])),t(e(t(e(t(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),i[2][0]),t(e(t(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),-i[2][1]),e(t(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][3]))),i[1][2]),e(t(e(t(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][0]),t(e(t(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),-i[2][1]),e(t(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][2]))),-i[1][3]))),i[0][4])))))}}function h(t){return(2===t?l:3===t?c:4===t?u:5===t?d:void 0)(i,a,n,o)}var g=[function(){return[0]},function(t){return[t[0][0]]}];function f(t,e,r,n,i,a,o,s){return function(l){switch(l.length){case 0:return t(l);case 1:return e(l);case 2:return r(l);case 3:return n(l);case 4:return i(l);case 5:return a(l)}var c=o[l.length];return c||(c=o[l.length]=s(l.length)),c(l)}}function p(){for(;g.length<s;)g.push(h(g.length));e.exports=f.apply(void 0,g.concat([g,h]));for(var t=0;t<g.length;++t)e.exports[t]=g[t]}p()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(t,e,r){var n=t("two-product"),i=t("robust-sum");function a(t,e){for(var r=n(t[0],e[0]),a=1;a<t.length;++a)r=i(r,n(t[a],e[a]));return r}e.exports=a},{"robust-sum":289,"two-product":306}],282:[function(t,e,r){var n=t("two-product"),i=t("robust-sum"),a=t("robust-subtract"),o=t("robust-scale"),s=6;function l(t){return(3===t?h:4===t?g:5===t?f:p)(i,a,n,o)}function c(){return 0}function u(){return 0}function d(){return 0}function h(t,e,r,n){function i(i,a,o){var s=r(i[0],i[0]),l=n(s,a[0]),c=n(s,o[0]),u=r(a[0],a[0]),d=n(u,i[0]),h=n(u,o[0]),g=r(o[0],o[0]),f=n(g,i[0]),p=n(g,a[0]),m=t(e(p,h),e(d,l)),y=e(f,c),b=e(m,y);return b[b.length-1]}return i}function g(t,e,r,n){function i(i,a,o,s){var l=t(r(i[0],i[0]),r(i[1],i[1])),c=n(l,a[0]),u=n(l,o[0]),d=n(l,s[0]),h=t(r(a[0],a[0]),r(a[1],a[1])),g=n(h,i[0]),f=n(h,o[0]),p=n(h,s[0]),m=t(r(o[0],o[0]),r(o[1],o[1])),y=n(m,i[0]),b=n(m,a[0]),v=n(m,s[0]),x=t(r(s[0],s[0]),r(s[1],s[1])),I=n(x,i[0]),B=n(x,a[0]),C=n(x,o[0]),F=t(t(n(e(C,v),a[1]),t(n(e(B,p),-o[1]),n(e(b,f),s[1]))),t(n(e(B,p),i[1]),t(n(e(I,d),-a[1]),n(e(g,c),s[1])))),A=t(t(n(e(C,v),i[1]),t(n(e(I,d),-o[1]),n(e(y,u),s[1]))),t(n(e(b,f),i[1]),t(n(e(y,u),-a[1]),n(e(g,c),o[1])))),Q=e(F,A);return Q[Q.length-1]}return i}function f(t,e,r,n){function i(i,a,o,s,l){var c=t(r(i[0],i[0]),t(r(i[1],i[1]),r(i[2],i[2]))),u=n(c,a[0]),d=n(c,o[0]),h=n(c,s[0]),g=n(c,l[0]),f=t(r(a[0],a[0]),t(r(a[1],a[1]),r(a[2],a[2]))),p=n(f,i[0]),m=n(f,o[0]),y=n(f,s[0]),b=n(f,l[0]),v=t(r(o[0],o[0]),t(r(o[1],o[1]),r(o[2],o[2]))),x=n(v,i[0]),I=n(v,a[0]),B=n(v,s[0]),C=n(v,l[0]),F=t(r(s[0],s[0]),t(r(s[1],s[1]),r(s[2],s[2]))),A=n(F,i[0]),Q=n(F,a[0]),_=n(F,o[0]),w=n(F,l[0]),U=t(r(l[0],l[0]),t(r(l[1],l[1]),r(l[2],l[2]))),S=n(U,i[0]),E=n(U,a[0]),L=n(U,o[0]),T=n(U,s[0]),R=t(t(t(n(t(n(e(T,w),o[1]),t(n(e(L,C),-s[1]),n(e(_,B),l[1]))),a[2]),t(n(t(n(e(T,w),a[1]),t(n(e(E,b),-s[1]),n(e(Q,y),l[1]))),-o[2]),n(t(n(e(L,C),a[1]),t(n(e(E,b),-o[1]),n(e(I,m),l[1]))),s[2]))),t(n(t(n(e(_,B),a[1]),t(n(e(Q,y),-o[1]),n(e(I,m),s[1]))),-l[2]),t(n(t(n(e(T,w),a[1]),t(n(e(E,b),-s[1]),n(e(Q,y),l[1]))),i[2]),n(t(n(e(T,w),i[1]),t(n(e(S,g),-s[1]),n(e(A,h),l[1]))),-a[2])))),t(t(n(t(n(e(E,b),i[1]),t(n(e(S,g),-a[1]),n(e(p,u),l[1]))),s[2]),t(n(t(n(e(Q,y),i[1]),t(n(e(A,h),-a[1]),n(e(p,u),s[1]))),-l[2]),n(t(n(e(_,B),a[1]),t(n(e(Q,y),-o[1]),n(e(I,m),s[1]))),i[2]))),t(n(t(n(e(_,B),i[1]),t(n(e(A,h),-o[1]),n(e(x,d),s[1]))),-a[2]),t(n(t(n(e(Q,y),i[1]),t(n(e(A,h),-a[1]),n(e(p,u),s[1]))),o[2]),n(t(n(e(I,m),i[1]),t(n(e(x,d),-a[1]),n(e(p,u),o[1]))),-s[2]))))),k=t(t(t(n(t(n(e(T,w),o[1]),t(n(e(L,C),-s[1]),n(e(_,B),l[1]))),i[2]),n(t(n(e(T,w),i[1]),t(n(e(S,g),-s[1]),n(e(A,h),l[1]))),-o[2])),t(n(t(n(e(L,C),i[1]),t(n(e(S,g),-o[1]),n(e(x,d),l[1]))),s[2]),n(t(n(e(_,B),i[1]),t(n(e(A,h),-o[1]),n(e(x,d),s[1]))),-l[2]))),t(t(n(t(n(e(L,C),a[1]),t(n(e(E,b),-o[1]),n(e(I,m),l[1]))),i[2]),n(t(n(e(L,C),i[1]),t(n(e(S,g),-o[1]),n(e(x,d),l[1]))),-a[2])),t(n(t(n(e(E,b),i[1]),t(n(e(S,g),-a[1]),n(e(p,u),l[1]))),o[2]),n(t(n(e(I,m),i[1]),t(n(e(x,d),-a[1]),n(e(p,u),o[1]))),-l[2])))),G=e(R,k);return G[G.length-1]}return i}function p(t,e,r,n){function i(i,a,o,s,l,c){var u=t(t(r(i[0],i[0]),r(i[1],i[1])),t(r(i[2],i[2]),r(i[3],i[3]))),d=n(u,a[0]),h=n(u,o[0]),g=n(u,s[0]),f=n(u,l[0]),p=n(u,c[0]),m=t(t(r(a[0],a[0]),r(a[1],a[1])),t(r(a[2],a[2]),r(a[3],a[3]))),y=n(m,i[0]),b=n(m,o[0]),v=n(m,s[0]),x=n(m,l[0]),I=n(m,c[0]),B=t(t(r(o[0],o[0]),r(o[1],o[1])),t(r(o[2],o[2]),r(o[3],o[3]))),C=n(B,i[0]),F=n(B,a[0]),A=n(B,s[0]),Q=n(B,l[0]),_=n(B,c[0]),w=t(t(r(s[0],s[0]),r(s[1],s[1])),t(r(s[2],s[2]),r(s[3],s[3]))),U=n(w,i[0]),S=n(w,a[0]),E=n(w,o[0]),L=n(w,l[0]),T=n(w,c[0]),R=t(t(r(l[0],l[0]),r(l[1],l[1])),t(r(l[2],l[2]),r(l[3],l[3]))),k=n(R,i[0]),G=n(R,a[0]),N=n(R,o[0]),M=n(R,s[0]),D=n(R,c[0]),X=t(t(r(c[0],c[0]),r(c[1],c[1])),t(r(c[2],c[2]),r(c[3],c[3]))),V=n(X,i[0]),W=n(X,a[0]),Z=n(X,o[0]),O=n(X,s[0]),$=n(X,l[0]),H=t(t(t(n(t(t(n(t(n(e($,D),s[1]),t(n(e(O,T),-l[1]),n(e(M,L),c[1]))),o[2]),n(t(n(e($,D),o[1]),t(n(e(Z,_),-l[1]),n(e(N,Q),c[1]))),-s[2])),t(n(t(n(e(O,T),o[1]),t(n(e(Z,_),-s[1]),n(e(E,A),c[1]))),l[2]),n(t(n(e(M,L),o[1]),t(n(e(N,Q),-s[1]),n(e(E,A),l[1]))),-c[2]))),a[3]),t(n(t(t(n(t(n(e($,D),s[1]),t(n(e(O,T),-l[1]),n(e(M,L),c[1]))),a[2]),n(t(n(e($,D),a[1]),t(n(e(W,I),-l[1]),n(e(G,x),c[1]))),-s[2])),t(n(t(n(e(O,T),a[1]),t(n(e(W,I),-s[1]),n(e(S,v),c[1]))),l[2]),n(t(n(e(M,L),a[1]),t(n(e(G,x),-s[1]),n(e(S,v),l[1]))),-c[2]))),-o[3]),n(t(t(n(t(n(e($,D),o[1]),t(n(e(Z,_),-l[1]),n(e(N,Q),c[1]))),a[2]),n(t(n(e($,D),a[1]),t(n(e(W,I),-l[1]),n(e(G,x),c[1]))),-o[2])),t(n(t(n(e(Z,_),a[1]),t(n(e(W,I),-o[1]),n(e(F,b),c[1]))),l[2]),n(t(n(e(N,Q),a[1]),t(n(e(G,x),-o[1]),n(e(F,b),l[1]))),-c[2]))),s[3]))),t(t(n(t(t(n(t(n(e(O,T),o[1]),t(n(e(Z,_),-s[1]),n(e(E,A),c[1]))),a[2]),n(t(n(e(O,T),a[1]),t(n(e(W,I),-s[1]),n(e(S,v),c[1]))),-o[2])),t(n(t(n(e(Z,_),a[1]),t(n(e(W,I),-o[1]),n(e(F,b),c[1]))),s[2]),n(t(n(e(E,A),a[1]),t(n(e(S,v),-o[1]),n(e(F,b),s[1]))),-c[2]))),-l[3]),n(t(t(n(t(n(e(M,L),o[1]),t(n(e(N,Q),-s[1]),n(e(E,A),l[1]))),a[2]),n(t(n(e(M,L),a[1]),t(n(e(G,x),-s[1]),n(e(S,v),l[1]))),-o[2])),t(n(t(n(e(N,Q),a[1]),t(n(e(G,x),-o[1]),n(e(F,b),l[1]))),s[2]),n(t(n(e(E,A),a[1]),t(n(e(S,v),-o[1]),n(e(F,b),s[1]))),-l[2]))),c[3])),t(n(t(t(n(t(n(e($,D),s[1]),t(n(e(O,T),-l[1]),n(e(M,L),c[1]))),a[2]),n(t(n(e($,D),a[1]),t(n(e(W,I),-l[1]),n(e(G,x),c[1]))),-s[2])),t(n(t(n(e(O,T),a[1]),t(n(e(W,I),-s[1]),n(e(S,v),c[1]))),l[2]),n(t(n(e(M,L),a[1]),t(n(e(G,x),-s[1]),n(e(S,v),l[1]))),-c[2]))),i[3]),n(t(t(n(t(n(e($,D),s[1]),t(n(e(O,T),-l[1]),n(e(M,L),c[1]))),i[2]),n(t(n(e($,D),i[1]),t(n(e(V,p),-l[1]),n(e(k,f),c[1]))),-s[2])),t(n(t(n(e(O,T),i[1]),t(n(e(V,p),-s[1]),n(e(U,g),c[1]))),l[2]),n(t(n(e(M,L),i[1]),t(n(e(k,f),-s[1]),n(e(U,g),l[1]))),-c[2]))),-a[3])))),t(t(t(n(t(t(n(t(n(e($,D),a[1]),t(n(e(W,I),-l[1]),n(e(G,x),c[1]))),i[2]),n(t(n(e($,D),i[1]),t(n(e(V,p),-l[1]),n(e(k,f),c[1]))),-a[2])),t(n(t(n(e(W,I),i[1]),t(n(e(V,p),-a[1]),n(e(y,d),c[1]))),l[2]),n(t(n(e(G,x),i[1]),t(n(e(k,f),-a[1]),n(e(y,d),l[1]))),-c[2]))),s[3]),n(t(t(n(t(n(e(O,T),a[1]),t(n(e(W,I),-s[1]),n(e(S,v),c[1]))),i[2]),n(t(n(e(O,T),i[1]),t(n(e(V,p),-s[1]),n(e(U,g),c[1]))),-a[2])),t(n(t(n(e(W,I),i[1]),t(n(e(V,p),-a[1]),n(e(y,d),c[1]))),s[2]),n(t(n(e(S,v),i[1]),t(n(e(U,g),-a[1]),n(e(y,d),s[1]))),-c[2]))),-l[3])),t(n(t(t(n(t(n(e(M,L),a[1]),t(n(e(G,x),-s[1]),n(e(S,v),l[1]))),i[2]),n(t(n(e(M,L),i[1]),t(n(e(k,f),-s[1]),n(e(U,g),l[1]))),-a[2])),t(n(t(n(e(G,x),i[1]),t(n(e(k,f),-a[1]),n(e(y,d),l[1]))),s[2]),n(t(n(e(S,v),i[1]),t(n(e(U,g),-a[1]),n(e(y,d),s[1]))),-l[2]))),c[3]),n(t(t(n(t(n(e(O,T),o[1]),t(n(e(Z,_),-s[1]),n(e(E,A),c[1]))),a[2]),n(t(n(e(O,T),a[1]),t(n(e(W,I),-s[1]),n(e(S,v),c[1]))),-o[2])),t(n(t(n(e(Z,_),a[1]),t(n(e(W,I),-o[1]),n(e(F,b),c[1]))),s[2]),n(t(n(e(E,A),a[1]),t(n(e(S,v),-o[1]),n(e(F,b),s[1]))),-c[2]))),i[3]))),t(t(n(t(t(n(t(n(e(O,T),o[1]),t(n(e(Z,_),-s[1]),n(e(E,A),c[1]))),i[2]),n(t(n(e(O,T),i[1]),t(n(e(V,p),-s[1]),n(e(U,g),c[1]))),-o[2])),t(n(t(n(e(Z,_),i[1]),t(n(e(V,p),-o[1]),n(e(C,h),c[1]))),s[2]),n(t(n(e(E,A),i[1]),t(n(e(U,g),-o[1]),n(e(C,h),s[1]))),-c[2]))),-a[3]),n(t(t(n(t(n(e(O,T),a[1]),t(n(e(W,I),-s[1]),n(e(S,v),c[1]))),i[2]),n(t(n(e(O,T),i[1]),t(n(e(V,p),-s[1]),n(e(U,g),c[1]))),-a[2])),t(n(t(n(e(W,I),i[1]),t(n(e(V,p),-a[1]),n(e(y,d),c[1]))),s[2]),n(t(n(e(S,v),i[1]),t(n(e(U,g),-a[1]),n(e(y,d),s[1]))),-c[2]))),o[3])),t(n(t(t(n(t(n(e(Z,_),a[1]),t(n(e(W,I),-o[1]),n(e(F,b),c[1]))),i[2]),n(t(n(e(Z,_),i[1]),t(n(e(V,p),-o[1]),n(e(C,h),c[1]))),-a[2])),t(n(t(n(e(W,I),i[1]),t(n(e(V,p),-a[1]),n(e(y,d),c[1]))),o[2]),n(t(n(e(F,b),i[1]),t(n(e(C,h),-a[1]),n(e(y,d),o[1]))),-c[2]))),-s[3]),n(t(t(n(t(n(e(E,A),a[1]),t(n(e(S,v),-o[1]),n(e(F,b),s[1]))),i[2]),n(t(n(e(E,A),i[1]),t(n(e(U,g),-o[1]),n(e(C,h),s[1]))),-a[2])),t(n(t(n(e(S,v),i[1]),t(n(e(U,g),-a[1]),n(e(y,d),s[1]))),o[2]),n(t(n(e(F,b),i[1]),t(n(e(C,h),-a[1]),n(e(y,d),o[1]))),-s[2]))),c[3]))))),Y=t(t(t(n(t(t(n(t(n(e($,D),s[1]),t(n(e(O,T),-l[1]),n(e(M,L),c[1]))),o[2]),n(t(n(e($,D),o[1]),t(n(e(Z,_),-l[1]),n(e(N,Q),c[1]))),-s[2])),t(n(t(n(e(O,T),o[1]),t(n(e(Z,_),-s[1]),n(e(E,A),c[1]))),l[2]),n(t(n(e(M,L),o[1]),t(n(e(N,Q),-s[1]),n(e(E,A),l[1]))),-c[2]))),i[3]),t(n(t(t(n(t(n(e($,D),s[1]),t(n(e(O,T),-l[1]),n(e(M,L),c[1]))),i[2]),n(t(n(e($,D),i[1]),t(n(e(V,p),-l[1]),n(e(k,f),c[1]))),-s[2])),t(n(t(n(e(O,T),i[1]),t(n(e(V,p),-s[1]),n(e(U,g),c[1]))),l[2]),n(t(n(e(M,L),i[1]),t(n(e(k,f),-s[1]),n(e(U,g),l[1]))),-c[2]))),-o[3]),n(t(t(n(t(n(e($,D),o[1]),t(n(e(Z,_),-l[1]),n(e(N,Q),c[1]))),i[2]),n(t(n(e($,D),i[1]),t(n(e(V,p),-l[1]),n(e(k,f),c[1]))),-o[2])),t(n(t(n(e(Z,_),i[1]),t(n(e(V,p),-o[1]),n(e(C,h),c[1]))),l[2]),n(t(n(e(N,Q),i[1]),t(n(e(k,f),-o[1]),n(e(C,h),l[1]))),-c[2]))),s[3]))),t(t(n(t(t(n(t(n(e(O,T),o[1]),t(n(e(Z,_),-s[1]),n(e(E,A),c[1]))),i[2]),n(t(n(e(O,T),i[1]),t(n(e(V,p),-s[1]),n(e(U,g),c[1]))),-o[2])),t(n(t(n(e(Z,_),i[1]),t(n(e(V,p),-o[1]),n(e(C,h),c[1]))),s[2]),n(t(n(e(E,A),i[1]),t(n(e(U,g),-o[1]),n(e(C,h),s[1]))),-c[2]))),-l[3]),n(t(t(n(t(n(e(M,L),o[1]),t(n(e(N,Q),-s[1]),n(e(E,A),l[1]))),i[2]),n(t(n(e(M,L),i[1]),t(n(e(k,f),-s[1]),n(e(U,g),l[1]))),-o[2])),t(n(t(n(e(N,Q),i[1]),t(n(e(k,f),-o[1]),n(e(C,h),l[1]))),s[2]),n(t(n(e(E,A),i[1]),t(n(e(U,g),-o[1]),n(e(C,h),s[1]))),-l[2]))),c[3])),t(n(t(t(n(t(n(e($,D),o[1]),t(n(e(Z,_),-l[1]),n(e(N,Q),c[1]))),a[2]),n(t(n(e($,D),a[1]),t(n(e(W,I),-l[1]),n(e(G,x),c[1]))),-o[2])),t(n(t(n(e(Z,_),a[1]),t(n(e(W,I),-o[1]),n(e(F,b),c[1]))),l[2]),n(t(n(e(N,Q),a[1]),t(n(e(G,x),-o[1]),n(e(F,b),l[1]))),-c[2]))),i[3]),n(t(t(n(t(n(e($,D),o[1]),t(n(e(Z,_),-l[1]),n(e(N,Q),c[1]))),i[2]),n(t(n(e($,D),i[1]),t(n(e(V,p),-l[1]),n(e(k,f),c[1]))),-o[2])),t(n(t(n(e(Z,_),i[1]),t(n(e(V,p),-o[1]),n(e(C,h),c[1]))),l[2]),n(t(n(e(N,Q),i[1]),t(n(e(k,f),-o[1]),n(e(C,h),l[1]))),-c[2]))),-a[3])))),t(t(t(n(t(t(n(t(n(e($,D),a[1]),t(n(e(W,I),-l[1]),n(e(G,x),c[1]))),i[2]),n(t(n(e($,D),i[1]),t(n(e(V,p),-l[1]),n(e(k,f),c[1]))),-a[2])),t(n(t(n(e(W,I),i[1]),t(n(e(V,p),-a[1]),n(e(y,d),c[1]))),l[2]),n(t(n(e(G,x),i[1]),t(n(e(k,f),-a[1]),n(e(y,d),l[1]))),-c[2]))),o[3]),n(t(t(n(t(n(e(Z,_),a[1]),t(n(e(W,I),-o[1]),n(e(F,b),c[1]))),i[2]),n(t(n(e(Z,_),i[1]),t(n(e(V,p),-o[1]),n(e(C,h),c[1]))),-a[2])),t(n(t(n(e(W,I),i[1]),t(n(e(V,p),-a[1]),n(e(y,d),c[1]))),o[2]),n(t(n(e(F,b),i[1]),t(n(e(C,h),-a[1]),n(e(y,d),o[1]))),-c[2]))),-l[3])),t(n(t(t(n(t(n(e(N,Q),a[1]),t(n(e(G,x),-o[1]),n(e(F,b),l[1]))),i[2]),n(t(n(e(N,Q),i[1]),t(n(e(k,f),-o[1]),n(e(C,h),l[1]))),-a[2])),t(n(t(n(e(G,x),i[1]),t(n(e(k,f),-a[1]),n(e(y,d),l[1]))),o[2]),n(t(n(e(F,b),i[1]),t(n(e(C,h),-a[1]),n(e(y,d),o[1]))),-l[2]))),c[3]),n(t(t(n(t(n(e(M,L),o[1]),t(n(e(N,Q),-s[1]),n(e(E,A),l[1]))),a[2]),n(t(n(e(M,L),a[1]),t(n(e(G,x),-s[1]),n(e(S,v),l[1]))),-o[2])),t(n(t(n(e(N,Q),a[1]),t(n(e(G,x),-o[1]),n(e(F,b),l[1]))),s[2]),n(t(n(e(E,A),a[1]),t(n(e(S,v),-o[1]),n(e(F,b),s[1]))),-l[2]))),i[3]))),t(t(n(t(t(n(t(n(e(M,L),o[1]),t(n(e(N,Q),-s[1]),n(e(E,A),l[1]))),i[2]),n(t(n(e(M,L),i[1]),t(n(e(k,f),-s[1]),n(e(U,g),l[1]))),-o[2])),t(n(t(n(e(N,Q),i[1]),t(n(e(k,f),-o[1]),n(e(C,h),l[1]))),s[2]),n(t(n(e(E,A),i[1]),t(n(e(U,g),-o[1]),n(e(C,h),s[1]))),-l[2]))),-a[3]),n(t(t(n(t(n(e(M,L),a[1]),t(n(e(G,x),-s[1]),n(e(S,v),l[1]))),i[2]),n(t(n(e(M,L),i[1]),t(n(e(k,f),-s[1]),n(e(U,g),l[1]))),-a[2])),t(n(t(n(e(G,x),i[1]),t(n(e(k,f),-a[1]),n(e(y,d),l[1]))),s[2]),n(t(n(e(S,v),i[1]),t(n(e(U,g),-a[1]),n(e(y,d),s[1]))),-l[2]))),o[3])),t(n(t(t(n(t(n(e(N,Q),a[1]),t(n(e(G,x),-o[1]),n(e(F,b),l[1]))),i[2]),n(t(n(e(N,Q),i[1]),t(n(e(k,f),-o[1]),n(e(C,h),l[1]))),-a[2])),t(n(t(n(e(G,x),i[1]),t(n(e(k,f),-a[1]),n(e(y,d),l[1]))),o[2]),n(t(n(e(F,b),i[1]),t(n(e(C,h),-a[1]),n(e(y,d),o[1]))),-l[2]))),-s[3]),n(t(t(n(t(n(e(E,A),a[1]),t(n(e(S,v),-o[1]),n(e(F,b),s[1]))),i[2]),n(t(n(e(E,A),i[1]),t(n(e(U,g),-o[1]),n(e(C,h),s[1]))),-a[2])),t(n(t(n(e(S,v),i[1]),t(n(e(U,g),-a[1]),n(e(y,d),s[1]))),o[2]),n(t(n(e(F,b),i[1]),t(n(e(C,h),-a[1]),n(e(y,d),o[1]))),-s[2]))),l[3]))))),P=e(H,Y);return P[P.length-1]}return i}var m=[c,u,d];function y(t){var e=m[t.length];return e||(e=m[t.length]=l(t.length)),e.apply(void 0,t)}function b(t,e,r,n,i,a,o,s){function l(e,r,l,c,u,d){switch(arguments.length){case 0:case 1:return 0;case 2:return n(e,r);case 3:return i(e,r,l);case 4:return a(e,r,l,c);case 5:return o(e,r,l,c,u);case 6:return s(e,r,l,c,u,d)}for(var h=new Array(arguments.length),g=0;g<arguments.length;++g)h[g]=arguments[g];return t(h)}return l}function v(){for(;m.length<=s;)m.push(l(m.length));e.exports=b.apply(void 0,[y].concat(m));for(var t=0;t<=s;++t)e.exports[t]=m[t]}v()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(t,e,r){var n=t("robust-determinant"),i=6;function a(t){var e=2===t?l:3===t?c:4===t?u:5===t?d:h;return e(t<6?n[t]:n)}function o(){return[[0]]}function s(t,e){return[[e[0]],[t[0][0]]]}function l(t){return function(e,r){return[t([[+r[0],+e[0][1]],[+r[1],+e[1][1]]]),t([[+e[0][0],+r[0]],[+e[1][0],+r[1]]]),t(e)]}}function c(t){return function(e,r){return[t([[+r[0],+e[0][1],+e[0][2]],[+r[1],+e[1][1],+e[1][2]],[+r[2],+e[2][1],+e[2][2]]]),t([[+e[0][0],+r[0],+e[0][2]],[+e[1][0],+r[1],+e[1][2]],[+e[2][0],+r[2],+e[2][2]]]),t([[+e[0][0],+e[0][1],+r[0]],[+e[1][0],+e[1][1],+r[1]],[+e[2][0],+e[2][1],+r[2]]]),t(e)]}}function u(t){return function(e,r){return[t([[+r[0],+e[0][1],+e[0][2],+e[0][3]],[+r[1],+e[1][1],+e[1][2],+e[1][3]],[+r[2],+e[2][1],+e[2][2],+e[2][3]],[+r[3],+e[3][1],+e[3][2],+e[3][3]]]),t([[+e[0][0],+r[0],+e[0][2],+e[0][3]],[+e[1][0],+r[1],+e[1][2],+e[1][3]],[+e[2][0],+r[2],+e[2][2],+e[2][3]],[+e[3][0],+r[3],+e[3][2],+e[3][3]]]),t([[+e[0][0],+e[0][1],+r[0],+e[0][3]],[+e[1][0],+e[1][1],+r[1],+e[1][3]],[+e[2][0],+e[2][1],+r[2],+e[2][3]],[+e[3][0],+e[3][1],+r[3],+e[3][3]]]),t([[+e[0][0],+e[0][1],+e[0][2],+r[0]],[+e[1][0],+e[1][1],+e[1][2],+r[1]],[+e[2][0],+e[2][1],+e[2][2],+r[2]],[+e[3][0],+e[3][1],+e[3][2],+r[3]]]),t(e)]}}function d(t){return function(e,r){return[t([[+r[0],+e[0][1],+e[0][2],+e[0][3],+e[0][4]],[+r[1],+e[1][1],+e[1][2],+e[1][3],+e[1][4]],[+r[2],+e[2][1],+e[2][2],+e[2][3],+e[2][4]],[+r[3],+e[3][1],+e[3][2],+e[3][3],+e[3][4]],[+r[4],+e[4][1],+e[4][2],+e[4][3],+e[4][4]]]),t([[+e[0][0],+r[0],+e[0][2],+e[0][3],+e[0][4]],[+e[1][0],+r[1],+e[1][2],+e[1][3],+e[1][4]],[+e[2][0],+r[2],+e[2][2],+e[2][3],+e[2][4]],[+e[3][0],+r[3],+e[3][2],+e[3][3],+e[3][4]],[+e[4][0],+r[4],+e[4][2],+e[4][3],+e[4][4]]]),t([[+e[0][0],+e[0][1],+r[0],+e[0][3],+e[0][4]],[+e[1][0],+e[1][1],+r[1],+e[1][3],+e[1][4]],[+e[2][0],+e[2][1],+r[2],+e[2][3],+e[2][4]],[+e[3][0],+e[3][1],+r[3],+e[3][3],+e[3][4]],[+e[4][0],+e[4][1],+r[4],+e[4][3],+e[4][4]]]),t([[+e[0][0],+e[0][1],+e[0][2],+r[0],+e[0][4]],[+e[1][0],+e[1][1],+e[1][2],+r[1],+e[1][4]],[+e[2][0],+e[2][1],+e[2][2],+r[2],+e[2][4]],[+e[3][0],+e[3][1],+e[3][2],+r[3],+e[3][4]],[+e[4][0],+e[4][1],+e[4][2],+r[4],+e[4][4]]]),t([[+e[0][0],+e[0][1],+e[0][2],+e[0][3],+r[0]],[+e[1][0],+e[1][1],+e[1][2],+e[1][3],+r[1]],[+e[2][0],+e[2][1],+e[2][2],+e[2][3],+r[2]],[+e[3][0],+e[3][1],+e[3][2],+e[3][3],+r[3]],[+e[4][0],+e[4][1],+e[4][2],+e[4][3],+r[4]]]),t(e)]}}function h(t){return function(e,r){return[t([[+r[0],+e[0][1],+e[0][2],+e[0][3],+e[0][4],+e[0][5]],[+r[1],+e[1][1],+e[1][2],+e[1][3],+e[1][4],+e[1][5]],[+r[2],+e[2][1],+e[2][2],+e[2][3],+e[2][4],+e[2][5]],[+r[3],+e[3][1],+e[3][2],+e[3][3],+e[3][4],+e[3][5]],[+r[4],+e[4][1],+e[4][2],+e[4][3],+e[4][4],+e[4][5]],[+r[5],+e[5][1],+e[5][2],+e[5][3],+e[5][4],+e[5][5]]]),t([[+e[0][0],+r[0],+e[0][2],+e[0][3],+e[0][4],+e[0][5]],[+e[1][0],+r[1],+e[1][2],+e[1][3],+e[1][4],+e[1][5]],[+e[2][0],+r[2],+e[2][2],+e[2][3],+e[2][4],+e[2][5]],[+e[3][0],+r[3],+e[3][2],+e[3][3],+e[3][4],+e[3][5]],[+e[4][0],+r[4],+e[4][2],+e[4][3],+e[4][4],+e[4][5]],[+e[5][0],+r[5],+e[5][2],+e[5][3],+e[5][4],+e[5][5]]]),t([[+e[0][0],+e[0][1],+r[0],+e[0][3],+e[0][4],+e[0][5]],[+e[1][0],+e[1][1],+r[1],+e[1][3],+e[1][4],+e[1][5]],[+e[2][0],+e[2][1],+r[2],+e[2][3],+e[2][4],+e[2][5]],[+e[3][0],+e[3][1],+r[3],+e[3][3],+e[3][4],+e[3][5]],[+e[4][0],+e[4][1],+r[4],+e[4][3],+e[4][4],+e[4][5]],[+e[5][0],+e[5][1],+r[5],+e[5][3],+e[5][4],+e[5][5]]]),t([[+e[0][0],+e[0][1],+e[0][2],+r[0],+e[0][4],+e[0][5]],[+e[1][0],+e[1][1],+e[1][2],+r[1],+e[1][4],+e[1][5]],[+e[2][0],+e[2][1],+e[2][2],+r[2],+e[2][4],+e[2][5]],[+e[3][0],+e[3][1],+e[3][2],+r[3],+e[3][4],+e[3][5]],[+e[4][0],+e[4][1],+e[4][2],+r[4],+e[4][4],+e[4][5]],[+e[5][0],+e[5][1],+e[5][2],+r[5],+e[5][4],+e[5][5]]]),t([[+e[0][0],+e[0][1],+e[0][2],+e[0][3],+r[0],+e[0][5]],[+e[1][0],+e[1][1],+e[1][2],+e[1][3],+r[1],+e[1][5]],[+e[2][0],+e[2][1],+e[2][2],+e[2][3],+r[2],+e[2][5]],[+e[3][0],+e[3][1],+e[3][2],+e[3][3],+r[3],+e[3][5]],[+e[4][0],+e[4][1],+e[4][2],+e[4][3],+r[4],+e[4][5]],[+e[5][0],+e[5][1],+e[5][2],+e[5][3],+r[5],+e[5][5]]]),t([[+e[0][0],+e[0][1],+e[0][2],+e[0][3],+e[0][4],+r[0]],[+e[1][0],+e[1][1],+e[1][2],+e[1][3],+e[1][4],+r[1]],[+e[2][0],+e[2][1],+e[2][2],+e[2][3],+e[2][4],+r[2]],[+e[3][0],+e[3][1],+e[3][2],+e[3][3],+e[3][4],+r[3]],[+e[4][0],+e[4][1],+e[4][2],+e[4][3],+e[4][4],+r[4]],[+e[5][0],+e[5][1],+e[5][2],+e[5][3],+e[5][4],+r[5]]]),t(e)]}}var g=[o,s];function f(t,e,r,n,i,a,o,s){return function(l,c){switch(l.length){case 0:return t(l,c);case 1:return e(l,c);case 2:return r(l,c);case 3:return n(l,c);case 4:return i(l,c);case 5:return a(l,c)}var u=o[l.length];return u||(u=o[l.length]=s(l.length)),u(l,c)}}function p(){for(;g.length<i;)g.push(a(g.length));e.exports=f.apply(void 0,g.concat([g,a]));for(var t=0;t<i;++t)e.exports[t]=g[t]}p()},{"robust-determinant":280}],284:[function(t,e,r){var n=t("two-product"),i=t("robust-sum"),a=t("robust-scale"),o=t("robust-subtract"),s=5,l=11102230246251565e-32,c=(3+16*l)*l,u=(7+56*l)*l;function d(t,e,r,n){return function(r,i,a){var o=t(t(e(i[1],a[0]),e(-a[1],i[0])),t(e(r[1],i[0]),e(-i[1],r[0]))),s=t(e(r[1],a[0]),e(-a[1],r[0])),l=n(o,s);return l[l.length-1]}}function h(t,e,r,n){return function(i,a,o,s){var l=t(t(r(t(e(o[1],s[0]),e(-s[1],o[0])),a[2]),t(r(t(e(a[1],s[0]),e(-s[1],a[0])),-o[2]),r(t(e(a[1],o[0]),e(-o[1],a[0])),s[2]))),t(r(t(e(a[1],s[0]),e(-s[1],a[0])),i[2]),t(r(t(e(i[1],s[0]),e(-s[1],i[0])),-a[2]),r(t(e(i[1],a[0]),e(-a[1],i[0])),s[2])))),c=t(t(r(t(e(o[1],s[0]),e(-s[1],o[0])),i[2]),t(r(t(e(i[1],s[0]),e(-s[1],i[0])),-o[2]),r(t(e(i[1],o[0]),e(-o[1],i[0])),s[2]))),t(r(t(e(a[1],o[0]),e(-o[1],a[0])),i[2]),t(r(t(e(i[1],o[0]),e(-o[1],i[0])),-a[2]),r(t(e(i[1],a[0]),e(-a[1],i[0])),o[2])))),u=n(l,c);return u[u.length-1]}}function g(t,e,r,n){return function(i,a,o,s,l){var c=t(t(t(r(t(r(t(e(s[1],l[0]),e(-l[1],s[0])),o[2]),t(r(t(e(o[1],l[0]),e(-l[1],o[0])),-s[2]),r(t(e(o[1],s[0]),e(-s[1],o[0])),l[2]))),a[3]),t(r(t(r(t(e(s[1],l[0]),e(-l[1],s[0])),a[2]),t(r(t(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),r(t(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),-o[3]),r(t(r(t(e(o[1],l[0]),e(-l[1],o[0])),a[2]),t(r(t(e(a[1],l[0]),e(-l[1],a[0])),-o[2]),r(t(e(a[1],o[0]),e(-o[1],a[0])),l[2]))),s[3]))),t(r(t(r(t(e(o[1],s[0]),e(-s[1],o[0])),a[2]),t(r(t(e(a[1],s[0]),e(-s[1],a[0])),-o[2]),r(t(e(a[1],o[0]),e(-o[1],a[0])),s[2]))),-l[3]),t(r(t(r(t(e(s[1],l[0]),e(-l[1],s[0])),a[2]),t(r(t(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),r(t(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),i[3]),r(t(r(t(e(s[1],l[0]),e(-l[1],s[0])),i[2]),t(r(t(e(i[1],l[0]),e(-l[1],i[0])),-s[2]),r(t(e(i[1],s[0]),e(-s[1],i[0])),l[2]))),-a[3])))),t(t(r(t(r(t(e(a[1],l[0]),e(-l[1],a[0])),i[2]),t(r(t(e(i[1],l[0]),e(-l[1],i[0])),-a[2]),r(t(e(i[1],a[0]),e(-a[1],i[0])),l[2]))),s[3]),t(r(t(r(t(e(a[1],s[0]),e(-s[1],a[0])),i[2]),t(r(t(e(i[1],s[0]),e(-s[1],i[0])),-a[2]),r(t(e(i[1],a[0]),e(-a[1],i[0])),s[2]))),-l[3]),r(t(r(t(e(o[1],s[0]),e(-s[1],o[0])),a[2]),t(r(t(e(a[1],s[0]),e(-s[1],a[0])),-o[2]),r(t(e(a[1],o[0]),e(-o[1],a[0])),s[2]))),i[3]))),t(r(t(r(t(e(o[1],s[0]),e(-s[1],o[0])),i[2]),t(r(t(e(i[1],s[0]),e(-s[1],i[0])),-o[2]),r(t(e(i[1],o[0]),e(-o[1],i[0])),s[2]))),-a[3]),t(r(t(r(t(e(a[1],s[0]),e(-s[1],a[0])),i[2]),t(r(t(e(i[1],s[0]),e(-s[1],i[0])),-a[2]),r(t(e(i[1],a[0]),e(-a[1],i[0])),s[2]))),o[3]),r(t(r(t(e(a[1],o[0]),e(-o[1],a[0])),i[2]),t(r(t(e(i[1],o[0]),e(-o[1],i[0])),-a[2]),r(t(e(i[1],a[0]),e(-a[1],i[0])),o[2]))),-s[3]))))),u=t(t(t(r(t(r(t(e(s[1],l[0]),e(-l[1],s[0])),o[2]),t(r(t(e(o[1],l[0]),e(-l[1],o[0])),-s[2]),r(t(e(o[1],s[0]),e(-s[1],o[0])),l[2]))),i[3]),r(t(r(t(e(s[1],l[0]),e(-l[1],s[0])),i[2]),t(r(t(e(i[1],l[0]),e(-l[1],i[0])),-s[2]),r(t(e(i[1],s[0]),e(-s[1],i[0])),l[2]))),-o[3])),t(r(t(r(t(e(o[1],l[0]),e(-l[1],o[0])),i[2]),t(r(t(e(i[1],l[0]),e(-l[1],i[0])),-o[2]),r(t(e(i[1],o[0]),e(-o[1],i[0])),l[2]))),s[3]),r(t(r(t(e(o[1],s[0]),e(-s[1],o[0])),i[2]),t(r(t(e(i[1],s[0]),e(-s[1],i[0])),-o[2]),r(t(e(i[1],o[0]),e(-o[1],i[0])),s[2]))),-l[3]))),t(t(r(t(r(t(e(o[1],l[0]),e(-l[1],o[0])),a[2]),t(r(t(e(a[1],l[0]),e(-l[1],a[0])),-o[2]),r(t(e(a[1],o[0]),e(-o[1],a[0])),l[2]))),i[3]),r(t(r(t(e(o[1],l[0]),e(-l[1],o[0])),i[2]),t(r(t(e(i[1],l[0]),e(-l[1],i[0])),-o[2]),r(t(e(i[1],o[0]),e(-o[1],i[0])),l[2]))),-a[3])),t(r(t(r(t(e(a[1],l[0]),e(-l[1],a[0])),i[2]),t(r(t(e(i[1],l[0]),e(-l[1],i[0])),-a[2]),r(t(e(i[1],a[0]),e(-a[1],i[0])),l[2]))),o[3]),r(t(r(t(e(a[1],o[0]),e(-o[1],a[0])),i[2]),t(r(t(e(i[1],o[0]),e(-o[1],i[0])),-a[2]),r(t(e(i[1],a[0]),e(-a[1],i[0])),o[2]))),-l[3])))),d=n(c,u);return d[d.length-1]}}function f(t){return(3===t?d:4===t?h:g)(i,n,a,o)}var p=f(3),m=f(4),y=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,r){var n,i=(t[1]-r[1])*(e[0]-r[0]),a=(t[0]-r[0])*(e[1]-r[1]),o=i-a;if(i>0){if(a<=0)return o;n=i+a}else{if(!(i<0))return o;if(a>=0)return o;n=-(i+a)}var s=c*n;return o>=s||o<=-s?o:p(t,e,r)},function(t,e,r,n){var i=t[0]-n[0],a=e[0]-n[0],o=r[0]-n[0],s=t[1]-n[1],l=e[1]-n[1],c=r[1]-n[1],d=t[2]-n[2],h=e[2]-n[2],g=r[2]-n[2],f=a*c,p=o*l,y=o*s,b=i*c,v=i*l,x=a*s,I=d*(f-p)+h*(y-b)+g*(v-x),B=(Math.abs(f)+Math.abs(p))*Math.abs(d)+(Math.abs(y)+Math.abs(b))*Math.abs(h)+(Math.abs(v)+Math.abs(x))*Math.abs(g),C=u*B;return I>C||-I>C?I:m(t,e,r,n)}];function b(t){var e=y[t.length];return e||(e=y[t.length]=f(t.length)),e.apply(void 0,t)}function v(t,e,r,n,i,a,o){return function(e,r,s,l,c){switch(arguments.length){case 0:case 1:return 0;case 2:return n(e,r);case 3:return i(e,r,s);case 4:return a(e,r,s,l);case 5:return o(e,r,s,l,c)}for(var u=new Array(arguments.length),d=0;d<arguments.length;++d)u[d]=arguments[d];return t(u)}}function x(){for(;y.length<=s;)y.push(f(y.length));e.exports=v.apply(void 0,[b].concat(y));for(var t=0;t<=s;++t)e.exports[t]=y[t]}x()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(t,e,r){var n=t("robust-sum"),i=t("robust-scale");function a(t,e){if(1===t.length)return i(e,t[0]);if(1===e.length)return i(t,e[0]);if(0===t.length||0===e.length)return[0];var r=[0];if(t.length<e.length)for(var a=0;a<t.length;++a)r=n(r,i(e,t[a]));else for(a=0;a<e.length;++a)r=n(r,i(t,e[a]));return r}e.exports=a},{"robust-scale":286,"robust-sum":289}],286:[function(t,e,r){var n=t("two-product"),i=t("two-sum");function a(t,e){var r=t.length;if(1===r){var a=n(t[0],e);return a[0]?a:[a[1]]}var o=new Array(2*r),s=[.1,.1],l=[.1,.1],c=0;n(t[0],e,s),s[0]&&(o[c++]=s[0]);for(var u=1;u<r;++u){n(t[u],e,l);var d=s[1];i(d,l[0],s),s[0]&&(o[c++]=s[0]);var h=l[1],g=s[1],f=h+g,p=g-(f-h);s[1]=f,p&&(o[c++]=p)}return s[1]&&(o[c++]=s[1]),0===c&&(o[c++]=0),o.length=c,o}e.exports=a},{"two-product":306,"two-sum":307}],287:[function(t,e,r){e.exports=a;var n=t("robust-orientation")[3];function i(t,e,r,n){for(var i=0;i<2;++i){var a=t[i],o=e[i],s=Math.min(a,o),l=Math.max(a,o),c=r[i],u=n[i],d=Math.min(c,u);if(Math.max(c,u)<s||l<d)return!1}return!0}function a(t,e,r,a){var o=n(t,r,a),s=n(e,r,a);if(o>0&&s>0||o<0&&s<0)return!1;var l=n(r,t,e),c=n(a,t,e);return!(l>0&&c>0||l<0&&c<0)&&(0!==o||0!==s||0!==l||0!==c||i(t,e,r,a))}},{"robust-orientation":284}],288:[function(t,e,r){function n(t,e){var r=t+e,n=r-t,i=t-(r-n)+(e-n);return i?[i,r]:[r]}function i(t,e){var r=0|t.length,i=0|e.length;if(1===r&&1===i)return n(t[0],-e[0]);var a,o,s=new Array(r+i),l=0,c=0,u=0,d=Math.abs,h=t[c],g=d(h),f=-e[u],p=d(f);g<p?(o=h,(c+=1)<r&&(g=d(h=t[c]))):(o=f,(u+=1)<i&&(p=d(f=-e[u]))),c<r&&g<p||u>=i?(a=h,(c+=1)<r&&(g=d(h=t[c]))):(a=f,(u+=1)<i&&(p=d(f=-e[u])));for(var m,y,b=a+o,v=b-a,x=o-v,I=x,B=b;c<r&&u<i;)g<p?(a=h,(c+=1)<r&&(g=d(h=t[c]))):(a=f,(u+=1)<i&&(p=d(f=-e[u]))),(x=(o=I)-(v=(b=a+o)-a))&&(s[l++]=x),I=B-((m=B+b)-(y=m-B))+(b-y),B=m;for(;c<r;)(x=(o=I)-(v=(b=(a=h)+o)-a))&&(s[l++]=x),I=B-((m=B+b)-(y=m-B))+(b-y),B=m,(c+=1)<r&&(h=t[c]);for(;u<i;)(x=(o=I)-(v=(b=(a=f)+o)-a))&&(s[l++]=x),I=B-((m=B+b)-(y=m-B))+(b-y),B=m,(u+=1)<i&&(f=-e[u]);return I&&(s[l++]=I),B&&(s[l++]=B),l||(s[l++]=0),s.length=l,s}e.exports=i},{}],289:[function(t,e,r){function n(t,e){var r=t+e,n=r-t,i=t-(r-n)+(e-n);return i?[i,r]:[r]}function i(t,e){var r=0|t.length,i=0|e.length;if(1===r&&1===i)return n(t[0],e[0]);var a,o,s=new Array(r+i),l=0,c=0,u=0,d=Math.abs,h=t[c],g=d(h),f=e[u],p=d(f);g<p?(o=h,(c+=1)<r&&(g=d(h=t[c]))):(o=f,(u+=1)<i&&(p=d(f=e[u]))),c<r&&g<p||u>=i?(a=h,(c+=1)<r&&(g=d(h=t[c]))):(a=f,(u+=1)<i&&(p=d(f=e[u])));for(var m,y,b=a+o,v=b-a,x=o-v,I=x,B=b;c<r&&u<i;)g<p?(a=h,(c+=1)<r&&(g=d(h=t[c]))):(a=f,(u+=1)<i&&(p=d(f=e[u]))),(x=(o=I)-(v=(b=a+o)-a))&&(s[l++]=x),I=B-((m=B+b)-(y=m-B))+(b-y),B=m;for(;c<r;)(x=(o=I)-(v=(b=(a=h)+o)-a))&&(s[l++]=x),I=B-((m=B+b)-(y=m-B))+(b-y),B=m,(c+=1)<r&&(h=t[c]);for(;u<i;)(x=(o=I)-(v=(b=(a=f)+o)-a))&&(s[l++]=x),I=B-((m=B+b)-(y=m-B))+(b-y),B=m,(u+=1)<i&&(f=e[u]);return I&&(s[l++]=I),B&&(s[l++]=B),l||(s[l++]=0),s.length=l,s}e.exports=i},{}],290:[function(t,e,r){e.exports=a;var n=t("boundary-cells"),i=t("reduce-simplicial-complex");function a(t){return i(n(t))}},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(t,e,r){e.exports=g;var n=t("ndarray"),i=t("typedarray-pool"),a=t("ndarray-sort"),o=t("./lib/codegen");function s(t){for(var e=t.length,r=0,n=0;n<e;++n)r=0|Math.max(r,t[n].length);return r-1}function l(t,e){for(var r=t.length,n=i.mallocUint8(r),a=0;a<r;++a)n[a]=t[a]<e|0;return n}function c(t,e){for(var r=t.length,o=e*(e+1)/2*r|0,s=i.mallocUint32(2*o),l=0,c=0;c<r;++c)for(var u=t[c],d=(e=u.length,0);d<e;++d)for(var h=0;h<d;++h){var g=u[h],f=u[d];s[l++]=0|Math.min(g,f),s[l++]=0|Math.max(g,f)}a(n(s,[l/2|0,2]));var p=2;for(c=2;c<l;c+=2)s[c-2]===s[c]&&s[c-1]===s[c+1]||(s[p++]=s[c],s[p++]=s[c+1]);return n(s,[p/2|0,2])}function u(t,e,r,a){for(var o=t.data,s=t.shape[0],l=i.mallocDouble(s),c=0,u=0;u<s;++u){var d=o[2*u],h=o[2*u+1];if(r[d]!==r[h]){var g=e[d],f=e[h];o[2*c]=d,o[2*c+1]=h,l[c++]=(f-a)/(f-g)}}return t.shape[0]=c,n(l,[c])}function d(t,e){var r=i.mallocInt32(2*e),n=t.shape[0],a=t.data;r[0]=0;for(var o=0,s=0;s<n;++s){var l=a[2*s];if(l!==o){for(r[2*o+1]=s;++o<l;)r[2*o]=s,r[2*o+1]=s;r[2*o]=s}}for(r[2*o+1]=n;++o<e;)r[2*o]=r[2*o+1]=n;return r}function h(t){for(var e=0|t.shape[0],r=t.data,n=new Array(e),i=0;i<e;++i)n[i]=[r[2*i],r[2*i+1]];return n}function g(t,e,r,n){if(r=r||0,void 0===n&&(n=s(t)),0===t.length||n<1)return{cells:[],vertexIds:[],vertexWeights:[]};var a=l(e,+r),g=c(t,n),f=u(g,e,a,+r),p=d(g,0|e.length),m=o(n)(t,g.data,p,a),y=h(g),b=[].slice.call(f.data,0,f.shape[0]);return i.free(a),i.free(g.data),i.free(f.data),i.free(p),{cells:m,vertexIds:y,vertexWeights:b}}},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(t,e,r){e.exports=i;var n=[function(){function t(t,e,r,n){for(var i=t.length,a=[],o=0;o<i;++o)t[o].length;return a}return t},function(){function t(t,e,r,n){for(var i=0|Math.min(r,n),a=0|Math.max(r,n),o=t[2*i],s=t[2*i+1];o<s;){var l=o+s>>1,c=e[2*l+1];if(c===a)return l;a<c?s=l:o=l+1}return o}function e(e,r,n,i){for(var a=e.length,o=[],s=0;s<a;++s){var l=e[s];if(2===l.length){var c=(i[l[0]]<<0)+(i[l[1]]<<1);if(0===c||3===c)continue;switch(c){case 0:break;case 1:o.push([t(n,r,l[0],l[1])]);break;case 2:o.push([t(n,r,l[1],l[0])])}}}return o}return e},function(){function t(t,e,r,n){for(var i=0|Math.min(r,n),a=0|Math.max(r,n),o=t[2*i],s=t[2*i+1];o<s;){var l=o+s>>1,c=e[2*l+1];if(c===a)return l;a<c?s=l:o=l+1}return o}function e(e,r,n,i){for(var a=e.length,o=[],s=0;s<a;++s){var l=e[s],c=l.length;if(3===c){if(0==(u=(i[l[0]]<<0)+(i[l[1]]<<1)+(i[l[2]]<<2))||7===u)continue;switch(u){case 0:break;case 1:o.push([t(n,r,l[0],l[2]),t(n,r,l[0],l[1])]);break;case 2:o.push([t(n,r,l[1],l[0]),t(n,r,l[1],l[2])]);break;case 3:o.push([t(n,r,l[0],l[2]),t(n,r,l[1],l[2])]);break;case 4:o.push([t(n,r,l[2],l[1]),t(n,r,l[2],l[0])]);break;case 5:o.push([t(n,r,l[2],l[1]),t(n,r,l[0],l[1])]);break;case 6:o.push([t(n,r,l[1],l[0]),t(n,r,l[2],l[0])])}}else if(2===c){var u;if(0==(u=(i[l[0]]<<0)+(i[l[1]]<<1))||3===u)continue;switch(u){case 0:break;case 1:o.push([t(n,r,l[0],l[1])]);break;case 2:o.push([t(n,r,l[1],l[0])])}}}return o}return e},function(){function t(t,e,r,n){for(var i=0|Math.min(r,n),a=0|Math.max(r,n),o=t[2*i],s=t[2*i+1];o<s;){var l=o+s>>1,c=e[2*l+1];if(c===a)return l;a<c?s=l:o=l+1}return o}function e(e,r,n,i){for(var a=e.length,o=[],s=0;s<a;++s){var l=e[s],c=l.length;if(4===c){if(0==(u=(i[l[0]]<<0)+(i[l[1]]<<1)+(i[l[2]]<<2)+(i[l[3]]<<3))||15===u)continue;switch(u){case 0:break;case 1:o.push([t(n,r,l[0],l[1]),t(n,r,l[0],l[2]),t(n,r,l[0],l[3])]);break;case 2:o.push([t(n,r,l[1],l[2]),t(n,r,l[1],l[0]),t(n,r,l[1],l[3])]);break;case 3:o.push([t(n,r,l[1],l[2]),t(n,r,l[0],l[2]),t(n,r,l[0],l[3])],[t(n,r,l[1],l[3]),t(n,r,l[1],l[2]),t(n,r,l[0],l[3])]);break;case 4:o.push([t(n,r,l[2],l[0]),t(n,r,l[2],l[1]),t(n,r,l[2],l[3])]);break;case 5:o.push([t(n,r,l[0],l[1]),t(n,r,l[2],l[1]),t(n,r,l[0],l[3])],[t(n,r,l[2],l[1]),t(n,r,l[2],l[3]),t(n,r,l[0],l[3])]);break;case 6:o.push([t(n,r,l[2],l[0]),t(n,r,l[1],l[0]),t(n,r,l[1],l[3])],[t(n,r,l[2],l[3]),t(n,r,l[2],l[0]),t(n,r,l[1],l[3])]);break;case 7:o.push([t(n,r,l[0],l[3]),t(n,r,l[1],l[3]),t(n,r,l[2],l[3])]);break;case 8:o.push([t(n,r,l[3],l[1]),t(n,r,l[3],l[0]),t(n,r,l[3],l[2])]);break;case 9:o.push([t(n,r,l[3],l[1]),t(n,r,l[0],l[1]),t(n,r,l[0],l[2])],[t(n,r,l[3],l[2]),t(n,r,l[3],l[1]),t(n,r,l[0],l[2])]);break;case 10:o.push([t(n,r,l[1],l[0]),t(n,r,l[3],l[0]),t(n,r,l[1],l[2])],[t(n,r,l[3],l[0]),t(n,r,l[3],l[2]),t(n,r,l[1],l[2])]);break;case 11:o.push([t(n,r,l[1],l[2]),t(n,r,l[0],l[2]),t(n,r,l[3],l[2])]);break;case 12:o.push([t(n,r,l[3],l[0]),t(n,r,l[2],l[0]),t(n,r,l[2],l[1])],[t(n,r,l[3],l[1]),t(n,r,l[3],l[0]),t(n,r,l[2],l[1])]);break;case 13:o.push([t(n,r,l[0],l[1]),t(n,r,l[2],l[1]),t(n,r,l[3],l[1])]);break;case 14:o.push([t(n,r,l[2],l[0]),t(n,r,l[1],l[0]),t(n,r,l[3],l[0])])}}else if(3===c){if(0==(u=(i[l[0]]<<0)+(i[l[1]]<<1)+(i[l[2]]<<2))||7===u)continue;switch(u){case 0:break;case 1:o.push([t(n,r,l[0],l[2]),t(n,r,l[0],l[1])]);break;case 2:o.push([t(n,r,l[1],l[0]),t(n,r,l[1],l[2])]);break;case 3:o.push([t(n,r,l[0],l[2]),t(n,r,l[1],l[2])]);break;case 4:o.push([t(n,r,l[2],l[1]),t(n,r,l[2],l[0])]);break;case 5:o.push([t(n,r,l[2],l[1]),t(n,r,l[0],l[1])]);break;case 6:o.push([t(n,r,l[1],l[0]),t(n,r,l[2],l[0])])}}else if(2===c){var u;if(0==(u=(i[l[0]]<<0)+(i[l[1]]<<1))||3===u)continue;switch(u){case 0:break;case 1:o.push([t(n,r,l[0],l[1])]);break;case 2:o.push([t(n,r,l[1],l[0])])}}}return o}return e}];function i(t){return n[t]()}},{}],293:[function(t,e,r){var n=t("bit-twiddle"),i=t("union-find");function a(t){for(var e=0,r=Math.max,n=0,i=t.length;n<i;++n)e=r(e,t[n].length);return e-1}function o(t){for(var e=-1,r=Math.max,n=0,i=t.length;n<i;++n)for(var a=t[n],o=0,s=a.length;o<s;++o)e=r(e,a[o]);return e+1}function s(t){for(var e=new Array(t.length),r=0,n=t.length;r<n;++r)e[r]=t[r].slice(0);return e}function l(t,e){var r=t.length,n=t.length-e.length,i=Math.min;if(n)return n;switch(r){case 0:return 0;case 1:return t[0]-e[0];case 2:return(s=t[0]+t[1]-e[0]-e[1])||i(t[0],t[1])-i(e[0],e[1]);case 3:var a=t[0]+t[1],o=e[0]+e[1];if(s=a+t[2]-(o+e[2]))return s;var s,l=i(t[0],t[1]),c=i(e[0],e[1]);return(s=i(l,t[2])-i(c,e[2]))||i(l+t[2],a)-i(c+e[2],o);default:var u=t.slice(0);u.sort();var d=e.slice(0);d.sort();for(var h=0;h<r;++h)if(n=u[h]-d[h])return n;return 0}}function c(t,e){return l(t[0],e[0])}function u(t,e){if(e){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=[t[i],e[i]];for(n.sort(c),i=0;i<r;++i)t[i]=n[i][0],e[i]=n[i][1];return t}return t.sort(l),t}function d(t){if(0===t.length)return[];for(var e=1,r=t.length,n=1;n<r;++n){var i=t[n];if(l(i,t[n-1])){if(n===e){e++;continue}t[e++]=i}}return t.length=e,t}function h(t,e){for(var r=0,n=t.length-1,i=-1;r<=n;){var a=r+n>>1,o=l(t[a],e);o<=0?(0===o&&(i=a),r=a+1):o>0&&(n=a-1)}return i}function g(t,e){for(var r=new Array(t.length),i=0,a=r.length;i<a;++i)r[i]=[];for(var o=[],s=(i=0,e.length);i<s;++i)for(var c=e[i],u=c.length,d=1,g=1<<u;d<g;++d){o.length=n.popCount(d);for(var f=0,p=0;p<u;++p)d&1<<p&&(o[f++]=c[p]);var m=h(t,o);if(!(m<0))for(;r[m++].push(i),!(m>=t.length||0!==l(t[m],o)););}return r}function f(t,e){if(!e)return g(d(m(t,0)),t);for(var r=new Array(e),n=0;n<e;++n)r[n]=[];n=0;for(var i=t.length;n<i;++n)for(var a=t[n],o=0,s=a.length;o<s;++o)r[a[o]].push(n);return r}function p(t){for(var e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],a=0|i.length,o=1,s=1<<a;o<s;++o){for(var l=[],c=0;c<a;++c)o>>>c&1&&l.push(i[c]);e.push(l)}return u(e)}function m(t,e){if(e<0)return[];for(var r=[],i=(1<<e+1)-1,a=0;a<t.length;++a)for(var o=t[a],s=i;s<1<<o.length;s=n.nextCombination(s)){for(var l=new Array(e+1),c=0,d=0;d<o.length;++d)s&1<<d&&(l[c++]=o[d]);r.push(l)}return u(r)}function y(t){for(var e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],a=0,o=i.length;a<o;++a){for(var s=new Array(i.length-1),l=0,c=0;l<o;++l)l!==a&&(s[c++]=i[l]);e.push(s)}return u(e)}function b(t,e){for(var r=new i(e),n=0;n<t.length;++n)for(var a=t[n],o=0;o<a.length;++o)for(var s=o+1;s<a.length;++s)r.link(a[o],a[s]);var l=[],c=r.ranks;for(n=0;n<c.length;++n)c[n]=-1;for(n=0;n<t.length;++n){var u=r.find(t[n][0]);c[u]<0?(c[u]=l.length,l.push([t[n].slice(0)])):l[c[u]].push(t[n].slice(0))}return l}function v(t){for(var e=d(u(m(t,0))),r=new i(e.length),n=0;n<t.length;++n)for(var a=t[n],o=0;o<a.length;++o)for(var s=h(e,[a[o]]),l=o+1;l<a.length;++l)r.link(s,h(e,[a[l]]));var c=[],g=r.ranks;for(n=0;n<g.length;++n)g[n]=-1;for(n=0;n<t.length;++n){var f=r.find(h(e,[t[n][0]]));g[f]<0?(g[f]=c.length,c.push([t[n].slice(0)])):c[g[f]].push(t[n].slice(0))}return c}function x(t,e){return e?b(t,e):v(t)}r.dimension=a,r.countVertices=o,r.cloneCells=s,r.compareCells=l,r.normalize=u,r.unique=d,r.findCell=h,r.incidence=g,r.dual=f,r.explode=p,r.skeleton=m,r.boundary=y,r.connectedComponents=x},{"bit-twiddle":32,"union-find":309}],294:[function(t,e,r){arguments[4][32][0].apply(r,arguments)},{dup:32}],295:[function(t,e,r){arguments[4][293][0].apply(r,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(t,e,r){function n(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}e.exports=n,n.prototype.length=function(){return this.roots.length},n.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},n.prototype.find=function(t){for(var e=this.roots;e[t]!==t;){var r=e[t];e[t]=e[r],t=r}return t},n.prototype.link=function(t,e){var r=this.find(t),n=this.find(e);if(r!==n){var i=this.ranks,a=this.roots,o=i[r],s=i[n];o<s?a[r]=n:s<o?a[n]=r:(a[n]=r,++i[r])}}},{}],297:[function(t,e,r){e.exports=o;var n=t("robust-orientation"),i=t("simplicial-complex");function a(t,e,r){return Math.abs(n(t,e,r))/Math.sqrt(Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2))}function o(t,e,r){for(var n=e.length,o=t.length,s=new Array(n),l=new Array(n),c=new Array(n),u=new Array(n),d=0;d<n;++d)s[d]=l[d]=-1,c[d]=1/0,u[d]=!1;for(d=0;d<o;++d){var h=t[d];if(2!==h.length)throw new Error("Input must be a graph");var g=h[1],f=h[0];-1!==l[f]?l[f]=-2:l[f]=g,-1!==s[g]?s[g]=-2:s[g]=f}function p(t){if(u[t])return 1/0;var r=s[t],n=l[t];return r<0||n<0?1/0:a(e[t],e[r],e[n])}function m(t,e){var r=F[t],n=F[e];F[t]=n,F[e]=r,A[r]=e,A[n]=t}function y(t){return c[F[t]]}function b(t){return 1&t?t-1>>1:(t>>1)-1}function v(t){for(var e=y(t);;){var r=e,n=2*t+1,i=2*(t+1),a=t;if(n<Q){var o=y(n);o<r&&(a=n,r=o)}if(i<Q&&y(i)<r&&(a=i),a===t)return t;m(t,a),t=a}}function x(t){for(var e=y(t);t>0;){var r=b(t);if(!(r>=0&&e<y(r)))return t;m(t,r),t=r}}function I(){if(Q>0){var t=F[0];return m(0,Q-1),Q-=1,v(0),t}return-1}function B(t,e){var r=F[t];return c[r]===e?t:(c[r]=-1/0,x(t),I(),c[r]=e,x((Q+=1)-1))}function C(t){if(!u[t]){u[t]=!0;var e=s[t],r=l[t];s[r]>=0&&(s[r]=e),l[e]>=0&&(l[e]=r),A[e]>=0&&B(A[e],p(e)),A[r]>=0&&B(A[r],p(r))}}var F=[],A=new Array(n);for(d=0;d<n;++d)(c[d]=p(d))<1/0?(A[d]=F.length,F.push(d)):A[d]=-1;var Q=F.length;for(d=Q>>1;d>=0;--d)v(d);for(;;){var _=I();if(_<0||c[_]>r)break;C(_)}var w=[];for(d=0;d<n;++d)u[d]||(A[d]=w.length,w.push(e[d].slice()));function U(t,e){if(t[e]<0)return e;var r=e,n=e;do{var i=t[n];if(!u[n]||i<0||i===n)break;if(i=t[n=i],!u[n]||i<0||i===n)break;n=i,r=t[r]}while(r!==n);for(var a=e;a!==n;a=t[a])t[a]=n;return n}w.length;var S=[];return t.forEach((function(t){var e=U(s,t[0]),r=U(l,t[1]);if(e>=0&&r>=0&&e!==r){var n=A[e],i=A[r];n!==i&&S.push([n,i])}})),i.unique(i.normalize(S)),{positions:w,edges:S}}},{"robust-orientation":284,"simplicial-complex":295}],298:[function(t,e,r){e.exports=a;var n=t("robust-orientation");function i(t,e){var r,i,a,o;if(e[0][0]<e[1][0])r=e[0],i=e[1];else{if(!(e[0][0]>e[1][0])){var s=Math.min(t[0][1],t[1][1]),l=Math.max(t[0][1],t[1][1]),c=Math.min(e[0][1],e[1][1]),u=Math.max(e[0][1],e[1][1]);return l<c?l-c:s>u?s-u:l-u}r=e[1],i=e[0]}t[0][1]<t[1][1]?(a=t[0],o=t[1]):(a=t[1],o=t[0]);var d=n(i,r,a);return d||(d=n(i,r,o))||o-i}function a(t,e){var r,a,o,s;if(e[0][0]<e[1][0])r=e[0],a=e[1];else{if(!(e[0][0]>e[1][0]))return i(e,t);r=e[1],a=e[0]}if(t[0][0]<t[1][0])o=t[0],s=t[1];else{if(!(t[0][0]>t[1][0]))return-i(t,e);o=t[1],s=t[0]}var l=n(r,a,s),c=n(r,a,o);if(l<0){if(c<=0)return l}else if(l>0){if(c>=0)return l}else if(c)return c;if(l=n(s,o,a),c=n(s,o,r),l<0){if(c<=0)return l}else if(l>0){if(c>=0)return l}else if(c)return c;return a[0]-s[0]}},{"robust-orientation":284}],299:[function(t,e,r){e.exports=h;var n=t("binary-search-bounds"),i=t("functional-red-black-tree"),a=t("robust-orientation"),o=t("./lib/order-segments");function s(t,e,r){this.slabs=t,this.coordinates=e,this.horizontal=r}function l(t,e){return t.y-e}function c(t,e){for(var r=null;t;){var n,i,o=t.key;o[0][0]<o[1][0]?(n=o[0],i=o[1]):(n=o[1],i=o[0]);var s=a(n,i,e);if(s<0)t=t.left;else if(s>0)if(e[0]!==o[1][0])r=t,t=t.right;else{if(l=c(t.right,e))return l;t=t.left}else{if(e[0]!==o[1][0])return t;var l;if(l=c(t.right,e))return l;t=t.left}}return r}function u(t,e,r,n){this.y=t,this.index=e,this.start=r,this.closed=n}function d(t,e,r,n){this.x=t,this.segment=e,this.create=r,this.index=n}function h(t){for(var e=t.length,r=2*e,n=new Array(r),a=0;a<e;++a){var l=t[a],c=l[0][0]<l[1][0];n[2*a]=new d(l[0][0],l,c,a),n[2*a+1]=new d(l[1][0],l,!c,a)}n.sort((function(t,e){var r=t.x-e.x;return r||(r=t.create-e.create)||Math.min(t.segment[0][1],t.segment[1][1])-Math.min(e.segment[0][1],e.segment[1][1])}));var h=i(o),g=[],f=[],p=[];for(a=0;a<r;){for(var m=n[a].x,y=[];a<r;){var b=n[a];if(b.x!==m)break;a+=1,b.segment[0][0]===b.x&&b.segment[1][0]===b.x?b.create&&(b.segment[0][1]<b.segment[1][1]?(y.push(new u(b.segment[0][1],b.index,!0,!0)),y.push(new u(b.segment[1][1],b.index,!1,!1))):(y.push(new u(b.segment[1][1],b.index,!0,!1)),y.push(new u(b.segment[0][1],b.index,!1,!0)))):h=b.create?h.insert(b.segment,b.index):h.remove(b.segment)}g.push(h.root),f.push(m),p.push(y)}return new s(g,f,p)}s.prototype.castUp=function(t){var e=n.le(this.coordinates,t[0]);if(e<0)return-1;this.slabs[e];var r=c(this.slabs[e],t),i=-1;if(r&&(i=r.value),this.coordinates[e]===t[0]){var s=null;if(r&&(s=r.key),e>0){var u=c(this.slabs[e-1],t);u&&(s?o(u.key,s)>0&&(s=u.key,i=u.value):(i=u.value,s=u.key))}var d=this.horizontal[e];if(d.length>0){var h=n.ge(d,t[1],l);if(h<d.length){var g=d[h];if(t[1]===g.y){if(g.closed)return g.index;for(;h<d.length-1&&d[h+1].y===t[1];)if((g=d[h+=1]).closed)return g.index;if(g.y===t[1]&&!g.start){if((h+=1)>=d.length)return i;g=d[h]}}if(g.start)if(s){var f=a(s[0],s[1],[t[0],g.y]);s[0][0]>s[1][0]&&(f=-f),f>0&&(i=g.index)}else i=g.index;else g.y!==t[1]&&(i=g.index)}}}return i}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(t,e,r){var n=t("robust-dot-product"),i=t("robust-sum");function a(t,e){var r=i(n(t,e),[e[e.length-1]]);return r[r.length-1]}function o(t,e,r,n){var i=-e/(n-e);i<0?i=0:i>1&&(i=1);for(var a=1-i,o=t.length,s=new Array(o),l=0;l<o;++l)s[l]=i*t[l]+a*r[l];return s}function s(t,e){for(var r=[],n=[],i=a(t[t.length-1],e),s=t[t.length-1],l=t[0],c=0;c<t.length;++c,s=l){var u=a(l=t[c],e);if(i<0&&u>0||i>0&&u<0){var d=o(s,u,l,i);r.push(d),n.push(d.slice())}u<0?n.push(l.slice()):u>0?r.push(l.slice()):(r.push(l.slice()),n.push(l.slice())),i=u}return{positive:r,negative:n}}function l(t,e){for(var r=[],n=a(t[t.length-1],e),i=t[t.length-1],s=t[0],l=0;l<t.length;++l,i=s){var c=a(s=t[l],e);(n<0&&c>0||n>0&&c<0)&&r.push(o(i,c,s,n)),c>=0&&r.push(s.slice()),n=c}return r}function c(t,e){for(var r=[],n=a(t[t.length-1],e),i=t[t.length-1],s=t[0],l=0;l<t.length;++l,i=s){var c=a(s=t[l],e);(n<0&&c>0||n>0&&c<0)&&r.push(o(i,c,s,n)),c<=0&&r.push(s.slice()),n=c}return r}e.exports=s,e.exports.positive=l,e.exports.negative=c},{"robust-dot-product":281,"robust-sum":289}],301:[function(t,e,r){!function(){var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function e(t){return i(o(t),arguments)}function n(t,r){return e.apply(null,[t].concat(r||[]))}function i(r,n){var i,a,o,s,l,c,u,d,h,g=1,f=r.length,p="";for(a=0;a<f;a++)if("string"==typeof r[a])p+=r[a];else if("object"==typeof r[a]){if((s=r[a]).keys)for(i=n[g],o=0;o<s.keys.length;o++){if(null==i)throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[o],s.keys[o-1]));i=i[s.keys[o]]}else i=s.param_no?n[s.param_no]:n[g++];if(t.not_type.test(s.type)&&t.not_primitive.test(s.type)&&i instanceof Function&&(i=i()),t.numeric_arg.test(s.type)&&"number"!=typeof i&&isNaN(i))throw new TypeError(e("[sprintf] expecting number but found %T",i));switch(t.number.test(s.type)&&(d=i>=0),s.type){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,s.width?parseInt(s.width):0);break;case"e":i=s.precision?parseFloat(i).toExponential(s.precision):parseFloat(i).toExponential();break;case"f":i=s.precision?parseFloat(i).toFixed(s.precision):parseFloat(i);break;case"g":i=s.precision?String(Number(i.toPrecision(s.precision))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=s.precision?i.substring(0,s.precision):i;break;case"t":i=String(!!i),i=s.precision?i.substring(0,s.precision):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=s.precision?i.substring(0,s.precision):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=s.precision?i.substring(0,s.precision):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase()}t.json.test(s.type)?p+=i:(!t.number.test(s.type)||d&&!s.sign?h="":(h=d?"+":"-",i=i.toString().replace(t.sign,"")),c=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",u=s.width-(h+i).length,l=s.width&&u>0?c.repeat(u):"",p+=s.align?h+i+l:"0"===c?h+l+i:l+h+i)}return p}var a=Object.create(null);function o(e){if(a[e])return a[e];for(var r,n=e,i=[],o=0;n;){if(null!==(r=t.text.exec(n)))i.push(r[0]);else if(null!==(r=t.modulo.exec(n)))i.push("%");else{if(null===(r=t.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(r[2]){o|=1;var s=[],l=r[2],c=[];if(null===(c=t.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(c[1]);""!==(l=l.substring(c[0].length));)if(null!==(c=t.key_access.exec(l)))s.push(c[1]);else{if(null===(c=t.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(c[1])}r[2]=s}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i.push({placeholder:r[0],param_no:r[1],keys:r[2],sign:r[3],pad_char:r[4],align:r[5],width:r[6],precision:r[7],type:r[8]})}n=n.substring(r[0].length)}return a[e]=i}void 0!==r&&(r.sprintf=e,r.vsprintf=n),"undefined"!=typeof window&&(window.sprintf=e,window.vsprintf=n)}()},{}],302:[function(t,e,r){e.exports=c;var n=t("ndarray-extract-contour"),i=t("zero-crossings"),a={"2d":function(t,e,r){var n=t({order:e,scalarArguments:3,getters:"generic"===r?[0]:void 0,phase:function(t,e,r,n){return t>n|0},vertex:function(t,e,r,n,i,a,o,s,l,c,u,d,h){var g=(o<<0)+(s<<1)+(l<<2)+(c<<3)|0;if(0!==g&&15!==g)switch(g){case 0:case 15:u.push([t-.5,e-.5]);break;case 1:u.push([t-.25-.25*(n+r-2*h)/(r-n),e-.25-.25*(i+r-2*h)/(r-i)]);break;case 2:u.push([t-.75-.25*(-n-r+2*h)/(n-r),e-.25-.25*(a+n-2*h)/(n-a)]);break;case 3:u.push([t-.5,e-.5-.5*(i+r+a+n-4*h)/(r-i+n-a)]);break;case 4:u.push([t-.25-.25*(a+i-2*h)/(i-a),e-.75-.25*(-i-r+2*h)/(i-r)]);break;case 5:u.push([t-.5-.5*(n+r+a+i-4*h)/(r-n+i-a),e-.5]);break;case 6:u.push([t-.5-.25*(-n-r+a+i)/(n-r+i-a),e-.5-.25*(-i-r+a+n)/(i-r+n-a)]);break;case 7:u.push([t-.75-.25*(a+i-2*h)/(i-a),e-.75-.25*(a+n-2*h)/(n-a)]);break;case 8:u.push([t-.75-.25*(-a-i+2*h)/(a-i),e-.75-.25*(-a-n+2*h)/(a-n)]);break;case 9:u.push([t-.5-.25*(n+r+-a-i)/(r-n+a-i),e-.5-.25*(i+r+-a-n)/(r-i+a-n)]);break;case 10:u.push([t-.5-.5*(-n-r-a-i+4*h)/(n-r+a-i),e-.5]);break;case 11:u.push([t-.25-.25*(-a-i+2*h)/(a-i),e-.75-.25*(i+r-2*h)/(r-i)]);break;case 12:u.push([t-.5,e-.5-.5*(-i-r-a-n+4*h)/(i-r+a-n)]);break;case 13:u.push([t-.75-.25*(n+r-2*h)/(r-n),e-.25-.25*(-a-n+2*h)/(a-n)]);break;case 14:u.push([t-.25-.25*(-n-r+2*h)/(n-r),e-.25-.25*(-i-r+2*h)/(i-r)])}},cell:function(t,e,r,n,i,a,o,s,l){i?s.push([t,e]):s.push([e,t])}});return function(t,e){var r=[],i=[];return n(t,r,i,e),{positions:r,cells:i}}}};function o(t,e){var r=t.length+"d",i=a[r];if(i)return i(n,t,e)}function s(t,e){for(var r=i(t,e),n=r.length,a=new Array(n),o=new Array(n),s=0;s<n;++s)a[s]=[r[s]],o[s]=[s];return{positions:a,cells:o}}var l={};function c(t,e){if(t.dimension<=0)return{positions:[],cells:[]};if(1===t.dimension)return s(t,e);var r=t.order.join()+"-"+t.dtype,n=l[r];return e=+e||0,n||(n=l[r]=o(t.order,t.dtype)),n(t,e)}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(t,e,r){(function(r){(function(){e.exports=s;var n=t("vectorize-text"),i=window||r.global||{},a=i.__TEXT_CACHE||{};function o(t){for(var e=t.cells,r=t.positions,n=new Float32Array(6*e.length),i=0,a=0,o=0;o<e.length;++o)for(var s=e[o],l=0;l<3;++l){var c=r[s[l]];n[i++]=c[0],n[i++]=c[1]+1.4,a=Math.max(c[0],a)}return{data:n,shape:a}}function s(t,e,r){r=r||{};var i=a[t];i||(i=a[t]={" ":{data:new Float32Array(0),shape:.2}});var l=i[e];if(!l)if(e.length<=1||!/\d/.test(e))l=i[e]=o(n(e,{triangles:!0,font:t,textAlign:r.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var c=e.split(/(\d|\s)/),u=new Array(c.length),d=0,h=0,g=0;g<c.length;++g)u[g]=s(t,c[g]),d+=u[g].data.length,h+=u[g].shape,g>0&&(h+=.02);var f=new Float32Array(d),p=0,m=-.5*h;for(g=0;g<u.length;++g){for(var y=u[g].data,b=0;b<y.length;b+=2)f[p++]=y[b]+m,f[p++]=y[b+1];m+=u[g].shape+.02}l=i[e]={data:f,shape:h}}return l}i.__TEXT_CACHE={}}).call(this)}).call(this,t("_process"))},{_process:5,"vectorize-text":311}],304:[function(t,e,r){var n=t("parse-unit");e.exports=s;var i=96;function a(t,e){var r=n(getComputedStyle(t).getPropertyValue(e));return r[0]*s(r[1],t)}function o(t,e){var r=document.createElement("div");r.style["font-size"]="128"+t,e.appendChild(r);var n=a(r,"font-size")/128;return e.removeChild(r),n}function s(t,e){switch(e=e||document.body,t=(t||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),t){case"%":return e.clientHeight/100;case"ch":case"ex":return o(t,e);case"em":return a(e,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return i;case"cm":return i/2.54;case"mm":return i/25.4;case"pt":return i/72;case"pc":return i/6}return 1}},{"parse-unit":265}],305:[function(t,e,r){e.exports=p;var n=t("filtered-vector"),i=t("gl-mat4/invert"),a=t("gl-mat4/rotate"),o=t("gl-vec3/cross"),s=t("gl-vec3/normalize"),l=t("gl-vec3/dot");function c(t,e,r){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(r,2))}function u(t){return Math.min(1,Math.max(-1,t))}function d(t){var e=Math.abs(t[0]),r=Math.abs(t[1]),n=Math.abs(t[2]),i=[0,0,0];e>Math.max(r,n)?i[2]=1:r>Math.max(e,n)?i[0]=1:i[1]=1;for(var a=0,o=0,l=0;l<3;++l)a+=t[l]*t[l],o+=i[l]*t[l];for(l=0;l<3;++l)i[l]-=o/a*t[l];return s(i,i),i}function h(t,e,r,i,a,o,s,l){this.center=n(r),this.up=n(i),this.right=n(a),this.radius=n([o]),this.angle=n([s,l]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(t,e),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var c=0;c<16;++c)this.computedMatrix[c]=.5;this.recalcMatrix(0)}var g=h.prototype;g.setDistanceLimits=function(t,e){t=t>0?Math.log(t):-1/0,e=e>0?Math.log(e):1/0,e=Math.max(e,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},g.getDistanceLimits=function(t){var e=this.radius.bounds[0];return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},g.recalcMatrix=function(t){this.center.curve(t),this.up.curve(t),this.right.curve(t),this.radius.curve(t),this.angle.curve(t);for(var e=this.computedUp,r=this.computedRight,n=0,i=0,a=0;a<3;++a)i+=e[a]*r[a],n+=e[a]*e[a];var l=Math.sqrt(n),u=0;for(a=0;a<3;++a)r[a]-=e[a]*i/n,u+=r[a]*r[a],e[a]/=l;var d=Math.sqrt(u);for(a=0;a<3;++a)r[a]/=d;var h=this.computedToward;o(h,e,r),s(h,h);var g=Math.exp(this.computedRadius[0]),f=this.computedAngle[0],p=this.computedAngle[1],m=Math.cos(f),y=Math.sin(f),b=Math.cos(p),v=Math.sin(p),x=this.computedCenter,I=m*b,B=y*b,C=v,F=-m*v,A=-y*v,Q=b,_=this.computedEye,w=this.computedMatrix;for(a=0;a<3;++a){var U=I*r[a]+B*h[a]+C*e[a];w[4*a+1]=F*r[a]+A*h[a]+Q*e[a],w[4*a+2]=U,w[4*a+3]=0}var S=w[1],E=w[5],L=w[9],T=w[2],R=w[6],k=w[10],G=E*k-L*R,N=L*T-S*k,M=S*R-E*T,D=c(G,N,M);for(G/=D,N/=D,M/=D,w[0]=G,w[4]=N,w[8]=M,a=0;a<3;++a)_[a]=x[a]+w[2+4*a]*g;for(a=0;a<3;++a){u=0;for(var X=0;X<3;++X)u+=w[a+4*X]*_[X];w[12+a]=-u}w[15]=1},g.getMatrix=function(t,e){this.recalcMatrix(t);var r=this.computedMatrix;if(e){for(var n=0;n<16;++n)e[n]=r[n];return e}return r};var f=[0,0,0];function p(t){var e=(t=t||{}).center||[0,0,0],r=t.up||[0,1,0],n=t.right||d(r),i=t.radius||1,a=t.theta||0,u=t.phi||0;if(e=[].slice.call(e,0,3),r=[].slice.call(r,0,3),s(r,r),n=[].slice.call(n,0,3),s(n,n),"eye"in t){var g=t.eye,f=[g[0]-e[0],g[1]-e[1],g[2]-e[2]];o(n,f,r),c(n[0],n[1],n[2])<1e-6?n=d(r):s(n,n),i=c(f[0],f[1],f[2]);var p=l(r,f)/i,m=l(n,f)/i;u=Math.acos(p),a=Math.acos(m)}return i=Math.log(i),new h(t.zoomMin,t.zoomMax,e,r,n,i,a,u)}g.rotate=function(t,e,r,n){if(this.angle.move(t,e,r),n){this.recalcMatrix(t);var i=this.computedMatrix;f[0]=i[2],f[1]=i[6],f[2]=i[10];for(var o=this.computedUp,s=this.computedRight,l=this.computedToward,c=0;c<3;++c)i[4*c]=o[c],i[4*c+1]=s[c],i[4*c+2]=l[c];for(a(i,i,n,f),c=0;c<3;++c)o[c]=i[4*c],s[c]=i[4*c+1];this.up.set(t,o[0],o[1],o[2]),this.right.set(t,s[0],s[1],s[2])}},g.pan=function(t,e,r,n){e=e||0,r=r||0,n=n||0,this.recalcMatrix(t);var i=this.computedMatrix;Math.exp(this.computedRadius[0]);var a=i[1],o=i[5],s=i[9],l=c(a,o,s);a/=l,o/=l,s/=l;var u=i[0],d=i[4],h=i[8],g=u*a+d*o+h*s,f=c(u-=a*g,d-=o*g,h-=s*g),p=(u/=f)*e+a*r,m=(d/=f)*e+o*r,y=(h/=f)*e+s*r;this.center.move(t,p,m,y);var b=Math.exp(this.computedRadius[0]);b=Math.max(1e-4,b+n),this.radius.set(t,Math.log(b))},g.translate=function(t,e,r,n){this.center.move(t,e||0,r||0,n||0)},g.setMatrix=function(t,e,r,n){var a=1;"number"==typeof r&&(a=0|r),(a<0||a>3)&&(a=1);var o=(a+2)%3;e||(this.recalcMatrix(t),e=this.computedMatrix);var s=e[a],l=e[a+4],d=e[a+8];if(n){var h=Math.abs(s),g=Math.abs(l),f=Math.abs(d),p=Math.max(h,g,f);h===p?(s=s<0?-1:1,l=d=0):f===p?(d=d<0?-1:1,s=l=0):(l=l<0?-1:1,s=d=0)}else{var m=c(s,l,d);s/=m,l/=m,d/=m}var y,b,v=e[o],x=e[o+4],I=e[o+8],B=v*s+x*l+I*d,C=c(v-=s*B,x-=l*B,I-=d*B),F=l*(I/=C)-d*(x/=C),A=d*(v/=C)-s*I,Q=s*x-l*v,_=c(F,A,Q);if(F/=_,A/=_,Q/=_,this.center.jump(t,O,$,H),this.radius.idle(t),this.up.jump(t,s,l,d),this.right.jump(t,v,x,I),2===a){var w=e[1],U=e[5],S=e[9],E=w*v+U*x+S*I,L=w*F+U*A+S*Q;y=G<0?-Math.PI/2:Math.PI/2,b=Math.atan2(L,E)}else{var T=e[2],R=e[6],k=e[10],G=T*s+R*l+k*d,N=T*v+R*x+k*I,M=T*F+R*A+k*Q;y=Math.asin(u(G)),b=Math.atan2(M,N)}this.angle.jump(t,b,y),this.recalcMatrix(t);var D=e[2],X=e[6],V=e[10],W=this.computedMatrix;i(W,e);var Z=W[15],O=W[12]/Z,$=W[13]/Z,H=W[14]/Z,Y=Math.exp(this.computedRadius[0]);this.center.jump(t,O-D*Y,$-X*Y,H-V*Y)},g.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},g.idle=function(t){this.center.idle(t),this.up.idle(t),this.right.idle(t),this.radius.idle(t),this.angle.idle(t)},g.flush=function(t){this.center.flush(t),this.up.flush(t),this.right.flush(t),this.radius.flush(t),this.angle.flush(t)},g.setDistance=function(t,e){e>0&&this.radius.set(t,Math.log(e))},g.lookAt=function(t,e,r,n){this.recalcMatrix(t),e=e||this.computedEye,r=r||this.computedCenter;var i=(n=n||this.computedUp)[0],a=n[1],o=n[2],s=c(i,a,o);if(!(s<1e-6)){i/=s,a/=s,o/=s;var l=e[0]-r[0],d=e[1]-r[1],h=e[2]-r[2],g=c(l,d,h);if(!(g<1e-6)){l/=g,d/=g,h/=g;var f=this.computedRight,p=f[0],m=f[1],y=f[2],b=i*p+a*m+o*y,v=c(p-=b*i,m-=b*a,y-=b*o);if(!(v<.01&&(v=c(p=a*h-o*d,m=o*l-i*h,y=i*d-a*l))<1e-6)){p/=v,m/=v,y/=v,this.up.set(t,i,a,o),this.right.set(t,p,m,y),this.center.set(t,r[0],r[1],r[2]),this.radius.set(t,Math.log(g));var x=a*y-o*m,I=o*p-i*y,B=i*m-a*p,C=c(x,I,B),F=i*l+a*d+o*h,A=p*l+m*d+y*h,Q=(x/=C)*l+(I/=C)*d+(B/=C)*h,_=Math.asin(u(F)),w=Math.atan2(Q,A),U=this.angle._state,S=U[U.length-1],E=U[U.length-2];S%=2*Math.PI;var L=Math.abs(S+2*Math.PI-w),T=Math.abs(S-w),R=Math.abs(S-2*Math.PI-w);L<T&&(S+=2*Math.PI),R<T&&(S-=2*Math.PI),this.angle.jump(this.angle.lastT(),S,E),this.angle.set(t,w,_)}}}}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(t,e,r){e.exports=i;var n=+(Math.pow(2,27)+1);function i(t,e,r){var i=t*e,a=n*t,o=a-(a-t),s=t-o,l=n*e,c=l-(l-e),u=e-c,d=s*u-(i-o*c-s*c-o*u);return r?(r[0]=d,r[1]=i,r):[d,i]}},{}],307:[function(t,e,r){function n(t,e,r){var n=t+e,i=n-t,a=e-i,o=t-(n-i);return r?(r[0]=o+a,r[1]=n,r):[o+a,n]}e.exports=n},{}],308:[function(t,e,r){(function(e){(function(){var n=t("bit-twiddle"),i=t("dup"),a=t("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var o="undefined"!=typeof Uint8ClampedArray,s="undefined"!=typeof BigUint64Array,l="undefined"!=typeof BigInt64Array,c=e.__TYPEDARRAY_POOL;c.UINT8C||(c.UINT8C=i([32,0])),c.BIGUINT64||(c.BIGUINT64=i([32,0])),c.BIGINT64||(c.BIGINT64=i([32,0])),c.BUFFER||(c.BUFFER=i([32,0]));var u=c.DATA,d=c.BUFFER;function h(t){if(t){var e=t.length||t.byteLength,r=n.log2(e);u[r].push(t)}}function g(t){h(t.buffer)}function f(t){t=n.nextPow2(t);var e=n.log2(t),r=u[e];return r.length>0?r.pop():new ArrayBuffer(t)}function p(t){return new Uint8Array(f(t),0,t)}function m(t){return new Uint16Array(f(2*t),0,t)}function y(t){return new Uint32Array(f(4*t),0,t)}function b(t){return new Int8Array(f(t),0,t)}function v(t){return new Int16Array(f(2*t),0,t)}function x(t){return new Int32Array(f(4*t),0,t)}function I(t){return new Float32Array(f(4*t),0,t)}function B(t){return new Float64Array(f(8*t),0,t)}function C(t){return o?new Uint8ClampedArray(f(t),0,t):p(t)}function F(t){return s?new BigUint64Array(f(8*t),0,t):null}function A(t){return l?new BigInt64Array(f(8*t),0,t):null}function Q(t){return new DataView(f(t),0,t)}function _(t){t=n.nextPow2(t);var e=n.log2(t),r=d[e];return r.length>0?r.pop():new a(t)}r.free=function(t){if(a.isBuffer(t))d[n.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var e=t.length||t.byteLength,r=0|n.log2(e);u[r].push(t)}},r.freeUint8=r.freeUint16=r.freeUint32=r.freeBigUint64=r.freeInt8=r.freeInt16=r.freeInt32=r.freeBigInt64=r.freeFloat32=r.freeFloat=r.freeFloat64=r.freeDouble=r.freeUint8Clamped=r.freeDataView=g,r.freeArrayBuffer=h,r.freeBuffer=function(t){d[n.log2(t.length)].push(t)},r.malloc=function(t,e){if(void 0===e||"arraybuffer"===e)return f(t);switch(e){case"uint8":return p(t);case"uint16":return m(t);case"uint32":return y(t);case"int8":return b(t);case"int16":return v(t);case"int32":return x(t);case"float":case"float32":return I(t);case"double":case"float64":return B(t);case"uint8_clamped":return C(t);case"bigint64":return A(t);case"biguint64":return F(t);case"buffer":return _(t);case"data":case"dataview":return Q(t);default:return null}return null},r.mallocArrayBuffer=f,r.mallocUint8=p,r.mallocUint16=m,r.mallocUint32=y,r.mallocInt8=b,r.mallocInt16=v,r.mallocInt32=x,r.mallocFloat32=r.mallocFloat=I,r.mallocFloat64=r.mallocDouble=B,r.mallocUint8Clamped=C,r.mallocBigUint64=F,r.mallocBigInt64=A,r.mallocDataView=Q,r.mallocBuffer=_,r.clearCache=function(){for(var t=0;t<32;++t)c.UINT8[t].length=0,c.UINT16[t].length=0,c.UINT32[t].length=0,c.INT8[t].length=0,c.INT16[t].length=0,c.INT32[t].length=0,c.FLOAT[t].length=0,c.DOUBLE[t].length=0,c.BIGUINT64[t].length=0,c.BIGINT64[t].length=0,c.UINT8C[t].length=0,u[t].length=0,d[t].length=0}}).call(this)}).call(this,void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(t,e,r){function n(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}e.exports=n;var i=n.prototype;Object.defineProperty(i,"length",{get:function(){return this.roots.length}}),i.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},i.find=function(t){for(var e=t,r=this.roots;r[t]!==t;)t=r[t];for(;r[e]!==t;){var n=r[e];r[e]=t,e=n}return t},i.link=function(t,e){var r=this.find(t),n=this.find(e);if(r!==n){var i=this.ranks,a=this.roots,o=i[r],s=i[n];o<s?a[r]=n:s<o?a[n]=r:(a[n]=r,++i[r])}}},{}],310:[function(t,e,r){function n(t,e){for(var r=1,n=t.length,i=t[0],a=t[0],o=1;o<n;++o)if(a=i,e(i=t[o],a)){if(o===r){r++;continue}t[r++]=i}return t.length=r,t}function i(t){for(var e=1,r=t.length,n=t[0],i=t[0],a=1;a<r;++a,i=n)if(i=n,(n=t[a])!==i){if(a===e){e++;continue}t[e++]=n}return t.length=e,t}function a(t,e,r){return 0===t.length?t:e?(r||t.sort(e),n(t,e)):(r||t.sort(),i(t))}e.exports=a},{}],311:[function(t,e,r){e.exports=o;var n=t("./lib/vtext"),i=null,a=null;function o(t,e){return"object"==typeof e&&null!==e||(e={}),n(t,e.canvas||i,e.context||a,e)}"undefined"!=typeof document&&((i=document.createElement("canvas")).width=8192,i.height=1024,a=i.getContext("2d"))},{"./lib/vtext":312}],312:[function(t,e,r){e.exports=A,e.exports.processPixels=F;var n=t("surface-nets"),i=t("ndarray"),a=t("simplify-planar-graph"),o=t("clean-pslg"),s=t("cdt2d"),l=t("planar-graph-to-polyline"),c="b",u="b|",d="i",h="i|",g="sup",f="+",p="+1",m="sub",y="-",b="-1";function v(t,e,r,n){for(var i="<"+t+">",a="</"+t+">",o=i.length,s=a.length,l=e[0]===f||e[0]===y,c=0,u=-s;c>-1&&-1!==(c=r.indexOf(i,c))&&-1!==(u=r.indexOf(a,c+o))&&!(u<=c);){for(var d=c;d<u+s;++d)if(d<c+o||d>=u)n[d]=null,r=r.substr(0,d)+" "+r.substr(d+1);else if(null!==n[d]){var h=n[d].indexOf(e[0]);-1===h?n[d]+=e:l&&(n[d]=n[d].substr(0,h+1)+(1+parseInt(n[d][h+1]))+n[d].substr(h+2))}var g=c+o,p=r.substr(g,u-g).indexOf(i);c=-1!==p?p:u+s}return n}function x(t,e,r){for(var n=e.textAlign||"start",i=e.textBaseline||"alphabetic",a=[1<<30,1<<30],o=[0,0],s=t.length,l=0;l<s;++l)for(var c=t[l],u=0;u<2;++u)a[u]=0|Math.min(a[u],c[u]),o[u]=0|Math.max(o[u],c[u]);var d=0;switch(n){case"center":d=-.5*(a[0]+o[0]);break;case"right":case"end":d=-o[0];break;case"left":case"start":d=-a[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+n+"'")}var h=0;switch(i){case"hanging":case"top":h=-a[1];break;case"middle":h=-.5*(a[1]+o[1]);break;case"alphabetic":case"ideographic":h=-3*r;break;case"bottom":h=-o[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+i+"'")}var g=1/r;return"lineHeight"in e?g*=+e.lineHeight:"width"in e?g=e.width/(o[0]-a[0]):"height"in e&&(g=e.height/(o[1]-a[1])),t.map((function(t){return[g*(t[0]+d),g*(t[1]+h)]}))}function I(t,e,r,n,a,o){r=r.replace(/\n/g,""),r=!0===o.breaklines?r.replace(/\<br\>/g,"\n"):r.replace(/\<br\>/g," ");var s="",l=[];for(C=0;C<r.length;++C)l[C]=s;!0===o.bolds&&(l=v(c,u,r,l)),!0===o.italics&&(l=v(d,h,r,l)),!0===o.superscripts&&(l=v(g,p,r,l)),!0===o.subscripts&&(l=v(m,b,r,l));var x=[],I="";for(C=0;C<r.length;++C)null!==l[C]&&(I+=r[C],x.push(l[C]));var B,C,F,A,Q,_=I.split("\n"),w=_.length,U=Math.round(a*n),S=n,E=2*n,L=0,T=w*U+E;t.height<T&&(t.height=T),e.fillStyle="#000",e.fillRect(0,0,t.width,t.height),e.fillStyle="#fff";var R=0,k="";function G(){if(""!==k){var t=e.measureText(k).width;e.fillText(k,S+F,E+A),F+=t}}function N(){return Math.round(Q)+"px "}function M(t,r){var n=""+e.font;if(!0===o.subscripts){var i=t.indexOf(y),a=r.indexOf(y),s=i>-1?parseInt(t[1+i]):0,l=a>-1?parseInt(r[1+a]):0;s!==l&&(n=n.replace(N(),"?px "),Q*=Math.pow(.75,l-s),n=n.replace("?px ",N())),A+=.25*U*(l-s)}if(!0===o.superscripts){var c=t.indexOf(f),d=r.indexOf(f),g=c>-1?parseInt(t[1+c]):0,p=d>-1?parseInt(r[1+d]):0;g!==p&&(n=n.replace(N(),"?px "),Q*=Math.pow(.75,p-g),n=n.replace("?px ",N())),A-=.25*U*(p-g)}if(!0===o.bolds){var m=t.indexOf(u)>-1,b=r.indexOf(u)>-1;!m&&b&&(n=v?n.replace("italic ","italic bold "):"bold "+n),m&&!b&&(n=n.replace("bold ",""))}if(!0===o.italics){var v=t.indexOf(h)>-1,x=r.indexOf(h)>-1;!v&&x&&(n="italic "+n),v&&!x&&(n=n.replace("italic ",""))}e.font=n}for(B=0;B<w;++B){var D=_[B]+"\n";for(F=0,A=B*U,Q=n,k="",C=0;C<D.length;++C){var X=C+R<x.length?x[C+R]:x[x.length-1];s===X?k+=D[C]:(G(),k=D[C],void 0!==X&&(M(s,X),s=X))}G(),R+=D.length;var V=0|Math.round(F+2*S);L<V&&(L=V)}var W=L,Z=E+U*w;return i(e.getImageData(0,0,W,Z).data,[Z,W,4]).pick(-1,-1,0).transpose(1,0)}function B(t,e){var r=n(t,128);return e?a(r.cells,r.positions,.25):{edges:r.cells,positions:r.positions}}function C(t,e,r,n){var i=B(t,n),a=x(i.positions,e,r),c=i.edges,u="ccw"===e.orientation;if(o(a,c),e.polygons||e.polygon||e.polyline){for(var d=l(c,a),h=new Array(d.length),g=0;g<d.length;++g){for(var f=d[g],p=new Array(f.length),m=0;m<f.length;++m){for(var y=f[m],b=new Array(y.length),v=0;v<y.length;++v)b[v]=a[y[v]].slice();u&&b.reverse(),p[m]=b}h[g]=p}return h}return e.triangles||e.triangulate||e.triangle?{cells:s(a,c,{delaunay:!1,exterior:!1,interior:!0}),positions:a}:{edges:c,positions:a}}function F(t,e,r){try{return C(t,e,r,!0)}catch(t){}try{return C(t,e,r,!1)}catch(t){}return e.polygons||e.polyline||e.polygon?[]:e.triangles||e.triangulate||e.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function A(t,e,r,n){var i=64,a=1.25,o={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return n&&(n.size&&n.size>0&&(i=n.size),n.lineSpacing&&n.lineSpacing>0&&(a=n.lineSpacing),n.styletags&&n.styletags.breaklines&&(o.breaklines=!!n.styletags.breaklines),n.styletags&&n.styletags.bolds&&(o.bolds=!!n.styletags.bolds),n.styletags&&n.styletags.italics&&(o.italics=!!n.styletags.italics),n.styletags&&n.styletags.subscripts&&(o.subscripts=!!n.styletags.subscripts),n.styletags&&n.styletags.superscripts&&(o.superscripts=!!n.styletags.superscripts)),r.font=[n.fontStyle,n.fontVariant,n.fontWeight,i+"px",n.font].filter((function(t){return t})).join(" "),r.textAlign="start",r.textBaseline="alphabetic",r.direction="ltr",F(I(e,r,t,i,a,o),n,i)}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(t,e,r){!function(){if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=m);var t=!1;if("function"==typeof WeakMap){var r=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var n=new r,i=Object.freeze({});if(n.set(i,1),1===n.get(i))return void(e.exports=WeakMap);t=!0}}var a=Object.getOwnPropertyNames,o=Object.defineProperty,s=Object.isExtensible,l="weakmap:",c=l+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var u=new ArrayBuffer(25),d=new Uint8Array(u);crypto.getRandomValues(d),c=l+"rand:"+Array.prototype.map.call(d,(function(t){return(t%36).toString(36)})).join("")+"___"}if(o(Object,"getOwnPropertyNames",{value:function(t){return a(t).filter(y)}}),"getPropertyNames"in Object){var h=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(t){return h(t).filter(y)}})}!function(){var t=Object.freeze;o(Object,"freeze",{value:function(e){return b(e),t(e)}});var e=Object.seal;o(Object,"seal",{value:function(t){return b(t),e(t)}});var r=Object.preventExtensions;o(Object,"preventExtensions",{value:function(t){return b(t),r(t)}})}();var g=!1,f=0,p=function(){this instanceof p||x();var t=[],e=[],r=f++;function n(n,i){var a,o=b(n);return o?r in o?o[r]:i:(a=t.indexOf(n))>=0?e[a]:i}function i(e){var n=b(e);return n?r in n:t.indexOf(e)>=0}function a(n,i){var a,o=b(n);return o?o[r]=i:(a=t.indexOf(n))>=0?e[a]=i:(a=t.length,e[a]=i,t[a]=n),this}function o(n){var i,a,o=b(n);return o?r in o&&delete o[r]:!((i=t.indexOf(n))<0||(a=t.length-1,t[i]=void 0,e[i]=e[a],t[i]=t[a],t.length=a,e.length=a,0))}return Object.create(p.prototype,{get___:{value:v(n)},has___:{value:v(i)},set___:{value:v(a)},delete___:{value:v(o)}})};p.prototype=Object.create(Object.prototype,{get:{value:function(t,e){return this.get___(t,e)},writable:!0,configurable:!0},has:{value:function(t){return this.has___(t)},writable:!0,configurable:!0},set:{value:function(t,e){return this.set___(t,e)},writable:!0,configurable:!0},delete:{value:function(t){return this.delete___(t)},writable:!0,configurable:!0}}),"function"==typeof r?function(){function n(){this instanceof p||x();var e,n=new r,i=void 0,a=!1;function o(t,e){return i?n.has(t)?n.get(t):i.get___(t,e):n.get(t,e)}function s(t){return n.has(t)||!!i&&i.has___(t)}function l(t){var e=!!n.delete(t);return i&&i.delete___(t)||e}return e=t?function(t,e){return n.set(t,e),n.has(t)||(i||(i=new p),i.set(t,e)),this}:function(t,e){if(a)try{n.set(t,e)}catch(r){i||(i=new p),i.set___(t,e)}else n.set(t,e);return this},Object.create(p.prototype,{get___:{value:v(o)},has___:{value:v(s)},set___:{value:v(e)},delete___:{value:v(l)},permitHostObjects___:{value:v((function(t){if(t!==m)throw new Error("bogus call to permitHostObjects___");a=!0}))}})}t&&"undefined"!=typeof Proxy&&(Proxy=void 0),n.prototype=p.prototype,e.exports=n,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),e.exports=p)}function m(t){t.permitHostObjects___&&t.permitHostObjects___(m)}function y(t){return!(t.substr(0,l.length)==l&&"___"===t.substr(t.length-3))}function b(t){if(t!==Object(t))throw new TypeError("Not an object: "+t);var e=t[c];if(e&&e.key===t)return e;if(s(t)){e={key:t};try{return o(t,c,{value:e,writable:!1,enumerable:!1,configurable:!1}),e}catch(t){return}}}function v(t){return t.prototype=null,Object.freeze(t)}function x(){g||"undefined"==typeof console||(g=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},{}],314:[function(t,e,r){var n=t("./hidden-store.js");function i(){var t={};return function(e){if(("object"!=typeof e||null===e)&&"function"!=typeof e)throw new Error("Weakmap-shim: Key must be object");var r=e.valueOf(t);return r&&r.identity===t?r:n(e,t)}}e.exports=i},{"./hidden-store.js":315}],315:[function(t,e,r){function n(t,e){var r={identity:e},n=t.valueOf;return Object.defineProperty(t,"valueOf",{value:function(t){return t!==e?n.apply(this,arguments):r},writable:!0}),r}e.exports=n},{}],316:[function(t,e,r){var n=t("./create-store.js");function i(){var t=n();return{get:function(e,r){var n=t(e);return n.hasOwnProperty("value")?n.value:r},set:function(e,r){return t(e).value=r,this},has:function(e){return"value"in t(e)},delete:function(e){return delete t(e).value}}}e.exports=i},{"./create-store.js":314}],317:[function(t,e,r){function n(){return function(t,e,r,n,i,a){var o=t[0],s=r[0],l=[0],c=s;n|=0;var u=0,d=s;for(u=0;u<o;++u){var h=e[n]-a,g=e[n+c]-a;h>=0!=g>=0&&i.push(l[0]+.5+.5*(h+g)/(h-g)),n+=d,++l[0]}}}function i(){return n()}var a=i;function o(t){var e={};return function(r,n,i){var a=r.dtype,o=r.order,s=[a,o.join()].join(),l=e[s];return l||(e[s]=l=t([a,o])),l(r.shape.slice(0),r.data,r.stride,0|r.offset,n,i)}}function s(t){return o(a.bind(void 0,t))}function l(t){return s({funcName:t.funcName})}e.exports=l({funcName:"zeroCrossings"})},{}],318:[function(t,e,r){e.exports=i;var n=t("./lib/zc-core");function i(t,e){var r=[];return e=+e||0,n(t.hi(t.shape[0]-1),r,e),r}},{"./lib/zc-core":317}]},{},[6])(6)})),colorName={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},colorParse=parse,baseHues={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function parse(t){var e,r,n=[],i=1;if("string"==typeof t)if(colorName[t])n=colorName[t].slice(),r="rgb";else if("transparent"===t)i=0,r="rgb",n=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(t)){var a=t.slice(1);i=1,(l=a.length)<=4?(n=[parseInt(a[0]+a[0],16),parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16)],4===l&&(i=parseInt(a[3]+a[3],16)/255)):(n=[parseInt(a[0]+a[1],16),parseInt(a[2]+a[3],16),parseInt(a[4]+a[5],16)],8===l&&(i=parseInt(a[6]+a[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),r="rgb"}else if(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(t)){var o=e[1],s="rgb"===o;r=a=o.replace(/a$/,"");var l="cmyk"===a?4:"gray"===a?1:3;n=e[2].trim().split(/\s*[,\/]\s*|\s+/).map((function(t,e){if(/%$/.test(t))return e===l?parseFloat(t)/100:"rgb"===a?255*parseFloat(t)/100:parseFloat(t);if("h"===a[e]){if(/deg$/.test(t))return parseFloat(t);if(void 0!==baseHues[t])return baseHues[t]}return parseFloat(t)})),o===a&&n.push(1),i=s||void 0===n[l]?1:n[l],n=n.slice(0,l)}else t.length>10&&/[0-9](?:\s|\/)/.test(t)&&(n=t.match(/([0-9]+)/g).map((function(t){return parseFloat(t)})),r=t.match(/([a-z])/gi).join("").toLowerCase());else isNaN(t)?Array.isArray(t)||t.length?(n=[t[0],t[1],t[2]],r="rgb",i=4===t.length?t[3]:1):t instanceof Object&&(null!=t.r||null!=t.red||null!=t.R?(r="rgb",n=[t.r||t.red||t.R||0,t.g||t.green||t.G||0,t.b||t.blue||t.B||0]):(r="hsl",n=[t.h||t.hue||t.H||0,t.s||t.saturation||t.S||0,t.l||t.lightness||t.L||t.b||t.brightness]),i=t.a||t.alpha||t.opacity||1,null!=t.opacity&&(i/=100)):(r="rgb",n=[t>>>16,(65280&t)>>>8,255&t]);return{space:r,values:n,alpha:i}}var rgb$1={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},rgb=rgb$1,hsl={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e,r,n,i,a,o=t[0]/360,s=t[1]/100,l=t[2]/100;if(0===s)return[a=255*l,a,a];e=2*l-(r=l<.5?l*(1+s):l+s-l*s),i=[0,0,0];for(var c=0;c<3;c++)(n=o+1/3*-(c-1))<0?n++:n>1&&n--,a=6*n<1?e+6*(r-e)*n:2*n<1?r:3*n<2?e+(r-e)*(2/3-n)*6:e,i[c]=255*a;return i}};rgb.hsl=function(t){var e,r,n=t[0]/255,i=t[1]/255,a=t[2]/255,o=Math.min(n,i,a),s=Math.max(n,i,a),l=s-o;return s===o?e=0:n===s?e=(i-a)/l:i===s?e=2+(a-n)/l:a===s&&(e=4+(n-i)/l),(e=Math.min(60*e,360))<0&&(e+=360),r=(o+s)/2,[e,100*(s===o?0:r<=.5?l/(s+o):l/(2-s-o)),100*r]};var colorRgba=function(t){var e;Array.isArray(t)&&t.raw&&(t=String.raw.apply(null,arguments));var r=colorParse(t);if(!r.space)return[];var n="h"===r.space[0]?hsl.min:rgb$1.min,i="h"===r.space[0]?hsl.max:rgb$1.max;return(e=Array(3))[0]=Math.min(Math.max(r.values[0],n[0]),i[0]),e[1]=Math.min(Math.max(r.values[1],n[1]),i[1]),e[2]=Math.min(Math.max(r.values[2],n[2]),i[2]),"h"===r.space[0]&&(e=hsl.rgb(e)),e.push(Math.min(Math.max(r.alpha,0),1)),e},clamp_1=clamp;function clamp(t,e,r){return e<r?t<e?e:t>r?r:t:t<r?r:t>e?e:t}var dtype=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}},colorNormalize=function(t,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var r=new(dtype(e))(4),n="uint8"!==e&&"uint8_clamped"!==e;return t.length&&"string"!=typeof t||((t=colorRgba(t))[0]/=255,t[1]/=255,t[2]/=255),isInt(t)?(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=null!=t[3]?t[3]:255,n&&(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255),r):(n?(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=null!=t[3]?t[3]:1):(r[0]=clamp_1(Math.floor(255*t[0]),0,255),r[1]=clamp_1(Math.floor(255*t[1]),0,255),r[2]=clamp_1(Math.floor(255*t[2]),0,255),r[3]=null==t[3]?255:clamp_1(Math.floor(255*t[3]),0,255)),r)};function isInt(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(t[0]>1||0===t[0])&&(t[1]>1||0===t[1])&&(t[2]>1||0===t[2])&&(!t[3]||t[3]>1))}var colorDflt=attributes$q.defaultLine,isArrayOrTypedArray=array.isArrayOrTypedArray,colorDfltRgba=colorNormalize(colorDflt),opacityDflt=1;function calculateColor(t,e){var r=t;return r[3]*=e,r}function validateColor(t){if(fastIsnumeric(t))return colorDfltRgba;var e=colorNormalize(t);return e.length?e:colorDfltRgba}function validateOpacity(t){return fastIsnumeric(t)?t:opacityDflt}function formatColor$1(t,e,r){var n,i,a,o,s,l=t.color,c=isArrayOrTypedArray(l),u=isArrayOrTypedArray(e),d=colorscale.extractOpts(t),h=[];if(n=void 0!==d.colorscale?colorscale.makeColorScaleFuncFromTrace(t):validateColor,i=c?function(t,e){return void 0===t[e]?colorDfltRgba:colorNormalize(n(t[e]))}:validateColor,a=u?function(t,e){return void 0===t[e]?opacityDflt:validateOpacity(t[e])}:validateOpacity,c||u)for(var g=0;g<r;g++)o=i(l,g),s=a(e,g),h[g]=calculateColor(o,s);else h=calculateColor(colorNormalize(l),e);return h}function parseColorScale$1(t){var e=colorscale.extractOpts(t),r=e.colorscale;return e.reversescale&&(r=colorscale.flipScale(e.colorscale)),r.map((function(t){var e=t[0],r=tinycolor(t[1]).toRgb();return{index:e,rgb:[r.r,r.g,r.b,r.a]}}))}var gl_format_color={formatColor:formatColor$1,parseColorScale:parseColorScale$1};function str2RgbaArray(t){return t?colorNormalize(t):[0,0,0,1]}var str2rgbarray=str2RgbaArray,zip3=function(t,e,r,n){n=n||t.length;for(var i=new Array(n),a=0;a<n;a++)i[a]=[t[a],e[a],r[a]];return i},createMesh$1=stackgl_modules.gl_mesh3d,parseColorScale=gl_format_color.parseColorScale,extractOpts=colorscale.extractOpts,findNearestOnAxis=function(t,e){for(var r=e.length-1;r>0;r--){var n=Math.min(e[r],e[r-1]),i=Math.max(e[r],e[r-1]);if(i>n&&n<t&&t<=i)return{id:r,distRatio:(i-t)/(i-n)}}return{id:0,distRatio:0}};function IsosurfaceTrace(t,e,r){this.scene=t,this.uid=r,this.mesh=e,this.name="",this.data=null,this.showContour=!1}var proto$4=IsosurfaceTrace.prototype;proto$4.handlePick=function(t){if(t.object===this.mesh){var e=t.data.index,r=this.data._meshX[e],n=this.data._meshY[e],i=this.data._meshZ[e],a=this.data._Ys.length,o=this.data._Zs.length,s=findNearestOnAxis(r,this.data._Xs).id,l=findNearestOnAxis(n,this.data._Ys).id,c=findNearestOnAxis(i,this.data._Zs).id,u=t.index=c+o*l+o*a*s;t.traceCoordinate=[this.data._meshX[u],this.data._meshY[u],this.data._meshZ[u],this.data._value[u]];var d=this.data.hovertext||this.data.text;return Array.isArray(d)&&void 0!==d[u]?t.textLabel=d[u]:d&&(t.textLabel=d),!0}},proto$4.update=function(t){var e=this.scene,r=e.fullSceneLayout;function n(t,e,r,n){return e.map((function(e){return t.d2l(e,0,n)*r}))}this.data=generateIsoMeshes(t);var i={positions:zip3(n(r.xaxis,t._meshX,e.dataScale[0],t.xcalendar),n(r.yaxis,t._meshY,e.dataScale[1],t.ycalendar),n(r.zaxis,t._meshZ,e.dataScale[2],t.zcalendar)),cells:zip3(t._meshI,t._meshJ,t._meshK),lightPosition:[t.lightposition.x,t.lightposition.y,t.lightposition.z],ambient:t.lighting.ambient,diffuse:t.lighting.diffuse,specular:t.lighting.specular,roughness:t.lighting.roughness,fresnel:t.lighting.fresnel,vertexNormalsEpsilon:t.lighting.vertexnormalsepsilon,faceNormalsEpsilon:t.lighting.facenormalsepsilon,opacity:t.opacity,contourEnable:t.contour.show,contourColor:str2rgbarray(t.contour.color).slice(0,3),contourWidth:t.contour.width,useFacetNormals:t.flatshading},a=extractOpts(t);i.vertexIntensity=t._meshIntensity,i.vertexIntensityBounds=[a.min,a.max],i.colormap=parseColorScale(t),this.mesh.update(i)},proto$4.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var GRID_TYPES=["xyz","xzy","yxz","yzx","zxy","zyx"];function generateIsoMeshes(t){t._meshI=[],t._meshJ=[],t._meshK=[];var e,r,n,i,a,o,s,l=t.surface.show,c=t.spaceframe.show,u=t.surface.fill,d=t.spaceframe.fill,h=!1,g=!1,f=0,p=t._Xs,m=t._Ys,y=t._Zs,b=p.length,v=m.length,x=y.length,I=GRID_TYPES.indexOf(t._gridFill.replace(/-/g,"").replace(/\+/g,"")),B=function(t,e,r){switch(I){case 5:return r+x*e+x*v*t;case 4:return r+x*t+x*b*e;case 3:return e+v*r+v*x*t;case 2:return e+v*t+v*b*r;case 1:return t+b*r+b*x*e;default:return t+b*e+b*v*r}},C=t._minValues,F=t._maxValues,A=t._vMin,Q=t._vMax;function _(t,e,s){for(var l=o.length,c=r;c<l;c++)if(t===n[c]&&e===i[c]&&s===a[c])return c;return-1}function w(){r=e}function U(){n=[],i=[],a=[],o=[],e=0,w()}function S(t,r,s,l){return n.push(t),i.push(r),a.push(s),o.push(l),++e-1}function E(e,r,n){return t._meshI.push(e),t._meshJ.push(r),t._meshK.push(n),++f-1}function L(t,e,r){for(var n=[],i=0;i<t.length;i++)n[i]=t[i]*(1-r)+r*e[i];return n}function T(t){s=t}function R(t,e){return"all"===t||null===t||t.indexOf(e)>-1}function k(t,e){return null===t?e:t}function G(t,e,r){w();var n=[e],i=[r];if(s>=1)n=[e],i=[r];else if(s>0){var a=function(t,e){var r=t[0],n=t[1],i=t[2],a=function(t,e,r){for(var n=[],i=0;i<t.length;i++)n[i]=(t[i]+e[i]+r[i])/3;return n}(r,n,i),o=Math.sqrt(1-s),l=L(a,r,o),c=L(a,n,o),u=L(a,i,o),d=e[0],h=e[1],g=e[2];return{xyzv:[[r,n,c],[c,l,r],[n,i,u],[u,c,n],[i,r,l],[l,u,i]],abc:[[d,h,-1],[-1,-1,d],[h,g,-1],[-1,-1,h],[g,d,-1],[-1,-1,g]]}}(e,r);n=a.xyzv,i=a.abc}for(var o=0;o<n.length;o++){e=n[o],r=i[o];for(var l=[],c=0;c<3;c++){var u=e[c][0],d=e[c][1],h=e[c][2],g=e[c][3],f=r[c]>-1?r[c]:_(u,d,h);l[c]=f>-1?f:S(u,d,h,k(t,g))}E(l[0],l[1],l[2])}}function N(t,e,r,n){var i=t[3];i<r&&(i=r),i>n&&(i=n);for(var a=(t[3]-i)/(t[3]-e[3]+1e-9),o=[],s=0;s<4;s++)o[s]=(1-a)*t[s]+a*e[s];return o}function M(t,e,r){return t>=e&&t<=r}function D(t){var e=.001*(Q-A);return t>=A-e&&t<=Q+e}function X(e){for(var r=[],n=0;n<4;n++){var i=e[n];r.push([t._x[i],t._y[i],t._z[i],t._value[i]])}return r}function V(t,e,r,n,i,a){a||(a=1),r=[-1,-1,-1];var o=!1,s=[M(e[0][3],n,i),M(e[1][3],n,i),M(e[2][3],n,i)];if(!s[0]&&!s[1]&&!s[2])return!1;var l=function(t,e,r){return D(e[0][3])&&D(e[1][3])&&D(e[2][3])?(G(t,e,r),!0):a<3&&V(t,e,r,A,Q,++a)};if(s[0]&&s[1]&&s[2])return l(t,e,r)||o;var c=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach((function(a){if(s[a[0]]&&s[a[1]]&&!s[a[2]]){var u=e[a[0]],d=e[a[1]],h=e[a[2]],g=N(h,u,n,i),f=N(h,d,n,i);o=l(t,[f,g,u],[-1,-1,r[a[0]]])||o,o=l(t,[u,d,f],[r[a[0]],r[a[1]],-1])||o,c=!0}})),c||[[0,1,2],[1,2,0],[2,0,1]].forEach((function(a){if(s[a[0]]&&!s[a[1]]&&!s[a[2]]){var u=e[a[0]],d=e[a[1]],h=e[a[2]],g=N(d,u,n,i),f=N(h,u,n,i);o=l(t,[f,g,u],[-1,-1,r[a[0]]])||o,c=!0}})),o}function W(t,e,r,n){var i=!1,a=X(e),o=[M(a[0][3],r,n),M(a[1][3],r,n),M(a[2][3],r,n),M(a[3][3],r,n)];if(!(o[0]||o[1]||o[2]||o[3]))return i;if(o[0]&&o[1]&&o[2]&&o[3])return g&&(i=function(t,e,r){var n=function(n,i,a){G(t,[e[n],e[i],e[a]],[r[n],r[i],r[a]])};n(0,1,2),n(3,0,1),n(2,3,0),n(1,2,3)}(t,a,e)||i),i;var s=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach((function(l){if(o[l[0]]&&o[l[1]]&&o[l[2]]&&!o[l[3]]){var c=a[l[0]],u=a[l[1]],d=a[l[2]],h=a[l[3]];if(g)i=G(t,[c,u,d],[e[l[0]],e[l[1]],e[l[2]]])||i;else{var f=N(h,c,r,n),p=N(h,u,r,n),m=N(h,d,r,n);i=G(null,[f,p,m],[-1,-1,-1])||i}s=!0}})),s?i:([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach((function(l){if(o[l[0]]&&o[l[1]]&&!o[l[2]]&&!o[l[3]]){var c=a[l[0]],u=a[l[1]],d=a[l[2]],h=a[l[3]],f=N(d,c,r,n),p=N(d,u,r,n),m=N(h,u,r,n),y=N(h,c,r,n);g?(i=G(t,[c,y,f],[e[l[0]],-1,-1])||i,i=G(t,[u,p,m],[e[l[1]],-1,-1])||i):i=function(t,e,r){var n=function(n,i,a){G(t,[e[n],e[i],e[a]],[r[n],r[i],r[a]])};n(0,1,2),n(2,3,0)}(null,[f,p,m,y],[-1,-1,-1,-1])||i,s=!0}})),s||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach((function(l){if(o[l[0]]&&!o[l[1]]&&!o[l[2]]&&!o[l[3]]){var c=a[l[0]],u=a[l[1]],d=a[l[2]],h=a[l[3]],f=N(u,c,r,n),p=N(d,c,r,n),m=N(h,c,r,n);g?(i=G(t,[c,f,p],[e[l[0]],-1,-1])||i,i=G(t,[c,p,m],[e[l[0]],-1,-1])||i,i=G(t,[c,m,f],[e[l[0]],-1,-1])||i):i=G(null,[f,p,m],[-1,-1,-1])||i,s=!0}})),i)}function Z(t,e,r,n,i,a,o,s,l,c,u){var d=!1;return h&&(R(t,"A")&&(d=W(null,[e,r,n,a],c,u)||d),R(t,"B")&&(d=W(null,[r,n,i,l],c,u)||d),R(t,"C")&&(d=W(null,[r,a,o,l],c,u)||d),R(t,"D")&&(d=W(null,[n,a,s,l],c,u)||d),R(t,"E")&&(d=W(null,[r,n,a,l],c,u)||d)),g&&(d=W(t,[r,n,a,l],c,u)||d),d}function O(t,e,r,n,i,a,o,s){return[!0===s[0]||V(t,X([e,r,n]),[e,r,n],a,o),!0===s[1]||V(t,X([n,i,e]),[n,i,e],a,o)]}function $(t,e,r,n,i,a,o,s,l){return s?O(t,e,r,i,n,a,o,l):O(t,r,i,n,e,a,o,l)}function H(t,e,r,n,i,a,o){var s,l,c,u,d=!1,h=function(){d=V(t,[s,l,c],[-1,-1,-1],i,a)||d,d=V(t,[c,u,s],[-1,-1,-1],i,a)||d},g=o[0],f=o[1],p=o[2];return g&&(s=L(X([B(e,r-0,n-0)])[0],X([B(e-1,r-0,n-0)])[0],g),l=L(X([B(e,r-0,n-1)])[0],X([B(e-1,r-0,n-1)])[0],g),c=L(X([B(e,r-1,n-1)])[0],X([B(e-1,r-1,n-1)])[0],g),u=L(X([B(e,r-1,n-0)])[0],X([B(e-1,r-1,n-0)])[0],g),h()),f&&(s=L(X([B(e-0,r,n-0)])[0],X([B(e-0,r-1,n-0)])[0],f),l=L(X([B(e-0,r,n-1)])[0],X([B(e-0,r-1,n-1)])[0],f),c=L(X([B(e-1,r,n-1)])[0],X([B(e-1,r-1,n-1)])[0],f),u=L(X([B(e-1,r,n-0)])[0],X([B(e-1,r-1,n-0)])[0],f),h()),p&&(s=L(X([B(e-0,r-0,n)])[0],X([B(e-0,r-0,n-1)])[0],p),l=L(X([B(e-0,r-1,n)])[0],X([B(e-0,r-1,n-1)])[0],p),c=L(X([B(e-1,r-1,n)])[0],X([B(e-1,r-1,n-1)])[0],p),u=L(X([B(e-1,r-0,n)])[0],X([B(e-1,r-0,n-1)])[0],p),h()),d}function Y(t,e,r,n,i,a,o,s,l,c,u,d){var g=t;return d?(h&&"even"===t&&(g=null),Z(g,e,r,n,i,a,o,s,l,c,u)):(h&&"odd"===t&&(g=null),Z(g,l,s,o,a,i,n,r,e,c,u))}function P(t,e,r,n,i){for(var a=[],o=0,s=0;s<e.length;s++)for(var l=e[s],c=1;c<x;c++)for(var u=1;u<v;u++)a.push($(t,B(l,u-1,c-1),B(l,u-1,c),B(l,u,c-1),B(l,u,c),r,n,(l+u+c)%2,i&&i[o]?i[o]:[])),o++;return a}function z(t,e,r,n,i){for(var a=[],o=0,s=0;s<e.length;s++)for(var l=e[s],c=1;c<b;c++)for(var u=1;u<x;u++)a.push($(t,B(c-1,l,u-1),B(c,l,u-1),B(c-1,l,u),B(c,l,u),r,n,(c+l+u)%2,i&&i[o]?i[o]:[])),o++;return a}function J(t,e,r,n,i){for(var a=[],o=0,s=0;s<e.length;s++)for(var l=e[s],c=1;c<v;c++)for(var u=1;u<b;u++)a.push($(t,B(u-1,c-1,l),B(u-1,c,l),B(u,c-1,l),B(u,c,l),r,n,(u+c+l)%2,i&&i[o]?i[o]:[])),o++;return a}function j(t,e,r){for(var n=1;n<x;n++)for(var i=1;i<v;i++)for(var a=1;a<b;a++)Y(t,B(a-1,i-1,n-1),B(a-1,i-1,n),B(a-1,i,n-1),B(a-1,i,n),B(a,i-1,n-1),B(a,i-1,n),B(a,i,n-1),B(a,i,n),e,r,(a+i+n)%2)}function K(t,e,r){h=!0,j(t,e,r),h=!1}function q(t,e,r,n,i,a){for(var o=[],s=0,l=0;l<e.length;l++)for(var c=e[l],u=1;u<x;u++)for(var d=1;d<v;d++)o.push(H(t,c,d,u,r,n,i[l],a&&a[s]&&a[s])),s++;return o}function tt(t,e,r,n,i,a){for(var o=[],s=0,l=0;l<e.length;l++)for(var c=e[l],u=1;u<b;u++)for(var d=1;d<x;d++)o.push(H(t,u,c,d,r,n,i[l],a&&a[s]&&a[s])),s++;return o}function et(t,e,r,n,i,a){for(var o=[],s=0,l=0;l<e.length;l++)for(var c=e[l],u=1;u<v;u++)for(var d=1;d<b;d++)o.push(H(t,d,u,c,r,n,i[l],a&&a[s]&&a[s])),s++;return o}function rt(t,e){for(var r=[],n=t;n<e;n++)r.push(n);return r}return function(){U(),function(){for(var e=0;e<b;e++)for(var r=0;r<v;r++)for(var n=0;n<x;n++){var i=B(e,r,n);S(t._x[i],t._y[i],t._z[i],t._value[i])}}();var e=null;if(c&&d&&(T(d),function(t,e,r){g=!0,j(t,e,r),g=!1}(e,A,Q)),l&&u){T(u);for(var r=t.surface.pattern,s=t.surface.count,h=0;h<s;h++){var I=1===s?.5:h/(s-1),_=(1-I)*A+I*Q,w=Math.abs(_-C)>Math.abs(_-F)?[C,_]:[_,F];K(r,w[0],w[1])}}var E=[[Math.min(A,F),Math.max(A,F)],[Math.min(C,Q),Math.max(C,Q)]];["x","y","z"].forEach((function(r){for(var n=[],i=0;i<E.length;i++){var a=0,o=E[i][0],s=E[i][1],l=t.slices[r];if(l.show&&l.fill){T(l.fill);var c=[],u=[],d=[];if(l.locations.length)for(var h=0;h<l.locations.length;h++){var g=findNearestOnAxis(l.locations[h],"x"===r?p:"y"===r?m:y);0===g.distRatio?c.push(g.id):g.id>0&&(u.push(g.id),"x"===r?d.push([g.distRatio,0,0]):"y"===r?d.push([0,g.distRatio,0]):d.push([0,0,g.distRatio]))}else c=rt(1,"x"===r?b-1:"y"===r?v-1:x-1);u.length>0&&(n[a]="x"===r?q(e,u,o,s,d,n[a]):"y"===r?tt(e,u,o,s,d,n[a]):et(e,u,o,s,d,n[a]),a++),c.length>0&&(n[a]="x"===r?P(e,c,o,s,n[a]):"y"===r?z(e,c,o,s,n[a]):J(e,c,o,s,n[a]),a++)}var f=t.caps[r];f.show&&f.fill&&(T(f.fill),n[a]="x"===r?P(e,[0,b-1],o,s,n[a]):"y"===r?z(e,[0,v-1],o,s,n[a]):J(e,[0,x-1],o,s,n[a]),a++)}})),0===f&&U(),t._meshX=n,t._meshY=i,t._meshZ=a,t._meshIntensity=o,t._Xs=p,t._Ys=m,t._Zs=y}(),t}function createIsosurfaceTrace(t,e){var r=t.glplot.gl,n=createMesh$1({gl:r}),i=new IsosurfaceTrace(t,n,e.uid);return n._trace=i,i.update(e),t.glplot.add(n),i}var convert$2={findNearestOnAxis:findNearestOnAxis,generateIsoMeshes:generateIsoMeshes,createIsosurfaceTrace:createIsosurfaceTrace},getCanvasContext_1=getCanvasContext;function getCanvasContext(t,e){if("string"!=typeof t)throw new TypeError("must specify type string");if(e=e||{},"undefined"==typeof document&&!e.canvas)return null;var r=e.canvas||document.createElement("canvas");"number"==typeof e.width&&(r.width=e.width),"number"==typeof e.height&&(r.height=e.height);var n,i=e;try{var a=[t];0===t.indexOf("webgl")&&a.push("experimental-"+t);for(var o=0;o<a.length;o++)if(n=r.getContext(a[o],i))return n}catch(t){n=null}return n||null}var webglContext=function(t){return getCanvasContext_1("webgl",t)},noop=function(){},show_no_webgl_msg=function(t){for(var e in t)"function"==typeof t[e]&&(t[e]=noop);t.destroy=function(){t.container.parentNode.removeChild(t.container)};var r=document.createElement("div");r.className="no-webgl",r.style.cursor="pointer",r.style.fontSize="24px",r.style.color=color_1.defaults[0],r.style.position="absolute",r.style.left=r.style.top="0px",r.style.width=r.style.height="100%",r.style["background-color"]=color_1.lightLine,r.style["z-index"]=30;var n=document.createElement("p");return n.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",n.style.position="relative",n.style.top="50%",n.style.left="50%",n.style.height="30%",n.style.width="50%",n.style.margin="-15% 0 0 -25%",r.appendChild(n),t.container.appendChild(r),t.container.style.background="#FFFFFF",t.container.onclick=function(){window.open("https://get.webgl.org")},!1},AXES_NAMES$2=["xaxis","yaxis","zaxis"];function AxesOptions(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var proto$3=AxesOptions.prototype;function createAxesOptions(t,e){var r=new AxesOptions;return r.merge(t,e),r}proto$3.merge=function(t,e){for(var r=this,n=0;n<3;++n){var i=e[AXES_NAMES$2[n]];i.visible?(r.labels[n]=t._meta?lib_1.templateString(i.title.text,t._meta):i.title.text,"font"in i.title&&(i.title.font.color&&(r.labelColor[n]=str2rgbarray(i.title.font.color)),i.title.font.family&&(r.labelFont[n]=i.title.font.family),i.title.font.size&&(r.labelSize[n]=i.title.font.size)),"showline"in i&&(r.lineEnable[n]=i.showline),"linecolor"in i&&(r.lineColor[n]=str2rgbarray(i.linecolor)),"linewidth"in i&&(r.lineWidth[n]=i.linewidth),"showgrid"in i&&(r.gridEnable[n]=i.showgrid),"gridcolor"in i&&(r.gridColor[n]=str2rgbarray(i.gridcolor)),"gridwidth"in i&&(r.gridWidth[n]=i.gridwidth),"log"===i.type?r.zeroEnable[n]=!1:"zeroline"in i&&(r.zeroEnable[n]=i.zeroline),"zerolinecolor"in i&&(r.zeroLineColor[n]=str2rgbarray(i.zerolinecolor)),"zerolinewidth"in i&&(r.zeroLineWidth[n]=i.zerolinewidth),"ticks"in i&&i.ticks?r.lineTickEnable[n]=!0:r.lineTickEnable[n]=!1,"ticklen"in i&&(r.lineTickLength[n]=r._defaultLineTickLength[n]=i.ticklen),"tickcolor"in i&&(r.lineTickColor[n]=str2rgbarray(i.tickcolor)),"tickwidth"in i&&(r.lineTickWidth[n]=i.tickwidth),"tickangle"in i&&(r.tickAngle[n]="auto"===i.tickangle?-3600:Math.PI*-i.tickangle/180),"showticklabels"in i&&(r.tickEnable[n]=i.showticklabels),"tickfont"in i&&(i.tickfont.color&&(r.tickColor[n]=str2rgbarray(i.tickfont.color)),i.tickfont.family&&(r.tickFont[n]=i.tickfont.family),i.tickfont.size&&(r.tickSize[n]=i.tickfont.size)),"mirror"in i?-1!==["ticks","all","allticks"].indexOf(i.mirror)?(r.lineTickMirror[n]=!0,r.lineMirror[n]=!0):!0===i.mirror?(r.lineTickMirror[n]=!1,r.lineMirror[n]=!0):(r.lineTickMirror[n]=!1,r.lineMirror[n]=!1):r.lineMirror[n]=!1,"showbackground"in i&&!1!==i.showbackground?(r.backgroundEnable[n]=!0,r.backgroundColor[n]=str2rgbarray(i.backgroundcolor)):r.backgroundEnable[n]=!1):(r.tickEnable[n]=!1,r.labelEnable[n]=!1,r.lineEnable[n]=!1,r.lineTickEnable[n]=!1,r.gridEnable[n]=!1,r.zeroEnable[n]=!1,r.backgroundEnable[n]=!1)}};var convert$1=createAxesOptions,AXES_NAMES$1=["xaxis","yaxis","zaxis"];function SpikeOptions(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var proto$2=SpikeOptions.prototype;function createSpikeOptions(t){var e=new SpikeOptions;return e.merge(t),e}proto$2.merge=function(t){for(var e=0;e<3;++e){var r=t[AXES_NAMES$1[e]];r.visible?(this.enabled[e]=r.showspikes,this.colors[e]=str2rgbarray(r.spikecolor),this.drawSides[e]=r.spikesides,this.lineWidth[e]=r.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}};var spikes=createSpikeOptions,tick_marks=computeTickMarks,AXES_NAMES=["xaxis","yaxis","zaxis"],centerPoint=[0,0,0];function contourLevelsFromTicks(t){for(var e=new Array(3),r=0;r<3;++r){for(var n=t[r],i=new Array(n.length),a=0;a<n.length;++a)i[a]=n[a].x;e[r]=i}return e}function computeTickMarks(t){for(var e=t.axesOptions,r=t.glplot.axesPixels,n=t.fullSceneLayout,i=[[],[],[]],a=0;a<3;++a){var o=n[AXES_NAMES[a]];if(o._length=(r[a].hi-r[a].lo)*r[a].pixelsPerDataUnit/t.dataScale[a],Math.abs(o._length)===1/0||isNaN(o._length))i[a]=[];else{o._input_range=o.range.slice(),o.range[0]=r[a].lo/t.dataScale[a],o.range[1]=r[a].hi/t.dataScale[a],o._m=1/(t.dataScale[a]*r[a].pixelsPerDataUnit),o.range[0]===o.range[1]&&(o.range[0]-=1,o.range[1]+=1);var s=o.tickmode;if("auto"===o.tickmode){o.tickmode="linear";var l=o.nticks||lib_1.constrain(o._length/40,4,9);axes_1.autoTicks(o,Math.abs(o.range[1]-o.range[0])/l)}for(var c=axes_1.calcTicks(o,{msUTC:!0}),u=0;u<c.length;++u)c[u].x=c[u].x*t.dataScale[a],"date"===o.type&&(c[u].text=c[u].text.replace(/\<br\>/g," "));i[a]=c,o.tickmode=s}}e.ticks=i;for(a=0;a<3;++a){centerPoint[a]=.5*(t.glplot.bounds[0][a]+t.glplot.bounds[1][a]);for(u=0;u<2;++u)e.bounds[u][a]=t.glplot.bounds[u][a]}t.contourLevels=contourLevelsFromTicks(i)}var STATIC_CANVAS,STATIC_CONTEXT,glPlot3d=stackgl_modules.gl_plot3d,createCamera=glPlot3d.createCamera,createPlot=glPlot3d.createScene,preserveDrawingBuffer=lib_1.preserveDrawingBuffer();function Scene(t,e){var r=document.createElement("div"),n=t.container;this.graphDiv=t.graphDiv;var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.style.position="absolute",i.style.top=i.style.left="0px",i.style.width=i.style.height="100%",i.style["z-index"]=20,i.style["pointer-events"]="none",r.appendChild(i),this.svgContainer=i,r.id=t.id,r.style.position="absolute",r.style.top=r.style.left="0px",r.style.width=r.style.height="100%",n.appendChild(r),this.fullLayout=e,this.id=t.id||"scene",this.fullSceneLayout=e[this.id],this.plotArgs=[[],{},{}],this.axesOptions=convert$1(e,e[this.id]),this.spikeOptions=spikes(e[this.id]),this.container=r,this.staticMode=!!t.staticPlot,this.pixelRatio=this.pixelRatio||t.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=registry.getComponentMethod("annotations3d","convert"),this.drawAnnotations=registry.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var proto$1=Scene.prototype;proto$1.prepareOptions=function(){var t=this,e={canvas:t.canvas,gl:t.gl,glOptions:{preserveDrawingBuffer:preserveDrawingBuffer,premultipliedAlpha:!0,antialias:!0},container:t.container,axes:t.axesOptions,spikes:t.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:t.camera,pixelRatio:t.pixelRatio};if(t.staticMode){if(!(STATIC_CONTEXT||(STATIC_CANVAS=document.createElement("canvas"),STATIC_CONTEXT=webglContext({canvas:STATIC_CANVAS,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");e.gl=STATIC_CONTEXT,e.canvas=STATIC_CANVAS}return e};var firstInit=!0;proto$1.tryCreatePlot=function(){var t=this,e=t.prepareOptions(),r=!0;try{t.glplot=createPlot(e)}catch(n){if(t.staticMode||!firstInit||preserveDrawingBuffer)r=!1;else{lib_1.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{preserveDrawingBuffer=e.glOptions.preserveDrawingBuffer=!0,t.glplot=createPlot(e)}catch(t){preserveDrawingBuffer=e.glOptions.preserveDrawingBuffer=!1,r=!1}}}return firstInit=!1,r},proto$1.initializeGLCamera=function(){var t=this,e=t.fullSceneLayout.camera,r="orthographic"===e.projection.type;t.camera=createCamera(t.container,{center:[e.center.x,e.center.y,e.center.z],eye:[e.eye.x,e.eye.y,e.eye.z],up:[e.up.x,e.up.y,e.up.z],_ortho:r,zoomMin:.01,zoomMax:100,mode:"orbit"})},proto$1.initializeGLPlot=function(){var t=this;if(t.initializeGLCamera(),!t.tryCreatePlot())return show_no_webgl_msg(t);t.traces={},t.make4thDimension();var e=t.graphDiv,r=e.layout,n=function(){var e={};return t.isCameraChanged(r)&&(e[t.id+".camera"]=t.getCamera()),t.isAspectChanged(r)&&(e[t.id+".aspectratio"]=t.glplot.getAspectratio(),"manual"!==r[t.id].aspectmode&&(t.fullSceneLayout.aspectmode=r[t.id].aspectmode=e[t.id+".aspectmode"]="manual")),e},i=function(t){if(!1!==t.fullSceneLayout.dragmode){var e=n();t.saveLayout(r),t.graphDiv.emit("plotly_relayout",e)}};return t.glplot.canvas&&(t.glplot.canvas.addEventListener("mouseup",(function(){i(t)})),t.glplot.canvas.addEventListener("wheel",(function(r){if(e._context._scrollZoom.gl3d){if(t.camera._ortho){var n=r.deltaX>r.deltaY?1.1:1/1.1,a=t.glplot.getAspectratio();t.glplot.setAspectratio({x:n*a.x,y:n*a.y,z:n*a.z})}i(t)}}),!1),t.glplot.canvas.addEventListener("mousemove",(function(){if(!1!==t.fullSceneLayout.dragmode&&0!==t.camera.mouseListener.buttons){var e=n();t.graphDiv.emit("plotly_relayouting",e)}})),t.staticMode||t.glplot.canvas.addEventListener("webglcontextlost",(function(r){e&&e.emit&&e.emit("plotly_webglcontextlost",{event:r,layer:t.id})}),!1)),t.glplot.oncontextloss=function(){t.recoverContext()},t.glplot.onrender=function(){t.render()},!0},proto$1.render=function(){var t,e=this,r=e.graphDiv,n=e.svgContainer,i=e.container.getBoundingClientRect();r._fullLayout._calcInverseTransform(r);var a=r._fullLayout._invScaleX,o=r._fullLayout._invScaleY,s=i.width*a,l=i.height*o;n.setAttributeNS(null,"viewBox","0 0 "+s+" "+l),n.setAttributeNS(null,"width",s),n.setAttributeNS(null,"height",l),tick_marks(e),e.glplot.axes.update(e.axesOptions);for(var c=Object.keys(e.traces),u=null,d=e.glplot.selection,h=0;h<c.length;++h)"skip"!==(t=e.traces[c[h]]).data.hoverinfo&&t.handlePick(d)&&(u=t),t.setContourLevels&&t.setContourLevels();function g(t,r,n){var i=e.fullSceneLayout[t+"axis"];return"log"!==i.type&&(r=i.d2l(r)),axes_1.hoverLabelText(i,r,n)}if(null!==u){var f=project_1(e.glplot.cameraParams,d.dataCoordinate);t=u.data;var p,m=r._fullData[t.index],y=d.index,b={xLabel:g("x",d.traceCoordinate[0],t.xhoverformat),yLabel:g("y",d.traceCoordinate[1],t.yhoverformat),zLabel:g("z",d.traceCoordinate[2],t.zhoverformat)},v=fx.castHoverinfo(m,e.fullLayout,y),x=(v||"").split("+"),I=v&&"all"===v;m.hovertemplate||I||(-1===x.indexOf("x")&&(b.xLabel=void 0),-1===x.indexOf("y")&&(b.yLabel=void 0),-1===x.indexOf("z")&&(b.zLabel=void 0),-1===x.indexOf("text")&&(d.textLabel=void 0),-1===x.indexOf("name")&&(u.name=void 0));var B=[];"cone"===t.type||"streamtube"===t.type?(b.uLabel=g("x",d.traceCoordinate[3],t.uhoverformat),(I||-1!==x.indexOf("u"))&&B.push("u: "+b.uLabel),b.vLabel=g("y",d.traceCoordinate[4],t.vhoverformat),(I||-1!==x.indexOf("v"))&&B.push("v: "+b.vLabel),b.wLabel=g("z",d.traceCoordinate[5],t.whoverformat),(I||-1!==x.indexOf("w"))&&B.push("w: "+b.wLabel),b.normLabel=d.traceCoordinate[6].toPrecision(3),(I||-1!==x.indexOf("norm"))&&B.push("norm: "+b.normLabel),"streamtube"===t.type&&(b.divergenceLabel=d.traceCoordinate[7].toPrecision(3),(I||-1!==x.indexOf("divergence"))&&B.push("divergence: "+b.divergenceLabel)),d.textLabel&&B.push(d.textLabel),p=B.join("<br>")):"isosurface"===t.type||"volume"===t.type?(b.valueLabel=axes_1.hoverLabelText(e._mockAxis,e._mockAxis.d2l(d.traceCoordinate[3]),t.valuehoverformat),B.push("value: "+b.valueLabel),d.textLabel&&B.push(d.textLabel),p=B.join("<br>")):p=d.textLabel;var C={x:d.traceCoordinate[0],y:d.traceCoordinate[1],z:d.traceCoordinate[2],data:m._input,fullData:m,curveNumber:m.index,pointNumber:y};fx.appendArrayPointValue(C,m,y),t._module.eventData&&(C=m._module.eventData(C,d,m,{},y));var F={points:[C]};if(e.fullSceneLayout.hovermode){var A=[];fx.loneHover({trace:m,x:(.5+.5*f[0]/f[3])*s,y:(.5-.5*f[1]/f[3])*l,xLabel:b.xLabel,yLabel:b.yLabel,zLabel:b.zLabel,text:p,name:u.name,color:fx.castHoverOption(m,y,"bgcolor")||u.color,borderColor:fx.castHoverOption(m,y,"bordercolor"),fontFamily:fx.castHoverOption(m,y,"font.family"),fontSize:fx.castHoverOption(m,y,"font.size"),fontColor:fx.castHoverOption(m,y,"font.color"),nameLength:fx.castHoverOption(m,y,"namelength"),textAlign:fx.castHoverOption(m,y,"align"),hovertemplate:lib_1.castOption(m,y,"hovertemplate"),hovertemplateLabels:lib_1.extendFlat({},C,b),eventData:[C]},{container:n,gd:r,inOut_bbox:A}),C.bbox=A[0]}d.buttons&&d.distance<5?r.emit("plotly_click",F):r.emit("plotly_hover",F),this.oldEventData=F}else fx.loneUnhover(n),this.oldEventData&&r.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;e.drawAnnotations(e)},proto$1.recoverContext=function(){var t=this;t.glplot.dispose();var e=function(){t.glplot.gl.isContextLost()?requestAnimationFrame(e):t.initializeGLPlot()?t.plot.apply(t,t.plotArgs):lib_1.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(e)};var axisProperties=["xaxis","yaxis","zaxis"];function computeTraceBounds(t,e,r){for(var n=t.fullSceneLayout,i=0;i<3;i++){var a=axisProperties[i],o=a.charAt(0),s=n[a],l=e[o],c=e[o+"calendar"],u=e["_"+o+"length"];if(lib_1.isArrayOrTypedArray(l))for(var d,h=0;h<(u||l.length);h++)if(lib_1.isArrayOrTypedArray(l[h]))for(var g=0;g<l[h].length;++g)d=s.d2l(l[h][g],0,c),!isNaN(d)&&isFinite(d)&&(r[0][i]=Math.min(r[0][i],d),r[1][i]=Math.max(r[1][i],d));else d=s.d2l(l[h],0,c),!isNaN(d)&&isFinite(d)&&(r[0][i]=Math.min(r[0][i],d),r[1][i]=Math.max(r[1][i],d));else r[0][i]=Math.min(r[0][i],0),r[1][i]=Math.max(r[1][i],u-1)}}function computeAnnotationBounds(t,e){for(var r=t.fullSceneLayout,n=r.annotations||[],i=0;i<3;i++)for(var a=axisProperties[i],o=a.charAt(0),s=r[a],l=0;l<n.length;l++){var c=n[l];if(c.visible){var u=s.r2l(c[o]);!isNaN(u)&&isFinite(u)&&(e[0][i]=Math.min(e[0][i],u),e[1][i]=Math.max(e[1][i],u))}}}function getCameraArrays(t){return[[t.eye.x,t.eye.y,t.eye.z],[t.center.x,t.center.y,t.center.z],[t.up.x,t.up.y,t.up.z]]}function getLayoutCamera(t){return{up:{x:t.up[0],y:t.up[1],z:t.up[2]},center:{x:t.center[0],y:t.center[1],z:t.center[2]},eye:{x:t.eye[0],y:t.eye[1],z:t.eye[2]},projection:{type:!0===t._ortho?"orthographic":"perspective"}}}function flipPixels(t,e,r){for(var n=0,i=r-1;n<i;++n,--i)for(var a=0;a<e;++a)for(var o=0;o<4;++o){var s=4*(e*n+a)+o,l=4*(e*i+a)+o,c=t[s];t[s]=t[l],t[l]=c}}function correctRGB(t,e,r){for(var n=0;n<r;++n)for(var i=0;i<e;++i){var a=4*(e*n+i),o=t[a+3];if(o>0)for(var s=255/o,l=0;l<3;++l)t[a+l]=Math.min(s*t[a+l],255)}}proto$1.plot=function(t,e,r){var n=this;if(n.plotArgs=[t,e,r],!n.glplot.contextLost){var i,a,o,s,l,c,u=e[n.id],d=r[n.id];n.fullLayout=e,n.fullSceneLayout=u,n.axesOptions.merge(e,u),n.spikeOptions.merge(u),n.setViewport(u),n.updateFx(u.dragmode,u.hovermode),n.camera.enableWheel=n.graphDiv._context._scrollZoom.gl3d,n.glplot.setClearColor(str2rgbarray(u.bgcolor)),n.setConvert(l),t?Array.isArray(t)||(t=[t]):t=[];var h=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(o=0;o<t.length;++o)!0===(i=t[o]).visible&&0!==i._length&&computeTraceBounds(this,i,h);computeAnnotationBounds(this,h);var g=[1,1,1];for(s=0;s<3;++s)h[1][s]===h[0][s]?g[s]=1:g[s]=1/(h[1][s]-h[0][s]);for(n.dataScale=g,n.convertAnnotations(this),o=0;o<t.length;++o)!0===(i=t[o]).visible&&0!==i._length&&((a=n.traces[i.uid])?a.data.type===i.type?a.update(i):(a.dispose(),a=i._module.plot(this,i),n.traces[i.uid]=a):(a=i._module.plot(this,i),n.traces[i.uid]=a),a.name=i.name);var f=Object.keys(n.traces);t:for(o=0;o<f.length;++o){for(s=0;s<t.length;++s)if(t[s].uid===f[o]&&!0===t[s].visible&&0!==t[s]._length)continue t;(a=n.traces[f[o]]).dispose(),delete n.traces[f[o]]}n.glplot.objects.sort((function(t,e){return t._trace.data.index-e._trace.data.index}));var p,m=[[0,0,0],[0,0,0]],y=[],b={};for(o=0;o<3;++o){if((c=(l=u[axisProperties[o]]).type)in b?(b[c].acc*=g[o],b[c].count+=1):b[c]={acc:g[o],count:1},l.autorange){m[0][o]=1/0,m[1][o]=-1/0;var v=n.glplot.objects,x=n.fullSceneLayout.annotations||[],I=l._name.charAt(0);for(s=0;s<v.length;s++){var B=v[s],C=B.bounds,F=B._trace.data._pad||0;"ErrorBars"===B.constructor.name&&l._lowerLogErrorBound?m[0][o]=Math.min(m[0][o],l._lowerLogErrorBound):m[0][o]=Math.min(m[0][o],C[0][o]/g[o]-F),m[1][o]=Math.max(m[1][o],C[1][o]/g[o]+F)}for(s=0;s<x.length;s++){var A=x[s];if(A.visible){var Q=l.r2l(A[I]);m[0][o]=Math.min(m[0][o],Q),m[1][o]=Math.max(m[1][o],Q)}}if("rangemode"in l&&"tozero"===l.rangemode&&(m[0][o]=Math.min(m[0][o],0),m[1][o]=Math.max(m[1][o],0)),m[0][o]>m[1][o])m[0][o]=-1,m[1][o]=1;else{var _=m[1][o]-m[0][o];m[0][o]-=_/32,m[1][o]+=_/32}if("reversed"===l.autorange){var w=m[0][o];m[0][o]=m[1][o],m[1][o]=w}}else{var U=l.range;m[0][o]=l.r2l(U[0]),m[1][o]=l.r2l(U[1])}m[0][o]===m[1][o]&&(m[0][o]-=1,m[1][o]+=1),y[o]=m[1][o]-m[0][o],n.glplot.setBounds(o,{min:m[0][o]*g[o],max:m[1][o]*g[o]})}var S=u.aspectmode;if("cube"===S)p=[1,1,1];else if("manual"===S){var E=u.aspectratio;p=[E.x,E.y,E.z]}else{if("auto"!==S&&"data"!==S)throw new Error("scene.js aspectRatio was not one of the enumerated types");var L=[1,1,1];for(o=0;o<3;++o){var T=b[c=(l=u[axisProperties[o]]).type];L[o]=Math.pow(T.acc,1/T.count)/g[o]}p="data"===S||Math.max.apply(null,L)/Math.min.apply(null,L)<=4?L:[1,1,1]}u.aspectratio.x=d.aspectratio.x=p[0],u.aspectratio.y=d.aspectratio.y=p[1],u.aspectratio.z=d.aspectratio.z=p[2],n.glplot.setAspectratio(u.aspectratio),n.viewInitial.aspectratio||(n.viewInitial.aspectratio={x:u.aspectratio.x,y:u.aspectratio.y,z:u.aspectratio.z}),n.viewInitial.aspectmode||(n.viewInitial.aspectmode=u.aspectmode);var R=u.domain||null,k=e._size||null;if(R&&k){var G=n.container.style;G.position="absolute",G.left=k.l+R.x[0]*k.w+"px",G.top=k.t+(1-R.y[1])*k.h+"px",G.width=k.w*(R.x[1]-R.x[0])+"px",G.height=k.h*(R.y[1]-R.y[0])+"px"}n.glplot.redraw()}},proto$1.destroy=function(){var t=this;t.glplot&&(t.camera.mouseListener.enabled=!1,t.container.removeEventListener("wheel",t.camera.wheelListener),t.camera=null,t.glplot.dispose(),t.container.parentNode.removeChild(t.container),t.glplot=null)},proto$1.getCamera=function(){var t=this;return t.camera.view.recalcMatrix(t.camera.view.lastT()),getLayoutCamera(t.camera)},proto$1.setViewport=function(t){var e=this,r=t.camera;e.camera.lookAt.apply(this,getCameraArrays(r)),e.glplot.setAspectratio(t.aspectratio),"orthographic"===r.projection.type!==e.camera._ortho&&(e.glplot.redraw(),e.glplot.clearRGBA(),e.glplot.dispose(),e.initializeGLPlot())},proto$1.isCameraChanged=function(t){var e=this.getCamera(),r=lib_1.nestedProperty(t,this.id+".camera").get();function n(t,e,r,n){var i=["up","center","eye"],a=["x","y","z"];return e[i[r]]&&t[i[r]][a[n]]===e[i[r]][a[n]]}var i=!1;if(void 0===r)i=!0;else{for(var a=0;a<3;a++)for(var o=0;o<3;o++)if(!n(e,r,a,o)){i=!0;break}(!r.projection||e.projection&&e.projection.type!==r.projection.type)&&(i=!0)}return i},proto$1.isAspectChanged=function(t){var e=this.glplot.getAspectratio(),r=lib_1.nestedProperty(t,this.id+".aspectratio").get();return void 0===r||r.x!==e.x||r.y!==e.y||r.z!==e.z},proto$1.saveLayout=function(t){var e,r,n,i,a,o,s=this,l=s.fullLayout,c=s.isCameraChanged(t),u=s.isAspectChanged(t),d=c||u;if(d){var h={};if(c&&(e=s.getCamera(),n=(r=lib_1.nestedProperty(t,s.id+".camera")).get(),h[s.id+".camera"]=n),u&&(i=s.glplot.getAspectratio(),o=(a=lib_1.nestedProperty(t,s.id+".aspectratio")).get(),h[s.id+".aspectratio"]=o),registry.call("_storeDirectGUIEdit",t,l._preGUI,h),c)r.set(e),lib_1.nestedProperty(l,s.id+".camera").set(e);if(u)a.set(i),lib_1.nestedProperty(l,s.id+".aspectratio").set(i),s.glplot.redraw()}return d},proto$1.updateFx=function(t,e){var r=this,n=r.camera;if(n)if("orbit"===t)n.mode="orbit",n.keyBindingMode="rotate";else if("turntable"===t){n.up=[0,0,1],n.mode="turntable",n.keyBindingMode="rotate";var i=r.graphDiv,a=i._fullLayout,o=r.fullSceneLayout.camera,s=o.up.x,l=o.up.y,c=o.up.z;if(c/Math.sqrt(s*s+l*l+c*c)<.999){var u=r.id+".camera.up",d={x:0,y:0,z:1},h={};h[u]=d;var g=i.layout;registry.call("_storeDirectGUIEdit",g,a._preGUI,h),o.up=d,lib_1.nestedProperty(g,u).set(d)}}else n.keyBindingMode=t;r.fullSceneLayout.hovermode=e},proto$1.toImage=function(t){var e=this;t||(t="png"),e.staticMode&&e.container.appendChild(STATIC_CANVAS),e.glplot.redraw();var r=e.glplot.gl,n=r.drawingBufferWidth,i=r.drawingBufferHeight;r.bindFramebuffer(r.FRAMEBUFFER,null);var a=new Uint8Array(n*i*4);r.readPixels(0,0,n,i,r.RGBA,r.UNSIGNED_BYTE,a),flipPixels(a,n,i),correctRGB(a,n,i);var o=document.createElement("canvas");o.width=n,o.height=i;var s,l=o.getContext("2d"),c=l.createImageData(n,i);switch(c.data.set(a),l.putImageData(c,0,0),t){case"jpeg":s=o.toDataURL("image/jpeg");break;case"webp":s=o.toDataURL("image/webp");break;default:s=o.toDataURL("image/png")}return e.staticMode&&e.container.removeChild(STATIC_CANVAS),s},proto$1.setConvert=function(){for(var t=0;t<3;t++){var e=this.fullSceneLayout[axisProperties[t]];axes_1.setConvert(e,this.fullLayout),e.setScale=lib_1.noop}},proto$1.make4thDimension=function(){var t=this,e=t.graphDiv._fullLayout;t._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},axes_1.setConvert(t._mockAxis,e)};var scene=Scene,attributes$1={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's 3D coordinate system and","a 3D scene.","If *scene* (the default value), the (x,y,z) coordinates refer to","`layout.scene`.","If *scene2*, the (x,y,z) coordinates refer to `layout.scene2`,","and so on."].join(" ")}},extendFlat$1=extend.extendFlat,overrideAll=edit_types.overrideAll,axis_attributes=overrideAll({visible:layout_attributes$3.visible,showspikes:{valType:"boolean",dflt:!0,description:["Sets whether or not spikes starting from","data points to this axis' wall are shown on hover."].join(" ")},spikesides:{valType:"boolean",dflt:!0,description:["Sets whether or not spikes extending from the","projection data points to this axis' wall boundaries","are shown on hover."].join(" ")},spikethickness:{valType:"number",min:0,dflt:2,description:"Sets the thickness (in px) of the spikes."},spikecolor:{valType:"color",dflt:color_1.defaultLine,description:"Sets the color of the spikes."},showbackground:{valType:"boolean",dflt:!1,description:["Sets whether or not this axis' wall","has a background color."].join(" ")},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)",description:"Sets the background color of this axis' wall."},showaxeslabels:{valType:"boolean",dflt:!0,description:"Sets whether or not this axis is labeled"},color:layout_attributes$3.color,categoryorder:layout_attributes$3.categoryorder,categoryarray:layout_attributes$3.categoryarray,title:{text:layout_attributes$3.title.text,font:layout_attributes$3.title.font},type:extendFlat$1({},layout_attributes$3.type,{values:["-","linear","log","date","category"]}),autotypenumbers:layout_attributes$3.autotypenumbers,autorange:layout_attributes$3.autorange,rangemode:layout_attributes$3.rangemode,range:extendFlat$1({},layout_attributes$3.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:layout_attributes$3.tickmode,nticks:layout_attributes$3.nticks,tick0:layout_attributes$3.tick0,dtick:layout_attributes$3.dtick,tickvals:layout_attributes$3.tickvals,ticktext:layout_attributes$3.ticktext,ticks:layout_attributes$3.ticks,mirror:layout_attributes$3.mirror,ticklen:layout_attributes$3.ticklen,tickwidth:layout_attributes$3.tickwidth,tickcolor:layout_attributes$3.tickcolor,showticklabels:layout_attributes$3.showticklabels,tickfont:layout_attributes$3.tickfont,tickangle:layout_attributes$3.tickangle,tickprefix:layout_attributes$3.tickprefix,showtickprefix:layout_attributes$3.showtickprefix,ticksuffix:layout_attributes$3.ticksuffix,showticksuffix:layout_attributes$3.showticksuffix,showexponent:layout_attributes$3.showexponent,exponentformat:layout_attributes$3.exponentformat,minexponent:layout_attributes$3.minexponent,separatethousands:layout_attributes$3.separatethousands,tickformat:layout_attributes$3.tickformat,tickformatstops:layout_attributes$3.tickformatstops,hoverformat:layout_attributes$3.hoverformat,showline:layout_attributes$3.showline,linecolor:layout_attributes$3.linecolor,linewidth:layout_attributes$3.linewidth,showgrid:layout_attributes$3.showgrid,gridcolor:extendFlat$1({},layout_attributes$3.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:layout_attributes$3.gridwidth,zeroline:layout_attributes$3.zeroline,zerolinecolor:layout_attributes$3.zerolinecolor,zerolinewidth:layout_attributes$3.zerolinewidth,_deprecated:{title:layout_attributes$3._deprecated.title,titlefont:layout_attributes$3._deprecated.titlefont}},"plot","from-root"),domainAttrs=domain.attributes,extendFlat=extend.extendFlat,counterRegex=lib_1.counterRegex;function makeCameraVector(t,e,r){return{x:{valType:"number",dflt:t,editType:"camera"},y:{valType:"number",dflt:e,editType:"camera"},z:{valType:"number",dflt:r,editType:"camera"},editType:"camera"}}var layout_attributes={_arrayAttrRegexps:[counterRegex("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:extendFlat(makeCameraVector(0,0,1),{description:["Sets the (x,y,z) components of the 'up' camera vector.","This vector determines the up direction of this scene","with respect to the page.","The default is *{x: 0, y: 0, z: 1}* which means that","the z axis points up."].join(" ")}),center:extendFlat(makeCameraVector(0,0,0),{description:["Sets the (x,y,z) components of the 'center' camera vector","This vector determines the translation (x,y,z) space","about the center of this scene.","By default, there is no such translation."].join(" ")}),eye:extendFlat(makeCameraVector(1.25,1.25,1.25),{description:["Sets the (x,y,z) components of the 'eye' camera vector.","This vector determines the view point about the origin","of this scene."].join(" ")}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc",description:["Sets the projection type. The projection type could be","either *perspective* or *orthographic*. The default is","*perspective*."].join(" ")},editType:"calc"},editType:"camera"},domain:domainAttrs({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0},description:["If *cube*, this scene's axes are drawn as a cube,","regardless of the axes' ranges.","If *data*, this scene's axes are drawn","in proportion with the axes' ranges.","If *manual*, this scene's axes are drawn","in proportion with the input of *aspectratio*","(the default behavior if *aspectratio* is provided).","If *auto*, this scene's axes are drawn","using the results of *data* except when one axis","is more than four times the size of the two others,","where in that case the results of *cube* are used."].join(" ")},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"},description:["Sets this scene's axis aspectratio."].join(" ")},xaxis:axis_attributes,yaxis:axis_attributes,zaxis:axis_attributes,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot",description:["Determines the mode of drag interactions for this scene."].join(" ")},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar",description:["Determines the mode of hover interactions for this scene."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in camera attributes.","Defaults to `layout.uirevision`."].join(" ")},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera",description:"Obsolete. Use `camera` instead."}}},handleDomainDefaults=domain.defaults,subplot_defaults=function(t,e,r,n){var i,a,o=n.type,s=n.attributes,l=n.handleDefaults,c=n.partition||"x",u=e._subplots[o],d=u.length,h=d&&u[0].replace(/\d+$/,"");function g(t,e){return lib_1.coerce(i,a,s,t,e)}for(var f=0;f<d;f++){var p=u[f];i=t[p]?t[p]:t[p]={},a=plot_template.newContainer(e,p,h),n.noUirevision||g("uirevision",e.uirevision);var m={};m[c]=[f/d,(f+1)/d],handleDomainDefaults(a,e,g,m),n.id=p,l(i,a,g,n)}},colorMix=tinycolor.mix,axesNames=["xaxis","yaxis","zaxis"],gridLightness=13600/187,axis_defaults=function(t,e,r){var n,i;function a(t,e){return lib_1.coerce(n,i,axis_attributes,t,e)}for(var o=0;o<axesNames.length;o++){var s=axesNames[o];n=t[s]||{},(i=plot_template.newContainer(e,s))._id=s[0]+r.scene,i._name=s,type_defaults(n,i,a,r),axis_defaults$1(n,i,a,{font:r.font,letter:s[0],data:r.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:r.bgColor,calendar:r.calendar},r.fullLayout),a("gridcolor",colorMix(i.color,r.bgColor,gridLightness).toRgbString()),a("title.text",s[0]),i.setScale=lib_1.noop,a("showspikes")&&(a("spikesides"),a("spikethickness"),a("spikecolor",i.color)),a("showaxeslabels"),a("showbackground")&&a("backgroundcolor")}},getSubplotData=get_data.getSubplotData,GL3D="gl3d",defaults$1=function(t,e,r){var n=e._basePlotModules.length>1;subplot_defaults(t,e,r,{type:GL3D,attributes:layout_attributes,handleDefaults:handleGl3dDefaults,fullLayout:e,font:e.font,fullData:r,getDfltFromLayout:function(e){if(!n)return lib_1.validate(t[e],layout_attributes[e])?t[e]:void 0},autotypenumbersDflt:e.autotypenumbers,paper_bgcolor:e.paper_bgcolor,calendar:e.calendar})};function handleGl3dDefaults(t,e,r,n){for(var i=r("bgcolor"),a=color_1.combine(i,n.paper_bgcolor),o=["up","center","eye"],s=0;s<o.length;s++)r("camera."+o[s]+".x"),r("camera."+o[s]+".y"),r("camera."+o[s]+".z");r("camera.projection.type");var l=!!r("aspectratio.x")&&!!r("aspectratio.y")&&!!r("aspectratio.z"),c=r("aspectmode",l?"manual":"auto");l||(t.aspectratio=e.aspectratio={x:1,y:1,z:1},"manual"===c&&(e.aspectmode="auto"),t.aspectmode=e.aspectmode);var u=getSubplotData(n.fullData,GL3D,n.id);axis_defaults(t,e,{font:n.font,scene:n.id,data:u,bgColor:a,calendar:n.calendar,autotypenumbersDflt:n.autotypenumbersDflt,fullLayout:n.fullLayout}),registry.getComponentMethod("annotations3d","handleDefaults")(t,e,n);var d=n.getDfltFromLayout("dragmode");if(!1!==d&&!d)if(d="orbit",t.camera&&t.camera.up){var h=t.camera.up.x,g=t.camera.up.y,f=t.camera.up.z;0!==f&&(h&&g&&f?f/Math.sqrt(h*h+g*g+f*f)>.999&&(d="turntable"):d="turntable")}else d="turntable";r("dragmode",d),r("hovermode",n.getDfltFromLayout("hovermode"))}var gl3d=createCommonjsModule((function(t,e){var r=edit_types.overrideAll,n=get_data.getSubplotData,i="gl3d",a="scene";e.name=i,e.attr=a,e.idRoot=a,e.idRegex=e.attrRegex=lib_1.counterRegex("scene"),e.attributes=attributes$1,e.layoutAttributes=layout_attributes,e.baseLayoutAttrOverrides=r({hoverlabel:layout_attributes$5.hoverlabel},"plot","nested"),e.supplyLayoutDefaults=defaults$1,e.plot=function(t){for(var e=t._fullLayout,r=t._fullData,a=e._subplots.gl3d,o=0;o<a.length;o++){var s=a[o],l=n(r,i,s),c=e[s],u=c.camera,d=c._scene;d||(d=new scene({id:s,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio,camera:u},e),c._scene=d),d.viewInitial||(d.viewInitial={up:{x:u.up.x,y:u.up.y,z:u.up.z},eye:{x:u.eye.x,y:u.eye.y,z:u.eye.z},center:{x:u.center.x,y:u.center.y,z:u.center.z}}),d.plot(l,e,t.layout)}},e.clean=function(t,e,r,n){for(var i=n._subplots.gl3d||[],a=0;a<i.length;a++){var o=i[a];!e[o]&&n[o]._scene&&(n[o]._scene.destroy(),n._infolayer&&n._infolayer.selectAll(".annotation-"+o).remove())}},e.toSVG=function(t){for(var e=t._fullLayout,r=e._subplots.gl3d,n=e._size,i=0;i<r.length;i++){var a=e[r[i]],o=a.domain,s=a._scene,l=s.toImage("png");e._glimages.append("svg:image").attr({xmlns:xmlns_namespaces.svg,"xlink:href":l,x:n.l+n.w*o.x[0],y:n.t+n.h*(1-o.y[1]),width:n.w*(o.x[1]-o.x[0]),height:n.h*(o.y[1]-o.y[0]),preserveAspectRatio:"none"}),s.destroy()}},e.cleanId=function(t){if(t.match(/^scene[0-9]*$/)){var e=t.substr(5);return"1"===e&&(e=""),a+e}},e.updateFx=function(t){for(var e=t._fullLayout,r=e._subplots.gl3d,n=0;n<r.length;n++){e[r[n]]._scene.updateFx(e.dragmode,e.hovermode)}}})),isosurface$1={attributes:attributes$2,supplyDefaults:defaults$2.supplyDefaults,calc:calc$1,colorbar:{min:"cmin",max:"cmax"},plot:convert$2.createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:gl3d,categories:["gl3d","showLegend"],meta:{description:["Draws isosurfaces between iso-min and iso-max values with coordinates given by","four 1-dimensional arrays containing the `value`, `x`, `y` and `z` of every vertex","of a uniform or non-uniform 3-D grid. Horizontal or vertical slices, caps as well as","spaceframe between iso-min and iso-max values could also be drawn using this trace."].join(" ")}},isosurface=isosurface$1,PlotlyIsoSurface=_mergeNamespaces({__proto__:null,default:isosurface$1},[isosurface$1]),gl3d_dashes={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]},gl3d_markers={circle:"â","circle-open":"â",square:"â ","square-open":"â¡",diamond:"â","diamond-open":"â",cross:"+",x:"â"};function calculateAxisErrors(t,e,r,n){if(!e||!e.visible)return null;for(var i=registry.getComponentMethod("errorbars","makeComputeError")(e),a=new Array(t.length),o=0;o<t.length;o++){var s=i(+t[o],o);if("log"===n.type){var l=n.c2l(t[o]),c=t[o]-s[0],u=t[o]+s[1];if(a[o]=[(n.c2l(c,!0)-l)*r,(n.c2l(u,!0)-l)*r],c>0){var d=n.c2l(c);n._lowerLogErrorBound||(n._lowerLogErrorBound=d),n._lowerErrorBound=Math.min(n._lowerLogErrorBound,d)}}else a[o]=[-s[0]*r,s[1]*r]}return a}function dataLength(t){for(var e=0;e<t.length;e++)if(t[e])return t[e].length;return 0}function calculateErrors(t,e,r){var n=[calculateAxisErrors(t.x,t.error_x,e[0],r.xaxis),calculateAxisErrors(t.y,t.error_y,e[1],r.yaxis),calculateAxisErrors(t.z,t.error_z,e[2],r.zaxis)],i=dataLength(n);if(0===i)return null;for(var a=new Array(i),o=0;o<i;o++){for(var s=[[0,0,0],[0,0,0]],l=0;l<3;l++)if(n[l])for(var c=0;c<2;c++)s[c][l]=n[l][o][c];a[o]=s}return a}var calc_errors=calculateErrors,createLinePlot=stackgl_modules.gl_line3d,createScatterPlot=stackgl_modules.gl_scatter3d,createErrorBars=stackgl_modules.gl_error3d,createMesh=stackgl_modules.gl_mesh3d,triangulate=stackgl_modules.delaunay_triangulate,formatColor=gl_format_color.formatColor,appendArrayPointValue=helpers$a.appendArrayPointValue;function LineWithMarkers(t,e){this.scene=t,this.uid=e,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var proto=LineWithMarkers.prototype;function constructDelaunay(t,e,r){var n,i=(r+1)%3,a=(r+2)%3,o=[],s=[];for(n=0;n<t.length;++n){var l=t[n];!isNaN(l[i])&&isFinite(l[i])&&!isNaN(l[a])&&isFinite(l[a])&&(o.push([l[i],l[a]]),s.push(n))}var c=triangulate(o);for(n=0;n<c.length;++n)for(var u=c[n],d=0;d<u.length;++d)u[d]=s[u[d]];return{positions:t,cells:c,meshColor:e}}function calculateErrorParams(t){for(var e=[0,0,0],r=[[0,0,0],[0,0,0],[0,0,0]],n=[1,1,1],i=0;i<3;i++){var a=t[i];a&&!1!==a.copy_zstyle&&!1!==t[2].visible&&(a=t[2]),a&&a.visible&&(e[i]=a.width/2,r[i]=str2rgbarray(a.color),n[i]=a.thickness)}return{capSize:e,color:r,lineWidth:n}}function parseAlignmentX(t){return null==t?0:t.indexOf("left")>-1?-1:t.indexOf("right")>-1?1:0}function parseAlignmentY(t){return null==t?0:t.indexOf("top")>-1?-1:t.indexOf("bottom")>-1?1:0}function calculateTextOffset(t){var e=[0,0];if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=[0,0],t[r]&&(e[r][0]=parseAlignmentX(t[r]),e[r][1]=parseAlignmentY(t[r]));else e[0]=parseAlignmentX(t),e[1]=parseAlignmentY(t);return e}function calculateSize(t,e){return e(4*t)}function calculateSymbol(t){return gl3d_markers[t]}function formatParam(t,e,r,n,i){var a=null;if(lib_1.isArrayOrTypedArray(t)){a=[];for(var o=0;o<e;o++)void 0===t[o]?a[o]=n:a[o]=r(t[o],i)}else a=r(t,lib_1.identity);return a}function convertPlotlyOptions(t,e){var r,n,i,a,o,s,l=[],c=t.fullSceneLayout,u=t.dataScale,d=c.xaxis,h=c.yaxis,g=c.zaxis,f=e.marker,p=e.line,m=e.x||[],y=e.y||[],b=e.z||[],v=m.length,x=e.xcalendar,I=e.ycalendar,B=e.zcalendar;for(o=0;o<v;o++)r=d.d2l(m[o],0,x)*u[0],n=h.d2l(y[o],0,I)*u[1],i=g.d2l(b[o],0,B)*u[2],l[o]=[r,n,i];if(Array.isArray(e.text))s=e.text;else if(void 0!==e.text)for(s=new Array(v),o=0;o<v;o++)s[o]=e.text;function C(t,e){var r=c[t];return axes_1.tickText(r,r.d2l(e),!0).text}var F=e.texttemplate;if(F){var A=t.fullLayout._d3locale,Q=Array.isArray(F),_=Q?Math.min(F.length,v):v,w=Q?function(t){return F[t]}:function(){return F};for(s=new Array(_),o=0;o<_;o++){var U={x:m[o],y:y[o],z:b[o]},S={xLabel:C("xaxis",m[o]),yLabel:C("yaxis",y[o]),zLabel:C("zaxis",b[o])},E={};appendArrayPointValue(E,e,o);var L=e._meta||{};s[o]=lib_1.texttemplateString(w(o),S,A,E,U,L)}}if(a={position:l,mode:e.mode,text:s},"line"in e&&(a.lineColor=formatColor(p,1,v),a.lineWidth=p.width,a.lineDashes=p.dash),"marker"in e){var T=make_bubble_size_func(e);a.scatterColor=formatColor(f,1,v),a.scatterSize=formatParam(f.size,v,calculateSize,20,T),a.scatterMarker=formatParam(f.symbol,v,calculateSymbol,"â"),a.scatterLineWidth=f.line.width,a.scatterLineColor=formatColor(f.line,1,v),a.scatterAngle=0}"textposition"in e&&(a.textOffset=calculateTextOffset(e.textposition),a.textColor=formatColor(e.textfont,1,v),a.textSize=formatParam(e.textfont.size,v,lib_1.identity,12),a.textFont=e.textfont.family,a.textAngle=0);var R=["x","y","z"];for(a.project=[!1,!1,!1],a.projectScale=[1,1,1],a.projectOpacity=[1,1,1],o=0;o<3;++o){var k=e.projection[R[o]];(a.project[o]=k.show)&&(a.projectOpacity[o]=k.opacity,a.projectScale[o]=k.scale)}a.errorBounds=calc_errors(e,u,c);var G=calculateErrorParams([e.error_x,e.error_y,e.error_z]);return a.errorColor=G.color,a.errorLineWidth=G.lineWidth,a.errorCapSize=G.capSize,a.delaunayAxis=e.surfaceaxis,a.delaunayColor=str2rgbarray(e.surfacecolor),a}function _arrayToColor(t){if(lib_1.isArrayOrTypedArray(t)){var e=t[0];return lib_1.isArrayOrTypedArray(e)&&(t=e),"rgb("+t.slice(0,3).map((function(t){return Math.round(255*t)}))+")"}return null}function arrayToColor(t){return lib_1.isArrayOrTypedArray(t)?4===t.length&&"number"==typeof t[0]?_arrayToColor(t):t.map(_arrayToColor):null}function createLineWithMarkers(t,e){var r=new LineWithMarkers(t,e.uid);return r.update(e),r}proto.handlePick=function(t){if(t.object&&(t.object===this.linePlot||t.object===this.delaunayMesh||t.object===this.textMarkers||t.object===this.scatterPlot)){var e=t.index=t.data.index;return t.object.highlight&&t.object.highlight(null),this.scatterPlot&&(t.object=this.scatterPlot,this.scatterPlot.highlight(t.data)),t.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[e]||0===this.textLabels[e])&&(t.textLabel=this.textLabels[e]):t.textLabel=this.textLabels),t.traceCoordinate=[this.data.x[e],this.data.y[e],this.data.z[e]],!0}},proto.update=function(t){var e,r,n,i,a=this.scene.glplot.gl,o=gl3d_dashes.solid;this.data=t;var s=convertPlotlyOptions(this.scene,t);"mode"in s&&(this.mode=s.mode),"lineDashes"in s&&s.lineDashes in gl3d_dashes&&(o=gl3d_dashes[s.lineDashes]),this.color=arrayToColor(s.scatterColor)||arrayToColor(s.lineColor),this.dataPoints=s.position,e={gl:this.scene.glplot.gl,position:s.position,color:s.lineColor,lineWidth:s.lineWidth||1,dashes:o[0],dashScale:o[1],opacity:t.opacity,connectGaps:t.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(e):(this.linePlot=createLinePlot(e),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var l=t.opacity;if(t.marker&&t.marker.opacity&&(l*=t.marker.opacity),r={gl:this.scene.glplot.gl,position:s.position,color:s.scatterColor,size:s.scatterSize,glyph:s.scatterMarker,opacity:l,orthographic:!0,lineWidth:s.scatterLineWidth,lineColor:s.scatterLineColor,project:s.project,projectScale:s.projectScale,projectOpacity:s.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(r):(this.scatterPlot=createScatterPlot(r),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),i={gl:this.scene.glplot.gl,position:s.position,glyph:s.text,color:s.textColor,size:s.textSize,angle:s.textAngle,alignment:s.textOffset,font:s.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:t.opacity},this.textLabels=t.hovertext||t.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(i):(this.textMarkers=createScatterPlot(i),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),n={gl:this.scene.glplot.gl,position:s.position,color:s.errorColor,error:s.errorBounds,lineWidth:s.errorLineWidth,capSize:s.errorCapSize,opacity:t.opacity},this.errorBars?s.errorBounds?this.errorBars.update(n):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):s.errorBounds&&(this.errorBars=createErrorBars(n),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),s.delaunayAxis>=0){var c=constructDelaunay(s.position,s.delaunayColor,s.delaunayAxis);c.opacity=t.opacity,this.delaunayMesh?this.delaunayMesh.update(c):(c.gl=a,this.delaunayMesh=createMesh(c),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},proto.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};var convert=createLineWithMarkers,attributes=createCommonjsModule((function(t){var e=axis_format_attributes.axisHoverFormat,r=template_attributes.hovertemplateAttrs,n=template_attributes.texttemplateAttrs,i=extend.extendFlat,a=edit_types.overrideAll,o=attributes$j.line,s=attributes$j.marker,l=s.line,c=i({width:o.width,dash:{valType:"enumerated",values:sort_object_keys(gl3d_dashes),dflt:"solid",description:"Sets the dash style of the lines."}},attributes$m("line"));function u(t){return{show:{valType:"boolean",dflt:!1,description:["Sets whether or not projections are shown along the",t,"axis."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,description:"Sets the projection color."},scale:{valType:"number",min:0,max:10,dflt:2/3,description:["Sets the scale factor determining the size of the","projection marker points."].join(" ")}}}var d=t.exports=a({x:attributes$j.x,y:attributes$j.y,z:{valType:"data_array",description:"Sets the z coordinates."},text:i({},attributes$j.text,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:n({},{}),hovertext:i({},attributes$j.hovertext,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),hovertemplate:r(),xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z"),mode:i({},attributes$j.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1,description:["If *-1*, the scatter points are not fill with a surface","If *0*, *1*, *2*, the scatter points are filled with","a Delaunay surface about the x, y, z respectively."].join(" ")},surfacecolor:{valType:"color",description:"Sets the surface fill color."},projection:{x:u("x"),y:u("y"),z:u("z")},connectgaps:attributes$j.connectgaps,line:c,marker:i({symbol:{valType:"enumerated",values:sort_object_keys(gl3d_markers),dflt:"circle",arrayOk:!0,description:"Sets the marker symbol type."},size:i({},s.size,{dflt:8}),sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode,opacity:i({},s.opacity,{arrayOk:!1,description:["Sets the marker opacity.","Note that the marker opacity for scatter3d traces","must be a scalar value for performance reasons.","To set a blending opacity value","(i.e. which is not transparent), set *marker.color*","to an rgba color and use its alpha channel."].join(" ")}),colorbar:s.colorbar,line:i({width:i({},l.width,{arrayOk:!1})},attributes$m("marker.line"))},attributes$m("marker")),textposition:i({},attributes$j.textposition,{dflt:"top center"}),textfont:{color:attributes$j.textfont.color,size:attributes$j.textfont.size,family:i({},attributes$j.textfont.family,{arrayOk:!1})},opacity:attributes$r.opacity,hoverinfo:i({},attributes$r.hoverinfo)},"calc","nested");d.x.editType=d.y.editType=d.z.editType="calc+clearAxisTypes"})),defaults=function(t,e,r,n){function i(r,n){return lib_1.coerce(t,e,attributes,r,n)}if(handleXYZDefaults(t,e,i,n)){i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),i("mode"),subtypes.hasLines(e)&&(i("connectgaps"),line_defaults(t,e,r,n,i)),subtypes.hasMarkers(e)&&marker_defaults(t,e,r,n,i,{noSelect:!0}),subtypes.hasText(e)&&(i("texttemplate"),text_defaults(t,e,n,i,{noSelect:!0}));var a=(e.line||{}).color,o=(e.marker||{}).color;i("surfaceaxis")>=0&&i("surfacecolor",a||o);for(var s=["x","y","z"],l=0;l<3;++l){var c="projection."+s[l];i(c+".show")&&(i(c+".opacity"),i(c+".scale"))}var u=registry.getComponentMethod("errorbars","supplyDefaults");u(t,e,a||o||r,{axis:"z"}),u(t,e,a||o||r,{axis:"y",inherit:"z"}),u(t,e,a||o||r,{axis:"x",inherit:"z"})}else e.visible=!1};function handleXYZDefaults(t,e,r,n){var i=0,a=r("x"),o=r("y"),s=r("z");return registry.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y","z"],n),a&&o&&s&&(i=Math.min(a.length,o.length,s.length),e._length=e._xlength=e._ylength=e._zlength=i),i}var calc=function(t,e){var r=[{x:!1,y:!1,trace:e,t:{}}];return arrays_to_calcdata$1(r,e),colorscale_calc(t,e),r},scatter3d$1={plot:convert,attributes:attributes,markerSymbols:gl3d_markers,supplyDefaults:defaults,colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:calc,moduleType:"trace",name:"scatter3d",basePlotModule:gl3d,categories:["gl3d","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_3d",description:["The data visualized as scatter point or lines in 3D dimension","is set in `x`, `y`, `z`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","Projections are achieved via `projection`.","Surface fills are achieved via `surfaceaxis`."].join(" ")}},scatter3d=scatter3d$1,PlotlyScatter3d=_mergeNamespaces({__proto__:null,default:scatter3d$1},[scatter3d$1]);let _t$c,_t2$c,_$b=t=>t;core.register([PlotlyIsoSurface,PlotlyScatter3d]);class CPTSpace extends CPTElement{static get properties(){return{surface:{attribute:"surface",type:Boolean,reflect:!0},point:{attribute:"point",type:Boolean,reflect:!0},updateable:{attribute:"updateable",type:Boolean,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0},width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.firstUpdate=!0,this.surface=!0,this.point=!0,this.updateable=!1,this.GAMBLE=0,this.SURE=1,this.NR=.25,this.DEFAULT=.75,this.a=.8,this.l=1.2,this.g=.8,this.xl=0,this.xw=20,this.pw=.5,this.xs=10,this.response=this.DEFAULT,this.range={},this.range.a={start:1e-4,stop:1,step:.05},this.range.l={start:0,stop:10,step:.5},this.range.g={start:0,stop:1,step:.05},this.width=NaN,this.height=NaN,this.rem=NaN,this.parameterSpace=[],this.alignState()}alignState(){this.updateable&&(this.response=CPTMath.xal2v(this.xw,this.a,this.l)*CPTMath.pg2w(this.pw,this.g)+CPTMath.xal2v(this.xl,this.a,this.l)*(1-CPTMath.pg2w(this.pw,this.g))>CPTMath.xal2v(this.xs,this.a,this.l)?this.GAMBLE:this.SURE),this.parameterSpace={a:[],l:[],g:[],uDiff:[]},range(this.range.a.start,this.range.a.stop+.01,this.range.a.step).forEach((t=>{range(this.range.l.start,this.range.l.stop+.01,this.range.l.step).forEach((e=>{range(this.range.g.start,this.range.g.stop+.01,this.range.g.step).forEach((r=>{this.parameterSpace.a.push(t),this.parameterSpace.l.push(e),this.parameterSpace.g.push(r);const n=CPTMath.xal2v(this.xw,t,e)*CPTMath.pg2w(this.pw,r)+CPTMath.xal2v(this.xl,t,e)*(1-CPTMath.pg2w(this.pw,r))-CPTMath.xal2v(this.xs,t,e);this.parameterSpace.uDiff.push(n)}))}))}))}static get styles(){return[super.styles,plotlyStyle,r$6(_t$c||(_t$c=_$b`
        :host {
          display: inline-block;

          width: 28rem;
          height: 20rem;
        }

        .plotly {
          height: 100%;

          cursor: grab;
        }

        /* Plotly modebar styles */
        /* Drawn from: https://github.com/plotly/plotly.js/blob/master/src/components/modebar/modebar.js */
        .plotly:hover .modebar .modebar-group {
          background-color: rgba(255, 255, 255, 0.5);
        }

        .modebar-btn .icon path {
          fill: rgba(68, 68, 68, 0.3);
        }

        .modebar-btn:hover .icon path {
          fill: rgba(68, 68, 68, 0.7);
        }

        .modebar-btn.active .icon path {
          fill: rgba(68, 68, 68, 0.7);
        }
      `))]}render(){return $$1(_t2$c||(_t2$c=_$b`
      <div class="plotly"></div>
    `))}getDimensions(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.getDimensions.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.getDimensions.bind(this)),super.disconnectedCallback()}firstUpdated(t){super.firstUpdated(t),this.getDimensions()}update(t){if(super.update(t),this.alignState(),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const e=this.getComputedStyleValue("---color-text"),r=this.getComputedStyleValue("---color-element-border"),n=this.getComputedStyleValue("---color-element-background"),i=this.getComputedStyleValue("---color-element-emphasis"),a=this.getComputedStyleValue("---color-worse"),o=this.getComputedStyleValue("---color-better"),s=this.getComputedStyleValue("---color-nr"),l=[];this.surface&&l.push({name:"Decision Boundary",type:"isosurface",x:this.parameterSpace.a,y:this.parameterSpace.l,z:this.parameterSpace.g,value:this.parameterSpace.uDiff,coloraxis:"coloraxis",isomin:0,isomax:0,opacity:.5},{name:"Difference in Subjective Utility",type:"isosurface",x:this.parameterSpace.a,y:this.parameterSpace.l,z:this.parameterSpace.g,value:this.parameterSpace.uDiff,caps:{x:{show:!1},y:{show:!1},z:{show:!1}},coloraxis:"coloraxis",isomin:-30,isomax:30,showscale:!1,slices:{x:{show:!0,locations:[this.range.a.stop]},y:{show:!0,locations:[this.range.l.stop]},z:{show:!0,locations:[this.range.g.start]}},surface:{show:!1}}),this.point&&l.push({name:"Current Decision",type:"scatter3d",x:[this.a],y:[this.l],z:[this.g],mode:"markers",marker:{color:[this.response],coloraxis:"coloraxis2",line:{color:i,width:2},size:6}});const c={coloraxis:{cmin:-30,cmax:30,colorbar:{title:{font:{size:1.125*this.rem},text:"Difference in Utility (Gamble - Sure)",side:"right"},thickness:16,ypad:32},colorscale:[[0,"rgb(35, 35, 104)"],[.35,"rgb(69,69,208)"],[.5,"rgb(190,190,190)"],[.65,"rgb(240,50,230)"],[1,"rgb(120,25,115)"]]},coloraxis2:{cmin:0,cmax:1,colorscale:[[0,a],[.01,a],[.24,s],[.26,s],[.74,i],[.76,i],[.99,o],[1,o]],showscale:!1},font:{family:'"Source Sans", sans-serif',color:e},margin:{t:0,l:0,b:0},scene:{hovermode:!1,camera:{center:{x:0,y:.1,z:-.2},eye:{x:-2,y:-.8,z:.8}},xaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:r,showline:!0,linecolor:r,zeroline:!1,range:[Math.round(this.range.a.start),this.range.a.stop],title:{text:"alpha",font:{size:1.125*this.rem}}},yaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:r,showline:!0,linecolor:r,zeroline:!1,range:[this.range.l.start,this.range.l.stop],title:{text:"lambda",font:{size:1.125*this.rem}}},zaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:r,showline:!0,linecolor:r,zeroline:!1,range:[this.range.g.start,this.range.g.stop],title:{text:"gamma",font:{size:1.125*this.rem}}}},uirevision:!0};core.react(this.shadowRoot.querySelector(".plotly"),l,c,{displaylogo:!1,modeBarButtonsToRemove:["orbitRotation","resetCameraDefault3d","hoverClosest3d","toImage"],responsive:!0}),this.firstUpdate=!1}}customElements.define("cpt-space",CPTSpace);let _t$b,_t2$b,_$a=t=>t;class CPTValue extends CPTElement{static get properties(){return{x:{attribute:"value",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},v:{attribute:!1,type:Number,reflect:!1},width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.firstUpdate=!0,this.drag=!1,this.a=.5,this.l=2,this.x=null,this.label="",this.function="default",this.functions=[{name:"default",a:this.a,l:this.l}],this.values=[{name:"default",x:this.x,label:this.label,function:this.function}],this.xl=null,this.xw=null,this.pw=null,this.xs=null,this.trialCount=null,this.response=null,this.width=NaN,this.height=NaN,this.rem=NaN,this.alignState()}alignState(){this.functions[0].a=this.a,this.functions[0].l=this.l,this.values[0].x=this.x,this.values[0].label=this.label,this.values[0].function=this.function,this.values.forEach((t=>{const e=this.functions.find((e=>e.name===t.function));t.v=CPTMath.xal2v(t.x,e.a,e.l)})),this.v=this.values[0].v}trial(t,e,r,n,i,a){this.trialCount&&this.removeValue(`${this.trialCount}-w`),this.trialCount&&this.removeValue(`${this.trialCount}-s`),this.xl=t,this.xw=e,this.pw=r,this.xs=n,this.trialCount=i,this.response=a,this.setValue(this.xw,`${this.trialCount}-w`,"g","default",!0),this.setValue(this.xs,`${this.trialCount}-s`,"s","default",!0)}pauseTrial(){const t=select$4(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]");t.interrupt("new-1"),t.interrupt("new-2"),t.datum((t=>(t.paused=!0,t)))}resumeTrial(){select$4(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]").datum((t=>(t.paused=!1,t))),this.requestUpdate()}clearFunctions(){this.functions.splice(1),this.requestUpdate()}clearValues(){this.values.splice(1),this.requestUpdate()}clear(){this.clearFunctions(),this.clearValues()}removeFunction(t){this.functions=this.functions.filter((e=>e.name!==t)),this.requestUpdate()}removeValue(t){this.values=this.values.filter((e=>e.name!==t)),this.requestUpdate()}remove(t){this.removeFunction(t),this.removeValue(t)}getFunction(t="default"){return this.functions.find((e=>e.name===t))}getValue(t="default"){return this.values.find((e=>e.name===t))}get(t="default"){return{...this.getFunction(t),...this.getValue(t)}}setFunction(t,e,r="default"){"default"===r&&(this.a=t,this.l=e);const n=this.functions.find((t=>t.name===r));void 0===n?this.functions.push({name:r,a:t,l:e}):(n.a=t,n.l=e),this.requestUpdate()}setValue(t,e="default",r="",n=e,i=!1){"default"===e&&(this.x=t,this.label=r);const a=this.values.find((t=>t.name===e));void 0===a?this.values.push({name:e,x:t,label:r,function:n,trial:i,new:i}):(a.x=t,a.label=r,a.function=n),this.requestUpdate()}set(t,e,r,n="default",i="",a=n){this.setFunction(e,r,a),this.setValue(t,n,i,a)}static get styles(){return[super.styles,r$6(_t$b||(_t$b=_$a`
        :host {
          display: inline-block;

          width: 20rem;
          height: 20rem;
        }

        .main {
          width: 100%;
          height: 100%;
        }

        text {
          /* stylelint-disable property-no-vendor-prefix */
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }

        .curve-p.interactive,
        .curve-n.interactive {
          cursor: nwse-resize;

          filter: url("#shadow-2");
          outline: none;
        }

        .curve-p.interactive:hover,
        .curve-n.interactive:hover {
          filter: url("#shadow-4");
        }

        .curve-p.interactive:active,
        .curve-n.interactive:active {
          filter: url("#shadow-8");
        }

        :host(.keyboard) .curve-p.interactive:focus,
        :host(.keyboard) .curve-n.interactive:focus {
          filter: url("#shadow-8");
        }

        .point.interactive {
          cursor: nesw-resize;

          filter: url("#shadow-2");
          outline: none;

          /* HACK: This gets Safari to correctly apply the filter! */
          /* https://github.com/emilbjorklund/svg-weirdness/issues/27 */
          stroke: #000000;
          stroke-opacity: 0;
          stroke-width: 0;
        }

        /* Make a larger target for touch users */
        @media (pointer: coarse) {
          .point.interactive .circle {
            stroke: #000000;
            stroke-opacity: 0;
            stroke-width: 12px;
          }
        }

        .point.interactive:hover {
          filter: url("#shadow-4");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #ff0000;
        }

        .point.interactive:active {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #00ff00;
        }

        :host(.keyboard) .point.interactive:focus {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #0000ff;
        }

        .background {
          fill: var(---color-element-background);
          stroke: var(---color-element-border);
          stroke-width: 1;
          shape-rendering: crispEdges;
        }

        .title-x,
        .title-y {
          font-weight: 600;

          fill: currentColor;
        }

        .tick {
          font-size: 0.75rem;
        }

        .scale-x path,
        .scale-x line,
        .scale-y path,
        .scale-y line {
          stroke: var(---color-element-border);
        }

        .axis-x,
        .axis-y {
          stroke: var(---color-element-border);
          shape-rendering: crispEdges;
        }

        .diagonal {
          stroke: var(---color-element-border);
          stroke-dasharray: 4;
          stroke-width: 1;
        }

        .curve-p,
        .curve-n {
          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .line-x,
        .line-v {
          fill: none;
          stroke-width: 2;
        }

        .line-x {
          stroke: var(---color-x);
        }

        .line-v {
          stroke: var(---color-v);
        }

        .point .circle {
          fill: var(---color-element-emphasis);

          r: 6px;
        }

        .point .label {
          font-size: 0.75rem;

          dominant-baseline: middle;
          text-anchor: middle;

          fill: var(---color-text-inverse);
        }
      `))]}render(){return $$1(_t2$b||(_t2$b=_$a`
      ${0}
    `),CPTElement.svgFilters)}getDimensions(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.getDimensions.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.getDimensions.bind(this)),super.disconnectedCallback()}firstUpdated(t){super.firstUpdated(t),this.getDimensions()}update(t){if(super.update(t),this.alignState(),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const e=this.width,r=this.height,n=Math.min(e,r),i=2*this.rem,a=3*this.rem,o=3*this.rem,s=n-(i+a),l=n-(o+2*this.rem),c=parseInt(this.getComputedStyleValue("---transition-duration"),10),u=20,d=linear().domain([-20,u]).range([0,l]);this.xScale=d;const h=linear().domain([u,-20]).range([0,s]);this.yScale=h;const g=drag().subject(((t,e)=>({x:t.x,y:this.yScale(CPTMath.xal2v(this.xScale.invert(t.x),e.a,e.l))}))).on("start",(t=>{select$4(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{this.drag=!0;const r=this.xScale.invert(t.x),n=this.yScale.invert(t.y),i=CPTMath.xlv2a(r,e.l,n);e.a=Number.isNaN(i)||i<0||i>1||r<0||n<0?r>n?0:1:i,"default"===e.name&&(this.a=e.a),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:this.get(e.name),bubbles:!0}))})).on("end",(t=>{select$4(t.currentTarget).classed("dragging",!1)})),f=drag().subject(((t,e)=>({x:t.x,y:this.yScale(CPTMath.xal2v(this.xScale.invert(t.x),e.a,e.l))}))).on("start",(t=>{select$4(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{this.drag=!0;const r=this.xScale.invert(t.x),n=this.yScale.invert(t.y),i=CPTMath.xav2l(r,e.a,n);e.l=Number.isNaN(i)||i<0||i>100||r>0||n>0?r>n?100:0:i,"default"===e.name&&(this.l=e.l),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:this.get(e.name),bubbles:!0}))})).on("end",(t=>{select$4(t.currentTarget).classed("dragging",!1)})),p=drag().subject(((t,e)=>({x:this.xScale(e.x),y:this.yScale(e.v)}))).on("start",(t=>{select$4(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{this.drag=!0;const r=this.xScale.invert(t.x);e.x=r<-20?-20:r>u?u:r,"default"===e.name&&(this.x=e.x),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:{name:e.name,x:e.x,v:e.v,label:e.label,a:this.getFunction(e.function).a,l:this.getFunction(e.function).l},bubbles:!0}))})).on("end",(t=>{select$4(t.currentTarget).classed("dragging",!1)})),m=line().x((t=>d(t.x))).y((t=>h(t.v))),y=select$4(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),b=y.enter().append("svg").classed("main",!0),v=b.merge(y).attr("viewBox",`0 0 ${n} ${n}`),x=b.append("g").classed("plot",!0),I=v.select(".plot").attr("transform",`translate(${o}, ${i})`);x.append("clipPath").attr("id","clip-cpt-value").append("rect"),I.select("clipPath rect").attr("height",s+1).attr("width",l+1);const B=x.append("g").classed("underlayer",!0),C=I.select(".underlayer");B.append("rect").classed("background",!0),C.select(".background").attr("height",s).attr("width",l),B.append("g").classed("scale-x",!0);C.select(".scale-x").attr("transform",`translate(0, ${h(-20)})`).transition().duration(2*c).ease(cubicOut).call(axisBottom(d)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),B.append("line").classed("axis-x",!0),C.select(".axis-x").transition().duration(c).ease(cubicOut).attr("x1",d(-20)).attr("x2",d(u)).attr("y1",h(0)).attr("y2",h(0));const F=B.append("text").classed("title-x",!0).attr("text-anchor","middle");F.append("tspan").classed("name",!0).text("Objective Value ("),F.append("tspan").classed("math-var x",!0).text("x"),F.append("tspan").classed("name",!0).text(")"),C.select(".title-x").attr("transform",`translate(${l/2}, ${s+2.25*this.rem})`),B.append("g").classed("scale-y",!0);C.select(".scale-y").transition().duration(2*c).ease(cubicOut).call(axisLeft(h)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),B.append("line").classed("axis-y",!0),C.select(".axis-y").transition().duration(c).ease(cubicOut).attr("x1",d(0)).attr("x2",d(0)).attr("y1",h(u)).attr("y2",h(-20));const A=B.append("text").classed("title-y",!0).attr("text-anchor","middle");A.append("tspan").classed("name",!0).text("Subjective Value ("),A.append("tspan").classed("math-var v",!0).text("v"),A.append("tspan").classed("name",!0).text(")"),C.select(".title-y").attr("transform",`translate(${-2*this.rem}, ${s/2})rotate(-90)`),B.append("line").classed("diagonal",!0),C.select(".diagonal").transition().duration(2*c).ease(cubicOut).attr("x1",d(-20)).attr("y1",h(-20)).attr("x2",d(u)).attr("y2",h(u)),x.append("g").classed("content",!0);const Q=I.select(".content"),_=Q.selectAll(".lines").data(this.values.filter((t=>null!=t.x)),(t=>t.name)),w=_.enter().append("g").classed("lines",!0);w.each(((t,e,r)=>{const n=select$4(r[e]);n.append("line").classed("line-x above",!0),n.append("line").classed("line-x below",!0),n.append("line").classed("line-v before",!0),n.append("line").classed("line-v after",!0)})),w.filter((t=>t.new)).attr("data-animating-ease-time-1",0).attr("data-animating-ease-time-2",0).each(((t,e,r)=>{const n=select$4(r[e]);n.select(".line-x.above").attr("x1",d(t.x)).attr("x2",d(t.x)).attr("y1",h(u)).attr("y2",h(u)),n.select(".line-x.below").attr("x1",d(t.x)).attr("x2",d(t.x)).attr("y1",h(-20)).attr("y2",h(-20)),n.select(".line-v.before").attr("x1",d(t.x)).attr("x2",d(t.x)).attr("y1",h(t.v)).attr("y2",h(t.v)),n.select(".line-v.after").attr("x1",d(t.x)).attr("x2",d(t.x)).attr("y1",h(t.v)).attr("y2",h(t.v))}));const U=w.merge(_),S=U.filter((t=>t.new&&!t.paused));if(!S.empty()){const t=S.attr("data-animating-ease-time-1"),e=S.attr("data-animating-ease-time-2"),r=e=>linear().domain([0,1]).range([t,1])(e),n=e=>linear().range([0,1]).domain([t,1])(e),i=t=>linear().domain([0,1]).range([e,1])(t),a=t=>linear().range([0,1]).domain([e,1])(t),o=e=>r=>linear().domain([e(t),1]).range([0,1])(e(r)),s=t=>r=>linear().domain([t(e),1]).range([0,1])(t(r));S.transition("new-1").duration((()=>Math.floor(c*(1-t)))).ease(r).attr("data-animating-ease-time-1",1).tween("animating",((t,e,r)=>{const i=r[e],a=select$4(i),s=interpolate$1(void 0!==i.x?i.x:t.x,t.x),l=interpolate$1(void 0!==i.a?i.a:this.getFunction(t.function).a,this.getFunction(t.function).a),c=interpolate$1(void 0!==i.l?i.l:this.getFunction(t.function).l,this.getFunction(t.function).l),g=interpolate$1(h.invert(a.select(".line-x.above").attr("y1")),t.v),f=interpolate$1(h.invert(a.select(".line-x.below").attr("y1")),t.v);return t=>{i.x=s(cubicOut(n(t))),i.a=l(cubicOut(n(t))),i.l=c(cubicOut(n(t))),i.v=CPTMath.xal2v(i.x,i.a,i.l),a.select(".line-x.above").attr("x1",d(i.x)).attr("x2",d(i.x)).attr("y1",h(g(o(cubicIn)(t)))).attr("y2",h(u)),a.select(".line-x.below").attr("x1",d(i.x)).attr("x2",d(i.x)).attr("y1",h(f(o(cubicIn)(t)))).attr("y2",h(-20))}})).transition("new-2").duration((()=>Math.floor(c*(1-e)))).ease(i).attr("data-animating-ease-time-2",1).tween("animating",((t,e,r)=>{const n=r[e],i=select$4(n),o=interpolate$1(void 0!==n.x?n.x:t.x,t.x),l=interpolate$1(void 0!==n.a?n.a:this.getFunction(t.function).a,this.getFunction(t.function).a),c=interpolate$1(void 0!==n.l?n.l:this.getFunction(t.function).l,this.getFunction(t.function).l),g=interpolate$1(d.invert(i.select(".line-v.before").attr("x1")),-20),f=interpolate$1(d.invert(i.select(".line-v.after").attr("x1")),u);return t=>{n.x=o(cubicOut(a(t))),n.a=l(cubicOut(a(t))),n.l=c(cubicOut(a(t))),n.v=CPTMath.xal2v(n.x,n.a,n.l),i.select(".line-v.before").attr("x1",d(g(s(cubicOut)(t)))).attr("x2",d(n.x)).attr("y1",h(n.v)).attr("y2",h(n.v)),i.select(".line-v.after").attr("x1",d(f(s(cubicOut)(t)))).attr("x2",d(n.x)).attr("y1",h(n.v)).attr("y2",h(n.v))}})).on("end",((t,e,r)=>{const n=r[e];n.removeAttribute("data-animating-ease-time-1"),n.removeAttribute("data-animating-ease-time-2"),t.new=!1,this.dispatchEvent(new CustomEvent("decision-response",{detail:{trial:this.trialCount,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,response:this.response},bubbles:!0}))}))}const E=U.filter((t=>t.new&&t.paused));if(!E.empty()){const t=E.attr("data-animating-ease-time-1"),e=E.attr("data-animating-ease-time-2");E.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(cubicOut).tween("paused",((r,n,i)=>{const a=i[n],o=select$4(a),s=interpolate$1(void 0!==a.x?a.x:r.x,r.x),l=interpolate$1(void 0!==a.a?a.a:this.getFunction(r.function).a,this.getFunction(r.function).a),c=interpolate$1(void 0!==a.l?a.l:this.getFunction(r.function).l,this.getFunction(r.function).l),g=interpolate$1(u,r.v),f=interpolate$1(-20,r.v),p=interpolate$1(r.x,-20),m=interpolate$1(r.x,u);return r=>{a.x=s(r),a.a=l(r),a.l=c(r),a.v=CPTMath.xal2v(a.x,a.a,a.l),o.select(".line-x.above").attr("x1",d(a.x)).attr("x2",d(a.x)).attr("y1",h(g(cubicIn(t)))).attr("y2",h(u)),o.select(".line-x.below").attr("x1",d(a.x)).attr("x2",d(a.x)).attr("y1",h(f(cubicIn(t)))).attr("y2",h(-20)),o.select(".line-v.before").attr("x1",d(p(cubicOut(e)))).attr("x2",d(a.x)).attr("y1",h(a.v)).attr("y2",h(a.v)),o.select(".line-v.after").attr("x1",d(m(cubicOut(e)))).attr("x2",d(a.x)).attr("y1",h(a.v)).attr("y2",h(a.v))}}))}U.filter((t=>!t.new)).transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(cubicOut).tween("non-animating",((t,e,r)=>{const n=r[e],i=select$4(n),a=interpolate$1(void 0!==n.x?n.x:t.x,t.x),o=interpolate$1(void 0!==n.a?n.a:this.getFunction(t.function).a,this.getFunction(t.function).a),s=interpolate$1(void 0!==n.l?n.l:this.getFunction(t.function).l,this.getFunction(t.function).l);return t=>{n.x=a(t),n.a=o(t),n.l=s(t),n.v=CPTMath.xal2v(n.x,n.a,n.l),i.select(".line-x.above").attr("x1",d(n.x)).attr("x2",d(n.x)).attr("y1",h(n.v)).attr("y2",h(u)),i.select(".line-x.below").attr("x1",d(n.x)).attr("x2",d(n.x)).attr("y1",h(n.v)).attr("y2",h(-20)),i.select(".line-v.before").attr("x1",d(-20)).attr("x2",d(n.x)).attr("y1",h(n.v)).attr("y2",h(n.v)),i.select(".line-v.after").attr("x1",d(u)).attr("x2",d(n.x)).attr("y1",h(n.v)).attr("y2",h(n.v))}})),_.exit().remove();const L=Q.selectAll(".curve-p").data(this.functions,(t=>t.name)),T=L.enter().append("path").classed("curve-p",!0).attr("clip-path","url(#clip-cpt-value)").merge(L);(this.firstUpdate||t.has("interactive"))&&(this.interactive?T.attr("tabindex",0).classed("interactive",!0).call(g).on("keydown",((t,e)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let r=e.a;switch(t.key){case"ArrowUp":case"ArrowLeft":r+=t.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowRight":r-=t.shiftKey?.01:.05}r=r<0?0:r>1?1:r,r!==e.a&&(e.a=r,"default"===e.name&&(this.a=e.a),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:this.get(e.name),bubbles:!0}))),t.preventDefault()}})):T.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),T.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(cubicOut).attrTween("d",((t,e,r)=>{const n=r[e],i=interpolate$1(void 0!==n.a?n.a:t.a,t.a),a=interpolate$1(void 0!==n.l?n.l:t.l,t.l);return t=>{n.a=i(t),n.l=a(t);const e=range(d(0),d.range()[1]+1,1).map((t=>({x:d.invert(t),v:CPTMath.xal2v(d.invert(t),n.a,n.l)})));return m(e)}})),L.exit().remove();const R=Q.selectAll(".curve-n").data(this.functions,(t=>t.name)),k=R.enter().append("path").classed("curve-n",!0).attr("clip-path","url(#clip-cpt-value)").merge(R);(this.firstUpdate||t.has("interactive"))&&(this.interactive?k.attr("tabindex",0).classed("interactive",!0).call(f).on("keydown",((t,e)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let r=e.l;switch(t.key){case"ArrowUp":case"ArrowLeft":r-=t.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowRight":r+=t.shiftKey?.01:.05}r=r<0?0:r>100?100:r,r!==e.l&&(e.l=r,"default"===e.name&&(this.l=e.l),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:this.get(e.name),bubbles:!0}))),t.preventDefault()}})):k.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),k.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(cubicOut).attrTween("d",((t,e,r)=>{const n=r[e],i=interpolate$1(void 0!==n.a?n.a:t.a,t.a),a=interpolate$1(void 0!==n.l?n.l:t.l,t.l);return t=>{n.a=i(t),n.l=a(t);const e=range(d.range()[0],d(0)+1,1).map((t=>({x:d.invert(t),v:CPTMath.xal2v(d.invert(t),n.a,n.l)})));return m(e)}})),R.exit().remove();const G=Q.selectAll(".point").data(this.values.filter((t=>null!=t.x)),(t=>t.name)),N=G.enter().append("g").classed("point",!0);N.append("circle").classed("circle",!0),N.append("text").classed("label",!0);const M=N.merge(G);M.select("text").text((t=>t.label)),M.filter((e=>(this.firstUpdate||t.has("interactive"))&&this.interactive&&!e.trial)).attr("tabindex",0).classed("interactive",!0).call(p).on("keydown",((t,e)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let r=e.x;switch(t.key){case"ArrowUp":case"ArrowRight":r+=t.shiftKey?.2:1;break;case"ArrowDown":case"ArrowLeft":r-=t.shiftKey?.2:1}r=r<-20?-20:r>u?u:r,r!==e.x&&(e.x=r,"default"===e.name&&(this.x=e.x),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:{name:e.name,x:e.x,v:e.v,label:e.label,a:this.getFunction(e.function).a,l:this.getFunction(e.function).l},bubbles:!0}))),t.preventDefault()}})),M.filter((e=>(this.firstUpdate||t.has("interactive"))&&!this.interactive||e.trial)).attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null),M.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(cubicOut).attrTween("transform",((t,e,r)=>{const n=r[e],i=interpolate$1(void 0!==n.x?n.x:t.x,t.x),a=interpolate$1(void 0!==n.a?n.a:this.getFunction(t.function).a,this.getFunction(t.function).a),o=interpolate$1(void 0!==n.l?n.l:this.getFunction(t.function).l,this.getFunction(t.function).l);return t=>(n.x=i(t),n.a=a(t),n.l=o(t),`translate(\n            ${d(n.x)},\n            ${h(CPTMath.xal2v(n.x,n.a,n.l))}\n          )`)})),G.exit().remove(),this.drag=!1,this.firstUpdate=!1}}customElements.define("cpt-value",CPTValue);let _t$a,_t2$a,_$9=t=>t;class DecisionOption extends CPTElement{static get properties(){return{width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.width=NaN,this.height=NaN,this.rem=NaN}static get styles(){return[super.styles,r$6(_t$a||(_t$a=_$9`
        :host {
          --decidables-spinner-font-size: 1.75rem;
          --decidables-spinner-input-width: 4rem;
          --decidables-spinner-prefix: "$";

          display: inline-block;
        }

        .main {
          width: 100%;
          height: 100%;
          overflow: visible;
        }

        .outline {
          fill: var(---color-element-background);
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .arc {
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .arc.interactive {
          cursor: ns-resize;

          filter: url("#shadow-2");
          outline: none;
        }

        .arc.interactive:hover {
          filter: url("#shadow-4");
        }

        .arc.interactive:active {
          filter: url("#shadow-8");
        }

        :host(.keyboard) .arc.interactive:focus {
          filter: url("#shadow-8");
        }

        .arc.win {
          fill: var(---color-better-light);
        }

        .arc.loss {
          fill: var(---color-worse-light);
        }

        .arc.sure {
          fill: var(---color-even-light);
        }

        .label.static {
          font-size: 1.75rem;

          user-select: none;

          dominant-baseline: middle;
          text-anchor: middle;
        }

        .label.interactive {
          width: var(--decidables-spinner-input-width);
          height: calc(var(--decidables-spinner-font-size) * 1.5);
          overflow: visible;
        }

        /* HACK: Get Safari to work with SVG foreignObject */
        /* https://stackoverflow.com/questions/51313873/svg-foreignobject-not-working-properly-on-safari */
        /* https://bugs.webkit.org/show_bug.cgi?id=23113 */
        .label.interactive decidables-spinner {
          position: fixed;
        }

        .label.interactive.win decidables-spinner {
          background-color: var(---color-better-light);
        }

        .label.interactive.loss decidables-spinner {
          background-color: var(---color-worse-light);
        }

        .label.interactive.sure decidables-spinner {
          background-color: var(---color-even-light);
        }
      `))]}render(){return $$1(_t2$a||(_t2$a=_$9`
      ${0}
      <slot></slot>
    `),CPTElement.svgFilters)}getDimensions(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.getDimensions.bind(this)),this.observer=new MutationObserver((t=>{t.some((t=>"childList"===t.type||"attributes"===t.type&&t.target!==this))&&this.requestUpdate()})),this.observer.observe(this,{subtree:!0,childList:!0,attributes:!0})}disconnectedCallback(){this.observer.disconnect(),window.removeEventListener("resize",this.getDimensions.bind(this)),super.disconnectedCallback()}firstUpdated(t){super.firstUpdated(t),this.getDimensions()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const e=this.width,r=this.height,n=Math.min(e,r),i=n-(0+0),a=n-(0+0),o=this.querySelectorAll("decision-outcome"),s=o.length?-o[0].p:0,l=pie().startAngle(s*Math.PI-Math.PI).endAngle(s*Math.PI+Math.PI).sortValues(null).value((t=>t.p))(o),c=l.filter((t=>!t.data.interactive)),u=l.filter((t=>t.data.interactive));function d(t){const e=(t+2*Math.PI)%(2*Math.PI);return e>Math.PI?e-2*Math.PI:e<-Math.PI?e+2*Math.PI:e}const h=drag().subject(((t,e)=>{const r=d((e.endAngle+e.startAngle)/2),n=d(Math.atan2(t.y,t.x)+Math.PI/2);return o.forEach((t=>{t.startP=t.p})),{arcAngle:r,startAngle:d(n-r)}})).on("start",(t=>{select$4(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{const r=d(Math.atan2(t.y,t.x)+Math.PI/2),n=d(r-t.subject.arcAngle),i=d(t.subject.startAngle>0?n-t.subject.startAngle:t.subject.startAngle-n)/Math.PI,a=e.data.startP+i,s=a>.99?.99:a<.01?.01:a;o.forEach((t=>{t.p=t===e.data?s:t.startP/(1-e.data.startP)*(1-s)})),this.dispatchEvent(new CustomEvent("decision-outcome-change",{detail:{x:e.data.x,p:e.data.p,name:e.data.name},bubbles:!0}))})).on("end",(t=>{select$4(t.currentTarget).classed("dragging",!1)})),g=select$4(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),f=g.enter().append("svg").classed("main",!0),p=f.merge(g).attr("viewBox",`0 0 ${n} ${n}`),m=f.append("g").classed("pie",!0),y=p.select(".pie").attr("transform",`translate(${a/2}, ${i/2})`);m.append("circle").classed("outline",!0),y.select(".outline").attr("r",Math.min(a,i)/2-1);const b=y.selectAll(".arc").data(l);b.enter().append("path").call(h).merge(b).attr("tabindex",(t=>u.includes(t)&&l.length>1?0:null)).attr("class",(t=>`arc ${t.data.name}`)).classed("interactive",(t=>u.includes(t)&&l.length>1)).attr("d",arc().innerRadius(0).outerRadius(Math.min(a,i)/2-1)),b.exit().remove();const v=y.selectAll(".label.static").data(c),x=y.selectAll(".label.interactive").data(u),I=v.enter().append("text"),B=x.enter().append("foreignObject");B.append("xhtml:decidables-spinner").on("input",((t,e)=>{e.data.x=parseFloat(t.target.value),this.dispatchEvent(new CustomEvent("decision-outcome-change",{detail:{x:e.data.x,p:e.data.p,name:e.data.name},bubbles:!0}))})),I.merge(v).attr("class",(t=>`label static ${t.data.name}`)).attr("transform",(t=>{if(1===l.length)return"translate(0, 0)";const e=Math.min(a,i)/2*.6;return`translate(${arc().innerRadius(e).outerRadius(e).centroid(t)})`})).text((t=>`$${t.data.x.toFixed(0)}`));const C=B.merge(x).attr("class",(t=>`label interactive ${t.data.name}`)).attr("transform",(t=>{const e=parseFloat(this.getComputedStyleValue("--decidables-spinner-input-width")),r=parseFloat(this.getComputedStyleValue("--decidables-spinner-font-size")),n=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10),o=e*n/-2,s=r*n*1.5/-2;if(1===l.length)return`translate(${o}, ${s})`;const c=Math.min(a,i)/2*.6,u=arc().innerRadius(c).outerRadius(c);return`translate(${u.centroid(t)[0]+o}, ${u.centroid(t)[1]+s})`}));C.select("decidables-spinner").attr("value",(t=>`${t.data.x.toFixed(0)}`)),v.exit().remove(),x.exit().remove()}}customElements.define("decision-option",DecisionOption);let _t$9,_t2$9,_$8=t=>t;class DecisionOutcome extends CPTElement{static get properties(){return{x:{attribute:"value",type:Number,reflect:!0},p:{attribute:"probability",type:Number,reflect:!0},name:{attribute:"name",type:String,reflect:!0}}}constructor(){super(),this.x=0,this.p=0,this.name=""}static get styles(){return[r$6(_t$9||(_t$9=_$8`
        :host {
          display: none;
        }
      `))]}render(){return $$1(_t2$9||(_t2$9=_$8``))}}customElements.define("decision-outcome",DecisionOutcome);let _t$8,_t2$8,_t3$5,_t4$5,_t5$5,_$7=t=>t;class DecisionChoice extends CPTElement{static get properties(){return{state:{attribute:"state",type:String,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}constructor(){super(),this.states=["choice","fixation","blank"],this.state="choice",this.xl=0,this.xw=100,this.pw=.75,this.xs=50}static get styles(){return[super.styles,r$6(_t$8||(_t$8=_$7`
        :host {
          display: inline-block;
        }

        .holder {
          user-select: none;
        }

        .holder > * {
          vertical-align: middle;
        }

        .query {
          margin: 0 0.5rem;

          font-family: var(--font-family-code);
          font-size: 1.75rem;
        }

        decision-option {
          width: 10rem;
          height: 10rem;
        }
      `))]}sendEvent(){this.dispatchEvent(new CustomEvent("decision-choice-change",{detail:{xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs},bubbles:!0}))}winChange(t){this.xw=parseFloat(t.detail.x),this.pw=parseFloat(t.detail.p),this.sendEvent()}sureChange(t){this.xs=parseFloat(t.detail.x),this.sendEvent()}render(){return $$1(_t2$8||(_t2$8=_$7`
      <div class="holder">
        <decision-option ?interactive=${0} @decision-outcome-change=${0}>
          ${0}
        </decision-option><span class="query"
         >${0}</span
        ><decision-option ?interactive=${0} @decision-outcome-change=${0}>
          ${0}
        </decision-option>
      </div>`),this.interactive,this.winChange.bind(this),"choice"===this.state?$$1(_t3$5||(_t3$5=_$7`
              <decision-outcome probability="${0}" value="${0}" name="loss"></decision-outcome>
              <decision-outcome ?interactive=${0} probability="${0}" value="${0}" name="win"></decision-outcome>`),1-this.pw,this.xl,this.interactive,this.pw,this.xw):"","choice"===this.state?"?":"fixation"===this.state?"+":$$1(_t4$5||(_t4$5=_$7`â`)),this.interactive,this.sureChange.bind(this),"choice"===this.state?$$1(_t5$5||(_t5$5=_$7`
              <decision-outcome ?interactive=${0} probability="1" value="${0}" name="sure"></decision-outcome>`),this.interactive,this.xs):"")}}customElements.define("decision-choice",DecisionChoice);let _t$7,_t2$7,_t3$4,_t4$4,_t5$4,_t6$4,_t7$4,_t8$4,_t9$3,_t10$3,_t11$2,_t12$2,_$6=t=>t;class DecisionControl extends CPTElement{static get properties(){return{trials:{attribute:"trials",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},run:{attribute:"run",type:Boolean,reflect:!0},pause:{attribute:"pause",type:Boolean,reflect:!0},reset:{attribute:"reset",type:Boolean,reflect:!0},state:{atribute:!1,type:String,reflect:!1}}}constructor(){super(),this.trials=void 0,this.duration=void 0,this.run=!1,this.pause=!1,this.reset=!1,this.states=["resetted","running","paused","ended"],this.state="resetted"}setTrials(t){this.trials=t.target.value,this.dispatchEvent(new CustomEvent("decision-control-trials",{detail:{trials:this.trials},bubbles:!0}))}setDuration(t){this.duration=t.target.value,this.dispatchEvent(new CustomEvent("sdt-control-duration",{detail:{duration:this.duration},bubbles:!0}))}doRun(){this.state="running",this.dispatchEvent(new CustomEvent("decision-control-run",{detail:{},bubbles:!0}))}doPause(){this.state="paused",this.dispatchEvent(new CustomEvent("decision-control-pause",{detail:{},bubbles:!0}))}doReset(){this.state="resetted",this.dispatchEvent(new CustomEvent("decision-control-reset",{detail:{},bubbles:!0}))}complete(){this.state="ended"}static get styles(){return[super.styles,r$6(_t$7||(_t$7=_$6`
        :host {
          display: inline-block;
        }

        .holder {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        .buttons {
          display: flex;

          flex-direction: column;

          align-items: stretch;
          justify-content: center;
        }
      `))]}render(){return $$1(_t2$7||(_t2$7=_$6`
      <div class="holder">
        ${0}
        ${0}
        <div class="buttons">
          ${0}
          ${0}
          ${0}
        </div>
      </div>`),this.trials?$$1(_t3$4||(_t3$4=_$6`<decidables-slider min="1" max="100" step="1" .value=${0} @change=${0} @input=${0}>Trials</decidables-slider>`),this.trials,this.setTrials.bind(this),this.setTrials.bind(this)):$$1(_t4$4||(_t4$4=_$6``)),this.duration?$$1(_t5$4||(_t5$4=_$6`<decidables-slider min="10" max="4000" step="10" .value=${0} @change=${0} @input=${0}>Duration</decidables-slider>`),this.duration,this.setDuration.bind(this),this.setDuration.bind(this)):$$1(_t6$4||(_t6$4=_$6``)),this.run?$$1(_t7$4||(_t7$4=_$6`<decidables-button name="run" ?disabled=${0} @click=${0}>Run</decidables-button>`),"running"===this.state||"ended"===this.state,this.doRun.bind(this)):$$1(_t8$4||(_t8$4=_$6``)),this.pause?$$1(_t9$3||(_t9$3=_$6`<decidables-button name="pause" ?disabled=${0} @click=${0}>Pause</decidables-button>`),"running"!==this.state,this.doPause.bind(this)):$$1(_t10$3||(_t10$3=_$6``)),this.reset?$$1(_t11$2||(_t11$2=_$6`<decidables-button name="reset" ?disabled=${0} @click=${0}>Reset</decidables-button>`),"resetted"===this.state,this.doReset.bind(this)):$$1(_t12$2||(_t12$2=_$6``)))}}customElements.define("decision-control",DecisionControl);let _t$6,_t2$6,_t3$3,_t4$3,_t5$3,_t6$3,_t7$3,_t8$3,_t9$2,_t10$2,_t11$1,_t12$1,_t13$1,_t14$1,_t15,_t16,_t17,_t18,_$5=t=>t;class DecisionResponse extends CPTElement{static get properties(){return{feedback:{attribute:"feedback",type:String,reflect:!0},trial:{attribute:"trial",type:Boolean,reflect:!0},payoff:{attribute:"payoff",type:String,reflect:!0},state:{attribute:!1,type:String,reflect:!1},trialCount:{attribute:!1,type:Number,reflect:!1},trialTotal:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.feedbacks=["none","outcome"],this.feedback="none",this.trial=!1,this.payoffs=["none","selection","both"],this.payoff="none",this.states=["off","waiting","feedback"],this.state="off",this.trialCount=0,this.trialTotal=0,this.xl=0,this.xw=0,this.pw=0,this.xs=0,this.gamblePayoff=0,this.surePayoff=0,this.nrPayoff=0,this.betters=["gamble","sure","even"],this.better=void 0,this.responses=["gamble","sure","nr"],this.response=void 0,this.outcomes=["better","worse","even","nr"],this.outcome=void 0}get trialPayoff(){switch(this.response){case"gamble":return this.gamblePayoff;case"sure":return this.surePayoff;case"nr":return this.nrPayoff;default:return}}start(t,e,r,n,i,a,o,s){this.state="waiting",this.xl=t,this.xw=e,this.pw=r,this.xs=n,this.gamblePayoff=i,this.surePayoff=a,this.better=o,this.trialCount=s,this.response=void 0,this.outcome=void 0}stop(){this.state="feedback",void 0===this.response&&(this.outcome="nr")}gamble(){this.responded("gamble")}sure(){this.responded("sure")}responded(t){this.state="feedback",this.response=t,this.outcome="even"===this.better?"even":this.better===this.response?"better":"worse",this.dispatchEvent(new CustomEvent("decision-response",{detail:{trial:this.trialCount,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,response:this.response,outcome:this.outcome,payoff:this.trialPayoff},bubbles:!0}))}reset(){this.state="off",this.trialCount=0,this.better=void 0,this.gamblePayoff=0,this.surePayoff=0,this.response=void 0,this.outcome=void 0}static get styles(){return[super.styles,r$6(_t$6||(_t$6=_$5`
        :host {
          display: inline-block;
        }

        /* Overall container */
        .holder {
          display: flex;

          flex-direction: column;
        }

        /* Trial messages */
        .trials {
          display: flex;

          flex-direction: column;

          justify-content: center;
        }

        .trial {
          text-align: center;
        }

        .trial .label {
          font-weight: 600;
        }

        /* Response buttons */
        .responses {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        .response {
          width: 5.25rem;
        }

        .waiting[disabled] {
          --decidables-button-background-color: var(---color-element-enabled);
        }

        .selected[disabled][name="gamble"] {
          --decidables-button-background-color: var(---color-worse);
        }

        .selected[disabled][name="sure"] {
          --decidables-button-background-color: var(---color-better);
        }

        /* Feedback messages */
        .feedbacks {
          display: flex;

          flex-direction: row;

          justify-content: center;
        }

        /* Outcome feedback */
        .feedback {
          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;

          width: 5.25rem;
          height: 3.5rem;
          padding: 0.375rem 0.75rem;
          margin: 0.25rem;

          text-align: center;

          background-color: var(---color-element-background);
          border: 1px solid var(---color-element-border);
        }

        .feedback.better {
          background-color: var(---color-better-light);
        }

        .feedback.worse {
          background-color: var(---color-worse-light);
        }

        .feedback.even {
          background-color: var(---color-even-light);
        }

        .feedback.nr {
          background-color: var(---color-nr-light);
        }

        .feedback .outcome {
          font-weight: 600;
          line-height: 1.15;
        }

        :host([payoff="selection"]) .feedback,
        :host([payoff="both"]) .feedback {
          height: 4rem;
        }

        /* Payoff feedback */
        .payoff {
          text-align: center;
        }

        .payoff .label {
          font-weight: 600;
        }
      `))]}render(){return $$1(_t2$6||(_t2$6=_$5`
      <div class="holder">
        ${0}
        <div class="responses">
          <decidables-button name="gamble" class="response ${0}" ?disabled=${0} @click=${0}>Gamble</decidables-button>
          <decidables-button name="sure" class="response ${0}" ?disabled=${0} @click=${0}>Sure</decidables-button>
        </div>
        ${0}
      </div>`),this.trial?$$1(_t3$3||(_t3$3=_$5`
            <div class="trials">
              <div class="trial">
                <span class="label">Trial: </span><span class="count">${0}</span><span class="of"> of </span><span class="total">${0}</span>
              </div>
            </div>`),this.trialCount,this.trialTotal):$$1(_t4$3||(_t4$3=_$5``)),"feedback"===this.state&&"gamble"===this.response?"selected":"waiting"===this.state?"waiting":"","waiting"!==this.state||!0!==this.interactive,this.gamble.bind(this),"feedback"===this.state&&"sure"===this.response?"selected":"waiting"===this.state?"waiting":"","waiting"!==this.state||!0!==this.interactive,this.sure.bind(this),"none"!==this.feedback||"none"!==this.payoff?$$1(_t5$3||(_t5$3=_$5`
            <div class="feedbacks">
              <div class="feedback gamble
                ${0}">
                ${0}
                ${0}
              </div>
              <div class="feedback sure
                ${0}">
                ${0}
                ${0}
              </div>
            </div>`),"feedback"===this.state&&"outcome"===this.feedback&&"gamble"===this.response?this.outcome:"","feedback"===this.state&&"outcome"===this.feedback&&"gamble"===this.response?"better"===this.outcome?$$1(_t6$3||(_t6$3=_$5`<span class="outcome">Better</span>`)):"worse"===this.outcome?$$1(_t7$3||(_t7$3=_$5`<span class="outcome">Worse</span>`)):"even"===this.outcome?$$1(_t8$3||(_t8$3=_$5`<span class="outcome">Even</span>`)):$$1(_t9$2||(_t9$2=_$5`<span class="outcome">No<br>Response</span>`)):"","both"!==this.payoff&&"selection"!==this.payoff||"gamble"!==this.response?$$1(_t11$1||(_t11$1=_$5``)):$$1(_t10$2||(_t10$2=_$5`<span class="payoff">${0} ${0}</span>`),"gamble"===this.response?"Win:":"Miss:",this.trialPayoff),"feedback"===this.state&&"outcome"===this.feedback&&"sure"===this.response?this.outcome:"","feedback"===this.state&&"outcome"===this.feedback&&"sure"===this.response?"better"===this.outcome?$$1(_t12$1||(_t12$1=_$5`<span class="outcome">Better</span>`)):"worse"===this.outcome?$$1(_t13$1||(_t13$1=_$5`<span class="outcome">Worse</span>`)):"even"===this.outcome?$$1(_t14$1||(_t14$1=_$5`<span class="outcome">Even</span>`)):$$1(_t15||(_t15=_$5`<span class="outcome">No<br>Response</span>`)):"","both"!==this.payoff&&"selection"!==this.payoff||"sure"!==this.response?$$1(_t17||(_t17=_$5``)):$$1(_t16||(_t16=_$5`<span class="payoff">${0} ${0}</span>`),"sure"===this.response?"Win:":"Miss:",this.trialPayoff)):$$1(_t18||(_t18=_$5``)))}}customElements.define("decision-response",DecisionResponse);let _t$5,_t2$5,_$4=t=>t;core.register([PlotlyIsoSurface,PlotlyScatter3d]);class DecisionSpace extends CPTElement{static get properties(){return{surface:{attribute:"surface",type:Boolean,reflect:!0},point:{attribute:"point",type:String,reflect:!0},updateable:{attribute:"updateable",type:Boolean,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0},width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.firstUpdate=!0,this.surface=!0,this.points=["all","first","rest","none"],this.point="first",this.updateable=!1,this.a=.8,this.l=1.2,this.g=.8,this.xl=0,this.xw=20,this.pw=.5,this.xs=10,this.response="",this.label="",this.choices=[{name:"default",xw:this.xw,pw:this.pw,xs:this.xs,response:this.response,label:""}],this.GAMBLE=0,this.SURE=1,this.NR=.25,this.DEFAULT=.75,this.pointList=[],this.range={},this.range.xs={start:5,stop:15,step:.5},this.range.xw={start:10,stop:30,step:1},this.range.pw={start:0,stop:1,step:.05},this.width=NaN,this.height=NaN,this.rem=NaN,this.decisionSpace=[],this.alignState()}alignState(){this.choices[0].name="default",this.choices[0].xw=this.xw,this.choices[0].pw=this.pw,this.choices[0].xs=this.xs,this.choices[0].response=this.response,this.choices[0].label=this.label,this.updateable&&(this.choices.forEach((t=>{t.response=CPTMath.xal2v(t.xw,this.a,this.l)*CPTMath.pg2w(t.pw,this.g)+CPTMath.xal2v(this.xl,this.a,this.l)*(1-CPTMath.pg2w(t.pw,this.g))>CPTMath.xal2v(t.xs,this.a,this.l)?"gamble":"sure"})),this.response=this.choices[0].response),this.pointList={xw:[],pw:[],xs:[],response:[],label:[]},this.choices.forEach(((t,e)=>{(0===e&&("first"===this.point||"all"===this.point)||e>0&&("rest"===this.point||"all"===this.point))&&(this.pointList.xw.push(t.xw),this.pointList.pw.push(t.pw),this.pointList.xs.push(t.xs),this.pointList.response.push("gamble"===t.response?this.GAMBLE:"sure"===t.response?this.SURE:"nr"===t.response?this.NR:this.DEFAULT),this.pointList.label.push(t.label))})),this.decisionSpace={xs:[],xw:[],pw:[],uDiff:[]},range(this.range.xs.start,this.range.xs.stop+.01,this.range.xs.step).forEach((t=>{range(this.range.xw.start,this.range.xw.stop+.01,this.range.xw.step).forEach((e=>{range(this.range.pw.start,this.range.pw.stop+.01,this.range.pw.step).forEach((r=>{this.decisionSpace.xs.push(t),this.decisionSpace.xw.push(e),this.decisionSpace.pw.push(r);const n=CPTMath.xal2v(e,this.a,this.l)*CPTMath.pg2w(r,this.g)+CPTMath.xal2v(this.xl,this.a,this.l)*(1-CPTMath.pg2w(r,this.g))-CPTMath.xal2v(t,this.a,this.l);this.decisionSpace.uDiff.push(n)}))}))}))}clear(){this.choices=[{}],this.requestUpdate()}get(t="default"){const e=this.choices.find((e=>e.name===t));return void 0===e?null:e}set(t,e,r,n,i="default",a=""){"default"===i&&(this.xw=t,this.pw=e,this.xs=r,this.response=n,this.label=a);const o=this.choices.find((t=>t.name===i));void 0===o?this.choices.push({name:i,xw:t,pw:e,xs:r,response:n,label:a}):(o.xw=t,o.pw=e,o.xs=r,o.response=n,o.label=a),this.requestUpdate()}static get styles(){return[super.styles,plotlyStyle,r$6(_t$5||(_t$5=_$4`
        :host {
          display: inline-block;

          width: 28rem;
          height: 20rem;
        }

        .plotly {
          height: 100%;

          cursor: grab;
        }

        /* Plotly modebar styles */
        /* Drawn from: https://github.com/plotly/plotly.js/blob/master/src/components/modebar/modebar.js */
        .plotly:hover .modebar .modebar-group {
          background-color: rgba(255, 255, 255, 0.5);
        }

        .modebar-btn .icon path {
          fill: rgba(68, 68, 68, 0.3);
        }

        .modebar-btn:hover .icon path {
          fill: rgba(68, 68, 68, 0.7);
        }

        .modebar-btn.active .icon path {
          fill: rgba(68, 68, 68, 0.7);
        }
      `))]}render(){return $$1(_t2$5||(_t2$5=_$4`
      <div class="plotly"></div>
    `))}getDimensions(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.getDimensions.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.getDimensions.bind(this)),super.disconnectedCallback()}firstUpdated(t){super.firstUpdated(t),this.getDimensions()}update(t){if(super.update(t),this.alignState(),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const e=this.getComputedStyleValue("---color-text"),r=this.getComputedStyleValue("---color-element-border"),n=this.getComputedStyleValue("---color-element-background"),i=this.getComputedStyleValue("---color-element-emphasis"),a=this.getComputedStyleValue("---color-worse"),o=this.getComputedStyleValue("---color-better"),s=this.getComputedStyleValue("---color-nr"),l=[];this.surface&&l.push({name:"Decision Boundary",type:"isosurface",x:this.decisionSpace.xs,y:this.decisionSpace.xw,z:this.decisionSpace.pw,value:this.decisionSpace.uDiff,coloraxis:"coloraxis",isomin:0,isomax:0,opacity:.5},{name:"Difference in Subjective Utility",type:"isosurface",x:this.decisionSpace.xs,y:this.decisionSpace.xw,z:this.decisionSpace.pw,value:this.decisionSpace.uDiff,caps:{x:{show:!1},y:{show:!1},z:{show:!1}},coloraxis:"coloraxis",isomin:-30,isomax:30,showscale:!1,slices:{x:{show:!0,locations:[this.range.xs.stop]},y:{show:!0,locations:[this.range.xw.stop]},z:{show:!0,locations:[this.range.pw.start]}},surface:{show:!1}}),l.push({name:"Current Decision",type:"scatter3d",x:this.pointList.xs,y:this.pointList.xw,z:this.pointList.pw,mode:"markers",marker:{color:this.pointList.response,coloraxis:"coloraxis2",line:{color:i,width:2},size:6}});const c={coloraxis:{cmin:-30,cmax:30,colorbar:{title:{font:{size:1.125*this.rem},text:"Difference in Utility (Gamble - Sure)",side:"right"},thickness:16,ypad:32},colorscale:[[0,"rgb(35, 35, 104)"],[.35,"rgb(69,69,208)"],[.5,"rgb(190,190,190)"],[.65,"rgb(240,50,230)"],[1,"rgb(120,25,115)"]]},coloraxis2:{cmin:0,cmax:1,colorscale:[[0,a],[.01,a],[.24,s],[.26,s],[.74,i],[.76,i],[.99,o],[1,o]],showscale:!1},font:{family:'"Source Sans", sans-serif',color:e},margin:{t:0,l:0,b:0},scene:{hovermode:!1,camera:{center:{x:0,y:.1,z:-.2},eye:{x:-2,y:-.8,z:.8}},xaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:r,showline:!0,linecolor:r,zeroline:!1,range:[this.range.xs.start,this.range.xs.stop],title:{text:"Sure Value",font:{size:1.125*this.rem}}},yaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:r,showline:!0,linecolor:r,zeroline:!1,range:[this.range.xw.start,this.range.xw.stop],title:{text:"Win Value",font:{size:1.125*this.rem}}},zaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:r,showline:!0,linecolor:r,zeroline:!1,range:[this.range.pw.start,this.range.pw.stop],title:{text:"Win Probability",font:{size:1.125*this.rem}}}},uirevision:!0};core.react(this.shadowRoot.querySelector(".plotly"),l,c,{displaylogo:!1,modeBarButtonsToRemove:["orbitRotation","resetCameraDefault3d","hoverClosest3d","toImage"],responsive:!0}),this.firstUpdate=!1}}customElements.define("decision-space",DecisionSpace);let _t$4,_t2$4,_$3=t=>t;class DecisionTask extends CPTElement{static get properties(){return{duration:{attribute:"duration",type:Number,reflect:!0},iti:{attribute:"iti",type:Number,reflect:!0},trials:{attribute:"trials",type:Number,reflect:!0},running:{attribute:"running",type:Boolean,reflect:!0},state:{attribute:!1,type:String,reflect:!1}}}constructor(){super(),this.duration=2e3,this.iti=2e3,this.trials=5,this.running=!1,this.states=["resetted","iti","stimulus","ended"],this.state="resetted",this.range={},this.range.xl={start:0,stop:0,step:1},this.range.xw={start:10,stop:30,step:1},this.range.pw={start:.1,stop:.9,step:.1},this.range.xs={start:5,stop:15,step:1},this.range.xl.values=range(this.range.xl.start,this.range.xl.stop+.01,this.range.xl.step),this.range.xw.values=range(this.range.xw.start,this.range.xw.stop+.01,this.range.xw.step),this.range.pw.values=range(this.range.pw.start,this.range.pw.stop+.01,this.range.pw.step),this.range.xs.values=range(this.range.xs.start,this.range.xs.stop+.01,this.range.xs.step),this.firstUpdate=!0,this.xl=0,this.xw=0,this.pw=0,this.xs=0,this.trial=0,this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.runner=void 0}static get styles(){return[super.styles,r$6(_t$4||(_t$4=_$3`
        :host {
          display: inline-block;
        }
      `))]}render(){return $$1(_t2$4||(_t2$4=_$3`
      <div class="holder">
        <decision-choice state="${0}" probability="${0}" win="${0}" loss="${0}" sure="${0}"></decision-choice>
      </div>`),"stimulus"===this.state?"choice":"iti"===this.state?"fixation":"blank",this.pw,this.xw,this.xl,this.xs)}update(t){super.update(t),(this.firstUpdate||t.has("running"))&&(this.running?(this.pauseTime&&(this.baseTime+=now()-this.pauseTime,this.pauseTime=0),this.runner=interval(this.run.bind(this),20)):void 0!==this.runner&&(this.runner.stop(),this.pauseTime=now())),this.firstUpdate=!1}reset(){this.runner.stop(),this.running=!1,this.trial=0,this.state="resetted",this.xl=0,this.xw=0,this.pw=0,this.xs=0,this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0}run(){const t=now(),e=this.baseTime?t-this.baseTime:0,r=this.baseTime?e-this.startTime:0;this.lastTime=e,"resetted"===this.state?(this.state="iti",this.baseTime=t,this.startTime=0,this.dispatchEvent(new CustomEvent("decision-block-start",{detail:{trials:this.trials},bubbles:!0}))):"iti"===this.state&&r>=this.iti?(this.trial+=1,this.state="stimulus",this.startTime=e,this.xl=this.range.xl.values[Math.floor(Math.random()*this.range.xl.values.length)],this.xw=this.range.xw.values[Math.floor(Math.random()*this.range.xw.values.length)],this.pw=this.range.pw.values[Math.floor(Math.random()*this.range.pw.values.length)],this.xs=this.range.xs.values[Math.floor(Math.random()*this.range.xs.values.length)],this.vDiff=this.xw*this.pw+this.xl*(1-this.pw)-this.xs,this.gamblePayoff=Math.random()<this.pw?this.xw:this.xl,this.surePayoff=this.xs,this.better=this.vDiff>0?"gamble":this.vDiff<0?"sure":"equal",this.dispatchEvent(new CustomEvent("decision-trial-start",{detail:{trials:this.trials,duration:this.duration,iti:this.iti,trial:this.trial,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff},bubbles:!0}))):"stimulus"===this.state&&r>=this.duration&&(this.dispatchEvent(new CustomEvent("decision-trial-end",{detail:{trials:this.trials,duration:this.duration,iti:this.iti,trial:this.trial,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff},bubbles:!0})),this.trial>=this.trials?(this.runner.stop(),this.running=!1,this.state="ended",this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.dispatchEvent(new CustomEvent("decision-block-end",{detail:{trials:this.trial},bubbles:!0}))):(this.state="iti",this.startTime=e))}}customElements.define("decision-task",DecisionTask);let _t$3,_t2$3,_t3$2,_t4$2,_t5$2,_t6$2,_t7$2,_t8$2,_$2=t=>t;class CPTEquationPG2W extends CPTEquation{static get properties(){return{p:{attribute:"probability",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},w:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.p=.75,this.g=.5,this.alignState()}alignState(){this.w=CPTMath.pg2w(this.p,this.g)}sendEvent(){this.dispatchEvent(new CustomEvent("cpt-equation-pg2w-change",{detail:{p:this.p,g:this.g,w:this.w},bubbles:!0}))}pInput(t){this.p=parseFloat(t.target.value),this.alignState(),this.sendEvent()}gInput(t){this.g=parseFloat(t.target.value),this.alignState(),this.sendEvent()}render(){let t,e,r;this.alignState(),this.numeric?(t=$$1(_t$3||(_t$3=_$2`<decidables-spinner class="p bottom" ?disabled=${0} min="0" max="1" step="0.01" .value="${0}" @input=${0}>
          <var class="math-var">p</var>
        </decidables-spinner>`),!this.interactive,this.p,this.pInput.bind(this)),e=$$1(_t2$3||(_t2$3=_$2`<decidables-spinner class="g bottom" ?disabled=${0} min="0" max="1" step="0.01" .value="${0}" @input=${0}>
          <var class="math-var">Î³</var>
        </decidables-spinner>`),!this.interactive,this.g,this.gInput.bind(this)),r=$$1(_t3$2||(_t3$2=_$2`<decidables-spinner class="w bottom" disabled min="0" max="1" step=".01" .value="${0}">
          <var class="math-var">w</var>
        </decidables-spinner>`),+this.w.toFixed(2))):(t=$$1(_t4$2||(_t4$2=_$2`<var class="math-var p">p</var>`)),e=$$1(_t5$2||(_t5$2=_$2`<var class="math-var g">Î³</var>`)),r=$$1(_t6$2||(_t6$2=_$2`<var class="math-var w">w</var>`)));const n=$$1(_t7$2||(_t7$2=_$2`
      <tr>
        <td rowspan="2">
          ${0}<span class="equals">=</span>
        </td>
        <td class="underline">
          ${0}<sup class="exp">${0}</sup>
        </td>
      </tr>
      <tr>
        <td>
          <span class="bracket tight">[</span>${0}<sup class="exp">${0}</sup><span class="plus">+</span><span class="paren tight">(</span>1<span class="minus">â</span>${0}<span class="paren tight">)</span><sup class="exp">${0}</sup><span class="bracket tight">]</span><sup class="exp">1/${0}</sup>
        </td>
      </tr>`),r,t,e,t,e,t,e,e);return $$1(_t8$2||(_t8$2=_$2`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${0}
          </tbody>
        </table>
      </div>`),n)}}customElements.define("cpt-equation-pg2w",CPTEquationPG2W);let _t$2,_t2$2,_t3$1,_t4$1,_t5$1,_t6$1,_t7$1,_t8$1,_t9$1,_t10$1,_t11,_t12,_t13,_t14,_2=t=>t;class CPTEquationVW2U extends CPTEquation{static get properties(){return{v:{attribute:"value",converter:DecidablesConverterArray,reflect:!0},w:{attribute:"weight",converter:DecidablesConverterArray,reflect:!0},n:{attribute:"outcomes",type:Number,reflect:!0},u:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.v=[10,0],this.w=[.75,.25],this.n=2,this.nMax=4,this.vMax=new Array(this.nMax).fill(0),this.wMax=new Array(this.nMax).fill(0),this.alignState()}alignState(){this.v=this.v.length<this.n?this.v.concat(this.vMax.slice(this.v.length,this.n)):this.v.length>this.n?this.v.slice(0,this.n):this.v,this.w=this.w.length<this.n?this.w.concat(this.wMax.slice(this.w.length,this.n)):this.w.length>this.n?this.w.slice(0,this.n):this.w,this.v.forEach(((t,e)=>{this.vMax[e]=t})),this.w.forEach(((t,e)=>{this.wMax[e]=t})),this.u=this.v.reduce(((t,e,r)=>t+e*this.w[r]),0)}sendEvent(){this.dispatchEvent(new CustomEvent("cpt-equation-vw2u-change",{detail:{v:this.v,w:this.w,n:this.n,u:this.u},bubbles:!0}))}vInput(t,e){this.v[t]=parseFloat(e.target.value),this.alignState(),this.sendEvent()}wInput(t,e){this.w[t]=parseFloat(e.target.value),this.alignState(),this.sendEvent()}nInput(t){this.n=parseFloat(t.target.value),this.alignState(),this.sendEvent()}vTemplate(t="",e="",r=!1){let n;if(r){const r=Number.parseInt(t,10)-1;n=$$1(_t$2||(_t$2=_2`<decidables-spinner class="v" ?disabled=${0} .value="${0}" @input=${0}>
          <var class="math-var">v<sub class="subscript ${0}">${0}</sub></var>
        </decidables-spinner>`),!this.interactive,this.v[r],this.vInput.bind(this,r),e,t)}else n=$$1(_t2$2||(_t2$2=_2`<var class="math-var v">v<sub class="subscript ${0}">${0}</sub></var>`),e,t);return n}wTemplate(t="",e="",r=!1){let n;if(r){const r=Number.parseInt(t,10)-1;n=$$1(_t3$1||(_t3$1=_2`<decidables-spinner class="w" ?disabled=${0} min="0" max="1" step=".001" .value="${0}" @input=${0}>
          <var class="math-var">w<sub class="subscript ${0}">${0}</sub></var>
        </decidables-spinner>`),!this.interactive,this.w[r],this.wInput.bind(this,r),e,t)}else n=$$1(_t4$1||(_t4$1=_2`<var class="math-var w">w<sub class="subscript ${0}">${0}</sub></var>`),e,t);return n}render(){let t,e;this.alignState(),this.numeric?(t=$$1(_t5$1||(_t5$1=_2`<decidables-spinner class="u" disabled .value="${0}">
          <var class="math-var">U</var>
        </decidables-spinner>`),+this.u.toFixed(3)),e=$$1(_t6$1||(_t6$1=_2`<decidables-spinner class="n" ?disabled=${0} min="1" max="4" step="1" .value="${0}" @input=${0}>
          <var class="math-var">n</var>
        </decidables-spinner>`),!this.interactive,this.n,this.nInput.bind(this))):(t=$$1(_t7$1||(_t7$1=_2`<var class="math-var u">U</var>`)),e=$$1(_t8$1||(_t8$1=_2`<var class="math-var subscript">n</var>`)));const r=$$1(_t9$1||(_t9$1=_2`
      <tr>
        <td>
          ${0}<span class="equals">=</span>
        </td>
        <td>
          <div class="summation">
            <span class="tight">${0}</span>
            <span class="tight"><var class="math-greek sigma">Î£</var></span>
            <span class="tight"><var class="math-var subscript tight">i</var><span class="equals subscript">=</span><span class="subscript tight">1</span></span>
          </div>
        </td>
        <td>
          ${0}&nbsp;${0}<span class="equals">=</span>
        </td>
        <td>
          ${0}
        </td>
      </tr>`),t,e,this.vTemplate("i","math-var",!1),this.wTemplate("i","math-var",!1),this.numeric?Array(this.nMax).fill().map(((t,e)=>e<this.n?$$1(_t10$1||(_t10$1=_2`<span class="addend tight" ${0}>${0}${0}&nbsp;${0}</span>`),$({in:d,out:d}),$$1(0!==e?_t11||(_t11=_2`<span class="plus">+</span>`):_t12||(_t12=_2``)),this.vTemplate(e+1,"math-num",!0),this.wTemplate(e+1,"math-num",!0)):null)):$$1(_t13||(_t13=_2`${0}&nbsp;${0}<span class="plus">+</span><span class="ellipsis">â¦</span><span class="plus">+</span>${0}&nbsp;${0}`),this.vTemplate("1","math-num",!1),this.wTemplate("1","math-num",!1),this.vTemplate("n","math-var",!1),this.wTemplate("n","math-var",!1)));return $$1(_t14||(_t14=_2`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${0}
          </tbody>
        </table>
      </div>`),r)}}customElements.define("cpt-equation-vw2u",CPTEquationVW2U);let _t$1,_t2$1,_t3,_t4,_t5,_t6,_t7,_t8,_t9,_t10,_$1=t=>t;class CPTEquationXAL2V extends CPTEquation{static get properties(){return{x:{attribute:"value",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},v:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.x=10,this.a=.5,this.l=2,this.alignState()}alignState(){this.v=CPTMath.xal2v(this.x,this.a,this.l)}sendEvent(){this.dispatchEvent(new CustomEvent("cpt-equation-xal2v-change",{detail:{x:this.x,a:this.a,l:this.l,v:this.v},bubbles:!0}))}xInput(t){this.x=parseFloat(t.target.value),this.alignState(),this.sendEvent()}aInput(t){this.a=parseFloat(t.target.value),this.alignState(),this.sendEvent()}lInput(t){this.l=parseFloat(t.target.value),this.alignState(),this.sendEvent()}render(){let t,e,r,n;this.alignState(),this.numeric?(t=$$1(_t$1||(_t$1=_$1`<decidables-spinner class="x bottom" ?disabled=${0} step="1" .value="${0}" @input=${0}>
          <var class="math-var">x</var>
        </decidables-spinner>`),!this.interactive,this.x,this.xInput.bind(this)),e=$$1(_t2$1||(_t2$1=_$1`<decidables-spinner class="a bottom" ?disabled=${0} min="0" max="1" step=".001" .value="${0}" @input=${0}>
          <var class="math-var">Î±</var>
        </decidables-spinner>`),!this.interactive,this.a,this.aInput.bind(this)),r=$$1(_t3||(_t3=_$1`<decidables-spinner class="l bottom" ?disabled=${0} min="0" step=".001" .value="${0}" @input=${0}>
          <var class="math-var">Î»</var>
        </decidables-spinner>`),!this.interactive,this.l,this.lInput.bind(this)),n=$$1(_t4||(_t4=_$1`<decidables-spinner class="v bottom" disabled step=".001" .value="${0}">
          <var class="math-var">v</var>
        </decidables-spinner>`),+this.v.toFixed(3))):(t=$$1(_t5||(_t5=_$1`<var class="math-var x">x</var>`)),e=$$1(_t6||(_t6=_$1`<var class="math-var a">Î±</var>`)),r=$$1(_t7||(_t7=_$1`<var class="math-var l">Î»</var>`)),n=$$1(_t8||(_t8=_$1`<var class="math-var v">v</var>`)));const i=$$1(_t9||(_t9=_$1`
      <tr>
        <td rowspan="2">
          ${0}<span class="equals">=</span><span class="brace tight">{</span>
        </td>
        <td class="left">
          ${0}<sup class="exp">${0}</sup>,&emsp;if ${0}<span class="equals">&ge;</span>0
        </td>
      </tr>
      <tr>
        <td class="left">
          <span class="minus tight">â</span>${0}<span class="paren tight">(</span><span class="minus tight">â</span>${0}<span class="paren tight">)</span><sup class="exp">${0}</sup>,&emsp;if ${0}<span class="equals">&lt;</span>0
        </td>
      </tr>`),n,t,e,t,r,t,e,t);return $$1(_t10||(_t10=_$1`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${0}
          </tbody>
        </table>
      </div>`),i)}}customElements.define("cpt-equation-xal2v",CPTEquationXAL2V);let _t,_t2,_=t=>t;class CPTExample extends CPTElement{static get styles(){return[super.styles,r$6(_t||(_t=_`
        :host {
          ---border: var(--border, 1px solid var(---color-border));
          display: inline-block;

          margin-bottom: 1rem;
        }

        .holder {
          display: flex;
        }

        .body {
          display: flex;

          flex-wrap: wrap;

          align-items: center;
          justify-content: left;

          padding: 0.625rem;

          border: var(---border);
          border-radius: 0.25rem;
        }

        .body ::slotted(*) {
          margin: 0.625rem;
        }

        /* HACK: Sibling selectors not working with ::slotted */
        /* .body > rdk-task + sdt-response,
        ::slotted(rdk-task) + ::slotted(sdt-response) { */
        /* .body ::slotted(sdt-response) {
          margin-left: 0;
        } */

        /* HACK: Sibling selectors not working with ::slotted */
        /* .body > sdt-control + rdk-task,
        ::slotted(sdt-control) + ::slotted(rdk-task) {
          margin-left: 0;
        } */
        /* .body ::slotted(rdk-task) {
          margin-left: 0;
        } */
      `))]}render(){return $$1(_t2||(_t2=_`
      <div class="holder">
        <div class="body">
          <slot>Empty!</slot>
        </div>
      </div>`))}}customElements.define("cpt-example",CPTExample);class CPTExampleHuman extends CPTExample{firstUpdated(){this.cptFit=this.querySelector("cpt-fit"),this.decisionControl=this.querySelector("decision-control"),this.decisionTask=this.querySelector("decision-task"),this.decisionResponse=this.querySelector("decision-response"),this.decisionSpace=this.querySelector("decision-space"),this.cptCalculation=this.querySelector("cpt-calculation"),this.cptProbability=this.querySelector("cpt-probability"),this.cptSpace=this.querySelector("cpt-space"),this.cptValue=this.querySelector("cpt-value"),this.cptFit&&this.cptFit.addEventListener("cpt-fit-update",(t=>{this.cptProbability&&(this.cptProbability.g=t.detail.g),this.cptValue&&(this.cptValue.a=t.detail.a,this.cptValue.l=t.detail.l),this.decisionSpace&&(this.decisionSpace.a=t.detail.a,this.decisionSpace.l=t.detail.l,this.decisionSpace.g=t.detail.g)})),this.decisionControl&&(this.decisionControl.hasAttribute("trials")&&this.decisionControl.addEventListener("decision-control-trials",(t=>{this.decisionTask&&(this.decisionTask.trials=t.detail.trials),this.decisionResponse&&(this.decisionResponse.trialTotal=t.detail.trials)})),this.decisionControl.hasAttribute("duration")&&this.decisionControl.addEventListener("decision-control-duration",(t=>{this.decisionTask&&(this.decisionTask.duration=t.detail.duration,this.decisionTask.iti=t.detail.duration)})),this.decisionControl.hasAttribute("run")&&this.decisionControl.addEventListener("decision-control-run",(()=>{this.decisionTask&&(this.decisionTask.running=!0)})),this.decisionControl.hasAttribute("pause")&&this.decisionControl.addEventListener("decision-control-pause",(()=>{this.decisionTask&&(this.decisionTask.running=!1)})),this.decisionControl.hasAttribute("reset")&&this.decisionControl.addEventListener("decision-control-reset",(()=>{this.decisionTask&&this.decisionTask.reset(),this.decisionResponse&&this.decisionResponse.reset(),this.decisionSpace&&this.decisionSpace.clear(),this.cptFit&&this.cptFit.clear()}))),this.decisionTask&&(this.decisionResponse&&(this.decisionResponse.trialTotal=this.decisionTask.trials),this.decisionTask.addEventListener("decision-trial-start",(t=>{this.decisionResponse&&this.decisionResponse.start(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.gamblePayoff,t.detail.surePayoff,t.detail.better,t.detail.trial)})),this.decisionTask.addEventListener("decision-trial-end",(()=>{this.decisionResponse&&this.decisionResponse.stop()})),this.decisionTask.addEventListener("decision-block-end",(()=>{this.decisionControl&&this.decisionControl.complete()}))),this.decisionResponse&&this.decisionResponse.addEventListener("decision-response",(t=>{this.decisionSpace&&this.decisionSpace.set(t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString()),this.cptFit&&this.cptFit.set(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString())}))}}customElements.define("cpt-example-human",CPTExampleHuman);class CPTExampleInteractive extends CPTExample{static get properties(){return{a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}constructor(){super(),this.a=.8,this.l=1.2,this.g=.8,this.xl=0,this.xw=20,this.pw=.5,this.xs=10,this.cptCalculation=null,this.cptProbability=null,this.cptSpace=null,this.cptValue=null,this.decisionChoice=null,this.decisionSpace=null}firstUpdated(){this.cptCalculation=this.querySelector("cpt-calculation"),this.cptProbability=this.querySelector("cpt-probability"),this.cptSpace=this.querySelector("cpt-space"),this.cptValue=this.querySelector("cpt-value"),this.decisionChoice=this.querySelector("decision-choice"),this.decisionSpace=this.querySelector("decision-space"),this.cptCalculation&&this.cptCalculation.addEventListener("cpt-calculation-change",(t=>{this.a=t.detail.a,this.l=t.detail.l,this.g=t.detail.g,this.xl=t.detail.xl,this.xw=t.detail.xw,this.pw=t.detail.pw,this.xs=t.detail.xs})),this.cptProbability&&(this.cptProbability.addEventListener("cpt-probability-change",(t=>{this.g=t.detail.g,this.pw=t.detail.p})),this.cptProbability.set(this.pw,this.g,"default","")),this.cptValue&&(this.cptValue.addEventListener("cpt-value-change",(t=>{this.a=t.detail.a,this.l=t.detail.l,"default"===t.detail.name?this.xs=t.detail.x:"gamble"===t.detail.name&&(this.xw=t.detail.x)})),this.cptValue.set(this.xs,this.a,this.l,"default","s"),this.cptValue.set(this.xw,this.a,this.l,"gamble","g","default")),this.decisionChoice&&this.decisionChoice.addEventListener("decision-choice-change",(t=>{this.xl=t.detail.xl,this.xw=t.detail.xw,this.pw=t.detail.pw,this.xs=t.detail.xs})),this.requestUpdate()}update(t){super.update(t),this.cptCalculation&&(this.cptCalculation.a=this.a,this.cptCalculation.l=this.l,this.cptCalculation.g=this.g,this.cptCalculation.xl=this.xl,this.cptCalculation.xw=this.xw,this.cptCalculation.pw=this.pw,this.cptCalculation.xs=this.xs),this.cptProbability&&this.cptProbability.set(this.pw,this.g,"default",""),this.cptSpace&&(this.cptSpace.a=this.a,this.cptSpace.l=this.l,this.cptSpace.g=this.g,this.cptSpace.xl=this.xl,this.cptSpace.xw=this.xw,this.cptSpace.pw=this.pw,this.cptSpace.xs=this.xs),this.cptValue&&(this.cptValue.set(this.xs,this.a,this.l,"default","s"),this.cptValue.set(this.xw,this.a,this.l,"gamble","g","default")),this.decisionChoice&&(this.decisionChoice.xl=this.xl,this.decisionChoice.xw=this.xw,this.decisionChoice.pw=this.pw,this.decisionChoice.xs=this.xs),this.decisionSpace&&(this.decisionSpace.a=this.a,this.decisionSpace.l=this.l,this.decisionSpace.g=this.g,this.decisionSpace.xl=this.xl,this.decisionSpace.xw=this.xw,this.decisionSpace.pw=this.pw,this.decisionSpace.xs=this.xs)}}customElements.define("cpt-example-interactive",CPTExampleInteractive);class CPTExampleModel extends CPTExample{static get properties(){return{a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0}}}constructor(){super(),this.a=.8,this.l=1.2,this.g=.8,this.xl=0,this.xw=20,this.pw=.5,this.xs=10,this.cptCalculation=null,this.cptProbability=null,this.cptSpace=null,this.cptValue=null,this.decisionControl=null,this.decisionResponse=null,this.decisionSpace=null,this.decisionTask=null}firstUpdated(){this.cptCalculation=this.querySelector("cpt-calculation"),this.cptProbability=this.querySelector("cpt-probability"),this.cptSpace=this.querySelector("cpt-space"),this.cptValue=this.querySelector("cpt-value"),this.decisionControl=this.querySelector("decision-control"),this.decisionResponse=this.querySelector("decision-response"),this.decisionSpace=this.querySelector("decision-space"),this.decisionTask=this.querySelector("decision-task"),this.cptProbability&&(this.cptProbability.addEventListener("cpt-probability-change",(t=>{this.g=t.detail.g})),this.cptProbability.addEventListener("decision-response",(t=>{this.decisionResponse&&this.decisionResponse.responded(t.detail.response),this.decisionSpace&&this.decisionSpace.set(t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString())}))),this.cptValue&&(this.cptValue.addEventListener("cpt-value-change",(t=>{this.a=t.detail.a,this.l=t.detail.l})),this.cptProbability||this.cptValue.addEventListener("decision-response",(t=>{this.decisionResponse&&this.decisionResponse.responded(t.detail.response),this.decisionSpace&&this.decisionSpace.set(t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString())}))),this.decisionControl&&(this.decisionControl.hasAttribute("trials")&&this.decisionControl.addEventListener("decision-control-trials",(t=>{this.decisionTask&&(this.decisionTask.trials=t.detail.trials),this.decisionResponse&&(this.decisionResponse.trialTotal=t.detail.trials)})),this.decisionControl.hasAttribute("duration")&&this.decisionControl.addEventListener("decision-control-duration",(t=>{this.decisionTask&&(this.decisionTask.duration=t.detail.duration,this.decisionTask.iti=t.detail.duration)})),this.decisionControl.hasAttribute("run")&&this.decisionControl.addEventListener("decision-control-run",(()=>{this.cptProbability&&this.cptProbability.resumeTrial(),this.cptValue&&this.cptValue.resumeTrial(),this.decisionTask&&(this.decisionTask.running=!0)})),this.decisionControl.hasAttribute("pause")&&this.decisionControl.addEventListener("decision-control-pause",(()=>{this.cptProbability&&this.cptProbability.pauseTrial(),this.cptValue&&this.cptValue.pauseTrial(),this.decisionTask&&(this.decisionTask.running=!1)})),this.decisionControl.hasAttribute("reset")&&this.decisionControl.addEventListener("decision-control-reset",(()=>{this.cptProbability&&this.cptProbability.clear(),this.cptValue&&this.cptValue.clear(),this.decisionTask&&this.decisionTask.reset(),this.decisionResponse&&this.decisionResponse.reset(),this.decisionSpace&&this.decisionSpace.clear()}))),this.decisionTask&&(this.decisionResponse&&(this.decisionResponse.trialTotal=this.decisionTask.trials),this.decisionTask.addEventListener("decision-trial-start",(t=>{this.decisionResponse&&this.decisionResponse.start(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.gamblePayoff,t.detail.surePayoff,t.detail.better,t.detail.trial),this.vw=CPTMath.xal2v(this.xw,this.a,this.l),this.vl=CPTMath.xal2v(this.xl,this.a,this.l),this.ww=CPTMath.pg2w(this.pw,this.g),this.wl=1-this.ww,this.vs=CPTMath.xal2v(this.xs,this.a,this.l),this.ug=this.vw*this.ww+this.vl*this.wl,this.us=this.vs;const e=CPTMath.xal2v(t.detail.xw,this.a,this.l)*CPTMath.pg2w(t.detail.pw,this.g)+CPTMath.xal2v(t.detail.xl,this.a,this.l)*(1-CPTMath.pg2w(t.detail.pw,this.g))>CPTMath.xal2v(t.detail.xs,this.a,this.l)?"gamble":"sure";this.cptProbability&&this.cptProbability.trial(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.trial,e),this.cptValue&&this.cptValue.trial(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.trial,e)})),this.decisionTask.addEventListener("decision-trial-end",(()=>{this.decisionResponse&&this.decisionResponse.stop()})),this.decisionTask.addEventListener("decision-block-end",(()=>{this.decisionControl&&this.decisionControl.complete()}))),this.requestUpdate()}update(t){super.update(t),this.cptCalculation&&(this.cptCalculation.a=this.a,this.cptCalculation.l=this.l,this.cptCalculation.g=this.g),this.cptProbability&&(this.cptProbability.g=this.g),this.cptSpace&&(this.cptSpace.a=this.a,this.cptSpace.l=this.l,this.cptSpace.g=this.g),this.cptValue&&(this.cptValue.a=this.a,this.cptValue.l=this.l),this.decisionSpace&&(this.decisionSpace.a=this.a,this.decisionSpace.l=this.l,this.decisionSpace.g=this.g)}}customElements.define("cpt-example-model",CPTExampleModel);
//# sourceMappingURL=page.js.map