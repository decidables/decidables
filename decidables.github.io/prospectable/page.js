function _mergeNamespaces(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(r){if("default"!==r&&!(r in e)){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}}))})),Object.freeze(e)}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){if(this instanceof e){var r=[null];r.push.apply(r,arguments);var n=Function.bind.apply(t,r);return new n}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})})),r}var check=function(e){return e&&e.Math==Math&&e},global$k=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof commonjsGlobal&&commonjsGlobal)||function(){return this}()||Function("return this")(),objectGetOwnPropertyDescriptor={},fails$i=function(e){try{return!!e()}catch(e){return!0}},fails$h=fails$i,descriptors=!fails$h((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),fails$g=fails$i,functionBindNative=!fails$g((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),NATIVE_BIND$3=functionBindNative,call$9=Function.prototype.call,functionCall=NATIVE_BIND$3?call$9.bind(call$9):function(){return call$9.apply(call$9,arguments)},objectPropertyIsEnumerable={},$propertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor$2=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor$2&&!$propertyIsEnumerable.call({1:2},1);objectPropertyIsEnumerable.f=NASHORN_BUG?function(e){var t=getOwnPropertyDescriptor$2(this,e);return!!t&&t.enumerable}:$propertyIsEnumerable;var match,version$3,createPropertyDescriptor$5=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},NATIVE_BIND$2=functionBindNative,FunctionPrototype$2=Function.prototype,call$8=FunctionPrototype$2.call,uncurryThisWithBind=NATIVE_BIND$2&&FunctionPrototype$2.bind.bind(call$8,call$8),functionUncurryThis=NATIVE_BIND$2?uncurryThisWithBind:function(e){return function(){return call$8.apply(e,arguments)}},uncurryThis$i=functionUncurryThis,toString$5=uncurryThis$i({}.toString),stringSlice$1=uncurryThis$i("".slice),classofRaw$2=function(e){return stringSlice$1(toString$5(e),8,-1)},uncurryThis$h=functionUncurryThis,fails$f=fails$i,classof$8=classofRaw$2,$Object$4=Object,split=uncurryThis$h("".split),indexedObject=fails$f((function(){return!$Object$4("z").propertyIsEnumerable(0)}))?function(e){return"String"==classof$8(e)?split(e,""):$Object$4(e)}:$Object$4,isNullOrUndefined$4=function(e){return null==e},isNullOrUndefined$3=isNullOrUndefined$4,$TypeError$d=TypeError,requireObjectCoercible$3=function(e){if(isNullOrUndefined$3(e))throw $TypeError$d("Can't call method on "+e);return e},IndexedObject$1=indexedObject,requireObjectCoercible$2=requireObjectCoercible$3,toIndexedObject$4=function(e){return IndexedObject$1(requireObjectCoercible$2(e))},documentAll$2="object"==typeof document&&document.all,IS_HTMLDDA=void 0===documentAll$2&&void 0!==documentAll$2,documentAll_1={all:documentAll$2,IS_HTMLDDA:IS_HTMLDDA},$documentAll$1=documentAll_1,documentAll$1=$documentAll$1.all,isCallable$j=$documentAll$1.IS_HTMLDDA?function(e){return"function"==typeof e||e===documentAll$1}:function(e){return"function"==typeof e},isCallable$i=isCallable$j,$documentAll=documentAll_1,documentAll=$documentAll.all,isObject$9=$documentAll.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:isCallable$i(e)||e===documentAll}:function(e){return"object"==typeof e?null!==e:isCallable$i(e)},global$j=global$k,isCallable$h=isCallable$j,aFunction=function(e){return isCallable$h(e)?e:void 0},getBuiltIn$7=function(e,t){return arguments.length<2?aFunction(global$j[e]):global$j[e]&&global$j[e][t]},uncurryThis$g=functionUncurryThis,objectIsPrototypeOf=uncurryThis$g({}.isPrototypeOf),engineUserAgent="undefined"!=typeof navigator&&String(navigator.userAgent)||"",global$i=global$k,userAgent$1=engineUserAgent,process$2=global$i.process,Deno$1=global$i.Deno,versions=process$2&&process$2.versions||Deno$1&&Deno$1.version,v8=versions&&versions.v8;v8&&(version$3=(match=v8.split("."))[0]>0&&match[0]<4?1:+(match[0]+match[1])),!version$3&&userAgent$1&&(!(match=userAgent$1.match(/Edge\/(\d+)/))||match[1]>=74)&&(match=userAgent$1.match(/Chrome\/(\d+)/))&&(version$3=+match[1]);var engineV8Version=version$3,V8_VERSION=engineV8Version,fails$e=fails$i,symbolConstructorDetection=!!Object.getOwnPropertySymbols&&!fails$e((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&V8_VERSION&&V8_VERSION<41})),NATIVE_SYMBOL$1=symbolConstructorDetection,useSymbolAsUid=NATIVE_SYMBOL$1&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,getBuiltIn$6=getBuiltIn$7,isCallable$g=isCallable$j,isPrototypeOf$5=objectIsPrototypeOf,USE_SYMBOL_AS_UID$1=useSymbolAsUid,$Object$3=Object,isSymbol$3=USE_SYMBOL_AS_UID$1?function(e){return"symbol"==typeof e}:function(e){var t=getBuiltIn$6("Symbol");return isCallable$g(t)&&isPrototypeOf$5(t.prototype,$Object$3(e))},$String$4=String,tryToString$5=function(e){try{return $String$4(e)}catch(e){return"Object"}},isCallable$f=isCallable$j,tryToString$4=tryToString$5,$TypeError$c=TypeError,aCallable$4=function(e){if(isCallable$f(e))return e;throw $TypeError$c(tryToString$4(e)+" is not a function")},aCallable$3=aCallable$4,isNullOrUndefined$2=isNullOrUndefined$4,getMethod$3=function(e,t){var r=e[t];return isNullOrUndefined$2(r)?void 0:aCallable$3(r)},call$7=functionCall,isCallable$e=isCallable$j,isObject$8=isObject$9,$TypeError$b=TypeError,ordinaryToPrimitive$1=function(e,t){var r,n;if("string"===t&&isCallable$e(r=e.toString)&&!isObject$8(n=call$7(r,e)))return n;if(isCallable$e(r=e.valueOf)&&!isObject$8(n=call$7(r,e)))return n;if("string"!==t&&isCallable$e(r=e.toString)&&!isObject$8(n=call$7(r,e)))return n;throw $TypeError$b("Can't convert object to primitive value")},sharedExports={},shared$3={get exports(){return sharedExports},set exports(e){sharedExports=e}},global$h=global$k,defineProperty$5=Object.defineProperty,defineGlobalProperty$3=function(e,t){try{defineProperty$5(global$h,e,{value:t,configurable:!0,writable:!0})}catch(r){global$h[e]=t}return t},global$g=global$k,defineGlobalProperty$2=defineGlobalProperty$3,SHARED="__core-js_shared__",store$3=global$g[SHARED]||defineGlobalProperty$2(SHARED,{}),sharedStore=store$3,store$2=sharedStore;(shared$3.exports=function(e,t){return store$2[e]||(store$2[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.29.1",mode:"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.1/LICENSE",source:"https://github.com/zloirock/core-js"});var requireObjectCoercible$1=requireObjectCoercible$3,$Object$2=Object,toObject$6=function(e){return $Object$2(requireObjectCoercible$1(e))},uncurryThis$f=functionUncurryThis,toObject$5=toObject$6,hasOwnProperty=uncurryThis$f({}.hasOwnProperty),hasOwnProperty_1=Object.hasOwn||function(e,t){return hasOwnProperty(toObject$5(e),t)},uncurryThis$e=functionUncurryThis,id$1=0,postfix=Math.random(),toString$4=uncurryThis$e(1..toString),uid$4=function(e){return"Symbol("+(void 0===e?"":e)+")_"+toString$4(++id$1+postfix,36)},global$f=global$k,shared$2=sharedExports,hasOwn$e=hasOwnProperty_1,uid$3=uid$4,NATIVE_SYMBOL=symbolConstructorDetection,USE_SYMBOL_AS_UID=useSymbolAsUid,Symbol$1=global$f.Symbol,WellKnownSymbolsStore=shared$2("wks"),createWellKnownSymbol=USE_SYMBOL_AS_UID?Symbol$1.for||Symbol$1:Symbol$1&&Symbol$1.withoutSetter||uid$3,wellKnownSymbol$7=function(e){return hasOwn$e(WellKnownSymbolsStore,e)||(WellKnownSymbolsStore[e]=NATIVE_SYMBOL&&hasOwn$e(Symbol$1,e)?Symbol$1[e]:createWellKnownSymbol("Symbol."+e)),WellKnownSymbolsStore[e]},call$6=functionCall,isObject$7=isObject$9,isSymbol$2=isSymbol$3,getMethod$2=getMethod$3,ordinaryToPrimitive=ordinaryToPrimitive$1,wellKnownSymbol$6=wellKnownSymbol$7,$TypeError$a=TypeError,TO_PRIMITIVE=wellKnownSymbol$6("toPrimitive"),toPrimitive$1=function(e,t){if(!isObject$7(e)||isSymbol$2(e))return e;var r,n=getMethod$2(e,TO_PRIMITIVE);if(n){if(void 0===t&&(t="default"),r=call$6(n,e,t),!isObject$7(r)||isSymbol$2(r))return r;throw $TypeError$a("Can't convert object to primitive value")}return void 0===t&&(t="number"),ordinaryToPrimitive(e,t)},toPrimitive=toPrimitive$1,isSymbol$1=isSymbol$3,toPropertyKey$3=function(e){var t=toPrimitive(e,"string");return isSymbol$1(t)?t:t+""},global$e=global$k,isObject$6=isObject$9,document$1=global$e.document,EXISTS$1=isObject$6(document$1)&&isObject$6(document$1.createElement),documentCreateElement$1=function(e){return EXISTS$1?document$1.createElement(e):{}},DESCRIPTORS$c=descriptors,fails$d=fails$i,createElement$1=documentCreateElement$1,ie8DomDefine=!DESCRIPTORS$c&&!fails$d((function(){return 7!=Object.defineProperty(createElement$1("div"),"a",{get:function(){return 7}}).a})),DESCRIPTORS$b=descriptors,call$5=functionCall,propertyIsEnumerableModule=objectPropertyIsEnumerable,createPropertyDescriptor$4=createPropertyDescriptor$5,toIndexedObject$3=toIndexedObject$4,toPropertyKey$2=toPropertyKey$3,hasOwn$d=hasOwnProperty_1,IE8_DOM_DEFINE$1=ie8DomDefine,$getOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor;objectGetOwnPropertyDescriptor.f=DESCRIPTORS$b?$getOwnPropertyDescriptor$1:function(e,t){if(e=toIndexedObject$3(e),t=toPropertyKey$2(t),IE8_DOM_DEFINE$1)try{return $getOwnPropertyDescriptor$1(e,t)}catch(e){}if(hasOwn$d(e,t))return createPropertyDescriptor$4(!call$5(propertyIsEnumerableModule.f,e,t),e[t])};var objectDefineProperty={},DESCRIPTORS$a=descriptors,fails$c=fails$i,v8PrototypeDefineBug=DESCRIPTORS$a&&fails$c((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),isObject$5=isObject$9,$String$3=String,$TypeError$9=TypeError,anObject$a=function(e){if(isObject$5(e))return e;throw $TypeError$9($String$3(e)+" is not an object")},DESCRIPTORS$9=descriptors,IE8_DOM_DEFINE=ie8DomDefine,V8_PROTOTYPE_DEFINE_BUG$1=v8PrototypeDefineBug,anObject$9=anObject$a,toPropertyKey$1=toPropertyKey$3,$TypeError$8=TypeError,$defineProperty=Object.defineProperty,$getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,ENUMERABLE="enumerable",CONFIGURABLE$1="configurable",WRITABLE="writable";objectDefineProperty.f=DESCRIPTORS$9?V8_PROTOTYPE_DEFINE_BUG$1?function(e,t,r){if(anObject$9(e),t=toPropertyKey$1(t),anObject$9(r),"function"==typeof e&&"prototype"===t&&"value"in r&&WRITABLE in r&&!r[WRITABLE]){var n=$getOwnPropertyDescriptor(e,t);n&&n[WRITABLE]&&(e[t]=r.value,r={configurable:CONFIGURABLE$1 in r?r[CONFIGURABLE$1]:n[CONFIGURABLE$1],enumerable:ENUMERABLE in r?r[ENUMERABLE]:n[ENUMERABLE],writable:!1})}return $defineProperty(e,t,r)}:$defineProperty:function(e,t,r){if(anObject$9(e),t=toPropertyKey$1(t),anObject$9(r),IE8_DOM_DEFINE)try{return $defineProperty(e,t,r)}catch(e){}if("get"in r||"set"in r)throw $TypeError$8("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var DESCRIPTORS$8=descriptors,definePropertyModule$4=objectDefineProperty,createPropertyDescriptor$3=createPropertyDescriptor$5,createNonEnumerableProperty$7=DESCRIPTORS$8?function(e,t,r){return definePropertyModule$4.f(e,t,createPropertyDescriptor$3(1,r))}:function(e,t,r){return e[t]=r,e},makeBuiltInExports={},makeBuiltIn$3={get exports(){return makeBuiltInExports},set exports(e){makeBuiltInExports=e}},DESCRIPTORS$7=descriptors,hasOwn$c=hasOwnProperty_1,FunctionPrototype$1=Function.prototype,getDescriptor=DESCRIPTORS$7&&Object.getOwnPropertyDescriptor,EXISTS=hasOwn$c(FunctionPrototype$1,"name"),PROPER=EXISTS&&"something"===function(){}.name,CONFIGURABLE=EXISTS&&(!DESCRIPTORS$7||DESCRIPTORS$7&&getDescriptor(FunctionPrototype$1,"name").configurable),functionName={EXISTS:EXISTS,PROPER:PROPER,CONFIGURABLE:CONFIGURABLE},uncurryThis$d=functionUncurryThis,isCallable$d=isCallable$j,store$1=sharedStore,functionToString=uncurryThis$d(Function.toString);isCallable$d(store$1.inspectSource)||(store$1.inspectSource=function(e){return functionToString(e)});var set$3,get$2,has,inspectSource$2=store$1.inspectSource,global$d=global$k,isCallable$c=isCallable$j,WeakMap$2=global$d.WeakMap,weakMapBasicDetection=isCallable$c(WeakMap$2)&&/native code/.test(String(WeakMap$2)),shared$1=sharedExports,uid$2=uid$4,keys=shared$1("keys"),sharedKey$3=function(e){return keys[e]||(keys[e]=uid$2(e))},hiddenKeys$4={},NATIVE_WEAK_MAP=weakMapBasicDetection,global$c=global$k,isObject$4=isObject$9,createNonEnumerableProperty$6=createNonEnumerableProperty$7,hasOwn$b=hasOwnProperty_1,shared=sharedStore,sharedKey$2=sharedKey$3,hiddenKeys$3=hiddenKeys$4,OBJECT_ALREADY_INITIALIZED="Object already initialized",TypeError$3=global$c.TypeError,WeakMap$1=global$c.WeakMap,enforce=function(e){return has(e)?get$2(e):set$3(e,{})},getterFor=function(e){return function(t){var r;if(!isObject$4(t)||(r=get$2(t)).type!==e)throw TypeError$3("Incompatible receiver, "+e+" required");return r}};if(NATIVE_WEAK_MAP||shared.state){var store=shared.state||(shared.state=new WeakMap$1);store.get=store.get,store.has=store.has,store.set=store.set,set$3=function(e,t){if(store.has(e))throw TypeError$3(OBJECT_ALREADY_INITIALIZED);return t.facade=e,store.set(e,t),t},get$2=function(e){return store.get(e)||{}},has=function(e){return store.has(e)}}else{var STATE=sharedKey$2("state");hiddenKeys$3[STATE]=!0,set$3=function(e,t){if(hasOwn$b(e,STATE))throw TypeError$3(OBJECT_ALREADY_INITIALIZED);return t.facade=e,createNonEnumerableProperty$6(e,STATE,t),t},get$2=function(e){return hasOwn$b(e,STATE)?e[STATE]:{}},has=function(e){return hasOwn$b(e,STATE)}}var internalState={set:set$3,get:get$2,has:has,enforce:enforce,getterFor:getterFor},uncurryThis$c=functionUncurryThis,fails$b=fails$i,isCallable$b=isCallable$j,hasOwn$a=hasOwnProperty_1,DESCRIPTORS$6=descriptors,CONFIGURABLE_FUNCTION_NAME=functionName.CONFIGURABLE,inspectSource$1=inspectSource$2,InternalStateModule$1=internalState,enforceInternalState$1=InternalStateModule$1.enforce,getInternalState$1=InternalStateModule$1.get,$String$2=String,defineProperty$4=Object.defineProperty,stringSlice=uncurryThis$c("".slice),replace$1=uncurryThis$c("".replace),join=uncurryThis$c([].join),CONFIGURABLE_LENGTH=DESCRIPTORS$6&&!fails$b((function(){return 8!==defineProperty$4((function(){}),"length",{value:8}).length})),TEMPLATE=String(String).split("String"),makeBuiltIn$2=makeBuiltIn$3.exports=function(e,t,r){"Symbol("===stringSlice($String$2(t),0,7)&&(t="["+replace$1($String$2(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!hasOwn$a(e,"name")||CONFIGURABLE_FUNCTION_NAME&&e.name!==t)&&(DESCRIPTORS$6?defineProperty$4(e,"name",{value:t,configurable:!0}):e.name=t),CONFIGURABLE_LENGTH&&r&&hasOwn$a(r,"arity")&&e.length!==r.arity&&defineProperty$4(e,"length",{value:r.arity});try{r&&hasOwn$a(r,"constructor")&&r.constructor?DESCRIPTORS$6&&defineProperty$4(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=enforceInternalState$1(e);return hasOwn$a(n,"source")||(n.source=join(TEMPLATE,"string"==typeof t?t:"")),e};Function.prototype.toString=makeBuiltIn$2((function(){return isCallable$b(this)&&getInternalState$1(this).source||inspectSource$1(this)}),"toString");var isCallable$a=isCallable$j,definePropertyModule$3=objectDefineProperty,makeBuiltIn$1=makeBuiltInExports,defineGlobalProperty$1=defineGlobalProperty$3,defineBuiltIn$2=function(e,t,r,n){n||(n={});var i=n.enumerable,a=void 0!==n.name?n.name:t;if(isCallable$a(r)&&makeBuiltIn$1(r,a,n),n.global)i?e[t]=r:defineGlobalProperty$1(t,r);else{try{n.unsafe?e[t]&&(i=!0):delete e[t]}catch(e){}i?e[t]=r:definePropertyModule$3.f(e,t,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e},objectGetOwnPropertyNames={},ceil=Math.ceil,floor=Math.floor,mathTrunc=Math.trunc||function(e){var t=+e;return(t>0?floor:ceil)(t)},trunc=mathTrunc,toIntegerOrInfinity$5=function(e){var t=+e;return t!=t||0===t?0:trunc(t)},toIntegerOrInfinity$4=toIntegerOrInfinity$5,max$1=Math.max,min$2=Math.min,toAbsoluteIndex$1=function(e,t){var r=toIntegerOrInfinity$4(e);return r<0?max$1(r+t,0):min$2(r,t)},toIntegerOrInfinity$3=toIntegerOrInfinity$5,min$1=Math.min,toLength$1=function(e){return e>0?min$1(toIntegerOrInfinity$3(e),9007199254740991):0},toLength=toLength$1,lengthOfArrayLike$8=function(e){return toLength(e.length)},toIndexedObject$2=toIndexedObject$4,toAbsoluteIndex=toAbsoluteIndex$1,lengthOfArrayLike$7=lengthOfArrayLike$8,createMethod$1=function(e){return function(t,r,n){var i,a=toIndexedObject$2(t),o=lengthOfArrayLike$7(a),s=toAbsoluteIndex(n,o);if(e&&r!=r){for(;o>s;)if((i=a[s++])!=i)return!0}else for(;o>s;s++)if((e||s in a)&&a[s]===r)return e||s||0;return!e&&-1}},arrayIncludes={includes:createMethod$1(!0),indexOf:createMethod$1(!1)},uncurryThis$b=functionUncurryThis,hasOwn$9=hasOwnProperty_1,toIndexedObject$1=toIndexedObject$4,indexOf=arrayIncludes.indexOf,hiddenKeys$2=hiddenKeys$4,push$1=uncurryThis$b([].push),objectKeysInternal=function(e,t){var r,n=toIndexedObject$1(e),i=0,a=[];for(r in n)!hasOwn$9(hiddenKeys$2,r)&&hasOwn$9(n,r)&&push$1(a,r);for(;t.length>i;)hasOwn$9(n,r=t[i++])&&(~indexOf(a,r)||push$1(a,r));return a},enumBugKeys$3=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],internalObjectKeys$1=objectKeysInternal,enumBugKeys$2=enumBugKeys$3,hiddenKeys$1=enumBugKeys$2.concat("length","prototype");objectGetOwnPropertyNames.f=Object.getOwnPropertyNames||function(e){return internalObjectKeys$1(e,hiddenKeys$1)};var objectGetOwnPropertySymbols={};objectGetOwnPropertySymbols.f=Object.getOwnPropertySymbols;var getBuiltIn$5=getBuiltIn$7,uncurryThis$a=functionUncurryThis,getOwnPropertyNamesModule=objectGetOwnPropertyNames,getOwnPropertySymbolsModule=objectGetOwnPropertySymbols,anObject$8=anObject$a,concat=uncurryThis$a([].concat),ownKeys$1=getBuiltIn$5("Reflect","ownKeys")||function(e){var t=getOwnPropertyNamesModule.f(anObject$8(e)),r=getOwnPropertySymbolsModule.f;return r?concat(t,r(e)):t},hasOwn$8=hasOwnProperty_1,ownKeys=ownKeys$1,getOwnPropertyDescriptorModule=objectGetOwnPropertyDescriptor,definePropertyModule$2=objectDefineProperty,copyConstructorProperties$2=function(e,t,r){for(var n=ownKeys(t),i=definePropertyModule$2.f,a=getOwnPropertyDescriptorModule.f,o=0;o<n.length;o++){var s=n[o];hasOwn$8(e,s)||r&&hasOwn$8(r,s)||i(e,s,a(t,s))}},fails$a=fails$i,isCallable$9=isCallable$j,replacement=/#|\.prototype\./,isForced$1=function(e,t){var r=data[normalize$1(e)];return r==POLYFILL||r!=NATIVE&&(isCallable$9(t)?fails$a(t):!!t)},normalize$1=isForced$1.normalize=function(e){return String(e).replace(replacement,".").toLowerCase()},data=isForced$1.data={},NATIVE=isForced$1.NATIVE="N",POLYFILL=isForced$1.POLYFILL="P",isForced_1=isForced$1,global$b=global$k,getOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f,createNonEnumerableProperty$5=createNonEnumerableProperty$7,defineBuiltIn$1=defineBuiltIn$2,defineGlobalProperty=defineGlobalProperty$3,copyConstructorProperties$1=copyConstructorProperties$2,isForced=isForced_1,_export=function(e,t){var r,n,i,a,o,s=e.target,l=e.global,c=e.stat;if(r=l?global$b:c?global$b[s]||defineGlobalProperty(s,{}):(global$b[s]||{}).prototype)for(n in t){if(a=t[n],i=e.dontCallGetSet?(o=getOwnPropertyDescriptor$1(r,n))&&o.value:r[n],!isForced(l?n:s+(c?".":"#")+n,e.forced)&&void 0!==i){if(typeof a==typeof i)continue;copyConstructorProperties$1(a,i)}(e.sham||i&&i.sham)&&createNonEnumerableProperty$5(a,"sham",!0),defineBuiltIn$1(r,n,a,e)}},NATIVE_BIND$1=functionBindNative,FunctionPrototype=Function.prototype,apply$4=FunctionPrototype.apply,call$4=FunctionPrototype.call,functionApply="object"==typeof Reflect&&Reflect.apply||(NATIVE_BIND$1?call$4.bind(apply$4):function(){return call$4.apply(apply$4,arguments)}),uncurryThis$9=functionUncurryThis,aCallable$2=aCallable$4,functionUncurryThisAccessor=function(e,t,r){try{return uncurryThis$9(aCallable$2(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}},isCallable$8=isCallable$j,$String$1=String,$TypeError$7=TypeError,aPossiblePrototype$1=function(e){if("object"==typeof e||isCallable$8(e))return e;throw $TypeError$7("Can't set "+$String$1(e)+" as a prototype")},uncurryThisAccessor=functionUncurryThisAccessor,anObject$7=anObject$a,aPossiblePrototype=aPossiblePrototype$1,objectSetPrototypeOf=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=uncurryThisAccessor(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return anObject$7(r),aPossiblePrototype(n),t?e(r,n):r.__proto__=n,r}}():void 0),defineProperty$3=objectDefineProperty.f,proxyAccessor$1=function(e,t,r){r in e||defineProperty$3(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})},isCallable$7=isCallable$j,isObject$3=isObject$9,setPrototypeOf$2=objectSetPrototypeOf,inheritIfRequired$2=function(e,t,r){var n,i;return setPrototypeOf$2&&isCallable$7(n=t.constructor)&&n!==r&&isObject$3(i=n.prototype)&&i!==r.prototype&&setPrototypeOf$2(e,i),e},wellKnownSymbol$5=wellKnownSymbol$7,TO_STRING_TAG$2=wellKnownSymbol$5("toStringTag"),test={};test[TO_STRING_TAG$2]="z";var toStringTagSupport="[object z]"===String(test),TO_STRING_TAG_SUPPORT=toStringTagSupport,isCallable$6=isCallable$j,classofRaw$1=classofRaw$2,wellKnownSymbol$4=wellKnownSymbol$7,TO_STRING_TAG$1=wellKnownSymbol$4("toStringTag"),$Object$1=Object,CORRECT_ARGUMENTS="Arguments"==classofRaw$1(function(){return arguments}()),tryGet=function(e,t){try{return e[t]}catch(e){}},classof$7=TO_STRING_TAG_SUPPORT?classofRaw$1:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=tryGet(t=$Object$1(e),TO_STRING_TAG$1))?r:CORRECT_ARGUMENTS?classofRaw$1(t):"Object"==(n=classofRaw$1(t))&&isCallable$6(t.callee)?"Arguments":n},classof$6=classof$7,$String=String,toString$3=function(e){if("Symbol"===classof$6(e))throw TypeError("Cannot convert a Symbol value to a string");return $String(e)},toString$2=toString$3,normalizeStringArgument$2=function(e,t){return void 0===e?arguments.length<2?"":t:toString$2(e)},isObject$2=isObject$9,createNonEnumerableProperty$4=createNonEnumerableProperty$7,installErrorCause$1=function(e,t){isObject$2(t)&&"cause"in t&&createNonEnumerableProperty$4(e,"cause",t.cause)},uncurryThis$8=functionUncurryThis,$Error=Error,replace=uncurryThis$8("".replace),TEST=String($Error("zxcasd").stack),V8_OR_CHAKRA_STACK_ENTRY=/\n\s*at [^:]*:[^\n]*/,IS_V8_OR_CHAKRA_STACK=V8_OR_CHAKRA_STACK_ENTRY.test(TEST),errorStackClear=function(e,t){if(IS_V8_OR_CHAKRA_STACK&&"string"==typeof e&&!$Error.prepareStackTrace)for(;t--;)e=replace(e,V8_OR_CHAKRA_STACK_ENTRY,"");return e},fails$9=fails$i,createPropertyDescriptor$2=createPropertyDescriptor$5,errorStackInstallable=!fails$9((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",createPropertyDescriptor$2(1,7)),7!==e.stack)})),createNonEnumerableProperty$3=createNonEnumerableProperty$7,clearErrorStack$1=errorStackClear,ERROR_STACK_INSTALLABLE$1=errorStackInstallable,captureStackTrace=Error.captureStackTrace,errorStackInstall=function(e,t,r,n){ERROR_STACK_INSTALLABLE$1&&(captureStackTrace?captureStackTrace(e,t):createNonEnumerableProperty$3(e,"stack",clearErrorStack$1(r,n)))},getBuiltIn$4=getBuiltIn$7,hasOwn$7=hasOwnProperty_1,createNonEnumerableProperty$2=createNonEnumerableProperty$7,isPrototypeOf$4=objectIsPrototypeOf,setPrototypeOf$1=objectSetPrototypeOf,copyConstructorProperties=copyConstructorProperties$2,proxyAccessor=proxyAccessor$1,inheritIfRequired$1=inheritIfRequired$2,normalizeStringArgument$1=normalizeStringArgument$2,installErrorCause=installErrorCause$1,installErrorStack=errorStackInstall,DESCRIPTORS$5=descriptors,wrapErrorConstructorWithCause$2=function(e,t,r,n){var i="stackTraceLimit",a=n?2:1,o=e.split("."),s=o[o.length-1],l=getBuiltIn$4.apply(null,o);if(l){var c=l.prototype;if(hasOwn$7(c,"cause")&&delete c.cause,!r)return l;var u=getBuiltIn$4("Error"),d=t((function(e,t){var r=normalizeStringArgument$1(n?t:e,void 0),i=n?new l(e):new l;return void 0!==r&&createNonEnumerableProperty$2(i,"message",r),installErrorStack(i,d,i.stack,2),this&&isPrototypeOf$4(c,this)&&inheritIfRequired$1(i,this,d),arguments.length>a&&installErrorCause(i,arguments[a]),i}));d.prototype=c,"Error"!==s?setPrototypeOf$1?setPrototypeOf$1(d,u):copyConstructorProperties(d,u,{name:!0}):DESCRIPTORS$5&&i in l&&(proxyAccessor(d,l,i),proxyAccessor(d,l,"prepareStackTrace")),copyConstructorProperties(d,l);try{c.name!==s&&createNonEnumerableProperty$2(c,"name",s),c.constructor=d}catch(e){}return d}},$$e=_export,global$a=global$k,apply$3=functionApply,wrapErrorConstructorWithCause$1=wrapErrorConstructorWithCause$2,WEB_ASSEMBLY="WebAssembly",WebAssembly$1=global$a[WEB_ASSEMBLY],FORCED$5=7!==Error("e",{cause:7}).cause,exportGlobalErrorCauseWrapper=function(e,t){var r={};r[e]=wrapErrorConstructorWithCause$1(e,t,FORCED$5),$$e({global:!0,constructor:!0,arity:1,forced:FORCED$5},r)},exportWebAssemblyErrorCauseWrapper=function(e,t){if(WebAssembly$1&&WebAssembly$1[e]){var r={};r[e]=wrapErrorConstructorWithCause$1(WEB_ASSEMBLY+"."+e,t,FORCED$5),$$e({target:WEB_ASSEMBLY,stat:!0,constructor:!0,arity:1,forced:FORCED$5},r)}};exportGlobalErrorCauseWrapper("Error",(function(e){return function(t){return apply$3(e,this,arguments)}})),exportGlobalErrorCauseWrapper("EvalError",(function(e){return function(t){return apply$3(e,this,arguments)}})),exportGlobalErrorCauseWrapper("RangeError",(function(e){return function(t){return apply$3(e,this,arguments)}})),exportGlobalErrorCauseWrapper("ReferenceError",(function(e){return function(t){return apply$3(e,this,arguments)}})),exportGlobalErrorCauseWrapper("SyntaxError",(function(e){return function(t){return apply$3(e,this,arguments)}})),exportGlobalErrorCauseWrapper("TypeError",(function(e){return function(t){return apply$3(e,this,arguments)}})),exportGlobalErrorCauseWrapper("URIError",(function(e){return function(t){return apply$3(e,this,arguments)}})),exportWebAssemblyErrorCauseWrapper("CompileError",(function(e){return function(t){return apply$3(e,this,arguments)}})),exportWebAssemblyErrorCauseWrapper("LinkError",(function(e){return function(t){return apply$3(e,this,arguments)}})),exportWebAssemblyErrorCauseWrapper("RuntimeError",(function(e){return function(t){return apply$3(e,this,arguments)}}));var $$d=_export,getBuiltIn$3=getBuiltIn$7,apply$2=functionApply,fails$8=fails$i,wrapErrorConstructorWithCause=wrapErrorConstructorWithCause$2,AGGREGATE_ERROR="AggregateError",$AggregateError=getBuiltIn$3(AGGREGATE_ERROR),FORCED$4=!fails$8((function(){return 1!==$AggregateError([1]).errors[0]}))&&fails$8((function(){return 7!==$AggregateError([1],AGGREGATE_ERROR,{cause:7}).cause}));$$d({global:!0,constructor:!0,arity:2,forced:FORCED$4},{AggregateError:wrapErrorConstructorWithCause(AGGREGATE_ERROR,(function(e){return function(t,r){return apply$2(e,this,arguments)}}),FORCED$4,!0)});var objectDefineProperties={},internalObjectKeys=objectKeysInternal,enumBugKeys$1=enumBugKeys$3,objectKeys$2=Object.keys||function(e){return internalObjectKeys(e,enumBugKeys$1)},DESCRIPTORS$4=descriptors,V8_PROTOTYPE_DEFINE_BUG=v8PrototypeDefineBug,definePropertyModule$1=objectDefineProperty,anObject$6=anObject$a,toIndexedObject=toIndexedObject$4,objectKeys$1=objectKeys$2;objectDefineProperties.f=DESCRIPTORS$4&&!V8_PROTOTYPE_DEFINE_BUG?Object.defineProperties:function(e,t){anObject$6(e);for(var r,n=toIndexedObject(t),i=objectKeys$1(t),a=i.length,o=0;a>o;)definePropertyModule$1.f(e,r=i[o++],n[r]);return e};var activeXDocument,getBuiltIn$2=getBuiltIn$7,html$2=getBuiltIn$2("document","documentElement"),anObject$5=anObject$a,definePropertiesModule=objectDefineProperties,enumBugKeys=enumBugKeys$3,hiddenKeys=hiddenKeys$4,html$1=html$2,documentCreateElement=documentCreateElement$1,sharedKey$1=sharedKey$3,GT=">",LT="<",PROTOTYPE="prototype",SCRIPT="script",IE_PROTO$1=sharedKey$1("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(e){return LT+SCRIPT+GT+e+LT+"/"+SCRIPT+GT},NullProtoObjectViaActiveX=function(e){e.write(scriptTag("")),e.close();var t=e.parentWindow.Object;return e=null,t},NullProtoObjectViaIFrame=function(){var e,t=documentCreateElement("iframe"),r="java"+SCRIPT+":";return t.style.display="none",html$1.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(scriptTag("document.F=Object")),e.close(),e.F},NullProtoObject=function(){try{activeXDocument=new ActiveXObject("htmlfile")}catch(e){}NullProtoObject="undefined"!=typeof document?document.domain&&activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame():NullProtoObjectViaActiveX(activeXDocument);for(var e=enumBugKeys.length;e--;)delete NullProtoObject[PROTOTYPE][enumBugKeys[e]];return NullProtoObject()};hiddenKeys[IE_PROTO$1]=!0;var objectCreate=Object.create||function(e,t){var r;return null!==e?(EmptyConstructor[PROTOTYPE]=anObject$5(e),r=new EmptyConstructor,EmptyConstructor[PROTOTYPE]=null,r[IE_PROTO$1]=e):r=NullProtoObject(),void 0===t?r:definePropertiesModule.f(r,t)},wellKnownSymbol$3=wellKnownSymbol$7,create$2=objectCreate,defineProperty$2=objectDefineProperty.f,UNSCOPABLES=wellKnownSymbol$3("unscopables"),ArrayPrototype$1=Array.prototype;null==ArrayPrototype$1[UNSCOPABLES]&&defineProperty$2(ArrayPrototype$1,UNSCOPABLES,{configurable:!0,value:create$2(null)});var addToUnscopables$3=function(e){ArrayPrototype$1[UNSCOPABLES][e]=!0},$$c=_export,toObject$4=toObject$6,lengthOfArrayLike$6=lengthOfArrayLike$8,toIntegerOrInfinity$2=toIntegerOrInfinity$5,addToUnscopables$2=addToUnscopables$3;$$c({target:"Array",proto:!0},{at:function(e){var t=toObject$4(this),r=lengthOfArrayLike$6(t),n=toIntegerOrInfinity$2(e),i=n>=0?n:r+n;return i<0||i>=r?void 0:t[i]}}),addToUnscopables$2("at");var classofRaw=classofRaw$2,uncurryThis$7=functionUncurryThis,functionUncurryThisClause=function(e){if("Function"===classofRaw(e))return uncurryThis$7(e)},uncurryThis$6=functionUncurryThisClause,aCallable$1=aCallable$4,NATIVE_BIND=functionBindNative,bind$3=functionUncurryThisClause(functionUncurryThisClause.bind),functionBindContext=function(e,t){return aCallable$1(e),void 0===t?e:NATIVE_BIND?bind$3(e,t):function(){return e.apply(t,arguments)}},bind$2=functionBindContext,IndexedObject=indexedObject,toObject$3=toObject$6,lengthOfArrayLike$5=lengthOfArrayLike$8,createMethod=function(e){var t=1==e;return function(r,n,i){for(var a,o=toObject$3(r),s=IndexedObject(o),l=bind$2(n,i),c=lengthOfArrayLike$5(s);c-- >0;)if(l(a=s[c],c,o))switch(e){case 0:return a;case 1:return c}return t?-1:void 0}},arrayIterationFromLast={findLast:createMethod(0),findLastIndex:createMethod(1)},$$b=_export,$findLast$1=arrayIterationFromLast.findLast,addToUnscopables$1=addToUnscopables$3;$$b({target:"Array",proto:!0},{findLast:function(e){return $findLast$1(this,e,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables$1("findLast");var $$a=_export,$findLastIndex$1=arrayIterationFromLast.findLastIndex,addToUnscopables=addToUnscopables$3;$$a({target:"Array",proto:!0},{findLastIndex:function(e){return $findLastIndex$1(this,e,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables("findLastIndex");var classof$5=classofRaw$2,isArray$4=Array.isArray||function(e){return"Array"==classof$5(e)},DESCRIPTORS$3=descriptors,isArray$3=isArray$4,$TypeError$6=TypeError,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,SILENT_ON_NON_WRITABLE_LENGTH_SET=DESCRIPTORS$3&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),arraySetLength=SILENT_ON_NON_WRITABLE_LENGTH_SET?function(e,t){if(isArray$3(e)&&!getOwnPropertyDescriptor(e,"length").writable)throw $TypeError$6("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},$TypeError$5=TypeError,MAX_SAFE_INTEGER=9007199254740991,doesNotExceedSafeInteger$2=function(e){if(e>MAX_SAFE_INTEGER)throw $TypeError$5("Maximum allowed index exceeded");return e},$$9=_export,toObject$2=toObject$6,lengthOfArrayLike$4=lengthOfArrayLike$8,setArrayLength$1=arraySetLength,doesNotExceedSafeInteger$1=doesNotExceedSafeInteger$2,fails$7=fails$i,INCORRECT_TO_LENGTH=fails$7((function(){return 4294967297!==[].push.call({length:4294967296},1)})),properErrorOnNonWritableLength$1=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},FORCED$3=INCORRECT_TO_LENGTH||!properErrorOnNonWritableLength$1();$$9({target:"Array",proto:!0,arity:1,forced:FORCED$3},{push:function(e){var t=toObject$2(this),r=lengthOfArrayLike$4(t),n=arguments.length;doesNotExceedSafeInteger$1(r+n);for(var i=0;i<n;i++)t[r]=arguments[i],r++;return setArrayLength$1(t,r),r}});var tryToString$3=tryToString$5,$TypeError$4=TypeError,deletePropertyOrThrow$1=function(e,t){if(!delete e[t])throw $TypeError$4("Cannot delete property "+tryToString$3(t)+" of "+tryToString$3(e))},$$8=_export,toObject$1=toObject$6,lengthOfArrayLike$3=lengthOfArrayLike$8,setArrayLength=arraySetLength,deletePropertyOrThrow=deletePropertyOrThrow$1,doesNotExceedSafeInteger=doesNotExceedSafeInteger$2,INCORRECT_RESULT=1!==[].unshift(0),properErrorOnNonWritableLength=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},FORCED$2=INCORRECT_RESULT||!properErrorOnNonWritableLength();$$8({target:"Array",proto:!0,arity:1,forced:FORCED$2},{unshift:function(e){var t=toObject$1(this),r=lengthOfArrayLike$3(t),n=arguments.length;if(n){doesNotExceedSafeInteger(r+n);for(var i=r;i--;){var a=i+n;i in t?t[a]=t[i]:deletePropertyOrThrow(t,a)}for(var o=0;o<n;o++)t[o]=arguments[o]}return setArrayLength(t,r+n)}});var $$7=_export,hasOwn$6=hasOwnProperty_1;$$7({target:"Object",stat:!0},{hasOwn:hasOwn$6});var makeBuiltIn=makeBuiltInExports,defineProperty$1=objectDefineProperty,defineBuiltInAccessor$2=function(e,t,r){return r.get&&makeBuiltIn(r.get,t,{getter:!0}),r.set&&makeBuiltIn(r.set,t,{setter:!0}),defineProperty$1.f(e,t,r)},anObject$4=anObject$a,regexpFlags=function(){var e=anObject$4(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},global$9=global$k,DESCRIPTORS$2=descriptors,defineBuiltInAccessor$1=defineBuiltInAccessor$2,regExpFlags$1=regexpFlags,fails$6=fails$i,RegExp$1=global$9.RegExp,RegExpPrototype$1=RegExp$1.prototype,FORCED$1=DESCRIPTORS$2&&fails$6((function(){var e=!0;try{RegExp$1(".","d")}catch(t){e=!1}var t={},r="",n=e?"dgimsy":"gimsy",i=function(e,n){Object.defineProperty(t,e,{get:function(){return r+=n,!0}})},a={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var o in e&&(a.hasIndices="d"),a)i(o,a[o]);return Object.getOwnPropertyDescriptor(RegExpPrototype$1,"flags").get.call(t)!==n||r!==n}));FORCED$1&&defineBuiltInAccessor$1(RegExpPrototype$1,"flags",{configurable:!0,get:regExpFlags$1});var $$6=_export,uncurryThis$5=functionUncurryThis,requireObjectCoercible=requireObjectCoercible$3,toIntegerOrInfinity$1=toIntegerOrInfinity$5,toString$1=toString$3,fails$5=fails$i,charAt=uncurryThis$5("".charAt),FORCED=fails$5((function(){return"\ud842"!=="𠮷".at(-2)}));$$6({target:"String",proto:!0,forced:FORCED},{at:function(e){var t=toString$1(requireObjectCoercible(this)),r=t.length,n=toIntegerOrInfinity$1(e),i=n>=0?n:r+n;return i<0||i>=r?void 0:charAt(t,i)}});var NAME$3,Constructor,Prototype,arrayBufferBasicDetection="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,fails$4=fails$i,correctPrototypeGetter=!fails$4((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),hasOwn$5=hasOwnProperty_1,isCallable$5=isCallable$j,toObject=toObject$6,sharedKey=sharedKey$3,CORRECT_PROTOTYPE_GETTER=correctPrototypeGetter,IE_PROTO=sharedKey("IE_PROTO"),$Object=Object,ObjectPrototype$1=$Object.prototype,objectGetPrototypeOf=CORRECT_PROTOTYPE_GETTER?$Object.getPrototypeOf:function(e){var t=toObject(e);if(hasOwn$5(t,IE_PROTO))return t[IE_PROTO];var r=t.constructor;return isCallable$5(r)&&t instanceof r?r.prototype:t instanceof $Object?ObjectPrototype$1:null},NATIVE_ARRAY_BUFFER=arrayBufferBasicDetection,DESCRIPTORS$1=descriptors,global$8=global$k,isCallable$4=isCallable$j,isObject$1=isObject$9,hasOwn$4=hasOwnProperty_1,classof$4=classof$7,tryToString$2=tryToString$5,createNonEnumerableProperty$1=createNonEnumerableProperty$7,defineBuiltIn=defineBuiltIn$2,defineBuiltInAccessor=defineBuiltInAccessor$2,isPrototypeOf$3=objectIsPrototypeOf,getPrototypeOf=objectGetPrototypeOf,setPrototypeOf=objectSetPrototypeOf,wellKnownSymbol$2=wellKnownSymbol$7,uid$1=uid$4,InternalStateModule=internalState,enforceInternalState=InternalStateModule.enforce,getInternalState=InternalStateModule.get,Int8Array$1=global$8.Int8Array,Int8ArrayPrototype=Int8Array$1&&Int8Array$1.prototype,Uint8ClampedArray$1=global$8.Uint8ClampedArray,Uint8ClampedArrayPrototype=Uint8ClampedArray$1&&Uint8ClampedArray$1.prototype,TypedArray=Int8Array$1&&getPrototypeOf(Int8Array$1),TypedArrayPrototype=Int8ArrayPrototype&&getPrototypeOf(Int8ArrayPrototype),ObjectPrototype=Object.prototype,TypeError$2=global$8.TypeError,TO_STRING_TAG=wellKnownSymbol$2("toStringTag"),TYPED_ARRAY_TAG=uid$1("TYPED_ARRAY_TAG"),TYPED_ARRAY_CONSTRUCTOR="TypedArrayConstructor",NATIVE_ARRAY_BUFFER_VIEWS=NATIVE_ARRAY_BUFFER&&!!setPrototypeOf&&"Opera"!==classof$4(global$8.opera),TYPED_ARRAY_TAG_REQUIRED=!1,TypedArrayConstructorsList={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},BigIntArrayConstructorsList={BigInt64Array:8,BigUint64Array:8},isView=function(e){if(!isObject$1(e))return!1;var t=classof$4(e);return"DataView"===t||hasOwn$4(TypedArrayConstructorsList,t)||hasOwn$4(BigIntArrayConstructorsList,t)},getTypedArrayConstructor=function(e){var t=getPrototypeOf(e);if(isObject$1(t)){var r=getInternalState(t);return r&&hasOwn$4(r,TYPED_ARRAY_CONSTRUCTOR)?r[TYPED_ARRAY_CONSTRUCTOR]:getTypedArrayConstructor(t)}},isTypedArray$2=function(e){if(!isObject$1(e))return!1;var t=classof$4(e);return hasOwn$4(TypedArrayConstructorsList,t)||hasOwn$4(BigIntArrayConstructorsList,t)},aTypedArray$3=function(e){if(isTypedArray$2(e))return e;throw TypeError$2("Target is not a typed array")},aTypedArrayConstructor=function(e){if(isCallable$4(e)&&(!setPrototypeOf||isPrototypeOf$3(TypedArray,e)))return e;throw TypeError$2(tryToString$2(e)+" is not a typed array constructor")},exportTypedArrayMethod$3=function(e,t,r,n){if(DESCRIPTORS$1){if(r)for(var i in TypedArrayConstructorsList){var a=global$8[i];if(a&&hasOwn$4(a.prototype,e))try{delete a.prototype[e]}catch(r){try{a.prototype[e]=t}catch(e){}}}TypedArrayPrototype[e]&&!r||defineBuiltIn(TypedArrayPrototype,e,r?t:NATIVE_ARRAY_BUFFER_VIEWS&&Int8ArrayPrototype[e]||t,n)}},exportTypedArrayStaticMethod=function(e,t,r){var n,i;if(DESCRIPTORS$1){if(setPrototypeOf){if(r)for(n in TypedArrayConstructorsList)if((i=global$8[n])&&hasOwn$4(i,e))try{delete i[e]}catch(e){}if(TypedArray[e]&&!r)return;try{return defineBuiltIn(TypedArray,e,r?t:NATIVE_ARRAY_BUFFER_VIEWS&&TypedArray[e]||t)}catch(e){}}for(n in TypedArrayConstructorsList)!(i=global$8[n])||i[e]&&!r||defineBuiltIn(i,e,t)}};for(NAME$3 in TypedArrayConstructorsList)(Prototype=(Constructor=global$8[NAME$3])&&Constructor.prototype)?enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR]=Constructor:NATIVE_ARRAY_BUFFER_VIEWS=!1;for(NAME$3 in BigIntArrayConstructorsList)(Prototype=(Constructor=global$8[NAME$3])&&Constructor.prototype)&&(enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR]=Constructor);if((!NATIVE_ARRAY_BUFFER_VIEWS||!isCallable$4(TypedArray)||TypedArray===Function.prototype)&&(TypedArray=function(){throw TypeError$2("Incorrect invocation")},NATIVE_ARRAY_BUFFER_VIEWS))for(NAME$3 in TypedArrayConstructorsList)global$8[NAME$3]&&setPrototypeOf(global$8[NAME$3],TypedArray);if((!NATIVE_ARRAY_BUFFER_VIEWS||!TypedArrayPrototype||TypedArrayPrototype===ObjectPrototype)&&(TypedArrayPrototype=TypedArray.prototype,NATIVE_ARRAY_BUFFER_VIEWS))for(NAME$3 in TypedArrayConstructorsList)global$8[NAME$3]&&setPrototypeOf(global$8[NAME$3].prototype,TypedArrayPrototype);if(NATIVE_ARRAY_BUFFER_VIEWS&&getPrototypeOf(Uint8ClampedArrayPrototype)!==TypedArrayPrototype&&setPrototypeOf(Uint8ClampedArrayPrototype,TypedArrayPrototype),DESCRIPTORS$1&&!hasOwn$4(TypedArrayPrototype,TO_STRING_TAG))for(NAME$3 in TYPED_ARRAY_TAG_REQUIRED=!0,defineBuiltInAccessor(TypedArrayPrototype,TO_STRING_TAG,{configurable:!0,get:function(){return isObject$1(this)?this[TYPED_ARRAY_TAG]:void 0}}),TypedArrayConstructorsList)global$8[NAME$3]&&createNonEnumerableProperty$1(global$8[NAME$3],TYPED_ARRAY_TAG,NAME$3);var arrayBufferViewCore={NATIVE_ARRAY_BUFFER_VIEWS:NATIVE_ARRAY_BUFFER_VIEWS,TYPED_ARRAY_TAG:TYPED_ARRAY_TAG_REQUIRED&&TYPED_ARRAY_TAG,aTypedArray:aTypedArray$3,aTypedArrayConstructor:aTypedArrayConstructor,exportTypedArrayMethod:exportTypedArrayMethod$3,exportTypedArrayStaticMethod:exportTypedArrayStaticMethod,getTypedArrayConstructor:getTypedArrayConstructor,isView:isView,isTypedArray:isTypedArray$2,TypedArray:TypedArray,TypedArrayPrototype:TypedArrayPrototype},ArrayBufferViewCore$2=arrayBufferViewCore,lengthOfArrayLike$2=lengthOfArrayLike$8,toIntegerOrInfinity=toIntegerOrInfinity$5,aTypedArray$2=ArrayBufferViewCore$2.aTypedArray,exportTypedArrayMethod$2=ArrayBufferViewCore$2.exportTypedArrayMethod;exportTypedArrayMethod$2("at",(function(e){var t=aTypedArray$2(this),r=lengthOfArrayLike$2(t),n=toIntegerOrInfinity(e),i=n>=0?n:r+n;return i<0||i>=r?void 0:t[i]}));var ArrayBufferViewCore$1=arrayBufferViewCore,$findLast=arrayIterationFromLast.findLast,aTypedArray$1=ArrayBufferViewCore$1.aTypedArray,exportTypedArrayMethod$1=ArrayBufferViewCore$1.exportTypedArrayMethod;exportTypedArrayMethod$1("findLast",(function(e){return $findLast(aTypedArray$1(this),e,arguments.length>1?arguments[1]:void 0)}));var ArrayBufferViewCore=arrayBufferViewCore,$findLastIndex=arrayIterationFromLast.findLastIndex,aTypedArray=ArrayBufferViewCore.aTypedArray,exportTypedArrayMethod=ArrayBufferViewCore.exportTypedArrayMethod;exportTypedArrayMethod("findLastIndex",(function(e){return $findLastIndex(aTypedArray(this),e,arguments.length>1?arguments[1]:void 0)}));var isPrototypeOf$2=objectIsPrototypeOf,$TypeError$3=TypeError,anInstance$1=function(e,t){if(isPrototypeOf$2(t,e))return e;throw $TypeError$3("Incorrect invocation")},domExceptionConstants={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}},$$5=_export,global$7=global$k,getBuiltIn$1=getBuiltIn$7,createPropertyDescriptor$1=createPropertyDescriptor$5,defineProperty=objectDefineProperty.f,hasOwn$3=hasOwnProperty_1,anInstance=anInstance$1,inheritIfRequired=inheritIfRequired$2,normalizeStringArgument=normalizeStringArgument$2,DOMExceptionConstants=domExceptionConstants,clearErrorStack=errorStackClear,DESCRIPTORS=descriptors,DOM_EXCEPTION="DOMException",Error$2=getBuiltIn$1("Error"),NativeDOMException=getBuiltIn$1(DOM_EXCEPTION),$DOMException=function(){anInstance(this,DOMExceptionPrototype);var e=arguments.length,t=normalizeStringArgument(e<1?void 0:arguments[0]),r=normalizeStringArgument(e<2?void 0:arguments[1],"Error"),n=new NativeDOMException(t,r),i=Error$2(t);return i.name=DOM_EXCEPTION,defineProperty(n,"stack",createPropertyDescriptor$1(1,clearErrorStack(i.stack,1))),inheritIfRequired(n,this,$DOMException),n},DOMExceptionPrototype=$DOMException.prototype=NativeDOMException.prototype,ERROR_HAS_STACK="stack"in Error$2(DOM_EXCEPTION),DOM_EXCEPTION_HAS_STACK="stack"in new NativeDOMException(1,2),descriptor=NativeDOMException&&DESCRIPTORS&&Object.getOwnPropertyDescriptor(global$7,DOM_EXCEPTION),BUGGY_DESCRIPTOR=!(!descriptor||descriptor.writable&&descriptor.configurable),FORCED_CONSTRUCTOR=ERROR_HAS_STACK&&!BUGGY_DESCRIPTOR&&!DOM_EXCEPTION_HAS_STACK;$$5({global:!0,constructor:!0,forced:FORCED_CONSTRUCTOR},{DOMException:FORCED_CONSTRUCTOR?$DOMException:NativeDOMException});var PolyfilledDOMException=getBuiltIn$1(DOM_EXCEPTION),PolyfilledDOMExceptionPrototype=PolyfilledDOMException.prototype;if(PolyfilledDOMExceptionPrototype.constructor!==PolyfilledDOMException)for(var key in defineProperty(PolyfilledDOMExceptionPrototype,"constructor",createPropertyDescriptor$1(1,PolyfilledDOMException)),DOMExceptionConstants)if(hasOwn$3(DOMExceptionConstants,key)){var constant$4=DOMExceptionConstants[key],constantName=constant$4.s;hasOwn$3(PolyfilledDOMException,constantName)||defineProperty(PolyfilledDOMException,constantName,createPropertyDescriptor$1(6,constant$4.c))}var $location,defer,channel,port,uncurryThis$4=functionUncurryThis,arraySlice$2=uncurryThis$4([].slice),$TypeError$2=TypeError,validateArgumentsLength$3=function(e,t){if(e<t)throw $TypeError$2("Not enough arguments");return e},userAgent=engineUserAgent,engineIsIos=/(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent),classof$3=classofRaw$2,engineIsNode="undefined"!=typeof process&&"process"==classof$3(process),global$6=global$k,apply$1=functionApply,bind$1=functionBindContext,isCallable$3=isCallable$j,hasOwn$2=hasOwnProperty_1,fails$3=fails$i,html=html$2,arraySlice$1=arraySlice$2,createElement=documentCreateElement$1,validateArgumentsLength$2=validateArgumentsLength$3,IS_IOS=engineIsIos,IS_NODE$2=engineIsNode,set$2=global$6.setImmediate,clear=global$6.clearImmediate,process$1=global$6.process,Dispatch$1=global$6.Dispatch,Function$2=global$6.Function,MessageChannel=global$6.MessageChannel,String$1=global$6.String,counter=0,queue$1={},ONREADYSTATECHANGE="onreadystatechange";fails$3((function(){$location=global$6.location}));var run=function(e){if(hasOwn$2(queue$1,e)){var t=queue$1[e];delete queue$1[e],t()}},runner=function(e){return function(){run(e)}},eventListener=function(e){run(e.data)},globalPostMessageDefer=function(e){global$6.postMessage(String$1(e),$location.protocol+"//"+$location.host)};set$2&&clear||(set$2=function(e){validateArgumentsLength$2(arguments.length,1);var t=isCallable$3(e)?e:Function$2(e),r=arraySlice$1(arguments,1);return queue$1[++counter]=function(){apply$1(t,void 0,r)},defer(counter),counter},clear=function(e){delete queue$1[e]},IS_NODE$2?defer=function(e){process$1.nextTick(runner(e))}:Dispatch$1&&Dispatch$1.now?defer=function(e){Dispatch$1.now(runner(e))}:MessageChannel&&!IS_IOS?(port=(channel=new MessageChannel).port2,channel.port1.onmessage=eventListener,defer=bind$1(port.postMessage,port)):global$6.addEventListener&&isCallable$3(global$6.postMessage)&&!global$6.importScripts&&$location&&"file:"!==$location.protocol&&!fails$3(globalPostMessageDefer)?(defer=globalPostMessageDefer,global$6.addEventListener("message",eventListener,!1)):defer=ONREADYSTATECHANGE in createElement("script")?function(e){html.appendChild(createElement("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run(e)}}:function(e){setTimeout(runner(e),0)});var task={set:set$2,clear:clear},$$4=_export,global$5=global$k,clearImmediate=task.clear;$$4({global:!0,bind:!0,enumerable:!0,forced:global$5.clearImmediate!==clearImmediate},{clearImmediate:clearImmediate});var engineIsBun="function"==typeof Bun&&Bun&&"string"==typeof Bun.version,global$4=global$k,apply=functionApply,isCallable$2=isCallable$j,ENGINE_IS_BUN=engineIsBun,USER_AGENT=engineUserAgent,arraySlice=arraySlice$2,validateArgumentsLength$1=validateArgumentsLength$3,Function$1=global$4.Function,WRAP=/MSIE .\./.test(USER_AGENT)||ENGINE_IS_BUN&&function(){var e=global$4.Bun.version.split(".");return e.length<3||0==e[0]&&(e[1]<3||3==e[1]&&0==e[2])}(),schedulersFix$1=function(e,t){var r=t?2:1;return WRAP?function(n,i){var a=validateArgumentsLength$1(arguments.length,1)>r,o=isCallable$2(n)?n:Function$1(n),s=a?arraySlice(arguments,r):[],l=a?function(){apply(o,this,s)}:o;return t?e(l,i):e(l)}:e},$$3=_export,global$3=global$k,setTask=task.set,schedulersFix=schedulersFix$1,setImmediate$1=global$3.setImmediate?schedulersFix(setTask,!1):setTask;$$3({global:!0,bind:!0,enumerable:!0,forced:global$3.setImmediate!==setImmediate$1},{setImmediate:setImmediate$1});var uncurryThis$3=functionUncurryThis,fails$2=fails$i,isCallable$1=isCallable$j,classof$2=classof$7,getBuiltIn=getBuiltIn$7,inspectSource=inspectSource$2,noop$3=function(){},empty$1=[],construct=getBuiltIn("Reflect","construct"),constructorRegExp=/^\s*(?:class|function)\b/,exec=uncurryThis$3(constructorRegExp.exec),INCORRECT_TO_STRING=!constructorRegExp.exec(noop$3),isConstructorModern=function(e){if(!isCallable$1(e))return!1;try{return construct(noop$3,empty$1,e),!0}catch(e){return!1}},isConstructorLegacy=function(e){if(!isCallable$1(e))return!1;switch(classof$2(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return INCORRECT_TO_STRING||!!exec(constructorRegExp,inspectSource(e))}catch(e){return!0}};isConstructorLegacy.sham=!0;var isConstructor$1=!construct||fails$2((function(){var e;return isConstructorModern(isConstructorModern.call)||!isConstructorModern(Object)||!isConstructorModern((function(){e=!0}))||e}))?isConstructorLegacy:isConstructorModern,iterators={},wellKnownSymbol$1=wellKnownSymbol$7,Iterators$1=iterators,ITERATOR$1=wellKnownSymbol$1("iterator"),ArrayPrototype=Array.prototype,isArrayIteratorMethod$1=function(e){return void 0!==e&&(Iterators$1.Array===e||ArrayPrototype[ITERATOR$1]===e)},classof$1=classof$7,getMethod$1=getMethod$3,isNullOrUndefined$1=isNullOrUndefined$4,Iterators=iterators,wellKnownSymbol=wellKnownSymbol$7,ITERATOR=wellKnownSymbol("iterator"),getIteratorMethod$2=function(e){if(!isNullOrUndefined$1(e))return getMethod$1(e,ITERATOR)||getMethod$1(e,"@@iterator")||Iterators[classof$1(e)]},call$3=functionCall,aCallable=aCallable$4,anObject$3=anObject$a,tryToString$1=tryToString$5,getIteratorMethod$1=getIteratorMethod$2,$TypeError$1=TypeError,getIterator$1=function(e,t){var r=arguments.length<2?getIteratorMethod$1(e):t;if(aCallable(r))return anObject$3(call$3(r,e));throw $TypeError$1(tryToString$1(e)+" is not iterable")},call$2=functionCall,anObject$2=anObject$a,getMethod=getMethod$3,iteratorClose$1=function(e,t,r){var n,i;anObject$2(e);try{if(!(n=getMethod(e,"return"))){if("throw"===t)throw r;return r}n=call$2(n,e)}catch(e){i=!0,n=e}if("throw"===t)throw r;if(i)throw n;return anObject$2(n),r},bind=functionBindContext,call$1=functionCall,anObject$1=anObject$a,tryToString=tryToString$5,isArrayIteratorMethod=isArrayIteratorMethod$1,lengthOfArrayLike$1=lengthOfArrayLike$8,isPrototypeOf$1=objectIsPrototypeOf,getIterator=getIterator$1,getIteratorMethod=getIteratorMethod$2,iteratorClose=iteratorClose$1,$TypeError=TypeError,Result=function(e,t){this.stopped=e,this.result=t},ResultPrototype=Result.prototype,iterate$1=function(e,t,r){var n,i,a,o,s,l,c,u=r&&r.that,d=!(!r||!r.AS_ENTRIES),h=!(!r||!r.IS_RECORD),g=!(!r||!r.IS_ITERATOR),p=!(!r||!r.INTERRUPTED),f=bind(t,u),m=function(e){return n&&iteratorClose(n,"normal",e),new Result(!0,e)},y=function(e){return d?(anObject$1(e),p?f(e[0],e[1],m):f(e[0],e[1])):p?f(e,m):f(e)};if(h)n=e.iterator;else if(g)n=e;else{if(!(i=getIteratorMethod(e)))throw $TypeError(tryToString(e)+" is not iterable");if(isArrayIteratorMethod(i)){for(a=0,o=lengthOfArrayLike$1(e);o>a;a++)if((s=y(e[a]))&&isPrototypeOf$1(ResultPrototype,s))return s;return new Result(!1)}n=getIterator(e,i)}for(l=h?e.next:n.next;!(c=call$1(l,n)).done;){try{s=y(c.value)}catch(e){iteratorClose(n,"throw",e)}if("object"==typeof s&&s&&isPrototypeOf$1(ResultPrototype,s))return s}return new Result(!1)},toPropertyKey=toPropertyKey$3,definePropertyModule=objectDefineProperty,createPropertyDescriptor=createPropertyDescriptor$5,createProperty$1=function(e,t,r){var n=toPropertyKey(t);n in e?definePropertyModule.f(e,n,createPropertyDescriptor(0,r)):e[n]=r},call=functionCall,hasOwn$1=hasOwnProperty_1,isPrototypeOf=objectIsPrototypeOf,regExpFlags=regexpFlags,RegExpPrototype=RegExp.prototype,regexpGetFlags=function(e){var t=e.flags;return void 0!==t||"flags"in RegExpPrototype||hasOwn$1(e,"flags")||!isPrototypeOf(RegExpPrototype,e)?t:call(regExpFlags,e)},uncurryThis$2=functionUncurryThis,MapPrototype=Map.prototype,mapHelpers={Map:Map,set:uncurryThis$2(MapPrototype.set),get:uncurryThis$2(MapPrototype.get),has:uncurryThis$2(MapPrototype.has),remove:uncurryThis$2(MapPrototype.delete),proto:MapPrototype},uncurryThis$1=functionUncurryThis,SetPrototype=Set.prototype,setHelpers={Set:Set,add:uncurryThis$1(SetPrototype.add),has:uncurryThis$1(SetPrototype.has),remove:uncurryThis$1(SetPrototype.delete),proto:SetPrototype,$has:SetPrototype.has,$keys:SetPrototype.keys},engineIsDeno="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,IS_DENO$1=engineIsDeno,IS_NODE$1=engineIsNode,engineIsBrowser=!IS_DENO$1&&!IS_NODE$1&&"object"==typeof window&&"object"==typeof document,global$2=global$k,fails$1=fails$i,V8=engineV8Version,IS_BROWSER=engineIsBrowser,IS_DENO=engineIsDeno,IS_NODE=engineIsNode,structuredClone=global$2.structuredClone,structuredCloneProperTransfer=!!structuredClone&&!fails$1((function(){if(IS_DENO&&V8>92||IS_NODE&&V8>94||IS_BROWSER&&V8>97)return!1;var e=new ArrayBuffer(8),t=structuredClone(e,{transfer:[e]});return 0!=e.byteLength||8!=t.byteLength})),$$2=_export,global$1=global$k,getBuiltin=getBuiltIn$7,uncurryThis=functionUncurryThis,fails=fails$i,uid=uid$4,isCallable=isCallable$j,isConstructor=isConstructor$1,isNullOrUndefined=isNullOrUndefined$4,isObject=isObject$9,isSymbol=isSymbol$3,iterate=iterate$1,anObject=anObject$a,classof=classof$7,hasOwn=hasOwnProperty_1,createProperty=createProperty$1,createNonEnumerableProperty=createNonEnumerableProperty$7,lengthOfArrayLike=lengthOfArrayLike$8,validateArgumentsLength=validateArgumentsLength$3,getRegExpFlags=regexpGetFlags,MapHelpers=mapHelpers,SetHelpers=setHelpers,ERROR_STACK_INSTALLABLE=errorStackInstallable,PROPER_TRANSFER=structuredCloneProperTransfer,Object$1=global$1.Object,Array$1=global$1.Array,Date$1=global$1.Date,Error$1=global$1.Error,EvalError=global$1.EvalError,RangeError$1=global$1.RangeError,ReferenceError$1=global$1.ReferenceError,SyntaxError$1=global$1.SyntaxError,TypeError$1=global$1.TypeError,URIError=global$1.URIError,PerformanceMark=global$1.PerformanceMark,WebAssembly=global$1.WebAssembly,CompileError=WebAssembly&&WebAssembly.CompileError||Error$1,LinkError=WebAssembly&&WebAssembly.LinkError||Error$1,RuntimeError=WebAssembly&&WebAssembly.RuntimeError||Error$1,DOMException=getBuiltin("DOMException"),Map$1=MapHelpers.Map,mapHas=MapHelpers.has,mapGet=MapHelpers.get,mapSet=MapHelpers.set,Set$1=SetHelpers.Set,setAdd=SetHelpers.add,objectKeys=getBuiltin("Object","keys"),push=uncurryThis([].push),thisBooleanValue=uncurryThis((!0).valueOf),thisNumberValue=uncurryThis(1..valueOf),thisStringValue=uncurryThis("".valueOf),thisTimeValue=uncurryThis(Date$1.prototype.getTime),PERFORMANCE_MARK=uid("structuredClone"),DATA_CLONE_ERROR="DataCloneError",TRANSFERRING="Transferring",checkBasicSemantic=function(e){return!fails((function(){var t=new global$1.Set([7]),r=e(t),n=e(Object$1(7));return r==t||!r.has(7)||"object"!=typeof n||7!=n}))&&e},checkErrorsCloning=function(e,t){return!fails((function(){var r=new t,n=e({a:r,b:r});return!(n&&n.a===n.b&&n.a instanceof t&&n.a.stack===r.stack)}))},checkNewErrorsCloningSemantic=function(e){return!fails((function(){var t=e(new global$1.AggregateError([1],PERFORMANCE_MARK,{cause:3}));return"AggregateError"!=t.name||1!=t.errors[0]||t.message!=PERFORMANCE_MARK||3!=t.cause}))},nativeStructuredClone=global$1.structuredClone,FORCED_REPLACEMENT=!checkErrorsCloning(nativeStructuredClone,Error$1)||!checkErrorsCloning(nativeStructuredClone,DOMException)||!checkNewErrorsCloningSemantic(nativeStructuredClone),structuredCloneFromMark=!nativeStructuredClone&&checkBasicSemantic((function(e){return new PerformanceMark(PERFORMANCE_MARK,{detail:e}).detail})),nativeRestrictedStructuredClone=checkBasicSemantic(nativeStructuredClone)||structuredCloneFromMark,throwUncloneable=function(e){throw new DOMException("Uncloneable type: "+e,DATA_CLONE_ERROR)},throwUnpolyfillable=function(e,t){throw new DOMException((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",DATA_CLONE_ERROR)},createDataTransfer=function(){var e;try{e=new global$1.DataTransfer}catch(t){try{e=new global$1.ClipboardEvent("").clipboardData}catch(e){}}return e&&e.items&&e.files?e:null},structuredCloneInternal=function(e,t){if(isSymbol(e)&&throwUncloneable("Symbol"),!isObject(e))return e;if(t){if(mapHas(t,e))return mapGet(t,e)}else t=new Map$1;var r,n,i,a,o,s,l,c,u,d,h,g=classof(e),p=!1;switch(g){case"Array":i=Array$1(lengthOfArrayLike(e)),p=!0;break;case"Object":i={},p=!0;break;case"Map":i=new Map$1,p=!0;break;case"Set":i=new Set$1,p=!0;break;case"RegExp":i=new RegExp(e.source,getRegExpFlags(e));break;case"Error":switch(n=e.name){case"AggregateError":i=getBuiltin("AggregateError")([]);break;case"EvalError":i=EvalError();break;case"RangeError":i=RangeError$1();break;case"ReferenceError":i=ReferenceError$1();break;case"SyntaxError":i=SyntaxError$1();break;case"TypeError":i=TypeError$1();break;case"URIError":i=URIError();break;case"CompileError":i=CompileError();break;case"LinkError":i=LinkError();break;case"RuntimeError":i=RuntimeError();break;default:i=Error$1()}p=!0;break;case"DOMException":i=new DOMException(e.message,e.name),p=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":r=global$1[g],isObject(r)||throwUnpolyfillable(g),i=new r(structuredCloneInternal(e.buffer,t),e.byteOffset,"DataView"===g?e.byteLength:e.length);break;case"DOMQuad":try{i=new DOMQuad(structuredCloneInternal(e.p1,t),structuredCloneInternal(e.p2,t),structuredCloneInternal(e.p3,t),structuredCloneInternal(e.p4,t))}catch(t){nativeRestrictedStructuredClone?i=nativeRestrictedStructuredClone(e):throwUnpolyfillable(g)}break;case"FileList":if(a=createDataTransfer()){for(o=0,s=lengthOfArrayLike(e);o<s;o++)a.items.add(structuredCloneInternal(e[o],t));i=a.files}else nativeRestrictedStructuredClone?i=nativeRestrictedStructuredClone(e):throwUnpolyfillable(g);break;case"ImageData":try{i=new ImageData(structuredCloneInternal(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(t){nativeRestrictedStructuredClone?i=nativeRestrictedStructuredClone(e):throwUnpolyfillable(g)}break;default:if(nativeRestrictedStructuredClone)i=nativeRestrictedStructuredClone(e);else switch(g){case"BigInt":i=Object$1(e.valueOf());break;case"Boolean":i=Object$1(thisBooleanValue(e));break;case"Number":i=Object$1(thisNumberValue(e));break;case"String":i=Object$1(thisStringValue(e));break;case"Date":i=new Date$1(thisTimeValue(e));break;case"ArrayBuffer":(r=global$1.DataView)||"function"==typeof e.slice||throwUnpolyfillable(g);try{if("function"!=typeof e.slice||e.resizable){s=e.byteLength,h="maxByteLength"in e?{maxByteLength:e.maxByteLength}:void 0,i=new ArrayBuffer(s,h),u=new r(e),d=new r(i);for(o=0;o<s;o++)d.setUint8(o,u.getUint8(o))}else i=e.slice(0)}catch(e){throw new DOMException("ArrayBuffer is detached",DATA_CLONE_ERROR)}break;case"SharedArrayBuffer":i=e;break;case"Blob":try{i=e.slice(0,e.size,e.type)}catch(e){throwUnpolyfillable(g)}break;case"DOMPoint":case"DOMPointReadOnly":r=global$1[g];try{i=r.fromPoint?r.fromPoint(e):new r(e.x,e.y,e.z,e.w)}catch(e){throwUnpolyfillable(g)}break;case"DOMRect":case"DOMRectReadOnly":r=global$1[g];try{i=r.fromRect?r.fromRect(e):new r(e.x,e.y,e.width,e.height)}catch(e){throwUnpolyfillable(g)}break;case"DOMMatrix":case"DOMMatrixReadOnly":r=global$1[g];try{i=r.fromMatrix?r.fromMatrix(e):new r(e)}catch(e){throwUnpolyfillable(g)}break;case"AudioData":case"VideoFrame":isCallable(e.clone)||throwUnpolyfillable(g);try{i=e.clone()}catch(e){throwUncloneable(g)}break;case"File":try{i=new File([e],e.name,e)}catch(e){throwUnpolyfillable(g)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":throwUnpolyfillable(g);default:throwUncloneable(g)}}if(mapSet(t,e,i),p)switch(g){case"Array":case"Object":for(l=objectKeys(e),o=0,s=lengthOfArrayLike(l);o<s;o++)c=l[o],createProperty(i,c,structuredCloneInternal(e[c],t));break;case"Map":e.forEach((function(e,r){mapSet(i,structuredCloneInternal(r,t),structuredCloneInternal(e,t))}));break;case"Set":e.forEach((function(e){setAdd(i,structuredCloneInternal(e,t))}));break;case"Error":createNonEnumerableProperty(i,"message",structuredCloneInternal(e.message,t)),hasOwn(e,"cause")&&createNonEnumerableProperty(i,"cause",structuredCloneInternal(e.cause,t)),"AggregateError"==n&&(i.errors=structuredCloneInternal(e.errors,t));case"DOMException":ERROR_STACK_INSTALLABLE&&createNonEnumerableProperty(i,"stack",structuredCloneInternal(e.stack,t))}return i},tryToTransfer=function(e,t){if(!isObject(e))throw TypeError$1("Transfer option cannot be converted to a sequence");var r=[];iterate(e,(function(e){push(r,anObject(e))}));var n,i,a,o,s,l,c=0,u=lengthOfArrayLike(r);if(PROPER_TRANSFER)for(o=nativeStructuredClone(r,{transfer:r});c<u;)mapSet(t,r[c],o[c++]);else for(;c<u;){if(n=r[c++],mapHas(t,n))throw new DOMException("Duplicate transferable",DATA_CLONE_ERROR);switch(i=classof(n)){case"ImageBitmap":a=global$1.OffscreenCanvas,isConstructor(a)||throwUnpolyfillable(i,TRANSFERRING);try{(l=new a(n.width,n.height)).getContext("bitmaprenderer").transferFromImageBitmap(n),s=l.transferToImageBitmap()}catch(e){}break;case"AudioData":case"VideoFrame":isCallable(n.clone)&&isCallable(n.close)||throwUnpolyfillable(i,TRANSFERRING);try{s=n.clone(),n.close()}catch(e){}break;case"ArrayBuffer":isCallable(n.transfer)||throwUnpolyfillable(i,TRANSFERRING),s=n.transfer();break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":throwUnpolyfillable(i,TRANSFERRING)}if(void 0===s)throw new DOMException("This object cannot be transferred: "+i,DATA_CLONE_ERROR);mapSet(t,n,s)}};$$2({global:!0,enumerable:!0,sham:!PROPER_TRANSFER,forced:FORCED_REPLACEMENT},{structuredClone:function(e){var t,r=validateArgumentsLength(arguments.length,1)>1&&!isNullOrUndefined(arguments[1])?anObject(arguments[1]):void 0,n=r?r.transfer:void 0;return void 0!==n&&(t=new Map$1,tryToTransfer(n,t)),structuredCloneInternal(e,t)}});const MILLISECONDS_MULTIPLIER=1e3,TRANSITION_END="transitionend",toType=e=>null==e?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),getSelector=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let r=e.getAttribute("href");if(!r||!r.includes("#")&&!r.startsWith("."))return null;r.includes("#")&&!r.startsWith("#")&&(r=`#${r.split("#")[1]}`),t=r&&"#"!==r?r.trim():null}return t},getSelectorFromElement=e=>{const t=getSelector(e);return t&&document.querySelector(t)?t:null},getElementFromSelector=e=>{const t=getSelector(e);return t?document.querySelector(t):null},getTransitionDurationFromElement=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:r}=window.getComputedStyle(e);const n=Number.parseFloat(t),i=Number.parseFloat(r);return n||i?(t=t.split(",")[0],r=r.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(r))):0},triggerTransitionEnd=e=>{e.dispatchEvent(new Event(TRANSITION_END))},isElement=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),getElement=e=>isElement(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(e):null,isVisible$1=e=>{if(!isElement(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),r=e.closest("details:not([open])");if(!r)return t;if(r!==e){const t=e.closest("summary");if(t&&t.parentNode!==r)return!1;if(null===t)return!1}return t},isDisabled=e=>!e||e.nodeType!==Node.ELEMENT_NODE||(!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled"))),reflow=e=>{e.offsetHeight},getjQuery=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,DOMContentLoadedCallbacks=[],onDOMContentLoaded=e=>{"loading"===document.readyState?(DOMContentLoadedCallbacks.length||document.addEventListener("DOMContentLoaded",(()=>{for(const e of DOMContentLoadedCallbacks)e()})),DOMContentLoadedCallbacks.push(e)):e()},defineJQueryPlugin=e=>{var t;t=()=>{const t=getjQuery();if(t){const r=e.NAME,n=t.fn[r];t.fn[r]=e.jQueryInterface,t.fn[r].Constructor=e,t.fn[r].noConflict=()=>(t.fn[r]=n,e.jQueryInterface)}},"loading"===document.readyState?(DOMContentLoadedCallbacks.length||document.addEventListener("DOMContentLoaded",(()=>{for(const e of DOMContentLoadedCallbacks)e()})),DOMContentLoadedCallbacks.push(t)):t()},execute=e=>{"function"==typeof e&&e()},executeAfterTransition=(e,t,r=!0)=>{if(!r)return void execute(e);const n=getTransitionDurationFromElement(t)+5;let i=!1;const a=({target:r})=>{r===t&&(i=!0,t.removeEventListener(TRANSITION_END,a),execute(e))};t.addEventListener(TRANSITION_END,a),setTimeout((()=>{i||t.dispatchEvent(new Event(TRANSITION_END))}),n)},namespaceRegex=/[^.]*(?=\..*)\.|.*/,stripNameRegex=/\..*/,stripUidRegex=/::\d+$/,eventRegistry={};let uidEvent=1;const customEvents={mouseenter:"mouseover",mouseleave:"mouseout"},nativeEvents=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function makeEventUid(e,t){return t&&`${t}::${uidEvent++}`||e.uidEvent||uidEvent++}function getElementEvents(e){const t=makeEventUid(e);return e.uidEvent=t,eventRegistry[t]=eventRegistry[t]||{},eventRegistry[t]}function bootstrapHandler(e,t){return function r(n){return hydrateObj(n,{delegateTarget:e}),r.oneOff&&EventHandler.off(e,n.type,t),t.apply(e,[n])}}function bootstrapDelegationHandler(e,t,r){return function n(i){const a=e.querySelectorAll(t);for(let{target:o}=i;o&&o!==this;o=o.parentNode)for(const s of a)if(s===o)return hydrateObj(i,{delegateTarget:o}),n.oneOff&&EventHandler.off(e,i.type,t,r),r.apply(o,[i])}}function findHandler(e,t,r=null){return Object.values(e).find((e=>e.callable===t&&e.delegationSelector===r))}function normalizeParameters(e,t,r){const n="string"==typeof t,i=n?r:t||r;let a=getTypeEvent(e);return nativeEvents.has(a)||(a=e),[n,i,a]}function addHandler(e,t,r,n,i){if("string"!=typeof t||!e)return;let[a,o,s]=normalizeParameters(t,r,n);if(t in customEvents){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};o=e(o)}const l=getElementEvents(e),c=l[s]||(l[s]={}),u=findHandler(c,o,a?r:null);if(u)return void(u.oneOff=u.oneOff&&i);const d=makeEventUid(o,t.replace(namespaceRegex,"")),h=a?bootstrapDelegationHandler(e,r,o):bootstrapHandler(e,o);h.delegationSelector=a?r:null,h.callable=o,h.oneOff=i,h.uidEvent=d,c[d]=h,e.addEventListener(s,h,a)}function removeHandler(e,t,r,n,i){const a=findHandler(t[r],n,i);a&&(e.removeEventListener(r,a,Boolean(i)),delete t[r][a.uidEvent])}function removeNamespacedHandlers(e,t,r,n){const i=t[r]||{};for(const a of Object.keys(i))if(a.includes(n)){const n=i[a];removeHandler(e,t,r,n.callable,n.delegationSelector)}}function getTypeEvent(e){return e=e.replace(stripNameRegex,""),customEvents[e]||e}const EventHandler={on(e,t,r,n){addHandler(e,t,r,n,!1)},one(e,t,r,n){addHandler(e,t,r,n,!0)},off(e,t,r,n){if("string"!=typeof t||!e)return;const[i,a,o]=normalizeParameters(t,r,n),s=o!==t,l=getElementEvents(e),c=l[o]||{},u=t.startsWith(".");if(void 0===a){if(u)for(const r of Object.keys(l))removeNamespacedHandlers(e,l,r,t.slice(1));for(const r of Object.keys(c)){const n=r.replace(stripUidRegex,"");if(!s||t.includes(n)){const t=c[r];removeHandler(e,l,o,t.callable,t.delegationSelector)}}}else{if(!Object.keys(c).length)return;removeHandler(e,l,o,a,i?r:null)}},trigger(e,t,r){if("string"!=typeof t||!e)return null;const n=getjQuery();let i=null,a=!0,o=!0,s=!1;t!==getTypeEvent(t)&&n&&(i=n.Event(t,r),n(e).trigger(i),a=!i.isPropagationStopped(),o=!i.isImmediatePropagationStopped(),s=i.isDefaultPrevented());let l=new Event(t,{bubbles:a,cancelable:!0});return l=hydrateObj(l,r),s&&l.preventDefault(),o&&e.dispatchEvent(l),l.defaultPrevented&&i&&i.preventDefault(),l}};function hydrateObj(e,t){for(const[r,n]of Object.entries(t||{}))try{e[r]=n}catch{Object.defineProperty(e,r,{configurable:!0,get:()=>n})}return e}const elementMap=new Map;var Data={set(e,t,r){elementMap.has(e)||elementMap.set(e,new Map);const n=elementMap.get(e);n.has(t)||0===n.size?n.set(t,r):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`)},get:(e,t)=>elementMap.has(e)&&elementMap.get(e).get(t)||null,remove(e,t){if(!elementMap.has(e))return;const r=elementMap.get(e);r.delete(t),0===r.size&&elementMap.delete(e)}};function normalizeData(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch{return e}}function normalizeDataKey(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}const Manipulator={setDataAttribute(e,t,r){e.setAttribute(`data-bs-${normalizeDataKey(t)}`,r)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${normalizeDataKey(t)}`)},getDataAttributes(e){if(!e)return{};const t={},r=Object.keys(e.dataset).filter((e=>e.startsWith("bs")&&!e.startsWith("bsConfig")));for(const n of r){let r=n.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),t[r]=normalizeData(e.dataset[n])}return t},getDataAttribute:(e,t)=>normalizeData(e.getAttribute(`data-bs-${normalizeDataKey(t)}`))};class Config{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const r=isElement(t)?Manipulator.getDataAttribute(t,"config"):{};return{...this.constructor.Default,..."object"==typeof r?r:{},...isElement(t)?Manipulator.getDataAttributes(t):{},..."object"==typeof e?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const r of Object.keys(t)){const n=t[r],i=e[r],a=isElement(i)?"element":toType(i);if(!new RegExp(n).test(a))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${a}" but expected type "${n}".`)}}}const VERSION="5.2.3";class BaseComponent extends Config{constructor(e,t){super(),(e=getElement(e))&&(this._element=e,this._config=this._getConfig(t),Data.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Data.remove(this._element,this.constructor.DATA_KEY),EventHandler.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,r=!0){executeAfterTransition(e,t,r)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Data.get(getElement(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.2.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const NAME$2="button",DATA_KEY$1="bs.button",EVENT_KEY$1=".bs.button",DATA_API_KEY$1=".data-api",CLASS_NAME_ACTIVE="active",SELECTOR_DATA_TOGGLE$1='[data-bs-toggle="button"]',EVENT_CLICK_DATA_API$1="click.bs.button.data-api";class Button extends BaseComponent{static get NAME(){return NAME$2}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each((function(){const t=Button.getOrCreateInstance(this);"toggle"===e&&t[e]()}))}}EventHandler.on(document,EVENT_CLICK_DATA_API$1,SELECTOR_DATA_TOGGLE$1,(e=>{e.preventDefault();const t=e.target.closest(SELECTOR_DATA_TOGGLE$1);Button.getOrCreateInstance(t).toggle()})),defineJQueryPlugin(Button);const SelectorEngine={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter((e=>e.matches(t))),parents(e,t){const r=[];let n=e.parentNode.closest(t);for(;n;)r.push(n),n=n.parentNode.closest(t);return r},prev(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return[r];r=r.previousElementSibling}return[]},next(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return[r];r=r.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((e=>`${e}:not([tabindex^="-"])`)).join(",");return this.find(t,e).filter((e=>!isDisabled(e)&&isVisible$1(e)))}},NAME$1="collapse",DATA_KEY="bs.collapse",EVENT_KEY=".bs.collapse",DATA_API_KEY=".data-api",EVENT_SHOW="show.bs.collapse",EVENT_SHOWN="shown.bs.collapse",EVENT_HIDE="hide.bs.collapse",EVENT_HIDDEN="hidden.bs.collapse",EVENT_CLICK_DATA_API="click.bs.collapse.data-api",CLASS_NAME_SHOW="show",CLASS_NAME_COLLAPSE="collapse",CLASS_NAME_COLLAPSING="collapsing",CLASS_NAME_COLLAPSED="collapsed",CLASS_NAME_DEEPER_CHILDREN=":scope .collapse .collapse",CLASS_NAME_HORIZONTAL="collapse-horizontal",WIDTH="width",HEIGHT="height",SELECTOR_ACTIVES=".collapse.show, .collapse.collapsing",SELECTOR_DATA_TOGGLE='[data-bs-toggle="collapse"]',Default={parent:null,toggle:!0},DefaultType={parent:"(null|element)",toggle:"boolean"};class Collapse extends BaseComponent{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const r=SelectorEngine.find(SELECTOR_DATA_TOGGLE);for(const e of r){const t=getSelectorFromElement(e),r=SelectorEngine.find(t).filter((e=>e===this._element));null!==t&&r.length&&this._triggerArray.push(e)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Default}static get DefaultType(){return DefaultType}static get NAME(){return NAME$1}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(SELECTOR_ACTIVES).filter((e=>e!==this._element)).map((e=>Collapse.getOrCreateInstance(e,{toggle:!1})))),e.length&&e[0]._isTransitioning)return;if(EventHandler.trigger(this._element,EVENT_SHOW).defaultPrevented)return;for(const t of e)t.hide();const t=this._getDimension();this._element.classList.remove("collapse"),this._element.classList.add("collapsing"),this._element.style[t]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=`scroll${t[0].toUpperCase()+t.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove("collapsing"),this._element.classList.add("collapse","show"),this._element.style[t]="",EventHandler.trigger(this._element,EVENT_SHOWN)}),this._element,!0),this._element.style[t]=`${this._element[r]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(EventHandler.trigger(this._element,EVENT_HIDE).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,this._element.offsetHeight,this._element.classList.add("collapsing"),this._element.classList.remove("collapse","show");for(const e of this._triggerArray){const t=getElementFromSelector(e);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0;this._element.style[e]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove("collapsing"),this._element.classList.add("collapse"),EventHandler.trigger(this._element,EVENT_HIDDEN)}),this._element,!0)}_isShown(e=this._element){return e.classList.contains("show")}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=getElement(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?WIDTH:HEIGHT}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(SELECTOR_DATA_TOGGLE);for(const t of e){const e=getElementFromSelector(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}}_getFirstLevelChildren(e){const t=SelectorEngine.find(CLASS_NAME_DEEPER_CHILDREN,this._config.parent);return SelectorEngine.find(e,this._config.parent).filter((e=>!t.includes(e)))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const r of e)r.classList.toggle("collapsed",!t),r.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each((function(){const r=Collapse.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===r[e])throw new TypeError(`No method named "${e}"`);r[e]()}}))}}EventHandler.on(document,EVENT_CLICK_DATA_API,SELECTOR_DATA_TOGGLE,(function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();const t=getSelectorFromElement(this),r=SelectorEngine.find(t);for(const e of r)Collapse.getOrCreateInstance(e,{toggle:!1}).toggle()})),defineJQueryPlugin(Collapse);
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const t$4=window,e$7=t$4.ShadowRoot&&(void 0===t$4.ShadyCSS||t$4.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s$6=Symbol(),n$8=new WeakMap;let o$7=class{constructor(e,t,r){if(this._$cssResult$=!0,r!==s$6)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(e$7&&void 0===e){const r=void 0!==t&&1===t.length;r&&(e=n$8.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&n$8.set(t,e))}return e}toString(){return this.cssText}};const r$8=e=>new o$7("string"==typeof e?e:e+"",void 0,s$6),S$4=(e,t)=>{e$7?e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):t.forEach((t=>{const r=document.createElement("style"),n=t$4.litNonce;void 0!==n&&r.setAttribute("nonce",n),r.textContent=t.cssText,e.appendChild(r)}))},c$2=e$7?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const r of e.cssRules)t+=r.cssText;return r$8(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var s$5;const e$6=window,r$7=e$6.trustedTypes,h$5=r$7?r$7.emptyScript:"",o$6=e$6.reactiveElementPolyfillSupport,n$7={toAttribute(e,t){switch(t){case Boolean:e=e?h$5:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=null!==e;break;case Number:r=null===e?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch(e){r=null}}return r}},a$4=(e,t)=>t!==e&&(t==t||e==e),l$6={attribute:!0,type:String,converter:n$7,reflect:!1,hasChanged:a$4};let d$4=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,r)=>{const n=this._$Ep(r,t);void 0!==n&&(this._$Ev.set(n,r),e.push(n))})),e}static createProperty(e,t=l$6){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const r="symbol"==typeof e?Symbol():"__"+e,n=this.getPropertyDescriptor(e,r,t);void 0!==n&&Object.defineProperty(this.prototype,e,n)}}static getPropertyDescriptor(e,t,r){return{get(){return this[t]},set(n){const i=this[e];this[t]=n,this.requestUpdate(e,i,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||l$6}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const r of t)this.createProperty(r,e[r])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const e of r)t.unshift(c$2(e))}else void 0!==e&&t.push(c$2(e));return t}static _$Ep(e,t){const r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,r;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(r=e.hostConnected)||void 0===r||r.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return S$4(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$EO(e,t,r=l$6){var n;const i=this.constructor._$Ep(e,r);if(void 0!==i&&!0===r.reflect){const a=(void 0!==(null===(n=r.converter)||void 0===n?void 0:n.toAttribute)?r.converter:n$7).toAttribute(t,r.type);this._$El=e,null==a?this.removeAttribute(i):this.setAttribute(i,a),this._$El=null}}_$AK(e,t){var r;const n=this.constructor,i=n._$Ev.get(e);if(void 0!==i&&this._$El!==i){const e=n.getPropertyOptions(i),a="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(r=e.converter)||void 0===r?void 0:r.fromAttribute)?e.converter:n$7;this._$El=i,this[i]=a.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,r){let n=!0;void 0!==e&&(((r=r||this.constructor.getPropertyOptions(e)).hasChanged||a$4)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===r.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,r))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const r=this._$AL;try{t=this.shouldUpdate(r),t?(this.willUpdate(r),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(r)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(r)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var t$3;d$4.finalized=!0,d$4.elementProperties=new Map,d$4.elementStyles=[],d$4.shadowRootOptions={mode:"open"},null==o$6||o$6({ReactiveElement:d$4}),(null!==(s$5=e$6.reactiveElementVersions)&&void 0!==s$5?s$5:e$6.reactiveElementVersions=[]).push("1.6.1");const i$4=window,s$4=i$4.trustedTypes,e$5=s$4?s$4.createPolicy("lit-html",{createHTML:e=>e}):void 0,o$5="$lit$",n$6=`lit$${(Math.random()+"").slice(9)}$`,l$5="?"+n$6,h$4=`<${l$5}>`,r$6=document,d$3=()=>r$6.createComment(""),u$1=e=>null===e||"object"!=typeof e&&"function"!=typeof e,c$1=Array.isArray,v$1=e=>c$1(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]),a$3="[ \t\n\f\r]",f$1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,_$3=/-->/g,m$1=/>/g,p$1=RegExp(`>|${a$3}(?:([^\\s"'>=/]+)(${a$3}*=${a$3}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),g$2=/'/g,$$1=/"/g,y$1=/^(?:script|style|textarea|title)$/i,w$2=e=>(t,...r)=>({_$litType$:e,strings:t,values:r}),x$2=w$2(1),b$2=w$2(2),T$1=Symbol.for("lit-noChange"),A$2=Symbol.for("lit-nothing"),E$1=new WeakMap,C$1=r$6.createTreeWalker(r$6,129,null,!1),P$1=(e,t)=>{const r=e.length-1,n=[];let i,a=2===t?"<svg>":"",o=f$1;for(let t=0;t<r;t++){const r=e[t];let s,l,c=-1,u=0;for(;u<r.length&&(o.lastIndex=u,l=o.exec(r),null!==l);)u=o.lastIndex,o===f$1?"!--"===l[1]?o=_$3:void 0!==l[1]?o=m$1:void 0!==l[2]?(y$1.test(l[2])&&(i=RegExp("</"+l[2],"g")),o=p$1):void 0!==l[3]&&(o=p$1):o===p$1?">"===l[0]?(o=null!=i?i:f$1,c=-1):void 0===l[1]?c=-2:(c=o.lastIndex-l[2].length,s=l[1],o=void 0===l[3]?p$1:'"'===l[3]?$$1:g$2):o===$$1||o===g$2?o=p$1:o===_$3||o===m$1?o=f$1:(o=p$1,i=void 0);const d=o===p$1&&e[t+1].startsWith("/>")?" ":"";a+=o===f$1?r+h$4:c>=0?(n.push(s),r.slice(0,c)+o$5+r.slice(c)+n$6+d):r+n$6+(-2===c?(n.push(void 0),t):d)}const s=a+(e[r]||"<?>")+(2===t?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==e$5?e$5.createHTML(s):s,n]};let V$1=class e{constructor({strings:t,_$litType$:r},n){let i;this.parts=[];let a=0,o=0;const s=t.length-1,l=this.parts,[c,u]=P$1(t,r);if(this.el=e.createElement(c,n),C$1.currentNode=this.el.content,2===r){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(i=C$1.nextNode())&&l.length<s;){if(1===i.nodeType){if(i.hasAttributes()){const e=[];for(const t of i.getAttributeNames())if(t.endsWith(o$5)||t.startsWith(n$6)){const r=u[o++];if(e.push(t),void 0!==r){const e=i.getAttribute(r.toLowerCase()+o$5).split(n$6),t=/([.?@])?(.*)/.exec(r);l.push({type:1,index:a,name:t[2],strings:e,ctor:"."===t[1]?k$1:"?"===t[1]?I$1:"@"===t[1]?L$1:R$1})}else l.push({type:6,index:a})}for(const t of e)i.removeAttribute(t)}if(y$1.test(i.tagName)){const e=i.textContent.split(n$6),t=e.length-1;if(t>0){i.textContent=s$4?s$4.emptyScript:"";for(let r=0;r<t;r++)i.append(e[r],d$3()),C$1.nextNode(),l.push({type:2,index:++a});i.append(e[t],d$3())}}}else if(8===i.nodeType)if(i.data===l$5)l.push({type:2,index:a});else{let e=-1;for(;-1!==(e=i.data.indexOf(n$6,e+1));)l.push({type:7,index:a}),e+=n$6.length-1}a++}}static createElement(e,t){const r=r$6.createElement("template");return r.innerHTML=e,r}};function N$1(e,t,r=e,n){var i,a,o,s;if(t===T$1)return t;let l=void 0!==n?null===(i=r._$Co)||void 0===i?void 0:i[n]:r._$Cl;const c=u$1(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(a=null==l?void 0:l._$AO)||void 0===a||a.call(l,!1),void 0===c?l=void 0:(l=new c(e),l._$AT(e,r,n)),void 0!==n?(null!==(o=(s=r)._$Co)&&void 0!==o?o:s._$Co=[])[n]=l:r._$Cl=l),void 0!==l&&(t=N$1(e,l._$AS(e,t.values),l,n)),t}let S$3=class{constructor(e,t){this.u=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(e){var t;const{el:{content:r},parts:n}=this._$AD,i=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:r$6).importNode(r,!0);C$1.currentNode=i;let a=C$1.nextNode(),o=0,s=0,l=n[0];for(;void 0!==l;){if(o===l.index){let t;2===l.type?t=new M$1(a,a.nextSibling,this,e):1===l.type?t=new l.ctor(a,l.name,l.strings,this,e):6===l.type&&(t=new z$1(a,this,e)),this.u.push(t),l=n[++s]}o!==(null==l?void 0:l.index)&&(a=C$1.nextNode(),o++)}return i}p(e){let t=0;for(const r of this.u)void 0!==r&&(void 0!==r.strings?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}},M$1=class e{constructor(e,t,r,n){var i;this.type=2,this._$AH=A$2,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=n,this._$Cm=null===(i=null==n?void 0:n.isConnected)||void 0===i||i}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cm}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=N$1(this,e,t),u$1(e)?e===A$2||null==e||""===e?(this._$AH!==A$2&&this._$AR(),this._$AH=A$2):e!==this._$AH&&e!==T$1&&this.g(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):v$1(e)?this.k(e):this.g(e)}S(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.S(e))}g(e){this._$AH!==A$2&&u$1(this._$AH)?this._$AA.nextSibling.data=e:this.T(r$6.createTextNode(e)),this._$AH=e}$(e){var t;const{values:r,_$litType$:n}=e,i="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=V$1.createElement(n.h,this.options)),n);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===i)this._$AH.p(r);else{const e=new S$3(i,this),t=e.v(this.options);e.p(r),this.T(t),this._$AH=e}}_$AC(e){let t=E$1.get(e.strings);return void 0===t&&E$1.set(e.strings,t=new V$1(e)),t}k(t){c$1(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const a of t)i===r.length?r.push(n=new e(this.S(d$3()),this.S(d$3()),this,this.options)):n=r[i],n._$AI(a),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,t){var r;for(null===(r=this._$AP)||void 0===r||r.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cm=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}},R$1=class{constructor(e,t,r,n,i){this.type=1,this._$AH=A$2,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=i,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=A$2}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,r,n){const i=this.strings;let a=!1;if(void 0===i)e=N$1(this,e,t,0),a=!u$1(e)||e!==this._$AH&&e!==T$1,a&&(this._$AH=e);else{const n=e;let o,s;for(e=i[0],o=0;o<i.length-1;o++)s=N$1(this,n[r+o],t,o),s===T$1&&(s=this._$AH[o]),a||(a=!u$1(s)||s!==this._$AH[o]),s===A$2?e=A$2:e!==A$2&&(e+=(null!=s?s:"")+i[o+1]),this._$AH[o]=s}a&&!n&&this.j(e)}j(e){e===A$2?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}},k$1=class extends R$1{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===A$2?void 0:e}};const H$1=s$4?s$4.emptyScript:"";let I$1=class extends R$1{constructor(){super(...arguments),this.type=4}j(e){e&&e!==A$2?this.element.setAttribute(this.name,H$1):this.element.removeAttribute(this.name)}},L$1=class extends R$1{constructor(e,t,r,n,i){super(e,t,r,n,i),this.type=5}_$AI(e,t=this){var r;if((e=null!==(r=N$1(this,e,t,0))&&void 0!==r?r:A$2)===T$1)return;const n=this._$AH,i=e===A$2&&n!==A$2||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,a=e!==A$2&&(n===A$2||i);i&&this.element.removeEventListener(this.name,this,n),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,r;"function"==typeof this._$AH?this._$AH.call(null!==(r=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==r?r:this.element,e):this._$AH.handleEvent(e)}},z$1=class{constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){N$1(this,e)}};const j$1=i$4.litHtmlPolyfillSupport;null==j$1||j$1(V$1,M$1),(null!==(t$3=i$4.litHtmlVersions)&&void 0!==t$3?t$3:i$4.litHtmlVersions=[]).push("2.7.0");const B=(e,t,r)=>{var n,i;const a=null!==(n=null==r?void 0:r.renderBefore)&&void 0!==n?n:t;let o=a._$litPart$;if(void 0===o){const e=null!==(i=null==r?void 0:r.renderBefore)&&void 0!==i?i:null;a._$litPart$=o=new M$1(t.insertBefore(d$3(),e),e,void 0,null!=r?r:{})}return o._$AI(e),o},t$2=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,e$4=Symbol(),n$5=new Map;
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let s$3=class{constructor(e,t){if(this._$cssResult$=!0,t!==e$4)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){let e=n$5.get(this.cssText);return t$2&&void 0===e&&(n$5.set(this.cssText,e=new CSSStyleSheet),e.replaceSync(this.cssText)),e}toString(){return this.cssText}};const o$4=e=>new s$3("string"==typeof e?e:e+"",e$4),r$5=(e,...t)=>{const r=1===e.length?e[0]:t.reduce(((t,r,n)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+e[n+1]),e[0]);return new s$3(r,e$4)},i$3=(e,t)=>{t$2?e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):t.forEach((t=>{const r=document.createElement("style"),n=window.litNonce;void 0!==n&&r.setAttribute("nonce",n),r.textContent=t.cssText,e.appendChild(r)}))},S$2=t$2?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const r of e.cssRules)t+=r.cssText;return o$4(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var s$2;const e$3=window.trustedTypes,r$4=e$3?e$3.emptyScript:"",h$3=window.reactiveElementPolyfillSupport,o$3={toAttribute(e,t){switch(t){case Boolean:e=e?r$4:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=null!==e;break;case Number:r=null===e?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch(e){r=null}}return r}},n$4=(e,t)=>t!==e&&(t==t||e==e),l$4={attribute:!0,type:String,converter:o$3,reflect:!1,hasChanged:n$4};let a$2=class extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(e){var t;null!==(t=this.l)&&void 0!==t||(this.l=[]),this.l.push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,r)=>{const n=this._$Eh(r,t);void 0!==n&&(this._$Eu.set(n,r),e.push(n))})),e}static createProperty(e,t=l$4){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const r="symbol"==typeof e?Symbol():"__"+e,n=this.getPropertyDescriptor(e,r,t);void 0!==n&&Object.defineProperty(this.prototype,e,n)}}static getPropertyDescriptor(e,t,r){return{get(){return this[t]},set(n){const i=this[e];this[t]=n,this.requestUpdate(e,i,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||l$4}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const r of t)this.createProperty(r,e[r])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const e of r)t.unshift(S$2(e))}else void 0!==e&&t.push(S$2(e));return t}static _$Eh(e,t){const r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}o(){var e;this._$Ep=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(e=this.constructor.l)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,r;(null!==(t=this._$Eg)&&void 0!==t?t:this._$Eg=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(r=e.hostConnected)||void 0===r||r.call(e))}removeController(e){var t;null===(t=this._$Eg)||void 0===t||t.splice(this._$Eg.indexOf(e)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Et.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return i$3(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$Eg)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$Eg)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$ES(e,t,r=l$4){var n,i;const a=this.constructor._$Eh(e,r);if(void 0!==a&&!0===r.reflect){const o=(null!==(i=null===(n=r.converter)||void 0===n?void 0:n.toAttribute)&&void 0!==i?i:o$3.toAttribute)(t,r.type);this._$Ei=e,null==o?this.removeAttribute(a):this.setAttribute(a,o),this._$Ei=null}}_$AK(e,t){var r,n,i;const a=this.constructor,o=a._$Eu.get(e);if(void 0!==o&&this._$Ei!==o){const e=a.getPropertyOptions(o),s=e.converter,l=null!==(i=null!==(n=null===(r=s)||void 0===r?void 0:r.fromAttribute)&&void 0!==n?n:"function"==typeof s?s:null)&&void 0!==i?i:o$3.fromAttribute;this._$Ei=o,this[o]=l(t,e.type),this._$Ei=null}}requestUpdate(e,t,r){let n=!0;void 0!==e&&(((r=r||this.constructor.getPropertyOptions(e)).hasChanged||n$4)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===r.reflect&&this._$Ei!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,r))):n=!1),!this.isUpdatePending&&n&&(this._$Ep=this._$E_())}async _$E_(){this.isUpdatePending=!0;try{await this._$Ep}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((e,t)=>this[t]=e)),this._$Et=void 0);let t=!1;const r=this._$AL;try{t=this.shouldUpdate(r),t?(this.willUpdate(r),null===(e=this._$Eg)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(r)):this._$EU()}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(r)}willUpdate(e){}_$AE(e){var t;null===(t=this._$Eg)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$ES(t,this[t],e))),this._$EC=void 0),this._$EU()}updated(e){}firstUpdated(e){}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var l$3,o$2;a$2.finalized=!0,a$2.elementProperties=new Map,a$2.elementStyles=[],a$2.shadowRootOptions={mode:"open"},null==h$3||h$3({ReactiveElement:a$2}),(null!==(s$2=globalThis.reactiveElementVersions)&&void 0!==s$2?s$2:globalThis.reactiveElementVersions=[]).push("1.3.1");let s$1=class extends a$2{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const r=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=r.firstChild),r}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=B(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return T$1}};s$1.finalized=!0,s$1._$litElement$=!0,null===(l$3=globalThis.litElementHydrateSupport)||void 0===l$3||l$3.call(globalThis,{LitElement:s$1});const n$3=globalThis.litElementPolyfillSupport;function ascending$2(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function bisector(e){let t=e,r=e,n=e;function i(e,t,i=0,a=e.length){if(i<a){if(0!==r(t,t))return a;do{const r=i+a>>>1;n(e[r],t)<0?i=r+1:a=r}while(i<a)}return i}return 2!==e.length&&(t=(t,r)=>e(t)-r,r=ascending$2,n=(t,r)=>ascending$2(e(t),r)),{left:i,center:function(e,r,n=0,a=e.length){const o=i(e,r,n,a-1);return o>n&&t(e[o-1],r)>-t(e[o],r)?o-1:o},right:function(e,t,i=0,a=e.length){if(i<a){if(0!==r(t,t))return a;do{const r=i+a>>>1;n(e[r],t)<=0?i=r+1:a=r}while(i<a)}return i}}}function number$3(e){return null===e?NaN:+e}null==n$3||n$3({LitElement:s$1}),(null!==(o$2=globalThis.litElementVersions)&&void 0!==o$2?o$2:globalThis.litElementVersions=[]).push("3.3.0");const ascendingBisect=bisector(ascending$2),bisectRight=ascendingBisect.right;bisector(number$3).center;var bisect=bisectRight,e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function ticks$1(e,t,r){var n,i,a,o,s=-1;if(r=+r,(e=+e)===(t=+t)&&r>0)return[e];if((n=t<e)&&(i=e,e=t,t=i),0===(o=tickIncrement$1(e,t,r))||!isFinite(o))return[];if(o>0){let r=Math.round(e/o),n=Math.round(t/o);for(r*o<e&&++r,n*o>t&&--n,a=new Array(i=n-r+1);++s<i;)a[s]=(r+s)*o}else{o=-o;let r=Math.round(e*o),n=Math.round(t*o);for(r/o<e&&++r,n/o>t&&--n,a=new Array(i=n-r+1);++s<i;)a[s]=(r+s)/o}return n&&a.reverse(),a}function tickIncrement$1(e,t,r){var n=(t-e)/Math.max(0,r),i=Math.floor(Math.log(n)/Math.LN10),a=n/Math.pow(10,i);return i>=0?(a>=e10?10:a>=e5?5:a>=e2?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=e10?10:a>=e5?5:a>=e2?2:1)}function tickStep(e,t,r){var n=Math.abs(t-e)/Math.max(0,r),i=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),a=n/i;return a>=e10?i*=10:a>=e5?i*=5:a>=e2&&(i*=2),t<e?-i:i}function range(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=0|Math.max(0,Math.ceil((t-e)/r)),a=new Array(i);++n<i;)a[n]=e+n*r;return a}function identity$9(e){return e}var top=1,right=2,bottom=3,left=4,epsilon$5=1e-6;function translateX(e){return"translate("+e+",0)"}function translateY(e){return"translate(0,"+e+")"}function number$2(e){return t=>+e(t)}function center(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),r=>+e(r)+t}function entering(){return!this.__axis}function axis(e,t){var r=[],n=null,i=null,a=6,o=6,s=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=e===top||e===left?-1:1,u=e===left||e===right?"x":"y",d=e===top||e===bottom?translateX:translateY;function h(h){var g=null==n?t.ticks?t.ticks.apply(t,r):t.domain():n,p=null==i?t.tickFormat?t.tickFormat.apply(t,r):identity$9:i,f=Math.max(a,0)+s,m=t.range(),y=+m[0]+l,b=+m[m.length-1]+l,v=(t.bandwidth?center:number$2)(t.copy(),l),x=h.selection?h.selection():h,B=x.selectAll(".domain").data([null]),I=x.selectAll(".tick").data(g,t).order(),F=I.exit(),A=I.enter().append("g").attr("class","tick"),C=I.select("line"),w=I.select("text");B=B.merge(B.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),I=I.merge(A),C=C.merge(A.append("line").attr("stroke","currentColor").attr(u+"2",c*a)),w=w.merge(A.append("text").attr("fill","currentColor").attr(u,c*f).attr("dy",e===top?"0em":e===bottom?"0.71em":"0.32em")),h!==x&&(B=B.transition(h),I=I.transition(h),C=C.transition(h),w=w.transition(h),F=F.transition(h).attr("opacity",epsilon$5).attr("transform",(function(e){return isFinite(e=v(e))?d(e+l):this.getAttribute("transform")})),A.attr("opacity",epsilon$5).attr("transform",(function(e){var t=this.parentNode.__axis;return d((t&&isFinite(t=t(e))?t:v(e))+l)}))),F.remove(),B.attr("d",e===left||e===right?o?"M"+c*o+","+y+"H"+l+"V"+b+"H"+c*o:"M"+l+","+y+"V"+b:o?"M"+y+","+c*o+"V"+l+"H"+b+"V"+c*o:"M"+y+","+l+"H"+b),I.attr("opacity",1).attr("transform",(function(e){return d(v(e)+l)})),C.attr(u+"2",c*a),w.attr(u,c*f).text(p),x.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===right?"start":e===left?"end":"middle"),x.each((function(){this.__axis=v}))}return h.scale=function(e){return arguments.length?(t=e,h):t},h.ticks=function(){return r=Array.from(arguments),h},h.tickArguments=function(e){return arguments.length?(r=null==e?[]:Array.from(e),h):r.slice()},h.tickValues=function(e){return arguments.length?(n=null==e?null:Array.from(e),h):n&&n.slice()},h.tickFormat=function(e){return arguments.length?(i=e,h):i},h.tickSize=function(e){return arguments.length?(a=o=+e,h):a},h.tickSizeInner=function(e){return arguments.length?(a=+e,h):a},h.tickSizeOuter=function(e){return arguments.length?(o=+e,h):o},h.tickPadding=function(e){return arguments.length?(s=+e,h):s},h.offset=function(e){return arguments.length?(l=+e,h):l},h}function axisBottom(e){return axis(bottom,e)}function axisLeft(e){return axis(left,e)}var noop$2={value:()=>{}};function dispatch(){for(var e,t=0,r=arguments.length,n={};t<r;++t){if(!(e=arguments[t]+"")||e in n||/[\s.]/.test(e))throw new Error("illegal type: "+e);n[e]=[]}return new Dispatch(n)}function Dispatch(e){this._=e}function parseTypenames$1(e,t){return e.trim().split(/^|\s+/).map((function(e){var r="",n=e.indexOf(".");if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}}))}function get$1(e,t){for(var r,n=0,i=e.length;n<i;++n)if((r=e[n]).name===t)return r.value}function set$1(e,t,r){for(var n=0,i=e.length;n<i;++n)if(e[n].name===t){e[n]=noop$2,e=e.slice(0,n).concat(e.slice(n+1));break}return null!=r&&e.push({name:t,value:r}),e}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(e,t){var r,n=this._,i=parseTypenames$1(e+"",n),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<o;)if(r=(e=i[a]).type)n[r]=set$1(n[r],e.name,t);else if(null==t)for(r in n)n[r]=set$1(n[r],e.name,null);return this}for(;++a<o;)if((r=(e=i[a]).type)&&(r=get$1(n[r],e.name)))return r},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Dispatch(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var r,n,i=new Array(r),a=0;a<r;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,r=(n=this._[e]).length;a<r;++a)n[a].value.apply(t,i)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,a=n.length;i<a;++i)n[i].value.apply(t,r)}};var xhtml="http://www.w3.org/1999/xhtml",namespaces={svg:"http://www.w3.org/2000/svg",xhtml:xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(e){var t=e+="",r=t.indexOf(":");return r>=0&&"xmlns"!==(t=e.slice(0,r))&&(e=e.slice(r+1)),namespaces.hasOwnProperty(t)?{space:namespaces[t],local:e}:e}function creatorInherit(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===xhtml&&t.documentElement.namespaceURI===xhtml?t.createElement(e):t.createElementNS(r,e)}}function creatorFixed(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function creator(e){var t=namespace(e);return(t.local?creatorFixed:creatorInherit)(t)}function none(){}function selector$1(e){return null==e?none:function(){return this.querySelector(e)}}function selection_select(e){"function"!=typeof e&&(e=selector$1(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a,o,s=t[i],l=s.length,c=n[i]=new Array(l),u=0;u<l;++u)(a=s[u])&&(o=e.call(a,a.__data__,u,s))&&("__data__"in a&&(o.__data__=a.__data__),c[u]=o);return new Selection$1(n,this._parents)}function array$2(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function empty(){return[]}function selectorAll(e){return null==e?empty:function(){return this.querySelectorAll(e)}}function arrayAll(e){return function(){return array$2(e.apply(this,arguments))}}function selection_selectAll(e){e="function"==typeof e?arrayAll(e):selectorAll(e);for(var t=this._groups,r=t.length,n=[],i=[],a=0;a<r;++a)for(var o,s=t[a],l=s.length,c=0;c<l;++c)(o=s[c])&&(n.push(e.call(o,o.__data__,c,s)),i.push(o));return new Selection$1(n,i)}function matcher(e){return function(){return this.matches(e)}}function childMatcher(e){return function(t){return t.matches(e)}}var find=Array.prototype.find;function childFind(e){return function(){return find.call(this.children,e)}}function childFirst(){return this.firstElementChild}function selection_selectChild(e){return this.select(null==e?childFirst:childFind("function"==typeof e?e:childMatcher(e)))}var filter$2=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(e){return function(){return filter$2.call(this.children,e)}}function selection_selectChildren(e){return this.selectAll(null==e?children:childrenFilter("function"==typeof e?e:childMatcher(e)))}function selection_filter(e){"function"!=typeof e&&(e=matcher(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a,o=t[i],s=o.length,l=n[i]=[],c=0;c<s;++c)(a=o[c])&&e.call(a,a.__data__,c,o)&&l.push(a);return new Selection$1(n,this._parents)}function sparse(e){return new Array(e.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function constant$3(e){return function(){return e}}function bindIndex(e,t,r,n,i,a){for(var o,s=0,l=t.length,c=a.length;s<c;++s)(o=t[s])?(o.__data__=a[s],n[s]=o):r[s]=new EnterNode(e,a[s]);for(;s<l;++s)(o=t[s])&&(i[s]=o)}function bindKey(e,t,r,n,i,a,o){var s,l,c,u=new Map,d=t.length,h=a.length,g=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(g[s]=c=o.call(l,l.__data__,s,t)+"",u.has(c)?i[s]=l:u.set(c,l));for(s=0;s<h;++s)c=o.call(e,a[s],s,a)+"",(l=u.get(c))?(n[s]=l,l.__data__=a[s],u.delete(c)):r[s]=new EnterNode(e,a[s]);for(s=0;s<d;++s)(l=t[s])&&u.get(g[s])===l&&(i[s]=l)}function datum(e){return e.__data__}function selection_data(e,t){if(!arguments.length)return Array.from(this,datum);var r=t?bindKey:bindIndex,n=this._parents,i=this._groups;"function"!=typeof e&&(e=constant$3(e));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var u=n[c],d=i[c],h=d.length,g=arraylike(e.call(u,u&&u.__data__,c,n)),p=g.length,f=s[c]=new Array(p),m=o[c]=new Array(p),y=l[c]=new Array(h);r(u,d,f,m,y,g,t);for(var b,v,x=0,B=0;x<p;++x)if(b=f[x]){for(x>=B&&(B=x+1);!(v=m[B])&&++B<p;);b._next=v||null}}return(o=new Selection$1(o,n))._enter=s,o._exit=l,o}function arraylike(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(e,t,r){var n=this.enter(),i=this,a=this.exit();return"function"==typeof e?(n=e(n))&&(n=n.selection()):n=n.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==r?a.remove():r(a),n&&i?n.merge(i).order():i}function selection_merge(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,i=r.length,a=n.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var c,u=r[l],d=n[l],h=u.length,g=s[l]=new Array(h),p=0;p<h;++p)(c=u[p]||d[p])&&(g[p]=c);for(;l<i;++l)s[l]=r[l];return new Selection$1(s,this._parents)}function selection_order(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n,i=e[t],a=i.length-1,o=i[a];--a>=0;)(n=i[a])&&(o&&4^n.compareDocumentPosition(o)&&o.parentNode.insertBefore(n,o),o=n);return this}function selection_sort(e){function t(t,r){return t&&r?e(t.__data__,r.__data__):!t-!r}e||(e=ascending$1);for(var r=this._groups,n=r.length,i=new Array(n),a=0;a<n;++a){for(var o,s=r[a],l=s.length,c=i[a]=new Array(l),u=0;u<l;++u)(o=s[u])&&(c[u]=o);c.sort(t)}return new Selection$1(i,this._parents).order()}function ascending$1(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function selection_call(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,a=n.length;i<a;++i){var o=n[i];if(o)return o}return null}function selection_size(){let e=0;for(const t of this)++e;return e}function selection_empty(){return!this.node()}function selection_each(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i,a=t[r],o=0,s=a.length;o<s;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this}function attrRemove$1(e){return function(){this.removeAttribute(e)}}function attrRemoveNS$1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function attrConstant$1(e,t){return function(){this.setAttribute(e,t)}}function attrConstantNS$1(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function attrFunction$1(e,t){return function(){var r=t.apply(this,arguments);null==r?this.removeAttribute(e):this.setAttribute(e,r)}}function attrFunctionNS$1(e,t){return function(){var r=t.apply(this,arguments);null==r?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function selection_attr(e,t){var r=namespace(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((null==t?r.local?attrRemoveNS$1:attrRemove$1:"function"==typeof t?r.local?attrFunctionNS$1:attrFunction$1:r.local?attrConstantNS$1:attrConstant$1)(r,t))}function defaultView(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function styleRemove$1(e){return function(){this.style.removeProperty(e)}}function styleConstant$1(e,t,r){return function(){this.style.setProperty(e,t,r)}}function styleFunction$1(e,t,r){return function(){var n=t.apply(this,arguments);null==n?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function selection_style(e,t,r){return arguments.length>1?this.each((null==t?styleRemove$1:"function"==typeof t?styleFunction$1:styleConstant$1)(e,t,null==r?"":r)):styleValue(this.node(),e)}function styleValue(e,t){return e.style.getPropertyValue(t)||defaultView(e).getComputedStyle(e,null).getPropertyValue(t)}function propertyRemove(e){return function(){delete this[e]}}function propertyConstant(e,t){return function(){this[e]=t}}function propertyFunction(e,t){return function(){var r=t.apply(this,arguments);null==r?delete this[e]:this[e]=r}}function selection_property(e,t){return arguments.length>1?this.each((null==t?propertyRemove:"function"==typeof t?propertyFunction:propertyConstant)(e,t)):this.node()[e]}function classArray(e){return e.trim().split(/^|\s+/)}function classList(e){return e.classList||new ClassList(e)}function ClassList(e){this._node=e,this._names=classArray(e.getAttribute("class")||"")}function classedAdd(e,t){for(var r=classList(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function classedRemove(e,t){for(var r=classList(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function classedTrue(e){return function(){classedAdd(this,e)}}function classedFalse(e){return function(){classedRemove(this,e)}}function classedFunction(e,t){return function(){(t.apply(this,arguments)?classedAdd:classedRemove)(this,e)}}function selection_classed(e,t){var r=classArray(e+"");if(arguments.length<2){for(var n=classList(this.node()),i=-1,a=r.length;++i<a;)if(!n.contains(r[i]))return!1;return!0}return this.each(("function"==typeof t?classedFunction:t?classedTrue:classedFalse)(r,t))}function textRemove(){this.textContent=""}function textConstant$1(e){return function(){this.textContent=e}}function textFunction$1(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function selection_text(e){return arguments.length?this.each(null==e?textRemove:("function"==typeof e?textFunction$1:textConstant$1)(e)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(e){return function(){this.innerHTML=e}}function htmlFunction(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function selection_html(e){return arguments.length?this.each(null==e?htmlRemove:("function"==typeof e?htmlFunction:htmlConstant)(e)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(e){var t="function"==typeof e?e:creator(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))}function constantNull(){return null}function selection_insert(e,t){var r="function"==typeof e?e:creator(e),n=null==t?constantNull:"function"==typeof t?t:selector$1(t);return this.select((function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)}))}function remove(){var e=this.parentNode;e&&e.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function selection_cloneDeep(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function selection_clone(e){return this.select(e?selection_cloneDeep:selection_cloneShallow)}function selection_datum(e){return arguments.length?this.property("__data__",e):this.node().__data__}function contextListener(e){return function(t){e.call(this,t,this.__data__)}}function parseTypenames(e){return e.trim().split(/^|\s+/).map((function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}}))}function onRemove(e){return function(){var t=this.__on;if(t){for(var r,n=0,i=-1,a=t.length;n<a;++n)r=t[n],e.type&&r.type!==e.type||r.name!==e.name?t[++i]=r:this.removeEventListener(r.type,r.listener,r.options);++i?t.length=i:delete this.__on}}}function onAdd(e,t,r){return function(){var n,i=this.__on,a=contextListener(t);if(i)for(var o=0,s=i.length;o<s;++o)if((n=i[o]).type===e.type&&n.name===e.name)return this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=a,n.options=r),void(n.value=t);this.addEventListener(e.type,a,r),n={type:e.type,name:e.name,value:t,listener:a,options:r},i?i.push(n):this.__on=[n]}}function selection_on(e,t,r){var n,i,a=parseTypenames(e+""),o=a.length;if(!(arguments.length<2)){for(s=t?onAdd:onRemove,n=0;n<o;++n)this.each(s(a[n],t,r));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(n=0,l=s[c];n<o;++n)if((i=a[n]).type===l.type&&i.name===l.name)return l.value}function dispatchEvent(e,t,r){var n=defaultView(e),i=n.CustomEvent;"function"==typeof i?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function dispatchConstant(e,t){return function(){return dispatchEvent(this,e,t)}}function dispatchFunction(e,t){return function(){return dispatchEvent(this,e,t.apply(this,arguments))}}function selection_dispatch(e,t){return this.each(("function"==typeof t?dispatchFunction:dispatchConstant)(e,t))}function*selection_iterator(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n,i=e[t],a=0,o=i.length;a<o;++a)(n=i[a])&&(yield n)}EnterNode.prototype={constructor:EnterNode,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},ClassList.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var root=[null];function Selection$1(e,t){this._groups=e,this._parents=t}function selection(){return new Selection$1([[document.documentElement]],root)}function selection_selection(){return this}function select$5(e){return"string"==typeof e?new Selection$1([[document.querySelector(e)]],[document.documentElement]):new Selection$1([[e]],root)}function sourceEvent(e){let t;for(;t=e.sourceEvent;)e=t;return e}function pointer(e,t){if(e=sourceEvent(e),void 0===t&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,[(n=n.matrixTransform(t.getScreenCTM().inverse())).x,n.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};const nonpassive={passive:!1},nonpassivecapture={capture:!0,passive:!1};function nopropagation(e){e.stopImmediatePropagation()}function noevent(e){e.preventDefault(),e.stopImmediatePropagation()}function dragDisable(e){var t=e.document.documentElement,r=select$5(e).on("dragstart.drag",noevent,nonpassivecapture);"onselectstart"in t?r.on("selectstart.drag",noevent,nonpassivecapture):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function yesdrag(e,t){var r=e.document.documentElement,n=select$5(e).on("dragstart.drag",null);t&&(n.on("click.drag",noevent,nonpassivecapture),setTimeout((function(){n.on("click.drag",null)}),0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}var constant$2=e=>()=>e;function DragEvent(e,{sourceEvent:t,subject:r,target:n,identifier:i,active:a,x:o,y:s,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}function defaultFilter(e){return!e.ctrlKey&&!e.button}function defaultContainer(){return this.parentNode}function defaultSubject(e,t){return null==t?{x:e.x,y:e.y}:t}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function drag(){var e,t,r,n,i=defaultFilter,a=defaultContainer,o=defaultSubject,s=defaultTouchable,l={},c=dispatch("start","drag","end"),u=0,d=0;function h(e){e.on("mousedown.drag",g).filter(s).on("touchstart.drag",m).on("touchmove.drag",y,nonpassive).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(o,s){if(!n&&i.call(this,o,s)){var l=v(this,a.call(this,o,s),o,s,"mouse");l&&(select$5(o.view).on("mousemove.drag",p,nonpassivecapture).on("mouseup.drag",f,nonpassivecapture),dragDisable(o.view),nopropagation(o),r=!1,e=o.clientX,t=o.clientY,l("start",o))}}function p(n){if(noevent(n),!r){var i=n.clientX-e,a=n.clientY-t;r=i*i+a*a>d}l.mouse("drag",n)}function f(e){select$5(e.view).on("mousemove.drag mouseup.drag",null),yesdrag(e.view,r),noevent(e),l.mouse("end",e)}function m(e,t){if(i.call(this,e,t)){var r,n,o=e.changedTouches,s=a.call(this,e,t),l=o.length;for(r=0;r<l;++r)(n=v(this,s,e,t,o[r].identifier,o[r]))&&(nopropagation(e),n("start",e,o[r]))}}function y(e){var t,r,n=e.changedTouches,i=n.length;for(t=0;t<i;++t)(r=l[n[t].identifier])&&(noevent(e),r("drag",e,n[t]))}function b(e){var t,r,i=e.changedTouches,a=i.length;for(n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),t=0;t<a;++t)(r=l[i[t].identifier])&&(nopropagation(e),r("end",e,i[t]))}function v(e,t,r,n,i,a){var s,d,g,p=c.copy(),f=pointer(a||r,t);if(null!=(g=o.call(e,new DragEvent("beforestart",{sourceEvent:r,target:h,identifier:i,active:u,x:f[0],y:f[1],dx:0,dy:0,dispatch:p}),n)))return s=g.x-f[0]||0,d=g.y-f[1]||0,function r(a,o,c){var m,y=f;switch(a){case"start":l[i]=r,m=u++;break;case"end":delete l[i],--u;case"drag":f=pointer(c||o,t),m=u}p.call(a,e,new DragEvent(a,{sourceEvent:o,subject:g,target:h,identifier:i,active:m,x:f[0]+s,y:f[1]+d,dx:f[0]-y[0],dy:f[1]-y[1],dispatch:p}),n)}}return h.filter=function(e){return arguments.length?(i="function"==typeof e?e:constant$2(!!e),h):i},h.container=function(e){return arguments.length?(a="function"==typeof e?e:constant$2(e),h):a},h.subject=function(e){return arguments.length?(o="function"==typeof e?e:constant$2(e),h):o},h.touchable=function(e){return arguments.length?(s="function"==typeof e?e:constant$2(!!e),h):s},h.on=function(){var e=c.on.apply(c,arguments);return e===c?h:e},h.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,h):Math.sqrt(d)},h}function define(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function extend$1(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Color$C(){}DragEvent.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+[reN,reP,reP,reN]+"\\)$"),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color$2(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=reHex.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?rgbn(t):3===r?new Rgb(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?rgba$3(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?rgba$3(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=reRgbInteger.exec(e))?new Rgb(t[1],t[2],t[3],1):(t=reRgbPercent.exec(e))?new Rgb(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=reRgbaInteger.exec(e))?rgba$3(t[1],t[2],t[3],t[4]):(t=reRgbaPercent.exec(e))?rgba$3(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=reHslPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,1):(t=reHslaPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,t[4]):named.hasOwnProperty(e)?rgbn(named[e]):"transparent"===e?new Rgb(NaN,NaN,NaN,0):null}function rgbn(e){return new Rgb(e>>16&255,e>>8&255,255&e,1)}function rgba$3(e,t,r,n){return n<=0&&(e=t=r=NaN),new Rgb(e,t,r,n)}function rgbConvert(e){return e instanceof Color$C||(e=color$2(e)),e?new Rgb((e=e.rgb()).r,e.g,e.b,e.opacity):new Rgb}function rgb$3(e,t,r,n){return 1===arguments.length?rgbConvert(e):new Rgb(e,t,r,null==n?1:n)}function Rgb(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function rgb_formatHex(){return"#"+hex(this.r)+hex(this.g)+hex(this.b)}function rgb_formatRgb(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function hex(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function hsla(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Hsl(e,t,r,n)}function hslConvert(e){if(e instanceof Hsl)return new Hsl(e.h,e.s,e.l,e.opacity);if(e instanceof Color$C||(e=color$2(e)),!e)return new Hsl;if(e instanceof Hsl)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),o=NaN,s=a-i,l=(a+i)/2;return s?(o=t===a?(r-n)/s+6*(r<n):r===a?(n-t)/s+2:(t-r)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Hsl(o,s,l,e.opacity)}function hsl$2(e,t,r,n){return 1===arguments.length?hslConvert(e):new Hsl(e,t,r,null==n?1:n)}function Hsl(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function hsl2rgb(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}define(Color$C,color$2,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb}),define(Rgb,rgb$3,extend$1(Color$C,{brighter:function(e){return e=null==e?brighter:Math.pow(brighter,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?darker:Math.pow(darker,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),define(Hsl,hsl$2,extend$1(Color$C,{brighter:function(e){return e=null==e?brighter:Math.pow(brighter,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?darker:Math.pow(darker,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Rgb(hsl2rgb(e>=240?e-240:e+120,i,n),hsl2rgb(e,i,n),hsl2rgb(e<120?e+240:e-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var constant$1=e=>()=>e;function linear$1(e,t){return function(r){return e+r*t}}function exponential(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function gamma(e){return 1==(e=+e)?nogamma:function(t,r){return r-t?exponential(t,r,e):constant$1(isNaN(t)?r:t)}}function nogamma(e,t){var r=t-e;return r?linear$1(e,r):constant$1(isNaN(e)?t:e)}var interpolateRgb=function e(t){var r=gamma(t);function n(e,t){var n=r((e=rgb$3(e)).r,(t=rgb$3(t)).r),i=r(e.g,t.g),a=r(e.b,t.b),o=nogamma(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return n.gamma=e,n}(1);function numberArray(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function isNumberArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function genericArray(e,t){var r,n=t?t.length:0,i=e?Math.min(n,e.length):0,a=new Array(i),o=new Array(n);for(r=0;r<i;++r)a[r]=interpolate$1(e[r],t[r]);for(;r<n;++r)o[r]=t[r];return function(e){for(r=0;r<i;++r)o[r]=a[r](e);return o}}function date(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function interpolateNumber(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function object(e,t){var r,n={},i={};for(r in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)r in e?n[r]=interpolate$1(e[r],t[r]):i[r]=t[r];return function(e){for(r in n)i[r]=n[r](e);return i}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(e){return function(){return e}}function one(e){return function(t){return e(t)+""}}function interpolateString(e,t){var r,n,i,a=reA.lastIndex=reB.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(r=reA.exec(e))&&(n=reB.exec(t));)(i=n.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,l.push({i:o,x:interpolateNumber(r,n)})),a=reB.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?one(l[0].x):zero(t):(t=l.length,function(e){for(var r,n=0;n<t;++n)s[(r=l[n]).i]=r.x(e);return s.join("")})}function interpolate$1(e,t){var r,n=typeof t;return null==t||"boolean"===n?constant$1(t):("number"===n?interpolateNumber:"string"===n?(r=color$2(t))?(t=r,interpolateRgb):interpolateString:t instanceof color$2?interpolateRgb:t instanceof Date?date:isNumberArray(t)?numberArray:Array.isArray(t)?genericArray:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?object:interpolateNumber)(e,t)}function interpolateRound(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var svgNode,degrees=180/Math.PI,identity$8={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(e,t,r,n,i,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*r+t*n)&&(r-=e*l,n-=t*l),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,l/=s),e*n<t*r&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*degrees,skewX:Math.atan(l)*degrees,scaleX:o,scaleY:s}}function parseCss(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?identity$8:decompose(t.a,t.b,t.c,t.d,t.e,t.f)}function parseSvg(e){return null==e?identity$8:(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",e),(e=svgNode.transform.baseVal.consolidate())?decompose((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):identity$8)}function interpolateTransform(e,t,r,n){function i(e){return e.length?e.pop()+" ":""}return function(a,o){var s=[],l=[];return a=e(a),o=e(o),function(e,n,i,a,o,s){if(e!==i||n!==a){var l=o.push("translate(",null,t,null,r);s.push({i:l-4,x:interpolateNumber(e,i)},{i:l-2,x:interpolateNumber(n,a)})}else(i||a)&&o.push("translate("+i+t+a+r)}(a.translateX,a.translateY,o.translateX,o.translateY,s,l),function(e,t,r,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:r.push(i(r)+"rotate(",null,n)-2,x:interpolateNumber(e,t)})):t&&r.push(i(r)+"rotate("+t+n)}(a.rotate,o.rotate,s,l),function(e,t,r,a){e!==t?a.push({i:r.push(i(r)+"skewX(",null,n)-2,x:interpolateNumber(e,t)}):t&&r.push(i(r)+"skewX("+t+n)}(a.skewX,o.skewX,s,l),function(e,t,r,n,a,o){if(e!==r||t!==n){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:interpolateNumber(e,r)},{i:s-2,x:interpolateNumber(t,n)})}else 1===r&&1===n||a.push(i(a)+"scale("+r+","+n+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,l),a=o=null,function(e){for(var t,r=-1,n=l.length;++r<n;)s[(t=l[r]).i]=t.x(e);return s.join("")}}}var taskHead,taskTail,interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),frame=0,timeout$1=0,interval$1=0,pokeDelay=1e3,clockLast=0,clockNow=0,clockSkew=0,clock="object"==typeof performance&&performance.now?performance:Date,setFrame="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}function timer(e,t,r){var n=new Timer;return n.restart(e,t,r),n}function timerFlush(){now(),++frame;for(var e,t=taskHead;t;)(e=clockNow-t._time)>=0&&t._call.call(void 0,e),t=t._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var e=clock.now(),t=e-clockLast;t>pokeDelay&&(clockSkew-=t,clockLast=e)}function nap(){for(var e,t,r=taskHead,n=1/0;r;)r._call?(n>r._time&&(n=r._time),e=r,r=r._next):(t=r._next,r._next=null,r=e?e._next=t:taskHead=t);taskTail=e,sleep(n)}function sleep(e){frame||(timeout$1&&(timeout$1=clearTimeout(timeout$1)),e-clockNow>24?(e<1/0&&(timeout$1=setTimeout(wake,e-clock.now()-clockSkew)),interval$1&&(interval$1=clearInterval(interval$1))):(interval$1||(clockLast=clock.now(),interval$1=setInterval(poke,pokeDelay)),frame=1,setFrame(wake)))}function timeout(e,t,r){var n=new Timer;return t=null==t?0:+t,n.restart((r=>{n.stop(),e(r+t)}),t,r),n}function interval(e,t,r){var n=new Timer,i=t;return null==t?(n.restart(e,t,r),n):(n._restart=n.restart,n.restart=function(e,t,r){t=+t,r=null==r?now():+r,n._restart((function a(o){o+=i,n._restart(a,i+=t,r),e(o)}),t,r)},n.restart(e,t,r),n)}Timer.prototype=timer.prototype={constructor:Timer,restart:function(e,t,r){if("function"!=typeof e)throw new TypeError("callback is not a function");r=(null==r?now():+r)+(null==t?0:+t),this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=e,this._time=r,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(e,t,r,n,i,a){var o=e.__transition;if(o){if(r in o)return}else e.__transition={};create$1(e,r,{name:t,index:n,group:i,on:emptyOn,tween:emptyTween,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:CREATED})}function init(e,t){var r=get(e,t);if(r.state>CREATED)throw new Error("too late; already scheduled");return r}function set(e,t){var r=get(e,t);if(r.state>STARTED)throw new Error("too late; already running");return r}function get(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function create$1(e,t,r){var n,i=e.__transition;function a(l){var c,u,d,h;if(r.state!==SCHEDULED)return s();for(c in i)if((h=i[c]).name===r.name){if(h.state===STARTED)return timeout(a);h.state===RUNNING?(h.state=ENDED,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[c]):+c<t&&(h.state=ENDED,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[c])}if(timeout((function(){r.state===STARTED&&(r.state=RUNNING,r.timer.restart(o,r.delay,r.time),o(l))})),r.state=STARTING,r.on.call("start",e,e.__data__,r.index,r.group),r.state===STARTING){for(r.state=STARTED,n=new Array(d=r.tween.length),c=0,u=-1;c<d;++c)(h=r.tween[c].value.call(e,e.__data__,r.index,r.group))&&(n[++u]=h);n.length=u+1}}function o(t){for(var i=t<r.duration?r.ease.call(null,t/r.duration):(r.timer.restart(s),r.state=ENDING,1),a=-1,o=n.length;++a<o;)n[a].call(e,i);r.state===ENDING&&(r.on.call("end",e,e.__data__,r.index,r.group),s())}function s(){for(var n in r.state=ENDED,r.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=r,r.timer=timer((function(e){r.state=SCHEDULED,r.timer.restart(a,r.delay,r.time),r.delay<=e&&a(e-r.delay)}),0,r.time)}function interrupt(e,t){var r,n,i,a=e.__transition,o=!0;if(a){for(i in t=null==t?null:t+"",a)(r=a[i]).name===t?(n=r.state>STARTING&&r.state<ENDING,r.state=ENDED,r.timer.stop(),r.on.call(n?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete a[i]):o=!1;o&&delete e.__transition}}function selection_interrupt(e){return this.each((function(){interrupt(this,e)}))}function tweenRemove(e,t){var r,n;return function(){var i=set(this,e),a=i.tween;if(a!==r)for(var o=0,s=(n=r=a).length;o<s;++o)if(n[o].name===t){(n=n.slice()).splice(o,1);break}i.tween=n}}function tweenFunction(e,t,r){var n,i;if("function"!=typeof r)throw new Error;return function(){var a=set(this,e),o=a.tween;if(o!==n){i=(n=o).slice();for(var s={name:t,value:r},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=s;break}l===c&&i.push(s)}a.tween=i}}function transition_tween(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n,i=get(this.node(),r).tween,a=0,o=i.length;a<o;++a)if((n=i[a]).name===e)return n.value;return null}return this.each((null==t?tweenRemove:tweenFunction)(r,e,t))}function tweenValue(e,t,r){var n=e._id;return e.each((function(){var e=set(this,n);(e.value||(e.value={}))[t]=r.apply(this,arguments)})),function(e){return get(e,n).value[t]}}function interpolate(e,t){var r;return("number"==typeof t?interpolateNumber:t instanceof color$2?interpolateRgb:(r=color$2(t))?(t=r,interpolateRgb):interpolateString)(e,t)}function attrRemove(e){return function(){this.removeAttribute(e)}}function attrRemoveNS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function attrConstant(e,t,r){var n,i,a=r+"";return function(){var o=this.getAttribute(e);return o===a?null:o===n?i:i=t(n=o,r)}}function attrConstantNS(e,t,r){var n,i,a=r+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===n?i:i=t(n=o,r)}}function attrFunction(e,t,r){var n,i,a;return function(){var o,s,l=r(this);if(null!=l)return(o=this.getAttribute(e))===(s=l+"")?null:o===n&&s===i?a:(i=s,a=t(n=o,l));this.removeAttribute(e)}}function attrFunctionNS(e,t,r){var n,i,a;return function(){var o,s,l=r(this);if(null!=l)return(o=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:o===n&&s===i?a:(i=s,a=t(n=o,l));this.removeAttributeNS(e.space,e.local)}}function transition_attr(e,t){var r=namespace(e),n="transform"===r?interpolateTransformSvg:interpolate;return this.attrTween(e,"function"==typeof t?(r.local?attrFunctionNS:attrFunction)(r,n,tweenValue(this,"attr."+e,t)):null==t?(r.local?attrRemoveNS:attrRemove)(r):(r.local?attrConstantNS:attrConstant)(r,n,t))}function attrInterpolate(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function attrInterpolateNS(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function attrTweenNS(e,t){var r,n;function i(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&attrInterpolateNS(e,i)),r}return i._value=t,i}function attrTween(e,t){var r,n;function i(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&attrInterpolate(e,i)),r}return i._value=t,i}function transition_attrTween(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;var n=namespace(e);return this.tween(r,(n.local?attrTweenNS:attrTween)(n,t))}function delayFunction(e,t){return function(){init(this,e).delay=+t.apply(this,arguments)}}function delayConstant(e,t){return t=+t,function(){init(this,e).delay=t}}function transition_delay(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?delayFunction:delayConstant)(t,e)):get(this.node(),t).delay}function durationFunction(e,t){return function(){set(this,e).duration=+t.apply(this,arguments)}}function durationConstant(e,t){return t=+t,function(){set(this,e).duration=t}}function transition_duration(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?durationFunction:durationConstant)(t,e)):get(this.node(),t).duration}function easeConstant(e,t){if("function"!=typeof t)throw new Error;return function(){set(this,e).ease=t}}function transition_ease(e){var t=this._id;return arguments.length?this.each(easeConstant(t,e)):get(this.node(),t).ease}function easeVarying(e,t){return function(){var r=t.apply(this,arguments);if("function"!=typeof r)throw new Error;set(this,e).ease=r}}function transition_easeVarying(e){if("function"!=typeof e)throw new Error;return this.each(easeVarying(this._id,e))}function transition_filter(e){"function"!=typeof e&&(e=matcher(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a,o=t[i],s=o.length,l=n[i]=[],c=0;c<s;++c)(a=o[c])&&e.call(a,a.__data__,c,o)&&l.push(a);return new Transition(n,this._parents,this._name,this._id)}function transition_merge(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,a=Math.min(n,i),o=new Array(n),s=0;s<a;++s)for(var l,c=t[s],u=r[s],d=c.length,h=o[s]=new Array(d),g=0;g<d;++g)(l=c[g]||u[g])&&(h[g]=l);for(;s<n;++s)o[s]=t[s];return new Transition(o,this._parents,this._name,this._id)}function start(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}function onFunction(e,t,r){var n,i,a=start(t)?init:set;return function(){var o=a(this,e),s=o.on;s!==n&&(i=(n=s).copy()).on(t,r),o.on=i}}function transition_on(e,t){var r=this._id;return arguments.length<2?get(this.node(),r).on.on(e):this.each(onFunction(r,e,t))}function removeFunction(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(e){var t=this._name,r=this._id;"function"!=typeof e&&(e=selector$1(e));for(var n=this._groups,i=n.length,a=new Array(i),o=0;o<i;++o)for(var s,l,c=n[o],u=c.length,d=a[o]=new Array(u),h=0;h<u;++h)(s=c[h])&&(l=e.call(s,s.__data__,h,c))&&("__data__"in s&&(l.__data__=s.__data__),d[h]=l,schedule(d[h],t,r,h,d,get(s,r)));return new Transition(a,this._parents,t,r)}function transition_selectAll(e){var t=this._name,r=this._id;"function"!=typeof e&&(e=selectorAll(e));for(var n=this._groups,i=n.length,a=[],o=[],s=0;s<i;++s)for(var l,c=n[s],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var h,g=e.call(l,l.__data__,d,c),p=get(l,r),f=0,m=g.length;f<m;++f)(h=g[f])&&schedule(h,t,r,f,g,p);a.push(g),o.push(l)}return new Transition(a,o,t,r)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(e,t){var r,n,i;return function(){var a=styleValue(this,e),o=(this.style.removeProperty(e),styleValue(this,e));return a===o?null:a===r&&o===n?i:i=t(r=a,n=o)}}function styleRemove(e){return function(){this.style.removeProperty(e)}}function styleConstant(e,t,r){var n,i,a=r+"";return function(){var o=styleValue(this,e);return o===a?null:o===n?i:i=t(n=o,r)}}function styleFunction(e,t,r){var n,i,a;return function(){var o=styleValue(this,e),s=r(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=styleValue(this,e)),o===l?null:o===n&&l===i?a:(i=l,a=t(n=o,s))}}function styleMaybeRemove(e,t){var r,n,i,a,o="style."+t,s="end."+o;return function(){var l=set(this,e),c=l.on,u=null==l.value[o]?a||(a=styleRemove(t)):void 0;c===r&&i===u||(n=(r=c).copy()).on(s,i=u),l.on=n}}function transition_style(e,t,r){var n="transform"==(e+="")?interpolateTransformCss:interpolate;return null==t?this.styleTween(e,styleNull(e,n)).on("end.style."+e,styleRemove(e)):"function"==typeof t?this.styleTween(e,styleFunction(e,n,tweenValue(this,"style."+e,t))).each(styleMaybeRemove(this._id,e)):this.styleTween(e,styleConstant(e,n,t),r).on("end.style."+e,null)}function styleInterpolate(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function styleTween(e,t,r){var n,i;function a(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&styleInterpolate(e,a,r)),n}return a._value=t,a}function transition_styleTween(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,styleTween(e,t,null==r?"":r))}function textConstant(e){return function(){this.textContent=e}}function textFunction(e){return function(){var t=e(this);this.textContent=null==t?"":t}}function transition_text(e){return this.tween("text","function"==typeof e?textFunction(tweenValue(this,"text",e)):textConstant(null==e?"":e+""))}function textInterpolate(e){return function(t){this.textContent=e.call(this,t)}}function textTween(e){var t,r;function n(){var n=e.apply(this,arguments);return n!==r&&(t=(r=n)&&textInterpolate(n)),t}return n._value=e,n}function transition_textTween(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,textTween(e))}function transition_transition(){for(var e=this._name,t=this._id,r=newId(),n=this._groups,i=n.length,a=0;a<i;++a)for(var o,s=n[a],l=s.length,c=0;c<l;++c)if(o=s[c]){var u=get(o,t);schedule(o,e,r,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Transition(n,this._parents,e,r)}function transition_end(){var e,t,r=this,n=r._id,i=r.size();return new Promise((function(a,o){var s={value:o},l={value:function(){0==--i&&a()}};r.each((function(){var r=set(this,n),i=r.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),r.on=t})),0===i&&a()}))}var id=0;function Transition(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function newId(){return++id}var selection_prototype=selection.prototype;function cubicIn(e){return e*e*e}function cubicOut(e){return--e*e*e+1}function cubicInOut(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function selection_transition(e){var t,r;e instanceof Transition?(t=e._id,e=e._name):(t=newId(),(r=defaultTiming).time=now(),e=null==e?null:e+"");for(var n=this._groups,i=n.length,a=0;a<i;++a)for(var o,s=n[a],l=s.length,c=0;c<l;++c)(o=s[c])&&schedule(o,e,t,c,s,r||inherit(o,t));return new Transition(n,this._parents,e,t)}selection.prototype.interrupt=selection_interrupt,selection.prototype.transition=selection_transition;const pi$1=Math.PI,tau$1=2*pi$1,epsilon$4=1e-6,tauEpsilon=tau$1-1e-6;function Path(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path(){return new Path}function formatDecimal$1(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function formatDecimalParts$1(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function exponent$1(e){return(e=formatDecimalParts$1(Math.abs(e)))?e[1]:NaN}function formatGroup$1(e,t){return function(r,n){for(var i=r.length,a=[],o=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),a.push(r.substring(i-=s,i+s)),!((l+=s+1)>n));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function formatNumerals$1(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}Path.prototype=path.prototype={constructor:Path,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,r,n){this._+="Q"+ +e+","+ +t+","+(this._x1=+r)+","+(this._y1=+n)},bezierCurveTo:function(e,t,r,n,i,a){this._+="C"+ +e+","+ +t+","+ +r+","+ +n+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,r,n,i){e=+e,t=+t,r=+r,n=+n,i=+i;var a=this._x1,o=this._y1,s=r-e,l=n-t,c=a-e,u=o-t,d=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(d>1e-6)if(Math.abs(u*s-l*c)>1e-6&&i){var h=r-a,g=n-o,p=s*s+l*l,f=h*h+g*g,m=Math.sqrt(p),y=Math.sqrt(d),b=i*Math.tan((pi$1-Math.acos((p+d-f)/(2*m*y)))/2),v=b/y,x=b/m;Math.abs(v-1)>1e-6&&(this._+="L"+(e+v*c)+","+(t+v*u)),this._+="A"+i+","+i+",0,0,"+ +(u*h>c*g)+","+(this._x1=e+x*s)+","+(this._y1=t+x*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,r,n,i,a){e=+e,t=+t,a=!!a;var o=(r=+r)*Math.cos(n),s=r*Math.sin(n),l=e+o,c=t+s,u=1^a,d=a?n-i:i-n;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+l+","+c),r&&(d<0&&(d=d%tau$1+tau$1),d>tauEpsilon?this._+="A"+r+","+r+",0,1,"+u+","+(e-o)+","+(t-s)+"A"+r+","+r+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):d>1e-6&&(this._+="A"+r+","+r+",0,"+ +(d>=pi$1)+","+u+","+(this._x1=e+r*Math.cos(i))+","+(this._y1=t+r*Math.sin(i))))},rect:function(e,t,r,n){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +r+"v"+ +n+"h"+-r+"Z"},toString:function(){return this._}};var prefixExponent$1,re$1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier$1(e){if(!(t=re$1.exec(e)))throw new Error("invalid format: "+e);var t;return new FormatSpecifier$1({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function FormatSpecifier$1(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function formatTrim$1(e){e:for(var t,r=e.length,n=1,i=-1;n<r;++n)switch(e[n]){case".":i=t=n;break;case"0":0===i&&(i=n),t=n;break;default:if(!+e[n])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}function formatPrefixAuto$1(e,t){var r=formatDecimalParts$1(e,t);if(!r)return e+"";var n=r[0],i=r[1],a=i-(prefixExponent$1=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+formatDecimalParts$1(e,Math.max(0,t+a-1))[0]}function formatRounded$1(e,t){var r=formatDecimalParts$1(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}formatSpecifier$1.prototype=FormatSpecifier$1.prototype,FormatSpecifier$1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var formatTypes$1={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:formatDecimal$1,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>formatRounded$1(100*e,t),r:formatRounded$1,s:formatPrefixAuto$1,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function identity$7(e){return e}var locale$2,format$3,formatPrefix$1,map$1=Array.prototype.map,prefixes$1=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$3(e){var t=void 0===e.grouping||void 0===e.thousands?identity$7:formatGroup$1(map$1.call(e.grouping,Number),e.thousands+""),r=void 0===e.currency?"":e.currency[0]+"",n=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",a=void 0===e.numerals?identity$7:formatNumerals$1(map$1.call(e.numerals,String)),o=void 0===e.percent?"%":e.percent+"",s=void 0===e.minus?"−":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function c(e){var c=(e=formatSpecifier$1(e)).fill,u=e.align,d=e.sign,h=e.symbol,g=e.zero,p=e.width,f=e.comma,m=e.precision,y=e.trim,b=e.type;"n"===b?(f=!0,b="g"):formatTypes$1[b]||(void 0===m&&(m=12),y=!0,b="g"),(g||"0"===c&&"="===u)&&(g=!0,c="0",u="=");var v="$"===h?r:"#"===h&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",x="$"===h?n:/[%p]/.test(b)?o:"",B=formatTypes$1[b],I=/[defgprs%]/.test(b);function F(e){var r,n,o,h=v,F=x;if("c"===b)F=B(e)+F,e="";else{var A=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:B(Math.abs(e),m),y&&(e=formatTrim$1(e)),A&&0==+e&&"+"!==d&&(A=!1),h=(A?"("===d?d:s:"-"===d||"("===d?"":d)+h,F=("s"===b?prefixes$1[8+prefixExponent$1/3]:"")+F+(A&&"("===d?")":""),I)for(r=-1,n=e.length;++r<n;)if(48>(o=e.charCodeAt(r))||o>57){F=(46===o?i+e.slice(r+1):e.slice(r))+F,e=e.slice(0,r);break}}f&&!g&&(e=t(e,1/0));var C=h.length+e.length+F.length,w=C<p?new Array(p-C+1).join(c):"";switch(f&&g&&(e=t(w+e,w.length?p-F.length:1/0),w=""),u){case"<":e=h+e+F+w;break;case"=":e=h+w+e+F;break;case"^":e=w.slice(0,C=w.length>>1)+h+e+F+w.slice(C);break;default:e=w+h+e+F}return a(e)}return m=void 0===m?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),F.toString=function(){return e+""},F}return{format:c,formatPrefix:function(e,t){var r=c(((e=formatSpecifier$1(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(exponent$1(t)/3))),i=Math.pow(10,-n),a=prefixes$1[8+n/3];return function(e){return r(i*e)+a}}}}function defaultLocale$2(e){return locale$2=formatLocale$3(e),format$3=locale$2.format,formatPrefix$1=locale$2.formatPrefix,locale$2}function precisionFixed$1(e){return Math.max(0,-exponent$1(Math.abs(e)))}function precisionPrefix$1(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent$1(t)/3)))-exponent$1(Math.abs(e)))}function precisionRound$1(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,exponent$1(t)-exponent$1(e))+1}function initRange(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function constants$N(e){return function(){return e}}function number$1(e){return+e}defaultLocale$2({thousands:",",grouping:[3],currency:["$",""]});var unit=[0,1];function identity$6(e){return e}function normalize(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:constants$N(isNaN(t)?NaN:.5)}function clamper(e,t){var r;return e>t&&(r=e,e=t,t=r),function(r){return Math.max(e,Math.min(t,r))}}function bimap(e,t,r){var n=e[0],i=e[1],a=t[0],o=t[1];return i<n?(n=normalize(i,n),a=r(o,a)):(n=normalize(n,i),a=r(a,o)),function(e){return a(n(e))}}function polymap(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),a=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)i[o]=normalize(e[o],e[o+1]),a[o]=r(t[o],t[o+1]);return function(t){var r=bisect(e,t,1,n)-1;return a[r](i[r](t))}}function copy$1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function transformer(){var e,t,r,n,i,a,o=unit,s=unit,l=interpolate$1,c=identity$6;function u(){var e=Math.min(o.length,s.length);return c!==identity$6&&(c=clamper(o[0],o[e-1])),n=e>2?polymap:bimap,i=a=null,d}function d(t){return null==t||isNaN(t=+t)?r:(i||(i=n(o.map(e),s,l)))(e(c(t)))}return d.invert=function(r){return c(t((a||(a=n(s,o.map(e),interpolateNumber)))(r)))},d.domain=function(e){return arguments.length?(o=Array.from(e,number$1),u()):o.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),l=interpolateRound,u()},d.clamp=function(e){return arguments.length?(c=!!e||identity$6,u()):c!==identity$6},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(r=e,d):r},function(r,n){return e=r,t=n,u()}}function continuous(){return transformer()(identity$6,identity$6)}function tickFormat(e,t,r,n){var i,a=tickStep(e,t,r);switch((n=formatSpecifier$1(null==n?",f":n)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(i=precisionPrefix$1(a,o))||(n.precision=i),formatPrefix$1(n,o);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(i=precisionRound$1(a,Math.max(Math.abs(e),Math.abs(t))))||(n.precision=i-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(i=precisionFixed$1(a))||(n.precision=i-2*("%"===n.type))}return format$3(n)}function linearish(e){var t=e.domain;return e.ticks=function(e){var r=t();return ticks$1(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return tickFormat(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,i,a=t(),o=0,s=a.length-1,l=a[o],c=a[s],u=10;for(c<l&&(i=l,l=c,c=i,i=o,o=s,s=i);u-- >0;){if((i=tickIncrement$1(l,c,r))===n)return a[o]=l,a[s]=c,t(a);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}n=i}return e},e}function linear(){var e=continuous();return e.copy=function(){return copy$1(e,linear())},initRange.apply(e,arguments),linearish(e)}function colors(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(6*n,6*++n);return r}var Set1=colors("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999");function constant(e){return function(){return e}}const abs=Math.abs,atan2$1=Math.atan2,cos$1=Math.cos,max=Math.max,min=Math.min,sin$1=Math.sin,sqrt=Math.sqrt,epsilon$3=1e-12,pi=Math.PI,halfPi=pi/2,tau=2*pi;function acos(e){return e>1?0:e<-1?pi:Math.acos(e)}function asin(e){return e>=1?halfPi:e<=-1?-halfPi:Math.asin(e)}function arcInnerRadius(e){return e.innerRadius}function arcOuterRadius(e){return e.outerRadius}function arcStartAngle(e){return e.startAngle}function arcEndAngle(e){return e.endAngle}function arcPadAngle(e){return e&&e.padAngle}function intersect(e,t,r,n,i,a,o,s){var l=r-e,c=n-t,u=o-i,d=s-a,h=d*l-u*c;if(!(h*h<1e-12))return[e+(h=(u*(t-a)-d*(e-i))/h)*l,t+h*c]}function cornerTangents(e,t,r,n,i,a,o){var s=e-r,l=t-n,c=(o?a:-a)/sqrt(s*s+l*l),u=c*l,d=-c*s,h=e+u,g=t+d,p=r+u,f=n+d,m=(h+p)/2,y=(g+f)/2,b=p-h,v=f-g,x=b*b+v*v,B=i-a,I=h*f-p*g,F=(v<0?-1:1)*sqrt(max(0,B*B*x-I*I)),A=(I*v-b*F)/x,C=(-I*b-v*F)/x,w=(I*v+b*F)/x,Q=(-I*b+v*F)/x,U=A-m,S=C-y,E=w-m,L=Q-y;return U*U+S*S>E*E+L*L&&(A=w,C=Q),{cx:A,cy:C,x01:-u,y01:-d,x11:A*(i/B-1),y11:C*(i/B-1)}}function arc(){var e=arcInnerRadius,t=arcOuterRadius,r=constant(0),n=null,i=arcStartAngle,a=arcEndAngle,o=arcPadAngle,s=null;function l(){var l,c,u=+e.apply(this,arguments),d=+t.apply(this,arguments),h=i.apply(this,arguments)-halfPi,g=a.apply(this,arguments)-halfPi,p=abs(g-h),f=g>h;if(s||(s=l=path()),d<u&&(c=d,d=u,u=c),d>1e-12)if(p>tau-1e-12)s.moveTo(d*cos$1(h),d*sin$1(h)),s.arc(0,0,d,h,g,!f),u>1e-12&&(s.moveTo(u*cos$1(g),u*sin$1(g)),s.arc(0,0,u,g,h,f));else{var m,y,b=h,v=g,x=h,B=g,I=p,F=p,A=o.apply(this,arguments)/2,C=A>1e-12&&(n?+n.apply(this,arguments):sqrt(u*u+d*d)),w=min(abs(d-u)/2,+r.apply(this,arguments)),Q=w,U=w;if(C>1e-12){var S=asin(C/u*sin$1(A)),E=asin(C/d*sin$1(A));(I-=2*S)>1e-12?(x+=S*=f?1:-1,B-=S):(I=0,x=B=(h+g)/2),(F-=2*E)>1e-12?(b+=E*=f?1:-1,v-=E):(F=0,b=v=(h+g)/2)}var L=d*cos$1(b),_=d*sin$1(b),T=u*cos$1(B),R=u*sin$1(B);if(w>1e-12){var $,k=d*cos$1(v),N=d*sin$1(v),G=u*cos$1(x),M=u*sin$1(x);if(p<pi&&($=intersect(L,_,G,M,k,N,T,R))){var D=L-$[0],V=_-$[1],H=k-$[0],X=N-$[1],O=1/sin$1(acos((D*H+V*X)/(sqrt(D*D+V*V)*sqrt(H*H+X*X)))/2),Z=sqrt($[0]*$[0]+$[1]*$[1]);Q=min(w,(u-Z)/(O-1)),U=min(w,(d-Z)/(O+1))}}F>1e-12?U>1e-12?(m=cornerTangents(G,M,L,_,d,U,f),y=cornerTangents(k,N,T,R,d,U,f),s.moveTo(m.cx+m.x01,m.cy+m.y01),U<w?s.arc(m.cx,m.cy,U,atan2$1(m.y01,m.x01),atan2$1(y.y01,y.x01),!f):(s.arc(m.cx,m.cy,U,atan2$1(m.y01,m.x01),atan2$1(m.y11,m.x11),!f),s.arc(0,0,d,atan2$1(m.cy+m.y11,m.cx+m.x11),atan2$1(y.cy+y.y11,y.cx+y.x11),!f),s.arc(y.cx,y.cy,U,atan2$1(y.y11,y.x11),atan2$1(y.y01,y.x01),!f))):(s.moveTo(L,_),s.arc(0,0,d,b,v,!f)):s.moveTo(L,_),u>1e-12&&I>1e-12?Q>1e-12?(m=cornerTangents(T,R,k,N,u,-Q,f),y=cornerTangents(L,_,G,M,u,-Q,f),s.lineTo(m.cx+m.x01,m.cy+m.y01),Q<w?s.arc(m.cx,m.cy,Q,atan2$1(m.y01,m.x01),atan2$1(y.y01,y.x01),!f):(s.arc(m.cx,m.cy,Q,atan2$1(m.y01,m.x01),atan2$1(m.y11,m.x11),!f),s.arc(0,0,u,atan2$1(m.cy+m.y11,m.cx+m.x11),atan2$1(y.cy+y.y11,y.cx+y.x11),f),s.arc(y.cx,y.cy,Q,atan2$1(y.y11,y.x11),atan2$1(y.y01,y.x01),!f))):s.arc(0,0,u,B,x,f):s.lineTo(T,R)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var r=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,n=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-pi/2;return[cos$1(n)*r,sin$1(n)*r]},l.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:constant(+t),l):e},l.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:constant(+e),l):t},l.cornerRadius=function(e){return arguments.length?(r="function"==typeof e?e:constant(+e),l):r},l.padRadius=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:constant(+e),l):n},l.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:constant(+e),l):i},l.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:constant(+e),l):a},l.padAngle=function(e){return arguments.length?(o="function"==typeof e?e:constant(+e),l):o},l.context=function(e){return arguments.length?(s=null==e?null:e,l):s},l}function array$1(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Linear(e){this._context=e}function curveLinear(e){return new Linear(e)}function x$1(e){return e[0]}function y(e){return e[1]}function line(e,t){var r=constant(!0),n=null,i=curveLinear,a=null;function o(o){var s,l,c,u=(o=array$1(o)).length,d=!1;for(null==n&&(a=i(c=path())),s=0;s<=u;++s)!(s<u&&r(l=o[s],s,o))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+e(l,s,o),+t(l,s,o));if(c)return a=null,c+""||null}return e="function"==typeof e?e:void 0===e?x$1:constant(e),t="function"==typeof t?t:void 0===t?y:constant(t),o.x=function(t){return arguments.length?(e="function"==typeof t?t:constant(+t),o):e},o.y=function(e){return arguments.length?(t="function"==typeof e?e:constant(+e),o):t},o.defined=function(e){return arguments.length?(r="function"==typeof e?e:constant(!!e),o):r},o.curve=function(e){return arguments.length?(i=e,null!=n&&(a=i(n)),o):i},o.context=function(e){return arguments.length?(null==e?n=a=null:a=i(n=e),o):n},o}function descending(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function identity$5(e){return e}function pie(){var e=identity$5,t=descending,r=null,n=constant(0),i=constant(tau),a=constant(0);function o(o){var s,l,c,u,d,h=(o=array$1(o)).length,g=0,p=new Array(h),f=new Array(h),m=+n.apply(this,arguments),y=Math.min(tau,Math.max(-tau,i.apply(this,arguments)-m)),b=Math.min(Math.abs(y)/h,a.apply(this,arguments)),v=b*(y<0?-1:1);for(s=0;s<h;++s)(d=f[p[s]=s]=+e(o[s],s,o))>0&&(g+=d);for(null!=t?p.sort((function(e,r){return t(f[e],f[r])})):null!=r&&p.sort((function(e,t){return r(o[e],o[t])})),s=0,c=g?(y-h*v)/g:0;s<h;++s,m=u)l=p[s],u=m+((d=f[l])>0?d*c:0)+v,f[l]={data:o[l],index:s,value:d,startAngle:m,endAngle:u,padAngle:b};return f}return o.value=function(t){return arguments.length?(e="function"==typeof t?t:constant(+t),o):e},o.sortValues=function(e){return arguments.length?(t=e,r=null,o):t},o.sort=function(e){return arguments.length?(r=e,t=null,o):r},o.startAngle=function(e){return arguments.length?(n="function"==typeof e?e:constant(+e),o):n},o.endAngle=function(e){return arguments.length?(i="function"==typeof e?e:constant(+e),o):i},o.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:constant(+e),o):a},o}function Transform(e,t,r){this.k=e,this.x=t,this.y=r}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},Transform.prototype={constructor:Transform,scale:function(e){return 1===e?this:new Transform(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Transform(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},Transform.prototype;class DecidablesElement extends s$1{getComputedStyleValue(e){return getComputedStyle(this).getPropertyValue(e).trim()}firstUpdated(e){super.firstUpdated(e),select$5(this.renderRoot.host).classed("keyboard",!0).on("mousemove.keyboard touchstart.keyboard",(e=>{select$5(e.currentTarget.renderRoot.host).classed("keyboard",!1).on("mousemove.keyboard touchstart.keyboard",null)})).on("keydown.keyboard",(e=>{select$5(e.currentTarget.renderRoot.host).classed("keyboard",!0).on("keydown.keyboard mousemove.keyboard touchstart.keyboard",null)}))}static get greys(){const e="#999999",t={white:"#ffffff"};return t.light75=interpolateRgb(e,"#ffffff")(.75),t.light50=interpolateRgb(e,"#ffffff")(.5),t.light25=interpolateRgb(e,"#ffffff")(.25),t.grey=e,t.dark25=interpolateRgb(e,"#000000")(.25),t.dark50=interpolateRgb(e,"#000000")(.5),t.dark75=interpolateRgb(e,"#000000")(.75),t.black="#000000",t}static get shadows(){return{elevations:[0,2,4,8,16],baselineColor:"#000000",baselineColorString:"0, 0, 0",inverseBaselineColor:"#FFFFFF",inverseBaselineColorString:"255, 255, 255",opacityUmbra:.2,opacityPenumbra:.14,opacityAmbient:.12,opacityBoost:.2,mapUmbra:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:3,b:1,s:-2},4:{x:0,y:2,b:4,s:-1},8:{x:0,y:5,b:5,s:-3},16:{x:0,y:8,b:10,s:-5}},mapPenumbra:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:2,b:2,s:0},4:{x:0,y:4,b:5,s:0},8:{x:0,y:8,b:10,s:1},16:{x:0,y:16,b:24,s:2}},mapAmbient:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:1,b:5,s:0},4:{x:0,y:1,b:10,s:0},8:{x:0,y:3,b:14,s:2},16:{x:0,y:6,b:30,s:5}}}}static cssBoxShadow(e,t=!1,r=!1){const n=this.shadows.opacityUmbra+this.shadows.opacityBoost,i=this.shadows.opacityPenumbra+this.shadows.opacityBoost,a=this.shadows.opacityAmbient+this.shadows.opacityBoost,o=r?`rgba(${this.shadows.inverseBaselineColorString}, ${n})`:`rgba(${this.shadows.baselineColorString}, ${n})`,s=r?`rgba(${this.shadows.inverseBaselineColorString}, ${i})`:`rgba(${this.shadows.baselineColorString}, ${i})`,l=r?`rgba(${this.shadows.inverseBaselineColorString}, ${a})`:`rgba(${this.shadows.baselineColorString}, ${a})`,c=this.shadows.mapUmbra[e],u=this.shadows.mapPenumbra[e],d=this.shadows.mapAmbient[e];return`${t?`${-c.y}px ${c.y/2}px ${c.b}px ${c.s}px`:`${c.y/2}px ${c.y}px ${c.b}px ${c.s}px`} ${o}, ${t?`${-u.y}px ${u.y/2}px ${u.b}px ${u.s}px`:`${u.y/2}px ${u.y}px ${u.b}px ${u.s}px`} ${s}, ${t?`${-d.y}px ${d.y/2}px ${d.b}px ${d.s}px`:`${d.y/2}px ${d.y}px ${d.b}px ${d.s}px`} ${l}`}static get svgFilters(){const e=DecidablesElement.shadows,t=e.elevations.map((t=>b$2`
        <filter id=${`shadow-${t}`} x="-250%" y="-250%" width="600%" height="600%">
          <feComponentTransfer in="SourceAlpha" result="solid">
            <feFuncA  type="table" tableValues="0 1 1"/>
          </feComponentTransfer>
          <feOffset in="solid" result="offU" dx=${e.mapUmbra[t].y/2} dy=${e.mapUmbra[t].y} />
          <feOffset in="solid" result="offP" dx=${e.mapPenumbra[t].y/2} dy=${e.mapPenumbra[t].y} />
          <feOffset in="solid" result="offA" dx=${e.mapAmbient[t].y/2} dy=${e.mapAmbient[t].y} />
          ${0===e.mapUmbra[t].s?b$2``:b$2`<feMorphology in="offU" result="spreadU" operator=${e.mapUmbra[t].s>0?"dilate":"erode"} radius=${Math.abs(e.mapUmbra[t].s)} />`}
          ${0===e.mapPenumbra[t].s?b$2``:b$2`<feMorphology in="offP" result="spreadP" operator=${e.mapPenumbra[t].s>0?"dilate":"erode"} radius=${Math.abs(e.mapPenumbra[t].s)} />`}
          ${0===e.mapAmbient[t].s?b$2``:b$2`<feMorphology in="offA" result="spreadA" operator=${e.mapAmbient[t].s>0?"dilate":"erode"} radius=${Math.abs(e.mapAmbient[t].s)} />`}
          <feGaussianBlur in=${0===e.mapUmbra[t].s?"offU":"spreadU"} result="blurU" stdDeviation=${e.mapUmbra[t].b/2} />
          <feGaussianBlur in=${0===e.mapPenumbra[t].s?"offP":"spreadP"} result="blurP" stdDeviation=${e.mapPenumbra[t].b/2} />
          <feGaussianBlur in=${0===e.mapAmbient[t].s?"offA":"spreadA"} result="blurA" stdDeviation=${e.mapAmbient[t].b/2} />
          <feFlood in="SourceGraphic" result="opU" flood-color=${e.baselineColor} flood-opacity=${e.opacityUmbra+e.opacityBoost} />
          <feFlood in="SourceGraphic" result="opP" flood-color=${e.baselineColor} flood-opacity=${e.opacityPenumbra+e.opacityBoost} />
          <feFlood in="SourceGraphic" result="opA" flood-color=${e.baselineColor} flood-opacity=${e.opacityAmbient+e.opacityBoost} />
          <feComposite in="opU" in2="blurU" result="shU" operator="in" />
          <feComposite in="opP" in2="blurP" result="shP" operator="in" />
          <feComposite in="opA" in2="blurA" result="shA" operator="in" />
          <feMorphology in="solid" result="smaller" operator="erode" radius="1" />
          <feComposite in="shU" in2="smaller" result="finalU" operator="out" />
          <feComposite in="shP" in2="smaller" result="finalP" operator="out" />
          <feComposite in="shA" in2="smaller" result="finalA" operator="out" />
          <feMerge>
            <feMergeNode in="finalU" />
            <feMergeNode in="finalP" />
            <feMergeNode in="finalA" />
            <feMergeNode in="SourceGraphic" />
          </feMerge>
        </filter>`));return b$2`
      <svg class="defs">
        <defs>
          ${t}
        </defs>
      </svg>
    `}static get styles(){return r$5`
      :host {
        ---shadow-0: var(--shadow-0, ${o$4(this.cssBoxShadow(0))});
        ---shadow-2: var(--shadow-2, ${o$4(this.cssBoxShadow(2))});
        ---shadow-4: var(--shadow-4, ${o$4(this.cssBoxShadow(4))});
        ---shadow-8: var(--shadow-8, ${o$4(this.cssBoxShadow(8))});

        ---color-background: var(--color-background, ${o$4(this.greys.white)});
        ---color-border: var(--color-border, ${o$4(this.greys.light75)});
        ---color-text: var(--color-text, ${o$4(this.greys.dark75)});
        ---color-text-inverse: var(--color-text-inverse, ${o$4(this.greys.white)});
        ---color-link: var(--color-link, ${o$4(this.greys.dark25)});
        ---color-element-background: var(--color-element-background, ${o$4(this.greys.light75)});
        ---color-element-disabled: var(--color-element-disabled, ${o$4(this.greys.light50)});
        ---color-element-enabled: var(--color-element-enabled, ${o$4(this.greys.dark25)});
        ---color-element-selected: var(--color-element-selected, ${o$4(this.greys.grey)});
        ---color-element-border: var(--color-element-border, ${o$4(this.greys.dark50)});
        ---color-element-emphasis: var(--color-element-emphasis, ${o$4(this.greys.dark75)});

        ---font-family-base: var(--font-family-base, "Source Sans", sans-serif);
        ---font-family-math: var(--font-family-math, "Source Serif", serif);

        ---border: var(--border, 1px solid var(---color-border));
        ---border-radius: var(--border-radius, 0.25rem);
        ---transition-duration: var(--transition-duration, 500ms);

        font-family: var(---font-family-base);
      }

      :host,
      :host *,
      :host *::before,
      :host *::after {
        box-sizing: border-box;
      }

      .math-greek {
        font-family: var(---font-family-math);
        font-style: normal;
      }

      .math-num {
        font-family: var(---font-family-base);
        font-style: normal;
      }

      .math-var {
        font-family: var(---font-family-math);
        font-style: italic;
      }

      .defs {
        display: block;

        width: 0;
        height: 0;
      }
    `}}class DecidablesButton extends DecidablesElement{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}constructor(){super(),this.disabled=!1}static get styles(){return[super.styles,r$5`
        :host {
          margin: 0.25rem;
        }

        button {
          width: 100%;
          height: 100%;
          padding: 0.375rem 0.75rem;

          font-family: var(---font-family-base);
          font-size: 1.125rem;
          line-height: 1.5;
          color: var(---color-text-inverse);

          border: 0;
          border-radius: var(---border-radius);
          outline: none;
        }

        button:disabled {
          background-color: var(--decidables-button-background-color, var(---color-element-disabled));
          outline: none;
          box-shadow: none;
        }

        button:enabled {
          cursor: pointer;

          background-color: var(--decidables-button-background-color, var(---color-element-enabled));
          outline: none;
          box-shadow: var(---shadow-2);
        }

        button:enabled:hover {
          outline: none;
          box-shadow: var(---shadow-4);
        }

        button:enabled:active {
          outline: none;
          box-shadow: var(---shadow-8);
        }

        :host(.keyboard) button:enabled:focus {
          outline: none;
          box-shadow: var(---shadow-4);
        }

        :host(.keyboard) button:enabled:focus:active {
          outline: none;
          box-shadow: var(---shadow-8);
        }
      `]}render(){return x$2`
      <button ?disabled=${this.disabled}>
        <slot></slot>
      </button>
    `}}customElements.define("decidables-button",DecidablesButton);
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const l$2=e=>null!=e?e:A$2;class DecidablesSlider extends DecidablesElement{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0},max:{attribute:"max",type:Number,reflect:!0},min:{attribute:"min",type:Number,reflect:!0},step:{attribute:"step",type:Number,reflect:!0},value:{attribute:"value",type:Number,reflect:!0}}}constructor(){super(),this.disabled=!1,this.max=void 0,this.min=void 0,this.step=void 0,this.value=void 0}changed(e){this.value=e.target.value,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}inputted(e){this.value=e.target.value}static get styles(){return[super.styles,r$5`
        :host {
          ---shadow-2-rotate: var(--shadow-2-rotate, ${o$4(this.cssBoxShadow(2,!0,!1))});
          ---shadow-4-rotate: var(--shadow-4-rotate, ${o$4(this.cssBoxShadow(4,!0,!1))});
          ---shadow-8-rotate: var(--shadow-8-rotate, ${o$4(this.cssBoxShadow(8,!0,!1))});

          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;
        }

        label {
          margin: 0.25rem 0.25rem 0;
        }

        .range {
          display: inline-block;

          width: 3.5rem;
          height: 4.75rem;
          margin: 0 0.25rem 0.25rem;
        }

        decidables-spinner {
          --decidables-spinner-input-width: 3.5rem;

          margin: 0 0.25rem 0.25rem;
        }

        /* Adapted from http://danielstern.ca/range.css/#/ */
        /* Overall */
        input[type=range] {
          width: 4.75rem;
          height: 3.5rem;
          padding: 0;
          margin: 0;

          background-color: unset;

          transform: rotate(-90deg);
          transform-origin: 2.375rem 2.375rem;

          /* stylelint-disable-next-line property-no-vendor-prefix */
          -webkit-appearance: none;
        }

        input[type=range]:enabled {
          cursor: ns-resize;
        }

        input[type=range]:focus {
          outline: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-tooltip {
          display: none;
        }

        /* Track */
        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-webkit-slider-runnable-track {
          width: 100%;
          height: 4px;

          background: var(---color-element-disabled);
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        input[type=range]:focus::-webkit-slider-runnable-track {
          background: var(---color-element-disabled);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-moz-range-track {
          width: 100%;
          height: 4px;

          background: var(---color-element-disabled);
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-track {
          width: 100%;
          height: 4px;

          color: transparent;

          background: transparent;
          border-color: transparent;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-fill-lower {
          background: #cccccc;
          /* background: var(---color-element-disabled); */
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-fill-upper {
          background: #cccccc;
          /* background: var(---color-element-disabled); */
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:focus::-ms-fill-lower {
          background: var(---color-element-disabled);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:focus::-ms-fill-upper {
          background: var(---color-element-disabled);
        }

        /* Thumb */
        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-webkit-slider-thumb {
          width: 10px;
          height: 20px;
          margin-top: -8px;

          border: 0;
          border-radius: 4px;

          /* stylelint-disable-next-line property-no-vendor-prefix */
          -webkit-appearance: none;
        }

        input[type=range]:disabled::-webkit-slider-thumb {
          background: var(---color-element-disabled);
          box-shadow: none;
        }

        input[type=range]:enabled::-webkit-slider-thumb {
          background: var(---color-element-enabled);
          box-shadow: var(---shadow-2-rotate);
        }

        input[type=range]:enabled:hover::-webkit-slider-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        input[type=range]:enabled:active::-webkit-slider-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus::-webkit-slider-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        :host(.keyboard) input[type=range]:focus:active::-webkit-slider-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-moz-range-thumb {
          width: 10px;
          height: 20px;

          border: 0;
          border-radius: 4px;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:disabled::-moz-range-thumb {
          background: var(---color-element-disabled);
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled::-moz-range-thumb {
          background: var(---color-element-enabled);
          box-shadow: var(---shadow-2-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:hover::-moz-range-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:active::-moz-range-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus::-moz-range-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus:active::-moz-range-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-thumb {
          width: 10px;
          height: 20px;
          margin-top: 0;

          background: #999999;
          /* background: var(---color-element-enabled); */
          border: 0;
          border-radius: 4px;
          box-shadow: var(---shadow-2-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:disabled::-ms-thumb {
          background: var(---color-element-disabled);
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled::-ms-thumb {
          background: var(---color-element-enabled);
          box-shadow: var(---shadow-2-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:hover::-ms-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:active::-ms-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        :host(.keyboard) input[type=range]:enabled:focus::-ms-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus:active::-ms-thumb {
          box-shadow: var(---shadow-8-rotate);
        }
      `]}render(){return x$2`
      <label for="slider">
        <slot></slot>
      </label>
      <div class="range">
        <input type="range" id="slider" min=${l$2(this.min)} max=${l$2(this.max)} step=${l$2(this.step)} .value=${this.value} @change=${this.changed.bind(this)} @input=${this.inputted.bind(this)}>
      </div>
      <decidables-spinner min=${l$2(this.min)} max=${l$2(this.max)} step=${l$2(this.step)} .value=${this.value} @input=${this.inputted.bind(this)}></decidables-spinner>
    `}}customElements.define("decidables-slider",DecidablesSlider);class DecidablesSpinner extends DecidablesElement{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0},max:{attribute:"max",type:Number,reflect:!0},min:{attribute:"min",type:Number,reflect:!0},step:{attribute:"step",type:Number,reflect:!0},value:{attribute:"value",type:Number,reflect:!0}}}constructor(){super(),this.disabled=!1,this.max=void 0,this.min=void 0,this.step=void 0,this.value=void 0}inputted(e){this.value=e.target.value}static get styles(){return[super.styles,r$5`
        :host {
          ---decidables-spinner-font-size: var(--decidables-spinner-font-size, 1.125rem);
          ---decidables-spinner-input-width: var(--decidables-spinner-input-width, 4rem);
          ---decidables-spinner-prefix: var(--decidables-spinner-prefix, "");

          display: block;
        }

        label {
          position: relative;
          display: flex;

          flex-direction: column;

          align-items: center;

          margin: 0;

          font-size: 0.75rem;
        }

        label::before {
          position: absolute;
          bottom: 1px;
          left: calc(50% - var(---decidables-spinner-input-width) / 2 + 0.25rem);

          font-size: var(---decidables-spinner-font-size);
          line-height: normal;

          content: var(---decidables-spinner-prefix);
        }

        input[type=number] {
          width: var(---decidables-spinner-input-width);

          font-family: var(---font-family-base);
          font-size: var(---decidables-spinner-font-size);
          color: inherit;
          text-align: right;

          background: none;
          border: 0;
          border-radius: 0;
          outline: none;
          box-shadow: var(---shadow-2);

          -webkit-appearance: none; /* stylelint-disable-line property-no-vendor-prefix */
        }

        input[type=number]:hover {
          box-shadow: var(---shadow-4);
        }

        input[type=number]:focus,
        input[type=number]:active {
          box-shadow: var(---shadow-8);
        }

        input[type=number]:disabled {
          color: var(---color-text);

          border: 0;
          box-shadow: none;

          /* HACK: Use correct text color in Safari */
          -webkit-opacity: 1;
          /* HACK: Hide spinners in disabled input for Firefox and Safari */
          -moz-appearance: textfield; /* stylelint-disable-line property-no-vendor-prefix */
          /* HACK: Use correct text color in Safari */
          -webkit-text-fill-color: var(---color-text);
        }

        /* HACK: Hide spinners in disabled input for Firefox and Safari */
        input[type=number]:disabled::-webkit-outer-spin-button,
        input[type=number]:disabled::-webkit-inner-spin-button {
          margin: 0;
          -webkit-appearance: none; /* stylelint-disable-line property-no-vendor-prefix */
        }
      `]}render(){return x$2`
      <label>
        <slot></slot>
        <input ?disabled=${this.disabled} type="number" min=${l$2(this.min)} max=${l$2(this.max)} step=${l$2(this.step)} .value=${this.value} @input=${this.inputted.bind(this)}>
      </label>
    `}}customElements.define("decidables-spinner",DecidablesSpinner);class DecidablesSwitch extends DecidablesElement{static get properties(){return{checked:{attribute:"checked",type:Boolean,reflect:!0},disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}constructor(){super(),this.checked=!1,this.disabled=!1}changed(e){this.checked=e.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked},bubbles:!0}))}static get styles(){return[super.styles,r$5`
        :host {
          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;
        }

        /* Adapted from https://codepen.io/guuslieben/pen/YyPRVP */
        input[type=checkbox] {
          /* visuallyhidden: https://github.com/h5bp/html5-boilerplate/blob/master/dist/doc/css.md */
          position: absolute;

          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0 0 0 0);

          white-space: nowrap;

          border: 0;
          clip-path: inset(100%); /* May cause a performance issue: https://github.com/h5bp/html5-boilerplate/issues/2021 */
        }

        input[type=checkbox] + label {
          order: 1;

          margin: 0 0.25rem 0.25rem;

          font-weight: 400;
        }

        input[type=checkbox] + label + label {
          position: relative;

          min-width: 24px;
          padding: 0 0 36px;
          margin: 0.25rem 0.25rem 0;

          font-weight: 400;

          outline: none;
        }

        input[type=checkbox] + label + label::before,
        input[type=checkbox] + label + label::after {
          position: absolute;

          left: 50%;

          margin: 0;

          content: "";

          outline: 0;

          transition: all var(---transition-duration) ease;
          transform: translate(-50%, 0);
        }

        input[type=checkbox] + label + label::before {
          bottom: 1px;

          width: 8px;
          height: 34px;

          background-color: var(---color-element-disabled);
          border-radius: 4px;
        }

        input[type=checkbox] + label + label::after {
          bottom: 0;

          width: 18px;
          height: 18px;

          background-color: var(---color-element-enabled);
          border-radius: 50%;
          box-shadow: var(---shadow-2);
        }

        input[type=checkbox]:checked + label + label::after {
          transform: translate(-50%, -100%);
        }

        input[type=checkbox]:disabled + label + label::after {
          background-color: var(---color-element-disabled);
          box-shadow: none;
        }

        input[type=checkbox]:enabled + label,
        input[type=checkbox]:enabled + label + label {
          cursor: pointer;
        }

        input[type=checkbox]:enabled + label:hover + label::after,
        input[type=checkbox]:enabled + label + label:hover::after {
          box-shadow: var(---shadow-4);
        }

        input[type=checkbox]:enabled + label:active + label::after,
        input[type=checkbox]:enabled + label + label:active::after {
          box-shadow: var(---shadow-8);
        }

        /* stylelint-disable-next-line selector-max-compound-selectors */
        :host(.keyboard) input[type=checkbox]:enabled:focus + label + label::after {
          box-shadow: var(---shadow-4);
        }

        /* stylelint-disable-next-line selector-max-compound-selectors */
        :host(.keyboard) input[type=checkbox]:enabled:focus + label + label:active::after,
        :host(.keyboard) input[type=checkbox]:enabled:focus:active + label + label::after {
          box-shadow: var(---shadow-8);
        }
      `]}render(){return x$2`
      <input type="checkbox" id="switch" ?checked=${this.checked} ?disabled=${this.disabled} @change=${this.changed.bind(this)}>
      <label for="switch">
        <slot name="off-label"></slot>
      </label>
      <label for="switch">
        <slot></slot>
      </label>
    `}}customElements.define("decidables-switch",DecidablesSwitch);class DecidablesToggle extends DecidablesElement{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}constructor(){super(),this.disabled=!1}static get styles(){return[super.styles,r$5`
        fieldset {
          display: flex;

          flex-direction: column;

          align-items: stretch;
          justify-content: center;

          margin: 0.25rem;

          border: 0;
        }

        legend {
          text-align: center;
        }
      `]}render(){return x$2`
      <fieldset ?disabled=${this.disabled}>
        <legend><slot name="label"></slot></legend>
        <slot></slot>
      </fieldset>
    `}}customElements.define("decidables-toggle",DecidablesToggle);class DecidablesToggleOption extends DecidablesElement{static get properties(){return{checked:{attribute:"checked",type:Boolean,reflect:!0},disabled:{attribute:"disabled",type:Boolean,reflect:!0},name:{attribute:"name",type:String,reflect:!0},value:{attribute:"value",type:String,reflect:!0}}}constructor(){super(),this.checked=!1,this.disabled=!1,this.name=void 0,this.value=void 0}changed(e){this.checked=e.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked,value:this.value},bubbles:!0}))}static get styles(){return[super.styles,r$5`
        :host {
          display: flex;
        }

        input[type=radio] {
          /* visuallyhidden: https://github.com/h5bp/html5-boilerplate/blob/master/dist/doc/css.md */
          position: absolute;

          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0 0 0 0);

          white-space: nowrap;

          border: 0;
          clip-path: inset(100%); /* May cause a performance issue: https://github.com/h5bp/html5-boilerplate/issues/2021 */
        }

        input[type=radio] + label {
          width: 100%;
          padding: 0.375rem 0.75rem;

          font-family: var(---font-family-base);
          font-size: 1.125rem;
          line-height: 1.5;
          color: var(---color-text-inverse);
          text-align: center;

          cursor: pointer;

          background-color: var(---color-element-enabled);
          border: 0;
          border-radius: 0;
          outline: none;

          box-shadow: var(---shadow-2);
        }

        input[type=radio]:checked + label {
          background-color: var(---color-element-selected);
          outline: none;
          box-shadow: var(---shadow-2);
        }

        input[type=radio] + label:hover {
          z-index: 1;

          outline: none;
          box-shadow: var(---shadow-4);
        }

        input[type=radio] + label:active {
          z-index: 2;

          outline: none;
          box-shadow: var(---shadow-8);
        }

        :host(:first-of-type) input[type=radio] + label {
          border-top-left-radius: 0.25rem;
          border-top-right-radius: 0.25rem;
        }

        :host(:last-of-type) input[type=radio] + label {
          border-bottom-right-radius: 0.25rem;
          border-bottom-left-radius: 0.25rem;
        }

        :host(.keyboard) input[type=radio]:focus + label {
          z-index: 1;

          outline: none;
          box-shadow: var(---shadow-4);
        }

        :host(.keyboard) input[type=radio]:focus:checked + label {
          z-index: 1;

          background-color: var(---color-element-selected);
          outline: none;
          box-shadow: var(---shadow-4);
        }

        :host(.keyboard) input[type=radio]:focus + label:active {
          z-index: 2;

          outline: none;
          box-shadow: var(---shadow-8);
        }
      `]}render(){return x$2`
      <input type="radio" id="toggle-option" name=${this.name} value=${this.value} .checked=${this.checked} @change=${this.changed.bind(this)}>
      <label for="toggle-option">
        <slot></slot>
      </label>
    `}}customElements.define("decidables-toggle-option",DecidablesToggleOption);const DecidablesConverterArray={fromAttribute:e=>e.split(/\s+/).map((e=>Number.parseFloat(e))),toAttribute:e=>e.length?e.map((e=>e.toFixed(3))).join(" "):null};class ProspectableElement extends DecidablesElement{static get properties(){return{interactive:{attribute:"interactive",type:Boolean,reflect:!0}}}constructor(){super(),this.interactive=!1}static get colors(){return{x:Set1[0],a:Set1[4],l:Set1[5],v:Set1[7],p:Set1[1],g:Set1[2],w:Set1[3],u:Set1[6],chosen:Set1[8],better:"#4545d0",worse:"#f032e6",even:"#10dbc9",correct:"#ffffff",error:"#000000",nr:"#cccccc"}}static get lights(){return Object.keys(ProspectableElement.colors).reduce(((e,t)=>(e[t]=interpolateRgb(ProspectableElement.colors[t],"#ffffff")(.5),e)),{})}static get darks(){return Object.keys(ProspectableElement.colors).reduce(((e,t)=>(e[t]=interpolateRgb(ProspectableElement.colors[t],"#000000")(.5),e)),{})}static get styles(){return[super.styles,r$5`
        :host {
          ---color-x: var(--color-x, ${o$4(this.colors.x)});
          ---color-a: var(--color-a, ${o$4(this.colors.a)});
          ---color-l: var(--color-l, ${o$4(this.colors.l)});
          ---color-v: var(--color-v, ${o$4(this.colors.v)});
          ---color-p: var(--color-p, ${o$4(this.colors.p)});
          ---color-g: var(--color-g, ${o$4(this.colors.g)});
          ---color-w: var(--color-w, ${o$4(this.colors.w)});
          ---color-u: var(--color-u, ${o$4(this.colors.u)});
          ---color-chosen: var(--color-chosen, ${o$4(this.colors.chosen)});
          ---color-better: var(--color-better, ${o$4(this.colors.better)});
          ---color-worse: var(--color-worse, ${o$4(this.colors.worse)});
          ---color-even: var(--color-even, ${o$4(this.colors.even)});
          ---color-correct: var(--color-correct, ${o$4(this.colors.correct)});
          ---color-error: var(--color-error, ${o$4(this.colors.error)});
          ---color-nr: var(--color-nr, ${o$4(this.colors.nr)});

          ---color-x-light: var(--color-x-light, ${o$4(this.lights.x)});
          ---color-a-light: var(--color-a-light, ${o$4(this.lights.a)});
          ---color-l-light: var(--color-l-light, ${o$4(this.lights.l)});
          ---color-v-light: var(--color-v-light, ${o$4(this.lights.v)});
          ---color-p-light: var(--color-p-light, ${o$4(this.lights.p)});
          ---color-g-light: var(--color-g-light, ${o$4(this.lights.g)});
          ---color-w-light: var(--color-w-light, ${o$4(this.lights.w)});
          ---color-u-light: var(--color-u-light, ${o$4(this.lights.u)});
          ---color-chosen-light: var(--color-chosen-light, ${o$4(this.lights.chosen)});
          ---color-better-light: var(--color-better-light, ${o$4(this.lights.better)});
          ---color-worse-light: var(--color-worse-light, ${o$4(this.lights.worse)});
          ---color-even-light: var(--color-even-light, ${o$4(this.lights.even)});
          ---color-correct-light: var(--color-correct-light, ${o$4(this.lights.correct)});
          ---color-error-light: var(--color-error-light, ${o$4(this.lights.error)});
          ---color-nr-light: var(--color-nr-light, ${o$4(this.lights.nr)});

          ---color-x-dark: var(--color-x-dark, ${o$4(this.darks.x)});
          ---color-a-dark: var(--color-a-dark, ${o$4(this.darks.a)});
          ---color-l-dark: var(--color-l-dark, ${o$4(this.darks.l)});
          ---color-v-dark: var(--color-v-dark, ${o$4(this.darks.v)});
          ---color-p-dark: var(--color-p-dark, ${o$4(this.darks.p)});
          ---color-g-dark: var(--color-g-dark, ${o$4(this.darks.g)});
          ---color-w-dark: var(--color-w-dark, ${o$4(this.darks.w)});
          ---color-u-dark: var(--color-u-dark, ${o$4(this.darks.u)});
          ---color-chosen-dark: var(--color-chosen-dark, ${o$4(this.darks.chosen)});
          ---color-better-dark: var(--color-better-dark, ${o$4(this.darks.better)});
          ---color-worse-dark: var(--color-worse-dark, ${o$4(this.darks.worse)});
          ---color-even-dark: var(--color-even-dark, ${o$4(this.darks.even)});
          ---color-correct-dark: var(--color-correct-dark, ${o$4(this.darks.correct)});
          ---color-error-dark: var(--color-error-dark, ${o$4(this.darks.error)});
          ---color-nr-dark: var(--color-nr-dark, ${o$4(this.darks.nr)});
        }
      `]}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var t$1;const i$2=globalThis.trustedTypes,s=i$2?i$2.createPolicy("lit-html",{createHTML:e=>e}):void 0,e$2=`lit$${(Math.random()+"").slice(9)}$`,o$1="?"+e$2,n$2=`<${o$1}>`,l$1=document,h$2=(e="")=>l$1.createComment(e),r$3=e=>null===e||"object"!=typeof e&&"function"!=typeof e,d$2=Array.isArray,u=e=>{var t;return d$2(e)||"function"==typeof(null===(t=e)||void 0===t?void 0:t[Symbol.iterator])},c=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,v=/-->/g,a$1=/>/g,f=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,_$2=/'/g,m=/"/g,g$1=/^(?:script|style|textarea)$/i,b$1=Symbol.for("lit-noChange"),w$1=Symbol.for("lit-nothing"),T=new WeakMap,A$1=l$1.createTreeWalker(l$1,129,null,!1),C=(e,t)=>{const r=e.length-1,n=[];let i,a=2===t?"<svg>":"",o=c;for(let t=0;t<r;t++){const r=e[t];let s,l,u=-1,d=0;for(;d<r.length&&(o.lastIndex=d,l=o.exec(r),null!==l);)d=o.lastIndex,o===c?"!--"===l[1]?o=v:void 0!==l[1]?o=a$1:void 0!==l[2]?(g$1.test(l[2])&&(i=RegExp("</"+l[2],"g")),o=f):void 0!==l[3]&&(o=f):o===f?">"===l[0]?(o=null!=i?i:c,u=-1):void 0===l[1]?u=-2:(u=o.lastIndex-l[2].length,s=l[1],o=void 0===l[3]?f:'"'===l[3]?m:_$2):o===m||o===_$2?o=f:o===v||o===a$1?o=c:(o=f,i=void 0);const h=o===f&&e[t+1].startsWith("/>")?" ":"";a+=o===c?r+n$2:u>=0?(n.push(s),r.slice(0,u)+"$lit$"+r.slice(u)+e$2+h):r+e$2+(-2===u?(n.push(void 0),t):h)}const l=a+(e[r]||"<?>")+(2===t?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==s?s.createHTML(l):l,n]};class E{constructor({strings:e,_$litType$:t},r){let n;this.parts=[];let i=0,a=0;const o=e.length-1,s=this.parts,[l,c]=C(e,t);if(this.el=E.createElement(l,r),A$1.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(n=A$1.nextNode())&&s.length<o;){if(1===n.nodeType){if(n.hasAttributes()){const e=[];for(const t of n.getAttributeNames())if(t.endsWith("$lit$")||t.startsWith(e$2)){const r=c[a++];if(e.push(t),void 0!==r){const e=n.getAttribute(r.toLowerCase()+"$lit$").split(e$2),t=/([.?@])?(.*)/.exec(r);s.push({type:1,index:i,name:t[2],strings:e,ctor:"."===t[1]?M:"?"===t[1]?H:"@"===t[1]?I:S$1})}else s.push({type:6,index:i})}for(const t of e)n.removeAttribute(t)}if(g$1.test(n.tagName)){const e=n.textContent.split(e$2),t=e.length-1;if(t>0){n.textContent=i$2?i$2.emptyScript:"";for(let r=0;r<t;r++)n.append(e[r],h$2()),A$1.nextNode(),s.push({type:2,index:++i});n.append(e[t],h$2())}}}else if(8===n.nodeType)if(n.data===o$1)s.push({type:2,index:i});else{let e=-1;for(;-1!==(e=n.data.indexOf(e$2,e+1));)s.push({type:7,index:i}),e+=e$2.length-1}i++}}static createElement(e,t){const r=l$1.createElement("template");return r.innerHTML=e,r}}function P(e,t,r=e,n){var i,a,o,s;if(t===b$1)return t;let l=void 0!==n?null===(i=r._$Cl)||void 0===i?void 0:i[n]:r._$Cu;const c=r$3(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(a=null==l?void 0:l._$AO)||void 0===a||a.call(l,!1),void 0===c?l=void 0:(l=new c(e),l._$AT(e,r,n)),void 0!==n?(null!==(o=(s=r)._$Cl)&&void 0!==o?o:s._$Cl=[])[n]=l:r._$Cu=l),void 0!==l&&(t=P(e,l._$AS(e,t.values),l,n)),t}class V{constructor(e,t){this.v=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(e){var t;const{el:{content:r},parts:n}=this._$AD,i=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:l$1).importNode(r,!0);A$1.currentNode=i;let a=A$1.nextNode(),o=0,s=0,l=n[0];for(;void 0!==l;){if(o===l.index){let t;2===l.type?t=new N(a,a.nextSibling,this,e):1===l.type?t=new l.ctor(a,l.name,l.strings,this,e):6===l.type&&(t=new L(a,this,e)),this.v.push(t),l=n[++s]}o!==(null==l?void 0:l.index)&&(a=A$1.nextNode(),o++)}return i}m(e){let t=0;for(const r of this.v)void 0!==r&&(void 0!==r.strings?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}}class N{constructor(e,t,r,n){var i;this.type=2,this._$AH=w$1,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=n,this._$Cg=null===(i=null==n?void 0:n.isConnected)||void 0===i||i}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cg}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=P(this,e,t),r$3(e)?e===w$1||null==e||""===e?(this._$AH!==w$1&&this._$AR(),this._$AH=w$1):e!==this._$AH&&e!==b$1&&this.$(e):void 0!==e._$litType$?this.T(e):void 0!==e.nodeType?this.S(e):u(e)?this.A(e):this.$(e)}M(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}S(e){this._$AH!==e&&(this._$AR(),this._$AH=this.M(e))}$(e){this._$AH!==w$1&&r$3(this._$AH)?this._$AA.nextSibling.data=e:this.S(l$1.createTextNode(e)),this._$AH=e}T(e){var t;const{values:r,_$litType$:n}=e,i="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=E.createElement(n.h,this.options)),n);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===i)this._$AH.m(r);else{const e=new V(i,this),t=e.p(this.options);e.m(r),this.S(t),this._$AH=e}}_$AC(e){let t=T.get(e.strings);return void 0===t&&T.set(e.strings,t=new E(e)),t}A(e){d$2(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let r,n=0;for(const i of e)n===t.length?t.push(r=new N(this.M(h$2()),this.M(h$2()),this,this.options)):r=t[n],r._$AI(i),n++;n<t.length&&(this._$AR(r&&r._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){var r;for(null===(r=this._$AP)||void 0===r||r.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cg=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}let S$1=class{constructor(e,t,r,n,i){this.type=1,this._$AH=w$1,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=i,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=w$1}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,r,n){const i=this.strings;let a=!1;if(void 0===i)e=P(this,e,t,0),a=!r$3(e)||e!==this._$AH&&e!==b$1,a&&(this._$AH=e);else{const n=e;let o,s;for(e=i[0],o=0;o<i.length-1;o++)s=P(this,n[r+o],t,o),s===b$1&&(s=this._$AH[o]),a||(a=!r$3(s)||s!==this._$AH[o]),s===w$1?e=w$1:e!==w$1&&(e+=(null!=s?s:"")+i[o+1]),this._$AH[o]=s}a&&!n&&this.k(e)}k(e){e===w$1?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}};class M extends S$1{constructor(){super(...arguments),this.type=3}k(e){this.element[this.name]=e===w$1?void 0:e}}const k=i$2?i$2.emptyScript:"";class H extends S$1{constructor(){super(...arguments),this.type=4}k(e){e&&e!==w$1?this.element.setAttribute(this.name,k):this.element.removeAttribute(this.name)}}class I extends S$1{constructor(e,t,r,n,i){super(e,t,r,n,i),this.type=5}_$AI(e,t=this){var r;if((e=null!==(r=P(this,e,t,0))&&void 0!==r?r:w$1)===b$1)return;const n=this._$AH,i=e===w$1&&n!==w$1||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,a=e!==w$1&&(n===w$1||i);i&&this.element.removeEventListener(this.name,this,n),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,r;"function"==typeof this._$AH?this._$AH.call(null!==(r=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==r?r:this.element,e):this._$AH.handleEvent(e)}}class L{constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){P(this,e)}}const z=window.litHtmlPolyfillSupport;null==z||z(E,N),(null!==(t$1=globalThis.litHtmlVersions)&&void 0!==t$1?t$1:globalThis.litHtmlVersions=[]).push("2.1.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const t={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e$1=e=>(...t)=>({_$litDirective$:e,values:t});let i$1=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,r){this._$Ct=e,this._$AM=t,this._$Ci=r}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const r$2=e=>void 0===e.strings
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,e=(t,r)=>{var n,i;const a=t._$AN;if(void 0===a)return!1;for(const t of a)null===(i=(n=t)._$AO)||void 0===i||i.call(n,r,!1),e(t,r);return!0},o=e=>{let t,r;do{if(void 0===(t=e._$AM))break;r=t._$AN,r.delete(e),e=t}while(0===(null==r?void 0:r.size))},n$1=e=>{for(let t;t=e._$AM;e=t){let r=t._$AN;if(void 0===r)t._$AN=r=new Set;else if(r.has(e))break;r.add(e),l(t)}};function r$1(e){void 0!==this._$AN?(o(this),this._$AM=e,n$1(this)):this._$AM=e}function h$1(t,r=!1,n=0){const i=this._$AH,a=this._$AN;if(void 0!==a&&0!==a.size)if(r)if(Array.isArray(i))for(let t=n;t<i.length;t++)e(i[t],!1),o(i[t]);else null!=i&&(e(i,!1),o(i));else e(this,t)}const l=e=>{var r,n,i,a;e.type==t.CHILD&&(null!==(r=(i=e)._$AP)&&void 0!==r||(i._$AP=h$1),null!==(n=(a=e)._$AQ)&&void 0!==n||(a._$AQ=r$1))};let d$1=class extends i$1{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,r){super._$AT(e,t,r),n$1(this),this.isConnected=e._$AU}_$AO(t,r=!0){var n,i;t!==this.isConnected&&(this.isConnected=t,t?null===(n=this.reconnected)||void 0===n||n.call(this):null===(i=this.disconnected)||void 0===i||i.call(this)),r&&(e(this,t),o(this))}setValue(e){if(r$2(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}};const i=new WeakMap;let h=0;const r=new Map,n=new WeakSet,a=()=>new Promise((e=>requestAnimationFrame(e))),d=[{transform:"translateX(-100%) scale(0)",opacity:0}],p=[{opacity:0},{opacity:1}],g=(e,t)=>{const r=e-t;return 0===r?void 0:r},w=(e,t)=>{const r=e/t;return 1===r?void 0:r},A={left:(e,t)=>{const r=g(e,t);return{value:r,transform:r&&`translateX(${r}px)`}},top:(e,t)=>{const r=g(e,t);return{value:r,transform:r&&`translateY(${r}px)`}},width:(e,t)=>{const r=w(e,t);return{value:r,transform:r&&`scaleX(${r})`}},height:(e,t)=>{const r=w(e,t);return{value:r,transform:r&&`scaleY(${r})`}}},b={duration:333,easing:"ease-in-out"},j=["left","top","width","height","opacity","color","background"],x=new WeakMap;class S extends d$1{constructor(e){if(super(e),this.t=null,this.i=null,this.o=!0,this.shouldLog=!1,e.type===t.CHILD)throw Error("The `animate` directive must be used in attribute position.");this.createFinished()}createFinished(){var e;null===(e=this.resolveFinished)||void 0===e||e.call(this),this.finished=new Promise((e=>{this.h=e}))}async resolveFinished(){var e;null===(e=this.h)||void 0===e||e.call(this),this.h=void 0}render(e){return w$1}getController(){return i.get(this.l)}isDisabled(){var e;return this.options.disabled||(null===(e=this.getController())||void 0===e?void 0:e.disabled)}update(e,[t]){var r;const n=void 0===this.l;return n&&(this.l=null===(r=e.options)||void 0===r?void 0:r.host,this.l.addController(this),this.element=e.element,x.set(this.element,this)),this.optionsOrCallback=t,(n||"function"!=typeof t)&&this.u(t),this.render(t)}u(e){var t,r;e=null!=e?e:{};const n=this.getController();void 0!==n&&((e={...n.defaultOptions,...e}).keyframeOptions={...n.defaultOptions.keyframeOptions,...e.keyframeOptions}),null!==(t=(r=e).properties)&&void 0!==t||(r.properties=j),this.options=e}v(){const e={},t=this.element.getBoundingClientRect(),r=getComputedStyle(this.element);return this.options.properties.forEach((n=>{var i;const a=null!==(i=t[n])&&void 0!==i?i:A[n]?void 0:r[n],o=Number(a);e[n]=isNaN(o)?a+"":o})),e}p(){let e,t=!0;return this.options.guard&&(e=this.options.guard(),t=((e,t)=>{if(Array.isArray(e)){if(Array.isArray(t)&&t.length===e.length&&e.every(((e,r)=>e===t[r])))return!1}else if(t===e)return!1;return!0})(e,this.m)),this.o=this.l.hasUpdated&&!this.isDisabled()&&!this.isAnimating()&&t&&this.element.isConnected,this.o&&(this.m=Array.isArray(e)?Array.from(e):e),this.o}hostUpdate(){var e;"function"==typeof this.optionsOrCallback&&this.u(this.optionsOrCallback()),this.p()&&(this.g=this.v(),this.t=null!==(e=this.t)&&void 0!==e?e:this.element.parentNode,this.i=this.element.nextSibling)}async hostUpdated(){if(!this.o||!this.element.isConnected||this.options.skipInitial&&!this.isHostRendered)return;let e;this.prepare(),await a;const t=this._(),n=this.A(this.options.keyframeOptions,t),i=this.v();if(void 0!==this.g){const{from:r,to:n}=this.O(this.g,i,t);this.log("measured",[this.g,i,r,n]),e=this.calculateKeyframes(r,n)}else{const n=r.get(this.options.inId);if(n){r.delete(this.options.inId);const{from:a,to:o}=this.O(n,i,t);e=this.calculateKeyframes(a,o),e=this.options.in?[{...this.options.in[0],...e[0]},...this.options.in.slice(1),e[1]]:e,h++,e.forEach((e=>e.zIndex=h))}else this.options.in&&(e=[...this.options.in,{}])}this.animate(e,n)}resetStyles(){var e;void 0!==this.P&&(this.element.setAttribute("style",null!==(e=this.P)&&void 0!==e?e:""),this.P=void 0)}commitStyles(){var e,t;this.P=this.element.getAttribute("style"),null===(e=this.webAnimation)||void 0===e||e.commitStyles(),null===(t=this.webAnimation)||void 0===t||t.cancel()}reconnected(){}async disconnected(){var e;if(!this.o)return;if(void 0!==this.options.id&&r.set(this.options.id,this.g),void 0===this.options.out)return;if(this.prepare(),await a(),null===(e=this.t)||void 0===e?void 0:e.isConnected){const e=this.i&&this.i.parentNode===this.t?this.i:null;if(this.t.insertBefore(this.element,e),this.options.stabilizeOut){const e=this.v();this.log("stabilizing out");const t=this.g.left-e.left,r=this.g.top-e.top;!("static"===getComputedStyle(this.element).position)||0===t&&0===r||(this.element.style.position="relative"),0!==t&&(this.element.style.left=t+"px"),0!==r&&(this.element.style.top=r+"px")}}const t=this.A(this.options.keyframeOptions);await this.animate(this.options.out,t),this.element.remove()}prepare(){this.createFinished()}start(){var e,t;null===(t=(e=this.options).onStart)||void 0===t||t.call(e,this)}didFinish(e){var t,r;e&&(null===(r=(t=this.options).onComplete)||void 0===r||r.call(t,this)),this.g=void 0,this.animatingProperties=void 0,this.frames=void 0,this.resolveFinished()}_(){const e=[];for(let t=this.element.parentNode;t;t=null==t?void 0:t.parentNode){const r=x.get(t);r&&!r.isDisabled()&&r&&e.push(r)}return e}get isHostRendered(){const e=n.has(this.l);return e||this.l.updateComplete.then((()=>{n.add(this.l)})),e}A(e,t=this._()){const r={...b};return t.forEach((e=>Object.assign(r,e.options.keyframeOptions))),Object.assign(r,e),r}O(e,t,r){e={...e},t={...t};const n=r.map((e=>e.animatingProperties)).filter((e=>void 0!==e));let i=1,a=1;return void 0!==n&&(n.forEach((e=>{e.width&&(i/=e.width),e.height&&(a/=e.height)})),void 0!==e.left&&void 0!==t.left&&(e.left=i*e.left,t.left=i*t.left),void 0!==e.top&&void 0!==t.top&&(e.top=a*e.top,t.top=a*t.top)),{from:e,to:t}}calculateKeyframes(e,t,r=!1){var n;const i={},a={};let o=!1;const s={};for(const r in t){const l=e[r],c=t[r];if(r in A){const e=A[r];if(void 0===l||void 0===c)continue;const t=e(l,c);void 0!==t.transform&&(s[r]=t.value,o=!0,i.transform=`${null!==(n=i.transform)&&void 0!==n?n:""} ${t.transform}`)}else l!==c&&void 0!==l&&void 0!==c&&(o=!0,i[r]=l,a[r]=c)}return i.transformOrigin=a.transformOrigin=r?"center center":"top left",this.animatingProperties=s,o?[i,a]:void 0}async animate(e,t=this.options.keyframeOptions){this.start(),this.frames=e;let r=!1;if(!this.isAnimating()&&!this.isDisabled()&&(this.options.onFrames&&(this.frames=e=this.options.onFrames(this),this.log("modified frames",e)),void 0!==e)){this.log("animate",[e,t]),r=!0,this.webAnimation=this.element.animate(e,t);const n=this.getController();null==n||n.add(this);try{await this.webAnimation.finished}catch(e){}null==n||n.remove(this)}return this.didFinish(r),r}isAnimating(){var e,t;return"running"===(null===(e=this.webAnimation)||void 0===e?void 0:e.playState)||(null===(t=this.webAnimation)||void 0===t?void 0:t.pending)}log(e,t){this.shouldLog&&!this.isDisabled()&&console.log(e,this.options.id,t)}}const $=e$1(S);class CPTMath{static xal2v(e,t,r){return e>=0?e**t:-r*(-e)**t}static xlv2a(e,t,r){return e>=0?Math.log(r)/Math.log(e):(Math.log(-r)-Math.log(t))/Math.log(-e)}static xav2l(e,t,r){return e>=0?NaN:-r/(-e)**t}static pg2w(e,t){return e**t/(e**t+(1-e)**t)**(1/t)}static vw2u(e,t){if("number"==typeof e&&"number"==typeof t)return e*t;if(e instanceof Array&&t instanceof Array&&e.length>0&&e.length===t.length){let r=0;for(let n=0;n<e.length;n+=1)r+=e[n]*t[n];return r}return NaN}}class CPTEquation extends ProspectableElement{static get properties(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0}}}constructor(){super(),this.numeric=!1}static get styles(){return[super.styles,r$5`
        :host {
          display: block;

          margin: 1rem;
        }

        /* Containing <div> */
        .holder {
          display: flex;

          flex-direction: row;

          justify-content: left;
        }

        /* Overall <table> */
        .equation {
          text-align: center;
          white-space: nowrap;

          border-collapse: collapse;

          border: 0;
        }

        /* Modifies <td> */
        .underline {
          border-bottom: 1px solid var(---color-text);
        }

        /* Basic <span> and <var> w/modifiers */
        span,
        var {
          padding: 0 0.25rem;

          font-style: normal;
        }

        var {
          border-radius: var(---border-radius);
        }

        .tight {
          padding: 0;
        }

        .paren {
          font-size: 150%;
        }

        .bracket {
          font-size: 175%;
        }

        .brace {
          font-size: 200%;
        }

        .addend {
          position: relative;
          display: inline-block;
        }

        .comparison {
          position: relative;
          display: inline-block;

          font-size: 125%;
          font-weight: 600;
        }

        .function {
          display: inline-block;

          border-radius: var(---border-radius);
        }

        :host([numeric]) .function {
          padding: 0.25rem;
        }

        .exp {
          display: inline-block;

          font-size: 0.75rem;
        }

        .subscript {
          display: inline-block;

          font-size: 66.667%;
        }

        .summation {
          display: flex;

          flex-direction: column;

          line-height: 0.8;
        }

        .sigma {
          display: inline-block;

          font-size: 200%;
        }

        /* Input wrapping <label> */
        decidables-spinner {
          --decidables-spinner-input-width: 4rem;

          display: inline-block;

          padding: 0.125rem 0.375rem 0.375rem;

          line-height: 1.5;
          vertical-align: middle;

          border-radius: var(---border-radius);
        }

        .n {
          --decidables-spinner-input-width: 2rem;
        }

        .left {
          text-align: left;
        }

        .right {
          text-align: right;
        }

        .bottom {
          vertical-align: bottom;
        }

        .top {
          vertical-align: top;
        }

        /* Color scheme */
        /* .win {
          background: var(---color-better);
        }

        .loss {
          background: var(---color-worse);
        }

        .sure {
          background: var(---color-even);
        } */

        .x {
          background: var(---color-x-light);
        }

        .a {
          background: var(---color-a-light);
        }

        .l {
          background: var(---color-l-light);
        }

        .v {
          background: var(---color-v-light);
        }

        .p {
          background: var(---color-p-light);
        }

        .g {
          background: var(---color-g-light);
        }

        .w {
          background: var(---color-w-light);
        }

        .u {
          background: var(---color-u-light);
        }
      `]}}class CPTCalculation extends CPTEquation{static get properties(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0}}}constructor(){super(),this.numeric=!1,this.xl=0,this.xw=100,this.pw=.75,this.xs=50,this.a=.8,this.l=1.2,this.g=.8,this.alignState()}alignState(){this.vw=CPTMath.xal2v(this.xw,this.a,this.l),this.vl=CPTMath.xal2v(this.xl,this.a,this.l),this.ww=CPTMath.pg2w(this.pw,this.g),this.wl=1-this.ww,this.vs=CPTMath.xal2v(this.xs,this.a,this.l),this.ug=CPTMath.vw2u([this.vw,this.vl],[this.ww,this.wl]),this.us=this.vs,this.uDiff=this.ug-this.us}sendEvent(){this.dispatchEvent(new CustomEvent("cpt-calculation-change",{detail:{xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,a:this.a,l:this.l,g:this.g},bubbles:!0}))}xwInput(e){this.xw=parseFloat(e.target.value),this.alignState(),this.sendEvent()}pwInput(e){this.pw=parseFloat(e.target.value),this.alignState(),this.sendEvent()}xsInput(e){this.xs=parseFloat(e.target.value),this.alignState(),this.sendEvent()}static get styles(){return[super.styles,r$5`
        /* :host {
          display: inline-block;
        } */

        var {
          border-radius: var(---border-radius);
        }

        decidables-spinner {
          border-radius: var(---border-radius);
        }
      `]}render(){let e,t,r,n,i,a,o,s,l,c,u,d;this.alignState(),this.numeric?(e=x$2`<decidables-spinner class="x xw" ?disabled=${!this.interactive} .value="${this.xw}" @input=${this.xwInput.bind(this)}>
          <var class="math-var">x<sub class="subscript win">win</sub></var>
        </decidables-spinner>`,t=x$2`<decidables-spinner class="x xl" disabled .value="${this.xl}">
          <var class="math-var">x<sub class="subscript loss">loss</sub></var>
        </decidables-spinner>`,r=x$2`<decidables-spinner class="p pw" ?disabled=${!this.interactive} min="0" max="1" step=".01" .value="${+this.pw.toFixed(2)}" @input=${this.pwInput.bind(this)}>
          <var class="math-var">p<sub class="subscript win">win</sub></var>
        </decidables-spinner>`,n=x$2`<decidables-spinner class="x xs" ?disabled=${!this.interactive} .value="${this.xs}" @input=${this.xsInput.bind(this)}>
          <var class="math-var">x<sub class="subscript sure">sure</sub></var>
        </decidables-spinner>`,i=x$2`<decidables-spinner class="v vw" disabled .value="${+this.vw.toFixed(1)}">
          <var class="math-var">v<sub class="subscript win">win</sub></var>
        </decidables-spinner>`,a=x$2`<decidables-spinner class="v vl" disabled .value="${+this.vl.toFixed(1)}">
          <var class="math-var">v<sub class="subscript loss">loss</sub></var>
        </decidables-spinner>`,o=x$2`<decidables-spinner class="w ww" disabled .value="${+this.ww.toFixed(2)}">
          <var class="math-var">w<sub class="subscript win">win</sub></var>
        </decidables-spinner>`,s=x$2`<decidables-spinner class="w wl" disabled .value="${+this.wl.toFixed(2)}">
          <var class="math-var">w<sub class="subscript loss">loss</sub></var>
        </decidables-spinner>`,l=x$2`<decidables-spinner class="v vs" disabled .value="${+this.vs.toFixed(1)}">
          <var class="math-var">v<sub class="subscript sure">sure</sub></var>
        </decidables-spinner>`,c=x$2`<decidables-spinner class="u ug" disabled .value="${+this.ug.toFixed(1)}">
          <var class="math-var">U<sub class="subscript gamble">gamble</sub></var>
        </decidables-spinner>`,u=x$2`<decidables-spinner class="u us" disabled .value="${+this.us.toFixed(1)}">
          <var class="math-var">U<sub class="subscript sure">sure</sub></var>
        </decidables-spinner>`,d=x$2`${this.uDiff>0?x$2`<span class="comparison" ${$({in:p})}>&gt;</span>`:this.uDiff<0?x$2`<span class="comparison" ${$({in:p})}>&lt;</span>`:x$2`<span class="comparison" ${$({in:p})}>=</span>`}`):(e=x$2`<var class="math-var x xw">x<sub class="subscript win">win</sub></var>`,t=x$2`<var class="math-var x xl">x<sub class="subscript loss">loss</sub></var>`,r=x$2`<var class="math-var p pw">p<sub class="subscript win">win</sub></var>`,n=x$2`<var class="math-var x xs">x<sub class="subscript sure">sure</sub></var>`,i=x$2`<var class="math-var v vw">v<sub class="subscript win">win</sub></var>`,a=x$2`<var class="math-var v vl">v<sub class="subscript loss">loss</sub></var>`,o=x$2`<var class="math-var w ww">w<sub class="subscript win">win</sub></var>`,s=x$2`<var class="math-var w wl">w<sub class="subscript loss">loss</sub></var>`,l=x$2`<var class="math-var v vs">v<sub class="subscript sure">sure</sub></var>`,c=x$2`<var class="math-var u ug">U<sub class="subscript gamble">gamble</sub></var>`,u=x$2`<var class="math-var u us">U<sub class="subscript sure">sure</sub></var>`,d=x$2`<span class="comparison">≟</span>`);const h=x$2`
      <tr>
        <td class="right">
          <span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>${e}<span class="paren tight">)</span></span>&nbsp;<span class="function w"><var class="math-var w tight">w</var><span class="paren tight">(</span>${r}<span class="paren tight">)</span></span><span class="plus">+</span><span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>${t}<span class="paren tight">)</span></span>&nbsp;<span class="bracket tight">[</span><span class="tight">1</span><span class="minus">−</span><span class="function w"><var class="math-var w">w</var><span class="paren tight">(</span>${r}<span class="paren tight">)</span></span><span class="bracket tight">]</span>
        </td>
        <td>
          ${d}
        </td>
        <td class="left">
          <span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>${n}<span class="paren tight">)</span></span>
        </td>
      </tr>
      <tr>
        <td class="right">
          ${i}&nbsp;${o}<span class="plus">+</span>${a}&nbsp;${s}
        </td>
        <td>
          ${d}
        </td>
        <td class="left">
          ${l}
        </td>
      </tr>
      <tr>
        <td class="right">
          ${c}
        </td>
        <td>
          ${d}
        </td>
        <td class="left">
          ${u}
        </td>
      </tr>`;return x$2`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${h}
          </tbody>
        </table>
      </div>`}}customElements.define("cpt-calculation",CPTCalculation);var coreExports={},core$1={get exports(){return coreExports},set exports(e){coreExports=e}},core={},version$2={version:"2.20.0"},npo_srcExports={},npo_src={get exports(){return npo_srcExports},set exports(e){npo_srcExports=e}};
/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
!function(e){!function(t,r,n){r[t]=r[t]||n(),e.exports&&(e.exports=r[t])}("Promise",commonjsGlobal,(function(){var e,t,r,n=Object.prototype.toString,i="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),e=function(e,t,r,n){return Object.defineProperty(e,t,{value:r,writable:!0,configurable:!1!==n})}}catch(t){e=function(e,t,r){return e[t]=r,e}}function a(e,n){r.add(e,n),t||(t=i(r.drain))}function o(e){var t,r=typeof e;return null==e||"object"!=r&&"function"!=r||(t=e.then),"function"==typeof t&&t}function s(){for(var e=0;e<this.chain.length;e++)l(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function l(e,t,r){var n,i;try{!1===t?r.reject(e.msg):(n=!0===t?e.msg:t.call(void 0,e.msg))===r.promise?r.reject(TypeError("Promise-chain cycle")):(i=o(n))?i.call(n,r.resolve,r.reject):r.resolve(n)}catch(e){r.reject(e)}}function c(e){var t,r=this;if(!r.triggered){r.triggered=!0,r.def&&(r=r.def);try{(t=o(e))?a((function(){var n=new h(r);try{t.call(e,(function(){c.apply(n,arguments)}),(function(){u.apply(n,arguments)}))}catch(e){u.call(n,e)}})):(r.msg=e,r.state=1,r.chain.length>0&&a(s,r))}catch(e){u.call(new h(r),e)}}}function u(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,t.chain.length>0&&a(s,t))}function d(e,t,r,n){for(var i=0;i<t.length;i++)!function(i){e.resolve(t[i]).then((function(e){r(i,e)}),n)}(i)}function h(e){this.def=e,this.triggered=!1}function g(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function p(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var t=new g(this);this.then=function(e,r){var n={success:"function"!=typeof e||e,failure:"function"==typeof r&&r};return n.promise=new this.constructor((function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");n.resolve=e,n.reject=t})),t.chain.push(n),0!==t.state&&a(s,t),n.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,(function(e){c.call(t,e)}),(function(e){u.call(t,e)}))}catch(e){u.call(t,e)}}r=function(){var e,r,n;function i(e,t){this.fn=e,this.self=t,this.next=void 0}return{add:function(t,a){n=new i(t,a),r?r.next=n:e=n,r=n,n=void 0},drain:function(){var n=e;for(e=r=t=void 0;n;)n.fn.call(n.self),n=n.next}}}();var f=e({},"constructor",p,!1);return p.prototype=f,e(f,"__NPO__",0,!1),e(p,"resolve",(function(e){return e&&"object"==typeof e&&1===e.__NPO__?e:new this((function(t,r){if("function"!=typeof t||"function"!=typeof r)throw TypeError("Not a function");t(e)}))})),e(p,"reject",(function(e){return new this((function(t,r){if("function"!=typeof t||"function"!=typeof r)throw TypeError("Not a function");r(e)}))})),e(p,"all",(function(e){var t=this;return"[object Array]"!=n.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t((function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");var i=e.length,a=Array(i),o=0;d(t,e,(function(e,t){a[e]=t,++o===i&&r(a)}),n)}))})),e(p,"race",(function(e){var t=this;return"[object Array]"!=n.call(e)?t.reject(TypeError("Not an array")):new t((function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");d(t,e,(function(e,t){r(t)}),n)}))})),p}))}(npo_src);var libExports={},lib$1={get exports(){return libExports},set exports(e){libExports=e}},d3Exports={},d3$w={get exports(){return d3Exports},set exports(e){d3Exports=e}};!function(e){(function(){var t={version:"3.8.0"},r=[].slice,n=function(e){return r.call(e)},i=self.document;function a(e){return e&&(e.ownerDocument||e.document||e).documentElement}function o(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(i)try{n(i.documentElement.childNodes)[0].nodeType}catch(e){n=function(e){for(var t=e.length,r=new Array(t);t--;)r[t]=e[t];return r}}if(Date.now||(Date.now=function(){return+new Date}),i)try{i.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var s=this.Element.prototype,l=s.setAttribute,c=s.setAttributeNS,u=this.CSSStyleDeclaration.prototype,d=u.setProperty;s.setAttribute=function(e,t){l.call(this,e,t+"")},s.setAttributeNS=function(e,t,r){c.call(this,e,t,r+"")},u.setProperty=function(e,t,r){d.call(this,e,t+"",r)}}function h(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function g(e){return null===e?NaN:+e}function p(e){return!isNaN(e)}function f(e){return{left:function(t,r,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=t.length);n<i;){var a=n+i>>>1;e(t[a],r)<0?n=a+1:i=a}return n},right:function(t,r,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=t.length);n<i;){var a=n+i>>>1;e(t[a],r)>0?i=a:n=a+1}return n}}}t.ascending=h,t.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},t.min=function(e,t){var r,n,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(n=e[i])&&n>=n){r=n;break}for(;++i<a;)null!=(n=e[i])&&r>n&&(r=n)}else{for(;++i<a;)if(null!=(n=t.call(e,e[i],i))&&n>=n){r=n;break}for(;++i<a;)null!=(n=t.call(e,e[i],i))&&r>n&&(r=n)}return r},t.max=function(e,t){var r,n,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(n=e[i])&&n>=n){r=n;break}for(;++i<a;)null!=(n=e[i])&&n>r&&(r=n)}else{for(;++i<a;)if(null!=(n=t.call(e,e[i],i))&&n>=n){r=n;break}for(;++i<a;)null!=(n=t.call(e,e[i],i))&&n>r&&(r=n)}return r},t.extent=function(e,t){var r,n,i,a=-1,o=e.length;if(1===arguments.length){for(;++a<o;)if(null!=(n=e[a])&&n>=n){r=i=n;break}for(;++a<o;)null!=(n=e[a])&&(r>n&&(r=n),i<n&&(i=n))}else{for(;++a<o;)if(null!=(n=t.call(e,e[a],a))&&n>=n){r=i=n;break}for(;++a<o;)null!=(n=t.call(e,e[a],a))&&(r>n&&(r=n),i<n&&(i=n))}return[r,i]},t.sum=function(e,t){var r,n=0,i=e.length,a=-1;if(1===arguments.length)for(;++a<i;)p(r=+e[a])&&(n+=r);else for(;++a<i;)p(r=+t.call(e,e[a],a))&&(n+=r);return n},t.mean=function(e,t){var r,n=0,i=e.length,a=-1,o=i;if(1===arguments.length)for(;++a<i;)p(r=g(e[a]))?n+=r:--o;else for(;++a<i;)p(r=g(t.call(e,e[a],a)))?n+=r:--o;if(o)return n/o},t.quantile=function(e,t){var r=(e.length-1)*t+1,n=Math.floor(r),i=+e[n-1],a=r-n;return a?i+a*(e[n]-i):i},t.median=function(e,r){var n,i=[],a=e.length,o=-1;if(1===arguments.length)for(;++o<a;)p(n=g(e[o]))&&i.push(n);else for(;++o<a;)p(n=g(r.call(e,e[o],o)))&&i.push(n);if(i.length)return t.quantile(i.sort(h),.5)},t.variance=function(e,t){var r,n,i=e.length,a=0,o=0,s=-1,l=0;if(1===arguments.length)for(;++s<i;)p(r=g(e[s]))&&(o+=(n=r-a)*(r-(a+=n/++l)));else for(;++s<i;)p(r=g(t.call(e,e[s],s)))&&(o+=(n=r-a)*(r-(a+=n/++l)));if(l>1)return o/(l-1)},t.deviation=function(){var e=t.variance.apply(this,arguments);return e?Math.sqrt(e):e};var m=f(h);function y(e){return e.length}t.bisectLeft=m.left,t.bisect=t.bisectRight=m.right,t.bisector=function(e){return f(1===e.length?function(t,r){return h(e(t),r)}:e)},t.shuffle=function(e,t,r){(a=arguments.length)<3&&(r=e.length,a<2&&(t=0));for(var n,i,a=r-t;a;)i=Math.random()*a--|0,n=e[a+t],e[a+t]=e[i+t],e[i+t]=n;return e},t.permute=function(e,t){for(var r=t.length,n=new Array(r);r--;)n[r]=e[t[r]];return n},t.pairs=function(e){for(var t=0,r=e.length-1,n=e[0],i=new Array(r<0?0:r);t<r;)i[t]=[n,n=e[++t]];return i},t.transpose=function(e){if(!(a=e.length))return[];for(var r=-1,n=t.min(e,y),i=new Array(n);++r<n;)for(var a,o=-1,s=i[r]=new Array(a);++o<a;)s[o]=e[o][r];return i},t.zip=function(){return t.transpose(arguments)},t.keys=function(e){var t=[];for(var r in e)t.push(r);return t},t.values=function(e){var t=[];for(var r in e)t.push(e[r]);return t},t.entries=function(e){var t=[];for(var r in e)t.push({key:r,value:e[r]});return t},t.merge=function(e){for(var t,r,n,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(r=new Array(o);--i>=0;)for(t=(n=e[i]).length;--t>=0;)r[--o]=n[t];return r};var b=Math.abs;function v(e){for(var t=1;e*t%1;)t*=10;return t}function x(e,t){for(var r in t)Object.defineProperty(e.prototype,r,{value:t[r],enumerable:!1})}function B(){this._=Object.create(null)}t.range=function(e,t,r){if(arguments.length<3&&(r=1,arguments.length<2&&(t=e,e=0)),(t-e)/r==1/0)throw new Error("infinite range");var n,i=[],a=v(b(r)),o=-1;if(e*=a,t*=a,(r*=a)<0)for(;(n=e+r*++o)>t;)i.push(n/a);else for(;(n=e+r*++o)<t;)i.push(n/a);return i},t.map=function(e,t){var r=new B;if(e instanceof B)e.forEach((function(e,t){r.set(e,t)}));else if(Array.isArray(e)){var n,i=-1,a=e.length;if(1===arguments.length)for(;++i<a;)r.set(i,e[i]);else for(;++i<a;)r.set(t.call(e,n=e[i],i),n)}else for(var o in e)r.set(o,e[o]);return r};function I(e){return"__proto__"==(e+="")||"\0"===e[0]?"\0"+e:e}function F(e){return"\0"===(e+="")[0]?e.slice(1):e}function A(e){return I(e)in this._}function C(e){return(e=I(e))in this._&&delete this._[e]}function w(){var e=[];for(var t in this._)e.push(F(t));return e}function Q(){var e=0;for(var t in this._)++e;return e}function U(){for(var e in this._)return!1;return!0}function S(){this._=Object.create(null)}function E(e){return e}function L(e,t,r){return function(){var n=r.apply(t,arguments);return n===t?e:n}}function _(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var r=0,n=T.length;r<n;++r){var i=T[r]+t;if(i in e)return i}}x(B,{has:A,get:function(e){return this._[I(e)]},set:function(e,t){return this._[I(e)]=t},remove:C,keys:w,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:F(t),value:this._[t]});return e},size:Q,empty:U,forEach:function(e){for(var t in this._)e.call(this,F(t),this._[t])}}),t.nest=function(){var e,r,n={},i=[],a=[];function o(t,a,s){if(s>=i.length)return r?r.call(n,a):e?a.sort(e):a;for(var l,c,u,d,h=-1,g=a.length,p=i[s++],f=new B;++h<g;)(d=f.get(l=p(c=a[h])))?d.push(c):f.set(l,[c]);return t?(c=t(),u=function(e,r){c.set(e,o(t,r,s))}):(c={},u=function(e,r){c[e]=o(t,r,s)}),f.forEach(u),c}function s(e,t){if(t>=i.length)return e;var r=[],n=a[t++];return e.forEach((function(e,n){r.push({key:e,values:s(n,t)})})),n?r.sort((function(e,t){return n(e.key,t.key)})):r}return n.map=function(e,t){return o(t,e,0)},n.entries=function(e){return s(o(t.map,e,0),0)},n.key=function(e){return i.push(e),n},n.sortKeys=function(e){return a[i.length-1]=e,n},n.sortValues=function(t){return e=t,n},n.rollup=function(e){return r=e,n},n},t.set=function(e){var t=new S;if(e)for(var r=0,n=e.length;r<n;++r)t.add(e[r]);return t},x(S,{has:A,add:function(e){return this._[I(e+="")]=!0,e},remove:C,values:w,size:Q,empty:U,forEach:function(e){for(var t in this._)e.call(this,F(t))}}),t.behavior={},t.rebind=function(e,t){for(var r,n=1,i=arguments.length;++n<i;)e[r=arguments[n]]=L(e,t,t[r]);return e};var T=["webkit","ms","moz","Moz","o","O"];function R(){}function $(){}function k(e){var t=[],r=new B;function n(){for(var r,n=t,i=-1,a=n.length;++i<a;)(r=n[i].on)&&r.apply(this,arguments);return e}return n.on=function(n,i){var a,o=r.get(n);return arguments.length<2?o&&o.on:(o&&(o.on=null,t=t.slice(0,a=t.indexOf(o)).concat(t.slice(a+1)),r.remove(n)),i&&t.push(r.set(n,{on:i})),e)},n}function N(){t.event.preventDefault()}function G(){for(var e,r=t.event;e=r.sourceEvent;)r=e;return r}function M(e){for(var r=new $,n=0,i=arguments.length;++n<i;)r[arguments[n]]=k(r);return r.of=function(n,i){return function(a){try{var o=a.sourceEvent=t.event;a.target=e,t.event=a,r[a.type].apply(n,i)}finally{t.event=o}}},r}t.dispatch=function(){for(var e=new $,t=-1,r=arguments.length;++t<r;)e[arguments[t]]=k(e);return e},$.prototype.on=function(e,t){var r=e.indexOf("."),n="";if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e)return arguments.length<2?this[e].on(n):this[e].on(n,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(n,null);return this}},t.event=null,t.requote=function(e){return e.replace(D,"\\$&")};var D=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,V={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)e[r]=t[r]};function H(e){return V(e,W),e}var X=function(e,t){return t.querySelector(e)},O=function(e,t){return t.querySelectorAll(e)},Z=function(e,t){var r=e.matches||e[_(e,"matchesSelector")];return Z=function(e,t){return r.call(e,t)},Z(e,t)};"function"==typeof Sizzle&&(X=function(e,t){return Sizzle(e,t)[0]||null},O=Sizzle,Z=Sizzle.matchesSelector),t.selection=function(){return t.select(i.documentElement)};var W=t.selection.prototype=[];function Y(e){return"function"==typeof e?e:function(){return X(e,this)}}function P(e){return"function"==typeof e?e:function(){return O(e,this)}}W.select=function(e){var t,r,n,i,a=[];e=Y(e);for(var o=-1,s=this.length;++o<s;){a.push(t=[]),t.parentNode=(n=this[o]).parentNode;for(var l=-1,c=n.length;++l<c;)(i=n[l])?(t.push(r=e.call(i,i.__data__,l,o)),r&&"__data__"in i&&(r.__data__=i.__data__)):t.push(null)}return H(a)},W.selectAll=function(e){var t,r,i=[];e=P(e);for(var a=-1,o=this.length;++a<o;)for(var s=this[a],l=-1,c=s.length;++l<c;)(r=s[l])&&(i.push(t=n(e.call(r,r.__data__,l,a))),t.parentNode=r);return H(i)};var z="http://www.w3.org/1999/xhtml",J={svg:"http://www.w3.org/2000/svg",xhtml:z,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function j(e,r){return e=t.ns.qualify(e),null==r?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof r?e.local?function(){var t=r.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=r.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,r)}:function(){this.setAttribute(e,r)}}function K(e){return e.trim().replace(/\s+/g," ")}function q(e){return new RegExp("(?:^|\\s+)"+t.requote(e)+"(?:\\s+|$)","g")}function ee(e){return(e+"").trim().split(/^|\s+/)}function te(e,t){var r=(e=ee(e).map(re)).length;return"function"==typeof t?function(){for(var n=-1,i=t.apply(this,arguments);++n<r;)e[n](this,i)}:function(){for(var n=-1;++n<r;)e[n](this,t)}}function re(e){var t=q(e);return function(r,n){if(i=r.classList)return n?i.add(e):i.remove(e);var i=r.getAttribute("class")||"";n?(t.lastIndex=0,t.test(i)||r.setAttribute("class",K(i+" "+e))):r.setAttribute("class",K(i.replace(t," ")))}}function ne(e,t,r){return null==t?function(){this.style.removeProperty(e)}:"function"==typeof t?function(){var n=t.apply(this,arguments);null==n?this.style.removeProperty(e):this.style.setProperty(e,n,r)}:function(){this.style.setProperty(e,t,r)}}function ie(e,t){return null==t?function(){delete this[e]}:"function"==typeof t?function(){var r=t.apply(this,arguments);null==r?delete this[e]:this[e]=r}:function(){this[e]=t}}function ae(e){return"function"==typeof e?e:(e=t.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,r=this.namespaceURI;return r===z&&t.documentElement.namespaceURI===z?t.createElement(e):t.createElementNS(r,e)}}function oe(){var e=this.parentNode;e&&e.removeChild(this)}function se(e){return{__data__:e}}function le(e){return function(){return Z(this,e)}}function ce(e){return arguments.length||(e=h),function(t,r){return t&&r?e(t.__data__,r.__data__):!t-!r}}function ue(e,t){for(var r=0,n=e.length;r<n;r++)for(var i,a=e[r],o=0,s=a.length;o<s;o++)(i=a[o])&&t(i,o,r);return e}function de(e){return V(e,he),e}t.ns={prefix:J,qualify:function(e){var t=e.indexOf(":"),r=e;return t>=0&&"xmlns"!==(r=e.slice(0,t))&&(e=e.slice(t+1)),J.hasOwnProperty(r)?{space:J[r],local:e}:e}},W.attr=function(e,r){if(arguments.length<2){if("string"==typeof e){var n=this.node();return(e=t.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(r in e)this.each(j(r,e[r]));return this}return this.each(j(e,r))},W.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var r=this.node(),n=(e=ee(e)).length,i=-1;if(t=r.classList){for(;++i<n;)if(!t.contains(e[i]))return!1}else for(t=r.getAttribute("class");++i<n;)if(!q(e[i]).test(t))return!1;return!0}for(t in e)this.each(te(t,e[t]));return this}return this.each(te(e,t))},W.style=function(e,t,r){var n=arguments.length;if(n<3){if("string"!=typeof e){for(r in n<2&&(t=""),e)this.each(ne(r,e[r],t));return this}if(n<2){var i=this.node();return o(i).getComputedStyle(i,null).getPropertyValue(e)}r=""}return this.each(ne(e,t,r))},W.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(ie(t,e[t]));return this}return this.each(ie(e,t))},W.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},W.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},W.append=function(e){return e=ae(e),this.select((function(){return this.appendChild(e.apply(this,arguments))}))},W.insert=function(e,t){return e=ae(e),t=Y(t),this.select((function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)}))},W.remove=function(){return this.each(oe)},W.data=function(e,t){var r,n,i=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(r=this[0]).length);++i<a;)(n=r[i])&&(e[i]=n.__data__);return e}function o(e,r){var n,i,a,o=e.length,u=r.length,d=Math.min(o,u),h=new Array(u),g=new Array(u),p=new Array(o);if(t){var f,m=new B,y=new Array(o);for(n=-1;++n<o;)(i=e[n])&&(m.has(f=t.call(i,i.__data__,n))?p[n]=i:m.set(f,i),y[n]=f);for(n=-1;++n<u;)(i=m.get(f=t.call(r,a=r[n],n)))?!0!==i&&(h[n]=i,i.__data__=a):g[n]=se(a),m.set(f,!0);for(n=-1;++n<o;)n in y&&!0!==m.get(y[n])&&(p[n]=e[n])}else{for(n=-1;++n<d;)i=e[n],a=r[n],i?(i.__data__=a,h[n]=i):g[n]=se(a);for(;n<u;++n)g[n]=se(r[n]);for(;n<o;++n)p[n]=e[n]}g.update=h,g.parentNode=h.parentNode=p.parentNode=e.parentNode,s.push(g),l.push(h),c.push(p)}var s=de([]),l=H([]),c=H([]);if("function"==typeof e)for(;++i<a;)o(r=this[i],e.call(r,r.parentNode.__data__,i));else for(;++i<a;)o(r=this[i],e);return l.enter=function(){return s},l.exit=function(){return c},l},W.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},W.filter=function(e){var t,r,n,i=[];"function"!=typeof e&&(e=le(e));for(var a=0,o=this.length;a<o;a++){i.push(t=[]),t.parentNode=(r=this[a]).parentNode;for(var s=0,l=r.length;s<l;s++)(n=r[s])&&e.call(n,n.__data__,s,a)&&t.push(n)}return H(i)},W.order=function(){for(var e=-1,t=this.length;++e<t;)for(var r,n=this[e],i=n.length-1,a=n[i];--i>=0;)(r=n[i])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},W.sort=function(e){e=ce.apply(this,arguments);for(var t=-1,r=this.length;++t<r;)this[t].sort(e);return this.order()},W.each=function(e){return ue(this,(function(t,r,n){e.call(t,t.__data__,r,n)}))},W.call=function(e){var t=n(arguments);return e.apply(t[0]=this,t),this},W.empty=function(){return!this.node()},W.node=function(){for(var e=0,t=this.length;e<t;e++)for(var r=this[e],n=0,i=r.length;n<i;n++){var a=r[n];if(a)return a}return null},W.size=function(){var e=0;return ue(this,(function(){++e})),e};var he=[];function ge(e){var t,r;return function(n,i,a){var o,s=e[a].update,l=s.length;for(a!=r&&(r=a,t=0),i>=t&&(t=i+1);!(o=s[t])&&++t<l;);return o}}function pe(e,r,i){var a="__on"+e,o=e.indexOf("."),s=me;o>0&&(e=e.slice(0,o));var l=fe.get(e);function c(){var t=this[a];t&&(this.removeEventListener(e,t,t.$),delete this[a])}return l&&(e=l,s=ye),o?r?function(){var t=s(r,n(arguments));c.call(this),this.addEventListener(e,this[a]=t,t.$=i),t._=r}:c:r?R:function(){var r,n=new RegExp("^__on([^.]+)"+t.requote(e)+"$");for(var i in this)if(r=i.match(n)){var a=this[i];this.removeEventListener(r[1],a,a.$),delete this[i]}}}t.selection.enter=de,t.selection.enter.prototype=he,he.append=W.append,he.empty=W.empty,he.node=W.node,he.call=W.call,he.size=W.size,he.select=function(e){for(var t,r,n,i,a,o=[],s=-1,l=this.length;++s<l;){n=(i=this[s]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var c=-1,u=i.length;++c<u;)(a=i[c])?(t.push(n[c]=r=e.call(i.parentNode,a.__data__,c,s)),r.__data__=a.__data__):t.push(null)}return H(o)},he.insert=function(e,t){return arguments.length<2&&(t=ge(this)),W.insert.call(this,e,t)},t.select=function(e){var t;return"string"==typeof e?(t=[X(e,i)]).parentNode=i.documentElement:(t=[e]).parentNode=a(e),H([t])},t.selectAll=function(e){var t;return"string"==typeof e?(t=n(O(e,i))).parentNode=i.documentElement:(t=n(e)).parentNode=null,H([t])},W.on=function(e,t,r){var n=arguments.length;if(n<3){if("string"!=typeof e){for(r in n<2&&(t=!1),e)this.each(pe(r,e[r],t));return this}if(n<2)return(n=this.node()["__on"+e])&&n._;r=!1}return this.each(pe(e,t,r))};var fe=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});function me(e,r){return function(n){var i=t.event;t.event=n,r[0]=this.__data__;try{e.apply(this,r)}finally{t.event=i}}}function ye(e,t){var r=me(e,t);return function(e){var t=this,n=e.relatedTarget;n&&(n===t||8&n.compareDocumentPosition(t))||r.call(t,e)}}i&&fe.forEach((function(e){"on"+e in i&&fe.remove(e)}));var be,ve=0;function xe(e){var r=".dragsuppress-"+ ++ve,n="click"+r,i=t.select(o(e)).on("touchmove"+r,N).on("dragstart"+r,N).on("selectstart"+r,N);if(null==be&&(be=!("onselectstart"in e)&&_(e.style,"userSelect")),be){var s=a(e).style,l=s[be];s[be]="none"}return function(e){if(i.on(r,null),be&&(s[be]=l),e){var t=function(){i.on(n,null)};i.on(n,(function(){N(),t()}),!0),setTimeout(t,0)}}}t.mouse=function(e){return Ie(e,G())};var Be=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ie(e,r){r.changedTouches&&(r=r.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();if(Be<0){var a=o(e);if(a.scrollX||a.scrollY){var s=(n=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Be=!(s.f||s.e),n.remove()}}return Be?(i.x=r.pageX,i.y=r.pageY):(i.x=r.clientX,i.y=r.clientY),[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}var l=e.getBoundingClientRect();return[r.clientX-l.left-e.clientLeft,r.clientY-l.top-e.clientTop]}function Fe(){return t.event.changedTouches[0].identifier}t.touch=function(e,t,r){if(arguments.length<3&&(r=t,t=G().changedTouches),t)for(var n,i=0,a=t.length;i<a;++i)if((n=t[i]).identifier===r)return Ie(e,n)},t.behavior.drag=function(){var e=M(a,"drag","dragstart","dragend"),r=null,n=s(R,t.mouse,o,"mousemove","mouseup"),i=s(Fe,t.touch,E,"touchmove","touchend");function a(){this.on("mousedown.drag",n).on("touchstart.drag",i)}function s(n,i,a,o,s){return function(){var l,c=this,u=t.event.target.correspondingElement||t.event.target,d=c.parentNode,h=e.of(c,arguments),g=0,p=n(),f=".drag"+(null==p?"":"-"+p),m=t.select(a(u)).on(o+f,v).on(s+f,x),y=xe(u),b=i(d,p);function v(){var e,t,r=i(d,p);r&&(e=r[0]-b[0],t=r[1]-b[1],g|=e|t,b=r,h({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:e,dy:t}))}function x(){i(d,p)&&(m.on(o+f,null).on(s+f,null),y(g),h({type:"dragend"}))}l=r?[(l=r.apply(c,arguments)).x-b[0],l.y-b[1]]:[0,0],h({type:"dragstart"})}}return a.origin=function(e){return arguments.length?(r=e,a):r},t.rebind(a,e,"on")},t.touches=function(e,t){return arguments.length<2&&(t=G().touches),t?n(t).map((function(t){var r=Ie(e,t);return r.identifier=t.identifier,r})):[]};var Ae=1e-6,Ce=Math.PI,we=2*Ce,Qe=we-Ae,Ue=Ce/2,Se=Ce/180,Ee=180/Ce;function Le(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0])}function _e(e){return e>1?Ue:e<-1?-Ue:Math.asin(e)}function Te(e){return((e=Math.exp(e))+1/e)/2}var Re=Math.SQRT2;t.interpolateZoom=function(e,t){var r,n,i=e[0],a=e[1],o=e[2],s=t[0],l=t[1],c=t[2],u=s-i,d=l-a,h=u*u+d*d;if(h<1e-12)n=Math.log(c/o)/Re,r=function(e){return[i+e*u,a+e*d,o*Math.exp(Re*e*n)]};else{var g=Math.sqrt(h),p=(c*c-o*o+4*h)/(2*o*2*g),f=(c*c-o*o-4*h)/(2*c*2*g),m=Math.log(Math.sqrt(p*p+1)-p),y=Math.log(Math.sqrt(f*f+1)-f);n=(y-m)/Re,r=function(e){var t=e*n,r=Te(m),s=o/(2*g)*(r*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(Re*t+m)-function(e){return((e=Math.exp(e))-1/e)/2}(m));return[i+s*u,a+s*d,o*r/Te(Re*t+m)]}}return r.duration=1e3*n,r},t.behavior.zoom=function(){var e,r,n,a,s,l,c,u,d,h={x:0,y:0,k:1},g=[960,500],p=Ne,f=250,m=0,y="mousedown.zoom",b="mousemove.zoom",v="mouseup.zoom",x="touchstart.zoom",B=M(I,"zoomstart","zoom","zoomend");function I(e){e.on(y,L).on(ke+".zoom",T).on("dblclick.zoom",R).on(x,_)}function F(e){return[(e[0]-h.x)/h.k,(e[1]-h.y)/h.k]}function A(e){h.k=Math.max(p[0],Math.min(p[1],e))}function C(e,t){t=function(e){return[e[0]*h.k+h.x,e[1]*h.k+h.y]}(t),h.x+=e[0]-t[0],h.y+=e[1]-t[1]}function w(e,n,i,a){e.__chart__={x:h.x,y:h.y,k:h.k},A(Math.pow(2,a)),C(r=n,i),e=t.select(e),f>0&&(e=e.transition().duration(f)),e.call(I.event)}function Q(){c&&c.domain(l.range().map((function(e){return(e-h.x)/h.k})).map(l.invert)),d&&d.domain(u.range().map((function(e){return(e-h.y)/h.k})).map(u.invert))}function U(e){m++||e({type:"zoomstart"})}function S(e){Q(),e({type:"zoom",scale:h.k,translate:[h.x,h.y]})}function E(e){--m||(e({type:"zoomend"}),r=null)}function L(){var e=this,r=B.of(e,arguments),n=0,i=t.select(o(e)).on(b,l).on(v,c),a=F(t.mouse(e)),s=xe(e);function l(){n=1,C(t.mouse(e),a),S(r)}function c(){i.on(b,null).on(v,null),s(n),E(r)}ji.call(e),U(r)}function _(){var e,r=this,n=B.of(r,arguments),i={},a=0,o=".zoom-"+t.event.changedTouches[0].identifier,l="touchmove"+o,c="touchend"+o,u=[],d=t.select(r),g=xe(r);function p(){var n=t.touches(r);return e=h.k,n.forEach((function(e){e.identifier in i&&(i[e.identifier]=F(e))})),n}function f(){var e=t.event.target;t.select(e).on(l,m).on(c,b),u.push(e);for(var n=t.event.changedTouches,o=0,d=n.length;o<d;++o)i[n[o].identifier]=null;var g=p(),f=Date.now();if(1===g.length){if(f-s<500){var y=g[0];w(r,y,i[y.identifier],Math.floor(Math.log(h.k)/Math.LN2)+1),N()}s=f}else if(g.length>1){y=g[0];var v=g[1],x=y[0]-v[0],B=y[1]-v[1];a=x*x+B*B}}function m(){var o,l,c,u,d=t.touches(r);ji.call(r);for(var h=0,g=d.length;h<g;++h,u=null)if(c=d[h],u=i[c.identifier]){if(l)break;o=c,l=u}if(u){var p=(p=c[0]-o[0])*p+(p=c[1]-o[1])*p,f=a&&Math.sqrt(p/a);o=[(o[0]+c[0])/2,(o[1]+c[1])/2],l=[(l[0]+u[0])/2,(l[1]+u[1])/2],A(f*e)}s=null,C(o,l),S(n)}function b(){if(t.event.touches.length){for(var e=t.event.changedTouches,r=0,a=e.length;r<a;++r)delete i[e[r].identifier];for(var s in i)return void p()}t.selectAll(u).on(o,null),d.on(y,L).on(x,_),g(),E(n)}f(),U(n),d.on(y,null).on(x,f)}function T(){var i=B.of(this,arguments);a?clearTimeout(a):(ji.call(this),e=F(r=n||t.mouse(this)),U(i)),a=setTimeout((function(){a=null,E(i)}),50),N(),A(Math.pow(2,.002*$e())*h.k),C(r,e),S(i)}function R(){var e=t.mouse(this),r=Math.log(h.k)/Math.LN2;w(this,e,F(e),t.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1)}return ke||(ke="onwheel"in i?($e=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?($e=function(){return t.event.wheelDelta},"mousewheel"):($e=function(){return-t.event.detail},"MozMousePixelScroll")),I.event=function(e){e.each((function(){var e=B.of(this,arguments),n=h;ea?t.select(this).transition().each("start.zoom",(function(){h=this.__chart__||{x:0,y:0,k:1},U(e)})).tween("zoom:zoom",(function(){var i=g[0],a=g[1],o=r?r[0]:i/2,s=r?r[1]:a/2,l=t.interpolateZoom([(o-h.x)/h.k,(s-h.y)/h.k,i/h.k],[(o-n.x)/n.k,(s-n.y)/n.k,i/n.k]);return function(t){var r=l(t),n=i/r[2];this.__chart__=h={x:o-r[0]*n,y:s-r[1]*n,k:n},S(e)}})).each("interrupt.zoom",(function(){E(e)})).each("end.zoom",(function(){E(e)})):(this.__chart__=h,U(e),S(e),E(e))}))},I.translate=function(e){return arguments.length?(h={x:+e[0],y:+e[1],k:h.k},Q(),I):[h.x,h.y]},I.scale=function(e){return arguments.length?(h={x:h.x,y:h.y,k:null},A(+e),Q(),I):h.k},I.scaleExtent=function(e){return arguments.length?(p=null==e?Ne:[+e[0],+e[1]],I):p},I.center=function(e){return arguments.length?(n=e&&[+e[0],+e[1]],I):n},I.size=function(e){return arguments.length?(g=e&&[+e[0],+e[1]],I):g},I.duration=function(e){return arguments.length?(f=+e,I):f},I.x=function(e){return arguments.length?(c=e,l=e.copy(),h={x:0,y:0,k:1},I):c},I.y=function(e){return arguments.length?(d=e,u=e.copy(),h={x:0,y:0,k:1},I):d},t.rebind(I,B,"on")};var $e,ke,Ne=[0,1/0];function Ge(){}function Me(e,t,r){return this instanceof Me?(this.h=+e,this.s=+t,void(this.l=+r)):arguments.length<2?e instanceof Me?new Me(e.h,e.s,e.l):ot(""+e,st,Me):new Me(e,t,r)}t.color=Ge,Ge.prototype.toString=function(){return this.rgb()+""},t.hsl=Me;var De=Me.prototype=new Ge;function Ve(e,t,r){var n,i;function a(e){return Math.round(255*function(e){return e>360?e-=360:e<0&&(e+=360),e<60?n+(i-n)*e/60:e<180?i:e<240?n+(i-n)*(240-e)/60:n}(e))}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)||t<0?0:t>1?1:t,n=2*(r=r<0?0:r>1?1:r)-(i=r<=.5?r*(1+t):r+t-r*t),new tt(a(e+120),a(e),a(e-120))}function He(e,r,n){return this instanceof He?(this.h=+e,this.c=+r,void(this.l=+n)):arguments.length<2?e instanceof He?new He(e.h,e.c,e.l):je(e instanceof Ze?e.l:(e=lt((e=t.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new He(e,r,n)}De.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new Me(this.h,this.s,this.l/e)},De.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new Me(this.h,this.s,e*this.l)},De.rgb=function(){return Ve(this.h,this.s,this.l)},t.hcl=He;var Xe=He.prototype=new Ge;function Oe(e,t,r){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new Ze(r,Math.cos(e*=Se)*t,Math.sin(e)*t)}function Ze(e,t,r){return this instanceof Ze?(this.l=+e,this.a=+t,void(this.b=+r)):arguments.length<2?e instanceof Ze?new Ze(e.l,e.a,e.b):e instanceof He?Oe(e.h,e.c,e.l):lt((e=tt(e)).r,e.g,e.b):new Ze(e,t,r)}Xe.brighter=function(e){return new He(this.h,this.c,Math.min(100,this.l+We*(arguments.length?e:1)))},Xe.darker=function(e){return new He(this.h,this.c,Math.max(0,this.l-We*(arguments.length?e:1)))},Xe.rgb=function(){return Oe(this.h,this.c,this.l).rgb()},t.lab=Ze;var We=18,Ye=.95047,Pe=1.08883,ze=Ze.prototype=new Ge;function Je(e,t,r){var n=(e+16)/116,i=n+t/500,a=n-r/200;return new tt(et(3.2404542*(i=Ke(i)*Ye)-1.5371385*(n=1*Ke(n))-.4985314*(a=Ke(a)*Pe)),et(-.969266*i+1.8760108*n+.041556*a),et(.0556434*i-.2040259*n+1.0572252*a))}function je(e,t,r){return e>0?new He(Math.atan2(r,t)*Ee,Math.sqrt(t*t+r*r),e):new He(NaN,NaN,e)}function Ke(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function qe(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function et(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function tt(e,t,r){return this instanceof tt?(this.r=~~e,this.g=~~t,void(this.b=~~r)):arguments.length<2?e instanceof tt?new tt(e.r,e.g,e.b):ot(""+e,tt,Ve):new tt(e,t,r)}function rt(e){return new tt(e>>16,e>>8&255,255&e)}function nt(e){return rt(e)+""}ze.brighter=function(e){return new Ze(Math.min(100,this.l+We*(arguments.length?e:1)),this.a,this.b)},ze.darker=function(e){return new Ze(Math.max(0,this.l-We*(arguments.length?e:1)),this.a,this.b)},ze.rgb=function(){return Je(this.l,this.a,this.b)},t.rgb=tt;var it=tt.prototype=new Ge;function at(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function ot(e,t,r){var n,i,a,o=0,s=0,l=0;if(n=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(i=n[2].split(","),n[1]){case"hsl":return r(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(ut(i[0]),ut(i[1]),ut(i[2]))}return(a=dt.get(e))?t(a.r,a.g,a.b):(null==e||"#"!==e.charAt(0)||isNaN(a=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&a)>>4,o|=o>>4,s=240&a,s|=s>>4,l=15&a,l|=l<<4):7===e.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,l=255&a)),t(o,s,l))}function st(e,t,r){var n,i,a=Math.min(e/=255,t/=255,r/=255),o=Math.max(e,t,r),s=o-a,l=(o+a)/2;return s?(i=l<.5?s/(o+a):s/(2-o-a),n=e==o?(t-r)/s+(t<r?6:0):t==o?(r-e)/s+2:(e-t)/s+4,n*=60):(n=NaN,i=l>0&&l<1?0:n),new Me(n,i,l)}function lt(e,t,r){var n=qe((.4124564*(e=ct(e))+.3575761*(t=ct(t))+.1804375*(r=ct(r)))/Ye),i=qe((.2126729*e+.7151522*t+.072175*r)/1);return Ze(116*i-16,500*(n-i),200*(i-qe((.0193339*e+.119192*t+.9503041*r)/Pe)))}function ct(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ut(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}it.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,r=this.g,n=this.b,i=30;return t||r||n?(t&&t<i&&(t=i),r&&r<i&&(r=i),n&&n<i&&(n=i),new tt(Math.min(255,t/e),Math.min(255,r/e),Math.min(255,n/e))):new tt(i,i,i)},it.darker=function(e){return new tt((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},it.hsl=function(){return st(this.r,this.g,this.b)},it.toString=function(){return"#"+at(this.r)+at(this.g)+at(this.b)};var dt=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ht(e){return"function"==typeof e?e:function(){return e}}function gt(e){return function(t,r,n){return 2===arguments.length&&"function"==typeof r&&(n=r,r=null),pt(t,r,e,n)}}function pt(e,r,i,a){var o={},s=t.dispatch("beforesend","progress","load","error"),l={},c=new XMLHttpRequest,u=null;function d(){var e,t=c.status;if(!t&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(c)||t>=200&&t<300||304===t){try{e=i.call(o,c)}catch(e){return void s.error.call(o,e)}s.load.call(o,e)}else s.error.call(o,c)}return self.XDomainRequest&&!("withCredentials"in c)&&/^(http(s)?:)?\/\//.test(e)&&(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=d:c.onreadystatechange=function(){c.readyState>3&&d()},c.onprogress=function(e){var r=t.event;t.event=e;try{s.progress.call(o,c)}finally{t.event=r}},o.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?l[e]:(null==t?delete l[e]:l[e]=t+"",o)},o.mimeType=function(e){return arguments.length?(r=null==e?null:e+"",o):r},o.responseType=function(e){return arguments.length?(u=e,o):u},o.response=function(e){return i=e,o},["get","post"].forEach((function(e){o[e]=function(){return o.send.apply(o,[e].concat(n(arguments)))}})),o.send=function(t,n,i){if(2===arguments.length&&"function"==typeof n&&(i=n,n=null),c.open(t,e,!0),null==r||"accept"in l||(l.accept=r+",*/*"),c.setRequestHeader)for(var a in l)c.setRequestHeader(a,l[a]);return null!=r&&c.overrideMimeType&&c.overrideMimeType(r),null!=u&&(c.responseType=u),null!=i&&o.on("error",i).on("load",(function(e){i(null,e)})),s.beforesend.call(o,c),c.send(null==n?null:n),o},o.abort=function(){return c.abort(),o},t.rebind(o,s,"on"),null==a?o:o.get(function(e){return 1===e.length?function(t,r){e(null==t?r:null)}:e}(a))}dt.forEach((function(e,t){dt.set(e,rt(t))})),t.functor=ht,t.xhr=gt(E),t.dsv=function(e,t){var r=new RegExp('["'+e+"\n]"),n=e.charCodeAt(0);function i(e,r,n){arguments.length<3&&(n=r,r=null);var i=pt(e,t,null==r?a:o(r),n);return i.row=function(e){return arguments.length?i.response(null==(r=e)?a:o(e)):r},i}function a(e){return i.parse(e.responseText)}function o(e){return function(t){return i.parse(t.responseText,e)}}function s(t){return t.map(l).join(e)}function l(e){return r.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return i.parse=function(e,t){var r;return i.parseRows(e,(function(e,n){if(r)return r(e,n-1);var i=function(t){for(var r={},n=e.length,i=0;i<n;++i)r[e[i]]=t[i];return r};r=t?function(e,r){return t(i(e),r)}:i}))},i.parseRows=function(e,t){var r,i,a={},o={},s=[],l=e.length,c=0,u=0;function d(){if(c>=l)return o;if(i)return i=!1,a;var t=c;if(34===e.charCodeAt(t)){for(var r=t;r++<l;)if(34===e.charCodeAt(r)){if(34!==e.charCodeAt(r+1))break;++r}return c=r+2,13===(s=e.charCodeAt(r+1))?(i=!0,10===e.charCodeAt(r+2)&&++c):10===s&&(i=!0),e.slice(t+1,r).replace(/""/g,'"')}for(;c<l;){var s,u=1;if(10===(s=e.charCodeAt(c++)))i=!0;else if(13===s)i=!0,10===e.charCodeAt(c)&&(++c,++u);else if(s!==n)continue;return e.slice(t,c-u)}return e.slice(t)}for(;(r=d())!==o;){for(var h=[];r!==a&&r!==o;)h.push(r),r=d();t&&null==(h=t(h,u++))||s.push(h)}return s},i.format=function(t){if(Array.isArray(t[0]))return i.formatRows(t);var r=new S,n=[];return t.forEach((function(e){for(var t in e)r.has(t)||n.push(r.add(t))})),[n.map(l).join(e)].concat(t.map((function(t){return n.map((function(e){return l(t[e])})).join(e)}))).join("\n")},i.formatRows=function(e){return e.map(s).join("\n")},i},t.csv=t.dsv(",","text/csv"),t.tsv=t.dsv("\t","text/tab-separated-values");var ft,mt,yt,bt,vt=this[_(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function xt(e,t,r){var n=arguments.length;n<2&&(t=0),n<3&&(r=Date.now());var i=r+t,a={c:e,t:i,n:null};return mt?mt.n=a:ft=a,mt=a,yt||(bt=clearTimeout(bt),yt=1,vt(Bt)),a}function Bt(){var e=It(),t=Ft()-e;t>24?(isFinite(t)&&(clearTimeout(bt),bt=setTimeout(Bt,t)),yt=0):(yt=1,vt(Bt))}function It(){for(var e=Date.now(),t=ft;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Ft(){for(var e,t=ft,r=1/0;t;)t.c?(t.t<r&&(r=t.t),t=(e=t).n):t=e?e.n=t.n:ft=t.n;return mt=e,r}function At(e){return e[0]}function Ct(e){return e[1]}function wt(e){for(var t=e.length,r=[0,1],n=2,i=2;i<t;i++){for(;n>1&&Le(e[r[n-2]],e[r[n-1]],e[i])<=0;)--n;r[n++]=i}return r.slice(0,n)}function Qt(e,t){return e[0]-t[0]||e[1]-t[1]}t.timer=function(){xt.apply(this,arguments)},t.timer.flush=function(){It(),Ft()},t.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},t.geom={},t.geom.hull=function(e){var t=At,r=Ct;if(arguments.length)return n(e);function n(e){if(e.length<3)return[];var n,i=ht(t),a=ht(r),o=e.length,s=[],l=[];for(n=0;n<o;n++)s.push([+i.call(this,e[n],n),+a.call(this,e[n],n),n]);for(s.sort(Qt),n=0;n<o;n++)l.push([s[n][0],-s[n][1]]);var c=wt(s),u=wt(l),d=u[0]===c[0],h=u[u.length-1]===c[c.length-1],g=[];for(n=c.length-1;n>=0;--n)g.push(e[s[c[n]][2]]);for(n=+d;n<u.length-h;++n)g.push(e[s[u[n]][2]]);return g}return n.x=function(e){return arguments.length?(t=e,n):t},n.y=function(e){return arguments.length?(r=e,n):r},n},t.geom.polygon=function(e){return V(e,Ut),e};var Ut=t.geom.polygon.prototype=[];function St(e,t,r){return(r[0]-t[0])*(e[1]-t[1])<(r[1]-t[1])*(e[0]-t[0])}function Et(e,t,r,n){var i=e[0],a=r[0],o=t[0]-i,s=n[0]-a,l=e[1],c=r[1],u=t[1]-l,d=n[1]-c,h=(s*(l-c)-d*(i-a))/(d*o-s*u);return[i+h*o,l+h*u]}function Lt(e){var t=e[0],r=e[e.length-1];return!(t[0]-r[0]||t[1]-r[1])}Ut.area=function(){for(var e,t=-1,r=this.length,n=this[r-1],i=0;++t<r;)e=n,n=this[t],i+=e[1]*n[0]-e[0]*n[1];return.5*i},Ut.centroid=function(e){var t,r,n=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++n<i;)t=s,s=this[n],r=t[0]*s[1]-s[0]*t[1],a+=(t[0]+s[0])*r,o+=(t[1]+s[1])*r;return[a*e,o*e]},Ut.clip=function(e){for(var t,r,n,i,a,o,s=Lt(e),l=-1,c=this.length-Lt(this),u=this[c-1];++l<c;){for(t=e.slice(),e.length=0,i=this[l],a=t[(n=t.length-s)-1],r=-1;++r<n;)St(o=t[r],u,i)?(St(a,u,i)||e.push(Et(a,o,u,i)),e.push(o)):St(a,u,i)&&e.push(Et(a,o,u,i)),a=o;s&&e.push(e[0]),u=i}return e};var _t,Tt,Rt,$t,kt,Nt=[],Gt=[];function Mt(){ir(this),this.edge=this.site=this.circle=null}function Dt(e){var t=Nt.pop()||new Mt;return t.site=e,t}function Vt(e){Jt(e),Rt.remove(e),Nt.push(e),ir(e)}function Ht(e){var t=e.circle,r=t.x,n=t.cy,i={x:r,y:n},a=e.P,o=e.N,s=[e];Vt(e);for(var l=a;l.circle&&b(r-l.circle.x)<Ae&&b(n-l.circle.cy)<Ae;)a=l.P,s.unshift(l),Vt(l),l=a;s.unshift(l),Jt(l);for(var c=o;c.circle&&b(r-c.circle.x)<Ae&&b(n-c.circle.cy)<Ae;)o=c.N,s.push(c),Vt(c),c=o;s.push(c),Jt(c);var u,d=s.length;for(u=1;u<d;++u)c=s[u],l=s[u-1],tr(c.edge,l.site,c.site,i);l=s[0],(c=s[d-1]).edge=qt(l.site,c.site,null,i),zt(l),zt(c)}function Xt(e){for(var t,r,n,i,a=e.x,o=e.y,s=Rt._;s;)if((n=Ot(s,o)-a)>Ae)s=s.L;else{if(!((i=a-Zt(s,o))>Ae)){n>-Ae?(t=s.P,r=s):i>-Ae?(t=s,r=s.N):t=r=s;break}if(!s.R){t=s;break}s=s.R}var l=Dt(e);if(Rt.insert(t,l),t||r){if(t===r)return Jt(t),r=Dt(t.site),Rt.insert(l,r),l.edge=r.edge=qt(t.site,l.site),zt(t),void zt(r);if(r){Jt(t),Jt(r);var c=t.site,u=c.x,d=c.y,h=e.x-u,g=e.y-d,p=r.site,f=p.x-u,m=p.y-d,y=2*(h*m-g*f),b=h*h+g*g,v=f*f+m*m,x={x:(m*b-g*v)/y+u,y:(h*v-f*b)/y+d};tr(r.edge,c,p,x),l.edge=qt(c,e,null,x),r.edge=qt(e,p,null,x),zt(t),zt(r)}else l.edge=qt(t.site,l.site)}}function Ot(e,t){var r=e.site,n=r.x,i=r.y,a=i-t;if(!a)return n;var o=e.P;if(!o)return-1/0;var s=(r=o.site).x,l=r.y,c=l-t;if(!c)return s;var u=s-n,d=1/a-1/c,h=u/c;return d?(-h+Math.sqrt(h*h-2*d*(u*u/(-2*c)-l+c/2+i-a/2)))/d+n:(n+s)/2}function Zt(e,t){var r=e.N;if(r)return Ot(r,t);var n=e.site;return n.y===t?n.x:1/0}function Wt(e){this.site=e,this.edges=[]}function Yt(e,t){return t.angle-e.angle}function Pt(){ir(this),this.x=this.y=this.arc=this.site=this.cy=null}function zt(e){var t=e.P,r=e.N;if(t&&r){var n=t.site,i=e.site,a=r.site;if(n!==a){var o=i.x,s=i.y,l=n.x-o,c=n.y-s,u=a.x-o,d=2*(l*(m=a.y-s)-c*u);if(!(d>=-1e-12)){var h=l*l+c*c,g=u*u+m*m,p=(m*h-c*g)/d,f=(l*g-u*h)/d,m=f+s,y=Gt.pop()||new Pt;y.arc=e,y.site=i,y.x=p+o,y.y=m+Math.sqrt(p*p+f*f),y.cy=m,e.circle=y;for(var b=null,v=kt._;v;)if(y.y<v.y||y.y===v.y&&y.x<=v.x){if(!v.L){b=v.P;break}v=v.L}else{if(!v.R){b=v;break}v=v.R}kt.insert(b,y),b||($t=y)}}}}function Jt(e){var t=e.circle;t&&(t.P||($t=t.N),kt.remove(t),Gt.push(t),ir(t),e.circle=null)}function jt(e,t){var r=e.b;if(r)return!0;var n,i,a=e.a,o=t[0][0],s=t[1][0],l=t[0][1],c=t[1][1],u=e.l,d=e.r,h=u.x,g=u.y,p=d.x,f=d.y,m=(h+p)/2,y=(g+f)/2;if(f===g){if(m<o||m>=s)return;if(h>p){if(a){if(a.y>=c)return}else a={x:m,y:l};r={x:m,y:c}}else{if(a){if(a.y<l)return}else a={x:m,y:c};r={x:m,y:l}}}else if(i=y-(n=(h-p)/(f-g))*m,n<-1||n>1)if(h>p){if(a){if(a.y>=c)return}else a={x:(l-i)/n,y:l};r={x:(c-i)/n,y:c}}else{if(a){if(a.y<l)return}else a={x:(c-i)/n,y:c};r={x:(l-i)/n,y:l}}else if(g<f){if(a){if(a.x>=s)return}else a={x:o,y:n*o+i};r={x:s,y:n*s+i}}else{if(a){if(a.x<o)return}else a={x:s,y:n*s+i};r={x:o,y:n*o+i}}return e.a=a,e.b=r,!0}function Kt(e,t){this.l=e,this.r=t,this.a=this.b=null}function qt(e,t,r,n){var i=new Kt(e,t);return _t.push(i),r&&tr(i,e,t,r),n&&tr(i,t,e,n),Tt[e.i].edges.push(new rr(i,e,t)),Tt[t.i].edges.push(new rr(i,t,e)),i}function er(e,t,r){var n=new Kt(e,null);return n.a=t,n.b=r,_t.push(n),n}function tr(e,t,r,n){e.a||e.b?e.l===r?e.b=n:e.a=n:(e.a=n,e.l=t,e.r=r)}function rr(e,t,r){var n=e.a,i=e.b;this.edge=e,this.site=t,this.angle=r?Math.atan2(r.y-t.y,r.x-t.x):e.l===t?Math.atan2(i.x-n.x,n.y-i.y):Math.atan2(n.x-i.x,i.y-n.y)}function nr(){this._=null}function ir(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function ar(e,t){var r=t,n=t.R,i=r.U;i?i.L===r?i.L=n:i.R=n:e._=n,n.U=i,r.U=n,r.R=n.L,r.R&&(r.R.U=r),n.L=r}function or(e,t){var r=t,n=t.L,i=r.U;i?i.L===r?i.L=n:i.R=n:e._=n,n.U=i,r.U=n,r.L=n.R,r.L&&(r.L.U=r),n.R=r}function sr(e){for(;e.L;)e=e.L;return e}function lr(e,t){var r,n,i,a=e.sort(cr).pop();for(_t=[],Tt=new Array(e.length),Rt=new nr,kt=new nr;;)if(i=$t,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))a.x===r&&a.y===n||(Tt[a.i]=new Wt(a),Xt(a),r=a.x,n=a.y),a=e.pop();else{if(!i)break;Ht(i.arc)}t&&(function(e){for(var t,r,n,i,a,o=_t,s=(r=e[0][0],n=e[0][1],i=e[1][0],a=e[1][1],function(e){var t,o=e.a,s=e.b,l=o.x,c=o.y,u=0,d=1,h=s.x-l,g=s.y-c;if(t=r-l,h||!(t>0)){if(t/=h,h<0){if(t<u)return;t<d&&(d=t)}else if(h>0){if(t>d)return;t>u&&(u=t)}if(t=i-l,h||!(t<0)){if(t/=h,h<0){if(t>d)return;t>u&&(u=t)}else if(h>0){if(t<u)return;t<d&&(d=t)}if(t=n-c,g||!(t>0)){if(t/=g,g<0){if(t<u)return;t<d&&(d=t)}else if(g>0){if(t>d)return;t>u&&(u=t)}if(t=a-c,g||!(t<0)){if(t/=g,g<0){if(t>d)return;t>u&&(u=t)}else if(g>0){if(t<u)return;t<d&&(d=t)}return u>0&&(e.a={x:l+u*h,y:c+u*g}),d<1&&(e.b={x:l+d*h,y:c+d*g}),e}}}}}),l=o.length;l--;)(!jt(t=o[l],e)||!s(t)||b(t.a.x-t.b.x)<Ae&&b(t.a.y-t.b.y)<Ae)&&(t.a=t.b=null,o.splice(l,1))}(t),function(e){for(var t,r,n,i,a,o,s,l,c,u,d=e[0][0],h=e[1][0],g=e[0][1],p=e[1][1],f=Tt,m=f.length;m--;)if((a=f[m])&&a.prepare())for(l=(s=a.edges).length,o=0;o<l;)n=(u=s[o].end()).x,i=u.y,t=(c=s[++o%l].start()).x,r=c.y,(b(n-t)>Ae||b(i-r)>Ae)&&(s.splice(o,0,new rr(er(a.site,u,b(n-d)<Ae&&p-i>Ae?{x:d,y:b(t-d)<Ae?r:p}:b(i-p)<Ae&&h-n>Ae?{x:b(r-p)<Ae?t:h,y:p}:b(n-h)<Ae&&i-g>Ae?{x:h,y:b(t-h)<Ae?r:g}:b(i-g)<Ae&&n-d>Ae?{x:b(r-g)<Ae?t:d,y:g}:null),a.site,null)),++l)}(t));var o={cells:Tt,edges:_t};return Rt=kt=_t=Tt=null,o}function cr(e,t){return t.y-e.y||t.x-e.x}Wt.prototype.prepare=function(){for(var e,t=this.edges,r=t.length;r--;)(e=t[r].edge).b&&e.a||t.splice(r,1);return t.sort(Yt),t.length},rr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nr.prototype={insert:function(e,t){var r,n,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;r=e}else this._?(e=sr(this._),t.P=null,t.N=e,e.P=e.L=t,r=e):(t.P=t.N=null,this._=t,r=null);for(t.L=t.R=null,t.U=r,t.C=!0,e=t;r&&r.C;)r===(n=r.U).L?(i=n.R)&&i.C?(r.C=i.C=!1,n.C=!0,e=n):(e===r.R&&(ar(this,r),r=(e=r).U),r.C=!1,n.C=!0,or(this,n)):(i=n.L)&&i.C?(r.C=i.C=!1,n.C=!0,e=n):(e===r.L&&(or(this,r),r=(e=r).U),r.C=!1,n.C=!0,ar(this,n)),r=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,r,n,i=e.U,a=e.L,o=e.R;if(r=a?o?sr(o):a:o,i?i.L===e?i.L=r:i.R=r:this._=r,a&&o?(n=r.C,r.C=e.C,r.L=a,a.U=r,r!==o?(i=r.U,r.U=e.U,e=r.R,i.L=e,r.R=o,o.U=r):(r.U=i,i=r,e=r.R)):(n=e.C,e=r),e&&(e.U=i),!n)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,ar(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,or(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,ar(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,or(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ar(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,or(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},t.geom.voronoi=function(e){var t=At,r=Ct,n=t,i=r,a=ur;if(e)return o(e);function o(e){var t=new Array(e.length),r=a[0][0],n=a[0][1],i=a[1][0],o=a[1][1];return lr(s(e),a).cells.forEach((function(a,s){var l=a.edges,c=a.site,u=t[s]=l.length?l.map((function(e){var t=e.start();return[t.x,t.y]})):c.x>=r&&c.x<=i&&c.y>=n&&c.y<=o?[[r,o],[i,o],[i,n],[r,n]]:[];u.point=e[s]})),t}function s(e){return e.map((function(e,t){return{x:Math.round(n(e,t)/Ae)*Ae,y:Math.round(i(e,t)/Ae)*Ae,i:t}}))}return o.links=function(e){return lr(s(e)).edges.filter((function(e){return e.l&&e.r})).map((function(t){return{source:e[t.l.i],target:e[t.r.i]}}))},o.triangles=function(e){var t=[];return lr(s(e)).cells.forEach((function(r,n){for(var i,a=r.site,o=r.edges.sort(Yt),s=-1,l=o.length,c=o[l-1].edge,u=c.l===a?c.r:c.l;++s<l;)i=u,u=(c=o[s].edge).l===a?c.r:c.l,n<i.i&&n<u.i&&dr(a,i,u)<0&&t.push([e[n],e[i.i],e[u.i]])})),t},o.x=function(e){return arguments.length?(n=ht(t=e),o):t},o.y=function(e){return arguments.length?(i=ht(r=e),o):r},o.clipExtent=function(e){return arguments.length?(a=null==e?ur:e,o):a===ur?null:a},o.size=function(e){return arguments.length?o.clipExtent(e&&[[0,0],e]):a===ur?null:a&&a[1]},o};var ur=[[-1e6,-1e6],[1e6,1e6]];function dr(e,t,r){return(e.x-r.x)*(t.y-e.y)-(e.x-t.x)*(r.y-e.y)}function hr(e){return e.x}function gr(e){return e.y}function pr(e,t,r,n,i,a){if(!e(t,r,n,i,a)){var o=.5*(r+i),s=.5*(n+a),l=t.nodes;l[0]&&pr(e,l[0],r,n,o,s),l[1]&&pr(e,l[1],o,n,i,s),l[2]&&pr(e,l[2],r,s,o,a),l[3]&&pr(e,l[3],o,s,i,a)}}function fr(e,t,r,n,i,a,o){var s,l=1/0;return function e(c,u,d,h,g){if(!(u>a||d>o||h<n||g<i)){if(p=c.point){var p,f=t-c.x,m=r-c.y,y=f*f+m*m;if(y<l){var b=Math.sqrt(l=y);n=t-b,i=r-b,a=t+b,o=r+b,s=p}}for(var v=c.nodes,x=.5*(u+h),B=.5*(d+g),I=(r>=B)<<1|t>=x,F=I+4;I<F;++I)if(c=v[3&I])switch(3&I){case 0:e(c,u,d,x,B);break;case 1:e(c,x,d,h,B);break;case 2:e(c,u,B,x,g);break;case 3:e(c,x,B,h,g)}}}(e,n,i,a,o),s}function mr(e,r){e=t.rgb(e),r=t.rgb(r);var n=e.r,i=e.g,a=e.b,o=r.r-n,s=r.g-i,l=r.b-a;return function(e){return"#"+at(Math.round(n+o*e))+at(Math.round(i+s*e))+at(Math.round(a+l*e))}}function yr(e,t){var r,n={},i={};for(r in e)r in t?n[r]=Ir(e[r],t[r]):i[r]=e[r];for(r in t)r in e||(i[r]=t[r]);return function(e){for(r in n)i[r]=n[r](e);return i}}function br(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function vr(e,t){var r,n,i,a=xr.lastIndex=Br.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(r=xr.exec(e))&&(n=Br.exec(t));)(i=n.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,l.push({i:o,x:br(r,n)})),a=Br.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var r,n=0;n<t;++n)s[(r=l[n]).i]=r.x(e);return s.join("")})}t.geom.delaunay=function(e){return t.geom.voronoi().triangles(e)},t.geom.quadtree=function(e,t,r,n,i){var a,o=At,s=Ct;if(a=arguments.length)return o=hr,s=gr,3===a&&(i=r,n=t,r=t=0),l(e);function l(e){var l,c,u,d,h,g,p,f,m,y=ht(o),v=ht(s);if(null!=t)g=t,p=r,f=n,m=i;else if(f=m=-(g=p=1/0),c=[],u=[],h=e.length,a)for(d=0;d<h;++d)(l=e[d]).x<g&&(g=l.x),l.y<p&&(p=l.y),l.x>f&&(f=l.x),l.y>m&&(m=l.y),c.push(l.x),u.push(l.y);else for(d=0;d<h;++d){var x=+y(l=e[d],d),B=+v(l,d);x<g&&(g=x),B<p&&(p=B),x>f&&(f=x),B>m&&(m=B),c.push(x),u.push(B)}var I=f-g,F=m-p;function A(e,t,r,n,i,a,o,s){if(!isNaN(r)&&!isNaN(n))if(e.leaf){var l=e.x,c=e.y;if(null!=l)if(b(l-r)+b(c-n)<.01)C(e,t,r,n,i,a,o,s);else{var u=e.point;e.x=e.y=e.point=null,C(e,u,l,c,i,a,o,s),C(e,t,r,n,i,a,o,s)}else e.x=r,e.y=n,e.point=t}else C(e,t,r,n,i,a,o,s)}function C(e,t,r,n,i,a,o,s){var l=.5*(i+o),c=.5*(a+s),u=r>=l,d=n>=c,h=d<<1|u;e.leaf=!1,u?i=l:o=l,d?a=c:s=c,A(e=e.nodes[h]||(e.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null}),t,r,n,i,a,o,s)}I>F?m=p+I:f=g+F;var w={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){A(w,e,+y(e,++d),+v(e,d),g,p,f,m)},visit:function(e){pr(e,w,g,p,f,m)},find:function(e){return fr(w,e[0],e[1],g,p,f,m)}};if(d=-1,null==t){for(;++d<h;)A(w,e[d],c[d],u[d],g,p,f,m);--d}else e.forEach(w.add);return c=u=e=l=null,w}return l.x=function(e){return arguments.length?(o=e,l):o},l.y=function(e){return arguments.length?(s=e,l):s},l.extent=function(e){return arguments.length?(null==e?t=r=n=i=null:(t=+e[0][0],r=+e[0][1],n=+e[1][0],i=+e[1][1]),l):null==t?null:[[t,r],[n,i]]},l.size=function(e){return arguments.length?(null==e?t=r=n=i=null:(t=r=0,n=+e[0],i=+e[1]),l):null==t?null:[n-t,i-r]},l},t.interpolateRgb=mr,t.interpolateObject=yr,t.interpolateNumber=br,t.interpolateString=vr;var xr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Br=new RegExp(xr.source,"g");function Ir(e,r){for(var n,i=t.interpolators.length;--i>=0&&!(n=t.interpolators[i](e,r)););return n}function Fr(e,t){var r,n=[],i=[],a=e.length,o=t.length,s=Math.min(e.length,t.length);for(r=0;r<s;++r)n.push(Ir(e[r],t[r]));for(;r<a;++r)i[r]=e[r];for(;r<o;++r)i[r]=t[r];return function(e){for(r=0;r<s;++r)i[r]=n[r](e);return i}}t.interpolate=Ir,t.interpolators=[function(e,t){var r=typeof t;return("string"===r?dt.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?mr:vr:t instanceof Ge?mr:Array.isArray(t)?Fr:"object"===r&&isNaN(t)?yr:br)(e,t)}],t.interpolateArray=Fr;var Ar=function(){return E},Cr=t.map({linear:Ar,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return Er},cubic:function(){return Lr},sin:function(){return Tr},exp:function(){return Rr},circle:function(){return $r},elastic:function(e,t){var r;arguments.length<2&&(t=.45);arguments.length?r=t/we*Math.asin(1/e):(e=1,r=t/4);return function(n){return 1+e*Math.pow(2,-10*n)*Math.sin((n-r)*we/t)}},back:function(e){e||(e=1.70158);return function(t){return t*t*((e+1)*t-e)}},bounce:function(){return kr}}),wr=t.map({in:E,out:Ur,"in-out":Sr,"out-in":function(e){return Sr(Ur(e))}});function Qr(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function Ur(e){return function(t){return 1-e(1-t)}}function Sr(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Er(e){return e*e}function Lr(e){return e*e*e}function _r(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)}function Tr(e){return 1-Math.cos(e*Ue)}function Rr(e){return Math.pow(2,10*(e-1))}function $r(e){return 1-Math.sqrt(1-e*e)}function kr(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Nr(e,t){return t-=e,function(r){return Math.round(e+t*r)}}function Gr(e){var t=[e.a,e.b],r=[e.c,e.d],n=Dr(t),i=Mr(t,r),a=Dr(function(e,t,r){return e[0]+=r*t[0],e[1]+=r*t[1],e}(r,t,-i))||0;t[0]*r[1]<r[0]*t[1]&&(t[0]*=-1,t[1]*=-1,n*=-1,i*=-1),this.rotate=(n?Math.atan2(t[1],t[0]):Math.atan2(-r[0],r[1]))*Ee,this.translate=[e.e,e.f],this.scale=[n,a],this.skew=a?Math.atan2(i,a)*Ee:0}function Mr(e,t){return e[0]*t[0]+e[1]*t[1]}function Dr(e){var t=Math.sqrt(Mr(e,e));return t&&(e[0]/=t,e[1]/=t),t}t.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,i=t>=0?e.slice(t+1):"in";return n=Cr.get(n)||Ar,Qr((i=wr.get(i)||E)(n.apply(null,r.call(arguments,1))))},t.interpolateHcl=function(e,r){e=t.hcl(e),r=t.hcl(r);var n=e.h,i=e.c,a=e.l,o=r.h-n,s=r.c-i,l=r.l-a;isNaN(s)&&(s=0,i=isNaN(i)?r.c:i);isNaN(o)?(o=0,n=isNaN(n)?r.h:n):o>180?o-=360:o<-180&&(o+=360);return function(e){return Oe(n+o*e,i+s*e,a+l*e)+""}},t.interpolateHsl=function(e,r){e=t.hsl(e),r=t.hsl(r);var n=e.h,i=e.s,a=e.l,o=r.h-n,s=r.s-i,l=r.l-a;isNaN(s)&&(s=0,i=isNaN(i)?r.s:i);isNaN(o)?(o=0,n=isNaN(n)?r.h:n):o>180?o-=360:o<-180&&(o+=360);return function(e){return Ve(n+o*e,i+s*e,a+l*e)+""}},t.interpolateLab=function(e,r){e=t.lab(e),r=t.lab(r);var n=e.l,i=e.a,a=e.b,o=r.l-n,s=r.a-i,l=r.b-a;return function(e){return Je(n+o*e,i+s*e,a+l*e)+""}},t.interpolateRound=Nr,t.transform=function(e){var r=i.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(e){if(null!=e){r.setAttribute("transform",e);var t=r.transform.baseVal.consolidate()}return new Gr(t?t.matrix:Vr)})(e)},Gr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Vr={a:1,b:0,c:0,d:1,e:0,f:0};function Hr(e){return e.length?e.pop()+",":""}function Xr(e,r){var n=[],i=[];return e=t.transform(e),r=t.transform(r),function(e,t,r,n){if(e[0]!==t[0]||e[1]!==t[1]){var i=r.push("translate(",null,",",null,")");n.push({i:i-4,x:br(e[0],t[0])},{i:i-2,x:br(e[1],t[1])})}else(t[0]||t[1])&&r.push("translate("+t+")")}(e.translate,r.translate,n,i),function(e,t,r,n){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),n.push({i:r.push(Hr(r)+"rotate(",null,")")-2,x:br(e,t)})):t&&r.push(Hr(r)+"rotate("+t+")")}(e.rotate,r.rotate,n,i),function(e,t,r,n){e!==t?n.push({i:r.push(Hr(r)+"skewX(",null,")")-2,x:br(e,t)}):t&&r.push(Hr(r)+"skewX("+t+")")}(e.skew,r.skew,n,i),function(e,t,r,n){if(e[0]!==t[0]||e[1]!==t[1]){var i=r.push(Hr(r)+"scale(",null,",",null,")");n.push({i:i-4,x:br(e[0],t[0])},{i:i-2,x:br(e[1],t[1])})}else 1===t[0]&&1===t[1]||r.push(Hr(r)+"scale("+t+")")}(e.scale,r.scale,n,i),e=r=null,function(e){for(var t,r=-1,a=i.length;++r<a;)n[(t=i[r]).i]=t.x(e);return n.join("")}}function Or(e,t){return t=(t-=e=+e)||1/t,function(r){return(r-e)/t}}function Zr(e,t){return t=(t-=e=+e)||1/t,function(r){return Math.max(0,Math.min(1,(r-e)/t))}}function Wr(e){for(var t=e.source,r=e.target,n=function(e,t){if(e===t)return e;var r=Yr(e),n=Yr(t),i=r.pop(),a=n.pop(),o=null;for(;i===a;)o=i,i=r.pop(),a=n.pop();return o}(t,r),i=[t];t!==n;)t=t.parent,i.push(t);for(var a=i.length;r!==n;)i.splice(a,0,r),r=r.parent;return i}function Yr(e){for(var t=[],r=e.parent;null!=r;)t.push(e),e=r,r=r.parent;return t.push(e),t}function Pr(e){e.fixed|=2}function zr(e){e.fixed&=-7}function Jr(e){e.fixed|=4,e.px=e.x,e.py=e.y}function jr(e){e.fixed&=-5}function Kr(e,t,r){var n=0,i=0;if(e.charge=0,!e.leaf)for(var a,o=e.nodes,s=o.length,l=-1;++l<s;)null!=(a=o[l])&&(Kr(a,t,r),e.charge+=a.charge,n+=a.charge*a.cx,i+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=t*r[e.point.index];e.charge+=e.pointCharge=c,n+=c*e.point.x,i+=c*e.point.y}e.cx=n/e.charge,e.cy=i/e.charge}t.interpolateTransform=Xr,t.layout={},t.layout.bundle=function(){return function(e){for(var t=[],r=-1,n=e.length;++r<n;)t.push(Wr(e[r]));return t}},t.layout.chord=function(){var e,r,n,i,a,o,s,l={},c=0;function u(){var l,u,h,g,p,f={},m=[],y=t.range(i),b=[];for(e=[],r=[],l=0,g=-1;++g<i;){for(u=0,p=-1;++p<i;)u+=n[g][p];m.push(u),b.push(t.range(i)),l+=u}for(a&&y.sort((function(e,t){return a(m[e],m[t])})),o&&b.forEach((function(e,t){e.sort((function(e,r){return o(n[t][e],n[t][r])}))})),l=(we-c*i)/l,u=0,g=-1;++g<i;){for(h=u,p=-1;++p<i;){var v=y[g],x=b[v][p],B=n[v][x],I=u,F=u+=B*l;f[v+"-"+x]={index:v,subindex:x,startAngle:I,endAngle:F,value:B}}r[v]={index:v,startAngle:h,endAngle:u,value:m[v]},u+=c}for(g=-1;++g<i;)for(p=g-1;++p<i;){var A=f[g+"-"+p],C=f[p+"-"+g];(A.value||C.value)&&e.push(A.value<C.value?{source:C,target:A}:{source:A,target:C})}s&&d()}function d(){e.sort((function(e,t){return s((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)}))}return l.matrix=function(t){return arguments.length?(i=(n=t)&&n.length,e=r=null,l):n},l.padding=function(t){return arguments.length?(c=t,e=r=null,l):c},l.sortGroups=function(t){return arguments.length?(a=t,e=r=null,l):a},l.sortSubgroups=function(t){return arguments.length?(o=t,e=null,l):o},l.sortChords=function(t){return arguments.length?(s=t,e&&d(),l):s},l.chords=function(){return e||u(),e},l.groups=function(){return r||u(),r},l},t.layout.force=function(){var e,r,n,i,a,o,s={},l=t.dispatch("start","tick","end"),c=[1,1],u=.9,d=qr,h=en,g=-30,p=tn,f=.1,m=.64,y=[],b=[];function v(e){return function(t,r,n,i){if(t.point!==e){var a=t.cx-e.x,o=t.cy-e.y,s=i-r,l=a*a+o*o;if(s*s/m<l){if(l<p){var c=t.charge/l;e.px-=a*c,e.py-=o*c}return!0}if(t.point&&l&&l<p){c=t.pointCharge/l;e.px-=a*c,e.py-=o*c}}return!t.charge}}function x(e){e.px=t.event.x,e.py=t.event.y,s.resume()}return s.tick=function(){if((n*=.99)<.005)return e=null,l.end({type:"end",alpha:n=0}),!0;var r,s,d,h,p,m,x,B,I,F=y.length,A=b.length;for(s=0;s<A;++s)h=(d=b[s]).source,(m=(B=(p=d.target).x-h.x)*B+(I=p.y-h.y)*I)&&(B*=m=n*a[s]*((m=Math.sqrt(m))-i[s])/m,I*=m,p.x-=B*(x=h.weight+p.weight?h.weight/(h.weight+p.weight):.5),p.y-=I*x,h.x+=B*(x=1-x),h.y+=I*x);if((x=n*f)&&(B=c[0]/2,I=c[1]/2,s=-1,x))for(;++s<F;)(d=y[s]).x+=(B-d.x)*x,d.y+=(I-d.y)*x;if(g)for(Kr(r=t.geom.quadtree(y),n,o),s=-1;++s<F;)(d=y[s]).fixed||r.visit(v(d));for(s=-1;++s<F;)(d=y[s]).fixed?(d.x=d.px,d.y=d.py):(d.x-=(d.px-(d.px=d.x))*u,d.y-=(d.py-(d.py=d.y))*u);l.tick({type:"tick",alpha:n})},s.nodes=function(e){return arguments.length?(y=e,s):y},s.links=function(e){return arguments.length?(b=e,s):b},s.size=function(e){return arguments.length?(c=e,s):c},s.linkDistance=function(e){return arguments.length?(d="function"==typeof e?e:+e,s):d},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(h="function"==typeof e?e:+e,s):h},s.friction=function(e){return arguments.length?(u=+e,s):u},s.charge=function(e){return arguments.length?(g="function"==typeof e?e:+e,s):g},s.chargeDistance=function(e){return arguments.length?(p=e*e,s):Math.sqrt(p)},s.gravity=function(e){return arguments.length?(f=+e,s):f},s.theta=function(e){return arguments.length?(m=e*e,s):Math.sqrt(m)},s.alpha=function(t){return arguments.length?(t=+t,n?t>0?n=t:(e.c=null,e.t=NaN,e=null,l.end({type:"end",alpha:n=0})):t>0&&(l.start({type:"start",alpha:n=t}),e=xt(s.tick)),s):n},s.start=function(){var e,t,r,n=y.length,l=b.length,u=c[0],p=c[1];for(e=0;e<n;++e)(r=y[e]).index=e,r.weight=0;for(e=0;e<l;++e)"number"==typeof(r=b[e]).source&&(r.source=y[r.source]),"number"==typeof r.target&&(r.target=y[r.target]),++r.source.weight,++r.target.weight;for(e=0;e<n;++e)r=y[e],isNaN(r.x)&&(r.x=f("x",u)),isNaN(r.y)&&(r.y=f("y",p)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof d)for(e=0;e<l;++e)i[e]=+d.call(this,b[e],e);else for(e=0;e<l;++e)i[e]=d;if(a=[],"function"==typeof h)for(e=0;e<l;++e)a[e]=+h.call(this,b[e],e);else for(e=0;e<l;++e)a[e]=h;if(o=[],"function"==typeof g)for(e=0;e<n;++e)o[e]=+g.call(this,y[e],e);else for(e=0;e<n;++e)o[e]=g;function f(r,i){if(!t){for(t=new Array(n),c=0;c<n;++c)t[c]=[];for(c=0;c<l;++c){var a=b[c];t[a.source.index].push(a.target),t[a.target.index].push(a.source)}}for(var o,s=t[e],c=-1,u=s.length;++c<u;)if(!isNaN(o=s[c][r]))return o;return Math.random()*i}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(r||(r=t.behavior.drag().origin(E).on("dragstart.force",Pr).on("drag.force",x).on("dragend.force",zr)),!arguments.length)return r;this.on("mouseover.force",Jr).on("mouseout.force",jr).call(r)},t.rebind(s,l,"on")};var qr=20,en=1,tn=1/0;function rn(e,r){return t.rebind(e,r,"sort","children","value"),e.nodes=e,e.links=cn,e}function nn(e,t){for(var r=[e];null!=(e=r.pop());)if(t(e),(i=e.children)&&(n=i.length))for(var n,i;--n>=0;)r.push(i[n])}function an(e,t){for(var r=[e],n=[];null!=(e=r.pop());)if(n.push(e),(a=e.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)r.push(a[o]);for(;null!=(e=n.pop());)t(e)}function on(e){return e.children}function sn(e){return e.value}function ln(e,t){return t.value-e.value}function cn(e){return t.merge(e.map((function(e){return(e.children||[]).map((function(t){return{source:e,target:t}}))})))}t.layout.hierarchy=function(){var e=ln,t=on,r=sn;function n(i){var a,o=[i],s=[];for(i.depth=0;null!=(a=o.pop());)if(s.push(a),(c=t.call(n,a,a.depth))&&(l=c.length)){for(var l,c,u;--l>=0;)o.push(u=c[l]),u.parent=a,u.depth=a.depth+1;r&&(a.value=0),a.children=c}else r&&(a.value=+r.call(n,a,a.depth)||0),delete a.children;return an(i,(function(t){var n,i;e&&(n=t.children)&&n.sort(e),r&&(i=t.parent)&&(i.value+=t.value)})),s}return n.sort=function(t){return arguments.length?(e=t,n):e},n.children=function(e){return arguments.length?(t=e,n):t},n.value=function(e){return arguments.length?(r=e,n):r},n.revalue=function(e){return r&&(nn(e,(function(e){e.children&&(e.value=0)})),an(e,(function(e){var t;e.children||(e.value=+r.call(n,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)}))),e},n},t.layout.partition=function(){var e=t.layout.hierarchy(),r=[1,1];function n(e,t,r,i){var a=e.children;if(e.x=t,e.y=e.depth*i,e.dx=r,e.dy=i,a&&(o=a.length)){var o,s,l,c=-1;for(r=e.value?r/e.value:0;++c<o;)n(s=a[c],t,l=s.value*r,i),t+=l}}function i(e){var t=e.children,r=0;if(t&&(n=t.length))for(var n,a=-1;++a<n;)r=Math.max(r,i(t[a]));return 1+r}function a(t,a){var o=e.call(this,t,a);return n(o[0],0,r[0],r[1]/i(o[0])),o}return a.size=function(e){return arguments.length?(r=e,a):r},rn(a,e)},t.layout.pie=function(){var e=Number,r=un,n=0,i=we,a=0;function o(s){var l,c=s.length,u=s.map((function(t,r){return+e.call(o,t,r)})),d=+("function"==typeof n?n.apply(this,arguments):n),h=("function"==typeof i?i.apply(this,arguments):i)-d,g=Math.min(Math.abs(h)/c,+("function"==typeof a?a.apply(this,arguments):a)),p=g*(h<0?-1:1),f=t.sum(u),m=f?(h-c*p)/f:0,y=t.range(c),b=[];return null!=r&&y.sort(r===un?function(e,t){return u[t]-u[e]}:function(e,t){return r(s[e],s[t])}),y.forEach((function(e){b[e]={data:s[e],value:l=u[e],startAngle:d,endAngle:d+=l*m+p,padAngle:g}})),b}return o.value=function(t){return arguments.length?(e=t,o):e},o.sort=function(e){return arguments.length?(r=e,o):r},o.startAngle=function(e){return arguments.length?(n=e,o):n},o.endAngle=function(e){return arguments.length?(i=e,o):i},o.padAngle=function(e){return arguments.length?(a=e,o):a},o};var un={};function dn(e){return e.x}function hn(e){return e.y}function gn(e,t,r){e.y0=t,e.y=r}t.layout.stack=function(){var e=E,r=mn,n=yn,i=gn,a=dn,o=hn;function s(l,c){if(!(g=l.length))return l;var u=l.map((function(t,r){return e.call(s,t,r)})),d=u.map((function(e){return e.map((function(e,t){return[a.call(s,e,t),o.call(s,e,t)]}))})),h=r.call(s,d,c);u=t.permute(u,h),d=t.permute(d,h);var g,p,f,m,y=n.call(s,d,c),b=u[0].length;for(f=0;f<b;++f)for(i.call(s,u[0][f],m=y[f],d[0][f][1]),p=1;p<g;++p)i.call(s,u[p][f],m+=d[p-1][f][1],d[p][f][1]);return l}return s.values=function(t){return arguments.length?(e=t,s):e},s.order=function(e){return arguments.length?(r="function"==typeof e?e:pn.get(e)||mn,s):r},s.offset=function(e){return arguments.length?(n="function"==typeof e?e:fn.get(e)||yn,s):n},s.x=function(e){return arguments.length?(a=e,s):a},s.y=function(e){return arguments.length?(o=e,s):o},s.out=function(e){return arguments.length?(i=e,s):i},s};var pn=t.map({"inside-out":function(e){var r,n,i=e.length,a=e.map(bn),o=e.map(vn),s=t.range(i).sort((function(e,t){return a[e]-a[t]})),l=0,c=0,u=[],d=[];for(r=0;r<i;++r)n=s[r],l<c?(l+=o[n],u.push(n)):(c+=o[n],d.push(n));return d.reverse().concat(u)},reverse:function(e){return t.range(e.length).reverse()},default:mn}),fn=t.map({silhouette:function(e){var t,r,n,i=e.length,a=e[0].length,o=[],s=0,l=[];for(r=0;r<a;++r){for(t=0,n=0;t<i;t++)n+=e[t][r][1];n>s&&(s=n),o.push(n)}for(r=0;r<a;++r)l[r]=(s-o[r])/2;return l},wiggle:function(e){var t,r,n,i,a,o,s,l,c,u=e.length,d=e[0],h=d.length,g=[];for(g[0]=l=c=0,r=1;r<h;++r){for(t=0,i=0;t<u;++t)i+=e[t][r][1];for(t=0,a=0,s=d[r][0]-d[r-1][0];t<u;++t){for(n=0,o=(e[t][r][1]-e[t][r-1][1])/(2*s);n<t;++n)o+=(e[n][r][1]-e[n][r-1][1])/s;a+=o*e[t][r][1]}g[r]=l-=i?a/i*s:0,l<c&&(c=l)}for(r=0;r<h;++r)g[r]-=c;return g},expand:function(e){var t,r,n,i=e.length,a=e[0].length,o=1/i,s=[];for(r=0;r<a;++r){for(t=0,n=0;t<i;t++)n+=e[t][r][1];if(n)for(t=0;t<i;t++)e[t][r][1]/=n;else for(t=0;t<i;t++)e[t][r][1]=o}for(r=0;r<a;++r)s[r]=0;return s},zero:yn});function mn(e){return t.range(e.length)}function yn(e){for(var t=-1,r=e[0].length,n=[];++t<r;)n[t]=0;return n}function bn(e){for(var t,r=1,n=0,i=e[0][1],a=e.length;r<a;++r)(t=e[r][1])>i&&(n=r,i=t);return n}function vn(e){return e.reduce(xn,0)}function xn(e,t){return e+t[1]}function Bn(e,t){return In(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function In(e,t){for(var r=-1,n=+e[0],i=(e[1]-n)/t,a=[];++r<=t;)a[r]=i*r+n;return a}function Fn(e){return[t.min(e),t.max(e)]}function An(e,t){return e.value-t.value}function Cn(e,t){var r=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=r,r._pack_prev=t}function wn(e,t){e._pack_next=t,t._pack_prev=e}function Qn(e,t){var r=t.x-e.x,n=t.y-e.y,i=e.r+t.r;return.999*i*i>r*r+n*n}function Un(e){if((t=e.children)&&(l=t.length)){var t,r,n,i,a,o,s,l,c=1/0,u=-1/0,d=1/0,h=-1/0;if(t.forEach(Sn),(r=t[0]).x=-r.r,r.y=0,v(r),l>1&&((n=t[1]).x=n.r,n.y=0,v(n),l>2))for(_n(r,n,i=t[2]),v(i),Cn(r,i),r._pack_prev=i,Cn(i,n),n=r._pack_next,a=3;a<l;a++){_n(r,n,i=t[a]);var g=0,p=1,f=1;for(o=n._pack_next;o!==n;o=o._pack_next,p++)if(Qn(o,i)){g=1;break}if(1==g)for(s=r._pack_prev;s!==o._pack_prev&&!Qn(s,i);s=s._pack_prev,f++);g?(p<f||p==f&&n.r<r.r?wn(r,n=o):wn(r=s,n),a--):(Cn(r,i),n=i,v(i))}var m=(c+u)/2,y=(d+h)/2,b=0;for(a=0;a<l;a++)(i=t[a]).x-=m,i.y-=y,b=Math.max(b,i.r+Math.sqrt(i.x*i.x+i.y*i.y));e.r=b,t.forEach(En)}function v(e){c=Math.min(e.x-e.r,c),u=Math.max(e.x+e.r,u),d=Math.min(e.y-e.r,d),h=Math.max(e.y+e.r,h)}}function Sn(e){e._pack_next=e._pack_prev=e}function En(e){delete e._pack_next,delete e._pack_prev}function Ln(e,t,r,n){var i=e.children;if(e.x=t+=n*e.x,e.y=r+=n*e.y,e.r*=n,i)for(var a=-1,o=i.length;++a<o;)Ln(i[a],t,r,n)}function _n(e,t,r){var n=e.r+r.r,i=t.x-e.x,a=t.y-e.y;if(n&&(i||a)){var o=t.r+r.r,s=i*i+a*a,l=.5+((n*=n)-(o*=o))/(2*s),c=Math.sqrt(Math.max(0,2*o*(n+s)-(n-=s)*n-o*o))/(2*s);r.x=e.x+l*i+c*a,r.y=e.y+l*a-c*i}else r.x=e.x+n,r.y=e.y}function Tn(e,t){return e.parent==t.parent?1:2}function Rn(e){var t=e.children;return t.length?t[0]:e.t}function $n(e){var t,r=e.children;return(t=r.length)?r[t-1]:e.t}function kn(e,t,r){var n=r/(t.i-e.i);t.c-=n,t.s+=r,e.c+=n,t.z+=r,t.m+=r}function Nn(e,t,r){return e.a.parent===t.parent?e.a:r}function Gn(e){var t=e.children;return t&&t.length?Gn(t[0]):e}function Mn(e){var t,r=e.children;return r&&(t=r.length)?Mn(r[t-1]):e}function Dn(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Vn(e,t){var r=e.x+t[3],n=e.y+t[0],i=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];return i<0&&(r+=i/2,i=0),a<0&&(n+=a/2,a=0),{x:r,y:n,dx:i,dy:a}}function Hn(e){var t=e[0],r=e[e.length-1];return t<r?[t,r]:[r,t]}function Xn(e){return e.rangeExtent?e.rangeExtent():Hn(e.range())}function On(e,t,r,n){var i=r(e[0],e[1]),a=n(t[0],t[1]);return function(e){return a(i(e))}}function Zn(e,t){var r,n=0,i=e.length-1,a=e[n],o=e[i];return o<a&&(r=n,n=i,i=r,r=a,a=o,o=r),e[n]=t.floor(a),e[i]=t.ceil(o),e}function Wn(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:Yn}t.layout.histogram=function(){var e=!0,r=Number,n=Fn,i=Bn;function a(a,o){for(var s,l,c=[],u=a.map(r,this),d=n.call(this,u,o),h=i.call(this,d,u,o),g=(o=-1,u.length),p=h.length-1,f=e?1:1/g;++o<p;)(s=c[o]=[]).dx=h[o+1]-(s.x=h[o]),s.y=0;if(p>0)for(o=-1;++o<g;)(l=u[o])>=d[0]&&l<=d[1]&&((s=c[t.bisect(h,l,1,p)-1]).y+=f,s.push(a[o]));return c}return a.value=function(e){return arguments.length?(r=e,a):r},a.range=function(e){return arguments.length?(n=ht(e),a):n},a.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return In(t,e)}:ht(e),a):i},a.frequency=function(t){return arguments.length?(e=!!t,a):e},a},t.layout.pack=function(){var e,r=t.layout.hierarchy().sort(An),n=0,i=[1,1];function a(t,a){var o=r.call(this,t,a),s=o[0],l=i[0],c=i[1],u=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,an(s,(function(e){e.r=+u(e.value)})),an(s,Un),n){var d=n*(e?1:Math.max(2*s.r/l,2*s.r/c))/2;an(s,(function(e){e.r+=d})),an(s,Un),an(s,(function(e){e.r-=d}))}return Ln(s,l/2,c/2,e?1:1/Math.max(2*s.r/l,2*s.r/c)),o}return a.size=function(e){return arguments.length?(i=e,a):i},a.radius=function(t){return arguments.length?(e=null==t||"function"==typeof t?t:+t,a):e},a.padding=function(e){return arguments.length?(n=+e,a):n},rn(a,r)},t.layout.tree=function(){var e=t.layout.hierarchy().sort(null).value(null),r=Tn,n=[1,1],i=null;function a(t,a){var c=e.call(this,t,a),u=c[0],d=function(e){var t,r={A:null,children:[e]},n=[r];for(;null!=(t=n.pop());)for(var i,a=t.children,o=0,s=a.length;o<s;++o)n.push((a[o]=i={_:a[o],parent:t,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return r.children[0]}(u);if(an(d,o),d.parent.m=-d.z,nn(d,s),i)nn(u,l);else{var h=u,g=u,p=u;nn(u,(function(e){e.x<h.x&&(h=e),e.x>g.x&&(g=e),e.depth>p.depth&&(p=e)}));var f=r(h,g)/2-h.x,m=n[0]/(g.x+r(g,h)/2+f),y=n[1]/(p.depth||1);nn(u,(function(e){e.x=(e.x+f)*m,e.y=e.depth*y}))}return c}function o(e){var t=e.children,n=e.parent.children,i=e.i?n[e.i-1]:null;if(t.length){!function(e){var t,r=0,n=0,i=e.children,a=i.length;for(;--a>=0;)(t=i[a]).z+=r,t.m+=r,r+=t.s+(n+=t.c)}(e);var a=(t[0].z+t[t.length-1].z)/2;i?(e.z=i.z+r(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+r(e._,i._));e.parent.A=function(e,t,n){if(t){for(var i,a=e,o=e,s=t,l=a.parent.children[0],c=a.m,u=o.m,d=s.m,h=l.m;s=$n(s),a=Rn(a),s&&a;)l=Rn(l),(o=$n(o)).a=e,(i=s.z+d-a.z-c+r(s._,a._))>0&&(kn(Nn(s,e,n),e,i),c+=i,u+=i),d+=s.m,c+=a.m,h+=l.m,u+=o.m;s&&!$n(o)&&(o.t=s,o.m+=d-u),a&&!Rn(l)&&(l.t=a,l.m+=c-h,n=e)}return n}(e,i,e.parent.A||n[0])}function s(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function l(e){e.x*=n[0],e.y=e.depth*n[1]}return a.separation=function(e){return arguments.length?(r=e,a):r},a.size=function(e){return arguments.length?(i=null==(n=e)?l:null,a):i?null:n},a.nodeSize=function(e){return arguments.length?(i=null==(n=e)?null:l,a):i?n:null},rn(a,e)},t.layout.cluster=function(){var e=t.layout.hierarchy().sort(null).value(null),r=Tn,n=[1,1],i=!1;function a(a,o){var s,l=e.call(this,a,o),c=l[0],u=0;an(c,(function(e){var n=e.children;n&&n.length?(e.x=function(e){return e.reduce((function(e,t){return e+t.x}),0)/e.length}(n),e.y=function(e){return 1+t.max(e,(function(e){return e.y}))}(n)):(e.x=s?u+=r(e,s):0,e.y=0,s=e)}));var d=Gn(c),h=Mn(c),g=d.x-r(d,h)/2,p=h.x+r(h,d)/2;return an(c,i?function(e){e.x=(e.x-c.x)*n[0],e.y=(c.y-e.y)*n[1]}:function(e){e.x=(e.x-g)/(p-g)*n[0],e.y=(1-(c.y?e.y/c.y:1))*n[1]}),l}return a.separation=function(e){return arguments.length?(r=e,a):r},a.size=function(e){return arguments.length?(i=null==(n=e),a):i?null:n},a.nodeSize=function(e){return arguments.length?(i=null!=(n=e),a):i?n:null},rn(a,e)},t.layout.treemap=function(){var e,r=t.layout.hierarchy(),n=Math.round,i=[1,1],a=null,o=Dn,s=!1,l="squarify",c=.5*(1+Math.sqrt(5));function u(e,t){for(var r,n,i=-1,a=e.length;++i<a;)n=(r=e[i]).value*(t<0?0:t),r.area=isNaN(n)||n<=0?0:n}function d(e){var t=e.children;if(t&&t.length){var r,n,i,a=o(e),s=[],c=t.slice(),h=1/0,f="slice"===l?a.dx:"dice"===l?a.dy:"slice-dice"===l?1&e.depth?a.dy:a.dx:Math.min(a.dx,a.dy);for(u(c,a.dx*a.dy/e.value),s.area=0;(i=c.length)>0;)s.push(r=c[i-1]),s.area+=r.area,"squarify"!==l||(n=g(s,f))<=h?(c.pop(),h=n):(s.area-=s.pop().area,p(s,f,a,!1),f=Math.min(a.dx,a.dy),s.length=s.area=0,h=1/0);s.length&&(p(s,f,a,!0),s.length=s.area=0),t.forEach(d)}}function h(e){var t=e.children;if(t&&t.length){var r,n=o(e),i=t.slice(),a=[];for(u(i,n.dx*n.dy/e.value),a.area=0;r=i.pop();)a.push(r),a.area+=r.area,null!=r.z&&(p(a,r.z?n.dx:n.dy,n,!i.length),a.length=a.area=0);t.forEach(h)}}function g(e,t){for(var r,n=e.area,i=0,a=1/0,o=-1,s=e.length;++o<s;)(r=e[o].area)&&(r<a&&(a=r),r>i&&(i=r));return t*=t,(n*=n)?Math.max(t*i*c/n,n/(t*a*c)):1/0}function p(e,t,r,i){var a,o=-1,s=e.length,l=r.x,c=r.y,u=t?n(e.area/t):0;if(t==r.dx){for((i||u>r.dy)&&(u=r.dy);++o<s;)(a=e[o]).x=l,a.y=c,a.dy=u,l+=a.dx=Math.min(r.x+r.dx-l,u?n(a.area/u):0);a.z=!0,a.dx+=r.x+r.dx-l,r.y+=u,r.dy-=u}else{for((i||u>r.dx)&&(u=r.dx);++o<s;)(a=e[o]).x=l,a.y=c,a.dx=u,c+=a.dy=Math.min(r.y+r.dy-c,u?n(a.area/u):0);a.z=!1,a.dy+=r.y+r.dy-c,r.x+=u,r.dx-=u}}function f(t){var n=e||r(t),a=n[0];return a.x=a.y=0,a.value?(a.dx=i[0],a.dy=i[1]):a.dx=a.dy=0,e&&r.revalue(a),u([a],a.dx*a.dy/a.value),(e?h:d)(a),s&&(e=n),n}return f.size=function(e){return arguments.length?(i=e,f):i},f.padding=function(e){if(!arguments.length)return a;function t(t){var r=e.call(f,t,t.depth);return null==r?Dn(t):Vn(t,"number"==typeof r?[r,r,r,r]:r)}function r(t){return Vn(t,e)}var n;return o=null==(a=e)?Dn:"function"==(n=typeof e)?t:"number"===n?(e=[e,e,e,e],r):r,f},f.round=function(e){return arguments.length?(n=e?Math.round:Number,f):n!=Number},f.sticky=function(t){return arguments.length?(s=t,e=null,f):s},f.ratio=function(e){return arguments.length?(c=e,f):c},f.mode=function(e){return arguments.length?(l=e+"",f):l},rn(f,r)},t.random={normal:function(e,t){var r=arguments.length;return r<2&&(t=1),r<1&&(e=0),function(){var r,n,i;do{i=(r=2*Math.random()-1)*r+(n=2*Math.random()-1)*n}while(!i||i>1);return e+t*r*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=t.random.normal.apply(t,arguments);return function(){return Math.exp(e())}},bates:function(e){var r=t.random.irwinHall(e);return function(){return r()/e}},irwinHall:function(e){return function(){for(var t=0,r=0;r<e;r++)t+=Math.random();return t}}},t.scale={};var Yn={floor:E,ceil:E};function Pn(e,r,n,i){var a=[],o=[],s=0,l=Math.min(e.length,r.length)-1;for(e[l]<e[0]&&(e=e.slice().reverse(),r=r.slice().reverse());++s<=l;)a.push(n(e[s-1],e[s])),o.push(i(r[s-1],r[s]));return function(r){var n=t.bisect(e,r,1,l)-1;return o[n](a[n](r))}}function zn(e,t,r,n){var i,a;function o(){var o=Math.min(e.length,t.length)>2?Pn:On,l=n?Zr:Or;return i=o(e,t,l,r),a=o(t,e,l,Ir),s}function s(e){return i(e)}return s.invert=function(e){return a(e)},s.domain=function(t){return arguments.length?(e=t.map(Number),o()):e},s.range=function(e){return arguments.length?(t=e,o()):t},s.rangeRound=function(e){return s.range(e).interpolate(Nr)},s.clamp=function(e){return arguments.length?(n=e,o()):n},s.interpolate=function(e){return arguments.length?(r=e,o()):r},s.ticks=function(t){return qn(e,t)},s.tickFormat=function(t,r){return d3_scale_linearTickFormat(e,t,r)},s.nice=function(t){return jn(e,t),o()},s.copy=function(){return zn(e,t,r,n)},o()}function Jn(e,r){return t.rebind(e,r,"range","rangeRound","interpolate","clamp")}function jn(e,t){return Zn(e,Wn(Kn(e,t)[2])),Zn(e,Wn(Kn(e,t)[2])),e}function Kn(e,t){null==t&&(t=10);var r=Hn(e),n=r[1]-r[0],i=Math.pow(10,Math.floor(Math.log(n/t)/Math.LN10)),a=t/n*i;return a<=.15?i*=10:a<=.35?i*=5:a<=.75&&(i*=2),r[0]=Math.ceil(r[0]/i)*i,r[1]=Math.floor(r[1]/i)*i+.5*i,r[2]=i,r}function qn(e,r){return t.range.apply(t,Kn(e,r))}function ei(e,t,r,n){function i(e){return(r?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function a(e){return r?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(i(t))}return o.invert=function(t){return a(e.invert(t))},o.domain=function(t){return arguments.length?(r=t[0]>=0,e.domain((n=t.map(Number)).map(i)),o):n},o.base=function(r){return arguments.length?(t=+r,e.domain(n.map(i)),o):t},o.nice=function(){var t=Zn(n.map(i),r?Math:ti);return e.domain(t),n=t.map(a),o},o.ticks=function(){var e=Hn(n),o=[],s=e[0],l=e[1],c=Math.floor(i(s)),u=Math.ceil(i(l)),d=t%1?2:t;if(isFinite(u-c)){if(r){for(;c<u;c++)for(var h=1;h<d;h++)o.push(a(c)*h);o.push(a(c))}else for(o.push(a(c));c++<u;)for(h=d-1;h>0;h--)o.push(a(c)*h);for(c=0;o[c]<s;c++);for(u=o.length;o[u-1]>l;u--);o=o.slice(c,u)}return o},o.copy=function(){return ei(e.copy(),t,r,n)},Jn(o,e)}t.scale.linear=function(){return zn([0,1],[0,1],Ir,!1)},t.scale.log=function(){return ei(t.scale.linear().domain([0,1]),10,!0,[1,10])};var ti={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function ri(e,t,r){var n=ni(t),i=ni(1/t);function a(t){return e(n(t))}return a.invert=function(t){return i(e.invert(t))},a.domain=function(t){return arguments.length?(e.domain((r=t.map(Number)).map(n)),a):r},a.ticks=function(e){return qn(r,e)},a.tickFormat=function(e,t){return d3_scale_linearTickFormat(r,e,t)},a.nice=function(e){return a.domain(jn(r,e))},a.exponent=function(o){return arguments.length?(n=ni(t=o),i=ni(1/t),e.domain(r.map(n)),a):t},a.copy=function(){return ri(e.copy(),t,r)},Jn(a,e)}function ni(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ii(e,r){var n,i,a;function o(t){return i[((n.get(t)||("range"===r.t?n.set(t,e.push(t)):NaN))-1)%i.length]}function s(r,n){return t.range(e.length).map((function(e){return r+n*e}))}return o.domain=function(t){if(!arguments.length)return e;e=[],n=new B;for(var i,a=-1,s=t.length;++a<s;)n.has(i=t[a])||n.set(i,e.push(i));return o[r.t].apply(o,r.a)},o.range=function(e){return arguments.length?(i=e,a=0,r={t:"range",a:arguments},o):i},o.rangePoints=function(t,n){arguments.length<2&&(n=0);var l=t[0],c=t[1],u=e.length<2?(l=(l+c)/2,0):(c-l)/(e.length-1+n);return i=s(l+u*n/2,u),a=0,r={t:"rangePoints",a:arguments},o},o.rangeRoundPoints=function(t,n){arguments.length<2&&(n=0);var l=t[0],c=t[1],u=e.length<2?(l=c=Math.round((l+c)/2),0):(c-l)/(e.length-1+n)|0;return i=s(l+Math.round(u*n/2+(c-l-(e.length-1+n)*u)/2),u),a=0,r={t:"rangeRoundPoints",a:arguments},o},o.rangeBands=function(t,n,l){arguments.length<2&&(n=0),arguments.length<3&&(l=n);var c=t[1]<t[0],u=t[c-0],d=t[1-c],h=(d-u)/(e.length-n+2*l);return i=s(u+h*l,h),c&&i.reverse(),a=h*(1-n),r={t:"rangeBands",a:arguments},o},o.rangeRoundBands=function(t,n,l){arguments.length<2&&(n=0),arguments.length<3&&(l=n);var c=t[1]<t[0],u=t[c-0],d=t[1-c],h=Math.floor((d-u)/(e.length-n+2*l));return i=s(u+Math.round((d-u-(e.length-n)*h)/2),h),c&&i.reverse(),a=Math.round(h*(1-n)),r={t:"rangeRoundBands",a:arguments},o},o.rangeBand=function(){return a},o.rangeExtent=function(){return Hn(r.a[0])},o.copy=function(){return ii(e,r)},o.domain(e)}t.scale.pow=function(){return ri(t.scale.linear(),1,[0,1])},t.scale.sqrt=function(){return t.scale.pow().exponent(.5)},t.scale.ordinal=function(){return ii([],{t:"range",a:[[]]})},t.scale.category10=function(){return t.scale.ordinal().range(ai)},t.scale.category20=function(){return t.scale.ordinal().range(oi)},t.scale.category20b=function(){return t.scale.ordinal().range(si)},t.scale.category20c=function(){return t.scale.ordinal().range(li)};var ai=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(nt),oi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(nt),si=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(nt),li=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(nt);function ci(e,r){var n;function i(){var i=0,o=r.length;for(n=[];++i<o;)n[i-1]=t.quantile(e,i/o);return a}function a(e){if(!isNaN(e=+e))return r[t.bisect(n,e)]}return a.domain=function(t){return arguments.length?(e=t.map(g).filter(p).sort(h),i()):e},a.range=function(e){return arguments.length?(r=e,i()):r},a.quantiles=function(){return n},a.invertExtent=function(t){return(t=r.indexOf(t))<0?[NaN,NaN]:[t>0?n[t-1]:e[0],t<n.length?n[t]:e[e.length-1]]},a.copy=function(){return ci(e,r)},i()}function ui(e,t,r){var n,i;function a(t){return r[Math.max(0,Math.min(i,Math.floor(n*(t-e))))]}function o(){return n=r.length/(t-e),i=r.length-1,a}return a.domain=function(r){return arguments.length?(e=+r[0],t=+r[r.length-1],o()):[e,t]},a.range=function(e){return arguments.length?(r=e,o()):r},a.invertExtent=function(t){return[t=(t=r.indexOf(t))<0?NaN:t/n+e,t+1/n]},a.copy=function(){return ui(e,t,r)},o()}function di(e,r){function n(n){if(n<=n)return r[t.bisect(e,n)]}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(r=e,n):r},n.invertExtent=function(t){return t=r.indexOf(t),[e[t-1],e[t]]},n.copy=function(){return di(e,r)},n}function hi(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(r){return arguments.length?(e=r.map(t),t):e},t.ticks=function(t){return qn(e,t)},t.tickFormat=function(t,r){return d3_scale_linearTickFormat(e,t,r)},t.copy=function(){return hi(e)},t}function gi(){return 0}t.scale.quantile=function(){return ci([],[])},t.scale.quantize=function(){return ui(0,1,[0,1])},t.scale.threshold=function(){return di([.5],[0,1])},t.scale.identity=function(){return hi([0,1])},t.svg={},t.svg.arc=function(){var e=fi,t=mi,r=gi,n=pi,i=yi,a=bi,o=vi;function s(){var s=Math.max(0,+e.apply(this,arguments)),c=Math.max(0,+t.apply(this,arguments)),u=i.apply(this,arguments)-Ue,d=a.apply(this,arguments)-Ue,h=Math.abs(d-u),g=u>d?0:1;if(c<s&&(p=c,c=s,s=p),h>=Qe)return l(c,g)+(s?l(s,1-g):"")+"Z";var p,f,m,y,b,v,x,B,I,F,A,C,w=0,Q=0,U=[];if((y=(+o.apply(this,arguments)||0)/2)&&(m=n===pi?Math.sqrt(s*s+c*c):+n.apply(this,arguments),g||(Q*=-1),c&&(Q=_e(m/c*Math.sin(y))),s&&(w=_e(m/s*Math.sin(y)))),c){b=c*Math.cos(u+Q),v=c*Math.sin(u+Q),x=c*Math.cos(d-Q),B=c*Math.sin(d-Q);var S=Math.abs(d-u-2*Q)<=Ce?0:1;if(Q&&xi(b,v,x,B)===g^S){var E=(u+d)/2;b=c*Math.cos(E),v=c*Math.sin(E),x=B=null}}else b=v=0;if(s){I=s*Math.cos(d-w),F=s*Math.sin(d-w),A=s*Math.cos(u+w),C=s*Math.sin(u+w);var L=Math.abs(u-d+2*w)<=Ce?0:1;if(w&&xi(I,F,A,C)===1-g^L){var _=(u+d)/2;I=s*Math.cos(_),F=s*Math.sin(_),A=C=null}}else I=F=0;if(h>Ae&&(p=Math.min(Math.abs(c-s)/2,+r.apply(this,arguments)))>.001){f=s<c^g?0:1;var T=p,R=p;if(h<Ce){var $=null==A?[I,F]:null==x?[b,v]:Et([b,v],[A,C],[x,B],[I,F]),k=b-$[0],N=v-$[1],G=x-$[0],M=B-$[1],D=1/Math.sin(Math.acos((k*G+N*M)/(Math.sqrt(k*k+N*N)*Math.sqrt(G*G+M*M)))/2),V=Math.sqrt($[0]*$[0]+$[1]*$[1]);R=Math.min(p,(s-V)/(D-1)),T=Math.min(p,(c-V)/(D+1))}if(null!=x){var H=Bi(null==A?[I,F]:[A,C],[b,v],c,T,g),X=Bi([x,B],[I,F],c,T,g);p===T?U.push("M",H[0],"A",T,",",T," 0 0,",f," ",H[1],"A",c,",",c," 0 ",1-g^xi(H[1][0],H[1][1],X[1][0],X[1][1]),",",g," ",X[1],"A",T,",",T," 0 0,",f," ",X[0]):U.push("M",H[0],"A",T,",",T," 0 1,",f," ",X[0])}else U.push("M",b,",",v);if(null!=A){var O=Bi([b,v],[A,C],s,-R,g),Z=Bi([I,F],null==x?[b,v]:[x,B],s,-R,g);p===R?U.push("L",Z[0],"A",R,",",R," 0 0,",f," ",Z[1],"A",s,",",s," 0 ",g^xi(Z[1][0],Z[1][1],O[1][0],O[1][1]),",",1-g," ",O[1],"A",R,",",R," 0 0,",f," ",O[0]):U.push("L",Z[0],"A",R,",",R," 0 0,",f," ",O[0])}else U.push("L",I,",",F)}else U.push("M",b,",",v),null!=x&&U.push("A",c,",",c," 0 ",S,",",g," ",x,",",B),U.push("L",I,",",F),null!=A&&U.push("A",s,",",s," 0 ",L,",",1-g," ",A,",",C);return U.push("Z"),U.join("")}function l(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return s.innerRadius=function(t){return arguments.length?(e=ht(t),s):e},s.outerRadius=function(e){return arguments.length?(t=ht(e),s):t},s.cornerRadius=function(e){return arguments.length?(r=ht(e),s):r},s.padRadius=function(e){return arguments.length?(n=e==pi?pi:ht(e),s):n},s.startAngle=function(e){return arguments.length?(i=ht(e),s):i},s.endAngle=function(e){return arguments.length?(a=ht(e),s):a},s.padAngle=function(e){return arguments.length?(o=ht(e),s):o},s.centroid=function(){var r=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,n=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Ue;return[Math.cos(n)*r,Math.sin(n)*r]},s};var pi="auto";function fi(e){return e.innerRadius}function mi(e){return e.outerRadius}function yi(e){return e.startAngle}function bi(e){return e.endAngle}function vi(e){return e&&e.padAngle}function xi(e,t,r,n){return(e-r)*t-(t-n)*e>0?0:1}function Bi(e,t,r,n,i){var a=e[0]-t[0],o=e[1]-t[1],s=(i?n:-n)/Math.sqrt(a*a+o*o),l=s*o,c=-s*a,u=e[0]+l,d=e[1]+c,h=t[0]+l,g=t[1]+c,p=(u+h)/2,f=(d+g)/2,m=h-u,y=g-d,b=m*m+y*y,v=r-n,x=u*g-h*d,B=(y<0?-1:1)*Math.sqrt(Math.max(0,v*v*b-x*x)),I=(x*y-m*B)/b,F=(-x*m-y*B)/b,A=(x*y+m*B)/b,C=(-x*m+y*B)/b,w=I-p,Q=F-f,U=A-p,S=C-f;return w*w+Q*Q>U*U+S*S&&(I=A,F=C),[[I-l,F-c],[I*r/v,F*r/v]]}function Ii(){return!0}function Fi(e){var t=At,r=Ct,n=Ii,i=Ci,a=i.key,o=.7;function s(a){var s,l=[],c=[],u=-1,d=a.length,h=ht(t),g=ht(r);function p(){l.push("M",i(e(c),o))}for(;++u<d;)n.call(this,s=a[u],u)?c.push([+h.call(this,s,u),+g.call(this,s,u)]):c.length&&(p(),c=[]);return c.length&&p(),l.length?l.join(""):null}return s.x=function(e){return arguments.length?(t=e,s):t},s.y=function(e){return arguments.length?(r=e,s):r},s.defined=function(e){return arguments.length?(n=e,s):n},s.interpolate=function(e){return arguments.length?(a="function"==typeof e?i=e:(i=Ai.get(e)||Ci).key,s):a},s.tension=function(e){return arguments.length?(o=e,s):o},s}t.svg.line=function(){return Fi(E)};var Ai=t.map({linear:Ci,"linear-closed":wi,step:function(e){var t=0,r=e.length,n=e[0],i=[n[0],",",n[1]];for(;++t<r;)i.push("H",(n[0]+(n=e[t])[0])/2,"V",n[1]);r>1&&i.push("H",n[0]);return i.join("")},"step-before":Qi,"step-after":Ui,basis:Li,"basis-open":function(e){if(e.length<4)return Ci(e);var t,r=[],n=-1,i=e.length,a=[0],o=[0];for(;++n<3;)t=e[n],a.push(t[0]),o.push(t[1]);r.push(_i($i,a)+","+_i($i,o)),--n;for(;++n<i;)t=e[n],a.shift(),a.push(t[0]),o.shift(),o.push(t[1]),ki(r,a,o);return r.join("")},"basis-closed":function(e){var t,r,n=-1,i=e.length,a=i+4,o=[],s=[];for(;++n<4;)r=e[n%i],o.push(r[0]),s.push(r[1]);t=[_i($i,o),",",_i($i,s)],--n;for(;++n<a;)r=e[n%i],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),ki(t,o,s);return t.join("")},bundle:function(e,t){var r=e.length-1;if(r)for(var n,i,a=e[0][0],o=e[0][1],s=e[r][0]-a,l=e[r][1]-o,c=-1;++c<=r;)n=e[c],i=c/r,n[0]=t*n[0]+(1-t)*(a+i*s),n[1]=t*n[1]+(1-t)*(o+i*l);return Li(e)},cardinal:function(e,t){return e.length<3?Ci(e):e[0]+Si(e,Ei(e,t))},"cardinal-open":function(e,t){return e.length<4?Ci(e):e[1]+Si(e.slice(1,-1),Ei(e,t))},"cardinal-closed":function(e,t){return e.length<3?wi(e):e[0]+Si((e.push(e[0]),e),Ei([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?Ci(e):e[0]+Si(e,function(e){var t,r,n,i,a=[],o=function(e){var t=0,r=e.length-1,n=[],i=e[0],a=e[1],o=n[0]=Ni(i,a);for(;++t<r;)n[t]=(o+(o=Ni(i=a,a=e[t+1])))/2;return n[t]=o,n}(e),s=-1,l=e.length-1;for(;++s<l;)t=Ni(e[s],e[s+1]),b(t)<Ae?o[s]=o[s+1]=0:(i=(r=o[s]/t)*r+(n=o[s+1]/t)*n)>9&&(i=3*t/Math.sqrt(i),o[s]=i*r,o[s+1]=i*n);s=-1;for(;++s<=l;)i=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}(e))}});function Ci(e){return e.length>1?e.join("L"):e+"Z"}function wi(e){return e.join("L")+"Z"}function Qi(e){for(var t=0,r=e.length,n=e[0],i=[n[0],",",n[1]];++t<r;)i.push("V",(n=e[t])[1],"H",n[0]);return i.join("")}function Ui(e){for(var t=0,r=e.length,n=e[0],i=[n[0],",",n[1]];++t<r;)i.push("H",(n=e[t])[0],"V",n[1]);return i.join("")}function Si(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return Ci(e);var r=e.length!=t.length,n="",i=e[0],a=e[1],o=t[0],s=o,l=1;if(r&&(n+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=e[1],l=2),t.length>1){s=t[1],a=e[l],l++,n+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var c=2;c<t.length;c++,l++)a=e[l],s=t[c],n+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(r){var u=e[l];n+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+u[0]+","+u[1]}return n}function Ei(e,t){for(var r,n=[],i=(1-t)/2,a=e[0],o=e[1],s=1,l=e.length;++s<l;)r=a,a=o,o=e[s],n.push([i*(o[0]-r[0]),i*(o[1]-r[1])]);return n}function Li(e){if(e.length<3)return Ci(e);var t=1,r=e.length,n=e[0],i=n[0],a=n[1],o=[i,i,i,(n=e[1])[0]],s=[a,a,a,n[1]],l=[i,",",a,"L",_i($i,o),",",_i($i,s)];for(e.push(e[r-1]);++t<=r;)n=e[t],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),ki(l,o,s);return e.pop(),l.push("L",n),l.join("")}function _i(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}Ai.forEach((function(e,t){t.key=e,t.closed=/-closed$/.test(e)}));var Ti=[0,2/3,1/3,0],Ri=[0,1/3,2/3,0],$i=[0,1/6,2/3,1/6];function ki(e,t,r){e.push("C",_i(Ti,t),",",_i(Ti,r),",",_i(Ri,t),",",_i(Ri,r),",",_i($i,t),",",_i($i,r))}function Ni(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Gi(e){for(var t,r,n,i=-1,a=e.length;++i<a;)r=(t=e[i])[0],n=t[1]-Ue,t[0]=r*Math.cos(n),t[1]=r*Math.sin(n);return e}function Mi(e){var t=At,r=At,n=0,i=Ct,a=Ii,o=Ci,s=o.key,l=o,c="L",u=.7;function d(s){var d,h,g,p=[],f=[],m=[],y=-1,b=s.length,v=ht(t),x=ht(n),B=t===r?function(){return h}:ht(r),I=n===i?function(){return g}:ht(i);function F(){p.push("M",o(e(m),u),c,l(e(f.reverse()),u),"Z")}for(;++y<b;)a.call(this,d=s[y],y)?(f.push([h=+v.call(this,d,y),g=+x.call(this,d,y)]),m.push([+B.call(this,d,y),+I.call(this,d,y)])):f.length&&(F(),f=[],m=[]);return f.length&&F(),p.length?p.join(""):null}return d.x=function(e){return arguments.length?(t=r=e,d):r},d.x0=function(e){return arguments.length?(t=e,d):t},d.x1=function(e){return arguments.length?(r=e,d):r},d.y=function(e){return arguments.length?(n=i=e,d):i},d.y0=function(e){return arguments.length?(n=e,d):n},d.y1=function(e){return arguments.length?(i=e,d):i},d.defined=function(e){return arguments.length?(a=e,d):a},d.interpolate=function(e){return arguments.length?(s="function"==typeof e?o=e:(o=Ai.get(e)||Ci).key,l=o.reverse||o,c=o.closed?"M":"L",d):s},d.tension=function(e){return arguments.length?(u=e,d):u},d}function Di(e){return e.source}function Vi(e){return e.target}function Hi(e){return e.radius}function Xi(e){return[e.x,e.y]}function Oi(e){return function(){var t=e.apply(this,arguments),r=t[0],n=t[1]-Ue;return[r*Math.cos(n),r*Math.sin(n)]}}function Zi(){return 64}function Wi(){return"circle"}function Yi(e){var t=Math.sqrt(e/Ce);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}t.svg.line.radial=function(){var e=Fi(Gi);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Qi.reverse=Ui,Ui.reverse=Qi,t.svg.area=function(){return Mi(E)},t.svg.area.radial=function(){var e=Mi(Gi);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},t.svg.chord=function(){var e=Di,t=Vi,r=Hi,n=yi,i=bi;function a(r,n){var i=o(this,e,r,n),a=o(this,t,r,n);return"M"+i.p0+s(i.r,i.p1,i.a1-i.a0)+(function(e,t){return e.a0==t.a0&&e.a1==t.a1}(i,a)?l(i.r,i.p1,i.r,i.p0):l(i.r,i.p1,a.r,a.p0)+s(a.r,a.p1,a.a1-a.a0)+l(a.r,a.p1,i.r,i.p0))+"Z"}function o(e,t,a,o){var s=t.call(e,a,o),l=r.call(e,s,o),c=n.call(e,s,o)-Ue,u=i.call(e,s,o)-Ue;return{r:l,a0:c,a1:u,p0:[l*Math.cos(c),l*Math.sin(c)],p1:[l*Math.cos(u),l*Math.sin(u)]}}function s(e,t,r){return"A"+e+","+e+" 0 "+ +(r>Ce)+",1 "+t}function l(e,t,r,n){return"Q 0,0 "+n}return a.radius=function(e){return arguments.length?(r=ht(e),a):r},a.source=function(t){return arguments.length?(e=ht(t),a):e},a.target=function(e){return arguments.length?(t=ht(e),a):t},a.startAngle=function(e){return arguments.length?(n=ht(e),a):n},a.endAngle=function(e){return arguments.length?(i=ht(e),a):i},a},t.svg.diagonal=function(){var e=Di,t=Vi,r=Xi;function n(n,i){var a=e.call(this,n,i),o=t.call(this,n,i),s=(a.y+o.y)/2,l=[a,{x:a.x,y:s},{x:o.x,y:s},o];return"M"+(l=l.map(r))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return n.source=function(t){return arguments.length?(e=ht(t),n):e},n.target=function(e){return arguments.length?(t=ht(e),n):t},n.projection=function(e){return arguments.length?(r=e,n):r},n},t.svg.diagonal.radial=function(){var e=t.svg.diagonal(),r=Xi,n=e.projection;return e.projection=function(e){return arguments.length?n(Oi(r=e)):r},e},t.svg.symbol=function(){var e=Wi,t=Zi;function r(r,n){return(Pi.get(e.call(this,r,n))||Yi)(t.call(this,r,n))}return r.type=function(t){return arguments.length?(e=ht(t),r):e},r.size=function(e){return arguments.length?(t=ht(e),r):t},r};var Pi=t.map({circle:Yi,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Ji)),r=t*Ji;return"M0,"+-t+"L"+r+",0 0,"+t+" "+-r+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/zi),r=t*zi/2;return"M0,"+r+"L"+t+","+-r+" "+-t+","+-r+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/zi),r=t*zi/2;return"M0,"+-r+"L"+t+","+r+" "+-t+","+r+"Z"}});t.svg.symbolTypes=Pi.keys();var zi=Math.sqrt(3),Ji=Math.tan(30*Se);W.transition=function(e){for(var t,r,n=ea||++na,i=oa(e),a=[],o=ta||{time:Date.now(),ease:_r,delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(r=c[u])&&sa(r,u,i,n,o),t.push(r)}return qi(a,i,n)},W.interrupt=function(e){return this.each(null==e?ji:Ki(oa(e)))};var ji=Ki(oa());function Ki(e){return function(){var t,r,n;(t=this[e])&&(n=t[r=t.active])&&(n.timer.c=null,n.timer.t=NaN,--t.count?delete t[r]:delete this[e],t.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function qi(e,t,r){return V(e,ra),e.namespace=t,e.id=r,e}var ea,ta,ra=[],na=0;function ia(e,t,r,n){var i=e.id,a=e.namespace;return ue(e,"function"==typeof r?function(e,o,s){e[a][i].tween.set(t,n(r.call(e,e.__data__,o,s)))}:(r=n(r),function(e){e[a][i].tween.set(t,r)}))}function aa(e){return null==e&&(e=""),function(){this.textContent=e}}function oa(e){return null==e?"__transition__":"__transition_"+e+"__"}function sa(e,t,r,n,i){var a,o,s,l,c,u=e[r]||(e[r]={active:0,count:0}),d=u[n];function h(r){var i=u.active,h=u[i];for(var p in h&&(h.timer.c=null,h.timer.t=NaN,--u.count,delete u[i],h.event&&h.event.interrupt.call(e,e.__data__,h.index)),u)if(+p<n){var f=u[p];f.timer.c=null,f.timer.t=NaN,--u.count,delete u[p]}o.c=g,xt((function(){return o.c&&g(r||1)&&(o.c=null,o.t=NaN),1}),0,a),u.active=n,d.event&&d.event.start.call(e,e.__data__,t),c=[],d.tween.forEach((function(r,n){(n=n.call(e,e.__data__,t))&&c.push(n)})),l=d.ease,s=d.duration}function g(i){for(var a=i/s,o=l(a),h=c.length;h>0;)c[--h].call(e,o);if(a>=1)return d.event&&d.event.end.call(e,e.__data__,t),--u.count?delete u[n]:delete e[r],1}d||(a=i.time,o=xt((function(e){var t=d.delay;if(o.t=t+a,t<=e)return h(e-t);o.c=h}),0,a),d=u[n]={tween:new B,time:a,timer:o,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++u.count)}ra.call=W.call,ra.empty=W.empty,ra.node=W.node,ra.size=W.size,t.transition=function(e,r){return e&&e.transition?ea?e.transition(r):e:t.selection().transition(e)},t.transition.prototype=ra,ra.select=function(e){var t,r,n,i=this.id,a=this.namespace,o=[];e=Y(e);for(var s=-1,l=this.length;++s<l;){o.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(n=c[u])&&(r=e.call(n,n.__data__,u,s))?("__data__"in n&&(r.__data__=n.__data__),sa(r,u,a,i,n[a][i]),t.push(r)):t.push(null)}return qi(o,a,i)},ra.selectAll=function(e){var t,r,n,i,a,o=this.id,s=this.namespace,l=[];e=P(e);for(var c=-1,u=this.length;++c<u;)for(var d=this[c],h=-1,g=d.length;++h<g;)if(n=d[h]){a=n[s][o],r=e.call(n,n.__data__,h,c),l.push(t=[]);for(var p=-1,f=r.length;++p<f;)(i=r[p])&&sa(i,p,s,o,a),t.push(i)}return qi(l,s,o)},ra.filter=function(e){var t,r,n=[];"function"!=typeof e&&(e=le(e));for(var i=0,a=this.length;i<a;i++){n.push(t=[]);for(var o,s=0,l=(o=this[i]).length;s<l;s++)(r=o[s])&&e.call(r,r.__data__,s,i)&&t.push(r)}return qi(n,this.namespace,this.id)},ra.tween=function(e,t){var r=this.id,n=this.namespace;return arguments.length<2?this.node()[n][r].tween.get(e):ue(this,null==t?function(t){t[n][r].tween.remove(e)}:function(i){i[n][r].tween.set(e,t)})},ra.attr=function(e,r){if(arguments.length<2){for(r in e)this.attr(r,e[r]);return this}var n="transform"==e?Xr:Ir,i=t.ns.qualify(e);function a(){this.removeAttribute(i)}function o(){this.removeAttributeNS(i.space,i.local)}function s(e){return null==e?a:(e+="",function(){var t,r=this.getAttribute(i);return r!==e&&(t=n(r,e),function(e){this.setAttribute(i,t(e))})})}function l(e){return null==e?o:(e+="",function(){var t,r=this.getAttributeNS(i.space,i.local);return r!==e&&(t=n(r,e),function(e){this.setAttributeNS(i.space,i.local,t(e))})})}return ia(this,"attr."+e,r,i.local?l:s)},ra.attrTween=function(e,r){var n=t.ns.qualify(e);return this.tween("attr."+e,n.local?function(e,t){var i=r.call(this,e,t,this.getAttributeNS(n.space,n.local));return i&&function(e){this.setAttributeNS(n.space,n.local,i(e))}}:function(e,t){var i=r.call(this,e,t,this.getAttribute(n));return i&&function(e){this.setAttribute(n,i(e))}})},ra.style=function(e,t,r){var n=arguments.length;if(n<3){if("string"!=typeof e){for(r in n<2&&(t=""),e)this.style(r,e[r],t);return this}r=""}function i(){this.style.removeProperty(e)}function a(t){return null==t?i:(t+="",function(){var n,i=o(this).getComputedStyle(this,null).getPropertyValue(e);return i!==t&&(n=Ir(i,t),function(t){this.style.setProperty(e,n(t),r)})})}return ia(this,"style."+e,t,a)},ra.styleTween=function(e,t,r){function n(n,i){var a=t.call(this,n,i,o(this).getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+e,n)},ra.text=function(e){return ia(this,"text",e,aa)},ra.remove=function(){var e=this.namespace;return this.each("end.transition",(function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)}))},ra.ease=function(e){var r=this.id,n=this.namespace;return arguments.length<1?this.node()[n][r].ease:("function"!=typeof e&&(e=t.ease.apply(t,arguments)),ue(this,(function(t){t[n][r].ease=e})))},ra.delay=function(e){var t=this.id,r=this.namespace;return arguments.length<1?this.node()[r][t].delay:ue(this,"function"==typeof e?function(n,i,a){n[r][t].delay=+e.call(n,n.__data__,i,a)}:(e=+e,function(n){n[r][t].delay=e}))},ra.duration=function(e){var t=this.id,r=this.namespace;return arguments.length<1?this.node()[r][t].duration:ue(this,"function"==typeof e?function(n,i,a){n[r][t].duration=Math.max(1,e.call(n,n.__data__,i,a))}:(e=Math.max(1,e),function(n){n[r][t].duration=e}))},ra.each=function(e,r){var n=this.id,i=this.namespace;if(arguments.length<2){var a=ta,o=ea;try{ea=n,ue(this,(function(t,r,a){ta=t[i][n],e.call(t,t.__data__,r,a)}))}finally{ta=a,ea=o}}else ue(this,(function(a){var o=a[i][n];(o.event||(o.event=t.dispatch("start","end","interrupt"))).on(e,r)}));return this},ra.transition=function(){for(var e,t,r,n=this.id,i=++na,a=this.namespace,o=[],s=0,l=this.length;s<l;s++){o.push(e=[]);for(var c,u=0,d=(c=this[s]).length;u<d;u++)(t=c[u])&&sa(t,u,a,i,{time:(r=t[a][n]).time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration}),e.push(t)}return qi(o,a,i)},t.svg.axis=function(){var e,r=t.scale.linear(),i=la,a=6,o=6,s=3,l=[10],c=null;function u(n){n.each((function(){var n,u=t.select(this),d=this.__chart__||r,h=this.__chart__=r.copy(),g=null==c?h.ticks?h.ticks.apply(h,l):h.domain():c,p=null==e?h.tickFormat?h.tickFormat.apply(h,l):E:e,f=u.selectAll(".tick").data(g,h),m=f.enter().insert("g",".domain").attr("class","tick").style("opacity",Ae),y=t.transition(f.exit()).style("opacity",Ae).remove(),b=t.transition(f.order()).style("opacity",1),v=Math.max(a,0)+s,x=Xn(h),B=u.selectAll(".domain").data([0]),I=(B.enter().append("path").attr("class","domain"),t.transition(B));m.append("line"),m.append("text");var F,A,C,w,Q=m.select("line"),U=b.select("line"),S=f.select("text").text(p),L=m.select("text"),_=b.select("text"),T="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(n=ua,F="x",C="y",A="x2",w="y2",S.attr("dy",T<0?"0em":".71em").style("text-anchor","middle"),I.attr("d","M"+x[0]+","+T*o+"V0H"+x[1]+"V"+T*o)):(n=da,F="y",C="x",A="y2",w="x2",S.attr("dy",".32em").style("text-anchor",T<0?"end":"start"),I.attr("d","M"+T*o+","+x[0]+"H0V"+x[1]+"H"+T*o)),Q.attr(w,T*a),L.attr(C,T*v),U.attr(A,0).attr(w,T*a),_.attr(F,0).attr(C,T*v),h.rangeBand){var R=h,$=R.rangeBand()/2;d=h=function(e){return R(e)+$}}else d.rangeBand?d=h:y.call(n,h,d);m.call(n,d,h),b.call(n,h,h)}))}return u.scale=function(e){return arguments.length?(r=e,u):r},u.orient=function(e){return arguments.length?(i=e in ca?e+"":la,u):i},u.ticks=function(){return arguments.length?(l=n(arguments),u):l},u.tickValues=function(e){return arguments.length?(c=e,u):c},u.tickFormat=function(t){return arguments.length?(e=t,u):e},u.tickSize=function(e){var t=arguments.length;return t?(a=+e,o=+arguments[t-1],u):a},u.innerTickSize=function(e){return arguments.length?(a=+e,u):a},u.outerTickSize=function(e){return arguments.length?(o=+e,u):o},u.tickPadding=function(e){return arguments.length?(s=+e,u):s},u.tickSubdivide=function(){return arguments.length&&u},u};var la="bottom",ca={top:1,right:1,bottom:1,left:1};function ua(e,t,r){e.attr("transform",(function(e){var n=t(e);return"translate("+(isFinite(n)?n:r(e))+",0)"}))}function da(e,t,r){e.attr("transform",(function(e){var n=t(e);return"translate(0,"+(isFinite(n)?n:r(e))+")"}))}t.svg.brush=function(){var e,r,n=M(h,"brushstart","brush","brushend"),i=null,a=null,s=[0,0],l=[0,0],c=!0,u=!0,d=ga[0];function h(e){e.each((function(){var e=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m),r=e.selectAll(".background").data([0]);r.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(d,E);n.exit().remove(),n.enter().append("g").attr("class",(function(e){return"resize "+e})).style("cursor",(function(e){return ha[e]})).append("rect").attr("x",(function(e){return/[ew]$/.test(e)?-3:null})).attr("y",(function(e){return/^[ns]/.test(e)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",h.empty()?"none":null);var o,s=t.transition(e),l=t.transition(r);i&&(o=Xn(i),l.attr("x",o[0]).attr("width",o[1]-o[0]),p(s)),a&&(o=Xn(a),l.attr("y",o[0]).attr("height",o[1]-o[0]),f(s)),g(s)}))}function g(e){e.selectAll(".resize").attr("transform",(function(e){return"translate("+s[+/e$/.test(e)]+","+l[+/^s/.test(e)]+")"}))}function p(e){e.select(".extent").attr("x",s[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1]-s[0])}function f(e){e.select(".extent").attr("y",l[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function m(){var d,m,y=this,b=t.select(t.event.target),v=n.of(y,arguments),x=t.select(y),B=b.datum(),I=!/^(n|s)$/.test(B)&&i,F=!/^(e|w)$/.test(B)&&a,A=b.classed("extent"),C=xe(y),w=t.mouse(y),Q=t.select(o(y)).on("keydown.brush",E).on("keyup.brush",L);if(t.event.changedTouches?Q.on("touchmove.brush",_).on("touchend.brush",R):Q.on("mousemove.brush",_).on("mouseup.brush",R),x.interrupt().selectAll("*").interrupt(),A)w[0]=s[0]-w[0],w[1]=l[0]-w[1];else if(B){var U=+/w$/.test(B),S=+/^n/.test(B);m=[s[1-U]-w[0],l[1-S]-w[1]],w[0]=s[U],w[1]=l[S]}else t.event.altKey&&(d=w.slice());function E(){32==t.event.keyCode&&(A||(d=null,w[0]-=s[1],w[1]-=l[1],A=2),N())}function L(){32==t.event.keyCode&&2==A&&(w[0]+=s[1],w[1]+=l[1],A=0,N())}function _(){var e=t.mouse(y),r=!1;m&&(e[0]+=m[0],e[1]+=m[1]),A||(t.event.altKey?(d||(d=[(s[0]+s[1])/2,(l[0]+l[1])/2]),w[0]=s[+(e[0]<d[0])],w[1]=l[+(e[1]<d[1])]):d=null),I&&T(e,i,0)&&(p(x),r=!0),F&&T(e,a,1)&&(f(x),r=!0),r&&(g(x),v({type:"brush",mode:A?"move":"resize"}))}function T(t,n,i){var a,o,h=Xn(n),g=h[0],p=h[1],f=w[i],m=i?l:s,y=m[1]-m[0];if(A&&(g-=f,p-=y+f),a=(i?u:c)?Math.max(g,Math.min(p,t[i])):t[i],A?o=(a+=f)+y:(d&&(f=Math.max(g,Math.min(p,2*d[i]-a))),f<a?(o=a,a=f):o=f),m[0]!=a||m[1]!=o)return i?r=null:e=null,m[0]=a,m[1]=o,!0}function R(){_(),x.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null),t.select("body").style("cursor",null),Q.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),C(),v({type:"brushend"})}x.style("pointer-events","none").selectAll(".resize").style("display",null),t.select("body").style("cursor",b.style("cursor")),v({type:"brushstart"}),_()}return h.event=function(i){i.each((function(){var i=n.of(this,arguments),a={x:s,y:l,i:e,j:r},o=this.__chart__||a;this.__chart__=a,ea?t.select(this).transition().each("start.brush",(function(){e=o.i,r=o.j,s=o.x,l=o.y,i({type:"brushstart"})})).tween("brush:brush",(function(){var t=Fr(s,a.x),n=Fr(l,a.y);return e=r=null,function(e){s=a.x=t(e),l=a.y=n(e),i({type:"brush",mode:"resize"})}})).each("end.brush",(function(){e=a.i,r=a.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})})):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))}))},h.x=function(e){return arguments.length?(d=ga[!(i=e)<<1|!a],h):i},h.y=function(e){return arguments.length?(d=ga[!i<<1|!(a=e)],h):a},h.clamp=function(e){return arguments.length?(i&&a?(c=!!e[0],u=!!e[1]):i?c=!!e:a&&(u=!!e),h):i&&a?[c,u]:i?c:a?u:null},h.extent=function(t){var n,o,c,u,d;return arguments.length?(i&&(n=t[0],o=t[1],a&&(n=n[0],o=o[0]),e=[n,o],i.invert&&(n=i(n),o=i(o)),o<n&&(d=n,n=o,o=d),n==s[0]&&o==s[1]||(s=[n,o])),a&&(c=t[0],u=t[1],i&&(c=c[1],u=u[1]),r=[c,u],a.invert&&(c=a(c),u=a(u)),u<c&&(d=c,c=u,u=d),c==l[0]&&u==l[1]||(l=[c,u])),h):(i&&(e?(n=e[0],o=e[1]):(n=s[0],o=s[1],i.invert&&(n=i.invert(n),o=i.invert(o)),o<n&&(d=n,n=o,o=d))),a&&(r?(c=r[0],u=r[1]):(c=l[0],u=l[1],a.invert&&(c=a.invert(c),u=a.invert(u)),u<c&&(d=c,c=u,u=d))),i&&a?[[n,c],[o,u]]:i?[n,o]:a&&[c,u])},h.clear=function(){return h.empty()||(s=[0,0],l=[0,0],e=r=null),h},h.empty=function(){return!!i&&s[0]==s[1]||!!a&&l[0]==l[1]},t.rebind(h,n,"on")};var ha={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ga=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function pa(e){return JSON.parse(e.responseText)}function fa(e){var t=i.createRange();return t.selectNode(i.body),t.createContextualFragment(e.responseText)}t.text=gt((function(e){return e.responseText})),t.json=function(e,t){return pt(e,"application/json",pa,t)},t.html=function(e,t){return pt(e,"text/html",fa,t)},t.xml=gt((function(e){return e.responseXML})),e.exports?e.exports=t:this.d3=t}).apply(self)}(d3$w);var t0=new Date,t1=new Date;function newInterval(e,t,r,n){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(r){return e(r=new Date(r-1)),t(r,1),e(r),r},i.round=function(e){var t=i(e),r=i.ceil(e);return e-t<r-e?t:r},i.offset=function(e,r){return t(e=new Date(+e),null==r?1:Math.floor(r)),e},i.range=function(r,n,a){var o,s=[];if(r=i.ceil(r),a=null==a?1:Math.floor(a),!(r<n&&a>0))return s;do{s.push(o=new Date(+r)),t(r,a),e(r)}while(o<r&&r<n);return s},i.filter=function(r){return newInterval((function(t){if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)}),(function(e,n){if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););}))},r&&(i.count=function(t,n){return t0.setTime(+t),t1.setTime(+n),e(t0),e(t1),Math.floor(r(t0,t1))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(n?function(t){return n(t)%e==0}:function(t){return i.count(0,t)%e==0}):i:null}),i}var millisecond=newInterval((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));millisecond.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?newInterval((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,r){t.setTime(+t+r*e)}),(function(t,r){return(r-t)/e})):millisecond:null};var millisecond$1=millisecond,milliseconds=millisecond.range,durationSecond=1e3,durationMinute=6e4,durationHour=36e5,durationDay=864e5,durationWeek=6048e5,second=newInterval((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*durationSecond)}),(function(e,t){return(t-e)/durationSecond}),(function(e){return e.getUTCSeconds()})),second$1=second,seconds=second.range,minute=newInterval((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*durationSecond)}),(function(e,t){e.setTime(+e+t*durationMinute)}),(function(e,t){return(t-e)/durationMinute}),(function(e){return e.getMinutes()})),minute$1=minute,minutes=minute.range,hour=newInterval((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*durationSecond-e.getMinutes()*durationMinute)}),(function(e,t){e.setTime(+e+t*durationHour)}),(function(e,t){return(t-e)/durationHour}),(function(e){return e.getHours()})),hour$1=hour,hours=hour.range,day=newInterval((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*durationMinute)/durationDay}),(function(e){return e.getDate()-1})),timeDay=day,days=day.range;function weekday(e){return newInterval((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*durationMinute)/durationWeek}))}var sunday=weekday(0),monday=weekday(1),tuesday=weekday(2),wednesday=weekday(3),thursday=weekday(4),friday=weekday(5),saturday=weekday(6),sundays=sunday.range,mondays=monday.range,tuesdays=tuesday.range,wednesdays=wednesday.range,thursdays=thursday.range,fridays=friday.range,saturdays=saturday.range,month=newInterval((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})),month$1=month,months=month.range,year=newInterval((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));year.every=function(e){return isFinite(e=Math.floor(e))&&e>0?newInterval((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,r){t.setFullYear(t.getFullYear()+r*e)})):null};var timeYear=year,years=year.range,utcMinute=newInterval((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*durationMinute)}),(function(e,t){return(t-e)/durationMinute}),(function(e){return e.getUTCMinutes()})),utcMinute$1=utcMinute,utcMinutes=utcMinute.range,utcHour=newInterval((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*durationHour)}),(function(e,t){return(t-e)/durationHour}),(function(e){return e.getUTCHours()})),utcHour$1=utcHour,utcHours=utcHour.range,utcDay=newInterval((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/durationDay}),(function(e){return e.getUTCDate()-1})),utcDay$1=utcDay,utcDays=utcDay.range;function utcWeekday(e){return newInterval((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/durationWeek}))}var utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6),utcSundays=utcSunday.range,utcMondays=utcMonday.range,utcTuesdays=utcTuesday.range,utcWednesdays=utcWednesday.range,utcThursdays=utcThursday.range,utcFridays=utcFriday.range,utcSaturdays=utcSaturday.range,utcMonth=newInterval((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})),utcMonth$1=utcMonth,utcMonths=utcMonth.range,utcYear=newInterval((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));utcYear.every=function(e){return isFinite(e=Math.floor(e))&&e>0?newInterval((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,r){t.setUTCFullYear(t.getUTCFullYear()+r*e)})):null};var utcYear$1=utcYear,utcYears=utcYear.range,src$2=Object.freeze({__proto__:null,timeDay:timeDay,timeDays:days,timeFriday:friday,timeFridays:fridays,timeHour:hour$1,timeHours:hours,timeInterval:newInterval,timeMillisecond:millisecond$1,timeMilliseconds:milliseconds,timeMinute:minute$1,timeMinutes:minutes,timeMonday:monday,timeMondays:mondays,timeMonth:month$1,timeMonths:months,timeSaturday:saturday,timeSaturdays:saturdays,timeSecond:second$1,timeSeconds:seconds,timeSunday:sunday,timeSundays:sundays,timeThursday:thursday,timeThursdays:thursdays,timeTuesday:tuesday,timeTuesdays:tuesdays,timeWednesday:wednesday,timeWednesdays:wednesdays,timeWeek:sunday,timeWeeks:sundays,timeYear:timeYear,timeYears:years,utcDay:utcDay$1,utcDays:utcDays,utcFriday:utcFriday,utcFridays:utcFridays,utcHour:utcHour$1,utcHours:utcHours,utcMillisecond:millisecond$1,utcMilliseconds:milliseconds,utcMinute:utcMinute$1,utcMinutes:utcMinutes,utcMonday:utcMonday,utcMondays:utcMondays,utcMonth:utcMonth$1,utcMonths:utcMonths,utcSaturday:utcSaturday,utcSaturdays:utcSaturdays,utcSecond:second$1,utcSeconds:seconds,utcSunday:utcSunday,utcSundays:utcSundays,utcThursday:utcThursday,utcThursdays:utcThursdays,utcTuesday:utcTuesday,utcTuesdays:utcTuesdays,utcWednesday:utcWednesday,utcWednesdays:utcWednesdays,utcWeek:utcSunday,utcWeeks:utcSundays,utcYear:utcYear$1,utcYears:utcYears});function localDate(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function utcDate(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function newDate(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function formatLocale$2(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,a=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,c=formatRe(i),u=formatLookup(i),d=formatRe(a),h=formatLookup(a),g=formatRe(o),p=formatLookup(o),f=formatRe(s),m=formatLookup(s),y=formatRe(l),b=formatLookup(l),v={a:function(e){return o[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},x={a:function(e){return o[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},B={a:function(e,t,r){var n=g.exec(t.slice(r));return n?(e.w=p[n[0].toLowerCase()],r+n[0].length):-1},A:function(e,t,r){var n=d.exec(t.slice(r));return n?(e.w=h[n[0].toLowerCase()],r+n[0].length):-1},b:function(e,t,r){var n=y.exec(t.slice(r));return n?(e.m=b[n[0].toLowerCase()],r+n[0].length):-1},B:function(e,t,r){var n=f.exec(t.slice(r));return n?(e.m=m[n[0].toLowerCase()],r+n[0].length):-1},c:function(e,r,n){return A(e,t,r,n)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function(e,t,r){var n=c.exec(t.slice(r));return n?(e.p=u[n[0].toLowerCase()],r+n[0].length):-1},q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function(e,t,n){return A(e,r,t,n)},X:function(e,t,r){return A(e,n,t,r)},y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function I(e,t){return function(r){var n,i,a,o=[],s=-1,l=0,c=e.length;for(r instanceof Date||(r=new Date(+r));++s<c;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(i=pads[n=e.charAt(++s)])?n=e.charAt(++s):i="e"===n?" ":"0",(a=t[n])&&(n=a(r,i)),o.push(n),l=s+1);return o.push(e.slice(l,s)),o.join("")}}function F(e,t){return function(r){var n,i,a=newDate(1900,void 0,1);if(A(a,e,r+="",0)!=r.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(n=utcDate(newDate(a.y,0,1))).getUTCDay(),n=i>4||0===i?utcMonday.ceil(n):utcMonday(n),n=utcDay$1.offset(n,7*(a.V-1)),a.y=n.getUTCFullYear(),a.m=n.getUTCMonth(),a.d=n.getUTCDate()+(a.w+6)%7):(i=(n=localDate(newDate(a.y,0,1))).getDay(),n=i>4||0===i?monday.ceil(n):monday(n),n=timeDay.offset(n,7*(a.V-1)),a.y=n.getFullYear(),a.m=n.getMonth(),a.d=n.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?utcDate(newDate(a.y,0,1)).getUTCDay():localDate(newDate(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,utcDate(a)):localDate(a)}}function A(e,t,r,n){for(var i,a,o=0,s=t.length,l=r.length;o<s;){if(n>=l)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=B[i in pads?t.charAt(o++):i])||(n=a(e,r,n))<0)return-1}else if(i!=r.charCodeAt(n++))return-1}return n}return v.x=I(r,v),v.X=I(n,v),v.c=I(t,v),x.x=I(r,x),x.X=I(n,x),x.c=I(t,x),{format:function(e){var t=I(e+="",v);return t.toString=function(){return e},t},parse:function(e){var t=F(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=I(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=F(e+="",!0);return t.toString=function(){return e},t}}}var locale$1,timeFormat,timeParse,utcFormat$2,utcParse,pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function requote(e){return e.replace(requoteRe,"\\$&")}function formatRe(e){return new RegExp("^(?:"+e.map(requote).join("|")+")","i")}function formatLookup(e){for(var t={},r=-1,n=e.length;++r<n;)t[e[r].toLowerCase()]=r;return t}function parseWeekdayNumberSunday(e,t,r){var n=numberRe.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function parseWeekdayNumberMonday(e,t,r){var n=numberRe.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function parseWeekNumberSunday(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function parseWeekNumberISO(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function parseWeekNumberMonday(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function parseFullYear(e,t,r){var n=numberRe.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function parseYear(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function parseZone(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function parseQuarter(e,t,r){var n=numberRe.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function parseMonthNumber(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function parseDayOfMonth(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function parseDayOfYear(e,t,r){var n=numberRe.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function parseHour24(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function parseMinutes(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function parseSeconds(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function parseMilliseconds(e,t,r){var n=numberRe.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function parseMicroseconds(e,t,r){var n=numberRe.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function parseLiteralPercent(e,t,r){var n=percentRe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function parseUnixTimestamp(e,t,r){var n=numberRe.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function parseUnixTimestampSeconds(e,t,r){var n=numberRe.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function formatDayOfMonth(e,t){return pad(e.getDate(),t,2)}function formatHour24(e,t){return pad(e.getHours(),t,2)}function formatHour12(e,t){return pad(e.getHours()%12||12,t,2)}function formatDayOfYear(e,t){return pad(1+timeDay.count(timeYear(e),e),t,3)}function formatMilliseconds(e,t){return pad(e.getMilliseconds(),t,3)}function formatMicroseconds(e,t){return formatMilliseconds(e,t)+"000"}function formatMonthNumber(e,t){return pad(e.getMonth()+1,t,2)}function formatMinutes(e,t){return pad(e.getMinutes(),t,2)}function formatSeconds(e,t){return pad(e.getSeconds(),t,2)}function formatWeekdayNumberMonday(e){var t=e.getDay();return 0===t?7:t}function formatWeekNumberSunday(e,t){return pad(sunday.count(timeYear(e)-1,e),t,2)}function dISO(e){var t=e.getDay();return t>=4||0===t?thursday(e):thursday.ceil(e)}function formatWeekNumberISO(e,t){return e=dISO(e),pad(thursday.count(timeYear(e),e)+(4===timeYear(e).getDay()),t,2)}function formatWeekdayNumberSunday(e){return e.getDay()}function formatWeekNumberMonday(e,t){return pad(monday.count(timeYear(e)-1,e),t,2)}function formatYear(e,t){return pad(e.getFullYear()%100,t,2)}function formatYearISO(e,t){return pad((e=dISO(e)).getFullYear()%100,t,2)}function formatFullYear(e,t){return pad(e.getFullYear()%1e4,t,4)}function formatFullYearISO(e,t){var r=e.getDay();return pad((e=r>=4||0===r?thursday(e):thursday.ceil(e)).getFullYear()%1e4,t,4)}function formatZone(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pad(t/60|0,"0",2)+pad(t%60,"0",2)}function formatUTCDayOfMonth(e,t){return pad(e.getUTCDate(),t,2)}function formatUTCHour24(e,t){return pad(e.getUTCHours(),t,2)}function formatUTCHour12(e,t){return pad(e.getUTCHours()%12||12,t,2)}function formatUTCDayOfYear(e,t){return pad(1+utcDay$1.count(utcYear$1(e),e),t,3)}function formatUTCMilliseconds(e,t){return pad(e.getUTCMilliseconds(),t,3)}function formatUTCMicroseconds(e,t){return formatUTCMilliseconds(e,t)+"000"}function formatUTCMonthNumber(e,t){return pad(e.getUTCMonth()+1,t,2)}function formatUTCMinutes(e,t){return pad(e.getUTCMinutes(),t,2)}function formatUTCSeconds(e,t){return pad(e.getUTCSeconds(),t,2)}function formatUTCWeekdayNumberMonday(e){var t=e.getUTCDay();return 0===t?7:t}function formatUTCWeekNumberSunday(e,t){return pad(utcSunday.count(utcYear$1(e)-1,e),t,2)}function UTCdISO(e){var t=e.getUTCDay();return t>=4||0===t?utcThursday(e):utcThursday.ceil(e)}function formatUTCWeekNumberISO(e,t){return e=UTCdISO(e),pad(utcThursday.count(utcYear$1(e),e)+(4===utcYear$1(e).getUTCDay()),t,2)}function formatUTCWeekdayNumberSunday(e){return e.getUTCDay()}function formatUTCWeekNumberMonday(e,t){return pad(utcMonday.count(utcYear$1(e)-1,e),t,2)}function formatUTCYear(e,t){return pad(e.getUTCFullYear()%100,t,2)}function formatUTCYearISO(e,t){return pad((e=UTCdISO(e)).getUTCFullYear()%100,t,2)}function formatUTCFullYear(e,t){return pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCFullYearISO(e,t){var r=e.getUTCDay();return pad((e=r>=4||0===r?utcThursday(e):utcThursday.ceil(e)).getUTCFullYear()%1e4,t,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(e){return+e}function formatUnixTimestampSeconds(e){return Math.floor(+e/1e3)}function defaultLocale$1(e){return locale$1=formatLocale$2(e),timeFormat=locale$1.format,timeParse=locale$1.parse,utcFormat$2=locale$1.utcFormat,utcParse=locale$1.utcParse,locale$1}defaultLocale$1({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var isoSpecifier="%Y-%m-%dT%H:%M:%S.%LZ";function formatIsoNative(e){return e.toISOString()}var formatIso=Date.prototype.toISOString?formatIsoNative:utcFormat$2(isoSpecifier),formatIso$1=formatIso;function parseIsoNative(e){var t=new Date(e);return isNaN(t)?null:t}var parseIso=+new Date("2000-01-01T00:00:00.000Z")?parseIsoNative:utcParse(isoSpecifier),parseIso$1=parseIso,src$1=Object.freeze({__proto__:null,isoFormat:formatIso$1,isoParse:parseIso$1,get timeFormat(){return timeFormat},timeFormatDefaultLocale:defaultLocale$1,timeFormatLocale:formatLocale$2,get timeParse(){return timeParse},get utcFormat(){return utcFormat$2},get utcParse(){return utcParse}}),require$$1=getAugmentedNamespace(src$1);function formatDecimal(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function formatDecimalParts(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function exponent(e){return(e=formatDecimalParts(Math.abs(e)))?e[1]:NaN}function formatGroup(e,t){return function(r,n){for(var i=r.length,a=[],o=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),a.push(r.substring(i-=s,i+s)),!((l+=s+1)>n));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function formatNumerals(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}var prefixExponent,re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(e){if(!(t=re.exec(e)))throw new Error("invalid format: "+e);var t;return new FormatSpecifier({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function FormatSpecifier(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function formatTrim(e){e:for(var t,r=e.length,n=1,i=-1;n<r;++n)switch(e[n]){case".":i=t=n;break;case"0":0===i&&(i=n),t=n;break;default:if(!+e[n])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}function formatPrefixAuto(e,t){var r=formatDecimalParts(e,t);if(!r)return e+"";var n=r[0],i=r[1],a=i-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+formatDecimalParts(e,Math.max(0,t+a-1))[0]}function formatRounded(e,t){var r=formatDecimalParts(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var formatTypes={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:formatDecimal,e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return formatRounded(100*e,t)},r:formatRounded,s:formatPrefixAuto,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function identity$4(e){return e}var locale,format$2,formatPrefix,map=Array.prototype.map,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(e){var t=void 0===e.grouping||void 0===e.thousands?identity$4:formatGroup(map.call(e.grouping,Number),e.thousands+""),r=void 0===e.currency?"":e.currency[0]+"",n=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",a=void 0===e.numerals?identity$4:formatNumerals(map.call(e.numerals,String)),o=void 0===e.percent?"%":e.percent+"",s=void 0===e.minus?"-":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function c(e){var c=(e=formatSpecifier(e)).fill,u=e.align,d=e.sign,h=e.symbol,g=e.zero,p=e.width,f=e.comma,m=e.precision,y=e.trim,b=e.type;"n"===b?(f=!0,b="g"):formatTypes[b]||(void 0===m&&(m=12),y=!0,b="g"),(g||"0"===c&&"="===u)&&(g=!0,c="0",u="=");var v="$"===h?r:"#"===h&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",x="$"===h?n:/[%p]/.test(b)?o:"",B=formatTypes[b],I=/[defgprs%]/.test(b);function F(e){var r,n,o,h=v,F=x;if("c"===b)F=B(e)+F,e="";else{var A=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:B(Math.abs(e),m),y&&(e=formatTrim(e)),A&&0==+e&&"+"!==d&&(A=!1),h=(A?"("===d?d:s:"-"===d||"("===d?"":d)+h,F=("s"===b?prefixes[8+prefixExponent/3]:"")+F+(A&&"("===d?")":""),I)for(r=-1,n=e.length;++r<n;)if(48>(o=e.charCodeAt(r))||o>57){F=(46===o?i+e.slice(r+1):e.slice(r))+F,e=e.slice(0,r);break}}f&&!g&&(e=t(e,1/0));var C=h.length+e.length+F.length,w=C<p?new Array(p-C+1).join(c):"";switch(f&&g&&(e=t(w+e,w.length?p-F.length:1/0),w=""),u){case"<":e=h+e+F+w;break;case"=":e=h+w+e+F;break;case"^":e=w.slice(0,C=w.length>>1)+h+e+F+w.slice(C);break;default:e=w+h+e+F}return a(e)}return m=void 0===m?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),F.toString=function(){return e+""},F}return{format:c,formatPrefix:function(e,t){var r=c(((e=formatSpecifier(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(exponent(t)/3))),i=Math.pow(10,-n),a=prefixes[8+n/3];return function(e){return r(i*e)+a}}}}function defaultLocale(e){return locale=formatLocale$1(e),format$2=locale.format,formatPrefix=locale.formatPrefix,locale}function precisionFixed(e){return Math.max(0,-exponent(Math.abs(e)))}function precisionPrefix(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent(t)/3)))-exponent(Math.abs(e)))}function precisionRound(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,exponent(t)-exponent(e))+1}defaultLocale({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var src=Object.freeze({__proto__:null,FormatSpecifier:FormatSpecifier,get format(){return format$2},formatDefaultLocale:defaultLocale,formatLocale:formatLocale$1,get formatPrefix(){return formatPrefix},formatSpecifier:formatSpecifier,precisionFixed:precisionFixed,precisionPrefix:precisionPrefix,precisionRound:precisionRound}),require$$2=getAugmentedNamespace(src),isStringBlank=function(e){for(var t,r=e.length,n=0;n<r;n++)if(((t=e.charCodeAt(n))<9||t>13)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||t>8205)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0},allBlankCharCodes=isStringBlank,fastIsnumeric=function(e){var t=typeof e;if("string"===t){var r=e;if(0===(e=+e)&&allBlankCharCodes(r))return!1}else if("number"!==t)return!1;return e-e<1},numerical={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"−"},array={},isArray$2=Array.isArray,ab=ArrayBuffer,dv=DataView;function isTypedArray$1(e){return ab.isView(e)&&!(e instanceof dv)}function isArrayOrTypedArray$b(e){return isArray$2(e)||isTypedArray$1(e)}function isArray1D(e){return!isArrayOrTypedArray$b(e[0])}function _rowLength(e,t,r){if(isArrayOrTypedArray$b(e)){if(isArrayOrTypedArray$b(e[0])){for(var n=r,i=0;i<e.length;i++)n=t(n,e[i].length);return n}return e.length}return 0}array.isTypedArray=isTypedArray$1,array.isArrayOrTypedArray=isArrayOrTypedArray$b,array.isArray1D=isArray1D,array.ensureArray=function(e,t){return isArray$2(e)||(e=[]),e.length=t,e},array.concat=function(){var e,t,r,n,i,a,o,s,l=[],c=!0,u=0;for(r=0;r<arguments.length;r++)(a=(n=arguments[r]).length)&&(t?l.push(n):(t=n,i=a),isArray$2(n)?e=!1:(c=!1,u?e!==n.constructor&&(e=!1):e=n.constructor),u+=a);if(!u)return[];if(!l.length)return t;if(c)return t.concat.apply(t,l);if(e){for((o=new e(u)).set(t),r=0;r<l.length;r++)n=l[r],o.set(n,i),i+=n.length;return o}for(o=new Array(u),s=0;s<t.length;s++)o[s]=t[s];for(r=0;r<l.length;r++){for(n=l[r],s=0;s<n.length;s++)o[i+s]=n[s];i+=s}return o},array.maxRowLength=function(e){return _rowLength(e,Math.max,0)},array.minRowLength=function(e){return _rowLength(e,Math.min,1/0)};var isNumeric$w=fastIsnumeric,isArrayOrTypedArray$a=array.isArrayOrTypedArray,nested_property=function(e,t){if(isNumeric$w(t))t=String(t);else if("string"!=typeof t||"[-1]"===t.substr(t.length-4))throw"bad property string";for(var r,n,i,a=0,o=t.split(".");a<o.length;){if(r=String(o[a]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(r[1])o[a]=r[1];else{if(0!==a)throw"bad property string";o.splice(0,1)}for(n=r[2].substr(1,r[2].length-2).split("]["),i=0;i<n.length;i++)a++,o.splice(a,0,Number(n[i]))}a++}return"object"!=typeof e?badContainer(e,t,o):{set:npSet(e,o,t),get:npGet(e,o),astr:t,parts:o,obj:e}};function npGet(e,t){return function(){var r,n,i,a,o,s=e;for(a=0;a<t.length-1;a++){if(-1===(r=t[a])){for(n=!0,i=[],o=0;o<s.length;o++)i[o]=npGet(s[o],t.slice(a+1))(),i[o]!==i[0]&&(n=!1);return n?i[0]:i}if("number"==typeof r&&!isArrayOrTypedArray$a(s))return;if("object"!=typeof(s=s[r])||null===s)return}if("object"==typeof s&&null!==s&&null!==(i=s[t[a]]))return i}}var ARGS_PATTERN=/(^|\.)args\[/;function isDeletable(e,t){return void 0===e||null===e&&!t.match(ARGS_PATTERN)}function npSet(e,t,r){return function(n){var i,a,o=e,s="",l=isDeletable(n,r);for(a=0;a<t.length-1;a++){if("number"==typeof(i=t[a])&&!isArrayOrTypedArray$a(o))throw"array index but container is not an array";if(-1===i){if(l=!setArrayAll(o,t.slice(a+1),n,r))break;return}if(!checkNewContainer(o,i,t[a+1],l))break;if("object"!=typeof(o=o[i])||null===o)throw"container is not an object";s=joinPropStr(s,i)}if(l){if(a===t.length-1&&(delete o[t[a]],Array.isArray(o)&&+t[a]==o.length-1))for(;o.length&&void 0===o[o.length-1];)o.pop()}else o[t[a]]=n}}function joinPropStr(e,t){var r=t;return isNumeric$w(t)?r="["+t+"]":e&&(r="."+t),e+r}function setArrayAll(e,t,r,n){var i,a=isArrayOrTypedArray$a(r),o=!0,s=r,l=n.replace("-1",0),c=!a&&isDeletable(r,l),u=t[0];for(i=0;i<e.length;i++)l=n.replace("-1",i),a&&(c=isDeletable(s=r[i%r.length],l)),c&&(o=!1),checkNewContainer(e,i,u,c)&&npSet(e[i],t,n.replace("-1",i))(s);return o}function checkNewContainer(e,t,r,n){if(void 0===e[t]){if(n)return!1;e[t]="number"==typeof r?[]:{}}return!0}function badContainer(e,t,r){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:r,obj:e}}var nestedProperty$1=nested_property,SIMPLE_PROPERTY_REGEX$1=/^\w*$/,NONE=0,NAME=1,VALUE=2,BOTH=3,UNSET=4,keyed_container=function(e,t,r,n){var i,a,o;r=r||"name",n=n||"value";var s={};t&&t.length?(o=nestedProperty$1(e,t),a=o.get()):a=e,t=t||"";var l={};if(a)for(i=0;i<a.length;i++)l[a[i][r]]=i;var c=SIMPLE_PROPERTY_REGEX$1.test(n),u={set:function(e,t){var i=null===t?UNSET:NONE;if(!a){if(!o||i===UNSET)return;a=[],o.set(a)}var d=l[e];if(void 0===d){if(i===UNSET)return;i|=BOTH,d=a.length,l[e]=d}else t!==(c?a[d][n]:nestedProperty$1(a[d],n).get())&&(i|=VALUE);var h=a[d]=a[d]||{};return h[r]=e,c?h[n]=t:nestedProperty$1(h,n).set(t),null!==t&&(i&=~UNSET),s[d]=s[d]|i,u},get:function(e){if(a){var t=l[e];return void 0===t?void 0:c?a[t][n]:nestedProperty$1(a[t],n).get()}},rename:function(e,t){var n=l[e];return void 0===n||(s[n]=s[n]|NAME,l[t]=n,delete l[e],a[n][r]=t),u},remove:function(e){var t=l[e];if(void 0===t)return u;var o=a[t];if(Object.keys(o).length>2)return s[t]=s[t]|VALUE,u.set(e,null);if(c){for(i=t;i<a.length;i++)s[i]=s[i]|BOTH;for(i=t;i<a.length;i++)l[a[i][r]]--;a.splice(t,1),delete l[e]}else nestedProperty$1(o,n).set(null),s[t]=s[t]|VALUE|UNSET;return u},constructUpdate:function(){for(var e,i,o={},l=Object.keys(s),u=0;u<l.length;u++)i=l[u],e=t+"["+i+"]",a[i]?(s[i]&NAME&&(o[e+"."+r]=a[i][r]),s[i]&VALUE&&(o[e+"."+n]=c?s[i]&UNSET?null:a[i][n]:s[i]&UNSET?null:nestedProperty$1(a[i],n).get())):o[e]=null;return o}};return u},ASCEND=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,SIMPLEATTR=/^[^\.\[\]]+$/,relative_attr=function(e,t){for(;t;){var r=e.match(ASCEND);if(r)e=r[1];else{if(!e.match(SIMPLEATTR))throw new Error("bad relativeAttr call:"+[e,t]);e=""}if("^"!==t.charAt(0))break;t=t.slice(1)}return e&&"["!==t.charAt(0)?e+"."+t:e+t},is_plain_object=function(e){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(e):"[object Object]"===Object.prototype.toString.call(e)&&Object.getPrototypeOf(e).hasOwnProperty("hasOwnProperty")},isNumeric$v=fastIsnumeric,to_log_range=function(e,t){if(e>0)return Math.log(e)/Math.LN10;var r=Math.log(Math.min(t[0],t[1]))/Math.LN10;return isNumeric$v(r)||(r=Math.log(Math.max(t[0],t[1]))/Math.LN10-6),r},isArrayOrTypedArray$9=array.isArrayOrTypedArray,isPlainObject$5=is_plain_object,relink_private=function e(t,r){for(var n in r){var i=r[n],a=t[n];if(a!==i)if("_"===n.charAt(0)||"function"==typeof i){if(n in t)continue;t[n]=i}else if(isArrayOrTypedArray$9(i)&&isArrayOrTypedArray$9(a)&&isPlainObject$5(i[0])){if("customdata"===n||"ids"===n)continue;for(var o=Math.min(i.length,a.length),s=0;s<o;s++)a[s]!==i[s]&&isPlainObject$5(i[s])&&isPlainObject$5(a[s])&&e(a[s],i[s])}else isPlainObject$5(i)&&isPlainObject$5(a)&&(e(a,i),Object.keys(a).length||delete t[n])}};function mod$2(e,t){var r=e%t;return r<0?r+t:r}function modHalf$1(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}var font_attributes,hasRequiredFont_attributes,mod_1={mod:mod$2,modHalf:modHalf$1},coerce={},tinycolorExports={},tinycolor$9={get exports(){return tinycolorExports},set exports(e){tinycolorExports=e}};function requireFont_attributes(){return hasRequiredFont_attributes||(hasRequiredFont_attributes=1,font_attributes=function(e){var t=e.editType,r=e.colorEditType;void 0===r&&(r=t);var n={family:{valType:"string",noBlank:!0,strict:!0,editType:t,description:["HTML font family - the typeface that will be applied by the web browser.","The web browser will only be able to apply a font if it is available on the system","which it operates. Provide multiple font families, separated by commas, to indicate","the preference in which to apply fonts if they aren't available on the system.","The Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise) generates images on a server,","where only a select number of","fonts are installed and supported.","These include *Arial*, *Balto*, *Courier New*, *Droid Sans*,, *Droid Serif*,","*Droid Sans Mono*, *Gravitas One*, *Old Standard TT*, *Open Sans*, *Overpass*,","*PT Sans Narrow*, *Raleway*, *Times New Roman*."].join(" ")},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:r},editType:t,description:""+(e.description||"")};return e.autoSize&&(n.size.dflt="auto"),e.autoColor&&(n.color.dflt="auto"),e.arrayOk&&(n.family.arrayOk=!0,n.size.arrayOk=!0,n.color.arrayOk=!0),n}),font_attributes}!function(e){!function(t){var r=/^\s+/,n=/\s+$/,i=0,a=t.round,o=t.min,s=t.max,l=t.random;function c(e,l){if(l=l||{},(e=e||"")instanceof c)return e;if(!(this instanceof c))return new c(e,l);var u=function(e){var i={r:0,g:0,b:0},a=1,l=null,c=null,u=null,d=!1,h=!1;"string"==typeof e&&(e=function(e){e=e.replace(r,"").replace(n,"").toLowerCase();var t,i=!1;if(Q[e])e=Q[e],i=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=D.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=D.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=D.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=D.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=D.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=D.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=D.hex8.exec(e))return{r:_(t[1]),g:_(t[2]),b:_(t[3]),a:k(t[4]),format:i?"name":"hex8"};if(t=D.hex6.exec(e))return{r:_(t[1]),g:_(t[2]),b:_(t[3]),format:i?"name":"hex"};if(t=D.hex4.exec(e))return{r:_(t[1]+""+t[1]),g:_(t[2]+""+t[2]),b:_(t[3]+""+t[3]),a:k(t[4]+""+t[4]),format:i?"name":"hex8"};if(t=D.hex3.exec(e))return{r:_(t[1]+""+t[1]),g:_(t[2]+""+t[2]),b:_(t[3]+""+t[3]),format:i?"name":"hex"};return!1}(e));"object"==typeof e&&(V(e.r)&&V(e.g)&&V(e.b)?(i=function(e,t,r){return{r:255*E(e,255),g:255*E(t,255),b:255*E(r,255)}}(e.r,e.g,e.b),d=!0,h="%"===String(e.r).substr(-1)?"prgb":"rgb"):V(e.h)&&V(e.s)&&V(e.v)?(l=R(e.s),c=R(e.v),i=function(e,r,n){e=6*E(e,360),r=E(r,100),n=E(n,100);var i=t.floor(e),a=e-i,o=n*(1-r),s=n*(1-a*r),l=n*(1-(1-a)*r),c=i%6;return{r:255*[n,s,o,o,l,n][c],g:255*[l,n,n,s,o,o][c],b:255*[o,o,l,n,n,s][c]}}(e.h,l,c),d=!0,h="hsv"):V(e.h)&&V(e.s)&&V(e.l)&&(l=R(e.s),u=R(e.l),i=function(e,t,r){var n,i,a;function o(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}if(e=E(e,360),t=E(t,100),r=E(r,100),0===t)n=i=a=r;else{var s=r<.5?r*(1+t):r+t-r*t,l=2*r-s;n=o(l,s,e+1/3),i=o(l,s,e),a=o(l,s,e-1/3)}return{r:255*n,g:255*i,b:255*a}}(e.h,l,u),d=!0,h="hsl"),e.hasOwnProperty("a")&&(a=e.a));return a=S(a),{ok:d,format:e.format||h,r:o(255,s(i.r,0)),g:o(255,s(i.g,0)),b:o(255,s(i.b,0)),a:a}}(e);this._originalInput=e,this._r=u.r,this._g=u.g,this._b=u.b,this._a=u.a,this._roundA=a(100*this._a)/100,this._format=l.format||u.format,this._gradientType=l.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=u.ok,this._tc_id=i++}function u(e,t,r){e=E(e,255),t=E(t,255),r=E(r,255);var n,i,a=s(e,t,r),l=o(e,t,r),c=(a+l)/2;if(a==l)n=i=0;else{var u=a-l;switch(i=c>.5?u/(2-a-l):u/(a+l),a){case e:n=(t-r)/u+(t<r?6:0);break;case t:n=(r-e)/u+2;break;case r:n=(e-t)/u+4}n/=6}return{h:n,s:i,l:c}}function d(e,t,r){e=E(e,255),t=E(t,255),r=E(r,255);var n,i,a=s(e,t,r),l=o(e,t,r),c=a,u=a-l;if(i=0===a?0:u/a,a==l)n=0;else{switch(a){case e:n=(t-r)/u+(t<r?6:0);break;case t:n=(r-e)/u+2;break;case r:n=(e-t)/u+4}n/=6}return{h:n,s:i,v:c}}function h(e,t,r,n){var i=[T(a(e).toString(16)),T(a(t).toString(16)),T(a(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function g(e,t,r,n){return[T($(n)),T(a(e).toString(16)),T(a(t).toString(16)),T(a(r).toString(16))].join("")}function p(e,t){t=0===t?0:t||10;var r=c(e).toHsl();return r.s-=t/100,r.s=L(r.s),c(r)}function f(e,t){t=0===t?0:t||10;var r=c(e).toHsl();return r.s+=t/100,r.s=L(r.s),c(r)}function m(e){return c(e).desaturate(100)}function y(e,t){t=0===t?0:t||10;var r=c(e).toHsl();return r.l+=t/100,r.l=L(r.l),c(r)}function b(e,t){t=0===t?0:t||10;var r=c(e).toRgb();return r.r=s(0,o(255,r.r-a(-t/100*255))),r.g=s(0,o(255,r.g-a(-t/100*255))),r.b=s(0,o(255,r.b-a(-t/100*255))),c(r)}function v(e,t){t=0===t?0:t||10;var r=c(e).toHsl();return r.l-=t/100,r.l=L(r.l),c(r)}function x(e,t){var r=c(e).toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,c(r)}function B(e){var t=c(e).toHsl();return t.h=(t.h+180)%360,c(t)}function I(e){var t=c(e).toHsl(),r=t.h;return[c(e),c({h:(r+120)%360,s:t.s,l:t.l}),c({h:(r+240)%360,s:t.s,l:t.l})]}function F(e){var t=c(e).toHsl(),r=t.h;return[c(e),c({h:(r+90)%360,s:t.s,l:t.l}),c({h:(r+180)%360,s:t.s,l:t.l}),c({h:(r+270)%360,s:t.s,l:t.l})]}function A(e){var t=c(e).toHsl(),r=t.h;return[c(e),c({h:(r+72)%360,s:t.s,l:t.l}),c({h:(r+216)%360,s:t.s,l:t.l})]}function C(e,t,r){t=t||6,r=r||30;var n=c(e).toHsl(),i=360/r,a=[c(e)];for(n.h=(n.h-(i*t>>1)+720)%360;--t;)n.h=(n.h+i)%360,a.push(c(n));return a}function w(e,t){t=t||6;for(var r=c(e).toHsv(),n=r.h,i=r.s,a=r.v,o=[],s=1/t;t--;)o.push(c({h:n,s:i,v:a})),a=(a+s)%1;return o}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,r,n,i=this.toRgb();return e=i.r/255,r=i.g/255,n=i.b/255,.2126*(e<=.03928?e/12.92:t.pow((e+.055)/1.055,2.4))+.7152*(r<=.03928?r/12.92:t.pow((r+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:t.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=S(e),this._roundA=a(100*this._a)/100,this},toHsv:function(){var e=d(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=d(this._r,this._g,this._b),t=a(360*e.h),r=a(100*e.s),n=a(100*e.v);return 1==this._a?"hsv("+t+", "+r+"%, "+n+"%)":"hsva("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=u(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=u(this._r,this._g,this._b),t=a(360*e.h),r=a(100*e.s),n=a(100*e.l);return 1==this._a?"hsl("+t+", "+r+"%, "+n+"%)":"hsla("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return h(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,r,n,i){var o=[T(a(e).toString(16)),T(a(t).toString(16)),T(a(r).toString(16)),T($(n))];if(i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*E(this._r,255))+"%",g:a(100*E(this._g,255))+"%",b:a(100*E(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*E(this._r,255))+"%, "+a(100*E(this._g,255))+"%, "+a(100*E(this._b,255))+"%)":"rgba("+a(100*E(this._r,255))+"%, "+a(100*E(this._g,255))+"%, "+a(100*E(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(U[h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+g(this._r,this._g,this._b,this._a),r=t,n=this._gradientType?"GradientType = 1, ":"";if(e){var i=c(e);r="#"+g(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,n=this._a<1&&this._a>=0;return t||!n||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(r=this.toRgbString()),"prgb"===e&&(r=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(r=this.toHexString()),"hex3"===e&&(r=this.toHexString(!0)),"hex4"===e&&(r=this.toHex8String(!0)),"hex8"===e&&(r=this.toHex8String()),"name"===e&&(r=this.toName()),"hsl"===e&&(r=this.toHslString()),"hsv"===e&&(r=this.toHsvString()),r||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return c(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(y,arguments)},brighten:function(){return this._applyModification(b,arguments)},darken:function(){return this._applyModification(v,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(C,arguments)},complement:function(){return this._applyCombination(B,arguments)},monochromatic:function(){return this._applyCombination(w,arguments)},splitcomplement:function(){return this._applyCombination(A,arguments)},triad:function(){return this._applyCombination(I,arguments)},tetrad:function(){return this._applyCombination(F,arguments)}},c.fromRatio=function(e,t){if("object"==typeof e){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]="a"===n?e[n]:R(e[n]));e=r}return c(e,t)},c.equals=function(e,t){return!(!e||!t)&&c(e).toRgbString()==c(t).toRgbString()},c.random=function(){return c.fromRatio({r:l(),g:l(),b:l()})},c.mix=function(e,t,r){r=0===r?0:r||50;var n=c(e).toRgb(),i=c(t).toRgb(),a=r/100;return c({r:(i.r-n.r)*a+n.r,g:(i.g-n.g)*a+n.g,b:(i.b-n.b)*a+n.b,a:(i.a-n.a)*a+n.a})},c.readability=function(e,r){var n=c(e),i=c(r);return(t.max(n.getLuminance(),i.getLuminance())+.05)/(t.min(n.getLuminance(),i.getLuminance())+.05)},c.isReadable=function(e,t,r){var n,i,a=c.readability(e,t);switch(i=!1,(n=function(e){var t,r;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==r&&"large"!==r&&(r="small");return{level:t,size:r}}(r)).level+n.size){case"AAsmall":case"AAAlarge":i=a>=4.5;break;case"AAlarge":i=a>=3;break;case"AAAsmall":i=a>=7}return i},c.mostReadable=function(e,t,r){var n,i,a,o,s=null,l=0;i=(r=r||{}).includeFallbackColors,a=r.level,o=r.size;for(var u=0;u<t.length;u++)(n=c.readability(e,t[u]))>l&&(l=n,s=c(t[u]));return c.isReadable(e,s,{level:a,size:o})||!i?s:(r.includeFallbackColors=!1,c.mostReadable(e,["#fff","#000"],r))};var Q=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},U=c.hexNames=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}(Q);function S(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function E(e,r){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=o(r,s(0,parseFloat(e))),n&&(e=parseInt(e*r,10)/100),t.abs(e-r)<1e-6?1:e%r/parseFloat(r)}function L(e){return o(1,s(0,e))}function _(e){return parseInt(e,16)}function T(e){return 1==e.length?"0"+e:""+e}function R(e){return e<=1&&(e=100*e+"%"),e}function $(e){return t.round(255*parseFloat(e)).toString(16)}function k(e){return _(e)/255}var N,G,M,D=(G="[\\s|\\(]+("+(N="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",M="[\\s|\\(]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",{CSS_UNIT:new RegExp(N),rgb:new RegExp("rgb"+G),rgba:new RegExp("rgba"+M),hsl:new RegExp("hsl"+G),hsla:new RegExp("hsla"+M),hsv:new RegExp("hsv"+G),hsva:new RegExp("hsva"+M),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function V(e){return!!D.CSS_UNIT.exec(e)}e.exports?e.exports=c:window.tinycolor=c}(Math)}(tinycolor$9);var constants$M={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"},constants$L=constants$M,fontAttrs$f=requireFont_attributes(),font=fontAttrs$f({editType:"none",description:"Sets the default hover label font used by all traces on the graph."});font.family.dflt=constants$L.HOVERFONT,font.size.dflt=constants$L.HOVERFONTSIZE;var layout_attributes$6={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"],description:["Determines the mode of single click interactions.","*event* is the default value and emits the `plotly_click`","event. In addition this mode emits the `plotly_selected` event","in drag modes *lasso* and *select*, but with no event data attached","(kept for compatibility reasons).","The *select* flag enables selecting single","data points via click. This mode also supports persistent selections,","meaning that pressing Shift while clicking, adds to / subtracts from an","existing selection. *select* with `hovermode`: *x* can be confusing, consider","explicitly setting `hovermode`: *closest* when using this feature.","Selection events are sent accordingly as long as *event* flag is set as well.","When the *event* flag is missing, `plotly_click` and `plotly_selected`","events are not fired."].join(" ")},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar",description:["Determines the mode of drag interactions.","*select* and *lasso* apply only to scatter traces with","markers or text. *orbit* and *turntable* apply only to","3D scenes."].join(" ")},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar",description:["Determines the mode of hover interactions.","If *closest*, a single hoverlabel will appear","for the *closest* point within the `hoverdistance`.","If *x* (or *y*), multiple hoverlabels will appear for multiple points","at the *closest* x- (or y-) coordinate within the `hoverdistance`,","with the caveat that no more than one hoverlabel will appear per trace.","If *x unified* (or *y unified*), a single hoverlabel will appear","multiple points at the closest x- (or y-) coordinate within the `hoverdistance`","with the caveat that no more than one hoverlabel will appear per trace.","In this mode, spikelines are enabled by default perpendicular to the specified axis.","If false, hover interactions are disabled."].join(" ")},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none",description:["Sets the default distance (in pixels) to look for data","to add hover labels (-1 means no cutoff, 0 means no looking for data).","This is only a real distance for hovering on point-like objects,","like scatter points. For area-like objects (bars, scatter fills, etc)","hovering is on inside the area and off outside, but these objects","will not supersede hover on point-like objects in case of conflict."].join(" ")},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none",description:["Sets the default distance (in pixels) to look for data to draw","spikelines to (-1 means no cutoff, 0 means no looking for data).","As with hoverdistance, distance does not apply to area-like objects.","In addition, some objects can be hovered on but will not generate","spikelines, such as scatter fills."].join(" ")},hoverlabel:{bgcolor:{valType:"color",editType:"none",description:["Sets the background color of all hover labels on graph"].join(" ")},bordercolor:{valType:"color",editType:"none",description:["Sets the border color of all hover labels on graph."].join(" ")},font:font,grouptitlefont:fontAttrs$f({editType:"none",description:["Sets the font for group titles in hover (unified modes).","Defaults to `hoverlabel.font`."].join(" ")}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none",description:["Sets the horizontal alignment of the text content within hover label box.","Has an effect only if the hover label text spans more two or more lines"].join(" ")},namelength:{valType:"integer",min:-1,dflt:15,editType:"none",description:["Sets the default length (in number of characters) of the trace name in","the hover labels for all traces. -1 shows the whole name","regardless of length. 0-3 shows the first 0-3 characters, and","an integer >3 will show the whole name if it is less than that","many characters, but if it is longer, will truncate to","`namelength - 3` characters and add an ellipsis."].join(" ")},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",description:["When `dragmode` is set to *select*, this limits the selection of the drag to","horizontal, vertical or diagonal. *h* only allows horizontal selection,","*v* only vertical, *d* only diagonal and *any* sets no limit."].join(" "),editType:"none"}},extend={},isPlainObject$4=is_plain_object,isArray$1=Array.isArray;function primitivesLoopSplice(e,t){var r,n;for(r=0;r<e.length;r++){if(null!==(n=e[r])&&"object"==typeof n)return!1;void 0!==n&&(t[r]=n)}return!0}function _extend(e,t,r,n){var i,a,o,s,l,c,u=e[0],d=e.length;if(2===d&&isArray$1(u)&&isArray$1(e[1])&&0===u.length){if(primitivesLoopSplice(e[1],u))return u;u.splice(0,u.length)}for(var h=1;h<d;h++)for(a in i=e[h])o=u[a],s=i[a],n&&isArray$1(s)?u[a]=s:t&&s&&(isPlainObject$4(s)||(l=isArray$1(s)))?(l?(l=!1,c=o&&isArray$1(o)?o:[]):c=o&&isPlainObject$4(o)?o:{},u[a]=_extend([c,s],t,r,n)):(void 0!==s||r)&&(u[a]=s);return u}extend.extendFlat=function(){return _extend(arguments,!1,!1,!1)},extend.extendDeep=function(){return _extend(arguments,!0,!1,!1)},extend.extendDeepAll=function(){return _extend(arguments,!0,!0,!1)},extend.extendDeepNoArrays=function(){return _extend(arguments,!0,!1,!0)};var fontAttrs$e=requireFont_attributes(),hoverLabelAttrs=layout_attributes$6.hoverlabel,extendFlat$k=extend.extendFlat,attributes$N={hoverlabel:{bgcolor:extendFlat$k({},hoverLabelAttrs.bgcolor,{arrayOk:!0,description:"Sets the background color of the hover labels for this trace"}),bordercolor:extendFlat$k({},hoverLabelAttrs.bordercolor,{arrayOk:!0,description:"Sets the border color of the hover labels for this trace."}),font:fontAttrs$e({arrayOk:!0,editType:"none",description:"Sets the font used in hover labels."}),align:extendFlat$k({},hoverLabelAttrs.align,{arrayOk:!0}),namelength:extendFlat$k({},hoverLabelAttrs.namelength,{arrayOk:!0}),editType:"none"}},fontAttrs$d=requireFont_attributes(),fxAttrs$1=attributes$N,attributes$M={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc",description:["Determines whether or not this trace is visible.","If *legendonly*, the trace is not drawn,","but can appear as a legend item","(provided that the legend itself is visible)."].join(" ")},showlegend:{valType:"boolean",dflt:!0,editType:"style",description:["Determines whether or not an item corresponding to this","trace is shown in the legend."].join(" ")},legendgroup:{valType:"string",dflt:"",editType:"style",description:["Sets the legend group for this trace.","Traces part of the same legend group hide/show at the same time","when toggling legend items."].join(" ")},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style",description:["Sets the title of the legend group."].join(" ")},font:fontAttrs$d({editType:"style",description:["Sets this legend group's title font."].join(" ")}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style",description:["Sets the legend rank for this trace.","Items and groups with smaller ranks are presented on top/left side while","with `*reversed* `legend.traceorder` they are on bottom/right side.","The default legendrank is 1000,","so that you can use ranks less than 1000 to place certain items before all unranked items,","and ranks greater than 1000 to go after all unranked items."].join(" ")},legendwidth:{valType:"number",min:0,editType:"style",description:"Sets the width (in px or fraction) of the legend for this trace."},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style",description:"Sets the opacity of the trace."},name:{valType:"string",editType:"style",description:["Sets the trace name.","The trace name appear as the legend item and on hover."].join(" ")},uid:{valType:"string",editType:"plot",anim:!0,description:["Assign an id to this trace,","Use this to provide object constancy between traces during animations","and transitions."].join(" ")},ids:{valType:"data_array",editType:"calc",anim:!0,description:["Assigns id labels to each datum.","These ids for object constancy of data points during animation.","Should be an array of strings, not numbers or any other type."].join(" ")},customdata:{valType:"data_array",editType:"calc",description:["Assigns extra data each datum.","This may be useful when listening to hover, click and selection events.","Note that, *scatter* traces also appends customdata items in the markers","DOM elements"].join(" ")},meta:{valType:"any",arrayOk:!0,editType:"plot",description:["Assigns extra meta information associated with this trace","that can be used in various text attributes.","Attributes such as trace `name`, graph, axis and colorbar `title.text`, annotation `text`","`rangeselector`, `updatemenues` and `sliders` `label` text","all support `meta`.","To access the trace `meta` values in an attribute in the same trace, simply use","`%{meta[i]}` where `i` is the index or key of the `meta`","item in question.","To access trace `meta` in layout attributes, use","`%{data[n[.meta[i]}` where `i` is the index or key of the `meta`","and `n` is the trace index."].join(" ")},selectedpoints:{valType:"any",editType:"calc",description:["Array containing integer indices of selected points.","Has an effect only for traces that support selections.","Note that an empty array means an empty selection where the `unselected`","are turned on for all points, whereas, any other non-array values means no","selection all where the `selected` and `unselected` styles have no effect."].join(" ")},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none",description:["Determines which trace information appear on hover.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired."].join(" ")},hoverlabel:fxAttrs$1.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc",description:["The stream id number links a data trace on a plot with a stream.","See https://chart-studio.plotly.com/settings for more details."].join(" ")},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc",description:["Sets the maximum number of points to keep on the plots from an","incoming stream.","If `maxpoints` is set to *50*, only the newest 50 points will","be displayed on the plot."].join(" ")},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc",description:["WARNING: All transforms are deprecated and may be removed from the API in next major version.","An array of operations that manipulate the trace data,","for example filtering or sorting the data arrays."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of some user-driven changes to the trace:","`constraintrange` in `parcoords` traces, as well as some","`editable: true` modifications such as `name` and `colorbar.title`.","Defaults to `layout.uirevision`.","Note that other user-driven trace attribute changes are controlled","by `layout` attributes:","`trace.visible` is controlled by `layout.legend.uirevision`,","`selectedpoints` is controlled by `layout.selectionrevision`,","and `colorbar.(x|y)` (accessible with `config: {editable: true}`)","is controlled by `layout.editrevision`.","Trace changes are tracked by `uid`, which only falls back on trace","index if no `uid` is provided. So if your app can add/remove traces","before the end of the `data` array, such that the same trace has a","different index, you can still preserve user-driven changes if you","give each trace a `uid` that stays with it as it moves."].join(" ")}},tinycolor$8=tinycolorExports,scales$2={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},defaultScale=scales$2.RdBu;function getScale(e,t){if(t||(t=defaultScale),!e)return t;function r(){try{e=scales$2[e]||JSON.parse(e)}catch(r){e=t}}return"string"==typeof e&&(r(),"string"==typeof e&&r()),isValidScaleArray(e)?e:t}function isValidScaleArray(e){var t=0;if(!Array.isArray(e)||e.length<2)return!1;if(!e[0]||!e[e.length-1])return!1;if(0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var r=0;r<e.length;r++){var n=e[r];if(2!==n.length||+n[0]<t||!tinycolor$8(n[1]).isValid())return!1;t=+n[0]}return!0}function isValidScale$2(e){return void 0!==scales$2[e]||isValidScaleArray(e)}var scales_1={scales:scales$2,defaultScale:defaultScale,get:getScale,isValid:isValidScale$2},colorExports={},color$1={get exports(){return colorExports},set exports(e){colorExports=e}},attributes$L={defaults:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],defaultLine:"#444",lightLine:"#eee",background:"#fff",borderLine:"#BEC8D9",lightFraction:1e3/11},tinycolor$7=tinycolorExports,isNumeric$u=fastIsnumeric,isTypedArray=array.isTypedArray,color=color$1.exports={},colorAttrs$6=attributes$L;color.defaults=colorAttrs$6.defaults;var defaultLine=color.defaultLine=colorAttrs$6.defaultLine;color.lightLine=colorAttrs$6.lightLine;var background=color.background=colorAttrs$6.background;function cleanOne(e){if(isNumeric$u(e)||"string"!=typeof e)return e;var t=e.trim();if("rgb"!==t.substr(0,3))return e;var r=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return e;var n=r[1].trim().split(/\s*[\s,]\s*/),i="a"===t.charAt(3)&&4===n.length;if(!i&&3!==n.length)return e;for(var a=0;a<n.length;a++){if(!n[a].length)return e;if(n[a]=Number(n[a]),!(n[a]>=0))return e;if(3===a)n[a]>1&&(n[a]=1);else if(n[a]>=1)return e}var o=Math.round(255*n[0])+", "+Math.round(255*n[1])+", "+Math.round(255*n[2]);return i?"rgba("+o+", "+n[3]+")":"rgb("+o+")"}color.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"},color.rgb=function(e){return color.tinyRGB(tinycolor$7(e))},color.opacity=function(e){return e?tinycolor$7(e).getAlpha():0},color.addOpacity=function(e,t){var r=tinycolor$7(e).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+t+")"},color.combine=function(e,t){var r=tinycolor$7(e).toRgb();if(1===r.a)return tinycolor$7(e).toRgbString();var n=tinycolor$7(t||background).toRgb(),i=1===n.a?n:{r:255*(1-n.a)+n.r*n.a,g:255*(1-n.a)+n.g*n.a,b:255*(1-n.a)+n.b*n.a},a={r:i.r*(1-r.a)+r.r*r.a,g:i.g*(1-r.a)+r.g*r.a,b:i.b*(1-r.a)+r.b*r.a};return tinycolor$7(a).toRgbString()},color.contrast=function(e,t,r){var n=tinycolor$7(e);return 1!==n.getAlpha()&&(n=tinycolor$7(color.combine(e,background))),(n.isDark()?t?n.lighten(t):background:r?n.darken(r):defaultLine).toString()},color.stroke=function(e,t){var r=tinycolor$7(t);e.style({stroke:color.tinyRGB(r),"stroke-opacity":r.getAlpha()})},color.fill=function(e,t){var r=tinycolor$7(t);e.style({fill:color.tinyRGB(r),"fill-opacity":r.getAlpha()})},color.clean=function(e){if(e&&"object"==typeof e){var t,r,n,i,a=Object.keys(e);for(t=0;t<a.length;t++)if(i=e[n=a[t]],"color"===n.substr(n.length-5))if(Array.isArray(i))for(r=0;r<i.length;r++)i[r]=cleanOne(i[r]);else e[n]=cleanOne(i);else if("colorscale"===n.substr(n.length-10)&&Array.isArray(i))for(r=0;r<i.length;r++)Array.isArray(i[r])&&(i[r][1]=cleanOne(i[r][1]));else if(Array.isArray(i)){var o=i[0];if(!Array.isArray(o)&&o&&"object"==typeof o)for(r=0;r<i.length;r++)color.clean(i[r])}else i&&"object"==typeof i&&!isTypedArray(i)&&color.clean(i)}};var interactions={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2},regex={counter:function(e,t,r,n){var i=(t||"")+(r?"":"$"),a=!1===n?"":"^";return"xy"===e?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+i):new RegExp(a+e+"([2-9]|[1-9][0-9]+)?"+i)}};!function(e){var t=fastIsnumeric,r=tinycolorExports,n=attributes$M,i=scales_1,a=colorExports,o=interactions.DESELECTDIM,s=nested_property,l=regex.counter,c=mod_1.modHalf,u=array.isArrayOrTypedArray;function d(t,r){var n=e.valObjectMeta[r.valType];if(r.arrayOk&&u(t))return!0;if(n.validateFunction)return n.validateFunction(t,r);var i={},a=i,o={set:function(e){a=e}};return n.coerceFunction(t,o,i,r),a!==i}e.valObjectMeta={data_array:{description:["An {array} of data.","The value MUST be an {array}, or we ignore it.","Note that typed arrays (e.g. Float32Array) are supported."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(e,t,r){u(e)?t.set(e):void 0!==r&&t.set(r)}},enumerated:{description:["Enumerated value type. The available values are listed","in `values`."].join(" "),requiredOpts:["values"],otherOpts:["dflt","coerceNumber","arrayOk"],coerceFunction:function(e,t,r,n){n.coerceNumber&&(e=+e),-1===n.values.indexOf(e)?t.set(r):t.set(e)},validateFunction:function(e,t){t.coerceNumber&&(e=+e);for(var r=t.values,n=0;n<r.length;n++){var i=String(r[n]);if("/"===i.charAt(0)&&"/"===i.charAt(i.length-1)){if(new RegExp(i.substr(1,i.length-2)).test(e))return!0}else if(e===r[n])return!0}return!1}},boolean:{description:"A boolean (true/false) value.",requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(e,t,r){!0===e||!1===e?t.set(e):t.set(r)}},number:{description:["A number or a numeric value","(e.g. a number inside a string).","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk"],coerceFunction:function(e,r,n,i){!t(e)||void 0!==i.min&&e<i.min||void 0!==i.max&&e>i.max?r.set(n):r.set(+e)}},integer:{description:["An integer or an integer inside a string.","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk"],coerceFunction:function(e,r,n,i){e%1||!t(e)||void 0!==i.min&&e<i.min||void 0!==i.max&&e>i.max?r.set(n):r.set(+e)}},string:{description:["A string value.","Numbers are converted to strings except for attributes with","`strict` set to true."].join(" "),requiredOpts:[],otherOpts:["dflt","noBlank","strict","arrayOk","values"],coerceFunction:function(e,t,r,n){if("string"!=typeof e){var i="number"==typeof e;!0!==n.strict&&i?t.set(String(e)):t.set(r)}else n.noBlank&&!e?t.set(r):t.set(e)}},color:{description:["A string describing color.","Supported formats:","- hex (e.g. '#d3d3d3')","- rgb (e.g. 'rgb(255, 0, 0)')","- rgba (e.g. 'rgb(255, 0, 0, 0.5)')","- hsl (e.g. 'hsl(0, 100%, 50%)')","- hsv (e.g. 'hsv(0, 100%, 100%)')","- named colors (full list: http://www.w3.org/TR/css3-color/#svg-color)"].join(" "),requiredOpts:[],otherOpts:["dflt","arrayOk"],coerceFunction:function(e,t,n){r(e).isValid()?t.set(e):t.set(n)}},colorlist:{description:["A list of colors.","Must be an {array} containing valid colors."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(e,t,n){Array.isArray(e)&&e.length&&e.every((function(e){return r(e).isValid()}))?t.set(e):t.set(n)}},colorscale:{description:["A Plotly colorscale either picked by a name:","(any of",Object.keys(i.scales).join(", "),")","customized as an {array} of 2-element {arrays} where","the first element is the normalized color level value","(starting at *0* and ending at *1*),","and the second item is a valid color string."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(e,t,r){t.set(i.get(e,r))}},angle:{description:["A number (in degree) between -180 and 180."].join(" "),requiredOpts:[],otherOpts:["dflt","arrayOk"],coerceFunction:function(e,r,n){"auto"===e?r.set("auto"):t(e)?r.set(c(+e,360)):r.set(n)}},subplotid:{description:["An id string of a subplot type (given by dflt), optionally","followed by an integer >1. e.g. if dflt='geo', we can have","'geo', 'geo2', 'geo3', ..."].join(" "),requiredOpts:["dflt"],otherOpts:["regex"],coerceFunction:function(e,t,r,n){var i=n.regex||l(r);"string"==typeof e&&i.test(e)?t.set(e):t.set(r)},validateFunction:function(e,t){var r=t.dflt;return e===r||"string"==typeof e&&!!l(r).test(e)}},flaglist:{description:["A string representing a combination of flags","(order does not matter here).","Combine any of the available `flags` with *+*.","(e.g. ('lines+markers')).","Values in `extras` cannot be combined."].join(" "),requiredOpts:["flags"],otherOpts:["dflt","extras","arrayOk"],coerceFunction:function(e,t,r,n){if(-1===(n.extras||[]).indexOf(e))if("string"==typeof e){for(var i=e.split("+"),a=0;a<i.length;){var o=i[a];-1===n.flags.indexOf(o)||i.indexOf(o)<a?i.splice(a,1):a++}i.length?t.set(i.join("+")):t.set(r)}else t.set(r);else t.set(e)}},any:{description:"Any type.",requiredOpts:[],otherOpts:["dflt","values","arrayOk"],coerceFunction:function(e,t,r){void 0===e?t.set(r):t.set(e)}},info_array:{description:["An {array} of plot information."].join(" "),requiredOpts:["items"],otherOpts:["dflt","freeLength","dimensions"],coerceFunction:function(t,r,n,i){function a(t,r,n){var i,a={set:function(e){i=e}};return void 0===n&&(n=r.dflt),e.valObjectMeta[r.valType].coerceFunction(t,a,n,r),i}var o=2===i.dimensions||"1-2"===i.dimensions&&Array.isArray(t)&&Array.isArray(t[0]);if(Array.isArray(t)){var s,l,c,u,d,h,g=i.items,p=[],f=Array.isArray(g),m=f&&o&&Array.isArray(g[0]),y=o&&f&&!m,b=f&&!y?g.length:t.length;if(n=Array.isArray(n)?n:[],o)for(s=0;s<b;s++)for(p[s]=[],c=Array.isArray(t[s])?t[s]:[],d=y?g.length:f?g[s].length:c.length,l=0;l<d;l++)u=y?g[l]:f?g[s][l]:g,void 0!==(h=a(c[l],u,(n[s]||[])[l]))&&(p[s][l]=h);else for(s=0;s<b;s++)void 0!==(h=a(t[s],f?g[s]:g,n[s]))&&(p[s]=h);r.set(p)}else r.set(n)},validateFunction:function(e,t){if(!Array.isArray(e))return!1;var r=t.items,n=Array.isArray(r),i=2===t.dimensions;if(!t.freeLength&&e.length!==r.length)return!1;for(var a=0;a<e.length;a++)if(i){if(!Array.isArray(e[a])||!t.freeLength&&e[a].length!==r[a].length)return!1;for(var o=0;o<e[a].length;o++)if(!d(e[a][o],n?r[a][o]:r))return!1}else if(!d(e[a],n?r[a]:r))return!1;return!0}}},e.coerce=function(t,r,n,i,a){var o=s(n,i).get(),l=s(t,i),c=s(r,i),h=l.get(),g=r._template;if(void 0===h&&g&&(h=s(g,i).get(),g=0),void 0===a&&(a=o.dflt),o.arrayOk&&u(h))return c.set(h),h;var p=e.valObjectMeta[o.valType].coerceFunction;p(h,c,a,o);var f=c.get();return g&&f===a&&!d(h,o)&&(p(h=s(g,i).get(),c,a,o),f=c.get()),f},e.coerce2=function(t,r,n,i,a){var o=s(t,i),l=e.coerce(t,r,n,i,a),c=o.get();return null!=c&&l},e.coerceFont=function(e,t,r){var n={};return r=r||{},n.family=e(t+".family",r.family),n.size=e(t+".size",r.size),n.color=e(t+".color",r.color),n},e.coercePattern=function(e,t,r,n){if(e(t+".shape")){e(t+".solidity"),e(t+".size");var i="overlay"===e(t+".fillmode");if(!n){var o=e(t+".bgcolor",i?r:void 0);e(t+".fgcolor",i?a.contrast(o):r)}e(t+".fgopacity",i?.5:1)}},e.coerceHoverinfo=function(t,r,i){var a,o=r._module.attributes,s=o.hoverinfo?o:n,l=s.hoverinfo;if(1===i._dataLength){var c="all"===l.dflt?l.flags.slice():l.dflt.split("+");c.splice(c.indexOf("name"),1),a=c.join("+")}return e.coerce(t,r,s,"hoverinfo",a)},e.coerceSelectionMarkerOpacity=function(e,t){if(e.marker){var r,n,i=e.marker.opacity;if(void 0!==i)u(i)||e.selected||e.unselected||(r=i,n=o*i),t("selected.marker.opacity",r),t("unselected.marker.opacity",n)}},e.validate=d}(coerce);var dates={},loggersExports={},loggers$2={get exports(){return loggersExports},set exports(e){loggersExports=e}},configAttributes={staticPlot:{valType:"boolean",dflt:!1,description:["Determines whether the graphs are interactive or not.","If *false*, no interactivity, for export or image generation."].join(" ")},typesetMath:{valType:"boolean",dflt:!0,description:["Determines whether math should be typeset or not,","when MathJax (either v2 or v3) is present on the page."].join(" ")},plotlyServerURL:{valType:"string",dflt:"",description:["When set it determines base URL for","the 'Edit in Chart Studio' `showEditInChartStudio`/`showSendToCloud` mode bar button","and the showLink/sendData on-graph link.","To enable sending your data to Chart Studio Cloud, you need to","set both `plotlyServerURL` to 'https://chart-studio.plotly.com' and","also set `showSendToCloud` to true."].join(" ")},editable:{valType:"boolean",dflt:!1,description:["Determines whether the graph is editable or not.","Sets all pieces of `edits`","unless a separate `edits` config item overrides individual parts."].join(" ")},edits:{annotationPosition:{valType:"boolean",dflt:!1,description:["Determines if the main anchor of the annotation is editable.","The main anchor corresponds to the","text (if no arrow) or the arrow (which drags the whole thing leaving","the arrow length & direction unchanged)."].join(" ")},annotationTail:{valType:"boolean",dflt:!1,description:["Has only an effect for annotations with arrows.","Enables changing the length and direction of the arrow."].join(" ")},annotationText:{valType:"boolean",dflt:!1,description:"Enables editing annotation text."},axisTitleText:{valType:"boolean",dflt:!1,description:"Enables editing axis title text."},colorbarPosition:{valType:"boolean",dflt:!1,description:"Enables moving colorbars."},colorbarTitleText:{valType:"boolean",dflt:!1,description:"Enables editing colorbar title text."},legendPosition:{valType:"boolean",dflt:!1,description:"Enables moving the legend."},legendText:{valType:"boolean",dflt:!1,description:"Enables editing the trace name fields from the legend"},shapePosition:{valType:"boolean",dflt:!1,description:"Enables moving shapes."},titleText:{valType:"boolean",dflt:!1,description:"Enables editing the global layout title."}},editSelection:{valType:"boolean",dflt:!0,description:"Enables moving selections."},autosizable:{valType:"boolean",dflt:!1,description:["Determines whether the graphs are plotted with respect to","layout.autosize:true and infer its container size."].join(" ")},responsive:{valType:"boolean",dflt:!1,description:["Determines whether to change the layout size when window is resized.","In v3, this option will be removed and will always be true."].join(" ")},fillFrame:{valType:"boolean",dflt:!1,description:["When `layout.autosize` is turned on, determines whether the graph","fills the container (the default) or the screen (if set to *true*)."].join(" ")},frameMargins:{valType:"number",dflt:0,min:0,max:.5,description:["When `layout.autosize` is turned on, set the frame margins","in fraction of the graph size."].join(" ")},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox",description:["Determines whether mouse wheel or two-finger scroll zooms is enable.","Turned on by default for gl3d, geo and mapbox subplots","(as these subplot types do not have zoombox via pan),","but turned off by default for cartesian subplots.","Set `scrollZoom` to *false* to disable scrolling for all subplots."].join(" ")},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize",description:["Sets the double click interaction mode.","Has an effect only in cartesian plots.","If *false*, double click is disable.","If *reset*, double click resets the axis ranges to their initial values.","If *autosize*, double click set the axis ranges to their autorange values.","If *reset+autosize*, the odd double clicks resets the axis ranges","to their initial values and even double clicks set the axis ranges","to their autorange values."].join(" ")},doubleClickDelay:{valType:"number",dflt:300,min:0,description:["Sets the delay for registering a double-click in ms.","This is the time interval (in ms) between first mousedown and","2nd mouseup to constitute a double-click.","This setting propagates to all on-subplot double clicks","(except for geo and mapbox) and on-legend double clicks."].join(" ")},showAxisDragHandles:{valType:"boolean",dflt:!0,description:["Set to *false* to omit cartesian axis pan/zoom drag handles."].join(" ")},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0,description:["Set to *false* to omit direct range entry at the pan/zoom drag points,","note that `showAxisDragHandles` must be enabled to have an effect."].join(" ")},showTips:{valType:"boolean",dflt:!0,description:["Determines whether or not tips are shown while interacting","with the resulting graphs."].join(" ")},showLink:{valType:"boolean",dflt:!1,description:["Determines whether a link to Chart Studio Cloud is displayed","at the bottom right corner of resulting graphs.","Use with `sendData` and `linkText`."].join(" ")},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0,description:["Sets the text appearing in the `showLink` link."].join(" ")},sendData:{valType:"boolean",dflt:!0,description:["If *showLink* is true, does it contain data","just link to a Chart Studio Cloud file?"].join(" ")},showSources:{valType:"any",dflt:!1,description:["Adds a source-displaying function to show sources on","the resulting graphs."].join(" ")},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover",description:["Determines the mode bar display mode.","If *true*, the mode bar is always visible.","If *false*, the mode bar is always hidden.","If *hover*, the mode bar is visible while the mouse cursor","is on the graph container."].join(" ")},showSendToCloud:{valType:"boolean",dflt:!1,description:['Should we include a ModeBar button, labeled "Edit in Chart Studio",',"that sends this chart to chart-studio.plotly.com (formerly plot.ly) or another plotly server","as specified by `plotlyServerURL` for editing, export, etc? Prior to version 1.43.0","this button was included by default, now it is opt-in using this flag.","Note that this button can (depending on `plotlyServerURL` being set) send your data","to an external server. However that server does not persist your data",'until you arrive at the Chart Studio and explicitly click "Save".'].join(" ")},showEditInChartStudio:{valType:"boolean",dflt:!1,description:["Same as `showSendToCloud`, but use a pencil icon instead of a floppy-disk.","Note that if both `showSendToCloud` and `showEditInChartStudio` are turned,","only `showEditInChartStudio` will be honored."].join(" ")},modeBarButtonsToRemove:{valType:"any",dflt:[],description:["Remove mode bar buttons by name.","See ./components/modebar/buttons.js for the list of names."].join(" ")},modeBarButtonsToAdd:{valType:"any",dflt:[],description:["Add mode bar button using config objects","See ./components/modebar/buttons.js for list of arguments.","To enable predefined modebar buttons e.g. shape drawing, hover and spikelines,","simply provide their string name(s). This could include:","*v1hovermode*, *hoverclosest*, *hovercompare*, *togglehover*, *togglespikelines*,","*drawline*, *drawopenpath*, *drawclosedpath*, *drawcircle*, *drawrect* and *eraseshape*.","Please note that these predefined buttons will only be shown if they are compatible","with all trace types used in a graph."].join(" ")},modeBarButtons:{valType:"any",dflt:!1,description:["Define fully custom mode bar buttons as nested array,","where the outer arrays represents button groups, and","the inner arrays have buttons config objects or names of default buttons","See ./components/modebar/buttons.js for more info."].join(" ")},toImageButtonOptions:{valType:"any",dflt:{},description:["Statically override options for toImage modebar button","allowed keys are format, filename, width, height, scale","see ../components/modebar/buttons.js"].join(" ")},displaylogo:{valType:"boolean",dflt:!0,description:["Determines whether or not the plotly logo is displayed","on the end of the mode bar."].join(" ")},watermark:{valType:"boolean",dflt:!1,description:"watermark the images with the company's logo"},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4,description:["Set the pixel ratio during WebGL image export.","This config option was formerly named `plot3dPixelRatio`","which is now deprecated."].join(" ")},setBackground:{valType:"any",dflt:"transparent",description:["Set function to add the background color (i.e. `layout.paper_color`)","to a different container.","This function take the graph div as first argument and the current background","color as second argument.","Alternatively, set to string *opaque* to ensure there is white behind it."].join(" ")},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/",description:["Set the URL to topojson used in geo charts.","By default, the topojson files are fetched from cdn.plot.ly.","For example, set this option to:","<path-to-plotly.js>/dist/topojson/","to render geographical feature using the topojson files","that ship with the plotly.js module."].join(" ")},mapboxAccessToken:{valType:"string",dflt:null,description:["Mapbox access token (required to plot mapbox trace types)","If using an Mapbox Atlas server, set this option to ''","so that plotly.js won't attempt to authenticate to the public Mapbox server."].join(" ")},logging:{valType:"integer",min:0,max:2,dflt:1,description:["Turn all console logging on or off (errors will be thrown)","This should ONLY be set via Plotly.setPlotConfig","Available levels:","0: no logs","1: warnings and errors, but not informational messages","2: verbose logs"].join(" ")},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0,description:["Set on-graph logging (notifier) level","This should ONLY be set via Plotly.setPlotConfig","Available levels:","0: no on-graph logs","1: warnings and errors, but not informational messages","2: verbose logs"].join(" ")},queueLength:{valType:"integer",min:0,dflt:0,description:"Sets the length of the undo/redo queue."},globalTransforms:{valType:"any",dflt:[],description:["Set global transform to be applied to all traces with no","specification needed"].join(" ")},locale:{valType:"string",dflt:"en-US",description:["Which localization should we use?","Should be a string like 'en' or 'en-US'."].join(" ")},locales:{valType:"any",dflt:{},description:["Localization definitions","Locales can be provided either here (specific to one chart) or globally","by registering them as modules.","Should be an object of objects {locale: {dictionary: {...}, format: {...}}}","{","  da: {","      dictionary: {'Reset axes': 'Nulstil aksler', ...},","      format: {months: [...], shortMonths: [...]}","  },","  ...","}","All parts are optional. When looking for translation or format fields, we","look first for an exact match in a config locale, then in a registered","module. If those fail, we strip off any regionalization ('en-US' -> 'en')","and try each (config, registry) again. The final fallback for translation","is untranslated (which is US English) and for formats is the base English","(the only consequence being the last fallback date format %x is DD/MM/YYYY","instead of MM/DD/YYYY). Currently `grouping` and `currency` are ignored","for our automatic number formatting, but can be used in custom formats."].join(" ")}},dfltConfig$4={};function crawl$1(e,t){for(var r in e){var n=e[r];n.valType?t[r]=n.dflt:(t[r]||(t[r]={}),crawl$1(n,t[r]))}}crawl$1(configAttributes,dfltConfig$4);var plot_config={configAttributes:configAttributes,dfltConfig:dfltConfig$4},d3$v=d3Exports,isNumeric$t=fastIsnumeric,NOTEDATA=[],notifier$1=function(e,t){if(-1===NOTEDATA.indexOf(e)){NOTEDATA.push(e);var r=1e3;isNumeric$t(t)?r=t:"long"===t&&(r=3e3);var n=d3$v.select("body").selectAll(".plotly-notifier").data([0]);n.enter().append("div").classed("plotly-notifier",!0),n.selectAll(".notifier-note").data(NOTEDATA).enter().append("div").classed("notifier-note",!0).style("opacity",0).each((function(e){var n=d3$v.select(this);n.append("button").classed("notifier-close",!0).html("&times;").on("click",(function(){n.transition().call(i)}));for(var a=n.append("p"),o=e.split(/<br\s*\/?>/g),s=0;s<o.length;s++)s&&a.append("br"),a.append("span").text(o[s]);"stick"===t?n.transition().duration(350).style("opacity",1):n.transition().duration(700).style("opacity",1).transition().delay(r).call(i)}))}function i(e){e.duration(700).style("opacity",0).each("end",(function(e){var t=NOTEDATA.indexOf(e);-1!==t&&NOTEDATA.splice(t,1),d3$v.select(this).remove()}))}},dfltConfig$3=plot_config.dfltConfig,notifier=notifier$1,loggers$1=loggers$2.exports={};loggers$1.log=function(){var e;if(dfltConfig$3.logging>1){var t=["LOG:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if(dfltConfig$3.notifyOnLogging>1){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);notifier(r.join("<br>"),"long")}},loggers$1.warn=function(){var e;if(dfltConfig$3.logging>0){var t=["WARN:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if(dfltConfig$3.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);notifier(r.join("<br>"),"stick")}},loggers$1.error=function(){var e;if(dfltConfig$3.logging>0){var t=["ERROR:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.error.apply(console,t)}if(dfltConfig$3.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);notifier(r.join("<br>"),"stick")}};var registry={},noop$1=function(){},push_unique=function(e,t){if(t instanceof RegExp){for(var r=t.toString(),n=0;n<e.length;n++)if(e[n]instanceof RegExp&&e[n].toString()===r)return e;e.push(t)}else!t&&0!==t||-1!==e.indexOf(t)||e.push(t);return e},matrix$1={},create_1=create;function create(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var clone_1=clone;function clone(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}var copy_1=copy;function copy(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}var identity_1=identity$3;function identity$3(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var transpose_1=transpose;function transpose(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}var invert_1=invert;function invert(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],g=t[11],p=t[12],f=t[13],m=t[14],y=t[15],b=r*s-n*o,v=r*l-i*o,x=r*c-a*o,B=n*l-i*s,I=n*c-a*s,F=i*c-a*l,A=u*f-d*p,C=u*m-h*p,w=u*y-g*p,Q=d*m-h*f,U=d*y-g*f,S=h*y-g*m,E=b*S-v*U+x*Q+B*w-I*C+F*A;return E?(E=1/E,e[0]=(s*S-l*U+c*Q)*E,e[1]=(i*U-n*S-a*Q)*E,e[2]=(f*F-m*I+y*B)*E,e[3]=(h*I-d*F-g*B)*E,e[4]=(l*w-o*S-c*C)*E,e[5]=(r*S-i*w+a*C)*E,e[6]=(m*x-p*F-y*v)*E,e[7]=(u*F-h*x+g*v)*E,e[8]=(o*U-s*w+c*A)*E,e[9]=(n*w-r*U-a*A)*E,e[10]=(p*I-f*x+y*b)*E,e[11]=(d*x-u*I-g*b)*E,e[12]=(s*C-o*Q-l*A)*E,e[13]=(r*Q-n*C+i*A)*E,e[14]=(f*v-p*B-m*b)*E,e[15]=(u*B-d*v+h*b)*E,e):null}var adjoint_1=adjoint;function adjoint(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],g=t[11],p=t[12],f=t[13],m=t[14],y=t[15];return e[0]=s*(h*y-g*m)-d*(l*y-c*m)+f*(l*g-c*h),e[1]=-(n*(h*y-g*m)-d*(i*y-a*m)+f*(i*g-a*h)),e[2]=n*(l*y-c*m)-s*(i*y-a*m)+f*(i*c-a*l),e[3]=-(n*(l*g-c*h)-s*(i*g-a*h)+d*(i*c-a*l)),e[4]=-(o*(h*y-g*m)-u*(l*y-c*m)+p*(l*g-c*h)),e[5]=r*(h*y-g*m)-u*(i*y-a*m)+p*(i*g-a*h),e[6]=-(r*(l*y-c*m)-o*(i*y-a*m)+p*(i*c-a*l)),e[7]=r*(l*g-c*h)-o*(i*g-a*h)+u*(i*c-a*l),e[8]=o*(d*y-g*f)-u*(s*y-c*f)+p*(s*g-c*d),e[9]=-(r*(d*y-g*f)-u*(n*y-a*f)+p*(n*g-a*d)),e[10]=r*(s*y-c*f)-o*(n*y-a*f)+p*(n*c-a*s),e[11]=-(r*(s*g-c*d)-o*(n*g-a*d)+u*(n*c-a*s)),e[12]=-(o*(d*m-h*f)-u*(s*m-l*f)+p*(s*h-l*d)),e[13]=r*(d*m-h*f)-u*(n*m-i*f)+p*(n*h-i*d),e[14]=-(r*(s*m-l*f)-o*(n*m-i*f)+p*(n*l-i*s)),e[15]=r*(s*h-l*d)-o*(n*h-i*d)+u*(n*l-i*s),e}var determinant_1=determinant;function determinant(e){var t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],g=e[12],p=e[13],f=e[14],m=e[15];return(t*o-r*a)*(d*m-h*f)-(t*s-n*a)*(u*m-h*p)+(t*l-i*a)*(u*f-d*p)+(r*s-n*o)*(c*m-h*g)-(r*l-i*o)*(c*f-d*g)+(n*l-i*s)*(c*p-u*g)}var multiply_1=multiply;function multiply(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],g=t[10],p=t[11],f=t[12],m=t[13],y=t[14],b=t[15],v=r[0],x=r[1],B=r[2],I=r[3];return e[0]=v*n+x*s+B*d+I*f,e[1]=v*i+x*l+B*h+I*m,e[2]=v*a+x*c+B*g+I*y,e[3]=v*o+x*u+B*p+I*b,v=r[4],x=r[5],B=r[6],I=r[7],e[4]=v*n+x*s+B*d+I*f,e[5]=v*i+x*l+B*h+I*m,e[6]=v*a+x*c+B*g+I*y,e[7]=v*o+x*u+B*p+I*b,v=r[8],x=r[9],B=r[10],I=r[11],e[8]=v*n+x*s+B*d+I*f,e[9]=v*i+x*l+B*h+I*m,e[10]=v*a+x*c+B*g+I*y,e[11]=v*o+x*u+B*p+I*b,v=r[12],x=r[13],B=r[14],I=r[15],e[12]=v*n+x*s+B*d+I*f,e[13]=v*i+x*l+B*h+I*m,e[14]=v*a+x*c+B*g+I*y,e[15]=v*o+x*u+B*p+I*b,e}var translate_1=translate;function translate(e,t,r){var n,i,a,o,s,l,c,u,d,h,g,p,f=r[0],m=r[1],y=r[2];return t===e?(e[12]=t[0]*f+t[4]*m+t[8]*y+t[12],e[13]=t[1]*f+t[5]*m+t[9]*y+t[13],e[14]=t[2]*f+t[6]*m+t[10]*y+t[14],e[15]=t[3]*f+t[7]*m+t[11]*y+t[15]):(n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],g=t[10],p=t[11],e[0]=n,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=h,e[10]=g,e[11]=p,e[12]=n*f+s*m+d*y+t[12],e[13]=i*f+l*m+h*y+t[13],e[14]=a*f+c*m+g*y+t[14],e[15]=o*f+u*m+p*y+t[15]),e}var scale_1=scale;function scale(e,t,r){var n=r[0],i=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}var rotate_1=rotate$1;function rotate$1(e,t,r,n){var i,a,o,s,l,c,u,d,h,g,p,f,m,y,b,v,x,B,I,F,A,C,w,Q,U=n[0],S=n[1],E=n[2],L=Math.sqrt(U*U+S*S+E*E);return Math.abs(L)<1e-6?null:(U*=L=1/L,S*=L,E*=L,i=Math.sin(r),o=1-(a=Math.cos(r)),s=t[0],l=t[1],c=t[2],u=t[3],d=t[4],h=t[5],g=t[6],p=t[7],f=t[8],m=t[9],y=t[10],b=t[11],v=U*U*o+a,x=S*U*o+E*i,B=E*U*o-S*i,I=U*S*o-E*i,F=S*S*o+a,A=E*S*o+U*i,C=U*E*o+S*i,w=S*E*o-U*i,Q=E*E*o+a,e[0]=s*v+d*x+f*B,e[1]=l*v+h*x+m*B,e[2]=c*v+g*x+y*B,e[3]=u*v+p*x+b*B,e[4]=s*I+d*F+f*A,e[5]=l*I+h*F+m*A,e[6]=c*I+g*F+y*A,e[7]=u*I+p*F+b*A,e[8]=s*C+d*w+f*Q,e[9]=l*C+h*w+m*Q,e[10]=c*C+g*w+y*Q,e[11]=u*C+p*w+b*Q,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}var rotateX_1=rotateX;function rotateX(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+c*n,e[5]=o*i+u*n,e[6]=s*i+d*n,e[7]=l*i+h*n,e[8]=c*i-a*n,e[9]=u*i-o*n,e[10]=d*i-s*n,e[11]=h*i-l*n,e}var rotateY_1=rotateY;function rotateY(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],s=t[2],l=t[3],c=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-c*n,e[1]=o*i-u*n,e[2]=s*i-d*n,e[3]=l*i-h*n,e[8]=a*n+c*i,e[9]=o*n+u*i,e[10]=s*n+d*i,e[11]=l*n+h*i,e}var rotateZ_1=rotateZ;function rotateZ(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+c*n,e[1]=o*i+u*n,e[2]=s*i+d*n,e[3]=l*i+h*n,e[4]=c*i-a*n,e[5]=u*i-o*n,e[6]=d*i-s*n,e[7]=h*i-l*n,e}var fromRotation_1=fromRotation;function fromRotation(e,t,r){var n,i,a,o=r[0],s=r[1],l=r[2],c=Math.sqrt(o*o+s*s+l*l);return Math.abs(c)<1e-6?null:(o*=c=1/c,s*=c,l*=c,n=Math.sin(t),a=1-(i=Math.cos(t)),e[0]=o*o*a+i,e[1]=s*o*a+l*n,e[2]=l*o*a-s*n,e[3]=0,e[4]=o*s*a-l*n,e[5]=s*s*a+i,e[6]=l*s*a+o*n,e[7]=0,e[8]=o*l*a+s*n,e[9]=s*l*a-o*n,e[10]=l*l*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}var fromRotationTranslation_1=fromRotationTranslation;function fromRotationTranslation(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=n+n,l=i+i,c=a+a,u=n*s,d=n*l,h=n*c,g=i*l,p=i*c,f=a*c,m=o*s,y=o*l,b=o*c;return e[0]=1-(g+f),e[1]=d+b,e[2]=h-y,e[3]=0,e[4]=d-b,e[5]=1-(u+f),e[6]=p+m,e[7]=0,e[8]=h+y,e[9]=p-m,e[10]=1-(u+g),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}var fromScaling_1=fromScaling;function fromScaling(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var fromTranslation_1=fromTranslation;function fromTranslation(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}var fromXRotation_1=fromXRotation;function fromXRotation(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var fromYRotation_1=fromYRotation;function fromYRotation(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var fromZRotation_1=fromZRotation;function fromZRotation(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var fromQuat_1=fromQuat;function fromQuat(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r+r,s=n+n,l=i+i,c=r*o,u=n*o,d=n*s,h=i*o,g=i*s,p=i*l,f=a*o,m=a*s,y=a*l;return e[0]=1-d-p,e[1]=u+y,e[2]=h-m,e[3]=0,e[4]=u-y,e[5]=1-c-p,e[6]=g+f,e[7]=0,e[8]=h+m,e[9]=g-f,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var frustum_1=frustum;function frustum(e,t,r,n,i,a,o){var s=1/(r-t),l=1/(i-n),c=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*l,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*l,e[10]=(o+a)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*c,e[15]=0,e}var perspective_1=perspective;function perspective(e,t,r,n,i){var a=1/Math.tan(t/2),o=1/(n-i);return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+n)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*n*o,e[15]=0,e}var perspectiveFromFieldOfView_1=perspectiveFromFieldOfView;function perspectiveFromFieldOfView(e,t,r,n){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),c=2/(i+a);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(o-s)*l*.5,e[9]=(i-a)*c*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}var ortho_1=ortho;function ortho(e,t,r,n,i,a,o){var s=1/(t-r),l=1/(n-i),c=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*l,e[14]=(o+a)*c,e[15]=1,e}var identity$2=identity$3,lookAt_1=lookAt;function lookAt(e,t,r,n){var i,a,o,s,l,c,u,d,h,g,p=t[0],f=t[1],m=t[2],y=n[0],b=n[1],v=n[2],x=r[0],B=r[1],I=r[2];return Math.abs(p-x)<1e-6&&Math.abs(f-B)<1e-6&&Math.abs(m-I)<1e-6?identity$2(e):(u=p-x,d=f-B,h=m-I,i=b*(h*=g=1/Math.sqrt(u*u+d*d+h*h))-v*(d*=g),a=v*(u*=g)-y*h,o=y*d-b*u,(g=Math.sqrt(i*i+a*a+o*o))?(i*=g=1/g,a*=g,o*=g):(i=0,a=0,o=0),s=d*o-h*a,l=h*i-u*o,c=u*a-d*i,(g=Math.sqrt(s*s+l*l+c*c))?(s*=g=1/g,l*=g,c*=g):(s=0,l=0,c=0),e[0]=i,e[1]=s,e[2]=u,e[3]=0,e[4]=a,e[5]=l,e[6]=d,e[7]=0,e[8]=o,e[9]=c,e[10]=h,e[11]=0,e[12]=-(i*p+a*f+o*m),e[13]=-(s*p+l*f+c*m),e[14]=-(u*p+d*f+h*m),e[15]=1,e)}var str_1=str;function str(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}var glMat4={create:create_1,clone:clone_1,copy:copy_1,identity:identity$3,transpose:transpose_1,invert:invert_1,adjoint:adjoint_1,determinant:determinant_1,multiply:multiply_1,translate:translate_1,scale:scale_1,rotate:rotate_1,rotateX:rotateX_1,rotateY:rotateY_1,rotateZ:rotateZ_1,fromRotation:fromRotation_1,fromRotationTranslation:fromRotationTranslation_1,fromScaling:fromScaling_1,fromTranslation:fromTranslation_1,fromXRotation:fromXRotation_1,fromYRotation:fromYRotation_1,fromZRotation:fromZRotation_1,fromQuat:fromQuat_1,frustum:frustum_1,perspective:perspective_1,perspectiveFromFieldOfView:perspectiveFromFieldOfView_1,ortho:ortho_1,lookAt:lookAt_1,str:str_1};!function(e){var t=glMat4;e.init2dArray=function(e,t){for(var r=new Array(e),n=0;n<e;n++)r[n]=new Array(t);return r},e.transposeRagged=function(e){var t,r,n=0,i=e.length;for(t=0;t<i;t++)n=Math.max(n,e[t].length);var a=new Array(n);for(t=0;t<n;t++)for(a[t]=new Array(i),r=0;r<i;r++)a[t][r]=e[r][t];return a},e.dot=function(t,r){if(!t.length||!r.length||t.length!==r.length)return null;var n,i,a=t.length;if(t[0].length)for(n=new Array(a),i=0;i<a;i++)n[i]=e.dot(t[i],r);else if(r[0].length){var o=e.transposeRagged(r);for(n=new Array(o.length),i=0;i<o.length;i++)n[i]=e.dot(t,o[i])}else for(n=0,i=0;i<a;i++)n+=t[i]*r[i];return n},e.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},e.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]},e.rotationXYMatrix=function(t,r,n){return e.dot(e.dot(e.translationMatrix(r,n),e.rotationMatrix(t)),e.translationMatrix(-r,-n))},e.apply3DTransform=function(t){return function(){var r=arguments,n=1===arguments.length?r[0]:[r[0],r[1],r[2]||0];return e.dot(t,[n[0],n[1],n[2],1]).slice(0,3)}},e.apply2DTransform=function(t){return function(){var r=arguments;3===r.length&&(r=r[0]);var n=1===arguments.length?r[0]:[r[0],r[1]];return e.dot(t,[n[0],n[1],1]).slice(0,2)}},e.apply2DTransform2=function(t){var r=e.apply2DTransform(t);return function(e){return r(e.slice(0,2)).concat(r(e.slice(2,4)))}},e.convertCssMatrix=function(e){if(e){var t=e.length;if(16===t)return e;if(6===t)return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},e.inverseTransformMatrix=function(e){var r=[];return t.invert(r,e),[[r[0],r[1],r[2],r[3]],[r[4],r[5],r[6],r[7]],[r[8],r[9],r[10],r[11]],[r[12],r[13],r[14],r[15]]]}}(matrix$1);var d3$u=d3Exports,loggers=loggersExports,matrix=matrix$1,mat4X4=glMat4;function getGraphDiv$1(e){var t;if("string"==typeof e){if(null===(t=document.getElementById(e)))throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}if(null==e)throw new Error("DOM element provided is null or undefined");return e}function isPlotDiv(e){var t=d3$u.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")}function removeElement$1(e){var t=e&&e.parentNode;t&&t.removeChild(e)}function addStyleRule(e,t){addRelatedStyleRule("global",e,t)}function addRelatedStyleRule(e,t,r){var n="plotly.js-style-"+e,i=document.getElementById(n);i||((i=document.createElement("style")).setAttribute("id",n),i.appendChild(document.createTextNode("")),document.head.appendChild(i));var a=i.sheet;a.insertRule?a.insertRule(t+"{"+r+"}",0):a.addRule?a.addRule(t,r,0):loggers.warn("addStyleRule failed")}function deleteRelatedStyleRule(e){var t="plotly.js-style-"+e,r=document.getElementById(t);r&&removeElement$1(r)}function getFullTransformMatrix(e){var t=getElementAndAncestors(e),r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach((function(e){var t=getElementTransformMatrix(e);if(t){var n=matrix.convertCssMatrix(t);r=mat4X4.multiply(r,r,n)}})),r}function getElementTransformMatrix(e){var t=window.getComputedStyle(e,null),r=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");return"none"===r?null:r.replace("matrix","").replace("3d","").slice(1,-1).split(",").map((function(e){return+e}))}function getElementAndAncestors(e){for(var t=[];isTransformableElement(e);)t.push(e),e=e.parentNode;return t}function isTransformableElement(e){return e&&(e instanceof Element||e instanceof HTMLElement)}function equalDomRects(e,t){return e&&t&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}var dom={getGraphDiv:getGraphDiv$1,isPlotDiv:isPlotDiv,removeElement:removeElement$1,addStyleRule:addStyleRule,addRelatedStyleRule:addRelatedStyleRule,deleteRelatedStyleRule:deleteRelatedStyleRule,getFullTransformMatrix:getFullTransformMatrix,getElementTransformMatrix:getElementTransformMatrix,getElementAndAncestors:getElementAndAncestors,equalDomRects:equalDomRects},animation_attributes={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"],description:["Describes how a new animate call interacts with currently-running","animations. If `immediate`, current animations are interrupted and","the new animation is started. If `next`, the current frame is allowed","to complete, after which the new animation is started. If `afterall`","all existing frames are animated to completion before the new animation","is started."].join(" ")},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward",description:["The direction in which to play the frames triggered by the animation call"].join(" ")},fromcurrent:{valType:"boolean",dflt:!1,description:["Play frames starting at the current frame instead of the beginning."].join(" ")},frame:{duration:{valType:"number",min:0,dflt:500,description:["The duration in milliseconds of each frame. If greater than the frame","duration, it will be limited to the frame duration."].join(" ")},redraw:{valType:"boolean",dflt:!0,description:["Redraw the plot at completion of the transition. This is desirable","for transitions that include properties that cannot be transitioned,","but may significantly slow down updates that do not require a full","redraw of the plot"].join(" ")}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none",description:["The duration of the transition, in milliseconds. If equal to zero,","updates are synchronous."].join(" ")},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none",description:"The easing function used for the transition"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none",description:["Determines whether the figure's layout or traces smoothly transitions","during updates that make both traces and layout change."].join(" ")}}},attributes$K={};attributes$K.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style",description:["Sets the dash style of lines. Set to a dash type string","(*solid*, *dot*, *dash*, *longdash*, *dashdot*, or *longdashdot*)","or a dash length list in px (eg *5px,10px,2px,2px*)."].join(" ")},attributes$K.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style",description:["Sets the shape of the pattern fill.","By default, no pattern is used for filling the area."].join(" ")},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style",description:["Determines whether `marker.color` should be used","as a default to `bgcolor` or a `fgcolor`."].join(" ")},bgcolor:{valType:"color",arrayOk:!0,editType:"style",description:["When there is no colorscale sets the color of background pattern fill.","Defaults to a `marker.color` background when `fillmode` is *overlay*.","Otherwise, defaults to a transparent background."].join(" ")},fgcolor:{valType:"color",arrayOk:!0,editType:"style",description:["When there is no colorscale sets the color of foreground pattern fill.","Defaults to a `marker.color` background when `fillmode` is *replace*.","Otherwise, defaults to dark grey or white","to increase contrast with the `bgcolor`."].join(" ")},fgopacity:{valType:"number",editType:"style",min:0,max:1,description:["Sets the opacity of the foreground pattern fill.","Defaults to a 0.5 when `fillmode` is *overlay*.","Otherwise, defaults to 1."].join(" ")},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style",description:["Sets the size of unit squares of the pattern fill in pixels,","which corresponds to the interval of repetition of the pattern."].join(" ")},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style",description:["Sets the solidity of the pattern fill.","Solidity is roughly the fraction of the area filled by the pattern.","Solidity of 0 shows only the background color without pattern","and solidty of 1 shows only the foreground color without pattern."].join(" ")},editType:"style",description:["Sets the pattern within the marker."].join(" ")};var fontAttrs$c=requireFont_attributes(),dash$5=attributes$K.dash,extendFlat$j=extend.extendFlat,attributes$J={newshape:{line:{color:{valType:"color",editType:"none",description:["Sets the line color.","By default uses either dark grey or white","to increase contrast with background color."].join(" ")},width:{valType:"number",min:0,dflt:4,editType:"none",description:"Sets the line width (in px)."},dash:extendFlat$j({},dash$5,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none",description:["Sets the color filling new shapes' interior.","Please note that if using a fillcolor with alpha greater than half,","drag inside the active shape starts moving the shape underneath,","otherwise a new shape could be started over."].join(" ")},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none",description:["Determines the path's interior.","For more info please visit https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none",description:"Sets the opacity of new shapes."},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none",description:"Specifies whether new shapes are drawn below or above traces."},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none",description:["When `dragmode` is set to *drawrect*, *drawline* or *drawcircle*","this limits the drag to be horizontal, vertical or diagonal.","Using *diagonal* there is no limit e.g. in drawing lines in any direction.","*ortho* limits the draw to be either horizontal or vertical.","*horizontal* allows horizontal extend.","*vertical* allows vertical extend."].join(" ")},label:{text:{valType:"string",dflt:"",editType:"none",description:"Sets the text to display with the new shape."},font:fontAttrs$c({editType:"none",description:"Sets the new shape label text font."}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"none",description:["Sets the position of the label text relative to the new shape.","Supported values for rectangles, circles and paths are","*top left*, *top center*, *top right*, *middle left*,","*middle center*, *middle right*, *bottom left*, *bottom center*,","and *bottom right*.","Supported values for lines are *start*, *middle*, and *end*.","Default: *middle center* for rectangles, circles, and paths; *middle* for lines."].join(" ")},textangle:{valType:"angle",dflt:"auto",editType:"none",description:["Sets the angle at which the label text is drawn","with respect to the horizontal. For lines, angle *auto*","is the same angle as the line. For all other shapes,","angle *auto* is horizontal."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"none",description:["Sets the label's horizontal position anchor","This anchor binds the specified `textposition` to the *left*, *center*","or *right* of the label text.","For example, if `textposition` is set to *top right* and","`xanchor` to *right* then the right-most portion of the","label text lines up with the right-most edge of the","new shape."].join(" ")},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"none",description:["Sets the label's vertical position anchor","This anchor binds the specified `textposition` to the *top*, *middle*","or *bottom* of the label text.","For example, if `textposition` is set to *top right* and","`yanchor` to *top* then the top-most portion of the","label text lines up with the top-most edge of the","new shape."].join(" ")},padding:{valType:"number",dflt:3,min:0,editType:"none",description:"Sets padding (in px) between edge of label and edge of new shape."},editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none",description:"Sets the color filling the active shape' interior."},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none",description:"Sets the opacity of the active shape."},editType:"none"}},dash$4=attributes$K.dash,extendFlat$i=extend.extendFlat,attributes$I={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none",description:["Describes how a new selection is created.","If `immediate`, a new selection is created after first mouse up.","If `gradual`, a new selection is not created after first mouse.","By adding to and subtracting from the initial selection,","this option allows declaring extra outlines of the selection."].join(" ")},line:{color:{valType:"color",editType:"none",description:["Sets the line color.","By default uses either dark grey or white","to increase contrast with background color."].join(" ")},width:{valType:"number",min:1,dflt:1,editType:"none",description:"Sets the line width (in px)."},dash:extendFlat$i({},dash$4,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none",description:"Sets the color filling the active selection' interior."},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none",description:"Sets the opacity of the active selection."},editType:"none"}},pad_attributes=function(e){var t=e.editType;return{t:{valType:"number",dflt:0,editType:t,description:"The amount of padding (in px) along the top of the component."},r:{valType:"number",dflt:0,editType:t,description:"The amount of padding (in px) on the right side of the component."},b:{valType:"number",dflt:0,editType:t,description:"The amount of padding (in px) along the bottom of the component."},l:{valType:"number",dflt:0,editType:t,description:"The amount of padding (in px) on the left side of the component."},editType:t}},fontAttrs$b=requireFont_attributes(),animationAttrs$2=animation_attributes,colorAttrs$5=attributes$L,drawNewShapeAttrs=attributes$J,drawNewSelectionAttrs=attributes$I,padAttrs$2=pad_attributes,extendFlat$h=extend.extendFlat,globalFont=fontAttrs$b({editType:"calc",description:["Sets the global font.","Note that fonts used in traces and other","layout components inherit from the global font."].join(" ")});globalFont.family.dflt='"Open Sans", verdana, arial, sans-serif',globalFont.size.dflt=12,globalFont.color.dflt=colorAttrs$5.defaultLine;var layout_attributes$5={font:globalFont,title:{text:{valType:"string",editType:"layoutstyle",description:["Sets the plot's title.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:fontAttrs$b({editType:"layoutstyle",description:["Sets the title font.","Note that the title's font used to be customized","by the now deprecated `titlefont` attribute."].join(" ")}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `x` refers to.","*container* spans the entire `width` of the plot.","*paper* refers to the width of the plotting area only."].join(" ")},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `y` refers to.","*container* spans the entire `height` of the plot.","*paper* refers to the height of the plotting area only."].join(" ")},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle",description:["Sets the x position with respect to `xref` in normalized","coordinates from *0* (left) to *1* (right)."].join(" ")},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle",description:["Sets the y position with respect to `yref` in normalized","coordinates from *0* (bottom) to *1* (top).","*auto* places the baseline of the title onto the","vertical center of the top margin."].join(" ")},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle",description:["Sets the title's horizontal alignment with respect to its x position.","*left* means that the title starts at x,","*right* means that the title ends at x","and *center* means that the title's center is at x.","*auto* divides `xref` by three and calculates the `xanchor`","value automatically based on the value of `x`."].join(" ")},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle",description:["Sets the title's vertical alignment with respect to its y position.","*top* means that the title's cap line is at y,","*bottom* means that the title's baseline is at y","and *middle* means that the title's midline is at y.","*auto* divides `yref` by three and calculates the `yanchor`","value automatically based on the value of `y`."].join(" ")},pad:extendFlat$h(padAttrs$2({editType:"layoutstyle"}),{description:["Sets the padding of the title.","Each padding value only applies when the corresponding","`xanchor`/`yanchor` value is set accordingly. E.g. for left","padding to take effect, `xanchor` must be set to *left*.","The same rule applies if `xanchor`/`yanchor` is determined automatically.","Padding is muted if the respective anchor value is *middle*/*center*."].join(" ")}),automargin:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines whether the title can automatically push the figure margins.","If `yref='paper'` then the margin will expand to ensure that the title doesn’t","overlap with the edges of the container. If `yref='container'` then the margins","will ensure that the title doesn’t overlap with the plot area, tick labels,","and axis titles. If `automargin=true` and the margins need to be expanded,","then y will be set to a default 1 and yanchor will be set to an appropriate","default to ensure that minimal margin space is needed. Note that when `yref='paper'`,","only 1 or 0 are allowed y values. Invalid values will be reset to the default 1."].join(" ")},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot",description:["Determines how the font size for various text","elements are uniformed between each trace type.","If the computed text sizes were smaller than","the minimum size defined by `uniformtext.minsize`","using *hide* option hides the text; and","using *show* option shows the text without further downscaling.","Please note that if the size defined by `minsize` is greater than","the font size defined by trace, then the `minsize` is used."].join(" ")},minsize:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the minimum text size between traces of the same type."].join(" ")},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none",description:["Determines whether or not a layout width or height","that has been left undefined by the user","is initialized on each relayout.","Note that, regardless of this attribute,","an undefined layout width or height","is always initialized on the first call to plot."].join(" ")},width:{valType:"number",min:10,dflt:700,editType:"plot",description:["Sets the plot's width (in px)."].join(" ")},height:{valType:"number",min:10,dflt:450,editType:"plot",description:["Sets the plot's height (in px)."].join(" ")},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot",description:"Minimum width of the plot with margin.automargin applied (in px)"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot",description:"Minimum height of the plot with margin.automargin applied (in px)"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the left margin (in px)."},r:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the right margin (in px)."},t:{valType:"number",min:0,dflt:100,editType:"plot",description:"Sets the top margin (in px)."},b:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the bottom margin (in px)."},pad:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the amount of padding (in px)","between the plotting area and the axis lines"].join(" ")},autoexpand:{valType:"boolean",dflt:!0,editType:"plot",description:["Turns on/off margin expansion computations.","Legends, colorbars, updatemenus, sliders, axis rangeselector and rangeslider","are allowed to push the margins by defaults."].join(" ")},editType:"plot"},computed:{valType:"any",editType:"none",description:["Placeholder for exporting automargin-impacting values namely","`margin.t`, `margin.b`, `margin.l` and `margin.r` in *full-json* mode."].join(" ")},paper_bgcolor:{valType:"color",dflt:colorAttrs$5.background,editType:"plot",description:"Sets the background color of the paper where the graph is drawn."},plot_bgcolor:{valType:"color",dflt:colorAttrs$5.background,editType:"layoutstyle",description:["Sets the background color of the plotting area in-between x and y axes."].join(" ")},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc",description:["Using *strict* a numeric string in trace data is not converted to a number.","Using *convert types* a numeric string in trace data may be","treated as a number during automatic axis `type` detection.","This is the default value; however it could be overridden for individual axes."].join(" ")},separators:{valType:"string",editType:"plot",description:["Sets the decimal and thousand separators.","For example, *. * puts a '.' before decimals and a space","between thousands. In English locales, dflt is *.,* but","other locales may alter this default."].join(" ")},hidesources:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines whether or not a text link citing the data source is","placed at the bottom-right cored of the figure.","Has only an effect only on graphs that have been generated via","forked graphs from the Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise)."].join(" ")},showlegend:{valType:"boolean",editType:"legend",description:["Determines whether or not a legend is drawn.","Default is `true` if there is a trace to show and any of these:","a) Two or more traces would by default be shown in the legend.","b) One pie trace is shown in the legend.","c) One trace is explicitly given with `showlegend: true`."].join(" ")},colorway:{valType:"colorlist",dflt:colorAttrs$5.defaults,editType:"calc",description:"Sets the default trace colors."},datarevision:{valType:"any",editType:"calc",description:["If provided, a changed value tells `Plotly.react` that","one or more data arrays has changed. This way you can modify","arrays in-place rather than making a complete new copy for an","incremental change.","If NOT provided, `Plotly.react` assumes that data arrays are","being treated as immutable, thus any data array with a","different identity from its predecessor contains new data."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Used to allow user interactions with the plot to persist after","`Plotly.react` calls that are unaware of these interactions.","If `uirevision` is omitted, or if it is given and it changed from","the previous `Plotly.react` call, the exact new figure is used.","If `uirevision` is truthy and did NOT change, any attribute","that has been affected by user interactions and did not receive a","different value in the new figure will keep the interaction value.","`layout.uirevision` attribute serves as the default for","`uirevision` attributes in various sub-containers. For finer","control you can set these sub-attributes directly. For example,","if your app separately controls the data on the x and y axes you","might set `xaxis.uirevision=*time*` and `yaxis.uirevision=*cost*`.","Then if only the y data is changed, you can update","`yaxis.uirevision=*quantity*` and the y axis range will reset but","the x axis range will retain any user-driven zoom."].join(" ")},editrevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in `editable: true`","configuration, other than trace names and axis titles.","Defaults to `layout.uirevision`."].join(" ")},selectionrevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in selected points","from all traces."].join(" ")},template:{valType:"any",editType:"calc",description:["Default attributes to be applied to the plot. Templates can be","created from existing plots using `Plotly.makeTemplate`, or","created manually. They should be objects with format:","`{layout: layoutTemplate, data: {[type]: [traceTemplate, ...]}, ...}`","`layoutTemplate` and `traceTemplate` are objects matching the","attribute structure of `layout` and a data trace. ","Trace templates are applied cyclically to traces of each type.","Container arrays (eg `annotations`) have special handling:","An object ending in `defaults` (eg `annotationdefaults`) is applied","to each array item. But if an item has a `templateitemname` key","we look in the template array for an item with matching `name` and","apply that instead. If no matching `name` is found we mark the item","invisible. Any named template item not referenced is appended to","the end of the array, so you can use this for a watermark annotation","or a logo image, for example. To omit one of these items on the plot,","make an item with matching `templateitemname` and `visible: false`."].join(" ")},newshape:drawNewShapeAttrs.newshape,activeshape:drawNewShapeAttrs.activeshape,newselection:drawNewSelectionAttrs.newselection,activeselection:drawNewSelectionAttrs.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot",description:["Assigns extra meta information that can be used in various `text` attributes.","Attributes such as the graph, axis and colorbar `title.text`, annotation `text`","`trace.name` in legend items, `rangeselector`, `updatemenus` and `sliders` `label` text","all support `meta`. One can access `meta` fields using template strings:","`%{meta[i]}` where `i` is the index of the `meta`","item in question.","`meta` can also be an object for example `{key: value}` which can be accessed","%{meta[key]}."].join(" ")},transition:extendFlat$h({},animationAttrs$2.transition,{description:["Sets transition options used during Plotly.react updates."].join(" "),editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle",description:["Value of `title` is no longer a simple *string* but a set of sub-attributes.","To set the contents of the title, please use `title.text` now."].join(" ")},titlefont:fontAttrs$b({editType:"layoutstyle",description:["Former `titlefont` is now the sub-attribute `font` of `title`.","To customize title font properties, please use `title.font` now."].join(" ")})}};!function(e){var t=loggersExports,r=noop$1,n=push_unique,i=is_plain_object,a=dom.addStyleRule,o=extend,s=attributes$M,l=layout_attributes$5,c=o.extendFlat,u=o.extendDeepAll;function d(r){var n=r.name,i=r.categories,o=r.meta;if(e.modules[n])t.log("Type "+n+" already registered");else{e.subplotsRegistry[r.basePlotModule.name]||function(r){var n=r.name;if(e.subplotsRegistry[n])return void t.log("Plot type "+n+" already registered.");for(var i in f(r),e.subplotsRegistry[n]=r,e.componentsRegistry)b(i,r.name)}(r.basePlotModule);for(var s={},l=0;l<i.length;l++)s[i[l]]=!0,e.allCategories[i[l]]=!0;for(var u in e.modules[n]={_module:r,categories:s},o&&Object.keys(o).length&&(e.modules[n].meta=o),e.allTypes.push(n),e.componentsRegistry)m(u,n);r.layoutAttributes&&c(e.traceLayoutAttributes,r.layoutAttributes);var d=r.basePlotModule,h=d.name;if("mapbox"===h){var g=d.constants.styleRules;for(var p in g)a(".js-plotly-plot .plotly .mapboxgl-"+p,g[p])}"geo"!==h&&"mapbox"!==h||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function h(t){if("string"!=typeof t.name)throw new Error("Component module *name* must be a string.");var r=t.name;for(var i in e.componentsRegistry[r]=t,t.layoutAttributes&&(t.layoutAttributes._isLinkedToArray&&n(e.layoutArrayContainers,r),f(t)),e.modules)m(r,i);for(var a in e.subplotsRegistry)b(r,a);for(var o in e.transformsRegistry)y(r,o);t.schema&&t.schema.layout&&u(l,t.schema.layout)}function g(r){if("string"!=typeof r.name)throw new Error("Transform module *name* must be a string.");var n="Transform module "+r.name,a="function"==typeof r.transform,o="function"==typeof r.calcTransform;if(!a&&!o)throw new Error(n+" is missing a *transform* or *calcTransform* method.");for(var s in a&&o&&t.log([n+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),i(r.attributes)||t.log(n+" registered without an *attributes* object."),"function"!=typeof r.supplyDefaults&&t.log(n+" registered without a *supplyDefaults* method."),e.transformsRegistry[r.name]=r,e.componentsRegistry)y(s,r.name)}function p(t){var r=t.name,n=r.split("-")[0],i=t.dictionary,a=t.format,o=i&&Object.keys(i).length,s=a&&Object.keys(a).length,l=e.localeRegistry,c=l[r];if(c||(l[r]=c={}),n!==r){var u=l[n];u||(l[n]=u={}),o&&u.dictionary===c.dictionary&&(u.dictionary=i),s&&u.format===c.format&&(u.format=a)}o&&(c.dictionary=i),s&&(c.format=a)}function f(t){if(t.layoutAttributes){var r=t.layoutAttributes._arrayAttrRegexps;if(r)for(var i=0;i<r.length;i++)n(e.layoutArrayRegexes,r[i])}}function m(t,r){var n=e.componentsRegistry[t].schema;if(n&&n.traces){var i=n.traces[r];i&&u(e.modules[r]._module.attributes,i)}}function y(t,r){var n=e.componentsRegistry[t].schema;if(n&&n.transforms){var i=n.transforms[r];i&&u(e.transformsRegistry[r].attributes,i)}}function b(t,r){var n=e.componentsRegistry[t].schema;if(n&&n.subplots){var i=e.subplotsRegistry[r],a=i.layoutAttributes,o="subplot"===i.attr?i.name:i.attr;Array.isArray(o)&&(o=o[0]);var s=n.subplots[o];a&&s&&u(a,s)}}function v(e){return"object"==typeof e&&(e=e.type),e}e.modules={},e.allCategories={},e.allTypes=[],e.subplotsRegistry={},e.transformsRegistry={},e.componentsRegistry={},e.layoutArrayContainers=[],e.layoutArrayRegexes=[],e.traceLayoutAttributes={},e.localeRegistry={},e.apiMethodRegistry={},e.collectableSubplotTypes=null,e.register=function(t){if(e.collectableSubplotTypes=null,!t)throw new Error("No argument passed to Plotly.register.");t&&!Array.isArray(t)&&(t=[t]);for(var r=0;r<t.length;r++){var n=t[r];if(!n)throw new Error("Invalid module was attempted to be registered!");switch(n.moduleType){case"trace":d(n);break;case"transform":g(n);break;case"component":h(n);break;case"locale":p(n);break;case"apiMethod":var i=n.name;e.apiMethodRegistry[i]=n.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},e.getModule=function(t){var r=e.modules[v(t)];return!!r&&r._module},e.traceIs=function(r,n){if("various"===(r=v(r)))return!1;var i=e.modules[r];return i||(r&&t.log("Unrecognized trace type "+r+"."),i=e.modules[s.type.dflt]),!!i.categories[n]},e.getTransformIndices=function(e,t){for(var r=[],n=e.transforms||[],i=0;i<n.length;i++)n[i].type===t&&r.push(i);return r},e.hasTransform=function(e,t){for(var r=e.transforms||[],n=0;n<r.length;n++)if(r[n].type===t)return!0;return!1},e.getComponentMethod=function(t,n){var i=e.componentsRegistry[t];return i&&i[n]||r},e.call=function(){var t=arguments[0],r=[].slice.call(arguments,1);return e.apiMethodRegistry[t].apply(null,r)}}(registry),function(e){var t,r,n=require$$1.timeFormat,i=fastIsnumeric,a=loggersExports,o=mod_1.mod,s=numerical,l=s.BADNUM,c=s.ONEDAY,u=s.ONEHOUR,d=s.ONEMIN,h=s.ONESEC,g=s.EPOCHJD,p=registry,f=require$$1.utcFormat,m=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,b=(new Date).getFullYear()-70;function v(e){return e&&p.componentsRegistry.calendars&&"string"==typeof e&&"gregorian"!==e}function x(e,t){return String(e+Math.pow(10,t)).substr(1)}e.dateTick0=function(t,r){var n=function(e,t){return v(e)?t?p.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:p.getComponentMethod("calendars","CANONICAL_TICK")[e]:t?"2000-01-02":"2000-01-01"}(t,!!r);if(r<2)return n;var i=e.dateTime2ms(n,t);return i+=c*(r-1),e.ms2DateTime(i,0,t)},e.dfltRange=function(e){return v(e)?p.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]},e.isJSDate=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.getTime},e.dateTime2ms=function(n,i){if(e.isJSDate(n)){var a=n.getTimezoneOffset()*d,s=(n.getUTCMinutes()-n.getMinutes())*d+(n.getUTCSeconds()-n.getSeconds())*h+(n.getUTCMilliseconds()-n.getMilliseconds());if(s){var f=3*d;a=a-f/2+o(s-a+f/2,f)}return(n=Number(n)-a)>=t&&n<=r?n:l}if("string"!=typeof n&&"number"!=typeof n)return l;n=String(n);var x=v(i),B=n.charAt(0);!x||"G"!==B&&"g"!==B||(n=n.substr(1),i="");var I=x&&"chinese"===i.substr(0,7),F=n.match(I?y:m);if(!F)return l;var A=F[1],C=F[3]||"1",w=Number(F[5]||1),Q=Number(F[7]||0),U=Number(F[9]||0),S=Number(F[11]||0);if(x){if(2===A.length)return l;var E;A=Number(A);try{var L=p.getComponentMethod("calendars","getCal")(i);if(I){var _="i"===C.charAt(C.length-1);C=parseInt(C,10),E=L.newDate(A,L.toMonthIndex(A,C,_),w)}else E=L.newDate(A,Number(C),w)}catch(e){return l}return E?(E.toJD()-g)*c+Q*u+U*d+S*h:l}A=2===A.length?(Number(A)+2e3-b)%100+b:Number(A),C-=1;var T=new Date(Date.UTC(2e3,C,w,Q,U));return T.setUTCFullYear(A),T.getUTCMonth()!==C||T.getUTCDate()!==w?l:T.getTime()+S*h},t=e.MIN_MS=e.dateTime2ms("-9999"),r=e.MAX_MS=e.dateTime2ms("9999-12-31 23:59:59.9999"),e.isDateTime=function(t,r){return e.dateTime2ms(t,r)!==l};var B=90*c,I=3*u,F=5*d;function A(e,t,r,n,i){if((t||r||n||i)&&(e+=" "+x(t,2)+":"+x(r,2),(n||i)&&(e+=":"+x(n,2),i))){for(var a=4;i%10==0;)a-=1,i/=10;e+="."+x(i,a)}return e}e.ms2DateTime=function(e,n,i){if("number"!=typeof e||!(e>=t&&e<=r))return l;n||(n=0);var a,s,m,y,b,x,C=Math.floor(10*o(e+.05,1)),w=Math.round(e-C/10);if(v(i)){var Q=Math.floor(w/c)+g,U=Math.floor(o(e,c));try{a=p.getComponentMethod("calendars","getCal")(i).fromJD(Q).formatDate("yyyy-mm-dd")}catch(e){a=f("G%Y-%m-%d")(new Date(w))}if("-"===a.charAt(0))for(;a.length<11;)a="-0"+a.substr(1);else for(;a.length<10;)a="0"+a;s=n<B?Math.floor(U/u):0,m=n<B?Math.floor(U%u/d):0,y=n<I?Math.floor(U%d/h):0,b=n<F?U%h*10+C:0}else x=new Date(w),a=f("%Y-%m-%d")(x),s=n<B?x.getUTCHours():0,m=n<B?x.getUTCMinutes():0,y=n<I?x.getUTCSeconds():0,b=n<F?10*x.getUTCMilliseconds()+C:0;return A(a,s,m,y,b)},e.ms2DateTimeLocal=function(e){if(!(e>=t+c&&e<=r-c))return l;var i=Math.floor(10*o(e+.05,1)),a=new Date(Math.round(e-i/10));return A(n("%Y-%m-%d")(a),a.getHours(),a.getMinutes(),a.getSeconds(),10*a.getUTCMilliseconds()+i)},e.cleanDate=function(t,r,n){if(t===l)return r;if(e.isJSDate(t)||"number"==typeof t&&isFinite(t)){if(v(n))return a.error("JS Dates and milliseconds are incompatible with world calendars",t),r;if(!(t=e.ms2DateTimeLocal(+t))&&void 0!==r)return r}else if(!e.isDateTime(t,n))return a.error("unrecognized date",t),r;return t};var C=/%\d?f/g,w=/%h/g,Q={1:"1",2:"1",3:"2",4:"2"};function U(e,t,r,n){e=e.replace(C,(function(e){var r=Math.min(+e.charAt(1)||6,6);return(t/1e3%1+2).toFixed(r).substr(2).replace(/0+$/,"")||"0"}));var i=new Date(Math.floor(t+.05));if(e=e.replace(w,(function(){return Q[r("%q")(i)]})),v(n))try{e=p.getComponentMethod("calendars","worldCalFmt")(e,t,n)}catch(e){return"Invalid"}return r(e)(i)}var S=[59,59.9,59.99,59.999,59.9999];e.formatDate=function(e,t,r,n,a,s){if(a=v(a)&&a,!t)if("y"===r)t=s.year;else if("m"===r)t=s.month;else{if("d"!==r)return function(e,t){var r=o(e+.05,c),n=x(Math.floor(r/u),2)+":"+x(o(Math.floor(r/d),60),2);if("M"!==t){i(t)||(t=0);var a=(100+Math.min(o(e/h,60),S[t])).toFixed(t).substr(1);t>0&&(a=a.replace(/0+$/,"").replace(/[\.]$/,"")),n+=":"+a}return n}(e,r)+"\n"+U(s.dayMonthYear,e,n,a);t=s.dayMonth+"\n"+s.year}return U(t,e,n,a)};var E=3*c;e.incrementMonth=function(e,t,r){r=v(r)&&r;var n=o(e,c);if(e=Math.round(e-n),r)try{var i=Math.round(e/c)+g,s=p.getComponentMethod("calendars","getCal")(r),l=s.fromJD(i);return t%12?s.add(l,t,"m"):s.add(l,t/12,"y"),(l.toJD()-g)*c+n}catch(t){a.error("invalid ms "+e+" in calendar "+r)}var u=new Date(e+E);return u.setUTCMonth(u.getUTCMonth()+t)+n-E},e.findExactDates=function(e,t){for(var r,n,a=0,o=0,s=0,l=0,u=v(t)&&p.getComponentMethod("calendars","getCal")(t),d=0;d<e.length;d++)if(n=e[d],i(n)){if(!(n%c))if(u)try{1===(r=u.fromJD(n/c+g)).day()?1===r.month()?a++:o++:s++}catch(e){}else 1===(r=new Date(n)).getUTCDate()?0===r.getUTCMonth()?a++:o++:s++}else l++;s+=o+=a;var h=e.length-l;return{exactYears:a/h,exactMonths:o/h,exactDays:s/h}}}(dates);var identity$1,hasRequiredIdentity,search={};function requireIdentity(){return hasRequiredIdentity||(hasRequiredIdentity=1,identity$1=function(e){return e}),identity$1}!function(e){var t=fastIsnumeric,r=loggersExports,n=requireIdentity(),i=numerical.BADNUM,a=1e-9;function o(e,t){return e<t}function s(e,t){return e<=t}function l(e,t){return e>t}function c(e,t){return e>=t}e.findBin=function(e,n,i){if(t(n.start))return i?Math.ceil((e-n.start)/n.size-a)-1:Math.floor((e-n.start)/n.size+a);var u,d,h=0,g=n.length,p=0,f=g>1?(n[g-1]-n[0])/(g-1):1;for(d=f>=0?i?o:s:i?c:l,e+=f*a*(i?-1:1)*(f>=0?1:-1);h<g&&p++<100;)d(n[u=Math.floor((h+g)/2)],e)?h=u+1:g=u;return p>90&&r.log("Long binary search..."),h-1},e.sorterAsc=function(e,t){return e-t},e.sorterDes=function(e,t){return t-e},e.distinctVals=function(t){var r,n=t.slice();for(n.sort(e.sorterAsc),r=n.length-1;r>-1&&n[r]===i;r--);for(var a,o=n[r]-n[0]||1,s=o/(r||1)/1e4,l=[],c=0;c<=r;c++){var u=n[c],d=u-a;void 0===a?(l.push(u),a=u):d>s&&(o=Math.min(o,d),l.push(u),a=u)}return{vals:l,minDiff:o}},e.roundUp=function(e,t,r){for(var n,i=0,a=t.length-1,o=0,s=r?0:1,l=r?1:0,c=r?Math.ceil:Math.floor;i<a&&o++<100;)t[n=c((i+a)/2)]<=e?i=n+s:a=n-l;return t[i]},e.sort=function(e,t){for(var r=0,n=0,i=1;i<e.length;i++){var a=t(e[i],e[i-1]);if(a<0?r=1:a>0&&(n=1),r&&n)return e.sort(t)}return n?e:e.reverse()},e.findIndexOfMin=function(e,t){t=t||n;for(var r,i=1/0,a=0;a<e.length;a++){var o=t(e[a]);o<i&&(i=o,r=a)}return r}}(search);var sort_object_keys=function(e){return Object.keys(e).sort()},stats={};!function(e){var t=fastIsnumeric,r=array.isArrayOrTypedArray;e.aggNums=function(n,i,a,o){var s,l;if((!o||o>a.length)&&(o=a.length),t(i)||(i=!1),r(a[0])){for(l=new Array(o),s=0;s<o;s++)l[s]=e.aggNums(n,i,a[s]);a=l}for(s=0;s<o;s++)t(i)?t(a[s])&&(i=n(+i,+a[s])):i=a[s];return i},e.len=function(t){return e.aggNums((function(e){return e+1}),0,t)},e.mean=function(t,r){return r||(r=e.len(t)),e.aggNums((function(e,t){return e+t}),0,t)/r},e.midRange=function(t){if(void 0!==t&&0!==t.length)return(e.aggNums(Math.max,null,t)+e.aggNums(Math.min,null,t))/2},e.variance=function(r,n,i){return n||(n=e.len(r)),t(i)||(i=e.mean(r,n)),e.aggNums((function(e,t){return e+Math.pow(t-i,2)}),0,r)/n},e.stdev=function(t,r,n){return Math.sqrt(e.variance(t,r,n))},e.median=function(t){var r=t.slice().sort();return e.interp(r,.5)},e.interp=function(e,r){if(!t(r))throw"n should be a finite number";if((r=r*e.length-.5)<0)return e[0];if(r>e.length-1)return e[e.length-1];var n=r%1;return n*e[Math.ceil(r)]+(1-n)*e[Math.floor(r)]}}(stats);var modModule$1=mod_1,mod$1=modModule$1.mod,modHalf=modModule$1.modHalf,PI=Math.PI,twoPI=2*PI;function deg2rad(e){return e/180*PI}function rad2deg(e){return e/PI*180}function isFullCircle(e){return Math.abs(e[1]-e[0])>twoPI-1e-14}function angleDelta(e,t){return modHalf(t-e,twoPI)}function angleDist(e,t){return Math.abs(angleDelta(e,t))}function isAngleInsideSector(e,t){if(isFullCircle(t))return!0;var r,n;t[0]<t[1]?(r=t[0],n=t[1]):(r=t[1],n=t[0]),(r=mod$1(r,twoPI))>(n=mod$1(n,twoPI))&&(n+=twoPI);var i=mod$1(e,twoPI),a=i+twoPI;return i>=r&&i<=n||a>=r&&a<=n}function isPtInsideSector(e,t,r,n){return!!isAngleInsideSector(t,n)&&(r[0]<r[1]?(i=r[0],a=r[1]):(i=r[1],a=r[0]),e>=i&&e<=a);var i,a}function _path(e,t,r,n,i,a,o){i=i||0,a=a||0;var s,l,c,u,d,h=isFullCircle([r,n]);function g(e,t){return[e*Math.cos(t)+i,a-e*Math.sin(t)]}h?(s=0,l=PI,c=twoPI):r<n?(s=r,c=n):(s=n,c=r),e<t?(u=e,d=t):(u=t,d=e);var p,f=Math.abs(c-s)<=PI?0:1;function m(e,t,r){return"A"+[e,e]+" "+[0,f,r]+" "+g(e,t)}return h?p=null===u?"M"+g(d,s)+m(d,l,0)+m(d,c,0)+"Z":"M"+g(u,s)+m(u,l,0)+m(u,c,0)+"ZM"+g(d,s)+m(d,l,1)+m(d,c,1)+"Z":null===u?(p="M"+g(d,s)+m(d,c,0),o&&(p+="L0,0Z")):p="M"+g(u,s)+"L"+g(d,s)+m(d,c,0)+"L"+g(u,c)+m(u,s,1)+"Z",p}function pathArc(e,t,r,n,i){return _path(null,e,t,r,n,i,0)}function pathSector(e,t,r,n,i){return _path(null,e,t,r,n,i,1)}function pathAnnulus(e,t,r,n,i,a){return _path(e,t,r,n,i,a,1)}var locationCache,workingPath,workingTextWidth,angles={deg2rad:deg2rad,rad2deg:rad2deg,angleDelta:angleDelta,angleDist:angleDist,isFullCircle:isFullCircle,isAngleInsideSector:isAngleInsideSector,isPtInsideSector:isPtInsideSector,pathArc:pathArc,pathSector:pathSector,pathAnnulus:pathAnnulus},anchor_utils={isLeftAnchor:function(e){return"left"===e.xanchor||"auto"===e.xanchor&&e.x<=1/3},isCenterAnchor:function(e){return"center"===e.xanchor||"auto"===e.xanchor&&e.x>1/3&&e.x<2/3},isRightAnchor:function(e){return"right"===e.xanchor||"auto"===e.xanchor&&e.x>=2/3},isTopAnchor:function(e){return"top"===e.yanchor||"auto"===e.yanchor&&e.y>=2/3},isMiddleAnchor:function(e){return"middle"===e.yanchor||"auto"===e.yanchor&&e.y>1/3&&e.y<2/3},isBottomAnchor:function(e){return"bottom"===e.yanchor||"auto"===e.yanchor&&e.y<=1/3}},geometry2d={},mod=mod_1.mod;function segmentsIntersect$1(e,t,r,n,i,a,o,s){var l=r-e,c=i-e,u=o-i,d=n-t,h=a-t,g=s-a,p=l*g-u*d;if(0===p)return null;var f=(c*g-u*h)/p,m=(c*d-l*h)/p;return m<0||m>1||f<0||f>1?null:{x:e+l*f,y:t+d*f}}function perpDistance2(e,t,r,n,i){var a=n*e+i*t;if(a<0)return n*n+i*i;if(a>r){var o=n-e,s=i-t;return o*o+s*s}var l=n*t-i*e;return l*l/r}geometry2d.segmentsIntersect=segmentsIntersect$1,geometry2d.segmentDistance=function(e,t,r,n,i,a,o,s){if(segmentsIntersect$1(e,t,r,n,i,a,o,s))return 0;var l=r-e,c=n-t,u=o-i,d=s-a,h=l*l+c*c,g=u*u+d*d,p=Math.min(perpDistance2(l,c,h,i-e,a-t),perpDistance2(l,c,h,o-e,s-t),perpDistance2(u,d,g,e-i,t-a),perpDistance2(u,d,g,r-i,n-a));return Math.sqrt(p)},geometry2d.getTextLocation=function(e,t,r,n){if(e===workingPath&&n===workingTextWidth||(locationCache={},workingPath=e,workingTextWidth=n),locationCache[r])return locationCache[r];var i=e.getPointAtLength(mod(r-n/2,t)),a=e.getPointAtLength(mod(r+n/2,t)),o=Math.atan((a.y-i.y)/(a.x-i.x)),s=e.getPointAtLength(mod(r,t)),l={x:(4*s.x+i.x+a.x)/6,y:(4*s.y+i.y+a.y)/6,theta:o};return locationCache[r]=l,l},geometry2d.clearLocationCache=function(){workingPath=null},geometry2d.getVisibleSegment=function(e,t,r){var n,i,a=t.left,o=t.right,s=t.top,l=t.bottom,c=0,u=e.getTotalLength(),d=u;function h(t){var r=e.getPointAtLength(t);0===t?n=r:t===u&&(i=r);var c=r.x<a?a-r.x:r.x>o?r.x-o:0,d=r.y<s?s-r.y:r.y>l?r.y-l:0;return Math.sqrt(c*c+d*d)}for(var g=h(c);g;){if((c+=g+r)>d)return;g=h(c)}for(g=h(d);g;){if(c>(d-=g+r))return;g=h(d)}return{min:c,max:d,len:d-c,total:u,isClosed:0===c&&d===u&&Math.abs(n.x-i.x)<.1&&Math.abs(n.y-i.y)<.1}},geometry2d.findPointOnPath=function(e,t,r,n){for(var i,a,o,s=(n=n||{}).pathLength||e.getTotalLength(),l=n.tolerance||.001,c=n.iterationLimit||30,u=e.getPointAtLength(0)[r]>e.getPointAtLength(s)[r]?-1:1,d=0,h=0,g=s;d<c;){if(i=(h+g)/2,o=(a=e.getPointAtLength(i))[r]-t,Math.abs(o)<l)return a;u*o>0?g=i:h=i,d++}return a};var throttle$2={};!function(e){var t={};function r(e){e&&null!==e.timer&&(clearTimeout(e.timer),e.timer=null)}e.throttle=function(e,n,i){var a=t[e],o=Date.now();if(!a){for(var s in t)t[s].ts<o-6e4&&delete t[s];a=t[e]={ts:0,timer:null}}function l(){i(),a.ts=Date.now(),a.onDone&&(a.onDone(),a.onDone=null)}r(a),o>a.ts+n?l():a.timer=setTimeout((function(){l(),a.timer=null}),n)},e.done=function(e){var r=t[e];return r&&r.timer?new Promise((function(e){var t=r.onDone;r.onDone=function(){t&&t(),e(),r.onDone=null}})):Promise.resolve()},e.clear=function(n){if(n)r(t[n]),delete t[n];else for(var i in t)e.clear(i)}}(throttle$2);var clear_responsive=function(e){e._responsiveChartHandler&&(window.removeEventListener("resize",e._responsiveChartHandler),delete e._responsiveChartHandler)},isMobileExports={},isMobile$1={get exports(){return isMobileExports},set exports(e){isMobileExports=e}};isMobile$1.exports=isMobile,isMobileExports.isMobile=isMobile,isMobileExports.default=isMobile;const mobileRE=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,notMobileRE=/CrOS/,tabletRE=/android|ipad|playbook|silk/i;function isMobile(e){e||(e={});let t=e.ua;if(t||"undefined"==typeof navigator||(t=navigator.userAgent),t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),"string"!=typeof t)return!1;let r=mobileRE.test(t)&&!notMobileRE.test(t)||!!e.tablet&&tabletRE.test(t);return!r&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")&&(r=!0),r}var isNumeric$s=fastIsnumeric,isMobileOrTablet=isMobileExports,preserve_drawing_buffer=function(e){var t;if("string"!=typeof(t=e&&e.hasOwnProperty("userAgent")?e.userAgent:getUserAgent()))return!0;var r=isMobileOrTablet({ua:{headers:{"user-agent":t}},tablet:!0,featureDetect:!1});if(!r)for(var n=t.split(" "),i=1;i<n.length;i++){if(-1!==n[i].indexOf("Safari"))for(var a=i-1;a>-1;a--){var o=n[a];if("Version/"===o.substr(0,8)){var s=o.substr(8).split(".")[0];if(isNumeric$s(s)&&(s=+s),s>=13)return!0}}}return r};function getUserAgent(){var e;return"undefined"!=typeof navigator&&(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),e}var d3$t=d3Exports,make_trace_groups=function(e,t,r){var n=e.selectAll("g."+r.replace(/\s/g,".")).data(t,(function(e){return e[0].trace.uid}));n.exit().remove(),n.enter().append("g").attr("class",r),n.order();var i=e.classed("rangeplot")?"nodeRangePlot3":"node3";return n.each((function(e){e[0][i]=d3$t.select(this)})),n},Registry$N=registry,localize=function(e,t){for(var r=e._context.locale,n=0;n<2;n++){for(var i=e._context.locales,a=0;a<2;a++){var o=(i[r]||{}).dictionary;if(o){var s=o[t];if(s)return s}i=Registry$N.localeRegistry}var l=r.split("-")[0];if(l===r)break;r=l}return t},filter_unique=function(e){for(var t={},r=[],n=0,i=0;i<e.length;i++){var a=e[i];1!==t[a]&&(t[a]=1,r[n++]=a)}return r},filter_visible=function(e){for(var t=isCalcData(e)?calcDataFilter:baseFilter,r=[],n=0;n<e.length;n++){var i=e[n];t(i)&&r.push(i)}return r};function baseFilter(e){return!0===e.visible}function calcDataFilter(e){var t=e[0].trace;return!0===t.visible&&0!==t._length}function isCalcData(e){return Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace}var increment=function(e,t){if(!t)return e;var r=1/Math.abs(t),n=r>1?(r*e+r*t)/r:e+t,i=String(n).length;if(i>16){var a=String(t).length;if(i>=String(e).length+a){var o=parseFloat(n).toPrecision(12);-1===o.indexOf("e+")&&(n=+o)}}return n},isNumeric$r=fastIsnumeric,BADNUM$a=numerical.BADNUM,JUNK=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g,clean_number=function(e){return"string"==typeof e&&(e=e.replace(JUNK,"")),isNumeric$r(e)?Number(e):BADNUM$a},d3$s=d3Exports,utcFormat$1=require$$1.utcFormat,d3Format=require$$2.format,isNumeric$q=fastIsnumeric,numConstants$4=numerical,MAX_SAFE=numConstants$4.FP_SAFE,MIN_SAFE=-MAX_SAFE,BADNUM$9=numConstants$4.BADNUM,lib=lib$1.exports={};lib.adjustFormat=function(e){return!e||/^\d[.]\df/.test(e)||/[.]\d%/.test(e)?e:"0.f"===e?"~f":/^\d%/.test(e)?"~%":/^\ds/.test(e)?"~s":!/^[~,.0$]/.test(e)&&/[&fps]/.test(e)?"~"+e:e};var seenBadFormats={};lib.warnBadFormat=function(e){var t=String(e);seenBadFormats[t]||(seenBadFormats[t]=1,lib.warn('encountered bad format: "'+t+'"'))},lib.noFormat=function(e){return String(e)},lib.numberFormat=function(e){var t;try{t=d3Format(lib.adjustFormat(e))}catch(t){return lib.warnBadFormat(e),lib.noFormat}return t},lib.nestedProperty=nested_property,lib.keyedContainer=keyed_container,lib.relativeAttr=relative_attr,lib.isPlainObject=is_plain_object,lib.toLogRange=to_log_range,lib.relinkPrivateKeys=relink_private;var arrayModule=array;lib.isTypedArray=arrayModule.isTypedArray,lib.isArrayOrTypedArray=arrayModule.isArrayOrTypedArray,lib.isArray1D=arrayModule.isArray1D,lib.ensureArray=arrayModule.ensureArray,lib.concat=arrayModule.concat,lib.maxRowLength=arrayModule.maxRowLength,lib.minRowLength=arrayModule.minRowLength;var modModule=mod_1;lib.mod=modModule.mod,lib.modHalf=modModule.modHalf;var coerceModule=coerce;lib.valObjectMeta=coerceModule.valObjectMeta,lib.coerce=coerceModule.coerce,lib.coerce2=coerceModule.coerce2,lib.coerceFont=coerceModule.coerceFont,lib.coercePattern=coerceModule.coercePattern,lib.coerceHoverinfo=coerceModule.coerceHoverinfo,lib.coerceSelectionMarkerOpacity=coerceModule.coerceSelectionMarkerOpacity,lib.validate=coerceModule.validate;var datesModule=dates;lib.dateTime2ms=datesModule.dateTime2ms,lib.isDateTime=datesModule.isDateTime,lib.ms2DateTime=datesModule.ms2DateTime,lib.ms2DateTimeLocal=datesModule.ms2DateTimeLocal,lib.cleanDate=datesModule.cleanDate,lib.isJSDate=datesModule.isJSDate,lib.formatDate=datesModule.formatDate,lib.incrementMonth=datesModule.incrementMonth,lib.dateTick0=datesModule.dateTick0,lib.dfltRange=datesModule.dfltRange,lib.findExactDates=datesModule.findExactDates,lib.MIN_MS=datesModule.MIN_MS,lib.MAX_MS=datesModule.MAX_MS;var searchModule=search;lib.findBin=searchModule.findBin,lib.sorterAsc=searchModule.sorterAsc,lib.sorterDes=searchModule.sorterDes,lib.distinctVals=searchModule.distinctVals,lib.roundUp=searchModule.roundUp,lib.sort=searchModule.sort,lib.findIndexOfMin=searchModule.findIndexOfMin,lib.sortObjectKeys=sort_object_keys;var statsModule=stats;lib.aggNums=statsModule.aggNums,lib.len=statsModule.len,lib.mean=statsModule.mean,lib.median=statsModule.median,lib.midRange=statsModule.midRange,lib.variance=statsModule.variance,lib.stdev=statsModule.stdev,lib.interp=statsModule.interp;var matrixModule=matrix$1;lib.init2dArray=matrixModule.init2dArray,lib.transposeRagged=matrixModule.transposeRagged,lib.dot=matrixModule.dot,lib.translationMatrix=matrixModule.translationMatrix,lib.rotationMatrix=matrixModule.rotationMatrix,lib.rotationXYMatrix=matrixModule.rotationXYMatrix,lib.apply3DTransform=matrixModule.apply3DTransform,lib.apply2DTransform=matrixModule.apply2DTransform,lib.apply2DTransform2=matrixModule.apply2DTransform2,lib.convertCssMatrix=matrixModule.convertCssMatrix,lib.inverseTransformMatrix=matrixModule.inverseTransformMatrix;var anglesModule=angles;lib.deg2rad=anglesModule.deg2rad,lib.rad2deg=anglesModule.rad2deg,lib.angleDelta=anglesModule.angleDelta,lib.angleDist=anglesModule.angleDist,lib.isFullCircle=anglesModule.isFullCircle,lib.isAngleInsideSector=anglesModule.isAngleInsideSector,lib.isPtInsideSector=anglesModule.isPtInsideSector,lib.pathArc=anglesModule.pathArc,lib.pathSector=anglesModule.pathSector,lib.pathAnnulus=anglesModule.pathAnnulus;var anchorUtils=anchor_utils;lib.isLeftAnchor=anchorUtils.isLeftAnchor,lib.isCenterAnchor=anchorUtils.isCenterAnchor,lib.isRightAnchor=anchorUtils.isRightAnchor,lib.isTopAnchor=anchorUtils.isTopAnchor,lib.isMiddleAnchor=anchorUtils.isMiddleAnchor,lib.isBottomAnchor=anchorUtils.isBottomAnchor;var geom2dModule=geometry2d;lib.segmentsIntersect=geom2dModule.segmentsIntersect,lib.segmentDistance=geom2dModule.segmentDistance,lib.getTextLocation=geom2dModule.getTextLocation,lib.clearLocationCache=geom2dModule.clearLocationCache,lib.getVisibleSegment=geom2dModule.getVisibleSegment,lib.findPointOnPath=geom2dModule.findPointOnPath;var extendModule=extend;lib.extendFlat=extendModule.extendFlat,lib.extendDeep=extendModule.extendDeep,lib.extendDeepAll=extendModule.extendDeepAll,lib.extendDeepNoArrays=extendModule.extendDeepNoArrays;var loggersModule=loggersExports;lib.log=loggersModule.log,lib.warn=loggersModule.warn,lib.error=loggersModule.error;var regexModule=regex;lib.counterRegex=regexModule.counter;var throttleModule=throttle$2;lib.throttle=throttleModule.throttle,lib.throttleDone=throttleModule.done,lib.clearThrottle=throttleModule.clear;var domModule=dom;function makePtIndex2PtNumber(e){var t={};for(var r in e)for(var n=e[r],i=0;i<n.length;i++)t[n[i]]=+r;return t}lib.getGraphDiv=domModule.getGraphDiv,lib.isPlotDiv=domModule.isPlotDiv,lib.removeElement=domModule.removeElement,lib.addStyleRule=domModule.addStyleRule,lib.addRelatedStyleRule=domModule.addRelatedStyleRule,lib.deleteRelatedStyleRule=domModule.deleteRelatedStyleRule,lib.getFullTransformMatrix=domModule.getFullTransformMatrix,lib.getElementTransformMatrix=domModule.getElementTransformMatrix,lib.getElementAndAncestors=domModule.getElementAndAncestors,lib.equalDomRects=domModule.equalDomRects,lib.clearResponsive=clear_responsive,lib.preserveDrawingBuffer=preserve_drawing_buffer,lib.makeTraceGroups=make_trace_groups,lib._=localize,lib.notifier=notifier$1,lib.filterUnique=filter_unique,lib.filterVisible=filter_visible,lib.pushUnique=push_unique,lib.increment=increment,lib.cleanNumber=clean_number,lib.ensureNumber=function(e){return isNumeric$q(e)?(e=Number(e))>MAX_SAFE||e<MIN_SAFE?BADNUM$9:e:BADNUM$9},lib.isIndex=function(e,t){return!(void 0!==t&&e>=t)&&(isNumeric$q(e)&&e>=0&&e%1==0)},lib.noop=noop$1,lib.identity=requireIdentity(),lib.repeat=function(e,t){for(var r=new Array(t),n=0;n<t;n++)r[n]=e;return r},lib.swapAttrs=function(e,t,r,n){r||(r="x"),n||(n="y");for(var i=0;i<t.length;i++){var a=t[i],o=lib.nestedProperty(e,a.replace("?",r)),s=lib.nestedProperty(e,a.replace("?",n)),l=o.get();o.set(s.get()),s.set(l)}},lib.raiseToTop=function(e){e.parentNode.appendChild(e)},lib.cancelTransition=function(e){return e.transition().duration(0)},lib.constrain=function(e,t,r){return t>r?Math.max(r,Math.min(t,e)):Math.max(t,Math.min(r,e))},lib.bBoxIntersect=function(e,t,r){return r=r||0,e.left<=t.right+r&&t.left<=e.right+r&&e.top<=t.bottom+r&&t.top<=e.bottom+r},lib.simpleMap=function(e,t,r,n,i){for(var a=e.length,o=new Array(a),s=0;s<a;s++)o[s]=t(e[s],r,n,i);return o},lib.randstr=function e(t,r,n,i){if(n||(n=16),void 0===r&&(r=24),r<=0)return"0";var a,o,s=Math.log(Math.pow(2,r))/Math.log(n),l="";for(a=2;s===1/0;a*=2)s=Math.log(Math.pow(2,r/a))/Math.log(n)*a;var c=s-Math.floor(s);for(a=0;a<Math.floor(s);a++)l=Math.floor(Math.random()*n).toString(n)+l;c&&(o=Math.pow(n,c),l=Math.floor(Math.random()*o).toString(n)+l);var u=parseInt(l,n);return t&&t[l]||u!==1/0&&u>=Math.pow(2,r)?i>10?(lib.warn("randstr failed uniqueness"),l):e(t,r,n,(i||0)+1):l},lib.OptionControl=function(e,t){e||(e={}),t||(t="opt");var r={optionList:[],_newoption:function(n){n[t]=e,r[n.name]=n,r.optionList.push(n)}};return r["_"+t]=e,r},lib.smooth=function(e,t){if((t=Math.round(t)||0)<2)return e;var r,n,i,a,o=e.length,s=2*o,l=2*t-1,c=new Array(l),u=new Array(o);for(r=0;r<l;r++)c[r]=(1-Math.cos(Math.PI*(r+1)/t))/(2*t);for(r=0;r<o;r++){for(a=0,n=0;n<l;n++)(i=r+n+1-t)<-o?i-=s*Math.round(i/s):i>=s&&(i-=s*Math.floor(i/s)),i<0?i=-1-i:i>=o&&(i=s-1-i),a+=e[i]*c[n];u[r]=a}return u},lib.syncOrAsync=function(e,t,r){var n;function i(){return lib.syncOrAsync(e,t,r)}for(;e.length;)if((n=(0,e.splice(0,1)[0])(t))&&n.then)return n.then(i);return r&&r(t)},lib.stripTrailingSlash=function(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e},lib.noneOrAll=function(e,t,r){if(e){var n,i=!1,a=!0;for(n=0;n<r.length;n++)null!=e[r[n]]?i=!0:a=!1;if(i&&!a)for(n=0;n<r.length;n++)e[r[n]]=t[r[n]]}},lib.mergeArray=function(e,t,r,n){var i="function"==typeof n;if(lib.isArrayOrTypedArray(e))for(var a=Math.min(e.length,t.length),o=0;o<a;o++){var s=e[o];t[o][r]=i?n(s):s}},lib.mergeArrayCastPositive=function(e,t,r){return lib.mergeArray(e,t,r,(function(e){var t=+e;return isFinite(t)&&t>0?t:0}))},lib.fillArray=function(e,t,r,n){if(n=n||lib.identity,lib.isArrayOrTypedArray(e))for(var i=0;i<t.length;i++)t[i][r]=n(e[i])},lib.castOption=function(e,t,r,n){n=n||lib.identity;var i=lib.nestedProperty(e,r).get();return lib.isArrayOrTypedArray(i)?Array.isArray(t)&&lib.isArrayOrTypedArray(i[t[0]])?n(i[t[0]][t[1]]):n(i[t]):i},lib.extractOption=function(e,t,r,n){if(r in e)return e[r];var i=lib.nestedProperty(t,n).get();return Array.isArray(i)?void 0:i},lib.tagSelected=function(e,t,r){var n,i=t.selectedpoints,a=t._indexToPoints;function o(t){return void 0!==t&&t<e.length}a&&(n=makePtIndex2PtNumber(a));for(var s=0;s<i.length;s++){var l=i[s];if(lib.isIndex(l)||lib.isArrayOrTypedArray(l)&&lib.isIndex(l[0])&&lib.isIndex(l[1])){var c=n?n[l]:l,u=r?r[c]:c;o(u)&&(e[u].selected=1)}}},lib.selIndices2selPoints=function(e){var t=e.selectedpoints,r=e._indexToPoints;if(r){for(var n=makePtIndex2PtNumber(r),i=[],a=0;a<t.length;a++){var o=t[a];if(lib.isIndex(o)){var s=n[o];lib.isIndex(s)&&i.push(s)}}return i}return t},lib.getTargetArray=function(e,t){var r=t.target;if("string"==typeof r&&r){var n=lib.nestedProperty(e,r).get();return!!Array.isArray(n)&&n}return!!Array.isArray(r)&&r},lib.minExtend=function(e,t){var r={};"object"!=typeof t&&(t={});var n,i,a,o=Object.keys(e);for(n=0;n<o.length;n++)a=e[i=o[n]],"_"!==i.charAt(0)&&"function"!=typeof a&&("module"===i?r[i]=a:Array.isArray(a)?r[i]="colorscale"===i?a.slice():a.slice(0,3):lib.isTypedArray(a)?r[i]=a.subarray(0,3):r[i]=a&&"object"==typeof a?lib.minExtend(e[i],t[i]):a);for(o=Object.keys(t),n=0;n<o.length;n++)"object"==typeof(a=t[i=o[n]])&&i in r&&"object"==typeof r[i]||(r[i]=a);return r},lib.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},lib.containsAny=function(e,t){for(var r=0;r<t.length;r++)if(-1!==e.indexOf(t[r]))return!0;return!1},lib.isIE=function(){return void 0!==window.navigator.msSaveBlob};var IS_SAFARI_REGEX=/Version\/[\d\.]+.*Safari/;lib.isSafari=function(){return IS_SAFARI_REGEX.test(window.navigator.userAgent)};var IS_IOS_REGEX=/iPad|iPhone|iPod/;lib.isIOS=function(){return IS_IOS_REGEX.test(window.navigator.userAgent)};var FIREFOX_VERSION_REGEX=/Firefox\/(\d+)\.\d+/;lib.getFirefoxVersion=function(){var e=FIREFOX_VERSION_REGEX.exec(window.navigator.userAgent);if(e&&2===e.length){var t=parseInt(e[1]);if(!isNaN(t))return t}return null},lib.isD3Selection=function(e){return e instanceof d3$s.selection},lib.ensureSingle=function(e,t,r,n){var i=e.select(t+(r?"."+r:""));if(i.size())return i;var a=e.append(t);return r&&a.classed(r,!0),n&&a.call(n),a},lib.ensureSingleById=function(e,t,r,n){var i=e.select(t+"#"+r);if(i.size())return i;var a=e.append(t).attr("id",r);return n&&a.call(n),a},lib.objectFromPath=function(e,t){for(var r,n=e.split("."),i=r={},a=0;a<n.length;a++){var o=n[a],s=null,l=n[a].match(/(.*)\[([0-9]+)\]/);l?(o=l[1],s=l[2],r=r[o]=[],a===n.length-1?r[s]=t:r[s]={},r=r[s]):(a===n.length-1?r[o]=t:r[o]={},r=r[o])}return i};var dottedPropertyRegex=/^([^\[\.]+)\.(.+)?/,indexedPropertyRegex=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;lib.expandObjectPaths=function(e){var t,r,n,i,a,o,s;if("object"==typeof e&&!Array.isArray(e))for(r in e)e.hasOwnProperty(r)&&((t=r.match(dottedPropertyRegex))?(i=e[r],n=t[1],delete e[r],e[n]=lib.extendDeepNoArrays(e[n]||{},lib.objectFromPath(r,lib.expandObjectPaths(i))[n])):(t=r.match(indexedPropertyRegex))?(i=e[r],n=t[1],a=parseInt(t[2]),delete e[r],e[n]=e[n]||[],"."===t[3]?(s=t[4],o=e[n][a]=e[n][a]||{},lib.extendDeepNoArrays(o,lib.objectFromPath(s,lib.expandObjectPaths(i)))):e[n][a]=lib.expandObjectPaths(i)):e[r]=lib.expandObjectPaths(e[r]));return e},lib.numSeparate=function(e,t,r){if(r||(r=!1),"string"!=typeof t||0===t.length)throw new Error("Separator string required for formatting!");"number"==typeof e&&(e=String(e));var n=/(\d+)(\d{3})/,i=t.charAt(0),a=t.charAt(1),o=e.split("."),s=o[0],l=o.length>1?i+o[1]:"";if(a&&(o.length>1||s.length>4||r))for(;n.test(s);)s=s.replace(n,"$1"+a+"$2");return s+l},lib.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var SIMPLE_PROPERTY_REGEX=/^\w*$/;lib.templateString=function(e,t){var r={};return e.replace(lib.TEMPLATE_STRING_REGEX,(function(e,n){var i;return SIMPLE_PROPERTY_REGEX.test(n)?i=t[n]:(r[n]=r[n]||lib.nestedProperty(t,n).get,i=r[n]()),lib.isValidTextValue(i)?i:""}))};var hovertemplateWarnings={max:10,count:0,name:"hovertemplate"};lib.hovertemplateString=function(){return templateFormatString.apply(hovertemplateWarnings,arguments)};var texttemplateWarnings={max:10,count:0,name:"texttemplate"};lib.texttemplateString=function(){return templateFormatString.apply(texttemplateWarnings,arguments)};var TEMPLATE_STRING_FORMAT_SEPARATOR=/^[:|\|]/;function templateFormatString(e,t,r){var n=this,i=arguments;t||(t={});var a={};return e.replace(lib.TEMPLATE_STRING_REGEX,(function(e,o,s){var l,c,u,d="_xother"===o||"_yother"===o,h="_xother_"===o||"_yother_"===o,g="xother_"===o||"yother_"===o,p="xother"===o||"yother"===o||d||g||h,f=o;if((d||h)&&(f=f.substring(1)),(g||h)&&(f=f.substring(0,f.length-1)),p){if(void 0===(l=t[f]))return""}else for(u=3;u<i.length;u++)if(c=i[u]){if(c.hasOwnProperty(f)){l=c[f];break}if(SIMPLE_PROPERTY_REGEX.test(f)||(l=lib.nestedProperty(c,f).get(),(l=a[f]||lib.nestedProperty(c,f).get())&&(a[f]=l)),void 0!==l)break}if(void 0===l&&n)return n.count<n.max&&(lib.warn("Variable '"+f+"' in "+n.name+" could not be found!"),l=e),n.count===n.max&&lib.warn("Too many "+n.name+" warnings - additional warnings will be suppressed"),n.count++,e;if(s){var m;if(":"===s[0]&&(l=(m=r?r.numberFormat:lib.numberFormat)(s.replace(TEMPLATE_STRING_FORMAT_SEPARATOR,""))(l)),"|"===s[0]){m=r?r.timeFormat:utcFormat$1;var y=lib.dateTime2ms(l);l=lib.formatDate(y,s.replace(TEMPLATE_STRING_FORMAT_SEPARATOR,""),!1,m)}}else{var b=f+"Label";t.hasOwnProperty(b)&&(l=t[b])}return p&&(l="("+l+")",(d||h)&&(l=" "+l),(g||h)&&(l+=" ")),l}))}var char0=48,char9=57;lib.subplotSort=function(e,t){for(var r=Math.min(e.length,t.length)+1,n=0,i=0,a=0;a<r;a++){var o=e.charCodeAt(a)||0,s=t.charCodeAt(a)||0,l=o>=char0&&o<=char9,c=s>=char0&&s<=char9;if(l&&(n=10*n+o-char0),c&&(i=10*i+s-char0),!l||!c){if(n!==i)return n-i;if(o!==s)return o-s}}return i-n};var randSeed=2e9;lib.seedPseudoRandom=function(){randSeed=2e9},lib.pseudoRandom=function(){var e=randSeed;return randSeed=(69069*randSeed+1)%4294967296,Math.abs(randSeed-e)<429496729?lib.pseudoRandom():randSeed/4294967296},lib.fillText=function(e,t,r){var n=Array.isArray(r)?function(e){r.push(e)}:function(e){r.text=e},i=lib.extractOption(e,t,"htx","hovertext");if(lib.isValidTextValue(i))return n(i);var a=lib.extractOption(e,t,"tx","text");return lib.isValidTextValue(a)?n(a):void 0},lib.isValidTextValue=function(e){return e||0===e},lib.formatPercent=function(e,t){t=t||0;for(var r=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%",n=0;n<t;n++)-1!==r.indexOf(".")&&(r=(r=r.replace("0%","%")).replace(".%","%"));return r},lib.isHidden=function(e){var t=window.getComputedStyle(e).display;return!t||"none"===t},lib.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""},lib.strRotate=function(e){return e?"rotate("+e+")":""},lib.strScale=function(e){return 1!==e?"scale("+e+")":""},lib.getTextTransform=function(e){var t=e.noCenter,r=e.textX,n=e.textY,i=e.targetX,a=e.targetY,o=e.anchorX||0,s=e.anchorY||0,l=e.rotate,c=e.scale;return c?c>1&&(c=1):c=0,lib.strTranslate(i-c*(r+o),a-c*(n+s))+lib.strScale(c)+(l?"rotate("+l+(t?"":" "+r+" "+n)+")":"")},lib.setTransormAndDisplay=function(e,t){e.attr("transform",lib.getTextTransform(t)),e.style("display",t.scale?null:"none")},lib.ensureUniformFontSize=function(e,t){var r=lib.extendFlat({},t);return r.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0),r},lib.join2=function(e,t,r){var n=e.length;return n>1?e.slice(0,-1).join(t)+r+e[n-1]:e.join(t)},lib.bigFont=function(e){return Math.round(1.2*e)};var firefoxVersion=lib.getFirefoxVersion(),isProblematicFirefox=null!==firefoxVersion&&firefoxVersion<86;lib.getPositionFromD3Event=function(){return isProblematicFirefox?[d3$s.event.layerX,d3$s.event.layerY]:[d3$s.event.offsetX,d3$s.event.offsetY]};var Lib$1I=libExports,rules={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var selector in rules){var fullSelector=selector.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");Lib$1I.addStyleRule(fullSelector,rules[selector])}var hasHover$1,ReflectOwnKeys,plot_api$1={},plot_api={},server=!1,isBrowser=server,hasHover_1=hasHover$1="function"==typeof commonjsGlobal.matchMedia?!commonjsGlobal.matchMedia("(hover: none)").matches:isBrowser,eventsExports={},events$1={get exports(){return eventsExports},set exports(e){eventsExports=e}},R="object"==typeof Reflect?Reflect:null,ReflectApply=R&&"function"==typeof R.apply?R.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};function ProcessEmitWarning(e){console&&console.warn&&console.warn(e)}ReflectOwnKeys=R&&"function"==typeof R.ownKeys?R.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var NumberIsNaN=Number.isNaN||function(e){return e!=e};function EventEmitter$3(){EventEmitter$3.init.call(this)}events$1.exports=EventEmitter$3,eventsExports.once=once,EventEmitter$3.EventEmitter=EventEmitter$3,EventEmitter$3.prototype._events=void 0,EventEmitter$3.prototype._eventsCount=0,EventEmitter$3.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function _getMaxListeners(e){return void 0===e._maxListeners?EventEmitter$3.defaultMaxListeners:e._maxListeners}function _addListener(e,t,r,n){var i,a,o;if(checkListener(r),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),o=a[t]),void 0===o)o=a[t]=r,++e._eventsCount;else if("function"==typeof o?o=a[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(i=_getMaxListeners(e))>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=o.length,ProcessEmitWarning(s)}return e}function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=onceWrapper.bind(n);return i.listener=r,n.wrapFn=i,i}function _listeners(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?unwrapListeners(i):arrayClone(i,i.length)}function listenerCount(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function arrayClone(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function spliceOne(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function unwrapListeners(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function once(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,a),n(r)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}eventTargetAgnosticAddListener(e,t,a,{once:!0}),"error"!==t&&addErrorHandlerIfEventEmitter(e,i,{once:!0})}))}function addErrorHandlerIfEventEmitter(e,t,r){"function"==typeof e.on&&eventTargetAgnosticAddListener(e,"error",t,r)}function eventTargetAgnosticAddListener(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(a){n.once&&e.removeEventListener(t,i),r(a)}))}}Object.defineProperty(EventEmitter$3,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(e){if("number"!=typeof e||e<0||NumberIsNaN(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");defaultMaxListeners=e}}),EventEmitter$3.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter$3.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},EventEmitter$3.prototype.getMaxListeners=function(){return _getMaxListeners(this)},EventEmitter$3.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)ReflectApply(s,this,t);else{var l=s.length,c=arrayClone(s,l);for(r=0;r<l;++r)ReflectApply(c[r],this,t)}return!0},EventEmitter$3.prototype.addListener=function(e,t){return _addListener(this,e,t,!1)},EventEmitter$3.prototype.on=EventEmitter$3.prototype.addListener,EventEmitter$3.prototype.prependListener=function(e,t){return _addListener(this,e,t,!0)},EventEmitter$3.prototype.once=function(e,t){return checkListener(t),this.on(e,_onceWrap(this,e,t)),this},EventEmitter$3.prototype.prependOnceListener=function(e,t){return checkListener(t),this.prependListener(e,_onceWrap(this,e,t)),this},EventEmitter$3.prototype.removeListener=function(e,t){var r,n,i,a,o;if(checkListener(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,a=r.length-1;a>=0;a--)if(r[a]===t||r[a].listener===t){o=r[a].listener,i=a;break}if(i<0)return this;0===i?r.shift():spliceOne(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},EventEmitter$3.prototype.off=EventEmitter$3.prototype.removeListener,EventEmitter$3.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,a=Object.keys(r);for(n=0;n<a.length;++n)"removeListener"!==(i=a[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},EventEmitter$3.prototype.listeners=function(e){return _listeners(this,e,!0)},EventEmitter$3.prototype.rawListeners=function(e){return _listeners(this,e,!1)},EventEmitter$3.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):listenerCount.call(e,t)},EventEmitter$3.prototype.listenerCount=listenerCount,EventEmitter$3.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};var EventEmitter$2=eventsExports.EventEmitter,Events$3={init:function(e){if(e._ev instanceof EventEmitter$2)return e;var t=new EventEmitter$2,r=new EventEmitter$2;return e._ev=t,e._internalEv=r,e.on=t.on.bind(t),e.once=t.once.bind(t),e.removeListener=t.removeListener.bind(t),e.removeAllListeners=t.removeAllListeners.bind(t),e._internalOn=r.on.bind(r),e._internalOnce=r.once.bind(r),e._removeInternalListener=r.removeListener.bind(r),e._removeAllInternalListeners=r.removeAllListeners.bind(r),e.emit=function(n,i){"undefined"!=typeof jQuery&&jQuery(e).trigger(n,i),t.emit(n,i),r.emit(n,i)},e},triggerHandler:function(e,t,r){var n,i;"undefined"!=typeof jQuery&&(n=jQuery(e).triggerHandler(t,r));var a=e._ev;if(!a)return n;var o,s=a._events[t];if(!s)return n;function l(e){return e.listener?(a.removeListener(t,e.listener),e.fired?void 0:(e.fired=!0,e.listener.apply(a,[r]))):e.apply(a,[r])}for(s=Array.isArray(s)?s:[s],o=0;o<s.length-1;o++)l(s[o]);return i=l(s[o]),void 0!==n?n:i},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}},events=Events$3,Lib$1H=libExports,dfltConfig$2=plot_config.dfltConfig;function copyArgArray(e,t){for(var r,n=[],i=0;i<t.length;i++)r=t[i],n[i]=r===e?r:"object"==typeof r?Array.isArray(r)?Lib$1H.extendDeep([],r):Lib$1H.extendDeepAll({},r):r;return n}var queue={add:function(e,t,r,n,i){var a,o;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},o=e.undoQueue.index,e.autoplay?e.undoQueue.inSequence||(e.autoplay=!1):(!e.undoQueue.sequence||e.undoQueue.beginSequence?(a={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(o,e.undoQueue.queue.length-o,a),e.undoQueue.index+=1):a=e.undoQueue.queue[o-1],e.undoQueue.beginSequence=!1,a&&(a.undo.calls.unshift(t),a.undo.args.unshift(r),a.redo.calls.push(n),a.redo.args.push(i)),e.undoQueue.queue.length>dfltConfig$2.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--))},startSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},stopSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},undo:function(e){var t,r;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index<=0)){for(e.undoQueue.index--,t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,r=0;r<t.undo.calls.length;r++)queue.plotDo(e,t.undo.calls[r],t.undo.args[r]);e.undoQueue.inSequence=!1,e.autoplay=!1}},redo:function(e){var t,r;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index>=e.undoQueue.queue.length)){for(t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,r=0;r<t.redo.calls.length;r++)queue.plotDo(e,t.redo.calls[r],t.redo.args[r]);e.undoQueue.inSequence=!1,e.autoplay=!1,e.undoQueue.index++}},plotDo:function(e,t,r){e.autoplay=!0,r=copyArgArray(e,r),t.apply(null,r)}},queue_1=queue,plot_schema={},frame_attributes={_isLinkedToArray:"frames_entry",group:{valType:"string",description:["An identifier that specifies the group to which the frame belongs,","used by animate to select a subset of frames."].join(" ")},name:{valType:"string",description:"A label by which to identify the frame"},traces:{valType:"any",description:["A list of trace indices that identify the respective traces in the","data attribute"].join(" ")},baseframe:{valType:"string",description:["The name of the frame into which this frame's properties are merged","before applying. This is used to unify properties and avoid needing","to specify the same values for the same properties in multiple frames."].join(" ")},data:{valType:"any",description:["A list of traces this frame modifies. The format is identical to the","normal trace definition."].join(" ")},layout:{valType:"any",description:["Layout properties which this frame modifies. The format is identical","to the normal layout definition."].join(" ")}},Lib$1G=libExports,extendFlat$g=Lib$1G.extendFlat,isPlainObject$3=Lib$1G.isPlainObject,traceOpts={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"],description:["trace attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full (re)plot starting by clearing `gd.calcdata`","to force it to be regenerated","*clearAxisTypes* resets the types of the axes this trace is on, because new data could","cause the automatic axis type detection to change. Log type will not be cleared, as that","is never automatically chosen so must have been user-specified.","*plot* (re)plots but without first clearing `gd.calcdata`.","*style* only calls `module.style` (or module.editStyle) for all trace modules and redraws the legend.","*markerSize* is like *style*, but propagate axis-range changes due to scatter `marker.size`","*colorbars* only redraws colorbars."].join(" ")},layoutOpts={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"],description:["layout attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full (re)plot starting by clearing `gd.calcdata`","to force it to be regenerated","*plot* (re)plots but without first clearing `gd.calcdata`.","*legend* only redraws the legend.","*ticks* only redraws axis ticks, labels, and gridlines.","*axrange* minimal sequence when updating axis ranges.","*layoutstyle* reapplies global and SVG cartesian axis styles.","*modebar* just updates the modebar.","*camera* just updates the camera settings for gl3d scenes.","*arraydraw* allows component arrays to invoke the redraw routines just for the","component(s) that changed.","*colorbars* only redraws colorbars."].join(" ")},traceEditTypeFlags=traceOpts.flags.slice().concat(["fullReplot"]),layoutEditTypeFlags=layoutOpts.flags.slice().concat("layoutReplot"),edit_types={traces:traceOpts,layout:layoutOpts,traceFlags:function(){return falseObj(traceEditTypeFlags)},layoutFlags:function(){return falseObj(layoutEditTypeFlags)},update:function(e,t){var r=t.editType;if(r&&"none"!==r)for(var n=r.split("+"),i=0;i<n.length;i++)e[n[i]]=!0},overrideAll:overrideAll$a};function falseObj(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!1;return t}function overrideAll$a(e,t,r){var n=extendFlat$g({},e);for(var i in n){var a=n[i];isPlainObject$3(a)&&(n[i]=overrideOne(a,t,r,i))}return"from-root"===r&&(n.editType=t),n}function overrideOne(e,t,r,n){if(e.valType){var i=extendFlat$g({},e);if(i.editType=t,Array.isArray(e.items)){i.items=new Array(e.items.length);for(var a=0;a<e.items.length;a++)i.items[a]=overrideOne(e.items[a],t)}return i}return overrideAll$a(e,t,"_"===n.charAt(0)?"nested":"from-root")}!function(e){var t=registry,r=libExports,n=attributes$M,i=layout_attributes$5,a=frame_attributes,o=animation_attributes,s=plot_config.configAttributes,l=edit_types,c=r.extendDeepAll,u=r.isPlainObject,d=r.isArrayOrTypedArray,h=r.nestedProperty,g=r.valObjectMeta,p="_isSubplotObj",f="_isLinkedToArray",m="_deprecated",y=[p,f,"_arrayAttrRegexps",m];function b(e,t,r){if(!e)return!1;if(e._isLinkedToArray)if(v(t[r]))r++;else if(r<t.length)return!1;for(;r<t.length;r++){var n=e[t[r]];if(!u(n))break;if(e=n,r===t.length-1)break;if(e._isLinkedToArray){if(!v(t[++r]))return!1}else if("info_array"===e.valType){var i=t[++r];if(!v(i))return!1;var a=e.items;if(Array.isArray(a)){if(i>=a.length)return!1;if(2===e.dimensions){if(r++,t.length===r)return e;var o=t[r];if(!v(o))return!1;e=a[i][o]}else e=a[i]}else e=a}}return e}function v(e){return e===Math.round(e)&&e>=0}function x(){var e,r,n={};for(e in c(n,i),t.subplotsRegistry){if((r=t.subplotsRegistry[e]).layoutAttributes)if(Array.isArray(r.attr))for(var a=0;a<r.attr.length;a++)F(n,r,r.attr[a]);else F(n,r,"subplot"===r.attr?r.name:r.attr)}for(e in t.componentsRegistry){var o=(r=t.componentsRegistry[e]).schema;if(o&&(o.subplots||o.layout)){var s=o.subplots;if(s&&s.xaxis&&!s.yaxis)for(var l in s.xaxis)delete n.yaxis[l];delete n.xaxis.shift,delete n.xaxis.autoshift}else"colorscale"===r.name?c(n,r.layoutAttributes):r.layoutAttributes&&A(n,r.layoutAttributes,r.name)}return{layoutAttributes:I(n)}}function B(){var e={frames:c({},a)};return I(e),e.frames}function I(t){return function(t){function r(e){return{valType:"string",description:"Sets the source reference on Chart Studio Cloud for `"+e+"`.",editType:"none"}}function n(t,n,i){e.isValObject(t)?!0!==t.arrayOk&&"data_array"!==t.valType||(i[n+"src"]=r(n)):u(t)&&(t.role="object")}e.crawl(t,n)}(t),function(t){function r(e,t,r){if(e){var n=e._isLinkedToArray;n&&(delete e._isLinkedToArray,r[t]={items:{}},r[t].items[n]=e,r[t].role="object")}}e.crawl(t,r)}(t),function(e){function t(e){for(var r in e)if(u(e[r]))t(e[r]);else if(Array.isArray(e[r]))for(var n=0;n<e[r].length;n++)t(e[r][n]);else e[r]instanceof RegExp&&(e[r]=e[r].toString())}t(e)}(t),t}function F(e,t,r){var n=h(e,r),i=c({},t.layoutAttributes);i._isSubplotObj=!0,n.set(i)}function A(e,t,r){var n=h(e,r);n.set(c(n.get()||{},t))}e.IS_SUBPLOT_OBJ=p,e.IS_LINKED_TO_ARRAY=f,e.DEPRECATED=m,e.UNDERSCORE_ATTRS=y,e.get=function(){var r={};t.allTypes.forEach((function(i){r[i]=function(r){var i,a;i=t.modules[r]._module,a=i.basePlotModule;var o={type:null},s=c({},n),l=c({},i.attributes);e.crawl(l,(function(e,t,r,n,i){h(s,i).set(void 0),void 0===e&&h(l,i).set(void 0)})),c(o,s),t.traceIs(r,"noOpacity")&&delete o.opacity;t.traceIs(r,"showLegend")||(delete o.showlegend,delete o.legendgroup);t.traceIs(r,"noHover")&&(delete o.hoverinfo,delete o.hoverlabel);i.selectPoints||delete o.selectedpoints;c(o,l),a.attributes&&c(o,a.attributes);o.type=r;var u={meta:i.meta||{},categories:i.categories||{},animatable:Boolean(i.animatable),type:r,attributes:I(o)};if(i.layoutAttributes){var d={};c(d,i.layoutAttributes),u.layoutAttributes=I(d)}i.animatable||e.crawl(u,(function(t){e.isValObject(t)&&"anim"in t&&delete t.anim}));return u}(i)}));var i={};return Object.keys(t.transformsRegistry).forEach((function(e){i[e]=function(e){var r=t.transformsRegistry[e],n=c({},r.attributes);return Object.keys(t.componentsRegistry).forEach((function(r){var i=t.componentsRegistry[r];i.schema&&i.schema.transforms&&i.schema.transforms[e]&&Object.keys(i.schema.transforms[e]).forEach((function(t){A(n,i.schema.transforms[e][t],t)}))})),{attributes:I(n)}}(e)})),{defs:{valObjects:g,metaKeys:y.concat(["description","role","editType","impliedEdits"]),editType:{traces:l.traces,layout:l.layout},impliedEdits:{description:["Sometimes when an attribute is changed, other attributes","must be altered as well in order to achieve the intended","result. For example, when `range` is specified, it is","important to set `autorange` to `false` or the new `range`","value would be lost in the redraw. `impliedEdits` is the","mechanism to do this: `impliedEdits: {autorange: false}`.","Each key is a relative paths to the attribute string to","change, using *^* to ascend into the parent container,","for example `range[0]` has `impliedEdits: {*^autorange*: false}`.","A value of `undefined` means that the attribute will not be","changed, but its previous value should be recorded in case","we want to reverse this change later. For example, `autorange`","has `impliedEdits: {*range[0]*: undefined, *range[1]*:undefined}","because the range will likely be changed by redraw."].join(" ")}},traces:r,layout:x(),transforms:i,frames:B(),animation:I(o),config:I(s)}},e.crawl=function(t,r,n,i){var a=n||0;i=i||"",Object.keys(t).forEach((function(n){var o=t[n];if(-1===y.indexOf(n)){var s=(i?i+".":"")+n;r(o,n,t,a,s),e.isValObject(o)||u(o)&&"impliedEdits"!==n&&e.crawl(o,r,a+1,s)}}))},e.isValObject=function(e){return e&&void 0!==e.valType},e.findArrayAttributes=function(t){var r,i,a=[],o=[],s=[];function l(e,t,n,i){o=o.slice(0,i).concat([t]),s=s.slice(0,i).concat([e&&e._isLinkedToArray]),e&&("data_array"===e.valType||!0===e.arrayOk)&&!("colorbar"===o[i-1]&&("ticktext"===t||"tickvals"===t))&&c(r,0,"")}function c(e,t,r){var n=e[o[t]],l=r+o[t];if(t===o.length-1)d(n)&&a.push(i+l);else if(s[t]){if(Array.isArray(n))for(var h=0;h<n.length;h++)u(n[h])&&c(n[h],t+1,l+"["+h+"].")}else u(n)&&c(n,t+1,l+".")}r=t,i="",e.crawl(n,l),t._module&&t._module.attributes&&e.crawl(t._module.attributes,l);var h=t.transforms;if(h)for(var g=0;g<h.length;g++){var p=h[g],f=p._module;f&&(i="transforms["+g+"].",r=p,e.crawl(f.attributes,l))}return a},e.getTraceValObject=function(e,r){var i,a,o=r[0],s=1;if("transforms"===o){if(1===r.length)return n.transforms;var l=e.transforms;if(!Array.isArray(l)||!l.length)return!1;var c=r[1];if(!v(c)||c>=l.length)return!1;a=(i=(t.transformsRegistry[l[c].type]||{}).attributes)&&i[r[2]],s=3}else{var u=e._module;if(u||(u=(t.modules[e.type||n.type.dflt]||{})._module),!u)return!1;if(!(a=(i=u.attributes)&&i[o])){var d=u.basePlotModule;d&&d.attributes&&(a=d.attributes[o])}a||(a=n[o])}return b(a,r,s)},e.getLayoutValObject=function(e,r){var n=function(e,r){var n,a,o,s,l=e._basePlotModules;if(l){var c;for(n=0;n<l.length;n++){if((o=l[n]).attrRegex&&o.attrRegex.test(r)){if(o.layoutAttrOverrides)return o.layoutAttrOverrides;!c&&o.layoutAttributes&&(c=o.layoutAttributes)}var u=o.baseLayoutAttrOverrides;if(u&&r in u)return u[r]}if(c)return c}var d=e._modules;if(d)for(n=0;n<d.length;n++)if((s=d[n].layoutAttributes)&&r in s)return s[r];for(a in t.componentsRegistry){if("colorscale"===(o=t.componentsRegistry[a]).name&&0===r.indexOf("coloraxis"))return o.layoutAttributes[r];if(!o.schema&&r===o.name)return o.layoutAttributes}return r in i&&i[r]}(e,r[0]);return b(n,r,1)}}(plot_schema);var plotsExports={},plots$2={get exports(){return plotsExports},set exports(e){plotsExports=e}},plot_template={},Lib$1F=libExports,plotAttributes$1=attributes$M,TEMPLATEITEMNAME="templateitemname",templateAttrs={name:{valType:"string",editType:"none",description:["When used in a template, named items are created in the output figure","in addition to any items the figure already has in this array.","You can modify these items in the output figure by making your own","item with `templateitemname` matching this `name`","alongside your modifications (including `visible: false` or","`enabled: false` to hide it).","Has no effect outside of a template."].join(" ")}};function validItemName(e){return e&&"string"==typeof e}function arrayDefaultKey(e){var t=e.length-1;return"s"!==e.charAt(t)&&Lib$1F.warn("bad argument to arrayDefaultKey: "+e),e.substr(0,e.length-1)+"defaults"}templateAttrs[TEMPLATEITEMNAME]={valType:"string",editType:"calc",description:["Used to refer to a named item in this array in the template. Named","items from the template will be created even without a matching item","in the input figure, but you can modify one by making an item with","`templateitemname` matching its `name`, alongside your modifications","(including `visible: false` or `enabled: false` to hide it).","If there is no template or no matching item, this item will be","hidden unless you explicitly show it with `visible: true`."].join(" ")},plot_template.templatedArray=function(e,t){return t._isLinkedToArray=e,t.name=templateAttrs.name,t[TEMPLATEITEMNAME]=templateAttrs[TEMPLATEITEMNAME],t},plot_template.traceTemplater=function(e){var t,r,n={};for(t in e)r=e[t],Array.isArray(r)&&r.length&&(n[t]=0);return{newTrace:function(i){var a={type:t=Lib$1F.coerce(i,{},plotAttributes$1,"type"),_template:null};if(t in n){r=e[t];var o=n[t]%r.length;n[t]++,a._template=r[o]}return a}}},plot_template.newContainer=function(e,t,r){var n=e._template,i=n&&(n[t]||r&&n[r]);return Lib$1F.isPlainObject(i)||(i=null),e[t]={_template:i}},plot_template.arrayTemplater=function(e,t,r){var n=e._template,i=n&&n[arrayDefaultKey(t)],a=n&&n[t];Array.isArray(a)&&a.length||(a=[]);var o={};return{newItem:function(e){var t={name:e.name,_input:e},n=t[TEMPLATEITEMNAME]=e[TEMPLATEITEMNAME];if(!validItemName(n))return t._template=i,t;for(var s=0;s<a.length;s++){var l=a[s];if(l.name===n)return o[n]=1,t._template=l,t}return t[r]=e[r]||!1,t._template=!1,t},defaultItems:function(){for(var e=[],t=0;t<a.length;t++){var r=a[t],n=r.name;if(validItemName(n)&&!o[n]){var i={_template:r,name:n,_input:{_templateitemname:n}};i[TEMPLATEITEMNAME]=r[TEMPLATEITEMNAME],e.push(i),o[n]=1}}return e}}},plot_template.arrayDefaultKey=arrayDefaultKey,plot_template.arrayEditor=function(e,t,r){var n=(Lib$1F.nestedProperty(e,t).get()||[]).length,i=r._index,a=i>=n&&(r._input||{})._templateitemname;a&&(i=n);var o,s=t+"["+i+"]";function l(){o={},a&&(o[s]={},o[s][TEMPLATEITEMNAME]=a)}function c(e,t){a?Lib$1F.nestedProperty(o[s],e).set(t):o[s+"."+e]=t}function u(){var e=o;return l(),e}return l(),{modifyBase:function(e,t){o[e]=t},modifyItem:c,getUpdateObj:u,applyUpdate:function(t,r){t&&c(t,r);var n=u();for(var i in n)Lib$1F.nestedProperty(e,i).set(n[i])}}};var axis_ids={},counterRegex$2=regex.counter,constants$K={idRegex:{x:counterRegex$2("x","( domain)?"),y:counterRegex$2("y","( domain)?")},attrRegex:counterRegex$2("[xy]axis"),xAxisMatch:counterRegex$2("xaxis"),yAxisMatch:counterRegex$2("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}};function clearOutlineControllers$3(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".outline-controllers").remove()}function clearOutline$5(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".select-outline").remove(),e._fullLayout._outlining=!1}!function(e){var t=registry,r=constants$K;function n(e,t){if(t&&t.length)for(var r=0;r<t.length;r++)if(t[r][e])return!0;return!1}e.id2name=function(e){if("string"==typeof e&&e.match(r.AX_ID_PATTERN)){var t=e.split(" ")[0].substr(1);return"1"===t&&(t=""),e.charAt(0)+"axis"+t}},e.name2id=function(e){if(e.match(r.AX_NAME_PATTERN)){var t=e.substr(5);return"1"===t&&(t=""),e.charAt(0)+t}},e.cleanId=function(e,t,n){var i=/( domain)$/.test(e);if("string"==typeof e&&e.match(r.AX_ID_PATTERN)&&(!t||e.charAt(0)===t)&&(!i||n)){var a=e.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===a&&(a=""),e.charAt(0)+a+(i&&n?" domain":"")}},e.list=function(t,r,n){var i=t._fullLayout;if(!i)return[];var a,o=e.listIds(t,r),s=new Array(o.length);for(a=0;a<o.length;a++){var l=o[a];s[a]=i[l.charAt(0)+"axis"+l.substr(1)]}if(!n){var c=i._subplots.gl3d||[];for(a=0;a<c.length;a++){var u=i[c[a]];r?s.push(u[r+"axis"]):s.push(u.xaxis,u.yaxis,u.zaxis)}}return s},e.listIds=function(e,t){var r=e._fullLayout;if(!r)return[];var n=r._subplots;return t?n[t+"axis"]:n.xaxis.concat(n.yaxis)},e.getFromId=function(t,r,n){var i=t._fullLayout;return r=void 0===r||"string"!=typeof r?r:r.replace(" domain",""),"x"===n?r=r.replace(/y[0-9]*/,""):"y"===n&&(r=r.replace(/x[0-9]*/,"")),i[e.id2name(r)]},e.getFromTrace=function(r,n,i){var a=r._fullLayout,o=null;if(t.traceIs(n,"gl3d")){var s=n.scene;"scene"===s.substr(0,5)&&(o=a[s][i+"axis"])}else o=e.getFromId(r,n[i+"axis"]||i);return o},e.idSort=function(e,t){var r=e.charAt(0),n=t.charAt(0);return r!==n?r>n?1:-1:+(e.substr(1)||1)-+(t.substr(1)||1)},e.ref2id=function(e){return!!/^[xyz]/.test(e)&&e.split(" ")[0]},e.isLinked=function(e,t){return n(t,e._axisMatchGroups)||n(t,e._axisConstraintGroups)}}(axis_ids);var handle_outline={clearOutlineControllers:clearOutlineControllers$3,clearOutline:clearOutline$5},layout_attributes$4={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc",description:["Determines how scatter points at the same location coordinate","are displayed on the graph.","With *group*, the scatter points are plotted next to one another","centered around the shared location.","With *overlay*, the scatter points are plotted over one another,","you might need to reduce *opacity* to see multiple scatter points."].join(" ")},scattergap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between scatter points of","adjacent location coordinates.","Defaults to `bargap`."].join(" ")}},get_data={},Registry$M=registry,SUBPLOT_PATTERN=constants$K.SUBPLOT_PATTERN;get_data.getSubplotCalcData=function(e,t,r){var n=Registry$M.subplotsRegistry[t];if(!n)return[];for(var i=n.attr,a=[],o=0;o<e.length;o++){var s=e[o];s[0].trace[i]===r&&a.push(s)}return a},get_data.getModuleCalcData=function(e,t){var r,n=[],i=[];if(!(r="string"==typeof t?Registry$M.getModule(t).plot:"function"==typeof t?t:t.plot))return[n,e];for(var a=0;a<e.length;a++){var o=e[a],s=o[0].trace;!0===s.visible&&0!==s._length&&(s._module.plot===r?n.push(o):i.push(o))}return[n,i]},get_data.getSubplotData=function(e,t,r){if(!Registry$M.subplotsRegistry[t])return[];var n,i,a,o=Registry$M.subplotsRegistry[t].attr,s=[];if("gl2d"===t){var l=r.match(SUBPLOT_PATTERN);i="x"+l[1],a="y"+l[2]}for(var c=0;c<e.length;c++)n=e[c],"gl2d"===t&&Registry$M.traceIs(n,"gl2d")?n[o[0]]===i&&n[o[1]]===a&&s.push(n):n[o]===r&&s.push(n);return s};var hasRequiredCommand,command={};function requireCommand(){return hasRequiredCommand||(hasRequiredCommand=1,function(e){var t=registry,r=libExports;function n(e,t,n){var i,a,o,s=!1;if("data"===t.type)i=e._fullData[null!==t.traces?t.traces[0]:0];else{if("layout"!==t.type)return!1;i=e._fullLayout}return a=r.nestedProperty(i,t.prop).get(),(o=n[t.type]=n[t.type]||{}).hasOwnProperty(t.prop)&&o[t.prop]!==a&&(s=!0),o[t.prop]=a,{changed:s,value:a}}function i(e,t){var n=[],i=t[0],a={};if("string"==typeof i)a[i]=t[1];else{if(!r.isPlainObject(i))return n;a=i}return o(a,(function(e,t,r){n.push({type:"layout",prop:e,value:r})}),"",0),n}function a(e,t){var n,i,a,s,l=[];if(i=t[0],a=t[1],n=t[2],s={},"string"==typeof i)s[i]=a;else{if(!r.isPlainObject(i))return l;s=i,void 0===n&&(n=a)}return void 0===n&&(n=null),o(s,(function(t,r,i){var a,o;if(Array.isArray(i)){o=i.slice();var s=Math.min(o.length,e.data.length);n&&(s=Math.min(s,n.length)),a=[];for(var c=0;c<s;c++)a[c]=n?n[c]:c}else o=i,a=n?n.slice():null;if(null===a)Array.isArray(o)&&(o=o[0]);else if(Array.isArray(a)){if(!Array.isArray(o)){var u=o;o=[];for(var d=0;d<a.length;d++)o[d]=u}o.length=Math.min(a.length,o.length)}l.push({type:"data",prop:t,traces:a,value:o})}),"",0),l}function o(e,t,n,i){Object.keys(e).forEach((function(a){var s=e[a];if("_"!==a[0]){var l=n+(i>0?".":"")+a;r.isPlainObject(s)?o(s,t,l,i+1):t(l,a,s)}}))}e.manageCommandObserver=function(t,i,a,o){var s={},l=!0;i&&i._commandObserver&&(s=i._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var c=e.hasSimpleAPICommandBindings(t,a,s.lookupTable);if(i&&i._commandObserver){if(c)return s;if(i._commandObserver.remove)return i._commandObserver.remove(),i._commandObserver=null,s}if(c){n(t,c,s.cache),s.check=function(){if(l){var e=n(t,c,s.cache);return e.changed&&o&&void 0!==s.lookupTable[e.value]&&(s.disable(),Promise.resolve(o({value:e.value,type:c.type,prop:c.prop,traces:c.traces,index:s.lookupTable[e.value]})).then(s.enable,s.enable)),e.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],d=0;d<u.length;d++)t._internalOn(u[d],s.check);s.remove=function(){for(var e=0;e<u.length;e++)t._removeInternalListener(u[e],s.check)}}else r.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){l=!1},s.enable=function(){l=!0},i&&(i._commandObserver=s),s},e.hasSimpleAPICommandBindings=function(t,r,n){var i,a,o=r.length;for(i=0;i<o;i++){var s,l=r[i],c=l.method,u=l.args;if(Array.isArray(u)||(u=[]),!c)return!1;var d=e.computeAPICommandBindings(t,c,u);if(1!==d.length)return!1;if(a){if((s=d[0]).type!==a.type)return!1;if(s.prop!==a.prop)return!1;if(Array.isArray(a.traces)){if(!Array.isArray(s.traces))return!1;s.traces.sort();for(var h=0;h<a.traces.length;h++)if(a.traces[h]!==s.traces[h])return!1}else if(s.prop!==a.prop)return!1}else a=d[0],Array.isArray(a.traces)&&a.traces.sort();var g=(s=d[0]).value;if(Array.isArray(g)){if(1!==g.length)return!1;g=g[0]}n&&(n[g]=i)}return a},e.executeAPICommand=function(e,n,i){if("skip"===n)return Promise.resolve();var a=t.apiMethodRegistry[n],o=[e];Array.isArray(i)||(i=[]);for(var s=0;s<i.length;s++)o.push(i[s]);return a.apply(null,o).catch((function(e){return r.warn("API call to Plotly."+n+" rejected.",e),Promise.reject(e)}))},e.computeAPICommandBindings=function(e,t,r){var n;switch(Array.isArray(r)||(r=[]),t){case"restyle":n=a(e,r);break;case"relayout":n=i(e,r);break;case"update":n=a(e,[r[0],r[2]]).concat(i(e,[r[1]]));break;case"animate":n=function(e,t){return Array.isArray(t[0])&&1===t[0].length&&-1!==["string","number"].indexOf(typeof t[0][0])?[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]:[]}(0,r);break;default:n=[]}return n}}(command)),command}var d3$r=d3Exports,timeFormatLocale=require$$1.timeFormatLocale,formatLocale=require$$2.formatLocale,isNumeric$p=fastIsnumeric,Registry$L=registry,PlotSchema$2=plot_schema,Template$9=plot_template,Lib$1E=libExports,Color$B=colorExports,BADNUM$8=numerical.BADNUM,axisIDs$1=axis_ids,clearOutline$4=handle_outline.clearOutline,scatterAttrs$2=layout_attributes$4,animationAttrs$1=animation_attributes,frameAttrs=frame_attributes,getModuleCalcData$1=get_data.getModuleCalcData,relinkPrivateKeys=Lib$1E.relinkPrivateKeys,_$1=Lib$1E._,plots$1=plots$2.exports={};Lib$1E.extendFlat(plots$1,Registry$L),plots$1.attributes=attributes$M,plots$1.attributes.type.values=plots$1.allTypes,plots$1.fontAttrs=requireFont_attributes(),plots$1.layoutAttributes=layout_attributes$5,plots$1.fontWeight="normal";var transformsRegistry=plots$1.transformsRegistry,commandModule=requireCommand();function positionPlayWithData(e,t){t.text("");var r=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));if(e._context.sendData)r.on("click",(function(){plots$1.sendDataToCloud(e)}));else{var n=window.location.pathname.split("/"),i=window.location.search;r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+n[2].split(".")[0]+"/"+n[1]+i})}}plots$1.executeAPICommand=commandModule.executeAPICommand,plots$1.computeAPICommandBindings=commandModule.computeAPICommandBindings,plots$1.manageCommandObserver=commandModule.manageCommandObserver,plots$1.hasSimpleAPICommandBindings=commandModule.hasSimpleAPICommandBindings,plots$1.redrawText=function(e){return e=Lib$1E.getGraphDiv(e),new Promise((function(t){setTimeout((function(){e._fullLayout&&(Registry$L.getComponentMethod("annotations","draw")(e),Registry$L.getComponentMethod("legend","draw")(e),Registry$L.getComponentMethod("colorbar","draw")(e),t(plots$1.previousPromises(e)))}),300)}))},plots$1.resize=function(e){var t;e=Lib$1E.getGraphDiv(e);var r=new Promise((function(r,n){e&&!Lib$1E.isHidden(e)||n(new Error("Resize must be passed a displayed plot div element.")),e._redrawTimer&&clearTimeout(e._redrawTimer),e._resolveResize&&(t=e._resolveResize),e._resolveResize=r,e._redrawTimer=setTimeout((function(){if(!e.layout||e.layout.width&&e.layout.height||Lib$1E.isHidden(e))r(e);else{delete e.layout.width,delete e.layout.height;var t=e.changed;e.autoplay=!0,Registry$L.call("relayout",e,{autosize:!0}).then((function(){e.changed=t,e._resolveResize===r&&(delete e._resolveResize,r(e))}))}}),100)}));return t&&t(r),r},plots$1.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then((function(){e._promises=[]}))},plots$1.addLinks=function(e){if(e._context.showLink||e._context.showSources){var t=e._fullLayout,r=Lib$1E.ensureSingle(t._paper,"text","js-plot-link-container",(function(e){e.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:Color$B.defaultLine,"pointer-events":"all"}).each((function(){var e=d3$r.select(this);e.append("tspan").classed("js-link-to-tool",!0),e.append("tspan").classed("js-link-spacer",!0),e.append("tspan").classed("js-sourcelinks",!0)}))})),n=r.node(),i={y:t._paper.attr("height")-9};document.body.contains(n)&&n.getComputedTextLength()>=t.width-20?(i["text-anchor"]="start",i.x=5):(i["text-anchor"]="end",i.x=t._paper.attr("width")-7),r.attr(i);var a=r.select(".js-link-to-tool"),o=r.select(".js-link-spacer"),s=r.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&positionPlayWithData(e,a),o.text(a.text()&&s.text()?" - ":"")}},plots$1.sendDataToCloud=function(e){var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(t){e.emit("plotly_beforeexport");var r=d3$r.select(e).append("div").attr("id","hiddenform").style("display","none"),n=r.append("form").attr({action:t+"/external",method:"post",target:"_blank"});return n.append("input").attr({type:"text",name:"data"}).node().value=plots$1.graphJson(e,!1,"keepdata"),n.node().submit(),r.remove(),e.emit("plotly_afterexport"),!1}};var d3FormatKeys=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],extraFormatKeys=["year","month","dayMonth","dayMonthYear"];function getTraceUids(e,t){var r,n,i=t.length,a=[];for(r=0;r<e.length;r++){var o=e[r]._fullInput;o!==n&&a.push(o),n=o}var s=a.length,l=new Array(i),c={};function u(e,t){l[t]=e,c[e]=1}function d(e,t){if(e&&"string"==typeof e&&!c[e])return u(e,t),!0}for(r=0;r<i;r++){var h=t[r].uid;"number"==typeof h&&(h=String(h)),d(h,r)||(r<s&&d(a[r].uid,r)||u(Lib$1E.randstr(c),r))}return l}function emptySubplotLists(){var e,t,r=Registry$L.collectableSubplotTypes,n={};if(!r){r=[];var i=Registry$L.subplotsRegistry;for(var a in i){var o=i[a].attr;if(o&&(r.push(a),Array.isArray(o)))for(t=0;t<o.length;t++)Lib$1E.pushUnique(r,o[t])}}for(e=0;e<r.length;e++)n[r[e]]=[];return n}function getFormatObj(e,t){var r=e._context.locale;r||(r="en-US");var n=!1,i={};function a(e){for(var r=!0,a=0;a<t.length;a++){var o=t[a];i[o]||(e[o]?i[o]=e[o]:r=!1)}r&&(n=!0)}for(var o=0;o<2;o++){for(var s=e._context.locales,l=0;l<2;l++){var c=(s[r]||{}).format;if(c&&(a(c),n))break;s=Registry$L.localeRegistry}var u=r.split("-")[0];if(n||u===r)break;r=u}return n||a(Registry$L.localeRegistry.en.format),i}function getFormatter(e,t){return e.decimal=t.charAt(0),e.thousands=t.charAt(1),{numberFormat:function(t){try{t=formatLocale(e).format(Lib$1E.adjustFormat(t))}catch(e){return Lib$1E.warnBadFormat(t),Lib$1E.noFormat}return t},timeFormat:timeFormatLocale(e).utcFormat}}function fillMetaTextHelpers(e,t){var r,n=[];t.meta&&(r=t._meta={meta:t.meta,layout:{meta:t.meta}});for(var i=0;i<e.length;i++){var a=e[i];a.meta?n[a.index]=a._meta={meta:a.meta}:t.meta&&(a._meta={meta:t.meta}),t.meta&&(a._meta.layout={meta:t.meta})}n.length&&(r||(r=t._meta={}),r.data=n)}function findMainSubplot(e,t){var r={_fullLayout:t},n="x"===e._id.charAt(0),i=e._mainAxis._anchorAxis,a="",o="",s="";if(i&&(s=i._mainAxis._id,a=n?e._id+s:s+e._id),!a||!t._plots[a]){a="";for(var l=e._counterAxes,c=0;c<l.length;c++){var u=l[c],d=n?e._id+u:u+e._id;o||(o=d);var h=axisIDs$1.getFromId(r,u);if(s&&h.overlaying===s){a=d;break}}}return a||o}function hasMakesDataTransform(e){var t=e.transforms;if(Array.isArray(t)&&t.length)for(var r=0;r<t.length;r++){var n=t[r],i=n._module||transformsRegistry[n.type];if(i&&i.makesData)return!0}return!1}function applyTransforms(e,t,r,n){for(var i=e.transforms,a=[e],o=0;o<i.length;o++){var s=i[o],l=transformsRegistry[s.type];l&&l.transform&&(a=l.transform(a,{transform:s,fullTrace:e,fullData:t,layout:r,fullLayout:n,transformIndex:o}))}return a}function getComputedSize(e){return"string"==typeof e&&"px"===e.substr(e.length-2)&&parseFloat(e)}function initMargins(e){var t=e.margin;if(!e._size){var r=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)};r.w=Math.round(e.width)-r.l-r.r,r.h=Math.round(e.height)-r.t-r.b}e._pushmargin||(e._pushmargin={}),e._pushmarginIds||(e._pushmarginIds={}),e._reservedMargin||(e._reservedMargin={})}plots$1.supplyDefaults=function(e,t){var r=t&&t.skipUpdateCalc,n=e._fullLayout||{};if(n._skipDefaults)delete n._skipDefaults;else{var i,a=e._fullLayout={},o=e.layout||{},s=e._fullData||[],l=e._fullData=[],c=e.data||[],u=e.calcdata||[],d=e._context||{};e._transitionData||plots$1.createTransitionData(e),a._dfltTitle={plot:_$1(e,"Click to enter Plot title"),x:_$1(e,"Click to enter X axis title"),y:_$1(e,"Click to enter Y axis title"),colorbar:_$1(e,"Click to enter Colorscale title"),annotation:_$1(e,"new text")},a._traceWord=_$1(e,"trace");var h=getFormatObj(e,d3FormatKeys);if(a._mapboxAccessToken=d.mapboxAccessToken,n._initialAutoSizeIsDone){var g=n.width,p=n.height;plots$1.supplyLayoutGlobalDefaults(o,a,h),o.width||(a.width=g),o.height||(a.height=p),plots$1.sanitizeMargins(a)}else{plots$1.supplyLayoutGlobalDefaults(o,a,h);var f=!o.width||!o.height,m=a.autosize,y=d.autosizable;f&&(m||y)?plots$1.plotAutoSize(e,o,a):f&&plots$1.sanitizeMargins(a),!m&&f&&(o.width=a.width,o.height=a.height)}a._d3locale=getFormatter(h,a.separators),a._extraFormat=getFormatObj(e,extraFormatKeys),a._initialAutoSizeIsDone=!0,a._dataLength=c.length,a._modules=[],a._visibleModules=[],a._basePlotModules=[];var b=a._subplots=emptySubplotLists(),v=a._splomAxes={x:{},y:{}},x=a._splomSubplots={};a._splomGridDflt={},a._scatterStackOpts={},a._firstScatter={},a._alignmentOpts={},a._colorAxes={},a._requestRangeslider={},a._traceUids=getTraceUids(s,c),a._globalTransforms=(e._context||{}).globalTransforms,plots$1.supplyDataDefaults(c,l,o,a);var B=Object.keys(v.x),I=Object.keys(v.y);if(B.length>1&&I.length>1){for(Registry$L.getComponentMethod("grid","sizeDefaults")(o,a),i=0;i<B.length;i++)Lib$1E.pushUnique(b.xaxis,B[i]);for(i=0;i<I.length;i++)Lib$1E.pushUnique(b.yaxis,I[i]);for(var F in x)Lib$1E.pushUnique(b.cartesian,F)}if(a._has=plots$1._hasPlotType.bind(a),s.length===l.length)for(i=0;i<l.length;i++)relinkPrivateKeys(l[i],s[i]);plots$1.supplyLayoutModuleDefaults(o,a,l,e._transitionData);var A=a._visibleModules,C=[];for(i=0;i<A.length;i++){var w=A[i].crossTraceDefaults;w&&Lib$1E.pushUnique(C,w)}for(i=0;i<C.length;i++)C[i](l,a);a._hasOnlyLargeSploms=1===a._basePlotModules.length&&"splom"===a._basePlotModules[0].name&&B.length>15&&I.length>15&&0===a.shapes.length&&0===a.images.length,plots$1.linkSubplots(l,a,s,n),plots$1.cleanPlot(l,a,s,n);var Q=!(!n._has||!n._has("gl2d")),U=!(!a._has||!a._has("gl2d")),S=!(!n._has||!n._has("cartesian"))||Q,E=!(!a._has||!a._has("cartesian"))||U;S&&!E?n._bgLayer.remove():E&&!S&&(a._shouldCreateBgLayer=!0),n._zoomlayer&&!e._dragging&&clearOutline$4({_fullLayout:n}),fillMetaTextHelpers(l,a),relinkPrivateKeys(a,n),Registry$L.getComponentMethod("colorscale","crossTraceDefaults")(l,a),a._preGUI||(a._preGUI={}),a._tracePreGUI||(a._tracePreGUI={});var L,_=a._tracePreGUI,T={};for(L in _)T[L]="old";for(i=0;i<l.length;i++)T[L=l[i]._fullInput.uid]||(_[L]={}),T[L]="new";for(L in T)"old"===T[L]&&delete _[L];initMargins(a),Registry$L.getComponentMethod("rangeslider","makeData")(a),r||u.length!==l.length||plots$1.supplyDefaultsUpdateCalc(u,l)}},plots$1.supplyDefaultsUpdateCalc=function(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=(e[r]||[])[0];if(i&&i.trace){var a=i.trace;if(a._hasCalcTransform){var o,s,l,c=a._arrayAttrs;for(o=0;o<c.length;o++)s=c[o],l=Lib$1E.nestedProperty(a,s).get().slice(),Lib$1E.nestedProperty(n,s).set(l)}i.trace=n}}},plots$1.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])},plots$1._hasPlotType=function(e){var t,r=this._basePlotModules||[];for(t=0;t<r.length;t++)if(r[t].name===e)return!0;var n=this._modules||[];for(t=0;t<n.length;t++){var i=n[t].name;if(i===e)return!0;var a=Registry$L.modules[i];if(a&&a.categories[e])return!0}return!1},plots$1.cleanPlot=function(e,t,r,n){var i,a,o=n._basePlotModules||[];for(i=0;i<o.length;i++){var s=o[i];s.clean&&s.clean(e,t,r,n)}var l=n._has&&n._has("gl"),c=t._has&&t._has("gl");l&&!c&&void 0!==n._glcontainer&&(n._glcontainer.selectAll(".gl-canvas").remove(),n._glcontainer.selectAll(".no-webgl").remove(),n._glcanvas=null);var u=!!n._infolayer;e:for(i=0;i<r.length;i++){var d=r[i].uid;for(a=0;a<e.length;a++){if(d===e[a].uid)continue e}u&&n._infolayer.select(".cb"+d).remove()}},plots$1.linkSubplots=function(e,t,r,n){var i,a,o=n._plots||{},s=t._plots={},l=t._subplots,c={_fullData:e,_fullLayout:t},u=l.cartesian.concat(l.gl2d||[]);for(i=0;i<u.length;i++){var d,h=u[i],g=o[h],p=axisIDs$1.getFromId(c,h,"x"),f=axisIDs$1.getFromId(c,h,"y");for(g?d=s[h]=g:(d=s[h]={}).id=h,p._counterAxes.push(f._id),f._counterAxes.push(p._id),p._subplotsWith.push(h),f._subplotsWith.push(h),d.xaxis=p,d.yaxis=f,d._hasClipOnAxisFalse=!1,a=0;a<e.length;a++){var m=e[a];if(m.xaxis===d.xaxis._id&&m.yaxis===d.yaxis._id&&!1===m.cliponaxis){d._hasClipOnAxisFalse=!0;break}}}var y,b=axisIDs$1.list(c,null,!0);for(i=0;i<b.length;i++){var v=null;(y=b[i]).overlaying&&(v=axisIDs$1.getFromId(c,y.overlaying))&&v.overlaying&&(y.overlaying=!1,v=null),y._mainAxis=v||y,v&&(y.domain=v.domain.slice()),y._anchorAxis="free"===y.anchor?null:axisIDs$1.getFromId(c,y.anchor)}for(i=0;i<b.length;i++)if((y=b[i])._counterAxes.sort(axisIDs$1.idSort),y._subplotsWith.sort(Lib$1E.subplotSort),y._mainSubplot=findMainSubplot(y,t),y._counterAxes.length&&(y.spikemode&&-1!==y.spikemode.indexOf("across")||y.automargin&&y.mirror&&"free"!==y.anchor||Registry$L.getComponentMethod("rangeslider","isVisible")(y))){var x=1,B=0;for(a=0;a<y._counterAxes.length;a++){var I=axisIDs$1.getFromId(c,y._counterAxes[a]);x=Math.min(x,I.domain[0]),B=Math.max(B,I.domain[1])}x<B&&(y._counterDomainMin=x,y._counterDomainMax=B)}},plots$1.clearExpandedTraceDefaultColors=function(e){var t,r,n;for(r=[],(t=e._module._colorAttrs)||(e._module._colorAttrs=t=[],PlotSchema$2.crawl(e._module.attributes,(function(e,n,i,a){r[a]=n,r.length=a+1,"color"===e.valType&&void 0===e.dflt&&t.push(r.join("."))}))),n=0;n<t.length;n++){Lib$1E.nestedProperty(e,"_input."+t[n]).get()||Lib$1E.nestedProperty(e,t[n]).set(null)}},plots$1.supplyDataDefaults=function(e,t,r,n){var i,a,o,s=n._modules,l=n._visibleModules,c=n._basePlotModules,u=0,d=0;function h(e){t.push(e);var r=e._module;r&&(Lib$1E.pushUnique(s,r),!0===e.visible&&Lib$1E.pushUnique(l,r),Lib$1E.pushUnique(c,e._module.basePlotModule),u++,!1!==e._input.visible&&d++)}n._transformModules=[];var g={},p=[],f=(r.template||{}).data||{},m=Template$9.traceTemplater(f);for(i=0;i<e.length;i++){if(o=e[i],(a=m.newTrace(o)).uid=n._traceUids[i],plots$1.supplyTraceDefaults(o,a,d,n,i),a.index=i,a._input=o,a._expandedIndex=u,a.transforms&&a.transforms.length)for(var y=!1!==o.visible&&!1===a.visible,b=applyTransforms(a,t,r,n),v=0;v<b.length;v++){var x=b[v],B={_template:a._template,type:a.type,uid:a.uid+v};y&&!1===x.visible&&delete x.visible,plots$1.supplyTraceDefaults(x,B,u,n,i),relinkPrivateKeys(B,x),B.index=i,B._input=o,B._fullInput=a,B._expandedIndex=u,B._expandedInput=x,h(B)}else a._fullInput=a,a._expandedInput=a,h(a);Registry$L.traceIs(a,"carpetAxis")&&(g[a.carpet]=a),Registry$L.traceIs(a,"carpetDependent")&&p.push(i)}for(i=0;i<p.length;i++)if((a=t[p[i]]).visible){var I=g[a.carpet];a._carpet=I,I&&I.visible?(a.xaxis=I.xaxis,a.yaxis=I.yaxis):a.visible=!1}},plots$1.supplyAnimationDefaults=function(e){var t;e=e||{};var r={};function n(t,n){return Lib$1E.coerce(e||{},r,animationAttrs$1,t,n)}if(n("mode"),n("direction"),n("fromcurrent"),Array.isArray(e.frame))for(r.frame=[],t=0;t<e.frame.length;t++)r.frame[t]=plots$1.supplyAnimationFrameDefaults(e.frame[t]||{});else r.frame=plots$1.supplyAnimationFrameDefaults(e.frame||{});if(Array.isArray(e.transition))for(r.transition=[],t=0;t<e.transition.length;t++)r.transition[t]=plots$1.supplyAnimationTransitionDefaults(e.transition[t]||{});else r.transition=plots$1.supplyAnimationTransitionDefaults(e.transition||{});return r},plots$1.supplyAnimationFrameDefaults=function(e){var t={};function r(r,n){return Lib$1E.coerce(e||{},t,animationAttrs$1.frame,r,n)}return r("duration"),r("redraw"),t},plots$1.supplyAnimationTransitionDefaults=function(e){var t={};function r(r,n){return Lib$1E.coerce(e||{},t,animationAttrs$1.transition,r,n)}return r("duration"),r("easing"),t},plots$1.supplyFrameDefaults=function(e){var t={};function r(r,n){return Lib$1E.coerce(e,t,frameAttrs,r,n)}return r("group"),r("name"),r("traces"),r("baseframe"),r("data"),r("layout"),t},plots$1.supplyTraceDefaults=function(e,t,r,n,i){var a,o=n.colorway||Color$B.defaults,s=o[r%o.length];function l(r,n){return Lib$1E.coerce(e,t,plots$1.attributes,r,n)}var c=l("visible");l("type"),l("name",n._traceWord+" "+i),l("uirevision",n.uirevision);var u=plots$1.getModule(t);if(t._module=u,u){var d=u.basePlotModule,h=d.attr,g=d.attributes;if(h&&g){var p=n._subplots,f="";if(c||"gl2d"!==d.name){if(Array.isArray(h))for(a=0;a<h.length;a++){var m=h[a],y=Lib$1E.coerce(e,t,g,m);p[m]&&Lib$1E.pushUnique(p[m],y),f+=y}else f=Lib$1E.coerce(e,t,g,h);p[d.name]&&Lib$1E.pushUnique(p[d.name],f)}}}return c&&(l("customdata"),l("ids"),l("meta"),Registry$L.traceIs(t,"showLegend")?(Lib$1E.coerce(e,t,u.attributes.showlegend?u.attributes:plots$1.attributes,"showlegend"),l("legendwidth"),l("legendgroup"),l("legendgrouptitle.text"),l("legendrank"),t._dfltShowLegend=!0):t._dfltShowLegend=!1,u&&u.supplyDefaults(e,t,s,n),Registry$L.traceIs(t,"noOpacity")||l("opacity"),Registry$L.traceIs(t,"notLegendIsolatable")&&(t.visible=!!t.visible),Registry$L.traceIs(t,"noHover")||(t.hovertemplate||Lib$1E.coerceHoverinfo(e,t,n),"parcats"!==t.type&&Registry$L.getComponentMethod("fx","supplyDefaults")(e,t,s,n)),u&&u.selectPoints&&l("selectedpoints"),plots$1.supplyTransformDefaults(e,t,n)),t},plots$1.hasMakesDataTransform=hasMakesDataTransform,plots$1.supplyTransformDefaults=function(e,t,r){if(t._length||hasMakesDataTransform(e)){var n=r._globalTransforms||[],i=r._transformModules||[];if(Array.isArray(e.transforms)||0!==n.length)for(var a=e.transforms||[],o=n.concat(a),s=t.transforms=[],l=0;l<o.length;l++){var c,u=o[l],d=u.type,h=transformsRegistry[d],g=!(u._module&&u._module===h),p=h&&"function"==typeof h.transform;h||Lib$1E.warn("Unrecognized transform type "+d+"."),h&&h.supplyDefaults&&(g||p)?((c=h.supplyDefaults(u,t,r,e)).type=d,c._module=h,Lib$1E.pushUnique(i,h)):c=Lib$1E.extendFlat({},u),s.push(c)}}},plots$1.supplyLayoutGlobalDefaults=function(e,t,r){function n(r,n){return Lib$1E.coerce(e,t,plots$1.layoutAttributes,r,n)}var i=e.template;Lib$1E.isPlainObject(i)&&(t.template=i,t._template=i.layout,t._dataTemplate=i.data),n("autotypenumbers");var a=Lib$1E.coerceFont(n,"font"),o=a.size;Lib$1E.coerceFont(n,"title.font",Lib$1E.extendFlat({},a,{size:Math.round(1.4*o)})),n("title.text",t._dfltTitle.plot),n("title.xref");var s=n("title.yref");n("title.pad.t"),n("title.pad.r"),n("title.pad.b"),n("title.pad.l");var l=n("title.automargin");n("title.x"),n("title.xanchor"),n("title.y"),n("title.yanchor"),l&&("paper"===s&&(0!==t.title.y&&(t.title.y=1),"auto"===t.title.yanchor&&(t.title.yanchor=0===t.title.y?"top":"bottom")),"container"===s&&("auto"===t.title.y&&(t.title.y=1),"auto"===t.title.yanchor&&(t.title.yanchor=t.title.y<.5?"bottom":"top"))),n("uniformtext.mode")&&n("uniformtext.minsize"),n("autosize",!(e.width&&e.height)),n("width"),n("height"),n("minreducedwidth"),n("minreducedheight"),n("margin.l"),n("margin.r"),n("margin.t"),n("margin.b"),n("margin.pad"),n("margin.autoexpand"),e.width&&e.height&&plots$1.sanitizeMargins(t),Registry$L.getComponentMethod("grid","sizeDefaults")(e,t),n("paper_bgcolor"),n("separators",r.decimal+r.thousands),n("hidesources"),n("colorway"),n("datarevision");var c=n("uirevision");n("editrevision",c),n("selectionrevision",c),Registry$L.getComponentMethod("modebar","supplyLayoutDefaults")(e,t),Registry$L.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(e,t,n),Registry$L.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(e,t,n),n("meta"),Lib$1E.isPlainObject(e.transition)&&(n("transition.duration"),n("transition.easing"),n("transition.ordering")),Registry$L.getComponentMethod("calendars","handleDefaults")(e,t,"calendar"),Registry$L.getComponentMethod("fx","supplyLayoutGlobalDefaults")(e,t,n),Lib$1E.coerce(e,t,scatterAttrs$2,"scattermode")},plots$1.plotAutoSize=function(e,t,r){var n,i,a=e._context||{},o=a.frameMargins,s=Lib$1E.isPlotDiv(e);if(s&&e.emit("plotly_autosize"),a.fillFrame)n=window.innerWidth,i=window.innerHeight,document.body.style.overflow="hidden";else{var l=s?window.getComputedStyle(e):{};if(n=getComputedSize(l.width)||getComputedSize(l.maxWidth)||r.width,i=getComputedSize(l.height)||getComputedSize(l.maxHeight)||r.height,isNumeric$p(o)&&o>0){var c=1-2*o;n=Math.round(c*n),i=Math.round(c*i)}}var u=plots$1.layoutAttributes.width.min,d=plots$1.layoutAttributes.height.min;n<u&&(n=u),i<d&&(i=d);var h=!t.width&&Math.abs(r.width-n)>1,g=!t.height&&Math.abs(r.height-i)>1;(g||h)&&(h&&(r.width=n),g&&(r.height=i)),e._initialAutoSize||(e._initialAutoSize={width:n,height:i}),plots$1.sanitizeMargins(r)},plots$1.supplyLayoutModuleDefaults=function(e,t,r,n){var i,a,o,s=Registry$L.componentsRegistry,l=t._basePlotModules,c=Registry$L.subplotsRegistry.cartesian;for(i in s)(o=s[i]).includeBasePlot&&o.includeBasePlot(e,t);for(var u in l.length||l.push(c),t._has("cartesian")&&(Registry$L.getComponentMethod("grid","contentDefaults")(e,t),c.finalizeSubplots(e,t)),t._subplots)t._subplots[u].sort(Lib$1E.subplotSort);for(a=0;a<l.length;a++)(o=l[a]).supplyLayoutDefaults&&o.supplyLayoutDefaults(e,t,r);var d=t._modules;for(a=0;a<d.length;a++)(o=d[a]).supplyLayoutDefaults&&o.supplyLayoutDefaults(e,t,r);var h=t._transformModules;for(a=0;a<h.length;a++)(o=h[a]).supplyLayoutDefaults&&o.supplyLayoutDefaults(e,t,r,n);for(i in s)(o=s[i]).supplyLayoutDefaults&&o.supplyLayoutDefaults(e,t,r)},plots$1.purge=function(e){var t=e._fullLayout||{};void 0!==t._glcontainer&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),Lib$1E.clearThrottle(),Lib$1E.clearResponsive(e),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._dragdata,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()},plots$1.style=function(e){var t,r=e._fullLayout._visibleModules,n=[];for(t=0;t<r.length;t++){var i=r[t];i.style&&Lib$1E.pushUnique(n,i.style)}for(t=0;t<n.length;t++)n[t](e)},plots$1.sanitizeMargins=function(e){if(e&&e.margin){var t,r=e.width,n=e.height,i=e.margin,a=r-(i.l+i.r),o=n-(i.t+i.b);a<0&&(t=(r-1)/(i.l+i.r),i.l=Math.floor(t*i.l),i.r=Math.floor(t*i.r)),o<0&&(t=(n-1)/(i.t+i.b),i.t=Math.floor(t*i.t),i.b=Math.floor(t*i.b))}},plots$1.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}},plots$1.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};var MIN_SPECIFIED_WIDTH=2,MIN_SPECIFIED_HEIGHT=2;function needsRedrawForShift(e){if("_redrawFromAutoMarginCount"in e._fullLayout)return!1;var t=axisIDs$1.list(e,"",!0);for(var r in t)if(t[r].autoshift||t[r].shift)return!0;return!1}function refineTicks(e){var t=axisIDs$1.list(e,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach((function(e){for(var r=0;r<t.length;r++){var n=t[r][e];n&&n()}}))}plots$1.autoMargin=function(e,t,r){var n=e._fullLayout,i=n.width,a=n.height,o=n.margin,s=n.minreducedwidth,l=n.minreducedheight,c=Lib$1E.constrain(i-o.l-o.r,MIN_SPECIFIED_WIDTH,s),u=Lib$1E.constrain(a-o.t-o.b,MIN_SPECIFIED_HEIGHT,l),d=Math.max(0,i-c),h=Math.max(0,a-u),g=n._pushmargin,p=n._pushmarginIds;if(!1!==o.autoexpand){if(r){var f=r.pad;if(void 0===f&&(f=Math.min(12,o.l,o.r,o.t,o.b)),d){var m=(r.l+r.r)/d;m>1&&(r.l/=m,r.r/=m)}if(h){var y=(r.t+r.b)/h;y>1&&(r.t/=y,r.b/=y)}var b=void 0!==r.xl?r.xl:r.x,v=void 0!==r.xr?r.xr:r.x,x=void 0!==r.yt?r.yt:r.y,B=void 0!==r.yb?r.yb:r.y;g[t]={l:{val:b,size:r.l+f},r:{val:v,size:r.r+f},b:{val:B,size:r.b+f},t:{val:x,size:r.t+f}},p[t]=1}else delete g[t],delete p[t];if(!n._replotting)return plots$1.doAutoMargin(e)}},plots$1.doAutoMargin=function(e){var t=e._fullLayout,r=t.width,n=t.height;t._size||(t._size={}),initMargins(t);var i=t._size,a=t.margin,o={t:0,b:0,l:0,r:0},s=Lib$1E.extendFlat({},i),l=e._fullLayout._reservedMargin;for(var c in l)for(var u in l[c]){var d=l[c][u];o[u]=Math.max(o[u],d)}var h=a.l,g=a.r,p=a.t,f=a.b,m=t._pushmargin,y=t._pushmarginIds,b=t.minreducedwidth,v=t.minreducedheight;if(!1!==t.margin.autoexpand){for(var x in m)y[x]||delete m[x];for(var B in m.base={l:{val:0,size:h},r:{val:1,size:g},t:{val:1,size:p},b:{val:0,size:f}},m){var I=m[B].l||{},F=m[B].b||{},A=I.val,C=I.size,w=F.val,Q=F.size,U=r-o.r-o.l,S=n-o.t-o.b;for(var E in m){if(isNumeric$p(C)&&m[E].r){var L=m[E].r.val,_=m[E].r.size;if(L>A){var T=(C*L+(_-U)*A)/(L-A),R=(_*(1-A)+(C-U)*(1-L))/(L-A);T+R>h+g&&(h=T,g=R)}}if(isNumeric$p(Q)&&m[E].t){var $=m[E].t.val,k=m[E].t.size;if($>w){var N=(Q*$+(k-S)*w)/($-w),G=(k*(1-w)+(Q-S)*(1-$))/($-w);N+G>f+p&&(f=N,p=G)}}}}}var M=Lib$1E.constrain(r-a.l-a.r,MIN_SPECIFIED_WIDTH,b),D=Lib$1E.constrain(n-a.t-a.b,MIN_SPECIFIED_HEIGHT,v),V=Math.max(0,r-M),H=Math.max(0,n-D);if(V){var X=(h+g)/V;X>1&&(h/=X,g/=X)}if(H){var O=(f+p)/H;O>1&&(f/=O,p/=O)}if(i.l=Math.round(h)+o.l,i.r=Math.round(g)+o.r,i.t=Math.round(p)+o.t,i.b=Math.round(f)+o.b,i.p=Math.round(a.pad),i.w=Math.round(r)-i.l-i.r,i.h=Math.round(n)-i.t-i.b,!t._replotting&&(plots$1.didMarginChange(s,i)||needsRedrawForShift(e))){"_redrawFromAutoMarginCount"in t?t._redrawFromAutoMarginCount++:t._redrawFromAutoMarginCount=1;var Z=3*(1+Object.keys(y).length);if(t._redrawFromAutoMarginCount<Z)return Registry$L.call("_doPlot",e);t._size=s,Lib$1E.warn("Too many auto-margin redraws.")}refineTicks(e)};var marginKeys=["l","r","t","b","p","w","h"];function _transition(e,t,r){var n=!1;var i=[plots$1.previousPromises,function(){if(e._transitionData)return e._transitioning=!1,function(e){var t=Promise.resolve();if(!e)return t;for(;e.length;)t=t.then(e.shift());return t}(e._transitionData._interruptCallbacks)},r.prepareFn,plots$1.rehover,plots$1.reselect,function(){return e.emit("plotly_transitioning",[]),new Promise((function(i){e._transitioning=!0,t.duration>0&&(e._transitioningWithDuration=!0),e._transitionData._interruptCallbacks.push((function(){n=!0})),r.redraw&&e._transitionData._interruptCallbacks.push((function(){return Registry$L.call("redraw",e)})),e._transitionData._interruptCallbacks.push((function(){e.emit("plotly_transitioninterrupted",[])}));var a=0,o=0;function s(){return a++,function(){o++,n||o!==a||function(t){if(!e._transitionData)return;(function(e){if(e)for(;e.length;)e.shift()})(e._transitionData._interruptCallbacks),Promise.resolve().then((function(){if(r.redraw)return Registry$L.call("redraw",e)})).then((function(){e._transitioning=!1,e._transitioningWithDuration=!1,e.emit("plotly_transitioned",[])})).then(t)}(i)}}r.runFn(s),setTimeout(s())}))}],a=Lib$1E.syncOrAsync(i,e);return a&&a.then||(a=Promise.resolve()),a.then((function(){return e}))}plots$1.didMarginChange=function(e,t){for(var r=0;r<marginKeys.length;r++){var n=marginKeys[r],i=e[n],a=t[n];if(!isNumeric$p(i)||Math.abs(a-i)>1)return!0}return!1},plots$1.graphJson=function(e,t,r,n,i,a){(i&&t&&!e._fullData||i&&!t&&!e._fullLayout)&&plots$1.supplyDefaults(e);var o=i?e._fullData:e.data,s=i?e._fullLayout:e.layout,l=(e._transitionData||{})._frames;function c(e,t){if("function"==typeof e)return t?"_function_":null;if(Lib$1E.isPlainObject(e)){var n,i={};return Object.keys(e).sort().forEach((function(a){if(-1===["_","["].indexOf(a.charAt(0)))if("function"!=typeof e[a]){if("keepdata"===r){if("src"===a.substr(a.length-3))return}else if("keepstream"===r){if("string"==typeof(n=e[a+"src"])&&n.indexOf(":")>0&&!Lib$1E.isPlainObject(e.stream))return}else if("keepall"!==r&&"string"==typeof(n=e[a+"src"])&&n.indexOf(":")>0)return;i[a]=c(e[a],t)}else t&&(i[a]="_function")})),i}return Array.isArray(e)?e.map((function(e){return c(e,t)})):Lib$1E.isTypedArray(e)?Lib$1E.simpleMap(e,Lib$1E.identity):Lib$1E.isJSDate(e)?Lib$1E.ms2DateTimeLocal(+e):e}var u={data:(o||[]).map((function(e){var r=c(e);return t&&delete r.fit,r}))};if(!t&&(u.layout=c(s),i)){var d=s._size;u.layout.computed={margin:{b:d.b,l:d.l,r:d.r,t:d.t}}}return l&&(u.frames=c(l)),a&&(u.config=c(e._context,!0)),"object"===n?u:JSON.stringify(u)},plots$1.modifyFrames=function(e,t){var r,n,i,a=e._transitionData._frames,o=e._transitionData._frameHash;for(r=0;r<t.length;r++)switch((n=t[r]).type){case"replace":i=n.value;var s=(a[n.index]||{}).name,l=i.name;a[n.index]=o[l]=i,l!==s&&(delete o[s],o[l]=i);break;case"insert":o[(i=n.value).name]=i,a.splice(n.index,0,i);break;case"delete":delete o[(i=a[n.index]).name],a.splice(n.index,1)}return Promise.resolve()},plots$1.computeFrame=function(e,t){var r,n,i,a,o=e._transitionData._frameHash;if(!t)throw new Error("computeFrame must be given a string frame name");var s=o[t.toString()];if(!s)return!1;for(var l=[s],c=[s.name];s.baseframe&&(s=o[s.baseframe.toString()])&&-1===c.indexOf(s.name);)l.push(s),c.push(s.name);for(var u={};s=l.pop();)if(s.layout&&(u.layout=plots$1.extendLayout(u.layout,s.layout)),s.data){if(u.data||(u.data=[]),!(n=s.traces))for(n=[],r=0;r<s.data.length;r++)n[r]=r;for(u.traces||(u.traces=[]),r=0;r<s.data.length;r++)null!=(i=n[r])&&(-1===(a=u.traces.indexOf(i))&&(a=u.data.length,u.traces[a]=i),u.data[a]=plots$1.extendTrace(u.data[a],s.data[r]))}return u},plots$1.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},r=e._transitionData._frames,n=0;n<r.length;n++){var i=r[n];i&&i.name&&(t[i.name]=i)}},plots$1.extendObjectWithContainers=function(e,t,r){var n,i,a,o,s,l,c,u=Lib$1E.extendDeepNoArrays({},t||{}),d=Lib$1E.expandObjectPaths(u),h={};if(r&&r.length)for(a=0;a<r.length;a++)void 0===(i=(n=Lib$1E.nestedProperty(d,r[a])).get())?Lib$1E.nestedProperty(h,r[a]).set(null):(n.set(null),Lib$1E.nestedProperty(h,r[a]).set(i));if(e=Lib$1E.extendDeepNoArrays(e||{},d),r&&r.length)for(a=0;a<r.length;a++)if(l=Lib$1E.nestedProperty(h,r[a]).get()){for(c=(s=Lib$1E.nestedProperty(e,r[a])).get(),Array.isArray(c)||(c=[],s.set(c)),o=0;o<l.length;o++){var g=l[o];c[o]=null===g?null:plots$1.extendObjectWithContainers(c[o],g)}s.set(c)}return e},plots$1.dataArrayContainers=["transforms","dimensions"],plots$1.layoutArrayContainers=Registry$L.layoutArrayContainers,plots$1.extendTrace=function(e,t){return plots$1.extendObjectWithContainers(e,t,plots$1.dataArrayContainers)},plots$1.extendLayout=function(e,t){return plots$1.extendObjectWithContainers(e,t,plots$1.layoutArrayContainers)},plots$1.transition=function(e,t,r,n,i,a){var o={redraw:i.redraw},s={},l=[];return o.prepareFn=function(){for(var i=Array.isArray(t)?t.length:0,a=n.slice(0,i),o=0;o<a.length;o++){var c=a[o],u=e._fullData[c]._module;if(u){if(u.animatable){var d=u.basePlotModule.name;s[d]||(s[d]=[]),s[d].push(c)}e.data[a[o]]=plots$1.extendTrace(e.data[a[o]],t[o])}}var h=Lib$1E.expandObjectPaths(Lib$1E.extendDeepNoArrays({},r)),g=/^[xy]axis[0-9]*$/;for(var p in h)g.test(p)&&delete h[p].range;plots$1.extendLayout(e.layout,h),delete e.calcdata,plots$1.supplyDefaults(e),plots$1.doCalcdata(e);var f=Lib$1E.expandObjectPaths(r);if(f){var m=e._fullLayout._plots;for(var y in m){var b=m[y],v=b.xaxis,x=b.yaxis,B=v.range.slice(),I=x.range.slice(),F=null,A=null,C=null,w=null;Array.isArray(f[v._name+".range"])?F=f[v._name+".range"].slice():Array.isArray((f[v._name]||{}).range)&&(F=f[v._name].range.slice()),Array.isArray(f[x._name+".range"])?A=f[x._name+".range"].slice():Array.isArray((f[x._name]||{}).range)&&(A=f[x._name].range.slice()),B&&F&&(v.r2l(B[0])!==v.r2l(F[0])||v.r2l(B[1])!==v.r2l(F[1]))&&(C={xr0:B,xr1:F}),I&&A&&(x.r2l(I[0])!==x.r2l(A[0])||x.r2l(I[1])!==x.r2l(A[1]))&&(w={yr0:I,yr1:A}),(C||w)&&l.push(Lib$1E.extendFlat({plotinfo:b},C,w))}}return Promise.resolve()},o.runFn=function(t){var n,i,o=e._fullLayout._basePlotModules,c=l.length;if(r)for(i=0;i<o.length;i++)o[i].transitionAxes&&o[i].transitionAxes(e,l,a,t);for(var u in c?((n=Lib$1E.extendFlat({},a)).duration=0,delete s.cartesian):n=a,s){var d=s[u];e._fullData[d[0]]._module.basePlotModule.plot(e,d,n,t)}},_transition(e,a,o)},plots$1.transitionFromReact=function(e,t,r,n){var i=e._fullLayout,a=i.transition,o={},s=[];return o.prepareFn=function(){var e=i._plots;for(var a in o.redraw=!1,"some"===t.anim&&(o.redraw=!0),"some"===r.anim&&(o.redraw=!0),e){var l=e[a],c=l.xaxis,u=l.yaxis,d=n[c._name].range.slice(),h=n[u._name].range.slice(),g=c.range.slice(),p=u.range.slice();c.setScale(),u.setScale();var f=null,m=null;c.r2l(d[0])===c.r2l(g[0])&&c.r2l(d[1])===c.r2l(g[1])||(f={xr0:d,xr1:g}),u.r2l(h[0])===u.r2l(p[0])&&u.r2l(h[1])===u.r2l(p[1])||(m={yr0:h,yr1:p}),(f||m)&&s.push(Lib$1E.extendFlat({plotinfo:l},f,m))}return Promise.resolve()},o.runFn=function(r){for(var n,i,o,l=e._fullData,c=e._fullLayout._basePlotModules,u=[],d=0;d<l.length;d++)u.push(d);function h(){if(e._fullLayout)for(var t=0;t<c.length;t++)c[t].transitionAxes&&c[t].transitionAxes(e,s,n,r)}function g(){if(e._fullLayout)for(var t=0;t<c.length;t++)c[t].plot(e,o,i,r)}s.length&&t.anim?"traces first"===a.ordering?(n=Lib$1E.extendFlat({},a,{duration:0}),o=u,i=a,setTimeout(h,a.duration),g()):(n=a,o=null,i=Lib$1E.extendFlat({},a,{duration:0}),setTimeout(g,n.duration),h()):s.length?(n=a,h()):t.anim&&(o=u,i=a,g())},_transition(e,a,o)},plots$1.doCalcdata=function(e,t){var r,n,i,a,o=axisIDs$1.list(e),s=e._fullData,l=e._fullLayout,c=new Array(s.length),u=(e.calcdata||[]).slice();for(e.calcdata=c,l._numBoxes=0,l._numViolins=0,l._violinScaleGroupStats={},e._hmpixcount=0,e._hmlumcount=0,l._piecolormap={},l._sunburstcolormap={},l._treemapcolormap={},l._iciclecolormap={},l._funnelareacolormap={},i=0;i<s.length;i++)Array.isArray(t)&&-1===t.indexOf(i)&&(c[i]=u[i]);for(i=0;i<s.length;i++)(r=s[i])._arrayAttrs=PlotSchema$2.findArrayAttributes(r),r._extremes={};var d=l._subplots.polar||[];for(i=0;i<d.length;i++)o.push(l[d[i]].radialaxis,l[d[i]].angularaxis);for(var h in l._colorAxes){var g=l[h];!1!==g.cauto&&(delete g.cmin,delete g.cmax)}var p=!1;function f(t){if(r=s[t],n=r._module,!0===r.visible&&r.transforms){if(n&&n.calc){var i=n.calc(e,r);i[0]&&i[0].t&&i[0].t._scene&&delete i[0].t._scene.dirty}for(a=0;a<r.transforms.length;a++){var o=r.transforms[a];(n=transformsRegistry[o.type])&&n.calcTransform&&(r._hasCalcTransform=!0,p=!0,n.calcTransform(e,r,o))}}}function m(t,i){if(r=s[t],!!(n=r._module).isContainer===i){var o=[];if(!0===r.visible&&0!==r._length){delete r._indexToPoints;var l=r.transforms||[];for(a=l.length-1;a>=0;a--)if(l[a].enabled){r._indexToPoints=l[a]._indexToPoints;break}n&&n.calc&&(o=n.calc(e,r))}Array.isArray(o)&&o[0]||(o=[{x:BADNUM$8,y:BADNUM$8}]),o[0].t||(o[0].t={}),o[0].trace=r,c[t]=o}}for(setupAxisCategories(o,s,l),i=0;i<s.length;i++)m(i,!0);for(i=0;i<s.length;i++)f(i);for(p&&setupAxisCategories(o,s,l),i=0;i<s.length;i++)m(i,!0);for(i=0;i<s.length;i++)m(i,!1);doCrossTraceCalc(e);var y=sortAxisCategoriesByValue(o,e);if(y.length){for(l._numBoxes=0,l._numViolins=0,i=0;i<y.length;i++)m(y[i],!0);for(i=0;i<y.length;i++)m(y[i],!1);doCrossTraceCalc(e)}Registry$L.getComponentMethod("fx","calc")(e),Registry$L.getComponentMethod("errorbars","calc")(e)};var sortAxisCategoriesByValueRegex=/(total|sum|min|max|mean|median) (ascending|descending)/;function sortAxisCategoriesByValue(e,t){var r,n,i,a,o,s=[];function l(e,r,n){var i=r._id.charAt(0);if("histogram2dcontour"===e){var a=r._counterAxes[0],o=axisIDs$1.getFromId(t,a),s="x"===i||"x"===a&&"category"===o.type,l="y"===i||"y"===a&&"category"===o.type;return function(e,t){return 0===e||0===t||s&&e===n[t].length-1||l&&t===n.length-1?-1:("y"===i?t:e)-1}}return function(e,t){return"y"===i?t:e}}var c={min:function(e){return Lib$1E.aggNums(Math.min,null,e)},max:function(e){return Lib$1E.aggNums(Math.max,null,e)},sum:function(e){return Lib$1E.aggNums((function(e,t){return e+t}),null,e)},total:function(e){return Lib$1E.aggNums((function(e,t){return e+t}),null,e)},mean:function(e){return Lib$1E.mean(e)},median:function(e){return Lib$1E.median(e)}};for(r=0;r<e.length;r++){var u=e[r];if("category"===u.type){var d=u.categoryorder.match(sortAxisCategoriesByValueRegex);if(d){var h=d[1],g=d[2],p=u._id.charAt(0),f="x"===p,m=[];for(n=0;n<u._categories.length;n++)m.push([u._categories[n],[]]);for(n=0;n<u._traceIndices.length;n++){var y=u._traceIndices[n],b=t._fullData[y];if(!0===b.visible){var v=b.type;Registry$L.traceIs(b,"histogram")&&(delete b._xautoBinFinished,delete b._yautoBinFinished);var x="splom"===v,B="scattergl"===v,I=t.calcdata[y];for(i=0;i<I.length;i++){var F,A,C=I[i];if(x){var w=b._axesDim[u._id];if(!f){var Q=b._diag[w][0];Q&&(u=t._fullLayout[axisIDs$1.id2name(Q)])}var U=C.trace.dimensions[w].values;for(a=0;a<U.length;a++)for(F=u._categoriesMap[U[a]],o=0;o<C.trace.dimensions.length;o++)if(o!==w){var S=C.trace.dimensions[o];m[F][1].push(S.values[a])}}else if(B){for(a=0;a<C.t.x.length;a++)f?(F=C.t.x[a],A=C.t.y[a]):(F=C.t.y[a],A=C.t.x[a]),m[F][1].push(A);C.t&&C.t._scene&&delete C.t._scene.dirty}else if(C.hasOwnProperty("z")){A=C.z;var E=l(b.type,u,A);for(a=0;a<A.length;a++)for(o=0;o<A[a].length;o++)(F=E(o,a))+1&&m[F][1].push(A[a][o])}else for(void 0===(F=C.p)&&(F=C[p]),void 0===(A=C.s)&&(A=C.v),void 0===A&&(A=f?C.y:C.x),Array.isArray(A)||(A=void 0===A?[]:[A]),a=0;a<A.length;a++)m[F][1].push(A[a])}}}u._categoriesValue=m;var L=[];for(n=0;n<m.length;n++)L.push([m[n][0],c[h](m[n][1])]);L.sort((function(e,t){return e[1]-t[1]})),u._categoriesAggregatedValue=L,u._initialCategories=L.map((function(e){return e[0]})),"descending"===g&&u._initialCategories.reverse(),s=s.concat(u.sortByInitialCategories())}}}return s}function setupAxisCategories(e,t,r){var n={};function i(e){e.clearCalc(),"multicategory"===e.type&&e.setupMultiCategory(t),n[e._id]=1}Lib$1E.simpleMap(e,i);for(var a=r._axisMatchGroups||[],o=0;o<a.length;o++)for(var s in a[o])n[s]||i(r[axisIDs$1.id2name(s)])}function doCrossTraceCalc(e){var t,r,n,i=e._fullLayout,a=i._visibleModules,o={};for(r=0;r<a.length;r++){var s=a[r],l=s.crossTraceCalc;if(l){var c=s.basePlotModule.name;o[c]?Lib$1E.pushUnique(o[c],l):o[c]=[l]}}for(n in o){var u=o[n],d=i._subplots[n];if(Array.isArray(d))for(t=0;t<d.length;t++){var h=d[t],g="cartesian"===n?i._plots[h]:i[h];for(r=0;r<u.length;r++)u[r](e,g,h)}else for(r=0;r<u.length;r++)u[r](e)}}plots$1.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()},plots$1.redrag=function(e){e._fullLayout._redrag&&e._fullLayout._redrag()},plots$1.reselect=function(e){var t=e._fullLayout,r=(e.layout||{}).selections,n=t._previousSelections;t._previousSelections=r;var i=t._reselect||JSON.stringify(r)!==JSON.stringify(n);Registry$L.getComponentMethod("selections","reselect")(e,i)},plots$1.generalUpdatePerTraceModule=function(e,t,r,n){var i,a=t.traceHash,o={};for(i=0;i<r.length;i++){var s=r[i],l=s[0].trace;l.visible&&(o[l.type]=o[l.type]||[],o[l.type].push(s))}for(var c in a)if(!o[c]){var u=a[c][0];u[0].trace.visible=!1,o[c]=[u]}for(var d in o){var h=o[d];h[0][0].trace._module.plot(e,t,Lib$1E.filterVisible(h),n)}t.traceHash=o},plots$1.plotBasePlot=function(e,t,r,n,i){var a=Registry$L.getModule(e),o=getModuleCalcData$1(t.calcdata,a)[0];a.plot(t,o,n,i)},plots$1.cleanBasePlot=function(e,t,r,n,i){var a=i._has&&i._has(e),o=r._has&&r._has(e);a&&!o&&i["_"+e+"layer"].selectAll("g.trace").remove()};var axesExports={},axes$1={get exports(){return axesExports},set exports(e){axesExports=e}},svg_text_utils={},xmlns_namespaces={};!function(e){e.xmlns="http://www.w3.org/2000/xmlns/",e.svg="http://www.w3.org/2000/svg",e.xlink="http://www.w3.org/1999/xlink",e.svgAttrs={xmlns:e.svg,"xmlns:xlink":e.xlink}}(xmlns_namespaces);var alignment$1={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}};!function(e){var t=d3Exports,r=libExports,n=r.strTranslate,i=xmlns_namespaces,a=alignment$1.LINE_SPACING,o=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;e.convertToTspans=function(p,C,w){var S=p.text(),E=!p.attr("data-notex")&&C&&C._context.typesetMath&&"undefined"!=typeof MathJax&&S.match(o),L=t.select(p.node().parentNode);if(!L.empty()){var _=p.attr("class")?p.attr("class").split(" ")[0]:"text";return _+="-math",L.selectAll("svg."+_).remove(),L.selectAll("g."+_+"-group").remove(),p.style("display",null).attr({"data-unformatted":S,"data-math":"N"}),E?(C&&C._promises||[]).push(new Promise((function(e){p.style("display","none");var i=parseInt(p.node().style.fontSize,10),a={fontSize:i};!function(e,n,i){var a,o,u,d,h=parseInt((MathJax.version||"").split(".")[0]);if(2!==h&&3!==h)return void r.warn("No MathJax version:",MathJax.version);var g=function(){return o=r.extendDeepAll({},MathJax.Hub.config),u=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:c},displayAlign:"left"})},p=function(){o=r.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=c},f=function(){if("SVG"!==(a=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},m=function(){"svg"!==(a=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg")},y=function(){var i="math-output-"+r.randstr({},64);d=t.select("body").append("div").attr({id:i}).style({visibility:"hidden",position:"absolute","font-size":n.fontSize+"px"}).text(function(e){return e.replace(s,"\\lt ").replace(l,"\\gt ")}(e));var a=d.node();return 2===h?MathJax.Hub.Typeset(a):MathJax.typeset([a])},b=function(){var n=d.select(2===h?".MathJax_SVG":".MathJax"),a=!n.empty()&&d.select("svg").node();if(a){var o,s=a.getBoundingClientRect();o=2===h?t.select("body").select("#MathJax_SVG_glyphs"):n.select("defs"),i(n,o,s)}else r.log("There was an error in the tex syntax.",e),i();d.remove()},v=function(){if("SVG"!==a)return MathJax.Hub.setRenderer(a)},x=function(){"svg"!==a&&(MathJax.config.startup.output=a)},B=function(){return void 0!==u&&(MathJax.Hub.processSectionDelay=u),MathJax.Hub.Config(o)},I=function(){MathJax.config=o};2===h?MathJax.Hub.Queue(g,f,y,b,v,B):3===h&&(p(),m(),MathJax.startup.defaultReady(),MathJax.startup.promise.then((function(){y(),b(),x(),I()})))}(E[2],a,(function(t,r,a){L.selectAll("svg."+_).remove(),L.selectAll("g."+_+"-group").remove();var o=t&&t.select("svg");if(!o||!o.node())return T(),void e();var s=L.append("g").classed(_+"-group",!0).attr({"pointer-events":"none","data-unformatted":S,"data-math":"Y"});s.node().appendChild(o.node()),r&&r.node()&&o.node().insertBefore(r.node().cloneNode(!0),o.node().firstChild);var l=a.width,c=a.height;o.attr({class:_,height:c,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var u=p.node().style.fill||"black",d=o.select("g");d.attr({fill:u,stroke:u});var h=d.node().getBoundingClientRect(),g=h.width,f=h.height;(g>l||f>c)&&(o.style("overflow","hidden"),g=(h=o.node().getBoundingClientRect()).width,f=h.height);var m=+p.attr("x"),y=+p.attr("y"),b=-(i||p.node().getBoundingClientRect().height)/4;if("y"===_[0])s.attr({transform:"rotate("+[-90,m,y]+")"+n(-g/2,b-f/2)});else if("l"===_[0])y=b-f/2;else if("a"===_[0]&&0!==_.indexOf("atitle"))m=0,y=b;else{var v=p.attr("text-anchor");m-=g*("middle"===v?.5:"end"===v?1:0),y=y+b-f/2}o.attr({x:m,y:y}),w&&w.call(p,s),e(s)}))}))):T(),p}function T(){L.empty()||(_=p.attr("class")+"-math",L.select("svg."+_).remove()),p.text("").style("white-space","pre");var n=function(e,n){n=n.replace(f," ");var o,s=!1,l=[],c=-1;function p(){c++;var r=document.createElementNS(i.svg,"tspan");t.select(r).attr({class:"line",dy:c*a+"em"}),e.appendChild(r),o=r;var n=l;if(l=[{node:r}],n.length>1)for(var s=1;s<n.length;s++)C(n[s])}function C(e){var r,n=e.type,a={};if("a"===n){r="a";var s=e.target,c=e.href,u=e.popup;c&&(a={"xlink:xlink:show":"_blank"===s||"_"!==s.charAt(0)?"new":"replace",target:s,"xlink:xlink:href":c},u&&(a.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+u+'");return false;'))}else r="tspan";e.style&&(a.style=e.style);var p=document.createElementNS(i.svg,r);if("sup"===n||"sub"===n){w(o,g),o.appendChild(p);var f=document.createElementNS(i.svg,"tspan");w(f,g),t.select(f).attr("dy",h[n]),a.dy=d[n],o.appendChild(p),o.appendChild(f)}else o.appendChild(p);t.select(p).attr(a),o=e.node=p,l.push(e)}function w(e,t){e.appendChild(document.createTextNode(t))}function S(e){if(1!==l.length){var t=l.pop();e!==t.type&&r.log("Start tag <"+t.type+"> doesnt match end tag <"+e+">. Pretending it did match.",n),o=l[l.length-1].node}else r.log("Ignoring unexpected end tag </"+e+">.",n)}b.test(n)?p():(o=e,l=[{node:e}]);for(var E=n.split(m),L=0;L<E.length;L++){var _=E[L],T=_.match(y),R=T&&T[2].toLowerCase(),$=u[R];if("br"===R)p();else if(void 0===$)w(o,Q(_));else if(T[1])S(R);else{var k=T[4],N={type:R},G=F(k,v);if(G?(G=G.replace(A,"$1 fill:"),$&&(G+=";"+$)):$&&(G=$),G&&(N.style=G),"a"===R){s=!0;var M=F(k,x);if(M){var D=U(M);D&&(N.href=D,N.target=F(k,B)||"_blank",N.popup=F(k,I))}}C(N)}}return s}(p.node(),S);n&&p.style("pointer-events","all"),e.positionText(p),w&&w.call(p)}};var s=/(<|&lt;|&#60;)/g,l=/(>|&gt;|&#62;)/g;var c=[["$","$"],["\\(","\\)"]];var u={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},d={sub:"0.3em",sup:"-0.6em"},h={sub:"-0.21em",sup:"0.42em"},g="​",p=["http:","https:","mailto:","",void 0,":"],f=e.NEWLINES=/(\r\n?|\n)/g,m=/(<[^<>]*>)/,y=/<(\/?)([^ >]*)(\s+(.*))?>/i,b=/<br(\s+.*)?>/i;e.BR_TAG_ALL=/<br(\s+.*)?>/gi;var v=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,x=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,B=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,I=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function F(e,t){if(!e)return null;var r=e.match(t),n=r&&(r[3]||r[4]);return n&&Q(n)}var A=/(^|;)\s*color:/;e.plainText=function(e,t){for(var r=void 0!==(t=t||{}).len&&-1!==t.len?t.len:1/0,n=void 0!==t.allowedTags?t.allowedTags:["br"],i="...".length,a=e.split(m),o=[],s="",l=0,c=0;c<a.length;c++){var u=a[c],d=u.match(y),h=d&&d[2].toLowerCase();if(h)-1!==n.indexOf(h)&&(o.push(u),s=h);else{var g=u.length;if(l+g<r)o.push(u),l+=g;else if(l<r){var p=r-l;s&&("br"!==s||p<=i||g<=i)&&o.pop(),r>i?o.push(u.substr(0,p-i)+"..."):o.push(u.substr(0,p));break}s=""}}return o.join("")};var C={mu:"μ",amp:"&",lt:"<",gt:">",nbsp:" ",times:"×",plusmn:"±",deg:"°"},w=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function Q(e){return e.replace(w,(function(e,t){var r;return r="#"===t.charAt(0)?function(e){if(e>1114111)return;var t=String.fromCodePoint;if(t)return t(e);var r=String.fromCharCode;return e<=65535?r(e):r(55232+(e>>10),e%1024+56320)}("x"===t.charAt(1)?parseInt(t.substr(2),16):parseInt(t.substr(1),10)):C[t],r||e}))}function U(e){var t=encodeURI(decodeURI(e)),r=document.createElement("a"),n=document.createElement("a");r.href=e,n.href=t;var i=r.protocol,a=n.protocol;return-1!==p.indexOf(i)&&-1!==p.indexOf(a)?t:""}function S(e,t,n){var i,a,o,s=n.horizontalAlign,l=n.verticalAlign||"top",c=e.node().getBoundingClientRect(),u=t.node().getBoundingClientRect();return a="bottom"===l?function(){return c.bottom-i.height}:"middle"===l?function(){return c.top+(c.height-i.height)/2}:function(){return c.top},o="right"===s?function(){return c.right-i.width}:"center"===s?function(){return c.left+(c.width-i.width)/2}:function(){return c.left},function(){i=this.node().getBoundingClientRect();var e=o()-u.left,t=a()-u.top,s=n.gd||{};if(n.gd){s._fullLayout._calcInverseTransform(s);var l=r.apply3DTransform(s._fullLayout._invTransform)(e,t);e=l[0],t=l[1]}return this.style({top:t+"px",left:e+"px","z-index":1e3}),this}}e.convertEntities=Q,e.sanitizeHTML=function(e){e=e.replace(f," ");for(var r=document.createElement("p"),n=r,i=[],a=e.split(m),o=0;o<a.length;o++){var s=a[o],l=s.match(y),c=l&&l[2].toLowerCase();if(c in u)if(l[1])i.length&&(n=i.pop());else{var d=l[4],h=F(d,v),g=h?{style:h}:{};if("a"===c){var p=F(d,x);if(p){var b=U(p);if(b){g.href=b;var I=F(d,B);I&&(g.target=I)}}}var A=document.createElement(c);n.appendChild(A),t.select(A).attr(g),n=A,i.push(A)}else n.appendChild(document.createTextNode(Q(s)))}return r.innerHTML},e.lineCount=function(e){return e.selectAll("tspan.line").size()||1},e.positionText=function(e,r,n){return e.each((function(){var e=t.select(this);function i(t,r){return void 0===r?null===(r=e.attr(t))&&(e.attr(t,0),r=0):e.attr(t,r),r}var a=i("x",r),o=i("y",n);"text"===this.nodeName&&e.selectAll("tspan.line").attr({x:a,y:o})}))};var E="1px ";e.makeTextShadow=function(e){return E+E+E+e+", -"+E+"-"+E+E+e+", "+E+"-"+E+E+e+", -"+E+E+E+e},e.makeEditable=function(e,r){var n=r.gd,i=r.delegate,a=t.dispatch("edit","input","cancel"),o=i||e;if(e.style({"pointer-events":i?"none":"all"}),1!==e.size())throw new Error("boo");function s(){!function(){var i=t.select(n).select(".svg-container"),o=i.append("div"),s=e.node().style,c=parseFloat(s.fontSize||12),u=r.text;void 0===u&&(u=e.attr("data-unformatted"));o.classed("plugin-editable editable",!0).style({position:"absolute","font-family":s.fontFamily||"Arial","font-size":c,color:r.fill||s.fill||"black",opacity:1,"background-color":r.background||"transparent",outline:"#ffffff33 1px solid",margin:[-c/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(u).call(S(e,i,r)).on("blur",(function(){n._editing=!1,e.text(this.textContent).style({opacity:1});var r,i=t.select(this).attr("class");(r=i?"."+i.split(" ")[0]+"-math-group":"[class*=-math-group]")&&t.select(e.node().parentNode).select(r).style({opacity:0});var o=this.textContent;t.select(this).transition().duration(0).remove(),t.select(document).on("mouseup",null),a.edit.call(e,o)})).on("focus",(function(){var e=this;n._editing=!0,t.select(document).on("mouseup",(function(){if(t.event.target===e)return!1;document.activeElement===o.node()&&o.node().blur()}))})).on("keyup",(function(){27===t.event.which?(n._editing=!1,e.style({opacity:1}),t.select(this).style({opacity:0}).on("blur",(function(){return!1})).transition().remove(),a.cancel.call(e,this.textContent)):(a.input.call(e,this.textContent),t.select(this).call(S(e,i,r)))})).on("keydown",(function(){13===t.event.which&&this.blur()})).call(l)}(),e.style({opacity:0});var i,s=o.attr("class");(i=s?"."+s.split(" ")[0]+"-math-group":"[class*=-math-group]")&&t.select(e.node().parentNode).select(i).style({opacity:0})}function l(e){var t=e.node(),r=document.createRange();r.selectNodeContents(t);var n=window.getSelection();n.removeAllRanges(),n.addRange(r),t.focus()}return r.immediate?s():o.on("click",s),t.rebind(e,a,"on")}}(svg_text_utils);var drawingExports={},drawing$1={get exports(){return drawingExports},set exports(e){drawingExports=e}},d3$q=d3Exports,tinycolor$6=tinycolorExports,isNumeric$o=fastIsnumeric,Lib$1D=libExports,Color$A=colorExports,isValidScale$1=scales_1.isValid;function hasColorscale$5(e,t,r){var n=t?Lib$1D.nestedProperty(e,t).get()||{}:e,i=n[r||"color"],a=!1;if(Lib$1D.isArrayOrTypedArray(i))for(var o=0;o<i.length;o++)if(isNumeric$o(i[o])){a=!0;break}return Lib$1D.isPlainObject(n)&&(a||!0===n.showscale||isNumeric$o(n.cmin)&&isNumeric$o(n.cmax)||isValidScale$1(n.colorscale)||Lib$1D.isPlainObject(n.colorbar))}var constantAttrs=["showscale","autocolorscale","colorscale","reversescale","colorbar"],letterAttrs=["min","max","mid","auto"];function extractOpts$4(e){var t,r,n,i=e._colorAx,a=i||e,o={};for(r=0;r<constantAttrs.length;r++)o[n=constantAttrs[r]]=a[n];if(i)for(t="c",r=0;r<letterAttrs.length;r++)o[n=letterAttrs[r]]=a["c"+n];else{var s;for(r=0;r<letterAttrs.length;r++)((s="c"+(n=letterAttrs[r]))in a||(s="z"+n)in a)&&(o[n]=a[s]);t=s.charAt(0)}return o._sync=function(e,r){var n=-1!==letterAttrs.indexOf(e)?t+e:e;a[n]=a["_"+n]=r},o}function extractScale(e){for(var t=extractOpts$4(e),r=t.min,n=t.max,i=t.reversescale?flipScale$1(t.colorscale):t.colorscale,a=i.length,o=new Array(a),s=new Array(a),l=0;l<a;l++){var c=i[l];o[l]=r+c[0]*(n-r),s[l]=c[1]}return{domain:o,range:s}}function flipScale$1(e){for(var t=e.length,r=new Array(t),n=t-1,i=0;n>=0;n--,i++){var a=e[n];r[i]=[1-a[0],a[1]]}return r}function makeColorScaleFunc(e,t){t=t||{};for(var r=e.domain,n=e.range,i=n.length,a=new Array(i),o=0;o<i;o++){var s=tinycolor$6(n[o]).toRgb();a[o]=[s.r,s.g,s.b,s.a]}var l,c=d3$q.scale.linear().domain(r).range(a).clamp(!0),u=t.noNumericCheck,d=t.returnArray;return l=u&&d?c:u?function(e){return colorArray2rbga(c(e))}:d?function(e){return isNumeric$o(e)?c(e):tinycolor$6(e).isValid()?e:Color$A.defaultLine}:function(e){return isNumeric$o(e)?colorArray2rbga(c(e)):tinycolor$6(e).isValid()?e:Color$A.defaultLine},l.domain=c.domain,l.range=function(){return n},l}function makeColorScaleFuncFromTrace(e,t){return makeColorScaleFunc(extractScale(e),t)}function colorArray2rbga(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return tinycolor$6(t).toRgbString()}var helpers$A={hasColorscale:hasColorscale$5,extractOpts:extractOpts$4,extractScale:extractScale,flipScale:flipScale$1,makeColorScaleFunc:makeColorScaleFunc,makeColorScaleFuncFromTrace:makeColorScaleFuncFromTrace},docs$2={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"},docs$1=docs$2,FORMAT_LINK$1=docs$1.FORMAT_LINK,DATE_FORMAT_LINK$1=docs$1.DATE_FORMAT_LINK;function axisHoverFormat$7(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?descriptionOnlyNumbers:descriptionWithDates$1)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}}function descriptionOnlyNumbers(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+FORMAT_LINK$1+"."].join(" ")}function descriptionWithDates$1(e,t){return descriptionOnlyNumbers(e,t)+[" And for dates see: "+DATE_FORMAT_LINK$1+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}var axis_format_attributes={axisHoverFormat:axisHoverFormat$7,descriptionOnlyNumbers:descriptionOnlyNumbers,descriptionWithDates:descriptionWithDates$1},fontAttrs$a=requireFont_attributes(),colorAttrs$4=attributes$L,dash$3=attributes$K.dash,extendFlat$f=extend.extendFlat,templatedArray$8=plot_template.templatedArray,descriptionWithDates=axis_format_attributes.descriptionWithDates,ONEDAY$3=numerical.ONEDAY,constants$J=constants$K,HOUR$1=constants$J.HOUR_PATTERN,DAY_OF_WEEK$1=constants$J.WEEKDAY_PATTERN,minorTickmode={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0},description:["Sets the tick mode for this axis.","If *auto*, the number of ticks is set via `nticks`.","If *linear*, the placement of the ticks is determined by","a starting position `tick0` and a tick step `dtick`","(*linear* is the default value if `tick0` and `dtick` are provided).","If *array*, the placement of the ticks is set via `tickvals`","and the tick text is `ticktext`.","(*array* is the default value if `tickvals` is provided)."].join(" ")},tickmode=extendFlat$f({},minorTickmode,{values:minorTickmode.values.slice().concat(["sync"]),description:[minorTickmode.description,"If *sync*, the number of ticks will sync with the overlayed axis","set by `overlaying` property."].join(" ")});function makeNticks(e){return{valType:"integer",min:0,dflt:e?5:0,editType:"ticks",description:["Specifies the maximum number of ticks for the particular axis.","The actual number of ticks will be chosen automatically to be","less than or equal to `nticks`.","Has an effect only if `tickmode` is set to *auto*."].join(" ")}}var tick0={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"},description:["Sets the placement of the first tick on this axis.","Use with `dtick`.","If the axis `type` is *log*, then you must take the log of your starting tick","(e.g. to set the starting tick to 100, set the `tick0` to 2)","except when `dtick`=*L<f>* (see `dtick` for more info).","If the axis `type` is *date*, it should be a date string, like date data.","If the axis `type` is *category*, it should be a number, using the scale where","each category is assigned a serial number from zero in the order it appears."].join(" ")},dtick={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"},description:["Sets the step in-between ticks on this axis. Use with `tick0`.","Must be a positive number, or special strings available to *log* and *date* axes.","If the axis `type` is *log*, then ticks are set every 10^(n*dtick) where n","is the tick number. For example,","to set a tick mark at 1, 10, 100, 1000, ... set dtick to 1.","To set tick marks at 1, 100, 10000, ... set dtick to 2.","To set tick marks at 1, 5, 25, 125, 625, 3125, ... set dtick to log_10(5), or 0.69897000433.","*log* has several special values; *L<f>*, where `f` is a positive number,","gives ticks linearly spaced in value (but not position).","For example `tick0` = 0.1, `dtick` = *L0.5* will put ticks at 0.1, 0.6, 1.1, 1.6 etc.","To show powers of 10 plus small digits between, use *D1* (all digits) or *D2* (only 2 and 5).","`tick0` is ignored for *D1* and *D2*.","If the axis `type` is *date*, then you must convert the time to milliseconds.","For example, to set the interval between ticks to one day,","set `dtick` to 86400000.0.","*date* also has special values *M<n>* gives ticks spaced by a number of months.","`n` must be a positive integer.","To set ticks on the 15th of every third month, set `tick0` to *2000-01-15* and `dtick` to *M3*.","To set ticks every 4 years, set `dtick` to *M48*"].join(" ")},tickvals={valType:"data_array",editType:"ticks",description:["Sets the values at which ticks on this axis appear.","Only has an effect if `tickmode` is set to *array*.","Used with `ticktext`."].join(" ")},ticks={valType:"enumerated",values:["outside","inside",""],editType:"ticks",description:["Determines whether ticks are drawn or not.","If **, this axis' ticks are not drawn.","If *outside* (*inside*), this axis' are drawn outside (inside)","the axis lines."].join(" ")};function makeTicklen(e){var t={valType:"number",min:0,editType:"ticks",description:"Sets the tick length (in px)."};return e||(t.dflt=5),t}function makeTickwidth(e){var t={valType:"number",min:0,editType:"ticks",description:"Sets the tick width (in px)."};return e||(t.dflt=1),t}var tickcolor={valType:"color",dflt:colorAttrs$4.defaultLine,editType:"ticks",description:"Sets the tick color."},gridcolor={valType:"color",dflt:colorAttrs$4.lightLine,editType:"ticks",description:"Sets the color of the grid lines."};function makeGridwidth(e){var t={valType:"number",min:0,editType:"ticks",description:"Sets the width (in px) of the grid lines."};return e||(t.dflt=1),t}var griddash=extendFlat$f({},dash$3,{editType:"ticks"}),showgrid={valType:"boolean",editType:"ticks",description:["Determines whether or not grid lines are drawn.","If *true*, the grid lines are drawn at every tick mark."].join(" ")},layout_attributes$3={visible:{valType:"boolean",editType:"plot",description:["A single toggle to hide the axis while preserving interaction like dragging.","Default is true when a cheater plot is present on the axis, otherwise","false"].join(" ")},color:{valType:"color",dflt:colorAttrs$4.defaultLine,editType:"ticks",description:["Sets default for all colors associated with this axis","all at once: line, font, tick, and grid colors.","Grid color is lightened by blending this with the plot background","Individual pieces can override this."].join(" ")},title:{text:{valType:"string",editType:"ticks",description:["Sets the title of this axis.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:fontAttrs$a({editType:"ticks",description:["Sets this axis' title font.","Note that the title's font used to be customized","by the now deprecated `titlefont` attribute."].join(" ")}),standoff:{valType:"number",min:0,editType:"ticks",description:["Sets the standoff distance (in px) between the axis labels and the title text","The default value is a function of the axis tick labels, the title `font.size`","and the axis `linewidth`.","Note that the axis title position is always constrained within the margins,","so the actual standoff distance is always less than the set or default value.","By setting `standoff` and turning on `automargin`, plotly.js will push the","margins to fit the axis title at given standoff distance."].join(" ")},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0,description:["Sets the axis type.","By default, plotly attempts to determined the axis type","by looking into the data of the traces that referenced","the axis in question."].join(" ")},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc",description:["Using *strict* a numeric string in trace data is not converted to a number.","Using *convert types* a numeric string in trace data may be","treated as a number during automatic axis `type` detection.","Defaults to layout.autotypenumbers."].join(" ")},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range of this axis is","computed in relation to the input data.","See `rangemode` for more info.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot",description:["If *normal*, the range is computed in relation to the extrema","of the input data.","If *tozero*`, the range extends to 0,","regardless of the input data","If *nonnegative*, the range is non-negative,","regardless of the input data.","Applies only to linear axes."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0,description:["Sets the range of this axis.","If the axis `type` is *log*, then you must take the log of your","desired range (e.g. to set the range from 1 to 100,","set the range from 0 to 2).","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},fixedrange:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not this axis is zoom-able.","If true, then zoom is disabled."].join(" ")},scaleanchor:{valType:"enumerated",values:[constants$J.idRegex.x.toString(),constants$J.idRegex.y.toString()],editType:"plot",description:["If set to another axis id (e.g. `x2`, `y`), the range of this axis","changes together with the range of the corresponding axis","such that the scale of pixels per unit is in a constant ratio.","Both axes are still zoomable, but when you zoom one, the other will","zoom the same amount, keeping a fixed midpoint.","`constrain` and `constraintoward` determine how we enforce the constraint.","You can chain these, ie `yaxis: {scaleanchor: *x*}, xaxis2: {scaleanchor: *y*}`","but you can only link axes of the same `type`.","The linked axis can have the opposite letter (to constrain the aspect ratio)","or the same letter (to match scales across subplots).","Loops (`yaxis: {scaleanchor: *x*}, xaxis: {scaleanchor: *y*}` or longer) are redundant","and the last constraint encountered will be ignored to avoid possible","inconsistent constraints via `scaleratio`.","Note that setting axes simultaneously in both a `scaleanchor` and a `matches` constraint","is currently forbidden."].join(" ")},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot",description:["If this axis is linked to another by `scaleanchor`, this determines the pixel","to unit scale ratio. For example, if this value is 10, then every unit on","this axis spans 10 times the number of pixels as a unit on the linked axis.","Use this for example to create an elevation profile where the vertical scale","is exaggerated a fixed amount with respect to the horizontal."].join(" ")},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines how that happens:","by increasing the *range*, or by decreasing the *domain*.","Default is *domain* for axes containing image traces, *range* otherwise."].join(" ")},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines which direction we push","the originally specified plot area. Options are *left*, *center* (default),","and *right* for x axes, and *top*, *middle* (default), and *bottom* for y axes."].join(" ")},matches:{valType:"enumerated",values:[constants$J.idRegex.x.toString(),constants$J.idRegex.y.toString()],editType:"calc",description:["If set to another axis id (e.g. `x2`, `y`), the range of this axis","will match the range of the corresponding axis in data-coordinates space.","Moreover, matching axes share auto-range values, category lists and","histogram auto-bins.","Note that setting axes simultaneously in both a `scaleanchor` and a `matches` constraint","is currently forbidden.","Moreover, note that matching axes must have the same `type`."].join(" ")},rangebreaks:templatedArray$8("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this axis rangebreak is enabled or disabled.","Please note that `rangebreaks` only work for *date* axis type."].join(" ")},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc",description:["Sets the lower and upper bounds of this axis rangebreak.","Can be used with `pattern`."].join(" ")},pattern:{valType:"enumerated",values:[DAY_OF_WEEK$1,HOUR$1,""],editType:"calc",description:["Determines a pattern on the time line that generates breaks.","If *"+DAY_OF_WEEK$1+"* - days of the week in English e.g. 'Sunday' or `sun`","(matching is case-insensitive and considers only the first three characters),","as well as Sunday-based integers between 0 and 6.","If *"+HOUR$1+"* - hour (24-hour clock) as decimal numbers between 0 and 24.","for more info.","Examples:","- { pattern: '"+DAY_OF_WEEK$1+"', bounds: [6, 1] }"," or simply { bounds: ['sat', 'mon'] }","  breaks from Saturday to Monday (i.e. skips the weekends).","- { pattern: '"+HOUR$1+"', bounds: [17, 8] }","  breaks from 5pm to 8am (i.e. skips non-work hours)."].join(" ")},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"},description:["Sets the coordinate values corresponding to the rangebreaks.","An alternative to `bounds`.","Use `dvalue` to set the size of the values along the axis."].join(" ")},dvalue:{valType:"number",editType:"calc",min:0,dflt:ONEDAY$3,description:["Sets the size of each `values` item.","The default is one day in milliseconds."].join(" ")},editType:"calc"}),tickmode:tickmode,nticks:makeNticks(),tick0:tick0,dtick:dtick,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks",description:["Sets the spacing between tick labels as compared to the spacing between ticks.","A value of 1 (default) means each tick gets a label.","A value of 2 means shows every 2nd label.","A larger value n means only every nth tick is labeled.","`tick0` determines which labels are shown.","Not implemented for axes with `type` *log* or *multicategory*, or when `tickmode` is *array*."].join(" ")},tickvals:tickvals,ticktext:{valType:"data_array",editType:"ticks",description:["Sets the text displayed at the ticks position via `tickvals`.","Only has an effect if `tickmode` is set to *array*.","Used with `tickvals`."].join(" ")},ticks:ticks,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks",description:["Determines where ticks and grid lines are drawn with respect to their","corresponding tick labels.","Only has an effect for axes of `type` *category* or *multicategory*.","When set to *boundaries*, ticks and grid lines are drawn half a category","to the left/bottom of labels."].join(" ")},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks",description:["Determines where tick labels are drawn with respect to their","corresponding ticks and grid lines.","Only has an effect for axes of `type` *date*","When set to *period*, tick labels are drawn in the middle of the period","between ticks."].join(" ")},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc",description:["Determines where tick labels are drawn with respect to the axis","Please note that","top or bottom has no effect on x axes or when `ticklabelmode` is set to *period*.","Similarly","left or right has no effect on y axes or when `ticklabelmode` is set to *period*.","Has no effect on *multicategory* axes or when `tickson` is set to *boundaries*.","When used on axes linked by `matches` or `scaleanchor`,","no extra padding for inside labels would be added by autorange,","so that the scales could match."].join(" ")},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc",description:["Determines how we handle tick labels that would overflow either the graph div or the domain of the axis.","The default value for inside tick labels is *hide past domain*.","Otherwise on *category* and *multicategory* axes the default is *allow*.","In other cases the default is *hide past div*."].join(" ")},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle",description:["Determines if the axis lines or/and ticks are mirrored to","the opposite side of the plotting area.","If *true*, the axis lines are mirrored.","If *ticks*, the axis lines and ticks are mirrored.","If *false*, mirroring is disable.","If *all*, axis lines are mirrored on all shared-axes subplots.","If *allticks*, axis lines and ticks are mirrored","on all shared-axes subplots."].join(" ")},ticklen:makeTicklen(),tickwidth:makeTickwidth(),tickcolor:tickcolor,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks",description:"Determines whether or not the tick labels are drawn."},labelalias:{valType:"any",dflt:!1,editType:"ticks",description:["Replacement text for specific tick or hover labels.","For example using {US: 'USA', CA: 'Canada'} changes US to USA","and CA to Canada. The labels we would have shown must match","the keys exactly, after adding any tickprefix or ticksuffix.","labelalias can be used with any axis type, and both keys (if needed)","and values (if desired) can include html-like tags or MathJax."].join(" ")},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks",description:["Determines whether long tick labels automatically grow the figure","margins."].join(" ")},showspikes:{valType:"boolean",dflt:!1,editType:"modebar",description:["Determines whether or not spikes (aka droplines) are drawn for this axis.","Note: This only takes affect when hovermode = closest"].join(" ")},spikecolor:{valType:"color",dflt:null,editType:"none",description:"Sets the spike color. If undefined, will use the series color"},spikethickness:{valType:"number",dflt:3,editType:"none",description:"Sets the width (in px) of the zero line."},spikedash:extendFlat$f({},dash$3,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none",description:["Determines the drawing mode for the spike line","If *toaxis*, the line is drawn from the data point to the axis the ","series is plotted on.","If *across*, the line is drawn across the entire plot area, and","supercedes *toaxis*.","If *marker*, then a marker dot is drawn on the axis the series is","plotted on"].join(" ")},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none",description:"Determines whether spikelines are stuck to the cursor or to the closest datapoints."},tickfont:fontAttrs$a({editType:"ticks",description:"Sets the tick font."}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks",description:["Sets the angle of the tick labels with respect to the horizontal.","For example, a `tickangle` of -90 draws the tick labels","vertically."].join(" ")},tickprefix:{valType:"string",dflt:"",editType:"ticks",description:"Sets a tick label prefix."},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:["If *all*, all tick labels are displayed with a prefix.","If *first*, only the first tick is displayed with a prefix.","If *last*, only the last tick is displayed with a suffix.","If *none*, tick prefixes are hidden."].join(" ")},ticksuffix:{valType:"string",dflt:"",editType:"ticks",description:"Sets a tick label suffix."},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:"Same as `showtickprefix` but for tick suffixes."},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:["If *all*, all exponents are shown besides their significands.","If *first*, only the exponent of the first tick is shown.","If *last*, only the exponent of the last tick is shown.","If *none*, no exponents appear."].join(" ")},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks",description:["Determines a formatting rule for the tick exponents.","For example, consider the number 1,000,000,000.","If *none*, it appears as 1,000,000,000.","If *e*, 1e+9.","If *E*, 1E+9.","If *power*, 1x10^9 (with 9 in a super script).","If *SI*, 1G.","If *B*, 1B."].join(" ")},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks",description:["Hide SI prefix for 10^n if |n| is below this number.","This only has an effect when `tickformat` is *SI* or *B*."].join(" ")},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks",description:['If "true", even 4-digit integers are separated'].join(" ")},tickformat:{valType:"string",dflt:"",editType:"ticks",description:descriptionWithDates("tick label")},tickformatstops:templatedArray$8("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks",description:["Determines whether or not this stop is used.","If `false`, this stop is ignored even within its `dtickrange`."].join(" ")},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks",description:["range [*min*, *max*], where *min*, *max* - dtick values","which describe some zoom level, it is possible to omit *min*","or *max* value by passing *null*"].join(" ")},value:{valType:"string",dflt:"",editType:"ticks",description:["string - dtickformat for described zoom level, the same as *tickformat*"].join(" ")},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:descriptionWithDates("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle",description:["Determines whether or not a line bounding this axis is drawn."].join(" ")},linecolor:{valType:"color",dflt:colorAttrs$4.defaultLine,editType:"layoutstyle",description:"Sets the axis line color."},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle",description:"Sets the width (in px) of the axis line."},showgrid:showgrid,gridcolor:gridcolor,gridwidth:makeGridwidth(),griddash:griddash,zeroline:{valType:"boolean",editType:"ticks",description:["Determines whether or not a line is drawn at along the 0 value","of this axis.","If *true*, the zero line is drawn on top of the grid lines."].join(" ")},zerolinecolor:{valType:"color",dflt:colorAttrs$4.defaultLine,editType:"ticks",description:"Sets the line color of the zero line."},zerolinewidth:{valType:"number",dflt:1,editType:"ticks",description:"Sets the width (in px) of the zero line."},showdividers:{valType:"boolean",dflt:!0,editType:"ticks",description:["Determines whether or not a dividers are drawn","between the category levels of this axis.","Only has an effect on *multicategory* axes."].join(" ")},dividercolor:{valType:"color",dflt:colorAttrs$4.defaultLine,editType:"ticks",description:["Sets the color of the dividers","Only has an effect on *multicategory* axes."].join(" ")},dividerwidth:{valType:"number",dflt:1,editType:"ticks",description:["Sets the width (in px) of the dividers","Only has an effect on *multicategory* axes."].join(" ")},anchor:{valType:"enumerated",values:["free",constants$J.idRegex.x.toString(),constants$J.idRegex.y.toString()],editType:"plot",description:["If set to an opposite-letter axis id (e.g. `x2`, `y`), this axis is bound to","the corresponding opposite-letter axis.","If set to *free*, this axis' position is determined by `position`."].join(" ")},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot",description:["Determines whether a x (y) axis is positioned","at the *bottom* (*left*) or *top* (*right*)","of the plotting area."].join(" ")},overlaying:{valType:"enumerated",values:["free",constants$J.idRegex.x.toString(),constants$J.idRegex.y.toString()],editType:"plot",description:["If set a same-letter axis id, this axis is overlaid on top of","the corresponding same-letter axis, with traces and axes visible for both","axes.","If *false*, this axis does not overlay any same-letter axes.","In this case, for axes with overlapping domains only the highest-numbered","axis will be visible."].join(" ")},minor:{tickmode:minorTickmode,nticks:makeNticks("minor"),tick0:tick0,dtick:dtick,tickvals:tickvals,ticks:ticks,ticklen:makeTicklen("minor"),tickwidth:makeTickwidth("minor"),tickcolor:tickcolor,gridcolor:gridcolor,gridwidth:makeGridwidth("minor"),griddash:griddash,showgrid:showgrid,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot",description:["Sets the layer on which this axis is displayed.","If *above traces*, this axis is displayed above all the subplot's traces","If *below traces*, this axis is displayed below all the subplot's traces,","but above the grid lines.","Useful when used together with scatter-like traces with `cliponaxis`","set to *false* to show markers and/or text nodes above this axis."].join(" ")},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot",description:["Sets the domain of this axis (in plot fraction)."].join(" ")},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot",description:["Sets the position of this axis in the plotting space","(in normalized coordinates).","Only has an effect if `anchor` is set to *free*."].join(" ")},autoshift:{valType:"boolean",dflt:!1,editType:"plot",description:["Automatically reposition the axis to avoid","overlap with other axes with the same `overlaying` value.","This repositioning will account for any `shift` amount applied to other","axes on the same side with `autoshift` is set to true.","Only has an effect if `anchor` is set to *free*."].join(" ")},shift:{valType:"number",editType:"plot",description:["Moves the axis a given number of pixels from where it would have been otherwise.","Accepts both positive and negative values, which will shift the axis either right","or left, respectively.","If `autoshift` is set to true, then this defaults to a padding of -3 if `side` is set to *left*.","and defaults to +3 if `side` is set to *right*. Defaults to 0 if `autoshift` is set to false.","Only has an effect if `anchor` is set to *free*."].join(" ")},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc",description:["Specifies the ordering logic for the case of categorical variables.","By default, plotly uses *trace*, which specifies the order that is present in the data supplied.","Set `categoryorder` to *category ascending* or *category descending* if order should be determined by","the alphanumerical order of the category names.","Set `categoryorder` to *array* to derive the ordering from the attribute `categoryarray`. If a category","is not found in the `categoryarray` array, the sorting behavior for that attribute will be identical to","the *trace* mode. The unspecified categories will follow the categories in `categoryarray`.","Set `categoryorder` to *total ascending* or *total descending* if order should be determined by the","numerical order of the values.","Similarly, the order can be determined by the min, max, sum, mean or median of all the values."].join(" ")},categoryarray:{valType:"data_array",editType:"calc",description:["Sets the order in which categories on this axis appear.","Only has an effect if `categoryorder` is set to *array*.","Used with `categoryorder`."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `range`,","`autorange`, and `title` if in `editable: true` configuration.","Defaults to `layout.uirevision`."].join(" ")},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks",description:["Obsolete.","Set `tickmode` to *auto* for old `autotick` *true* behavior.","Set `tickmode` to *linear* for `autotick` *false*."].join(" ")},title:{valType:"string",editType:"ticks",description:["Value of `title` is no longer a simple *string* but a set of sub-attributes.","To set the axis' title, please use `title.text` now."].join(" ")},titlefont:fontAttrs$a({editType:"ticks",description:["Former `titlefont` is now the sub-attribute `font` of `title`.","To customize title font properties, please use `title.font` now."].join(" ")})}},axesAttrs=layout_attributes$3,fontAttrs$9=requireFont_attributes(),extendFlat$e=extend.extendFlat,overrideAll$9=edit_types.overrideAll,attributes$H=overrideAll$9({orientation:{valType:"enumerated",values:["h","v"],dflt:"v",description:"Sets the orientation of the colorbar."},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",description:["Determines whether this color bar's thickness","(i.e. the measure in the constant color direction)","is set in units of plot *fraction* or in *pixels*.","Use `thickness` to set the value."].join(" ")},thickness:{valType:"number",min:0,dflt:30,description:["Sets the thickness of the color bar","This measure excludes the size of the padding, ticks and labels."].join(" ")},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction",description:["Determines whether this color bar's length","(i.e. the measure in the color variation direction)","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,description:["Sets the length of the color bar","This measure excludes the padding of both ends.","That is, the color bar length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",min:-2,max:3,description:["Sets the x position of the color bar (in plot fraction).","Defaults to 1.02 when `orientation` is *v* and","0.5 when `orientation` is *h*."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],description:["Sets this color bar's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the color bar.","Defaults to *left* when `orientation` is *v* and","*center* when `orientation` is *h*."].join(" ")},xpad:{valType:"number",min:0,dflt:10,description:"Sets the amount of padding (in px) along the x direction."},y:{valType:"number",min:-2,max:3,description:["Sets the y position of the color bar (in plot fraction).","Defaults to 0.5 when `orientation` is *v* and","1.02 when `orientation` is *h*."].join(" ")},yanchor:{valType:"enumerated",values:["top","middle","bottom"],description:["Sets this color bar's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the color bar.","Defaults to *middle* when `orientation` is *v* and","*bottom* when `orientation` is *h*."].join(" ")},ypad:{valType:"number",min:0,dflt:10,description:"Sets the amount of padding (in px) along the y direction."},outlinecolor:axesAttrs.linecolor,outlinewidth:axesAttrs.linewidth,bordercolor:axesAttrs.linecolor,borderwidth:{valType:"number",min:0,dflt:0,description:["Sets the width (in px) or the border enclosing this color bar."].join(" ")},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",description:"Sets the color of padded area."},tickmode:axesAttrs.minor.tickmode,nticks:axesAttrs.nticks,tick0:axesAttrs.tick0,dtick:axesAttrs.dtick,tickvals:axesAttrs.tickvals,ticktext:axesAttrs.ticktext,ticks:extendFlat$e({},axesAttrs.ticks,{dflt:""}),ticklabeloverflow:extendFlat$e({},axesAttrs.ticklabeloverflow,{description:["Determines how we handle tick labels that would overflow either the graph div or the domain of the axis.","The default value for inside tick labels is *hide past domain*.","In other cases the default is *hide past div*."].join(" ")}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",description:["Determines where tick labels are drawn relative to the ticks.","Left and right options are used when `orientation` is *h*,","top and bottom when `orientation` is *v*."].join(" ")},ticklen:axesAttrs.ticklen,tickwidth:axesAttrs.tickwidth,tickcolor:axesAttrs.tickcolor,ticklabelstep:axesAttrs.ticklabelstep,showticklabels:axesAttrs.showticklabels,labelalias:axesAttrs.labelalias,tickfont:fontAttrs$9({description:"Sets the color bar's tick label font"}),tickangle:axesAttrs.tickangle,tickformat:axesAttrs.tickformat,tickformatstops:axesAttrs.tickformatstops,tickprefix:axesAttrs.tickprefix,showtickprefix:axesAttrs.showtickprefix,ticksuffix:axesAttrs.ticksuffix,showticksuffix:axesAttrs.showticksuffix,separatethousands:axesAttrs.separatethousands,exponentformat:axesAttrs.exponentformat,minexponent:axesAttrs.minexponent,showexponent:axesAttrs.showexponent,title:{text:{valType:"string",description:["Sets the title of the color bar.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:fontAttrs$9({description:["Sets this color bar's title font.","Note that the title's font used to be set","by the now deprecated `titlefont` attribute."].join(" ")}),side:{valType:"enumerated",values:["right","top","bottom"],description:["Determines the location of color bar's title","with respect to the color bar.","Defaults to *top* when `orientation` if *v* and ","defaults to *right* when `orientation` if *h*.","Note that the title's location used to be set","by the now deprecated `titleside` attribute."].join(" ")}},_deprecated:{title:{valType:"string",description:["Deprecated in favor of color bar's `title.text`.","Note that value of color bar's `title` is no longer a simple","*string* but a set of sub-attributes."].join(" ")},titlefont:fontAttrs$9({description:"Deprecated in favor of color bar's `title.font`."}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top",description:"Deprecated in favor of color bar's `title.side`."}}},"colorbars","from-root"),colorbarAttrs=attributes$H,counterRegex$1=regex.counter,sortObjectKeys$1=sort_object_keys,palettes=scales_1.scales,paletteStr=sortObjectKeys$1(palettes);function code(e){return"`"+e+"`"}var attributes$G=function(e,t){e=e||"";var r,n,i=(t=t||{}).cLetter||"c",a="onlyIfNumerical"in t?t.onlyIfNumerical:Boolean(e),o="noScale"in t?t.noScale:"marker.line"===e,s="showScaleDflt"in t?t.showScaleDflt:"z"===i,l="string"==typeof t.colorscaleDflt?palettes[t.colorscaleDflt]:null,c=t.editTypeOverride||"",u=e?e+".":"";"colorAttr"in t?(r=t.colorAttr,n=t.colorAttr):n="in "+code(u+(r={z:"z",c:"color"}[i]));var d=a?" Has an effect only if "+n+" is set to a numerical array.":"",h=i+"auto",g=i+"min",p=i+"max",f=i+"mid",m=code(u+h),y=code(u+g),b=code(u+p),v=y+" and "+b,x={};x[g]=x[p]=void 0;var B={};B[h]=!1;var I={};return"color"===r&&(I.color={valType:"color",arrayOk:!0,editType:c||"style",description:["Sets the",e,"color.","It accepts either a specific color","or an array of numbers that are mapped to the colorscale","relative to the max and min values of the array or relative to",v,"if set."].join(" ")},t.anim&&(I.color.anim=!0)),I[h]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:x,description:["Determines whether or not the color domain is computed","with respect to the input data (here "+n+") or the bounds set in",v+d,"Defaults to `false` when",v,"are set by the user."].join(" ")},I[g]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:B,description:["Sets the lower bound of the color domain."+d,"Value should have the same units as",n,"and if set,",b,"must be set as well."].join(" ")},I[p]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:B,description:["Sets the upper bound of the color domain."+d,"Value should have the same units as",n,"and if set,",y,"must be set as well."].join(" ")},I[f]={valType:"number",dflt:null,editType:"calc",impliedEdits:x,description:["Sets the mid-point of the color domain by scaling",y,"and/or",b,"to be equidistant to this point."+d,"Value should have the same units as",n+".","Has no effect when",m,"is `false`."].join(" ")},I.colorscale={valType:"colorscale",editType:"calc",dflt:l,impliedEdits:{autocolorscale:!1},description:["Sets the colorscale."+d,"The colorscale must be an array containing","arrays mapping a normalized value to an","rgb, rgba, hex, hsl, hsv, or named color string.","At minimum, a mapping for the lowest (0) and highest (1)","values are required. For example,","`[[0, 'rgb(0,0,255)'], [1, 'rgb(255,0,0)']]`.","To control the bounds of the colorscale in color space,","use",v+".","Alternatively, `colorscale` may be a palette name string","of the following list: "+paletteStr+"."].join(" ")},I.autocolorscale={valType:"boolean",dflt:!1!==t.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0},description:["Determines whether the colorscale is a default palette (`autocolorscale: true`)","or the palette determined by",code(u+"colorscale")+"."+d,"In case `colorscale` is unspecified or `autocolorscale` is true, the default","palette will be chosen according to whether numbers in the `color` array are","all positive, all negative or mixed."].join(" ")},I.reversescale={valType:"boolean",dflt:!1,editType:"plot",description:["Reverses the color mapping if true."+d,"If true,",y,"will correspond to the last color","in the array and",b,"will correspond to the first color."].join(" ")},o||(I.showscale={valType:"boolean",dflt:s,editType:"calc",description:["Determines whether or not a colorbar is displayed for this trace."+d].join(" ")},I.colorbar=colorbarAttrs),t.noColorAxis||(I.coloraxis={valType:"subplotid",regex:counterRegex$1("coloraxis"),dflt:null,editType:"calc",description:["Sets a reference to a shared color axis.","References to these shared color axes are *coloraxis*, *coloraxis2*, *coloraxis3*, etc.","Settings for these shared color axes are set in the layout, under","`layout.coloraxis`, `layout.coloraxis2`, etc.","Note that multiple color scales can be linked to the same color axis."].join(" ")}),I},extendFlat$d=extend.extendFlat,colorScaleAttrs$6=attributes$G,scales$1=scales_1.scales,msg="Note that `autocolorscale` must be true for this attribute to work.",layout_attributes$2={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:scales$1.Reds,editType:"calc",description:["Sets the default sequential colorscale for positive values.",msg].join(" ")},sequentialminus:{valType:"colorscale",dflt:scales$1.Blues,editType:"calc",description:["Sets the default sequential colorscale for negative values.",msg].join(" ")},diverging:{valType:"colorscale",dflt:scales$1.RdBu,editType:"calc",description:["Sets the default diverging colorscale.",msg].join(" ")}},coloraxis:extendFlat$d({_isSubplotObj:!0,editType:"calc",description:[""].join(" ")},colorScaleAttrs$6("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))},Lib$1C=libExports,has_colorbar=function(e){return Lib$1C.isPlainObject(e.colorbar)},clean_ticks={},isNumeric$n=fastIsnumeric,Lib$1B=libExports,constants$I=numerical,ONEDAY$2=constants$I.ONEDAY,ONEWEEK$3=constants$I.ONEWEEK;clean_ticks.dtick=function(e,t){var r="log"===t,n="date"===t,i="category"===t,a=n?ONEDAY$2:1;if(!e)return a;if(isNumeric$n(e))return(e=Number(e))<=0?a:i?Math.max(1,Math.round(e)):n?Math.max(.1,e):e;if("string"!=typeof e||!n&&!r)return a;var o=e.charAt(0),s=e.substr(1);return(s=isNumeric$n(s)?Number(s):0)<=0||!(n&&"M"===o&&s===Math.round(s)||r&&"L"===o||r&&"D"===o&&(1===s||2===s))?a:e},clean_ticks.tick0=function(e,t,r,n){return"date"===t?Lib$1B.cleanDate(e,Lib$1B.dateTick0(r,n%ONEWEEK$3==0?1:0)):"D1"!==n&&"D2"!==n?isNumeric$n(e)?Number(e):0:void 0};var cleanTicks$1=clean_ticks,isArrayOrTypedArray$8=libExports.isArrayOrTypedArray,tick_value_defaults=function(e,t,r,n,i){i||(i={});var a=i.isMinor,o=a?e.minor||{}:e,s=a?t.minor:t,l=a?"minor.":"";function c(e){var t=o[e];return void 0!==t?t:(s._template||{})[e]}var u=c("tick0"),d=c("dtick"),h=c("tickvals"),g=r(l+"tickmode",isArrayOrTypedArray$8(h)?"array":d?"linear":"auto");if("auto"===g||"sync"===g)r(l+"nticks");else if("linear"===g){var p=s.dtick=cleanTicks$1.dtick(d,n);s.tick0=cleanTicks$1.tick0(u,n,t.calendar,p)}else if("multicategory"!==n){void 0===r(l+"tickvals")?s.tickmode="auto":a||r("ticktext")}},Lib$1A=libExports,layoutAttributes$9=layout_attributes$3,tick_mark_defaults=function(e,t,r,n){var i=n.isMinor,a=i?e.minor||{}:e,o=i?t.minor:t,s=i?layoutAttributes$9.minor:layoutAttributes$9,l=i?"minor.":"",c=Lib$1A.coerce2(a,o,s,"ticklen",i?.6*(t.ticklen||5):void 0),u=Lib$1A.coerce2(a,o,s,"tickwidth",i?t.tickwidth||1:void 0),d=Lib$1A.coerce2(a,o,s,"tickcolor",(i?t.tickcolor:void 0)||o.color);r(l+"ticks",!i&&n.outerTicks||c||u||d?"outside":"")||(delete o.ticklen,delete o.tickwidth,delete o.tickcolor)},show_dflt=function(e){var t=["showexponent","showtickprefix","showticksuffix"].filter((function(t){return void 0!==e[t]}));if(t.every((function(r){return e[r]===e[t[0]]}))||1===t.length)return e[t[0]]},Lib$1z=libExports,Template$8=plot_template,array_container_defaults=function(e,t,r){var n,i,a=r.name,o=r.inclusionAttr||"visible",s=t[a],l=Lib$1z.isArrayOrTypedArray(e[a])?e[a]:[],c=t[a]=[],u=Template$8.arrayTemplater(t,a,o);for(n=0;n<l.length;n++){var d=l[n];Lib$1z.isPlainObject(d)?i=u.newItem(d):(i=u.newItem({}))[o]=!1,i._index=n,!1!==i[o]&&r.handleItemDefaults(d,i,t,r),c.push(i)}var h=u.defaultItems();for(n=0;n<h.length;n++)(i=h[n])._index=c.length,r.handleItemDefaults({},i,t,r,{}),c.push(i);if(Lib$1z.isArrayOrTypedArray(s)){var g=Math.min(s.length,c.length);for(n=0;n<g;n++)Lib$1z.relinkPrivateKeys(c[n],s[n])}return c},Lib$1y=libExports,contrast=colorExports.contrast,layoutAttributes$8=layout_attributes$3,getShowAttrDflt$1=show_dflt,handleArrayContainerDefaults$9=array_container_defaults,tick_label_defaults=function(e,t,r,n,i){i||(i={});var a=r("labelalias");Lib$1y.isPlainObject(a)||delete t.labelalias;var o=getShowAttrDflt$1(e);if(r("showticklabels")){var s=i.font||{},l=t.color,c=-1!==(t.ticklabelposition||"").indexOf("inside")?contrast(i.bgColor):l&&l!==layoutAttributes$8.color.dflt?l:s.color;if(Lib$1y.coerceFont(r,"tickfont",{family:s.family,size:s.size,color:c}),i.noTicklabelstep||"multicategory"===n||"log"===n||r("ticklabelstep"),i.noAng||r("tickangle"),"category"!==n){var u=r("tickformat");handleArrayContainerDefaults$9(e,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:tickformatstopDefaults}),t.tickformatstops.length||delete t.tickformatstops,i.noExp||u||"date"===n||(r("showexponent",o),r("exponentformat"),r("minexponent"),r("separatethousands"))}}};function tickformatstopDefaults(e,t){function r(r,n){return Lib$1y.coerce(e,t,layoutAttributes$8.tickformatstops,r,n)}r("enabled")&&(r("dtickrange"),r("value"))}var getShowAttrDflt=show_dflt,prefix_suffix_defaults=function(e,t,r,n,i){i||(i={});var a=i.tickSuffixDflt,o=getShowAttrDflt(e);r("tickprefix")&&r("showtickprefix",o),r("ticksuffix",a)&&r("showticksuffix",o)},Lib$1x=libExports,Template$7=plot_template,handleTickValueDefaults$1=tick_value_defaults,handleTickMarkDefaults$1=tick_mark_defaults,handleTickLabelDefaults$1=tick_label_defaults,handlePrefixSuffixDefaults$1=prefix_suffix_defaults,attributes$F=attributes$H,defaults$m=function(e,t,r){var n=Template$7.newContainer(t,"colorbar"),i=e.colorbar||{};function a(e,t){return Lib$1x.coerce(i,n,attributes$F,e,t)}var o=r.margin||{t:0,b:0,l:0,r:0},s=r.width-o.l-o.r,l=r.height-o.t-o.b,c="v"===a("orientation"),u=a("thicknessmode");a("thickness","fraction"===u?30/(c?s:l):30);var d=a("lenmode");a("len","fraction"===d?1:c?l:s),a("x",c?1.02:.5),a("xanchor",c?"left":"center"),a("xpad"),a("y",c?.5:1.02),a("yanchor",c?"middle":"bottom"),a("ypad"),Lib$1x.noneOrAll(i,n,["x","y"]),a("outlinecolor"),a("outlinewidth"),a("bordercolor"),a("borderwidth"),a("bgcolor");var h=Lib$1x.coerce(i,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:c?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");a("ticklabeloverflow",-1!==h.indexOf("inside")?"hide past domain":"hide past div"),handleTickValueDefaults$1(i,n,a,"linear");var g=r.font,p={outerTicks:!1,font:g};-1!==h.indexOf("inside")&&(p.bgColor="black"),handlePrefixSuffixDefaults$1(i,n,a,"linear",p),handleTickLabelDefaults$1(i,n,a,"linear",p),handleTickMarkDefaults$1(i,n,a,"linear"),a("title.text",r._dfltTitle.colorbar);var f=n.tickfont,m=Lib$1x.extendFlat({},f,{color:g.color,size:Lib$1x.bigFont(f.size)});Lib$1x.coerceFont(a,"title.font",m),a("title.side",c?"top":"right")},isNumeric$m=fastIsnumeric,Lib$1w=libExports,hasColorbar=has_colorbar,colorbarDefaults=defaults$m,isValidScale=scales_1.isValid,traceIs$1=registry.traceIs;function npMaybe(e,t){var r=t.slice(0,t.length-1);return t?Lib$1w.nestedProperty(e,r).get()||{}:e}var defaults$l=function e(t,r,n,i,a){var o=a.prefix,s=a.cLetter,l="_module"in r,c=npMaybe(t,o),u=npMaybe(r,o),d=npMaybe(r._template||{},o)||{},h=function(){return delete t.coloraxis,delete r.coloraxis,e(t,r,n,i,a)};if(l){var g=n._colorAxes||{},p=i(o+"coloraxis");if(p){var f=traceIs$1(r,"contour")&&Lib$1w.nestedProperty(r,"contours.coloring").get()||"heatmap",m=g[p];return void(m?(m[2].push(h),m[0]!==f&&(m[0]=!1,Lib$1w.warn(["Ignoring coloraxis:",p,"setting","as it is linked to incompatible colorscales."].join(" ")))):g[p]=[f,r,[h]])}}var y=c[s+"min"],b=c[s+"max"],v=isNumeric$m(y)&&isNumeric$m(b)&&y<b;i(o+s+"auto",!v)?i(o+s+"mid"):(i(o+s+"min"),i(o+s+"max"));var x,B,I=c.colorscale,F=d.colorscale;(void 0!==I&&(x=!isValidScale(I)),void 0!==F&&(x=!isValidScale(F)),i(o+"autocolorscale",x),i(o+"colorscale"),i(o+"reversescale"),"marker.line."!==o)&&(o&&l&&(B=hasColorbar(c)),i(o+"showscale",B)&&(o&&d&&(u._template=d),colorbarDefaults(c,u,n)))},Lib$1v=libExports,Template$6=plot_template,colorScaleAttrs$5=layout_attributes$2,colorScaleDefaults=defaults$l,layout_defaults$4=function(e,t){function r(r,n){return Lib$1v.coerce(e,t,colorScaleAttrs$5,r,n)}r("colorscale.sequential"),r("colorscale.sequentialminus"),r("colorscale.diverging");var n,i,a=t._colorAxes;function o(e,t){return Lib$1v.coerce(n,i,colorScaleAttrs$5.coloraxis,e,t)}for(var s in a){var l=a[s];if(l[0])n=e[s]||{},(i=Template$6.newContainer(t,s,"coloraxis"))._name=s,colorScaleDefaults(n,i,t,o,{prefix:"",cLetter:"c"});else{for(var c=0;c<l[2].length;c++)l[2][c]();delete t._colorAxes[s]}}},Lib$1u=libExports,hasColorscale$4=helpers$A.hasColorscale,extractOpts$3=helpers$A.extractOpts,cross_trace_defaults$2=function(e,t){function r(e,t){var r=e["_"+t];void 0!==r&&(e[t]=r)}function n(e,n){var i=n.container?Lib$1u.nestedProperty(e,n.container).get():e;if(i)if(i.coloraxis)i._colorAx=t[i.coloraxis];else{var a=extractOpts$3(i),o=a.auto;(o||void 0===a.min)&&r(i,n.min),(o||void 0===a.max)&&r(i,n.max),a.autocolorscale&&r(i,"colorscale")}}for(var i=0;i<e.length;i++){var a=e[i],o=a._module.colorbar;if(o)if(Array.isArray(o))for(var s=0;s<o.length;s++)n(a,o[s]);else n(a,o);hasColorscale$4(a,"marker.line")&&n(a,{container:"marker.line",min:"cmin",max:"cmax"})}for(var l in t._colorAxes)n(t[l],{min:"cmin",max:"cmax"})},isNumeric$l=fastIsnumeric,Lib$1t=libExports,extractOpts$2=helpers$A.extractOpts,calc$8=function(e,t,r){var n,i=e._fullLayout,a=r.vals,o=r.containerStr,s=o?Lib$1t.nestedProperty(t,o).get():t,l=extractOpts$2(s),c=!1!==l.auto,u=l.min,d=l.max,h=l.mid,g=function(){return Lib$1t.aggNums(Math.min,null,a)},p=function(){return Lib$1t.aggNums(Math.max,null,a)};(void 0===u?u=g():c&&(u=s._colorAx&&isNumeric$l(u)?Math.min(u,g()):g()),void 0===d?d=p():c&&(d=s._colorAx&&isNumeric$l(d)?Math.max(d,p()):p()),c&&void 0!==h&&(d-h>h-u?u=h-(d-h):d-h<h-u&&(d=h+(h-u))),u===d&&(u-=.5,d+=.5),l._sync("min",u),l._sync("max",d),l.autocolorscale)&&(n=u*d<0?i.colorscale.diverging:u>=0?i.colorscale.sequential:i.colorscale.sequentialminus,l._sync("colorscale",n))},scales=scales_1,helpers$z=helpers$A,colorscale={moduleType:"component",name:"colorscale",attributes:attributes$G,layoutAttributes:layout_attributes$2,supplyLayoutDefaults:layout_defaults$4,handleDefaults:defaults$l,crossTraceDefaults:cross_trace_defaults$2,calc:calc$8,scales:scales.scales,defaultScale:scales.defaultScale,getScale:scales.get,isValidScale:scales.isValid,hasColorscale:helpers$z.hasColorscale,extractOpts:helpers$z.extractOpts,extractScale:helpers$z.extractScale,flipScale:helpers$z.flipScale,makeColorScaleFunc:helpers$z.makeColorScaleFunc,makeColorScaleFuncFromTrace:helpers$z.makeColorScaleFuncFromTrace},Lib$1s=libExports,subtypes$3={hasLines:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("lines")},hasMarkers:function(e){return e.visible&&(e.mode&&-1!==e.mode.indexOf("markers")||"splom"===e.type)},hasText:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("text")},isBubble:function(e){return Lib$1s.isPlainObject(e.marker)&&Lib$1s.isArrayOrTypedArray(e.marker.size)}},isNumeric$k=fastIsnumeric,make_bubble_size_func=function(e,t){t||(t=2);var r=e.marker,n=r.sizeref||1,i=r.sizemin||0,a="area"===r.sizemode?function(e){return Math.sqrt(e/n)}:function(e){return e/n};return function(e){var r=a(e/t);return isNumeric$k(r)&&r>0?Math.max(r,i):0}},helpers$y={};!function(e){var t=libExports;e.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo},e.isTraceInSubplots=function(t,r){if("splom"===t.type){for(var n=t.xaxes||[],i=t.yaxes||[],a=0;a<n.length;a++)for(var o=0;o<i.length;o++)if(-1!==r.indexOf(n[a]+i[o]))return!0;return!1}return-1!==r.indexOf(e.getSubplot(t))},e.flat=function(e,t){for(var r=new Array(e.length),n=0;n<e.length;n++)r[n]=t;return r},e.p2c=function(e,t){for(var r=new Array(e.length),n=0;n<e.length;n++)r[n]=e[n].p2c(t);return r},e.getDistanceFunction=function(t,r,n,i){return"closest"===t?i||e.quadrature(r,n):"x"===t.charAt(0)?r:n},e.getClosest=function(e,t,r){if(!1!==r.index)r.index>=0&&r.index<e.length?r.distance=0:r.index=!1;else for(var n=0;n<e.length;n++){var i=t(e[n]);i<=r.distance&&(r.index=n,r.distance=i)}return r},e.inbox=function(e,t,r){return e*t<0||0===e?r:1/0},e.quadrature=function(e,t){return function(r){var n=e(r),i=t(r);return Math.sqrt(n*n+i*i)}},e.makeEventData=function(t,r,n){var i="index"in t?t.index:t.pointNumber,a={data:r._input,fullData:r,curveNumber:r.index,pointNumber:i};if(r._indexToPoints){var o=r._indexToPoints[i];1===o.length?a.pointIndex=o[0]:a.pointIndices=o}else a.pointIndex=i;return r._module.eventData?a=r._module.eventData(a,t,r,n,i):("xVal"in t?a.x=t.xVal:"x"in t&&(a.x=t.x),"yVal"in t?a.y=t.yVal:"y"in t&&(a.y=t.y),t.xa&&(a.xaxis=t.xa),t.ya&&(a.yaxis=t.ya),void 0!==t.zLabelVal&&(a.z=t.zLabelVal)),e.appendArrayPointValue(a,r,i),a},e.appendArrayPointValue=function(e,r,a){var o=r._arrayAttrs;if(o)for(var s=0;s<o.length;s++){var l=o[s],c=n(l);if(void 0===e[c]){var u=i(t.nestedProperty(r,l).get(),a);void 0!==u&&(e[c]=u)}}},e.appendArrayMultiPointValues=function(e,r,a){var o=r._arrayAttrs;if(o)for(var s=0;s<o.length;s++){var l=o[s],c=n(l);if(void 0===e[c]){for(var u=t.nestedProperty(r,l).get(),d=new Array(a.length),h=0;h<a.length;h++)d[h]=i(u,a[h]);e[c]=d}}};var r={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function n(e){return r[e]||e}function i(e,t){return Array.isArray(t)?Array.isArray(e)&&Array.isArray(e[t[0]])?e[t[0]][t[1]]:void 0:e[t]}var a={x:!0,y:!0},o={"x unified":!0,"y unified":!0};e.isUnifiedHover=function(e){return"string"==typeof e&&!!o[e]},e.isXYhover=function(e){return"string"==typeof e&&!!a[e]}}(helpers$y);var parseSvgPath=parse$2,length={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},segment=/([astvzqmhlc])([^astvzqmhlc]*)/gi;function parse$2(e){var t=[];return e.replace(segment,(function(e,r,n){var i=r.toLowerCase();for(n=parseValues(n),"m"==i&&n.length>2&&(t.push([r].concat(n.splice(0,2))),i="l",r="m"==r?"l":"L");;){if(n.length==length[i])return n.unshift(r),t.push(n);if(n.length<length[i])throw new Error("malformed path data");t.push([r].concat(n.splice(0,length[i])))}})),t}var symbol_defs,hasRequiredSymbol_defs,number=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function parseValues(e){var t=e.match(number);return t?t.map(Number):[]}function requireSymbol_defs(){if(hasRequiredSymbol_defs)return symbol_defs;hasRequiredSymbol_defs=1;var e,t,r,n,i=parseSvgPath,a=d3Exports.round,o="M0,0Z",s=Math.sqrt(2),l=Math.sqrt(3),c=Math.PI,u=Math.cos,d=Math.sin;function h(e){return null===e}function g(a,o,s){if(!(a&&a%360!=0||o))return s;if(r===a&&n===o&&e===s)return t;function l(e,t){var r=u(e),n=d(e),i=t[0],a=t[1]+(o||0);return[i*r-a*n,i*n+a*r]}r=a,n=o,e=s;for(var h=a/180*c,g=0,p=0,f=i(s),m="",y=0;y<f.length;y++){var b=f[y],v=b[0],x=g,B=p;if("M"===v||"L"===v)g=+b[1],p=+b[2];else if("m"===v||"l"===v)g+=+b[1],p+=+b[2];else if("H"===v)g=+b[1];else if("h"===v)g+=+b[1];else if("V"===v)p=+b[1];else if("v"===v)p+=+b[1];else if("A"===v){g=+b[1],p=+b[2];var I=l(h,[+b[6],+b[7]]);b[6]=I[0],b[7]=I[1],b[3]=+b[3]+a}"H"!==v&&"V"!==v||(v="L"),"h"!==v&&"v"!==v||(v="l"),"m"!==v&&"l"!==v||(g-=x,p-=B);var F=l(h,[g,p]);"H"!==v&&"V"!==v||(v="L"),"M"!==v&&"L"!==v&&"m"!==v&&"l"!==v||(b[1]=F[0],b[2]=F[1]),b[0]=v,m+=b[0]+b.slice(1).join(",")}return t=m,m}return symbol_defs={circle:{n:0,f:function(e,t,r){if(h(t))return o;var n=a(e,2),i="M"+n+",0A"+n+","+n+" 0 1,1 0,-"+n+"A"+n+","+n+" 0 0,1 "+n+",0Z";return r?g(t,r,i):i}},square:{n:1,f:function(e,t,r){if(h(t))return o;var n=a(e,2);return g(t,r,"M"+n+","+n+"H-"+n+"V-"+n+"H"+n+"Z")}},diamond:{n:2,f:function(e,t,r){if(h(t))return o;var n=a(1.3*e,2);return g(t,r,"M"+n+",0L0,"+n+"L-"+n+",0L0,-"+n+"Z")}},cross:{n:3,f:function(e,t,r){if(h(t))return o;var n=a(.4*e,2),i=a(1.2*e,2);return g(t,r,"M"+i+","+n+"H"+n+"V"+i+"H-"+n+"V"+n+"H-"+i+"V-"+n+"H-"+n+"V-"+i+"H"+n+"V-"+n+"H"+i+"Z")}},x:{n:4,f:function(e,t,r){if(h(t))return o;var n=a(.8*e/s,2),i="l"+n+","+n,l="l"+n+",-"+n,c="l-"+n+",-"+n,u="l-"+n+","+n;return g(t,r,"M0,"+n+i+l+c+l+c+u+c+u+i+u+i+"Z")}},"triangle-up":{n:5,f:function(e,t,r){if(h(t))return o;var n=a(2*e/l,2);return g(t,r,"M-"+n+","+a(e/2,2)+"H"+n+"L0,-"+a(e,2)+"Z")}},"triangle-down":{n:6,f:function(e,t,r){if(h(t))return o;var n=a(2*e/l,2);return g(t,r,"M-"+n+",-"+a(e/2,2)+"H"+n+"L0,"+a(e,2)+"Z")}},"triangle-left":{n:7,f:function(e,t,r){if(h(t))return o;var n=a(2*e/l,2);return g(t,r,"M"+a(e/2,2)+",-"+n+"V"+n+"L-"+a(e,2)+",0Z")}},"triangle-right":{n:8,f:function(e,t,r){if(h(t))return o;var n=a(2*e/l,2);return g(t,r,"M-"+a(e/2,2)+",-"+n+"V"+n+"L"+a(e,2)+",0Z")}},"triangle-ne":{n:9,f:function(e,t,r){if(h(t))return o;var n=a(.6*e,2),i=a(1.2*e,2);return g(t,r,"M-"+i+",-"+n+"H"+n+"V"+i+"Z")}},"triangle-se":{n:10,f:function(e,t,r){if(h(t))return o;var n=a(.6*e,2),i=a(1.2*e,2);return g(t,r,"M"+n+",-"+i+"V"+n+"H-"+i+"Z")}},"triangle-sw":{n:11,f:function(e,t,r){if(h(t))return o;var n=a(.6*e,2),i=a(1.2*e,2);return g(t,r,"M"+i+","+n+"H-"+n+"V-"+i+"Z")}},"triangle-nw":{n:12,f:function(e,t,r){if(h(t))return o;var n=a(.6*e,2),i=a(1.2*e,2);return g(t,r,"M-"+n+","+i+"V-"+n+"H"+i+"Z")}},pentagon:{n:13,f:function(e,t,r){if(h(t))return o;var n=a(.951*e,2),i=a(.588*e,2),s=a(-e,2),l=a(-.309*e,2);return g(t,r,"M"+n+","+l+"L"+i+","+a(.809*e,2)+"H-"+i+"L-"+n+","+l+"L0,"+s+"Z")}},hexagon:{n:14,f:function(e,t,r){if(h(t))return o;var n=a(e,2),i=a(e/2,2),s=a(e*l/2,2);return g(t,r,"M"+s+",-"+i+"V"+i+"L0,"+n+"L-"+s+","+i+"V-"+i+"L0,-"+n+"Z")}},hexagon2:{n:15,f:function(e,t,r){if(h(t))return o;var n=a(e,2),i=a(e/2,2),s=a(e*l/2,2);return g(t,r,"M-"+i+","+s+"H"+i+"L"+n+",0L"+i+",-"+s+"H-"+i+"L-"+n+",0Z")}},octagon:{n:16,f:function(e,t,r){if(h(t))return o;var n=a(.924*e,2),i=a(.383*e,2);return g(t,r,"M-"+i+",-"+n+"H"+i+"L"+n+",-"+i+"V"+i+"L"+i+","+n+"H-"+i+"L-"+n+","+i+"V-"+i+"Z")}},star:{n:17,f:function(e,t,r){if(h(t))return o;var n=1.4*e,i=a(.225*n,2),s=a(.951*n,2),l=a(.363*n,2),c=a(.588*n,2),u=a(-n,2),d=a(-.309*n,2),p=a(.118*n,2),f=a(.809*n,2);return g(t,r,"M"+i+","+d+"H"+s+"L"+l+","+p+"L"+c+","+f+"L0,"+a(.382*n,2)+"L-"+c+","+f+"L-"+l+","+p+"L-"+s+","+d+"H-"+i+"L0,"+u+"Z")}},hexagram:{n:18,f:function(e,t,r){if(h(t))return o;var n=a(.66*e,2),i=a(.38*e,2),s=a(.76*e,2);return g(t,r,"M-"+s+",0l-"+i+",-"+n+"h"+s+"l"+i+",-"+n+"l"+i+","+n+"h"+s+"l-"+i+","+n+"l"+i+","+n+"h-"+s+"l-"+i+","+n+"l-"+i+",-"+n+"h-"+s+"Z")}},"star-triangle-up":{n:19,f:function(e,t,r){if(h(t))return o;var n=a(e*l*.8,2),i=a(.8*e,2),s=a(1.6*e,2),c=a(4*e,2),u="A "+c+","+c+" 0 0 1 ";return g(t,r,"M-"+n+","+i+u+n+","+i+u+"0,-"+s+u+"-"+n+","+i+"Z")}},"star-triangle-down":{n:20,f:function(e,t,r){if(h(t))return o;var n=a(e*l*.8,2),i=a(.8*e,2),s=a(1.6*e,2),c=a(4*e,2),u="A "+c+","+c+" 0 0 1 ";return g(t,r,"M"+n+",-"+i+u+"-"+n+",-"+i+u+"0,"+s+u+n+",-"+i+"Z")}},"star-square":{n:21,f:function(e,t,r){if(h(t))return o;var n=a(1.1*e,2),i=a(2*e,2),s="A "+i+","+i+" 0 0 1 ";return g(t,r,"M-"+n+",-"+n+s+"-"+n+","+n+s+n+","+n+s+n+",-"+n+s+"-"+n+",-"+n+"Z")}},"star-diamond":{n:22,f:function(e,t,r){if(h(t))return o;var n=a(1.4*e,2),i=a(1.9*e,2),s="A "+i+","+i+" 0 0 1 ";return g(t,r,"M-"+n+",0"+s+"0,"+n+s+n+",0"+s+"0,-"+n+s+"-"+n+",0Z")}},"diamond-tall":{n:23,f:function(e,t,r){if(h(t))return o;var n=a(.7*e,2),i=a(1.4*e,2);return g(t,r,"M0,"+i+"L"+n+",0L0,-"+i+"L-"+n+",0Z")}},"diamond-wide":{n:24,f:function(e,t,r){if(h(t))return o;var n=a(1.4*e,2),i=a(.7*e,2);return g(t,r,"M0,"+i+"L"+n+",0L0,-"+i+"L-"+n+",0Z")}},hourglass:{n:25,f:function(e,t,r){if(h(t))return o;var n=a(e,2);return g(t,r,"M"+n+","+n+"H-"+n+"L"+n+",-"+n+"H-"+n+"Z")},noDot:!0},bowtie:{n:26,f:function(e,t,r){if(h(t))return o;var n=a(e,2);return g(t,r,"M"+n+","+n+"V-"+n+"L-"+n+","+n+"V-"+n+"Z")},noDot:!0},"circle-cross":{n:27,f:function(e,t,r){if(h(t))return o;var n=a(e,2);return g(t,r,"M0,"+n+"V-"+n+"M"+n+",0H-"+n+"M"+n+",0A"+n+","+n+" 0 1,1 0,-"+n+"A"+n+","+n+" 0 0,1 "+n+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e,t,r){if(h(t))return o;var n=a(e,2),i=a(e/s,2);return g(t,r,"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i+"M"+n+",0A"+n+","+n+" 0 1,1 0,-"+n+"A"+n+","+n+" 0 0,1 "+n+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e,t,r){if(h(t))return o;var n=a(e,2);return g(t,r,"M0,"+n+"V-"+n+"M"+n+",0H-"+n+"M"+n+","+n+"H-"+n+"V-"+n+"H"+n+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e,t,r){if(h(t))return o;var n=a(e,2);return g(t,r,"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+n+","+n+"H-"+n+"V-"+n+"H"+n+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e,t,r){if(h(t))return o;var n=a(1.3*e,2);return g(t,r,"M"+n+",0L0,"+n+"L-"+n+",0L0,-"+n+"ZM0,-"+n+"V"+n+"M-"+n+",0H"+n)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e,t,r){if(h(t))return o;var n=a(1.3*e,2),i=a(.65*e,2);return g(t,r,"M"+n+",0L0,"+n+"L-"+n+",0L0,-"+n+"ZM-"+i+",-"+i+"L"+i+","+i+"M-"+i+","+i+"L"+i+",-"+i)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e,t,r){if(h(t))return o;var n=a(1.4*e,2);return g(t,r,"M0,"+n+"V-"+n+"M"+n+",0H-"+n)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e,t,r){if(h(t))return o;var n=a(e,2);return g(t,r,"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e,t,r){if(h(t))return o;var n=a(1.2*e,2),i=a(.85*e,2);return g(t,r,"M0,"+n+"V-"+n+"M"+n+",0H-"+n+"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e,t,r){if(h(t))return o;var n=a(e/2,2),i=a(e,2);return g(t,r,"M"+n+","+i+"V-"+i+"M"+(n-i)+",-"+i+"V"+i+"M"+i+","+n+"H-"+i+"M-"+i+","+(n-i)+"H"+i)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e,t,r){if(h(t))return o;var n=a(1.2*e,2),i=a(1.6*e,2),s=a(.8*e,2);return g(t,r,"M-"+n+","+s+"L0,0M"+n+","+s+"L0,0M0,-"+i+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e,t,r){if(h(t))return o;var n=a(1.2*e,2),i=a(1.6*e,2),s=a(.8*e,2);return g(t,r,"M-"+n+",-"+s+"L0,0M"+n+",-"+s+"L0,0M0,"+i+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e,t,r){if(h(t))return o;var n=a(1.2*e,2),i=a(1.6*e,2),s=a(.8*e,2);return g(t,r,"M"+s+","+n+"L0,0M"+s+",-"+n+"L0,0M-"+i+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e,t,r){if(h(t))return o;var n=a(1.2*e,2),i=a(1.6*e,2),s=a(.8*e,2);return g(t,r,"M-"+s+","+n+"L0,0M-"+s+",-"+n+"L0,0M"+i+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e,t,r){if(h(t))return o;var n=a(1.4*e,2);return g(t,r,"M"+n+",0H-"+n)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e,t,r){if(h(t))return o;var n=a(1.4*e,2);return g(t,r,"M0,"+n+"V-"+n)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e,t,r){if(h(t))return o;var n=a(e,2);return g(t,r,"M"+n+",-"+n+"L-"+n+","+n)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e,t,r){if(h(t))return o;var n=a(e,2);return g(t,r,"M"+n+","+n+"L-"+n+",-"+n)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(e,t,r){if(h(t))return o;var n=a(e,2);return g(t,r,"M0,0L-"+n+","+a(2*e,2)+"H"+n+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(e,t,r){if(h(t))return o;var n=a(e,2);return g(t,r,"M0,0L-"+n+",-"+a(2*e,2)+"H"+n+"Z")},noDot:!0},"arrow-left":{n:47,f:function(e,t,r){if(h(t))return o;var n=a(2*e,2),i=a(e,2);return g(t,r,"M0,0L"+n+",-"+i+"V"+i+"Z")},noDot:!0},"arrow-right":{n:48,f:function(e,t,r){if(h(t))return o;var n=a(2*e,2),i=a(e,2);return g(t,r,"M0,0L-"+n+",-"+i+"V"+i+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(e,t,r){if(h(t))return o;var n=a(e,2);return g(t,r,"M-"+n+",0H"+n+"M0,0L-"+n+","+a(2*e,2)+"H"+n+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(e,t,r){if(h(t))return o;var n=a(e,2);return g(t,r,"M-"+n+",0H"+n+"M0,0L-"+n+",-"+a(2*e,2)+"H"+n+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(e,t,r){if(h(t))return o;var n=a(2*e,2),i=a(e,2);return g(t,r,"M0,-"+i+"V"+i+"M0,0L"+n+",-"+i+"V"+i+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(e,t,r){if(h(t))return o;var n=a(2*e,2),i=a(e,2);return g(t,r,"M0,-"+i+"V"+i+"M0,0L-"+n+",-"+i+"V"+i+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(e,t,r){if(h(t))return o;var n=c/2.5,i=2*e*u(n),a=2*e*d(n);return g(t,r,"M0,0L"+-i+","+a+"L"+i+","+a+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(e,t,r){if(h(t))return o;var n=c/4,i=2*e*u(n),a=2*e*d(n);return g(t,r,"M0,0L"+-i+","+a+"A "+2*e+","+2*e+" 0 0 1 "+i+","+a+"Z")},backoff:.4,noDot:!0}},symbol_defs}var d3$p=d3Exports,Lib$1r=libExports,numberFormat$2=Lib$1r.numberFormat,isNumeric$j=fastIsnumeric,tinycolor$5=tinycolorExports,Registry$K=registry,Color$z=colorExports,Colorscale$1=colorscale,strTranslate$c=Lib$1r.strTranslate,svgTextUtils$d=svg_text_utils,xmlnsNamespaces$4=xmlns_namespaces,alignment=alignment$1,LINE_SPACING$7=alignment.LINE_SPACING,DESELECTDIM=interactions.DESELECTDIM,subTypes$7=subtypes$3,makeBubbleSizeFn$1=make_bubble_size_func,appendArrayPointValue$2=helpers$y.appendArrayPointValue,drawing=drawing$1.exports={};function setFillStyle(e,t,r){var n=t.fillpattern,i=n&&drawing.getPatternAttr(n.shape,0,"");if(i){var a=drawing.getPatternAttr(n.bgcolor,0,null),o=drawing.getPatternAttr(n.fgcolor,0,null),s=n.fgopacity,l=drawing.getPatternAttr(n.size,0,8),c=drawing.getPatternAttr(n.solidity,0,.3),u=t.uid;drawing.pattern(e,"point",r,u,i,l,c,void 0,n.fillmode,a,o,s)}else t.fillcolor&&e.call(Color$z.fill,t.fillcolor)}drawing.font=function(e,t,r,n){Lib$1r.isPlainObject(t)&&(n=t.color,r=t.size,t=t.family),t&&e.style("font-family",t),r+1&&e.style("font-size",r+"px"),n&&e.call(Color$z.fill,n)},drawing.setPosition=function(e,t,r){e.attr("x",t).attr("y",r)},drawing.setSize=function(e,t,r){e.attr("width",t).attr("height",r)},drawing.setRect=function(e,t,r,n,i){e.call(drawing.setPosition,t,r).call(drawing.setSize,n,i)},drawing.translatePoint=function(e,t,r,n){var i=r.c2p(e.x),a=n.c2p(e.y);return!!(isNumeric$j(i)&&isNumeric$j(a)&&t.node())&&("text"===t.node().nodeName?t.attr("x",i).attr("y",a):t.attr("transform",strTranslate$c(i,a)),!0)},drawing.translatePoints=function(e,t,r){e.each((function(e){var n=d3$p.select(this);drawing.translatePoint(e,n,t,r)}))},drawing.hideOutsideRangePoint=function(e,t,r,n,i,a){t.attr("display",r.isPtWithinRange(e,i)&&n.isPtWithinRange(e,a)?null:"none")},drawing.hideOutsideRangePoints=function(e,t){if(t._hasClipOnAxisFalse){var r=t.xaxis,n=t.yaxis;e.each((function(t){var i=t[0].trace,a=i.xcalendar,o=i.ycalendar,s=Registry$K.traceIs(i,"bar-like")?".bartext":".point,.textpoint";e.selectAll(s).each((function(e){drawing.hideOutsideRangePoint(e,d3$p.select(this),r,n,a,o)}))}))}},drawing.crispRound=function(e,t,r){return t&&isNumeric$j(t)?e._context.staticPlot?t:t<1?1:Math.round(t):r||0},drawing.singleLineStyle=function(e,t,r,n,i){t.style("fill","none");var a=(((e||[])[0]||{}).trace||{}).line||{},o=r||a.width||0,s=i||a.dash||"";Color$z.stroke(t,n||a.color),drawing.dashLine(t,s,o)},drawing.lineGroupStyle=function(e,t,r,n){e.style("fill","none").each((function(e){var i=(((e||[])[0]||{}).trace||{}).line||{},a=t||i.width||0,o=n||i.dash||"";d3$p.select(this).call(Color$z.stroke,r||i.color).call(drawing.dashLine,o,a)}))},drawing.dashLine=function(e,t,r){r=+r||0,t=drawing.dashStyle(t,r),e.style({"stroke-dasharray":t,"stroke-width":r+"px"})},drawing.dashStyle=function(e,t){t=+t||1;var r=Math.max(t,3);return"solid"===e?e="":"dot"===e?e=r+"px,"+r+"px":"dash"===e?e=3*r+"px,"+3*r+"px":"longdash"===e?e=5*r+"px,"+5*r+"px":"dashdot"===e?e=3*r+"px,"+r+"px,"+r+"px,"+r+"px":"longdashdot"===e&&(e=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"),e},drawing.singleFillStyle=function(e,t){var r=d3$p.select(e.node());setFillStyle(e,((r.data()[0]||[])[0]||{}).trace||{},t)},drawing.fillGroupStyle=function(e,t){e.style("stroke-width",0).each((function(e){var r=d3$p.select(this);e[0].trace&&setFillStyle(r,e[0].trace,t)}))};var SYMBOLDEFS=requireSymbol_defs();drawing.symbolNames=[],drawing.symbolFuncs=[],drawing.symbolBackOffs=[],drawing.symbolNeedLines={},drawing.symbolNoDot={},drawing.symbolNoFill={},drawing.symbolList=[],Object.keys(SYMBOLDEFS).forEach((function(e){var t=SYMBOLDEFS[e],r=t.n;drawing.symbolList.push(r,String(r),e,r+100,String(r+100),e+"-open"),drawing.symbolNames[r]=e,drawing.symbolFuncs[r]=t.f,drawing.symbolBackOffs[r]=t.backoff||0,t.needLine&&(drawing.symbolNeedLines[r]=!0),t.noDot?drawing.symbolNoDot[r]=!0:drawing.symbolList.push(r+200,String(r+200),e+"-dot",r+300,String(r+300),e+"-open-dot"),t.noFill&&(drawing.symbolNoFill[r]=!0)}));var MAXSYMBOL=drawing.symbolNames.length,DOTPATH="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";function makePointPath(e,t,r,n){var i=e%100;return drawing.symbolFuncs[i](t,r,n)+(e>=200?DOTPATH:"")}drawing.symbolNumber=function(e){if(isNumeric$j(e))e=+e;else if("string"==typeof e){var t=0;e.indexOf("-open")>0&&(t=100,e=e.replace("-open","")),e.indexOf("-dot")>0&&(t+=200,e=e.replace("-dot","")),(e=drawing.symbolNames.indexOf(e))>=0&&(e+=t)}return e%100>=MAXSYMBOL||e>=400?0:Math.floor(Math.max(e,0))};var HORZGRADIENT={x1:1,x2:0,y1:0,y2:0},VERTGRADIENT={x1:0,x2:0,y1:1,y2:0},stopFormatter=numberFormat$2("~f"),gradientInfo={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:HORZGRADIENT},horizontalreversed:{node:"linearGradient",attrs:HORZGRADIENT,reversed:!0},vertical:{node:"linearGradient",attrs:VERTGRADIENT},verticalreversed:{node:"linearGradient",attrs:VERTGRADIENT,reversed:!0}};drawing.gradient=function(e,t,r,n,i,a){for(var o=i.length,s=gradientInfo[n],l=new Array(o),c=0;c<o;c++)s.reversed?l[o-1-c]=[stopFormatter(100*(1-i[c][0])),i[c][1]]:l[c]=[stopFormatter(100*i[c][0]),i[c][1]];var u=t._fullLayout,d="g"+u._uid+"-"+r,h=u._defs.select(".gradients").selectAll("#"+d).data([n+l.join(";")],Lib$1r.identity);h.exit().remove(),h.enter().append(s.node).each((function(){var e=d3$p.select(this);s.attrs&&e.attr(s.attrs),e.attr("id",d);var t=e.selectAll("stop").data(l);t.exit().remove(),t.enter().append("stop"),t.each((function(e){var t=tinycolor$5(e[1]);d3$p.select(this).attr({offset:e[0]+"%","stop-color":Color$z.tinyRGB(t),"stop-opacity":t.getAlpha()})}))})),e.style(a,getFullUrl(d,t)).style(a+"-opacity",null),e.classed("gradient_filled",!0)},drawing.pattern=function(e,t,r,n,i,a,o,s,l,c,u,d){var h="legend"===t;s&&("overlay"===l?(c=s,u=Color$z.contrast(c)):(c=void 0,u=s));var g,p,f,m,y,b,v=r._fullLayout,x="p"+v._uid+"-"+n,B={},I=tinycolor$5(u),F=Color$z.tinyRGB(I),A=d*I.getAlpha();switch(i){case"/":g=a*Math.sqrt(2),p=a*Math.sqrt(2),b="path",B={d:f="M-"+g/4+","+p/4+"l"+g/2+",-"+p/2+"M0,"+p+"L"+g+",0M"+g/4*3+","+p/4*5+"l"+g/2+",-"+p/2,opacity:A,stroke:F,"stroke-width":(m=o*a)+"px"};break;case"\\":g=a*Math.sqrt(2),p=a*Math.sqrt(2),b="path",B={d:f="M"+g/4*3+",-"+p/4+"l"+g/2+","+p/2+"M0,0L"+g+","+p+"M-"+g/4+","+p/4*3+"l"+g/2+","+p/2,opacity:A,stroke:F,"stroke-width":(m=o*a)+"px"};break;case"x":g=a*Math.sqrt(2),p=a*Math.sqrt(2),f="M-"+g/4+","+p/4+"l"+g/2+",-"+p/2+"M0,"+p+"L"+g+",0M"+g/4*3+","+p/4*5+"l"+g/2+",-"+p/2+"M"+g/4*3+",-"+p/4+"l"+g/2+","+p/2+"M0,0L"+g+","+p+"M-"+g/4+","+p/4*3+"l"+g/2+","+p/2,m=a-a*Math.sqrt(1-o),b="path",B={d:f,opacity:A,stroke:F,"stroke-width":m+"px"};break;case"|":b="path",b="path",B={d:f="M"+(g=a)/2+",0L"+g/2+","+(p=a),opacity:A,stroke:F,"stroke-width":(m=o*a)+"px"};break;case"-":b="path",b="path",B={d:f="M0,"+(p=a)/2+"L"+(g=a)+","+p/2,opacity:A,stroke:F,"stroke-width":(m=o*a)+"px"};break;case"+":b="path",f="M"+(g=a)/2+",0L"+g/2+","+(p=a)+"M0,"+p/2+"L"+g+","+p/2,m=a-a*Math.sqrt(1-o),b="path",B={d:f,opacity:A,stroke:F,"stroke-width":m+"px"};break;case".":g=a,p=a,y=o<Math.PI/4?Math.sqrt(o*a*a/Math.PI):function(e,t,r,n,i){return n+(i-n)*(e-t)/(r-t)}(o,Math.PI/4,1,a/2,a/Math.sqrt(2)),b="circle",B={cx:g/2,cy:p/2,r:y,opacity:A,fill:F}}var C=[i||"noSh",c||"noBg",u||"noFg",a,o].join(";"),w=v._defs.select(".patterns").selectAll("#"+x).data([C],Lib$1r.identity);w.exit().remove(),w.enter().append("pattern").each((function(){var e=d3$p.select(this);if(e.attr({id:x,width:g+"px",height:p+"px",patternUnits:"userSpaceOnUse",patternTransform:h?"scale(0.8)":""}),c){var t=tinycolor$5(c),r=Color$z.tinyRGB(t),n=t.getAlpha(),i=e.selectAll("rect").data([0]);i.exit().remove(),i.enter().append("rect").attr({width:g+"px",height:p+"px",fill:r,"fill-opacity":n})}var a=e.selectAll(b).data([0]);a.exit().remove(),a.enter().append(b).attr(B)})),e.style("fill",getFullUrl(x,r)).style("fill-opacity",null),e.classed("pattern_filled",!0)},drawing.initGradients=function(e){var t=e._fullLayout;Lib$1r.ensureSingle(t._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),d3$p.select(e).selectAll(".gradient_filled").classed("gradient_filled",!1)},drawing.initPatterns=function(e){var t=e._fullLayout;Lib$1r.ensureSingle(t._defs,"g","patterns").selectAll("pattern").remove(),d3$p.select(e).selectAll(".pattern_filled").classed("pattern_filled",!1)},drawing.getPatternAttr=function(e,t,r){return e&&Lib$1r.isArrayOrTypedArray(e)?t<e.length?e[t]:r:e},drawing.pointStyle=function(e,t,r){if(e.size()){var n=drawing.makePointStyleFns(t);e.each((function(e){drawing.singlePointStyle(e,d3$p.select(this),t,n,r)}))}},drawing.singlePointStyle=function(e,t,r,n,i){var a=r.marker,o=a.line;if(t.style("opacity",n.selectedOpacityFn?n.selectedOpacityFn(e):void 0===e.mo?a.opacity:e.mo),n.ms2mrc){var s;s="various"===e.ms||"various"===a.size?3:n.ms2mrc(e.ms),e.mrc=s,n.selectedSizeFn&&(s=e.mrc=n.selectedSizeFn(e));var l=drawing.symbolNumber(e.mx||a.symbol)||0;e.om=l%200>=100;var c=getMarkerAngle(e,r),u=getMarkerStandoff(e,r);t.attr("d",makePointPath(l,s,c,u))}var d,h,g,p=!1;if(e.so)g=o.outlierwidth,h=o.outliercolor,d=a.outliercolor;else{var f=(o||{}).width;g=(e.mlw+1||f+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0,h="mlc"in e?e.mlcc=n.lineScale(e.mlc):Lib$1r.isArrayOrTypedArray(o.color)?Color$z.defaultLine:o.color,Lib$1r.isArrayOrTypedArray(a.color)&&(d=Color$z.defaultLine,p=!0),d="mc"in e?e.mcc=n.markerScale(e.mc):a.color||"rgba(0,0,0,0)",n.selectedColorFn&&(d=n.selectedColorFn(e))}if(e.om)t.call(Color$z.stroke,d).style({"stroke-width":(g||1)+"px",fill:"none"});else{t.style("stroke-width",(e.isBlank?0:g)+"px");var m=a.gradient,y=e.mgt;y?p=!0:y=m&&m.type,Lib$1r.isArrayOrTypedArray(y)&&(y=y[0],gradientInfo[y]||(y=0));var b=a.pattern,v=b&&drawing.getPatternAttr(b.shape,e.i,"");if(y&&"none"!==y){var x=e.mgc;x?p=!0:x=m.color;var B=r.uid;p&&(B+="-"+e.i),drawing.gradient(t,i,B,y,[[0,x],[1,d]],"fill")}else if(v){var I=drawing.getPatternAttr(b.bgcolor,e.i,null),F=drawing.getPatternAttr(b.fgcolor,e.i,null),A=b.fgopacity,C=drawing.getPatternAttr(b.size,e.i,8),w=drawing.getPatternAttr(b.solidity,e.i,.3),Q=e.mcc||Lib$1r.isArrayOrTypedArray(b.shape)||Lib$1r.isArrayOrTypedArray(b.bgcolor)||Lib$1r.isArrayOrTypedArray(b.size)||Lib$1r.isArrayOrTypedArray(b.solidity),U=r.uid;Q&&(U+="-"+e.i),drawing.pattern(t,"point",i,U,v,C,w,e.mcc,b.fillmode,I,F,A)}else Color$z.fill(t,d);g&&Color$z.stroke(t,h)}},drawing.makePointStyleFns=function(e){var t={},r=e.marker;return t.markerScale=drawing.tryColorscale(r,""),t.lineScale=drawing.tryColorscale(r,"line"),Registry$K.traceIs(e,"symbols")&&(t.ms2mrc=subTypes$7.isBubble(e)?makeBubbleSizeFn$1(e):function(){return(r.size||6)/2}),e.selectedpoints&&Lib$1r.extendFlat(t,drawing.makeSelectedPointStyleFns(e)),t},drawing.makeSelectedPointStyleFns=function(e){var t={},r=e.selected||{},n=e.unselected||{},i=e.marker||{},a=r.marker||{},o=n.marker||{},s=i.opacity,l=a.opacity,c=o.opacity,u=void 0!==l,d=void 0!==c;(Lib$1r.isArrayOrTypedArray(s)||u||d)&&(t.selectedOpacityFn=function(e){var t=void 0===e.mo?i.opacity:e.mo;return e.selected?u?l:t:d?c:DESELECTDIM*t});var h=i.color,g=a.color,p=o.color;(g||p)&&(t.selectedColorFn=function(e){var t=e.mcc||h;return e.selected?g||t:p||t});var f=i.size,m=a.size,y=o.size,b=void 0!==m,v=void 0!==y;return Registry$K.traceIs(e,"symbols")&&(b||v)&&(t.selectedSizeFn=function(e){var t=e.mrc||f/2;return e.selected?b?m/2:t:v?y/2:t}),t},drawing.makeSelectedTextStyleFns=function(e){var t={},r=e.selected||{},n=e.unselected||{},i=e.textfont||{},a=r.textfont||{},o=n.textfont||{},s=i.color,l=a.color,c=o.color;return t.selectedTextColorFn=function(e){var t=e.tc||s;return e.selected?l||t:c||(l?t:Color$z.addOpacity(t,DESELECTDIM))},t},drawing.selectedPointStyle=function(e,t){if(e.size()&&t.selectedpoints){var r=drawing.makeSelectedPointStyleFns(t),n=t.marker||{},i=[];r.selectedOpacityFn&&i.push((function(e,t){e.style("opacity",r.selectedOpacityFn(t))})),r.selectedColorFn&&i.push((function(e,t){Color$z.fill(e,r.selectedColorFn(t))})),r.selectedSizeFn&&i.push((function(e,i){var a=i.mx||n.symbol||0,o=r.selectedSizeFn(i);e.attr("d",makePointPath(drawing.symbolNumber(a),o,getMarkerAngle(i,t),getMarkerStandoff(i,t))),i.mrc2=o})),i.length&&e.each((function(e){for(var t=d3$p.select(this),r=0;r<i.length;r++)i[r](t,e)}))}},drawing.tryColorscale=function(e,t){var r=t?Lib$1r.nestedProperty(e,t).get():e;if(r){var n=r.color;if((r.colorscale||r._colorAx)&&Lib$1r.isArrayOrTypedArray(n))return Colorscale$1.makeColorScaleFuncFromTrace(r)}return Lib$1r.identity};var TEXTOFFSETSIGN={start:1,end:-1,middle:0,bottom:1,top:-1};function textPointPosition(e,t,r,n,i){var a=d3$p.select(e.node().parentNode),o=-1!==t.indexOf("top")?"top":-1!==t.indexOf("bottom")?"bottom":"middle",s=-1!==t.indexOf("left")?"end":-1!==t.indexOf("right")?"start":"middle",l=n?n/.8+1:0,c=(svgTextUtils$d.lineCount(e)-1)*LINE_SPACING$7+1,u=TEXTOFFSETSIGN[s]*l,d=.75*r+TEXTOFFSETSIGN[o]*l+(TEXTOFFSETSIGN[o]-1)*c*r/2;e.attr("text-anchor",s),i||a.attr("transform",strTranslate$c(u,d))}function extracTextFontSize(e,t){var r=e.ts||t.textfont.size;return isNumeric$j(r)&&r>0?r:0}drawing.textPointStyle=function(e,t,r){if(e.size()){var n;if(t.selectedpoints){var i=drawing.makeSelectedTextStyleFns(t);n=i.selectedTextColorFn}var a=t.texttemplate,o=r._fullLayout;e.each((function(e){var i=d3$p.select(this),s=a?Lib$1r.extractOption(e,t,"txt","texttemplate"):Lib$1r.extractOption(e,t,"tx","text");if(s||0===s){if(a){var l=t._module.formatLabels,c=l?l(e,t,o):{},u={};appendArrayPointValue$2(u,t,e.i);var d=t._meta||{};s=Lib$1r.texttemplateString(s,c,o._d3locale,u,e,d)}var h=e.tp||t.textposition,g=extracTextFontSize(e,t),p=n?n(e):e.tc||t.textfont.color;i.call(drawing.font,e.tf||t.textfont.family,g,p).text(s).call(svgTextUtils$d.convertToTspans,r).call(textPointPosition,h,g,e.mrc)}else i.remove()}))}},drawing.selectedTextStyle=function(e,t){if(e.size()&&t.selectedpoints){var r=drawing.makeSelectedTextStyleFns(t);e.each((function(e){var n=d3$p.select(this),i=r.selectedTextColorFn(e),a=e.tp||t.textposition,o=extracTextFontSize(e,t);Color$z.fill(n,i);var s=Registry$K.traceIs(t,"bar-like");textPointPosition(n,a,o,e.mrc2||e.mrc,s)}))}};var lastDrawnX,lastDrawnY,CatmullRomExp=.5;function roundEnd(e,t,r){return r&&(e=applyBackoff(e)),t?roundY(e[1]):roundX(e[0])}function roundX(e){var t=d3$p.round(e,2);return lastDrawnX=t,t}function roundY(e){var t=d3$p.round(e,2);return lastDrawnY=t,t}function makeTangent(e,t,r,n){var i=e[0]-t[0],a=e[1]-t[1],o=r[0]-t[0],s=r[1]-t[1],l=Math.pow(i*i+a*a,CatmullRomExp/2),c=Math.pow(o*o+s*s,CatmullRomExp/2),u=(c*c*i-l*l*o)*n,d=(c*c*a-l*l*s)*n,h=3*c*(l+c),g=3*l*(l+c);return[[roundX(t[0]+(h&&u/h)),roundY(t[1]+(h&&d/h))],[roundX(t[0]-(g&&u/g)),roundY(t[1]-(g&&d/g))]]}drawing.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");var r,n="M"+e[0],i=[];for(r=1;r<e.length-1;r++)i.push(makeTangent(e[r-1],e[r],e[r+1],t));for(n+="Q"+i[0][0]+" "+e[1],r=2;r<e.length-1;r++)n+="C"+i[r-2][1]+" "+i[r-1][0]+" "+e[r];return n+="Q"+i[e.length-3][1]+" "+e[e.length-1]},drawing.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";var r,n="M"+e[0],i=e.length-1,a=[makeTangent(e[i],e[0],e[1],t)];for(r=1;r<i;r++)a.push(makeTangent(e[r-1],e[r],e[r+1],t));for(a.push(makeTangent(e[i-1],e[i],e[0],t)),r=1;r<=i;r++)n+="C"+a[r-1][1]+" "+a[r][0]+" "+e[r];return n+="C"+a[i][1]+" "+a[0][0]+" "+e[0]+"Z"};var STEPPATH={hv:function(e,t,r){return"H"+roundX(t[0])+"V"+roundEnd(t,1,r)},vh:function(e,t,r){return"V"+roundY(t[1])+"H"+roundEnd(t,0,r)},hvh:function(e,t,r){return"H"+roundX((e[0]+t[0])/2)+"V"+roundY(t[1])+"H"+roundEnd(t,0,r)},vhv:function(e,t,r){return"V"+roundY((e[1]+t[1])/2)+"H"+roundX(t[0])+"V"+roundEnd(t,1,r)}},STEPLINEAR=function(e,t,r){return"L"+roundEnd(t,0,r)+","+roundEnd(t,1,r)};function applyBackoff(e,t){var r=e.backoff,n=e.trace,i=e.d,a=e.i;if(r&&n&&n.marker&&n.marker.angle%360==0&&n.line&&"spline"!==n.line.shape){var o=Lib$1r.isArrayOrTypedArray(r),s=e,l=t?t[0]:lastDrawnX||0,c=t?t[1]:lastDrawnY||0,u=s[0],d=s[1],h=u-l,g=d-c,p=Math.atan2(g,h),f=o?r[a]:r;if("auto"===f){var m=s.i;"scatter"===n.type&&m--;var y=s.marker,b=y.symbol;Lib$1r.isArrayOrTypedArray(b)&&(b=b[m]);var v=y.size;Lib$1r.isArrayOrTypedArray(v)&&(v=v[m]),f=y?drawing.symbolBackOffs[drawing.symbolNumber(b)]*v:0,f+=drawing.getMarkerStandoff(i[m],n)||0}var x=u-f*Math.cos(p),B=d-f*Math.sin(p);(x<=u&&x>=l||x>=u&&x<=l)&&(B<=d&&B>=c||B>=d&&B<=c)&&(e=[x,B])}return e}drawing.steps=function(e){var t=STEPPATH[e]||STEPLINEAR;return function(e){for(var r="M"+roundX(e[0][0])+","+roundY(e[0][1]),n=e.length,i=1;i<n;i++)r+=t(e[i-1],e[i],i===n-1);return r}},drawing.applyBackoff=applyBackoff,drawing.makeTester=function(){var e=Lib$1r.ensureSingleById(d3$p.select("body"),"svg","js-plotly-tester",(function(e){e.attr(xmlnsNamespaces$4.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})})),t=Lib$1r.ensureSingle(e,"path","js-reference-point",(function(e){e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})}));drawing.tester=e,drawing.testref=t},drawing.savedBBoxes={};var savedBBoxesCount=0,maxSavedBBoxes=1e4;function nodeHash(e){var t=e.getAttribute("data-unformatted");if(null!==t)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}function getFullUrl(e,t){if(!e)return null;var r=t._context,n=r._exportedPlot?"":r._baseUrl||"";return n?"url('"+n+"#"+e+"')":"url(#"+e+")"}drawing.bBox=function(e,t,r){var n,i,a;if(r||(r=nodeHash(e)),r){if(n=drawing.savedBBoxes[r])return Lib$1r.extendFlat({},n)}else if(1===e.childNodes.length){var o=e.childNodes[0];if(r=nodeHash(o)){var s=+o.getAttribute("x")||0,l=+o.getAttribute("y")||0,c=o.getAttribute("transform");if(!c){var u=drawing.bBox(o,!1,r);return s&&(u.left+=s,u.right+=s),l&&(u.top+=l,u.bottom+=l),u}if(r+="~"+s+"~"+l+"~"+c,n=drawing.savedBBoxes[r])return Lib$1r.extendFlat({},n)}}t?i=e:(a=drawing.tester.node(),i=e.cloneNode(!0),a.appendChild(i)),d3$p.select(i).attr("transform",null).call(svgTextUtils$d.positionText,0,0);var d=i.getBoundingClientRect(),h=drawing.testref.node().getBoundingClientRect();t||a.removeChild(i);var g={height:d.height,width:d.width,left:d.left-h.left,top:d.top-h.top,right:d.right-h.left,bottom:d.bottom-h.top};return savedBBoxesCount>=maxSavedBBoxes&&(drawing.savedBBoxes={},savedBBoxesCount=0),r&&(drawing.savedBBoxes[r]=g),savedBBoxesCount++,Lib$1r.extendFlat({},g)},drawing.setClipUrl=function(e,t,r){e.attr("clip-path",getFullUrl(t,r))},drawing.getTranslate=function(e){var t=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,(function(e,t,r){return[t,r].join(" ")})).split(" ");return{x:+t[0]||0,y:+t[1]||0}},drawing.setTranslate=function(e,t,r){var n=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",a=e[n]("transform")||"";return t=t||0,r=r||0,a=a.replace(/(\btranslate\(.*?\);?)/,"").trim(),a=(a+=strTranslate$c(t,r)).trim(),e[i]("transform",a),a},drawing.getScale=function(e){var t=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,(function(e,t,r){return[t,r].join(" ")})).split(" ");return{x:+t[0]||1,y:+t[1]||1}},drawing.setScale=function(e,t,r){var n=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",a=e[n]("transform")||"";return t=t||1,r=r||1,a=a.replace(/(\bscale\(.*?\);?)/,"").trim(),a=(a+="scale("+t+","+r+")").trim(),e[i]("transform",a),a};var SCALE_RE=/\s*sc.*/;drawing.setPointGroupScale=function(e,t,r){if(t=t||1,r=r||1,e){var n=1===t&&1===r?"":"scale("+t+","+r+")";e.each((function(){var e=(this.getAttribute("transform")||"").replace(SCALE_RE,"");e=(e+=n).trim(),this.setAttribute("transform",e)}))}};var TEXT_POINT_LAST_TRANSLATION_RE=/translate\([^)]*\)\s*$/;function getMarkerStandoff(e,t){var r;return e&&(r=e.mf),void 0===r&&(r=t.marker&&t.marker.standoff||0),t._geo||t._xA?r:-r}drawing.setTextPointsScale=function(e,t,r){e&&e.each((function(){var e,n=d3$p.select(this),i=n.select("text");if(i.node()){var a=parseFloat(i.attr("x")||0),o=parseFloat(i.attr("y")||0),s=(n.attr("transform")||"").match(TEXT_POINT_LAST_TRANSLATION_RE);e=1===t&&1===r?[]:[strTranslate$c(a,o),"scale("+t+","+r+")",strTranslate$c(-a,-o)],s&&e.push(s),n.attr("transform",e.join(""))}}))},drawing.getMarkerStandoff=getMarkerStandoff;var previousLon,previousLat,previousX,previousY,previousI,previousTraceUid,atan2=Math.atan2,cos=Math.cos,sin=Math.sin;function rotate(e,t){var r=t[0],n=t[1];return[r*cos(e)-n*sin(e),r*sin(e)+n*cos(e)]}function getMarkerAngle(e,t){var r,n,i=e.ma;void 0===i&&(i=t.marker.angle||0);var a=t.marker.angleref;if("previous"===a||"north"===a){if(t._geo){var o=t._geo.project(e.lonlat);r=o[0],n=o[1]}else{var s=t._xA,l=t._yA;if(!s||!l)return 90;r=s.c2p(e.x),n=l.c2p(e.y)}if(t._geo){var c,u=e.lonlat[0],d=e.lonlat[1],h=t._geo.project([u,d+1e-5]),g=t._geo.project([u+1e-5,d]),p=atan2(g[1]-n,g[0]-r),f=atan2(h[1]-n,h[0]-r);if("north"===a)c=i/180*Math.PI;else if("previous"===a){var m=u/180*Math.PI,y=d/180*Math.PI,b=previousLon/180*Math.PI,v=previousLat/180*Math.PI,x=b-m,B=cos(v)*sin(x),I=sin(v)*cos(y)-cos(v)*sin(y)*cos(x);c=-atan2(B,I)-Math.PI,previousLon=u,previousLat=d}var F=rotate(p,[cos(c),0]),A=rotate(f,[sin(c),0]);i=atan2(F[1]+A[1],F[0]+A[0])/Math.PI*180,"previous"!==a||previousTraceUid===t.uid&&e.i===previousI+1||(i=null)}if("previous"===a&&!t._geo)if(previousTraceUid===t.uid&&e.i===previousI+1&&isNumeric$j(r)&&isNumeric$j(n)){var C=r-previousX,w=n-previousY,Q=t.line&&t.line.shape||"",U=Q.slice(Q.length-1);"h"===U&&(w=0),"v"===U&&(C=0),i+=atan2(w,C)/Math.PI*180+90}else i=null}return previousX=r,previousY=n,previousI=e.i,previousTraceUid=t.uid,i}drawing.getMarkerAngle=getMarkerAngle;var d3$o=d3Exports,isNumeric$i=fastIsnumeric,Plots$c=plotsExports,Registry$J=registry,Lib$1q=libExports,strTranslate$b=Lib$1q.strTranslate,Drawing$m=drawingExports,Color$y=colorExports,svgTextUtils$c=svg_text_utils,interactConstants=interactions,OPPOSITE_SIDE$1=alignment$1.OPPOSITE_SIDE,numStripRE=/ [XY][0-9]* /;function draw$c(e,t,r){var n,i=r.propContainer,a=r.propName,o=r.placeholder,s=r.traceIndex,l=r.avoid||{},c=r.attributes,u=r.transform,d=r.containerGroup,h=e._fullLayout,g=1,p=!1,f=i.title,m=(f&&f.text?f.text:"").trim(),y=f&&f.font?f.font:{},b=y.family,v=y.size,x=y.color;"title.text"===a?n="titleText":-1!==a.indexOf("axis")?n="axisTitleText":a.indexOf(!0)&&(n="colorbarTitleText");var B=e._context.edits[n];""===m?g=0:m.replace(numStripRE," % ")===o.replace(numStripRE," % ")&&(g=.2,p=!0,B||(m="")),r._meta?m=Lib$1q.templateString(m,r._meta):h._meta&&(m=Lib$1q.templateString(m,h._meta));var I,F=m||B;d||(d=Lib$1q.ensureSingle(h._infolayer,"g","g-"+t),I=h._hColorbarMoveTitle);var A=d.selectAll("text").data(F?[0]:[]);if(A.enter().append("text"),A.text(m).attr("class",t),A.exit().remove(),!F)return d;function C(e){Lib$1q.syncOrAsync([w,Q],e)}function w(t){var r;return!u&&I&&(u={}),u?(r="",u.rotate&&(r+="rotate("+[u.rotate,c.x,c.y]+")"),(u.offset||I)&&(r+=strTranslate$b(0,(u.offset||0)-(I||0)))):r=null,t.attr("transform",r),t.style({"font-family":b,"font-size":d3$o.round(v,2)+"px",fill:Color$y.rgb(x),opacity:g*Color$y.opacity(x),"font-weight":Plots$c.fontWeight}).attr(c).call(svgTextUtils$c.convertToTspans,e),Plots$c.previousPromises(e)}function Q(t){var r=d3$o.select(t.node().parentNode);if(l&&l.selection&&l.side&&m){r.attr("transform",null);var n=OPPOSITE_SIDE$1[l.side],a="left"===l.side||"top"===l.side?-1:1,o=isNumeric$i(l.pad)?l.pad:2,s=Drawing$m.bBox(r.node()),c={t:0,b:0,l:0,r:0},u=e._fullLayout._reservedMargin;for(var d in u)for(var g in u[d]){var p=u[d][g];c[g]=Math.max(c[g],p)}var f={left:c.l,top:c.t,right:h.width-c.r,bottom:h.height-c.b},y=l.maxShift||a*(f[l.side]-s[l.side]),b=0;if(y<0)b=y;else{var v=l.offsetLeft||0,x=l.offsetTop||0;s.left-=v,s.right-=v,s.top-=x,s.bottom-=x,l.selection.each((function(){var e=Drawing$m.bBox(this);Lib$1q.bBoxIntersect(s,e,o)&&(b=Math.max(b,a*(e[l.side]-s[n])+o))})),b=Math.min(y,b),i._titleScoot=Math.abs(b)}if(b>0||y<0){var B={left:[-b,0],right:[b,0],top:[0,-b],bottom:[0,b]}[l.side];r.attr("transform",strTranslate$b(B[0],B[1]))}}}return A.call(C),B&&(m?A.on(".opacity",null):(g=0,p=!0,A.text(o).on("mouseover.opacity",(function(){d3$o.select(this).transition().duration(interactConstants.SHOW_PLACEHOLDER).style("opacity",1)})).on("mouseout.opacity",(function(){d3$o.select(this).transition().duration(interactConstants.HIDE_PLACEHOLDER).style("opacity",0)}))),A.call(svgTextUtils$c.makeEditable,{gd:e}).on("edit",(function(t){void 0!==s?Registry$J.call("_guiRestyle",e,a,t,s):Registry$J.call("_guiRelayout",e,a,t)})).on("cancel",(function(){this.text(this.attr("data-unformatted")).call(C)})).on("input",(function(e){this.text(e||" ").call(svgTextUtils$c.positionText,c.x,c.y)}))),A.classed("js-placeholder",p),d}var titles={draw:draw$c},d3$n=d3Exports,utcFormat=require$$1.utcFormat,Lib$1p=libExports,numberFormat$1=Lib$1p.numberFormat,isNumeric$h=fastIsnumeric,cleanNumber$1=Lib$1p.cleanNumber,ms2DateTime=Lib$1p.ms2DateTime,dateTime2ms$1=Lib$1p.dateTime2ms,ensureNumber=Lib$1p.ensureNumber,isArrayOrTypedArray$7=Lib$1p.isArrayOrTypedArray,numConstants$3=numerical,FP_SAFE=numConstants$3.FP_SAFE,BADNUM$7=numConstants$3.BADNUM,LOG_CLIP$1=numConstants$3.LOG_CLIP,ONEWEEK$2=numConstants$3.ONEWEEK,ONEDAY$1=numConstants$3.ONEDAY,ONEHOUR$1=numConstants$3.ONEHOUR,ONEMIN$1=numConstants$3.ONEMIN,ONESEC$1=numConstants$3.ONESEC,axisIds$8=axis_ids,constants$H=constants$K,HOUR_PATTERN=constants$H.HOUR_PATTERN,WEEKDAY_PATTERN=constants$H.WEEKDAY_PATTERN;function fromLog(e){return Math.pow(10,e)}function isValidCategory(e){return null!=e}var autorange$2,hasRequiredAutorange,set_convert=function(e,t){t=t||{};var r=e._id||"x",n=r.charAt(0);function i(t,r){if(t>0)return Math.log(t)/Math.LN10;if(t<=0&&r&&e.range&&2===e.range.length){var n=e.range[0],i=e.range[1];return.5*(n+i-2*LOG_CLIP$1*Math.abs(n-i))}return BADNUM$7}function a(t,r,n,i){if((i||{}).msUTC&&isNumeric$h(t))return+t;var a=dateTime2ms$1(t,n||e.calendar);if(a===BADNUM$7){if(!isNumeric$h(t))return BADNUM$7;t=+t;var o=Math.floor(10*Lib$1p.mod(t+.05,1)),s=Math.round(t-o/10);a=dateTime2ms$1(new Date(s))+o/10}return a}function o(t,r,n){return ms2DateTime(t,r,n||e.calendar)}function s(t){return e._categories[Math.round(t)]}function l(t){if(isValidCategory(t)){if(void 0===e._categoriesMap&&(e._categoriesMap={}),void 0!==e._categoriesMap[t])return e._categoriesMap[t];e._categories.push("number"==typeof t?String(t):t);var r=e._categories.length-1;return e._categoriesMap[t]=r,r}return BADNUM$7}function c(t){if(e._categoriesMap)return e._categoriesMap[t]}function u(e){var t=c(e);return void 0!==t?t:isNumeric$h(e)?+e:void 0}function d(e){return isNumeric$h(e)?+e:c(e)}function h(e,t,r){return d3$n.round(r+t*e,2)}function g(e,t,r){return(e-r)/t}var p=function(t){return isNumeric$h(t)?h(t,e._m,e._b):BADNUM$7},f=function(t){return g(t,e._m,e._b)};if(e.rangebreaks){var m="y"===n;p=function(t){if(!isNumeric$h(t))return BADNUM$7;var r=e._rangebreaks.length;if(!r)return h(t,e._m,e._b);var n=m;e.range[0]>e.range[1]&&(n=!n);for(var i=n?-1:1,a=i*t,o=0,s=0;s<r;s++){var l=i*e._rangebreaks[s].min,c=i*e._rangebreaks[s].max;if(a<l)break;if(!(a>c)){o=a<(l+c)/2?s:s+1;break}o=s+1}var u=e._B[o]||0;return isFinite(u)?h(t,e._m2,u):0},f=function(t){var r=e._rangebreaks.length;if(!r)return g(t,e._m,e._b);for(var n=0,i=0;i<r&&!(t<e._rangebreaks[i].pmin);i++)t>e._rangebreaks[i].pmax&&(n=i+1);return g(t,e._m2,e._B[n])}}e.c2l="log"===e.type?i:ensureNumber,e.l2c="log"===e.type?fromLog:ensureNumber,e.l2p=p,e.p2l=f,e.c2p="log"===e.type?function(e,t){return p(i(e,t))}:p,e.p2c="log"===e.type?function(e){return fromLog(f(e))}:f,-1!==["linear","-"].indexOf(e.type)?(e.d2r=e.r2d=e.d2c=e.r2c=e.d2l=e.r2l=cleanNumber$1,e.c2d=e.c2r=e.l2d=e.l2r=ensureNumber,e.d2p=e.r2p=function(t){return e.l2p(cleanNumber$1(t))},e.p2d=e.p2r=f,e.cleanPos=ensureNumber):"log"===e.type?(e.d2r=e.d2l=function(e,t){return i(cleanNumber$1(e),t)},e.r2d=e.r2c=function(e){return fromLog(cleanNumber$1(e))},e.d2c=e.r2l=cleanNumber$1,e.c2d=e.l2r=ensureNumber,e.c2r=i,e.l2d=fromLog,e.d2p=function(t,r){return e.l2p(e.d2r(t,r))},e.p2d=function(e){return fromLog(f(e))},e.r2p=function(t){return e.l2p(cleanNumber$1(t))},e.p2r=f,e.cleanPos=ensureNumber):"date"===e.type?(e.d2r=e.r2d=Lib$1p.identity,e.d2c=e.r2c=e.d2l=e.r2l=a,e.c2d=e.c2r=e.l2d=e.l2r=o,e.d2p=e.r2p=function(t,r,n){return e.l2p(a(t,0,n))},e.p2d=e.p2r=function(e,t,r){return o(f(e),t,r)},e.cleanPos=function(t){return Lib$1p.cleanDate(t,BADNUM$7,e.calendar)}):"category"===e.type?(e.d2c=e.d2l=l,e.r2d=e.c2d=e.l2d=s,e.d2r=e.d2l_noadd=u,e.r2c=function(t){var r=d(t);return void 0!==r?r:e.fraction2r(.5)},e.l2r=e.c2r=ensureNumber,e.r2l=d,e.d2p=function(t){return e.l2p(e.r2c(t))},e.p2d=function(e){return s(f(e))},e.r2p=e.d2p,e.p2r=f,e.cleanPos=function(e){return"string"==typeof e&&""!==e?e:ensureNumber(e)}):"multicategory"===e.type&&(e.r2d=e.c2d=e.l2d=s,e.d2r=e.d2l_noadd=u,e.r2c=function(t){var r=u(t);return void 0!==r?r:e.fraction2r(.5)},e.r2c_just_indices=c,e.l2r=e.c2r=ensureNumber,e.r2l=u,e.d2p=function(t){return e.l2p(e.r2c(t))},e.p2d=function(e){return s(f(e))},e.r2p=e.d2p,e.p2r=f,e.cleanPos=function(e){return Array.isArray(e)||"string"==typeof e&&""!==e?e:ensureNumber(e)},e.setupMultiCategory=function(i){var a,o,s=e._traceIndices,c=e._matchGroup;if(c&&0===e._categories.length)for(var u in c)if(u!==r){var d=t[axisIds$8.id2name(u)];s=s.concat(d._traceIndices)}var h=[[0,{}],[0,{}]],g=[];for(a=0;a<s.length;a++){var p=i[s[a]];if(n in p){var f=p[n],m=p._length||Lib$1p.minRowLength(f);if(isArrayOrTypedArray$7(f[0])&&isArrayOrTypedArray$7(f[1]))for(o=0;o<m;o++){var y=f[0][o],b=f[1][o];isValidCategory(y)&&isValidCategory(b)&&(g.push([y,b]),y in h[0][1]||(h[0][1][y]=h[0][0]++),b in h[1][1]||(h[1][1][b]=h[1][0]++))}}}for(g.sort((function(e,t){var r=h[0][1],n=r[e[0]]-r[t[0]];if(n)return n;var i=h[1][1];return i[e[1]]-i[t[1]]})),a=0;a<g.length;a++)l(g[a])}),e.fraction2r=function(t){var r=e.r2l(e.range[0]),n=e.r2l(e.range[1]);return e.l2r(r+t*(n-r))},e.r2fraction=function(t){var r=e.r2l(e.range[0]),n=e.r2l(e.range[1]);return(e.r2l(t)-r)/(n-r)},e.cleanRange=function(t,r){r||(r={}),t||(t="range");var i,a,o=Lib$1p.nestedProperty(e,t).get();if(a=(a="date"===e.type?Lib$1p.dfltRange(e.calendar):"y"===n?constants$H.DFLTRANGEY:"realaxis"===e._name?[0,1]:r.dfltRange||constants$H.DFLTRANGEX).slice(),"tozero"!==e.rangemode&&"nonnegative"!==e.rangemode||(a[0]=0),o&&2===o.length)for("date"!==e.type||e.autorange||(o[0]=Lib$1p.cleanDate(o[0],BADNUM$7,e.calendar),o[1]=Lib$1p.cleanDate(o[1],BADNUM$7,e.calendar)),i=0;i<2;i++)if("date"===e.type){if(!Lib$1p.isDateTime(o[i],e.calendar)){e[t]=a;break}if(e.r2l(o[0])===e.r2l(o[1])){var s=Lib$1p.constrain(e.r2l(o[0]),Lib$1p.MIN_MS+1e3,Lib$1p.MAX_MS-1e3);o[0]=e.l2r(s-1e3),o[1]=e.l2r(s+1e3);break}}else{if(!isNumeric$h(o[i])){if(!isNumeric$h(o[1-i])){e[t]=a;break}o[i]=o[1-i]*(i?10:.1)}if(o[i]<-FP_SAFE?o[i]=-FP_SAFE:o[i]>FP_SAFE&&(o[i]=FP_SAFE),o[0]===o[1]){var l=Math.max(1,Math.abs(1e-6*o[0]));o[0]-=l,o[1]+=l}}else Lib$1p.nestedProperty(e,t).set(a)},e.setScale=function(r){var i=t._size;if(e.overlaying){var a=axisIds$8.getFromId({_fullLayout:t},e.overlaying);e.domain=a.domain}var o=r&&e._r?"_r":"range",s=e.calendar;e.cleanRange(o);var l,c,u=e.r2l(e[o][0],s),d=e.r2l(e[o][1],s),h="y"===n;if((h?(e._offset=i.t+(1-e.domain[1])*i.h,e._length=i.h*(e.domain[1]-e.domain[0]),e._m=e._length/(u-d),e._b=-e._m*d):(e._offset=i.l+e.domain[0]*i.w,e._length=i.w*(e.domain[1]-e.domain[0]),e._m=e._length/(d-u),e._b=-e._m*u),e._rangebreaks=[],e._lBreaks=0,e._m2=0,e._B=[],e.rangebreaks)&&(e._rangebreaks=e.locateBreaks(Math.min(u,d),Math.max(u,d)),e._rangebreaks.length)){for(l=0;l<e._rangebreaks.length;l++)c=e._rangebreaks[l],e._lBreaks+=Math.abs(c.max-c.min);var g=h;u>d&&(g=!g),g&&e._rangebreaks.reverse();var f=g?-1:1;for(e._m2=f*e._length/(Math.abs(d-u)-e._lBreaks),e._B.push(-e._m2*(h?d:u)),l=0;l<e._rangebreaks.length;l++)c=e._rangebreaks[l],e._B.push(e._B[e._B.length-1]-f*e._m2*(c.max-c.min));for(l=0;l<e._rangebreaks.length;l++)(c=e._rangebreaks[l]).pmin=p(c.min),c.pmax=p(c.max)}if(!isFinite(e._m)||!isFinite(e._b)||e._length<0)throw t._replotting=!1,new Error("Something went wrong with axis scaling")},e.maskBreaks=function(t){var r,n,i,a,o,s=e.rangebreaks||[];s._cachedPatterns||(s._cachedPatterns=s.map((function(t){return t.enabled&&t.bounds?Lib$1p.simpleMap(t.bounds,t.pattern?cleanNumber$1:e.d2c):null}))),s._cachedValues||(s._cachedValues=s.map((function(t){return t.enabled&&t.values?Lib$1p.simpleMap(t.values,e.d2c).sort(Lib$1p.sorterAsc):null})));for(var l=0;l<s.length;l++){var c=s[l];if(c.enabled)if(c.bounds){var u=c.pattern;switch(n=(r=s._cachedPatterns[l])[0],i=r[1],u){case WEEKDAY_PATTERN:a=(o=new Date(t)).getUTCDay(),n>i&&(i+=7,a<n&&(a+=7));break;case HOUR_PATTERN:a=(o=new Date(t)).getUTCHours()+(o.getUTCMinutes()/60+o.getUTCSeconds()/3600+o.getUTCMilliseconds()/36e5),n>i&&(i+=24,a<n&&(a+=24));break;case"":a=t}if(a>=n&&a<i)return BADNUM$7}else for(var d=s._cachedValues[l],h=0;h<d.length;h++)if(i=(n=d[h])+c.dvalue,t>=n&&t<i)return BADNUM$7}return t},e.locateBreaks=function(t,r){var n,i,a,o,s=[];if(!e.rangebreaks)return s;var l=e.rangebreaks.slice().sort((function(e,t){return e.pattern===WEEKDAY_PATTERN&&t.pattern===HOUR_PATTERN?-1:t.pattern===WEEKDAY_PATTERN&&e.pattern===HOUR_PATTERN?1:0})),c=function(e,n){if((e=Lib$1p.constrain(e,t,r))!==(n=Lib$1p.constrain(n,t,r))){for(var i=!0,a=0;a<s.length;a++){var o=s[a];e<o.max&&n>=o.min&&(e<o.min&&(o.min=e),n>o.max&&(o.max=n),i=!1)}i&&s.push({min:e,max:n})}};for(n=0;n<l.length;n++){var u=l[n];if(u.enabled)if(u.bounds){var d=t,h=r;u.pattern&&(d=Math.floor(d)),a=(i=Lib$1p.simpleMap(u.bounds,u.pattern?cleanNumber$1:e.r2l))[0],o=i[1];var g,p,f=new Date(d);switch(u.pattern){case WEEKDAY_PATTERN:p=ONEWEEK$2,g=(o-a+(o<a?7:0))*ONEDAY$1,d+=a*ONEDAY$1-(f.getUTCDay()*ONEDAY$1+f.getUTCHours()*ONEHOUR$1+f.getUTCMinutes()*ONEMIN$1+f.getUTCSeconds()*ONESEC$1+f.getUTCMilliseconds());break;case HOUR_PATTERN:p=ONEDAY$1,g=(o-a+(o<a?24:0))*ONEHOUR$1,d+=a*ONEHOUR$1-(f.getUTCHours()*ONEHOUR$1+f.getUTCMinutes()*ONEMIN$1+f.getUTCSeconds()*ONESEC$1+f.getUTCMilliseconds());break;default:d=Math.min(i[0],i[1]),g=p=(h=Math.max(i[0],i[1]))-d}for(var m=d;m<h;m+=p)c(m,m+g)}else for(var y=Lib$1p.simpleMap(u.values,e.d2c),b=0;b<y.length;b++)c(a=y[b],o=a+u.dvalue)}return s.sort((function(e,t){return e.min-t.min})),s},e.makeCalcdata=function(t,r,n){var i,a,o,s,l=e.type,u="date"===l&&t[r+"calendar"];if(r in t){if(i=t[r],s=t._length||Lib$1p.minRowLength(i),Lib$1p.isTypedArray(i)&&("linear"===l||"log"===l)){if(s===i.length)return i;if(i.subarray)return i.subarray(0,s)}if("multicategory"===l)return function(e,t){for(var r=new Array(t),n=0;n<t;n++){var i=(e[0]||[])[n],a=(e[1]||[])[n];r[n]=c([i,a])}return r}(i,s);for(a=new Array(s),o=0;o<s;o++)a[o]=e.d2c(i[o],0,u,n)}else{var d=r+"0"in t?e.d2c(t[r+"0"],0,u):0,h=t["d"+r]?Number(t["d"+r]):1;for(i=t[{x:"y",y:"x"}[r]],s=t._length||i.length,a=new Array(s),o=0;o<s;o++)a[o]=d+o*h}if(e.rangebreaks)for(o=0;o<s;o++)a[o]=e.maskBreaks(a[o]);return a},e.isValidRange=function(t){return Array.isArray(t)&&2===t.length&&isNumeric$h(e.r2l(t[0]))&&isNumeric$h(e.r2l(t[1]))},e.isPtWithinRange=function(t,r){var i=e.c2l(t[n],null,r),a=e.r2l(e.range[0]),o=e.r2l(e.range[1]);return a<o?a<=i&&i<=o:o<=i&&i<=a},e._emptyCategories=function(){e._categories=[],e._categoriesMap={}},e.clearCalc=function(){var r=e._matchGroup;if(r){var n=null,i=null;for(var a in r){var o=t[axisIds$8.id2name(a)];if(o._categories){n=o._categories,i=o._categoriesMap;break}}n&&i?(e._categories=n,e._categoriesMap=i):e._emptyCategories()}else e._emptyCategories();if(e._initialCategories)for(var s=0;s<e._initialCategories.length;s++)l(e._initialCategories[s])},e.sortByInitialCategories=function(){var n=[];if(e._emptyCategories(),e._initialCategories)for(var i=0;i<e._initialCategories.length;i++)l(e._initialCategories[i]);n=n.concat(e._traceIndices);var a=e._matchGroup;for(var o in a)if(r!==o){var s=t[axisIds$8.id2name(o)];s._categories=e._categories,s._categoriesMap=e._categoriesMap,n=n.concat(s._traceIndices)}return n};var y=t._d3locale;"date"===e.type&&(e._dateFormat=y?y.timeFormat:utcFormat,e._extraFormat=t._extraFormat),e._separators=t.separators,e._numFormat=y?y.numberFormat:numberFormat$1,delete e._minDtick,delete e._forceTick0},isNumeric$g=fastIsnumeric,Lib$1o=libExports,BADNUM$6=numerical.BADNUM,isArrayOrTypedArray$6=Lib$1o.isArrayOrTypedArray,isDateTime=Lib$1o.isDateTime,cleanNumber=Lib$1o.cleanNumber,round=Math.round,axis_autotype=function(e,t,r){var n=e,i=r.noMultiCategory;if(isArrayOrTypedArray$6(n)&&!n.length)return"-";if(!i&&multiCategory(n))return"multicategory";if(i&&Array.isArray(n[0])){for(var a=[],o=0;o<n.length;o++)if(isArrayOrTypedArray$6(n[o]))for(var s=0;s<n[o].length;s++)a.push(n[o][s]);n=a}if(moreDates(n,t))return"date";var l="strict"!==r.autotypenumbers;return category(n,l)?"category":linearOK(n,l)?"linear":"-"};function hasTypeNumber(e,t){return t?isNumeric$g(e):"number"==typeof e}function linearOK(e,t){for(var r=e.length,n=0;n<r;n++)if(hasTypeNumber(e[n],t))return!0;return!1}function moreDates(e,t){for(var r=e.length,n=getIncrement(r),i=0,a=0,o={},s=0;s<r;s+=n){var l=e[round(s)],c=String(l);o[c]||(o[c]=1,isDateTime(l,t)&&i++,isNumeric$g(l)&&a++)}return i>2*a}function getIncrement(e){return Math.max(1,(e-1)/1e3)}function category(e,t){for(var r=e.length,n=getIncrement(r),i=0,a=0,o={},s=0;s<r;s+=n){var l=e[round(s)],c=String(l);if(!o[c]){o[c]=1;var u=typeof l;"boolean"===u?a++:(t?cleanNumber(l)!==BADNUM$6:"number"===u)?i++:"string"===u&&a++}}return a>2*i}function multiCategory(e){return isArrayOrTypedArray$6(e[0])&&isArrayOrTypedArray$6(e[1])}function requireAutorange(){if(hasRequiredAutorange)return autorange$2;hasRequiredAutorange=1;var e=d3Exports,t=fastIsnumeric,r=libExports,n=numerical.FP_SAFE,i=registry,a=drawingExports,o=axis_ids,s=o.getFromId,l=o.isLinked;function c(e,t){var n,i,a=[],o=e._fullLayout,s=d(o,t,0),l=d(o,t,1),c=h(e,t),g=c.min,p=c.max;if(0===g.length||0===p.length)return r.simpleMap(t.range,t.r2l);var f=g[0].val,m=p[0].val;for(n=1;n<g.length&&f===m;n++)f=Math.min(f,g[n].val);for(n=1;n<p.length&&f===m;n++)m=Math.max(m,p[n].val);var y=!1;if(t.range){var b=r.simpleMap(t.range,t.r2l);y=b[1]<b[0]}"reversed"===t.autorange&&(y=!0,t.autorange=!0);var v,x,B,I,F,A,C=t.rangemode,w="tozero"===C,Q="nonnegative"===C,U=t._length,S=U/10,E=0;for(n=0;n<g.length;n++)for(v=g[n],i=0;i<p.length;i++)(A=(x=p[i]).val-v.val-u(t,v.val,x.val))>0&&((F=U-s(v)-l(x))>S?A/F>E&&(B=v,I=x,E=A/F):A/U>E&&(B={val:v.val,nopad:1},I={val:x.val,nopad:1},E=A/U));if(f===m){var L=f-1,_=f+1;if(w)if(0===f)a=[0,1];else{var T=(f>0?p:g).reduce((function(e,t){return Math.max(e,l(t))}),0),R=f/(1-Math.min(.5,T/U));a=f>0?[0,R]:[R,0]}else a=Q?[Math.max(0,L),Math.max(1,_)]:[L,_]}else w?(B.val>=0&&(B={val:0,nopad:1}),I.val<=0&&(I={val:0,nopad:1})):Q&&(B.val-E*s(B)<0&&(B={val:0,nopad:1}),I.val<=0&&(I={val:1,nopad:1})),E=(I.val-B.val-u(t,v.val,x.val))/(U-s(B)-l(I)),a=[B.val-E*s(B),I.val+E*l(I)];return y&&a.reverse(),r.simpleMap(a,t.l2r||Number)}function u(e,t,r){var n=0;if(e.rangebreaks)for(var i=e.locateBreaks(t,r),a=0;a<i.length;a++){var o=i[a];n+=o.max-o.min}return n}function d(t,n,i){var o=.05*n._length,s=n._anchorAxis||{};if(-1!==(n.ticklabelposition||"").indexOf("inside")||-1!==(s.ticklabelposition||"").indexOf("inside")){var c="reversed"===n.autorange;if(!c){var u=r.simpleMap(n.range,n.r2l);c=u[1]<u[0]}c&&(i=!i)}var d=0;return l(t,n._id)||(d=function(t,n,i){var o=0,s="x"===n._id.charAt(0);for(var l in t._plots){var c=t._plots[l];if(n._id===c.xaxis._id||n._id===c.yaxis._id){var u=(s?c.yaxis:c.xaxis)||{};if(-1!==(u.ticklabelposition||"").indexOf("inside")&&(!i&&("left"===u.side||"bottom"===u.side)||i&&("top"===u.side||"right"===u.side))){if(u._vals){var d=r.deg2rad(u._tickAngles[u._id+"tick"]||0),h=Math.abs(Math.cos(d)),g=Math.abs(Math.sin(d));if(!u._vals[0].bb){var p=u._id+"tick";u._selections[p].each((function(t){var r=e.select(this);r.select(".text-math-group").empty()&&(t.bb=a.bBox(r.node()))}))}for(var f=0;f<u._vals.length;f++){var m=u._vals[f].bb;if(m){var y=6+m.width,b=6+m.height;o=Math.max(o,s?Math.max(y*h,b*g):Math.max(b*h,y*g))}}}"inside"===u.ticks&&"inside"===u.ticklabelposition&&(o+=u.ticklen||0)}}}return o}(t,n,i)),o=Math.max(d,o),"domain"===n.constrain&&n._inputDomain&&(o*=(n._inputDomain[1]-n._inputDomain[0])/(n.domain[1]-n.domain[0])),function(e){return e.nopad?0:e.pad+(e.extrapad?o:d)}}autorange$2={getAutoRange:c,makePadFn:d,doAutoRange:function(e,t,n){if(t.setScale(),t.autorange){t.range=n?n.slice():c(e,t),t._r=t.range.slice(),t._rl=r.simpleMap(t._r,t.r2l);var a=t._input,o={};o[t._attr+".range"]=t.range,o[t._attr+".autorange"]=t.autorange,i.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,o),a.range=t.range.slice(),a.autorange=t.autorange}var s=t._anchorAxis;if(s&&s.rangeslider){var l=s.rangeslider[t._name];l&&"auto"===l.rangemode&&(l.range=c(e,t)),s._input.rangeslider[t._name]=r.extendFlat({},l)}},findExtremes:function(e,r,i){i||(i={});e._m||e.setScale();var a,o,s,l,c,u,d,h,f,y=[],b=[],v=r.length,x=i.padded||!1,B=i.tozero&&("linear"===e.type||"-"===e.type),I="log"===e.type,F=!1,A=i.vpadLinearized||!1;function C(e){if(Array.isArray(e))return F=!0,function(t){return Math.max(Number(e[t]||0),0)};var t=Math.max(Number(e||0),0);return function(){return t}}var w=C((e._m>0?i.ppadplus:i.ppadminus)||i.ppad||0),Q=C((e._m>0?i.ppadminus:i.ppadplus)||i.ppad||0),U=C(i.vpadplus||i.vpad),S=C(i.vpadminus||i.vpad);if(!F){if(h=1/0,f=-1/0,I)for(a=0;a<v;a++)(o=r[a])<h&&o>0&&(h=o),o>f&&o<n&&(f=o);else for(a=0;a<v;a++)(o=r[a])<h&&o>-n&&(h=o),o>f&&o<n&&(f=o);r=[h,f],v=2}var E={tozero:B,extrapad:x};function L(n){s=r[n],t(s)&&(u=w(n),d=Q(n),A?(l=e.c2l(s)-S(n),c=e.c2l(s)+U(n)):(h=s-S(n),f=s+U(n),I&&h<f/10&&(h=f/10),l=e.c2l(h),c=e.c2l(f)),B&&(l=Math.min(0,l),c=Math.max(0,c)),m(l)&&g(y,l,d,E),m(c)&&p(b,c,u,E))}var _=Math.min(6,v);for(a=0;a<_;a++)L(a);for(a=v-1;a>=_;a--)L(a);return{min:y,max:b,opts:i}},concatExtremes:h};function h(e,t,r){var n,i,a,o=t._id,l=e._fullData,c=e._fullLayout,u=[],d=[];function f(e,t){for(n=0;n<t.length;n++){var r=e[t[n]],s=(r._extremes||{})[o];if(!0===r.visible&&s){for(i=0;i<s.min.length;i++)a=s.min[i],g(u,a.val,a.pad,{extrapad:a.extrapad});for(i=0;i<s.max.length;i++)a=s.max[i],p(d,a.val,a.pad,{extrapad:a.extrapad})}}}if(f(l,t._traceIndices),f(c.annotations||[],t._annIndices||[]),f(c.shapes||[],t._shapeIndices||[]),t._matchGroup&&!r)for(var m in t._matchGroup)if(m!==t._id){var y=s(e,m),b=h(e,y,!0),v=t._length/y._length;for(i=0;i<b.min.length;i++)a=b.min[i],g(u,a.val,a.pad*v,{extrapad:a.extrapad});for(i=0;i<b.max.length;i++)a=b.max[i],p(d,a.val,a.pad*v,{extrapad:a.extrapad})}return{min:u,max:d}}function g(e,t,r,n){f(e,t,r,n,y)}function p(e,t,r,n){f(e,t,r,n,b)}function f(e,t,r,n,i){for(var a=n.tozero,o=n.extrapad,s=!0,l=0;l<e.length&&s;l++){var c=e[l];if(i(c.val,t)&&c.pad>=r&&(c.extrapad||!o)){s=!1;break}i(t,c.val)&&c.pad<=r&&(o||!c.extrapad)&&(e.splice(l,1),l--)}if(s){var u=a&&0===t;e.push({val:t,pad:u?0:r,extrapad:!u&&o})}}function m(e){return t(e)&&Math.abs(e)<n}function y(e,t){return e<=t}function b(e,t){return e>=t}return autorange$2}var d3$m=d3Exports,isNumeric$f=fastIsnumeric,Plots$b=plotsExports,Registry$I=registry,Lib$1n=libExports,strTranslate$a=Lib$1n.strTranslate,svgTextUtils$b=svg_text_utils,Titles$1=titles,Color$x=colorExports,Drawing$l=drawingExports,axAttrs=layout_attributes$3,cleanTicks=clean_ticks,constants$G=numerical,ONEMAXYEAR=constants$G.ONEMAXYEAR,ONEAVGYEAR=constants$G.ONEAVGYEAR,ONEMINYEAR=constants$G.ONEMINYEAR,ONEMAXQUARTER=constants$G.ONEMAXQUARTER,ONEAVGQUARTER=constants$G.ONEAVGQUARTER,ONEMINQUARTER=constants$G.ONEMINQUARTER,ONEMAXMONTH=constants$G.ONEMAXMONTH,ONEAVGMONTH$1=constants$G.ONEAVGMONTH,ONEMINMONTH=constants$G.ONEMINMONTH,ONEWEEK$1=constants$G.ONEWEEK,ONEDAY=constants$G.ONEDAY,HALFDAY=ONEDAY/2,ONEHOUR=constants$G.ONEHOUR,ONEMIN=constants$G.ONEMIN,ONESEC=constants$G.ONESEC,MINUS_SIGN=constants$G.MINUS_SIGN,BADNUM$5=constants$G.BADNUM,ZERO_PATH={K:"zeroline"},GRID_PATH={K:"gridline",L:"path"},MINORGRID_PATH={K:"minor-gridline",L:"path"},TICK_PATH={K:"tick",L:"path"},TICK_TEXT={K:"tick",L:"text"},MARGIN_MAPPING={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},alignmentConstants$4=alignment$1,MID_SHIFT=alignmentConstants$4.MID_SHIFT,CAP_SHIFT=alignmentConstants$4.CAP_SHIFT,LINE_SPACING$6=alignmentConstants$4.LINE_SPACING,OPPOSITE_SIDE=alignmentConstants$4.OPPOSITE_SIDE,TEXTPAD$1=3,axes=axes$1.exports={};axes.setConvert=set_convert;var autoType=axis_autotype,axisIds$7=axis_ids,idSort=axisIds$7.idSort,isLinked=axisIds$7.isLinked;axes.id2name=axisIds$7.id2name,axes.name2id=axisIds$7.name2id,axes.cleanId=axisIds$7.cleanId,axes.list=axisIds$7.list,axes.listIds=axisIds$7.listIds,axes.getFromId=axisIds$7.getFromId,axes.getFromTrace=axisIds$7.getFromTrace;var autorange$1=requireAutorange();axes.getAutoRange=autorange$1.getAutoRange,axes.findExtremes=autorange$1.findExtremes;var epsilon$2=1e-4;function expandRange(e){var t=(e[1]-e[0])*epsilon$2;return[e[0]-t,e[1]+t]}axes.coerceRef=function(e,t,r,n,i,a){var o=n.charAt(n.length-1),s=r._fullLayout._subplots[o+"axis"],l=n+"ref",c={};return i||(i=s[0]||("string"==typeof a?a:a[0])),a||(a=i),s=s.concat(s.map((function(e){return e+" domain"}))),c[l]={valType:"enumerated",values:s.concat(a?"string"==typeof a?[a]:a:[]),dflt:i},Lib$1n.coerce(e,t,c,l)},axes.getRefType=function(e){return void 0===e?e:"paper"===e?"paper":"pixel"===e?"pixel":/( domain)$/.test(e)?"domain":"range"},axes.coercePosition=function(e,t,r,n,i,a){var o,s;if("range"!==axes.getRefType(n))o=Lib$1n.ensureNumber,s=r(i,a);else{var l=axes.getFromId(t,n);s=r(i,a=l.fraction2r(a)),o=l.cleanPos}e[i]=o(s)},axes.cleanPosition=function(e,t,r){return("paper"===r||"pixel"===r?Lib$1n.ensureNumber:axes.getFromId(t,r).cleanPos)(e)},axes.redrawComponents=function(e,t){t=t||axes.listIds(e);var r=e._fullLayout;function n(n,i,a,o){for(var s=Registry$I.getComponentMethod(n,i),l={},c=0;c<t.length;c++)for(var u=r[axes.id2name(t[c])][a],d=0;d<u.length;d++){var h=u[d];if(!l[h]&&(s(e,h),l[h]=1,o))return}}n("annotations","drawOne","_annIndices"),n("shapes","drawOne","_shapeIndices"),n("images","draw","_imgIndices",!0),n("selections","drawOne","_selectionIndices")};var getDataConversions=axes.getDataConversions=function(e,t,r,n){var i,a="x"===r||"y"===r||"z"===r?r:n;if(Array.isArray(a)){if(i={type:autoType(n,void 0,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]},axes.setConvert(i),"category"===i.type)for(var o=0;o<n.length;o++)i.d2c(n[o])}else i=axes.getFromTrace(e,t,a);return i?{d2c:i.d2c,c2d:i.c2d}:"ids"===a?{d2c:toString,c2d:toString}:{d2c:toNum,c2d:toNum}};function toNum(e){return+e}function toString(e){return String(e)}function autoShiftNumericBins(e,t,r,n,i){var a=0,o=0,s=0,l=0;function c(t){return(1+100*(t-e)/r.dtick)%100<2}for(var u=0;u<t.length;u++)t[u]%1==0?s++:isNumeric$f(t[u])||l++,c(t[u])&&a++,c(t[u]+r.dtick/2)&&o++;var d=t.length-l;if(s===d&&"date"!==r.type)r.dtick<1?e=n-.5*r.dtick:(e-=.5)+r.dtick<n&&(e+=r.dtick);else if(o<.1*d&&(a>.3*d||c(n)||c(i))){var h=r.dtick/2;e+=e+h<n?h:-h}return e}function autoShiftMonthBins(e,t,r,n,i){var a=Lib$1n.findExactDates(t,i);if(a.exactDays>.8){var o=Number(r.substr(1));a.exactYears>.8&&o%12==0?e=axes.tickIncrement(e,"M6","reverse")+1.5*ONEDAY:a.exactMonths>.8?e=axes.tickIncrement(e,"M1","reverse")+15.5*ONEDAY:e-=HALFDAY;var s=axes.tickIncrement(e,r);if(s<=n)return s}return e}function isMultiple(e,t){return Math.abs((e/t+.5)%1-.5)<.001}function isClose(e,t){return Math.abs(e/t-1)<.001}function nMonths(e){return+e.substring(1)}function adjustPeriodDelta(e){var t;function r(){return!(isNumeric$f(e.dtick)||"M"!==e.dtick.charAt(0))}var n=r(),i=axes.getTickFormat(e);if(i){var a=e._dtickInit!==e.dtick;/%[fLQsSMX]/.test(i)||(/%[HI]/.test(i)?(t=ONEHOUR,a&&!n&&e.dtick<ONEHOUR&&(e.dtick=ONEHOUR)):/%p/.test(i)?(t=HALFDAY,a&&!n&&e.dtick<HALFDAY&&(e.dtick=HALFDAY)):/%[Aadejuwx]/.test(i)?(t=ONEDAY,a&&!n&&e.dtick<ONEDAY&&(e.dtick=ONEDAY)):/%[UVW]/.test(i)?(t=ONEWEEK$1,a&&!n&&e.dtick<ONEWEEK$1&&(e.dtick=ONEWEEK$1)):/%[Bbm]/.test(i)?(t=ONEAVGMONTH$1,a&&(n?nMonths(e.dtick)<1:e.dtick<ONEMINMONTH)&&(e.dtick="M1")):/%[q]/.test(i)?(t=ONEAVGQUARTER,a&&(n?nMonths(e.dtick)<3:e.dtick<ONEMINQUARTER)&&(e.dtick="M3")):/%[Yy]/.test(i)&&(t=ONEAVGYEAR,a&&(n?nMonths(e.dtick)<12:e.dtick<ONEMINYEAR)&&(e.dtick="M12")))}(n=r())&&e.tick0===e._dowTick0&&(e.tick0=e._rawTick0),e._definedDelta=t}function positionPeriodTicks(e,t,r){for(var n=0;n<e.length;n++){var i=e[n].value,a=n,o=n+1;n<e.length-1?(a=n,o=n+1):n>0?(a=n-1,o=n):(a=n,o=n);var s,l=e[a].value,c=e[o].value,u=Math.abs(c-l),d=r||u,h=0;d>=ONEMINYEAR?h=u>=ONEMINYEAR&&u<=ONEMAXYEAR?u:ONEAVGYEAR:r===ONEAVGQUARTER&&d>=ONEMINQUARTER?h=u>=ONEMINQUARTER&&u<=ONEMAXQUARTER?u:ONEAVGQUARTER:d>=ONEMINMONTH?h=u>=ONEMINMONTH&&u<=ONEMAXMONTH?u:ONEAVGMONTH$1:r===ONEWEEK$1&&d>=ONEWEEK$1?h=ONEWEEK$1:d>=ONEDAY?h=ONEDAY:r===HALFDAY&&d>=HALFDAY?h=HALFDAY:r===ONEHOUR&&d>=ONEHOUR&&(h=ONEHOUR),h>=u&&(h=u,s=!0);var g=i+h;if(t.rangebreaks&&h>0){for(var p=0,f=0;f<84;f++){var m=(f+.5)/84;t.maskBreaks(i*(1-m)+m*g)!==BADNUM$5&&p++}(h*=p/84)||(e[n].drop=!0),s&&u>ONEWEEK$1&&(h=u)}(h>0||0===n)&&(e[n].periodX=i+h/2)}}function filterRangeBreaks(e,t){return e.rangebreaks&&(t=t.filter((function(t){return e.maskBreaks(t.x)!==BADNUM$5}))),t}function syncTicks(e){var t=e._mainAxis,r=[];if(t._vals)for(var n=0;n<t._vals.length;n++)if(!t._vals[n].noTick){var i=t.l2p(t._vals[n].x),a=e.p2l(i),o=axes.tickText(e,a);t._vals[n].minor&&(o.minor=!0,o.text=""),r.push(o)}return r=filterRangeBreaks(e,r)}function arrayTicks(e){var t=expandRange(Lib$1n.simpleMap(e.range,e.r2l)),r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),i="category"===e.type?e.d2l_noadd:e.d2l;"log"===e.type&&"L"!==String(e.dtick).charAt(0)&&(e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1));for(var a=[],o=0;o<=1;o++)if(!o||e.minor){var s=o?e.minor.tickvals:e.tickvals,l=o?[]:e.ticktext;if(s){Array.isArray(l)||(l=[]);for(var c=0;c<s.length;c++){var u=i(s[c]);if(u>r&&u<n){var d=void 0===l[c]?axes.tickText(e,u):tickTextObj(e,u,String(l[c]));o&&(d.minor=!0,d.text=""),a.push(d)}}}}return a=filterRangeBreaks(e,a)}axes.getDataToCoordFunc=function(e,t,r,n){return getDataConversions(e,t,r,n).d2c},axes.counterLetter=function(e){var t=e.charAt(0);return"x"===t?"y":"y"===t?"x":void 0},axes.minDtick=function(e,t,r,n){-1===["log","category","multicategory"].indexOf(e.type)&&n?void 0===e._minDtick?(e._minDtick=t,e._forceTick0=r):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((r-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=r):((t/e._minDtick+1e-6)%1>2e-6||((r-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6)&&(e._minDtick=0)):e._minDtick=0},axes.saveRangeInitial=function(e,t){for(var r=axes.list(e,"",!0),n=!1,i=0;i<r.length;i++){var a=r[i],o=void 0===a._rangeInitial,s=o||!(a.range[0]===a._rangeInitial[0]&&a.range[1]===a._rangeInitial[1]);(o&&!1===a.autorange||t&&s)&&(a._rangeInitial=a.range.slice(),n=!0)}return n},axes.saveShowSpikeInitial=function(e,t){for(var r=axes.list(e,"",!0),n=!1,i="on",a=0;a<r.length;a++){var o=r[a],s=void 0===o._showSpikeInitial,l=s||!(o.showspikes===o._showspikes);(s||t&&l)&&(o._showSpikeInitial=o.showspikes,n=!0),"on"!==i||o.showspikes||(i="off")}return e._fullLayout._cartesianSpikesEnabled=i,n},axes.autoBin=function(e,t,r,n,i,a){var o,s=Lib$1n.aggNums(Math.min,null,e),l=Lib$1n.aggNums(Math.max,null,e);if("category"===t.type||"multicategory"===t.type)return{start:s-.5,end:l+.5,size:Math.max(1,Math.round(a)||1),_dataSpan:l-s};if(i||(i=t.calendar),o="log"===t.type?{type:"linear",range:[s,l]}:{type:t.type,range:Lib$1n.simpleMap([s,l],t.c2r,0,i),calendar:i},axes.setConvert(o),a=a&&cleanTicks.dtick(a,o.type))o.dtick=a,o.tick0=cleanTicks.tick0(void 0,o.type,i);else{var c;if(r)c=(l-s)/r;else{var u=Lib$1n.distinctVals(e),d=Math.pow(10,Math.floor(Math.log(u.minDiff)/Math.LN10)),h=d*Lib$1n.roundUp(u.minDiff/d,[.9,1.9,4.9,9.9],!0);c=Math.max(h,2*Lib$1n.stdev(e)/Math.pow(e.length,n?.25:.4)),isNumeric$f(c)||(c=1)}axes.autoTicks(o,c)}var g,p=o.dtick,f=axes.tickIncrement(axes.tickFirst(o),p,"reverse",i);if("number"==typeof p)g=(f=autoShiftNumericBins(f,e,o,s,l))+(1+Math.floor((l-f)/p))*p;else for("M"===o.dtick.charAt(0)&&(f=autoShiftMonthBins(f,e,p,s,i)),g=f,0;g<=l;)g=axes.tickIncrement(g,p,!1,i);return{start:t.c2r(f,0,i),end:t.c2r(g,0,i),size:p,_dataSpan:l-s}},axes.prepMinorTicks=function(e,t,r){if(!t.minor.dtick){delete e.dtick;var n,i=t.dtick&&isNumeric$f(t._tmin);if(i){var a=axes.tickIncrement(t._tmin,t.dtick,!0);n=[t._tmin,.99*a+.01*t._tmin]}else{var o=Lib$1n.simpleMap(t.range,t.r2l);n=[o[0],.8*o[0]+.2*o[1]]}if(e.range=Lib$1n.simpleMap(n,t.l2r),e._isMinor=!0,axes.prepTicks(e,r),i){var s=isNumeric$f(t.dtick),l=isNumeric$f(e.dtick),c=s?t.dtick:+t.dtick.substring(1),u=l?e.dtick:+e.dtick.substring(1);s&&l?isMultiple(c,u)?c===2*ONEWEEK$1&&u===2*ONEDAY&&(e.dtick=ONEWEEK$1):c===2*ONEWEEK$1&&u===3*ONEDAY?e.dtick=ONEWEEK$1:c!==ONEWEEK$1||(t._input.minor||{}).nticks?isClose(c/u,2.5)?e.dtick=c/2:e.dtick=c:e.dtick=ONEDAY:"M"===String(t.dtick).charAt(0)?l?e.dtick="M1":isMultiple(c,u)?c>=12&&2===u&&(e.dtick="M3"):e.dtick=t.dtick:"L"===String(e.dtick).charAt(0)?"L"===String(t.dtick).charAt(0)?isMultiple(c,u)||(e.dtick=isClose(c/u,2.5)?t.dtick/2:t.dtick):e.dtick="D1":"D2"===e.dtick&&+t.dtick>1&&(e.dtick=1)}e.range=t.range}void 0===t.minor._tick0Init&&(e.tick0=t.tick0)},axes.prepTicks=function(e,t){var r=Lib$1n.simpleMap(e.range,e.r2l,void 0,void 0,t);if("auto"===e.tickmode||!e.dtick){var n,i=e.nticks;i||("category"===e.type||"multicategory"===e.type?(n=e.tickfont?Lib$1n.bigFont(e.tickfont.size||12):15,i=e._length/n):(n="y"===e._id.charAt(0)?40:80,i=Lib$1n.constrain(e._length/n,4,9)+1),"radialaxis"===e._name&&(i*=2)),e.minor&&"array"!==e.minor.tickmode||"array"===e.tickmode&&(i*=100),e._roughDTick=Math.abs(r[1]-r[0])/i,axes.autoTicks(e,e._roughDTick),e._minDtick>0&&e.dtick<2*e._minDtick&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))}"period"===e.ticklabelmode&&adjustPeriodDelta(e),e.tick0||(e.tick0="date"===e.type?"2000-01-01":0),"date"===e.type&&e.dtick<.1&&(e.dtick=.1),autoTickRound(e)},axes.calcTicks=function(e,t){for(var r,n,i=e.type,a=e.calendar,o=e.ticklabelstep,s="period"===e.ticklabelmode,l=Lib$1n.simpleMap(e.range,e.r2l,void 0,void 0,t),c=l[1]<l[0],u=Math.min(l[0],l[1]),d=Math.max(l[0],l[1]),h=Math.max(1e3,e._length||0),g=[],p=[],f=[],m=[],y=e.minor&&(e.minor.ticks||e.minor.showgrid),b=1;b>=(y?0:1);b--){var v=!b;b?(e._dtickInit=e.dtick,e._tick0Init=e.tick0):(e.minor._dtickInit=e.minor.dtick,e.minor._tick0Init=e.minor.tick0);var x=b?e:Lib$1n.extendFlat({},e,e.minor);if(v?axes.prepMinorTicks(x,e,t):axes.prepTicks(x,t),"array"!==x.tickmode)if("sync"!==x.tickmode){var B=expandRange(l),I=B[0],F=B[1],A=isNumeric$f(x.dtick),C="log"===i&&!(A||"L"===x.dtick.charAt(0)),w=axes.tickFirst(x,t);if(b){if(e._tmin=w,w<I!==c)break;"category"!==i&&"multicategory"!==i||(F=c?Math.max(-.5,F):Math.min(e._categories.length-.5,F))}var Q,U,S=null,E=w;if(b)A?U=e.dtick:"date"===i?"string"==typeof e.dtick&&"M"===e.dtick.charAt(0)&&(U=ONEAVGMONTH$1*e.dtick.substring(1)):U=e._roughDTick,Q=Math.round((e.r2l(E)-e.r2l(e.tick0))/U)-1;var L=x.dtick;for(x.rangebreaks&&x._tick0Init!==x.tick0&&(E=moveOutsideBreak(E,e),c||(E=axes.tickIncrement(E,L,!c,a))),b&&s&&(E=axes.tickIncrement(E,L,!c,a),Q--);c?E>=F:E<=F;E=axes.tickIncrement(E,L,c,a)){if(b&&Q++,x.rangebreaks&&!c){if(E<I)continue;if(x.maskBreaks(E)===BADNUM$5&&moveOutsideBreak(E,x)>=d)break}if(f.length>h||E===S)break;S=E;var _={value:E};b?(C&&E!==(0|E)&&(_.simpleLabel=!0),o>1&&Q%o&&(_.skipLabel=!0),f.push(_)):(_.minor=!0,m.push(_))}}else f=[],g=syncTicks(e);else b?(f=[],g=arrayTicks(e)):(m=[],p=arrayTicks(e))}if(y&&!("inside"===e.minor.ticks&&"outside"===e.ticks||"outside"===e.minor.ticks&&"inside"===e.ticks)){for(var T=f.map((function(e){return e.value})),R=[],$=0;$<m.length;$++){var k=m[$],N=k.value;if(-1===T.indexOf(N)){for(var G=!1,M=0;!G&&M<f.length;M++)1e7+f[M].value===1e7+N&&(G=!0);G||R.push(k)}}m=R}if(s&&positionPeriodTicks(f,e,e._definedDelta),e.rangebreaks){var D="y"===e._id.charAt(0),V=1;"auto"===e.tickmode&&(V=e.tickfont?e.tickfont.size:12);var H=NaN;for(r=f.length-1;r>-1;r--)if(f[r].drop)f.splice(r,1);else{f[r].value=moveOutsideBreak(f[r].value,e);var X=e.c2p(f[r].value);(D?H>X-V:H<X+V)?f.splice(c?r+1:r,1):H=X}}isAngular(e)&&360===Math.abs(l[1]-l[0])&&f.pop(),e._tmax=(f[f.length-1]||{}).value,e._prevDateHead="",e._inCalcTicks=!0;var O,Z,W=function(t){t.text="",e._prevDateHead=n};for(f=f.concat(m),r=0;r<f.length;r++){var Y=f[r].minor,P=f[r].value;Y?p.push({x:P,minor:!0}):(n=e._prevDateHead,O=axes.tickText(e,P,!1,f[r].simpleLabel),void 0!==(Z=f[r].periodX)&&(O.periodX=Z,(Z>d||Z<u)&&(Z>d&&(O.periodX=d),Z<u&&(O.periodX=u),W(O))),f[r].skipLabel&&W(O),g.push(O))}return g=g.concat(p),e._inCalcTicks=!1,s&&g.length&&(g[0].noTick=!0),g};var roundBase10=[2,5,10],roundBase24=[1,2,3,6,12],roundBase60=[1,2,5,10,15,30],roundDays=[1,2,3,7,14],roundLog1=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],roundLog2=[-.301,0,.301,.699,1],roundAngles=[15,30,45,90,180];function roundDTick(e,t,r){return t*Lib$1n.roundUp(e/t,r)}function autoTickRound(e){var t=e.dtick;if(e._tickexponent=0,isNumeric$f(t)||"string"==typeof t||(t=1),"category"!==e.type&&"multicategory"!==e.type||(e._tickround=null),"date"===e.type){var r=e.r2l(e.tick0),n=e.l2r(r).replace(/(^-|i)/g,""),i=n.length;if("M"===String(t).charAt(0))i>10||"01-01"!==n.substr(5)?e._tickround="d":e._tickround=+t.substr(1)%12==0?"y":"m";else if(t>=ONEDAY&&i<=10||t>=15*ONEDAY)e._tickround="d";else if(t>=ONEMIN&&i<=16||t>=ONEHOUR)e._tickround="M";else if(t>=ONESEC&&i<=19||t>=ONEMIN)e._tickround="S";else{var a=e.l2r(r+t).replace(/^-/,"").length;e._tickround=Math.max(i,a)-20,e._tickround<0&&(e._tickround=4)}}else if(isNumeric$f(t)||"L"===t.charAt(0)){var o=e.range.map(e.r2d||Number);isNumeric$f(t)||(t=Number(t.substr(1))),e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var s=Math.max(Math.abs(o[0]),Math.abs(o[1])),l=Math.floor(Math.log(s)/Math.LN10+.01),c=void 0===e.minexponent?3:e.minexponent;Math.abs(l)>c&&(isSIFormat(e.exponentformat)&&!beyondSI(l)?e._tickexponent=3*Math.round((l-1)/3):e._tickexponent=l)}else e._tickround=null}function tickTextObj(e,t,r){var n=e.tickfont||{};return{x:t,dx:0,dy:0,text:r||"",fontSize:n.size,font:n.family,fontColor:n.color}}function formatDate(e,t,r,n){var i=e._tickround,a=r&&e.hoverformat||axes.getTickFormat(e);n&&(i=isNumeric$f(i)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[i]);var o,s=Lib$1n.formatDate(t.x,a,i,e._dateFormat,e.calendar,e._extraFormat),l=s.indexOf("\n");if(-1!==l&&(o=s.substr(l+1),s=s.substr(0,l)),n&&("00:00:00"===s||"00:00"===s?(s=o,o=""):8===s.length&&(s=s.replace(/:00$/,""))),o)if(r)"d"===i?s+=", "+o:s=o+(s?", "+s:"");else if(e._inCalcTicks&&e._prevDateHead===o){var c=insideTicklabelposition(e),u=e._trueSide||e.side;(!c&&"top"===u||c&&"bottom"===u)&&(s+="<br> ")}else e._prevDateHead=o,s+="<br>"+o;t.text=s}function formatLog(e,t,r,n,i){var a=e.dtick,o=t.x,s=e.tickformat,l="string"==typeof a&&a.charAt(0);if("never"===i&&(i=""),n&&"L"!==l&&(a="L3",l="L"),s||"L"===l)t.text=numFormat(Math.pow(10,o),e,i,n);else if(isNumeric$f(a)||"D"===l&&Lib$1n.mod(o+.01,1)<.1){var c=Math.round(o),u=Math.abs(c),d=e.exponentformat;"power"===d||isSIFormat(d)&&beyondSI(c)?(t.text=0===c?1:1===c?"10":"10<sup>"+(c>1?"":MINUS_SIGN)+u+"</sup>",t.fontSize*=1.25):("e"===d||"E"===d)&&u>2?t.text="1"+d+(c>0?"+":MINUS_SIGN)+u:(t.text=numFormat(Math.pow(10,o),e,"","fakehover"),"D1"===a&&"y"===e._id.charAt(0)&&(t.dy-=t.fontSize/6))}else{if("D"!==l)throw"unrecognized dtick "+String(a);t.text=String(Math.round(Math.pow(10,Lib$1n.mod(o,1)))),t.fontSize*=.75}if("D1"===e.dtick){var h=String(t.text).charAt(0);"0"!==h&&"1"!==h||("y"===e._id.charAt(0)?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(o<0?.5:.25)))}}function formatCategory(e,t){var r=e._categories[Math.round(t.x)];void 0===r&&(r=""),t.text=String(r)}function formatMultiCategory(e,t,r){var n=Math.round(t.x),i=e._categories[n]||[],a=void 0===i[1]?"":String(i[1]),o=void 0===i[0]?"":String(i[0]);r?t.text=o+" - "+a:(t.text=a,t.text2=o)}function formatLinear(e,t,r,n,i){"never"===i?i="":"all"===e.showexponent&&Math.abs(t.x/e.dtick)<1e-6&&(i="hide"),t.text=numFormat(t.x,e,i,n)}function formatAngle(e,t,r,n,i){if("radians"!==e.thetaunit||r)t.text=numFormat(t.x,e,i,n);else{var a=t.x/180;if(0===a)t.text="0";else{var o=num2frac(a);if(o[1]>=100)t.text=numFormat(Lib$1n.deg2rad(t.x),e,i,n);else{var s=t.x<0;1===o[1]?1===o[0]?t.text="π":t.text=o[0]+"π":t.text=["<sup>",o[0],"</sup>","⁄","<sub>",o[1],"</sub>","π"].join(""),s&&(t.text=MINUS_SIGN+t.text)}}}}function num2frac(e){function t(e,t){return Math.abs(e-t)<=1e-6}var r=function(e){for(var r=1;!t(Math.round(e*r)/r,e);)r*=10;return r}(e),n=e*r,i=Math.abs(function e(r,n){return t(n,0)?r:e(n,r%n)}(n,r));return[Math.round(n/i),Math.round(r/i)]}axes.autoTicks=function(e,t,r){var n;function i(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if("date"===e.type){e.tick0=Lib$1n.dateTick0(e.calendar,0);var a=2*t;if(a>ONEAVGYEAR)t/=ONEAVGYEAR,n=i(10),e.dtick="M"+12*roundDTick(t,n,roundBase10);else if(a>ONEAVGMONTH$1)t/=ONEAVGMONTH$1,e.dtick="M"+roundDTick(t,1,roundBase24);else if(a>ONEDAY){if(e.dtick=roundDTick(t,ONEDAY,e._hasDayOfWeekBreaks?[1,2,7,14]:roundDays),!r){var o=axes.getTickFormat(e),s="period"===e.ticklabelmode;s&&(e._rawTick0=e.tick0),/%[uVW]/.test(o)?e.tick0=Lib$1n.dateTick0(e.calendar,2):e.tick0=Lib$1n.dateTick0(e.calendar,1),s&&(e._dowTick0=e.tick0)}}else a>ONEHOUR?e.dtick=roundDTick(t,ONEHOUR,roundBase24):a>ONEMIN?e.dtick=roundDTick(t,ONEMIN,roundBase60):a>ONESEC?e.dtick=roundDTick(t,ONESEC,roundBase60):(n=i(10),e.dtick=roundDTick(t,n,roundBase10))}else if("log"===e.type){e.tick0=0;var l=Lib$1n.simpleMap(e.range,e.r2l);if(e._isMinor&&(t*=1.5),t>.7)e.dtick=Math.ceil(t);else if(Math.abs(l[1]-l[0])<1){var c=1.5*Math.abs((l[1]-l[0])/t);t=Math.abs(Math.pow(10,l[1])-Math.pow(10,l[0]))/c,n=i(10),e.dtick="L"+roundDTick(t,n,roundBase10)}else e.dtick=t>.3?"D2":"D1"}else"category"===e.type||"multicategory"===e.type?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):isAngular(e)?(e.tick0=0,n=1,e.dtick=roundDTick(t,n,roundAngles)):(e.tick0=0,n=i(10),e.dtick=roundDTick(t,n,roundBase10));if(0===e.dtick&&(e.dtick=1),!isNumeric$f(e.dtick)&&"string"!=typeof e.dtick){var u=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(u)}},axes.tickIncrement=function(e,t,r,n){var i=r?-1:1;if(isNumeric$f(t))return Lib$1n.increment(e,i*t);var a=t.charAt(0),o=i*Number(t.substr(1));if("M"===a)return Lib$1n.incrementMonth(e,o,n);if("L"===a)return Math.log(Math.pow(10,e)+o)/Math.LN10;if("D"===a){var s="D2"===t?roundLog2:roundLog1,l=e+.01*i,c=Lib$1n.roundUp(Lib$1n.mod(l,1),s,r);return Math.floor(l)+Math.log(d3$m.round(Math.pow(10,c),1))/Math.LN10}throw"unrecognized dtick "+String(t)},axes.tickFirst=function(e,t){var r=e.r2l||Number,n=Lib$1n.simpleMap(e.range,r,void 0,void 0,t),i=n[1]<n[0],a=i?Math.floor:Math.ceil,o=expandRange(n)[0],s=e.dtick,l=r(e.tick0);if(isNumeric$f(s)){var c=a((o-l)/s)*s+l;return"category"!==e.type&&"multicategory"!==e.type||(c=Lib$1n.constrain(c,0,e._categories.length-1)),c}var u=s.charAt(0),d=Number(s.substr(1));if("M"===u){for(var h,g,p,f=0,m=l;f<10;){if(((h=axes.tickIncrement(m,s,i,e.calendar))-o)*(m-o)<=0)return i?Math.min(m,h):Math.max(m,h);g=(o-(m+h)/2)/(h-m),p=u+(Math.abs(Math.round(g))||1)*d,m=axes.tickIncrement(m,p,g<0?!i:i,e.calendar),f++}return Lib$1n.error("tickFirst did not converge",e),m}if("L"===u)return Math.log(a((Math.pow(10,o)-l)/d)*d+l)/Math.LN10;if("D"===u){var y="D2"===s?roundLog2:roundLog1,b=Lib$1n.roundUp(Lib$1n.mod(o,1),y,i);return Math.floor(o)+Math.log(d3$m.round(Math.pow(10,b),1))/Math.LN10}throw"unrecognized dtick "+String(s)},axes.tickText=function(e,t,r,n){var i,a=tickTextObj(e,t),o="array"===e.tickmode,s=r||o,l=e.type,c="category"===l?e.d2l_noadd:e.d2l;if(o&&Array.isArray(e.ticktext)){var u=Lib$1n.simpleMap(e.range,e.r2l),d=(Math.abs(u[1]-u[0])-(e._lBreaks||0))/1e4;for(i=0;i<e.ticktext.length&&!(Math.abs(t-c(e.tickvals[i]))<d);i++);if(i<e.ticktext.length)return a.text=String(e.ticktext[i]),a}function h(n){if(void 0===n)return!0;if(r)return"none"===n;var i={first:e._tmin,last:e._tmax}[n];return"all"!==n&&t!==i}var g=r?"never":"none"!==e.exponentformat&&h(e.showexponent)?"hide":"";if("date"===l?formatDate(e,a,r,s):"log"===l?formatLog(e,a,r,s,g):"category"===l?formatCategory(e,a):"multicategory"===l?formatMultiCategory(e,a,r):isAngular(e)?formatAngle(e,a,r,s,g):formatLinear(e,a,r,s,g),n||(e.tickprefix&&!h(e.showtickprefix)&&(a.text=e.tickprefix+a.text),e.ticksuffix&&!h(e.showticksuffix)&&(a.text+=e.ticksuffix)),e.labelalias&&e.labelalias.hasOwnProperty(a.text)){var p=e.labelalias[a.text];"string"==typeof p&&(a.text=p)}if("boundaries"===e.tickson||e.showdividers){var f=function(t){var r=e.l2p(t);return r>=0&&r<=e._length?t:null};a.xbnd=[f(a.x-.5),f(a.x+e.dtick-.5)]}return a},axes.hoverLabelText=function(e,t,r){r&&(e=Lib$1n.extendFlat({},e,{hoverformat:r}));var n=Array.isArray(t)?t[0]:t,i=Array.isArray(t)?t[1]:void 0;if(void 0!==i&&i!==n)return axes.hoverLabelText(e,n,r)+" - "+axes.hoverLabelText(e,i,r);var a="log"===e.type&&n<=0,o=axes.tickText(e,e.c2l(a?-n:n),"hover").text;return a?0===n?"0":MINUS_SIGN+o:o};var SIPREFIXES=["f","p","n","μ","m","","k","M","G","T"];function isSIFormat(e){return"SI"===e||"B"===e}function beyondSI(e){return e>14||e<-15}function numFormat(e,t,r,n){var i=e<0,a=t._tickround,o=r||t.exponentformat||"B",s=t._tickexponent,l=axes.getTickFormat(t),c=t.separatethousands;if(n){var u={exponentformat:o,minexponent:t.minexponent,dtick:"none"===t.showexponent?t.dtick:isNumeric$f(e)&&Math.abs(e)||1,range:"none"===t.showexponent?t.range.map(t.r2d):[0,e||1]};autoTickRound(u),a=(Number(u._tickround)||0)+4,s=u._tickexponent,t.hoverformat&&(l=t.hoverformat)}if(l)return t._numFormat(l)(e).replace(/-/g,MINUS_SIGN);var d,h=Math.pow(10,-a)/2;if("none"===o&&(s=0),(e=Math.abs(e))<h)e="0",i=!1;else{if(e+=h,s&&(e*=Math.pow(10,-s),a+=s),0===a)e=String(Math.floor(e));else if(a<0){e=(e=String(Math.round(e))).substr(0,e.length+a);for(var g=a;g<0;g++)e+="0"}else{var p=(e=String(e)).indexOf(".")+1;p&&(e=e.substr(0,p+a).replace(/\.?0+$/,""))}e=Lib$1n.numSeparate(e,t._separators,c)}s&&"hide"!==o&&(isSIFormat(o)&&beyondSI(s)&&(o="power"),d=s<0?MINUS_SIGN+-s:"power"!==o?"+"+s:String(s),"e"===o||"E"===o?e+=o+d:"power"===o?e+="×10<sup>"+d+"</sup>":"B"===o&&9===s?e+="B":isSIFormat(o)&&(e+=SIPREFIXES[s/3+5]));return i?MINUS_SIGN+e:e}function filterPush(e,t){if(e){var r=Object.keys(MARGIN_MAPPING).reduce((function(e,r){return-1!==t.indexOf(r)&&MARGIN_MAPPING[r].forEach((function(t){e[t]=1})),e}),{});Object.keys(e).forEach((function(t){r[t]||(1===t.length?e[t]=0:delete e[t])}))}}function getBoundaryVals(e,t){var r,n=[],i=function(e,t){var r=e.xbnd[t];null!==r&&n.push(Lib$1n.extendFlat({},e,{x:r}))};if(t.length){for(r=0;r<t.length;r++)i(t[r],0);i(t[r-1],1)}return n}function getSecondaryLabelVals(e,t){for(var r=[],n={},i=0;i<t.length;i++){var a=t[i];n[a.text2]?n[a.text2].push(a.x):n[a.text2]=[a.x]}for(var o in n)r.push(tickTextObj(e,Lib$1n.interp(n[o],.5),o));return r}function getDividerVals(e,t){var r,n,i=[],a=t.length&&t[t.length-1].x<t[0].x,o=function(e,t){var r=e.xbnd[t];null!==r&&i.push(Lib$1n.extendFlat({},e,{x:r}))};if(e.showdividers&&t.length){for(r=0;r<t.length;r++){var s=t[r];s.text2!==n&&o(s,a?1:0),n=s.text2}o(t[r-1],a?0:1)}return i}function calcLabelLevelBbox(e,t){var r,n,i,a;return e._selections[t].size()?(r=1/0,n=-1/0,i=1/0,a=-1/0,e._selections[t].each((function(){var e=selectTickLabel(this),t=Drawing$l.bBox(e.node().parentNode);r=Math.min(r,t.top),n=Math.max(n,t.bottom),i=Math.min(i,t.left),a=Math.max(a,t.right)}))):(r=0,n=0,i=0,a=0),{top:r,bottom:n,left:i,right:a,height:n-r,width:a-i}}function getPosX(e){return void 0!==e.periodX?e.periodX:e.x}function getTickLabelUV(e){var t=e.ticklabelposition||"",r=function(e){return-1!==t.indexOf(e)},n=r("top"),i=r("left"),a=r("right"),o=r("bottom"),s=r("inside"),l=o||i||n||a;if(!l&&!s)return[0,0];var c=e.side,u=l?(e.tickwidth||0)/2:0,d=TEXTPAD$1,h=e.tickfont?e.tickfont.size:12;return(o||n)&&(u+=h*CAP_SHIFT,d+=(e.linewidth||0)/2),(i||a)&&(u+=(e.linewidth||0)/2,d+=TEXTPAD$1),s&&"top"===c&&(d-=h*(1-CAP_SHIFT)),(i||n)&&(u=-u),"bottom"!==c&&"right"!==c||(d=-d),[l?u:0,s?d:0]}function tickDataFn(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}function drawDividers(e,t,r){var n=t._id+"divider",i=r.vals,a=r.layer.selectAll("path."+n).data(i,tickDataFn);a.exit().remove(),a.enter().insert("path",":first-child").classed(n,1).classed("crisp",1).call(Color$x.stroke,t.dividercolor).style("stroke-width",Drawing$l.crispRound(e,t.dividerwidth,1)+"px"),a.attr("transform",r.transFn).attr("d",r.path)}function approxTitleDepth(e){var t=e.title.font.size,r=(e.title.text.match(svgTextUtils$b.BR_TAG_ALL)||[]).length;return e.title.hasOwnProperty("standoff")?r?t*(CAP_SHIFT+r*LINE_SPACING$6):t*CAP_SHIFT:r?t*(r+1)*LINE_SPACING$6:t}function drawTitle(e,t){var r,n=e._fullLayout,i=t._id,a=i.charAt(0),o=t.title.font.size;if(t.title.hasOwnProperty("standoff"))r=t._depth+t.title.standoff+approxTitleDepth(t);else{var s=insideTicklabelposition(t);if("multicategory"===t.type)r=t._depth;else{var l=1.5*o;s&&(l=.5*o,"outside"===t.ticks&&(l+=t.ticklen)),r=10+l+(t.linewidth?t.linewidth-1:0)}s||(r+="x"===a?"top"===t.side?o*(t.showticklabels?1:0):o*(t.showticklabels?1.5:.5):"right"===t.side?o*(t.showticklabels?1:.5):o*(t.showticklabels?.5:0))}var c,u,d,h,g=axes.getPxPosition(e,t);if("x"===a?(u=t._offset+t._length/2,d="top"===t.side?g-r:g+r):(d=t._offset+t._length/2,u="right"===t.side?g+r:g-r,c={rotate:"-90",offset:0}),"multicategory"!==t.type){var p=t._selections[t._id+"tick"];if(h={selection:p,side:t.side},p&&p.node()&&p.node().parentNode){var f=Drawing$l.getTranslate(p.node().parentNode);h.offsetLeft=f.x,h.offsetTop=f.y}t.title.hasOwnProperty("standoff")&&(h.pad=0)}return t._titleStandoff=r,Titles$1.draw(e,i+"title",{propContainer:t,propName:t._name+".title.text",placeholder:n._dfltTitle[a],avoid:h,transform:c,attributes:{x:u,y:d,"text-anchor":"middle"}})}function clipEnds(e,t){var r=e.l2p(t);return r>1&&r<e._length-1}function anyCounterAxLineAtZero(e,t,r,n){var i=r._mainAxis;if(i){var a=e._fullLayout,o=t._id.charAt(0),s=axes.counterLetter(t._id),l=t._offset+(Math.abs(n[0])<Math.abs(n[1])==("x"===o)?0:t._length),c=a._plots[r._mainSubplot];if(!(c.mainplotinfo||c).overlays.length)return g(r);for(var u=axes.list(e,s),d=0;d<u.length;d++){var h=u[d];if(h._mainAxis===i&&g(h))return!0}}function g(e){if(!e.showline||!e.linewidth)return!1;var r=Math.max((e.linewidth+t.zerolinewidth)/2,1);function n(e){return"number"==typeof e&&Math.abs(e-l)<r}if(n(e._mainLinePosition)||n(e._mainMirrorPosition))return!0;var i=e._linepositions||{};for(var a in i)if(n(i[a][0])||n(i[a][1]))return!0}}function hasBarsOrFill(e,t){for(var r=e._fullData,n=t._mainSubplot,i=t._id.charAt(0),a=0;a<r.length;a++){var o=r[a];if(!0===o.visible&&o.xaxis+o.yaxis===n){if(Registry$I.traceIs(o,"bar-like")&&o.orientation==={x:"h",y:"v"}[i])return!0;if(o.fill&&o.fill.charAt(o.fill.length-1)===i)return!0}}return!1}function selectTickLabel(e){var t=d3$m.select(e),r=t.select(".text-math-group");return r.empty()?t.select("text"):r}function axAutoMarginID(e){return e._id+".automargin"}function axMirrorAutoMarginID(e){return axAutoMarginID(e)+".mirror"}function rangeSliderAutoMarginID(e){return e._id+".rangeslider"}function makeAxisGroups(e,t){var r,n,i=[];for(r=0;r<t.length;r++){var a=[],o=e._fullData[t[r]].xaxis,s=e._fullData[t[r]].yaxis;if(o&&s){for(n=0;n<i.length;n++)-1===i[n].x.indexOf(o)&&-1===i[n].y.indexOf(s)||a.push(n);if(a.length){var l,c=i[a[0]];if(a.length>1)for(n=1;n<a.length;n++)l=i[a[n]],mergeAxisGroups(c.x,l.x),mergeAxisGroups(c.y,l.y);mergeAxisGroups(c.x,[o]),mergeAxisGroups(c.y,[s])}else i.push({x:[o],y:[s]})}}return i}function mergeAxisGroups(e,t){for(var r=0;r<t.length;r++)-1===e.indexOf(t[r])&&e.push(t[r])}function swapAxisGroup(e,t,r){var n,i,a=[],o=[],s=e.layout;for(n=0;n<t.length;n++)a.push(axes.getFromId(e,t[n]));for(n=0;n<r.length;n++)o.push(axes.getFromId(e,r[n]));var l=Object.keys(axAttrs),c=["anchor","domain","overlaying","position","side","tickangle","editType"],u=["linear","log"];for(n=0;n<l.length;n++){var d=l[n],h=a[0][d],g=o[0][d],p=!0,f=!1,m=!1;if("_"!==d.charAt(0)&&"function"!=typeof h&&-1===c.indexOf(d)){for(i=1;i<a.length&&p;i++){var y=a[i][d];"type"===d&&-1!==u.indexOf(h)&&-1!==u.indexOf(y)&&h!==y?f=!0:y!==h&&(p=!1)}for(i=1;i<o.length&&p;i++){var b=o[i][d];"type"===d&&-1!==u.indexOf(g)&&-1!==u.indexOf(b)&&g!==b?m=!0:o[i][d]!==g&&(p=!1)}p&&(f&&(s[a[0]._name].type="linear"),m&&(s[o[0]._name].type="linear"),swapAxisAttrs(s,d,a,o,e._fullLayout._dfltTitle))}}for(n=0;n<e._fullLayout.annotations.length;n++){var v=e._fullLayout.annotations[n];-1!==t.indexOf(v.xref)&&-1!==r.indexOf(v.yref)&&Lib$1n.swapAttrs(s.annotations[n],["?"])}}function swapAxisAttrs(e,t,r,n,i){var a,o=Lib$1n.nestedProperty,s=o(e[r[0]._name],t).get(),l=o(e[n[0]._name],t).get();for("title"===t&&(s&&s.text===i.x&&(s.text=i.y),l&&l.text===i.y&&(l.text=i.x)),a=0;a<r.length;a++)o(e,r[a]._name+"."+t).set(l);for(a=0;a<n.length;a++)o(e,n[a]._name+"."+t).set(s)}function isAngular(e){return"angularaxis"===e._id}function moveOutsideBreak(e,t){for(var r=t._rangebreaks.length,n=0;n<r;n++){var i=t._rangebreaks[n];if(e>=i.min&&e<i.max)return i.max}return e}function insideTicklabelposition(e){return-1!==(e.ticklabelposition||"").indexOf("inside")}function hideCounterAxisInsideTickLabels(e,t){insideTicklabelposition(e._anchorAxis||{})&&e._hideCounterAxisInsideTickLabels&&e._hideCounterAxisInsideTickLabels(t)}function incrementShift(e,t,r,n){var i,a="free"===e.anchor||void 0!==e.overlaying&&!1!==e.overlaying?e.overlaying:e._id;i=n?"right"===e.side?t:-t:t,a in r||(r[a]={}),e.side in r[a]||(r[a][e.side]=0),r[a][e.side]+=i}function setShiftVal(e,t){return e.autoshift?t[e.overlaying][e.side]:e.shift||0}axes.getTickFormat=function(e){var t,r,n;function i(e){return"string"!=typeof e?e:Number(e.replace("M",""))*ONEAVGMONTH$1}function a(e,t){var r=["L","D"];if(typeof e==typeof t){if("number"==typeof e)return e-t;var n=r.indexOf(e.charAt(0)),i=r.indexOf(t.charAt(0));return n===i?Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,"")):n-i}return"number"==typeof e?1:-1}function o(e,t,r){var n=r||function(e){return e},i=t[0],a=t[1];return(!i&&"number"!=typeof i||n(i)<=n(e))&&(!a&&"number"!=typeof a||n(a)>=n(e))}function s(e,t){var r=null===t[0],n=null===t[1],i=a(e,t[0])>=0,o=a(e,t[1])<=0;return(r||i)&&(n||o)}if(e.tickformatstops&&e.tickformatstops.length>0)switch(e.type){case"date":case"linear":for(t=0;t<e.tickformatstops.length;t++)if((n=e.tickformatstops[t]).enabled&&o(e.dtick,n.dtickrange,i)){r=n;break}break;case"log":for(t=0;t<e.tickformatstops.length;t++)if((n=e.tickformatstops[t]).enabled&&s(e.dtick,n.dtickrange)){r=n;break}}return r?r.value:e.tickformat},axes.getSubplots=function(e,t){var r=e._fullLayout._subplots,n=r.cartesian.concat(r.gl2d||[]),i=t?axes.findSubplotsWithAxis(n,t):n;return i.sort((function(e,t){var r=e.substr(1).split("y"),n=t.substr(1).split("y");return r[0]===n[0]?+r[1]-+n[1]:+r[0]-+n[0]})),i},axes.findSubplotsWithAxis=function(e,t){for(var r=new RegExp("x"===t._id.charAt(0)?"^"+t._id+"y":t._id+"$"),n=[],i=0;i<e.length;i++){var a=e[i];r.test(a)&&n.push(a)}return n},axes.makeClipPaths=function(e){var t=e._fullLayout;if(!t._hasOnlyLargeSploms){var r,n,i={_offset:0,_length:t.width,_id:""},a={_offset:0,_length:t.height,_id:""},o=axes.list(e,"x",!0),s=axes.list(e,"y",!0),l=[];for(r=0;r<o.length;r++)for(l.push({x:o[r],y:a}),n=0;n<s.length;n++)0===r&&l.push({x:i,y:s[n]}),l.push({x:o[r],y:s[n]});var c=t._clips.selectAll(".axesclip").data(l,(function(e){return e.x._id+e.y._id}));c.enter().append("clipPath").classed("axesclip",!0).attr("id",(function(e){return"clip"+t._uid+e.x._id+e.y._id})).append("rect"),c.exit().remove(),c.each((function(e){d3$m.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})}))}},axes.draw=function(e,t,r){var n=e._fullLayout;"redraw"===t&&n._paper.selectAll("g.subplot").each((function(e){var t=e[0],r=n._plots[t];if(r){var i=r.xaxis,a=r.yaxis;r.xaxislayer.selectAll("."+i._id+"tick").remove(),r.yaxislayer.selectAll("."+a._id+"tick").remove(),r.xaxislayer.selectAll("."+i._id+"tick2").remove(),r.yaxislayer.selectAll("."+a._id+"tick2").remove(),r.xaxislayer.selectAll("."+i._id+"divider").remove(),r.yaxislayer.selectAll("."+a._id+"divider").remove(),r.minorGridlayer&&r.minorGridlayer.selectAll("path").remove(),r.gridlayer&&r.gridlayer.selectAll("path").remove(),r.zerolinelayer&&r.zerolinelayer.selectAll("path").remove(),n._infolayer.select(".g-"+i._id+"title").remove(),n._infolayer.select(".g-"+a._id+"title").remove()}}));var i=t&&"redraw"!==t?t:axes.listIds(e),a=axes.list(e).filter((function(e){return e.autoshift})).map((function(e){return e.overlaying}));i.map((function(t){var r=axes.getFromId(e,t);if("sync"===r.tickmode&&r.overlaying){var n=i.findIndex((function(e){return e===r.overlaying}));n>=0&&i.unshift(i.splice(n,1).shift())}}));var o={false:{left:0,right:0}};return Lib$1n.syncOrAsync(i.map((function(t){return function(){if(t){var n=axes.getFromId(e,t);r||(r={}),r.axShifts=o,r.overlayingShiftedAx=a;var i=axes.drawOne(e,n,r);return n._shiftPusher&&incrementShift(n,n._fullDepth||0,o,!0),n._r=n.range.slice(),n._rl=Lib$1n.simpleMap(n._r,n.r2l),i}}})))},axes.drawOne=function(e,t,r){var n,i,a,o=(r=r||{}).axShifts||{},s=r.overlayingShiftedAx||[];t.setScale();var l=e._fullLayout,c=t._id,u=c.charAt(0),d=axes.counterLetter(c),h=l._plots[t._mainSubplot];if(h){if(t._shiftPusher=t.autoshift||-1!==s.indexOf(t._id)||-1!==s.indexOf(t.overlaying),t._shiftPusher&"free"===t.anchor){var g=t.linewidth/2||0;"inside"===t.ticks&&(g+=t.ticklen),incrementShift(t,g,o,!0),incrementShift(t,t.shift||0,o,!1)}!0===r.skipTitle&&void 0!==t._shift||(t._shift=setShiftVal(t,o));var p=h[u+"axislayer"],f=t._mainLinePosition,m=f+=t._shift,y=t._mainMirrorPosition,b=t._vals=axes.calcTicks(t),v=[t.mirror,m,y].join("_");for(n=0;n<b.length;n++)b[n].axInfo=v;t._selections={},t._tickAngles&&(t._prevTickAngles=t._tickAngles),t._tickAngles={},t._depth=null;var x={};if(t.visible){var B,I,F=axes.makeTransTickFn(t),A=axes.makeTransTickLabelFn(t),C="inside"===t.ticks,w="outside"===t.ticks;if("boundaries"===t.tickson){var Q=getBoundaryVals(t,b);I=axes.clipEnds(t,Q),B=C?I:Q}else I=axes.clipEnds(t,b),B=C&&"period"!==t.ticklabelmode?I:b;var U,S=t._gridVals=I,E=getDividerVals(t,b);if(!l._hasOnlyLargeSploms){var L=t._subplotsWith,_={};for(n=0;n<L.length;n++){i=L[n];var T=(a=l._plots[i])[d+"axis"],R=T._mainAxis._id;if(!_[R]){_[R]=1;var $="x"===u?"M0,"+T._offset+"v"+T._length:"M"+T._offset+",0h"+T._length;axes.drawGrid(e,t,{vals:S,counterAxis:T,layer:a.gridlayer.select("."+c),minorLayer:a.minorGridlayer.select("."+c),path:$,transFn:F}),axes.drawZeroLine(e,t,{counterAxis:T,layer:a.zerolinelayer,path:$,transFn:F})}}}var k=axes.getTickSigns(t),N=axes.getTickSigns(t,"minor");if(t.ticks||t.minor&&t.minor.ticks){var G,M,D,V,H=axes.makeTickPath(t,m,k[2]),X=axes.makeTickPath(t,m,N[2],{minor:!0});if(t._anchorAxis&&t.mirror&&!0!==t.mirror?(G=axes.makeTickPath(t,y,k[3]),M=axes.makeTickPath(t,y,N[3],{minor:!0}),D=H+G,V=X+M):(G="",M="",D=H,V=X),t.showdividers&&w&&"boundaries"===t.tickson){var O={};for(n=0;n<E.length;n++)O[E[n].x]=1;U=function(e){return O[e.x]?G:D}}else U=function(e){return e.minor?V:D}}if(axes.drawTicks(e,t,{vals:B,layer:p,path:U,transFn:F}),"allticks"===t.mirror){var Z=Object.keys(t._linepositions||{});for(n=0;n<Z.length;n++){i=Z[n],a=l._plots[i];var W=t._linepositions[i]||[],Y=W[0],P=W[1],z=W[2],J=axes.makeTickPath(t,Y,z?k[0]:N[0],{minor:z})+axes.makeTickPath(t,P,z?k[1]:N[1],{minor:z});axes.drawTicks(e,t,{vals:B,layer:a[u+"axislayer"],path:J,transFn:F})}}var j=[];if(j.push((function(){return axes.drawLabels(e,t,{vals:b,layer:p,plotinfo:a,transFn:A,labelFns:axes.makeLabelFns(t,m)})})),"multicategory"===t.type){var K={x:2,y:10}[u];j.push((function(){var r={x:"height",y:"width"}[u],n=ee()[r]+K+(t._tickAngles[c+"tick"]?t.tickfont.size*LINE_SPACING$6:0);return axes.drawLabels(e,t,{vals:getSecondaryLabelVals(t,b),layer:p,cls:c+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:F,labelFns:axes.makeLabelFns(t,m+n*k[4])})})),j.push((function(){return t._depth=k[4]*(ee("tick2")[t.side]-m),drawDividers(e,t,{vals:E,layer:p,path:axes.makeTickPath(t,m,k[4],{len:t._depth}),transFn:F})}))}else t.title.hasOwnProperty("standoff")&&j.push((function(){t._depth=k[4]*(ee()[t.side]-m)}));var q=Registry$I.getComponentMethod("rangeslider","isVisible")(t);return r.skipTitle||q&&"bottom"===t.side||j.push((function(){return drawTitle(e,t)})),j.push((function(){var r,n,i,a,o=t.side.charAt(0),s=OPPOSITE_SIDE[t.side].charAt(0),c=axes.getPxPosition(e,t),h=w?t.ticklen:0;(t.automargin||q||t._shiftPusher)&&("multicategory"===t.type?r=ee("tick2"):(r=ee(),"x"===u&&"b"===o&&(t._depth=Math.max(r.width>0?r.bottom-c:0,h))));var g=0,p=0;if(t._shiftPusher&&(g=Math.max(h,r.height>0?"l"===o?c-r.left:r.right-c:0),t.title.text!==l._dfltTitle[u]&&(p=(t._titleStandoff||0)+(t._titleScoot||0),"l"===o&&(p+=approxTitleDepth(t))),t._fullDepth=Math.max(g,p)),t.automargin){n={x:0,y:0,r:0,l:0,t:0,b:0};var f=[0,1],m="number"==typeof t._shift?t._shift:0;if("x"===u){if("b"===o?n[o]=t._depth:(n[o]=t._depth=Math.max(r.width>0?c-r.top:0,h),f.reverse()),r.width>0){var y=r.right-(t._offset+t._length);y>0&&(n.xr=1,n.r=y);var b=t._offset-r.left;b>0&&(n.xl=0,n.l=b)}}else if("l"===o?(t._depth=Math.max(r.height>0?c-r.left:0,h),n[o]=t._depth-m):(t._depth=Math.max(r.height>0?r.right-c:0,h),n[o]=t._depth+m,f.reverse()),r.height>0){var v=r.bottom-(t._offset+t._length);v>0&&(n.yb=0,n.b=v);var x=t._offset-r.top;x>0&&(n.yt=1,n.t=x)}n[d]="free"===t.anchor?t.position:t._anchorAxis.domain[f[0]],t.title.text!==l._dfltTitle[u]&&(n[o]+=approxTitleDepth(t)+(t.title.standoff||0)),t.mirror&&"free"!==t.anchor&&((i={x:0,y:0,r:0,l:0,t:0,b:0})[s]=t.linewidth,t.mirror&&!0!==t.mirror&&(i[s]+=h),!0===t.mirror||"ticks"===t.mirror?i[d]=t._anchorAxis.domain[f[1]]:"all"!==t.mirror&&"allticks"!==t.mirror||(i[d]=[t._counterDomainMin,t._counterDomainMax][f[1]]))}q&&(a=Registry$I.getComponentMethod("rangeslider","autoMarginOpts")(e,t)),"string"==typeof t.automargin&&(filterPush(n,t.automargin),filterPush(i,t.automargin)),Plots$b.autoMargin(e,axAutoMarginID(t),n),Plots$b.autoMargin(e,axMirrorAutoMarginID(t),i),Plots$b.autoMargin(e,rangeSliderAutoMarginID(t),a)})),Lib$1n.syncOrAsync(j)}}function ee(e){var r=c+(e||"tick");return x[r]||(x[r]=calcLabelLevelBbox(t,r)),x[r]}},axes.getTickSigns=function(e,t){var r=e._id.charAt(0),n={x:"top",y:"right"}[r],i=e.side===n?1:-1,a=[-1,1,i,-i];return"inside"!==(t?(e.minor||{}).ticks:e.ticks)==("x"===r)&&(a=a.map((function(e){return-e}))),e.side&&a.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)]),a},axes.makeTransTickFn=function(e){return"x"===e._id.charAt(0)?function(t){return strTranslate$a(e._offset+e.l2p(t.x),0)}:function(t){return strTranslate$a(0,e._offset+e.l2p(t.x))}},axes.makeTransTickLabelFn=function(e){var t=getTickLabelUV(e),r=t[0],n=t[1];return"x"===e._id.charAt(0)?function(t){return strTranslate$a(r+e._offset+e.l2p(getPosX(t)),n)}:function(t){return strTranslate$a(n,r+e._offset+e.l2p(getPosX(t)))}},axes.makeTickPath=function(e,t,r,n){n||(n={});var i=n.minor;if(i&&!e.minor)return"";var a=void 0!==n.len?n.len:i?e.minor.ticklen:e.ticklen,o=e._id.charAt(0),s=(e.linewidth||1)/2;return"x"===o?"M0,"+(t+s*r)+"v"+a*r:"M"+(t+s*r)+",0h"+a*r},axes.makeLabelFns=function(e,t,r){var n=e.ticklabelposition||"",i=function(e){return-1!==n.indexOf(e)},a=i("top"),o=i("left"),s=i("right"),l=i("bottom")||o||a||s,c=i("inside"),u="inside"===n&&"inside"===e.ticks||!c&&"outside"===e.ticks&&"boundaries"!==e.tickson,d=0,h=0,g=u?e.ticklen:0;if(c?g*=-1:l&&(g=0),u&&(d+=g,r)){var p=Lib$1n.deg2rad(r);d=g*Math.cos(p)+1,h=g*Math.sin(p)}e.showticklabels&&(u||e.showline)&&(d+=.2*e.tickfont.size);var f,m,y,b,v,x={labelStandoff:d+=(e.linewidth||1)/2*(c?-1:1),labelShift:h},B=0,I=e.side,F=e._id.charAt(0),A=e.tickangle;if("x"===F)b=(v=!c&&"bottom"===I||c&&"top"===I)?1:-1,c&&(b*=-1),f=h*b,m=t+d*b,y=v?1:-.2,90===Math.abs(A)&&(c?y+=MID_SHIFT:y=-90===A&&"bottom"===I?CAP_SHIFT:90===A&&"top"===I?MID_SHIFT:.5,B=MID_SHIFT/2*(A/90)),x.xFn=function(e){return e.dx+f+B*e.fontSize},x.yFn=function(e){return e.dy+m+e.fontSize*y},x.anchorFn=function(e,t){if(l){if(o)return"end";if(s)return"start"}return isNumeric$f(t)&&0!==t&&180!==t?t*b<0!==c?"end":"start":"middle"},x.heightFn=function(t,r,n){return r<-60||r>60?-.5*n:"top"===e.side!==c?-n:0};else if("y"===F){if(b=(v=!c&&"left"===I||c&&"right"===I)?1:-1,c&&(b*=-1),f=d,m=h*b,y=0,c||90!==Math.abs(A)||(y=-90===A&&"left"===I||90===A&&"right"===I?CAP_SHIFT:.5),c){var C=isNumeric$f(A)?+A:0;if(0!==C){var w=Lib$1n.deg2rad(C);B=Math.abs(Math.sin(w))*CAP_SHIFT*b,y=0}}x.xFn=function(e){return e.dx+t-(f+e.fontSize*y)*b+B*e.fontSize},x.yFn=function(e){return e.dy+m+e.fontSize*MID_SHIFT},x.anchorFn=function(e,t){return isNumeric$f(t)&&90===Math.abs(t)?"middle":v?"end":"start"},x.heightFn=function(t,r,n){return"right"===e.side&&(r*=-1),r<-30?-n:r<30?-.5*n:0}}return x},axes.drawTicks=function(e,t,r){r=r||{};var n=t._id+"tick",i=[].concat(t.minor&&t.minor.ticks?r.vals.filter((function(e){return e.minor&&!e.noTick})):[]).concat(t.ticks?r.vals.filter((function(e){return!e.minor&&!e.noTick})):[]),a=r.layer.selectAll("path."+n).data(i,tickDataFn);a.exit().remove(),a.enter().append("path").classed(n,1).classed("ticks",1).classed("crisp",!1!==r.crisp).each((function(e){return Color$x.stroke(d3$m.select(this),e.minor?t.minor.tickcolor:t.tickcolor)})).style("stroke-width",(function(r){return Drawing$l.crispRound(e,r.minor?t.minor.tickwidth:t.tickwidth,1)+"px"})).attr("d",r.path).style("display",null),hideCounterAxisInsideTickLabels(t,[TICK_PATH]),a.attr("transform",r.transFn)},axes.drawGrid=function(e,t,r){if(r=r||{},"sync"!==t.tickmode){var n=t._id+"grid",i=t.minor&&t.minor.showgrid,a=i?r.vals.filter((function(e){return e.minor})):[],o=t.showgrid?r.vals.filter((function(e){return!e.minor})):[],s=r.counterAxis;if(s&&axes.shouldShowZeroLine(e,t,s))for(var l="array"===t.tickmode,c=0;c<o.length;c++){var u=o[c].x;if(l?!u:Math.abs(u)<t.dtick/100){if(o=o.slice(0,c).concat(o.slice(c+1)),!l)break;c--}}t._gw=Drawing$l.crispRound(e,t.gridwidth,1);for(var d=i?Drawing$l.crispRound(e,t.minor.gridwidth,1):0,h=r.layer,g=r.minorLayer,p=1;p>=0;p--){var f=p?h:g;if(f){var m=f.selectAll("path."+n).data(p?o:a,tickDataFn);m.exit().remove(),m.enter().append("path").classed(n,1).classed("crisp",!1!==r.crisp),m.attr("transform",r.transFn).attr("d",r.path).each((function(e){return Color$x.stroke(d3$m.select(this),e.minor?t.minor.gridcolor:t.gridcolor||"#ddd")})).style("stroke-dasharray",(function(e){return Drawing$l.dashStyle(e.minor?t.minor.griddash:t.griddash,e.minor?t.minor.gridwidth:t.gridwidth)})).style("stroke-width",(function(e){return(e.minor?d:t._gw)+"px"})).style("display",null),"function"==typeof r.path&&m.attr("d",r.path)}}hideCounterAxisInsideTickLabels(t,[GRID_PATH,MINORGRID_PATH])}},axes.drawZeroLine=function(e,t,r){r=r||r;var n=t._id+"zl",i=axes.shouldShowZeroLine(e,t,r.counterAxis),a=r.layer.selectAll("path."+n).data(i?[{x:0,id:t._id}]:[]);a.exit().remove(),a.enter().append("path").classed(n,1).classed("zl",1).classed("crisp",!1!==r.crisp).each((function(){r.layer.selectAll("path").sort((function(e,t){return idSort(e.id,t.id)}))})),a.attr("transform",r.transFn).attr("d",r.path).call(Color$x.stroke,t.zerolinecolor||Color$x.defaultLine).style("stroke-width",Drawing$l.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null),hideCounterAxisInsideTickLabels(t,[ZERO_PATH])},axes.drawLabels=function(e,t,r){r=r||{};var n=e._fullLayout,i=t._id,a=i.charAt(0),o=r.cls||i+"tick",s=r.vals.filter((function(e){return e.text})),l=r.labelFns,c=r.secondary?0:t.tickangle,u=(t._prevTickAngles||{})[o],d=r.layer.selectAll("g."+o).data(t.showticklabels?s:[],tickDataFn),h=[];function g(e,n){e.each((function(e){var i=d3$m.select(this),a=i.select(".text-math-group"),o=l.anchorFn(e,n),s=r.transFn.call(i.node(),e)+(isNumeric$f(n)&&0!=+n?" rotate("+n+","+l.xFn(e)+","+(l.yFn(e)-e.fontSize/2)+")":""),c=svgTextUtils$b.lineCount(i),u=LINE_SPACING$6*e.fontSize,d=l.heightFn(e,isNumeric$f(n)?+n:0,(c-1)*u);if(d&&(s+=strTranslate$a(0,d)),a.empty()){var h=i.select("text");h.attr({transform:s,"text-anchor":o}),h.style("opacity",1),t._adjustTickLabelsOverflow&&t._adjustTickLabelsOverflow()}else{var g=Drawing$l.bBox(a.node()).width*{end:-.5,start:.5}[o];a.attr("transform",s+strTranslate$a(g,0))}}))}d.enter().append("g").classed(o,1).append("text").attr("text-anchor","middle").each((function(t){var r=d3$m.select(this),n=e._promises.length;r.call(svgTextUtils$b.positionText,l.xFn(t),l.yFn(t)).call(Drawing$l.font,t.font,t.fontSize,t.fontColor).text(t.text).call(svgTextUtils$b.convertToTspans,e),e._promises[n]?h.push(e._promises.pop().then((function(){g(r,c)}))):g(r,c)})),hideCounterAxisInsideTickLabels(t,[TICK_TEXT]),d.exit().remove(),r.repositionOnUpdate&&d.each((function(e){d3$m.select(this).select("text").call(svgTextUtils$b.positionText,l.xFn(e),l.yFn(e))})),t._adjustTickLabelsOverflow=function(){var r=t.ticklabeloverflow;if(r&&"allow"!==r){var i=-1!==r.indexOf("hide"),a="x"===t._id.charAt(0),o=0,s=a?e._fullLayout.width:e._fullLayout.height;if(-1!==r.indexOf("domain")){var l=Lib$1n.simpleMap(t.range,t.r2l);o=t.l2p(l[0])+t._offset,s=t.l2p(l[1])+t._offset}var c=Math.min(o,s),u=Math.max(o,s),h=t.side,g=1/0,p=-1/0;for(var f in d.each((function(e){var r=d3$m.select(this);if(r.select(".text-math-group").empty()){var n=Drawing$l.bBox(r.node()),o=0;a?(n.right>u||n.left<c)&&(o=1):(n.bottom>u||n.top+(t.tickangle?0:e.fontSize/4)<c)&&(o=1);var s=r.select("text");o?i&&s.style("opacity",0):(s.style("opacity",1),g="bottom"===h||"right"===h?Math.min(g,a?n.top:n.left):-1/0,p="top"===h||"left"===h?Math.max(p,a?n.bottom:n.right):1/0)}})),n._plots){var m=n._plots[f];if(t._id===m.xaxis._id||t._id===m.yaxis._id){var y=a?m.yaxis:m.xaxis;y&&(y["_visibleLabelMin_"+t._id]=g,y["_visibleLabelMax_"+t._id]=p)}}}},t._hideCounterAxisInsideTickLabels=function(e){var r="x"===t._id.charAt(0),i=[];for(var a in n._plots){var o=n._plots[a];t._id!==o.xaxis._id&&t._id!==o.yaxis._id||i.push(r?o.yaxis:o.xaxis)}i.forEach((function(r,i){r&&insideTicklabelposition(r)&&(e||[ZERO_PATH,MINORGRID_PATH,GRID_PATH,TICK_PATH,TICK_TEXT]).forEach((function(e){var a="tick"===e.K&&"text"===e.L&&"period"===t.ticklabelmode,o=n._plots[t._mainSubplot];(e.K===ZERO_PATH.K?o.zerolinelayer.selectAll("."+t._id+"zl"):e.K===MINORGRID_PATH.K?o.minorGridlayer.selectAll("."+t._id):e.K===GRID_PATH.K?o.gridlayer.selectAll("."+t._id):o[t._id.charAt(0)+"axislayer"]).each((function(){var n=d3$m.select(this);e.L&&(n=n.selectAll(e.L)),n.each((function(n){var o=t.l2p(a?getPosX(n):n.x)+t._offset,s=d3$m.select(this);o<t["_visibleLabelMax_"+r._id]&&o>t["_visibleLabelMin_"+r._id]?s.style("display","none"):"tick"!==e.K||i||s.style("display",null)}))}))}))}))},g(d,u+1?u:c);var p=null;t._selections&&(t._selections[o]=d);var f=[function(){return h.length&&Promise.all(h)}];t.automargin&&n._redrawFromAutoMarginCount&&90===u?(p=90,f.push((function(){g(d,u)}))):f.push((function(){if(g(d,c),s.length&&"x"===a&&!isNumeric$f(c)&&("log"!==t.type||"D"!==String(t.dtick).charAt(0))){p=0;var e,n=0,i=[];if(d.each((function(e){n=Math.max(n,e.fontSize);var r=t.l2p(e.x),a=selectTickLabel(this),o=Drawing$l.bBox(a.node());i.push({top:0,bottom:10,height:10,left:r-o.width/2,right:r+o.width/2+2,width:o.width+2})})),"boundaries"!==t.tickson&&!t.showdividers||r.secondary){var o=s.length,l=Math.abs((s[o-1].x-s[0].x)*t._m)/(o-1),u=t.ticklabelposition||"",h=function(e){return-1!==u.indexOf(e)},f=h("top"),m=h("left"),y=h("right"),b=h("bottom")||m||f||y?(t.tickwidth||0)+2*TEXTPAD$1:0,v=l<2.5*n||"multicategory"===t.type||"realaxis"===t._name;for(e=0;e<i.length-1;e++)if(Lib$1n.bBoxIntersect(i[e],i[e+1],b)){p=v?90:30;break}}else{var x=2;for(t.ticks&&(x+=t.tickwidth/2),e=0;e<i.length;e++){var B=s[e].xbnd,I=i[e];if(null!==B[0]&&I.left-t.l2p(B[0])<x||null!==B[1]&&t.l2p(B[1])-I.right<x){p=90;break}}}p&&g(d,p)}})),t._tickAngles&&f.push((function(){t._tickAngles[o]=null===p?isNumeric$f(c)?c:0:p}));var m=t._anchorAxis;m&&m.autorange&&insideTicklabelposition(t)&&!isLinked(n,t._id)&&(n._insideTickLabelsAutorange||(n._insideTickLabelsAutorange={}),n._insideTickLabelsAutorange[m._name+".autorange"]=m.autorange,f.push((function(){d.each((function(e,r){var n=selectTickLabel(this);n.select(".text-math-group").empty()&&(t._vals[r].bb=Drawing$l.bBox(n.node()))}))})));var y=Lib$1n.syncOrAsync(f);return y&&y.then&&e._promises.push(y),y},axes.getPxPosition=function(e,t){var r,n=e._fullLayout._size,i=t._id.charAt(0),a=t.side;return"free"!==t.anchor?r=t._anchorAxis:"x"===i?r={_offset:n.t+(1-(t.position||0))*n.h,_length:0}:"y"===i&&(r={_offset:n.l+(t.position||0)*n.w+t._shift,_length:0}),"top"===a||"left"===a?r._offset:"bottom"===a||"right"===a?r._offset+r._length:void 0},axes.shouldShowZeroLine=function(e,t,r){var n=Lib$1n.simpleMap(t.range,t.r2l);return n[0]*n[1]<=0&&t.zeroline&&("linear"===t.type||"-"===t.type)&&!(t.rangebreaks&&t.maskBreaks(0)===BADNUM$5)&&(clipEnds(t,0)||!anyCounterAxLineAtZero(e,t,r,n)||hasBarsOrFill(e,t))},axes.clipEnds=function(e,t){return t.filter((function(t){return clipEnds(e,t.x)}))},axes.allowAutoMargin=function(e){for(var t=axes.list(e,"",!0),r=0;r<t.length;r++){var n=t[r];n.automargin&&(Plots$b.allowAutoMargin(e,axAutoMarginID(n)),n.mirror&&Plots$b.allowAutoMargin(e,axMirrorAutoMarginID(n))),Registry$I.getComponentMethod("rangeslider","isVisible")(n)&&Plots$b.allowAutoMargin(e,rangeSliderAutoMarginID(n))}},axes.swap=function(e,t){for(var r=makeAxisGroups(e,t),n=0;n<r.length;n++)swapAxisGroup(e,r[n].x,r[n].y)};var graph_interact={},dragelementExports={},dragelement={get exports(){return dragelementExports},set exports(e){dragelementExports=e}},rootPosition={left:0,top:0},mouseEventOffset_1=mouseEventOffset;function mouseEventOffset(e,t,r){t=t||e.currentTarget||e.srcElement,Array.isArray(r)||(r=[0,0]);var n=e.clientX||0,i=e.clientY||0,a=getBoundingClientOffset(t);return r[0]=n-a.left,r[1]=i-a.top,r}function getBoundingClientOffset(e){return e===window||e===document||e===document.body?rootPosition:e.getBoundingClientRect()}var align=function(e,t,r,n,i){var a=(e-r)/(n-r),o=a+t/(n-r),s=(a+o)/2;return"left"===i||"bottom"===i?a:"center"===i||"middle"===i?s:"right"===i||"top"===i?o:a<2/3-s?a:o>4/3-s?o:s},Lib$1m=libExports,cursorset=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]],cursor=function(e,t,r,n){return e="left"===r?0:"center"===r?1:"right"===r?2:Lib$1m.constrain(Math.floor(3*e),0,2),t="bottom"===n?0:"middle"===n?1:"top"===n?2:Lib$1m.constrain(Math.floor(3*t),0,2),cursorset[t][e]},unhoverExports={},unhover$2={get exports(){return unhoverExports},set exports(e){unhoverExports=e}},Events$2=events,throttle$1=throttle$2,getGraphDiv=dom.getGraphDiv,hoverConstants=constants$M,unhover$1=unhover$2.exports={};unhover$1.wrapped=function(e,t,r){(e=getGraphDiv(e))._fullLayout&&throttle$1.clear(e._fullLayout._uid+hoverConstants.HOVERID),unhover$1.raw(e,t,r)},unhover$1.raw=function(e,t){var r=e._fullLayout,n=e._hoverdata;t||(t={}),t.target&&!e._dragged&&!1===Events$2.triggerHandler(e,"plotly_beforehover",t)||(r._hoverlayer.selectAll("g").remove(),r._hoverlayer.selectAll("line").remove(),r._hoverlayer.selectAll("circle").remove(),e._hoverdata=void 0,t.target&&n&&e.emit("plotly_unhover",{event:t,points:n}))};var mouseOffset=mouseEventOffset_1,hasHover=hasHover_1,removeElement=libExports.removeElement,constants$F=constants$K,dragElement$8=dragelement.exports={};dragElement$8.align=align,dragElement$8.getCursor=cursor;var unhover=unhoverExports;function coverSlip(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}function pointerOffset(e){return mouseOffset(e.changedTouches?e.changedTouches[0]:e,document.body)}dragElement$8.unhover=unhover.wrapped,dragElement$8.unhoverRaw=unhover.raw,dragElement$8.init=function(e){var t,r,n,i,a,o,s,l,c=e.gd,u=1,d=c._context.doubleClickDelay,h=e.element;c._mouseDownTime||(c._mouseDownTime=0),h.style.pointerEvents="all",h.onmousedown=p,h.ontouchstart=p;var g=e.clampFn||function(e,t,r){return Math.abs(e)<r&&(e=0),Math.abs(t)<r&&(t=0),[e,t]};function p(g){c._dragged=!1,c._dragging=!0;var p=pointerOffset(g);t=p[0],r=p[1],s=g.target,o=g,l=2===g.buttons||g.ctrlKey,void 0===g.clientX&&void 0===g.clientY&&(g.clientX=t,g.clientY=r),(n=(new Date).getTime())-c._mouseDownTime<d?u+=1:(u=1,c._mouseDownTime=n),e.prepFn&&e.prepFn(g,t,r),hasHover&&!l?(a=coverSlip()).style.cursor=window.getComputedStyle(h).cursor:hasHover||(a=document,i=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(h).cursor),document.addEventListener("mouseup",m),document.addEventListener("touchend",m),!1!==e.dragmode&&(g.preventDefault(),document.addEventListener("mousemove",f),document.addEventListener("touchmove",f,{passive:!1}))}function f(n){n.preventDefault();var i=pointerOffset(n),a=e.minDrag||constants$F.MINDRAG,o=g(i[0]-t,i[1]-r,a),s=o[0],u=o[1];(s||u)&&(c._dragged=!0,dragElement$8.unhover(c,n)),c._dragged&&e.moveFn&&!l&&(c._dragdata={element:h,dx:s,dy:u},e.moveFn(s,u))}function m(t){if(delete c._dragdata,!1!==e.dragmode&&(t.preventDefault(),document.removeEventListener("mousemove",f),document.removeEventListener("touchmove",f)),document.removeEventListener("mouseup",m),document.removeEventListener("touchend",m),hasHover?removeElement(a):i&&(a.documentElement.style.cursor=i,i=null),c._dragging){if(c._dragging=!1,(new Date).getTime()-c._mouseDownTime>d&&(u=Math.max(u-1,1)),c._dragged)e.doneFn&&e.doneFn();else if(e.clickFn&&e.clickFn(u,o),!l){var r;try{r=new MouseEvent("click",t)}catch(e){var n=pointerOffset(t);(r=document.createEvent("MouseEvents")).initMouseEvent("click",t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,n[0],n[1],t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}s.dispatchEvent(r)}c._dragging=!1,c._dragged=!1}else c._dragged=!1}},dragElement$8.coverSlip=coverSlip;var hover$4={},setcursor=function(e,t){(e.attr("class")||"").split(" ").forEach((function(t){0===t.indexOf("cursor-")&&e.classed(t,!1)})),t&&e.classed("cursor-"+t,!0)},setCursor$4=setcursor,STASHATTR="data-savedcursor",NO_CURSOR="!!",override_cursor=function(e,t){var r=e.attr(STASHATTR);if(t){if(!r){for(var n=(e.attr("class")||"").split(" "),i=0;i<n.length;i++){var a=n[i];0===a.indexOf("cursor-")&&e.attr(STASHATTR,a.substr(7)).classed(a,!1)}e.attr(STASHATTR)||e.attr(STASHATTR,NO_CURSOR)}setCursor$4(e,t)}else r&&(e.attr(STASHATTR,null),r===NO_CURSOR?setCursor$4(e):setCursor$4(e,r))},fontAttrs$8=requireFont_attributes(),colorAttrs$3=attributes$L,attributes$E={bgcolor:{valType:"color",editType:"legend",description:["Sets the legend background color.","Defaults to `layout.paper_bgcolor`."].join(" ")},bordercolor:{valType:"color",dflt:colorAttrs$3.defaultLine,editType:"legend",description:"Sets the color of the border enclosing the legend."},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend",description:"Sets the width (in px) of the border enclosing the legend."},font:fontAttrs$8({editType:"legend",description:"Sets the font used to text the legend items."}),grouptitlefont:fontAttrs$8({editType:"legend",description:["Sets the font for group titles in legend.","Defaults to `legend.font` with its size increased about 10%."].join(" ")}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend",description:"Sets the orientation of the legend."},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend",description:["Determines the order at which the legend items are displayed.","If *normal*, the items are displayed top-to-bottom in the same","order as the input data.","If *reversed*, the items are displayed in the opposite order","as *normal*.","If *grouped*, the items are displayed in groups","(when a trace `legendgroup` is provided).","if *grouped+reversed*, the items are displayed in the opposite order","as *grouped*."].join(" ")},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend",description:["Sets the amount of vertical space (in px) between legend groups."].join(" ")},entrywidth:{valType:"number",min:0,editType:"legend",description:["Sets the width (in px or fraction) of the legend.","Use 0 to size the entry based on the text width,","when `entrywidthmode` is set to *pixels*."].join(" ")},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend",description:"Determines what entrywidth means."},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend",description:["Determines if the legend items symbols scale with their corresponding *trace* attributes","or remain *constant* independent of the symbol size on the graph."].join(" ")},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend",description:"Sets the width (in px) of the legend item symbols (the part other than the title.text)."},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend",description:["Determines the behavior on legend item click.","*toggle* toggles the visibility of the item clicked on the graph.","*toggleothers* makes the clicked item the sole visible item on the graph.","*false* disables legend item click interactions."].join(" ")},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend",description:["Determines the behavior on legend item double-click.","*toggle* toggles the visibility of the item clicked on the graph.","*toggleothers* makes the clicked item the sole visible item on the graph.","*false* disables legend item double-click interactions."].join(" ")},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend",description:["Determines the behavior on legend group item click.","*toggleitem* toggles the visibility of the individual item clicked on the graph.","*togglegroup* toggles the visibility of all items in the same legendgroup as the item clicked on the graph."].join(" ")},x:{valType:"number",min:-2,max:3,editType:"legend",description:["Sets the x position (in normalized coordinates) of the legend.","Defaults to *1.02* for vertical legends and","defaults to *0* for horizontal legends."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend",description:["Sets the legend's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the legend.","Value *auto* anchors legends to the right for `x` values greater than or equal to 2/3,","anchors legends to the left for `x` values less than or equal to 1/3 and","anchors legends with respect to their center otherwise."].join(" ")},y:{valType:"number",min:-2,max:3,editType:"legend",description:["Sets the y position (in normalized coordinates) of the legend.","Defaults to *1* for vertical legends,","defaults to *-0.1* for horizontal legends on graphs w/o range sliders and","defaults to *1.1* for horizontal legends on graph with one or multiple range sliders."].join(" ")},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend",description:["Sets the legend's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the legend.","Value *auto* anchors legends at their bottom for `y` values less than or equal to 1/3,","anchors legends to at their top for `y` values greater than or equal to 2/3 and","anchors legends with respect to their middle otherwise."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of legend-driven changes in trace and pie label","visibility. Defaults to `layout.uirevision`."].join(" ")},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend",description:["Sets the vertical alignment of the symbols with respect to their associated text."].join(" ")},title:{text:{valType:"string",dflt:"",editType:"legend",description:["Sets the title of the legend."].join(" ")},font:fontAttrs$8({editType:"legend",description:["Sets this legend's title font.","Defaults to `legend.font` with its size increased about 20%."].join(" ")}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend",description:["Determines the location of legend's title","with respect to the legend items.","Defaulted to *top* with `orientation` is *h*.","Defaulted to *left* with `orientation` is *v*.","The *top left* options could be used to expand","legend area in both x and y sides."].join(" ")},editType:"legend"},editType:"legend"},helpers$x={isGrouped:function(e){return-1!==(e.traceorder||"").indexOf("grouped")},isVertical:function(e){return"h"!==e.orientation},isReversed:function(e){return-1!==(e.traceorder||"").indexOf("reversed")}},Registry$H=registry,Lib$1l=libExports,Template$5=plot_template,plotsAttrs=attributes$M,attributes$D=attributes$E,basePlotLayoutAttributes=layout_attributes$5,helpers$w=helpers$x,defaults$k=function(e,t,r){var n,i=e.legend||{},a=Template$5.newContainer(t,"legend");function o(e,t){return Lib$1l.coerce(i,a,attributes$D,e,t)}for(var s=function(e,t){var r=n._input,i=n;return Lib$1l.coerce(r,i,plotsAttrs,e,t)},l=t.font||{},c=Lib$1l.coerceFont(o,"grouptitlefont",Lib$1l.extendFlat({},l,{size:Math.round(1.1*l.size)})),u=0,d=!1,h="normal",g=0;g<r.length;g++)(n=r[g]).visible&&((n.showlegend||n._dfltShowLegend&&!(n._module&&n._module.attributes&&n._module.attributes.showlegend&&!1===n._module.attributes.showlegend.dflt))&&(u++,n.showlegend&&(d=!0,(Registry$H.traceIs(n,"pie-like")||!0===n._input.showlegend)&&u++),Lib$1l.coerceFont(s,"legendgrouptitle.font",c)),(Registry$H.traceIs(n,"bar")&&"stack"===t.barmode||-1!==["tonextx","tonexty"].indexOf(n.fill))&&(h=helpers$w.isGrouped({traceorder:h})?"grouped+reversed":"reversed"),void 0!==n.legendgroup&&""!==n.legendgroup&&(h=helpers$w.isReversed({traceorder:h})?"reversed+grouped":"grouped"));var p=Lib$1l.coerce(e,t,basePlotLayoutAttributes,"showlegend",d&&u>1);if(!1===p&&(t.legend=void 0),(!1!==p||i.uirevision)&&(o("uirevision",t.uirevision),!1!==p)){o("bgcolor",t.paper_bgcolor),o("bordercolor"),o("borderwidth");var f,m,y,b=Lib$1l.coerceFont(o,"font",t.font),v="h"===o("orientation");if(v?(f=0,Registry$H.getComponentMethod("rangeslider","isVisible")(e.xaxis)?(m=1.1,y="bottom"):(m=-.1,y="top")):(f=1.02,m=1,y="auto"),o("traceorder",h),helpers$w.isGrouped(t.legend)&&o("tracegroupgap"),o("entrywidth"),o("entrywidthmode"),o("itemsizing"),o("itemwidth"),o("itemclick"),o("itemdoubleclick"),o("groupclick"),o("x",f),o("xanchor"),o("y",m),o("yanchor",y),o("valign"),Lib$1l.noneOrAll(i,a,["x","y"]),o("title.text")){o("title.side",v?"left":"top");var x=Lib$1l.extendFlat({},b,{size:Lib$1l.bigFont(b.size)});Lib$1l.coerceFont(o,"title.font",x)}}},Lib$1k=libExports,Registry$G=registry,SHOWISOLATETIP=!0,handle_click=function(e,t,r){var n=t._fullLayout;if(!t._dragged&&!t._editing){var i,a=n.legend.itemclick,o=n.legend.itemdoubleclick,s=n.legend.groupclick;if(1===r&&"toggle"===a&&"toggleothers"===o&&SHOWISOLATETIP&&t.data&&t._context.showTips?(Lib$1k.notifier(Lib$1k._(t,"Double-click on legend to isolate one trace"),"long"),SHOWISOLATETIP=!1):SHOWISOLATETIP=!1,1===r?i=a:2===r&&(i=o),i){var l="togglegroup"===s,c=n.hiddenlabels?n.hiddenlabels.slice():[],u=e.data()[0][0];if(!u.groupTitle||!u.noClick){var d,h,g,p,f,m=t._fullData,y=u.trace,b=y.legendgroup,v={},x=[],B=[],I=[];if(Registry$G.traceIs(y,"pie-like")){var F=u.label,A=c.indexOf(F);"toggle"===i?-1===A?c.push(F):c.splice(A,1):"toggleothers"===i&&(c=[],t.calcdata[0].forEach((function(e){F!==e.label&&c.push(e.label)})),t._fullLayout.hiddenlabels&&t._fullLayout.hiddenlabels.length===c.length&&-1===A&&(c=[])),Registry$G.call("_guiRelayout",t,"hiddenlabels",c)}else{var C,w=b&&b.length,Q=[];if(w)for(d=0;d<m.length;d++)(C=m[d]).visible&&C.legendgroup===b&&Q.push(d);if("toggle"===i){var U;switch(y.visible){case!0:U="legendonly";break;case!1:U=!1;break;case"legendonly":U=!0}if(w)if(l)for(d=0;d<m.length;d++)!1!==m[d].visible&&m[d].legendgroup===b&&N(m[d],U);else N(y,U);else N(y,U)}else if("toggleothers"===i){var S,E,L,_,T=!0;for(d=0;d<m.length;d++)if(S=m[d]===y,L=!0!==m[d].showlegend,!(S||L||(E=w&&m[d].legendgroup===b)||!0!==m[d].visible||Registry$G.traceIs(m[d],"notLegendIsolatable"))){T=!1;break}for(d=0;d<m.length;d++)if(!1!==m[d].visible&&!Registry$G.traceIs(m[d],"notLegendIsolatable"))switch(y.visible){case"legendonly":N(m[d],!0);break;case!0:_=!!T||"legendonly",S=m[d]===y,L=!0!==m[d].showlegend&&!m[d].legendgroup,E=S||w&&m[d].legendgroup===b,N(m[d],!(!E&&!L)||_)}}for(d=0;d<B.length;d++)if(g=B[d]){var R=g.constructUpdate(),$=Object.keys(R);for(h=0;h<$.length;h++)p=$[h],(v[p]=v[p]||[])[I[d]]=R[p]}for(f=Object.keys(v),d=0;d<f.length;d++)for(p=f[d],h=0;h<x.length;h++)v[p].hasOwnProperty(h)||(v[p][h]=void 0);Registry$G.call("_guiRestyle",t,v,x)}}}}function k(e,t,r){var n=x.indexOf(e),i=v[t];return i||(i=v[t]=[]),-1===x.indexOf(e)&&(x.push(e),n=x.length-1),i[n]=r,n}function N(e,t){if(!u.groupTitle||l){var r=e._fullInput;if(Registry$G.hasTransform(r,"groupby")){var n=B[r.index];if(!n){var i=Registry$G.getTransformIndices(r,"groupby"),a=i[i.length-1];n=Lib$1k.keyedContainer(r,"transforms["+a+"].styles","target","value.visible"),B[r.index]=n}var o=n.get(e._group);void 0===o&&(o=!0),!1!==o&&n.set(e._group,t),I[r.index]=k(r.index,"visible",!1!==r.visible)}else{var s=!1!==r.visible&&t;k(r.index,"visible",s)}}}},constants$E={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5},Registry$F=registry,helpers$v=helpers$x,get_legend_data=function(e,t){var r,n,i=t._inHover,a=helpers$v.isGrouped(t),o=helpers$v.isReversed(t),s={},l=[],c=!1,u={},d=0,h=0;function g(e,r){if(""!==e&&helpers$v.isGrouped(t))-1===l.indexOf(e)?(l.push(e),c=!0,s[e]=[r]):s[e].push(r);else{var n="~~i"+d;l.push(n),s[n]=[r],d++}}for(r=0;r<e.length;r++){var p=e[r],f=p[0],m=f.trace,y=m.legendgroup;if(i||m.visible&&m.showlegend)if(Registry$F.traceIs(m,"pie-like"))for(u[y]||(u[y]={}),n=0;n<p.length;n++){var b=p[n].label;u[y][b]||(g(y,{label:b,color:p[n].color,i:p[n].i,trace:m,pts:p[n].pts}),u[y][b]=!0,h=Math.max(h,(b||"").length))}else g(y,f),h=Math.max(h,(m.name||"").length)}if(!l.length)return[];var v=!c||!a,x=[];for(r=0;r<l.length;r++){var B=s[l[r]];v?x.push(B[0]):x.push(B)}for(v&&(x=[x]),r=0;r<x.length;r++){var I=1/0;for(n=0;n<x[r].length;n++){var F=x[r][n].trace.legendrank;I>F&&(I=F)}x[r][0]._groupMinRank=I,x[r][0]._preGroupSort=r}var A=function(e,t){return e.trace.legendrank-t.trace.legendrank||e._preSort-t._preSort};for(x.forEach((function(e,t){e[0]._preGroupSort=t})),x.sort((function(e,t){return e[0]._groupMinRank-t[0]._groupMinRank||e[0]._preGroupSort-t[0]._preGroupSort})),r=0;r<x.length;r++){x[r].forEach((function(e,t){e._preSort=t})),x[r].sort(A);var C=x[r][0].trace,w=null;for(n=0;n<x[r].length;n++){var Q=x[r][n].trace.legendgrouptitle;if(Q&&Q.text){w=Q,i&&(Q.font=t._groupTitleFont);break}}if(o&&x[r].reverse(),w){var U=!1;for(n=0;n<x[r].length;n++)if(Registry$F.traceIs(x[r][n].trace,"pie-like")){U=!0;break}x[r].unshift({i:-1,groupTitle:w,noClick:U,trace:{showlegend:C.showlegend,legendgroup:C.legendgroup,visible:"toggleitem"===t.groupclick||C.visible}})}for(n=0;n<x[r].length;n++)x[r][n]=[x[r][n]]}return t._lgroupsLength=x.length,t._maxNameLength=h,x},helpers$u={};!function(e){var t=libExports;function r(e){return-1!==e.indexOf("e")?e.replace(/[.]?0+e/,"e"):-1!==e.indexOf(".")?e.replace(/[.]?0+$/,""):e}e.formatPiePercent=function(e,n){var i=r((100*e).toPrecision(3));return t.numSeparate(i,n)+"%"},e.formatPieValue=function(e,n){var i=r(e.toPrecision(10));return t.numSeparate(i,n)},e.getFirstFilled=function(e,t){if(Array.isArray(e))for(var r=0;r<t.length;r++){var n=e[t[r]];if(n||0===n||""===n)return n}},e.castOption=function(t,r){return Array.isArray(t)?e.getFirstFilled(t,r):t||void 0},e.getRotationAngle=function(e){return("auto"===e?0:e)*Math.PI/180}}(helpers$u);var Color$w=colorExports,castOption=helpers$u.castOption,style_one=function(e,t,r){var n=r.marker.line,i=castOption(n.color,t.pts)||Color$w.defaultLine,a=castOption(n.width,t.pts)||0;e.style("stroke-width",a).call(Color$w.fill,t.color).call(Color$w.stroke,i)},d3$l=d3Exports,Registry$E=registry,Lib$1j=libExports,strTranslate$9=Lib$1j.strTranslate,Drawing$k=drawingExports,Color$v=colorExports,extractOpts$1=helpers$A.extractOpts,subTypes$6=subtypes$3,stylePie=style_one,pieCastOption=helpers$u.castOption,constants$D=constants$E,CST_MARKER_SIZE=12,CST_LINE_WIDTH=5,CST_MARKER_LINE_WIDTH=2,MAX_LINE_WIDTH=10,MAX_MARKER_LINE_WIDTH=5,style$5=function(e,t,r){var n=t._fullLayout;r||(r=n.legend);var i="constant"===r.itemsizing,a=r.itemwidth,o=(a+2*constants$D.itemGap)/2,s=strTranslate$9(o,0),l=function(e,t,r,n){var a;if(e+1)a=e;else{if(!(t&&t.width>0))return 0;a=t.width}return i?n:Math.min(a,r)};function c(e,n,i){var a=e[0].trace,o=a.marker||{},c=o.line||{},u=i?a.visible&&a.type===i:Registry$E.traceIs(a,"bar"),d=d3$l.select(n).select("g.legendpoints").selectAll("path.legend"+i).data(u?[e]:[]);d.enter().append("path").classed("legend"+i,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",s),d.exit().remove(),d.each((function(e){var n=d3$l.select(this),i=e[0],s=l(i.mlw,o.line,MAX_MARKER_LINE_WIDTH,CST_MARKER_LINE_WIDTH);n.style("stroke-width",s+"px");var u=i.mcc;if(!r._inHover&&"mc"in i){var d=extractOpts$1(o),h=d.mid;void 0===h&&(h=(d.max+d.min)/2),u=Drawing$k.tryColorscale(o,"")(h)}var g=u||i.mc||o.color,p=o.pattern,f=p&&Drawing$k.getPatternAttr(p.shape,0,"");if(f){var m=Drawing$k.getPatternAttr(p.bgcolor,0,null),y=Drawing$k.getPatternAttr(p.fgcolor,0,null),b=p.fgopacity,v=dimAttr(p.size,8,10),x=dimAttr(p.solidity,.5,1),B="legend-"+a.uid;n.call(Drawing$k.pattern,"legend",t,B,f,v,x,u,p.fillmode,m,y,b)}else n.call(Color$v.fill,g);s&&Color$v.stroke(n,i.mlc||c.color)}))}function u(e,t,r){var n=e[0],i=n.trace,a=r?i.visible&&i.type===r:Registry$E.traceIs(i,r),o=d3$l.select(t).select("g.legendpoints").selectAll("path.legend"+r).data(a?[e]:[]);if(o.enter().append("path").classed("legend"+r,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",s),o.exit().remove(),o.size()){var c=(i.marker||{}).line,u=l(pieCastOption(c.width,n.pts),c,MAX_MARKER_LINE_WIDTH,CST_MARKER_LINE_WIDTH),d=Lib$1j.minExtend(i,{marker:{line:{width:u}}});d.marker.line.color=c.color;var h=Lib$1j.minExtend(n,{trace:d});stylePie(o,h,d)}}e.each((function(e){var t=d3$l.select(this),n=Lib$1j.ensureSingle(t,"g","layers");n.style("opacity",e[0].trace.opacity);var i=r.valign,a=e[0].lineHeight,o=e[0].height;if("middle"!==i&&a&&o){var s={top:1,bottom:-1}[i]*(.5*(a-o+3));n.attr("transform",strTranslate$9(0,s))}else n.attr("transform",null);n.selectAll("g.legendfill").data([e]).enter().append("g").classed("legendfill",!0),n.selectAll("g.legendlines").data([e]).enter().append("g").classed("legendlines",!0);var l=n.selectAll("g.legendsymbols").data([e]);l.enter().append("g").classed("legendsymbols",!0),l.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",!0)})).each((function(e){var r,n=e[0].trace,i=[];if(n.visible)switch(n.type){case"histogram2d":case"heatmap":i=[["M-15,-2V4H15V-2Z"]],r=!0;break;case"choropleth":case"choroplethmapbox":i=[["M-6,-6V6H6V-6Z"]],r=!0;break;case"densitymapbox":i=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],r="radial";break;case"cone":i=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],r=!1;break;case"streamtube":i=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],r=!1;break;case"surface":i=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],r=!0;break;case"mesh3d":i=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],r=!1;break;case"volume":i=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],r=!0;break;case"isosurface":i=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],r=!1}var a=d3$l.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(i);a.enter().append("path").classed("legend3dandfriends",!0).attr("transform",s).style("stroke-miterlimit",1),a.exit().remove(),a.each((function(e,i){var a,o=d3$l.select(this),s=extractOpts$1(n),l=s.colorscale,c=s.reversescale;if(l){if(!r){var u=l.length;a=0===i?l[c?u-1:0][1]:1===i?l[c?0:u-1][1]:l[Math.floor((u-1)/2)][1]}}else{var d=n.vertexcolor||n.facecolor||n.color;a=Lib$1j.isArrayOrTypedArray(d)?d[i]||d[0]:d}o.attr("d",e[0]),a?o.call(Color$v.fill,a):o.call((function(e){if(e.size()){var i="legendfill-"+n.uid;Drawing$k.gradient(e,t,i,getGradientDirection(c,"radial"===r),l,"fill")}}))}))})).each((function(e){var t=e[0].trace,r="waterfall"===t.type;if(e[0]._distinct&&r){var n=e[0].trace[e[0].dir].marker;return e[0].mc=n.color,e[0].mlw=n.line.width,e[0].mlc=n.line.color,c(e,this,"waterfall")}var i=[];t.visible&&r&&(i=e[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var a=d3$l.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(i);a.enter().append("path").classed("legendwaterfall",!0).attr("transform",s).style("stroke-miterlimit",1),a.exit().remove(),a.each((function(e){var r=d3$l.select(this),n=t[e[0]].marker,i=l(void 0,n.line,MAX_MARKER_LINE_WIDTH,CST_MARKER_LINE_WIDTH);r.attr("d",e[1]).style("stroke-width",i+"px").call(Color$v.fill,n.color),i&&r.call(Color$v.stroke,n.line.color)}))})).each((function(e){c(e,this,"funnel")})).each((function(e){c(e,this)})).each((function(e){var r=e[0].trace,n=d3$l.select(this).select("g.legendpoints").selectAll("path.legendbox").data(r.visible&&Registry$E.traceIs(r,"box-violin")?[e]:[]);n.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",s),n.exit().remove(),n.each((function(){var e=d3$l.select(this);if("all"!==r.boxpoints&&"all"!==r.points||0!==Color$v.opacity(r.fillcolor)||0!==Color$v.opacity((r.line||{}).color)){var a=l(void 0,r.line,MAX_MARKER_LINE_WIDTH,CST_MARKER_LINE_WIDTH);e.style("stroke-width",a+"px").call(Color$v.fill,r.fillcolor),a&&Color$v.stroke(e,r.line.color)}else{var o=Lib$1j.minExtend(r,{marker:{size:i?CST_MARKER_SIZE:Lib$1j.constrain(r.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});n.call(Drawing$k.pointStyle,o,t)}}))})).each((function(e){u(e,this,"funnelarea")})).each((function(e){u(e,this,"pie")})).each((function(e){var r,n,i=getStyleGuide(e),o=i.showFill,s=i.showLine,c=i.showGradientLine,u=i.showGradientFill,d=i.anyFill,h=i.anyLine,g=e[0],p=g.trace,f=extractOpts$1(p),m=f.colorscale,y=f.reversescale,b=function(e){if(e.size())if(o)Drawing$k.fillGroupStyle(e,t);else{var r="legendfill-"+p.uid;Drawing$k.gradient(e,t,r,getGradientDirection(y),m,"fill")}},v=subTypes$6.hasMarkers(p)||!d?"M5,0":h?"M5,-2":"M5,-3",x=d3$l.select(this),B=x.select(".legendfill").selectAll("path").data(o||u?[e]:[]);if(B.enter().append("path").classed("js-fill",!0),B.exit().remove(),B.attr("d",v+"h"+a+"v6h-"+a+"z").call(b),s||c){var I=l(void 0,p.line,MAX_LINE_WIDTH,CST_LINE_WIDTH);n=Lib$1j.minExtend(p,{line:{width:I}}),r=[Lib$1j.minExtend(g,{trace:n})]}var F=x.select(".legendlines").selectAll("path").data(s||c?[r]:[]);F.enter().append("path").classed("js-line",!0),F.exit().remove(),F.attr("d",v+(c?"l"+a+",0.0001":"h"+a)).call(s?Drawing$k.lineGroupStyle:function(e){if(e.size()){var r="legendline-"+p.uid;Drawing$k.lineGroupStyle(e),Drawing$k.gradient(e,t,r,getGradientDirection(y),m,"stroke")}})})).each((function(e){var r,n,a=getStyleGuide(e),o=a.anyFill,l=a.anyLine,c=a.showLine,u=a.showMarker,d=e[0],h=d.trace,g=!u&&!l&&!o&&subTypes$6.hasText(h);function p(e,t,r,n){var a=Lib$1j.nestedProperty(h,e).get(),o=Lib$1j.isArrayOrTypedArray(a)&&t?t(a):a;if(i&&o&&void 0!==n&&(o=n),r){if(o<r[0])return r[0];if(o>r[1])return r[1]}return o}function f(e){return d._distinct&&d.index&&e[d.index]?e[d.index]:e[0]}if(u||g||c){var m={},y={};if(u){m.mc=p("marker.color",f),m.mx=p("marker.symbol",f),m.mo=p("marker.opacity",Lib$1j.mean,[.2,1]),m.mlc=p("marker.line.color",f),m.mlw=p("marker.line.width",Lib$1j.mean,[0,5],CST_MARKER_LINE_WIDTH),y.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var b=p("marker.size",Lib$1j.mean,[2,16],CST_MARKER_SIZE);m.ms=b,y.marker.size=b}c&&(y.line={width:p("line.width",f,[0,10],CST_LINE_WIDTH)}),g&&(m.tx="Aa",m.tp=p("textposition",f),m.ts=10,m.tc=p("textfont.color",f),m.tf=p("textfont.family",f)),r=[Lib$1j.minExtend(d,m)],(n=Lib$1j.minExtend(h,y)).selectedpoints=null,n.texttemplate=null}var v=d3$l.select(this).select("g.legendpoints"),x=v.selectAll("path.scatterpts").data(u?r:[]);x.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",s),x.exit().remove(),x.call(Drawing$k.pointStyle,n,t),u&&(r[0].mrc=3);var B=v.selectAll("g.pointtext").data(g?r:[]);B.enter().append("g").classed("pointtext",!0).append("text").attr("transform",s),B.exit().remove(),B.selectAll("text").call(Drawing$k.textPointStyle,n,t)})).each((function(e){var t=e[0].trace,r=d3$l.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(t.visible&&"candlestick"===t.type?[e,e]:[]);r.enter().append("path").classed("legendcandle",!0).attr("d",(function(e,t){return t?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"})).attr("transform",s).style("stroke-miterlimit",1),r.exit().remove(),r.each((function(e,r){var n=d3$l.select(this),i=t[r?"increasing":"decreasing"],a=l(void 0,i.line,MAX_MARKER_LINE_WIDTH,CST_MARKER_LINE_WIDTH);n.style("stroke-width",a+"px").call(Color$v.fill,i.fillcolor),a&&Color$v.stroke(n,i.line.color)}))})).each((function(e){var t=e[0].trace,r=d3$l.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(t.visible&&"ohlc"===t.type?[e,e]:[]);r.enter().append("path").classed("legendohlc",!0).attr("d",(function(e,t){return t?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"})).attr("transform",s).style("stroke-miterlimit",1),r.exit().remove(),r.each((function(e,r){var n=d3$l.select(this),i=t[r?"increasing":"decreasing"],a=l(void 0,i.line,MAX_MARKER_LINE_WIDTH,CST_MARKER_LINE_WIDTH);n.style("fill","none").call(Drawing$k.dashLine,i.line.dash,a),a&&Color$v.stroke(n,i.line.color)}))}))};function getGradientDirection(e,t){return(t?"radial":"horizontal")+(e?"":"reversed")}function getStyleGuide(e){var t=e[0].trace,r=t.contours,n=subTypes$6.hasLines(t),i=subTypes$6.hasMarkers(t),a=t.visible&&t.fill&&"none"!==t.fill,o=!1,s=!1;if(r){var l=r.coloring;"lines"===l?o=!0:n="none"===l||"heatmap"===l||r.showlines,"constraint"===r.type?a="="!==r._operation:"fill"!==l&&"heatmap"!==l||(s=!0)}return{showMarker:i,showLine:n,showFill:a,showGradientLine:o,showGradientFill:s,anyLine:n||o,anyFill:a||s}}function dimAttr(e,t,r){return e&&Lib$1j.isArrayOrTypedArray(e)?t:e>r?r:e}var d3$k=d3Exports,Lib$1i=libExports,Plots$a=plotsExports,Registry$D=registry,Events$1=events,dragElement$7=dragelementExports,Drawing$j=drawingExports,Color$u=colorExports,svgTextUtils$a=svg_text_utils,handleClick=handle_click,constants$C=constants$E,alignmentConstants$3=alignment$1,LINE_SPACING$5=alignmentConstants$3.LINE_SPACING,FROM_TL$5=alignmentConstants$3.FROM_TL,FROM_BR$3=alignmentConstants$3.FROM_BR,getLegendData=get_legend_data,style$4=style$5,helpers$t=helpers$x,MAIN_TITLE=1,draw$b=function(e,t){return t||(t=e._fullLayout.legend||{}),_draw(e,t)};function _draw(e,t){var r,n=e._fullLayout,i="legend"+n._uid,a=t._inHover;if(a?(r=t.layer,i+="-hover"):r=n._infolayer,r){var o;if(e._legendMouseDownTime||(e._legendMouseDownTime=0),a){if(!t.entries)return;o=getLegendData(t.entries,t)}else{if(!e.calcdata)return;o=n.showlegend&&getLegendData(e.calcdata,t)}var s=n.hiddenlabels||[];if(!(a||n.showlegend&&o.length))return r.selectAll(".legend").remove(),n._topdefs.select("#"+i).remove(),Plots$a.autoMargin(e,"legend");var l=Lib$1i.ensureSingle(r,"g","legend",(function(e){a||e.attr("pointer-events","all")})),c=Lib$1i.ensureSingleById(n._topdefs,"clipPath",i,(function(e){e.append("rect")})),u=Lib$1i.ensureSingle(l,"rect","bg",(function(e){e.attr("shape-rendering","crispEdges")}));u.call(Color$u.stroke,t.bordercolor).call(Color$u.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px");var d=Lib$1i.ensureSingle(l,"g","scrollbox"),h=t.title;if(t._titleWidth=0,t._titleHeight=0,h.text){var g=Lib$1i.ensureSingle(d,"text","legendtitletext");g.attr("text-anchor","start").call(Drawing$j.font,h.font).text(h.text),textLayout(g,d,e,t,MAIN_TITLE)}else d.selectAll(".legendtitletext").remove();var p=Lib$1i.ensureSingle(l,"rect","scrollbar",(function(e){e.attr(constants$C.scrollBarEnterAttrs).call(Color$u.fill,constants$C.scrollBarColor)})),f=d.selectAll("g.groups").data(o);f.enter().append("g").attr("class","groups"),f.exit().remove();var m=f.selectAll("g.traces").data(Lib$1i.identity);m.enter().append("g").attr("class","traces"),m.exit().remove(),m.style("opacity",(function(e){var t=e[0].trace;return Registry$D.traceIs(t,"pie-like")?-1!==s.indexOf(e[0].label)?.5:1:"legendonly"===t.visible?.5:1})).each((function(){d3$k.select(this).call(drawTexts,e,t)})).call(style$4,e,t).each((function(){a||d3$k.select(this).call(setupTraceToggle,e)})),Lib$1i.syncOrAsync([Plots$a.previousPromises,function(){return computeLegendDimensions(e,f,m,t)},function(){var o,s,h,g,f=n._size,m=t.borderwidth;if(!a){if(expandMargin(e))return;var y=f.l+f.w*t.x-FROM_TL$5[getXanchor(t)]*t._width,b=f.t+f.h*(1-t.y)-FROM_TL$5[getYanchor(t)]*t._effHeight;if(n.margin.autoexpand){var v=y,x=b;y=Lib$1i.constrain(y,0,n.width-t._width),b=Lib$1i.constrain(b,0,n.height-t._effHeight),y!==v&&Lib$1i.log("Constrain legend.x to make legend fit inside graph"),b!==x&&Lib$1i.log("Constrain legend.y to make legend fit inside graph")}Drawing$j.setTranslate(l,y,b)}if(p.on(".drag",null),l.on("wheel",null),a||t._height<=t._maxHeight||e._context.staticPlot){var B=t._effHeight;a&&(B=t._height),u.attr({width:t._width-m,height:B-m,x:m/2,y:m/2}),Drawing$j.setTranslate(d,0,0),c.select("rect").attr({width:t._width-2*m,height:B-2*m,x:m,y:m}),Drawing$j.setClipUrl(d,i,e),Drawing$j.setRect(p,0,0,0,0),delete t._scrollY}else{var I,F,A,C=Math.max(constants$C.scrollBarMinHeight,t._effHeight*t._effHeight/t._height),w=t._effHeight-C-2*constants$C.scrollBarMargin,Q=t._height-t._effHeight,U=w/Q,S=Math.min(t._scrollY||0,Q);u.attr({width:t._width-2*m+constants$C.scrollBarWidth+constants$C.scrollBarMargin,height:t._effHeight-m,x:m/2,y:m/2}),c.select("rect").attr({width:t._width-2*m+constants$C.scrollBarWidth+constants$C.scrollBarMargin,height:t._effHeight-2*m,x:m,y:m+S}),Drawing$j.setClipUrl(d,i,e),_(S,C,U),l.on("wheel",(function(){_(S=Lib$1i.constrain(t._scrollY+d3$k.event.deltaY/w*Q,0,Q),C,U),0!==S&&S!==Q&&d3$k.event.preventDefault()}));var E=d3$k.behavior.drag().on("dragstart",(function(){var e=d3$k.event.sourceEvent;I="touchstart"===e.type?e.changedTouches[0].clientY:e.clientY,A=S})).on("drag",(function(){var e=d3$k.event.sourceEvent;2===e.buttons||e.ctrlKey||(F="touchmove"===e.type?e.changedTouches[0].clientY:e.clientY,S=function(e,t,r){var n=(r-t)/U+e;return Lib$1i.constrain(n,0,Q)}(A,I,F),_(S,C,U))}));p.call(E);var L=d3$k.behavior.drag().on("dragstart",(function(){var e=d3$k.event.sourceEvent;"touchstart"===e.type&&(I=e.changedTouches[0].clientY,A=S)})).on("drag",(function(){var e=d3$k.event.sourceEvent;"touchmove"===e.type&&(F=e.changedTouches[0].clientY,S=function(e,t,r){var n=(t-r)/U+e;return Lib$1i.constrain(n,0,Q)}(A,I,F),_(S,C,U))}));d.call(L)}function _(r,n,i){t._scrollY=e._fullLayout.legend._scrollY=r,Drawing$j.setTranslate(d,0,-r),Drawing$j.setRect(p,t._width,constants$C.scrollBarMargin+r*i,constants$C.scrollBarWidth,n),c.select("rect").attr("y",m+r)}e._context.edits.legendPosition&&(l.classed("cursor-move",!0),dragElement$7.init({element:l.node(),gd:e,prepFn:function(){var e=Drawing$j.getTranslate(l);h=e.x,g=e.y},moveFn:function(e,r){var n=h+e,i=g+r;Drawing$j.setTranslate(l,n,i),o=dragElement$7.align(n,0,f.l,f.l+f.w,t.xanchor),s=dragElement$7.align(i,0,f.t+f.h,f.t,t.yanchor)},doneFn:function(){void 0!==o&&void 0!==s&&Registry$D.call("_guiRelayout",e,{"legend.x":o,"legend.y":s})},clickFn:function(t,n){var i=r.selectAll("g.traces").filter((function(){var e=this.getBoundingClientRect();return n.clientX>=e.left&&n.clientX<=e.right&&n.clientY>=e.top&&n.clientY<=e.bottom}));i.size()>0&&clickOrDoubleClick(e,l,i,t,n)}}))}],e)}}function getTraceWidth(e,t,r){var n=e[0],i=n.width,a=t.entrywidthmode,o=n.trace.legendwidth||t.entrywidth;return"fraction"===a?t._maxWidth*o:r+(o||i)}function clickOrDoubleClick(e,t,r,n,i){var a=r.data()[0][0].trace,o={event:i,node:r.node(),curveNumber:a.index,expandedIndex:a._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};if(a._group&&(o.group=a._group),Registry$D.traceIs(a,"pie-like")&&(o.label=r.datum()[0].label),!1!==Events$1.triggerHandler(e,"plotly_legendclick",o))if(1===n)t._clickTimeout=setTimeout((function(){e._fullLayout&&handleClick(r,e,n)}),e._context.doubleClickDelay);else if(2===n){t._clickTimeout&&clearTimeout(t._clickTimeout),e._legendMouseDownTime=0,!1!==Events$1.triggerHandler(e,"plotly_legenddoubleclick",o)&&handleClick(r,e,n)}}function drawTexts(e,t,r){var n,i,a=e.data()[0][0],o=a.trace,s=Registry$D.traceIs(o,"pie-like"),l=!r._inHover&&t._context.edits.legendText&&!s,c=r._maxNameLength;a.groupTitle?(n=a.groupTitle.text,i=a.groupTitle.font):(i=r.font,r.entries?n=a.text:(n=s?a.label:o.name,o._meta&&(n=Lib$1i.templateString(n,o._meta))));var u=Lib$1i.ensureSingle(e,"text","legendtext");u.attr("text-anchor","start").call(Drawing$j.font,i).text(l?ensureLength(n,c):n);var d=r.itemwidth+2*constants$C.itemGap;svgTextUtils$a.positionText(u,d,0),l?u.call(svgTextUtils$a.makeEditable,{gd:t,text:n}).call(textLayout,e,t,r).on("edit",(function(n){this.text(ensureLength(n,c)).call(textLayout,e,t,r);var i=a.trace._fullInput||{},s={};if(Registry$D.hasTransform(i,"groupby")){var l=Registry$D.getTransformIndices(i,"groupby"),u=l[l.length-1],d=Lib$1i.keyedContainer(i,"transforms["+u+"].styles","target","value.name");d.set(a.trace._group,n),s=d.constructUpdate()}else s.name=n;return Registry$D.call("_guiRestyle",t,s,o.index)})):textLayout(u,e,t,r)}function ensureLength(e,t){var r=Math.max(4,t);if(e&&e.trim().length>=r/2)return e;for(var n=r-(e=e||"").length;n>0;n--)e+=" ";return e}function setupTraceToggle(e,t){var r,n=t._context.doubleClickDelay,i=1,a=Lib$1i.ensureSingle(e,"rect","legendtoggle",(function(e){t._context.staticPlot||e.style("cursor","pointer").attr("pointer-events","all"),e.call(Color$u.fill,"rgba(0,0,0,0)")}));t._context.staticPlot||(a.on("mousedown",(function(){(r=(new Date).getTime())-t._legendMouseDownTime<n?i+=1:(i=1,t._legendMouseDownTime=r)})),a.on("mouseup",(function(){if(!t._dragged&&!t._editing){var r=t._fullLayout.legend;(new Date).getTime()-t._legendMouseDownTime>n&&(i=Math.max(i-1,1)),clickOrDoubleClick(t,r,e,i,d3$k.event)}})))}function textLayout(e,t,r,n,i){n._inHover&&e.attr("data-notex",!0),svgTextUtils$a.convertToTspans(e,r,(function(){computeTextDimensions(t,r,n,i)}))}function computeTextDimensions(e,t,r,n){var i=e.data()[0][0];if(r._inHover||!i||i.trace.showlegend){var a=e.select("g[class*=math-group]"),o=a.node();r||(r=t._fullLayout.legend);var s,l,c=r.borderwidth,u=(n===MAIN_TITLE?r.title.font:i.groupTitle?i.groupTitle.font:r.font).size*LINE_SPACING$5;if(o){var d=Drawing$j.bBox(o);s=d.height,l=d.width,n===MAIN_TITLE?Drawing$j.setTranslate(a,c,c+.75*s):Drawing$j.setTranslate(a,0,.25*s)}else{var h=e.select(n===MAIN_TITLE?".legendtitletext":".legendtext"),g=svgTextUtils$a.lineCount(h),p=h.node();if(s=u*g,l=p?Drawing$j.bBox(p).width:0,n===MAIN_TITLE)"left"===r.title.side&&(l+=2*constants$C.itemGap),svgTextUtils$a.positionText(h,c+constants$C.titlePad,c+u);else{var f=2*constants$C.itemGap+r.itemwidth;i.groupTitle&&(f=constants$C.itemGap,l-=r.itemwidth),svgTextUtils$a.positionText(h,f,-u*((g-1)/2-.3))}}n===MAIN_TITLE?(r._titleWidth=l,r._titleHeight=s):(i.lineHeight=u,i.height=Math.max(s,16)+3,i.width=l)}else e.remove()}function getTitleSize(e){var t=0,r=0,n=e.title.side;return n&&(-1!==n.indexOf("left")&&(t=e._titleWidth),-1!==n.indexOf("top")&&(r=e._titleHeight)),[t,r]}function computeLegendDimensions(e,t,r,n){var i=e._fullLayout;n||(n=i.legend);var a=i._size,o=helpers$t.isVertical(n),s=helpers$t.isGrouped(n),l="fraction"===n.entrywidthmode,c=n.borderwidth,u=2*c,d=constants$C.itemGap,h=n.itemwidth+2*d,g=2*(c+d),p=getYanchor(n),f=n.y<0||0===n.y&&"top"===p,m=n.y>1||1===n.y&&"bottom"===p,y=n.tracegroupgap,b={};n._maxHeight=Math.max(f||m?i.height/2:a.h,30);var v=0;n._width=0,n._height=0;var x=getTitleSize(n);if(o)r.each((function(e){var t=e[0].height;Drawing$j.setTranslate(this,c+x[0],c+x[1]+n._height+t/2+d),n._height+=t,n._width=Math.max(n._width,e[0].width)})),v=h+n._width,n._width+=d+h+u,n._height+=g,s&&(t.each((function(e,t){Drawing$j.setTranslate(this,0,t*n.tracegroupgap)})),n._height+=(n._lgroupsLength-1)*n.tracegroupgap);else{var B=getXanchor(n),I=n.x<0||0===n.x&&"right"===B,F=n.x>1||1===n.x&&"left"===B,A=m||f,C=i.width/2;n._maxWidth=Math.max(I?A&&"left"===B?a.l+a.w:C:F?A&&"right"===B?a.r+a.w:C:a.w,2*h);var w=0,Q=0;r.each((function(e){var t=getTraceWidth(e,n,h);w=Math.max(w,t),Q+=t})),v=null;var U=0;if(s){var S=0,E=0,L=0;t.each((function(){var e=0,t=0;d3$k.select(this).selectAll("g.traces").each((function(r){var i=getTraceWidth(r,n,h),a=r[0].height;Drawing$j.setTranslate(this,x[0],x[1]+c+d+a/2+t),t+=a,e=Math.max(e,i),b[r[0].trace.legendgroup]=e}));var r=e+d;E>0&&r+c+E>n._maxWidth?(U=Math.max(U,E),E=0,L+=S+y,S=t):S=Math.max(S,t),Drawing$j.setTranslate(this,E,L),E+=r})),n._width=Math.max(U,E)+c,n._height=L+S+g}else{var _=r.size(),T=Q+u+(_-1)*d<n._maxWidth,R=0,$=0,k=0,N=0;r.each((function(e){var t=e[0].height,r=getTraceWidth(e,n,h),i=T?r:w;l||(i+=d),i+c+$-d>=n._maxWidth&&(U=Math.max(U,N),$=0,k+=R,n._height+=R,R=0),Drawing$j.setTranslate(this,x[0]+c+$,x[1]+c+k+t/2+d),N=$+r+d,$+=i,R=Math.max(R,t)})),T?(n._width=$+u,n._height=R+g):(n._width=Math.max(U,N)+u,n._height+=R+g)}}n._width=Math.ceil(Math.max(n._width+x[0],n._titleWidth+2*(c+constants$C.titlePad))),n._height=Math.ceil(Math.max(n._height+x[1],n._titleHeight+2*(c+constants$C.itemGap))),n._effHeight=Math.min(n._height,n._maxHeight);var G=e._context.edits,M=G.legendText||G.legendPosition;r.each((function(e){var t=d3$k.select(this).select(".legendtoggle"),r=e[0].height,i=e[0].trace.legendgroup,a=getTraceWidth(e,n,h);s&&""!==i&&(a=b[i]);var c=M?h:v||a;o||l||(c+=d/2),Drawing$j.setRect(t,0,-r/2,c,r)}))}function expandMargin(e){var t=e._fullLayout.legend,r=getXanchor(t),n=getYanchor(t);return Plots$a.autoMargin(e,"legend",{x:t.x,y:t.y,l:t._width*FROM_TL$5[r],r:t._width*FROM_BR$3[r],b:t._effHeight*FROM_BR$3[n],t:t._effHeight*FROM_TL$5[n]})}function getXanchor(e){return Lib$1i.isRightAnchor(e)?"right":Lib$1i.isCenterAnchor(e)?"center":"left"}function getYanchor(e){return Lib$1i.isBottomAnchor(e)?"bottom":Lib$1i.isMiddleAnchor(e)?"middle":"top"}var d3$j=d3Exports,isNumeric$e=fastIsnumeric,tinycolor$4=tinycolorExports,Lib$1h=libExports,strTranslate$8=Lib$1h.strTranslate,strRotate$1=Lib$1h.strRotate,Events=events,svgTextUtils$9=svg_text_utils,overrideCursor=override_cursor,Drawing$i=drawingExports,Color$t=colorExports,dragElement$6=dragelementExports,Axes$k=axesExports,Registry$C=registry,helpers$s=helpers$y,constants$B=constants$M,legendSupplyDefaults=defaults$k,legendDraw=draw$b,YANGLE=constants$B.YANGLE,YA_RADIANS=Math.PI*YANGLE/180,YFACTOR=1/Math.sin(YA_RADIANS),YSHIFTX=Math.cos(YA_RADIANS),YSHIFTY=Math.sin(YA_RADIANS),HOVERARROWSIZE=constants$B.HOVERARROWSIZE,HOVERTEXTPAD=constants$B.HOVERTEXTPAD,multipleHoverPoints={box:!0,ohlc:!0,violin:!0,candlestick:!0},cartesianScatterPoints={scatter:!0,scattergl:!0,splom:!0};function _hover(e,t,r,n,i){r||(r="xy");var a=Array.isArray(r)?r:[r],o=e._fullLayout,s=o._plots||[],l=s[r],c=o._has("cartesian");if(l){var u=l.overlays.map((function(e){return e.id}));a=a.concat(u)}for(var d=a.length,h=new Array(d),g=new Array(d),p=!1,f=0;f<d;f++){var m=a[f];if(s[m])p=!0,h[f]=s[m].xaxis,g[f]=s[m].yaxis;else{if(!o[m]||!o[m]._subplot)return void Lib$1h.warn("Unrecognized subplot: "+m);var y=o[m]._subplot;h[f]=y.xaxis,g[f]=y.yaxis}}var b=t.hovermode||o.hovermode;if(b&&!p&&(b="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(b)||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return dragElement$6.unhoverRaw(e,t);var v=o.hoverdistance;-1===v&&(v=1/0);var x=o.spikedistance;-1===x&&(x=1/0);var B,I,F,A,C,w,Q,U,S,E,L,_,T,R=[],$=[],k={hLinePoint:null,vLinePoint:null},N=!1;if(Array.isArray(t))for(b="array",F=0;F<t.length;F++)(C=e.calcdata[t[F].curveNumber||0])&&(w=C[0].trace,"skip"!==C[0].trace.hoverinfo&&($.push(C),"h"===w.orientation&&(N=!0)));else{for(A=0;A<e.calcdata.length;A++)C=e.calcdata[A],"skip"!==(w=C[0].trace).hoverinfo&&helpers$s.isTraceInSubplots(w,a)&&($.push(C),"h"===w.orientation&&(N=!0));var G,M;if(!i)G="xpx"in t?t.xpx:h[0]._length/2,M="ypx"in t?t.ypx:g[0]._length/2;else{if(!1===Events.triggerHandler(e,"plotly_beforehover",t))return;var D=i.getBoundingClientRect();G=t.clientX-D.left,M=t.clientY-D.top,o._calcInverseTransform(e);var V=Lib$1h.apply3DTransform(o._invTransform)(G,M);if(G=V[0],M=V[1],G<0||G>h[0]._length||M<0||M>g[0]._length)return dragElement$6.unhoverRaw(e,t)}if(t.pointerX=G+h[0]._offset,t.pointerY=M+g[0]._offset,B="xval"in t?helpers$s.flat(a,t.xval):helpers$s.p2c(h,G),I="yval"in t?helpers$s.flat(a,t.yval):helpers$s.p2c(g,M),!isNumeric$e(B[0])||!isNumeric$e(I[0]))return Lib$1h.warn("Fx.hover failed",t,e),dragElement$6.unhoverRaw(e,t)}var H=1/0;function X(e,r){for(A=0;A<$.length;A++)if((C=$[A])&&C[0]&&C[0].trace&&!0===(w=C[0].trace).visible&&0!==w._length&&-1===["carpet","contourcarpet"].indexOf(w._module.name)){if("splom"===w.type?Q=a[U=0]:(Q=helpers$s.getSubplot(w),U=a.indexOf(Q)),S=b,helpers$s.isUnifiedHover(S)&&(S=S.charAt(0)),_={cd:C,trace:w,xa:h[U],ya:g[U],maxHoverDistance:v,maxSpikeDistance:x,index:!1,distance:Math.min(H,v),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:Color$t.defaultLine,name:w.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},o[Q]&&(_.subplot=o[Q]._subplot),o._splomScenes&&o._splomScenes[w.uid]&&(_.scene=o._splomScenes[w.uid]),T=R.length,"array"===S){var n=t[A];"pointNumber"in n?(_.index=n.pointNumber,S="closest"):(S="","xval"in n&&(E=n.xval,S="x"),"yval"in n&&(L=n.yval,S=S?"closest":"y"))}else void 0!==e&&void 0!==r?(E=e,L=r):(E=B[U],L=I[U]);if(0!==v)if(w._module&&w._module.hoverPoints){var i=w._module.hoverPoints(_,E,L,S,{finiteRange:!0,hoverLayer:o._hoverlayer});if(i)for(var s,l=0;l<i.length;l++)s=i[l],isNumeric$e(s.x0)&&isNumeric$e(s.y0)&&R.push(cleanPoint(s,b))}else Lib$1h.log("Unrecognized trace type in hover:",w);if("closest"===b&&R.length>T&&(R.splice(0,T),H=R[0].distance),c&&0!==x&&0===R.length){_.distance=x,_.index=!1;var u=w._module.hoverPoints(_,E,L,"closest",{hoverLayer:o._hoverlayer});if(u&&(u=u.filter((function(e){return e.spikeDistance<=x}))),u&&u.length){var d,p=u.filter((function(e){return e.xa.showspikes&&"hovered data"!==e.xa.spikesnap}));if(p.length){var f=p[0];isNumeric$e(f.x0)&&isNumeric$e(f.y0)&&(d=Z(f),(!k.vLinePoint||k.vLinePoint.spikeDistance>d.spikeDistance)&&(k.vLinePoint=d))}var m=u.filter((function(e){return e.ya.showspikes&&"hovered data"!==e.ya.spikesnap}));if(m.length){var y=m[0];isNumeric$e(y.x0)&&isNumeric$e(y.y0)&&(d=Z(y),(!k.hLinePoint||k.hLinePoint.spikeDistance>d.spikeDistance)&&(k.hLinePoint=d))}}}}}function O(e,t,r){for(var n,i=null,a=1/0,o=0;o<e.length;o++)n=e[o].spikeDistance,r&&0===o&&(n=-1/0),n<=a&&n<=t&&(i=e[o],a=n);return i}function Z(e){return e?{xa:e.xa,ya:e.ya,x:void 0!==e.xSpike?e.xSpike:(e.x0+e.x1)/2,y:void 0!==e.ySpike?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}:null}X();var W={fullLayout:o,container:o._hoverlayer,event:t},Y=e._spikepoints,P={vLinePoint:k.vLinePoint,hLinePoint:k.hLinePoint};e._spikepoints=P;var z=function(){R.sort((function(e,t){return e.distance-t.distance})),R=orderRangePoints(R,b)};z();var J=b.charAt(0),j=("x"===J||"y"===J)&&R[0]&&cartesianScatterPoints[R[0].trace.type];if(c&&0!==x&&0!==R.length){var K=O(R.filter((function(e){return e.ya.showspikes})),x,j);k.hLinePoint=Z(K);var q=O(R.filter((function(e){return e.xa.showspikes})),x,j);k.vLinePoint=Z(q)}if(0===R.length){var ee=dragElement$6.unhoverRaw(e,t);return!c||null===k.hLinePoint&&null===k.vLinePoint||spikesChanged(Y)&&createSpikelines(e,k,W),ee}if(c&&spikesChanged(Y)&&createSpikelines(e,k,W),helpers$s.isXYhover(S)&&0!==R[0].length&&"splom"!==R[0].trace.type){var te=R[0];R=multipleHoverPoints[te.trace.type]?R.filter((function(e){return e.trace.index===te.trace.index})):[te];var re=R.length;X(getCoord("x",te,o),getCoord("y",te,o));var ne,ie=[],ae={},oe=0,se=function(e){var t=multipleHoverPoints[e.trace.type]?hoverDataKey(e):e.trace.index;if(ae[t]){var r=ae[t]-1,n=ie[r];r>0&&Math.abs(e.distance)<Math.abs(n.distance)&&(ie[r]=e)}else oe++,ae[t]=oe,ie.push(e)};for(ne=0;ne<re;ne++)se(R[ne]);for(ne=R.length-1;ne>re-1;ne--)se(R[ne]);R=ie,z()}var le=e._hoverdata,ce=[],ue=getTopOffset(e),de=getLeftOffset(e);for(F=0;F<R.length;F++){var he=R[F],ge=helpers$s.makeEventData(he,he.trace,he.cd);if(!1!==he.hovertemplate){var pe=!1;he.cd[he.index]&&he.cd[he.index].ht&&(pe=he.cd[he.index].ht),he.hovertemplate=pe||he.trace.hovertemplate||!1}if(he.xa&&he.ya){var fe=he.x0+he.xa._offset,me=he.x1+he.xa._offset,ye=he.y0+he.ya._offset,be=he.y1+he.ya._offset,ve=Math.min(fe,me),xe=Math.max(fe,me),Be=Math.min(ye,be),Ie=Math.max(ye,be);ge.bbox={x0:ve+de,x1:xe+de,y0:Be+ue,y1:Ie+ue}}he.eventData=[ge],ce.push(ge)}e._hoverdata=ce;var Fe="y"===b&&($.length>1||R.length>1)||"closest"===b&&N&&R.length>1,Ae=Color$t.combine(o.plot_bgcolor||Color$t.background,o.paper_bgcolor),Ce=createHoverText(R,{gd:e,hovermode:b,rotateLabels:Fe,bgColor:Ae,container:o._hoverlayer,outerContainer:o._paper.node(),commonLabelOpts:o.hoverlabel,hoverdistance:o.hoverdistance}),we=Ce.hoverLabels;if(helpers$s.isUnifiedHover(b)||(hoverAvoidOverlaps(we,Fe,o,Ce.commonLabelBoundingBox),alignHoverText(we,Fe,o._invScaleX,o._invScaleY)),i&&i.tagName){var Qe=Registry$C.getComponentMethod("annotations","hasClickToShow")(e,ce);overrideCursor(d3$j.select(i),Qe?"pointer":"")}i&&!n&&hoverChanged(e,t,le)&&(le&&e.emit("plotly_unhover",{event:t,points:le}),e.emit("plotly_hover",{event:t,points:e._hoverdata,xaxes:h,yaxes:g,xvals:B,yvals:I}))}function hoverDataKey(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa?e.xa._id:"",e.ya?e.ya._id:""].join(",")}hover$4.hover=function(e,t,r,n){e=Lib$1h.getGraphDiv(e);var i=t.target;Lib$1h.throttle(e._fullLayout._uid+constants$B.HOVERID,constants$B.HOVERMINTIME,(function(){_hover(e,t,r,n,i)}))},hover$4.loneHover=function(e,t){var r=!0;Array.isArray(e)||(r=!1,e=[e]);var n=t.gd,i=getTopOffset(n),a=getLeftOffset(n),o=createHoverText(e.map((function(e){var r=e._x0||e.x0||e.x||0,o=e._x1||e.x1||e.x||0,s=e._y0||e.y0||e.y||0,l=e._y1||e.y1||e.y||0,c=e.eventData;if(c){var u=Math.min(r,o),d=Math.max(r,o),h=Math.min(s,l),g=Math.max(s,l),p=e.trace;if(Registry$C.traceIs(p,"gl3d")){var f=n._fullLayout[p.scene]._scene.container,m=f.offsetLeft,y=f.offsetTop;u+=m,d+=m,h+=y,g+=y}c.bbox={x0:u+a,x1:d+a,y0:h+i,y1:g+i},t.inOut_bbox&&t.inOut_bbox.push(c.bbox)}else c=!1;return{color:e.color||Color$t.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,nameLength:e.nameLength,textAlign:e.textAlign,trace:e.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:e.hovertemplate||!1,hovertemplateLabels:e.hovertemplateLabels||!1,eventData:c}})),{gd:n,hovermode:"closest",rotateLabels:false,bgColor:t.bgColor||Color$t.background,container:d3$j.select(t.container),outerContainer:t.outerContainer||t.container}).hoverLabels,s=0,l=0;return o.sort((function(e,t){return e.y0-t.y0})).each((function(e,r){var n=e.y0-e.by/2;e.offset=n-5<s?s-n+5:0,s=n+e.by+e.offset,r===t.anchorIndex&&(l=e.offset)})).each((function(e){e.offset-=l})),alignHoverText(o,false,n._fullLayout._invScaleX,n._fullLayout._invScaleY),r?o:o.node()};var EXTRA_STRING_REGEX=/<extra>([\s\S]*)<\/extra>/;function createHoverText(e,t){var r=t.gd,n=r._fullLayout,i=t.hovermode,a=t.rotateLabels,o=t.bgColor,s=t.container,l=t.outerContainer,c=t.commonLabelOpts||{};if(0===e.length)return[[]];var u=t.fontFamily||constants$B.HOVERFONT,d=t.fontSize||constants$B.HOVERFONTSIZE,h=e[0],g=h.xa,p=h.ya,f=i.charAt(0),m=f+"Label",y=h[m];if(void 0===y&&"multicategory"===g.type)for(var b=0;b<e.length&&void 0===(y=e[b][m]);b++);var v=getBoundingClientRect(r,l),x=v.top,B=v.width,I=v.height,F=void 0!==y&&h.distance<=t.hoverdistance&&("x"===i||"y"===i);if(F){var A,C,w=!0;for(A=0;A<e.length;A++)if(w&&void 0===e[A].zLabel&&(w=!1),C=e[A].hoverinfo||e[A].trace.hoverinfo){var Q=Array.isArray(C)?C:C.split("+");if(-1===Q.indexOf("all")&&-1===Q.indexOf(i)){F=!1;break}}w&&(F=!1)}var U=s.selectAll("g.axistext").data(F?[0]:[]);U.enter().append("g").classed("axistext",!0),U.exit().remove();var S={minX:0,maxX:0,minY:0,maxY:0};if(U.each((function(){var e=d3$j.select(this),t=Lib$1h.ensureSingle(e,"path","",(function(e){e.style({"stroke-width":"1px"})})),a=Lib$1h.ensureSingle(e,"text","",(function(e){e.attr("data-notex",1)})),o=c.bgcolor||Color$t.defaultLine,s=c.bordercolor||Color$t.contrast(o),l=Color$t.contrast(o),f={family:c.font.family||u,size:c.font.size||d,color:c.font.color||l};t.style({fill:o,stroke:s}),a.text(y).call(Drawing$i.font,f).call(svgTextUtils$9.positionText,0,0).call(svgTextUtils$9.convertToTspans,r),e.attr("transform","");var m,b,v=getBoundingClientRect(r,a.node());if("x"===i){var B="top"===g.side?"-":"";a.attr("text-anchor","middle").call(svgTextUtils$9.positionText,0,"top"===g.side?x-v.bottom-HOVERARROWSIZE-HOVERTEXTPAD:x-v.top+HOVERARROWSIZE+HOVERTEXTPAD),m=g._offset+(h.x0+h.x1)/2,b=p._offset+("top"===g.side?0:p._length);var I=v.width/2+HOVERTEXTPAD;m<I?(m=I,t.attr("d","M-"+(I-HOVERARROWSIZE)+",0L-"+(I-2*HOVERARROWSIZE)+","+B+HOVERARROWSIZE+"H"+I+"v"+B+(2*HOVERTEXTPAD+v.height)+"H-"+I+"V"+B+HOVERARROWSIZE+"Z")):m>n.width-I?(m=n.width-I,t.attr("d","M"+(I-HOVERARROWSIZE)+",0L"+I+","+B+HOVERARROWSIZE+"v"+B+(2*HOVERTEXTPAD+v.height)+"H-"+I+"V"+B+HOVERARROWSIZE+"H"+(I-2*HOVERARROWSIZE)+"Z")):t.attr("d","M0,0L"+HOVERARROWSIZE+","+B+HOVERARROWSIZE+"H"+I+"v"+B+(2*HOVERTEXTPAD+v.height)+"H-"+I+"V"+B+HOVERARROWSIZE+"H-"+HOVERARROWSIZE+"Z"),S.minX=m-I,S.maxX=m+I,"top"===g.side?(S.minY=b-(2*HOVERTEXTPAD+v.height),S.maxY=b-HOVERTEXTPAD):(S.minY=b+HOVERTEXTPAD,S.maxY=b+(2*HOVERTEXTPAD+v.height))}else{var F,A,C;"right"===p.side?(F="start",A=1,C="",m=g._offset+g._length):(F="end",A=-1,C="-",m=g._offset),b=p._offset+(h.y0+h.y1)/2,a.attr("text-anchor",F),t.attr("d","M0,0L"+C+HOVERARROWSIZE+","+HOVERARROWSIZE+"V"+(HOVERTEXTPAD+v.height/2)+"h"+C+(2*HOVERTEXTPAD+v.width)+"V-"+(HOVERTEXTPAD+v.height/2)+"H"+C+HOVERARROWSIZE+"V-"+HOVERARROWSIZE+"Z"),S.minY=b-(HOVERTEXTPAD+v.height/2),S.maxY=b+(HOVERTEXTPAD+v.height/2),"right"===p.side?(S.minX=m+HOVERARROWSIZE,S.maxX=m+HOVERARROWSIZE+(2*HOVERTEXTPAD+v.width)):(S.minX=m-HOVERARROWSIZE-(2*HOVERTEXTPAD+v.width),S.maxX=m-HOVERARROWSIZE);var w,Q=v.height/2,U=x-v.top-Q,E="clip"+n._uid+"commonlabel"+p._id;if(m<v.width+2*HOVERTEXTPAD+HOVERARROWSIZE){w="M-"+(HOVERARROWSIZE+HOVERTEXTPAD)+"-"+Q+"h-"+(v.width-HOVERTEXTPAD)+"V"+Q+"h"+(v.width-HOVERTEXTPAD)+"Z";var L=v.width-m+HOVERTEXTPAD;svgTextUtils$9.positionText(a,L,U),"end"===F&&a.selectAll("tspan").each((function(){var e=d3$j.select(this),t=Drawing$i.tester.append("text").text(e.text()).call(Drawing$i.font,f),n=getBoundingClientRect(r,t.node());Math.round(n.width)<Math.round(v.width)&&e.attr("x",L-n.width),t.remove()}))}else svgTextUtils$9.positionText(a,A*(HOVERTEXTPAD+HOVERARROWSIZE),U),w=null;var _=n._topclips.selectAll("#"+E).data(w?[0]:[]);_.enter().append("clipPath").attr("id",E).append("path"),_.exit().remove(),_.select("path").attr("d",w),Drawing$i.setClipUrl(a,w?E:null,r)}e.attr("transform",strTranslate$8(m,b))})),helpers$s.isUnifiedHover(i)){s.selectAll("g.hovertext").remove();var E=e.filter((function(e){return"none"!==e.hoverinfo}));if(0===E.length)return;var L=n.hoverlabel,_=L.font,T={showlegend:!0,legend:{title:{text:y,font:_},font:_,bgcolor:L.bgcolor,bordercolor:L.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:n.legend?n.legend.traceorder:void 0,orientation:"v"}},R={font:_};legendSupplyDefaults(T,R,r._fullData);var $=R.legend;$.entries=[];for(var k=0;k<E.length;k++){var N=E[k];if("none"!==N.hoverinfo){var G=getHoverLabelText(N,!0,i,n,y),M=G[0],D=G[1];N.name=D,N.text=""!==D?D+" : "+M:M;var V=N.cd[N.index];V&&(V.mc&&(N.mc=V.mc),V.mcc&&(N.mc=V.mcc),V.mlc&&(N.mlc=V.mlc),V.mlcc&&(N.mlc=V.mlcc),V.mlw&&(N.mlw=V.mlw),V.mrc&&(N.mrc=V.mrc),V.dir&&(N.dir=V.dir)),N._distinct=!0,$.entries.push([N])}}$.entries.sort((function(e,t){return e[0].trace.index-t[0].trace.index})),$.layer=s,$._inHover=!0,$._groupTitleFont=L.grouptitlefont,legendDraw(r,$);var H,X,O,Z,W=s.select("g.legend"),Y=getBoundingClientRect(r,W.node()),P=Y.width+2*HOVERTEXTPAD,z=Y.height+2*HOVERTEXTPAD,J=E[0],j=(J.x0+J.x1)/2,K=(J.y0+J.y1)/2,q=!(Registry$C.traceIs(J.trace,"bar-like")||Registry$C.traceIs(J.trace,"box-violin"));"y"===f?q?(X=K-HOVERTEXTPAD,H=K+HOVERTEXTPAD):(X=Math.min.apply(null,E.map((function(e){return Math.min(e.y0,e.y1)}))),H=Math.max.apply(null,E.map((function(e){return Math.max(e.y0,e.y1)})))):X=H=Lib$1h.mean(E.map((function(e){return(e.y0+e.y1)/2})))-z/2,"x"===f?q?(O=j+HOVERTEXTPAD,Z=j-HOVERTEXTPAD):(O=Math.max.apply(null,E.map((function(e){return Math.max(e.x0,e.x1)}))),Z=Math.min.apply(null,E.map((function(e){return Math.min(e.x0,e.x1)})))):O=Z=Lib$1h.mean(E.map((function(e){return(e.x0+e.x1)/2})))-P/2;var ee,te,re=g._offset,ne=p._offset;return Z+=re-P,X+=ne-z,ee=(O+=re)+P<B&&O>=0?O:Z+P<B&&Z>=0?Z:re+P<B?re:O-j<j-Z+P?B-P:0,ee+=HOVERTEXTPAD,te=(H+=ne)+z<I&&H>=0?H:X+z<I&&X>=0?X:ne+z<I?ne:H-K<K-X+z?I-z:0,te+=HOVERTEXTPAD,W.attr("transform",strTranslate$8(ee-1,te-1)),W}var ie=s.selectAll("g.hovertext").data(e,(function(e){return hoverDataKey(e)}));return ie.enter().append("g").classed("hovertext",!0).each((function(){var e=d3$j.select(this);e.append("rect").call(Color$t.fill,Color$t.addOpacity(o,.8)),e.append("text").classed("name",!0),e.append("path").style("stroke-width","1px"),e.append("text").classed("nums",!0).call(Drawing$i.font,u,d)})),ie.exit().remove(),ie.each((function(e){var t=d3$j.select(this).attr("transform",""),s=e.color;Array.isArray(s)&&(s=s[e.eventData[0].pointNumber]);var l=e.bgcolor||s,c=Color$t.combine(Color$t.opacity(l)?l:Color$t.defaultLine,o),h=Color$t.combine(Color$t.opacity(s)?s:Color$t.defaultLine,o),g=e.borderColor||Color$t.contrast(c),p=getHoverLabelText(e,F,i,n,y,t),f=p[0],m=p[1],b=t.select("text.nums").call(Drawing$i.font,e.fontFamily||u,e.fontSize||d,e.fontColor||g).text(f).attr("data-notex",1).call(svgTextUtils$9.positionText,0,0).call(svgTextUtils$9.convertToTspans,r),v=t.select("text.name"),A=0,C=0;if(m&&m!==f){v.call(Drawing$i.font,e.fontFamily||u,e.fontSize||d,h).text(m).attr("data-notex",1).call(svgTextUtils$9.positionText,0,0).call(svgTextUtils$9.convertToTspans,r);var w=getBoundingClientRect(r,v.node());A=w.width+2*HOVERTEXTPAD,C=w.height+2*HOVERTEXTPAD}else v.remove(),t.select("rect").remove();t.select("path").style({fill:c,stroke:g});var Q=e.xa._offset+(e.x0+e.x1)/2,U=e.ya._offset+(e.y0+e.y1)/2,S=Math.abs(e.x1-e.x0),E=Math.abs(e.y1-e.y0),L=getBoundingClientRect(r,b.node()),_=L.width/n._invScaleX,T=L.height/n._invScaleY;e.ty0=(x-L.top)/n._invScaleY,e.bx=_+2*HOVERTEXTPAD,e.by=Math.max(T+2*HOVERTEXTPAD,C),e.anchor="start",e.txwidth=_,e.tx2width=A,e.offset=0;var R,$,k=(_+HOVERARROWSIZE+HOVERTEXTPAD+A)*n._invScaleX;if(a)e.pos=Q,R=U+E/2+k<=I,$=U-E/2-k>=0,"top"!==e.idealAlign&&R||!$?R?(U+=E/2,e.anchor="start"):e.anchor="middle":(U-=E/2,e.anchor="end"),e.crossPos=U;else{if(e.pos=U,R=Q+S/2+k<=B,$=Q-S/2-k>=0,"left"!==e.idealAlign&&R||!$)if(R)Q+=S/2,e.anchor="start";else{e.anchor="middle";var N=k/2,G=Q+N-B,M=Q-N;G>0&&(Q-=G),M<0&&(Q+=-M)}else Q-=S/2,e.anchor="end";e.crossPos=Q}b.attr("text-anchor",e.anchor),A&&v.attr("text-anchor",e.anchor),t.attr("transform",strTranslate$8(Q,U)+(a?strRotate$1(YANGLE):""))})),{hoverLabels:ie,commonLabelBoundingBox:S}}function getHoverLabelText(e,t,r,n,i,a){var o="",s="";void 0!==e.nameOverride&&(e.name=e.nameOverride),e.name&&(e.trace._meta&&(e.name=Lib$1h.templateString(e.name,e.trace._meta)),o=plainText(e.name,e.nameLength));var l=r.charAt(0),c="x"===l?"y":"x";void 0!==e.zLabel?(void 0!==e.xLabel&&(s+="x: "+e.xLabel+"<br>"),void 0!==e.yLabel&&(s+="y: "+e.yLabel+"<br>"),"choropleth"!==e.trace.type&&"choroplethmapbox"!==e.trace.type&&(s+=(s?"z: ":"")+e.zLabel)):t&&e[l+"Label"]===i?s=e[c+"Label"]||"":void 0===e.xLabel?void 0!==e.yLabel&&"scattercarpet"!==e.trace.type&&(s=e.yLabel):s=void 0===e.yLabel?e.xLabel:"("+e.xLabel+", "+e.yLabel+")",!e.text&&0!==e.text||Array.isArray(e.text)||(s+=(s?"<br>":"")+e.text),void 0!==e.extraText&&(s+=(s?"<br>":"")+e.extraText),a&&""===s&&!e.hovertemplate&&(""===o&&a.remove(),s=o);var u=e.hovertemplate||!1;if(u){var d=e.hovertemplateLabels||e;e[l+"Label"]!==i&&(d[l+"other"]=d[l+"Val"],d[l+"otherLabel"]=d[l+"Label"]),s=(s=Lib$1h.hovertemplateString(u,d,n._d3locale,e.eventData[0]||{},e.trace._meta)).replace(EXTRA_STRING_REGEX,(function(t,r){return o=plainText(r,e.nameLength),""}))}return[s,o]}function hoverAvoidOverlaps(e,t,r,n){var i,a,o,s,l,c,u,d=t?"xa":"ya",h=t?"ya":"xa",g=0,p=1,f=e.size(),m=new Array(f),y=0,b=n.minX,v=n.maxX,x=n.minY,B=n.maxY,I=function(e){return e*r._invScaleX},F=function(e){return e*r._invScaleY};function A(e){var t=e[0],r=e[e.length-1];if(a=t.pmin-t.pos-t.dp+t.size,o=r.pos+r.dp+r.size-t.pmax,a>.01){for(l=e.length-1;l>=0;l--)e[l].dp+=a;i=!1}if(!(o<.01)){if(a<-.01){for(l=e.length-1;l>=0;l--)e[l].dp-=o;i=!1}if(i){var n=0;for(s=0;s<e.length;s++)(c=e[s]).pos+c.dp+c.size>t.pmax&&n++;for(s=e.length-1;s>=0&&!(n<=0);s--)(c=e[s]).pos>t.pmax-1&&(c.del=!0,n--);for(s=0;s<e.length&&!(n<=0);s++)if((c=e[s]).pos<t.pmin+1)for(c.del=!0,n--,o=2*c.size,l=e.length-1;l>=0;l--)e[l].dp-=o;for(s=e.length-1;s>=0&&!(n<=0);s--)(c=e[s]).pos+c.dp+c.size>t.pmax&&(c.del=!0,n--)}}}for(e.each((function(e){var n=e[d],i=e[h],a="x"===n._id.charAt(0),o=n.range;0===y&&o&&o[0]>o[1]!==a&&(p=-1);var s=0,l=a?r.width:r.height;if("x"===r.hovermode||"y"===r.hovermode){var c,u,g=getHoverLabelOffsets(e,t),f=e.anchor,A="end"===f?-1:1;if("middle"===f)u=(c=e.crossPos+(a?F(g.y-e.by/2):I(e.bx/2+e.tx2width/2)))+(a?F(e.by):I(e.bx));else if(a)u=(c=e.crossPos+F(HOVERARROWSIZE+g.y)-F(e.by/2-HOVERARROWSIZE))+F(e.by);else{var C=I(A*HOVERARROWSIZE+g.x),w=C+I(A*e.bx);c=e.crossPos+Math.min(C,w),u=e.crossPos+Math.max(C,w)}a?void 0!==x&&void 0!==B&&Math.min(u,B)-Math.max(c,x)>1&&("left"===i.side?(s=i._mainLinePosition,l=r.width):l=i._mainLinePosition):void 0!==b&&void 0!==v&&Math.min(u,v)-Math.max(c,b)>1&&("top"===i.side?(s=i._mainLinePosition,l=r.height):l=i._mainLinePosition)}m[y++]=[{datum:e,traceIndex:e.trace.index,dp:0,pos:e.pos,posref:e.posref,size:e.by*(a?YFACTOR:1)/2,pmin:s,pmax:l}]})),m.sort((function(e,t){return e[0].posref-t[0].posref||p*(t[0].traceIndex-e[0].traceIndex)}));!i&&g<=f;){for(g++,i=!0,s=0;s<m.length-1;){var C=m[s],w=m[s+1],Q=C[C.length-1],U=w[0];if((a=Q.pos+Q.dp+Q.size-U.pos-U.dp+U.size)>.01&&Q.pmin===U.pmin&&Q.pmax===U.pmax){for(l=w.length-1;l>=0;l--)w[l].dp+=a;for(C.push.apply(C,w),m.splice(s+1,1),u=0,l=C.length-1;l>=0;l--)u+=C[l].dp;for(o=u/C.length,l=C.length-1;l>=0;l--)C[l].dp-=o;i=!1}else s++}m.forEach(A)}for(s=m.length-1;s>=0;s--){var S=m[s];for(l=S.length-1;l>=0;l--){var E=S[l],L=E.datum;L.offset=E.dp,L.del=E.del}}}function getHoverLabelOffsets(e,t){var r=0,n=e.offset;return t&&(n*=-YSHIFTY,r=e.offset*YSHIFTX),{x:r,y:n}}function getTextShiftX(e){var t={start:1,end:-1,middle:0}[e.anchor],r=t*(HOVERARROWSIZE+HOVERTEXTPAD),n=r+t*(e.txwidth+HOVERTEXTPAD);return"middle"===e.anchor&&(r-=e.tx2width/2,n+=e.txwidth/2+HOVERTEXTPAD),{alignShift:t,textShiftX:r,text2ShiftX:n}}function alignHoverText(e,t,r,n){var i=function(e){return e*r},a=function(e){return e*n};e.each((function(e){var r=d3$j.select(this);if(e.del)return r.remove();var n=r.select("text.nums"),o=e.anchor,s="end"===o?-1:1,l=getTextShiftX(e),c=getHoverLabelOffsets(e,t),u=c.x,d=c.y,h="middle"===o;r.select("path").attr("d",h?"M-"+i(e.bx/2+e.tx2width/2)+","+a(d-e.by/2)+"h"+i(e.bx)+"v"+a(e.by)+"h-"+i(e.bx)+"Z":"M0,0L"+i(s*HOVERARROWSIZE+u)+","+a(HOVERARROWSIZE+d)+"v"+a(e.by/2-HOVERARROWSIZE)+"h"+i(s*e.bx)+"v-"+a(e.by)+"H"+i(s*HOVERARROWSIZE+u)+"V"+a(d-HOVERARROWSIZE)+"Z");var g=u+l.textShiftX,p=d+e.ty0-e.by/2+HOVERTEXTPAD,f=e.textAlign||"auto";"auto"!==f&&("left"===f&&"start"!==o?(n.attr("text-anchor","start"),g=h?-e.bx/2-e.tx2width/2+HOVERTEXTPAD:-e.bx-HOVERTEXTPAD):"right"===f&&"end"!==o&&(n.attr("text-anchor","end"),g=h?e.bx/2-e.tx2width/2-HOVERTEXTPAD:e.bx+HOVERTEXTPAD)),n.call(svgTextUtils$9.positionText,i(g),a(p)),e.tx2width&&(r.select("text.name").call(svgTextUtils$9.positionText,i(l.text2ShiftX+l.alignShift*HOVERTEXTPAD+u),a(d+e.ty0-e.by/2+HOVERTEXTPAD)),r.select("rect").call(Drawing$i.setRect,i(l.text2ShiftX+(l.alignShift-1)*e.tx2width/2+u),a(d-e.by/2-1),i(e.tx2width),a(e.by+2)))}))}function cleanPoint(e,t){var r=e.index,n=e.trace||{},i=e.cd[0],a=e.cd[r]||{};function o(e){return e||isNumeric$e(e)&&0===e}var s=Array.isArray(r)?function(e,t){var a=Lib$1h.castOption(i,r,e);return o(a)?a:Lib$1h.extractOption({},n,"",t)}:function(e,t){return Lib$1h.extractOption(a,n,e,t)};function l(t,r,n){var i=s(r,n);o(i)&&(e[t]=i)}if(l("hoverinfo","hi","hoverinfo"),l("bgcolor","hbg","hoverlabel.bgcolor"),l("borderColor","hbc","hoverlabel.bordercolor"),l("fontFamily","htf","hoverlabel.font.family"),l("fontSize","hts","hoverlabel.font.size"),l("fontColor","htc","hoverlabel.font.color"),l("nameLength","hnl","hoverlabel.namelength"),l("textAlign","hta","hoverlabel.align"),e.posref="y"===t||"closest"===t&&"h"===n.orientation?e.xa._offset+(e.x0+e.x1)/2:e.ya._offset+(e.y0+e.y1)/2,e.x0=Lib$1h.constrain(e.x0,0,e.xa._length),e.x1=Lib$1h.constrain(e.x1,0,e.xa._length),e.y0=Lib$1h.constrain(e.y0,0,e.ya._length),e.y1=Lib$1h.constrain(e.y1,0,e.ya._length),void 0!==e.xLabelVal&&(e.xLabel="xLabel"in e?e.xLabel:Axes$k.hoverLabelText(e.xa,e.xLabelVal,n.xhoverformat),e.xVal=e.xa.c2d(e.xLabelVal)),void 0!==e.yLabelVal&&(e.yLabel="yLabel"in e?e.yLabel:Axes$k.hoverLabelText(e.ya,e.yLabelVal,n.yhoverformat),e.yVal=e.ya.c2d(e.yLabelVal)),void 0!==e.zLabelVal&&void 0===e.zLabel&&(e.zLabel=String(e.zLabelVal)),!(isNaN(e.xerr)||"log"===e.xa.type&&e.xerr<=0)){var c=Axes$k.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;void 0!==e.xerrneg?e.xLabel+=" +"+c+" / -"+Axes$k.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text:e.xLabel+=" ± "+c,"x"===t&&(e.distance+=1)}if(!(isNaN(e.yerr)||"log"===e.ya.type&&e.yerr<=0)){var u=Axes$k.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;void 0!==e.yerrneg?e.yLabel+=" +"+u+" / -"+Axes$k.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text:e.yLabel+=" ± "+u,"y"===t&&(e.distance+=1)}var d=e.hoverinfo||e.trace.hoverinfo;return d&&"all"!==d&&(-1===(d=Array.isArray(d)?d:d.split("+")).indexOf("x")&&(e.xLabel=void 0),-1===d.indexOf("y")&&(e.yLabel=void 0),-1===d.indexOf("z")&&(e.zLabel=void 0),-1===d.indexOf("text")&&(e.text=void 0),-1===d.indexOf("name")&&(e.name=void 0)),e}function createSpikelines(e,t,r){var n,i,a=r.container,o=r.fullLayout,s=o._size,l=r.event,c=!!t.hLinePoint,u=!!t.vLinePoint;if(a.selectAll(".spikeline").remove(),u||c){var d=Color$t.combine(o.plot_bgcolor,o.paper_bgcolor);if(c){var h,g,p=t.hLinePoint;n=p&&p.xa,"cursor"===(i=p&&p.ya).spikesnap?(h=l.pointerX,g=l.pointerY):(h=n._offset+p.x,g=i._offset+p.y);var f,m,y=tinycolor$4.readability(p.color,d)<1.5?Color$t.contrast(d):p.color,b=i.spikemode,v=i.spikethickness,x=i.spikecolor||y,B=Axes$k.getPxPosition(e,i);if(-1!==b.indexOf("toaxis")||-1!==b.indexOf("across")){if(-1!==b.indexOf("toaxis")&&(f=B,m=h),-1!==b.indexOf("across")){var I=i._counterDomainMin,F=i._counterDomainMax;"free"===i.anchor&&(I=Math.min(I,i.position),F=Math.max(F,i.position)),f=s.l+I*s.w,m=s.l+F*s.w}a.insert("line",":first-child").attr({x1:f,x2:m,y1:g,y2:g,"stroke-width":v,stroke:x,"stroke-dasharray":Drawing$i.dashStyle(i.spikedash,v)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:f,x2:m,y1:g,y2:g,"stroke-width":v+2,stroke:d}).classed("spikeline",!0).classed("crisp",!0)}-1!==b.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:B+("right"!==i.side?v:-v),cy:g,r:v,fill:x}).classed("spikeline",!0)}if(u){var A,C,w=t.vLinePoint;n=w&&w.xa,i=w&&w.ya,"cursor"===n.spikesnap?(A=l.pointerX,C=l.pointerY):(A=n._offset+w.x,C=i._offset+w.y);var Q,U,S=tinycolor$4.readability(w.color,d)<1.5?Color$t.contrast(d):w.color,E=n.spikemode,L=n.spikethickness,_=n.spikecolor||S,T=Axes$k.getPxPosition(e,n);if(-1!==E.indexOf("toaxis")||-1!==E.indexOf("across")){if(-1!==E.indexOf("toaxis")&&(Q=T,U=C),-1!==E.indexOf("across")){var R=n._counterDomainMin,$=n._counterDomainMax;"free"===n.anchor&&(R=Math.min(R,n.position),$=Math.max($,n.position)),Q=s.t+(1-$)*s.h,U=s.t+(1-R)*s.h}a.insert("line",":first-child").attr({x1:A,x2:A,y1:Q,y2:U,"stroke-width":L,stroke:_,"stroke-dasharray":Drawing$i.dashStyle(n.spikedash,L)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:A,x2:A,y1:Q,y2:U,"stroke-width":L+2,stroke:d}).classed("spikeline",!0).classed("crisp",!0)}-1!==E.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:A,cy:T-("top"!==n.side?L:-L),r:L,fill:_}).classed("spikeline",!0)}}}function hoverChanged(e,t,r){if(!r||r.length!==e._hoverdata.length)return!0;for(var n=r.length-1;n>=0;n--){var i=r[n],a=e._hoverdata[n];if(i.curveNumber!==a.curveNumber||String(i.pointNumber)!==String(a.pointNumber)||String(i.pointNumbers)!==String(a.pointNumbers))return!0}return!1}function spikesChanged(e,t){return!t||(t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint)}function plainText(e,t){return svgTextUtils$9.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em"]})}function orderRangePoints(e,t){for(var r=t.charAt(0),n=[],i=[],a=[],o=0;o<e.length;o++){var s=e[o];Registry$C.traceIs(s.trace,"bar-like")||Registry$C.traceIs(s.trace,"box-violin")?a.push(s):s.trace[r+"period"]?i.push(s):n.push(s)}return n.concat(i).concat(a)}function getCoord(e,t,r){var n=t[e+"a"],i=t[e+"Val"],a=t.cd[0];if("category"===n.type||"multicategory"===n.type)i=n._categoriesMap[i];else if("date"===n.type){var o=t.trace[e+"periodalignment"];if(o){var s=t.cd[t.index],l=s[e+"Start"];void 0===l&&(l=s[e]);var c=s[e+"End"];void 0===c&&(c=s[e]);var u=c-l;"end"===o?i+=u:"middle"===o&&(i+=u/2)}i=n.d2c(i)}return a&&a.t&&a.t.posLetter===n._id&&("group"!==r.boxmode&&"group"!==r.violinmode||(i+=a.t.dPos)),i}function getTopOffset(e){return e.offsetTop+e.clientTop}function getLeftOffset(e){return e.offsetLeft+e.clientLeft}function getBoundingClientRect(e,t){var r=e._fullLayout,n=t.getBoundingClientRect(),i=n.left,a=n.top,o=i+n.width,s=a+n.height,l=Lib$1h.apply3DTransform(r._invTransform)(i,a),c=Lib$1h.apply3DTransform(r._invTransform)(o,s),u=l[0],d=l[1],h=c[0],g=c[1];return{x:u,y:d,width:h-u,height:g-d,top:Math.min(d,g),left:Math.min(u,h),right:Math.max(u,h),bottom:Math.max(d,g)}}var Lib$1g=libExports,Color$s=colorExports,isUnifiedHover$1=helpers$y.isUnifiedHover,hoverlabel_defaults=function(e,t,r,n){n=n||{};var i=t.legend;function a(e){n.font[e]||(n.font[e]=i?t.legend.font[e]:t.font[e])}t&&isUnifiedHover$1(t.hovermode)&&(n.font||(n.font={}),a("size"),a("family"),a("color"),i?(n.bgcolor||(n.bgcolor=Color$s.combine(t.legend.bgcolor,t.paper_bgcolor)),n.bordercolor||(n.bordercolor=t.legend.bordercolor)):n.bgcolor||(n.bgcolor=t.paper_bgcolor)),r("hoverlabel.bgcolor",n.bgcolor),r("hoverlabel.bordercolor",n.bordercolor),r("hoverlabel.namelength",n.namelength),Lib$1g.coerceFont(r,"hoverlabel.font",n.font),r("hoverlabel.align",n.align)},Lib$1f=libExports,handleHoverLabelDefaults$2=hoverlabel_defaults,layoutAttributes$7=layout_attributes$6,layout_global_defaults=function(e,t){handleHoverLabelDefaults$2(e,t,(function(r,n){return Lib$1f.coerce(e,t,layoutAttributes$7,r,n)}))},Lib$1e=libExports,attributes$C=attributes$N,handleHoverLabelDefaults$1=hoverlabel_defaults,defaults$j=function(e,t,r,n){var i=Lib$1e.extendFlat({},n.hoverlabel);t.hovertemplate&&(i.namelength=-1),handleHoverLabelDefaults$1(e,t,(function(r,n){return Lib$1e.coerce(e,t,attributes$C,r,n)}),i)},Lib$1d=libExports,layoutAttributes$6=layout_attributes$6,hovermode_defaults=function(e,t){function r(r,n){return void 0!==t[r]?t[r]:Lib$1d.coerce(e,t,layoutAttributes$6,r,n)}return r("clickmode"),r("hovermode")},Lib$1c=libExports,layoutAttributes$5=layout_attributes$6,handleHoverModeDefaults=hovermode_defaults,handleHoverLabelDefaults=hoverlabel_defaults,layout_defaults$3=function(e,t){function r(r,n){return Lib$1c.coerce(e,t,layoutAttributes$5,r,n)}handleHoverModeDefaults(e,t)&&(r("hoverdistance"),r("spikedistance")),"select"===r("dragmode")&&r("selectdirection");var n=t._has("mapbox"),i=t._has("geo"),a=t._basePlotModules.length;"zoom"===t.dragmode&&((n||i)&&1===a||n&&i&&2===a)&&(t.dragmode="pan"),handleHoverLabelDefaults(e,t,r),Lib$1c.coerceFont(r,"hoverlabel.grouptitlefont",t.hoverlabel.font)},Lib$1b=libExports,Registry$B=registry,calc$7=function(e){var t=e.calcdata,r=e._fullLayout;function n(e){return function(t){return Lib$1b.coerceHoverinfo({hoverinfo:t},{_module:e._module},r)}}for(var i=0;i<t.length;i++){var a=t[i],o=a[0].trace;if(!Registry$B.traceIs(o,"pie-like")){var s=Registry$B.traceIs(o,"2dMap")?paste:Lib$1b.fillArray;s(o.hoverinfo,a,"hi",n(o)),o.hovertemplate&&s(o.hovertemplate,a,"ht"),o.hoverlabel&&(s(o.hoverlabel.bgcolor,a,"hbg"),s(o.hoverlabel.bordercolor,a,"hbc"),s(o.hoverlabel.font.size,a,"hts"),s(o.hoverlabel.font.color,a,"htc"),s(o.hoverlabel.font.family,a,"htf"),s(o.hoverlabel.namelength,a,"hnl"),s(o.hoverlabel.align,a,"hta"))}}};function paste(e,t,r,n){n=n||Lib$1b.identity,Array.isArray(e)&&(t[0][r]=n(e))}var Registry$A=registry,hover$3=hover$4.hover,click$1=function(e,t,r){var n=Registry$A.getComponentMethod("annotations","onClick")(e,e._hoverdata);function i(){e.emit("plotly_click",{points:e._hoverdata,event:t})}void 0!==r&&hover$3(e,t,r,!0),e._hoverdata&&t&&t.target&&(n&&n.then?n.then(i):i(),t.stopImmediatePropagation&&t.stopImmediatePropagation())},d3$i=d3Exports,Lib$1a=libExports,dragElement$5=dragelementExports,helpers$r=helpers$y,layoutAttributes$4=layout_attributes$6,hoverModule=hover$4,fx={moduleType:"component",name:"fx",constants:constants$M,schema:{layout:layout_attributes$6},attributes:attributes$N,layoutAttributes:layout_attributes$6,supplyLayoutGlobalDefaults:layout_global_defaults,supplyDefaults:defaults$j,supplyLayoutDefaults:layout_defaults$3,calc:calc$7,getDistanceFunction:helpers$r.getDistanceFunction,getClosest:helpers$r.getClosest,inbox:helpers$r.inbox,quadrature:helpers$r.quadrature,appendArrayPointValue:helpers$r.appendArrayPointValue,castHoverOption:castHoverOption,castHoverinfo:castHoverinfo,hover:hoverModule.hover,unhover:dragElement$5.unhover,loneHover:hoverModule.loneHover,loneUnhover:loneUnhover,click:click$1};function loneUnhover(e){var t=Lib$1a.isD3Selection(e)?e:d3$i.select(e);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()}function castHoverOption(e,t,r){return Lib$1a.castOption(e,t,"hoverlabel."+r)}function castHoverinfo(e,t,r){return Lib$1a.castOption(e,r,"hoverinfo",(function(r){return Lib$1a.coerceHoverinfo({hoverinfo:r},{_module:e._module},t)}))}var helpers$q={};!function(e){e.selectMode=function(e){return"lasso"===e||"select"===e},e.drawMode=function(e){return"drawclosedpath"===e||"drawopenpath"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},e.openMode=function(e){return"drawline"===e||"drawopenpath"===e},e.rectMode=function(e){return"select"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},e.freeMode=function(e){return"lasso"===e||"drawclosedpath"===e||"drawopenpath"===e},e.selectingOrDrawing=function(t){return e.freeMode(t)||e.rectMode(t)}}(helpers$q);var clear_gl_canvases=function(e){var t=e._fullLayout;t._glcanvas&&t._glcanvas.size()&&t._glcanvas.each((function(e){e.regl&&e.regl.clear({color:!0,depth:!0})}))},subroutines={},buttonsExports={},buttons={get exports(){return buttonsExports},set exports(e){buttonsExports=e}},ploticon={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}},helpers$p={},CIRCLE_SIDES=32,constants$A={CIRCLE_SIDES:CIRCLE_SIDES,i000:0,i090:CIRCLE_SIDES/4,i180:CIRCLE_SIDES/2,i270:CIRCLE_SIDES/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)},strTranslate$7=libExports.strTranslate;function p2r$2(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}function r2p$1(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}}function axValue$1(e){var t="y"===e._id.charAt(0)?1:0;return function(r){return p2r$2(e,r[t])}}function getTransform$1(e){return strTranslate$7(e.xaxis._offset,e.yaxis._offset)}var helpers$o={p2r:p2r$2,r2p:r2p$1,axValue:axValue$1,getTransform:getTransform$1};!function(e){var t=parseSvgPath,r=constants$A,n=r.CIRCLE_SIDES,i=r.SQRT2,a=helpers$o,o=a.p2r,s=a.r2p,l=[0,3,4,5,6,1,2],c=[0,3,4,1,2];function u(e,t){return Math.abs(e-t)<=1e-6}function d(e,t){var r=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(r*r+n*n)}e.writePaths=function(e){var t=e.length;if(!t)return"M0,0Z";for(var r="",n=0;n<t;n++)for(var i=e[n].length,a=0;a<i;a++){var o=e[n][a][0];if("Z"===o)r+="Z";else for(var s=e[n][a].length,u=0;u<s;u++){var d=u;"Q"===o||"S"===o?d=c[u]:"C"===o&&(d=l[u]),r+=e[n][a][d],u>0&&u<s-1&&(r+=",")}}return r},e.readPaths=function(e,r,i,a){var l,c,u,d=t(e),h=[],g=-1,p=0,f=0,m=function(){c=p,u=f};m();for(var y=0;y<d.length;y++){var b,v,x,B,I=[],F=d[y][0],A=F;switch(F){case"M":g++,h[g]=[],p=+d[y][1],f=+d[y][2],I.push([A,p,f]),m();break;case"Q":case"S":b=+d[y][1],x=+d[y][2],p=+d[y][3],f=+d[y][4],I.push([A,p,f,b,x]);break;case"C":b=+d[y][1],x=+d[y][2],v=+d[y][3],B=+d[y][4],p=+d[y][5],f=+d[y][6],I.push([A,p,f,b,x,v,B]);break;case"T":case"L":p=+d[y][1],f=+d[y][2],I.push([A,p,f]);break;case"H":A="L",p=+d[y][1],I.push([A,p,f]);break;case"V":A="L",f=+d[y][1],I.push([A,p,f]);break;case"A":A="L";var C=+d[y][1],w=+d[y][2];+d[y][4]||(C=-C,w=-w);var Q=p-C,U=f;for(l=1;l<=n/2;l++){var S=2*Math.PI*l/n;I.push([A,Q+C*Math.cos(S),U+w*Math.sin(S)])}break;case"Z":p===c&&f===u||(p=c,f=u,I.push([A,p,f]))}for(var E=(i||{}).domain,L=r._fullLayout._size,_=i&&"pixel"===i.xsizemode,T=i&&"pixel"===i.ysizemode,R=!1===a,$=0;$<I.length;$++){for(l=0;l+2<7;l+=2){var k=I[$][l+1],N=I[$][l+2];void 0!==k&&void 0!==N&&(p=k,f=N,i&&(i.xaxis&&i.xaxis.p2r?(R&&(k-=i.xaxis._offset),k=_?s(i.xaxis,i.xanchor)+k:o(i.xaxis,k)):(R&&(k-=L.l),E?k=E.x[0]+k/L.w:k/=L.w),i.yaxis&&i.yaxis.p2r?(R&&(N-=i.yaxis._offset),N=T?s(i.yaxis,i.yanchor)-N:o(i.yaxis,N)):(R&&(N-=L.t),N=E?E.y[1]-N/L.h:1-N/L.h)),I[$][l+1]=k,I[$][l+2]=N)}h[g].push(I[$].slice())}}return h},e.pointsOnRectangle=function(e){if(5!==e.length)return!1;for(var t=1;t<3;t++){if(!u(e[0][t]-e[1][t],e[3][t]-e[2][t]))return!1;if(!u(e[0][t]-e[3][t],e[1][t]-e[2][t]))return!1}return!(!u(e[0][1],e[1][1])&&!u(e[0][1],e[3][1]))&&!!(d(e[0],e[1])*d(e[0],e[3]))},e.pointsOnEllipse=function(e){var t=e.length;if(t!==n+1)return!1;t=n;for(var r=0;r<t;r++){var i=(2*t-r)%t,a=(t/2+i)%t,o=(t/2+r)%t;if(!u(d(e[r],e[o]),d(e[i],e[a])))return!1}return!0},e.handleEllipse=function(t,r,a){if(!t)return[r,a];var o=e.ellipseOver({x0:r[0],y0:r[1],x1:a[0],y1:a[1]}),s=(o.x1+o.x0)/2,l=(o.y1+o.y0)/2,c=(o.x1-o.x0)/2,u=(o.y1-o.y0)/2;c||(c=u/=i),u||(u=c/=i);for(var d=[],h=0;h<n;h++){var g=2*h*Math.PI/n;d.push([s+c*Math.cos(g),l+u*Math.sin(g)])}return d},e.ellipseOver=function(e){var t=e.x0,r=e.y0,n=e.x1,a=e.y1,o=n-t,s=a-r,l=((t-=o)+n)/2,c=((r-=s)+a)/2;return{x0:l-(o*=i),y0:c-(s*=i),x1:l+o,y1:c+s}},e.fixDatesForPaths=function(e,t,r){var n="date"===t.type,i="date"===r.type;if(!n&&!i)return e;for(var a=0;a<e.length;a++)for(var o=0;o<e[a].length;o++)for(var s=0;s+2<e[a][o].length;s+=2)n&&(e[a][o][s+1]=e[a][o][s+1].replace(" ","_")),i&&(e[a][o][s+2]=e[a][o][s+2].replace(" ","_"));return e}}(helpers$p);var dragHelpers$3=helpers$q,drawMode$2=dragHelpers$3.drawMode,openMode$1=dragHelpers$3.openMode,constants$z=constants$A,i000$1=constants$z.i000,i090$1=constants$z.i090,i180$1=constants$z.i180,i270$1=constants$z.i270,cos45=constants$z.cos45,sin45=constants$z.sin45,cartesianHelpers=helpers$o,p2r$1=cartesianHelpers.p2r,r2p=cartesianHelpers.r2p,handleOutline$2=handle_outline,clearOutline$3=handleOutline$2.clearOutline,helpers$n=helpers$p,readPaths$4=helpers$n.readPaths,writePaths$2=helpers$n.writePaths,ellipseOver=helpers$n.ellipseOver,fixDatesForPaths$1=helpers$n.fixDatesForPaths,newshapes=function(e,t){if(e.length){var r=e[0][0];if(r){var n=r.getAttribute("d"),i=t.gd,a=i._fullLayout.newshape,o=t.plotinfo,s=o.xaxis,l=o.yaxis,c=!!o.domain||!o.xaxis,u=!!o.domain||!o.yaxis,d=t.isActiveShape,h=t.dragmode,g=(i.layout||{}).shapes||[];if(!drawMode$2(h)&&void 0!==d){var p=i._fullLayout._activeShapeIndex;if(p<g.length)switch(i._fullLayout.shapes[p].type){case"rect":h="drawrect";break;case"circle":h="drawcircle";break;case"line":h="drawline";break;case"path":var f=g[p].path||"";h="Z"===f[f.length-1]?"drawclosedpath":"drawopenpath"}}var m,y=openMode$1(h),b=readPaths$4(n,i,o,d),v={editable:!0,label:a.label,xref:c?"paper":s._id,yref:u?"paper":l._id,layer:a.layer,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};if(y||(v.fillcolor=a.fillcolor,v.fillrule=a.fillrule),1===b.length&&(m=b[0]),m&&5===m.length&&"drawrect"===h)v.type="rect",v.x0=m[0][1],v.y0=m[0][2],v.x1=m[2][1],v.y1=m[2][2];else if(m&&"drawline"===h)v.type="line",v.x0=m[0][1],v.y0=m[0][2],v.x1=m[1][1],v.y1=m[1][2];else if(m&&"drawcircle"===h){v.type="circle";var x=m[i000$1][1],B=m[i090$1][1],I=m[i180$1][1],F=m[i270$1][1],A=m[i000$1][2],C=m[i090$1][2],w=m[i180$1][2],Q=m[i270$1][2],U=o.xaxis&&("date"===o.xaxis.type||"log"===o.xaxis.type),S=o.yaxis&&("date"===o.yaxis.type||"log"===o.yaxis.type);U&&(x=r2p(o.xaxis,x),B=r2p(o.xaxis,B),I=r2p(o.xaxis,I),F=r2p(o.xaxis,F)),S&&(A=r2p(o.yaxis,A),C=r2p(o.yaxis,C),w=r2p(o.yaxis,w),Q=r2p(o.yaxis,Q));var E=(B+F)/2,L=(A+w)/2,_=ellipseOver({x0:E,y0:L,x1:E+(F-B+I-x)/2*cos45,y1:L+(Q-C+w-A)/2*sin45});U&&(_.x0=p2r$1(o.xaxis,_.x0),_.x1=p2r$1(o.xaxis,_.x1)),S&&(_.y0=p2r$1(o.yaxis,_.y0),_.y1=p2r$1(o.yaxis,_.y1)),v.x0=_.x0,v.y0=_.y0,v.x1=_.x1,v.y1=_.y1}else v.type="path",s&&l&&fixDatesForPaths$1(b,s,l),v.path=writePaths$2(b),m=null;clearOutline$3(i);for(var T=t.editHelpers,R=(T||{}).modifyItem,$=[],k=0;k<g.length;k++){var N=i._fullLayout.shapes[k];if($[k]=N._input,void 0!==d&&k===i._fullLayout._activeShapeIndex){var G=v;switch(N.type){case"line":case"rect":case"circle":R("x0",G.x0),R("x1",G.x1),R("y0",G.y0),R("y1",G.y1);break;case"path":R("path",G.path)}}}return void 0===d?($.push(v),$):T?T.getUpdateObj():{}}}},dragHelpers$2=helpers$q,selectMode$2=dragHelpers$2.selectMode,handleOutline$1=handle_outline,clearOutline$2=handleOutline$1.clearOutline,helpers$m=helpers$p,readPaths$3=helpers$m.readPaths,writePaths$1=helpers$m.writePaths,fixDatesForPaths=helpers$m.fixDatesForPaths,newselections=function(e,t){if(e.length){var r=e[0][0];if(r){var n=r.getAttribute("d"),i=t.gd,a=i._fullLayout.newselection,o=t.plotinfo,s=o.xaxis,l=o.yaxis,c=t.isActiveSelection,u=t.dragmode,d=(i.layout||{}).selections||[];if(!selectMode$2(u)&&void 0!==c){var h=i._fullLayout._activeSelectionIndex;if(h<d.length)switch(i._fullLayout.selections[h].type){case"rect":u="select";break;case"path":u="lasso"}}var g,p=readPaths$3(n,i,o,c),f={xref:s._id,yref:l._id,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};1===p.length&&(g=p[0]),g&&5===g.length&&"select"===u?(f.type="rect",f.x0=g[0][1],f.y0=g[0][2],f.x1=g[2][1],f.y1=g[2][2]):(f.type="path",s&&l&&fixDatesForPaths(p,s,l),f.path=writePaths$1(p),g=null),clearOutline$2(i);for(var m=t.editHelpers,y=(m||{}).modifyItem,b=[],v=0;v<d.length;v++){var x=i._fullLayout.selections[v];if(x){if(b[v]=x._input,void 0!==c&&v===i._fullLayout._activeSelectionIndex){var B=f;switch(x.type){case"rect":y("x0",B.x0),y("x1",B.x1),y("y0",B.y0),y("y1",B.y1);break;case"path":y("path",B.path)}}}else b[v]=x}return void 0===c?(b.push(f),b):m?m.getUpdateObj():{}}}},Lib$19=libExports,strTranslate$6=Lib$19.strTranslate,dragElement$4=dragelementExports,dragHelpers$1=helpers$q,drawMode$1=dragHelpers$1.drawMode,selectMode$1=dragHelpers$1.selectMode,Registry$z=registry,Color$r=colorExports,constants$y=constants$A,i000=constants$y.i000,i090=constants$y.i090,i180=constants$y.i180,i270=constants$y.i270,handleOutline=handle_outline,clearOutlineControllers$2=handleOutline.clearOutlineControllers,helpers$l=helpers$p,pointsOnRectangle=helpers$l.pointsOnRectangle,pointsOnEllipse=helpers$l.pointsOnEllipse,writePaths=helpers$l.writePaths,newShapes$1=newshapes,newSelections$1=newselections,display_outlines=function e(t,r,n,i){i||(i=0);var a=n.gd;function o(){e(t,r,n,i++),(pointsOnEllipse(t[0])||n.hasText)&&s({redrawing:!0})}function s(e){var t={};void 0!==n.isActiveShape&&(n.isActiveShape=!1,t=newShapes$1(r,n)),void 0!==n.isActiveSelection&&(n.isActiveSelection=!1,t=newSelections$1(r,n),a._fullLayout._reselect=!0),Object.keys(t).length&&Registry$z.call((e||{}).redrawing?"relayout":"_guiRelayout",a,t)}var l,c,u,d,h,g=a._fullLayout._zoomlayer,p=n.dragmode,f=drawMode$1(p),m=selectMode$1(p);((f||m)&&(a._fullLayout._outlining=!0),clearOutlineControllers$2(a),r.attr("d",writePaths(t)),i||!n.isActiveShape&&!n.isActiveSelection)||(h=recordPositions([],t),function(e){l=[];for(var r=0;r<t.length;r++){var i=t[r],o=pointsOnRectangle(i),s=!o&&pointsOnEllipse(i);l[r]=[];for(var c=i.length,u=0;u<c;u++)if("Z"!==i[u][0]&&(!s||u===i000||u===i090||u===i180||u===i270)){var d,h=o&&n.isActiveSelection;h&&(d=getNextPoint(i,u));var g=i[u][1],p=i[u][2],f=e.append(h?"rect":"circle").attr("data-i",r).attr("data-j",u).style({fill:Color$r.background,stroke:Color$r.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(h){var m=d[1]-g,b=d[2]-p,B=b?5:Math.max(Math.min(25,Math.abs(m)-5),5),I=m?5:Math.max(Math.min(25,Math.abs(b)-5),5);f.classed(b?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",B).attr("height",I).attr("x",g-B/2).attr("y",p-I/2).attr("transform",strTranslate$6(m/2,b/2))}else f.classed("cursor-grab",!0).attr("r",5).attr("cx",g).attr("cy",p);l[r][u]={element:f.node(),gd:a,prepFn:y,doneFn:v,clickFn:x},dragElement$4.init(l[r][u])}}}(g.append("g").attr("class","outline-controllers")),function(){if(c=[],!t.length)return;var e=0;c[e]={element:r[0][0],gd:a,prepFn:I,doneFn:F,clickFn:A},dragElement$4.init(c[e])}());function y(e){u=+e.srcElement.getAttribute("data-i"),d=+e.srcElement.getAttribute("data-j"),l[u][d].moveFn=b}function b(e,r){if(t.length){var i=h[u][d][1],a=h[u][d][2],s=t[u],l=s.length;if(pointsOnRectangle(s)){var c=e,g=r;if(n.isActiveSelection)getNextPoint(s,d)[1]===s[d][1]?g=0:c=0;for(var p=0;p<l;p++)if(p!==d){var f=s[p];f[1]===s[d][1]&&(f[1]=i+c),f[2]===s[d][2]&&(f[2]=a+g)}if(s[d][1]=i+c,s[d][2]=a+g,!pointsOnRectangle(s))for(var m=0;m<l;m++)for(var y=0;y<s[m].length;y++)s[m][y]=h[u][m][y]}else s[d][1]=i+e,s[d][2]=a+r;o()}}function v(){s()}function x(e,r){if(2===e){u=+r.srcElement.getAttribute("data-i"),d=+r.srcElement.getAttribute("data-j");var n=t[u];pointsOnRectangle(n)||pointsOnEllipse(n)||function(){if(t.length&&t[u]&&t[u].length){for(var e=[],r=0;r<t[u].length;r++)r!==d&&e.push(t[u][r]);e.length>1&&(2!==e.length||"Z"!==e[1][0])&&(0===d&&(e[0][0]="M"),t[u]=e,o(),s())}}()}}function B(e,r){!function(e,r){if(t.length)for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)for(var a=0;a+2<t[n][i].length;a+=2)t[n][i][a+1]=h[n][i][a+1]+e,t[n][i][a+2]=h[n][i][a+2]+r}(e,r),o()}function I(e){(u=+e.srcElement.getAttribute("data-i"))||(u=0),c[u].moveFn=B}function F(){s()}function A(e){2===e&&eraseActiveSelection(a)}};function recordPositions(e,t){for(var r=0;r<t.length;r++){var n=t[r];e[r]=[];for(var i=0;i<n.length;i++){e[r][i]=[];for(var a=0;a<n[i].length;a++)e[r][i][a]=n[i][a]}}return e}function getNextPoint(e,t){var r,n,i,a=e[t][1],o=e[t][2],s=e.length;return n=e[r=(t+1)%s][1],i=e[r][2],n===a&&i===o&&(n=e[r=(t+2)%s][1],i=e[r][2]),[r,n,i]}function eraseActiveSelection(e){if(selectMode$1(e._fullLayout.dragmode)){clearOutlineControllers$2(e);var t=e._fullLayout._activeSelectionIndex,r=(e.layout||{}).selections||[];if(t<r.length){for(var n=[],i=0;i<r.length;i++)i!==t&&n.push(r[i]);delete e._fullLayout._activeSelectionIndex;var a=e._fullLayout.selections[t];e._fullLayout._deselect={xref:a.xref,yref:a.yref},Registry$z.call("_guiRelayout",e,{selections:n})}}}var constants$x={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}},helpers$k={};!function(e){var t=constants$x,r=libExports,n=axesExports;e.rangeToShapePosition=function(e){return"log"===e.type?e.r2d:function(e){return e}},e.shapePositionToRange=function(e){return"log"===e.type?e.d2r:function(e){return e}},e.decodeDate=function(e){return function(t){return t.replace&&(t=t.replace("_"," ")),e(t)}},e.encodeDate=function(e){return function(t){return e(t).replace(" ","_")}},e.extractPathCoords=function(e,n,i){var a=[];return e.match(t.segmentRE).forEach((function(e){var o=n[e.charAt(0)].drawn;if(void 0!==o){var s=e.substr(1).match(t.paramRE);if(s&&!(s.length<o)){var l=s[o],c=i?l:r.cleanNumber(l);a.push(c)}}})),a},e.getDataToPixel=function(t,r,n,i){var a,o=t._fullLayout._size;if(r)if("domain"===i)a=function(e){return r._length*(n?1-e:e)+r._offset};else{var s=e.shapePositionToRange(r);a=function(e){return r._offset+r.r2p(s(e,!0))},"date"===r.type&&(a=e.decodeDate(a))}else a=n?function(e){return o.t+o.h*(1-e)}:function(e){return o.l+o.w*e};return a},e.getPixelToData=function(t,r,n,i){var a,o=t._fullLayout._size;if(r)if("domain"===i)a=function(e){var t=(e-r._offset)/r._length;return n?1-t:t};else{var s=e.rangeToShapePosition(r);a=function(e){return s(r.p2r(e-r._offset))}}else a=n?function(e){return 1-(e-o.t)/o.h}:function(e){return(e-o.l)/o.w};return a},e.roundPositionForSharpStrokeRendering=function(e,t){var r=1===Math.round(t%2),n=Math.round(e);return r?n+.5:n},e.makeShapesOptionsAndPlotinfo=function(e,t){var r=e._fullLayout.shapes[t]||{},n=e._fullLayout._plots[r.xref+r.yref];return!!n?n._hadPlotinfo=!0:(n={},r.xref&&"paper"!==r.xref&&(n.xaxis=e._fullLayout[r.xref+"axis"]),r.yref&&"paper"!==r.yref&&(n.yaxis=e._fullLayout[r.yref+"axis"])),n.xsizemode=r.xsizemode,n.ysizemode=r.ysizemode,n.xanchor=r.xanchor,n.yanchor=r.yanchor,{options:r,plotinfo:n}},e.makeSelectionsOptionsAndPlotinfo=function(e,t){var r=e._fullLayout.selections[t]||{},n=e._fullLayout._plots[r.xref+r.yref];return!!n?n._hadPlotinfo=!0:(n={},r.xref&&(n.xaxis=e._fullLayout[r.xref+"axis"]),r.yref&&(n.yaxis=e._fullLayout[r.yref+"axis"])),{options:r,plotinfo:n}},e.getPathString=function(i,a){var o,s,l,c,u,d,h,g,p=a.type,f=n.getRefType(a.xref),m=n.getRefType(a.yref),y=n.getFromId(i,a.xref),b=n.getFromId(i,a.yref),v=i._fullLayout._size;if(y?"domain"===f?s=function(e){return y._offset+y._length*e}:(o=e.shapePositionToRange(y),s=function(e){return y._offset+y.r2p(o(e,!0))}):s=function(e){return v.l+v.w*e},b?"domain"===m?c=function(e){return b._offset+b._length*(1-e)}:(l=e.shapePositionToRange(b),c=function(e){return b._offset+b.r2p(l(e,!0))}):c=function(e){return v.t+v.h*(1-e)},"path"===p)return y&&"date"===y.type&&(s=e.decodeDate(s)),b&&"date"===b.type&&(c=e.decodeDate(c)),function(e,n,i){var a=e.path,o=e.xsizemode,s=e.ysizemode,l=e.xanchor,c=e.yanchor;return a.replace(t.segmentRE,(function(e){var a=0,u=e.charAt(0),d=t.paramIsX[u],h=t.paramIsY[u],g=t.numParams[u],p=e.substr(1).replace(t.paramRE,(function(e){return d[a]?e="pixel"===o?n(l)+Number(e):n(e):h[a]&&(e="pixel"===s?i(c)-Number(e):i(e)),++a>g&&(e="X"),e}));return a>g&&(p=p.replace(/[\s,]*X.*/,""),r.log("Ignoring extra params in segment "+e)),u+p}))}(a,s,c);if("pixel"===a.xsizemode){var x=s(a.xanchor);u=x+a.x0,d=x+a.x1}else u=s(a.x0),d=s(a.x1);if("pixel"===a.ysizemode){var B=c(a.yanchor);h=B-a.y0,g=B-a.y1}else h=c(a.y0),g=c(a.y1);if("line"===p)return"M"+u+","+h+"L"+d+","+g;if("rect"===p)return"M"+u+","+h+"H"+d+"V"+g+"H"+u+"Z";var I=(u+d)/2,F=(h+g)/2,A=Math.abs(I-u),C=Math.abs(F-h),w="A"+A+","+C,Q=I+A+","+F;return"M"+Q+w+" 0 1,1 "+(I+","+(F-C))+w+" 0 0,1 "+Q+"Z"}}(helpers$k);var d3$h=d3Exports,Registry$y=registry,Lib$18=libExports,Axes$j=axesExports,readPaths$2=helpers$p.readPaths,displayOutlines$2=display_outlines,clearOutlineControllers$1=handle_outline.clearOutlineControllers,Color$q=colorExports,Drawing$h=drawingExports,arrayEditor$5=plot_template.arrayEditor,dragElement$3=dragelementExports,setCursor$3=setcursor,svgTextUtils$8=svg_text_utils,constants$w=constants$x,helpers$j=helpers$k,getPathString$1=helpers$j.getPathString,FROM_TL$4=alignment$1.FROM_TL,draw_1$3={draw:draw$a,drawOne:drawOne$2,eraseActiveShape:eraseActiveShape$1};function draw$a(e){var t=e._fullLayout;for(var r in t._shapeUpperLayer.selectAll("path").remove(),t._shapeLowerLayer.selectAll("path").remove(),t._shapeUpperLayer.selectAll("text").remove(),t._shapeLowerLayer.selectAll("text").remove(),t._plots){var n=t._plots[r].shapelayer;n&&(n.selectAll("path").remove(),n.selectAll("text").remove())}for(var i=0;i<t.shapes.length;i++)t.shapes[i].visible&&drawOne$2(e,i)}function shouldSkipEdits(e){return!!e._fullLayout._outlining}function couldHaveActiveShape(e){return!e._context.edits.shapePosition}function drawOne$2(e,t){e._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+t+'"]').remove();var r=helpers$j.makeShapesOptionsAndPlotinfo(e,t),n=r.options,i=r.plotinfo;if(n._input&&!1!==n.visible)if("below"!==n.layer)a(e._fullLayout._shapeUpperLayer);else if("paper"===n.xref||"paper"===n.yref)a(e._fullLayout._shapeLowerLayer);else{if(i._hadPlotinfo)a((i.mainplotinfo||i).shapelayer);else a(e._fullLayout._shapeLowerLayer)}function a(r){var a=getPathString$1(e,n),o={"data-index":t,"fill-rule":n.fillrule,d:a},s=n.opacity,l=n.fillcolor,c=n.line.width?n.line.color:"rgba(0,0,0,0)",u=n.line.width,d=n.line.dash;u||!0!==n.editable||(u=5,d="solid");var h="Z"!==a[a.length-1],g=couldHaveActiveShape(e)&&n.editable&&e._fullLayout._activeShapeIndex===t;g&&(l=h?"rgba(0,0,0,0)":e._fullLayout.activeshape.fillcolor,s=e._fullLayout.activeshape.opacity);var p,f=r.append("g").classed("shape-group",!0).attr({"data-index":t}),m=f.append("path").attr(o).style("opacity",s).call(Color$q.stroke,c).call(Color$q.fill,l).call(Drawing$h.dashLine,d,u);if(setClipPath$1(f,e,n),drawLabel$1(e,t,n,f),(g||e._context.edits.shapePosition)&&(p=arrayEditor$5(e.layout,"shapes",n)),g){m.style({cursor:"move"});var y={element:m.node(),plotinfo:i,gd:e,editHelpers:p,hasText:n.label.text,isActiveShape:!0},b=readPaths$2(a,e);displayOutlines$2(b,m,y)}else e._context.edits.shapePosition?setupDragElement(e,m,n,t,r,p):!0===n.editable&&m.style("pointer-events",h||Color$q.opacity(l)*s<=.5?"stroke":"all");m.node().addEventListener("click",(function(){return activateShape(e,m)}))}}function setClipPath$1(e,t,r){var n=(r.xref+r.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");Drawing$h.setClipUrl(e,n?"clip"+t._fullLayout._uid+n:null,t)}function setupDragElement(e,t,r,n,i,a){var o,s,l,c,u,d,h,g,p,f,m,y,b,v,x,B,I="pixel"===r.xsizemode,F="pixel"===r.ysizemode,A="line"===r.type,C="path"===r.type,w=a.modifyItem,Q=d3$h.select(t.node().parentNode),U=Axes$j.getFromId(e,r.xref),S=Axes$j.getRefType(r.xref),E=Axes$j.getFromId(e,r.yref),L=Axes$j.getRefType(r.yref),_=helpers$j.getDataToPixel(e,U,!1,S),T=helpers$j.getDataToPixel(e,E,!0,L),R=helpers$j.getPixelToData(e,U,!1,S),$=helpers$j.getPixelToData(e,E,!0,L),k=A?function(){var e=10,a=Math.max(r.line.width,e),o=i.append("g").attr("data-index",n).attr("drag-helper",!0);o.append("path").attr("d",t.attr("d")).style({cursor:"move","stroke-width":a,"stroke-opacity":"0"});var s={"fill-opacity":"0"},l=Math.max(a/2,e);return o.append("circle").attr({"data-line-point":"start-point",cx:I?_(r.xanchor)+r.x0:_(r.x0),cy:F?T(r.yanchor)-r.y0:T(r.y0),r:l}).style(s).classed("cursor-grab",!0),o.append("circle").attr({"data-line-point":"end-point",cx:I?_(r.xanchor)+r.x1:_(r.x1),cy:F?T(r.yanchor)-r.y1:T(r.y1),r:l}).style(s).classed("cursor-grab",!0),o}():t,N={element:k.node(),gd:e,prepFn:function(n){if(shouldSkipEdits(e))return;I&&(u=_(r.xanchor));F&&(d=T(r.yanchor));"path"===r.type?x=r.path:(o=I?r.x0:_(r.x0),s=F?r.y0:T(r.y0),l=I?r.x1:_(r.x1),c=F?r.y1:T(r.y1));o<l?(p=o,b="x0",f=l,v="x1"):(p=l,b="x1",f=o,v="x0");!F&&s<c||F&&s>c?(h=s,m="y0",g=c,y="y1"):(h=c,m="y1",g=s,y="y0");G(n),V(i,r),function(e,t,r){var n=t.xref,i=t.yref,a=Axes$j.getFromId(r,n),o=Axes$j.getFromId(r,i),s="";"paper"===n||a.autorange||(s+=n);"paper"===i||o.autorange||(s+=i);Drawing$h.setClipUrl(e,s?"clip"+r._fullLayout._uid+s:null,r)}(t,r,e),N.moveFn="move"===B?M:D,N.altKey=n.altKey},doneFn:function(){if(shouldSkipEdits(e))return;setCursor$3(t),H(i),setClipPath$1(t,e,r),Registry$y.call("_guiRelayout",e,a.getUpdateObj())},clickFn:function(){if(shouldSkipEdits(e))return;H(i)}};function G(r){if(shouldSkipEdits(e))B=null;else if(A)B="path"===r.target.tagName?"move":"start-point"===r.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var n=N.element.getBoundingClientRect(),i=n.right-n.left,a=n.bottom-n.top,o=r.clientX-n.left,s=r.clientY-n.top,l=!C&&i>10&&a>10&&!r.shiftKey?dragElement$3.getCursor(o/i,1-s/a):"move";setCursor$3(t,l),B=l.split("-")[0]}}function M(a,h){if("path"===r.type){var g=function(e){return e},p=g,f=g;I?w("xanchor",r.xanchor=R(u+a)):(p=function(e){return R(_(e)+a)},U&&"date"===U.type&&(p=helpers$j.encodeDate(p))),F?w("yanchor",r.yanchor=$(d+h)):(f=function(e){return $(T(e)+h)},E&&"date"===E.type&&(f=helpers$j.encodeDate(f))),w("path",r.path=movePath(x,p,f))}else I?w("xanchor",r.xanchor=R(u+a)):(w("x0",r.x0=R(o+a)),w("x1",r.x1=R(l+a))),F?w("yanchor",r.yanchor=$(d+h)):(w("y0",r.y0=$(s+h)),w("y1",r.y1=$(c+h)));t.attr("d",getPathString$1(e,r)),V(i,r),drawLabel$1(e,n,r,Q)}function D(a,S){if(C){var L=function(e){return e},k=L,N=L;I?w("xanchor",r.xanchor=R(u+a)):(k=function(e){return R(_(e)+a)},U&&"date"===U.type&&(k=helpers$j.encodeDate(k))),F?w("yanchor",r.yanchor=$(d+S)):(N=function(e){return $(T(e)+S)},E&&"date"===E.type&&(N=helpers$j.encodeDate(N))),w("path",r.path=movePath(x,k,N))}else if(A){if("resize-over-start-point"===B){var G=o+a,M=F?s-S:s+S;w("x0",r.x0=I?G:R(G)),w("y0",r.y0=F?M:$(M))}else if("resize-over-end-point"===B){var D=l+a,H=F?c-S:c+S;w("x1",r.x1=I?D:R(D)),w("y1",r.y1=F?H:$(H))}}else{var X=function(e){return-1!==B.indexOf(e)},O=X("n"),Z=X("s"),W=X("w"),Y=X("e"),P=O?h+S:h,z=Z?g+S:g,J=W?p+a:p,j=Y?f+a:f;F&&(O&&(P=h-S),Z&&(z=g-S)),(!F&&z-P>10||F&&P-z>10)&&(w(m,r[m]=F?P:$(P)),w(y,r[y]=F?z:$(z))),j-J>10&&(w(b,r[b]=I?J:R(J)),w(v,r[v]=I?j:R(j)))}t.attr("d",getPathString$1(e,r)),V(i,r),drawLabel$1(e,n,r,Q)}function V(e,t){(I||F)&&function(){var r="path"!==t.type,n=e.selectAll(".visual-cue").data([0]),i=1;n.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":i}).classed("visual-cue",!0);var a=_(I?t.xanchor:Lib$18.midRange(r?[t.x0,t.x1]:helpers$j.extractPathCoords(t.path,constants$w.paramIsX))),o=T(F?t.yanchor:Lib$18.midRange(r?[t.y0,t.y1]:helpers$j.extractPathCoords(t.path,constants$w.paramIsY)));if(a=helpers$j.roundPositionForSharpStrokeRendering(a,i),o=helpers$j.roundPositionForSharpStrokeRendering(o,i),I&&F){var s="M"+(a-1-i)+","+(o-1-i)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";n.attr("d",s)}else if(I){var l="M"+(a-1-i)+","+(o-9-i)+"v18 h2 v-18 Z";n.attr("d",l)}else{var c="M"+(a-9-i)+","+(o-1-i)+"h18 v2 h-18 Z";n.attr("d",c)}}()}function H(e){e.selectAll(".visual-cue").remove()}dragElement$3.init(N),k.node().onmousemove=G}function drawLabel$1(e,t,r,n){if(n.selectAll(".shape-label").remove(),r.label.text){var i,a,o,s,l={"data-index":t},c=r.label.text,u=r.label.font,d=n.append("g").attr(l).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(c);if(r.path){var h=getPathString$1(e,r),g=readPaths$2(h,e);i=1/0,o=1/0,a=-1/0,s=-1/0;for(var p=0;p<g.length;p++)for(var f=0;f<g[p].length;f++)for(var m=g[p][f],y=1;y<m.length;y+=2){var b=m[y],v=m[y+1];i=Math.min(i,b),a=Math.max(a,b),o=Math.min(o,v),s=Math.max(s,v)}}else{var x=Axes$j.getFromId(e,r.xref),B=Axes$j.getRefType(r.xref),I=Axes$j.getFromId(e,r.yref),F=Axes$j.getRefType(r.yref),A=helpers$j.getDataToPixel(e,x,!1,B),C=helpers$j.getDataToPixel(e,I,!0,F);i=A(r.x0),a=A(r.x1),o=C(r.y0),s=C(r.y1)}var w=r.label.textangle;"auto"===w&&(w="line"===r.type?calcTextAngle(i,o,a,s):0),d.call((function(t){return t.call(Drawing$h.font,u).attr({}),svgTextUtils$8.convertToTspans(t,e),t}));var Q=calcTextPosition(i,o,a,s,r,w,Drawing$h.bBox(d.node())),U=Q.textx,S=Q.texty,E=Q.xanchor;d.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[E],y:S,x:U,transform:"rotate("+w+","+U+","+S+")"}).call(svgTextUtils$8.positionText,U,S)}}function calcTextAngle(e,t,r,n){var i,a;return a=Math.abs(r-e),i=r>=e?t-n:n-t,-180/Math.PI*Math.atan2(i,a)}function calcTextPosition(e,t,r,n,i,a,o){var s,l,c,u,d=i.label.textposition,h=i.label.textangle,g=i.label.padding,p=i.type,f=Math.PI/180*a,m=Math.sin(f),y=Math.cos(f),b=i.label.xanchor,v=i.label.yanchor;if("line"===p){"start"===d?(s=e,l=t):"end"===d?(s=r,l=n):(s=(e+r)/2,l=(t+n)/2),"auto"===b&&(b="start"===d?"auto"===h?r>e?"left":r<e?"right":"center":r>e?"right":r<e?"left":"center":"end"===d?"auto"===h?r>e?"right":r<e?"left":"center":r>e?"left":r<e?"right":"center":"center");var x={bottom:-1,middle:0,top:1};if("auto"===h){var B=x[v];c=-g*m*B,u=g*y*B}else{c=g*{left:1,center:0,right:-1}[b],u=g*x[v]}s+=c,l+=u}else c=g+3,-1!==d.indexOf("right")?(s=Math.max(e,r)-c,"auto"===b&&(b="right")):-1!==d.indexOf("left")?(s=Math.min(e,r)+c,"auto"===b&&(b="left")):(s=(e+r)/2,"auto"===b&&(b="center")),l=-1!==d.indexOf("top")?Math.min(t,n):-1!==d.indexOf("bottom")?Math.max(t,n):(t+n)/2,u=g,"bottom"===v?l-=u:"top"===v&&(l+=u);var I=FROM_TL$4[v],F=i.label.font.size,A=o.height;return{textx:s+(A*I-F)*m,texty:l+-(A*I-F)*y,xanchor:b}}function movePath(e,t,r){return e.replace(constants$w.segmentRE,(function(e){var n=0,i=e.charAt(0),a=constants$w.paramIsX[i],o=constants$w.paramIsY[i],s=constants$w.numParams[i];return i+e.substr(1).replace(constants$w.paramRE,(function(e){return n>=s||(a[n]?e=t(e):o[n]&&(e=r(e)),n++),e}))}))}function activateShape(e,t){if(couldHaveActiveShape(e)){var r=+t.node().getAttribute("data-index");if(r>=0){if(r===e._fullLayout._activeShapeIndex)return void deactivateShape(e);e._fullLayout._activeShapeIndex=r,e._fullLayout._deactivateShape=deactivateShape,draw$a(e)}}}function deactivateShape(e){couldHaveActiveShape(e)&&(e._fullLayout._activeShapeIndex>=0&&(clearOutlineControllers$1(e),delete e._fullLayout._activeShapeIndex,draw$a(e)))}function eraseActiveShape$1(e){if(couldHaveActiveShape(e)){clearOutlineControllers$1(e);var t=e._fullLayout._activeShapeIndex,r=(e.layout||{}).shapes||[];if(t<r.length){for(var n=[],i=0;i<r.length;i++)i!==t&&n.push(r[i]);delete e._fullLayout._activeShapeIndex,Registry$y.call("_guiRelayout",e,{shapes:n})}}}var Registry$x=registry,Plots$9=plotsExports,axisIds$6=axis_ids,Icons$1=ploticon,eraseActiveShape=draw_1$3.eraseActiveShape,Lib$17=libExports,_=Lib$17._,modeBarButtons$2=buttons.exports={};function handleCartesian(e,t){var r,n,i=t.currentTarget,a=i.getAttribute("data-attr"),o=i.getAttribute("data-val")||!0,s=e._fullLayout,l={},c=axisIds$6.list(e,null,!0),u=s._cartesianSpikesEnabled;if("zoom"===a){var d,h="in"===o?.5:2,g=(1+h)/2,p=(1-h)/2;for(n=0;n<c.length;n++)if(!(r=c[n]).fixedrange)if(d=r._name,"auto"===o)l[d+".autorange"]=!0;else if("reset"===o){if(void 0===r._rangeInitial)l[d+".autorange"]=!0;else{var f=r._rangeInitial.slice();l[d+".range[0]"]=f[0],l[d+".range[1]"]=f[1]}void 0!==r._showSpikeInitial&&(l[d+".showspikes"]=r._showSpikeInitial,"on"!==u||r._showSpikeInitial||(u="off"))}else{var m=[r.r2l(r.range[0]),r.r2l(r.range[1])],y=[g*m[0]+p*m[1],g*m[1]+p*m[0]];l[d+".range[0]"]=r.l2r(y[0]),l[d+".range[1]"]=r.l2r(y[1])}}else"hovermode"!==a||"x"!==o&&"y"!==o||(o=s._isHoriz?"y":"x",i.setAttribute("data-val",o)),l[a]=o;s._cartesianSpikesEnabled=u,Registry$x.call("_guiRelayout",e,l)}function handleDrag3d(e,t){for(var r=t.currentTarget,n=r.getAttribute("data-attr"),i=r.getAttribute("data-val")||!0,a=e._fullLayout._subplots.gl3d||[],o={},s=n.split("."),l=0;l<a.length;l++)o[a[l]+"."+s[1]]=i;var c="pan"===i?i:"zoom";o.dragmode=c,Registry$x.call("_guiRelayout",e,o)}function handleCamera3d(e,t){for(var r=t.currentTarget.getAttribute("data-attr"),n="resetLastSave"===r,i="resetDefault"===r,a=e._fullLayout,o=a._subplots.gl3d||[],s={},l=0;l<o.length;l++){var c,u=o[l],d=u+".camera",h=u+".aspectratio",g=u+".aspectmode",p=a[u]._scene;n?(s[d+".up"]=p.viewInitial.up,s[d+".eye"]=p.viewInitial.eye,s[d+".center"]=p.viewInitial.center,c=!0):i&&(s[d+".up"]=null,s[d+".eye"]=null,s[d+".center"]=null,c=!0),c&&(s[h+".x"]=p.viewInitial.aspectratio.x,s[h+".y"]=p.viewInitial.aspectratio.y,s[h+".z"]=p.viewInitial.aspectratio.z,s[g]=p.viewInitial.aspectmode)}Registry$x.call("_guiRelayout",e,s)}function getNextHover3d(e,t){var r=t.currentTarget,n=r._previousVal,i=e._fullLayout,a=i._subplots.gl3d||[],o=["xaxis","yaxis","zaxis"],s={},l={};if(n)l=n,r._previousVal=null;else{for(var c=0;c<a.length;c++){var u=a[c],d=i[u],h=u+".hovermode";s[h]=d.hovermode,l[h]=!1;for(var g=0;g<3;g++){var p=o[g],f=u+"."+p+".showspikes";l[f]=!1,s[f]=d[p].showspikes}}r._previousVal=s}return l}function handleHover3d(e,t){var r=getNextHover3d(e,t);Registry$x.call("_guiRelayout",e,r)}function handleGeo(e,t){for(var r=t.currentTarget,n=r.getAttribute("data-attr"),i=r.getAttribute("data-val")||!0,a=e._fullLayout,o=a._subplots.geo||[],s=0;s<o.length;s++){var l=o[s],c=a[l];if("zoom"===n){var u=c.projection.scale,d="in"===i?2*u:.5*u;Registry$x.call("_guiRelayout",e,l+".projection.scale",d)}}"reset"===n&&resetView(e,"geo")}function getNextHover(e){var t=e._fullLayout;return!t.hovermode&&(t._has("cartesian")?t._isHoriz?"y":"x":"closest")}function toggleHover(e){var t=getNextHover(e);Registry$x.call("_guiRelayout",e,"hovermode",t)}function setSpikelineVisibility(e){for(var t="on"===e._fullLayout._cartesianSpikesEnabled,r=axisIds$6.list(e,null,!0),n={},i=0;i<r.length;i++){var a=r[i];n[a._name+".showspikes"]=!!t||a._showSpikeInitial}return n}function handleMapboxZoom(e,t){for(var r=t.currentTarget.getAttribute("data-val"),n=e._fullLayout,i=n._subplots.mapbox||[],a={},o=0;o<i.length;o++){var s=i[o],l=n[s].zoom,c="in"===r?1.05*l:l/1.05;a[s+".zoom"]=c}Registry$x.call("_guiRelayout",e,a)}function resetView(e,t){for(var r=e._fullLayout,n=r._subplots[t]||[],i={},a=0;a<n.length;a++)for(var o=n[a],s=r[o]._subplot.viewInitial,l=Object.keys(s),c=0;c<l.length;c++){var u=l[c];i[o+"."+u]=s[u]}Registry$x.call("_guiRelayout",e,i)}modeBarButtons$2.toImage={name:"toImage",title:function(e){var t=(e._context.toImageButtonOptions||{}).format||"png";return _(e,"png"===t?"Download plot as a png":"Download plot")},icon:Icons$1.camera,click:function(e){var t=e._context.toImageButtonOptions,r={format:t.format||"png"};Lib$17.notifier(_(e,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==r.format&&Lib$17.isIE()&&(Lib$17.notifier(_(e,"IE only supports svg.  Changing format to svg."),"long"),r.format="svg"),["filename","width","height","scale"].forEach((function(e){e in t&&(r[e]=t[e])})),Registry$x.call("downloadImage",e,r).then((function(t){Lib$17.notifier(_(e,"Snapshot succeeded")+" - "+t,"long")})).catch((function(){Lib$17.notifier(_(e,"Sorry, there was a problem downloading your snapshot!"),"long")}))}},modeBarButtons$2.sendDataToCloud={name:"sendDataToCloud",title:function(e){return _(e,"Edit in Chart Studio")},icon:Icons$1.disk,click:function(e){Plots$9.sendDataToCloud(e)}},modeBarButtons$2.editInChartStudio={name:"editInChartStudio",title:function(e){return _(e,"Edit in Chart Studio")},icon:Icons$1.pencil,click:function(e){Plots$9.sendDataToCloud(e)}},modeBarButtons$2.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return _(e,"Zoom")},attr:"dragmode",val:"zoom",icon:Icons$1.zoombox,click:handleCartesian},modeBarButtons$2.pan2d={name:"pan2d",_cat:"pan",title:function(e){return _(e,"Pan")},attr:"dragmode",val:"pan",icon:Icons$1.pan,click:handleCartesian},modeBarButtons$2.select2d={name:"select2d",_cat:"select",title:function(e){return _(e,"Box Select")},attr:"dragmode",val:"select",icon:Icons$1.selectbox,click:handleCartesian},modeBarButtons$2.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return _(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:Icons$1.lasso,click:handleCartesian},modeBarButtons$2.drawclosedpath={name:"drawclosedpath",title:function(e){return _(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:Icons$1.drawclosedpath,click:handleCartesian},modeBarButtons$2.drawopenpath={name:"drawopenpath",title:function(e){return _(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:Icons$1.drawopenpath,click:handleCartesian},modeBarButtons$2.drawline={name:"drawline",title:function(e){return _(e,"Draw line")},attr:"dragmode",val:"drawline",icon:Icons$1.drawline,click:handleCartesian},modeBarButtons$2.drawrect={name:"drawrect",title:function(e){return _(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:Icons$1.drawrect,click:handleCartesian},modeBarButtons$2.drawcircle={name:"drawcircle",title:function(e){return _(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:Icons$1.drawcircle,click:handleCartesian},modeBarButtons$2.eraseshape={name:"eraseshape",title:function(e){return _(e,"Erase active shape")},icon:Icons$1.eraseshape,click:eraseActiveShape},modeBarButtons$2.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return _(e,"Zoom in")},attr:"zoom",val:"in",icon:Icons$1.zoom_plus,click:handleCartesian},modeBarButtons$2.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return _(e,"Zoom out")},attr:"zoom",val:"out",icon:Icons$1.zoom_minus,click:handleCartesian},modeBarButtons$2.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return _(e,"Autoscale")},attr:"zoom",val:"auto",icon:Icons$1.autoscale,click:handleCartesian},modeBarButtons$2.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return _(e,"Reset axes")},attr:"zoom",val:"reset",icon:Icons$1.home,click:handleCartesian},modeBarButtons$2.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return _(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:Icons$1.tooltip_basic,gravity:"ne",click:handleCartesian},modeBarButtons$2.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return _(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:Icons$1.tooltip_compare,gravity:"ne",click:handleCartesian},modeBarButtons$2.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return _(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:Icons$1.zoombox,click:handleDrag3d},modeBarButtons$2.pan3d={name:"pan3d",_cat:"pan",title:function(e){return _(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:Icons$1.pan,click:handleDrag3d},modeBarButtons$2.orbitRotation={name:"orbitRotation",title:function(e){return _(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:Icons$1["3d_rotate"],click:handleDrag3d},modeBarButtons$2.tableRotation={name:"tableRotation",title:function(e){return _(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:Icons$1["z-axis"],click:handleDrag3d},modeBarButtons$2.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return _(e,"Reset camera to default")},attr:"resetDefault",icon:Icons$1.home,click:handleCamera3d},modeBarButtons$2.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return _(e,"Reset camera to last save")},attr:"resetLastSave",icon:Icons$1.movie,click:handleCamera3d},modeBarButtons$2.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return _(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Icons$1.tooltip_basic,gravity:"ne",click:handleHover3d},modeBarButtons$2.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return _(e,"Zoom in")},attr:"zoom",val:"in",icon:Icons$1.zoom_plus,click:handleGeo},modeBarButtons$2.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return _(e,"Zoom out")},attr:"zoom",val:"out",icon:Icons$1.zoom_minus,click:handleGeo},modeBarButtons$2.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return _(e,"Reset")},attr:"reset",val:null,icon:Icons$1.autoscale,click:handleGeo},modeBarButtons$2.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return _(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Icons$1.tooltip_basic,gravity:"ne",click:toggleHover},modeBarButtons$2.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return _(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Icons$1.tooltip_basic,gravity:"ne",click:toggleHover},modeBarButtons$2.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return _(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:Icons$1.tooltip_basic,gravity:"ne",click:toggleHover},modeBarButtons$2.resetViewSankey={name:"resetSankeyGroup",title:function(e){return _(e,"Reset view")},icon:Icons$1.home,click:function(e){for(var t={"node.groups":[],"node.x":[],"node.y":[]},r=0;r<e._fullData.length;r++){var n=e._fullData[r]._viewInitial;t["node.groups"].push(n.node.groups.slice()),t["node.x"].push(n.node.x.slice()),t["node.y"].push(n.node.y.slice())}Registry$x.call("restyle",e,t)}},modeBarButtons$2.toggleHover={name:"toggleHover",title:function(e){return _(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Icons$1.tooltip_basic,gravity:"ne",click:function(e,t){var r=getNextHover3d(e,t);r.hovermode=getNextHover(e),Registry$x.call("_guiRelayout",e,r)}},modeBarButtons$2.resetViews={name:"resetViews",title:function(e){return _(e,"Reset views")},icon:Icons$1.home,click:function(e,t){var r=t.currentTarget;r.setAttribute("data-attr","zoom"),r.setAttribute("data-val","reset"),handleCartesian(e,t),r.setAttribute("data-attr","resetLastSave"),handleCamera3d(e,t),resetView(e,"geo"),resetView(e,"mapbox")}},modeBarButtons$2.toggleSpikelines={name:"toggleSpikelines",title:function(e){return _(e,"Toggle Spike Lines")},icon:Icons$1.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout,r=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled="on"===r?"off":"on",Registry$x.call("_guiRelayout",e,setSpikelineVisibility(e))}},modeBarButtons$2.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return _(e,"Reset view")},attr:"reset",icon:Icons$1.home,click:function(e){resetView(e,"mapbox")}},modeBarButtons$2.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return _(e,"Zoom in")},attr:"zoom",val:"in",icon:Icons$1.zoom_plus,click:handleMapboxZoom},modeBarButtons$2.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return _(e,"Zoom out")},attr:"zoom",val:"out",icon:Icons$1.zoom_minus,click:handleMapboxZoom};var modeBarButtons$1=buttonsExports,buttonList=Object.keys(modeBarButtons$1),DRAW_MODES$1=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],backButtons=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(DRAW_MODES$1),foreButtons=[],addToForeButtons=function(e){if(-1===backButtons.indexOf(e._cat||e.name)){var t=e.name,r=(e._cat||e.name).toLowerCase();-1===foreButtons.indexOf(t)&&foreButtons.push(t),-1===foreButtons.indexOf(r)&&foreButtons.push(r)}};buttonList.forEach((function(e){addToForeButtons(modeBarButtons$1[e])})),foreButtons.sort();var constants$v={DRAW_MODES:DRAW_MODES$1,backButtons:backButtons,foreButtons:foreButtons},constants$u=constants$v,attributes$B={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar",description:"Sets the orientation of the modebar."},bgcolor:{valType:"color",editType:"modebar",description:"Sets the background color of the modebar."},color:{valType:"color",editType:"modebar",description:"Sets the color of the icons in the modebar."},activecolor:{valType:"color",editType:"modebar",description:"Sets the color of the active or hovered on icons in the modebar."},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes related to the modebar,","including `hovermode`, `dragmode`, and `showspikes` at both the","root level and inside subplots. Defaults to `layout.uirevision`."].join(" ")},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar",description:["Determines which predefined modebar buttons to add.","Please note that these buttons will only be shown if they are","compatible with all trace types used in a graph.","Similar to `config.modeBarButtonsToAdd` option.","This may include *"+constants$u.backButtons.join("*, *")+"*."].join(" ")},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar",description:["Determines which predefined modebar buttons to remove.","Similar to `config.modeBarButtonsToRemove` option.","This may include *"+constants$u.foreButtons.join("*, *")+"*."].join(" ")}},Lib$16=libExports,Color$p=colorExports,Template$4=plot_template,attributes$A=attributes$B,defaults$i=function(e,t){var r=e.modebar||{},n=Template$4.newContainer(t,"modebar");function i(e,t){return Lib$16.coerce(r,n,attributes$A,e,t)}i("orientation"),i("bgcolor",Color$p.addOpacity(t.paper_bgcolor,.5));var a=Color$p.contrast(Color$p.rgb(t.modebar.bgcolor));i("color",Color$p.addOpacity(a,.3)),i("activecolor",Color$p.addOpacity(a,.7)),i("uirevision",t.uirevision),i("add"),i("remove")},d3$g=d3Exports,isNumeric$d=fastIsnumeric,Lib$15=libExports,Icons=ploticon,version$1=version$2.version,Parser=new DOMParser;function ModeBar(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}var proto$3=ModeBar.prototype;function jsVersion(e){return e+" (v"+version$1+")"}function createModeBar$1(e,t){var r=e._fullLayout,n=new ModeBar({graphInfo:e,container:r._modebardiv.node(),buttons:t});return r._privateplot&&d3$g.select(n.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),n}proto$3.update=function(e,t){this.graphInfo=e;var r=this.graphInfo._context,n=this.graphInfo._fullLayout,i="modebar-"+n._uid;this.element.setAttribute("id",i),this._uid=i,this.element.className="modebar","hover"===r.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===n.modebar.orientation&&(this.element.className+=" vertical",t=t.reverse());var a=n.modebar,o="hover"===r.displayModeBar?".js-plotly-plot .plotly:hover ":"";Lib$15.deleteRelatedStyleRule(i),Lib$15.addRelatedStyleRule(i,o+"#"+i+" .modebar-group","background-color: "+a.bgcolor),Lib$15.addRelatedStyleRule(i,"#"+i+" .modebar-btn .icon path","fill: "+a.color),Lib$15.addRelatedStyleRule(i,"#"+i+" .modebar-btn:hover .icon path","fill: "+a.activecolor),Lib$15.addRelatedStyleRule(i,"#"+i+" .modebar-btn.active .icon path","fill: "+a.activecolor);var s=!this.hasButtons(t),l=this.hasLogo!==r.displaylogo,c=this.locale!==r.locale;if(this.locale=r.locale,(s||l||c)&&(this.removeAllButtons(),this.updateButtons(t),r.watermark||r.displaylogo)){var u=this.getLogo();r.watermark&&(u.className=u.className+" watermark"),"v"===n.modebar.orientation?this.element.insertBefore(u,this.element.childNodes[0]):this.element.appendChild(u),this.hasLogo=!0}this.updateActiveButton()},proto$3.updateButtons=function(e){var t=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach((function(e){var r=t.createGroup();e.forEach((function(e){var n=e.name;if(!n)throw new Error("must provide button 'name' in button config");if(-1!==t.buttonsNames.indexOf(n))throw new Error("button name '"+n+"' is taken");t.buttonsNames.push(n);var i=t.createButton(e);t.buttonElements.push(i),r.appendChild(i)})),t.element.appendChild(r)}))},proto$3.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e},proto$3.createButton=function(e){var t=this,r=document.createElement("a");r.setAttribute("rel","tooltip"),r.className="modebar-btn";var n=e.title;void 0===n?n=e.name:"function"==typeof n&&(n=n(this.graphInfo)),(n||0===n)&&r.setAttribute("data-title",n),void 0!==e.attr&&r.setAttribute("data-attr",e.attr);var i=e.val;if(void 0!==i&&("function"==typeof i&&(i=i(this.graphInfo)),r.setAttribute("data-val",i)),"function"!=typeof e.click)throw new Error("must provide button 'click' function in button config");r.addEventListener("click",(function(r){e.click(t.graphInfo,r),t.updateActiveButton(r.currentTarget)})),r.setAttribute("data-toggle",e.toggle||!1),e.toggle&&d3$g.select(r).classed("active",!0);var a=e.icon;return"function"==typeof a?r.appendChild(a()):r.appendChild(this.createIcon(a||Icons.question)),r.setAttribute("data-gravity",e.gravity||"n"),r},proto$3.createIcon=function(e){var t,r=isNumeric$d(e.height)?Number(e.height):e.ascent-e.descent,n="http://www.w3.org/2000/svg";if(e.path){(t=document.createElementNS(n,"svg")).setAttribute("viewBox",[0,0,e.width,r].join(" ")),t.setAttribute("class","icon");var i=document.createElementNS(n,"path");i.setAttribute("d",e.path),e.transform?i.setAttribute("transform",e.transform):void 0!==e.ascent&&i.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),t.appendChild(i)}e.svg&&(t=Parser.parseFromString(e.svg,"application/xml").childNodes[0]);return t.setAttribute("height","1em"),t.setAttribute("width","1em"),t},proto$3.updateActiveButton=function(e){var t=this.graphInfo._fullLayout,r=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach((function(e){var n=e.getAttribute("data-val")||!0,i=e.getAttribute("data-attr"),a="true"===e.getAttribute("data-toggle"),o=d3$g.select(e);if(a)i===r&&o.classed("active",!o.classed("active"));else{var s=null===i?i:Lib$15.nestedProperty(t,i).get();o.classed("active",s===n)}}))},proto$3.hasButtons=function(e){var t=this.buttons;if(!t)return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r){if(e[r].length!==t[r].length)return!1;for(var n=0;n<e[r].length;n++)if(e[r][n].name!==t[r][n].name)return!1}return!0},proto$3.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plotly.com/",t.target="_blank",t.setAttribute("data-title",jsVersion(Lib$15._(this.graphInfo,"Produced with Plotly.js"))),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(Icons.newplotlylogo)),e.appendChild(t),e},proto$3.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},proto$3.destroy=function(){Lib$15.removeElement(this.container.querySelector(".modebar")),Lib$15.deleteRelatedStyleRule(this._uid)};var modebar$1=createModeBar$1,axisIds$5=axis_ids,scatterSubTypes=subtypes$3,Registry$w=registry,isUnifiedHover=helpers$y.isUnifiedHover,createModeBar=modebar$1,modeBarButtons=buttonsExports,DRAW_MODES=constants$v.DRAW_MODES,extendDeep$1=libExports.extendDeep,manage=function(e){var t=e._fullLayout,r=e._context,n=t._modeBar;if(r.displayModeBar||r.watermark){if(!Array.isArray(r.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(r.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var i,a=r.modeBarButtons;i=Array.isArray(a)&&a.length?fillCustomButton(a):!r.displayModeBar&&r.watermark?[]:getButtonGroups(e),n?n.update(e,i):t._modeBar=createModeBar(e,i)}else n&&(n.destroy(),delete t._modeBar)};function getButtonGroups(e){var t=e._fullLayout,r=e._fullData,n=e._context;function i(e,t){if("string"==typeof t){if(t.toLowerCase()===e.toLowerCase())return!0}else{var r=t.name,n=t._cat||t.name;if(r===e||n===e.toLowerCase())return!0}return!1}var a=t.modebar.add;"string"==typeof a&&(a=[a]);var o=t.modebar.remove;"string"==typeof o&&(o=[o]);var s=n.modeBarButtonsToAdd.concat(a.filter((function(e){for(var t=0;t<n.modeBarButtonsToRemove.length;t++)if(i(e,n.modeBarButtonsToRemove[t]))return!1;return!0}))),l=n.modeBarButtonsToRemove.concat(o.filter((function(e){for(var t=0;t<n.modeBarButtonsToAdd.length;t++)if(i(e,n.modeBarButtonsToAdd[t]))return!1;return!0}))),c=t._has("cartesian"),u=t._has("gl3d"),d=t._has("geo"),h=t._has("pie"),g=t._has("funnelarea"),p=t._has("gl2d"),f=t._has("ternary"),m=t._has("mapbox"),y=t._has("polar"),b=t._has("smith"),v=t._has("sankey"),x=areAllAxesFixed(t),B=isUnifiedHover(t.hovermode),I=[];function F(e){if(e.length){for(var t=[],r=0;r<e.length;r++){for(var n=e[r],i=modeBarButtons[n],a=i.name.toLowerCase(),o=(i._cat||i.name).toLowerCase(),s=!1,c=0;c<l.length;c++){var u=l[c].toLowerCase();if(u===a||u===o){s=!0;break}}s||t.push(modeBarButtons[n])}I.push(t)}}var A=["toImage"];n.showEditInChartStudio?A.push("editInChartStudio"):n.showSendToCloud&&A.push("sendDataToCloud"),F(A);var C=[],w=[],Q=[],U=[];(c||p||h||g||f)+d+u+m+y+b>1?(w=["toggleHover"],Q=["resetViews"]):d?(C=["zoomInGeo","zoomOutGeo"],w=["hoverClosestGeo"],Q=["resetGeo"]):u?(w=["hoverClosest3d"],Q=["resetCameraDefault3d","resetCameraLastSave3d"]):m?(C=["zoomInMapbox","zoomOutMapbox"],w=["toggleHover"],Q=["resetViewMapbox"]):p?w=["hoverClosestGl2d"]:h?w=["hoverClosestPie"]:v?(w=["hoverClosestCartesian","hoverCompareCartesian"],Q=["resetViewSankey"]):w=["toggleHover"],c&&(w=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(hasNoHover(r)||B)&&(w=[]),!c&&!p||x||(C=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==Q[0]&&(Q=["resetScale2d"])),u?U=["zoom3d","pan3d","orbitRotation","tableRotation"]:(c||p)&&!x||f?U=["zoom2d","pan2d"]:m||d?U=["pan2d"]:y&&(U=["zoom2d"]),isSelectable(r)&&U.push("select2d","lasso2d");var S=[],E=function(e){-1===S.indexOf(e)&&-1!==w.indexOf(e)&&S.push(e)};if(Array.isArray(s)){for(var L=[],_=0;_<s.length;_++){var T=s[_];"string"==typeof T?(T=T.toLowerCase(),-1!==DRAW_MODES.indexOf(T)?(t._has("mapbox")||t._has("cartesian"))&&U.push(T):"togglespikelines"===T?E("toggleSpikelines"):"togglehover"===T?E("toggleHover"):"hovercompare"===T?E("hoverCompareCartesian"):"hoverclosest"===T?(E("hoverClosestCartesian"),E("hoverClosestGeo"),E("hoverClosest3d"),E("hoverClosestGl2d"),E("hoverClosestPie")):"v1hovermode"===T&&(E("toggleHover"),E("hoverClosestCartesian"),E("hoverCompareCartesian"),E("hoverClosestGeo"),E("hoverClosest3d"),E("hoverClosestGl2d"),E("hoverClosestPie"))):L.push(T)}s=L}return F(U),F(C.concat(Q)),F(S),appendButtonsToGroups(I,s)}function areAllAxesFixed(e){for(var t=axisIds$5.list({_fullLayout:e},null,!0),r=0;r<t.length;r++)if(!t[r].fixedrange)return!1;return!0}function isSelectable(e){for(var t=!1,r=0;r<e.length&&!t;r++){var n=e[r];n._module&&n._module.selectPoints&&(Registry$w.traceIs(n,"scatter-like")?(scatterSubTypes.hasMarkers(n)||scatterSubTypes.hasText(n))&&(t=!0):Registry$w.traceIs(n,"box-violin")&&"all"!==n.boxpoints&&"all"!==n.points||(t=!0))}return t}function hasNoHover(e){for(var t=0;t<e.length;t++)if(!Registry$w.traceIs(e[t],"noHover"))return!1;return!0}function appendButtonsToGroups(e,t){if(t.length)if(Array.isArray(t[0]))for(var r=0;r<t.length;r++)e.push(t[r]);else e.push(t);return e}function fillCustomButton(e){for(var t=extendDeep$1([],e),r=0;r<t.length;r++)for(var n=t[r],i=0;i<n.length;i++){var a=n[i];if("string"==typeof a){if(void 0===modeBarButtons[a])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));t[r][i]=modeBarButtons[a]}}return t}var modebar={moduleType:"component",name:"modebar",layoutAttributes:attributes$B,supplyLayoutDefaults:defaults$i,manage:manage},constraints={},FROM_BL$1=alignment$1.FROM_BL,scale_zoom=function(e,t,r){void 0===r&&(r=FROM_BL$1[e.constraintoward||"center"]);var n=[e.r2l(e.range[0]),e.r2l(e.range[1])],i=n[0]+(n[1]-n[0])*r;e.range=e._input.range=[e.l2r(i+(n[0]-i)*t),e.l2r(i+(n[1]-i)*t)],e.setScale()},Lib$14=libExports,autorange=requireAutorange(),id2name=axis_ids.id2name,layoutAttributes$3=layout_attributes$3,scaleZoom$1=scale_zoom,setConvert$1=set_convert,ALMOST_EQUAL=numerical.ALMOST_EQUAL,FROM_BL=alignment$1.FROM_BL;function handleOneAxDefaults(e,t,r){var n=r.axIds,i=r.layoutOut,a=r.hasImage,o=i._axisConstraintGroups,s=i._axisMatchGroups,l=t._id,c=l.charAt(0),u=((i._splomAxes||{})[c]||{})[l]||{},d=t._id,h="x"===d.charAt(0);function g(r,n){return Lib$14.coerce(e,t,layoutAttributes$3,r,n)}t._matchGroup=null,t._constraintGroup=null,g("constrain",a?"domain":"range"),Lib$14.coerce(e,t,{constraintoward:{valType:"enumerated",values:h?["left","center","right"]:["bottom","middle","top"],dflt:h?"center":"middle"}},"constraintoward");var p,f,m=t.type,y=[];for(p=0;p<n.length;p++){if((f=n[p])!==d)i[id2name(f)].type===m&&y.push(f)}var b=getConstraintGroup(o,d);if(b){var v=[];for(p=0;p<y.length;p++)b[f=y[p]]||v.push(f);y=v}var x,B,I=y.length;I&&(e.matches||u.matches)&&(x=Lib$14.coerce(e,t,{matches:{valType:"enumerated",values:y,dflt:-1!==y.indexOf(u.matches)?u.matches:void 0}},"matches"));var F=a&&!h?t.anchor:void 0;if(I&&!x&&(e.scaleanchor||F)&&(B=Lib$14.coerce(e,t,{scaleanchor:{valType:"enumerated",values:y}},"scaleanchor",F)),x){t._matchGroup=updateConstraintGroups(s,d,x,1);var A=i[id2name(x)],C=extent(i,t)/extent(i,A);h!==("x"===x.charAt(0))&&(C=(h?"x":"y")+C),updateConstraintGroups(o,d,x,C)}else e.matches&&-1!==n.indexOf(e.matches)&&Lib$14.warn("ignored "+t._name+'.matches: "'+e.matches+'" to avoid an infinite loop');if(B){var w=g("scaleratio");w||(w=t.scaleratio=1),updateConstraintGroups(o,d,B,w)}else e.scaleanchor&&-1!==n.indexOf(e.scaleanchor)&&Lib$14.warn("ignored "+t._name+'.scaleanchor: "'+e.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function extent(e,t){var r=t.domain;return r||(r=e[id2name(t.overlaying)].domain),r[1]-r[0]}function getConstraintGroup(e,t){for(var r=0;r<e.length;r++)if(e[r][t])return e[r];return null}function updateConstraintGroups(e,t,r,n){var i,a,o,s,l,c=getConstraintGroup(e,t);null===c?((c={})[t]=1,l=e.length,e.push(c)):l=e.indexOf(c);var u=Object.keys(c);for(i=0;i<e.length;i++)if(o=e[i],i!==l&&o[r]){var d=o[r];for(a=0;a<u.length;a++)o[s=u[a]]=multiplyScales(d,multiplyScales(n,c[s]));return void e.splice(l,1)}if(1!==n)for(a=0;a<u.length;a++){var h=u[a];c[h]=multiplyScales(n,c[h])}c[r]=1}function multiplyScales(e,t){var r,n,i="",a="";"string"==typeof e&&(r=(i=e.match(/^[xy]*/)[0]).length,e=+e.substr(r)),"string"==typeof t&&(n=(a=t.match(/^[xy]*/)[0]).length,t=+t.substr(n));var o=e*t;return r||n?r&&n&&i.charAt(0)!==a.charAt(0)?r===n?o:(r>n?i.substr(n):a.substr(r))+o:i+a+e*t:o}function finalRatios(e,t){for(var r=t._size,n=r.h/r.w,i={},a=Object.keys(e),o=0;o<a.length;o++){var s=a[o],l=e[s];if("string"==typeof l){var c=l.match(/^[xy]*/)[0],u=c.length;l=+l.substr(u);for(var d="y"===c.charAt(0)?n:1/n,h=0;h<u;h++)l*=d}i[s]=l}return i}function updateDomain(e,t){var r=e._inputDomain,n=FROM_BL[e.constraintoward],i=r[0]+(r[1]-r[0])*n;e.domain=e._input.domain=[i+(r[0]-i)/t,i+(r[1]-i)/t],e.setScale()}constraints.handleDefaults=function(e,t,r){var n,i,a,o,s,l,c,u,d=r.axIds,h=r.axHasImage,g=t._axisConstraintGroups=[],p=t._axisMatchGroups=[];for(n=0;n<d.length;n++)handleOneAxDefaults(s=e[o=id2name(d[n])],l=t[o],{axIds:d,layoutOut:t,hasImage:h[o]});function f(e,r){for(n=0;n<e.length;n++)for(a in i=e[n])t[id2name(a)][r]=i}for(f(p,"_matchGroup"),n=0;n<g.length;n++)for(a in i=g[n])if((l=t[id2name(a)]).fixedrange){for(var m in i){var y=id2name(m);!1===(e[y]||{}).fixedrange&&Lib$14.warn("fixedrange was specified as false for axis "+y+" but was overridden because another axis in its constraint group has fixedrange true"),t[y].fixedrange=!0}break}for(n=0;n<g.length;){for(a in i=g[n]){(l=t[id2name(a)])._matchGroup&&Object.keys(l._matchGroup).length===Object.keys(i).length&&(g.splice(n,1),n--);break}n++}f(g,"_constraintGroup");var b=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],v=!1,x=!1;function B(){u=l[c],"rangebreaks"===c&&(x=l._hasDayOfWeekBreaks)}for(n=0;n<p.length;n++){i=p[n];for(var I=0;I<b.length;I++){var F;for(a in c=b[I],u=null,i)if(s=e[o=id2name(a)],l=t[o],c in l){if(!l.matches&&(F=l,c in s)){B();break}null===u&&c in s&&B()}if("range"===c&&u&&(v=!0),"autorange"===c&&null===u&&v&&(u=!1),null===u&&c in F&&(u=F[c]),null!==u)for(a in i)(l=t[id2name(a)])[c]="range"===c?u.slice():u,"rangebreaks"===c&&(l._hasDayOfWeekBreaks=x,setConvert$1(l,t))}}},constraints.enforce=function(e){var t,r,n,i,a,o,s,l,c=e._fullLayout,u=c._axisConstraintGroups||[];for(t=0;t<u.length;t++){n=finalRatios(u[t],c);var d=Object.keys(n),h=1/0,g=0,p=1/0,f={},m={},y=!1;for(r=0;r<d.length;r++)m[i=d[r]]=a=c[id2name(i)],a._inputDomain?a.domain=a._inputDomain.slice():a._inputDomain=a.domain.slice(),a._inputRange||(a._inputRange=a.range.slice()),a.setScale(),f[i]=o=Math.abs(a._m)/n[i],h=Math.min(h,o),"domain"!==a.constrain&&a._constraintShrinkable||(p=Math.min(p,o)),delete a._constraintShrinkable,g=Math.max(g,o),"domain"===a.constrain&&(y=!0);if(!(h>ALMOST_EQUAL*g)||y)for(r=0;r<d.length;r++)if(o=f[i=d[r]],s=(a=m[i]).constrain,o!==p||"domain"===s)if(l=o/p,"range"===s)scaleZoom$1(a,l);else{var b=a._inputDomain,v=(a.domain[1]-a.domain[0])/(b[1]-b[0]),x=(a.r2l(a.range[1])-a.r2l(a.range[0]))/(a.r2l(a._inputRange[1])-a.r2l(a._inputRange[0]));if((l/=v)*x<1){a.domain=a._input.domain=b.slice(),scaleZoom$1(a,l);continue}if(x<1&&(a.range=a._input.range=a._inputRange.slice(),l*=x),a.autorange){var B=a.r2l(a.range[0]),I=a.r2l(a.range[1]),F=(B+I)/2,A=F,C=F,w=Math.abs(I-F),Q=F-w*l*1.0001,U=F+w*l*1.0001,S=autorange.makePadFn(c,a,0),E=autorange.makePadFn(c,a,1);updateDomain(a,l);var L,_,T=Math.abs(a._m),R=autorange.concatExtremes(e,a),$=R.min,k=R.max;for(_=0;_<$.length;_++)(L=$[_].val-S($[_])/T)>Q&&L<A&&(A=L);for(_=0;_<k.length;_++)(L=k[_].val+E(k[_])/T)<U&&L>C&&(C=L);l/=(C-A)/(2*w),A=a.l2r(A),C=a.l2r(C),a.range=a._input.range=B<I?[A,C]:[C,A]}updateDomain(a,l)}}},constraints.getAxisGroup=function(e,t){for(var r=e._axisMatchGroups,n=0;n<r.length;n++){if(r[n][t])return"g"+n}return t},constraints.clean=function(e,t){if(t._inputDomain){for(var r=!1,n=t._id,i=e._fullLayout._axisConstraintGroups,a=0;a<i.length;a++)if(i[a][n]){r=!0;break}r&&"domain"===t.constrain||(t._input.domain=t.domain=t._inputDomain,delete t._inputDomain)}},function(e){var t=d3Exports,r=registry,n=plotsExports,i=libExports,a=svg_text_utils,o=clear_gl_canvases,s=colorExports,l=drawingExports,c=titles,u=modebar,d=axesExports,h=alignment$1,g=constraints,p=g.enforce,f=g.clean,m=requireAutorange().doAutoRange,y="start",b="middle",v="end";function x(e,t,r){for(var n=0;n<r.length;n++){var i=r[n][0],a=r[n][1];if(!(i[0]>=e[1]||i[1]<=e[0])&&(a[0]<t[1]&&a[1]>t[0]))return!0}return!1}function B(r){var a,o,c,g,p,f,m=r._fullLayout,y=m._size,b=y.p,v=d.list(r,"",!0);if(m._paperdiv.style({width:r._context.responsive&&m.autosize&&!r._context._hasZeroWidth&&!r.layout.width?"100%":m.width+"px",height:r._context.responsive&&m.autosize&&!r._context._hasZeroHeight&&!r.layout.height?"100%":m.height+"px"}).selectAll(".main-svg").call(l.setSize,m.width,m.height),r._context.setBackground(r,m.paper_bgcolor),e.drawMainTitle(r),u.manage(r),!m._has("cartesian"))return n.previousPromises(r);function B(e,t,r){var n=e._lw/2;return"x"===e._id.charAt(0)?t?"top"===r?t._offset-b-n:t._offset+t._length+b+n:y.t+y.h*(1-(e.position||0))+n%1:t?"right"===r?t._offset+t._length+b+n:t._offset-b-n:y.l+y.w*(e.position||0)+n%1}for(a=0;a<v.length;a++){var F=(g=v[a])._anchorAxis;g._linepositions={},g._lw=l.crispRound(r,g.linewidth,1),g._mainLinePosition=B(g,F,g.side),g._mainMirrorPosition=g.mirror&&F?B(g,F,h.OPPOSITE_SIDE[g.side]):null}var C=[],w=[],Q=[],U=1===s.opacity(m.paper_bgcolor)&&1===s.opacity(m.plot_bgcolor)&&m.paper_bgcolor===m.plot_bgcolor;for(o in m._plots)if((c=m._plots[o]).mainplot)c.bg&&c.bg.remove(),c.bg=void 0;else{var S=c.xaxis.domain,E=c.yaxis.domain,L=c.plotgroup;if(x(S,E,Q)){var _=L.node(),T=c.bg=i.ensureSingle(L,"rect","bg");_.insertBefore(T.node(),_.childNodes[0]),w.push(o)}else L.select("rect.bg").remove(),Q.push([S,E]),U||(C.push(o),w.push(o))}var R,$,k,N,G,M,D,V,H,X,O,Z,W,Y=m._bgLayer.selectAll(".bg").data(C);for(Y.enter().append("rect").classed("bg",!0),Y.exit().remove(),Y.each((function(e){m._plots[e].bg=t.select(this)})),a=0;a<w.length;a++)c=m._plots[w[a]],p=c.xaxis,f=c.yaxis,c.bg&&void 0!==p._offset&&void 0!==f._offset&&c.bg.call(l.setRect,p._offset-b,f._offset-b,p._length+2*b,f._length+2*b).call(s.fill,m.plot_bgcolor).style("stroke-width",0);if(!m._hasOnlyLargeSploms)for(o in m._plots){c=m._plots[o],p=c.xaxis,f=c.yaxis;var P,z,J=c.clipId="clip"+m._uid+o+"plot",j=i.ensureSingleById(m._clips,"clipPath",J,(function(e){e.classed("plotclip",!0).append("rect")}));c.clipRect=j.select("rect").attr({width:p._length,height:f._length}),l.setTranslate(c.plot,p._offset,f._offset),c._hasClipOnAxisFalse?(P=null,z=J):(P=J,z=null),l.setClipUrl(c.plot,P,r),c.layerClipId=z}function K(e){return"M"+R+","+e+"H"+$}function q(e){return"M"+p._offset+","+e+"h"+p._length}function ee(e){return"M"+e+","+V+"V"+D}function te(e){return void 0!==f._shift&&(e+=f._shift),"M"+e+","+f._offset+"v"+f._length}function re(e,t,r){if(!e.showline||o!==e._mainSubplot)return"";if(!e._anchorAxis)return r(e._mainLinePosition);var n=t(e._mainLinePosition);return e.mirror&&(n+=t(e._mainMirrorPosition)),n}for(o in m._plots){c=m._plots[o],p=c.xaxis,f=c.yaxis;var ne="M0,0";I(p,o)&&(G=A(p,"left",f,v),R=p._offset-(G?b+G:0),M=A(p,"right",f,v),$=p._offset+p._length+(M?b+M:0),k=B(p,f,"bottom"),N=B(p,f,"top"),!(W=!p._anchorAxis||o!==p._mainSubplot)||"allticks"!==p.mirror&&"all"!==p.mirror||(p._linepositions[o]=[k,N]),ne=re(p,K,q),W&&p.showline&&("all"===p.mirror||"allticks"===p.mirror)&&(ne+=K(k)+K(N)),c.xlines.style("stroke-width",p._lw+"px").call(s.stroke,p.showline?p.linecolor:"rgba(0,0,0,0)")),c.xlines.attr("d",ne);var ie="M0,0";I(f,o)&&(O=A(f,"bottom",p,v),D=f._offset+f._length+(O?b:0),Z=A(f,"top",p,v),V=f._offset-(Z?b:0),H=B(f,p,"left"),X=B(f,p,"right"),!(W=!f._anchorAxis||o!==f._mainSubplot)||"allticks"!==f.mirror&&"all"!==f.mirror||(f._linepositions[o]=[H,X]),ie=re(f,ee,te),W&&f.showline&&("all"===f.mirror||"allticks"===f.mirror)&&(ie+=ee(H)+ee(X)),c.ylines.style("stroke-width",f._lw+"px").call(s.stroke,f.showline?f.linecolor:"rgba(0,0,0,0)")),c.ylines.attr("d",ie)}return d.makeClipPaths(r),n.previousPromises(r)}function I(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||"all"===e.mirror||"allticks"===e.mirror)}function F(e,t,r){if(!r.showline||!r._lw)return!1;if("all"===r.mirror||"allticks"===r.mirror)return!0;var n=r._anchorAxis;if(!n)return!1;var i=h.FROM_BL[t];return r.side===t?n.domain[i]===e.domain[i]:r.mirror&&n.domain[1-i]===e.domain[1-i]}function A(e,t,r,n){if(F(e,t,r))return r._lw;for(var i=0;i<n.length;i++){var a=n[i];if(a._mainAxis===r._mainAxis&&F(e,t,a))return a._lw}return 0}function C(e){return"top"===e?h.CAP_SHIFT+.3+"em":"bottom"===e?"-0.3em":h.MID_SHIFT+"em"}e.layoutStyles=function(e){return i.syncOrAsync([n.doAutoMargin,B],e)},e.drawMainTitle=function(e){var r=e._fullLayout.title,o=e._fullLayout,s=function(e){var t=e.title,r=b;i.isRightAnchor(t)?r=v:i.isLeftAnchor(t)&&(r=y);return r}(o),u=function(e){var t=e.title,r="0em";i.isTopAnchor(t)?r=h.CAP_SHIFT+"em":i.isMiddleAnchor(t)&&(r=h.MID_SHIFT+"em");return r}(o),d=function(e,t){var r=e.title,n=e._size,i=0;"0em"!==t&&t?t===h.CAP_SHIFT+"em"&&(i=r.pad.t):i=-r.pad.b;return"auto"===r.y?n.t/2:"paper"===r.yref?n.t+n.h-n.h*r.y+i:e.height-e.height*r.y+i}(o,u),g=function(e,t){var r=e.title,n=e._size,i=0;t===y?i=r.pad.l:t===v&&(i=-r.pad.r);if("paper"===r.xref)return n.l+n.w*r.x+i;return e.width*r.x+i}(o,s);if(c.draw(e,"gtitle",{propContainer:o,propName:"title.text",placeholder:o._dfltTitle.plot,attributes:{x:g,y:d,"text-anchor":s,dy:u}}),r.text&&r.automargin){var p=t.selectAll(".gtitle"),f=l.bBox(p.node()).height,m=function(e,t,r){var n=t.y,i=t.yanchor,a=n>.5?"t":"b",o=e._fullLayout.margin[a],s=0;"paper"===t.yref?s=r+t.pad.t+t.pad.b:"container"===t.yref&&(s=function(e,t,r,n,i){var a=0;"middle"===r&&(a+=i/2);"t"===e?("top"===r&&(a+=i),a+=n-t*n):("bottom"===r&&(a+=i),a+=t*n);return a}(a,n,i,e._fullLayout.height,r)+t.pad.t+t.pad.b);if(s>o)return s;return 0}(e,r,f);m>0&&(!function(e,t,r,a){var o="title.automargin",s=e._fullLayout.title,l=s.y>.5?"t":"b",c={x:s.x,y:s.y,t:0,b:0},u={};"paper"===s.yref&&function(e,t,r,n,a){var o="paper"===t.yref?e._fullLayout._size.h:e._fullLayout.height,s=i.isTopAnchor(t)?n:n-a,l="b"===r?o-s:s;return!(i.isTopAnchor(t)&&"t"===r||i.isBottomAnchor(t)&&"b"===r)&&l<a}(e,s,l,t,a)?c[l]=r:"container"===s.yref&&(u[l]=r,e._fullLayout._reservedMargin[o]=u);n.allowAutoMargin(e,o),n.autoMargin(e,o,c)}(e,d,m,f),p.attr({x:g,y:d,"text-anchor":s,dy:C(r.yanchor)}).call(a.positionText,g,d))}},e.doTraceStyle=function(t){var i,a=t.calcdata,s=[];for(i=0;i<a.length;i++){var l=a[i],c=l[0]||{},u=c.trace||{},d=u._module||{},h=d.arraysToCalcdata;h&&h(l,u);var g=d.editStyle;g&&s.push({fn:g,cd0:c})}if(s.length){for(i=0;i<s.length;i++){var p=s[i];p.fn(t,p.cd0)}o(t),e.redrawReglTraces(t)}return n.style(t),r.getComponentMethod("legend","draw")(t),n.previousPromises(t)},e.doColorBars=function(e){return r.getComponentMethod("colorbar","draw")(e),n.previousPromises(e)},e.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,r.call("_doPlot",e,"",t)},e.doLegend=function(e){return r.getComponentMethod("legend","draw")(e),n.previousPromises(e)},e.doTicksRelayout=function(t){return d.draw(t,"redraw"),t._fullLayout._hasOnlyLargeSploms&&(r.subplotsRegistry.splom.updateGrid(t),o(t),e.redrawReglTraces(t)),e.drawMainTitle(t),n.previousPromises(t)},e.doModeBar=function(e){var t=e._fullLayout;u.manage(e);for(var r=0;r<t._basePlotModules.length;r++){var i=t._basePlotModules[r].updateFx;i&&i(e)}return n.previousPromises(e)},e.doCamera=function(e){for(var t=e._fullLayout,r=t._subplots.gl3d,n=0;n<r.length;n++){var i=t[r[n]];i._scene.setViewport(i)}},e.drawData=function(t){var i=t._fullLayout;o(t);for(var a=i._basePlotModules,s=0;s<a.length;s++)a[s].plot(t);return e.redrawReglTraces(t),n.style(t),r.getComponentMethod("selections","draw")(t),r.getComponentMethod("shapes","draw")(t),r.getComponentMethod("annotations","draw")(t),r.getComponentMethod("images","draw")(t),i._replotting=!1,n.previousPromises(t)},e.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var r,n,a=e._fullData,o=[],s=[];for(t._hasOnlyLargeSploms&&t._splomGrid.draw(),r=0;r<a.length;r++){var l=a[r];!0===l.visible&&0!==l._length&&("splom"===l.type?t._splomScenes[l.uid].draw():"scattergl"===l.type?i.pushUnique(o,l.xaxis+l.yaxis):"scatterpolargl"===l.type&&i.pushUnique(s,l.subplot))}for(r=0;r<o.length;r++)(n=t._plots[o[r]])._scene&&n._scene.draw();for(r=0;r<s.length;r++)(n=t[s[r]]._subplot)._scene&&n._scene.draw()}},e.doAutoRangeAndConstraints=function(e){for(var t,r=d.list(e,"",!0),n={},i=0;i<r.length;i++)if(!n[(t=r[i])._id]){n[t._id]=1,f(e,t),m(e,t);var a=t._matchGroup;if(a)for(var o in a){var s=d.getFromId(e,o);m(e,s,t.range),n[o]=1}}p(e)},e.finalDraw=function(e){r.getComponentMethod("rangeslider","draw")(e),r.getComponentMethod("rangeselector","draw")(e)},e.drawMarginPushers=function(e){r.getComponentMethod("legend","draw")(e),r.getComponentMethod("rangeselector","draw")(e),r.getComponentMethod("sliders","draw")(e),r.getComponentMethod("updatemenus","draw")(e),r.getComponentMethod("colorbar","draw")(e)}}(subroutines);var readPaths$1=helpers$p.readPaths,displayOutlines$1=display_outlines,clearOutlineControllers=handle_outline.clearOutlineControllers,Color$o=colorExports,Drawing$g=drawingExports,arrayEditor$4=plot_template.arrayEditor,helpers$i=helpers$k,getPathString=helpers$i.getPathString,draw_1$2={draw:draw$9,drawOne:drawOne$1,activateLastSelection:activateLastSelection$1};function draw$9(e){var t=e._fullLayout;for(var r in clearOutlineControllers(e),t._selectionLayer.selectAll("path").remove(),t._plots){var n=t._plots[r].selectionLayer;n&&n.selectAll("path").remove()}for(var i=0;i<t.selections.length;i++)drawOne$1(e,i)}function couldHaveActiveSelection(e){return e._context.editSelection}function drawOne$1(e,t){e._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+t+'"]').remove();var r=helpers$i.makeSelectionsOptionsAndPlotinfo(e,t),n=r.options,i=r.plotinfo;n._input&&function(r){var a=getPathString(e,n),o={"data-index":t,"fill-rule":"evenodd",d:a},s=n.opacity,l="rgba(0,0,0,0)",c=n.line.color||Color$o.contrast(e._fullLayout.plot_bgcolor),u=n.line.width,d=n.line.dash;u||(u=5,d="solid");var h=couldHaveActiveSelection(e)&&e._fullLayout._activeSelectionIndex===t;h&&(l=e._fullLayout.activeselection.fillcolor,s=e._fullLayout.activeselection.opacity);for(var g=[],p=1;p>=0;p--){var f=r.append("path").attr(o).style("opacity",p?.1:s).call(Color$o.stroke,c).call(Color$o.fill,l).call(Drawing$g.dashLine,p?"solid":d,p?4+u:u);if(setClipPath(f,e,n),h){var m=arrayEditor$4(e.layout,"selections",n);f.style({cursor:"move"});var y={element:f.node(),plotinfo:i,gd:e,editHelpers:m,isActiveSelection:!0},b=readPaths$1(a,e);displayOutlines$1(b,f,y)}else f.style("pointer-events",p?"all":"none");g[p]=f}var v=g[0];g[1].node().addEventListener("click",(function(){return activateSelection(e,v)}))}(e._fullLayout._selectionLayer)}function setClipPath(e,t,r){var n=r.xref+r.yref;Drawing$g.setClipUrl(e,"clip"+t._fullLayout._uid+n,t)}function activateSelection(e,t){if(couldHaveActiveSelection(e)){var r=+t.node().getAttribute("data-index");if(r>=0){if(r===e._fullLayout._activeSelectionIndex)return void deactivateSelection(e);e._fullLayout._activeSelectionIndex=r,e._fullLayout._deactivateSelection=deactivateSelection,draw$9(e)}}}function activateLastSelection$1(e){if(couldHaveActiveSelection(e)){var t=e._fullLayout.selections.length-1;e._fullLayout._activeSelectionIndex=t,e._fullLayout._deactivateSelection=deactivateSelection,draw$9(e)}}function deactivateSelection(e){couldHaveActiveSelection(e)&&(e._fullLayout._activeSelectionIndex>=0&&(clearOutlineControllers(e),delete e._fullLayout._activeSelectionIndex,draw$9(e)))}function BuildLog$1(){var e,t=0,r=!1;function n(t,r){return e.list.push({type:t,data:r?JSON.parse(JSON.stringify(r)):void 0}),e}return e={list:[],segmentId:function(){return t++},checkIntersection:function(e,t){return n("check",{seg1:e,seg2:t})},segmentChop:function(e,t){return n("div_seg",{seg:e,pt:t}),n("chop",{seg:e,pt:t})},statusRemove:function(e){return n("pop_seg",{seg:e})},segmentUpdate:function(e){return n("seg_update",{seg:e})},segmentNew:function(e,t){return n("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return n("rem_seg",{seg:e})},tempStatus:function(e,t,r){return n("temp_status",{seg:e,above:t,below:r})},rewind:function(e){return n("rewind",{seg:e})},status:function(e,t,r){return n("status",{seg:e,above:t,below:r})},vert:function(t){return t===r?e:(r=t,n("vert",{x:t}))},log:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,!1,"  ")),n("log",{txt:e})},reset:function(){return n("reset")},selected:function(e){return n("selected",{segs:e})},chainStart:function(e){return n("chain_start",{seg:e})},chainRemoveHead:function(e,t){return n("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return n("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return n("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return n("chain_match",{index:e})},chainClose:function(e){return n("chain_close",{index:e})},chainAddHead:function(e,t){return n("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return n("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return n("chain_con",{index1:e,index2:t})},chainReverse:function(e){return n("chain_rev",{index:e})},chainJoin:function(e,t){return n("chain_join",{index1:e,index2:t})},done:function(){return n("done")}},e}var buildLog$1=BuildLog$1;function Epsilon$1(e){"number"!=typeof e&&(e=1e-10);var t={epsilon:function(t){return"number"==typeof t&&(e=t),e},pointAboveOrOnLine:function(t,r,n){var i=r[0],a=r[1],o=n[0],s=n[1],l=t[0];return(o-i)*(t[1]-a)-(s-a)*(l-i)>=-e},pointBetween:function(t,r,n){var i=t[1]-r[1],a=n[0]-r[0],o=t[0]-r[0],s=n[1]-r[1],l=o*a+i*s;return!(l<e)&&!(l-(a*a+s*s)>-e)},pointsSameX:function(t,r){return Math.abs(t[0]-r[0])<e},pointsSameY:function(t,r){return Math.abs(t[1]-r[1])<e},pointsSame:function(e,r){return t.pointsSameX(e,r)&&t.pointsSameY(e,r)},pointsCompare:function(e,r){return t.pointsSameX(e,r)?t.pointsSameY(e,r)?0:e[1]<r[1]?-1:1:e[0]<r[0]?-1:1},pointsCollinear:function(t,r,n){var i=t[0]-r[0],a=t[1]-r[1],o=r[0]-n[0],s=r[1]-n[1];return Math.abs(i*s-o*a)<e},linesIntersect:function(t,r,n,i){var a=r[0]-t[0],o=r[1]-t[1],s=i[0]-n[0],l=i[1]-n[1],c=a*l-o*s;if(Math.abs(c)<e)return!1;var u=t[0]-n[0],d=t[1]-n[1],h=(s*d-l*u)/c,g=(a*d-o*u)/c,p={alongA:0,alongB:0,pt:[t[0]+h*a,t[1]+h*o]};return p.alongA=h<=-e?-2:h<e?-1:h-1<=-e?0:h-1<e?1:2,p.alongB=g<=-e?-2:g<e?-1:g-1<=-e?0:g-1<e?1:2,p},pointInsideRegion:function(t,r){for(var n=t[0],i=t[1],a=r[r.length-1][0],o=r[r.length-1][1],s=!1,l=0;l<r.length;l++){var c=r[l][0],u=r[l][1];u-i>e!=o-i>e&&(a-c)*(i-u)/(o-u)+c-n>e&&(s=!s),a=c,o=u}return s}};return t}var epsilon$1=Epsilon$1,LinkedList$1={create:function(){var e={root:{root:!0,next:null},exists:function(t){return null!==t&&t!==e.root},isEmpty:function(){return null===e.root.next},getHead:function(){return e.root.next},insertBefore:function(t,r){for(var n=e.root,i=e.root.next;null!==i;){if(r(i))return t.prev=i.prev,t.next=i,i.prev.next=t,void(i.prev=t);n=i,i=i.next}n.next=t,t.prev=n,t.next=null},findTransition:function(t){for(var r=e.root,n=e.root.next;null!==n&&!t(n);)r=n,n=n.next;return{before:r===e.root?null:r,after:n,insert:function(e){return e.prev=r,e.next=n,r.next=e,null!==n&&(n.prev=e),e}}}};return e},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}},linkedList=LinkedList$1,LinkedList=linkedList;function Intersecter$1(e,t,r){function n(e,t){return{id:r?r.segmentId():-1,start:e,end:t,myFill:{above:null,below:null},otherFill:null}}function i(e,t,n){return{id:r?r.segmentId():-1,start:e,end:t,myFill:{above:n.myFill.above,below:n.myFill.below},otherFill:null}}var a=LinkedList.create();function o(e,r){a.insertBefore(e,(function(n){return function(e,r,n,i,a,o){var s=t.pointsCompare(r,a);return 0!==s?s:t.pointsSame(n,o)?0:e!==i?e?1:-1:t.pointAboveOrOnLine(n,i?a:o,i?o:a)?1:-1}(e.isStart,e.pt,r,n.isStart,n.pt,n.other.pt)<0}))}function s(e,t){var r=function(e,t){var r=LinkedList.node({isStart:!0,pt:e.start,seg:e,primary:t,other:null,status:null});return o(r,e.end),r}(e,t);return function(e,t,r){var n=LinkedList.node({isStart:!1,pt:t.end,seg:t,primary:r,other:e,status:null});e.other=n,o(n,e.pt)}(r,e,t),r}function l(e,t){var n=i(t,e.seg.end,e.seg);return function(e,t){r&&r.segmentChop(e.seg,t),e.other.remove(),e.seg.end=t,e.other.pt=t,o(e.other,e.pt)}(e,t),s(n,e.primary)}function c(n,i){var o=LinkedList.create();function s(e){return o.findTransition((function(r){var n,i,a,o,s,l;return(n=e,i=r.ev,a=n.seg.start,o=n.seg.end,s=i.seg.start,l=i.seg.end,t.pointsCollinear(a,s,l)?t.pointsCollinear(o,s,l)||t.pointAboveOrOnLine(o,s,l)?1:-1:t.pointAboveOrOnLine(a,s,l)?1:-1)>0}))}function c(e,n){var i=e.seg,a=n.seg,o=i.start,s=i.end,c=a.start,u=a.end;r&&r.checkIntersection(i,a);var d=t.linesIntersect(o,s,c,u);if(!1===d){if(!t.pointsCollinear(o,s,c))return!1;if(t.pointsSame(o,u)||t.pointsSame(s,c))return!1;var h=t.pointsSame(o,c),g=t.pointsSame(s,u);if(h&&g)return n;var p=!h&&t.pointBetween(o,c,u),f=!g&&t.pointBetween(s,c,u);if(h)return f?l(n,s):l(e,u),n;p&&(g||(f?l(n,s):l(e,u)),l(n,o))}else 0===d.alongA&&(-1===d.alongB?l(e,c):0===d.alongB?l(e,d.pt):1===d.alongB&&l(e,u)),0===d.alongB&&(-1===d.alongA?l(n,o):0===d.alongA?l(n,d.pt):1===d.alongA&&l(n,s));return!1}for(var u=[];!a.isEmpty();){var d=a.getHead();if(r&&r.vert(d.pt[0]),d.isStart){r&&r.segmentNew(d.seg,d.primary);var h=s(d),g=h.before?h.before.ev:null,p=h.after?h.after.ev:null;function f(){if(g){var e=c(d,g);if(e)return e}return!!p&&c(d,p)}r&&r.tempStatus(d.seg,!!g&&g.seg,!!p&&p.seg);var m,y=f();if(y){var b;if(e)(b=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below)&&(y.seg.myFill.above=!y.seg.myFill.above);else y.seg.otherFill=d.seg.myFill;r&&r.segmentUpdate(y.seg),d.other.remove(),d.remove()}if(a.getHead()!==d){r&&r.rewind(d.seg);continue}if(e)b=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below,d.seg.myFill.below=p?p.seg.myFill.above:n,d.seg.myFill.above=b?!d.seg.myFill.below:d.seg.myFill.below;else if(null===d.seg.otherFill)m=p?d.primary===p.primary?p.seg.otherFill.above:p.seg.myFill.above:d.primary?i:n,d.seg.otherFill={above:m,below:m};r&&r.status(d.seg,!!g&&g.seg,!!p&&p.seg),d.other.status=h.insert(LinkedList.node({ev:d}))}else{var v=d.status;if(null===v)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(o.exists(v.prev)&&o.exists(v.next)&&c(v.prev.ev,v.next.ev),r&&r.statusRemove(v.ev.seg),v.remove(),!d.primary){var x=d.seg.myFill;d.seg.myFill=d.seg.otherFill,d.seg.otherFill=x}u.push(d.seg)}a.getHead().remove()}return r&&r.done(),u}return e?{addRegion:function(e){for(var r,i=e[e.length-1],a=0;a<e.length;a++){r=i,i=e[a];var o=t.pointsCompare(r,i);0!==o&&s(n(o<0?r:i,o<0?i:r),!0)}},calculate:function(e){return c(e,!1)}}:{calculate:function(e,t,r,n){return e.forEach((function(e){s(i(e.start,e.end,e),!0)})),r.forEach((function(e){s(i(e.start,e.end,e),!1)})),c(t,n)}}}var intersecter=Intersecter$1;function SegmentChainer$1(e,t,r){var n=[],i=[];return e.forEach((function(e){var a=e.start,o=e.end;if(t.pointsSame(a,o))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{r&&r.chainStart(e);for(var s={index:0,matches_head:!1,matches_pt1:!1},l={index:0,matches_head:!1,matches_pt1:!1},c=s,u=0;u<n.length;u++){var d=(m=n[u])[0];m[1];var h=m[m.length-1];if(m[m.length-2],t.pointsSame(d,a)){if(A(u,!0,!0))break}else if(t.pointsSame(d,o)){if(A(u,!0,!1))break}else if(t.pointsSame(h,a)){if(A(u,!1,!0))break}else if(t.pointsSame(h,o)&&A(u,!1,!1))break}if(c===s)return n.push([a,o]),void(r&&r.chainNew(a,o));if(c===l){r&&r.chainMatch(s.index);var g=s.index,p=s.matches_pt1?o:a,f=s.matches_head,m=n[g],y=f?m[0]:m[m.length-1],b=f?m[1]:m[m.length-2],v=f?m[m.length-1]:m[0],x=f?m[m.length-2]:m[1];return t.pointsCollinear(b,y,p)&&(f?(r&&r.chainRemoveHead(s.index,p),m.shift()):(r&&r.chainRemoveTail(s.index,p),m.pop()),y=b),t.pointsSame(v,p)?(n.splice(g,1),t.pointsCollinear(x,v,y)&&(f?(r&&r.chainRemoveTail(s.index,y),m.pop()):(r&&r.chainRemoveHead(s.index,y),m.shift())),r&&r.chainClose(s.index),void i.push(m)):void(f?(r&&r.chainAddHead(s.index,p),m.unshift(p)):(r&&r.chainAddTail(s.index,p),m.push(p)))}var B=s.index,I=l.index;r&&r.chainConnect(B,I);var F=n[B].length<n[I].length;s.matches_head?l.matches_head?F?(C(B),w(B,I)):(C(I),w(I,B)):w(I,B):l.matches_head?w(B,I):F?(C(B),w(I,B)):(C(I),w(B,I))}function A(e,t,r){return c.index=e,c.matches_head=t,c.matches_pt1=r,c===s?(c=l,!1):(c=null,!0)}function C(e){r&&r.chainReverse(e),n[e].reverse()}function w(e,i){var a=n[e],o=n[i],s=a[a.length-1],l=a[a.length-2],c=o[0],u=o[1];t.pointsCollinear(l,s,c)&&(r&&r.chainRemoveTail(e,s),a.pop(),s=l),t.pointsCollinear(s,c,u)&&(r&&r.chainRemoveHead(i,c),o.shift()),r&&r.chainJoin(e,i),n[e]=a.concat(o),n.splice(i,1)}})),i}var segmentChainer=SegmentChainer$1;function select$4(e,t,r){var n=[];return e.forEach((function(e){var i=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);0!==t[i]&&n.push({id:r?r.segmentId():-1,start:e.start,end:e.end,myFill:{above:1===t[i],below:2===t[i]},otherFill:null})})),r&&r.selected(n),n}var PolyBool,SegmentSelector$1={union:function(e,t){return select$4(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return select$4(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return select$4(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return select$4(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return select$4(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}},segmentSelector=SegmentSelector$1,GeoJSON$1={toPolygon:function(e,t){function r(t){if(t.length<=0)return e.segments({inverted:!1,regions:[]});function r(t){var r=t.slice(0,t.length-1);return e.segments({inverted:!1,regions:[r]})}for(var n=r(t[0]),i=1;i<t.length;i++)n=e.selectDifference(e.combine(n,r(t[i])));return n}if("Polygon"===t.type)return e.polygon(r(t.coordinates));if("MultiPolygon"===t.type){for(var n=e.segments({inverted:!1,regions:[]}),i=0;i<t.coordinates.length;i++)n=e.selectUnion(e.combine(n,r(t.coordinates[i])));return e.polygon(n)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,t,r){function n(e,r){return t.pointInsideRegion([.5*(e[0][0]+e[1][0]),.5*(e[0][1]+e[1][1])],r)}function i(e){return{region:e,children:[]}}r=e.polygon(e.segments(r));var a=i(null);function o(e,t){for(var r=0;r<e.children.length;r++){if(n(t,(s=e.children[r]).region))return void o(s,t)}var a=i(t);for(r=0;r<e.children.length;r++){var s;n((s=e.children[r]).region,t)&&(a.children.push(s),e.children.splice(r,1),r--)}e.children.push(a)}for(var s=0;s<r.regions.length;s++){var l=r.regions[s];l.length<3||o(a,l)}function c(e,t){for(var r=0,n=e[e.length-1][0],i=e[e.length-1][1],a=[],o=0;o<e.length;o++){var s=e[o][0],l=e[o][1];a.push([s,l]),r+=l*n-s*i,n=s,i=l}return r<0!==t&&a.reverse(),a.push([a[0][0],a[0][1]]),a}var u=[];function d(e){var t=[c(e.region,!1)];u.push(t);for(var r=0;r<e.children.length;r++)t.push(h(e.children[r]))}function h(e){for(var t=0;t<e.children.length;t++)d(e.children[t]);return c(e.region,!0)}for(s=0;s<a.children.length;s++)d(a.children[s]);return u.length<=0?{type:"Polygon",coordinates:[]}:1==u.length?{type:"Polygon",coordinates:u[0]}:{type:"MultiPolygon",coordinates:u}}},geojson=GeoJSON$1,BuildLog=buildLog$1,Epsilon=epsilon$1,Intersecter=intersecter,SegmentChainer=segmentChainer,SegmentSelector=segmentSelector,GeoJSON=geojson,buildLog=!1,epsilon=Epsilon();function operate(e,t,r){var n=PolyBool.segments(e),i=PolyBool.segments(t),a=r(PolyBool.combine(n,i));return PolyBool.polygon(a)}PolyBool={buildLog:function(e){return!0===e?buildLog=BuildLog():!1===e&&(buildLog=!1),!1!==buildLog&&buildLog.list},epsilon:function(e){return epsilon.epsilon(e)},segments:function(e){var t=Intersecter(!0,epsilon,buildLog);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){return{combined:Intersecter(!1,epsilon,buildLog).calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:SegmentSelector.union(e.combined,buildLog),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:SegmentSelector.intersect(e.combined,buildLog),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:SegmentSelector.difference(e.combined,buildLog),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:SegmentSelector.differenceRev(e.combined,buildLog),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:SegmentSelector.xor(e.combined,buildLog),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:SegmentChainer(e.segments,epsilon,buildLog),inverted:e.inverted}},polygonFromGeoJSON:function(e){return GeoJSON.toPolygon(PolyBool,e)},polygonToGeoJSON:function(e){return GeoJSON.fromPolygon(PolyBool,epsilon,e)},union:function(e,t){return operate(e,t,PolyBool.selectUnion)},intersect:function(e,t){return operate(e,t,PolyBool.selectIntersect)},difference:function(e,t){return operate(e,t,PolyBool.selectDifference)},differenceRev:function(e,t){return operate(e,t,PolyBool.selectDifferenceRev)},xor:function(e,t){return operate(e,t,PolyBool.selectXor)}},"object"==typeof window&&(window.PolyBool=PolyBool);var polybooljs=PolyBool,nested=function(e,t,r,n){var i=e[0],a=e[1],o=!1;void 0===r&&(r=0),void 0===n&&(n=t.length);for(var s=n-r,l=0,c=s-1;l<s;c=l++){var u=t[l+r][0],d=t[l+r][1],h=t[c+r][0],g=t[c+r][1];d>a!=g>a&&i<(h-u)*(a-d)/(g-d)+u&&(o=!o)}return o},polygonExports={},polygon$1={get exports(){return polygonExports},set exports(e){polygonExports=e}},dot=matrix$1.dot,BADNUM$4=numerical.BADNUM,polygon=polygon$1.exports={};polygon.tester=function(e){var t,r=e.slice(),n=r[0][0],i=n,a=r[0][1],o=a;for(r[r.length-1][0]===r[0][0]&&r[r.length-1][1]===r[0][1]||r.push(r[0]),t=1;t<r.length;t++)n=Math.min(n,r[t][0]),i=Math.max(i,r[t][0]),a=Math.min(a,r[t][1]),o=Math.max(o,r[t][1]);var s,l=!1;5===r.length&&(r[0][0]===r[1][0]?r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]&&(l=!0,s=function(e){return e[0]===r[0][0]}):r[0][1]===r[1][1]&&r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]&&(l=!0,s=function(e){return e[1]===r[0][1]}));var c=!0,u=r[0];for(t=1;t<r.length;t++)if(u[0]!==r[t][0]||u[1]!==r[t][1]){c=!1;break}return{xmin:n,xmax:i,ymin:a,ymax:o,pts:r,contains:l?function(e,t){var r=e[0],l=e[1];return!(r===BADNUM$4||r<n||r>i||l===BADNUM$4||l<a||l>o)&&(!t||!s(e))}:function(e,t){var s=e[0],l=e[1];if(s===BADNUM$4||s<n||s>i||l===BADNUM$4||l<a||l>o)return!1;var c,u,d,h,g,p=r.length,f=r[0][0],m=r[0][1],y=0;for(c=1;c<p;c++)if(u=f,d=m,f=r[c][0],m=r[c][1],!(s<(h=Math.min(u,f))||s>Math.max(u,f)||l>Math.max(d,m)))if(l<Math.min(d,m))s!==h&&y++;else{if(l===(g=f===u?l:d+(s-u)*(m-d)/(f-u)))return 1!==c||!t;l<=g&&s!==h&&y++}return y%2==1},isRect:l,degenerate:c}},polygon.isSegmentBent=function(e,t,r,n){var i,a,o,s=e[t],l=[e[r][0]-s[0],e[r][1]-s[1]],c=dot(l,l),u=Math.sqrt(c),d=[-l[1]/u,l[0]/u];for(i=t+1;i<r;i++)if(a=[e[i][0]-s[0],e[i][1]-s[1]],(o=dot(a,l))<0||o>c||Math.abs(dot(a,d))>n)return!0;return!1},polygon.filter=function(e,t){var r=[e[0]],n=0,i=0;function a(a){e.push(a);var o=r.length,s=n;r.splice(i+1);for(var l=s+1;l<e.length;l++)(l===e.length-1||polygon.isSegmentBent(e,s,l+1,t))&&(r.push(e[l]),r.length<o-2&&(n=l,i=r.length-1),s=l)}e.length>1&&a(e.pop());return{addPt:a,raw:e,filtered:r}};var constants$t={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"},polybool=polybooljs,pointInPolygon=nested,Registry$v=registry,dashStyle=drawingExports.dashStyle,Color$n=colorExports,Fx$5=fx,makeEventData=helpers$y.makeEventData,dragHelpers=helpers$q,freeMode$1=dragHelpers.freeMode,rectMode=dragHelpers.rectMode,drawMode=dragHelpers.drawMode,openMode=dragHelpers.openMode,selectMode=dragHelpers.selectMode,shapeHelpers=helpers$k,shapeConstants=constants$x,displayOutlines=display_outlines,clearOutline$1=handle_outline.clearOutline,newShapeHelpers=helpers$p,handleEllipse=newShapeHelpers.handleEllipse,readPaths=newShapeHelpers.readPaths,newShapes=newshapes,newSelections=newselections,activateLastSelection=draw_1$2.activateLastSelection,Lib$13=libExports,ascending=Lib$13.sorterAsc,libPolygon=polygonExports,throttle=throttle$2,getFromId$1=axis_ids.getFromId,clearGlCanvases$1=clear_gl_canvases,redrawReglTraces$1=subroutines.redrawReglTraces,constants$s=constants$t,MINSELECT=constants$s.MINSELECT,filteredPolygon=libPolygon.filter,polygonTester$1=libPolygon.tester,helpers$h=helpers$o,p2r=helpers$h.p2r,axValue=helpers$h.axValue,getTransform=helpers$h.getTransform;function hasSubplot(e){return void 0!==e.subplot}function prepSelect$1(e,t,r,n,i){var a=!hasSubplot(n),o=freeMode$1(i),s=rectMode(i),l=openMode(i),c=drawMode(i),u=selectMode(i),d="drawcircle"===i,h="drawline"===i||d,g=n.gd,p=g._fullLayout,f=u&&"immediate"===p.newselection.mode&&a,m=p._zoomlayer,y=n.element.getBoundingClientRect(),b=n.plotinfo,v=getTransform(b),x=t-y.left,B=r-y.top;p._calcInverseTransform(g);var I=Lib$13.apply3DTransform(p._invTransform)(x,B);x=I[0],B=I[1];var F,A,C,w,Q,U,S,E=p._invScaleX,L=p._invScaleY,_=x,T=B,R="M"+x+","+B,$=n.xaxes[0],k=n.yaxes[0],N=$._length,G=k._length,M=e.altKey&&!(drawMode(i)&&l);coerceSelectionsCache(e,g,n),o&&(F=filteredPolygon([[x,B]],constants$s.BENDPX));var D=m.selectAll("path.select-outline-"+b.id).data([1]),V=c?p.newshape:p.newselection,H=c&&!l?V.fillcolor:"rgba(0,0,0,0)",X=V.line.color||(a?Color$n.contrast(g._fullLayout.plot_bgcolor):"#7f7f7f");D.enter().append("path").attr("class","select-outline select-outline-"+b.id).style({opacity:c?V.opacity/2:1,"stroke-dasharray":dashStyle(V.line.dash,V.line.width),"stroke-width":V.line.width+"px","shape-rendering":"crispEdges"}).call(Color$n.stroke,X).call(Color$n.fill,H).attr("fill-rule","evenodd").classed("cursor-move",!!c).attr("transform",v).attr("d",R+"Z");var O=m.append("path").attr("class","zoombox-corners").style({fill:Color$n.background,stroke:Color$n.defaultLine,"stroke-width":1}).attr("transform",v).attr("d","M0,0Z"),Z=p._uid+constants$s.SELECTID,W=[],Y=determineSearchTraces(g,n.xaxes,n.yaxes,n.subplot);f&&!e.shiftKey&&(n._clearSubplotSelections=function(){if(a){var e=$._id,t=k._id;deselectSubplot(g,e,t,Y);for(var r=(g.layout||{}).selections||[],n=[],i=!1,o=0;o<r.length;o++){var s=p.selections[o];s.xref!==e||s.yref!==t?n.push(r[o]):i=!0}i&&(g._fullLayout._noEmitSelectedAtStart=!0,Registry$v.call("_guiRelayout",g,{selections:n}))}});var P=getFillRangeItems(n);n.moveFn=function(e,t){n._clearSubplotSelections&&(n._clearSubplotSelections(),n._clearSubplotSelections=void 0),_=Math.max(0,Math.min(N,E*e+x)),T=Math.max(0,Math.min(G,L*t+B));var r=Math.abs(_-x),i=Math.abs(T-B);if(s){var a,f,m;if(u){var y=p.selectdirection;switch(a="any"===y?i<Math.min(.6*r,MINSELECT)?"h":r<Math.min(.6*i,MINSELECT)?"v":"d":y){case"h":f=d?G/2:0,m=G;break;case"v":f=d?N/2:0,m=N}}if(c)switch(p.newshape.drawdirection){case"vertical":a="h",f=d?G/2:0,m=G;break;case"horizontal":a="v",f=d?N/2:0,m=N;break;case"ortho":r<i?(a="h",f=B,m=T):(a="v",f=x,m=_);break;default:a="d"}"h"===a?((w=h?handleEllipse(d,[_,f],[_,m]):[[x,f],[x,m],[_,m],[_,f]]).xmin=h?_:Math.min(x,_),w.xmax=h?_:Math.max(x,_),w.ymin=Math.min(f,m),w.ymax=Math.max(f,m),O.attr("d","M"+w.xmin+","+(B-MINSELECT)+"h-4v"+2*MINSELECT+"h4ZM"+(w.xmax-1)+","+(B-MINSELECT)+"h4v"+2*MINSELECT+"h-4Z")):"v"===a?((w=h?handleEllipse(d,[f,T],[m,T]):[[f,B],[f,T],[m,T],[m,B]]).xmin=Math.min(f,m),w.xmax=Math.max(f,m),w.ymin=h?T:Math.min(B,T),w.ymax=h?T:Math.max(B,T),O.attr("d","M"+(x-MINSELECT)+","+w.ymin+"v-4h"+2*MINSELECT+"v4ZM"+(x-MINSELECT)+","+(w.ymax-1)+"v4h"+2*MINSELECT+"v-4Z")):"d"===a&&((w=h?handleEllipse(d,[x,B],[_,T]):[[x,B],[x,T],[_,T],[_,B]]).xmin=Math.min(x,_),w.xmax=Math.max(x,_),w.ymin=Math.min(B,T),w.ymax=Math.max(B,T),O.attr("d","M0,0Z"))}else o&&(F.addPt([_,T]),w=F.filtered);if(n.selectionDefs&&n.selectionDefs.length?(C=mergePolygons(n.mergedPolygons,w,M),w.subtract=M,A=multiTester(n.selectionDefs.concat([w]))):(C=[w],A=polygonTester$1(w)),displayOutlines(convertPoly(C,l),D,n),u){var b,v=reselect(g,!1),I=v.eventData?v.eventData.points.slice():[];v=reselect(g,!1,A,Y,n),A=v.selectionTesters,S=v.eventData,b=F?F.filtered:castMultiPolygon(C),throttle.throttle(Z,constants$s.SELECTDELAY,(function(){for(var e=(W=_doSelect(A,Y)).slice(),t=0;t<I.length;t++){for(var r=I[t],n=!1,i=0;i<e.length;i++)if(e[i].curveNumber===r.curveNumber&&e[i].pointNumber===r.pointNumber){n=!0;break}n||e.push(r)}e.length&&(S||(S={}),S.points=e),P(S,b),emitSelecting(g,S)}))}},n.clickFn=function(e,t){if(O.remove(),g._fullLayout._activeShapeIndex>=0)g._fullLayout._deactivateShape(g);else if(!c){var r=p.clickmode;throttle.done(Z).then((function(){if(throttle.clear(Z),2===e){for(D.remove(),Q=0;Q<Y.length;Q++)(U=Y[Q])._module.selectPoints(U,!1);if(updateSelectedState(g,Y),clearSelectionsCache(n),emitDeselect(g),Y.length){var i=Y[0].xaxis,a=Y[0].yaxis;if(i&&a){for(var o=[],s=g._fullLayout.selections,l=0;l<s.length;l++){var c=s[l];c&&(c.xref===i._id&&c.yref===a._id||o.push(c))}o.length<s.length&&(g._fullLayout._noEmitSelectedAtStart=!0,Registry$v.call("_guiRelayout",g,{selections:o}))}}}else r.indexOf("select")>-1&&selectOnClick$1(t,g,n.xaxes,n.yaxes,n.subplot,n,D),"event"===r&&emitSelected(g,void 0);Fx$5.click(g,t)})).catch(Lib$13.error)}},n.doneFn=function(){O.remove(),throttle.done(Z).then((function(){throttle.clear(Z),!f&&w&&n.selectionDefs&&(w.subtract=M,n.selectionDefs.push(w),n.mergedPolygons.length=0,[].push.apply(n.mergedPolygons,C)),(f||c)&&clearSelectionsCache(n,f),n.doneFnCompleted&&n.doneFnCompleted(W),u&&emitSelected(g,S)})).catch(Lib$13.error)}}function selectOnClick$1(e,t,r,n,i,a,o){var s,l,c,u,d,h,g,p,f,m=t._hoverdata,y=t._fullLayout.clickmode.indexOf("event")>-1,b=[];if(isHoverDataSet(m)){coerceSelectionsCache(e,t,a);var v=extractClickedPtInfo(m,s=determineSearchTraces(t,r,n,i));if(v.pointNumbers.length>0?isOnlyThisBinSelected(s,v):isOnlyOnePointSelected(s)&&(h=isPointOrBinSelected(v))){for(o&&o.remove(),f=0;f<s.length;f++)(l=s[f])._module.selectPoints(l,!1);updateSelectedState(t,s),clearSelectionsCache(a),y&&emitDeselect(t)}else{for(g=e.shiftKey&&(void 0!==h?h:isPointOrBinSelected(v)),c=newPointSelectionDef(v.pointNumber,v.searchInfo,g),u=multiTester(a.selectionDefs.concat([c])),f=0;f<s.length;f++)if(d=fillSelectionItem(s[f]._module.selectPoints(s[f],u),s[f]),b.length)for(var x=0;x<d.length;x++)b.push(d[x]);else b=d;if(updateSelectedState(t,s,p={points:b}),c&&a&&a.selectionDefs.push(c),o){var B=a.mergedPolygons,I=openMode(a.dragmode);displayOutlines(convertPoly(B,I),o,a)}y&&emitSelected(t,p)}}}function newPointSelectionDef(e,t,r){return{pointNumber:e,searchInfo:t,subtract:!!r}}function isPointSelectionDef(e){return"pointNumber"in e&&"searchInfo"in e}function newPointNumTester(e){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(t,r,n,i){var a=e.searchInfo.cd[0].trace._expandedIndex;return i.cd[0].trace._expandedIndex===a&&n===e.pointNumber},isRect:!1,degenerate:!1,subtract:!!e.subtract}}function multiTester(e){if(e.length){for(var t=[],r=isPointSelectionDef(e[0])?0:e[0][0][0],n=r,i=isPointSelectionDef(e[0])?0:e[0][0][1],a=i,o=0;o<e.length;o++)if(isPointSelectionDef(e[o]))t.push(newPointNumTester(e[o]));else{var s=polygonTester$1(e[o]);s.subtract=!!e[o].subtract,t.push(s),r=Math.min(r,s.xmin),n=Math.max(n,s.xmax),i=Math.min(i,s.ymin),a=Math.max(a,s.ymax)}return{xmin:r,xmax:n,ymin:i,ymax:a,pts:[],contains:function(e,r,n,i){for(var a=!1,o=0;o<t.length;o++)t[o].contains(e,r,n,i)&&(a=!t[o].subtract);return a},isRect:!1,degenerate:!1}}}function coerceSelectionsCache(e,t,r){var n=t._fullLayout,i=r.plotinfo,a=r.dragmode,o=n._lastSelectedSubplot&&n._lastSelectedSubplot===i.id,s=(e.shiftKey||e.altKey)&&!(drawMode(a)&&openMode(a));o&&s&&i.selection&&i.selection.selectionDefs&&!r.selectionDefs?(r.selectionDefs=i.selection.selectionDefs,r.mergedPolygons=i.selection.mergedPolygons):s&&i.selection||clearSelectionsCache(r),o||(clearOutline$1(t),n._lastSelectedSubplot=i.id)}function hasActiveShape(e){return e._fullLayout._activeShapeIndex>=0}function hasActiveSelection(e){return e._fullLayout._activeSelectionIndex>=0}function clearSelectionsCache(e,t){var r=e.dragmode,n=e.plotinfo,i=e.gd;hasActiveShape(i)&&i._fullLayout._deactivateShape(i),hasActiveSelection(i)&&i._fullLayout._deactivateSelection(i);var a=i._fullLayout._zoomlayer,o=drawMode(r),s=selectMode(r);if(o||s){var l,c,u=a.selectAll(".select-outline-"+n.id);if(u&&i._fullLayout._outlining)o&&(l=newShapes(u,e)),l&&Registry$v.call("_guiRelayout",i,{shapes:l}),s&&!hasSubplot(e)&&(c=newSelections(u,e)),c&&(i._fullLayout._noEmitSelectedAtStart=!0,Registry$v.call("_guiRelayout",i,{selections:c}).then((function(){t&&activateLastSelection(i)}))),i._fullLayout._outlining=!1}n.selection={},n.selection.selectionDefs=e.selectionDefs=[],n.selection.mergedPolygons=e.mergedPolygons=[]}function getAxId(e){return e._id}function determineSearchTraces(e,t,r,n){if(!e.calcdata)return[];var i,a,o,s=[],l=t.map(getAxId),c=r.map(getAxId);for(o=0;o<e.calcdata.length;o++)if(!0===(a=(i=e.calcdata[o])[0].trace).visible&&a._module&&a._module.selectPoints)if(!hasSubplot({subplot:n})||a.subplot!==n&&a.geo!==n)if("splom"===a.type){if(a._xaxes[l[0]]&&a._yaxes[c[0]]){var u=createSearchInfo(a._module,i,t[0],r[0]);u.scene=e._fullLayout._splomScenes[a.uid],s.push(u)}}else if("sankey"===a.type){var d=createSearchInfo(a._module,i,t[0],r[0]);s.push(d)}else{if(-1===l.indexOf(a.xaxis))continue;if(-1===c.indexOf(a.yaxis))continue;s.push(createSearchInfo(a._module,i,getFromId$1(e,a.xaxis),getFromId$1(e,a.yaxis)))}else s.push(createSearchInfo(a._module,i,t[0],r[0]));return s}function createSearchInfo(e,t,r,n){return{_module:e,cd:t,xaxis:r,yaxis:n}}function isHoverDataSet(e){return e&&Array.isArray(e)&&!0!==e[0].hoverOnBox}function extractClickedPtInfo(e,t){var r,n,i=e[0],a=-1,o=[];for(n=0;n<t.length;n++)if(r=t[n],i.fullData._expandedIndex===r.cd[0].trace._expandedIndex){if(!0===i.hoverOnBox)break;void 0!==i.pointNumber?a=i.pointNumber:void 0!==i.binNumber&&(a=i.binNumber,o=i.pointNumbers);break}return{pointNumber:a,pointNumbers:o,searchInfo:r}}function isPointOrBinSelected(e){var t=e.searchInfo.cd[0].trace,r=e.pointNumber,n=e.pointNumbers,i=n.length>0?n[0]:r;return!!t.selectedpoints&&t.selectedpoints.indexOf(i)>-1}function isOnlyThisBinSelected(e,t){var r,n,i,a=[];for(i=0;i<e.length;i++)(r=e[i]).cd[0].trace.selectedpoints&&r.cd[0].trace.selectedpoints.length>0&&a.push(r);if(1===a.length&&a[0]===t.searchInfo&&(n=t.searchInfo.cd[0].trace).selectedpoints.length===t.pointNumbers.length){for(i=0;i<t.pointNumbers.length;i++)if(n.selectedpoints.indexOf(t.pointNumbers[i])<0)return!1;return!0}return!1}function isOnlyOnePointSelected(e){var t,r,n=0;for(r=0;r<e.length;r++)if((t=e[r].cd[0].trace).selectedpoints){if(t.selectedpoints.length>1)return!1;if((n+=t.selectedpoints.length)>1)return!1}return 1===n}function updateSelectedState(e,t,r){var n,i;for(n=0;n<t.length;n++){var a=t[n].cd[0].trace._fullInput,o=e._fullLayout._tracePreGUI[a.uid]||{};void 0===o.selectedpoints&&(o.selectedpoints=a._input.selectedpoints||null)}if(r){var s=r.points||[];for(n=0;n<t.length;n++)(i=t[n].cd[0].trace)._input.selectedpoints=i._fullInput.selectedpoints=[],i._fullInput!==i&&(i.selectedpoints=[]);for(var l=0;l<s.length;l++){var c=s[l],u=c.data,d=c.fullData,h=c.pointIndex,g=c.pointIndices;g?([].push.apply(u.selectedpoints,g),i._fullInput!==i&&[].push.apply(d.selectedpoints,g)):(u.selectedpoints.push(h),i._fullInput!==i&&d.selectedpoints.push(h))}}else for(n=0;n<t.length;n++)delete(i=t[n].cd[0].trace).selectedpoints,delete i._input.selectedpoints,i._fullInput!==i&&delete i._fullInput.selectedpoints;updateReglSelectedState(e,t)}function updateReglSelectedState(e,t){for(var r=!1,n=0;n<t.length;n++){var i=t[n],a=i.cd;Registry$v.traceIs(a[0].trace,"regl")&&(r=!0);var o=i._module,s=o.styleOnSelect||o.style;s&&(s(e,a,a[0].node3),a[0].nodeRangePlot3&&s(e,a,a[0].nodeRangePlot3))}r&&(clearGlCanvases$1(e),redrawReglTraces$1(e))}function mergePolygons(e,t,r){for(var n=(r?polybool.difference:polybool.union)({regions:e},{regions:[t]}).regions.reverse(),i=0;i<n.length;i++){var a=n[i];a.subtract=getSubtract(a,n.slice(0,i))}return n}function fillSelectionItem(e,t){if(Array.isArray(e))for(var r=t.cd,n=t.cd[0].trace,i=0;i<e.length;i++)e[i]=makeEventData(e[i],n,r);return e}function convertPoly(e,t){for(var r=[],n=0;n<e.length;n++){r[n]=[];for(var i=0;i<e[n].length;i++){r[n][i]=[],r[n][i][0]=i?"L":"M";for(var a=0;a<e[n][i].length;a++)r[n][i].push(e[n][i][a])}t||r[n].push(["Z",r[n][0][1],r[n][0][2]])}return r}function _doSelect(e,t){for(var r,n=[],i=0;i<t.length;i++){var a=t[i];r=fillSelectionItem(a._module.selectPoints(a,e),a),n=n.concat(r)}return n}function reselect(e,t,r,n,i){var a,o,s,l=!!n;i&&(a=i.plotinfo,o=i.xaxes[0]._id,s=i.yaxes[0]._id);var c=[],u=[],d=getLayoutPolygons(e),h=e._fullLayout;if(a){var g=h._zoomlayer,p=h.dragmode,f=drawMode(p),m=selectMode(p);if(f||m){var y=getFromId$1(e,o,"x"),b=getFromId$1(e,s,"y");if(y&&b){var v=g.selectAll(".select-outline-"+a.id);if(v&&e._fullLayout._outlining&&v.length){for(var x=v[0][0].getAttribute("d"),B=readPaths(x,e,a),I=[],F=0;F<B.length;F++){for(var A=B[F],C=[],w=0;w<A.length;w++)C.push([convert$4(y,A[w][1]),convert$4(b,A[w][2])]);C.xref=o,C.yref=s,C.subtract=getSubtract(C,I),I.push(C)}d=d.concat(I)}}}}var Q=o&&s?[o+s]:h._subplots.cartesian;epmtySplomSelectionBatch(e);for(var U={},S=0;S<Q.length;S++){var E=Q[S],L=E.indexOf("y"),_=E.slice(0,L),T=E.slice(L),R=o&&s?r:void 0;if(R=addTester(d,_,T,R)){var $=n;if(!l){var k=getFromId$1(e,_,"x"),N=getFromId$1(e,T,"y");$=determineSearchTraces(e,[k],[N],E);for(var G=0;G<$.length;G++){var M=$[G],D=M.cd[0],V=D.trace;if("scattergl"===M._module.name&&!D.t.xpx){var H=V.x,X=V.y,O=V._length;D.t.xpx=[],D.t.ypx=[];for(var Z=0;Z<O;Z++)D.t.xpx[Z]=k.c2p(H[Z]),D.t.ypx[Z]=N.c2p(X[Z])}"splom"===M._module.name&&(U[V.uid]||(U[V.uid]=!0))}}var W=_doSelect(R,$);c=c.concat(W),u=u.concat($)}}var Y={points:c};updateSelectedState(e,u,Y);var P=h.clickmode.indexOf("event")>-1&&t;if(!a&&t){var z=getLayoutPolygons(e,!0);if(z.length){var J=z[0].xref,j=z[0].yref;if(J&&j){var K=castMultiPolygon(z);makeFillRangeItems([getFromId$1(e,J,"x"),getFromId$1(e,j,"y")])(Y,K)}}e._fullLayout._noEmitSelectedAtStart?e._fullLayout._noEmitSelectedAtStart=!1:P&&emitSelected(e,Y),h._reselect=!1}if(!a&&h._deselect){var q=h._deselect;subplotSelected(o=q.xref,s=q.yref,u)||deselectSubplot(e,o,s,n),P&&(Y.points.length?emitSelected(e,Y):emitDeselect(e)),h._deselect=!1}return{eventData:Y,selectionTesters:r}}function epmtySplomSelectionBatch(e){var t=e.calcdata;if(t)for(var r=0;r<t.length;r++){var n=t[r][0].trace,i=e._fullLayout._splomScenes;if(i){var a=i[n.uid];a&&(a.selectBatch=[])}}}function subplotSelected(e,t,r){for(var n=0;n<r.length;n++){var i=r[n];if(i.xaxis&&i.xaxis._id===e&&i.yaxis&&i.yaxis._id===t)return!0}return!1}function deselectSubplot(e,t,r,n){n=determineSearchTraces(e,[getFromId$1(e,t,"x")],[getFromId$1(e,r,"y")],t+r);for(var i=0;i<n.length;i++){var a=n[i];a._module.selectPoints(a,!1)}updateSelectedState(e,n)}function addTester(e,t,r,n){for(var i,a=0;a<e.length;a++){var o=e[a];if(t===o.xref&&r===o.yref)if(i)n=multiTester(i=mergePolygons(i,o,!!o.subtract));else i=[o],n=polygonTester$1(o)}return n}function getLayoutPolygons(e,t){for(var r=[],n=e._fullLayout,i=n.selections,a=i.length,o=0;o<a;o++)if(!t||o===n._activeSelectionIndex){var s=i[o];if(s){var l,c,u,d,h,g=s.xref,p=s.yref,f=getFromId$1(e,g,"x"),m=getFromId$1(e,p,"y");if("rect"===s.type){h=[];var y=convert$4(f,s.x0),b=convert$4(f,s.x1),v=convert$4(m,s.y0),x=convert$4(m,s.y1);h=[[y,v],[y,x],[b,x],[b,v]],l=Math.min(y,b),c=Math.max(y,b),u=Math.min(v,x),d=Math.max(v,x),h.xmin=l,h.xmax=c,h.ymin=u,h.ymax=d,h.xref=g,h.yref=p,h.subtract=!1,h.isRect=!0,r.push(h)}else if("path"===s.type)for(var B=s.path.split("Z"),I=[],F=0;F<B.length;F++){var A=B[F];if(A){A+="Z";var C=shapeHelpers.extractPathCoords(A,shapeConstants.paramIsX,"raw"),w=shapeHelpers.extractPathCoords(A,shapeConstants.paramIsY,"raw");l=1/0,c=-1/0,u=1/0,d=-1/0,h=[];for(var Q=0;Q<C.length;Q++){var U=convert$4(f,C[Q]),S=convert$4(m,w[Q]);h.push([U,S]),l=Math.min(U,l),c=Math.max(U,c),u=Math.min(S,u),d=Math.max(S,d)}h.xmin=l,h.xmax=c,h.ymin=u,h.ymax=d,h.xref=g,h.yref=p,h.subtract=getSubtract(h,I),I.push(h),r.push(h)}}}}return r}function getSubtract(e,t){for(var r=!1,n=0;n<t.length;n++)for(var i=t[n],a=0;a<e.length;a++)if(pointInPolygon(e[a],i)){r=!r;break}return r}function convert$4(e,t){return"date"===e.type&&(t=t.replace("_"," ")),"log"===e.type?e.c2p(t):e.r2p(t,null,e.calendar)}function castMultiPolygon(e){for(var t=e.length,r=[],n=0;n<t;n++){var i=e[n];r=(r=r.concat(i)).concat([i[0]])}return computeRectAndRanges(r)}function computeRectAndRanges(e){return e.isRect=5===e.length&&e[0][0]===e[4][0]&&e[0][1]===e[4][1]&&e[0][0]===e[1][0]&&e[2][0]===e[3][0]&&e[0][1]===e[3][1]&&e[1][1]===e[2][1]||e[0][1]===e[1][1]&&e[2][1]===e[3][1]&&e[0][0]===e[3][0]&&e[1][0]===e[2][0],e.isRect&&(e.xmin=Math.min(e[0][0],e[2][0]),e.xmax=Math.max(e[0][0],e[2][0]),e.ymin=Math.min(e[0][1],e[2][1]),e.ymax=Math.max(e[0][1],e[2][1])),e}function makeFillRangeItems(e){return function(t,r){for(var n,i,a=0;a<e.length;a++){var o=e[a],s=o._id,l=s.charAt(0);if(r.isRect){n||(n={});var c=r[l+"min"],u=r[l+"max"];void 0!==c&&void 0!==u&&(n[s]=[p2r(o,c),p2r(o,u)].sort(ascending))}else i||(i={}),i[s]=r.map(axValue(o))}n&&(t.range=n),i&&(t.lassoPoints=i)}}function getFillRangeItems(e){return e.plotinfo.fillRangeItems||makeFillRangeItems(e.xaxes.concat(e.yaxes))}function emitSelecting(e,t){e.emit("plotly_selecting",t)}function emitSelected(e,t){t&&(t.selections=(e.layout||{}).selections||[]),e.emit("plotly_selected",t)}function emitDeselect(e){e.emit("plotly_deselect",null)}var select$3={reselect:reselect,prepSelect:prepSelect$1,clearOutline:clearOutline$1,clearSelectionsCache:clearSelectionsCache,selectOnClick:selectOnClick$1},arrow_paths=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}],axis_placeable_objects={axisRefDescription:function(e,t,r){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+r+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",r,"of the domain of the","second",e,"axis."].join(" ")}},ARROWPATHS$1=arrow_paths,fontAttrs$7=requireFont_attributes(),cartesianConstants$1=constants$K,templatedArray$7=plot_template.templatedArray,axisPlaceableObjs$3=axis_placeable_objects;function arrowAxisRefDescription(e){return["In order for absolute positioning of the arrow to work, *a"+e+"ref* must be exactly the same as *"+e+"ref*, otherwise *a"+e+"ref* will revert to *pixel* (explained next).","For relative positioning, *a"+e+"ref* can be set to *pixel*,","in which case the *a"+e+"* value is specified in pixels","relative to *"+e+"*.","Absolute positioning is useful","for trendline annotations which should continue to indicate","the correct trend when zoomed. Relative positioning is useful","for specifying the text offset for an annotated point."].join(" ")}function arrowCoordinateDescription(e,t,r){return["Sets the",e,"component of the arrow tail about the arrow head.","If `a"+e+"ref` is `pixel`, a positive (negative)","component corresponds to an arrow pointing","from",r,"to",t,"("+t,"to",r+").","If `a"+e+"ref` is not `pixel` and is exactly the same as `"+e+"ref`,","this is an absolute value on that axis,","like `"+e+"`, specified in the same coordinates as `"+e+"ref`."].join(" ")}var attributes$z=templatedArray$7("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not this annotation is visible."].join(" ")},text:{valType:"string",editType:"calc+arraydraw",description:["Sets the text associated with this annotation.","Plotly uses a subset of HTML tags to do things like","newline (<br>), bold (<b></b>), italics (<i></i>),","hyperlinks (<a href='...'></a>). Tags <em>, <sup>, <sub>","<span> are also supported."].join(" ")},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw",description:["Sets the angle at which the `text` is drawn","with respect to the horizontal."].join(" ")},font:fontAttrs$7({editType:"calc+arraydraw",colorEditType:"arraydraw",description:"Sets the annotation text font."}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw",description:["Sets an explicit width for the text box. null (default) lets the","text set the box width. Wider text will be clipped.","There is no automatic wrapping; use <br> to start a new line."].join(" ")},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw",description:["Sets an explicit height for the text box. null (default) lets the","text set the box height. Taller text will be clipped."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the annotation (text + arrow)."},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw",description:["Sets the horizontal alignment of the `text` within the box.","Has an effect only if `text` spans two or more lines","(i.e. `text` contains one or more <br> HTML tags) or if an","explicit width is set to override the text width."].join(" ")},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw",description:["Sets the vertical alignment of the `text` within the box.","Has an effect only if an explicit height is set to override","the text height."].join(" ")},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:"Sets the background color of the annotation."},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:["Sets the color of the border enclosing the annotation `text`."].join(" ")},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw",description:["Sets the padding (in px) between the `text`","and the enclosing border."].join(" ")},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw",description:["Sets the width (in px) of the border enclosing","the annotation `text`."].join(" ")},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not the annotation is drawn with an arrow.","If *true*, `text` is placed near the arrow's tail.","If *false*, `text` lines up with the `x` and `y` provided."].join(" ")},arrowcolor:{valType:"color",editType:"arraydraw",description:"Sets the color of the annotation arrow."},arrowhead:{valType:"integer",min:0,max:ARROWPATHS$1.length,dflt:1,editType:"arraydraw",description:"Sets the end annotation arrow head style."},startarrowhead:{valType:"integer",min:0,max:ARROWPATHS$1.length,dflt:1,editType:"arraydraw",description:"Sets the start annotation arrow head style."},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw",description:"Sets the annotation arrow head position."},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw",description:["Sets the size of the end annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw",description:["Sets the size of the start annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw",description:"Sets the width (in px) of annotation arrow line."},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw",description:["Sets a distance, in pixels, to move the end arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw",description:["Sets a distance, in pixels, to move the start arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},ax:{valType:"any",editType:"calc+arraydraw",description:[arrowCoordinateDescription("x","left","right")].join(" ")},ay:{valType:"any",editType:"calc+arraydraw",description:[arrowCoordinateDescription("y","top","bottom")].join(" ")},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",cartesianConstants$1.idRegex.x.toString()],editType:"calc",description:["Indicates in what coordinates the tail of the","annotation (ax,ay) is specified.",axisPlaceableObjs$3.axisRefDescription("x","left","right"),arrowAxisRefDescription("x")].join(" ")},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",cartesianConstants$1.idRegex.y.toString()],editType:"calc",description:["Indicates in what coordinates the tail of the","annotation (ax,ay) is specified.",axisPlaceableObjs$3.axisRefDescription("y","bottom","top"),arrowAxisRefDescription("y")].join(" ")},xref:{valType:"enumerated",values:["paper",cartesianConstants$1.idRegex.x.toString()],editType:"calc",description:["Sets the annotation's x coordinate axis.",axisPlaceableObjs$3.axisRefDescription("x","left","right")].join(" ")},x:{valType:"any",editType:"calc+arraydraw",description:["Sets the annotation's x position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the text box's horizontal position anchor","This anchor binds the `x` position to the *left*, *center*","or *right* of the annotation.","For example, if `x` is set to 1, `xref` to *paper* and","`xanchor` to *right* then the right-most portion of the","annotation lines up with the right-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *center* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw",description:["Shifts the position of the whole annotation and arrow to the","right (positive) or left (negative) by this many pixels."].join(" ")},yref:{valType:"enumerated",values:["paper",cartesianConstants$1.idRegex.y.toString()],editType:"calc",description:["Sets the annotation's y coordinate axis.",axisPlaceableObjs$3.axisRefDescription("y","bottom","top")].join(" ")},y:{valType:"any",editType:"calc+arraydraw",description:["Sets the annotation's y position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the text box's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the annotation.","For example, if `y` is set to 1, `yref` to *paper* and","`yanchor` to *top* then the top-most portion of the","annotation lines up with the top-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *middle* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw",description:["Shifts the position of the whole annotation and arrow up","(positive) or down (negative) by this many pixels."].join(" ")},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw",description:["Makes this annotation respond to clicks on the plot.","If you click a data point that exactly matches the `x` and `y`","values of this annotation, and it is hidden (visible: false),","it will appear. In *onoff* mode, you must click the same point","again to make it disappear, so if you click multiple points,","you can show multiple annotations. In *onout* mode, a click","anywhere else in the plot (on another data point or not) will","hide this annotation.","If you need to show/hide this annotation in response to different","`x` or `y` values, you can set `xclick` and/or `yclick`. This is","useful for example to label the side of a bar. To label markers","though, `standoff` is preferred over `xclick` and `yclick`."].join(" ")},xclick:{valType:"any",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `x` value","is `xclick` rather than the annotation's `x` value."].join(" ")},yclick:{valType:"any",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `y` value","is `yclick` rather than the annotation's `y` value."].join(" ")},hovertext:{valType:"string",editType:"arraydraw",description:["Sets text to appear when hovering over this annotation.","If omitted or blank, no hover label will appear."].join(" ")},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw",description:["Sets the background color of the hover label.","By default uses the annotation's `bgcolor` made opaque,","or white if it was transparent."].join(" ")},bordercolor:{valType:"color",editType:"arraydraw",description:["Sets the border color of the hover label.","By default uses either dark grey or white, for maximum","contrast with `hoverlabel.bgcolor`."].join(" ")},font:fontAttrs$7({editType:"arraydraw",description:["Sets the hover label text font.","By default uses the global hover font and size,","with color from `hoverlabel.bordercolor`."].join(" ")}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw",description:["Determines whether the annotation text box captures mouse move","and click events, or allows those events to pass through to data","points in the plot that may be behind the annotation. By default","`captureevents` is *false* unless `hovertext` is provided.","If you use the event `plotly_clickannotation` without `hovertext`","you must explicitly enable `captureevents`."].join(" ")},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc",description:["Obsolete. Set `xref` and `yref` separately instead."].join(" ")}}}),template_attributes={},docs=docs$2,FORMAT_LINK=docs.FORMAT_LINK,DATE_FORMAT_LINK=docs.DATE_FORMAT_LINK;function templateFormatStringDescription(e){return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(e&&e.supportOther?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),'Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',FORMAT_LINK,"for details on the formatting syntax.",'Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',DATE_FORMAT_LINK,"for details on the date formatting syntax."].join(" ")}function describeVariables(e){var t=e.description?" "+e.description:"",r=e.keys||[];if(r.length>0){for(var n=[],i=0;i<r.length;i++)n[i]="`"+r[i]+"`";t+="Finally, the template string has access to ",t=1===r.length?"variable "+n[0]:"variables "+n.slice(0,-1).join(", ")+" and "+n.slice(-1)+"."}return t}template_attributes.hovertemplateAttrs=function(e,t){e=e||{};var r=describeVariables(t=t||{}),n={valType:"string",dflt:"",editType:e.editType||"none",description:["Template string used for rendering the information that appear on hover box.","Note that this will override `hoverinfo`.",templateFormatStringDescription({supportOther:!0}),"The variables available in `hovertemplate` are the ones emitted as event data described at this link https://plotly.com/javascript/plotlyjs-events/#event-data.","Additionally, every attributes that can be specified per-point (the ones that are `arrayOk: true`) are available.",r,'Anything contained in tag `<extra>` is displayed in the secondary box, for example "<extra>{fullData.name}</extra>".',"To hide the secondary box completely, use an empty tag `<extra></extra>`."].join(" ")};return!1!==e.arrayOk&&(n.arrayOk=!0),n},template_attributes.texttemplateAttrs=function(e,t){e=e||{};var r=describeVariables(t=t||{}),n={valType:"string",dflt:"",editType:e.editType||"calc",description:["Template string used for rendering the information text that appear on points.","Note that this will override `textinfo`.",templateFormatStringDescription(),"Every attributes that can be specified per-point (the ones that are `arrayOk: true`) are available.",r].join(" ")};return!1!==e.arrayOk&&(n.arrayOk=!0),n};var constants$r={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]},axisHoverFormat$6=axis_format_attributes.axisHoverFormat,texttemplateAttrs$3=template_attributes.texttemplateAttrs,hovertemplateAttrs$6=template_attributes.hovertemplateAttrs,colorScaleAttrs$4=attributes$G,fontAttrs$6=requireFont_attributes(),dash$2=attributes$K.dash,pattern$1=attributes$K.pattern,Drawing$f=drawingExports,constants$q=constants$r,extendFlat$c=extend.extendFlat;function axisPeriod(e){return{valType:"any",dflt:0,editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the period positioning in milliseconds or *M<n>* on the "+e+" axis.","Special values in the form of *M<n>* could be used to declare","the number of months. In this case `n` must be a positive integer."].join(" ")}}function axisPeriod0(e){return{valType:"any",editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the base for period positioning in milliseconds or date string on the "+e+" axis.","When `"+e+"period` is round number of weeks,","the `"+e+"period0` by default would be on a Sunday i.e. 2000-01-02,","otherwise it would be at 2000-01-01."].join(" ")}}function axisPeriodAlignment(e){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the alignment of data points on the "+e+" axis."].join(" ")}}var attributes$y={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0,description:"Sets the x coordinates."},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0,description:["Alternate to `x`.","Builds a linear space of x coordinates.","Use with `dx`","where `x0` is the starting coordinate and `dx` the step."].join(" ")},dx:{valType:"number",dflt:1,editType:"calc",anim:!0,description:["Sets the x coordinate step.","See `x0` for more info."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0,description:"Sets the y coordinates."},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0,description:["Alternate to `y`.","Builds a linear space of y coordinates.","Use with `dy`","where `y0` is the starting coordinate and `dy` the step."].join(" ")},dy:{valType:"number",dflt:1,editType:"calc",anim:!0,description:["Sets the y coordinate step.","See `y0` for more info."].join(" ")},xperiod:axisPeriod("x"),yperiod:axisPeriod("y"),xperiod0:axisPeriod0("x0"),yperiod0:axisPeriod0("y0"),xperiodalignment:axisPeriodAlignment("x"),yperiodalignment:axisPeriodAlignment("y"),xhoverformat:axisHoverFormat$6("x"),yhoverformat:axisHoverFormat$6("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","offsetgroup where bars of the same position coordinate will line up."].join(" ")},alignmentgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","alignmentgroup. This controls whether bars compute their positional","range dependently or independently."].join(" ")},stackgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several scatter traces (on the same subplot) to the same","stackgroup in order to add their y values (or their x values if","`orientation` is *h*). If blank or omitted this trace will not be","stacked. Stacking also turns `fill` on by default, using *tonexty*","(*tonextx*) if `orientation` is *h* (*v*) and sets the default","`mode` to *lines* irrespective of point count.","You can only stack on a numeric (linear or log) axis.","Traces in a `stackgroup` will only fill to (or be filled to) other","traces in the same group. With multiple `stackgroup`s or some","traces stacked and some not, if fill-linked traces are not already","consecutive, the later ones will be pushed down in the drawing order."].join(" ")},orientation:{valType:"enumerated",values:["v","h"],editType:"calc",description:["Only relevant in the following cases:","1. when `scattermode` is set to *group*.","2. when `stackgroup` is used, and only the first","`orientation` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`. Sets the","stacking direction. With *v* (*h*), the y (x) values of subsequent","traces are added. Also affects the default value of `fill`."].join(" ")},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`groupnorm` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`.","Sets the normalization for the sum of this `stackgroup`.","With *fraction*, the value of each trace at each location is","divided by the sum of all trace values at that location.","*percent* is the same but multiplied by 100 to show percentages.","If there are multiple subplots, or multiple `stackgroup`s on one","subplot, each will be normalized within its own set."].join(" ")},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`stackgaps` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`.","Determines how we handle locations at which other traces in this","group have data but this one does not.","With *infer zero* we insert a zero at these locations.","With *interpolate* we linearly interpolate between existing","values, and extrapolate a constant beyond the existing values."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},texttemplate:texttemplateAttrs$3({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style",description:["Sets hover text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc",description:["Determines the drawing mode for this scatter trace.","If the provided `mode` includes *text* then the `text` elements","appear at the coordinates. Otherwise, the `text` elements","appear on hover.","If there are less than "+constants$q.PTS_LINESONLY+" points","and the trace is not stacked","then the default is *lines+markers*. Otherwise, *lines*."].join(" ")},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style",description:["Do the hover effects highlight individual points (markers or","line points) or do they highlight filled regions?","If the fill is *toself* or *tonext* and there are no markers","or text, then the default is *fills*, otherwise it is *points*."].join(" ")},hovertemplate:hovertemplateAttrs$6({},{keys:constants$q.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0,description:"Sets the line color."},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0,description:"Sets the line width (in px)."},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot",description:["Determines the line shape.","With *spline* the lines are drawn using spline interpolation.","The other available values correspond to step-wise line shapes."].join(" ")},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot",description:["Has an effect only if `shape` is set to *spline*","Sets the amount of smoothing.","*0* corresponds to no smoothing (equivalent to a *linear* shape)."].join(" ")},dash:extendFlat$c({},dash$2,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot",description:["Sets the line back off from the end point of the nth line segment (in px).","This option is useful e.g. to avoid overlap with arrowhead markers.","With *auto* the lines would trim before markers if `marker.angleref` is set to *previous*."].join(" ")},simplify:{valType:"boolean",dflt:!0,editType:"plot",description:["Simplifies lines by removing nearly-collinear points. When transitioning","lines, it may be desirable to disable this so that the number of points","along the resulting SVG path is unaffected."].join(" ")},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the provided data arrays are connected."].join(" ")},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines whether or not markers and text nodes","are clipped about the subplot axes.","To show markers and text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc",description:["Sets the area to fill with a solid color.","Defaults to *none* unless this trace is stacked, then it gets","*tonexty* (*tonextx*) if `orientation` is *v* (*h*)","Use with `fillcolor` if not *none*.","*tozerox* and *tozeroy* fill to x=0 and y=0 respectively.","*tonextx* and *tonexty* fill between the endpoints of this","trace and the endpoints of the trace before it, connecting those","endpoints with straight lines (to make a stacked area graph);","if there is no trace before it, they behave like *tozerox* and","*tozeroy*.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other.","Traces in a `stackgroup` will only fill to (or be filled to) other","traces in the same group. With multiple `stackgroup`s or some","traces stacked and some not, if fill-linked traces are not already","consecutive, the later ones will be pushed down in the drawing order."].join(" ")},fillcolor:{valType:"color",editType:"style",anim:!0,description:["Sets the fill color.","Defaults to a half-transparent variant of the line color,","marker color, or marker line color, whichever is available."].join(" ")},fillpattern:pattern$1,marker:extendFlat$c({symbol:{valType:"enumerated",values:Drawing$f.symbolList,dflt:"circle",arrayOk:!0,editType:"style",description:["Sets the marker symbol type.","Adding 100 is equivalent to appending *-open* to a symbol name.","Adding 200 is equivalent to appending *-dot* to a symbol name.","Adding 300 is equivalent to appending *-open-dot*","or *dot-open* to a symbol name."].join(" ")},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0,description:"Sets the marker opacity."},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1,description:["Sets the marker angle in respect to `angleref`."].join(" ")},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1,description:["Sets the reference for marker angle.","With *previous*, angle 0 points along the line from the previous point to this one.","With *up*, angle 0 points toward the top of the screen."].join(" ")},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0,description:["Moves the marker away from the data point in the direction of `angle` (in px).","This can be useful for example if you have another marker at this","location and you want to point an arrowhead marker at it."].join(" ")},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0,description:"Sets the marker size (in px)."},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets a maximum number of points to be drawn on the graph.","*0* corresponds to no limit."].join(" ")},sizeref:{valType:"number",dflt:1,editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the scale factor used to determine the rendered size of","marker points. Use with `sizemin` and `sizemode`."].join(" ")},sizemin:{valType:"number",min:0,dflt:0,editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the minimum size (in px) of the rendered marker points."].join(" ")},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the rule for which the data in `size` is converted","to pixels."].join(" ")},line:extendFlat$c({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0,description:"Sets the width (in px) of the lines bounding the marker points."},editType:"calc"},colorScaleAttrs$4("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc",description:["Sets the type of gradient used to fill the markers"].join(" ")},color:{valType:"color",arrayOk:!0,editType:"calc",description:["Sets the final color of the gradient fill:","the center color for radial, the right for horizontal,","or the bottom for vertical."].join(" ")},editType:"calc"},editType:"calc"},colorScaleAttrs$4("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style",description:"Sets the marker opacity of selected points."},color:{valType:"color",editType:"style",description:"Sets the marker color of selected points."},size:{valType:"number",min:0,editType:"style",description:"Sets the marker size of selected points."},editType:"style"},textfont:{color:{valType:"color",editType:"style",description:"Sets the text font color of selected points."},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style",description:"Sets the marker opacity of unselected points, applied only when a selection exists."},color:{valType:"color",editType:"style",description:"Sets the marker color of unselected points, applied only when a selection exists."},size:{valType:"number",min:0,editType:"style",description:"Sets the marker size of unselected points, applied only when a selection exists."},editType:"style"},textfont:{color:{valType:"color",editType:"style",description:"Sets the text font color of unselected points, applied only when a selection exists."},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc",description:["Sets the positions of the `text` elements","with respects to the (x,y) coordinates."].join(" ")},textfont:fontAttrs$6({editType:"calc",colorEditType:"style",arrayOk:!0,description:"Sets the text font."})},annAttrs$2=attributes$z,scatterLineAttrs$2=attributes$y.line,dash$1=attributes$K.dash,extendFlat$b=extend.extendFlat,overrideAll$8=edit_types.overrideAll,templatedArray$6=plot_template.templatedArray,axisPlaceableObjs$2=axis_placeable_objects,attributes$x=overrideAll$8(templatedArray$6("selection",{type:{valType:"enumerated",values:["rect","path"],description:["Specifies the selection type to be drawn.","If *rect*, a rectangle is drawn linking","(`x0`,`y0`), (`x1`,`y0`), (`x1`,`y1`) and (`x0`,`y1`).","If *path*, draw a custom SVG path using `path`."].join(" ")},xref:extendFlat$b({},annAttrs$2.xref,{description:["Sets the selection's x coordinate axis.",axisPlaceableObjs$2.axisRefDescription("x","left","right")].join(" ")}),yref:extendFlat$b({},annAttrs$2.yref,{description:["Sets the selection's x coordinate axis.",axisPlaceableObjs$2.axisRefDescription("y","bottom","top")].join(" ")}),x0:{valType:"any",description:"Sets the selection's starting x position."},x1:{valType:"any",description:"Sets the selection's end x position."},y0:{valType:"any",description:"Sets the selection's starting y position."},y1:{valType:"any",description:"Sets the selection's end y position."},path:{valType:"string",editType:"arraydraw",description:["For `type` *path* - a valid SVG path similar to `shapes.path` in data coordinates.","Allowed segments are: M, L and Z."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw",description:"Sets the opacity of the selection."},line:{color:scatterLineAttrs$2.color,width:extendFlat$b({},scatterLineAttrs$2.width,{min:1,dflt:1}),dash:extendFlat$b({},dash$1,{dflt:"dot"})}}),"arraydraw","from-root"),Lib$12=libExports,Axes$i=axesExports,handleArrayContainerDefaults$8=array_container_defaults,attributes$w=attributes$x,helpers$g=helpers$k,defaults$h=function(e,t){handleArrayContainerDefaults$8(e,t,{name:"selections",handleItemDefaults:handleSelectionDefaults});for(var r=t.selections,n=0;n<r.length;n++){var i=r[n];i&&(void 0===i.path&&(void 0!==i.x0&&void 0!==i.x1&&void 0!==i.y0&&void 0!==i.y1||(t.selections[n]=null)))}};function handleSelectionDefaults(e,t,r){function n(r,n){return Lib$12.coerce(e,t,attributes$w,r,n)}var i=n("path"),a="path"!==n("type",i?"path":"rect");a&&delete t.path,n("opacity"),n("line.color"),n("line.width"),n("line.dash");for(var o=["x","y"],s=0;s<2;s++){var l,c,u,d=o[s],h={_fullLayout:r},g=Axes$i.coerceRef(e,t,h,d);if((l=Axes$i.getFromId(h,g))._selectionIndices.push(t._index),u=helpers$g.rangeToShapePosition(l),c=helpers$g.shapePositionToRange(l),a){var p=d+"0",f=d+"1",m=e[p],y=e[f];e[p]=c(e[p],!0),e[f]=c(e[f],!0),Axes$i.coercePosition(t,h,n,g,p),Axes$i.coercePosition(t,h,n,g,f);var b=t[p],v=t[f];void 0!==b&&void 0!==v&&(t[p]=u(b),t[f]=u(v),e[p]=m,e[f]=y)}}a&&Lib$12.noneOrAll(e,t,["x0","x1","y0","y1"])}var defaults$g=function(e,t,r){r("newselection.mode"),r("newselection.line.width")&&(r("newselection.line.color"),r("newselection.line.dash")),r("activeselection.fillcolor"),r("activeselection.opacity")},Registry$u=registry,Lib$11=libExports,axisIds$4=axis_ids,include_components=function(e){return function(t,r){var n=t[e];if(Array.isArray(n))for(var i=Registry$u.subplotsRegistry.cartesian,a=i.idRegex,o=r._subplots,s=o.xaxis,l=o.yaxis,c=o.cartesian,u=r._has("cartesian")||r._has("gl2d"),d=0;d<n.length;d++){var h=n[d];if(Lib$11.isPlainObject(h)){var g=axisIds$4.cleanId(h.xref,"x",!1),p=axisIds$4.cleanId(h.yref,"y",!1),f=a.x.test(g),m=a.y.test(p);if(f||m){u||Lib$11.pushUnique(r._basePlotModules,i);var y=!1;f&&-1===s.indexOf(g)&&(s.push(g),y=!0),m&&-1===l.indexOf(p)&&(l.push(p),y=!0),y&&f&&m&&c.push(g+p)}}}}},drawModule$2=draw_1$2,select$2=select$3,selections={moduleType:"component",name:"selections",layoutAttributes:attributes$x,supplyLayoutDefaults:defaults$h,supplyDrawNewSelectionDefaults:defaults$g,includeBasePlot:include_components("selections"),draw:drawModule$2.draw,drawOne:drawModule$2.drawOne,reselect:select$2.reselect,prepSelect:select$2.prepSelect,clearOutline:select$2.clearOutline,clearSelectionsCache:select$2.clearSelectionsCache,selectOnClick:select$2.selectOnClick},d3$f=d3Exports,Lib$10=libExports,numberFormat=Lib$10.numberFormat,tinycolor$3=tinycolorExports,Registry$t=registry,strTranslate$5=Lib$10.strTranslate,svgTextUtils$7=svg_text_utils,Color$m=colorExports,Drawing$e=drawingExports,Fx$4=fx,Axes$h=axesExports,setCursor$2=setcursor,dragElement$2=dragelementExports,helpers$f=helpers$q,selectingOrDrawing=helpers$f.selectingOrDrawing,freeMode=helpers$f.freeMode,FROM_TL$3=alignment$1.FROM_TL,clearGlCanvases=clear_gl_canvases,redrawReglTraces=subroutines.redrawReglTraces,Plots$8=plotsExports,getFromId=axis_ids.getFromId,prepSelect=selections.prepSelect,clearOutline=selections.clearOutline,selectOnClick=selections.selectOnClick,scaleZoom=scale_zoom,constants$p=constants$K,MINDRAG=constants$p.MINDRAG,MINZOOM=constants$p.MINZOOM,SHOWZOOMOUTTIP=!0;function makeDragBox(e,t,r,n,i,a,o,s){var l,c,u,d,h,g,p,f,m,y,b,v,x,B,I,F,A,C,w,Q,U,S,E,L=e._fullLayout._zoomlayer,_=o+s==="nsew",T=1===(o+s).length;function R(){if(l=t.xaxis,c=t.yaxis,m=l._length,y=c._length,p=l._offset,f=c._offset,(u={})[l._id]=l,(d={})[c._id]=c,o&&s)for(var r=t.overlays,n=0;n<r.length;n++){var i=r[n].xaxis;u[i._id]=i;var a=r[n].yaxis;d[a._id]=a}h=hashValues(u),g=hashValues(d),x=isDirectionActive(h,s),B=isDirectionActive(g,o),I=!B&&!x,v=calcLinks(e,e._fullLayout._axisMatchGroups,u,d);var U=(b=calcLinks(e,e._fullLayout._axisConstraintGroups,u,d,v)).isSubplotConstrained||v.isSubplotConstrained;F=s||U,A=o||U;var S=e._fullLayout;C=S._has("scattergl"),w=S._has("splom"),Q=S._has("svg")}r+=t.yaxis._shift,R();var $=getDragCursor(B+x,e._fullLayout.dragmode,_),k=makeRectDragger(t,o+s+"drag",$,r,n,i,a);if(I&&!_)return k.onmousedown=null,k.style.pointerEvents="none",k;var N,G,M,D,V,H,X,O,Z,W,Y={element:k,gd:e,plotinfo:t};function P(){Y.plotinfo.selection=!1,clearOutline(e)}function z(e,r){var n=Y.gd;if(n._fullLayout._activeShapeIndex>=0)n._fullLayout._deactivateShape(n);else{var i=n._fullLayout.clickmode;if(removeZoombox(n),2!==e||T||oe(),_)i.indexOf("select")>-1&&selectOnClick(r,n,h,g,t.id,Y),i.indexOf("event")>-1&&Fx$4.click(n,r,t.id);else if(1===e&&T){var a=o?c:l,u="s"===o||"w"===s?0:1,d=a._name+".range["+u+"]",p=getEndText(a,u),f="left",m="middle";if(a.fixedrange)return;o?(m="n"===o?"top":"bottom","right"===a.side&&(f="right")):"e"===s&&(f="right"),n._context.showAxisRangeEntryBoxes&&d3$f.select(k).call(svgTextUtils$7.makeEditable,{gd:n,immediate:!0,background:n._fullLayout.paper_bgcolor,text:String(p),fill:a.tickfont?a.tickfont.color:"#444",horizontalAlign:f,verticalAlign:m}).on("edit",(function(e){var t=a.d2r(e);void 0!==t&&Registry$t.call("_guiRelayout",n,d,t)}))}}}function J(t,r){if(e._transitioningWithDuration)return!1;var n=Math.max(0,Math.min(m,S*t+N)),i=Math.max(0,Math.min(y,E*r+G)),a=Math.abs(n-N),o=Math.abs(i-G);function s(){X="",M.r=M.l,M.t=M.b,Z.attr("d","M0,0Z")}if(M.l=Math.min(N,n),M.r=Math.max(N,n),M.t=Math.min(G,i),M.b=Math.max(G,i),b.isSubplotConstrained)a>MINZOOM||o>MINZOOM?(X="xy",a/m>o/y?(o=a*y/m,G>i?M.t=G-o:M.b=G+o):(a=o*m/y,N>n?M.l=N-a:M.r=N+a),Z.attr("d",xyCorners(M))):s();else if(v.isSubplotConstrained)if(a>MINZOOM||o>MINZOOM){X="xy";var l=Math.min(M.l/m,(y-M.b)/y),c=Math.max(M.r/m,(y-M.t)/y);M.l=l*m,M.r=c*m,M.b=(1-l)*y,M.t=(1-c)*y,Z.attr("d",xyCorners(M))}else s();else!B||o<Math.min(Math.max(.6*a,MINDRAG),MINZOOM)?a<MINDRAG||!x?s():(M.t=0,M.b=y,X="x",Z.attr("d",xCorners(M,G))):!x||a<Math.min(.6*o,MINZOOM)?(M.l=0,M.r=m,X="y",Z.attr("d",yCorners(M,N))):(X="xy",Z.attr("d",xyCorners(M)));M.w=M.r-M.l,M.h=M.b-M.t,X&&(W=!0),e._dragged=W,updateZoombox(O,Z,M,V,H,D),j(),e.emit("plotly_relayouting",U),H=!0}function j(){U={},"xy"!==X&&"x"!==X||(zoomAxRanges(h,M.l/m,M.r/m,U,b.xaxes),ie("x",U)),"xy"!==X&&"y"!==X||(zoomAxRanges(g,(y-M.b)/y,(y-M.t)/y,U,b.yaxes),ie("y",U))}function K(){j(),removeZoombox(e),se(),showDoubleClickNotifier(e)}Y.prepFn=function(t,r,n){var i=Y.dragmode,a=e._fullLayout.dragmode;a!==i&&(Y.dragmode=a),R(),S=e._fullLayout._invScaleX,E=e._fullLayout._invScaleY,I||(_?t.shiftKey?"pan"===a?a="zoom":selectingOrDrawing(a)||(a="pan"):t.ctrlKey&&(a="pan"):a="pan"),freeMode(a)?Y.minDrag=1:Y.minDrag=void 0,selectingOrDrawing(a)?(Y.xaxes=h,Y.yaxes=g,prepSelect(t,r,n,Y,a)):(Y.clickFn=z,selectingOrDrawing(i)&&P(),I||("zoom"===a?(Y.moveFn=J,Y.doneFn=K,Y.minDrag=1,function(t,r,n){var i=k.getBoundingClientRect();N=r-i.left,G=n-i.top,e._fullLayout._calcInverseTransform(e);var a=Lib$10.apply3DTransform(e._fullLayout._invTransform)(N,G);N=a[0],G=a[1],M={l:N,r:N,w:0,t:G,b:G,h:0},D=e._hmpixcount?e._hmlumcount/e._hmpixcount:tinycolor$3(e._fullLayout.plot_bgcolor).getLuminance(),H=!1,X="xy",W=!1,O=makeZoombox(L,D,p,f,V="M0,0H"+m+"V"+y+"H0V0"),Z=makeCorners(L,p,f)}(0,r,n)):"pan"===a&&(Y.moveFn=ne,Y.doneFn=se))),e._fullLayout._redrag=function(){var t=e._dragdata;if(t&&t.element===k){var r=e._fullLayout.dragmode;selectingOrDrawing(r)||(R(),le([0,0,m,y]),Y.moveFn(t.dx,t.dy))}}},dragElement$2.init(Y);var q=[0,0,m,y],ee=null,te=constants$p.REDRAWDELAY,re=t.mainplot?e._fullLayout._plots[t.mainplot]:t;function ne(t,r){if(t*=S,r*=E,!e._transitioningWithDuration){if(e._fullLayout._replotting=!0,"ew"===x||"ns"===B){var n=x?-t:0,i=B?-r:0;if(v.isSubplotConstrained){if(x&&B){var a=(t/m-r/y)/2;n=-(t=a*m),i=-(r=-a*y)}B?n=-i*m/y:i=-n*y/m}return x&&(dragAxList(h,t),ie("x")),B&&(dragAxList(g,r),ie("y")),le([n,i,m,y]),ae(),void e.emit("plotly_relayouting",U)}var o,s,l="w"===x==("n"===B)?1:-1;if(x&&B&&(b.isSubplotConstrained||v.isSubplotConstrained)){var c=(t/m+l*r/y)/2;t=c*m,r=l*c*y}if("w"===x?t=f(h,0,t):"e"===x?t=f(h,1,-t):x||(t=0),"n"===B?r=f(g,1,r):"s"===B?r=f(g,0,-r):B||(r=0),o="w"===x?t:0,s="n"===B?r:0,b.isSubplotConstrained&&!v.isSubplotConstrained||v.isSubplotConstrained&&x&&B&&l>0){var u;if(v.isSubplotConstrained||!x&&1===B.length){for(u=0;u<h.length;u++)h[u].range=h[u]._r.slice(),scaleZoom(h[u],1-r/y);o=(t=r*m/y)/2}if(v.isSubplotConstrained||!B&&1===x.length){for(u=0;u<g.length;u++)g[u].range=g[u]._r.slice(),scaleZoom(g[u],1-t/m);s=(r=t*y/m)/2}}v.isSubplotConstrained&&B||ie("x"),v.isSubplotConstrained&&x||ie("y");var d=m-t,p=y-r;!v.isSubplotConstrained||x&&B||(x?(s=o?0:t*y/m,p=d*y/m):(o=s?0:r*m/y,d=p*m/y)),le([o,s,d,p]),ae(),e.emit("plotly_relayouting",U)}function f(e,t,r){for(var n,i,a=1-t,o=0;o<e.length;o++){var s=e[o];if(!s.fixedrange){n=s,i=s._rl[a]+(s._rl[t]-s._rl[a])/dZoom(r/s._length);var l=s.l2r(i);!1!==l&&void 0!==l&&(s.range[t]=l)}}return n._length*(n._rl[t]-i)/(n._rl[t]-n._rl[a])}}function ie(e,t){for(var r=v.isSubplotConstrained?{x:g,y:h}[e]:v[e+"axes"],n=v.isSubplotConstrained?{x:h,y:g}[e]:[],i=0;i<r.length;i++){var a=r[i],o=a._id,s=v.xLinks[o]||v.yLinks[o],l=n[0]||u[s]||d[s];l&&(t?(t[a._name+".range[0]"]=t[l._name+".range[0]"],t[a._name+".range[1]"]=t[l._name+".range[1]"]):a.range=l.range.slice())}}function ae(){var r,n=[];function i(e){for(r=0;r<e.length;r++)e[r].fixedrange||n.push(e[r]._id)}function a(e,t){for(r=0;r<e.length;r++){var i=e[r],a=i[t];i.fixedrange||"sync"!==a.tickmode||n.push(a._id)}}for(F&&(i(h),i(b.xaxes),i(v.xaxes),a(t.overlays,"xaxis")),A&&(i(g),i(b.yaxes),i(v.yaxes),a(t.overlays,"yaxis")),U={},r=0;r<n.length;r++){var o=n[r],s=getFromId(e,o);Axes$h.drawOne(e,s,{skipTitle:!0}),U[s._name+".range[0]"]=s.range[0],U[s._name+".range[1]"]=s.range[1]}Axes$h.redrawComponents(e,n)}function oe(){if(!e._transitioningWithDuration){var t=e._context.doubleClick,r=[];x&&(r=r.concat(h)),B&&(r=r.concat(g)),v.xaxes&&(r=r.concat(v.xaxes)),v.yaxes&&(r=r.concat(v.yaxes));var n,i,a,o={};if("reset+autosize"===t)for(t="autosize",i=0;i<r.length;i++)if((n=r[i])._rangeInitial&&(n.range[0]!==n._rangeInitial[0]||n.range[1]!==n._rangeInitial[1])||!n._rangeInitial&&!n.autorange){t="reset";break}if("autosize"===t)for(i=0;i<r.length;i++)(n=r[i]).fixedrange||(o[n._name+".autorange"]=!0);else if("reset"===t)for((x||b.isSubplotConstrained)&&(r=r.concat(b.xaxes)),B&&!b.isSubplotConstrained&&(r=r.concat(b.yaxes)),b.isSubplotConstrained&&(x?B||(r=r.concat(g)):r=r.concat(h)),i=0;i<r.length;i++)(n=r[i]).fixedrange||(n._rangeInitial?(a=n._rangeInitial,o[n._name+".range[0]"]=a[0],o[n._name+".range[1]"]=a[1]):o[n._name+".autorange"]=!0);e.emit("plotly_doubleclick",null),Registry$t.call("_guiRelayout",e,o)}}function se(){le([0,0,m,y]),Lib$10.syncOrAsync([Plots$8.previousPromises,function(){e._fullLayout._replotting=!1,Registry$t.call("_guiRelayout",e,U)}],e)}function le(t){var r,n,i,a,h=e._fullLayout,g=h._plots,p=h._subplots.cartesian;if(w&&Registry$t.subplotsRegistry.splom.drag(e),C)for(r=0;r<p.length;r++)if(i=(n=g[p[r]]).xaxis,a=n.yaxis,n._scene){var f=Lib$10.simpleMap(i.range,i.r2l),m=Lib$10.simpleMap(a.range,a.r2l);n._scene.update({range:[f[0],m[0],f[1],m[1]]})}if((w||C)&&(clearGlCanvases(e),redrawReglTraces(e)),Q){var y=t[2]/l._length,b=t[3]/c._length;for(r=0;r<p.length;r++){i=(n=g[p[r]]).xaxis,a=n.yaxis;var I,U,S,E,L=(F||v.isSubplotConstrained)&&!i.fixedrange&&u[i._id],_=(A||v.isSubplotConstrained)&&!a.fixedrange&&d[a._id];if(L?(I=y,S=s||v.isSubplotConstrained?t[0]:de(i,I)):v.xaHash[i._id]?(I=y,S=t[0]*i._length/l._length):v.yaHash[i._id]?(I=b,S="ns"===B?-t[1]*i._length/c._length:de(i,I,{n:"top",s:"bottom"}[B])):S=ue(i,I=ce(i,y,b)),_?(U=b,E=o||v.isSubplotConstrained?t[1]:de(a,U)):v.yaHash[a._id]?(U=b,E=t[1]*a._length/c._length):v.xaHash[a._id]?(U=y,E="ew"===x?-t[0]*a._length/l._length:de(a,U,{e:"right",w:"left"}[x])):E=ue(a,U=ce(a,y,b)),I||U){I||(I=1),U||(U=1);var T=i._offset-S/I,R=a._offset-E/U;n.clipRect.call(Drawing$e.setTranslate,S,E).call(Drawing$e.setScale,I,U),n.plot.call(Drawing$e.setTranslate,T,R).call(Drawing$e.setScale,1/I,1/U),I===n.xScaleFactor&&U===n.yScaleFactor||(Drawing$e.setPointGroupScale(n.zoomScalePts,I,U),Drawing$e.setTextPointsScale(n.zoomScaleTxt,I,U)),Drawing$e.hideOutsideRangePoints(n.clipOnAxisFalseTraces,n),n.xScaleFactor=I,n.yScaleFactor=U}}}}function ce(e,t,r){return e.fixedrange?0:F&&b.xaHash[e._id]?t:A&&(b.isSubplotConstrained?b.xaHash:b.yaHash)[e._id]?r:0}function ue(e,t){return t?(e.range=e._r.slice(),scaleZoom(e,t),de(e,t)):0}function de(e,t,r){return e._length*(1-t)*FROM_TL$3[r||e.constraintoward||"middle"]}return o.length*s.length!=1&&attachWheelEventHandler(k,(function(t){if(e._context._scrollZoom.cartesian||e._fullLayout._enablescrollzoom){if(P(),e._transitioningWithDuration)return t.preventDefault(),void t.stopPropagation();R(),clearTimeout(ee);var r=-t.deltaY;if(isFinite(r)||(r=t.wheelDelta/10),isFinite(r)){var n,i=Math.exp(-Math.min(Math.max(r,-20),20)/200),a=re.draglayer.select(".nsewdrag").node().getBoundingClientRect(),l=(t.clientX-a.left)/a.width,c=(a.bottom-t.clientY)/a.height;if(F){for(s||(l=.5),n=0;n<h.length;n++)u(h[n],l,i);ie("x"),q[2]*=i,q[0]+=q[2]*l*(1/i-1)}if(A){for(o||(c=.5),n=0;n<g.length;n++)u(g[n],c,i);ie("y"),q[3]*=i,q[1]+=q[3]*(1-c)*(1/i-1)}le(q),ae(),e.emit("plotly_relayouting",U),ee=setTimeout((function(){e._fullLayout&&(q=[0,0,m,y],se())}),te),t.preventDefault()}else Lib$10.log("Did not find wheel motion attributes: ",t)}function u(e,t,r){if(!e.fixedrange){var n=Lib$10.simpleMap(e.range,e.r2l),i=n[0]+(n[1]-n[0])*t;e.range=n.map((function(t){return e.l2r(i+(t-i)*r)}))}}})),k}function makeDragger(e,t,r,n){var i=Lib$10.ensureSingle(e.draglayer,t,r,(function(t){t.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id)}));return i.call(setCursor$2,n),i.node()}function makeRectDragger(e,t,r,n,i,a,o){var s=makeDragger(e,"rect",t,r);return d3$f.select(s).call(Drawing$e.setRect,n,i,a,o),s}function isDirectionActive(e,t){for(var r=0;r<e.length;r++)if(!e[r].fixedrange)return t;return""}function getEndText(e,t){var r,n=e.range[t],i=Math.abs(n-e.range[1-t]);return"date"===e.type?n:"log"===e.type?(r=Math.ceil(Math.max(0,-Math.log(i)/Math.LN10))+3,numberFormat("."+r+"g")(Math.pow(10,n))):(r=Math.floor(Math.log(Math.abs(n))/Math.LN10)-Math.floor(Math.log(i)/Math.LN10)+4,numberFormat("."+String(r)+"g")(n))}function zoomAxRanges(e,t,r,n,i){for(var a=0;a<e.length;a++){var o=e[a];if(!o.fixedrange)if(o.rangebreaks){var s="y"===o._id.charAt(0),l=s?1-t:t,c=s?1-r:r;n[o._name+".range[0]"]=o.l2r(o.p2l(l*o._length)),n[o._name+".range[1]"]=o.l2r(o.p2l(c*o._length))}else{var u=o._rl[0],d=o._rl[1]-u;n[o._name+".range[0]"]=o.l2r(u+d*t),n[o._name+".range[1]"]=o.l2r(u+d*r)}}if(i&&i.length){var h=(t+(1-r))/2;zoomAxRanges(i,h,1-h,n,[])}}function dragAxList(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!n.fixedrange)if(n.rangebreaks){var i=n._length,a=(n.p2l(0+t)-n.p2l(0)+(n.p2l(i+t)-n.p2l(i)))/2;n.range=[n.l2r(n._rl[0]-a),n.l2r(n._rl[1]-a)]}else n.range=[n.l2r(n._rl[0]-t/n._m),n.l2r(n._rl[1]-t/n._m)]}}function dZoom(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function getDragCursor(e,t,r){return e?"nsew"===e?r?"":"pan"===t?"move":"crosshair":e.toLowerCase()+"-resize":"pointer"}function makeZoombox(e,t,r,n,i){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",strTranslate$5(r,n)).attr("d",i+"Z")}function makeCorners(e,t,r){return e.append("path").attr("class","zoombox-corners").style({fill:Color$m.background,stroke:Color$m.defaultLine,"stroke-width":1,opacity:0}).attr("transform",strTranslate$5(t,r)).attr("d","M0,0Z")}function updateZoombox(e,t,r,n,i,a){e.attr("d",n+"M"+r.l+","+r.t+"v"+r.h+"h"+r.w+"v-"+r.h+"h-"+r.w+"Z"),transitionZoombox(e,t,i,a)}function transitionZoombox(e,t,r,n){r||(e.transition().style("fill",n>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function removeZoombox(e){d3$f.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function showDoubleClickNotifier(e){SHOWZOOMOUTTIP&&e.data&&e._context.showTips&&(Lib$10.notifier(Lib$10._(e,"Double-click to zoom back out"),"long"),SHOWZOOMOUTTIP=!1)}function xCorners(e,t){return"M"+(e.l-.5)+","+(t-MINZOOM-.5)+"h-3v"+(2*MINZOOM+1)+"h3ZM"+(e.r+.5)+","+(t-MINZOOM-.5)+"h3v"+(2*MINZOOM+1)+"h-3Z"}function yCorners(e,t){return"M"+(t-MINZOOM-.5)+","+(e.t-.5)+"v-3h"+(2*MINZOOM+1)+"v3ZM"+(t-MINZOOM-.5)+","+(e.b+.5)+"v3h"+(2*MINZOOM+1)+"v-3Z"}function xyCorners(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,MINZOOM)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function calcLinks(e,t,r,n,i){for(var a,o,s,l,c=!1,u={},d={},h=(i||{}).xaHash,g=(i||{}).yaHash,p=0;p<t.length;p++){var f=t[p];for(a in r)if(f[a]){for(s in f)i&&(h[s]||g[s])||("x"===s.charAt(0)?r:n)[s]||(u[s]=a);for(o in n)i&&(h[o]||g[o])||!f[o]||(c=!0)}for(o in n)if(f[o])for(l in f)i&&(h[l]||g[l])||("x"===l.charAt(0)?r:n)[l]||(d[l]=o)}c&&(Lib$10.extendFlat(u,d),d={});var m={},y=[];for(s in u){var b=getFromId(e,s);y.push(b),m[b._id]=b}var v={},x=[];for(l in d){var B=getFromId(e,l);x.push(B),v[B._id]=B}return{xaHash:m,yaHash:v,xaxes:y,yaxes:x,xLinks:u,yLinks:d,isSubplotConstrained:c}}function attachWheelEventHandler(e,t){void 0!==e.onwheel?e.onwheel=t:void 0!==e.onmousewheel?e.onmousewheel=t:e.isAddedWheelEvent||(e.isAddedWheelEvent=!0,e.addEventListener("wheel",t,{passive:!1}))}function hashValues(e){var t=[];for(var r in e)t.push(e[r]);return t}var dragbox={makeDragBox:makeDragBox,makeDragger:makeDragger,makeRectDragger:makeRectDragger,makeZoombox:makeZoombox,makeCorners:makeCorners,updateZoombox:updateZoombox,xyCorners:xyCorners,transitionZoombox:transitionZoombox,removeZoombox:removeZoombox,showDoubleClickNotifier:showDoubleClickNotifier,attachWheelEventHandler:attachWheelEventHandler};!function(e){var t=d3Exports,r=fx,n=dragelementExports,i=setcursor,a=dragbox.makeDragBox,o=constants$K.DRAGGERSIZE;e.initInteractions=function(i){var s=i._fullLayout;if(i._context.staticPlot)t.select(i).selectAll(".drag").remove();else if(s._has("cartesian")||s._has("splom")){var l=Object.keys(s._plots||{}).sort((function(e,t){if((s._plots[e].mainplot&&!0)===(s._plots[t].mainplot&&!0)){var r=e.split("y"),n=t.split("y");return r[0]===n[0]?Number(r[1]||1)-Number(n[1]||1):Number(r[0]||1)-Number(n[0]||1)}return s._plots[e].mainplot?1:-1}));l.forEach((function(e){var t=s._plots[e],l=t.xaxis,c=t.yaxis;if(!t.mainplot){var u=a(i,t,l._offset,c._offset,l._length,c._length,"ns","ew");u.onmousemove=function(t){i._fullLayout._rehover=function(){i._fullLayout._hoversubplot===e&&i._fullLayout._plots[e]&&r.hover(i,t,e)},r.hover(i,t,e),i._fullLayout._lasthover=u,i._fullLayout._hoversubplot=e},u.onmouseout=function(e){i._dragging||(i._fullLayout._hoversubplot=null,n.unhover(i,e))},i._context.showAxisDragHandles&&(a(i,t,l._offset-o,c._offset-o,o,o,"n","w"),a(i,t,l._offset+l._length,c._offset-o,o,o,"n","e"),a(i,t,l._offset-o,c._offset+c._length,o,o,"s","w"),a(i,t,l._offset+l._length,c._offset+c._length,o,o,"s","e"))}if(i._context.showAxisDragHandles){if(e===l._mainSubplot){var d=l._mainLinePosition;"top"===l.side&&(d-=o),a(i,t,l._offset+.1*l._length,d,.8*l._length,o,"","ew"),a(i,t,l._offset,d,.1*l._length,o,"","w"),a(i,t,l._offset+.9*l._length,d,.1*l._length,o,"","e")}if(e===c._mainSubplot){var h=c._mainLinePosition;"right"!==c.side&&(h-=o),a(i,t,h,c._offset+.1*c._length,o,.8*c._length,"ns",""),a(i,t,h,c._offset+.9*c._length,o,.1*c._length,"s",""),a(i,t,h,c._offset,o,.1*c._length,"n","")}}}));var c=s._hoverlayer.node();c.onmousemove=function(e){e.target=i._fullLayout._lasthover,r.hover(i,e,s._hoversubplot)},c.onclick=function(e){e.target=i._fullLayout._lasthover,r.click(i,e)},c.onmousedown=function(e){i._fullLayout._lasthover.onmousedown(e)},e.updateFx(i)}},e.updateFx=function(e){var t=e._fullLayout,r="pan"===t.dragmode?"move":"crosshair";i(t._draggers,r)}}(graph_interact);var manage_arrays={},Registry$s=registry,container_array_match=function(e){for(var t,r,n=Registry$s.layoutArrayContainers,i=Registry$s.layoutArrayRegexes,a=e.split("[")[0],o=0;o<i.length;o++)if((r=e.match(i[o]))&&0===r.index){t=r[0];break}if(t||(t=n[n.indexOf(a)]),!t)return!1;var s=e.substr(t.length);return s?!!(r=s.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:t,index:Number(r[1]),property:r[3]||""}:{array:t,index:"",property:""}},isPlainObject$2=is_plain_object,noop=noop$1,Loggers=loggersExports,sorterAsc=search.sorterAsc,Registry$r=registry;manage_arrays.containerArrayMatch=container_array_match;var isAddVal=manage_arrays.isAddVal=function(e){return"add"===e||isPlainObject$2(e)},isRemoveVal=manage_arrays.isRemoveVal=function(e){return null===e||"remove"===e};manage_arrays.applyContainerArrayChanges=function(e,t,r,n,i){var a=t.astr,o=Registry$r.getComponentMethod(a,"supplyLayoutDefaults"),s=Registry$r.getComponentMethod(a,"draw"),l=Registry$r.getComponentMethod(a,"drawOne"),c=n.replot||n.recalc||o===noop||s===noop,u=e.layout,d=e._fullLayout;if(r[""]){Object.keys(r).length>1&&Loggers.warn("Full array edits are incompatible with other edits",a);var h=r[""][""];if(isRemoveVal(h))t.set(null);else{if(!Array.isArray(h))return Loggers.warn("Unrecognized full array edit value",a,h),!0;t.set(h)}return!c&&(o(u,d),s(e),!0)}var g,p,f,m,y,b,v,x,B=Object.keys(r).map(Number).sort(sorterAsc),I=t.get(),F=I||[],A=i(d,a).get(),C=[],w=-1,Q=F.length;for(g=0;g<B.length;g++)if(m=r[f=B[g]],y=Object.keys(m),b=m[""],v=isAddVal(b),f<0||f>F.length-(v?0:1))Loggers.warn("index out of range",a,f);else if(void 0!==b)y.length>1&&Loggers.warn("Insertion & removal are incompatible with edits to the same index.",a,f),isRemoveVal(b)?C.push(f):v?("add"===b&&(b={}),F.splice(f,0,b),A&&A.splice(f,0,{})):Loggers.warn("Unrecognized full object edit value",a,f,b),-1===w&&(w=f);else for(p=0;p<y.length;p++)x=a+"["+f+"].",i(F[f],y[p],x).set(m[y[p]]);for(g=C.length-1;g>=0;g--)F.splice(C[g],1),A&&A.splice(C[g],1);if(F.length?I||t.set(F):t.set(null),c)return!1;if(o(u,d),l!==noop){var U;if(-1===w)U=B;else{for(Q=Math.max(F.length,Q),U=[],g=0;g<B.length&&!((f=B[g])>=w);g++)U.push(f);for(g=w;g<Q;g++)U.push(g)}for(g=0;g<U.length;g++)l(e,U[g])}else s(e);return!0};var helpers$e={};!function(e){var t=fastIsnumeric,r=fromQuat_1,n=registry,i=libExports,a=plotsExports,o=axis_ids,s=colorExports,l=o.cleanId,c=o.getFromTrace,u=n.traceIs;function d(e,t){var r=e[t],n=t.charAt(0);r&&"paper"!==r&&(e[t]=l(r,n,!0))}function h(e){function t(t,r){var n=e[t],i=e.title&&e.title[r];n&&!i&&(e.title||(e.title={}),e.title[r]=e[t],delete e[t])}e&&("string"!=typeof e.title&&"number"!=typeof e.title||(e.title={text:e.title}),t("titlefont","font"),t("titleposition","position"),t("titleside","side"),t("titleoffset","offset"))}function g(e){if(!i.isPlainObject(e))return!1;var t=e.name;return delete e.name,delete e.showlegend,("string"==typeof t||"number"==typeof t)&&String(t)}function p(e,t,r,n){if(r&&!n)return e;if(n&&!r)return t;if(!e.trim())return t;if(!t.trim())return e;var i,a=Math.min(e.length,t.length);for(i=0;i<a&&e.charAt(i)===t.charAt(i);i++);return e.substr(0,i).trim()}function f(e){var t="middle",r="center";return"string"==typeof e&&(-1!==e.indexOf("top")?t="top":-1!==e.indexOf("bottom")&&(t="bottom"),-1!==e.indexOf("left")?r="left":-1!==e.indexOf("right")&&(r="right")),t+" "+r}function m(e,t){return t in e&&"object"==typeof e[t]&&0===Object.keys(e[t]).length}e.clearPromiseQueue=function(e){Array.isArray(e._promises)&&e._promises.length>0&&i.log("Clearing previous rejected promises from queue."),e._promises=[]},e.cleanLayout=function(t){var n,o;t||(t={}),t.xaxis1&&(t.xaxis||(t.xaxis=t.xaxis1),delete t.xaxis1),t.yaxis1&&(t.yaxis||(t.yaxis=t.yaxis1),delete t.yaxis1),t.scene1&&(t.scene||(t.scene=t.scene1),delete t.scene1);var c=(a.subplotsRegistry.cartesian||{}).attrRegex,u=(a.subplotsRegistry.polar||{}).attrRegex,g=(a.subplotsRegistry.ternary||{}).attrRegex,p=(a.subplotsRegistry.gl3d||{}).attrRegex,f=Object.keys(t);for(n=0;n<f.length;n++){var y=f[n];if(c&&c.test(y)){var b=t[y];b.anchor&&"free"!==b.anchor&&(b.anchor=l(b.anchor)),b.overlaying&&(b.overlaying=l(b.overlaying)),b.type||(b.isdate?b.type="date":b.islog?b.type="log":!1===b.isdate&&!1===b.islog&&(b.type="linear")),"withzero"!==b.autorange&&"tozero"!==b.autorange||(b.autorange=!0,b.rangemode="tozero"),delete b.islog,delete b.isdate,delete b.categories,m(b,"domain")&&delete b.domain,void 0!==b.autotick&&(void 0===b.tickmode&&(b.tickmode=b.autotick?"auto":"linear"),delete b.autotick),h(b)}else if(u&&u.test(y)){h(t[y].radialaxis)}else if(g&&g.test(y)){var v=t[y];h(v.aaxis),h(v.baxis),h(v.caxis)}else if(p&&p.test(y)){var x=t[y],B=x.cameraposition;if(Array.isArray(B)&&4===B[0].length){var I=B[0],F=B[1],A=B[2],C=r([],I),w=[];for(o=0;o<3;++o)w[o]=F[o]+A*C[2+4*o];x.camera={eye:{x:w[0],y:w[1],z:w[2]},center:{x:F[0],y:F[1],z:F[2]},up:{x:0,y:0,z:1}},delete x.cameraposition}h(x.xaxis),h(x.yaxis),h(x.zaxis)}}var Q=Array.isArray(t.annotations)?t.annotations.length:0;for(n=0;n<Q;n++){var U=t.annotations[n];i.isPlainObject(U)&&(U.ref&&("paper"===U.ref?(U.xref="paper",U.yref="paper"):"data"===U.ref&&(U.xref="x",U.yref="y"),delete U.ref),d(U,"xref"),d(U,"yref"))}var S=Array.isArray(t.shapes)?t.shapes.length:0;for(n=0;n<S;n++){var E=t.shapes[n];i.isPlainObject(E)&&(d(E,"xref"),d(E,"yref"))}var L=Array.isArray(t.images)?t.images.length:0;for(n=0;n<L;n++){var _=t.images[n];i.isPlainObject(_)&&(d(_,"xref"),d(_,"yref"))}var T=t.legend;return T&&(T.x>3?(T.x=1.02,T.xanchor="left"):T.x<-2&&(T.x=-.02,T.xanchor="right"),T.y>3?(T.y=1.02,T.yanchor="bottom"):T.y<-2&&(T.y=-.02,T.yanchor="top")),h(t),"rotate"===t.dragmode&&(t.dragmode="orbit"),s.clean(t),t.template&&t.template.layout&&e.cleanLayout(t.template.layout),t},e.cleanData=function(t){for(var r=0;r<t.length;r++){var o,c=t[r];if("histogramy"===c.type&&"xbins"in c&&!("ybins"in c)&&(c.ybins=c.xbins,delete c.xbins),c.error_y&&"opacity"in c.error_y){var d=s.defaults,y=c.error_y.color||(u(c,"bar")?s.defaultLine:d[r%d.length]);c.error_y.color=s.addOpacity(s.rgb(y),s.opacity(y)*c.error_y.opacity),delete c.error_y.opacity}if("bardir"in c&&("h"!==c.bardir||!u(c,"bar")&&"histogram"!==c.type.substr(0,9)||(c.orientation="h",e.swapXYData(c)),delete c.bardir),"histogramy"===c.type&&e.swapXYData(c),"histogramx"!==c.type&&"histogramy"!==c.type||(c.type="histogram"),"scl"in c&&!("colorscale"in c)&&(c.colorscale=c.scl,delete c.scl),"reversescl"in c&&!("reversescale"in c)&&(c.reversescale=c.reversescl,delete c.reversescl),c.xaxis&&(c.xaxis=l(c.xaxis,"x")),c.yaxis&&(c.yaxis=l(c.yaxis,"y")),u(c,"gl3d")&&c.scene&&(c.scene=a.subplotsRegistry.gl3d.cleanId(c.scene)),!u(c,"pie-like")&&!u(c,"bar-like"))if(Array.isArray(c.textposition))for(o=0;o<c.textposition.length;o++)c.textposition[o]=f(c.textposition[o]);else c.textposition&&(c.textposition=f(c.textposition));var b=n.getModule(c);if(b&&b.colorbar){var v=b.colorbar.container,x=v?c[v]:c;x&&x.colorscale&&("YIGnBu"===x.colorscale&&(x.colorscale="YlGnBu"),"YIOrRd"===x.colorscale&&(x.colorscale="YlOrRd"))}if("surface"===c.type&&i.isPlainObject(c.contours)){var B=["x","y","z"];for(o=0;o<B.length;o++){var I=c.contours[B[o]];i.isPlainObject(I)&&(I.highlightColor&&(I.highlightcolor=I.highlightColor,delete I.highlightColor),I.highlightWidth&&(I.highlightwidth=I.highlightWidth,delete I.highlightWidth))}}if("candlestick"===c.type||"ohlc"===c.type){var F=!1!==(c.increasing||{}).showlegend,A=!1!==(c.decreasing||{}).showlegend,C=g(c.increasing),w=g(c.decreasing);if(!1!==C&&!1!==w){var Q=p(C,w,F,A);Q&&(c.name=Q)}else!C&&!w||c.name||(c.name=C||w)}if(Array.isArray(c.transforms)){var U=c.transforms;for(o=0;o<U.length;o++){var S=U[o];if(i.isPlainObject(S))switch(S.type){case"filter":S.filtersrc&&(S.target=S.filtersrc,delete S.filtersrc),S.calendar&&(S.valuecalendar||(S.valuecalendar=S.calendar),delete S.calendar);break;case"groupby":if(S.styles=S.styles||S.style,S.styles&&!Array.isArray(S.styles)){var E=S.styles,L=Object.keys(E);S.styles=[];for(var _=0;_<L.length;_++)S.styles.push({target:L[_],value:E[L[_]]})}}}}m(c,"line")&&delete c.line,"marker"in c&&(m(c.marker,"line")&&delete c.marker.line,m(c,"marker")&&delete c.marker),s.clean(c),c.autobinx&&(delete c.autobinx,delete c.xbins),c.autobiny&&(delete c.autobiny,delete c.ybins),h(c),c.colorbar&&h(c.colorbar),c.marker&&c.marker.colorbar&&h(c.marker.colorbar),c.line&&c.line.colorbar&&h(c.line.colorbar),c.aaxis&&h(c.aaxis),c.baxis&&h(c.baxis)}},e.swapXYData=function(e){var t;if(i.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y){var r=e.error_y,n="copy_ystyle"in r?r.copy_ystyle:!(r.color||r.thickness||r.width);i.swapAttrs(e,["error_?.copy_ystyle"]),n&&i.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof e.hoverinfo){var a=e.hoverinfo.split("+");for(t=0;t<a.length;t++)"x"===a[t]?a[t]="y":"y"===a[t]&&(a[t]="x");e.hoverinfo=a.join("+")}},e.coerceTraceIndices=function(e,r){if(t(r))return[r];if(!Array.isArray(r)||!r.length)return e.data.map((function(e,t){return t}));if(Array.isArray(r)){for(var n=[],a=0;a<r.length;a++)i.isIndex(r[a],e.data.length)?n.push(r[a]):i.warn("trace index (",r[a],") is not a number or is out of bounds");return n}return r},e.manageArrayContainers=function(e,r,n){var a=e.obj,o=e.parts,s=o.length,l=o[s-1],c=t(l);if(c&&null===r){var u=o.slice(0,s-1).join(".");i.nestedProperty(a,u).get().splice(l,1)}else c&&void 0===e.get()?(void 0===e.get()&&(n[e.astr]=null),e.set(r)):e.set(r)};var y=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function b(e){var t=e.search(y);if(t>0)return e.substr(0,t)}e.hasParent=function(e,t){for(var r=b(t);r;){if(r in e)return!0;r=b(r)}return!1};var v=["x","y","z"];e.clearAxisTypes=function(e,t,r){for(var n=0;n<t.length;n++)for(var a=e._fullData[n],o=0;o<3;o++){var s=c(e,a,v[o]);if(s&&"log"!==s.type){var l=s._name,u=s._id.substr(1);if("scene"===u.substr(0,5)){if(void 0!==r[u])continue;l=u+"."+l}var d=l+".type";void 0===r[l]&&void 0===r[d]&&i.nestedProperty(e.layout,d).set(null)}}}}(helpers$e),function(e){var t=d3Exports,r=fastIsnumeric,n=hasHover_1,i=libExports,a=i.nestedProperty,o=events,s=queue_1,l=registry,c=plot_schema,u=plotsExports,d=axesExports,h=drawingExports,g=colorExports,p=graph_interact.initInteractions,f=xmlns_namespaces,m=selections.clearOutline,y=plot_config.dfltConfig,b=manage_arrays,v=helpers$e,x=subroutines,B=edit_types,I=constants$K.AX_NAME_PATTERN,F=0;function A(e){var t=e._fullLayout;t._redrawFromAutoMarginCount?t._redrawFromAutoMarginCount--:e.emit("plotly_afterplot")}function C(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){i.error(e)}}function w(e,t){C(e,g.combine(t,"white"))}function Q(e,r){if(!e._context){e._context=i.extendDeep({},y);var a=t.select("base");e._context._baseUrl=a.size()&&a.attr("href")?window.location.href.split("#")[0]:""}var o,s,l,c=e._context;if(r){for(s=Object.keys(r),o=0;o<s.length;o++)"editable"!==(l=s[o])&&"edits"!==l&&l in c&&("setBackground"===l&&"opaque"===r[l]?c[l]=w:c[l]=r[l]);r.plot3dPixelRatio&&!c.plotGlPixelRatio&&(c.plotGlPixelRatio=c.plot3dPixelRatio);var u=r.editable;if(void 0!==u)for(c.editable=u,s=Object.keys(c.edits),o=0;o<s.length;o++)c.edits[s[o]]=u;if(r.edits)for(s=Object.keys(r.edits),o=0;o<s.length;o++)(l=s[o])in c.edits&&(c.edits[l]=r.edits[l]);c._exportedPlot=r._exportedPlot}c.staticPlot&&(c.editable=!1,c.edits={},c.autosizable=!1,c.scrollZoom=!1,c.doubleClick=!1,c.showTips=!1,c.showLink=!1,c.displayModeBar=!1),"hover"!==c.displayModeBar||n||(c.displayModeBar=!0),"transparent"!==c.setBackground&&"function"==typeof c.setBackground||(c.setBackground=C),c._hasZeroHeight=c._hasZeroHeight||0===e.clientHeight,c._hasZeroWidth=c._hasZeroWidth||0===e.clientWidth;var d=c.scrollZoom,h=c._scrollZoom={};if(!0===d)h.cartesian=1,h.gl3d=1,h.geo=1,h.mapbox=1;else if("string"==typeof d){var g=d.split("+");for(o=0;o<g.length;o++)h[g[o]]=1}else!1!==d&&(h.gl3d=1,h.geo=1,h.mapbox=1)}function U(e,t){var r,n,i=t+1,a=[];for(r=0;r<e.length;r++)(n=e[r])<0?a.push(i+n):a.push(n);return a}function S(e,t,r){var n,i;for(n=0;n<t.length;n++){if((i=t[n])!==parseInt(i,10))throw new Error("all values in "+r+" must be integers");if(i>=e.data.length||i<-e.data.length)throw new Error(r+" must be valid indices for gd.data.");if(t.indexOf(i,n+1)>-1||i>=0&&t.indexOf(-e.data.length+i)>-1||i<0&&t.indexOf(e.data.length+i)>-1)throw new Error("each index in "+r+" must be unique.")}}function E(e,t,r){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("currentIndices is a required argument.");if(Array.isArray(t)||(t=[t]),S(e,t,"currentIndices"),void 0===r||Array.isArray(r)||(r=[r]),void 0!==r&&S(e,r,"newIndices"),void 0!==r&&t.length!==r.length)throw new Error("current and new indices must be of equal length.")}function L(e,t,n,o,s){!function(e,t,r,n){var a=i.isPlainObject(n);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!i.isPlainObject(t))throw new Error("update must be a key:value object");if(void 0===r)throw new Error("indices must be an integer or array of integers");for(var o in S(e,r,"indices"),t){if(!Array.isArray(t[o])||t[o].length!==r.length)throw new Error("attribute "+o+" must be an array of length equal to indices array length");if(a&&(!(o in n)||!Array.isArray(n[o])||n[o].length!==t[o].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(e,t,n,o);for(var l=function(e,t,n,o){var s,l,c,u,d,h=i.isPlainObject(o),g=[];for(var p in Array.isArray(n)||(n=[n]),n=U(n,e.data.length-1),t)for(var f=0;f<n.length;f++){if(s=e.data[n[f]],l=(c=a(s,p)).get(),u=t[p][f],!i.isArrayOrTypedArray(u))throw new Error("attribute: "+p+" index: "+f+" must be an array");if(!i.isArrayOrTypedArray(l))throw new Error("cannot extend missing or non-array attribute: "+p);if(l.constructor!==u.constructor)throw new Error("cannot extend array with an array of a different type: "+p);d=h?o[p][f]:o,r(d)||(d=-1),g.push({prop:c,target:l,insert:u,maxp:Math.floor(d)})}return g}(e,t,n,o),c={},u={},d=0;d<l.length;d++){var h=l[d].prop,g=l[d].maxp,p=s(l[d].target,l[d].insert,g);h.set(p[0]),Array.isArray(c[h.astr])||(c[h.astr]=[]),c[h.astr].push(p[1]),Array.isArray(u[h.astr])||(u[h.astr]=[]),u[h.astr].push(l[d].target.length)}return{update:c,maxPoints:u}}function _(e,t){var r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}function T(t,r,n,a){t=i.getGraphDiv(t),v.clearPromiseQueue(t);var o={};if("string"==typeof r)o[r]=n;else{if(!i.isPlainObject(r))return i.warn("Restyle fail.",r,n,a),Promise.reject();o=i.extendFlat({},r),void 0===a&&(a=n)}Object.keys(o).length&&(t.changed=!0);var l=v.coerceTraceIndices(t,a),c=N(t,o,l),d=c.flags;d.calc&&(t.calcdata=void 0),d.clearAxisTypes&&v.clearAxisTypes(t,l,{});var h=[];d.fullReplot?h.push(e._doPlot):(h.push(u.previousPromises),u.supplyDefaults(t),d.markerSize&&(u.doCalcdata(t),V(h)),d.style&&h.push(x.doTraceStyle),d.colorbars&&h.push(x.doColorBars),h.push(A)),h.push(u.rehover,u.redrag,u.reselect),s.add(t,T,[t,c.undoit,c.traces],T,[t,c.redoit,c.traces]);var g=i.syncOrAsync(h,t);return g&&g.then||(g=Promise.resolve()),g.then((function(){return t.emit("plotly_restyle",c.eventData),t}))}function R(e){return void 0===e?null:e}function $(e,t){return t?function(t,r,n){var i=a(t,r),o=i.set;return i.set=function(t){k((n||"")+r,i.get(),t,e),o(t)},i}:a}function k(e,t,r,n){if(Array.isArray(t)||Array.isArray(r))for(var a=Array.isArray(t)?t:[],o=Array.isArray(r)?r:[],s=Math.max(a.length,o.length),l=0;l<s;l++)k(e+"["+l+"]",a[l],o[l],n);else if(i.isPlainObject(t)||i.isPlainObject(r)){var c=i.isPlainObject(t)?t:{},u=i.isPlainObject(r)?r:{},d=i.extendFlat({},c,u);for(var h in d)k(e+"."+h,c[h],u[h],n)}else void 0===n[e]&&(n[e]=R(t))}function N(e,t,r){var n,o=e._fullLayout,s=e._fullData,h=e.data,g=o._guiEditing,p=$(o._preGUI,g),f=i.extendDeepAll({},t);G(t);var m,y=B.traceFlags(),b={},x={};function I(){return r.map((function(){}))}function F(e){var t=d.id2name(e);-1===m.indexOf(t)&&m.push(t)}function A(e){return"LAYOUT"+e+".autorange"}function C(e){return"LAYOUT"+e+".range"}function w(e){for(var t=e;t<s.length;t++)if(s[t]._input===h[e])return s[t]}function Q(n,i,a){if(Array.isArray(n))n.forEach((function(e){Q(e,i,a)}));else if(!(n in t)&&!v.hasParent(t,n)){var s;if("LAYOUT"===n.substr(0,6))s=p(e.layout,n.replace("LAYOUT",""));else{var l=r[a];s=$(o._tracePreGUI[w(l)._fullInput.uid],g)(h[l],n)}n in x||(x[n]=I()),void 0===x[n][a]&&(x[n][a]=R(s.get())),void 0!==i&&s.set(i)}}function U(e){return function(t){return s[t][e]}}function S(e){return function(t,n){return!1===t?s[r[n]][e]:null}}for(var E in t){if(v.hasParent(t,E))throw new Error("cannot set "+E+" and a parent attribute simultaneously");var L,_,T,k,N,M,D=t[E];if("autobinx"!==E&&"autobiny"!==E||(E=E.charAt(E.length-1)+"bins",D=Array.isArray(D)?D.map(S(E)):!1===D?r.map(U(E)):null),b[E]=D,"LAYOUT"!==E.substr(0,6)){for(x[E]=I(),n=0;n<r.length;n++){if(L=h[r[n]],_=w(r[n]),k=(T=$(o._tracePreGUI[_._fullInput.uid],g)(L,E)).get(),void 0!==(N=Array.isArray(D)?D[n%D.length]:D)){var V=T.parts[T.parts.length-1],H=E.substr(0,E.length-V.length-1),X=H?H+".":"",O=H?a(_,H).get():_;if((M=c.getTraceValObject(_,T.parts))&&M.impliedEdits&&null!==N)for(var Z in M.impliedEdits)Q(i.relativeAttr(E,Z),M.impliedEdits[Z],n);else if("thicknessmode"!==V&&"lenmode"!==V||k===N||"fraction"!==N&&"pixels"!==N||!O){if("type"===E&&("pie"===N!=("pie"===k)||"funnelarea"===N!=("funnelarea"===k))){var W="x",Y="y";"bar"!==N&&"bar"!==k||"h"!==L.orientation||(W="y",Y="x"),i.swapAttrs(L,["?","?src"],"labels",W),i.swapAttrs(L,["d?","?0"],"label",W),i.swapAttrs(L,["?","?src"],"values",Y),"pie"===k||"funnelarea"===k?(a(L,"marker.color").set(a(L,"marker.colors").get()),o._pielayer.selectAll("g.trace").remove()):l.traceIs(L,"cartesian")&&a(L,"marker.colors").set(a(L,"marker.color").get())}}else{var P=o._size,z=O.orient,J="top"===z||"bottom"===z;if("thicknessmode"===V){var j=J?P.h:P.w;Q(X+"thickness",O.thickness*("fraction"===N?1/j:j),n)}else{var K=J?P.w:P.h;Q(X+"len",O.len*("fraction"===N?1/K:K),n)}}x[E][n]=R(k);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(E)){if("orientation"===E){T.set(N);var q=L.x&&!L.y?"h":"v";if((T.get()||q)===_.orientation)continue}else"orientationaxes"===E&&(L.orientation={v:"h",h:"v"}[_.orientation]);v.swapXYData(L),y.calc=y.clearAxisTypes=!0}else-1!==u.dataArrayContainers.indexOf(T.parts[0])?(v.manageArrayContainers(T,N,x),y.calc=!0):(M?M.arrayOk&&!l.traceIs(_,"regl")&&(i.isArrayOrTypedArray(N)||i.isArrayOrTypedArray(k))?y.calc=!0:B.update(y,M):y.calc=!0,T.set(N))}}if(-1!==["swapxyaxes","orientationaxes"].indexOf(E)&&d.swap(e,r),"orientationaxes"===E){var ee=a(e.layout,"hovermode"),te=ee.get();"x"===te?ee.set("y"):"y"===te?ee.set("x"):"x unified"===te?ee.set("y unified"):"y unified"===te&&ee.set("x unified")}if(-1!==["orientation","type"].indexOf(E)){for(m=[],n=0;n<r.length;n++){var re=h[r[n]];l.traceIs(re,"cartesian")&&(F(re.xaxis||"x"),F(re.yaxis||"y"))}Q(m.map(A),!0,0),Q(m.map(C),[0,1],0)}}else T=p(e.layout,E.replace("LAYOUT","")),x[E]=[R(T.get())],T.set(Array.isArray(D)?D[0]:D),y.calc=!0}return(y.calc||y.plot)&&(y.fullReplot=!0),{flags:y,undoit:x,redoit:b,traces:r,eventData:i.extendDeepNoArrays([],[f,r])}}function G(e){var t,r,n,a=i.counterRegex("axis",".title",!1,!1),o=/colorbar\.title$/,s=Object.keys(e);for(t=0;t<s.length;t++)r=s[t],n=e[r],"title"!==r&&!a.test(r)&&!o.test(r)||"string"!=typeof n&&"number"!=typeof n?r.indexOf("titlefont")>-1&&-1===r.indexOf("grouptitlefont")?l(r,r.replace("titlefont","title.font")):r.indexOf("titleposition")>-1?l(r,r.replace("titleposition","title.position")):r.indexOf("titleside")>-1?l(r,r.replace("titleside","title.side")):r.indexOf("titleoffset")>-1&&l(r,r.replace("titleoffset","title.offset")):l(r,r.replace("title","title.text"));function l(t,r){e[r]=e[t],delete e[t]}}function M(e,t,r){e=i.getGraphDiv(e),v.clearPromiseQueue(e);var n={};if("string"==typeof t)n[t]=r;else{if(!i.isPlainObject(t))return i.warn("Relayout fail.",t,r),Promise.reject();n=i.extendFlat({},t)}Object.keys(n).length&&(e.changed=!0);var a=Z(e,n),o=a.flags;o.calc&&(e.calcdata=void 0);var l=[u.previousPromises];o.layoutReplot?l.push(x.layoutReplot):Object.keys(n).length&&(D(e,o,a)||u.supplyDefaults(e),o.legend&&l.push(x.doLegend),o.layoutstyle&&l.push(x.layoutStyles),o.axrange&&V(l,a.rangesAltered),o.ticks&&l.push(x.doTicksRelayout),o.modebar&&l.push(x.doModeBar),o.camera&&l.push(x.doCamera),o.colorbars&&l.push(x.doColorBars),l.push(A)),l.push(u.rehover,u.redrag,u.reselect),s.add(e,M,[e,a.undoit],M,[e,a.redoit]);var c=i.syncOrAsync(l,e);return c&&c.then||(c=Promise.resolve(e)),c.then((function(){return e.emit("plotly_relayout",a.eventData),e}))}function D(e,t,r){var n=e._fullLayout;if(!t.axrange)return!1;for(var i in t)if("axrange"!==i&&t[i])return!1;for(var a in r.rangesAltered){var o=d.id2name(a),s=e.layout[o],l=n[o];if(l.autorange=s.autorange,s.range&&(l.range=s.range.slice()),l.cleanRange(),l._matchGroup)for(var c in l._matchGroup)if(c!==a){var u=n[d.id2name(c)];u.autorange=l.autorange,u.range=l.range.slice(),u._input.range=l.range.slice()}}return!0}function V(e,t){var r=t?function(e){var r=[];for(var n in t){var i=d.getFromId(e,n);if(r.push(n),-1!==(i.ticklabelposition||"").indexOf("inside")&&i._anchorAxis&&r.push(i._anchorAxis._id),i._matchGroup)for(var a in i._matchGroup)t[a]||r.push(a)}return d.draw(e,r,{skipTitle:!0})}:function(e){return d.draw(e,"redraw")};e.push(m,x.doAutoRangeAndConstraints,r,x.drawData,x.finalDraw)}var H=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,X=/^[xyz]axis[0-9]*\.autorange$/,O=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function Z(e,t){var r,n,o,s=e.layout,u=e._fullLayout,h=u._guiEditing,g=$(u._preGUI,h),p=Object.keys(t),f=d.list(e),m=i.extendDeepAll({},t),y={};for(G(t),p=Object.keys(t),n=0;n<p.length;n++)if(0===p[n].indexOf("allaxes")){for(o=0;o<f.length;o++){var x=f[o]._id.substr(1),F=-1!==x.indexOf("scene")?x+".":"",A=p[n].replace("allaxes",F+f[o]._name);t[A]||(t[A]=t[p[n]])}delete t[p[n]]}var C=B.layoutFlags(),w={},Q={};function U(e,r){if(Array.isArray(e))e.forEach((function(e){U(e,r)}));else if(!(e in t)&&!v.hasParent(t,e)){var n=g(s,e);e in Q||(Q[e]=R(n.get())),void 0!==r&&n.set(r)}}var S,E={};function L(e){var t=d.name2id(e.split(".")[0]);return E[t]=1,t}for(var _ in t){if(v.hasParent(t,_))throw new Error("cannot set "+_+" and a parent attribute simultaneously");for(var T=g(s,_),k=t[_],N=T.parts.length-1;N>0&&"string"!=typeof T.parts[N];)N--;var M=T.parts[N],D=T.parts[N-1]+"."+M,V=T.parts.slice(0,N).join("."),Z=a(e.layout,V).get(),Y=a(u,V).get(),P=T.get();if(void 0!==k){w[_]=k,Q[_]="reverse"===M?k:R(P);var z=c.getLayoutValObject(u,T.parts);if(z&&z.impliedEdits&&null!==k)for(var J in z.impliedEdits)U(i.relativeAttr(_,J),z.impliedEdits[J]);if(-1!==["width","height"].indexOf(_))if(k){U("autosize",null);var j="height"===_?"width":"height";U(j,u[j])}else u[_]=e._initialAutoSize[_];else if("autosize"===_)U("width",k?null:u.width),U("height",k?null:u.height);else if(D.match(H))L(D),a(u,V+"._inputRange").set(null);else if(D.match(X)){L(D),a(u,V+"._inputRange").set(null);var K=a(u,V).get();K._inputDomain&&(K._input.domain=K._inputDomain.slice())}else D.match(O)&&a(u,V+"._inputDomain").set(null);if("type"===M){S=Z;var q="linear"===Y.type&&"log"===k,ee="log"===Y.type&&"linear"===k;if(q||ee){if(S&&S.range)if(Y.autorange)q&&(S.range=S.range[1]>S.range[0]?[1,2]:[2,1]);else{var te=S.range[0],re=S.range[1];q?(te<=0&&re<=0&&U(V+".autorange",!0),te<=0?te=re/1e6:re<=0&&(re=te/1e6),U(V+".range[0]",Math.log(te)/Math.LN10),U(V+".range[1]",Math.log(re)/Math.LN10)):(U(V+".range[0]",Math.pow(10,te)),U(V+".range[1]",Math.pow(10,re)))}else U(V+".autorange",!0);Array.isArray(u._subplots.polar)&&u._subplots.polar.length&&u[T.parts[0]]&&"radialaxis"===T.parts[1]&&delete u[T.parts[0]]._subplot.viewInitial["radialaxis.range"],l.getComponentMethod("annotations","convertCoords")(e,Y,k,U),l.getComponentMethod("images","convertCoords")(e,Y,k,U)}else U(V+".autorange",!0),U(V+".range",null);a(u,V+"._inputRange").set(null)}else if(M.match(I)){var ne=a(u,_).get(),ie=(k||{}).type;ie&&"-"!==ie||(ie="linear"),l.getComponentMethod("annotations","convertCoords")(e,ne,ie,U),l.getComponentMethod("images","convertCoords")(e,ne,ie,U)}var ae=b.containerArrayMatch(_);if(ae){r=ae.array,n=ae.index;var oe=ae.property,se=z||{editType:"calc"};""!==n&&""===oe&&(b.isAddVal(k)?Q[_]=null:b.isRemoveVal(k)?Q[_]=(a(s,r).get()||[])[n]:i.warn("unrecognized full object value",t)),B.update(C,se),y[r]||(y[r]={});var le=y[r][n];le||(le=y[r][n]={}),le[oe]=k,delete t[_]}else"reverse"===M?(Z.range?Z.range.reverse():(U(V+".autorange",!0),Z.range=[1,0]),Y.autorange?C.calc=!0:C.plot=!0):("dragmode"===_&&(!1===k&&!1!==P||!1!==k&&!1===P)||u._has("scatter-like")&&u._has("regl")&&"dragmode"===_&&("lasso"===k||"select"===k)&&"lasso"!==P&&"select"!==P||u._has("gl2d")?C.plot=!0:z?B.update(C,z):C.calc=!0,T.set(k))}}for(r in y){b.applyContainerArrayChanges(e,g(s,r),y[r],C,g)||(C.plot=!0)}for(var ce in E){var ue=(S=d.getFromId(e,ce))&&S._constraintGroup;if(ue)for(var de in C.calc=!0,ue)E[de]||(d.getFromId(e,de)._constraintShrinkable=!0)}return(W(e)||t.height||t.width)&&(C.plot=!0),(C.plot||C.calc)&&(C.layoutReplot=!0),{flags:C,rangesAltered:E,undoit:Q,redoit:w,eventData:m}}function W(e){var t=e._fullLayout,r=t.width,n=t.height;return e.layout.autosize&&u.plotAutoSize(e,e.layout,t),t.width!==r||t.height!==n}function Y(t,r,n,a){t=i.getGraphDiv(t),v.clearPromiseQueue(t),i.isPlainObject(r)||(r={}),i.isPlainObject(n)||(n={}),Object.keys(r).length&&(t.changed=!0),Object.keys(n).length&&(t.changed=!0);var o=v.coerceTraceIndices(t,a),l=N(t,i.extendFlat({},r),o),c=l.flags,d=Z(t,i.extendFlat({},n)),h=d.flags;(c.calc||h.calc)&&(t.calcdata=void 0),c.clearAxisTypes&&v.clearAxisTypes(t,o,n);var g=[];h.layoutReplot?g.push(x.layoutReplot):c.fullReplot?g.push(e._doPlot):(g.push(u.previousPromises),D(t,h,d)||u.supplyDefaults(t),c.style&&g.push(x.doTraceStyle),(c.colorbars||h.colorbars)&&g.push(x.doColorBars),h.legend&&g.push(x.doLegend),h.layoutstyle&&g.push(x.layoutStyles),h.axrange&&V(g,d.rangesAltered),h.ticks&&g.push(x.doTicksRelayout),h.modebar&&g.push(x.doModeBar),h.camera&&g.push(x.doCamera),g.push(A)),g.push(u.rehover,u.redrag,u.reselect),s.add(t,Y,[t,l.undoit,d.undoit,l.traces],Y,[t,l.redoit,d.redoit,l.traces]);var p=i.syncOrAsync(g,t);return p&&p.then||(p=Promise.resolve(t)),p.then((function(){return t.emit("plotly_update",{data:l.eventData,layout:d.eventData}),t}))}function P(e){return function(t){t._fullLayout._guiEditing=!0;var r=e.apply(null,arguments);return t._fullLayout._guiEditing=!1,r}}var z=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],J=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function j(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=e.match(n.pattern);if(i){var a=i[1]||"";return{head:a,tail:e.substr(a.length+1),attr:n.attr}}}}function K(e,t){var r=a(t,e).get();if(void 0!==r)return r;var n=e.split(".");for(n.pop();n.length>1;)if(n.pop(),void 0!==(r=a(t,n.join(".")+".uirevision").get()))return r;return t.uirevision}function q(e,t){for(var r=0;r<t.length;r++)if(t[r]._fullInput.uid===e)return r;return-1}function ee(e,t,r){for(var n=0;n<t.length;n++)if(t[n].uid===e)return n;return!t[r]||t[r].uid?-1:r}function te(e,t){var r=i.isPlainObject(e),n=Array.isArray(e);return r||n?(r&&i.isPlainObject(t)||n&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t):e===t}function re(e,t,r,n){var o,s,l,c=n.getValObject,u=n.flags,d=n.immutable,h=n.inArray,g=n.arrayIndex;function p(){var e=o.editType;h&&-1!==e.indexOf("arraydraw")?i.pushUnique(u.arrays[h],g):(B.update(u,o),"none"!==e&&u.nChanges++,n.transition&&o.anim&&u.nChangesAnim++,(H.test(l)||X.test(l))&&(u.rangesAltered[r[0]]=1),O.test(l)&&a(t,"_inputDomain").set(null),"datarevision"===s&&(u.newDataRevision=1))}function f(e){return"data_array"===e.valType||e.arrayOk}for(s in e){if(u.calc&&!n.transition)return;var m=e[s],y=t[s],b=r.concat(s);if(l=b.join("."),"_"!==s.charAt(0)&&"function"!=typeof m&&m!==y){if(("tick0"===s||"dtick"===s)&&"geo"!==r[0]){var v=t.tickmode;if("auto"===v||"array"===v||!v)continue}if(("range"!==s||!t.autorange)&&("zmin"!==s&&"zmax"!==s||"contourcarpet"!==t.type)&&(o=c(b))&&(!o._compareAsJSON||JSON.stringify(m)!==JSON.stringify(y))){var x,I=o.valType,F=f(o),A=Array.isArray(m),C=Array.isArray(y);if(A&&C){var w="_input_"+s,Q=e[w],U=t[w];if(Array.isArray(Q)&&Q===U)continue}if(void 0===y)F&&A?u.calc=!0:p();else if(o._isLinkedToArray){var S=[],E=!1;h||(u.arrays[s]=S);var L=Math.min(m.length,y.length),_=Math.max(m.length,y.length);if(L!==_){if("arraydraw"!==o.editType){p();continue}E=!0}for(x=0;x<L;x++)re(m[x],y[x],b.concat(x),i.extendFlat({inArray:s,arrayIndex:x},n));if(E)for(x=L;x<_;x++)S.push(x)}else!I&&i.isPlainObject(m)?re(m,y,b,n):F?A&&C?(d&&(u.calc=!0),(d||n.newDataRevision)&&p()):A!==C?u.calc=!0:p():A&&C&&m.length===y.length&&String(m)===String(y)||p()}}}for(s in t)if(!(s in e)&&"_"!==s.charAt(0)&&"function"!=typeof t[s]){if(f(o=c(r.concat(s)))&&Array.isArray(t[s]))return void(u.calc=!0);p()}}function ne(e,t){var r;for(r in e)if("_"!==r.charAt(0)){var n=e[r],a=t[r];if(n!==a)if(i.isPlainObject(n)&&i.isPlainObject(a)){if(ne(n,a))return!0}else{if(!Array.isArray(n)||!Array.isArray(a))return!0;if(n.length!==a.length)return!0;for(var o=0;o<n.length;o++)if(n[o]!==a[o]){if(!i.isPlainObject(n[o])||!i.isPlainObject(a[o]))return!0;if(ne(n[o],a[o]))return!0}}}}function ie(e){var t=e._fullLayout,r=e.getBoundingClientRect();if(!i.equalDomRects(r,t._lastBBox)){var n=t._invTransform=i.inverseTransformMatrix(i.getFullTransformMatrix(e));t._invScaleX=Math.sqrt(n[0][0]*n[0][0]+n[0][1]*n[0][1]+n[0][2]*n[0][2]),t._invScaleY=Math.sqrt(n[1][0]*n[1][0]+n[1][1]*n[1][1]+n[1][2]*n[1][2]),t._lastBBox=r}}e.animate=function(e,t,r){if(e=i.getGraphDiv(e),!i.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var n=e._transitionData;n._frameQueue||(n._frameQueue=[]);var a=(r=u.supplyAnimationDefaults(r)).transition,o=r.frame;function s(e){return Array.isArray(a)?e>=a.length?a[0]:a[e]:a}function l(e){return Array.isArray(o)?e>=o.length?o[0]:o[e]:o}function c(e,t){var r=0;return function(){if(e&&++r===t)return e()}}return void 0===n._frameWaitingCnt&&(n._frameWaitingCnt=0),new Promise((function(o,d){function h(){n._currentFrame&&n._currentFrame.onComplete&&n._currentFrame.onComplete();var t=n._currentFrame=n._frameQueue.shift();if(t){var r=t.name?t.name.toString():null;e._fullLayout._currentFrame=r,n._lastFrameAt=Date.now(),n._timeToNext=t.frameOpts.duration,u.transition(e,t.frame.data,t.frame.layout,v.coerceTraceIndices(e,t.frame.traces),t.frameOpts,t.transitionOpts).then((function(){t.onComplete&&t.onComplete()})),e.emit("plotly_animatingframe",{name:r,frame:t.frame,animation:{frame:t.frameOpts,transition:t.transitionOpts}})}else e.emit("plotly_animated"),window.cancelAnimationFrame(n._animationRaf),n._animationRaf=null}function g(){e.emit("plotly_animating"),n._lastFrameAt=-1/0,n._timeToNext=0,n._runningTransitions=0,n._currentFrame=null;var t=function(){n._animationRaf=window.requestAnimationFrame(t),Date.now()-n._lastFrameAt>n._timeToNext&&h()};t()}var p,f,m=0;function y(e){return Array.isArray(a)?m>=a.length?e.transitionOpts=a[m]:e.transitionOpts=a[0]:e.transitionOpts=a,m++,e}var b=[],x=null==t,B=Array.isArray(t);if(!x&&!B&&i.isPlainObject(t))b.push({type:"object",data:y(i.extendFlat({},t))});else if(x||-1!==["string","number"].indexOf(typeof t))for(p=0;p<n._frames.length;p++)(f=n._frames[p])&&(x||String(f.group)===String(t))&&b.push({type:"byname",name:String(f.name),data:y({name:f.name})});else if(B)for(p=0;p<t.length;p++){var I=t[p];-1!==["number","string"].indexOf(typeof I)?(I=String(I),b.push({type:"byname",name:I,data:y({name:I})})):i.isPlainObject(I)&&b.push({type:"object",data:y(i.extendFlat({},I))})}for(p=0;p<b.length;p++)if("byname"===(f=b[p]).type&&!n._frameHash[f.data.name])return i.warn('animate failure: frame not found: "'+f.data.name+'"'),void d();-1!==["next","immediate"].indexOf(r.mode)&&function(){if(0!==n._frameQueue.length){for(;n._frameQueue.length;){var t=n._frameQueue.pop();t.onInterrupt&&t.onInterrupt()}e.emit("plotly_animationinterrupted",[])}}(),"reverse"===r.direction&&b.reverse();var F=e._fullLayout._currentFrame;if(F&&r.fromcurrent){var A=-1;for(p=0;p<b.length;p++)if("byname"===(f=b[p]).type&&f.name===F){A=p;break}if(A>0&&A<b.length-1){var C=[];for(p=0;p<b.length;p++)f=b[p],("byname"!==b[p].type||p>A)&&C.push(f);b=C}}b.length>0?function(t){if(0!==t.length){for(var i=0;i<t.length;i++){var a;a="byname"===t[i].type?u.computeFrame(e,t[i].name):t[i].data;var h=l(i),p=s(i);p.duration=Math.min(p.duration,h.duration);var f={frame:a,name:t[i].name,frameOpts:h,transitionOpts:p};i===t.length-1&&(f.onComplete=c(o,2),f.onInterrupt=d),n._frameQueue.push(f)}"immediate"===r.mode&&(n._lastFrameAt=-1/0),n._animationRaf||g()}}(b):(e.emit("plotly_animated"),o())}))},e.addFrames=function(e,t,r){if(e=i.getGraphDiv(e),null==t)return Promise.resolve();if(!i.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var n,a,o,l,c=e._transitionData._frames,d=e._transitionData._frameHash;if(!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);var h=c.length+2*t.length,g=[],p={};for(n=t.length-1;n>=0;n--)if(i.isPlainObject(t[n])){var f=t[n].name,m=(d[f]||p[f]||{}).name,y=t[n].name,b=d[m]||p[m];m&&y&&"number"==typeof y&&b&&F<5&&(F++,i.warn('addFrames: overwriting frame "'+(d[m]||p[m]).name+'" with a frame whose name of type "number" also equates to "'+m+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===F&&i.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),p[f]={name:f},g.push({frame:u.supplyFrameDefaults(t[n]),index:r&&void 0!==r[n]&&null!==r[n]?r[n]:h+n})}g.sort((function(e,t){return e.index>t.index?-1:e.index<t.index?1:0}));var v=[],x=[],B=c.length;for(n=g.length-1;n>=0;n--){if("number"==typeof(a=g[n].frame).name&&i.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!a.name)for(;d[a.name="frame "+e._transitionData._counter++];);if(d[a.name]){for(o=0;o<c.length&&(c[o]||{}).name!==a.name;o++);v.push({type:"replace",index:o,value:a}),x.unshift({type:"replace",index:o,value:c[o]})}else l=Math.max(0,Math.min(g[n].index,B)),v.push({type:"insert",index:l,value:a}),x.unshift({type:"delete",index:l}),B++}var I=u.modifyFrames,A=u.modifyFrames,C=[e,x],w=[e,v];return s&&s.add(e,I,C,A,w),u.modifyFrames(e,v)},e.deleteFrames=function(e,t){if(e=i.getGraphDiv(e),!i.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var r,n,a=e._transitionData._frames,o=[],l=[];if(!t)for(t=[],r=0;r<a.length;r++)t.push(r);for((t=t.slice()).sort(),r=t.length-1;r>=0;r--)n=t[r],o.push({type:"delete",index:n}),l.unshift({type:"insert",index:n,value:a[n]});var c=u.modifyFrames,d=u.modifyFrames,h=[e,l],g=[e,o];return s&&s.add(e,c,h,d,g),u.modifyFrames(e,o)},e.addTraces=function t(r,n,a){r=i.getGraphDiv(r);var o,l,c=[],u=e.deleteTraces,d=t,h=[r,c],g=[r,n];for(function(e,t,r){var n,i;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),n=0;n<t.length;n++)if("object"!=typeof(i=t[n])||Array.isArray(i)||null===i)throw new Error("all values in traces array must be non-array objects");if(void 0===r||Array.isArray(r)||(r=[r]),void 0!==r&&r.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(r,n,a),Array.isArray(n)||(n=[n]),n=n.map((function(e){return i.extendFlat({},e)})),v.cleanData(n),o=0;o<n.length;o++)r.data.push(n[o]);for(o=0;o<n.length;o++)c.push(-n.length+o);if(void 0===a)return l=e.redraw(r),s.add(r,u,h,d,g),l;Array.isArray(a)||(a=[a]);try{E(r,c,a)}catch(e){throw r.data.splice(r.data.length-n.length,n.length),e}return s.startSequence(r),s.add(r,u,h,d,g),l=e.moveTraces(r,c,a),s.stopSequence(r),l},e.deleteTraces=function t(r,n){r=i.getGraphDiv(r);var a,o,l=[],c=e.addTraces,u=t,d=[r,l,n],h=[r,n];if(void 0===n)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(n)||(n=[n]),S(r,n,"indices"),(n=U(n,r.data.length-1)).sort(i.sorterDes),a=0;a<n.length;a+=1)o=r.data.splice(n[a],1)[0],l.push(o);var g=e.redraw(r);return s.add(r,c,d,u,h),g},e.extendTraces=function t(r,n,a,o){function l(e,t,r){var n,a;if(i.isTypedArray(e))if(r<0){var o=new e.constructor(0),s=_(e,t);r<0?(n=s,a=o):(n=o,a=s)}else if(n=new e.constructor(r),a=new e.constructor(e.length+t.length-r),r===t.length)n.set(t),a.set(e);else if(r<t.length){var l=t.length-r;n.set(t.subarray(l)),a.set(e),a.set(t.subarray(0,l),e.length)}else{var c=r-t.length,u=e.length-c;n.set(e.subarray(u)),n.set(t,c),a.set(e.subarray(0,u))}else n=e.concat(t),a=r>=0&&r<n.length?n.splice(0,n.length-r):[];return[n,a]}var c=L(r=i.getGraphDiv(r),n,a,o,l),u=e.redraw(r),d=[r,c.update,a,c.maxPoints];return s.add(r,e.prependTraces,d,t,arguments),u},e.moveTraces=function t(r,n,a){var o,l=[],c=[],u=t,d=t,h=[r=i.getGraphDiv(r),a,n],g=[r,n,a];if(E(r,n,a),n=Array.isArray(n)?n:[n],void 0===a)for(a=[],o=0;o<n.length;o++)a.push(-n.length+o);for(a=Array.isArray(a)?a:[a],n=U(n,r.data.length-1),a=U(a,r.data.length-1),o=0;o<r.data.length;o++)-1===n.indexOf(o)&&l.push(r.data[o]);for(o=0;o<n.length;o++)c.push({newIndex:a[o],trace:r.data[n[o]]});for(c.sort((function(e,t){return e.newIndex-t.newIndex})),o=0;o<c.length;o+=1)l.splice(c[o].newIndex,0,c[o].trace);r.data=l;var p=e.redraw(r);return s.add(r,u,h,d,g),p},e.prependTraces=function t(r,n,a,o){function l(e,t,r){var n,a;if(i.isTypedArray(e))if(r<=0){var o=new e.constructor(0),s=_(t,e);r<0?(n=s,a=o):(n=o,a=s)}else if(n=new e.constructor(r),a=new e.constructor(e.length+t.length-r),r===t.length)n.set(t),a.set(e);else if(r<t.length){var l=t.length-r;n.set(t.subarray(0,l)),a.set(t.subarray(l)),a.set(e,l)}else{var c=r-t.length;n.set(t),n.set(e.subarray(0,c),t.length),a.set(e.subarray(c))}else n=t.concat(e),a=r>=0&&r<n.length?n.splice(r,n.length):[];return[n,a]}var c=L(r=i.getGraphDiv(r),n,a,o,l),u=e.redraw(r),d=[r,c.update,a,c.maxPoints];return s.add(r,e.extendTraces,d,t,arguments),u},e.newPlot=function(t,r,n,a){return t=i.getGraphDiv(t),u.cleanPlot([],{},t._fullData||[],t._fullLayout||{}),u.purge(t),e._doPlot(t,r,n,a)},e._doPlot=function(r,n,a,s){var c;if(r=i.getGraphDiv(r),o.init(r),i.isPlainObject(n)){var g=n;n=g.data,a=g.layout,s=g.config,c=g.frames}if(!1===o.triggerHandler(r,"plotly_beforeplot",[n,a,s]))return Promise.reject();n||a||i.isPlotDiv(r)||i.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",r),Q(r,s),a||(a={}),t.select(r).classed("js-plotly-plot",!0),h.makeTester(),Array.isArray(r._promises)||(r._promises=[]);var m=0===(r.data||[]).length&&Array.isArray(n);Array.isArray(n)&&(v.cleanData(n),m?r.data=n:r.data.push.apply(r.data,n),r.empty=!1),r.layout&&!m||(r.layout=v.cleanLayout(a)),u.supplyDefaults(r);var y=r._fullLayout,b=y._has("cartesian");y._replotting=!0,(m||y._shouldCreateBgLayer)&&(!function(e){var r=t.select(e),n=e._fullLayout;if(n._calcInverseTransform=ie,n._calcInverseTransform(e),n._container=r.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([{}]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._paperdiv.selectAll(".main-svg").remove(),n._paperdiv.select(".modebar-container").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0),n._modebardiv=n._paperdiv.append("div"),delete n._modeBar,n._hoverpaper=n._paperdiv.append("svg").classed("main-svg",!0),!n._uid){var a={};t.selectAll("defs").each((function(){this.id&&(a[this.id.split("-")[1]]=1)})),n._uid=i.randstr(a)}n._paperdiv.selectAll(".main-svg").attr(f.svgAttrs),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._clips=n._defs.append("g").classed("clips",!0),n._topdefs=n._toppaper.append("defs").attr("id","topdefs-"+n._uid),n._topclips=n._topdefs.append("g").classed("clips",!0),n._bgLayer=n._paper.append("g").classed("bglayer",!0),n._draggers=n._paper.append("g").classed("draglayer",!0);var o=n._paper.append("g").classed("layer-below",!0);n._imageLowerLayer=o.append("g").classed("imagelayer",!0),n._shapeLowerLayer=o.append("g").classed("shapelayer",!0),n._cartesianlayer=n._paper.append("g").classed("cartesianlayer",!0),n._polarlayer=n._paper.append("g").classed("polarlayer",!0),n._smithlayer=n._paper.append("g").classed("smithlayer",!0),n._ternarylayer=n._paper.append("g").classed("ternarylayer",!0),n._geolayer=n._paper.append("g").classed("geolayer",!0),n._funnelarealayer=n._paper.append("g").classed("funnelarealayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._iciclelayer=n._paper.append("g").classed("iciclelayer",!0),n._treemaplayer=n._paper.append("g").classed("treemaplayer",!0),n._sunburstlayer=n._paper.append("g").classed("sunburstlayer",!0),n._indicatorlayer=n._toppaper.append("g").classed("indicatorlayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0);var s=n._toppaper.append("g").classed("layer-above",!0);n._imageUpperLayer=s.append("g").classed("imagelayer",!0),n._shapeUpperLayer=s.append("g").classed("shapelayer",!0),n._selectionLayer=n._toppaper.append("g").classed("selectionlayer",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._menulayer=n._toppaper.append("g").classed("menulayer",!0),n._zoomlayer=n._toppaper.append("g").classed("zoomlayer",!0),n._hoverlayer=n._hoverpaper.append("g").classed("hoverlayer",!0),n._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),e.emit("plotly_framework")}(r),y._shouldCreateBgLayer&&delete y._shouldCreateBgLayer),h.initGradients(r),h.initPatterns(r),m&&d.saveShowSpikeInitial(r);var B=!r.calcdata||r.calcdata.length!==(r._fullData||[]).length;B&&u.doCalcdata(r);for(var I=0;I<r.calcdata.length;I++)r.calcdata[I][0].trace=r._fullData[I];r._context.responsive?r._responsiveChartHandler||(r._responsiveChartHandler=function(){i.isHidden(r)||u.resize(r)},window.addEventListener("resize",r._responsiveChartHandler)):i.clearResponsive(r);var F=i.extendFlat({},y._size),C=0;function w(){if(u.clearAutoMarginIds(r),x.drawMarginPushers(r),d.allowAutoMargin(r),r._fullLayout.title.text&&r._fullLayout.title.automargin&&u.allowAutoMargin(r,"title.automargin"),y._has("pie"))for(var e=r._fullData,t=0;t<e.length;t++){var n=e[t];"pie"===n.type&&n.automargin&&u.allowAutoMargin(r,"pie."+n.uid+".automargin")}return u.doAutoMargin(r),u.previousPromises(r)}function U(){r._transitioning||(x.doAutoRangeAndConstraints(r),m&&d.saveRangeInitial(r),l.getComponentMethod("rangeslider","calcAutorange")(r))}var S=[u.previousPromises,function(){if(c)return e.addFrames(r,c)},function e(){for(var t=y._basePlotModules,n=0;n<t.length;n++)t[n].drawFramework&&t[n].drawFramework(r);!y._glcanvas&&y._has("gl")&&(y._glcanvas=y._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],(function(e){return e.key})),y._glcanvas.enter().append("canvas").attr("class",(function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")})).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var a=r._context.plotGlPixelRatio;if(y._glcanvas){y._glcanvas.attr("width",y.width*a).attr("height",y.height*a).style("width",y.width+"px").style("height",y.height+"px");var o=y._glcanvas.data()[0].regl;if(o&&(Math.floor(y.width*a)!==o._gl.drawingBufferWidth||Math.floor(y.height*a)!==o._gl.drawingBufferHeight)){var s="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!C)return i.log(s+" Clearing graph and plotting again."),u.cleanPlot([],{},r._fullData,y),u.supplyDefaults(r),y=r._fullLayout,u.doCalcdata(r),C++,e();i.error(s)}}return"h"===y.modebar.orientation?y._modebardiv.style("height",null).style("width","100%"):y._modebardiv.style("width",null).style("height",y.height+"px"),u.previousPromises(r)},w,function(){if(u.didMarginChange(F,y._size))return i.syncOrAsync([w,x.layoutStyles],r)}];b&&S.push((function(){if(B)return i.syncOrAsync([l.getComponentMethod("shapes","calcAutorange"),l.getComponentMethod("annotations","calcAutorange"),U],r);U()})),S.push(x.layoutStyles),b&&S.push((function(){return d.draw(r,m?"":"redraw")}),(function(e){e._fullLayout._insideTickLabelsAutorange&&M(e,e._fullLayout._insideTickLabelsAutorange).then((function(){e._fullLayout._insideTickLabelsAutorange=void 0}))})),S.push(x.drawData,x.finalDraw,p,u.addLinks,u.rehover,u.redrag,u.reselect,u.doAutoMargin,(function(e){e._fullLayout._insideTickLabelsAutorange&&m&&d.saveRangeInitial(e,!0)}),u.previousPromises);var E=i.syncOrAsync(S,r);return E&&E.then||(E=Promise.resolve()),E.then((function(){return A(r),r}))},e.purge=function(e){var t=(e=i.getGraphDiv(e))._fullLayout||{},r=e._fullData||[];return u.cleanPlot([],{},r,t),u.purge(e),o.purge(e),t._container&&t._container.remove(),delete e._context,e},e.react=function(t,r,n,o){var s,d;t=i.getGraphDiv(t),v.clearPromiseQueue(t);var h=t._fullData,g=t._fullLayout;if(i.isPlotDiv(t)&&h&&g){if(i.isPlainObject(r)){var p=r;r=p.data,n=p.layout,o=p.config,s=p.frames}var f=!1;if(o){var m=i.extendDeep({},t._context);t._context=void 0,Q(t,o),f=ne(m,t._context)}t.data=r||[],v.cleanData(t.data),t.layout=n||{},v.cleanLayout(t.layout),function(e,t,r,n){var o,s,l,c,u,d,h,g,p,f,m=n._preGUI,y=[],b={},v={};for(o in m){if(u=j(o,z)){if(p=u.head,f=u.tail,s=u.attr||p+".uirevision",(c=(l=a(n,s).get())&&K(s,t))&&c===l){if(null===(d=m[o])&&(d=void 0),te(g=(h=a(t,o)).get(),d)){void 0===g&&"autorange"===f&&y.push(p),h.set(R(a(n,o).get()));continue}if("autorange"===f||"range["===f.substr(0,6)){var x=m[p+".range[0]"],B=m[p+".range[1]"],I=m[p+".autorange"];if(I||null===I&&null===x&&null===B){if(!(p in b)){var F=a(t,p).get();b[p]=F&&(F.autorange||!1!==F.autorange&&(!F.range||2!==F.range.length))}if(b[p]){h.set(R(a(n,o).get()));continue}}}}}else i.warn("unrecognized GUI edit: "+o);delete m[o],u&&"range["===u.tail.substr(0,6)&&(v[u.head]=1)}for(var A=0;A<y.length;A++){var C=y[A];if(v[C]){var w=a(t,C).get();w&&delete w.autorange}}var Q=n._tracePreGUI;for(var U in Q){var S,E=Q[U],L=null;for(o in E){if(!L){var _=q(U,r);if(_<0){delete Q[U];break}var T=ee(U,e,(S=r[_]._fullInput).index);if(T<0){delete Q[U];break}L=e[T]}if(u=j(o,J)){if(u.attr?c=(l=a(n,u.attr).get())&&K(u.attr,t):(l=S.uirevision,void 0===(c=L.uirevision)&&(c=t.uirevision)),c&&c===l&&(null===(d=E[o])&&(d=void 0),te(g=(h=a(L,o)).get(),d))){h.set(R(a(S,o).get()));continue}}else i.warn("unrecognized GUI edit: "+o+" in trace uid "+U);delete E[o]}}}(t.data,t.layout,h,g),u.supplyDefaults(t,{skipUpdateCalc:!0});var y=t._fullData,b=t._fullLayout,I=void 0===b.datarevision,F=b.transition,C=function(e,t,r,n,i){var a=B.layoutFlags();function o(e){return c.getLayoutValObject(r,e)}a.arrays={},a.rangesAltered={},a.nChanges=0,a.nChangesAnim=0,re(t,r,[],{getValObject:o,flags:a,immutable:n,transition:i,gd:e}),(a.plot||a.calc)&&(a.layoutReplot=!0);i&&a.nChanges&&a.nChangesAnim&&(a.anim=a.nChanges===a.nChangesAnim?"all":"some");return a}(t,g,b,I,F),w=C.newDataRevision,U=function(e,t,r,n,i,a){var o=t.length===r.length;if(!i&&!o)return{fullReplot:!0,calc:!0};var s,l,d=B.traceFlags();function h(e){var t=c.getTraceValObject(l,e);return!l._module.animatable&&t.anim&&(t.anim=!1),t}d.arrays={},d.nChanges=0,d.nChangesAnim=0;var g={getValObject:h,flags:d,immutable:n,transition:i,newDataRevision:a,gd:e},p={};for(s=0;s<t.length;s++)if(r[s]){if(l=r[s]._fullInput,u.hasMakesDataTransform(l)&&(l=r[s]),p[l.uid])continue;p[l.uid]=1,re(t[s]._fullInput,l,[],g)}(d.calc||d.plot)&&(d.fullReplot=!0);i&&d.nChanges&&d.nChangesAnim&&(d.anim=d.nChanges===d.nChangesAnim&&o?"all":"some");return d}(t,h,y,I,F,w);if(W(t)&&(C.layoutReplot=!0),U.calc||C.calc){t.calcdata=void 0;for(var S=Object.getOwnPropertyNames(b),E=0;E<S.length;E++){var L=S[E],_=L.substring(0,5);if("xaxis"===_||"yaxis"===_){var T=b[L]._emptyCategories;T&&T()}}}else u.supplyDefaultsUpdateCalc(t.calcdata,y);var $=[];if(s&&(t._transitionData={},u.createTransitionData(t),$.push((function(){return e.addFrames(t,s)}))),b.transition&&!f&&(U.anim||C.anim))C.ticks&&$.push(x.doTicksRelayout),u.doCalcdata(t),x.doAutoRangeAndConstraints(t),$.push((function(){return u.transitionFromReact(t,U,C,g)}));else if(U.fullReplot||C.layoutReplot||f)t._fullLayout._skipDefaults=!0,$.push(e._doPlot);else{for(var k in C.arrays){var N=C.arrays[k];if(N.length){var G=l.getComponentMethod(k,"drawOne");if(G!==i.noop)for(var M=0;M<N.length;M++)G(t,N[M]);else{var D=l.getComponentMethod(k,"draw");if(D===i.noop)throw new Error("cannot draw components: "+k);D(t)}}}$.push(u.previousPromises),U.style&&$.push(x.doTraceStyle),(U.colorbars||C.colorbars)&&$.push(x.doColorBars),C.legend&&$.push(x.doLegend),C.layoutstyle&&$.push(x.layoutStyles),C.axrange&&V($),C.ticks&&$.push(x.doTicksRelayout),C.modebar&&$.push(x.doModeBar),C.camera&&$.push(x.doCamera),$.push(A)}$.push(u.rehover,u.redrag,u.reselect),(d=i.syncOrAsync($,t))&&d.then||(d=Promise.resolve(t))}else d=e.newPlot(t,r,n,o);return d.then((function(){return t.emit("plotly_react",{data:r,layout:n}),t}))},e.redraw=function(t){if(t=i.getGraphDiv(t),!i.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);return v.cleanData(t.data),v.cleanLayout(t.layout),t.calcdata=void 0,e._doPlot(t).then((function(){return t.emit("plotly_redraw"),t}))},e.relayout=M,e.restyle=T,e.setPlotConfig=function(e){return i.extendFlat(y,e)},e.update=Y,e._guiRelayout=P(M),e._guiRestyle=P(T),e._guiUpdate=P(Y),e._storeDirectGUIEdit=function(e,t,r){for(var n in r){k(n,a(e,n).get(),r[n],t)}}}(plot_api);var helpers$d={},Registry$q=registry;helpers$d.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d")||e._has("mapbox"))?500:0},helpers$d.getRedrawFunc=function(e){return function(){Registry$q.getComponentMethod("colorbar","draw")(e)}},helpers$d.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)},helpers$d.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var DOM_URL=window.URL||window.webkitURL;function fixBinary(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),i=0;i<t;i++)n[i]=e.charCodeAt(i);return r}helpers$d.createObjectURL=function(e){return DOM_URL.createObjectURL(e)},helpers$d.revokeObjectURL=function(e){return DOM_URL.revokeObjectURL(e)},helpers$d.createBlob=function(e,t){if("svg"===t)return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"});if("full-json"===t)return new window.Blob([e],{type:"application/json;charset=utf-8"});var r=fixBinary(window.atob(e));return new window.Blob([r],{type:"image/"+t})},helpers$d.octetStream=function(e){document.location.href="data:application/octet-stream"+e},helpers$d.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,helpers$d.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.";var d3$e=d3Exports,Lib$$=libExports,Drawing$d=drawingExports,Color$l=colorExports,xmlnsNamespaces$3=xmlns_namespaces,DOUBLEQUOTE_REGEX=/"/g,DUMMY_SUB="TOBESTRIPPED",DUMMY_REGEX=new RegExp('("'+DUMMY_SUB+")|("+DUMMY_SUB+'")',"g");function htmlEntityDecode(e){var t=d3$e.select("body").append("div").style({display:"none"}).html(""),r=e.replace(/(&[^;]*;)/gi,(function(e){return"&lt;"===e?"&#60;":"&rt;"===e?"&#62;":-1!==e.indexOf("<")||-1!==e.indexOf(">")?"":t.html(e).text()}));return t.remove(),r}function xmlEntityEncode(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}var tosvg=function(e,t,r){var n,i=e._fullLayout,a=i._paper,o=i._toppaper,s=i.width,l=i.height;a.insert("rect",":first-child").call(Drawing$d.setRect,0,0,s,l).call(Color$l.fill,i.paper_bgcolor);var c=i._basePlotModules||[];for(n=0;n<c.length;n++){var u=c[n];u.toSVG&&u.toSVG(e)}if(o){var d=o.node().childNodes,h=Array.prototype.slice.call(d);for(n=0;n<h.length;n++){var g=h[n];g.childNodes.length&&a.node().appendChild(g)}}i._draggers&&i._draggers.remove(),a.node().style.background="",a.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each((function(){var e=d3$e.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){e.style({visibility:null,display:null});var t=this.style.fontFamily;t&&-1!==t.indexOf('"')&&e.style("font-family",t.replace(DOUBLEQUOTE_REGEX,DUMMY_SUB))}else e.remove()})),a.selectAll(".gradient_filled,.pattern_filled").each((function(){var e=d3$e.select(this),t=this.style.fill;t&&-1!==t.indexOf("url(")&&e.style("fill",t.replace(DOUBLEQUOTE_REGEX,DUMMY_SUB));var r=this.style.stroke;r&&-1!==r.indexOf("url(")&&e.style("stroke",r.replace(DOUBLEQUOTE_REGEX,DUMMY_SUB))})),"pdf"!==t&&"eps"!==t||a.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),a.node().setAttributeNS(xmlnsNamespaces$3.xmlns,"xmlns",xmlnsNamespaces$3.svg),a.node().setAttributeNS(xmlnsNamespaces$3.xmlns,"xmlns:xlink",xmlnsNamespaces$3.xlink),"svg"===t&&r&&(a.attr("width",r*s),a.attr("height",r*l),a.attr("viewBox","0 0 "+s+" "+l));var p=(new window.XMLSerializer).serializeToString(a.node());return p=(p=xmlEntityEncode(p=htmlEntityDecode(p))).replace(DUMMY_REGEX,"'"),Lib$$.isIE()&&(p=(p=(p=p.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),p},Lib$_=libExports,EventEmitter$1=eventsExports.EventEmitter,helpers$c=helpers$d;function svgToImg$2(e){var t=e.emitter||new EventEmitter$1,r=new Promise((function(n,i){var a=window.Image,o=e.svg,s=e.format||"png";if(Lib$_.isIE()&&"svg"!==s){var l=new Error(helpers$c.MSG_IE_BAD_FORMAT);return i(l),e.promise?r:t.emit("error",l)}var c,u,d=e.canvas,h=e.scale||1,g=e.width||300,p=e.height||150,f=h*g,m=h*p,y=d.getContext("2d",{willReadFrequently:!0}),b=new a;"svg"===s||Lib$_.isSafari()?u=helpers$c.encodeSVG(o):(c=helpers$c.createBlob(o,"svg"),u=helpers$c.createObjectURL(c)),d.width=f,d.height=m,b.onload=function(){var r;switch(c=null,helpers$c.revokeObjectURL(u),"svg"!==s&&y.drawImage(b,0,0,f,m),s){case"jpeg":r=d.toDataURL("image/jpeg");break;case"png":r=d.toDataURL("image/png");break;case"webp":r=d.toDataURL("image/webp");break;case"svg":r=u;break;default:var a="Image format is not jpeg, png, svg or webp.";if(i(new Error(a)),!e.promise)return t.emit("error",a)}n(r),e.promise||t.emit("success",r)},b.onerror=function(r){if(c=null,helpers$c.revokeObjectURL(u),i(r),!e.promise)return t.emit("error",r)},b.src=u}));return e.promise?r:t}var svgtoimg=svgToImg$2,isNumeric$c=fastIsnumeric,plotApi=plot_api,plots=plotsExports,Lib$Z=libExports,helpers$b=helpers$d,toSVG$1=tosvg,svgToImg$1=svgtoimg,version=version$2.version,attrs$4={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png",description:"Sets the format of exported image."},width:{valType:"number",min:1,description:["Sets the exported image width.","Defaults to the value found in `layout.width`","If set to *null*, the exported image width will match the current graph width."].join(" ")},height:{valType:"number",min:1,description:["Sets the exported image height.","Defaults to the value found in `layout.height`","If set to *null*, the exported image height will match the current graph height."].join(" ")},scale:{valType:"number",min:0,dflt:1,description:["Sets a scaling for the generated image.","If set, all features of a graphs (e.g. text, line width)","are scaled, unlike simply setting","a bigger *width* and *height*."].join(" ")},setBackground:{valType:"any",dflt:!1,description:["Sets the image background mode.","By default, the image background is determined by `layout.paper_bgcolor`,","the *transparent* mode.","One might consider setting `setBackground` to *opaque*","when exporting a *jpeg* image as JPEGs do not support opacity."].join(" ")},imageDataOnly:{valType:"boolean",dflt:!1,description:["Determines whether or not the return value is prefixed by","the image format's corresponding 'data:image;' spec."].join(" ")}};function toImage$2(e,t){var r,n,i,a;function o(e){return!(e in t)||Lib$Z.validate(t[e],attrs$4[e])}if(t=t||{},Lib$Z.isPlainObject(e)?(r=e.data||[],n=e.layout||{},i=e.config||{},a={}):(e=Lib$Z.getGraphDiv(e),r=Lib$Z.extendDeep([],e.data),n=Lib$Z.extendDeep({},e.layout),i=e._context,a=e._fullLayout||{}),!o("width")&&null!==t.width||!o("height")&&null!==t.height)throw new Error("Height and width should be pixel values.");if(!o("format"))throw new Error("Export format is not "+Lib$Z.join2(attrs$4.format.values,", "," or ")+".");var s={};function l(e,r){return Lib$Z.coerce(t,s,attrs$4,e,r)}var c=l("format"),u=l("width"),d=l("height"),h=l("scale"),g=l("setBackground"),p=l("imageDataOnly"),f=document.createElement("div");f.style.position="absolute",f.style.left="-5000px",document.body.appendChild(f);var m=Lib$Z.extendFlat({},n);u?m.width=u:null===t.width&&isNumeric$c(a.width)&&(m.width=a.width),d?m.height=d:null===t.height&&isNumeric$c(a.height)&&(m.height=a.height);var y=Lib$Z.extendFlat({},i,{_exportedPlot:!0,staticPlot:!0,setBackground:g}),b=helpers$b.getRedrawFunc(f);function v(){return new Promise((function(e){setTimeout(e,helpers$b.getDelay(f._fullLayout))}))}function x(){return new Promise((function(e,t){var r=toSVG$1(f,c,h),n=f._fullLayout.width,i=f._fullLayout.height;function a(){plotApi.purge(f),document.body.removeChild(f)}if("full-json"===c){var o=plots.graphJson(f,!1,"keepdata","object",!0,!0);return o.version=version,o=JSON.stringify(o),a(),e(p?o:helpers$b.encodeJSON(o))}if(a(),"svg"===c)return e(p?r:helpers$b.encodeSVG(r));var s=document.createElement("canvas");s.id=Lib$Z.randstr(),svgToImg$1({format:c,width:n,height:i,scale:h,canvas:s,svg:r,promise:!0}).then(e).catch(t)}))}return new Promise((function(e,t){plotApi.newPlot(f,r,m,y).then(b).then(v).then(x).then((function(t){e(function(e){return p?e.replace(helpers$b.IMAGE_URL_PREFIX,""):e}(t))})).catch((function(e){t(e)}))}))}var to_image=toImage$2,Lib$Y=libExports,Plots$7=plotsExports,PlotSchema$1=plot_schema,dfltConfig$1=plot_config.dfltConfig,isPlainObject$1=Lib$Y.isPlainObject,isArray=Array.isArray,isArrayOrTypedArray$5=Lib$Y.isArrayOrTypedArray,validate=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});var r,n,i=PlotSchema$1.get(),a=[],o={_context:Lib$Y.extendFlat({},dfltConfig$1)};isArray(e)?(o.data=Lib$Y.extendDeep([],e),r=e):(o.data=[],r=[],a.push(format$1("array","data"))),isPlainObject$1(t)?(o.layout=Lib$Y.extendDeep({},t),n=t):(o.layout={},n={},arguments.length>1&&a.push(format$1("object","layout"))),Plots$7.supplyDefaults(o);for(var s=o._fullData,l=r.length,c=0;c<l;c++){var u=r[c],d=["data",c];if(isPlainObject$1(u)){var h=s[c],g=h.type,p=i.traces[g].attributes;p.type={valType:"enumerated",values:[g]},!1===h.visible&&!1!==u.visible&&a.push(format$1("invisible",d)),crawl(u,h,p,a,d);var f=u.transforms,m=h.transforms;if(f){isArray(f)||a.push(format$1("array",d,["transforms"])),d.push("transforms");for(var y=0;y<f.length;y++){var b=["transforms",y],v=f[y].type;if(isPlainObject$1(f[y])){var x=i.transforms[v]?i.transforms[v].attributes:{};x.type={valType:"enumerated",values:Object.keys(i.transforms)},crawl(f[y],m[y],x,a,d,b)}else a.push(format$1("object",d,b))}}}else a.push(format$1("object",d))}var B=o._fullLayout,I=fillLayoutSchema(i,s);return crawl(n,B,I,a,"layout"),0===a.length?void 0:a};function crawl(e,t,r,n,i,a){a=a||[];for(var o=Object.keys(e),s=0;s<o.length;s++){var l=o[s];if("transforms"!==l){var c=a.slice();c.push(l);var u=e[l],d=t[l],h=getNestedSchema(r,l),g=(h||{}).valType,p="info_array"===g,f="colorscale"===g,m=(h||{}).items;if(isInSchema(r,l))if(isPlainObject$1(u)&&isPlainObject$1(d)&&"any"!==g)crawl(u,d,h,n,i,c);else if(p&&isArray(u)){u.length>d.length&&n.push(format$1("unused",i,c.concat(d.length)));var y,b,v,x,B,I=d.length,F=Array.isArray(m);if(F&&(I=Math.min(I,m.length)),2===h.dimensions)for(b=0;b<I;b++)if(isArray(u[b])){u[b].length>d[b].length&&n.push(format$1("unused",i,c.concat(b,d[b].length)));var A=d[b].length;for(y=0;y<(F?Math.min(A,m[b].length):A);y++)v=F?m[b][y]:m,x=u[b][y],B=d[b][y],Lib$Y.validate(x,v)?B!==x&&B!==+x&&n.push(format$1("dynamic",i,c.concat(b,y),x,B)):n.push(format$1("value",i,c.concat(b,y),x))}else n.push(format$1("array",i,c.concat(b),u[b]));else for(b=0;b<I;b++)v=F?m[b]:m,x=u[b],B=d[b],Lib$Y.validate(x,v)?B!==x&&B!==+x&&n.push(format$1("dynamic",i,c.concat(b),x,B)):n.push(format$1("value",i,c.concat(b),x))}else if(h.items&&!p&&isArray(u)){var C,w,Q=m[Object.keys(m)[0]],U=[];for(C=0;C<d.length;C++){var S=d[C]._index||C;if((w=c.slice()).push(S),isPlainObject$1(u[S])&&isPlainObject$1(d[C])){U.push(S);var E=u[S],L=d[C];isPlainObject$1(E)&&!1!==E.visible&&!1===L.visible?n.push(format$1("invisible",i,w)):crawl(E,L,Q,n,i,w)}}for(C=0;C<u.length;C++)(w=c.slice()).push(C),isPlainObject$1(u[C])?-1===U.indexOf(C)&&n.push(format$1("unused",i,w)):n.push(format$1("object",i,w,u[C]))}else!isPlainObject$1(u)&&isPlainObject$1(d)?n.push(format$1("object",i,c,u)):isArrayOrTypedArray$5(u)||!isArrayOrTypedArray$5(d)||p||f?l in t?Lib$Y.validate(u,h)?"enumerated"===h.valType&&(h.coerceNumber&&u!==+d||u!==d)&&n.push(format$1("dynamic",i,c,u,d)):n.push(format$1("value",i,c,u)):n.push(format$1("unused",i,c,u)):n.push(format$1("array",i,c,u));else n.push(format$1("schema",i,c))}}return n}function fillLayoutSchema(e,t){for(var r=e.layout.layoutAttributes,n=0;n<t.length;n++){var i=t[n],a=e.traces[i.type],o=a.layoutAttributes;o&&(i.subplot?Lib$Y.extendFlat(r[a.attributes.subplot.dflt],o):Lib$Y.extendFlat(r,o))}return r}var code2msgFunc={object:function(e,t){return("layout"===e&&""===t?"The layout argument":"data"===e[0]&&""===t?"Trace "+e[1]+" in the data argument":inBase(e)+"key "+t)+" must be linked to an object container"},array:function(e,t){return("data"===e?"The data argument":inBase(e)+"key "+t)+" must be linked to an array container"},schema:function(e,t){return inBase(e)+"key "+t+" is not part of the schema"},unused:function(e,t,r){var n=isPlainObject$1(r)?"container":"key";return inBase(e)+n+" "+t+" did not get coerced"},dynamic:function(e,t,r,n){return[inBase(e)+"key",t,"(set to '"+r+"')","got reset to","'"+n+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?inBase(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,r){return[inBase(e)+"key "+t,"is set to an invalid value ("+r+")"].join(" ")}};function inBase(e){return isArray(e)?"In data trace "+e[1]+", ":"In "+e+", "}function format$1(e,t,r,n,i){var a,o;r=r||"",isArray(t)?(a=t[0],o=t[1]):(a=t,o=null);var s=convertPathToAttributeString(r),l=code2msgFunc[e](t,s,n,i);return Lib$Y.log(l),{code:e,container:a,trace:o,path:r,astr:s,msg:l}}function isInSchema(e,t){var r=splitKey(t),n=r.keyMinusId,i=r.id;return!!(n in e&&e[n]._isSubplotObj&&i)||t in e}function getNestedSchema(e,t){return t in e?e[t]:e[splitKey(t).keyMinusId]}var idRegex=Lib$Y.counterRegex("([a-z]+)");function splitKey(e){var t=e.match(idRegex);return{keyMinusId:t&&t[1],id:t&&t[2]}}function convertPathToAttributeString(e){if(!isArray(e))return String(e);for(var t="",r=0;r<e.length;r++){var n=e[r];"number"==typeof n?t=t.substr(0,t.length-1)+"["+n+"]":t+=n,r<e.length-1&&(t+=".")}return t}var Lib$X=libExports,helpers$a=helpers$d;function fileSaver$1(e,t,r){var n=document.createElement("a"),i="download"in n;return new Promise((function(a,o){var s,l;if(Lib$X.isIE())return s=helpers$a.createBlob(e,"svg"),window.navigator.msSaveBlob(s,t),s=null,a(t);if(i)return s=helpers$a.createBlob(e,r),l=helpers$a.createObjectURL(s),n.href=l,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),helpers$a.revokeObjectURL(l),s=null,a(t);if(Lib$X.isSafari()){var c="svg"===r?",":";base64,";return helpers$a.octetStream(c+encodeURIComponent(e)),a(t)}o(new Error("download error"))}))}var filesaver=fileSaver$1,Lib$W=libExports,toImage$1=to_image,fileSaver=filesaver,helpers$9=helpers$d;function downloadImage(e,t){var r;return Lib$W.isPlainObject(e)||(r=Lib$W.getGraphDiv(e)),(t=t||{}).format=t.format||"png",t.width=t.width||null,t.height=t.height||null,t.imageDataOnly=!0,new Promise((function(n,i){r&&r._snapshotInProgress&&i(new Error("Snapshotting already in progress.")),Lib$W.isIE()&&"svg"!==t.format&&i(new Error(helpers$9.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var a=toImage$1(e,t),o=t.filename||e.fn||"newplot";o+="."+t.format.replace("-","."),a.then((function(e){return r&&(r._snapshotInProgress=!1),fileSaver(e,o,t.format)})).then((function(e){n(e)})).catch((function(e){r&&(r._snapshotInProgress=!1),i(e)}))}))}var download=downloadImage,template_api={},Lib$V=libExports,isPlainObject=Lib$V.isPlainObject,PlotSchema=plot_schema,Plots$6=plotsExports,plotAttributes=attributes$M,Template$3=plot_template,dfltConfig=plot_config.dfltConfig;function mergeTemplates(e,t){e=Lib$V.extendDeep({},e);var r,n,i=Object.keys(e).sort();function a(t,r,i){if(isPlainObject(r)&&isPlainObject(t))mergeTemplates(t,r);else if(Array.isArray(r)&&Array.isArray(t)){var a=Template$3.arrayTemplater({_template:e},i);for(n=0;n<r.length;n++){var o=r[n],s=a.newItem(o)._template;s&&mergeTemplates(s,o)}var l=a.defaultItems();for(n=0;n<l.length;n++)r.push(l[n]._template);for(n=0;n<r.length;n++)delete r[n].templateitemname}}for(r=0;r<i.length;r++){var o=i[r],s=e[o];if(o in t?a(s,t[o],o):t[o]=s,getBaseKey(o)===o)for(var l in t){var c=getBaseKey(l);l===c||c!==o||l in e||a(s,t[l],o)}}}function getBaseKey(e){return e.replace(/[0-9]+$/,"")}function walkStyleKeys(e,t,r,n,i){var a=i&&r(i);for(var o in e){var s=e[o],l=getNextPath(e,o,n),c=getNextPath(e,o,i),u=r(c);if(!u){var d=getBaseKey(o);d!==o&&(u=r(c=getNextPath(e,d,i)))}if((!a||a!==u)&&!(!u||u._noTemplating||"data_array"===u.valType||u.arrayOk&&Array.isArray(s)))if(!u.valType&&isPlainObject(s))walkStyleKeys(s,t,r,l,c);else if(u._isLinkedToArray&&Array.isArray(s))for(var h=!1,g=0,p={},f=0;f<s.length;f++){var m=s[f];if(isPlainObject(m)){var y=m.name;if(y)p[y]||(walkStyleKeys(m,t,r,getNextPath(s,g,l),getNextPath(s,g,c)),g++,p[y]=1);else if(!h){var b=getNextPath(e,Template$3.arrayDefaultKey(o),n),v=getNextPath(s,g,l);walkStyleKeys(m,t,r,v,getNextPath(s,g,c));var x=Lib$V.nestedProperty(t,v);Lib$V.nestedProperty(t,b).set(x.get()),x.set(null),h=!0}}}else{Lib$V.nestedProperty(t,l).set(s)}}}function getLayoutInfo(e,t){return PlotSchema.getLayoutValObject(e,Lib$V.nestedProperty({},t).parts)}function getTraceInfo(e,t){return PlotSchema.getTraceValObject(e,Lib$V.nestedProperty({},t).parts)}function getNextPath(e,t,r){return r?Array.isArray(e)?r+"["+t+"]":r+"."+t:t}function hasPlainObject(e){for(var t=0;t<e.length;t++)if(isPlainObject(e[t]))return!0}function format(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":t=e.path?"There are no templates for item "+e.path+" with name "+e.templateitemname:"There are no templates for trace "+e.index+", of type "+e.traceType+".";break;case"unused":t=e.path?"The template item at "+e.path+" was not used in constructing the plot.":e.dataCount?"Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type.":"The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data.";break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type."}return e.msg=t,e}template_api.makeTemplate=function(e){e=Lib$V.isPlainObject(e)?e:Lib$V.getGraphDiv(e),e=Lib$V.extendDeep({_context:dfltConfig},{data:e.data,layout:e.layout}),Plots$6.supplyDefaults(e);var t=e.data||[],r=e.layout||{};r._basePlotModules=e._fullLayout._basePlotModules,r._modules=e._fullLayout._modules;var n={data:{},layout:{}};t.forEach((function(e){var t={};walkStyleKeys(e,t,getTraceInfo.bind(null,e));var r=Lib$V.coerce(e,{},plotAttributes,"type"),i=n.data[r];i||(i=n.data[r]=[]),i.push(t)})),walkStyleKeys(r,n.layout,getLayoutInfo.bind(null,r)),delete n.layout.template;var i=r.template;if(isPlainObject(i)){var a,o,s,l,c,u,d=i.layout;isPlainObject(d)&&mergeTemplates(d,n.layout);var h=i.data;if(isPlainObject(h)){for(o in n.data)if(s=h[o],Array.isArray(s)){for(u=(c=n.data[o]).length,l=s.length,a=0;a<u;a++)mergeTemplates(s[a%l],c[a]);for(a=u;a<l;a++)c.push(Lib$V.extendDeep({},s[a]))}for(o in h)o in n.data||(n.data[o]=Lib$V.extendDeep([],h[o]))}}return n},template_api.validateTemplate=function(e,t){var r=Lib$V.extendDeep({},{_context:dfltConfig,data:e.data,layout:e.layout}),n=r.layout||{};isPlainObject(t)||(t=n.template||{});var i=t.layout,a=t.data,o=[];r.layout=n,r.layout.template=t,Plots$6.supplyDefaults(r);var s=r._fullLayout,l=r._fullData,c={};if(isPlainObject(i)?(!function e(t,r){for(var n in t)if("_"!==n.charAt(0)&&isPlainObject(t[n])){var i,a=getBaseKey(n),o=[];for(i=0;i<r.length;i++)o.push(getNextPath(t,n,r[i])),a!==n&&o.push(getNextPath(t,a,r[i]));for(i=0;i<o.length;i++)c[o[i]]=1;e(t[n],o)}}(s,["layout"]),function e(t,r){for(var n in t)if(-1===n.indexOf("defaults")&&isPlainObject(t[n])){var i=getNextPath(t,n,r);c[i]?e(t[n],i):o.push({code:"unused",path:i})}}(i,"layout")):o.push({code:"layout"}),isPlainObject(a)){for(var u,d={},h=0;h<l.length;h++){var g=l[h];d[u=g.type]=(d[u]||0)+1,g._fullInput._template||o.push({code:"missing",index:g._fullInput.index,traceType:u})}for(u in a){var p=a[u].length,f=d[u]||0;p>f?o.push({code:"unused",traceType:u,templateCount:p,dataCount:f}):f>p&&o.push({code:"reused",traceType:u,templateCount:p,dataCount:f})}}else o.push({code:"data"});if(function e(t,r){for(var n in t)if("_"!==n.charAt(0)){var i=t[n],a=getNextPath(t,n,r);isPlainObject(i)?(Array.isArray(t)&&!1===i._template&&i.templateitemname&&o.push({code:"missing",path:a,templateitemname:i.templateitemname}),e(i,a)):Array.isArray(i)&&hasPlainObject(i)&&e(i,a)}}({data:l,layout:s},""),o.length)return o.map(format)};var main=plot_api;plot_api$1._doPlot=main._doPlot,plot_api$1.newPlot=main.newPlot,plot_api$1.restyle=main.restyle,plot_api$1.relayout=main.relayout,plot_api$1.redraw=main.redraw,plot_api$1.update=main.update,plot_api$1._guiRestyle=main._guiRestyle,plot_api$1._guiRelayout=main._guiRelayout,plot_api$1._guiUpdate=main._guiUpdate,plot_api$1._storeDirectGUIEdit=main._storeDirectGUIEdit,plot_api$1.react=main.react,plot_api$1.extendTraces=main.extendTraces,plot_api$1.prependTraces=main.prependTraces,plot_api$1.addTraces=main.addTraces,plot_api$1.deleteTraces=main.deleteTraces,plot_api$1.moveTraces=main.moveTraces,plot_api$1.purge=main.purge,plot_api$1.addFrames=main.addFrames,plot_api$1.deleteFrames=main.deleteFrames,plot_api$1.animate=main.animate,plot_api$1.setPlotConfig=main.setPlotConfig,plot_api$1.toImage=to_image,plot_api$1.validate=validate,plot_api$1.downloadImage=download;var templateApi=template_api;plot_api$1.makeTemplate=templateApi.makeTemplate,plot_api$1.validateTemplate=templateApi.validateTemplate;var Lib$U=libExports,Registry$p=registry,xy_defaults=function(e,t,r,n){var i,a=n("x"),o=n("y");if(Registry$p.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],r),a){var s=Lib$U.minRowLength(a);o?i=Math.min(s,Lib$U.minRowLength(o)):(i=s,n("y0"),n("dy"))}else{if(!o)return 0;i=Lib$U.minRowLength(o),n("x0"),n("dx")}return t._length=i,i},dateTick0=libExports.dateTick0,numConstants$2=numerical,ONEWEEK=numConstants$2.ONEWEEK;function getPeriod0Dflt(e,t){return dateTick0(t,e%ONEWEEK==0?1:0)}var period_defaults=function(e,t,r,n,i){if(i||(i={x:!0,y:!0}),i.x){var a=n("xperiod");a&&(n("xperiod0",getPeriod0Dflt(a,t.xcalendar)),n("xperiodalignment"))}if(i.y){var o=n("yperiod");o&&(n("yperiod0",getPeriod0Dflt(o,t.ycalendar)),n("yperiodalignment"))}},perStackAttrs=["orientation","groupnorm","stackgaps"],stack_defaults=function(e,t,r,n){var i=r._scatterStackOpts,a=n("stackgroup");if(a){var o=t.xaxis+t.yaxis,s=i[o];s||(s=i[o]={});var l=s[a],c=!1;l?l.traces.push(t):(l=s[a]={traceIndices:[],traces:[t]},c=!0);for(var u={orientation:t.x&&!t.y?"h":"v"},d=0;d<perStackAttrs.length;d++){var h=perStackAttrs[d],g=h+"Found";if(!l[g]){var p=void 0!==e[h],f="orientation"===h;if((p||c)&&(l[h]=n(h,u[h]),f&&(l.fillDflt="h"===l[h]?"tonextx":"tonexty"),p&&(l[g]=!0,!c&&(delete l.traces[0][h],f))))for(var m=0;m<l.traces.length-1;m++){var y=l.traces[m];y._input.fill!==y.fill&&(y.fill=l.fillDflt)}}}return l}},Color$k=colorExports,hasColorscale$3=helpers$A.hasColorscale,colorscaleDefaults$3=defaults$l,subTypes$5=subtypes$3,marker_defaults=function(e,t,r,n,i,a){var o=subTypes$5.isBubble(e),s=(e.line||{}).color;(a=a||{},s&&(r=s),i("marker.symbol"),i("marker.opacity",o?.7:1),i("marker.size"),a.noAngle||(i("marker.angle"),a.noAngleRef||i("marker.angleref"),a.noStandOff||i("marker.standoff")),i("marker.color",r),hasColorscale$3(e,"marker")&&colorscaleDefaults$3(e,t,n,i,{prefix:"marker.",cLetter:"c"}),a.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),a.noLine||(i("marker.line.color",s&&!Array.isArray(s)&&t.marker.color!==s?s:o?Color$k.background:Color$k.defaultLine),hasColorscale$3(e,"marker.line")&&colorscaleDefaults$3(e,t,n,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",o?1:0)),o&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),a.gradient)&&("none"!==i("marker.gradient.type")&&i("marker.gradient.color"))},isArrayOrTypedArray$4=libExports.isArrayOrTypedArray,hasColorscale$2=helpers$A.hasColorscale,colorscaleDefaults$2=defaults$l,line_defaults=function(e,t,r,n,i,a){a||(a={});var o=(e.marker||{}).color;(i("line.color",r),hasColorscale$2(e,"line"))?colorscaleDefaults$2(e,t,n,i,{prefix:"line.",cLetter:"c"}):i("line.color",!isArrayOrTypedArray$4(o)&&o||r);i("line.width"),a.noDash||i("line.dash"),a.backoff&&i("line.backoff")},line_shape_defaults=function(e,t,r){"spline"===r("line.shape")&&r("line.smoothing")},Lib$T=libExports,text_defaults=function(e,t,r,n,i){i=i||{},n("textposition"),Lib$T.coerceFont(n,"textfont",r.font),i.noSelect||(n("selected.textfont.color"),n("unselected.textfont.color"))},Color$j=colorExports,isArrayOrTypedArray$3=libExports.isArrayOrTypedArray,fillcolor_defaults=function(e,t,r,n){var i=!1;if(t.marker){var a=t.marker.color,o=(t.marker.line||{}).color;a&&!isArrayOrTypedArray$3(a)?i=a:o&&!isArrayOrTypedArray$3(o)&&(i=o)}n("fillcolor",Color$j.addOpacity((t.line||{}).color||i||r,.5))},Lib$S=libExports,Registry$o=registry,attributes$v=attributes$y,constants$o=constants$r,subTypes$4=subtypes$3,handleXYDefaults$1=xy_defaults,handlePeriodDefaults$1=period_defaults,handleStackDefaults=stack_defaults,handleMarkerDefaults$1=marker_defaults,handleLineDefaults$1=line_defaults,handleLineShapeDefaults=line_shape_defaults,handleTextDefaults$1=text_defaults,handleFillColorDefaults=fillcolor_defaults,coercePattern$1=libExports.coercePattern,defaults$f=function(e,t,r,n){function i(r,n){return Lib$S.coerce(e,t,attributes$v,r,n)}var a=handleXYDefaults$1(e,t,n,i);if(a||(t.visible=!1),t.visible){handlePeriodDefaults$1(e,t,n,i),i("xhoverformat"),i("yhoverformat");var o=handleStackDefaults(e,t,n,i);"group"===n.scattermode&&void 0===t.orientation&&i("orientation","v");var s=!o&&a<constants$o.PTS_LINESONLY?"lines+markers":"lines";i("text"),i("hovertext"),i("mode",s),subTypes$4.hasLines(t)&&(handleLineDefaults$1(e,t,r,n,i,{backoff:!0}),handleLineShapeDefaults(e,t,i),i("connectgaps"),i("line.simplify")),subTypes$4.hasMarkers(t)&&handleMarkerDefaults$1(e,t,r,n,i,{gradient:!0}),subTypes$4.hasText(t)&&(i("texttemplate"),handleTextDefaults$1(e,t,n,i));var l=[];(subTypes$4.hasMarkers(t)||subTypes$4.hasText(t))&&(i("cliponaxis"),i("marker.maxdisplayed"),l.push("points")),i("fill",o?o.fillDflt:"none"),"none"!==t.fill&&(handleFillColorDefaults(e,t,r,i),subTypes$4.hasLines(t)||handleLineShapeDefaults(e,t,i),coercePattern$1(i,"fillpattern",t.fillcolor,!1));var c=(t.line||{}).color,u=(t.marker||{}).color;"tonext"!==t.fill&&"toself"!==t.fill||l.push("fills"),i("hoveron",l.join("+")||"points"),"fills"!==t.hoveron&&i("hovertemplate");var d=Registry$o.getComponentMethod("errorbars","supplyDefaults");d(e,t,c||u||r,{axis:"y"}),d(e,t,c||u||r,{axis:"x",inherit:"y"}),Lib$S.coerceSelectionMarkerOpacity(t,i)}},getAxisGroup$2=constraints.getAxisGroup,grouping_defaults=function(e,t,r,n){var i=t.orientation,a=t[{v:"x",h:"y"}[i]+"axis"],o=getAxisGroup$2(r,a)+i,s=r._alignmentOpts||{},l=n("alignmentgroup"),c=s[o];c||(c=s[o]={});var u=c[l];u?u.traces.push(t):u=c[l]={traces:[t],alignmentIndex:Object.keys(c).length,offsetGroups:{}};var d=n("offsetgroup"),h=u.offsetGroups,g=h[d];d&&(g||(g=h[d]={offsetIndex:Object.keys(h).length}),t._offsetIndex=g.offsetIndex)},Lib$R=libExports,handleGroupingDefaults$2=grouping_defaults,attributes$u=attributes$y,cross_trace_defaults$1=function(e,t){var r,n,i;function a(e){return Lib$R.coerce(n._input,n,attributes$u,e)}if("group"===t.scattermode)for(i=0;i<e.length;i++)"scatter"===(n=e[i]).type&&(r=n._input,handleGroupingDefaults$2(r,n,t,a));for(i=0;i<e.length;i++){var o=e[i];if("scatter"===o.type){var s=o.fill;if("none"!==s&&"toself"!==s&&(o.opacity=void 0,"tonexty"===s||"tonextx"===s))for(var l=i-1;l>=0;l--){var c=e[l];if("scatter"===c.type&&c.xaxis===o.xaxis&&c.yaxis===o.yaxis){c.opacity=void 0;break}}}}},Lib$Q=libExports,layoutAttributes$2=layout_attributes$4,layout_defaults$2=function(e,t){var r,n,i="group"===t.barmode;"group"===t.scattermode&&(r="scattergap",n=i?t.bargap:.2,Lib$Q.coerce(e,t,layoutAttributes$2,r,n))},isNumeric$b=fastIsnumeric,Lib$P=libExports,dateTime2ms=Lib$P.dateTime2ms,incrementMonth=Lib$P.incrementMonth,constants$n=numerical,ONEAVGMONTH=constants$n.ONEAVGMONTH,align_period=function(e,t,r,n){if("date"!==t.type)return{vals:n};var i=e[r+"periodalignment"];if(!i)return{vals:n};var a,o=e[r+"period"];if(isNumeric$b(o)){if((o=+o)<=0)return{vals:n}}else if("string"==typeof o&&"M"===o.charAt(0)){var s=+o.substring(1);if(!(s>0&&Math.round(s)===s))return{vals:n};a=s}for(var l=t.calendar,c="start"===i,u="end"===i,d=e[r+"period0"],h=dateTime2ms(d,l)||0,g=[],p=[],f=[],m=n.length,y=0;y<m;y++){var b,v,x,B=n[y];if(a){for(b=Math.round((B-h)/(a*ONEAVGMONTH)),x=incrementMonth(h,a*b,l);x>B;)x=incrementMonth(x,-a,l);for(;x<=B;)x=incrementMonth(x,a,l);v=incrementMonth(x,-a,l)}else{for(x=h+(b=Math.round((B-h)/o))*o;x>B;)x-=o;for(;x<=B;)x+=o;v=x-o}g[y]=c?v:u?x:(v+x)/2,p[y]=v,f[y]=x}return{vals:g,starts:p,ends:f}},hasColorscale$1=helpers$A.hasColorscale,calcColorscale$2=calc$8,subTypes$3=subtypes$3,colorscale_calc=function(e,t){subTypes$3.hasLines(t)&&hasColorscale$1(t,"line")&&calcColorscale$2(e,t,{vals:t.line.color,containerStr:"line",cLetter:"c"}),subTypes$3.hasMarkers(t)&&(hasColorscale$1(t,"marker")&&calcColorscale$2(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),hasColorscale$1(t,"marker.line")&&calcColorscale$2(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}))},Lib$O=libExports,arrays_to_calcdata$1=function(e,t){for(var r=0;r<e.length;r++)e[r].i=r;Lib$O.mergeArray(t.text,e,"tx"),Lib$O.mergeArray(t.texttemplate,e,"txt"),Lib$O.mergeArray(t.hovertext,e,"htx"),Lib$O.mergeArray(t.customdata,e,"data"),Lib$O.mergeArray(t.textposition,e,"tp"),t.textfont&&(Lib$O.mergeArrayCastPositive(t.textfont.size,e,"ts"),Lib$O.mergeArray(t.textfont.color,e,"tc"),Lib$O.mergeArray(t.textfont.family,e,"tf"));var n=t.marker;if(n){Lib$O.mergeArrayCastPositive(n.size,e,"ms"),Lib$O.mergeArrayCastPositive(n.opacity,e,"mo"),Lib$O.mergeArray(n.symbol,e,"mx"),Lib$O.mergeArray(n.angle,e,"ma"),Lib$O.mergeArray(n.standoff,e,"mf"),Lib$O.mergeArray(n.color,e,"mc");var i=n.line;n.line&&(Lib$O.mergeArray(i.color,e,"mlc"),Lib$O.mergeArrayCastPositive(i.width,e,"mlw"));var a=n.gradient;a&&"none"!==a.type&&(Lib$O.mergeArray(a.type,e,"mgt"),Lib$O.mergeArray(a.color,e,"mgc"))}},Lib$N=libExports,calc_selection=function(e,t){Lib$N.isArrayOrTypedArray(t.selectedpoints)&&Lib$N.tagSelected(e,t)},isNumeric$a=fastIsnumeric,Lib$M=libExports,Axes$g=axesExports,alignPeriod=align_period,BADNUM$3=numerical.BADNUM,subTypes$2=subtypes$3,calcColorscale$1=colorscale_calc,arraysToCalcdata$2=arrays_to_calcdata$1,calcSelection=calc_selection;function calc$6(e,t){var r,n,i,a,o,s,l=e._fullLayout,c=t._xA=Axes$g.getFromId(e,t.xaxis||"x","x"),u=t._yA=Axes$g.getFromId(e,t.yaxis||"y","y"),d=c.makeCalcdata(t,"x"),h=u.makeCalcdata(t,"y"),g=alignPeriod(t,c,"x",d),p=alignPeriod(t,u,"y",h),f=g.vals,m=p.vals,y=t._length,b=new Array(y),v=t.ids,x=getStackOpts(t,l,c,u),B=!1;setFirstScatter(l,t);var I,F="x",A="y";x?(Lib$M.pushUnique(x.traceIndices,t._expandedIndex),(r="v"===x.orientation)?(A="s",I="x"):(F="s",I="y"),o="interpolate"===x.stackgaps):calcAxisExpansion$1(e,t,c,u,f,m,calcMarkerSize(t,y));var C=!!t.xperiodalignment,w=!!t.yperiodalignment;for(n=0;n<y;n++){var Q=b[n]={},U=isNumeric$a(f[n]),S=isNumeric$a(m[n]);U&&S?(Q[F]=f[n],Q[A]=m[n],C&&(Q.orig_x=d[n],Q.xEnd=g.ends[n],Q.xStart=g.starts[n]),w&&(Q.orig_y=h[n],Q.yEnd=p.ends[n],Q.yStart=p.starts[n])):x&&(r?U:S)?(Q[I]=r?f[n]:m[n],Q.gap=!0,o?(Q.s=BADNUM$3,B=!0):Q.s=0):Q[F]=Q[A]=BADNUM$3,v&&(Q.id=String(v[n]))}if(arraysToCalcdata$2(b,t),calcColorscale$1(e,t),calcSelection(b,t),x){for(n=0;n<b.length;)b[n][I]===BADNUM$3?b.splice(n,1):n++;if(Lib$M.sort(b,(function(e,t){return e[I]-t[I]||e.i-t.i})),B){for(n=0;n<b.length-1&&b[n].gap;)n++;for((s=b[n].s)||(s=b[n].s=0),i=0;i<n;i++)b[i].s=s;for(a=b.length-1;a>n&&b[a].gap;)a--;for(s=b[a].s,i=b.length-1;i>a;i--)b[i].s=s;for(;n<a;)if(b[++n].gap){for(i=n+1;b[i].gap;)i++;for(var E=b[n-1][I],L=b[n-1].s,_=(b[i].s-L)/(b[i][I]-E);n<i;)b[n].s=L+(b[n][I]-E)*_,n++}}}return b}function calcAxisExpansion$1(e,t,r,n,i,a,o){var s=t._length,l=e._fullLayout,c=r._id,u=n._id,d=l._firstScatter[firstScatterGroup(t)]===t.uid,h=(getStackOpts(t,l,r,n)||{}).orientation,g=t.fill;r._minDtick=0,n._minDtick=0;var p={padded:!0},f={padded:!0};o&&(p.ppad=f.ppad=o);var m=s<2||i[0]!==i[s-1]||a[0]!==a[s-1];m&&("tozerox"===g||"tonextx"===g&&(d||"h"===h))?p.tozero=!0:(t.error_y||{}).visible||"tonexty"!==g&&"tozeroy"!==g&&(subTypes$2.hasMarkers(t)||subTypes$2.hasText(t))||(p.padded=!1,p.ppad=0),m&&("tozeroy"===g||"tonexty"===g&&(d||"v"===h))?f.tozero=!0:"tonextx"!==g&&"tozerox"!==g||(f.padded=!1),c&&(t._extremes[c]=Axes$g.findExtremes(r,i,p)),u&&(t._extremes[u]=Axes$g.findExtremes(n,a,f))}function calcMarkerSize(e,t){if(subTypes$2.hasMarkers(e)){var r,n=e.marker,i=1.6*(e.marker.sizeref||1);if(r="area"===e.marker.sizemode?function(e){return Math.max(Math.sqrt((e||0)/i),3)}:function(e){return Math.max((e||0)/i,3)},Lib$M.isArrayOrTypedArray(n.size)){var a={type:"linear"};Axes$g.setConvert(a);for(var o=a.makeCalcdata(e.marker,"size"),s=new Array(t),l=0;l<t;l++)s[l]=r(o[l]);return s}return r(n.size)}}function setFirstScatter(e,t){var r=firstScatterGroup(t),n=e._firstScatter;n[r]||(n[r]=t.uid)}function firstScatterGroup(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function getStackOpts(e,t,r,n){var i=e.stackgroup;if(i){var a=t._scatterStackOpts[r._id+n._id][i],o="v"===a.orientation?n:r;return"linear"===o.type||"log"===o.type?a:void 0}}var calc_1$2={calc:calc$6,calcMarkerSize:calcMarkerSize,calcAxisExpansion:calcAxisExpansion$1,setFirstScatter:setFirstScatter,getStackOpts:getStackOpts},sieve=Sieve$1,distinctVals$1=libExports.distinctVals;function Sieve$1(e,t){this.traces=e,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var r=1/0,n=t.posAxis._id.charAt(0),i=[],a=0;a<e.length;a++){for(var o=e[a],s=0;s<o.length;s++){var l=o[s],c=l.p;void 0===c&&(c=l[n]),void 0!==c&&i.push(c)}o[0]&&o[0].width1&&(r=Math.min(o[0].width1,r))}this.positions=i;var u=distinctVals$1(i);this.distinctPositions=u.vals,1===u.vals.length&&r!==1/0?this.minDiff=r:this.minDiff=Math.min(u.minDiff,r);var d=(t.posAxis||{}).type;"category"!==d&&"multicategory"!==d||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}Sieve$1.prototype.put=function(e,t){var r=this.getLabel(e,t),n=this.bins[r]||0;return this.bins[r]=n+t,n},Sieve$1.prototype.get=function(e,t){var r=this.getLabel(e,t);return this.bins[r]||0},Sieve$1.prototype.getLabel=function(e,t){return(t<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?e:Math.round(e/this.binWidth))};var isNumeric$9=fastIsnumeric,isArrayOrTypedArray$2=libExports.isArrayOrTypedArray,BADNUM$2=numerical.BADNUM,Registry$n=registry,Axes$f=axesExports,getAxisGroup$1=constraints.getAxisGroup,Sieve=sieve;function crossTraceCalc(e,t){for(var r=t.xaxis,n=t.yaxis,i=e._fullLayout,a=e._fullData,o=e.calcdata,s=[],l=[],c=0;c<a.length;c++){var u=a[c];if(!0===u.visible&&Registry$n.traceIs(u,"bar")&&u.xaxis===r._id&&u.yaxis===n._id&&("h"===u.orientation?s.push(o[c]):l.push(o[c]),u._computePh))for(var d=e.calcdata[c],h=0;h<d.length;h++)"function"==typeof d[h].ph0&&(d[h].ph0=d[h].ph0()),"function"==typeof d[h].ph1&&(d[h].ph1=d[h].ph1())}var g={xCat:"category"===r.type||"multicategory"===r.type,yCat:"category"===n.type||"multicategory"===n.type,mode:i.barmode,norm:i.barnorm,gap:i.bargap,groupgap:i.bargroupgap};setGroupPositions$1(e,r,n,l,g),setGroupPositions$1(e,n,r,s,g)}function setGroupPositions$1(e,t,r,n,i){if(n.length){var a,o,s,l;switch(initBase(r,n),i.mode){case"overlay":setGroupPositionsInOverlayMode(t,r,n,i);break;case"group":for(a=[],o=[],s=0;s<n.length;s++)void 0===(l=n[s])[0].trace.offset?o.push(l):a.push(l);o.length&&setGroupPositionsInGroupMode(e,t,r,o,i),a.length&&setGroupPositionsInOverlayMode(t,r,a,i);break;case"stack":case"relative":for(a=[],o=[],s=0;s<n.length;s++)void 0===(l=n[s])[0].trace.base?o.push(l):a.push(l);o.length&&setGroupPositionsInStackOrRelativeMode(e,t,r,o,i),a.length&&setGroupPositionsInOverlayMode(t,r,a,i)}collectExtents(n,t)}}function initBase(e,t){var r,n;for(r=0;r<t.length;r++){var i,a=t[r],o=a[0].trace,s="funnel"===o.type?o._base:o.base,l="h"===o.orientation?o.xcalendar:o.ycalendar,c="category"===e.type||"multicategory"===e.type?function(){return null}:e.d2c;if(isArrayOrTypedArray$2(s)){for(n=0;n<Math.min(s.length,a.length);n++)i=c(s[n],0,l),isNumeric$9(i)?(a[n].b=+i,a[n].hasB=1):a[n].b=0;for(;n<a.length;n++)a[n].b=0}else{i=c(s,0,l);var u=isNumeric$9(i);for(i=u?i:0,n=0;n<a.length;n++)a[n].b=i,u&&(a[n].hasB=1)}}}function setGroupPositionsInOverlayMode(e,t,r,n){for(var i=0;i<r.length;i++){var a=r[i],o=new Sieve([a],{posAxis:e,sepNegVal:!1,overlapNoMerge:!n.norm});setOffsetAndWidth(e,o,n),n.norm?(sieveBars(o),normalizeBars(t,o,n)):setBaseAndTop(t,o)}}function setGroupPositionsInGroupMode(e,t,r,n,i){var a=new Sieve(n,{posAxis:t,sepNegVal:!1,overlapNoMerge:!i.norm});setOffsetAndWidthInGroupMode(e,t,a,i),unhideBarsWithinTrace(a,t),i.norm?(sieveBars(a),normalizeBars(r,a,i)):setBaseAndTop(r,a)}function setGroupPositionsInStackOrRelativeMode(e,t,r,n,i){var a=new Sieve(n,{posAxis:t,sepNegVal:"relative"===i.mode,overlapNoMerge:!(i.norm||"stack"===i.mode||"relative"===i.mode)});setOffsetAndWidth(t,a,i),stackBars(r,a,i);for(var o=0;o<n.length;o++)for(var s=n[o],l=0;l<s.length;l++){var c=s[l];if(c.s!==BADNUM$2)c.b+c.s===a.get(c.p,c.s)&&(c._outmost=!0)}i.norm&&normalizeBars(r,a,i)}function setOffsetAndWidth(e,t,r){for(var n=t.minDiff,i=t.traces,a=n*(1-r.gap),o=a*(1-(r.groupgap||0)),s=-o/2,l=0;l<i.length;l++){var c=i[l][0].t;c.barwidth=o,c.poffset=s,c.bargroupwidth=a,c.bardelta=n}t.binWidth=i[0][0].t.barwidth/100,applyAttributes(t),setBarCenterAndWidth(e,t),updatePositionAxis(e,t)}function setOffsetAndWidthInGroupMode(e,t,r,n){for(var i=e._fullLayout,a=r.positions,o=r.distinctPositions,s=r.minDiff,l=r.traces,c=l.length,u=a.length!==o.length,d=s*(1-n.gap),h=getAxisGroup$1(i,t._id)+l[0][0].trace.orientation,g=i._alignmentOpts[h]||{},p=0;p<c;p++){var f,m,y=l[p],b=y[0].trace,v=g[b.alignmentgroup]||{},x=Object.keys(v.offsetGroups||{}).length,B=(f=x?d/x:u?d/c:d)*(1-(n.groupgap||0));m=x?((2*b._offsetIndex+1-x)*f-B)/2:u?((2*p+1-c)*f-B)/2:-B/2;var I=y[0].t;I.barwidth=B,I.poffset=m,I.bargroupwidth=d,I.bardelta=s}r.binWidth=l[0][0].t.barwidth/100,applyAttributes(r),setBarCenterAndWidth(t,r),updatePositionAxis(t,r,u)}function applyAttributes(e){var t,r,n=e.traces;for(t=0;t<n.length;t++){var i,a=n[t],o=a[0],s=o.trace,l=o.t,c=s._offset||s.offset,u=l.poffset;if(isArrayOrTypedArray$2(c)){for(i=Array.prototype.slice.call(c,0,a.length),r=0;r<i.length;r++)isNumeric$9(i[r])||(i[r]=u);for(r=i.length;r<a.length;r++)i.push(u);l.poffset=i}else void 0!==c&&(l.poffset=c);var d=s._width||s.width,h=l.barwidth;if(isArrayOrTypedArray$2(d)){var g=Array.prototype.slice.call(d,0,a.length);for(r=0;r<g.length;r++)isNumeric$9(g[r])||(g[r]=h);for(r=g.length;r<a.length;r++)g.push(h);if(l.barwidth=g,void 0===c){for(i=[],r=0;r<a.length;r++)i.push(u+(h-g[r])/2);l.poffset=i}}else void 0!==d&&(l.barwidth=d,void 0===c&&(l.poffset=u+(h-d)/2))}}function setBarCenterAndWidth(e,t){for(var r=t.traces,n=getAxisLetter(e),i=0;i<r.length;i++)for(var a=r[i],o=a[0].t,s=o.poffset,l=Array.isArray(s),c=o.barwidth,u=Array.isArray(c),d=0;d<a.length;d++){var h=a[d],g=h.w=u?c[d]:c;void 0===h.p&&(h.p=h[n],h["orig_"+n]=h[n]);var p=(l?s[d]:s)+g/2;h[n]=h.p+p}}function updatePositionAxis(e,t,r){var n=t.traces,i=t.minDiff/2;Axes$f.minDtick(e,t.minDiff,t.distinctPositions[0],r);for(var a=0;a<n.length;a++){var o,s,l,c,u=n[a],d=u[0],h=d.trace,g=[];for(c=0;c<u.length;c++)s=(o=u[c]).p-i,l=o.p+i,g.push(s,l);if(h.width||h.offset){var p=d.t,f=p.poffset,m=p.barwidth,y=Array.isArray(f),b=Array.isArray(m);for(c=0;c<u.length;c++){o=u[c];var v=y?f[c]:f,x=b?m[c]:m;l=(s=o.p+v)+x,g.push(s,l)}}h._extremes[e._id]=Axes$f.findExtremes(e,g,{padded:!1})}}function setBaseAndTop(e,t){for(var r=t.traces,n=getAxisLetter(e),i=0;i<r.length;i++){for(var a=r[i],o=a[0].trace,s="scatter"===o.type,l="v"===o.orientation,c=[],u=!1,d=0;d<a.length;d++){var h=a[d],g=s?0:h.b,p=s?l?h.y:h.x:g+h.s;h[n]=p,c.push(p),h.hasB&&c.push(g),h.hasB&&h.b||(u=!0)}o._extremes[e._id]=Axes$f.findExtremes(e,c,{tozero:u,padded:!0})}}function stackBars(e,t,r){var n,i,a,o,s,l,c=getAxisLetter(e),u=t.traces;for(o=0;o<u.length;o++)if("funnel"===(i=(n=u[o])[0].trace).type)for(s=0;s<n.length;s++)(l=n[s]).s!==BADNUM$2&&t.put(l.p,-.5*l.s);for(o=0;o<u.length;o++){a="funnel"===(i=(n=u[o])[0].trace).type;var d=[];for(s=0;s<n.length;s++)if((l=n[s]).s!==BADNUM$2){var h;h=a?l.s:l.s+l.b;var g=t.put(l.p,h),p=g+h;l.b=g,l[c]=p,r.norm||(d.push(p),l.hasB&&d.push(g))}r.norm||(i._extremes[e._id]=Axes$f.findExtremes(e,d,{tozero:!0,padded:!0}))}}function sieveBars(e){for(var t=e.traces,r=0;r<t.length;r++)for(var n=t[r],i=0;i<n.length;i++){var a=n[i];a.s!==BADNUM$2&&e.put(a.p,a.b+a.s)}}function unhideBarsWithinTrace(e,t){for(var r=e.traces,n=0;n<r.length;n++){var i=r[n];if(void 0===i[0].trace.base)for(var a=new Sieve([i],{posAxis:t,sepNegVal:!0,overlapNoMerge:!0}),o=0;o<i.length;o++){var s=i[o];if(s.p!==BADNUM$2){var l=a.put(s.p,s.b+s.s);l&&(s.b=l)}}}}function normalizeBars(e,t,r){var n=t.traces,i=getAxisLetter(e),a="fraction"===r.norm?1:100,o=a/1e9,s=e.l2c(e.c2l(0)),l="stack"===r.mode?a:s;function c(t){return isNumeric$9(e.c2l(t))&&(t<s-o||t>l+o||!isNumeric$9(s))}for(var u=0;u<n.length;u++){for(var d=n[u],h=d[0].trace,g=[],p=!1,f=!1,m=0;m<d.length;m++){var y=d[m];if(y.s!==BADNUM$2){var b=Math.abs(a/t.get(y.p,y.s));y.b*=b,y.s*=b;var v=y.b,x=v+y.s;y[i]=x,g.push(x),f=f||c(x),y.hasB&&(g.push(v),f=f||c(v)),y.hasB&&y.b||(p=!0)}}h._extremes[e._id]=Axes$f.findExtremes(e,g,{tozero:p,padded:f})}}function collectExtents(e,t){var r,n,i,a=getAxisLetter(t),o={},s=1/0,l=-1/0;for(r=0;r<e.length;r++)for(i=e[r],n=0;n<i.length;n++){var c=i[n].p;isNumeric$9(c)&&(s=Math.min(s,c),l=Math.max(l,c))}var u=1e4/(l-s),d=o.round=function(e){return String(Math.round(u*(e-s)))};for(r=0;r<e.length;r++){(i=e[r])[0].t.extents=o;var h=i[0].t.poffset,g=Array.isArray(h);for(n=0;n<i.length;n++){var p=i[n],f=p[a]-p.w/2;if(isNumeric$9(f)){var m=p[a]+p.w/2,y=d(p.p);o[y]?o[y]=[Math.min(f,o[y][0]),Math.max(m,o[y][1])]:o[y]=[f,m]}p.p0=p.p+(g?h[n]:h),p.p1=p.p0+p.w,p.s0=p.b,p.s1=p.s0+p.s}}}function getAxisLetter(e){return e._id.charAt(0)}var cross_trace_calc$1={crossTraceCalc:crossTraceCalc,setGroupPositions:setGroupPositions$1},calc$5=calc_1$2,setGroupPositions=cross_trace_calc$1.setGroupPositions;function groupCrossTraceCalc(e,t){for(var r=t.xaxis,n=t.yaxis,i=e._fullLayout,a=e._fullData,o=e.calcdata,s=[],l=[],c=0;c<a.length;c++){var u=a[c];!0===u.visible&&"scatter"===u.type&&u.xaxis===r._id&&u.yaxis===n._id&&("h"===u.orientation?s.push(o[c]):"v"===u.orientation&&l.push(o[c]))}var d={mode:i.scattermode,gap:i.scattergap};setGroupPositions(e,r,n,l,d),setGroupPositions(e,n,r,s,d)}var cross_trace_calc=function(e,t){"group"===e._fullLayout.scattermode&&groupCrossTraceCalc(e,t);var r=t.xaxis,n=t.yaxis,i=r._id+n._id,a=e._fullLayout._scatterStackOpts[i];if(a){var o,s,l,c,u,d,h,g,p,f,m,y,b,v,x,B=e.calcdata;for(var I in a){var F=(f=a[I]).traceIndices;if(F.length){for(m="interpolate"===f.stackgaps,y=f.groupnorm,"v"===f.orientation?(b="x",v="y"):(b="y",v="x"),x=new Array(F.length),o=0;o<x.length;o++)x[o]=!1;d=B[F[0]];var A=new Array(d.length);for(o=0;o<d.length;o++)A[o]=d[o][b];for(o=1;o<F.length;o++){for(u=B[F[o]],s=l=0;s<u.length;s++){for(h=u[s][b];h>A[l]&&l<A.length;l++)insertBlank(u,s,A[l],o,x,m,b),s++;if(h!==A[l]){for(c=0;c<o;c++)insertBlank(B[F[c]],l,h,c,x,m,b);A.splice(l,0,h)}l++}for(;l<A.length;l++)insertBlank(u,s,A[l],o,x,m,b),s++}var C=A.length;for(s=0;s<d.length;s++){for(g=d[s][v]=d[s].s,o=1;o<F.length;o++)(u=B[F[o]])[0].trace._rawLength=u[0].trace._length,u[0].trace._length=C,g+=u[s].s,u[s][v]=g;if(y)for(p=("fraction"===y?g:g/100)||1,o=0;o<F.length;o++){var w=B[F[o]][s];w[v]/=p,w.sNorm=w.s/p}}for(o=0;o<F.length;o++){var Q=(u=B[F[o]])[0].trace,U=calc$5.calcMarkerSize(Q,Q._rawLength),S=Array.isArray(U);if(U&&x[o]||S){var E=U;for(U=new Array(C),s=0;s<C;s++)U[s]=u[s].gap?0:S?E[u[s].i]:E}var L=new Array(C),_=new Array(C);for(s=0;s<C;s++)L[s]=u[s].x,_[s]=u[s].y;calc$5.calcAxisExpansion(e,Q,r,n,L,_,U),u[0].t.orientation=f.orientation}}}}};function insertBlank(e,t,r,n,i,a,o){i[n]=!0;var s={i:null,gap:!0,s:0};if(s[o]=r,e.splice(t,0,s),t&&r===e[t-1][o]){var l=e[t-1];s.s=l.s,s.i=l.i,s.gap=l.gap}else a&&(s.s=getInterp(e,t,r,o));t||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}function getInterp(e,t,r,n){var i=e[t-1],a=e[t+1];return a?i?i.s+(a.s-i.s)*(r-i[n])/(a[n]-i[n]):a.s:i.s}var Drawing$c=drawingExports,numConstants$1=numerical,BADNUM$1=numConstants$1.BADNUM,LOG_CLIP=numConstants$1.LOG_CLIP,LOG_CLIP_PLUS=LOG_CLIP+.5,LOG_CLIP_MINUS=LOG_CLIP-.5,Lib$L=libExports,segmentsIntersect=Lib$L.segmentsIntersect,constrain=Lib$L.constrain,constants$m=constants$r,line_points=function(e,t){var r,n,i,a,o,s,l,c,u,d,h,g,p,f,m,y,b,v,x=t.trace||{},B=t.xaxis,I=t.yaxis,F="log"===B.type,A="log"===I.type,C=B._length,w=I._length,Q=t.backoff,U=x.marker,S=t.connectGaps,E=t.baseTolerance,L=t.shape,_="linear"===L,T=x.fill&&"none"!==x.fill,R=[],$=constants$m.minTolerance,k=e.length,N=new Array(k),G=0;function M(r){var n=e[r];if(!n)return!1;var i=t.linearized?B.l2p(n.x):B.c2p(n.x),a=t.linearized?I.l2p(n.y):I.c2p(n.y);if(i===BADNUM$1){if(F&&(i=B.c2p(n.x,!0)),i===BADNUM$1)return!1;A&&a===BADNUM$1&&(i*=Math.abs(B._m*w*(B._m>0?LOG_CLIP_PLUS:LOG_CLIP_MINUS)/(I._m*C*(I._m>0?LOG_CLIP_PLUS:LOG_CLIP_MINUS)))),i*=1e3}if(a===BADNUM$1){if(A&&(a=I.c2p(n.y,!0)),a===BADNUM$1)return!1;a*=1e3}return[i,a]}function D(e,t,r,n){var i=r-e,a=n-t,o=.5-e,s=.5-t,l=i*i+a*a,c=i*o+a*s;if(c>0&&c<l){var u=o*a-s*i;if(u*u<l)return!0}}function V(e,t){var r=e[0]/C,n=e[1]/w,i=Math.max(0,-r,r-1,-n,n-1);return i&&void 0!==b&&D(r,n,b,v)&&(i=0),i&&t&&D(r,n,t[0]/C,t[1]/w)&&(i=0),(1+constants$m.toleranceGrowth*i)*E}function H(e,t){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}var X,O,Z,W,Y,P,z,J=constants$m.maxScreensAway,j=-C*J,K=C*(1+J),q=-w*J,ee=w*(1+J),te=[[j,q,K,q],[K,q,K,ee],[K,ee,j,ee],[j,ee,j,q]];function re(e){if(e[0]<j||e[0]>K||e[1]<q||e[1]>ee)return[constrain(e[0],j,K),constrain(e[1],q,ee)]}function ne(e,t){return e[0]===t[0]&&(e[0]===j||e[0]===K)||(e[1]===t[1]&&(e[1]===q||e[1]===ee)||void 0)}function ie(e,t,r){return function(n,i){var a=re(n),o=re(i),s=[];if(a&&o&&ne(a,o))return s;a&&s.push(a),o&&s.push(o);var l=2*Lib$L.constrain((n[e]+i[e])/2,t,r)-((a||n)[e]+(o||i)[e]);l&&((a&&o?l>0==a[e]>o[e]?a:o:a||o)[e]+=l);return s}}function ae(e){var t=e[0],r=e[1],n=t===N[G-1][0],i=r===N[G-1][1];if(!n||!i)if(G>1){var a=t===N[G-2][0],o=r===N[G-2][1];n&&(t===j||t===K)&&a?o?G--:N[G-1]=e:i&&(r===q||r===ee)&&o?a?G--:N[G-1]=e:N[G++]=e}else N[G++]=e}function oe(e){N[G-1][0]!==e[0]&&N[G-1][1]!==e[1]&&ae([Z,W]),ae(e),Y=null,Z=W=0}"linear"===L||"spline"===L?z=function(e,t){for(var r=[],n=0,i=0;i<4;i++){var a=te[i],o=segmentsIntersect(e[0],e[1],t[0],t[1],a[0],a[1],a[2],a[3]);o&&(!n||Math.abs(o.x-r[0][0])>1||Math.abs(o.y-r[0][1])>1)&&(o=[o.x,o.y],n&&H(o,e)<H(r[0],e)?r.unshift(o):r.push(o),n++)}return r}:"hv"===L||"vh"===L?z=function(e,t){var r=[],n=re(e),i=re(t);return n&&i&&ne(n,i)||(n&&r.push(n),i&&r.push(i)),r}:"hvh"===L?z=ie(0,j,K):"vhv"===L&&(z=ie(1,q,ee));var se=Lib$L.isArrayOrTypedArray(U);function le(t){if(t&&Q&&(t.i=r,t.d=e,t.trace=x,t.marker=se?U[t.i]:U,t.backoff=Q),b=t[0]/C,v=t[1]/w,X=t[0]<j?j:t[0]>K?K:0,O=t[1]<q?q:t[1]>ee?ee:0,X||O){if(G)if(Y){var n=z(Y,t);n.length>1&&(oe(n[0]),N[G++]=n[1])}else P=z(N[G-1],t)[0],N[G++]=P;else N[G++]=[X||t[0],O||t[1]];var i=N[G-1];X&&O&&(i[0]!==X||i[1]!==O)?(Y&&(Z!==X&&W!==O?ae(Z&&W?function(e,t){var r=t[0]-e[0],n=(t[1]-e[1])/r;return(e[1]*t[0]-t[1]*e[0])/r>0?[n>0?j:K,ee]:[n>0?K:j,q]}(Y,t):[Z||X,W||O]):Z&&W&&ae([Z,W])),ae([X,O])):Z-X&&W-O&&ae([X||Z,O||W]),Y=t,Z=X,W=O}else Y&&oe(z(Y,t)[0]),N[G++]=t}for(r=0;r<k;r++)if(n=M(r)){for(G=0,Y=null,le(n),r++;r<k;r++){if(!(a=M(r))){if(S)continue;break}if(_&&t.simplify){var ce=M(r+1);if(d=H(a,n),T&&(0===G||G===k-1)||!(d<V(a,ce)*$)){for(c=[(a[0]-n[0])/d,(a[1]-n[1])/d],o=n,h=d,g=f=m=0,l=!1,i=a,r++;r<e.length;r++){if(s=ce,ce=M(r+1),!s){if(S)continue;break}if(y=(u=[s[0]-n[0],s[1]-n[1]])[0]*c[1]-u[1]*c[0],f=Math.min(f,y),(m=Math.max(m,y))-f>V(s,ce))break;i=s,(p=u[0]*c[0]+u[1]*c[1])>h?(h=p,a=s,l=!1):p<g&&(g=p,o=s,l=!0)}if(l?(le(a),i!==o&&le(o)):(o!==n&&le(o),i!==a&&le(a)),le(i),r>=e.length||!s)break;le(s),n=s}}else le(a)}Y&&ae([Z||Y[0],W||Y[1]]),R.push(N.slice(0,G))}var ue=L.slice(L.length-1);if(Q&&"h"!==ue&&"v"!==ue){for(var de=!1,he=-1,ge=[],pe=0;pe<R.length;pe++)for(var fe=0;fe<R[pe].length-1;fe++){var me=R[pe][fe],ye=R[pe][fe+1],be=Drawing$c.applyBackoff(ye,me);be[0]===ye[0]&&be[1]===ye[1]||(de=!0),ge[he+1]||(ge[++he]=[me,[be[0],be[1]]])}return de?ge:R}return R},LINKEDFILLS={tonextx:1,tonexty:1,tonext:1},link_traces=function(e,t,r){var n,i,a,o,s,l={},c=!1,u=-1,d=0,h=-1;for(i=0;i<r.length;i++)(a=(n=r[i][0].trace).stackgroup||"")?a in l?s=l[a]:(s=l[a]=d,d++):n.fill in LINKEDFILLS&&h>=0?s=h:(s=h=d,d++),s<u&&(c=!0),n._groupIndex=u=s;var g=r.slice();c&&g.sort((function(e,t){var r=e[0].trace,n=t[0].trace;return r._groupIndex-n._groupIndex||r.index-n.index}));var p={};for(i=0;i<g.length;i++)a=(n=g[i][0].trace).stackgroup||"",!0===n.visible?(n._nexttrace=null,n.fill in LINKEDFILLS&&(o=p[a],n._prevtrace=o||null,o&&(o._nexttrace=n)),n._ownfill=n.fill&&("tozero"===n.fill.substr(0,6)||"toself"===n.fill||"to"===n.fill.substr(0,2)&&!n._prevtrace),p[a]=n):n._prevtrace=n._nexttrace=n._ownfill=null;return g},d3$d=d3Exports,Registry$m=registry,Lib$K=libExports,ensureSingle$1=Lib$K.ensureSingle,identity=Lib$K.identity,Drawing$b=drawingExports,subTypes$1=subtypes$3,linePoints=line_points,linkTraces=link_traces,polygonTester=polygonExports.tester,plot$2=function(e,t,r,n,i,a){var o,s,l=!i,c=!!i&&i.duration>0,u=linkTraces(e,t,r);(o=n.selectAll("g.trace").data(u,(function(e){return e[0].trace.uid})),o.enter().append("g").attr("class",(function(e){return"trace scatter trace"+e[0].trace.uid})).style("stroke-miterlimit",2),o.order(),createFills(e,o,t),c)?(a&&(s=a()),d3$d.transition().duration(i.duration).ease(i.easing).each("end",(function(){s&&s()})).each("interrupt",(function(){s&&s()})).each((function(){n.selectAll("g.trace").each((function(r,n){plotOne$1(e,n,t,r,u,this,i)}))}))):o.each((function(r,n){plotOne$1(e,n,t,r,u,this,i)}));l&&o.exit().remove(),n.selectAll("path:not([d])").remove()};function createFills(e,t,r){t.each((function(t){var n=ensureSingle$1(d3$d.select(this),"g","fills");Drawing$b.setClipUrl(n,r.layerClipId,e);var i=t[0].trace,a=[];i._ownfill&&a.push("_ownFill"),i._nexttrace&&a.push("_nextFill");var o=n.selectAll("g").data(a,identity);o.enter().append("g"),o.exit().each((function(e){i[e]=null})).remove(),o.order().each((function(e){i[e]=ensureSingle$1(d3$d.select(this),"path","js-fill")}))}))}function plotOne$1(e,t,r,n,i,a,o){var s,l=e._context.staticPlot;selectMarkers(e,t,r,n,i);var c=!!o&&o.duration>0;function u(e){return c?e.transition():e}var d=r.xaxis,h=r.yaxis,g=n[0].trace,p=g.line,f=d3$d.select(a),m=ensureSingle$1(f,"g","errorbars"),y=ensureSingle$1(f,"g","lines"),b=ensureSingle$1(f,"g","points"),v=ensureSingle$1(f,"g","text");if(Registry$m.getComponentMethod("errorbars","plot")(e,m,r,o),!0===g.visible){var x,B;u(f).style("opacity",g.opacity);var I=g.fill.charAt(g.fill.length-1);"x"!==I&&"y"!==I&&(I=""),n[0][r.isRangePlot?"nodeRangePlot3":"node3"]=f;var F,A,C="",w=[],Q=g._prevtrace;Q&&(C=Q._prevRevpath||"",B=Q._nextFill,w=Q._polygons);var U,S,E,L,_,T,R,$="",k="",N=[],G=Lib$K.noop;if(x=g._ownFill,subTypes$1.hasLines(g)||"none"!==g.fill){for(B&&B.datum(n),-1!==["hv","vh","hvh","vhv"].indexOf(p.shape)?(U=Drawing$b.steps(p.shape),S=Drawing$b.steps(p.shape.split("").reverse().join(""))):U=S="spline"===p.shape?function(e){var t=e[e.length-1];return e.length>1&&e[0][0]===t[0]&&e[0][1]===t[1]?Drawing$b.smoothclosed(e.slice(1),p.smoothing):Drawing$b.smoothopen(e,p.smoothing)}:function(e){return"M"+e.join("L")},E=function(e){return S(e.reverse())},N=linePoints(n,{xaxis:d,yaxis:h,trace:g,connectGaps:g.connectgaps,baseTolerance:Math.max(p.width||1,3)/4,shape:p.shape,backoff:p.backoff,simplify:p.simplify,fill:g.fill}),R=g._polygons=new Array(N.length),s=0;s<N.length;s++)g._polygons[s]=polygonTester(N[s]);N.length&&(L=N[0][0],T=(_=N[N.length-1])[_.length-1]),G=function(e){return function(t){if(F=U(t),A=E(t),$?I?($+="L"+F.substr(1),k=A+"L"+k.substr(1)):($+="Z"+F,k=A+"Z"+k):($=F,k=A),subTypes$1.hasLines(g)){var r=d3$d.select(this);if(r.datum(n),e)u(r.style("opacity",0).attr("d",F).call(Drawing$b.lineGroupStyle)).style("opacity",1);else{var i=u(r);i.attr("d",F),Drawing$b.singleLineStyle(n,i)}}}}}var M=y.selectAll(".js-line").data(N);u(M.exit()).style("opacity",0).remove(),M.each(G(!1)),M.enter().append("path").classed("js-line",!0).style("vector-effect",l?"none":"non-scaling-stroke").call(Drawing$b.lineGroupStyle).each(G(!0)),Drawing$b.setClipUrl(M,r.layerClipId,e),N.length?(x?(x.datum(n),L&&T&&(I?("y"===I?L[1]=T[1]=h.c2p(0,!0):"x"===I&&(L[0]=T[0]=d.c2p(0,!0)),u(x).attr("d","M"+T+"L"+L+"L"+$.substr(1)).call(Drawing$b.singleFillStyle,e)):u(x).attr("d",$+"Z").call(Drawing$b.singleFillStyle,e))):B&&("tonext"===g.fill.substr(0,6)&&$&&C?("tonext"===g.fill?u(B).attr("d",$+"Z"+C+"Z").call(Drawing$b.singleFillStyle,e):u(B).attr("d",$+"L"+C.substr(1)+"Z").call(Drawing$b.singleFillStyle,e),g._polygons=g._polygons.concat(w)):(V(B),g._polygons=null)),g._prevRevpath=k,g._prevPolygons=R):(x?V(x):B&&V(B),g._polygons=g._prevRevpath=g._prevPolygons=null),b.datum(n),v.datum(n),function(t,n,i){var a,o=i[0].trace,s=subTypes$1.hasMarkers(o),l=subTypes$1.hasText(o),g=W(o),p=Y,f=Y;if(s||l){var m=identity,y=o.stackgroup,b=y&&"infer zero"===e._fullLayout._scatterStackOpts[d._id+h._id][y].stackgaps;o.marker.maxdisplayed||o._needsCull?m=b?X:H:y&&!b&&(m=O),s&&(p=m),l&&(f=m)}var v,x=(a=t.selectAll("path.point").data(p,g)).enter().append("path").classed("point",!0);c&&x.call(Drawing$b.pointStyle,o,e).call(Drawing$b.translatePoints,d,h).style("opacity",0).transition().style("opacity",1),a.order(),s&&(v=Drawing$b.makePointStyleFns(o)),a.each((function(t){var n=d3$d.select(this),i=u(n);Drawing$b.translatePoint(t,i,d,h)?(Drawing$b.singlePointStyle(t,i,o,v,e),r.layerClipId&&Drawing$b.hideOutsideRangePoint(t,i,d,h,o.xcalendar,o.ycalendar),o.customdata&&n.classed("plotly-customdata",null!==t.data&&void 0!==t.data)):i.remove()})),c?a.exit().transition().style("opacity",0).remove():a.exit().remove(),(a=n.selectAll("g").data(f,g)).enter().append("g").classed("textpoint",!0).append("text"),a.order(),a.each((function(e){var t=d3$d.select(this),n=u(t.select("text"));Drawing$b.translatePoint(e,n,d,h)?r.layerClipId&&Drawing$b.hideOutsideRangePoint(e,t,d,h,o.xcalendar,o.ycalendar):t.remove()})),a.selectAll("text").call(Drawing$b.textPointStyle,o,e).each((function(e){var t=d.c2p(e.x),r=h.c2p(e.y);d3$d.select(this).selectAll("tspan.line").each((function(){u(d3$d.select(this)).attr({x:t,y:r})}))})),a.exit().remove()}(b,v,n);var D=!1===g.cliponaxis?null:r.layerClipId;Drawing$b.setClipUrl(b,D,e),Drawing$b.setClipUrl(v,D,e)}function V(e){u(e).attr("d","M0,0Z")}function H(e){return e.filter((function(e){return!e.gap&&e.vis}))}function X(e){return e.filter((function(e){return e.vis}))}function O(e){return e.filter((function(e){return!e.gap}))}function Z(e){return e.id}function W(e){if(e.ids)return Z}function Y(){return!1}}function selectMarkers(e,t,r,n,i){var a=r.xaxis,o=r.yaxis,s=d3$d.extent(Lib$K.simpleMap(a.range,a.r2c)),l=d3$d.extent(Lib$K.simpleMap(o.range,o.r2c)),c=n[0].trace;if(subTypes$1.hasMarkers(c)){var u=c.marker.maxdisplayed;if(0!==u){var d=n.filter((function(e){return e.x>=s[0]&&e.x<=s[1]&&e.y>=l[0]&&e.y<=l[1]})),h=Math.ceil(d.length/u),g=0;i.forEach((function(e,r){var n=e[0].trace;subTypes$1.hasMarkers(n)&&n.marker.maxdisplayed>0&&r<t&&g++}));var p=Math.round(g*h/3+Math.floor(g/3)*h/7.1);n.forEach((function(e){delete e.vis})),d.forEach((function(e,t){0===Math.round((t+p)%h)&&(e.vis=!0)}))}}}var marker_colorbar={container:"marker",min:"cmin",max:"cmax"},Axes$e=axesExports,format_labels=function(e,t,r){var n={},i={_fullLayout:r},a=Axes$e.getFromTrace(i,t,"x"),o=Axes$e.getFromTrace(i,t,"y"),s=e.orig_x;void 0===s&&(s=e.x);var l=e.orig_y;return void 0===l&&(l=e.y),n.xLabel=Axes$e.tickText(a,a.c2l(s),!0).text,n.yLabel=Axes$e.tickText(o,o.c2l(l),!0).text,n},d3$c=d3Exports,Drawing$a=drawingExports,Registry$l=registry;function style$3(e){var t=d3$c.select(e).selectAll("g.trace.scatter");t.style("opacity",(function(e){return e[0].trace.opacity})),t.selectAll("g.points").each((function(t){stylePoints$1(d3$c.select(this),t.trace||t[0].trace,e)})),t.selectAll("g.text").each((function(t){styleText(d3$c.select(this),t.trace||t[0].trace,e)})),t.selectAll("g.trace path.js-line").call(Drawing$a.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(Drawing$a.fillGroupStyle,e),Registry$l.getComponentMethod("errorbars","style")(t)}function stylePoints$1(e,t,r){Drawing$a.pointStyle(e.selectAll("path.point"),t,r)}function styleText(e,t,r){Drawing$a.textPointStyle(e.selectAll("text"),t,r)}function styleOnSelect$1(e,t,r){var n=t[0].trace;n.selectedpoints?(Drawing$a.selectedPointStyle(r.selectAll("path.point"),n),Drawing$a.selectedTextStyle(r.selectAll("text"),n)):(stylePoints$1(r,n,e),styleText(r,n,e))}var attributes$t,hasRequiredAttributes$1,type_defaults,hasRequiredType_defaults,style_1$1={style:style$3,stylePoints:stylePoints$1,styleText:styleText,styleOnSelect:styleOnSelect$1},Color$i=colorExports,subtypes$2=subtypes$3,get_trace_color=function(e,t){var r,n;if("lines"===e.mode)return(r=e.line.color)&&Color$i.opacity(r)?r:e.fillcolor;if("none"===e.mode)return e.fill?e.fillcolor:"";var i=t.mcc||(e.marker||{}).color,a=t.mlcc||((e.marker||{}).line||{}).color;return(n=i&&Color$i.opacity(i)?i:a&&Color$i.opacity(a)&&(t.mlw||((e.marker||{}).line||{}).width)?a:"")?Color$i.opacity(n)<.3?Color$i.addOpacity(n,.3):n:(r=(e.line||{}).color)&&Color$i.opacity(r)&&subtypes$2.hasLines(e)&&e.line.width?r:e.fillcolor},Lib$J=libExports,Fx$3=fx,Registry$k=registry,getTraceColor$1=get_trace_color,Color$h=colorExports,fillText$1=Lib$J.fillText,hover$2=function(e,t,r,n){var i=e.cd,a=i[0].trace,o=e.xa,s=e.ya,l=o.c2p(t),c=s.c2p(r),u=[l,c],d=a.hoveron||"",h=-1!==a.mode.indexOf("markers")?3:.5,g=!!a.xperiodalignment,p=!!a.yperiodalignment;if(-1!==d.indexOf("points")){var f=function(e){var t=Math.max(h,e.mrc||0),r=o.c2p(e.x)-l,n=s.c2p(e.y)-c;return Math.max(Math.sqrt(r*r+n*n)-t,1-h/t)},m=Fx$3.getDistanceFunction(n,(function(e){if(g){var t=o.c2p(e.xStart),r=o.c2p(e.xEnd);return l>=Math.min(t,r)&&l<=Math.max(t,r)?0:1/0}var n=Math.max(3,e.mrc||0),i=1-1/n,a=Math.abs(o.c2p(e.x)-l);return a<n?i*a/n:a-n+i}),(function(e){if(p){var t=s.c2p(e.yStart),r=s.c2p(e.yEnd);return c>=Math.min(t,r)&&c<=Math.max(t,r)?0:1/0}var n=Math.max(3,e.mrc||0),i=1-1/n,a=Math.abs(s.c2p(e.y)-c);return a<n?i*a/n:a-n+i}),f);if(Fx$3.getClosest(i,m,e),!1!==e.index){var y=i[e.index],b=o.c2p(y.x,!0),v=s.c2p(y.y,!0),x=y.mrc||1;e.index=y.i;var B=i[0].t.orientation,I=B&&(y.sNorm||y.s),F="h"===B?I:void 0!==y.orig_x?y.orig_x:y.x,A="v"===B?I:void 0!==y.orig_y?y.orig_y:y.y;return Lib$J.extendFlat(e,{color:getTraceColor$1(a,y),x0:b-x,x1:b+x,xLabelVal:F,y0:v-x,y1:v+x,yLabelVal:A,spikeDistance:f(y),hovertemplate:a.hovertemplate}),fillText$1(y,a,e),Registry$k.getComponentMethod("errorbars","hoverInfo")(y,a,e),[e]}}if(-1!==d.indexOf("fills")&&a._polygons){var C,w,Q,U,S,E,L,_,T,R=a._polygons,$=[],k=!1,N=1/0,G=-1/0,M=1/0,D=-1/0;for(C=0;C<R.length;C++)(Q=R[C]).contains(u)&&(k=!k,$.push(Q),M=Math.min(M,Q.ymin),D=Math.max(D,Q.ymax));if(k){var V=((M=Math.max(M,0))+(D=Math.min(D,s._length)))/2;for(C=0;C<$.length;C++)for(U=$[C].pts,w=1;w<U.length;w++)(_=U[w-1][1])>V!=(T=U[w][1])>=V&&(E=U[w-1][0],L=U[w][0],T-_&&(S=E+(L-E)*(V-_)/(T-_),N=Math.min(N,S),G=Math.max(G,S)));N=Math.max(N,0),G=Math.min(G,o._length);var H=Color$h.defaultLine;return Color$h.opacity(a.fillcolor)?H=a.fillcolor:Color$h.opacity((a.line||{}).color)&&(H=a.line.color),Lib$J.extendFlat(e,{distance:e.maxHoverDistance,x0:N,x1:G,y0:V,y1:V,color:H,hovertemplate:!1}),delete e.index,a.text&&!Array.isArray(a.text)?e.text=String(a.text):e.text=a.name,[e]}}},subtypes$1=subtypes$3,select$1=function(e,t){var r,n,i,a,o=e.cd,s=e.xaxis,l=e.yaxis,c=[],u=o[0].trace;if(!subtypes$1.hasMarkers(u)&&!subtypes$1.hasText(u))return[];if(!1===t)for(r=0;r<o.length;r++)o[r].selected=0;else for(r=0;r<o.length;r++)n=o[r],i=s.c2p(n.x),a=l.c2p(n.y),null!==n.i&&t.contains([i,a],!1,r,e)?(c.push({pointNumber:n.i,x:s.c2d(n.x),y:l.c2d(n.y)}),n.selected=1):n.selected=0;return c},cartesian={};function requireAttributes$1(){return hasRequiredAttributes$1?attributes$t:(hasRequiredAttributes$1=1,attributes$t={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's x coordinates and","a 2D cartesian x axis.","If *x* (the default value), the x coordinates refer to","`layout.xaxis`.","If *x2*, the x coordinates refer to `layout.xaxis2`, and so on."].join(" ")},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's y coordinates and","a 2D cartesian y axis.","If *y* (the default value), the y coordinates refer to","`layout.yaxis`.","If *y2*, the y coordinates refer to `layout.yaxis2`, and so on."].join(" ")}})}function requireType_defaults(){if(hasRequiredType_defaults)return type_defaults;hasRequiredType_defaults=1;var e=registry.traceIs,t=axis_autotype;function r(e){return{v:"x",h:"y"}[e.orientation||"v"]}function n(t,n){var i=r(t),a=e(t,"box-violin"),o=e(t._fullInput||{},"candlestick");return a&&!o&&n===i&&void 0===t[i]&&void 0===t[i+"0"]}return type_defaults=function(i,a,o,s){o("autotypenumbers",s.autotypenumbersDflt),"-"===o("type",(s.splomStash||{}).type)&&(!function(i,a){if("-"!==i.type)return;var o,s=i._id,l=s.charAt(0);-1!==s.indexOf("scene")&&(s=l);var c=function(e,t,r){for(var i=0;i<e.length;i++){var a=e[i];if("splom"===a.type&&a._length>0&&(a["_"+r+"axes"]||{})[t])return a;if((a[r+"axis"]||r)===t){if(n(a,r))return a;if((a[r]||[]).length||a[r+"0"])return a}}}(a,s,l);if(!c)return;if("histogram"===c.type&&l==={v:"y",h:"x"}[c.orientation||"v"])return void(i.type="linear");var u=l+"calendar",d=c[u],h={noMultiCategory:!e(c,"cartesian")||e(c,"noMultiCategory")};"box"===c.type&&c._hasPreCompStats&&l==={h:"x",v:"y"}[c.orientation||"v"]&&(h.noMultiCategory=!0);if(h.autotypenumbers=i.autotypenumbers,n(c,l)){var g=r(c),p=[];for(o=0;o<a.length;o++){var f=a[o];e(f,"box-violin")&&(f[l+"axis"]||l)===s&&(void 0!==f[g]?p.push(f[g][0]):void 0!==f.name?p.push(f.name):p.push("text"),f[u]!==d&&(d=void 0))}i.type=t(p,d,h)}else if("splom"===c.type){var m=c.dimensions[c._axesDim[s]];m.visible&&(i.type=t(m.values,d,h))}else i.type=t(c[l]||[c[l+"0"]],d,h)}(a,s.data),"-"===a.type?a.type="linear":i.type=a.type)},type_defaults}function findCategories(e,t){var r,n,i,a=t.dataAttr||e._id.charAt(0),o={};if(t.axData)r=t.axData;else for(r=[],n=0;n<t.data.length;n++){var s=t.data[n];s[a+"axis"]===e._id&&r.push(s)}for(n=0;n<r.length;n++){var l=r[n][a];for(i=0;i<l.length;i++){var c=l[i];null!=c&&(o[c]=1)}}return Object.keys(o)}var category_order_defaults=function(e,t,r,n){if("category"===t.type){var i,a=e.categoryarray,o=Array.isArray(a)&&a.length>0;o&&(i="array");var s,l=r("categoryorder",i);"array"===l&&(s=r("categoryarray")),o||"array"!==l||(l=t.categoryorder="trace"),"trace"===l?t._initialCategories=[]:"array"===l?t._initialCategories=s.slice():(s=findCategories(t,n).sort(),"category ascending"===l?t._initialCategories=s:"category descending"===l&&(t._initialCategories=s.reverse()))}},colorMix=tinycolorExports.mix,colorAttrs$2=attributes$L,Lib$I=libExports,line_grid_defaults=function(e,t,r,n){var i=(n=n||{}).dfltColor;function a(r,i){return Lib$I.coerce2(e,t,n.attributes,r,i)}var o=a("linecolor",i),s=a("linewidth");r("showline",n.showLine||!!o||!!s)||(delete t.linecolor,delete t.linewidth);var l=a("gridcolor",colorMix(i,n.bgColor,n.blend||colorAttrs$2.lightFraction).toRgbString()),c=a("gridwidth"),u=a("griddash");if(r("showgrid",n.showGrid||!!l||!!c||!!u)||(delete t.gridcolor,delete t.gridwidth,delete t.griddash),n.hasMinor){var d=a("minor.gridcolor",colorMix(t.gridcolor,n.bgColor,67).toRgbString()),h=a("minor.gridwidth",t.gridwidth||1),g=a("minor.griddash",t.griddash||"solid");r("minor.showgrid",!!d||!!h||!!g)||(delete t.minor.gridcolor,delete t.minor.gridwidth,delete t.minor.griddash)}if(!n.noZeroLine){var p=a("zerolinecolor",i),f=a("zerolinewidth");r("zeroline",n.showGrid||!!p||!!f)||(delete t.zerolinecolor,delete t.zerolinewidth)}},isNumeric$8=fastIsnumeric,Registry$j=registry,Lib$H=libExports,Template$2=plot_template,handleArrayContainerDefaults$7=array_container_defaults,layoutAttributes$1=layout_attributes$3,handleTickValueDefaults=tick_value_defaults,handleTickMarkDefaults=tick_mark_defaults,handleTickLabelDefaults=tick_label_defaults,handlePrefixSuffixDefaults=prefix_suffix_defaults,handleCategoryOrderDefaults=category_order_defaults,handleLineGridDefaults=line_grid_defaults,setConvert=set_convert,DAY_OF_WEEK=constants$K.WEEKDAY_PATTERN,HOUR=constants$K.HOUR_PATTERN,axis_defaults$1=function(e,t,r,n,i){var a,o=n.letter,s=n.font||{},l=n.splomStash||{},c=r("visible",!n.visibleDflt),u=t._template||{},d=t.type||u.type||"-";"date"===d&&(Registry$j.getComponentMethod("calendars","handleDefaults")(e,t,"calendar",n.calendar),n.noTicklabelmode||(a=r("ticklabelmode")));var h="";n.noTicklabelposition&&"multicategory"!==d||(h=Lib$H.coerce(e,t,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===a?["outside","inside"]:"x"===o?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),n.noTicklabeloverflow||r("ticklabeloverflow",-1!==h.indexOf("inside")?"hide past domain":"category"===d||"multicategory"===d?"allow":"hide past div"),setConvert(t,i);var g=!t.isValidRange(e.range);g&&n.reverseDflt&&(g="reversed"),!r("autorange",g)||"linear"!==d&&"-"!==d||r("rangemode"),r("range"),t.cleanRange(),handleCategoryOrderDefaults(e,t,r,n),"category"===d||n.noHover||r("hoverformat");var p=r("color"),f=p!==layoutAttributes$1.color.dflt?p:s.color,m=l.label||i._dfltTitle[o];if(handlePrefixSuffixDefaults(e,t,r,d,n),!c)return t;r("title.text",m),Lib$H.coerceFont(r,"title.font",{family:s.family,size:Lib$H.bigFont(s.size),color:f}),handleTickValueDefaults(e,t,r,d);var y=n.hasMinor;if(y&&(Template$2.newContainer(t,"minor"),handleTickValueDefaults(e,t,r,d,{isMinor:!0})),handleTickLabelDefaults(e,t,r,d,n),handleTickMarkDefaults(e,t,r,n),y){var b=n.isMinor;n.isMinor=!0,handleTickMarkDefaults(e,t,r,n),n.isMinor=b}handleLineGridDefaults(e,t,r,{dfltColor:p,bgColor:n.bgColor,showGrid:n.showGrid,hasMinor:y,attributes:layoutAttributes$1}),!y||t.minor.ticks||t.minor.showgrid||delete t.minor,(t.showline||t.ticks)&&r("mirror");var v,x="multicategory"===d;n.noTickson||"category"!==d&&!x||!t.ticks&&!t.showgrid||(x&&(v="boundaries"),"boundaries"===r("tickson",v)&&delete t.ticklabelposition);x&&(r("showdividers")&&(r("dividercolor"),r("dividerwidth")));if("date"===d)if(handleArrayContainerDefaults$7(e,t,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:rangebreaksDefaults}),t.rangebreaks.length){for(var B=0;B<t.rangebreaks.length;B++)if(t.rangebreaks[B].pattern===DAY_OF_WEEK){t._hasDayOfWeekBreaks=!0;break}if(setConvert(t,i),i._has("scattergl")||i._has("splom"))for(var I=0;I<n.data.length;I++){var F=n.data[I];"scattergl"!==F.type&&"splom"!==F.type||(F.visible=!1,Lib$H.warn(F.type+" traces do not work on axes with rangebreaks. Setting trace "+F.index+" to `visible: false`."))}}else delete t.rangebreaks;return t};function rangebreaksDefaults(e,t,r){function n(r,n){return Lib$H.coerce(e,t,layoutAttributes$1.rangebreaks,r,n)}if(n("enabled")){var i=n("bounds");if(i&&i.length>=2){var a,o,s="";if(2===i.length)for(a=0;a<2;a++)if(o=indexOfDay(i[a])){s=DAY_OF_WEEK;break}var l=n("pattern",s);if(l===DAY_OF_WEEK)for(a=0;a<2;a++)(o=indexOfDay(i[a]))&&(t.bounds[a]=i[a]=o-1);if(l)for(a=0;a<2;a++)switch(o=i[a],l){case DAY_OF_WEEK:if(!isNumeric$8(o))return void(t.enabled=!1);if((o=+o)!==Math.floor(o)||o<0||o>=7)return void(t.enabled=!1);t.bounds[a]=i[a]=o;break;case HOUR:if(!isNumeric$8(o))return void(t.enabled=!1);if((o=+o)<0||o>24)return void(t.enabled=!1);t.bounds[a]=i[a]=o}if(!1===r.autorange){var c=r.range;if(c[0]<c[1]){if(i[0]<c[0]&&i[1]>c[1])return void(t.enabled=!1)}else if(i[0]>c[0]&&i[1]<c[1])return void(t.enabled=!1)}}else{var u=n("values");if(!u||!u.length)return void(t.enabled=!1);n("dvalue")}}}var dayStrToNum={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function indexOfDay(e){if("string"==typeof e)return dayStrToNum[e.substr(0,3).toLowerCase()]}var layout_defaults$1,hasRequiredLayout_defaults,transition_axes,hasRequiredTransition_axes,isNumeric$7=fastIsnumeric,Lib$G=libExports,position_defaults=function(e,t,r,n){var i,a,o,s,l,c,u=n.counterAxes||[],d=n.overlayableAxes||[],h=n.letter,g=n.grid,p=n.overlayingDomain;g&&(a=g._domains[h][g._axisMap[t._id]],i=g._anchors[t._id],a&&(o=g[h+"side"].split(" ")[0],s=g.domain[h]["right"===o||"top"===o?1:0])),a=a||[0,1],i=i||(isNumeric$7(e.position)?"free":u[0]||"free"),o=o||("x"===h?"bottom":"left"),s=s||0,l=0,c=!1;var f=Lib$G.coerce(e,t,{anchor:{valType:"enumerated",values:["free"].concat(u),dflt:i}},"anchor"),m=Lib$G.coerce(e,t,{side:{valType:"enumerated",values:"x"===h?["bottom","top"]:["left","right"],dflt:o}},"side");if("free"===f){if("y"===h)r("autoshift")&&(s="left"===m?p[0]:p[1],c=!t.automargin||t.automargin,l="left"===m?-3:3),r("shift",l);r("position",s)}r("automargin",c);var y=!1;if(d.length&&(y=Lib$G.coerce(e,t,{overlaying:{valType:"enumerated",values:[!1].concat(d),dflt:!1}},"overlaying")),!y){var b=r("domain",a);b[0]>b[1]-1/4096&&(t.domain=a),Lib$G.noneOrAll(e.domain,t.domain,a),"sync"===t.tickmode&&(t.tickmode="auto")}return r("layer"),t};function requireLayout_defaults(){if(hasRequiredLayout_defaults)return layout_defaults$1;hasRequiredLayout_defaults=1;var e=libExports,t=colorExports,r=helpers$y.isUnifiedHover,n=hovermode_defaults,i=plot_template,a=layout_attributes$5,o=layout_attributes$3,s=requireType_defaults(),l=axis_defaults$1,c=constraints,u=position_defaults,d=axis_ids,h=d.id2name,g=d.name2id,p=constants$K.AX_ID_PATTERN,f=registry,m=f.traceIs,y=f.getComponentMethod;function b(e,t,r){Array.isArray(e[t])?e[t].push(r):e[t]=[r]}return layout_defaults$1=function(f,v,x){var B,I,F=v.autotypenumbers,A={},C={},w={},Q={},U={},S={},E={},L={},_={},T={};for(B=0;B<x.length;B++){var R=x[B];if(m(R,"cartesian")||m(R,"gl2d")){var $,k;if(R.xaxis)$=h(R.xaxis),b(A,$,R);else if(R.xaxes)for(I=0;I<R.xaxes.length;I++)b(A,h(R.xaxes[I]),R);if(R.yaxis)k=h(R.yaxis),b(A,k,R);else if(R.yaxes)for(I=0;I<R.yaxes.length;I++)b(A,h(R.yaxes[I]),R);if("funnel"===R.type?"h"===R.orientation?($&&(C[$]=!0),k&&(E[k]=!0)):k&&(w[k]=!0):"image"===R.type?(k&&(L[k]=!0),$&&(L[$]=!0)):(k&&(U[k]=!0,S[k]=!0),m(R,"carpet")&&("carpet"!==R.type||R._cheater)||$&&(Q[$]=!0)),"carpet"===R.type&&R._cheater&&$&&(C[$]=!0),m(R,"2dMap")&&(_[$]=!0,_[k]=!0),m(R,"oriented"))T["h"===R.orientation?k:$]=!0}}var N=v._subplots,G=N.xaxis,M=N.yaxis,D=e.simpleMap(G,h),V=e.simpleMap(M,h),H=D.concat(V),X=t.background;G.length&&M.length&&(X=e.coerce(f,v,a,"plot_bgcolor"));var O,Z,W,Y,P,z=t.combine(X,v.paper_bgcolor);function J(){var e=A[O]||[];P._traceIndices=e.map((function(e){return e._expandedIndex})),P._annIndices=[],P._shapeIndices=[],P._selectionIndices=[],P._imgIndices=[],P._subplotsWith=[],P._counterAxes=[],P._name=P._attr=O,P._id=Z}function j(t,r){return e.coerce(Y,P,o,t,r)}function K(t,r){return e.coerce2(Y,P,o,t,r)}function q(e){return"x"===e?M:G}function ee(e,t){for(var r="x"===e?D:V,n=[],i=0;i<r.length;i++){var a=r[i];a===t||(f[a]||{}).overlaying||n.push(g(a))}return n}var te={x:q("x"),y:q("y")},re=te.x.concat(te.y),ne={},ie=[];function ae(){var e=Y.matches;p.test(e)&&-1===re.indexOf(e)&&(ne[e]=Y.type,ie=Object.keys(ne))}var oe=n(f,v),se=r(oe);for(B=0;B<H.length;B++){O=H[B],Z=g(O),W=O.charAt(0),e.isPlainObject(f[O])||(f[O]={}),Y=f[O],P=i.newContainer(v,O,W+"axis"),J();var le="x"===W&&!Q[O]&&C[O]||"y"===W&&!U[O]&&w[O],ce="y"===W&&(!S[O]&&E[O]||L[O]),ue={hasMinor:!0,letter:W,font:v.font,outerTicks:_[O],showGrid:!T[O],data:A[O]||[],bgColor:z,calendar:v.calendar,automargin:!0,visibleDflt:le,reverseDflt:ce,autotypenumbersDflt:F,splomStash:((v._splomAxes||{})[W]||{})[Z]};j("uirevision",v.uirevision),s(Y,P,j,ue),l(Y,P,j,ue,v);var de=se&&W===oe.charAt(0),he=K("spikecolor",se?P.color:void 0),ge=K("spikethickness",se?1.5:void 0),pe=K("spikedash",se?"dot":void 0),fe=K("spikemode",se?"across":void 0),me=K("spikesnap");j("showspikes",!!(de||he||ge||pe||fe||me))||(delete P.spikecolor,delete P.spikethickness,delete P.spikedash,delete P.spikemode,delete P.spikesnap);var ye=h(Y.overlaying),be=[0,1];if(void 0!==v[ye]){var ve=h(v[ye].anchor);void 0!==v[ve]&&(be=v[ve].domain)}u(Y,P,j,{letter:W,counterAxes:te[W],overlayableAxes:ee(W,O),grid:v.grid,overlayingDomain:be}),j("title.standoff"),ae(),P._input=Y}for(B=0;B<ie.length;){Z=ie[B++],W=(O=h(Z)).charAt(0),e.isPlainObject(f[O])||(f[O]={}),Y=f[O],P=i.newContainer(v,O,W+"axis"),J();var xe={letter:W,font:v.font,outerTicks:_[O],showGrid:!T[O],data:[],bgColor:z,calendar:v.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:F,splomStash:((v._splomAxes||{})[W]||{})[Z]};j("uirevision",v.uirevision),P.type=ne[Z]||"linear",l(Y,P,j,xe,v),u(Y,P,j,{letter:W,counterAxes:te[W],overlayableAxes:ee(W,O),grid:v.grid}),j("fixedrange"),ae(),P._input=Y}var Be=y("rangeslider","handleDefaults"),Ie=y("rangeselector","handleDefaults");for(B=0;B<D.length;B++)O=D[B],Y=f[O],P=v[O],Be(f,v,O),"date"===P.type&&Ie(Y,P,v,V,P.calendar),j("fixedrange");for(B=0;B<V.length;B++){O=V[B],Y=f[O],P=v[O];var Fe=v[h(P.anchor)];j("fixedrange",y("rangeslider","isVisible")(Fe))}c.handleDefaults(f,v,{axIds:re.concat(ie).sort(d.idSort),axHasImage:L})},layout_defaults$1}function requireTransition_axes(){if(hasRequiredTransition_axes)return transition_axes;hasRequiredTransition_axes=1;var e=d3Exports,t=registry,r=libExports,n=drawingExports,i=axesExports;return transition_axes=function(a,o,s,l){var c=a._fullLayout;if(0!==o.length){var u,d,h,g;l&&(u=l());var p=e.ease(s.easing);return a._transitionData._interruptCallbacks.push((function(){return window.cancelAnimationFrame(g),g=null,function(){for(var e={},r=0;r<o.length;r++){var n=o[r],i=n.plotinfo.xaxis,s=n.plotinfo.yaxis;n.xr0&&(e[i._name+".range"]=n.xr0.slice()),n.yr0&&(e[s._name+".range"]=n.yr0.slice())}return t.call("relayout",a,e).then((function(){for(var e=0;e<o.length;e++)f(o[e].plotinfo)}))}()})),d=Date.now(),g=window.requestAnimationFrame((function e(){h=Date.now();for(var r=Math.min(1,(h-d)/s.duration),n=p(r),i=0;i<o.length;i++)m(o[i],n);h-d>s.duration?(!function(){for(var e={},r=0;r<o.length;r++){var n=o[r],i=n.plotinfo.xaxis,s=n.plotinfo.yaxis;n.xr1&&(e[i._name+".range"]=n.xr1.slice()),n.yr1&&(e[s._name+".range"]=n.yr1.slice())}u&&u(),t.call("relayout",a,e).then((function(){for(var e=0;e<o.length;e++)f(o[e].plotinfo)}))}(),g=window.cancelAnimationFrame(e)):g=window.requestAnimationFrame(e)})),Promise.resolve()}function f(e){var t=e.xaxis,r=e.yaxis;c._defs.select("#"+e.clipId+"> rect").call(n.setTranslate,0,0).call(n.setScale,1,1),e.plot.call(n.setTranslate,t._offset,r._offset).call(n.setScale,1,1);var i=e.plot.selectAll(".scatterlayer .trace");i.selectAll(".point").call(n.setPointGroupScale,1,1),i.selectAll(".textpoint").call(n.setTextPointsScale,1,1),i.call(n.hideOutsideRangePoints,e)}function m(e,t){var o=e.plotinfo,s=o.xaxis,l=o.yaxis,c=s._length,u=l._length,d=!!e.xr1,h=!!e.yr1,g=[];if(d){var p=r.simpleMap(e.xr0,s.r2l),f=r.simpleMap(e.xr1,s.r2l),m=p[1]-p[0],y=f[1]-f[0];g[0]=(p[0]*(1-t)+t*f[0]-p[0])/(p[1]-p[0])*c,g[2]=c*(1-t+t*y/m),s.range[0]=s.l2r(p[0]*(1-t)+t*f[0]),s.range[1]=s.l2r(p[1]*(1-t)+t*f[1])}else g[0]=0,g[2]=c;if(h){var b=r.simpleMap(e.yr0,l.r2l),v=r.simpleMap(e.yr1,l.r2l),x=b[1]-b[0],B=v[1]-v[0];g[1]=(b[1]*(1-t)+t*v[1]-b[1])/(b[0]-b[1])*u,g[3]=u*(1-t+t*B/x),l.range[0]=s.l2r(b[0]*(1-t)+t*v[0]),l.range[1]=l.l2r(b[1]*(1-t)+t*v[1])}else g[1]=0,g[3]=u;i.drawOne(a,s,{skipTitle:!0}),i.drawOne(a,l,{skipTitle:!0}),i.redrawComponents(a,[s._id,l._id]);var I=d?c/g[2]:1,F=h?u/g[3]:1,A=d?g[0]:0,C=h?g[1]:0,w=d?g[0]/g[2]*c:0,Q=h?g[1]/g[3]*u:0,U=s._offset-w,S=l._offset-Q;o.clipRect.call(n.setTranslate,A,C).call(n.setScale,1/I,1/F),o.plot.call(n.setTranslate,U,S).call(n.setScale,I,F),n.setPointGroupScale(o.zoomScalePts,1/I,1/F),n.setTextPointsScale(o.zoomScaleTxt,1/I,1/F)}i.redrawComponents(a)},transition_axes}var d3$b=d3Exports,Registry$i=registry,Lib$F=libExports,Plots$5=plotsExports,Drawing$9=drawingExports,getModuleCalcData=get_data.getModuleCalcData,axisIds$3=axis_ids,constants$l=constants$K,xmlnsNamespaces$2=xmlns_namespaces,ensureSingle=Lib$F.ensureSingle;function ensureSingleAndAddDatum(e,t,r){return Lib$F.ensureSingle(e,t,r,(function(e){e.datum(r)}))}function plotOne(e,t,r,n,i){for(var a,o,s,l=constants$l.traceLayerClasses,c=e._fullLayout,u=c._modules,d=[],h=[],g=0;g<u.length;g++){var p=(a=u[g]).name,f=Registry$i.modules[p].categories;if(f.svg){var m=a.layerName||p+"layer",y=a.plot;s=(o=getModuleCalcData(r,y))[0],r=o[1],s.length&&d.push({i:l.indexOf(m),className:m,plotMethod:y,cdModule:s}),f.zoomScale&&h.push("."+m)}}d.sort((function(e,t){return e.i-t.i}));var b=t.plot.selectAll("g.mlayer").data(d,(function(e){return e.className}));if(b.enter().append("g").attr("class",(function(e){return e.className})).classed("mlayer",!0).classed("rangeplot",t.isRangePlot),b.exit().remove(),b.order(),b.each((function(r){var a=d3$b.select(this),o=r.className;r.plotMethod(e,t,r.cdModule,a,n,i),-1===constants$l.clipOnAxisFalseQuery.indexOf("."+o)&&Drawing$9.setClipUrl(a,t.layerClipId,e)})),c._has("scattergl")&&(a=Registry$i.getModule("scattergl"),s=getModuleCalcData(r,a)[0],a.plot(e,t,s)),!e._context.staticPlot&&(t._hasClipOnAxisFalse&&(t.clipOnAxisFalseTraces=t.plot.selectAll(constants$l.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),h.length)){var v=t.plot.selectAll(h.join(",")).selectAll(".trace");t.zoomScalePts=v.selectAll("path.point"),t.zoomScaleTxt=v.selectAll(".textpoint")}}function makeSubplotData(e){var t,r,n,i,a,o,s=e._fullLayout,l=s._subplots.cartesian,c=l.length,u=[],d=[];for(t=0;t<c;t++){n=l[t],a=(i=s._plots[n]).xaxis,o=i.yaxis;var h=a._mainAxis,g=o._mainAxis,p=h._id+g._id,f=s._plots[p];i.overlays=[],p!==n&&f?(i.mainplot=p,i.mainplotinfo=f,d.push(n)):(i.mainplot=void 0,i.mainplotinfo=void 0,u.push(n))}for(t=0;t<d.length;t++)n=d[t],(i=s._plots[n]).mainplotinfo.overlays.push(i);var m=u.concat(d),y=new Array(c);for(t=0;t<c;t++){n=m[t],a=(i=s._plots[n]).xaxis,o=i.yaxis;var b=[n,a.layer,o.layer,a.overlaying||"",o.overlaying||""];for(r=0;r<i.overlays.length;r++)b.push(i.overlays[r].id);y[t]=b}return y}function makeSubplotLayer(e,t){var r=t.plotgroup,n=t.id,i=constants$l.layerValue2layerClass[t.xaxis.layer],a=constants$l.layerValue2layerClass[t.yaxis.layer],o=e._fullLayout._hasOnlyLargeSploms;if(t.mainplot){var s=t.mainplotinfo,l=s.plotgroup,c=n+"-x",u=n+"-y";t.minorGridlayer=s.minorGridlayer,t.gridlayer=s.gridlayer,t.zerolinelayer=s.zerolinelayer,ensureSingle(s.overlinesBelow,"path",c),ensureSingle(s.overlinesBelow,"path",u),ensureSingle(s.overaxesBelow,"g",c),ensureSingle(s.overaxesBelow,"g",u),t.plot=ensureSingle(s.overplot,"g",n),ensureSingle(s.overlinesAbove,"path",c),ensureSingle(s.overlinesAbove,"path",u),ensureSingle(s.overaxesAbove,"g",c),ensureSingle(s.overaxesAbove,"g",u),t.xlines=l.select(".overlines-"+i).select("."+c),t.ylines=l.select(".overlines-"+a).select("."+u),t.xaxislayer=l.select(".overaxes-"+i).select("."+c),t.yaxislayer=l.select(".overaxes-"+a).select("."+u)}else if(o)t.xlines=ensureSingle(r,"path","xlines-above"),t.ylines=ensureSingle(r,"path","ylines-above"),t.xaxislayer=ensureSingle(r,"g","xaxislayer-above"),t.yaxislayer=ensureSingle(r,"g","yaxislayer-above");else{var d=ensureSingle(r,"g","layer-subplot");t.shapelayer=ensureSingle(d,"g","shapelayer"),t.imagelayer=ensureSingle(d,"g","imagelayer"),t.minorGridlayer=ensureSingle(r,"g","minor-gridlayer"),t.gridlayer=ensureSingle(r,"g","gridlayer"),t.zerolinelayer=ensureSingle(r,"g","zerolinelayer"),ensureSingle(r,"path","xlines-below"),ensureSingle(r,"path","ylines-below"),t.overlinesBelow=ensureSingle(r,"g","overlines-below"),ensureSingle(r,"g","xaxislayer-below"),ensureSingle(r,"g","yaxislayer-below"),t.overaxesBelow=ensureSingle(r,"g","overaxes-below"),t.plot=ensureSingle(r,"g","plot"),t.overplot=ensureSingle(r,"g","overplot"),t.xlines=ensureSingle(r,"path","xlines-above"),t.ylines=ensureSingle(r,"path","ylines-above"),t.overlinesAbove=ensureSingle(r,"g","overlines-above"),ensureSingle(r,"g","xaxislayer-above"),ensureSingle(r,"g","yaxislayer-above"),t.overaxesAbove=ensureSingle(r,"g","overaxes-above"),t.xlines=r.select(".xlines-"+i),t.ylines=r.select(".ylines-"+a),t.xaxislayer=r.select(".xaxislayer-"+i),t.yaxislayer=r.select(".yaxislayer-"+a)}o||(ensureSingleAndAddDatum(t.minorGridlayer,"g",t.xaxis._id),ensureSingleAndAddDatum(t.minorGridlayer,"g",t.yaxis._id),t.minorGridlayer.selectAll("g").map((function(e){return e[0]})).sort(axisIds$3.idSort),ensureSingleAndAddDatum(t.gridlayer,"g",t.xaxis._id),ensureSingleAndAddDatum(t.gridlayer,"g",t.yaxis._id),t.gridlayer.selectAll("g").map((function(e){return e[0]})).sort(axisIds$3.idSort)),t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0)}function purgeSubplotLayers(e,t){if(e){var r={};for(var n in e.each((function(e){var n=e[0];d3$b.select(this).remove(),removeSubplotExtras(n,t),r[n]=!0})),t._plots)for(var i=t._plots[n].overlays||[],a=0;a<i.length;a++){var o=i[a];r[o.id]&&o.plot.selectAll(".trace").remove()}}}function removeSubplotExtras(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}cartesian.name="cartesian",cartesian.attr=["xaxis","yaxis"],cartesian.idRoot=["x","y"],cartesian.idRegex=constants$l.idRegex,cartesian.attrRegex=constants$l.attrRegex,cartesian.attributes=requireAttributes$1(),cartesian.layoutAttributes=layout_attributes$3,cartesian.supplyLayoutDefaults=requireLayout_defaults(),cartesian.transitionAxes=requireTransition_axes(),cartesian.finalizeSubplots=function(e,t){var r,n,i,a=t._subplots,o=a.xaxis,s=a.yaxis,l=a.cartesian,c=l.concat(a.gl2d||[]),u={},d={};for(r=0;r<c.length;r++){var h=c[r].split("y");u[h[0]]=1,d["y"+h[1]]=1}for(r=0;r<o.length;r++)u[n=o[r]]||(i=(e[axisIds$3.id2name(n)]||{}).anchor,constants$l.idRegex.y.test(i)||(i="y"),l.push(n+i),c.push(n+i),d[i]||(d[i]=1,Lib$F.pushUnique(s,i)));for(r=0;r<s.length;r++)d[i=s[r]]||(n=(e[axisIds$3.id2name(i)]||{}).anchor,constants$l.idRegex.x.test(n)||(n="x"),l.push(n+i),c.push(n+i),u[n]||(u[n]=1,Lib$F.pushUnique(o,n)));if(!c.length){for(var g in n="",i="",e){if(constants$l.attrRegex.test(g))"x"===g.charAt(0)?(!n||+g.substr(5)<+n.substr(5))&&(n=g):(!i||+g.substr(5)<+i.substr(5))&&(i=g)}n=n?axisIds$3.name2id(n):"x",i=i?axisIds$3.name2id(i):"y",o.push(n),s.push(i),l.push(n+i)}},cartesian.plot=function(e,t,r,n){var i,a=e._fullLayout,o=a._subplots.cartesian,s=e.calcdata;if(!Array.isArray(t))for(t=[],i=0;i<s.length;i++)t.push(i);for(i=0;i<o.length;i++){for(var l,c=o[i],u=a._plots[c],d=[],h=0;h<s.length;h++){var g=s[h],p=g[0].trace;p.xaxis+p.yaxis===c&&((-1!==t.indexOf(p.index)||p.carpet)&&(l&&l[0].trace.xaxis+l[0].trace.yaxis===c&&-1!==["tonextx","tonexty","tonext"].indexOf(p.fill)&&-1===d.indexOf(l)&&d.push(l),d.push(g)),l=g)}plotOne(e,u,d,r,n)}},cartesian.clean=function(e,t,r,n){var i,a,o,s=n._plots||{},l=t._plots||{},c=n._subplots||{};if(n._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms)for(o in s)(i=s[o]).plotgroup&&i.plotgroup.remove();var u=n._has&&n._has("gl"),d=t._has&&t._has("gl");if(u&&!d)for(o in s)(i=s[o])._scene&&i._scene.destroy();if(c.xaxis&&c.yaxis){var h=axisIds$3.listIds({_fullLayout:n});for(a=0;a<h.length;a++){var g=h[a];t[axisIds$3.id2name(g)]||n._infolayer.selectAll(".g-"+g+"title").remove()}}var p=n._has&&n._has("cartesian"),f=t._has&&t._has("cartesian");if(p&&!f)purgeSubplotLayers(n._cartesianlayer.selectAll(".subplot"),n),n._defs.selectAll(".axesclip").remove(),delete n._axisConstraintGroups,delete n._axisMatchGroups;else if(c.cartesian)for(a=0;a<c.cartesian.length;a++){var m=c.cartesian[a];if(!l[m]){var y="."+m+",."+m+"-x,."+m+"-y";n._cartesianlayer.selectAll(y).remove(),removeSubplotExtras(m,n)}}},cartesian.drawFramework=function(e){var t=e._fullLayout,r=makeSubplotData(e),n=t._cartesianlayer.selectAll(".subplot").data(r,String);n.enter().append("g").attr("class",(function(e){return"subplot "+e[0]})),n.order(),n.exit().call(purgeSubplotLayers,t),n.each((function(r){var n=r[0],i=t._plots[n];i.plotgroup=d3$b.select(this),makeSubplotLayer(e,i),i.draglayer=ensureSingle(t._draggers,"g",n)}))},cartesian.rangePlot=function(e,t,r){makeSubplotLayer(e,t),plotOne(e,t,r),Plots$5.style(e)},cartesian.toSVG=function(e){var t=e._fullLayout._glimages,r=d3$b.select(e).selectAll(".svg-container"),n=r.filter((function(e,t){return t===r.size()-1})).selectAll(".gl-canvas-context, .gl-canvas-focus");n.each((function(){var e=this,r=e.toDataURL("image/png");t.append("svg:image").attr({xmlns:xmlnsNamespaces$2.svg,"xlink:href":r,preserveAspectRatio:"none",x:0,y:0,width:e.style.width,height:e.style.height})}))},cartesian.updateFx=graph_interact.updateFx;var subtypes=subtypes$3,scatter={hasLines:subtypes.hasLines,hasMarkers:subtypes.hasMarkers,hasText:subtypes.hasText,isBubble:subtypes.isBubble,attributes:attributes$y,layoutAttributes:layout_attributes$4,supplyDefaults:defaults$f,crossTraceDefaults:cross_trace_defaults$1,supplyLayoutDefaults:layout_defaults$2,calc:calc_1$2.calc,crossTraceCalc:cross_trace_calc,arraysToCalcdata:arrays_to_calcdata$1,plot:plot$2,colorbar:marker_colorbar,formatLabels:format_labels,style:style_1$1.style,styleOnSelect:style_1$1.styleOnSelect,hoverPoints:hover$2,selectPoints:select$1,animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:cartesian,categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{description:["The scatter trace type encompasses line charts, scatter charts, text charts, and bubble charts.","The data visualized as scatter point or lines is set in `x` and `y`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}},legend={moduleType:"component",name:"legend",layoutAttributes:attributes$E,supplyLayoutDefaults:defaults$k,draw:draw$b,style:style$5},d3$a=d3Exports,Color$g=colorExports,ARROWPATHS=arrow_paths,Lib$E=libExports,strScale=Lib$E.strScale,strRotate=Lib$E.strRotate,strTranslate$4=Lib$E.strTranslate,draw_arrow_head=function(e,t,r){var n,i,a,o,s=e.node(),l=ARROWPATHS[r.arrowhead||0],c=ARROWPATHS[r.startarrowhead||0],u=(r.arrowwidth||1)*(r.arrowsize||1),d=(r.arrowwidth||1)*(r.startarrowsize||1),h=t.indexOf("start")>=0,g=t.indexOf("end")>=0,p=l.backoff*u+r.standoff,f=c.backoff*d+r.startstandoff;if("line"===s.nodeName){n={x:+e.attr("x1"),y:+e.attr("y1")},i={x:+e.attr("x2"),y:+e.attr("y2")};var m=n.x-i.x,y=n.y-i.y;if(o=(a=Math.atan2(y,m))+Math.PI,p&&f&&p+f>Math.sqrt(m*m+y*y))return void U();if(p){if(p*p>m*m+y*y)return void U();var b=p*Math.cos(a),v=p*Math.sin(a);i.x+=b,i.y+=v,e.attr({x2:i.x,y2:i.y})}if(f){if(f*f>m*m+y*y)return void U();var x=f*Math.cos(a),B=f*Math.sin(a);n.x-=x,n.y-=B,e.attr({x1:n.x,y1:n.y})}}else if("path"===s.nodeName){var I=s.getTotalLength(),F="";if(I<p+f)return void U();var A=s.getPointAtLength(0),C=s.getPointAtLength(.1);a=Math.atan2(A.y-C.y,A.x-C.x),n=s.getPointAtLength(Math.min(f,I)),F="0px,"+f+"px,";var w=s.getPointAtLength(I),Q=s.getPointAtLength(I-.1);o=Math.atan2(w.y-Q.y,w.x-Q.x),i=s.getPointAtLength(Math.max(0,I-p)),F+=I-(F?f+p:p)+"px,"+I+"px",e.style("stroke-dasharray",F)}function U(){e.style("stroke-dasharray","0px,100px")}function S(t,n,i,a){t.path&&(t.noRotate&&(i=0),d3$a.select(s.parentNode).append("path").attr({class:e.attr("class"),d:t.path,transform:strTranslate$4(n.x,n.y)+strRotate(180*i/Math.PI)+strScale(a)}).style({fill:Color$g.rgb(r.arrowcolor),"stroke-width":0}))}h&&S(c,n,a,d),g&&S(l,i,o,u)},d3$9=d3Exports,Registry$h=registry,Plots$4=plotsExports,Lib$D=libExports,strTranslate$3=Lib$D.strTranslate,Axes$d=axesExports,Color$f=colorExports,Drawing$8=drawingExports,Fx$2=fx,svgTextUtils$6=svg_text_utils,setCursor$1=setcursor,dragElement$1=dragelementExports,arrayEditor$3=plot_template.arrayEditor,drawArrowHead=draw_arrow_head,draw_1$1={draw:draw$8,drawOne:drawOne,drawRaw:drawRaw$1};function draw$8(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var r=0;r<t.annotations.length;r++)t.annotations[r].visible&&drawOne(e,r);return Plots$4.previousPromises(e)}function drawOne(e,t){var r=e._fullLayout.annotations[t]||{},n=Axes$d.getFromId(e,r.xref),i=Axes$d.getFromId(e,r.yref);n&&n.setScale(),i&&i.setScale(),drawRaw$1(e,r,t,!1,n,i)}function shiftPosition(e,t,r,n,i){var a=i[r],o=i[r+"ref"],s=-1!==r.indexOf("y"),l="domain"===Axes$d.getRefType(o),c=s?n.h:n.w;return e?l?a+(s?-t:t)/e._length:e.p2r(e.r2p(a)+t):a+(s?-t:t)/c}function drawRaw$1(e,t,r,n,i,a){var o,s,l=e._fullLayout,c=e._fullLayout._size,u=e._context.edits;n?(o="annotation-"+n,s=n+".annotations"):(o="annotation",s="annotations");var d=arrayEditor$3(e.layout,s,t),h=d.modifyBase,g=d.modifyItem,p=d.getUpdateObj;l._infolayer.selectAll("."+o+'[data-index="'+r+'"]').remove();var f="clip"+l._uid+"_ann"+r;if(t._input&&!1!==t.visible){var m={x:{},y:{}},y=+t.textangle||0,b=l._infolayer.append("g").classed(o,!0).attr("data-index",String(r)).style("opacity",t.opacity),v=b.append("g").classed("annotation-text-g",!0),x=u[t.showarrow?"annotationTail":"annotationPosition"],B=t.captureevents||u.annotationText||x,I=v.append("g").style("pointer-events",B?"all":null).call(setCursor$1,"pointer").on("click",(function(){e._dragging=!1,e.emit("plotly_clickannotation",_(d3$9.event))}));t.hovertext&&I.on("mouseover",(function(){var r=t.hoverlabel,n=r.font,i=this.getBoundingClientRect(),a=e.getBoundingClientRect();Fx$2.loneHover({x0:i.left-a.left,x1:i.right-a.left,y:(i.top+i.bottom)/2-a.top,text:t.hovertext,color:r.bgcolor,borderColor:r.bordercolor,fontFamily:n.family,fontSize:n.size,fontColor:n.color},{container:l._hoverlayer.node(),outerContainer:l._paper.node(),gd:e})})).on("mouseout",(function(){Fx$2.loneUnhover(l._hoverlayer.node())}));var F=t.borderwidth,A=t.borderpad,C=F+A,w=I.append("rect").attr("class","bg").style("stroke-width",F+"px").call(Color$f.stroke,t.bordercolor).call(Color$f.fill,t.bgcolor),Q=t.width||t.height,U=l._topclips.selectAll("#"+f).data(Q?[0]:[]);U.enter().append("clipPath").classed("annclip",!0).attr("id",f).append("rect"),U.exit().remove();var S=t.font,E=l._meta?Lib$D.templateString(t.text,l._meta):t.text,L=I.append("text").classed("annotation-text",!0).text(E);u.annotationText?L.call(svgTextUtils$6.makeEditable,{delegate:I,gd:e}).call(T).on("edit",(function(r){t.text=r,this.call(T),g("text",r),i&&i.autorange&&h(i._name+".autorange",!0),a&&a.autorange&&h(a._name+".autorange",!0),Registry$h.call("_guiRelayout",e,p())})):L.call(T)}else d3$9.selectAll("#"+f).remove();function _(e){var i={index:r,annotation:t._input,fullAnnotation:t,event:e};return n&&(i.subplotId=n),i}function T(r){return r.call(Drawing$8.font,S).attr({"text-anchor":{left:"start",right:"end"}[t.align]||"middle"}),svgTextUtils$6.convertToTspans(r,e,R),r}function R(){var r=L.selectAll("a");1===r.size()&&r.text()===L.text()&&I.insert("a",":first-child").attr({"xlink:xlink:href":r.attr("xlink:href"),"xlink:xlink:show":r.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(w.node());var o=I.select(".annotation-text-math-group"),s=!o.empty(),d=Drawing$8.bBox((s?o:L).node()),B=d.width,A=d.height,S=t.width||B,E=t.height||A,T=Math.round(S+2*C),R=Math.round(E+2*C);function $(e,t){return"auto"===t&&(t=e<1/3?"left":e>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t]}for(var k=!1,N=["x","y"],G=0;G<N.length;G++){var M,D,V,H,X,O=N[G],Z=t[O+"ref"]||O,W=t["a"+O+"ref"],Y={x:i,y:a}[O],P=(y+("x"===O?0:-90))*Math.PI/180,z=T*Math.cos(P),J=R*Math.sin(P),j=Math.abs(z)+Math.abs(J),K=t[O+"anchor"],q=t[O+"shift"]*("x"===O?1:-1),ee=m[O],te=Axes$d.getRefType(Z);if(Y&&"domain"!==te){var re=Y.r2fraction(t[O]);(re<0||re>1)&&(W===Z?((re=Y.r2fraction(t["a"+O]))<0||re>1)&&(k=!0):k=!0),M=Y._offset+Y.r2p(t[O]),H=.5}else{var ne="domain"===te;"x"===O?(V=t[O],M=ne?Y._offset+Y._length*V:M=c.l+c.w*V):(V=1-t[O],M=ne?Y._offset+Y._length*V:M=c.t+c.h*V),H=t.showarrow?.5:V}if(t.showarrow){ee.head=M;var ie=t["a"+O];if(X=z*$(.5,t.xanchor)-J*$(.5,t.yanchor),W===Z){var ae=Axes$d.getRefType(W);"domain"===ae?("y"===O&&(ie=1-ie),ee.tail=Y._offset+Y._length*ie):"paper"===ae?"y"===O?(ie=1-ie,ee.tail=c.t+c.h*ie):ee.tail=c.l+c.w*ie:ee.tail=Y._offset+Y.r2p(ie),D=X}else ee.tail=M+ie,D=X+ie;ee.text=ee.tail+X;var oe=l["x"===O?"width":"height"];if("paper"===Z&&(ee.head=Lib$D.constrain(ee.head,1,oe-1)),"pixel"===W){var se=-Math.max(ee.tail-3,ee.text),le=Math.min(ee.tail+3,ee.text)-oe;se>0?(ee.tail+=se,ee.text+=se):le>0&&(ee.tail-=le,ee.text-=le)}ee.tail+=q,ee.head+=q}else D=X=j*$(H,K),ee.text=M+X;ee.text+=q,X+=q,D+=q,t["_"+O+"padplus"]=j/2+D,t["_"+O+"padminus"]=j/2-D,t["_"+O+"size"]=j,t["_"+O+"shift"]=X}if(k)I.remove();else{var ce=0,ue=0;if("left"!==t.align&&(ce=(S-B)*("center"===t.align?.5:1)),"top"!==t.valign&&(ue=(E-A)*("middle"===t.valign?.5:1)),s)o.select("svg").attr({x:C+ce-1,y:C+ue}).call(Drawing$8.setClipUrl,Q?f:null,e);else{var de=C+ue-d.top,he=C+ce-d.left;L.call(svgTextUtils$6.positionText,he,de).call(Drawing$8.setClipUrl,Q?f:null,e)}U.select("rect").call(Drawing$8.setRect,C,C,S,E),w.call(Drawing$8.setRect,F/2,F/2,T-F,R-F),I.call(Drawing$8.setTranslate,Math.round(m.x.text-T/2),Math.round(m.y.text-R/2)),v.attr({transform:"rotate("+y+","+m.x.text+","+m.y.text+")"});var ge,pe=function(r,o){b.selectAll(".annotation-arrow-g").remove();var s=m.x.head,l=m.y.head,d=m.x.tail+r,f=m.y.tail+o,x=m.x.text+r,B=m.y.text+o,F=Lib$D.rotationXYMatrix(y,x,B),A=Lib$D.apply2DTransform(F),C=Lib$D.apply2DTransform2(F),Q=+w.attr("width"),U=+w.attr("height"),S=x-.5*Q,E=S+Q,L=B-.5*U,_=L+U,T=[[S,L,S,_],[S,_,E,_],[E,_,E,L],[E,L,S,L]].map(C);if(!T.reduce((function(e,t){return e^!!Lib$D.segmentsIntersect(s,l,s+1e6,l+1e6,t[0],t[1],t[2],t[3])}),!1)){T.forEach((function(e){var t=Lib$D.segmentsIntersect(d,f,s,l,e[0],e[1],e[2],e[3]);t&&(d=t.x,f=t.y)}));var R=t.arrowwidth,$=t.arrowcolor,k=t.arrowside,N=b.append("g").style({opacity:Color$f.opacity($)}).classed("annotation-arrow-g",!0),G=N.append("path").attr("d","M"+d+","+f+"L"+s+","+l).style("stroke-width",R+"px").call(Color$f.stroke,Color$f.rgb($));if(drawArrowHead(G,k,t),u.annotationPosition&&G.node().parentNode&&!n){var M=s,D=l;if(t.standoff){var V=Math.sqrt(Math.pow(s-d,2)+Math.pow(l-f,2));M+=t.standoff*(d-s)/V,D+=t.standoff*(f-l)/V}var H,X,O=N.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(d-M)+","+(f-D),transform:strTranslate$3(M,D)}).style("stroke-width",R+6+"px").call(Color$f.stroke,"rgba(0,0,0,0)").call(Color$f.fill,"rgba(0,0,0,0)");dragElement$1.init({element:O.node(),gd:e,prepFn:function(){var e=Drawing$8.getTranslate(I);H=e.x,X=e.y,i&&i.autorange&&h(i._name+".autorange",!0),a&&a.autorange&&h(a._name+".autorange",!0)},moveFn:function(e,r){var n=A(H,X),o=n[0]+e,s=n[1]+r;I.call(Drawing$8.setTranslate,o,s),g("x",shiftPosition(i,e,"x",c,t)),g("y",shiftPosition(a,r,"y",c,t)),t.axref===t.xref&&g("ax",shiftPosition(i,e,"ax",c,t)),t.ayref===t.yref&&g("ay",shiftPosition(a,r,"ay",c,t)),N.attr("transform",strTranslate$3(e,r)),v.attr({transform:"rotate("+y+","+o+","+s+")"})},doneFn:function(){Registry$h.call("_guiRelayout",e,p());var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}})}}};if(t.showarrow&&pe(0,0),x)dragElement$1.init({element:I.node(),gd:e,prepFn:function(){ge=v.attr("transform")},moveFn:function(e,r){var o="pointer";if(t.showarrow)t.axref===t.xref?g("ax",shiftPosition(i,e,"ax",c,t)):g("ax",t.ax+e),t.ayref===t.yref?g("ay",shiftPosition(a,r,"ay",c.w,t)):g("ay",t.ay+r),pe(e,r);else{if(n)return;var s,l;if(i)s=shiftPosition(i,e,"x",c,t);else{var u=t._xsize/c.w,d=t.x+(t._xshift-t.xshift)/c.w-u/2;s=dragElement$1.align(d+e/c.w,u,0,1,t.xanchor)}if(a)l=shiftPosition(a,r,"y",c,t);else{var h=t._ysize/c.h,p=t.y-(t._yshift+t.yshift)/c.h-h/2;l=dragElement$1.align(p-r/c.h,h,0,1,t.yanchor)}g("x",s),g("y",l),i&&a||(o=dragElement$1.getCursor(i?.5:s,a?.5:l,t.xanchor,t.yanchor))}v.attr({transform:strTranslate$3(e,r)+ge}),setCursor$1(I,o)},clickFn:function(r,n){t.captureevents&&e.emit("plotly_clickannotation",_(n))},doneFn:function(){setCursor$1(I),Registry$h.call("_guiRelayout",e,p());var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}})}}}var Lib$C=libExports,Registry$g=registry,arrayEditor$2=plot_template.arrayEditor,click={hasClickToShow:hasClickToShow,onClick:onClick};function hasClickToShow(e,t){var r=getToggleSets(e,t);return r.on.length>0||r.explicitOff.length>0}function onClick(e,t){var r,n,i=getToggleSets(e,t),a=i.on,o=i.off.concat(i.explicitOff),s={},l=e._fullLayout.annotations;if(a.length||o.length){for(r=0;r<a.length;r++)(n=arrayEditor$2(e.layout,"annotations",l[a[r]])).modifyItem("visible",!0),Lib$C.extendFlat(s,n.getUpdateObj());for(r=0;r<o.length;r++)(n=arrayEditor$2(e.layout,"annotations",l[o[r]])).modifyItem("visible",!1),Lib$C.extendFlat(s,n.getUpdateObj());return Registry$g.call("update",e,{},s)}}function getToggleSets(e,t){var r,n,i,a,o,s,l,c=e._fullLayout.annotations,u=[],d=[],h=[],g=(t||[]).length;for(r=0;r<c.length;r++)if(a=(i=c[r]).clicktoshow){for(n=0;n<g;n++)if(s=(o=t[n]).xaxis,l=o.yaxis,s._id===i.xref&&l._id===i.yref&&s.d2r(o.x)===clickData2r(i._xclick,s)&&l.d2r(o.y)===clickData2r(i._yclick,l)){(i.visible?"onout"===a?d:h:u).push(r);break}n===g&&i.visible&&"onout"===a&&d.push(r)}return{on:u,off:d,explicitOff:h}}function clickData2r(e,t){return"log"===t.type?t.l2r(e):t.d2r(e)}var Lib$B=libExports,Color$e=colorExports,common_defaults=function(e,t,r,n){n("opacity");var i=n("bgcolor"),a=n("bordercolor"),o=Color$e.opacity(a);n("borderpad");var s=n("borderwidth"),l=n("showarrow");if(n("text",l?" ":r._dfltTitle.annotation),n("textangle"),Lib$B.coerceFont(n,"font",r.font),n("width"),n("align"),n("height")&&n("valign"),l){var c,u,d=n("arrowside");-1!==d.indexOf("end")&&(c=n("arrowhead"),u=n("arrowsize")),-1!==d.indexOf("start")&&(n("startarrowhead",c),n("startarrowsize",u)),n("arrowcolor",o?t.bordercolor:Color$e.defaultLine),n("arrowwidth",2*(o&&s||1)),n("standoff"),n("startstandoff")}var h=n("hovertext"),g=r.hoverlabel||{};if(h){var p=n("hoverlabel.bgcolor",g.bgcolor||(Color$e.opacity(i)?Color$e.rgb(i):Color$e.defaultLine)),f=n("hoverlabel.bordercolor",g.bordercolor||Color$e.contrast(p));Lib$B.coerceFont(n,"hoverlabel.font",{family:g.font.family,size:g.font.size,color:g.font.color||f})}n("captureevents",!!h)},Lib$A=libExports,Axes$c=axesExports,handleArrayContainerDefaults$6=array_container_defaults,handleAnnotationCommonDefaults$1=common_defaults,attributes$s=attributes$z,defaults$e=function(e,t){handleArrayContainerDefaults$6(e,t,{name:"annotations",handleItemDefaults:handleAnnotationDefaults$1})};function handleAnnotationDefaults$1(e,t,r){function n(r,n){return Lib$A.coerce(e,t,attributes$s,r,n)}var i=n("visible"),a=n("clicktoshow");if(i||a){handleAnnotationCommonDefaults$1(e,t,r,n);for(var o=t.showarrow,s=["x","y"],l=[-10,-30],c={_fullLayout:r},u=0;u<2;u++){var d=s[u],h=Axes$c.coerceRef(e,t,c,d,"","paper");if("paper"!==h)Axes$c.getFromId(c,h)._annIndices.push(t._index);if(Axes$c.coercePosition(t,c,n,h,d,.5),o){var g="a"+d,p=Axes$c.coerceRef(e,t,c,g,"pixel",["pixel","paper"]);"pixel"!==p&&p!==h&&(p=t[g]="pixel");var f="pixel"===p?l[u]:.4;Axes$c.coercePosition(t,c,n,p,g,f)}n(d+"anchor"),n(d+"shift")}if(Lib$A.noneOrAll(e,t,["x","y"]),o&&Lib$A.noneOrAll(e,t,["ax","ay"]),a){var m=n("xclick"),y=n("yclick");t._xclick=void 0===m?t.x:Axes$c.cleanPosition(m,c,t.xref),t._yclick=void 0===y?t.y:Axes$c.cleanPosition(y,c,t.yref)}}}var Lib$z=libExports,Axes$b=axesExports,draw$7=draw_1$1.draw,calc_autorange$2=function(e){var t=e._fullLayout;if(Lib$z.filterVisible(t.annotations).length&&e._fullData.length)return Lib$z.syncOrAsync([draw$7,annAutorange],e)};function annAutorange(e){var t=e._fullLayout;Lib$z.filterVisible(t.annotations).forEach((function(t){var r=Axes$b.getFromId(e,t.xref),n=Axes$b.getFromId(e,t.yref),i=Axes$b.getRefType(t.xref),a=Axes$b.getRefType(t.yref);t._extremes={},"range"===i&&calcAxisExpansion(t,r),"range"===a&&calcAxisExpansion(t,n)}))}function calcAxisExpansion(e,t){var r,n=t._id,i=n.charAt(0),a=e[i],o=e["a"+i],s=e[i+"ref"],l=e["a"+i+"ref"],c=e["_"+i+"padplus"],u=e["_"+i+"padminus"],d={x:1,y:-1}[i]*e[i+"shift"],h=3*e.arrowsize*e.arrowwidth||0,g=h+d,p=h-d,f=3*e.startarrowsize*e.arrowwidth||0,m=f+d,y=f-d;if(l===s){var b=Axes$b.findExtremes(t,[t.r2c(a)],{ppadplus:g,ppadminus:p}),v=Axes$b.findExtremes(t,[t.r2c(o)],{ppadplus:Math.max(c,m),ppadminus:Math.max(u,y)});r={min:[b.min[0],v.min[0]],max:[b.max[0],v.max[0]]}}else m=o?m+o:m,y=o?y-o:y,r=Axes$b.findExtremes(t,[t.r2c(a)],{ppadplus:Math.max(c,g,m),ppadminus:Math.max(u,p,y)});e._extremes[n]=r}var isNumeric$6=fastIsnumeric,toLogRange$1=to_log_range,convert_coords$1=function(e,t,r,n){t=t||{};var i="log"===r&&"linear"===t.type,a="linear"===r&&"log"===t.type;if(i||a)for(var o,s,l=e._fullLayout.annotations,c=t._id.charAt(0),u=0;u<l.length;u++)o=l[u],s="annotations["+u+"].",o[c+"ref"]===t._id&&d(c),o["a"+c+"ref"]===t._id&&d("a"+c);function d(e){var r=o[e],a=null;a=i?toLogRange$1(r,t.range):Math.pow(10,r),isNumeric$6(a)||(a=null),n(s+e,a)}},drawModule$1=draw_1$1,clickModule=click,annotations={moduleType:"component",name:"annotations",layoutAttributes:attributes$z,supplyLayoutDefaults:defaults$e,includeBasePlot:include_components("annotations"),calcAutorange:calc_autorange$2,draw:drawModule$1.draw,drawOne:drawModule$1.drawOne,drawRaw:drawModule$1.drawRaw,hasClickToShow:clickModule.hasClickToShow,onClick:clickModule.onClick,convertCoords:convert_coords$1},annAttrs$1=attributes$z,overrideAll$7=edit_types.overrideAll,templatedArray$5=plot_template.templatedArray,attributes$r=overrideAll$7(templatedArray$5("annotation",{visible:annAttrs$1.visible,x:{valType:"any",description:["Sets the annotation's x position."].join(" ")},y:{valType:"any",description:["Sets the annotation's y position."].join(" ")},z:{valType:"any",description:["Sets the annotation's z position."].join(" ")},ax:{valType:"number",description:["Sets the x component of the arrow tail about the arrow head (in pixels)."].join(" ")},ay:{valType:"number",description:["Sets the y component of the arrow tail about the arrow head (in pixels)."].join(" ")},xanchor:annAttrs$1.xanchor,xshift:annAttrs$1.xshift,yanchor:annAttrs$1.yanchor,yshift:annAttrs$1.yshift,text:annAttrs$1.text,textangle:annAttrs$1.textangle,font:annAttrs$1.font,width:annAttrs$1.width,height:annAttrs$1.height,opacity:annAttrs$1.opacity,align:annAttrs$1.align,valign:annAttrs$1.valign,bgcolor:annAttrs$1.bgcolor,bordercolor:annAttrs$1.bordercolor,borderpad:annAttrs$1.borderpad,borderwidth:annAttrs$1.borderwidth,showarrow:annAttrs$1.showarrow,arrowcolor:annAttrs$1.arrowcolor,arrowhead:annAttrs$1.arrowhead,startarrowhead:annAttrs$1.startarrowhead,arrowside:annAttrs$1.arrowside,arrowsize:annAttrs$1.arrowsize,startarrowsize:annAttrs$1.startarrowsize,arrowwidth:annAttrs$1.arrowwidth,standoff:annAttrs$1.standoff,startstandoff:annAttrs$1.startstandoff,hovertext:annAttrs$1.hovertext,hoverlabel:annAttrs$1.hoverlabel,captureevents:annAttrs$1.captureevents}),"calc","from-root"),Lib$y=libExports,Axes$a=axesExports,handleArrayContainerDefaults$5=array_container_defaults,handleAnnotationCommonDefaults=common_defaults,attributes$q=attributes$r,defaults$d=function(e,t,r){handleArrayContainerDefaults$5(e,t,{name:"annotations",handleItemDefaults:handleAnnotationDefaults,fullLayout:r.fullLayout})};function handleAnnotationDefaults(e,t,r,n){function i(r,n){return Lib$y.coerce(e,t,attributes$q,r,n)}function a(e){var n=e+"axis",a={_fullLayout:{}};return a._fullLayout[n]=r[n],Axes$a.coercePosition(t,a,i,e,e,.5)}i("visible")&&(handleAnnotationCommonDefaults(e,t,n.fullLayout,i),a("x"),a("y"),a("z"),Lib$y.noneOrAll(e,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",i("xanchor"),i("yanchor"),i("xshift"),i("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",i("ax",-10),i("ay",-30),Lib$y.noneOrAll(e,t,["ax","ay"])))}var Lib$x=libExports,Axes$9=axesExports,convert$3=function(e){for(var t=e.fullSceneLayout.annotations,r=0;r<t.length;r++)mockAnnAxes(t[r],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()};function mockAnnAxes(e,t){var r=t.fullSceneLayout.domain,n=t.fullLayout._size,i={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},Lib$x.extendFlat(e._xa,i),Axes$9.setConvert(e._xa),e._xa._offset=n.l+r.x[0]*n.w,e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*n.w*(r.x[1]-r.x[0])},e._ya={},Lib$x.extendFlat(e._ya,i),Axes$9.setConvert(e._ya),e._ya._offset=n.t+(1-r.y[1])*n.h,e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*n.h*(r.y[1]-r.y[0])}}function xformMatrix(e,t){var r,n,i=[0,0,0,0];for(r=0;r<4;++r)for(n=0;n<4;++n)i[n]+=e[4*r+n]*t[r];return i}function project$2(e,t){return xformMatrix(e.projection,xformMatrix(e.view,xformMatrix(e.model,[t[0],t[1],t[2],1])))}var project_1=project$2,drawRaw=draw_1$1.drawRaw,project$1=project_1,axLetters=["x","y","z"],draw$6=function(e){for(var t=e.fullSceneLayout,r=e.dataScale,n=t.annotations,i=0;i<n.length;i++){for(var a=n[i],o=!1,s=0;s<3;s++){var l=axLetters[s],c=a[l],u=t[l+"axis"].r2fraction(c);if(u<0||u>1){o=!0;break}}o?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+i+'"]').remove():(a._pdata=project$1(e.glplot.cameraParams,[t.xaxis.r2l(a.x)*r[0],t.yaxis.r2l(a.y)*r[1],t.zaxis.r2l(a.z)*r[2]]),drawRaw(e.graphDiv,a,i,e.id,a._xa,a._ya))}},Registry$f=registry,Lib$w=libExports,annotations3d={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:attributes$r}}},layoutAttributes:attributes$r,handleDefaults:defaults$d,includeBasePlot:includeGL3D,convert:convert$3,draw:draw$6};function includeGL3D(e,t){var r=Registry$f.subplotsRegistry.gl3d;if(r)for(var n=r.attrRegex,i=Object.keys(e),a=0;a<i.length;a++){var o=i[a];n.test(o)&&(e[o].annotations||[]).length&&(Lib$w.pushUnique(t._basePlotModules,r),Lib$w.pushUnique(t._subplots.gl3d,o))}}var annAttrs=attributes$z,fontAttrs$5=requireFont_attributes(),scatterLineAttrs$1=attributes$y.line,dash=attributes$K.dash,extendFlat$a=extend.extendFlat,templatedArray$4=plot_template.templatedArray,axisPlaceableObjs$1=axis_placeable_objects,attributes$p=templatedArray$4("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not this shape is visible."].join(" ")},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw",description:["Specifies the shape type to be drawn.","If *line*, a line is drawn from (`x0`,`y0`) to (`x1`,`y1`)","with respect to the axes' sizing mode.","If *circle*, a circle is drawn from","((`x0`+`x1`)/2, (`y0`+`y1`)/2))","with radius","(|(`x0`+`x1`)/2 - `x0`|, |(`y0`+`y1`)/2 -`y0`)|)","with respect to the axes' sizing mode.","If *rect*, a rectangle is drawn linking","(`x0`,`y0`), (`x1`,`y0`), (`x1`,`y1`), (`x0`,`y1`), (`x0`,`y0`)","with respect to the axes' sizing mode.","If *path*, draw a custom SVG path using `path`.","with respect to the axes' sizing mode."].join(" ")},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw",description:"Specifies whether shapes are drawn below or above traces."},xref:extendFlat$a({},annAttrs.xref,{description:["Sets the shape's x coordinate axis.",axisPlaceableObjs$1.axisRefDescription("x","left","right")].join(" ")}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw",description:["Sets the shapes's sizing mode along the x axis.","If set to *scaled*, `x0`, `x1` and x coordinates within `path` refer to","data values on the x axis or a fraction of the plot area's width","(`xref` set to *paper*).","If set to *pixel*, `xanchor` specifies the x position in terms","of data or plot fraction but `x0`, `x1` and x coordinates within `path`","are pixels relative to `xanchor`. This way, the shape can have","a fixed width while maintaining a position relative to data or","plot fraction."].join(" ")},xanchor:{valType:"any",editType:"calc+arraydraw",description:["Only relevant in conjunction with `xsizemode` set to *pixel*.","Specifies the anchor point on the x axis to which `x0`, `x1`","and x coordinates within `path` are relative to.","E.g. useful to attach a pixel sized shape to a certain data value.","No effect when `xsizemode` not set to *pixel*."].join(" ")},x0:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's starting x position.","See `type` and `xsizemode` for more info."].join(" ")},x1:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's end x position.","See `type` and `xsizemode` for more info."].join(" ")},yref:extendFlat$a({},annAttrs.yref,{description:["Sets the shape's y coordinate axis.",axisPlaceableObjs$1.axisRefDescription("y","bottom","top")].join(" ")}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw",description:["Sets the shapes's sizing mode along the y axis.","If set to *scaled*, `y0`, `y1` and y coordinates within `path` refer to","data values on the y axis or a fraction of the plot area's height","(`yref` set to *paper*).","If set to *pixel*, `yanchor` specifies the y position in terms","of data or plot fraction but `y0`, `y1` and y coordinates within `path`","are pixels relative to `yanchor`. This way, the shape can have","a fixed height while maintaining a position relative to data or","plot fraction."].join(" ")},yanchor:{valType:"any",editType:"calc+arraydraw",description:["Only relevant in conjunction with `ysizemode` set to *pixel*.","Specifies the anchor point on the y axis to which `y0`, `y1`","and y coordinates within `path` are relative to.","E.g. useful to attach a pixel sized shape to a certain data value.","No effect when `ysizemode` not set to *pixel*."].join(" ")},y0:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's starting y position.","See `type` and `ysizemode` for more info."].join(" ")},y1:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's end y position.","See `type` and `ysizemode` for more info."].join(" ")},path:{valType:"string",editType:"calc+arraydraw",description:["For `type` *path* - a valid SVG path with the pixel values","replaced by data values in `xsizemode`/`ysizemode` being *scaled*","and taken unmodified as pixels relative to `xanchor` and `yanchor`","in case of *pixel* size mode.","There are a few restrictions / quirks","only absolute instructions, not relative. So the allowed segments","are: M, L, H, V, Q, C, T, S, and Z","arcs (A) are not allowed because radius rx and ry are relative.","In the future we could consider supporting relative commands,","but we would have to decide on how to handle date and log axes.","Note that even as is, Q and C Bezier paths that are smooth on","linear axes may not be smooth on log, and vice versa.",'no chained "polybezier" commands - specify the segment type for',"each one.","On category axes, values are numbers scaled to the serial numbers","of categories because using the categories themselves there would","be no way to describe fractional positions","On data axes: because space and T are both normal components of path","strings, we can't use either to separate date from time parts.","Therefore we'll use underscore for this purpose:","2015-02-21_13:45:56.789"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the shape."},line:{color:extendFlat$a({},scatterLineAttrs$1.color,{editType:"arraydraw"}),width:extendFlat$a({},scatterLineAttrs$1.width,{editType:"calc+arraydraw"}),dash:extendFlat$a({},dash,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:["Sets the color filling the shape's interior. Only applies to closed shapes."].join(" ")},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw",description:["Determines which regions of complex paths constitute the interior.","For more info please visit https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule"].join(" ")},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw",description:["Determines whether the shape could be activated for edit or not.","Has no effect when the older editable shapes mode is enabled via","`config.editable` or `config.edits.shapePosition`."].join(" ")},label:{text:{valType:"string",dflt:"",editType:"arraydraw",description:"Sets the text to display with shape."},font:fontAttrs$5({editType:"calc+arraydraw",colorEditType:"arraydraw",description:"Sets the shape label text font."}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw",description:["Sets the position of the label text relative to the shape.","Supported values for rectangles, circles and paths are","*top left*, *top center*, *top right*, *middle left*,","*middle center*, *middle right*, *bottom left*, *bottom center*,","and *bottom right*.","Supported values for lines are *start*, *middle*, and *end*.","Default: *middle center* for rectangles, circles, and paths; *middle* for lines."].join(" ")},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw",description:["Sets the angle at which the label text is drawn","with respect to the horizontal. For lines, angle *auto*","is the same angle as the line. For all other shapes,","angle *auto* is horizontal."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the label's horizontal position anchor","This anchor binds the specified `textposition` to the *left*, *center*","or *right* of the label text.","For example, if `textposition` is set to *top right* and","`xanchor` to *right* then the right-most portion of the","label text lines up with the right-most edge of the","shape."].join(" ")},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw",description:["Sets the label's vertical position anchor","This anchor binds the specified `textposition` to the *top*, *middle*","or *bottom* of the label text.","For example, if `textposition` is set to *top right* and","`yanchor` to *top* then the top-most portion of the","label text lines up with the top-most edge of the","shape."].join(" ")},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw",description:"Sets padding (in px) between edge of label and edge of shape."},editType:"arraydraw"},editType:"arraydraw"}),Lib$v=libExports,Axes$8=axesExports,handleArrayContainerDefaults$4=array_container_defaults,attributes$o=attributes$p,helpers$8=helpers$k,defaults$c=function(e,t){handleArrayContainerDefaults$4(e,t,{name:"shapes",handleItemDefaults:handleShapeDefaults})};function dfltLabelYanchor$1(e,t){return e?"bottom":-1!==t.indexOf("top")?"top":-1!==t.indexOf("bottom")?"bottom":"middle"}function handleShapeDefaults(e,t,r){function n(r,n){return Lib$v.coerce(e,t,attributes$o,r,n)}if(n("visible")){var i=n("path"),a=n("type",i?"path":"rect"),o="path"!==a;o&&delete t.path,n("editable"),n("layer"),n("opacity"),n("fillcolor"),n("fillrule"),n("line.width")&&(n("line.color"),n("line.dash"));for(var s=n("xsizemode"),l=n("ysizemode"),c=["x","y"],u=0;u<2;u++){var d,h,g,p=c[u],f=p+"anchor",m="x"===p?s:l,y={_fullLayout:r},b=Axes$8.coerceRef(e,t,y,p,void 0,"paper");if("range"===Axes$8.getRefType(b)?((d=Axes$8.getFromId(y,b))._shapeIndices.push(t._index),g=helpers$8.rangeToShapePosition(d),h=helpers$8.shapePositionToRange(d)):h=g=Lib$v.identity,o){var v=p+"0",x=p+"1",B=e[v],I=e[x];e[v]=h(e[v],!0),e[x]=h(e[x],!0),"pixel"===m?(n(v,0),n(x,10)):(Axes$8.coercePosition(t,y,n,b,v,.25),Axes$8.coercePosition(t,y,n,b,x,.75)),t[v]=g(t[v]),t[x]=g(t[x]),e[v]=B,e[x]=I}if("pixel"===m){var F=e[f];e[f]=h(e[f],!0),Axes$8.coercePosition(t,y,n,b,f,.25),t[f]=g(t[f]),e[f]=F}}o&&Lib$v.noneOrAll(e,t,["x0","x1","y0","y1"]);var A="line"===a;if(n("label.text")){n("label.textangle");var C=n("label.textposition",A?"middle":"middle center");n("label.xanchor"),n("label.yanchor",dfltLabelYanchor$1(A,C)),n("label.padding"),Lib$v.coerceFont(n,"label.font",r.font)}}}var Color$d=colorExports,Lib$u=libExports;function dfltLabelYanchor(e,t){return e?"bottom":-1!==t.indexOf("top")?"top":-1!==t.indexOf("bottom")?"bottom":"middle"}var defaults$b=function(e,t,r){if(r("newshape.drawdirection"),r("newshape.layer"),r("newshape.fillcolor"),r("newshape.fillrule"),r("newshape.opacity"),r("newshape.line.width")){var n=(e||{}).plot_bgcolor||"#FFF";r("newshape.line.color",Color$d.contrast(n)),r("newshape.line.dash")}var i="drawline"===e.dragmode;if(r("newshape.label.text")){r("newshape.label.textangle");var a=r("newshape.label.textposition",i?"middle":"middle center");r("newshape.label.xanchor"),r("newshape.label.yanchor",dfltLabelYanchor(i,a)),r("newshape.label.padding"),Lib$u.coerceFont(r,"newshape.label.font",t.font)}r("activeshape.fillcolor"),r("activeshape.opacity")},Lib$t=libExports,Axes$7=axesExports,constants$k=constants$x,helpers$7=helpers$k,calc_autorange$1=function(e){var t=e._fullLayout,r=Lib$t.filterVisible(t.shapes);if(r.length&&e._fullData.length)for(var n=0;n<r.length;n++){var i,a,o=r[n];o._extremes={};var s=Axes$7.getRefType(o.xref),l=Axes$7.getRefType(o.yref);if("paper"!==o.xref&&"domain"!==s){var c="pixel"===o.xsizemode?o.xanchor:o.x0,u="pixel"===o.xsizemode?o.xanchor:o.x1;(a=shapeBounds(i=Axes$7.getFromId(e,o.xref),c,u,o.path,constants$k.paramIsX))&&(o._extremes[i._id]=Axes$7.findExtremes(i,a,calcXPaddingOptions(o)))}if("paper"!==o.yref&&"domain"!==l){var d="pixel"===o.ysizemode?o.yanchor:o.y0,h="pixel"===o.ysizemode?o.yanchor:o.y1;(a=shapeBounds(i=Axes$7.getFromId(e,o.yref),d,h,o.path,constants$k.paramIsY))&&(o._extremes[i._id]=Axes$7.findExtremes(i,a,calcYPaddingOptions(o)))}}};function calcXPaddingOptions(e){return calcPaddingOptions(e.line.width,e.xsizemode,e.x0,e.x1,e.path,!1)}function calcYPaddingOptions(e){return calcPaddingOptions(e.line.width,e.ysizemode,e.y0,e.y1,e.path,!0)}function calcPaddingOptions(e,t,r,n,i,a){var o=e/2,s=a;if("pixel"===t){var l=i?helpers$7.extractPathCoords(i,a?constants$k.paramIsY:constants$k.paramIsX):[r,n],c=Lib$t.aggNums(Math.max,null,l),u=Lib$t.aggNums(Math.min,null,l),d=u<0?Math.abs(u)+o:o,h=c>0?c+o:o;return{ppad:o,ppadplus:s?d:h,ppadminus:s?h:d}}return{ppad:o}}function shapeBounds(e,t,r,n,i){var a="category"===e.type||"multicategory"===e.type?e.r2c:e.d2c;if(void 0!==t)return[a(t),a(r)];if(n){var o,s,l,c,u=1/0,d=-1/0,h=n.match(constants$k.segmentRE);for("date"===e.type&&(a=helpers$7.decodeDate(a)),o=0;o<h.length;o++)void 0!==(s=i[h[o].charAt(0)].drawn)&&(!(l=h[o].substr(1).match(constants$k.paramRE))||l.length<s||((c=a(l[s]))<u&&(u=c),c>d&&(d=c)));return d>=u?[u,d]:void 0}}var drawModule=draw_1$3,shapes={moduleType:"component",name:"shapes",layoutAttributes:attributes$p,supplyLayoutDefaults:defaults$c,supplyDrawNewShapeDefaults:defaults$b,includeBasePlot:include_components("shapes"),calcAutorange:calc_autorange$1,draw:drawModule.draw,drawOne:drawModule.drawOne},cartesianConstants=constants$K,templatedArray$3=plot_template.templatedArray,axisPlaceableObjs=axis_placeable_objects,attributes$n=templatedArray$3("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw",description:["Determines whether or not this image is visible."].join(" ")},source:{valType:"string",editType:"arraydraw",description:["Specifies the URL of the image to be used.","The URL must be accessible from the domain where the","plot code is run, and can be either relative or absolute."].join(" ")},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw",description:["Specifies whether images are drawn below or above traces.","When `xref` and `yref` are both set to `paper`,","image is drawn below the entire plot area."].join(" ")},sizex:{valType:"number",dflt:0,editType:"arraydraw",description:["Sets the image container size horizontally.","The image will be sized based on the `position` value.","When `xref` is set to `paper`, units are sized relative","to the plot width.","When `xref` ends with ` domain`, units are sized relative","to the axis width."].join(" ")},sizey:{valType:"number",dflt:0,editType:"arraydraw",description:["Sets the image container size vertically.","The image will be sized based on the `position` value.","When `yref` is set to `paper`, units are sized relative","to the plot height.","When `yref` ends with ` domain`, units are sized relative","to the axis height."].join(" ")},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw",description:["Specifies which dimension of the image to constrain."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the image."},x:{valType:"any",dflt:0,editType:"arraydraw",description:["Sets the image's x position.","When `xref` is set to `paper`, units are sized relative","to the plot height.","See `xref` for more info"].join(" ")},y:{valType:"any",dflt:0,editType:"arraydraw",description:["Sets the image's y position.","When `yref` is set to `paper`, units are sized relative","to the plot height.","See `yref` for more info"].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw",description:"Sets the anchor for the x position"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw",description:"Sets the anchor for the y position."},xref:{valType:"enumerated",values:["paper",cartesianConstants.idRegex.x.toString()],dflt:"paper",editType:"arraydraw",description:["Sets the images's x coordinate axis.",axisPlaceableObjs.axisRefDescription("x","left","right")].join(" ")},yref:{valType:"enumerated",values:["paper",cartesianConstants.idRegex.y.toString()],dflt:"paper",editType:"arraydraw",description:["Sets the images's y coordinate axis.",axisPlaceableObjs.axisRefDescription("y","bottom","top")].join(" ")},editType:"arraydraw"}),Lib$s=libExports,Axes$6=axesExports,handleArrayContainerDefaults$3=array_container_defaults,attributes$m=attributes$n,name$4="images",defaults$a=function(e,t){handleArrayContainerDefaults$3(e,t,{name:name$4,handleItemDefaults:imageDefaults})};function imageDefaults(e,t,r){function n(r,n){return Lib$s.coerce(e,t,attributes$m,r,n)}var i=n("source");if(!n("visible",!!i))return t;n("layer"),n("xanchor"),n("yanchor"),n("sizex"),n("sizey"),n("sizing"),n("opacity");for(var a={_fullLayout:r},o=["x","y"],s=0;s<2;s++){var l=o[s],c=Axes$6.coerceRef(e,t,a,l,"paper",void 0);if("paper"!==c)Axes$6.getFromId(a,c)._imgIndices.push(t._index);Axes$6.coercePosition(t,a,n,c,l,0)}return t}var d3$8=d3Exports,Drawing$7=drawingExports,Axes$5=axesExports,axisIds$2=axis_ids,xmlnsNamespaces$1=xmlns_namespaces,draw$5=function(e){var t,r,n=e._fullLayout,i=[],a={},o=[];for(r=0;r<n.images.length;r++){var s=n.images[r];if(s.visible)if("below"===s.layer&&"paper"!==s.xref&&"paper"!==s.yref){t=axisIds$2.ref2id(s.xref)+axisIds$2.ref2id(s.yref);var l=n._plots[t];if(!l){o.push(s);continue}l.mainplot&&(t=l.mainplot.id),a[t]||(a[t]=[]),a[t].push(s)}else"above"===s.layer?i.push(s):o.push(s)}var c={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},u={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function d(t){var r=d3$8.select(this);if(this._imgSrc!==t.source)if(r.attr("xmlns",xmlnsNamespaces$1.svg),t.source&&"data:"===t.source.slice(0,5))r.attr("xlink:href",t.source),this._imgSrc=t.source;else{var n=new Promise(function(e){var n=new Image;function i(){r.remove(),e()}this.img=n,n.setAttribute("crossOrigin","anonymous"),n.onerror=i,n.onload=function(){var t=document.createElement("canvas");t.width=this.width,t.height=this.height,t.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var n=t.toDataURL("image/png");r.attr("xlink:href",n),e()},r.on("error",i),n.src=t.source,this._imgSrc=t.source}.bind(this));e._promises.push(n)}}function h(t){var r,i,a=d3$8.select(this),o=Axes$5.getFromId(e,t.xref),s=Axes$5.getFromId(e,t.yref),l="domain"===Axes$5.getRefType(t.xref),d="domain"===Axes$5.getRefType(t.yref),h=n._size;r=void 0!==o?"string"==typeof t.xref&&l?o._length*t.sizex:Math.abs(o.l2p(t.sizex)-o.l2p(0)):t.sizex*h.w,i=void 0!==s?"string"==typeof t.yref&&d?s._length*t.sizey:Math.abs(s.l2p(t.sizey)-s.l2p(0)):t.sizey*h.h;var g,p,f=r*c[t.xanchor].offset,m=i*u[t.yanchor].offset,y=c[t.xanchor].sizing+u[t.yanchor].sizing;switch(g=void 0!==o?"string"==typeof t.xref&&l?o._length*t.x+o._offset:o.r2p(t.x)+o._offset:t.x*h.w+h.l,g+=f,p=void 0!==s?"string"==typeof t.yref&&d?s._length*(1-t.y)+s._offset:s.r2p(t.y)+s._offset:h.h-t.y*h.h+h.t,p+=m,t.sizing){case"fill":y+=" slice";break;case"stretch":y="none"}a.attr({x:g,y:p,width:r,height:i,preserveAspectRatio:y,opacity:t.opacity});var b=(o&&"domain"!==Axes$5.getRefType(t.xref)?o._id:"")+(s&&"domain"!==Axes$5.getRefType(t.yref)?s._id:"");Drawing$7.setClipUrl(a,b?"clip"+n._uid+b:null,e)}var g=n._imageLowerLayer.selectAll("image").data(o),p=n._imageUpperLayer.selectAll("image").data(i);g.enter().append("image"),p.enter().append("image"),g.exit().remove(),p.exit().remove(),g.each((function(e){d.bind(this)(e),h.bind(this)(e)})),p.each((function(e){d.bind(this)(e),h.bind(this)(e)}));var f=Object.keys(n._plots);for(r=0;r<f.length;r++){t=f[r];var m=n._plots[t];if(m.imagelayer){var y=m.imagelayer.selectAll("image").data(a[t]||[]);y.enter().append("image"),y.exit().remove(),y.each((function(e){d.bind(this)(e),h.bind(this)(e)}))}}},isNumeric$5=fastIsnumeric,toLogRange=to_log_range,convert_coords=function(e,t,r,n){t=t||{};var i="log"===r&&"linear"===t.type,a="linear"===r&&"log"===t.type;if(i||a)for(var o,s,l=e._fullLayout.images,c=t._id.charAt(0),u=0;u<l.length;u++)if(s="images["+u+"].",(o=l[u])[c+"ref"]===t._id){var d=o[c],h=o["size"+c],g=null,p=null;if(i){g=toLogRange(d,t.range);var f=h/Math.pow(10,g)/2;p=2*Math.log(f+Math.sqrt(1+f*f))/Math.LN10}else p=(g=Math.pow(10,d))*(Math.pow(10,h/2)-Math.pow(10,-h/2));isNumeric$5(g)?isNumeric$5(p)||(p=null):(g=null,p=null),n(s+c,g),n(s+"size"+c,p)}},images={moduleType:"component",name:"images",layoutAttributes:attributes$n,supplyLayoutDefaults:defaults$a,includeBasePlot:include_components("images"),draw:draw$5,convertCoords:convert_coords},constants$j={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}},fontAttrs$4=requireFont_attributes(),colorAttrs$1=attributes$L,extendFlat$9=extend.extendFlat,overrideAll$6=edit_types.overrideAll,padAttrs$1=pad_attributes,templatedArray$2=plot_template.templatedArray,buttonsAttrs=templatedArray$2("button",{visible:{valType:"boolean",description:"Determines whether or not this button is visible."},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",description:["Sets the Plotly method to be called on click.","If the `skip` method is used, the API updatemenu will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","updatemenu events manually via JavaScript."].join(" ")},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on click."].join(" ")},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets a 2nd set of `args`,","these arguments values are passed to the Plotly","method set in `method` when clicking this button while in the active state.","Use this to create toggle buttons."].join(" ")},label:{valType:"string",dflt:"",description:"Sets the text label to appear on the button."},execute:{valType:"boolean",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_buttonclicked` method and executing the API command manually without losing","the benefit of the updatemenu automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}}),attributes$l=overrideAll$6(templatedArray$2("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean",description:["Determines whether or not the update menu is visible."].join(" ")},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown",description:["Determines whether the buttons are accessible via a dropdown menu","or whether the buttons are stacked horizontally or vertically"].join(" ")},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down",description:["Determines the direction in which the buttons are laid out, whether","in a dropdown menu or a row/column of buttons. For `left` and `up`,","the buttons will still appear in left-to-right or top-to-bottom order","respectively."].join(" ")},active:{valType:"integer",min:-1,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},showactive:{valType:"boolean",dflt:!0,description:"Highlights active dropdown item or active button if true."},buttons:buttonsAttrs,x:{valType:"number",min:-2,max:3,dflt:-.05,description:"Sets the x position (in normalized coordinates) of the update menu."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right",description:["Sets the update menu's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:1,description:"Sets the y position (in normalized coordinates) of the update menu."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",description:["Sets the update menu's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},pad:extendFlat$9(padAttrs$1({editType:"arraydraw"}),{description:"Sets the padding around the buttons or dropdown menu."}),font:fontAttrs$4({description:"Sets the font of the update menu button text."}),bgcolor:{valType:"color",description:"Sets the background color of the update menu buttons."},bordercolor:{valType:"color",dflt:colorAttrs$1.borderLine,description:"Sets the color of the border enclosing the update menu."},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw",description:"Sets the width (in px) of the border enclosing the update menu."}}),"arraydraw","from-root"),Lib$r=libExports,handleArrayContainerDefaults$2=array_container_defaults,attributes$k=attributes$l,constants$i=constants$j,name$3=constants$i.name,buttonAttrs$1=attributes$k.buttons,defaults$9=function(e,t){handleArrayContainerDefaults$2(e,t,{name:name$3,handleItemDefaults:menuDefaults})};function menuDefaults(e,t,r){function n(r,n){return Lib$r.coerce(e,t,attributes$k,r,n)}n("visible",handleArrayContainerDefaults$2(e,t,{name:"buttons",handleItemDefaults:buttonDefaults$1}).length>0)&&(n("active"),n("direction"),n("type"),n("showactive"),n("x"),n("y"),Lib$r.noneOrAll(e,t,["x","y"]),n("xanchor"),n("yanchor"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),Lib$r.coerceFont(n,"font",r.font),n("bgcolor",r.paper_bgcolor),n("bordercolor"),n("borderwidth"))}function buttonDefaults$1(e,t){function r(r,n){return Lib$r.coerce(e,t,buttonAttrs$1,r,n)}r("visible","skip"===e.method||Array.isArray(e.args))&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}var scrollbox=ScrollBox$1,d3$7=d3Exports,Color$c=colorExports,Drawing$6=drawingExports,Lib$q=libExports;function ScrollBox$1(e,t,r){this.gd=e,this.container=t,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}ScrollBox$1.barWidth=2,ScrollBox$1.barLength=20,ScrollBox$1.barRadius=2,ScrollBox$1.barPad=1,ScrollBox$1.barColor="#808BA4",ScrollBox$1.prototype.enable=function(e,t,r){var n=this.gd._fullLayout,i=n.width,a=n.height;this.position=e;var o,s,l,c,u=this.position.l,d=this.position.w,h=this.position.t,g=this.position.h,p=this.position.direction,f="down"===p,m="left"===p,y="up"===p,b=d,v=g;f||m||"right"===p||y||(this.position.direction="down",f=!0),f||y?(s=(o=u)+b,f?(l=h,v=(c=Math.min(l+v,a))-l):v=(c=h+v)-(l=Math.max(c-v,0))):(c=(l=h)+v,m?b=(s=u+b)-(o=Math.max(s-b,0)):(o=u,b=(s=Math.min(o+b,i))-o)),this._box={l:o,t:l,w:b,h:v};var x=d>b,B=ScrollBox$1.barLength+2*ScrollBox$1.barPad,I=ScrollBox$1.barWidth+2*ScrollBox$1.barPad,F=u,A=h+g;A+I>a&&(A=a-I);var C=this.container.selectAll("rect.scrollbar-horizontal").data(x?[0]:[]);C.exit().on(".drag",null).remove(),C.enter().append("rect").classed("scrollbar-horizontal",!0).call(Color$c.fill,ScrollBox$1.barColor),x?(this.hbar=C.attr({rx:ScrollBox$1.barRadius,ry:ScrollBox$1.barRadius,x:F,y:A,width:B,height:I}),this._hbarXMin=F+B/2,this._hbarTranslateMax=b-B):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var w=g>v,Q=ScrollBox$1.barWidth+2*ScrollBox$1.barPad,U=ScrollBox$1.barLength+2*ScrollBox$1.barPad,S=u+d,E=h;S+Q>i&&(S=i-Q);var L=this.container.selectAll("rect.scrollbar-vertical").data(w?[0]:[]);L.exit().on(".drag",null).remove(),L.enter().append("rect").classed("scrollbar-vertical",!0).call(Color$c.fill,ScrollBox$1.barColor),w?(this.vbar=L.attr({rx:ScrollBox$1.barRadius,ry:ScrollBox$1.barRadius,x:S,y:E,width:Q,height:U}),this._vbarYMin=E+U/2,this._vbarTranslateMax=v-U):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var _=this.id,T=o-.5,R=w?s+Q+.5:s+.5,$=l-.5,k=x?c+I+.5:c+.5,N=n._topdefs.selectAll("#"+_).data(x||w?[0]:[]);if(N.exit().remove(),N.enter().append("clipPath").attr("id",_).append("rect"),x||w?(this._clipRect=N.select("rect").attr({x:Math.floor(T),y:Math.floor($),width:Math.ceil(R)-Math.floor(T),height:Math.ceil(k)-Math.floor($)}),this.container.call(Drawing$6.setClipUrl,_,this.gd),this.bg.attr({x:u,y:h,width:d,height:g})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(Drawing$6.setClipUrl,null),delete this._clipRect),x||w){var G=d3$7.behavior.drag().on("dragstart",(function(){d3$7.event.sourceEvent.preventDefault()})).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(G);var M=d3$7.behavior.drag().on("dragstart",(function(){d3$7.event.sourceEvent.preventDefault(),d3$7.event.sourceEvent.stopPropagation()})).on("drag",this._onBarDrag.bind(this));x&&this.hbar.on(".drag",null).call(M),w&&this.vbar.on(".drag",null).call(M)}this.setTranslate(t,r)},ScrollBox$1.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(Drawing$6.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},ScrollBox$1.prototype._onBoxDrag=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e-=d3$7.event.dx),this.vbar&&(t-=d3$7.event.dy),this.setTranslate(e,t)},ScrollBox$1.prototype._onBoxWheel=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e+=d3$7.event.deltaY),this.vbar&&(t+=d3$7.event.deltaY),this.setTranslate(e,t)},ScrollBox$1.prototype._onBarDrag=function(){var e=this.translateX,t=this.translateY;if(this.hbar){var r=e+this._hbarXMin,n=r+this._hbarTranslateMax;e=(Lib$q.constrain(d3$7.event.x,r,n)-r)/(n-r)*(this.position.w-this._box.w)}if(this.vbar){var i=t+this._vbarYMin,a=i+this._vbarTranslateMax;t=(Lib$q.constrain(d3$7.event.y,i,a)-i)/(a-i)*(this.position.h-this._box.h)}this.setTranslate(e,t)},ScrollBox$1.prototype.setTranslate=function(e,t){var r=this.position.w-this._box.w,n=this.position.h-this._box.h;if(e=Lib$q.constrain(e||0,0,r),t=Lib$q.constrain(t||0,0,n),this.translateX=e,this.translateY=t,this.container.call(Drawing$6.setTranslate,this._box.l-this.position.l-e,this._box.t-this.position.t-t),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+e-.5),y:Math.floor(this.position.t+t-.5)}),this.hbar){var i=e/r;this.hbar.call(Drawing$6.setTranslate,e+i*this._hbarTranslateMax,t)}if(this.vbar){var a=t/n;this.vbar.call(Drawing$6.setTranslate,e,t+a*this._vbarTranslateMax)}};var d3$6=d3Exports,Plots$3=plotsExports,Color$b=colorExports,Drawing$5=drawingExports,Lib$p=libExports,svgTextUtils$5=svg_text_utils,arrayEditor$1=plot_template.arrayEditor,LINE_SPACING$4=alignment$1.LINE_SPACING,constants$h=constants$j,ScrollBox=scrollbox,draw$4=function(e){var t=e._fullLayout,r=Lib$p.filterVisible(t[constants$h.name]);function n(t){Plots$3.autoMargin(e,autoMarginId$1(t))}var i=t._menulayer.selectAll("g."+constants$h.containerClassName).data(r.length>0?[0]:[]);if(i.enter().append("g").classed(constants$h.containerClassName,!0).style("cursor","pointer"),i.exit().each((function(){d3$6.select(this).selectAll("g."+constants$h.headerGroupClassName).each(n)})).remove(),0!==r.length){var a=i.selectAll("g."+constants$h.headerGroupClassName).data(r,keyFunction$1);a.enter().append("g").classed(constants$h.headerGroupClassName,!0);for(var o=Lib$p.ensureSingle(i,"g",constants$h.dropdownButtonGroupClassName,(function(e){e.style("pointer-events","all")})),s=0;s<r.length;s++){var l=r[s];findDimensions$1(e,l)}var c="updatemenus"+t._uid,u=new ScrollBox(e,o,c);a.enter().size()&&(o.node().parentNode.appendChild(o.node()),o.call(removeAllButtons)),a.exit().each((function(e){o.call(removeAllButtons),n(e)})).remove(),a.each((function(t){var r=d3$6.select(this),n="dropdown"===t.type?o:null;Plots$3.manageCommandObserver(e,t,t.buttons,(function(i){setActive$1(e,t,t.buttons[i.index],r,n,u,i.index,!0)})),"dropdown"===t.type?(drawHeader(e,r,o,u,t),isActive$1(o,t)&&drawButtons(e,r,o,u,t)):drawButtons(e,r,null,null,t)}))}};function keyFunction$1(e){return e._index}function isFolded(e){return-1==+e.attr(constants$h.menuIndexAttrName)}function isActive$1(e,t){return+e.attr(constants$h.menuIndexAttrName)===t._index}function setActive$1(e,t,r,n,i,a,o,s){t.active=o,arrayEditor$1(e.layout,constants$h.name,t).applyUpdate("active",o),"buttons"===t.type?drawButtons(e,n,null,null,t):"dropdown"===t.type&&(i.attr(constants$h.menuIndexAttrName,"-1"),drawHeader(e,n,i,a,t),s||drawButtons(e,n,i,a,t))}function drawHeader(e,t,r,n,i){var a=Lib$p.ensureSingle(t,"g",constants$h.headerClassName,(function(e){e.style("pointer-events","all")})),o=i._dims,s=i.active,l=i.buttons[s]||constants$h.blankHeaderOpts,c={y:i.pad.t,yPad:0,x:i.pad.l,xPad:0,index:0},u={width:o.headerWidth,height:o.headerHeight};a.call(drawItem,i,l,e).call(setItemPosition,i,c,u);var d=Lib$p.ensureSingle(t,"text",constants$h.headerArrowClassName,(function(e){e.attr("text-anchor","end").call(Drawing$5.font,i.font).text(constants$h.arrowSymbol[i.direction])}));d.attr({x:o.headerWidth-constants$h.arrowOffsetX+i.pad.l,y:o.headerHeight/2+constants$h.textOffsetY+i.pad.t}),a.on("click",(function(){r.call(removeAllButtons,String(isActive$1(r,i)?-1:i._index)),drawButtons(e,t,r,n,i)})),a.on("mouseover",(function(){a.call(styleOnMouseOver)})),a.on("mouseout",(function(){a.call(styleOnMouseOut,i)})),Drawing$5.setTranslate(t,o.lx,o.ly)}function drawButtons(e,t,r,n,i){r||(r=t).attr("pointer-events","all");var a=isFolded(r)&&"buttons"!==i.type?[]:i.buttons,o="dropdown"===i.type?constants$h.dropdownButtonClassName:constants$h.buttonClassName,s=r.selectAll("g."+o).data(Lib$p.filterVisible(a)),l=s.enter().append("g").classed(o,!0),c=s.exit();"dropdown"===i.type?(l.attr("opacity","0").transition().attr("opacity","1"),c.transition().attr("opacity","0").remove()):c.remove();var u=0,d=0,h=i._dims,g=-1!==["up","down"].indexOf(i.direction);"dropdown"===i.type&&(g?d=h.headerHeight+constants$h.gapButtonHeader:u=h.headerWidth+constants$h.gapButtonHeader),"dropdown"===i.type&&"up"===i.direction&&(d=-constants$h.gapButtonHeader+constants$h.gapButton-h.openHeight),"dropdown"===i.type&&"left"===i.direction&&(u=-constants$h.gapButtonHeader+constants$h.gapButton-h.openWidth);var p={x:h.lx+u+i.pad.l,y:h.ly+d+i.pad.t,yPad:constants$h.gapButton,xPad:constants$h.gapButton,index:0},f={l:p.x+i.borderwidth,t:p.y+i.borderwidth};s.each((function(a,o){var l=d3$6.select(this);l.call(drawItem,i,a,e).call(setItemPosition,i,p),l.on("click",(function(){d3$6.event.defaultPrevented||(a.execute&&(a.args2&&i.active===o?(setActive$1(e,i,a,t,r,n,-1),Plots$3.executeAPICommand(e,a.method,a.args2)):(setActive$1(e,i,a,t,r,n,o),Plots$3.executeAPICommand(e,a.method,a.args))),e.emit("plotly_buttonclicked",{menu:i,button:a,active:i.active}))})),l.on("mouseover",(function(){l.call(styleOnMouseOver)})),l.on("mouseout",(function(){l.call(styleOnMouseOut,i),s.call(styleButtons,i)}))})),s.call(styleButtons,i),g?(f.w=Math.max(h.openWidth,h.headerWidth),f.h=p.y-f.t):(f.w=p.x-f.l,f.h=Math.max(h.openHeight,h.headerHeight)),f.direction=i.direction,n&&(s.size()?drawScrollBox(e,t,r,n,i,f):hideScrollBox(n))}function drawScrollBox(e,t,r,n,i,a){var o,s,l,c=i.direction,u="up"===c||"down"===c,d=i._dims,h=i.active;if(u)for(s=0,l=0;l<h;l++)s+=d.heights[l]+constants$h.gapButton;else for(o=0,l=0;l<h;l++)o+=d.widths[l]+constants$h.gapButton;n.enable(a,o,s),n.hbar&&n.hbar.attr("opacity","0").transition().attr("opacity","1"),n.vbar&&n.vbar.attr("opacity","0").transition().attr("opacity","1")}function hideScrollBox(e){var t=!!e.hbar,r=!!e.vbar;t&&e.hbar.transition().attr("opacity","0").each("end",(function(){t=!1,r||e.disable()})),r&&e.vbar.transition().attr("opacity","0").each("end",(function(){r=!1,t||e.disable()}))}function drawItem(e,t,r,n){e.call(drawItemRect,t).call(drawItemText,t,r,n)}function drawItemRect(e,t){var r=Lib$p.ensureSingle(e,"rect",constants$h.itemRectClassName,(function(e){e.attr({rx:constants$h.rx,ry:constants$h.ry,"shape-rendering":"crispEdges"})}));r.call(Color$b.stroke,t.bordercolor).call(Color$b.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function drawItemText(e,t,r,n){var i=Lib$p.ensureSingle(e,"text",constants$h.itemTextClassName,(function(e){e.attr({"text-anchor":"start","data-notex":1})})),a=r.label,o=n._fullLayout._meta;o&&(a=Lib$p.templateString(a,o)),i.call(Drawing$5.font,t.font).text(a).call(svgTextUtils$5.convertToTspans,n)}function styleButtons(e,t){var r=t.active;e.each((function(e,n){var i=d3$6.select(this);n===r&&t.showactive&&i.select("rect."+constants$h.itemRectClassName).call(Color$b.fill,constants$h.activeColor)}))}function styleOnMouseOver(e){e.select("rect."+constants$h.itemRectClassName).call(Color$b.fill,constants$h.hoverColor)}function styleOnMouseOut(e,t){e.select("rect."+constants$h.itemRectClassName).call(Color$b.fill,t.bgcolor)}function findDimensions$1(e,t){var r=t._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},n=Drawing$5.tester.selectAll("g."+constants$h.dropdownButtonClassName).data(Lib$p.filterVisible(t.buttons));n.enter().append("g").classed(constants$h.dropdownButtonClassName,!0);var i=-1!==["up","down"].indexOf(t.direction);n.each((function(n,a){var o=d3$6.select(this);o.call(drawItem,t,n,e);var s=o.select("."+constants$h.itemTextClassName),l=s.node()&&Drawing$5.bBox(s.node()).width,c=Math.max(l+constants$h.textPadX,constants$h.minWidth),u=t.font.size*LINE_SPACING$4,d=svgTextUtils$5.lineCount(s),h=Math.max(u*d,constants$h.minHeight)+constants$h.textOffsetY;h=Math.ceil(h),c=Math.ceil(c),r.widths[a]=c,r.heights[a]=h,r.height1=Math.max(r.height1,h),r.width1=Math.max(r.width1,c),i?(r.totalWidth=Math.max(r.totalWidth,c),r.openWidth=r.totalWidth,r.totalHeight+=h+constants$h.gapButton,r.openHeight+=h+constants$h.gapButton):(r.totalWidth+=c+constants$h.gapButton,r.openWidth+=c+constants$h.gapButton,r.totalHeight=Math.max(r.totalHeight,h),r.openHeight=r.totalHeight)})),i?r.totalHeight-=constants$h.gapButton:r.totalWidth-=constants$h.gapButton,r.headerWidth=r.width1+constants$h.arrowPadX,r.headerHeight=r.height1,"dropdown"===t.type&&(i?(r.width1+=constants$h.arrowPadX,r.totalHeight=r.height1):r.totalWidth=r.width1,r.totalWidth+=constants$h.arrowPadX),n.remove();var a=r.totalWidth+t.pad.l+t.pad.r,o=r.totalHeight+t.pad.t+t.pad.b,s=e._fullLayout._size;r.lx=s.l+s.w*t.x,r.ly=s.t+s.h*(1-t.y);var l="left";Lib$p.isRightAnchor(t)&&(r.lx-=a,l="right"),Lib$p.isCenterAnchor(t)&&(r.lx-=a/2,l="center");var c="top";Lib$p.isBottomAnchor(t)&&(r.ly-=o,c="bottom"),Lib$p.isMiddleAnchor(t)&&(r.ly-=o/2,c="middle"),r.totalWidth=Math.ceil(r.totalWidth),r.totalHeight=Math.ceil(r.totalHeight),r.lx=Math.round(r.lx),r.ly=Math.round(r.ly),Plots$3.autoMargin(e,autoMarginId$1(t),{x:t.x,y:t.y,l:a*({right:1,center:.5}[l]||0),r:a*({left:1,center:.5}[l]||0),b:o*({top:1,middle:.5}[c]||0),t:o*({bottom:1,middle:.5}[c]||0)})}function autoMarginId$1(e){return constants$h.autoMarginIdRoot+e._index}function setItemPosition(e,t,r,n){n=n||{};var i=e.select("."+constants$h.itemRectClassName),a=e.select("."+constants$h.itemTextClassName),o=t.borderwidth,s=r.index,l=t._dims;Drawing$5.setTranslate(e,o+r.x,o+r.y);var c=-1!==["up","down"].indexOf(t.direction),u=n.height||(c?l.heights[s]:l.height1);i.attr({x:0,y:0,width:n.width||(c?l.width1:l.widths[s]),height:u});var d=t.font.size*LINE_SPACING$4,h=(svgTextUtils$5.lineCount(a)-1)*d/2;svgTextUtils$5.positionText(a,constants$h.textOffsetX,u/2-h+constants$h.textOffsetY),c?r.y+=l.heights[s]+r.yPad:r.x+=l.widths[s]+r.xPad,r.index++}function removeAllButtons(e,t){e.attr(constants$h.menuIndexAttrName,t||"-1").selectAll("g."+constants$h.dropdownButtonClassName).remove()}var constants$g=constants$j,updatemenus={moduleType:"component",name:constants$g.name,layoutAttributes:attributes$l,supplyLayoutDefaults:defaults$9,draw:draw$4},constants$f={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0},fontAttrs$3=requireFont_attributes(),padAttrs=pad_attributes,extendDeepAll=extend.extendDeepAll,overrideAll$5=edit_types.overrideAll,animationAttrs=animation_attributes,templatedArray$1=plot_template.templatedArray,constants$e=constants$f,stepsAttrs=templatedArray$1("step",{visible:{valType:"boolean",dflt:!0,description:["Determines whether or not this step is included in the slider."].join(" ")},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",description:["Sets the Plotly method to be called when the slider value is changed.","If the `skip` method is used, the API slider will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","slider events manually via JavaScript."].join(" ")},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on slide."].join(" ")},label:{valType:"string",description:"Sets the text label to appear on the slider"},value:{valType:"string",description:["Sets the value of the slider step, used to refer to the step programatically.","Defaults to the slider label if not provided."].join(" ")},execute:{valType:"boolean",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_sliderchange` method and executing the API command manually without losing","the benefit of the slider automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}}),attributes$j=overrideAll$5(templatedArray$1("slider",{visible:{valType:"boolean",dflt:!0,description:["Determines whether or not the slider is visible."].join(" ")},active:{valType:"number",min:0,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},steps:stepsAttrs,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction",description:["Determines whether this slider length","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,description:["Sets the length of the slider","This measure excludes the padding of both ends.","That is, the slider's length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",min:-2,max:3,dflt:0,description:"Sets the x position (in normalized coordinates) of the slider."},pad:extendDeepAll(padAttrs({editType:"arraydraw"}),{description:"Set the padding of the slider component along each side."},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",description:["Sets the slider's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:0,description:"Sets the y position (in normalized coordinates) of the slider."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",description:["Sets the slider's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},transition:{duration:{valType:"number",min:0,dflt:150,description:"Sets the duration of the slider transition"},easing:{valType:"enumerated",values:animationAttrs.transition.easing.values,dflt:"cubic-in-out",description:"Sets the easing function of the slider transition"}},currentvalue:{visible:{valType:"boolean",dflt:!0,description:["Shows the currently-selected value above the slider."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",description:["The alignment of the value readout relative to the length of the slider."].join(" ")},offset:{valType:"number",dflt:10,description:["The amount of space, in pixels, between the current value label","and the slider."].join(" ")},prefix:{valType:"string",description:"When currentvalue.visible is true, this sets the prefix of the label."},suffix:{valType:"string",description:"When currentvalue.visible is true, this sets the suffix of the label."},font:fontAttrs$3({description:"Sets the font of the current value label text."})},font:fontAttrs$3({description:"Sets the font of the slider step labels."}),activebgcolor:{valType:"color",dflt:constants$e.gripBgActiveColor,description:["Sets the background color of the slider grip","while dragging."].join(" ")},bgcolor:{valType:"color",dflt:constants$e.railBgColor,description:"Sets the background color of the slider."},bordercolor:{valType:"color",dflt:constants$e.railBorderColor,description:"Sets the color of the border enclosing the slider."},borderwidth:{valType:"number",min:0,dflt:constants$e.railBorderWidth,description:"Sets the width (in px) of the border enclosing the slider."},ticklen:{valType:"number",min:0,dflt:constants$e.tickLength,description:"Sets the length in pixels of step tick marks"},tickcolor:{valType:"color",dflt:constants$e.tickColor,description:"Sets the color of the border enclosing the slider."},tickwidth:{valType:"number",min:0,dflt:1,description:"Sets the tick width (in px)."},minorticklen:{valType:"number",min:0,dflt:constants$e.minorTickLength,description:"Sets the length in pixels of minor step tick marks"}}),"arraydraw","from-root"),Lib$o=libExports,handleArrayContainerDefaults$1=array_container_defaults,attributes$i=attributes$j,constants$d=constants$f,name$2=constants$d.name,stepAttrs=attributes$i.steps,defaults$8=function(e,t){handleArrayContainerDefaults$1(e,t,{name:name$2,handleItemDefaults:sliderDefaults})};function sliderDefaults(e,t,r){function n(r,n){return Lib$o.coerce(e,t,attributes$i,r,n)}for(var i=handleArrayContainerDefaults$1(e,t,{name:"steps",handleItemDefaults:stepDefaults}),a=0,o=0;o<i.length;o++)i[o].visible&&a++;if(a<2?t.visible=!1:n("visible")){t._stepCount=a;var s=t._visibleSteps=Lib$o.filterVisible(i);(i[n("active")]||{}).visible||(t.active=s[0]._index),n("x"),n("y"),Lib$o.noneOrAll(e,t,["x","y"]),n("xanchor"),n("yanchor"),n("len"),n("lenmode"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),Lib$o.coerceFont(n,"font",r.font),n("currentvalue.visible")&&(n("currentvalue.xanchor"),n("currentvalue.prefix"),n("currentvalue.suffix"),n("currentvalue.offset"),Lib$o.coerceFont(n,"currentvalue.font",t.font)),n("transition.duration"),n("transition.easing"),n("bgcolor"),n("activebgcolor"),n("bordercolor"),n("borderwidth"),n("ticklen"),n("tickwidth"),n("tickcolor"),n("minorticklen")}}function stepDefaults(e,t){function r(r,n){return Lib$o.coerce(e,t,stepAttrs,r,n)}if("skip"===e.method||Array.isArray(e.args)?r("visible"):t.visible=!1){r("method"),r("args");var n=r("label","step-"+t._index);r("value",n),r("execute")}}var d3$5=d3Exports,Plots$2=plotsExports,Color$a=colorExports,Drawing$4=drawingExports,Lib$n=libExports,strTranslate$2=Lib$n.strTranslate,svgTextUtils$4=svg_text_utils,arrayEditor=plot_template.arrayEditor,constants$c=constants$f,alignmentConstants$2=alignment$1,LINE_SPACING$3=alignmentConstants$2.LINE_SPACING,FROM_TL$2=alignmentConstants$2.FROM_TL,FROM_BR$2=alignmentConstants$2.FROM_BR,draw$3=function(e){var t=e._context.staticPlot,r=e._fullLayout,n=makeSliderData(r,e),i=r._infolayer.selectAll("g."+constants$c.containerClassName).data(n.length>0?[0]:[]);function a(t){t._commandObserver&&(t._commandObserver.remove(),delete t._commandObserver),Plots$2.autoMargin(e,autoMarginId(t))}if(i.enter().append("g").classed(constants$c.containerClassName,!0).style("cursor",t?null:"ew-resize"),i.exit().each((function(){d3$5.select(this).selectAll("g."+constants$c.groupClassName).each(a)})).remove(),0!==n.length){var o=i.selectAll("g."+constants$c.groupClassName).data(n,keyFunction);o.enter().append("g").classed(constants$c.groupClassName,!0),o.exit().each(a).remove();for(var s=0;s<n.length;s++){var l=n[s];findDimensions(e,l)}o.each((function(t){var r=d3$5.select(this);computeLabelSteps(t),Plots$2.manageCommandObserver(e,t,t._visibleSteps,(function(t){var n=r.data()[0];n.active!==t.index&&(n._dragging||setActive(e,r,n,t.index,!1,!0))})),drawSlider(e,d3$5.select(this),t)}))}};function autoMarginId(e){return constants$c.autoMarginIdRoot+e._index}function makeSliderData(e,t){for(var r=e[constants$c.name],n=[],i=0;i<r.length;i++){var a=r[i];a.visible&&(a._gd=t,n.push(a))}return n}function keyFunction(e){return e._index}function findDimensions(e,t){var r=Drawing$4.tester.selectAll("g."+constants$c.labelGroupClass).data(t._visibleSteps);r.enter().append("g").classed(constants$c.labelGroupClass,!0);var n=0,i=0;r.each((function(e){var r=drawLabel(d3$5.select(this),{step:e},t).node();if(r){var a=Drawing$4.bBox(r);i=Math.max(i,a.height),n=Math.max(n,a.width)}})),r.remove();var a=t._dims={};a.inputAreaWidth=Math.max(constants$c.railWidth,constants$c.gripHeight);var o=e._fullLayout._size;a.lx=o.l+o.w*t.x,a.ly=o.t+o.h*(1-t.y),"fraction"===t.lenmode?a.outerLength=Math.round(o.w*t.len):a.outerLength=t.len,a.inputAreaStart=0,a.inputAreaLength=Math.round(a.outerLength-t.pad.l-t.pad.r);var s=(a.inputAreaLength-2*constants$c.stepInset)/(t._stepCount-1),l=n+constants$c.labelPadding;if(a.labelStride=Math.max(1,Math.ceil(l/s)),a.labelHeight=i,a.currentValueMaxWidth=0,a.currentValueHeight=0,a.currentValueTotalHeight=0,a.currentValueMaxLines=1,t.currentvalue.visible){var c=Drawing$4.tester.append("g");r.each((function(e){var r=drawCurrentValue(c,t,e.label),n=r.node()&&Drawing$4.bBox(r.node())||{width:0,height:0},i=svgTextUtils$4.lineCount(r);a.currentValueMaxWidth=Math.max(a.currentValueMaxWidth,Math.ceil(n.width)),a.currentValueHeight=Math.max(a.currentValueHeight,Math.ceil(n.height)),a.currentValueMaxLines=Math.max(a.currentValueMaxLines,i)})),a.currentValueTotalHeight=a.currentValueHeight+t.currentvalue.offset,c.remove()}a.height=a.currentValueTotalHeight+constants$c.tickOffset+t.ticklen+constants$c.labelOffset+a.labelHeight+t.pad.t+t.pad.b;var u="left";Lib$n.isRightAnchor(t)&&(a.lx-=a.outerLength,u="right"),Lib$n.isCenterAnchor(t)&&(a.lx-=a.outerLength/2,u="center");var d="top";Lib$n.isBottomAnchor(t)&&(a.ly-=a.height,d="bottom"),Lib$n.isMiddleAnchor(t)&&(a.ly-=a.height/2,d="middle"),a.outerLength=Math.ceil(a.outerLength),a.height=Math.ceil(a.height),a.lx=Math.round(a.lx),a.ly=Math.round(a.ly);var h={y:t.y,b:a.height*FROM_BR$2[d],t:a.height*FROM_TL$2[d]};"fraction"===t.lenmode?(h.l=0,h.xl=t.x-t.len*FROM_TL$2[u],h.r=0,h.xr=t.x+t.len*FROM_BR$2[u]):(h.x=t.x,h.l=a.outerLength*FROM_TL$2[u],h.r=a.outerLength*FROM_BR$2[u]),Plots$2.autoMargin(e,autoMarginId(t),h)}function drawSlider(e,t,r){(r.steps[r.active]||{}).visible||(r.active=r._visibleSteps[0]._index),t.call(drawCurrentValue,r).call(drawRail,r).call(drawLabelGroup,r).call(drawTicks,r).call(drawTouchRect,e,r).call(drawGrip,e,r);var n=r._dims;Drawing$4.setTranslate(t,n.lx+r.pad.l,n.ly+r.pad.t),t.call(setGripPosition,r,!1),t.call(drawCurrentValue,r)}function drawCurrentValue(e,t,r){if(t.currentvalue.visible){var n,i,a=t._dims;switch(t.currentvalue.xanchor){case"right":n=a.inputAreaLength-constants$c.currentValueInset-a.currentValueMaxWidth,i="left";break;case"center":n=.5*a.inputAreaLength,i="middle";break;default:n=constants$c.currentValueInset,i="left"}var o=Lib$n.ensureSingle(e,"text",constants$c.labelClass,(function(e){e.attr({"text-anchor":i,"data-notex":1})})),s=t.currentvalue.prefix?t.currentvalue.prefix:"";if("string"==typeof r)s+=r;else{var l=t.steps[t.active].label,c=t._gd._fullLayout._meta;c&&(l=Lib$n.templateString(l,c)),s+=l}t.currentvalue.suffix&&(s+=t.currentvalue.suffix),o.call(Drawing$4.font,t.currentvalue.font).text(s).call(svgTextUtils$4.convertToTspans,t._gd);var u=svgTextUtils$4.lineCount(o),d=(a.currentValueMaxLines+1-u)*t.currentvalue.font.size*LINE_SPACING$3;return svgTextUtils$4.positionText(o,n,d),o}}function drawGrip(e,t,r){var n=Lib$n.ensureSingle(e,"rect",constants$c.gripRectClass,(function(n){n.call(attachGripEvents,t,e,r).style("pointer-events","all")}));n.attr({width:constants$c.gripWidth,height:constants$c.gripHeight,rx:constants$c.gripRadius,ry:constants$c.gripRadius}).call(Color$a.stroke,r.bordercolor).call(Color$a.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function drawLabel(e,t,r){var n=Lib$n.ensureSingle(e,"text",constants$c.labelClass,(function(e){e.attr({"text-anchor":"middle","data-notex":1})})),i=t.step.label,a=r._gd._fullLayout._meta;return a&&(i=Lib$n.templateString(i,a)),n.call(Drawing$4.font,r.font).text(i).call(svgTextUtils$4.convertToTspans,r._gd),n}function drawLabelGroup(e,t){var r=Lib$n.ensureSingle(e,"g",constants$c.labelsClass),n=t._dims,i=r.selectAll("g."+constants$c.labelGroupClass).data(n.labelSteps);i.enter().append("g").classed(constants$c.labelGroupClass,!0),i.exit().remove(),i.each((function(e){var r=d3$5.select(this);r.call(drawLabel,e,t),Drawing$4.setTranslate(r,normalizedValueToPosition(t,e.fraction),constants$c.tickOffset+t.ticklen+t.font.size*LINE_SPACING$3+constants$c.labelOffset+n.currentValueTotalHeight)}))}function handleInput(e,t,r,n,i){var a=Math.round(n*(r._stepCount-1)),o=r._visibleSteps[a]._index;o!==r.active&&setActive(e,t,r,o,!0,i)}function setActive(e,t,r,n,i,a){var o=r.active;r.active=n,arrayEditor(e.layout,constants$c.name,r).applyUpdate("active",n);var s=r.steps[r.active];t.call(setGripPosition,r,a),t.call(drawCurrentValue,r),e.emit("plotly_sliderchange",{slider:r,step:r.steps[r.active],interaction:i,previousActive:o}),s&&s.method&&i&&(t._nextMethod?(t._nextMethod.step=s,t._nextMethod.doCallback=i,t._nextMethod.doTransition=a):(t._nextMethod={step:s,doCallback:i,doTransition:a},t._nextMethodRaf=window.requestAnimationFrame((function(){var r=t._nextMethod.step;r.method&&(r.execute&&Plots$2.executeAPICommand(e,r.method,r.args),t._nextMethod=null,t._nextMethodRaf=null)}))))}function attachGripEvents(e,t,r){if(!t._context.staticPlot){var n=r.node(),i=d3$5.select(t);e.on("mousedown",o),e.on("touchstart",o)}function a(){return r.data()[0]}function o(){var e=a();t.emit("plotly_sliderstart",{slider:e});var o=r.select("."+constants$c.gripRectClass);d3$5.event.stopPropagation(),d3$5.event.preventDefault(),o.call(Color$a.fill,e.activebgcolor);var s=positionToNormalizedValue(e,d3$5.mouse(n)[0]);function l(){var e=a(),i=positionToNormalizedValue(e,d3$5.mouse(n)[0]);handleInput(t,r,e,i,!1)}function c(){var e=a();e._dragging=!1,o.call(Color$a.fill,e.bgcolor),i.on("mouseup",null),i.on("mousemove",null),i.on("touchend",null),i.on("touchmove",null),t.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})}handleInput(t,r,e,s,!0),e._dragging=!0,i.on("mousemove",l),i.on("touchmove",l),i.on("mouseup",c),i.on("touchend",c)}}function drawTicks(e,t){var r=e.selectAll("rect."+constants$c.tickRectClass).data(t._visibleSteps),n=t._dims;r.enter().append("rect").classed(constants$c.tickRectClass,!0),r.exit().remove(),r.attr({width:t.tickwidth+"px","shape-rendering":"crispEdges"}),r.each((function(e,r){var i=r%n.labelStride==0,a=d3$5.select(this);a.attr({height:i?t.ticklen:t.minorticklen}).call(Color$a.fill,t.tickcolor),Drawing$4.setTranslate(a,normalizedValueToPosition(t,r/(t._stepCount-1))-.5*t.tickwidth,(i?constants$c.tickOffset:constants$c.minorTickOffset)+n.currentValueTotalHeight)}))}function computeLabelSteps(e){var t=e._dims;t.labelSteps=[];for(var r=e._stepCount,n=0;n<r;n+=t.labelStride)t.labelSteps.push({fraction:n/(r-1),step:e._visibleSteps[n]})}function setGripPosition(e,t,r){for(var n=e.select("rect."+constants$c.gripRectClass),i=0,a=0;a<t._stepCount;a++)if(t._visibleSteps[a]._index===t.active){i=a;break}var o=normalizedValueToPosition(t,i/(t._stepCount-1));if(!t._invokingCommand){var s=n;r&&t.transition.duration>0&&(s=s.transition().duration(t.transition.duration).ease(t.transition.easing)),s.attr("transform",strTranslate$2(o-.5*constants$c.gripWidth,t._dims.currentValueTotalHeight))}}function normalizedValueToPosition(e,t){var r=e._dims;return r.inputAreaStart+constants$c.stepInset+(r.inputAreaLength-2*constants$c.stepInset)*Math.min(1,Math.max(0,t))}function positionToNormalizedValue(e,t){var r=e._dims;return Math.min(1,Math.max(0,(t-constants$c.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*constants$c.stepInset-2*r.inputAreaStart)))}function drawTouchRect(e,t,r){var n=r._dims,i=Lib$n.ensureSingle(e,"rect",constants$c.railTouchRectClass,(function(n){n.call(attachGripEvents,t,e,r).style("pointer-events","all")}));i.attr({width:n.inputAreaLength,height:Math.max(n.inputAreaWidth,constants$c.tickOffset+r.ticklen+n.labelHeight)}).call(Color$a.fill,r.bgcolor).attr("opacity",0),Drawing$4.setTranslate(i,0,n.currentValueTotalHeight)}function drawRail(e,t){var r=t._dims,n=r.inputAreaLength-2*constants$c.railInset,i=Lib$n.ensureSingle(e,"rect",constants$c.railRectClass);i.attr({width:n,height:constants$c.railWidth,rx:constants$c.railRadius,ry:constants$c.railRadius,"shape-rendering":"crispEdges"}).call(Color$a.stroke,t.bordercolor).call(Color$a.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),Drawing$4.setTranslate(i,constants$c.railInset,.5*(r.inputAreaWidth-constants$c.railWidth)+r.currentValueTotalHeight)}var defaults$7,hasRequiredDefaults$2,calc_autorange,hasRequiredCalc_autorange,draw$2,hasRequiredDraw,constants$b=constants$f,sliders={moduleType:"component",name:constants$b.name,layoutAttributes:attributes$j,supplyLayoutDefaults:defaults$8,draw:draw$3},colorAttributes$1=attributes$L,attributes$h={bgcolor:{valType:"color",dflt:colorAttributes$1.background,editType:"plot",description:"Sets the background color of the range slider."},bordercolor:{valType:"color",dflt:colorAttributes$1.defaultLine,editType:"plot",description:"Sets the border color of the range slider."},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot",description:"Sets the border width of the range slider."},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range slider range is","computed in relation to the input data.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1},description:["Sets the range of the range slider.","If not set, defaults to the full xaxis range.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot",description:["The height of the range slider as a fraction of the","total plot area height."].join(" ")},visible:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not the range slider will be visible.","If visible, perpendicular axes will be set to `fixedrange`"].join(" ")},editType:"calc"},oppaxis_attributes={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc",description:["Determines whether or not the range of this axis in","the rangeslider use the same value than in the main plot","when zooming in/out.","If *auto*, the autorange will be used.","If *fixed*, the `range` is used.","If *match*, the current range of the corresponding y-axis on the main subplot is used."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot",description:["Sets the range of this axis for the rangeslider."].join(" ")},editType:"calc"},helpers$6={},constants$a={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15},axisIDs=axis_ids,svgTextUtils$3=svg_text_utils,constants$9=constants$a,LINE_SPACING$2=alignment$1.LINE_SPACING,name$1=constants$9.name;function isVisible(e){var t=e&&e[name$1];return t&&t.visible}function requireDefaults$2(){if(hasRequiredDefaults$2)return defaults$7;hasRequiredDefaults$2=1;var e=libExports,t=plot_template,r=axis_ids,n=attributes$h,i=oppaxis_attributes;return defaults$7=function(a,o,s){var l=a[s],c=o[s];if(l.rangeslider||o._requestRangeslider[c._id]){e.isPlainObject(l.rangeslider)||(l.rangeslider={});var u,d,h=l.rangeslider,g=t.newContainer(c,"rangeslider");if(B("visible")){B("bgcolor",o.plot_bgcolor),B("bordercolor"),B("borderwidth"),B("thickness"),B("autorange",!c.isValidRange(h.range)),B("range");var p=o._subplots;if(p)for(var f=p.cartesian.filter((function(e){return e.substr(0,e.indexOf("y"))===r.name2id(s)})).map((function(e){return e.substr(e.indexOf("y"),e.length)})),m=e.simpleMap(f,r.id2name),y=0;y<m.length;y++){var b=m[y];u=h[b]||{},d=t.newContainer(g,b,"yaxis");var v,x=o[b];u.range&&x.isValidRange(u.range)&&(v="fixed"),"match"!==I("rangemode",v)&&I("range",x.range.slice())}g._input=h}}function B(t,r){return e.coerce(h,g,n,t,r)}function I(t,r){return e.coerce(u,d,i,t,r)}},defaults$7}function requireCalc_autorange(){if(hasRequiredCalc_autorange)return calc_autorange;hasRequiredCalc_autorange=1;var e=axis_ids.list,t=requireAutorange().getAutoRange,r=constants$a;return calc_autorange=function(n){for(var i=e(n,"x",!0),a=0;a<i.length;a++){var o=i[a],s=o[r.name];s&&s.visible&&s.autorange&&(s._input.autorange=!0,s._input.range=s.range=t(n,o))}},calc_autorange}function requireDraw(){if(hasRequiredDraw)return draw$2;hasRequiredDraw=1;var e=d3Exports,t=registry,r=plotsExports,n=libExports,i=n.strTranslate,a=drawingExports,o=colorExports,s=titles,l=cartesian,c=axis_ids,u=dragelementExports,d=setcursor,h=constants$a;function g(e,t,r,s){var l=n.ensureSingle(e,"rect",h.bgClassName,(function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})})),c=s.borderwidth%2==0?s.borderwidth:s.borderwidth-1,u=-s._offsetShift,d=a.crispRound(t,s.borderwidth);l.attr({width:s._width+c,height:s._height+c,transform:i(u,u),"stroke-width":d}).call(o.stroke,s.bordercolor).call(o.fill,s.bgcolor)}function p(e,t,r,i){var a=t._fullLayout,o=n.ensureSingleById(a._topdefs,"clipPath",i._clipId,(function(e){e.append("rect").attr({x:0,y:0})}));o.select("rect").attr({width:i._width,height:i._height})}function f(t,i,o,s){var u,d=i.calcdata,g=t.selectAll("g."+h.rangePlotClassName).data(o._subplotsWith,n.identity);g.enter().append("g").attr("class",(function(e){return h.rangePlotClassName+" "+e})).call(a.setClipUrl,s._clipId,i),g.order(),g.exit().remove(),g.each((function(t,n){var a=e.select(this),h=0===n,g=c.getFromId(i,t,"y"),p=g._name,f=s[p],m={data:[],layout:{xaxis:{type:o.type,domain:[0,1],range:s.range.slice(),calendar:o.calendar},width:s._width,height:s._height,margin:{t:0,b:0,l:0,r:0}},_context:i._context};o.rangebreaks&&(m.layout.xaxis.rangebreaks=o.rangebreaks),m.layout[p]={type:g.type,domain:[0,1],range:"match"!==f.rangemode?f.range.slice():g.range.slice(),calendar:g.calendar},g.rangebreaks&&(m.layout[p].rangebreaks=g.rangebreaks),r.supplyDefaults(m);var y=m._fullLayout.xaxis,b=m._fullLayout[p];y.clearCalc(),y.setScale(),b.clearCalc(),b.setScale();var v={id:t,plotgroup:a,xaxis:y,yaxis:b,isRangePlot:!0};h?u=v:(v.mainplot="xy",v.mainplotinfo=u),l.rangePlot(i,v,function(e,t){for(var r=[],n=0;n<e.length;n++){var i=e[n],a=i[0].trace;a.xaxis+a.yaxis===t&&r.push(i)}return r}(d,t))}))}function m(e,t,r,i,a){var s=n.ensureSingle(e,"rect",h.maskMinClassName,(function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})}));s.attr("height",i._height).call(o.fill,h.maskColor);var l=n.ensureSingle(e,"rect",h.maskMaxClassName,(function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}));if(l.attr("height",i._height).call(o.fill,h.maskColor),"match"!==a.rangemode){var c=n.ensureSingle(e,"rect",h.maskMinOppAxisClassName,(function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}));c.attr("width",i._width).call(o.fill,h.maskOppAxisColor);var u=n.ensureSingle(e,"rect",h.maskMaxOppAxisClassName,(function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}));u.attr("width",i._width).style("border-top",h.maskOppBorder).call(o.fill,h.maskOppAxisColor)}}function y(e,t,r,i){if(!t._context.staticPlot){var a=n.ensureSingle(e,"rect",h.slideBoxClassName,(function(e){e.attr({y:0,cursor:h.slideBoxCursor,"shape-rendering":"crispEdges"})}));a.attr({height:i._height,fill:h.slideBoxFill})}}function b(e,t,r,i){var a=n.ensureSingle(e,"g",h.grabberMinClassName),s=n.ensureSingle(e,"g",h.grabberMaxClassName),l={x:0,width:h.handleWidth,rx:h.handleRadius,fill:o.background,stroke:o.defaultLine,"stroke-width":h.handleStrokeWidth,"shape-rendering":"crispEdges"},c={y:Math.round(i._height/4),height:Math.round(i._height/2)},u=n.ensureSingle(a,"rect",h.handleMinClassName,(function(e){e.attr(l)}));u.attr(c);var d=n.ensureSingle(s,"rect",h.handleMaxClassName,(function(e){e.attr(l)}));d.attr(c);var g={width:h.grabAreaWidth,x:0,y:0,fill:h.grabAreaFill,cursor:t._context.staticPlot?void 0:h.grabAreaCursor},p=n.ensureSingle(a,"rect",h.grabAreaMinClassName,(function(e){e.attr(g)}));p.attr("height",i._height);var f=n.ensureSingle(s,"rect",h.grabAreaMaxClassName,(function(e){e.attr(g)}));f.attr("height",i._height)}return draw$2=function(r){for(var a=r._fullLayout,o=a._rangeSliderData,l=0;l<o.length;l++){var v=o[l][h.name];v._clipId=v._id+"-"+a._uid}var x=a._infolayer.selectAll("g."+h.containerClassName).data(o,(function(e){return e._name}));x.exit().each((function(e){var t=e[h.name];a._topdefs.select("#"+t._clipId).remove()})).remove(),0!==o.length&&(x.enter().append("g").classed(h.containerClassName,!0).attr("pointer-events","all"),x.each((function(o){var l=e.select(this),v=o[h.name],x=a[c.id2name(o.anchor)],B=v[c.id2name(o.anchor)];if(v.range){var I,F=n.simpleMap(v.range,o.r2l),A=n.simpleMap(o.range,o.r2l);I=A[0]<A[1]?[Math.min(F[0],A[0]),Math.max(F[1],A[1])]:[Math.max(F[0],A[0]),Math.min(F[1],A[1])],v.range=v._input.range=n.simpleMap(I,o.l2r)}o.cleanRange("rangeslider.range");var C=a._size,w=o.domain;v._width=C.w*(w[1]-w[0]);var Q=Math.round(C.l+C.w*w[0]),U=Math.round(C.t+C.h*(1-o._counterDomainMin)+("bottom"===o.side?o._depth:0)+v._offsetShift+h.extraPad);l.attr("transform",i(Q,U)),v._rl=n.simpleMap(v.range,o.r2l);var S=v._rl[0],E=v._rl[1],L=E-S;if(v.p2d=function(e){return e/v._width*L+S},v.d2p=function(e){return(e-S)/L*v._width},o.rangebreaks){var _=o.locateBreaks(S,E);if(_.length){var T,R,$=0;for(T=0;T<_.length;T++)$+=(R=_[T]).max-R.min;var k=v._width/(E-S-$),N=[-k*S];for(T=0;T<_.length;T++)R=_[T],N.push(N[N.length-1]-k*(R.max-R.min));for(v.d2p=function(e){for(var t=N[0],r=0;r<_.length;r++){var n=_[r];if(e>=n.max)t=N[r+1];else if(e<n.min)break}return t+k*e},T=0;T<_.length;T++)(R=_[T]).pmin=v.d2p(R.min),R.pmax=v.d2p(R.max);v.p2d=function(e){for(var t=N[0],r=0;r<_.length;r++){var n=_[r];if(e>=n.pmax)t=N[r+1];else if(e<n.pmin)break}return(e-t)/k}}}if("match"!==B.rangemode){var G=x.r2l(B.range[0]),M=x.r2l(B.range[1])-G;v.d2pOppAxis=function(e){return(e-G)/M*v._height}}l.call(g,r,o,v).call(p,r,o,v).call(f,r,o,v).call(m,r,o,v,B).call(y,r,o,v).call(b,r,o,v),function(r,i,a,o){if(i._context.staticPlot)return;var s=r.select("rect."+h.slideBoxClassName).node(),l=r.select("rect."+h.grabAreaMinClassName).node(),c=r.select("rect."+h.grabAreaMaxClassName).node();function g(){var h=e.event,g=h.target,p=h.clientX||h.touches[0].clientX,f=p-r.node().getBoundingClientRect().left,m=o.d2p(a._rl[0]),y=o.d2p(a._rl[1]),b=u.coverSlip();function v(r){var u,h,v,x=+(r.clientX||r.touches[0].clientX)-p;switch(g){case s:if(v="ew-resize",m+x>a._length||y+x<0)return;u=m+x,h=y+x;break;case l:if(v="col-resize",m+x>a._length)return;u=m+x,h=y;break;case c:if(v="col-resize",y+x<0)return;u=m,h=y+x;break;default:v="ew-resize",u=f,h=f+x}if(h<u){var B=h;h=u,u=B}o._pixelMin=u,o._pixelMax=h,d(e.select(b),v),function(e,r,i,a){function o(e){return i.l2r(n.constrain(e,a._rl[0],a._rl[1]))}var s=o(a.p2d(a._pixelMin)),l=o(a.p2d(a._pixelMax));window.requestAnimationFrame((function(){t.call("_guiRelayout",r,i._name+".range",[s,l])}))}(0,i,a,o)}function x(){b.removeEventListener("mousemove",v),b.removeEventListener("mouseup",x),this.removeEventListener("touchmove",v),this.removeEventListener("touchend",x),n.removeElement(b)}this.addEventListener("touchmove",v),this.addEventListener("touchend",x),b.addEventListener("mousemove",v),b.addEventListener("mouseup",x)}r.on("mousedown",g),r.on("touchstart",g)}(l,r,o,v),function(e,t,r,a,o,s){var l=h.handleWidth/2;function c(e){return n.constrain(e,0,a._width)}function u(e){return n.constrain(e,0,a._height)}function d(e){return n.constrain(e,-l,a._width+l)}var g=c(a.d2p(r._rl[0])),p=c(a.d2p(r._rl[1]));if(e.select("rect."+h.slideBoxClassName).attr("x",g).attr("width",p-g),e.select("rect."+h.maskMinClassName).attr("width",g),e.select("rect."+h.maskMaxClassName).attr("x",p).attr("width",a._width-p),"match"!==s.rangemode){var f=a._height-u(a.d2pOppAxis(o._rl[1])),m=a._height-u(a.d2pOppAxis(o._rl[0]));e.select("rect."+h.maskMinOppAxisClassName).attr("x",g).attr("height",f).attr("width",p-g),e.select("rect."+h.maskMaxOppAxisClassName).attr("x",g).attr("y",m).attr("height",a._height-m).attr("width",p-g),e.select("rect."+h.slideBoxClassName).attr("y",f).attr("height",m-f)}var y=.5,b=Math.round(d(g-l))-y,v=Math.round(d(p-l))+y;e.select("g."+h.grabberMinClassName).attr("transform",i(b,y)),e.select("g."+h.grabberMaxClassName).attr("transform",i(v,y))}(l,0,o,v,x,B),"bottom"===o.side&&s.draw(r,o._id+"title",{propContainer:o,propName:o._name+".title",placeholder:a._dfltTitle.x,attributes:{x:o._offset+o._length/2,y:U+v._height+v._offsetShift+10+1.5*o.title.font.size,"text-anchor":"middle"}})})))},draw$2}helpers$6.isVisible=isVisible,helpers$6.makeData=function(e){var t=axisIDs.list({_fullLayout:e},"x",!0),r=e.margin,n=[];if(!e._has("gl2d"))for(var i=0;i<t.length;i++){var a=t[i];if(isVisible(a)){n.push(a);var o=a[name$1];o._id=name$1+a._id,o._height=(e.height-r.b-r.t)*o.thickness,o._offsetShift=Math.floor(o.borderwidth/2)}}e._rangeSliderData=n},helpers$6.autoMarginOpts=function(e,t){var r=e._fullLayout,n=t[name$1],i=t._id.charAt(0),a=0,o=0;"bottom"===t.side&&(a=t._depth,t.title.text!==r._dfltTitle[i]&&(o=1.5*t.title.font.size+10+n._offsetShift,o+=(t.title.text.match(svgTextUtils$3.BR_TAG_ALL)||[]).length*t.title.font.size*LINE_SPACING$2));return{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:n._height+a+Math.max(r.margin.b,o),pad:constants$9.extraPad+2*n._offsetShift}};var Lib$m=libExports,attrs$3=attributes$h,oppAxisAttrs=oppaxis_attributes,helpers$5=helpers$6,rangeslider={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:Lib$m.extendFlat({},attrs$3,{yaxis:oppAxisAttrs})}}},layoutAttributes:attributes$h,handleDefaults:requireDefaults$2(),calcAutorange:requireCalc_autorange(),draw:requireDraw(),isVisible:helpers$5.isVisible,makeData:helpers$5.makeData,autoMarginOpts:helpers$5.autoMarginOpts},fontAttrs$2=requireFont_attributes(),colorAttrs=attributes$L,templatedArray=plot_template.templatedArray,buttonAttrs=templatedArray("button",{visible:{valType:"boolean",dflt:!0,editType:"plot",description:"Determines whether or not this button is visible."},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot",description:["The unit of measurement that the `count` value will set the range by."].join(" ")},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot",description:["Sets the range update mode.","If *backward*, the range update shifts the start of range","back *count* times *step* milliseconds.","If *todate*, the range update shifts the start of range","back to the first timestamp from *count* times","*step* milliseconds back.","For example, with `step` set to *year* and `count` set to *1*","the range update shifts the start of the range back to","January 01 of the current year.","Month and year *todate* are currently available only","for the built-in (Gregorian) calendar."].join(" ")},count:{valType:"number",min:0,dflt:1,editType:"plot",description:["Sets the number of steps to take to update the range.","Use with `step` to specify the update interval."].join(" ")},label:{valType:"string",editType:"plot",description:"Sets the text label to appear on the button."},editType:"plot",description:["Sets the specifications for each buttons.","By default, a range selector comes with no buttons."].join(" ")}),attributes$g={visible:{valType:"boolean",editType:"plot",description:["Determines whether or not this range selector is visible.","Note that range selectors are only available for x axes of","`type` set to or auto-typed to *date*."].join(" ")},buttons:buttonAttrs,x:{valType:"number",min:-2,max:3,editType:"plot",description:"Sets the x position (in normalized coordinates) of the range selector."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot",description:["Sets the range selector's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,editType:"plot",description:"Sets the y position (in normalized coordinates) of the range selector."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot",description:["Sets the range selector's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},font:fontAttrs$2({editType:"plot",description:"Sets the font of the range selector button text."}),bgcolor:{valType:"color",dflt:colorAttrs.lightLine,editType:"plot",description:"Sets the background color of the range selector buttons."},activecolor:{valType:"color",editType:"plot",description:"Sets the background color of the active range selector button."},bordercolor:{valType:"color",dflt:colorAttrs.defaultLine,editType:"plot",description:"Sets the color of the border enclosing the range selector."},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot",description:"Sets the width (in px) of the border enclosing the range selector."},editType:"plot"},constants$8={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10},Lib$l=libExports,Color$9=colorExports,Template$1=plot_template,handleArrayContainerDefaults=array_container_defaults,attributes$f=attributes$g,constants$7=constants$8,defaults$6=function(e,t,r,n,i){var a=e.rangeselector||{},o=Template$1.newContainer(t,"rangeselector");function s(e,t){return Lib$l.coerce(a,o,attributes$f,e,t)}if(s("visible",handleArrayContainerDefaults(a,o,{name:"buttons",handleItemDefaults:buttonDefaults,calendar:i}).length>0)){var l=getPosDflt(t,r,n);s("x",l[0]),s("y",l[1]),Lib$l.noneOrAll(e,t,["x","y"]),s("xanchor"),s("yanchor"),Lib$l.coerceFont(s,"font",r.font);var c=s("bgcolor");s("activecolor",Color$9.contrast(c,constants$7.lightAmount,constants$7.darkAmount)),s("bordercolor"),s("borderwidth")}};function buttonDefaults(e,t,r,n){var i=n.calendar;function a(r,n){return Lib$l.coerce(e,t,attributes$f.buttons,r,n)}if(a("visible")){var o=a("step");"all"!==o&&(!i||"gregorian"===i||"month"!==o&&"year"!==o?a("stepmode"):t.stepmode="backward",a("count")),a("label")}}function getPosDflt(e,t,r){for(var n=r.filter((function(r){return t[r].anchor===e._id})),i=0,a=0;a<n.length;a++){var o=t[n[a]].domain;o&&(i=Math.max(o[1],i))}return[e.domain[0],i+constants$7.yPad]}var require$$0=getAugmentedNamespace(src$2),d3Time=require$$0,titleCase=libExports.titleCase,get_update_object=function(e,t){var r=e._name,n={};if("all"===t.step)n[r+".autorange"]=!0;else{var i=getXRange(e,t);n[r+".range[0]"]=i[0],n[r+".range[1]"]=i[1]}return n};function getXRange(e,t){var r,n=e.range,i=new Date(e.r2l(n[1])),a=t.step,o=d3Time["utc"+titleCase(a)],s=t.count;switch(t.stepmode){case"backward":r=e.l2r(+o.offset(i,-s));break;case"todate":var l=o.offset(i,-s);r=e.l2r(+o.ceil(l))}return[r,n[1]]}var d3$4=d3Exports,Registry$e=registry,Plots$1=plotsExports,Color$8=colorExports,Drawing$3=drawingExports,Lib$k=libExports,strTranslate$1=Lib$k.strTranslate,svgTextUtils$2=svg_text_utils,axisIds$1=axis_ids,alignmentConstants$1=alignment$1,LINE_SPACING$1=alignmentConstants$1.LINE_SPACING,FROM_TL$1=alignmentConstants$1.FROM_TL,FROM_BR$1=alignmentConstants$1.FROM_BR,constants$6=constants$8,getUpdateObject=get_update_object,draw$1=function(e){var t=e._fullLayout._infolayer.selectAll(".rangeselector").data(makeSelectorData(e),selectorKeyFunc);t.enter().append("g").classed("rangeselector",!0),t.exit().remove(),t.style({cursor:"pointer","pointer-events":"all"}),t.each((function(t){var r=d3$4.select(this),n=t,i=n.rangeselector,a=r.selectAll("g.button").data(Lib$k.filterVisible(i.buttons));a.enter().append("g").classed("button",!0),a.exit().remove(),a.each((function(t){var r=d3$4.select(this),a=getUpdateObject(n,t);t._isActive=isActive(n,t,a),r.call(drawButtonRect,i,t),r.call(drawButtonText,i,t,e),r.on("click",(function(){e._dragged||Registry$e.call("_guiRelayout",e,a)})),r.on("mouseover",(function(){t._isHovered=!0,r.call(drawButtonRect,i,t)})),r.on("mouseout",(function(){t._isHovered=!1,r.call(drawButtonRect,i,t)}))})),reposition(e,a,i,n._name,r)}))};function makeSelectorData(e){for(var t=axisIds$1.list(e,"x",!0),r=[],n=0;n<t.length;n++){var i=t[n];i.rangeselector&&i.rangeselector.visible&&r.push(i)}return r}function selectorKeyFunc(e){return e._id}function isActive(e,t,r){if("all"===t.step)return!0===e.autorange;var n=Object.keys(r);return e.range[0]===r[n[0]]&&e.range[1]===r[n[1]]}function drawButtonRect(e,t,r){var n=Lib$k.ensureSingle(e,"rect","selector-rect",(function(e){e.attr("shape-rendering","crispEdges")}));n.attr({rx:constants$6.rx,ry:constants$6.ry}),n.call(Color$8.stroke,t.bordercolor).call(Color$8.fill,getFillColor(t,r)).style("stroke-width",t.borderwidth+"px")}function getFillColor(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}function drawButtonText(e,t,r,n){var i=Lib$k.ensureSingle(e,"text","selector-text",(function(e){e.attr("text-anchor","middle")}));i.call(Drawing$3.font,t.font).text(getLabel(r,n._fullLayout._meta)).call((function(e){svgTextUtils$2.convertToTspans(e,n)}))}function getLabel(e,t){return e.label?t?Lib$k.templateString(e.label,t):e.label:"all"===e.step?"all":e.count+e.step.charAt(0)}function reposition(e,t,r,n,i){var a=0,o=0,s=r.borderwidth;t.each((function(){var e=d3$4.select(this).select(".selector-text"),t=r.font.size*LINE_SPACING$1,n=Math.max(t*svgTextUtils$2.lineCount(e),16)+3;o=Math.max(o,n)})),t.each((function(){var e=d3$4.select(this),t=e.select(".selector-rect"),n=e.select(".selector-text"),i=n.node()&&Drawing$3.bBox(n.node()).width,l=r.font.size*LINE_SPACING$1,c=svgTextUtils$2.lineCount(n),u=Math.max(i+10,constants$6.minButtonWidth);e.attr("transform",strTranslate$1(s+a,s)),t.attr({x:0,y:0,width:u,height:o}),svgTextUtils$2.positionText(n,u/2,o/2-(c-1)*l/2+3),a+=u+5}));var l=e._fullLayout._size,c=l.l+l.w*r.x,u=l.t+l.h*(1-r.y),d="left";Lib$k.isRightAnchor(r)&&(c-=a,d="right"),Lib$k.isCenterAnchor(r)&&(c-=a/2,d="center");var h="top";Lib$k.isBottomAnchor(r)&&(u-=o,h="bottom"),Lib$k.isMiddleAnchor(r)&&(u-=o/2,h="middle"),a=Math.ceil(a),o=Math.ceil(o),c=Math.round(c),u=Math.round(u),Plots$1.autoMargin(e,n+"-range-selector",{x:r.x,y:r.y,l:a*FROM_TL$1[d],r:a*FROM_BR$1[d],b:o*FROM_BR$1[h],t:o*FROM_TL$1[h]}),i.attr("transform",strTranslate$1(c,u))}var rangeselector={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:attributes$g}}},layoutAttributes:attributes$g,handleDefaults:defaults$6,draw:draw$1},domain={},extendFlat$8=extend.extendFlat;domain.attributes=function(e,t){t=t||{};var r={valType:"info_array",editType:(e=e||{}).editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},n=e.name?e.name+" ":"",i=e.trace?"trace ":"subplot ",a=t.description?" "+t.description:"",o={x:extendFlat$8({},r,{description:["Sets the horizontal domain of this ",n,i,"(in plot fraction).",a].join("")}),y:extendFlat$8({},r,{description:["Sets the vertical domain of this ",n,i,"(in plot fraction).",a].join("")}),editType:e.editType};return e.noGridCell||(o.row={valType:"integer",min:0,dflt:0,editType:e.editType,description:["If there is a layout grid, use the domain ","for this row in the grid for this ",n,i,".",a].join("")},o.column={valType:"integer",min:0,dflt:0,editType:e.editType,description:["If there is a layout grid, use the domain ","for this column in the grid for this ",n,i,".",a].join("")}),o},domain.defaults=function(e,t,r,n){var i=n&&n.x||[0,1],a=n&&n.y||[0,1],o=t.grid;if(o){var s=r("domain.column");void 0!==s&&(s<o.columns?i=o._domains.x[s]:delete e.domain.column);var l=r("domain.row");void 0!==l&&(l<o.rows?a=o._domains.y[l]:delete e.domain.row)}var c=r("domain.x",i),u=r("domain.y",a);c[0]<c[1]||(e.domain.x=i.slice()),u[0]<u[1]||(e.domain.y=a.slice())};var Lib$j=libExports,counterRegex=regex.counter,domainAttrs=domain.attributes,cartesianIdRegex=constants$K.idRegex,Template=plot_template,gridAttrs={rows:{valType:"integer",min:1,editType:"plot",description:["The number of rows in the grid. If you provide a 2D `subplots`","array or a `yaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot",description:["Is the first row the top or the bottom? Note that columns","are always enumerated from left to right."].join(" ")},columns:{valType:"integer",min:1,editType:"plot",description:["The number of columns in the grid. If you provide a 2D `subplots`","array, the length of its longest row is used as the default.","If you give an `xaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[counterRegex("xy").toString(),""],editType:"plot"},editType:"plot",description:["Used for freeform grids, where some axes may be shared across subplots","but others are not. Each entry should be a cartesian subplot id, like","*xy* or *x3y2*, or ** to leave that cell empty. You may reuse x axes","within the same column, and y axes within the same row.","Non-cartesian subplots and traces that support `domain` can place themselves","in this grid separately using the `gridcell` attribute."].join(" ")},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[cartesianIdRegex.x.toString(),""],editType:"plot"},editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an x axis id like *x*, *x2*, etc., or ** to","not put an x axis in that column. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `yaxes` is present,","will generate consecutive IDs."].join(" ")},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[cartesianIdRegex.y.toString(),""],editType:"plot"},editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an y axis id like *y*, *y2*, etc., or ** to","not put a y axis in that row. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `xaxes` is present,","will generate consecutive IDs."].join(" ")},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot",description:["If no `subplots`, `xaxes`, or `yaxes` are given but we do have `rows` and `columns`,","we can generate defaults using consecutive axis IDs, in two ways:","*coupled* gives one x axis per column and one y axis per row.","*independent* uses a new xy pair for each cell, left-to-right across each row","then iterating rows according to `roworder`."].join(" ")},xgap:{valType:"number",min:0,max:1,editType:"plot",description:["Horizontal space between grid cells, expressed as a fraction","of the total width available to one cell. Defaults to 0.1","for coupled-axes grids and 0.2 for independent grids."].join(" ")},ygap:{valType:"number",min:0,max:1,editType:"plot",description:["Vertical space between grid cells, expressed as a fraction","of the total height available to one cell. Defaults to 0.1","for coupled-axes grids and 0.3 for independent grids."].join(" ")},domain:domainAttrs({name:"grid",editType:"plot",noGridCell:!0},{description:["The first and last cells end exactly at the domain","edges, with no grout around the edges."].join(" ")}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot",description:["Sets where the x axis labels and titles go. *bottom* means","the very bottom of the grid. *bottom plot* is the lowest plot","that each x axis is used in. *top* and *top plot* are similar."].join(" ")},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot",description:["Sets where the y axis labels and titles go. *left* means","the very left edge of the grid. *left plot* is the leftmost plot","that each y axis is used in. *right* and *right plot* are similar."].join(" ")},editType:"plot"};function getAxes(e,t,r){var n=t[r+"axes"],i=Object.keys((e._splomAxes||{})[r]||{});return Array.isArray(n)?n:i.length?i:void 0}function sizeDefaults(e,t){var r=e.grid||{},n=getAxes(t,r,"x"),i=getAxes(t,r,"y");if(e.grid||n||i){var a,o,s=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]),l=Array.isArray(n),c=Array.isArray(i),u=l&&n!==r.xaxes&&c&&i!==r.yaxes;s?(a=r.subplots.length,o=r.subplots[0].length):(c&&(a=i.length),l&&(o=n.length));var d=Template.newContainer(t,"grid"),h=v("rows",a),g=v("columns",o);if(h*g>1){if(!s&&!l&&!c)"independent"===v("pattern")&&(s=!0);d._hasSubplotGrid=s;var p,f,m="top to bottom"===v("roworder"),y=s?.2:.1,b=s?.3:.1;u&&t._splomGridDflt&&(p=t._splomGridDflt.xside,f=t._splomGridDflt.yside),d._domains={x:fillGridPositions("x",v,y,p,g),y:fillGridPositions("y",v,b,f,h,m)}}else delete t.grid}function v(e,t){return Lib$j.coerce(r,d,gridAttrs,e,t)}}function fillGridPositions(e,t,r,n,i,a){var o=t(e+"gap",r),s=t("domain."+e);t(e+"side",n);for(var l=new Array(i),c=s[0],u=(s[1]-c)/(i-o),d=u*(1-o),h=0;h<i;h++){var g=c+u*h;l[a?i-1-h:h]=[g,g+d]}return l}function contentDefaults(e,t){var r=t.grid;if(r&&r._domains){var n,i,a,o,s,l,c,u=e.grid||{},d=t._subplots,h=r._hasSubplotGrid,g=r.rows,p=r.columns,f="independent"===r.pattern,m=r._axisMap={};if(h){var y=u.subplots||[];l=r.subplots=new Array(g);var b=1;for(n=0;n<g;n++){var v=l[n]=new Array(p),x=y[n]||[];for(i=0;i<p;i++)if(f?(s=1===b?"xy":"x"+b+"y"+b,b++):s=x[i],v[i]="",-1!==d.cartesian.indexOf(s)){if(c=s.indexOf("y"),a=s.slice(0,c),o=s.slice(c),void 0!==m[a]&&m[a]!==i||void 0!==m[o]&&m[o]!==n)continue;v[i]=s,m[a]=i,m[o]=n}}}else{var B=getAxes(t,u,"x"),I=getAxes(t,u,"y");r.xaxes=fillGridAxes(B,d.xaxis,p,m,"x"),r.yaxes=fillGridAxes(I,d.yaxis,g,m,"y")}var F=r._anchors={},A="top to bottom"===r.roworder;for(var C in m){var w,Q,U,S=C.charAt(0),E=r[S+"side"];if(E.length<8)F[C]="free";else if("x"===S){if("t"===E.charAt(0)===A?(w=0,Q=1,U=g):(w=g-1,Q=-1,U=-1),h){var L=m[C];for(n=w;n!==U;n+=Q)if((s=l[n][L])&&(c=s.indexOf("y"),s.slice(0,c)===C)){F[C]=s.slice(c);break}}else for(n=w;n!==U;n+=Q)if(o=r.yaxes[n],-1!==d.cartesian.indexOf(C+o)){F[C]=o;break}}else if("l"===E.charAt(0)?(w=0,Q=1,U=p):(w=p-1,Q=-1,U=-1),h){var _=m[C];for(n=w;n!==U;n+=Q)if((s=l[_][n])&&(c=s.indexOf("y"),s.slice(c)===C)){F[C]=s.slice(0,c);break}}else for(n=w;n!==U;n+=Q)if(a=r.xaxes[n],-1!==d.cartesian.indexOf(a+C)){F[C]=a;break}}}}function fillGridAxes(e,t,r,n,i){var a,o=new Array(r);function s(e,r){-1!==t.indexOf(r)&&void 0===n[r]?(o[e]=r,n[r]=e):o[e]=""}if(Array.isArray(e))for(a=0;a<r;a++)s(a,e[a]);else for(s(0,i),a=1;a<r;a++)s(a,i+(a+1));return o}var defaults$5,hasRequiredDefaults$1,compute_error,hasRequiredCompute_error,calc$4,hasRequiredCalc,plot$1,hasRequiredPlot,style$2,hasRequiredStyle,grid={moduleType:"component",name:"grid",schema:{layout:{grid:gridAttrs}},layoutAttributes:gridAttrs,sizeDefaults:sizeDefaults,contentDefaults:contentDefaults},attributes$e={visible:{valType:"boolean",editType:"calc",description:["Determines whether or not this set of error bars is visible."].join(" ")},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc",description:["Determines the rule used to generate the error bars.","If *constant`, the bar lengths are of a constant value.","Set this constant in `value`.","If *percent*, the bar lengths correspond to a percentage of","underlying data. Set this percentage in `value`.","If *sqrt*, the bar lengths correspond to the square of the","underlying data.","If *data*, the bar lengths are set with data set `array`."].join(" ")},symmetric:{valType:"boolean",editType:"calc",description:["Determines whether or not the error bars have the same length","in both direction","(top/bottom for vertical bars, left/right for horizontal bars."].join(" ")},array:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar.","Values are plotted relative to the underlying data."].join(" ")},arrayminus:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar in the","bottom (left) direction for vertical (horizontal) bars","Values are plotted relative to the underlying data."].join(" ")},value:{valType:"number",min:0,dflt:10,editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars."].join(" ")},valueminus:{valType:"number",min:0,dflt:10,editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars in the","bottom (left) direction for vertical (horizontal) bars"].join(" ")},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style",description:"Sets the stoke color of the error bars."},thickness:{valType:"number",min:0,dflt:2,editType:"style",description:"Sets the thickness (in px) of the error bars."},width:{valType:"number",min:0,editType:"plot",description:["Sets the width (in px) of the cross-bar at both ends","of the error bars."].join(" ")},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style",description:["Obsolete.","Use the alpha channel in error bar `color` to set the opacity."].join(" ")}}};function requireDefaults$1(){if(hasRequiredDefaults$1)return defaults$5;hasRequiredDefaults$1=1;var e=fastIsnumeric,t=registry,r=libExports,n=plot_template,i=attributes$e;return defaults$5=function(a,o,s,l){var c="error_"+l.axis,u=n.newContainer(o,c),d=a[c]||{};function h(e,t){return r.coerce(d,u,i,e,t)}if(!1!==h("visible",void 0!==d.array||void 0!==d.value||"sqrt"===d.type)){var g=h("type","array"in d?"data":"percent"),p=!0;"sqrt"!==g&&(p=h("symmetric",!(("data"===g?"arrayminus":"valueminus")in d))),"data"===g?(h("array"),h("traceref"),p||(h("arrayminus"),h("tracerefminus"))):"percent"!==g&&"constant"!==g||(h("value"),p||h("valueminus"));var f="copy_"+l.inherit+"style";if(l.inherit)(o["error_"+l.inherit]||{}).visible&&h(f,!(d.color||e(d.thickness)||e(d.width)));l.inherit&&u[f]||(h("color",s),h("thickness"),h("width",t.traceIs(o,"gl3d")?0:4))}},defaults$5}function requireCompute_error(){if(hasRequiredCompute_error)return compute_error;function e(e,t){return"percent"===e?function(e){return Math.abs(e*t/100)}:"constant"===e?function(){return Math.abs(t)}:"sqrt"===e?function(e){return Math.sqrt(Math.abs(e))}:void 0}return hasRequiredCompute_error=1,compute_error=function(t){var r=t.type,n=t.symmetric;if("data"===r){var i=t.array||[];if(n)return function(e,t){var r=+i[t];return[r,r]};var a=t.arrayminus||[];return function(e,t){var r=+i[t],n=+a[t];return isNaN(r)&&isNaN(n)?[NaN,NaN]:[n||0,r||0]}}var o=e(r,t.value),s=e(r,t.valueminus);return n||void 0===t.valueminus?function(e){var t=o(e);return[t,t]}:function(e){return[s(e),o(e)]}},compute_error}function requireCalc(){if(hasRequiredCalc)return calc$4;hasRequiredCalc=1;var e=fastIsnumeric,t=registry,r=axesExports,n=libExports,i=requireCompute_error();function a(t,a,o,s){var l=a["error_"+s]||{},c=[];if(l.visible&&-1!==["linear","log"].indexOf(o.type)){for(var u=i(l),d=0;d<t.length;d++){var h=t[d],g=h.i;if(void 0===g)g=d;else if(null===g)continue;var p=h[s];if(e(o.c2l(p))){var f=u(p,g);if(e(f[0])&&e(f[1])){var m=h[s+"s"]=p-f[0],y=h[s+"h"]=p+f[1];c.push(m,y)}}}var b=o._id,v=a._extremes[b],x=r.findExtremes(o,c,n.extendFlat({tozero:v.opts.tozero},{padded:!0}));v.min=v.min.concat(x.min),v.max=v.max.concat(x.max)}}return calc$4=function(e){for(var n=e.calcdata,i=0;i<n.length;i++){var o=n[i],s=o[0].trace;if(!0===s.visible&&t.traceIs(s,"errorBarsOK")){var l=r.getFromId(e,s.xaxis),c=r.getFromId(e,s.yaxis);a(o,s,l,"x"),a(o,s,c,"y")}}},calc$4}function requirePlot(){if(hasRequiredPlot)return plot$1;hasRequiredPlot=1;var e=d3Exports,t=fastIsnumeric,r=drawingExports,n=subtypes$3;return plot$1=function(i,a,o,s){var l=o.xaxis,c=o.yaxis,u=s&&s.duration>0,d=i._context.staticPlot;a.each((function(a){var h,g=a[0].trace,p=g.error_x||{},f=g.error_y||{};g.ids&&(h=function(e){return e.id});var m=n.hasMarkers(g)&&g.marker.maxdisplayed>0;f.visible||p.visible||(a=[]);var y=e.select(this).selectAll("g.errorbar").data(a,h);if(y.exit().remove(),a.length){p.visible||y.selectAll("path.xerror").remove(),f.visible||y.selectAll("path.yerror").remove(),y.style("opacity",1);var b=y.enter().append("g").classed("errorbar",!0);u&&b.style("opacity",0).transition().duration(s.duration).style("opacity",1),r.setClipUrl(y,o.layerClipId,i),y.each((function(r){var n=e.select(this),i=function(e,r,n){var i={x:r.c2p(e.x),y:n.c2p(e.y)};void 0!==e.yh&&(i.yh=n.c2p(e.yh),i.ys=n.c2p(e.ys),t(i.ys)||(i.noYS=!0,i.ys=n.c2p(e.ys,!0)));void 0!==e.xh&&(i.xh=r.c2p(e.xh),i.xs=r.c2p(e.xs),t(i.xs)||(i.noXS=!0,i.xs=r.c2p(e.xs,!0)));return i}(r,l,c);if(!m||r.vis){var a,o=n.select("path.yerror");if(f.visible&&t(i.x)&&t(i.yh)&&t(i.ys)){var h=f.width;a="M"+(i.x-h)+","+i.yh+"h"+2*h+"m-"+h+",0V"+i.ys,i.noYS||(a+="m-"+h+",0h"+2*h),!o.size()?o=n.append("path").style("vector-effect",d?"none":"non-scaling-stroke").classed("yerror",!0):u&&(o=o.transition().duration(s.duration).ease(s.easing)),o.attr("d",a)}else o.remove();var g=n.select("path.xerror");if(p.visible&&t(i.y)&&t(i.xh)&&t(i.xs)){var y=(p.copy_ystyle?f:p).width;a="M"+i.xh+","+(i.y-y)+"v"+2*y+"m0,-"+y+"H"+i.xs,i.noXS||(a+="m0,-"+y+"v"+2*y),!g.size()?g=n.append("path").style("vector-effect",d?"none":"non-scaling-stroke").classed("xerror",!0):u&&(g=g.transition().duration(s.duration).ease(s.easing)),g.attr("d",a)}else g.remove()}}))}}))},plot$1}function requireStyle(){if(hasRequiredStyle)return style$2;hasRequiredStyle=1;var e=d3Exports,t=colorExports;return style$2=function(r){r.each((function(r){var n=r[0].trace,i=n.error_y||{},a=n.error_x||{},o=e.select(this);o.selectAll("path.yerror").style("stroke-width",i.thickness+"px").call(t.stroke,i.color),a.copy_ystyle&&(a=i),o.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(t.stroke,a.color)}))},style$2}var Lib$i=libExports,overrideAll$4=edit_types.overrideAll,attributes$d=attributes$e,xyAttrs={error_x:Lib$i.extendFlat({},attributes$d),error_y:Lib$i.extendFlat({},attributes$d)};delete xyAttrs.error_x.copy_zstyle,delete xyAttrs.error_y.copy_zstyle,delete xyAttrs.error_y.copy_ystyle;var xyzAttrs={error_x:Lib$i.extendFlat({},attributes$d),error_y:Lib$i.extendFlat({},attributes$d),error_z:Lib$i.extendFlat({},attributes$d)};delete xyzAttrs.error_x.copy_ystyle,delete xyzAttrs.error_y.copy_ystyle,delete xyzAttrs.error_z.copy_ystyle,delete xyzAttrs.error_z.copy_zstyle;var errorbars={moduleType:"component",name:"errorbars",schema:{traces:{scatter:xyAttrs,bar:xyAttrs,histogram:xyAttrs,scatter3d:overrideAll$4(xyzAttrs,"calc","nested"),scattergl:overrideAll$4(xyAttrs,"calc","nested")}},supplyDefaults:requireDefaults$1(),calc:requireCalc(),makeComputeError:requireCompute_error(),plot:requirePlot(),style:requireStyle(),hoverInfo:hoverInfo};function hoverInfo(e,t,r){(t.error_y||{}).visible&&(r.yerr=e.yh-e.y,t.error_y.symmetric||(r.yerrneg=e.y-e.ys)),(t.error_x||{}).visible&&(r.xerr=e.xh-e.x,t.error_x.symmetric||(r.xerrneg=e.x-e.xs))}var constants$5={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}},d3$3=d3Exports,tinycolor$2=tinycolorExports,Plots=plotsExports,Registry$d=registry,Axes$4=axesExports,dragElement=dragelementExports,Lib$h=libExports,strTranslate=Lib$h.strTranslate,extendFlat$7=extend.extendFlat,setCursor=setcursor,Drawing$2=drawingExports,Color$7=colorExports,Titles=titles,svgTextUtils$1=svg_text_utils,flipScale=helpers$A.flipScale,handleAxisDefaults=axis_defaults$1,handleAxisPositionDefaults=position_defaults,axisLayoutAttrs=layout_attributes$3,alignmentConstants=alignment$1,LINE_SPACING=alignmentConstants.LINE_SPACING,FROM_TL=alignmentConstants.FROM_TL,FROM_BR=alignmentConstants.FROM_BR,cn=constants$5.cn;function draw(e){var t=e._fullLayout._infolayer.selectAll("g."+cn.colorbar).data(makeColorBarData(e),(function(e){return e._id}));t.enter().append("g").attr("class",(function(e){return e._id})).classed(cn.colorbar,!0),t.each((function(t){var r=d3$3.select(this);Lib$h.ensureSingle(r,"rect",cn.cbbg),Lib$h.ensureSingle(r,"g",cn.cbfills),Lib$h.ensureSingle(r,"g",cn.cblines),Lib$h.ensureSingle(r,"g",cn.cbaxis,(function(e){e.classed(cn.crisp,!0)})),Lib$h.ensureSingle(r,"g",cn.cbtitleunshift,(function(e){e.append("g").classed(cn.cbtitle,!0)})),Lib$h.ensureSingle(r,"rect",cn.cboutline);var n=drawColorBar(r,t,e);n&&n.then&&(e._promises||[]).push(n),e._context.edits.colorbarPosition&&makeEditable(r,t,e)})),t.exit().each((function(t){Plots.autoMargin(e,t._id)})).remove(),t.order()}function makeColorBarData(e){var t,r,n,i,a=e._fullLayout,o=e.calcdata,s=[];function l(e){return extendFlat$7(e,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function c(){"function"==typeof i.calc?i.calc(e,n,t):(t._fillgradient=r.reversescale?flipScale(r.colorscale):r.colorscale,t._zrange=[r[i.min],r[i.max]])}for(var u=0;u<o.length;u++){var d=o[u],h=(n=d[0].trace)._module.colorbar;if(!0===n.visible&&h)for(var g=Array.isArray(h),p=g?h:[h],f=0;f<p.length;f++){var m=(i=p[f]).container;(r=m?n[m]:n)&&r.showscale&&((t=l(r.colorbar))._id="cb"+n.uid+(g&&m?"-"+m:""),t._traceIndex=n.index,t._propPrefix=(m?m+".":"")+"colorbar.",t._meta=n._meta,c(),s.push(t))}}for(var y in a._colorAxes)if((r=a[y]).showscale){var b=a._colorAxes[y];(t=l(r.colorbar))._id="cb"+y,t._propPrefix=y+".colorbar.",t._meta=a._meta,i={min:"cmin",max:"cmax"},"heatmap"!==b[0]&&(n=b[1],i.calc=n._module.colorbar.calc),c(),s.push(t)}return s}function drawColorBar(e,t,r){var n="v"===t.orientation,i=t.len,a=t.lenmode,o=t.thickness,s=t.thicknessmode,l=t.outlinewidth,c=t.borderwidth,u=t.bgcolor,d=t.xanchor,h=t.yanchor,g=t.xpad,p=t.ypad,f=t.x,m=n?t.y:1-t.y,y=r._fullLayout,b=y._size,v=t._fillcolor,x=t._line,B=t.title,I=B.side,F=t._zrange||d3$3.extent(("function"==typeof v?v:x.color).domain()),A="function"==typeof x.color?x.color:function(){return x.color},C="function"==typeof v?v:function(){return v},w=t._levels,Q=calcLevels(r,t,F),U=Q.fill,S=Q.line,E=Math.round(o*("fraction"===s?n?b.w:b.h:1)),L=E/(n?b.w:b.h),_=Math.round(i*("fraction"===a?n?b.h:b.w:1)),T=_/(n?b.h:b.w),R=Math.round(n?f*b.w+g:m*b.h+p),$={center:.5,right:1}[d]||0,k={top:1,middle:.5}[h]||0,N=n?f-$*L:m-k*L,G=n?m-k*T:f-$*T,M=Math.round(n?b.h*(1-G):b.w*G);t._lenFrac=T,t._thickFrac=L,t._uFrac=N,t._vFrac=G;var D=t._axis=mockColorBarAxis(r,t,F);D.position=L+(n?f+g/b.w:m+p/b.h);var V=-1!==["top","bottom"].indexOf(I);if(n&&V&&(D.title.side=I,D.titlex=f+g/b.w,D.titley=G+("top"===B.side?T-p/b.h:p/b.h)),n||V||(D.title.side=I,D.titley=m+p/b.h,D.titlex=G+g/b.w),x.color&&"auto"===t.tickmode){D.tickmode="linear",D.tick0=w.start;var H=w.size,X=Lib$h.constrain(_/50,4,15)+1,O=(F[1]-F[0])/((t.nticks||X)*H);if(O>1){var Z=Math.pow(10,Math.floor(Math.log(O)/Math.LN10));H*=Z*Lib$h.roundUp(O/Z,[2,5,10]),(Math.abs(w.start)/w.size+1e-6)%1<2e-6&&(D.tick0=0)}D.dtick=H}D.domain=n?[G+p/b.h,G+T-p/b.h]:[G+g/b.w,G+T-g/b.w],D.setScale(),e.attr("transform",strTranslate(Math.round(b.l),Math.round(b.t)));var W,Y=e.select("."+cn.cbtitleunshift).attr("transform",strTranslate(-Math.round(b.l),-Math.round(b.t))),P=D.ticklabelposition,z=D.title.font.size,J=e.select("."+cn.cbaxis),j=0,K=0;function q(n,i){var a={propContainer:D,propName:t._propPrefix+"title",traceIndex:t._traceIndex,_meta:t._meta,placeholder:y._dfltTitle.colorbar,containerGroup:e.select("."+cn.cbtitle)},o="h"===n.charAt(0)?n.substr(1):"h"+n;e.selectAll("."+o+",."+o+"-math-group").remove(),Titles.draw(r,n,extendFlat$7(a,i||{}))}return Lib$h.syncOrAsync([Plots.previousPromises,function(){var e,t;(n&&V||!n&&!V)&&("top"===I&&(e=g+b.l+b.w*f,t=p+b.t+b.h*(1-G-T)+3+.75*z),"bottom"===I&&(e=g+b.l+b.w*f,t=p+b.t+b.h*(1-G)-3-.25*z),"right"===I&&(t=p+b.t+b.h*m+3+.75*z,e=g+b.l+b.w*G),q(D._id+"title",{attributes:{x:e,y:t,"text-anchor":n?"start":"middle"}}))},function(){if(!n&&!V||n&&V){var i,a=e.select("."+cn.cbtitle),o=a.select("text"),s=[-l/2,l/2],c=a.select(".h"+D._id+"title-math-group").node(),u=15.6;if(o.node()&&(u=parseInt(o.node().style.fontSize,10)*LINE_SPACING),c?(i=Drawing$2.bBox(c),K=i.width,(j=i.height)>u&&(s[1]-=(j-u)/2)):o.node()&&!o.classed(cn.jsPlaceholder)&&(i=Drawing$2.bBox(o.node()),K=i.width,j=i.height),n){if(j){if(j+=5,"top"===I)D.domain[1]-=j/b.h,s[1]*=-1;else{D.domain[0]+=j/b.h;var d=svgTextUtils$1.lineCount(o);s[1]+=(1-d)*u}a.attr("transform",strTranslate(s[0],s[1])),D.setScale()}}else K&&("right"===I&&(D.domain[0]+=(K+z/2)/b.w),a.attr("transform",strTranslate(s[0],s[1])),D.setScale())}e.selectAll("."+cn.cbfills+",."+cn.cblines).attr("transform",n?strTranslate(0,Math.round(b.h*(1-D.domain[1]))):strTranslate(Math.round(b.w*D.domain[0]),0)),J.attr("transform",n?strTranslate(0,Math.round(-b.t)):strTranslate(Math.round(-b.l),0));var h=e.select("."+cn.cbfills).selectAll("rect."+cn.cbfill).attr("style","").data(U);h.enter().append("rect").classed(cn.cbfill,!0).style("stroke","none"),h.exit().remove();var g=F.map(D.c2p).map(Math.round).sort((function(e,t){return e-t}));h.each((function(e,i){var a=[0===i?F[0]:(U[i]+U[i-1])/2,i===U.length-1?F[1]:(U[i]+U[i+1])/2].map(D.c2p).map(Math.round);n&&(a[1]=Lib$h.constrain(a[1]+(a[1]>a[0])?1:-1,g[0],g[1]));var o=d3$3.select(this).attr(n?"x":"y",R).attr(n?"y":"x",d3$3.min(a)).attr(n?"width":"height",Math.max(E,2)).attr(n?"height":"width",Math.max(d3$3.max(a)-d3$3.min(a),2));if(t._fillgradient)Drawing$2.gradient(o,r,t._id,n?"vertical":"horizontalreversed",t._fillgradient,"fill");else{var s=C(e).replace("e-","");o.attr("fill",tinycolor$2(s).toHexString())}}));var p=e.select("."+cn.cblines).selectAll("path."+cn.cbline).data(x.color&&x.width?S:[]);p.enter().append("path").classed(cn.cbline,!0),p.exit().remove(),p.each((function(e){var t=R,r=Math.round(D.c2p(e))+x.width/2%1;d3$3.select(this).attr("d","M"+(n?t+","+r:r+","+t)+(n?"h":"v")+E).call(Drawing$2.lineGroupStyle,x.width,A(e),x.dash)})),J.selectAll("g."+D._id+"tick,path").remove();var f=R+E+(l||0)/2-("outside"===t.ticks?1:0),m=Axes$4.calcTicks(D),y=Axes$4.getTickSigns(D)[2];return Axes$4.drawTicks(r,D,{vals:"inside"===D.ticks?Axes$4.clipEnds(D,m):m,layer:J,path:Axes$4.makeTickPath(D,f,y),transFn:Axes$4.makeTransTickFn(D)}),Axes$4.drawLabels(r,D,{vals:m,layer:J,transFn:Axes$4.makeTransTickLabelFn(D),labelFns:Axes$4.makeLabelFns(D,f)})},function(){if(n&&!V||!n&&V){var e,i,a=D.position||0,o=D._offset+D._length/2;if("right"===I)i=o,e=b.l+b.w*a+10+z*(D.showticklabels?1:.5);else if(e=o,"bottom"===I&&(i=b.t+b.h*a+10+(-1===P.indexOf("inside")?D.tickfont.size:0)+("intside"!==D.ticks&&t.ticklen||0)),"top"===I){var s=B.text.split("<br>").length;i=b.t+b.h*a+10-E-LINE_SPACING*z*s}q((n?"h":"v")+D._id+"title",{avoid:{selection:d3$3.select(r).selectAll("g."+D._id+"tick"),side:I,offsetTop:n?0:b.t,offsetLeft:n?b.l:0,maxShift:n?y.width:y.height},attributes:{x:e,y:i,"text-anchor":"middle"},transform:{rotate:n?-90:0,offset:0}})}},Plots.previousPromises,function(){var v,x=E+l/2;-1===P.indexOf("inside")&&(v=Drawing$2.bBox(J.node()),x+=n?v.width:v.height),W=Y.select("text");var F=0,A=n&&"top"===I,C=!n&&"right"===I,w=0;if(W.node()&&!W.classed(cn.jsPlaceholder)){var Q,U=Y.select(".h"+D._id+"title-math-group").node();U&&(n&&V||!n&&!V)?(F=(v=Drawing$2.bBox(U)).width,Q=v.height):(F=(v=Drawing$2.bBox(Y.node())).right-b.l-(n?R:M),Q=v.bottom-b.t-(n?M:R),n||"top"!==I||(x+=v.height,w=v.height)),C&&(W.attr("transform",strTranslate(F/2+z/2,0)),F*=2),x=Math.max(x,n?F:Q)}var S=2*(n?g:p)+x+c+l/2,L=0;!n&&B.text&&"bottom"===h&&m<=0&&(S+=L=S/2,w+=L),y._hColorbarMoveTitle=L,y._hColorbarMoveCBTitle=w;var T=c+l;e.select("."+cn.cbbg).attr("x",(n?R:M)-T/2-(n?g:0)).attr("y",(n?M:R)-(n?_:p+w-L)).attr(n?"width":"height",Math.max(S-L,2)).attr(n?"height":"width",Math.max(_+T,2)).call(Color$7.fill,u).call(Color$7.stroke,t.bordercolor).style("stroke-width",c);var N=C?Math.max(F-10,0):0;if(e.selectAll("."+cn.cboutline).attr("x",(n?R:M+g)+N).attr("y",(n?M+p-_:R)+(A?j:0)).attr(n?"width":"height",Math.max(E,2)).attr(n?"height":"width",Math.max(_-(n?2*p+j:2*g+N),2)).call(Color$7.stroke,t.outlinecolor).style({fill:"none","stroke-width":l}),e.attr("transform",strTranslate(b.l-(n?$*S:0),b.t-(n?0:(1-k)*S-w))),!n&&(c||tinycolor$2(u).getAlpha()&&!tinycolor$2.equals(y.paper_bgcolor,u))){var G=J.selectAll("text"),H=G[0].length,X=e.select("."+cn.cbbg).node(),O=Drawing$2.bBox(X),Z=Drawing$2.getTranslate(e);G.each((function(e,t){var r=H-1;if(0===t||t===r){var n,i=Drawing$2.bBox(this),a=Drawing$2.getTranslate(this);if(t===r){var o=i.right+a.x;(n=O.right+Z.x+M-c-2+f-o)>0&&(n=0)}else if(0===t){var s=i.left+a.x;(n=O.left+Z.x+M+c+2-s)<0&&(n=0)}n&&(H<3?this.setAttribute("transform","translate("+n+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}}))}var K={},q=FROM_TL[d],ee=FROM_BR[d],te=FROM_TL[h],re=FROM_BR[h],ne=S-E;n?("pixels"===a?(K.y=m,K.t=_*te,K.b=_*re):(K.t=K.b=0,K.yt=m+i*te,K.yb=m-i*re),"pixels"===s?(K.x=f,K.l=S*q,K.r=S*ee):(K.l=ne*q,K.r=ne*ee,K.xl=f-o*q,K.xr=f+o*ee)):("pixels"===a?(K.x=f,K.l=_*q,K.r=_*ee):(K.l=K.r=0,K.xl=f+i*q,K.xr=f-i*ee),"pixels"===s?(K.y=1-m,K.t=S*te,K.b=S*re):(K.t=ne*te,K.b=ne*re,K.yt=m-o*te,K.yb=m+o*re)),Plots.autoMargin(r,t._id,K)}],r)}function makeEditable(e,t,r){var n,i,a,o="v"===t.orientation,s=r._fullLayout._size;dragElement.init({element:e.node(),gd:r,prepFn:function(){n=e.attr("transform"),setCursor(e)},moveFn:function(r,l){e.attr("transform",n+strTranslate(r,l)),i=dragElement.align((o?t._uFrac:t._vFrac)+r/s.w,o?t._thickFrac:t._lenFrac,0,1,t.xanchor),a=dragElement.align((o?t._vFrac:1-t._uFrac)-l/s.h,o?t._lenFrac:t._thickFrac,0,1,t.yanchor);var c=dragElement.getCursor(i,a,t.xanchor,t.yanchor);setCursor(e,c)},doneFn:function(){if(setCursor(e),void 0!==i&&void 0!==a){var n={};n[t._propPrefix+"x"]=i,n[t._propPrefix+"y"]=a,void 0!==t._traceIndex?Registry$d.call("_guiRestyle",r,n,t._traceIndex):Registry$d.call("_guiRelayout",r,n)}}})}function calcLevels(e,t,r){var n,i,a=t._levels,o=[],s=[],l=a.end+a.size/100,c=a.size,u=1.001*r[0]-.001*r[1],d=1.001*r[1]-.001*r[0];for(i=0;i<1e5&&(n=a.start+i*c,!(c>0?n>=l:n<=l));i++)n>u&&n<d&&o.push(n);if(t._fillgradient)s=[0];else if("function"==typeof t._fillcolor){var h=t._filllevels;if(h)for(l=h.end+h.size/100,c=h.size,i=0;i<1e5&&(n=h.start+i*c,!(c>0?n>=l:n<=l));i++)n>r[0]&&n<r[1]&&s.push(n);else s=o.map((function(e){return e-a.size/2})),s.push(s[s.length-1]+a.size)}else t._fillcolor&&"string"==typeof t._fillcolor&&(s=[0]);return a.size<0&&(o.reverse(),s.reverse()),{line:o,fill:s}}function mockColorBarAxis(e,t,r){var n=e._fullLayout,i="v"===t.orientation,a={type:"linear",range:r,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,labelalias:t.labelalias,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,ticklabelstep:t.ticklabelstep,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:!0,anchor:"free",side:i?"right":"bottom",position:1},o=i?"y":"x",s={type:"linear",_id:o+t._id},l={letter:o,font:n.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:n.calendar};function c(e,t){return Lib$h.coerce(a,s,axisLayoutAttrs,e,t)}return handleAxisDefaults(a,s,c,l,n),handleAxisPositionDefaults(a,s,c,l),s}var draw_1={draw:draw},colorbar={moduleType:"component",name:"colorbar",attributes:attributes$H,supplyDefaults:defaults$m,draw:draw_1.draw,hasColorbar:has_colorbar},localeEn={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}},localeEnUs={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}},Registry$c=registry,Lib$g=libExports,extendFlat$6=Lib$g.extendFlat,extendDeep=Lib$g.extendDeep;function cloneLayoutOverride(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function keyIsAxis(e){return["xaxis","yaxis","zaxis"].indexOf(e.slice(0,5))>-1}var cloneplot=function(e,t){var r,n=e.data,i=e.layout,a=extendDeep([],n),o=extendDeep({},i,cloneLayoutOverride(t.tileClass)),s=e._context||{};if(t.width&&(o.width=t.width),t.height&&(o.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){o.annotations=[];var l=Object.keys(o);for(r=0;r<l.length;r++)keyIsAxis(l[r])&&(o[l[r]].title={text:""});for(r=0;r<a.length;r++){var c=a[r];c.showscale=!1,c.marker&&(c.marker.showscale=!1),Registry$c.traceIs(c,"pie-like")&&(c.textposition="none")}}if(Array.isArray(t.annotations))for(r=0;r<t.annotations.length;r++)o.annotations.push(t.annotations[r]);var u=Object.keys(o).filter((function(e){return e.match(/^scene\d*$/)}));if(u.length){var d={};for("thumbnail"===t.tileClass&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),r=0;r<u.length;r++){var h=o[u[r]];h.xaxis||(h.xaxis={}),h.yaxis||(h.yaxis={}),h.zaxis||(h.zaxis={}),extendFlat$6(h.xaxis,d),extendFlat$6(h.yaxis,d),extendFlat$6(h.zaxis,d),h._scene=null}}var g=document.createElement("div");t.tileClass&&(g.className=t.tileClass);var p={gd:g,td:g,layout:o,data:a,config:{staticPlot:void 0===t.staticPlot||t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:s.mapboxAccessToken}};return"transparent"!==t.setBackground&&(p.config.setBackground=t.setBackground||"opaque"),p.gd.defaultLayout=cloneLayoutOverride(t.tileClass),p},EventEmitter=eventsExports.EventEmitter,Registry$b=registry,Lib$f=libExports,helpers$4=helpers$d,clonePlot=cloneplot,toSVG=tosvg,svgToImg=svgtoimg;function toImage(e,t){var r=new EventEmitter,n=clonePlot(e,{format:"png"}),i=n.gd;i.style.position="absolute",i.style.left="-5000px",document.body.appendChild(i);var a=helpers$4.getRedrawFunc(i);return Registry$b.call("_doPlot",i,n.data,n.layout,n.config).then(a).then((function(){var e=helpers$4.getDelay(i._fullLayout);setTimeout((function(){var e=toSVG(i),n=document.createElement("canvas");n.id=Lib$f.randstr(),(r=svgToImg({format:t.format,width:i._fullLayout.width,height:i._fullLayout.height,canvas:n,emitter:r,svg:e})).clean=function(){i&&document.body.removeChild(i)}}),e)})).catch((function(e){r.emit("error",e)})),r}var toimage=toImage,helpers$3=helpers$d,Snapshot={getDelay:helpers$3.getDelay,getRedrawFunc:helpers$3.getRedrawFunc,clone:cloneplot,toSVG:tosvg,svgToImg:svgtoimg,toImage:toimage,downloadImage:download},snapshot=Snapshot;!function(e){e.version=version$2.version;for(var t=registry,r=e.register=t.register,n=plot_api$1,i=Object.keys(n),a=0;a<i.length;a++){var o=i[a];"_"!==o.charAt(0)&&(e[o]=n[o]),r({moduleType:"apiMethod",name:o,fn:n[o]})}r(scatter),r([legend,fx,annotations,annotations3d,selections,shapes,images,updatemenus,sliders,rangeslider,rangeselector,grid,errorbars,colorscale,colorbar,modebar]),r([localeEn,localeEnUs]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(r(window.PlotlyLocales),delete window.PlotlyLocales),e.Icons=ploticon;var s=fx,l=plotsExports;e.Plots={resize:l.resize,graphJson:l.graphJson,sendDataToCloud:l.sendDataToCloud},e.Fx={hover:s.hover,unhover:s.unhover,loneHover:s.loneHover,loneUnhover:s.loneUnhover},e.Snapshot=snapshot,e.PlotSchema=plot_schema}(core),core$1.exports=core;var histogramExports={},histogram$2={get exports(){return histogramExports},set exports(e){histogramExports=e}},constants$4={TEXTPAD:3,eventDataKeys:["value","label"]},scatterAttrs$1=attributes$y,axisHoverFormat$5=axis_format_attributes.axisHoverFormat,hovertemplateAttrs$5=template_attributes.hovertemplateAttrs,texttemplateAttrs$2=template_attributes.texttemplateAttrs,colorScaleAttrs$3=attributes$G,fontAttrs$1=requireFont_attributes(),constants$3=constants$4,pattern=attributes$K.pattern,extendFlat$5=extend.extendFlat,textFontAttrs=fontAttrs$1({editType:"calc",arrayOk:!0,colorEditType:"style",description:""}),scatterMarkerAttrs$1=scatterAttrs$1.marker,scatterMarkerLineAttrs$1=scatterMarkerAttrs$1.line,markerLineWidth=extendFlat$5({},scatterMarkerLineAttrs$1.width,{dflt:0}),markerLine=extendFlat$5({width:markerLineWidth,editType:"calc"},colorScaleAttrs$3("marker.line")),marker=extendFlat$5({line:markerLine,editType:"calc"},colorScaleAttrs$3("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style",description:"Sets the opacity of the bars."},pattern:pattern}),attributes$c={x:scatterAttrs$1.x,x0:scatterAttrs$1.x0,dx:scatterAttrs$1.dx,y:scatterAttrs$1.y,y0:scatterAttrs$1.y0,dy:scatterAttrs$1.dy,xperiod:scatterAttrs$1.xperiod,yperiod:scatterAttrs$1.yperiod,xperiod0:scatterAttrs$1.xperiod0,yperiod0:scatterAttrs$1.yperiod0,xperiodalignment:scatterAttrs$1.xperiodalignment,yperiodalignment:scatterAttrs$1.yperiodalignment,xhoverformat:axisHoverFormat$5("x"),yhoverformat:axisHoverFormat$5("y"),text:scatterAttrs$1.text,texttemplate:texttemplateAttrs$2({editType:"plot"},{keys:constants$3.eventDataKeys}),hovertext:scatterAttrs$1.hovertext,hovertemplate:hovertemplateAttrs$5({},{keys:constants$3.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc",description:["Specifies the location of the `text`.","*inside* positions `text` inside, next to the bar end","(rotated and scaled if needed).","*outside* positions `text` outside, next to the bar end","(scaled if needed), unless there is another bar stacked on","this one, then the text gets pushed inside.","*auto* tries to position `text` inside the bar, but if","the bar is too small and no bar is stacked on this one","the text is moved outside.","If *none*, no text appears."].join(" ")},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot",description:["Determines if texts are kept at center or start/end points in `textposition` *inside* mode."].join(" ")},textangle:{valType:"angle",dflt:"auto",editType:"plot",description:["Sets the angle of the tick labels with respect to the bar.","For example, a `tickangle` of -90 draws the tick labels","vertically. With *auto* the texts may automatically be","rotated to fit with the maximum size in bars."].join(" ")},textfont:extendFlat$5({},textFontAttrs,{description:"Sets the font used for `text`."}),insidetextfont:extendFlat$5({},textFontAttrs,{description:"Sets the font used for `text` lying inside the bar."}),outsidetextfont:extendFlat$5({},textFontAttrs,{description:"Sets the font used for `text` lying outside the bar."}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc",description:["Constrain the size of text inside or outside a bar to be no","larger than the bar itself."].join(" ")},cliponaxis:extendFlat$5({},scatterAttrs$1.cliponaxis,{description:["Determines whether the text nodes","are clipped about the subplot axes.","To show the text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes",description:["Sets the orientation of the bars.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal)."].join(" ")},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc",description:["Sets where the bar base is drawn (in position axis units).","In *stack* or *relative* barmode,","traces that set *base* will be excluded","and drawn in *overlay* mode instead."].join(" ")},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc",description:["Shifts the position where the bar is drawn","(in position axis units).","In *group* barmode,","traces that set *offset* will be excluded","and drawn in *overlay* mode instead."].join(" ")},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc",description:["Sets the bar width (in position axis units)."].join(" ")},marker:marker,offsetgroup:scatterAttrs$1.offsetgroup,alignmentgroup:scatterAttrs$1.alignmentgroup,selected:{marker:{opacity:scatterAttrs$1.selected.marker.opacity,color:scatterAttrs$1.selected.marker.color,editType:"style"},textfont:scatterAttrs$1.selected.textfont,editType:"style"},unselected:{marker:{opacity:scatterAttrs$1.unselected.marker.opacity,color:scatterAttrs$1.unselected.marker.color,editType:"style"},textfont:scatterAttrs$1.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"],description:"Renamed to `orientation`."}}},bin_attributes=function(e,t){return{start:{valType:"any",editType:"calc",description:["Sets the starting value for the",e,"axis bins. Defaults to the minimum data value,","shifted down if necessary to make nice round values","and to remove ambiguous bin edges. For example, if most of the","data is integers we shift the bin edges 0.5 down, so a `size`","of 5 would have a default `start` of -0.5, so it is clear","that 0-4 are in the first bin, 5-9 in the second, but","continuous data gets a start of 0 and bins [0,5), [5,10) etc.","Dates behave similarly, and `start` should be a date string.","For category data, `start` is based on the category serial","numbers, and defaults to -0.5.",t?"If multiple non-overlaying histograms share a subplot, the first explicit `start` is used exactly and all others are shifted down (if necessary) to differ from that one by an integer number of bins.":""].join(" ")},end:{valType:"any",editType:"calc",description:["Sets the end value for the",e,"axis bins. The last bin may not end exactly at this value,","we increment the bin edge by `size` from `start` until we","reach or exceed `end`. Defaults to the maximum data value.","Like `start`, for dates use a date string, and for category","data `end` is based on the category serial numbers."].join(" ")},size:{valType:"any",editType:"calc",description:["Sets the size of each",e,"axis bin.","Default behavior: If `nbins"+e+"` is 0 or omitted,","we choose a nice round bin size such that the number of bins","is about the same as the typical number of samples in each bin.","If `nbins"+e+"` is provided, we choose a nice round","bin size giving no more than that many bins.","For date data, use milliseconds or *M<n>* for months, as in","`axis.dtick`. For category data, the number of categories to","bin together (always defaults to 1).",t?"If multiple non-overlaying histograms share a subplot, the first explicit `size` is used and all others discarded. If no `size` is provided,the sample data from all traces is combined to determine `size` as described above.":""].join(" ")},editType:"calc"}},constants$2={eventDataKeys:["binNumber"]},barAttrs=attributes$c,axisHoverFormat$4=axis_format_attributes.axisHoverFormat,hovertemplateAttrs$4=template_attributes.hovertemplateAttrs,texttemplateAttrs$1=template_attributes.texttemplateAttrs,fontAttrs=requireFont_attributes(),makeBinAttrs=bin_attributes,constants$1=constants$2,extendFlat$4=extend.extendFlat,attributes$b={x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the x axis."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the y axis."].join(" ")},xhoverformat:axisHoverFormat$4("x"),yhoverformat:axisHoverFormat$4("y"),text:extendFlat$4({},barAttrs.text,{description:["Sets hover text elements associated with each bar.","If a single string, the same string appears over all bars.","If an array of string, the items are mapped in order to the","this trace's coordinates."].join(" ")}),hovertext:extendFlat$4({},barAttrs.hovertext,{description:"Same as `text`."}),orientation:barAttrs.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc",description:["Specifies the binning function used for this histogram trace.","If *count*, the histogram values are computed by counting the","number of values lying inside each bin.","If *sum*, *avg*, *min*, *max*,","the histogram values are computed using","the sum, the average, the minimum or the maximum","of the values lying inside each bin respectively."].join(" ")},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc",description:["Specifies the type of normalization used for this histogram trace.","If **, the span of each bar corresponds to the number of","occurrences (i.e. the number of data points lying inside the bins).","If *percent* / *probability*, the span of each bar corresponds to","the percentage / fraction of occurrences with respect to the total","number of sample points","(here, the sum of all bin HEIGHTS equals 100% / 1).","If *density*, the span of each bar corresponds to the number of","occurrences in a bin divided by the size of the bin interval","(here, the sum of all bin AREAS equals the","total number of sample points).","If *probability density*, the area of each bar corresponds to the","probability that an event will fall into the corresponding bin","(here, the sum of all bin AREAS equals 1)."].join(" ")},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc",description:["If true, display the cumulative distribution by summing the","binned values. Use the `direction` and `centralbin` attributes","to tune the accumulation method.","Note: in this mode, the *density* `histnorm` settings behave","the same as their equivalents without *density*:","** and *density* both rise to the number of data points, and","*probability* and *probability density* both rise to the","number of sample points."].join(" ")},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc",description:["Only applies if cumulative is enabled.","If *increasing* (default) we sum all prior bins, so the result","increases from left to right. If *decreasing* we sum later bins","so the result decreases from left to right."].join(" ")},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc",description:["Only applies if cumulative is enabled.","Sets whether the current bin is included, excluded, or has half","of its value included in the current cumulative value.","*include* is the default for compatibility with various other","tools, however it introduces a half-bin bias to the results.","*exclude* makes the opposite half-bin bias, and *half* removes","it."].join(" ")},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `xbins.size` is provided."].join(" ")},xbins:makeBinAttrs("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `ybins.size` is provided."].join(" ")},ybins:makeBinAttrs("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobinx` is not needed. However, we accept","`autobinx: true` or `false` and will update `xbins` accordingly","before deleting `autobinx` from the trace."].join(" ")},autobiny:{valType:"boolean",dflt:null,editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobiny` is not needed. However, we accept","`autobiny: true` or `false` and will update `ybins` accordingly","before deleting `autobiny` from the trace."].join(" ")},bingroup:{valType:"string",dflt:"",editType:"calc",description:["Set a group of histogram traces which will have compatible bin settings.","Note that traces on the same subplot and with the same *orientation*","under `barmode` *stack*, *relative* and *group* are forced into the same bingroup,","Using `bingroup`, traces under `barmode` *overlay* and on different axes","(of the same axis type) can have compatible bin settings.","Note that histogram and histogram2d* trace can share the same `bingroup`"].join(" ")},hovertemplate:hovertemplateAttrs$4({},{keys:constants$1.eventDataKeys}),texttemplate:texttemplateAttrs$1({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:extendFlat$4({},barAttrs.textposition,{arrayOk:!1}),textfont:fontAttrs({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the text font."}),outsidetextfont:fontAttrs({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the font used for `text` lying outside the bar."}),insidetextfont:fontAttrs({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the font used for `text` lying inside the bar."}),insidetextanchor:barAttrs.insidetextanchor,textangle:barAttrs.textangle,cliponaxis:barAttrs.cliponaxis,constraintext:barAttrs.constraintext,marker:barAttrs.marker,offsetgroup:barAttrs.offsetgroup,alignmentgroup:barAttrs.alignmentgroup,selected:barAttrs.selected,unselected:barAttrs.unselected,_deprecated:{bardir:barAttrs._deprecated.bardir}},layout_attributes$1={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *relative*, the bars are stacked on top of one another,","with negative values below the axis, positive values above","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to reduce *opacity* to see multiple bars."].join(" ")},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc",description:["Sets the normalization for bar traces on the graph.","With *fraction*, the value of each bar is divided by the sum of all","values at that location coordinate.","*percent* is the same but multiplied by 100 to show percentages."].join(" ")},bargap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}},Color$6=colorExports,hasColorscale=helpers$A.hasColorscale,colorscaleDefaults$1=defaults$l,coercePattern=libExports.coercePattern,style_defaults=function(e,t,r,n,i){var a=r("marker.color",n),o=hasColorscale(e,"marker");o&&colorscaleDefaults$1(e,t,i,r,{prefix:"marker.",cLetter:"c"}),r("marker.line.color",Color$6.defaultLine),hasColorscale(e,"marker.line")&&colorscaleDefaults$1(e,t,i,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width"),r("marker.opacity"),coercePattern(r,"marker.pattern",a,o),r("selected.marker.color"),r("unselected.marker.color")},Lib$e=libExports,Color$5=colorExports,Registry$a=registry,handleXYDefaults=xy_defaults,handlePeriodDefaults=period_defaults,handleStyleDefaults$1=style_defaults,handleGroupingDefaults$1=grouping_defaults,attributes$a=attributes$c,coerceFont=Lib$e.coerceFont;function supplyDefaults$1(e,t,r,n){function i(r,n){return Lib$e.coerce(e,t,attributes$a,r,n)}if(handleXYDefaults(e,t,n,i)){handlePeriodDefaults(e,t,n,i),i("xhoverformat"),i("yhoverformat"),i("orientation",t.x&&!t.y?"h":"v"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate");var a=i("textposition");handleText$1(e,t,n,i,a,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),handleStyleDefaults$1(e,t,i,r,n);var o=(t.marker.line||{}).color,s=Registry$a.getComponentMethod("errorbars","supplyDefaults");s(e,t,o||Color$5.defaultLine,{axis:"y"}),s(e,t,o||Color$5.defaultLine,{axis:"x",inherit:"y"}),Lib$e.coerceSelectionMarkerOpacity(t,i)}else t.visible=!1}function crossTraceDefaults(e,t){var r,n;function i(e){return Lib$e.coerce(n._input,n,attributes$a,e)}if("group"===t.barmode)for(var a=0;a<e.length;a++)"bar"===(n=e[a]).type&&(r=n._input,handleGroupingDefaults$1(r,n,t,i))}function handleText$1(e,t,r,n,i,a){var o=!(!1===(a=a||{}).moduleHasSelected),s=!(!1===a.moduleHasUnselected),l=!(!1===a.moduleHasConstrain),c=!(!1===a.moduleHasCliponaxis),u=!(!1===a.moduleHasTextangle),d=!(!1===a.moduleHasInsideanchor),h=!!a.hasPathbar,g=Array.isArray(i)||"auto"===i,p=g||"inside"===i,f=g||"outside"===i;if(p||f){var m=coerceFont(n,"textfont",r.font),y=Lib$e.extendFlat({},m),b=!(e.textfont&&e.textfont.color);if(b&&delete y.color,coerceFont(n,"insidetextfont",y),h){var v=Lib$e.extendFlat({},m);b&&delete v.color,coerceFont(n,"pathbar.textfont",v)}f&&coerceFont(n,"outsidetextfont",m),o&&n("selected.textfont.color"),s&&n("unselected.textfont.color"),l&&n("constraintext"),c&&n("cliponaxis"),u&&n("textangle"),n("texttemplate")}p&&d&&n("insidetextanchor")}var defaults$4={supplyDefaults:supplyDefaults$1,crossTraceDefaults:crossTraceDefaults,handleText:handleText$1},Registry$9=registry,Lib$d=libExports,Color$4=colorExports,handleText=defaults$4.handleText,handleStyleDefaults=style_defaults,attributes$9=attributes$b,defaults$3=function(e,t,r,n){function i(r,n){return Lib$d.coerce(e,t,attributes$9,r,n)}var a=i("x"),o=i("y");i("cumulative.enabled")&&(i("cumulative.direction"),i("cumulative.currentbin")),i("text");var s=i("textposition");handleText(e,t,n,i,s,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat");var l=i("orientation",o&&!a?"h":"v"),c="v"===l?"x":"y",u="v"===l?"y":"x",d=a&&o?Math.min(Lib$d.minRowLength(a)&&Lib$d.minRowLength(o)):Lib$d.minRowLength(t[c]||[]);if(d){t._length=d,Registry$9.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],n),t[u]&&i("histfunc"),i("histnorm"),i("autobin"+c),handleStyleDefaults(e,t,i,r,n),Lib$d.coerceSelectionMarkerOpacity(t,i);var h=(t.marker.line||{}).color,g=Registry$9.getComponentMethod("errorbars","supplyDefaults");g(e,t,h||Color$4.defaultLine,{axis:"y"}),g(e,t,h||Color$4.defaultLine,{axis:"x",inherit:"y"})}else t.visible=!1},Lib$c=libExports,axisIds=axis_ids,traceIs=registry.traceIs,handleGroupingDefaults=grouping_defaults,nestedProperty=Lib$c.nestedProperty,getAxisGroup=constraints.getAxisGroup,BINATTRS=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],BINDIRECTIONS=["x","y"],cross_trace_defaults=function(e,t){var r,n,i,a,o,s,l,c=t._histogramBinOpts={},u=[],d={},h=[];function g(e,t){return Lib$c.coerce(r._input,r,r._module.attributes,e,t)}function p(e){return"v"===e.orientation?"x":"y"}function f(e,r,n){var i=e.uid+"__"+n;r||(r=i);var a=function(e,r){return axisIds.getFromTrace({_fullLayout:t},e,r).type}(e,n),o=e[n+"calendar"]||"",s=c[r],l=!0;s&&(a===s.axType&&o===s.calendar?(l=!1,s.traces.push(e),s.dirs.push(n)):(r=i,a!==s.axType&&Lib$c.warn(["Attempted to group the bins of trace",e.index,"set on a","type:"+a,"axis","with bins on","type:"+s.axType,"axis."].join(" ")),o!==s.calendar&&Lib$c.warn(["Attempted to group the bins of trace",e.index,"set with a",o,"calendar","with bins",s.calendar?"on a "+s.calendar+" calendar":"w/o a set calendar"].join(" ")))),l&&(c[r]={traces:[e],dirs:[n],axType:a,calendar:e[n+"calendar"]||""}),e["_"+n+"bingroup"]=r}for(o=0;o<e.length;o++)r=e[o],traceIs(r,"histogram")&&(u.push(r),delete r._xautoBinFinished,delete r._yautoBinFinished,traceIs(r,"2dMap")||handleGroupingDefaults(r._input,r,t,g));var m=t._alignmentOpts||{};for(o=0;o<u.length;o++){if(r=u[o],i="",!traceIs(r,"2dMap")){if(a=p(r),"group"===t.barmode&&r.alignmentgroup){var y=r[a+"axis"],b=getAxisGroup(t,y)+r.orientation;(m[b]||{})[r.alignmentgroup]&&(i=b)}i||"overlay"===t.barmode||(i=getAxisGroup(t,r.xaxis)+getAxisGroup(t,r.yaxis)+p(r))}i?(d[i]||(d[i]=[]),d[i].push(r)):h.push(r)}for(i in d)if(1!==(n=d[i]).length){var v=!1;for(n.length&&(r=n[0],v=g("bingroup")),i=v||i,o=0;o<n.length;o++){var x=(r=n[o])._input.bingroup;x&&x!==i&&Lib$c.warn(["Trace",r.index,"must match","within bingroup",i+".","Ignoring its bingroup:",x,"setting."].join(" ")),r.bingroup=i,f(r,i,p(r))}}else h.push(n[0]);for(o=0;o<h.length;o++){r=h[o];var B=g("bingroup");if(traceIs(r,"2dMap"))for(l=0;l<2;l++){var I=g((a=BINDIRECTIONS[l])+"bingroup",B?B+"__"+a:null);f(r,I,a)}else f(r,B,p(r))}for(i in c){var F=c[i];for(n=F.traces,s=0;s<BINATTRS.length;s++){var A,C,w=BINATTRS[s],Q=w.name;if("nbins"!==Q||!F.sizeFound){for(o=0;o<n.length;o++){if(r=n[o],a=F.dirs[o],A=w.aStr[a],void 0!==nestedProperty(r._input,A).get()){F[Q]=g(A),F[Q+"Found"]=!0;break}(C=(r._autoBin||{})[a]||{})[Q]&&nestedProperty(r,A).set(C[Q])}if("start"===Q||"end"===Q)for(;o<n.length;o++)(r=n[o])["_"+a+"bingroup"]&&g(A,(C=(r._autoBin||{})[a]||{})[Q]);"nbins"!==Q||F.sizeFound||F.nbinsFound||(r=n[0],F[Q]=g(A))}}}},Registry$8=registry,Axes$3=axesExports,Lib$b=libExports,layoutAttributes=layout_attributes$1,layout_defaults=function(e,t,r){function n(r,n){return Lib$b.coerce(e,t,layoutAttributes,r,n)}for(var i=!1,a=!1,o=!1,s={},l=n("barmode"),c=0;c<r.length;c++){var u=r[c];if(Registry$8.traceIs(u,"bar")&&u.visible){if(i=!0,"group"===l){var d=u.xaxis+u.yaxis;s[d]&&(o=!0),s[d]=!0}if(u.visible&&"histogram"===u.type)"category"!==Axes$3.getFromId({_fullLayout:t},u["v"===u.orientation?"xaxis":"yaxis"]).type&&(a=!0)}}i?("overlay"!==l&&n("barnorm"),n("bargap",a&&!o?0:.2),n("bargroupgap")):delete t.barmode},Lib$a=libExports,arrays_to_calcdata=function(e,t){for(var r=0;r<e.length;r++)e[r].i=r;Lib$a.mergeArray(t.text,e,"tx"),Lib$a.mergeArray(t.hovertext,e,"htx");var n=t.marker;if(n){Lib$a.mergeArray(n.opacity,e,"mo",!0),Lib$a.mergeArray(n.color,e,"mc");var i=n.line;i&&(Lib$a.mergeArray(i.color,e,"mlc"),Lib$a.mergeArrayCastPositive(i.width,e,"mlw"))}},isNumeric$4=fastIsnumeric,bin_functions={count:function(e,t,r){return r[e]++,1},sum:function(e,t,r,n){var i=n[t];return isNumeric$4(i)?(i=Number(i),r[e]+=i,i):0},avg:function(e,t,r,n,i){var a=n[t];return isNumeric$4(a)&&(a=Number(a),r[e]+=a,i[e]++),0},min:function(e,t,r,n){var i=n[t];if(isNumeric$4(i)){if(i=Number(i),!isNumeric$4(r[e]))return r[e]=i,i;if(r[e]>i){var a=i-r[e];return r[e]=i,a}}return 0},max:function(e,t,r,n){var i=n[t];if(isNumeric$4(i)){if(i=Number(i),!isNumeric$4(r[e]))return r[e]=i,i;if(r[e]<i){var a=i-r[e];return r[e]=i,a}}return 0}},norm_functions={percent:function(e,t){for(var r=e.length,n=100/t,i=0;i<r;i++)e[i]*=n},probability:function(e,t){for(var r=e.length,n=0;n<r;n++)e[n]/=t},density:function(e,t,r,n){var i=e.length;n=n||1;for(var a=0;a<i;a++)e[a]*=r[a]*n},"probability density":function(e,t,r,n){var i=e.length;n&&(t/=n);for(var a=0;a<i;a++)e[a]*=r[a]/t}},average=function(e,t){for(var r=e.length,n=0,i=0;i<r;i++)t[i]?(e[i]/=t[i],n+=e[i]):e[i]=null;return n},numConstants=numerical,oneYear=numConstants.ONEAVGYEAR,oneMonth=numConstants.ONEAVGMONTH,oneDay=numConstants.ONEDAY,oneHour=numConstants.ONEHOUR,oneMin=numConstants.ONEMIN,oneSec=numConstants.ONESEC,tickIncrement=axesExports.tickIncrement,bin_label_vals=function(e,t,r,n,i){var a,o,s=-1.1*t,l=-.1*t,c=e-l,u=r[0],d=r[1],h=Math.min(biggestDigitChanged(u+l,u+c,n,i),biggestDigitChanged(d+l,d+c,n,i)),g=Math.min(biggestDigitChanged(u+s,u+l,n,i),biggestDigitChanged(d+s,d+l,n,i));if(h>g&&g<Math.abs(d-u)/4e3?(a=h,o=!1):(a=Math.min(h,g),o=!0),"date"===n.type&&a>oneDay){var p=a===oneYear?1:6,f=a===oneYear?"M12":"M1";return function(t,r){var a=n.c2d(t,oneYear,i),s=a.indexOf("-",p);s>0&&(a=a.substr(0,s));var l=n.d2c(a,0,i);if(l<t){var c=tickIncrement(l,f,!1,i);(l+c)/2<t+e&&(l=c)}return r&&o?tickIncrement(l,f,!0,i):l}}return function(t,r){var n=a*Math.round(t/a);return n+a/10<t&&n+.9*a<t+e&&(n+=a),r&&o&&(n-=a),n}};function biggestDigitChanged(e,t,r,n){if(e*t<=0)return 1/0;for(var i=Math.abs(t-e),a="date"===r.type,o=biggestGuaranteedDigitChanged(i,a),s=0;s<10;s++){var l=biggestGuaranteedDigitChanged(80*o,a);if(o===l)break;if(!didDigitChange(l,e,t,a,r,n))break;o=l}return o}function biggestGuaranteedDigitChanged(e,t){return t&&e>oneSec?e>oneDay?e>1.1*oneYear?oneYear:e>1.1*oneMonth?oneMonth:oneDay:e>oneHour?oneHour:e>oneMin?oneMin:oneSec:Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function didDigitChange(e,t,r,n,i,a){if(n&&e>oneDay){var o=dateParts(t,i,a),s=dateParts(r,i,a),l=e===oneYear?0:1;return o[l]!==s[l]}return Math.floor(r/e)-Math.floor(t/e)>.1}function dateParts(e,t,r){var n=t.c2d(e,oneYear,r).split("-");return""===n[0]&&(n.unshift(),n[0]="-"+n[0]),n}var isNumeric$3=fastIsnumeric,Lib$9=libExports,Registry$7=registry,Axes$2=axesExports,arraysToCalcdata$1=arrays_to_calcdata,binFunctions=bin_functions,normFunctions=norm_functions,doAvg=average,getBinSpanLabelRound=bin_label_vals;function calc$3(e,t){var r,n,i,a,o=[],s=[],l="h"===t.orientation,c=Axes$2.getFromId(e,l?t.yaxis:t.xaxis),u=l?"y":"x",d={x:"y",y:"x"}[u],h=t[u+"calendar"],g=t.cumulative,p=calcAllAutoBins(e,t,c,u),f=p[0],m=p[1],y="string"==typeof f.size,b=[],v=y?b:f,x=[],B=[],I=[],F=0,A=t.histnorm,C=t.histfunc,w=-1!==A.indexOf("density");g.enabled&&w&&(A=A.replace(/ ?density$/,""),w=!1);var Q,U="max"===C||"min"===C?null:0,S=binFunctions.count,E=normFunctions[A],L=!1,_=function(e){return c.r2c(e,0,h)};for(Lib$9.isArrayOrTypedArray(t[d])&&"count"!==C&&(Q=t[d],L="avg"===C,S=binFunctions[C]),r=_(f.start),i=_(f.end)+(r-Axes$2.tickIncrement(r,f.size,!1,h))/1e6;r<i&&o.length<1e6&&(n=Axes$2.tickIncrement(r,f.size,!1,h),o.push((r+n)/2),s.push(U),I.push([]),b.push(r),w&&x.push(1/(n-r)),L&&B.push(0),!(n<=r));)r=n;b.push(r),y||"date"!==c.type||(v={start:_(v.start),end:_(v.end),size:v.size}),e._fullLayout._roundFnOpts||(e._fullLayout._roundFnOpts={});var T=t["_"+u+"bingroup"],R={leftGap:1/0,rightGap:1/0};T&&(e._fullLayout._roundFnOpts[T]||(e._fullLayout._roundFnOpts[T]=R),R=e._fullLayout._roundFnOpts[T]);var $,k=s.length,N=!0,G=R.leftGap,M=R.rightGap,D={};for(r=0;r<m.length;r++){var V=m[r];(a=Lib$9.findBin(V,v))>=0&&a<k&&(F+=S(a,r,s,Q,B),N&&I[a].length&&V!==m[I[a][0]]&&(N=!1),I[a].push(r),D[r]=a,G=Math.min(G,V-b[a]),M=Math.min(M,b[a+1]-V))}R.leftGap=G,R.rightGap=M,N||($=function(t,r){return function(){var n=e._fullLayout._roundFnOpts[T];return getBinSpanLabelRound(n.leftGap,n.rightGap,b,c,h)(t,r)}}),L&&(F=doAvg(s,B)),E&&E(s,F,x),g.enabled&&cdf(s,g.direction,g.currentbin);var H=Math.min(o.length,s.length),X=[],O=0,Z=H-1;for(r=0;r<H;r++)if(s[r]){O=r;break}for(r=H-1;r>=O;r--)if(s[r]){Z=r;break}for(r=O;r<=Z;r++)if(isNumeric$3(o[r])&&isNumeric$3(s[r])){var W={p:o[r],s:s[r],b:0};g.enabled||(W.pts=I[r],N?W.ph0=W.ph1=I[r].length?m[I[r][0]]:o[r]:(t._computePh=!0,W.ph0=$(b[r]),W.ph1=$(b[r+1],!0))),X.push(W)}return 1===X.length&&(X[0].width1=Axes$2.tickIncrement(X[0].p,f.size,!1,h)-X[0].p),arraysToCalcdata$1(X,t),Lib$9.isArrayOrTypedArray(t.selectedpoints)&&Lib$9.tagSelected(X,t,D),X}function calcAllAutoBins(e,t,r,n,i){var a,o,s,l,c,u,d,h=n+"bins",g=e._fullLayout,p=t["_"+n+"bingroup"],f=g._histogramBinOpts[p],m="overlay"===g.barmode,y=function(e){return r.r2c(e,0,l)},b=function(e){return r.c2r(e,0,l)},v="date"===r.type?function(e){return e||0===e?Lib$9.cleanDate(e,null,l):null}:function(e){return isNumeric$3(e)?Number(e):null};function x(e,t,r){t[e+"Found"]?(t[e]=v(t[e]),null===t[e]&&(t[e]=r[e])):(u[e]=t[e]=r[e],Lib$9.nestedProperty(o[0],h+"."+e).set(r[e]))}if(t["_"+n+"autoBinFinished"])delete t["_"+n+"autoBinFinished"];else{o=f.traces;var B=[],I=!0,F=!1,A=!1;for(a=0;a<o.length;a++)if((s=o[a]).visible){var C=f.dirs[a];c=s["_"+C+"pos0"]=r.makeCalcdata(s,C),B=Lib$9.concat(B,c),delete s["_"+n+"autoBinFinished"],!0===t.visible&&(I?I=!1:(delete s._autoBin,s["_"+n+"autoBinFinished"]=1),Registry$7.traceIs(s,"2dMap")&&(F=!0),"histogram2dcontour"===s.type&&(A=!0))}l=o[0][n+"calendar"];var w=Axes$2.autoBin(B,r,f.nbins,F,l,f.sizeFound&&f.size),Q=o[0]._autoBin={};if(u=Q[f.dirs[0]]={},A&&(f.size||(w.start=b(Axes$2.tickIncrement(y(w.start),w.size,!0,l))),void 0===f.end&&(w.end=b(Axes$2.tickIncrement(y(w.end),w.size,!1,l)))),m&&!Registry$7.traceIs(t,"2dMap")&&0===w._dataSpan&&"category"!==r.type&&"multicategory"!==r.type){if(i)return[w,c,!0];w=handleSingleValueOverlays(e,t,r,n,h)}(d=s.cumulative||{}).enabled&&"include"!==d.currentbin&&("decreasing"===d.direction?w.start=b(Axes$2.tickIncrement(y(w.start),w.size,!0,l)):w.end=b(Axes$2.tickIncrement(y(w.end),w.size,!1,l))),f.size=w.size,f.sizeFound||(u.size=w.size,Lib$9.nestedProperty(o[0],h+".size").set(w.size)),x("start",f,w),x("end",f,w)}c=t["_"+n+"pos0"],delete t["_"+n+"pos0"];var U=t._input[h]||{},S=Lib$9.extendFlat({},f),E=f.start,L=r.r2l(U.start),_=void 0!==L;if((f.startFound||_)&&L!==r.r2l(E)){var T=_?L:Lib$9.aggNums(Math.min,null,c),R={type:"category"===r.type||"multicategory"===r.type?"linear":r.type,r2l:r.r2l,dtick:f.size,tick0:E,calendar:l,range:[T,Axes$2.tickIncrement(T,f.size,!1,l)].map(r.l2r)},$=Axes$2.tickFirst(R);$>r.r2l(T)&&($=Axes$2.tickIncrement($,f.size,!0,l)),S.start=r.l2r($),_||Lib$9.nestedProperty(t,h+".start").set(S.start)}var k=f.end,N=r.r2l(U.end),G=void 0!==N;if((f.endFound||G)&&N!==r.r2l(k)){var M=G?N:Lib$9.aggNums(Math.max,null,c);S.end=r.l2r(M),G||Lib$9.nestedProperty(t,h+".start").set(S.end)}var D="autobin"+n;return!1===t._input[D]&&(t._input[h]=Lib$9.extendFlat({},t[h]||{}),delete t._input[D],delete t[D]),[S,c]}function handleSingleValueOverlays(e,t,r,n,i){var a,o,s,l=e._fullLayout,c=getConnectedHistograms(e,t),u=!1,d=1/0,h=[t];for(a=0;a<c.length;a++)if((o=c[a])===t)u=!0;else if(u){var g=calcAllAutoBins(e,o,r,n,!0),p=g[0],f=g[2];o["_"+n+"autoBinFinished"]=1,o["_"+n+"pos0"]=g[1],f?h.push(o):d=Math.min(d,p.size)}else s=l._histogramBinOpts[o["_"+n+"bingroup"]],d=Math.min(d,s.size||o[i].size);var m=new Array(h.length);for(a=0;a<h.length;a++)for(var y=h[a]["_"+n+"pos0"],b=0;b<y.length;b++)if(void 0!==y[b]){m[a]=y[b];break}for(isFinite(d)||(d=Lib$9.distinctVals(m).minDiff),a=0;a<h.length;a++){var v=(o=h[a])[n+"calendar"],x={start:r.c2r(m[a]-d/2,0,v),end:r.c2r(m[a]+d/2,0,v),size:d};o._input[i]=o[i]=x,(s=l._histogramBinOpts[o["_"+n+"bingroup"]])&&Lib$9.extendFlat(s,x)}return t[i]}function getConnectedHistograms(e,t){for(var r=t.xaxis,n=t.yaxis,i=t.orientation,a=[],o=e._fullData,s=0;s<o.length;s++){var l=o[s];"histogram"===l.type&&!0===l.visible&&l.orientation===i&&l.xaxis===r&&l.yaxis===n&&a.push(l)}return a}function cdf(e,t,r){var n,i,a;function o(t){a=e[t],e[t]/=2}function s(t){i=e[t],e[t]=a+i/2,a+=i}if("half"===r)if("increasing"===t)for(o(0),n=1;n<e.length;n++)s(n);else for(o(e.length-1),n=e.length-2;n>=0;n--)s(n);else if("increasing"===t){for(n=1;n<e.length;n++)e[n]+=e[n-1];"exclude"===r&&(e.unshift(0),e.pop())}else{for(n=e.length-2;n>=0;n--)e[n]+=e[n+1];"exclude"===r&&(e.push(0),e.shift())}}var calc_1$1={calc:calc$3,calcAllAutoBins:calcAllAutoBins},d3$2=d3Exports,Lib$8=libExports;function resizeText$1(e,t,r){var n=e._fullLayout,i=n["_"+r+"Text_minsize"];if(i){var a,o="hide"===n.uniformtext.mode;switch(r){case"funnelarea":case"pie":case"sunburst":a="g.slice";break;case"treemap":case"icicle":a="g.slice, g.pathbar";break;default:a="g.points > g.point"}t.selectAll(a).each((function(e){var t=e.transform;if(t){t.scale=o&&t.hide?0:i/t.fontSize;var r=d3$2.select(this).select("text");Lib$8.setTransormAndDisplay(r,t)}}))}}function recordMinTextSize$1(e,t,r){if(r.uniformtext.mode){var n=getMinKey(e),i=r.uniformtext.minsize,a=t.scale*t.fontSize;t.hide=a<i,r[n]=r[n]||1/0,t.hide||(r[n]=Math.min(r[n],Math.max(a,i)))}}function clearMinTextSize$1(e,t){t[getMinKey(e)]=void 0}function getMinKey(e){return"_"+e+"Text_minsize"}var uniform_text={recordMinTextSize:recordMinTextSize$1,clearMinTextSize:clearMinTextSize$1,resizeText:resizeText$1},helpers$2={},isNumeric$2=fastIsnumeric,tinycolor$1=tinycolorExports,isArrayOrTypedArray$1=libExports.isArrayOrTypedArray;helpers$2.coerceString=function(e,t,r){if("string"==typeof t){if(t||!e.noBlank)return t}else if(("number"==typeof t||!0===t)&&!e.strict)return String(t);return void 0!==r?r:e.dflt},helpers$2.coerceNumber=function(e,t,r){if(isNumeric$2(t)){t=+t;var n=e.min,i=e.max;if(!(void 0!==n&&t<n||void 0!==i&&t>i))return t}return void 0!==r?r:e.dflt},helpers$2.coerceColor=function(e,t,r){return tinycolor$1(t).isValid()?t:void 0!==r?r:e.dflt},helpers$2.coerceEnumerated=function(e,t,r){return e.coerceNumber&&(t=+t),-1!==e.values.indexOf(t)?t:void 0!==r?r:e.dflt},helpers$2.getValue=function(e,t){var r;return Array.isArray(e)?t<e.length&&(r=e[t]):r=e,r},helpers$2.getLineWidth=function(e,t){return 0<t.mlw?t.mlw:isArrayOrTypedArray$1(e.marker.line.width)?0:e.marker.line.width};var d3$1=d3Exports,Color$3=colorExports,Drawing$1=drawingExports,Lib$7=libExports,Registry$6=registry,resizeText=uniform_text.resizeText,attributes$8=attributes$c,attributeTextFont=attributes$8.textfont,attributeInsideTextFont=attributes$8.insidetextfont,attributeOutsideTextFont=attributes$8.outsidetextfont,helpers$1=helpers$2;function style$1(e){var t=d3$1.select(e).selectAll("g.barlayer").selectAll("g.trace");resizeText(e,t,"bar");var r=t.size(),n=e._fullLayout;t.style("opacity",(function(e){return e[0].trace.opacity})).each((function(e){("stack"===n.barmode&&r>1||0===n.bargap&&0===n.bargroupgap&&!e[0].trace.marker.line.width)&&d3$1.select(this).attr("shape-rendering","crispEdges")})),t.selectAll("g.points").each((function(t){stylePoints(d3$1.select(this),t[0].trace,e)})),Registry$6.getComponentMethod("errorbars","style")(t)}function stylePoints(e,t,r){Drawing$1.pointStyle(e.selectAll("path"),t,r),styleTextPoints(e,t,r)}function styleTextPoints(e,t,r){e.selectAll("text").each((function(e){var n=d3$1.select(this),i=Lib$7.ensureUniformFontSize(r,determineFont(n,e,t,r));Drawing$1.font(n,i)}))}function styleOnSelect(e,t,r){var n=t[0].trace;n.selectedpoints?stylePointsInSelectionMode(r,n,e):(stylePoints(r,n,e),Registry$6.getComponentMethod("errorbars","style")(r))}function stylePointsInSelectionMode(e,t,r){Drawing$1.selectedPointStyle(e.selectAll("path"),t),styleTextInSelectionMode(e.selectAll("text"),t,r)}function styleTextInSelectionMode(e,t,r){e.each((function(e){var n,i=d3$1.select(this);if(e.selected){n=Lib$7.ensureUniformFontSize(r,determineFont(i,e,t,r));var a=t.selected.textfont&&t.selected.textfont.color;a&&(n.color=a),Drawing$1.font(i,n)}else Drawing$1.selectedTextStyle(i,t)}))}function determineFont(e,t,r,n){var i=n._fullLayout.font,a=r.textfont;if(e.classed("bartext-inside")){var o=getBarColor(t,r);a=getInsideTextFont(r,t.i,i,o)}else e.classed("bartext-outside")&&(a=getOutsideTextFont(r,t.i,i));return a}function getTextFont(e,t,r){return getFontValue(attributeTextFont,e.textfont,t,r)}function getInsideTextFont(e,t,r,n){var i=getTextFont(e,t,r);return(void 0===e._input.textfont||void 0===e._input.textfont.color||Array.isArray(e.textfont.color)&&void 0===e.textfont.color[t])&&(i={color:Color$3.contrast(n),family:i.family,size:i.size}),getFontValue(attributeInsideTextFont,e.insidetextfont,t,i)}function getOutsideTextFont(e,t,r){var n=getTextFont(e,t,r);return getFontValue(attributeOutsideTextFont,e.outsidetextfont,t,n)}function getFontValue(e,t,r,n){t=t||{};var i=helpers$1.getValue(t.family,r),a=helpers$1.getValue(t.size,r),o=helpers$1.getValue(t.color,r);return{family:helpers$1.coerceString(e.family,i,n.family),size:helpers$1.coerceNumber(e.size,a,n.size),color:helpers$1.coerceColor(e.color,o,n.color)}}function getBarColor(e,t){return"waterfall"===t.type?t[e.dir].marker.color:e.mcc||e.mc||t.marker.color}var style_1={style:style$1,styleTextPoints:styleTextPoints,styleOnSelect:styleOnSelect,getInsideTextFont:getInsideTextFont,getOutsideTextFont:getOutsideTextFont,getBarColor:getBarColor,resizeText:resizeText},d3=d3Exports,isNumeric$1=fastIsnumeric,Lib$6=libExports,svgTextUtils=svg_text_utils,Color$2=colorExports,Drawing=drawingExports,Registry$5=registry,tickText=axesExports.tickText,uniformText=uniform_text,recordMinTextSize=uniformText.recordMinTextSize,clearMinTextSize=uniformText.clearMinTextSize,style=style_1,helpers=helpers$2,constants=constants$4,attributes$7=attributes$c,attributeText=attributes$7.text,attributeTextPosition=attributes$7.textposition,appendArrayPointValue$1=helpers$y.appendArrayPointValue,TEXTPAD=constants.TEXTPAD;function keyFunc(e){return e.id}function getKeyFunc(e){if(e.ids)return keyFunc}function dirSign(e,t){return e<t?1:-1}function getXY(e,t,r,n){var i=[],a=[],o=n?t:r,s=n?r:t;return i[0]=o.c2p(e.s0,!0),a[0]=s.c2p(e.p0,!0),i[1]=o.c2p(e.s1,!0),a[1]=s.c2p(e.p1,!0),n?[i,a]:[a,i]}function transition(e,t,r,n){var i;return!t.uniformtext.mode&&hasTransition(r)?(n&&(i=n()),e.transition().duration(r.duration).ease(r.easing).each("end",(function(){i&&i()})).each("interrupt",(function(){i&&i()}))):e}function hasTransition(e){return e&&e.duration>0}function plot(e,t,r,n,i,a){var o=t.xaxis,s=t.yaxis,l=e._fullLayout,c=e._context.staticPlot;i||(i={mode:l.barmode,norm:l.barmode,gap:l.bargap,groupgap:l.bargroupgap},clearMinTextSize("bar",l));var u=Lib$6.makeTraceGroups(n,r,"trace bars").each((function(r){var n=d3.select(this),u=r[0].trace,d="waterfall"===u.type,h="funnel"===u.type,g="bar"===u.type||h,p=0;d&&u.connector.visible&&"between"===u.connector.mode&&(p=u.connector.line.width/2);var f="h"===u.orientation,m=hasTransition(i),y=Lib$6.ensureSingle(n,"g","points"),b=getKeyFunc(u),v=y.selectAll("g.point").data(Lib$6.identity,b);v.enter().append("g").classed("point",!0),v.exit().remove(),v.each((function(n,d){var h,y,b=d3.select(this),v=getXY(n,o,s,f),x=v[0][0],B=v[0][1],I=v[1][0],F=v[1][1],A=0==(f?B-x:F-I);if(A&&g&&helpers.getLineWidth(u,n)&&(A=!1),A||(A=!(isNumeric$1(x)&&isNumeric$1(B)&&isNumeric$1(I)&&isNumeric$1(F))),n.isBlank=A,A&&(f?B=x:F=I),p&&!A&&(f?(x-=dirSign(x,B)*p,B+=dirSign(x,B)*p):(I-=dirSign(I,F)*p,F+=dirSign(I,F)*p)),"waterfall"===u.type){if(!A){var C=u[n.dir].marker;h=C.line.width,y=C.color}}else h=helpers.getLineWidth(u,n),y=n.mc||u.marker.color;function w(e){var t=d3.round(h/2%1,2);return 0===i.gap&&0===i.groupgap?d3.round(Math.round(e)-t,2):e}if(!e._context.staticPlot){var Q=Color$2.opacity(y)<1||h>.01?w:function(e,t,r){return r&&e===t?e:Math.abs(e-t)>=2?w(e):e>t?Math.ceil(e):Math.floor(e)};x=Q(x,B,f),B=Q(B,x,f),I=Q(I,F,!f),F=Q(F,I,!f)}var U=transition(Lib$6.ensureSingle(b,"path"),l,i,a);if(U.style("vector-effect",c?"none":"non-scaling-stroke").attr("d",isNaN((B-x)*(F-I))||A&&e._context.staticPlot?"M0,0Z":"M"+x+","+I+"V"+F+"H"+B+"V"+I+"Z").call(Drawing.setClipUrl,t.layerClipId,e),!l.uniformtext.mode&&m){var S=Drawing.makePointStyleFns(u);Drawing.singlePointStyle(n,U,u,S,e)}appendBarText(e,t,b,r,d,x,B,I,F,i,a),t.layerClipId&&Drawing.hideOutsideRangePoint(n,b.select("text"),o,s,u.xcalendar,u.ycalendar)}));var x=!1===u.cliponaxis;Drawing.setClipUrl(n,x?null:t.layerClipId,e)}));Registry$5.getComponentMethod("errorbars","plot")(e,u,t,i)}function appendBarText(e,t,r,n,i,a,o,s,l,c,u){var d,h=t.xaxis,g=t.yaxis,p=e._fullLayout;function f(t,r,n){return Lib$6.ensureSingle(t,"text").text(r).attr({class:"bartext bartext-"+d,"text-anchor":"middle","data-notex":1}).call(Drawing.font,n).call(svgTextUtils.convertToTspans,e)}var m=n[0].trace,y="h"===m.orientation,b=getText(p,n,i,h,g);d=getTextPosition(m,i);var v="stack"===c.mode||"relative"===c.mode,x=n[i],B=!v||x._outmost;if(b&&"none"!==d&&(!x.isBlank&&a!==o&&s!==l||"auto"!==d&&"inside"!==d)){var I=p.font,F=style.getBarColor(n[i],m),A=style.getInsideTextFont(m,i,I,F),C=style.getOutsideTextFont(m,i,I),w=r.datum();y?"log"===h.type&&w.s0<=0&&(a=h.range[0]<h.range[1]?0:h._length):"log"===g.type&&w.s0<=0&&(s=g.range[0]<g.range[1]?g._length:0);var Q,U,S,E,L,_=Math.abs(o-a)-2*TEXTPAD,T=Math.abs(l-s)-2*TEXTPAD;if("outside"===d&&(B||x.hasB||(d="inside")),"auto"===d)if(B)d="inside",Q=f(r,b,L=Lib$6.ensureUniformFontSize(e,A)),S=(U=Drawing.bBox(Q.node())).width,E=U.height,S>0&&E>0&&(S<=_&&E<=T||S<=T&&E<=_||(y?_>=S*(T/E):T>=E*(_/S)))?d="inside":(d="outside",Q.remove(),Q=null);else d="inside";if(!Q){var R=(Q=f(r,b,L=Lib$6.ensureUniformFontSize(e,"outside"===d?C:A))).attr("transform");if(Q.attr("transform",""),S=(U=Drawing.bBox(Q.node())).width,E=U.height,Q.attr("transform",R),S<=0||E<=0)return void Q.remove()}var $,k=m.textangle;($="outside"===d?toMoveOutsideBar(a,o,s,l,U,{isHorizontal:y,constrained:"both"===m.constraintext||"outside"===m.constraintext,angle:k}):toMoveInsideBar(a,o,s,l,U,{isHorizontal:y,constrained:"both"===m.constraintext||"inside"===m.constraintext,angle:k,anchor:m.insidetextanchor})).fontSize=L.size,recordMinTextSize("histogram"===m.type?"bar":m.type,$,p),x.transform=$;var N=transition(Q,p,c,u);Lib$6.setTransormAndDisplay(N,$)}else r.select("text").remove()}function getRotateFromAngle(e){return"auto"===e?0:e}function getRotatedTextSize(e,t){var r=Math.PI/180*t,n=Math.abs(Math.sin(r)),i=Math.abs(Math.cos(r));return{x:e.width*i+e.height*n,y:e.width*n+e.height*i}}function toMoveInsideBar(e,t,r,n,i,a){var o=!!a.isHorizontal,s=!!a.constrained,l=a.angle||0,c=a.anchor||"end",u="end"===c,d="start"===c,h=((a.leftToRight||0)+1)/2,g=1-h,p=i.width,f=i.height,m=Math.abs(t-e),y=Math.abs(n-r),b=m>2*TEXTPAD&&y>2*TEXTPAD?TEXTPAD:0;m-=2*b,y-=2*b;var v=getRotateFromAngle(l);"auto"!==l||p<=m&&f<=y||!(p>m||f>y)||(p>y||f>m)&&p<f==m<y||(v+=90);var x=getRotatedTextSize(i,v),B=1;s&&(B=Math.min(1,m/x.x,y/x.y));var I=i.left*g+i.right*h,F=(i.top+i.bottom)/2,A=(e+TEXTPAD)*g+(t-TEXTPAD)*h,C=(r+n)/2,w=0,Q=0;if(d||u){var U=(o?x.x:x.y)/2,S=o?dirSign(e,t):dirSign(r,n);o?d?(A=e+S*b,w=-S*U):(A=t-S*b,w=S*U):d?(C=r+S*b,Q=-S*U):(C=n-S*b,Q=S*U)}return{textX:I,textY:F,targetX:A,targetY:C,anchorX:w,anchorY:Q,scale:B,rotate:v}}function toMoveOutsideBar(e,t,r,n,i,a){var o,s=!!a.isHorizontal,l=!!a.constrained,c=a.angle||0,u=i.width,d=i.height,h=Math.abs(t-e),g=Math.abs(n-r);o=s?g>2*TEXTPAD?TEXTPAD:0:h>2*TEXTPAD?TEXTPAD:0;var p=1;l&&(p=s?Math.min(1,g/d):Math.min(1,h/u));var f=getRotateFromAngle(c),m=getRotatedTextSize(i,f),y=(s?m.x:m.y)/2,b=(i.left+i.right)/2,v=(i.top+i.bottom)/2,x=(e+t)/2,B=(r+n)/2,I=0,F=0,A=s?dirSign(t,e):dirSign(r,n);return s?(x=t-A*o,I=A*y):(B=n+A*o,F=-A*y),{textX:b,textY:v,targetX:x,targetY:B,anchorX:I,anchorY:F,scale:p,rotate:f}}function getText(e,t,r,n,i){var a,o=t[0].trace;return a=o.texttemplate?calcTexttemplate(e,t,r,n,i):o.textinfo?calcTextinfo(t,r,n,i):helpers.getValue(o.text,r),helpers.coerceString(attributeText,a)}function getTextPosition(e,t){var r=helpers.getValue(e.textposition,t);return helpers.coerceEnumerated(attributeTextPosition,r)}function calcTexttemplate(e,t,r,n,i){var a=t[0].trace,o=Lib$6.castOption(a,r,"texttemplate");if(!o)return"";var s,l,c,u,d="histogram"===a.type,h="waterfall"===a.type,g="funnel"===a.type,p="h"===a.orientation;function f(e){return tickText(u,u.c2l(e),!0).text}p?(s="y",l=i,c="x",u=n):(s="x",l=n,c="y",u=i);var m=t[r],y={};y.label=m.p,y.labelLabel=y[s+"Label"]=function(e){return tickText(l,l.c2l(e),!0).text}(m.p);var b=Lib$6.castOption(a,m.i,"text");(0===b||b)&&(y.text=b),y.value=m.s,y.valueLabel=y[c+"Label"]=f(m.s);var v={};appendArrayPointValue$1(v,a,m.i),(d||void 0===v.x)&&(v.x=p?y.value:y.label),(d||void 0===v.y)&&(v.y=p?y.label:y.value),(d||void 0===v.xLabel)&&(v.xLabel=p?y.valueLabel:y.labelLabel),(d||void 0===v.yLabel)&&(v.yLabel=p?y.labelLabel:y.valueLabel),h&&(y.delta=+m.rawS||m.s,y.deltaLabel=f(y.delta),y.final=m.v,y.finalLabel=f(y.final),y.initial=y.final-y.delta,y.initialLabel=f(y.initial)),g&&(y.value=m.s,y.valueLabel=f(y.value),y.percentInitial=m.begR,y.percentInitialLabel=Lib$6.formatPercent(m.begR),y.percentPrevious=m.difR,y.percentPreviousLabel=Lib$6.formatPercent(m.difR),y.percentTotal=m.sumR,y.percenTotalLabel=Lib$6.formatPercent(m.sumR));var x=Lib$6.castOption(a,m.i,"customdata");return x&&(y.customdata=x),Lib$6.texttemplateString(o,y,e._d3locale,v,y,a._meta||{})}function calcTextinfo(e,t,r,n){var i=e[0].trace,a="h"===i.orientation,o="waterfall"===i.type,s="funnel"===i.type;function l(e){return tickText(a?r:n,+e,!0).text}var c,u=i.textinfo,d=e[t],h=u.split("+"),g=[],p=function(e){return-1!==h.indexOf(e)};if(p("label")&&g.push(function(e){return tickText(a?n:r,e,!0).text}(e[t].p)),p("text")&&(0===(c=Lib$6.castOption(i,d.i,"text"))||c)&&g.push(c),o){var f=+d.rawS||d.s,m=d.v,y=m-f;p("initial")&&g.push(l(y)),p("delta")&&g.push(l(f)),p("final")&&g.push(l(m))}if(s){p("value")&&g.push(l(d.s));var b=0;p("percent initial")&&b++,p("percent previous")&&b++,p("percent total")&&b++;var v=b>1;p("percent initial")&&(c=Lib$6.formatPercent(d.begR),v&&(c+=" of initial"),g.push(c)),p("percent previous")&&(c=Lib$6.formatPercent(d.difR),v&&(c+=" of previous"),g.push(c)),p("percent total")&&(c=Lib$6.formatPercent(d.sumR),v&&(c+=" of total"),g.push(c))}return g.join("<br>")}var plot_1={plot:plot,toMoveInsideBar:toMoveInsideBar},Fx$1=fx,Registry$4=registry,Color$1=colorExports,fillText=libExports.fillText,getLineWidth=helpers$2.getLineWidth,hoverLabelText$1=axesExports.hoverLabelText,BADNUM=numerical.BADNUM;function hoverPoints(e,t,r,n,i){var a=hoverOnBars(e,t,r,n,i);if(a){var o=a.cd,s=o[0].trace,l=o[a.index];return a.color=getTraceColor(s,l),Registry$4.getComponentMethod("errorbars","hoverInfo")(l,s,a),[a]}}function hoverOnBars(e,t,r,n,i){var a,o,s,l,c,u,d,h=e.cd,g=h[0].trace,p=h[0].t,f="closest"===n,m="waterfall"===g.type,y=e.maxHoverDistance,b=e.maxSpikeDistance;"h"===g.orientation?(a=r,o=t,s="y",l="x",c=E,u=U):(a=t,o=r,s="x",l="y",u=E,c=U);var v=g[s+"period"],x=f||v;function B(e){return F(e,-1)}function I(e){return F(e,1)}function F(e,t){var r=e.w;return e[s]+t*r/2}function A(e){return e[s+"End"]-e[s+"Start"]}var C=f?B:v?function(e){return e.p-A(e)/2}:function(e){return Math.min(B(e),e.p-p.bardelta/2)},w=f?I:v?function(e){return e.p+A(e)/2}:function(e){return Math.max(I(e),e.p+p.bardelta/2)};function Q(e,t,r){return i.finiteRange&&(r=0),Fx$1.inbox(e-a,t-a,r+Math.min(1,Math.abs(t-e)/d)-1)}function U(e){return Q(C(e),w(e),y)}function S(e){var t=e[l];if(m){var r=Math.abs(e.rawS)||0;o>0?t+=r:o<0&&(t-=r)}return t}function E(e){var t=o,r=e.b,n=S(e);return Fx$1.inbox(r-t,n-t,y+(n-t)/(n-r)-1)}var L=e[s+"a"],_=e[l+"a"];d=Math.abs(L.r2c(L.range[1])-L.r2c(L.range[0]));var T=Fx$1.getDistanceFunction(n,c,u,(function(e){return(c(e)+u(e))/2}));if(Fx$1.getClosest(h,T,e),!1!==e.index&&h[e.index].p!==BADNUM){x||(C=function(e){return Math.min(B(e),e.p-p.bargroupwidth/2)},w=function(e){return Math.max(I(e),e.p+p.bargroupwidth/2)});var R=h[e.index],$=g.base?R.b+R.s:R.s;e[l+"0"]=e[l+"1"]=_.c2p(R[l],!0),e[l+"LabelVal"]=$;var k=p.extents[p.extents.round(R.p)];e[s+"0"]=L.c2p(f?C(R):k[0],!0),e[s+"1"]=L.c2p(f?w(R):k[1],!0);var N=void 0!==R.orig_p;return e[s+"LabelVal"]=N?R.orig_p:R.p,e.labelLabel=hoverLabelText$1(L,e[s+"LabelVal"],g[s+"hoverformat"]),e.valueLabel=hoverLabelText$1(_,e[l+"LabelVal"],g[l+"hoverformat"]),e.baseLabel=hoverLabelText$1(_,R.b,g[l+"hoverformat"]),e.spikeDistance=(function(e){var t=o,r=e.b,n=S(e);return Fx$1.inbox(r-t,n-t,b+(n-t)/(n-r)-1)}(R)+function(e){return Q(B(e),I(e),b)}(R))/2,e[s+"Spike"]=L.c2p(R.p,!0),fillText(R,g,e),e.hovertemplate=g.hovertemplate,e}}function getTraceColor(e,t){var r=t.mcc||e.marker.color,n=t.mlcc||e.marker.line.color,i=getLineWidth(e,t);return Color$1.opacity(r)?r:Color$1.opacity(n)&&i?n:void 0}var hover$1={hoverPoints:hoverPoints,hoverOnBars:hoverOnBars,getTraceColor:getTraceColor},barHover=hover$1.hoverPoints,hoverLabelText=axesExports.hoverLabelText,hover=function(e,t,r,n,i){var a=barHover(e,t,r,n,i);if(a){var o=(e=a[0]).cd[e.index],s=e.cd[0].trace;if(!s.cumulative.enabled){var l="h"===s.orientation?"y":"x";e[l+"Label"]=hoverLabelText(e[l+"a"],[o.ph0,o.ph1],s[l+"hoverformat"])}return a}},select=function(e,t){var r,n=e.cd,i=e.xaxis,a=e.yaxis,o=n[0].trace,s="funnel"===o.type,l="h"===o.orientation,c=[];if(!1===t)for(r=0;r<n.length;r++)n[r].selected=0;else for(r=0;r<n.length;r++){var u=n[r],d="ct"in u?u.ct:getCentroid(u,i,a,l,s);t.contains(d,!1,r,e)?(c.push({pointNumber:r,x:i.c2d(u.x),y:a.c2d(u.y)}),u.selected=1):u.selected=0}return c};function getCentroid(e,t,r,n,i){var a=t.c2p(n?e.s0:e.p0,!0),o=t.c2p(n?e.s1:e.p1,!0),s=r.c2p(n?e.p0:e.s0,!0),l=r.c2p(n?e.p1:e.s1,!0);return i?[(a+o)/2,(s+l)/2]:n?[o,(s+l)/2]:[(a+o)/2,l]}var event_data=function(e,t,r,n,i){if(e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,"zLabelVal"in t&&(e.z=t.zLabelVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),!(r.cumulative||{}).enabled){var a,o=Array.isArray(i)?n[0].pts[i[0]][i[1]]:n[i].pts;if(e.pointNumbers=o,e.binNumber=e.pointNumber,delete e.pointNumber,delete e.pointIndex,r._indexToPoints){a=[];for(var s=0;s<o.length;s++)a=a.concat(r._indexToPoints[o[s]])}else a=o;e.pointIndices=a}return e},histogram$1={attributes:attributes$b,layoutAttributes:layout_attributes$1,supplyDefaults:defaults$3,crossTraceDefaults:cross_trace_defaults,supplyLayoutDefaults:layout_defaults,calc:calc_1$1.calc,crossTraceCalc:cross_trace_calc$1.crossTraceCalc,plot:plot_1.plot,layerName:"barlayer",style:style_1.style,styleOnSelect:style_1.styleOnSelect,colorbar:marker_colorbar,hoverPoints:hover,selectPoints:select,eventData:event_data,moduleType:"trace",name:"histogram",basePlotModule:cartesian,categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{description:["The sample data from which statistics are computed is set in `x`","for vertically spanning histograms and","in `y` for horizontally spanning histograms.","Binning options are set `xbins` and `ybins` respectively","if no aggregation data is provided."].join(" ")}};histogram$2.exports=histogram$1;var histogram=getDefaultExportFromCjs(histogramExports),PlotlyHistogram=_mergeNamespaces({__proto__:null,default:histogram},[histogramExports]);function decodeBase64(e,t){var r=atob(e);if(t){for(var n=new Uint8Array(r.length),i=0,a=r.length;i<a;++i)n[i]=r.charCodeAt(i);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return r}function createURL(e,t,r){var n=void 0===t?null:t,i=decodeBase64(e,void 0!==r&&r),a=i.indexOf("\n",10)+1,o=i.substring(a)+(n?"//# sourceMappingURL="+n:""),s=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(s)}function createBase64WorkerFactory(e,t,r){var n;return function(i){return n=n||createURL(e,t,r),new Worker(n,i)}}var WorkerFactory=createBase64WorkerFactory("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCXZhciBkaXN0cmlidXRpb25zRXhwb3J0cyA9IHt9OwoJdmFyIGRpc3RyaWJ1dGlvbnMgPSB7CgkgIGdldCBleHBvcnRzKCl7IHJldHVybiBkaXN0cmlidXRpb25zRXhwb3J0czsgfSwKCSAgc2V0IGV4cG9ydHModil7IGRpc3RyaWJ1dGlvbnNFeHBvcnRzID0gdjsgfSwKCX07CgoJKGZ1bmN0aW9uIChtb2R1bGUpIHsKCgkgIC8vIEEgbnVtYmVyIG9mIGxvZyBwcm9iYWJpbGl0eSBkZW5zaXR5IGZ1bmN0aW9ucyAoUERGKS4gTmFtaW5nIGFuZCBwYXJhbWV0ZXJpemF0aW9uCgkgIC8vIHNob3VsZCBtYXRjaCBSJ3MsIGV4Y2VwdCBmb3IgdGhhdCBhbGwgZnVuY3Rpb25zIHJlc2lkZSBpbiBhbiBsZCBvYmplY3QgKAoJICAvLyBhcyBpbiAibG9nIGRlbnNpdHkiKSwgc28gdG8gZ2V0IGEgbm9ybWFsIGxvZyBkZW5zaXR5IHlvdSB3b3VsZCB3cml0ZQoJICAvLyBsZC5ub3JtKC4uLikuCgkgIC8vIE1vc3Qgb2YgdGhlIGNvZGUgYmVsb3cgaXMgZGlyZWN0bHkgdGFrZW4gZnJvbSB0aGUgZ3JlYXQgSnN0YXQgcHJvamVjdAoJICAvLyAoaHR0cHM6Ly9naXRodWIuY29tL2pzdGF0Lykgd2hpY2ggaW5jbHVkZXMgUERGIGZvciBtYW55IGNvbW1vbiBwcm9iYWJpbGl0eQoJICAvLyBkaXN0cmlidXRpb25zLiBXaGF0IEkgaGF2ZSBkb25lIGlzIG9ubHkgdG8gY29udmVydCB0aGVzZSB0byBsb2cgUERGcy4KCgkgIC8qCgkgIE9yaWdpbmFsIHdvcmsgQ29weXJpZ2h0IChjKSAyMDEzIGpTdGF0CgkgIE1vZGlmaWVkIHdvcmsgQ29weXJpZ2h0IChjKSAyMDE1IFJhc211cyBCw6XDpXRoIAoJICAJUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weQoJICBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwgdG8gZGVhbAoJICBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzCgkgIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwKCSAgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzCgkgIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6CgkgIAlUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgoJICBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KCSAgCVRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCgkgIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAoJICBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUKCSAgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgoJICBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLAoJICBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOCgkgIFRIRSBTT0ZUV0FSRS4KCSAgCSovCgoJICAvLyBUaGlzIGJvaWxlciBwbGF0ZSBjb2RlIGhlcmUgaXMgdGFrZW4gZnJvbToKCSAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3VtZGpzL3VtZC9ibG9iL21hc3Rlci90ZW1wbGF0ZXMvcmV0dXJuRXhwb3J0cy5qcwoJICAvLyBJdCBzaG91bGQgbWFrZSBzaHVyZSB0aGF0IG1vZHVsZSBjYW4gYmUgaW1wb3J0ZWQgYm90aCBpbiB0aGUgYnJvd3NlciwKCSAgLy8gTm9kZSwgYW5kIGJ5IHVzaW5nIHRoZSBBc3luY2hyb25vdXMgTW9kdWxlIERlZmluaXRpb24gc3RhbmRhcmQuCgkgIC8vIElmIHRoaXMgbW9kdWxlIGlzIGxvYWRlZCBpbiB0aGUgYnJvd3NlciBpdCB3aWxsIGNyZWF0ZWQgdGhlIGdsb2JhbAoJICAvLyBvYmplY3QgbGQgLgoJICAoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHsKCSAgICBpZiAobW9kdWxlLmV4cG9ydHMpIHsKCSAgICAgIC8vIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dAoJICAgICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsCgkgICAgICAvLyBsaWtlIE5vZGUuCgkgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsKCSAgICB9IGVsc2UgewoJICAgICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdykKCSAgICAgIHJvb3QubGQgPSBmYWN0b3J5KCk7CgkgICAgfQoJICB9KShjb21tb25qc0dsb2JhbCwgZnVuY3Rpb24gKCkgewoJICAgIC8vIE9iamVjdCB0byBob2xkIHRoZSBmdW5jdGlvbnMgdG8gYmUgZXhwb3J0ZWQuCgkgICAgdmFyIGxkID0ge307CgoJICAgIC8vLy8vLy8vLy8gSGVscGVyIGZ1bmN0aW9ucyAvLy8vLy8vLy8vCgkgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCgkgICAgdmFyIGxnYW1tYSA9IGZ1bmN0aW9uICh4KSB7CgkgICAgICB2YXIgaiA9IDA7CgkgICAgICB2YXIgY29mID0gWzc2LjE4MDA5MTcyOTQ3MTQ2LCAtODYuNTA1MzIwMzI5NDE2NzcsIDI0LjAxNDA5ODI0MDgzMDkxLCAtMS4yMzE3Mzk1NzI0NTAxNTUsIDAuMTIwODY1MDk3Mzg2NjE3OWUtMiwgLTAuNTM5NTIzOTM4NDk1M2UtNV07CgkgICAgICB2YXIgc2VyID0gMS4wMDAwMDAwMDAxOTAwMTU7CgkgICAgICB2YXIgeHgsIHksIHRtcDsKCSAgICAgIHRtcCA9ICh5ID0geHggPSB4KSArIDUuNTsKCSAgICAgIHRtcCAtPSAoeHggKyAwLjUpICogbG9nKHRtcCk7CgkgICAgICBmb3IgKDsgaiA8IDY7IGorKykgc2VyICs9IGNvZltqXSAvICsreTsKCSAgICAgIHJldHVybiBsb2coMi41MDY2MjgyNzQ2MzEwMDA1ICogc2VyIC8geHgpIC0gdG1wOwoJICAgIH07CgkgICAgbGQubGdhbW1hID0gbGdhbW1hOwoJICAgIHZhciBsZmFjdG9yaWFsID0gZnVuY3Rpb24gKG4pIHsKCSAgICAgIHJldHVybiBuIDwgMCA/IE5hTiA6IGxnYW1tYShuICsgMSk7CgkgICAgfTsKCSAgICBsZC5sZmFjdG9yaWFsID0gbGZhY3RvcmlhbDsKCSAgICB2YXIgbGNob29zZSA9IGZ1bmN0aW9uIChuLCBrKSB7CgkgICAgICByZXR1cm4gbGZhY3RvcmlhbChuKSAtIGxmYWN0b3JpYWwoaykgLSBsZmFjdG9yaWFsKG4gLSBrKTsKCSAgICB9OwoJICAgIGxkLmxjaG9vc2UgPSBsY2hvb3NlOwoJICAgIHZhciBsYmV0YSA9IGZ1bmN0aW9uIChhLCBiKSB7CgkgICAgICByZXR1cm4gbGdhbW1hKGEpICsgbGdhbW1hKGIpIC0gbGdhbW1hKGEgKyBiKTsKCSAgICB9OwoJICAgIGxkLmxiZXRhID0gbGJldGE7CgkgICAgdmFyIGxvZyA9IE1hdGgubG9nOwoJICAgIHZhciBleHAgPSBNYXRoLmV4cDsKCSAgICB2YXIgYWJzID0gTWF0aC5hYnM7CgkgICAgdmFyIHBvdyA9IE1hdGgucG93OwoJICAgIHZhciBzcXJ0ID0gTWF0aC5zcXJ0OwoJICAgIHZhciBwaSA9IE1hdGguUEk7CgoJICAgIC8vLy8vLy8vLy8gQ29udGlub3VzIGRpc3RyaWJ1dGlvbnMgLy8vLy8vLy8vLwoJICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKCSAgICBsZC5iZXRhID0gZnVuY3Rpb24gKHgsIHNoYXBlMSwgc2hhcGUyKSB7CgkgICAgICBpZiAoeCA+IDEgfHwgeCA8IDApIHsKCSAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsKCSAgICAgIH0KCSAgICAgIGlmIChzaGFwZTEgPT09IDEgJiYgc2hhcGUyID09PSAxKSB7CgkgICAgICAgIHJldHVybiAwOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgcmV0dXJuIChzaGFwZTEgLSAxKSAqIGxvZyh4KSArIChzaGFwZTIgLSAxKSAqIGxvZygxIC0geCkgLSBsYmV0YShzaGFwZTEsIHNoYXBlMik7CgkgICAgICB9CgkgICAgfTsKCSAgICBsZC5jYXVjaHkgPSBmdW5jdGlvbiAoeCwgbG9jYXRpb24sIHNjYWxlKSB7CgkgICAgICByZXR1cm4gbG9nKHNjYWxlKSAtIGxvZyhwb3coeCAtIGxvY2F0aW9uLCAyKSArIHBvdyhzY2FsZSwgMikpIC0gbG9nKHBpKTsKCSAgICB9OwoJICAgIGxkLm5vcm0gPSBmdW5jdGlvbiAoeCwgbWVhbiwgc2QpIHsKCSAgICAgIHJldHVybiAtMC41ICogbG9nKDIgKiBwaSkgLSBsb2coc2QpIC0gcG93KHggLSBtZWFuLCAyKSAvICgyICogc2QgKiBzZCk7CgkgICAgfTsKCgkgICAgLy8gQSBiaXZhcmlhdGUgTm9ybWFsIGRpc3RyaWJ1dGlvbiBwYXJhbWV0ZXJpemVkIGJ5IGFycmF5cyBvZiB0d28gbWVhbnMgYW5kIFNEcywgYW5kIAoJICAgIC8vIHRoZSBjb3JyZWxhdGlvbi4KCSAgICBsZC5iaXZhcm5vcm0gPSBmdW5jdGlvbiAoeCwgbWVhbiwgc2QsIGNvcnIpIHsKCSAgICAgIHZhciB6ID0gcG93KHhbMF0gLSBtZWFuWzBdLCAyKSAvIHBvdyhzZFswXSwgMikgKyBwb3coeFsxXSAtIG1lYW5bMV0sIDIpIC8gcG93KHNkWzFdLCAyKSAtIDIgKiBjb3JyICogKHhbMF0gLSBtZWFuWzBdKSAqICh4WzFdIC0gbWVhblsxXSkgLyAoc2RbMF0gKiBzZFsxXSk7CgkgICAgICB2YXIgbm9ybWFsaXppbmdfZmFjdG9yID0gLShsb2coMikgKyBsb2cocGkpICsgbG9nKHNkWzBdKSArIGxvZyhzZFsxXSkgKyAwLjUgKiBsb2coMSAtIHBvdyhjb3JyLCAyKSkpOwoJICAgICAgdmFyIGJpdmFyX2xvZ19kZW5zID0gbm9ybWFsaXppbmdfZmFjdG9yIC0geiAvICgyICogKDEgLSBwb3coY29yciwgMikpKTsKCSAgICAgIHJldHVybiBiaXZhcl9sb2dfZGVuczsKCSAgICB9OwoJICAgIGxkLmxhcGxhY2UgPSBmdW5jdGlvbiAoeCwgbG9jYXRpb24sIHNjYWxlKSB7CgkgICAgICByZXR1cm4gLWFicyh4IC0gbG9jYXRpb24pIC8gc2NhbGUgLSBsb2coMiAqIHNjYWxlKTsKCSAgICB9OwoJICAgIGxkLmRleHAgPSBsZC5sYXBsYWNlOwoJICAgIGxkLmdhbW1hID0gZnVuY3Rpb24gKHgsIHNoYXBlLCByYXRlKSB7CgkgICAgICB2YXIgc2NhbGUgPSAxIC8gcmF0ZTsKCSAgICAgIGlmICh4IDwgMCkgewoJICAgICAgICByZXR1cm4gLUluZmluaXR5OwoJICAgICAgfQoJICAgICAgaWYgKHggPT09IDAgJiYgc2hhcGUgPT09IDEpIHsKCSAgICAgICAgcmV0dXJuIC1sb2coc2NhbGUpOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgcmV0dXJuIChzaGFwZSAtIDEpICogbG9nKHgpIC0geCAvIHNjYWxlIC0gbGdhbW1hKHNoYXBlKSAtIHNoYXBlICogbG9nKHNjYWxlKTsKCSAgICAgIH0KCSAgICB9OwoJICAgIGxkLmludmdhbW1hID0gZnVuY3Rpb24gKHgsIHNoYXBlLCBzY2FsZSkgewoJICAgICAgaWYgKHggPD0gMCkgewoJICAgICAgICByZXR1cm4gLUluZmluaXR5OwoJICAgICAgfQoJICAgICAgcmV0dXJuIC0oc2hhcGUgKyAxKSAqIGxvZyh4KSAtIHNjYWxlIC8geCAtIGxnYW1tYShzaGFwZSkgKyBzaGFwZSAqIGxvZyhzY2FsZSk7CgkgICAgfTsKCSAgICBsZC5sbm9ybSA9IGZ1bmN0aW9uICh4LCBtZWFubG9nLCBzZGxvZykgewoJICAgICAgaWYgKHggPD0gMCkgewoJICAgICAgICByZXR1cm4gLUluZmluaXR5OwoJICAgICAgfQoJICAgICAgcmV0dXJuIC1sb2coeCkgLSAwLjUgKiBsb2coMiAqIHBpKSAtIGxvZyhzZGxvZykgLSBwb3cobG9nKHgpIC0gbWVhbmxvZywgMikgLyAoMiAqIHNkbG9nICogc2Rsb2cpOwoJICAgIH07CgkgICAgbGQucGFyZXRvID0gZnVuY3Rpb24gKHgsIHNjYWxlLCBzaGFwZSkgewoJICAgICAgaWYgKHggPCBzY2FsZSkgewoJICAgICAgICByZXR1cm4gLUluZmluaXR5OwoJICAgICAgfQoJICAgICAgcmV0dXJuIGxvZyhzaGFwZSkgKyBzaGFwZSAqIGxvZyhzY2FsZSkgLSAoc2hhcGUgKyAxKSAqIGxvZyh4KTsKCSAgICB9OwoJICAgIGxkLnQgPSBmdW5jdGlvbiAoeCwgbG9jYXRpb24sIHNjYWxlLCBkZikgewoJICAgICAgZGYgPSBkZiA+IDFlMTAwID8gMWUxMDAgOiBkZjsKCSAgICAgIHJldHVybiBsZ2FtbWEoKGRmICsgMSkgLyAyKSAtIGxnYW1tYShkZiAvIDIpIC0gbG9nKHNxcnQocGkgKiBkZikgKiBzY2FsZSkgKyBsb2cocG93KDEgKyAxIC8gZGYgKiBwb3coKHggLSBsb2NhdGlvbikgLyBzY2FsZSwgMiksIC0oZGYgKyAxKSAvIDIpKTsKCSAgICB9OwoKCSAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGphdmFzY3JpcHQgdHJhbnNsYXRpb24gb2YgdGhlIFIgY29kZSB1c2VkIHRvIGV2YWx1YXRlCgkgICAgLy8gdGhlIGxvZyBkZW5zaXR5IG9mIGEgd2VpYnVsbCBkaXN0cmlidXRpb246IAoJICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93Y2gvci1zb3VyY2UvYmxvYi9iMTU2ZTNhNzExOTY3ZjU4MTMxZTIzYzFiMWRjMWVhOTBlMmYwYzQzL3NyYy9ubWF0aC9kd2VpYnVsbC5jCgkgICAgbGQud2VpYnVsbCA9IGZ1bmN0aW9uICh4LCBzaGFwZSwgc2NhbGUpIHsKCSAgICAgIGlmICh4IDwgMCkgcmV0dXJuIC1JbmZpbml0eTsKCSAgICAgIGlmICh4ID09PSAwICYmIHNoYXBlIDwgMSkgcmV0dXJuIEluZmluaXR5OwoJICAgICAgdmFyIHRtcDEgPSBwb3coeCAvIHNjYWxlLCBzaGFwZSAtIDEpOwoJICAgICAgdmFyIHRtcDIgPSB0bXAxICogKHggLyBzY2FsZSk7CgkgICAgICByZXR1cm4gLXRtcDIgKyBsb2coc2hhcGUgKiB0bXAxIC8gc2NhbGUpOwoJICAgIH07CgoJICAgIC8vIFRoaXMgaXMgYSBkaXJlY3QgamF2YXNjcmlwdCB0cmFuc2xhdGlvbiBvZiB0aGUgUiBjb2RlIHVzZWQgdG8gZXZhbHVhdGUKCSAgICAvLyB0aGUgbG9nIGRlbnNpdHkgb2YgYSBsb2dpc3RpYyBkaXN0cmlidXRpb246IAoJICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93Y2gvci1zb3VyY2UvYmxvYi9iMTU2ZTNhNzExOTY3ZjU4MTMxZTIzYzFiMWRjMWVhOTBlMmYwYzQzL3NyYy9ubWF0aC9kbG9naXMuYwoJICAgIGxkLmxvZ2lzID0gZnVuY3Rpb24gKHgsIGxvY2F0aW9uLCBzY2FsZSkgewoJICAgICAgeCA9IGFicygoeCAtIGxvY2F0aW9uKSAvIHNjYWxlKTsKCSAgICAgIHZhciBlID0gZXhwKC14KTsKCSAgICAgIHZhciBmID0gMS4wICsgZTsKCSAgICAgIHJldHVybiAtKHggKyBsb2coc2NhbGUgKiBmICogZikpOwoJICAgIH07CgkgICAgbGQuZGlyaWNobGV0ID0gZnVuY3Rpb24gKHgsIGFscGhhKSB7CgkgICAgICB2YXIgc3VtX2FscGhhID0gMDsKCSAgICAgIHZhciBzdW1fbGdhbW1hX2FscGhhID0gMDsKCSAgICAgIHZhciBzdW1fYWxwaGFfc3ViXzFfbG9nX3ggPSAwOwoJICAgICAgdmFyIG4gPSBhbHBoYS5sZW5ndGg7CgkgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgewoJICAgICAgICBzdW1fYWxwaGEgKz0gYWxwaGFbaV07CgkgICAgICAgIHN1bV9sZ2FtbWFfYWxwaGEgKz0gbGdhbW1hKGFscGhhW2ldKTsKCSAgICAgICAgc3VtX2FscGhhX3N1Yl8xX2xvZ194ICs9IChhbHBoYVtpXSAtIDEpICogbG9nKHhbaV0pOwoJICAgICAgfQoJICAgICAgcmV0dXJuIGxnYW1tYShzdW1fYWxwaGEpIC0gc3VtX2xnYW1tYV9hbHBoYSArIHN1bV9hbHBoYV9zdWJfMV9sb2dfeDsKCSAgICB9OwoJICAgIGxkLmV4cCA9IGZ1bmN0aW9uICh4LCByYXRlKSB7CgkgICAgICByZXR1cm4geCA8IDAgPyAtSW5maW5pdHkgOiBsb2cocmF0ZSkgLSByYXRlICogeDsKCSAgICB9OwoJICAgIGxkLnVuaWYgPSBmdW5jdGlvbiAoeCwgbWluLCBtYXgpIHsKCSAgICAgIHJldHVybiB4IDwgbWluIHx8IHggPiBtYXggPyAtSW5maW5pdHkgOiBsb2coMSAvIChtYXggLSBtaW4pKTsKCSAgICB9OwoKCSAgICAvLy8vLy8vLy8vIERpc2NyZXRlIGRpc3RyaWJ1dGlvbnMgLy8vLy8vLy8vLwoJICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgoJICAgIGxkLmJlcm4gPSBmdW5jdGlvbiAoeCwgcHJvYikgewoJICAgICAgcmV0dXJuICEoeCA9PT0gMCB8fCB4ID09PSAxKSA/IC1JbmZpbml0eSA6IGxvZyh4ICogcHJvYiArICgxIC0geCkgKiAoMSAtIHByb2IpKTsKCSAgICB9OwoJICAgIGxkLmNhdCA9IGZ1bmN0aW9uICh4LCBwcm9icykgewoJICAgICAgaWYgKHggPCAxIHx8IHggPiBwcm9icy5sZW5ndGgpIHsKCSAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIHJldHVybiBsb2cocHJvYnNbeCAtIDFdKTsKCSAgICAgIH0KCSAgICB9OwoJICAgIGxkLmJpbm9tID0gZnVuY3Rpb24gKHgsIHNpemUsIHByb2IpIHsKCSAgICAgIGlmICh4ID4gc2l6ZSB8fCB4IDwgMCkgewoJICAgICAgICByZXR1cm4gLUluZmluaXR5OwoJICAgICAgfQoJICAgICAgaWYgKHByb2IgPT09IDAgfHwgcHJvYiA9PT0gMSkgewoJICAgICAgICByZXR1cm4gc2l6ZSAqIHByb2IgPT09IHggPyAwIDogLUluZmluaXR5OwoJICAgICAgfQoJICAgICAgcmV0dXJuIGxjaG9vc2Uoc2l6ZSwgeCkgKyB4ICogbG9nKHByb2IpICsgKHNpemUgLSB4KSAqIGxvZygxIC0gcHJvYik7CgkgICAgfTsKCSAgICBsZC5uYmlub20gPSBmdW5jdGlvbiAoeCwgc2l6ZSwgcHJvYikgewoJICAgICAgaWYgKHggPCAwKSB7CgkgICAgICAgIHJldHVybiAtSW5maW5pdHk7CgkgICAgICB9CgkgICAgICByZXR1cm4gbGNob29zZSh4ICsgc2l6ZSAtIDEsIHNpemUgLSAxKSArIHggKiBsb2coMSAtIHByb2IpICsgc2l6ZSAqIGxvZyhwcm9iKTsKCSAgICB9OwoJICAgIGxkLmh5cGVyID0gZnVuY3Rpb24gKHgsIG0sIG4sIGspIHsKCSAgICAgIGlmICh4IDwgMCB8fCB4ID4gaykgewoJICAgICAgICByZXR1cm4gLUluZmluaXR5OwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgcmV0dXJuIGxjaG9vc2UobSwgeCkgKyBsY2hvb3NlKG4sIGsgLSB4KSAtIGxjaG9vc2UobSArIG4sIGspOwoJICAgICAgfQoJICAgIH07CgkgICAgbGQucG9pcyA9IGZ1bmN0aW9uICh4LCBsYW1iZGEpIHsKCSAgICAgIHJldHVybiB4IDwgMCA/IC1JbmZpbml0eSA6IGxvZyhsYW1iZGEpICogeCAtIGxhbWJkYSAtIGxmYWN0b3JpYWwoeCk7CgkgICAgfTsKCSAgICByZXR1cm4gbGQ7CgkgIH0pOwoJfSkoZGlzdHJpYnV0aW9ucyk7CgoJdmFyIG1jbWNFeHBvcnRzID0ge307Cgl2YXIgbWNtYyA9IHsKCSAgZ2V0IGV4cG9ydHMoKXsgcmV0dXJuIG1jbWNFeHBvcnRzOyB9LAoJICBzZXQgZXhwb3J0cyh2KXsgbWNtY0V4cG9ydHMgPSB2OyB9LAoJfTsKCgkoZnVuY3Rpb24gKG1vZHVsZSkgewoKCSAgLy8gVGhpcyBib2lsZXIgcGxhdGUgY29kZSBoZXJlIGlzIHRha2VuIGZyb206CgkgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvdGVtcGxhdGVzL3JldHVybkV4cG9ydHMuanMKCSAgLy8gSXQgc2hvdWxkIG1ha2Ugc2h1cmUgdGhhdCBtb2R1bGUgY2FuIGJlIGltcG9ydGVkIGJvdGggaW4gdGhlIGJyb3dzZXIsCgkgIC8vIE5vZGUsIGFuZCBieSB1c2luZyB0aGUgQXN5bmNocm9ub3VzIE1vZHVsZSBEZWZpbml0aW9uIHN0YW5kYXJkLgoJICAvLyBJZiB0aGlzIG1vZHVsZSBpcyBsb2FkZWQgaW4gdGhlIGJyb3dzZXIgaXQgd2lsbCBjcmVhdGVkIHRoZSBnbG9iYWwKCSAgLy8gb2JqZWN0IG1jbWMgLgoJICAoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHsKCSAgICBpZiAobW9kdWxlLmV4cG9ydHMpIHsKCSAgICAgIC8vIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dAoJICAgICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsCgkgICAgICAvLyBsaWtlIE5vZGUuCgkgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsKCSAgICB9IGVsc2UgewoJICAgICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdykKCSAgICAgIHJvb3QubWNtYyA9IGZhY3RvcnkoKTsKCSAgICB9CgkgIH0pKGNvbW1vbmpzR2xvYmFsLCBmdW5jdGlvbiAoKSB7CgkgICAgLy8vIFRoZSBhY3R1YWwgbW9kdWxlIGNvZGUgc3RhcnRzIGhlcmUgLy8vCgkgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vICAKCgkgICAgLy8vLy8vLy8vLyBIZWxwZXIgRnVuY3Rpb25zIC8vLy8vLy8vLy8KCSAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKCSAgICAvKiogUmV0dXJucyBhIHJhbmRvbSByZWFsIG51bWJlciBiZXR3ZWVuIG1pbiBhbmQgbWF4ICovCgkgICAgdmFyIHJ1bmlmID0gZnVuY3Rpb24gKG1pbiwgbWF4KSB7CgkgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluOwoJICAgIH07CgoJICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAqLwoJICAgIHZhciBydW5pZl9kaXNjcmV0ZSA9IGZ1bmN0aW9uIChtaW4sIG1heCkgewoJICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47CgkgICAgfTsKCgkgICAgLyoqIFJldHVybnMgYSByYW5kb20gcmVhbCBudW1iZXIgZnJvbSBhIG5vcm1hbCBkaXN0cmliYnV0aW9uIGRlZmluZWQKCSAgICAgKiAgYnkgbWVhbiBhbmQgc2QuIAoJICAgICAqICBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2pzdGF0L2pzdGF0L2Jsb2IvbWFzdGVyL3NyYy9zcGVjaWFsLmpzICovCgkgICAgdmFyIHJub3JtID0gZnVuY3Rpb24gKG1lYW4sIHNkKSB7CgkgICAgICB2YXIgdSwgdiwgeCwgeSwgcTsKCSAgICAgIGRvIHsKCSAgICAgICAgdSA9IE1hdGgucmFuZG9tKCk7CgkgICAgICAgIHYgPSAxLjcxNTYgKiAoTWF0aC5yYW5kb20oKSAtIDAuNSk7CgkgICAgICAgIHggPSB1IC0gMC40NDk4NzE7CgkgICAgICAgIHkgPSBNYXRoLmFicyh2KSArIDAuMzg2NTk1OwoJICAgICAgICBxID0geCAqIHggKyB5ICogKDAuMTk2MDAgKiB5IC0gMC4yNTQ3MiAqIHgpOwoJICAgICAgfSB3aGlsZSAocSA+IDAuMjc1OTcgJiYgKHEgPiAwLjI3ODQ2IHx8IHYgKiB2ID4gLTQgKiBNYXRoLmxvZyh1KSAqIHUgKiB1KSk7CgkgICAgICByZXR1cm4gdiAvIHUgKiBzZCArIG1lYW47CgkgICAgfTsKCgkgICAgLyoqIFJldHVybnMgYSBkZWVwIGNsb25lIG9mIHNyYywgc29ydCBvZi4uLiBJdCBvbmx5IGNvcGllcyBhIGxpbWl0ZWQKCSAgICAgKiBudW1iZXIgb2YgdHlwZXMgYW5kLCBmb3IgZXhhbXBsZSwgZnVuY3Rpb24gYXJlIG5vdCBjb3BpZWQuIAoJICAgICAqIEZyb20gaHR0cDovL2Rhdmlkd2Fsc2gubmFtZS9qYXZhc2NyaXB0LWNsb25lCgkgICAgICovCgkgICAgdmFyIGRlZXBfY2xvbmUgPSBmdW5jdGlvbiAoc3JjKSB7CgkgICAgICBmdW5jdGlvbiBtaXhpbihkZXN0LCBzb3VyY2UsIGNvcHlGdW5jKSB7CgkgICAgICAgIHZhciBuYW1lLAoJICAgICAgICAgIHMsCgkgICAgICAgICAgZW1wdHkgPSB7fTsKCSAgICAgICAgZm9yIChuYW1lIGluIHNvdXJjZSkgewoJICAgICAgICAgIC8vIHRoZSAoIShuYW1lIGluIGVtcHR5KSB8fCBlbXB0eVtuYW1lXSAhPT0gcykgY29uZGl0aW9uIGF2b2lkcyBjb3B5aW5nIHByb3BlcnRpZXMgaW4gInNvdXJjZSIKCSAgICAgICAgICAvLyBpbmhlcml0ZWQgZnJvbSBPYmplY3QucHJvdG90eXBlLgkgRm9yIGV4YW1wbGUsIGlmIGRlc3QgaGFzIGEgY3VzdG9tIHRvU3RyaW5nKCkgbWV0aG9kLAoJICAgICAgICAgIC8vIGRvbid0IG92ZXJ3cml0ZSBpdCB3aXRoIHRoZSB0b1N0cmluZygpIG1ldGhvZCB0aGF0IHNvdXJjZSBpbmhlcml0ZWQgZnJvbSBPYmplY3QucHJvdG90eXBlCgkgICAgICAgICAgcyA9IHNvdXJjZVtuYW1lXTsKCSAgICAgICAgICBpZiAoIShuYW1lIGluIGRlc3QpIHx8IGRlc3RbbmFtZV0gIT09IHMgJiYgKCEobmFtZSBpbiBlbXB0eSkgfHwgZW1wdHlbbmFtZV0gIT09IHMpKSB7CgkgICAgICAgICAgICBkZXN0W25hbWVdID0gY29weUZ1bmMgPyBjb3B5RnVuYyhzKSA6IHM7CgkgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkZXN0OwoJICAgICAgfQoJICAgICAgaWYgKCFzcmMgfHwgdHlwZW9mIHNyYyAhPSAib2JqZWN0IiB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc3JjKSA9PT0gIltvYmplY3QgRnVuY3Rpb25dIikgewoJICAgICAgICAvLyBudWxsLCB1bmRlZmluZWQsIGFueSBub24tb2JqZWN0LCBvciBmdW5jdGlvbgoJICAgICAgICByZXR1cm4gc3JjOyAvLyBhbnl0aGluZwoJICAgICAgfQoKCSAgICAgIGlmIChzcmMubm9kZVR5cGUgJiYgImNsb25lTm9kZSIgaW4gc3JjKSB7CgkgICAgICAgIC8vIERPTSBOb2RlCgkgICAgICAgIHJldHVybiBzcmMuY2xvbmVOb2RlKHRydWUpOyAvLyBOb2RlCgkgICAgICB9CgoJICAgICAgaWYgKHNyYyBpbnN0YW5jZW9mIERhdGUpIHsKCSAgICAgICAgLy8gRGF0ZQoJICAgICAgICByZXR1cm4gbmV3IERhdGUoc3JjLmdldFRpbWUoKSk7IC8vIERhdGUKCSAgICAgIH0KCgkgICAgICBpZiAoc3JjIGluc3RhbmNlb2YgUmVnRXhwKSB7CgkgICAgICAgIC8vIFJlZ0V4cAoJICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChzcmMpOyAvLyBSZWdFeHAKCSAgICAgIH0KCgkgICAgICB2YXIgciwgaSwgbDsKCSAgICAgIGlmIChzcmMgaW5zdGFuY2VvZiBBcnJheSkgewoJICAgICAgICAvLyBhcnJheQoJICAgICAgICByID0gW107CgkgICAgICAgIGZvciAoaSA9IDAsIGwgPSBzcmMubGVuZ3RoOyBpIDwgbDsgKytpKSB7CgkgICAgICAgICAgaWYgKGkgaW4gc3JjKSB7CgkgICAgICAgICAgICByLnB1c2goZGVlcF9jbG9uZShzcmNbaV0pKTsKCSAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIC8vIGdlbmVyaWMgb2JqZWN0cwoJICAgICAgICByID0gc3JjLmNvbnN0cnVjdG9yID8gbmV3IHNyYy5jb25zdHJ1Y3RvcigpIDoge307CgkgICAgICB9CgkgICAgICByZXR1cm4gbWl4aW4ociwgc3JjLCBkZWVwX2Nsb25lKTsKCSAgICB9OwoKCSAgICAvKiogU3BlY2lhbGl6ZWQgY2xvbmUgZnVuY3Rpb24gdGhhdCBvbmx5IGNsb25lcyBzY2FsYXJzIGFuZCBuZXN0ZWQgYXJyYXlzIHdoZXJlCgkgICAgICogZWFjaCBhcnJheSBlaXRoZXIgY29uc2lzdHMgb2YgYWxsIGFycmF5cyBvciBhbGwgbnVtYmVycy4gVGhpcyBmdW5jdGlvbgoJICAgICAqIGlzIG1lYW50IGFzIGEgZmFzdCB3YXkgb2YgY2xvbmluZyBwYXJhbWV0ZXIgZHJhd3Mgd2l0aGluIHRoZSBtY21jIHNhbXBsaW5nCgkgICAgICogbG9vcC4KCSAgICAgKi8KCSAgICB2YXIgY2xvbmVfcGFyYW1fZHJhdyA9IGZ1bmN0aW9uICh4KSB7CgkgICAgICBpZiAoQXJyYXkuaXNBcnJheSh4KSkgewoJICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh4WzBdKSkgewoJICAgICAgICAgIC8vIHggaXMgYW4gYXJyYXkgb2YgYXJyYXlzIHNvIHdlIG5lZWQgdG8gY2xvbmUgaXQgcmVjdXJzaXZlbHkKCSAgICAgICAgICB2YXIgeF9jb3B5ID0gW107CgkgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHgubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHhfY29weS5wdXNoKGNsb25lX3BhcmFtX2RyYXcoeFtpXSkpOwoJICAgICAgICAgIH0KCSAgICAgICAgICByZXR1cm4geF9jb3B5OwoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgIC8vIFdlJ2xsIGFzc3VtZSB4IGlzIGEgYXJyYXlzIG9mIHNjYWxhcnMKCSAgICAgICAgICByZXR1cm4geC5zbGljZSgwKTsKCSAgICAgICAgfQoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgLy8gV2UnbGwgYXNzdW1lIHggaXMgYSBzY2FsYXIKCSAgICAgICAgcmV0dXJuIHg7CgkgICAgICB9CgkgICAgfTsKCgkgICAgLyoqIFJldHVybnMgdHJ1ZSBpZiBvYmplY3QgaXMgYSBudW1iZXIuCgkgICAgICovCgkgICAgdmFyIGlzX251bWJlciA9IGZ1bmN0aW9uIChvYmplY3QpIHsKCSAgICAgIHJldHVybiB0eXBlb2Ygb2JqZWN0ID09ICJudW1iZXIiIHx8IHR5cGVvZiBvYmplY3QgPT0gIm9iamVjdCIgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBOdW1iZXI7CgkgICAgfTsKCgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYSAocG9zc2libHkgbXVsdGlkaW1lbnNpb25hbC9uZXN0ZWQpIGFycmF5LgoJICAgICAqIEBwYXJhbSBkaW0gLSBBbiBhcnJheSBnaXZpbmcgdGhlIGRpbWVuc2lvbiBvZiB0aGUgYXJyYXkuIEZvciBleGFtcGxlLAoJICAgICAqICAgWzVdIHdvdWxkIHlpZWxkIGEgNSBlbGVtZW50IGFycmF5LCBhbmQgWzMsM10gd291bGQgeWllbGQgYSAzIGJ5IDMgbWF0cml4LgoJICAgICAqIEBwYXJhbSBpbml0IC0gQSB2YWx1ZSBvciBhIGZ1bmN0aW9uIHVzZWQgdG8gZmlsbCBpbiB0aGUgZWFjaCBlbGVtZW50IGluCgkgICAgICogICB0aGUgYXJyYXkuIElmIGl0IGlzIGEgZnVuY3Rpb24gaXQgc2hvdWxkIHRha2Ugbm8gYXJndW1lbnRzLCBpdCB3aWxsIGJlIAoJICAgICAqICAgZXZhbHVhdGVkIG9uY2UgZm9yIGVhY2ggZWxlbWVudCwgYW5kIGl0J3MgcmV0dXJuIHZhbHVlIHdpbGwgYmUgdXNlZCB0bwoJICAgICAqICAgZmlsbCBpbiBlYWNoIGVsZW1lbnQuCgkgICAgICogQGV4YW1wbGUgCgkgICAgICogLy8gVGhlIGZvbGxvd2luZyB3b3VsZCByZXR1cm4gW1sxLDFdLFsxLDFdLFsxLDFdXQoJICAgICAqIGNyZWF0ZV9hcnJheShbMiwzXSwgMSkKCSAgICAgKi8KCSAgICB2YXIgY3JlYXRlX2FycmF5ID0gZnVuY3Rpb24gKGRpbSwgaW5pdCkgewoJICAgICAgdmFyIGFyciA9IG5ldyBBcnJheShkaW1bMF0pOwoJICAgICAgdmFyIGk7CgkgICAgICBpZiAoZGltLmxlbmd0aCA9PSAxKSB7CgkgICAgICAgIC8vIEZpbGwgaXQgdXAgd2l0aCBpbml0CgkgICAgICAgIGlmICh0eXBlb2YgaW5pdCA9PT0gImZ1bmN0aW9uIikgewoJICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewoJICAgICAgICAgICAgYXJyW2ldID0gaW5pdCgpOwoJICAgICAgICAgIH0KCSAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHsKCSAgICAgICAgICAgIGFycltpXSA9IGluaXQ7CgkgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICB9IGVsc2UgaWYgKGRpbS5sZW5ndGggPiAxKSB7CgkgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewoJICAgICAgICAgIGFycltpXSA9IGNyZWF0ZV9hcnJheShkaW0uc2xpY2UoMSksIGluaXQpOwoJICAgICAgICB9CgkgICAgICB9IGVsc2UgewoJICAgICAgICB0aHJvdyAiY3JlYXRlX2FycmF5IGNhbid0IGNyZWF0ZSBhIGRpbWVuc2lvbmxlc3MgYXJyYXkiOwoJICAgICAgfQoJICAgICAgcmV0dXJuIGFycjsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBSZXR1cm4gdGhlIGRpbWVuc2lvbnMgb2YgYSBwb3NzaWJseSBuZXN0ZWQgYXJyYXkgYXMgYW4gYXJyYXkuIEZvciAKCSAgICAgKiBleGFtcGxlLCBhcnJheV9kaW0oIFtbMSwgMl0sIFsxLCAyXV0gKSBzaG91bGQgcmV0dXJuIFsyLCAyXQoJICAgICAqIEFzc3VtZXMgdGhhdCBhbGwgYXJyYXlzIGluc2lkZSBhbm90aGVyIGFycmF5IGFyZSBvZiB0aGUgc2FtZSBsZW5ndGguCgkgICAgICogQGV4YW1wbGUKCSAgICAgKiAvLyBTaG91bGQgcmV0dXJuIFs0LCAyLCAxXQoJICAgICAqIGFycmF5X2RpbShjcmVhdGVfYXJyYXkoWzQsIDIsIDFdLCAwKSkKCSAgICAgKi8KCSAgICB2YXIgYXJyYXlfZGltID0gZnVuY3Rpb24gKGEpIHsKCSAgICAgIGlmIChBcnJheS5pc0FycmF5KGFbMF0pKSB7CgkgICAgICAgIHJldHVybiBbYS5sZW5ndGhdLmNvbmNhdChhcnJheV9kaW0oYVswXSkpOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgcmV0dXJuIFthLmxlbmd0aF07CgkgICAgICB9CgkgICAgfTsKCgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHR3byBhcnJheXMgYXJlIGVxdWFsIGluIHRoZSBzZW5zZSB0aGF0IHRoZXkgY29udGFpbiB0aGUgc2FtZSBlbGVtZW50cwoJICAgICAqIGFzIGp1ZGdlZCBieSB0aGUgIj09IiBvcGVyYXRvci4gUmV0dXJucyB0cnVlIG9yIGZhbHNlLgoJICAgICAqIEFkYXB0ZWQgZnJvbSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNDg1Mzk3NC8xMDAxODQ4CgkgICAgICovCgkgICAgdmFyIGFycmF5X2VxdWFsID0gZnVuY3Rpb24gKGExLCBhMikgewoJICAgICAgaWYgKGExLmxlbmd0aCAhPSBhMi5sZW5ndGgpIHJldHVybiBmYWxzZTsKCSAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYTEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBuZXN0ZWQgYXJyYXlzCgkgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGExW2ldKSAmJiBBcnJheS5pc0FycmF5KGEyW2ldKSkgewoJICAgICAgICAgIC8vIHJlY3Vyc2UgaW50byB0aGUgbmVzdGVkIGFycmF5cwoJICAgICAgICAgIGlmICghYXJyYXlfZXF1YWwoYTFbaV0sIGEyW2ldKSkgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9IGVsc2UgaWYgKGExW2ldICE9IGEyW2ldKSB7CgkgICAgICAgICAgLy8gV2FybmluZyAtIHR3byBkaWZmZXJlbnQgb2JqZWN0IGluc3RhbmNlcyB3aWxsIG5ldmVyIGJlIGVxdWFsOiB7eDoyMH0gIT0ge3g6MjB9CgkgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICB9CgkgICAgICByZXR1cm4gdHJ1ZTsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBUcmF2ZXJzZXMgYSBwb3NzaWJseSBuZXN0ZWQgYXJyYXkgYSBhbmQgYXBwbGllcyBmdW4gdG8gYWxsICJsZWFmIG5vZGVzIiwgCgkgICAgICogdGhhdCBpcywgdmFsdWVzIHRoYXQgYXJlIG5vdCBhcnJheXMuIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIHNhbWUgc2l6ZSBhcwoJICAgICAqIGEuCgkgICAgICovCgkgICAgdmFyIG5lc3RlZF9hcnJheV9hcHBseSA9IGZ1bmN0aW9uIChhLCBmdW4pIHsKCSAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpKSB7CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgQXJyYXkoYS5sZW5ndGgpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICByZXN1bHRbaV0gPSBuZXN0ZWRfYXJyYXlfYXBwbHkoYVtpXSwgZnVuKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgcmV0dXJuIGZ1bihhKTsKCSAgICAgIH0KCSAgICB9OwoKCSAgICAvKiogUmFuZG9taXppbmcgdGhlIGFycmF5IGVsZW1lbnQgb3JkZXIgaW4tcGxhY2UuIFVzaW5nIER1cnN0ZW5mZWxkCgkgICAgICogc2h1ZmZsZSBhbGdvcml0aG0uIEFkYXB0ZWQgZnJvbSBoZXJlOiAKCSAgICAgKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMjY0Njg2NC8xMDAxODQ4CgkgICAgICovCgkgICAgZnVuY3Rpb24gc2h1ZmZsZV9hcnJheShhcnJheSkgewoJICAgICAgZm9yICh2YXIgaSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHsKCSAgICAgICAgdmFyIGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTsKCSAgICAgICAgdmFyIHRlbXAgPSBhcnJheVtpXTsKCSAgICAgICAgYXJyYXlbaV0gPSBhcnJheVtqXTsKCSAgICAgICAgYXJyYXlbal0gPSB0ZW1wOwoJICAgICAgfQoJICAgICAgcmV0dXJuIGFycmF5OwoJICAgIH0KCgkgICAgLyoqCgkgICAgICogRG9lcyB0aGUgc2FtZSB0aGluZyBhcyBuZXN0ZWRfYXJyYXlfYXBwbHksIHRoYXQgaXMsIHRyYXZlcnNlcyBhIHBvc3NpYmx5CgkgICAgICogbmVzdGVkIGFycmF5IGEgYW5kIGFwcGxpZXMgZnVuIHRvIGFsbCAibGVhZiBub2RlcyIgYW5kIHJldHVybnMgYW4gYXJyYXkgCgkgICAgICogb2YgdGhlIHNhbWUgc2l6ZSBhcyBhLiBUaGUgZGlmZmVyZW5jZSBpcyB0aGF0IG5lc3RlZF9hcnJheV9yYW5kb21fYXBwbHkKCSAgICAgKiBicmFuY2hlcyByYW5kb21seS4KCSAgICAgKi8KCSAgICB2YXIgbmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseSA9IGZ1bmN0aW9uIChhLCBmdW4pIHsKCSAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpKSB7CgkgICAgICAgIHZhciBsZW4gPSBhLmxlbmd0aDsKCSAgICAgICAgdmFyIGk7CgkgICAgICAgIHZhciBhcnJheV9pcyA9IFtdOwoJICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKCSAgICAgICAgICBhcnJheV9pc1tpXSA9IGk7CgkgICAgICAgIH0KCSAgICAgICAgc2h1ZmZsZV9hcnJheShhcnJheV9pcyk7CgkgICAgICAgIHZhciByZXN1bHQgPSBbXTsKCSAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CgkgICAgICAgICAgdmFyIGFycmF5X2kgPSBhcnJheV9pc1tpXTsKCSAgICAgICAgICByZXN1bHRbYXJyYXlfaV0gPSBuZXN0ZWRfYXJyYXlfYXBwbHkoYVthcnJheV9pXSwgZnVuKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgcmV0dXJuIGZ1bihhKTsKCSAgICAgIH0KCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgYSBwcmV0dHkgd2F5IG9mIHNldHRpbmcgZGVmYXVsdCBvcHRpb25zIHdoZXJlIHRoZSBkZWZ1bHRzIGNhbiBiZQoJICAgICAqIG92ZXJyaWRkZW4gYnkgYW4gb3B0aW9ucyBvYmplY3QuCgkgICAgICogIEBwYXJhbSBvcHRpb25fbmFtZSAtIHRoZSBuYW1lIG9mIHRoZSBvcHRpb24gYXMgYSBzdHJpbmcKCSAgICAgKiAgQHBhcmFtIG15X29wdGlvbnMgLSBhbiBvcHRpb24gb2JqZWN0IHRoYXQgY291bGQgaGF2ZSBvcHRpb25fbmFtZSAKCSAgICAgKiAgICBhcyBhIG1lbWJlci4KCSAgICAgKiBAcGFyYW0gZGVmYXVsX3ZhbHVlIC0gZGVmdWx0IHZhbHVlIHRoYXQgaXMgcmV0dXJuZWQgaWYgb3B0aW9uX25hbWUgCgkgICAgICogICBpcyBub3QgZGVmaW5lZCBpbiBteV9vcHRpb25zLgoJICAgICAqIEBleGFtcGxlCgkgICAgICogdmFyIG15X29wdGlvbnMgPSB7cGk6IDMuMTQxNTl9CgkgICAgICogdmFyIHBpID0gZ2V0X29wdGlvbigicGkiLCBteV9vcHRpb25zLCAzLjE0KQoJICAgICAqLwoJICAgIC8vIFByZXR0eSB3YXkgb2Ygc2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgd2hlcmUgdGhlIGRlZmF1bHRzIGNhbiBiZSBvdmVycmlkZGVuCgkgICAgLy8gYnkgYW4gb3B0aW9ucyBvYmplY3QuIEZvciBleGFtcGxlOgoJICAgIC8vIHZhciBwaSA9IGdldF9vcHRpb24oInBpIiwgbXlfb3B0aW9ucywgMy4xNCkKCSAgICB2YXIgZ2V0X29wdGlvbiA9IGZ1bmN0aW9uIChvcHRpb25fbmFtZSwgb3B0aW9ucywgZGVmYXVsX3ZhbHVlKSB7CgkgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCSAgICAgIHJldHVybiBvcHRpb25zLmhhc093blByb3BlcnR5KG9wdGlvbl9uYW1lKSAmJiBvcHRpb25zW29wdGlvbl9uYW1lXSAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnNbb3B0aW9uX25hbWVdICE9PSBudWxsID8gb3B0aW9uc1tvcHRpb25fbmFtZV0gOiBkZWZhdWxfdmFsdWU7CgkgICAgfTsKCgkgICAgLyoqIFZlcnNpb24gb2YgZ2V0X29wdGlvbiB3aGVyZSB0aGUgb3B0aW9uIHNob3VsZCBiZSBhIG9uZSBvciBtdWx0aS1kaW1lbnNpb25hbAoJICAgICAqIGFycmF5IGFuZCB3aGVyZSB0aGUgZGVmYXVsdCBjYW4gYmUgb3ZlcnJpZGRlbiBlaXRoZXIgYnkgYSBzY2FsYXIgb3IgYnkgYW4gYXJyYXkuCgkgICAgICogSWYgaXQncyBhIHNjYWxhciB0aGUgdGhhdCBzY2FsYXIgaXMgdXNlZCB0byBpbml0aWFsaXplIGFuIGFycmF5IHdpdGggCgkgICAgICogZGltIGRpbWVuc2lvbnMuCgkgICAgICogCgkgICAgICovCgkgICAgdmFyIGdldF9tdWx0aWRpbV9vcHRpb24gPSBmdW5jdGlvbiAob3B0aW9uX25hbWUsIG9wdGlvbnMsIGRpbSwgZGVmYXVsX3ZhbHVlKSB7CgkgICAgICB2YXIgdmFsdWUgPSBnZXRfb3B0aW9uKG9wdGlvbl9uYW1lLCBvcHRpb25zLCBkZWZhdWxfdmFsdWUpOwoJICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkgewoJICAgICAgICB2YWx1ZSA9IGNyZWF0ZV9hcnJheShkaW0sIHZhbHVlKTsKCSAgICAgIH0KCSAgICAgIGlmICghYXJyYXlfZXF1YWwoYXJyYXlfZGltKHZhbHVlKSwgZGltKSkgewoJICAgICAgICB0aHJvdyAiVGhlIG9wdGlvbiAiICsgb3B0aW9uX25hbWUgKyAiIGlzIG9mIGRpbWVuc2lvbiBbIiArIGFycmF5X2RpbSh2YWx1ZSkgKyAiXSBidXQgc2hvdWxkIGJlIFsiICsgZGltICsgIl0uIjsKCSAgICAgIH0KCSAgICAgIHJldHVybiB2YWx1ZTsKCSAgICB9OwoKCSAgICAvLy8vLy8vLy8vIEZ1bmN0aW9ucyBmb3IgaGFuZGxpbmcgcGFyYW1ldGVyIG9iamVjdHMgLy8vLy8vLy8vLwoJICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBmaXhlZCAoc2FtZSBldmVyeSB0aW1lKSBudW1iZXIgdGhhdCBjb3VsZCBiZSB1c2VkIHRvIGluaXRpYWxpemUKCSAgICAgKiBhIHBhcmFtZXRlciBvZiBhIGNlcnRhaW4gdHlwZSwgcG9zc2libHkgd2l0aCBsb3dlciBhbmQgdXBwZXIgYm91bmRzLgoJICAgICAqIFRoZSBwb3NzaWxlIHR5cGVzIGFyZSAicmVhbCIsICJpbnQiLCBhbmQgImJpbmFyeSIuCgkgICAgICovCgkgICAgdmFyIHBhcmFtX2luaXRfZml4ZWQgPSBmdW5jdGlvbiAodHlwZSwgbG93ZXIsIHVwcGVyKSB7CgkgICAgICBpZiAobG93ZXIgPiB1cHBlcikgewoJICAgICAgICB0aHJvdyAiQ2FuIG5vdCBpbml0aWFsaXplIHBhcmFtZXRlciB3aGVyZSBsb3dlciBib3VuZCA+IHVwcGVyIGJvdW5kIjsKCSAgICAgIH0KCSAgICAgIGlmICh0eXBlID09PSAicmVhbCIpIHsKCSAgICAgICAgaWYgKGxvd2VyID09PSAtSW5maW5pdHkgJiYgdXBwZXIgPT09IEluZmluaXR5KSB7CgkgICAgICAgICAgcmV0dXJuIDAuNTsKCSAgICAgICAgfSBlbHNlIGlmIChsb3dlciA9PT0gLUluZmluaXR5KSB7CgkgICAgICAgICAgcmV0dXJuIHVwcGVyIC0gMC41OwoJICAgICAgICB9IGVsc2UgaWYgKHVwcGVyID09PSBJbmZpbml0eSkgewoJICAgICAgICAgIHJldHVybiBsb3dlciArIDAuNTsKCSAgICAgICAgfSBlbHNlIGlmIChsb3dlciA8PSB1cHBlcikgewoJICAgICAgICAgIHJldHVybiAobG93ZXIgKyB1cHBlcikgLyAyOwoJICAgICAgICB9CgkgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICJpbnQiKSB7CgkgICAgICAgIGlmIChsb3dlciA9PT0gLUluZmluaXR5ICYmIHVwcGVyID09PSBJbmZpbml0eSkgewoJICAgICAgICAgIHJldHVybiAxOwoJICAgICAgICB9IGVsc2UgaWYgKGxvd2VyID09PSAtSW5maW5pdHkpIHsKCSAgICAgICAgICByZXR1cm4gdXBwZXIgLSAxOwoJICAgICAgICB9IGVsc2UgaWYgKHVwcGVyID09PSBJbmZpbml0eSkgewoJICAgICAgICAgIHJldHVybiBsb3dlciArIDE7CgkgICAgICAgIH0gZWxzZSBpZiAobG93ZXIgPD0gdXBwZXIpIHsKCSAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgobG93ZXIgKyB1cHBlcikgLyAyKTsKCSAgICAgICAgfQoJICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAiYmluYXJ5IikgewoJICAgICAgICByZXR1cm4gMTsKCSAgICAgIH0KCSAgICAgIHRocm93ICJDb3VsZCBub3QgaW5pdGlhbGl6ZSBwYXJhbWV0ZXIgb2YgdHlwZSAiICsgdHlwZSArICJbIiArIGxvd2VyICsgIiwgIiArIHVwcGVyICsgIl0iOwoJICAgIH07CgoJICAgIC8qKgoJICAgICAqIENvbXBsZXRlcyBwYXJhbXNfdG9fY29tcGxldGUsIGFuIG9iamVjdCBjb250YWluaW5nIHBhcmFtZXRlciBkZXNjcmlwdGlvbnMsIAoJICAgICAqIGFuZCBpbml0aWFsaXplcyBub24taW5pdGlhbGl6ZWQgcGFyYW1ldGVycy4gVGhpcyBtb2RpZmllZCB2ZXJzaW9uIG9mCgkgICAgICogcGFyYW1zX3RvX2NvbXBsZXRlIGlzIHJldHVybmVkIGFzIGEgZGVlcCBjb3B5IGFuZCBub3QgbW9kaWZpZWQgaW4gcGxhY2UuCgkgICAgICogSW5pdGlhbGl6YXRpb24gaXMgZG9uZSBieSBzdXBwbHlpbmcgYSBwYXJhbV9pbml0IGZ1bmN0aW9uIHdpdGggc2lnbmF0dXJlCgkgICAgICogZnVuY3Rpb24odHlwZSwgbG93ZXIsIHVwcGVyKSB0aGF0IHNob3VsZCByZXR1cm4gYSBzaW5nbGUgbnVtYmVyIAoJICAgICAqIChsaWtlIHBhcmFtX2luaXRfZml4ZWQsIGZvciBleGFtcGxlKS4KCSAgICAgKiBAZXhhbXBsZQoJICAgICAqIHZhciBwYXJhbXMgPSB7ICJtdSI6IHsidHlwZSI6ICJyZWFsIn0gfQoJICAgICAqIHBhcmFtcyA9IGNvbXBsZXRlX3BhcmFtcyhwYXJhbXMpOwoJICAgICAqIC8vIHBhcmFtcyBzaG91bGQgbm93IGJlOgoJICAgICAqIC8vICB7Im11IjogeyAidHlwZSI6ICJyZWFsIiwgImRpbSI6IFsxXSwgInVwcGVyIjogSW5maW5pdHksCgkgICAgICogLy8gICAgICAgICAgICJsb3dlciI6IC1JbmZpbml0eSwgImluaXQiOiAwLjUgfX0KCSAgICAgKi8KCSAgICB2YXIgY29tcGxldGVfcGFyYW1zID0gZnVuY3Rpb24gKHBhcmFtc190b19jb21wbGV0ZSwgcGFyYW1faW5pdCkgewoJICAgICAgdmFyIHBhcmFtcyA9IGRlZXBfY2xvbmUocGFyYW1zX3RvX2NvbXBsZXRlKTsKCSAgICAgIGZvciAodmFyIHBhcmFtX25hbWUgaW4gcGFyYW1zKSB7CgkgICAgICAgIGlmICghcGFyYW1zLmhhc093blByb3BlcnR5KHBhcmFtX25hbWUpKSBjb250aW51ZTsKCSAgICAgICAgdmFyIHBhcmFtID0gcGFyYW1zW3BhcmFtX25hbWVdOwoJICAgICAgICBpZiAoIXBhcmFtLmhhc093blByb3BlcnR5KCJ0eXBlIikpIHsKCSAgICAgICAgICBwYXJhbS50eXBlID0gInJlYWwiOwoJICAgICAgICB9CgkgICAgICAgIGlmICghcGFyYW0uaGFzT3duUHJvcGVydHkoImRpbSIpKSB7CgkgICAgICAgICAgcGFyYW0uZGltID0gWzFdOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpc19udW1iZXIocGFyYW0uZGltKSkgewoJICAgICAgICAgIHBhcmFtLmRpbSA9IFtwYXJhbS5kaW1dOwoJICAgICAgICB9CgkgICAgICAgIGlmIChwYXJhbS50eXBlID09ICJiaW5hcnkiKSB7CgkgICAgICAgICAgcGFyYW0udXBwZXIgPSAxOwoJICAgICAgICAgIHBhcmFtLmxvd2VyID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXBhcmFtLmhhc093blByb3BlcnR5KCJ1cHBlciIpKSB7CgkgICAgICAgICAgcGFyYW0udXBwZXIgPSBJbmZpbml0eTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXBhcmFtLmhhc093blByb3BlcnR5KCJsb3dlciIpKSB7CgkgICAgICAgICAgcGFyYW0ubG93ZXIgPSAtSW5maW5pdHk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHBhcmFtLmhhc093blByb3BlcnR5KCJpbml0IikpIHsKCSAgICAgICAgICAvLyBJZiB0aGlzIGlzIGp1c3QgYSBudW1iZXIgb3IgYSBuZXN0ZWQgYXJyYXkgd2UgbGVhdmUgaXQgYWxvbmUsIGJ1dCBpZi4uLgoJICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgdHlwZW9mIHBhcmFtLmluaXQgPT09ICJmdW5jdGlvbiIpIHsKCSAgICAgICAgICAgIC8vIHBhcmFtLmluaXQgaXMgYSBmdW5jdGlvbiwgdXNlIHRoYXQgdG8gaW5pdGlhbGl6ZSB0aGUgcGFyYW1ldGVyLgoJICAgICAgICAgICAgcGFyYW0uaW5pdCA9IHBhcmFtLmluaXQoKTsKCSAgICAgICAgICB9IGVsc2UgaWYgKCFhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgIUFycmF5LmlzQXJyYXkocGFyYW0uaW5pdCkpIHsKCSAgICAgICAgICAgIC8vIFdlIGhhdmUgYSBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlciB3aGVyZSB0aGUgcGFyYW0uaW5pdCBleGlzdCBidXQKCSAgICAgICAgICAgIC8vIGlzIG5vdCBhbiBhcnJheS4gVGhlbiBhc3N1bWUgaXQgaXMgYSBudW1iZXIgb3IgYSBmdW5jdGlvbiBhbmQgdXNlCgkgICAgICAgICAgICAvLyBpdCB0byBpbml0aWFsaXplIHRoZSBwYXJhbWV0ZXIuCgkgICAgICAgICAgICBwYXJhbS5pbml0ID0gY3JlYXRlX2FycmF5KHBhcmFtLmRpbSwgcGFyYW0uaW5pdCk7CgkgICAgICAgICAgfQoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgIC8vIFdlIHVzZSB0aGUgZGVmYXVsdCBpbml0aWFsaXphdGlvbiBmdW5jdGlvbi4KCSAgICAgICAgICBpZiAoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7CgkgICAgICAgICAgICBwYXJhbS5pbml0ID0gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpOwoJICAgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgICBwYXJhbS5pbml0ID0gY3JlYXRlX2FycmF5KHBhcmFtLmRpbSwgZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgICByZXR1cm4gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpOwoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICB9CgkgICAgICByZXR1cm4gcGFyYW1zOwoJICAgIH07CgoJICAgIC8vLy8vLy8vLy8gU3RlcHBlciBGdW5jdGlvbnMgLy8vLy8vLy8vLy8KCSAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgoJICAgIC8qKgoJICAgICAqIEBpbnRlcmZhY2UKCSAgICAgKiBBIFN0ZXBwZXIgaXMgYW4gb2JqZWN0IHJlc3BvbnNpYmxlIGZvciBwdXNoaW5nIGFyb3VuZCBvbmUKCSAgICAgKiBvciBtb3JlIHBhcmFtZXRlciB2YWx1ZXMgaW4gYSBzdGF0ZSBhY2NvcmRpbmcgdG8gdGhlIGRpc3RyaWJ1dGlvbgoJICAgICAqIGRlZmluZWQgYnkgdGhlIGxvZyBwb3N0ZXJpb3IuIFRoaXMgZGVmaW5lcyB0aGUgU3RlcHBlciAiaW50ZXJmYWNlIiwKCSAgICAgKiB3aGVyZSAiaW50ZXJmYWNlIiBtZWFucyB0aGF0IFN0ZXBwZXIgZGVmaW5lcyBhIGNsYXNzIHRoYXQgaXMgbmV2ZXIKCSAgICAgKiBtZWFudCB0byBiZSBpbnN0YW50aWF0ZWQsIGJ1dCBqdXN0IHRvIGJlIHN1YmNsYXNzZWQgYnkgc3BlY2lhbGl6ZWQKCSAgICAgKiBzdGVwcGVyIGZ1bmN0aW9ucy4KCSAgICAgKiBAaW50ZXJmYWNlCgkgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlciBkZWZpbml0aW9ucywgZm9yIGV4YW1wbGU6CgkgICAgICogICB7Im11IjogeyAidHlwZSI6ICJyZWFsIiwgImRpbSI6IFsxXSwgInVwcGVyIjogSW5maW5pdHksIAoJICAgICAqICAgImxvd2VyIjogLUluZmluaXR5LCAiaW5pdCI6IDAuNSB9fQoJICAgICAqICAgVGhlIHBhcmFtZXRlciBkZWZpbml0aW9ucyBhcmUgZXhwZWN0ZWQgdG8gYmUgImNvbXBsZXRlIiwgdGhhdCBpcywKCSAgICAgKiAgIHNwZWNpZnlpbmcgYWxsIHJlbGV2YW50IGF0dHJpYnV0ZXMgc3VjaCBhcyBkaW0sIGxvd2VyIGFuZCB1cHBlci4KCSAgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMgaW4gcGFyYW1zCgkgICAgICogICAoYW5kIHBvc3NpYmx5IG1vcmUpLiBUaGUgcGFyYW1ldGVyIG5hbWVzIGFyZSBnaXZlbiBhcyBrZXlzIGFuZCB0aGUgc3RhdGVzCgkgICAgICogICBhcyBzY2FsYXJzIG9yLCBwb3NzaWJseSBuZXN0ZWQsIGFycmF5cy4gRm9yIGV4YW1wbGU6CgkgICAgICogICB7bXU6IDEwLCBzaWdtYTogNSwgYmV0YTogWzEsIDIuNV19CgkgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiAqdGFraW5nIG5vIHBhcmFtZXRlcnMqIHRoYXQgcmV0dXJucyB0aGUKCSAgICAgKiAgIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIFRoYXQgaXMsIHRoZSB2YWx1ZSBvZiBsb2dfcG9zdAoJICAgICAqICAgc2hvdWxkIGNoYW5nZSBpZiB0aGUgdGhlIHZhbHVlcyBpbiBzdGF0ZSBhcmUgY2hhbmdlZC4KCSAgICAKCSAgICAgKi8KCSAgICB2YXIgU3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCkgewoJICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7CgkgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7CgkgICAgICB0aGlzLmxvZ19wb3N0ID0gbG9nX3Bvc3Q7CgkgICAgfTsKCgkgICAgLyoqCgkgICAgICogVGFrZXMgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuIFNob3VsZCByZXR1cm4gdGhlIG5ldyBzdGF0ZSwKCSAgICAgKiBidXQgaXMgbWFpbmx5IGNhbGxlZCBmb3IgaXQncyBzaWRlIGVmZmVjdCBvZiBtYWtpbmcgYSBjaGFuZ2UgaW4gdGhlCgkgICAgICogc3RhdGUgb2JqZWN0LgoJICAgICAqLwoJICAgIFN0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CgkgICAgICB0aHJvdyAiRXZlcnkgU3RlcHBlciBuZWVkIHRvIGltcGxlbWVudCBzdGVwKCkiOwoJICAgIH07CgoJICAgIC8qKgoJICAgICAqIElmIGltcGxlbWVudGVkLCBtYWtlcyB0aGUgc3RlcHBlciBhZGFwdCB3aGlsZSBzdGVwcGluZy4KCSAgICAgKi8KCSAgICBTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgLy8gT3B0aW9uYWwsIHNvbWUgc3RlcHBlcnMgbWlnaHQgbm90IGJlIGFkYXB0aXZlLiAqLyAKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBJZiBpbXBsZW1lbnRlZCwgbWFrZXMgdGhlIHN0ZXBwZXIgY2Vhc2UgYWRhcHRpbmcgd2hpbGUgc3RlcHBpbmcuCgkgICAgICovCgkgICAgU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgLy8gT3B0aW9uYWwsIHNvbWUgc3RlcHBlcnMgbWlnaHQgbm90IGJlIGFkYXB0aXZlLiAqLyAKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGFuIG9iamVjdCBjb250YWluZyBpbmZvIHJlZ2FyZGluZyB0aGUgc3RlcHBlci4KCSAgICAgKi8KCSAgICBTdGVwcGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24gKCkgewoJICAgICAgLy8gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBpbmZvIGFib3V0IHRoZSBzdGF0ZSBvZiB0aGUgc3RlcHBlci4KCSAgICAgIHJldHVybiB7fTsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBAY2xhc3MKCSAgICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn0KCSAgICAgKiBDb25zdHJ1Y3RvciBmb3IgYW4gb2JqZWN0IHRoYXQgaW1wbGVtZW50cyB0aGUgbWV0cm9wb2xpcyBzdGVwIGluCgkgICAgICogdGhlIEFkYXB0aXZlIE1ldHJvcG9saXMtV2l0aGluLUdpYmJzIGFsZ29yaXRobSBpbiAiRXhhbXBsZXMgb2YgQWRhcHRpdmUgTUNNQyIKCSAgICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpLgoJICAgICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbi4KCSAgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuCgkgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAoJICAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci4KCSAgICAgKiBAcGFyYW0gZ2VuZXJhdGVfcHJvcG9zYWwgLSBhIGZ1bmN0aW9uIHJldHVybmluZyBhIHByb3Bvc2FsIChhcyBhIG51bWJlcikKCSAgICAgKiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihwYXJhbV9zdGF0ZSwgbG9nX3NjYWxlKSB3aGVyZSBwYXJhbV9zdGF0ZSBpcyBhCgkgICAgICogbnVtYmVyIGFuZCBsb2dfc2NhbGUgZGVmaW5lcyB0aGUgc2NhbGUgb2YgdGhlIHByb3Bvc2FsIHNvbWVob3cuCgkgICAgKi8KCSAgICB2YXIgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIGdlbmVyYXRlX3Byb3Bvc2FsKSB7CgkgICAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpOwoJICAgICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpOwoJICAgICAgaWYgKHBhcmFtX25hbWVzLmxlbmd0aCAhPSAxKSB7CgkgICAgICAgIHRocm93ICJPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBjYW4gb25seSBoYW5kbGUgb25lIHBhcmFtZXRlci4iOwoJICAgICAgfQoJICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07CgkgICAgICB2YXIgcGFyYW0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVdOwoJICAgICAgaWYgKCFhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHsKCSAgICAgICAgdGhyb3cgIk9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIGNhbiBvbmx5IGhhbmRsZSBvbmUgb25lLWRpbWVuc2lvbmFsIHBhcmFtZXRlci4iOwoJICAgICAgfQoJICAgICAgdGhpcy5sb3dlciA9IHBhcmFtLmxvd2VyOwoJICAgICAgdGhpcy51cHBlciA9IHBhcmFtLnVwcGVyOwoJICAgICAgdGhpcy5wcm9wX2xvZ19zY2FsZSA9IGdldF9vcHRpb24oInByb3BfbG9nX3NjYWxlIiwgb3B0aW9ucywgMCk7CgkgICAgICB0aGlzLmJhdGNoX3NpemUgPSBnZXRfb3B0aW9uKCJiYXRjaF9zaXplIiwgb3B0aW9ucywgNTApOwoJICAgICAgdGhpcy5tYXhfYWRhcHRhdGlvbiA9IGdldF9vcHRpb24oIm1heF9hZGFwdGF0aW9uIiwgb3B0aW9ucywgMC4zMyk7CgkgICAgICB0aGlzLmluaXRpYWxfYWRhcHRhdGlvbiA9IGdldF9vcHRpb24oImluaXRpYWxfYWRhcHRhdGlvbiIsIG9wdGlvbnMsIDEuMCk7CgkgICAgICB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSA9IGdldF9vcHRpb24oInRhcmdldF9hY2NlcHRfcmF0ZSIsIG9wdGlvbnMsIDAuNDQpOwoJICAgICAgdGhpcy5pc19hZGFwdGluZyA9IGdldF9vcHRpb24oImlzX2FkYXB0aW5nIiwgb3B0aW9ucywgdHJ1ZSk7CgkgICAgICB0aGlzLmdlbmVyYXRlX3Byb3Bvc2FsID0gZ2VuZXJhdGVfcHJvcG9zYWw7CgkgICAgICB0aGlzLmFjY2VwdGFuY2VfY291bnQgPSAwOwoJICAgICAgdGhpcy5iYXRjaF9jb3VudCA9IDA7CgkgICAgICB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24gPSAwOwoJICAgIH07CgkgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7CgkgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gT25lZGltTWV0cm9wb2xpc1N0ZXBwZXI7CgkgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CgkgICAgICB2YXIgcGFyYW1fc3RhdGUgPSB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV07CgkgICAgICB2YXIgcGFyYW1fcHJvcG9zYWwgPSB0aGlzLmdlbmVyYXRlX3Byb3Bvc2FsKHBhcmFtX3N0YXRlLCB0aGlzLnByb3BfbG9nX3NjYWxlKTsKCSAgICAgIGlmIChwYXJhbV9wcm9wb3NhbCA8IHRoaXMubG93ZXIgfHwgcGFyYW1fcHJvcG9zYWwgPiB0aGlzLnVwcGVyKSA7IGVsc2UgewoJICAgICAgICAvLyBtYWtlIGEgTWV0cm9wb2xpcyBzdGVwCgkgICAgICAgIHZhciBjdXJyX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpOwoJICAgICAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSBwYXJhbV9wcm9wb3NhbDsKCSAgICAgICAgdmFyIHByb3BfbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7CgkgICAgICAgIHZhciBhY2NlcHRfcHJvYiA9IE1hdGguZXhwKHByb3BfbG9nX2RlbnMgLSBjdXJyX2xvZ19kZW5zKTsKCSAgICAgICAgaWYgKGFjY2VwdF9wcm9iID4gTWF0aC5yYW5kb20oKSkgewoJICAgICAgICAgIC8vIFdlIGRvIG5vdGhpbmcgYXMgdGhlIHN0YXRlIG9mIHBhcmFtIGhhcyBhbHJlYWR5IGJlZW4gY2hhbmdlZCB0byB0aGUgcHJvcG9zYWwKCSAgICAgICAgICBpZiAodGhpcy5pc19hZGFwdGluZykgdGhpcy5hY2NlcHRhbmNlX2NvdW50Kys7CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgLy8gcmV2ZXJ0IHN0YXRlIGJhY2sgdG8gdGhlIG9sZCBzdGF0ZSBvZiBwYXJhbQoJICAgICAgICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IHBhcmFtX3N0YXRlOwoJICAgICAgICB9CgkgICAgICB9CgkgICAgICBpZiAodGhpcy5pc19hZGFwdGluZykgewoJICAgICAgICB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24rKzsKCSAgICAgICAgaWYgKHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiA+PSB0aGlzLmJhdGNoX3NpemUpIHsKCSAgICAgICAgICAvLyB0aGVuIGFkYXB0CgkgICAgICAgICAgdGhpcy5iYXRjaF9jb3VudCsrOwoJICAgICAgICAgIHZhciBsb2dfc2RfYWRqdXN0bWVudCA9IE1hdGgubWluKHRoaXMubWF4X2FkYXB0YXRpb24sIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uIC8gTWF0aC5zcXJ0KHRoaXMuYmF0Y2hfY291bnQpKTsKCSAgICAgICAgICBpZiAodGhpcy5hY2NlcHRhbmNlX2NvdW50IC8gdGhpcy5iYXRjaF9zaXplID4gdGhpcy50YXJnZXRfYWNjZXB0X3JhdGUpIHsKCSAgICAgICAgICAgIHRoaXMucHJvcF9sb2dfc2NhbGUgKz0gbG9nX3NkX2FkanVzdG1lbnQ7CgkgICAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMucHJvcF9sb2dfc2NhbGUgLT0gbG9nX3NkX2FkanVzdG1lbnQ7CgkgICAgICAgICAgfQoJICAgICAgICAgIHRoaXMuYWNjZXB0YW5jZV9jb3VudCA9IDA7CgkgICAgICAgICAgdGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uID0gMDsKCSAgICAgICAgfQoJICAgICAgfQoJICAgICAgcmV0dXJuIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXTsKCSAgICB9OwoJICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgdGhpcy5pc19hZGFwdGluZyA9IHRydWU7CgkgICAgfTsKCSAgICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgdGhpcy5pc19hZGFwdGluZyA9IGZhbHNlOwoJICAgIH07CgkgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICByZXR1cm4gewoJICAgICAgICBwcm9wX2xvZ19zY2FsZTogdGhpcy5wcm9wX2xvZ19zY2FsZSwKCSAgICAgICAgaXNfYWRhcHRpbmc6IHRoaXMuaXNfYWRhcHRpbmcsCgkgICAgICAgIGFjY2VwdGFuY2VfY291bnQ6IHRoaXMuYWNjZXB0YW5jZV9jb3VudCwKCSAgICAgICAgaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbjogdGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uLAoJICAgICAgICBiYXRjaF9jb3VudDogdGhpcy5iYXRjaF9jb3VudAoJICAgICAgfTsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBGdW5jdGlvbiByZXR1cm5pbmcgYSBOb3JtYWwgcHJvcG9zYWwuCgkgICAgICovCgkgICAgdmFyIG5vcm1hbF9wcm9wb3NhbCA9IGZ1bmN0aW9uIChwYXJhbV9zdGF0ZSwgcHJvcF9sb2dfc2NhbGUpIHsKCSAgICAgIHJldHVybiBybm9ybShwYXJhbV9zdGF0ZSwgTWF0aC5leHAocHJvcF9sb2dfc2NhbGUpKTsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBAY2xhc3MKCSAgICAgKiBAYXVnbWVudHMge09uZWRpbU1ldHJvcG9saXNTdGVwcGVyfQoJICAgICAqIEEgInN1YmNsYXNzIiBvZiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgY29udGlub3VzIE5vcm1hbCBwcm9wb3NhbHMuCgkgICAgICovCgkgICAgdmFyIFJlYWxNZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewoJICAgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgbm9ybWFsX3Byb3Bvc2FsKTsKCSAgICB9OwoJICAgIFJlYWxNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7CgkgICAgUmVhbE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFJlYWxNZXRyb3BvbGlzU3RlcHBlcjsKCgkgICAgLyoqCgkgICAgICogRnVuY3Rpb24gcmV0dXJuaW5nIGEgZGlzY3JldGl6ZWQgTm9ybWFsIHByb3Bvc2FsLgoJICAgICAqLwoJICAgIHZhciBkaXNjcmV0ZV9ub3JtYWxfcHJvcG9zYWwgPSBmdW5jdGlvbiAocGFyYW1fc3RhdGUsIHByb3BfbG9nX3NjYWxlKSB7CgkgICAgICByZXR1cm4gTWF0aC5yb3VuZChybm9ybShwYXJhbV9zdGF0ZSwgTWF0aC5leHAocHJvcF9sb2dfc2NhbGUpKSk7CgkgICAgfTsKCgkgICAgLyoqCgkgICAgKiBAY2xhc3MKCSAgICAqIEBhdWdtZW50cyB7T25lZGltTWV0cm9wb2xpc1N0ZXBwZXJ9CgkgICAgKiBBICJzdWJjbGFzcyIgb2YgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgbWFraW5nIGRpc2NyZXRpemVkIE5vcm1hbCBwcm9wb3NhbHMuCgkgICAgKi8KCSAgICB2YXIgSW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHsKCSAgICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIGRpc2NyZXRlX25vcm1hbF9wcm9wb3NhbCk7CgkgICAgfTsKCSAgICBJbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7CgkgICAgSW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSW50TWV0cm9wb2xpc1N0ZXBwZXI7CgoJICAgIC8qKgoJICAgICAqIEBjbGFzcwoJICAgICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfQoJICAgICAqIENvbnN0cnVjdG9yIGZvciBhbiBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIHRoZSBtZXRyb3BvbGlzIHN0ZXAgaW4KCSAgICAgKiB0aGUgQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluICJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DIgoJICAgICAqIGJ5IFJvYmVydHMgYW5kIFJvc2VudGhhbCAoMjAwOCkgZm9yIHBvc3NpYmx5IG11bHRpZGltZW5zaW9uYWwgYXJyYXlzLiBUaGF0CgkgICAgICogaXMsIGluc3RlYWQgb2YganVzdCB0YWtpbmcgYSBzdGVwIGZvciBhIG9uZS1kaW1lbnNpb25hbCBwYXJhbWV0ZXIgbGlrZSAKCSAgICAgKiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciwgdGhpcyBTdGVwcGVyIGlzIHJlc3BvbnNpYmxlIGZvciB0YWtpbmcgc3RlcHMgCgkgICAgICogZm9yIGEgbXVsdGlkaW1lbnNpb25hbCBhcnJheS4gSXQncyBzdGlsbCBwcmV0dHkgZHVtYiBhbmQganVzdCB0YWtlcwoJICAgICAqIG9uZS1kaW1lbnNpb25hbCBzdGVwcyBmb3IgZWFjaCBwYXJhbWV0ZXIgY29tcG9uZW50LCB0aG91Z2guCgkgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIHBhcmFtZXRlciBkZWZpbml0aW9uIGZvciBhIAoJICAgICAqICAgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIuCgkgICAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLgoJICAgICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiAKCSAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuCgkgICAgICogQHBhcmFtIFN1YlN0ZXBwZXIgLSBhIGNvbnN0cnVjdG9yIGZvciB0aGUgdHlwZSBvZiBvbmUgZGltZW5zaW9uYWwgU3RlcHBlciB0byBhcHBseSBvbgoJICAgICAqICAgYWxsIHRoZSBjb21wb25lbnRzIG9mIHRoZSBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlci4KCSAgICAqLwoJICAgIHZhciBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBTdWJTdGVwcGVyKSB7CgkgICAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpOwoJICAgICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpOwoJICAgICAgaWYgKHBhcmFtX25hbWVzLmxlbmd0aCAhPSAxKSB7CgkgICAgICAgIHRocm93ICJNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIGNhbid0IGhhbmRsZSBtb3JlIHRoYW4gb25lIHBhcmFtZXRlci4iOwoJICAgICAgfQoJICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07CgkgICAgICB2YXIgcGFyYW0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVdOwoJICAgICAgdGhpcy5sb3dlciA9IHBhcmFtLmxvd2VyOwoJICAgICAgdGhpcy51cHBlciA9IHBhcmFtLnVwcGVyOwoJICAgICAgdGhpcy5kaW0gPSBwYXJhbS5kaW07CgkgICAgICB0aGlzLnByb3BfbG9nX3NjYWxlID0gZ2V0X211bHRpZGltX29wdGlvbigicHJvcF9sb2dfc2NhbGUiLCBvcHRpb25zLCB0aGlzLmRpbSwgMCk7CgkgICAgICB0aGlzLmJhdGNoX3NpemUgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKCJiYXRjaF9zaXplIiwgb3B0aW9ucywgdGhpcy5kaW0sIDUwKTsKCSAgICAgIHRoaXMubWF4X2FkYXB0YXRpb24gPSBnZXRfbXVsdGlkaW1fb3B0aW9uKCJtYXhfYWRhcHRhdGlvbiIsIG9wdGlvbnMsIHRoaXMuZGltLCAwLjMzKTsKCSAgICAgIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uID0gZ2V0X211bHRpZGltX29wdGlvbigiaW5pdGlhbF9hZGFwdGF0aW9uIiwgb3B0aW9ucywgdGhpcy5kaW0sIDEuMCk7CgkgICAgICB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSA9IGdldF9tdWx0aWRpbV9vcHRpb24oInRhcmdldF9hY2NlcHRfcmF0ZSIsIG9wdGlvbnMsIHRoaXMuZGltLCAwLjQ0KTsKCSAgICAgIHRoaXMuaXNfYWRhcHRpbmcgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKCJpc19hZGFwdGluZyIsIG9wdGlvbnMsIHRoaXMuZGltLCB0cnVlKTsKCgkgICAgICAvLyBUaGlzIGhhY2sgYmVsb3cgaXMgYSByZWN1cnNpdmUgZnVuY3Rpb24gdGhhdCBjcmVhdGVzIGFuIGFycmF5IG9mIAoJICAgICAgLy8gb25lIGRpbWVuc2lvbmFsIHN0ZXBwZXJzIGFjY29yZGluZyB0byBkaW0uCgkgICAgICB2YXIgY3JlYXRlX3N1YnN0ZXBwZXJzID0gZnVuY3Rpb24gKGRpbSwgc3Vic3RhdGUsIGxvZ19wb3N0LCBwcm9wX2xvZ19zY2FsZSwgYmF0Y2hfc2l6ZSwgbWF4X2FkYXB0YXRpb24sIGluaXRpYWxfYWRhcHRhdGlvbiwgdGFyZ2V0X2FjY2VwdF9yYXRlLCBpc19hZGFwdGluZykgewoJICAgICAgICB2YXIgc3Vic3RlcHBlcnMgPSBbXTsKCSAgICAgICAgaWYgKGRpbS5sZW5ndGggPT09IDEpIHsKCSAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgc3Vib3B0aW9ucyA9IHsKCSAgICAgICAgICAgICAgcHJvcF9sb2dfc2NhbGU6IHByb3BfbG9nX3NjYWxlW2ldLAoJICAgICAgICAgICAgICBiYXRjaF9zaXplOiBiYXRjaF9zaXplW2ldLAoJICAgICAgICAgICAgICBtYXhfYWRhcHRhdGlvbjogbWF4X2FkYXB0YXRpb25baV0sCgkgICAgICAgICAgICAgIGluaXRpYWxfYWRhcHRhdGlvbjogaW5pdGlhbF9hZGFwdGF0aW9uW2ldLAoJICAgICAgICAgICAgICB0YXJnZXRfYWNjZXB0X3JhdGU6IHRhcmdldF9hY2NlcHRfcmF0ZVtpXSwKCSAgICAgICAgICAgICAgaXNfYWRhcHRpbmc6IGlzX2FkYXB0aW5nW2ldCgkgICAgICAgICAgICB9OwoJICAgICAgICAgICAgdmFyIHN1YnBhcmFtID0ge307CgkgICAgICAgICAgICBzdWJwYXJhbVtpXSA9IGRlZXBfY2xvbmUocGFyYW0pOwoJICAgICAgICAgICAgc3VicGFyYW1baV0uZGltID0gWzFdOyAvLyBBcyB0aGlzIHNob3VsZCBub3cgYmUgYSBvbmUtZGltIHBhcmFtZXRlcgoJICAgICAgICAgICAgZGVsZXRlIHN1YnBhcmFtW2ldLmluaXQ7IC8vIEFzIGl0IHNvdWxkIG5vdCBiZSBuZWVkZWQKCSAgICAgICAgICAgIHN1YnN0ZXBwZXJzW2ldID0gbmV3IFN1YlN0ZXBwZXIoc3VicGFyYW0sIHN1YnN0YXRlLCBsb2dfcG9zdCwgc3Vib3B0aW9ucyk7CgkgICAgICAgICAgfQoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHsKCSAgICAgICAgICAgIHN1YnN0ZXBwZXJzW2ldID0gY3JlYXRlX3N1YnN0ZXBwZXJzKGRpbS5zbGljZSgxKSwgc3Vic3RhdGVbaV0sIGxvZ19wb3N0LCBwcm9wX2xvZ19zY2FsZVtpXSwgYmF0Y2hfc2l6ZVtpXSwgbWF4X2FkYXB0YXRpb25baV0sIGluaXRpYWxfYWRhcHRhdGlvbltpXSwgdGFyZ2V0X2FjY2VwdF9yYXRlW2ldLCBpc19hZGFwdGluZ1tpXSk7CgkgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzdWJzdGVwcGVyczsKCSAgICAgIH07CgkgICAgICB0aGlzLnN1YnN0ZXBwZXJzID0gY3JlYXRlX3N1YnN0ZXBwZXJzKHRoaXMuZGltLCB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0sIHRoaXMubG9nX3Bvc3QsIHRoaXMucHJvcF9sb2dfc2NhbGUsIHRoaXMuYmF0Y2hfc2l6ZSwgdGhpcy5tYXhfYWRhcHRhdGlvbiwgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24sIHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlLCB0aGlzLmlzX2FkYXB0aW5nKTsKCSAgICB9OwoJICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7CgkgICAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOwoJICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAvLyBHbyB0aHJvdWdoIHRoZSBzdWJzdGVwcGVycyBpbiBhIHJhbmRvbSBvcmRlciBhbmQgY2FsbCBzdGVwKCkgb24gdGhlbS4KCSAgICAgIHJldHVybiBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uIChzdWJzdGVwcGVyKSB7CgkgICAgICAgIHJldHVybiBzdWJzdGVwcGVyLnN0ZXAoKTsKCSAgICAgIH0pOwoJICAgIH07CgkgICAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgIG5lc3RlZF9hcnJheV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbiAoc3Vic3RlcHBlcikgewoJICAgICAgICBzdWJzdGVwcGVyLnN0YXJ0X2FkYXB0YXRpb24oKTsKCSAgICAgIH0pOwoJICAgIH07CgkgICAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgbmVzdGVkX2FycmF5X2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uIChzdWJzdGVwcGVyKSB7CgkgICAgICAgIHN1YnN0ZXBwZXIuc3RvcF9hZGFwdGF0aW9uKCk7CgkgICAgICB9KTsKCSAgICB9OwoJICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICByZXR1cm4gbmVzdGVkX2FycmF5X2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uIChzdWJzdGVwcGVyKSB7CgkgICAgICAgIHJldHVybiBzdWJzdGVwcGVyLmluZm8oKTsKCSAgICAgIH0pOwoJICAgIH07CgoJICAgIC8qKgoJICAgICAqIEBjbGFzcwoJICAgICAqIEBhdWdtZW50cyB7TXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcn0KCSAgICAgKiBBICJzdWJjbGFzcyIgb2YgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgY29udGlub3VzIE5vcm1hbCBwcm9wb3NhbHMuCgkgICAgICovCgkgICAgdmFyIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7CgkgICAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIFJlYWxNZXRyb3BvbGlzU3RlcHBlcik7CgkgICAgfTsKCSAgICBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsKCSAgICBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjsKCgkgICAgLyoqCgkgICAgICogQGNsYXNzCgkgICAgICogQGF1Z21lbnRzIHtNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyfQoJICAgICAqIEEgInN1YmNsYXNzIiBvZiBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBkaXNjcmV0aXplZCBOb3JtYWwgcHJvcG9zYWxzLgoJICAgICAqLwoJICAgIHZhciBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7CgkgICAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIEludE1ldHJvcG9saXNTdGVwcGVyKTsKCSAgICB9OwoJICAgIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7CgkgICAgTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOwoKCSAgICAvKioKCSAgICAgKiBAY2xhc3MKCSAgICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn0KCSAgICAgKiBDb25zdHJ1Y3RvciBmb3IgYW4gb2JqZWN0IHRoYXQgaW1wbGVtZW50cyBhIHN0ZXAgZm9yIGEgYmluYXJ5IHBhcmFtZXRlci4KCSAgICAgKiBUaGlzIGlzIGRvbmUgYnkgZXZhbHVhdGluZyB0aGUgbG9nIHBvc3RlcmlvciBmb3IgYm90aCBzdGF0ZXMgb2YgdGhlCgkgICAgICogcGFyYW1ldGVyIGFuZCB0aGVuIHNlbGVjdGluZyBhIHN0YXRlIHJhbmRvbWx5IHdpdGggcHJvYmFiaWxpdHkgcmVsYXRpdmUgCgkgICAgICogdG8gdGhlIHBvc3RlcmlvciBvZiBlYWNoIHN0YXRlLgoJICAgICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbi4KCSAgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuCgkgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAoJICAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci4KCSAgICAqLwoJICAgIHZhciBCaW5hcnlTdGVwcGVyID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7CgkgICAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpOwoJICAgICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpOwoJICAgICAgaWYgKHBhcmFtX25hbWVzLmxlbmd0aCA9PSAxKSB7CgkgICAgICAgIHRoaXMucGFyYW1fbmFtZSA9IHBhcmFtX25hbWVzWzBdOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgdGhyb3cgIkJpbmFyeVN0ZXBwZXIgY2FuJ3QgaGFuZGxlIG1vcmUgdGhhbiBvbmUgcGFyYW1ldGVyLiI7CgkgICAgICB9CgkgICAgfTsKCSAgICBCaW5hcnlTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOwoJICAgIEJpbmFyeVN0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQmluYXJ5U3RlcHBlcjsKCSAgICBCaW5hcnlTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKCkgewoJICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMDsKCSAgICAgIHZhciB6ZXJvX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpOwoJICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMTsKCSAgICAgIHZhciBvbmVfbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7CgkgICAgICB2YXIgbWF4X2xvZ19kZW5zID0gTWF0aC5tYXgoemVyb19sb2dfZGVucywgb25lX2xvZ19kZW5zKTsKCSAgICAgIHplcm9fbG9nX2RlbnMgLT0gbWF4X2xvZ19kZW5zOwoJICAgICAgb25lX2xvZ19kZW5zIC09IG1heF9sb2dfZGVuczsKCSAgICAgIHZhciB6ZXJvX3Byb2IgPSBNYXRoLmV4cCh6ZXJvX2xvZ19kZW5zIC0gTWF0aC5sb2coTWF0aC5leHAoemVyb19sb2dfZGVucykgKyBNYXRoLmV4cChvbmVfbG9nX2RlbnMpKSk7CgkgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IHplcm9fcHJvYikgewoJICAgICAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSAwOwoJICAgICAgICByZXR1cm4gMDsKCSAgICAgIH0gLy8gZWxzZSBrZWVwIHRoZSBwYXJhbSBhdCAxIC4KCSAgICAgIHJldHVybiAxOwoJICAgIH07CgoJICAgIC8qKgoJICAgICogQGNsYXNzCgkgICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn0KCSAgICAqIEp1c3QgbGlrZSBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIHRoaXMgU3RlcHBlciB0YWtlcyBhIHN0ZXBzIGZvcgoJICAgICogYSBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlciBieSB1cGRhdGluZyBlYWNoIGNvbXBvbmVudCBpbiB0dXJuLiBUaGUgZGlmZmVyZW5jZQoJICAgICogaXMgdGhhdCB0aGlzIHN0ZXBwZXIgd29ya3Mgb24gYmluYXJ5IHBhcmFtZXRlcnMuCgkgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBzaW5nbGUgcGFyYW1ldGVyIGRlZmluaXRpb24gZm9yIGEgCgkgICAgKiAgIG11bHRpZGltZW5zaW9uYWwgcGFyYW1ldGVyLgoJICAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLgoJICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAoJICAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLgoJICAgICovCgkgICAgdmFyIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHsKCSAgICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7CgkgICAgICB2YXIgcGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7CgkgICAgICBpZiAocGFyYW1fbmFtZXMubGVuZ3RoID09IDEpIHsKCSAgICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07CgkgICAgICAgIHZhciBwYXJhbSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZV07CgkgICAgICAgIHRoaXMuZGltID0gcGFyYW0uZGltOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgdGhyb3cgIkJpbmFyeUNvbXBvbmVudFN0ZXBwZXIgY2FuJ3QgaGFuZGxlIG1vcmUgdGhhbiBvbmUgcGFyYW1ldGVyLiI7CgkgICAgICB9CgkgICAgICB2YXIgY3JlYXRlX3N1YnN0ZXBwZXJzID0gZnVuY3Rpb24gKGRpbSwgc3Vic3RhdGUsIGxvZ19wb3N0KSB7CgkgICAgICAgIHZhciBzdWJzdGVwcGVycyA9IFtdOwoJICAgICAgICB2YXIgaTsKCSAgICAgICAgaWYgKGRpbS5sZW5ndGggPT09IDEpIHsKCSAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBzdWJwYXJhbXMgPSB7fTsKCSAgICAgICAgICAgIHN1YnBhcmFtc1tpXSA9IHBhcmFtOwoJICAgICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBuZXcgQmluYXJ5U3RlcHBlcihzdWJwYXJhbXMsIHN1YnN0YXRlLCBsb2dfcG9zdCk7CgkgICAgICAgICAgfQoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewoJICAgICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBjcmVhdGVfc3Vic3RlcHBlcnMoZGltLnNsaWNlKDEpLCBzdWJzdGF0ZVtpXSwgbG9nX3Bvc3QpOwoJICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gc3Vic3RlcHBlcnM7CgkgICAgICB9OwoJICAgICAgdGhpcy5zdWJzdGVwcGVycyA9IGNyZWF0ZV9zdWJzdGVwcGVycyh0aGlzLmRpbSwgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdLCB0aGlzLmxvZ19wb3N0KTsKCSAgICB9OwoJICAgIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7CgkgICAgQmluYXJ5Q29tcG9uZW50U3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCaW5hcnlDb21wb25lbnRTdGVwcGVyOwoJICAgIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAvLyBHbyB0aHJvdWdoIHRoZSBzdWJzdGVwcGVycyBpbiBhIHJhbmRvbSBvcmRlciBhbmQgY2FsbCBzdGVwKCkgb24gdGhlbS4KCSAgICAgIHJldHVybiBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uIChzdWJzdGVwcGVyKSB7CgkgICAgICAgIHJldHVybiBzdWJzdGVwcGVyLnN0ZXAoKTsKCSAgICAgIH0pOwoJICAgIH07CgoJICAgIC8qKgoJICAgICAqIEBjbGFzcwoJICAgICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfQoJICAgICAqIFRoaXMgc3RlcHBlciBjYW4gYmUgcmVzcG9uc2libGUgZm9yIHRha2luZyBhIHN0ZXAgZm9yIG9uZSBvciBtb3JlIHBhcmFtZXRlcnMuCgkgICAgICogRm9yIHJlYWwgYW5kIGludCBwYXJhbWV0ZXJzIGl0IHRha2VzIE1ldHJvcG9saXMgd2l0aGluIEdpYmJzIHN0ZXBzLCBhbmQgZm9yIAoJICAgICAqIGJpbmFyeSBwYXJhbWV0ZXJzIGl0IGRvZXMgZXZhbHVhdGVzIHRoZSBwb3N0ZXJpb3IgZm9yIGJvdGggcGFyYW10ZXIgdmFsdWVzIGFuZAoJICAgICAqIHJhbmRvbWx5IGNoYW5nZXMgdG8gYSBjZXJ0YWluIHZhbHVlIHByb3BvcnRpb25hbGx5IHRvIHRoYXQgdmFsdWUncyBwb3N0ZXJpb3IKCSAgICAgKiAodGhpcyBpcyBhbHNvIGRvbmUgZm9yIGVhY2ggcGFyYW1ldGVyLCBzbyBhbHNvIGEgKiB3aXRoaW4gR2liYnMgYXBwcm9hY2gpLgoJICAgICAqIFRoaXMgc3RlcHBlciBpcyBhbHNvIGFkYXB0aXZlIGFuZCBjYW4gYmUgZWZmaWNpZW50IHdoZW4gdGhlIG51bWJlciBvZiBwYXJhbWV0ZXJzCgkgICAgICogYXJlIG5vdCB0b28gaGlnaCBhbmQgdGhlIGNvcnJlbGF0aW9ucyBiZXR3ZWVuIHBhcmFtZXRlcnMgYXJlIGxvdy4KCSAgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBvbmUgb3IgbW9yZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMKCSAgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuCgkgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAoJICAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci4KCSAgICAqLwoJICAgIHZhciBBbXdnU3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewoJICAgICAgU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KTsKCSAgICAgIHRoaXMucGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7CgkgICAgICB0aGlzLnN1YnN0ZXBwZXJzID0gW107CgkgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGFyYW1fbmFtZXMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgdmFyIHBhcmFtID0gcGFyYW1zW3RoaXMucGFyYW1fbmFtZXNbaV1dOwoJICAgICAgICB2YXIgU2VsZWN0U3RlcHBlcjsKCSAgICAgICAgc3dpdGNoIChwYXJhbS50eXBlKSB7CgkgICAgICAgICAgY2FzZSAicmVhbCI6CgkgICAgICAgICAgICBpZiAoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7CgkgICAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBSZWFsTWV0cm9wb2xpc1N0ZXBwZXI7CgkgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICBjYXNlICJpbnQiOgoJICAgICAgICAgICAgaWYgKGFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkgewoJICAgICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gSW50TWV0cm9wb2xpc1N0ZXBwZXI7CgkgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgIGNhc2UgImJpbmFyeSI6CgkgICAgICAgICAgICBpZiAoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7CgkgICAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBCaW5hcnlTdGVwcGVyOwoJICAgICAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IEJpbmFyeUNvbXBvbmVudFN0ZXBwZXI7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgdGhyb3cgIkFtd2dTdGVwcGVyIGNhbid0IGhhbmRsZSBwYXJhbWV0ZXIgIiArIHRoaXMucGFyYW1fbmFtZXNbaV0gKyAiIHdpdGggdHlwZSAiICsgcGFyYW0udHlwZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcGFyYW1fb2JqZWN0X3dyYXAgPSB7fTsKCSAgICAgICAgcGFyYW1fb2JqZWN0X3dyYXBbdGhpcy5wYXJhbV9uYW1lc1tpXV0gPSBwYXJhbTsKCSAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CgkgICAgICAgIHZhciBwYXJhbV9vcHRpb25zID0gb3B0aW9ucy5wYXJhbXMgJiYgb3B0aW9ucy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lc1tpXV0gfHwge307CgkgICAgICAgIHBhcmFtX29wdGlvbnMucHJvcF9sb2dfc2NhbGUgPSBwYXJhbV9vcHRpb25zLnByb3BfbG9nX3NjYWxlIHx8IG9wdGlvbnMucHJvcF9sb2dfc2NhbGU7CgkgICAgICAgIHBhcmFtX29wdGlvbnMuYmF0Y2hfc2l6ZSA9IHBhcmFtX29wdGlvbnMuYmF0Y2hfc2l6ZSB8fCBvcHRpb25zLmJhdGNoX3NpemU7CgkgICAgICAgIHBhcmFtX29wdGlvbnMubWF4X2FkYXB0YXRpb24gPSBwYXJhbV9vcHRpb25zLm1heF9hZGFwdGF0aW9uIHx8IG9wdGlvbnMubWF4X2FkYXB0YXRpb247CgkgICAgICAgIHBhcmFtX29wdGlvbnMuaW5pdGlhbF9hZGFwdGF0aW9uID0gcGFyYW1fb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb24gfHwgb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb247CgkgICAgICAgIHBhcmFtX29wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlID0gcGFyYW1fb3B0aW9ucy50YXJnZXRfYWNjZXB0X3JhdGUgfHwgb3B0aW9ucy50YXJnZXRfYWNjZXB0X3JhdGU7CgkgICAgICAgIHBhcmFtX29wdGlvbnMuaXNfYWRhcHRpbmcgPSBwYXJhbV9vcHRpb25zLmlzX2FkYXB0aW5nIHx8IG9wdGlvbnMuaXNfYWRhcHRpbmc7CgkgICAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0gPSBuZXcgU2VsZWN0U3RlcHBlcihwYXJhbV9vYmplY3Rfd3JhcCwgc3RhdGUsIGxvZ19wb3N0LCBwYXJhbV9vcHRpb25zKTsKCSAgICAgIH0KCSAgICB9OwoJICAgIEFtd2dTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOwoJICAgIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEFtd2dTdGVwcGVyOwoJICAgIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKCkgewoJICAgICAgc2h1ZmZsZV9hcnJheSh0aGlzLnN1YnN0ZXBwZXJzKTsKCSAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzdGVwcGVycy5sZW5ndGg7IGkrKykgewoJICAgICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldLnN0ZXAoKTsKCSAgICAgIH0KCSAgICAgIHJldHVybiB0aGlzLnN0YXRlOwoJICAgIH07CgkgICAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgdGhpcy5zdWJzdGVwcGVyc1tpXS5zdGFydF9hZGFwdGF0aW9uKCk7CgkgICAgICB9CgkgICAgfTsKCSAgICBBbXdnU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0uc3RvcF9hZGFwdGF0aW9uKCk7CgkgICAgICB9CgkgICAgfTsKCSAgICBBbXdnU3RlcHBlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgIHZhciBpbmZvID0ge307CgkgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgaW5mb1t0aGlzLnBhcmFtX25hbWVzW2ldXSA9IHRoaXMuc3Vic3RlcHBlcnNbaV0uaW5mbygpOwoJICAgICAgfQoJICAgICAgcmV0dXJuIGluZm87CgkgICAgfTsKCgkgICAgLy8vLy8vLy8vLy8gU2FtcGxlciBGdW5jdGlvbnMgLy8vLy8vLy8vLwoJICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCgkgICAgLyoqCgkgICAgKiBAaW50ZXJmYWNlCgkgICAgKiBXaGlsZSB5b3UgY291bGQgZml0IGEgbW9kZWwgYnkgcGFzdGluZyB0b2dldGhlciBTdGVwcGVycywgYQoJICAgIC8vIFNhbXBsZXIgaXMgaGVyZSBpcyBhIGNvbnZlbmllbmNlIGNsYXNzIHdoZXJlIGFuIGluc3RhbmNlIG9mIFNhbXBsZXIKCSAgICAvLyBzZXRzIHVwIHRoZSBTdGVwcGVycywgY2hlY2tzIHRoZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbiwKCSAgICAvLyBhbmQgbWFuYWdlcyB0aGUgc2FtcGxpbmcuIFRoaXMgaGVyZSBkZWZpbmVzIHRoZSBTYW1wbGVyICJpbnRlcmZhY2UiLgoJICAgICogQGludGVyZmFjZQoJICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlciBkZWZpbml0aW9ucywgZm9yIGV4YW1wbGU6CgkgICAgKiAgIHsibXUiOiB7InR5cGUiOiAicmVhbCJ9LCAic2lnbWEiOiB7InR5cGUiOiAicmVhbCIsICJsb3dlciIgPSAwfX0KCSAgICAqICAgVGhlIHBhcmFtZXRlciBkZWZpbml0aW9ucyBkb2Vzbid0IGhhdmUgdG8gYmUgImNvbXBsZXRlIiBhbmQgcHJvcGVydGllcwoJICAgICogICBsZWZ0IG91dCAobGlrZSBsb3dlciBhbmQgdXBwZXIpIHdpbGwgYmUgZmlsbGVkIGluIGJ5IGRlZmF1bHRzLgoJICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihzdGF0ZSwgZGF0YSkuIEhlcmUKCSAgICAqICAgc3RhdGUgd2lsbCBiZSBhbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzdGF0ZSB3aXRoIGVhY2ggcGFyYW1ldGVyIGFzIGEgCgkgICAgKiAgIGtleSBhbmQgdGhlIHBhcmFtZXRlciB2YWx1ZXMgYXMgbnVtYmVycyBvciBhcnJheXMuIEZvciBleGFtcGxlOgoJICAgICogICB7Im11IjogMywgInNpZ21hIjogMS41fS4gVGhlIGRhdGEgYXJndW1lbnQgd2lsbCBiZSB0aGUgc2FtZSBvYmplY3QgYXMgCgkgICAgKiAgIHRoZSBkYXRhIGFyZ3VtZW50IGdpdmVuIGJlbG93LgoJICAgICogQHBhcmFtIGRhdGEgLSBhbiBvYmplY3QgdGhhdCB3aWxsIGJlIHBhc3NlZCBvbiB0byB0aGUgbG9nX3Bvc3QgZnVuY3Rpb24KCSAgICAqICAgd2hlbiBzYW1wbGluZy4KCSAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc2FtcGxlci4KCSAgICAqLwoJICAgIHZhciBTYW1wbGVyID0gZnVuY3Rpb24gKHBhcmFtcywgbG9nX3Bvc3QsIGRhdGEsIG9wdGlvbnMpIHsKCSAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zOwoJICAgICAgdGhpcy5kYXRhID0gZGF0YTsKCSAgICAgIHRoaXMucGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7CgoJICAgICAgLy8gU2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgaWYgbm90IHBhc3NlZCB0aHJvdWdoIHRoZSBvcHRpb25zIG9iamVjdAoJICAgICAgdGhpcy5wYXJhbV9pbml0X2Z1biA9IGdldF9vcHRpb24oInBhcmFtX2luaXRfZnVuIiwgb3B0aW9ucywgcGFyYW1faW5pdF9maXhlZCk7CgkgICAgICB2YXIgdGhpbm5pbmdfaW50ZXJ2YWwgPSBnZXRfb3B0aW9uKCJ0aGluIiwgb3B0aW9ucywgMSk7CgkgICAgICB2YXIgcGFyYW1zX3RvX21vbml0b3IgPSBnZXRfb3B0aW9uKCJtb25pdG9yIiwgb3B0aW9ucywgbnVsbCk7CgkgICAgICB0aGlzLnRoaW4odGhpbm5pbmdfaW50ZXJ2YWwpOwoJICAgICAgdGhpcy5tb25pdG9yKHBhcmFtc190b19tb25pdG9yKTsKCSAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CgkgICAgICAvLyBDb21wbGV0aW5nIHRoZSBwYXJhbXMgYW5kIGluaXRpYWxpemluZyB0aGUgc3RhdGUuCgkgICAgICB0aGlzLnBhcmFtcyA9IGNvbXBsZXRlX3BhcmFtcyh0aGlzLnBhcmFtcywgdGhpcy5wYXJhbV9pbml0X2Z1bik7CgkgICAgICB2YXIgc3RhdGUgPSB7fTsKCSAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXJhbV9uYW1lcy5sZW5ndGg7IGkrKykgewoJICAgICAgICBzdGF0ZVt0aGlzLnBhcmFtX25hbWVzW2ldXSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZXNbaV1dLmluaXQ7CgkgICAgICB9CgkgICAgICB0aGlzLmxvZ19wb3N0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbG9nX3Bvc3Qoc3RhdGUsIGRhdGEpOwoJICAgICAgfTsKCSAgICAgIC8vIFJ1bm5pbmcgdGhlIGxvZ19wb3N0IGZ1bmN0aW9uIG9uY2UgaW4gY2FzZSBpdCBmdXJ0aGVyIG1vZGlmaWVzIHRoZSBzdGF0ZQoJICAgICAgLy8gZm9yIGV4YW1wbGUgYWRkaW5nIGRlcml2ZWQgcXVhbnRpdGllcy4KCSAgICAgIHRoaXMubG9nX3Bvc3QoKTsKCSAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTsKCSAgICAgIHRoaXMuc3RlcHBlcnMgPSB0aGlzLmNyZWF0ZV9zdGVwcGVyX2Vuc2FtYmxlKHRoaXMucGFyYW1zLCB0aGlzLnN0YXRlLCB0aGlzLmxvZ19wb3N0LCB0aGlzLm9wdGlvbnMpOwoJICAgIH07CgoJICAgIC8qKiBTaG91bGQgcmV0dXJuIGEgdmVjdG9yIG9mIHN0ZXBwZXJzIHRoYXQgd2hlbiBjYWxsZWQgCgkgICAgICogc2hvdWxkIHRha2UgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuCgkgICAgICovCgkgICAgU2FtcGxlci5wcm90b3R5cGUuY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUgPSBmdW5jdGlvbiAoc3RhdGUsIGxvZ19wb3N0KSB7CgkgICAgICB0aHJvdyAiRXZlcnkgU2FtcGxlciBuZWVkcyB0byBpbXBsZW1lbnQgY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUoKSI7CgkgICAgfTsKCgkgICAgLyoqIFJldHVybnMgYW4gb2JqZWN0IHdpdGggaW5mbyBhYm91dCB0aGUgc3RhdGUgb2YgdGhlIFNhbXBsZXIuCgkgICAgICovCgkgICAgU2FtcGxlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgIHJldHVybiB7CgkgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLAoJICAgICAgICB0aGluOiB0aGlzLnRoaW4sCgkgICAgICAgIG1vbml0b3I6IHRoaXMubW9uaXRvciwKCSAgICAgICAgc3RlcHBlcnM6IHRoaXMuc3RlcHBlcnMKCSAgICAgIH07CgkgICAgfTsKCgkgICAgLyoqIFRha2VzIGEgc3RlcCBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlLiBSZXR1cm5zIHRoZSBuZXcgc3BhY2UKCSAgICAgKiBidXQgYWxzbyBtb2RpZmllcyB0aGUgc3RhdGUgaW4gcGxhY2UuCgkgICAgICovCgkgICAgU2FtcGxlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgIHNodWZmbGVfYXJyYXkodGhpcy5zdGVwcGVycyk7CgkgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3RlcHBlcnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgdGhpcy5zdGVwcGVyc1tpXS5zdGVwKCk7CgkgICAgICB9CgkgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5zdGF0ZSkubGVuZ3RoID4gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpLmxlbmd0aCkgewoJICAgICAgICAvLyBUaGUgc3RhdGUgY29udGFpbnMgZGV2aXZlZCBxdWFudGl0aWVzIChub3Qgb25seSBwYXJhbWV0ZXJzKSBhbmQgd2UKCSAgICAgICAgLy8gbmVlZCB0byBydW4gdGhlIGxvZ19wb3N0IG9uY2UgbW9yZSBpbiBvcmRlciB0byBzZXQgdGhlIGRlcml2ZWQgcXVhbnRpdGllcwoJICAgICAgICAvLyBmb3IgdGhlIGZpbmFsIHBhcmFtZXRlciBzdGF0ZQoJICAgICAgICB0aGlzLmxvZ19wb3N0KCk7CgkgICAgICB9CgkgICAgICByZXR1cm4gdGhpcy5zdGF0ZTsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBUYWtlcyBuX2l0ZXJhdGlvbnMgc3RlcHMgaW4gdGhlIHBhcmFtZXRlciBzcGFjZSBhbmQgcmV0dXJucyB0aGVtCgkgICAgICogYXMgYW4gb2JqZWN0IG9mIGFycmF5cyB3aXRoIG9uZSBhcnJheSBwZXIgcGFyYW1ldGVyLiBGb3IgZXhhbXBsZToKCSAgICAgKiB7bXU6IFsxLCAtMSwgMiwgMywgLi4uXSwgc2lnbWE6IFsxLCAyLCAyLCAxLCAuLi5dfS4KCSAgICAgKiBJZiB0aGluIGlzID4gMSB0aGVuIG5faXRlcmF0aW9ucyAvIHRoaW4gc2FtcGxlcyBhcmUgcmV0dXJuZWQuCgkgICAgICovCgkgICAgU2FtcGxlci5wcm90b3R5cGUuc2FtcGxlID0gZnVuY3Rpb24gKG5faXRlcmF0aW9ucykgewoJICAgICAgLy8gSW5pdGlhbGl6aW5nIGN1cnJfc2FtcGxlIHdoZXJlIHRoZSBzYW1wbGUgaXMgZ29pbmcgdG8gYmUgc2F2ZWQKCSAgICAgIC8vIGFzIGFuIG9iamVjdCBjb250YWluaW5nIG9uZSBhcnJheSBwZXIgcGFyYW1ldGVyIHRvIGJlIG1vbml0b3JlZC4KCSAgICAgIHZhciBpLCBqLCBtb25pdG9yZWRfcGFyYW1zOwoJICAgICAgaWYgKHRoaXMubW9uaXRvcmVkX3BhcmFtcyA9PT0gbnVsbCkgewoJICAgICAgICBtb25pdG9yZWRfcGFyYW1zID0gT2JqZWN0LmtleXModGhpcy5zdGF0ZSk7CgkgICAgICB9IGVsc2UgewoJICAgICAgICBtb25pdG9yZWRfcGFyYW1zID0gdGhpcy5tb25pdG9yZWRfcGFyYW1zOwoJICAgICAgfQoJICAgICAgdmFyIGN1cnJfc2FtcGxlID0ge307CgkgICAgICBmb3IgKGogPSAwOyBqIDwgbW9uaXRvcmVkX3BhcmFtcy5sZW5ndGg7IGorKykgewoJICAgICAgICBjdXJyX3NhbXBsZVttb25pdG9yZWRfcGFyYW1zW2pdXSA9IFtdOwoJICAgICAgfQoJICAgICAgZm9yIChpID0gMDsgaSA8IG5faXRlcmF0aW9uczsgaSsrKSB7CgkgICAgICAgIGlmIChpICUgdGhpcy50aGlubmluZ19pbnRlcnZhbCA9PT0gMCkgewoJICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBtb25pdG9yZWRfcGFyYW1zLmxlbmd0aDsgaisrKSB7CgkgICAgICAgICAgICB2YXIgcGFyYW0gPSBtb25pdG9yZWRfcGFyYW1zW2pdOwoJICAgICAgICAgICAgY3Vycl9zYW1wbGVbcGFyYW1dLnB1c2goY2xvbmVfcGFyYW1fZHJhdyh0aGlzLnN0YXRlW3BhcmFtXSkpOwoJICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGlzLnN0ZXAoKTsKCSAgICAgIH0KCSAgICAgIHJldHVybiBjdXJyX3NhbXBsZTsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBUYWtlcyBuX2l0ZXJhdGlvbiBzdGVwcyBpbiBwYXJhbWV0ZXIgc3BhY2UgYnV0IHJldHVybnMgbm90aGluZy4KCSAgICAgKi8KCSAgICBTYW1wbGVyLnByb3RvdHlwZS5idXJuID0gZnVuY3Rpb24gKG5faXRlcmF0aW9ucykgewoJICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuX2l0ZXJhdGlvbnM7IGkrKykgewoJICAgICAgICB0aGlzLnN0ZXAoKTsKCSAgICAgIH0KCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBTZXRzIHdoYXQgcGFyYW1ldGVycyBzaG91bGQgYmUgbW9uaXRvcmVkIGFuZCByZXR1cm5lZCB3aGVuIGNhbGxpbmcKCSAgICAgKiBzYW1wbGUuCgkgICAgICovCgkgICAgU2FtcGxlci5wcm90b3R5cGUubW9uaXRvciA9IGZ1bmN0aW9uIChwYXJhbXNfdG9fbW9uaXRvcikgewoJICAgICAgdGhpcy5tb25pdG9yZWRfcGFyYW1zID0gcGFyYW1zX3RvX21vbml0b3I7CgkgICAgfTsKCgkgICAgLyoqCgkgICAgICogU2V0cyB0aGUgdGhpbm5pbmcuIEZvciBleGFtcGxlIHRoaW4gPT0gMTAgbWVhbnMgdGhhdCBldmVyeSAxMHRoIHBvc3RlcmlvcgoJICAgICAqIGRyYXcgd2lsbCBiZSBrZXB0LgoJICAgICAqLwoJICAgIFNhbXBsZXIucHJvdG90eXBlLnRoaW4gPSBmdW5jdGlvbiAodGhpbm5pbmdfaW50ZXJ2YWwpIHsKCSAgICAgIHRoaXMudGhpbm5pbmdfaW50ZXJ2YWwgPSB0aGlubmluZ19pbnRlcnZhbDsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBTZXRzIGFkYXB0YXRpb24gb24sIGlmIGFwcGxpY2FibGUsIGluIGFsbCBzdGVwcGVycy4KCSAgICAgKi8KCSAgICBTYW1wbGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgIHRoaXMuc3RlcHBlcnNbaV0uc3RhcnRfYWRhcHRhdGlvbigpOwoJICAgICAgfQoJICAgIH07CgoJICAgIC8qKgoJICAgICogU2V0cyBhZGFwdGF0aW9uIG9mZiwgaWYgYXBwbGljYWJsZSwgaW4gYWxsIHN0ZXBwZXJzLgoJICAgICovCgkgICAgU2FtcGxlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgIHRoaXMuc3RlcHBlcnNbaV0uc3RvcF9hZGFwdGF0aW9uKCk7CgkgICAgICB9CgkgICAgfTsKCgkgICAgLyoqCgkgICAgKiBAY2xhc3MKCSAgICAqIEBpbXBsZW1lbnRzIHtTYW1wbGVyfQoJICAgICogVGhpcyBzYW1wbGVyIHVzZXMgdGhlIEFtd2dTdGVwcGVyIGFzIHRoZSBzdGVwcGVyIGZ1bmN0aW9uIHdoaWNoIGltcGxlbWVudHMgdGhlIAoJICAgICogQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluICJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DIgoJICAgICogYnkgUm9iZXJ0cyBhbmQgUm9zZW50aGFsICgyMDA4KS4gQW4gYWRpdGlvbiBpcyB0aGF0IGl0IGhhbmRsZXMgaW50IHBhcmFtZXRlcnMKCSAgICAqIGJ5IG1ha2luZyBkaXNjcmV0ZSBOb3JtYWwgcHJvcG9zYWxzIGFuZCBiaW5hcnkgcGFyYW1ldGVycyBieSB0YWtpbmcgb24gYSBuZXcgCgkgICAgKiB2YWx1ZSBwcm9wb3J0aW9uYWwgdG8gdGhlIHBvc3RlcmlvciBvZiB0aGUgdHdvIHBvc3NpYmxlIHN0YXRlcyBvZiB0aGUKCSAgICAqIHBhcmFtZXRlci4gVGhpcyBzYW1wbGVyIGNhbiBiZSBlZmZpY2llbnQgd2hlbiB0aGUgbnVtYmVyIG9mIHBhcmFtZXRlcnMKCSAgICAqIGFyZSBub3QgdG9vIGhpZ2ggYW5kIHRoZSBjb3JyZWxhdGlvbnMgYmV0d2VlbiBwYXJhbWV0ZXJzIGFyZSBsb3cuCgkgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBvbmUgb3IgbW9yZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMKCSAgICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy4KCSAgICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiAKCSAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci4KCSAgICAqLwoJICAgIHZhciBBbXdnU2FtcGxlciA9IGZ1bmN0aW9uIChwYXJhbXMsIGxvZ19wb3N0LCBkYXRhLCBvcHRpb25zKSB7CgkgICAgICBTYW1wbGVyLmNhbGwodGhpcywgcGFyYW1zLCBsb2dfcG9zdCwgZGF0YSwgb3B0aW9ucyk7CgkgICAgfTsKCSAgICBBbXdnU2FtcGxlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNhbXBsZXIucHJvdG90eXBlKTsKCSAgICBBbXdnU2FtcGxlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBbXdnU2FtcGxlcjsKCSAgICBBbXdnU2FtcGxlci5wcm90b3R5cGUuY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHsKCSAgICAgIHJldHVybiBbbmV3IEFtd2dTdGVwcGVyKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKV07CgkgICAgfTsKCgkgICAgLy8gUmV0dXJuaW5nIHRoZSBmdW5jdGlvbnMgdGhhdCBzaG91bGQgYmUgcHVibGljbHkgZXhwb3NlZCBieSB0aGlzIG1vZHVsZQoJICAgIHJldHVybiB7CgkgICAgICBydW5pZjogcnVuaWYsCgkgICAgICBydW5pZl9kaXNjcmV0ZTogcnVuaWZfZGlzY3JldGUsCgkgICAgICBybm9ybTogcm5vcm0sCgkgICAgICBwYXJhbV9pbml0X2ZpeGVkOiBwYXJhbV9pbml0X2ZpeGVkLAoJICAgICAgY29tcGxldGVfcGFyYW1zOiBjb21wbGV0ZV9wYXJhbXMsCgkgICAgICBSZWFsTWV0cm9wb2xpc1N0ZXBwZXI6IFJlYWxNZXRyb3BvbGlzU3RlcHBlciwKCSAgICAgIEludE1ldHJvcG9saXNTdGVwcGVyOiBJbnRNZXRyb3BvbGlzU3RlcHBlciwKCSAgICAgIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOiBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciwKCSAgICAgIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI6IE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIsCgkgICAgICBCaW5hcnlTdGVwcGVyOiBCaW5hcnlTdGVwcGVyLAoJICAgICAgQmluYXJ5Q29tcG9uZW50U3RlcHBlcjogQmluYXJ5Q29tcG9uZW50U3RlcHBlciwKCSAgICAgIEFtd2dTdGVwcGVyOiBBbXdnU3RlcHBlciwKCSAgICAgIEFtd2dTYW1wbGVyOiBBbXdnU2FtcGxlcgoJICAgIH07CgkgIH0pOwoJfSkobWNtYyk7CgoJZnVuY3Rpb24gYXNjZW5kaW5nKGEsIGIpIHsKCSAgcmV0dXJuIGEgPT0gbnVsbCB8fCBiID09IG51bGwgPyBOYU4gOiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogYSA+PSBiID8gMCA6IE5hTjsKCX0KCglmdW5jdGlvbiogbnVtYmVycyh2YWx1ZXMsIHZhbHVlb2YpIHsKCSAgaWYgKHZhbHVlb2YgPT09IHVuZGVmaW5lZCkgewoJICAgIGZvciAobGV0IHZhbHVlIG9mIHZhbHVlcykgewoJICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgKHZhbHVlID0gK3ZhbHVlKSA+PSB2YWx1ZSkgewoJICAgICAgICB5aWVsZCB2YWx1ZTsKCSAgICAgIH0KCSAgICB9CgkgIH0gZWxzZSB7CgkgICAgbGV0IGluZGV4ID0gLTE7CgkgICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7CgkgICAgICBpZiAoKHZhbHVlID0gdmFsdWVvZih2YWx1ZSwgKytpbmRleCwgdmFsdWVzKSkgIT0gbnVsbCAmJiAodmFsdWUgPSArdmFsdWUpID49IHZhbHVlKSB7CgkgICAgICAgIHlpZWxkIHZhbHVlOwoJICAgICAgfQoJICAgIH0KCSAgfQoJfQoKCWZ1bmN0aW9uIGNvbXBhcmVEZWZpbmVkKGNvbXBhcmUgPSBhc2NlbmRpbmcpIHsKCSAgaWYgKGNvbXBhcmUgPT09IGFzY2VuZGluZykgcmV0dXJuIGFzY2VuZGluZ0RlZmluZWQ7CgkgIGlmICh0eXBlb2YgY29tcGFyZSAhPT0gImZ1bmN0aW9uIikgdGhyb3cgbmV3IFR5cGVFcnJvcigiY29tcGFyZSBpcyBub3QgYSBmdW5jdGlvbiIpOwoJICByZXR1cm4gKGEsIGIpID0+IHsKCSAgICBjb25zdCB4ID0gY29tcGFyZShhLCBiKTsKCSAgICBpZiAoeCB8fCB4ID09PSAwKSByZXR1cm4geDsKCSAgICByZXR1cm4gKGNvbXBhcmUoYiwgYikgPT09IDApIC0gKGNvbXBhcmUoYSwgYSkgPT09IDApOwoJICB9OwoJfQoJZnVuY3Rpb24gYXNjZW5kaW5nRGVmaW5lZChhLCBiKSB7CgkgIHJldHVybiAoYSA9PSBudWxsIHx8ICEoYSA+PSBhKSkgLSAoYiA9PSBudWxsIHx8ICEoYiA+PSBiKSkgfHwgKGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiAwKTsKCX0KCglmdW5jdGlvbiBtYXgodmFsdWVzLCB2YWx1ZW9mKSB7CgkgIGxldCBtYXg7CgkgIGlmICh2YWx1ZW9mID09PSB1bmRlZmluZWQpIHsKCSAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykgewoJICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgKG1heCA8IHZhbHVlIHx8IG1heCA9PT0gdW5kZWZpbmVkICYmIHZhbHVlID49IHZhbHVlKSkgewoJICAgICAgICBtYXggPSB2YWx1ZTsKCSAgICAgIH0KCSAgICB9CgkgIH0gZWxzZSB7CgkgICAgbGV0IGluZGV4ID0gLTE7CgkgICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7CgkgICAgICBpZiAoKHZhbHVlID0gdmFsdWVvZih2YWx1ZSwgKytpbmRleCwgdmFsdWVzKSkgIT0gbnVsbCAmJiAobWF4IDwgdmFsdWUgfHwgbWF4ID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSB7CgkgICAgICAgIG1heCA9IHZhbHVlOwoJICAgICAgfQoJICAgIH0KCSAgfQoJICByZXR1cm4gbWF4OwoJfQoKCWZ1bmN0aW9uIG1pbih2YWx1ZXMsIHZhbHVlb2YpIHsKCSAgbGV0IG1pbjsKCSAgaWYgKHZhbHVlb2YgPT09IHVuZGVmaW5lZCkgewoJICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7CgkgICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiAobWluID4gdmFsdWUgfHwgbWluID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSB7CgkgICAgICAgIG1pbiA9IHZhbHVlOwoJICAgICAgfQoJICAgIH0KCSAgfSBlbHNlIHsKCSAgICBsZXQgaW5kZXggPSAtMTsKCSAgICBmb3IgKGxldCB2YWx1ZSBvZiB2YWx1ZXMpIHsKCSAgICAgIGlmICgodmFsdWUgPSB2YWx1ZW9mKHZhbHVlLCArK2luZGV4LCB2YWx1ZXMpKSAhPSBudWxsICYmIChtaW4gPiB2YWx1ZSB8fCBtaW4gPT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA+PSB2YWx1ZSkpIHsKCSAgICAgICAgbWluID0gdmFsdWU7CgkgICAgICB9CgkgICAgfQoJICB9CgkgIHJldHVybiBtaW47Cgl9CgoJLy8gQmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL21vdXJuZXIvcXVpY2tzZWxlY3QKCS8vIElTQyBsaWNlbnNlLCBDb3B5cmlnaHQgMjAxOCBWbGFkaW1pciBBZ2Fmb25raW4uCglmdW5jdGlvbiBxdWlja3NlbGVjdChhcnJheSwgaywgbGVmdCA9IDAsIHJpZ2h0ID0gYXJyYXkubGVuZ3RoIC0gMSwgY29tcGFyZSkgewoJICBjb21wYXJlID0gY29tcGFyZSA9PT0gdW5kZWZpbmVkID8gYXNjZW5kaW5nRGVmaW5lZCA6IGNvbXBhcmVEZWZpbmVkKGNvbXBhcmUpOwoJICB3aGlsZSAocmlnaHQgPiBsZWZ0KSB7CgkgICAgaWYgKHJpZ2h0IC0gbGVmdCA+IDYwMCkgewoJICAgICAgY29uc3QgbiA9IHJpZ2h0IC0gbGVmdCArIDE7CgkgICAgICBjb25zdCBtID0gayAtIGxlZnQgKyAxOwoJICAgICAgY29uc3QgeiA9IE1hdGgubG9nKG4pOwoJICAgICAgY29uc3QgcyA9IDAuNSAqIE1hdGguZXhwKDIgKiB6IC8gMyk7CgkgICAgICBjb25zdCBzZCA9IDAuNSAqIE1hdGguc3FydCh6ICogcyAqIChuIC0gcykgLyBuKSAqIChtIC0gbiAvIDIgPCAwID8gLTEgOiAxKTsKCSAgICAgIGNvbnN0IG5ld0xlZnQgPSBNYXRoLm1heChsZWZ0LCBNYXRoLmZsb29yKGsgLSBtICogcyAvIG4gKyBzZCkpOwoJICAgICAgY29uc3QgbmV3UmlnaHQgPSBNYXRoLm1pbihyaWdodCwgTWF0aC5mbG9vcihrICsgKG4gLSBtKSAqIHMgLyBuICsgc2QpKTsKCSAgICAgIHF1aWNrc2VsZWN0KGFycmF5LCBrLCBuZXdMZWZ0LCBuZXdSaWdodCwgY29tcGFyZSk7CgkgICAgfQoJICAgIGNvbnN0IHQgPSBhcnJheVtrXTsKCSAgICBsZXQgaSA9IGxlZnQ7CgkgICAgbGV0IGogPSByaWdodDsKCSAgICBzd2FwKGFycmF5LCBsZWZ0LCBrKTsKCSAgICBpZiAoY29tcGFyZShhcnJheVtyaWdodF0sIHQpID4gMCkgc3dhcChhcnJheSwgbGVmdCwgcmlnaHQpOwoJICAgIHdoaWxlIChpIDwgaikgewoJICAgICAgc3dhcChhcnJheSwgaSwgaiksICsraSwgLS1qOwoJICAgICAgd2hpbGUgKGNvbXBhcmUoYXJyYXlbaV0sIHQpIDwgMCkgKytpOwoJICAgICAgd2hpbGUgKGNvbXBhcmUoYXJyYXlbal0sIHQpID4gMCkgLS1qOwoJICAgIH0KCSAgICBpZiAoY29tcGFyZShhcnJheVtsZWZ0XSwgdCkgPT09IDApIHN3YXAoYXJyYXksIGxlZnQsIGopO2Vsc2UgKytqLCBzd2FwKGFycmF5LCBqLCByaWdodCk7CgkgICAgaWYgKGogPD0gaykgbGVmdCA9IGogKyAxOwoJICAgIGlmIChrIDw9IGopIHJpZ2h0ID0gaiAtIDE7CgkgIH0KCSAgcmV0dXJuIGFycmF5OwoJfQoJZnVuY3Rpb24gc3dhcChhcnJheSwgaSwgaikgewoJICBjb25zdCB0ID0gYXJyYXlbaV07CgkgIGFycmF5W2ldID0gYXJyYXlbal07CgkgIGFycmF5W2pdID0gdDsKCX0KCglmdW5jdGlvbiBxdWFudGlsZSh2YWx1ZXMsIHAsIHZhbHVlb2YpIHsKCSAgdmFsdWVzID0gRmxvYXQ2NEFycmF5LmZyb20obnVtYmVycyh2YWx1ZXMsIHZhbHVlb2YpKTsKCSAgaWYgKCEobiA9IHZhbHVlcy5sZW5ndGgpKSByZXR1cm47CgkgIGlmICgocCA9ICtwKSA8PSAwIHx8IG4gPCAyKSByZXR1cm4gbWluKHZhbHVlcyk7CgkgIGlmIChwID49IDEpIHJldHVybiBtYXgodmFsdWVzKTsKCSAgdmFyIG4sCgkgICAgaSA9IChuIC0gMSkgKiBwLAoJICAgIGkwID0gTWF0aC5mbG9vcihpKSwKCSAgICB2YWx1ZTAgPSBtYXgocXVpY2tzZWxlY3QodmFsdWVzLCBpMCkuc3ViYXJyYXkoMCwgaTAgKyAxKSksCgkgICAgdmFsdWUxID0gbWluKHZhbHVlcy5zdWJhcnJheShpMCArIDEpKTsKCSAgcmV0dXJuIHZhbHVlMCArICh2YWx1ZTEgLSB2YWx1ZTApICogKGkgLSBpMCk7Cgl9CgoJZnVuY3Rpb24gbWVkaWFuKHZhbHVlcywgdmFsdWVvZikgewoJICByZXR1cm4gcXVhbnRpbGUodmFsdWVzLCAwLjUsIHZhbHVlb2YpOwoJfQoKCWZ1bmN0aW9uIFRyYW5zZm9ybShrLCB4LCB5KSB7CgkgIHRoaXMuayA9IGs7CgkgIHRoaXMueCA9IHg7CgkgIHRoaXMueSA9IHk7Cgl9CglUcmFuc2Zvcm0ucHJvdG90eXBlID0gewoJICBjb25zdHJ1Y3RvcjogVHJhbnNmb3JtLAoJICBzY2FsZTogZnVuY3Rpb24gKGspIHsKCSAgICByZXR1cm4gayA9PT0gMSA/IHRoaXMgOiBuZXcgVHJhbnNmb3JtKHRoaXMuayAqIGssIHRoaXMueCwgdGhpcy55KTsKCSAgfSwKCSAgdHJhbnNsYXRlOiBmdW5jdGlvbiAoeCwgeSkgewoJICAgIHJldHVybiB4ID09PSAwICYgeSA9PT0gMCA/IHRoaXMgOiBuZXcgVHJhbnNmb3JtKHRoaXMuaywgdGhpcy54ICsgdGhpcy5rICogeCwgdGhpcy55ICsgdGhpcy5rICogeSk7CgkgIH0sCgkgIGFwcGx5OiBmdW5jdGlvbiAocG9pbnQpIHsKCSAgICByZXR1cm4gW3BvaW50WzBdICogdGhpcy5rICsgdGhpcy54LCBwb2ludFsxXSAqIHRoaXMuayArIHRoaXMueV07CgkgIH0sCgkgIGFwcGx5WDogZnVuY3Rpb24gKHgpIHsKCSAgICByZXR1cm4geCAqIHRoaXMuayArIHRoaXMueDsKCSAgfSwKCSAgYXBwbHlZOiBmdW5jdGlvbiAoeSkgewoJICAgIHJldHVybiB5ICogdGhpcy5rICsgdGhpcy55OwoJICB9LAoJICBpbnZlcnQ6IGZ1bmN0aW9uIChsb2NhdGlvbikgewoJICAgIHJldHVybiBbKGxvY2F0aW9uWzBdIC0gdGhpcy54KSAvIHRoaXMuaywgKGxvY2F0aW9uWzFdIC0gdGhpcy55KSAvIHRoaXMua107CgkgIH0sCgkgIGludmVydFg6IGZ1bmN0aW9uICh4KSB7CgkgICAgcmV0dXJuICh4IC0gdGhpcy54KSAvIHRoaXMuazsKCSAgfSwKCSAgaW52ZXJ0WTogZnVuY3Rpb24gKHkpIHsKCSAgICByZXR1cm4gKHkgLSB0aGlzLnkpIC8gdGhpcy5rOwoJICB9LAoJICByZXNjYWxlWDogZnVuY3Rpb24gKHgpIHsKCSAgICByZXR1cm4geC5jb3B5KCkuZG9tYWluKHgucmFuZ2UoKS5tYXAodGhpcy5pbnZlcnRYLCB0aGlzKS5tYXAoeC5pbnZlcnQsIHgpKTsKCSAgfSwKCSAgcmVzY2FsZVk6IGZ1bmN0aW9uICh5KSB7CgkgICAgcmV0dXJuIHkuY29weSgpLmRvbWFpbih5LnJhbmdlKCkubWFwKHRoaXMuaW52ZXJ0WSwgdGhpcykubWFwKHkuaW52ZXJ0LCB5KSk7CgkgIH0sCgkgIHRvU3RyaW5nOiBmdW5jdGlvbiAoKSB7CgkgICAgcmV0dXJuICJ0cmFuc2xhdGUoIiArIHRoaXMueCArICIsIiArIHRoaXMueSArICIpIHNjYWxlKCIgKyB0aGlzLmsgKyAiKSI7CgkgIH0KCX07CglUcmFuc2Zvcm0ucHJvdG90eXBlOwoKCS8qCgkgIENQVE1hdGggU3RhdGljIENsYXNzIC0gTm90IGludGVuZGVkIGZvciBpbnN0YW50aWF0aW9uIQoKCSAgVmFyaWFibGVzOgoJICAgIHggPSBvYmplY3RpdmUgdmFsdWUKCSAgICB2ID0gc3ViamVjdGl2ZSB2YWx1ZQoJICAgIHAgPSBvYmplY3RpdmUgcHJvYmFiaWxpdHkKCSAgICB3ID0gc3ViamVjdGl2ZSBwcm9iYWJpbGl0eS9kZWNpc2lvbiB3ZWlnaHQKCSAgICB1ID0gc3ViamVjdGl2ZSB1dGlsaXR5CgoJICAgIGEgPSBhbHBoYSAoY3VydmF0dXJlIGZvciB2YWx1ZSBmdW5jdGlvbikKCSAgICBsID0gbGFtYmRhIChsb3NzIGF2ZXJzaW9uIGZvciB2YWx1ZSBmdW5jdGlvbikKCSAgICBnID0gZ2FtbWEgKHNlbnNpdGl2aXR5IGZvciBkZWNpc2lvbiB3ZWlnaHRpbmcgZnVuY3Rpb24pCgoJICBFcXVhdGlvbnM6CgkgICAgdiA9IGlmICh4ID49IDApIHheYTsgaWYgKHggPCAwKSAtbCAqICgteCleYQoJICAgIGEgPSBpZiAoeCA+PSAwKSBsb2codikgLyBsb2coeCk7IGlmICh4IDwgMCkgKGxvZygtdikgLSBsb2cobCkpIC8gbG9nKC14KQoJICAgIGwgPSBpZiAoeCA+PSAwKSAxOyBpZiAoeCA8IDApIC12IC8gKC14KV5hCgoJICAgIHcgPSBwXmcgLyAocF5nICsgKDEgLSBwKV5nKV4oMSAvIGcpCgoJICAgIHUgPSBTdW1fbih2X24gKiB3X24pCgkqLwoJY2xhc3MgQ1BUTWF0aCB7CgkgIHN0YXRpYyB4YWwydih4LCBhLCBsKSB7CgkgICAgaWYgKHggPj0gMCkgewoJICAgICAgcmV0dXJuIHggKiogYTsKCSAgICB9CgkgICAgLy8gZWxzZSAoeCA8IDApCgkgICAgcmV0dXJuIC1sICogKC14KSAqKiBhOwoJICB9CgkgIHN0YXRpYyB4bHYyYSh4LCBsLCB2KSB7CgkgICAgaWYgKHggPj0gMCkgewoJICAgICAgcmV0dXJuIE1hdGgubG9nKHYpIC8gTWF0aC5sb2coeCk7CgkgICAgfQoJICAgIC8vIGVsc2UgKHggPCAwKQoJICAgIHJldHVybiAoTWF0aC5sb2coLXYpIC0gTWF0aC5sb2cobCkpIC8gTWF0aC5sb2coLXgpOwoJICB9CgkgIHN0YXRpYyB4YXYybCh4LCBhLCB2KSB7CgkgICAgaWYgKHggPj0gMCkgewoJICAgICAgcmV0dXJuIE5hTjsKCSAgICB9CgkgICAgLy8gZWxzZSAoeCA8IDApCgkgICAgcmV0dXJuIC12IC8gKC14KSAqKiBhOwoJICB9CgkgIHN0YXRpYyBwZzJ3KHAsIGcpIHsKCSAgICByZXR1cm4gcCAqKiBnIC8gKHAgKiogZyArICgxIC0gcCkgKiogZykgKiogKDEgLyBnKTsKCSAgfQoJICBzdGF0aWMgdncydSh2LCB3KSB7CgkgICAgLy8gTnVtYmVycwoJICAgIGlmICh0eXBlb2YgdiA9PT0gJ251bWJlcicgJiYgdHlwZW9mIHcgPT09ICdudW1iZXInKSB7CgkgICAgICByZXR1cm4gdiAqIHc7CgkgICAgfQoJICAgIC8vIEFycmF5cwoJICAgIGlmICh2IGluc3RhbmNlb2YgQXJyYXkgJiYgdyBpbnN0YW5jZW9mIEFycmF5ICYmIHYubGVuZ3RoID4gMCAmJiB2Lmxlbmd0aCA9PT0gdy5sZW5ndGgpIHsKCSAgICAgIGxldCB1ID0gMDsKCSAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdi5sZW5ndGg7IG4gKz0gMSkgewoJICAgICAgICB1ICs9IHZbbl0gKiB3W25dOwoJICAgICAgfQoJICAgICAgcmV0dXJuIHU7CgkgICAgfQoJICAgIC8vIE90aGVyd2lzZQoJICAgIHJldHVybiBOYU47CgkgIH0KCX0KCgkvLyBJbnRlcm5hbCBkZXBlbmRlbmNpZXMKCgkvKiBlc2xpbnQgbm8tcmVzdHJpY3RlZC1nbG9iYWxzOiBbIm9mZiIsICJzZWxmIl0gKi8KCXNlbGYub25tZXNzYWdlID0gZXZlbnQgPT4gewoJICBjb25zdCBwYXJhbXMgPSB7CgkgICAgYWxwaGE6IHsKCSAgICAgIHR5cGU6ICdyZWFsJywKCSAgICAgIGxvd2VyOiAwLAoJICAgICAgdXBwZXI6IDEKCSAgICB9LAoJICAgIGxhbWJkYTogewoJICAgICAgdHlwZTogJ3JlYWwnLAoJICAgICAgbG93ZXI6IDAsCgkgICAgICB1cHBlcjogMTAKCSAgICB9LAoJICAgIGdhbW1hOiB7CgkgICAgICB0eXBlOiAncmVhbCcsCgkgICAgICBsb3dlcjogMCwKCSAgICAgIHVwcGVyOiAxCgkgICAgfSwKCSAgICBsdWNlOiB7CgkgICAgICB0eXBlOiAncmVhbCcsCgkgICAgICBsb3dlcjogMCwKCSAgICAgIHVwcGVyOiAxMDAKCSAgICB9CgkgIH07CgkgIGNvbnN0IGxvZ1Bvc3QgPSAoc3RhdGUsIGRhdGEpID0+IHsKCSAgICBsZXQgbHAgPSAwOwoKCSAgICAvLyBQcmlvcnMKCSAgICBjb25zdCBhbHBoYU1lYW4gPSAwLjU7CgkgICAgY29uc3QgYWxwaGFTYW1wbGVTaXplID0gMi41OwoJICAgIGxwICs9IGRpc3RyaWJ1dGlvbnNFeHBvcnRzLmJldGEoc3RhdGUuYWxwaGEsIGFscGhhTWVhbiAqIGFscGhhU2FtcGxlU2l6ZSwgKDEgLSBhbHBoYU1lYW4pICogYWxwaGFTYW1wbGVTaXplKTsKCSAgICAvLyBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMudW5pZihzdGF0ZS5hbHBoYSwgMCwgMSk7CgoJICAgIGNvbnN0IGxhbWJkYU1lYW4gPSAyOwoJICAgIGNvbnN0IGxhbWJkYVNoYXBlID0gMzsKCSAgICBscCArPSBkaXN0cmlidXRpb25zRXhwb3J0cy5nYW1tYShzdGF0ZS5sYW1iZGEsIGxhbWJkYVNoYXBlLCBsYW1iZGFTaGFwZSAvIGxhbWJkYU1lYW4pOwoJICAgIC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmxhbWJkYSwgMCwgMTApOwoKCSAgICBjb25zdCBnYW1tYU1lYW4gPSAwLjU7CgkgICAgY29uc3QgZ2FtbWFTYW1wbGVTaXplID0gMi41OwoJICAgIGxwICs9IGRpc3RyaWJ1dGlvbnNFeHBvcnRzLmJldGEoc3RhdGUuZ2FtbWEsIGdhbW1hTWVhbiAqIGdhbW1hU2FtcGxlU2l6ZSwgKDEgLSBnYW1tYU1lYW4pICogZ2FtbWFTYW1wbGVTaXplKTsKCSAgICAvLyBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMudW5pZihzdGF0ZS5nYW1tYSwgMCwgMSk7CgoJICAgIGNvbnN0IGx1Y2VNZWFuID0gMjsKCSAgICBjb25zdCBsdWNlU2hhcGUgPSAzOwoJICAgIGxwICs9IGRpc3RyaWJ1dGlvbnNFeHBvcnRzLmdhbW1hKHN0YXRlLmx1Y2UsIGx1Y2VTaGFwZSwgbHVjZVNoYXBlIC8gbHVjZU1lYW4pOwoJICAgIC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmx1Y2UsIDAsIDEwMCk7CgoJICAgIC8vIExpa2VsaWhvb2QKCSAgICBkYXRhLmZvckVhY2goY2hvaWNlID0+IHsKCSAgICAgIC8vIFZhbHVlcwoJICAgICAgY29uc3QgdmwgPSBDUFRNYXRoLnhhbDJ2KGNob2ljZS54bCwgc3RhdGUuYWxwaGEsIHN0YXRlLmxhbWJkYSk7CgkgICAgICBjb25zdCB2dyA9IENQVE1hdGgueGFsMnYoY2hvaWNlLnh3LCBzdGF0ZS5hbHBoYSwgc3RhdGUubGFtYmRhKTsKCSAgICAgIGNvbnN0IHZzID0gQ1BUTWF0aC54YWwydihjaG9pY2UueHMsIHN0YXRlLmFscGhhLCBzdGF0ZS5sYW1iZGEpOwoKCSAgICAgIC8vIFByb2JhYmlsaXRpZXMKCSAgICAgIGNvbnN0IHd3ID0gQ1BUTWF0aC5wZzJ3KGNob2ljZS5wdywgc3RhdGUuZ2FtbWEpOwoJICAgICAgY29uc3Qgd2wgPSAxIC0gd3c7CgoJICAgICAgLy8gVXRpbGl0aWVzCgkgICAgICBjb25zdCB1ZyA9IHdsICogdmwgKyB3dyAqIHZ3OwoJICAgICAgY29uc3QgdXMgPSB2czsKCgkgICAgICAvLyBDaG9pY2Ugb2YgZ2FtYmxlIG9yIHN1cmUgaXMgc2FtcGxlZCBmcm9tIGEgQmVybm91bGxpIGRpc3RyaWJ1dGlvbgoJICAgICAgLy8gTHVjZSBjaG9pY2UgcnVsZSBpcyB1c2VkIHRvIGNvbXB1dGUgcHJvYmFiaWxpdHkgb2YgZ2FtYmxpbmchICgwID0gc3VyZSwgMSA9IGdhbWJsZSkKCSAgICAgIGNvbnN0IGJpbnZhbCA9IDEgLyAoMSArIE1hdGguZXhwKHN0YXRlLmx1Y2UgKiAodXMgLSB1ZykpKTsKCgkgICAgICAvLyBBY3R1YWwgcmVzcG9uc2UKCSAgICAgIGNvbnN0IHJlc3BvbnNlID0gY2hvaWNlLnJlc3BvbnNlID09PSAnc3VyZScgPyAwIDogMTsKCSAgICAgIGxwICs9IGRpc3RyaWJ1dGlvbnNFeHBvcnRzLmJlcm4ocmVzcG9uc2UsIGJpbnZhbCk7CgkgICAgfSk7CgkgICAgcmV0dXJuIGxwOwoJICB9OwoKCSAgLy8gSW5pdGlhbGl6aW5nIHRoZSBzYW1wbGVyCgkgIGNvbnN0IHNhbXBsZXIgPSBuZXcgbWNtY0V4cG9ydHMuQW13Z1NhbXBsZXIocGFyYW1zLCBsb2dQb3N0LCBldmVudC5kYXRhKTsKCSAgLy8gQnVybmluZyBzb21lIHNhbXBsZXMgdG8gdGhlIE1DTUMgZ29kcyBhbmQgc2FtcGxpbmcgNTAwMCBkcmF3cwoJICBzYW1wbGVyLmJ1cm4oMTAwMCk7CgkgIGNvbnN0IHNhbXBsZXMgPSBzYW1wbGVyLnNhbXBsZSg1MDAwKTsKCgkgIC8vIEV4dHJhY3Qgc3VtbWFyeSBzdGF0cwoJICBjb25zdCByZXN1bHRzID0gewoJICAgIGFscGhhOiBtZWRpYW4oc2FtcGxlcy5hbHBoYSksCgkgICAgbGFtYmRhOiBtZWRpYW4oc2FtcGxlcy5sYW1iZGEpLAoJICAgIGdhbW1hOiBtZWRpYW4oc2FtcGxlcy5nYW1tYSksCgkgICAgbHVjZTogbWVkaWFuKHNhbXBsZXMubHVjZSkKCSAgfTsKCSAgc2VsZi5wb3N0TWVzc2FnZSh7CgkgICAgcmVzdWx0czogcmVzdWx0cywKCSAgICBzYW1wbGVzOiBzYW1wbGVzCgkgIH0pOwoJfTsKCn0pKCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWNwdC1maXQtd29ya2VyLmpzLm1hcAoK","data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3B0LWZpdC13b3JrZXIuanMiLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9iYXllcy5qcy9kaXN0cmlidXRpb25zLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2JheWVzLmpzL21jbWMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL2FzY2VuZGluZy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvbnVtYmVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9zb3J0LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9tYXguanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL21pbi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvcXVpY2tzZWxlY3QuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL3F1YW50aWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9tZWRpYW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtem9vbS9zcmMvdHJhbnNmb3JtLmpzIiwiLi4vLi4vbGlicmFyaWVzL3Byb3NwZWN0YWJsZS1tYXRoL3NyYy9jcHQtbWF0aC5qcyIsIi4uLy4uL2xpYnJhcmllcy9wcm9zcGVjdGFibGUtbWF0aC9zcmMvaW5kZXguanMiLCIuLi8uLi9saWJyYXJpZXMvcHJvc3BlY3RhYmxlLWVsZW1lbnRzL3NyYy9jb21wb25lbnRzL2NwdC1maXQtd29ya2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5cbi8vIEEgbnVtYmVyIG9mIGxvZyBwcm9iYWJpbGl0eSBkZW5zaXR5IGZ1bmN0aW9ucyAoUERGKS4gTmFtaW5nIGFuZCBwYXJhbWV0ZXJpemF0aW9uXG4vLyBzaG91bGQgbWF0Y2ggUidzLCBleGNlcHQgZm9yIHRoYXQgYWxsIGZ1bmN0aW9ucyByZXNpZGUgaW4gYW4gbGQgb2JqZWN0IChcbi8vIGFzIGluIFwibG9nIGRlbnNpdHlcIiksIHNvIHRvIGdldCBhIG5vcm1hbCBsb2cgZGVuc2l0eSB5b3Ugd291bGQgd3JpdGVcbi8vIGxkLm5vcm0oLi4uKS5cbi8vIE1vc3Qgb2YgdGhlIGNvZGUgYmVsb3cgaXMgZGlyZWN0bHkgdGFrZW4gZnJvbSB0aGUgZ3JlYXQgSnN0YXQgcHJvamVjdFxuLy8gKGh0dHBzOi8vZ2l0aHViLmNvbS9qc3RhdC8pIHdoaWNoIGluY2x1ZGVzIFBERiBmb3IgbWFueSBjb21tb24gcHJvYmFiaWxpdHlcbi8vIGRpc3RyaWJ1dGlvbnMuIFdoYXQgSSBoYXZlIGRvbmUgaXMgb25seSB0byBjb252ZXJ0IHRoZXNlIHRvIGxvZyBQREZzLlxuXG4vKlxuT3JpZ2luYWwgd29yayBDb3B5cmlnaHQgKGMpIDIwMTMgalN0YXRcbk1vZGlmaWVkIHdvcmsgQ29weXJpZ2h0IChjKSAyMDE1IFJhc211cyBCw6XDpXRoIFxuXG5QZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG5vZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG5pbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG50byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG5jb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbmZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cblRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG5hbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG5GSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbkFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbkxJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG5PVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG5USEUgU09GVFdBUkUuXG5cbiovXG5cblxuLy8gVGhpcyBib2lsZXIgcGxhdGUgY29kZSBoZXJlIGlzIHRha2VuIGZyb206XG4vLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3RlbXBsYXRlcy9yZXR1cm5FeHBvcnRzLmpzXG4vLyBJdCBzaG91bGQgbWFrZSBzaHVyZSB0aGF0IG1vZHVsZSBjYW4gYmUgaW1wb3J0ZWQgYm90aCBpbiB0aGUgYnJvd3Nlcixcbi8vIE5vZGUsIGFuZCBieSB1c2luZyB0aGUgQXN5bmNocm9ub3VzIE1vZHVsZSBEZWZpbml0aW9uIHN0YW5kYXJkLlxuLy8gSWYgdGhpcyBtb2R1bGUgaXMgbG9hZGVkIGluIHRoZSBicm93c2VyIGl0IHdpbGwgY3JlYXRlZCB0aGUgZ2xvYmFsXG4vLyBvYmplY3QgbGQgLlxuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG4gICAgICAgIGRlZmluZShbXSwgZmFjdG9yeSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgICAvLyBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLCBidXRcbiAgICAgICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXG4gICAgICAgIC8vIGxpa2UgTm9kZS5cbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdylcbiAgICAgICAgcm9vdC5sZCA9IGZhY3RvcnkoKTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbigpIHtcbiAgLy8gT2JqZWN0IHRvIGhvbGQgdGhlIGZ1bmN0aW9ucyB0byBiZSBleHBvcnRlZC5cbiAgdmFyIGxkICA9IHt9O1xuICBcbiAgLy8vLy8vLy8vLyBIZWxwZXIgZnVuY3Rpb25zIC8vLy8vLy8vLy9cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgXG4gIHZhciBsZ2FtbWEgPSBmdW5jdGlvbih4KSB7XG4gICAgdmFyIGogPSAwO1xuICAgIHZhciBjb2YgPSBbXG4gICAgICA3Ni4xODAwOTE3Mjk0NzE0NiwgLTg2LjUwNTMyMDMyOTQxNjc3LCAyNC4wMTQwOTgyNDA4MzA5MSxcbiAgICAgIC0xLjIzMTczOTU3MjQ1MDE1NSwgMC4xMjA4NjUwOTczODY2MTc5ZS0yLCAtMC41Mzk1MjM5Mzg0OTUzZS01XG4gICAgXTtcbiAgICB2YXIgc2VyID0gMS4wMDAwMDAwMDAxOTAwMTU7XG4gICAgdmFyIHh4LCB5LCB0bXA7XG4gICAgdG1wID0gKHkgPSB4eCA9IHgpICsgNS41O1xuICAgIHRtcCAtPSAoeHggKyAwLjUpICogbG9nKHRtcCk7XG4gICAgZm9yICg7IGogPCA2OyBqKyspXG4gICAgICBzZXIgKz0gY29mW2pdIC8gKyt5O1xuICAgIHJldHVybiBsb2coMi41MDY2MjgyNzQ2MzEwMDA1ICogc2VyIC8geHgpIC0gdG1wO1xuICB9O1xuICBsZC5sZ2FtbWEgPSBsZ2FtbWE7XG4gIFxuICB2YXIgbGZhY3RvcmlhbCA9IGZ1bmN0aW9uKG4pIHtcbiAgICByZXR1cm4gbiA8IDAgPyBOYU4gOiBsZ2FtbWEobiArIDEpO1xuICB9O1xuICBsZC5sZmFjdG9yaWFsID0gbGZhY3RvcmlhbDtcbiAgXG4gIHZhciBsY2hvb3NlID0gZnVuY3Rpb24obiwgayl7XG4gICAgcmV0dXJuIGxmYWN0b3JpYWwobikgLSBsZmFjdG9yaWFsKGspIC0gbGZhY3RvcmlhbChuIC0gayk7XG4gIH07XG4gIGxkLmxjaG9vc2UgPSBsY2hvb3NlO1xuICBcbiAgdmFyIGxiZXRhID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBsZ2FtbWEoYSkgKyBsZ2FtbWEoYikgLSBsZ2FtbWEoYSArIGIpO1xuICB9O1xuICBsZC5sYmV0YSA9IGxiZXRhO1xuICBcbiAgdmFyIGxvZyAgPSBNYXRoLmxvZztcbiAgdmFyIGV4cCAgPSBNYXRoLmV4cDtcbiAgdmFyIGFicyAgPSBNYXRoLmFicztcbiAgdmFyIHBvdyAgPSBNYXRoLnBvdztcbiAgdmFyIHNxcnQgPSBNYXRoLnNxcnQ7XG4gIHZhciBwaSAgID0gTWF0aC5QSTtcbiAgXG4gIC8vLy8vLy8vLy8gQ29udGlub3VzIGRpc3RyaWJ1dGlvbnMgLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgXG4gIGxkLmJldGEgPSBmdW5jdGlvbih4LCBzaGFwZTEsIHNoYXBlMikge1xuICAgIGlmICh4ID4gMSB8fCB4IDwgMCkge1xuICAgICAgICByZXR1cm4gLUluZmluaXR5O1xuICAgIH1cbiAgICBpZihzaGFwZTEgPT09IDEgJiYgc2hhcGUyID09PSAxKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIChzaGFwZTEgLSAxKSAqIGxvZyh4KSArIChzaGFwZTIgLSAxKSAqIGxvZygxIC0geCkgLSBsYmV0YShzaGFwZTEsIHNoYXBlMik7ICBcbiAgICB9XG4gIH07XG4gIFxuICBsZC5jYXVjaHkgPSBmdW5jdGlvbih4LCBsb2NhdGlvbiwgc2NhbGUpIHtcbiAgICByZXR1cm4gbG9nKHNjYWxlKSAtIGxvZyhwb3coeCAtIGxvY2F0aW9uLCAyKSArIHBvdyhzY2FsZSwgMikpICAtIGxvZyhwaSk7XG4gIH07XG4gIFxuICBsZC5ub3JtID0gZnVuY3Rpb24oeCwgbWVhbiwgc2QpIHtcbiAgICAgIHJldHVybiAtMC41ICogbG9nKDIgKiBwaSkgLWxvZyhzZCkgLSBwb3coeCAtIG1lYW4sIDIpIC8gKDIgKiBzZCAqIHNkKTtcbiAgfTtcblxuICAvLyBBIGJpdmFyaWF0ZSBOb3JtYWwgZGlzdHJpYnV0aW9uIHBhcmFtZXRlcml6ZWQgYnkgYXJyYXlzIG9mIHR3byBtZWFucyBhbmQgU0RzLCBhbmQgXG4gIC8vIHRoZSBjb3JyZWxhdGlvbi5cbiAgbGQuYml2YXJub3JtID0gZnVuY3Rpb24oeCwgbWVhbiwgc2QsIGNvcnIpIHtcbiAgICB2YXIgeiA9IHBvdyh4WzBdIC0gbWVhblswXSwgMikgLyBwb3coc2RbMF0sIDIpICtcbiAgICAgICAgICAgIHBvdyh4WzFdIC0gbWVhblsxXSwgMikgLyBwb3coc2RbMV0sIDIpIC0gXG4gICAgICAgICAgICAoMiAqIGNvcnIgKiAoeFswXSAtIG1lYW5bMF0pICogKHhbMV0gLSBtZWFuWzFdKSkgLyAoc2RbMF0gKiBzZFsxXSk7XG4gICAgdmFyIG5vcm1hbGl6aW5nX2ZhY3RvciA9IC0oIGxvZygyKSArIGxvZyhwaSkgKyBsb2coc2RbMF0pICsgbG9nKHNkWzFdKSArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLjUgKiBsb2coMSAtIHBvdyhjb3JyLCAyKSkgKTsgXG4gICAgdmFyIGJpdmFyX2xvZ19kZW5zID0gbm9ybWFsaXppbmdfZmFjdG9yIC0geiAvICgyICogKDEgLSBwb3coY29yciwgMikgKSApOyBcbiAgICByZXR1cm4gYml2YXJfbG9nX2RlbnM7XG4gIH07XG4gIFxuXG4gIGxkLmxhcGxhY2UgPSBmdW5jdGlvbih4LCBsb2NhdGlvbiwgc2NhbGUpIHtcbiAgICByZXR1cm4gKC1hYnMoeCAtIGxvY2F0aW9uKS9zY2FsZSkgLSBsb2coMiAqIHNjYWxlKTtcbiAgfTtcbiAgXG4gIGxkLmRleHAgPSBsZC5sYXBsYWNlO1xuICBcbiAgbGQuZ2FtbWEgPSBmdW5jdGlvbih4LCBzaGFwZSwgcmF0ZSkge1xuICAgIHZhciBzY2FsZSA9IDEgLyByYXRlO1xuICAgIGlmICh4IDwgMCkge1xuICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICB9XG4gICAgaWYoKHggPT09IDAgJiYgc2hhcGUgPT09IDEpICkge1xuICAgICAgcmV0dXJuIC1sb2coc2NhbGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKHNoYXBlIC0gMSkgKiBsb2coeCkgLSB4IC8gc2NhbGUgLSBsZ2FtbWEoc2hhcGUpIC0gc2hhcGUgKiBsb2coc2NhbGUpO1xuICAgIH1cbiAgfTtcbiAgXG4gIGxkLmludmdhbW1hID0gZnVuY3Rpb24oeCwgc2hhcGUsIHNjYWxlKSB7XG4gICAgICBpZiAoeCA8PSAwKSB7XG4gICAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgICB9XG4gICAgICByZXR1cm4gLShzaGFwZSArIDEpICogbG9nKHgpIC0gc2NhbGUgLyB4IC0gbGdhbW1hKHNoYXBlKSArIHNoYXBlICogbG9nKHNjYWxlKTtcbiAgICB9O1xuICBcbiAgbGQubG5vcm0gPSAgZnVuY3Rpb24oeCwgbWVhbmxvZywgc2Rsb2cpIHtcbiAgICBpZiAoeCA8PSAwKSB7XG4gICAgICByZXR1cm4gLUluZmluaXR5O1xuICAgIH1cbiAgICByZXR1cm4gLWxvZyh4KSAtIDAuNSAqIGxvZygyICogcGkpIC0gbG9nKHNkbG9nKSAtIFxuICAgICAgICAgICAgcG93KGxvZyh4KSAtIG1lYW5sb2csIDIpIC8gKDIgKiBzZGxvZyAqIHNkbG9nKTtcbiAgfTtcbiAgXG4gIGxkLnBhcmV0byA9IGZ1bmN0aW9uKHgsIHNjYWxlLCBzaGFwZSkge1xuICAgIGlmICh4IDwgc2NhbGUpIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfVxuICAgIHJldHVybiBsb2coc2hhcGUpICsgc2hhcGUgKiBsb2coc2NhbGUpIC0gKHNoYXBlICsgMSkgKiBsb2coeCk7XG4gIH07XG4gIFxuICBsZC50ICA9ICBmdW5jdGlvbih4LCBsb2NhdGlvbiwgc2NhbGUsIGRmKSB7XG4gICAgZGYgPSBkZiA+IDFlMTAwID8gMWUxMDAgOiBkZjtcbiAgICByZXR1cm4gbGdhbW1hKChkZiArIDEpLzIpIC0gbGdhbW1hKGRmLzIpIC0gbG9nKHNxcnQocGkgKiBkZikgKiBzY2FsZSkgK1xuICAgICAgICAgICBsb2cocG93KDEgKyAoMS9kZikgKiBwb3coKHggLSBsb2NhdGlvbikvc2NhbGUsIDIpLCAtKGRmICsgMSkvMikpO1xuICB9O1xuICBcbiAgLy8gVGhpcyBpcyBhIGRpcmVjdCBqYXZhc2NyaXB0IHRyYW5zbGF0aW9uIG9mIHRoZSBSIGNvZGUgdXNlZCB0byBldmFsdWF0ZVxuICAvLyB0aGUgbG9nIGRlbnNpdHkgb2YgYSB3ZWlidWxsIGRpc3RyaWJ1dGlvbjogXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93Y2gvci1zb3VyY2UvYmxvYi9iMTU2ZTNhNzExOTY3ZjU4MTMxZTIzYzFiMWRjMWVhOTBlMmYwYzQzL3NyYy9ubWF0aC9kd2VpYnVsbC5jXG4gIGxkLndlaWJ1bGwgPSBmdW5jdGlvbih4LCBzaGFwZSwgc2NhbGUpIHtcbiAgICBpZiAoeCA8IDApIHJldHVybiAtSW5maW5pdHk7XG4gICAgaWYoeCA9PT0gMCAmJiBzaGFwZSA8IDEpIHJldHVybiBJbmZpbml0eTtcbiAgICB2YXIgdG1wMSA9IHBvdyh4IC8gc2NhbGUsIHNoYXBlIC0gMSk7XG4gICAgdmFyIHRtcDIgPSB0bXAxICogKHggLyBzY2FsZSk7XG5cdCAgcmV0dXJuIC10bXAyICsgbG9nKHNoYXBlICogdG1wMSAvIHNjYWxlKTtcbiAgfTtcbiAgXG4gIC8vIFRoaXMgaXMgYSBkaXJlY3QgamF2YXNjcmlwdCB0cmFuc2xhdGlvbiBvZiB0aGUgUiBjb2RlIHVzZWQgdG8gZXZhbHVhdGVcbiAgLy8gdGhlIGxvZyBkZW5zaXR5IG9mIGEgbG9naXN0aWMgZGlzdHJpYnV0aW9uOiBcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3djaC9yLXNvdXJjZS9ibG9iL2IxNTZlM2E3MTE5NjdmNTgxMzFlMjNjMWIxZGMxZWE5MGUyZjBjNDMvc3JjL25tYXRoL2Rsb2dpcy5jXG4gIGxkLmxvZ2lzID0gZnVuY3Rpb24oeCwgbG9jYXRpb24sIHNjYWxlKSB7XG4gICAgeCA9IGFicygoeCAtIGxvY2F0aW9uKSAvIHNjYWxlKTtcbiAgICB2YXIgZSA9IGV4cCgteCk7XG4gICAgdmFyIGYgPSAxLjAgKyBlO1xuICAgIHJldHVybiAtKHggKyBsb2coc2NhbGUgKiBmICogZikpOyAgICBcbiAgfTtcblxuICBsZC5kaXJpY2hsZXQgPSBmdW5jdGlvbih4LCBhbHBoYSkge1xuICAgIHZhciBzdW1fYWxwaGEgPSAwO1xuICAgIHZhciBzdW1fbGdhbW1hX2FscGhhID0gMDtcbiAgICB2YXIgc3VtX2FscGhhX3N1Yl8xX2xvZ194ID0gMDtcbiAgICB2YXIgbiA9IGFscGhhLmxlbmd0aDtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICBzdW1fYWxwaGEgKz0gYWxwaGFbaV07XG4gICAgICBzdW1fbGdhbW1hX2FscGhhICs9IGxnYW1tYShhbHBoYVtpXSk7XG4gICAgICBzdW1fYWxwaGFfc3ViXzFfbG9nX3ggKz0gKGFscGhhW2ldIC0gMSkgKiBsb2coeFtpXSk7XG4gICAgfVxuICAgIHJldHVybiBsZ2FtbWEoc3VtX2FscGhhKSAtIHN1bV9sZ2FtbWFfYWxwaGEgKyBzdW1fYWxwaGFfc3ViXzFfbG9nX3g7XG4gIH07XG4gICBcbiAgICBcbiAgbGQuZXhwID0gZnVuY3Rpb24oeCwgcmF0ZSkge1xuICAgICAgcmV0dXJuIHggPCAwID8gLUluZmluaXR5IDogbG9nKHJhdGUpIC1yYXRlICogeDtcbiAgfTtcbiAgXG4gIGxkLnVuaWYgPSBmdW5jdGlvbih4LCBtaW4sIG1heCkge1xuICAgICAgcmV0dXJuICh4IDwgbWluIHx8IHggPiBtYXgpID8gLUluZmluaXR5IDogbG9nKDEgLyAobWF4IC0gbWluKSk7XG4gIH07XG4gIFxuICAvLy8vLy8vLy8vIERpc2NyZXRlIGRpc3RyaWJ1dGlvbnMgLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgbGQuYmVybiA9IGZ1bmN0aW9uKHgsIHByb2IpIHtcbiAgICAgIHJldHVybiAhKHggPT09IDAgfHwgeCA9PT0gMSkgPyAtSW5maW5pdHkgOiBsb2coeCAqIHByb2IgKyAoMSAtIHgpICogKDEgLSBwcm9iKSk7XG4gIH07XG4gIFxuICBsZC5jYXQgPSBmdW5jdGlvbih4LCBwcm9icykge1xuICAgIGlmKHggPCAxIHx8IHggPiBwcm9icy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBsb2coIHByb2JzW3ggLSAxXSApO1xuICAgIH1cbiAgfTtcbiAgXG4gIGxkLmJpbm9tID0gZnVuY3Rpb24oeCwgc2l6ZSwgcHJvYikge1xuICAgIGlmKHggPiBzaXplIHx8IHggPCAwKSB7XG4gICAgICByZXR1cm4gLUluZmluaXR5O1xuICAgIH1cbiAgICBpZihwcm9iID09PSAwIHx8IHByb2IgPT09IDEpIHtcbiAgICAgIHJldHVybiAoc2l6ZSAqIHByb2IpID09PSB4ID8gMCA6IC1JbmZpbml0eTtcbiAgICB9XG4gICAgcmV0dXJuIGxjaG9vc2Uoc2l6ZSwgeCkgKyB4ICogbG9nKHByb2IpICsgKHNpemUgLSB4KSAqIGxvZygxIC0gcHJvYik7XG4gIH07XG4gIFxuICB2YXIgbXVsdGlub20gPSBmdW5jdGlvbih4LCBwcm9icykge1xuICAgIHZhciBuID0geC5sZW5ndGg7XG4gICAgdmFyIHNpemUgPSAwO1xuICAgIHZhciB0bXBfdGVybSA9IDA7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgaWYocHJvYnNbaV0gPT09IDApIHtcbiAgICAgICAgaWYoeFtpXSAhPT0gMCkge1xuICAgICAgICAgIHJldHVybiAtSW5maW5pdHk7ICBcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2l6ZSArPSB4W2ldO1xuICAgICAgICB0bXBfdGVybSArPSB4W2ldICogbG9nKHByb2JzW2ldKSAtIGxnYW1tYSh4W2ldICsgMSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsZ2FtbWEoc2l6ZSArIDEpICsgdG1wX3Rlcm0gO1xuICB9O1xuICBcbiAgbGQubmJpbm9tID0gZnVuY3Rpb24oeCwgc2l6ZSwgcHJvYikge1xuICAgIGlmKHggPCAwKSB7XG4gICAgICByZXR1cm4gLUluZmluaXR5O1xuICAgIH1cbiAgICByZXR1cm4gbGNob29zZSh4ICsgc2l6ZSAtIDEsIHNpemUgLSAxKSArIHggKiBsb2coMSAtIHByb2IpICsgc2l6ZSAqIGxvZyhwcm9iKTtcbiAgfTtcbiAgXG4gIGxkLmh5cGVyID0gZnVuY3Rpb24oeCwgbSwgbiwgaykge1xuICAgIGlmKHggPCAwIHx8IHggPiBrKSB7XG4gICAgICByZXR1cm4gLUluZmluaXR5O1xuICAgIH0gZWxzZSB7XG4gICAgcmV0dXJuIGxjaG9vc2UobSwgeCkgKyBsY2hvb3NlKG4sIGsteCkgLSBsY2hvb3NlKG0rbiwgayk7XG4gICAgfVxuICB9O1xuICBcbiAgbGQucG9pcyA9IGZ1bmN0aW9uKHgsIGxhbWJkYSkge1xuICAgICAgcmV0dXJuIHggPCAwID8gLUluZmluaXR5IDogbG9nKGxhbWJkYSkgKiB4IC0gbGFtYmRhIC0gbGZhY3RvcmlhbCh4KTtcbiAgfTtcbiAgXG4gIHJldHVybiBsZDtcbn0pKTsiLCJcInVzZSBzdHJpY3RcIjtcblxuLy8gVGhpcyBib2lsZXIgcGxhdGUgY29kZSBoZXJlIGlzIHRha2VuIGZyb206XG4vLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3RlbXBsYXRlcy9yZXR1cm5FeHBvcnRzLmpzXG4vLyBJdCBzaG91bGQgbWFrZSBzaHVyZSB0aGF0IG1vZHVsZSBjYW4gYmUgaW1wb3J0ZWQgYm90aCBpbiB0aGUgYnJvd3Nlcixcbi8vIE5vZGUsIGFuZCBieSB1c2luZyB0aGUgQXN5bmNocm9ub3VzIE1vZHVsZSBEZWZpbml0aW9uIHN0YW5kYXJkLlxuLy8gSWYgdGhpcyBtb2R1bGUgaXMgbG9hZGVkIGluIHRoZSBicm93c2VyIGl0IHdpbGwgY3JlYXRlZCB0aGUgZ2xvYmFsXG4vLyBvYmplY3QgbWNtYyAuXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgICAgZGVmaW5lKFtdLCBmYWN0b3J5KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgIC8vIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxuICAgICAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAgICAgLy8gbGlrZSBOb2RlLlxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KVxuICAgICAgICByb290Lm1jbWMgPSBmYWN0b3J5KCk7XG4gIH1cbn0odGhpcywgZnVuY3Rpb24oKXtcblxuLy8vIFRoZSBhY3R1YWwgbW9kdWxlIGNvZGUgc3RhcnRzIGhlcmUgLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gIFxuICBcbiAgLy8vLy8vLy8vLyBIZWxwZXIgRnVuY3Rpb25zIC8vLy8vLy8vLy9cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgXG4gIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHJlYWwgbnVtYmVyIGJldHdlZW4gbWluIGFuZCBtYXggKi9cbiAgdmFyIHJ1bmlmID0gZnVuY3Rpb24obWluLCBtYXgpIHtcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluO1xuICB9O1xuICBcbiAgLyoqIFJldHVybnMgYSByYW5kb20gaW50ZWdlciBiZXR3ZWVuIG1pbiBhbmQgbWF4ICovXG4gIHZhciBydW5pZl9kaXNjcmV0ZSA9IGZ1bmN0aW9uKG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XG4gIH07XG4gIFxuICAvKiogUmV0dXJucyBhIHJhbmRvbSByZWFsIG51bWJlciBmcm9tIGEgbm9ybWFsIGRpc3RyaWJidXRpb24gZGVmaW5lZFxuICAgKiAgYnkgbWVhbiBhbmQgc2QuIFxuICAgKiAgQWRhcHRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9qc3RhdC9qc3RhdC9ibG9iL21hc3Rlci9zcmMvc3BlY2lhbC5qcyAqL1xuICB2YXIgcm5vcm0gPSBmdW5jdGlvbihtZWFuLCBzZCkge1xuICAgIHZhciB1LCB2LCB4LCB5LCBxO1xuICAgIGRvIHtcbiAgICAgIHUgPSBNYXRoLnJhbmRvbSgpO1xuICAgICAgdiA9IDEuNzE1NiAqIChNYXRoLnJhbmRvbSgpIC0gMC41KTtcbiAgICAgIHggPSB1IC0gMC40NDk4NzE7XG4gICAgICB5ID0gTWF0aC5hYnModikgKyAwLjM4NjU5NTtcbiAgICAgIHEgPSB4ICogeCArIHkgKiAoMC4xOTYwMCAqIHkgLSAwLjI1NDcyICogeCk7XG4gICAgfSB3aGlsZSAocSA+IDAuMjc1OTcgJiYgKHEgPiAwLjI3ODQ2IHx8IHYgKiB2ID4gLTQgKiBNYXRoLmxvZyh1KSAqIHUgKiB1KSk7XG4gICAgXG4gICAgcmV0dXJuICh2IC8gdSkgKiBzZCArIG1lYW47XG4gIH07XG4gIFxuICBcbiAgLyoqIFJldHVybnMgYSBkZWVwIGNsb25lIG9mIHNyYywgc29ydCBvZi4uLiBJdCBvbmx5IGNvcGllcyBhIGxpbWl0ZWRcbiAgICogbnVtYmVyIG9mIHR5cGVzIGFuZCwgZm9yIGV4YW1wbGUsIGZ1bmN0aW9uIGFyZSBub3QgY29waWVkLiBcbiAgICogRnJvbSBodHRwOi8vZGF2aWR3YWxzaC5uYW1lL2phdmFzY3JpcHQtY2xvbmVcbiAgICovXG4gIHZhciBkZWVwX2Nsb25lID0gZnVuY3Rpb24oc3JjKSB7XG4gIFx0ZnVuY3Rpb24gbWl4aW4oZGVzdCwgc291cmNlLCBjb3B5RnVuYykge1xuICBcdFx0dmFyIG5hbWUsIHMsIGksIGVtcHR5ID0ge307XG4gIFx0XHRmb3IobmFtZSBpbiBzb3VyY2Upe1xuICBcdFx0XHQvLyB0aGUgKCEobmFtZSBpbiBlbXB0eSkgfHwgZW1wdHlbbmFtZV0gIT09IHMpIGNvbmRpdGlvbiBhdm9pZHMgY29weWluZyBwcm9wZXJ0aWVzIGluIFwic291cmNlXCJcbiAgXHRcdFx0Ly8gaW5oZXJpdGVkIGZyb20gT2JqZWN0LnByb3RvdHlwZS5cdCBGb3IgZXhhbXBsZSwgaWYgZGVzdCBoYXMgYSBjdXN0b20gdG9TdHJpbmcoKSBtZXRob2QsXG4gIFx0XHRcdC8vIGRvbid0IG92ZXJ3cml0ZSBpdCB3aXRoIHRoZSB0b1N0cmluZygpIG1ldGhvZCB0aGF0IHNvdXJjZSBpbmhlcml0ZWQgZnJvbSBPYmplY3QucHJvdG90eXBlXG4gIFx0XHRcdHMgPSBzb3VyY2VbbmFtZV07XG4gIFx0XHRcdGlmKCEobmFtZSBpbiBkZXN0KSB8fCAoZGVzdFtuYW1lXSAhPT0gcyAmJiAoIShuYW1lIGluIGVtcHR5KSB8fCBlbXB0eVtuYW1lXSAhPT0gcykpKXtcbiAgXHRcdFx0XHRkZXN0W25hbWVdID0gY29weUZ1bmMgPyBjb3B5RnVuYyhzKSA6IHM7XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHRcdHJldHVybiBkZXN0O1xuICBcdH1cbiAgXHRpZighc3JjIHx8IHR5cGVvZiBzcmMgIT0gXCJvYmplY3RcIiB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc3JjKSA9PT0gXCJbb2JqZWN0IEZ1bmN0aW9uXVwiKXtcbiAgXHRcdC8vIG51bGwsIHVuZGVmaW5lZCwgYW55IG5vbi1vYmplY3QsIG9yIGZ1bmN0aW9uXG4gIFx0XHRyZXR1cm4gc3JjO1x0Ly8gYW55dGhpbmdcbiAgXHR9XG4gIFx0aWYoc3JjLm5vZGVUeXBlICYmIFwiY2xvbmVOb2RlXCIgaW4gc3JjKXtcbiAgXHRcdC8vIERPTSBOb2RlXG4gIFx0XHRyZXR1cm4gc3JjLmNsb25lTm9kZSh0cnVlKTsgLy8gTm9kZVxuICBcdH1cbiAgXHRpZihzcmMgaW5zdGFuY2VvZiBEYXRlKXtcbiAgXHRcdC8vIERhdGVcbiAgXHRcdHJldHVybiBuZXcgRGF0ZShzcmMuZ2V0VGltZSgpKTtcdC8vIERhdGVcbiAgXHR9XG4gIFx0aWYoc3JjIGluc3RhbmNlb2YgUmVnRXhwKXtcbiAgXHRcdC8vIFJlZ0V4cFxuICBcdFx0cmV0dXJuIG5ldyBSZWdFeHAoc3JjKTsgICAvLyBSZWdFeHBcbiAgXHR9XG4gIFx0dmFyIHIsIGksIGw7XG4gIFx0aWYoc3JjIGluc3RhbmNlb2YgQXJyYXkpe1xuICBcdFx0Ly8gYXJyYXlcbiAgXHRcdHIgPSBbXTtcbiAgXHRcdGZvcihpID0gMCwgbCA9IHNyYy5sZW5ndGg7IGkgPCBsOyArK2kpe1xuICBcdFx0XHRpZihpIGluIHNyYyl7XG4gIFx0XHRcdFx0ci5wdXNoKGRlZXBfY2xvbmUoc3JjW2ldKSk7XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHR9IGVsc2Uge1xuICBcdFx0Ly8gZ2VuZXJpYyBvYmplY3RzXG4gIFx0XHRyID0gc3JjLmNvbnN0cnVjdG9yID8gbmV3IHNyYy5jb25zdHJ1Y3RvcigpIDoge307XG4gIFx0fVxuICBcdHJldHVybiBtaXhpbihyLCBzcmMsIGRlZXBfY2xvbmUpO1xuICB9O1xuICBcbiAgLyoqIFNwZWNpYWxpemVkIGNsb25lIGZ1bmN0aW9uIHRoYXQgb25seSBjbG9uZXMgc2NhbGFycyBhbmQgbmVzdGVkIGFycmF5cyB3aGVyZVxuICAgKiBlYWNoIGFycmF5IGVpdGhlciBjb25zaXN0cyBvZiBhbGwgYXJyYXlzIG9yIGFsbCBudW1iZXJzLiBUaGlzIGZ1bmN0aW9uXG4gICAqIGlzIG1lYW50IGFzIGEgZmFzdCB3YXkgb2YgY2xvbmluZyBwYXJhbWV0ZXIgZHJhd3Mgd2l0aGluIHRoZSBtY21jIHNhbXBsaW5nXG4gICAqIGxvb3AuXG4gICAqL1xuICB2YXIgY2xvbmVfcGFyYW1fZHJhdyA9IGZ1bmN0aW9uKHgpIHtcbiAgICBpZihBcnJheS5pc0FycmF5KHgpKSB7XG4gICAgICBpZihBcnJheS5pc0FycmF5KHhbMF0pKSB7XG4gICAgICAgIC8vIHggaXMgYW4gYXJyYXkgb2YgYXJyYXlzIHNvIHdlIG5lZWQgdG8gY2xvbmUgaXQgcmVjdXJzaXZlbHlcbiAgICAgICAgdmFyIHhfY29weSA9IFtdO1xuICAgICAgICBmb3IodmFyIGkgPSAwLCBsZW5ndGggPSB4Lmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgeF9jb3B5LnB1c2goY2xvbmVfcGFyYW1fZHJhdyh4W2ldKSk7XG4gICAgICAgIH0gXG4gICAgICAgIHJldHVybiB4X2NvcHk7XG4gICAgICB9IGVsc2UgeyAvLyBXZSdsbCBhc3N1bWUgeCBpcyBhIGFycmF5cyBvZiBzY2FsYXJzXG4gICAgICAgIHJldHVybiB4LnNsaWNlKDApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7IC8vIFdlJ2xsIGFzc3VtZSB4IGlzIGEgc2NhbGFyXG4gICAgICByZXR1cm4geDtcbiAgICB9XG4gIH07XG4gIFxuICAvKiogUmV0dXJucyB0cnVlIGlmIG9iamVjdCBpcyBhIG51bWJlci5cbiAgICovXG4gIHZhciBpc19udW1iZXIgPSBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgIHJldHVybiB0eXBlb2Ygb2JqZWN0ID09IFwibnVtYmVyXCIgfHwgKHR5cGVvZiBvYmplY3QgPT0gXCJvYmplY3RcIiAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IE51bWJlcik7XG4gIH07XG4gIFxuICAvKipcbiAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYSAocG9zc2libHkgbXVsdGlkaW1lbnNpb25hbC9uZXN0ZWQpIGFycmF5LlxuICAgKiBAcGFyYW0gZGltIC0gQW4gYXJyYXkgZ2l2aW5nIHRoZSBkaW1lbnNpb24gb2YgdGhlIGFycmF5LiBGb3IgZXhhbXBsZSxcbiAgICogICBbNV0gd291bGQgeWllbGQgYSA1IGVsZW1lbnQgYXJyYXksIGFuZCBbMywzXSB3b3VsZCB5aWVsZCBhIDMgYnkgMyBtYXRyaXguXG4gICAqIEBwYXJhbSBpbml0IC0gQSB2YWx1ZSBvciBhIGZ1bmN0aW9uIHVzZWQgdG8gZmlsbCBpbiB0aGUgZWFjaCBlbGVtZW50IGluXG4gICAqICAgdGhlIGFycmF5LiBJZiBpdCBpcyBhIGZ1bmN0aW9uIGl0IHNob3VsZCB0YWtlIG5vIGFyZ3VtZW50cywgaXQgd2lsbCBiZSBcbiAgICogICBldmFsdWF0ZWQgb25jZSBmb3IgZWFjaCBlbGVtZW50LCBhbmQgaXQncyByZXR1cm4gdmFsdWUgd2lsbCBiZSB1c2VkIHRvXG4gICAqICAgZmlsbCBpbiBlYWNoIGVsZW1lbnQuXG4gICAqIEBleGFtcGxlIFxuICAgKiAvLyBUaGUgZm9sbG93aW5nIHdvdWxkIHJldHVybiBbWzEsMV0sWzEsMV0sWzEsMV1dXG4gICAqIGNyZWF0ZV9hcnJheShbMiwzXSwgMSlcbiAgICovXG4gIHZhciBjcmVhdGVfYXJyYXkgPSBmdW5jdGlvbihkaW0sIGluaXQpIHtcbiAgICB2YXIgYXJyID0gbmV3IEFycmF5KGRpbVswXSk7XG4gICAgdmFyIGk7XG4gICAgaWYoZGltLmxlbmd0aCA9PSAxKSB7IC8vIEZpbGwgaXQgdXAgd2l0aCBpbml0XG4gICAgICBpZih0eXBlb2YgaW5pdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGZvcihpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7XG4gICAgICAgICAgYXJyW2ldID0gaW5pdCgpO1xuICAgICAgICB9ICBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvcihpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7XG4gICAgICAgICAgYXJyW2ldID0gaW5pdDtcbiAgICAgICAgfSBcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYoZGltLmxlbmd0aCA+IDEpIHtcbiAgICAgIGZvcihpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7XG4gICAgICAgIGFycltpXSA9IGNyZWF0ZV9hcnJheShkaW0uc2xpY2UoMSksIGluaXQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBcImNyZWF0ZV9hcnJheSBjYW4ndCBjcmVhdGUgYSBkaW1lbnNpb25sZXNzIGFycmF5XCI7XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG4gIH07XG4gIFxuICAvKipcbiAgICogUmV0dXJuIHRoZSBkaW1lbnNpb25zIG9mIGEgcG9zc2libHkgbmVzdGVkIGFycmF5IGFzIGFuIGFycmF5LiBGb3IgXG4gICAqIGV4YW1wbGUsIGFycmF5X2RpbSggW1sxLCAyXSwgWzEsIDJdXSApIHNob3VsZCByZXR1cm4gWzIsIDJdXG4gICAqIEFzc3VtZXMgdGhhdCBhbGwgYXJyYXlzIGluc2lkZSBhbm90aGVyIGFycmF5IGFyZSBvZiB0aGUgc2FtZSBsZW5ndGguXG4gICAqIEBleGFtcGxlXG4gICAqIC8vIFNob3VsZCByZXR1cm4gWzQsIDIsIDFdXG4gICAqIGFycmF5X2RpbShjcmVhdGVfYXJyYXkoWzQsIDIsIDFdLCAwKSlcbiAgICovXG4gIHZhciBhcnJheV9kaW0gPSBmdW5jdGlvbihhKSB7XG4gICAgaWYoQXJyYXkuaXNBcnJheShhWzBdKSkge1xuICAgICAgcmV0dXJuIFthLmxlbmd0aF0uY29uY2F0KGFycmF5X2RpbShhWzBdKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbYS5sZW5ndGhdO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdHdvIGFycmF5cyBhcmUgZXF1YWwgaW4gdGhlIHNlbnNlIHRoYXQgdGhleSBjb250YWluIHRoZSBzYW1lIGVsZW1lbnRzXG4gICAqIGFzIGp1ZGdlZCBieSB0aGUgXCI9PVwiIG9wZXJhdG9yLiBSZXR1cm5zIHRydWUgb3IgZmFsc2UuXG4gICAqIEFkYXB0ZWQgZnJvbSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNDg1Mzk3NC8xMDAxODQ4XG4gICAqLyBcbiAgdmFyIGFycmF5X2VxdWFsID0gZnVuY3Rpb24gKGExLCBhMikge1xuICAgICAgaWYgKGExLmxlbmd0aCAhPSBhMi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYTEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIG5lc3RlZCBhcnJheXNcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhMVtpXSkgJiYgQXJyYXkuaXNBcnJheShhMltpXSkpIHtcbiAgICAgICAgICAgICAgLy8gcmVjdXJzZSBpbnRvIHRoZSBuZXN0ZWQgYXJyYXlzXG4gICAgICAgICAgICAgIGlmICghYXJyYXlfZXF1YWwoYTFbaV0sIGEyW2ldKSkgcmV0dXJuIGZhbHNlOyAgICAgICBcbiAgICAgICAgICB9ICAgICAgICAgICBcbiAgICAgICAgICBlbHNlIGlmIChhMVtpXSAhPSBhMltpXSkgeyBcbiAgICAgICAgICAgICAgLy8gV2FybmluZyAtIHR3byBkaWZmZXJlbnQgb2JqZWN0IGluc3RhbmNlcyB3aWxsIG5ldmVyIGJlIGVxdWFsOiB7eDoyMH0gIT0ge3g6MjB9XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTsgICBcbiAgICAgICAgICB9ICAgICAgICAgICBcbiAgICAgIH0gICAgICAgXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBUcmF2ZXJzZXMgYSBwb3NzaWJseSBuZXN0ZWQgYXJyYXkgYSBhbmQgYXBwbGllcyBmdW4gdG8gYWxsIFwibGVhZiBub2Rlc1wiLCBcbiAgICogdGhhdCBpcywgdmFsdWVzIHRoYXQgYXJlIG5vdCBhcnJheXMuIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIHNhbWUgc2l6ZSBhc1xuICAgKiBhLlxuICAgKi9cbiAgdmFyIG5lc3RlZF9hcnJheV9hcHBseSA9IGZ1bmN0aW9uKGEsIGZ1bikge1xuICAgIGlmKEFycmF5LmlzQXJyYXkoYSkpIHtcbiAgICAgIHZhciByZXN1bHQgPSBuZXcgQXJyYXkoYS5sZW5ndGgpO1xuICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmVzdWx0W2ldID0gbmVzdGVkX2FycmF5X2FwcGx5KGFbaV0sIGZ1bik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZnVuKGEpO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8qKiBSYW5kb21pemluZyB0aGUgYXJyYXkgZWxlbWVudCBvcmRlciBpbi1wbGFjZS4gVXNpbmcgRHVyc3RlbmZlbGRcbiAgICogc2h1ZmZsZSBhbGdvcml0aG0uIEFkYXB0ZWQgZnJvbSBoZXJlOiBcbiAgICogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTI2NDY4NjQvMTAwMTg0OFxuICAgKi9cbiAgZnVuY3Rpb24gc2h1ZmZsZV9hcnJheShhcnJheSkge1xuICAgICAgZm9yICh2YXIgaSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgICB2YXIgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xuICAgICAgICAgIHZhciB0ZW1wID0gYXJyYXlbaV07XG4gICAgICAgICAgYXJyYXlbaV0gPSBhcnJheVtqXTtcbiAgICAgICAgICBhcnJheVtqXSA9IHRlbXA7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJyYXk7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBEb2VzIHRoZSBzYW1lIHRoaW5nIGFzIG5lc3RlZF9hcnJheV9hcHBseSwgdGhhdCBpcywgdHJhdmVyc2VzIGEgcG9zc2libHlcbiAgICogbmVzdGVkIGFycmF5IGEgYW5kIGFwcGxpZXMgZnVuIHRvIGFsbCBcImxlYWYgbm9kZXNcIiBhbmQgcmV0dXJucyBhbiBhcnJheSBcbiAgICogb2YgdGhlIHNhbWUgc2l6ZSBhcyBhLiBUaGUgZGlmZmVyZW5jZSBpcyB0aGF0IG5lc3RlZF9hcnJheV9yYW5kb21fYXBwbHlcbiAgICogYnJhbmNoZXMgcmFuZG9tbHkuXG4gICAqL1xuICB2YXIgbmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseSA9IGZ1bmN0aW9uKGEsIGZ1bikge1xuICAgIGlmKEFycmF5LmlzQXJyYXkoYSkpIHtcbiAgICAgIHZhciBsZW4gPSBhLmxlbmd0aDtcbiAgICAgIHZhciBpO1xuICAgICAgdmFyIGFycmF5X2lzID0gW107XG4gICAgICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBhcnJheV9pc1tpXSA9IGk7XG4gICAgICB9XG4gICAgICBzaHVmZmxlX2FycmF5KGFycmF5X2lzKTtcbiAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgIFxuICAgICAgZm9yKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIGFycmF5X2kgPSBhcnJheV9pc1tpXTtcbiAgICAgICAgcmVzdWx0W2FycmF5X2ldID0gbmVzdGVkX2FycmF5X2FwcGx5KGFbYXJyYXlfaV0sIGZ1bik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZnVuKGEpO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBBbGxvd3MgYSBwcmV0dHkgd2F5IG9mIHNldHRpbmcgZGVmYXVsdCBvcHRpb25zIHdoZXJlIHRoZSBkZWZ1bHRzIGNhbiBiZVxuICAgKiBvdmVycmlkZGVuIGJ5IGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgKiAgQHBhcmFtIG9wdGlvbl9uYW1lIC0gdGhlIG5hbWUgb2YgdGhlIG9wdGlvbiBhcyBhIHN0cmluZ1xuICAgKiAgQHBhcmFtIG15X29wdGlvbnMgLSBhbiBvcHRpb24gb2JqZWN0IHRoYXQgY291bGQgaGF2ZSBvcHRpb25fbmFtZSBcbiAgICogICAgYXMgYSBtZW1iZXIuXG4gICAqIEBwYXJhbSBkZWZhdWxfdmFsdWUgLSBkZWZ1bHQgdmFsdWUgdGhhdCBpcyByZXR1cm5lZCBpZiBvcHRpb25fbmFtZSBcbiAgICogICBpcyBub3QgZGVmaW5lZCBpbiBteV9vcHRpb25zLlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgbXlfb3B0aW9ucyA9IHtwaTogMy4xNDE1OX1cbiAgICogdmFyIHBpID0gZ2V0X29wdGlvbihcInBpXCIsIG15X29wdGlvbnMsIDMuMTQpXG4gICAqL1xuICAvLyBQcmV0dHkgd2F5IG9mIHNldHRpbmcgZGVmYXVsdCBvcHRpb25zIHdoZXJlIHRoZSBkZWZhdWx0cyBjYW4gYmUgb3ZlcnJpZGRlblxuICAvLyBieSBhbiBvcHRpb25zIG9iamVjdC4gRm9yIGV4YW1wbGU6XG4gIC8vIHZhciBwaSA9IGdldF9vcHRpb24oXCJwaVwiLCBteV9vcHRpb25zLCAzLjE0KVxuICB2YXIgZ2V0X29wdGlvbiA9IGZ1bmN0aW9uKG9wdGlvbl9uYW1lLCBvcHRpb25zLCBkZWZhdWxfdmFsdWUpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICByZXR1cm4gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShvcHRpb25fbmFtZSkgJiYgXG4gICAgICAgICAgIG9wdGlvbnNbb3B0aW9uX25hbWVdICE9PSB1bmRlZmluZWQgICYmIFxuICAgICAgICAgICBvcHRpb25zW29wdGlvbl9uYW1lXSAhPT0gbnVsbCA/IG9wdGlvbnNbb3B0aW9uX25hbWVdIDogZGVmYXVsX3ZhbHVlO1xuICB9O1xuICBcbiAgLyoqIFZlcnNpb24gb2YgZ2V0X29wdGlvbiB3aGVyZSB0aGUgb3B0aW9uIHNob3VsZCBiZSBhIG9uZSBvciBtdWx0aS1kaW1lbnNpb25hbFxuICAgKiBhcnJheSBhbmQgd2hlcmUgdGhlIGRlZmF1bHQgY2FuIGJlIG92ZXJyaWRkZW4gZWl0aGVyIGJ5IGEgc2NhbGFyIG9yIGJ5IGFuIGFycmF5LlxuICAgKiBJZiBpdCdzIGEgc2NhbGFyIHRoZSB0aGF0IHNjYWxhciBpcyB1c2VkIHRvIGluaXRpYWxpemUgYW4gYXJyYXkgd2l0aCBcbiAgICogZGltIGRpbWVuc2lvbnMuXG4gICAqIFxuICAgKi9cbiAgdmFyIGdldF9tdWx0aWRpbV9vcHRpb24gPSBmdW5jdGlvbihvcHRpb25fbmFtZSwgb3B0aW9ucywgZGltLCBkZWZhdWxfdmFsdWUpIHtcbiAgICB2YXIgdmFsdWUgPSBnZXRfb3B0aW9uKG9wdGlvbl9uYW1lLCBvcHRpb25zLCBkZWZhdWxfdmFsdWUpO1xuICAgICBpZighIEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgdmFsdWUgPSBjcmVhdGVfYXJyYXkoZGltLCB2YWx1ZSk7XG4gICAgIH0gXG4gICAgIGlmKCEgYXJyYXlfZXF1YWwoIGFycmF5X2RpbSh2YWx1ZSksIGRpbSkpIHtcbiAgICAgICB0aHJvdyBcIlRoZSBvcHRpb24gXCIgKyBvcHRpb25fbmFtZSArIFwiIGlzIG9mIGRpbWVuc2lvbiBbXCIgKyBcbiAgICAgICAgICAgICBhcnJheV9kaW0odmFsdWUpICsgXCJdIGJ1dCBzaG91bGQgYmUgW1wiICsgZGltICsgXCJdLlwiO1xuICAgIH1cbiAgICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuICBcbiAgLy8vLy8vLy8vLyBGdW5jdGlvbnMgZm9yIGhhbmRsaW5nIHBhcmFtZXRlciBvYmplY3RzIC8vLy8vLy8vLy9cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgZml4ZWQgKHNhbWUgZXZlcnkgdGltZSkgbnVtYmVyIHRoYXQgY291bGQgYmUgdXNlZCB0byBpbml0aWFsaXplXG4gICAqIGEgcGFyYW1ldGVyIG9mIGEgY2VydGFpbiB0eXBlLCBwb3NzaWJseSB3aXRoIGxvd2VyIGFuZCB1cHBlciBib3VuZHMuXG4gICAqIFRoZSBwb3NzaWxlIHR5cGVzIGFyZSBcInJlYWxcIiwgXCJpbnRcIiwgYW5kIFwiYmluYXJ5XCIuXG4gICAqL1xuICB2YXIgcGFyYW1faW5pdF9maXhlZCA9IGZ1bmN0aW9uKHR5cGUsIGxvd2VyLCB1cHBlcikge1xuICAgIGlmKGxvd2VyID4gdXBwZXIpIHtcbiAgICAgIHRocm93IFwiQ2FuIG5vdCBpbml0aWFsaXplIHBhcmFtZXRlciB3aGVyZSBsb3dlciBib3VuZCA+IHVwcGVyIGJvdW5kXCI7XG4gICAgfVxuICAgIGlmKHR5cGUgPT09IFwicmVhbFwiKSB7XG4gICAgICBpZihsb3dlciA9PT0gLUluZmluaXR5ICYmIHVwcGVyID09PSBJbmZpbml0eSkge1xuICAgICAgICByZXR1cm4gMC41O1xuICAgICAgfSBlbHNlIGlmKGxvd2VyID09PSAtSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIHVwcGVyIC0gMC41O1xuICAgICAgfSBlbHNlIGlmKHVwcGVyID09PSBJbmZpbml0eSkge1xuICAgICAgICByZXR1cm4gbG93ZXIgKyAwLjU7XG4gICAgICB9IGVsc2UgaWYobG93ZXIgPD0gdXBwZXIpIHtcbiAgICAgICAgcmV0dXJuIChsb3dlciArIHVwcGVyKSAvIDI7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmKHR5cGUgPT09IFwiaW50XCIpIHtcbiAgICAgIGlmKGxvd2VyID09PSAtSW5maW5pdHkgJiYgdXBwZXIgPT09IEluZmluaXR5KSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfSBlbHNlIGlmKGxvd2VyID09PSAtSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIHVwcGVyIC0gMTtcbiAgICAgIH0gZWxzZSBpZih1cHBlciA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIGxvd2VyICsgMTtcbiAgICAgIH0gZWxzZSBpZihsb3dlciA8PSB1cHBlcil7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKChsb3dlciArIHVwcGVyKSAvIDIpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZih0eXBlID09PSBcImJpbmFyeVwiKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgdGhyb3cgXCJDb3VsZCBub3QgaW5pdGlhbGl6ZSBwYXJhbWV0ZXIgb2YgdHlwZSBcIiArIHR5cGUgKyBcIltcIiArIGxvd2VyICsgXCIsIFwiICsgdXBwZXIgKyBcIl1cIjtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBDb21wbGV0ZXMgcGFyYW1zX3RvX2NvbXBsZXRlLCBhbiBvYmplY3QgY29udGFpbmluZyBwYXJhbWV0ZXIgZGVzY3JpcHRpb25zLCBcbiAgICogYW5kIGluaXRpYWxpemVzIG5vbi1pbml0aWFsaXplZCBwYXJhbWV0ZXJzLiBUaGlzIG1vZGlmaWVkIHZlcnNpb24gb2ZcbiAgICogcGFyYW1zX3RvX2NvbXBsZXRlIGlzIHJldHVybmVkIGFzIGEgZGVlcCBjb3B5IGFuZCBub3QgbW9kaWZpZWQgaW4gcGxhY2UuXG4gICAqIEluaXRpYWxpemF0aW9uIGlzIGRvbmUgYnkgc3VwcGx5aW5nIGEgcGFyYW1faW5pdCBmdW5jdGlvbiB3aXRoIHNpZ25hdHVyZVxuICAgKiBmdW5jdGlvbih0eXBlLCBsb3dlciwgdXBwZXIpIHRoYXQgc2hvdWxkIHJldHVybiBhIHNpbmdsZSBudW1iZXIgXG4gICAqIChsaWtlIHBhcmFtX2luaXRfZml4ZWQsIGZvciBleGFtcGxlKS5cbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHBhcmFtcyA9IHsgXCJtdVwiOiB7XCJ0eXBlXCI6IFwicmVhbFwifSB9XG4gICAqIHBhcmFtcyA9IGNvbXBsZXRlX3BhcmFtcyhwYXJhbXMpO1xuICAgKiAvLyBwYXJhbXMgc2hvdWxkIG5vdyBiZTpcbiAgICogLy8gIHtcIm11XCI6IHsgXCJ0eXBlXCI6IFwicmVhbFwiLCBcImRpbVwiOiBbMV0sIFwidXBwZXJcIjogSW5maW5pdHksXG4gICAqIC8vICAgICAgICAgICBcImxvd2VyXCI6IC1JbmZpbml0eSwgXCJpbml0XCI6IDAuNSB9fVxuICAgKi8gXG4gIHZhciBjb21wbGV0ZV9wYXJhbXMgID0gZnVuY3Rpb24ocGFyYW1zX3RvX2NvbXBsZXRlLCBwYXJhbV9pbml0KSB7XG4gICAgdmFyIHBhcmFtcyA9IGRlZXBfY2xvbmUocGFyYW1zX3RvX2NvbXBsZXRlKTtcbiAgICBmb3IgKHZhciBwYXJhbV9uYW1lIGluIHBhcmFtcykgeyBpZiAoIXBhcmFtcy5oYXNPd25Qcm9wZXJ0eShwYXJhbV9uYW1lKSkgY29udGludWU7XG4gICAgICB2YXIgcGFyYW0gPSBwYXJhbXNbcGFyYW1fbmFtZV07XG4gICAgICBpZiggIXBhcmFtLmhhc093blByb3BlcnR5KFwidHlwZVwiKSkge1xuICAgICAgICBwYXJhbS50eXBlID0gXCJyZWFsXCI7XG4gICAgICB9XG4gICAgICBpZighcGFyYW0uaGFzT3duUHJvcGVydHkoXCJkaW1cIikpIHtcbiAgICAgICAgcGFyYW0uZGltID0gWzFdO1xuICAgICAgfVxuICAgICAgaWYoaXNfbnVtYmVyKHBhcmFtLmRpbSkpIHtcbiAgICAgICAgcGFyYW0uZGltID0gW3BhcmFtLmRpbV07XG4gICAgICB9XG4gICAgICBpZihwYXJhbS50eXBlID09IFwiYmluYXJ5XCIpIHtcbiAgICAgICAgcGFyYW0udXBwZXIgPSAxO1xuICAgICAgICBwYXJhbS5sb3dlciA9IDA7XG4gICAgICB9XG4gICAgICBpZighcGFyYW0uaGFzT3duUHJvcGVydHkoXCJ1cHBlclwiKSkge1xuICAgICAgICBwYXJhbS51cHBlciA9IEluZmluaXR5O1xuICAgICAgfVxuICAgICAgaWYoIXBhcmFtLmhhc093blByb3BlcnR5KFwibG93ZXJcIikpIHtcbiAgICAgICAgcGFyYW0ubG93ZXIgPSAtSW5maW5pdHk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmKHBhcmFtLmhhc093blByb3BlcnR5KFwiaW5pdFwiKSkge1xuICAgICAgICAvLyBJZiB0aGlzIGlzIGp1c3QgYSBudW1iZXIgb3IgYSBuZXN0ZWQgYXJyYXkgd2UgbGVhdmUgaXQgYWxvbmUsIGJ1dCBpZi4uLlxuICAgICAgICBpZihhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgdHlwZW9mIHBhcmFtLmluaXQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIC8vIHBhcmFtLmluaXQgaXMgYSBmdW5jdGlvbiwgdXNlIHRoYXQgdG8gaW5pdGlhbGl6ZSB0aGUgcGFyYW1ldGVyLlxuICAgICAgICAgIHBhcmFtLmluaXQgPSBwYXJhbS5pbml0KCk7XG4gICAgICAgIH0gZWxzZSBpZighYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pICYmICFBcnJheS5pc0FycmF5KHBhcmFtLmluaXQpKSB7XG4gICAgICAgIC8vIFdlIGhhdmUgYSBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlciB3aGVyZSB0aGUgcGFyYW0uaW5pdCBleGlzdCBidXRcbiAgICAgICAgLy8gaXMgbm90IGFuIGFycmF5LiBUaGVuIGFzc3VtZSBpdCBpcyBhIG51bWJlciBvciBhIGZ1bmN0aW9uIGFuZCB1c2VcbiAgICAgICAgLy8gaXQgdG8gaW5pdGlhbGl6ZSB0aGUgcGFyYW1ldGVyLlxuICAgICAgICBwYXJhbS5pbml0ID0gY3JlYXRlX2FycmF5KHBhcmFtLmRpbSwgcGFyYW0uaW5pdCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7IC8vIFdlIHVzZSB0aGUgZGVmYXVsdCBpbml0aWFsaXphdGlvbiBmdW5jdGlvbi5cbiAgICAgICAgaWYoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7XG4gICAgICAgICAgcGFyYW0uaW5pdCA9IHBhcmFtX2luaXQocGFyYW0udHlwZSwgcGFyYW0ubG93ZXIsIHBhcmFtLnVwcGVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJhbS5pbml0ID0gY3JlYXRlX2FycmF5KHBhcmFtLmRpbSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwYXJhbXM7XG4gIH07XG4gIFxuICBcbiAgLy8vLy8vLy8vLyBTdGVwcGVyIEZ1bmN0aW9ucyAvLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIFxuICBcbiAgLyoqXG4gICAqIEBpbnRlcmZhY2VcbiAgICogQSBTdGVwcGVyIGlzIGFuIG9iamVjdCByZXNwb25zaWJsZSBmb3IgcHVzaGluZyBhcm91bmQgb25lXG4gICAqIG9yIG1vcmUgcGFyYW1ldGVyIHZhbHVlcyBpbiBhIHN0YXRlIGFjY29yZGluZyB0byB0aGUgZGlzdHJpYnV0aW9uXG4gICAqIGRlZmluZWQgYnkgdGhlIGxvZyBwb3N0ZXJpb3IuIFRoaXMgZGVmaW5lcyB0aGUgU3RlcHBlciBcImludGVyZmFjZVwiLFxuICAgKiB3aGVyZSBcImludGVyZmFjZVwiIG1lYW5zIHRoYXQgU3RlcHBlciBkZWZpbmVzIGEgY2xhc3MgdGhhdCBpcyBuZXZlclxuICAgKiBtZWFudCB0byBiZSBpbnN0YW50aWF0ZWQsIGJ1dCBqdXN0IHRvIGJlIHN1YmNsYXNzZWQgYnkgc3BlY2lhbGl6ZWRcbiAgICogc3RlcHBlciBmdW5jdGlvbnMuXG4gICAqIEBpbnRlcmZhY2VcbiAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlciBkZWZpbml0aW9ucywgZm9yIGV4YW1wbGU6XG4gICAqICAge1wibXVcIjogeyBcInR5cGVcIjogXCJyZWFsXCIsIFwiZGltXCI6IFsxXSwgXCJ1cHBlclwiOiBJbmZpbml0eSwgXG4gICAqICAgXCJsb3dlclwiOiAtSW5maW5pdHksIFwiaW5pdFwiOiAwLjUgfX1cbiAgICogICBUaGUgcGFyYW1ldGVyIGRlZmluaXRpb25zIGFyZSBleHBlY3RlZCB0byBiZSBcImNvbXBsZXRlXCIsIHRoYXQgaXMsXG4gICAqICAgc3BlY2lmeWluZyBhbGwgcmVsZXZhbnQgYXR0cmlidXRlcyBzdWNoIGFzIGRpbSwgbG93ZXIgYW5kIHVwcGVyLlxuICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMgaW4gcGFyYW1zXG4gICAqICAgKGFuZCBwb3NzaWJseSBtb3JlKS4gVGhlIHBhcmFtZXRlciBuYW1lcyBhcmUgZ2l2ZW4gYXMga2V5cyBhbmQgdGhlIHN0YXRlc1xuICAgKiAgIGFzIHNjYWxhcnMgb3IsIHBvc3NpYmx5IG5lc3RlZCwgYXJyYXlzLiBGb3IgZXhhbXBsZTpcbiAgICogICB7bXU6IDEwLCBzaWdtYTogNSwgYmV0YTogWzEsIDIuNV19XG4gICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gKnRha2luZyBubyBwYXJhbWV0ZXJzKiB0aGF0IHJldHVybnMgdGhlXG4gICAqICAgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gVGhhdCBpcywgdGhlIHZhbHVlIG9mIGxvZ19wb3N0XG4gICAqICAgc2hvdWxkIGNoYW5nZSBpZiB0aGUgdGhlIHZhbHVlcyBpbiBzdGF0ZSBhcmUgY2hhbmdlZC5cbiAgXG4gICAqL1xuICB2YXIgU3RlcHBlciA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KSB7XG4gICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMubG9nX3Bvc3QgPSBsb2dfcG9zdDtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBUYWtlcyBhIHN0ZXAgaW4gdGhlIHBhcmFtZXRlciBzcGFjZS4gU2hvdWxkIHJldHVybiB0aGUgbmV3IHN0YXRlLFxuICAgKiBidXQgaXMgbWFpbmx5IGNhbGxlZCBmb3IgaXQncyBzaWRlIGVmZmVjdCBvZiBtYWtpbmcgYSBjaGFuZ2UgaW4gdGhlXG4gICAqIHN0YXRlIG9iamVjdC5cbiAgICovXG4gIFN0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbigpIHtcbiAgICB0aHJvdyBcIkV2ZXJ5IFN0ZXBwZXIgbmVlZCB0byBpbXBsZW1lbnQgc3RlcCgpXCI7XG4gIH07XG4gIFxuICAvKipcbiAgICogSWYgaW1wbGVtZW50ZWQsIG1ha2VzIHRoZSBzdGVwcGVyIGFkYXB0IHdoaWxlIHN0ZXBwaW5nLlxuICAgKi8gXG4gIFN0ZXBwZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAvLyBPcHRpb25hbCwgc29tZSBzdGVwcGVycyBtaWdodCBub3QgYmUgYWRhcHRpdmUuICovIFxuICB9O1xuICBcbiAgLyoqXG4gICAqIElmIGltcGxlbWVudGVkLCBtYWtlcyB0aGUgc3RlcHBlciBjZWFzZSBhZGFwdGluZyB3aGlsZSBzdGVwcGluZy5cbiAgICovIFxuICBTdGVwcGVyLnByb3RvdHlwZS5zdG9wX2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAvLyBPcHRpb25hbCwgc29tZSBzdGVwcGVycyBtaWdodCBub3QgYmUgYWRhcHRpdmUuICovIFxuICB9O1xuICBcbiAgLyoqXG4gICAqIFJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5nIGluZm8gcmVnYXJkaW5nIHRoZSBzdGVwcGVyLlxuICAgKi8gXG4gIFN0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbigpIHtcbiAgICAvLyBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGluZm8gYWJvdXQgdGhlIHN0YXRlIG9mIHRoZSBzdGVwcGVyLlxuICAgIHJldHVybiB7fTtcbiAgfTtcbiAgXG4gIFxuICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfVxuICAgKiBDb25zdHJ1Y3RvciBmb3IgYW4gb2JqZWN0IHRoYXQgaW1wbGVtZW50cyB0aGUgbWV0cm9wb2xpcyBzdGVwIGluXG4gICAqIHRoZSBBZGFwdGl2ZSBNZXRyb3BvbGlzLVdpdGhpbi1HaWJicyBhbGdvcml0aG0gaW4gXCJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DXCJcbiAgICogYnkgUm9iZXJ0cyBhbmQgUm9zZW50aGFsICgyMDA4KS5cbiAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIHBhcmFtZXRlciBkZWZpbml0aW9uLlxuICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLlxuICAgKiBAcGFyYW0gZ2VuZXJhdGVfcHJvcG9zYWwgLSBhIGZ1bmN0aW9uIHJldHVybmluZyBhIHByb3Bvc2FsIChhcyBhIG51bWJlcilcbiAgICogd2l0aCBzaWduYXR1cmUgZnVuY3Rpb24ocGFyYW1fc3RhdGUsIGxvZ19zY2FsZSkgd2hlcmUgcGFyYW1fc3RhdGUgaXMgYVxuICAgKiBudW1iZXIgYW5kIGxvZ19zY2FsZSBkZWZpbmVzIHRoZSBzY2FsZSBvZiB0aGUgcHJvcG9zYWwgc29tZWhvdy5cbiAgKi9cbiAgdmFyIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIGdlbmVyYXRlX3Byb3Bvc2FsKSB7XG4gICAgU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KTtcbiAgICBcbiAgICB2YXIgcGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7XG4gICAgaWYocGFyYW1fbmFtZXMubGVuZ3RoICAhPSAxKSB7XG4gICAgICB0aHJvdyBcIk9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIGNhbiBvbmx5IGhhbmRsZSBvbmUgcGFyYW1ldGVyLlwiO1xuICAgIH1cbiAgICB0aGlzLnBhcmFtX25hbWUgPSBwYXJhbV9uYW1lc1swXTtcbiAgICB2YXIgcGFyYW0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVdO1xuICAgIGlmKCFhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHtcbiAgICAgIHRocm93IFwiT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgY2FuIG9ubHkgaGFuZGxlIG9uZSBvbmUtZGltZW5zaW9uYWwgcGFyYW1ldGVyLlwiO1xuICAgIH1cbiAgICB0aGlzLmxvd2VyID0gcGFyYW0ubG93ZXI7XG4gICAgdGhpcy51cHBlciA9IHBhcmFtLnVwcGVyO1xuICAgIFxuICAgIHRoaXMucHJvcF9sb2dfc2NhbGUgICAgID0gZ2V0X29wdGlvbihcInByb3BfbG9nX3NjYWxlXCIsIG9wdGlvbnMsIDApO1xuICAgIHRoaXMuYmF0Y2hfc2l6ZSAgICAgICAgID0gZ2V0X29wdGlvbihcImJhdGNoX3NpemVcIiwgb3B0aW9ucywgNTApO1xuICAgIHRoaXMubWF4X2FkYXB0YXRpb24gICAgID0gZ2V0X29wdGlvbihcIm1heF9hZGFwdGF0aW9uXCIsIG9wdGlvbnMsIDAuMzMpO1xuICAgIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uID0gZ2V0X29wdGlvbihcImluaXRpYWxfYWRhcHRhdGlvblwiLCBvcHRpb25zLCAxLjApO1xuICAgIHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlID0gZ2V0X29wdGlvbihcInRhcmdldF9hY2NlcHRfcmF0ZVwiLCBvcHRpb25zLCAwLjQ0KTtcbiAgICB0aGlzLmlzX2FkYXB0aW5nICAgICAgICA9IGdldF9vcHRpb24oXCJpc19hZGFwdGluZ1wiLCBvcHRpb25zLCB0cnVlKTtcbiAgICBcbiAgICB0aGlzLmdlbmVyYXRlX3Byb3Bvc2FsID0gZ2VuZXJhdGVfcHJvcG9zYWw7XG4gICAgXG4gICAgdGhpcy5hY2NlcHRhbmNlX2NvdW50ID0gMDtcbiAgICB0aGlzLmJhdGNoX2NvdW50ID0gMDtcbiAgICB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24gPSAwOyAgXG4gIH07XG4gIFxuICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0ZXBwZXIucHJvdG90eXBlKTsgXG4gIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyO1xuICBcbiAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXJhbV9zdGF0ZSA9IHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXTtcbiAgICAgIHZhciBwYXJhbV9wcm9wb3NhbCA9IHRoaXMuZ2VuZXJhdGVfcHJvcG9zYWwocGFyYW1fc3RhdGUsIHRoaXMucHJvcF9sb2dfc2NhbGUpO1xuICAgICAgaWYocGFyYW1fcHJvcG9zYWwgPCB0aGlzLmxvd2VyIHx8IHBhcmFtX3Byb3Bvc2FsID4gdGhpcy51cHBlcikge1xuICAgICAgICAvLyBPdXRzaWRlIG9mIGxpbWl0cyBvZiB0aGUgcGFyYW1ldGVyLCByZWplY3QgdGhlIHByb3Bvc2FsIFxuICAgICAgICAvLyBhbmQgc3RheSBhdCB0aGUgY3VycmVudCBzdGF0ZS5cbiAgICAgIH0gZWxzZSB7IC8vIG1ha2UgYSBNZXRyb3BvbGlzIHN0ZXBcbiAgICAgICAgdmFyIGN1cnJfbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7XG4gICAgICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IHBhcmFtX3Byb3Bvc2FsO1xuICAgICAgICB2YXIgcHJvcF9sb2dfZGVucyA9IHRoaXMubG9nX3Bvc3QoKTtcbiAgICAgICAgdmFyIGFjY2VwdF9wcm9iID0gTWF0aC5leHAocHJvcF9sb2dfZGVucyAtIGN1cnJfbG9nX2RlbnMpO1xuICAgICAgICBpZihhY2NlcHRfcHJvYiA+IE1hdGgucmFuZG9tKCkpIHtcbiAgICAgICAgICAvLyBXZSBkbyBub3RoaW5nIGFzIHRoZSBzdGF0ZSBvZiBwYXJhbSBoYXMgYWxyZWFkeSBiZWVuIGNoYW5nZWQgdG8gdGhlIHByb3Bvc2FsXG4gICAgICAgICAgaWYodGhpcy5pc19hZGFwdGluZykgdGhpcy5hY2NlcHRhbmNlX2NvdW50KysgO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHJldmVydCBzdGF0ZSBiYWNrIHRvIHRoZSBvbGQgc3RhdGUgb2YgcGFyYW1cbiAgICAgICAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSBwYXJhbV9zdGF0ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYodGhpcy5pc19hZGFwdGluZykge1xuICAgICAgICB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24gKys7XG4gICAgICAgIGlmKHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiA+PSB0aGlzLmJhdGNoX3NpemUpIHsgLy8gdGhlbiBhZGFwdFxuICAgICAgICAgIHRoaXMuYmF0Y2hfY291bnQgKys7XG4gICAgICAgICAgdmFyIGxvZ19zZF9hZGp1c3RtZW50ID0gXG4gICAgICAgICAgICBNYXRoLm1pbih0aGlzLm1heF9hZGFwdGF0aW9uLCBcbiAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uIC8gTWF0aC5zcXJ0KHRoaXMuYmF0Y2hfY291bnQpKTtcbiAgICAgICAgICBpZih0aGlzLmFjY2VwdGFuY2VfY291bnQgLyB0aGlzLmJhdGNoX3NpemUgPiB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wX2xvZ19zY2FsZSArPSBsb2dfc2RfYWRqdXN0bWVudDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcm9wX2xvZ19zY2FsZSAtPSBsb2dfc2RfYWRqdXN0bWVudDtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5hY2NlcHRhbmNlX2NvdW50ID0gMDtcbiAgICAgICAgICB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24gPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdO1xuICB9O1xuICBcbiAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmlzX2FkYXB0aW5nID0gdHJ1ZTtcbiAgfTtcbiAgXG4gIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdG9wX2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmlzX2FkYXB0aW5nID0gZmFsc2U7XG4gIH07XG4gIFxuICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBwcm9wX2xvZ19zY2FsZTogdGhpcy5wcm9wX2xvZ19zY2FsZSxcbiAgICAgIGlzX2FkYXB0aW5nOiB0aGlzLmlzX2FkYXB0aW5nLFxuICAgICAgYWNjZXB0YW5jZV9jb3VudDogdGhpcy5hY2NlcHRhbmNlX2NvdW50LFxuICAgICAgaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbjogdGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uLFxuICAgICAgYmF0Y2hfY291bnQ6IHRoaXMuYmF0Y2hfY291bnRcbiAgICB9O1xuICB9O1xuICBcbiAgXG4gIC8qKlxuICAgKiBGdW5jdGlvbiByZXR1cm5pbmcgYSBOb3JtYWwgcHJvcG9zYWwuXG4gICAqL1xuICB2YXIgbm9ybWFsX3Byb3Bvc2FsID0gZnVuY3Rpb24ocGFyYW1fc3RhdGUsIHByb3BfbG9nX3NjYWxlKSB7XG4gICAgcmV0dXJuIHJub3JtKHBhcmFtX3N0YXRlICwgTWF0aC5leHAocHJvcF9sb2dfc2NhbGUpKTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGF1Z21lbnRzIHtPbmVkaW1NZXRyb3BvbGlzU3RlcHBlcn1cbiAgICogQSBcInN1YmNsYXNzXCIgb2YgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgbWFraW5nIGNvbnRpbm91cyBOb3JtYWwgcHJvcG9zYWxzLlxuICAgKi9cbiAgdmFyIFJlYWxNZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7XG4gICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgbm9ybWFsX3Byb3Bvc2FsKTtcbiAgfTtcbiAgXG4gIFJlYWxNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBSZWFsTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUmVhbE1ldHJvcG9saXNTdGVwcGVyO1xuICBcbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHJldHVybmluZyBhIGRpc2NyZXRpemVkIE5vcm1hbCBwcm9wb3NhbC5cbiAgICovXG4gIHZhciBkaXNjcmV0ZV9ub3JtYWxfcHJvcG9zYWwgPSBmdW5jdGlvbihwYXJhbV9zdGF0ZSwgcHJvcF9sb2dfc2NhbGUpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChybm9ybShwYXJhbV9zdGF0ZSAsIE1hdGguZXhwKHByb3BfbG9nX3NjYWxlKSkpO1xuICB9O1xuICBcbiAgICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBhdWdtZW50cyB7T25lZGltTWV0cm9wb2xpc1N0ZXBwZXJ9XG4gICAqIEEgXCJzdWJjbGFzc1wiIG9mIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBkaXNjcmV0aXplZCBOb3JtYWwgcHJvcG9zYWxzLlxuICAgKi9cbiAgdmFyIEludE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHtcbiAgICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBkaXNjcmV0ZV9ub3JtYWxfcHJvcG9zYWwpO1xuICB9O1xuICBcbiAgSW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgSW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSW50TWV0cm9wb2xpc1N0ZXBwZXI7XG4gIFxuICBcbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn1cbiAgICogQ29uc3RydWN0b3IgZm9yIGFuIG9iamVjdCB0aGF0IGltcGxlbWVudHMgdGhlIG1ldHJvcG9saXMgc3RlcCBpblxuICAgKiB0aGUgQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluIFwiRXhhbXBsZXMgb2YgQWRhcHRpdmUgTUNNQ1wiXG4gICAqIGJ5IFJvYmVydHMgYW5kIFJvc2VudGhhbCAoMjAwOCkgZm9yIHBvc3NpYmx5IG11bHRpZGltZW5zaW9uYWwgYXJyYXlzLiBUaGF0XG4gICAqIGlzLCBpbnN0ZWFkIG9mIGp1c3QgdGFraW5nIGEgc3RlcCBmb3IgYSBvbmUtZGltZW5zaW9uYWwgcGFyYW1ldGVyIGxpa2UgXG4gICAqIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLCB0aGlzIFN0ZXBwZXIgaXMgcmVzcG9uc2libGUgZm9yIHRha2luZyBzdGVwcyBcbiAgICogZm9yIGEgbXVsdGlkaW1lbnNpb25hbCBhcnJheS4gSXQncyBzdGlsbCBwcmV0dHkgZHVtYiBhbmQganVzdCB0YWtlc1xuICAgKiBvbmUtZGltZW5zaW9uYWwgc3RlcHMgZm9yIGVhY2ggcGFyYW1ldGVyIGNvbXBvbmVudCwgdGhvdWdoLlxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBzaW5nbGUgcGFyYW1ldGVyIGRlZmluaXRpb24gZm9yIGEgXG4gICAqICAgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIuXG4gICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy5cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIFxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuXG4gICAqIEBwYXJhbSBTdWJTdGVwcGVyIC0gYSBjb25zdHJ1Y3RvciBmb3IgdGhlIHR5cGUgb2Ygb25lIGRpbWVuc2lvbmFsIFN0ZXBwZXIgdG8gYXBwbHkgb25cbiAgICogICBhbGwgdGhlIGNvbXBvbmVudHMgb2YgdGhlIG11bHRpZGltZW5zaW9uYWwgcGFyYW1ldGVyLlxuICAqL1xuICB2YXIgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBTdWJTdGVwcGVyKSB7XG4gICAgU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KTtcbiAgICBcbiAgICB2YXIgcGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7XG4gICAgaWYocGFyYW1fbmFtZXMubGVuZ3RoICAhPSAxKSB7XG4gICAgICB0aHJvdyBcIk11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgY2FuJ3QgaGFuZGxlIG1vcmUgdGhhbiBvbmUgcGFyYW1ldGVyLlwiO1xuICAgIH1cbiAgICB0aGlzLnBhcmFtX25hbWUgPSBwYXJhbV9uYW1lc1swXTtcbiAgICB2YXIgcGFyYW0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVdO1xuICAgIHRoaXMubG93ZXIgPSBwYXJhbS5sb3dlcjtcbiAgICB0aGlzLnVwcGVyID0gcGFyYW0udXBwZXI7XG4gICAgdGhpcy5kaW0gPSBwYXJhbS5kaW07XG4gIFxuICAgIHRoaXMucHJvcF9sb2dfc2NhbGUgICAgID0gZ2V0X211bHRpZGltX29wdGlvbihcInByb3BfbG9nX3NjYWxlXCIsIG9wdGlvbnMsIHRoaXMuZGltLCAwKTtcbiAgICB0aGlzLmJhdGNoX3NpemUgICAgICAgICA9IGdldF9tdWx0aWRpbV9vcHRpb24oXCJiYXRjaF9zaXplXCIsIG9wdGlvbnMsIHRoaXMuZGltLCA1MCk7XG4gICAgdGhpcy5tYXhfYWRhcHRhdGlvbiAgICAgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKFwibWF4X2FkYXB0YXRpb25cIiwgb3B0aW9ucywgdGhpcy5kaW0sIDAuMzMpO1xuICAgIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uID0gZ2V0X211bHRpZGltX29wdGlvbihcImluaXRpYWxfYWRhcHRhdGlvblwiLCBvcHRpb25zLCB0aGlzLmRpbSwgMS4wKTtcbiAgICB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSA9IGdldF9tdWx0aWRpbV9vcHRpb24oXCJ0YXJnZXRfYWNjZXB0X3JhdGVcIiwgb3B0aW9ucywgdGhpcy5kaW0sIDAuNDQpO1xuICAgIHRoaXMuaXNfYWRhcHRpbmcgICAgICAgID0gZ2V0X211bHRpZGltX29wdGlvbihcImlzX2FkYXB0aW5nXCIsIG9wdGlvbnMsIHRoaXMuZGltLCB0cnVlKTtcbiAgICBcbiAgICAvLyBUaGlzIGhhY2sgYmVsb3cgaXMgYSByZWN1cnNpdmUgZnVuY3Rpb24gdGhhdCBjcmVhdGVzIGFuIGFycmF5IG9mIFxuICAgIC8vIG9uZSBkaW1lbnNpb25hbCBzdGVwcGVycyBhY2NvcmRpbmcgdG8gZGltLlxuICAgIHZhciBjcmVhdGVfc3Vic3RlcHBlcnMgPSBcbiAgICAgIGZ1bmN0aW9uKGRpbSwgc3Vic3RhdGUsIGxvZ19wb3N0LCBwcm9wX2xvZ19zY2FsZSwgYmF0Y2hfc2l6ZSwgbWF4X2FkYXB0YXRpb24sIGluaXRpYWxfYWRhcHRhdGlvbiwgdGFyZ2V0X2FjY2VwdF9yYXRlLCBpc19hZGFwdGluZykge1xuICAgICAgdmFyIHN1YnN0ZXBwZXJzID0gW107XG4gICAgICBpZihkaW0ubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBkaW1bMF07IGkrKykge1xuICAgICAgICAgIHZhciBzdWJvcHRpb25zID0ge3Byb3BfbG9nX3NjYWxlOiBwcm9wX2xvZ19zY2FsZVtpXSwgYmF0Y2hfc2l6ZTogYmF0Y2hfc2l6ZVtpXSxcbiAgICAgICAgICAgIG1heF9hZGFwdGF0aW9uOiBtYXhfYWRhcHRhdGlvbltpXSwgaW5pdGlhbF9hZGFwdGF0aW9uOiBpbml0aWFsX2FkYXB0YXRpb25baV0sXG4gICAgICAgICAgICB0YXJnZXRfYWNjZXB0X3JhdGU6IHRhcmdldF9hY2NlcHRfcmF0ZVtpXSwgaXNfYWRhcHRpbmc6IGlzX2FkYXB0aW5nW2ldfTtcbiAgICAgICAgICAgIHZhciBzdWJwYXJhbSA9IHt9O1xuICAgICAgICAgICAgc3VicGFyYW1baV0gPSBkZWVwX2Nsb25lKHBhcmFtKTtcbiAgICAgICAgICAgIHN1YnBhcmFtW2ldLmRpbSA9IFsxXTsgLy8gQXMgdGhpcyBzaG91bGQgbm93IGJlIGEgb25lLWRpbSBwYXJhbWV0ZXJcbiAgICAgICAgICAgIGRlbGV0ZSBzdWJwYXJhbVtpXS5pbml0OyAvLyBBcyBpdCBzb3VsZCBub3QgYmUgbmVlZGVkXG4gICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBuZXcgU3ViU3RlcHBlcihzdWJwYXJhbSwgc3Vic3RhdGUsIGxvZ19wb3N0LCBzdWJvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7XG4gICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBjcmVhdGVfc3Vic3RlcHBlcnMoZGltLnNsaWNlKDEpLCBzdWJzdGF0ZVtpXSwgbG9nX3Bvc3QsIHByb3BfbG9nX3NjYWxlW2ldLCBcbiAgICAgICAgICAgIGJhdGNoX3NpemVbaV0sIG1heF9hZGFwdGF0aW9uW2ldLCBpbml0aWFsX2FkYXB0YXRpb25baV0sIHRhcmdldF9hY2NlcHRfcmF0ZVtpXSwgaXNfYWRhcHRpbmdbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gc3Vic3RlcHBlcnM7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnN1YnN0ZXBwZXJzID0gY3JlYXRlX3N1YnN0ZXBwZXJzKHRoaXMuZGltLCB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0sIHRoaXMubG9nX3Bvc3QsXG4gICAgICB0aGlzLnByb3BfbG9nX3NjYWxlLCB0aGlzLmJhdGNoX3NpemUsIHRoaXMubWF4X2FkYXB0YXRpb24sIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uLFxuICAgICAgdGhpcy50YXJnZXRfYWNjZXB0X3JhdGUsIHRoaXMuaXNfYWRhcHRpbmcpO1xuICAgIFxuICB9O1xuICBcbiAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0ZXBwZXIucHJvdG90eXBlKTsgXG4gIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjtcbiAgXG4gIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBHbyB0aHJvdWdoIHRoZSBzdWJzdGVwcGVycyBpbiBhIHJhbmRvbSBvcmRlciBhbmQgY2FsbCBzdGVwKCkgb24gdGhlbS5cbiAgICByZXR1cm4gbmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbihzdWJzdGVwcGVyKSB7cmV0dXJuIHN1YnN0ZXBwZXIuc3RlcCgpOyB9KTtcbiAgfTtcbiAgXG4gIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICBuZXN0ZWRfYXJyYXlfYXBwbHkodGhpcy5zdWJzdGVwcGVycywgZnVuY3Rpb24oc3Vic3RlcHBlcikge3N1YnN0ZXBwZXIuc3RhcnRfYWRhcHRhdGlvbigpOyB9KTtcbiAgfTtcbiAgXG4gIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIG5lc3RlZF9hcnJheV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbihzdWJzdGVwcGVyKSB7c3Vic3RlcHBlci5zdG9wX2FkYXB0YXRpb24oKTsgfSk7XG4gIH07XG4gIFxuICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5lc3RlZF9hcnJheV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbihzdWJzdGVwcGVyKSB7XG4gICAgICByZXR1cm4gc3Vic3RlcHBlci5pbmZvKCk7IFxuICAgIH0pO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAYXVnbWVudHMge011bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXJ9XG4gICAqIEEgXCJzdWJjbGFzc1wiIG9mIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgbWFraW5nIGNvbnRpbm91cyBOb3JtYWwgcHJvcG9zYWxzLlxuICAgKi9cbiAgdmFyIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHtcbiAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIFJlYWxNZXRyb3BvbGlzU3RlcHBlcik7XG4gIH07XG4gIFxuICBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsgXG4gIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyO1xuXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGF1Z21lbnRzIHtNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyfVxuICAgKiBBIFwic3ViY2xhc3NcIiBvZiBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBkaXNjcmV0aXplZCBOb3JtYWwgcHJvcG9zYWxzLlxuICAgKi8gICAgXG4gIHZhciBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHtcbiAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIEludE1ldHJvcG9saXNTdGVwcGVyKTtcbiAgfTtcbiAgXG4gIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7XG4gIFxuICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfVxuICAgKiBDb25zdHJ1Y3RvciBmb3IgYW4gb2JqZWN0IHRoYXQgaW1wbGVtZW50cyBhIHN0ZXAgZm9yIGEgYmluYXJ5IHBhcmFtZXRlci5cbiAgICogVGhpcyBpcyBkb25lIGJ5IGV2YWx1YXRpbmcgdGhlIGxvZyBwb3N0ZXJpb3IgZm9yIGJvdGggc3RhdGVzIG9mIHRoZVxuICAgKiBwYXJhbWV0ZXIgYW5kIHRoZW4gc2VsZWN0aW5nIGEgc3RhdGUgcmFuZG9tbHkgd2l0aCBwcm9iYWJpbGl0eSByZWxhdGl2ZSBcbiAgICogdG8gdGhlIHBvc3RlcmlvciBvZiBlYWNoIHN0YXRlLlxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBzaW5nbGUgcGFyYW1ldGVyIGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy5cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIFxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuXG4gICovXG4gIHZhciBCaW5hcnlTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHtcbiAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpO1xuICAgIHZhciBwYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTtcbiAgICBpZihwYXJhbV9uYW1lcy5sZW5ndGggID09IDEpIHtcbiAgICAgIHRoaXMucGFyYW1fbmFtZSA9IHBhcmFtX25hbWVzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBcIkJpbmFyeVN0ZXBwZXIgY2FuJ3QgaGFuZGxlIG1vcmUgdGhhbiBvbmUgcGFyYW1ldGVyLlwiO1xuICAgIH1cbiAgfTtcbiAgXG4gIEJpbmFyeVN0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBCaW5hcnlTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEJpbmFyeVN0ZXBwZXI7XG4gIFxuICBCaW5hcnlTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMDtcbiAgICB2YXIgemVyb19sb2dfZGVucyA9IHRoaXMubG9nX3Bvc3QoKTtcbiAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSAxO1xuICAgIHZhciBvbmVfbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7XG4gICAgdmFyIG1heF9sb2dfZGVucyA9IE1hdGgubWF4KHplcm9fbG9nX2RlbnMsIG9uZV9sb2dfZGVucyk7XG4gICAgemVyb19sb2dfZGVucyAtPSBtYXhfbG9nX2RlbnM7XG4gICAgb25lX2xvZ19kZW5zIC09IG1heF9sb2dfZGVucztcbiAgICB2YXIgemVyb19wcm9iID0gTWF0aC5leHAoemVyb19sb2dfZGVucyAtIE1hdGgubG9nKCBNYXRoLmV4cCh6ZXJvX2xvZ19kZW5zKSArIE1hdGguZXhwKG9uZV9sb2dfZGVucykgKSApO1xuICAgIGlmKE1hdGgucmFuZG9tKCkgPCB6ZXJvX3Byb2IpIHtcbiAgICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IDA7XG4gICAgICByZXR1cm4gMDtcbiAgICB9IC8vIGVsc2Uga2VlcCB0aGUgcGFyYW0gYXQgMSAuXG4gICAgcmV0dXJuIDE7XG4gIH07XG4gIFxuICAgIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGltcGxlbWVudHMge1N0ZXBwZXJ9XG4gICAqIEp1c3QgbGlrZSBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIHRoaXMgU3RlcHBlciB0YWtlcyBhIHN0ZXBzIGZvclxuICAgKiBhIG11bHRpZGltZW5zaW9uYWwgcGFyYW1ldGVyIGJ5IHVwZGF0aW5nIGVhY2ggY29tcG9uZW50IGluIHR1cm4uIFRoZSBkaWZmZXJlbmNlXG4gICAqIGlzIHRoYXQgdGhpcyBzdGVwcGVyIHdvcmtzIG9uIGJpbmFyeSBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBzaW5nbGUgcGFyYW1ldGVyIGRlZmluaXRpb24gZm9yIGEgXG4gICAqICAgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIuXG4gICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy5cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIFxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuXG4gICovXG4gIHZhciBCaW5hcnlDb21wb25lbnRTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHtcbiAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpO1xuICAgIFxuICAgIHZhciBwYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTtcbiAgICBpZihwYXJhbV9uYW1lcy5sZW5ndGggID09IDEpIHtcbiAgICAgIHRoaXMucGFyYW1fbmFtZSA9IHBhcmFtX25hbWVzWzBdO1xuICAgICAgdmFyIHBhcmFtID0gdGhpcy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lXTtcbiAgICAgIHRoaXMuZGltID0gcGFyYW0uZGltO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBcIkJpbmFyeUNvbXBvbmVudFN0ZXBwZXIgY2FuJ3QgaGFuZGxlIG1vcmUgdGhhbiBvbmUgcGFyYW1ldGVyLlwiO1xuICAgIH1cbiAgICBcbiAgICB2YXIgY3JlYXRlX3N1YnN0ZXBwZXJzID0gXG4gICAgICBmdW5jdGlvbihkaW0sIHN1YnN0YXRlLCBsb2dfcG9zdCkge1xuICAgICAgdmFyIHN1YnN0ZXBwZXJzID0gW107XG4gICAgICB2YXIgaTtcbiAgICAgIGlmKGRpbS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgICB2YXIgc3VicGFyYW1zID0ge307XG4gICAgICAgICAgc3VicGFyYW1zW2ldID0gcGFyYW07XG4gICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBuZXcgQmluYXJ5U3RlcHBlcihzdWJwYXJhbXMsIHN1YnN0YXRlLCBsb2dfcG9zdCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvcihpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7XG4gICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBjcmVhdGVfc3Vic3RlcHBlcnMoZGltLnNsaWNlKDEpLCBzdWJzdGF0ZVtpXSwgbG9nX3Bvc3QpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gc3Vic3RlcHBlcnM7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnN1YnN0ZXBwZXJzID0gY3JlYXRlX3N1YnN0ZXBwZXJzKHRoaXMuZGltLCB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0sIHRoaXMubG9nX3Bvc3QpO1xuICB9O1xuICBcbiAgQmluYXJ5Q29tcG9uZW50U3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0ZXBwZXIucHJvdG90eXBlKTsgXG4gIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQmluYXJ5Q29tcG9uZW50U3RlcHBlcjtcbiAgXG4gIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBHbyB0aHJvdWdoIHRoZSBzdWJzdGVwcGVycyBpbiBhIHJhbmRvbSBvcmRlciBhbmQgY2FsbCBzdGVwKCkgb24gdGhlbS5cbiAgICByZXR1cm4gbmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbihzdWJzdGVwcGVyKSB7cmV0dXJuIHN1YnN0ZXBwZXIuc3RlcCgpOyB9KTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGltcGxlbWVudHMge1N0ZXBwZXJ9XG4gICAqIFRoaXMgc3RlcHBlciBjYW4gYmUgcmVzcG9uc2libGUgZm9yIHRha2luZyBhIHN0ZXAgZm9yIG9uZSBvciBtb3JlIHBhcmFtZXRlcnMuXG4gICAqIEZvciByZWFsIGFuZCBpbnQgcGFyYW1ldGVycyBpdCB0YWtlcyBNZXRyb3BvbGlzIHdpdGhpbiBHaWJicyBzdGVwcywgYW5kIGZvciBcbiAgICogYmluYXJ5IHBhcmFtZXRlcnMgaXQgZG9lcyBldmFsdWF0ZXMgdGhlIHBvc3RlcmlvciBmb3IgYm90aCBwYXJhbXRlciB2YWx1ZXMgYW5kXG4gICAqIHJhbmRvbWx5IGNoYW5nZXMgdG8gYSBjZXJ0YWluIHZhbHVlIHByb3BvcnRpb25hbGx5IHRvIHRoYXQgdmFsdWUncyBwb3N0ZXJpb3JcbiAgICogKHRoaXMgaXMgYWxzbyBkb25lIGZvciBlYWNoIHBhcmFtZXRlciwgc28gYWxzbyBhICogd2l0aGluIEdpYmJzIGFwcHJvYWNoKS5cbiAgICogVGhpcyBzdGVwcGVyIGlzIGFsc28gYWRhcHRpdmUgYW5kIGNhbiBiZSBlZmZpY2llbnQgd2hlbiB0aGUgbnVtYmVyIG9mIHBhcmFtZXRlcnNcbiAgICogYXJlIG5vdCB0b28gaGlnaCBhbmQgdGhlIGNvcnJlbGF0aW9ucyBiZXR3ZWVuIHBhcmFtZXRlcnMgYXJlIGxvdy5cbiAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgb25lIG9yIG1vcmUgcGFyYW1ldGVyIGRlZmluaXRpb25zXG4gICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy5cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIFxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuXG4gICovXG4gIHZhciBBbXdnU3RlcHBlciA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7XG4gICAgU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KTtcbiAgICB0aGlzLnBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpO1xuICAgIHRoaXMuc3Vic3RlcHBlcnMgPSBbXTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXJhbV9uYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHBhcmFtID0gcGFyYW1zW3RoaXMucGFyYW1fbmFtZXNbaV1dO1xuICAgICAgdmFyIFNlbGVjdFN0ZXBwZXI7XG4gICAgICBzd2l0Y2ggKHBhcmFtLnR5cGUpIHtcbiAgICAgICAgY2FzZSBcInJlYWxcIjpcbiAgICAgICAgICBpZihhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHtcbiAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBSZWFsTWV0cm9wb2xpc1N0ZXBwZXI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJpbnRcIjpcbiAgICAgICAgICBpZihhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHtcbiAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBJbnRNZXRyb3BvbGlzU3RlcHBlcjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiYmluYXJ5XCI6XG4gICAgICAgICAgaWYoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7XG4gICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gQmluYXJ5U3RlcHBlcjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IEJpbmFyeUNvbXBvbmVudFN0ZXBwZXI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IFwiQW13Z1N0ZXBwZXIgY2FuJ3QgaGFuZGxlIHBhcmFtZXRlciBcIiArIHRoaXMucGFyYW1fbmFtZXNbaV0gICtcIiB3aXRoIHR5cGUgXCIgKyBwYXJhbS50eXBlOyBcbiAgICAgIH1cbiAgICAgIHZhciBwYXJhbV9vYmplY3Rfd3JhcCA9IHt9O1xuICAgICAgcGFyYW1fb2JqZWN0X3dyYXBbdGhpcy5wYXJhbV9uYW1lc1tpXV0gPSBwYXJhbTtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgdmFyIHBhcmFtX29wdGlvbnMgPSBvcHRpb25zLnBhcmFtcyAmJiBvcHRpb25zLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVzW2ldXSB8fCB7fTtcbiAgICAgIHBhcmFtX29wdGlvbnMucHJvcF9sb2dfc2NhbGUgICAgID0gcGFyYW1fb3B0aW9ucy5wcm9wX2xvZ19zY2FsZSAgICAgfHwgb3B0aW9ucy5wcm9wX2xvZ19zY2FsZTsgXG4gICAgICBwYXJhbV9vcHRpb25zLmJhdGNoX3NpemUgICAgICAgICA9IHBhcmFtX29wdGlvbnMuYmF0Y2hfc2l6ZSAgICAgICAgIHx8IG9wdGlvbnMuYmF0Y2hfc2l6ZTsgXG4gICAgICBwYXJhbV9vcHRpb25zLm1heF9hZGFwdGF0aW9uICAgICA9IHBhcmFtX29wdGlvbnMubWF4X2FkYXB0YXRpb24gICAgIHx8IG9wdGlvbnMubWF4X2FkYXB0YXRpb247XG4gICAgICBwYXJhbV9vcHRpb25zLmluaXRpYWxfYWRhcHRhdGlvbiA9IHBhcmFtX29wdGlvbnMuaW5pdGlhbF9hZGFwdGF0aW9uIHx8IG9wdGlvbnMuaW5pdGlhbF9hZGFwdGF0aW9uO1xuICAgICAgcGFyYW1fb3B0aW9ucy50YXJnZXRfYWNjZXB0X3JhdGUgPSBwYXJhbV9vcHRpb25zLnRhcmdldF9hY2NlcHRfcmF0ZSB8fCBvcHRpb25zLnRhcmdldF9hY2NlcHRfcmF0ZTsgXG4gICAgICBwYXJhbV9vcHRpb25zLmlzX2FkYXB0aW5nICAgICAgICA9IHBhcmFtX29wdGlvbnMuaXNfYWRhcHRpbmcgICAgICAgIHx8IG9wdGlvbnMuaXNfYWRhcHRpbmc7IFxuICAgICAgdGhpcy5zdWJzdGVwcGVyc1tpXSA9IG5ldyBTZWxlY3RTdGVwcGVyKHBhcmFtX29iamVjdF93cmFwLCBzdGF0ZSwgbG9nX3Bvc3QsIHBhcmFtX29wdGlvbnMpO1xuICAgIH1cbiAgfTtcbiAgXG4gIEFtd2dTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQW13Z1N0ZXBwZXI7XG4gIFxuICBBbXdnU3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgIHNodWZmbGVfYXJyYXkodGhpcy5zdWJzdGVwcGVycyk7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0uc3RlcCgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgfTtcbiAgXG4gIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0uc3RhcnRfYWRhcHRhdGlvbigpO1xuICAgIH1cbiAgfTtcbiAgXG4gIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5zdG9wX2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzdGVwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5zdWJzdGVwcGVyc1tpXS5zdG9wX2FkYXB0YXRpb24oKTtcbiAgICB9IFxuICB9O1xuICBcbiAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW5mbyA9IHt9O1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpbmZvW3RoaXMucGFyYW1fbmFtZXNbaV1dID0gdGhpcy5zdWJzdGVwcGVyc1tpXS5pbmZvKCk7XG4gICAgfVxuICAgIHJldHVybiBpbmZvO1xuICB9O1xuICBcbiAgXG4gIFxuICAvLy8vLy8vLy8vLyBTYW1wbGVyIEZ1bmN0aW9ucyAvLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgXG4gIFxuICAgLyoqXG4gICAqIEBpbnRlcmZhY2VcbiAgICogV2hpbGUgeW91IGNvdWxkIGZpdCBhIG1vZGVsIGJ5IHBhc3RpbmcgdG9nZXRoZXIgU3RlcHBlcnMsIGFcbiAgLy8gU2FtcGxlciBpcyBoZXJlIGlzIGEgY29udmVuaWVuY2UgY2xhc3Mgd2hlcmUgYW4gaW5zdGFuY2Ugb2YgU2FtcGxlclxuICAvLyBzZXRzIHVwIHRoZSBTdGVwcGVycywgY2hlY2tzIHRoZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbixcbiAgLy8gYW5kIG1hbmFnZXMgdGhlIHNhbXBsaW5nLiBUaGlzIGhlcmUgZGVmaW5lcyB0aGUgU2FtcGxlciBcImludGVyZmFjZVwiLlxuICAgKiBAaW50ZXJmYWNlXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMsIGZvciBleGFtcGxlOlxuICAgKiAgIHtcIm11XCI6IHtcInR5cGVcIjogXCJyZWFsXCJ9LCBcInNpZ21hXCI6IHtcInR5cGVcIjogXCJyZWFsXCIsIFwibG93ZXJcIiA9IDB9fVxuICAgKiAgIFRoZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMgZG9lc24ndCBoYXZlIHRvIGJlIFwiY29tcGxldGVcIiBhbmQgcHJvcGVydGllc1xuICAgKiAgIGxlZnQgb3V0IChsaWtlIGxvd2VyIGFuZCB1cHBlcikgd2lsbCBiZSBmaWxsZWQgaW4gYnkgZGVmYXVsdHMuXG4gICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gd2l0aCBzaWduYXR1cmUgZnVuY3Rpb24oc3RhdGUsIGRhdGEpLiBIZXJlXG4gICAqICAgc3RhdGUgd2lsbCBiZSBhbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzdGF0ZSB3aXRoIGVhY2ggcGFyYW1ldGVyIGFzIGEgXG4gICAqICAga2V5IGFuZCB0aGUgcGFyYW1ldGVyIHZhbHVlcyBhcyBudW1iZXJzIG9yIGFycmF5cy4gRm9yIGV4YW1wbGU6XG4gICAqICAge1wibXVcIjogMywgXCJzaWdtYVwiOiAxLjV9LiBUaGUgZGF0YSBhcmd1bWVudCB3aWxsIGJlIHRoZSBzYW1lIG9iamVjdCBhcyBcbiAgICogICB0aGUgZGF0YSBhcmd1bWVudCBnaXZlbiBiZWxvdy5cbiAgICogQHBhcmFtIGRhdGEgLSBhbiBvYmplY3QgdGhhdCB3aWxsIGJlIHBhc3NlZCBvbiB0byB0aGUgbG9nX3Bvc3QgZnVuY3Rpb25cbiAgICogICB3aGVuIHNhbXBsaW5nLlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHNhbXBsZXIuXG4gICAqL1xuICB2YXIgU2FtcGxlciA9IGZ1bmN0aW9uKHBhcmFtcywgbG9nX3Bvc3QsIGRhdGEsIG9wdGlvbnMpIHtcbiAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIHRoaXMucGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7XG4gICAgXG4gICAgLy8gU2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgaWYgbm90IHBhc3NlZCB0aHJvdWdoIHRoZSBvcHRpb25zIG9iamVjdFxuICAgIHRoaXMucGFyYW1faW5pdF9mdW4gICA9IGdldF9vcHRpb24oXCJwYXJhbV9pbml0X2Z1blwiLCBvcHRpb25zLCBwYXJhbV9pbml0X2ZpeGVkKTtcbiAgICB2YXIgdGhpbm5pbmdfaW50ZXJ2YWwgPSBnZXRfb3B0aW9uKFwidGhpblwiLCBvcHRpb25zLCAxKTtcbiAgICB2YXIgcGFyYW1zX3RvX21vbml0b3IgPSBnZXRfb3B0aW9uKFwibW9uaXRvclwiLCBvcHRpb25zLCBudWxsKTtcbiAgICB0aGlzLnRoaW4odGhpbm5pbmdfaW50ZXJ2YWwpO1xuICAgIHRoaXMubW9uaXRvcihwYXJhbXNfdG9fbW9uaXRvcik7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAvLyBDb21wbGV0aW5nIHRoZSBwYXJhbXMgYW5kIGluaXRpYWxpemluZyB0aGUgc3RhdGUuXG4gICAgdGhpcy5wYXJhbXMgPSBjb21wbGV0ZV9wYXJhbXModGhpcy5wYXJhbXMsIHRoaXMucGFyYW1faW5pdF9mdW4pO1xuICAgIHZhciBzdGF0ZSA9IHt9O1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmFtX25hbWVzLmxlbmd0aDsgaSsrICkge1xuICAgICAgc3RhdGVbdGhpcy5wYXJhbV9uYW1lc1tpXV0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVzW2ldXS5pbml0O1xuICAgIH1cbiAgICB0aGlzLmxvZ19wb3N0ID0gZnVuY3Rpb24oKSB7IFxuICAgICAgcmV0dXJuIGxvZ19wb3N0KHN0YXRlLCBkYXRhKTtcbiAgICB9O1xuICAgIC8vIFJ1bm5pbmcgdGhlIGxvZ19wb3N0IGZ1bmN0aW9uIG9uY2UgaW4gY2FzZSBpdCBmdXJ0aGVyIG1vZGlmaWVzIHRoZSBzdGF0ZVxuICAgIC8vIGZvciBleGFtcGxlIGFkZGluZyBkZXJpdmVkIHF1YW50aXRpZXMuXG4gICAgdGhpcy5sb2dfcG9zdCgpO1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB0aGlzLnN0ZXBwZXJzID0gdGhpcy5jcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSh0aGlzLnBhcmFtcywgdGhpcy5zdGF0ZSwgdGhpcy5sb2dfcG9zdCwgdGhpcy5vcHRpb25zKTtcbiAgfTtcbiAgXG4gIC8qKiBTaG91bGQgcmV0dXJuIGEgdmVjdG9yIG9mIHN0ZXBwZXJzIHRoYXQgd2hlbiBjYWxsZWQgXG4gICAqIHNob3VsZCB0YWtlIGEgc3RlcCBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlLlxuICAgKi9cbiAgU2FtcGxlci5wcm90b3R5cGUuY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUgPSBmdW5jdGlvbihzdGF0ZSwgbG9nX3Bvc3Qpe1xuICAgIHRocm93IFwiRXZlcnkgU2FtcGxlciBuZWVkcyB0byBpbXBsZW1lbnQgY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUoKVwiO1xuICB9O1xuICBcbiAgLyoqIFJldHVybnMgYW4gb2JqZWN0IHdpdGggaW5mbyBhYm91dCB0aGUgc3RhdGUgb2YgdGhlIFNhbXBsZXIuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7c3RhdGU6IHRoaXMuc3RhdGUsIHRoaW46IHRoaXMudGhpbiwgbW9uaXRvcjogdGhpcy5tb25pdG9yLFxuICAgICAgICAgICAgc3RlcHBlcnM6IHRoaXMuc3RlcHBlcnN9O1xuICB9O1xuICBcbiAgLyoqIFRha2VzIGEgc3RlcCBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlLiBSZXR1cm5zIHRoZSBuZXcgc3BhY2VcbiAgICogYnV0IGFsc28gbW9kaWZpZXMgdGhlIHN0YXRlIGluIHBsYWNlLlxuICAgKi8gXG4gIFNhbXBsZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbigpIHtcbiAgICBzaHVmZmxlX2FycmF5KHRoaXMuc3RlcHBlcnMpO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnN0ZXBwZXJzW2ldLnN0ZXAoKTtcbiAgICB9XG4gICAgaWYoT2JqZWN0LmtleXModGhpcy5zdGF0ZSkubGVuZ3RoID4gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpLmxlbmd0aCkge1xuICAgICAgLy8gVGhlIHN0YXRlIGNvbnRhaW5zIGRldml2ZWQgcXVhbnRpdGllcyAobm90IG9ubHkgcGFyYW1ldGVycykgYW5kIHdlXG4gICAgICAvLyBuZWVkIHRvIHJ1biB0aGUgbG9nX3Bvc3Qgb25jZSBtb3JlIGluIG9yZGVyIHRvIHNldCB0aGUgZGVyaXZlZCBxdWFudGl0aWVzXG4gICAgICAvLyBmb3IgdGhlIGZpbmFsIHBhcmFtZXRlciBzdGF0ZVxuICAgICAgdGhpcy5sb2dfcG9zdCgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBUYWtlcyBuX2l0ZXJhdGlvbnMgc3RlcHMgaW4gdGhlIHBhcmFtZXRlciBzcGFjZSBhbmQgcmV0dXJucyB0aGVtXG4gICAqIGFzIGFuIG9iamVjdCBvZiBhcnJheXMgd2l0aCBvbmUgYXJyYXkgcGVyIHBhcmFtZXRlci4gRm9yIGV4YW1wbGU6XG4gICAqIHttdTogWzEsIC0xLCAyLCAzLCAuLi5dLCBzaWdtYTogWzEsIDIsIDIsIDEsIC4uLl19LlxuICAgKiBJZiB0aGluIGlzID4gMSB0aGVuIG5faXRlcmF0aW9ucyAvIHRoaW4gc2FtcGxlcyBhcmUgcmV0dXJuZWQuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUuc2FtcGxlID0gZnVuY3Rpb24obl9pdGVyYXRpb25zKSB7XG4gICAgICAvLyBJbml0aWFsaXppbmcgY3Vycl9zYW1wbGUgd2hlcmUgdGhlIHNhbXBsZSBpcyBnb2luZyB0byBiZSBzYXZlZFxuICAgICAgLy8gYXMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgb25lIGFycmF5IHBlciBwYXJhbWV0ZXIgdG8gYmUgbW9uaXRvcmVkLlxuICAgICAgdmFyIGksIGosIG1vbml0b3JlZF9wYXJhbXM7XG4gICAgICBpZih0aGlzLm1vbml0b3JlZF9wYXJhbXMgPT09IG51bGwpIHtcbiAgICAgICAgbW9uaXRvcmVkX3BhcmFtcyA9IE9iamVjdC5rZXlzKHRoaXMuc3RhdGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbW9uaXRvcmVkX3BhcmFtcyA9IHRoaXMubW9uaXRvcmVkX3BhcmFtcztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdmFyIGN1cnJfc2FtcGxlID0ge307XG4gICAgICBmb3IoaiA9IDA7IGogPCBtb25pdG9yZWRfcGFyYW1zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGN1cnJfc2FtcGxlW21vbml0b3JlZF9wYXJhbXNbal1dID0gW107XG4gICAgICB9XG4gICAgICBcbiAgICAgIGZvcihpID0gMDsgaSA8IG5faXRlcmF0aW9uczsgaSsrKSB7XG4gICAgICAgIGlmKGkgJSB0aGlzLnRoaW5uaW5nX2ludGVydmFsID09PSAwKSB7XG4gICAgICAgICAgZm9yKGogPSAwOyBqIDwgbW9uaXRvcmVkX3BhcmFtcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgdmFyIHBhcmFtID0gbW9uaXRvcmVkX3BhcmFtc1tqXTtcbiAgICAgICAgICAgIGN1cnJfc2FtcGxlW3BhcmFtXS5wdXNoKCBjbG9uZV9wYXJhbV9kcmF3KHRoaXMuc3RhdGVbcGFyYW1dKSApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0ZXAoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjdXJyX3NhbXBsZTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBUYWtlcyBuX2l0ZXJhdGlvbiBzdGVwcyBpbiBwYXJhbWV0ZXIgc3BhY2UgYnV0IHJldHVybnMgbm90aGluZy5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS5idXJuID0gZnVuY3Rpb24obl9pdGVyYXRpb25zKSB7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IG5faXRlcmF0aW9uczsgaSsrKSB7XG4gICAgICB0aGlzLnN0ZXAoKTtcbiAgICB9XG4gIH07XG4gIFxuICAvKipcbiAgICogU2V0cyB3aGF0IHBhcmFtZXRlcnMgc2hvdWxkIGJlIG1vbml0b3JlZCBhbmQgcmV0dXJuZWQgd2hlbiBjYWxsaW5nXG4gICAqIHNhbXBsZS5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS5tb25pdG9yID0gZnVuY3Rpb24ocGFyYW1zX3RvX21vbml0b3IpIHtcbiAgICAgIHRoaXMubW9uaXRvcmVkX3BhcmFtcyA9IHBhcmFtc190b19tb25pdG9yO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFNldHMgdGhlIHRoaW5uaW5nLiBGb3IgZXhhbXBsZSB0aGluID09IDEwIG1lYW5zIHRoYXQgZXZlcnkgMTB0aCBwb3N0ZXJpb3JcbiAgICogZHJhdyB3aWxsIGJlIGtlcHQuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUudGhpbiA9IGZ1bmN0aW9uKHRoaW5uaW5nX2ludGVydmFsKSB7XG4gICAgdGhpcy50aGlubmluZ19pbnRlcnZhbCA9IHRoaW5uaW5nX2ludGVydmFsO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFNldHMgYWRhcHRhdGlvbiBvbiwgaWYgYXBwbGljYWJsZSwgaW4gYWxsIHN0ZXBwZXJzLlxuICAgKi8gXG4gIFNhbXBsZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5zdGVwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5zdGVwcGVyc1tpXS5zdGFydF9hZGFwdGF0aW9uKCk7XG4gICAgfVxuICB9O1xuICBcbiAgICAvKipcbiAgICogU2V0cyBhZGFwdGF0aW9uIG9mZiwgaWYgYXBwbGljYWJsZSwgaW4gYWxsIHN0ZXBwZXJzLlxuICAgKi8gXG4gIFNhbXBsZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnN0ZXBwZXJzW2ldLnN0b3BfYWRhcHRhdGlvbigpO1xuICAgIH1cbiAgfTtcbiAgXG4gICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBpbXBsZW1lbnRzIHtTYW1wbGVyfVxuICAgKiBUaGlzIHNhbXBsZXIgdXNlcyB0aGUgQW13Z1N0ZXBwZXIgYXMgdGhlIHN0ZXBwZXIgZnVuY3Rpb24gd2hpY2ggaW1wbGVtZW50cyB0aGUgXG4gICAqIEFkYXB0aXZlIE1ldHJvcG9saXMtV2l0aGluLUdpYmJzIGFsZ29yaXRobSBpbiBcIkV4YW1wbGVzIG9mIEFkYXB0aXZlIE1DTUNcIlxuICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpLiBBbiBhZGl0aW9uIGlzIHRoYXQgaXQgaGFuZGxlcyBpbnQgcGFyYW1ldGVyc1xuICAgKiBieSBtYWtpbmcgZGlzY3JldGUgTm9ybWFsIHByb3Bvc2FscyBhbmQgYmluYXJ5IHBhcmFtZXRlcnMgYnkgdGFraW5nIG9uIGEgbmV3IFxuICAgKiB2YWx1ZSBwcm9wb3J0aW9uYWwgdG8gdGhlIHBvc3RlcmlvciBvZiB0aGUgdHdvIHBvc3NpYmxlIHN0YXRlcyBvZiB0aGVcbiAgICogcGFyYW1ldGVyLiBUaGlzIHNhbXBsZXIgY2FuIGJlIGVmZmljaWVudCB3aGVuIHRoZSBudW1iZXIgb2YgcGFyYW1ldGVyc1xuICAgKiBhcmUgbm90IHRvbyBoaWdoIGFuZCB0aGUgY29ycmVsYXRpb25zIGJldHdlZW4gcGFyYW1ldGVycyBhcmUgbG93LlxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBvbmUgb3IgbW9yZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnNcbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci5cbiAgKi9cbiAgdmFyIEFtd2dTYW1wbGVyID0gZnVuY3Rpb24ocGFyYW1zLCBsb2dfcG9zdCwgZGF0YSwgb3B0aW9ucykge1xuICAgIFNhbXBsZXIuY2FsbCh0aGlzLCBwYXJhbXMsIGxvZ19wb3N0LCBkYXRhLCBvcHRpb25zKTtcbiAgfTtcbiAgXG4gIEFtd2dTYW1wbGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU2FtcGxlci5wcm90b3R5cGUpOyBcbiAgQW13Z1NhbXBsZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQW13Z1NhbXBsZXI7XG4gIFxuICBBbXdnU2FtcGxlci5wcm90b3R5cGUuY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucyl7XG4gICAgcmV0dXJuIFsgbmV3IEFtd2dTdGVwcGVyKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSBdO1xuICB9O1xuICBcbiAgXG4gIC8vIFJldHVybmluZyB0aGUgZnVuY3Rpb25zIHRoYXQgc2hvdWxkIGJlIHB1YmxpY2x5IGV4cG9zZWQgYnkgdGhpcyBtb2R1bGVcbiAgcmV0dXJuIHtcbiAgICBydW5pZjogcnVuaWYsXG4gICAgcnVuaWZfZGlzY3JldGU6IHJ1bmlmX2Rpc2NyZXRlLFxuICAgIHJub3JtOiBybm9ybSxcbiAgICBwYXJhbV9pbml0X2ZpeGVkOiBwYXJhbV9pbml0X2ZpeGVkLCBcbiAgICBjb21wbGV0ZV9wYXJhbXM6IGNvbXBsZXRlX3BhcmFtcywgXG4gICAgUmVhbE1ldHJvcG9saXNTdGVwcGVyOiBSZWFsTWV0cm9wb2xpc1N0ZXBwZXIsIFxuICAgIEludE1ldHJvcG9saXNTdGVwcGVyOiBJbnRNZXRyb3BvbGlzU3RlcHBlciwgXG4gICAgTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI6IE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLCBcbiAgICBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOiBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLCBcbiAgICBCaW5hcnlTdGVwcGVyOiBCaW5hcnlTdGVwcGVyLCBcbiAgICBCaW5hcnlDb21wb25lbnRTdGVwcGVyOiBCaW5hcnlDb21wb25lbnRTdGVwcGVyLCBcbiAgICBBbXdnU3RlcHBlcjogQW13Z1N0ZXBwZXIsIFxuICAgIEFtd2dTYW1wbGVyOiBBbXdnU2FtcGxlclxuICB9O1xufSkpO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYXNjZW5kaW5nKGEsIGIpIHtcbiAgcmV0dXJuIGEgPT0gbnVsbCB8fCBiID09IG51bGwgPyBOYU4gOiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogYSA+PSBiID8gMCA6IE5hTjtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG51bWJlcih4KSB7XG4gIHJldHVybiB4ID09PSBudWxsID8gTmFOIDogK3g7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiogbnVtYmVycyh2YWx1ZXMsIHZhbHVlb2YpIHtcbiAgaWYgKHZhbHVlb2YgPT09IHVuZGVmaW5lZCkge1xuICAgIGZvciAobGV0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgKHZhbHVlID0gK3ZhbHVlKSA+PSB2YWx1ZSkge1xuICAgICAgICB5aWVsZCB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGV0IGluZGV4ID0gLTE7XG4gICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAoKHZhbHVlID0gdmFsdWVvZih2YWx1ZSwgKytpbmRleCwgdmFsdWVzKSkgIT0gbnVsbCAmJiAodmFsdWUgPSArdmFsdWUpID49IHZhbHVlKSB7XG4gICAgICAgIHlpZWxkIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IGFzY2VuZGluZyBmcm9tIFwiLi9hc2NlbmRpbmcuanNcIjtcbmltcG9ydCBwZXJtdXRlIGZyb20gXCIuL3Blcm11dGUuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc29ydCh2YWx1ZXMsIC4uLkYpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZXNbU3ltYm9sLml0ZXJhdG9yXSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwidmFsdWVzIGlzIG5vdCBpdGVyYWJsZVwiKTtcbiAgdmFsdWVzID0gQXJyYXkuZnJvbSh2YWx1ZXMpO1xuICBsZXQgW2ZdID0gRjtcbiAgaWYgKChmICYmIGYubGVuZ3RoICE9PSAyKSB8fCBGLmxlbmd0aCA+IDEpIHtcbiAgICBjb25zdCBpbmRleCA9IFVpbnQzMkFycmF5LmZyb20odmFsdWVzLCAoZCwgaSkgPT4gaSk7XG4gICAgaWYgKEYubGVuZ3RoID4gMSkge1xuICAgICAgRiA9IEYubWFwKGYgPT4gdmFsdWVzLm1hcChmKSk7XG4gICAgICBpbmRleC5zb3J0KChpLCBqKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgZiBvZiBGKSB7XG4gICAgICAgICAgY29uc3QgYyA9IGFzY2VuZGluZ0RlZmluZWQoZltpXSwgZltqXSk7XG4gICAgICAgICAgaWYgKGMpIHJldHVybiBjO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZiA9IHZhbHVlcy5tYXAoZik7XG4gICAgICBpbmRleC5zb3J0KChpLCBqKSA9PiBhc2NlbmRpbmdEZWZpbmVkKGZbaV0sIGZbal0pKTtcbiAgICB9XG4gICAgcmV0dXJuIHBlcm11dGUodmFsdWVzLCBpbmRleCk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlcy5zb3J0KGNvbXBhcmVEZWZpbmVkKGYpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhcmVEZWZpbmVkKGNvbXBhcmUgPSBhc2NlbmRpbmcpIHtcbiAgaWYgKGNvbXBhcmUgPT09IGFzY2VuZGluZykgcmV0dXJuIGFzY2VuZGluZ0RlZmluZWQ7XG4gIGlmICh0eXBlb2YgY29tcGFyZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiY29tcGFyZSBpcyBub3QgYSBmdW5jdGlvblwiKTtcbiAgcmV0dXJuIChhLCBiKSA9PiB7XG4gICAgY29uc3QgeCA9IGNvbXBhcmUoYSwgYik7XG4gICAgaWYgKHggfHwgeCA9PT0gMCkgcmV0dXJuIHg7XG4gICAgcmV0dXJuIChjb21wYXJlKGIsIGIpID09PSAwKSAtIChjb21wYXJlKGEsIGEpID09PSAwKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzY2VuZGluZ0RlZmluZWQoYSwgYikge1xuICByZXR1cm4gKGEgPT0gbnVsbCB8fCAhKGEgPj0gYSkpIC0gKGIgPT0gbnVsbCB8fCAhKGIgPj0gYikpIHx8IChhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogMCk7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtYXgodmFsdWVzLCB2YWx1ZW9mKSB7XG4gIGxldCBtYXg7XG4gIGlmICh2YWx1ZW9mID09PSB1bmRlZmluZWQpIHtcbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgaWYgKHZhbHVlICE9IG51bGxcbiAgICAgICAgICAmJiAobWF4IDwgdmFsdWUgfHwgKG1heCA9PT0gdW5kZWZpbmVkICYmIHZhbHVlID49IHZhbHVlKSkpIHtcbiAgICAgICAgbWF4ID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGxldCBpbmRleCA9IC0xO1xuICAgIGZvciAobGV0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgaWYgKCh2YWx1ZSA9IHZhbHVlb2YodmFsdWUsICsraW5kZXgsIHZhbHVlcykpICE9IG51bGxcbiAgICAgICAgICAmJiAobWF4IDwgdmFsdWUgfHwgKG1heCA9PT0gdW5kZWZpbmVkICYmIHZhbHVlID49IHZhbHVlKSkpIHtcbiAgICAgICAgbWF4ID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBtYXg7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtaW4odmFsdWVzLCB2YWx1ZW9mKSB7XG4gIGxldCBtaW47XG4gIGlmICh2YWx1ZW9mID09PSB1bmRlZmluZWQpIHtcbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgaWYgKHZhbHVlICE9IG51bGxcbiAgICAgICAgICAmJiAobWluID4gdmFsdWUgfHwgKG1pbiA9PT0gdW5kZWZpbmVkICYmIHZhbHVlID49IHZhbHVlKSkpIHtcbiAgICAgICAgbWluID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGxldCBpbmRleCA9IC0xO1xuICAgIGZvciAobGV0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgaWYgKCh2YWx1ZSA9IHZhbHVlb2YodmFsdWUsICsraW5kZXgsIHZhbHVlcykpICE9IG51bGxcbiAgICAgICAgICAmJiAobWluID4gdmFsdWUgfHwgKG1pbiA9PT0gdW5kZWZpbmVkICYmIHZhbHVlID49IHZhbHVlKSkpIHtcbiAgICAgICAgbWluID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBtaW47XG59XG4iLCJpbXBvcnQge2FzY2VuZGluZ0RlZmluZWQsIGNvbXBhcmVEZWZpbmVkfSBmcm9tIFwiLi9zb3J0LmpzXCI7XG5cbi8vIEJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9tb3VybmVyL3F1aWNrc2VsZWN0XG4vLyBJU0MgbGljZW5zZSwgQ29weXJpZ2h0IDIwMTggVmxhZGltaXIgQWdhZm9ua2luLlxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcXVpY2tzZWxlY3QoYXJyYXksIGssIGxlZnQgPSAwLCByaWdodCA9IGFycmF5Lmxlbmd0aCAtIDEsIGNvbXBhcmUpIHtcbiAgY29tcGFyZSA9IGNvbXBhcmUgPT09IHVuZGVmaW5lZCA/IGFzY2VuZGluZ0RlZmluZWQgOiBjb21wYXJlRGVmaW5lZChjb21wYXJlKTtcblxuICB3aGlsZSAocmlnaHQgPiBsZWZ0KSB7XG4gICAgaWYgKHJpZ2h0IC0gbGVmdCA+IDYwMCkge1xuICAgICAgY29uc3QgbiA9IHJpZ2h0IC0gbGVmdCArIDE7XG4gICAgICBjb25zdCBtID0gayAtIGxlZnQgKyAxO1xuICAgICAgY29uc3QgeiA9IE1hdGgubG9nKG4pO1xuICAgICAgY29uc3QgcyA9IDAuNSAqIE1hdGguZXhwKDIgKiB6IC8gMyk7XG4gICAgICBjb25zdCBzZCA9IDAuNSAqIE1hdGguc3FydCh6ICogcyAqIChuIC0gcykgLyBuKSAqIChtIC0gbiAvIDIgPCAwID8gLTEgOiAxKTtcbiAgICAgIGNvbnN0IG5ld0xlZnQgPSBNYXRoLm1heChsZWZ0LCBNYXRoLmZsb29yKGsgLSBtICogcyAvIG4gKyBzZCkpO1xuICAgICAgY29uc3QgbmV3UmlnaHQgPSBNYXRoLm1pbihyaWdodCwgTWF0aC5mbG9vcihrICsgKG4gLSBtKSAqIHMgLyBuICsgc2QpKTtcbiAgICAgIHF1aWNrc2VsZWN0KGFycmF5LCBrLCBuZXdMZWZ0LCBuZXdSaWdodCwgY29tcGFyZSk7XG4gICAgfVxuXG4gICAgY29uc3QgdCA9IGFycmF5W2tdO1xuICAgIGxldCBpID0gbGVmdDtcbiAgICBsZXQgaiA9IHJpZ2h0O1xuXG4gICAgc3dhcChhcnJheSwgbGVmdCwgayk7XG4gICAgaWYgKGNvbXBhcmUoYXJyYXlbcmlnaHRdLCB0KSA+IDApIHN3YXAoYXJyYXksIGxlZnQsIHJpZ2h0KTtcblxuICAgIHdoaWxlIChpIDwgaikge1xuICAgICAgc3dhcChhcnJheSwgaSwgaiksICsraSwgLS1qO1xuICAgICAgd2hpbGUgKGNvbXBhcmUoYXJyYXlbaV0sIHQpIDwgMCkgKytpO1xuICAgICAgd2hpbGUgKGNvbXBhcmUoYXJyYXlbal0sIHQpID4gMCkgLS1qO1xuICAgIH1cblxuICAgIGlmIChjb21wYXJlKGFycmF5W2xlZnRdLCB0KSA9PT0gMCkgc3dhcChhcnJheSwgbGVmdCwgaik7XG4gICAgZWxzZSArK2osIHN3YXAoYXJyYXksIGosIHJpZ2h0KTtcblxuICAgIGlmIChqIDw9IGspIGxlZnQgPSBqICsgMTtcbiAgICBpZiAoayA8PSBqKSByaWdodCA9IGogLSAxO1xuICB9XG4gIHJldHVybiBhcnJheTtcbn1cblxuZnVuY3Rpb24gc3dhcChhcnJheSwgaSwgaikge1xuICBjb25zdCB0ID0gYXJyYXlbaV07XG4gIGFycmF5W2ldID0gYXJyYXlbal07XG4gIGFycmF5W2pdID0gdDtcbn1cbiIsImltcG9ydCBtYXggZnJvbSBcIi4vbWF4LmpzXCI7XG5pbXBvcnQgbWluIGZyb20gXCIuL21pbi5qc1wiO1xuaW1wb3J0IHF1aWNrc2VsZWN0IGZyb20gXCIuL3F1aWNrc2VsZWN0LmpzXCI7XG5pbXBvcnQgbnVtYmVyLCB7bnVtYmVyc30gZnJvbSBcIi4vbnVtYmVyLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHF1YW50aWxlKHZhbHVlcywgcCwgdmFsdWVvZikge1xuICB2YWx1ZXMgPSBGbG9hdDY0QXJyYXkuZnJvbShudW1iZXJzKHZhbHVlcywgdmFsdWVvZikpO1xuICBpZiAoIShuID0gdmFsdWVzLmxlbmd0aCkpIHJldHVybjtcbiAgaWYgKChwID0gK3ApIDw9IDAgfHwgbiA8IDIpIHJldHVybiBtaW4odmFsdWVzKTtcbiAgaWYgKHAgPj0gMSkgcmV0dXJuIG1heCh2YWx1ZXMpO1xuICB2YXIgbixcbiAgICAgIGkgPSAobiAtIDEpICogcCxcbiAgICAgIGkwID0gTWF0aC5mbG9vcihpKSxcbiAgICAgIHZhbHVlMCA9IG1heChxdWlja3NlbGVjdCh2YWx1ZXMsIGkwKS5zdWJhcnJheSgwLCBpMCArIDEpKSxcbiAgICAgIHZhbHVlMSA9IG1pbih2YWx1ZXMuc3ViYXJyYXkoaTAgKyAxKSk7XG4gIHJldHVybiB2YWx1ZTAgKyAodmFsdWUxIC0gdmFsdWUwKSAqIChpIC0gaTApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcXVhbnRpbGVTb3J0ZWQodmFsdWVzLCBwLCB2YWx1ZW9mID0gbnVtYmVyKSB7XG4gIGlmICghKG4gPSB2YWx1ZXMubGVuZ3RoKSkgcmV0dXJuO1xuICBpZiAoKHAgPSArcCkgPD0gMCB8fCBuIDwgMikgcmV0dXJuICt2YWx1ZW9mKHZhbHVlc1swXSwgMCwgdmFsdWVzKTtcbiAgaWYgKHAgPj0gMSkgcmV0dXJuICt2YWx1ZW9mKHZhbHVlc1tuIC0gMV0sIG4gLSAxLCB2YWx1ZXMpO1xuICB2YXIgbixcbiAgICAgIGkgPSAobiAtIDEpICogcCxcbiAgICAgIGkwID0gTWF0aC5mbG9vcihpKSxcbiAgICAgIHZhbHVlMCA9ICt2YWx1ZW9mKHZhbHVlc1tpMF0sIGkwLCB2YWx1ZXMpLFxuICAgICAgdmFsdWUxID0gK3ZhbHVlb2YodmFsdWVzW2kwICsgMV0sIGkwICsgMSwgdmFsdWVzKTtcbiAgcmV0dXJuIHZhbHVlMCArICh2YWx1ZTEgLSB2YWx1ZTApICogKGkgLSBpMCk7XG59XG4iLCJpbXBvcnQgcXVhbnRpbGUgZnJvbSBcIi4vcXVhbnRpbGUuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWVkaWFuKHZhbHVlcywgdmFsdWVvZikge1xuICByZXR1cm4gcXVhbnRpbGUodmFsdWVzLCAwLjUsIHZhbHVlb2YpO1xufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIFRyYW5zZm9ybShrLCB4LCB5KSB7XG4gIHRoaXMuayA9IGs7XG4gIHRoaXMueCA9IHg7XG4gIHRoaXMueSA9IHk7XG59XG5cblRyYW5zZm9ybS5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBUcmFuc2Zvcm0sXG4gIHNjYWxlOiBmdW5jdGlvbihrKSB7XG4gICAgcmV0dXJuIGsgPT09IDEgPyB0aGlzIDogbmV3IFRyYW5zZm9ybSh0aGlzLmsgKiBrLCB0aGlzLngsIHRoaXMueSk7XG4gIH0sXG4gIHRyYW5zbGF0ZTogZnVuY3Rpb24oeCwgeSkge1xuICAgIHJldHVybiB4ID09PSAwICYgeSA9PT0gMCA/IHRoaXMgOiBuZXcgVHJhbnNmb3JtKHRoaXMuaywgdGhpcy54ICsgdGhpcy5rICogeCwgdGhpcy55ICsgdGhpcy5rICogeSk7XG4gIH0sXG4gIGFwcGx5OiBmdW5jdGlvbihwb2ludCkge1xuICAgIHJldHVybiBbcG9pbnRbMF0gKiB0aGlzLmsgKyB0aGlzLngsIHBvaW50WzFdICogdGhpcy5rICsgdGhpcy55XTtcbiAgfSxcbiAgYXBwbHlYOiBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIHggKiB0aGlzLmsgKyB0aGlzLng7XG4gIH0sXG4gIGFwcGx5WTogZnVuY3Rpb24oeSkge1xuICAgIHJldHVybiB5ICogdGhpcy5rICsgdGhpcy55O1xuICB9LFxuICBpbnZlcnQ6IGZ1bmN0aW9uKGxvY2F0aW9uKSB7XG4gICAgcmV0dXJuIFsobG9jYXRpb25bMF0gLSB0aGlzLngpIC8gdGhpcy5rLCAobG9jYXRpb25bMV0gLSB0aGlzLnkpIC8gdGhpcy5rXTtcbiAgfSxcbiAgaW52ZXJ0WDogZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiAoeCAtIHRoaXMueCkgLyB0aGlzLms7XG4gIH0sXG4gIGludmVydFk6IGZ1bmN0aW9uKHkpIHtcbiAgICByZXR1cm4gKHkgLSB0aGlzLnkpIC8gdGhpcy5rO1xuICB9LFxuICByZXNjYWxlWDogZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiB4LmNvcHkoKS5kb21haW4oeC5yYW5nZSgpLm1hcCh0aGlzLmludmVydFgsIHRoaXMpLm1hcCh4LmludmVydCwgeCkpO1xuICB9LFxuICByZXNjYWxlWTogZnVuY3Rpb24oeSkge1xuICAgIHJldHVybiB5LmNvcHkoKS5kb21haW4oeS5yYW5nZSgpLm1hcCh0aGlzLmludmVydFksIHRoaXMpLm1hcCh5LmludmVydCwgeSkpO1xuICB9LFxuICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgdGhpcy54ICsgXCIsXCIgKyB0aGlzLnkgKyBcIikgc2NhbGUoXCIgKyB0aGlzLmsgKyBcIilcIjtcbiAgfVxufTtcblxuZXhwb3J0IHZhciBpZGVudGl0eSA9IG5ldyBUcmFuc2Zvcm0oMSwgMCwgMCk7XG5cbnRyYW5zZm9ybS5wcm90b3R5cGUgPSBUcmFuc2Zvcm0ucHJvdG90eXBlO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0cmFuc2Zvcm0obm9kZSkge1xuICB3aGlsZSAoIW5vZGUuX196b29tKSBpZiAoIShub2RlID0gbm9kZS5wYXJlbnROb2RlKSkgcmV0dXJuIGlkZW50aXR5O1xuICByZXR1cm4gbm9kZS5fX3pvb207XG59XG4iLCJcbi8qXG4gIENQVE1hdGggU3RhdGljIENsYXNzIC0gTm90IGludGVuZGVkIGZvciBpbnN0YW50aWF0aW9uIVxuXG4gIFZhcmlhYmxlczpcbiAgICB4ID0gb2JqZWN0aXZlIHZhbHVlXG4gICAgdiA9IHN1YmplY3RpdmUgdmFsdWVcbiAgICBwID0gb2JqZWN0aXZlIHByb2JhYmlsaXR5XG4gICAgdyA9IHN1YmplY3RpdmUgcHJvYmFiaWxpdHkvZGVjaXNpb24gd2VpZ2h0XG4gICAgdSA9IHN1YmplY3RpdmUgdXRpbGl0eVxuXG4gICAgYSA9IGFscGhhIChjdXJ2YXR1cmUgZm9yIHZhbHVlIGZ1bmN0aW9uKVxuICAgIGwgPSBsYW1iZGEgKGxvc3MgYXZlcnNpb24gZm9yIHZhbHVlIGZ1bmN0aW9uKVxuICAgIGcgPSBnYW1tYSAoc2Vuc2l0aXZpdHkgZm9yIGRlY2lzaW9uIHdlaWdodGluZyBmdW5jdGlvbilcblxuICBFcXVhdGlvbnM6XG4gICAgdiA9IGlmICh4ID49IDApIHheYTsgaWYgKHggPCAwKSAtbCAqICgteCleYVxuICAgIGEgPSBpZiAoeCA+PSAwKSBsb2codikgLyBsb2coeCk7IGlmICh4IDwgMCkgKGxvZygtdikgLSBsb2cobCkpIC8gbG9nKC14KVxuICAgIGwgPSBpZiAoeCA+PSAwKSAxOyBpZiAoeCA8IDApIC12IC8gKC14KV5hXG5cbiAgICB3ID0gcF5nIC8gKHBeZyArICgxIC0gcCleZyleKDEgLyBnKVxuXG4gICAgdSA9IFN1bV9uKHZfbiAqIHdfbilcbiovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDUFRNYXRoIHtcbiAgc3RhdGljIHhhbDJ2KHgsIGEsIGwpIHtcbiAgICBpZiAoeCA+PSAwKSB7XG4gICAgICByZXR1cm4geCAqKiBhO1xuICAgIH1cbiAgICAvLyBlbHNlICh4IDwgMClcbiAgICByZXR1cm4gLWwgKiAoKC14KSAqKiBhKTtcbiAgfVxuXG4gIHN0YXRpYyB4bHYyYSh4LCBsLCB2KSB7XG4gICAgaWYgKHggPj0gMCkge1xuICAgICAgcmV0dXJuIE1hdGgubG9nKHYpIC8gTWF0aC5sb2coeCk7XG4gICAgfVxuICAgIC8vIGVsc2UgKHggPCAwKVxuICAgIHJldHVybiAoTWF0aC5sb2coLXYpIC0gTWF0aC5sb2cobCkpIC8gTWF0aC5sb2coLXgpO1xuICB9XG5cbiAgc3RhdGljIHhhdjJsKHgsIGEsIHYpIHtcbiAgICBpZiAoeCA+PSAwKSB7XG4gICAgICByZXR1cm4gTmFOO1xuICAgIH1cbiAgICAvLyBlbHNlICh4IDwgMClcbiAgICByZXR1cm4gLXYgLyAoKC14KSAqKiBhKTtcbiAgfVxuXG4gIHN0YXRpYyBwZzJ3KHAsIGcpIHtcbiAgICByZXR1cm4gKHAgKiogZykgLyAoKChwICoqIGcpICsgKCgxIC0gcCkgKiogZykpICoqICgxIC8gZykpO1xuICB9XG5cbiAgc3RhdGljIHZ3MnUodiwgdykge1xuICAgIC8vIE51bWJlcnNcbiAgICBpZiAodHlwZW9mIHYgPT09ICdudW1iZXInICYmIHR5cGVvZiB3ID09PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIHYgKiB3O1xuICAgIH1cbiAgICAvLyBBcnJheXNcbiAgICBpZiAodiBpbnN0YW5jZW9mIEFycmF5ICYmIHcgaW5zdGFuY2VvZiBBcnJheSAmJiB2Lmxlbmd0aCA+IDAgJiYgdi5sZW5ndGggPT09IHcubGVuZ3RoKSB7XG4gICAgICBsZXQgdSA9IDA7XG4gICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHYubGVuZ3RoOyBuICs9IDEpIHtcbiAgICAgICAgdSArPSB2W25dICogd1tuXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1O1xuICAgIH1cbiAgICAvLyBPdGhlcndpc2VcbiAgICByZXR1cm4gTmFOO1xuICB9XG59XG4iLCJcbi8vIEludGVybmFsIGRlcGVuZGVuY2llc1xuaW1wb3J0IENQVE1hdGggZnJvbSAnLi9jcHQtbWF0aCc7XG5cbmV4cG9ydCBkZWZhdWx0IENQVE1hdGg7XG4iLCIvKiBlc2xpbnQgbm8tcmVzdHJpY3RlZC1nbG9iYWxzOiBbXCJvZmZcIiwgXCJzZWxmXCJdICovXG5cbi8vIE5lZWRlZCBmb3IgZDMgaW4gV2ViV29ya2VyIVxuaW1wb3J0ICdyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUnO1xuXG5pbXBvcnQgKiBhcyBCYXllc0Rpc3RyaWJ1dGlvbnMgZnJvbSAnYmF5ZXMuanMvZGlzdHJpYnV0aW9ucyc7XG5pbXBvcnQgKiBhcyBCYXllc01jbWMgZnJvbSAnYmF5ZXMuanMvbWNtYyc7XG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgQ1BUTWF0aCBmcm9tICdAZGVjaWRhYmxlcy9wcm9zcGVjdGFibGUtbWF0aCc7XG5cbnNlbGYub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gIGNvbnN0IHBhcmFtcyA9IHtcbiAgICBhbHBoYToge3R5cGU6ICdyZWFsJywgbG93ZXI6IDAsIHVwcGVyOiAxfSxcbiAgICBsYW1iZGE6IHt0eXBlOiAncmVhbCcsIGxvd2VyOiAwLCB1cHBlcjogMTB9LFxuICAgIGdhbW1hOiB7dHlwZTogJ3JlYWwnLCBsb3dlcjogMCwgdXBwZXI6IDF9LFxuICAgIGx1Y2U6IHt0eXBlOiAncmVhbCcsIGxvd2VyOiAwLCB1cHBlcjogMTAwfSxcbiAgfTtcblxuICBjb25zdCBsb2dQb3N0ID0gKHN0YXRlLCBkYXRhKSA9PiB7XG4gICAgbGV0IGxwID0gMDtcblxuICAgIC8vIFByaW9yc1xuICAgIGNvbnN0IGFscGhhTWVhbiA9IDAuNTtcbiAgICBjb25zdCBhbHBoYVNhbXBsZVNpemUgPSAyLjU7XG4gICAgbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLmJldGEoXG4gICAgICBzdGF0ZS5hbHBoYSxcbiAgICAgIGFscGhhTWVhbiAqIGFscGhhU2FtcGxlU2l6ZSxcbiAgICAgICgxIC0gYWxwaGFNZWFuKSAqIGFscGhhU2FtcGxlU2l6ZSxcbiAgICApO1xuICAgIC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmFscGhhLCAwLCAxKTtcblxuICAgIGNvbnN0IGxhbWJkYU1lYW4gPSAyO1xuICAgIGNvbnN0IGxhbWJkYVNoYXBlID0gMztcbiAgICBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMuZ2FtbWEoXG4gICAgICBzdGF0ZS5sYW1iZGEsXG4gICAgICBsYW1iZGFTaGFwZSxcbiAgICAgIGxhbWJkYVNoYXBlIC8gbGFtYmRhTWVhbixcbiAgICApO1xuICAgIC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmxhbWJkYSwgMCwgMTApO1xuXG4gICAgY29uc3QgZ2FtbWFNZWFuID0gMC41O1xuICAgIGNvbnN0IGdhbW1hU2FtcGxlU2l6ZSA9IDIuNTtcbiAgICBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMuYmV0YShcbiAgICAgIHN0YXRlLmdhbW1hLFxuICAgICAgZ2FtbWFNZWFuICogZ2FtbWFTYW1wbGVTaXplLFxuICAgICAgKDEgLSBnYW1tYU1lYW4pICogZ2FtbWFTYW1wbGVTaXplLFxuICAgICk7XG4gICAgLy8gbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLnVuaWYoc3RhdGUuZ2FtbWEsIDAsIDEpO1xuXG4gICAgY29uc3QgbHVjZU1lYW4gPSAyO1xuICAgIGNvbnN0IGx1Y2VTaGFwZSA9IDM7XG4gICAgbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLmdhbW1hKFxuICAgICAgc3RhdGUubHVjZSxcbiAgICAgIGx1Y2VTaGFwZSxcbiAgICAgIGx1Y2VTaGFwZSAvIGx1Y2VNZWFuLFxuICAgICk7XG4gICAgLy8gbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLnVuaWYoc3RhdGUubHVjZSwgMCwgMTAwKTtcblxuICAgIC8vIExpa2VsaWhvb2RcbiAgICBkYXRhLmZvckVhY2goKGNob2ljZSkgPT4ge1xuICAgICAgLy8gVmFsdWVzXG4gICAgICBjb25zdCB2bCA9IENQVE1hdGgueGFsMnYoY2hvaWNlLnhsLCBzdGF0ZS5hbHBoYSwgc3RhdGUubGFtYmRhKTtcbiAgICAgIGNvbnN0IHZ3ID0gQ1BUTWF0aC54YWwydihjaG9pY2UueHcsIHN0YXRlLmFscGhhLCBzdGF0ZS5sYW1iZGEpO1xuICAgICAgY29uc3QgdnMgPSBDUFRNYXRoLnhhbDJ2KGNob2ljZS54cywgc3RhdGUuYWxwaGEsIHN0YXRlLmxhbWJkYSk7XG5cbiAgICAgIC8vIFByb2JhYmlsaXRpZXNcbiAgICAgIGNvbnN0IHd3ID0gQ1BUTWF0aC5wZzJ3KGNob2ljZS5wdywgc3RhdGUuZ2FtbWEpO1xuICAgICAgY29uc3Qgd2wgPSAxIC0gd3c7XG5cbiAgICAgIC8vIFV0aWxpdGllc1xuICAgICAgY29uc3QgdWcgPSB3bCAqIHZsICsgd3cgKiB2dztcbiAgICAgIGNvbnN0IHVzID0gdnM7XG5cbiAgICAgIC8vIENob2ljZSBvZiBnYW1ibGUgb3Igc3VyZSBpcyBzYW1wbGVkIGZyb20gYSBCZXJub3VsbGkgZGlzdHJpYnV0aW9uXG4gICAgICAvLyBMdWNlIGNob2ljZSBydWxlIGlzIHVzZWQgdG8gY29tcHV0ZSBwcm9iYWJpbGl0eSBvZiBnYW1ibGluZyEgKDAgPSBzdXJlLCAxID0gZ2FtYmxlKVxuICAgICAgY29uc3QgYmludmFsID0gMSAvICgxICsgTWF0aC5leHAoc3RhdGUubHVjZSAqICh1cyAtIHVnKSkpO1xuXG4gICAgICAvLyBBY3R1YWwgcmVzcG9uc2VcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gKGNob2ljZS5yZXNwb25zZSA9PT0gJ3N1cmUnKSA/IDAgOiAxO1xuXG4gICAgICBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMuYmVybihyZXNwb25zZSwgYmludmFsKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBscDtcbiAgfTtcblxuICAvLyBJbml0aWFsaXppbmcgdGhlIHNhbXBsZXJcbiAgY29uc3Qgc2FtcGxlciA9IG5ldyBCYXllc01jbWMuQW13Z1NhbXBsZXIocGFyYW1zLCBsb2dQb3N0LCBldmVudC5kYXRhKTtcbiAgLy8gQnVybmluZyBzb21lIHNhbXBsZXMgdG8gdGhlIE1DTUMgZ29kcyBhbmQgc2FtcGxpbmcgNTAwMCBkcmF3c1xuICBzYW1wbGVyLmJ1cm4oMTAwMCk7XG4gIGNvbnN0IHNhbXBsZXMgPSBzYW1wbGVyLnNhbXBsZSg1MDAwKTtcblxuICAvLyBFeHRyYWN0IHN1bW1hcnkgc3RhdHNcbiAgY29uc3QgcmVzdWx0cyA9IHtcbiAgICBhbHBoYTogZDMubWVkaWFuKHNhbXBsZXMuYWxwaGEpLFxuICAgIGxhbWJkYTogZDMubWVkaWFuKHNhbXBsZXMubGFtYmRhKSxcbiAgICBnYW1tYTogZDMubWVkaWFuKHNhbXBsZXMuZ2FtbWEpLFxuICAgIGx1Y2U6IGQzLm1lZGlhbihzYW1wbGVzLmx1Y2UpLFxuICB9O1xuXG4gIHNlbGYucG9zdE1lc3NhZ2Uoe3Jlc3VsdHM6IHJlc3VsdHMsIHNhbXBsZXM6IHNhbXBsZXN9KTtcbn07XG4iXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJtb2R1bGUiLCJleHBvcnRzIiwibGQiLCJ0aGlzIiwibGdhbW1hIiwieCIsImoiLCJjb2YiLCJzZXIiLCJ4eCIsInkiLCJ0bXAiLCJsb2ciLCJsZmFjdG9yaWFsIiwibiIsIk5hTiIsImxjaG9vc2UiLCJrIiwibGJldGEiLCJhIiwiYiIsIk1hdGgiLCJleHAiLCJhYnMiLCJwb3ciLCJzcXJ0IiwicGkiLCJQSSIsImJldGEiLCJzaGFwZTEiLCJzaGFwZTIiLCJJbmZpbml0eSIsImNhdWNoeSIsImxvY2F0aW9uIiwic2NhbGUiLCJub3JtIiwibWVhbiIsInNkIiwiYml2YXJub3JtIiwiY29yciIsInoiLCJub3JtYWxpemluZ19mYWN0b3IiLCJiaXZhcl9sb2dfZGVucyIsImxhcGxhY2UiLCJkZXhwIiwiZ2FtbWEiLCJzaGFwZSIsInJhdGUiLCJpbnZnYW1tYSIsImxub3JtIiwibWVhbmxvZyIsInNkbG9nIiwicGFyZXRvIiwidCIsImRmIiwid2VpYnVsbCIsInRtcDEiLCJ0bXAyIiwibG9naXMiLCJlIiwiZiIsImRpcmljaGxldCIsImFscGhhIiwic3VtX2FscGhhIiwic3VtX2xnYW1tYV9hbHBoYSIsInN1bV9hbHBoYV9zdWJfMV9sb2dfeCIsImxlbmd0aCIsImkiLCJ1bmlmIiwibWluIiwibWF4IiwiYmVybiIsInByb2IiLCJjYXQiLCJwcm9icyIsImJpbm9tIiwic2l6ZSIsIm5iaW5vbSIsImh5cGVyIiwibSIsInBvaXMiLCJsYW1iZGEiLCJtY21jIiwicnVuaWYiLCJyYW5kb20iLCJydW5pZl9kaXNjcmV0ZSIsImZsb29yIiwicm5vcm0iLCJ1IiwidiIsInEiLCJkZWVwX2Nsb25lIiwic3JjIiwibWl4aW4iLCJkZXN0Iiwic291cmNlIiwiY29weUZ1bmMiLCJuYW1lIiwicyIsImVtcHR5IiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwibm9kZVR5cGUiLCJjbG9uZU5vZGUiLCJEYXRlIiwiZ2V0VGltZSIsIlJlZ0V4cCIsInIiLCJsIiwiQXJyYXkiLCJwdXNoIiwiY29uc3RydWN0b3IiLCJjbG9uZV9wYXJhbV9kcmF3IiwiaXNBcnJheSIsInhfY29weSIsInNsaWNlIiwiaXNfbnVtYmVyIiwib2JqZWN0IiwiTnVtYmVyIiwiY3JlYXRlX2FycmF5IiwiZGltIiwiaW5pdCIsImFyciIsImFycmF5X2RpbSIsImNvbmNhdCIsImFycmF5X2VxdWFsIiwiYTEiLCJhMiIsIm5lc3RlZF9hcnJheV9hcHBseSIsImZ1biIsInJlc3VsdCIsInNodWZmbGVfYXJyYXkiLCJhcnJheSIsInRlbXAiLCJuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5IiwibGVuIiwiYXJyYXlfaXMiLCJhcnJheV9pIiwiZ2V0X29wdGlvbiIsIm9wdGlvbl9uYW1lIiwib3B0aW9ucyIsImRlZmF1bF92YWx1ZSIsImhhc093blByb3BlcnR5IiwidW5kZWZpbmVkIiwiZ2V0X211bHRpZGltX29wdGlvbiIsInZhbHVlIiwicGFyYW1faW5pdF9maXhlZCIsInR5cGUiLCJsb3dlciIsInVwcGVyIiwicm91bmQiLCJjb21wbGV0ZV9wYXJhbXMiLCJwYXJhbXNfdG9fY29tcGxldGUiLCJwYXJhbV9pbml0IiwicGFyYW1zIiwicGFyYW1fbmFtZSIsInBhcmFtIiwiU3RlcHBlciIsInN0YXRlIiwibG9nX3Bvc3QiLCJzdGVwIiwic3RhcnRfYWRhcHRhdGlvbiIsInN0b3BfYWRhcHRhdGlvbiIsImluZm8iLCJPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciIsImdlbmVyYXRlX3Byb3Bvc2FsIiwicGFyYW1fbmFtZXMiLCJrZXlzIiwicHJvcF9sb2dfc2NhbGUiLCJiYXRjaF9zaXplIiwibWF4X2FkYXB0YXRpb24iLCJpbml0aWFsX2FkYXB0YXRpb24iLCJ0YXJnZXRfYWNjZXB0X3JhdGUiLCJpc19hZGFwdGluZyIsImFjY2VwdGFuY2VfY291bnQiLCJiYXRjaF9jb3VudCIsIml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24iLCJjcmVhdGUiLCJwYXJhbV9zdGF0ZSIsInBhcmFtX3Byb3Bvc2FsIiwiY3Vycl9sb2dfZGVucyIsInByb3BfbG9nX2RlbnMiLCJhY2NlcHRfcHJvYiIsImxvZ19zZF9hZGp1c3RtZW50Iiwibm9ybWFsX3Byb3Bvc2FsIiwiUmVhbE1ldHJvcG9saXNTdGVwcGVyIiwiZGlzY3JldGVfbm9ybWFsX3Byb3Bvc2FsIiwiSW50TWV0cm9wb2xpc1N0ZXBwZXIiLCJNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIiwiU3ViU3RlcHBlciIsImNyZWF0ZV9zdWJzdGVwcGVycyIsInN1YnN0YXRlIiwic3Vic3RlcHBlcnMiLCJzdWJvcHRpb25zIiwic3VicGFyYW0iLCJzdWJzdGVwcGVyIiwiTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIiLCJNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIiwiQmluYXJ5U3RlcHBlciIsInplcm9fbG9nX2RlbnMiLCJvbmVfbG9nX2RlbnMiLCJtYXhfbG9nX2RlbnMiLCJ6ZXJvX3Byb2IiLCJCaW5hcnlDb21wb25lbnRTdGVwcGVyIiwic3VicGFyYW1zIiwiQW13Z1N0ZXBwZXIiLCJTZWxlY3RTdGVwcGVyIiwicGFyYW1fb2JqZWN0X3dyYXAiLCJwYXJhbV9vcHRpb25zIiwiU2FtcGxlciIsImRhdGEiLCJwYXJhbV9pbml0X2Z1biIsInRoaW5uaW5nX2ludGVydmFsIiwicGFyYW1zX3RvX21vbml0b3IiLCJ0aGluIiwibW9uaXRvciIsInN0ZXBwZXJzIiwiY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUiLCJzYW1wbGUiLCJuX2l0ZXJhdGlvbnMiLCJtb25pdG9yZWRfcGFyYW1zIiwiY3Vycl9zYW1wbGUiLCJidXJuIiwiQW13Z1NhbXBsZXIiLCJhc2NlbmRpbmciLCJudW1iZXJzIiwidmFsdWVzIiwidmFsdWVvZiIsImluZGV4IiwiY29tcGFyZURlZmluZWQiLCJjb21wYXJlIiwiYXNjZW5kaW5nRGVmaW5lZCIsIlR5cGVFcnJvciIsInF1aWNrc2VsZWN0IiwibGVmdCIsInJpZ2h0IiwibmV3TGVmdCIsIm5ld1JpZ2h0Iiwic3dhcCIsInF1YW50aWxlIiwicCIsIkZsb2F0NjRBcnJheSIsImZyb20iLCJpMCIsInZhbHVlMCIsInN1YmFycmF5IiwidmFsdWUxIiwibWVkaWFuIiwiVHJhbnNmb3JtIiwidHJhbnNsYXRlIiwiYXBwbHkiLCJwb2ludCIsImFwcGx5WCIsImFwcGx5WSIsImludmVydCIsImludmVydFgiLCJpbnZlcnRZIiwicmVzY2FsZVgiLCJjb3B5IiwiZG9tYWluIiwicmFuZ2UiLCJtYXAiLCJyZXNjYWxlWSIsIkNQVE1hdGgiLCJ4YWwydiIsInhsdjJhIiwieGF2MmwiLCJwZzJ3IiwiZyIsInZ3MnUiLCJ3Iiwic2VsZiIsIm9ubWVzc2FnZSIsImV2ZW50IiwibHVjZSIsImxvZ1Bvc3QiLCJscCIsImFscGhhTWVhbiIsImFscGhhU2FtcGxlU2l6ZSIsIkJheWVzRGlzdHJpYnV0aW9ucyIsImxhbWJkYU1lYW4iLCJsYW1iZGFTaGFwZSIsImdhbW1hTWVhbiIsImdhbW1hU2FtcGxlU2l6ZSIsImx1Y2VNZWFuIiwibHVjZVNoYXBlIiwiZm9yRWFjaCIsImNob2ljZSIsInZsIiwieGwiLCJ2dyIsInh3IiwidnMiLCJ4cyIsInd3IiwicHciLCJ3bCIsInVnIiwidXMiLCJiaW52YWwiLCJyZXNwb25zZSIsInNhbXBsZXIiLCJCYXllc01jbWMiLCJzYW1wbGVzIiwicmVzdWx0cyIsImQzIiwicG9zdE1lc3NhZ2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Q0FHQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTs7Q0FFQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTs7Q0FPQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7R0FDQyxDQUFVQSxVQUFBQSxJQUFJLEVBQUVDLE9BQU8sRUFBRTtLQUlmLElBQWtDQyxNQUFNLENBQUNDLE9BQU8sRUFBRTtDQUM3RDtDQUNBO0NBQ0E7Q0FDUUQsTUFBQUEsTUFBQSxDQUFBQyxPQUFBLEdBQWlCRixPQUFPLEVBQUUsQ0FBQTtDQUNsQyxLQUFLLE1BQU07Q0FDWDtDQUNRRCxNQUFBQSxJQUFJLENBQUNJLEVBQUUsR0FBR0gsT0FBTyxFQUFFLENBQUE7Q0FDeEIsS0FBQTtDQUNILEdBQUMsRUFBQ0ksY0FBSSxFQUFFLFlBQVc7Q0FDbkI7S0FDRSxJQUFJRCxFQUFFLEdBQUksRUFBRSxDQUFBOztDQUVkO0NBQ0E7O0NBRUUsSUFBQSxJQUFJRSxNQUFNLEdBQUcsVUFBU0MsQ0FBQyxFQUFFO09BQ3ZCLElBQUlDLENBQUMsR0FBRyxDQUFDLENBQUE7Q0FDVCxNQUFBLElBQUlDLEdBQUcsR0FBRyxDQUNSLGlCQUFpQixFQUFFLENBQUMsaUJBQWlCLEVBQUUsaUJBQWlCLEVBQ3hELENBQUMsaUJBQWlCLEVBQUUscUJBQXFCLEVBQUUsQ0FBQyxrQkFBa0IsQ0FDL0QsQ0FBQTtPQUNELElBQUlDLEdBQUcsR0FBRyxpQkFBaUIsQ0FBQTtDQUMzQixNQUFBLElBQUlDLEVBQUUsRUFBRUMsQ0FBQyxFQUFFQyxHQUFHLENBQUE7T0FDZEEsR0FBRyxHQUFHLENBQUNELENBQUMsR0FBR0QsRUFBRSxHQUFHSixDQUFDLElBQUksR0FBRyxDQUFBO09BQ3hCTSxHQUFHLElBQUksQ0FBQ0YsRUFBRSxHQUFHLEdBQUcsSUFBSUcsR0FBRyxDQUFDRCxHQUFHLENBQUMsQ0FBQTtDQUM1QixNQUFBLE9BQU9MLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsRUFBRSxFQUNmRSxHQUFHLElBQUlELEdBQUcsQ0FBQ0QsQ0FBQyxDQUFDLEdBQUcsRUFBRUksQ0FBQyxDQUFBO09BQ3JCLE9BQU9FLEdBQUcsQ0FBQyxrQkFBa0IsR0FBR0osR0FBRyxHQUFHQyxFQUFFLENBQUMsR0FBR0UsR0FBRyxDQUFBO01BQ2hELENBQUE7S0FDRFQsRUFBRSxDQUFDRSxNQUFNLEdBQUdBLE1BQU0sQ0FBQTtDQUVsQixJQUFBLElBQUlTLFVBQVUsR0FBRyxVQUFTQyxDQUFDLEVBQUU7T0FDM0IsT0FBT0EsQ0FBQyxHQUFHLENBQUMsR0FBR0MsR0FBRyxHQUFHWCxNQUFNLENBQUNVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQTtNQUNuQyxDQUFBO0tBQ0RaLEVBQUUsQ0FBQ1csVUFBVSxHQUFHQSxVQUFVLENBQUE7Q0FFMUIsSUFBQSxJQUFJRyxPQUFPLEdBQUcsVUFBU0YsQ0FBQyxFQUFFRyxDQUFDLEVBQUM7Q0FDMUIsTUFBQSxPQUFPSixVQUFVLENBQUNDLENBQUMsQ0FBQyxHQUFHRCxVQUFVLENBQUNJLENBQUMsQ0FBQyxHQUFHSixVQUFVLENBQUNDLENBQUMsR0FBR0csQ0FBQyxDQUFDLENBQUE7TUFDekQsQ0FBQTtLQUNEZixFQUFFLENBQUNjLE9BQU8sR0FBR0EsT0FBTyxDQUFBO0NBRXBCLElBQUEsSUFBSUUsS0FBSyxHQUFHLFVBQVNDLENBQUMsRUFBRUMsQ0FBQyxFQUFFO0NBQ3pCLE1BQUEsT0FBT2hCLE1BQU0sQ0FBQ2UsQ0FBQyxDQUFDLEdBQUdmLE1BQU0sQ0FBQ2dCLENBQUMsQ0FBQyxHQUFHaEIsTUFBTSxDQUFDZSxDQUFDLEdBQUdDLENBQUMsQ0FBQyxDQUFBO01BQzdDLENBQUE7S0FDRGxCLEVBQUUsQ0FBQ2dCLEtBQUssR0FBR0EsS0FBSyxDQUFBO0NBRWhCLElBQUEsSUFBSU4sR0FBRyxHQUFJUyxJQUFJLENBQUNULEdBQUcsQ0FBQTtDQUNuQixJQUFBLElBQUlVLEdBQUcsR0FBSUQsSUFBSSxDQUFDQyxHQUFHLENBQUE7Q0FDbkIsSUFBQSxJQUFJQyxHQUFHLEdBQUlGLElBQUksQ0FBQ0UsR0FBRyxDQUFBO0NBQ25CLElBQUEsSUFBSUMsR0FBRyxHQUFJSCxJQUFJLENBQUNHLEdBQUcsQ0FBQTtDQUNuQixJQUFBLElBQUlDLElBQUksR0FBR0osSUFBSSxDQUFDSSxJQUFJLENBQUE7Q0FDcEIsSUFBQSxJQUFJQyxFQUFFLEdBQUtMLElBQUksQ0FBQ00sRUFBRSxDQUFBOztDQUVwQjtDQUNBOztLQUVFekIsRUFBRSxDQUFDMEIsSUFBSSxHQUFHLFVBQVN2QixDQUFDLEVBQUV3QixNQUFNLEVBQUVDLE1BQU0sRUFBRTtDQUNwQyxNQUFBLElBQUl6QixDQUFDLEdBQUcsQ0FBQyxJQUFJQSxDQUFDLEdBQUcsQ0FBQyxFQUFFO0NBQ2hCLFFBQUEsT0FBTyxDQUFDMEIsUUFBUSxDQUFBO0NBQ25CLE9BQUE7Q0FDRCxNQUFBLElBQUdGLE1BQU0sS0FBSyxDQUFDLElBQUlDLE1BQU0sS0FBSyxDQUFDLEVBQUU7Q0FDL0IsUUFBQSxPQUFPLENBQUMsQ0FBQTtDQUNkLE9BQUssTUFBTTtTQUNMLE9BQU8sQ0FBQ0QsTUFBTSxHQUFHLENBQUMsSUFBSWpCLEdBQUcsQ0FBQ1AsQ0FBQyxDQUFDLEdBQUcsQ0FBQ3lCLE1BQU0sR0FBRyxDQUFDLElBQUlsQixHQUFHLENBQUMsQ0FBQyxHQUFHUCxDQUFDLENBQUMsR0FBR2EsS0FBSyxDQUFDVyxNQUFNLEVBQUVDLE1BQU0sQ0FBQyxDQUFBO0NBQ2pGLE9BQUE7TUFDRixDQUFBO0tBRUQ1QixFQUFFLENBQUM4QixNQUFNLEdBQUcsVUFBUzNCLENBQUMsRUFBRTRCLFFBQVEsRUFBRUMsS0FBSyxFQUFFO09BQ3ZDLE9BQU90QixHQUFHLENBQUNzQixLQUFLLENBQUMsR0FBR3RCLEdBQUcsQ0FBQ1ksR0FBRyxDQUFDbkIsQ0FBQyxHQUFHNEIsUUFBUSxFQUFFLENBQUMsQ0FBQyxHQUFHVCxHQUFHLENBQUNVLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFJdEIsR0FBRyxDQUFDYyxFQUFFLENBQUMsQ0FBQTtNQUN6RSxDQUFBO0tBRUR4QixFQUFFLENBQUNpQyxJQUFJLEdBQUcsVUFBUzlCLENBQUMsRUFBRStCLElBQUksRUFBRUMsRUFBRSxFQUFFO0NBQzVCLE1BQUEsT0FBTyxDQUFDLEdBQUcsR0FBR3pCLEdBQUcsQ0FBQyxDQUFDLEdBQUdjLEVBQUUsQ0FBQyxHQUFFZCxHQUFHLENBQUN5QixFQUFFLENBQUMsR0FBR2IsR0FBRyxDQUFDbkIsQ0FBQyxHQUFHK0IsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBR0MsRUFBRSxHQUFHQSxFQUFFLENBQUMsQ0FBQTtNQUN4RSxDQUFBOztDQUVIO0NBQ0E7S0FDRW5DLEVBQUUsQ0FBQ29DLFNBQVMsR0FBRyxVQUFTakMsQ0FBQyxFQUFFK0IsSUFBSSxFQUFFQyxFQUFFLEVBQUVFLElBQUksRUFBRTtDQUN6QyxNQUFBLElBQUlDLENBQUMsR0FBR2hCLEdBQUcsQ0FBQ25CLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRytCLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBR1osR0FBRyxDQUFDYSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQ3RDYixHQUFHLENBQUNuQixDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcrQixJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUdaLEdBQUcsQ0FBQ2EsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUNyQyxDQUFDLEdBQUdFLElBQUksSUFBSWxDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRytCLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJL0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHK0IsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUtDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBR0EsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7Q0FDMUUsTUFBQSxJQUFJSSxrQkFBa0IsR0FBRyxFQUFHN0IsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxHQUFHLENBQUNjLEVBQUUsQ0FBQyxHQUFHZCxHQUFHLENBQUN5QixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBR3pCLEdBQUcsQ0FBQ3lCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUMxQyxHQUFHLEdBQUd6QixHQUFHLENBQUMsQ0FBQyxHQUFHWSxHQUFHLENBQUNlLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFFLENBQUE7Q0FDekQsTUFBQSxJQUFJRyxjQUFjLEdBQUdELGtCQUFrQixHQUFHRCxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBR2hCLEdBQUcsQ0FBQ2UsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFFLENBQUUsQ0FBQTtDQUN4RSxNQUFBLE9BQU9HLGNBQWMsQ0FBQTtNQUN0QixDQUFBO0tBR0R4QyxFQUFFLENBQUN5QyxPQUFPLEdBQUcsVUFBU3RDLENBQUMsRUFBRTRCLFFBQVEsRUFBRUMsS0FBSyxFQUFFO0NBQ3hDLE1BQUEsT0FBUSxDQUFDWCxHQUFHLENBQUNsQixDQUFDLEdBQUc0QixRQUFRLENBQUMsR0FBQ0MsS0FBSyxHQUFJdEIsR0FBRyxDQUFDLENBQUMsR0FBR3NCLEtBQUssQ0FBQyxDQUFBO01BQ25ELENBQUE7Q0FFRGhDLElBQUFBLEVBQUUsQ0FBQzBDLElBQUksR0FBRzFDLEVBQUUsQ0FBQ3lDLE9BQU8sQ0FBQTtLQUVwQnpDLEVBQUUsQ0FBQzJDLEtBQUssR0FBRyxVQUFTeEMsQ0FBQyxFQUFFeUMsS0FBSyxFQUFFQyxJQUFJLEVBQUU7Q0FDbEMsTUFBQSxJQUFJYixLQUFLLEdBQUcsQ0FBQyxHQUFHYSxJQUFJLENBQUE7T0FDcEIsSUFBSTFDLENBQUMsR0FBRyxDQUFDLEVBQUU7Q0FDVCxRQUFBLE9BQU8sQ0FBQzBCLFFBQVEsQ0FBQTtDQUNqQixPQUFBO0NBQ0QsTUFBQSxJQUFJMUIsQ0FBQyxLQUFLLENBQUMsSUFBSXlDLEtBQUssS0FBSyxDQUFDLEVBQUk7Q0FDNUIsUUFBQSxPQUFPLENBQUNsQyxHQUFHLENBQUNzQixLQUFLLENBQUMsQ0FBQTtDQUN4QixPQUFLLE1BQU07U0FDTCxPQUFPLENBQUNZLEtBQUssR0FBRyxDQUFDLElBQUlsQyxHQUFHLENBQUNQLENBQUMsQ0FBQyxHQUFHQSxDQUFDLEdBQUc2QixLQUFLLEdBQUc5QixNQUFNLENBQUMwQyxLQUFLLENBQUMsR0FBR0EsS0FBSyxHQUFHbEMsR0FBRyxDQUFDc0IsS0FBSyxDQUFDLENBQUE7Q0FDN0UsT0FBQTtNQUNGLENBQUE7S0FFRGhDLEVBQUUsQ0FBQzhDLFFBQVEsR0FBRyxVQUFTM0MsQ0FBQyxFQUFFeUMsS0FBSyxFQUFFWixLQUFLLEVBQUU7T0FDcEMsSUFBSTdCLENBQUMsSUFBSSxDQUFDLEVBQUU7Q0FDVixRQUFBLE9BQU8sQ0FBQzBCLFFBQVEsQ0FBQTtDQUNqQixPQUFBO09BQ0QsT0FBTyxFQUFFZSxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUdsQyxHQUFHLENBQUNQLENBQUMsQ0FBQyxHQUFHNkIsS0FBSyxHQUFHN0IsQ0FBQyxHQUFHRCxNQUFNLENBQUMwQyxLQUFLLENBQUMsR0FBR0EsS0FBSyxHQUFHbEMsR0FBRyxDQUFDc0IsS0FBSyxDQUFDLENBQUE7TUFDOUUsQ0FBQTtLQUVIaEMsRUFBRSxDQUFDK0MsS0FBSyxHQUFJLFVBQVM1QyxDQUFDLEVBQUU2QyxPQUFPLEVBQUVDLEtBQUssRUFBRTtPQUN0QyxJQUFJOUMsQ0FBQyxJQUFJLENBQUMsRUFBRTtDQUNWLFFBQUEsT0FBTyxDQUFDMEIsUUFBUSxDQUFBO0NBQ2pCLE9BQUE7Q0FDRCxNQUFBLE9BQU8sQ0FBQ25CLEdBQUcsQ0FBQ1AsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHTyxHQUFHLENBQUMsQ0FBQyxHQUFHYyxFQUFFLENBQUMsR0FBR2QsR0FBRyxDQUFDdUMsS0FBSyxDQUFDLEdBQ3ZDM0IsR0FBRyxDQUFDWixHQUFHLENBQUNQLENBQUMsQ0FBQyxHQUFHNkMsT0FBTyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBR0MsS0FBSyxHQUFHQSxLQUFLLENBQUMsQ0FBQTtNQUN2RCxDQUFBO0tBRURqRCxFQUFFLENBQUNrRCxNQUFNLEdBQUcsVUFBUy9DLENBQUMsRUFBRTZCLEtBQUssRUFBRVksS0FBSyxFQUFFO09BQ3BDLElBQUl6QyxDQUFDLEdBQUc2QixLQUFLLEVBQUU7Q0FDYixRQUFBLE9BQU8sQ0FBQ0gsUUFBUSxDQUFBO0NBQ2pCLE9BQUE7T0FDRCxPQUFPbkIsR0FBRyxDQUFDa0MsS0FBSyxDQUFDLEdBQUdBLEtBQUssR0FBR2xDLEdBQUcsQ0FBQ3NCLEtBQUssQ0FBQyxHQUFHLENBQUNZLEtBQUssR0FBRyxDQUFDLElBQUlsQyxHQUFHLENBQUNQLENBQUMsQ0FBQyxDQUFBO01BQzlELENBQUE7S0FFREgsRUFBRSxDQUFDbUQsQ0FBQyxHQUFLLFVBQVNoRCxDQUFDLEVBQUU0QixRQUFRLEVBQUVDLEtBQUssRUFBRW9CLEVBQUUsRUFBRTtDQUN4Q0EsTUFBQUEsRUFBRSxHQUFHQSxFQUFFLEdBQUcsS0FBSyxHQUFHLEtBQUssR0FBR0EsRUFBRSxDQUFBO09BQzVCLE9BQU9sRCxNQUFNLENBQUMsQ0FBQ2tELEVBQUUsR0FBRyxDQUFDLElBQUUsQ0FBQyxDQUFDLEdBQUdsRCxNQUFNLENBQUNrRCxFQUFFLEdBQUMsQ0FBQyxDQUFDLEdBQUcxQyxHQUFHLENBQUNhLElBQUksQ0FBQ0MsRUFBRSxHQUFHNEIsRUFBRSxDQUFDLEdBQUdwQixLQUFLLENBQUMsR0FDOUR0QixHQUFHLENBQUNZLEdBQUcsQ0FBQyxDQUFDLEdBQUksQ0FBQyxHQUFDOEIsRUFBRSxHQUFJOUIsR0FBRyxDQUFDLENBQUNuQixDQUFDLEdBQUc0QixRQUFRLElBQUVDLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFb0IsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7TUFDeEUsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7S0FDRXBELEVBQUUsQ0FBQ3FELE9BQU8sR0FBRyxVQUFTbEQsQ0FBQyxFQUFFeUMsS0FBSyxFQUFFWixLQUFLLEVBQUU7Q0FDckMsTUFBQSxJQUFJN0IsQ0FBQyxHQUFHLENBQUMsRUFBRSxPQUFPLENBQUMwQixRQUFRLENBQUE7T0FDM0IsSUFBRzFCLENBQUMsS0FBSyxDQUFDLElBQUl5QyxLQUFLLEdBQUcsQ0FBQyxFQUFFLE9BQU9mLFFBQVEsQ0FBQTtPQUN4QyxJQUFJeUIsSUFBSSxHQUFHaEMsR0FBRyxDQUFDbkIsQ0FBQyxHQUFHNkIsS0FBSyxFQUFFWSxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUE7Q0FDcEMsTUFBQSxJQUFJVyxJQUFJLEdBQUdELElBQUksSUFBSW5ELENBQUMsR0FBRzZCLEtBQUssQ0FBQyxDQUFBO09BQzlCLE9BQU8sQ0FBQ3VCLElBQUksR0FBRzdDLEdBQUcsQ0FBQ2tDLEtBQUssR0FBR1UsSUFBSSxHQUFHdEIsS0FBSyxDQUFDLENBQUE7TUFDeEMsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7S0FDRWhDLEVBQUUsQ0FBQ3dELEtBQUssR0FBRyxVQUFTckQsQ0FBQyxFQUFFNEIsUUFBUSxFQUFFQyxLQUFLLEVBQUU7T0FDdEM3QixDQUFDLEdBQUdrQixHQUFHLENBQUMsQ0FBQ2xCLENBQUMsR0FBRzRCLFFBQVEsSUFBSUMsS0FBSyxDQUFDLENBQUE7Q0FDL0IsTUFBQSxJQUFJeUIsQ0FBQyxHQUFHckMsR0FBRyxDQUFDLENBQUNqQixDQUFDLENBQUMsQ0FBQTtDQUNmLE1BQUEsSUFBSXVELENBQUMsR0FBRyxHQUFHLEdBQUdELENBQUMsQ0FBQTtPQUNmLE9BQU8sRUFBRXRELENBQUMsR0FBR08sR0FBRyxDQUFDc0IsS0FBSyxHQUFHMEIsQ0FBQyxHQUFHQSxDQUFDLENBQUMsQ0FBQyxDQUFBO01BQ2pDLENBQUE7Q0FFRDFELElBQUFBLEVBQUUsQ0FBQzJELFNBQVMsR0FBRyxVQUFTeEQsQ0FBQyxFQUFFeUQsS0FBSyxFQUFFO09BQ2hDLElBQUlDLFNBQVMsR0FBRyxDQUFDLENBQUE7T0FDakIsSUFBSUMsZ0JBQWdCLEdBQUcsQ0FBQyxDQUFBO09BQ3hCLElBQUlDLHFCQUFxQixHQUFHLENBQUMsQ0FBQTtDQUM3QixNQUFBLElBQUluRCxDQUFDLEdBQUdnRCxLQUFLLENBQUNJLE1BQU0sQ0FBQTtPQUNwQixLQUFJLElBQUlDLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR3JELENBQUMsRUFBRXFELENBQUMsRUFBRSxFQUFFO0NBQ3pCSixRQUFBQSxTQUFTLElBQUlELEtBQUssQ0FBQ0ssQ0FBQyxDQUFDLENBQUE7Q0FDckJILFFBQUFBLGdCQUFnQixJQUFJNUQsTUFBTSxDQUFDMEQsS0FBSyxDQUFDSyxDQUFDLENBQUMsQ0FBQyxDQUFBO0NBQ3BDRixRQUFBQSxxQkFBcUIsSUFBSSxDQUFDSCxLQUFLLENBQUNLLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSXZELEdBQUcsQ0FBQ1AsQ0FBQyxDQUFDOEQsQ0FBQyxDQUFDLENBQUMsQ0FBQTtDQUNwRCxPQUFBO0NBQ0QsTUFBQSxPQUFPL0QsTUFBTSxDQUFDMkQsU0FBUyxDQUFDLEdBQUdDLGdCQUFnQixHQUFHQyxxQkFBcUIsQ0FBQTtNQUNwRSxDQUFBO0NBR0QvRCxJQUFBQSxFQUFFLENBQUNvQixHQUFHLEdBQUcsVUFBU2pCLENBQUMsRUFBRTBDLElBQUksRUFBRTtDQUN2QixNQUFBLE9BQU8xQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMwQixRQUFRLEdBQUduQixHQUFHLENBQUNtQyxJQUFJLENBQUMsR0FBRUEsSUFBSSxHQUFHMUMsQ0FBQyxDQUFBO01BQ2pELENBQUE7S0FFREgsRUFBRSxDQUFDa0UsSUFBSSxHQUFHLFVBQVMvRCxDQUFDLEVBQUVnRSxHQUFHLEVBQUVDLEdBQUcsRUFBRTtDQUM1QixNQUFBLE9BQVFqRSxDQUFDLEdBQUdnRSxHQUFHLElBQUloRSxDQUFDLEdBQUdpRSxHQUFHLEdBQUksQ0FBQ3ZDLFFBQVEsR0FBR25CLEdBQUcsQ0FBQyxDQUFDLElBQUkwRCxHQUFHLEdBQUdELEdBQUcsQ0FBQyxDQUFDLENBQUE7TUFDakUsQ0FBQTs7Q0FFSDtDQUNBOztDQUVFbkUsSUFBQUEsRUFBRSxDQUFDcUUsSUFBSSxHQUFHLFVBQVNsRSxDQUFDLEVBQUVtRSxJQUFJLEVBQUU7Q0FDeEIsTUFBQSxPQUFPLEVBQUVuRSxDQUFDLEtBQUssQ0FBQyxJQUFJQSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQzBCLFFBQVEsR0FBR25CLEdBQUcsQ0FBQ1AsQ0FBQyxHQUFHbUUsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHbkUsQ0FBQyxLQUFLLENBQUMsR0FBR21FLElBQUksQ0FBQyxDQUFDLENBQUE7TUFDbEYsQ0FBQTtDQUVEdEUsSUFBQUEsRUFBRSxDQUFDdUUsR0FBRyxHQUFHLFVBQVNwRSxDQUFDLEVBQUVxRSxLQUFLLEVBQUU7T0FDMUIsSUFBR3JFLENBQUMsR0FBRyxDQUFDLElBQUlBLENBQUMsR0FBR3FFLEtBQUssQ0FBQ1IsTUFBTSxFQUFFO0NBQzVCLFFBQUEsT0FBTyxDQUFDbkMsUUFBUSxDQUFBO0NBQ3RCLE9BQUssTUFBTTtTQUNMLE9BQU9uQixHQUFHLENBQUU4RCxLQUFLLENBQUNyRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUUsQ0FBQTtDQUMzQixPQUFBO01BQ0YsQ0FBQTtLQUVESCxFQUFFLENBQUN5RSxLQUFLLEdBQUcsVUFBU3RFLENBQUMsRUFBRXVFLElBQUksRUFBRUosSUFBSSxFQUFFO0NBQ2pDLE1BQUEsSUFBR25FLENBQUMsR0FBR3VFLElBQUksSUFBSXZFLENBQUMsR0FBRyxDQUFDLEVBQUU7Q0FDcEIsUUFBQSxPQUFPLENBQUMwQixRQUFRLENBQUE7Q0FDakIsT0FBQTtDQUNELE1BQUEsSUFBR3lDLElBQUksS0FBSyxDQUFDLElBQUlBLElBQUksS0FBSyxDQUFDLEVBQUU7U0FDM0IsT0FBUUksSUFBSSxHQUFHSixJQUFJLEtBQU1uRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMwQixRQUFRLENBQUE7Q0FDM0MsT0FBQTtPQUNELE9BQU9mLE9BQU8sQ0FBQzRELElBQUksRUFBRXZFLENBQUMsQ0FBQyxHQUFHQSxDQUFDLEdBQUdPLEdBQUcsQ0FBQzRELElBQUksQ0FBQyxHQUFHLENBQUNJLElBQUksR0FBR3ZFLENBQUMsSUFBSU8sR0FBRyxDQUFDLENBQUMsR0FBRzRELElBQUksQ0FBQyxDQUFBO01BQ3JFLENBQUE7S0FtQkR0RSxFQUFFLENBQUMyRSxNQUFNLEdBQUcsVUFBU3hFLENBQUMsRUFBRXVFLElBQUksRUFBRUosSUFBSSxFQUFFO09BQ2xDLElBQUduRSxDQUFDLEdBQUcsQ0FBQyxFQUFFO0NBQ1IsUUFBQSxPQUFPLENBQUMwQixRQUFRLENBQUE7Q0FDakIsT0FBQTtPQUNELE9BQU9mLE9BQU8sQ0FBQ1gsQ0FBQyxHQUFHdUUsSUFBSSxHQUFHLENBQUMsRUFBRUEsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHdkUsQ0FBQyxHQUFHTyxHQUFHLENBQUMsQ0FBQyxHQUFHNEQsSUFBSSxDQUFDLEdBQUdJLElBQUksR0FBR2hFLEdBQUcsQ0FBQzRELElBQUksQ0FBQyxDQUFBO01BQzlFLENBQUE7S0FFRHRFLEVBQUUsQ0FBQzRFLEtBQUssR0FBRyxVQUFTekUsQ0FBQyxFQUFFMEUsQ0FBQyxFQUFFakUsQ0FBQyxFQUFFRyxDQUFDLEVBQUU7Q0FDOUIsTUFBQSxJQUFHWixDQUFDLEdBQUcsQ0FBQyxJQUFJQSxDQUFDLEdBQUdZLENBQUMsRUFBRTtDQUNqQixRQUFBLE9BQU8sQ0FBQ2MsUUFBUSxDQUFBO0NBQ3RCLE9BQUssTUFBTTtTQUNQLE9BQU9mLE9BQU8sQ0FBQytELENBQUMsRUFBRTFFLENBQUMsQ0FBQyxHQUFHVyxPQUFPLENBQUNGLENBQUMsRUFBRUcsQ0FBQyxHQUFDWixDQUFDLENBQUMsR0FBR1csT0FBTyxDQUFDK0QsQ0FBQyxHQUFDakUsQ0FBQyxFQUFFRyxDQUFDLENBQUMsQ0FBQTtDQUN2RCxPQUFBO01BQ0YsQ0FBQTtDQUVEZixJQUFBQSxFQUFFLENBQUM4RSxJQUFJLEdBQUcsVUFBUzNFLENBQUMsRUFBRTRFLE1BQU0sRUFBRTtDQUMxQixNQUFBLE9BQU81RSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMwQixRQUFRLEdBQUduQixHQUFHLENBQUNxRSxNQUFNLENBQUMsR0FBRzVFLENBQUMsR0FBRzRFLE1BQU0sR0FBR3BFLFVBQVUsQ0FBQ1IsQ0FBQyxDQUFDLENBQUE7TUFDdEUsQ0FBQTtDQUVELElBQUEsT0FBT0gsRUFBRSxDQUFBO0NBQ1gsR0FBQyxDQUFDLENBQUE7Ozs7Ozs7Ozs7O0NDNVJGO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtHQUNDLENBQVVKLFVBQUFBLElBQUksRUFBRUMsT0FBTyxFQUFFO0tBSWYsSUFBa0NDLE1BQU0sQ0FBQ0MsT0FBTyxFQUFFO0NBQzdEO0NBQ0E7Q0FDQTtDQUNRRCxNQUFBQSxNQUFBLENBQUFDLE9BQUEsR0FBaUJGLE9BQU8sRUFBRSxDQUFBO0NBQ2xDLEtBQUssTUFBTTtDQUNYO0NBQ1FELE1BQUFBLElBQUksQ0FBQ29GLElBQUksR0FBR25GLE9BQU8sRUFBRSxDQUFBO0NBQzFCLEtBQUE7Q0FDSCxHQUFDLEVBQUNJLGNBQUksRUFBRSxZQUFVO0NBRWxCO0NBQ0E7O0NBRUE7Q0FDQTs7Q0FFQTtDQUNFLElBQUEsSUFBSWdGLEtBQUssR0FBRyxVQUFTZCxHQUFHLEVBQUVDLEdBQUcsRUFBRTtPQUM3QixPQUFPakQsSUFBSSxDQUFDK0QsTUFBTSxFQUFFLElBQUlkLEdBQUcsR0FBR0QsR0FBRyxDQUFDLEdBQUdBLEdBQUcsQ0FBQTtNQUN6QyxDQUFBOztDQUVIO0NBQ0UsSUFBQSxJQUFJZ0IsY0FBYyxHQUFHLFVBQVNoQixHQUFHLEVBQUVDLEdBQUcsRUFBRTtDQUN0QyxNQUFBLE9BQU9qRCxJQUFJLENBQUNpRSxLQUFLLENBQUNqRSxJQUFJLENBQUMrRCxNQUFNLEVBQUUsSUFBSWQsR0FBRyxHQUFHRCxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBR0EsR0FBRyxDQUFBO01BQ3pELENBQUE7O0NBRUg7Q0FDQTtDQUNBO0NBQ0UsSUFBQSxJQUFJa0IsS0FBSyxHQUFHLFVBQVNuRCxJQUFJLEVBQUVDLEVBQUUsRUFBRTtPQUM3QixJQUFJbUQsQ0FBQyxFQUFFQyxDQUFDLEVBQUVwRixDQUFDLEVBQUVLLENBQUMsRUFBRWdGLENBQUMsQ0FBQTtPQUNqQixHQUFHO0NBQ0RGLFFBQUFBLENBQUMsR0FBR25FLElBQUksQ0FBQytELE1BQU0sRUFBRSxDQUFBO1NBQ2pCSyxDQUFDLEdBQUcsTUFBTSxJQUFJcEUsSUFBSSxDQUFDK0QsTUFBTSxFQUFFLEdBQUcsR0FBRyxDQUFDLENBQUE7U0FDbEMvRSxDQUFDLEdBQUdtRixDQUFDLEdBQUcsUUFBUSxDQUFBO1NBQ2hCOUUsQ0FBQyxHQUFHVyxJQUFJLENBQUNFLEdBQUcsQ0FBQ2tFLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQTtDQUMxQkMsUUFBQUEsQ0FBQyxHQUFHckYsQ0FBQyxHQUFHQSxDQUFDLEdBQUdLLENBQUMsSUFBSSxPQUFPLEdBQUdBLENBQUMsR0FBRyxPQUFPLEdBQUdMLENBQUMsQ0FBQyxDQUFBO1FBQzVDLFFBQVFxRixDQUFDLEdBQUcsT0FBTyxLQUFLQSxDQUFDLEdBQUcsT0FBTyxJQUFJRCxDQUFDLEdBQUdBLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBR3BFLElBQUksQ0FBQ1QsR0FBRyxDQUFDNEUsQ0FBQyxDQUFDLEdBQUdBLENBQUMsR0FBR0EsQ0FBQyxDQUFDLEVBQUE7Q0FFekUsTUFBQSxPQUFRQyxDQUFDLEdBQUdELENBQUMsR0FBSW5ELEVBQUUsR0FBR0QsSUFBSSxDQUFBO01BQzNCLENBQUE7O0NBR0g7Q0FDQTtDQUNBO0NBQ0E7Q0FDRSxJQUFBLElBQUl1RCxVQUFVLEdBQUcsVUFBU0MsR0FBRyxFQUFFO0NBQzlCLE1BQUEsU0FBU0MsS0FBS0EsQ0FBQ0MsSUFBSSxFQUFFQyxNQUFNLEVBQUVDLFFBQVEsRUFBRTtDQUN0QyxRQUFBLElBQUlDLElBQUksQ0FBQTtXQUFFQyxDQUFDLENBQUE7V0FBS0MsS0FBSyxHQUFHLEdBQUU7U0FDMUIsS0FBSUYsSUFBSSxJQUFJRixNQUFNLEVBQUM7Q0FDdkI7Q0FDQTtDQUNBO0NBQ0tHLFVBQUFBLENBQUMsR0FBR0gsTUFBTSxDQUFDRSxJQUFJLENBQUMsQ0FBQTtXQUNoQixJQUFHLEVBQUVBLElBQUksSUFBSUgsSUFBSSxDQUFDLElBQUtBLElBQUksQ0FBQ0csSUFBSSxDQUFDLEtBQUtDLENBQUMsS0FBSyxFQUFFRCxJQUFJLElBQUlFLEtBQUssQ0FBQyxJQUFJQSxLQUFLLENBQUNGLElBQUksQ0FBQyxLQUFLQyxDQUFDLENBQUUsRUFBQzthQUNuRkosSUFBSSxDQUFDRyxJQUFJLENBQUMsR0FBR0QsUUFBUSxHQUFHQSxRQUFRLENBQUNFLENBQUMsQ0FBQyxHQUFHQSxDQUFDLENBQUE7Q0FDdkMsV0FBQTtDQUNELFNBQUE7Q0FDRCxRQUFBLE9BQU9KLElBQUksQ0FBQTtDQUNYLE9BQUE7T0FDRCxJQUFHLENBQUNGLEdBQUcsSUFBSSxPQUFPQSxHQUFHLElBQUksUUFBUSxJQUFJUSxNQUFNLENBQUNDLFNBQVMsQ0FBQ0MsUUFBUSxDQUFDQyxJQUFJLENBQUNYLEdBQUcsQ0FBQyxLQUFLLG1CQUFtQixFQUFDO0NBQ3BHO1NBQ0ksT0FBT0EsR0FBRyxDQUFDO0NBQ1gsT0FBQTs7Q0FDRCxNQUFBLElBQUdBLEdBQUcsQ0FBQ1ksUUFBUSxJQUFJLFdBQVcsSUFBSVosR0FBRyxFQUFDO0NBQ3pDO0NBQ0ksUUFBQSxPQUFPQSxHQUFHLENBQUNhLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztDQUMzQixPQUFBOztPQUNELElBQUdiLEdBQUcsWUFBWWMsSUFBSSxFQUFDO0NBQzFCO1NBQ0ksT0FBTyxJQUFJQSxJQUFJLENBQUNkLEdBQUcsQ0FBQ2UsT0FBTyxFQUFFLENBQUMsQ0FBQztDQUMvQixPQUFBOztPQUNELElBQUdmLEdBQUcsWUFBWWdCLE1BQU0sRUFBQztDQUM1QjtDQUNJLFFBQUEsT0FBTyxJQUFJQSxNQUFNLENBQUNoQixHQUFHLENBQUMsQ0FBQztDQUN2QixPQUFBOztDQUNELE1BQUEsSUFBSWlCLENBQUMsRUFBRTFDLENBQUMsRUFBRTJDLENBQUMsQ0FBQTtPQUNYLElBQUdsQixHQUFHLFlBQVltQixLQUFLLEVBQUM7Q0FDM0I7Q0FDSUYsUUFBQUEsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtDQUNOLFFBQUEsS0FBSTFDLENBQUMsR0FBRyxDQUFDLEVBQUUyQyxDQUFDLEdBQUdsQixHQUFHLENBQUMxQixNQUFNLEVBQUVDLENBQUMsR0FBRzJDLENBQUMsRUFBRSxFQUFFM0MsQ0FBQyxFQUFDO1dBQ3JDLElBQUdBLENBQUMsSUFBSXlCLEdBQUcsRUFBQzthQUNYaUIsQ0FBQyxDQUFDRyxJQUFJLENBQUNyQixVQUFVLENBQUNDLEdBQUcsQ0FBQ3pCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtDQUMxQixXQUFBO0NBQ0QsU0FBQTtDQUNMLE9BQUksTUFBTTtDQUNWO0NBQ0kwQyxRQUFBQSxDQUFDLEdBQUdqQixHQUFHLENBQUNxQixXQUFXLEdBQUcsSUFBSXJCLEdBQUcsQ0FBQ3FCLFdBQVcsRUFBRSxHQUFHLEVBQUUsQ0FBQTtDQUNoRCxPQUFBO0NBQ0QsTUFBQSxPQUFPcEIsS0FBSyxDQUFDZ0IsQ0FBQyxFQUFFakIsR0FBRyxFQUFFRCxVQUFVLENBQUMsQ0FBQTtNQUNoQyxDQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDRSxJQUFBLElBQUl1QixnQkFBZ0IsR0FBRyxVQUFTN0csQ0FBQyxFQUFFO0NBQ2pDLE1BQUEsSUFBRzBHLEtBQUssQ0FBQ0ksT0FBTyxDQUFDOUcsQ0FBQyxDQUFDLEVBQUU7U0FDbkIsSUFBRzBHLEtBQUssQ0FBQ0ksT0FBTyxDQUFDOUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7Q0FDOUI7V0FDUSxJQUFJK0csTUFBTSxHQUFHLEVBQUUsQ0FBQTtDQUNmLFVBQUEsS0FBSSxJQUFJakQsQ0FBQyxHQUFHLENBQUMsRUFBRUQsTUFBTSxHQUFHN0QsQ0FBQyxDQUFDNkQsTUFBTSxFQUFFQyxDQUFDLEdBQUdELE1BQU0sRUFBRUMsQ0FBQyxFQUFFLEVBQUU7YUFDakRpRCxNQUFNLENBQUNKLElBQUksQ0FBQ0UsZ0JBQWdCLENBQUM3RyxDQUFDLENBQUM4RCxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7Q0FDcEMsV0FBQTtDQUNELFVBQUEsT0FBT2lELE1BQU0sQ0FBQTtDQUNyQixTQUFPLE1BQU07Q0FBQTtDQUNMLFVBQUEsT0FBTy9HLENBQUMsQ0FBQ2dILEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQTtDQUNsQixTQUFBO0NBQ1AsT0FBSyxNQUFNO0NBQUE7Q0FDTCxRQUFBLE9BQU9oSCxDQUFDLENBQUE7Q0FDVCxPQUFBO01BQ0YsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0UsSUFBQSxJQUFJaUgsU0FBUyxHQUFHLFVBQVNDLE1BQU0sRUFBRTtDQUM3QixNQUFBLE9BQU8sT0FBT0EsTUFBTSxJQUFJLFFBQVEsSUFBSyxPQUFPQSxNQUFNLElBQUksUUFBUSxJQUFJQSxNQUFNLENBQUNOLFdBQVcsS0FBS08sTUFBTyxDQUFBO01BQ25HLENBQUE7O0NBRUg7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0UsSUFBQSxJQUFJQyxZQUFZLEdBQUcsVUFBU0MsR0FBRyxFQUFFQyxJQUFJLEVBQUU7T0FDckMsSUFBSUMsR0FBRyxHQUFHLElBQUliLEtBQUssQ0FBQ1csR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7Q0FDM0IsTUFBQSxJQUFJdkQsQ0FBQyxDQUFBO0NBQ0wsTUFBQSxJQUFHdUQsR0FBRyxDQUFDeEQsTUFBTSxJQUFJLENBQUMsRUFBRTtDQUFBO0NBQ2xCLFFBQUEsSUFBRyxPQUFPeUQsSUFBSSxLQUFLLFVBQVUsRUFBRTtDQUM3QixVQUFBLEtBQUl4RCxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUd1RCxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUV2RCxDQUFDLEVBQUUsRUFBRTtDQUMxQnlELFlBQUFBLEdBQUcsQ0FBQ3pELENBQUMsQ0FBQyxHQUFHd0QsSUFBSSxFQUFFLENBQUE7Q0FDaEIsV0FBQTtDQUNULFNBQU8sTUFBTTtDQUNMLFVBQUEsS0FBSXhELENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR3VELEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRXZELENBQUMsRUFBRSxFQUFFO0NBQzFCeUQsWUFBQUEsR0FBRyxDQUFDekQsQ0FBQyxDQUFDLEdBQUd3RCxJQUFJLENBQUE7Q0FDZCxXQUFBO0NBQ0YsU0FBQTtDQUNQLE9BQUssTUFBTSxJQUFHRCxHQUFHLENBQUN4RCxNQUFNLEdBQUcsQ0FBQyxFQUFFO0NBQ3hCLFFBQUEsS0FBSUMsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHdUQsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFdkQsQ0FBQyxFQUFFLEVBQUU7Q0FDMUJ5RCxVQUFBQSxHQUFHLENBQUN6RCxDQUFDLENBQUMsR0FBR3NELFlBQVksQ0FBQ0MsR0FBRyxDQUFDTCxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUVNLElBQUksQ0FBQyxDQUFBO0NBQzFDLFNBQUE7Q0FDUCxPQUFLLE1BQU07Q0FDTCxRQUFBLE1BQU0saURBQWlELENBQUE7Q0FDeEQsT0FBQTtDQUNELE1BQUEsT0FBT0MsR0FBRyxDQUFBO01BQ1gsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0UsSUFBQSxJQUFJQyxTQUFTLEdBQUcsVUFBUzFHLENBQUMsRUFBRTtPQUMxQixJQUFHNEYsS0FBSyxDQUFDSSxPQUFPLENBQUNoRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtDQUN0QixRQUFBLE9BQU8sQ0FBQ0EsQ0FBQyxDQUFDK0MsTUFBTSxDQUFDLENBQUM0RCxNQUFNLENBQUNELFNBQVMsQ0FBQzFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7Q0FDL0MsT0FBSyxNQUFNO0NBQ0wsUUFBQSxPQUFPLENBQUNBLENBQUMsQ0FBQytDLE1BQU0sQ0FBQyxDQUFBO0NBQ2xCLE9BQUE7TUFDRixDQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDRSxJQUFBLElBQUk2RCxXQUFXLEdBQUcsVUFBVUMsRUFBRSxFQUFFQyxFQUFFLEVBQUU7T0FDaEMsSUFBSUQsRUFBRSxDQUFDOUQsTUFBTSxJQUFJK0QsRUFBRSxDQUFDL0QsTUFBTSxFQUFFLE9BQU8sS0FBSyxDQUFBO0NBQ3hDLE1BQUEsS0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUc2RCxFQUFFLENBQUM5RCxNQUFNLEVBQUVDLENBQUMsRUFBRSxFQUFFO0NBQzFDO0NBQ1UsUUFBQSxJQUFJNEMsS0FBSyxDQUFDSSxPQUFPLENBQUNhLEVBQUUsQ0FBQzdELENBQUMsQ0FBQyxDQUFDLElBQUk0QyxLQUFLLENBQUNJLE9BQU8sQ0FBQ2MsRUFBRSxDQUFDOUQsQ0FBQyxDQUFDLENBQUMsRUFBRTtDQUM1RDtDQUNjLFVBQUEsSUFBSSxDQUFDNEQsV0FBVyxDQUFDQyxFQUFFLENBQUM3RCxDQUFDLENBQUMsRUFBRThELEVBQUUsQ0FBQzlELENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxLQUFLLENBQUE7VUFDL0MsTUFDSSxJQUFJNkQsRUFBRSxDQUFDN0QsQ0FBQyxDQUFDLElBQUk4RCxFQUFFLENBQUM5RCxDQUFDLENBQUMsRUFBRTtDQUNuQztDQUNjLFVBQUEsT0FBTyxLQUFLLENBQUE7Q0FDZixTQUFBO0NBQ0osT0FBQTtDQUNELE1BQUEsT0FBTyxJQUFJLENBQUE7TUFDZCxDQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDRSxJQUFBLElBQUkrRCxrQkFBa0IsR0FBRyxVQUFTL0csQ0FBQyxFQUFFZ0gsR0FBRyxFQUFFO0NBQ3hDLE1BQUEsSUFBR3BCLEtBQUssQ0FBQ0ksT0FBTyxDQUFDaEcsQ0FBQyxDQUFDLEVBQUU7U0FDbkIsSUFBSWlILE1BQU0sR0FBRyxJQUFJckIsS0FBSyxDQUFDNUYsQ0FBQyxDQUFDK0MsTUFBTSxDQUFDLENBQUE7Q0FDaEMsUUFBQSxLQUFJLElBQUlDLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR2hELENBQUMsQ0FBQytDLE1BQU0sRUFBRUMsQ0FBQyxFQUFFLEVBQUU7Q0FDaENpRSxVQUFBQSxNQUFNLENBQUNqRSxDQUFDLENBQUMsR0FBRytELGtCQUFrQixDQUFDL0csQ0FBQyxDQUFDZ0QsQ0FBQyxDQUFDLEVBQUVnRSxHQUFHLENBQUMsQ0FBQTtDQUMxQyxTQUFBO0NBQ0QsUUFBQSxPQUFPQyxNQUFNLENBQUE7Q0FDbkIsT0FBSyxNQUFNO1NBQ0wsT0FBT0QsR0FBRyxDQUFDaEgsQ0FBQyxDQUFDLENBQUE7Q0FDZCxPQUFBO01BQ0YsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7Q0FDQTtLQUNFLFNBQVNrSCxhQUFhQSxDQUFDQyxLQUFLLEVBQUU7Q0FDMUIsTUFBQSxLQUFLLElBQUluRSxDQUFDLEdBQUdtRSxLQUFLLENBQUNwRSxNQUFNLEdBQUcsQ0FBQyxFQUFFQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEVBQUUsRUFBRTtDQUN2QyxRQUFBLElBQUk3RCxDQUFDLEdBQUdlLElBQUksQ0FBQ2lFLEtBQUssQ0FBQ2pFLElBQUksQ0FBQytELE1BQU0sRUFBRSxJQUFJakIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7Q0FDM0MsUUFBQSxJQUFJb0UsSUFBSSxHQUFHRCxLQUFLLENBQUNuRSxDQUFDLENBQUMsQ0FBQTtDQUNuQm1FLFFBQUFBLEtBQUssQ0FBQ25FLENBQUMsQ0FBQyxHQUFHbUUsS0FBSyxDQUFDaEksQ0FBQyxDQUFDLENBQUE7Q0FDbkJnSSxRQUFBQSxLQUFLLENBQUNoSSxDQUFDLENBQUMsR0FBR2lJLElBQUksQ0FBQTtDQUNsQixPQUFBO0NBQ0QsTUFBQSxPQUFPRCxLQUFLLENBQUE7Q0FDZixLQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNFLElBQUEsSUFBSUUseUJBQXlCLEdBQUcsVUFBU3JILENBQUMsRUFBRWdILEdBQUcsRUFBRTtDQUMvQyxNQUFBLElBQUdwQixLQUFLLENBQUNJLE9BQU8sQ0FBQ2hHLENBQUMsQ0FBQyxFQUFFO0NBQ25CLFFBQUEsSUFBSXNILEdBQUcsR0FBR3RILENBQUMsQ0FBQytDLE1BQU0sQ0FBQTtDQUNsQixRQUFBLElBQUlDLENBQUMsQ0FBQTtTQUNMLElBQUl1RSxRQUFRLEdBQUcsRUFBRSxDQUFBO1NBQ2pCLEtBQUl2RSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdzRSxHQUFHLEVBQUV0RSxDQUFDLEVBQUUsRUFBRTtDQUN2QnVFLFVBQUFBLFFBQVEsQ0FBQ3ZFLENBQUMsQ0FBQyxHQUFHQSxDQUFDLENBQUE7Q0FDaEIsU0FBQTtTQUNEa0UsYUFBYSxDQUFDSyxRQUFRLENBQUMsQ0FBQTtTQUN2QixJQUFJTixNQUFNLEdBQUcsRUFBRSxDQUFBO1NBRWYsS0FBSWpFLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR3NFLEdBQUcsRUFBRXRFLENBQUMsRUFBRSxFQUFFO0NBQ3ZCLFVBQUEsSUFBSXdFLE9BQU8sR0FBR0QsUUFBUSxDQUFDdkUsQ0FBQyxDQUFDLENBQUE7Q0FDekJpRSxVQUFBQSxNQUFNLENBQUNPLE9BQU8sQ0FBQyxHQUFHVCxrQkFBa0IsQ0FBQy9HLENBQUMsQ0FBQ3dILE9BQU8sQ0FBQyxFQUFFUixHQUFHLENBQUMsQ0FBQTtDQUN0RCxTQUFBO0NBQ0QsUUFBQSxPQUFPQyxNQUFNLENBQUE7Q0FDbkIsT0FBSyxNQUFNO1NBQ0wsT0FBT0QsR0FBRyxDQUFDaEgsQ0FBQyxDQUFDLENBQUE7Q0FDZCxPQUFBO01BQ0YsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7S0FDRSxJQUFJeUgsVUFBVSxHQUFHLFVBQVNDLFdBQVcsRUFBRUMsT0FBTyxFQUFFQyxZQUFZLEVBQUU7Q0FDNURELE1BQUFBLE9BQU8sR0FBR0EsT0FBTyxJQUFJLEVBQUUsQ0FBQTtPQUN2QixPQUFPQSxPQUFPLENBQUNFLGNBQWMsQ0FBQ0gsV0FBVyxDQUFDLElBQ25DQyxPQUFPLENBQUNELFdBQVcsQ0FBQyxLQUFLSSxTQUFTLElBQ2xDSCxPQUFPLENBQUNELFdBQVcsQ0FBQyxLQUFLLElBQUksR0FBR0MsT0FBTyxDQUFDRCxXQUFXLENBQUMsR0FBR0UsWUFBWSxDQUFBO01BQzNFLENBQUE7O0NBRUg7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0tBQ0UsSUFBSUcsbUJBQW1CLEdBQUcsVUFBU0wsV0FBVyxFQUFFQyxPQUFPLEVBQUVwQixHQUFHLEVBQUVxQixZQUFZLEVBQUU7T0FDMUUsSUFBSUksS0FBSyxHQUFHUCxVQUFVLENBQUNDLFdBQVcsRUFBRUMsT0FBTyxFQUFFQyxZQUFZLENBQUMsQ0FBQTtDQUN6RCxNQUFBLElBQUcsQ0FBRWhDLEtBQUssQ0FBQ0ksT0FBTyxDQUFDZ0MsS0FBSyxDQUFDLEVBQUU7Q0FDekJBLFFBQUFBLEtBQUssR0FBRzFCLFlBQVksQ0FBQ0MsR0FBRyxFQUFFeUIsS0FBSyxDQUFDLENBQUE7Q0FDakMsT0FBQTtPQUNELElBQUcsQ0FBRXBCLFdBQVcsQ0FBRUYsU0FBUyxDQUFDc0IsS0FBSyxDQUFDLEVBQUV6QixHQUFHLENBQUMsRUFBRTtDQUN4QyxRQUFBLE1BQU0sYUFBYSxHQUFHbUIsV0FBVyxHQUFHLG9CQUFvQixHQUNsRGhCLFNBQVMsQ0FBQ3NCLEtBQUssQ0FBQyxHQUFHLG1CQUFtQixHQUFHekIsR0FBRyxHQUFHLElBQUksQ0FBQTtDQUMzRCxPQUFBO0NBQ0EsTUFBQSxPQUFPeUIsS0FBSyxDQUFBO01BQ2QsQ0FBQTs7Q0FFSDtDQUNBOztDQUVBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7S0FDRSxJQUFJQyxnQkFBZ0IsR0FBRyxVQUFTQyxJQUFJLEVBQUVDLEtBQUssRUFBRUMsS0FBSyxFQUFFO09BQ2xELElBQUdELEtBQUssR0FBR0MsS0FBSyxFQUFFO0NBQ2hCLFFBQUEsTUFBTSw4REFBOEQsQ0FBQTtDQUNyRSxPQUFBO09BQ0QsSUFBR0YsSUFBSSxLQUFLLE1BQU0sRUFBRTtTQUNsQixJQUFHQyxLQUFLLEtBQUssQ0FBQ3ZILFFBQVEsSUFBSXdILEtBQUssS0FBS3hILFFBQVEsRUFBRTtDQUM1QyxVQUFBLE9BQU8sR0FBRyxDQUFBO0NBQ2xCLFNBQU8sTUFBTSxJQUFHdUgsS0FBSyxLQUFLLENBQUN2SCxRQUFRLEVBQUU7V0FDN0IsT0FBT3dILEtBQUssR0FBRyxHQUFHLENBQUE7Q0FDMUIsU0FBTyxNQUFNLElBQUdBLEtBQUssS0FBS3hILFFBQVEsRUFBRTtXQUM1QixPQUFPdUgsS0FBSyxHQUFHLEdBQUcsQ0FBQTtDQUMxQixTQUFPLE1BQU0sSUFBR0EsS0FBSyxJQUFJQyxLQUFLLEVBQUU7Q0FDeEIsVUFBQSxPQUFPLENBQUNELEtBQUssR0FBR0MsS0FBSyxJQUFJLENBQUMsQ0FBQTtDQUMzQixTQUFBO0NBQ1AsT0FBSyxNQUFNLElBQUdGLElBQUksS0FBSyxLQUFLLEVBQUU7U0FDeEIsSUFBR0MsS0FBSyxLQUFLLENBQUN2SCxRQUFRLElBQUl3SCxLQUFLLEtBQUt4SCxRQUFRLEVBQUU7Q0FDNUMsVUFBQSxPQUFPLENBQUMsQ0FBQTtDQUNoQixTQUFPLE1BQU0sSUFBR3VILEtBQUssS0FBSyxDQUFDdkgsUUFBUSxFQUFFO1dBQzdCLE9BQU93SCxLQUFLLEdBQUcsQ0FBQyxDQUFBO0NBQ3hCLFNBQU8sTUFBTSxJQUFHQSxLQUFLLEtBQUt4SCxRQUFRLEVBQUU7V0FDNUIsT0FBT3VILEtBQUssR0FBRyxDQUFDLENBQUE7Q0FDeEIsU0FBTyxNQUFNLElBQUdBLEtBQUssSUFBSUMsS0FBSyxFQUFDO1dBQ3ZCLE9BQU9sSSxJQUFJLENBQUNtSSxLQUFLLENBQUMsQ0FBQ0YsS0FBSyxHQUFHQyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUE7Q0FDdkMsU0FBQTtDQUNQLE9BQUssTUFBTSxJQUFHRixJQUFJLEtBQUssUUFBUSxFQUFFO0NBQzNCLFFBQUEsT0FBTyxDQUFDLENBQUE7Q0FDVCxPQUFBO0NBQ0QsTUFBQSxNQUFNLHlDQUF5QyxHQUFHQSxJQUFJLEdBQUcsR0FBRyxHQUFHQyxLQUFLLEdBQUcsSUFBSSxHQUFHQyxLQUFLLEdBQUcsR0FBRyxDQUFBO01BQzFGLENBQUE7O0NBRUg7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNFLElBQUEsSUFBSUUsZUFBZSxHQUFJLFVBQVNDLGtCQUFrQixFQUFFQyxVQUFVLEVBQUU7Q0FDOUQsTUFBQSxJQUFJQyxNQUFNLEdBQUdqRSxVQUFVLENBQUMrRCxrQkFBa0IsQ0FBQyxDQUFBO0NBQzNDLE1BQUEsS0FBSyxJQUFJRyxVQUFVLElBQUlELE1BQU0sRUFBRTtDQUFFLFFBQUEsSUFBSSxDQUFDQSxNQUFNLENBQUNaLGNBQWMsQ0FBQ2EsVUFBVSxDQUFDLEVBQUUsU0FBQTtDQUN2RSxRQUFBLElBQUlDLEtBQUssR0FBR0YsTUFBTSxDQUFDQyxVQUFVLENBQUMsQ0FBQTtDQUM5QixRQUFBLElBQUksQ0FBQ0MsS0FBSyxDQUFDZCxjQUFjLENBQUMsTUFBTSxDQUFDLEVBQUU7V0FDakNjLEtBQUssQ0FBQ1QsSUFBSSxHQUFHLE1BQU0sQ0FBQTtDQUNwQixTQUFBO0NBQ0QsUUFBQSxJQUFHLENBQUNTLEtBQUssQ0FBQ2QsY0FBYyxDQUFDLEtBQUssQ0FBQyxFQUFFO0NBQy9CYyxVQUFBQSxLQUFLLENBQUNwQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtDQUNoQixTQUFBO0NBQ0QsUUFBQSxJQUFHSixTQUFTLENBQUN3QyxLQUFLLENBQUNwQyxHQUFHLENBQUMsRUFBRTtDQUN2Qm9DLFVBQUFBLEtBQUssQ0FBQ3BDLEdBQUcsR0FBRyxDQUFDb0MsS0FBSyxDQUFDcEMsR0FBRyxDQUFDLENBQUE7Q0FDeEIsU0FBQTtDQUNELFFBQUEsSUFBR29DLEtBQUssQ0FBQ1QsSUFBSSxJQUFJLFFBQVEsRUFBRTtXQUN6QlMsS0FBSyxDQUFDUCxLQUFLLEdBQUcsQ0FBQyxDQUFBO1dBQ2ZPLEtBQUssQ0FBQ1IsS0FBSyxHQUFHLENBQUMsQ0FBQTtDQUNoQixTQUFBO0NBQ0QsUUFBQSxJQUFHLENBQUNRLEtBQUssQ0FBQ2QsY0FBYyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1dBQ2pDYyxLQUFLLENBQUNQLEtBQUssR0FBR3hILFFBQVEsQ0FBQTtDQUN2QixTQUFBO0NBQ0QsUUFBQSxJQUFHLENBQUMrSCxLQUFLLENBQUNkLGNBQWMsQ0FBQyxPQUFPLENBQUMsRUFBRTtDQUNqQ2MsVUFBQUEsS0FBSyxDQUFDUixLQUFLLEdBQUcsQ0FBQ3ZILFFBQVEsQ0FBQTtDQUN4QixTQUFBO0NBRUQsUUFBQSxJQUFHK0gsS0FBSyxDQUFDZCxjQUFjLENBQUMsTUFBTSxDQUFDLEVBQUU7Q0FDdkM7Q0FDUSxVQUFBLElBQUdqQixXQUFXLENBQUMrQixLQUFLLENBQUNwQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLE9BQU9vQyxLQUFLLENBQUNuQyxJQUFJLEtBQUssVUFBVSxFQUFFO0NBQzVFO0NBQ1VtQyxZQUFBQSxLQUFLLENBQUNuQyxJQUFJLEdBQUdtQyxLQUFLLENBQUNuQyxJQUFJLEVBQUUsQ0FBQTtZQUMxQixNQUFNLElBQUcsQ0FBQ0ksV0FBVyxDQUFDK0IsS0FBSyxDQUFDcEMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDWCxLQUFLLENBQUNJLE9BQU8sQ0FBQzJDLEtBQUssQ0FBQ25DLElBQUksQ0FBQyxFQUFFO0NBQzlFO0NBQ0E7Q0FDQTtDQUNRbUMsWUFBQUEsS0FBSyxDQUFDbkMsSUFBSSxHQUFHRixZQUFZLENBQUNxQyxLQUFLLENBQUNwQyxHQUFHLEVBQUVvQyxLQUFLLENBQUNuQyxJQUFJLENBQUMsQ0FBQTtDQUMvQyxXQUFBO0NBQ1QsU0FBTyxNQUFNO0NBQUE7V0FDTCxJQUFHSSxXQUFXLENBQUMrQixLQUFLLENBQUNwQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO0NBQzlCb0MsWUFBQUEsS0FBSyxDQUFDbkMsSUFBSSxHQUFHZ0MsVUFBVSxDQUFDRyxLQUFLLENBQUNULElBQUksRUFBRVMsS0FBSyxDQUFDUixLQUFLLEVBQUVRLEtBQUssQ0FBQ1AsS0FBSyxDQUFDLENBQUE7Q0FDdkUsV0FBUyxNQUFNO2FBQ0xPLEtBQUssQ0FBQ25DLElBQUksR0FBR0YsWUFBWSxDQUFDcUMsS0FBSyxDQUFDcEMsR0FBRyxFQUFFLFlBQVc7Q0FDOUMsY0FBQSxPQUFPaUMsVUFBVSxDQUFDRyxLQUFLLENBQUNULElBQUksRUFBRVMsS0FBSyxDQUFDUixLQUFLLEVBQUVRLEtBQUssQ0FBQ1AsS0FBSyxDQUFDLENBQUE7Q0FDbkUsYUFBVyxDQUFDLENBQUE7Q0FDSCxXQUFBO0NBQ0YsU0FBQTtDQUNGLE9BQUE7Q0FDRCxNQUFBLE9BQU9LLE1BQU0sQ0FBQTtNQUNkLENBQUE7O0NBR0g7Q0FDQTs7Q0FHQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0tBQ0UsSUFBSUcsT0FBTyxHQUFHLFVBQVNILE1BQU0sRUFBRUksS0FBSyxFQUFFQyxRQUFRLEVBQUU7T0FDOUMsSUFBSSxDQUFDTCxNQUFNLEdBQUdBLE1BQU0sQ0FBQTtPQUNwQixJQUFJLENBQUNJLEtBQUssR0FBR0EsS0FBSyxDQUFBO09BQ2xCLElBQUksQ0FBQ0MsUUFBUSxHQUFHQSxRQUFRLENBQUE7TUFDekIsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0VGLElBQUFBLE9BQU8sQ0FBQzFELFNBQVMsQ0FBQzZELElBQUksR0FBRyxZQUFXO0NBQ2xDLE1BQUEsTUFBTSx3Q0FBd0MsQ0FBQTtNQUMvQyxDQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNFSCxJQUFBQSxPQUFPLENBQUMxRCxTQUFTLENBQUM4RCxnQkFBZ0IsR0FBRyxZQUFXO0NBQ2xEO01BQ0csQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7Q0FDRUosSUFBQUEsT0FBTyxDQUFDMUQsU0FBUyxDQUFDK0QsZUFBZSxHQUFHLFlBQVc7Q0FDakQ7TUFDRyxDQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNFTCxJQUFBQSxPQUFPLENBQUMxRCxTQUFTLENBQUNnRSxJQUFJLEdBQUcsWUFBVztDQUN0QztDQUNJLE1BQUEsT0FBTyxFQUFFLENBQUE7TUFDVixDQUFBOztDQUdIO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDRSxJQUFBLElBQUlDLHVCQUF1QixHQUFHLFVBQVNWLE1BQU0sRUFBRUksS0FBSyxFQUFFQyxRQUFRLEVBQUVuQixPQUFPLEVBQUV5QixpQkFBaUIsRUFBRTtPQUMxRlIsT0FBTyxDQUFDeEQsSUFBSSxDQUFDLElBQUksRUFBRXFELE1BQU0sRUFBRUksS0FBSyxFQUFFQyxRQUFRLENBQUMsQ0FBQTtPQUUzQyxJQUFJTyxXQUFXLEdBQUdwRSxNQUFNLENBQUNxRSxJQUFJLENBQUMsSUFBSSxDQUFDYixNQUFNLENBQUMsQ0FBQTtDQUMxQyxNQUFBLElBQUdZLFdBQVcsQ0FBQ3RHLE1BQU0sSUFBSyxDQUFDLEVBQUU7Q0FDM0IsUUFBQSxNQUFNLHdEQUF3RCxDQUFBO0NBQy9ELE9BQUE7Q0FDRCxNQUFBLElBQUksQ0FBQzJGLFVBQVUsR0FBR1csV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFBO09BQ2hDLElBQUlWLEtBQUssR0FBRyxJQUFJLENBQUNGLE1BQU0sQ0FBQyxJQUFJLENBQUNDLFVBQVUsQ0FBQyxDQUFBO09BQ3hDLElBQUcsQ0FBQzlCLFdBQVcsQ0FBQytCLEtBQUssQ0FBQ3BDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7Q0FDL0IsUUFBQSxNQUFNLHdFQUF3RSxDQUFBO0NBQy9FLE9BQUE7Q0FDRCxNQUFBLElBQUksQ0FBQzRCLEtBQUssR0FBR1EsS0FBSyxDQUFDUixLQUFLLENBQUE7Q0FDeEIsTUFBQSxJQUFJLENBQUNDLEtBQUssR0FBR08sS0FBSyxDQUFDUCxLQUFLLENBQUE7T0FFeEIsSUFBSSxDQUFDbUIsY0FBYyxHQUFPOUIsVUFBVSxDQUFDLGdCQUFnQixFQUFFRSxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUE7T0FDbEUsSUFBSSxDQUFDNkIsVUFBVSxHQUFXL0IsVUFBVSxDQUFDLFlBQVksRUFBRUUsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFBO09BQy9ELElBQUksQ0FBQzhCLGNBQWMsR0FBT2hDLFVBQVUsQ0FBQyxnQkFBZ0IsRUFBRUUsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFBO09BQ3JFLElBQUksQ0FBQytCLGtCQUFrQixHQUFHakMsVUFBVSxDQUFDLG9CQUFvQixFQUFFRSxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQUE7T0FDeEUsSUFBSSxDQUFDZ0Msa0JBQWtCLEdBQUdsQyxVQUFVLENBQUMsb0JBQW9CLEVBQUVFLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQTtPQUN6RSxJQUFJLENBQUNpQyxXQUFXLEdBQVVuQyxVQUFVLENBQUMsYUFBYSxFQUFFRSxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUE7T0FFbEUsSUFBSSxDQUFDeUIsaUJBQWlCLEdBQUdBLGlCQUFpQixDQUFBO09BRTFDLElBQUksQ0FBQ1MsZ0JBQWdCLEdBQUcsQ0FBQyxDQUFBO09BQ3pCLElBQUksQ0FBQ0MsV0FBVyxHQUFHLENBQUMsQ0FBQTtPQUNwQixJQUFJLENBQUNDLHlCQUF5QixHQUFHLENBQUMsQ0FBQTtNQUNuQyxDQUFBO0tBRURaLHVCQUF1QixDQUFDakUsU0FBUyxHQUFHRCxNQUFNLENBQUMrRSxNQUFNLENBQUNwQixPQUFPLENBQUMxRCxTQUFTLENBQUMsQ0FBQTtDQUNwRWlFLElBQUFBLHVCQUF1QixDQUFDakUsU0FBUyxDQUFDWSxXQUFXLEdBQUdxRCx1QkFBdUIsQ0FBQTtDQUV2RUEsSUFBQUEsdUJBQXVCLENBQUNqRSxTQUFTLENBQUM2RCxJQUFJLEdBQUcsWUFBVztPQUNoRCxJQUFJa0IsV0FBVyxHQUFHLElBQUksQ0FBQ3BCLEtBQUssQ0FBQyxJQUFJLENBQUNILFVBQVUsQ0FBQyxDQUFBO09BQzdDLElBQUl3QixjQUFjLEdBQUcsSUFBSSxDQUFDZCxpQkFBaUIsQ0FBQ2EsV0FBVyxFQUFFLElBQUksQ0FBQ1YsY0FBYyxDQUFDLENBQUE7T0FDN0UsSUFBR1csY0FBYyxHQUFHLElBQUksQ0FBQy9CLEtBQUssSUFBSStCLGNBQWMsR0FBRyxJQUFJLENBQUM5QixLQUFLLEVBQUUsQ0FHOUQsTUFBTTtDQUFBO0NBQ0wsUUFBQSxJQUFJK0IsYUFBYSxHQUFHLElBQUksQ0FBQ3JCLFFBQVEsRUFBRSxDQUFBO1NBQ25DLElBQUksQ0FBQ0QsS0FBSyxDQUFDLElBQUksQ0FBQ0gsVUFBVSxDQUFDLEdBQUd3QixjQUFjLENBQUE7Q0FDNUMsUUFBQSxJQUFJRSxhQUFhLEdBQUcsSUFBSSxDQUFDdEIsUUFBUSxFQUFFLENBQUE7U0FDbkMsSUFBSXVCLFdBQVcsR0FBR25LLElBQUksQ0FBQ0MsR0FBRyxDQUFDaUssYUFBYSxHQUFHRCxhQUFhLENBQUMsQ0FBQTtDQUN6RCxRQUFBLElBQUdFLFdBQVcsR0FBR25LLElBQUksQ0FBQytELE1BQU0sRUFBRSxFQUFFO0NBQ3hDO0NBQ1UsVUFBQSxJQUFHLElBQUksQ0FBQzJGLFdBQVcsRUFBRSxJQUFJLENBQUNDLGdCQUFnQixFQUFFLENBQUE7Q0FDdEQsU0FBUyxNQUFNO0NBQ2Y7V0FDVSxJQUFJLENBQUNoQixLQUFLLENBQUMsSUFBSSxDQUFDSCxVQUFVLENBQUMsR0FBR3VCLFdBQVcsQ0FBQTtDQUMxQyxTQUFBO0NBQ0YsT0FBQTtPQUNELElBQUcsSUFBSSxDQUFDTCxXQUFXLEVBQUU7U0FDbkIsSUFBSSxDQUFDRyx5QkFBeUIsRUFBRyxDQUFBO0NBQ2pDLFFBQUEsSUFBRyxJQUFJLENBQUNBLHlCQUF5QixJQUFJLElBQUksQ0FBQ1AsVUFBVSxFQUFFO0NBQUE7V0FDcEQsSUFBSSxDQUFDTSxXQUFXLEVBQUcsQ0FBQTtXQUNuQixJQUFJUSxpQkFBaUIsR0FDbkJwSyxJQUFJLENBQUNnRCxHQUFHLENBQUMsSUFBSSxDQUFDdUcsY0FBYyxFQUNuQixJQUFJLENBQUNDLGtCQUFrQixHQUFHeEosSUFBSSxDQUFDSSxJQUFJLENBQUMsSUFBSSxDQUFDd0osV0FBVyxDQUFDLENBQUMsQ0FBQTtXQUNqRSxJQUFHLElBQUksQ0FBQ0QsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDTCxVQUFVLEdBQUcsSUFBSSxDQUFDRyxrQkFBa0IsRUFBRTthQUNwRSxJQUFJLENBQUNKLGNBQWMsSUFBSWUsaUJBQWlCLENBQUE7Q0FDcEQsV0FBVyxNQUFNO2FBQ0wsSUFBSSxDQUFDZixjQUFjLElBQUllLGlCQUFpQixDQUFBO0NBQ3pDLFdBQUE7V0FDRCxJQUFJLENBQUNULGdCQUFnQixHQUFHLENBQUMsQ0FBQTtXQUN6QixJQUFJLENBQUNFLHlCQUF5QixHQUFHLENBQUMsQ0FBQTtDQUNuQyxTQUFBO0NBQ0YsT0FBQTtDQUNELE1BQUEsT0FBTyxJQUFJLENBQUNsQixLQUFLLENBQUMsSUFBSSxDQUFDSCxVQUFVLENBQUMsQ0FBQTtNQUNyQyxDQUFBO0NBRURTLElBQUFBLHVCQUF1QixDQUFDakUsU0FBUyxDQUFDOEQsZ0JBQWdCLEdBQUcsWUFBVztPQUM5RCxJQUFJLENBQUNZLFdBQVcsR0FBRyxJQUFJLENBQUE7TUFDeEIsQ0FBQTtDQUVEVCxJQUFBQSx1QkFBdUIsQ0FBQ2pFLFNBQVMsQ0FBQytELGVBQWUsR0FBRyxZQUFXO09BQzdELElBQUksQ0FBQ1csV0FBVyxHQUFHLEtBQUssQ0FBQTtNQUN6QixDQUFBO0NBRURULElBQUFBLHVCQUF1QixDQUFDakUsU0FBUyxDQUFDZ0UsSUFBSSxHQUFHLFlBQVc7T0FDbEQsT0FBTztTQUNMSyxjQUFjLEVBQUUsSUFBSSxDQUFDQSxjQUFjO1NBQ25DSyxXQUFXLEVBQUUsSUFBSSxDQUFDQSxXQUFXO1NBQzdCQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUNBLGdCQUFnQjtTQUN2Q0UseUJBQXlCLEVBQUUsSUFBSSxDQUFDQSx5QkFBeUI7U0FDekRELFdBQVcsRUFBRSxJQUFJLENBQUNBLFdBQUFBO1FBQ25CLENBQUE7TUFDRixDQUFBOztDQUdIO0NBQ0E7Q0FDQTtDQUNFLElBQUEsSUFBSVMsZUFBZSxHQUFHLFVBQVNOLFdBQVcsRUFBRVYsY0FBYyxFQUFFO09BQzFELE9BQU9uRixLQUFLLENBQUM2RixXQUFXLEVBQUcvSixJQUFJLENBQUNDLEdBQUcsQ0FBQ29KLGNBQWMsQ0FBQyxDQUFDLENBQUE7TUFDckQsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0tBQ0UsSUFBSWlCLHFCQUFxQixHQUFHLFVBQVMvQixNQUFNLEVBQUVJLEtBQUssRUFBRUMsUUFBUSxFQUFFbkIsT0FBTyxFQUFFO0NBQ3JFd0IsTUFBQUEsdUJBQXVCLENBQUMvRCxJQUFJLENBQUMsSUFBSSxFQUFFcUQsTUFBTSxFQUFFSSxLQUFLLEVBQUVDLFFBQVEsRUFBRW5CLE9BQU8sRUFBRTRDLGVBQWUsQ0FBQyxDQUFBO01BQ3RGLENBQUE7S0FFREMscUJBQXFCLENBQUN0RixTQUFTLEdBQUdELE1BQU0sQ0FBQytFLE1BQU0sQ0FBQ2IsdUJBQXVCLENBQUNqRSxTQUFTLENBQUMsQ0FBQTtDQUNsRnNGLElBQUFBLHFCQUFxQixDQUFDdEYsU0FBUyxDQUFDWSxXQUFXLEdBQUcwRSxxQkFBcUIsQ0FBQTs7Q0FFckU7Q0FDQTtDQUNBO0NBQ0UsSUFBQSxJQUFJQyx3QkFBd0IsR0FBRyxVQUFTUixXQUFXLEVBQUVWLGNBQWMsRUFBRTtDQUNuRSxNQUFBLE9BQU9ySixJQUFJLENBQUNtSSxLQUFLLENBQUNqRSxLQUFLLENBQUM2RixXQUFXLEVBQUcvSixJQUFJLENBQUNDLEdBQUcsQ0FBQ29KLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtNQUNqRSxDQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7S0FDRSxJQUFJbUIsb0JBQW9CLEdBQUcsVUFBU2pDLE1BQU0sRUFBRUksS0FBSyxFQUFFQyxRQUFRLEVBQUVuQixPQUFPLEVBQUU7Q0FDcEV3QixNQUFBQSx1QkFBdUIsQ0FBQy9ELElBQUksQ0FBQyxJQUFJLEVBQUVxRCxNQUFNLEVBQUVJLEtBQUssRUFBRUMsUUFBUSxFQUFFbkIsT0FBTyxFQUFFOEMsd0JBQXdCLENBQUMsQ0FBQTtNQUMvRixDQUFBO0tBRURDLG9CQUFvQixDQUFDeEYsU0FBUyxHQUFHRCxNQUFNLENBQUMrRSxNQUFNLENBQUNiLHVCQUF1QixDQUFDakUsU0FBUyxDQUFDLENBQUE7Q0FDakZ3RixJQUFBQSxvQkFBb0IsQ0FBQ3hGLFNBQVMsQ0FBQ1ksV0FBVyxHQUFHNEUsb0JBQW9CLENBQUE7O0NBR25FO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNFLElBQUEsSUFBSUMsa0NBQWtDLEdBQUcsVUFBU2xDLE1BQU0sRUFBRUksS0FBSyxFQUFFQyxRQUFRLEVBQUVuQixPQUFPLEVBQUVpRCxVQUFVLEVBQUU7T0FDOUZoQyxPQUFPLENBQUN4RCxJQUFJLENBQUMsSUFBSSxFQUFFcUQsTUFBTSxFQUFFSSxLQUFLLEVBQUVDLFFBQVEsQ0FBQyxDQUFBO09BRTNDLElBQUlPLFdBQVcsR0FBR3BFLE1BQU0sQ0FBQ3FFLElBQUksQ0FBQyxJQUFJLENBQUNiLE1BQU0sQ0FBQyxDQUFBO0NBQzFDLE1BQUEsSUFBR1ksV0FBVyxDQUFDdEcsTUFBTSxJQUFLLENBQUMsRUFBRTtDQUMzQixRQUFBLE1BQU0sMEVBQTBFLENBQUE7Q0FDakYsT0FBQTtDQUNELE1BQUEsSUFBSSxDQUFDMkYsVUFBVSxHQUFHVyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUE7T0FDaEMsSUFBSVYsS0FBSyxHQUFHLElBQUksQ0FBQ0YsTUFBTSxDQUFDLElBQUksQ0FBQ0MsVUFBVSxDQUFDLENBQUE7Q0FDeEMsTUFBQSxJQUFJLENBQUNQLEtBQUssR0FBR1EsS0FBSyxDQUFDUixLQUFLLENBQUE7Q0FDeEIsTUFBQSxJQUFJLENBQUNDLEtBQUssR0FBR08sS0FBSyxDQUFDUCxLQUFLLENBQUE7Q0FDeEIsTUFBQSxJQUFJLENBQUM3QixHQUFHLEdBQUdvQyxLQUFLLENBQUNwQyxHQUFHLENBQUE7Q0FFcEIsTUFBQSxJQUFJLENBQUNnRCxjQUFjLEdBQU94QixtQkFBbUIsQ0FBQyxnQkFBZ0IsRUFBRUosT0FBTyxFQUFFLElBQUksQ0FBQ3BCLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQTtDQUNyRixNQUFBLElBQUksQ0FBQ2lELFVBQVUsR0FBV3pCLG1CQUFtQixDQUFDLFlBQVksRUFBRUosT0FBTyxFQUFFLElBQUksQ0FBQ3BCLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQTtDQUNsRixNQUFBLElBQUksQ0FBQ2tELGNBQWMsR0FBTzFCLG1CQUFtQixDQUFDLGdCQUFnQixFQUFFSixPQUFPLEVBQUUsSUFBSSxDQUFDcEIsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFBO0NBQ3hGLE1BQUEsSUFBSSxDQUFDbUQsa0JBQWtCLEdBQUczQixtQkFBbUIsQ0FBQyxvQkFBb0IsRUFBRUosT0FBTyxFQUFFLElBQUksQ0FBQ3BCLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQTtDQUMzRixNQUFBLElBQUksQ0FBQ29ELGtCQUFrQixHQUFHNUIsbUJBQW1CLENBQUMsb0JBQW9CLEVBQUVKLE9BQU8sRUFBRSxJQUFJLENBQUNwQixHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUE7Q0FDNUYsTUFBQSxJQUFJLENBQUNxRCxXQUFXLEdBQVU3QixtQkFBbUIsQ0FBQyxhQUFhLEVBQUVKLE9BQU8sRUFBRSxJQUFJLENBQUNwQixHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUE7O0NBRXpGO0NBQ0E7T0FDSSxJQUFJc0Usa0JBQWtCLEdBQ3BCLFVBQVN0RSxHQUFHLEVBQUV1RSxRQUFRLEVBQUVoQyxRQUFRLEVBQUVTLGNBQWMsRUFBRUMsVUFBVSxFQUFFQyxjQUFjLEVBQUVDLGtCQUFrQixFQUFFQyxrQkFBa0IsRUFBRUMsV0FBVyxFQUFFO1NBQ25JLElBQUltQixXQUFXLEdBQUcsRUFBRSxDQUFBO0NBQ3BCLFFBQUEsSUFBR3hFLEdBQUcsQ0FBQ3hELE1BQU0sS0FBSyxDQUFDLEVBQUU7Q0FDbkIsVUFBQSxLQUFJLElBQUlDLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR3VELEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRXZELENBQUMsRUFBRSxFQUFFO0NBQzlCLFlBQUEsSUFBSWdJLFVBQVUsR0FBRztDQUFDekIsY0FBQUEsY0FBYyxFQUFFQSxjQUFjLENBQUN2RyxDQUFDLENBQUM7Q0FBRXdHLGNBQUFBLFVBQVUsRUFBRUEsVUFBVSxDQUFDeEcsQ0FBQyxDQUFDO0NBQzVFeUcsY0FBQUEsY0FBYyxFQUFFQSxjQUFjLENBQUN6RyxDQUFDLENBQUM7Q0FBRTBHLGNBQUFBLGtCQUFrQixFQUFFQSxrQkFBa0IsQ0FBQzFHLENBQUMsQ0FBQztDQUM1RTJHLGNBQUFBLGtCQUFrQixFQUFFQSxrQkFBa0IsQ0FBQzNHLENBQUMsQ0FBQztlQUFFNEcsV0FBVyxFQUFFQSxXQUFXLENBQUM1RyxDQUFDLENBQUE7Y0FBRSxDQUFBO2FBQ3ZFLElBQUlpSSxRQUFRLEdBQUcsRUFBRSxDQUFBO0NBQ2pCQSxZQUFBQSxRQUFRLENBQUNqSSxDQUFDLENBQUMsR0FBR3dCLFVBQVUsQ0FBQ21FLEtBQUssQ0FBQyxDQUFBO2FBQy9Cc0MsUUFBUSxDQUFDakksQ0FBQyxDQUFDLENBQUN1RCxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztDQUN0QixZQUFBLE9BQU8wRSxRQUFRLENBQUNqSSxDQUFDLENBQUMsQ0FBQ3dELElBQUksQ0FBQztDQUMxQnVFLFlBQUFBLFdBQVcsQ0FBQy9ILENBQUMsQ0FBQyxHQUFHLElBQUk0SCxVQUFVLENBQUNLLFFBQVEsRUFBRUgsUUFBUSxFQUFFaEMsUUFBUSxFQUFFa0MsVUFBVSxDQUFDLENBQUE7Q0FDMUUsV0FBQTtDQUNULFNBQU8sTUFBTTtDQUNMLFVBQUEsS0FBSSxJQUFJaEksQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHdUQsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFdkQsQ0FBQyxFQUFFLEVBQUU7YUFDOUIrSCxXQUFXLENBQUMvSCxDQUFDLENBQUMsR0FBRzZILGtCQUFrQixDQUFDdEUsR0FBRyxDQUFDTCxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUU0RSxRQUFRLENBQUM5SCxDQUFDLENBQUMsRUFBRThGLFFBQVEsRUFBRVMsY0FBYyxDQUFDdkcsQ0FBQyxDQUFDLEVBQ3hGd0csVUFBVSxDQUFDeEcsQ0FBQyxDQUFDLEVBQUV5RyxjQUFjLENBQUN6RyxDQUFDLENBQUMsRUFBRTBHLGtCQUFrQixDQUFDMUcsQ0FBQyxDQUFDLEVBQUUyRyxrQkFBa0IsQ0FBQzNHLENBQUMsQ0FBQyxFQUFFNEcsV0FBVyxDQUFDNUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtDQUNsRyxXQUFBO0NBQ0YsU0FBQTtDQUNELFFBQUEsT0FBTytILFdBQVcsQ0FBQTtRQUNuQixDQUFBO09BRUQsSUFBSSxDQUFDQSxXQUFXLEdBQUdGLGtCQUFrQixDQUFDLElBQUksQ0FBQ3RFLEdBQUcsRUFBRSxJQUFJLENBQUNzQyxLQUFLLENBQUMsSUFBSSxDQUFDSCxVQUFVLENBQUMsRUFBRSxJQUFJLENBQUNJLFFBQVEsRUFDeEYsSUFBSSxDQUFDUyxjQUFjLEVBQUUsSUFBSSxDQUFDQyxVQUFVLEVBQUUsSUFBSSxDQUFDQyxjQUFjLEVBQUUsSUFBSSxDQUFDQyxrQkFBa0IsRUFDbEYsSUFBSSxDQUFDQyxrQkFBa0IsRUFBRSxJQUFJLENBQUNDLFdBQVcsQ0FBQyxDQUFBO01BRTdDLENBQUE7S0FFRGUsa0NBQWtDLENBQUN6RixTQUFTLEdBQUdELE1BQU0sQ0FBQytFLE1BQU0sQ0FBQ3BCLE9BQU8sQ0FBQzFELFNBQVMsQ0FBQyxDQUFBO0NBQy9FeUYsSUFBQUEsa0NBQWtDLENBQUN6RixTQUFTLENBQUNZLFdBQVcsR0FBRzZFLGtDQUFrQyxDQUFBO0NBRTdGQSxJQUFBQSxrQ0FBa0MsQ0FBQ3pGLFNBQVMsQ0FBQzZELElBQUksR0FBRyxZQUFXO0NBQ2pFO09BQ0ksT0FBTzFCLHlCQUF5QixDQUFDLElBQUksQ0FBQzBELFdBQVcsRUFBRSxVQUFTRyxVQUFVLEVBQUU7U0FBQyxPQUFPQSxVQUFVLENBQUNuQyxJQUFJLEVBQUUsQ0FBQTtDQUFDLE9BQUUsQ0FBQyxDQUFBO01BQ3RHLENBQUE7Q0FFRDRCLElBQUFBLGtDQUFrQyxDQUFDekYsU0FBUyxDQUFDOEQsZ0JBQWdCLEdBQUcsWUFBVztDQUN6RWpDLE1BQUFBLGtCQUFrQixDQUFDLElBQUksQ0FBQ2dFLFdBQVcsRUFBRSxVQUFTRyxVQUFVLEVBQUU7U0FBQ0EsVUFBVSxDQUFDbEMsZ0JBQWdCLEVBQUUsQ0FBQTtDQUFDLE9BQUUsQ0FBQyxDQUFBO01BQzdGLENBQUE7Q0FFRDJCLElBQUFBLGtDQUFrQyxDQUFDekYsU0FBUyxDQUFDK0QsZUFBZSxHQUFHLFlBQVc7Q0FDeEVsQyxNQUFBQSxrQkFBa0IsQ0FBQyxJQUFJLENBQUNnRSxXQUFXLEVBQUUsVUFBU0csVUFBVSxFQUFFO1NBQUNBLFVBQVUsQ0FBQ2pDLGVBQWUsRUFBRSxDQUFBO0NBQUMsT0FBRSxDQUFDLENBQUE7TUFDNUYsQ0FBQTtDQUVEMEIsSUFBQUEsa0NBQWtDLENBQUN6RixTQUFTLENBQUNnRSxJQUFJLEdBQUcsWUFBVztPQUM3RCxPQUFPbkMsa0JBQWtCLENBQUMsSUFBSSxDQUFDZ0UsV0FBVyxFQUFFLFVBQVNHLFVBQVUsRUFBRTtTQUMvRCxPQUFPQSxVQUFVLENBQUNoQyxJQUFJLEVBQUUsQ0FBQTtDQUM5QixPQUFLLENBQUMsQ0FBQTtNQUNILENBQUE7O0NBRUg7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtLQUNFLElBQUlpQyxtQ0FBbUMsR0FBRyxVQUFTMUMsTUFBTSxFQUFFSSxLQUFLLEVBQUVDLFFBQVEsRUFBRW5CLE9BQU8sRUFBRTtDQUNuRmdELE1BQUFBLGtDQUFrQyxDQUFDdkYsSUFBSSxDQUFDLElBQUksRUFBRXFELE1BQU0sRUFBRUksS0FBSyxFQUFFQyxRQUFRLEVBQUVuQixPQUFPLEVBQUU2QyxxQkFBcUIsQ0FBQyxDQUFBO01BQ3ZHLENBQUE7S0FFRFcsbUNBQW1DLENBQUNqRyxTQUFTLEdBQUdELE1BQU0sQ0FBQytFLE1BQU0sQ0FBQ1csa0NBQWtDLENBQUN6RixTQUFTLENBQUMsQ0FBQTtDQUMzR2lHLElBQUFBLG1DQUFtQyxDQUFDakcsU0FBUyxDQUFDWSxXQUFXLEdBQUdxRixtQ0FBbUMsQ0FBQTs7Q0FFakc7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtLQUNFLElBQUlDLGtDQUFrQyxHQUFHLFVBQVMzQyxNQUFNLEVBQUVJLEtBQUssRUFBRUMsUUFBUSxFQUFFbkIsT0FBTyxFQUFFO0NBQ2xGZ0QsTUFBQUEsa0NBQWtDLENBQUN2RixJQUFJLENBQUMsSUFBSSxFQUFFcUQsTUFBTSxFQUFFSSxLQUFLLEVBQUVDLFFBQVEsRUFBRW5CLE9BQU8sRUFBRStDLG9CQUFvQixDQUFDLENBQUE7TUFDdEcsQ0FBQTtLQUVEVSxrQ0FBa0MsQ0FBQ2xHLFNBQVMsR0FBR0QsTUFBTSxDQUFDK0UsTUFBTSxDQUFDVyxrQ0FBa0MsQ0FBQ3pGLFNBQVMsQ0FBQyxDQUFBO0NBQzFHa0csSUFBQUEsa0NBQWtDLENBQUNsRyxTQUFTLENBQUNZLFdBQVcsR0FBR3NGLGtDQUFrQyxDQUFBOztDQUUvRjtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7S0FDRSxJQUFJQyxhQUFhLEdBQUcsVUFBUzVDLE1BQU0sRUFBRUksS0FBSyxFQUFFQyxRQUFRLEVBQUVuQixPQUFPLEVBQUU7T0FDN0RpQixPQUFPLENBQUN4RCxJQUFJLENBQUMsSUFBSSxFQUFFcUQsTUFBTSxFQUFFSSxLQUFLLEVBQUVDLFFBQVEsQ0FBQyxDQUFBO09BQzNDLElBQUlPLFdBQVcsR0FBR3BFLE1BQU0sQ0FBQ3FFLElBQUksQ0FBQyxJQUFJLENBQUNiLE1BQU0sQ0FBQyxDQUFBO0NBQzFDLE1BQUEsSUFBR1ksV0FBVyxDQUFDdEcsTUFBTSxJQUFLLENBQUMsRUFBRTtDQUMzQixRQUFBLElBQUksQ0FBQzJGLFVBQVUsR0FBR1csV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFBO0NBQ3RDLE9BQUssTUFBTTtDQUNMLFFBQUEsTUFBTSxxREFBcUQsQ0FBQTtDQUM1RCxPQUFBO01BQ0YsQ0FBQTtLQUVEZ0MsYUFBYSxDQUFDbkcsU0FBUyxHQUFHRCxNQUFNLENBQUMrRSxNQUFNLENBQUNwQixPQUFPLENBQUMxRCxTQUFTLENBQUMsQ0FBQTtDQUMxRG1HLElBQUFBLGFBQWEsQ0FBQ25HLFNBQVMsQ0FBQ1ksV0FBVyxHQUFHdUYsYUFBYSxDQUFBO0NBRW5EQSxJQUFBQSxhQUFhLENBQUNuRyxTQUFTLENBQUM2RCxJQUFJLEdBQUcsWUFBVztPQUN4QyxJQUFJLENBQUNGLEtBQUssQ0FBQyxJQUFJLENBQUNILFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQTtDQUMvQixNQUFBLElBQUk0QyxhQUFhLEdBQUcsSUFBSSxDQUFDeEMsUUFBUSxFQUFFLENBQUE7T0FDbkMsSUFBSSxDQUFDRCxLQUFLLENBQUMsSUFBSSxDQUFDSCxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUE7Q0FDL0IsTUFBQSxJQUFJNkMsWUFBWSxHQUFHLElBQUksQ0FBQ3pDLFFBQVEsRUFBRSxDQUFBO09BQ2xDLElBQUkwQyxZQUFZLEdBQUd0TCxJQUFJLENBQUNpRCxHQUFHLENBQUNtSSxhQUFhLEVBQUVDLFlBQVksQ0FBQyxDQUFBO0NBQ3hERCxNQUFBQSxhQUFhLElBQUlFLFlBQVksQ0FBQTtDQUM3QkQsTUFBQUEsWUFBWSxJQUFJQyxZQUFZLENBQUE7T0FDNUIsSUFBSUMsU0FBUyxHQUFHdkwsSUFBSSxDQUFDQyxHQUFHLENBQUNtTCxhQUFhLEdBQUdwTCxJQUFJLENBQUNULEdBQUcsQ0FBRVMsSUFBSSxDQUFDQyxHQUFHLENBQUNtTCxhQUFhLENBQUMsR0FBR3BMLElBQUksQ0FBQ0MsR0FBRyxDQUFDb0wsWUFBWSxDQUFDLENBQUUsQ0FBRSxDQUFBO0NBQ3ZHLE1BQUEsSUFBR3JMLElBQUksQ0FBQytELE1BQU0sRUFBRSxHQUFHd0gsU0FBUyxFQUFFO1NBQzVCLElBQUksQ0FBQzVDLEtBQUssQ0FBQyxJQUFJLENBQUNILFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQTtDQUMvQixRQUFBLE9BQU8sQ0FBQyxDQUFBO0NBQ1QsT0FBQTtDQUNELE1BQUEsT0FBTyxDQUFDLENBQUE7TUFDVCxDQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtLQUNFLElBQUlnRCxzQkFBc0IsR0FBRyxVQUFTakQsTUFBTSxFQUFFSSxLQUFLLEVBQUVDLFFBQVEsRUFBRW5CLE9BQU8sRUFBRTtPQUN0RWlCLE9BQU8sQ0FBQ3hELElBQUksQ0FBQyxJQUFJLEVBQUVxRCxNQUFNLEVBQUVJLEtBQUssRUFBRUMsUUFBUSxDQUFDLENBQUE7T0FFM0MsSUFBSU8sV0FBVyxHQUFHcEUsTUFBTSxDQUFDcUUsSUFBSSxDQUFDLElBQUksQ0FBQ2IsTUFBTSxDQUFDLENBQUE7Q0FDMUMsTUFBQSxJQUFHWSxXQUFXLENBQUN0RyxNQUFNLElBQUssQ0FBQyxFQUFFO0NBQzNCLFFBQUEsSUFBSSxDQUFDMkYsVUFBVSxHQUFHVyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FDaEMsSUFBSVYsS0FBSyxHQUFHLElBQUksQ0FBQ0YsTUFBTSxDQUFDLElBQUksQ0FBQ0MsVUFBVSxDQUFDLENBQUE7Q0FDeEMsUUFBQSxJQUFJLENBQUNuQyxHQUFHLEdBQUdvQyxLQUFLLENBQUNwQyxHQUFHLENBQUE7Q0FDMUIsT0FBSyxNQUFNO0NBQ0wsUUFBQSxNQUFNLDhEQUE4RCxDQUFBO0NBQ3JFLE9BQUE7T0FFRCxJQUFJc0Usa0JBQWtCLEdBQ3BCLFVBQVN0RSxHQUFHLEVBQUV1RSxRQUFRLEVBQUVoQyxRQUFRLEVBQUU7U0FDbEMsSUFBSWlDLFdBQVcsR0FBRyxFQUFFLENBQUE7Q0FDcEIsUUFBQSxJQUFJL0gsQ0FBQyxDQUFBO0NBQ0wsUUFBQSxJQUFHdUQsR0FBRyxDQUFDeEQsTUFBTSxLQUFLLENBQUMsRUFBRTtDQUNuQixVQUFBLEtBQUlDLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR3VELEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRXZELENBQUMsRUFBRSxFQUFFO2FBQzFCLElBQUkySSxTQUFTLEdBQUcsRUFBRSxDQUFBO0NBQ2xCQSxZQUFBQSxTQUFTLENBQUMzSSxDQUFDLENBQUMsR0FBRzJGLEtBQUssQ0FBQTtDQUNwQm9DLFlBQUFBLFdBQVcsQ0FBQy9ILENBQUMsQ0FBQyxHQUFHLElBQUlxSSxhQUFhLENBQUNNLFNBQVMsRUFBRWIsUUFBUSxFQUFFaEMsUUFBUSxDQUFDLENBQUE7Q0FDbEUsV0FBQTtDQUNULFNBQU8sTUFBTTtDQUNMLFVBQUEsS0FBSTlGLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR3VELEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRXZELENBQUMsRUFBRSxFQUFFO0NBQzFCK0gsWUFBQUEsV0FBVyxDQUFDL0gsQ0FBQyxDQUFDLEdBQUc2SCxrQkFBa0IsQ0FBQ3RFLEdBQUcsQ0FBQ0wsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFNEUsUUFBUSxDQUFDOUgsQ0FBQyxDQUFDLEVBQUU4RixRQUFRLENBQUMsQ0FBQTtDQUN6RSxXQUFBO0NBQ0YsU0FBQTtDQUNELFFBQUEsT0FBT2lDLFdBQVcsQ0FBQTtRQUNuQixDQUFBO09BRUQsSUFBSSxDQUFDQSxXQUFXLEdBQUdGLGtCQUFrQixDQUFDLElBQUksQ0FBQ3RFLEdBQUcsRUFBRSxJQUFJLENBQUNzQyxLQUFLLENBQUMsSUFBSSxDQUFDSCxVQUFVLENBQUMsRUFBRSxJQUFJLENBQUNJLFFBQVEsQ0FBQyxDQUFBO01BQzVGLENBQUE7S0FFRDRDLHNCQUFzQixDQUFDeEcsU0FBUyxHQUFHRCxNQUFNLENBQUMrRSxNQUFNLENBQUNwQixPQUFPLENBQUMxRCxTQUFTLENBQUMsQ0FBQTtDQUNuRXdHLElBQUFBLHNCQUFzQixDQUFDeEcsU0FBUyxDQUFDWSxXQUFXLEdBQUc0RixzQkFBc0IsQ0FBQTtDQUVyRUEsSUFBQUEsc0JBQXNCLENBQUN4RyxTQUFTLENBQUM2RCxJQUFJLEdBQUcsWUFBVztDQUNyRDtPQUNJLE9BQU8xQix5QkFBeUIsQ0FBQyxJQUFJLENBQUMwRCxXQUFXLEVBQUUsVUFBU0csVUFBVSxFQUFFO1NBQUMsT0FBT0EsVUFBVSxDQUFDbkMsSUFBSSxFQUFFLENBQUE7Q0FBQyxPQUFFLENBQUMsQ0FBQTtNQUN0RyxDQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtLQUNFLElBQUk2QyxXQUFXLEdBQUcsVUFBU25ELE1BQU0sRUFBRUksS0FBSyxFQUFFQyxRQUFRLEVBQUVuQixPQUFPLEVBQUU7T0FDM0RpQixPQUFPLENBQUN4RCxJQUFJLENBQUMsSUFBSSxFQUFFcUQsTUFBTSxFQUFFSSxLQUFLLEVBQUVDLFFBQVEsQ0FBQyxDQUFBO09BQzNDLElBQUksQ0FBQ08sV0FBVyxHQUFHcEUsTUFBTSxDQUFDcUUsSUFBSSxDQUFDLElBQUksQ0FBQ2IsTUFBTSxDQUFDLENBQUE7T0FDM0MsSUFBSSxDQUFDc0MsV0FBVyxHQUFHLEVBQUUsQ0FBQTtDQUNyQixNQUFBLEtBQUksSUFBSS9ILENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUNxRyxXQUFXLENBQUN0RyxNQUFNLEVBQUVDLENBQUMsRUFBRSxFQUFFO1NBQy9DLElBQUkyRixLQUFLLEdBQUdGLE1BQU0sQ0FBQyxJQUFJLENBQUNZLFdBQVcsQ0FBQ3JHLENBQUMsQ0FBQyxDQUFDLENBQUE7Q0FDdkMsUUFBQSxJQUFJNkksYUFBYSxDQUFBO1NBQ2pCLFFBQVFsRCxLQUFLLENBQUNULElBQUk7Q0FDaEIsVUFBQSxLQUFLLE1BQU07YUFDVCxJQUFHdEIsV0FBVyxDQUFDK0IsS0FBSyxDQUFDcEMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtDQUM5QnNGLGNBQUFBLGFBQWEsR0FBR3JCLHFCQUFxQixDQUFBO0NBQ2pELGFBQVcsTUFBTTtDQUNMcUIsY0FBQUEsYUFBYSxHQUFHVixtQ0FBbUMsQ0FBQTtDQUNwRCxhQUFBO0NBQ0QsWUFBQSxNQUFBO0NBQ0YsVUFBQSxLQUFLLEtBQUs7YUFDUixJQUFHdkUsV0FBVyxDQUFDK0IsS0FBSyxDQUFDcEMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtDQUM5QnNGLGNBQUFBLGFBQWEsR0FBR25CLG9CQUFvQixDQUFBO0NBQ2hELGFBQVcsTUFBTTtDQUNMbUIsY0FBQUEsYUFBYSxHQUFHVCxrQ0FBa0MsQ0FBQTtDQUNuRCxhQUFBO0NBQ0QsWUFBQSxNQUFBO0NBQ0YsVUFBQSxLQUFLLFFBQVE7YUFDWCxJQUFHeEUsV0FBVyxDQUFDK0IsS0FBSyxDQUFDcEMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtDQUM5QnNGLGNBQUFBLGFBQWEsR0FBR1IsYUFBYSxDQUFBO0NBQ3pDLGFBQVcsTUFBTTtDQUNMUSxjQUFBQSxhQUFhLEdBQUdILHNCQUFzQixDQUFBO0NBQ3ZDLGFBQUE7Q0FDRCxZQUFBLE1BQUE7Q0FDRixVQUFBO0NBQ0UsWUFBQSxNQUFNLHFDQUFxQyxHQUFHLElBQUksQ0FBQ3JDLFdBQVcsQ0FBQ3JHLENBQUMsQ0FBQyxHQUFHLGFBQWEsR0FBRzJGLEtBQUssQ0FBQ1QsSUFBSSxDQUFBO0NBQUMsU0FBQTtTQUVuRyxJQUFJNEQsaUJBQWlCLEdBQUcsRUFBRSxDQUFBO1NBQzFCQSxpQkFBaUIsQ0FBQyxJQUFJLENBQUN6QyxXQUFXLENBQUNyRyxDQUFDLENBQUMsQ0FBQyxHQUFHMkYsS0FBSyxDQUFBO0NBQzlDaEIsUUFBQUEsT0FBTyxHQUFHQSxPQUFPLElBQUksRUFBRSxDQUFBO0NBQ3ZCLFFBQUEsSUFBSW9FLGFBQWEsR0FBR3BFLE9BQU8sQ0FBQ2MsTUFBTSxJQUFJZCxPQUFPLENBQUNjLE1BQU0sQ0FBQyxJQUFJLENBQUNZLFdBQVcsQ0FBQ3JHLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBO1NBQy9FK0ksYUFBYSxDQUFDeEMsY0FBYyxHQUFPd0MsYUFBYSxDQUFDeEMsY0FBYyxJQUFRNUIsT0FBTyxDQUFDNEIsY0FBYyxDQUFBO1NBQzdGd0MsYUFBYSxDQUFDdkMsVUFBVSxHQUFXdUMsYUFBYSxDQUFDdkMsVUFBVSxJQUFZN0IsT0FBTyxDQUFDNkIsVUFBVSxDQUFBO1NBQ3pGdUMsYUFBYSxDQUFDdEMsY0FBYyxHQUFPc0MsYUFBYSxDQUFDdEMsY0FBYyxJQUFROUIsT0FBTyxDQUFDOEIsY0FBYyxDQUFBO1NBQzdGc0MsYUFBYSxDQUFDckMsa0JBQWtCLEdBQUdxQyxhQUFhLENBQUNyQyxrQkFBa0IsSUFBSS9CLE9BQU8sQ0FBQytCLGtCQUFrQixDQUFBO1NBQ2pHcUMsYUFBYSxDQUFDcEMsa0JBQWtCLEdBQUdvQyxhQUFhLENBQUNwQyxrQkFBa0IsSUFBSWhDLE9BQU8sQ0FBQ2dDLGtCQUFrQixDQUFBO1NBQ2pHb0MsYUFBYSxDQUFDbkMsV0FBVyxHQUFVbUMsYUFBYSxDQUFDbkMsV0FBVyxJQUFXakMsT0FBTyxDQUFDaUMsV0FBVyxDQUFBO0NBQzFGLFFBQUEsSUFBSSxDQUFDbUIsV0FBVyxDQUFDL0gsQ0FBQyxDQUFDLEdBQUcsSUFBSTZJLGFBQWEsQ0FBQ0MsaUJBQWlCLEVBQUVqRCxLQUFLLEVBQUVDLFFBQVEsRUFBRWlELGFBQWEsQ0FBQyxDQUFBO0NBQzNGLE9BQUE7TUFDRixDQUFBO0tBRURILFdBQVcsQ0FBQzFHLFNBQVMsR0FBR0QsTUFBTSxDQUFDK0UsTUFBTSxDQUFDcEIsT0FBTyxDQUFDMUQsU0FBUyxDQUFDLENBQUE7Q0FDeEQwRyxJQUFBQSxXQUFXLENBQUMxRyxTQUFTLENBQUNZLFdBQVcsR0FBRzhGLFdBQVcsQ0FBQTtDQUUvQ0EsSUFBQUEsV0FBVyxDQUFDMUcsU0FBUyxDQUFDNkQsSUFBSSxHQUFHLFlBQVc7Q0FDdEM3QixNQUFBQSxhQUFhLENBQUMsSUFBSSxDQUFDNkQsV0FBVyxDQUFDLENBQUE7Q0FDL0IsTUFBQSxLQUFJLElBQUkvSCxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDK0gsV0FBVyxDQUFDaEksTUFBTSxFQUFFQyxDQUFDLEVBQUUsRUFBRTtDQUMvQyxRQUFBLElBQUksQ0FBQytILFdBQVcsQ0FBQy9ILENBQUMsQ0FBQyxDQUFDK0YsSUFBSSxFQUFFLENBQUE7Q0FDM0IsT0FBQTtPQUNELE9BQU8sSUFBSSxDQUFDRixLQUFLLENBQUE7TUFDbEIsQ0FBQTtDQUVEK0MsSUFBQUEsV0FBVyxDQUFDMUcsU0FBUyxDQUFDOEQsZ0JBQWdCLEdBQUcsWUFBVztDQUNsRCxNQUFBLEtBQUksSUFBSWhHLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUMrSCxXQUFXLENBQUNoSSxNQUFNLEVBQUVDLENBQUMsRUFBRSxFQUFFO0NBQy9DLFFBQUEsSUFBSSxDQUFDK0gsV0FBVyxDQUFDL0gsQ0FBQyxDQUFDLENBQUNnRyxnQkFBZ0IsRUFBRSxDQUFBO0NBQ3ZDLE9BQUE7TUFDRixDQUFBO0NBRUQ0QyxJQUFBQSxXQUFXLENBQUMxRyxTQUFTLENBQUMrRCxlQUFlLEdBQUcsWUFBVztDQUNqRCxNQUFBLEtBQUksSUFBSWpHLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUMrSCxXQUFXLENBQUNoSSxNQUFNLEVBQUVDLENBQUMsRUFBRSxFQUFFO0NBQy9DLFFBQUEsSUFBSSxDQUFDK0gsV0FBVyxDQUFDL0gsQ0FBQyxDQUFDLENBQUNpRyxlQUFlLEVBQUUsQ0FBQTtDQUN0QyxPQUFBO01BQ0YsQ0FBQTtDQUVEMkMsSUFBQUEsV0FBVyxDQUFDMUcsU0FBUyxDQUFDZ0UsSUFBSSxHQUFHLFlBQVc7T0FDdEMsSUFBSUEsSUFBSSxHQUFHLEVBQUUsQ0FBQTtDQUNiLE1BQUEsS0FBSSxJQUFJbEcsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQytILFdBQVcsQ0FBQ2hJLE1BQU0sRUFBRUMsQ0FBQyxFQUFFLEVBQUU7Q0FDL0NrRyxRQUFBQSxJQUFJLENBQUMsSUFBSSxDQUFDRyxXQUFXLENBQUNyRyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQytILFdBQVcsQ0FBQy9ILENBQUMsQ0FBQyxDQUFDa0csSUFBSSxFQUFFLENBQUE7Q0FDdkQsT0FBQTtDQUNELE1BQUEsT0FBT0EsSUFBSSxDQUFBO01BQ1osQ0FBQTs7Q0FJSDtDQUNBOztDQUdBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7S0FDRSxJQUFJOEMsT0FBTyxHQUFHLFVBQVN2RCxNQUFNLEVBQUVLLFFBQVEsRUFBRW1ELElBQUksRUFBRXRFLE9BQU8sRUFBRTtPQUN0RCxJQUFJLENBQUNjLE1BQU0sR0FBR0EsTUFBTSxDQUFBO09BQ3BCLElBQUksQ0FBQ3dELElBQUksR0FBR0EsSUFBSSxDQUFBO09BQ2hCLElBQUksQ0FBQzVDLFdBQVcsR0FBR3BFLE1BQU0sQ0FBQ3FFLElBQUksQ0FBQyxJQUFJLENBQUNiLE1BQU0sQ0FBQyxDQUFBOztDQUUvQztPQUNJLElBQUksQ0FBQ3lELGNBQWMsR0FBS3pFLFVBQVUsQ0FBQyxnQkFBZ0IsRUFBRUUsT0FBTyxFQUFFTSxnQkFBZ0IsQ0FBQyxDQUFBO09BQy9FLElBQUlrRSxpQkFBaUIsR0FBRzFFLFVBQVUsQ0FBQyxNQUFNLEVBQUVFLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQTtPQUN0RCxJQUFJeUUsaUJBQWlCLEdBQUczRSxVQUFVLENBQUMsU0FBUyxFQUFFRSxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUE7Q0FDNUQsTUFBQSxJQUFJLENBQUMwRSxJQUFJLENBQUNGLGlCQUFpQixDQUFDLENBQUE7Q0FDNUIsTUFBQSxJQUFJLENBQUNHLE9BQU8sQ0FBQ0YsaUJBQWlCLENBQUMsQ0FBQTtPQUMvQixJQUFJLENBQUN6RSxPQUFPLEdBQUdBLE9BQU8sQ0FBQTtDQUMxQjtDQUNJLE1BQUEsSUFBSSxDQUFDYyxNQUFNLEdBQUdILGVBQWUsQ0FBQyxJQUFJLENBQUNHLE1BQU0sRUFBRSxJQUFJLENBQUN5RCxjQUFjLENBQUMsQ0FBQTtPQUMvRCxJQUFJckQsS0FBSyxHQUFHLEVBQUUsQ0FBQTtDQUNkLE1BQUEsS0FBSSxJQUFJN0YsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ3FHLFdBQVcsQ0FBQ3RHLE1BQU0sRUFBRUMsQ0FBQyxFQUFFLEVBQUc7U0FDaEQ2RixLQUFLLENBQUMsSUFBSSxDQUFDUSxXQUFXLENBQUNyRyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQ3lGLE1BQU0sQ0FBQyxJQUFJLENBQUNZLFdBQVcsQ0FBQ3JHLENBQUMsQ0FBQyxDQUFDLENBQUN3RCxJQUFJLENBQUE7Q0FDbkUsT0FBQTtPQUNELElBQUksQ0FBQ3NDLFFBQVEsR0FBRyxZQUFXO0NBQ3pCLFFBQUEsT0FBT0EsUUFBUSxDQUFDRCxLQUFLLEVBQUVvRCxJQUFJLENBQUMsQ0FBQTtRQUM3QixDQUFBO0NBQ0w7Q0FDQTtPQUNJLElBQUksQ0FBQ25ELFFBQVEsRUFBRSxDQUFBO09BQ2YsSUFBSSxDQUFDRCxLQUFLLEdBQUdBLEtBQUssQ0FBQTtPQUNsQixJQUFJLENBQUMwRCxRQUFRLEdBQUcsSUFBSSxDQUFDQyx1QkFBdUIsQ0FBQyxJQUFJLENBQUMvRCxNQUFNLEVBQUUsSUFBSSxDQUFDSSxLQUFLLEVBQUUsSUFBSSxDQUFDQyxRQUFRLEVBQUUsSUFBSSxDQUFDbkIsT0FBTyxDQUFDLENBQUE7TUFDbkcsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7S0FDRXFFLE9BQU8sQ0FBQzlHLFNBQVMsQ0FBQ3NILHVCQUF1QixHQUFHLFVBQVMzRCxLQUFLLEVBQUVDLFFBQVEsRUFBQztDQUNuRSxNQUFBLE1BQU0sNERBQTRELENBQUE7TUFDbkUsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0VrRCxJQUFBQSxPQUFPLENBQUM5RyxTQUFTLENBQUNnRSxJQUFJLEdBQUcsWUFBVztPQUNsQyxPQUFPO1NBQUNMLEtBQUssRUFBRSxJQUFJLENBQUNBLEtBQUs7U0FBRXdELElBQUksRUFBRSxJQUFJLENBQUNBLElBQUk7U0FBRUMsT0FBTyxFQUFFLElBQUksQ0FBQ0EsT0FBTztTQUN6REMsUUFBUSxFQUFFLElBQUksQ0FBQ0EsUUFBQUE7UUFBUyxDQUFBO01BQ2pDLENBQUE7O0NBRUg7Q0FDQTtDQUNBO0NBQ0VQLElBQUFBLE9BQU8sQ0FBQzlHLFNBQVMsQ0FBQzZELElBQUksR0FBRyxZQUFXO0NBQ2xDN0IsTUFBQUEsYUFBYSxDQUFDLElBQUksQ0FBQ3FGLFFBQVEsQ0FBQyxDQUFBO0NBQzVCLE1BQUEsS0FBSSxJQUFJdkosQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ3VKLFFBQVEsQ0FBQ3hKLE1BQU0sRUFBRUMsQ0FBQyxFQUFFLEVBQUU7Q0FDNUMsUUFBQSxJQUFJLENBQUN1SixRQUFRLENBQUN2SixDQUFDLENBQUMsQ0FBQytGLElBQUksRUFBRSxDQUFBO0NBQ3hCLE9BQUE7T0FDRCxJQUFHOUQsTUFBTSxDQUFDcUUsSUFBSSxDQUFDLElBQUksQ0FBQ1QsS0FBSyxDQUFDLENBQUM5RixNQUFNLEdBQUdrQyxNQUFNLENBQUNxRSxJQUFJLENBQUMsSUFBSSxDQUFDYixNQUFNLENBQUMsQ0FBQzFGLE1BQU0sRUFBRTtDQUN6RTtDQUNBO0NBQ0E7U0FDTSxJQUFJLENBQUMrRixRQUFRLEVBQUUsQ0FBQTtDQUNoQixPQUFBO09BQ0QsT0FBTyxJQUFJLENBQUNELEtBQUssQ0FBQTtNQUNsQixDQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNFbUQsSUFBQUEsT0FBTyxDQUFDOUcsU0FBUyxDQUFDdUgsTUFBTSxHQUFHLFVBQVNDLFlBQVksRUFBRTtDQUNwRDtDQUNBO0NBQ00sTUFBQSxJQUFJMUosQ0FBQyxFQUFFN0QsQ0FBQyxFQUFFd04sZ0JBQWdCLENBQUE7Q0FDMUIsTUFBQSxJQUFHLElBQUksQ0FBQ0EsZ0JBQWdCLEtBQUssSUFBSSxFQUFFO1NBQ2pDQSxnQkFBZ0IsR0FBRzFILE1BQU0sQ0FBQ3FFLElBQUksQ0FBQyxJQUFJLENBQUNULEtBQUssQ0FBQyxDQUFBO0NBQ2xELE9BQU8sTUFBTTtTQUNMOEQsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDQSxnQkFBZ0IsQ0FBQTtDQUN6QyxPQUFBO09BRUQsSUFBSUMsV0FBVyxHQUFHLEVBQUUsQ0FBQTtDQUNwQixNQUFBLEtBQUl6TixDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUd3TixnQkFBZ0IsQ0FBQzVKLE1BQU0sRUFBRTVELENBQUMsRUFBRSxFQUFFO0NBQzNDeU4sUUFBQUEsV0FBVyxDQUFDRCxnQkFBZ0IsQ0FBQ3hOLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFBO0NBQ3RDLE9BQUE7T0FFRCxLQUFJNkQsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHMEosWUFBWSxFQUFFMUosQ0FBQyxFQUFFLEVBQUU7Q0FDaEMsUUFBQSxJQUFHQSxDQUFDLEdBQUcsSUFBSSxDQUFDbUosaUJBQWlCLEtBQUssQ0FBQyxFQUFFO0NBQ25DLFVBQUEsS0FBSWhOLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR3dOLGdCQUFnQixDQUFDNUosTUFBTSxFQUFFNUQsQ0FBQyxFQUFFLEVBQUU7Q0FDM0MsWUFBQSxJQUFJd0osS0FBSyxHQUFHZ0UsZ0JBQWdCLENBQUN4TixDQUFDLENBQUMsQ0FBQTtDQUMvQnlOLFlBQUFBLFdBQVcsQ0FBQ2pFLEtBQUssQ0FBQyxDQUFDOUMsSUFBSSxDQUFFRSxnQkFBZ0IsQ0FBQyxJQUFJLENBQUM4QyxLQUFLLENBQUNGLEtBQUssQ0FBQyxDQUFDLENBQUUsQ0FBQTtDQUMvRCxXQUFBO0NBQ0YsU0FBQTtTQUNELElBQUksQ0FBQ0ksSUFBSSxFQUFFLENBQUE7Q0FDWixPQUFBO0NBQ0QsTUFBQSxPQUFPNkQsV0FBVyxDQUFBO01BQ3JCLENBQUE7O0NBRUg7Q0FDQTtDQUNBO0NBQ0VaLElBQUFBLE9BQU8sQ0FBQzlHLFNBQVMsQ0FBQzJILElBQUksR0FBRyxVQUFTSCxZQUFZLEVBQUU7T0FDOUMsS0FBSSxJQUFJMUosQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHMEosWUFBWSxFQUFFMUosQ0FBQyxFQUFFLEVBQUU7U0FDcEMsSUFBSSxDQUFDK0YsSUFBSSxFQUFFLENBQUE7Q0FDWixPQUFBO01BQ0YsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7Q0FDQTtDQUNFaUQsSUFBQUEsT0FBTyxDQUFDOUcsU0FBUyxDQUFDb0gsT0FBTyxHQUFHLFVBQVNGLGlCQUFpQixFQUFFO09BQ3BELElBQUksQ0FBQ08sZ0JBQWdCLEdBQUdQLGlCQUFpQixDQUFBO01BQzVDLENBQUE7O0NBRUg7Q0FDQTtDQUNBO0NBQ0E7Q0FDRUosSUFBQUEsT0FBTyxDQUFDOUcsU0FBUyxDQUFDbUgsSUFBSSxHQUFHLFVBQVNGLGlCQUFpQixFQUFFO09BQ25ELElBQUksQ0FBQ0EsaUJBQWlCLEdBQUdBLGlCQUFpQixDQUFBO01BQzNDLENBQUE7O0NBRUg7Q0FDQTtDQUNBO0NBQ0VILElBQUFBLE9BQU8sQ0FBQzlHLFNBQVMsQ0FBQzhELGdCQUFnQixHQUFHLFlBQVc7Q0FDOUMsTUFBQSxLQUFJLElBQUloRyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDdUosUUFBUSxDQUFDeEosTUFBTSxFQUFFQyxDQUFDLEVBQUUsRUFBRTtDQUM1QyxRQUFBLElBQUksQ0FBQ3VKLFFBQVEsQ0FBQ3ZKLENBQUMsQ0FBQyxDQUFDZ0csZ0JBQWdCLEVBQUUsQ0FBQTtDQUNwQyxPQUFBO01BQ0YsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7Q0FDRWdELElBQUFBLE9BQU8sQ0FBQzlHLFNBQVMsQ0FBQytELGVBQWUsR0FBRyxZQUFXO0NBQzdDLE1BQUEsS0FBSSxJQUFJakcsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ3VKLFFBQVEsQ0FBQ3hKLE1BQU0sRUFBRUMsQ0FBQyxFQUFFLEVBQUU7Q0FDNUMsUUFBQSxJQUFJLENBQUN1SixRQUFRLENBQUN2SixDQUFDLENBQUMsQ0FBQ2lHLGVBQWUsRUFBRSxDQUFBO0NBQ25DLE9BQUE7TUFDRixDQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtLQUNFLElBQUk2RCxXQUFXLEdBQUcsVUFBU3JFLE1BQU0sRUFBRUssUUFBUSxFQUFFbUQsSUFBSSxFQUFFdEUsT0FBTyxFQUFFO0NBQzFEcUUsTUFBQUEsT0FBTyxDQUFDNUcsSUFBSSxDQUFDLElBQUksRUFBRXFELE1BQU0sRUFBRUssUUFBUSxFQUFFbUQsSUFBSSxFQUFFdEUsT0FBTyxDQUFDLENBQUE7TUFDcEQsQ0FBQTtLQUVEbUYsV0FBVyxDQUFDNUgsU0FBUyxHQUFHRCxNQUFNLENBQUMrRSxNQUFNLENBQUNnQyxPQUFPLENBQUM5RyxTQUFTLENBQUMsQ0FBQTtDQUN4RDRILElBQUFBLFdBQVcsQ0FBQzVILFNBQVMsQ0FBQ1ksV0FBVyxHQUFHZ0gsV0FBVyxDQUFBO0NBRS9DQSxJQUFBQSxXQUFXLENBQUM1SCxTQUFTLENBQUNzSCx1QkFBdUIsR0FBRyxVQUFTL0QsTUFBTSxFQUFFSSxLQUFLLEVBQUVDLFFBQVEsRUFBRW5CLE9BQU8sRUFBQztDQUN4RixNQUFBLE9BQU8sQ0FBRSxJQUFJaUUsV0FBVyxDQUFDbkQsTUFBTSxFQUFFSSxLQUFLLEVBQUVDLFFBQVEsRUFBRW5CLE9BQU8sQ0FBQyxDQUFFLENBQUE7TUFDN0QsQ0FBQTs7Q0FHSDtLQUNFLE9BQU87Q0FDTDNELE1BQUFBLEtBQUssRUFBRUEsS0FBSztDQUNaRSxNQUFBQSxjQUFjLEVBQUVBLGNBQWM7Q0FDOUJFLE1BQUFBLEtBQUssRUFBRUEsS0FBSztDQUNaNkQsTUFBQUEsZ0JBQWdCLEVBQUVBLGdCQUFnQjtDQUNsQ0ssTUFBQUEsZUFBZSxFQUFFQSxlQUFlO0NBQ2hDa0MsTUFBQUEscUJBQXFCLEVBQUVBLHFCQUFxQjtDQUM1Q0UsTUFBQUEsb0JBQW9CLEVBQUVBLG9CQUFvQjtDQUMxQ1MsTUFBQUEsbUNBQW1DLEVBQUVBLG1DQUFtQztDQUN4RUMsTUFBQUEsa0NBQWtDLEVBQUVBLGtDQUFrQztDQUN0RUMsTUFBQUEsYUFBYSxFQUFFQSxhQUFhO0NBQzVCSyxNQUFBQSxzQkFBc0IsRUFBRUEsc0JBQXNCO0NBQzlDRSxNQUFBQSxXQUFXLEVBQUVBLFdBQVc7Q0FDeEJrQixNQUFBQSxXQUFXLEVBQUVBLFdBQUFBO01BQ2QsQ0FBQTtDQUNILEdBQUMsQ0FBQyxDQUFBOzs7Q0M3bENhLFNBQVNDLFNBQVNBLENBQUMvTSxDQUFDLEVBQUVDLENBQUMsRUFBRTtDQUN0QyxFQUFBLE9BQU9ELENBQUMsSUFBSSxJQUFJLElBQUlDLENBQUMsSUFBSSxJQUFJLEdBQUdMLEdBQUcsR0FBR0ksQ0FBQyxHQUFHQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUdELENBQUMsR0FBR0MsQ0FBQyxHQUFHLENBQUMsR0FBR0QsQ0FBQyxJQUFJQyxDQUFDLEdBQUcsQ0FBQyxHQUFHTCxHQUFHLENBQUE7Q0FDakY7O0NDRU8sVUFBVW9OLE9BQU9BLENBQUNDLE1BQU0sRUFBRUMsT0FBTyxFQUFFO0dBQ3hDLElBQUlBLE9BQU8sS0FBS3BGLFNBQVMsRUFBRTtDQUN6QixJQUFBLEtBQUssSUFBSUUsS0FBSyxJQUFJaUYsTUFBTSxFQUFFO09BQ3hCLElBQUlqRixLQUFLLElBQUksSUFBSSxJQUFJLENBQUNBLEtBQUssR0FBRyxDQUFDQSxLQUFLLEtBQUtBLEtBQUssRUFBRTtDQUM5QyxRQUFBLE1BQU1BLEtBQUssQ0FBQTtDQUNiLE9BQUE7Q0FDRixLQUFBO0NBQ0YsR0FBQyxNQUFNO0tBQ0wsSUFBSW1GLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQTtDQUNkLElBQUEsS0FBSyxJQUFJbkYsS0FBSyxJQUFJaUYsTUFBTSxFQUFFO09BQ3hCLElBQUksQ0FBQ2pGLEtBQUssR0FBR2tGLE9BQU8sQ0FBQ2xGLEtBQUssRUFBRSxFQUFFbUYsS0FBSyxFQUFFRixNQUFNLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQ2pGLEtBQUssR0FBRyxDQUFDQSxLQUFLLEtBQUtBLEtBQUssRUFBRTtDQUNsRixRQUFBLE1BQU1BLEtBQUssQ0FBQTtDQUNiLE9BQUE7Q0FDRixLQUFBO0NBQ0YsR0FBQTtDQUNGOztDQ09PLFNBQVNvRixjQUFjQSxDQUFDQyxPQUFPLEdBQUdOLFNBQVMsRUFBRTtDQUNsRCxFQUFBLElBQUlNLE9BQU8sS0FBS04sU0FBUyxFQUFFLE9BQU9PLGdCQUFnQixDQUFBO0dBQ2xELElBQUksT0FBT0QsT0FBTyxLQUFLLFVBQVUsRUFBRSxNQUFNLElBQUlFLFNBQVMsQ0FBQywyQkFBMkIsQ0FBQyxDQUFBO0NBQ25GLEVBQUEsT0FBTyxDQUFDdk4sQ0FBQyxFQUFFQyxDQUFDLEtBQUs7Q0FDZixJQUFBLE1BQU1mLENBQUMsR0FBR21PLE9BQU8sQ0FBQ3JOLENBQUMsRUFBRUMsQ0FBQyxDQUFDLENBQUE7Q0FDdkIsSUFBQSxJQUFJZixDQUFDLElBQUlBLENBQUMsS0FBSyxDQUFDLEVBQUUsT0FBT0EsQ0FBQyxDQUFBO0NBQzFCLElBQUEsT0FBTyxDQUFDbU8sT0FBTyxDQUFDcE4sQ0FBQyxFQUFFQSxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUtvTixPQUFPLENBQUNyTixDQUFDLEVBQUVBLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFBO0lBQ3JELENBQUE7Q0FDSCxDQUFBO0NBRU8sU0FBU3NOLGdCQUFnQkEsQ0FBQ3ROLENBQUMsRUFBRUMsQ0FBQyxFQUFFO0NBQ3JDLEVBQUEsT0FBTyxDQUFDRCxDQUFDLElBQUksSUFBSSxJQUFJLEVBQUVBLENBQUMsSUFBSUEsQ0FBQyxDQUFDLEtBQUtDLENBQUMsSUFBSSxJQUFJLElBQUksRUFBRUEsQ0FBQyxJQUFJQSxDQUFDLENBQUMsQ0FBQyxLQUFLRCxDQUFDLEdBQUdDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBR0QsQ0FBQyxHQUFHQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFBO0NBQzVGOztDQ3RDZSxTQUFTa0QsR0FBR0EsQ0FBQzhKLE1BQU0sRUFBRUMsT0FBTyxFQUFFO0NBQzNDLEVBQUEsSUFBSS9KLEdBQUcsQ0FBQTtHQUNQLElBQUkrSixPQUFPLEtBQUtwRixTQUFTLEVBQUU7Q0FDekIsSUFBQSxLQUFLLE1BQU1FLEtBQUssSUFBSWlGLE1BQU0sRUFBRTtDQUMxQixNQUFBLElBQUlqRixLQUFLLElBQUksSUFBSSxLQUNUN0UsR0FBRyxHQUFHNkUsS0FBSyxJQUFLN0UsR0FBRyxLQUFLMkUsU0FBUyxJQUFJRSxLQUFLLElBQUlBLEtBQU0sQ0FBQyxFQUFFO0NBQzdEN0UsUUFBQUEsR0FBRyxHQUFHNkUsS0FBSyxDQUFBO0NBQ2IsT0FBQTtDQUNGLEtBQUE7Q0FDRixHQUFDLE1BQU07S0FDTCxJQUFJbUYsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFBO0NBQ2QsSUFBQSxLQUFLLElBQUluRixLQUFLLElBQUlpRixNQUFNLEVBQUU7T0FDeEIsSUFBSSxDQUFDakYsS0FBSyxHQUFHa0YsT0FBTyxDQUFDbEYsS0FBSyxFQUFFLEVBQUVtRixLQUFLLEVBQUVGLE1BQU0sQ0FBQyxLQUFLLElBQUksS0FDN0M5SixHQUFHLEdBQUc2RSxLQUFLLElBQUs3RSxHQUFHLEtBQUsyRSxTQUFTLElBQUlFLEtBQUssSUFBSUEsS0FBTSxDQUFDLEVBQUU7Q0FDN0Q3RSxRQUFBQSxHQUFHLEdBQUc2RSxLQUFLLENBQUE7Q0FDYixPQUFBO0NBQ0YsS0FBQTtDQUNGLEdBQUE7Q0FDQSxFQUFBLE9BQU83RSxHQUFHLENBQUE7Q0FDWjs7Q0NuQmUsU0FBU0QsR0FBR0EsQ0FBQytKLE1BQU0sRUFBRUMsT0FBTyxFQUFFO0NBQzNDLEVBQUEsSUFBSWhLLEdBQUcsQ0FBQTtHQUNQLElBQUlnSyxPQUFPLEtBQUtwRixTQUFTLEVBQUU7Q0FDekIsSUFBQSxLQUFLLE1BQU1FLEtBQUssSUFBSWlGLE1BQU0sRUFBRTtDQUMxQixNQUFBLElBQUlqRixLQUFLLElBQUksSUFBSSxLQUNUOUUsR0FBRyxHQUFHOEUsS0FBSyxJQUFLOUUsR0FBRyxLQUFLNEUsU0FBUyxJQUFJRSxLQUFLLElBQUlBLEtBQU0sQ0FBQyxFQUFFO0NBQzdEOUUsUUFBQUEsR0FBRyxHQUFHOEUsS0FBSyxDQUFBO0NBQ2IsT0FBQTtDQUNGLEtBQUE7Q0FDRixHQUFDLE1BQU07S0FDTCxJQUFJbUYsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFBO0NBQ2QsSUFBQSxLQUFLLElBQUluRixLQUFLLElBQUlpRixNQUFNLEVBQUU7T0FDeEIsSUFBSSxDQUFDakYsS0FBSyxHQUFHa0YsT0FBTyxDQUFDbEYsS0FBSyxFQUFFLEVBQUVtRixLQUFLLEVBQUVGLE1BQU0sQ0FBQyxLQUFLLElBQUksS0FDN0MvSixHQUFHLEdBQUc4RSxLQUFLLElBQUs5RSxHQUFHLEtBQUs0RSxTQUFTLElBQUlFLEtBQUssSUFBSUEsS0FBTSxDQUFDLEVBQUU7Q0FDN0Q5RSxRQUFBQSxHQUFHLEdBQUc4RSxLQUFLLENBQUE7Q0FDYixPQUFBO0NBQ0YsS0FBQTtDQUNGLEdBQUE7Q0FDQSxFQUFBLE9BQU85RSxHQUFHLENBQUE7Q0FDWjs7Q0NqQkE7Q0FDQTtDQUNlLFNBQVNzSyxXQUFXQSxDQUFDckcsS0FBSyxFQUFFckgsQ0FBQyxFQUFFMk4sSUFBSSxHQUFHLENBQUMsRUFBRUMsS0FBSyxHQUFHdkcsS0FBSyxDQUFDcEUsTUFBTSxHQUFHLENBQUMsRUFBRXNLLE9BQU8sRUFBRTtHQUN6RkEsT0FBTyxHQUFHQSxPQUFPLEtBQUt2RixTQUFTLEdBQUd3RixnQkFBZ0IsR0FBR0YsY0FBYyxDQUFDQyxPQUFPLENBQUMsQ0FBQTtHQUU1RSxPQUFPSyxLQUFLLEdBQUdELElBQUksRUFBRTtDQUNuQixJQUFBLElBQUlDLEtBQUssR0FBR0QsSUFBSSxHQUFHLEdBQUcsRUFBRTtDQUN0QixNQUFBLE1BQU05TixDQUFDLEdBQUcrTixLQUFLLEdBQUdELElBQUksR0FBRyxDQUFDLENBQUE7Q0FDMUIsTUFBQSxNQUFNN0osQ0FBQyxHQUFHOUQsQ0FBQyxHQUFHMk4sSUFBSSxHQUFHLENBQUMsQ0FBQTtDQUN0QixNQUFBLE1BQU1wTSxDQUFDLEdBQUduQixJQUFJLENBQUNULEdBQUcsQ0FBQ0UsQ0FBQyxDQUFDLENBQUE7Q0FDckIsTUFBQSxNQUFNb0YsQ0FBQyxHQUFHLEdBQUcsR0FBRzdFLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsR0FBR2tCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQTtDQUNuQyxNQUFBLE1BQU1ILEVBQUUsR0FBRyxHQUFHLEdBQUdoQixJQUFJLENBQUNJLElBQUksQ0FBQ2UsQ0FBQyxHQUFHMEQsQ0FBQyxJQUFJcEYsQ0FBQyxHQUFHb0YsQ0FBQyxDQUFDLEdBQUdwRixDQUFDLENBQUMsSUFBSWlFLENBQUMsR0FBR2pFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFBO09BQzFFLE1BQU1nTyxPQUFPLEdBQUd6TixJQUFJLENBQUNpRCxHQUFHLENBQUNzSyxJQUFJLEVBQUV2TixJQUFJLENBQUNpRSxLQUFLLENBQUNyRSxDQUFDLEdBQUc4RCxDQUFDLEdBQUdtQixDQUFDLEdBQUdwRixDQUFDLEdBQUd1QixFQUFFLENBQUMsQ0FBQyxDQUFBO09BQzlELE1BQU0wTSxRQUFRLEdBQUcxTixJQUFJLENBQUNnRCxHQUFHLENBQUN3SyxLQUFLLEVBQUV4TixJQUFJLENBQUNpRSxLQUFLLENBQUNyRSxDQUFDLEdBQUcsQ0FBQ0gsQ0FBQyxHQUFHaUUsQ0FBQyxJQUFJbUIsQ0FBQyxHQUFHcEYsQ0FBQyxHQUFHdUIsRUFBRSxDQUFDLENBQUMsQ0FBQTtPQUN0RXNNLFdBQVcsQ0FBQ3JHLEtBQUssRUFBRXJILENBQUMsRUFBRTZOLE9BQU8sRUFBRUMsUUFBUSxFQUFFUCxPQUFPLENBQUMsQ0FBQTtDQUNuRCxLQUFBO0NBRUEsSUFBQSxNQUFNbkwsQ0FBQyxHQUFHaUYsS0FBSyxDQUFDckgsQ0FBQyxDQUFDLENBQUE7S0FDbEIsSUFBSWtELENBQUMsR0FBR3lLLElBQUksQ0FBQTtLQUNaLElBQUl0TyxDQUFDLEdBQUd1TyxLQUFLLENBQUE7Q0FFYkcsSUFBQUEsSUFBSSxDQUFDMUcsS0FBSyxFQUFFc0csSUFBSSxFQUFFM04sQ0FBQyxDQUFDLENBQUE7Q0FDcEIsSUFBQSxJQUFJdU4sT0FBTyxDQUFDbEcsS0FBSyxDQUFDdUcsS0FBSyxDQUFDLEVBQUV4TCxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUyTCxJQUFJLENBQUMxRyxLQUFLLEVBQUVzRyxJQUFJLEVBQUVDLEtBQUssQ0FBQyxDQUFBO0tBRTFELE9BQU8xSyxDQUFDLEdBQUc3RCxDQUFDLEVBQUU7Q0FDWjBPLE1BQUFBLElBQUksQ0FBQzFHLEtBQUssRUFBRW5FLENBQUMsRUFBRTdELENBQUMsQ0FBQyxFQUFFLEVBQUU2RCxDQUFDLEVBQUUsRUFBRTdELENBQUMsQ0FBQTtDQUMzQixNQUFBLE9BQU9rTyxPQUFPLENBQUNsRyxLQUFLLENBQUNuRSxDQUFDLENBQUMsRUFBRWQsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUVjLENBQUMsQ0FBQTtDQUNwQyxNQUFBLE9BQU9xSyxPQUFPLENBQUNsRyxLQUFLLENBQUNoSSxDQUFDLENBQUMsRUFBRStDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFL0MsQ0FBQyxDQUFBO0NBQ3RDLEtBQUE7Q0FFQSxJQUFBLElBQUlrTyxPQUFPLENBQUNsRyxLQUFLLENBQUNzRyxJQUFJLENBQUMsRUFBRXZMLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRTJMLElBQUksQ0FBQzFHLEtBQUssRUFBRXNHLElBQUksRUFBRXRPLENBQUMsQ0FBQyxDQUFDLEtBQ25ELEVBQUVBLENBQUMsRUFBRTBPLElBQUksQ0FBQzFHLEtBQUssRUFBRWhJLENBQUMsRUFBRXVPLEtBQUssQ0FBQyxDQUFBO0tBRS9CLElBQUl2TyxDQUFDLElBQUlXLENBQUMsRUFBRTJOLElBQUksR0FBR3RPLENBQUMsR0FBRyxDQUFDLENBQUE7S0FDeEIsSUFBSVcsQ0FBQyxJQUFJWCxDQUFDLEVBQUV1TyxLQUFLLEdBQUd2TyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0NBQzNCLEdBQUE7Q0FDQSxFQUFBLE9BQU9nSSxLQUFLLENBQUE7Q0FDZCxDQUFBO0NBRUEsU0FBUzBHLElBQUlBLENBQUMxRyxLQUFLLEVBQUVuRSxDQUFDLEVBQUU3RCxDQUFDLEVBQUU7Q0FDekIsRUFBQSxNQUFNK0MsQ0FBQyxHQUFHaUYsS0FBSyxDQUFDbkUsQ0FBQyxDQUFDLENBQUE7Q0FDbEJtRSxFQUFBQSxLQUFLLENBQUNuRSxDQUFDLENBQUMsR0FBR21FLEtBQUssQ0FBQ2hJLENBQUMsQ0FBQyxDQUFBO0NBQ25CZ0ksRUFBQUEsS0FBSyxDQUFDaEksQ0FBQyxDQUFDLEdBQUcrQyxDQUFDLENBQUE7Q0FDZDs7Q0N4Q2UsU0FBUzRMLFFBQVFBLENBQUNiLE1BQU0sRUFBRWMsQ0FBQyxFQUFFYixPQUFPLEVBQUU7R0FDbkRELE1BQU0sR0FBR2UsWUFBWSxDQUFDQyxJQUFJLENBQUNqQixPQUFPLENBQUNDLE1BQU0sRUFBRUMsT0FBTyxDQUFDLENBQUMsQ0FBQTtDQUNwRCxFQUFBLElBQUksRUFBRXZOLENBQUMsR0FBR3NOLE1BQU0sQ0FBQ2xLLE1BQU0sQ0FBQyxFQUFFLE9BQUE7Q0FDMUIsRUFBQSxJQUFJLENBQUNnTCxDQUFDLEdBQUcsQ0FBQ0EsQ0FBQyxLQUFLLENBQUMsSUFBSXBPLENBQUMsR0FBRyxDQUFDLEVBQUUsT0FBT3VELEdBQUcsQ0FBQytKLE1BQU0sQ0FBQyxDQUFBO0dBQzlDLElBQUljLENBQUMsSUFBSSxDQUFDLEVBQUUsT0FBTzVLLEdBQUcsQ0FBQzhKLE1BQU0sQ0FBQyxDQUFBO0NBQzlCLEVBQUEsSUFBSXROLENBQUM7Q0FDRHFELElBQUFBLENBQUMsR0FBRyxDQUFDckQsQ0FBQyxHQUFHLENBQUMsSUFBSW9PLENBQUM7Q0FDZkcsSUFBQUEsRUFBRSxHQUFHaE8sSUFBSSxDQUFDaUUsS0FBSyxDQUFDbkIsQ0FBQyxDQUFDO0NBQ2xCbUwsSUFBQUEsTUFBTSxHQUFHaEwsR0FBRyxDQUFDcUssV0FBVyxDQUFDUCxNQUFNLEVBQUVpQixFQUFFLENBQUMsQ0FBQ0UsUUFBUSxDQUFDLENBQUMsRUFBRUYsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0tBQ3pERyxNQUFNLEdBQUduTCxHQUFHLENBQUMrSixNQUFNLENBQUNtQixRQUFRLENBQUNGLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO0dBQ3pDLE9BQU9DLE1BQU0sR0FBRyxDQUFDRSxNQUFNLEdBQUdGLE1BQU0sS0FBS25MLENBQUMsR0FBR2tMLEVBQUUsQ0FBQyxDQUFBO0NBQzlDOztDQ2RlLFNBQVNJLE1BQU1BLENBQUNyQixNQUFNLEVBQUVDLE9BQU8sRUFBRTtDQUM5QyxFQUFBLE9BQU9ZLFFBQVEsQ0FBQ2IsTUFBTSxFQUFFLEdBQUcsRUFBRUMsT0FBTyxDQUFDLENBQUE7Q0FDdkM7O0NDSk8sU0FBU3FCLFNBQVNBLENBQUN6TyxDQUFDLEVBQUVaLENBQUMsRUFBRUssQ0FBQyxFQUFFO0dBQ2pDLElBQUksQ0FBQ08sQ0FBQyxHQUFHQSxDQUFDLENBQUE7R0FDVixJQUFJLENBQUNaLENBQUMsR0FBR0EsQ0FBQyxDQUFBO0dBQ1YsSUFBSSxDQUFDSyxDQUFDLEdBQUdBLENBQUMsQ0FBQTtDQUNaLENBQUE7Q0FFQWdQLFNBQVMsQ0FBQ3JKLFNBQVMsR0FBRztDQUNwQlksRUFBQUEsV0FBVyxFQUFFeUksU0FBUztDQUN0QnhOLEVBQUFBLEtBQUssRUFBRSxVQUFTakIsQ0FBQyxFQUFFO0tBQ2pCLE9BQU9BLENBQUMsS0FBSyxDQUFDLEdBQUcsSUFBSSxHQUFHLElBQUl5TyxTQUFTLENBQUMsSUFBSSxDQUFDek8sQ0FBQyxHQUFHQSxDQUFDLEVBQUUsSUFBSSxDQUFDWixDQUFDLEVBQUUsSUFBSSxDQUFDSyxDQUFDLENBQUMsQ0FBQTtJQUNsRTtDQUNEaVAsRUFBQUEsU0FBUyxFQUFFLFVBQVN0UCxDQUFDLEVBQUVLLENBQUMsRUFBRTtDQUN4QixJQUFBLE9BQU9MLENBQUMsS0FBSyxDQUFDLEdBQUdLLENBQUMsS0FBSyxDQUFDLEdBQUcsSUFBSSxHQUFHLElBQUlnUCxTQUFTLENBQUMsSUFBSSxDQUFDek8sQ0FBQyxFQUFFLElBQUksQ0FBQ1osQ0FBQyxHQUFHLElBQUksQ0FBQ1ksQ0FBQyxHQUFHWixDQUFDLEVBQUUsSUFBSSxDQUFDSyxDQUFDLEdBQUcsSUFBSSxDQUFDTyxDQUFDLEdBQUdQLENBQUMsQ0FBQyxDQUFBO0lBQ2xHO0NBQ0RrUCxFQUFBQSxLQUFLLEVBQUUsVUFBU0MsS0FBSyxFQUFFO0tBQ3JCLE9BQU8sQ0FBQ0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQzVPLENBQUMsR0FBRyxJQUFJLENBQUNaLENBQUMsRUFBRXdQLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM1TyxDQUFDLEdBQUcsSUFBSSxDQUFDUCxDQUFDLENBQUMsQ0FBQTtJQUNoRTtDQUNEb1AsRUFBQUEsTUFBTSxFQUFFLFVBQVN6UCxDQUFDLEVBQUU7S0FDbEIsT0FBT0EsQ0FBQyxHQUFHLElBQUksQ0FBQ1ksQ0FBQyxHQUFHLElBQUksQ0FBQ1osQ0FBQyxDQUFBO0lBQzNCO0NBQ0QwUCxFQUFBQSxNQUFNLEVBQUUsVUFBU3JQLENBQUMsRUFBRTtLQUNsQixPQUFPQSxDQUFDLEdBQUcsSUFBSSxDQUFDTyxDQUFDLEdBQUcsSUFBSSxDQUFDUCxDQUFDLENBQUE7SUFDM0I7Q0FDRHNQLEVBQUFBLE1BQU0sRUFBRSxVQUFTL04sUUFBUSxFQUFFO0NBQ3pCLElBQUEsT0FBTyxDQUFDLENBQUNBLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM1QixDQUFDLElBQUksSUFBSSxDQUFDWSxDQUFDLEVBQUUsQ0FBQ2dCLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUN2QixDQUFDLElBQUksSUFBSSxDQUFDTyxDQUFDLENBQUMsQ0FBQTtJQUMxRTtDQUNEZ1AsRUFBQUEsT0FBTyxFQUFFLFVBQVM1UCxDQUFDLEVBQUU7S0FDbkIsT0FBTyxDQUFDQSxDQUFDLEdBQUcsSUFBSSxDQUFDQSxDQUFDLElBQUksSUFBSSxDQUFDWSxDQUFDLENBQUE7SUFDN0I7Q0FDRGlQLEVBQUFBLE9BQU8sRUFBRSxVQUFTeFAsQ0FBQyxFQUFFO0tBQ25CLE9BQU8sQ0FBQ0EsQ0FBQyxHQUFHLElBQUksQ0FBQ0EsQ0FBQyxJQUFJLElBQUksQ0FBQ08sQ0FBQyxDQUFBO0lBQzdCO0NBQ0RrUCxFQUFBQSxRQUFRLEVBQUUsVUFBUzlQLENBQUMsRUFBRTtDQUNwQixJQUFBLE9BQU9BLENBQUMsQ0FBQytQLElBQUksRUFBRSxDQUFDQyxNQUFNLENBQUNoUSxDQUFDLENBQUNpUSxLQUFLLEVBQUUsQ0FBQ0MsR0FBRyxDQUFDLElBQUksQ0FBQ04sT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFDTSxHQUFHLENBQUNsUSxDQUFDLENBQUMyUCxNQUFNLEVBQUUzUCxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQzNFO0NBQ0RtUSxFQUFBQSxRQUFRLEVBQUUsVUFBUzlQLENBQUMsRUFBRTtDQUNwQixJQUFBLE9BQU9BLENBQUMsQ0FBQzBQLElBQUksRUFBRSxDQUFDQyxNQUFNLENBQUMzUCxDQUFDLENBQUM0UCxLQUFLLEVBQUUsQ0FBQ0MsR0FBRyxDQUFDLElBQUksQ0FBQ0wsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFDSyxHQUFHLENBQUM3UCxDQUFDLENBQUNzUCxNQUFNLEVBQUV0UCxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQzNFO0dBQ0Q0RixRQUFRLEVBQUUsWUFBVztDQUNuQixJQUFBLE9BQU8sWUFBWSxHQUFHLElBQUksQ0FBQ2pHLENBQUMsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDSyxDQUFDLEdBQUcsVUFBVSxHQUFHLElBQUksQ0FBQ08sQ0FBQyxHQUFHLEdBQUcsQ0FBQTtDQUN6RSxHQUFBO0NBQ0YsQ0FBQyxDQUFBO0NBSXFCeU8sU0FBUyxDQUFDckosU0FBUzs7Q0M1Q3pDO0NBQ0E7QUFDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtBQUNBO0NBQ0E7Q0FDQTtDQUNBO0FBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtBQUNBO0NBQ0E7QUFDQTtDQUNBO0NBQ0E7Q0FDZSxNQUFNb0ssT0FBTyxDQUFDO0NBQzNCLEVBQUEsT0FBT0MsS0FBS0EsQ0FBQ3JRLENBQUMsRUFBRWMsQ0FBQyxFQUFFMkYsQ0FBQyxFQUFFO0tBQ3BCLElBQUl6RyxDQUFDLElBQUksQ0FBQyxFQUFFO09BQ1YsT0FBT0EsQ0FBQyxJQUFJYyxDQUFDLENBQUE7Q0FDZixLQUFBO0NBQ0E7Q0FDQSxJQUFBLE9BQU8sQ0FBQzJGLENBQUMsR0FBSSxDQUFDLENBQUN6RyxDQUFDLEtBQUtjLENBQUUsQ0FBQTtDQUN6QixHQUFBO0NBRUEsRUFBQSxPQUFPd1AsS0FBS0EsQ0FBQ3RRLENBQUMsRUFBRXlHLENBQUMsRUFBRXJCLENBQUMsRUFBRTtLQUNwQixJQUFJcEYsQ0FBQyxJQUFJLENBQUMsRUFBRTtDQUNWLE1BQUEsT0FBT2dCLElBQUksQ0FBQ1QsR0FBRyxDQUFDNkUsQ0FBQyxDQUFDLEdBQUdwRSxJQUFJLENBQUNULEdBQUcsQ0FBQ1AsQ0FBQyxDQUFDLENBQUE7Q0FDbEMsS0FBQTtDQUNBO0tBQ0EsT0FBTyxDQUFDZ0IsSUFBSSxDQUFDVCxHQUFHLENBQUMsQ0FBQzZFLENBQUMsQ0FBQyxHQUFHcEUsSUFBSSxDQUFDVCxHQUFHLENBQUNrRyxDQUFDLENBQUMsSUFBSXpGLElBQUksQ0FBQ1QsR0FBRyxDQUFDLENBQUNQLENBQUMsQ0FBQyxDQUFBO0NBQ3BELEdBQUE7Q0FFQSxFQUFBLE9BQU91USxLQUFLQSxDQUFDdlEsQ0FBQyxFQUFFYyxDQUFDLEVBQUVzRSxDQUFDLEVBQUU7S0FDcEIsSUFBSXBGLENBQUMsSUFBSSxDQUFDLEVBQUU7Q0FDVixNQUFBLE9BQU9VLEdBQUcsQ0FBQTtDQUNaLEtBQUE7Q0FDQTtDQUNBLElBQUEsT0FBTyxDQUFDMEUsQ0FBQyxHQUFJLENBQUMsQ0FBQ3BGLENBQUMsS0FBS2MsQ0FBRSxDQUFBO0NBQ3pCLEdBQUE7Q0FFQSxFQUFBLE9BQU8wUCxJQUFJQSxDQUFDM0IsQ0FBQyxFQUFFNEIsQ0FBQyxFQUFFO0NBQ2hCLElBQUEsT0FBUTVCLENBQUMsSUFBSTRCLENBQUMsR0FBSyxDQUFFNUIsQ0FBQyxJQUFJNEIsQ0FBQyxHQUFLLENBQUMsQ0FBQyxHQUFHNUIsQ0FBQyxLQUFLNEIsQ0FBRSxNQUFNLENBQUMsR0FBR0EsQ0FBQyxDQUFFLENBQUE7Q0FDNUQsR0FBQTtDQUVBLEVBQUEsT0FBT0MsSUFBSUEsQ0FBQ3RMLENBQUMsRUFBRXVMLENBQUMsRUFBRTtDQUNoQjtLQUNBLElBQUksT0FBT3ZMLENBQUMsS0FBSyxRQUFRLElBQUksT0FBT3VMLENBQUMsS0FBSyxRQUFRLEVBQUU7T0FDbEQsT0FBT3ZMLENBQUMsR0FBR3VMLENBQUMsQ0FBQTtDQUNkLEtBQUE7Q0FDQTtLQUNBLElBQUl2TCxDQUFDLFlBQVlzQixLQUFLLElBQUlpSyxDQUFDLFlBQVlqSyxLQUFLLElBQUl0QixDQUFDLENBQUN2QixNQUFNLEdBQUcsQ0FBQyxJQUFJdUIsQ0FBQyxDQUFDdkIsTUFBTSxLQUFLOE0sQ0FBQyxDQUFDOU0sTUFBTSxFQUFFO09BQ3JGLElBQUlzQixDQUFDLEdBQUcsQ0FBQyxDQUFBO0NBQ1QsTUFBQSxLQUFLLElBQUkxRSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcyRSxDQUFDLENBQUN2QixNQUFNLEVBQUVwRCxDQUFDLElBQUksQ0FBQyxFQUFFO1NBQ3BDMEUsQ0FBQyxJQUFJQyxDQUFDLENBQUMzRSxDQUFDLENBQUMsR0FBR2tRLENBQUMsQ0FBQ2xRLENBQUMsQ0FBQyxDQUFBO0NBQ2xCLE9BQUE7Q0FDQSxNQUFBLE9BQU8wRSxDQUFDLENBQUE7Q0FDVixLQUFBO0NBQ0E7Q0FDQSxJQUFBLE9BQU96RSxHQUFHLENBQUE7Q0FDWixHQUFBO0NBQ0Y7O0NDcEVBOztDQ0RBO0NBVUFrUSxJQUFJLENBQUNDLFNBQVMsR0FBSUMsS0FBSyxJQUFLO0NBQzFCLEVBQUEsTUFBTXZILE1BQU0sR0FBRztDQUNiOUYsSUFBQUEsS0FBSyxFQUFFO0NBQUN1RixNQUFBQSxJQUFJLEVBQUUsTUFBTTtDQUFFQyxNQUFBQSxLQUFLLEVBQUUsQ0FBQztDQUFFQyxNQUFBQSxLQUFLLEVBQUUsQ0FBQTtNQUFFO0NBQ3pDdEUsSUFBQUEsTUFBTSxFQUFFO0NBQUNvRSxNQUFBQSxJQUFJLEVBQUUsTUFBTTtDQUFFQyxNQUFBQSxLQUFLLEVBQUUsQ0FBQztDQUFFQyxNQUFBQSxLQUFLLEVBQUUsRUFBQTtNQUFHO0NBQzNDMUcsSUFBQUEsS0FBSyxFQUFFO0NBQUN3RyxNQUFBQSxJQUFJLEVBQUUsTUFBTTtDQUFFQyxNQUFBQSxLQUFLLEVBQUUsQ0FBQztDQUFFQyxNQUFBQSxLQUFLLEVBQUUsQ0FBQTtNQUFFO0NBQ3pDNkgsSUFBQUEsSUFBSSxFQUFFO0NBQUMvSCxNQUFBQSxJQUFJLEVBQUUsTUFBTTtDQUFFQyxNQUFBQSxLQUFLLEVBQUUsQ0FBQztDQUFFQyxNQUFBQSxLQUFLLEVBQUUsR0FBQTtDQUFHLEtBQUE7SUFDMUMsQ0FBQTtDQUVELEVBQUEsTUFBTThILE9BQU8sR0FBR0EsQ0FBQ3JILEtBQUssRUFBRW9ELElBQUksS0FBSztLQUMvQixJQUFJa0UsRUFBRSxHQUFHLENBQUMsQ0FBQTs7Q0FFVjtLQUNBLE1BQU1DLFNBQVMsR0FBRyxHQUFHLENBQUE7S0FDckIsTUFBTUMsZUFBZSxHQUFHLEdBQUcsQ0FBQTtDQUMzQkYsSUFBQUEsRUFBRSxJQUFJRyx5QkFBdUIsQ0FDM0J6SCxLQUFLLENBQUNsRyxLQUFLLEVBQ1h5TixTQUFTLEdBQUdDLGVBQWUsRUFDM0IsQ0FBQyxDQUFDLEdBQUdELFNBQVMsSUFBSUMsZUFBZSxDQUNsQyxDQUFBO0NBQ0Q7O0tBRUEsTUFBTUUsVUFBVSxHQUFHLENBQUMsQ0FBQTtLQUNwQixNQUFNQyxXQUFXLEdBQUcsQ0FBQyxDQUFBO0NBQ3JCTCxJQUFBQSxFQUFFLElBQUlHLDBCQUF3QixDQUM1QnpILEtBQUssQ0FBQy9FLE1BQU0sRUFDWjBNLFdBQVcsRUFDWEEsV0FBVyxHQUFHRCxVQUFVLENBQ3pCLENBQUE7Q0FDRDs7S0FFQSxNQUFNRSxTQUFTLEdBQUcsR0FBRyxDQUFBO0tBQ3JCLE1BQU1DLGVBQWUsR0FBRyxHQUFHLENBQUE7Q0FDM0JQLElBQUFBLEVBQUUsSUFBSUcseUJBQXVCLENBQzNCekgsS0FBSyxDQUFDbkgsS0FBSyxFQUNYK08sU0FBUyxHQUFHQyxlQUFlLEVBQzNCLENBQUMsQ0FBQyxHQUFHRCxTQUFTLElBQUlDLGVBQWUsQ0FDbEMsQ0FBQTtDQUNEOztLQUVBLE1BQU1DLFFBQVEsR0FBRyxDQUFDLENBQUE7S0FDbEIsTUFBTUMsU0FBUyxHQUFHLENBQUMsQ0FBQTtDQUNuQlQsSUFBQUEsRUFBRSxJQUFJRywwQkFBd0IsQ0FDNUJ6SCxLQUFLLENBQUNvSCxJQUFJLEVBQ1ZXLFNBQVMsRUFDVEEsU0FBUyxHQUFHRCxRQUFRLENBQ3JCLENBQUE7Q0FDRDs7Q0FFQTtDQUNBMUUsSUFBQUEsSUFBSSxDQUFDNEUsT0FBTyxDQUFFQyxNQUFNLElBQUs7Q0FDdkI7Q0FDQSxNQUFBLE1BQU1DLEVBQUUsR0FBR3pCLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDdUIsTUFBTSxDQUFDRSxFQUFFLEVBQUVuSSxLQUFLLENBQUNsRyxLQUFLLEVBQUVrRyxLQUFLLENBQUMvRSxNQUFNLENBQUMsQ0FBQTtDQUM5RCxNQUFBLE1BQU1tTixFQUFFLEdBQUczQixPQUFPLENBQUNDLEtBQUssQ0FBQ3VCLE1BQU0sQ0FBQ0ksRUFBRSxFQUFFckksS0FBSyxDQUFDbEcsS0FBSyxFQUFFa0csS0FBSyxDQUFDL0UsTUFBTSxDQUFDLENBQUE7Q0FDOUQsTUFBQSxNQUFNcU4sRUFBRSxHQUFHN0IsT0FBTyxDQUFDQyxLQUFLLENBQUN1QixNQUFNLENBQUNNLEVBQUUsRUFBRXZJLEtBQUssQ0FBQ2xHLEtBQUssRUFBRWtHLEtBQUssQ0FBQy9FLE1BQU0sQ0FBQyxDQUFBOztDQUU5RDtDQUNBLE1BQUEsTUFBTXVOLEVBQUUsR0FBRy9CLE9BQU8sQ0FBQ0ksSUFBSSxDQUFDb0IsTUFBTSxDQUFDUSxFQUFFLEVBQUV6SSxLQUFLLENBQUNuSCxLQUFLLENBQUMsQ0FBQTtDQUMvQyxNQUFBLE1BQU02UCxFQUFFLEdBQUcsQ0FBQyxHQUFHRixFQUFFLENBQUE7O0NBRWpCO09BQ0EsTUFBTUcsRUFBRSxHQUFHRCxFQUFFLEdBQUdSLEVBQUUsR0FBR00sRUFBRSxHQUFHSixFQUFFLENBQUE7T0FDNUIsTUFBTVEsRUFBRSxHQUFHTixFQUFFLENBQUE7O0NBRWI7Q0FDQTtDQUNBLE1BQUEsTUFBTU8sTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUd4UixJQUFJLENBQUNDLEdBQUcsQ0FBQzBJLEtBQUssQ0FBQ29ILElBQUksSUFBSXdCLEVBQUUsR0FBR0QsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFBOztDQUV6RDtPQUNBLE1BQU1HLFFBQVEsR0FBSWIsTUFBTSxDQUFDYSxRQUFRLEtBQUssTUFBTSxHQUFJLENBQUMsR0FBRyxDQUFDLENBQUE7T0FFckR4QixFQUFFLElBQUlHLHlCQUF1QixDQUFDcUIsUUFBUSxFQUFFRCxNQUFNLENBQUMsQ0FBQTtDQUNqRCxLQUFDLENBQUMsQ0FBQTtDQUVGLElBQUEsT0FBT3ZCLEVBQUUsQ0FBQTtJQUNWLENBQUE7O0NBRUQ7Q0FDQSxFQUFBLE1BQU15QixPQUFPLEdBQUcsSUFBSUMsdUJBQXFCLENBQUNwSixNQUFNLEVBQUV5SCxPQUFPLEVBQUVGLEtBQUssQ0FBQy9ELElBQUksQ0FBQyxDQUFBO0NBQ3RFO0NBQ0EyRixFQUFBQSxPQUFPLENBQUMvRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7Q0FDbEIsRUFBQSxNQUFNaUYsT0FBTyxHQUFHRixPQUFPLENBQUNuRixNQUFNLENBQUMsSUFBSSxDQUFDLENBQUE7O0NBRXBDO0NBQ0EsRUFBQSxNQUFNc0YsT0FBTyxHQUFHO0tBQ2RwUCxLQUFLLEVBQUVxUCxNQUFTLENBQUNGLE9BQU8sQ0FBQ25QLEtBQUssQ0FBQztLQUMvQm1CLE1BQU0sRUFBRWtPLE1BQVMsQ0FBQ0YsT0FBTyxDQUFDaE8sTUFBTSxDQUFDO0tBQ2pDcEMsS0FBSyxFQUFFc1EsTUFBUyxDQUFDRixPQUFPLENBQUNwUSxLQUFLLENBQUM7Q0FDL0J1TyxJQUFBQSxJQUFJLEVBQUUrQixNQUFTLENBQUNGLE9BQU8sQ0FBQzdCLElBQUksQ0FBQTtJQUM3QixDQUFBO0dBRURILElBQUksQ0FBQ21DLFdBQVcsQ0FBQztDQUFDRixJQUFBQSxPQUFPLEVBQUVBLE9BQU87Q0FBRUQsSUFBQUEsT0FBTyxFQUFFQSxPQUFBQTtDQUFPLEdBQUMsQ0FBQyxDQUFBO0NBQ3hELENBQUM7Ozs7OzsiLCJ4X2dvb2dsZV9pZ25vcmVMaXN0IjpbMCwxLDIsMyw0LDUsNiw3LDgsOSwxMF19",!1);const plotlyStyle=r$5`
  /* inject:css */
  .js-plotly-plot .plotly, .js-plotly-plot .plotly div {
  direction: ltr;
  font-family: "Open Sans", verdana, arial, sans-serif;
  margin: 0;
  padding: 0;
}
.js-plotly-plot .plotly input, .js-plotly-plot .plotly button {
  font-family: "Open Sans", verdana, arial, sans-serif;
}
.js-plotly-plot .plotly input:focus, .js-plotly-plot .plotly button:focus {
  outline: none;
}
.js-plotly-plot .plotly a {
  text-decoration: none;
}
.js-plotly-plot .plotly a:hover {
  text-decoration: none;
}
.js-plotly-plot .plotly .crisp {
  shape-rendering: crispEdges;
}
.js-plotly-plot .plotly .user-select-none {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -o-user-select: none;
  user-select: none;
}
.js-plotly-plot .plotly svg {
  overflow: hidden;
}
.js-plotly-plot .plotly svg a {
  fill: #447adb;
}
.js-plotly-plot .plotly svg a:hover {
  fill: #3c6dc5;
}
.js-plotly-plot .plotly .main-svg {
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
}
.js-plotly-plot .plotly .main-svg .draglayer {
  pointer-events: all;
}
.js-plotly-plot .plotly .cursor-default {
  cursor: default;
}
.js-plotly-plot .plotly .cursor-pointer {
  cursor: pointer;
}
.js-plotly-plot .plotly .cursor-crosshair {
  cursor: crosshair;
}
.js-plotly-plot .plotly .cursor-move {
  cursor: move;
}
.js-plotly-plot .plotly .cursor-col-resize {
  cursor: col-resize;
}
.js-plotly-plot .plotly .cursor-row-resize {
  cursor: row-resize;
}
.js-plotly-plot .plotly .cursor-ns-resize {
  cursor: ns-resize;
}
.js-plotly-plot .plotly .cursor-ew-resize {
  cursor: ew-resize;
}
.js-plotly-plot .plotly .cursor-sw-resize {
  cursor: sw-resize;
}
.js-plotly-plot .plotly .cursor-s-resize {
  cursor: s-resize;
}
.js-plotly-plot .plotly .cursor-se-resize {
  cursor: se-resize;
}
.js-plotly-plot .plotly .cursor-w-resize {
  cursor: w-resize;
}
.js-plotly-plot .plotly .cursor-e-resize {
  cursor: e-resize;
}
.js-plotly-plot .plotly .cursor-nw-resize {
  cursor: nw-resize;
}
.js-plotly-plot .plotly .cursor-n-resize {
  cursor: n-resize;
}
.js-plotly-plot .plotly .cursor-ne-resize {
  cursor: ne-resize;
}
.js-plotly-plot .plotly .cursor-grab {
  cursor: -webkit-grab;
  cursor: grab;
}
.js-plotly-plot .plotly .modebar {
  position: absolute;
  top: 2px;
  right: 2px;
}
.js-plotly-plot .plotly .ease-bg {
  -webkit-transition: background-color 0.3s ease 0s;
  -moz-transition: background-color 0.3s ease 0s;
  -ms-transition: background-color 0.3s ease 0s;
  -o-transition: background-color 0.3s ease 0s;
  transition: background-color 0.3s ease 0s;
}
.js-plotly-plot .plotly .modebar--hover > :not(.watermark) {
  opacity: 0;
  -webkit-transition: opacity 0.3s ease 0s;
  -moz-transition: opacity 0.3s ease 0s;
  -ms-transition: opacity 0.3s ease 0s;
  -o-transition: opacity 0.3s ease 0s;
  transition: opacity 0.3s ease 0s;
}
.js-plotly-plot .plotly:hover .modebar--hover .modebar-group {
  opacity: 1;
}
.js-plotly-plot .plotly .modebar-group {
  float: left;
  display: inline-block;
  box-sizing: border-box;
  padding-left: 8px;
  position: relative;
  vertical-align: middle;
  white-space: nowrap;
}
.js-plotly-plot .plotly .modebar-btn {
  position: relative;
  font-size: 16px;
  padding: 3px 4px;
  height: 22px;
  /* display: inline-block; including this breaks 3d interaction in .embed mode. Chrome bug? */
  cursor: pointer;
  line-height: normal;
  box-sizing: border-box;
}
.js-plotly-plot .plotly .modebar-btn svg {
  position: relative;
  top: 2px;
}
.js-plotly-plot .plotly .modebar.vertical {
  display: flex;
  flex-direction: column;
  flex-wrap: wrap;
  align-content: flex-end;
  max-height: 100%;
}
.js-plotly-plot .plotly .modebar.vertical svg {
  top: -1px;
}
.js-plotly-plot .plotly .modebar.vertical .modebar-group {
  display: block;
  float: none;
  padding-left: 0px;
  padding-bottom: 8px;
}
.js-plotly-plot .plotly .modebar.vertical .modebar-group .modebar-btn {
  display: block;
  text-align: center;
}
.js-plotly-plot .plotly [data-title] {
  /**
   * tooltip body
   */
}
.js-plotly-plot .plotly [data-title]:before, .js-plotly-plot .plotly [data-title]:after {
  position: absolute;
  -webkit-transform: translate3d(0, 0, 0);
  -moz-transform: translate3d(0, 0, 0);
  -ms-transform: translate3d(0, 0, 0);
  -o-transform: translate3d(0, 0, 0);
  transform: translate3d(0, 0, 0);
  display: none;
  opacity: 0;
  z-index: 1001;
  pointer-events: none;
  top: 110%;
  right: 50%;
}
.js-plotly-plot .plotly [data-title]:hover:before, .js-plotly-plot .plotly [data-title]:hover:after {
  display: block;
  opacity: 1;
}
.js-plotly-plot .plotly [data-title]:before {
  content: "";
  position: absolute;
  background: transparent;
  border: 6px solid transparent;
  z-index: 1002;
  margin-top: -12px;
  border-bottom-color: #69738a;
  margin-right: -6px;
}
.js-plotly-plot .plotly [data-title]:after {
  content: attr(data-title);
  background: #69738a;
  color: white;
  padding: 8px 10px;
  font-size: 12px;
  line-height: 12px;
  white-space: nowrap;
  margin-right: -18px;
  border-radius: 2px;
}
.js-plotly-plot .plotly .vertical [data-title]:before, .js-plotly-plot .plotly .vertical [data-title]:after {
  top: 0%;
  right: 200%;
}
.js-plotly-plot .plotly .vertical [data-title]:before {
  border: 6px solid transparent;
  border-left-color: #69738a;
  margin-top: 8px;
  margin-right: -30px;
}
.js-plotly-plot .plotly .select-outline {
  fill: none;
  stroke-width: 1;
  shape-rendering: crispEdges;
}
.js-plotly-plot .plotly .select-outline-1 {
  stroke: white;
}
.js-plotly-plot .plotly .select-outline-2 {
  stroke: black;
  stroke-dasharray: 2px 2px;
}

.plotly-notifier {
  font-family: "Open Sans", verdana, arial, sans-serif;
  position: fixed;
  top: 50px;
  right: 20px;
  z-index: 10000;
  font-size: 10pt;
  max-width: 180px;
}
.plotly-notifier p {
  margin: 0;
}
.plotly-notifier .notifier-note {
  min-width: 180px;
  max-width: 250px;
  border: 1px solid #fff;
  z-index: 3000;
  margin: 0;
  background-color: #8c97af;
  background-color: rgba(140, 151, 175, 0.9);
  color: #fff;
  padding: 10px;
  overflow-wrap: break-word;
  word-wrap: break-word;
  -ms-hyphens: auto;
  -webkit-hyphens: auto;
  hyphens: auto;
}
.plotly-notifier .notifier-close {
  color: #fff;
  opacity: 0.8;
  float: right;
  padding: 0 5px;
  background: none;
  border: none;
  font-size: 20px;
  font-weight: bold;
  line-height: 20px;
}
.plotly-notifier .notifier-close:hover {
  color: #444;
  text-decoration: none;
  cursor: pointer;
}
  /* endinject */
`;coreExports.register([PlotlyHistogram]);class CPTFit extends ProspectableElement{static get properties(){return{}}constructor(){super(),this.a=1,this.l=1,this.g=1,this.choices=[],this.samples=null,this.working=!1,this.queued=!1,this.worker=new WorkerFactory,this.worker.onmessage=e=>{this.working=!1,this.samples=e.data.samples,this.a=e.data.results.alpha,this.l=e.data.results.lambda,this.g=e.data.results.gamma,this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-fit-update",{detail:{a:this.a,l:this.l,g:this.g},bubbles:!0})),this.queued&&this.fit()},this.fit()}fit(){this.working?this.queued=!0:(this.worker.postMessage(this.choices),this.working=!0,this.queued=!1)}clear(){this.choices=[],this.fit()}get(e="default"){const t=this.choices.find((t=>t.name===e));return void 0===t?null:t}set(e,t,r,n,i,a="",o=""){const s=this.choices.find((e=>e.name===a));void 0===s?this.choices.push({xl:e,xw:t,pw:r,xs:n,response:i,name:a,label:o}):(s.xl=e,s.xw=t,s.pw=r,s.xs=n,s.response=i,s.label=o),this.fit()}static get styles(){return[super.styles,plotlyStyle,r$5`
        /* :host {
          display: inline-block;
        } */

        .trace,
        .hist {
          display: inline-block;

          width: 20rem;
          height: 15rem;
        }
      `]}render(){return x$2`
      <div>
        <div>After ${this.choices.length} trials:</div>
        <div>Current:
          <var class="math-var a">α</var> = ${this.a.toFixed(2)},
          <var class="math-var l">λ</var> = ${this.l.toFixed(2)},
          <var class="math-var g">γ</var> = ${this.g.toFixed(2)}
        </div>
        <div class="param">
          <div class="trace alpha"></div>
          <div class="hist alpha"></div>
        </div>
        <div class="param">
          <div class="trace lambda"></div>
          <div class="hist lambda"></div>
        </div>
        <div class="param">
          <div class="trace gamma"></div>
          <div class="hist gamma"></div>
        </div>
        <div class="param">
          <div class="trace luce"></div>
          <div class="hist luce"></div>
        </div>
      </div>
    `}plotParam(e){const t={l:40,r:10,b:40,t:40,pad:4};coreExports.react(this.shadowRoot.querySelector(`.trace.${e}`),[{y:this.samples[e]}],{margin:t,title:`Traceplot of ${e}`}),coreExports.react(this.shadowRoot.querySelector(`.hist.${e}`),[{x:this.samples[e],type:"histogram"}],{margin:t,title:`Posterior of ${e}`})}update(e){super.update(e),null!==this.samples&&(this.plotParam("alpha"),this.plotParam("lambda"),this.plotParam("gamma"),this.plotParam("luce"))}}customElements.define("cpt-fit",CPTFit);class CPTProbability extends ProspectableElement{static get properties(){return{p:{attribute:"probability",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},label:{attribute:"label",type:String,reflect:!0},w:{attribute:!1,type:Number,reflect:!1},width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.firstUpdate=!0,this.drag=!1,this.g=.5,this.p=null,this.label="",this.function="default",this.functions=[{name:"default",g:this.g}],this.probabilities=[{name:"default",p:this.p,label:this.label,function:this.function}],this.xl=null,this.xw=null,this.pw=null,this.xs=null,this.trialCount=null,this.response=null,this.width=NaN,this.height=NaN,this.rem=NaN,this.alignState()}alignState(){this.functions[0].g=this.g,this.probabilities[0].p=this.p,this.probabilities[0].label=this.label,this.probabilities[0].function=this.function,this.probabilities.forEach((e=>{const t=this.functions.find((t=>t.name===e.function));e.w=CPTMath.pg2w(e.p,t.g)})),this.w=this.probabilities[0].w}trial(e,t,r,n,i,a){this.trialCount&&this.removeProbability(`${this.trialCount}`),this.xl=e,this.xw=t,this.pw=r,this.xs=n,this.trialCount=i,this.response=a,this.setProbability(this.pw,`${this.trialCount}`,"","default",!0)}pauseTrial(){const e=select$5(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]");e.interrupt("new-1"),e.interrupt("new-2"),e.datum((e=>(e.paused=!0,e)))}resumeTrial(){select$5(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]").datum((e=>(e.paused=!1,e))),this.requestUpdate()}clearFunctions(){this.functions.splice(1),this.requestUpdate()}clearProbabilities(){this.probabilities.splice(1),this.requestUpdate()}clear(){this.clearFunctions(),this.clearProbabilities()}removeFunction(e){this.functions=this.functions.filter((t=>t.name!==e)),this.requestUpdate()}removeProbability(e){this.probabilities=this.probabilities.filter((t=>t.name!==e)),this.requestUpdate()}remove(e){this.removeFunction(e),this.removeProbability(e)}getFunction(e="default"){return this.functions.find((t=>t.name===e))}getProbability(e="default"){return this.probabilities.find((t=>t.name===e))}get(e="default"){return{...this.getFunction(e),...this.getProbability(e)}}setFunction(e,t="default"){"default"===t&&(this.g=e);const r=this.functions.find((e=>e.name===t));void 0===r?this.functions.push({name:t,g:e}):r.g=e,this.requestUpdate()}setProbability(e,t="default",r="",n=t,i=!1){"default"===t&&(this.p=e,this.label=r);const a=this.probabilities.find((e=>e.name===t));void 0===a?this.probabilities.push({name:t,p:e,label:r,function:n,trial:i,new:i}):(a.p=e,a.label=r,a.function=n),this.requestUpdate()}set(e,t,r="default",n="",i=r){this.setFunction(t,i),this.setProbability(e,r,n,i)}static get styles(){return[super.styles,r$5`
        :host {
          display: inline-block;

          width: 20rem;
          height: 20rem;
        }

        .main {
          width: 100%;
          height: 100%;
        }

        text {
          /* stylelint-disable property-no-vendor-prefix */
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }

        .curve.interactive {
          cursor: nwse-resize;

          filter: url("#shadow-2");
          outline: none;
        }

        .curve.interactive:hover {
          filter: url("#shadow-4");
        }

        .curve.interactive:active {
          filter: url("#shadow-8");
        }

        :host(.keyboard) .curve.interactive:focus {
          filter: url("#shadow-8");
        }

        .point.interactive {
          cursor: nesw-resize;

          filter: url("#shadow-2");
          outline: none;

          /* HACK: This gets Safari to correctly apply the filter! */
          /* https://github.com/emilbjorklund/svg-weirdness/issues/27 */
          stroke: #000000;
          stroke-opacity: 0;
          stroke-width: 0;
        }

        /* Make a larger target for touch users */
        @media (pointer: coarse) {
          .point.interactive .circle {
            stroke: #000000;
            stroke-opacity: 0;
            stroke-width: 12px;
          }
        }

        .point.interactive:hover {
          filter: url("#shadow-4");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #ff0000;
        }

        .point.interactive:active {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #00ff00;
        }

        :host(.keyboard) .point.interactive:focus {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #0000ff;
        }

        .background {
          fill: var(---color-element-background);
          stroke: var(---color-element-border);
          stroke-width: 1;
          shape-rendering: crispEdges;
        }

        .title-x,
        .title-y {
          font-weight: 600;

          fill: currentColor;
        }

        .tick {
          font-size: 0.75rem;
        }

        .scale-x path,
        .scale-x line,
        .scale-y path,
        .scale-y line {
          stroke: var(---color-element-border);
        }

        .diagonal {
          stroke: var(---color-element-border);
          stroke-dasharray: 4;
          stroke-width: 1;
        }

        .curve {
          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .line-p,
        .line-w {
          fill: none;
          stroke-width: 2;
        }

        .line-p {
          stroke: var(---color-p);
        }

        .line-w {
          stroke: var(---color-w);
        }

        .point .circle {
          fill: var(---color-element-emphasis);

          r: 6px;
        }

        .point .label {
          font-size: 0.75rem;

          dominant-baseline: middle;
          text-anchor: middle;

          fill: var(---color-text-inverse);
        }
      `]}render(){return x$2`
      ${ProspectableElement.svgFilters}
    `}getDimensions(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.getDimensions.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.getDimensions.bind(this)),super.disconnectedCallback()}firstUpdated(e){super.firstUpdated(e),this.getDimensions()}update(e){if(super.update(e),this.alignState(),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const t=this.width,r=this.height,n=Math.min(t,r),i=2*this.rem,a=3*this.rem,o=3*this.rem,s=n-(i+a),l=n-(o+2*this.rem),c=parseInt(this.getComputedStyleValue("---transition-duration"),10),u=linear().domain([0,1]).range([0,l]).clamp(!0);this.xScale=u;const d=linear().domain([1,0]).range([0,s]);this.yScale=d;const h=drag().subject(((e,t)=>({x:e.x,y:this.yScale(CPTMath.pg2w(this.xScale.invert(e.x),t.g)),p:this.xScale.invert(e.x),g:t.g,w:CPTMath.pg2w(this.xScale.invert(e.x),t.g)}))).on("start",(e=>{select$5(e.currentTarget).classed("dragging",!0)})).on("drag",((e,t)=>{this.drag=!0;const r=this.xScale.invert(e.x),n=this.yScale.invert(e.y),i=r-e.subject.p,a=n-e.subject.w,o=(i**2+a**2)**.5,s=e.subject.p>e.subject.w?i>a?e.subject.g-o:e.subject.g+o:i>a?e.subject.g+o:e.subject.g-o;t.g=s>1?1:s<0?0:s,"default"===t.name&&(this.g=t.g),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:this.get(t.name),bubbles:!0}))})).on("end",(e=>{select$5(e.currentTarget).classed("dragging",!1)})),g=drag().subject(((e,t)=>({x:this.xScale(t.p),y:this.yScale(t.w)}))).on("start",(e=>{select$5(e.currentTarget).classed("dragging",!0)})).on("drag",((e,t)=>{this.drag=!0;const r=this.xScale.invert(e.x);t.p=r<0?0:r>1?1:r,"default"===t.name&&(this.p=t.p),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:{name:t.name,p:t.p,w:t.w,label:t.label,g:this.getFunction(t.function).g},bubbles:!0}))})).on("end",(e=>{select$5(e.currentTarget).classed("dragging",!1)})),p=line().x((e=>u(e.p))).y((e=>d(e.w))),f=select$5(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),m=f.enter().append("svg").classed("main",!0),y=m.merge(f).attr("viewBox",`0 0 ${n} ${n}`),b=m.append("g").classed("plot",!0),v=y.select(".plot").attr("transform",`translate(${o}, ${i})`);b.append("clipPath").attr("id","clip-cpt-value").append("rect"),v.select("clipPath rect").attr("height",s+1).attr("width",l+1);const x=b.append("g").classed("underlayer",!0),B=v.select(".underlayer");x.append("rect").classed("background",!0),B.select(".background").attr("height",s).attr("width",l),x.append("g").classed("scale-x",!0);B.select(".scale-x").attr("transform",`translate(0, ${s})`).transition().duration(2*c).ease(cubicOut).call(axisBottom(u)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null);const I=x.append("text").classed("title-x",!0).attr("text-anchor","middle");I.append("tspan").classed("name",!0).text("Probability ("),I.append("tspan").classed("math-var p",!0).text("p"),I.append("tspan").classed("name",!0).text(")"),B.select(".title-x").attr("transform",`translate(${l/2}, ${s+2.25*this.rem})`),x.append("g").classed("scale-y",!0);B.select(".scale-y").transition().duration(2*c).ease(cubicOut).call(axisLeft(d)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null);const F=x.append("text").classed("title-y",!0).attr("text-anchor","middle");F.append("tspan").classed("name",!0).text("Decision Weight ("),F.append("tspan").classed("math-var v",!0).text("w"),F.append("tspan").classed("name",!0).text(")"),B.select(".title-y").attr("transform",`translate(${-2*this.rem}, ${s/2})rotate(-90)`),x.append("line").classed("diagonal",!0),B.select(".diagonal").transition().duration(2*c).attr("x1",u(0)).attr("y1",d(0)).attr("x2",u(1)).attr("y2",d(1)),b.append("g").classed("content",!0);const A=v.select(".content"),C=A.selectAll(".lines").data(this.probabilities.filter((e=>null!=e.p)),(e=>e.name)),w=C.enter().append("g").classed("lines",!0);w.each(((e,t,r)=>{const n=select$5(r[t]);n.append("line").classed("line-p above",!0),n.append("line").classed("line-p below",!0),n.append("line").classed("line-w before",!0),n.append("line").classed("line-w after",!0)})),w.filter((e=>e.new)).attr("data-animating-ease-time-1",0).attr("data-animating-ease-time-2",0).each(((e,t,r)=>{const n=select$5(r[t]);n.select(".line-p.above").attr("x1",u(e.p)).attr("x2",u(e.p)).attr("y1",d(1)).attr("y2",d(1)),n.select(".line-p.below").attr("x1",u(e.p)).attr("x2",u(e.p)).attr("y1",d(0)).attr("y2",d(0)),n.select(".line-w.before").attr("x1",u(e.p)).attr("x2",u(e.p)).attr("y1",d(e.w)).attr("y2",d(e.w)),n.select(".line-w.after").attr("x1",u(e.p)).attr("x2",u(e.p)).attr("y1",d(e.w)).attr("y2",d(e.w))}));const Q=w.merge(C),U=Q.filter((e=>e.new&&!e.paused));if(!U.empty()){const e=U.attr("data-animating-ease-time-1"),t=U.attr("data-animating-ease-time-2"),r=t=>linear().domain([0,1]).range([e,1])(t),n=t=>linear().range([0,1]).domain([e,1])(t),i=e=>linear().domain([0,1]).range([t,1])(e),a=e=>linear().range([0,1]).domain([t,1])(e),o=t=>r=>linear().domain([t(e),1]).range([0,1])(t(r)),s=e=>r=>linear().domain([e(t),1]).range([0,1])(e(r));U.transition("new-1").duration((()=>Math.floor(c*(1-e)))).ease(r).attr("data-animating-ease-time-1",1).tween("animating",((e,t,r)=>{const i=r[t],a=select$5(i),s=interpolate$1(void 0!==i.p?i.p:e.p,e.p),l=interpolate$1(void 0!==i.g?i.g:this.getFunction(e.function).g,this.getFunction(e.function).g),c=interpolate$1(d.invert(a.select(".line-p.above").attr("y1")),e.w),h=interpolate$1(d.invert(a.select(".line-p.below").attr("y1")),e.w);return e=>{i.p=s(cubicOut(n(e))),i.g=l(cubicOut(n(e))),i.w=CPTMath.pg2w(i.p,i.g),a.select(".line-p.above").attr("x1",u(i.p)).attr("x2",u(i.p)).attr("y1",d(c(o(cubicIn)(e)))).attr("y2",d(1)),a.select(".line-p.below").attr("x1",u(i.p)).attr("x2",u(i.p)).attr("y1",d(h(o(cubicIn)(e)))).attr("y2",d(0))}})).transition("new-2").duration((()=>Math.floor(c*(1-t)))).ease(i).attr("data-animating-ease-time-2",1).tween("animating",((e,t,r)=>{const n=r[t],i=select$5(n),o=interpolate$1(void 0!==n.p?n.p:e.p,e.p),l=interpolate$1(void 0!==n.g?n.g:this.getFunction(e.function).g,this.getFunction(e.function).g),c=interpolate$1(u.invert(i.select(".line-w.before").attr("x1")),0),h=interpolate$1(u.invert(i.select(".line-w.after").attr("x1")),1);return e=>{n.p=o(cubicOut(a(e))),n.g=l(cubicOut(a(e))),n.w=CPTMath.pg2w(n.p,n.g),i.select(".line-w.before").attr("x1",u(c(s(cubicOut)(e)))).attr("x2",u(n.p)).attr("y1",d(n.w)).attr("y2",d(n.w)),i.select(".line-w.after").attr("x1",u(h(s(cubicOut)(e)))).attr("x2",u(n.p)).attr("y1",d(n.w)).attr("y2",d(n.w))}})).on("end",((e,t,r)=>{const n=r[t];n.removeAttribute("data-animating-ease-time-1"),n.removeAttribute("data-animating-ease-time-2"),e.new=!1,this.dispatchEvent(new CustomEvent("prospectable-response",{detail:{trial:this.trialCount,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,response:this.response},bubbles:!0}))}))}const S=Q.filter((e=>e.new&&e.paused));if(!S.empty()){const e=S.attr("data-animating-ease-time-1"),t=S.attr("data-animating-ease-time-2");S.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(cubicOut).tween("paused",((r,n,i)=>{const a=i[n],o=select$5(a),s=interpolate$1(void 0!==a.p?a.p:r.p,r.p),l=interpolate$1(void 0!==a.g?a.g:this.getFunction(r.function).g,this.getFunction(r.function).g),c=interpolate$1(1,r.w),h=interpolate$1(0,r.w),g=interpolate$1(r.p,0),p=interpolate$1(r.p,1);return r=>{a.p=s(r),a.g=l(r),a.w=CPTMath.pg2w(a.p,a.g),o.select(".line-p.above").attr("x1",u(a.p)).attr("x2",u(a.p)).attr("y1",d(c(cubicIn(e)))).attr("y2",d(1)),o.select(".line-p.below").attr("x1",u(a.p)).attr("x2",u(a.p)).attr("y1",d(h(cubicIn(e)))).attr("y2",d(0)),o.select(".line-w.before").attr("x1",u(g(cubicOut(t)))).attr("x2",u(a.p)).attr("y1",d(a.w)).attr("y2",d(a.w)),o.select(".line-w.after").attr("x1",u(p(cubicOut(t)))).attr("x2",u(a.p)).attr("y1",d(a.w)).attr("y2",d(a.w))}}))}Q.filter((e=>!e.new)).transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(cubicOut).tween("non-animating",((e,t,r)=>{const n=r[t],i=select$5(n),a=interpolate$1(void 0!==n.p?n.p:e.p,e.p),o=interpolate$1(void 0!==n.g?n.g:this.getFunction(e.function).g,this.getFunction(e.function).g);return e=>{n.p=a(e),n.g=o(e),n.w=CPTMath.pg2w(n.p,n.g),i.select(".line-p.above").attr("x1",u(n.p)).attr("x2",u(n.p)).attr("y1",d(n.w)).attr("y2",d(1)),i.select(".line-p.below").attr("x1",u(n.p)).attr("x2",u(n.p)).attr("y1",d(n.w)).attr("y2",d(0)),i.select(".line-w.before").attr("x1",u(0)).attr("x2",u(n.p)).attr("y1",d(n.w)).attr("y2",d(n.w)),i.select(".line-w.after").attr("x1",u(1)).attr("x2",u(n.p)).attr("y1",d(n.w)).attr("y2",d(n.w))}})),C.exit().remove();const E=A.selectAll(".curve").data(this.functions,(e=>e.name)),L=E.enter().append("path").classed("curve",!0).attr("clip-path","url(#clip-cpt-value)").merge(E);(this.firstUpdate||e.has("interactive"))&&(this.interactive?L.attr("tabindex",0).classed("interactive",!0).call(h).on("keydown",((e,t)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key)){let r=t.g;switch(e.key){case"ArrowUp":case"ArrowLeft":r+=e.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowRight":r-=e.shiftKey?.01:.05}r=r<0?0:r>1?1:r,r!==t.g&&(t.g=r,"default"===t.name&&(this.g=t.g),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:this.get(t.name),bubbles:!0}))),e.preventDefault()}})):L.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),L.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(cubicOut).attrTween("d",((e,t,r)=>{const n=r[t],i=interpolate$1(void 0!==n.g?n.g:e.g,e.g);return e=>{n.g=i(e);const t=range(u.range()[0],u.range()[1]+1,1).map((e=>({p:u.invert(e),w:CPTMath.pg2w(u.invert(e),n.g)})));return p(t)}})),E.exit().remove();const _=A.selectAll(".point").data(this.probabilities.filter((e=>null!=e.p)),(e=>e.name)),T=_.enter().append("g").classed("point",!0);T.append("circle").classed("circle",!0),T.append("text").classed("label",!0);const R=T.merge(_);R.select("text").text((e=>e.label)),R.filter((t=>(this.firstUpdate||e.has("interactive"))&&this.interactive&&!t.trial)).attr("tabindex",0).classed("interactive",!0).call(g).on("keydown",((e,t)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key)){let r=t.p;switch(e.key){case"ArrowUp":case"ArrowRight":r+=e.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowLeft":r-=e.shiftKey?.01:.05}r=r<0?0:r>1?1:r,r!==t.p&&(t.p=r,"default"===t.name&&(this.p=t.p),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:{name:t.name,p:t.p,w:t.w,label:t.label,g:this.getFunction(t.function).g},bubbles:!0}))),e.preventDefault()}})),R.filter((t=>(this.firstUpdate||e.has("interactive"))&&!this.interactive||t.trial)).attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null),R.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(cubicOut).attrTween("transform",((e,t,r)=>{const n=r[t],i=interpolate$1(void 0!==n.p?n.p:e.p,e.p),a=interpolate$1(void 0!==n.g?n.g:this.getFunction(e.function).g,this.getFunction(e.function).g);return e=>(n.p=i(e),n.g=a(e),`translate(\n            ${u(n.p)},\n            ${d(CPTMath.pg2w(n.p,n.g))}\n          )`)})),_.exit().remove(),this.drag=!1,this.firstUpdate=!1}}customElements.define("cpt-probability",CPTProbability);var isosurfaceExports={},isosurface$2={get exports(){return isosurfaceExports},set exports(e){isosurfaceExports=e}},attributesExports$2={},attributes$6={get exports(){return attributesExports$2},set exports(e){attributesExports$2=e}},attributesExports$1={},attributes$5={get exports(){return attributesExports$1},set exports(e){attributesExports$1=e}},Color=colorExports,colorScaleAttrs$2=attributes$G,axisHoverFormat$3=axis_format_attributes.axisHoverFormat,hovertemplateAttrs$3=template_attributes.hovertemplateAttrs,baseAttrs$3=attributes$M,extendFlat$3=extend.extendFlat,overrideAll$3=edit_types.overrideAll;function makeContourProjAttr(e){return{valType:"boolean",dflt:!1,description:["Determines whether or not these contour lines are projected","on the",e,"plane.","If `highlight` is set to *true* (the default), the projected","lines are shown on hover.","If `show` is set to *true*, the projected lines are shown","in permanence."].join(" ")}}function makeContourAttr(e){return{show:{valType:"boolean",dflt:!1,description:["Determines whether or not contour lines about the",e,"dimension are drawn."].join(" ")},start:{valType:"number",dflt:null,editType:"plot",description:["Sets the starting contour level value.","Must be less than `contours.end`"].join(" ")},end:{valType:"number",dflt:null,editType:"plot",description:["Sets the end contour level value.","Must be more than `contours.start`"].join(" ")},size:{valType:"number",dflt:null,min:0,editType:"plot",description:["Sets the step between each contour level.","Must be positive."].join(" ")},project:{x:makeContourProjAttr("x"),y:makeContourProjAttr("y"),z:makeContourProjAttr("z")},color:{valType:"color",dflt:Color.defaultLine,description:"Sets the color of the contour lines."},usecolormap:{valType:"boolean",dflt:!1,description:["An alternate to *color*.","Determines whether or not the contour lines are colored using","the trace *colorscale*."].join(" ")},width:{valType:"number",min:1,max:16,dflt:2,description:"Sets the width of the contour lines."},highlight:{valType:"boolean",dflt:!0,description:["Determines whether or not contour lines about the",e,"dimension are highlighted on hover."].join(" ")},highlightcolor:{valType:"color",dflt:Color.defaultLine,description:"Sets the color of the highlighted contour lines."},highlightwidth:{valType:"number",min:1,max:16,dflt:2,description:"Sets the width of the highlighted contour lines."}}}var attrs$2=attributes$5.exports=overrideAll$3(extendFlat$3({z:{valType:"data_array",description:"Sets the z coordinates."},x:{valType:"data_array",description:"Sets the x coordinates."},y:{valType:"data_array",description:"Sets the y coordinates."},text:{valType:"string",dflt:"",arrayOk:!0,description:["Sets the text elements associated with each z value.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:hovertemplateAttrs$3(),xhoverformat:axisHoverFormat$3("x"),yhoverformat:axisHoverFormat$3("y"),zhoverformat:axisHoverFormat$3("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in."].join(" ")},surfacecolor:{valType:"data_array",description:["Sets the surface color values,","used for setting a color scale independent of `z`."].join(" ")}},colorScaleAttrs$2("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:makeContourAttr("x"),y:makeContourAttr("y"),z:makeContourAttr("z")},hidesurface:{valType:"boolean",dflt:!1,description:["Determines whether or not a surface is drawn.","For example, set `hidesurface` to *false*","`contours.x.show` to *true* and","`contours.y.show` to *true* to draw a wire frame plot."].join(" ")},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10,description:"Numeric vector, representing the X coordinate for each vertex."},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4,description:"Numeric vector, representing the Y coordinate for each vertex."},z:{valType:"number",min:-1e5,max:1e5,dflt:0,description:"Numeric vector, representing the Z coordinate for each vertex."}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8,description:"Ambient light increases overall color visibility but can wash out the image."},diffuse:{valType:"number",min:0,max:1,dflt:.8,description:"Represents the extent that incident rays are reflected in a range of angles."},specular:{valType:"number",min:0,max:2,dflt:.05,description:"Represents the level that incident rays are reflected in a single direction, causing shine."},roughness:{valType:"number",min:0,max:1,dflt:.5,description:"Alters specular reflection; the rougher the surface, the wider and less contrasty the shine."},fresnel:{valType:"number",min:0,max:5,dflt:.2,description:["Represents the reflectance as a dependency of the viewing angle; e.g. paper is reflective","when viewing it from the edge of the paper (almost 90 degrees), causing shine."].join(" ")}},opacity:{valType:"number",min:0,max:1,dflt:1,description:["Sets the opacity of the surface.","Please note that in the case of using high `opacity` values for example a value","greater than or equal to 0.5 on two surfaces (and 0.25 with four surfaces), an","overlay of multiple transparent surfaces may not perfectly be sorted in depth by the","webgl API. This behavior may be improved in the near future and is subject to change."].join(" ")},opacityscale:{valType:"any",editType:"calc",description:["Sets the opacityscale.","The opacityscale must be an array containing","arrays mapping a normalized value to an opacity value.","At minimum, a mapping for the lowest (0) and highest (1)","values are required. For example,","`[[0, 1], [0.5, 0.2], [1, 1]]` means that higher/lower values would have","higher opacity values and those in the middle would be more transparent","Alternatively, `opacityscale` may be a palette name string","of the following list: 'min', 'max', 'extremes' and 'uniform'.","The default is 'uniform'."].join(" ")},_deprecated:{zauto:extendFlat$3({},colorScaleAttrs$2.zauto,{description:"Obsolete. Use `cauto` instead."}),zmin:extendFlat$3({},colorScaleAttrs$2.zmin,{description:"Obsolete. Use `cmin` instead."}),zmax:extendFlat$3({},colorScaleAttrs$2.zmax,{description:"Obsolete. Use `cmax` instead."})},hoverinfo:extendFlat$3({},baseAttrs$3.hoverinfo),showlegend:extendFlat$3({},baseAttrs$3.showlegend,{dflt:!1})}),"calc","nested");attrs$2.x.editType=attrs$2.y.editType=attrs$2.z.editType="calc+clearAxisTypes",attrs$2.transforms=void 0;var colorScaleAttrs$1=attributes$G,axisHoverFormat$2=axis_format_attributes.axisHoverFormat,hovertemplateAttrs$2=template_attributes.hovertemplateAttrs,surfaceAttrs=attributesExports$1,baseAttrs$2=attributes$M,extendFlat$2=extend.extendFlat,attributes$4=extendFlat$2({x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the X coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Y coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},z:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Z coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},i:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *first* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `i[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `i` represents a","point in space, which is the first vertex of a triangle."].join(" ")},j:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *second* vertex of a triangle. For example, `{i[m], j[m], k[m]}` ","together represent face m (triangle m) in the mesh, where `j[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `j` represents a","point in space, which is the second vertex of a triangle."].join(" ")},k:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *third* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `k[m] = n` points to the triplet ","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `k` represents a","point in space, which is the third vertex of a triangle."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets the text elements associated with the vertices.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:"Same as `text`."},hovertemplate:hovertemplateAttrs$2({editType:"calc"}),xhoverformat:axisHoverFormat$2("x"),yhoverformat:axisHoverFormat$2("y"),zhoverformat:axisHoverFormat$2("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc",description:["Sets the Delaunay axis, which is the axis that is perpendicular to the surface of the","Delaunay triangulation.","It has an effect if `i`, `j`, `k` are not provided and `alphahull` is set to indicate","Delaunay triangulation."].join(" ")},alphahull:{valType:"number",dflt:-1,editType:"calc",description:["Determines how the mesh surface triangles are derived from the set of","vertices (points) represented by the `x`, `y` and `z` arrays, if","the `i`, `j`, `k` arrays are not supplied.","For general use of `mesh3d` it is preferred that `i`, `j`, `k` are","supplied.","If *-1*, Delaunay triangulation is used, which is mainly suitable if the","mesh is a single, more or less layer surface that is perpendicular to `delaunayaxis`.","In case the `delaunayaxis` intersects the mesh surface at more than one point","it will result triangles that are very long in the dimension of `delaunayaxis`.","If *>0*, the alpha-shape algorithm is used. In this case, the positive `alphahull` value","signals the use of the alpha-shape algorithm, _and_ its value","acts as the parameter for the mesh fitting.","If *0*,  the convex-hull algorithm is used. It is suitable for convex bodies","or if the intention is to enclose the `x`, `y` and `z` point set into a convex","hull."].join(" ")},intensity:{valType:"data_array",editType:"calc",description:["Sets the intensity values for vertices or cells","as defined by `intensitymode`.","It can be used for plotting fields on meshes."].join(" ")},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc",description:["Determines the source of `intensity` values."].join(" ")},color:{valType:"color",editType:"calc",description:"Sets the color of the whole mesh"},vertexcolor:{valType:"data_array",editType:"calc",description:["Sets the color of each vertex","Overrides *color*. While Red, green and blue colors","are in the range of 0 and 255; in the case of having","vertex color data in RGBA format, the alpha color","should be normalized to be between 0 and 1."].join(" ")},facecolor:{valType:"data_array",editType:"calc",description:["Sets the color of each face","Overrides *color* and *vertexcolor*."].join(" ")},transforms:void 0},colorScaleAttrs$1("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:surfaceAttrs.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not normal smoothing is applied to the meshes,","creating meshes with an angular, low-poly look via flat reflections."].join(" ")},contour:{show:extendFlat$2({},surfaceAttrs.contours.x.show,{description:["Sets whether or not dynamic contours are shown on hover"].join(" ")}),color:surfaceAttrs.contours.x.color,width:surfaceAttrs.contours.x.width,editType:"calc"},lightposition:{x:extendFlat$2({},surfaceAttrs.lightposition.x,{dflt:1e5}),y:extendFlat$2({},surfaceAttrs.lightposition.y,{dflt:1e5}),z:extendFlat$2({},surfaceAttrs.lightposition.z,{dflt:0}),editType:"calc"},lighting:extendFlat$2({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc",description:"Epsilon for vertex normals calculation avoids math issues arising from degenerate geometry."},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc",description:"Epsilon for face normals calculation avoids math issues arising from degenerate geometry."},editType:"calc"},surfaceAttrs.lighting),hoverinfo:extendFlat$2({},baseAttrs$2.hoverinfo,{editType:"calc"}),showlegend:extendFlat$2({},baseAttrs$2.showlegend,{dflt:!1})}),colorScaleAttrs=attributes$G,axisHoverFormat$1=axis_format_attributes.axisHoverFormat,hovertemplateAttrs$1=template_attributes.hovertemplateAttrs,meshAttrs=attributes$4,baseAttrs$1=attributes$M,extendFlat$1=extend.extendFlat,overrideAll$2=edit_types.overrideAll;function makeSliceAttr(e){return{show:{valType:"boolean",dflt:!1,description:["Determines whether or not slice planes about the",e,"dimension are drawn."].join(" ")},locations:{valType:"data_array",dflt:[],description:["Specifies the location(s) of slices on the axis.","When not specified slices would be created for","all points of the axis",e,"except start and end."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `slices`. The default fill value of the","`slices` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")}}}function makeCapAttr(e){return{show:{valType:"boolean",dflt:!0,description:["Sets the fill ratio of the `slices`. The default fill value of the",e,"`slices` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `caps`. The default fill value of the","`caps` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")}}}var attrs$1=attributes$6.exports=overrideAll$2(extendFlat$1({x:{valType:"data_array",description:["Sets the X coordinates of the vertices on X axis."].join(" ")},y:{valType:"data_array",description:["Sets the Y coordinates of the vertices on Y axis."].join(" ")},z:{valType:"data_array",description:["Sets the Z coordinates of the vertices on Z axis."].join(" ")},value:{valType:"data_array",description:["Sets the 4th dimension (value) of the vertices."].join(" ")},isomin:{valType:"number",description:["Sets the minimum boundary for iso-surface plot."].join(" ")},isomax:{valType:"number",description:["Sets the maximum boundary for iso-surface plot."].join(" ")},surface:{show:{valType:"boolean",dflt:!0,description:["Hides/displays surfaces between minimum and maximum iso-values."].join(" ")},count:{valType:"integer",dflt:2,min:1,description:["Sets the number of iso-surfaces between minimum and maximum iso-values.","By default this value is 2 meaning that only minimum and maximum surfaces","would be drawn."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the iso-surface. The default fill value of the","surface is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all",description:["Sets the surface pattern of the iso-surface 3-D sections. The default pattern of","the surface is `all` meaning that the rest of surface elements would be shaded.","The check options (either 1 or 2) could be used to draw half of the squares","on the surface. Using various combinations of capital `A`, `B`, `C`, `D` and `E`","may also be used to reduce the number of triangles on the iso-surfaces and","creating other patterns of interest."].join(" ")}},spaceframe:{show:{valType:"boolean",dflt:!1,description:["Displays/hides tetrahedron shapes between minimum and","maximum iso-values. Often useful when either caps or","surfaces are disabled or filled with values less than 1."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:.15,description:["Sets the fill ratio of the `spaceframe` elements. The default fill value","is 0.15 meaning that only 15% of the area of every faces of tetras would be","shaded. Applying a greater `fill` ratio would allow the creation of stronger","elements or could be sued to have entirely closed areas (in case of using 1)."].join(" ")}},slices:{x:makeSliceAttr("x"),y:makeSliceAttr("y"),z:makeSliceAttr("z")},caps:{x:makeCapAttr("x"),y:makeCapAttr("y"),z:makeCapAttr("z")},text:{valType:"string",dflt:"",arrayOk:!0,description:["Sets the text elements associated with the vertices.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:hovertemplateAttrs$1(),xhoverformat:axisHoverFormat$1("x"),yhoverformat:axisHoverFormat$1("y"),zhoverformat:axisHoverFormat$1("z"),valuehoverformat:axisHoverFormat$1("value",1),showlegend:extendFlat$1({},baseAttrs$1.showlegend,{dflt:!1})},colorScaleAttrs("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:meshAttrs.opacity,lightposition:meshAttrs.lightposition,lighting:meshAttrs.lighting,flatshading:meshAttrs.flatshading,contour:meshAttrs.contour,hoverinfo:extendFlat$1({},baseAttrs$1.hoverinfo)}),"calc","nested");attrs$1.flatshading.dflt=!0,attrs$1.lighting.facenormalsepsilon.dflt=0,attrs$1.x.editType=attrs$1.y.editType=attrs$1.z.editType=attrs$1.value.editType="calc+clearAxisTypes",attrs$1.transforms=void 0;var Lib$5=libExports,Registry$3=registry,attributes$3=attributesExports$2,colorscaleDefaults=defaults$l;function supplyDefaults(e,t,r,n){supplyIsoDefaults(e,t,r,n,(function(r,n){return Lib$5.coerce(e,t,attributes$3,r,n)}))}function supplyIsoDefaults(e,t,r,n,i){var a=i("isomin"),o=i("isomax");null!=o&&null!=a&&a>o&&(t.isomin=null,t.isomax=null);var s=i("x"),l=i("y"),c=i("z"),u=i("value");s&&s.length&&l&&l.length&&c&&c.length&&u&&u.length?(Registry$3.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y","z"],n),i("valuehoverformat"),["x","y","z"].forEach((function(e){i(e+"hoverformat");var t="caps."+e;i(t+".show")&&i(t+".fill");var r="slices."+e;i(r+".show")&&(i(r+".fill"),i(r+".locations"))})),i("spaceframe.show")&&i("spaceframe.fill"),i("surface.show")&&(i("surface.count"),i("surface.fill"),i("surface.pattern")),i("contour.show")&&(i("contour.color"),i("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach((function(e){i(e)})),colorscaleDefaults(e,t,n,i,{prefix:"",cLetter:"c"}),t._length=null):t.visible=!1}var defaults$2={supplyDefaults:supplyDefaults,supplyIsoDefaults:supplyIsoDefaults},Lib$4=libExports,colorscaleCalc$1=calc$8;function calc$2(e,t){t._len=Math.min(t.u.length,t.v.length,t.w.length,t.x.length,t.y.length,t.z.length),t._u=filter$1(t.u,t._len),t._v=filter$1(t.v,t._len),t._w=filter$1(t.w,t._len),t._x=filter$1(t.x,t._len),t._y=filter$1(t.y,t._len),t._z=filter$1(t.z,t._len);var r=processGrid$1(t);t._gridFill=r.fill,t._Xs=r.Xs,t._Ys=r.Ys,t._Zs=r.Zs,t._len=r.len;var n,i,a,o=0;t.starts&&(n=filter$1(t.starts.x||[]),i=filter$1(t.starts.y||[]),a=filter$1(t.starts.z||[]),o=Math.min(n.length,i.length,a.length)),t._startsX=n||[],t._startsY=i||[],t._startsZ=a||[];var s,l=0,c=1/0;for(s=0;s<t._len;s++){var u=t._u[s],d=t._v[s],h=t._w[s],g=Math.sqrt(u*u+d*d+h*h);l=Math.max(l,g),c=Math.min(c,g)}for(colorscaleCalc$1(e,t,{vals:[c,l],containerStr:"",cLetter:"c"}),s=0;s<o;s++){var p=n[s];r.xMax=Math.max(r.xMax,p),r.xMin=Math.min(r.xMin,p);var f=i[s];r.yMax=Math.max(r.yMax,f),r.yMin=Math.min(r.yMin,f);var m=a[s];r.zMax=Math.max(r.zMax,m),r.zMin=Math.min(r.zMin,m)}t._slen=o,t._normMax=l,t._xbnds=[r.xMin,r.xMax],t._ybnds=[r.yMin,r.yMax],t._zbnds=[r.zMin,r.zMax]}function processGrid$1(e){var t,r,n,i,a,o,s,l,c,u,d,h,g=e._x,p=e._y,f=e._z,m=e._len,y=-1/0,b=1/0,v=-1/0,x=1/0,B=-1/0,I=1/0,F="";for(m&&(s=g[0],c=p[0],d=f[0]),m>1&&(l=g[m-1],u=p[m-1],h=f[m-1]),t=0;t<m;t++)y=Math.max(y,g[t]),b=Math.min(b,g[t]),v=Math.max(v,p[t]),x=Math.min(x,p[t]),B=Math.max(B,f[t]),I=Math.min(I,f[t]),i||g[t]===s||(i=!0,F+="x"),a||p[t]===c||(a=!0,F+="y"),o||f[t]===d||(o=!0,F+="z");i||(F+="x"),a||(F+="y"),o||(F+="z");var A=distinctVals(e._x),C=distinctVals(e._y),w=distinctVals(e._z);F=(F=(F=F.replace("x",(s>l?"-":"+")+"x")).replace("y",(c>u?"-":"+")+"y")).replace("z",(d>h?"-":"+")+"z");var Q=function(){m=0,A=[],C=[],w=[]};(!m||m<A.length*C.length*w.length)&&Q();var U=function(e){return"x"===e?g:"y"===e?p:f},S=function(e){return"x"===e?A:"y"===e?C:w},E=function(e){return e[m-1]<e[0]?-1:1},L=U(F[1]),_=U(F[3]),T=U(F[5]),R=S(F[1]).length,$=S(F[3]).length,k=S(F[5]).length,N=!1,G=function(e,t,r){return R*($*e+t)+r},M=E(U(F[1])),D=E(U(F[3])),V=E(U(F[5]));for(t=0;t<k-1;t++){for(r=0;r<$-1;r++){for(n=0;n<R-1;n++){var H=G(t,r,n),X=G(t,r,n+1),O=G(t,r+1,n),Z=G(t+1,r,n);if(L[H]*M<L[X]*M&&_[H]*D<_[O]*D&&T[H]*V<T[Z]*V||(N=!0),N)break}if(N)break}if(N)break}return N&&(Lib$4.warn("Encountered arbitrary coordinates! Unable to input data grid."),Q()),{xMin:b,yMin:x,zMin:I,xMax:y,yMax:v,zMax:B,Xs:A,Ys:C,Zs:w,len:m,fill:F}}function distinctVals(e){return Lib$4.distinctVals(e).vals}function filter$1(e,t){if(void 0===t&&(t=e.length),Lib$4.isTypedArray(e))return e.subarray(0,t);for(var r=[],n=0;n<t;n++)r[n]=+e[n];return r}var calc_1={calc:calc$2,filter:filter$1,processGrid:processGrid$1},colorscaleCalc=calc$8,processGrid=calc_1.processGrid,filter=calc_1.filter,calc$1=function(e,t){t._len=Math.min(t.x.length,t.y.length,t.z.length,t.value.length),t._x=filter(t.x,t._len),t._y=filter(t.y,t._len),t._z=filter(t.z,t._len),t._value=filter(t.value,t._len);var r=processGrid(t);t._gridFill=r.fill,t._Xs=r.Xs,t._Ys=r.Ys,t._Zs=r.Zs,t._len=r.len;for(var n=1/0,i=-1/0,a=0;a<t._len;a++){var o=t._value[a];n=Math.min(n,o),i=Math.max(i,o)}t._minValues=n,t._maxValues=i,t._vMin=void 0===t.isomin||null===t.isomin?n:t.isomin,t._vMax=void 0===t.isomax||null===t.isomin?i:t.isomax,colorscaleCalc(e,t,{vals:[t._vMin,t._vMax],containerStr:"",cLetter:"c"})},stackgl_modulesExports={},stackgl_modules={get exports(){return stackgl_modulesExports},set exports(e){stackgl_modulesExports=e}};!function(e,t){var r;self,r=function(){return function(){var e={7386:function(e,t,r){e.exports={alpha_shape:r(2350),convex_hull:r(5537),delaunay_triangulate:r(4419),gl_cone3d:r(1140),gl_error3d:r(3110),gl_heatmap2d:r(6386),gl_line3d:r(6086),gl_mesh3d:r(8116),gl_plot2d:r(2117),gl_plot3d:r(1059),gl_pointcloud2d:r(8271),gl_scatter3d:r(2182),gl_select_box:r(6623),gl_spikes2d:r(3050),gl_streamtube3d:r(7307),gl_surface3d:r(3754),ndarray:r(5050),ndarray_linear_interpolate:r(3581)}},2146:function(e,t,r){
/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <https://feross.org>
	 * @license  MIT
	 */function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}var d=r(3910),h=r(3187),g="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.lW=m,t.h2=50;var p=2147483647;function f(e){if(e>p)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,m.prototype),t}function m(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return v(e)}return y(e,t,r)}function y(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!m.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|F(e,t),n=f(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(ne(e,Uint8Array)){var t=new Uint8Array(e);return B(t.buffer,t.byteOffset,t.byteLength)}return x(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(e));if(ne(e,ArrayBuffer)||e&&ne(e.buffer,ArrayBuffer))return B(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(ne(e,SharedArrayBuffer)||e&&ne(e.buffer,SharedArrayBuffer)))return B(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return m.from(n,t,r);var i=function(e){if(m.isBuffer(e)){var t=0|I(e.length),r=f(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||ie(e.length)?f(0):x(e):"Buffer"===e.type&&Array.isArray(e.data)?x(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return m.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(e))}function b(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function v(e){return b(e),f(e<0?0:0|I(e))}function x(e){for(var t=e.length<0?0:0|I(e.length),r=f(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function B(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,m.prototype),n}function I(e){if(e>=p)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p.toString(16)+" bytes");return 0|e}function F(e,t){if(m.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ne(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+u(e));var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return ee(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return te(e).length;default:if(i)return n?-1:ee(e).length;t=(""+t).toLowerCase(),i=!0}}function A(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return G(this,t,r);case"utf8":case"utf-8":return R(this,t,r);case"ascii":return k(this,t,r);case"latin1":case"binary":return N(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function C(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function w(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),ie(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=m.from(t,n)),m.isBuffer(t))return 0===t.length?-1:Q(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):Q(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function Q(e,t,r,n,i){var a,o=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var u=-1;for(a=r;a<s;a++)if(c(e,a)===c(t,-1===u?0:a-u)){if(-1===u&&(u=a),a-u+1===l)return u*o}else-1!==u&&(a-=a-u),u=-1}else for(r+l>s&&(r=s-l),a=r;a>=0;a--){for(var d=!0,h=0;h<l;h++)if(c(e,a+h)!==c(t,h)){d=!1;break}if(d)return a}return-1}function U(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a,o=t.length;for(n>o/2&&(n=o/2),a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(ie(s))return a;e[r+a]=s}return a}function S(e,t,r,n){return re(ee(t,e.length-r),e,r,n)}function E(e,t,r,n){return re(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function L(e,t,r,n){return re(te(t),e,r,n)}function _(e,t,r,n){return re(function(e,t){for(var r,n,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,i=r%256,a.push(i),a.push(n);return a}(t,e.length-r),e,r,n)}function T(e,t,r){return 0===t&&r===e.length?d.fromByteArray(e):d.fromByteArray(e.slice(t,r))}function R(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a=e[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s<=r){var l=void 0,c=void 0,u=void 0,d=void 0;switch(s){case 1:a<128&&(o=a);break;case 2:128==(192&(l=e[i+1]))&&(d=(31&a)<<6|63&l)>127&&(o=d);break;case 3:l=e[i+1],c=e[i+2],128==(192&l)&&128==(192&c)&&(d=(15&a)<<12|(63&l)<<6|63&c)>2047&&(d<55296||d>57343)&&(o=d);break;case 4:l=e[i+1],c=e[i+2],u=e[i+3],128==(192&l)&&128==(192&c)&&128==(192&u)&&(d=(15&a)<<18|(63&l)<<12|(63&c)<<6|63&u)>65535&&d<1114112&&(o=d)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(e){var t=e.length;if(t<=$)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=$));return r}(n)}m.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),m.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(e,t,r){return y(e,t,r)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(e,t,r){return function(e,t,r){return b(e),e<=0?f(e):void 0!==t?"string"==typeof r?f(e).fill(t,r):f(e).fill(t):f(e)}(e,t,r)},m.allocUnsafe=function(e){return v(e)},m.allocUnsafeSlow=function(e){return v(e)},m.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==m.prototype},m.compare=function(e,t){if(ne(e,Uint8Array)&&(e=m.from(e,e.offset,e.byteLength)),ne(t,Uint8Array)&&(t=m.from(t,t.offset,t.byteLength)),!m.isBuffer(e)||!m.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},m.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return m.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=m.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(ne(a,Uint8Array))i+a.length>n.length?(m.isBuffer(a)||(a=m.from(a)),a.copy(n,i)):Uint8Array.prototype.set.call(n,a,i);else{if(!m.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i)}i+=a.length}return n},m.byteLength=F,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)C(this,t,t+1);return this},m.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)C(this,t,t+3),C(this,t+1,t+2);return this},m.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)C(this,t,t+7),C(this,t+1,t+6),C(this,t+2,t+5),C(this,t+3,t+4);return this},m.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?R(this,0,e):A.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(e){if(!m.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===m.compare(this,e)},m.prototype.inspect=function(){var e="",r=t.h2;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},g&&(m.prototype[g]=m.prototype.inspect),m.prototype.compare=function(e,t,r,n,i){if(ne(e,Uint8Array)&&(e=m.from(e,e.offset,e.byteLength)),!m.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+u(e));if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),s=Math.min(a,o),l=this.slice(n,i),c=e.slice(t,r),d=0;d<s;++d)if(l[d]!==c[d]){a=l[d],o=c[d];break}return a<o?-1:o<a?1:0},m.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},m.prototype.indexOf=function(e,t,r){return w(this,e,t,r,!0)},m.prototype.lastIndexOf=function(e,t,r){return w(this,e,t,r,!1)},m.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return U(this,e,t,r);case"utf8":case"utf-8":return S(this,e,t,r);case"ascii":case"latin1":case"binary":return E(this,e,t,r);case"base64":return L(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;function k(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function N(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function G(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;++a)i+=ae[e[a]];return i}function M(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length-1;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function D(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function V(e,t,r,n,i,a){if(!m.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function H(e,t,r,n,i){J(t,n,i,e,r,7);var a=Number(t&BigInt(4294967295));e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a;var o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function X(e,t,r,n,i){J(t,n,i,e,r,7);var a=Number(t&BigInt(4294967295));e[r+7]=a,a>>=8,e[r+6]=a,a>>=8,e[r+5]=a,a>>=8,e[r+4]=a;var o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function O(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Z(e,t,r,n,i){return t=+t,r>>>=0,i||O(e,0,r,4),h.write(e,t,r,n,23,4),r+4}function W(e,t,r,n,i){return t=+t,r>>>=0,i||O(e,0,r,8),h.write(e,t,r,n,52,8),r+8}m.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,m.prototype),n},m.prototype.readUintLE=m.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},m.prototype.readUintBE=m.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},m.prototype.readUint8=m.prototype.readUInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),this[e]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]|this[e+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]<<8|this[e+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},m.prototype.readBigUInt64LE=oe((function(e){j(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||K(e,this.length-8);var n=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),i=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+r*Math.pow(2,24);return BigInt(n)+(BigInt(i)<<BigInt(32))})),m.prototype.readBigUInt64BE=oe((function(e){j(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||K(e,this.length-8);var n=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],i=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),m.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},m.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},m.prototype.readInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},m.prototype.readInt16LE=function(e,t){e>>>=0,t||D(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},m.prototype.readInt16BE=function(e,t){e>>>=0,t||D(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},m.prototype.readInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},m.prototype.readInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},m.prototype.readBigInt64LE=oe((function(e){j(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||K(e,this.length-8);var n=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))})),m.prototype.readBigInt64BE=oe((function(e){j(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||K(e,this.length-8);var n=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+r)})),m.prototype.readFloatLE=function(e,t){return e>>>=0,t||D(e,4,this.length),h.read(this,e,!0,23,4)},m.prototype.readFloatBE=function(e,t){return e>>>=0,t||D(e,4,this.length),h.read(this,e,!1,23,4)},m.prototype.readDoubleLE=function(e,t){return e>>>=0,t||D(e,8,this.length),h.read(this,e,!0,52,8)},m.prototype.readDoubleBE=function(e,t){return e>>>=0,t||D(e,8,this.length),h.read(this,e,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||V(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||V(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+r},m.prototype.writeUint8=m.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||V(this,e,t,1,255,0),this[t]=255&e,t+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||V(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||V(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||V(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||V(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},m.prototype.writeBigUInt64LE=oe((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return H(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),m.prototype.writeBigUInt64BE=oe((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return X(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),m.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);V(this,e,t,r,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<r&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},m.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);V(this,e,t,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},m.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||V(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},m.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||V(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},m.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||V(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},m.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||V(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},m.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||V(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},m.prototype.writeBigInt64LE=oe((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return H(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),m.prototype.writeBigInt64BE=oe((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return X(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),m.prototype.writeFloatLE=function(e,t,r){return Z(this,e,t,!0,r)},m.prototype.writeFloatBE=function(e,t,r){return Z(this,e,t,!1,r)},m.prototype.writeDoubleLE=function(e,t,r){return W(this,e,t,!0,r)},m.prototype.writeDoubleBE=function(e,t,r){return W(this,e,t,!1,r)},m.prototype.copy=function(e,t,r,n){if(!m.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},m.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!m.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var i=e.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var o=m.isBuffer(e)?e:m.from(e,n),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<r-t;++a)this[a+t]=o[a%s]}return this};var Y={};function P(e,t,r){Y[e]=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(c,r);var s=o(c);function c(){var r;return n(this,c),r=s.call(this),Object.defineProperty(l(r),"message",{value:t.apply(l(r),arguments),writable:!0,configurable:!0}),r.name="".concat(r.name," [").concat(e,"]"),r.stack,delete r.name,r}return function(e,t,r){t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(c,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]),c}(r)}function z(e){for(var t="",r=e.length,n="-"===e[0]?1:0;r>=n+4;r-=3)t="_".concat(e.slice(r-3,r)).concat(t);return"".concat(e.slice(0,r)).concat(t)}function J(e,t,r,n,i,a){if(e>r||e<t){var o,s="bigint"==typeof t?"n":"";throw o=a>3?0===t||t===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(a+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(a+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(a+1)-1).concat(s):">= ".concat(t).concat(s," and <= ").concat(r).concat(s),new Y.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,r){j(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||K(t,e.length-(r+1))}(n,i,a)}function j(e,t){if("number"!=typeof e)throw new Y.ERR_INVALID_ARG_TYPE(t,"number",e)}function K(e,t,r){if(Math.floor(e)!==e)throw j(e,r),new Y.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new Y.ERR_BUFFER_OUT_OF_BOUNDS;throw new Y.ERR_OUT_OF_RANGE(r||"offset",">= ".concat(r?1:0," and <= ").concat(t),e)}P("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),P("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(u(t))}),TypeError),P("ERR_OUT_OF_RANGE",(function(e,t,r){var n='The value of "'.concat(e,'" is out of range.'),i=r;return Number.isInteger(r)&&Math.abs(r)>Math.pow(2,32)?i=z(String(r)):"bigint"==typeof r&&(i=String(r),(r>Math.pow(BigInt(2),BigInt(32))||r<-Math.pow(BigInt(2),BigInt(32)))&&(i=z(i)),i+="n"),n+=" It must be ".concat(t,". Received ").concat(i)}),RangeError);var q=/[^+/0-9A-Za-z-_]/g;function ee(e,t){var r;t=t||1/0;for(var n=e.length,i=null,a=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function te(e){return d.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function re(e,t,r,n){var i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function ne(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function ie(e){return e!=e}var ae=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}();function oe(e){return"undefined"==typeof BigInt?se:e}function se(){throw new Error("BigInt not supported")}},2321:function(e){e.exports=i,e.exports.isMobile=i,e.exports.default=i;var t=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,r=/CrOS/,n=/android|ipad|playbook|silk/i;function i(e){e||(e={});var i=e.ua;if(i||"undefined"==typeof navigator||(i=navigator.userAgent),i&&i.headers&&"string"==typeof i.headers["user-agent"]&&(i=i.headers["user-agent"]),"string"!=typeof i)return!1;var a=t.test(i)&&!r.test(i)||!!e.tablet&&n.test(i);return!a&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==i.indexOf("Macintosh")&&-1!==i.indexOf("Safari")&&(a=!0),a}},3910:function(e,t){t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,a=l(e),o=a[0],s=a[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,o,s)),u=0,d=s>0?o-4:o;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===s&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[u++]=255&t),1===s&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],o=16383,s=0,l=n-i;s<l;s+=o)a.push(c(e,s,s+o>l?l:s+o));return 1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),a.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,s=a.length;o<s;++o)r[o]=a[o],n[a.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var i,a,o=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},3187:function(e,t){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */t.read=function(e,t,r,n,i){var a,o,s=8*i-n-1,l=(1<<s)-1,c=l>>1,u=-7,d=r?i-1:0,h=r?-1:1,g=e[t+d];for(d+=h,a=g&(1<<-u)-1,g>>=-u,u+=s;u>0;a=256*a+e[t+d],d+=h,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=n;u>0;o=256*o+e[t+d],d+=h,u-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(g?-1:1);o+=Math.pow(2,n),a-=c}return(g?-1:1)*o*Math.pow(2,a-n)},t.write=function(e,t,r,n,i,a){var o,s,l,c=8*a-i-1,u=(1<<c)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:a-1,p=n?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(o++,l/=2),o+d>=u?(s=0,o=u):o+d>=1?(s=(t*l-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[r+g]=255&s,g+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[r+g]=255&o,g+=p,o/=256,c-=8);e[r+g-p]|=128*f}},1152:function(e,t,r){e.exports=function(e){var t=(e=e||{}).eye||[0,0,1],r=e.center||[0,0,0],s=e.up||[0,1,0],l=e.distanceLimits||[0,1/0],c=e.mode||"turntable",u=n(),d=i(),h=a();return u.setDistanceLimits(l[0],l[1]),u.lookAt(0,t,r,s),d.setDistanceLimits(l[0],l[1]),d.lookAt(0,t,r,s),h.setDistanceLimits(l[0],l[1]),h.lookAt(0,t,r,s),new o({turntable:u,orbit:d,matrix:h},c)};var n=r(3440),i=r(7774),a=r(9298);function o(e,t){this._controllerNames=Object.keys(e),this._controllerList=this._controllerNames.map((function(t){return e[t]})),this._mode=t,this._active=e[t],this._active||(this._mode="turntable",this._active=e.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var s=o.prototype;s.flush=function(e){for(var t=this._controllerList,r=0;r<t.length;++r)t[r].flush(e)},s.idle=function(e){for(var t=this._controllerList,r=0;r<t.length;++r)t[r].idle(e)},s.lookAt=function(e,t,r,n){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].lookAt(e,t,r,n)},s.rotate=function(e,t,r,n){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].rotate(e,t,r,n)},s.pan=function(e,t,r,n){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].pan(e,t,r,n)},s.translate=function(e,t,r,n){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].translate(e,t,r,n)},s.setMatrix=function(e,t){for(var r=this._controllerList,n=0;n<r.length;++n)r[n].setMatrix(e,t)},s.setDistanceLimits=function(e,t){for(var r=this._controllerList,n=0;n<r.length;++n)r[n].setDistanceLimits(e,t)},s.setDistance=function(e,t){for(var r=this._controllerList,n=0;n<r.length;++n)r[n].setDistance(e,t)},s.recalcMatrix=function(e){this._active.recalcMatrix(e)},s.getDistance=function(e){return this._active.getDistance(e)},s.getDistanceLimits=function(e){return this._active.getDistanceLimits(e)},s.lastT=function(){return this._active.lastT()},s.setMode=function(e){if(e!==this._mode){var t=this._controllerNames.indexOf(e);if(!(t<0)){var r=this._active,n=this._controllerList[t],i=Math.max(r.lastT(),n.lastT());r.recalcMatrix(i),n.setMatrix(i,r.computedMatrix),this._active=n,this._mode=e,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},s.getMode=function(){return this._mode}},8126:function(e,t,r){var n="undefined"==typeof WeakMap?r(5346):WeakMap,i=r(5827),a=r(2944),o=new n;e.exports=function(e){var t=o.get(e),r=t&&(t._triangleBuffer.handle||t._triangleBuffer.buffer);if(!r||!e.isBuffer(r)){var n=i(e,new Float32Array([-1,-1,-1,4,4,-1]));(t=a(e,[{buffer:n,type:e.FLOAT,size:2}]))._triangleBuffer=n,o.set(e,t)}t.bind(),e.drawArrays(e.TRIANGLES,0,3),t.unbind()}},8008:function(e,t,r){var n=r(4930);e.exports=function(e,t,r){t="number"==typeof t?t:1,r=r||": ";var i=e.split(/\r?\n/),a=String(i.length+t-1).length;return i.map((function(e,i){var o=i+t,s=String(o).length;return n(o,a-s)+r+e})).join("\n")}},2153:function(e,t,r){e.exports=function(e){var t=e.length;if(0===t)return[];if(1===t)return[0];for(var r=e[0].length,n=[e[0]],a=[0],o=1;o<t;++o)if(n.push(e[o]),i(n,r)){if(a.push(o),a.length===r+1)return a}else n.pop();return a};var n=r(417);function i(e,t){for(var r=new Array(t+1),i=0;i<e.length;++i)r[i]=e[i];for(i=0;i<=e.length;++i){for(var a=e.length;a<=t;++a){for(var o=new Array(t),s=0;s<t;++s)o[s]=Math.pow(a+1-i,s);r[a]=o}if(n.apply(void 0,r))return!0}return!1}},4653:function(e,t,r){e.exports=function(e,t){return n(t).filter((function(r){for(var n=new Array(r.length),a=0;a<r.length;++a)n[a]=t[r[a]];return i(n)*e<1}))};var n=r(4419),i=r(1778)},2350:function(e,t,r){e.exports=function(e,t){return i(n(e,t))};var n=r(4653),i=r(8691)},7896:function(e){e.exports=function(e){return atob(e)}},957:function(e,t,r){e.exports=function(e,t){for(var r=t.length,a=new Array(r+1),o=0;o<r;++o){for(var s=new Array(r+1),l=0;l<=r;++l)s[l]=e[l][o];a[o]=s}for(a[r]=new Array(r+1),o=0;o<=r;++o)a[r][o]=1;var c=new Array(r+1);for(o=0;o<r;++o)c[o]=t[o];c[r]=1;var u=n(a,c),d=i(u[r+1]);0===d&&(d=1);var h=new Array(r+1);for(o=0;o<=r;++o)h[o]=i(u[o])/d;return h};var n=r(6606);function i(e){for(var t=0,r=0;r<e.length;++r)t+=e[r];return t}},1539:function(e,t,r){var n=r(8524);e.exports=function(e,t){return n(e[0].mul(t[1]).add(t[0].mul(e[1])),e[1].mul(t[1]))}},8846:function(e){e.exports=function(e,t){return e[0].mul(t[1]).cmp(t[0].mul(e[1]))}},9189:function(e,t,r){var n=r(8524);e.exports=function(e,t){return n(e[0].mul(t[1]),e[1].mul(t[0]))}},5125:function(e,t,r){var n=r(234),i=r(3218),a=r(5514),o=r(2813),s=r(8524),l=r(9189);e.exports=function e(t,r){if(n(t))return r?l(t,e(r)):[t[0].clone(),t[1].clone()];var c,u,d=0;if(i(t))c=t.clone();else if("string"==typeof t)c=o(t);else{if(0===t)return[a(0),a(1)];if(t===Math.floor(t))c=a(t);else{for(;t!==Math.floor(t);)t*=Math.pow(2,256),d-=256;c=a(t)}}if(n(r))c.mul(r[1]),u=r[0].clone();else if(i(r))u=r.clone();else if("string"==typeof r)u=o(r);else if(r)if(r===Math.floor(r))u=a(r);else{for(;r!==Math.floor(r);)r*=Math.pow(2,256),d+=256;u=a(r)}else u=a(1);return d>0?c=c.ushln(d):d<0&&(u=u.ushln(-d)),s(c,u)}},234:function(e,t,r){var n=r(3218);e.exports=function(e){return Array.isArray(e)&&2===e.length&&n(e[0])&&n(e[1])}},4275:function(e,t,r){var n=r(1928);e.exports=function(e){return e.cmp(new n(0))}},9958:function(e,t,r){var n=r(4275);e.exports=function(e){var t=e.length,r=e.words,i=0;if(1===t)i=r[0];else if(2===t)i=r[0]+67108864*r[1];else for(var a=0;a<t;a++){var o=r[a];i+=o*Math.pow(67108864,a)}return n(e)*i}},1112:function(e,t,r){var n=r(8362),i=r(2288).countTrailingZeros;e.exports=function(e){var t=i(n.lo(e));if(t<32)return t;var r=i(n.hi(e));return r>20?52:r+32}},3218:function(e,t,r){r(1928),e.exports=function(e){return e&&"object"==typeof e&&Boolean(e.words)}},5514:function(e,t,r){var n=r(1928),i=r(8362);e.exports=function(e){var t=i.exponent(e);return t<52?new n(e):new n(e*Math.pow(2,52-t)).ushln(t-52)}},8524:function(e,t,r){var n=r(5514),i=r(4275);e.exports=function(e,t){var r=i(e),a=i(t);if(0===r)return[n(0),n(1)];if(0===a)return[n(0),n(0)];a<0&&(e=e.neg(),t=t.neg());var o=e.gcd(t);return o.cmpn(1)?[e.div(o),t.div(o)]:[e,t]}},2813:function(e,t,r){var n=r(1928);e.exports=function(e){return new n(e)}},3962:function(e,t,r){var n=r(8524);e.exports=function(e,t){return n(e[0].mul(t[0]),e[1].mul(t[1]))}},4951:function(e,t,r){var n=r(4275);e.exports=function(e){return n(e[0])*n(e[1])}},4354:function(e,t,r){var n=r(8524);e.exports=function(e,t){return n(e[0].mul(t[1]).sub(e[1].mul(t[0])),e[1].mul(t[1]))}},7999:function(e,t,r){var n=r(9958),i=r(1112);e.exports=function(e){var t=e[0],r=e[1];if(0===t.cmpn(0))return 0;var a=t.abs().divmod(r.abs()),o=a.div,s=n(o),l=a.mod,c=t.negative!==r.negative?-1:1;if(0===l.cmpn(0))return c*s;if(s){var u=i(s)+4,d=n(l.ushln(u).divRound(r));return c*(s+d*Math.pow(2,-u))}var h=r.bitLength()-l.bitLength()+53;return d=n(l.ushln(h).divRound(r)),h<1023?c*d*Math.pow(2,-h):(d*=Math.pow(2,-1023),c*d*Math.pow(2,1023-h))}},5070:function(e){function t(e,t,r,n,i){for(var a=i+1;n<=i;){var o=n+i>>>1,s=e[o];(void 0!==r?r(s,t):s-t)>=0?(a=o,i=o-1):n=o+1}return a}function r(e,t,r,n,i){for(var a=i+1;n<=i;){var o=n+i>>>1,s=e[o];(void 0!==r?r(s,t):s-t)>0?(a=o,i=o-1):n=o+1}return a}function n(e,t,r,n,i){for(var a=n-1;n<=i;){var o=n+i>>>1,s=e[o];(void 0!==r?r(s,t):s-t)<0?(a=o,n=o+1):i=o-1}return a}function i(e,t,r,n,i){for(var a=n-1;n<=i;){var o=n+i>>>1,s=e[o];(void 0!==r?r(s,t):s-t)<=0?(a=o,n=o+1):i=o-1}return a}function a(e,t,r,n,i){for(;n<=i;){var a=n+i>>>1,o=e[a],s=void 0!==r?r(o,t):o-t;if(0===s)return a;s<=0?n=a+1:i=a-1}return-1}function o(e,t,r,n,i,a){return"function"==typeof r?a(e,t,r,void 0===n?0:0|n,void 0===i?e.length-1:0|i):a(e,t,void 0,void 0===r?0:0|r,void 0===n?e.length-1:0|n)}e.exports={ge:function(e,r,n,i,a){return o(e,r,n,i,a,t)},gt:function(e,t,n,i,a){return o(e,t,n,i,a,r)},lt:function(e,t,r,i,a){return o(e,t,r,i,a,n)},le:function(e,t,r,n,a){return o(e,t,r,n,a,i)},eq:function(e,t,r,n,i){return o(e,t,r,n,i,a)}}},2288:function(e,t){function r(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,r;return t=(e>65535)<<4,t|=r=((e>>>=t)>255)<<3,t|=r=((e>>>=r)>15)<<2,(t|=r=((e>>>=r)>3)<<1)|(e>>>=r)>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=r,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var n=new Array(256);!function(e){for(var t=0;t<256;++t){var r=t,n=t,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;e[t]=n<<i&255}}(n),t.reverse=function(e){return n[255&e]<<24|n[e>>>8&255]<<16|n[e>>>16&255]<<8|n[e>>>24&255]},t.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},t.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},t.interleave3=function(e,t,r){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},t.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},1928:function(e,t,r){!function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function a(e,t,r){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(6601).Buffer}catch(e){}function s(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function l(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function c(e,t,r,n){for(var i=0,a=Math.min(e.length,r),o=t;o<a;o++){var s=e.charCodeAt(o)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}a.isBN=function(e){return e instanceof a||null!==e&&"object"==typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},a.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},a.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o,s=0;if("be"===r)for(i=e.length-1,a=0;i>=0;i-=3)o=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);else if("le"===r)for(i=0,a=0;i<e.length;i+=3)o=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);return this.strip()},a.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,a=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=l(e,t,n)<<a,this.words[o]|=67108863&i,a>=18?(a-=18,o+=1,this.words[o]|=i>>>26):a+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=l(e,t,n)<<a,this.words[o]|=67108863&i,a>=18?(a-=18,o+=1,this.words[o]|=i>>>26):a+=8;this.strip()},a.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var a=e.length-r,o=a%n,s=Math.min(a,a-o)+r,l=0,u=r;u<s;u+=n)l=c(e,u,u+n,t),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==o){var d=1;for(l=c(e,u,e.length,t),u=0;u<o;u++)d*=t;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},a.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function g(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],a=0|t.words[0],o=i*a,s=67108863&o,l=o/67108864|0;r.words[0]=s;for(var c=1;c<n;c++){for(var u=l>>>26,d=67108863&l,h=Math.min(c,t.length-1),g=Math.max(0,c-e.length+1);g<=h;g++){var p=c-g|0;u+=(o=(i=0|e.words[p])*(a=0|t.words[g])+d)/67108864|0,d=67108863&o}r.words[c]=0|d,l=0|u}return 0!==l?r.words[c]=0|l:r.length--,r.strip()}a.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,a=0,o=0;o<this.length;o++){var s=this.words[o],l=(16777215&(s<<i|a)).toString(16);r=0!=(a=s>>>24-i&16777215)||o!==this.length-1?u[6-l.length]+l+r:l+r,(i+=2)>=26&&(i-=26,o--)}for(0!==a&&(r=a.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=d[e],g=h[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var f=p.modn(g).toString(e);r=(p=p.idivn(g)).isZero()?f+r:u[c-f.length]+f+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(e,t){return n(void 0!==o),this.toArrayLike(o,e,t)},a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},a.prototype.toArrayLike=function(e,t,r){var i=this.byteLength(),a=r||Math.max(1,i);n(i<=a,"byte array longer than desired length"),n(a>0,"Requested array length <= 0"),this.strip();var o,s,l="le"===t,c=new e(a),u=this.clone();if(l){for(s=0;!u.isZero();s++)o=u.andln(255),u.iushrn(8),c[s]=o;for(;s<a;s++)c[s]=0}else{for(s=0;s<a-i;s++)c[s]=0;for(s=0;!u.isZero();s++)o=u.andln(255),u.iushrn(8),c[a-s-1]=o}return c},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},a.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},a.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},a.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},a.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,a=0;a<n.length;a++)t=(0|r.words[a])+(0|n.words[a])+i,this.words[a]=67108863&t,i=t>>>26;for(;0!==i&&a<r.length;a++)t=(0|r.words[a])+i,this.words[a]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var a=0,o=0;o<n.length;o++)a=(t=(0|r.words[o])-(0|n.words[o])+a)>>26,this.words[o]=67108863&t;for(;0!==a&&o<r.length;o++)a=(t=(0|r.words[o])+a)>>26,this.words[o]=67108863&t;if(0===a&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,r){var n,i,a,o=e.words,s=t.words,l=r.words,c=0,u=0|o[0],d=8191&u,h=u>>>13,g=0|o[1],p=8191&g,f=g>>>13,m=0|o[2],y=8191&m,b=m>>>13,v=0|o[3],x=8191&v,B=v>>>13,I=0|o[4],F=8191&I,A=I>>>13,C=0|o[5],w=8191&C,Q=C>>>13,U=0|o[6],S=8191&U,E=U>>>13,L=0|o[7],_=8191&L,T=L>>>13,R=0|o[8],$=8191&R,k=R>>>13,N=0|o[9],G=8191&N,M=N>>>13,D=0|s[0],V=8191&D,H=D>>>13,X=0|s[1],O=8191&X,Z=X>>>13,W=0|s[2],Y=8191&W,P=W>>>13,z=0|s[3],J=8191&z,j=z>>>13,K=0|s[4],q=8191&K,ee=K>>>13,te=0|s[5],re=8191&te,ne=te>>>13,ie=0|s[6],ae=8191&ie,oe=ie>>>13,se=0|s[7],le=8191&se,ce=se>>>13,ue=0|s[8],de=8191&ue,he=ue>>>13,ge=0|s[9],pe=8191&ge,fe=ge>>>13;r.negative=e.negative^t.negative,r.length=19;var me=(c+(n=Math.imul(d,V))|0)+((8191&(i=(i=Math.imul(d,H))+Math.imul(h,V)|0))<<13)|0;c=((a=Math.imul(h,H))+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(p,V),i=(i=Math.imul(p,H))+Math.imul(f,V)|0,a=Math.imul(f,H);var ye=(c+(n=n+Math.imul(d,O)|0)|0)+((8191&(i=(i=i+Math.imul(d,Z)|0)+Math.imul(h,O)|0))<<13)|0;c=((a=a+Math.imul(h,Z)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,V),i=(i=Math.imul(y,H))+Math.imul(b,V)|0,a=Math.imul(b,H),n=n+Math.imul(p,O)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(f,O)|0,a=a+Math.imul(f,Z)|0;var be=(c+(n=n+Math.imul(d,Y)|0)|0)+((8191&(i=(i=i+Math.imul(d,P)|0)+Math.imul(h,Y)|0))<<13)|0;c=((a=a+Math.imul(h,P)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(x,V),i=(i=Math.imul(x,H))+Math.imul(B,V)|0,a=Math.imul(B,H),n=n+Math.imul(y,O)|0,i=(i=i+Math.imul(y,Z)|0)+Math.imul(b,O)|0,a=a+Math.imul(b,Z)|0,n=n+Math.imul(p,Y)|0,i=(i=i+Math.imul(p,P)|0)+Math.imul(f,Y)|0,a=a+Math.imul(f,P)|0;var ve=(c+(n=n+Math.imul(d,J)|0)|0)+((8191&(i=(i=i+Math.imul(d,j)|0)+Math.imul(h,J)|0))<<13)|0;c=((a=a+Math.imul(h,j)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(F,V),i=(i=Math.imul(F,H))+Math.imul(A,V)|0,a=Math.imul(A,H),n=n+Math.imul(x,O)|0,i=(i=i+Math.imul(x,Z)|0)+Math.imul(B,O)|0,a=a+Math.imul(B,Z)|0,n=n+Math.imul(y,Y)|0,i=(i=i+Math.imul(y,P)|0)+Math.imul(b,Y)|0,a=a+Math.imul(b,P)|0,n=n+Math.imul(p,J)|0,i=(i=i+Math.imul(p,j)|0)+Math.imul(f,J)|0,a=a+Math.imul(f,j)|0;var xe=(c+(n=n+Math.imul(d,q)|0)|0)+((8191&(i=(i=i+Math.imul(d,ee)|0)+Math.imul(h,q)|0))<<13)|0;c=((a=a+Math.imul(h,ee)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(w,V),i=(i=Math.imul(w,H))+Math.imul(Q,V)|0,a=Math.imul(Q,H),n=n+Math.imul(F,O)|0,i=(i=i+Math.imul(F,Z)|0)+Math.imul(A,O)|0,a=a+Math.imul(A,Z)|0,n=n+Math.imul(x,Y)|0,i=(i=i+Math.imul(x,P)|0)+Math.imul(B,Y)|0,a=a+Math.imul(B,P)|0,n=n+Math.imul(y,J)|0,i=(i=i+Math.imul(y,j)|0)+Math.imul(b,J)|0,a=a+Math.imul(b,j)|0,n=n+Math.imul(p,q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(f,q)|0,a=a+Math.imul(f,ee)|0;var Be=(c+(n=n+Math.imul(d,re)|0)|0)+((8191&(i=(i=i+Math.imul(d,ne)|0)+Math.imul(h,re)|0))<<13)|0;c=((a=a+Math.imul(h,ne)|0)+(i>>>13)|0)+(Be>>>26)|0,Be&=67108863,n=Math.imul(S,V),i=(i=Math.imul(S,H))+Math.imul(E,V)|0,a=Math.imul(E,H),n=n+Math.imul(w,O)|0,i=(i=i+Math.imul(w,Z)|0)+Math.imul(Q,O)|0,a=a+Math.imul(Q,Z)|0,n=n+Math.imul(F,Y)|0,i=(i=i+Math.imul(F,P)|0)+Math.imul(A,Y)|0,a=a+Math.imul(A,P)|0,n=n+Math.imul(x,J)|0,i=(i=i+Math.imul(x,j)|0)+Math.imul(B,J)|0,a=a+Math.imul(B,j)|0,n=n+Math.imul(y,q)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(b,q)|0,a=a+Math.imul(b,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(f,re)|0,a=a+Math.imul(f,ne)|0;var Ie=(c+(n=n+Math.imul(d,ae)|0)|0)+((8191&(i=(i=i+Math.imul(d,oe)|0)+Math.imul(h,ae)|0))<<13)|0;c=((a=a+Math.imul(h,oe)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(_,V),i=(i=Math.imul(_,H))+Math.imul(T,V)|0,a=Math.imul(T,H),n=n+Math.imul(S,O)|0,i=(i=i+Math.imul(S,Z)|0)+Math.imul(E,O)|0,a=a+Math.imul(E,Z)|0,n=n+Math.imul(w,Y)|0,i=(i=i+Math.imul(w,P)|0)+Math.imul(Q,Y)|0,a=a+Math.imul(Q,P)|0,n=n+Math.imul(F,J)|0,i=(i=i+Math.imul(F,j)|0)+Math.imul(A,J)|0,a=a+Math.imul(A,j)|0,n=n+Math.imul(x,q)|0,i=(i=i+Math.imul(x,ee)|0)+Math.imul(B,q)|0,a=a+Math.imul(B,ee)|0,n=n+Math.imul(y,re)|0,i=(i=i+Math.imul(y,ne)|0)+Math.imul(b,re)|0,a=a+Math.imul(b,ne)|0,n=n+Math.imul(p,ae)|0,i=(i=i+Math.imul(p,oe)|0)+Math.imul(f,ae)|0,a=a+Math.imul(f,oe)|0;var Fe=(c+(n=n+Math.imul(d,le)|0)|0)+((8191&(i=(i=i+Math.imul(d,ce)|0)+Math.imul(h,le)|0))<<13)|0;c=((a=a+Math.imul(h,ce)|0)+(i>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,n=Math.imul($,V),i=(i=Math.imul($,H))+Math.imul(k,V)|0,a=Math.imul(k,H),n=n+Math.imul(_,O)|0,i=(i=i+Math.imul(_,Z)|0)+Math.imul(T,O)|0,a=a+Math.imul(T,Z)|0,n=n+Math.imul(S,Y)|0,i=(i=i+Math.imul(S,P)|0)+Math.imul(E,Y)|0,a=a+Math.imul(E,P)|0,n=n+Math.imul(w,J)|0,i=(i=i+Math.imul(w,j)|0)+Math.imul(Q,J)|0,a=a+Math.imul(Q,j)|0,n=n+Math.imul(F,q)|0,i=(i=i+Math.imul(F,ee)|0)+Math.imul(A,q)|0,a=a+Math.imul(A,ee)|0,n=n+Math.imul(x,re)|0,i=(i=i+Math.imul(x,ne)|0)+Math.imul(B,re)|0,a=a+Math.imul(B,ne)|0,n=n+Math.imul(y,ae)|0,i=(i=i+Math.imul(y,oe)|0)+Math.imul(b,ae)|0,a=a+Math.imul(b,oe)|0,n=n+Math.imul(p,le)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(f,le)|0,a=a+Math.imul(f,ce)|0;var Ae=(c+(n=n+Math.imul(d,de)|0)|0)+((8191&(i=(i=i+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;c=((a=a+Math.imul(h,he)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(G,V),i=(i=Math.imul(G,H))+Math.imul(M,V)|0,a=Math.imul(M,H),n=n+Math.imul($,O)|0,i=(i=i+Math.imul($,Z)|0)+Math.imul(k,O)|0,a=a+Math.imul(k,Z)|0,n=n+Math.imul(_,Y)|0,i=(i=i+Math.imul(_,P)|0)+Math.imul(T,Y)|0,a=a+Math.imul(T,P)|0,n=n+Math.imul(S,J)|0,i=(i=i+Math.imul(S,j)|0)+Math.imul(E,J)|0,a=a+Math.imul(E,j)|0,n=n+Math.imul(w,q)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(Q,q)|0,a=a+Math.imul(Q,ee)|0,n=n+Math.imul(F,re)|0,i=(i=i+Math.imul(F,ne)|0)+Math.imul(A,re)|0,a=a+Math.imul(A,ne)|0,n=n+Math.imul(x,ae)|0,i=(i=i+Math.imul(x,oe)|0)+Math.imul(B,ae)|0,a=a+Math.imul(B,oe)|0,n=n+Math.imul(y,le)|0,i=(i=i+Math.imul(y,ce)|0)+Math.imul(b,le)|0,a=a+Math.imul(b,ce)|0,n=n+Math.imul(p,de)|0,i=(i=i+Math.imul(p,he)|0)+Math.imul(f,de)|0,a=a+Math.imul(f,he)|0;var Ce=(c+(n=n+Math.imul(d,pe)|0)|0)+((8191&(i=(i=i+Math.imul(d,fe)|0)+Math.imul(h,pe)|0))<<13)|0;c=((a=a+Math.imul(h,fe)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(G,O),i=(i=Math.imul(G,Z))+Math.imul(M,O)|0,a=Math.imul(M,Z),n=n+Math.imul($,Y)|0,i=(i=i+Math.imul($,P)|0)+Math.imul(k,Y)|0,a=a+Math.imul(k,P)|0,n=n+Math.imul(_,J)|0,i=(i=i+Math.imul(_,j)|0)+Math.imul(T,J)|0,a=a+Math.imul(T,j)|0,n=n+Math.imul(S,q)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(E,q)|0,a=a+Math.imul(E,ee)|0,n=n+Math.imul(w,re)|0,i=(i=i+Math.imul(w,ne)|0)+Math.imul(Q,re)|0,a=a+Math.imul(Q,ne)|0,n=n+Math.imul(F,ae)|0,i=(i=i+Math.imul(F,oe)|0)+Math.imul(A,ae)|0,a=a+Math.imul(A,oe)|0,n=n+Math.imul(x,le)|0,i=(i=i+Math.imul(x,ce)|0)+Math.imul(B,le)|0,a=a+Math.imul(B,ce)|0,n=n+Math.imul(y,de)|0,i=(i=i+Math.imul(y,he)|0)+Math.imul(b,de)|0,a=a+Math.imul(b,he)|0;var we=(c+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,fe)|0)+Math.imul(f,pe)|0))<<13)|0;c=((a=a+Math.imul(f,fe)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(G,Y),i=(i=Math.imul(G,P))+Math.imul(M,Y)|0,a=Math.imul(M,P),n=n+Math.imul($,J)|0,i=(i=i+Math.imul($,j)|0)+Math.imul(k,J)|0,a=a+Math.imul(k,j)|0,n=n+Math.imul(_,q)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(T,q)|0,a=a+Math.imul(T,ee)|0,n=n+Math.imul(S,re)|0,i=(i=i+Math.imul(S,ne)|0)+Math.imul(E,re)|0,a=a+Math.imul(E,ne)|0,n=n+Math.imul(w,ae)|0,i=(i=i+Math.imul(w,oe)|0)+Math.imul(Q,ae)|0,a=a+Math.imul(Q,oe)|0,n=n+Math.imul(F,le)|0,i=(i=i+Math.imul(F,ce)|0)+Math.imul(A,le)|0,a=a+Math.imul(A,ce)|0,n=n+Math.imul(x,de)|0,i=(i=i+Math.imul(x,he)|0)+Math.imul(B,de)|0,a=a+Math.imul(B,he)|0;var Qe=(c+(n=n+Math.imul(y,pe)|0)|0)+((8191&(i=(i=i+Math.imul(y,fe)|0)+Math.imul(b,pe)|0))<<13)|0;c=((a=a+Math.imul(b,fe)|0)+(i>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,n=Math.imul(G,J),i=(i=Math.imul(G,j))+Math.imul(M,J)|0,a=Math.imul(M,j),n=n+Math.imul($,q)|0,i=(i=i+Math.imul($,ee)|0)+Math.imul(k,q)|0,a=a+Math.imul(k,ee)|0,n=n+Math.imul(_,re)|0,i=(i=i+Math.imul(_,ne)|0)+Math.imul(T,re)|0,a=a+Math.imul(T,ne)|0,n=n+Math.imul(S,ae)|0,i=(i=i+Math.imul(S,oe)|0)+Math.imul(E,ae)|0,a=a+Math.imul(E,oe)|0,n=n+Math.imul(w,le)|0,i=(i=i+Math.imul(w,ce)|0)+Math.imul(Q,le)|0,a=a+Math.imul(Q,ce)|0,n=n+Math.imul(F,de)|0,i=(i=i+Math.imul(F,he)|0)+Math.imul(A,de)|0,a=a+Math.imul(A,he)|0;var Ue=(c+(n=n+Math.imul(x,pe)|0)|0)+((8191&(i=(i=i+Math.imul(x,fe)|0)+Math.imul(B,pe)|0))<<13)|0;c=((a=a+Math.imul(B,fe)|0)+(i>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,n=Math.imul(G,q),i=(i=Math.imul(G,ee))+Math.imul(M,q)|0,a=Math.imul(M,ee),n=n+Math.imul($,re)|0,i=(i=i+Math.imul($,ne)|0)+Math.imul(k,re)|0,a=a+Math.imul(k,ne)|0,n=n+Math.imul(_,ae)|0,i=(i=i+Math.imul(_,oe)|0)+Math.imul(T,ae)|0,a=a+Math.imul(T,oe)|0,n=n+Math.imul(S,le)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(E,le)|0,a=a+Math.imul(E,ce)|0,n=n+Math.imul(w,de)|0,i=(i=i+Math.imul(w,he)|0)+Math.imul(Q,de)|0,a=a+Math.imul(Q,he)|0;var Se=(c+(n=n+Math.imul(F,pe)|0)|0)+((8191&(i=(i=i+Math.imul(F,fe)|0)+Math.imul(A,pe)|0))<<13)|0;c=((a=a+Math.imul(A,fe)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(G,re),i=(i=Math.imul(G,ne))+Math.imul(M,re)|0,a=Math.imul(M,ne),n=n+Math.imul($,ae)|0,i=(i=i+Math.imul($,oe)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,oe)|0,n=n+Math.imul(_,le)|0,i=(i=i+Math.imul(_,ce)|0)+Math.imul(T,le)|0,a=a+Math.imul(T,ce)|0,n=n+Math.imul(S,de)|0,i=(i=i+Math.imul(S,he)|0)+Math.imul(E,de)|0,a=a+Math.imul(E,he)|0;var Ee=(c+(n=n+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,fe)|0)+Math.imul(Q,pe)|0))<<13)|0;c=((a=a+Math.imul(Q,fe)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(G,ae),i=(i=Math.imul(G,oe))+Math.imul(M,ae)|0,a=Math.imul(M,oe),n=n+Math.imul($,le)|0,i=(i=i+Math.imul($,ce)|0)+Math.imul(k,le)|0,a=a+Math.imul(k,ce)|0,n=n+Math.imul(_,de)|0,i=(i=i+Math.imul(_,he)|0)+Math.imul(T,de)|0,a=a+Math.imul(T,he)|0;var Le=(c+(n=n+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,fe)|0)+Math.imul(E,pe)|0))<<13)|0;c=((a=a+Math.imul(E,fe)|0)+(i>>>13)|0)+(Le>>>26)|0,Le&=67108863,n=Math.imul(G,le),i=(i=Math.imul(G,ce))+Math.imul(M,le)|0,a=Math.imul(M,ce),n=n+Math.imul($,de)|0,i=(i=i+Math.imul($,he)|0)+Math.imul(k,de)|0,a=a+Math.imul(k,he)|0;var _e=(c+(n=n+Math.imul(_,pe)|0)|0)+((8191&(i=(i=i+Math.imul(_,fe)|0)+Math.imul(T,pe)|0))<<13)|0;c=((a=a+Math.imul(T,fe)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(G,de),i=(i=Math.imul(G,he))+Math.imul(M,de)|0,a=Math.imul(M,he);var Te=(c+(n=n+Math.imul($,pe)|0)|0)+((8191&(i=(i=i+Math.imul($,fe)|0)+Math.imul(k,pe)|0))<<13)|0;c=((a=a+Math.imul(k,fe)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863;var Re=(c+(n=Math.imul(G,pe))|0)+((8191&(i=(i=Math.imul(G,fe))+Math.imul(M,pe)|0))<<13)|0;return c=((a=Math.imul(M,fe))+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,l[0]=me,l[1]=ye,l[2]=be,l[3]=ve,l[4]=xe,l[5]=Be,l[6]=Ie,l[7]=Fe,l[8]=Ae,l[9]=Ce,l[10]=we,l[11]=Qe,l[12]=Ue,l[13]=Se,l[14]=Ee,l[15]=Le,l[16]=_e,l[17]=Te,l[18]=Re,0!==c&&(l[19]=c,r.length++),r};function f(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(p=g),a.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?p(this,e,t):n<63?g(this,e,t):n<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,a=0;a<r.length-1;a++){var o=i;i=0;for(var s=67108863&n,l=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=l;c++){var u=a-c,d=(0|e.words[u])*(0|t.words[c]),h=67108863&d;s=67108863&(h=h+s|0),i+=(o=(o=o+(d/67108864|0)|0)+(h>>>26)|0)>>>26,o&=67108863}r.words[a]=s,n=o,o=i}return 0!==n?r.words[a]=n:r.length--,r.strip()}(this,e,t):f(this,e,t),r},m.prototype.makeRBT=function(e){for(var t=new Array(e),r=a.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},m.prototype.permute=function(e,t,r,n,i,a){for(var o=0;o<a;o++)n[o]=t[e[o]],i[o]=r[e[o]]},m.prototype.transform=function(e,t,r,n,i,a){this.permute(a,e,t,r,n,i);for(var o=1;o<i;o<<=1)for(var s=o<<1,l=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),u=0;u<i;u+=s)for(var d=l,h=c,g=0;g<o;g++){var p=r[u+g],f=n[u+g],m=r[u+g+o],y=n[u+g+o],b=d*m-h*y;y=d*y+h*m,m=b,r[u+g]=p+m,n[u+g]=f+y,r[u+g+o]=p-m,n[u+g+o]=f-y,g!==s&&(b=l*d-c*h,h=l*h+c*d,d=b)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},m.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},m.prototype.convert13b=function(e,t,r,i){for(var a=0,o=0;o<t;o++)a+=0|e[o],r[2*o]=8191&a,a>>>=13,r[2*o+1]=8191&a,a>>>=13;for(o=2*t;o<i;++o)r[o]=0;n(0===a),n(0==(-8192&a))},m.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),a=this.stub(n),o=new Array(n),s=new Array(n),l=new Array(n),c=new Array(n),u=new Array(n),d=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,o,n),this.convert13b(t.words,t.length,c,n),this.transform(o,a,s,l,n,i),this.transform(c,a,u,d,n,i);for(var g=0;g<n;g++){var p=s[g]*u[g]-l[g]*d[g];l[g]=s[g]*d[g]+l[g]*u[g],s[g]=p}return this.conjugate(s,l,n),this.transform(s,l,h,a,n,i),this.conjugate(h,a,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),f(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){n("number"==typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var i=(0|this.words[r])*e,a=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=a>>>26,this.words[r]=67108863&a}return 0!==t&&(this.words[r]=t,this.length++),this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}(e);if(0===t.length)return new a(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},a.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,a=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var s=this.words[t]&a,l=(0|this.words[t])-s<<r;this.words[t]=l|o,o=s>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},a.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var a=e%26,o=Math.min((e-a)/26,this.length),s=67108863^67108863>>>a<<a,l=r;if(i-=o,i=Math.max(0,i),l){for(var c=0;c<o;c++)l.words[c]=this.words[c];l.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=i);c--){var d=0|this.words[c];this.words[c]=u<<26-a|d>>>a,u=d&s}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r||!(this.words[r]&i))},a.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,r){var i,a,o=e.length+r;this._expand(o);var s=0;for(i=0;i<e.length;i++){a=(0|this.words[i+r])+s;var l=(0|e.words[i])*t;s=((a-=67108863&l)>>26)-(l/67108864|0),this.words[i+r]=67108863&a}for(;i<this.length-r;i++)s=(a=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&a;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=67108863&a;return this.negative=1,this.strip()},a.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,o=0|i.words[i.length-1];0!=(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var s,l=n.length-i.length;if("mod"!==t){(s=new a(null)).length=l+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var u=n.clone()._ishlnsubmul(i,1,l);0===u.negative&&(n=u,s&&(s.words[l]=1));for(var d=l-1;d>=0;d--){var h=67108864*(0|n.words[i.length+d])+(0|n.words[i.length+d-1]);for(h=Math.min(h/o|0,67108863),n._ishlnsubmul(i,h,d);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,d),n.isZero()||(n.negative^=1);s&&(s.words[d]=h)}return s&&s.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},a.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(i=s.div.neg()),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:s.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,o,s},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),a=r.cmp(n);return a<0||1===i&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modn=function(e){n(e<=67108863);for(var t=(1<<26)%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return r},a.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new a(1),o=new a(0),s=new a(0),l=new a(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var u=r.clone(),d=t.clone();!t.isZero();){for(var h=0,g=1;0==(t.words[0]&g)&&h<26;++h,g<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(u),o.isub(d)),i.iushrn(1),o.iushrn(1);for(var p=0,f=1;0==(r.words[0]&f)&&p<26;++p,f<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(u),l.isub(d)),s.iushrn(1),l.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(s),o.isub(l)):(r.isub(t),s.isub(i),l.isub(o))}return{a:s,b:l,gcd:r.iushln(c)}},a.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,o=new a(1),s=new a(0),l=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,u=1;0==(t.words[0]&u)&&c<26;++c,u<<=1);if(c>0)for(t.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);for(var d=0,h=1;0==(r.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(r.iushrn(d);d-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(s)):(r.isub(t),s.isub(o))}return(i=0===t.cmpn(1)?o:s).cmpn(0)<0&&i.iadd(e),i},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var a=t;t=r,r=a}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var a=i,o=r;0!==a&&o<this.length;o++){var s=0|this.words[o];a=(s+=a)>>>26,s&=67108863,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new F(e)},a.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function B(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function I(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function F(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function A(e){F.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new a(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},i(v,b),v.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&r,i=10;i<e.length;i++){var o=0|e.words[i];e.words[i-10]=(o&r)<<4|a>>>22,a=o}a>>>=22,e.words[i-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},v.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(x,b),i(B,b),i(I,b),I.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new v;else if("p224"===e)t=new x;else if("p192"===e)t=new B;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new I}return y[e]=t,t},F.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},F.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},F.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},F.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},F.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},F.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},F.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},F.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},F.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},F.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},F.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},F.prototype.isqr=function(e){return this.imul(e,e.clone())},F.prototype.sqr=function(e){return this.mul(e,e)},F.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new a(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);n(!i.isZero());var s=new a(1).toRed(this),l=s.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new a(2*u*u).toRed(this);0!==this.pow(u,c).cmp(l);)u.redIAdd(l);for(var d=this.pow(u,i),h=this.pow(e,i.addn(1).iushrn(1)),g=this.pow(e,i),p=o;0!==g.cmp(s);){for(var f=g,m=0;0!==f.cmp(s);m++)f=f.redSqr();n(m<p);var y=this.pow(d,new a(1).iushln(p-m-1));h=h.redMul(y),d=y.redSqr(),g=g.redMul(d),p=m}return h},F.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},F.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new a(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],o=0,s=0,l=t.bitLength()%26;for(0===l&&(l=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],u=l-1;u>=0;u--){var d=c>>u&1;i!==r[0]&&(i=this.sqr(i)),0!==d||0!==o?(o<<=1,o|=d,(4==++s||0===n&&0===u)&&(i=this.mul(i,r[o]),s=0,o=0)):s=0}l=26}return i},F.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},F.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new A(e)},i(A,F),A.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},A.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},A.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},A.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},A.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=r.nmd(e),this)},2692:function(e){e.exports=function(e){var t,r,n,i=e.length,a=0;for(t=0;t<i;++t)a+=e[t].length;var o=new Array(a),s=0;for(t=0;t<i;++t){var l=e[t],c=l.length;for(r=0;r<c;++r){var u=o[s++]=new Array(c-1),d=0;for(n=0;n<c;++n)n!==r&&(u[d++]=l[n]);if(1&r){var h=u[1];u[1]=u[0],u[0]=h}}}return o}},2569:function(e,t,r){e.exports=function(e,t,r){switch(arguments.length){case 1:return d(e);case 2:return"function"==typeof t?c(e,e,t,!0):h(e,t);case 3:return c(e,t,r,!1);default:throw new Error("box-intersect: Invalid arguments")}};var n,i=r(5306),a=r(1390),o=r(2337);function s(e,t){for(var r=0;r<e;++r)if(!(t[r]<=t[r+e]))return!0;return!1}function l(e,t,r,n){for(var i=0,a=0,o=0,l=e.length;o<l;++o){var c=e[o];if(!s(t,c)){for(var u=0;u<2*t;++u)r[i++]=c[u];n[a++]=o}}return a}function c(e,t,r,n){var s=e.length,c=t.length;if(!(s<=0||c<=0)){var u=e[0].length>>>1;if(!(u<=0)){var d,h=i.mallocDouble(2*u*s),g=i.mallocInt32(s);if((s=l(e,u,h,g))>0){if(1===u&&n)a.init(s),d=a.sweepComplete(u,r,0,s,h,g,0,s,h,g);else{var p=i.mallocDouble(2*u*c),f=i.mallocInt32(c);(c=l(t,u,p,f))>0&&(a.init(s+c),d=1===u?a.sweepBipartite(u,r,0,s,h,g,0,c,p,f):o(u,r,n,s,h,g,c,p,f),i.free(p),i.free(f))}i.free(h),i.free(g)}return d}}}function u(e,t){n.push([e,t])}function d(e){return n=[],c(e,e,u,!0),n}function h(e,t){return n=[],c(e,t,u,!1),n}},7333:function(e,t){function r(e){return e?function(e,t,r,n,i,a,o,s,l,c,u){return i-n>l-s?function(e,t,r,n,i,a,o,s,l,c,u){for(var d=2*e,h=n,g=d*n;h<i;++h,g+=d){var p=a[t+g],f=a[t+g+e],m=o[h];e:for(var y=s,b=d*s;y<l;++y,b+=d){var v=c[t+b],x=c[t+b+e],B=u[y];if(!(x<p||f<v)){for(var I=t+1;I<e;++I){var F=a[I+g],A=a[I+e+g],C=c[I+b],w=c[I+e+b];if(A<C||w<F)continue e}var Q=r(m,B);if(void 0!==Q)return Q}}}}(e,t,r,n,i,a,o,s,l,c,u):function(e,t,r,n,i,a,o,s,l,c,u){for(var d=2*e,h=s,g=d*s;h<l;++h,g+=d){var p=c[t+g],f=c[t+g+e],m=u[h];e:for(var y=n,b=d*n;y<i;++y,b+=d){var v=a[t+b],x=a[t+b+e],B=o[y];if(!(f<v||x<p)){for(var I=t+1;I<e;++I){var F=a[I+b],A=a[I+e+b],C=c[I+g],w=c[I+e+g];if(A<C||w<F)continue e}var Q=r(B,m);if(void 0!==Q)return Q}}}}(e,t,r,n,i,a,o,s,l,c,u)}:function(e,t,r,n,i,a,o,s,l,c,u,d){return a-i>c-l?n?function(e,t,r,n,i,a,o,s,l,c,u){for(var d=2*e,h=n,g=d*n;h<i;++h,g+=d){var p=a[t+g],f=a[t+g+e],m=o[h];e:for(var y=s,b=d*s;y<l;++y,b+=d){var v=c[t+b],x=u[y];if(!(v<=p||f<v)){for(var B=t+1;B<e;++B){var I=a[B+g],F=a[B+e+g],A=c[B+b],C=c[B+e+b];if(F<A||C<I)continue e}var w=r(x,m);if(void 0!==w)return w}}}}(e,t,r,i,a,o,s,l,c,u,d):function(e,t,r,n,i,a,o,s,l,c,u){for(var d=2*e,h=n,g=d*n;h<i;++h,g+=d){var p=a[t+g],f=a[t+g+e],m=o[h];e:for(var y=s,b=d*s;y<l;++y,b+=d){var v=c[t+b],x=u[y];if(!(v<p||f<v)){for(var B=t+1;B<e;++B){var I=a[B+g],F=a[B+e+g],A=c[B+b],C=c[B+e+b];if(F<A||C<I)continue e}var w=r(m,x);if(void 0!==w)return w}}}}(e,t,r,i,a,o,s,l,c,u,d):n?function(e,t,r,n,i,a,o,s,l,c,u){for(var d=2*e,h=s,g=d*s;h<l;++h,g+=d){var p=c[t+g],f=u[h];e:for(var m=n,y=d*n;m<i;++m,y+=d){var b=a[t+y],v=a[t+y+e],x=o[m];if(!(p<=b||v<p)){for(var B=t+1;B<e;++B){var I=a[B+y],F=a[B+e+y],A=c[B+g],C=c[B+e+g];if(F<A||C<I)continue e}var w=r(f,x);if(void 0!==w)return w}}}}(e,t,r,i,a,o,s,l,c,u,d):function(e,t,r,n,i,a,o,s,l,c,u){for(var d=2*e,h=s,g=d*s;h<l;++h,g+=d){var p=c[t+g],f=u[h];e:for(var m=n,y=d*n;m<i;++m,y+=d){var b=a[t+y],v=a[t+y+e],x=o[m];if(!(p<b||v<p)){for(var B=t+1;B<e;++B){var I=a[B+y],F=a[B+e+y],A=c[B+g],C=c[B+e+g];if(F<A||C<I)continue e}var w=r(x,f);if(void 0!==w)return w}}}}(e,t,r,i,a,o,s,l,c,u,d)}}t.partial=r(!1),t.full=r(!0)},2337:function(e,t,r){e.exports=function(e,t,r,a,u,I,F,A,C){!function(e,t){var r=8*i.log2(t+1)*(e+1)|0,a=i.nextPow2(6*r);y.length<a&&(n.free(y),y=n.mallocInt32(a));var o=i.nextPow2(2*r);b.length<o&&(n.free(b),b=n.mallocDouble(o))}(e,a+F);var w,Q=0,U=2*e;for(v(Q++,0,0,a,0,F,r?16:0,-1/0,1/0),r||v(Q++,0,0,F,0,a,1,-1/0,1/0);Q>0;){var S=6*(Q-=1),E=y[S],L=y[S+1],_=y[S+2],T=y[S+3],R=y[S+4],$=y[S+5],k=2*Q,N=b[k],G=b[k+1],M=1&$,D=!!(16&$),V=u,H=I,X=A,O=C;if(M&&(V=A,H=C,X=u,O=I),!(2&$&&(_=g(e,E,L,_,V,H,G),L>=_)||4&$&&(L=p(e,E,L,_,V,H,N))>=_)){var Z=_-L,W=R-T;if(D){if(e*Z*(Z+W)<4194304){if(void 0!==(w=l.scanComplete(e,E,t,L,_,V,H,T,R,X,O)))return w;continue}}else{if(e*Math.min(Z,W)<128){if(void 0!==(w=o(e,E,t,M,L,_,V,H,T,R,X,O)))return w;continue}if(e*Z*W<4194304){if(void 0!==(w=l.scanBipartite(e,E,t,M,L,_,V,H,T,R,X,O)))return w;continue}}var Y=d(e,E,L,_,V,H,N,G);if(L<Y)if(e*(Y-L)<128){if(void 0!==(w=s(e,E+1,t,L,Y,V,H,T,R,X,O)))return w}else if(E===e-2){if(void 0!==(w=M?l.sweepBipartite(e,t,T,R,X,O,L,Y,V,H):l.sweepBipartite(e,t,L,Y,V,H,T,R,X,O)))return w}else v(Q++,E+1,L,Y,T,R,M,-1/0,1/0),v(Q++,E+1,T,R,L,Y,1^M,-1/0,1/0);if(Y<_){var P=c(e,E,T,R,X,O),z=X[U*P+E],J=h(e,E,P,R,X,O,z);if(J<R&&v(Q++,E,Y,_,J,R,(4|M)+(D?16:0),z,G),T<P&&v(Q++,E,Y,_,T,P,(2|M)+(D?16:0),N,z),P+1===J){if(void 0!==(w=D?B(e,E,t,Y,_,V,H,P,X,O[P]):x(e,E,t,M,Y,_,V,H,P,X,O[P])))return w}else if(P<J){var j;if(D){if(j=f(e,E,Y,_,V,H,z),Y<j){var K=h(e,E,Y,j,V,H,z);if(E===e-2){if(Y<K&&void 0!==(w=l.sweepComplete(e,t,Y,K,V,H,P,J,X,O)))return w;if(K<j&&void 0!==(w=l.sweepBipartite(e,t,K,j,V,H,P,J,X,O)))return w}else Y<K&&v(Q++,E+1,Y,K,P,J,16,-1/0,1/0),K<j&&(v(Q++,E+1,K,j,P,J,0,-1/0,1/0),v(Q++,E+1,P,J,K,j,1,-1/0,1/0))}}else j=M?m(e,E,Y,_,V,H,z):f(e,E,Y,_,V,H,z),Y<j&&(E===e-2?w=M?l.sweepBipartite(e,t,P,J,X,O,Y,j,V,H):l.sweepBipartite(e,t,Y,j,V,H,P,J,X,O):(v(Q++,E+1,Y,j,P,J,M,-1/0,1/0),v(Q++,E+1,P,J,Y,j,1^M,-1/0,1/0)))}}}}};var n=r(5306),i=r(2288),a=r(7333),o=a.partial,s=a.full,l=r(1390),c=r(2464),u=r(122),d=u("!(lo>=p0)&&!(p1>=hi)"),h=u("lo===p0"),g=u("lo<p0"),p=u("hi<=p0"),f=u("lo<=p0&&p0<=hi"),m=u("lo<p0&&p0<=hi"),y=n.mallocInt32(1024),b=n.mallocDouble(1024);function v(e,t,r,n,i,a,o,s,l){var c=6*e;y[c]=t,y[c+1]=r,y[c+2]=n,y[c+3]=i,y[c+4]=a,y[c+5]=o;var u=2*e;b[u]=s,b[u+1]=l}function x(e,t,r,n,i,a,o,s,l,c,u){var d=2*e,h=l*d,g=c[h+t];e:for(var p=i,f=i*d;p<a;++p,f+=d){var m=o[f+t],y=o[f+t+e];if(!(g<m||y<g||n&&g===m)){for(var b,v=s[p],x=t+1;x<e;++x){m=o[f+x],y=o[f+x+e];var B=c[h+x],I=c[h+x+e];if(y<B||I<m)continue e}if(void 0!==(b=n?r(u,v):r(v,u)))return b}}}function B(e,t,r,n,i,a,o,s,l,c){var u=2*e,d=s*u,h=l[d+t];e:for(var g=n,p=n*u;g<i;++g,p+=u){var f=o[g];if(f!==c){var m=a[p+t],y=a[p+t+e];if(!(h<m||y<h)){for(var b=t+1;b<e;++b){m=a[p+b],y=a[p+b+e];var v=l[d+b],x=l[d+b+e];if(y<v||x<m)continue e}var B=r(f,c);if(void 0!==B)return B}}}}},2464:function(e,t,r){e.exports=function(e,t,r,a,o,s){if(a<=r+1)return r;for(var l=r,c=a,u=a+r>>>1,d=2*e,h=u,g=o[d*u+t];l<c;){if(c-l<8){i(e,t,l,c,o,s),g=o[d*u+t];break}var p=c-l,f=Math.random()*p+l|0,m=o[d*f+t],y=Math.random()*p+l|0,b=o[d*y+t],v=Math.random()*p+l|0,x=o[d*v+t];m<=b?x>=b?(h=y,g=b):m>=x?(h=f,g=m):(h=v,g=x):b>=x?(h=y,g=b):x>=m?(h=f,g=m):(h=v,g=x);for(var B=d*(c-1),I=d*h,F=0;F<d;++F,++B,++I){var A=o[B];o[B]=o[I],o[I]=A}var C=s[c-1];for(s[c-1]=s[h],s[h]=C,h=n(e,t,l,c-1,o,s,g),B=d*(c-1),I=d*h,F=0;F<d;++F,++B,++I)A=o[B],o[B]=o[I],o[I]=A;if(C=s[c-1],s[c-1]=s[h],s[h]=C,u<h){for(c=h-1;l<c&&o[d*(c-1)+t]===g;)c-=1;c+=1}else{if(!(h<u))break;for(l=h+1;l<c&&o[d*l+t]===g;)l+=1}}return n(e,t,r,u,o,s,o[d*u+t])};var n=r(122)("lo<p0");function i(e,t,r,n,i,a){for(var o=2*e,s=o*(r+1)+t,l=r+1;l<n;++l,s+=o)for(var c=i[s],u=l,d=o*(l-1);u>r&&i[d+t]>c;--u,d-=o){for(var h=d,g=d+o,p=0;p<o;++p,++h,++g){var f=i[h];i[h]=i[g],i[g]=f}var m=a[u];a[u]=a[u-1],a[u-1]=m}}},122:function(e){e.exports=function(e){return t[e]};var t={"lo===p0":function(e,t,r,n,i,a,o){for(var s=2*e,l=s*r,c=l,u=r,d=t,h=r;n>h;++h,l+=s)if(i[l+d]===o)if(u===h)u+=1,c+=s;else{for(var g=0;s>g;++g){var p=i[l+g];i[l+g]=i[c],i[c++]=p}var f=a[h];a[h]=a[u],a[u++]=f}return u},"lo<p0":function(e,t,r,n,i,a,o){for(var s=2*e,l=s*r,c=l,u=r,d=t,h=r;n>h;++h,l+=s)if(i[l+d]<o)if(u===h)u+=1,c+=s;else{for(var g=0;s>g;++g){var p=i[l+g];i[l+g]=i[c],i[c++]=p}var f=a[h];a[h]=a[u],a[u++]=f}return u},"lo<=p0":function(e,t,r,n,i,a,o){for(var s=2*e,l=s*r,c=l,u=r,d=e+t,h=r;n>h;++h,l+=s)if(i[l+d]<=o)if(u===h)u+=1,c+=s;else{for(var g=0;s>g;++g){var p=i[l+g];i[l+g]=i[c],i[c++]=p}var f=a[h];a[h]=a[u],a[u++]=f}return u},"hi<=p0":function(e,t,r,n,i,a,o){for(var s=2*e,l=s*r,c=l,u=r,d=e+t,h=r;n>h;++h,l+=s)if(i[l+d]<=o)if(u===h)u+=1,c+=s;else{for(var g=0;s>g;++g){var p=i[l+g];i[l+g]=i[c],i[c++]=p}var f=a[h];a[h]=a[u],a[u++]=f}return u},"lo<p0&&p0<=hi":function(e,t,r,n,i,a,o){for(var s=2*e,l=s*r,c=l,u=r,d=t,h=e+t,g=r;n>g;++g,l+=s){var p=i[l+d],f=i[l+h];if(p<o&&o<=f)if(u===g)u+=1,c+=s;else{for(var m=0;s>m;++m){var y=i[l+m];i[l+m]=i[c],i[c++]=y}var b=a[g];a[g]=a[u],a[u++]=b}}return u},"lo<=p0&&p0<=hi":function(e,t,r,n,i,a,o){for(var s=2*e,l=s*r,c=l,u=r,d=t,h=e+t,g=r;n>g;++g,l+=s){var p=i[l+d],f=i[l+h];if(p<=o&&o<=f)if(u===g)u+=1,c+=s;else{for(var m=0;s>m;++m){var y=i[l+m];i[l+m]=i[c],i[c++]=y}var b=a[g];a[g]=a[u],a[u++]=b}}return u},"!(lo>=p0)&&!(p1>=hi)":function(e,t,r,n,i,a,o,s){for(var l=2*e,c=l*r,u=c,d=r,h=t,g=e+t,p=r;n>p;++p,c+=l){var f=i[c+h],m=i[c+g];if(!(f>=o||s>=m))if(d===p)d+=1,u+=l;else{for(var y=0;l>y;++y){var b=i[c+y];i[c+y]=i[u],i[u++]=b}var v=a[p];a[p]=a[d],a[d++]=v}}return d}}},309:function(e){function t(e,t,r){for(var n=2*(e+1),i=e+1;i<=t;++i){for(var a=r[n++],o=r[n++],s=i,l=n-2;s-- >e;){var c=r[l-2],u=r[l-1];if(c<a)break;if(c===a&&u<o)break;r[l]=c,r[l+1]=u,l-=2}r[l]=a,r[l+1]=o}}function r(e,t,r){t*=2;var n=r[e*=2],i=r[e+1];r[e]=r[t],r[e+1]=r[t+1],r[t]=n,r[t+1]=i}function n(e,t,r){t*=2,r[e*=2]=r[t],r[e+1]=r[t+1]}function i(e,t,r,n){t*=2,r*=2;var i=n[e*=2],a=n[e+1];n[e]=n[t],n[e+1]=n[t+1],n[t]=n[r],n[t+1]=n[r+1],n[r]=i,n[r+1]=a}function a(e,t,r,n,i){t*=2,i[e*=2]=i[t],i[t]=r,i[e+1]=i[t+1],i[t+1]=n}function o(e,t,r){t*=2;var n=r[e*=2],i=r[t];return!(n<i)&&(n!==i||r[e+1]>r[t+1])}function s(e,t,r,n){var i=n[e*=2];return i<t||i===t&&n[e+1]<r}function l(e,c,u){var d=(c-e+1)/6|0,h=e+d,g=c-d,p=e+c>>1,f=p-d,m=p+d,y=h,b=f,v=p,x=m,B=g,I=e+1,F=c-1,A=0;o(y,b,u)&&(A=y,y=b,b=A),o(x,B,u)&&(A=x,x=B,B=A),o(y,v,u)&&(A=y,y=v,v=A),o(b,v,u)&&(A=b,b=v,v=A),o(y,x,u)&&(A=y,y=x,x=A),o(v,x,u)&&(A=v,v=x,x=A),o(b,B,u)&&(A=b,b=B,B=A),o(b,v,u)&&(A=b,b=v,v=A),o(x,B,u)&&(A=x,x=B,B=A);for(var C=u[2*b],w=u[2*b+1],Q=u[2*x],U=u[2*x+1],S=2*y,E=2*v,L=2*B,_=2*h,T=2*p,R=2*g,$=0;$<2;++$){var k=u[S+$],N=u[E+$],G=u[L+$];u[_+$]=k,u[T+$]=N,u[R+$]=G}n(f,e,u),n(m,c,u);for(var M=I;M<=F;++M)if(s(M,C,w,u))M!==I&&r(M,I,u),++I;else if(!s(M,Q,U,u))for(;;){if(s(F,Q,U,u)){s(F,C,w,u)?(i(M,I,F,u),++I,--F):(r(M,F,u),--F);break}if(--F<M)break}a(e,I-1,C,w,u),a(c,F+1,Q,U,u),I-2-e<=32?t(e,I-2,u):l(e,I-2,u),c-(F+2)<=32?t(F+2,c,u):l(F+2,c,u),F-I<=32?t(I,F,u):l(I,F,u)}e.exports=function(e,r){r<=128?t(0,r-1,e):l(0,r-1,e)}},1390:function(e,t,r){e.exports={init:function(e){var t=i.nextPow2(e);l.length<t&&(n.free(l),l=n.mallocInt32(t)),c.length<t&&(n.free(c),c=n.mallocInt32(t)),u.length<t&&(n.free(u),u=n.mallocInt32(t)),d.length<t&&(n.free(d),d=n.mallocInt32(t)),h.length<t&&(n.free(h),h=n.mallocInt32(t)),g.length<t&&(n.free(g),g=n.mallocInt32(t));var r=8*t;p.length<r&&(n.free(p),p=n.mallocDouble(r))},sweepBipartite:function(e,t,r,n,i,s,h,g,y,b){for(var v=0,x=2*e,B=e-1,I=x-1,F=r;F<n;++F){var A=s[F],C=x*F;p[v++]=i[C+B],p[v++]=-(A+1),p[v++]=i[C+I],p[v++]=A}for(F=h;F<g;++F){A=b[F]+o;var w=x*F;p[v++]=y[w+B],p[v++]=-A,p[v++]=y[w+I],p[v++]=A}var Q=v>>>1;a(p,Q);var U=0,S=0;for(F=0;F<Q;++F){var E=0|p[2*F+1];if(E>=o)f(u,d,S--,E=E-o|0);else if(E>=0)f(l,c,U--,E);else if(E<=-268435456){E=-E-o|0;for(var L=0;L<U;++L)if(void 0!==(_=t(l[L],E)))return _;m(u,d,S++,E)}else{for(E=-E-1|0,L=0;L<S;++L){var _;if(void 0!==(_=t(E,u[L])))return _}m(l,c,U++,E)}}},sweepComplete:function(e,t,r,n,i,o,s,y,b,v){for(var x=0,B=2*e,I=e-1,F=B-1,A=r;A<n;++A){var C=o[A]+1<<1,w=B*A;p[x++]=i[w+I],p[x++]=-C,p[x++]=i[w+F],p[x++]=C}for(A=s;A<y;++A){C=v[A]+1<<1;var Q=B*A;p[x++]=b[Q+I],p[x++]=1|-C,p[x++]=b[Q+F],p[x++]=1|C}var U=x>>>1;a(p,U);var S=0,E=0,L=0;for(A=0;A<U;++A){var _=0|p[2*A+1],T=1&_;if(A<U-1&&_>>1==p[2*A+3]>>1&&(T=2,A+=1),_<0){for(var R=-(_>>1)-1,$=0;$<L;++$)if(void 0!==(k=t(h[$],R)))return k;if(0!==T)for($=0;$<S;++$)if(void 0!==(k=t(l[$],R)))return k;if(1!==T)for($=0;$<E;++$){var k;if(void 0!==(k=t(u[$],R)))return k}0===T?m(l,c,S++,R):1===T?m(u,d,E++,R):2===T&&m(h,g,L++,R)}else R=(_>>1)-1,0===T?f(l,c,S--,R):1===T?f(u,d,E--,R):2===T&&f(h,g,L--,R)}},scanBipartite:function(e,t,r,n,i,s,u,d,h,g,y,b){var v=0,x=2*e,B=t,I=t+e,F=1,A=1;n?A=o:F=o;for(var C=i;C<s;++C){var w=C+F,Q=x*C;p[v++]=u[Q+B],p[v++]=-w,p[v++]=u[Q+I],p[v++]=w}for(C=h;C<g;++C){w=C+A;var U=x*C;p[v++]=y[U+B],p[v++]=-w}var S=v>>>1;a(p,S);var E=0;for(C=0;C<S;++C){var L=0|p[2*C+1];if(L<0){var _=!1;if((w=-L)>=o?(_=!n,w-=o):(_=!!n,w-=1),_)m(l,c,E++,w);else{var T=b[w],R=x*w,$=y[R+t+1],k=y[R+t+1+e];e:for(var N=0;N<E;++N){var G=l[N],M=x*G;if(!(k<u[M+t+1]||u[M+t+1+e]<$)){for(var D=t+2;D<e;++D)if(y[R+D+e]<u[M+D]||u[M+D+e]<y[R+D])continue e;var V,H=d[G];if(void 0!==(V=n?r(T,H):r(H,T)))return V}}}}else f(l,c,E--,L-F)}},scanComplete:function(e,t,r,n,i,s,c,u,d,h,g){for(var f=0,m=2*e,y=t,b=t+e,v=n;v<i;++v){var x=v+o,B=m*v;p[f++]=s[B+y],p[f++]=-x,p[f++]=s[B+b],p[f++]=x}for(v=u;v<d;++v){x=v+1;var I=m*v;p[f++]=h[I+y],p[f++]=-x}var F=f>>>1;a(p,F);var A=0;for(v=0;v<F;++v){var C=0|p[2*v+1];if(C<0)if((x=-C)>=o)l[A++]=x-o;else{var w=g[x-=1],Q=m*x,U=h[Q+t+1],S=h[Q+t+1+e];e:for(var E=0;E<A;++E){var L=l[E],_=c[L];if(_===w)break;var T=m*L;if(!(S<s[T+t+1]||s[T+t+1+e]<U)){for(var R=t+2;R<e;++R)if(h[Q+R+e]<s[T+R]||s[T+R+e]<h[Q+R])continue e;var $=r(_,w);if(void 0!==$)return $}}}else{for(x=C-o,E=A-1;E>=0;--E)if(l[E]===x){for(R=E+1;R<A;++R)l[R-1]=l[R];break}--A}}}};var n=r(5306),i=r(2288),a=r(309),o=1<<28,s=1024,l=n.mallocInt32(s),c=n.mallocInt32(s),u=n.mallocInt32(s),d=n.mallocInt32(s),h=n.mallocInt32(s),g=n.mallocInt32(s),p=n.mallocDouble(8192);function f(e,t,r,n){var i=t[n],a=e[r-1];e[i]=a,t[a]=i}function m(e,t,r,n){e[r]=n,t[n]=r}},7761:function(e,t,r){var n=r(9971),i=r(743),a=r(2161),o=r(7098);function s(e){return[Math.min(e[0],e[1]),Math.max(e[0],e[1])]}function l(e,t){return e[0]-t[0]||e[1]-t[1]}function c(e,t,r){return t in e?e[t]:r}e.exports=function(e,t,r){Array.isArray(t)?(r=r||{},t=t||[]):(r=t||{},t=[]);var u=!!c(r,"delaunay",!0),d=!!c(r,"interior",!0),h=!!c(r,"exterior",!0),g=!!c(r,"infinity",!1);if(!d&&!h||0===e.length)return[];var p=n(e,t);if(u||d!==h||g){for(var f=i(e.length,function(e){return e.map(s).sort(l)}(t)),m=0;m<p.length;++m){var y=p[m];f.addTriangle(y[0],y[1],y[2])}return u&&a(e,f),h?d?g?o(f,0,g):f.cells():o(f,1,g):o(f,-1)}return p}},2161:function(e,t,r){var n=r(2227)[4];function i(e,t,r,i,a,o){var s=t.opposite(i,a);if(!(s<0)){if(a<i){var l=i;i=a,a=l,l=o,o=s,s=l}t.isConstraint(i,a)||n(e[i],e[a],e[o],e[s])<0&&r.push(i,a)}}r(5070),e.exports=function(e,t){for(var r=[],a=e.length,o=t.stars,s=0;s<a;++s)for(var l=o[s],c=1;c<l.length;c+=2)if(!((g=l[c])<s||t.isConstraint(s,g))){for(var u=l[c-1],d=-1,h=1;h<l.length;h+=2)if(l[h-1]===g){d=l[h];break}d<0||n(e[s],e[g],e[u],e[d])<0&&r.push(s,g)}for(;r.length>0;){for(var g=r.pop(),p=(s=r.pop(),u=-1,d=-1,l=o[s],1);p<l.length;p+=2){var f=l[p-1],m=l[p];f===g?d=m:m===g&&(u=f)}u<0||d<0||n(e[s],e[g],e[u],e[d])>=0||(t.flip(s,g),i(e,t,r,u,s,d),i(e,t,r,s,d,u),i(e,t,r,d,g,u),i(e,t,r,g,u,d))}}},7098:function(e,t,r){var n=r(5070);function i(e,t,r,n,i,a,o){this.cells=e,this.neighbor=t,this.flags=n,this.constraint=r,this.active=i,this.next=a,this.boundary=o}function a(e,t){return e[0]-t[0]||e[1]-t[1]||e[2]-t[2]}e.exports=function(e,t,r){var n=function(e,t){for(var r=e.cells(),n=r.length,o=0;o<n;++o){var s=(y=r[o])[0],l=y[1],c=y[2];l<c?l<s&&(y[0]=l,y[1]=c,y[2]=s):c<s&&(y[0]=c,y[1]=s,y[2]=l)}r.sort(a);var u=new Array(n);for(o=0;o<u.length;++o)u[o]=0;var d=[],h=[],g=new Array(3*n),p=new Array(3*n),f=null;t&&(f=[]);var m=new i(r,g,p,u,d,h,f);for(o=0;o<n;++o)for(var y=r[o],b=0;b<3;++b){s=y[b],l=y[(b+1)%3];var v=g[3*o+b]=m.locate(l,s,e.opposite(l,s)),x=p[3*o+b]=e.isConstraint(s,l);v<0&&(x?h.push(o):(d.push(o),u[o]=1),t&&f.push([l,s,-1]))}return m}(e,r);if(0===t)return r?n.cells.concat(n.boundary):n.cells;for(var o=1,s=n.active,l=n.next,c=n.flags,u=n.cells,d=n.constraint,h=n.neighbor;s.length>0||l.length>0;){for(;s.length>0;){var g=s.pop();if(c[g]!==-o){c[g]=o,u[g];for(var p=0;p<3;++p){var f=h[3*g+p];f>=0&&0===c[f]&&(d[3*g+p]?l.push(f):(s.push(f),c[f]=o))}}}var m=l;l=s,s=m,l.length=0,o=-o}var y=function(e,t,r){for(var n=0,i=0;i<e.length;++i)t[i]===r&&(e[n++]=e[i]);return e.length=n,e}(u,c,t);return r?y.concat(n.boundary):y},i.prototype.locate=function(){var e=[0,0,0];return function(t,r,i){var o=t,s=r,l=i;return r<i?r<t&&(o=r,s=i,l=t):i<t&&(o=i,s=t,l=r),o<0?-1:(e[0]=o,e[1]=s,e[2]=l,n.eq(this.cells,e,a))}}()},9971:function(e,t,r){var n=r(5070),i=r(417)[3];function a(e,t,r,n,i){this.a=e,this.b=t,this.idx=r,this.lowerIds=n,this.upperIds=i}function o(e,t,r,n){this.a=e,this.b=t,this.type=r,this.idx=n}function s(e,t){var r=e.a[0]-t.a[0]||e.a[1]-t.a[1]||e.type-t.type;return r||(0!==e.type&&(r=i(e.a,e.b,t.b))?r:e.idx-t.idx)}function l(e,t){return i(e.a,e.b,t)}function c(e,t,r,a,o){for(var s=n.lt(t,a,l),c=n.gt(t,a,l),u=s;u<c;++u){for(var d=t[u],h=d.lowerIds,g=h.length;g>1&&i(r[h[g-2]],r[h[g-1]],a)>0;)e.push([h[g-1],h[g-2],o]),g-=1;h.length=g,h.push(o);var p=d.upperIds;for(g=p.length;g>1&&i(r[p[g-2]],r[p[g-1]],a)<0;)e.push([p[g-2],p[g-1],o]),g-=1;p.length=g,p.push(o)}}function u(e,t){var r;return(r=e.a[0]<t.a[0]?i(e.a,e.b,t.a):i(t.b,t.a,e.a))?r:(r=t.b[0]<e.b[0]?i(e.a,e.b,t.b):i(t.b,t.a,e.b))||e.idx-t.idx}function d(e,t,r){var i=n.le(e,r,u),o=e[i],s=o.upperIds,l=s[s.length-1];o.upperIds=[l],e.splice(i+1,0,new a(r.a,r.b,r.idx,[l],s))}function h(e,t,r){var i=r.a;r.a=r.b,r.b=i;var a=n.eq(e,r,u),o=e[a];e[a-1].upperIds=o.upperIds,e.splice(a,1)}e.exports=function(e,t){for(var r=e.length,n=t.length,i=[],l=0;l<r;++l)i.push(new o(e[l],null,0,l));for(l=0;l<n;++l){var u=t[l],g=e[u[0]],p=e[u[1]];g[0]<p[0]?i.push(new o(g,p,2,l),new o(p,g,1,l)):g[0]>p[0]&&i.push(new o(p,g,2,l),new o(g,p,1,l))}i.sort(s);for(var f=i[0].a[0]-(1+Math.abs(i[0].a[0]))*Math.pow(2,-52),m=[new a([f,1],[f,0],-1,[],[])],y=[],b=(l=0,i.length);l<b;++l){var v=i[l],x=v.type;0===x?c(y,m,e,v.a,v.idx):2===x?d(m,0,v):h(m,0,v)}return y}},743:function(e,t,r){var n=r(5070);function i(e,t){this.stars=e,this.edges=t}e.exports=function(e,t){for(var r=new Array(e),n=0;n<e;++n)r[n]=[];return new i(r,t)};var a=i.prototype;function o(e,t,r){for(var n=1,i=e.length;n<i;n+=2)if(e[n-1]===t&&e[n]===r)return e[n-1]=e[i-2],e[n]=e[i-1],void(e.length=i-2)}a.isConstraint=function(){var e=[0,0];function t(e,t){return e[0]-t[0]||e[1]-t[1]}return function(r,i){return e[0]=Math.min(r,i),e[1]=Math.max(r,i),n.eq(this.edges,e,t)>=0}}(),a.removeTriangle=function(e,t,r){var n=this.stars;o(n[e],t,r),o(n[t],r,e),o(n[r],e,t)},a.addTriangle=function(e,t,r){var n=this.stars;n[e].push(t,r),n[t].push(r,e),n[r].push(e,t)},a.opposite=function(e,t){for(var r=this.stars[t],n=1,i=r.length;n<i;n+=2)if(r[n]===e)return r[n-1];return-1},a.flip=function(e,t){var r=this.opposite(e,t),n=this.opposite(t,e);this.removeTriangle(e,t,r),this.removeTriangle(t,e,n),this.addTriangle(e,n,r),this.addTriangle(t,r,n)},a.edges=function(){for(var e=this.stars,t=[],r=0,n=e.length;r<n;++r)for(var i=e[r],a=0,o=i.length;a<o;a+=2)t.push([i[a],i[a+1]]);return t},a.cells=function(){for(var e=this.stars,t=[],r=0,n=e.length;r<n;++r)for(var i=e[r],a=0,o=i.length;a<o;a+=2){var s=i[a],l=i[a+1];r<Math.min(s,l)&&t.push([r,s,l])}return t}},9887:function(e){e.exports=function(e){for(var t=1,r=1;r<e.length;++r)for(var n=0;n<r;++n)if(e[r]<e[n])t=-t;else if(e[n]===e[r])return 0;return t}},9243:function(e,t,r){var n=r(3094),i=r(6606);function a(e,t){for(var r=0,n=e.length,i=0;i<n;++i)r+=e[i]*t[i];return r}function o(e){var t=e.length;if(0===t)return[];e[0].length;var r=n([e.length+1,e.length+1],1),o=n([e.length+1],1);r[t][t]=0;for(var s=0;s<t;++s){for(var l=0;l<=s;++l)r[l][s]=r[s][l]=2*a(e[s],e[l]);o[s]=a(e[s],e[s])}var c=i(r,o),u=0,d=c[t+1];for(s=0;s<d.length;++s)u+=d[s];var h=new Array(t);for(s=0;s<t;++s){d=c[s];var g=0;for(l=0;l<d.length;++l)g+=d[l];h[s]=g/u}return h}function s(e){if(0===e.length)return[];for(var t=e[0].length,r=n([t]),i=o(e),a=0;a<e.length;++a)for(var s=0;s<t;++s)r[s]+=e[a][s]*i[a];return r}s.barycenetric=o,e.exports=s},1778:function(e,t,r){e.exports=function(e){for(var t=n(e),r=0,i=0;i<e.length;++i)for(var a=e[i],o=0;o<t.length;++o)r+=Math.pow(a[o]-t[o],2);return Math.sqrt(r/e.length)};var n=r(9243)},197:function(e,t,r){e.exports=function(e,t,r){var n;if(r){n=t;for(var i=new Array(t.length),a=0;a<t.length;++a){var o=t[a];i[a]=[o[0],o[1],r[a]]}t=i}for(var s=function(e,t,r){var n=p(e,[],g(e));return y(t,n,r),!!n}(e,t,!!r);b(e,t,!!r);)s=!0;if(r&&s)for(n.length=0,r.length=0,a=0;a<t.length;++a)o=t[a],n.push([o[0],o[1]]),r.push(o[2]);return s};var n=r(1731),i=r(2569),a=r(4434),o=r(5125),s=r(8846),l=r(7999),c=r(2826),u=r(8551),d=r(5528);function h(e){var t=l(e);return[u(t,-1/0),u(t,1/0)]}function g(e){for(var t=new Array(e.length),r=0;r<e.length;++r){var n=e[r];t[r]=[u(n[0],-1/0),u(n[1],-1/0),u(n[0],1/0),u(n[1],1/0)]}return t}function p(e,t,r){for(var a=t.length,o=new n(a),s=[],l=0;l<t.length;++l){var c=t[l],d=h(c[0]),g=h(c[1]);s.push([u(d[0],-1/0),u(g[0],-1/0),u(d[1],1/0),u(g[1],1/0)])}i(s,(function(e,t){o.link(e,t)}));var p=!0,f=new Array(a);for(l=0;l<a;++l)(y=o.find(l))!==l&&(p=!1,e[y]=[Math.min(e[l][0],e[y][0]),Math.min(e[l][1],e[y][1])]);if(p)return null;var m=0;for(l=0;l<a;++l){var y;(y=o.find(l))===l?(f[l]=m,e[m++]=e[l]):f[l]=-1}for(e.length=m,l=0;l<a;++l)f[l]<0&&(f[l]=f[o.find(l)]);return f}function f(e,t){return e[0]-t[0]||e[1]-t[1]}function m(e,t){var r=e[0]-t[0]||e[1]-t[1];return r||(e[2]<t[2]?-1:e[2]>t[2]?1:0)}function y(e,t,r){if(0!==e.length){if(t)for(var n=0;n<e.length;++n){var i=t[(o=e[n])[0]],a=t[o[1]];o[0]=Math.min(i,a),o[1]=Math.max(i,a)}else for(n=0;n<e.length;++n){var o;i=(o=e[n])[0],a=o[1],o[0]=Math.min(i,a),o[1]=Math.max(i,a)}r?e.sort(m):e.sort(f);var s=1;for(n=1;n<e.length;++n){var l=e[n-1],c=e[n];(c[0]!==l[0]||c[1]!==l[1]||r&&c[2]!==l[2])&&(e[s++]=c)}e.length=s}}function b(e,t,r){var n=function(e,t){for(var r=new Array(t.length),n=0;n<t.length;++n){var i=t[n],a=e[i[0]],o=e[i[1]];r[n]=[u(Math.min(a[0],o[0]),-1/0),u(Math.min(a[1],o[1]),-1/0),u(Math.max(a[0],o[0]),1/0),u(Math.max(a[1],o[1]),1/0)]}return r}(e,t),h=function(e,t,r){var n=[];return i(r,(function(r,i){var o=t[r],s=t[i];if(o[0]!==s[0]&&o[0]!==s[1]&&o[1]!==s[0]&&o[1]!==s[1]){var l=e[o[0]],c=e[o[1]],u=e[s[0]],d=e[s[1]];a(l,c,u,d)&&n.push([r,i])}})),n}(e,t,n),f=function(e,t,r,n){var o=[];return i(r,n,(function(r,n){var i=t[r];if(i[0]!==n&&i[1]!==n){var s=e[n],l=e[i[0]],c=e[i[1]];a(l,c,s,s)&&o.push([r,n])}})),o}(e,t,n,g(e)),m=function(e,t,r,n,i){var a,u,h=e.map((function(e){return[o(e[0]),o(e[1])]}));for(a=0;a<r.length;++a){var g=r[a];u=g[0];var p=g[1],f=t[u],m=t[p],y=d(c(e[f[0]]),c(e[f[1]]),c(e[m[0]]),c(e[m[1]]));if(y){var b=e.length;e.push([l(y[0]),l(y[1])]),h.push(y),n.push([u,b],[p,b])}}for(n.sort((function(e,t){if(e[0]!==t[0])return e[0]-t[0];var r=h[e[1]],n=h[t[1]];return s(r[0],n[0])||s(r[1],n[1])})),a=n.length-1;a>=0;--a){var v=t[u=(Q=n[a])[0]],x=v[0],B=v[1],I=e[x],F=e[B];if((I[0]-F[0]||I[1]-F[1])<0){var A=x;x=B,B=A}v[0]=x;var C,w=v[1]=Q[1];for(i&&(C=v[2]);a>0&&n[a-1][0]===u;){var Q,U=(Q=n[--a])[1];i?t.push([w,U,C]):t.push([w,U]),w=U}i?t.push([w,B,C]):t.push([w,B])}return h}(e,t,h,f,r),b=p(e,m);return y(t,b,r),!!b||h.length>0||f.length>0}},5528:function(e,t,r){e.exports=function(e,t,r,n){var a=s(t,e),d=s(n,r),h=u(a,d);if(0===o(h))return null;var g=s(e,r),p=u(d,g),f=i(p,h),m=c(a,f);return l(e,m)};var n=r(3962),i=r(9189),a=r(4354),o=r(4951),s=r(6695),l=r(7584),c=r(4469);function u(e,t){return a(n(e[0],t[1]),n(e[1],t[0]))}},5692:function(e){e.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(e,t,r){var n=r(5692),i=r(3578);function a(e){return[e[0]/255,e[1]/255,e[2]/255,e[3]]}function o(e){for(var t,r="#",n=0;n<3;++n)r+=("00"+(t=(t=e[n]).toString(16))).substr(t.length);return r}function s(e){return"rgba("+e.join(",")+")"}e.exports=function(e){var t,r,l,c,u,d,h,g,p,f;if(e||(e={}),g=(e.nshades||72)-1,h=e.format||"hex",(d=e.colormap)||(d="jet"),"string"==typeof d){if(d=d.toLowerCase(),!n[d])throw Error(d+" not a supported colorscale");u=n[d]}else{if(!Array.isArray(d))throw Error("unsupported colormap option",d);u=d.slice()}if(u.length>g+1)throw new Error(d+" map requires nshades to be at least size "+u.length);p=Array.isArray(e.alpha)?2!==e.alpha.length?[1,1]:e.alpha.slice():"number"==typeof e.alpha?[e.alpha,e.alpha]:[1,1],t=u.map((function(e){return Math.round(e.index*g)})),p[0]=Math.min(Math.max(p[0],0),1),p[1]=Math.min(Math.max(p[1],0),1);var m=u.map((function(e,t){var r=u[t].index,n=u[t].rgb.slice();return 4===n.length&&n[3]>=0&&n[3]<=1||(n[3]=p[0]+(p[1]-p[0])*r),n})),y=[];for(f=0;f<t.length-1;++f){c=t[f+1]-t[f],r=m[f],l=m[f+1];for(var b=0;b<c;b++){var v=b/c;y.push([Math.round(i(r[0],l[0],v)),Math.round(i(r[1],l[1],v)),Math.round(i(r[2],l[2],v)),i(r[3],l[3],v)])}}return y.push(u[u.length-1].rgb.concat(p[1])),"hex"===h?y=y.map(o):"rgbaString"===h?y=y.map(s):"float"===h&&(y=y.map(a)),y}},9398:function(e,t,r){e.exports=function(e,t,r,a){var o=n(t,r,a);if(0===o){var s=i(n(e,t,r)),c=i(n(e,t,a));if(s===c){if(0===s){var u=l(e,t,r),d=l(e,t,a);return u===d?0:u?1:-1}return 0}return 0===c?s>0||l(e,t,a)?-1:1:0===s?c>0||l(e,t,r)?1:-1:i(c-s)}var h=n(e,t,r);return h>0?o>0&&n(e,t,a)>0?1:-1:h<0?o>0||n(e,t,a)>0?1:-1:n(e,t,a)>0||l(e,t,r)?1:-1};var n=r(417),i=r(7538),a=r(87),o=r(2019),s=r(9662);function l(e,t,r){var n=a(e[0],-t[0]),i=a(e[1],-t[1]),l=a(r[0],-t[0]),c=a(r[1],-t[1]),u=s(o(n,l),o(i,c));return u[u.length-1]>=0}},7538:function(e){e.exports=function(e){return e<0?-1:e>0?1:0}},9209:function(e){e.exports=function(e,n){var i=e.length,a=e.length-n.length;if(a)return a;switch(i){case 0:return 0;case 1:return e[0]-n[0];case 2:return e[0]+e[1]-n[0]-n[1]||t(e[0],e[1])-t(n[0],n[1]);case 3:var o=e[0]+e[1],s=n[0]+n[1];if(a=o+e[2]-(s+n[2]))return a;var l=t(e[0],e[1]),c=t(n[0],n[1]);return t(l,e[2])-t(c,n[2])||t(l+e[2],o)-t(c+n[2],s);case 4:var u=e[0],d=e[1],h=e[2],g=e[3],p=n[0],f=n[1],m=n[2],y=n[3];return u+d+h+g-(p+f+m+y)||t(u,d,h,g)-t(p,f,m,y,p)||t(u+d,u+h,u+g,d+h,d+g,h+g)-t(p+f,p+m,p+y,f+m,f+y,m+y)||t(u+d+h,u+d+g,u+h+g,d+h+g)-t(p+f+m,p+f+y,p+m+y,f+m+y);default:for(var b=e.slice().sort(r),v=n.slice().sort(r),x=0;x<i;++x)if(a=b[x]-v[x])return a;return 0}};var t=Math.min;function r(e,t){return e-t}},1284:function(e,t,r){var n=r(9209),i=r(9887);e.exports=function(e,t){return n(e,t)||i(e)-i(t)}},5537:function(e,t,r){var n=r(8950),i=r(8722),a=r(3332);e.exports=function(e){var t=e.length;if(0===t)return[];if(1===t)return[[0]];var r=e[0].length;return 0===r?[]:1===r?n(e):2===r?i(e):a(e,r)}},8950:function(e){e.exports=function(e){for(var t=0,r=0,n=1;n<e.length;++n)e[n][0]<e[t][0]&&(t=n),e[n][0]>e[r][0]&&(r=n);return t<r?[[t],[r]]:t>r?[[r],[t]]:[[t]]}},8722:function(e,t,r){e.exports=function(e){var t=n(e),r=t.length;if(r<=2)return[];for(var i=new Array(r),a=t[r-1],o=0;o<r;++o){var s=t[o];i[o]=[a,s],a=s}return i};var n=r(3266)},3332:function(e,t,r){e.exports=function(e,t){try{return n(e,!0)}catch(o){var r=i(e);if(r.length<=t)return[];var a=function(e,t){for(var r=e.length,n=new Array(r),i=0;i<t.length;++i)n[i]=e[t[i]];var a=t.length;for(i=0;i<r;++i)t.indexOf(i)<0&&(n[a++]=e[i]);return n}(e,r);return function(e,t){for(var r=e.length,n=t.length,i=0;i<r;++i)for(var a=e[i],o=0;o<a.length;++o){var s=a[o];if(s<n)a[o]=t[s];else{s-=n;for(var l=0;l<n;++l)s>=t[l]&&(s+=1);a[o]=s}}return e}(n(a,!0),r)}};var n=r(2183),i=r(2153)},9680:function(e){e.exports=function(e,t,r,n,i,a){var o=i-1,s=i*i,l=o*o,c=(1+2*i)*l,u=i*l,d=s*(3-2*i),h=s*o;if(e.length){a||(a=new Array(e.length));for(var g=e.length-1;g>=0;--g)a[g]=c*e[g]+u*t[g]+d*r[g]+h*n[g];return a}return c*e+u*t+d*r+h*n},e.exports.derivative=function(e,t,r,n,i,a){var o=6*i*i-6*i,s=3*i*i-4*i+1,l=-6*i*i+6*i,c=3*i*i-2*i;if(e.length){a||(a=new Array(e.length));for(var u=e.length-1;u>=0;--u)a[u]=o*e[u]+s*t[u]+l*r[u]+c*n[u];return a}return o*e+s*t+l*r[u]+c*n}},4419:function(e,t,r){var n=r(2183),i=r(1215);function a(e,t){this.point=e,this.index=t}function o(e,t){for(var r=e.point,n=t.point,i=r.length,a=0;a<i;++a){var o=n[a]-r[a];if(o)return o}return 0}e.exports=function(e,t){var r=e.length;if(0===r)return[];var s=e[0].length;if(s<1)return[];if(1===s)return function(e,t,r){if(1===e)return r?[[-1,0]]:[];var n=t.map((function(e,t){return[e[0],t]}));n.sort((function(e,t){return e[0]-t[0]}));for(var i=new Array(e-1),a=1;a<e;++a){var o=n[a-1],s=n[a];i[a-1]=[o[1],s[1]]}return r&&i.push([-1,i[0][1]],[i[e-1][1],-1]),i}(r,e,t);for(var l=new Array(r),c=1,u=0;u<r;++u){for(var d=e[u],h=new Array(s+1),g=0,p=0;p<s;++p){var f=d[p];h[p]=f,g+=f*f}h[s]=g,l[u]=new a(h,u),c=Math.max(g,c)}i(l,o),r=l.length;var m=new Array(r+s+1),y=new Array(r+s+1),b=(s+1)*(s+1)*c,v=new Array(s+1);for(u=0;u<=s;++u)v[u]=0;for(v[s]=b,m[0]=v.slice(),y[0]=-1,u=0;u<=s;++u)(h=v.slice())[u]=1,m[u+1]=h,y[u+1]=-1;for(u=0;u<r;++u){var x=l[u];m[u+s+1]=x.point,y[u+s+1]=x.index}var B=n(m,!1);if(B=t?B.filter((function(e){for(var t=0,r=0;r<=s;++r){var n=y[e[r]];if(n<0&&++t>=2)return!1;e[r]=n}return!0})):B.filter((function(e){for(var t=0;t<=s;++t){var r=y[e[t]];if(r<0)return!1;e[t]=r}return!0})),1&s)for(u=0;u<B.length;++u)h=(x=B[u])[0],x[0]=x[1],x[1]=h;return B}},8362:function(e){var t=!1;if("undefined"!=typeof Float64Array){var r=new Float64Array(1),n=new Uint32Array(r.buffer);r[0]=1,t=!0,1072693248===n[1]?(e.exports=function(e){return r[0]=e,[n[0],n[1]]},e.exports.pack=function(e,t){return n[0]=e,n[1]=t,r[0]},e.exports.lo=function(e){return r[0]=e,n[0]},e.exports.hi=function(e){return r[0]=e,n[1]}):1072693248===n[0]?(e.exports=function(e){return r[0]=e,[n[1],n[0]]},e.exports.pack=function(e,t){return n[1]=e,n[0]=t,r[0]},e.exports.lo=function(e){return r[0]=e,n[1]},e.exports.hi=function(e){return r[0]=e,n[0]}):t=!1}if(!t){var i=new Buffer(8);e.exports=function(e){return i.writeDoubleLE(e,0,!0),[i.readUInt32LE(0,!0),i.readUInt32LE(4,!0)]},e.exports.pack=function(e,t){return i.writeUInt32LE(e,0,!0),i.writeUInt32LE(t,4,!0),i.readDoubleLE(0,!0)},e.exports.lo=function(e){return i.writeDoubleLE(e,0,!0),i.readUInt32LE(0,!0)},e.exports.hi=function(e){return i.writeDoubleLE(e,0,!0),i.readUInt32LE(4,!0)}}e.exports.sign=function(t){return e.exports.hi(t)>>>31},e.exports.exponent=function(t){return(e.exports.hi(t)<<1>>>21)-1023},e.exports.fraction=function(t){var r=e.exports.lo(t),n=e.exports.hi(t),i=1048575&n;return 2146435072&n&&(i+=1<<20),[r,i]},e.exports.denormalized=function(t){return!(2146435072&e.exports.hi(t))}},3094:function(e){function t(e,r,n){var i=0|e[n];if(i<=0)return[];var a,o=new Array(i);if(n===e.length-1)for(a=0;a<i;++a)o[a]=r;else for(a=0;a<i;++a)o[a]=t(e,r,n+1);return o}e.exports=function(e,r){switch(void 0===r&&(r=0),typeof e){case"number":if(e>0)return function(e,t){var r,n;for(r=new Array(e),n=0;n<e;++n)r[n]=t;return r}(0|e,r);break;case"object":if("number"==typeof e.length)return t(e,r,0)}return[]}},8348:function(e,t,r){e.exports=function(e,t){var r=e.length;if("number"!=typeof t){t=0;for(var i=0;i<r;++i){var a=e[i];t=Math.max(t,a[0],a[1])}t=1+(0|t)}t|=0;var o=new Array(t);for(i=0;i<t;++i)o[i]=[];for(i=0;i<r;++i)a=e[i],o[a[0]].push(a[1]),o[a[1]].push(a[0]);for(var s=0;s<t;++s)n(o[s],(function(e,t){return e-t}));return o};var n=r(1215)},5795:function(e){e.exports=function(e,t,r){var n=t||0,i=r||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[n*e[12]+e[8],n*e[13]+e[9],n*e[14]+e[10],n*e[15]+e[11]],[i*e[12]-e[8],i*e[13]-e[9],i*e[14]-e[10],i*e[15]-e[11]]]}},8444:function(e,t,r){e.exports=function(e,t,r){switch(arguments.length){case 0:return new o([0],[0],0);case 1:return"number"==typeof e?new o(n=l(e),n,0):new o(e,l(e.length),0);case 2:if("number"==typeof t){var n=l(e.length);return new o(e,n,+t)}r=0;case 3:if(e.length!==t.length)throw new Error("state and velocity lengths must match");return new o(e,t,r)}};var n=r(9680),i=r(5070);function a(e,t,r){return Math.min(t,Math.max(e,r))}function o(e,t,r){this.dimension=e.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var n=0;n<this.dimension;++n)this.bounds[0][n]=-1/0,this.bounds[1][n]=1/0;this._state=e.slice().reverse(),this._velocity=t.slice().reverse(),this._time=[r],this._scratch=[e.slice(),e.slice(),e.slice(),e.slice(),e.slice()]}var s=o.prototype;function l(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=0;return t}s.flush=function(e){var t=i.gt(this._time,e)-1;t<=0||(this._time.splice(0,t),this._state.splice(0,t*this.dimension),this._velocity.splice(0,t*this.dimension))},s.curve=function(e){var t=this._time,r=t.length,o=i.le(t,e),s=this._scratch[0],l=this._state,c=this._velocity,u=this.dimension,d=this.bounds;if(o<0)for(var h=u-1,g=0;g<u;++g,--h)s[g]=l[h];else if(o>=r-1){h=l.length-1;var p=e-t[r-1];for(g=0;g<u;++g,--h)s[g]=l[h]+p*c[h]}else{h=u*(o+1)-1;var f=t[o],m=t[o+1]-f||1,y=this._scratch[1],b=this._scratch[2],v=this._scratch[3],x=this._scratch[4],B=!0;for(g=0;g<u;++g,--h)y[g]=l[h],v[g]=c[h]*m,b[g]=l[h+u],x[g]=c[h+u]*m,B=B&&y[g]===b[g]&&v[g]===x[g]&&0===v[g];if(B)for(g=0;g<u;++g)s[g]=y[g];else n(y,v,b,x,(e-f)/m,s)}var I=d[0],F=d[1];for(g=0;g<u;++g)s[g]=a(I[g],F[g],s[g]);return s},s.dcurve=function(e){var t=this._time,r=t.length,a=i.le(t,e),o=this._scratch[0],s=this._state,l=this._velocity,c=this.dimension;if(a>=r-1){var u=s.length-1;t[r-1];for(var d=0;d<c;++d,--u)o[d]=l[u]}else{u=c*(a+1)-1;var h=t[a],g=t[a+1]-h||1,p=this._scratch[1],f=this._scratch[2],m=this._scratch[3],y=this._scratch[4],b=!0;for(d=0;d<c;++d,--u)p[d]=s[u],m[d]=l[u]*g,f[d]=s[u+c],y[d]=l[u+c]*g,b=b&&p[d]===f[d]&&m[d]===y[d]&&0===m[d];if(b)for(d=0;d<c;++d)o[d]=0;else for(n.derivative(p,m,f,y,(e-h)/g,o),d=0;d<c;++d)o[d]/=g}return o},s.lastT=function(){var e=this._time;return e[e.length-1]},s.stable=function(){for(var e=this._velocity,t=e.length,r=this.dimension-1;r>=0;--r)if(e[--t])return!1;return!0},s.jump=function(e){var t=this.lastT(),r=this.dimension;if(!(e<t||arguments.length!==r+1)){var n=this._state,i=this._velocity,o=n.length-this.dimension,s=this.bounds,l=s[0],c=s[1];this._time.push(t,e);for(var u=0;u<2;++u)for(var d=0;d<r;++d)n.push(n[o++]),i.push(0);for(this._time.push(e),d=r;d>0;--d)n.push(a(l[d-1],c[d-1],arguments[d])),i.push(0)}},s.push=function(e){var t=this.lastT(),r=this.dimension;if(!(e<t||arguments.length!==r+1)){var n=this._state,i=this._velocity,o=n.length-this.dimension,s=e-t,l=this.bounds,c=l[0],u=l[1],d=s>1e-6?1/s:0;this._time.push(e);for(var h=r;h>0;--h){var g=a(c[h-1],u[h-1],arguments[h]);n.push(g),i.push((g-n[o++])*d)}}},s.set=function(e){var t=this.dimension;if(!(e<this.lastT()||arguments.length!==t+1)){var r=this._state,n=this._velocity,i=this.bounds,o=i[0],s=i[1];this._time.push(e);for(var l=t;l>0;--l)r.push(a(o[l-1],s[l-1],arguments[l])),n.push(0)}},s.move=function(e){var t=this.lastT(),r=this.dimension;if(!(e<=t||arguments.length!==r+1)){var n=this._state,i=this._velocity,o=n.length-this.dimension,s=this.bounds,l=s[0],c=s[1],u=e-t,d=u>1e-6?1/u:0;this._time.push(e);for(var h=r;h>0;--h){var g=arguments[h];n.push(a(l[h-1],c[h-1],n[o++]+g)),i.push(g*d)}}},s.idle=function(e){var t=this.lastT();if(!(e<t)){var r=this.dimension,n=this._state,i=this._velocity,o=n.length-r,s=this.bounds,l=s[0],c=s[1],u=e-t;this._time.push(e);for(var d=r-1;d>=0;--d)n.push(a(l[d],c[d],n[o]+u*i[o])),i.push(0),o+=1}}},7080:function(e){function t(e,t,r,n,i,a){this._color=e,this.key=t,this.value=r,this.left=n,this.right=i,this._count=a}function r(e){return new t(e._color,e.key,e.value,e.left,e.right,e._count)}function n(e,r){return new t(e,r.key,r.value,r.left,r.right,r._count)}function i(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function a(e,t){this._compare=e,this.root=t}e.exports=function(e){return new a(e||g,null)};var o=a.prototype;function s(e,t){var r;return t.left&&(r=s(e,t.left))?r:(r=e(t.key,t.value))||(t.right?s(e,t.right):void 0)}function l(e,t,r,n){if(t(e,n.key)<=0){var i;if(n.left&&(i=l(e,t,r,n.left)))return i;if(i=r(n.key,n.value))return i}if(n.right)return l(e,t,r,n.right)}function c(e,t,r,n,i){var a,o=r(e,i.key),s=r(t,i.key);if(o<=0){if(i.left&&(a=c(e,t,r,n,i.left)))return a;if(s>0&&(a=n(i.key,i.value)))return a}if(s>0&&i.right)return c(e,t,r,n,i.right)}function u(e,t){this.tree=e,this._stack=t}Object.defineProperty(o,"keys",{get:function(){var e=[];return this.forEach((function(t,r){e.push(t)})),e}}),Object.defineProperty(o,"values",{get:function(){var e=[];return this.forEach((function(t,r){e.push(r)})),e}}),Object.defineProperty(o,"length",{get:function(){return this.root?this.root._count:0}}),o.insert=function(e,r){for(var o=this._compare,s=this.root,l=[],c=[];s;){var u=o(e,s.key);l.push(s),c.push(u),s=u<=0?s.left:s.right}l.push(new t(0,e,r,null,null,1));for(var d=l.length-2;d>=0;--d)s=l[d],c[d]<=0?l[d]=new t(s._color,s.key,s.value,l[d+1],s.right,s._count+1):l[d]=new t(s._color,s.key,s.value,s.left,l[d+1],s._count+1);for(d=l.length-1;d>1;--d){var h=l[d-1];if(s=l[d],1===h._color||1===s._color)break;var g=l[d-2];if(g.left===h)if(h.left===s){if(!(p=g.right)||0!==p._color){g._color=0,g.left=h.right,h._color=1,h.right=g,l[d-2]=h,l[d-1]=s,i(g),i(h),d>=3&&((f=l[d-3]).left===g?f.left=h:f.right=h);break}h._color=1,g.right=n(1,p),g._color=0,d-=1}else{if(!(p=g.right)||0!==p._color){h.right=s.left,g._color=0,g.left=s.right,s._color=1,s.left=h,s.right=g,l[d-2]=s,l[d-1]=h,i(g),i(h),i(s),d>=3&&((f=l[d-3]).left===g?f.left=s:f.right=s);break}h._color=1,g.right=n(1,p),g._color=0,d-=1}else if(h.right===s){if(!(p=g.left)||0!==p._color){g._color=0,g.right=h.left,h._color=1,h.left=g,l[d-2]=h,l[d-1]=s,i(g),i(h),d>=3&&((f=l[d-3]).right===g?f.right=h:f.left=h);break}h._color=1,g.left=n(1,p),g._color=0,d-=1}else{var p;if(!(p=g.left)||0!==p._color){var f;h.left=s.right,g._color=0,g.right=s.left,s._color=1,s.right=h,s.left=g,l[d-2]=s,l[d-1]=h,i(g),i(h),i(s),d>=3&&((f=l[d-3]).right===g?f.right=s:f.left=s);break}h._color=1,g.left=n(1,p),g._color=0,d-=1}}return l[0]._color=1,new a(o,l[0])},o.forEach=function(e,t,r){if(this.root)switch(arguments.length){case 1:return s(e,this.root);case 2:return l(t,this._compare,e,this.root);case 3:if(this._compare(t,r)>=0)return;return c(t,r,this._compare,e,this.root)}},Object.defineProperty(o,"begin",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.left;return new u(this,e)}}),Object.defineProperty(o,"end",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.right;return new u(this,e)}}),o.at=function(e){if(e<0)return new u(this,[]);for(var t=this.root,r=[];;){if(r.push(t),t.left){if(e<t.left._count){t=t.left;continue}e-=t.left._count}if(!e)return new u(this,r);if(e-=1,!t.right)break;if(e>=t.right._count)break;t=t.right}return new u(this,[])},o.ge=function(e){for(var t=this._compare,r=this.root,n=[],i=0;r;){var a=t(e,r.key);n.push(r),a<=0&&(i=n.length),r=a<=0?r.left:r.right}return n.length=i,new u(this,n)},o.gt=function(e){for(var t=this._compare,r=this.root,n=[],i=0;r;){var a=t(e,r.key);n.push(r),a<0&&(i=n.length),r=a<0?r.left:r.right}return n.length=i,new u(this,n)},o.lt=function(e){for(var t=this._compare,r=this.root,n=[],i=0;r;){var a=t(e,r.key);n.push(r),a>0&&(i=n.length),r=a<=0?r.left:r.right}return n.length=i,new u(this,n)},o.le=function(e){for(var t=this._compare,r=this.root,n=[],i=0;r;){var a=t(e,r.key);n.push(r),a>=0&&(i=n.length),r=a<0?r.left:r.right}return n.length=i,new u(this,n)},o.find=function(e){for(var t=this._compare,r=this.root,n=[];r;){var i=t(e,r.key);if(n.push(r),0===i)return new u(this,n);r=i<=0?r.left:r.right}return new u(this,[])},o.remove=function(e){var t=this.find(e);return t?t.remove():this},o.get=function(e){for(var t=this._compare,r=this.root;r;){var n=t(e,r.key);if(0===n)return r.value;r=n<=0?r.left:r.right}};var d=u.prototype;function h(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e._color=t._color,e._count=t._count}function g(e,t){return e<t?-1:e>t?1:0}Object.defineProperty(d,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(d,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),d.clone=function(){return new u(this.tree,this._stack.slice())},d.remove=function(){var e=this._stack;if(0===e.length)return this.tree;var o=new Array(e.length),s=e[e.length-1];o[o.length-1]=new t(s._color,s.key,s.value,s.left,s.right,s._count);for(var l=e.length-2;l>=0;--l)(s=e[l]).left===e[l+1]?o[l]=new t(s._color,s.key,s.value,o[l+1],s.right,s._count):o[l]=new t(s._color,s.key,s.value,s.left,o[l+1],s._count);if((s=o[o.length-1]).left&&s.right){var c=o.length;for(s=s.left;s.right;)o.push(s),s=s.right;var u=o[c-1];for(o.push(new t(s._color,u.key,u.value,s.left,s.right,s._count)),o[c-1].key=s.key,o[c-1].value=s.value,l=o.length-2;l>=c;--l)s=o[l],o[l]=new t(s._color,s.key,s.value,s.left,o[l+1],s._count);o[c-1].left=o[c]}if(0===(s=o[o.length-1])._color){var d=o[o.length-2];for(d.left===s?d.left=null:d.right===s&&(d.right=null),o.pop(),l=0;l<o.length;++l)o[l]._count--;return new a(this.tree._compare,o[0])}if(s.left||s.right){for(s.left?h(s,s.left):s.right&&h(s,s.right),s._color=1,l=0;l<o.length-1;++l)o[l]._count--;return new a(this.tree._compare,o[0])}if(1===o.length)return new a(this.tree._compare,null);for(l=0;l<o.length;++l)o[l]._count--;var g=o[o.length-2];return function(e){for(var t,a,o,s,l=e.length-1;l>=0;--l){if(t=e[l],0===l)return void(t._color=1);if((a=e[l-1]).left===t){if((o=a.right).right&&0===o.right._color)return s=(o=a.right=r(o)).right=r(o.right),a.right=o.left,o.left=a,o.right=s,o._color=a._color,t._color=1,a._color=1,s._color=1,i(a),i(o),l>1&&((c=e[l-2]).left===a?c.left=o:c.right=o),void(e[l-1]=o);if(o.left&&0===o.left._color)return s=(o=a.right=r(o)).left=r(o.left),a.right=s.left,o.left=s.right,s.left=a,s.right=o,s._color=a._color,a._color=1,o._color=1,t._color=1,i(a),i(o),i(s),l>1&&((c=e[l-2]).left===a?c.left=s:c.right=s),void(e[l-1]=s);if(1===o._color){if(0===a._color)return a._color=1,void(a.right=n(0,o));a.right=n(0,o);continue}o=r(o),a.right=o.left,o.left=a,o._color=a._color,a._color=0,i(a),i(o),l>1&&((c=e[l-2]).left===a?c.left=o:c.right=o),e[l-1]=o,e[l]=a,l+1<e.length?e[l+1]=t:e.push(t),l+=2}else{if((o=a.left).left&&0===o.left._color)return s=(o=a.left=r(o)).left=r(o.left),a.left=o.right,o.right=a,o.left=s,o._color=a._color,t._color=1,a._color=1,s._color=1,i(a),i(o),l>1&&((c=e[l-2]).right===a?c.right=o:c.left=o),void(e[l-1]=o);if(o.right&&0===o.right._color)return s=(o=a.left=r(o)).right=r(o.right),a.left=s.right,o.right=s.left,s.right=a,s.left=o,s._color=a._color,a._color=1,o._color=1,t._color=1,i(a),i(o),i(s),l>1&&((c=e[l-2]).right===a?c.right=s:c.left=s),void(e[l-1]=s);if(1===o._color){if(0===a._color)return a._color=1,void(a.left=n(0,o));a.left=n(0,o);continue}var c;o=r(o),a.left=o.right,o.right=a,o._color=a._color,a._color=0,i(a),i(o),l>1&&((c=e[l-2]).right===a?c.right=o:c.left=o),e[l-1]=o,e[l]=a,l+1<e.length?e[l+1]=t:e.push(t),l+=2}}}(o),g.left===s?g.left=null:g.right=null,new a(this.tree._compare,o[0])},Object.defineProperty(d,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(d,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(d,"index",{get:function(){var e=0,t=this._stack;if(0===t.length){var r=this.tree.root;return r?r._count:0}t[t.length-1].left&&(e=t[t.length-1].left._count);for(var n=t.length-2;n>=0;--n)t[n+1]===t[n].right&&(++e,t[n].left&&(e+=t[n].left._count));return e},enumerable:!0}),d.next=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.right)for(t=t.right;t;)e.push(t),t=t.left;else for(e.pop();e.length>0&&e[e.length-1].right===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(d,"hasNext",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].right)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].left===e[t])return!0;return!1}}),d.update=function(e){var r=this._stack;if(0===r.length)throw new Error("Can't update empty node!");var n=new Array(r.length),i=r[r.length-1];n[n.length-1]=new t(i._color,i.key,e,i.left,i.right,i._count);for(var o=r.length-2;o>=0;--o)(i=r[o]).left===r[o+1]?n[o]=new t(i._color,i.key,i.value,n[o+1],i.right,i._count):n[o]=new t(i._color,i.key,i.value,i.left,n[o+1],i._count);return new a(this.tree._compare,n[0])},d.prev=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.left)for(t=t.left;t;)e.push(t),t=t.right;else for(e.pop();e.length>0&&e[e.length-1].left===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(d,"hasPrev",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].left)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].right===e[t])return!0;return!1}})},7453:function(e,t,r){e.exports=function(e,t){var r=new u(e);return r.update(t),r};var n=r(9557),i=r(1681),a=r(1011),o=r(2864),s=r(8468),l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function c(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function u(e){this.gl=e,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=a(e)}var d=u.prototype;function h(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}d.update=function(e){function t(t,r,n){if(n in e){var i,a=e[n],o=this[n];(t?Array.isArray(a)&&Array.isArray(a[0]):Array.isArray(a))?this[n]=i=[r(a[0]),r(a[1]),r(a[2])]:this[n]=i=[r(a),r(a),r(a)];for(var s=0;s<3;++s)if(i[s]!==o[s])return!0}return!1}e=e||{};var r,a=t.bind(this,!1,Number),o=t.bind(this,!1,Boolean),l=t.bind(this,!1,String),c=t.bind(this,!0,(function(e){if(Array.isArray(e)){if(3===e.length)return[+e[0],+e[1],+e[2],1];if(4===e.length)return[+e[0],+e[1],+e[2],+e[3]]}return[0,0,0,1]})),u=!1,d=!1;if("bounds"in e)for(var h=e.bounds,g=0;g<2;++g)for(var p=0;p<3;++p)h[g][p]!==this.bounds[g][p]&&(d=!0),this.bounds[g][p]=h[g][p];if("ticks"in e)for(r=e.ticks,u=!0,this.autoTicks=!1,g=0;g<3;++g)this.tickSpacing[g]=0;else a("tickSpacing")&&(this.autoTicks=!0,d=!0);if(this._firstInit&&("ticks"in e||"tickSpacing"in e||(this.autoTicks=!0),d=!0,u=!0,this._firstInit=!1),d&&this.autoTicks&&(r=s.create(this.bounds,this.tickSpacing),u=!0),u){for(g=0;g<3;++g)r[g].sort((function(e,t){return e.x-t.x}));s.equal(r,this.ticks)?u=!1:this.ticks=r}o("tickEnable"),l("tickFont")&&(u=!0),a("tickSize"),a("tickAngle"),a("tickPad"),c("tickColor");var f=l("labels");l("labelFont")&&(f=!0),o("labelEnable"),a("labelSize"),a("labelPad"),c("labelColor"),o("lineEnable"),o("lineMirror"),a("lineWidth"),c("lineColor"),o("lineTickEnable"),o("lineTickMirror"),a("lineTickLength"),a("lineTickWidth"),c("lineTickColor"),o("gridEnable"),a("gridWidth"),c("gridColor"),o("zeroEnable"),c("zeroLineColor"),a("zeroLineWidth"),o("backgroundEnable"),c("backgroundColor"),this._text?this._text&&(f||u)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=n(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&u&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=i(this.gl,this.bounds,this.ticks))};var g=[new h,new h,new h];function p(e,t,r,n,i){for(var a=e.primalOffset,o=e.primalMinor,s=e.mirrorOffset,l=e.mirrorMinor,c=n[t],u=0;u<3;++u)if(t!==u){var d=a,h=s,g=o,p=l;c&1<<u&&(d=s,h=a,g=l,p=o),d[u]=r[0][u],h[u]=r[1][u],i[u]>0?(g[u]=-1,p[u]=0):(g[u]=0,p[u]=1)}}var f=[0,0,0],m={model:l,view:l,projection:l,_ortho:!1};d.isOpaque=function(){return!0},d.isTransparent=function(){return!1},d.drawTransparent=function(e){};var y=[0,0,0],b=[0,0,0],v=[0,0,0];d.draw=function(e){e=e||m;for(var t=this.gl,r=e.model||l,n=e.view||l,i=e.projection||l,a=this.bounds,s=e._ortho||!1,u=o(r,n,i,a,s),d=u.cubeEdges,h=u.axis,x=n[12],B=n[13],I=n[14],F=n[15],A=(s?2:1)*this.pixelRatio*(i[3]*x+i[7]*B+i[11]*I+i[15]*F)/t.drawingBufferHeight,C=0;C<3;++C)this.lastCubeProps.cubeEdges[C]=d[C],this.lastCubeProps.axis[C]=h[C];var w=g;for(C=0;C<3;++C)p(g[C],C,this.bounds,d,h);t=this.gl;var Q,U,S,E=f;for(C=0;C<3;++C)this.backgroundEnable[C]?E[C]=h[C]:E[C]=0;for(this._background.draw(r,n,i,a,E,this.backgroundColor),this._lines.bind(r,n,i,this),C=0;C<3;++C){var L=[0,0,0];h[C]>0?L[C]=a[1][C]:L[C]=a[0][C];for(var _=0;_<2;++_){var T=(C+1+_)%3,R=(C+1+(1^_))%3;this.gridEnable[T]&&this._lines.drawGrid(T,R,this.bounds,L,this.gridColor[T],this.gridWidth[T]*this.pixelRatio)}for(_=0;_<2;++_)T=(C+1+_)%3,R=(C+1+(1^_))%3,this.zeroEnable[R]&&Math.min(a[0][R],a[1][R])<=0&&Math.max(a[0][R],a[1][R])>=0&&this._lines.drawZero(T,R,this.bounds,L,this.zeroLineColor[R],this.zeroLineWidth[R]*this.pixelRatio)}for(C=0;C<3;++C){this.lineEnable[C]&&this._lines.drawAxisLine(C,this.bounds,w[C].primalOffset,this.lineColor[C],this.lineWidth[C]*this.pixelRatio),this.lineMirror[C]&&this._lines.drawAxisLine(C,this.bounds,w[C].mirrorOffset,this.lineColor[C],this.lineWidth[C]*this.pixelRatio);var $=c(y,w[C].primalMinor),k=c(b,w[C].mirrorMinor),N=this.lineTickLength;for(_=0;_<3;++_){var G=A/r[5*_];$[_]*=N[_]*G,k[_]*=N[_]*G}this.lineTickEnable[C]&&this._lines.drawAxisTicks(C,w[C].primalOffset,$,this.lineTickColor[C],this.lineTickWidth[C]*this.pixelRatio),this.lineTickMirror[C]&&this._lines.drawAxisTicks(C,w[C].mirrorOffset,k,this.lineTickColor[C],this.lineTickWidth[C]*this.pixelRatio)}function M(e){(S=[0,0,0])[e]=1}function D(e,t,r){var n=(e+1)%3,i=(e+2)%3,a=t[n],o=t[i],s=r[n],l=r[i];a>0&&l>0||a>0&&l<0||a<0&&l>0||a<0&&l<0?M(n):(o>0&&s>0||o>0&&s<0||o<0&&s>0||o<0&&s<0)&&M(i)}for(this._lines.unbind(),this._text.bind(r,n,i,this.pixelRatio),C=0;C<3;++C){var V=w[C].primalMinor,H=w[C].mirrorMinor,X=c(v,w[C].primalOffset);for(_=0;_<3;++_)this.lineTickEnable[C]&&(X[_]+=A*V[_]*Math.max(this.lineTickLength[_],0)/r[5*_]);var O=[0,0,0];if(O[C]=1,this.tickEnable[C]){for(-3600===this.tickAngle[C]?(this.tickAngle[C]=0,this.tickAlign[C]="auto"):this.tickAlign[C]=-1,U=1,"auto"===(Q=[this.tickAlign[C],.5,U])[0]?Q[0]=0:Q[0]=parseInt(""+Q[0]),S=[0,0,0],D(C,V,H),_=0;_<3;++_)X[_]+=A*V[_]*this.tickPad[_]/r[5*_];this._text.drawTicks(C,this.tickSize[C],this.tickAngle[C],X,this.tickColor[C],O,S,Q)}if(this.labelEnable[C]){for(U=0,S=[0,0,0],this.labels[C].length>4&&(M(C),U=1),"auto"===(Q=[this.labelAlign[C],.5,U])[0]?Q[0]=0:Q[0]=parseInt(""+Q[0]),_=0;_<3;++_)X[_]+=A*V[_]*this.labelPad[_]/r[5*_];X[C]+=.5*(a[0][C]+a[1][C]),this._text.drawLabel(C,this.labelSize[C],this.labelAngle[C],X,this.labelColor[C],[0,0,0],S,Q)}}this._text.unbind()},d.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},1011:function(e,t,r){e.exports=function(e){for(var t=[],r=[],s=0,l=0;l<3;++l)for(var c=(l+1)%3,u=(l+2)%3,d=[0,0,0],h=[0,0,0],g=-1;g<=1;g+=2){r.push(s,s+2,s+1,s+1,s+2,s+3),d[l]=g,h[l]=g;for(var p=-1;p<=1;p+=2){d[c]=p;for(var f=-1;f<=1;f+=2)d[u]=f,t.push(d[0],d[1],d[2],h[0],h[1],h[2]),s+=1}var m=c;c=u,u=m}var y=n(e,new Float32Array(t)),b=n(e,new Uint16Array(r),e.ELEMENT_ARRAY_BUFFER),v=i(e,[{buffer:y,type:e.FLOAT,size:3,offset:0,stride:24},{buffer:y,type:e.FLOAT,size:3,offset:12,stride:24}],b),x=a(e);return x.attributes.position.location=0,x.attributes.normal.location=1,new o(e,y,v,x)};var n=r(5827),i=r(2944),a=r(1943).bg;function o(e,t,r,n){this.gl=e,this.buffer=t,this.vao=r,this.shader=n}var s=o.prototype;s.draw=function(e,t,r,n,i,a){for(var o=!1,s=0;s<3;++s)o=o||i[s];if(o){var l=this.gl;l.enable(l.POLYGON_OFFSET_FILL),l.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:e,view:t,projection:r,bounds:n,enable:i,colors:a},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),l.disable(l.POLYGON_OFFSET_FILL)}},s.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},2864:function(e,t,r){e.exports=function(e,t,r,a,g){i(s,t,e),i(s,r,s);for(var b=0,v=0;v<2;++v){u[2]=a[v][2];for(var x=0;x<2;++x){u[1]=a[x][1];for(var B=0;B<2;++B)u[0]=a[B][0],h(l[b],u,s),b+=1}}var I=-1;for(v=0;v<8;++v){for(var F=l[v][3],A=0;A<3;++A)c[v][A]=l[v][A]/F;g&&(c[v][2]*=-1),F<0&&(I<0||c[v][2]<c[I][2])&&(I=v)}if(I<0){I=0;for(var C=0;C<3;++C){for(var w=(C+2)%3,Q=(C+1)%3,U=-1,S=-1,E=0;E<2;++E){var L=(T=E<<C)+(E<<w)+(1-E<<Q),_=T+(1-E<<w)+(E<<Q);o(c[T],c[L],c[_],d)<0||(E?U=1:S=1)}if(U<0||S<0)S>U&&(I|=1<<C);else{for(E=0;E<2;++E){L=(T=E<<C)+(E<<w)+(1-E<<Q),_=T+(1-E<<w)+(E<<Q);var T,R=p([l[T],l[L],l[_],l[T+(1<<w)+(1<<Q)]]);E?U=R:S=R}S>U&&(I|=1<<C)}}}var $=7^I,k=-1;for(v=0;v<8;++v)v!==I&&v!==$&&(k<0||c[k][1]>c[v][1])&&(k=v);var N=-1;for(v=0;v<3;++v)(M=k^1<<v)!==I&&M!==$&&(N<0&&(N=M),(Q=c[M])[0]<c[N][0]&&(N=M));var G=-1;for(v=0;v<3;++v){var M;(M=k^1<<v)!==I&&M!==$&&M!==N&&(G<0&&(G=M),(Q=c[M])[0]>c[G][0]&&(G=M))}var D=f;D[0]=D[1]=D[2]=0,D[n.log2(N^k)]=k&N,D[n.log2(k^G)]=k&G;var V=7^G;V===I||V===$?(V=7^N,D[n.log2(G^V)]=V&G):D[n.log2(N^V)]=V&N;var H=m,X=I;for(C=0;C<3;++C)H[C]=X&1<<C?-1:1;return y};var n=r(2288),i=r(104),a=r(4670),o=r(417),s=new Array(16),l=new Array(8),c=new Array(8),u=new Array(3),d=[0,0,0];function h(e,t,r){for(var n=0;n<4;++n){e[n]=r[12+n];for(var i=0;i<3;++i)e[n]+=t[i]*r[4*i+n]}}!function(){for(var e=0;e<8;++e)l[e]=[1,1,1,1],c[e]=[1,1,1]}();var g=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function p(e){for(var t=0;t<g.length;++t)if((e=a.positive(e,g[t])).length<3)return 0;var r=e[0],n=r[0]/r[3],i=r[1]/r[3],o=0;for(t=1;t+1<e.length;++t){var s=e[t],l=e[t+1],c=s[0]/s[3]-n,u=s[1]/s[3]-i,d=l[0]/l[3]-n,h=l[1]/l[3]-i;o+=Math.abs(c*h-u*d)}return o}var f=[1,1,1],m=[0,0,0],y={cubeEdges:f,axis:m}},1681:function(e,t,r){e.exports=function(e,t,r){var o=[],s=[0,0,0],l=[0,0,0],c=[0,0,0],u=[0,0,0];o.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var d=0;d<3;++d){for(var h=o.length/3|0,p=0;p<r[d].length;++p){var f=+r[d][p].x;o.push(f,0,1,f,1,1,f,0,-1,f,0,-1,f,1,1,f,1,-1)}var m=o.length/3|0;s[d]=h,l[d]=m-h,h=o.length/3|0;for(var y=0;y<r[d].length;++y)f=+r[d][y].x,o.push(f,0,1,f,1,1,f,0,-1,f,0,-1,f,1,1,f,1,-1);m=o.length/3|0,c[d]=h,u[d]=m-h}var b=n(e,new Float32Array(o)),v=i(e,[{buffer:b,type:e.FLOAT,size:3,stride:0,offset:0}]),x=a(e);return x.attributes.position.location=0,new g(e,b,v,x,l,s,u,c)};var n=r(5827),i=r(2944),a=r(1943).j,o=[0,0,0],s=[0,0,0],l=[0,0,0],c=[0,0,0],u=[1,1];function d(e){return e[0]=e[1]=e[2]=0,e}function h(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function g(e,t,r,n,i,a,o,s){this.gl=e,this.vertBuffer=t,this.vao=r,this.shader=n,this.tickCount=i,this.tickOffset=a,this.gridCount=o,this.gridOffset=s}var p=g.prototype;p.bind=function(e,t,r){this.shader.bind(),this.shader.uniforms.model=e,this.shader.uniforms.view=t,this.shader.uniforms.projection=r,u[0]=this.gl.drawingBufferWidth,u[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=u,this.vao.bind()},p.unbind=function(){this.vao.unbind()},p.drawAxisLine=function(e,t,r,n,i){var a=d(s);this.shader.uniforms.majorAxis=s,a[e]=t[1][e]-t[0][e],this.shader.uniforms.minorAxis=a;var o,u=h(c,r);u[e]+=t[0][e],this.shader.uniforms.offset=u,this.shader.uniforms.lineWidth=i,this.shader.uniforms.color=n,(o=d(l))[(e+2)%3]=1,this.shader.uniforms.screenAxis=o,this.vao.draw(this.gl.TRIANGLES,6),(o=d(l))[(e+1)%3]=1,this.shader.uniforms.screenAxis=o,this.vao.draw(this.gl.TRIANGLES,6)},p.drawAxisTicks=function(e,t,r,n,i){if(this.tickCount[e]){var a=d(o);a[e]=1,this.shader.uniforms.majorAxis=a,this.shader.uniforms.offset=t,this.shader.uniforms.minorAxis=r,this.shader.uniforms.color=n,this.shader.uniforms.lineWidth=i;var s=d(l);s[e]=1,this.shader.uniforms.screenAxis=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e])}},p.drawGrid=function(e,t,r,n,i,a){if(this.gridCount[e]){var u=d(s);u[t]=r[1][t]-r[0][t],this.shader.uniforms.minorAxis=u;var g=h(c,n);g[t]+=r[0][t],this.shader.uniforms.offset=g;var p=d(o);p[e]=1,this.shader.uniforms.majorAxis=p;var f=d(l);f[e]=1,this.shader.uniforms.screenAxis=f,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,this.gridCount[e],this.gridOffset[e])}},p.drawZero=function(e,t,r,n,i,a){var o=d(s);this.shader.uniforms.majorAxis=o,o[e]=r[1][e]-r[0][e],this.shader.uniforms.minorAxis=o;var u=h(c,n);u[e]+=r[0][e],this.shader.uniforms.offset=u;var g=d(l);g[t]=1,this.shader.uniforms.screenAxis=g,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,6)},p.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1943:function(e,t,r){var n=r(6832),i=r(5158),a=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),o=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);t.j=function(e){return i(e,a,o,null,[{name:"position",type:"vec3"}])};var s=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),l=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);t.f=function(e){return i(e,s,l,null,[{name:"position",type:"vec3"}])};var c=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),u=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);t.bg=function(e){return i(e,c,u,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(e,t,r){e.exports=function(e,t,r,a,s,l){var u=n(e),d=i(e,[{buffer:u,size:3}]),h=o(e);h.attributes.position.location=0;var g=new c(e,h,u,d);return g.update(t,r,a,s,l),g};var n=r(5827),i=r(2944),a=r(875),o=r(1943).f,s=window||process.global||{},l=s.__TEXT_CACHE||{};function c(e,t,r,n){this.gl=e,this.shader=t,this.buffer=r,this.vao=n,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}s.__TEXT_CACHE={};var u=c.prototype,d=[0,0];u.bind=function(e,t,r,n){this.vao.bind(),this.shader.bind();var i=this.shader.uniforms;i.model=e,i.view=t,i.projection=r,i.pixelScale=n,d[0]=this.gl.drawingBufferWidth,d[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=d},u.unbind=function(){this.vao.unbind()},u.update=function(e,t,r,n,i){var o=[];function s(e,t,r,n,i,s){var c=l[r];c||(c=l[r]={});var u=c[t];u||(u=c[t]=function(e,t){try{return a(e,t)}catch(t){return console.warn('error vectorizing text:"'+e+'" error:',t),{cells:[],positions:[]}}}(t,{triangles:!0,font:r,textAlign:"center",textBaseline:"middle",lineSpacing:i,styletags:s}));for(var d=(n||12)/12,h=u.positions,g=u.cells,p=0,f=g.length;p<f;++p)for(var m=g[p],y=2;y>=0;--y){var b=h[m[y]];o.push(d*b[0],-d*b[1],e)}}for(var c=[0,0,0],u=[0,0,0],d=[0,0,0],h=[0,0,0],g={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},p=0;p<3;++p){d[p]=o.length/3|0,s(.5*(e[0][p]+e[1][p]),t[p],r[p],12,1.25,g),h[p]=(o.length/3|0)-d[p],c[p]=o.length/3|0;for(var f=0;f<n[p].length;++f)n[p][f].text&&s(n[p][f].x,n[p][f].text,n[p][f].font||i,n[p][f].fontSize||12,1.25,g);u[p]=(o.length/3|0)-c[p]}this.buffer.update(o),this.tickOffset=c,this.tickCount=u,this.labelOffset=d,this.labelCount=h},u.drawTicks=function(e,t,r,n,i,a,o,s){this.tickCount[e]&&(this.shader.uniforms.axis=a,this.shader.uniforms.color=i,this.shader.uniforms.angle=r,this.shader.uniforms.scale=t,this.shader.uniforms.offset=n,this.shader.uniforms.alignDir=o,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e]))},u.drawLabel=function(e,t,r,n,i,a,o,s){this.labelCount[e]&&(this.shader.uniforms.axis=a,this.shader.uniforms.color=i,this.shader.uniforms.angle=r,this.shader.uniforms.scale=t,this.shader.uniforms.offset=n,this.shader.uniforms.alignDir=o,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.labelCount[e],this.labelOffset[e]))},u.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},8468:function(e,t){function r(e,t){var r=e+"",n=r.indexOf("."),i=0;n>=0&&(i=r.length-n-1);var a=Math.pow(10,i),o=Math.round(e*t*a),s=o+"";if(s.indexOf("e")>=0)return s;var l=o/a,c=o%a;o<0?(l=0|-Math.ceil(l),c=0|-c):(l=0|Math.floor(l),c|=0);var u=""+l;if(o<0&&(u="-"+u),i){for(var d=""+c;d.length<i;)d="0"+d;return u+"."+d}return u}t.create=function(e,t){for(var n=[],i=0;i<3;++i){var a=[];e[0][i],e[1][i];for(var o=0;o*t[i]<=e[1][i];++o)a.push({x:o*t[i],text:r(t[i],o)});for(o=-1;o*t[i]>=e[0][i];--o)a.push({x:o*t[i],text:r(t[i],o)});n.push(a)}return n},t.equal=function(e,t){for(var r=0;r<3;++r){if(e[r].length!==t[r].length)return!1;for(var n=0;n<e[r].length;++n){var i=e[r][n],a=t[r][n];if(i.x!==a.x||i.text!==a.text||i.font!==a.font||i.fontColor!==a.fontColor||i.fontSize!==a.fontSize||i.dx!==a.dx||i.dy!==a.dy)return!1}}return!0}},2771:function(e,t,r){e.exports=function(e,t,r,l,d){var h=t.model||c,g=t.view||c,y=t.projection||c,b=t._ortho||!1,v=e.bounds,x=(d=d||a(h,g,y,v,b)).axis;o(u,g,h),o(u,y,u);for(var B=f,I=0;I<3;++I)B[I].lo=1/0,B[I].hi=-1/0,B[I].pixelsPerDataUnit=1/0;var F=n(s(u,u));s(u,u);for(var A=0;A<3;++A){var C=(A+1)%3,w=(A+2)%3,Q=m;e:for(I=0;I<2;++I){var U=[];if(x[A]<0!=!!I){Q[A]=v[I][A];for(var S=0;S<2;++S){Q[C]=v[S^I][C];for(var E=0;E<2;++E)Q[w]=v[E^S^I][w],U.push(Q.slice())}var L=b?5:4;for(S=L;S===L;++S){if(0===U.length)continue e;U=i.positive(U,F[S])}for(S=0;S<U.length;++S){w=U[S];var _=p(m,u,w,r,l);for(E=0;E<3;++E)B[E].lo=Math.min(B[E].lo,w[E]),B[E].hi=Math.max(B[E].hi,w[E]),E!==A&&(B[E].pixelsPerDataUnit=Math.min(B[E].pixelsPerDataUnit,Math.abs(_[E])))}}}}return B};var n=r(5795),i=r(4670),a=r(2864),o=r(104),s=r(2142),l=r(6342),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),u=new Float32Array(16);function d(e,t,r){this.lo=e,this.hi=t,this.pixelsPerDataUnit=r}var h=[0,0,0,1],g=[0,0,0,1];function p(e,t,r,n,i){for(var a=0;a<3;++a){for(var o=h,s=g,c=0;c<3;++c)s[c]=o[c]=r[c];s[3]=o[3]=1,s[a]+=1,l(s,s,t),s[3]<0&&(e[a]=1/0),o[a]-=1,l(o,o,t),o[3]<0&&(e[a]=1/0);var u=(o[0]/o[3]-s[0]/s[3])*n,d=(o[1]/o[3]-s[1]/s[3])*i;e[a]=.25*Math.sqrt(u*u+d*d)}return e}var f=[new d(1/0,-1/0,1/0),new d(1/0,-1/0,1/0),new d(1/0,-1/0,1/0)],m=[0,0,0]},5827:function(e,t,r){var n=r(5306),i=r(7498),a=r(5050),o=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function s(e,t,r,n,i){this.gl=e,this.type=t,this.handle=r,this.length=n,this.usage=i}var l=s.prototype;function c(e,t,r,n,i,a){var o=i.length*i.BYTES_PER_ELEMENT;if(a<0)return e.bufferData(t,i,n),o;if(o+a>r)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return e.bufferSubData(t,a,i),r}function u(e,t){for(var r=n.malloc(e.length,t),i=e.length,a=0;a<i;++a)r[a]=e[a];return r}l.bind=function(){this.gl.bindBuffer(this.type,this.handle)},l.unbind=function(){this.gl.bindBuffer(this.type,null)},l.dispose=function(){this.gl.deleteBuffer(this.handle)},l.update=function(e,t){if("number"!=typeof t&&(t=-1),this.bind(),"object"==typeof e&&void 0!==e.shape){var r=e.dtype;if(o.indexOf(r)<0&&(r="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(r=gl.getExtension("OES_element_index_uint")&&"uint16"!==r?"uint32":"uint16"),r===e.dtype&&function(e,t){for(var r=1,n=t.length-1;n>=0;--n){if(t[n]!==r)return!1;r*=e[n]}return!0}(e.shape,e.stride))0===e.offset&&e.data.length===e.shape[0]?this.length=c(this.gl,this.type,this.length,this.usage,e.data,t):this.length=c(this.gl,this.type,this.length,this.usage,e.data.subarray(e.offset,e.shape[0]),t);else{var s=n.malloc(e.size,r),l=a(s,e.shape);i.assign(l,e),this.length=c(this.gl,this.type,this.length,this.usage,t<0?s:s.subarray(0,e.size),t),n.free(s)}}else if(Array.isArray(e)){var d;d=this.type===this.gl.ELEMENT_ARRAY_BUFFER?u(e,"uint16"):u(e,"float32"),this.length=c(this.gl,this.type,this.length,this.usage,t<0?d:d.subarray(0,e.length),t),n.free(d)}else if("object"==typeof e&&"number"==typeof e.length)this.length=c(this.gl,this.type,this.length,this.usage,e,t);else{if("number"!=typeof e&&void 0!==e)throw new Error("gl-buffer: Invalid data type");if(t>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(e|=0)<=0&&(e=1),this.gl.bufferData(this.type,0|e,this.usage),this.length=e}},e.exports=function(e,t,r,n){if(r=r||e.ARRAY_BUFFER,n=n||e.DYNAMIC_DRAW,r!==e.ARRAY_BUFFER&&r!==e.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(n!==e.DYNAMIC_DRAW&&n!==e.STATIC_DRAW&&n!==e.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var i=e.createBuffer(),a=new s(e,r,i,0,n);return a.update(t),a}},1140:function(e,t,r){var n=r(2858);e.exports=function(e,t){var r=e.positions,i=e.vectors,a={positions:[],vertexIntensity:[],vertexIntensityBounds:e.vertexIntensityBounds,vectors:[],cells:[],coneOffset:e.coneOffset,colormap:e.colormap};if(0===e.positions.length)return t&&(t[0]=[0,0,0],t[1]=[0,0,0]),a;for(var o=0,s=1/0,l=-1/0,c=1/0,u=-1/0,d=1/0,h=-1/0,g=null,p=null,f=[],m=1/0,y=!1,b=0;b<r.length;b++){var v=r[b];s=Math.min(v[0],s),l=Math.max(v[0],l),c=Math.min(v[1],c),u=Math.max(v[1],u),d=Math.min(v[2],d),h=Math.max(v[2],h);var x=i[b];if(n.length(x)>o&&(o=n.length(x)),b){var B=2*n.distance(g,v)/(n.length(p)+n.length(x));B?(m=Math.min(m,B),y=!1):y=!0}y||(g=v,p=x),f.push(x)}var I=[s,c,d],F=[l,u,h];t&&(t[0]=I,t[1]=F),0===o&&(o=1);var A=1/o;isFinite(m)||(m=1),a.vectorScale=m;var C=e.coneSize||.5;e.absoluteConeSize&&(C=e.absoluteConeSize*A),a.coneScale=C,b=0;for(var w=0;b<r.length;b++)for(var Q=(v=r[b])[0],U=v[1],S=v[2],E=f[b],L=n.length(E)*A,_=0;_<8;_++){a.positions.push([Q,U,S,w++]),a.positions.push([Q,U,S,w++]),a.positions.push([Q,U,S,w++]),a.positions.push([Q,U,S,w++]),a.positions.push([Q,U,S,w++]),a.positions.push([Q,U,S,w++]),a.vectors.push(E),a.vectors.push(E),a.vectors.push(E),a.vectors.push(E),a.vectors.push(E),a.vectors.push(E),a.vertexIntensity.push(L,L,L),a.vertexIntensity.push(L,L,L);var T=a.positions.length;a.cells.push([T-6,T-5,T-4],[T-3,T-2,T-1])}return a};var i=r(7234);e.exports.createMesh=r(5028),e.exports.createConeMesh=function(t,r){return e.exports.createMesh(t,r,{shaders:i,traceType:"cone"})}},5028:function(e,t,r){var n=r(5158),i=r(5827),a=r(2944),o=r(8931),s=r(104),l=r(7437),c=r(5050),u=r(9156),d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function h(e,t,r,n,i,a,o,s,l,c,u){this.gl=e,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=t,this.dirty=!0,this.triShader=r,this.pickShader=n,this.trianglePositions=i,this.triangleVectors=a,this.triangleColors=s,this.triangleUVs=l,this.triangleIds=o,this.triangleVAO=c,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=u,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=d,this._view=d,this._projection=d,this._resolution=[1,1]}var g=h.prototype;function p(e,t){var r=n(e,t.meshShader.vertex,t.meshShader.fragment,null,t.meshShader.attributes);return r.attributes.position.location=0,r.attributes.color.location=2,r.attributes.uv.location=3,r.attributes.vector.location=4,r}function f(e,t){var r=n(e,t.pickShader.vertex,t.pickShader.fragment,null,t.pickShader.attributes);return r.attributes.position.location=0,r.attributes.id.location=1,r.attributes.vector.location=4,r}g.isOpaque=function(){return this.opacity>=1},g.isTransparent=function(){return this.opacity<1},g.pickSlots=1,g.setPickBase=function(e){this.pickId=e},g.update=function(e){e=e||{};var t=this.gl;this.dirty=!0,"lightPosition"in e&&(this.lightPosition=e.lightPosition),"opacity"in e&&(this.opacity=e.opacity),"ambient"in e&&(this.ambientLight=e.ambient),"diffuse"in e&&(this.diffuseLight=e.diffuse),"specular"in e&&(this.specularLight=e.specular),"roughness"in e&&(this.roughness=e.roughness),"fresnel"in e&&(this.fresnel=e.fresnel),void 0!==e.tubeScale&&(this.tubeScale=e.tubeScale),void 0!==e.vectorScale&&(this.vectorScale=e.vectorScale),void 0!==e.coneScale&&(this.coneScale=e.coneScale),void 0!==e.coneOffset&&(this.coneOffset=e.coneOffset),e.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=t.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=t.LINEAR,this.texture.setPixels(function(e){for(var t=u({colormap:e,nshades:256,format:"rgba"}),r=new Uint8Array(1024),n=0;n<256;++n){for(var i=t[n],a=0;a<3;++a)r[4*n+a]=i[a];r[4*n+3]=255*i[3]}return c(r,[256,256,4],[4,0,1])}(e.colormap)),this.texture.generateMipmap());var r=e.cells,n=e.positions,i=e.vectors;if(n&&r&&i){var a=[],o=[],s=[],l=[],d=[];this.cells=r,this.positions=n,this.vectors=i;var h=e.meshColor||[1,1,1,1],g=e.vertexIntensity,p=1/0,f=-1/0;if(g)if(e.vertexIntensityBounds)p=+e.vertexIntensityBounds[0],f=+e.vertexIntensityBounds[1];else for(var m=0;m<g.length;++m){var y=g[m];p=Math.min(p,y),f=Math.max(f,y)}else for(m=0;m<n.length;++m)y=n[m][2],p=Math.min(p,y),f=Math.max(f,y);for(this.intensity=g||function(e){for(var t=e.length,r=new Array(t),n=0;n<t;++n)r[n]=e[n][2];return r}(n),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],m=0;m<n.length;++m)for(var b=n[m],v=0;v<3;++v)!isNaN(b[v])&&isFinite(b[v])&&(this.bounds[0][v]=Math.min(this.bounds[0][v],b[v]),this.bounds[1][v]=Math.max(this.bounds[1][v],b[v]));var x=0;e:for(m=0;m<r.length;++m){var B=r[m];if(3===B.length){for(v=0;v<3;++v){b=n[F=B[v]];for(var I=0;I<3;++I)if(isNaN(b[I])||!isFinite(b[I]))continue e}for(v=0;v<3;++v){var F;b=n[F=B[2-v]],a.push(b[0],b[1],b[2],b[3]);var A=i[F];o.push(A[0],A[1],A[2],A[3]||0);var C,w=h;3===w.length?s.push(w[0],w[1],w[2],1):s.push(w[0],w[1],w[2],w[3]),C=g?[(g[F]-p)/(f-p),0]:[(b[2]-p)/(f-p),0],l.push(C[0],C[1]),d.push(m)}x+=1}}this.triangleCount=x,this.trianglePositions.update(a),this.triangleVectors.update(o),this.triangleColors.update(s),this.triangleUVs.update(l),this.triangleIds.update(new Uint32Array(d))}},g.drawTransparent=g.draw=function(e){e=e||{};for(var t=this.gl,r=e.model||d,n=e.view||d,i=e.projection||d,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);var c={model:r,view:n,projection:i,inverseModel:d.slice(),clipBounds:a,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};c.inverseModel=l(c.inverseModel,c.model),t.disable(t.CULL_FACE),this.texture.bind(0);var u=new Array(16);for(s(u,c.view,c.model),s(u,c.projection,u),l(u,u),o=0;o<3;++o)c.eyePosition[o]=u[12+o]/u[15];var h=u[15];for(o=0;o<3;++o)h+=this.lightPosition[o]*u[4*o+3];for(o=0;o<3;++o){for(var g=u[12+o],p=0;p<3;++p)g+=u[4*p+o]*this.lightPosition[p];c.lightPosition[o]=g/h}if(this.triangleCount>0){var f=this.triShader;f.bind(),f.uniforms=c,this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},g.drawPick=function(e){e=e||{};for(var t=this.gl,r=e.model||d,n=e.view||d,i=e.projection||d,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);this._model=[].slice.call(r),this._view=[].slice.call(n),this._projection=[].slice.call(i),this._resolution=[t.drawingBufferWidth,t.drawingBufferHeight];var s={model:r,view:n,projection:i,clipBounds:a,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},l=this.pickShader;l.bind(),l.uniforms=s,this.triangleCount>0&&(this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},g.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=e.value[0]+256*e.value[1]+65536*e.value[2],r=this.cells[t],n=this.positions[r[1]].slice(0,3),i={position:n,dataCoordinate:n,index:Math.floor(r[1]/48)};return"cone"===this.traceType?i.index=Math.floor(r[1]/48):"streamtube"===this.traceType&&(i.intensity=this.intensity[r[1]],i.velocity=this.vectors[r[1]].slice(0,3),i.divergence=this.vectors[r[1]][3],i.index=t),i},g.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},e.exports=function(e,t,r){var n=r.shaders;1===arguments.length&&(e=(t=e).gl);var s=p(e,n),l=f(e,n),u=o(e,c(new Uint8Array([255,255,255,255]),[1,1,4]));u.generateMipmap(),u.minFilter=e.LINEAR_MIPMAP_LINEAR,u.magFilter=e.LINEAR;var d=i(e),g=i(e),m=i(e),y=i(e),b=i(e),v=a(e,[{buffer:d,type:e.FLOAT,size:4},{buffer:b,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:m,type:e.FLOAT,size:4},{buffer:y,type:e.FLOAT,size:2},{buffer:g,type:e.FLOAT,size:4}]),x=new h(e,u,s,l,d,g,b,m,y,v,r.traceType||"cone");return x.update(t),x}},7234:function(e,t,r){var n=r(6832),i=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),o=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);t.meshShader={vertex:i,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},t.pickShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(e){e.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(e,t,r){var n=r(1950);e.exports=function(e){return n[e]}},3110:function(e,t,r){e.exports=function(e){var t=e.gl,r=n(t),o=i(t,[{buffer:r,type:t.FLOAT,size:3,offset:0,stride:40},{buffer:r,type:t.FLOAT,size:4,offset:12,stride:40},{buffer:r,type:t.FLOAT,size:3,offset:28,stride:40}]),l=a(t);l.attributes.position.location=0,l.attributes.color.location=1,l.attributes.offset.location=2;var c=new s(t,r,o,l);return c.update(e),c};var n=r(5827),i=r(2944),a=r(7667),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(e,t,r,n){this.gl=e,this.shader=n,this.buffer=t,this.vao=r,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var l=s.prototype;function c(e,t){for(var r=0;r<3;++r)e[0][r]=Math.min(e[0][r],t[r]),e[1][r]=Math.max(e[1][r],t[r])}l.isOpaque=function(){return!this.hasAlpha},l.isTransparent=function(){return this.hasAlpha},l.drawTransparent=l.draw=function(e){var t=this.gl,r=this.shader.uniforms;this.shader.bind();var n=r.view=e.view||o,i=r.projection=e.projection||o;r.model=e.model||o,r.clipBounds=this.clipBounds,r.opacity=this.opacity;var a=n[12],s=n[13],l=n[14],c=n[15],u=(e._ortho?2:1)*this.pixelRatio*(i[3]*a+i[7]*s+i[11]*l+i[15]*c)/t.drawingBufferHeight;this.vao.bind();for(var d=0;d<3;++d)t.lineWidth(this.lineWidth[d]*this.pixelRatio),r.capSize=this.capSize[d]*u,this.lineCount[d]&&t.drawArrays(t.LINES,this.lineOffset[d],this.lineCount[d]);this.vao.unbind()};var u=function(){for(var e=new Array(3),t=0;t<3;++t){for(var r=[],n=1;n<=2;++n)for(var i=-1;i<=1;i+=2){var a=[0,0,0];a[(n+t)%3]=i,r.push(a)}e[t]=r}return e}();function d(e,t,r,n){for(var i=u[n],a=0;a<i.length;++a){var o=i[a];e.push(t[0],t[1],t[2],r[0],r[1],r[2],r[3],o[0],o[1],o[2])}return i.length}l.update=function(e){"lineWidth"in(e=e||{})&&(this.lineWidth=e.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in e&&(this.capSize=e.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in e&&(this.opacity=+e.opacity,this.opacity<1&&(this.hasAlpha=!0));var t=e.color||[[0,0,0],[0,0,0],[0,0,0]],r=e.position,n=e.error;if(Array.isArray(t[0])||(t=[t,t,t]),r&&n){var i=[],a=r.length,o=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var s=0;s<3;++s){this.lineOffset[s]=o;e:for(var l=0;l<a;++l){for(var u=r[l],h=0;h<3;++h)if(isNaN(u[h])||!isFinite(u[h]))continue e;var g,p=n[l],f=t[s];if(Array.isArray(f[0])&&(f=t[l]),3===f.length?f=[f[0],f[1],f[2],1]:4===f.length&&(f=[f[0],f[1],f[2],f[3]],!this.hasAlpha&&f[3]<1&&(this.hasAlpha=!0)),!isNaN(p[0][s])&&!isNaN(p[1][s]))p[0][s]<0&&((g=u.slice())[s]+=p[0][s],i.push(u[0],u[1],u[2],f[0],f[1],f[2],f[3],0,0,0,g[0],g[1],g[2],f[0],f[1],f[2],f[3],0,0,0),c(this.bounds,g),o+=2+d(i,g,f,s)),p[1][s]>0&&((g=u.slice())[s]+=p[1][s],i.push(u[0],u[1],u[2],f[0],f[1],f[2],f[3],0,0,0,g[0],g[1],g[2],f[0],f[1],f[2],f[3],0,0,0),c(this.bounds,g),o+=2+d(i,g,f,s))}this.lineCount[s]=o-this.lineOffset[s]}this.buffer.update(i)}},l.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},7667:function(e,t,r){var n=r(6832),i=r(5158),a=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),o=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);e.exports=function(e){return i(e,a,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(e,t,r){var n=r(8931);e.exports=function(e,t,r,n){i||(i=e.FRAMEBUFFER_UNSUPPORTED,a=e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,o=e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,s=e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var c=e.getExtension("WEBGL_draw_buffers");if(!l&&c&&function(e,t){var r=e.getParameter(t.MAX_COLOR_ATTACHMENTS_WEBGL);l=new Array(r+1);for(var n=0;n<=r;++n){for(var i=new Array(r),a=0;a<n;++a)i[a]=e.COLOR_ATTACHMENT0+a;for(a=n;a<r;++a)i[a]=e.NONE;l[n]=i}}(e,c),Array.isArray(t)&&(n=r,r=0|t[1],t=0|t[0]),"number"!=typeof t)throw new Error("gl-fbo: Missing shape parameter");var u=e.getParameter(e.MAX_RENDERBUFFER_SIZE);if(t<0||t>u||r<0||r>u)throw new Error("gl-fbo: Parameters are too large for FBO");var d=1;if("color"in(n=n||{})){if((d=Math.max(0|n.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(d>1){if(!c)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(d>e.getParameter(c.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+d+" draw buffers")}}var h=e.UNSIGNED_BYTE,g=e.getExtension("OES_texture_float");if(n.float&&d>0){if(!g)throw new Error("gl-fbo: Context does not support floating point textures");h=e.FLOAT}else n.preferFloat&&d>0&&g&&(h=e.FLOAT);var f=!0;"depth"in n&&(f=!!n.depth);var m=!1;return"stencil"in n&&(m=!!n.stencil),new p(e,t,r,h,d,f,m,c)};var i,a,o,s,l=null;function c(e){return[e.getParameter(e.FRAMEBUFFER_BINDING),e.getParameter(e.RENDERBUFFER_BINDING),e.getParameter(e.TEXTURE_BINDING_2D)]}function u(e,t){e.bindFramebuffer(e.FRAMEBUFFER,t[0]),e.bindRenderbuffer(e.RENDERBUFFER,t[1]),e.bindTexture(e.TEXTURE_2D,t[2])}function d(e){switch(e){case i:throw new Error("gl-fbo: Framebuffer unsupported");case a:throw new Error("gl-fbo: Framebuffer incomplete attachment");case o:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case s:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function h(e,t,r,i,a,o){if(!i)return null;var s=n(e,t,r,a,i);return s.magFilter=e.NEAREST,s.minFilter=e.NEAREST,s.mipSamples=1,s.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,o,e.TEXTURE_2D,s.handle,0),s}function g(e,t,r,n,i){var a=e.createRenderbuffer();return e.bindRenderbuffer(e.RENDERBUFFER,a),e.renderbufferStorage(e.RENDERBUFFER,n,t,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,i,e.RENDERBUFFER,a),a}function p(e,t,r,n,i,a,o,s){this.gl=e,this._shape=[0|t,0|r],this._destroyed=!1,this._ext=s,this.color=new Array(i);for(var p=0;p<i;++p)this.color[p]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=n,this._useDepth=a,this._useStencil=o;var f=this,m=[0|t,0|r];Object.defineProperties(m,{0:{get:function(){return f._shape[0]},set:function(e){return f.width=e}},1:{get:function(){return f._shape[1]},set:function(e){return f.height=e}}}),this._shapeVector=m,function(e){var t=c(e.gl),r=e.gl,n=e.handle=r.createFramebuffer(),i=e._shape[0],a=e._shape[1],o=e.color.length,s=e._ext,p=e._useStencil,f=e._useDepth,m=e._colorType;r.bindFramebuffer(r.FRAMEBUFFER,n);for(var y=0;y<o;++y)e.color[y]=h(r,i,a,m,r.RGBA,r.COLOR_ATTACHMENT0+y);0===o?(e._color_rb=g(r,i,a,r.RGBA4,r.COLOR_ATTACHMENT0),s&&s.drawBuffersWEBGL(l[0])):o>1&&s.drawBuffersWEBGL(l[o]);var b=r.getExtension("WEBGL_depth_texture");b?p?e.depth=h(r,i,a,b.UNSIGNED_INT_24_8_WEBGL,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):f&&(e.depth=h(r,i,a,r.UNSIGNED_SHORT,r.DEPTH_COMPONENT,r.DEPTH_ATTACHMENT)):f&&p?e._depth_rb=g(r,i,a,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):f?e._depth_rb=g(r,i,a,r.DEPTH_COMPONENT16,r.DEPTH_ATTACHMENT):p&&(e._depth_rb=g(r,i,a,r.STENCIL_INDEX,r.STENCIL_ATTACHMENT));var v=r.checkFramebufferStatus(r.FRAMEBUFFER);if(v!==r.FRAMEBUFFER_COMPLETE){for(e._destroyed=!0,r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteFramebuffer(e.handle),e.handle=null,e.depth&&(e.depth.dispose(),e.depth=null),e._depth_rb&&(r.deleteRenderbuffer(e._depth_rb),e._depth_rb=null),y=0;y<e.color.length;++y)e.color[y].dispose(),e.color[y]=null;e._color_rb&&(r.deleteRenderbuffer(e._color_rb),e._color_rb=null),u(r,t),d(v)}u(r,t)}(this)}var f=p.prototype;function m(e,t,r){if(e._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(e._shape[0]!==t||e._shape[1]!==r){var n=e.gl,i=n.getParameter(n.MAX_RENDERBUFFER_SIZE);if(t<0||t>i||r<0||r>i)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");e._shape[0]=t,e._shape[1]=r;for(var a=c(n),o=0;o<e.color.length;++o)e.color[o].shape=e._shape;e._color_rb&&(n.bindRenderbuffer(n.RENDERBUFFER,e._color_rb),n.renderbufferStorage(n.RENDERBUFFER,n.RGBA4,e._shape[0],e._shape[1])),e.depth&&(e.depth.shape=e._shape),e._depth_rb&&(n.bindRenderbuffer(n.RENDERBUFFER,e._depth_rb),e._useDepth&&e._useStencil?n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e._shape[0],e._shape[1]):e._useDepth?n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e._shape[0],e._shape[1]):e._useStencil&&n.renderbufferStorage(n.RENDERBUFFER,n.STENCIL_INDEX,e._shape[0],e._shape[1])),n.bindFramebuffer(n.FRAMEBUFFER,e.handle);var s=n.checkFramebufferStatus(n.FRAMEBUFFER);s!==n.FRAMEBUFFER_COMPLETE&&(e.dispose(),u(n,a),d(s)),u(n,a)}}Object.defineProperties(f,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(e){if(Array.isArray(e)||(e=[0|e,0|e]),2!==e.length)throw new Error("gl-fbo: Shape vector must be length 2");var t=0|e[0],r=0|e[1];return m(this,t,r),[t,r]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(e){return m(this,e|=0,this._shape[1]),e},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(e){return e|=0,m(this,this._shape[0],e),e},enumerable:!1}}),f.bind=function(){if(!this._destroyed){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.handle),e.viewport(0,0,this._shape[0],this._shape[1])}},f.dispose=function(){if(!this._destroyed){this._destroyed=!0;var e=this.gl;e.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(e.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var t=0;t<this.color.length;++t)this.color[t].dispose(),this.color[t]=null;this._color_rb&&(e.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},3530:function(e,t,r){var n=r(8974).sprintf,i=r(6603),a=r(9365),o=r(8008);e.exports=function(e,t,r){var s=a(t)||"of unknown name (see npm glsl-shader-name)",l="unknown type";void 0!==r&&(l=r===i.FRAGMENT_SHADER?"fragment":"vertex");for(var c=n("Error compiling %s shader %s:\n",l,s),u=n("%s%s",c,e),d=e.split("\n"),h={},g=0;g<d.length;g++){var p=d[g];if(""!==p&&"\0"!==p){var f=parseInt(p.split(":")[2]);if(isNaN(f))throw new Error(n("Could not parse error: %s",p));h[f]=p}}var m=o(t).split("\n");for(g=0;g<m.length;g++)if(h[g+3]||h[g+2]||h[g+1]){var y=m[g];if(c+=y+"\n",h[g+1]){var b=h[g+1];b=b.substr(b.split(":",3).join(":").length+1).trim(),c+=n("^^^ %s\n\n",b)}}return{long:c.trim(),short:u.trim()}}},6386:function(e,t,r){e.exports=function(e,t){var r=e.gl,n=o(r,l.vertex,l.fragment),i=o(r,l.pickVertex,l.pickFragment),a=s(r),u=s(r),d=s(r),h=s(r),g=new c(e,n,i,a,u,d,h);return g.update(t),e.addObject(g),g};var n=r(5070),i=r(9560),a=r(5306),o=r(5158),s=r(5827),l=r(1292);function c(e,t,r,n,i,a,o){this.plot=e,this.shader=t,this.pickShader=r,this.positionBuffer=n,this.weightBuffer=i,this.colorBuffer=a,this.idBuffer=o,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var u,d=c.prototype,h=[0,0,1,0,0,1,1,0,1,1,0,1];d.draw=(u=[1,0,0,0,1,0,0,0,1],function(){var e=this.plot,t=this.shader,r=this.bounds,n=this.numVertices;if(!(n<=0)){var i=e.gl,a=e.dataBox,o=r[2]-r[0],s=r[3]-r[1],l=a[2]-a[0],c=a[3]-a[1];u[0]=2*o/l,u[4]=2*s/c,u[6]=2*(r[0]-a[0])/l-1,u[7]=2*(r[1]-a[1])/c-1,t.bind();var d=t.uniforms;d.viewTransform=u,d.shape=this.shape;var h=t.attributes;this.positionBuffer.bind(),h.position.pointer(),this.weightBuffer.bind(),h.weight.pointer(i.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),h.color.pointer(i.UNSIGNED_BYTE,!0),i.drawArrays(i.TRIANGLES,0,n)}}),d.drawPick=function(){var e=[1,0,0,0,1,0,0,0,1],t=[0,0,0,0];return function(r){var n=this.plot,i=this.pickShader,a=this.bounds,o=this.numVertices;if(!(o<=0)){var s=n.gl,l=n.dataBox,c=a[2]-a[0],u=a[3]-a[1],d=l[2]-l[0],h=l[3]-l[1];e[0]=2*c/d,e[4]=2*u/h,e[6]=2*(a[0]-l[0])/d-1,e[7]=2*(a[1]-l[1])/h-1;for(var g=0;g<4;++g)t[g]=r>>8*g&255;this.pickOffset=r,i.bind();var p=i.uniforms;p.viewTransform=e,p.pickOffset=t,p.shape=this.shape;var f=i.attributes;return this.positionBuffer.bind(),f.position.pointer(),this.weightBuffer.bind(),f.weight.pointer(s.UNSIGNED_BYTE,!1),this.idBuffer.bind(),f.pickId.pointer(s.UNSIGNED_BYTE,!1),s.drawArrays(s.TRIANGLES,0,o),r+this.shape[0]*this.shape[1]}}}(),d.pick=function(e,t,r){var n=this.pickOffset,i=this.shape[0]*this.shape[1];if(r<n||r>=n+i)return null;var a=r-n,o=this.xData,s=this.yData;return{object:this,pointId:a,dataCoord:[o[a%this.shape[0]],s[a/this.shape[0]|0]]}},d.update=function(e){var t=(e=e||{}).shape||[0,0],r=e.x||i(t[0]),o=e.y||i(t[1]),s=e.z||new Float32Array(t[0]*t[1]),l=!1!==e.zsmooth;this.xData=r,this.yData=o;var c,u,d,g,p=e.colorLevels||[0],f=e.colorValues||[0,0,0,1],m=p.length,y=this.bounds;l?(c=y[0]=r[0],u=y[1]=o[0],d=y[2]=r[r.length-1],g=y[3]=o[o.length-1]):(c=y[0]=r[0]+(r[1]-r[0])/2,u=y[1]=o[0]+(o[1]-o[0])/2,d=y[2]=r[r.length-1]+(r[r.length-1]-r[r.length-2])/2,g=y[3]=o[o.length-1]+(o[o.length-1]-o[o.length-2])/2);var b=1/(d-c),v=1/(g-u),x=t[0],B=t[1];this.shape=[x,B];var I=(l?(x-1)*(B-1):x*B)*(h.length>>>1);this.numVertices=I;for(var F=a.mallocUint8(4*I),A=a.mallocFloat32(2*I),C=a.mallocUint8(2*I),w=a.mallocUint32(I),Q=0,U=l?x-1:x,S=l?B-1:B,E=0;E<S;++E){var L,_;l?(L=v*(o[E]-u),_=v*(o[E+1]-u)):(L=E<B-1?v*(o[E]-(o[E+1]-o[E])/2-u):v*(o[E]-(o[E]-o[E-1])/2-u),_=E<B-1?v*(o[E]+(o[E+1]-o[E])/2-u):v*(o[E]+(o[E]-o[E-1])/2-u));for(var T=0;T<U;++T){var R,$;l?(R=b*(r[T]-c),$=b*(r[T+1]-c)):(R=T<x-1?b*(r[T]-(r[T+1]-r[T])/2-c):b*(r[T]-(r[T]-r[T-1])/2-c),$=T<x-1?b*(r[T]+(r[T+1]-r[T])/2-c):b*(r[T]+(r[T]-r[T-1])/2-c));for(var k=0;k<h.length;k+=2){var N,G,M,D,V=h[k],H=h[k+1],X=s[l?(E+H)*x+(T+V):E*x+T],O=n.le(p,X);if(O<0)N=f[0],G=f[1],M=f[2],D=f[3];else if(O===m-1)N=f[4*m-4],G=f[4*m-3],M=f[4*m-2],D=f[4*m-1];else{var Z=(X-p[O])/(p[O+1]-p[O]),W=1-Z,Y=4*O,P=4*(O+1);N=W*f[Y]+Z*f[P],G=W*f[Y+1]+Z*f[P+1],M=W*f[Y+2]+Z*f[P+2],D=W*f[Y+3]+Z*f[P+3]}F[4*Q]=255*N,F[4*Q+1]=255*G,F[4*Q+2]=255*M,F[4*Q+3]=255*D,A[2*Q]=.5*R+.5*$,A[2*Q+1]=.5*L+.5*_,C[2*Q]=V,C[2*Q+1]=H,w[Q]=E*x+T,Q+=1}}}this.positionBuffer.update(A),this.weightBuffer.update(C),this.colorBuffer.update(F),this.idBuffer.update(w),a.free(A),a.free(F),a.free(C),a.free(w)},d.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},1292:function(e,t,r){var n=r(6832);e.exports={fragment:n(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:n(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},248:function(e,t,r){var n=r(6832),i=r(5158),a=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),o=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),l=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];t.createShader=function(e){return i(e,a,o,null,l)},t.createPickShader=function(e){return i(e,a,s,null,l)}},6086:function(e,t,r){e.exports=function(e){var t=e.gl||e.scene&&e.scene.gl,r=d(t);r.attributes.position.location=0,r.attributes.nextPosition.location=1,r.attributes.arcLength.location=2,r.attributes.lineWidth.location=3,r.attributes.color.location=4;var o=h(t);o.attributes.position.location=0,o.attributes.nextPosition.location=1,o.attributes.arcLength.location=2,o.attributes.lineWidth.location=3,o.attributes.color.location=4;for(var s=n(t),l=i(t,[{buffer:s,size:3,offset:0,stride:48},{buffer:s,size:3,offset:12,stride:48},{buffer:s,size:1,offset:24,stride:48},{buffer:s,size:1,offset:28,stride:48},{buffer:s,size:4,offset:32,stride:48}]),u=c(new Array(1024),[256,1,4]),g=0;g<1024;++g)u.data[g]=255;var p=a(t,u);p.wrap=t.REPEAT;var f=new y(t,r,o,s,l,p);return f.update(e),f};var n=r(5827),i=r(2944),a=r(8931),o=new Uint8Array(4),s=new Float32Array(o.buffer),l=r(5070),c=r(5050),u=r(248),d=u.createShader,h=u.createPickShader,g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(e,t){for(var r=0,n=0;n<3;++n){var i=e[n]-t[n];r+=i*i}return Math.sqrt(r)}function f(e){for(var t=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],r=0;r<3;++r)t[0][r]=Math.max(e[0][r],t[0][r]),t[1][r]=Math.min(e[1][r],t[1][r]);return t}function m(e,t,r,n){this.arcLength=e,this.position=t,this.index=r,this.dataCoordinate=n}function y(e,t,r,n,i,a){this.gl=e,this.shader=t,this.pickShader=r,this.buffer=n,this.vao=i,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=a,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var b=y.prototype;b.isTransparent=function(){return this.hasAlpha},b.isOpaque=function(){return!this.hasAlpha},b.pickSlots=1,b.setPickBase=function(e){this.pickId=e},b.drawTransparent=b.draw=function(e){if(this.vertexCount){var t=this.gl,r=this.shader,n=this.vao;r.bind(),r.uniforms={model:e.model||g,view:e.view||g,projection:e.projection||g,clipBounds:f(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio},n.bind(),n.draw(t.TRIANGLE_STRIP,this.vertexCount),n.unbind()}},b.drawPick=function(e){if(this.vertexCount){var t=this.gl,r=this.pickShader,n=this.vao;r.bind(),r.uniforms={model:e.model||g,view:e.view||g,projection:e.projection||g,pickId:this.pickId,clipBounds:f(this.clipBounds),screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio},n.bind(),n.draw(t.TRIANGLE_STRIP,this.vertexCount),n.unbind()}},b.update=function(e){var t,r;this.dirty=!0;var n=!!e.connectGaps;"dashScale"in e&&(this.dashScale=e.dashScale),this.hasAlpha=!1,"opacity"in e&&(this.opacity=+e.opacity,this.opacity<1&&(this.hasAlpha=!0));var i=[],a=[],o=[],s=0,u=0,d=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],h=e.position||e.positions;if(h){var g=e.color||e.colors||[0,0,0,1],f=e.lineWidth||1,m=!1;e:for(t=1;t<h.length;++t){var y,b,v,x=h[t-1],B=h[t];for(a.push(s),o.push(x.slice()),r=0;r<3;++r){if(isNaN(x[r])||isNaN(B[r])||!isFinite(x[r])||!isFinite(B[r])){if(!n&&i.length>0){for(var I=0;I<24;++I)i.push(i[i.length-12]);u+=2,m=!0}continue e}d[0][r]=Math.min(d[0][r],x[r],B[r]),d[1][r]=Math.max(d[1][r],x[r],B[r])}Array.isArray(g[0])?(y=g.length>t-1?g[t-1]:g.length>0?g[g.length-1]:[0,0,0,1],b=g.length>t?g[t]:g.length>0?g[g.length-1]:[0,0,0,1]):y=b=g,3===y.length&&(y=[y[0],y[1],y[2],1]),3===b.length&&(b=[b[0],b[1],b[2],1]),!this.hasAlpha&&y[3]<1&&(this.hasAlpha=!0),v=Array.isArray(f)?f.length>t-1?f[t-1]:f.length>0?f[f.length-1]:[0,0,0,1]:f;var F=s;if(s+=p(x,B),m){for(r=0;r<2;++r)i.push(x[0],x[1],x[2],B[0],B[1],B[2],F,v,y[0],y[1],y[2],y[3]);u+=2,m=!1}i.push(x[0],x[1],x[2],B[0],B[1],B[2],F,v,y[0],y[1],y[2],y[3],x[0],x[1],x[2],B[0],B[1],B[2],F,-v,y[0],y[1],y[2],y[3],B[0],B[1],B[2],x[0],x[1],x[2],s,-v,b[0],b[1],b[2],b[3],B[0],B[1],B[2],x[0],x[1],x[2],s,v,b[0],b[1],b[2],b[3]),u+=4}}if(this.buffer.update(i),a.push(s),o.push(h[h.length-1].slice()),this.bounds=d,this.vertexCount=u,this.points=o,this.arcLength=a,"dashes"in e){var A=e.dashes.slice();for(A.unshift(0),t=1;t<A.length;++t)A[t]=A[t-1]+A[t];var C=c(new Array(1024),[256,1,4]);for(t=0;t<256;++t){for(r=0;r<4;++r)C.set(t,0,r,0);1&l.le(A,A[A.length-1]*t/255)?C.set(t,0,0,0):C.set(t,0,0,255)}this.texture.setPixels(C)}},b.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},b.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=function(e,t,r,n){return o[0]=n,o[1]=r,o[2]=t,o[3]=e,s[0]}(e.value[0],e.value[1],e.value[2],0),r=l.le(this.arcLength,t);if(r<0)return null;if(r===this.arcLength.length-1)return new m(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),r);for(var n=this.points[r],i=this.points[Math.min(r+1,this.points.length-1)],a=(t-this.arcLength[r])/(this.arcLength[r+1]-this.arcLength[r]),c=1-a,u=[0,0,0],d=0;d<3;++d)u[d]=c*n[d]+a*i[d];var h=Math.min(a<.5?r:r+1,this.points.length-1);return new m(t,u,h,this.points[h])}},7332:function(e){e.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},9823:function(e){e.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},7787:function(e){e.exports=function(e){var t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],g=e[12],p=e[13],f=e[14],m=e[15];return(t*o-r*a)*(d*m-h*f)-(t*s-n*a)*(u*m-h*p)+(t*l-i*a)*(u*f-d*p)+(r*s-n*o)*(c*m-h*g)-(r*l-i*o)*(c*f-d*g)+(n*l-i*s)*(c*p-u*g)}},5950:function(e){e.exports=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r+r,s=n+n,l=i+i,c=r*o,u=n*o,d=n*s,h=i*o,g=i*s,p=i*l,f=a*o,m=a*s,y=a*l;return e[0]=1-d-p,e[1]=u+y,e[2]=h-m,e[3]=0,e[4]=u-y,e[5]=1-c-p,e[6]=g+f,e[7]=0,e[8]=h+m,e[9]=g-f,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},7280:function(e){e.exports=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=n+n,l=i+i,c=a+a,u=n*s,d=n*l,h=n*c,g=i*l,p=i*c,f=a*c,m=o*s,y=o*l,b=o*c;return e[0]=1-(g+f),e[1]=d+b,e[2]=h-y,e[3]=0,e[4]=d-b,e[5]=1-(u+f),e[6]=p+m,e[7]=0,e[8]=h+y,e[9]=p-m,e[10]=1-(u+g),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}},9947:function(e){e.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},7437:function(e){e.exports=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],g=t[11],p=t[12],f=t[13],m=t[14],y=t[15],b=r*s-n*o,v=r*l-i*o,x=r*c-a*o,B=n*l-i*s,I=n*c-a*s,F=i*c-a*l,A=u*f-d*p,C=u*m-h*p,w=u*y-g*p,Q=d*m-h*f,U=d*y-g*f,S=h*y-g*m,E=b*S-v*U+x*Q+B*w-I*C+F*A;return E?(E=1/E,e[0]=(s*S-l*U+c*Q)*E,e[1]=(i*U-n*S-a*Q)*E,e[2]=(f*F-m*I+y*B)*E,e[3]=(h*I-d*F-g*B)*E,e[4]=(l*w-o*S-c*C)*E,e[5]=(r*S-i*w+a*C)*E,e[6]=(m*x-p*F-y*v)*E,e[7]=(u*F-h*x+g*v)*E,e[8]=(o*U-s*w+c*A)*E,e[9]=(n*w-r*U-a*A)*E,e[10]=(p*I-f*x+y*b)*E,e[11]=(d*x-u*I-g*b)*E,e[12]=(s*C-o*Q-l*A)*E,e[13]=(r*Q-n*C+i*A)*E,e[14]=(f*v-p*B-m*b)*E,e[15]=(u*B-d*v+h*b)*E,e):null}},3012:function(e,t,r){var n=r(9947);e.exports=function(e,t,r,i){var a,o,s,l,c,u,d,h,g,p,f=t[0],m=t[1],y=t[2],b=i[0],v=i[1],x=i[2],B=r[0],I=r[1],F=r[2];return Math.abs(f-B)<1e-6&&Math.abs(m-I)<1e-6&&Math.abs(y-F)<1e-6?n(e):(d=f-B,h=m-I,g=y-F,p=1/Math.sqrt(d*d+h*h+g*g),a=v*(g*=p)-x*(h*=p),o=x*(d*=p)-b*g,s=b*h-v*d,(p=Math.sqrt(a*a+o*o+s*s))?(a*=p=1/p,o*=p,s*=p):(a=0,o=0,s=0),l=h*s-g*o,c=g*a-d*s,u=d*o-h*a,(p=Math.sqrt(l*l+c*c+u*u))?(l*=p=1/p,c*=p,u*=p):(l=0,c=0,u=0),e[0]=a,e[1]=l,e[2]=d,e[3]=0,e[4]=o,e[5]=c,e[6]=h,e[7]=0,e[8]=s,e[9]=u,e[10]=g,e[11]=0,e[12]=-(a*f+o*m+s*y),e[13]=-(l*f+c*m+u*y),e[14]=-(d*f+h*m+g*y),e[15]=1,e)}},104:function(e){e.exports=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],g=t[10],p=t[11],f=t[12],m=t[13],y=t[14],b=t[15],v=r[0],x=r[1],B=r[2],I=r[3];return e[0]=v*n+x*s+B*d+I*f,e[1]=v*i+x*l+B*h+I*m,e[2]=v*a+x*c+B*g+I*y,e[3]=v*o+x*u+B*p+I*b,v=r[4],x=r[5],B=r[6],I=r[7],e[4]=v*n+x*s+B*d+I*f,e[5]=v*i+x*l+B*h+I*m,e[6]=v*a+x*c+B*g+I*y,e[7]=v*o+x*u+B*p+I*b,v=r[8],x=r[9],B=r[10],I=r[11],e[8]=v*n+x*s+B*d+I*f,e[9]=v*i+x*l+B*h+I*m,e[10]=v*a+x*c+B*g+I*y,e[11]=v*o+x*u+B*p+I*b,v=r[12],x=r[13],B=r[14],I=r[15],e[12]=v*n+x*s+B*d+I*f,e[13]=v*i+x*l+B*h+I*m,e[14]=v*a+x*c+B*g+I*y,e[15]=v*o+x*u+B*p+I*b,e}},5268:function(e){e.exports=function(e,t,r,n,i,a,o){var s=1/(t-r),l=1/(n-i),c=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*l,e[14]=(o+a)*c,e[15]=1,e}},1120:function(e){e.exports=function(e,t,r,n,i){var a=1/Math.tan(t/2),o=1/(n-i);return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+n)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*n*o,e[15]=0,e}},4422:function(e){e.exports=function(e,t,r,n){var i,a,o,s,l,c,u,d,h,g,p,f,m,y,b,v,x,B,I,F,A,C,w,Q,U=n[0],S=n[1],E=n[2],L=Math.sqrt(U*U+S*S+E*E);return Math.abs(L)<1e-6?null:(U*=L=1/L,S*=L,E*=L,i=Math.sin(r),a=Math.cos(r),o=1-a,s=t[0],l=t[1],c=t[2],u=t[3],d=t[4],h=t[5],g=t[6],p=t[7],f=t[8],m=t[9],y=t[10],b=t[11],v=U*U*o+a,x=S*U*o+E*i,B=E*U*o-S*i,I=U*S*o-E*i,F=S*S*o+a,A=E*S*o+U*i,C=U*E*o+S*i,w=S*E*o-U*i,Q=E*E*o+a,e[0]=s*v+d*x+f*B,e[1]=l*v+h*x+m*B,e[2]=c*v+g*x+y*B,e[3]=u*v+p*x+b*B,e[4]=s*I+d*F+f*A,e[5]=l*I+h*F+m*A,e[6]=c*I+g*F+y*A,e[7]=u*I+p*F+b*A,e[8]=s*C+d*w+f*Q,e[9]=l*C+h*w+m*Q,e[10]=c*C+g*w+y*Q,e[11]=u*C+p*w+b*Q,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}},6109:function(e){e.exports=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+c*n,e[5]=o*i+u*n,e[6]=s*i+d*n,e[7]=l*i+h*n,e[8]=c*i-a*n,e[9]=u*i-o*n,e[10]=d*i-s*n,e[11]=h*i-l*n,e}},7115:function(e){e.exports=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],s=t[2],l=t[3],c=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-c*n,e[1]=o*i-u*n,e[2]=s*i-d*n,e[3]=l*i-h*n,e[8]=a*n+c*i,e[9]=o*n+u*i,e[10]=s*n+d*i,e[11]=l*n+h*i,e}},5240:function(e){e.exports=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+c*n,e[1]=o*i+u*n,e[2]=s*i+d*n,e[3]=l*i+h*n,e[4]=c*i-a*n,e[5]=u*i-o*n,e[6]=d*i-s*n,e[7]=h*i-l*n,e}},3668:function(e){e.exports=function(e,t,r){var n=r[0],i=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},998:function(e){e.exports=function(e,t,r){var n,i,a,o,s,l,c,u,d,h,g,p,f=r[0],m=r[1],y=r[2];return t===e?(e[12]=t[0]*f+t[4]*m+t[8]*y+t[12],e[13]=t[1]*f+t[5]*m+t[9]*y+t[13],e[14]=t[2]*f+t[6]*m+t[10]*y+t[14],e[15]=t[3]*f+t[7]*m+t[11]*y+t[15]):(n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],g=t[10],p=t[11],e[0]=n,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=h,e[10]=g,e[11]=p,e[12]=n*f+s*m+d*y+t[12],e[13]=i*f+l*m+h*y+t[13],e[14]=a*f+c*m+g*y+t[14],e[15]=o*f+u*m+p*y+t[15]),e}},2142:function(e){e.exports=function(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}},4340:function(e,t,r){var n=r(957),i=r(7309);function a(e,t){for(var r=[0,0,0,0],n=0;n<4;++n)for(var i=0;i<4;++i)r[i]+=e[4*n+i]*t[n];return r}function o(e,t,r,n,i){for(var o=a(n,a(r,a(t,[e[0],e[1],e[2],1]))),s=0;s<3;++s)o[s]/=o[3];return[.5*i[0]*(1+o[0]),.5*i[1]*(1-o[1])]}function s(e,t){for(var r=[0,0,0],n=0;n<e.length;++n)for(var i=e[n],a=t[n],o=0;o<3;++o)r[o]+=a*i[o];return r}e.exports=function(e,t,r,a,l,c){if(1===e.length)return[0,e[0].slice()];for(var u=new Array(e.length),d=0;d<e.length;++d)u[d]=o(e[d],r,a,l,c);var h=0,g=1/0;for(d=0;d<u.length;++d){for(var p=0,f=0;f<2;++f)p+=Math.pow(u[d][f]-t[f],2);p<g&&(g=p,h=d)}var m=function(e,t){if(2===e.length){for(var r=0,a=0,o=0;o<2;++o)r+=Math.pow(t[o]-e[0][o],2),a+=Math.pow(t[o]-e[1][o],2);return(r=Math.sqrt(r))+(a=Math.sqrt(a))<1e-6?[1,0]:[a/(r+a),r/(a+r)]}if(3===e.length){var s=[0,0];return i(e[0],e[1],e[2],t,s),n(e,s)}return[]}(u,t),y=0;for(d=0;d<3;++d){if(m[d]<-.001||m[d]>1.0001)return null;y+=m[d]}return Math.abs(y-1)>.001?null:[h,s(e,m),m]}},2056:function(e,t,r){var n=r(6832),i=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),a=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),o=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),l=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),c=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),u=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),d=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),h=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),g=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),p=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);t.meshShader={vertex:i,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},t.wireShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},t.pointShader={vertex:l,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},t.pickShader={vertex:u,fragment:d,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},t.pointPickShader={vertex:h,fragment:d,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},t.contourShader={vertex:g,fragment:p,attributes:[{name:"position",type:"vec3"}]}},8116:function(e,t,r){var n=r(5158),i=r(5827),a=r(2944),o=r(8931),s=r(115),l=r(104),c=r(7437),u=r(5050),d=r(9156),h=r(7212),g=r(5306),p=r(2056),f=r(4340),m=p.meshShader,y=p.wireShader,b=p.pointShader,v=p.pickShader,x=p.pointPickShader,B=p.contourShader,I=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function F(e,t,r,n,i,a,o,s,l,c,u,d,h,g,p,f,m,y,b,v,x,B,F,A,C,w,Q){this.gl=e,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=t,this.dirty=!0,this.triShader=r,this.lineShader=n,this.pointShader=i,this.pickShader=a,this.pointPickShader=o,this.contourShader=s,this.trianglePositions=l,this.triangleColors=u,this.triangleNormals=h,this.triangleUVs=d,this.triangleIds=c,this.triangleVAO=g,this.triangleCount=0,this.lineWidth=1,this.edgePositions=p,this.edgeColors=m,this.edgeUVs=y,this.edgeIds=f,this.edgeVAO=b,this.edgeCount=0,this.pointPositions=v,this.pointColors=B,this.pointUVs=F,this.pointSizes=A,this.pointIds=x,this.pointVAO=C,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=w,this.contourVAO=Q,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=I,this._view=I,this._projection=I,this._resolution=[1,1]}var A=F.prototype;function C(e,t){if(!t)return 1;if(!t.length)return 1;for(var r=0;r<t.length;++r){if(t.length<2)return 1;if(t[r][0]===e)return t[r][1];if(t[r][0]>e&&r>0){var n=(t[r][0]-e)/(t[r][0]-t[r-1][0]);return t[r][1]*(1-n)+n*t[r-1][1]}}return 1}function w(e){var t=n(e,m.vertex,m.fragment);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.normal.location=4,t}function Q(e){var t=n(e,y.vertex,y.fragment);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t}function U(e){var t=n(e,b.vertex,b.fragment);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.pointSize.location=4,t}function S(e){var t=n(e,v.vertex,v.fragment);return t.attributes.position.location=0,t.attributes.id.location=1,t}function E(e){var t=n(e,x.vertex,x.fragment);return t.attributes.position.location=0,t.attributes.id.location=1,t.attributes.pointSize.location=4,t}function L(e){var t=n(e,B.vertex,B.fragment);return t.attributes.position.location=0,t}A.isOpaque=function(){return!this.hasAlpha},A.isTransparent=function(){return this.hasAlpha},A.pickSlots=1,A.setPickBase=function(e){this.pickId=e},A.highlight=function(e){if(e&&this.contourEnable){for(var t=h(this.cells,this.intensity,e.intensity),r=t.cells,n=t.vertexIds,i=t.vertexWeights,a=r.length,o=g.mallocFloat32(6*a),s=0,l=0;l<a;++l)for(var c=r[l],u=0;u<2;++u){var d=c[0];2===c.length&&(d=c[u]);for(var p=n[d][0],f=n[d][1],m=i[d],y=1-m,b=this.positions[p],v=this.positions[f],x=0;x<3;++x)o[s++]=m*b[x]+y*v[x]}this.contourCount=s/3|0,this.contourPositions.update(o.subarray(0,s)),g.free(o)}else this.contourCount=0},A.update=function(e){e=e||{};var t=this.gl;this.dirty=!0,"contourEnable"in e&&(this.contourEnable=e.contourEnable),"contourColor"in e&&(this.contourColor=e.contourColor),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"lightPosition"in e&&(this.lightPosition=e.lightPosition),this.hasAlpha=!1,"opacity"in e&&(this.opacity=e.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in e&&(this.opacityscale=e.opacityscale,this.hasAlpha=!0),"ambient"in e&&(this.ambientLight=e.ambient),"diffuse"in e&&(this.diffuseLight=e.diffuse),"specular"in e&&(this.specularLight=e.specular),"roughness"in e&&(this.roughness=e.roughness),"fresnel"in e&&(this.fresnel=e.fresnel),e.texture?(this.texture.dispose(),this.texture=o(t,e.texture)):e.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=t.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=t.LINEAR,this.texture.setPixels(function(e,t){for(var r=d({colormap:e,nshades:256,format:"rgba"}),n=new Uint8Array(1024),i=0;i<256;++i){for(var a=r[i],o=0;o<3;++o)n[4*i+o]=a[o];n[4*i+3]=t?255*C(i/255,t):255*a[3]}return u(n,[256,256,4],[4,0,1])}(e.colormap,this.opacityscale)),this.texture.generateMipmap());var r=e.cells,n=e.positions;if(n&&r){var i=[],a=[],l=[],c=[],h=[],g=[],p=[],f=[],m=[],y=[],b=[],v=[],x=[],B=[];this.cells=r,this.positions=n;var I=e.vertexNormals,F=e.cellNormals,A=void 0===e.vertexNormalsEpsilon?1e-6:e.vertexNormalsEpsilon,w=void 0===e.faceNormalsEpsilon?1e-6:e.faceNormalsEpsilon;e.useFacetNormals&&!F&&(F=s.faceNormals(r,n,w)),F||I||(I=s.vertexNormals(r,n,A));var Q=e.vertexColors,U=e.cellColors,S=e.meshColor||[1,1,1,1],E=e.vertexUVs,L=e.vertexIntensity,_=e.cellUVs,T=e.cellIntensity,R=1/0,$=-1/0;if(!E&&!_)if(L)if(e.vertexIntensityBounds)R=+e.vertexIntensityBounds[0],$=+e.vertexIntensityBounds[1];else for(var k=0;k<L.length;++k){var N=L[k];R=Math.min(R,N),$=Math.max($,N)}else if(T)if(e.cellIntensityBounds)R=+e.cellIntensityBounds[0],$=+e.cellIntensityBounds[1];else for(k=0;k<T.length;++k)N=T[k],R=Math.min(R,N),$=Math.max($,N);else for(k=0;k<n.length;++k)N=n[k][2],R=Math.min(R,N),$=Math.max($,N);this.intensity=L||T||function(e){for(var t=e.length,r=new Array(t),n=0;n<t;++n)r[n]=e[n][2];return r}(n),this.pickVertex=!(T||U);var G=e.pointSizes,M=e.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],k=0;k<n.length;++k)for(var D=n[k],V=0;V<3;++V)!isNaN(D[V])&&isFinite(D[V])&&(this.bounds[0][V]=Math.min(this.bounds[0][V],D[V]),this.bounds[1][V]=Math.max(this.bounds[1][V],D[V]));var H=0,X=0,O=0;e:for(k=0;k<r.length;++k){var Z=r[k];switch(Z.length){case 1:for(D=n[Y=Z[0]],V=0;V<3;++V)if(isNaN(D[V])||!isFinite(D[V]))continue e;y.push(D[0],D[1],D[2]),P=Q?Q[Y]:U?U[k]:S,this.opacityscale&&L?a.push(P[0],P[1],P[2],this.opacity*C((L[Y]-R)/($-R),this.opacityscale)):3===P.length?b.push(P[0],P[1],P[2],this.opacity):(b.push(P[0],P[1],P[2],P[3]*this.opacity),P[3]<1&&(this.hasAlpha=!0)),z=E?E[Y]:L?[(L[Y]-R)/($-R),0]:_?_[k]:T?[(T[k]-R)/($-R),0]:[(D[2]-R)/($-R),0],v.push(z[0],z[1]),G?x.push(G[Y]):x.push(M),B.push(k),O+=1;break;case 2:for(V=0;V<2;++V){D=n[Y=Z[V]];for(var W=0;W<3;++W)if(isNaN(D[W])||!isFinite(D[W]))continue e}for(V=0;V<2;++V)D=n[Y=Z[V]],g.push(D[0],D[1],D[2]),P=Q?Q[Y]:U?U[k]:S,this.opacityscale&&L?a.push(P[0],P[1],P[2],this.opacity*C((L[Y]-R)/($-R),this.opacityscale)):3===P.length?p.push(P[0],P[1],P[2],this.opacity):(p.push(P[0],P[1],P[2],P[3]*this.opacity),P[3]<1&&(this.hasAlpha=!0)),z=E?E[Y]:L?[(L[Y]-R)/($-R),0]:_?_[k]:T?[(T[k]-R)/($-R),0]:[(D[2]-R)/($-R),0],f.push(z[0],z[1]),m.push(k);X+=1;break;case 3:for(V=0;V<3;++V)for(D=n[Y=Z[V]],W=0;W<3;++W)if(isNaN(D[W])||!isFinite(D[W]))continue e;for(V=0;V<3;++V){var Y,P,z,J;D=n[Y=Z[2-V]],i.push(D[0],D[1],D[2]),(P=Q?Q[Y]:U?U[k]:S)?this.opacityscale&&L?a.push(P[0],P[1],P[2],this.opacity*C((L[Y]-R)/($-R),this.opacityscale)):3===P.length?a.push(P[0],P[1],P[2],this.opacity):(a.push(P[0],P[1],P[2],P[3]*this.opacity),P[3]<1&&(this.hasAlpha=!0)):a.push(.5,.5,.5,1),z=E?E[Y]:L?[(L[Y]-R)/($-R),0]:_?_[k]:T?[(T[k]-R)/($-R),0]:[(D[2]-R)/($-R),0],c.push(z[0],z[1]),J=I?I[Y]:F[k],l.push(J[0],J[1],J[2]),h.push(k)}H+=1}}this.pointCount=O,this.edgeCount=X,this.triangleCount=H,this.pointPositions.update(y),this.pointColors.update(b),this.pointUVs.update(v),this.pointSizes.update(x),this.pointIds.update(new Uint32Array(B)),this.edgePositions.update(g),this.edgeColors.update(p),this.edgeUVs.update(f),this.edgeIds.update(new Uint32Array(m)),this.trianglePositions.update(i),this.triangleColors.update(a),this.triangleUVs.update(c),this.triangleNormals.update(l),this.triangleIds.update(new Uint32Array(h))}},A.drawTransparent=A.draw=function(e){e=e||{};for(var t=this.gl,r=e.model||I,n=e.view||I,i=e.projection||I,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);var s={model:r,view:n,projection:i,inverseModel:I.slice(),clipBounds:a,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};s.inverseModel=c(s.inverseModel,s.model),t.disable(t.CULL_FACE),this.texture.bind(0);var u=new Array(16);for(l(u,s.view,s.model),l(u,s.projection,u),c(u,u),o=0;o<3;++o)s.eyePosition[o]=u[12+o]/u[15];var d,h=u[15];for(o=0;o<3;++o)h+=this.lightPosition[o]*u[4*o+3];for(o=0;o<3;++o){for(var g=u[12+o],p=0;p<3;++p)g+=u[4*p+o]*this.lightPosition[p];s.lightPosition[o]=g/h}this.triangleCount>0&&((d=this.triShader).bind(),d.uniforms=s,this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((d=this.lineShader).bind(),d.uniforms=s,this.edgeVAO.bind(),t.lineWidth(this.lineWidth*this.pixelRatio),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((d=this.pointShader).bind(),d.uniforms=s,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((d=this.contourShader).bind(),d.uniforms=s,this.contourVAO.bind(),t.drawArrays(t.LINES,0,this.contourCount),this.contourVAO.unbind())},A.drawPick=function(e){e=e||{};for(var t=this.gl,r=e.model||I,n=e.view||I,i=e.projection||I,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);this._model=[].slice.call(r),this._view=[].slice.call(n),this._projection=[].slice.call(i),this._resolution=[t.drawingBufferWidth,t.drawingBufferHeight];var s,l={model:r,view:n,projection:i,clipBounds:a,pickId:this.pickId/255};(s=this.pickShader).bind(),s.uniforms=l,this.triangleCount>0&&(this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),t.lineWidth(this.lineWidth*this.pixelRatio),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((s=this.pointPickShader).bind(),s.uniforms=l,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind())},A.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;for(var t=e.value[0]+256*e.value[1]+65536*e.value[2],r=this.cells[t],n=this.positions,i=new Array(r.length),a=0;a<r.length;++a)i[a]=n[r[a]];var o=e.coord[0],s=e.coord[1];if(!this.pickVertex){var l=this.positions[r[0]],c=this.positions[r[1]],u=this.positions[r[2]],d=[(l[0]+c[0]+u[0])/3,(l[1]+c[1]+u[1])/3,(l[2]+c[2]+u[2])/3];return{_cellCenter:!0,position:[o,s],index:t,cell:r,cellId:t,intensity:this.intensity[t],dataCoordinate:d}}var h=f(i,[o*this.pixelRatio,this._resolution[1]-s*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!h)return null;var g=h[2],p=0;for(a=0;a<r.length;++a)p+=g[a]*this.intensity[r[a]];return{position:h[1],index:r[h[0]],cell:r,cellId:t,intensity:p,dataCoordinate:this.positions[r[h[0]]]}},A.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},e.exports=function(e,t){1===arguments.length&&(e=(t=e).gl);var r=e.getExtension("OES_standard_derivatives")||e.getExtension("MOZ_OES_standard_derivatives")||e.getExtension("WEBKIT_OES_standard_derivatives");if(!r)throw new Error("derivatives not supported");var n=w(e),s=Q(e),l=U(e),c=S(e),d=E(e),h=L(e),g=o(e,u(new Uint8Array([255,255,255,255]),[1,1,4]));g.generateMipmap(),g.minFilter=e.LINEAR_MIPMAP_LINEAR,g.magFilter=e.LINEAR;var p=i(e),f=i(e),m=i(e),y=i(e),b=i(e),v=a(e,[{buffer:p,type:e.FLOAT,size:3},{buffer:b,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:f,type:e.FLOAT,size:4},{buffer:m,type:e.FLOAT,size:2},{buffer:y,type:e.FLOAT,size:3}]),x=i(e),B=i(e),I=i(e),A=i(e),C=a(e,[{buffer:x,type:e.FLOAT,size:3},{buffer:A,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:B,type:e.FLOAT,size:4},{buffer:I,type:e.FLOAT,size:2}]),_=i(e),T=i(e),R=i(e),$=i(e),k=i(e),N=a(e,[{buffer:_,type:e.FLOAT,size:3},{buffer:k,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:T,type:e.FLOAT,size:4},{buffer:R,type:e.FLOAT,size:2},{buffer:$,type:e.FLOAT,size:1}]),G=i(e),M=a(e,[{buffer:G,type:e.FLOAT,size:3}]),D=new F(e,g,n,s,l,c,d,h,p,b,f,m,y,v,x,A,B,I,C,_,k,T,R,$,N,G,M);return D.update(t),D}},4554:function(e,t,r){e.exports=function(e){var t=e.gl,r=n(t,[0,0,0,1,1,0,1,1]),s=i(t,a.boxVert,a.lineFrag);return new o(e,r,s)};var n=r(5827),i=r(5158),a=r(2709);function o(e,t,r){this.plot=e,this.vbo=t,this.shader=r}var s,l,c=o.prototype;c.bind=function(){var e=this.shader;this.vbo.bind(),this.shader.bind(),e.attributes.coord.pointer(),e.uniforms.screenBox=this.plot.screenBox},c.drawBox=(s=[0,0],l=[0,0],function(e,t,r,n,i){var a=this.plot,o=this.shader,c=a.gl;s[0]=e,s[1]=t,l[0]=r,l[1]=n,o.uniforms.lo=s,o.uniforms.hi=l,o.uniforms.color=i,c.drawArrays(c.TRIANGLE_STRIP,0,4)}),c.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3016:function(e,t,r){e.exports=function(e){var t=e.gl,r=n(t),a=i(t,o.gridVert,o.gridFrag),l=i(t,o.tickVert,o.gridFrag);return new s(e,r,a,l)};var n=r(5827),i=r(5158),a=r(5070),o=r(2709);function s(e,t,r,n){this.plot=e,this.vbo=t,this.shader=r,this.tickShader=n,this.ticks=[[],[]]}function l(e,t){return e-t}var c,u,d,h,g,p=s.prototype;p.draw=(c=[0,0],u=[0,0],d=[0,0],function(){for(var e=this.plot,t=this.vbo,r=this.shader,n=this.ticks,i=e.gl,a=e._tickBounds,o=e.dataBox,s=e.viewBox,l=e.gridLineWidth,h=e.gridLineColor,g=e.gridLineEnable,p=e.pixelRatio,f=0;f<2;++f){var m=a[f],y=a[f+2]-m,b=.5*(o[f+2]+o[f]),v=o[f+2]-o[f];u[f]=2*y/v,c[f]=2*(m-b)/v}r.bind(),t.bind(),r.attributes.dataCoord.pointer(),r.uniforms.dataShift=c,r.uniforms.dataScale=u;var x=0;for(f=0;f<2;++f){d[0]=d[1]=0,d[f]=1,r.uniforms.dataAxis=d,r.uniforms.lineWidth=l[f]/(s[f+2]-s[f])*p,r.uniforms.color=h[f];var B=6*n[f].length;g[f]&&B&&i.drawArrays(i.TRIANGLES,x,B),x+=B}}),p.drawTickMarks=function(){var e=[0,0],t=[0,0],r=[1,0],n=[0,1],i=[0,0],o=[0,0];return function(){for(var s=this.plot,c=this.vbo,u=this.tickShader,d=this.ticks,h=s.gl,g=s._tickBounds,p=s.dataBox,f=s.viewBox,m=s.pixelRatio,y=s.screenBox,b=y[2]-y[0],v=y[3]-y[1],x=f[2]-f[0],B=f[3]-f[1],I=0;I<2;++I){var F=g[I],A=g[I+2]-F,C=.5*(p[I+2]+p[I]),w=p[I+2]-p[I];t[I]=2*A/w,e[I]=2*(F-C)/w}t[0]*=x/b,e[0]*=x/b,t[1]*=B/v,e[1]*=B/v,u.bind(),c.bind(),u.attributes.dataCoord.pointer();var Q=u.uniforms;Q.dataShift=e,Q.dataScale=t;var U=s.tickMarkLength,S=s.tickMarkWidth,E=s.tickMarkColor,L=6*d[0].length,_=Math.min(a.ge(d[0],(p[0]-g[0])/(g[2]-g[0]),l),d[0].length),T=Math.min(a.gt(d[0],(p[2]-g[0])/(g[2]-g[0]),l),d[0].length),R=0+6*_,$=6*Math.max(0,T-_),k=Math.min(a.ge(d[1],(p[1]-g[1])/(g[3]-g[1]),l),d[1].length),N=Math.min(a.gt(d[1],(p[3]-g[1])/(g[3]-g[1]),l),d[1].length),G=L+6*k,M=6*Math.max(0,N-k);i[0]=2*(f[0]-U[1])/b-1,i[1]=(f[3]+f[1])/v-1,o[0]=U[1]*m/b,o[1]=S[1]*m/v,M&&(Q.color=E[1],Q.tickScale=o,Q.dataAxis=n,Q.screenOffset=i,h.drawArrays(h.TRIANGLES,G,M)),i[0]=(f[2]+f[0])/b-1,i[1]=2*(f[1]-U[0])/v-1,o[0]=S[0]*m/b,o[1]=U[0]*m/v,$&&(Q.color=E[0],Q.tickScale=o,Q.dataAxis=r,Q.screenOffset=i,h.drawArrays(h.TRIANGLES,R,$)),i[0]=2*(f[2]+U[3])/b-1,i[1]=(f[3]+f[1])/v-1,o[0]=U[3]*m/b,o[1]=S[3]*m/v,M&&(Q.color=E[3],Q.tickScale=o,Q.dataAxis=n,Q.screenOffset=i,h.drawArrays(h.TRIANGLES,G,M)),i[0]=(f[2]+f[0])/b-1,i[1]=2*(f[3]+U[2])/v-1,o[0]=S[2]*m/b,o[1]=U[2]*m/v,$&&(Q.color=E[2],Q.tickScale=o,Q.dataAxis=r,Q.screenOffset=i,h.drawArrays(h.TRIANGLES,R,$))}}(),p.update=(h=[1,1,-1,-1,1,-1],g=[1,-1,1,1,-1,-1],function(e){var t=e.ticks,r=e.bounds,n=new Float32Array(18*(t[0].length+t[1].length));this.plot.zeroLineEnable;for(var i=0,a=[[],[]],o=0;o<2;++o)for(var s=a[o],l=t[o],c=r[o],u=r[o+2],d=0;d<l.length;++d){var p=(l[d].x-c)/(u-c);s.push(p);for(var f=0;f<6;++f)n[i++]=p,n[i++]=h[f],n[i++]=g[f]}this.ticks=a,this.vbo.update(n)}),p.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},1154:function(e,t,r){e.exports=function(e){var t=e.gl,r=n(t,[-1,-1,-1,1,1,-1,1,1]),s=i(t,a.lineVert,a.lineFrag);return new o(e,r,s)};var n=r(5827),i=r(5158),a=r(2709);function o(e,t,r){this.plot=e,this.vbo=t,this.shader=r}var s=o.prototype;s.bind=function(){var e=this.shader;this.vbo.bind(),this.shader.bind(),e.attributes.coord.pointer(),e.uniforms.screenBox=this.plot.screenBox},s.drawLine=function(){var e=[0,0],t=[0,0];return function(r,n,i,a,o,s){var l=this.plot,c=this.shader,u=l.gl;e[0]=r,e[1]=n,t[0]=i,t[1]=a,c.uniforms.start=e,c.uniforms.end=t,c.uniforms.width=o*l.pixelRatio,c.uniforms.color=s,u.drawArrays(u.TRIANGLE_STRIP,0,4)}}(),s.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2709:function(e,t,r){var n=r(6832),i=n(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);e.exports={lineVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:i,textVert:n(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:i,gridVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:i,boxVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},5613:function(e,t,r){e.exports=function(e){var t=e.gl,r=n(t),a=i(t,s.textVert,s.textFrag);return new l(e,r,a)};var n=r(5827),i=r(5158),a=r(6946),o=r(5070),s=r(2709);function l(e,t,r){this.plot=e,this.vbo=t,this.shader=r,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var c,u,d,h,g,p,f=l.prototype;f.drawTicks=(c=[0,0],u=[0,0],d=[0,0],function(e){var t=this.plot,r=this.shader,n=this.tickX[e],i=this.tickOffset[e],a=t.gl,s=t.viewBox,l=t.dataBox,h=t.screenBox,g=t.pixelRatio,p=t.tickEnable,f=t.tickPad,m=t.tickColor,y=t.tickAngle,b=t.labelEnable,v=t.labelPad,x=t.labelColor,B=t.labelAngle,I=this.labelOffset[e],F=this.labelCount[e],A=o.lt(n,l[e]),C=o.le(n,l[e+2]);c[0]=c[1]=0,c[e]=1,u[e]=(s[2+e]+s[e])/(h[2+e]-h[e])-1;var w=2/h[2+(1^e)]-h[1^e];u[1^e]=w*s[1^e]-1,p[e]&&(u[1^e]-=w*g*f[e],A<C&&i[C]>i[A]&&(r.uniforms.dataAxis=c,r.uniforms.screenOffset=u,r.uniforms.color=m[e],r.uniforms.angle=y[e],a.drawArrays(a.TRIANGLES,i[A],i[C]-i[A]))),b[e]&&F&&(u[1^e]-=w*g*v[e],r.uniforms.dataAxis=d,r.uniforms.screenOffset=u,r.uniforms.color=x[e],r.uniforms.angle=B[e],a.drawArrays(a.TRIANGLES,I,F)),u[1^e]=w*s[2+(1^e)]-1,p[e+2]&&(u[1^e]+=w*g*f[e+2],A<C&&i[C]>i[A]&&(r.uniforms.dataAxis=c,r.uniforms.screenOffset=u,r.uniforms.color=m[e+2],r.uniforms.angle=y[e+2],a.drawArrays(a.TRIANGLES,i[A],i[C]-i[A]))),b[e+2]&&F&&(u[1^e]+=w*g*v[e+2],r.uniforms.dataAxis=d,r.uniforms.screenOffset=u,r.uniforms.color=x[e+2],r.uniforms.angle=B[e+2],a.drawArrays(a.TRIANGLES,I,F))}),f.drawTitle=function(){var e=[0,0],t=[0,0];return function(){var r=this.plot,n=this.shader,i=r.gl,a=r.screenBox,o=r.titleCenter,s=r.titleAngle,l=r.titleColor,c=r.pixelRatio;if(this.titleCount){for(var u=0;u<2;++u)t[u]=2*(o[u]*c-a[u])/(a[2+u]-a[u])-1;n.bind(),n.uniforms.dataAxis=e,n.uniforms.screenOffset=t,n.uniforms.angle=s,n.uniforms.color=l,i.drawArrays(i.TRIANGLES,this.titleOffset,this.titleCount)}}}(),f.bind=(h=[0,0],g=[0,0],p=[0,0],function(){var e=this.plot,t=this.shader,r=e._tickBounds,n=e.dataBox,i=e.screenBox,a=e.viewBox;t.bind();for(var o=0;o<2;++o){var s=r[o],l=r[o+2]-s,c=.5*(n[o+2]+n[o]),u=n[o+2]-n[o],d=a[o],f=a[o+2]-d,m=i[o],y=i[o+2]-m;g[o]=2*l/u*f/y,h[o]=2*(s-c)/u*f/y}p[1]=2*e.pixelRatio/(i[3]-i[1]),p[0]=p[1]*(i[3]-i[1])/(i[2]-i[0]),t.uniforms.dataScale=g,t.uniforms.dataShift=h,t.uniforms.textScale=p,this.vbo.bind(),t.attributes.textCoordinate.pointer()}),f.update=function(e){var t,r,n,i,o,s=[],l=e.ticks,c=e.bounds;for(o=0;o<2;++o){var u=[Math.floor(s.length/3)],d=[-1/0],h=l[o];for(t=0;t<h.length;++t){var g=h[t],p=g.x,f=g.text,m=g.font||"sans-serif";i=g.fontSize||12;for(var y=1/(c[o+2]-c[o]),b=c[o],v=f.split("\n"),x=0;x<v.length;x++)for(n=a(m,v[x]).data,r=0;r<n.length;r+=2)s.push(n[r]*i,-n[r+1]*i-x*i*1.2,(p-b)*y);u.push(Math.floor(s.length/3)),d.push(p)}this.tickOffset[o]=u,this.tickX[o]=d}for(o=0;o<2;++o){for(this.labelOffset[o]=Math.floor(s.length/3),n=a(e.labelFont[o],e.labels[o],{textAlign:"center"}).data,i=e.labelSize[o],t=0;t<n.length;t+=2)s.push(n[t]*i,-n[t+1]*i,0);this.labelCount[o]=Math.floor(s.length/3)-this.labelOffset[o]}for(this.titleOffset=Math.floor(s.length/3),n=a(e.titleFont,e.title).data,i=e.titleSize,t=0;t<n.length;t+=2)s.push(n[t]*i,-n[t+1]*i,0);this.titleCount=Math.floor(s.length/3)-this.titleOffset,this.vbo.update(s)},f.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2117:function(e,t,r){e.exports=function(e){var t=e.gl,r=n(t,[t.drawingBufferWidth,t.drawingBufferHeight]),c=new l(t,r);return c.grid=i(c),c.text=a(c),c.line=o(c),c.box=s(c),c.update(e),c};var n=r(2611),i=r(3016),a=r(5613),o=r(1154),s=r(4554);function l(e,t){this.gl=e,this.pickBuffer=t,this.screenBox=[0,0,e.drawingBufferWidth,e.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var c=l.prototype;function u(e){for(var t=e.slice(),r=0;r<t.length;++r)t[r]=t[r].slice();return t}function d(e,t){return e.x-t.x}c.setDirty=function(){this.dirty=this.pickDirty=!0},c.setOverlayDirty=function(){this.dirty=!0},c.nextDepthValue=function(){return this._depthCounter++/65536},c.draw=function(){var e=this.gl,t=this.screenBox,r=this.viewBox,n=this.dataBox,i=this.pixelRatio,a=this.grid,o=this.line,s=this.text,l=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,e.bindFramebuffer(e.FRAMEBUFFER,null),e.enable(e.SCISSOR_TEST),e.disable(e.DEPTH_TEST),e.depthFunc(e.LESS),e.depthMask(!1),e.enable(e.BLEND),e.blendEquation(e.FUNC_ADD,e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),this.borderColor){e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]);var c=this.borderColor;e.clearColor(c[0]*c[3],c[1]*c[3],c[2]*c[3],c[3]),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}e.scissor(r[0],r[1],r[2]-r[0],r[3]-r[1]),e.viewport(r[0],r[1],r[2]-r[0],r[3]-r[1]);var u=this.backgroundColor;e.clearColor(u[0]*u[3],u[1]*u[3],u[2]*u[3],u[3]),e.clear(e.COLOR_BUFFER_BIT),a.draw();var d=this.zeroLineEnable,h=this.zeroLineColor,g=this.zeroLineWidth;if(d[0]||d[1]){o.bind();for(var p=0;p<2;++p)if(d[p]&&n[p]<=0&&n[p+2]>=0){var f=t[p]-n[p]*(t[p+2]-t[p])/(n[p+2]-n[p]);0===p?o.drawLine(f,t[1],f,t[3],g[p],h[p]):o.drawLine(t[0],f,t[2],f,g[p],h[p])}}for(p=0;p<l.length;++p)l[p].draw();e.viewport(t[0],t[1],t[2]-t[0],t[3]-t[1]),e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]),this.grid.drawTickMarks(),o.bind();var m=this.borderLineEnable,y=this.borderLineWidth,b=this.borderLineColor;for(m[1]&&o.drawLine(r[0],r[1]-.5*y[1]*i,r[0],r[3]+.5*y[3]*i,y[1],b[1]),m[0]&&o.drawLine(r[0]-.5*y[0]*i,r[1],r[2]+.5*y[2]*i,r[1],y[0],b[0]),m[3]&&o.drawLine(r[2],r[1]-.5*y[1]*i,r[2],r[3]+.5*y[3]*i,y[3],b[3]),m[2]&&o.drawLine(r[0]-.5*y[0]*i,r[3],r[2]+.5*y[2]*i,r[3],y[2],b[2]),s.bind(),p=0;p<2;++p)s.drawTicks(p);this.titleEnable&&s.drawTitle();var v=this.overlays;for(p=0;p<v.length;++p)v[p].draw();e.disable(e.SCISSOR_TEST),e.disable(e.BLEND),e.depthMask(!0)}},c.drawPick=function(){if(!this.static){var e=this.pickBuffer;this.gl,this._pickTimeout=null,e.begin();for(var t=1,r=this.objects,n=0;n<r.length;++n)t=r[n].drawPick(t);e.end()}},c.pick=function(e,t){if(!this.static){var r=this.pixelRatio,n=this.pickPixelRatio,i=this.viewBox,a=0|Math.round((e-i[0]/r)*n),o=0|Math.round((t-i[1]/r)*n),s=this.pickBuffer.query(a,o,this.pickRadius);if(!s)return null;for(var l=s.id+(s.value[0]<<8)+(s.value[1]<<16)+(s.value[2]<<24),c=this.objects,u=0;u<c.length;++u){var d=c[u].pick(a,o,l);if(d)return d}return null}},c.setScreenBox=function(e){var t=this.screenBox,r=this.pixelRatio;t[0]=0|Math.round(e[0]*r),t[1]=0|Math.round(e[1]*r),t[2]=0|Math.round(e[2]*r),t[3]=0|Math.round(e[3]*r),this.setDirty()},c.setDataBox=function(e){var t=this.dataBox;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3])&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],this.setDirty())},c.setViewBox=function(e){var t=this.pixelRatio,r=this.viewBox;r[0]=0|Math.round(e[0]*t),r[1]=0|Math.round(e[1]*t),r[2]=0|Math.round(e[2]*t),r[3]=0|Math.round(e[3]*t);var n=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((e[2]-e[0])*n),0|Math.round((e[3]-e[1])*n)],this.setDirty()},c.update=function(e){e=e||{};var t=this.gl;this.pixelRatio=e.pixelRatio||1;var r=this.pixelRatio;this.pickPixelRatio=Math.max(r,1),this.setScreenBox(e.screenBox||[0,0,t.drawingBufferWidth/r,t.drawingBufferHeight/r]),this.screenBox,this.setViewBox(e.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/r,.125*(this.screenBox[3]-this.screenBox[1])/r,.875*(this.screenBox[2]-this.screenBox[0])/r,.875*(this.screenBox[3]-this.screenBox[1])/r]);var n=this.viewBox,i=(n[2]-n[0])/(n[3]-n[1]);this.setDataBox(e.dataBox||[-10,-10/i,10,10/i]),this.borderColor=!1!==e.borderColor&&(e.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(e.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(e.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(e.gridLineWidth||[1,1]).slice(),this.gridLineColor=u(e.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(e.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(e.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=u(e.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(e.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(e.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=u(e.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(e.titleCenter||[.5*(n[0]+n[2])/r,(n[3]+120)/r]).slice(),this.titleEnable=!("titleEnable"in e)||!!e.titleEnable,this.titleAngle=e.titleAngle||0,this.titleColor=(e.titleColor||[0,0,0,1]).slice(),this.labelPad=(e.labelPad||[15,15,15,15]).slice(),this.labelAngle=(e.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(e.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=u(e.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(e.tickPad||[15,15,15,15]).slice(),this.tickAngle=(e.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(e.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=u(e.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(e.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(e.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=u(e.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var a=e.ticks||[[],[]],o=this._tickBounds;o[0]=o[1]=1/0,o[2]=o[3]=-1/0;for(var s=0;s<2;++s){var l=a[s].slice(0);0!==l.length&&(l.sort(d),o[s]=Math.min(o[s],l[0].x),o[s+2]=Math.max(o[s+2],l[l.length-1].x))}this.grid.update({bounds:o,ticks:a}),this.text.update({bounds:o,ticks:a,labels:e.labels||["x","y"],labelSize:e.labelSize||[12,12],labelFont:e.labelFont||["sans-serif","sans-serif"],title:e.title||"",titleSize:e.titleSize||18,titleFont:e.titleFont||"sans-serif"}),this.static=!!e.static,this.setDirty()},c.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var e=this.objects.length-1;e>=0;--e)this.objects[e].dispose();for(this.objects.length=0,e=this.overlays.length-1;e>=0;--e)this.overlays[e].dispose();this.overlays.length=0,this.gl=null},c.addObject=function(e){this.objects.indexOf(e)<0&&(this.objects.push(e),this.setDirty())},c.removeObject=function(e){for(var t=this.objects,r=0;r<t.length;++r)if(t[r]===e){t.splice(r,1),this.setDirty();break}},c.addOverlay=function(e){this.overlays.indexOf(e)<0&&(this.overlays.push(e),this.setOverlayDirty())},c.removeOverlay=function(e){for(var t=this.overlays,r=0;r<t.length;++r)if(t[r]===e){t.splice(r,1),this.setOverlayDirty();break}}},4296:function(e,t,r){e.exports=function(e,t){e=e||document.body;var r=[.01,1/0];"distanceLimits"in(t=t||{})&&(r[0]=t.distanceLimits[0],r[1]=t.distanceLimits[1]),"zoomMin"in t&&(r[0]=t.zoomMin),"zoomMax"in t&&(r[1]=t.zoomMax);var c=i({center:t.center||[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:r}),u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d=0,h=e.clientWidth,g=e.clientHeight,p={keyBindingMode:"rotate",enableWheel:!0,view:c,element:e,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:c.modes,_ortho:t._ortho||t.projection&&"orthographic"===t.projection.type||!1,tick:function(){var t=n(),r=this.delay,i=t-2*r;c.idle(t-r),c.recalcMatrix(i),c.flush(t-(100+2*r));for(var a=!0,o=c.computedMatrix,s=0;s<16;++s)a=a&&u[s]===o[s],u[s]=o[s];var l=e.clientWidth===h&&e.clientHeight===g;return h=e.clientWidth,g=e.clientHeight,a?!l:(d=Math.exp(c.computedRadius[0]),!0)},lookAt:function(e,t,r){c.lookAt(c.lastT(),e,t,r)},rotate:function(e,t,r){c.rotate(c.lastT(),e,t,r)},pan:function(e,t,r){c.pan(c.lastT(),e,t,r)},translate:function(e,t,r){c.translate(c.lastT(),e,t,r)}};return Object.defineProperties(p,{matrix:{get:function(){return c.computedMatrix},set:function(e){return c.setMatrix(c.lastT(),e),c.computedMatrix},enumerable:!0},mode:{get:function(){return c.getMode()},set:function(e){var t=c.computedUp.slice(),r=c.computedEye.slice(),i=c.computedCenter.slice();if(c.setMode(e),"turntable"===e){var a=n();c._active.lookAt(a,r,i,t),c._active.lookAt(a+500,r,i,[0,0,1]),c._active.flush(a)}return c.getMode()},enumerable:!0},center:{get:function(){return c.computedCenter},set:function(e){return c.lookAt(c.lastT(),null,e),c.computedCenter},enumerable:!0},eye:{get:function(){return c.computedEye},set:function(e){return c.lookAt(c.lastT(),e),c.computedEye},enumerable:!0},up:{get:function(){return c.computedUp},set:function(e){return c.lookAt(c.lastT(),null,null,e),c.computedUp},enumerable:!0},distance:{get:function(){return d},set:function(e){return c.setDistance(c.lastT(),e),e},enumerable:!0},distanceLimits:{get:function(){return c.getDistanceLimits(r)},set:function(e){return c.setDistanceLimits(e),e},enumerable:!0}}),e.addEventListener("contextmenu",(function(e){return e.preventDefault(),!1})),p._lastX=-1,p._lastY=-1,p._lastMods={shift:!1,control:!1,alt:!1,meta:!1},p.enableMouseListeners=function(){function t(t,r,i,a){var o=p.keyBindingMode;if(!1!==o){var s="rotate"===o,l="pan"===o,u="zoom"===o,h=!!a.control,g=!!a.alt,f=!!a.shift,m=!!(1&t),y=!!(2&t),b=!!(4&t),v=1/e.clientHeight,x=v*(r-p._lastX),B=v*(i-p._lastY),I=p.flipX?1:-1,F=p.flipY?1:-1,A=Math.PI*p.rotateSpeed,C=n();if(-1!==p._lastX&&-1!==p._lastY&&((s&&m&&!h&&!g&&!f||m&&!h&&!g&&f)&&c.rotate(C,I*A*x,-F*A*B,0),(l&&m&&!h&&!g&&!f||y||m&&h&&!g&&!f)&&c.pan(C,-p.translateSpeed*x*d,p.translateSpeed*B*d,0),u&&m&&!h&&!g&&!f||b||m&&!h&&g&&!f)){var w=-p.zoomSpeed*B/window.innerHeight*(C-c.lastT())*100;c.pan(C,0,0,d*(Math.exp(w)-1))}return p._lastX=r,p._lastY=i,p._lastMods=a,!0}}p.mouseListener=a(e,t),e.addEventListener("touchstart",(function(r){var n=s(r.changedTouches[0],e);t(0,n[0],n[1],p._lastMods),t(1,n[0],n[1],p._lastMods)}),!!l&&{passive:!0}),e.addEventListener("touchmove",(function(r){var n=s(r.changedTouches[0],e);t(1,n[0],n[1],p._lastMods),r.preventDefault()}),!!l&&{passive:!1}),e.addEventListener("touchend",(function(e){t(0,p._lastX,p._lastY,p._lastMods)}),!!l&&{passive:!0}),p.wheelListener=o(e,(function(e,t){if(!1!==p.keyBindingMode&&p.enableWheel){var r=p.flipX?1:-1,i=p.flipY?1:-1,a=n();if(Math.abs(e)>Math.abs(t))c.rotate(a,0,0,-e*r*Math.PI*p.rotateSpeed/window.innerWidth);else if(!p._ortho){var o=-p.zoomSpeed*i*t/window.innerHeight*(a-c.lastT())/20;c.pan(a,0,0,d*(Math.exp(o)-1))}}}),!0)},p.enableMouseListeners(),p};var n=r(8161),i=r(1152),a=r(6145),o=r(6475),s=r(2565),l=r(5233)},8245:function(e,t,r){var n=r(6832),i=r(5158),a=n(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),o=n(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);e.exports=function(e){return i(e,a,o,null,[{name:"position",type:"vec2"}])}},1059:function(e,t,r){var n=r(4296),i=r(7453),a=r(2771),o=r(6496),s=r(2611),l=r(4234),c=r(8126),u=r(6145),d=r(1120),h=r(5268),g=r(8245),p=r(2321)({tablet:!0,featureDetect:!0});function f(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function m(e){var t=Math.round(Math.log(Math.abs(e))/Math.log(10));if(t<0){var r=Math.round(Math.pow(10,-t));return Math.ceil(e*r)/r}return t>0?(r=Math.round(Math.pow(10,t)),Math.ceil(e/r)*r):Math.ceil(e)}function y(e){return"boolean"!=typeof e||e}e.exports={createScene:function(e){(e=e||{}).camera=e.camera||{};var t=e.canvas;t||(t=document.createElement("canvas"),e.container?e.container.appendChild(t):document.body.appendChild(t));var r=e.gl;if(r||(e.glOptions&&(p=!!e.glOptions.preserveDrawingBuffer),r=function(e,t){var r=null;try{(r=e.getContext("webgl",t))||(r=e.getContext("experimental-webgl",t))}catch(e){return null}return r}(t,e.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:p})),!r)throw new Error("webgl not supported");var b=e.bounds||[[-10,-10,-10],[10,10,10]],v=new f,x=l(r,r.drawingBufferWidth,r.drawingBufferHeight,{preferFloat:!p}),B=g(r),I=e.cameraObject&&!0===e.cameraObject._ortho||e.camera.projection&&"orthographic"===e.camera.projection.type||!1,F={eye:e.camera.eye||[2,0,0],center:e.camera.center||[0,0,0],up:e.camera.up||[0,1,0],zoomMin:e.camera.zoomMax||.1,zoomMax:e.camera.zoomMin||100,mode:e.camera.mode||"turntable",_ortho:I},A=e.axes||{},C=i(r,A);C.enable=!A.disable;var w=e.spikes||{},Q=o(r,w),U=[],S=[],E=[],L=[],_=!0,T=!0,R=new Array(16),$=new Array(16),k={view:null,projection:R,model:$,_ortho:!1},N=(T=!0,[r.drawingBufferWidth,r.drawingBufferHeight]),G=e.cameraObject||n(t,F),M={gl:r,contextLost:!1,pixelRatio:e.pixelRatio||1,canvas:t,selection:v,camera:G,axes:C,axesPixels:null,spikes:Q,bounds:b,objects:U,shape:N,aspect:e.aspectRatio||[1,1,1],pickRadius:e.pickRadius||10,zNear:e.zNear||.01,zFar:e.zFar||1e3,fovy:e.fovy||Math.PI/4,clearColor:e.clearColor||[0,0,0,0],autoResize:y(e.autoResize),autoBounds:y(e.autoBounds),autoScale:!!e.autoScale,autoCenter:y(e.autoCenter),clipToBounds:y(e.clipToBounds),snapToData:!!e.snapToData,onselect:e.onselect||null,onrender:e.onrender||null,onclick:e.onclick||null,cameraParams:k,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(e){this.aspect[0]=e.x,this.aspect[1]=e.y,this.aspect[2]=e.z,T=!0},setBounds:function(e,t){this.bounds[0][e]=t.min,this.bounds[1][e]=t.max},setClearColor:function(e){this.clearColor=e},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},D=[r.drawingBufferWidth/M.pixelRatio|0,r.drawingBufferHeight/M.pixelRatio|0];function V(){if(!M._stopped&&M.autoResize){var e=t.parentNode,r=1,n=1;e&&e!==document.body?(r=e.clientWidth,n=e.clientHeight):(r=window.innerWidth,n=window.innerHeight);var i=0|Math.ceil(r*M.pixelRatio),a=0|Math.ceil(n*M.pixelRatio);if(i!==t.width||a!==t.height){t.width=i,t.height=a;var o=t.style;o.position=o.position||"absolute",o.left="0px",o.top="0px",o.width=r+"px",o.height=n+"px",_=!0}}}function H(){for(var e=U.length,t=L.length,n=0;n<t;++n)E[n]=0;e:for(n=0;n<e;++n){var i=U[n],a=i.pickSlots;if(a){for(var o=0;o<t;++o)if(E[o]+a<255){S[n]=o,i.setPickBase(E[o]+1),E[o]+=a;continue e}var l=s(r,N);S[n]=t,L.push(l),E.push(a),i.setPickBase(1),t+=1}else S[n]=-1}for(;t>0&&0===E[t-1];)E.pop(),L.pop().dispose()}function X(){if(M.contextLost)return!0;r.isContextLost()&&(M.contextLost=!0,M.mouseListener.enabled=!1,M.selection.object=null,M.oncontextloss&&M.oncontextloss())}M.autoResize&&V(),window.addEventListener("resize",V),M.update=function(e){M._stopped||(_=!0,T=!0)},M.add=function(e){M._stopped||(e.axes=C,U.push(e),S.push(-1),_=!0,T=!0,H())},M.remove=function(e){if(!M._stopped){var t=U.indexOf(e);t<0||(U.splice(t,1),S.pop(),_=!0,T=!0,H())}},M.dispose=function(){if(!M._stopped&&(M._stopped=!0,window.removeEventListener("resize",V),t.removeEventListener("webglcontextlost",X),M.mouseListener.enabled=!1,!M.contextLost)){C.dispose(),Q.dispose();for(var e=0;e<U.length;++e)U[e].dispose();for(x.dispose(),e=0;e<L.length;++e)L[e].dispose();B.dispose(),r=null,C=null,Q=null,U=[]}},M._mouseRotating=!1,M._prevButtons=0,M.enableMouseListeners=function(){M.mouseListener=u(t,(function(e,t,r){if(!M._stopped){var n=L.length,i=U.length,a=v.object;v.distance=1/0,v.mouse[0]=t,v.mouse[1]=r,v.object=null,v.screen=null,v.dataCoordinate=v.dataPosition=null;var o=!1;if(e&&M._prevButtons)M._mouseRotating=!0;else{M._mouseRotating&&(T=!0),M._mouseRotating=!1;for(var s=0;s<n;++s){var l=L[s].query(t,D[1]-r-1,M.pickRadius);if(l){if(l.distance>v.distance)continue;for(var c=0;c<i;++c){var u=U[c];if(S[c]===s){var d=u.pick(l);d&&(v.buttons=e,v.screen=l.coord,v.distance=l.distance,v.object=u,v.index=d.distance,v.dataPosition=d.position,v.dataCoordinate=d.dataCoordinate,v.data=d,o=!0)}}}}}a&&a!==v.object&&(a.highlight&&a.highlight(null),_=!0),v.object&&(v.object.highlight&&v.object.highlight(v.data),_=!0),(o=o||v.object!==a)&&M.onselect&&M.onselect(v),1&e&&!(1&M._prevButtons)&&M.onclick&&M.onclick(v),M._prevButtons=e}}))},t.addEventListener("webglcontextlost",X);var O=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Z=[O[0].slice(),O[1].slice()];function W(){if(!X()){V();var e=M.camera.tick();k.view=M.camera.matrix,_=_||e,T=T||e,C.pixelRatio=M.pixelRatio,Q.pixelRatio=M.pixelRatio;var t=U.length,n=O[0],i=O[1];n[0]=n[1]=n[2]=1/0,i[0]=i[1]=i[2]=-1/0;for(var o=0;o<t;++o){(E=U[o]).pixelRatio=M.pixelRatio,E.axes=M.axes,_=_||!!E.dirty,T=T||!!E.dirty;var s=E.bounds;if(s)for(var l=s[0],u=s[1],g=0;g<3;++g)n[g]=Math.min(n[g],l[g]),i[g]=Math.max(i[g],u[g])}var p=M.bounds;if(M.autoBounds)for(g=0;g<3;++g){if(i[g]<n[g])n[g]=-1,i[g]=1;else{n[g]===i[g]&&(n[g]-=1,i[g]+=1);var f=.05*(i[g]-n[g]);n[g]=n[g]-f,i[g]=i[g]+f}p[0][g]=n[g],p[1][g]=i[g]}var y=!1;for(g=0;g<3;++g)y=y||Z[0][g]!==p[0][g]||Z[1][g]!==p[1][g],Z[0][g]=p[0][g],Z[1][g]=p[1][g];if(T=T||y,_=_||y){if(y){var b=[0,0,0];for(o=0;o<3;++o)b[o]=m((p[1][o]-p[0][o])/10);C.autoTicks?C.update({bounds:p,tickSpacing:b}):C.update({bounds:p})}var F=r.drawingBufferWidth,A=r.drawingBufferHeight;for(N[0]=F,N[1]=A,D[0]=0|Math.max(F/M.pixelRatio,1),D[1]=0|Math.max(A/M.pixelRatio,1),function(e,t){var r=e.bounds,n=e.cameraParams,i=n.projection,a=n.model,o=e.gl.drawingBufferWidth,s=e.gl.drawingBufferHeight,l=e.zNear,c=e.zFar,u=e.fovy,g=o/s;t?(h(i,-g,g,-1,1,l,c),n._ortho=!0):(d(i,u,g,l,c),n._ortho=!1);for(var p=0;p<16;++p)a[p]=0;a[15]=1;var f=0;for(p=0;p<3;++p)f=Math.max(f,r[1][p]-r[0][p]);for(p=0;p<3;++p)e.autoScale?a[5*p]=e.aspect[p]/(r[1][p]-r[0][p]):a[5*p]=1/f,e.autoCenter&&(a[12+p]=.5*-a[5*p]*(r[0][p]+r[1][p]))}(M,I),o=0;o<t;++o)(E=U[o]).axesBounds=p,M.clipToBounds&&(E.clipBounds=p);v.object&&(M.snapToData?Q.position=v.dataCoordinate:Q.position=v.dataPosition,Q.bounds=p),T&&(T=!1,function(){if(!X()){r.colorMask(!0,!0,!0,!0),r.depthMask(!0),r.disable(r.BLEND),r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL);for(var e=U.length,t=L.length,n=0;n<t;++n){var i=L[n];i.shape=D,i.begin();for(var a=0;a<e;++a)if(S[a]===n){var o=U[a];o.drawPick&&(o.pixelRatio=1,o.drawPick(k))}i.end()}}}()),M.axesPixels=a(M.axes,k,F,A),M.onrender&&M.onrender(),r.bindFramebuffer(r.FRAMEBUFFER,null),r.viewport(0,0,F,A),M.clearRGBA(),r.depthMask(!0),r.colorMask(!0,!0,!0,!0),r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL),r.disable(r.BLEND),r.disable(r.CULL_FACE);var w=!1;for(C.enable&&(w=w||C.isTransparent(),C.draw(k)),Q.axes=C,v.object&&Q.draw(k),r.disable(r.CULL_FACE),o=0;o<t;++o)(E=U[o]).axes=C,E.pixelRatio=M.pixelRatio,E.isOpaque&&E.isOpaque()&&E.draw(k),E.isTransparent&&E.isTransparent()&&(w=!0);if(w){for(x.shape=N,x.bind(),r.clear(r.DEPTH_BUFFER_BIT),r.colorMask(!1,!1,!1,!1),r.depthMask(!0),r.depthFunc(r.LESS),C.enable&&C.isTransparent()&&C.drawTransparent(k),o=0;o<t;++o)(E=U[o]).isOpaque&&E.isOpaque()&&E.draw(k);for(r.enable(r.BLEND),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.colorMask(!0,!0,!0,!0),r.depthMask(!1),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),C.isTransparent()&&C.drawTransparent(k),o=0;o<t;++o){var E;(E=U[o]).isTransparent&&E.isTransparent()&&E.drawTransparent(k)}r.bindFramebuffer(r.FRAMEBUFFER,null),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.disable(r.DEPTH_TEST),B.bind(),x.color[0].bind(0),B.uniforms.accumBuffer=0,c(r),r.disable(r.BLEND)}for(_=!1,o=0;o<t;++o)U[o].dirty=!1}}}return M.enableMouseListeners(),function e(){M._stopped||M.contextLost||(W(),requestAnimationFrame(e))}(),M.redraw=function(){M._stopped||(_=!0,W())},M},createCamera:n}},8023:function(e,t,r){var n=r(6832);t.pointVertex=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),t.pointFragment=n(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),t.pickVertex=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),t.pickFragment=n(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},8271:function(e,t,r){var n=r(5158),i=r(5827),a=r(5306),o=r(8023);function s(e,t,r,n,i){this.plot=e,this.offsetBuffer=t,this.pickBuffer=r,this.shader=n,this.pickShader=i,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}e.exports=function(e,t){var r=e.gl,a=i(r),l=i(r),c=n(r,o.pointVertex,o.pointFragment),u=n(r,o.pickVertex,o.pickFragment),d=new s(e,a,l,c,u);return d.update(t),e.addObject(d),d};var l,c,u=s.prototype;u.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},u.update=function(e){var t;function r(t,r){return t in e?e[t]:r}e=e||{},this.sizeMin=r("sizeMin",.5),this.sizeMax=r("sizeMax",20),this.color=r("color",[1,0,0,1]).slice(),this.areaRatio=r("areaRatio",1),this.borderColor=r("borderColor",[0,0,0,1]).slice(),this.blend=r("blend",!1);var n=e.positions.length>>>1,i=e.positions instanceof Float32Array,o=e.idToIndex instanceof Int32Array&&e.idToIndex.length>=n,s=e.positions,l=i?s:a.mallocFloat32(s.length),c=o?e.idToIndex:a.mallocInt32(n);if(i||l.set(s),!o)for(l.set(s),t=0;t<n;t++)c[t]=t;this.points=s,this.offsetBuffer.update(l),this.pickBuffer.update(c),i||a.free(l),o||a.free(c),this.pointCount=n,this.pickOffset=0},u.unifiedDraw=(l=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0],function(e){var t=void 0!==e,r=t?this.pickShader:this.shader,n=this.plot.gl,i=this.plot.dataBox;if(0===this.pointCount)return e;var a=i[2]-i[0],o=i[3]-i[1],s=function(e,t){var r,n=0,i=e.length>>>1;for(r=0;r<i;r++){var a=e[2*r],o=e[2*r+1];a>=t[0]&&a<=t[2]&&o>=t[1]&&o<=t[3]&&n++}return n}(this.points,i),u=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(s,.33333)));l[0]=2/a,l[4]=2/o,l[6]=-2*i[0]/a-1,l[7]=-2*i[1]/o-1,this.offsetBuffer.bind(),r.bind(),r.attributes.position.pointer(),r.uniforms.matrix=l,r.uniforms.color=this.color,r.uniforms.borderColor=this.borderColor,r.uniforms.pointCloud=u<5,r.uniforms.pointSize=u,r.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),t&&(c[0]=255&e,c[1]=e>>8&255,c[2]=e>>16&255,c[3]=e>>24&255,this.pickBuffer.bind(),r.attributes.pickId.pointer(n.UNSIGNED_BYTE),r.uniforms.pickOffset=c,this.pickOffset=e);var d=n.getParameter(n.BLEND),h=n.getParameter(n.DITHER);return d&&!this.blend&&n.disable(n.BLEND),h&&n.disable(n.DITHER),n.drawArrays(n.POINTS,0,this.pointCount),d&&!this.blend&&n.enable(n.BLEND),h&&n.enable(n.DITHER),e+this.pointCount}),u.draw=u.unifiedDraw,u.drawPick=u.unifiedDraw,u.pick=function(e,t,r){var n=this.pickOffset,i=this.pointCount;if(r<n||r>=n+i)return null;var a=r-n,o=this.points;return{object:this,pointId:a,dataCoord:[o[2*a],o[2*a+1]]}}},6093:function(e){e.exports=function(e,t,r,n){var i,a,o,s,l,c=t[0],u=t[1],d=t[2],h=t[3],g=r[0],p=r[1],f=r[2],m=r[3];return(a=c*g+u*p+d*f+h*m)<0&&(a=-a,g=-g,p=-p,f=-f,m=-m),1-a>1e-6?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-n)*i)/o,l=Math.sin(n*i)/o):(s=1-n,l=n),e[0]=s*c+l*g,e[1]=s*u+l*p,e[2]=s*d+l*f,e[3]=s*h+l*m,e}},8240:function(e){e.exports=function(e){return e||0===e?e.toString():""}},4123:function(e,t,r){var n=r(875);e.exports=function(e,t,r){var a=i[t];if(a||(a=i[t]={}),e in a)return a[e];var o={textAlign:"center",textBaseline:"middle",lineHeight:1,font:t,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},s=n(e,o);o.triangles=!1;var l,c,u=n(e,o);if(r&&1!==r){for(l=0;l<s.positions.length;++l)for(c=0;c<s.positions[l].length;++c)s.positions[l][c]/=r;for(l=0;l<u.positions.length;++l)for(c=0;c<u.positions[l].length;++c)u.positions[l][c]/=r}var d=[[1/0,1/0],[-1/0,-1/0]],h=u.positions.length;for(l=0;l<h;++l){var g=u.positions[l];for(c=0;c<2;++c)d[0][c]=Math.min(d[0][c],g[c]),d[1][c]=Math.max(d[1][c],g[c])}return a[e]=[s,u,d]};var i={}},9282:function(e,t,r){var n=r(5158),i=r(6832),a=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),o=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),l=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),c=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),u=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],d={vertex:a,fragment:l,attributes:u},h={vertex:o,fragment:l,attributes:u},g={vertex:s,fragment:l,attributes:u},p={vertex:a,fragment:c,attributes:u},f={vertex:o,fragment:c,attributes:u},m={vertex:s,fragment:c,attributes:u};function y(e,t){var r=n(e,t),i=r.attributes;return i.position.location=0,i.color.location=1,i.glyph.location=2,i.id.location=3,r}t.createPerspective=function(e){return y(e,d)},t.createOrtho=function(e){return y(e,h)},t.createProject=function(e){return y(e,g)},t.createPickPerspective=function(e){return y(e,p)},t.createPickOrtho=function(e){return y(e,f)},t.createPickProject=function(e){return y(e,m)}},2182:function(e,t,r){var n=r(3596),i=r(5827),a=r(2944),o=r(5306),s=r(104),l=r(9282),c=r(4123),u=r(8240),d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function h(e,t){var r=e[0],n=e[1],i=e[2],a=e[3];return e[0]=t[0]*r+t[4]*n+t[8]*i+t[12]*a,e[1]=t[1]*r+t[5]*n+t[9]*i+t[13]*a,e[2]=t[2]*r+t[6]*n+t[10]*i+t[14]*a,e[3]=t[3]*r+t[7]*n+t[11]*i+t[15]*a,e}function g(e,t,r,n){return h(n,n),h(n,n),h(n,n)}function p(e,t){this.index=e,this.dataCoordinate=this.position=t}function f(e){return!0===e||e>1?1:e}function m(e,t,r,n,i,a,o,s,l,c,u,d){this.gl=e,this.pixelRatio=1,this.shader=t,this.orthoShader=r,this.projectShader=n,this.pointBuffer=i,this.colorBuffer=a,this.glyphBuffer=o,this.idBuffer=s,this.vao=l,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=c,this.pickOrthoShader=u,this.pickProjectShader=d,this.points=[],this._selectResult=new p(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}e.exports=function(e){var t=e.gl,r=l.createPerspective(t),n=l.createOrtho(t),o=l.createProject(t),s=l.createPickPerspective(t),c=l.createPickOrtho(t),u=l.createPickProject(t),d=i(t),h=i(t),g=i(t),p=i(t),f=a(t,[{buffer:d,size:3,type:t.FLOAT},{buffer:h,size:4,type:t.FLOAT},{buffer:g,size:2,type:t.FLOAT},{buffer:p,size:4,type:t.UNSIGNED_BYTE,normalized:!0}]),y=new m(t,r,n,o,d,h,g,p,f,s,c,u);return y.update(e),y};var y=m.prototype;y.pickSlots=1,y.setPickBase=function(e){this.pickId=e},y.isTransparent=function(){if(this.hasAlpha)return!0;for(var e=0;e<3;++e)if(this.axesProject[e]&&this.projectHasAlpha)return!0;return!1},y.isOpaque=function(){if(!this.hasAlpha)return!0;for(var e=0;e<3;++e)if(this.axesProject[e]&&!this.projectHasAlpha)return!0;return!1};var b=[0,0],v=[0,0,0],x=[0,0,0],B=[0,0,0,1],I=[0,0,0,1],F=d.slice(),A=[0,0,0],C=[[0,0,0],[0,0,0]];function w(e){return e[0]=e[1]=e[2]=0,e}function Q(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1,e}function U(e,t,r,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[r]=n,e}function S(e,t,r,n){var i,a=t.axesProject,o=t.gl,l=e.uniforms,c=r.model||d,u=r.view||d,h=r.projection||d,p=t.axesBounds,f=function(e){for(var t=C,r=0;r<2;++r)for(var n=0;n<3;++n)t[r][n]=Math.max(Math.min(e[r][n],1e8),-1e8);return t}(t.clipBounds);i=t.axes&&t.axes.lastCubeProps?t.axes.lastCubeProps.axis:[1,1,1],b[0]=2/o.drawingBufferWidth,b[1]=2/o.drawingBufferHeight,e.bind(),l.view=u,l.projection=h,l.screenSize=b,l.highlightId=t.highlightId,l.highlightScale=t.highlightScale,l.clipBounds=f,l.pickGroup=t.pickId/255,l.pixelRatio=n;for(var m=0;m<3;++m)if(a[m]){l.scale=t.projectScale[m],l.opacity=t.projectOpacity[m];for(var y=F,S=0;S<16;++S)y[S]=0;for(S=0;S<4;++S)y[5*S]=1;y[5*m]=0,i[m]<0?y[12+m]=p[0][m]:y[12+m]=p[1][m],s(y,c,y),l.model=y;var E=(m+1)%3,L=(m+2)%3,_=w(v),T=w(x);_[E]=1,T[L]=1;var R=g(0,0,0,Q(B,_)),$=g(0,0,0,Q(I,T));if(Math.abs(R[1])>Math.abs($[1])){var k=R;R=$,$=k,k=_,_=T,T=k;var N=E;E=L,L=N}R[0]<0&&(_[E]=-1),$[1]>0&&(T[L]=-1);var G=0,M=0;for(S=0;S<4;++S)G+=Math.pow(c[4*E+S],2),M+=Math.pow(c[4*L+S],2);_[E]/=Math.sqrt(G),T[L]/=Math.sqrt(M),l.axes[0]=_,l.axes[1]=T,l.fragClipBounds[0]=U(A,f[0],m,-1e8),l.fragClipBounds[1]=U(A,f[1],m,1e8),t.vao.bind(),t.vao.draw(o.TRIANGLES,t.vertexCount),t.lineWidth>0&&(o.lineWidth(t.lineWidth*n),t.vao.draw(o.LINES,t.lineVertexCount,t.vertexCount)),t.vao.unbind()}}var E=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function L(e,t,r,n,i,a,o){var s=r.gl;if((a===r.projectHasAlpha||o)&&S(t,r,n,i),a===r.hasAlpha||o){e.bind();var l=e.uniforms;l.model=n.model||d,l.view=n.view||d,l.projection=n.projection||d,b[0]=2/s.drawingBufferWidth,b[1]=2/s.drawingBufferHeight,l.screenSize=b,l.highlightId=r.highlightId,l.highlightScale=r.highlightScale,l.fragClipBounds=E,l.clipBounds=r.axes.bounds,l.opacity=r.opacity,l.pickGroup=r.pickId/255,l.pixelRatio=i,r.vao.bind(),r.vao.draw(s.TRIANGLES,r.vertexCount),r.lineWidth>0&&(s.lineWidth(r.lineWidth*i),r.vao.draw(s.LINES,r.lineVertexCount,r.vertexCount)),r.vao.unbind()}}function _(e,t,r,i){var a;a=Array.isArray(e)?t<e.length?e[t]:void 0:e,a=u(a);var o=!0;n(a)&&(a="▼",o=!1);var s=c(a,r,i);return{mesh:s[0],lines:s[1],bounds:s[2],visible:o}}y.draw=function(e){L(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,e,this.pixelRatio,!1,!1)},y.drawTransparent=function(e){L(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,e,this.pixelRatio,!0,!1)},y.drawPick=function(e){L(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,e,1,!0,!0)},y.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=e.value[2]+(e.value[1]<<8)+(e.value[0]<<16);if(t>=this.pointCount||t<0)return null;var r=this.points[t],n=this._selectResult;n.index=t;for(var i=0;i<3;++i)n.position[i]=n.dataCoordinate[i]=r[i];return n},y.highlight=function(e){if(e){var t=e.index,r=255&t,n=t>>8&255,i=t>>16&255;this.highlightId=[r/255,n/255,i/255,0]}else this.highlightId=[1,1,1,1]},y.update=function(e){if("perspective"in(e=e||{})&&(this.useOrtho=!e.perspective),"orthographic"in e&&(this.useOrtho=!!e.orthographic),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"project"in e)if(Array.isArray(e.project))this.axesProject=e.project;else{var t=!!e.project;this.axesProject=[t,t,t]}if("projectScale"in e)if(Array.isArray(e.projectScale))this.projectScale=e.projectScale.slice();else{var r=+e.projectScale;this.projectScale=[r,r,r]}if(this.projectHasAlpha=!1,"projectOpacity"in e){Array.isArray(e.projectOpacity)?this.projectOpacity=e.projectOpacity.slice():(r=+e.projectOpacity,this.projectOpacity=[r,r,r]);for(var n=0;n<3;++n)this.projectOpacity[n]=f(this.projectOpacity[n]),this.projectOpacity[n]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in e&&(this.opacity=f(e.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var i,a,s=e.position,l=e.font||"normal",c=e.alignment||[0,0];if(2===c.length)i=c[0],a=c[1];else for(i=[],a=[],n=0;n<c.length;++n)i[n]=c[n][0],a[n]=c[n][1];var u=[1/0,1/0,1/0],d=[-1/0,-1/0,-1/0],h=e.glyph,g=e.color,p=e.size,m=e.angle,y=e.lineColor,b=-1,v=0,x=0,B=0;if(s.length){B=s.length;e:for(n=0;n<B;++n){for(var I=s[n],F=0;F<3;++F)if(isNaN(I[F])||!isFinite(I[F]))continue e;var A=(M=_(h,n,l,this.pixelRatio)).mesh,C=M.lines,w=M.bounds;v+=3*A.cells.length,x+=2*C.edges.length}}var Q=v+x,U=o.mallocFloat(3*Q),S=o.mallocFloat(4*Q),E=o.mallocFloat(2*Q),L=o.mallocUint32(Q);if(Q>0){var T=0,R=v,$=[0,0,0,1],k=[0,0,0,1],N=Array.isArray(g)&&Array.isArray(g[0]),G=Array.isArray(y)&&Array.isArray(y[0]);e:for(n=0;n<B;++n){for(b+=1,I=s[n],F=0;F<3;++F){if(isNaN(I[F])||!isFinite(I[F]))continue e;d[F]=Math.max(d[F],I[F]),u[F]=Math.min(u[F],I[F])}A=(M=_(h,n,l,this.pixelRatio)).mesh,C=M.lines,w=M.bounds;var M,D=M.visible;if(D)if(Array.isArray(g)){if(3===(V=N?n<g.length?g[n]:[0,0,0,0]:g).length){for(F=0;F<3;++F)$[F]=V[F];$[3]=1}else if(4===V.length){for(F=0;F<4;++F)$[F]=V[F];!this.hasAlpha&&V[3]<1&&(this.hasAlpha=!0)}}else $[0]=$[1]=$[2]=0,$[3]=1;else $=[1,1,1,0];if(D)if(Array.isArray(y)){var V;if(3===(V=G?n<y.length?y[n]:[0,0,0,0]:y).length){for(F=0;F<3;++F)k[F]=V[F];k[F]=1}else if(4===V.length){for(F=0;F<4;++F)k[F]=V[F];!this.hasAlpha&&V[3]<1&&(this.hasAlpha=!0)}}else k[0]=k[1]=k[2]=0,k[3]=1;else k=[1,1,1,0];var H=.5;D?Array.isArray(p)?H=n<p.length?+p[n]:12:p?H=+p:this.useOrtho&&(H=12):H=0;var X=0;Array.isArray(m)?X=n<m.length?+m[n]:0:m&&(X=+m);var O=Math.cos(X),Z=Math.sin(X);for(I=s[n],F=0;F<3;++F)d[F]=Math.max(d[F],I[F]),u[F]=Math.min(u[F],I[F]);var W=i,Y=a;W=0,Array.isArray(i)?W=n<i.length?i[n]:0:i&&(W=i),Y=0,Array.isArray(a)?Y=n<a.length?a[n]:0:a&&(Y=a);var P=[W*=W>0?1-w[0][0]:W<0?1+w[1][0]:1,Y*=Y>0?1-w[0][1]:Y<0?1+w[1][1]:1],z=A.cells||[],J=A.positions||[];for(F=0;F<z.length;++F)for(var j=z[F],K=0;K<3;++K){for(var q=0;q<3;++q)U[3*T+q]=I[q];for(q=0;q<4;++q)S[4*T+q]=$[q];L[T]=b;var ee=J[j[K]];E[2*T]=H*(O*ee[0]-Z*ee[1]+P[0]),E[2*T+1]=H*(Z*ee[0]+O*ee[1]+P[1]),T+=1}for(z=C.edges,J=C.positions,F=0;F<z.length;++F)for(j=z[F],K=0;K<2;++K){for(q=0;q<3;++q)U[3*R+q]=I[q];for(q=0;q<4;++q)S[4*R+q]=k[q];L[R]=b,ee=J[j[K]],E[2*R]=H*(O*ee[0]-Z*ee[1]+P[0]),E[2*R+1]=H*(Z*ee[0]+O*ee[1]+P[1]),R+=1}}}this.bounds=[u,d],this.points=s,this.pointCount=s.length,this.vertexCount=v,this.lineVertexCount=x,this.pointBuffer.update(U),this.colorBuffer.update(S),this.glyphBuffer.update(E),this.idBuffer.update(L),o.free(U),o.free(S),o.free(E),o.free(L)},y.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},1884:function(e,t,r){var n=r(6832);t.boxVertex=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),t.boxFragment=n(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},6623:function(e,t,r){var n=r(5158),i=r(5827),a=r(1884);function o(e,t,r){this.plot=e,this.boxBuffer=t,this.boxShader=r,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}e.exports=function(e,t){var r=e.gl,s=i(r,[0,0,0,1,1,0,1,1]),l=n(r,a.boxVertex,a.boxFragment),c=new o(e,s,l);return c.update(t),e.addOverlay(c),c};var s=o.prototype;s.draw=function(){if(this.enabled){var e=this.plot,t=this.selectBox,r=this.borderWidth;this.innerFill;var n=this.innerColor;this.outerFill;var i=this.outerColor,a=this.borderColor,o=e.box,s=e.screenBox,l=e.dataBox,c=e.viewBox,u=e.pixelRatio,d=(t[0]-l[0])*(c[2]-c[0])/(l[2]-l[0])+c[0],h=(t[1]-l[1])*(c[3]-c[1])/(l[3]-l[1])+c[1],g=(t[2]-l[0])*(c[2]-c[0])/(l[2]-l[0])+c[0],p=(t[3]-l[1])*(c[3]-c[1])/(l[3]-l[1])+c[1];if(d=Math.max(d,c[0]),h=Math.max(h,c[1]),g=Math.min(g,c[2]),p=Math.min(p,c[3]),!(g<d||p<h)){o.bind();var f=s[2]-s[0],m=s[3]-s[1];if(this.outerFill&&(o.drawBox(0,0,f,h,i),o.drawBox(0,h,d,p,i),o.drawBox(0,p,f,m,i),o.drawBox(g,h,f,p,i)),this.innerFill&&o.drawBox(d,h,g,p,n),r>0){var y=r*u;o.drawBox(d-y,h-y,g+y,h+y,a),o.drawBox(d-y,p-y,g+y,p+y,a),o.drawBox(d-y,h-y,d+y,p+y,a),o.drawBox(g-y,h-y,g+y,p+y,a)}}}},s.update=function(e){e=e||{},this.innerFill=!!e.innerFill,this.outerFill=!!e.outerFill,this.innerColor=(e.innerColor||[0,0,0,.5]).slice(),this.outerColor=(e.outerColor||[0,0,0,.5]).slice(),this.borderColor=(e.borderColor||[0,0,0,1]).slice(),this.borderWidth=e.borderWidth||0,this.selectBox=(e.selectBox||this.selectBox).slice()},s.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},2611:function(e,t,r){e.exports=function(e,t){var r=t[0],a=t[1],o=n(e,r,a,{}),s=i.mallocUint8(r*a*4);return new l(e,o,s)};var n=r(4234),i=r(5306),a=r(5050),o=r(2288).nextPow2;function s(e,t,r,n,i){this.coord=[e,t],this.id=r,this.value=n,this.distance=i}function l(e,t,r){this.gl=e,this.fbo=t,this.buffer=r,this._readTimeout=null;var n=this;this._readCallback=function(){n.gl&&(t.bind(),e.readPixels(0,0,t.shape[0],t.shape[1],e.RGBA,e.UNSIGNED_BYTE,n.buffer),n._readTimeout=null)}}var c=l.prototype;Object.defineProperty(c,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(e){if(this.gl){this.fbo.shape=e;var t=this.fbo.shape[0],r=this.fbo.shape[1];if(r*t*4>this.buffer.length){i.free(this.buffer);for(var n=this.buffer=i.mallocUint8(o(r*t*4)),a=0;a<r*t*4;++a)n[a]=255}return e}}}),c.begin=function(){var e=this.gl;this.shape,e&&(this.fbo.bind(),e.clearColor(1,1,1,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT))},c.end=function(){var e=this.gl;e&&(e.bindFramebuffer(e.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},c.query=function(e,t,r){if(!this.gl)return null;var n=this.fbo.shape.slice();e|=0,t|=0,"number"!=typeof r&&(r=1);var i=0|Math.min(Math.max(e-r,0),n[0]),o=0|Math.min(Math.max(e+r,0),n[0]),l=0|Math.min(Math.max(t-r,0),n[1]),c=0|Math.min(Math.max(t+r,0),n[1]);if(o<=i||c<=l)return null;var u=[o-i,c-l],d=a(this.buffer,[u[0],u[1],4],[4,4*n[0],1],4*(i+n[0]*l)),h=function(e,t,r){for(var n=1e8,i=-1,a=-1,o=e.shape[0],s=e.shape[1],l=0;l<o;l++)for(var c=0;c<s;c++){var u=e.get(l,c,0),d=e.get(l,c,1),h=e.get(l,c,2),g=e.get(l,c,3);if(u<255||d<255||h<255||g<255){var p=t-l,f=r-c,m=p*p+f*f;m<n&&(n=m,i=l,a=c)}}return[i,a,n]}(d.hi(u[0],u[1],1),r,r),g=h[0],p=h[1];return g<0||Math.pow(this.radius,2)<h[2]?null:new s(g+i|0,p+l|0,d.get(g,p,0),[d.get(g,p,1),d.get(g,p,2),d.get(g,p,3)],Math.sqrt(h[2]))},c.dispose=function(){this.gl&&(this.fbo.dispose(),i.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},5158:function(e,t,r){var n=r(9016),i=r(4280),a=r(3984),o=r(1628),s=r(2631),l=r(9068);function c(e){this.gl=e,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var u=c.prototype;function d(e,t){return e.name<t.name?-1:1}u.bind=function(){var e;this.program||this._relink();var t=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),r=this.gl.lastAttribCount;if(t>r)for(e=r;e<t;e++)this.gl.enableVertexAttribArray(e);else if(r>t)for(e=t;e<r;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=t,this.gl.useProgram(this.program)},u.dispose=function(){for(var e=this.gl.lastAttribCount,t=0;t<e;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},u.update=function(e,t,r,c){if(!t||1===arguments.length){var u=e;e=u.vertex,t=u.fragment,r=u.uniforms,c=u.attributes}var h=this,g=h.gl,p=h._vref;h._vref=o.shader(g,g.VERTEX_SHADER,e),p&&p.dispose(),h.vertShader=h._vref.shader;var f=this._fref;if(h._fref=o.shader(g,g.FRAGMENT_SHADER,t),f&&f.dispose(),h.fragShader=h._fref.shader,!r||!c){var m=g.createProgram();if(g.attachShader(m,h.fragShader),g.attachShader(m,h.vertShader),g.linkProgram(m),!g.getProgramParameter(m,g.LINK_STATUS)){var y=g.getProgramInfoLog(m);throw new l(y,"Error linking program:"+y)}r=r||s.uniforms(g,m),c=c||s.attributes(g,m),g.deleteProgram(m)}(c=c.slice()).sort(d);var b,v=[],x=[],B=[];for(b=0;b<c.length;++b){var I=c[b];if(I.type.indexOf("mat")>=0){for(var F=0|I.type.charAt(I.type.length-1),A=new Array(F),C=0;C<F;++C)A[C]=B.length,x.push(I.name+"["+C+"]"),"number"==typeof I.location?B.push(I.location+C):Array.isArray(I.location)&&I.location.length===F&&"number"==typeof I.location[C]?B.push(0|I.location[C]):B.push(-1);v.push({name:I.name,type:I.type,locations:A})}else v.push({name:I.name,type:I.type,locations:[B.length]}),x.push(I.name),"number"==typeof I.location?B.push(0|I.location):B.push(-1)}var w=0;for(b=0;b<B.length;++b)if(B[b]<0){for(;B.indexOf(w)>=0;)w+=1;B[b]=w}var Q=new Array(r.length);function U(){h.program=o.program(g,h._vref,h._fref,x,B);for(var e=0;e<r.length;++e)Q[e]=g.getUniformLocation(h.program,r[e].name)}U(),h._relink=U,h.types={uniforms:a(r),attributes:a(c)},h.attributes=i(g,h,v,B),Object.defineProperty(h,"uniforms",n(g,h,r,Q))},e.exports=function(e,t,r,n,i){var a=new c(e);return a.update(t,r,n,i),a}},9068:function(e){function t(e,t,r){this.shortMessage=t||"",this.longMessage=r||"",this.rawError=e||"",this.message="gl-shader: "+(t||e||"")+(r?"\n"+r:""),this.stack=(new Error).stack}t.prototype=new Error,t.prototype.name="GLError",t.prototype.constructor=t,e.exports=t},4280:function(e,t,r){e.exports=function(e,t,r,i){for(var a={},o=0,c=r.length;o<c;++o){var u=r[o],d=u.name,h=u.type,g=u.locations;switch(h){case"bool":case"int":case"float":s(e,t,g[0],i,1,a,d);break;default:if(h.indexOf("vec")>=0){if((p=h.charCodeAt(h.length-1)-48)<2||p>4)throw new n("","Invalid data type for attribute "+d+": "+h);s(e,t,g[0],i,p,a,d)}else{if(!(h.indexOf("mat")>=0))throw new n("","Unknown data type for attribute "+d+": "+h);var p;if((p=h.charCodeAt(h.length-1)-48)<2||p>4)throw new n("","Invalid data type for attribute "+d+": "+h);l(e,t,g,i,p,a,d)}}}return a};var n=r(9068);function i(e,t,r,n,i,a){this._gl=e,this._wrapper=t,this._index=r,this._locations=n,this._dimension=i,this._constFunc=a}var a=i.prototype;a.pointer=function(e,t,r,n){var i=this,a=i._gl,o=i._locations[i._index];a.vertexAttribPointer(o,i._dimension,e||a.FLOAT,!!t,r||0,n||0),a.enableVertexAttribArray(o)},a.set=function(e,t,r,n){return this._constFunc(this._locations[this._index],e,t,r,n)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(e){return e!==this._locations[this._index]&&(this._locations[this._index]=0|e,this._wrapper.program=null),0|e}});var o=[function(e,t,r){return void 0===r.length?e.vertexAttrib1f(t,r):e.vertexAttrib1fv(t,r)},function(e,t,r,n){return void 0===r.length?e.vertexAttrib2f(t,r,n):e.vertexAttrib2fv(t,r)},function(e,t,r,n,i){return void 0===r.length?e.vertexAttrib3f(t,r,n,i):e.vertexAttrib3fv(t,r)},function(e,t,r,n,i,a){return void 0===r.length?e.vertexAttrib4f(t,r,n,i,a):e.vertexAttrib4fv(t,r)}];function s(e,t,r,n,a,s,l){var c=o[a],u=new i(e,t,r,n,a,c);Object.defineProperty(s,l,{set:function(t){return e.disableVertexAttribArray(n[r]),c(e,n[r],t),t},get:function(){return u},enumerable:!0})}function l(e,t,r,n,i,a,o){for(var l=new Array(i),c=new Array(i),u=0;u<i;++u)s(e,t,r[u],n,i,l,u),c[u]=l[u];Object.defineProperty(l,"location",{set:function(e){if(Array.isArray(e))for(var t=0;t<i;++t)c[t].location=e[t];else for(t=0;t<i;++t)c[t].location=e+t;return e},get:function(){for(var e=new Array(i),t=0;t<i;++t)e[t]=n[r[t]];return e},enumerable:!0}),l.pointer=function(t,a,o,s){t=t||e.FLOAT,a=!!a,o=o||i*i,s=s||0;for(var l=0;l<i;++l){var c=n[r[l]];e.vertexAttribPointer(c,i,t,a,o,s+l*i),e.enableVertexAttribArray(c)}};var d=new Array(i),h=e["vertexAttrib"+i+"fv"];Object.defineProperty(a,o,{set:function(t){for(var a=0;a<i;++a){var o=n[r[a]];if(e.disableVertexAttribArray(o),Array.isArray(t[0]))h.call(e,o,t[a]);else{for(var s=0;s<i;++s)d[s]=t[i*a+s];h.call(e,o,d)}}return t},get:function(){return l},enumerable:!0})}},9016:function(e,t,r){var n=r(3984),i=r(9068);function a(e){return function(){return e}}function o(e,t){for(var r=new Array(e),n=0;n<e;++n)r[n]=t;return r}e.exports=function(e,t,r,s){function l(t){return function(n){for(var a=c("",t),o=0;o<a.length;++o){var l=a[o],u=l[0],d=l[1];if(s[d]){var h=n;if("string"==typeof u&&(0===u.indexOf(".")||0===u.indexOf("["))){var g=u;if(0===u.indexOf(".")&&(g=u.slice(1)),g.indexOf("]")===g.length-1){var p=g.indexOf("["),f=g.slice(0,p),m=g.slice(p+1,g.length-1);h=f?n[f][m]:n[m]}else h=n[g]}var y,b=r[d].type;switch(b){case"bool":case"int":case"sampler2D":case"samplerCube":e.uniform1i(s[d],h);break;case"float":e.uniform1f(s[d],h);break;default:var v=b.indexOf("vec");if(!(0<=v&&v<=1&&b.length===4+v)){if(0===b.indexOf("mat")&&4===b.length){if((y=b.charCodeAt(b.length-1)-48)<2||y>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+b);e["uniformMatrix"+y+"fv"](s[d],!1,h);break}throw new i("","Unknown uniform data type for "+name+": "+b)}if((y=b.charCodeAt(b.length-1)-48)<2||y>4)throw new i("","Invalid data type");switch(b.charAt(0)){case"b":case"i":e["uniform"+y+"iv"](s[d],h);break;case"v":e["uniform"+y+"fv"](s[d],h);break;default:throw new i("","Unrecognized data type for vector "+name+": "+b)}}}}}}function c(e,t){if("object"!=typeof t)return[[e,t]];var r=[];for(var n in t){var i=t[n],a=e;parseInt(n)+""===n?a+="["+n+"]":a+="."+n,"object"==typeof i?r.push.apply(r,c(a,i)):r.push([a,i])}return r}function u(e,t,n){if("object"==typeof n){var c=d(n);Object.defineProperty(e,t,{get:a(c),set:l(n),enumerable:!0,configurable:!1})}else s[n]?Object.defineProperty(e,t,{get:(u=n,function(e,t,r){return e.getUniform(t.program,r[u])}),set:l(n),enumerable:!0,configurable:!1}):e[t]=function(e){switch(e){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var t=e.indexOf("vec");if(0<=t&&t<=1&&e.length===4+t){if((r=e.charCodeAt(e.length-1)-48)<2||r>4)throw new i("","Invalid data type");return"b"===e.charAt(0)?o(r,!1):o(r,0)}if(0===e.indexOf("mat")&&4===e.length){var r;if((r=e.charCodeAt(e.length-1)-48)<2||r>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+e);return o(r*r,0)}throw new i("","Unknown uniform data type for "+name+": "+e)}}(r[n].type);var u}function d(e){var t;if(Array.isArray(e)){t=new Array(e.length);for(var r=0;r<e.length;++r)u(t,r,e[r])}else for(var n in t={},e)u(t,n,e[n]);return t}var h=n(r,!0);return{get:a(d(h)),set:l(h),enumerable:!0,configurable:!0}}},3984:function(e){e.exports=function(e,t){for(var r={},n=0;n<e.length;++n)for(var i=e[n].name.split("."),a=r,o=0;o<i.length;++o){var s=i[o].split("[");if(s.length>1){s[0]in a||(a[s[0]]=[]),a=a[s[0]];for(var l=1;l<s.length;++l){var c=parseInt(s[l]);l<s.length-1||o<i.length-1?(c in a||(l<s.length-1?a[c]=[]:a[c]={}),a=a[c]):a[c]=t?n:e[n].type}}else o<i.length-1?(s[0]in a||(a[s[0]]={}),a=a[s[0]]):a[s[0]]=t?n:e[n].type}return r}},2631:function(e,t){t.uniforms=function(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=[],a=0;a<r;++a){var o=e.getActiveUniform(t,a);if(o){var s=i(e,o.type);if(o.size>1)for(var l=0;l<o.size;++l)n.push({name:o.name.replace("[0]","["+l+"]"),type:s});else n.push({name:o.name,type:s})}}return n},t.attributes=function(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=[],a=0;a<r;++a){var o=e.getActiveAttrib(t,a);o&&n.push({name:o.name,type:i(e,o.type)})}return n};var r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},n=null;function i(e,t){if(!n){var i=Object.keys(r);n={};for(var a=0;a<i.length;++a){var o=i[a];n[e[o]]=r[o]}}return n[t]}},1628:function(e,t,r){t.shader=function(e,t,r){return u(e).getShaderReference(t,r)},t.program=function(e,t,r,n,i){return u(e).getProgram(t,r,n,i)};var n=r(9068),i=r(3530),a=new("undefined"==typeof WeakMap?r(4037):WeakMap),o=0;function s(e,t,r,n,i,a,o){this.id=e,this.src=t,this.type=r,this.shader=n,this.count=a,this.programs=[],this.cache=o}function l(e){this.gl=e,this.shaders=[{},{}],this.programs={}}s.prototype.dispose=function(){if(0==--this.count){for(var e=this.cache,t=e.gl,r=this.programs,n=0,i=r.length;n<i;++n){var a=e.programs[r[n]];a&&(delete e.programs[n],t.deleteProgram(a))}t.deleteShader(this.shader),delete e.shaders[this.type===t.FRAGMENT_SHADER|0][this.src]}};var c=l.prototype;function u(e){var t=a.get(e);return t||(t=new l(e),a.set(e,t)),t}c.getShaderReference=function(e,t){var r=this.gl,a=this.shaders[e===r.FRAGMENT_SHADER|0],l=a[t];if(l&&r.isShader(l.shader))l.count+=1;else{var c=function(e,t,r){var a=e.createShader(t);if(e.shaderSource(a,r),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(a);try{var s=i(o,r,t)}catch(e){throw console.warn("Failed to format compiler error: "+e),new n(o,"Error compiling shader:\n"+o)}throw new n(o,s.short,s.long)}return a}(r,e,t);l=a[t]=new s(o++,t,e,c,[],1,this)}return l},c.getProgram=function(e,t,r,i){var a=[e.id,t.id,r.join(":"),i.join(":")].join("@"),o=this.programs[a];return o&&this.gl.isProgram(o)||(this.programs[a]=o=function(e,t,r,i,a){var o=e.createProgram();e.attachShader(o,t),e.attachShader(o,r);for(var s=0;s<i.length;++s)e.bindAttribLocation(o,a[s],i[s]);if(e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS)){var l=e.getProgramInfoLog(o);throw new n(l,"Error linking program: "+l)}return o}(this.gl,e.shader,t.shader,r,i),e.programs.push(a),t.programs.push(a)),o}},3050:function(e){function t(e){this.plot=e,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}e.exports=function(e,r){var n=new t(e);return n.update(r),e.addOverlay(n),n};var r=t.prototype;r.update=function(e){e=e||{},this.enable=(e.enable||[!0,!0,!1,!1]).slice(),this.width=(e.width||[1,1,1,1]).slice(),this.color=(e.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map((function(e){return e.slice()})),this.center=(e.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},r.draw=function(){var e=this.enable,t=this.width,r=this.color,n=this.center,i=this.plot,a=i.line,o=i.dataBox,s=i.viewBox;if(a.bind(),o[0]<=n[0]&&n[0]<=o[2]&&o[1]<=n[1]&&n[1]<=o[3]){var l=s[0]+(n[0]-o[0])/(o[2]-o[0])*(s[2]-s[0]),c=s[1]+(n[1]-o[1])/(o[3]-o[1])*(s[3]-s[1]);e[0]&&a.drawLine(l,c,s[0],c,t[0],r[0]),e[1]&&a.drawLine(l,c,l,s[1],t[1],r[1]),e[2]&&a.drawLine(l,c,s[2],c,t[2],r[2]),e[3]&&a.drawLine(l,c,l,s[3],t[3],r[3])}},r.dispose=function(){this.plot.removeOverlay(this)}},3540:function(e,t,r){var n=r(6832),i=r(5158),a=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),o=n(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);e.exports=function(e){return i(e,a,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(e,t,r){var n=r(5827),i=r(2944),a=r(3540);e.exports=function(e,t){var r=[];function o(e,t,n,i,a,o){var s=[e,t,n,0,0,0,1];s[i+3]=1,s[i]=a,r.push.apply(r,s),s[6]=-1,r.push.apply(r,s),s[i]=o,r.push.apply(r,s),r.push.apply(r,s),s[6]=1,r.push.apply(r,s),s[i]=a,r.push.apply(r,s)}o(0,0,0,0,0,1),o(0,0,0,1,0,1),o(0,0,0,2,0,1),o(1,0,0,1,-1,1),o(1,0,0,2,-1,1),o(0,1,0,0,-1,1),o(0,1,0,2,-1,1),o(0,0,1,0,-1,1),o(0,0,1,1,-1,1);var l=n(e,r),c=i(e,[{type:e.FLOAT,buffer:l,size:3,offset:0,stride:28},{type:e.FLOAT,buffer:l,size:3,offset:12,stride:28},{type:e.FLOAT,buffer:l,size:1,offset:24,stride:28}]),u=a(e);u.attributes.position.location=0,u.attributes.color.location=1,u.attributes.weight.location=2;var d=new s(e,l,c,u);return d.update(t),d};var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(e,t,r,n){this.gl=e,this.buffer=t,this.vao=r,this.shader=n,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var l=s.prototype,c=[0,0,0],u=[0,0,0],d=[0,0];l.isTransparent=function(){return!1},l.drawTransparent=function(e){},l.draw=function(e){var t=this.gl,r=this.vao,n=this.shader;r.bind(),n.bind();var i,a=e.model||o,s=e.view||o,l=e.projection||o;this.axes&&(i=this.axes.lastCubeProps.axis);for(var h=c,g=u,p=0;p<3;++p)i&&i[p]<0?(h[p]=this.bounds[0][p],g[p]=this.bounds[1][p]):(h[p]=this.bounds[1][p],g[p]=this.bounds[0][p]);for(d[0]=t.drawingBufferWidth,d[1]=t.drawingBufferHeight,n.uniforms.model=a,n.uniforms.view=s,n.uniforms.projection=l,n.uniforms.coordinates=[this.position,h,g],n.uniforms.colors=this.colors,n.uniforms.screenShape=d,p=0;p<3;++p)n.uniforms.lineWidth=this.lineWidth[p]*this.pixelRatio,this.enabled[p]&&(r.draw(t.TRIANGLES,6,6*p),this.drawSides[p]&&r.draw(t.TRIANGLES,12,18+12*p));r.unbind()},l.update=function(e){e&&("bounds"in e&&(this.bounds=e.bounds),"position"in e&&(this.position=e.position),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"colors"in e&&(this.colors=e.colors),"enabled"in e&&(this.enabled=e.enabled),"drawSides"in e&&(this.drawSides=e.drawSides))},l.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},9578:function(e,t,r){var n=r(6832),i=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),o=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);t.meshShader={vertex:i,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},t.pickShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(e,t,r){var n=r(2858),i=r(4020),a=["xyz","xzy","yxz","yzx","zxy","zyx"],o=function(e,t,r,a){for(var o=0,s=0;s<e.length;s++)for(var l=e[s].velocities,c=0;c<l.length;c++)o=Math.max(o,n.length(l[c]));var u=e.map((function(e){return function(e,t,r,a){for(var o=e.points,s=e.velocities,l=e.divergences,c=[],u=[],d=[],h=[],g=[],p=[],f=0,m=0,y=i.create(),b=i.create(),v=0;v<o.length;v++){var x=o[v],B=s[v],I=l[v];0===t&&(I=.05*r),m=n.length(B)/a,y=i.create(),n.copy(y,B),y[3]=I;for(var F=0;F<8;F++)g[F]=[x[0],x[1],x[2],F];if(h.length>0)for(F=0;F<8;F++){var A=(F+1)%8;c.push(h[F],g[F],g[A],g[A],h[A],h[F]),d.push(b,y,y,y,b,b),p.push(f,m,m,m,f,f);var C=c.length;u.push([C-6,C-5,C-4],[C-3,C-2,C-1])}var w=h;h=g,g=w;var Q=b;b=y,y=Q;var U=f;f=m,m=U}return{positions:c,cells:u,vectors:d,vertexIntensity:p}}(e,r,a,o)})),d=[],h=[],g=[],p=[];for(s=0;s<u.length;s++){var f=u[s],m=d.length;for(d=d.concat(f.positions),g=g.concat(f.vectors),p=p.concat(f.vertexIntensity),c=0;c<f.cells.length;c++){var y=f.cells[c],b=[];h.push(b);for(var v=0;v<y.length;v++)b.push(y[v]+m)}}return{positions:d,cells:h,vectors:g,vertexIntensity:p,colormap:t}},s=function(e,t){var r,n=e.length;for(r=0;r<n;r++){var i=e[r];if(i===t)return r;if(i>t)return r-1}return r},l=function(e,t,r){return e<t?t:e>r?r:e},c=function(e){var t=1/0;e.sort((function(e,t){return e-t}));for(var r=e.length,n=1;n<r;n++){var i=Math.abs(e[n]-e[n-1]);i<t&&(t=i)}return t};e.exports=function(e,t){var r=e.startingPositions,i=e.maxLength||1e3,u=e.tubeSize||1,d=e.absoluteTubeSize,h=e.gridFill||"+x+y+z",g={};-1!==h.indexOf("-x")&&(g.reversedX=!0),-1!==h.indexOf("-y")&&(g.reversedY=!0),-1!==h.indexOf("-z")&&(g.reversedZ=!0),g.filled=a.indexOf(h.replace(/-/g,"").replace(/\+/g,""));var p=e.getVelocity||function(t){return function(e,t,r){var i=t.vectors,a=t.meshgrid,o=e[0],c=e[1],u=e[2],d=a[0].length,h=a[1].length,g=a[2].length,p=s(a[0],o),f=s(a[1],c),m=s(a[2],u),y=p+1,b=f+1,v=m+1;if(p=l(p,0,d-1),y=l(y,0,d-1),f=l(f,0,h-1),b=l(b,0,h-1),m=l(m,0,g-1),v=l(v,0,g-1),p<0||f<0||m<0||y>d-1||b>h-1||v>g-1)return n.create();var x,B,I,F,A,C,w=a[0][p],Q=a[0][y],U=a[1][f],S=a[1][b],E=a[2][m],L=(o-w)/(Q-w),_=(c-U)/(S-U),T=(u-E)/(a[2][v]-E);switch(isFinite(L)||(L=.5),isFinite(_)||(_=.5),isFinite(T)||(T=.5),r.reversedX&&(p=d-1-p,y=d-1-y),r.reversedY&&(f=h-1-f,b=h-1-b),r.reversedZ&&(m=g-1-m,v=g-1-v),r.filled){case 5:A=m,C=v,I=f*g,F=b*g,x=p*g*h,B=y*g*h;break;case 4:A=m,C=v,x=p*g,B=y*g,I=f*g*d,F=b*g*d;break;case 3:I=f,F=b,A=m*h,C=v*h,x=p*h*g,B=y*h*g;break;case 2:I=f,F=b,x=p*h,B=y*h,A=m*h*d,C=v*h*d;break;case 1:x=p,B=y,A=m*d,C=v*d,I=f*d*g,F=b*d*g;break;default:x=p,B=y,I=f*d,F=b*d,A=m*d*h,C=v*d*h}var R=i[x+I+A],$=i[x+I+C],k=i[x+F+A],N=i[x+F+C],G=i[B+I+A],M=i[B+I+C],D=i[B+F+A],V=i[B+F+C],H=n.create(),X=n.create(),O=n.create(),Z=n.create();n.lerp(H,R,G,L),n.lerp(X,$,M,L),n.lerp(O,k,D,L),n.lerp(Z,N,V,L);var W=n.create(),Y=n.create();n.lerp(W,H,O,_),n.lerp(Y,X,Z,_);var P=n.create();return n.lerp(P,W,Y,T),P}(t,e,g)},f=e.getDivergence||function(e,t){var r=n.create(),i=1e-4;n.add(r,e,[i,0,0]);var a=p(r);n.subtract(a,a,t),n.scale(a,a,1/i),n.add(r,e,[0,i,0]);var o=p(r);n.subtract(o,o,t),n.scale(o,o,1/i),n.add(r,e,[0,0,i]);var s=p(r);return n.subtract(s,s,t),n.scale(s,s,1/i),n.add(r,a,o),n.add(r,r,s),r},m=[],y=t[0][0],b=t[0][1],v=t[0][2],x=t[1][0],B=t[1][1],I=t[1][2],F=function(e){var t=e[0],r=e[1],n=e[2];return!(t<y||t>x||r<b||r>B||n<v||n>I)},A=10*n.distance(t[0],t[1])/i,C=A*A,w=1,Q=0,U=r.length;U>1&&(w=function(e){for(var t=[],r=[],n=[],i={},a={},o={},s=e.length,l=0;l<s;l++){var u=e[l],d=u[0],h=u[1],g=u[2];i[d]||(t.push(d),i[d]=!0),a[h]||(r.push(h),a[h]=!0),o[g]||(n.push(g),o[g]=!0)}var p=c(t),f=c(r),m=c(n),y=Math.min(p,f,m);return isFinite(y)?y:1}(r));for(var S=0;S<U;S++){var E=n.create();n.copy(E,r[S]);var L=[E],_=[],T=p(E),R=E;_.push(T);var $=[],k=f(E,T),N=n.length(k);isFinite(N)&&N>Q&&(Q=N),$.push(N),m.push({points:L,velocities:_,divergences:$});for(var G=0;G<100*i&&L.length<i&&F(E);){G++;var M=n.clone(T),D=n.squaredLength(M);if(0===D)break;D>C&&n.scale(M,M,A/Math.sqrt(D)),n.add(M,M,E),T=p(M),n.squaredDistance(R,M)-C>-1e-4*C&&(L.push(M),R=M,_.push(T),k=f(M,T),N=n.length(k),isFinite(N)&&N>Q&&(Q=N),$.push(N)),E=M}}var V=o(m,e.colormap,Q,w);return d?V.tubeScale=d:(0===Q&&(Q=1),V.tubeScale=.5*u*w/Q),V};var u=r(9578),d=r(1140).createMesh;e.exports.createTubeMesh=function(e,t){return d(e,t,{shaders:u,traceType:"streamtube"})}},9054:function(e,t,r){var n=r(5158),i=r(6832),a=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),o=i(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color — in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),l=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);t.createShader=function(e){var t=n(e,a,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},t.createPickShader=function(e){var t=n(e,a,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},t.createContourShader=function(e){var t=n(e,s,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t},t.createPickContourShader=function(e){var t=n(e,s,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t}},3754:function(e,t,r){e.exports=function(e){var t=e.gl,r=b(t),n=x(t),s=v(t),l=B(t),c=i(t),u=a(t,[{buffer:c,size:4,stride:40,offset:0},{buffer:c,size:3,stride:40,offset:16},{buffer:c,size:3,stride:40,offset:28}]),d=i(t),h=a(t,[{buffer:d,size:4,stride:20,offset:0},{buffer:d,size:1,stride:20,offset:16}]),g=i(t),p=a(t,[{buffer:g,size:2,type:t.FLOAT}]),f=o(t,1,256,t.RGBA,t.UNSIGNED_BYTE);f.minFilter=t.LINEAR,f.magFilter=t.LINEAR;var m=new w(t,[0,0],[[0,0,0],[0,0,0]],r,n,c,u,f,s,l,d,h,g,p,[0,0,0]),y={levels:[[],[],[]]};for(var I in e)y[I]=e[I];return y.colormap=y.colormap||"jet",m.update(y),m};var n=r(2288),i=r(5827),a=r(2944),o=r(8931),s=r(5306),l=r(9156),c=r(7498),u=r(7382),d=r(5050),h=r(4162),g=r(104),p=r(7437),f=r(5070),m=r(9144),y=r(9054),b=y.createShader,v=y.createContourShader,x=y.createPickShader,B=y.createPickContourShader,I=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],A=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function C(e,t,r,n,i){this.position=e,this.index=t,this.uv=r,this.level=n,this.dataCoordinate=i}function w(e,t,r,n,i,a,o,l,c,u,h,g,p,f,m){this.gl=e,this.shape=t,this.bounds=r,this.objectOffset=m,this.intensityBounds=[],this._shader=n,this._pickShader=i,this._coordinateBuffer=a,this._vao=o,this._colorMap=l,this._contourShader=c,this._contourPickShader=u,this._contourBuffer=h,this._contourVAO=g,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new C([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=p,this._dynamicVAO=f,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[d(s.mallocFloat(1024),[0,0]),d(s.mallocFloat(1024),[0,0]),d(s.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}!function(){for(var e=0;e<3;++e){var t=A[e],r=(e+2)%3;t[(e+1)%3+0]=1,t[r+3]=1,t[e+6]=1}}();var Q=w.prototype;Q.genColormap=function(e,t){var r=!1,n=u([l({colormap:e,nshades:256,format:"rgba"}).map((function(e,n){var i=t?function(e,t){if(!t)return 1;if(!t.length)return 1;for(var r=0;r<t.length;++r){if(t.length<2)return 1;if(t[r][0]===e)return t[r][1];if(t[r][0]>e&&r>0){var n=(t[r][0]-e)/(t[r][0]-t[r-1][0]);return t[r][1]*(1-n)+n*t[r-1][1]}}return 1}(n/255,t):e[3];return i<1&&(r=!0),[e[0],e[1],e[2],255*i]}))]);return c.divseq(n,255),this.hasAlphaScale=r,n},Q.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},Q.isOpaque=function(){return!this.isTransparent()},Q.pickSlots=1,Q.setPickBase=function(e){this.pickId=e};var U=[0,0,0],S={showSurface:!1,showContour:!1,projections:[I.slice(),I.slice(),I.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function E(e,t){var r,n,i,a=t.axes&&t.axes.lastCubeProps.axis||U,o=t.showSurface,s=t.showContour;for(r=0;r<3;++r)for(o=o||t.surfaceProject[r],n=0;n<3;++n)s=s||t.contourProject[r][n];for(r=0;r<3;++r){var l=S.projections[r];for(n=0;n<16;++n)l[n]=0;for(n=0;n<4;++n)l[5*n]=1;l[5*r]=0,l[12+r]=t.axesBounds[+(a[r]>0)][r],g(l,e.model,l);var c=S.clipBounds[r];for(i=0;i<2;++i)for(n=0;n<3;++n)c[i][n]=e.clipBounds[i][n];c[0][r]=-1e8,c[1][r]=1e8}return S.showSurface=o,S.showContour=s,S}var L={model:I,view:I,projection:I,inverseModel:I.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},_=I.slice(),T=[1,0,0,0,1,0,0,0,1];function R(e,t){e=e||{};var r=this.gl;r.disable(r.CULL_FACE),this._colorMap.bind(0);var n=L;n.model=e.model||I,n.view=e.view||I,n.projection=e.projection||I,n.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],n.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],n.objectOffset=this.objectOffset,n.contourColor=this.contourColor[0],n.inverseModel=p(n.inverseModel,n.model);for(var i=0;i<2;++i)for(var a=n.clipBounds[i],o=0;o<3;++o)a[o]=Math.min(Math.max(this.clipBounds[i][o],-1e8),1e8);n.kambient=this.ambientLight,n.kdiffuse=this.diffuseLight,n.kspecular=this.specularLight,n.roughness=this.roughness,n.fresnel=this.fresnel,n.opacity=this.opacity,n.height=0,n.permutation=T,n.vertexColor=this.vertexColor;var s=_;for(g(s,n.view,n.model),g(s,n.projection,s),p(s,s),i=0;i<3;++i)n.eyePosition[i]=s[12+i]/s[15];var l=s[15];for(i=0;i<3;++i)l+=this.lightPosition[i]*s[4*i+3];for(i=0;i<3;++i){var c=s[12+i];for(o=0;o<3;++o)c+=s[4*o+i]*this.lightPosition[o];n.lightPosition[i]=c/l}var u=E(n,this);if(u.showSurface){for(this._shader.bind(),this._shader.uniforms=n,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(r.TRIANGLES,this._vertexCount),i=0;i<3;++i)this.surfaceProject[i]&&this.vertexCount&&(this._shader.uniforms.model=u.projections[i],this._shader.uniforms.clipBounds=u.clipBounds[i],this._vao.draw(r.TRIANGLES,this._vertexCount));this._vao.unbind()}if(u.showContour){var d=this._contourShader;n.kambient=1,n.kdiffuse=0,n.kspecular=0,n.opacity=1,d.bind(),d.uniforms=n;var h=this._contourVAO;for(h.bind(),i=0;i<3;++i)for(d.uniforms.permutation=A[i],r.lineWidth(this.contourWidth[i]*this.pixelRatio),o=0;o<this.contourLevels[i].length;++o)o===this.highlightLevel[i]?(d.uniforms.contourColor=this.highlightColor[i],d.uniforms.contourTint=this.highlightTint[i]):0!==o&&o-1!==this.highlightLevel[i]||(d.uniforms.contourColor=this.contourColor[i],d.uniforms.contourTint=this.contourTint[i]),this._contourCounts[i][o]&&(d.uniforms.height=this.contourLevels[i][o],h.draw(r.LINES,this._contourCounts[i][o],this._contourOffsets[i][o]));for(i=0;i<3;++i)for(d.uniforms.model=u.projections[i],d.uniforms.clipBounds=u.clipBounds[i],o=0;o<3;++o)if(this.contourProject[i][o]){d.uniforms.permutation=A[o],r.lineWidth(this.contourWidth[o]*this.pixelRatio);for(var f=0;f<this.contourLevels[o].length;++f)f===this.highlightLevel[o]?(d.uniforms.contourColor=this.highlightColor[o],d.uniforms.contourTint=this.highlightTint[o]):0!==f&&f-1!==this.highlightLevel[o]||(d.uniforms.contourColor=this.contourColor[o],d.uniforms.contourTint=this.contourTint[o]),this._contourCounts[o][f]&&(d.uniforms.height=this.contourLevels[o][f],h.draw(r.LINES,this._contourCounts[o][f],this._contourOffsets[o][f]))}for(h.unbind(),(h=this._dynamicVAO).bind(),i=0;i<3;++i)if(0!==this._dynamicCounts[i])for(d.uniforms.model=n.model,d.uniforms.clipBounds=n.clipBounds,d.uniforms.permutation=A[i],r.lineWidth(this.dynamicWidth[i]*this.pixelRatio),d.uniforms.contourColor=this.dynamicColor[i],d.uniforms.contourTint=this.dynamicTint[i],d.uniforms.height=this.dynamicLevel[i],h.draw(r.LINES,this._dynamicCounts[i],this._dynamicOffsets[i]),o=0;o<3;++o)this.contourProject[o][i]&&(d.uniforms.model=u.projections[o],d.uniforms.clipBounds=u.clipBounds[o],h.draw(r.LINES,this._dynamicCounts[i],this._dynamicOffsets[i]));h.unbind()}}Q.draw=function(e){return R.call(this,e,!1)},Q.drawTransparent=function(e){return R.call(this,e,!0)};var $={model:I,view:I,projection:I,inverseModel:I,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function k(e,t){return Array.isArray(e)?[t(e[0]),t(e[1]),t(e[2])]:[t(e),t(e),t(e)]}function N(e){return Array.isArray(e)?3===e.length?[e[0],e[1],e[2],1]:[e[0],e[1],e[2],e[3]]:[0,0,0,1]}function G(e){if(Array.isArray(e)){if(Array.isArray(e))return[N(e[0]),N(e[1]),N(e[2])];var t=N(e);return[t.slice(),t.slice(),t.slice()]}}Q.drawPick=function(e){e=e||{};var t=this.gl;t.disable(t.CULL_FACE);var r=$;r.model=e.model||I,r.view=e.view||I,r.projection=e.projection||I,r.shape=this._field[2].shape,r.pickId=this.pickId/255,r.lowerBound=this.bounds[0],r.upperBound=this.bounds[1],r.objectOffset=this.objectOffset,r.permutation=T;for(var n=0;n<2;++n)for(var i=r.clipBounds[n],a=0;a<3;++a)i[a]=Math.min(Math.max(this.clipBounds[n][a],-1e8),1e8);var o=E(r,this);if(o.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=r,this._vao.bind(),this._vao.draw(t.TRIANGLES,this._vertexCount),n=0;n<3;++n)this.surfaceProject[n]&&(this._pickShader.uniforms.model=o.projections[n],this._pickShader.uniforms.clipBounds=o.clipBounds[n],this._vao.draw(t.TRIANGLES,this._vertexCount));this._vao.unbind()}if(o.showContour){var s=this._contourPickShader;s.bind(),s.uniforms=r;var l=this._contourVAO;for(l.bind(),a=0;a<3;++a)for(t.lineWidth(this.contourWidth[a]*this.pixelRatio),s.uniforms.permutation=A[a],n=0;n<this.contourLevels[a].length;++n)this._contourCounts[a][n]&&(s.uniforms.height=this.contourLevels[a][n],l.draw(t.LINES,this._contourCounts[a][n],this._contourOffsets[a][n]));for(n=0;n<3;++n)for(s.uniforms.model=o.projections[n],s.uniforms.clipBounds=o.clipBounds[n],a=0;a<3;++a)if(this.contourProject[n][a]){s.uniforms.permutation=A[a],t.lineWidth(this.contourWidth[a]*this.pixelRatio);for(var c=0;c<this.contourLevels[a].length;++c)this._contourCounts[a][c]&&(s.uniforms.height=this.contourLevels[a][c],l.draw(t.LINES,this._contourCounts[a][c],this._contourOffsets[a][c]))}l.unbind()}},Q.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=this._field[2].shape,r=this._pickResult,n=t[0]*(e.value[0]+(e.value[2]>>4)/16)/255,i=Math.floor(n),a=n-i,o=t[1]*(e.value[1]+(15&e.value[2])/16)/255,s=Math.floor(o),l=o-s;i+=1,s+=1;var c=r.position;c[0]=c[1]=c[2]=0;for(var u=0;u<2;++u)for(var d=u?a:1-a,h=0;h<2;++h)for(var g=i+u,p=s+h,m=d*(h?l:1-l),y=0;y<3;++y)c[y]+=this._field[y].get(g,p)*m;for(var b=this._pickResult.level,v=0;v<3;++v)if(b[v]=f.le(this.contourLevels[v],c[v]),b[v]<0)this.contourLevels[v].length>0&&(b[v]=0);else if(b[v]<this.contourLevels[v].length-1){var x=this.contourLevels[v][b[v]],B=this.contourLevels[v][b[v]+1];Math.abs(x-c[v])>Math.abs(B-c[v])&&(b[v]+=1)}for(r.index[0]=a<.5?i:i+1,r.index[1]=l<.5?s:s+1,r.uv[0]=n/t[0],r.uv[1]=o/t[1],y=0;y<3;++y)r.dataCoordinate[y]=this._field[y].get(r.index[0],r.index[1]);return r},Q.padField=function(e,t){var r=t.shape.slice(),n=e.shape.slice();c.assign(e.lo(1,1).hi(r[0],r[1]),t),c.assign(e.lo(1).hi(r[0],1),t.hi(r[0],1)),c.assign(e.lo(1,n[1]-1).hi(r[0],1),t.lo(0,r[1]-1).hi(r[0],1)),c.assign(e.lo(0,1).hi(1,r[1]),t.hi(1)),c.assign(e.lo(n[0]-1,1).hi(1,r[1]),t.lo(r[0]-1)),e.set(0,0,t.get(0,0)),e.set(0,n[1]-1,t.get(0,r[1]-1)),e.set(n[0]-1,0,t.get(r[0]-1,0)),e.set(n[0]-1,n[1]-1,t.get(r[0]-1,r[1]-1))},Q.update=function(e){e=e||{},this.objectOffset=e.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in e&&(this.contourWidth=k(e.contourWidth,Number)),"showContour"in e&&(this.showContour=k(e.showContour,Boolean)),"showSurface"in e&&(this.showSurface=!!e.showSurface),"contourTint"in e&&(this.contourTint=k(e.contourTint,Boolean)),"contourColor"in e&&(this.contourColor=G(e.contourColor)),"contourProject"in e&&(this.contourProject=k(e.contourProject,(function(e){return k(e,Boolean)}))),"surfaceProject"in e&&(this.surfaceProject=e.surfaceProject),"dynamicColor"in e&&(this.dynamicColor=G(e.dynamicColor)),"dynamicTint"in e&&(this.dynamicTint=k(e.dynamicTint,Number)),"dynamicWidth"in e&&(this.dynamicWidth=k(e.dynamicWidth,Number)),"opacity"in e&&(this.opacity=e.opacity),"opacityscale"in e&&(this.opacityscale=e.opacityscale),"colorBounds"in e&&(this.colorBounds=e.colorBounds),"vertexColor"in e&&(this.vertexColor=e.vertexColor?1:0),"colormap"in e&&this._colorMap.setPixels(this.genColormap(e.colormap,this.opacityscale));var t=e.field||e.coords&&e.coords[2]||null,r=!1;if(t||(t=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in e||"coords"in e){var i=(t.shape[0]+2)*(t.shape[1]+2);i>this._field[2].data.length&&(s.freeFloat(this._field[2].data),this._field[2].data=s.mallocFloat(n.nextPow2(i))),this._field[2]=d(this._field[2].data,[t.shape[0]+2,t.shape[1]+2]),this.padField(this._field[2],t),this.shape=t.shape.slice();for(var a=this.shape,o=0;o<2;++o)this._field[2].size>this._field[o].data.length&&(s.freeFloat(this._field[o].data),this._field[o].data=s.mallocFloat(this._field[2].size)),this._field[o]=d(this._field[o].data,[a[0]+2,a[1]+2]);if(e.coords){var l=e.coords;if(!Array.isArray(l)||3!==l.length)throw new Error("gl-surface: invalid coordinates for x/y");for(o=0;o<2;++o){var c=l[o];for(y=0;y<2;++y)if(c.shape[y]!==a[y])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[o],c)}}else if(e.ticks){var u=e.ticks;if(!Array.isArray(u)||2!==u.length)throw new Error("gl-surface: invalid ticks");for(o=0;o<2;++o){var g=u[o];if((Array.isArray(g)||g.length)&&(g=d(g)),g.shape[0]!==a[o])throw new Error("gl-surface: invalid tick length");var p=d(g.data,a);p.stride[o]=g.stride[0],p.stride[1^o]=0,this.padField(this._field[o],p)}}else{for(o=0;o<2;++o){var f=[0,0];f[o]=1,this._field[o]=d(this._field[o].data,[a[0]+2,a[1]+2],f,0)}this._field[0].set(0,0,0);for(var y=0;y<a[0];++y)this._field[0].set(y+1,0,y);for(this._field[0].set(a[0]+1,0,a[0]-1),this._field[1].set(0,0,0),y=0;y<a[1];++y)this._field[1].set(0,y+1,y);this._field[1].set(0,a[1]+1,a[1]-1)}var b=this._field,v=d(s.mallocFloat(3*b[2].size*2),[3,a[0]+2,a[1]+2,2]);for(o=0;o<3;++o)m(v.pick(o),b[o],"mirror");var x=d(s.mallocFloat(3*b[2].size),[a[0]+2,a[1]+2,3]);for(o=0;o<a[0]+2;++o)for(y=0;y<a[1]+2;++y){var B=v.get(0,o,y,0),I=v.get(0,o,y,1),A=v.get(1,o,y,0),C=v.get(1,o,y,1),w=v.get(2,o,y,0),Q=v.get(2,o,y,1),U=A*Q-C*w,S=w*I-Q*B,E=B*C-I*A,L=Math.sqrt(U*U+S*S+E*E);L<1e-8?(L=Math.max(Math.abs(U),Math.abs(S),Math.abs(E)))<1e-8?(E=1,S=U=0,L=1):L=1/L:L=1/Math.sqrt(L),x.set(o,y,0,U*L),x.set(o,y,1,S*L),x.set(o,y,2,E*L)}s.free(v.data);var _=[1/0,1/0,1/0],T=[-1/0,-1/0,-1/0],R=1/0,$=-1/0,N=(a[0]-1)*(a[1]-1)*6,M=s.mallocFloat(n.nextPow2(10*N)),D=0,V=0;for(o=0;o<a[0]-1;++o)e:for(y=0;y<a[1]-1;++y){for(var H=0;H<2;++H)for(var X=0;X<2;++X)for(var O=0;O<3;++O){var Z=this._field[O].get(1+o+H,1+y+X);if(isNaN(Z)||!isFinite(Z))continue e}for(O=0;O<6;++O){var W=o+F[O][0],Y=y+F[O][1],P=this._field[0].get(W+1,Y+1),z=this._field[1].get(W+1,Y+1);Z=this._field[2].get(W+1,Y+1),U=x.get(W+1,Y+1,0),S=x.get(W+1,Y+1,1),E=x.get(W+1,Y+1,2),e.intensity&&(J=e.intensity.get(W,Y));var J=e.intensity?e.intensity.get(W,Y):Z+this.objectOffset[2];M[D++]=W,M[D++]=Y,M[D++]=P,M[D++]=z,M[D++]=Z,M[D++]=0,M[D++]=J,M[D++]=U,M[D++]=S,M[D++]=E,_[0]=Math.min(_[0],P+this.objectOffset[0]),_[1]=Math.min(_[1],z+this.objectOffset[1]),_[2]=Math.min(_[2],Z+this.objectOffset[2]),R=Math.min(R,J),T[0]=Math.max(T[0],P+this.objectOffset[0]),T[1]=Math.max(T[1],z+this.objectOffset[1]),T[2]=Math.max(T[2],Z+this.objectOffset[2]),$=Math.max($,J),V+=1}}for(e.intensityBounds&&(R=+e.intensityBounds[0],$=+e.intensityBounds[1]),o=6;o<D;o+=10)M[o]=(M[o]-R)/($-R);this._vertexCount=V,this._coordinateBuffer.update(M.subarray(0,D)),s.freeFloat(M),s.free(x.data),this.bounds=[_,T],this.intensity=e.intensity||this._field[2],this.intensityBounds[0]===R&&this.intensityBounds[1]===$||(r=!0),this.intensityBounds=[R,$]}if("levels"in e){var j=e.levels;for(j=Array.isArray(j[0])?j.slice():[[],[],j],o=0;o<3;++o)j[o]=j[o].slice(),j[o].sort((function(e,t){return e-t}));for(o=0;o<3;++o)for(y=0;y<j[o].length;++y)j[o][y]-=this.objectOffset[o];e:for(o=0;o<3;++o){if(j[o].length!==this.contourLevels[o].length){r=!0;break}for(y=0;y<j[o].length;++y)if(j[o][y]!==this.contourLevels[o][y]){r=!0;break e}}this.contourLevels=j}if(r){b=this._field,a=this.shape;for(var K=[],q=0;q<3;++q){var ee=this.contourLevels[q],te=[],re=[],ne=[0,0,0];for(o=0;o<ee.length;++o){var ie=h(this._field[q],ee[o]);te.push(K.length/5|0),V=0;e:for(y=0;y<ie.cells.length;++y){var ae=ie.cells[y];for(O=0;O<2;++O){var oe=ie.positions[ae[O]],se=oe[0],le=0|Math.floor(se),ce=se-le,ue=oe[1],de=0|Math.floor(ue),he=ue-de,ge=!1;t:for(var pe=0;pe<3;++pe){ne[pe]=0;var fe=(q+pe+1)%3;for(H=0;H<2;++H){var me=H?ce:1-ce;for(W=0|Math.min(Math.max(le+H,0),a[0]),X=0;X<2;++X){var ye=X?he:1-he;if(Y=0|Math.min(Math.max(de+X,0),a[1]),Z=pe<2?this._field[fe].get(W,Y):(this.intensity.get(W,Y)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Z)||isNaN(Z)){ge=!0;break t}var be=me*ye;ne[pe]+=be*Z}}}if(ge){if(O>0){for(var ve=0;ve<5;++ve)K.pop();V-=1}continue e}K.push(ne[0],ne[1],oe[0],oe[1],ne[2]),V+=1}}re.push(V)}this._contourOffsets[q]=te,this._contourCounts[q]=re}var xe=s.mallocFloat(K.length);for(o=0;o<K.length;++o)xe[o]=K[o];this._contourBuffer.update(xe),s.freeFloat(xe)}},Q.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var e=0;e<3;++e)s.freeFloat(this._field[e].data)},Q.highlight=function(e){var t,r;if(!e)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(t=0;t<3;++t)this.enableHighlight[t]?this.highlightLevel[t]=e.level[t]:this.highlightLevel[t]=-1;for(r=this.snapToData?e.dataCoordinate:e.position,t=0;t<3;++t)r[t]-=this.objectOffset[t];if(this.enableDynamic[0]&&r[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&r[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&r[2]!==this.dynamicLevel[2]){for(var n=0,i=this.shape,a=s.mallocFloat(12*i[0]*i[1]),o=0;o<3;++o)if(this.enableDynamic[o]){this.dynamicLevel[o]=r[o];var l=(o+1)%3,c=(o+2)%3,u=this._field[o],d=this._field[l],g=this._field[c],p=h(u,r[o]),f=p.cells,m=p.positions;for(this._dynamicOffsets[o]=n,t=0;t<f.length;++t)for(var y=f[t],b=0;b<2;++b){var v=m[y[b]],x=+v[0],B=0|x,I=0|Math.min(B+1,i[0]),F=x-B,A=1-F,C=+v[1],w=0|C,Q=0|Math.min(w+1,i[1]),U=C-w,S=1-U,E=A*S,L=A*U,_=F*S,T=F*U,R=E*d.get(B,w)+L*d.get(B,Q)+_*d.get(I,w)+T*d.get(I,Q),$=E*g.get(B,w)+L*g.get(B,Q)+_*g.get(I,w)+T*g.get(I,Q);if(isNaN(R)||isNaN($)){b&&(n-=1);break}a[2*n+0]=R,a[2*n+1]=$,n+=1}this._dynamicCounts[o]=n-this._dynamicOffsets[o]}else this.dynamicLevel[o]=NaN,this._dynamicCounts[o]=0;this._dynamicBuffer.update(a.subarray(0,2*n)),s.freeFloat(a)}}},8931:function(e,t,r){var n=r(5050),i=r(7498),a=r(5306);e.exports=function(e){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(o||c(e),"number"==typeof arguments[1])return y(e,arguments[1],arguments[2],arguments[3]||e.RGBA,arguments[4]||e.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return y(e,0|arguments[1][0],0|arguments[1][1],arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var t=arguments[1],r=u(t)?t:t.raw;if(r)return b(e,r,0|t.width,0|t.height,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if(t.shape&&t.data&&t.stride)return v(e,t)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var o=null,s=null,l=null;function c(e){o=[e.LINEAR,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_NEAREST],s=[e.NEAREST,e.LINEAR,e.NEAREST_MIPMAP_NEAREST,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_LINEAR],l=[e.REPEAT,e.CLAMP_TO_EDGE,e.MIRRORED_REPEAT]}function u(e){return"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&e instanceof ImageData}var d=function(e,t){i.muls(e,t,255)};function h(e,t,r){var n=e.gl,i=n.getParameter(n.MAX_TEXTURE_SIZE);if(t<0||t>i||r<0||r>i)throw new Error("gl-texture2d: Invalid texture size");return e._shape=[t,r],e.bind(),n.texImage2D(n.TEXTURE_2D,0,e.format,t,r,0,e.format,e.type,null),e._mipLevels=[0],e}function g(e,t,r,n,i,a){this.gl=e,this.handle=t,this.format=i,this.type=a,this._shape=[r,n],this._mipLevels=[0],this._magFilter=e.NEAREST,this._minFilter=e.NEAREST,this._wrapS=e.CLAMP_TO_EDGE,this._wrapT=e.CLAMP_TO_EDGE,this._anisoSamples=1;var o=this,s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return o._wrapS},set:function(e){return o.wrapS=e}},{get:function(){return o._wrapT},set:function(e){return o.wrapT=e}}]),this._wrapVector=s;var l=[this._shape[0],this._shape[1]];Object.defineProperties(l,[{get:function(){return o._shape[0]},set:function(e){return o.width=e}},{get:function(){return o._shape[1]},set:function(e){return o.height=e}}]),this._shapeVector=l}var p=g.prototype;function f(e,t){return 3===e.length?1===t[2]&&t[1]===e[0]*e[2]&&t[0]===e[2]:1===t[0]&&t[1]===e[0]}function m(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t}function y(e,t,r,n,i){var a=e.getParameter(e.MAX_TEXTURE_SIZE);if(t<0||t>a||r<0||r>a)throw new Error("gl-texture2d: Invalid texture shape");if(i===e.FLOAT&&!e.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var o=m(e);return e.texImage2D(e.TEXTURE_2D,0,n,t,r,0,n,i,null),new g(e,o,t,r,n,i)}function b(e,t,r,n,i,a){var o=m(e);return e.texImage2D(e.TEXTURE_2D,0,i,i,a,t),new g(e,o,r,n,i,a)}function v(e,t){var r=t.dtype,o=t.shape.slice(),s=e.getParameter(e.MAX_TEXTURE_SIZE);if(o[0]<0||o[0]>s||o[1]<0||o[1]>s)throw new Error("gl-texture2d: Invalid texture size");var l=f(o,t.stride.slice()),c=0;"float32"===r?c=e.FLOAT:"float64"===r?(c=e.FLOAT,l=!1,r="float32"):"uint8"===r?c=e.UNSIGNED_BYTE:(c=e.UNSIGNED_BYTE,l=!1,r="uint8");var u,h,p=0;if(2===o.length)p=e.LUMINANCE,o=[o[0],o[1],1],t=n(t.data,o,[t.stride[0],t.stride[1],1],t.offset);else{if(3!==o.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===o[2])p=e.ALPHA;else if(2===o[2])p=e.LUMINANCE_ALPHA;else if(3===o[2])p=e.RGB;else{if(4!==o[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");p=e.RGBA}}c!==e.FLOAT||e.getExtension("OES_texture_float")||(c=e.UNSIGNED_BYTE,l=!1);var y=t.size;if(l)u=0===t.offset&&t.data.length===y?t.data:t.data.subarray(t.offset,t.offset+y);else{var b=[o[2],o[2]*o[0],1];h=a.malloc(y,r);var v=n(h,o,b,0);"float32"!==r&&"float64"!==r||c!==e.UNSIGNED_BYTE?i.assign(v,t):d(v,t),u=h.subarray(0,y)}var x=m(e);return e.texImage2D(e.TEXTURE_2D,0,p,o[0],o[1],0,p,c,u),l||a.free(h),new g(e,x,o[0],o[1],p,c)}Object.defineProperties(p,{minFilter:{get:function(){return this._minFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&o.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),s.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e),this._minFilter=e}},magFilter:{get:function(){return this._magFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&o.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),s.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e),this._magFilter=e}},mipSamples:{get:function(){return this._anisoSamples},set:function(e){var t=this._anisoSamples;if(this._anisoSamples=0|Math.max(e,1),t!==this._anisoSamples){var r=this.gl.getExtension("EXT_texture_filter_anisotropic");r&&this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(e){if(this.bind(),l.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,e),this._wrapS=e}},wrapT:{get:function(){return this._wrapT},set:function(e){if(this.bind(),l.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,e),this._wrapT=e}},wrap:{get:function(){return this._wrapVector},set:function(e){if(Array.isArray(e)||(e=[e,e]),2!==e.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var t=0;t<2;++t)if(l.indexOf(e[t])<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);this._wrapS=e[0],this._wrapT=e[1];var r=this.gl;return this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT),e}},shape:{get:function(){return this._shapeVector},set:function(e){if(Array.isArray(e)){if(2!==e.length)throw new Error("gl-texture2d: Invalid texture shape")}else e=[0|e,0|e];return h(this,0|e[0],0|e[1]),[0|e[0],0|e[1]]}},width:{get:function(){return this._shape[0]},set:function(e){return h(this,e|=0,this._shape[1]),e}},height:{get:function(){return this._shape[1]},set:function(e){return e|=0,h(this,this._shape[0],e),e}}}),p.bind=function(e){var t=this.gl;return void 0!==e&&t.activeTexture(t.TEXTURE0+(0|e)),t.bindTexture(t.TEXTURE_2D,this.handle),void 0!==e?0|e:t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0},p.dispose=function(){this.gl.deleteTexture(this.handle)},p.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var e=Math.min(this._shape[0],this._shape[1]),t=0;e>0;++t,e>>>=1)this._mipLevels.indexOf(t)<0&&this._mipLevels.push(t)},p.setPixels=function(e,t,r,o){var s=this.gl;this.bind(),Array.isArray(t)?(o=r,r=0|t[1],t=0|t[0]):(t=t||0,r=r||0),o=o||0;var l=u(e)?e:e.raw;if(l)this._mipLevels.indexOf(o)<0?(s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,this.type,l),this._mipLevels.push(o)):s.texSubImage2D(s.TEXTURE_2D,o,t,r,this.format,this.type,l);else{if(!(e.shape&&e.stride&&e.data))throw new Error("gl-texture2d: Unsupported data type");if(e.shape.length<2||t+e.shape[1]>this._shape[1]>>>o||r+e.shape[0]>this._shape[0]>>>o||t<0||r<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(e,t,r,o,s,l,c,u){var h=u.dtype,g=u.shape.slice();if(g.length<2||g.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var p=0,m=0,y=f(g,u.stride.slice());if("float32"===h?p=e.FLOAT:"float64"===h?(p=e.FLOAT,y=!1,h="float32"):"uint8"===h?p=e.UNSIGNED_BYTE:(p=e.UNSIGNED_BYTE,y=!1,h="uint8"),2===g.length)m=e.LUMINANCE,g=[g[0],g[1],1],u=n(u.data,g,[u.stride[0],u.stride[1],1],u.offset);else{if(3!==g.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===g[2])m=e.ALPHA;else if(2===g[2])m=e.LUMINANCE_ALPHA;else if(3===g[2])m=e.RGB;else{if(4!==g[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");m=e.RGBA}g[2]}if(m!==e.LUMINANCE&&m!==e.ALPHA||s!==e.LUMINANCE&&s!==e.ALPHA||(m=s),m!==s)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var b=u.size,v=c.indexOf(o)<0;if(v&&c.push(o),p===l&&y)0===u.offset&&u.data.length===b?v?e.texImage2D(e.TEXTURE_2D,o,s,g[0],g[1],0,s,l,u.data):e.texSubImage2D(e.TEXTURE_2D,o,t,r,g[0],g[1],s,l,u.data):v?e.texImage2D(e.TEXTURE_2D,o,s,g[0],g[1],0,s,l,u.data.subarray(u.offset,u.offset+b)):e.texSubImage2D(e.TEXTURE_2D,o,t,r,g[0],g[1],s,l,u.data.subarray(u.offset,u.offset+b));else{var x;x=l===e.FLOAT?a.mallocFloat32(b):a.mallocUint8(b);var B=n(x,g,[g[2],g[2]*g[0],1]);p===e.FLOAT&&l===e.UNSIGNED_BYTE?d(B,u):i.assign(B,u),v?e.texImage2D(e.TEXTURE_2D,o,s,g[0],g[1],0,s,l,x.subarray(0,b)):e.texSubImage2D(e.TEXTURE_2D,o,t,r,g[0],g[1],s,l,x.subarray(0,b)),l===e.FLOAT?a.freeFloat32(x):a.freeUint8(x)}}(s,t,r,o,this.format,this.type,this._mipLevels,e)}}},3056:function(e){e.exports=function(e,t,r){t?t.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var n=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(r){if(r.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var i=0;i<r.length;++i){var a=r[i];if(a.buffer){var o=a.buffer,s=a.size||4,l=a.type||e.FLOAT,c=!!a.normalized,u=a.stride||0,d=a.offset||0;o.bind(),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,s,l,c,u,d)}else{if("number"==typeof a)e.vertexAttrib1f(i,a);else if(1===a.length)e.vertexAttrib1f(i,a[0]);else if(2===a.length)e.vertexAttrib2f(i,a[0],a[1]);else if(3===a.length)e.vertexAttrib3f(i,a[0],a[1],a[2]);else{if(4!==a.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(i,a[0],a[1],a[2],a[3])}e.disableVertexAttribArray(i)}}for(;i<n;++i)e.disableVertexAttribArray(i)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),i=0;i<n;++i)e.disableVertexAttribArray(i)}},7220:function(e,t,r){var n=r(3056);function i(e){this.gl=e,this._elements=null,this._attributes=null,this._elementsType=e.UNSIGNED_SHORT}i.prototype.bind=function(){n(this.gl,this._elements,this._attributes)},i.prototype.update=function(e,t,r){this._elements=t,this._attributes=e,this._elementsType=r||this.gl.UNSIGNED_SHORT},i.prototype.dispose=function(){},i.prototype.unbind=function(){},i.prototype.draw=function(e,t,r){r=r||0;var n=this.gl;this._elements?n.drawElements(e,t,this._elementsType,r):n.drawArrays(e,r,t)},e.exports=function(e){return new i(e)}},3778:function(e,t,r){var n=r(3056);function i(e,t,r,n,i,a){this.location=e,this.dimension=t,this.a=r,this.b=n,this.c=i,this.d=a}function a(e,t,r){this.gl=e,this._ext=t,this.handle=r,this._attribs=[],this._useElements=!1,this._elementsType=e.UNSIGNED_SHORT}i.prototype.bind=function(e){switch(this.dimension){case 1:e.vertexAttrib1f(this.location,this.a);break;case 2:e.vertexAttrib2f(this.location,this.a,this.b);break;case 3:e.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:e.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},a.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var e=0;e<this._attribs.length;++e)this._attribs[e].bind(this.gl)},a.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},a.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},a.prototype.update=function(e,t,r){if(this.bind(),n(this.gl,t,e),this.unbind(),this._attribs.length=0,e)for(var a=0;a<e.length;++a){var o=e[a];"number"==typeof o?this._attribs.push(new i(a,1,o)):Array.isArray(o)&&this._attribs.push(new i(a,o.length,o[0],o[1],o[2],o[3]))}this._useElements=!!t,this._elementsType=r||this.gl.UNSIGNED_SHORT},a.prototype.draw=function(e,t,r){r=r||0;var n=this.gl;this._useElements?n.drawElements(e,t,this._elementsType,r):n.drawArrays(e,r,t)},e.exports=function(e,t){return new a(e,t,t.createVertexArrayOES())}},2944:function(e,t,r){var n=r(3778),i=r(7220);function a(e){this.bindVertexArrayOES=e.bindVertexArray.bind(e),this.createVertexArrayOES=e.createVertexArray.bind(e),this.deleteVertexArrayOES=e.deleteVertexArray.bind(e)}e.exports=function(e,t,r,o){var s,l=e.createVertexArray?new a(e):e.getExtension("OES_vertex_array_object");return(s=l?n(e,l):i(e)).update(t,r,o),s}},2598:function(e){e.exports=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}},5879:function(e,t,r){e.exports=function(e,t){var r=n(e[0],e[1],e[2]),o=n(t[0],t[1],t[2]);i(r,r),i(o,o);var s=a(r,o);return s>1?0:Math.acos(s)};var n=r(5415),i=r(899),a=r(9305)},8827:function(e){e.exports=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}},7622:function(e){e.exports=function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},8782:function(e){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},8501:function(e){e.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},903:function(e){e.exports=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[0],s=r[1],l=r[2];return e[0]=i*l-a*s,e[1]=a*o-n*l,e[2]=n*s-i*o,e}},5981:function(e,t,r){e.exports=r(8288)},8288:function(e){e.exports=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)}},8629:function(e,t,r){e.exports=r(7979)},7979:function(e){e.exports=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}},9305:function(e){e.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},154:function(e){e.exports=1e-6},4932:function(e,t,r){e.exports=function(e,t){var r=e[0],i=e[1],a=e[2],o=t[0],s=t[1],l=t[2];return Math.abs(r-o)<=n*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=n*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-l)<=n*Math.max(1,Math.abs(a),Math.abs(l))};var n=r(154)},5777:function(e){e.exports=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}},3306:function(e){e.exports=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}},7447:function(e,t,r){e.exports=function(e,t,r,i,a,o){var s,l;for(t||(t=3),r||(r=0),l=i?Math.min(i*t+r,e.length):e.length,s=r;s<l;s+=t)n[0]=e[s],n[1]=e[s+1],n[2]=e[s+2],a(n,n,o),e[s]=n[0],e[s+1]=n[1],e[s+2]=n[2];return e};var n=r(8501)()},5415:function(e){e.exports=function(e,t,r){var n=new Float32Array(3);return n[0]=e,n[1]=t,n[2]=r,n}},2858:function(e,t,r){e.exports={EPSILON:r(154),create:r(8501),clone:r(7622),angle:r(5879),fromValues:r(5415),copy:r(8782),set:r(831),equals:r(4932),exactEquals:r(5777),add:r(2598),subtract:r(911),sub:r(8921),multiply:r(105),mul:r(5733),divide:r(7979),div:r(8629),min:r(3605),max:r(1716),floor:r(3306),ceil:r(8827),round:r(1624),scale:r(5685),scaleAndAdd:r(6722),distance:r(8288),dist:r(5981),squaredDistance:r(6403),sqrDist:r(5294),length:r(4693),len:r(1468),squaredLength:r(4337),sqrLen:r(3303),negate:r(435),inverse:r(2073),normalize:r(899),dot:r(9305),cross:r(903),lerp:r(1868),random:r(6660),transformMat4:r(3255),transformMat3:r(9908),transformQuat:r(6568),rotateX:r(392),rotateY:r(3222),rotateZ:r(3388),forEach:r(7447)}},2073:function(e){e.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}},1468:function(e,t,r){e.exports=r(4693)},4693:function(e){e.exports=function(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}},1868:function(e){e.exports=function(e,t,r,n){var i=t[0],a=t[1],o=t[2];return e[0]=i+n*(r[0]-i),e[1]=a+n*(r[1]-a),e[2]=o+n*(r[2]-o),e}},1716:function(e){e.exports=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}},3605:function(e){e.exports=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}},5733:function(e,t,r){e.exports=r(105)},105:function(e){e.exports=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}},435:function(e){e.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}},899:function(e){e.exports=function(e,t){var r=t[0],n=t[1],i=t[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e}},6660:function(e){e.exports=function(e,t){t=t||1;var r=2*Math.random()*Math.PI,n=2*Math.random()-1,i=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*i,e[1]=Math.sin(r)*i,e[2]=n*t,e}},392:function(e){e.exports=function(e,t,r,n){var i=r[1],a=r[2],o=t[1]-i,s=t[2]-a,l=Math.sin(n),c=Math.cos(n);return e[0]=t[0],e[1]=i+o*c-s*l,e[2]=a+o*l+s*c,e}},3222:function(e){e.exports=function(e,t,r,n){var i=r[0],a=r[2],o=t[0]-i,s=t[2]-a,l=Math.sin(n),c=Math.cos(n);return e[0]=i+s*l+o*c,e[1]=t[1],e[2]=a+s*c-o*l,e}},3388:function(e){e.exports=function(e,t,r,n){var i=r[0],a=r[1],o=t[0]-i,s=t[1]-a,l=Math.sin(n),c=Math.cos(n);return e[0]=i+o*c-s*l,e[1]=a+o*l+s*c,e[2]=t[2],e}},1624:function(e){e.exports=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}},5685:function(e){e.exports=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}},6722:function(e){e.exports=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}},831:function(e){e.exports=function(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e}},5294:function(e,t,r){e.exports=r(6403)},3303:function(e,t,r){e.exports=r(4337)},6403:function(e){e.exports=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i}},4337:function(e){e.exports=function(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}},8921:function(e,t,r){e.exports=r(911)},911:function(e){e.exports=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}},9908:function(e){e.exports=function(e,t,r){var n=t[0],i=t[1],a=t[2];return e[0]=n*r[0]+i*r[3]+a*r[6],e[1]=n*r[1]+i*r[4]+a*r[7],e[2]=n*r[2]+i*r[5]+a*r[8],e}},3255:function(e){e.exports=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[3]*n+r[7]*i+r[11]*a+r[15];return o=o||1,e[0]=(r[0]*n+r[4]*i+r[8]*a+r[12])/o,e[1]=(r[1]*n+r[5]*i+r[9]*a+r[13])/o,e[2]=(r[2]*n+r[6]*i+r[10]*a+r[14])/o,e}},6568:function(e){e.exports=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[0],s=r[1],l=r[2],c=r[3],u=c*n+s*a-l*i,d=c*i+l*n-o*a,h=c*a+o*i-s*n,g=-o*n-s*i-l*a;return e[0]=u*c+g*-o+d*-l-h*-s,e[1]=d*c+g*-s+h*-o-u*-l,e[2]=h*c+g*-l+u*-s-d*-o,e}},3433:function(e){e.exports=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}},1413:function(e){e.exports=function(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}},3470:function(e){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},5313:function(e){e.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},5446:function(e){e.exports=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(r*r+n*n+i*i+a*a)}},205:function(e){e.exports=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}},4242:function(e){e.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}},5680:function(e){e.exports=function(e,t,r,n){var i=new Float32Array(4);return i[0]=e,i[1]=t,i[2]=r,i[3]=n,i}},4020:function(e,t,r){e.exports={create:r(5313),clone:r(1413),fromValues:r(5680),copy:r(3470),set:r(6453),add:r(3433),subtract:r(2705),multiply:r(746),divide:r(205),min:r(2170),max:r(3030),scale:r(5510),scaleAndAdd:r(4224),distance:r(5446),squaredDistance:r(1542),length:r(8177),squaredLength:r(9037),negate:r(6459),inverse:r(8057),normalize:r(381),dot:r(4242),lerp:r(8746),random:r(3770),transformMat4:r(6342),transformQuat:r(5022)}},8057:function(e){e.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}},8177:function(e){e.exports=function(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.sqrt(t*t+r*r+n*n+i*i)}},8746:function(e){e.exports=function(e,t,r,n){var i=t[0],a=t[1],o=t[2],s=t[3];return e[0]=i+n*(r[0]-i),e[1]=a+n*(r[1]-a),e[2]=o+n*(r[2]-o),e[3]=s+n*(r[3]-s),e}},3030:function(e){e.exports=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}},2170:function(e){e.exports=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}},746:function(e){e.exports=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}},6459:function(e){e.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}},381:function(e){e.exports=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r*r+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),e[0]=r*o,e[1]=n*o,e[2]=i*o,e[3]=a*o),e}},3770:function(e,t,r){var n=r(381),i=r(5510);e.exports=function(e,t){return t=t||1,e[0]=Math.random(),e[1]=Math.random(),e[2]=Math.random(),e[3]=Math.random(),n(e,e),i(e,e,t),e}},5510:function(e){e.exports=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}},4224:function(e){e.exports=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e}},6453:function(e){e.exports=function(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}},1542:function(e){e.exports=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return r*r+n*n+i*i+a*a}},9037:function(e){e.exports=function(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}},2705:function(e){e.exports=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}},6342:function(e){e.exports=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,e[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,e[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,e[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,e}},5022:function(e){e.exports=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[0],s=r[1],l=r[2],c=r[3],u=c*n+s*a-l*i,d=c*i+l*n-o*a,h=c*a+o*i-s*n,g=-o*n-s*i-l*a;return e[0]=u*c+g*-o+d*-l-h*-s,e[1]=d*c+g*-s+h*-o-u*-l,e[2]=h*c+g*-l+u*-s-d*-o,e[3]=t[3],e}},9365:function(e,t,r){var n=r(8096),i=r(7896);e.exports=function(e){for(var t=Array.isArray(e)?e:n(e),r=0;r<t.length;r++){var a=t[r];if("preprocessor"===a.type){var o=a.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(o&&o[2]){var s=o[1],l=o[2];return(s?i(l):l).trim()}}}}},3193:function(e,t,r){e.exports=function(e){var t,r,d,h=0,g=0,p=l,f=[],m=[],y=1,b=0,v=0,x=!1,B=!1,I="",F=a,A=n;"300 es"===(e=e||{}).version&&(F=s,A=o);var C={},w={};for(h=0;h<F.length;h++)C[F[h]]=!0;for(h=0;h<A.length;h++)w[A[h]]=!0;return function(e){return m=[],null!==e?function(e){var r;for(h=0,e.toString&&(e=e.toString()),I+=e.replace(/\r\n/g,"\n"),d=I.length;t=I[h],h<d;){switch(r=h,p){case 0:h=_();break;case 1:h=L();break;case 2:h=E();break;case 3:h=T();break;case 4:h=k();break;case 11:h=$();break;case 5:h=N();break;case c:h=G();break;case 9:h=S();break;case l:h=U()}r!==h&&("\n"===I[r]?(b=0,++y):++b)}return g+=h,I=I.slice(h),m}(e):(f.length&&Q(f.join("")),p=10,Q("(eof)"),m)};function Q(e){e.length&&m.push({type:u[p],data:e,position:v,line:y,column:b})}function U(){return f=f.length?[]:f,"/"===r&&"*"===t?(v=g+h-1,p=0,r=t,h+1):"/"===r&&"/"===t?(v=g+h-1,p=1,r=t,h+1):"#"===t?(p=2,v=g+h,h):/\s/.test(t)?(p=9,v=g+h,h):(x=/\d/.test(t),B=/[^\w_]/.test(t),v=g+h,p=x?4:B?3:c,h)}function S(){return/[^\s]/g.test(t)?(Q(f.join("")),p=l,h):(f.push(t),r=t,h+1)}function E(){return"\r"!==t&&"\n"!==t||"\\"===r?(f.push(t),r=t,h+1):(Q(f.join("")),p=l,h)}function L(){return E()}function _(){return"/"===t&&"*"===r?(f.push(t),Q(f.join("")),p=l,h+1):(f.push(t),r=t,h+1)}function T(){if("."===r&&/\d/.test(t))return p=5,h;if("/"===r&&"*"===t)return p=0,h;if("/"===r&&"/"===t)return p=1,h;if("."===t&&f.length){for(;R(f););return p=5,h}if(";"===t||")"===t||"("===t){if(f.length)for(;R(f););return Q(t),p=l,h+1}var e=2===f.length&&"="!==t;if(/[\w_\d\s]/.test(t)||e){for(;R(f););return p=l,h}return f.push(t),r=t,h+1}function R(e){for(var t,r,n=0;;){if(t=i.indexOf(e.slice(0,e.length+n).join("")),r=i[t],-1===t){if(n--+e.length>0)continue;r=e.slice(0,1).join("")}return Q(r),v+=r.length,(f=f.slice(r.length)).length}}function $(){return/[^a-fA-F0-9]/.test(t)?(Q(f.join("")),p=l,h):(f.push(t),r=t,h+1)}function k(){return"."===t||/[eE]/.test(t)?(f.push(t),p=5,r=t,h+1):"x"===t&&1===f.length&&"0"===f[0]?(p=11,f.push(t),r=t,h+1):/[^\d]/.test(t)?(Q(f.join("")),p=l,h):(f.push(t),r=t,h+1)}function N(){return"f"===t&&(f.push(t),r=t,h+=1),/[eE]/.test(t)?(f.push(t),r=t,h+1):("-"!==t&&"+"!==t||!/[eE]/.test(r))&&/[^\d]/.test(t)?(Q(f.join("")),p=l,h):(f.push(t),r=t,h+1)}function G(){if(/[^\d\w_]/.test(t)){var e=f.join("");return p=w[e]?8:C[e]?7:6,Q(f.join("")),p=l,h}return f.push(t),r=t,h+1}};var n=r(399),i=r(9746),a=r(9525),o=r(9458),s=r(3585),l=999,c=9999,u=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3585:function(e,t,r){var n=r(9525);n=n.slice().filter((function(e){return!/^(gl\_|texture)/.test(e)})),e.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(e){e.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(e,t,r){var n=r(399);e.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(e){e.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(e){e.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(e,t,r){var n=r(3193);e.exports=function(e,t){var r=n(t),i=[];return i=(i=i.concat(r(e))).concat(r(null))}},6832:function(e){e.exports=function(e){"string"==typeof e&&(e=[e]);for(var t=[].slice.call(arguments,1),r=[],n=0;n<e.length-1;n++)r.push(e[n],t[n]||"");return r.push(e[n]),r.join("")}},5233:function(e,t,r){var n=r(4846);e.exports=n&&function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){e=!1}return e}()},2183:function(e,t,r){e.exports=function(e,t){var r=e.length;if(0===r)throw new Error("Must have at least d+1 points");var i=e[0].length;if(r<=i)throw new Error("Must input at least d+1 points");var o=e.slice(0,i+1),s=n.apply(void 0,o);if(0===s)throw new Error("Input not in general position");for(var l=new Array(i+1),u=0;u<=i;++u)l[u]=u;s<0&&(l[0]=1,l[1]=0);var d=new a(l,new Array(i+1),!1),h=d.adjacent,g=new Array(i+2);for(u=0;u<=i;++u){for(var p=l.slice(),f=0;f<=i;++f)f===u&&(p[f]=-1);var m=p[0];p[0]=p[1],p[1]=m;var y=new a(p,new Array(i+1),!0);h[u]=y,g[u]=y}for(g[i+1]=d,u=0;u<=i;++u){p=h[u].vertices;var b=h[u].adjacent;for(f=0;f<=i;++f){var v=p[f];if(v<0)b[f]=d;else for(var x=0;x<=i;++x)h[x].vertices.indexOf(v)<0&&(b[f]=h[x])}}var B=new c(i,o,g),I=!!t;for(u=i+1;u<r;++u)B.insert(e[u],I);return B.boundary()};var n=r(417),i=r(8211).H;function a(e,t,r){this.vertices=e,this.adjacent=t,this.boundary=r,this.lastVisited=-1}function o(e,t,r){this.vertices=e,this.cell=t,this.index=r}function s(e,t){return i(e.vertices,t.vertices)}a.prototype.flip=function(){var e=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=e;var t=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=t};var l=[];function c(e,t,r){this.dimension=e,this.vertices=t,this.simplices=r,this.interior=r.filter((function(e){return!e.boundary})),this.tuple=new Array(e+1);for(var i=0;i<=e;++i)this.tuple[i]=this.vertices[i];var a=l[e];a||(a=l[e]=function(e){var t=n[e+1];return t||(t=n),function(e){return function(){var t=this.tuple;return e.apply(this,t)}}(t)}(e)),this.orient=a}var u=c.prototype;u.handleBoundaryDegeneracy=function(e,t){var r=this.dimension,n=this.vertices.length-1,i=this.tuple,a=this.vertices,o=[e];for(e.lastVisited=-n;o.length>0;)for(var s=(e=o.pop()).adjacent,l=0;l<=r;++l){var c=s[l];if(c.boundary&&!(c.lastVisited<=-n)){for(var u=c.vertices,d=0;d<=r;++d){var h=u[d];i[d]=h<0?t:a[h]}var g=this.orient();if(g>0)return c;c.lastVisited=-n,0===g&&o.push(c)}}return null},u.walk=function(e,t){var r=this.vertices.length-1,n=this.dimension,i=this.vertices,a=this.tuple,o=t?this.interior.length*Math.random()|0:this.interior.length-1,s=this.interior[o];e:for(;!s.boundary;){for(var l=s.vertices,c=s.adjacent,u=0;u<=n;++u)a[u]=i[l[u]];for(s.lastVisited=r,u=0;u<=n;++u){var d=c[u];if(!(d.lastVisited>=r)){var h=a[u];a[u]=e;var g=this.orient();if(a[u]=h,g<0){s=d;continue e}d.boundary?d.lastVisited=-r:d.lastVisited=r}}return}return s},u.addPeaks=function(e,t){var r=this.vertices.length-1,n=this.dimension,i=this.vertices,l=this.tuple,c=this.interior,u=this.simplices,d=[t];t.lastVisited=r,t.vertices[t.vertices.indexOf(-1)]=r,t.boundary=!1,c.push(t);for(var h=[];d.length>0;){var g=(t=d.pop()).vertices,p=t.adjacent,f=g.indexOf(r);if(!(f<0))for(var m=0;m<=n;++m)if(m!==f){var y=p[m];if(y.boundary&&!(y.lastVisited>=r)){var b=y.vertices;if(y.lastVisited!==-r){for(var v=0,x=0;x<=n;++x)b[x]<0?(v=x,l[x]=e):l[x]=i[b[x]];if(this.orient()>0){b[v]=r,y.boundary=!1,c.push(y),d.push(y),y.lastVisited=r;continue}y.lastVisited=-r}var B=y.adjacent,I=g.slice(),F=p.slice(),A=new a(I,F,!0);u.push(A);var C=B.indexOf(t);if(!(C<0))for(B[C]=A,F[f]=y,I[m]=-1,F[m]=t,p[m]=A,A.flip(),x=0;x<=n;++x){var w=I[x];if(!(w<0||w===r)){for(var Q=new Array(n-1),U=0,S=0;S<=n;++S){var E=I[S];E<0||S===x||(Q[U++]=E)}h.push(new o(Q,A,x))}}}}}for(h.sort(s),m=0;m+1<h.length;m+=2){var L=h[m],_=h[m+1],T=L.index,R=_.index;T<0||R<0||(L.cell.adjacent[L.index]=_.cell,_.cell.adjacent[_.index]=L.cell)}},u.insert=function(e,t){var r=this.vertices;r.push(e);var n=this.walk(e,t);if(n){for(var i=this.dimension,a=this.tuple,o=0;o<=i;++o){var s=n.vertices[o];a[o]=s<0?e:r[s]}var l=this.orient(a);l<0||(0!==l||(n=this.handleBoundaryDegeneracy(n,e)))&&this.addPeaks(e,n)}},u.boundary=function(){for(var e=this.dimension,t=[],r=this.simplices,n=r.length,i=0;i<n;++i){var a=r[i];if(a.boundary){for(var o=new Array(e),s=a.vertices,l=0,c=0,u=0;u<=e;++u)s[u]>=0?o[l++]=s[u]:c=1&u;if(c===(1&e)){var d=o[0];o[0]=o[1],o[1]=d}t.push(o)}}return t}},9014:function(e,t,r){var n=r(5070);function i(e,t,r,n,i){this.mid=e,this.left=t,this.right=r,this.leftPoints=n,this.rightPoints=i,this.count=(t?t.count:0)+(r?r.count:0)+n.length}e.exports=function(e){return e&&0!==e.length?new y(m(e)):new y(null)};var a=i.prototype;function o(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function s(e,t){var r=m(t);e.mid=r.mid,e.left=r.left,e.right=r.right,e.leftPoints=r.leftPoints,e.rightPoints=r.rightPoints,e.count=r.count}function l(e,t){var r=e.intervals([]);r.push(t),s(e,r)}function c(e,t){var r=e.intervals([]),n=r.indexOf(t);return n<0?0:(r.splice(n,1),s(e,r),1)}function u(e,t,r){for(var n=0;n<e.length&&e[n][0]<=t;++n){var i=r(e[n]);if(i)return i}}function d(e,t,r){for(var n=e.length-1;n>=0&&e[n][1]>=t;--n){var i=r(e[n]);if(i)return i}}function h(e,t){for(var r=0;r<e.length;++r){var n=t(e[r]);if(n)return n}}function g(e,t){return e-t}function p(e,t){var r=e[0]-t[0];return r||e[1]-t[1]}function f(e,t){var r=e[1]-t[1];return r||e[0]-t[0]}function m(e){if(0===e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e[r][0],e[r][1]);t.sort(g);var n=t[t.length>>1],a=[],o=[],s=[];for(r=0;r<e.length;++r){var l=e[r];l[1]<n?a.push(l):n<l[0]?o.push(l):s.push(l)}var c=s,u=s.slice();return c.sort(p),u.sort(f),new i(n,m(a),m(o),c,u)}function y(e){this.root=e}a.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e},a.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?l(this,e):this.left.insert(e):this.left=m([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?l(this,e):this.right.insert(e):this.right=m([e]);else{var r=n.ge(this.leftPoints,e,p),i=n.ge(this.rightPoints,e,f);this.leftPoints.splice(r,0,e),this.rightPoints.splice(i,0,e)}},a.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(t-1)?c(this,e):2===(s=this.left.remove(e))?(this.left=null,this.count-=1,1):(1===s&&(this.count-=1),s):0;if(e[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(t-1)?c(this,e):2===(s=this.right.remove(e))?(this.right=null,this.count-=1,1):(1===s&&(this.count-=1),s):0;if(1===this.count)return this.leftPoints[0]===e?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===e){if(this.left&&this.right){for(var r=this,i=this.left;i.right;)r=i,i=i.right;if(r===this)i.right=this.right;else{var a=this.left,s=this.right;r.count-=i.count,r.right=i.left,i.left=a,i.right=s}o(this,i),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?o(this,this.left):o(this,this.right);return 1}for(a=n.ge(this.leftPoints,e,p);a<this.leftPoints.length&&this.leftPoints[a][0]===e[0];++a)if(this.leftPoints[a]===e)for(this.count-=1,this.leftPoints.splice(a,1),s=n.ge(this.rightPoints,e,f);s<this.rightPoints.length&&this.rightPoints[s][1]===e[1];++s)if(this.rightPoints[s]===e)return this.rightPoints.splice(s,1),1;return 0},a.queryPoint=function(e,t){return e<this.mid?this.left&&(r=this.left.queryPoint(e,t))?r:u(this.leftPoints,e,t):e>this.mid?this.right&&(r=this.right.queryPoint(e,t))?r:d(this.rightPoints,e,t):h(this.leftPoints,t);var r},a.queryInterval=function(e,t,r){var n;return e<this.mid&&this.left&&(n=this.left.queryInterval(e,t,r))||t>this.mid&&this.right&&(n=this.right.queryInterval(e,t,r))?n:t<this.mid?u(this.leftPoints,t,r):e>this.mid?d(this.rightPoints,e,r):h(this.leftPoints,r)};var b=y.prototype;b.insert=function(e){this.root?this.root.insert(e):this.root=new i(e[0],null,null,[e],[e])},b.remove=function(e){if(this.root){var t=this.root.remove(e);return 2===t&&(this.root=null),0!==t}return!1},b.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)},b.queryInterval=function(e,t,r){if(e<=t&&this.root)return this.root.queryInterval(e,t,r)},Object.defineProperty(b,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(b,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},9560:function(e){e.exports=function(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=r;return t}},4846:function(e){e.exports=!0},4780:function(e){function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
	 * Determine if an object is a Buffer
	 *
	 * @author   Feross Aboukhadijeh <https://feross.org>
	 * @license  MIT
	 */
e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},3596:function(e){e.exports=function(e){for(var t,r=e.length,n=0;n<r;n++)if(((t=e.charCodeAt(n))<9||t>13)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||t>8205)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}},3578:function(e){e.exports=function(e,t,r){return e*(1-r)+t*r}},7191:function(e,t,r){var n=r(4690),i=r(9823),a=r(7332),o=r(7787),s=r(7437),l=r(2142),c={length:r(4693),normalize:r(899),dot:r(9305),cross:r(903)},u=i(),d=i(),h=[0,0,0,0],g=[[0,0,0],[0,0,0],[0,0,0]],p=[0,0,0];function f(e,t,r,n,i){e[0]=t[0]*n+r[0]*i,e[1]=t[1]*n+r[1]*i,e[2]=t[2]*n+r[2]*i}e.exports=function(e,t,r,i,m,y){if(t||(t=[0,0,0]),r||(r=[0,0,0]),i||(i=[0,0,0]),m||(m=[0,0,0,1]),y||(y=[0,0,0,1]),!n(u,e))return!1;if(a(d,u),d[3]=0,d[7]=0,d[11]=0,d[15]=1,Math.abs(o(d)<1e-8))return!1;var b,v,x=u[3],B=u[7],I=u[11],F=u[12],A=u[13],C=u[14],w=u[15];if(0!==x||0!==B||0!==I){if(h[0]=x,h[1]=B,h[2]=I,h[3]=w,!s(d,d))return!1;l(d,d),function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3];e[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,e[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,e[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,e[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o}(m,h,d)}else m[0]=m[1]=m[2]=0,m[3]=1;if(t[0]=F,t[1]=A,t[2]=C,v=u,(b=g)[0][0]=v[0],b[0][1]=v[1],b[0][2]=v[2],b[1][0]=v[4],b[1][1]=v[5],b[1][2]=v[6],b[2][0]=v[8],b[2][1]=v[9],b[2][2]=v[10],r[0]=c.length(g[0]),c.normalize(g[0],g[0]),i[0]=c.dot(g[0],g[1]),f(g[1],g[1],g[0],1,-i[0]),r[1]=c.length(g[1]),c.normalize(g[1],g[1]),i[0]/=r[1],i[1]=c.dot(g[0],g[2]),f(g[2],g[2],g[0],1,-i[1]),i[2]=c.dot(g[1],g[2]),f(g[2],g[2],g[1],1,-i[2]),r[2]=c.length(g[2]),c.normalize(g[2],g[2]),i[1]/=r[2],i[2]/=r[2],c.cross(p,g[1],g[2]),c.dot(g[0],p)<0)for(var Q=0;Q<3;Q++)r[Q]*=-1,g[Q][0]*=-1,g[Q][1]*=-1,g[Q][2]*=-1;return y[0]=.5*Math.sqrt(Math.max(1+g[0][0]-g[1][1]-g[2][2],0)),y[1]=.5*Math.sqrt(Math.max(1-g[0][0]+g[1][1]-g[2][2],0)),y[2]=.5*Math.sqrt(Math.max(1-g[0][0]-g[1][1]+g[2][2],0)),y[3]=.5*Math.sqrt(Math.max(1+g[0][0]+g[1][1]+g[2][2],0)),g[2][1]>g[1][2]&&(y[0]=-y[0]),g[0][2]>g[2][0]&&(y[1]=-y[1]),g[1][0]>g[0][1]&&(y[2]=-y[2]),!0}},4690:function(e){e.exports=function(e,t){var r=t[15];if(0===r)return!1;for(var n=1/r,i=0;i<16;i++)e[i]=t[i]*n;return!0}},7649:function(e,t,r){var n=r(1868),i=r(1102),a=r(7191),o=r(7787),s=r(1116),l=d(),c=d(),u=d();function d(){return{translate:h(),scale:h(1),skew:h(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function h(e){return[e||0,e||0,e||0]}e.exports=function(e,t,r,d){if(0===o(t)||0===o(r))return!1;var h=a(t,l.translate,l.scale,l.skew,l.perspective,l.quaternion),g=a(r,c.translate,c.scale,c.skew,c.perspective,c.quaternion);return!(!h||!g||(n(u.translate,l.translate,c.translate,d),n(u.skew,l.skew,c.skew,d),n(u.scale,l.scale,c.scale,d),n(u.perspective,l.perspective,c.perspective,d),s(u.quaternion,l.quaternion,c.quaternion,d),i(e,u.translate,u.scale,u.skew,u.perspective,u.quaternion),0))}},1102:function(e,t,r){var n={identity:r(9947),translate:r(998),multiply:r(104),create:r(9823),scale:r(3668),fromRotationTranslation:r(7280)};n.create();var i=n.create();e.exports=function(e,t,r,a,o,s){return n.identity(e),n.fromRotationTranslation(e,s,t),e[3]=o[0],e[7]=o[1],e[11]=o[2],e[15]=o[3],n.identity(i),0!==a[2]&&(i[9]=a[2],n.multiply(e,e,i)),0!==a[1]&&(i[9]=0,i[8]=a[1],n.multiply(e,e,i)),0!==a[0]&&(i[8]=0,i[4]=a[0],n.multiply(e,e,i)),n.scale(e,e,r),e}},9298:function(e,t,r){var n=r(5070),i=r(7649),a=r(7437),o=r(6109),s=r(7115),l=r(5240),c=r(3012),u=r(998);r(3668);var d=r(899),h=[0,0,0];function g(e){this._components=e.slice(),this._time=[0],this.prevMatrix=e.slice(),this.nextMatrix=e.slice(),this.computedMatrix=e.slice(),this.computedInverse=e.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}e.exports=function(e){return new g((e=e||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var p=g.prototype;p.recalcMatrix=function(e){var t=this._time,r=n.le(t,e),o=this.computedMatrix;if(!(r<0)){var s=this._components;if(r===t.length-1)for(var l=16*r,c=0;c<16;++c)o[c]=s[l++];else{var u=t[r+1]-t[r],h=(l=16*r,this.prevMatrix),g=!0;for(c=0;c<16;++c)h[c]=s[l++];var p=this.nextMatrix;for(c=0;c<16;++c)p[c]=s[l++],g=g&&h[c]===p[c];if(u<1e-6||g)for(c=0;c<16;++c)o[c]=h[c];else i(o,h,p,(e-t[r])/u)}var f=this.computedUp;f[0]=o[1],f[1]=o[5],f[2]=o[9],d(f,f);var m=this.computedInverse;a(m,o);var y=this.computedEye,b=m[15];y[0]=m[12]/b,y[1]=m[13]/b,y[2]=m[14]/b;var v=this.computedCenter,x=Math.exp(this.computedRadius[0]);for(c=0;c<3;++c)v[c]=y[c]-o[2+4*c]*x}},p.idle=function(e){if(!(e<this.lastT())){for(var t=this._components,r=t.length-16,n=0;n<16;++n)t.push(t[r++]);this._time.push(e)}},p.flush=function(e){var t=n.gt(this._time,e)-2;t<0||(this._time.splice(0,t),this._components.splice(0,16*t))},p.lastT=function(){return this._time[this._time.length-1]},p.lookAt=function(e,t,r,n){this.recalcMatrix(e),t=t||this.computedEye,r=r||h,n=n||this.computedUp,this.setMatrix(e,c(this.computedMatrix,t,r,n));for(var i=0,a=0;a<3;++a)i+=Math.pow(r[a]-t[a],2);i=Math.log(Math.sqrt(i)),this.computedRadius[0]=i},p.rotate=function(e,t,r,n){this.recalcMatrix(e);var i=this.computedInverse;t&&s(i,i,t),r&&o(i,i,r),n&&l(i,i,n),this.setMatrix(e,a(this.computedMatrix,i))};var f=[0,0,0];p.pan=function(e,t,r,n){f[0]=-(t||0),f[1]=-(r||0),f[2]=-(n||0),this.recalcMatrix(e);var i=this.computedInverse;u(i,i,f),this.setMatrix(e,a(i,i))},p.translate=function(e,t,r,n){f[0]=t||0,f[1]=r||0,f[2]=n||0,this.recalcMatrix(e);var i=this.computedMatrix;u(i,i,f),this.setMatrix(e,i)},p.setMatrix=function(e,t){if(!(e<this.lastT())){this._time.push(e);for(var r=0;r<16;++r)this._components.push(t[r])}},p.setDistance=function(e,t){this.computedRadius[0]=t},p.setDistanceLimits=function(e,t){var r=this._limits;r[0]=e,r[1]=t},p.getDistanceLimits=function(e){var t=this._limits;return e?(e[0]=t[0],e[1]=t[1],e):t}},3266:function(e,t,r){e.exports=function(e){var t=e.length;if(t<3){for(var r=new Array(t),i=0;i<t;++i)r[i]=i;return 2===t&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]?[0]:r}var a=new Array(t);for(i=0;i<t;++i)a[i]=i;a.sort((function(t,r){var n=e[t][0]-e[r][0];return n||e[t][1]-e[r][1]}));var o=[a[0],a[1]],s=[a[0],a[1]];for(i=2;i<t;++i){for(var l=a[i],c=e[l],u=o.length;u>1&&n(e[o[u-2]],e[o[u-1]],c)<=0;)u-=1,o.pop();for(o.push(l),u=s.length;u>1&&n(e[s[u-2]],e[s[u-1]],c)>=0;)u-=1,s.pop();s.push(l)}r=new Array(s.length+o.length-2);for(var d=0,h=(i=0,o.length);i<h;++i)r[d++]=o[i];for(var g=s.length-2;g>0;--g)r[d++]=s[g];return r};var n=r(417)[3]},6145:function(e,t,r){e.exports=function(e,t){t||(t=e,e=window);var r=0,i=0,a=0,o={shift:!1,alt:!1,control:!1,meta:!1},s=!1;function l(e){var t=!1;return"altKey"in e&&(t=t||e.altKey!==o.alt,o.alt=!!e.altKey),"shiftKey"in e&&(t=t||e.shiftKey!==o.shift,o.shift=!!e.shiftKey),"ctrlKey"in e&&(t=t||e.ctrlKey!==o.control,o.control=!!e.ctrlKey),"metaKey"in e&&(t=t||e.metaKey!==o.meta,o.meta=!!e.metaKey),t}function c(e,s){var c=n.x(s),u=n.y(s);"buttons"in s&&(e=0|s.buttons),(e!==r||c!==i||u!==a||l(s))&&(r=0|e,i=c||0,a=u||0,t&&t(r,i,a,o))}function u(e){c(0,e)}function d(){(r||i||a||o.shift||o.alt||o.meta||o.control)&&(i=a=0,r=0,o.shift=o.alt=o.control=o.meta=!1,t&&t(0,0,0,o))}function h(e){l(e)&&t&&t(r,i,a,o)}function g(e){0===n.buttons(e)?c(0,e):c(r,e)}function p(e){c(r|n.buttons(e),e)}function f(e){c(r&~n.buttons(e),e)}function m(){s||(s=!0,e.addEventListener("mousemove",g),e.addEventListener("mousedown",p),e.addEventListener("mouseup",f),e.addEventListener("mouseleave",u),e.addEventListener("mouseenter",u),e.addEventListener("mouseout",u),e.addEventListener("mouseover",u),e.addEventListener("blur",d),e.addEventListener("keyup",h),e.addEventListener("keydown",h),e.addEventListener("keypress",h),e!==window&&(window.addEventListener("blur",d),window.addEventListener("keyup",h),window.addEventListener("keydown",h),window.addEventListener("keypress",h)))}m();var y={element:e};return Object.defineProperties(y,{enabled:{get:function(){return s},set:function(t){t?m():s&&(s=!1,e.removeEventListener("mousemove",g),e.removeEventListener("mousedown",p),e.removeEventListener("mouseup",f),e.removeEventListener("mouseleave",u),e.removeEventListener("mouseenter",u),e.removeEventListener("mouseout",u),e.removeEventListener("mouseover",u),e.removeEventListener("blur",d),e.removeEventListener("keyup",h),e.removeEventListener("keydown",h),e.removeEventListener("keypress",h),e!==window&&(window.removeEventListener("blur",d),window.removeEventListener("keyup",h),window.removeEventListener("keydown",h),window.removeEventListener("keypress",h)))},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return a},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),y};var n=r(4110)},2565:function(e){var t={left:0,top:0};e.exports=function(e,r,n){r=r||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var i,a=e.clientX||0,o=e.clientY||0,s=(i=r)===window||i===document||i===document.body?t:i.getBoundingClientRect();return n[0]=a-s.left,n[1]=o-s.top,n}},4110:function(e,t){function r(e){return e.target||e.srcElement||window}t.buttons=function(e){if("object"==typeof e){if("buttons"in e)return e.buttons;if("which"in e){if(2===(t=e.which))return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t;if(1===(t=e.button))return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0},t.element=r,t.x=function(e){if("object"==typeof e){if("offsetX"in e)return e.offsetX;var t=r(e).getBoundingClientRect();return e.clientX-t.left}return 0},t.y=function(e){if("object"==typeof e){if("offsetY"in e)return e.offsetY;var t=r(e).getBoundingClientRect();return e.clientY-t.top}return 0}},6475:function(e,t,r){var n=r(14);e.exports=function(e,t,r){"function"==typeof e&&(r=!!t,t=e,e=window);var i=n("ex",e),a=function(e){r&&e.preventDefault();var n=e.deltaX||0,a=e.deltaY||0,o=e.deltaZ||0,s=1;switch(e.deltaMode){case 1:s=i;break;case 2:s=window.innerHeight}if(a*=s,o*=s,(n*=s)||a||o)return t(n,a,o,e)};return e.addEventListener("wheel",a),a}},9284:function(e,t,r){var n=r(5306);e.exports=function(e){function t(e){throw new Error("ndarray-extract-contour: "+e)}"object"!=typeof e&&t("Must specify arguments");var r=e.order;Array.isArray(r)||t("Must specify order");var a=e.arrayArguments||1;a<1&&t("Must have at least one array argument");var o=e.scalarArguments||0;o<0&&t("Scalar arg count must be > 0"),"function"!=typeof e.vertex&&t("Must specify vertex creation function"),"function"!=typeof e.cell&&t("Must specify cell creation function"),"function"!=typeof e.phase&&t("Must specify phase function");for(var s=e.getters||[],l=new Array(a),c=0;c<a;++c)s.indexOf(c)>=0?l[c]=!0:l[c]=!1;return function(e,t,r,a,o,s){var l=[s,o].join(",");return(0,i[l])(e,t,r,n.mallocUint32,n.freeUint32)}(e.vertex,e.cell,e.phase,0,r,l)};var i={"false,0,1":function(e,t,r,n,i){return function(a,o,s,l){var c,u=0|a.shape[0],d=0|a.shape[1],h=a.data,g=0|a.offset,p=0|a.stride[0],f=0|a.stride[1],m=g,y=0|-p,b=0,v=0|-f,x=0,B=-p-f|0,I=0,F=0|p,A=f-p*u|0,C=0,w=0,Q=0,U=2*u|0,S=n(U),E=n(U),L=0,_=0,T=-1,R=-1,$=0,k=0|-u,N=0|u,G=0,M=-u-1|0,D=u-1|0,V=0,H=0,X=0;for(C=0;C<u;++C)S[L++]=r(h[m],o,s,l),m+=F;if(m+=A,d>0){if(w=1,S[L++]=r(h[m],o,s,l),m+=F,u>0)for(C=1,c=h[m],_=S[L]=r(c,o,s,l),$=S[L+T],G=S[L+k],V=S[L+M],_===$&&_===G&&_===V||(b=h[m+y],x=h[m+v],I=h[m+B],e(C,w,c,b,x,I,_,$,G,V,o,s,l),H=E[L]=Q++),L+=1,m+=F,C=2;C<u;++C)c=h[m],_=S[L]=r(c,o,s,l),$=S[L+T],G=S[L+k],V=S[L+M],_===$&&_===G&&_===V||(b=h[m+y],x=h[m+v],I=h[m+B],e(C,w,c,b,x,I,_,$,G,V,o,s,l),H=E[L]=Q++,V!==$&&t(E[L+T],H,I,b,V,$,o,s,l)),L+=1,m+=F;for(m+=A,L=0,X=T,T=R,R=X,X=k,k=N,N=X,X=M,M=D,D=X,w=2;w<d;++w){if(S[L++]=r(h[m],o,s,l),m+=F,u>0)for(C=1,c=h[m],_=S[L]=r(c,o,s,l),$=S[L+T],G=S[L+k],V=S[L+M],_===$&&_===G&&_===V||(b=h[m+y],x=h[m+v],I=h[m+B],e(C,w,c,b,x,I,_,$,G,V,o,s,l),H=E[L]=Q++,V!==G&&t(E[L+k],H,x,I,G,V,o,s,l)),L+=1,m+=F,C=2;C<u;++C)c=h[m],_=S[L]=r(c,o,s,l),$=S[L+T],G=S[L+k],V=S[L+M],_===$&&_===G&&_===V||(b=h[m+y],x=h[m+v],I=h[m+B],e(C,w,c,b,x,I,_,$,G,V,o,s,l),H=E[L]=Q++,V!==G&&t(E[L+k],H,x,I,G,V,o,s,l),V!==$&&t(E[L+T],H,I,b,V,$,o,s,l)),L+=1,m+=F;1&w&&(L=0),X=T,T=R,R=X,X=k,k=N,N=X,X=M,M=D,D=X,m+=A}}i(E),i(S)}},"false,1,0":function(e,t,r,n,i){return function(a,o,s,l){var c,u=0|a.shape[0],d=0|a.shape[1],h=a.data,g=0|a.offset,p=0|a.stride[0],f=0|a.stride[1],m=g,y=0|-p,b=0,v=0|-f,x=0,B=-p-f|0,I=0,F=0|f,A=p-f*d|0,C=0,w=0,Q=0,U=2*d|0,S=n(U),E=n(U),L=0,_=0,T=-1,R=-1,$=0,k=0|-d,N=0|d,G=0,M=-d-1|0,D=d-1|0,V=0,H=0,X=0;for(w=0;w<d;++w)S[L++]=r(h[m],o,s,l),m+=F;if(m+=A,u>0){if(C=1,S[L++]=r(h[m],o,s,l),m+=F,d>0)for(w=1,c=h[m],_=S[L]=r(c,o,s,l),G=S[L+k],$=S[L+T],V=S[L+M],_===G&&_===$&&_===V||(b=h[m+y],x=h[m+v],I=h[m+B],e(C,w,c,b,x,I,_,G,$,V,o,s,l),H=E[L]=Q++),L+=1,m+=F,w=2;w<d;++w)c=h[m],_=S[L]=r(c,o,s,l),G=S[L+k],$=S[L+T],V=S[L+M],_===G&&_===$&&_===V||(b=h[m+y],x=h[m+v],I=h[m+B],e(C,w,c,b,x,I,_,G,$,V,o,s,l),H=E[L]=Q++,V!==$&&t(E[L+T],H,x,I,$,V,o,s,l)),L+=1,m+=F;for(m+=A,L=0,X=k,k=N,N=X,X=T,T=R,R=X,X=M,M=D,D=X,C=2;C<u;++C){if(S[L++]=r(h[m],o,s,l),m+=F,d>0)for(w=1,c=h[m],_=S[L]=r(c,o,s,l),G=S[L+k],$=S[L+T],V=S[L+M],_===G&&_===$&&_===V||(b=h[m+y],x=h[m+v],I=h[m+B],e(C,w,c,b,x,I,_,G,$,V,o,s,l),H=E[L]=Q++,V!==G&&t(E[L+k],H,I,b,V,G,o,s,l)),L+=1,m+=F,w=2;w<d;++w)c=h[m],_=S[L]=r(c,o,s,l),G=S[L+k],$=S[L+T],V=S[L+M],_===G&&_===$&&_===V||(b=h[m+y],x=h[m+v],I=h[m+B],e(C,w,c,b,x,I,_,G,$,V,o,s,l),H=E[L]=Q++,V!==$&&t(E[L+T],H,x,I,$,V,o,s,l),V!==G&&t(E[L+k],H,I,b,V,G,o,s,l)),L+=1,m+=F;1&C&&(L=0),X=k,k=N,N=X,X=T,T=R,R=X,X=M,M=D,D=X,m+=A}}i(E),i(S)}}}},9144:function(e,t,r){var n=r(3094),i={zero:function(e,t,r,n){var i=e[0];n|=0;var a=0,o=r[0];for(a=0;a<i;++a)t[n]=0,n+=o},fdTemplate1:function(e,t,r,n,i,a,o){var s=e[0],l=r[0],c=-1*l,u=l;n|=0,o|=0;var d=0,h=l,g=a[0];for(d=0;d<s;++d)i[o]=.5*(t[n+c]-t[n+u]),n+=h,o+=g},fdTemplate2:function(e,t,r,n,i,a,o,s,l,c){var u=e[0],d=e[1],h=r[0],g=r[1],p=a[0],f=a[1],m=l[0],y=l[1],b=-1*h,v=h,x=-1*g,B=g;n|=0,o|=0,c|=0;var I=0,F=0,A=g,C=h-d*g,w=f,Q=p-d*f,U=y,S=m-d*y;for(F=0;F<u;++F){for(I=0;I<d;++I)i[o]=.5*(t[n+b]-t[n+v]),s[c]=.5*(t[n+x]-t[n+B]),n+=A,o+=w,c+=U;n+=C,o+=Q,c+=S}}},a={cdiff:function(e){var t={};return function(r,n,i){var a=r.dtype,o=r.order,s=n.dtype,l=n.order,c=i.dtype,u=i.order,d=[a,o.join(),s,l.join(),c,u.join()].join(),h=t[d];return h||(t[d]=h=e([a,o,s,l,c,u])),h(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset,i.data,i.stride,0|i.offset)}},zero:function(e){var t={};return function(r){var n=r.dtype,i=r.order,a=[n,i.join()].join(),o=t[a];return o||(t[a]=o=e([n,i])),o(r.shape.slice(0),r.data,r.stride,0|r.offset)}},fdTemplate1:function(e){var t={};return function(r,n){var i=r.dtype,a=r.order,o=n.dtype,s=n.order,l=[i,a.join(),o,s.join()].join(),c=t[l];return c||(t[l]=c=e([i,a,o,s])),c(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset)}},fdTemplate2:function(e){var t={};return function(r,n,i){var a=r.dtype,o=r.order,s=n.dtype,l=n.order,c=i.dtype,u=i.order,d=[a,o.join(),s,l.join(),c,u.join()].join(),h=t[d];return h||(t[d]=h=e([a,o,s,l,c,u])),h(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset,i.data,i.stride,0|i.offset)}}};function o(e){return(0,a[e.funcName])(s.bind(void 0,e))}function s(e){return i[e.funcName]}function l(e){return o({funcName:e.funcName})}var c={},u={},d=l({funcName:"cdiff"}),h=l({funcName:"zero"});function g(e){return e in c?c[e]:c[e]=l({funcName:"fdTemplate"+e})}function p(e,t,r,n){return function(e,i){var a=i.shape.slice();return a[0]>2&&a[1]>2&&n(i.pick(-1,-1).lo(1,1).hi(a[0]-2,a[1]-2),e.pick(-1,-1,0).lo(1,1).hi(a[0]-2,a[1]-2),e.pick(-1,-1,1).lo(1,1).hi(a[0]-2,a[1]-2)),a[1]>2&&(r(i.pick(0,-1).lo(1).hi(a[1]-2),e.pick(0,-1,1).lo(1).hi(a[1]-2)),t(e.pick(0,-1,0).lo(1).hi(a[1]-2))),a[1]>2&&(r(i.pick(a[0]-1,-1).lo(1).hi(a[1]-2),e.pick(a[0]-1,-1,1).lo(1).hi(a[1]-2)),t(e.pick(a[0]-1,-1,0).lo(1).hi(a[1]-2))),a[0]>2&&(r(i.pick(-1,0).lo(1).hi(a[0]-2),e.pick(-1,0,0).lo(1).hi(a[0]-2)),t(e.pick(-1,0,1).lo(1).hi(a[0]-2))),a[0]>2&&(r(i.pick(-1,a[1]-1).lo(1).hi(a[0]-2),e.pick(-1,a[1]-1,0).lo(1).hi(a[0]-2)),t(e.pick(-1,a[1]-1,1).lo(1).hi(a[0]-2))),e.set(0,0,0,0),e.set(0,0,1,0),e.set(a[0]-1,0,0,0),e.set(a[0]-1,0,1,0),e.set(0,a[1]-1,0,0),e.set(0,a[1]-1,1,0),e.set(a[0]-1,a[1]-1,0,0),e.set(a[0]-1,a[1]-1,1,0),e}}e.exports=function(e,t,r){if(Array.isArray(r)||(r=n(t.dimension,"string"==typeof r?r:"clamp")),0===t.size)return e;if(0===t.dimension)return e.set(0),e;var i=function(e){var t=e.join();if(a=u[t])return a;for(var r=e.length,n=[d,h],i=1;i<=r;++i)n.push(g(i));var a=p.apply(void 0,n);return u[t]=a,a}(r);return i(e,t)}},3581:function(e){function t(e,t){var r=Math.floor(t),n=t-r,i=0<=r&&r<e.shape[0],a=0<=r+1&&r+1<e.shape[0];return(1-n)*(i?+e.get(r):0)+n*(a?+e.get(r+1):0)}function r(e,t,r){var n=Math.floor(t),i=t-n,a=0<=n&&n<e.shape[0],o=0<=n+1&&n+1<e.shape[0],s=Math.floor(r),l=r-s,c=0<=s&&s<e.shape[1],u=0<=s+1&&s+1<e.shape[1],d=a&&c?e.get(n,s):0,h=a&&u?e.get(n,s+1):0;return(1-l)*((1-i)*d+i*(o&&c?e.get(n+1,s):0))+l*((1-i)*h+i*(o&&u?e.get(n+1,s+1):0))}function n(e,t,r,n){var i=Math.floor(t),a=t-i,o=0<=i&&i<e.shape[0],s=0<=i+1&&i+1<e.shape[0],l=Math.floor(r),c=r-l,u=0<=l&&l<e.shape[1],d=0<=l+1&&l+1<e.shape[1],h=Math.floor(n),g=n-h,p=0<=h&&h<e.shape[2],f=0<=h+1&&h+1<e.shape[2],m=o&&u&&p?e.get(i,l,h):0,y=o&&d&&p?e.get(i,l+1,h):0,b=s&&u&&p?e.get(i+1,l,h):0,v=s&&d&&p?e.get(i+1,l+1,h):0,x=o&&u&&f?e.get(i,l,h+1):0,B=o&&d&&f?e.get(i,l+1,h+1):0;return(1-g)*((1-c)*((1-a)*m+a*b)+c*((1-a)*y+a*v))+g*((1-c)*((1-a)*x+a*(s&&u&&f?e.get(i+1,l,h+1):0))+c*((1-a)*B+a*(s&&d&&f?e.get(i+1,l+1,h+1):0)))}function i(e){var t,r,n=0|e.shape.length,i=new Array(n),a=new Array(n),o=new Array(n),s=new Array(n);for(t=0;t<n;++t)r=+arguments[t+1],i[t]=Math.floor(r),a[t]=r-i[t],o[t]=0<=i[t]&&i[t]<e.shape[t],s[t]=0<=i[t]+1&&i[t]+1<e.shape[t];var l,c,u,d=0;e:for(t=0;t<1<<n;++t){for(c=1,u=e.offset,l=0;l<n;++l)if(t&1<<l){if(!s[l])continue e;c*=a[l],u+=e.stride[l]*(i[l]+1)}else{if(!o[l])continue e;c*=1-a[l],u+=e.stride[l]*i[l]}d+=c*e.data[u]}return d}e.exports=function(e,a,o,s){switch(e.shape.length){case 0:return 0;case 1:return t(e,a);case 2:return r(e,a,o);case 3:return n(e,a,o,s);default:return i.apply(void 0,arguments)}},e.exports.d1=t,e.exports.d2=r,e.exports.d3=n},7498:function(e,t){var r={"float64,2,1,0":function(){return function(e,t,r,n,i){var a=e[0],o=e[1],s=e[2],l=r[0],c=r[1],u=r[2];n|=0;var d=0,h=0,g=0,p=u,f=c-s*u,m=l-o*c;for(g=0;g<a;++g){for(h=0;h<o;++h){for(d=0;d<s;++d)t[n]/=i,n+=p;n+=f}n+=m}}},"uint8,2,0,1,float64,2,1,0":function(){return function(e,t,r,n,i,a,o,s){for(var l=e[0],c=e[1],u=e[2],d=r[0],h=r[1],g=r[2],p=a[0],f=a[1],m=a[2],y=n|=0,b=o|=0,v=0|e[0];v>0;){v<64?(l=v,v=0):(l=64,v-=64);for(var x=0|e[1];x>0;){x<64?(c=x,x=0):(c=64,x-=64),n=y+v*d+x*h,o=b+v*p+x*f;var B=0,I=0,F=0,A=g,C=d-u*g,w=h-l*d,Q=m,U=p-u*m,S=f-l*p;for(F=0;F<c;++F){for(I=0;I<l;++I){for(B=0;B<u;++B)t[n]=i[o]*s,n+=A,o+=Q;n+=C,o+=U}n+=w,o+=S}}}}},"float32,1,0,float32,1,0":function(){return function(e,t,r,n,i,a,o){var s=e[0],l=e[1],c=r[0],u=r[1],d=a[0],h=a[1];n|=0,o|=0;var g=0,p=0,f=u,m=c-l*u,y=h,b=d-l*h;for(p=0;p<s;++p){for(g=0;g<l;++g)t[n]=i[o],n+=f,o+=y;n+=m,o+=b}}},"float32,1,0,float32,0,1":function(){return function(e,t,r,n,i,a,o){for(var s=e[0],l=e[1],c=r[0],u=r[1],d=a[0],h=a[1],g=n|=0,p=o|=0,f=0|e[1];f>0;){f<64?(l=f,f=0):(l=64,f-=64);for(var m=0|e[0];m>0;){m<64?(s=m,m=0):(s=64,m-=64),n=g+f*u+m*c,o=p+f*h+m*d;var y=0,b=0,v=u,x=c-l*u,B=h,I=d-l*h;for(b=0;b<s;++b){for(y=0;y<l;++y)t[n]=i[o],n+=v,o+=B;n+=x,o+=I}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(e,t,r,n,i,a,o){for(var s=e[0],l=e[1],c=e[2],u=r[0],d=r[1],h=r[2],g=a[0],p=a[1],f=a[2],m=n|=0,y=o|=0,b=0|e[2];b>0;){b<64?(c=b,b=0):(c=64,b-=64);for(var v=0|e[0];v>0;){v<64?(s=v,v=0):(s=64,v-=64);for(var x=0|e[1];x>0;){x<64?(l=x,x=0):(l=64,x-=64),n=m+b*h+v*u+x*d,o=y+b*f+v*g+x*p;var B=0,I=0,F=0,A=h,C=u-c*h,w=d-s*u,Q=f,U=g-c*f,S=p-s*g;for(F=0;F<l;++F){for(I=0;I<s;++I){for(B=0;B<c;++B)t[n]=i[o],n+=A,o+=Q;n+=C,o+=U}n+=w,o+=S}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(e,t,r,n,i,a,o){var s=e[0],l=e[1],c=e[2],u=r[0],d=r[1],h=r[2],g=a[0],p=a[1],f=a[2];n|=0,o|=0;var m=0,y=0,b=0,v=h,x=u-c*h,B=d-s*u,I=f,F=g-c*f,A=p-s*g;for(b=0;b<l;++b){for(y=0;y<s;++y){for(m=0;m<c;++m)t[n]=i[o],n+=v,o+=I;n+=x,o+=F}n+=B,o+=A}}}},n=function(e,t){var n=t.join(",");return(0,r[n])()},i={mul:function(e){var t={};return function(r,n,i){var a=r.dtype,o=r.order,s=n.dtype,l=n.order,c=i.dtype,u=i.order,d=[a,o.join(),s,l.join(),c,u.join()].join(),h=t[d];return h||(t[d]=h=e([a,o,s,l,c,u])),h(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset,i.data,i.stride,0|i.offset)}},muls:function(e){var t={};return function(r,n,i){var a=r.dtype,o=r.order,s=n.dtype,l=n.order,c=[a,o.join(),s,l.join()].join(),u=t[c];return u||(t[c]=u=e([a,o,s,l])),u(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset,i)}},mulseq:function(e){var t={};return function(r,n){var i=r.dtype,a=r.order,o=[i,a.join()].join(),s=t[o];return s||(t[o]=s=e([i,a])),s(r.shape.slice(0),r.data,r.stride,0|r.offset,n)}},div:function(e){var t={};return function(r,n,i){var a=r.dtype,o=r.order,s=n.dtype,l=n.order,c=i.dtype,u=i.order,d=[a,o.join(),s,l.join(),c,u.join()].join(),h=t[d];return h||(t[d]=h=e([a,o,s,l,c,u])),h(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset,i.data,i.stride,0|i.offset)}},divs:function(e){var t={};return function(r,n,i){var a=r.dtype,o=r.order,s=n.dtype,l=n.order,c=[a,o.join(),s,l.join()].join(),u=t[c];return u||(t[c]=u=e([a,o,s,l])),u(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset,i)}},divseq:function(e){var t={};return function(r,n){var i=r.dtype,a=r.order,o=[i,a.join()].join(),s=t[o];return s||(t[o]=s=e([i,a])),s(r.shape.slice(0),r.data,r.stride,0|r.offset,n)}},assign:function(e){var t={};return function(r,n){var i=r.dtype,a=r.order,o=n.dtype,s=n.order,l=[i,a.join(),o,s.join()].join(),c=t[l];return c||(t[l]=c=e([i,a,o,s])),c(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset)}}};function a(e){return t={funcName:e.funcName},(0,i[t.funcName])(n.bind(void 0,t));var t}var o={mul:"*",div:"/"};!function(){for(var e in o)t[e]=a({funcName:e}),t[e+"s"]=a({funcName:e+"s"}),t[e+"seq"]=a({funcName:e+"seq"})}(),t.assign=a({funcName:"assign"})},7382:function(e,t,r){var n=r(5050),i=r(9262);e.exports=function(e,t){for(var r=[],a=e,o=1;Array.isArray(a);)r.push(a.length),o*=a.length,a=a[0];return 0===r.length?n():(t||(t=n(new Float64Array(o),r)),i(t,e),t)}},9262:function(e){var t,r=function(){return function(e,t,r,n,i){var a=e[0],o=e[1],s=e[2],l=r[0],c=r[1],u=r[2],d=[0,0,0];n|=0;var h=0,g=0,p=0,f=u,m=c-s*u,y=l-o*c;for(p=0;p<a;++p){for(g=0;g<o;++g){for(h=0;h<s;++h){var b,v=i;for(b=0;b<d.length-1;++b)v=v[d[b]];t[n]=v[d[d.length-1]],n+=f,++d[2]}n+=m,d[2]-=s,++d[1]}n+=y,d[1]-=o,++d[0]}}};e.exports=(t={funcName:"convert"},function(e){var t={};return function(r,n){var i=r.dtype,a=r.order,o=[i,a.join()].join(),s=t[o];return s||(t[o]=s=e([i,a])),s(r.shape.slice(0),r.data,r.stride,0|r.offset,n)}}(r.bind(void 0,t)))},8139:function(e,t,r){var n=r(5306);function i(e){return"uint32"===e?[n.mallocUint32,n.freeUint32]:null}var a={"uint32,1,0":function(e,t){return function(r,n,i,a,o,s,l,c,u,d,h){var g,p,f,m,y,b,v,x,B=r*o+a,I=e(c);for(g=r+1;g<=n;++g){for(p=g,f=B+=o,y=0,b=B,m=0;m<c;++m)I[y++]=i[b],b+=u;e:for(;p-- >r;){y=0,b=f-o;t:for(m=0;m<c;++m){if((v=i[b])<(x=I[y]))break e;if(v>x)break t;b+=d,y+=h}for(y=f,b=f-o,m=0;m<c;++m)i[y]=i[b],y+=u,b+=u;f-=o}for(y=f,b=0,m=0;m<c;++m)i[y]=I[b++],y+=u}t(I)}}},o={"uint32,1,0":function(e,t,r){return function n(i,a,o,s,l,c,u,d,h,g,p){var f,m,y,b,v,x,B,I,F,A,C,w,Q,U,S,E,L,_,T,R,$,k,N,G,M,D=(a-i+1)/6|0,V=i+D,H=a-D,X=i+a>>1,O=X-D,Z=X+D,W=V,Y=O,P=X,z=Z,J=H,j=i+1,K=a-1,q=!0,ee=0,te=0,re=0,ne=d,ie=t(ne),ae=t(ne);C=l*W,w=l*Y,M=s;e:for(A=0;A<d;++A){if(I=w+M,(re=o[B=C+M]-o[I])>0){m=W,W=Y,Y=m;break e}if(re<0)break e;M+=g}C=l*z,w=l*J,M=s;e:for(A=0;A<d;++A){if(I=w+M,(re=o[B=C+M]-o[I])>0){m=z,z=J,J=m;break e}if(re<0)break e;M+=g}C=l*W,w=l*P,M=s;e:for(A=0;A<d;++A){if(I=w+M,(re=o[B=C+M]-o[I])>0){m=W,W=P,P=m;break e}if(re<0)break e;M+=g}C=l*Y,w=l*P,M=s;e:for(A=0;A<d;++A){if(I=w+M,(re=o[B=C+M]-o[I])>0){m=Y,Y=P,P=m;break e}if(re<0)break e;M+=g}C=l*W,w=l*z,M=s;e:for(A=0;A<d;++A){if(I=w+M,(re=o[B=C+M]-o[I])>0){m=W,W=z,z=m;break e}if(re<0)break e;M+=g}C=l*P,w=l*z,M=s;e:for(A=0;A<d;++A){if(I=w+M,(re=o[B=C+M]-o[I])>0){m=P,P=z,z=m;break e}if(re<0)break e;M+=g}C=l*Y,w=l*J,M=s;e:for(A=0;A<d;++A){if(I=w+M,(re=o[B=C+M]-o[I])>0){m=Y,Y=J,J=m;break e}if(re<0)break e;M+=g}C=l*Y,w=l*P,M=s;e:for(A=0;A<d;++A){if(I=w+M,(re=o[B=C+M]-o[I])>0){m=Y,Y=P,P=m;break e}if(re<0)break e;M+=g}C=l*z,w=l*J,M=s;e:for(A=0;A<d;++A){if(I=w+M,(re=o[B=C+M]-o[I])>0){m=z,z=J,J=m;break e}if(re<0)break e;M+=g}for(C=l*W,w=l*Y,Q=l*P,U=l*z,S=l*J,E=l*V,L=l*X,_=l*H,G=0,M=s,A=0;A<d;++A)B=C+M,I=w+M,F=Q+M,T=U+M,R=S+M,$=E+M,k=L+M,N=_+M,ie[G]=o[I],ae[G]=o[T],q=q&&ie[G]===ae[G],y=o[B],b=o[F],v=o[R],o[$]=y,o[k]=b,o[N]=v,++G,M+=h;for(C=l*O,w=l*i,M=s,A=0;A<d;++A)I=w+M,o[B=C+M]=o[I],M+=h;for(C=l*Z,w=l*a,M=s,A=0;A<d;++A)I=w+M,o[B=C+M]=o[I],M+=h;if(q)for(x=j;x<=K;++x){for(B=s+x*l,G=0,A=0;A<d&&0==(re=o[B]-ie[G]);++A)G+=p,B+=g;if(0!==re)if(re<0){if(x!==j)for(C=l*x,w=l*j,M=s,A=0;A<d;++A)I=w+M,f=o[B=C+M],o[B]=o[I],o[I]=f,M+=h;++j}else for(;;){for(B=s+K*l,G=0,A=0;A<d&&0==(re=o[B]-ie[G]);++A)G+=p,B+=g;if(!(re>0)){if(re<0){for(C=l*x,w=l*j,Q=l*K,M=s,A=0;A<d;++A)I=w+M,F=Q+M,f=o[B=C+M],o[B]=o[I],o[I]=o[F],o[F]=f,M+=h;++j,--K;break}for(C=l*x,w=l*K,M=s,A=0;A<d;++A)I=w+M,f=o[B=C+M],o[B]=o[I],o[I]=f,M+=h;--K;break}K--}}else for(x=j;x<=K;++x){for(B=s+x*l,G=0,A=0;A<d&&0==(ee=o[B]-ie[G]);++A)G+=p,B+=g;if(ee<0){if(x!==j)for(C=l*x,w=l*j,M=s,A=0;A<d;++A)I=w+M,f=o[B=C+M],o[B]=o[I],o[I]=f,M+=h;++j}else{for(B=s+x*l,G=0,A=0;A<d&&0==(te=o[B]-ae[G]);++A)G+=p,B+=g;if(te>0)for(;;){for(B=s+K*l,G=0,A=0;A<d&&0==(re=o[B]-ae[G]);++A)G+=p,B+=g;if(!(re>0)){for(B=s+K*l,G=0,A=0;A<d&&0==(re=o[B]-ie[G]);++A)G+=p,B+=g;if(re<0){for(C=l*x,w=l*j,Q=l*K,M=s,A=0;A<d;++A)I=w+M,F=Q+M,f=o[B=C+M],o[B]=o[I],o[I]=o[F],o[F]=f,M+=h;++j,--K}else{for(C=l*x,w=l*K,M=s,A=0;A<d;++A)I=w+M,f=o[B=C+M],o[B]=o[I],o[I]=f,M+=h;--K}break}if(--K<x)break}}}for(C=l*i,w=l*(j-1),G=0,M=s,A=0;A<d;++A)I=w+M,o[B=C+M]=o[I],o[I]=ie[G],++G,M+=h;for(C=l*a,w=l*(K+1),G=0,M=s,A=0;A<d;++A)I=w+M,o[B=C+M]=o[I],o[I]=ae[G],++G,M+=h;if(j-2-i<=32?e(i,j-2,o,s,l,c,u,d,h,g,p):n(i,j-2,o,s,l,c,u,d,h,g,p),a-(K+2)<=32?e(K+2,a,o,s,l,c,u,d,h,g,p):n(K+2,a,o,s,l,c,u,d,h,g,p),q)return r(ie),void r(ae);if(j<V&&K>H){e:for(;;){for(B=s+j*l,G=0,M=s,A=0;A<d;++A){if(o[B]!==ie[G])break e;++G,B+=h}++j}e:for(;;){for(B=s+K*l,G=0,M=s,A=0;A<d;++A){if(o[B]!==ae[G])break e;++G,B+=h}--K}for(x=j;x<=K;++x){for(B=s+x*l,G=0,A=0;A<d&&0==(ee=o[B]-ie[G]);++A)G+=p,B+=g;if(0===ee){if(x!==j)for(C=l*x,w=l*j,M=s,A=0;A<d;++A)I=w+M,f=o[B=C+M],o[B]=o[I],o[I]=f,M+=h;++j}else{for(B=s+x*l,G=0,A=0;A<d&&0==(te=o[B]-ae[G]);++A)G+=p,B+=g;if(0===te)for(;;){for(B=s+K*l,G=0,A=0;A<d&&0==(re=o[B]-ae[G]);++A)G+=p,B+=g;if(0!==re){for(B=s+K*l,G=0,A=0;A<d&&0==(re=o[B]-ie[G]);++A)G+=p,B+=g;if(re<0){for(C=l*x,w=l*j,Q=l*K,M=s,A=0;A<d;++A)I=w+M,F=Q+M,f=o[B=C+M],o[B]=o[I],o[I]=o[F],o[F]=f,M+=h;++j,--K}else{for(C=l*x,w=l*K,M=s,A=0;A<d;++A)I=w+M,f=o[B=C+M],o[B]=o[I],o[I]=f,M+=h;--K}break}if(--K<x)break}}}}r(ie),r(ae),K-j<=32?e(j,K,o,s,l,c,u,d,h,g,p):n(j,K,o,s,l,c,u,d,h,g,p)}}},s={"uint32,1,0":function(e,t){return function(r){var n=r.data,i=0|r.offset,a=r.shape,o=r.stride,s=0|o[0],l=0|a[0],c=0|o[1],u=0|a[1],d=c,h=c;l<=32?e(0,l-1,n,i,s,c,l,u,d,h,1):t(0,l-1,n,i,s,c,l,u,d,h,1)}}};e.exports=function(e,t){var r=[t,e].join(","),n=s[r],l=function(e,t){var r=i(t),n=[t,e].join(","),o=a[n];return r?o(r[0],r[1]):o()}(e,t),c=function(e,t,r){var n=i(t),a=[t,e].join(","),s=o[a];return e.length>1&&n?s(r,n[0],n[1]):s(r)}(e,t,l);return n(l,c)}},8729:function(e,t,r){var n=r(8139),i={};e.exports=function(e){var t=e.order,r=e.dtype,a=[t,r].join(":"),o=i[a];return o||(i[a]=o=n(t,r)),o(e),e}},5050:function(e,t,r){var n=r(4780),i="undefined"!=typeof Float64Array;function a(e,t){return e[0]-t[0]}function o(){var e,t=this.stride,r=new Array(t.length);for(e=0;e<r.length;++e)r[e]=[Math.abs(t[e]),e];r.sort(a);var n=new Array(r.length);for(e=0;e<n.length;++e)n[e]=r[e][1];return n}var s={T:function(e){function t(e){this.data=e}var r=t.prototype;return r.dtype=e,r.index=function(){return-1},r.size=0,r.dimension=-1,r.shape=r.stride=r.order=[],r.lo=r.hi=r.transpose=r.step=function(){return new t(this.data)},r.get=r.set=function(){},r.pick=function(){return null},function(e){return new t(e)}},0:function(e,t){function r(e,t){this.data=e,this.offset=t}var n=r.prototype;return n.dtype=e,n.index=function(){return this.offset},n.dimension=0,n.size=1,n.shape=n.stride=n.order=[],n.lo=n.hi=n.transpose=n.step=function(){return new r(this.data,this.offset)},n.pick=function(){return t(this.data)},n.valueOf=n.get=function(){return"generic"===e?this.data.get(this.offset):this.data[this.offset]},n.set=function(t){return"generic"===e?this.data.set(this.offset,t):this.data[this.offset]=t},function(e,t,n,i){return new r(e,i)}},1:function(e,t,r){function n(e,t,r,n){this.data=e,this.shape=[t],this.stride=[r],this.offset=0|n}var i=n.prototype;return i.dtype=e,i.dimension=1,Object.defineProperty(i,"size",{get:function(){return this.shape[0]}}),i.order=[0],i.set=function(t,r){return"generic"===e?this.data.set(this.offset+this.stride[0]*t,r):this.data[this.offset+this.stride[0]*t]=r},i.get=function(t){return"generic"===e?this.data.get(this.offset+this.stride[0]*t):this.data[this.offset+this.stride[0]*t]},i.index=function(e){return this.offset+this.stride[0]*e},i.hi=function(e){return new n(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,this.stride[0],this.offset)},i.lo=function(e){var t=this.offset,r=0,i=this.shape[0],a=this.stride[0];return"number"==typeof e&&e>=0&&(t+=a*(r=0|e),i-=r),new n(this.data,i,a,t)},i.step=function(e){var t=this.shape[0],r=this.stride[0],i=this.offset,a=0,o=Math.ceil;return"number"==typeof e&&((a=0|e)<0?(i+=r*(t-1),t=o(-t/a)):t=o(t/a),r*=a),new n(this.data,t,r,i)},i.transpose=function(e){e=void 0===e?0:0|e;var t=this.shape,r=this.stride;return new n(this.data,t[e],r[e],this.offset)},i.pick=function(e){var r=[],n=[],i=this.offset;return"number"==typeof e&&e>=0?i=i+this.stride[0]*e|0:(r.push(this.shape[0]),n.push(this.stride[0])),(0,t[r.length+1])(this.data,r,n,i)},function(e,t,r,i){return new n(e,t[0],r[0],i)}},2:function(e,t,r){function n(e,t,r,n,i,a){this.data=e,this.shape=[t,r],this.stride=[n,i],this.offset=0|a}var i=n.prototype;return i.dtype=e,i.dimension=2,Object.defineProperty(i,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(i,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),i.set=function(t,r,n){return"generic"===e?this.data.set(this.offset+this.stride[0]*t+this.stride[1]*r,n):this.data[this.offset+this.stride[0]*t+this.stride[1]*r]=n},i.get=function(t,r){return"generic"===e?this.data.get(this.offset+this.stride[0]*t+this.stride[1]*r):this.data[this.offset+this.stride[0]*t+this.stride[1]*r]},i.index=function(e,t){return this.offset+this.stride[0]*e+this.stride[1]*t},i.hi=function(e,t){return new n(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,"number"!=typeof t||t<0?this.shape[1]:0|t,this.stride[0],this.stride[1],this.offset)},i.lo=function(e,t){var r=this.offset,i=0,a=this.shape[0],o=this.shape[1],s=this.stride[0],l=this.stride[1];return"number"==typeof e&&e>=0&&(r+=s*(i=0|e),a-=i),"number"==typeof t&&t>=0&&(r+=l*(i=0|t),o-=i),new n(this.data,a,o,s,l,r)},i.step=function(e,t){var r=this.shape[0],i=this.shape[1],a=this.stride[0],o=this.stride[1],s=this.offset,l=0,c=Math.ceil;return"number"==typeof e&&((l=0|e)<0?(s+=a*(r-1),r=c(-r/l)):r=c(r/l),a*=l),"number"==typeof t&&((l=0|t)<0?(s+=o*(i-1),i=c(-i/l)):i=c(i/l),o*=l),new n(this.data,r,i,a,o,s)},i.transpose=function(e,t){e=void 0===e?0:0|e,t=void 0===t?1:0|t;var r=this.shape,i=this.stride;return new n(this.data,r[e],r[t],i[e],i[t],this.offset)},i.pick=function(e,r){var n=[],i=[],a=this.offset;return"number"==typeof e&&e>=0?a=a+this.stride[0]*e|0:(n.push(this.shape[0]),i.push(this.stride[0])),"number"==typeof r&&r>=0?a=a+this.stride[1]*r|0:(n.push(this.shape[1]),i.push(this.stride[1])),(0,t[n.length+1])(this.data,n,i,a)},function(e,t,r,i){return new n(e,t[0],t[1],r[0],r[1],i)}},3:function(e,t,r){function n(e,t,r,n,i,a,o,s){this.data=e,this.shape=[t,r,n],this.stride=[i,a,o],this.offset=0|s}var i=n.prototype;return i.dtype=e,i.dimension=3,Object.defineProperty(i,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(i,"order",{get:function(){var e=Math.abs(this.stride[0]),t=Math.abs(this.stride[1]),r=Math.abs(this.stride[2]);return e>t?t>r?[2,1,0]:e>r?[1,2,0]:[1,0,2]:e>r?[2,0,1]:r>t?[0,1,2]:[0,2,1]}}),i.set=function(t,r,n,i){return"generic"===e?this.data.set(this.offset+this.stride[0]*t+this.stride[1]*r+this.stride[2]*n,i):this.data[this.offset+this.stride[0]*t+this.stride[1]*r+this.stride[2]*n]=i},i.get=function(t,r,n){return"generic"===e?this.data.get(this.offset+this.stride[0]*t+this.stride[1]*r+this.stride[2]*n):this.data[this.offset+this.stride[0]*t+this.stride[1]*r+this.stride[2]*n]},i.index=function(e,t,r){return this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*r},i.hi=function(e,t,r){return new n(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,"number"!=typeof t||t<0?this.shape[1]:0|t,"number"!=typeof r||r<0?this.shape[2]:0|r,this.stride[0],this.stride[1],this.stride[2],this.offset)},i.lo=function(e,t,r){var i=this.offset,a=0,o=this.shape[0],s=this.shape[1],l=this.shape[2],c=this.stride[0],u=this.stride[1],d=this.stride[2];return"number"==typeof e&&e>=0&&(i+=c*(a=0|e),o-=a),"number"==typeof t&&t>=0&&(i+=u*(a=0|t),s-=a),"number"==typeof r&&r>=0&&(i+=d*(a=0|r),l-=a),new n(this.data,o,s,l,c,u,d,i)},i.step=function(e,t,r){var i=this.shape[0],a=this.shape[1],o=this.shape[2],s=this.stride[0],l=this.stride[1],c=this.stride[2],u=this.offset,d=0,h=Math.ceil;return"number"==typeof e&&((d=0|e)<0?(u+=s*(i-1),i=h(-i/d)):i=h(i/d),s*=d),"number"==typeof t&&((d=0|t)<0?(u+=l*(a-1),a=h(-a/d)):a=h(a/d),l*=d),"number"==typeof r&&((d=0|r)<0?(u+=c*(o-1),o=h(-o/d)):o=h(o/d),c*=d),new n(this.data,i,a,o,s,l,c,u)},i.transpose=function(e,t,r){e=void 0===e?0:0|e,t=void 0===t?1:0|t,r=void 0===r?2:0|r;var i=this.shape,a=this.stride;return new n(this.data,i[e],i[t],i[r],a[e],a[t],a[r],this.offset)},i.pick=function(e,r,n){var i=[],a=[],o=this.offset;return"number"==typeof e&&e>=0?o=o+this.stride[0]*e|0:(i.push(this.shape[0]),a.push(this.stride[0])),"number"==typeof r&&r>=0?o=o+this.stride[1]*r|0:(i.push(this.shape[1]),a.push(this.stride[1])),"number"==typeof n&&n>=0?o=o+this.stride[2]*n|0:(i.push(this.shape[2]),a.push(this.stride[2])),(0,t[i.length+1])(this.data,i,a,o)},function(e,t,r,i){return new n(e,t[0],t[1],t[2],r[0],r[1],r[2],i)}},4:function(e,t,r){function n(e,t,r,n,i,a,o,s,l,c){this.data=e,this.shape=[t,r,n,i],this.stride=[a,o,s,l],this.offset=0|c}var i=n.prototype;return i.dtype=e,i.dimension=4,Object.defineProperty(i,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(i,"order",{get:r}),i.set=function(t,r,n,i,a){return"generic"===e?this.data.set(this.offset+this.stride[0]*t+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i,a):this.data[this.offset+this.stride[0]*t+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i]=a},i.get=function(t,r,n,i){return"generic"===e?this.data.get(this.offset+this.stride[0]*t+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i):this.data[this.offset+this.stride[0]*t+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i]},i.index=function(e,t,r,n){return this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*r+this.stride[3]*n},i.hi=function(e,t,r,i){return new n(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,"number"!=typeof t||t<0?this.shape[1]:0|t,"number"!=typeof r||r<0?this.shape[2]:0|r,"number"!=typeof i||i<0?this.shape[3]:0|i,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},i.lo=function(e,t,r,i){var a=this.offset,o=0,s=this.shape[0],l=this.shape[1],c=this.shape[2],u=this.shape[3],d=this.stride[0],h=this.stride[1],g=this.stride[2],p=this.stride[3];return"number"==typeof e&&e>=0&&(a+=d*(o=0|e),s-=o),"number"==typeof t&&t>=0&&(a+=h*(o=0|t),l-=o),"number"==typeof r&&r>=0&&(a+=g*(o=0|r),c-=o),"number"==typeof i&&i>=0&&(a+=p*(o=0|i),u-=o),new n(this.data,s,l,c,u,d,h,g,p,a)},i.step=function(e,t,r,i){var a=this.shape[0],o=this.shape[1],s=this.shape[2],l=this.shape[3],c=this.stride[0],u=this.stride[1],d=this.stride[2],h=this.stride[3],g=this.offset,p=0,f=Math.ceil;return"number"==typeof e&&((p=0|e)<0?(g+=c*(a-1),a=f(-a/p)):a=f(a/p),c*=p),"number"==typeof t&&((p=0|t)<0?(g+=u*(o-1),o=f(-o/p)):o=f(o/p),u*=p),"number"==typeof r&&((p=0|r)<0?(g+=d*(s-1),s=f(-s/p)):s=f(s/p),d*=p),"number"==typeof i&&((p=0|i)<0?(g+=h*(l-1),l=f(-l/p)):l=f(l/p),h*=p),new n(this.data,a,o,s,l,c,u,d,h,g)},i.transpose=function(e,t,r,i){e=void 0===e?0:0|e,t=void 0===t?1:0|t,r=void 0===r?2:0|r,i=void 0===i?3:0|i;var a=this.shape,o=this.stride;return new n(this.data,a[e],a[t],a[r],a[i],o[e],o[t],o[r],o[i],this.offset)},i.pick=function(e,r,n,i){var a=[],o=[],s=this.offset;return"number"==typeof e&&e>=0?s=s+this.stride[0]*e|0:(a.push(this.shape[0]),o.push(this.stride[0])),"number"==typeof r&&r>=0?s=s+this.stride[1]*r|0:(a.push(this.shape[1]),o.push(this.stride[1])),"number"==typeof n&&n>=0?s=s+this.stride[2]*n|0:(a.push(this.shape[2]),o.push(this.stride[2])),"number"==typeof i&&i>=0?s=s+this.stride[3]*i|0:(a.push(this.shape[3]),o.push(this.stride[3])),(0,t[a.length+1])(this.data,a,o,s)},function(e,t,r,i){return new n(e,t[0],t[1],t[2],t[3],r[0],r[1],r[2],r[3],i)}},5:function(e,t,r){function n(e,t,r,n,i,a,o,s,l,c,u,d){this.data=e,this.shape=[t,r,n,i,a],this.stride=[o,s,l,c,u],this.offset=0|d}var i=n.prototype;return i.dtype=e,i.dimension=5,Object.defineProperty(i,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(i,"order",{get:r}),i.set=function(t,r,n,i,a,o){return"generic"===e?this.data.set(this.offset+this.stride[0]*t+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i+this.stride[4]*a,o):this.data[this.offset+this.stride[0]*t+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i+this.stride[4]*a]=o},i.get=function(t,r,n,i,a){return"generic"===e?this.data.get(this.offset+this.stride[0]*t+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i+this.stride[4]*a):this.data[this.offset+this.stride[0]*t+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i+this.stride[4]*a]},i.index=function(e,t,r,n,i){return this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*r+this.stride[3]*n+this.stride[4]*i},i.hi=function(e,t,r,i,a){return new n(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,"number"!=typeof t||t<0?this.shape[1]:0|t,"number"!=typeof r||r<0?this.shape[2]:0|r,"number"!=typeof i||i<0?this.shape[3]:0|i,"number"!=typeof a||a<0?this.shape[4]:0|a,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},i.lo=function(e,t,r,i,a){var o=this.offset,s=0,l=this.shape[0],c=this.shape[1],u=this.shape[2],d=this.shape[3],h=this.shape[4],g=this.stride[0],p=this.stride[1],f=this.stride[2],m=this.stride[3],y=this.stride[4];return"number"==typeof e&&e>=0&&(o+=g*(s=0|e),l-=s),"number"==typeof t&&t>=0&&(o+=p*(s=0|t),c-=s),"number"==typeof r&&r>=0&&(o+=f*(s=0|r),u-=s),"number"==typeof i&&i>=0&&(o+=m*(s=0|i),d-=s),"number"==typeof a&&a>=0&&(o+=y*(s=0|a),h-=s),new n(this.data,l,c,u,d,h,g,p,f,m,y,o)},i.step=function(e,t,r,i,a){var o=this.shape[0],s=this.shape[1],l=this.shape[2],c=this.shape[3],u=this.shape[4],d=this.stride[0],h=this.stride[1],g=this.stride[2],p=this.stride[3],f=this.stride[4],m=this.offset,y=0,b=Math.ceil;return"number"==typeof e&&((y=0|e)<0?(m+=d*(o-1),o=b(-o/y)):o=b(o/y),d*=y),"number"==typeof t&&((y=0|t)<0?(m+=h*(s-1),s=b(-s/y)):s=b(s/y),h*=y),"number"==typeof r&&((y=0|r)<0?(m+=g*(l-1),l=b(-l/y)):l=b(l/y),g*=y),"number"==typeof i&&((y=0|i)<0?(m+=p*(c-1),c=b(-c/y)):c=b(c/y),p*=y),"number"==typeof a&&((y=0|a)<0?(m+=f*(u-1),u=b(-u/y)):u=b(u/y),f*=y),new n(this.data,o,s,l,c,u,d,h,g,p,f,m)},i.transpose=function(e,t,r,i,a){e=void 0===e?0:0|e,t=void 0===t?1:0|t,r=void 0===r?2:0|r,i=void 0===i?3:0|i,a=void 0===a?4:0|a;var o=this.shape,s=this.stride;return new n(this.data,o[e],o[t],o[r],o[i],o[a],s[e],s[t],s[r],s[i],s[a],this.offset)},i.pick=function(e,r,n,i,a){var o=[],s=[],l=this.offset;return"number"==typeof e&&e>=0?l=l+this.stride[0]*e|0:(o.push(this.shape[0]),s.push(this.stride[0])),"number"==typeof r&&r>=0?l=l+this.stride[1]*r|0:(o.push(this.shape[1]),s.push(this.stride[1])),"number"==typeof n&&n>=0?l=l+this.stride[2]*n|0:(o.push(this.shape[2]),s.push(this.stride[2])),"number"==typeof i&&i>=0?l=l+this.stride[3]*i|0:(o.push(this.shape[3]),s.push(this.stride[3])),"number"==typeof a&&a>=0?l=l+this.stride[4]*a|0:(o.push(this.shape[4]),s.push(this.stride[4])),(0,t[o.length+1])(this.data,o,s,l)},function(e,t,r,i){return new n(e,t[0],t[1],t[2],t[3],t[4],r[0],r[1],r[2],r[3],r[4],i)}}};function l(e,t){var r=-1===t?"T":String(t),n=s[r];return-1===t?n(e):0===t?n(e,c[e][0]):n(e,c[e],o)}var c={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};e.exports=function(e,t,r,a){if(void 0===e)return(0,c.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var o=t.length;if(void 0===r){r=new Array(o);for(var s=o-1,u=1;s>=0;--s)r[s]=u,u*=t[s]}if(void 0===a)for(a=0,s=0;s<o;++s)r[s]<0&&(a-=(t[s]-1)*r[s]);for(var d=function(e){if(n(e))return"buffer";if(i)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}(e),h=c[d];h.length<=o+1;)h.push(l(d,h.length-1));return(0,h[o+1])(e,t,r,a)}},8551:function(e,t,r){var n=r(8362),i=Math.pow(2,-1074),a=-1>>>0;e.exports=function(e,t){if(isNaN(e)||isNaN(t))return NaN;if(e===t)return e;if(0===e)return t<0?-i:i;var r=n.hi(e),o=n.lo(e);return t>e==e>0?o===a?(r+=1,o=0):o+=1:0===o?(o=a,r-=1):o-=1,n.pack(o,r)}},115:function(e,t){t.vertexNormals=function(e,t,r){for(var n=t.length,i=new Array(n),a=void 0===r?1e-6:r,o=0;o<n;++o)i[o]=[0,0,0];for(o=0;o<e.length;++o)for(var s=e[o],l=0,c=s[s.length-1],u=s[0],d=0;d<s.length;++d){l=c,c=u,u=s[(d+1)%s.length];for(var h=t[l],g=t[c],p=t[u],f=new Array(3),m=0,y=new Array(3),b=0,v=0;v<3;++v)f[v]=h[v]-g[v],m+=f[v]*f[v],y[v]=p[v]-g[v],b+=y[v]*y[v];if(m*b>a){var x=i[c],B=1/Math.sqrt(m*b);for(v=0;v<3;++v){var I=(v+1)%3,F=(v+2)%3;x[v]+=B*(y[I]*f[F]-y[F]*f[I])}}}for(o=0;o<n;++o){x=i[o];var A=0;for(v=0;v<3;++v)A+=x[v]*x[v];if(A>a)for(B=1/Math.sqrt(A),v=0;v<3;++v)x[v]*=B;else for(v=0;v<3;++v)x[v]=0}return i},t.faceNormals=function(e,t,r){for(var n=e.length,i=new Array(n),a=void 0===r?1e-6:r,o=0;o<n;++o){for(var s=e[o],l=new Array(3),c=0;c<3;++c)l[c]=t[s[c]];var u=new Array(3),d=new Array(3);for(c=0;c<3;++c)u[c]=l[1][c]-l[0][c],d[c]=l[2][c]-l[0][c];var h=new Array(3),g=0;for(c=0;c<3;++c){var p=(c+1)%3,f=(c+2)%3;h[c]=u[p]*d[f]-u[f]*d[p],g+=h[c]*h[c]}for(g=g>a?1/Math.sqrt(g):0,c=0;c<3;++c)h[c]*=g;i[o]=h}return i}},567:function(e){e.exports=function(e,t,r,n,i,a,o,s,l,c){var u=t+a+c;if(d>0){var d=Math.sqrt(u+1);e[0]=.5*(o-l)/d,e[1]=.5*(s-n)/d,e[2]=.5*(r-a)/d,e[3]=.5*d}else{var h=Math.max(t,a,c);d=Math.sqrt(2*h-u+1),t>=h?(e[0]=.5*d,e[1]=.5*(i+r)/d,e[2]=.5*(s+n)/d,e[3]=.5*(o-l)/d):a>=h?(e[0]=.5*(r+i)/d,e[1]=.5*d,e[2]=.5*(l+o)/d,e[3]=.5*(s-n)/d):(e[0]=.5*(n+s)/d,e[1]=.5*(o+l)/d,e[2]=.5*d,e[3]=.5*(r-i)/d)}return e}},7774:function(e,t,r){e.exports=function(e){var t=(e=e||{}).center||[0,0,0],r=e.rotation||[0,0,0,1],n=e.radius||1;t=[].slice.call(t,0,3),u(r=[].slice.call(r,0,4),r);var i=new d(r,t,Math.log(n));return i.setDistanceLimits(e.zoomMin,e.zoomMax),("eye"in e||"up"in e)&&i.lookAt(0,e.eye,e.center,e.up),i};var n=r(8444),i=r(3012),a=r(5950),o=r(7437),s=r(567);function l(e,t,r){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(r,2))}function c(e,t,r,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(r,2)+Math.pow(n,2))}function u(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=c(r,n,i,a);o>1e-6?(e[0]=r/o,e[1]=n/o,e[2]=i/o,e[3]=a/o):(e[0]=e[1]=e[2]=0,e[3]=1)}function d(e,t,r){this.radius=n([r]),this.center=n(t),this.rotation=n(e),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var h=d.prototype;h.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},h.recalcMatrix=function(e){this.radius.curve(e),this.center.curve(e),this.rotation.curve(e);var t=this.computedRotation;u(t,t);var r=this.computedMatrix;a(r,t);var n=this.computedCenter,i=this.computedEye,o=this.computedUp,s=Math.exp(this.computedRadius[0]);i[0]=n[0]+s*r[2],i[1]=n[1]+s*r[6],i[2]=n[2]+s*r[10],o[0]=r[1],o[1]=r[5],o[2]=r[9];for(var l=0;l<3;++l){for(var c=0,d=0;d<3;++d)c+=r[l+4*d]*i[d];r[12+l]=-c}},h.getMatrix=function(e,t){this.recalcMatrix(e);var r=this.computedMatrix;if(t){for(var n=0;n<16;++n)t[n]=r[n];return t}return r},h.idle=function(e){this.center.idle(e),this.radius.idle(e),this.rotation.idle(e)},h.flush=function(e){this.center.flush(e),this.radius.flush(e),this.rotation.flush(e)},h.pan=function(e,t,r,n){t=t||0,r=r||0,n=n||0,this.recalcMatrix(e);var i=this.computedMatrix,a=i[1],o=i[5],s=i[9],c=l(a,o,s);a/=c,o/=c,s/=c;var u=i[0],d=i[4],h=i[8],g=u*a+d*o+h*s,p=l(u-=a*g,d-=o*g,h-=s*g);u/=p,d/=p,h/=p,i[2],i[6],i[10];var f=u*t+a*r,m=d*t+o*r,y=h*t+s*r;this.center.move(e,f,m,y);var b=Math.exp(this.computedRadius[0]);b=Math.max(1e-4,b+n),this.radius.set(e,Math.log(b))},h.rotate=function(e,t,r,n){this.recalcMatrix(e),t=t||0,r=r||0;var i=this.computedMatrix,a=i[0],o=i[4],s=i[8],u=i[1],d=i[5],h=i[9],g=i[2],p=i[6],f=i[10],m=t*a+r*u,y=t*o+r*d,b=t*s+r*h,v=-(p*b-f*y),x=-(f*m-g*b),B=-(g*y-p*m),I=Math.sqrt(Math.max(0,1-Math.pow(v,2)-Math.pow(x,2)-Math.pow(B,2))),F=c(v,x,B,I);F>1e-6?(v/=F,x/=F,B/=F,I/=F):(v=x=B=0,I=1);var A=this.computedRotation,C=A[0],w=A[1],Q=A[2],U=A[3],S=C*I+U*v+w*B-Q*x,E=w*I+U*x+Q*v-C*B,L=Q*I+U*B+C*x-w*v,_=U*I-C*v-w*x-Q*B;if(n){v=g,x=p,B=f;var T=Math.sin(n)/l(v,x,B);v*=T,x*=T,B*=T,_=_*(I=Math.cos(t))-(S=S*I+_*v+E*B-L*x)*v-(E=E*I+_*x+L*v-S*B)*x-(L=L*I+_*B+S*x-E*v)*B}var R=c(S,E,L,_);R>1e-6?(S/=R,E/=R,L/=R,_/=R):(S=E=L=0,_=1),this.rotation.set(e,S,E,L,_)},h.lookAt=function(e,t,r,n){this.recalcMatrix(e),r=r||this.computedCenter,t=t||this.computedEye,n=n||this.computedUp;var a=this.computedMatrix;i(a,t,r,n);var o=this.computedRotation;s(o,a[0],a[1],a[2],a[4],a[5],a[6],a[8],a[9],a[10]),u(o,o),this.rotation.set(e,o[0],o[1],o[2],o[3]);for(var l=0,c=0;c<3;++c)l+=Math.pow(r[c]-t[c],2);this.radius.set(e,.5*Math.log(Math.max(l,1e-6))),this.center.set(e,r[0],r[1],r[2])},h.translate=function(e,t,r,n){this.center.move(e,t||0,r||0,n||0)},h.setMatrix=function(e,t){var r=this.computedRotation;s(r,t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]),u(r,r),this.rotation.set(e,r[0],r[1],r[2],r[3]);var n=this.computedMatrix;o(n,t);var i=n[15];if(Math.abs(i)>1e-6){var a=n[12]/i,l=n[13]/i,c=n[14]/i;this.recalcMatrix(e);var d=Math.exp(this.computedRadius[0]);this.center.set(e,a-n[2]*d,l-n[6]*d,c-n[10]*d),this.radius.idle(e)}else this.center.idle(e),this.radius.idle(e)},h.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},h.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-1/0,t=t>0?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},h.getDistanceLimits=function(e){var t=this.radius.bounds;return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},h.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},h.fromJSON=function(e){var t=this.lastT(),r=e.center;r&&this.center.set(t,r[0],r[1],r[2]);var n=e.rotation;n&&this.rotation.set(t,n[0],n[1],n[2],n[3]);var i=e.distance;i&&i>0&&this.radius.set(t,Math.log(i)),this.setDistanceLimits(e.zoomMin,e.zoomMax)}},4930:function(e,t,r){
/*!
	 * pad-left <https://github.com/jonschlinkert/pad-left>
	 *
	 * Copyright (c) 2014-2015, Jon Schlinkert.
	 * Licensed under the MIT license.
	 */
var n=r(6184);e.exports=function(e,t,r){return n(r=void 0!==r?r+"":" ",t)+e}},4405:function(e){e.exports=function(e,t){t||(t=[0,""]),e=String(e);var r=parseFloat(e,10);return t[0]=r,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},4166:function(e,t,r){e.exports=function(e,t){for(var r=0|t.length,i=e.length,a=[new Array(r),new Array(r)],o=0;o<r;++o)a[0][o]=[],a[1][o]=[];for(o=0;o<i;++o){var s=e[o];a[0][s[0]].push(s),a[1][s[1]].push(s)}var l=[];for(o=0;o<r;++o)a[0][o].length+a[1][o].length===0&&l.push([o]);function c(e,t){var r=a[t][e[t]];r.splice(r.indexOf(e),1)}function u(e,r,i){for(var o,s,l,u=0;u<2;++u)if(a[u][r].length>0){o=a[u][r][0],l=u;break}s=o[1^l];for(var d=0;d<2;++d)for(var h=a[d][r],g=0;g<h.length;++g){var p=h[g],f=p[1^d];n(t[e],t[r],t[s],t[f])>0&&(o=p,s=f,l=d)}return i||o&&c(o,l),s}function d(e,r){var i=a[r][e][0],o=[e];c(i,r);for(var s=i[1^r];;){for(;s!==e;)o.push(s),s=u(o[o.length-2],s,!1);if(a[0][e].length+a[1][e].length===0)break;var l=o[o.length-1],d=e,h=o[1],g=u(l,d,!0);if(n(t[l],t[d],t[h],t[g])<0)break;o.push(e),s=u(l,d)}return o}function h(e,t){return t[1]===t[t.length-1]}for(o=0;o<r;++o)for(var g=0;g<2;++g){for(var p=[];a[g][o].length>0;){a[0][o].length;var f=d(o,g);h(0,f)?p.push.apply(p,f):(p.length>0&&l.push(p),p=f)}p.length>0&&l.push(p)}return l};var n=r(9398)},3959:function(e,t,r){e.exports=function(e,t){for(var r=n(e,t.length),i=new Array(t.length),a=new Array(t.length),o=[],s=0;s<t.length;++s){var l=r[s].length;a[s]=l,i[s]=!0,l<=1&&o.push(s)}for(;o.length>0;){var c=o.pop();i[c]=!1;var u=r[c];for(s=0;s<u.length;++s){var d=u[s];0==--a[d]&&o.push(d)}}var h=new Array(t.length),g=[];for(s=0;s<t.length;++s)i[s]?(c=g.length,h[s]=c,g.push(t[s])):h[s]=-1;var p=[];for(s=0;s<e.length;++s){var f=e[s];i[f[0]]&&i[f[1]]&&p.push([h[f[0]],h[f[1]]])}return[p,g]};var n=r(8348)},8040:function(e,t,r){e.exports=function(e,t){var r=c(e,t);e=r[0];var d=(t=r[1]).length;e.length;for(var h=n(e,t.length),g=0;g<d;++g)if(h[g].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var p=i(e,t),f=(p=p.filter((function(e){for(var r=e.length,n=[0],i=0;i<r;++i){var a=t[e[i]],l=t[e[(i+1)%r]],c=o(-a[0],a[1]),u=o(-a[0],l[1]),d=o(l[0],a[1]),h=o(l[0],l[1]);n=s(n,s(s(c,u),s(d,h)))}return n[n.length-1]>0}))).length,m=new Array(f),y=new Array(f);for(g=0;g<f;++g){m[g]=g;var b=new Array(f),v=p[g].map((function(e){return t[e]})),x=a([v]),B=0;e:for(var I=0;I<f;++I)if(b[I]=0,g!==I){for(var F=(X=p[I]).length,A=0;A<F;++A){var C=x(t[X[A]]);if(0!==C){C<0&&(b[I]=1,B+=1);continue e}}b[I]=1,B+=1}y[g]=[B,g,b]}for(y.sort((function(e,t){return t[0]-e[0]})),g=0;g<f;++g){var w=(b=y[g])[1],Q=b[2];for(I=0;I<f;++I)Q[I]&&(m[I]=w)}var U=function(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=[];return t}(f);for(g=0;g<f;++g)U[g].push(m[g]),U[m[g]].push(g);var S={},E=u(d,!1);for(g=0;g<f;++g)for(F=(X=p[g]).length,I=0;I<F;++I){var L=X[I],_=X[(I+1)%F],T=Math.min(L,_)+":"+Math.max(L,_);if(T in S){var R=S[T];U[R].push(g),U[g].push(R),E[L]=E[_]=!0}else S[T]=g}function $(e){for(var t=e.length,r=0;r<t;++r)if(!E[e[r]])return!1;return!0}var k=[],N=u(f,-1);for(g=0;g<f;++g)m[g]!==g||$(p[g])?N[g]=-1:(k.push(g),N[g]=0);for(r=[];k.length>0;){var G=k.pop(),M=U[G];l(M,(function(e,t){return e-t}));var D,V=M.length,H=N[G];if(0===H){var X=p[G];D=[X]}for(g=0;g<V;++g){var O=M[g];N[O]>=0||(N[O]=1^H,k.push(O),0===H&&($(X=p[O])||(X.reverse(),D.push(X))))}0===H&&r.push(D)}return r};var n=r(8348),i=r(4166),a=r(211),o=r(9660),s=r(9662),l=r(1215),c=r(3959);function u(e,t){for(var r=new Array(e),n=0;n<e;++n)r[n]=t;return r}},211:function(e,t,r){e.exports=function(e){for(var t=e.length,r=[],a=[],s=0;s<t;++s)for(var u=e[s],d=u.length,h=d-1,g=0;g<d;h=g++){var p=u[h],f=u[g];p[0]===f[0]?a.push([p,f]):r.push([p,f])}if(0===r.length)return 0===a.length?c:(m=l(a),function(e){return m(e[0],e[1])?0:1});var m,y=i(r),b=function(e,t){return function(r){var i=o.le(t,r[0]);if(i<0)return 1;var a=e[i];if(!a){if(!(i>0&&t[i]===r[0]))return 1;a=e[i-1]}for(var s=1;a;){var l=a.key,c=n(r,l[0],l[1]);if(l[0][0]<l[1][0])if(c<0)a=a.left;else{if(!(c>0))return 0;s=-1,a=a.right}else if(c>0)a=a.left;else{if(!(c<0))return 0;s=1,a=a.right}}return s}}(y.slabs,y.coordinates);return 0===a.length?b:function(e,t){return function(r){return e(r[0],r[1])?0:t(r)}}(l(a),b)};var n=r(417)[3],i=r(4385),a=r(9014),o=r(5070);function s(){return!0}function l(e){for(var t={},r=0;r<e.length;++r){var n=e[r],i=n[0][0],o=n[0][1],l=n[1][1],c=[Math.min(o,l),Math.max(o,l)];i in t?t[i].push(c):t[i]=[c]}var u={},d=Object.keys(t);for(r=0;r<d.length;++r){var h=t[d[r]];u[d[r]]=a(h)}return function(e){return function(t,r){var n=e[t];return!!n&&!!n.queryPoint(r,s)}}(u)}function c(e){return 1}},7309:function(e){var t=new Float64Array(4),r=new Float64Array(4),n=new Float64Array(4);e.exports=function(e,i,a,o,s){t.length<o.length&&(t=new Float64Array(o.length),r=new Float64Array(o.length),n=new Float64Array(o.length));for(var l=0;l<o.length;++l)t[l]=e[l]-o[l],r[l]=i[l]-e[l],n[l]=a[l]-e[l];var c=0,u=0,d=0,h=0,g=0,p=0;for(l=0;l<o.length;++l){var f=r[l],m=n[l],y=t[l];c+=f*f,u+=f*m,d+=m*m,h+=y*f,g+=y*m,p+=y*y}var b,v,x,B,I,F=Math.abs(c*d-u*u),A=u*g-d*h,C=u*h-c*g;if(A+C<=F)if(A<0)C<0&&h<0?(C=0,-h>=c?(A=1,b=c+2*h+p):b=h*(A=-h/c)+p):(A=0,g>=0?(C=0,b=p):-g>=d?(C=1,b=d+2*g+p):b=g*(C=-g/d)+p);else if(C<0)C=0,h>=0?(A=0,b=p):-h>=c?(A=1,b=c+2*h+p):b=h*(A=-h/c)+p;else{var w=1/F;b=(A*=w)*(c*A+u*(C*=w)+2*h)+C*(u*A+d*C+2*g)+p}else A<0?(x=d+g)>(v=u+h)?(B=x-v)>=(I=c-2*u+d)?(A=1,C=0,b=c+2*h+p):b=(A=B/I)*(c*A+u*(C=1-A)+2*h)+C*(u*A+d*C+2*g)+p:(A=0,x<=0?(C=1,b=d+2*g+p):g>=0?(C=0,b=p):b=g*(C=-g/d)+p):C<0?(x=c+h)>(v=u+g)?(B=x-v)>=(I=c-2*u+d)?(C=1,A=0,b=d+2*g+p):b=(A=1-(C=B/I))*(c*A+u*C+2*h)+C*(u*A+d*C+2*g)+p:(C=0,x<=0?(A=1,b=c+2*h+p):h>=0?(A=0,b=p):b=h*(A=-h/c)+p):(B=d+g-u-h)<=0?(A=0,C=1,b=d+2*g+p):B>=(I=c-2*u+d)?(A=1,C=0,b=c+2*h+p):b=(A=B/I)*(c*A+u*(C=1-A)+2*h)+C*(u*A+d*C+2*g)+p;var Q=1-A-C;for(l=0;l<o.length;++l)s[l]=Q*e[l]+A*i[l]+C*a[l];return b<0?0:b}},1116:function(e,t,r){e.exports=r(6093)},7584:function(e,t,r){var n=r(1539);e.exports=function(e,t){for(var r=e.length,i=new Array(r),a=0;a<r;++a)i[a]=n(e[a],t[a]);return i}},2826:function(e,t,r){e.exports=function(e){for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=n(e[r]);return t};var n=r(5125)},4469:function(e,t,r){var n=r(5125),i=r(3962);e.exports=function(e,t){for(var r=n(t),a=e.length,o=new Array(a),s=0;s<a;++s)o[s]=i(e[s],r);return o}},6695:function(e,t,r){var n=r(4354);e.exports=function(e,t){for(var r=e.length,i=new Array(r),a=0;a<r;++a)i[a]=n(e[a],t[a]);return i}},7037:function(e,t,r){var n=r(9209),i=r(1284),a=r(9887);e.exports=function(e){e.sort(i);for(var t=e.length,r=0,o=0;o<t;++o){var s=e[o],l=a(s);if(0!==l){if(r>0){var c=e[r-1];if(0===n(s,c)&&a(c)!==l){r-=1;continue}}e[r++]=s}}return e.length=r,e}},6184:function(e){
/*!
	 * repeat-string <https://github.com/jonschlinkert/repeat-string>
	 *
	 * Copyright (c) 2014-2015, Jon Schlinkert.
	 * Licensed under the MIT License.
	 */
var t,r="";e.exports=function(e,n){if("string"!=typeof e)throw new TypeError("expected a string");if(1===n)return e;if(2===n)return e+e;var i=e.length*n;if(t!==e||void 0===t)t=e,r="";else if(r.length>=i)return r.substr(0,i);for(;i>r.length&&n>1;)1&n&&(r+=e),n>>=1,e+=e;return r=(r+=e).substr(0,i)}},8161:function(e,t,r){e.exports=r.g.performance&&r.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(e){e.exports=function(e){for(var t=e.length,r=e[e.length-1],n=t,i=t-2;i>=0;--i){var a=r,o=e[i];(l=o-((r=a+o)-a))&&(e[--n]=r,r=l)}var s=0;for(i=n;i<t;++i){var l;a=e[i],(l=(o=r)-((r=a+o)-a))&&(e[s++]=l)}return e[s++]=r,e.length=s,e}},8167:function(e,t,r){var n=r(9660),i=r(9662),a=r(8289),o=r(402);function s(e,t,r,n){return function(t){return n(e(r(t[0][0],t[1][1]),r(-t[0][1],t[1][0])))}}function l(e,t,r,n){return function(i){return n(e(t(e(r(i[1][1],i[2][2]),r(-i[1][2],i[2][1])),i[0][0]),e(t(e(r(i[1][0],i[2][2]),r(-i[1][2],i[2][0])),-i[0][1]),t(e(r(i[1][0],i[2][1]),r(-i[1][1],i[2][0])),i[0][2]))))}}function c(e,t,r,n){return function(i){return n(e(e(t(e(t(e(r(i[2][2],i[3][3]),r(-i[2][3],i[3][2])),i[1][1]),e(t(e(r(i[2][1],i[3][3]),r(-i[2][3],i[3][1])),-i[1][2]),t(e(r(i[2][1],i[3][2]),r(-i[2][2],i[3][1])),i[1][3]))),i[0][0]),t(e(t(e(r(i[2][2],i[3][3]),r(-i[2][3],i[3][2])),i[1][0]),e(t(e(r(i[2][0],i[3][3]),r(-i[2][3],i[3][0])),-i[1][2]),t(e(r(i[2][0],i[3][2]),r(-i[2][2],i[3][0])),i[1][3]))),-i[0][1])),e(t(e(t(e(r(i[2][1],i[3][3]),r(-i[2][3],i[3][1])),i[1][0]),e(t(e(r(i[2][0],i[3][3]),r(-i[2][3],i[3][0])),-i[1][1]),t(e(r(i[2][0],i[3][1]),r(-i[2][1],i[3][0])),i[1][3]))),i[0][2]),t(e(t(e(r(i[2][1],i[3][2]),r(-i[2][2],i[3][1])),i[1][0]),e(t(e(r(i[2][0],i[3][2]),r(-i[2][2],i[3][0])),-i[1][1]),t(e(r(i[2][0],i[3][1]),r(-i[2][1],i[3][0])),i[1][2]))),-i[0][3]))))}}function u(e,t,r,n){return function(i){return n(e(e(t(e(e(t(e(t(e(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][2]),e(t(e(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),-i[2][3]),t(e(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][4]))),i[1][1]),t(e(t(e(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][1]),e(t(e(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),-i[2][3]),t(e(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),i[2][4]))),-i[1][2])),e(t(e(t(e(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),i[2][1]),e(t(e(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),-i[2][2]),t(e(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][4]))),i[1][3]),t(e(t(e(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][1]),e(t(e(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),-i[2][2]),t(e(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][3]))),-i[1][4]))),i[0][0]),t(e(e(t(e(t(e(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][2]),e(t(e(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),-i[2][3]),t(e(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][4]))),i[1][0]),t(e(t(e(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][0]),e(t(e(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][3]),t(e(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),i[2][4]))),-i[1][2])),e(t(e(t(e(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),i[2][0]),e(t(e(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][2]),t(e(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),i[2][4]))),i[1][3]),t(e(t(e(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][0]),e(t(e(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),-i[2][2]),t(e(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),i[2][3]))),-i[1][4]))),-i[0][1])),e(t(e(e(t(e(t(e(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][1]),e(t(e(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),-i[2][3]),t(e(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),i[2][4]))),i[1][0]),t(e(t(e(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][0]),e(t(e(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][3]),t(e(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),i[2][4]))),-i[1][1])),e(t(e(t(e(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),i[2][0]),e(t(e(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][1]),t(e(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][4]))),i[1][3]),t(e(t(e(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),i[2][0]),e(t(e(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),-i[2][1]),t(e(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][3]))),-i[1][4]))),i[0][2]),e(t(e(e(t(e(t(e(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),i[2][1]),e(t(e(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),-i[2][2]),t(e(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][4]))),i[1][0]),t(e(t(e(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),i[2][0]),e(t(e(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][2]),t(e(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),i[2][4]))),-i[1][1])),e(t(e(t(e(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),i[2][0]),e(t(e(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][1]),t(e(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][4]))),i[1][2]),t(e(t(e(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][0]),e(t(e(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),-i[2][1]),t(e(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][2]))),-i[1][4]))),-i[0][3]),t(e(e(t(e(t(e(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][1]),e(t(e(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),-i[2][2]),t(e(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][3]))),i[1][0]),t(e(t(e(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][0]),e(t(e(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),-i[2][2]),t(e(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),i[2][3]))),-i[1][1])),e(t(e(t(e(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),i[2][0]),e(t(e(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),-i[2][1]),t(e(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][3]))),i[1][2]),t(e(t(e(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][0]),e(t(e(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),-i[2][1]),t(e(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][2]))),-i[1][3]))),i[0][4])))))}}function d(e){return(2===e?s:3===e?l:4===e?c:5===e?u:void 0)(i,a,n,o)}var h=[function(){return[0]},function(e){return[e[0][0]]}];function g(e,t,r,n,i,a,o,s){return function(l){switch(l.length){case 0:return e(l);case 1:return t(l);case 2:return r(l);case 3:return n(l);case 4:return i(l);case 5:return a(l)}var c=o[l.length];return c||(c=o[l.length]=s(l.length)),c(l)}}!function(){for(;h.length<6;)h.push(d(h.length));e.exports=g.apply(void 0,h.concat([h,d]));for(var t=0;t<h.length;++t)e.exports[t]=h[t]}()},9130:function(e,t,r){var n=r(9660),i=r(9662);e.exports=function(e,t){for(var r=n(e[0],t[0]),a=1;a<e.length;++a)r=i(r,n(e[a],t[a]));return r}},2227:function(e,t,r){var n=r(9660),i=r(9662),a=r(4078),o=r(8289);function s(e){return(3===e?l:4===e?c:5===e?u:d)(i,a,n,o)}function l(e,t,r,n){return function(i,a,o){var s=r(i[0],i[0]),l=n(s,a[0]),c=n(s,o[0]),u=r(a[0],a[0]),d=n(u,i[0]),h=n(u,o[0]),g=r(o[0],o[0]),p=n(g,i[0]),f=n(g,a[0]),m=e(t(f,h),t(d,l)),y=t(p,c),b=t(m,y);return b[b.length-1]}}function c(e,t,r,n){return function(i,a,o,s){var l=e(r(i[0],i[0]),r(i[1],i[1])),c=n(l,a[0]),u=n(l,o[0]),d=n(l,s[0]),h=e(r(a[0],a[0]),r(a[1],a[1])),g=n(h,i[0]),p=n(h,o[0]),f=n(h,s[0]),m=e(r(o[0],o[0]),r(o[1],o[1])),y=n(m,i[0]),b=n(m,a[0]),v=n(m,s[0]),x=e(r(s[0],s[0]),r(s[1],s[1])),B=n(x,i[0]),I=n(x,a[0]),F=n(x,o[0]),A=e(e(n(t(F,v),a[1]),e(n(t(I,f),-o[1]),n(t(b,p),s[1]))),e(n(t(I,f),i[1]),e(n(t(B,d),-a[1]),n(t(g,c),s[1])))),C=e(e(n(t(F,v),i[1]),e(n(t(B,d),-o[1]),n(t(y,u),s[1]))),e(n(t(b,p),i[1]),e(n(t(y,u),-a[1]),n(t(g,c),o[1])))),w=t(A,C);return w[w.length-1]}}function u(e,t,r,n){return function(i,a,o,s,l){var c=e(r(i[0],i[0]),e(r(i[1],i[1]),r(i[2],i[2]))),u=n(c,a[0]),d=n(c,o[0]),h=n(c,s[0]),g=n(c,l[0]),p=e(r(a[0],a[0]),e(r(a[1],a[1]),r(a[2],a[2]))),f=n(p,i[0]),m=n(p,o[0]),y=n(p,s[0]),b=n(p,l[0]),v=e(r(o[0],o[0]),e(r(o[1],o[1]),r(o[2],o[2]))),x=n(v,i[0]),B=n(v,a[0]),I=n(v,s[0]),F=n(v,l[0]),A=e(r(s[0],s[0]),e(r(s[1],s[1]),r(s[2],s[2]))),C=n(A,i[0]),w=n(A,a[0]),Q=n(A,o[0]),U=n(A,l[0]),S=e(r(l[0],l[0]),e(r(l[1],l[1]),r(l[2],l[2]))),E=n(S,i[0]),L=n(S,a[0]),_=n(S,o[0]),T=n(S,s[0]),R=e(e(e(n(e(n(t(T,U),o[1]),e(n(t(_,F),-s[1]),n(t(Q,I),l[1]))),a[2]),e(n(e(n(t(T,U),a[1]),e(n(t(L,b),-s[1]),n(t(w,y),l[1]))),-o[2]),n(e(n(t(_,F),a[1]),e(n(t(L,b),-o[1]),n(t(B,m),l[1]))),s[2]))),e(n(e(n(t(Q,I),a[1]),e(n(t(w,y),-o[1]),n(t(B,m),s[1]))),-l[2]),e(n(e(n(t(T,U),a[1]),e(n(t(L,b),-s[1]),n(t(w,y),l[1]))),i[2]),n(e(n(t(T,U),i[1]),e(n(t(E,g),-s[1]),n(t(C,h),l[1]))),-a[2])))),e(e(n(e(n(t(L,b),i[1]),e(n(t(E,g),-a[1]),n(t(f,u),l[1]))),s[2]),e(n(e(n(t(w,y),i[1]),e(n(t(C,h),-a[1]),n(t(f,u),s[1]))),-l[2]),n(e(n(t(Q,I),a[1]),e(n(t(w,y),-o[1]),n(t(B,m),s[1]))),i[2]))),e(n(e(n(t(Q,I),i[1]),e(n(t(C,h),-o[1]),n(t(x,d),s[1]))),-a[2]),e(n(e(n(t(w,y),i[1]),e(n(t(C,h),-a[1]),n(t(f,u),s[1]))),o[2]),n(e(n(t(B,m),i[1]),e(n(t(x,d),-a[1]),n(t(f,u),o[1]))),-s[2]))))),$=e(e(e(n(e(n(t(T,U),o[1]),e(n(t(_,F),-s[1]),n(t(Q,I),l[1]))),i[2]),n(e(n(t(T,U),i[1]),e(n(t(E,g),-s[1]),n(t(C,h),l[1]))),-o[2])),e(n(e(n(t(_,F),i[1]),e(n(t(E,g),-o[1]),n(t(x,d),l[1]))),s[2]),n(e(n(t(Q,I),i[1]),e(n(t(C,h),-o[1]),n(t(x,d),s[1]))),-l[2]))),e(e(n(e(n(t(_,F),a[1]),e(n(t(L,b),-o[1]),n(t(B,m),l[1]))),i[2]),n(e(n(t(_,F),i[1]),e(n(t(E,g),-o[1]),n(t(x,d),l[1]))),-a[2])),e(n(e(n(t(L,b),i[1]),e(n(t(E,g),-a[1]),n(t(f,u),l[1]))),o[2]),n(e(n(t(B,m),i[1]),e(n(t(x,d),-a[1]),n(t(f,u),o[1]))),-l[2])))),k=t(R,$);return k[k.length-1]}}function d(e,t,r,n){return function(i,a,o,s,l,c){var u=e(e(r(i[0],i[0]),r(i[1],i[1])),e(r(i[2],i[2]),r(i[3],i[3]))),d=n(u,a[0]),h=n(u,o[0]),g=n(u,s[0]),p=n(u,l[0]),f=n(u,c[0]),m=e(e(r(a[0],a[0]),r(a[1],a[1])),e(r(a[2],a[2]),r(a[3],a[3]))),y=n(m,i[0]),b=n(m,o[0]),v=n(m,s[0]),x=n(m,l[0]),B=n(m,c[0]),I=e(e(r(o[0],o[0]),r(o[1],o[1])),e(r(o[2],o[2]),r(o[3],o[3]))),F=n(I,i[0]),A=n(I,a[0]),C=n(I,s[0]),w=n(I,l[0]),Q=n(I,c[0]),U=e(e(r(s[0],s[0]),r(s[1],s[1])),e(r(s[2],s[2]),r(s[3],s[3]))),S=n(U,i[0]),E=n(U,a[0]),L=n(U,o[0]),_=n(U,l[0]),T=n(U,c[0]),R=e(e(r(l[0],l[0]),r(l[1],l[1])),e(r(l[2],l[2]),r(l[3],l[3]))),$=n(R,i[0]),k=n(R,a[0]),N=n(R,o[0]),G=n(R,s[0]),M=n(R,c[0]),D=e(e(r(c[0],c[0]),r(c[1],c[1])),e(r(c[2],c[2]),r(c[3],c[3]))),V=n(D,i[0]),H=n(D,a[0]),X=n(D,o[0]),O=n(D,s[0]),Z=n(D,l[0]),W=e(e(e(n(e(e(n(e(n(t(Z,M),s[1]),e(n(t(O,T),-l[1]),n(t(G,_),c[1]))),o[2]),n(e(n(t(Z,M),o[1]),e(n(t(X,Q),-l[1]),n(t(N,w),c[1]))),-s[2])),e(n(e(n(t(O,T),o[1]),e(n(t(X,Q),-s[1]),n(t(L,C),c[1]))),l[2]),n(e(n(t(G,_),o[1]),e(n(t(N,w),-s[1]),n(t(L,C),l[1]))),-c[2]))),a[3]),e(n(e(e(n(e(n(t(Z,M),s[1]),e(n(t(O,T),-l[1]),n(t(G,_),c[1]))),a[2]),n(e(n(t(Z,M),a[1]),e(n(t(H,B),-l[1]),n(t(k,x),c[1]))),-s[2])),e(n(e(n(t(O,T),a[1]),e(n(t(H,B),-s[1]),n(t(E,v),c[1]))),l[2]),n(e(n(t(G,_),a[1]),e(n(t(k,x),-s[1]),n(t(E,v),l[1]))),-c[2]))),-o[3]),n(e(e(n(e(n(t(Z,M),o[1]),e(n(t(X,Q),-l[1]),n(t(N,w),c[1]))),a[2]),n(e(n(t(Z,M),a[1]),e(n(t(H,B),-l[1]),n(t(k,x),c[1]))),-o[2])),e(n(e(n(t(X,Q),a[1]),e(n(t(H,B),-o[1]),n(t(A,b),c[1]))),l[2]),n(e(n(t(N,w),a[1]),e(n(t(k,x),-o[1]),n(t(A,b),l[1]))),-c[2]))),s[3]))),e(e(n(e(e(n(e(n(t(O,T),o[1]),e(n(t(X,Q),-s[1]),n(t(L,C),c[1]))),a[2]),n(e(n(t(O,T),a[1]),e(n(t(H,B),-s[1]),n(t(E,v),c[1]))),-o[2])),e(n(e(n(t(X,Q),a[1]),e(n(t(H,B),-o[1]),n(t(A,b),c[1]))),s[2]),n(e(n(t(L,C),a[1]),e(n(t(E,v),-o[1]),n(t(A,b),s[1]))),-c[2]))),-l[3]),n(e(e(n(e(n(t(G,_),o[1]),e(n(t(N,w),-s[1]),n(t(L,C),l[1]))),a[2]),n(e(n(t(G,_),a[1]),e(n(t(k,x),-s[1]),n(t(E,v),l[1]))),-o[2])),e(n(e(n(t(N,w),a[1]),e(n(t(k,x),-o[1]),n(t(A,b),l[1]))),s[2]),n(e(n(t(L,C),a[1]),e(n(t(E,v),-o[1]),n(t(A,b),s[1]))),-l[2]))),c[3])),e(n(e(e(n(e(n(t(Z,M),s[1]),e(n(t(O,T),-l[1]),n(t(G,_),c[1]))),a[2]),n(e(n(t(Z,M),a[1]),e(n(t(H,B),-l[1]),n(t(k,x),c[1]))),-s[2])),e(n(e(n(t(O,T),a[1]),e(n(t(H,B),-s[1]),n(t(E,v),c[1]))),l[2]),n(e(n(t(G,_),a[1]),e(n(t(k,x),-s[1]),n(t(E,v),l[1]))),-c[2]))),i[3]),n(e(e(n(e(n(t(Z,M),s[1]),e(n(t(O,T),-l[1]),n(t(G,_),c[1]))),i[2]),n(e(n(t(Z,M),i[1]),e(n(t(V,f),-l[1]),n(t($,p),c[1]))),-s[2])),e(n(e(n(t(O,T),i[1]),e(n(t(V,f),-s[1]),n(t(S,g),c[1]))),l[2]),n(e(n(t(G,_),i[1]),e(n(t($,p),-s[1]),n(t(S,g),l[1]))),-c[2]))),-a[3])))),e(e(e(n(e(e(n(e(n(t(Z,M),a[1]),e(n(t(H,B),-l[1]),n(t(k,x),c[1]))),i[2]),n(e(n(t(Z,M),i[1]),e(n(t(V,f),-l[1]),n(t($,p),c[1]))),-a[2])),e(n(e(n(t(H,B),i[1]),e(n(t(V,f),-a[1]),n(t(y,d),c[1]))),l[2]),n(e(n(t(k,x),i[1]),e(n(t($,p),-a[1]),n(t(y,d),l[1]))),-c[2]))),s[3]),n(e(e(n(e(n(t(O,T),a[1]),e(n(t(H,B),-s[1]),n(t(E,v),c[1]))),i[2]),n(e(n(t(O,T),i[1]),e(n(t(V,f),-s[1]),n(t(S,g),c[1]))),-a[2])),e(n(e(n(t(H,B),i[1]),e(n(t(V,f),-a[1]),n(t(y,d),c[1]))),s[2]),n(e(n(t(E,v),i[1]),e(n(t(S,g),-a[1]),n(t(y,d),s[1]))),-c[2]))),-l[3])),e(n(e(e(n(e(n(t(G,_),a[1]),e(n(t(k,x),-s[1]),n(t(E,v),l[1]))),i[2]),n(e(n(t(G,_),i[1]),e(n(t($,p),-s[1]),n(t(S,g),l[1]))),-a[2])),e(n(e(n(t(k,x),i[1]),e(n(t($,p),-a[1]),n(t(y,d),l[1]))),s[2]),n(e(n(t(E,v),i[1]),e(n(t(S,g),-a[1]),n(t(y,d),s[1]))),-l[2]))),c[3]),n(e(e(n(e(n(t(O,T),o[1]),e(n(t(X,Q),-s[1]),n(t(L,C),c[1]))),a[2]),n(e(n(t(O,T),a[1]),e(n(t(H,B),-s[1]),n(t(E,v),c[1]))),-o[2])),e(n(e(n(t(X,Q),a[1]),e(n(t(H,B),-o[1]),n(t(A,b),c[1]))),s[2]),n(e(n(t(L,C),a[1]),e(n(t(E,v),-o[1]),n(t(A,b),s[1]))),-c[2]))),i[3]))),e(e(n(e(e(n(e(n(t(O,T),o[1]),e(n(t(X,Q),-s[1]),n(t(L,C),c[1]))),i[2]),n(e(n(t(O,T),i[1]),e(n(t(V,f),-s[1]),n(t(S,g),c[1]))),-o[2])),e(n(e(n(t(X,Q),i[1]),e(n(t(V,f),-o[1]),n(t(F,h),c[1]))),s[2]),n(e(n(t(L,C),i[1]),e(n(t(S,g),-o[1]),n(t(F,h),s[1]))),-c[2]))),-a[3]),n(e(e(n(e(n(t(O,T),a[1]),e(n(t(H,B),-s[1]),n(t(E,v),c[1]))),i[2]),n(e(n(t(O,T),i[1]),e(n(t(V,f),-s[1]),n(t(S,g),c[1]))),-a[2])),e(n(e(n(t(H,B),i[1]),e(n(t(V,f),-a[1]),n(t(y,d),c[1]))),s[2]),n(e(n(t(E,v),i[1]),e(n(t(S,g),-a[1]),n(t(y,d),s[1]))),-c[2]))),o[3])),e(n(e(e(n(e(n(t(X,Q),a[1]),e(n(t(H,B),-o[1]),n(t(A,b),c[1]))),i[2]),n(e(n(t(X,Q),i[1]),e(n(t(V,f),-o[1]),n(t(F,h),c[1]))),-a[2])),e(n(e(n(t(H,B),i[1]),e(n(t(V,f),-a[1]),n(t(y,d),c[1]))),o[2]),n(e(n(t(A,b),i[1]),e(n(t(F,h),-a[1]),n(t(y,d),o[1]))),-c[2]))),-s[3]),n(e(e(n(e(n(t(L,C),a[1]),e(n(t(E,v),-o[1]),n(t(A,b),s[1]))),i[2]),n(e(n(t(L,C),i[1]),e(n(t(S,g),-o[1]),n(t(F,h),s[1]))),-a[2])),e(n(e(n(t(E,v),i[1]),e(n(t(S,g),-a[1]),n(t(y,d),s[1]))),o[2]),n(e(n(t(A,b),i[1]),e(n(t(F,h),-a[1]),n(t(y,d),o[1]))),-s[2]))),c[3]))))),Y=e(e(e(n(e(e(n(e(n(t(Z,M),s[1]),e(n(t(O,T),-l[1]),n(t(G,_),c[1]))),o[2]),n(e(n(t(Z,M),o[1]),e(n(t(X,Q),-l[1]),n(t(N,w),c[1]))),-s[2])),e(n(e(n(t(O,T),o[1]),e(n(t(X,Q),-s[1]),n(t(L,C),c[1]))),l[2]),n(e(n(t(G,_),o[1]),e(n(t(N,w),-s[1]),n(t(L,C),l[1]))),-c[2]))),i[3]),e(n(e(e(n(e(n(t(Z,M),s[1]),e(n(t(O,T),-l[1]),n(t(G,_),c[1]))),i[2]),n(e(n(t(Z,M),i[1]),e(n(t(V,f),-l[1]),n(t($,p),c[1]))),-s[2])),e(n(e(n(t(O,T),i[1]),e(n(t(V,f),-s[1]),n(t(S,g),c[1]))),l[2]),n(e(n(t(G,_),i[1]),e(n(t($,p),-s[1]),n(t(S,g),l[1]))),-c[2]))),-o[3]),n(e(e(n(e(n(t(Z,M),o[1]),e(n(t(X,Q),-l[1]),n(t(N,w),c[1]))),i[2]),n(e(n(t(Z,M),i[1]),e(n(t(V,f),-l[1]),n(t($,p),c[1]))),-o[2])),e(n(e(n(t(X,Q),i[1]),e(n(t(V,f),-o[1]),n(t(F,h),c[1]))),l[2]),n(e(n(t(N,w),i[1]),e(n(t($,p),-o[1]),n(t(F,h),l[1]))),-c[2]))),s[3]))),e(e(n(e(e(n(e(n(t(O,T),o[1]),e(n(t(X,Q),-s[1]),n(t(L,C),c[1]))),i[2]),n(e(n(t(O,T),i[1]),e(n(t(V,f),-s[1]),n(t(S,g),c[1]))),-o[2])),e(n(e(n(t(X,Q),i[1]),e(n(t(V,f),-o[1]),n(t(F,h),c[1]))),s[2]),n(e(n(t(L,C),i[1]),e(n(t(S,g),-o[1]),n(t(F,h),s[1]))),-c[2]))),-l[3]),n(e(e(n(e(n(t(G,_),o[1]),e(n(t(N,w),-s[1]),n(t(L,C),l[1]))),i[2]),n(e(n(t(G,_),i[1]),e(n(t($,p),-s[1]),n(t(S,g),l[1]))),-o[2])),e(n(e(n(t(N,w),i[1]),e(n(t($,p),-o[1]),n(t(F,h),l[1]))),s[2]),n(e(n(t(L,C),i[1]),e(n(t(S,g),-o[1]),n(t(F,h),s[1]))),-l[2]))),c[3])),e(n(e(e(n(e(n(t(Z,M),o[1]),e(n(t(X,Q),-l[1]),n(t(N,w),c[1]))),a[2]),n(e(n(t(Z,M),a[1]),e(n(t(H,B),-l[1]),n(t(k,x),c[1]))),-o[2])),e(n(e(n(t(X,Q),a[1]),e(n(t(H,B),-o[1]),n(t(A,b),c[1]))),l[2]),n(e(n(t(N,w),a[1]),e(n(t(k,x),-o[1]),n(t(A,b),l[1]))),-c[2]))),i[3]),n(e(e(n(e(n(t(Z,M),o[1]),e(n(t(X,Q),-l[1]),n(t(N,w),c[1]))),i[2]),n(e(n(t(Z,M),i[1]),e(n(t(V,f),-l[1]),n(t($,p),c[1]))),-o[2])),e(n(e(n(t(X,Q),i[1]),e(n(t(V,f),-o[1]),n(t(F,h),c[1]))),l[2]),n(e(n(t(N,w),i[1]),e(n(t($,p),-o[1]),n(t(F,h),l[1]))),-c[2]))),-a[3])))),e(e(e(n(e(e(n(e(n(t(Z,M),a[1]),e(n(t(H,B),-l[1]),n(t(k,x),c[1]))),i[2]),n(e(n(t(Z,M),i[1]),e(n(t(V,f),-l[1]),n(t($,p),c[1]))),-a[2])),e(n(e(n(t(H,B),i[1]),e(n(t(V,f),-a[1]),n(t(y,d),c[1]))),l[2]),n(e(n(t(k,x),i[1]),e(n(t($,p),-a[1]),n(t(y,d),l[1]))),-c[2]))),o[3]),n(e(e(n(e(n(t(X,Q),a[1]),e(n(t(H,B),-o[1]),n(t(A,b),c[1]))),i[2]),n(e(n(t(X,Q),i[1]),e(n(t(V,f),-o[1]),n(t(F,h),c[1]))),-a[2])),e(n(e(n(t(H,B),i[1]),e(n(t(V,f),-a[1]),n(t(y,d),c[1]))),o[2]),n(e(n(t(A,b),i[1]),e(n(t(F,h),-a[1]),n(t(y,d),o[1]))),-c[2]))),-l[3])),e(n(e(e(n(e(n(t(N,w),a[1]),e(n(t(k,x),-o[1]),n(t(A,b),l[1]))),i[2]),n(e(n(t(N,w),i[1]),e(n(t($,p),-o[1]),n(t(F,h),l[1]))),-a[2])),e(n(e(n(t(k,x),i[1]),e(n(t($,p),-a[1]),n(t(y,d),l[1]))),o[2]),n(e(n(t(A,b),i[1]),e(n(t(F,h),-a[1]),n(t(y,d),o[1]))),-l[2]))),c[3]),n(e(e(n(e(n(t(G,_),o[1]),e(n(t(N,w),-s[1]),n(t(L,C),l[1]))),a[2]),n(e(n(t(G,_),a[1]),e(n(t(k,x),-s[1]),n(t(E,v),l[1]))),-o[2])),e(n(e(n(t(N,w),a[1]),e(n(t(k,x),-o[1]),n(t(A,b),l[1]))),s[2]),n(e(n(t(L,C),a[1]),e(n(t(E,v),-o[1]),n(t(A,b),s[1]))),-l[2]))),i[3]))),e(e(n(e(e(n(e(n(t(G,_),o[1]),e(n(t(N,w),-s[1]),n(t(L,C),l[1]))),i[2]),n(e(n(t(G,_),i[1]),e(n(t($,p),-s[1]),n(t(S,g),l[1]))),-o[2])),e(n(e(n(t(N,w),i[1]),e(n(t($,p),-o[1]),n(t(F,h),l[1]))),s[2]),n(e(n(t(L,C),i[1]),e(n(t(S,g),-o[1]),n(t(F,h),s[1]))),-l[2]))),-a[3]),n(e(e(n(e(n(t(G,_),a[1]),e(n(t(k,x),-s[1]),n(t(E,v),l[1]))),i[2]),n(e(n(t(G,_),i[1]),e(n(t($,p),-s[1]),n(t(S,g),l[1]))),-a[2])),e(n(e(n(t(k,x),i[1]),e(n(t($,p),-a[1]),n(t(y,d),l[1]))),s[2]),n(e(n(t(E,v),i[1]),e(n(t(S,g),-a[1]),n(t(y,d),s[1]))),-l[2]))),o[3])),e(n(e(e(n(e(n(t(N,w),a[1]),e(n(t(k,x),-o[1]),n(t(A,b),l[1]))),i[2]),n(e(n(t(N,w),i[1]),e(n(t($,p),-o[1]),n(t(F,h),l[1]))),-a[2])),e(n(e(n(t(k,x),i[1]),e(n(t($,p),-a[1]),n(t(y,d),l[1]))),o[2]),n(e(n(t(A,b),i[1]),e(n(t(F,h),-a[1]),n(t(y,d),o[1]))),-l[2]))),-s[3]),n(e(e(n(e(n(t(L,C),a[1]),e(n(t(E,v),-o[1]),n(t(A,b),s[1]))),i[2]),n(e(n(t(L,C),i[1]),e(n(t(S,g),-o[1]),n(t(F,h),s[1]))),-a[2])),e(n(e(n(t(E,v),i[1]),e(n(t(S,g),-a[1]),n(t(y,d),s[1]))),o[2]),n(e(n(t(A,b),i[1]),e(n(t(F,h),-a[1]),n(t(y,d),o[1]))),-s[2]))),l[3]))))),P=t(W,Y);return P[P.length-1]}}var h=[function(){return 0},function(){return 0},function(){return 0}];function g(e){var t=h[e.length];return t||(t=h[e.length]=s(e.length)),t.apply(void 0,e)}function p(e,t,r,n,i,a,o,s){return function(t,r,l,c,u,d){switch(arguments.length){case 0:case 1:return 0;case 2:return n(t,r);case 3:return i(t,r,l);case 4:return a(t,r,l,c);case 5:return o(t,r,l,c,u);case 6:return s(t,r,l,c,u,d)}for(var h=new Array(arguments.length),g=0;g<arguments.length;++g)h[g]=arguments[g];return e(h)}}!function(){for(;h.length<=6;)h.push(s(h.length));e.exports=p.apply(void 0,[g].concat(h));for(var t=0;t<=6;++t)e.exports[t]=h[t]}()},6606:function(e,t,r){var n=r(8167);function i(e){var t=2===e?a:3===e?o:4===e?s:5===e?l:c;return t(e<6?n[e]:n)}function a(e){return function(t,r){return[e([[+r[0],+t[0][1]],[+r[1],+t[1][1]]]),e([[+t[0][0],+r[0]],[+t[1][0],+r[1]]]),e(t)]}}function o(e){return function(t,r){return[e([[+r[0],+t[0][1],+t[0][2]],[+r[1],+t[1][1],+t[1][2]],[+r[2],+t[2][1],+t[2][2]]]),e([[+t[0][0],+r[0],+t[0][2]],[+t[1][0],+r[1],+t[1][2]],[+t[2][0],+r[2],+t[2][2]]]),e([[+t[0][0],+t[0][1],+r[0]],[+t[1][0],+t[1][1],+r[1]],[+t[2][0],+t[2][1],+r[2]]]),e(t)]}}function s(e){return function(t,r){return[e([[+r[0],+t[0][1],+t[0][2],+t[0][3]],[+r[1],+t[1][1],+t[1][2],+t[1][3]],[+r[2],+t[2][1],+t[2][2],+t[2][3]],[+r[3],+t[3][1],+t[3][2],+t[3][3]]]),e([[+t[0][0],+r[0],+t[0][2],+t[0][3]],[+t[1][0],+r[1],+t[1][2],+t[1][3]],[+t[2][0],+r[2],+t[2][2],+t[2][3]],[+t[3][0],+r[3],+t[3][2],+t[3][3]]]),e([[+t[0][0],+t[0][1],+r[0],+t[0][3]],[+t[1][0],+t[1][1],+r[1],+t[1][3]],[+t[2][0],+t[2][1],+r[2],+t[2][3]],[+t[3][0],+t[3][1],+r[3],+t[3][3]]]),e([[+t[0][0],+t[0][1],+t[0][2],+r[0]],[+t[1][0],+t[1][1],+t[1][2],+r[1]],[+t[2][0],+t[2][1],+t[2][2],+r[2]],[+t[3][0],+t[3][1],+t[3][2],+r[3]]]),e(t)]}}function l(e){return function(t,r){return[e([[+r[0],+t[0][1],+t[0][2],+t[0][3],+t[0][4]],[+r[1],+t[1][1],+t[1][2],+t[1][3],+t[1][4]],[+r[2],+t[2][1],+t[2][2],+t[2][3],+t[2][4]],[+r[3],+t[3][1],+t[3][2],+t[3][3],+t[3][4]],[+r[4],+t[4][1],+t[4][2],+t[4][3],+t[4][4]]]),e([[+t[0][0],+r[0],+t[0][2],+t[0][3],+t[0][4]],[+t[1][0],+r[1],+t[1][2],+t[1][3],+t[1][4]],[+t[2][0],+r[2],+t[2][2],+t[2][3],+t[2][4]],[+t[3][0],+r[3],+t[3][2],+t[3][3],+t[3][4]],[+t[4][0],+r[4],+t[4][2],+t[4][3],+t[4][4]]]),e([[+t[0][0],+t[0][1],+r[0],+t[0][3],+t[0][4]],[+t[1][0],+t[1][1],+r[1],+t[1][3],+t[1][4]],[+t[2][0],+t[2][1],+r[2],+t[2][3],+t[2][4]],[+t[3][0],+t[3][1],+r[3],+t[3][3],+t[3][4]],[+t[4][0],+t[4][1],+r[4],+t[4][3],+t[4][4]]]),e([[+t[0][0],+t[0][1],+t[0][2],+r[0],+t[0][4]],[+t[1][0],+t[1][1],+t[1][2],+r[1],+t[1][4]],[+t[2][0],+t[2][1],+t[2][2],+r[2],+t[2][4]],[+t[3][0],+t[3][1],+t[3][2],+r[3],+t[3][4]],[+t[4][0],+t[4][1],+t[4][2],+r[4],+t[4][4]]]),e([[+t[0][0],+t[0][1],+t[0][2],+t[0][3],+r[0]],[+t[1][0],+t[1][1],+t[1][2],+t[1][3],+r[1]],[+t[2][0],+t[2][1],+t[2][2],+t[2][3],+r[2]],[+t[3][0],+t[3][1],+t[3][2],+t[3][3],+r[3]],[+t[4][0],+t[4][1],+t[4][2],+t[4][3],+r[4]]]),e(t)]}}function c(e){return function(t,r){return[e([[+r[0],+t[0][1],+t[0][2],+t[0][3],+t[0][4],+t[0][5]],[+r[1],+t[1][1],+t[1][2],+t[1][3],+t[1][4],+t[1][5]],[+r[2],+t[2][1],+t[2][2],+t[2][3],+t[2][4],+t[2][5]],[+r[3],+t[3][1],+t[3][2],+t[3][3],+t[3][4],+t[3][5]],[+r[4],+t[4][1],+t[4][2],+t[4][3],+t[4][4],+t[4][5]],[+r[5],+t[5][1],+t[5][2],+t[5][3],+t[5][4],+t[5][5]]]),e([[+t[0][0],+r[0],+t[0][2],+t[0][3],+t[0][4],+t[0][5]],[+t[1][0],+r[1],+t[1][2],+t[1][3],+t[1][4],+t[1][5]],[+t[2][0],+r[2],+t[2][2],+t[2][3],+t[2][4],+t[2][5]],[+t[3][0],+r[3],+t[3][2],+t[3][3],+t[3][4],+t[3][5]],[+t[4][0],+r[4],+t[4][2],+t[4][3],+t[4][4],+t[4][5]],[+t[5][0],+r[5],+t[5][2],+t[5][3],+t[5][4],+t[5][5]]]),e([[+t[0][0],+t[0][1],+r[0],+t[0][3],+t[0][4],+t[0][5]],[+t[1][0],+t[1][1],+r[1],+t[1][3],+t[1][4],+t[1][5]],[+t[2][0],+t[2][1],+r[2],+t[2][3],+t[2][4],+t[2][5]],[+t[3][0],+t[3][1],+r[3],+t[3][3],+t[3][4],+t[3][5]],[+t[4][0],+t[4][1],+r[4],+t[4][3],+t[4][4],+t[4][5]],[+t[5][0],+t[5][1],+r[5],+t[5][3],+t[5][4],+t[5][5]]]),e([[+t[0][0],+t[0][1],+t[0][2],+r[0],+t[0][4],+t[0][5]],[+t[1][0],+t[1][1],+t[1][2],+r[1],+t[1][4],+t[1][5]],[+t[2][0],+t[2][1],+t[2][2],+r[2],+t[2][4],+t[2][5]],[+t[3][0],+t[3][1],+t[3][2],+r[3],+t[3][4],+t[3][5]],[+t[4][0],+t[4][1],+t[4][2],+r[4],+t[4][4],+t[4][5]],[+t[5][0],+t[5][1],+t[5][2],+r[5],+t[5][4],+t[5][5]]]),e([[+t[0][0],+t[0][1],+t[0][2],+t[0][3],+r[0],+t[0][5]],[+t[1][0],+t[1][1],+t[1][2],+t[1][3],+r[1],+t[1][5]],[+t[2][0],+t[2][1],+t[2][2],+t[2][3],+r[2],+t[2][5]],[+t[3][0],+t[3][1],+t[3][2],+t[3][3],+r[3],+t[3][5]],[+t[4][0],+t[4][1],+t[4][2],+t[4][3],+r[4],+t[4][5]],[+t[5][0],+t[5][1],+t[5][2],+t[5][3],+r[5],+t[5][5]]]),e([[+t[0][0],+t[0][1],+t[0][2],+t[0][3],+t[0][4],+r[0]],[+t[1][0],+t[1][1],+t[1][2],+t[1][3],+t[1][4],+r[1]],[+t[2][0],+t[2][1],+t[2][2],+t[2][3],+t[2][4],+r[2]],[+t[3][0],+t[3][1],+t[3][2],+t[3][3],+t[3][4],+r[3]],[+t[4][0],+t[4][1],+t[4][2],+t[4][3],+t[4][4],+r[4]],[+t[5][0],+t[5][1],+t[5][2],+t[5][3],+t[5][4],+r[5]]]),e(t)]}}var u=[function(){return[[0]]},function(e,t){return[[t[0]],[e[0][0]]]}];function d(e,t,r,n,i,a,o,s){return function(l,c){switch(l.length){case 0:return e(l,c);case 1:return t(l,c);case 2:return r(l,c);case 3:return n(l,c);case 4:return i(l,c);case 5:return a(l,c)}var u=o[l.length];return u||(u=o[l.length]=s(l.length)),u(l,c)}}!function(){for(;u.length<6;)u.push(i(u.length));e.exports=d.apply(void 0,u.concat([u,i]));for(var t=0;t<6;++t)e.exports[t]=u[t]}()},417:function(e,t,r){var n=r(9660),i=r(9662),a=r(8289),o=r(4078);function s(e,t,r,n){return function(r,i,a){var o=e(e(t(i[1],a[0]),t(-a[1],i[0])),e(t(r[1],i[0]),t(-i[1],r[0]))),s=e(t(r[1],a[0]),t(-a[1],r[0])),l=n(o,s);return l[l.length-1]}}function l(e,t,r,n){return function(i,a,o,s){var l=e(e(r(e(t(o[1],s[0]),t(-s[1],o[0])),a[2]),e(r(e(t(a[1],s[0]),t(-s[1],a[0])),-o[2]),r(e(t(a[1],o[0]),t(-o[1],a[0])),s[2]))),e(r(e(t(a[1],s[0]),t(-s[1],a[0])),i[2]),e(r(e(t(i[1],s[0]),t(-s[1],i[0])),-a[2]),r(e(t(i[1],a[0]),t(-a[1],i[0])),s[2])))),c=e(e(r(e(t(o[1],s[0]),t(-s[1],o[0])),i[2]),e(r(e(t(i[1],s[0]),t(-s[1],i[0])),-o[2]),r(e(t(i[1],o[0]),t(-o[1],i[0])),s[2]))),e(r(e(t(a[1],o[0]),t(-o[1],a[0])),i[2]),e(r(e(t(i[1],o[0]),t(-o[1],i[0])),-a[2]),r(e(t(i[1],a[0]),t(-a[1],i[0])),o[2])))),u=n(l,c);return u[u.length-1]}}function c(e,t,r,n){return function(i,a,o,s,l){var c=e(e(e(r(e(r(e(t(s[1],l[0]),t(-l[1],s[0])),o[2]),e(r(e(t(o[1],l[0]),t(-l[1],o[0])),-s[2]),r(e(t(o[1],s[0]),t(-s[1],o[0])),l[2]))),a[3]),e(r(e(r(e(t(s[1],l[0]),t(-l[1],s[0])),a[2]),e(r(e(t(a[1],l[0]),t(-l[1],a[0])),-s[2]),r(e(t(a[1],s[0]),t(-s[1],a[0])),l[2]))),-o[3]),r(e(r(e(t(o[1],l[0]),t(-l[1],o[0])),a[2]),e(r(e(t(a[1],l[0]),t(-l[1],a[0])),-o[2]),r(e(t(a[1],o[0]),t(-o[1],a[0])),l[2]))),s[3]))),e(r(e(r(e(t(o[1],s[0]),t(-s[1],o[0])),a[2]),e(r(e(t(a[1],s[0]),t(-s[1],a[0])),-o[2]),r(e(t(a[1],o[0]),t(-o[1],a[0])),s[2]))),-l[3]),e(r(e(r(e(t(s[1],l[0]),t(-l[1],s[0])),a[2]),e(r(e(t(a[1],l[0]),t(-l[1],a[0])),-s[2]),r(e(t(a[1],s[0]),t(-s[1],a[0])),l[2]))),i[3]),r(e(r(e(t(s[1],l[0]),t(-l[1],s[0])),i[2]),e(r(e(t(i[1],l[0]),t(-l[1],i[0])),-s[2]),r(e(t(i[1],s[0]),t(-s[1],i[0])),l[2]))),-a[3])))),e(e(r(e(r(e(t(a[1],l[0]),t(-l[1],a[0])),i[2]),e(r(e(t(i[1],l[0]),t(-l[1],i[0])),-a[2]),r(e(t(i[1],a[0]),t(-a[1],i[0])),l[2]))),s[3]),e(r(e(r(e(t(a[1],s[0]),t(-s[1],a[0])),i[2]),e(r(e(t(i[1],s[0]),t(-s[1],i[0])),-a[2]),r(e(t(i[1],a[0]),t(-a[1],i[0])),s[2]))),-l[3]),r(e(r(e(t(o[1],s[0]),t(-s[1],o[0])),a[2]),e(r(e(t(a[1],s[0]),t(-s[1],a[0])),-o[2]),r(e(t(a[1],o[0]),t(-o[1],a[0])),s[2]))),i[3]))),e(r(e(r(e(t(o[1],s[0]),t(-s[1],o[0])),i[2]),e(r(e(t(i[1],s[0]),t(-s[1],i[0])),-o[2]),r(e(t(i[1],o[0]),t(-o[1],i[0])),s[2]))),-a[3]),e(r(e(r(e(t(a[1],s[0]),t(-s[1],a[0])),i[2]),e(r(e(t(i[1],s[0]),t(-s[1],i[0])),-a[2]),r(e(t(i[1],a[0]),t(-a[1],i[0])),s[2]))),o[3]),r(e(r(e(t(a[1],o[0]),t(-o[1],a[0])),i[2]),e(r(e(t(i[1],o[0]),t(-o[1],i[0])),-a[2]),r(e(t(i[1],a[0]),t(-a[1],i[0])),o[2]))),-s[3]))))),u=e(e(e(r(e(r(e(t(s[1],l[0]),t(-l[1],s[0])),o[2]),e(r(e(t(o[1],l[0]),t(-l[1],o[0])),-s[2]),r(e(t(o[1],s[0]),t(-s[1],o[0])),l[2]))),i[3]),r(e(r(e(t(s[1],l[0]),t(-l[1],s[0])),i[2]),e(r(e(t(i[1],l[0]),t(-l[1],i[0])),-s[2]),r(e(t(i[1],s[0]),t(-s[1],i[0])),l[2]))),-o[3])),e(r(e(r(e(t(o[1],l[0]),t(-l[1],o[0])),i[2]),e(r(e(t(i[1],l[0]),t(-l[1],i[0])),-o[2]),r(e(t(i[1],o[0]),t(-o[1],i[0])),l[2]))),s[3]),r(e(r(e(t(o[1],s[0]),t(-s[1],o[0])),i[2]),e(r(e(t(i[1],s[0]),t(-s[1],i[0])),-o[2]),r(e(t(i[1],o[0]),t(-o[1],i[0])),s[2]))),-l[3]))),e(e(r(e(r(e(t(o[1],l[0]),t(-l[1],o[0])),a[2]),e(r(e(t(a[1],l[0]),t(-l[1],a[0])),-o[2]),r(e(t(a[1],o[0]),t(-o[1],a[0])),l[2]))),i[3]),r(e(r(e(t(o[1],l[0]),t(-l[1],o[0])),i[2]),e(r(e(t(i[1],l[0]),t(-l[1],i[0])),-o[2]),r(e(t(i[1],o[0]),t(-o[1],i[0])),l[2]))),-a[3])),e(r(e(r(e(t(a[1],l[0]),t(-l[1],a[0])),i[2]),e(r(e(t(i[1],l[0]),t(-l[1],i[0])),-a[2]),r(e(t(i[1],a[0]),t(-a[1],i[0])),l[2]))),o[3]),r(e(r(e(t(a[1],o[0]),t(-o[1],a[0])),i[2]),e(r(e(t(i[1],o[0]),t(-o[1],i[0])),-a[2]),r(e(t(i[1],a[0]),t(-a[1],i[0])),o[2]))),-l[3])))),d=n(c,u);return d[d.length-1]}}function u(e){return(3===e?s:4===e?l:c)(i,n,a,o)}var d=u(3),h=u(4),g=[function(){return 0},function(){return 0},function(e,t){return t[0]-e[0]},function(e,t,r){var n,i=(e[1]-r[1])*(t[0]-r[0]),a=(e[0]-r[0])*(t[1]-r[1]),o=i-a;if(i>0){if(a<=0)return o;n=i+a}else{if(!(i<0))return o;if(a>=0)return o;n=-(i+a)}var s=33306690738754716e-32*n;return o>=s||o<=-s?o:d(e,t,r)},function(e,t,r,n){var i=e[0]-n[0],a=t[0]-n[0],o=r[0]-n[0],s=e[1]-n[1],l=t[1]-n[1],c=r[1]-n[1],u=e[2]-n[2],d=t[2]-n[2],g=r[2]-n[2],p=a*c,f=o*l,m=o*s,y=i*c,b=i*l,v=a*s,x=u*(p-f)+d*(m-y)+g*(b-v),B=7771561172376103e-31*((Math.abs(p)+Math.abs(f))*Math.abs(u)+(Math.abs(m)+Math.abs(y))*Math.abs(d)+(Math.abs(b)+Math.abs(v))*Math.abs(g));return x>B||-x>B?x:h(e,t,r,n)}];function p(e){var t=g[e.length];return t||(t=g[e.length]=u(e.length)),t.apply(void 0,e)}function f(e,t,r,n,i,a,o){return function(t,r,s,l,c){switch(arguments.length){case 0:case 1:return 0;case 2:return n(t,r);case 3:return i(t,r,s);case 4:return a(t,r,s,l);case 5:return o(t,r,s,l,c)}for(var u=new Array(arguments.length),d=0;d<arguments.length;++d)u[d]=arguments[d];return e(u)}}!function(){for(;g.length<=5;)g.push(u(g.length));e.exports=f.apply(void 0,[p].concat(g));for(var t=0;t<=5;++t)e.exports[t]=g[t]}()},2019:function(e,t,r){var n=r(9662),i=r(8289);e.exports=function(e,t){if(1===e.length)return i(t,e[0]);if(1===t.length)return i(e,t[0]);if(0===e.length||0===t.length)return[0];var r=[0];if(e.length<t.length)for(var a=0;a<e.length;++a)r=n(r,i(t,e[a]));else for(a=0;a<t.length;++a)r=n(r,i(e,t[a]));return r}},8289:function(e,t,r){var n=r(9660),i=r(87);e.exports=function(e,t){var r=e.length;if(1===r){var a=n(e[0],t);return a[0]?a:[a[1]]}var o=new Array(2*r),s=[.1,.1],l=[.1,.1],c=0;n(e[0],t,s),s[0]&&(o[c++]=s[0]);for(var u=1;u<r;++u){n(e[u],t,l);var d=s[1];i(d,l[0],s),s[0]&&(o[c++]=s[0]);var h=l[1],g=s[1],p=h+g,f=g-(p-h);s[1]=p,f&&(o[c++]=f)}return s[1]&&(o[c++]=s[1]),0===c&&(o[c++]=0),o.length=c,o}},4434:function(e,t,r){e.exports=function(e,t,r,i){var a=n(e,r,i),o=n(t,r,i);if(a>0&&o>0||a<0&&o<0)return!1;var s=n(r,e,t),l=n(i,e,t);return!(s>0&&l>0||s<0&&l<0)&&(0!==a||0!==o||0!==s||0!==l||function(e,t,r,n){for(var i=0;i<2;++i){var a=e[i],o=t[i],s=Math.min(a,o),l=Math.max(a,o),c=r[i],u=n[i],d=Math.min(c,u);if(Math.max(c,u)<s||l<d)return!1}return!0}(e,t,r,i))};var n=r(417)[3]},4078:function(e){e.exports=function(e,t){var r=0|e.length,n=0|t.length;if(1===r&&1===n)return function(e,t){var r=e+t,n=r-e,i=e-(r-n)+(t-n);return i?[i,r]:[r]}(e[0],-t[0]);var i,a,o=new Array(r+n),s=0,l=0,c=0,u=Math.abs,d=e[l],h=u(d),g=-t[c],p=u(g);h<p?(a=d,(l+=1)<r&&(d=e[l],h=u(d))):(a=g,(c+=1)<n&&(g=-t[c],p=u(g))),l<r&&h<p||c>=n?(i=d,(l+=1)<r&&(d=e[l],h=u(d))):(i=g,(c+=1)<n&&(g=-t[c],p=u(g)));for(var f,m,y=i+a,b=y-i,v=a-b,x=v,B=y;l<r&&c<n;)h<p?(i=d,(l+=1)<r&&(d=e[l],h=u(d))):(i=g,(c+=1)<n&&(g=-t[c],p=u(g))),(v=(a=x)-(b=(y=i+a)-i))&&(o[s++]=v),x=B-((f=B+y)-(m=f-B))+(y-m),B=f;for(;l<r;)(v=(a=x)-(b=(y=(i=d)+a)-i))&&(o[s++]=v),x=B-((f=B+y)-(m=f-B))+(y-m),B=f,(l+=1)<r&&(d=e[l]);for(;c<n;)(v=(a=x)-(b=(y=(i=g)+a)-i))&&(o[s++]=v),x=B-((f=B+y)-(m=f-B))+(y-m),B=f,(c+=1)<n&&(g=-t[c]);return x&&(o[s++]=x),B&&(o[s++]=B),s||(o[s++]=0),o.length=s,o}},9662:function(e){e.exports=function(e,t){var r=0|e.length,n=0|t.length;if(1===r&&1===n)return function(e,t){var r=e+t,n=r-e,i=e-(r-n)+(t-n);return i?[i,r]:[r]}(e[0],t[0]);var i,a,o=new Array(r+n),s=0,l=0,c=0,u=Math.abs,d=e[l],h=u(d),g=t[c],p=u(g);h<p?(a=d,(l+=1)<r&&(d=e[l],h=u(d))):(a=g,(c+=1)<n&&(g=t[c],p=u(g))),l<r&&h<p||c>=n?(i=d,(l+=1)<r&&(d=e[l],h=u(d))):(i=g,(c+=1)<n&&(g=t[c],p=u(g)));for(var f,m,y=i+a,b=y-i,v=a-b,x=v,B=y;l<r&&c<n;)h<p?(i=d,(l+=1)<r&&(d=e[l],h=u(d))):(i=g,(c+=1)<n&&(g=t[c],p=u(g))),(v=(a=x)-(b=(y=i+a)-i))&&(o[s++]=v),x=B-((f=B+y)-(m=f-B))+(y-m),B=f;for(;l<r;)(v=(a=x)-(b=(y=(i=d)+a)-i))&&(o[s++]=v),x=B-((f=B+y)-(m=f-B))+(y-m),B=f,(l+=1)<r&&(d=e[l]);for(;c<n;)(v=(a=x)-(b=(y=(i=g)+a)-i))&&(o[s++]=v),x=B-((f=B+y)-(m=f-B))+(y-m),B=f,(c+=1)<n&&(g=t[c]);return x&&(o[s++]=x),B&&(o[s++]=B),s||(o[s++]=0),o.length=s,o}},8691:function(e,t,r){e.exports=function(e){return i(n(e))};var n=r(2692),i=r(7037)},7212:function(e,t,r){e.exports=function(e,t,r,s){if(r=r||0,void 0===s&&(s=function(e){for(var t=e.length,r=0,n=0;n<t;++n)r=0|Math.max(r,e[n].length);return r-1}(e)),0===e.length||s<1)return{cells:[],vertexIds:[],vertexWeights:[]};var l=function(e,t){for(var r=e.length,n=i.mallocUint8(r),a=0;a<r;++a)n[a]=e[a]<t|0;return n}(t,+r),c=function(e,t){for(var r=e.length,o=t*(t+1)/2*r|0,s=i.mallocUint32(2*o),l=0,c=0;c<r;++c)for(var u=e[c],d=(t=u.length,0);d<t;++d)for(var h=0;h<d;++h){var g=u[h],p=u[d];s[l++]=0|Math.min(g,p),s[l++]=0|Math.max(g,p)}a(n(s,[l/2|0,2]));var f=2;for(c=2;c<l;c+=2)s[c-2]===s[c]&&s[c-1]===s[c+1]||(s[f++]=s[c],s[f++]=s[c+1]);return n(s,[f/2|0,2])}(e,s),u=function(e,t,r,a){for(var o=e.data,s=e.shape[0],l=i.mallocDouble(s),c=0,u=0;u<s;++u){var d=o[2*u],h=o[2*u+1];if(r[d]!==r[h]){var g=t[d],p=t[h];o[2*c]=d,o[2*c+1]=h,l[c++]=(p-a)/(p-g)}}return e.shape[0]=c,n(l,[c])}(c,t,l,+r),d=function(e,t){var r=i.mallocInt32(2*t),n=e.shape[0],a=e.data;r[0]=0;for(var o=0,s=0;s<n;++s){var l=a[2*s];if(l!==o){for(r[2*o+1]=s;++o<l;)r[2*o]=s,r[2*o+1]=s;r[2*o]=s}}for(r[2*o+1]=n;++o<t;)r[2*o]=r[2*o+1]=n;return r}(c,0|t.length),h=o(s)(e,c.data,d,l),g=function(e){for(var t=0|e.shape[0],r=e.data,n=new Array(t),i=0;i<t;++i)n[i]=[r[2*i],r[2*i+1]];return n}(c),p=[].slice.call(u.data,0,u.shape[0]);return i.free(l),i.free(c.data),i.free(u.data),i.free(d),{cells:h,vertexIds:g,vertexWeights:p}};var n=r(5050),i=r(5306),a=r(8729),o=r(1168)},1168:function(e){e.exports=function(e){return t[e]()};var t=[function(){return function(e,t,r,n){for(var i=e.length,a=0;a<i;++a)e[a].length;return[]}},function(){function e(e,t,r,n){for(var i=0|Math.min(r,n),a=0|Math.max(r,n),o=e[2*i],s=e[2*i+1];o<s;){var l=o+s>>1,c=t[2*l+1];if(c===a)return l;a<c?s=l:o=l+1}return o}return function(t,r,n,i){for(var a=t.length,o=[],s=0;s<a;++s){var l=t[s];if(2===l.length){var c=(i[l[0]]<<0)+(i[l[1]]<<1);if(0===c||3===c)continue;switch(c){case 0:break;case 1:o.push([e(n,r,l[0],l[1])]);break;case 2:o.push([e(n,r,l[1],l[0])])}}}return o}},function(){function e(e,t,r,n){for(var i=0|Math.min(r,n),a=0|Math.max(r,n),o=e[2*i],s=e[2*i+1];o<s;){var l=o+s>>1,c=t[2*l+1];if(c===a)return l;a<c?s=l:o=l+1}return o}return function(t,r,n,i){for(var a=t.length,o=[],s=0;s<a;++s){var l=t[s],c=l.length;if(3===c){if(0==(u=(i[l[0]]<<0)+(i[l[1]]<<1)+(i[l[2]]<<2))||7===u)continue;switch(u){case 0:break;case 1:o.push([e(n,r,l[0],l[2]),e(n,r,l[0],l[1])]);break;case 2:o.push([e(n,r,l[1],l[0]),e(n,r,l[1],l[2])]);break;case 3:o.push([e(n,r,l[0],l[2]),e(n,r,l[1],l[2])]);break;case 4:o.push([e(n,r,l[2],l[1]),e(n,r,l[2],l[0])]);break;case 5:o.push([e(n,r,l[2],l[1]),e(n,r,l[0],l[1])]);break;case 6:o.push([e(n,r,l[1],l[0]),e(n,r,l[2],l[0])])}}else if(2===c){var u;if(0==(u=(i[l[0]]<<0)+(i[l[1]]<<1))||3===u)continue;switch(u){case 0:break;case 1:o.push([e(n,r,l[0],l[1])]);break;case 2:o.push([e(n,r,l[1],l[0])])}}}return o}},function(){function e(e,t,r,n){for(var i=0|Math.min(r,n),a=0|Math.max(r,n),o=e[2*i],s=e[2*i+1];o<s;){var l=o+s>>1,c=t[2*l+1];if(c===a)return l;a<c?s=l:o=l+1}return o}return function(t,r,n,i){for(var a=t.length,o=[],s=0;s<a;++s){var l=t[s],c=l.length;if(4===c){if(0==(u=(i[l[0]]<<0)+(i[l[1]]<<1)+(i[l[2]]<<2)+(i[l[3]]<<3))||15===u)continue;switch(u){case 0:break;case 1:o.push([e(n,r,l[0],l[1]),e(n,r,l[0],l[2]),e(n,r,l[0],l[3])]);break;case 2:o.push([e(n,r,l[1],l[2]),e(n,r,l[1],l[0]),e(n,r,l[1],l[3])]);break;case 3:o.push([e(n,r,l[1],l[2]),e(n,r,l[0],l[2]),e(n,r,l[0],l[3])],[e(n,r,l[1],l[3]),e(n,r,l[1],l[2]),e(n,r,l[0],l[3])]);break;case 4:o.push([e(n,r,l[2],l[0]),e(n,r,l[2],l[1]),e(n,r,l[2],l[3])]);break;case 5:o.push([e(n,r,l[0],l[1]),e(n,r,l[2],l[1]),e(n,r,l[0],l[3])],[e(n,r,l[2],l[1]),e(n,r,l[2],l[3]),e(n,r,l[0],l[3])]);break;case 6:o.push([e(n,r,l[2],l[0]),e(n,r,l[1],l[0]),e(n,r,l[1],l[3])],[e(n,r,l[2],l[3]),e(n,r,l[2],l[0]),e(n,r,l[1],l[3])]);break;case 7:o.push([e(n,r,l[0],l[3]),e(n,r,l[1],l[3]),e(n,r,l[2],l[3])]);break;case 8:o.push([e(n,r,l[3],l[1]),e(n,r,l[3],l[0]),e(n,r,l[3],l[2])]);break;case 9:o.push([e(n,r,l[3],l[1]),e(n,r,l[0],l[1]),e(n,r,l[0],l[2])],[e(n,r,l[3],l[2]),e(n,r,l[3],l[1]),e(n,r,l[0],l[2])]);break;case 10:o.push([e(n,r,l[1],l[0]),e(n,r,l[3],l[0]),e(n,r,l[1],l[2])],[e(n,r,l[3],l[0]),e(n,r,l[3],l[2]),e(n,r,l[1],l[2])]);break;case 11:o.push([e(n,r,l[1],l[2]),e(n,r,l[0],l[2]),e(n,r,l[3],l[2])]);break;case 12:o.push([e(n,r,l[3],l[0]),e(n,r,l[2],l[0]),e(n,r,l[2],l[1])],[e(n,r,l[3],l[1]),e(n,r,l[3],l[0]),e(n,r,l[2],l[1])]);break;case 13:o.push([e(n,r,l[0],l[1]),e(n,r,l[2],l[1]),e(n,r,l[3],l[1])]);break;case 14:o.push([e(n,r,l[2],l[0]),e(n,r,l[1],l[0]),e(n,r,l[3],l[0])])}}else if(3===c){if(0==(u=(i[l[0]]<<0)+(i[l[1]]<<1)+(i[l[2]]<<2))||7===u)continue;switch(u){case 0:break;case 1:o.push([e(n,r,l[0],l[2]),e(n,r,l[0],l[1])]);break;case 2:o.push([e(n,r,l[1],l[0]),e(n,r,l[1],l[2])]);break;case 3:o.push([e(n,r,l[0],l[2]),e(n,r,l[1],l[2])]);break;case 4:o.push([e(n,r,l[2],l[1]),e(n,r,l[2],l[0])]);break;case 5:o.push([e(n,r,l[2],l[1]),e(n,r,l[0],l[1])]);break;case 6:o.push([e(n,r,l[1],l[0]),e(n,r,l[2],l[0])])}}else if(2===c){var u;if(0==(u=(i[l[0]]<<0)+(i[l[1]]<<1))||3===u)continue;switch(u){case 0:break;case 1:o.push([e(n,r,l[0],l[1])]);break;case 2:o.push([e(n,r,l[1],l[0])])}}}return o}}]},8211:function(e,t,r){r(2288),r(1731),t.H=function(e,t){var r=e.length,n=e.length-t.length,i=Math.min;if(n)return n;switch(r){case 0:return 0;case 1:return e[0]-t[0];case 2:return(s=e[0]+e[1]-t[0]-t[1])||i(e[0],e[1])-i(t[0],t[1]);case 3:var a=e[0]+e[1],o=t[0]+t[1];if(s=a+e[2]-(o+t[2]))return s;var s,l=i(e[0],e[1]),c=i(t[0],t[1]);return(s=i(l,e[2])-i(c,t[2]))||i(l+e[2],a)-i(c+t[2],o);default:var u=e.slice(0);u.sort();var d=t.slice(0);d.sort();for(var h=0;h<r;++h)if(n=u[h]-d[h])return n;return 0}}},9392:function(e,t){function r(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,r;return t=(e>65535)<<4,t|=r=((e>>>=t)>255)<<3,t|=r=((e>>>=r)>15)<<2,(t|=r=((e>>>=r)>3)<<1)|(e>>>=r)>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=r,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var n=new Array(256);!function(e){for(var t=0;t<256;++t){var r=t,n=t,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;e[t]=n<<i&255}}(n),t.reverse=function(e){return n[255&e]<<24|n[e>>>8&255]<<16|n[e>>>16&255]<<8|n[e>>>24&255]},t.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},t.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},t.interleave3=function(e,t,r){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},t.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},6656:function(e,t,r){var n=r(9392),i=r(9521);function a(e,t){var r=e.length,n=e.length-t.length,i=Math.min;if(n)return n;switch(r){case 0:return 0;case 1:return e[0]-t[0];case 2:return(s=e[0]+e[1]-t[0]-t[1])||i(e[0],e[1])-i(t[0],t[1]);case 3:var a=e[0]+e[1],o=t[0]+t[1];if(s=a+e[2]-(o+t[2]))return s;var s,l=i(e[0],e[1]),c=i(t[0],t[1]);return(s=i(l,e[2])-i(c,t[2]))||i(l+e[2],a)-i(c+t[2],o);default:var u=e.slice(0);u.sort();var d=t.slice(0);d.sort();for(var h=0;h<r;++h)if(n=u[h]-d[h])return n;return 0}}function o(e,t){return a(e[0],t[0])}function s(e,t){if(t){for(var r=e.length,n=new Array(r),i=0;i<r;++i)n[i]=[e[i],t[i]];for(n.sort(o),i=0;i<r;++i)e[i]=n[i][0],t[i]=n[i][1];return e}return e.sort(a),e}function l(e){if(0===e.length)return[];for(var t=1,r=e.length,n=1;n<r;++n){var i=e[n];if(a(i,e[n-1])){if(n===t){t++;continue}e[t++]=i}}return e.length=t,e}function c(e,t){for(var r=0,n=e.length-1,i=-1;r<=n;){var o=r+n>>1,s=a(e[o],t);s<=0?(0===s&&(i=o),r=o+1):s>0&&(n=o-1)}return i}function u(e,t){for(var r=new Array(e.length),i=0,o=r.length;i<o;++i)r[i]=[];for(var s=[],l=(i=0,t.length);i<l;++i)for(var u=t[i],d=u.length,h=1,g=1<<d;h<g;++h){s.length=n.popCount(h);for(var p=0,f=0;f<d;++f)h&1<<f&&(s[p++]=u[f]);var m=c(e,s);if(!(m<0))for(;r[m++].push(i),!(m>=e.length||0!==a(e[m],s)););}return r}function d(e,t){if(t<0)return[];for(var r=[],i=(1<<t+1)-1,a=0;a<e.length;++a)for(var o=e[a],l=i;l<1<<o.length;l=n.nextCombination(l)){for(var c=new Array(t+1),u=0,d=0;d<o.length;++d)l&1<<d&&(c[u++]=o[d]);r.push(c)}return s(r)}t.dimension=function(e){for(var t=0,r=Math.max,n=0,i=e.length;n<i;++n)t=r(t,e[n].length);return t-1},t.countVertices=function(e){for(var t=-1,r=Math.max,n=0,i=e.length;n<i;++n)for(var a=e[n],o=0,s=a.length;o<s;++o)t=r(t,a[o]);return t+1},t.cloneCells=function(e){for(var t=new Array(e.length),r=0,n=e.length;r<n;++r)t[r]=e[r].slice(0);return t},t.compareCells=a,t.normalize=s,t.unique=l,t.findCell=c,t.incidence=u,t.dual=function(e,t){if(!t)return u(l(d(e,0)),e);for(var r=new Array(t),n=0;n<t;++n)r[n]=[];n=0;for(var i=e.length;n<i;++n)for(var a=e[n],o=0,s=a.length;o<s;++o)r[a[o]].push(n);return r},t.explode=function(e){for(var t=[],r=0,n=e.length;r<n;++r)for(var i=e[r],a=0|i.length,o=1,l=1<<a;o<l;++o){for(var c=[],u=0;u<a;++u)o>>>u&1&&c.push(i[u]);t.push(c)}return s(t)},t.skeleton=d,t.boundary=function(e){for(var t=[],r=0,n=e.length;r<n;++r)for(var i=e[r],a=0,o=i.length;a<o;++a){for(var l=new Array(i.length-1),c=0,u=0;c<o;++c)c!==a&&(l[u++]=i[c]);t.push(l)}return s(t)},t.connectedComponents=function(e,t){return t?function(e,t){for(var r=new i(t),n=0;n<e.length;++n)for(var a=e[n],o=0;o<a.length;++o)for(var s=o+1;s<a.length;++s)r.link(a[o],a[s]);var l=[],c=r.ranks;for(n=0;n<c.length;++n)c[n]=-1;for(n=0;n<e.length;++n){var u=r.find(e[n][0]);c[u]<0?(c[u]=l.length,l.push([e[n].slice(0)])):l[c[u]].push(e[n].slice(0))}return l}(e,t):function(e){for(var t=l(s(d(e,0))),r=new i(t.length),n=0;n<e.length;++n)for(var a=e[n],o=0;o<a.length;++o)for(var u=c(t,[a[o]]),h=o+1;h<a.length;++h)r.link(u,c(t,[a[h]]));var g=[],p=r.ranks;for(n=0;n<p.length;++n)p[n]=-1;for(n=0;n<e.length;++n){var f=r.find(c(t,[e[n][0]]));p[f]<0?(p[f]=g.length,g.push([e[n].slice(0)])):g[p[f]].push(e[n].slice(0))}return g}(e)}},9521:function(e){function t(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}e.exports=t,t.prototype.length=function(){return this.roots.length},t.prototype.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},t.prototype.find=function(e){for(var t=this.roots;t[e]!==e;){var r=t[e];t[e]=t[r],e=r}return e},t.prototype.link=function(e,t){var r=this.find(e),n=this.find(t);if(r!==n){var i=this.ranks,a=this.roots,o=i[r],s=i[n];o<s?a[r]=n:s<o?a[n]=r:(a[n]=r,++i[r])}}},8243:function(e,t,r){e.exports=function(e,t,r){for(var a=t.length,o=e.length,s=new Array(a),l=new Array(a),c=new Array(a),u=new Array(a),d=0;d<a;++d)s[d]=l[d]=-1,c[d]=1/0,u[d]=!1;for(d=0;d<o;++d){var h=e[d];if(2!==h.length)throw new Error("Input must be a graph");var g=h[1],p=h[0];-1!==l[p]?l[p]=-2:l[p]=g,-1!==s[g]?s[g]=-2:s[g]=p}function f(e){if(u[e])return 1/0;var r=s[e],i=l[e];return r<0||i<0?1/0:function(e,t,r){var i=Math.abs(n(e,t,r)),a=Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2));return i/a}(t[e],t[r],t[i])}function m(e,t){var r=A[e],n=A[t];A[e]=n,A[t]=r,C[r]=t,C[n]=e}function y(e){return c[A[e]]}function b(e){return 1&e?e-1>>1:(e>>1)-1}function v(e){for(var t=y(e);;){var r=t,n=2*e+1,i=2*(e+1),a=e;if(n<w){var o=y(n);o<r&&(a=n,r=o)}if(i<w&&y(i)<r&&(a=i),a===e)return e;m(e,a),e=a}}function x(e){for(var t=y(e);e>0;){var r=b(e);if(!(r>=0&&t<y(r)))return e;m(e,r),e=r}}function B(){if(w>0){var e=A[0];return m(0,w-1),w-=1,v(0),e}return-1}function I(e,t){var r=A[e];return c[r]===t?e:(c[r]=-1/0,x(e),B(),c[r]=t,x((w+=1)-1))}function F(e){if(!u[e]){u[e]=!0;var t=s[e],r=l[e];s[r]>=0&&(s[r]=t),l[t]>=0&&(l[t]=r),C[t]>=0&&I(C[t],f(t)),C[r]>=0&&I(C[r],f(r))}}var A=[],C=new Array(a);for(d=0;d<a;++d)(c[d]=f(d))<1/0?(C[d]=A.length,A.push(d)):C[d]=-1;var w=A.length;for(d=w>>1;d>=0;--d)v(d);for(;;){var Q=B();if(Q<0||c[Q]>r)break;F(Q)}var U=[];for(d=0;d<a;++d)u[d]||(C[d]=U.length,U.push(t[d].slice()));function S(e,t){if(e[t]<0)return t;var r=t,n=t;do{var i=e[n];if(!u[n]||i<0||i===n)break;if(i=e[n=i],!u[n]||i<0||i===n)break;n=i,r=e[r]}while(r!==n);for(var a=t;a!==n;a=e[a])e[a]=n;return n}U.length;var E=[];return e.forEach((function(e){var t=S(s,e[0]),r=S(l,e[1]);if(t>=0&&r>=0&&t!==r){var n=C[t],i=C[r];n!==i&&E.push([n,i])}})),i.unique(i.normalize(E)),{positions:U,edges:E}};var n=r(417),i=r(6656)},6638:function(e,t,r){e.exports=function(e,t){var r,a,o,s;if(t[0][0]<t[1][0])r=t[0],a=t[1];else{if(!(t[0][0]>t[1][0]))return i(t,e);r=t[1],a=t[0]}if(e[0][0]<e[1][0])o=e[0],s=e[1];else{if(!(e[0][0]>e[1][0]))return-i(e,t);o=e[1],s=e[0]}var l=n(r,a,s),c=n(r,a,o);if(l<0){if(c<=0)return l}else if(l>0){if(c>=0)return l}else if(c)return c;if(l=n(s,o,a),c=n(s,o,r),l<0){if(c<=0)return l}else if(l>0){if(c>=0)return l}else if(c)return c;return a[0]-s[0]};var n=r(417);function i(e,t){var r,i,a,o;if(t[0][0]<t[1][0])r=t[0],i=t[1];else{if(!(t[0][0]>t[1][0])){var s=Math.min(e[0][1],e[1][1]),l=Math.max(e[0][1],e[1][1]),c=Math.min(t[0][1],t[1][1]),u=Math.max(t[0][1],t[1][1]);return l<c?l-c:s>u?s-u:l-u}r=t[1],i=t[0]}e[0][1]<e[1][1]?(a=e[0],o=e[1]):(a=e[1],o=e[0]);var d=n(i,r,a);return d||(d=n(i,r,o))||o-i}},4385:function(e,t,r){e.exports=function(e){for(var t=e.length,r=2*t,n=new Array(r),a=0;a<t;++a){var l=e[a],c=l[0][0]<l[1][0];n[2*a]=new d(l[0][0],l,c,a),n[2*a+1]=new d(l[1][0],l,!c,a)}n.sort((function(e,t){var r=e.x-t.x;return r||(r=e.create-t.create)||Math.min(e.segment[0][1],e.segment[1][1])-Math.min(t.segment[0][1],t.segment[1][1])}));var h=i(o),g=[],p=[],f=[];for(a=0;a<r;){for(var m=n[a].x,y=[];a<r;){var b=n[a];if(b.x!==m)break;a+=1,b.segment[0][0]===b.x&&b.segment[1][0]===b.x?b.create&&(b.segment[0][1]<b.segment[1][1]?(y.push(new u(b.segment[0][1],b.index,!0,!0)),y.push(new u(b.segment[1][1],b.index,!1,!1))):(y.push(new u(b.segment[1][1],b.index,!0,!1)),y.push(new u(b.segment[0][1],b.index,!1,!0)))):h=b.create?h.insert(b.segment,b.index):h.remove(b.segment)}g.push(h.root),p.push(m),f.push(y)}return new s(g,p,f)};var n=r(5070),i=r(7080),a=r(417),o=r(6638);function s(e,t,r){this.slabs=e,this.coordinates=t,this.horizontal=r}function l(e,t){return e.y-t}function c(e,t){for(var r=null;e;){var n,i,o=e.key;o[0][0]<o[1][0]?(n=o[0],i=o[1]):(n=o[1],i=o[0]);var s=a(n,i,t);if(s<0)e=e.left;else if(s>0)if(t[0]!==o[1][0])r=e,e=e.right;else{if(l=c(e.right,t))return l;e=e.left}else{if(t[0]!==o[1][0])return e;var l;if(l=c(e.right,t))return l;e=e.left}}return r}function u(e,t,r,n){this.y=e,this.index=t,this.start=r,this.closed=n}function d(e,t,r,n){this.x=e,this.segment=t,this.create=r,this.index=n}s.prototype.castUp=function(e){var t=n.le(this.coordinates,e[0]);if(t<0)return-1;this.slabs[t];var r=c(this.slabs[t],e),i=-1;if(r&&(i=r.value),this.coordinates[t]===e[0]){var s=null;if(r&&(s=r.key),t>0){var u=c(this.slabs[t-1],e);u&&(s?o(u.key,s)>0&&(s=u.key,i=u.value):(i=u.value,s=u.key))}var d=this.horizontal[t];if(d.length>0){var h=n.ge(d,e[1],l);if(h<d.length){var g=d[h];if(e[1]===g.y){if(g.closed)return g.index;for(;h<d.length-1&&d[h+1].y===e[1];)if((g=d[h+=1]).closed)return g.index;if(g.y===e[1]&&!g.start){if((h+=1)>=d.length)return i;g=d[h]}}if(g.start)if(s){var p=a(s[0],s[1],[e[0],g.y]);s[0][0]>s[1][0]&&(p=-p),p>0&&(i=g.index)}else i=g.index;else g.y!==e[1]&&(i=g.index)}}}return i}},4670:function(e,t,r){var n=r(9130),i=r(9662);function a(e,t){var r=i(n(e,t),[t[t.length-1]]);return r[r.length-1]}function o(e,t,r,n){var i=-t/(n-t);i<0?i=0:i>1&&(i=1);for(var a=1-i,o=e.length,s=new Array(o),l=0;l<o;++l)s[l]=i*e[l]+a*r[l];return s}e.exports=function(e,t){for(var r=[],n=[],i=a(e[e.length-1],t),s=e[e.length-1],l=e[0],c=0;c<e.length;++c,s=l){var u=a(l=e[c],t);if(i<0&&u>0||i>0&&u<0){var d=o(s,u,l,i);r.push(d),n.push(d.slice())}u<0?n.push(l.slice()):u>0?r.push(l.slice()):(r.push(l.slice()),n.push(l.slice())),i=u}return{positive:r,negative:n}},e.exports.positive=function(e,t){for(var r=[],n=a(e[e.length-1],t),i=e[e.length-1],s=e[0],l=0;l<e.length;++l,i=s){var c=a(s=e[l],t);(n<0&&c>0||n>0&&c<0)&&r.push(o(i,c,s,n)),c>=0&&r.push(s.slice()),n=c}return r},e.exports.negative=function(e,t){for(var r=[],n=a(e[e.length-1],t),i=e[e.length-1],s=e[0],l=0;l<e.length;++l,i=s){var c=a(s=e[l],t);(n<0&&c>0||n>0&&c<0)&&r.push(o(i,c,s,n)),c<=0&&r.push(s.slice()),n=c}return r}},8974:function(e,t,r){var n;!function(){var i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(e){return s(c(e),arguments)}function o(e,t){return a.apply(null,[e].concat(t||[]))}function s(e,t){var r,n,o,s,l,c,u,d,h,g=1,p=e.length,f="";for(n=0;n<p;n++)if("string"==typeof e[n])f+=e[n];else if("object"==typeof e[n]){if((s=e[n]).keys)for(r=t[g],o=0;o<s.keys.length;o++){if(null==r)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[o],s.keys[o-1]));r=r[s.keys[o]]}else r=s.param_no?t[s.param_no]:t[g++];if(i.not_type.test(s.type)&&i.not_primitive.test(s.type)&&r instanceof Function&&(r=r()),i.numeric_arg.test(s.type)&&"number"!=typeof r&&isNaN(r))throw new TypeError(a("[sprintf] expecting number but found %T",r));switch(i.number.test(s.type)&&(d=r>=0),s.type){case"b":r=parseInt(r,10).toString(2);break;case"c":r=String.fromCharCode(parseInt(r,10));break;case"d":case"i":r=parseInt(r,10);break;case"j":r=JSON.stringify(r,null,s.width?parseInt(s.width):0);break;case"e":r=s.precision?parseFloat(r).toExponential(s.precision):parseFloat(r).toExponential();break;case"f":r=s.precision?parseFloat(r).toFixed(s.precision):parseFloat(r);break;case"g":r=s.precision?String(Number(r.toPrecision(s.precision))):parseFloat(r);break;case"o":r=(parseInt(r,10)>>>0).toString(8);break;case"s":r=String(r),r=s.precision?r.substring(0,s.precision):r;break;case"t":r=String(!!r),r=s.precision?r.substring(0,s.precision):r;break;case"T":r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=s.precision?r.substring(0,s.precision):r;break;case"u":r=parseInt(r,10)>>>0;break;case"v":r=r.valueOf(),r=s.precision?r.substring(0,s.precision):r;break;case"x":r=(parseInt(r,10)>>>0).toString(16);break;case"X":r=(parseInt(r,10)>>>0).toString(16).toUpperCase()}i.json.test(s.type)?f+=r:(!i.number.test(s.type)||d&&!s.sign?h="":(h=d?"+":"-",r=r.toString().replace(i.sign,"")),c=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",u=s.width-(h+r).length,l=s.width&&u>0?c.repeat(u):"",f+=s.align?h+r+l:"0"===c?h+l+r:l+h+r)}return f}var l=Object.create(null);function c(e){if(l[e])return l[e];for(var t,r=e,n=[],a=0;r;){if(null!==(t=i.text.exec(r)))n.push(t[0]);else if(null!==(t=i.modulo.exec(r)))n.push("%");else{if(null===(t=i.placeholder.exec(r)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){a|=1;var o=[],s=t[2],c=[];if(null===(c=i.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(o.push(c[1]);""!==(s=s.substring(c[0].length));)if(null!==(c=i.key_access.exec(s)))o.push(c[1]);else{if(null===(c=i.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");o.push(c[1])}t[2]=o}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}r=r.substring(t[0].length)}return l[e]=n}t.sprintf=a,t.vsprintf=o,"undefined"!=typeof window&&(window.sprintf=a,window.vsprintf=o,void 0===(n=function(){return{sprintf:a,vsprintf:o}}.call(t,r,t,e))||(e.exports=n))}()},4162:function(e,t,r){e.exports=function(e,t){if(e.dimension<=0)return{positions:[],cells:[]};if(1===e.dimension)return function(e,t){for(var r=i(e,t),n=r.length,a=new Array(n),o=new Array(n),s=0;s<n;++s)a[s]=[r[s]],o[s]=[s];return{positions:a,cells:o}}(e,t);var r=e.order.join()+"-"+e.dtype,s=o[r];return t=+t||0,s||(s=o[r]=function(e,t){var r=e.length+"d",i=a[r];if(i)return i(n,e,t)}(e.order,e.dtype)),s(e,t)};var n=r(9284),i=r(9584),a={"2d":function(e,t,r){var n=e({order:t,scalarArguments:3,getters:"generic"===r?[0]:void 0,phase:function(e,t,r,n){return e>n|0},vertex:function(e,t,r,n,i,a,o,s,l,c,u,d,h){var g=(o<<0)+(s<<1)+(l<<2)+(c<<3)|0;if(0!==g&&15!==g)switch(g){case 0:case 15:u.push([e-.5,t-.5]);break;case 1:u.push([e-.25-.25*(n+r-2*h)/(r-n),t-.25-.25*(i+r-2*h)/(r-i)]);break;case 2:u.push([e-.75-.25*(-n-r+2*h)/(n-r),t-.25-.25*(a+n-2*h)/(n-a)]);break;case 3:u.push([e-.5,t-.5-.5*(i+r+a+n-4*h)/(r-i+n-a)]);break;case 4:u.push([e-.25-.25*(a+i-2*h)/(i-a),t-.75-.25*(-i-r+2*h)/(i-r)]);break;case 5:u.push([e-.5-.5*(n+r+a+i-4*h)/(r-n+i-a),t-.5]);break;case 6:u.push([e-.5-.25*(-n-r+a+i)/(n-r+i-a),t-.5-.25*(-i-r+a+n)/(i-r+n-a)]);break;case 7:u.push([e-.75-.25*(a+i-2*h)/(i-a),t-.75-.25*(a+n-2*h)/(n-a)]);break;case 8:u.push([e-.75-.25*(-a-i+2*h)/(a-i),t-.75-.25*(-a-n+2*h)/(a-n)]);break;case 9:u.push([e-.5-.25*(n+r+-a-i)/(r-n+a-i),t-.5-.25*(i+r+-a-n)/(r-i+a-n)]);break;case 10:u.push([e-.5-.5*(-n-r-a-i+4*h)/(n-r+a-i),t-.5]);break;case 11:u.push([e-.25-.25*(-a-i+2*h)/(a-i),t-.75-.25*(i+r-2*h)/(r-i)]);break;case 12:u.push([e-.5,t-.5-.5*(-i-r-a-n+4*h)/(i-r+a-n)]);break;case 13:u.push([e-.75-.25*(n+r-2*h)/(r-n),t-.25-.25*(-a-n+2*h)/(a-n)]);break;case 14:u.push([e-.25-.25*(-n-r+2*h)/(n-r),t-.25-.25*(-i-r+2*h)/(i-r)])}},cell:function(e,t,r,n,i,a,o,s,l){i?s.push([e,t]):s.push([t,e])}});return function(e,t){var r=[],i=[];return n(e,r,i,t),{positions:r,cells:i}}}},o={}},6946:function(e,t,r){e.exports=function e(t,r,i){i=i||{};var o=a[t];o||(o=a[t]={" ":{data:new Float32Array(0),shape:.2}});var s=o[r];if(!s)if(r.length<=1||!/\d/.test(r))s=o[r]=function(e){for(var t=e.cells,r=e.positions,n=new Float32Array(6*t.length),i=0,a=0,o=0;o<t.length;++o)for(var s=t[o],l=0;l<3;++l){var c=r[s[l]];n[i++]=c[0],n[i++]=c[1]+1.4,a=Math.max(c[0],a)}return{data:n,shape:a}}(n(r,{triangles:!0,font:t,textAlign:i.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var l=r.split(/(\d|\s)/),c=new Array(l.length),u=0,d=0,h=0;h<l.length;++h)c[h]=e(t,l[h]),u+=c[h].data.length,d+=c[h].shape,h>0&&(d+=.02);var g=new Float32Array(u),p=0,f=-.5*d;for(h=0;h<c.length;++h){for(var m=c[h].data,y=0;y<m.length;y+=2)g[p++]=m[y]+f,g[p++]=m[y+1];f+=c[h].shape+.02}s=o[r]={data:g,shape:d}}return s};var n=r(875),i=window||process.global||{},a=i.__TEXT_CACHE||{};i.__TEXT_CACHE={}},14:function(e,t,r){var n=r(4405);function i(e,t){var r=n(getComputedStyle(e).getPropertyValue(t));return r[0]*a(r[1],e)}function a(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return function(e,t){var r=document.createElement("div");r.style["font-size"]="128"+e,t.appendChild(r);var n=i(r,"font-size")/128;return t.removeChild(r),n}(e,t);case"em":return i(t,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}e.exports=a},3440:function(e,t,r){e.exports=function(e){var t=(e=e||{}).center||[0,0,0],r=e.up||[0,1,0],n=e.right||d(r),i=e.radius||1,a=e.theta||0,u=e.phi||0;if(t=[].slice.call(t,0,3),r=[].slice.call(r,0,3),s(r,r),n=[].slice.call(n,0,3),s(n,n),"eye"in e){var g=e.eye,p=[g[0]-t[0],g[1]-t[1],g[2]-t[2]];o(n,p,r),c(n[0],n[1],n[2])<1e-6?n=d(r):s(n,n),i=c(p[0],p[1],p[2]);var f=l(r,p)/i,m=l(n,p)/i;u=Math.acos(f),a=Math.acos(m)}return i=Math.log(i),new h(e.zoomMin,e.zoomMax,t,r,n,i,a,u)};var n=r(8444),i=r(7437),a=r(4422),o=r(903),s=r(899),l=r(9305);function c(e,t,r){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(r,2))}function u(e){return Math.min(1,Math.max(-1,e))}function d(e){var t=Math.abs(e[0]),r=Math.abs(e[1]),n=Math.abs(e[2]),i=[0,0,0];t>Math.max(r,n)?i[2]=1:r>Math.max(t,n)?i[0]=1:i[1]=1;for(var a=0,o=0,l=0;l<3;++l)a+=e[l]*e[l],o+=i[l]*e[l];for(l=0;l<3;++l)i[l]-=o/a*e[l];return s(i,i),i}function h(e,t,r,i,a,o,s,l){this.center=n(r),this.up=n(i),this.right=n(a),this.radius=n([o]),this.angle=n([s,l]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(e,t),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var c=0;c<16;++c)this.computedMatrix[c]=.5;this.recalcMatrix(0)}var g=h.prototype;g.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-1/0,t=t>0?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},g.getDistanceLimits=function(e){var t=this.radius.bounds[0];return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},g.recalcMatrix=function(e){this.center.curve(e),this.up.curve(e),this.right.curve(e),this.radius.curve(e),this.angle.curve(e);for(var t=this.computedUp,r=this.computedRight,n=0,i=0,a=0;a<3;++a)i+=t[a]*r[a],n+=t[a]*t[a];var l=Math.sqrt(n),u=0;for(a=0;a<3;++a)r[a]-=t[a]*i/n,u+=r[a]*r[a],t[a]/=l;var d=Math.sqrt(u);for(a=0;a<3;++a)r[a]/=d;var h=this.computedToward;o(h,t,r),s(h,h);var g=Math.exp(this.computedRadius[0]),p=this.computedAngle[0],f=this.computedAngle[1],m=Math.cos(p),y=Math.sin(p),b=Math.cos(f),v=Math.sin(f),x=this.computedCenter,B=m*b,I=y*b,F=v,A=-m*v,C=-y*v,w=b,Q=this.computedEye,U=this.computedMatrix;for(a=0;a<3;++a){var S=B*r[a]+I*h[a]+F*t[a];U[4*a+1]=A*r[a]+C*h[a]+w*t[a],U[4*a+2]=S,U[4*a+3]=0}var E=U[1],L=U[5],_=U[9],T=U[2],R=U[6],$=U[10],k=L*$-_*R,N=_*T-E*$,G=E*R-L*T,M=c(k,N,G);for(k/=M,N/=M,G/=M,U[0]=k,U[4]=N,U[8]=G,a=0;a<3;++a)Q[a]=x[a]+U[2+4*a]*g;for(a=0;a<3;++a){u=0;for(var D=0;D<3;++D)u+=U[a+4*D]*Q[D];U[12+a]=-u}U[15]=1},g.getMatrix=function(e,t){this.recalcMatrix(e);var r=this.computedMatrix;if(t){for(var n=0;n<16;++n)t[n]=r[n];return t}return r};var p=[0,0,0];g.rotate=function(e,t,r,n){if(this.angle.move(e,t,r),n){this.recalcMatrix(e);var i=this.computedMatrix;p[0]=i[2],p[1]=i[6],p[2]=i[10];for(var o=this.computedUp,s=this.computedRight,l=this.computedToward,c=0;c<3;++c)i[4*c]=o[c],i[4*c+1]=s[c],i[4*c+2]=l[c];for(a(i,i,n,p),c=0;c<3;++c)o[c]=i[4*c],s[c]=i[4*c+1];this.up.set(e,o[0],o[1],o[2]),this.right.set(e,s[0],s[1],s[2])}},g.pan=function(e,t,r,n){t=t||0,r=r||0,n=n||0,this.recalcMatrix(e);var i=this.computedMatrix;Math.exp(this.computedRadius[0]);var a=i[1],o=i[5],s=i[9],l=c(a,o,s);a/=l,o/=l,s/=l;var u=i[0],d=i[4],h=i[8],g=u*a+d*o+h*s,p=c(u-=a*g,d-=o*g,h-=s*g),f=(u/=p)*t+a*r,m=(d/=p)*t+o*r,y=(h/=p)*t+s*r;this.center.move(e,f,m,y);var b=Math.exp(this.computedRadius[0]);b=Math.max(1e-4,b+n),this.radius.set(e,Math.log(b))},g.translate=function(e,t,r,n){this.center.move(e,t||0,r||0,n||0)},g.setMatrix=function(e,t,r,n){var a=1;"number"==typeof r&&(a=0|r),(a<0||a>3)&&(a=1);var o=(a+2)%3;t||(this.recalcMatrix(e),t=this.computedMatrix);var s=t[a],l=t[a+4],d=t[a+8];if(n){var h=Math.abs(s),g=Math.abs(l),p=Math.abs(d),f=Math.max(h,g,p);h===f?(s=s<0?-1:1,l=d=0):p===f?(d=d<0?-1:1,s=l=0):(l=l<0?-1:1,s=d=0)}else{var m=c(s,l,d);s/=m,l/=m,d/=m}var y,b,v=t[o],x=t[o+4],B=t[o+8],I=v*s+x*l+B*d,F=c(v-=s*I,x-=l*I,B-=d*I),A=l*(B/=F)-d*(x/=F),C=d*(v/=F)-s*B,w=s*x-l*v,Q=c(A,C,w);if(A/=Q,C/=Q,w/=Q,this.center.jump(e,O,Z,W),this.radius.idle(e),this.up.jump(e,s,l,d),this.right.jump(e,v,x,B),2===a){var U=t[1],S=t[5],E=t[9],L=U*v+S*x+E*B,_=U*A+S*C+E*w;y=k<0?-Math.PI/2:Math.PI/2,b=Math.atan2(_,L)}else{var T=t[2],R=t[6],$=t[10],k=T*s+R*l+$*d,N=T*v+R*x+$*B,G=T*A+R*C+$*w;y=Math.asin(u(k)),b=Math.atan2(G,N)}this.angle.jump(e,b,y),this.recalcMatrix(e);var M=t[2],D=t[6],V=t[10],H=this.computedMatrix;i(H,t);var X=H[15],O=H[12]/X,Z=H[13]/X,W=H[14]/X,Y=Math.exp(this.computedRadius[0]);this.center.jump(e,O-M*Y,Z-D*Y,W-V*Y)},g.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},g.idle=function(e){this.center.idle(e),this.up.idle(e),this.right.idle(e),this.radius.idle(e),this.angle.idle(e)},g.flush=function(e){this.center.flush(e),this.up.flush(e),this.right.flush(e),this.radius.flush(e),this.angle.flush(e)},g.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},g.lookAt=function(e,t,r,n){this.recalcMatrix(e),t=t||this.computedEye,r=r||this.computedCenter;var i=(n=n||this.computedUp)[0],a=n[1],o=n[2],s=c(i,a,o);if(!(s<1e-6)){i/=s,a/=s,o/=s;var l=t[0]-r[0],d=t[1]-r[1],h=t[2]-r[2],g=c(l,d,h);if(!(g<1e-6)){l/=g,d/=g,h/=g;var p=this.computedRight,f=p[0],m=p[1],y=p[2],b=i*f+a*m+o*y,v=c(f-=b*i,m-=b*a,y-=b*o);if(!(v<.01&&(v=c(f=a*h-o*d,m=o*l-i*h,y=i*d-a*l))<1e-6)){f/=v,m/=v,y/=v,this.up.set(e,i,a,o),this.right.set(e,f,m,y),this.center.set(e,r[0],r[1],r[2]),this.radius.set(e,Math.log(g));var x=a*y-o*m,B=o*f-i*y,I=i*m-a*f,F=c(x,B,I),A=i*l+a*d+o*h,C=f*l+m*d+y*h,w=(x/=F)*l+(B/=F)*d+(I/=F)*h,Q=Math.asin(u(A)),U=Math.atan2(w,C),S=this.angle._state,E=S[S.length-1],L=S[S.length-2];E%=2*Math.PI;var _=Math.abs(E+2*Math.PI-U),T=Math.abs(E-U),R=Math.abs(E-2*Math.PI-U);_<T&&(E+=2*Math.PI),R<T&&(E-=2*Math.PI),this.angle.jump(this.angle.lastT(),E,L),this.angle.set(e,U,Q)}}}}},9660:function(e){e.exports=function(e,r,n){var i=e*r,a=t*e,o=a-(a-e),s=e-o,l=t*r,c=l-(l-r),u=r-c,d=s*u-(i-o*c-s*c-o*u);return n?(n[0]=d,n[1]=i,n):[d,i]};var t=+(Math.pow(2,27)+1)},87:function(e){e.exports=function(e,t,r){var n=e+t,i=n-e,a=t-i,o=e-(n-i);return r?(r[0]=o+a,r[1]=n,r):[o+a,n]}},5306:function(e,t,r){var n=r(2288),i=r(3094),a=r(2146).lW;r.g.__TYPEDARRAY_POOL||(r.g.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var o="undefined"!=typeof Uint8ClampedArray,s="undefined"!=typeof BigUint64Array,l="undefined"!=typeof BigInt64Array,c=r.g.__TYPEDARRAY_POOL;c.UINT8C||(c.UINT8C=i([32,0])),c.BIGUINT64||(c.BIGUINT64=i([32,0])),c.BIGINT64||(c.BIGINT64=i([32,0])),c.BUFFER||(c.BUFFER=i([32,0]));var u=c.DATA,d=c.BUFFER;function h(e){if(e){var t=e.length||e.byteLength,r=n.log2(t);u[r].push(e)}}function g(e){e=n.nextPow2(e);var t=n.log2(e),r=u[t];return r.length>0?r.pop():new ArrayBuffer(e)}function p(e){return new Uint8Array(g(e),0,e)}function f(e){return new Uint16Array(g(2*e),0,e)}function m(e){return new Uint32Array(g(4*e),0,e)}function y(e){return new Int8Array(g(e),0,e)}function b(e){return new Int16Array(g(2*e),0,e)}function v(e){return new Int32Array(g(4*e),0,e)}function x(e){return new Float32Array(g(4*e),0,e)}function B(e){return new Float64Array(g(8*e),0,e)}function I(e){return o?new Uint8ClampedArray(g(e),0,e):p(e)}function F(e){return s?new BigUint64Array(g(8*e),0,e):null}function A(e){return l?new BigInt64Array(g(8*e),0,e):null}function C(e){return new DataView(g(e),0,e)}function w(e){e=n.nextPow2(e);var t=n.log2(e),r=d[t];return r.length>0?r.pop():new a(e)}t.free=function(e){if(a.isBuffer(e))d[n.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,r=0|n.log2(t);u[r].push(e)}},t.freeUint8=t.freeUint16=t.freeUint32=t.freeBigUint64=t.freeInt8=t.freeInt16=t.freeInt32=t.freeBigInt64=t.freeFloat32=t.freeFloat=t.freeFloat64=t.freeDouble=t.freeUint8Clamped=t.freeDataView=function(e){h(e.buffer)},t.freeArrayBuffer=h,t.freeBuffer=function(e){d[n.log2(e.length)].push(e)},t.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return g(e);switch(t){case"uint8":return p(e);case"uint16":return f(e);case"uint32":return m(e);case"int8":return y(e);case"int16":return b(e);case"int32":return v(e);case"float":case"float32":return x(e);case"double":case"float64":return B(e);case"uint8_clamped":return I(e);case"bigint64":return A(e);case"biguint64":return F(e);case"buffer":return w(e);case"data":case"dataview":return C(e);default:return null}return null},t.mallocArrayBuffer=g,t.mallocUint8=p,t.mallocUint16=f,t.mallocUint32=m,t.mallocInt8=y,t.mallocInt16=b,t.mallocInt32=v,t.mallocFloat32=t.mallocFloat=x,t.mallocFloat64=t.mallocDouble=B,t.mallocUint8Clamped=I,t.mallocBigUint64=F,t.mallocBigInt64=A,t.mallocDataView=C,t.mallocBuffer=w,t.clearCache=function(){for(var e=0;e<32;++e)c.UINT8[e].length=0,c.UINT16[e].length=0,c.UINT32[e].length=0,c.INT8[e].length=0,c.INT16[e].length=0,c.INT32[e].length=0,c.FLOAT[e].length=0,c.DOUBLE[e].length=0,c.BIGUINT64[e].length=0,c.BIGINT64[e].length=0,c.UINT8C[e].length=0,u[e].length=0,d[e].length=0}},1731:function(e){function t(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}e.exports=t;var r=t.prototype;Object.defineProperty(r,"length",{get:function(){return this.roots.length}}),r.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},r.find=function(e){for(var t=e,r=this.roots;r[e]!==e;)e=r[e];for(;r[t]!==e;){var n=r[t];r[t]=e,t=n}return e},r.link=function(e,t){var r=this.find(e),n=this.find(t);if(r!==n){var i=this.ranks,a=this.roots,o=i[r],s=i[n];o<s?a[r]=n:s<o?a[n]=r:(a[n]=r,++i[r])}}},1215:function(e){e.exports=function(e,t,r){return 0===e.length?e:t?(r||e.sort(t),function(e,t){for(var r=1,n=e.length,i=e[0],a=e[0],o=1;o<n;++o)if(a=i,t(i=e[o],a)){if(o===r){r++;continue}e[r++]=i}return e.length=r,e}(e,t)):(r||e.sort(),function(e){for(var t=1,r=e.length,n=e[0],i=e[0],a=1;a<r;++a,i=n)if(i=n,(n=e[a])!==i){if(a===t){t++;continue}e[t++]=n}return e.length=t,e}(e))}},875:function(e,t,r){e.exports=function(e,t){return"object"==typeof t&&null!==t||(t={}),n(e,t.canvas||i,t.context||a,t)};var n=r(712),i=null,a=null;"undefined"!=typeof document&&((i=document.createElement("canvas")).width=8192,i.height=1024,a=i.getContext("2d"))},712:function(e,t,r){e.exports=function(e,t,r,n){var a=64,o=1.25,s={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return n&&(n.size&&n.size>0&&(a=n.size),n.lineSpacing&&n.lineSpacing>0&&(o=n.lineSpacing),n.styletags&&n.styletags.breaklines&&(s.breaklines=!!n.styletags.breaklines),n.styletags&&n.styletags.bolds&&(s.bolds=!!n.styletags.bolds),n.styletags&&n.styletags.italics&&(s.italics=!!n.styletags.italics),n.styletags&&n.styletags.subscripts&&(s.subscripts=!!n.styletags.subscripts),n.styletags&&n.styletags.superscripts&&(s.superscripts=!!n.styletags.superscripts)),r.font=[n.fontStyle,n.fontVariant,n.fontWeight,a+"px",n.font].filter((function(e){return e})).join(" "),r.textAlign="start",r.textBaseline="alphabetic",r.direction="ltr",p(function(e,t,r,n,a,o){r=r.replace(/\n/g,""),r=!0===o.breaklines?r.replace(/\<br\>/g,"\n"):r.replace(/\<br\>/g," ");var s="",l=[];for(f=0;f<r.length;++f)l[f]=s;!0===o.bolds&&(l=d("b",c,r,l)),!0===o.italics&&(l=d("i",u,r,l)),!0===o.superscripts&&(l=d("sup","+1",r,l)),!0===o.subscripts&&(l=d("sub","-1",r,l));var h=[],g="";for(f=0;f<r.length;++f)null!==l[f]&&(g+=r[f],h.push(l[f]));var p,f,m,y,b,v=g.split("\n"),x=v.length,B=Math.round(a*n),I=n,F=2*n,A=0,C=x*B+F;e.height<C&&(e.height=C),t.fillStyle="#000",t.fillRect(0,0,e.width,e.height),t.fillStyle="#fff";var w=0,Q="";function U(){if(""!==Q){var e=t.measureText(Q).width;t.fillText(Q,I+m,F+y),m+=e}}function S(){return Math.round(b)+"px "}function E(e,r){var n=""+t.font;if(!0===o.subscripts){var i=e.indexOf("-"),a=r.indexOf("-"),s=i>-1?parseInt(e[1+i]):0,l=a>-1?parseInt(r[1+a]):0;s!==l&&(n=n.replace(S(),"?px "),b*=Math.pow(.75,l-s),n=n.replace("?px ",S())),y+=.25*B*(l-s)}if(!0===o.superscripts){var d=e.indexOf("+"),h=r.indexOf("+"),g=d>-1?parseInt(e[1+d]):0,p=h>-1?parseInt(r[1+h]):0;g!==p&&(n=n.replace(S(),"?px "),b*=Math.pow(.75,p-g),n=n.replace("?px ",S())),y-=.25*B*(p-g)}if(!0===o.bolds){var f=e.indexOf(c)>-1,m=r.indexOf(c)>-1;!f&&m&&(n=v?n.replace("italic ","italic bold "):"bold "+n),f&&!m&&(n=n.replace("bold ",""))}if(!0===o.italics){var v=e.indexOf(u)>-1,x=r.indexOf(u)>-1;!v&&x&&(n="italic "+n),v&&!x&&(n=n.replace("italic ",""))}t.font=n}for(p=0;p<x;++p){var L=v[p]+"\n";for(m=0,y=p*B,b=n,Q="",f=0;f<L.length;++f){var _=f+w<h.length?h[f+w]:h[h.length-1];s===_?Q+=L[f]:(U(),Q=L[f],void 0!==_&&(E(s,_),s=_))}U(),w+=L.length;var T=0|Math.round(m+2*I);A<T&&(A=T)}var R=A,$=F+B*x;return i(t.getImageData(0,0,R,$).data,[$,R,4]).pick(-1,-1,0).transpose(1,0)}(t,r,e,a,o,s),n,a)},e.exports.processPixels=p;var n=r(4162),i=r(5050),a=r(8243),o=r(197),s=r(7761),l=r(8040),c="b|",u="i|";function d(e,t,r,n){for(var i="<"+e+">",a="</"+e+">",o=i.length,s=a.length,l="+"===t[0]||"-"===t[0],c=0,u=-s;c>-1&&-1!==(c=r.indexOf(i,c))&&-1!==(u=r.indexOf(a,c+o))&&!(u<=c);){for(var d=c;d<u+s;++d)if(d<c+o||d>=u)n[d]=null,r=r.substr(0,d)+" "+r.substr(d+1);else if(null!==n[d]){var h=n[d].indexOf(t[0]);-1===h?n[d]+=t:l&&(n[d]=n[d].substr(0,h+1)+(1+parseInt(n[d][h+1]))+n[d].substr(h+2))}var g=c+o,p=r.substr(g,u-g).indexOf(i);c=-1!==p?p:u+s}return n}function h(e,t){var r=n(e,128);return t?a(r.cells,r.positions,.25):{edges:r.cells,positions:r.positions}}function g(e,t,r,n){var i=h(e,n),a=function(e,t,r){for(var n=t.textAlign||"start",i=t.textBaseline||"alphabetic",a=[1<<30,1<<30],o=[0,0],s=e.length,l=0;l<s;++l)for(var c=e[l],u=0;u<2;++u)a[u]=0|Math.min(a[u],c[u]),o[u]=0|Math.max(o[u],c[u]);var d=0;switch(n){case"center":d=-.5*(a[0]+o[0]);break;case"right":case"end":d=-o[0];break;case"left":case"start":d=-a[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+n+"'")}var h=0;switch(i){case"hanging":case"top":h=-a[1];break;case"middle":h=-.5*(a[1]+o[1]);break;case"alphabetic":case"ideographic":h=-3*r;break;case"bottom":h=-o[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+i+"'")}var g=1/r;return"lineHeight"in t?g*=+t.lineHeight:"width"in t?g=t.width/(o[0]-a[0]):"height"in t&&(g=t.height/(o[1]-a[1])),e.map((function(e){return[g*(e[0]+d),g*(e[1]+h)]}))}(i.positions,t,r),c=i.edges,u="ccw"===t.orientation;if(o(a,c),t.polygons||t.polygon||t.polyline){for(var d=l(c,a),g=new Array(d.length),p=0;p<d.length;++p){for(var f=d[p],m=new Array(f.length),y=0;y<f.length;++y){for(var b=f[y],v=new Array(b.length),x=0;x<b.length;++x)v[x]=a[b[x]].slice();u&&v.reverse(),m[y]=v}g[p]=m}return g}return t.triangles||t.triangulate||t.triangle?{cells:s(a,c,{delaunay:!1,exterior:!1,interior:!0}),positions:a}:{edges:c,positions:a}}function p(e,t,r){try{return g(e,t,r,!0)}catch(e){}try{return g(e,t,r,!1)}catch(e){}return t.polygons||t.polyline||t.polygon?[]:t.triangles||t.triangulate||t.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},5346:function(e){!function(){if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=m);var t=!1;if("function"==typeof WeakMap){var r=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var n=new r,i=Object.freeze({});if(n.set(i,1),1===n.get(i))return void(e.exports=WeakMap);t=!0}}var a=Object.getOwnPropertyNames,o=Object.defineProperty,s=Object.isExtensible,l="weakmap:",c="weakmap:ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var u=new ArrayBuffer(25),d=new Uint8Array(u);crypto.getRandomValues(d),c="weakmap:rand:"+Array.prototype.map.call(d,(function(e){return(e%36).toString(36)})).join("")+"___"}if(o(Object,"getOwnPropertyNames",{value:function(e){return a(e).filter(y)}}),"getPropertyNames"in Object){var h=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(e){return h(e).filter(y)}})}!function(){var e=Object.freeze;o(Object,"freeze",{value:function(t){return b(t),e(t)}});var t=Object.seal;o(Object,"seal",{value:function(e){return b(e),t(e)}});var r=Object.preventExtensions;o(Object,"preventExtensions",{value:function(e){return b(e),r(e)}})}();var g=!1,p=0,f=function(){this instanceof f||x();var e=[],t=[],r=p++;return Object.create(f.prototype,{get___:{value:v((function(n,i){var a,o=b(n);return o?r in o?o[r]:i:(a=e.indexOf(n))>=0?t[a]:i}))},has___:{value:v((function(t){var n=b(t);return n?r in n:e.indexOf(t)>=0}))},set___:{value:v((function(n,i){var a,o=b(n);return o?o[r]=i:(a=e.indexOf(n))>=0?t[a]=i:(a=e.length,t[a]=i,e[a]=n),this}))},delete___:{value:v((function(n){var i,a,o=b(n);return o?r in o&&delete o[r]:!((i=e.indexOf(n))<0||(a=e.length-1,e[i]=void 0,t[i]=t[a],e[i]=e[a],e.length=a,t.length=a,0))}))}})};f.prototype=Object.create(Object.prototype,{get:{value:function(e,t){return this.get___(e,t)},writable:!0,configurable:!0},has:{value:function(e){return this.has___(e)},writable:!0,configurable:!0},set:{value:function(e,t){return this.set___(e,t)},writable:!0,configurable:!0},delete:{value:function(e){return this.delete___(e)},writable:!0,configurable:!0}}),"function"==typeof r?function(){function n(){this instanceof f||x();var e,n=new r,i=void 0,a=!1;return e=t?function(e,t){return n.set(e,t),n.has(e)||(i||(i=new f),i.set(e,t)),this}:function(e,t){if(a)try{n.set(e,t)}catch(r){i||(i=new f),i.set___(e,t)}else n.set(e,t);return this},Object.create(f.prototype,{get___:{value:v((function(e,t){return i?n.has(e)?n.get(e):i.get___(e,t):n.get(e,t)}))},has___:{value:v((function(e){return n.has(e)||!!i&&i.has___(e)}))},set___:{value:v(e)},delete___:{value:v((function(e){var t=!!n.delete(e);return i&&i.delete___(e)||t}))},permitHostObjects___:{value:v((function(e){if(e!==m)throw new Error("bogus call to permitHostObjects___");a=!0}))}})}t&&"undefined"!=typeof Proxy&&(Proxy=void 0),n.prototype=f.prototype,e.exports=n,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),e.exports=f)}function m(e){e.permitHostObjects___&&e.permitHostObjects___(m)}function y(e){return!(e.substr(0,l.length)==l&&"___"===e.substr(e.length-3))}function b(e){if(e!==Object(e))throw new TypeError("Not an object: "+e);var t=e[c];if(t&&t.key===e)return t;if(s(e)){t={key:e};try{return o(e,c,{value:t,writable:!1,enumerable:!1,configurable:!1}),t}catch(e){return}}}function v(e){return e.prototype=null,Object.freeze(e)}function x(){g||"undefined"==typeof console||(g=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},9222:function(e,t,r){var n=r(7178);e.exports=function(){var e={};return function(t){if(("object"!=typeof t||null===t)&&"function"!=typeof t)throw new Error("Weakmap-shim: Key must be object");var r=t.valueOf(e);return r&&r.identity===e?r:n(t,e)}}},7178:function(e){e.exports=function(e,t){var r={identity:t},n=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?n.apply(this,arguments):r},writable:!0}),r}},4037:function(e,t,r){var n=r(9222);e.exports=function(){var e=n();return{get:function(t,r){var n=e(t);return n.hasOwnProperty("value")?n.value:r},set:function(t,r){return e(t).value=r,this},has:function(t){return"value"in e(t)},delete:function(t){return delete e(t).value}}}},6183:function(e){var t,r=function(){return function(e,t,r,n,i,a){var o=e[0],s=r[0],l=[0],c=s;n|=0;var u=0,d=s;for(u=0;u<o;++u){var h=t[n]-a,g=t[n+c]-a;h>=0!=g>=0&&i.push(l[0]+.5+.5*(h+g)/(h-g)),n+=d,++l[0]}}};e.exports=(t={funcName:"zeroCrossings"},function(e){var t={};return function(r,n,i){var a=r.dtype,o=r.order,s=[a,o.join()].join(),l=t[s];return l||(t[s]=l=e([a,o])),l(r.shape.slice(0),r.data,r.stride,0|r.offset,n,i)}}(r.bind(void 0,t)))},9584:function(e,t,r){e.exports=function(e,t){var r=[];return t=+t||0,n(e.hi(e.shape[0]-1),r,t),r};var n=r(6183)},6601:function(){}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}return r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},r(7386)}()},stackgl_modules.exports=r()}();var colorName={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},names=colorName,colorParse=parse$1,baseHues={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function parse$1(e){var t,r,n=[],i=1;if("string"==typeof e)if(names[e])n=names[e].slice(),r="rgb";else if("transparent"===e)i=0,r="rgb",n=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(e)){var a=e.slice(1);i=1,(l=a.length)<=4?(n=[parseInt(a[0]+a[0],16),parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16)],4===l&&(i=parseInt(a[3]+a[3],16)/255)):(n=[parseInt(a[0]+a[1],16),parseInt(a[2]+a[3],16),parseInt(a[4]+a[5],16)],8===l&&(i=parseInt(a[6]+a[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),r="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(e)){var o=t[1],s="rgb"===o;r=a=o.replace(/a$/,"");var l="cmyk"===a?4:"gray"===a?1:3;n=t[2].trim().split(/\s*[,\/]\s*|\s+/).map((function(e,t){if(/%$/.test(e))return t===l?parseFloat(e)/100:"rgb"===a?255*parseFloat(e)/100:parseFloat(e);if("h"===a[t]){if(/deg$/.test(e))return parseFloat(e);if(void 0!==baseHues[e])return baseHues[e]}return parseFloat(e)})),o===a&&n.push(1),i=s||void 0===n[l]?1:n[l],n=n.slice(0,l)}else e.length>10&&/[0-9](?:\s|\/)/.test(e)&&(n=e.match(/([0-9]+)/g).map((function(e){return parseFloat(e)})),r=e.match(/([a-z])/gi).join("").toLowerCase());else isNaN(e)?Array.isArray(e)||e.length?(n=[e[0],e[1],e[2]],r="rgb",i=4===e.length?e[3]:1):e instanceof Object&&(null!=e.r||null!=e.red||null!=e.R?(r="rgb",n=[e.r||e.red||e.R||0,e.g||e.green||e.G||0,e.b||e.blue||e.B||0]):(r="hsl",n=[e.h||e.hue||e.H||0,e.s||e.saturation||e.S||0,e.l||e.lightness||e.L||e.b||e.brightness]),i=e.a||e.alpha||e.opacity||1,null!=e.opacity&&(i/=100)):(r="rgb",n=[e>>>16,(65280&e)>>>8,255&e]);return{space:r,values:n,alpha:i}}var rgb$2={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},rgb$1=rgb$2,hsl$1={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t,r,n,i,a,o=e[0]/360,s=e[1]/100,l=e[2]/100;if(0===s)return[a=255*l,a,a];t=2*l-(r=l<.5?l*(1+s):l+s-l*s),i=[0,0,0];for(var c=0;c<3;c++)(n=o+1/3*-(c-1))<0?n++:n>1&&n--,a=6*n<1?t+6*(r-t)*n:2*n<1?r:3*n<2?t+(r-t)*(2/3-n)*6:t,i[c]=255*a;return i}};rgb$1.hsl=function(e){var t,r,n=e[0]/255,i=e[1]/255,a=e[2]/255,o=Math.min(n,i,a),s=Math.max(n,i,a),l=s-o;return s===o?t=0:n===s?t=(i-a)/l:i===s?t=2+(a-n)/l:a===s&&(t=4+(n-i)/l),(t=Math.min(60*t,360))<0&&(t+=360),r=(o+s)/2,[t,100*(s===o?0:r<=.5?l/(s+o):l/(2-s-o)),100*r]};var parse=colorParse,rgb=rgb$2,hsl=hsl$1,colorRgba=function(e){var t;Array.isArray(e)&&e.raw&&(e=String.raw.apply(null,arguments));var r=parse(e);if(!r.space)return[];var n="h"===r.space[0]?hsl.min:rgb.min,i="h"===r.space[0]?hsl.max:rgb.max;return(t=Array(3))[0]=Math.min(Math.max(r.values[0],n[0]),i[0]),t[1]=Math.min(Math.max(r.values[1],n[1]),i[1]),t[2]=Math.min(Math.max(r.values[2],n[2]),i[2]),"h"===r.space[0]&&(t=hsl.rgb(t)),t.push(Math.min(Math.max(r.alpha,0),1)),t},clamp_1=clamp$1;function clamp$1(e,t,r){return t<r?e<t?t:e>r?r:e:e<r?r:e>t?t:e}var dtype$1=function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}},rgba$2=colorRgba,clamp=clamp_1,dtype=dtype$1,colorNormalize=function(e,t){"float"!==t&&t||(t="array"),"uint"===t&&(t="uint8"),"uint_clamped"===t&&(t="uint8_clamped");var r=new(dtype(t))(4),n="uint8"!==t&&"uint8_clamped"!==t;return e.length&&"string"!=typeof e||((e=rgba$2(e))[0]/=255,e[1]/=255,e[2]/=255),isInt(e)?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=null!=e[3]?e[3]:255,n&&(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255),r):(n?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=null!=e[3]?e[3]:1):(r[0]=clamp(Math.floor(255*e[0]),0,255),r[1]=clamp(Math.floor(255*e[1]),0,255),r[2]=clamp(Math.floor(255*e[2]),0,255),r[3]=null==e[3]?255:clamp(Math.floor(255*e[3]),0,255)),r)};function isInt(e){return e instanceof Uint8Array||e instanceof Uint8ClampedArray||!!(Array.isArray(e)&&(e[0]>1||0===e[0])&&(e[1]>1||0===e[1])&&(e[2]>1||0===e[2])&&(!e[3]||e[3]>1))}var isNumeric=fastIsnumeric,tinycolor=tinycolorExports,rgba$1=colorNormalize,Colorscale=colorscale,colorDflt=attributes$L.defaultLine,isArrayOrTypedArray=array.isArrayOrTypedArray,colorDfltRgba=rgba$1(colorDflt),opacityDflt=1;function calculateColor(e,t){var r=e;return r[3]*=t,r}function validateColor(e){if(isNumeric(e))return colorDfltRgba;var t=rgba$1(e);return t.length?t:colorDfltRgba}function validateOpacity(e){return isNumeric(e)?e:opacityDflt}function formatColor$1(e,t,r){var n,i,a,o,s,l=e.color,c=isArrayOrTypedArray(l),u=isArrayOrTypedArray(t),d=Colorscale.extractOpts(e),h=[];if(n=void 0!==d.colorscale?Colorscale.makeColorScaleFuncFromTrace(e):validateColor,i=c?function(e,t){return void 0===e[t]?colorDfltRgba:rgba$1(n(e[t]))}:validateColor,a=u?function(e,t){return void 0===e[t]?opacityDflt:validateOpacity(e[t])}:validateOpacity,c||u)for(var g=0;g<r;g++)o=i(l,g),s=a(t,g),h[g]=calculateColor(o,s);else h=calculateColor(rgba$1(l),t);return h}function parseColorScale$1(e){var t=Colorscale.extractOpts(e),r=t.colorscale;return t.reversescale&&(r=Colorscale.flipScale(t.colorscale)),r.map((function(e){var t=e[0],r=tinycolor(e[1]).toRgb();return{index:t,rgb:[r.r,r.g,r.b,r.a]}}))}var gl_format_color={formatColor:formatColor$1,parseColorScale:parseColorScale$1},rgba=colorNormalize;function str2RgbaArray$2(e){return e?rgba(e):[0,0,0,1]}var str2rgbarray=str2RgbaArray$2,zip3$1=function(e,t,r,n){n=n||e.length;for(var i=new Array(n),a=0;a<n;a++)i[a]=[e[a],t[a],r[a]];return i},createMesh$1=stackgl_modulesExports.gl_mesh3d,parseColorScale=gl_format_color.parseColorScale,str2RgbaArray$1=str2rgbarray,extractOpts=colorscale.extractOpts,zip3=zip3$1,findNearestOnAxis=function(e,t){for(var r=t.length-1;r>0;r--){var n=Math.min(t[r],t[r-1]),i=Math.max(t[r],t[r-1]);if(i>n&&n<e&&e<=i)return{id:r,distRatio:(i-e)/(i-n)}}return{id:0,distRatio:0}};function IsosurfaceTrace(e,t,r){this.scene=e,this.uid=r,this.mesh=t,this.name="",this.data=null,this.showContour=!1}var proto$2=IsosurfaceTrace.prototype;proto$2.handlePick=function(e){if(e.object===this.mesh){var t=e.data.index,r=this.data._meshX[t],n=this.data._meshY[t],i=this.data._meshZ[t],a=this.data._Ys.length,o=this.data._Zs.length,s=findNearestOnAxis(r,this.data._Xs).id,l=findNearestOnAxis(n,this.data._Ys).id,c=findNearestOnAxis(i,this.data._Zs).id,u=e.index=c+o*l+o*a*s;e.traceCoordinate=[this.data._meshX[u],this.data._meshY[u],this.data._meshZ[u],this.data._value[u]];var d=this.data.hovertext||this.data.text;return Array.isArray(d)&&void 0!==d[u]?e.textLabel=d[u]:d&&(e.textLabel=d),!0}},proto$2.update=function(e){var t=this.scene,r=t.fullSceneLayout;function n(e,t,r,n){return t.map((function(t){return e.d2l(t,0,n)*r}))}this.data=generateIsoMeshes(e);var i={positions:zip3(n(r.xaxis,e._meshX,t.dataScale[0],e.xcalendar),n(r.yaxis,e._meshY,t.dataScale[1],e.ycalendar),n(r.zaxis,e._meshZ,t.dataScale[2],e.zcalendar)),cells:zip3(e._meshI,e._meshJ,e._meshK),lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,contourEnable:e.contour.show,contourColor:str2RgbaArray$1(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading},a=extractOpts(e);i.vertexIntensity=e._meshIntensity,i.vertexIntensityBounds=[a.min,a.max],i.colormap=parseColorScale(e),this.mesh.update(i)},proto$2.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var GRID_TYPES=["xyz","xzy","yxz","yzx","zxy","zyx"];function generateIsoMeshes(e){e._meshI=[],e._meshJ=[],e._meshK=[];var t,r,n,i,a,o,s,l=e.surface.show,c=e.spaceframe.show,u=e.surface.fill,d=e.spaceframe.fill,h=!1,g=!1,p=0,f=e._Xs,m=e._Ys,y=e._Zs,b=f.length,v=m.length,x=y.length,B=GRID_TYPES.indexOf(e._gridFill.replace(/-/g,"").replace(/\+/g,"")),I=function(e,t,r){switch(B){case 5:return r+x*t+x*v*e;case 4:return r+x*e+x*b*t;case 3:return t+v*r+v*x*e;case 2:return t+v*e+v*b*r;case 1:return e+b*r+b*x*t;default:return e+b*t+b*v*r}},F=e._minValues,A=e._maxValues,C=e._vMin,w=e._vMax;function Q(e,t,s){for(var l=o.length,c=r;c<l;c++)if(e===n[c]&&t===i[c]&&s===a[c])return c;return-1}function U(){r=t}function S(){n=[],i=[],a=[],o=[],t=0,U()}function E(e,r,s,l){return n.push(e),i.push(r),a.push(s),o.push(l),++t-1}function L(t,r,n){return e._meshI.push(t),e._meshJ.push(r),e._meshK.push(n),++p-1}function _(e,t,r){for(var n=[],i=0;i<e.length;i++)n[i]=e[i]*(1-r)+r*t[i];return n}function T(e){s=e}function R(e,t){return"all"===e||null===e||e.indexOf(t)>-1}function $(e,t){return null===e?t:e}function k(e,t,r){U();var n=[t],i=[r];if(s>=1)n=[t],i=[r];else if(s>0){var a=function(e,t){var r=e[0],n=e[1],i=e[2],a=function(e,t,r){for(var n=[],i=0;i<e.length;i++)n[i]=(e[i]+t[i]+r[i])/3;return n}(r,n,i),o=Math.sqrt(1-s),l=_(a,r,o),c=_(a,n,o),u=_(a,i,o),d=t[0],h=t[1],g=t[2];return{xyzv:[[r,n,c],[c,l,r],[n,i,u],[u,c,n],[i,r,l],[l,u,i]],abc:[[d,h,-1],[-1,-1,d],[h,g,-1],[-1,-1,h],[g,d,-1],[-1,-1,g]]}}(t,r);n=a.xyzv,i=a.abc}for(var o=0;o<n.length;o++){t=n[o],r=i[o];for(var l=[],c=0;c<3;c++){var u=t[c][0],d=t[c][1],h=t[c][2],g=t[c][3],p=r[c]>-1?r[c]:Q(u,d,h);l[c]=p>-1?p:E(u,d,h,$(e,g))}L(l[0],l[1],l[2])}}function N(e,t,r,n){var i=e[3];i<r&&(i=r),i>n&&(i=n);for(var a=(e[3]-i)/(e[3]-t[3]+1e-9),o=[],s=0;s<4;s++)o[s]=(1-a)*e[s]+a*t[s];return o}function G(e,t,r){return e>=t&&e<=r}function M(e){var t=.001*(w-C);return e>=C-t&&e<=w+t}function D(t){for(var r=[],n=0;n<4;n++){var i=t[n];r.push([e._x[i],e._y[i],e._z[i],e._value[i]])}return r}function V(e,t,r,n,i,a){a||(a=1),r=[-1,-1,-1];var o=!1,s=[G(t[0][3],n,i),G(t[1][3],n,i),G(t[2][3],n,i)];if(!s[0]&&!s[1]&&!s[2])return!1;var l=function(e,t,r){return M(t[0][3])&&M(t[1][3])&&M(t[2][3])?(k(e,t,r),!0):a<3&&V(e,t,r,C,w,++a)};if(s[0]&&s[1]&&s[2])return l(e,t,r)||o;var c=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach((function(a){if(s[a[0]]&&s[a[1]]&&!s[a[2]]){var u=t[a[0]],d=t[a[1]],h=t[a[2]],g=N(h,u,n,i),p=N(h,d,n,i);o=l(e,[p,g,u],[-1,-1,r[a[0]]])||o,o=l(e,[u,d,p],[r[a[0]],r[a[1]],-1])||o,c=!0}})),c||[[0,1,2],[1,2,0],[2,0,1]].forEach((function(a){if(s[a[0]]&&!s[a[1]]&&!s[a[2]]){var u=t[a[0]],d=t[a[1]],h=t[a[2]],g=N(d,u,n,i),p=N(h,u,n,i);o=l(e,[p,g,u],[-1,-1,r[a[0]]])||o,c=!0}})),o}function H(e,t,r,n){var i=!1,a=D(t),o=[G(a[0][3],r,n),G(a[1][3],r,n),G(a[2][3],r,n),G(a[3][3],r,n)];if(!(o[0]||o[1]||o[2]||o[3]))return i;if(o[0]&&o[1]&&o[2]&&o[3])return g&&(i=function(e,t,r){var n=function(n,i,a){k(e,[t[n],t[i],t[a]],[r[n],r[i],r[a]])};n(0,1,2),n(3,0,1),n(2,3,0),n(1,2,3)}(e,a,t)||i),i;var s=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach((function(l){if(o[l[0]]&&o[l[1]]&&o[l[2]]&&!o[l[3]]){var c=a[l[0]],u=a[l[1]],d=a[l[2]],h=a[l[3]];if(g)i=k(e,[c,u,d],[t[l[0]],t[l[1]],t[l[2]]])||i;else{var p=N(h,c,r,n),f=N(h,u,r,n),m=N(h,d,r,n);i=k(null,[p,f,m],[-1,-1,-1])||i}s=!0}})),s?i:([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach((function(l){if(o[l[0]]&&o[l[1]]&&!o[l[2]]&&!o[l[3]]){var c=a[l[0]],u=a[l[1]],d=a[l[2]],h=a[l[3]],p=N(d,c,r,n),f=N(d,u,r,n),m=N(h,u,r,n),y=N(h,c,r,n);g?(i=k(e,[c,y,p],[t[l[0]],-1,-1])||i,i=k(e,[u,f,m],[t[l[1]],-1,-1])||i):i=function(e,t,r){var n=function(n,i,a){k(e,[t[n],t[i],t[a]],[r[n],r[i],r[a]])};n(0,1,2),n(2,3,0)}(null,[p,f,m,y],[-1,-1,-1,-1])||i,s=!0}})),s||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach((function(l){if(o[l[0]]&&!o[l[1]]&&!o[l[2]]&&!o[l[3]]){var c=a[l[0]],u=a[l[1]],d=a[l[2]],h=a[l[3]],p=N(u,c,r,n),f=N(d,c,r,n),m=N(h,c,r,n);g?(i=k(e,[c,p,f],[t[l[0]],-1,-1])||i,i=k(e,[c,f,m],[t[l[0]],-1,-1])||i,i=k(e,[c,m,p],[t[l[0]],-1,-1])||i):i=k(null,[p,f,m],[-1,-1,-1])||i,s=!0}})),i)}function X(e,t,r,n,i,a,o,s,l,c,u){var d=!1;return h&&(R(e,"A")&&(d=H(null,[t,r,n,a],c,u)||d),R(e,"B")&&(d=H(null,[r,n,i,l],c,u)||d),R(e,"C")&&(d=H(null,[r,a,o,l],c,u)||d),R(e,"D")&&(d=H(null,[n,a,s,l],c,u)||d),R(e,"E")&&(d=H(null,[r,n,a,l],c,u)||d)),g&&(d=H(e,[r,n,a,l],c,u)||d),d}function O(e,t,r,n,i,a,o,s){return[!0===s[0]||V(e,D([t,r,n]),[t,r,n],a,o),!0===s[1]||V(e,D([n,i,t]),[n,i,t],a,o)]}function Z(e,t,r,n,i,a,o,s,l){return s?O(e,t,r,i,n,a,o,l):O(e,r,i,n,t,a,o,l)}function W(e,t,r,n,i,a,o){var s,l,c,u,d=!1,h=function(){d=V(e,[s,l,c],[-1,-1,-1],i,a)||d,d=V(e,[c,u,s],[-1,-1,-1],i,a)||d},g=o[0],p=o[1],f=o[2];return g&&(s=_(D([I(t,r-0,n-0)])[0],D([I(t-1,r-0,n-0)])[0],g),l=_(D([I(t,r-0,n-1)])[0],D([I(t-1,r-0,n-1)])[0],g),c=_(D([I(t,r-1,n-1)])[0],D([I(t-1,r-1,n-1)])[0],g),u=_(D([I(t,r-1,n-0)])[0],D([I(t-1,r-1,n-0)])[0],g),h()),p&&(s=_(D([I(t-0,r,n-0)])[0],D([I(t-0,r-1,n-0)])[0],p),l=_(D([I(t-0,r,n-1)])[0],D([I(t-0,r-1,n-1)])[0],p),c=_(D([I(t-1,r,n-1)])[0],D([I(t-1,r-1,n-1)])[0],p),u=_(D([I(t-1,r,n-0)])[0],D([I(t-1,r-1,n-0)])[0],p),h()),f&&(s=_(D([I(t-0,r-0,n)])[0],D([I(t-0,r-0,n-1)])[0],f),l=_(D([I(t-0,r-1,n)])[0],D([I(t-0,r-1,n-1)])[0],f),c=_(D([I(t-1,r-1,n)])[0],D([I(t-1,r-1,n-1)])[0],f),u=_(D([I(t-1,r-0,n)])[0],D([I(t-1,r-0,n-1)])[0],f),h()),d}function Y(e,t,r,n,i,a,o,s,l,c,u,d){var g=e;return d?(h&&"even"===e&&(g=null),X(g,t,r,n,i,a,o,s,l,c,u)):(h&&"odd"===e&&(g=null),X(g,l,s,o,a,i,n,r,t,c,u))}function P(e,t,r,n,i){for(var a=[],o=0,s=0;s<t.length;s++)for(var l=t[s],c=1;c<x;c++)for(var u=1;u<v;u++)a.push(Z(e,I(l,u-1,c-1),I(l,u-1,c),I(l,u,c-1),I(l,u,c),r,n,(l+u+c)%2,i&&i[o]?i[o]:[])),o++;return a}function z(e,t,r,n,i){for(var a=[],o=0,s=0;s<t.length;s++)for(var l=t[s],c=1;c<b;c++)for(var u=1;u<x;u++)a.push(Z(e,I(c-1,l,u-1),I(c,l,u-1),I(c-1,l,u),I(c,l,u),r,n,(c+l+u)%2,i&&i[o]?i[o]:[])),o++;return a}function J(e,t,r,n,i){for(var a=[],o=0,s=0;s<t.length;s++)for(var l=t[s],c=1;c<v;c++)for(var u=1;u<b;u++)a.push(Z(e,I(u-1,c-1,l),I(u-1,c,l),I(u,c-1,l),I(u,c,l),r,n,(u+c+l)%2,i&&i[o]?i[o]:[])),o++;return a}function j(e,t,r){for(var n=1;n<x;n++)for(var i=1;i<v;i++)for(var a=1;a<b;a++)Y(e,I(a-1,i-1,n-1),I(a-1,i-1,n),I(a-1,i,n-1),I(a-1,i,n),I(a,i-1,n-1),I(a,i-1,n),I(a,i,n-1),I(a,i,n),t,r,(a+i+n)%2)}function K(e,t,r){h=!0,j(e,t,r),h=!1}function q(e,t,r,n,i,a){for(var o=[],s=0,l=0;l<t.length;l++)for(var c=t[l],u=1;u<x;u++)for(var d=1;d<v;d++)o.push(W(e,c,d,u,r,n,i[l],a&&a[s]&&a[s])),s++;return o}function ee(e,t,r,n,i,a){for(var o=[],s=0,l=0;l<t.length;l++)for(var c=t[l],u=1;u<b;u++)for(var d=1;d<x;d++)o.push(W(e,u,c,d,r,n,i[l],a&&a[s]&&a[s])),s++;return o}function te(e,t,r,n,i,a){for(var o=[],s=0,l=0;l<t.length;l++)for(var c=t[l],u=1;u<v;u++)for(var d=1;d<b;d++)o.push(W(e,d,u,c,r,n,i[l],a&&a[s]&&a[s])),s++;return o}function re(e,t){for(var r=[],n=e;n<t;n++)r.push(n);return r}return function(){S(),function(){for(var t=0;t<b;t++)for(var r=0;r<v;r++)for(var n=0;n<x;n++){var i=I(t,r,n);E(e._x[i],e._y[i],e._z[i],e._value[i])}}();var t=null;if(c&&d&&(T(d),function(e,t,r){g=!0,j(e,t,r),g=!1}(t,C,w)),l&&u){T(u);for(var r=e.surface.pattern,s=e.surface.count,h=0;h<s;h++){var B=1===s?.5:h/(s-1),Q=(1-B)*C+B*w,U=Math.abs(Q-F)>Math.abs(Q-A)?[F,Q]:[Q,A];K(r,U[0],U[1])}}var L=[[Math.min(C,A),Math.max(C,A)],[Math.min(F,w),Math.max(F,w)]];["x","y","z"].forEach((function(r){for(var n=[],i=0;i<L.length;i++){var a=0,o=L[i][0],s=L[i][1],l=e.slices[r];if(l.show&&l.fill){T(l.fill);var c=[],u=[],d=[];if(l.locations.length)for(var h=0;h<l.locations.length;h++){var g=findNearestOnAxis(l.locations[h],"x"===r?f:"y"===r?m:y);0===g.distRatio?c.push(g.id):g.id>0&&(u.push(g.id),"x"===r?d.push([g.distRatio,0,0]):"y"===r?d.push([0,g.distRatio,0]):d.push([0,0,g.distRatio]))}else c=re(1,"x"===r?b-1:"y"===r?v-1:x-1);u.length>0&&(n[a]="x"===r?q(t,u,o,s,d,n[a]):"y"===r?ee(t,u,o,s,d,n[a]):te(t,u,o,s,d,n[a]),a++),c.length>0&&(n[a]="x"===r?P(t,c,o,s,n[a]):"y"===r?z(t,c,o,s,n[a]):J(t,c,o,s,n[a]),a++)}var p=e.caps[r];p.show&&p.fill&&(T(p.fill),n[a]="x"===r?P(t,[0,b-1],o,s,n[a]):"y"===r?z(t,[0,v-1],o,s,n[a]):J(t,[0,x-1],o,s,n[a]),a++)}})),0===p&&S(),e._meshX=n,e._meshY=i,e._meshZ=a,e._meshIntensity=o,e._Xs=f,e._Ys=m,e._Zs=y}(),e}function createIsosurfaceTrace(e,t){var r=e.glplot.gl,n=createMesh$1({gl:r}),i=new IsosurfaceTrace(e,n,t.uid);return n._trace=i,i.update(t),e.glplot.add(n),i}var convert$2={findNearestOnAxis:findNearestOnAxis,generateIsoMeshes:generateIsoMeshes,createIsosurfaceTrace:createIsosurfaceTrace},gl3d={},getCanvasContext_1=getCanvasContext;function getCanvasContext(e,t){if("string"!=typeof e)throw new TypeError("must specify type string");if(t=t||{},"undefined"==typeof document&&!t.canvas)return null;var r=t.canvas||document.createElement("canvas");"number"==typeof t.width&&(r.width=t.width),"number"==typeof t.height&&(r.height=t.height);var n,i=t;try{var a=[e];0===e.indexOf("webgl")&&a.push("experimental-"+e);for(var o=0;o<a.length;o++)if(n=r.getContext(a[o],i))return n}catch(e){n=null}return n||null}var show_no_webgl_msg,hasRequiredShow_no_webgl_msg,convert$1,hasRequiredConvert,spikes,hasRequiredSpikes,tick_marks,hasRequiredTick_marks,getContext$1=getCanvasContext_1,webglContext=function(e){return getContext$1("webgl",e)};function requireShow_no_webgl_msg(){if(hasRequiredShow_no_webgl_msg)return show_no_webgl_msg;hasRequiredShow_no_webgl_msg=1;var e=colorExports,t=function(){};return show_no_webgl_msg=function(r){for(var n in r)"function"==typeof r[n]&&(r[n]=t);r.destroy=function(){r.container.parentNode.removeChild(r.container)};var i=document.createElement("div");i.className="no-webgl",i.style.cursor="pointer",i.style.fontSize="24px",i.style.color=e.defaults[0],i.style.position="absolute",i.style.left=i.style.top="0px",i.style.width=i.style.height="100%",i.style["background-color"]=e.lightLine,i.style["z-index"]=30;var a=document.createElement("p");return a.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",a.style.position="relative",a.style.top="50%",a.style.left="50%",a.style.height="30%",a.style.width="50%",a.style.margin="-15% 0 0 -25%",i.appendChild(a),r.container.appendChild(i),r.container.style.background="#FFFFFF",r.container.onclick=function(){window.open("https://get.webgl.org")},!1},show_no_webgl_msg}function requireConvert(){if(hasRequiredConvert)return convert$1;hasRequiredConvert=1;var e=str2rgbarray,t=libExports,r=["xaxis","yaxis","zaxis"];function n(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}return n.prototype.merge=function(n,i){for(var a=this,o=0;o<3;++o){var s=i[r[o]];s.visible?(a.labels[o]=n._meta?t.templateString(s.title.text,n._meta):s.title.text,"font"in s.title&&(s.title.font.color&&(a.labelColor[o]=e(s.title.font.color)),s.title.font.family&&(a.labelFont[o]=s.title.font.family),s.title.font.size&&(a.labelSize[o]=s.title.font.size)),"showline"in s&&(a.lineEnable[o]=s.showline),"linecolor"in s&&(a.lineColor[o]=e(s.linecolor)),"linewidth"in s&&(a.lineWidth[o]=s.linewidth),"showgrid"in s&&(a.gridEnable[o]=s.showgrid),"gridcolor"in s&&(a.gridColor[o]=e(s.gridcolor)),"gridwidth"in s&&(a.gridWidth[o]=s.gridwidth),"log"===s.type?a.zeroEnable[o]=!1:"zeroline"in s&&(a.zeroEnable[o]=s.zeroline),"zerolinecolor"in s&&(a.zeroLineColor[o]=e(s.zerolinecolor)),"zerolinewidth"in s&&(a.zeroLineWidth[o]=s.zerolinewidth),"ticks"in s&&s.ticks?a.lineTickEnable[o]=!0:a.lineTickEnable[o]=!1,"ticklen"in s&&(a.lineTickLength[o]=a._defaultLineTickLength[o]=s.ticklen),"tickcolor"in s&&(a.lineTickColor[o]=e(s.tickcolor)),"tickwidth"in s&&(a.lineTickWidth[o]=s.tickwidth),"tickangle"in s&&(a.tickAngle[o]="auto"===s.tickangle?-3600:Math.PI*-s.tickangle/180),"showticklabels"in s&&(a.tickEnable[o]=s.showticklabels),"tickfont"in s&&(s.tickfont.color&&(a.tickColor[o]=e(s.tickfont.color)),s.tickfont.family&&(a.tickFont[o]=s.tickfont.family),s.tickfont.size&&(a.tickSize[o]=s.tickfont.size)),"mirror"in s?-1!==["ticks","all","allticks"].indexOf(s.mirror)?(a.lineTickMirror[o]=!0,a.lineMirror[o]=!0):!0===s.mirror?(a.lineTickMirror[o]=!1,a.lineMirror[o]=!0):(a.lineTickMirror[o]=!1,a.lineMirror[o]=!1):a.lineMirror[o]=!1,"showbackground"in s&&!1!==s.showbackground?(a.backgroundEnable[o]=!0,a.backgroundColor[o]=e(s.backgroundcolor)):a.backgroundEnable[o]=!1):(a.tickEnable[o]=!1,a.labelEnable[o]=!1,a.lineEnable[o]=!1,a.lineTickEnable[o]=!1,a.gridEnable[o]=!1,a.zeroEnable[o]=!1,a.backgroundEnable[o]=!1)}},convert$1=function(e,t){var r=new n;return r.merge(e,t),r}}function requireSpikes(){if(hasRequiredSpikes)return spikes;hasRequiredSpikes=1;var e=str2rgbarray,t=["xaxis","yaxis","zaxis"];function r(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}return r.prototype.merge=function(r){for(var n=0;n<3;++n){var i=r[t[n]];i.visible?(this.enabled[n]=i.showspikes,this.colors[n]=e(i.spikecolor),this.drawSides[n]=i.spikesides,this.lineWidth[n]=i.spikethickness):(this.enabled[n]=!1,this.drawSides[n]=!1)}},spikes=function(e){var t=new r;return t.merge(e),t}}function requireTick_marks(){if(hasRequiredTick_marks)return tick_marks;hasRequiredTick_marks=1,tick_marks=function(n){for(var i=n.axesOptions,a=n.glplot.axesPixels,o=n.fullSceneLayout,s=[[],[],[]],l=0;l<3;++l){var c=o[r[l]];if(c._length=(a[l].hi-a[l].lo)*a[l].pixelsPerDataUnit/n.dataScale[l],Math.abs(c._length)===1/0||isNaN(c._length))s[l]=[];else{c._input_range=c.range.slice(),c.range[0]=a[l].lo/n.dataScale[l],c.range[1]=a[l].hi/n.dataScale[l],c._m=1/(n.dataScale[l]*a[l].pixelsPerDataUnit),c.range[0]===c.range[1]&&(c.range[0]-=1,c.range[1]+=1);var u=c.tickmode;if("auto"===c.tickmode){c.tickmode="linear";var d=c.nticks||t.constrain(c._length/40,4,9);e.autoTicks(c,Math.abs(c.range[1]-c.range[0])/d)}for(var h=e.calcTicks(c,{msUTC:!0}),g=0;g<h.length;++g)h[g].x=h[g].x*n.dataScale[l],"date"===c.type&&(h[g].text=h[g].text.replace(/\<br\>/g," "));s[l]=h,c.tickmode=u}}i.ticks=s;for(l=0;l<3;++l){n.glplot.bounds[0][l],n.glplot.bounds[1][l];for(g=0;g<2;++g)i.bounds[g][l]=n.glplot.bounds[g][l]}n.contourLevels=function(e){for(var t=new Array(3),r=0;r<3;++r){for(var n=e[r],i=new Array(n.length),a=0;a<n.length;++a)i[a]=n[a].x;t[r]=i}return t}(s)};var e=axesExports,t=libExports,r=["xaxis","yaxis","zaxis"];return tick_marks}var STATIC_CANVAS,STATIC_CONTEXT,glPlot3d=stackgl_modulesExports.gl_plot3d,createCamera=glPlot3d.createCamera,createPlot=glPlot3d.createScene,getContext=webglContext,Registry$2=registry,Lib$3=libExports,preserveDrawingBuffer=Lib$3.preserveDrawingBuffer(),Axes$1=axesExports,Fx=fx,str2RGBAarray=str2rgbarray,showNoWebGlMsg=requireShow_no_webgl_msg(),project=project_1,createAxesOptions=requireConvert(),createSpikeOptions=requireSpikes(),computeTickMarks=requireTick_marks();function Scene$1(e,t){var r=document.createElement("div"),n=e.container;this.graphDiv=e.graphDiv;var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.style.position="absolute",i.style.top=i.style.left="0px",i.style.width=i.style.height="100%",i.style["z-index"]=20,i.style["pointer-events"]="none",r.appendChild(i),this.svgContainer=i,r.id=e.id,r.style.position="absolute",r.style.top=r.style.left="0px",r.style.width=r.style.height="100%",n.appendChild(r),this.fullLayout=t,this.id=e.id||"scene",this.fullSceneLayout=t[this.id],this.plotArgs=[[],{},{}],this.axesOptions=createAxesOptions(t,t[this.id]),this.spikeOptions=createSpikeOptions(t[this.id]),this.container=r,this.staticMode=!!e.staticPlot,this.pixelRatio=this.pixelRatio||e.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=Registry$2.getComponentMethod("annotations3d","convert"),this.drawAnnotations=Registry$2.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var proto$1=Scene$1.prototype;proto$1.prepareOptions=function(){var e=this,t={canvas:e.canvas,gl:e.gl,glOptions:{preserveDrawingBuffer:preserveDrawingBuffer,premultipliedAlpha:!0,antialias:!0},container:e.container,axes:e.axesOptions,spikes:e.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:e.camera,pixelRatio:e.pixelRatio};if(e.staticMode){if(!(STATIC_CONTEXT||(STATIC_CANVAS=document.createElement("canvas"),STATIC_CONTEXT=getContext({canvas:STATIC_CANVAS,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");t.gl=STATIC_CONTEXT,t.canvas=STATIC_CANVAS}return t};var firstInit=!0;proto$1.tryCreatePlot=function(){var e=this,t=e.prepareOptions(),r=!0;try{e.glplot=createPlot(t)}catch(n){if(e.staticMode||!firstInit||preserveDrawingBuffer)r=!1;else{Lib$3.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{preserveDrawingBuffer=t.glOptions.preserveDrawingBuffer=!0,e.glplot=createPlot(t)}catch(e){preserveDrawingBuffer=t.glOptions.preserveDrawingBuffer=!1,r=!1}}}return firstInit=!1,r},proto$1.initializeGLCamera=function(){var e=this,t=e.fullSceneLayout.camera,r="orthographic"===t.projection.type;e.camera=createCamera(e.container,{center:[t.center.x,t.center.y,t.center.z],eye:[t.eye.x,t.eye.y,t.eye.z],up:[t.up.x,t.up.y,t.up.z],_ortho:r,zoomMin:.01,zoomMax:100,mode:"orbit"})},proto$1.initializeGLPlot=function(){var e=this;if(e.initializeGLCamera(),!e.tryCreatePlot())return showNoWebGlMsg(e);e.traces={},e.make4thDimension();var t=e.graphDiv,r=t.layout,n=function(){var t={};return e.isCameraChanged(r)&&(t[e.id+".camera"]=e.getCamera()),e.isAspectChanged(r)&&(t[e.id+".aspectratio"]=e.glplot.getAspectratio(),"manual"!==r[e.id].aspectmode&&(e.fullSceneLayout.aspectmode=r[e.id].aspectmode=t[e.id+".aspectmode"]="manual")),t},i=function(e){if(!1!==e.fullSceneLayout.dragmode){var t=n();e.saveLayout(r),e.graphDiv.emit("plotly_relayout",t)}};return e.glplot.canvas&&(e.glplot.canvas.addEventListener("mouseup",(function(){i(e)})),e.glplot.canvas.addEventListener("wheel",(function(r){if(t._context._scrollZoom.gl3d){if(e.camera._ortho){var n=r.deltaX>r.deltaY?1.1:1/1.1,a=e.glplot.getAspectratio();e.glplot.setAspectratio({x:n*a.x,y:n*a.y,z:n*a.z})}i(e)}}),!1),e.glplot.canvas.addEventListener("mousemove",(function(){if(!1!==e.fullSceneLayout.dragmode&&0!==e.camera.mouseListener.buttons){var t=n();e.graphDiv.emit("plotly_relayouting",t)}})),e.staticMode||e.glplot.canvas.addEventListener("webglcontextlost",(function(r){t&&t.emit&&t.emit("plotly_webglcontextlost",{event:r,layer:e.id})}),!1)),e.glplot.oncontextloss=function(){e.recoverContext()},e.glplot.onrender=function(){e.render()},!0},proto$1.render=function(){var e,t=this,r=t.graphDiv,n=t.svgContainer,i=t.container.getBoundingClientRect();r._fullLayout._calcInverseTransform(r);var a=r._fullLayout._invScaleX,o=r._fullLayout._invScaleY,s=i.width*a,l=i.height*o;n.setAttributeNS(null,"viewBox","0 0 "+s+" "+l),n.setAttributeNS(null,"width",s),n.setAttributeNS(null,"height",l),computeTickMarks(t),t.glplot.axes.update(t.axesOptions);for(var c=Object.keys(t.traces),u=null,d=t.glplot.selection,h=0;h<c.length;++h)"skip"!==(e=t.traces[c[h]]).data.hoverinfo&&e.handlePick(d)&&(u=e),e.setContourLevels&&e.setContourLevels();function g(e,r,n){var i=t.fullSceneLayout[e+"axis"];return"log"!==i.type&&(r=i.d2l(r)),Axes$1.hoverLabelText(i,r,n)}if(null!==u){var p=project(t.glplot.cameraParams,d.dataCoordinate);e=u.data;var f,m=r._fullData[e.index],y=d.index,b={xLabel:g("x",d.traceCoordinate[0],e.xhoverformat),yLabel:g("y",d.traceCoordinate[1],e.yhoverformat),zLabel:g("z",d.traceCoordinate[2],e.zhoverformat)},v=Fx.castHoverinfo(m,t.fullLayout,y),x=(v||"").split("+"),B=v&&"all"===v;m.hovertemplate||B||(-1===x.indexOf("x")&&(b.xLabel=void 0),-1===x.indexOf("y")&&(b.yLabel=void 0),-1===x.indexOf("z")&&(b.zLabel=void 0),-1===x.indexOf("text")&&(d.textLabel=void 0),-1===x.indexOf("name")&&(u.name=void 0));var I=[];"cone"===e.type||"streamtube"===e.type?(b.uLabel=g("x",d.traceCoordinate[3],e.uhoverformat),(B||-1!==x.indexOf("u"))&&I.push("u: "+b.uLabel),b.vLabel=g("y",d.traceCoordinate[4],e.vhoverformat),(B||-1!==x.indexOf("v"))&&I.push("v: "+b.vLabel),b.wLabel=g("z",d.traceCoordinate[5],e.whoverformat),(B||-1!==x.indexOf("w"))&&I.push("w: "+b.wLabel),b.normLabel=d.traceCoordinate[6].toPrecision(3),(B||-1!==x.indexOf("norm"))&&I.push("norm: "+b.normLabel),"streamtube"===e.type&&(b.divergenceLabel=d.traceCoordinate[7].toPrecision(3),(B||-1!==x.indexOf("divergence"))&&I.push("divergence: "+b.divergenceLabel)),d.textLabel&&I.push(d.textLabel),f=I.join("<br>")):"isosurface"===e.type||"volume"===e.type?(b.valueLabel=Axes$1.hoverLabelText(t._mockAxis,t._mockAxis.d2l(d.traceCoordinate[3]),e.valuehoverformat),I.push("value: "+b.valueLabel),d.textLabel&&I.push(d.textLabel),f=I.join("<br>")):f=d.textLabel;var F={x:d.traceCoordinate[0],y:d.traceCoordinate[1],z:d.traceCoordinate[2],data:m._input,fullData:m,curveNumber:m.index,pointNumber:y};Fx.appendArrayPointValue(F,m,y),e._module.eventData&&(F=m._module.eventData(F,d,m,{},y));var A={points:[F]};if(t.fullSceneLayout.hovermode){var C=[];Fx.loneHover({trace:m,x:(.5+.5*p[0]/p[3])*s,y:(.5-.5*p[1]/p[3])*l,xLabel:b.xLabel,yLabel:b.yLabel,zLabel:b.zLabel,text:f,name:u.name,color:Fx.castHoverOption(m,y,"bgcolor")||u.color,borderColor:Fx.castHoverOption(m,y,"bordercolor"),fontFamily:Fx.castHoverOption(m,y,"font.family"),fontSize:Fx.castHoverOption(m,y,"font.size"),fontColor:Fx.castHoverOption(m,y,"font.color"),nameLength:Fx.castHoverOption(m,y,"namelength"),textAlign:Fx.castHoverOption(m,y,"align"),hovertemplate:Lib$3.castOption(m,y,"hovertemplate"),hovertemplateLabels:Lib$3.extendFlat({},F,b),eventData:[F]},{container:n,gd:r,inOut_bbox:C}),F.bbox=C[0]}d.buttons&&d.distance<5?r.emit("plotly_click",A):r.emit("plotly_hover",A),this.oldEventData=A}else Fx.loneUnhover(n),this.oldEventData&&r.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;t.drawAnnotations(t)},proto$1.recoverContext=function(){var e=this;e.glplot.dispose();var t=function(){e.glplot.gl.isContextLost()?requestAnimationFrame(t):e.initializeGLPlot()?e.plot.apply(e,e.plotArgs):Lib$3.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(t)};var axisProperties=["xaxis","yaxis","zaxis"];function computeTraceBounds(e,t,r){for(var n=e.fullSceneLayout,i=0;i<3;i++){var a=axisProperties[i],o=a.charAt(0),s=n[a],l=t[o],c=t[o+"calendar"],u=t["_"+o+"length"];if(Lib$3.isArrayOrTypedArray(l))for(var d,h=0;h<(u||l.length);h++)if(Lib$3.isArrayOrTypedArray(l[h]))for(var g=0;g<l[h].length;++g)d=s.d2l(l[h][g],0,c),!isNaN(d)&&isFinite(d)&&(r[0][i]=Math.min(r[0][i],d),r[1][i]=Math.max(r[1][i],d));else d=s.d2l(l[h],0,c),!isNaN(d)&&isFinite(d)&&(r[0][i]=Math.min(r[0][i],d),r[1][i]=Math.max(r[1][i],d));else r[0][i]=Math.min(r[0][i],0),r[1][i]=Math.max(r[1][i],u-1)}}function computeAnnotationBounds(e,t){for(var r=e.fullSceneLayout,n=r.annotations||[],i=0;i<3;i++)for(var a=axisProperties[i],o=a.charAt(0),s=r[a],l=0;l<n.length;l++){var c=n[l];if(c.visible){var u=s.r2l(c[o]);!isNaN(u)&&isFinite(u)&&(t[0][i]=Math.min(t[0][i],u),t[1][i]=Math.max(t[1][i],u))}}}function getCameraArrays(e){return[[e.eye.x,e.eye.y,e.eye.z],[e.center.x,e.center.y,e.center.z],[e.up.x,e.up.y,e.up.z]]}function getLayoutCamera(e){return{up:{x:e.up[0],y:e.up[1],z:e.up[2]},center:{x:e.center[0],y:e.center[1],z:e.center[2]},eye:{x:e.eye[0],y:e.eye[1],z:e.eye[2]},projection:{type:!0===e._ortho?"orthographic":"perspective"}}}function flipPixels(e,t,r){for(var n=0,i=r-1;n<i;++n,--i)for(var a=0;a<t;++a)for(var o=0;o<4;++o){var s=4*(t*n+a)+o,l=4*(t*i+a)+o,c=e[s];e[s]=e[l],e[l]=c}}function correctRGB(e,t,r){for(var n=0;n<r;++n)for(var i=0;i<t;++i){var a=4*(t*n+i),o=e[a+3];if(o>0)for(var s=255/o,l=0;l<3;++l)e[a+l]=Math.min(s*e[a+l],255)}}proto$1.plot=function(e,t,r){var n=this;if(n.plotArgs=[e,t,r],!n.glplot.contextLost){var i,a,o,s,l,c,u=t[n.id],d=r[n.id];n.fullLayout=t,n.fullSceneLayout=u,n.axesOptions.merge(t,u),n.spikeOptions.merge(u),n.setViewport(u),n.updateFx(u.dragmode,u.hovermode),n.camera.enableWheel=n.graphDiv._context._scrollZoom.gl3d,n.glplot.setClearColor(str2RGBAarray(u.bgcolor)),n.setConvert(l),e?Array.isArray(e)||(e=[e]):e=[];var h=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(o=0;o<e.length;++o)!0===(i=e[o]).visible&&0!==i._length&&computeTraceBounds(this,i,h);computeAnnotationBounds(this,h);var g=[1,1,1];for(s=0;s<3;++s)h[1][s]===h[0][s]?g[s]=1:g[s]=1/(h[1][s]-h[0][s]);for(n.dataScale=g,n.convertAnnotations(this),o=0;o<e.length;++o)!0===(i=e[o]).visible&&0!==i._length&&((a=n.traces[i.uid])?a.data.type===i.type?a.update(i):(a.dispose(),a=i._module.plot(this,i),n.traces[i.uid]=a):(a=i._module.plot(this,i),n.traces[i.uid]=a),a.name=i.name);var p=Object.keys(n.traces);e:for(o=0;o<p.length;++o){for(s=0;s<e.length;++s)if(e[s].uid===p[o]&&!0===e[s].visible&&0!==e[s]._length)continue e;(a=n.traces[p[o]]).dispose(),delete n.traces[p[o]]}n.glplot.objects.sort((function(e,t){return e._trace.data.index-t._trace.data.index}));var f,m=[[0,0,0],[0,0,0]],y={};for(o=0;o<3;++o){if((c=(l=u[axisProperties[o]]).type)in y?(y[c].acc*=g[o],y[c].count+=1):y[c]={acc:g[o],count:1},l.autorange){m[0][o]=1/0,m[1][o]=-1/0;var b=n.glplot.objects,v=n.fullSceneLayout.annotations||[],x=l._name.charAt(0);for(s=0;s<b.length;s++){var B=b[s],I=B.bounds,F=B._trace.data._pad||0;"ErrorBars"===B.constructor.name&&l._lowerLogErrorBound?m[0][o]=Math.min(m[0][o],l._lowerLogErrorBound):m[0][o]=Math.min(m[0][o],I[0][o]/g[o]-F),m[1][o]=Math.max(m[1][o],I[1][o]/g[o]+F)}for(s=0;s<v.length;s++){var A=v[s];if(A.visible){var C=l.r2l(A[x]);m[0][o]=Math.min(m[0][o],C),m[1][o]=Math.max(m[1][o],C)}}if("rangemode"in l&&"tozero"===l.rangemode&&(m[0][o]=Math.min(m[0][o],0),m[1][o]=Math.max(m[1][o],0)),m[0][o]>m[1][o])m[0][o]=-1,m[1][o]=1;else{var w=m[1][o]-m[0][o];m[0][o]-=w/32,m[1][o]+=w/32}if("reversed"===l.autorange){var Q=m[0][o];m[0][o]=m[1][o],m[1][o]=Q}}else{var U=l.range;m[0][o]=l.r2l(U[0]),m[1][o]=l.r2l(U[1])}m[0][o]===m[1][o]&&(m[0][o]-=1,m[1][o]+=1),n.glplot.setBounds(o,{min:m[0][o]*g[o],max:m[1][o]*g[o]})}var S=u.aspectmode;if("cube"===S)f=[1,1,1];else if("manual"===S){var E=u.aspectratio;f=[E.x,E.y,E.z]}else{if("auto"!==S&&"data"!==S)throw new Error("scene.js aspectRatio was not one of the enumerated types");var L=[1,1,1];for(o=0;o<3;++o){var _=y[c=(l=u[axisProperties[o]]).type];L[o]=Math.pow(_.acc,1/_.count)/g[o]}f="data"===S||Math.max.apply(null,L)/Math.min.apply(null,L)<=4?L:[1,1,1]}u.aspectratio.x=d.aspectratio.x=f[0],u.aspectratio.y=d.aspectratio.y=f[1],u.aspectratio.z=d.aspectratio.z=f[2],n.glplot.setAspectratio(u.aspectratio),n.viewInitial.aspectratio||(n.viewInitial.aspectratio={x:u.aspectratio.x,y:u.aspectratio.y,z:u.aspectratio.z}),n.viewInitial.aspectmode||(n.viewInitial.aspectmode=u.aspectmode);var T=u.domain||null,R=t._size||null;if(T&&R){var $=n.container.style;$.position="absolute",$.left=R.l+T.x[0]*R.w+"px",$.top=R.t+(1-T.y[1])*R.h+"px",$.width=R.w*(T.x[1]-T.x[0])+"px",$.height=R.h*(T.y[1]-T.y[0])+"px"}n.glplot.redraw()}},proto$1.destroy=function(){var e=this;e.glplot&&(e.camera.mouseListener.enabled=!1,e.container.removeEventListener("wheel",e.camera.wheelListener),e.camera=null,e.glplot.dispose(),e.container.parentNode.removeChild(e.container),e.glplot=null)},proto$1.getCamera=function(){var e=this;return e.camera.view.recalcMatrix(e.camera.view.lastT()),getLayoutCamera(e.camera)},proto$1.setViewport=function(e){var t=this,r=e.camera;t.camera.lookAt.apply(this,getCameraArrays(r)),t.glplot.setAspectratio(e.aspectratio),"orthographic"===r.projection.type!==t.camera._ortho&&(t.glplot.redraw(),t.glplot.clearRGBA(),t.glplot.dispose(),t.initializeGLPlot())},proto$1.isCameraChanged=function(e){var t=this.getCamera(),r=Lib$3.nestedProperty(e,this.id+".camera").get();function n(e,t,r,n){var i=["up","center","eye"],a=["x","y","z"];return t[i[r]]&&e[i[r]][a[n]]===t[i[r]][a[n]]}var i=!1;if(void 0===r)i=!0;else{for(var a=0;a<3;a++)for(var o=0;o<3;o++)if(!n(t,r,a,o)){i=!0;break}(!r.projection||t.projection&&t.projection.type!==r.projection.type)&&(i=!0)}return i},proto$1.isAspectChanged=function(e){var t=this.glplot.getAspectratio(),r=Lib$3.nestedProperty(e,this.id+".aspectratio").get();return void 0===r||r.x!==t.x||r.y!==t.y||r.z!==t.z},proto$1.saveLayout=function(e){var t,r,n,i,a,o,s=this,l=s.fullLayout,c=s.isCameraChanged(e),u=s.isAspectChanged(e),d=c||u;if(d){var h={};if(c&&(t=s.getCamera(),n=(r=Lib$3.nestedProperty(e,s.id+".camera")).get(),h[s.id+".camera"]=n),u&&(i=s.glplot.getAspectratio(),o=(a=Lib$3.nestedProperty(e,s.id+".aspectratio")).get(),h[s.id+".aspectratio"]=o),Registry$2.call("_storeDirectGUIEdit",e,l._preGUI,h),c)r.set(t),Lib$3.nestedProperty(l,s.id+".camera").set(t);if(u)a.set(i),Lib$3.nestedProperty(l,s.id+".aspectratio").set(i),s.glplot.redraw()}return d},proto$1.updateFx=function(e,t){var r=this,n=r.camera;if(n)if("orbit"===e)n.mode="orbit",n.keyBindingMode="rotate";else if("turntable"===e){n.up=[0,0,1],n.mode="turntable",n.keyBindingMode="rotate";var i=r.graphDiv,a=i._fullLayout,o=r.fullSceneLayout.camera,s=o.up.x,l=o.up.y,c=o.up.z;if(c/Math.sqrt(s*s+l*l+c*c)<.999){var u=r.id+".camera.up",d={x:0,y:0,z:1},h={};h[u]=d;var g=i.layout;Registry$2.call("_storeDirectGUIEdit",g,a._preGUI,h),o.up=d,Lib$3.nestedProperty(g,u).set(d)}}else n.keyBindingMode=e;r.fullSceneLayout.hovermode=t},proto$1.toImage=function(e){var t=this;e||(e="png"),t.staticMode&&t.container.appendChild(STATIC_CANVAS),t.glplot.redraw();var r=t.glplot.gl,n=r.drawingBufferWidth,i=r.drawingBufferHeight;r.bindFramebuffer(r.FRAMEBUFFER,null);var a=new Uint8Array(n*i*4);r.readPixels(0,0,n,i,r.RGBA,r.UNSIGNED_BYTE,a),flipPixels(a,n,i),correctRGB(a,n,i);var o=document.createElement("canvas");o.width=n,o.height=i;var s,l=o.getContext("2d",{willReadFrequently:!0}),c=l.createImageData(n,i);switch(c.data.set(a),l.putImageData(c,0,0),e){case"jpeg":s=o.toDataURL("image/jpeg");break;case"webp":s=o.toDataURL("image/webp");break;default:s=o.toDataURL("image/png")}return t.staticMode&&t.container.removeChild(STATIC_CANVAS),s},proto$1.setConvert=function(){for(var e=0;e<3;e++){var t=this.fullSceneLayout[axisProperties[e]];Axes$1.setConvert(t,this.fullLayout),t.setScale=Lib$3.noop}},proto$1.make4thDimension=function(){var e=this,t=e.graphDiv._fullLayout;e._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},Axes$1.setConvert(e._mockAxis,t)};var attributes$2,hasRequiredAttributes,axis_attributes,hasRequiredAxis_attributes,layout_attributes,hasRequiredLayout_attributes,subplot_defaults,hasRequiredSubplot_defaults,axis_defaults,hasRequiredAxis_defaults,defaults$1,hasRequiredDefaults,scene=Scene$1;function requireAttributes(){return hasRequiredAttributes?attributes$2:(hasRequiredAttributes=1,attributes$2={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's 3D coordinate system and","a 3D scene.","If *scene* (the default value), the (x,y,z) coordinates refer to","`layout.scene`.","If *scene2*, the (x,y,z) coordinates refer to `layout.scene2`,","and so on."].join(" ")}})}function requireAxis_attributes(){if(hasRequiredAxis_attributes)return axis_attributes;hasRequiredAxis_attributes=1;var e=colorExports,t=layout_attributes$3,r=extend.extendFlat,n=edit_types.overrideAll;return axis_attributes=n({visible:t.visible,showspikes:{valType:"boolean",dflt:!0,description:["Sets whether or not spikes starting from","data points to this axis' wall are shown on hover."].join(" ")},spikesides:{valType:"boolean",dflt:!0,description:["Sets whether or not spikes extending from the","projection data points to this axis' wall boundaries","are shown on hover."].join(" ")},spikethickness:{valType:"number",min:0,dflt:2,description:"Sets the thickness (in px) of the spikes."},spikecolor:{valType:"color",dflt:e.defaultLine,description:"Sets the color of the spikes."},showbackground:{valType:"boolean",dflt:!1,description:["Sets whether or not this axis' wall","has a background color."].join(" ")},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)",description:"Sets the background color of this axis' wall."},showaxeslabels:{valType:"boolean",dflt:!0,description:"Sets whether or not this axis is labeled"},color:t.color,categoryorder:t.categoryorder,categoryarray:t.categoryarray,title:{text:t.title.text,font:t.title.font},type:r({},t.type,{values:["-","linear","log","date","category"]}),autotypenumbers:t.autotypenumbers,autorange:t.autorange,rangemode:t.rangemode,range:r({},t.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:t.minor.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,mirror:t.mirror,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,labelalias:t.labelalias,tickfont:t.tickfont,tickangle:t.tickangle,tickprefix:t.tickprefix,showtickprefix:t.showtickprefix,ticksuffix:t.ticksuffix,showticksuffix:t.showticksuffix,showexponent:t.showexponent,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,tickformat:t.tickformat,tickformatstops:t.tickformatstops,hoverformat:t.hoverformat,showline:t.showline,linecolor:t.linecolor,linewidth:t.linewidth,showgrid:t.showgrid,gridcolor:r({},t.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:t.gridwidth,zeroline:t.zeroline,zerolinecolor:t.zerolinecolor,zerolinewidth:t.zerolinewidth,_deprecated:{title:t._deprecated.title,titlefont:t._deprecated.titlefont}},"plot","from-root")}function requireLayout_attributes(){if(hasRequiredLayout_attributes)return layout_attributes;hasRequiredLayout_attributes=1;var e=requireAxis_attributes(),t=domain.attributes,r=extend.extendFlat,n=libExports.counterRegex;function i(e,t,r){return{x:{valType:"number",dflt:e,editType:"camera"},y:{valType:"number",dflt:t,editType:"camera"},z:{valType:"number",dflt:r,editType:"camera"},editType:"camera"}}return layout_attributes={_arrayAttrRegexps:[n("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:r(i(0,0,1),{description:["Sets the (x,y,z) components of the 'up' camera vector.","This vector determines the up direction of this scene","with respect to the page.","The default is *{x: 0, y: 0, z: 1}* which means that","the z axis points up."].join(" ")}),center:r(i(0,0,0),{description:["Sets the (x,y,z) components of the 'center' camera vector","This vector determines the translation (x,y,z) space","about the center of this scene.","By default, there is no such translation."].join(" ")}),eye:r(i(1.25,1.25,1.25),{description:["Sets the (x,y,z) components of the 'eye' camera vector.","This vector determines the view point about the origin","of this scene."].join(" ")}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc",description:["Sets the projection type. The projection type could be","either *perspective* or *orthographic*. The default is","*perspective*."].join(" ")},editType:"calc"},editType:"camera"},domain:t({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0},description:["If *cube*, this scene's axes are drawn as a cube,","regardless of the axes' ranges.","If *data*, this scene's axes are drawn","in proportion with the axes' ranges.","If *manual*, this scene's axes are drawn","in proportion with the input of *aspectratio*","(the default behavior if *aspectratio* is provided).","If *auto*, this scene's axes are drawn","using the results of *data* except when one axis","is more than four times the size of the two others,","where in that case the results of *cube* are used."].join(" ")},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"},description:["Sets this scene's axis aspectratio."].join(" ")},xaxis:e,yaxis:e,zaxis:e,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot",description:["Determines the mode of drag interactions for this scene."].join(" ")},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar",description:["Determines the mode of hover interactions for this scene."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in camera attributes.","Defaults to `layout.uirevision`."].join(" ")},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera",description:"Obsolete. Use `camera` instead."}}}}function requireSubplot_defaults(){if(hasRequiredSubplot_defaults)return subplot_defaults;hasRequiredSubplot_defaults=1;var e=libExports,t=plot_template,r=domain.defaults;return subplot_defaults=function(n,i,a,o){var s,l,c=o.type,u=o.attributes,d=o.handleDefaults,h=o.partition||"x",g=i._subplots[c],p=g.length,f=p&&g[0].replace(/\d+$/,"");function m(t,r){return e.coerce(s,l,u,t,r)}for(var y=0;y<p;y++){var b=g[y];s=n[b]?n[b]:n[b]={},l=t.newContainer(i,b,f),o.noUirevision||m("uirevision",i.uirevision);var v={};v[h]=[y/p,(y+1)/p],r(l,i,m,v),o.id=b,d(s,l,m,o)}},subplot_defaults}function requireAxis_defaults(){if(hasRequiredAxis_defaults)return axis_defaults;hasRequiredAxis_defaults=1;var e=tinycolorExports.mix,t=libExports,r=plot_template,n=requireAxis_attributes(),i=requireType_defaults(),a=axis_defaults$1,o=["xaxis","yaxis","zaxis"];return axis_defaults=function(s,l,c){var u,d;function h(e,r){return t.coerce(u,d,n,e,r)}for(var g=0;g<o.length;g++){var p=o[g];u=s[p]||{},(d=r.newContainer(l,p))._id=p[0]+c.scene,d._name=p,i(u,d,h,c),a(u,d,h,{font:c.font,letter:p[0],data:c.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:c.bgColor,calendar:c.calendar},c.fullLayout),h("gridcolor",e(d.color,c.bgColor,72.72727272727273).toRgbString()),h("title.text",p[0]),d.setScale=t.noop,h("showspikes")&&(h("spikesides"),h("spikethickness"),h("spikecolor",d.color)),h("showaxeslabels"),h("showbackground")&&h("backgroundcolor")}},axis_defaults}function requireDefaults(){if(hasRequiredDefaults)return defaults$1;hasRequiredDefaults=1;var e=libExports,t=colorExports,r=registry,n=requireSubplot_defaults(),i=requireAxis_defaults(),a=requireLayout_attributes(),o=get_data.getSubplotData,s="gl3d";function l(e,n,a,l){for(var c=a("bgcolor"),u=t.combine(c,l.paper_bgcolor),d=["up","center","eye"],h=0;h<d.length;h++)a("camera."+d[h]+".x"),a("camera."+d[h]+".y"),a("camera."+d[h]+".z");a("camera.projection.type");var g=!!a("aspectratio.x")&&!!a("aspectratio.y")&&!!a("aspectratio.z"),p=a("aspectmode",g?"manual":"auto");g||(e.aspectratio=n.aspectratio={x:1,y:1,z:1},"manual"===p&&(n.aspectmode="auto"),e.aspectmode=n.aspectmode);var f=o(l.fullData,s,l.id);i(e,n,{font:l.font,scene:l.id,data:f,bgColor:u,calendar:l.calendar,autotypenumbersDflt:l.autotypenumbersDflt,fullLayout:l.fullLayout}),r.getComponentMethod("annotations3d","handleDefaults")(e,n,l);var m=l.getDfltFromLayout("dragmode");if(!1!==m&&!m)if(m="orbit",e.camera&&e.camera.up){var y=e.camera.up.x,b=e.camera.up.y,v=e.camera.up.z;0!==v&&(y&&b&&v?v/Math.sqrt(y*y+b*b+v*v)>.999&&(m="turntable"):m="turntable")}else m="turntable";a("dragmode",m),a("hovermode",l.getDfltFromLayout("hovermode"))}return defaults$1=function(t,r,i){var o=r._basePlotModules.length>1;n(t,r,i,{type:s,attributes:a,handleDefaults:l,fullLayout:r,font:r.font,fullData:i,getDfltFromLayout:function(r){if(!o)return e.validate(t[r],a[r])?t[r]:void 0},autotypenumbersDflt:r.autotypenumbers,paper_bgcolor:r.paper_bgcolor,calendar:r.calendar})}}var overrideAll$1=edit_types.overrideAll,fxAttrs=layout_attributes$6,Scene=scene,getSubplotData=get_data.getSubplotData,Lib$2=libExports,xmlnsNamespaces=xmlns_namespaces,GL3D="gl3d",SCENE="scene";gl3d.name=GL3D,gl3d.attr=SCENE,gl3d.idRoot=SCENE,gl3d.idRegex=gl3d.attrRegex=Lib$2.counterRegex("scene"),gl3d.attributes=requireAttributes(),gl3d.layoutAttributes=requireLayout_attributes(),gl3d.baseLayoutAttrOverrides=overrideAll$1({hoverlabel:fxAttrs.hoverlabel},"plot","nested"),gl3d.supplyLayoutDefaults=requireDefaults(),gl3d.plot=function(e){for(var t=e._fullLayout,r=e._fullData,n=t._subplots[GL3D],i=0;i<n.length;i++){var a=n[i],o=getSubplotData(r,GL3D,a),s=t[a],l=s.camera,c=s._scene;c||(c=new Scene({id:a,graphDiv:e,container:e.querySelector(".gl-container"),staticPlot:e._context.staticPlot,plotGlPixelRatio:e._context.plotGlPixelRatio,camera:l},t),s._scene=c),c.viewInitial||(c.viewInitial={up:{x:l.up.x,y:l.up.y,z:l.up.z},eye:{x:l.eye.x,y:l.eye.y,z:l.eye.z},center:{x:l.center.x,y:l.center.y,z:l.center.z}}),c.plot(o,t,e.layout)}},gl3d.clean=function(e,t,r,n){for(var i=n._subplots[GL3D]||[],a=0;a<i.length;a++){var o=i[a];!t[o]&&n[o]._scene&&(n[o]._scene.destroy(),n._infolayer&&n._infolayer.selectAll(".annotation-"+o).remove())}},gl3d.toSVG=function(e){for(var t=e._fullLayout,r=t._subplots[GL3D],n=t._size,i=0;i<r.length;i++){var a=t[r[i]],o=a.domain,s=a._scene,l=s.toImage("png");t._glimages.append("svg:image").attr({xmlns:xmlnsNamespaces.svg,"xlink:href":l,x:n.l+n.w*o.x[0],y:n.t+n.h*(1-o.y[1]),width:n.w*(o.x[1]-o.x[0]),height:n.h*(o.y[1]-o.y[0]),preserveAspectRatio:"none"}),s.destroy()}},gl3d.cleanId=function(e){if(e.match(/^scene[0-9]*$/)){var t=e.substr(5);return"1"===t&&(t=""),SCENE+t}},gl3d.updateFx=function(e){for(var t=e._fullLayout,r=t._subplots[GL3D],n=0;n<r.length;n++){t[r[n]]._scene.updateFx(t.dragmode,t.hovermode)}};var isosurface$1={attributes:attributesExports$2,supplyDefaults:defaults$2.supplyDefaults,calc:calc$1,colorbar:{min:"cmin",max:"cmax"},plot:convert$2.createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:gl3d,categories:["gl3d","showLegend"],meta:{description:["Draws isosurfaces between iso-min and iso-max values with coordinates given by","four 1-dimensional arrays containing the `value`, `x`, `y` and `z` of every vertex","of a uniform or non-uniform 3-D grid. Horizontal or vertical slices, caps as well as","spaceframe between iso-min and iso-max values could also be drawn using this trace."].join(" ")}};isosurface$2.exports=isosurface$1;var isosurface=getDefaultExportFromCjs(isosurfaceExports),PlotlyIsoSurface=_mergeNamespaces({__proto__:null,default:isosurface},[isosurfaceExports]),scatter3dExports={},scatter3d$2={get exports(){return scatter3dExports},set exports(e){scatter3dExports=e}},gl3d_dashes={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]},gl3d_markers={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"},Registry$1=registry;function calculateAxisErrors(e,t,r,n){if(!t||!t.visible)return null;for(var i=Registry$1.getComponentMethod("errorbars","makeComputeError")(t),a=new Array(e.length),o=0;o<e.length;o++){var s=i(+e[o],o);if("log"===n.type){var l=n.c2l(e[o]),c=e[o]-s[0],u=e[o]+s[1];if(a[o]=[(n.c2l(c,!0)-l)*r,(n.c2l(u,!0)-l)*r],c>0){var d=n.c2l(c);n._lowerLogErrorBound||(n._lowerLogErrorBound=d),n._lowerErrorBound=Math.min(n._lowerLogErrorBound,d)}}else a[o]=[-s[0]*r,s[1]*r]}return a}function dataLength(e){for(var t=0;t<e.length;t++)if(e[t])return e[t].length;return 0}function calculateErrors(e,t,r){var n=[calculateAxisErrors(e.x,e.error_x,t[0],r.xaxis),calculateAxisErrors(e.y,e.error_y,t[1],r.yaxis),calculateAxisErrors(e.z,e.error_z,t[2],r.zaxis)],i=dataLength(n);if(0===i)return null;for(var a=new Array(i),o=0;o<i;o++){for(var s=[[0,0,0],[0,0,0]],l=0;l<3;l++)if(n[l])for(var c=0;c<2;c++)s[c][l]=n[l][o][c];a[o]=s}return a}var calc_errors=calculateErrors,createLinePlot=stackgl_modulesExports.gl_line3d,createScatterPlot=stackgl_modulesExports.gl_scatter3d,createErrorBars=stackgl_modulesExports.gl_error3d,createMesh=stackgl_modulesExports.gl_mesh3d,triangulate=stackgl_modulesExports.delaunay_triangulate,Lib$1=libExports,str2RgbaArray=str2rgbarray,formatColor=gl_format_color.formatColor,makeBubbleSizeFn=make_bubble_size_func,DASH_PATTERNS=gl3d_dashes,MARKER_SYMBOLS$1=gl3d_markers,Axes=axesExports,appendArrayPointValue=helpers$y.appendArrayPointValue,calculateError=calc_errors;function LineWithMarkers(e,t){this.scene=e,this.uid=t,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var proto=LineWithMarkers.prototype;function constructDelaunay(e,t,r){var n,i=(r+1)%3,a=(r+2)%3,o=[],s=[];for(n=0;n<e.length;++n){var l=e[n];!isNaN(l[i])&&isFinite(l[i])&&!isNaN(l[a])&&isFinite(l[a])&&(o.push([l[i],l[a]]),s.push(n))}var c=triangulate(o);for(n=0;n<c.length;++n)for(var u=c[n],d=0;d<u.length;++d)u[d]=s[u[d]];return{positions:e,cells:c,meshColor:t}}function calculateErrorParams(e){for(var t=[0,0,0],r=[[0,0,0],[0,0,0],[0,0,0]],n=[1,1,1],i=0;i<3;i++){var a=e[i];a&&!1!==a.copy_zstyle&&!1!==e[2].visible&&(a=e[2]),a&&a.visible&&(t[i]=a.width/2,r[i]=str2RgbaArray(a.color),n[i]=a.thickness)}return{capSize:t,color:r,lineWidth:n}}function parseAlignmentX(e){return null==e?0:e.indexOf("left")>-1?-1:e.indexOf("right")>-1?1:0}function parseAlignmentY(e){return null==e?0:e.indexOf("top")>-1?-1:e.indexOf("bottom")>-1?1:0}function calculateTextOffset(e){var t=[0,0];if(Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=[0,0],e[r]&&(t[r][0]=parseAlignmentX(e[r]),t[r][1]=parseAlignmentY(e[r]));else t[0]=parseAlignmentX(e),t[1]=parseAlignmentY(e);return t}function calculateSize(e,t){return t(4*e)}function calculateSymbol(e){return MARKER_SYMBOLS$1[e]}function formatParam(e,t,r,n,i){var a=null;if(Lib$1.isArrayOrTypedArray(e)){a=[];for(var o=0;o<t;o++)void 0===e[o]?a[o]=n:a[o]=r(e[o],i)}else a=r(e,Lib$1.identity);return a}function convertPlotlyOptions(e,t){var r,n,i,a,o,s,l=[],c=e.fullSceneLayout,u=e.dataScale,d=c.xaxis,h=c.yaxis,g=c.zaxis,p=t.marker,f=t.line,m=t.x||[],y=t.y||[],b=t.z||[],v=m.length,x=t.xcalendar,B=t.ycalendar,I=t.zcalendar;for(o=0;o<v;o++)r=d.d2l(m[o],0,x)*u[0],n=h.d2l(y[o],0,B)*u[1],i=g.d2l(b[o],0,I)*u[2],l[o]=[r,n,i];if(Array.isArray(t.text))s=t.text;else if(void 0!==t.text)for(s=new Array(v),o=0;o<v;o++)s[o]=t.text;function F(e,t){var r=c[e];return Axes.tickText(r,r.d2l(t),!0).text}var A=t.texttemplate;if(A){var C=e.fullLayout._d3locale,w=Array.isArray(A),Q=w?Math.min(A.length,v):v,U=w?function(e){return A[e]}:function(){return A};for(s=new Array(Q),o=0;o<Q;o++){var S={x:m[o],y:y[o],z:b[o]},E={xLabel:F("xaxis",m[o]),yLabel:F("yaxis",y[o]),zLabel:F("zaxis",b[o])},L={};appendArrayPointValue(L,t,o);var _=t._meta||{};s[o]=Lib$1.texttemplateString(U(o),E,C,L,S,_)}}if(a={position:l,mode:t.mode,text:s},"line"in t&&(a.lineColor=formatColor(f,1,v),a.lineWidth=f.width,a.lineDashes=f.dash),"marker"in t){var T=makeBubbleSizeFn(t);a.scatterColor=formatColor(p,1,v),a.scatterSize=formatParam(p.size,v,calculateSize,20,T),a.scatterMarker=formatParam(p.symbol,v,calculateSymbol,"●"),a.scatterLineWidth=p.line.width,a.scatterLineColor=formatColor(p.line,1,v),a.scatterAngle=0}"textposition"in t&&(a.textOffset=calculateTextOffset(t.textposition),a.textColor=formatColor(t.textfont,1,v),a.textSize=formatParam(t.textfont.size,v,Lib$1.identity,12),a.textFont=t.textfont.family,a.textAngle=0);var R=["x","y","z"];for(a.project=[!1,!1,!1],a.projectScale=[1,1,1],a.projectOpacity=[1,1,1],o=0;o<3;++o){var $=t.projection[R[o]];(a.project[o]=$.show)&&(a.projectOpacity[o]=$.opacity,a.projectScale[o]=$.scale)}a.errorBounds=calculateError(t,u,c);var k=calculateErrorParams([t.error_x,t.error_y,t.error_z]);return a.errorColor=k.color,a.errorLineWidth=k.lineWidth,a.errorCapSize=k.capSize,a.delaunayAxis=t.surfaceaxis,a.delaunayColor=str2RgbaArray(t.surfacecolor),a}function _arrayToColor(e){if(Lib$1.isArrayOrTypedArray(e)){var t=e[0];return Lib$1.isArrayOrTypedArray(t)&&(e=t),"rgb("+e.slice(0,3).map((function(e){return Math.round(255*e)}))+")"}return null}function arrayToColor(e){return Lib$1.isArrayOrTypedArray(e)?4===e.length&&"number"==typeof e[0]?_arrayToColor(e):e.map(_arrayToColor):null}function createLineWithMarkers(e,t){var r=new LineWithMarkers(e,t.uid);return r.update(t),r}proto.handlePick=function(e){if(e.object&&(e.object===this.linePlot||e.object===this.delaunayMesh||e.object===this.textMarkers||e.object===this.scatterPlot)){var t=e.index=e.data.index;return e.object.highlight&&e.object.highlight(null),this.scatterPlot&&(e.object=this.scatterPlot,this.scatterPlot.highlight(e.data)),e.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[t]||0===this.textLabels[t])&&(e.textLabel=this.textLabels[t]):e.textLabel=this.textLabels),e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]],!0}},proto.update=function(e){var t,r,n,i,a=this.scene.glplot.gl,o=DASH_PATTERNS.solid;this.data=e;var s=convertPlotlyOptions(this.scene,e);"mode"in s&&(this.mode=s.mode),"lineDashes"in s&&s.lineDashes in DASH_PATTERNS&&(o=DASH_PATTERNS[s.lineDashes]),this.color=arrayToColor(s.scatterColor)||arrayToColor(s.lineColor),this.dataPoints=s.position,t={gl:this.scene.glplot.gl,position:s.position,color:s.lineColor,lineWidth:s.lineWidth||1,dashes:o[0],dashScale:o[1],opacity:e.opacity,connectGaps:e.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(t):(this.linePlot=createLinePlot(t),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var l=e.opacity;if(e.marker&&e.marker.opacity&&(l*=e.marker.opacity),r={gl:this.scene.glplot.gl,position:s.position,color:s.scatterColor,size:s.scatterSize,glyph:s.scatterMarker,opacity:l,orthographic:!0,lineWidth:s.scatterLineWidth,lineColor:s.scatterLineColor,project:s.project,projectScale:s.projectScale,projectOpacity:s.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(r):(this.scatterPlot=createScatterPlot(r),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),i={gl:this.scene.glplot.gl,position:s.position,glyph:s.text,color:s.textColor,size:s.textSize,angle:s.textAngle,alignment:s.textOffset,font:s.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:e.opacity},this.textLabels=e.hovertext||e.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(i):(this.textMarkers=createScatterPlot(i),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),n={gl:this.scene.glplot.gl,position:s.position,color:s.errorColor,error:s.errorBounds,lineWidth:s.errorLineWidth,capSize:s.errorCapSize,opacity:e.opacity},this.errorBars?s.errorBounds?this.errorBars.update(n):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):s.errorBounds&&(this.errorBars=createErrorBars(n),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),s.delaunayAxis>=0){var c=constructDelaunay(s.position,s.delaunayColor,s.delaunayAxis);c.opacity=e.opacity,this.delaunayMesh?this.delaunayMesh.update(c):(c.gl=a,this.delaunayMesh=createMesh(c),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},proto.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};var convert=createLineWithMarkers,attributesExports={},attributes$1={get exports(){return attributesExports},set exports(e){attributesExports=e}},scatterAttrs=attributes$y,colorAttributes=attributes$G,axisHoverFormat=axis_format_attributes.axisHoverFormat,hovertemplateAttrs=template_attributes.hovertemplateAttrs,texttemplateAttrs=template_attributes.texttemplateAttrs,baseAttrs=attributes$M,DASHES=gl3d_dashes,MARKER_SYMBOLS=gl3d_markers,extendFlat=extend.extendFlat,overrideAll=edit_types.overrideAll,sortObjectKeys=sort_object_keys,scatterLineAttrs=scatterAttrs.line,scatterMarkerAttrs=scatterAttrs.marker,scatterMarkerLineAttrs=scatterMarkerAttrs.line,lineAttrs=extendFlat({width:scatterLineAttrs.width,dash:{valType:"enumerated",values:sortObjectKeys(DASHES),dflt:"solid",description:"Sets the dash style of the lines."}},colorAttributes("line"));function makeProjectionAttr(e){return{show:{valType:"boolean",dflt:!1,description:["Sets whether or not projections are shown along the",e,"axis."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,description:"Sets the projection color."},scale:{valType:"number",min:0,max:10,dflt:2/3,description:["Sets the scale factor determining the size of the","projection marker points."].join(" ")}}}var attrs=attributes$1.exports=overrideAll({x:scatterAttrs.x,y:scatterAttrs.y,z:{valType:"data_array",description:"Sets the z coordinates."},text:extendFlat({},scatterAttrs.text,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:texttemplateAttrs({},{}),hovertext:extendFlat({},scatterAttrs.hovertext,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),hovertemplate:hovertemplateAttrs(),xhoverformat:axisHoverFormat("x"),yhoverformat:axisHoverFormat("y"),zhoverformat:axisHoverFormat("z"),mode:extendFlat({},scatterAttrs.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1,description:["If *-1*, the scatter points are not fill with a surface","If *0*, *1*, *2*, the scatter points are filled with","a Delaunay surface about the x, y, z respectively."].join(" ")},surfacecolor:{valType:"color",description:"Sets the surface fill color."},projection:{x:makeProjectionAttr("x"),y:makeProjectionAttr("y"),z:makeProjectionAttr("z")},connectgaps:scatterAttrs.connectgaps,line:lineAttrs,marker:extendFlat({symbol:{valType:"enumerated",values:sortObjectKeys(MARKER_SYMBOLS),dflt:"circle",arrayOk:!0,description:"Sets the marker symbol type."},size:extendFlat({},scatterMarkerAttrs.size,{dflt:8}),sizeref:scatterMarkerAttrs.sizeref,sizemin:scatterMarkerAttrs.sizemin,sizemode:scatterMarkerAttrs.sizemode,opacity:extendFlat({},scatterMarkerAttrs.opacity,{arrayOk:!1,description:["Sets the marker opacity.","Note that the marker opacity for scatter3d traces","must be a scalar value for performance reasons.","To set a blending opacity value","(i.e. which is not transparent), set *marker.color*","to an rgba color and use its alpha channel."].join(" ")}),colorbar:scatterMarkerAttrs.colorbar,line:extendFlat({width:extendFlat({},scatterMarkerLineAttrs.width,{arrayOk:!1})},colorAttributes("marker.line"))},colorAttributes("marker")),textposition:extendFlat({},scatterAttrs.textposition,{dflt:"top center"}),textfont:{color:scatterAttrs.textfont.color,size:scatterAttrs.textfont.size,family:extendFlat({},scatterAttrs.textfont.family,{arrayOk:!1})},opacity:baseAttrs.opacity,hoverinfo:extendFlat({},baseAttrs.hoverinfo)},"calc","nested");attrs.x.editType=attrs.y.editType=attrs.z.editType="calc+clearAxisTypes";var Registry=registry,Lib=libExports,subTypes=subtypes$3,handleMarkerDefaults=marker_defaults,handleLineDefaults=line_defaults,handleTextDefaults=text_defaults,attributes=attributesExports,defaults=function(e,t,r,n){function i(r,n){return Lib.coerce(e,t,attributes,r,n)}if(handleXYZDefaults(e,t,i,n)){i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),i("mode"),subTypes.hasLines(t)&&(i("connectgaps"),handleLineDefaults(e,t,r,n,i)),subTypes.hasMarkers(t)&&handleMarkerDefaults(e,t,r,n,i,{noSelect:!0,noAngle:!0}),subTypes.hasText(t)&&(i("texttemplate"),handleTextDefaults(e,t,n,i,{noSelect:!0}));var a=(t.line||{}).color,o=(t.marker||{}).color;i("surfaceaxis")>=0&&i("surfacecolor",a||o);for(var s=["x","y","z"],l=0;l<3;++l){var c="projection."+s[l];i(c+".show")&&(i(c+".opacity"),i(c+".scale"))}var u=Registry.getComponentMethod("errorbars","supplyDefaults");u(e,t,a||o||r,{axis:"z"}),u(e,t,a||o||r,{axis:"y",inherit:"z"}),u(e,t,a||o||r,{axis:"x",inherit:"z"})}else t.visible=!1};function handleXYZDefaults(e,t,r,n){var i=0,a=r("x"),o=r("y"),s=r("z");return Registry.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y","z"],n),a&&o&&s&&(i=Math.min(a.length,o.length,s.length),t._length=t._xlength=t._ylength=t._zlength=i),i}var arraysToCalcdata=arrays_to_calcdata$1,calcColorscale=colorscale_calc,calc=function(e,t){var r=[{x:!1,y:!1,trace:t,t:{}}];return arraysToCalcdata(r,t),calcColorscale(e,t),r},scatter3d$1={plot:convert,attributes:attributesExports,markerSymbols:gl3d_markers,supplyDefaults:defaults,colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:calc,moduleType:"trace",name:"scatter3d",basePlotModule:gl3d,categories:["gl3d","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_3d",description:["The data visualized as scatter point or lines in 3D dimension","is set in `x`, `y`, `z`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","Projections are achieved via `projection`.","Surface fills are achieved via `surfaceaxis`."].join(" ")}};scatter3d$2.exports=scatter3d$1;var scatter3d=getDefaultExportFromCjs(scatter3dExports),PlotlyScatter3d=_mergeNamespaces({__proto__:null,default:scatter3d},[scatter3dExports]);coreExports.register([PlotlyIsoSurface,PlotlyScatter3d]);class CPTSpace extends ProspectableElement{static get properties(){return{surface:{attribute:"surface",type:Boolean,reflect:!0},point:{attribute:"point",type:Boolean,reflect:!0},updateable:{attribute:"updateable",type:Boolean,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0},width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.firstUpdate=!0,this.surface=!0,this.point=!0,this.updateable=!1,this.GAMBLE=0,this.SURE=1,this.NR=.25,this.DEFAULT=.75,this.a=.8,this.l=1.2,this.g=.8,this.xl=0,this.xw=20,this.pw=.5,this.xs=10,this.response=this.DEFAULT,this.range={},this.range.a={start:1e-4,stop:1,step:.05},this.range.l={start:0,stop:10,step:.5},this.range.g={start:0,stop:1,step:.05},this.width=NaN,this.height=NaN,this.rem=NaN,this.parameterSpace=[],this.alignState()}alignState(){this.updateable&&(this.response=CPTMath.xal2v(this.xw,this.a,this.l)*CPTMath.pg2w(this.pw,this.g)+CPTMath.xal2v(this.xl,this.a,this.l)*(1-CPTMath.pg2w(this.pw,this.g))>CPTMath.xal2v(this.xs,this.a,this.l)?this.GAMBLE:this.SURE),this.parameterSpace={a:[],l:[],g:[],uDiff:[]},range(this.range.a.start,this.range.a.stop+.01,this.range.a.step).forEach((e=>{range(this.range.l.start,this.range.l.stop+.01,this.range.l.step).forEach((t=>{range(this.range.g.start,this.range.g.stop+.01,this.range.g.step).forEach((r=>{this.parameterSpace.a.push(e),this.parameterSpace.l.push(t),this.parameterSpace.g.push(r);const n=CPTMath.xal2v(this.xw,e,t)*CPTMath.pg2w(this.pw,r)+CPTMath.xal2v(this.xl,e,t)*(1-CPTMath.pg2w(this.pw,r))-CPTMath.xal2v(this.xs,e,t);this.parameterSpace.uDiff.push(n)}))}))}))}static get styles(){return[super.styles,plotlyStyle,r$5`
        :host {
          display: inline-block;

          width: 28rem;
          height: 20rem;
        }

        .plotly {
          height: 100%;

          cursor: grab;
        }

        /* Plotly modebar styles */
        /* Drawn from: https://github.com/plotly/plotly.js/blob/master/src/components/modebar/modebar.js */
        .plotly:hover .modebar .modebar-group {
          background-color: rgba(255, 255, 255, 0.5);
        }

        .modebar-btn .icon path {
          fill: rgba(68, 68, 68, 0.3);
        }

        .modebar-btn:hover .icon path {
          fill: rgba(68, 68, 68, 0.7);
        }

        .modebar-btn.active .icon path {
          fill: rgba(68, 68, 68, 0.7);
        }
      `]}render(){return x$2`
      <div class="plotly"></div>
    `}getDimensions(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.getDimensions.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.getDimensions.bind(this)),super.disconnectedCallback()}firstUpdated(e){super.firstUpdated(e),window.setTimeout(this.getDimensions.bind(this),0)}update(e){if(super.update(e),this.alignState(),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const t=this.getComputedStyleValue("---color-text"),r=this.getComputedStyleValue("---color-element-border"),n=this.getComputedStyleValue("---color-element-background"),i=this.getComputedStyleValue("---color-element-emphasis"),a=this.getComputedStyleValue("---color-worse"),o=this.getComputedStyleValue("---color-better"),s=this.getComputedStyleValue("---color-nr"),l=[];this.surface&&l.push({name:"Decision Boundary",type:"isosurface",x:this.parameterSpace.a,y:this.parameterSpace.l,z:this.parameterSpace.g,value:this.parameterSpace.uDiff,coloraxis:"coloraxis",isomin:0,isomax:0,opacity:.5},{name:"Difference in Subjective Utility",type:"isosurface",x:this.parameterSpace.a,y:this.parameterSpace.l,z:this.parameterSpace.g,value:this.parameterSpace.uDiff,caps:{x:{show:!1},y:{show:!1},z:{show:!1}},coloraxis:"coloraxis",isomin:-30,isomax:30,showscale:!1,slices:{x:{show:!0,locations:[this.range.a.stop]},y:{show:!0,locations:[this.range.l.stop]},z:{show:!0,locations:[this.range.g.start]}},surface:{show:!1}}),this.point&&l.push({name:"Current Decision",type:"scatter3d",x:[this.a],y:[this.l],z:[this.g],mode:"markers",marker:{color:[this.response],coloraxis:"coloraxis2",line:{color:i,width:2},size:6}});const c={coloraxis:{cmin:-30,cmax:30,colorbar:{title:{font:{size:1.125*this.rem},text:"Difference in Utility (Gamble - Sure)",side:"right"},thickness:16,ypad:32},colorscale:[[0,"rgb(35, 35, 104)"],[.35,"rgb(69,69,208)"],[.5,"rgb(190,190,190)"],[.65,"rgb(240,50,230)"],[1,"rgb(120,25,115)"]]},coloraxis2:{cmin:0,cmax:1,colorscale:[[0,a],[.01,a],[.24,s],[.26,s],[.74,i],[.76,i],[.99,o],[1,o]],showscale:!1},font:{family:'"Source Sans", sans-serif',color:t},margin:{t:0,l:0,b:0},scene:{hovermode:!1,camera:{center:{x:0,y:.1,z:-.2},eye:{x:-2,y:-.8,z:.8}},xaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:r,showline:!0,linecolor:r,zeroline:!1,range:[Math.round(this.range.a.start),this.range.a.stop],title:{text:"alpha",font:{size:1.125*this.rem}}},yaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:r,showline:!0,linecolor:r,zeroline:!1,range:[this.range.l.start,this.range.l.stop],title:{text:"lambda",font:{size:1.125*this.rem}}},zaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:r,showline:!0,linecolor:r,zeroline:!1,range:[this.range.g.start,this.range.g.stop],title:{text:"gamma",font:{size:1.125*this.rem}}}},uirevision:!0};coreExports.react(this.shadowRoot.querySelector(".plotly"),l,c,{displaylogo:!1,modeBarButtonsToRemove:["orbitRotation","resetCameraDefault3d","hoverClosest3d","toImage"],responsive:!0}),this.firstUpdate=!1}}customElements.define("cpt-space",CPTSpace);class CPTValue extends ProspectableElement{static get properties(){return{x:{attribute:"value",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},label:{attribute:"label",type:String,reflect:!0},v:{attribute:!1,type:Number,reflect:!1},width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.firstUpdate=!0,this.drag=!1,this.a=.5,this.l=2,this.x=null,this.label="",this.function="default",this.functions=[{name:"default",a:this.a,l:this.l}],this.values=[{name:"default",x:this.x,label:this.label,function:this.function}],this.xl=null,this.xw=null,this.pw=null,this.xs=null,this.trialCount=null,this.response=null,this.width=NaN,this.height=NaN,this.rem=NaN,this.alignState()}alignState(){this.functions[0].a=this.a,this.functions[0].l=this.l,this.values[0].x=this.x,this.values[0].label=this.label,this.values[0].function=this.function,this.values.forEach((e=>{const t=this.functions.find((t=>t.name===e.function));e.v=CPTMath.xal2v(e.x,t.a,t.l)})),this.v=this.values[0].v}trial(e,t,r,n,i,a){this.trialCount&&this.removeValue(`${this.trialCount}-w`),this.trialCount&&this.removeValue(`${this.trialCount}-s`),this.xl=e,this.xw=t,this.pw=r,this.xs=n,this.trialCount=i,this.response=a,this.setValue(this.xw,`${this.trialCount}-w`,"g","default",!0),this.setValue(this.xs,`${this.trialCount}-s`,"s","default",!0)}pauseTrial(){const e=select$5(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]");e.interrupt("new-1"),e.interrupt("new-2"),e.datum((e=>(e.paused=!0,e)))}resumeTrial(){select$5(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]").datum((e=>(e.paused=!1,e))),this.requestUpdate()}clearFunctions(){this.functions.splice(1),this.requestUpdate()}clearValues(){this.values.splice(1),this.requestUpdate()}clear(){this.clearFunctions(),this.clearValues()}removeFunction(e){this.functions=this.functions.filter((t=>t.name!==e)),this.requestUpdate()}removeValue(e){this.values=this.values.filter((t=>t.name!==e)),this.requestUpdate()}remove(e){this.removeFunction(e),this.removeValue(e)}getFunction(e="default"){return this.functions.find((t=>t.name===e))}getValue(e="default"){return this.values.find((t=>t.name===e))}get(e="default"){return{...this.getFunction(e),...this.getValue(e)}}setFunction(e,t,r="default"){"default"===r&&(this.a=e,this.l=t);const n=this.functions.find((e=>e.name===r));void 0===n?this.functions.push({name:r,a:e,l:t}):(n.a=e,n.l=t),this.requestUpdate()}setValue(e,t="default",r="",n=t,i=!1){"default"===t&&(this.x=e,this.label=r);const a=this.values.find((e=>e.name===t));void 0===a?this.values.push({name:t,x:e,label:r,function:n,trial:i,new:i}):(a.x=e,a.label=r,a.function=n),this.requestUpdate()}set(e,t,r,n="default",i="",a=n){this.setFunction(t,r,a),this.setValue(e,n,i,a)}static get styles(){return[super.styles,r$5`
        :host {
          display: inline-block;

          width: 20rem;
          height: 20rem;
        }

        .main {
          width: 100%;
          height: 100%;
        }

        text {
          /* stylelint-disable property-no-vendor-prefix */
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }

        .curve-p.interactive,
        .curve-n.interactive {
          cursor: nwse-resize;

          filter: url("#shadow-2");
          outline: none;
        }

        .curve-p.interactive:hover,
        .curve-n.interactive:hover {
          filter: url("#shadow-4");
        }

        .curve-p.interactive:active,
        .curve-n.interactive:active {
          filter: url("#shadow-8");
        }

        :host(.keyboard) .curve-p.interactive:focus,
        :host(.keyboard) .curve-n.interactive:focus {
          filter: url("#shadow-8");
        }

        .point.interactive {
          cursor: nesw-resize;

          filter: url("#shadow-2");
          outline: none;

          /* HACK: This gets Safari to correctly apply the filter! */
          /* https://github.com/emilbjorklund/svg-weirdness/issues/27 */
          stroke: #000000;
          stroke-opacity: 0;
          stroke-width: 0;
        }

        /* Make a larger target for touch users */
        @media (pointer: coarse) {
          .point.interactive .circle {
            stroke: #000000;
            stroke-opacity: 0;
            stroke-width: 12px;
          }
        }

        .point.interactive:hover {
          filter: url("#shadow-4");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #ff0000;
        }

        .point.interactive:active {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #00ff00;
        }

        :host(.keyboard) .point.interactive:focus {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #0000ff;
        }

        .background {
          fill: var(---color-element-background);
          stroke: var(---color-element-border);
          stroke-width: 1;
          shape-rendering: crispEdges;
        }

        .title-x,
        .title-y {
          font-weight: 600;

          fill: currentColor;
        }

        .tick {
          font-size: 0.75rem;
        }

        .scale-x path,
        .scale-x line,
        .scale-y path,
        .scale-y line {
          stroke: var(---color-element-border);
        }

        .axis-x,
        .axis-y {
          stroke: var(---color-element-border);
          shape-rendering: crispEdges;
        }

        .diagonal {
          stroke: var(---color-element-border);
          stroke-dasharray: 4;
          stroke-width: 1;
        }

        .curve-p,
        .curve-n {
          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .line-x,
        .line-v {
          fill: none;
          stroke-width: 2;
        }

        .line-x {
          stroke: var(---color-x);
        }

        .line-v {
          stroke: var(---color-v);
        }

        .point .circle {
          fill: var(---color-element-emphasis);

          r: 6px;
        }

        .point .label {
          font-size: 0.75rem;

          dominant-baseline: middle;
          text-anchor: middle;

          fill: var(---color-text-inverse);
        }
      `]}render(){return x$2`
      ${ProspectableElement.svgFilters}
    `}getDimensions(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.getDimensions.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.getDimensions.bind(this)),super.disconnectedCallback()}firstUpdated(e){super.firstUpdated(e),this.getDimensions()}update(e){if(super.update(e),this.alignState(),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const t=this.width,r=this.height,n=Math.min(t,r),i=2*this.rem,a=3*this.rem,o=3*this.rem,s=n-(i+a),l=n-(o+2*this.rem),c=parseInt(this.getComputedStyleValue("---transition-duration"),10),u=20,d=linear().domain([-20,u]).range([0,l]);this.xScale=d;const h=linear().domain([u,-20]).range([0,s]);this.yScale=h;const g=drag().subject(((e,t)=>({x:e.x,y:this.yScale(CPTMath.xal2v(this.xScale.invert(e.x),t.a,t.l))}))).on("start",(e=>{select$5(e.currentTarget).classed("dragging",!0)})).on("drag",((e,t)=>{this.drag=!0;const r=this.xScale.invert(e.x),n=this.yScale.invert(e.y),i=CPTMath.xlv2a(r,t.l,n);t.a=Number.isNaN(i)||i<0||i>1||r<0||n<0?r>n?0:1:i,"default"===t.name&&(this.a=t.a),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:this.get(t.name),bubbles:!0}))})).on("end",(e=>{select$5(e.currentTarget).classed("dragging",!1)})),p=drag().subject(((e,t)=>({x:e.x,y:this.yScale(CPTMath.xal2v(this.xScale.invert(e.x),t.a,t.l))}))).on("start",(e=>{select$5(e.currentTarget).classed("dragging",!0)})).on("drag",((e,t)=>{this.drag=!0;const r=this.xScale.invert(e.x),n=this.yScale.invert(e.y),i=CPTMath.xav2l(r,t.a,n);t.l=Number.isNaN(i)||i<0||i>100||r>0||n>0?r>n?100:0:i,"default"===t.name&&(this.l=t.l),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:this.get(t.name),bubbles:!0}))})).on("end",(e=>{select$5(e.currentTarget).classed("dragging",!1)})),f=drag().subject(((e,t)=>({x:this.xScale(t.x),y:this.yScale(t.v)}))).on("start",(e=>{select$5(e.currentTarget).classed("dragging",!0)})).on("drag",((e,t)=>{this.drag=!0;const r=this.xScale.invert(e.x);t.x=r<-20?-20:r>u?u:r,"default"===t.name&&(this.x=t.x),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:{name:t.name,x:t.x,v:t.v,label:t.label,a:this.getFunction(t.function).a,l:this.getFunction(t.function).l},bubbles:!0}))})).on("end",(e=>{select$5(e.currentTarget).classed("dragging",!1)})),m=line().x((e=>d(e.x))).y((e=>h(e.v))),y=select$5(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),b=y.enter().append("svg").classed("main",!0),v=b.merge(y).attr("viewBox",`0 0 ${n} ${n}`),x=b.append("g").classed("plot",!0),B=v.select(".plot").attr("transform",`translate(${o}, ${i})`);x.append("clipPath").attr("id","clip-cpt-value").append("rect"),B.select("clipPath rect").attr("height",s+1).attr("width",l+1);const I=x.append("g").classed("underlayer",!0),F=B.select(".underlayer");I.append("rect").classed("background",!0),F.select(".background").attr("height",s).attr("width",l),I.append("g").classed("scale-x",!0);F.select(".scale-x").attr("transform",`translate(0, ${h(-20)})`).transition().duration(2*c).ease(cubicOut).call(axisBottom(d)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),I.append("line").classed("axis-x",!0),F.select(".axis-x").transition().duration(c).ease(cubicOut).attr("x1",d(-20)).attr("x2",d(u)).attr("y1",h(0)).attr("y2",h(0));const A=I.append("text").classed("title-x",!0).attr("text-anchor","middle");A.append("tspan").classed("name",!0).text("Objective Value ("),A.append("tspan").classed("math-var x",!0).text("x"),A.append("tspan").classed("name",!0).text(")"),F.select(".title-x").attr("transform",`translate(${l/2}, ${s+2.25*this.rem})`),I.append("g").classed("scale-y",!0);F.select(".scale-y").transition().duration(2*c).ease(cubicOut).call(axisLeft(h)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),I.append("line").classed("axis-y",!0),F.select(".axis-y").transition().duration(c).ease(cubicOut).attr("x1",d(0)).attr("x2",d(0)).attr("y1",h(u)).attr("y2",h(-20));const C=I.append("text").classed("title-y",!0).attr("text-anchor","middle");C.append("tspan").classed("name",!0).text("Subjective Value ("),C.append("tspan").classed("math-var v",!0).text("v"),C.append("tspan").classed("name",!0).text(")"),F.select(".title-y").attr("transform",`translate(${-2*this.rem}, ${s/2})rotate(-90)`),I.append("line").classed("diagonal",!0),F.select(".diagonal").transition().duration(2*c).ease(cubicOut).attr("x1",d(-20)).attr("y1",h(-20)).attr("x2",d(u)).attr("y2",h(u)),x.append("g").classed("content",!0);const w=B.select(".content"),Q=w.selectAll(".lines").data(this.values.filter((e=>null!=e.x)),(e=>e.name)),U=Q.enter().append("g").classed("lines",!0);U.each(((e,t,r)=>{const n=select$5(r[t]);n.append("line").classed("line-x above",!0),n.append("line").classed("line-x below",!0),n.append("line").classed("line-v before",!0),n.append("line").classed("line-v after",!0)})),U.filter((e=>e.new)).attr("data-animating-ease-time-1",0).attr("data-animating-ease-time-2",0).each(((e,t,r)=>{const n=select$5(r[t]);n.select(".line-x.above").attr("x1",d(e.x)).attr("x2",d(e.x)).attr("y1",h(u)).attr("y2",h(u)),n.select(".line-x.below").attr("x1",d(e.x)).attr("x2",d(e.x)).attr("y1",h(-20)).attr("y2",h(-20)),n.select(".line-v.before").attr("x1",d(e.x)).attr("x2",d(e.x)).attr("y1",h(e.v)).attr("y2",h(e.v)),n.select(".line-v.after").attr("x1",d(e.x)).attr("x2",d(e.x)).attr("y1",h(e.v)).attr("y2",h(e.v))}));const S=U.merge(Q),E=S.filter((e=>e.new&&!e.paused));if(!E.empty()){const e=E.attr("data-animating-ease-time-1"),t=E.attr("data-animating-ease-time-2"),r=t=>linear().domain([0,1]).range([e,1])(t),n=t=>linear().range([0,1]).domain([e,1])(t),i=e=>linear().domain([0,1]).range([t,1])(e),a=e=>linear().range([0,1]).domain([t,1])(e),o=t=>r=>linear().domain([t(e),1]).range([0,1])(t(r)),s=e=>r=>linear().domain([e(t),1]).range([0,1])(e(r));E.transition("new-1").duration((()=>Math.floor(c*(1-e)))).ease(r).attr("data-animating-ease-time-1",1).tween("animating",((e,t,r)=>{const i=r[t],a=select$5(i),s=interpolate$1(void 0!==i.x?i.x:e.x,e.x),l=interpolate$1(void 0!==i.a?i.a:this.getFunction(e.function).a,this.getFunction(e.function).a),c=interpolate$1(void 0!==i.l?i.l:this.getFunction(e.function).l,this.getFunction(e.function).l),g=interpolate$1(h.invert(a.select(".line-x.above").attr("y1")),e.v),p=interpolate$1(h.invert(a.select(".line-x.below").attr("y1")),e.v);return e=>{i.x=s(cubicOut(n(e))),i.a=l(cubicOut(n(e))),i.l=c(cubicOut(n(e))),i.v=CPTMath.xal2v(i.x,i.a,i.l),a.select(".line-x.above").attr("x1",d(i.x)).attr("x2",d(i.x)).attr("y1",h(g(o(cubicIn)(e)))).attr("y2",h(u)),a.select(".line-x.below").attr("x1",d(i.x)).attr("x2",d(i.x)).attr("y1",h(p(o(cubicIn)(e)))).attr("y2",h(-20))}})).transition("new-2").duration((()=>Math.floor(c*(1-t)))).ease(i).attr("data-animating-ease-time-2",1).tween("animating",((e,t,r)=>{const n=r[t],i=select$5(n),o=interpolate$1(void 0!==n.x?n.x:e.x,e.x),l=interpolate$1(void 0!==n.a?n.a:this.getFunction(e.function).a,this.getFunction(e.function).a),c=interpolate$1(void 0!==n.l?n.l:this.getFunction(e.function).l,this.getFunction(e.function).l),g=interpolate$1(d.invert(i.select(".line-v.before").attr("x1")),-20),p=interpolate$1(d.invert(i.select(".line-v.after").attr("x1")),u);return e=>{n.x=o(cubicOut(a(e))),n.a=l(cubicOut(a(e))),n.l=c(cubicOut(a(e))),n.v=CPTMath.xal2v(n.x,n.a,n.l),i.select(".line-v.before").attr("x1",d(g(s(cubicOut)(e)))).attr("x2",d(n.x)).attr("y1",h(n.v)).attr("y2",h(n.v)),i.select(".line-v.after").attr("x1",d(p(s(cubicOut)(e)))).attr("x2",d(n.x)).attr("y1",h(n.v)).attr("y2",h(n.v))}})).on("end",((e,t,r)=>{const n=r[t];n.removeAttribute("data-animating-ease-time-1"),n.removeAttribute("data-animating-ease-time-2"),e.new=!1,this.dispatchEvent(new CustomEvent("prospectable-response",{detail:{trial:this.trialCount,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,response:this.response},bubbles:!0}))}))}const L=S.filter((e=>e.new&&e.paused));if(!L.empty()){const e=L.attr("data-animating-ease-time-1"),t=L.attr("data-animating-ease-time-2");L.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(cubicOut).tween("paused",((r,n,i)=>{const a=i[n],o=select$5(a),s=interpolate$1(void 0!==a.x?a.x:r.x,r.x),l=interpolate$1(void 0!==a.a?a.a:this.getFunction(r.function).a,this.getFunction(r.function).a),c=interpolate$1(void 0!==a.l?a.l:this.getFunction(r.function).l,this.getFunction(r.function).l),g=interpolate$1(u,r.v),p=interpolate$1(-20,r.v),f=interpolate$1(r.x,-20),m=interpolate$1(r.x,u);return r=>{a.x=s(r),a.a=l(r),a.l=c(r),a.v=CPTMath.xal2v(a.x,a.a,a.l),o.select(".line-x.above").attr("x1",d(a.x)).attr("x2",d(a.x)).attr("y1",h(g(cubicIn(e)))).attr("y2",h(u)),o.select(".line-x.below").attr("x1",d(a.x)).attr("x2",d(a.x)).attr("y1",h(p(cubicIn(e)))).attr("y2",h(-20)),o.select(".line-v.before").attr("x1",d(f(cubicOut(t)))).attr("x2",d(a.x)).attr("y1",h(a.v)).attr("y2",h(a.v)),o.select(".line-v.after").attr("x1",d(m(cubicOut(t)))).attr("x2",d(a.x)).attr("y1",h(a.v)).attr("y2",h(a.v))}}))}S.filter((e=>!e.new)).transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(cubicOut).tween("non-animating",((e,t,r)=>{const n=r[t],i=select$5(n),a=interpolate$1(void 0!==n.x?n.x:e.x,e.x),o=interpolate$1(void 0!==n.a?n.a:this.getFunction(e.function).a,this.getFunction(e.function).a),s=interpolate$1(void 0!==n.l?n.l:this.getFunction(e.function).l,this.getFunction(e.function).l);return e=>{n.x=a(e),n.a=o(e),n.l=s(e),n.v=CPTMath.xal2v(n.x,n.a,n.l),i.select(".line-x.above").attr("x1",d(n.x)).attr("x2",d(n.x)).attr("y1",h(n.v)).attr("y2",h(u)),i.select(".line-x.below").attr("x1",d(n.x)).attr("x2",d(n.x)).attr("y1",h(n.v)).attr("y2",h(-20)),i.select(".line-v.before").attr("x1",d(-20)).attr("x2",d(n.x)).attr("y1",h(n.v)).attr("y2",h(n.v)),i.select(".line-v.after").attr("x1",d(u)).attr("x2",d(n.x)).attr("y1",h(n.v)).attr("y2",h(n.v))}})),Q.exit().remove();const _=w.selectAll(".curve-p").data(this.functions,(e=>e.name)),T=_.enter().append("path").classed("curve-p",!0).attr("clip-path","url(#clip-cpt-value)").merge(_);(this.firstUpdate||e.has("interactive"))&&(this.interactive?T.attr("tabindex",0).classed("interactive",!0).call(g).on("keydown",((e,t)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key)){let r=t.a;switch(e.key){case"ArrowUp":case"ArrowLeft":r+=e.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowRight":r-=e.shiftKey?.01:.05}r=r<0?0:r>1?1:r,r!==t.a&&(t.a=r,"default"===t.name&&(this.a=t.a),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:this.get(t.name),bubbles:!0}))),e.preventDefault()}})):T.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),T.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(cubicOut).attrTween("d",((e,t,r)=>{const n=r[t],i=interpolate$1(void 0!==n.a?n.a:e.a,e.a),a=interpolate$1(void 0!==n.l?n.l:e.l,e.l);return e=>{n.a=i(e),n.l=a(e);const t=range(d(0),d.range()[1]+1,1).map((e=>({x:d.invert(e),v:CPTMath.xal2v(d.invert(e),n.a,n.l)})));return m(t)}})),_.exit().remove();const R=w.selectAll(".curve-n").data(this.functions,(e=>e.name)),$=R.enter().append("path").classed("curve-n",!0).attr("clip-path","url(#clip-cpt-value)").merge(R);(this.firstUpdate||e.has("interactive"))&&(this.interactive?$.attr("tabindex",0).classed("interactive",!0).call(p).on("keydown",((e,t)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key)){let r=t.l;switch(e.key){case"ArrowUp":case"ArrowLeft":r-=e.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowRight":r+=e.shiftKey?.01:.05}r=r<0?0:r>100?100:r,r!==t.l&&(t.l=r,"default"===t.name&&(this.l=t.l),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:this.get(t.name),bubbles:!0}))),e.preventDefault()}})):$.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),$.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(cubicOut).attrTween("d",((e,t,r)=>{const n=r[t],i=interpolate$1(void 0!==n.a?n.a:e.a,e.a),a=interpolate$1(void 0!==n.l?n.l:e.l,e.l);return e=>{n.a=i(e),n.l=a(e);const t=range(d.range()[0],d(0)+1,1).map((e=>({x:d.invert(e),v:CPTMath.xal2v(d.invert(e),n.a,n.l)})));return m(t)}})),R.exit().remove();const k=w.selectAll(".point").data(this.values.filter((e=>null!=e.x)),(e=>e.name)),N=k.enter().append("g").classed("point",!0);N.append("circle").classed("circle",!0),N.append("text").classed("label",!0);const G=N.merge(k);G.select("text").text((e=>e.label)),G.filter((t=>(this.firstUpdate||e.has("interactive"))&&this.interactive&&!t.trial)).attr("tabindex",0).classed("interactive",!0).call(f).on("keydown",((e,t)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key)){let r=t.x;switch(e.key){case"ArrowUp":case"ArrowRight":r+=e.shiftKey?.2:1;break;case"ArrowDown":case"ArrowLeft":r-=e.shiftKey?.2:1}r=r<-20?-20:r>u?u:r,r!==t.x&&(t.x=r,"default"===t.name&&(this.x=t.x),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:{name:t.name,x:t.x,v:t.v,label:t.label,a:this.getFunction(t.function).a,l:this.getFunction(t.function).l},bubbles:!0}))),e.preventDefault()}})),G.filter((t=>(this.firstUpdate||e.has("interactive"))&&!this.interactive||t.trial)).attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null),G.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(cubicOut).attrTween("transform",((e,t,r)=>{const n=r[t],i=interpolate$1(void 0!==n.x?n.x:e.x,e.x),a=interpolate$1(void 0!==n.a?n.a:this.getFunction(e.function).a,this.getFunction(e.function).a),o=interpolate$1(void 0!==n.l?n.l:this.getFunction(e.function).l,this.getFunction(e.function).l);return e=>(n.x=i(e),n.a=a(e),n.l=o(e),`translate(\n            ${d(n.x)},\n            ${h(CPTMath.xal2v(n.x,n.a,n.l))}\n          )`)})),k.exit().remove(),this.drag=!1,this.firstUpdate=!1}}customElements.define("cpt-value",CPTValue),coreExports.register([PlotlyIsoSurface,PlotlyScatter3d]);class DecisionSpace extends ProspectableElement{static get properties(){return{surface:{attribute:"surface",type:Boolean,reflect:!0},point:{attribute:"point",type:String,reflect:!0},updateable:{attribute:"updateable",type:Boolean,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0},width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.firstUpdate=!0,this.surface=!0,this.points=["all","first","rest","none"],this.point="first",this.updateable=!1,this.a=.8,this.l=1.2,this.g=.8,this.xl=0,this.xw=20,this.pw=.5,this.xs=10,this.response="",this.label="",this.choices=[{name:"default",xw:this.xw,pw:this.pw,xs:this.xs,response:this.response,label:""}],this.GAMBLE=0,this.SURE=1,this.NR=.25,this.DEFAULT=.75,this.pointList=[],this.range={},this.range.xs={start:5,stop:15,step:.5},this.range.xw={start:10,stop:30,step:1},this.range.pw={start:0,stop:1,step:.05},this.width=NaN,this.height=NaN,this.rem=NaN,this.decisionSpace=[],this.alignState()}alignState(){this.choices[0].name="default",this.choices[0].xw=this.xw,this.choices[0].pw=this.pw,this.choices[0].xs=this.xs,this.choices[0].response=this.response,this.choices[0].label=this.label,this.updateable&&(this.choices.forEach((e=>{e.response=CPTMath.xal2v(e.xw,this.a,this.l)*CPTMath.pg2w(e.pw,this.g)+CPTMath.xal2v(this.xl,this.a,this.l)*(1-CPTMath.pg2w(e.pw,this.g))>CPTMath.xal2v(e.xs,this.a,this.l)?"gamble":"sure"})),this.response=this.choices[0].response),this.pointList={xw:[],pw:[],xs:[],response:[],label:[]},this.choices.forEach(((e,t)=>{(0===t&&("first"===this.point||"all"===this.point)||t>0&&("rest"===this.point||"all"===this.point))&&(this.pointList.xw.push(e.xw),this.pointList.pw.push(e.pw),this.pointList.xs.push(e.xs),this.pointList.response.push("gamble"===e.response?this.GAMBLE:"sure"===e.response?this.SURE:"nr"===e.response?this.NR:this.DEFAULT),this.pointList.label.push(e.label))})),this.decisionSpace={xs:[],xw:[],pw:[],uDiff:[]},range(this.range.xs.start,this.range.xs.stop+.01,this.range.xs.step).forEach((e=>{range(this.range.xw.start,this.range.xw.stop+.01,this.range.xw.step).forEach((t=>{range(this.range.pw.start,this.range.pw.stop+.01,this.range.pw.step).forEach((r=>{this.decisionSpace.xs.push(e),this.decisionSpace.xw.push(t),this.decisionSpace.pw.push(r);const n=CPTMath.xal2v(t,this.a,this.l)*CPTMath.pg2w(r,this.g)+CPTMath.xal2v(this.xl,this.a,this.l)*(1-CPTMath.pg2w(r,this.g))-CPTMath.xal2v(e,this.a,this.l);this.decisionSpace.uDiff.push(n)}))}))}))}clear(){this.choices=[{}],this.requestUpdate()}get(e="default"){const t=this.choices.find((t=>t.name===e));return void 0===t?null:t}set(e,t,r,n,i="default",a=""){"default"===i&&(this.xw=e,this.pw=t,this.xs=r,this.response=n,this.label=a);const o=this.choices.find((e=>e.name===i));void 0===o?this.choices.push({name:i,xw:e,pw:t,xs:r,response:n,label:a}):(o.xw=e,o.pw=t,o.xs=r,o.response=n,o.label=a),this.requestUpdate()}static get styles(){return[super.styles,plotlyStyle,r$5`
        :host {
          display: inline-block;

          width: 28rem;
          height: 20rem;
        }

        .plotly {
          height: 100%;

          cursor: grab;
        }

        /* Plotly modebar styles */
        /* Drawn from: https://github.com/plotly/plotly.js/blob/master/src/components/modebar/modebar.js */
        .plotly:hover .modebar .modebar-group {
          background-color: rgba(255, 255, 255, 0.5);
        }

        .modebar-btn .icon path {
          fill: rgba(68, 68, 68, 0.3);
        }

        .modebar-btn:hover .icon path {
          fill: rgba(68, 68, 68, 0.7);
        }

        .modebar-btn.active .icon path {
          fill: rgba(68, 68, 68, 0.7);
        }
      `]}render(){return x$2`
      <div class="plotly"></div>
    `}getDimensions(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.getDimensions.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.getDimensions.bind(this)),super.disconnectedCallback()}firstUpdated(e){super.firstUpdated(e),window.setTimeout(this.getDimensions.bind(this),0)}update(e){if(super.update(e),this.alignState(),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const t=this.getComputedStyleValue("---color-text"),r=this.getComputedStyleValue("---color-element-border"),n=this.getComputedStyleValue("---color-element-background"),i=this.getComputedStyleValue("---color-element-emphasis"),a=this.getComputedStyleValue("---color-worse"),o=this.getComputedStyleValue("---color-better"),s=this.getComputedStyleValue("---color-nr"),l=[];this.surface&&l.push({name:"Decision Boundary",type:"isosurface",x:this.decisionSpace.xs,y:this.decisionSpace.xw,z:this.decisionSpace.pw,value:this.decisionSpace.uDiff,coloraxis:"coloraxis",isomin:0,isomax:0,opacity:.5},{name:"Difference in Subjective Utility",type:"isosurface",x:this.decisionSpace.xs,y:this.decisionSpace.xw,z:this.decisionSpace.pw,value:this.decisionSpace.uDiff,caps:{x:{show:!1},y:{show:!1},z:{show:!1}},coloraxis:"coloraxis",isomin:-30,isomax:30,showscale:!1,slices:{x:{show:!0,locations:[this.range.xs.stop]},y:{show:!0,locations:[this.range.xw.stop]},z:{show:!0,locations:[this.range.pw.start]}},surface:{show:!1}}),l.push({name:"Current Decision",type:"scatter3d",x:this.pointList.xs,y:this.pointList.xw,z:this.pointList.pw,mode:"markers",marker:{color:this.pointList.response,coloraxis:"coloraxis2",line:{color:i,width:2},size:6}});const c={coloraxis:{cmin:-30,cmax:30,colorbar:{title:{font:{size:1.125*this.rem},text:"Difference in Utility (Gamble - Sure)",side:"right"},thickness:16,ypad:32},colorscale:[[0,"rgb(35, 35, 104)"],[.35,"rgb(69,69,208)"],[.5,"rgb(190,190,190)"],[.65,"rgb(240,50,230)"],[1,"rgb(120,25,115)"]]},coloraxis2:{cmin:0,cmax:1,colorscale:[[0,a],[.01,a],[.24,s],[.26,s],[.74,i],[.76,i],[.99,o],[1,o]],showscale:!1},font:{family:'"Source Sans", sans-serif',color:t},margin:{t:0,l:0,b:0},scene:{hovermode:!1,camera:{center:{x:0,y:.1,z:-.2},eye:{x:-2,y:-.8,z:.8}},xaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:r,showline:!0,linecolor:r,zeroline:!1,range:[this.range.xs.start,this.range.xs.stop],title:{text:"Sure Value",font:{size:1.125*this.rem}}},yaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:r,showline:!0,linecolor:r,zeroline:!1,range:[this.range.xw.start,this.range.xw.stop],title:{text:"Win Value",font:{size:1.125*this.rem}}},zaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:r,showline:!0,linecolor:r,zeroline:!1,range:[this.range.pw.start,this.range.pw.stop],title:{text:"Win Probability",font:{size:1.125*this.rem}}}},uirevision:!0};coreExports.react(this.shadowRoot.querySelector(".plotly"),l,c,{displaylogo:!1,modeBarButtonsToRemove:["orbitRotation","resetCameraDefault3d","hoverClosest3d","toImage"],responsive:!0}),this.firstUpdate=!1}}customElements.define("decision-space",DecisionSpace);class ProspectableControl extends ProspectableElement{static get properties(){return{trials:{attribute:"trials",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},run:{attribute:"run",type:Boolean,reflect:!0},pause:{attribute:"pause",type:Boolean,reflect:!0},reset:{attribute:"reset",type:Boolean,reflect:!0},state:{atribute:!1,type:String,reflect:!1}}}constructor(){super(),this.trials=void 0,this.duration=void 0,this.run=!1,this.pause=!1,this.reset=!1,this.states=["resetted","running","paused","ended"],this.state="resetted"}setTrials(e){this.trials=e.target.value,this.dispatchEvent(new CustomEvent("prospectable-control-trials",{detail:{trials:this.trials},bubbles:!0}))}setDuration(e){this.duration=e.target.value,this.dispatchEvent(new CustomEvent("prospectable-control-duration",{detail:{duration:this.duration},bubbles:!0}))}doRun(){this.state="running",this.dispatchEvent(new CustomEvent("prospectable-control-run",{detail:{},bubbles:!0}))}doPause(){this.state="paused",this.dispatchEvent(new CustomEvent("prospectable-control-pause",{detail:{},bubbles:!0}))}doReset(){this.state="resetted",this.dispatchEvent(new CustomEvent("prospectable-control-reset",{detail:{},bubbles:!0}))}complete(){this.state="ended"}static get styles(){return[super.styles,r$5`
        :host {
          display: inline-block;
        }

        .holder {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        .buttons {
          display: flex;

          flex-direction: column;

          align-items: stretch;
          justify-content: center;
        }
      `]}render(){return x$2`
      <div class="holder">
        ${this.trials?x$2`<decidables-slider min="1" max="100" step="1" .value=${this.trials} @change=${this.setTrials.bind(this)} @input=${this.setTrials.bind(this)}>Trials</decidables-slider>`:x$2``}
        ${this.duration?x$2`<decidables-slider min="10" max="4000" step="10" .value=${this.duration} @change=${this.setDuration.bind(this)} @input=${this.setDuration.bind(this)}>Duration</decidables-slider>`:x$2``}
        ${this.run||this.pause||this.reset?x$2`
            <div class="buttons">
              ${this.run?x$2`<decidables-button name="run" ?disabled=${"running"===this.state||"ended"===this.state} @click=${this.doRun.bind(this)}>Run</decidables-button>`:x$2``}
              ${this.pause?x$2`<decidables-button name="pause" ?disabled=${"running"!==this.state} @click=${this.doPause.bind(this)}>Pause</decidables-button>`:x$2``}
              ${this.reset?x$2`<decidables-button name="reset" ?disabled=${"resetted"===this.state} @click=${this.doReset.bind(this)}>Reset</decidables-button>`:x$2``}
            </div>
            `:x$2``}
      </div>`}}customElements.define("prospectable-control",ProspectableControl);class ProspectableResponse extends ProspectableElement{static get properties(){return{feedback:{attribute:"feedback",type:String,reflect:!0},trial:{attribute:"trial",type:Boolean,reflect:!0},payoff:{attribute:"payoff",type:String,reflect:!0},state:{attribute:!1,type:String,reflect:!1},trialCount:{attribute:!1,type:Number,reflect:!1},trialTotal:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.feedbacks=["none","outcome"],this.feedback="none",this.trial=!1,this.payoffs=["none","selection","both"],this.payoff="none",this.states=["off","waiting","feedback"],this.state="off",this.trialCount=0,this.trialTotal=0,this.xl=0,this.xw=0,this.pw=0,this.xs=0,this.gamblePayoff=0,this.surePayoff=0,this.nrPayoff=0,this.betters=["gamble","sure","even"],this.better=void 0,this.responses=["gamble","sure","nr"],this.response=void 0,this.outcomes=["better","worse","even","nr"],this.outcome=void 0}get trialPayoff(){switch(this.response){case"gamble":return this.gamblePayoff;case"sure":return this.surePayoff;case"nr":return this.nrPayoff;default:return}}start(e,t,r,n,i,a,o,s){this.state="waiting",this.xl=e,this.xw=t,this.pw=r,this.xs=n,this.gamblePayoff=i,this.surePayoff=a,this.better=o,this.trialCount=s,this.response=void 0,this.outcome=void 0}stop(){this.state="feedback",void 0===this.response&&(this.outcome="nr")}gamble(){this.responded("gamble")}sure(){this.responded("sure")}responded(e){this.state="feedback",this.response=e,this.outcome="even"===this.better?"even":this.better===this.response?"better":"worse",this.dispatchEvent(new CustomEvent("prospectable-response",{detail:{trial:this.trialCount,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,response:this.response,outcome:this.outcome,payoff:this.trialPayoff},bubbles:!0}))}reset(){this.state="off",this.trialCount=0,this.better=void 0,this.gamblePayoff=0,this.surePayoff=0,this.response=void 0,this.outcome=void 0}static get styles(){return[super.styles,r$5`
        :host {
          display: inline-block;
        }

        /* Overall container */
        .holder {
          display: flex;

          flex-direction: column;
        }

        /* Trial messages */
        .trials {
          display: flex;

          flex-direction: column;

          justify-content: center;
        }

        .trial {
          text-align: center;
        }

        .trial .label {
          font-weight: 600;
        }

        /* Response buttons */
        .responses {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        .response {
          width: 5.25rem;
        }

        .waiting[disabled] {
          --decidables-button-background-color: var(---color-element-enabled);
        }

        .selected[disabled][name="gamble"] {
          --decidables-button-background-color: var(---color-worse);
        }

        .selected[disabled][name="sure"] {
          --decidables-button-background-color: var(---color-better);
        }

        /* Feedback messages */
        .feedbacks {
          display: flex;

          flex-direction: row;

          justify-content: center;
        }

        /* Outcome feedback */
        .feedback {
          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;

          width: 5.25rem;
          height: 3.5rem;
          padding: 0.375rem 0.75rem;
          margin: 0.25rem;

          text-align: center;

          background-color: var(---color-element-background);
          border: 1px solid var(---color-element-border);
        }

        .feedback.better {
          background-color: var(---color-better-light);
        }

        .feedback.worse {
          background-color: var(---color-worse-light);
        }

        .feedback.even {
          background-color: var(---color-even-light);
        }

        .feedback.nr {
          background-color: var(---color-nr-light);
        }

        .feedback .outcome {
          font-weight: 600;
          line-height: 1.15;
        }

        :host([payoff="selection"]) .feedback,
        :host([payoff="both"]) .feedback {
          height: 4rem;
        }

        /* Payoff feedback */
        .payoff {
          text-align: center;
        }

        .payoff .label {
          font-weight: 600;
        }
      `]}render(){return x$2`
      <div class="holder">
        ${this.trial?x$2`
            <div class="trials">
              <div class="trial">
                <span class="label">Trial: </span><span class="count">${this.trialCount}</span><span class="of"> of </span><span class="total">${this.trialTotal}</span>
              </div>
            </div>`:x$2``}
        <div class="responses">
          <decidables-button name="gamble" class="response ${"feedback"===this.state&&"gamble"===this.response?"selected":"waiting"===this.state?"waiting":""}" ?disabled=${"waiting"!==this.state||!0!==this.interactive} @click=${this.gamble.bind(this)}>Gamble</decidables-button>
          <decidables-button name="sure" class="response ${"feedback"===this.state&&"sure"===this.response?"selected":"waiting"===this.state?"waiting":""}" ?disabled=${"waiting"!==this.state||!0!==this.interactive} @click=${this.sure.bind(this)}>Sure</decidables-button>
        </div>
        ${"none"!==this.feedback||"none"!==this.payoff?x$2`
            <div class="feedbacks">
              <div class="feedback gamble
                ${"feedback"===this.state&&"outcome"===this.feedback&&"gamble"===this.response?this.outcome:""}">
                ${"feedback"===this.state&&"outcome"===this.feedback&&"gamble"===this.response?"better"===this.outcome?x$2`<span class="outcome">Better</span>`:"worse"===this.outcome?x$2`<span class="outcome">Worse</span>`:"even"===this.outcome?x$2`<span class="outcome">Even</span>`:x$2`<span class="outcome">No<br>Response</span>`:""}
                ${"both"===this.payoff||"selection"===this.payoff&&"gamble"===this.response?x$2`<span class="payoff">${"gamble"===this.response?"Win:":"Miss:"} $${this.gamblePayoff}</span>`:x$2``}
              </div>
              <div class="feedback sure
                ${"feedback"===this.state&&"outcome"===this.feedback&&"sure"===this.response?this.outcome:""}">
                ${"feedback"===this.state&&"outcome"===this.feedback&&"sure"===this.response?"better"===this.outcome?x$2`<span class="outcome">Better</span>`:"worse"===this.outcome?x$2`<span class="outcome">Worse</span>`:"even"===this.outcome?x$2`<span class="outcome">Even</span>`:x$2`<span class="outcome">No<br>Response</span>`:""}
                ${"both"===this.payoff||"selection"===this.payoff&&"sure"===this.response?x$2`<span class="payoff">${"sure"===this.response?"Win:":"Miss:"} $${this.surePayoff}</span>`:x$2``}
              </div>
            </div>`:x$2``}
      </div>`}}customElements.define("prospectable-response",ProspectableResponse);class RiskyOption extends ProspectableElement{static get properties(){return{width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.width=NaN,this.height=NaN,this.rem=NaN}static get styles(){return[super.styles,r$5`
        :host {
          --decidables-spinner-font-size: 1.75rem;
          --decidables-spinner-input-width: 4rem;
          --decidables-spinner-prefix: "$";

          display: inline-block;

          width: 10rem;
          height: 10rem;
        }

        .main {
          width: 100%;
          height: 100%;
          overflow: visible;
        }

        .outline {
          fill: var(---color-element-background);
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .arc {
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .arc.interactive {
          cursor: ns-resize;

          filter: url("#shadow-2");
          outline: none;
        }

        .arc.interactive:hover {
          filter: url("#shadow-4");
        }

        .arc.interactive:active {
          filter: url("#shadow-8");
        }

        :host(.keyboard) .arc.interactive:focus {
          filter: url("#shadow-8");
        }

        .arc.win {
          fill: var(---color-better-light);
        }

        .arc.loss {
          fill: var(---color-worse-light);
        }

        .arc.sure {
          fill: var(---color-even-light);
        }

        .label.static {
          font-size: 1.75rem;

          user-select: none;

          dominant-baseline: middle;
          text-anchor: middle;
        }

        .label.interactive {
          width: var(--decidables-spinner-input-width);
          height: calc(var(--decidables-spinner-font-size) * 1.5);
          overflow: visible;
        }

        /* HACK: Get Safari to work with SVG foreignObject */
        /* https://stackoverflow.com/questions/51313873/svg-foreignobject-not-working-properly-on-safari */
        /* https://bugs.webkit.org/show_bug.cgi?id=23113 */
        .label.interactive decidables-spinner {
          position: fixed;
        }

        .label.interactive.win decidables-spinner {
          background-color: var(---color-better-light);
        }

        .label.interactive.loss decidables-spinner {
          background-color: var(---color-worse-light);
        }

        .label.interactive.sure decidables-spinner {
          background-color: var(---color-even-light);
        }
      `]}render(){return x$2`
      ${ProspectableElement.svgFilters}
      <slot></slot>
    `}getDimensions(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.getDimensions.bind(this)),this.observer=new MutationObserver((e=>{e.some((e=>"childList"===e.type||"attributes"===e.type&&e.target!==this))&&this.requestUpdate()})),this.observer.observe(this,{subtree:!0,childList:!0,attributes:!0})}disconnectedCallback(){this.observer.disconnect(),window.removeEventListener("resize",this.getDimensions.bind(this)),super.disconnectedCallback()}firstUpdated(e){super.firstUpdated(e),this.getDimensions()}update(e){if(super.update(e),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const t=this.width,r=this.height,n=Math.min(t,r),i=n-(0+0),a=n-(0+0),o=this.querySelectorAll("risky-outcome"),s=o.length?-o[0].p:0,l=pie().startAngle(s*Math.PI-Math.PI).endAngle(s*Math.PI+Math.PI).sortValues(null).value((e=>e.p))(o),c=l.filter((e=>!e.data.interactive)),u=l.filter((e=>e.data.interactive));function d(e){const t=(e+2*Math.PI)%(2*Math.PI);return t>Math.PI?t-2*Math.PI:t<-Math.PI?t+2*Math.PI:t}const h=drag().subject(((e,t)=>{const r=d((t.endAngle+t.startAngle)/2),n=d(Math.atan2(e.y,e.x)+Math.PI/2);return o.forEach((e=>{e.startP=e.p})),{arcAngle:r,startAngle:d(n-r)}})).on("start",((e,t)=>{if(!t.data.interactive)return;select$5(e.currentTarget).classed("dragging",!0)})).on("drag",((e,t)=>{if(!t.data.interactive)return;const r=d(Math.atan2(e.y,e.x)+Math.PI/2),n=d(r-e.subject.arcAngle),i=d(e.subject.startAngle>0?n-e.subject.startAngle:e.subject.startAngle-n)/Math.PI,a=t.data.startP+i,s=a>.99?.99:a<.01?.01:a;o.forEach((e=>{e.p=e===t.data?s:e.startP/(1-t.data.startP)*(1-s)})),this.dispatchEvent(new CustomEvent("risky-outcome-change",{detail:{x:t.data.x,p:t.data.p,name:t.data.name},bubbles:!0}))})).on("end",((e,t)=>{if(!t.data.interactive)return;select$5(e.currentTarget).classed("dragging",!1)})),g=select$5(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),p=g.enter().append("svg").classed("main",!0),f=p.merge(g).attr("viewBox",`0 0 ${n} ${n}`),m=p.append("g").classed("pie",!0),y=f.select(".pie").attr("transform",`translate(${a/2}, ${i/2})`);m.append("circle").classed("outline",!0),y.select(".outline").attr("r",Math.min(a,i)/2-1);const b=y.selectAll(".arc").data(l),v=b.enter().append("path").call(h).on("keydown",((e,t)=>{if(["ArrowUp","ArrowDown"].includes(e.key)){const r=t.data.p;let n=t.data.p;switch(e.key){case"ArrowUp":n-=e.shiftKey?.01:.05;break;case"ArrowDown":n+=e.shiftKey?.01:.05}const i=n>.99?.99:n<.01?.01:n;o.forEach((e=>{e.p=e===t.data?i:e.p/(1-r)*(1-i)})),this.dispatchEvent(new CustomEvent("risky-outcome-change",{detail:{x:t.data.x,p:t.data.p,name:t.data.name},bubbles:!0})),e.preventDefault()}}));v.merge(b).attr("tabindex",(e=>u.includes(e)&&l.length>1?0:null)).attr("class",(e=>`arc ${e.data.name}`)).classed("interactive",(e=>u.includes(e)&&l.length>1)).attr("d",arc().innerRadius(0).outerRadius(Math.min(a,i)/2-1)),b.exit().remove();const x=y.selectAll(".label.static").data(c),B=y.selectAll(".label.interactive").data(u),I=x.enter().append("text"),F=B.enter().append("foreignObject");F.append("xhtml:decidables-spinner").on("input",((e,t)=>{t.data.x=parseFloat(e.target.value),this.dispatchEvent(new CustomEvent("risky-outcome-change",{detail:{x:t.data.x,p:t.data.p,name:t.data.name},bubbles:!0}))})),I.merge(x).attr("class",(e=>`label static ${e.data.name}`)).attr("transform",(e=>{if(1===l.length)return"translate(0, 0)";const t=Math.min(a,i)/2*.6;return`translate(${arc().innerRadius(t).outerRadius(t).centroid(e)})`})).text((e=>`$${e.data.x.toFixed(0)}`));const A=F.merge(B).attr("class",(e=>`label interactive ${e.data.name}`)).attr("transform",(e=>{const t=parseFloat(this.getComputedStyleValue("--decidables-spinner-input-width")),r=parseFloat(this.getComputedStyleValue("--decidables-spinner-font-size")),n=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10),o=t*n/-2,s=r*n*1.5/-2;if(1===l.length)return`translate(${o}, ${s})`;const c=Math.min(a,i)/2*.6,u=arc().innerRadius(c).outerRadius(c);return`translate(${u.centroid(e)[0]+o}, ${u.centroid(e)[1]+s})`}));A.select("decidables-spinner").attr("value",(e=>`${e.data.x.toFixed(0)}`)),x.exit().remove(),B.exit().remove()}}customElements.define("risky-option",RiskyOption);class RiskyOutcome extends ProspectableElement{static get properties(){return{x:{attribute:"value",type:Number,reflect:!0},p:{attribute:"probability",type:Number,reflect:!0},name:{attribute:"name",type:String,reflect:!0}}}constructor(){super(),this.x=0,this.p=0,this.name=""}static get styles(){return[r$5`
        :host {
          display: none;
        }
      `]}render(){return x$2``}}customElements.define("risky-outcome",RiskyOutcome);class RiskyChoice extends ProspectableElement{static get properties(){return{state:{attribute:"state",type:String,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}constructor(){super(),this.states=["choice","fixation","blank"],this.state="choice",this.xl=0,this.xw=100,this.pw=.75,this.xs=50}static get styles(){return[super.styles,r$5`
        :host {
          display: inline-block;
        }

        .holder {
          user-select: none;
        }

        .holder > * {
          vertical-align: middle;
        }

        .query {
          margin: 0 0.5rem;

          font-family: var(--font-family-code);
          font-size: 1.75rem;
        }

        risky-option {
          width: 10rem;
          height: 10rem;
        }
      `]}sendEvent(){this.dispatchEvent(new CustomEvent("risky-choice-change",{detail:{xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs},bubbles:!0}))}winChange(e){this.xw=parseFloat(e.detail.x),this.pw=parseFloat(e.detail.p),this.sendEvent()}sureChange(e){this.xs=parseFloat(e.detail.x),this.sendEvent()}render(){return x$2`
      <div class="holder">
        <risky-option class="gamble" ?interactive=${this.interactive} @risky-outcome-change=${this.winChange.bind(this)}>
          ${"choice"===this.state?x$2`
              <risky-outcome probability="${1-this.pw}" value="${this.xl}" name="loss"></risky-outcome>
              <risky-outcome ?interactive=${this.interactive} probability="${this.pw}" value="${this.xw}" name="win"></risky-outcome>`:""}
        </risky-option><span class="query"
         >${"choice"===this.state?"?":"fixation"===this.state?"+":x$2`∙`}</span
        ><risky-option class="sure" ?interactive=${this.interactive} @risky-outcome-change=${this.sureChange.bind(this)}>
          ${"choice"===this.state?x$2`
              <risky-outcome ?interactive=${this.interactive} probability="1" value="${this.xs}" name="sure"></risky-outcome>`:""}
        </risky-option>
      </div>`}}customElements.define("risky-choice",RiskyChoice);class RiskyTask extends ProspectableElement{static get properties(){return{duration:{attribute:"duration",type:Number,reflect:!0},iti:{attribute:"iti",type:Number,reflect:!0},trials:{attribute:"trials",type:Number,reflect:!0},running:{attribute:"running",type:Boolean,reflect:!0},state:{attribute:!1,type:String,reflect:!1}}}constructor(){super(),this.duration=2e3,this.iti=2e3,this.trials=5,this.running=!1,this.states=["resetted","iti","stimulus","ended"],this.state="resetted",this.range={},this.range.xl={start:0,stop:0,step:1},this.range.xw={start:10,stop:30,step:1},this.range.pw={start:.1,stop:.9,step:.1},this.range.xs={start:5,stop:15,step:1},this.range.xl.values=range(this.range.xl.start,this.range.xl.stop+.01,this.range.xl.step),this.range.xw.values=range(this.range.xw.start,this.range.xw.stop+.01,this.range.xw.step),this.range.pw.values=range(this.range.pw.start,this.range.pw.stop+.01,this.range.pw.step),this.range.xs.values=range(this.range.xs.start,this.range.xs.stop+.01,this.range.xs.step),this.firstUpdate=!0,this.xl=0,this.xw=0,this.pw=0,this.xs=0,this.trial=0,this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.runner=void 0}static get styles(){return[super.styles,r$5`
        :host {
          display: inline-block;
        }
      `]}render(){return x$2`
      <div class="holder">
        <risky-choice state="${"stimulus"===this.state?"choice":"iti"===this.state?"fixation":"blank"}" probability="${this.pw}" win="${this.xw}" loss="${this.xl}" sure="${this.xs}"></risky-choice>
      </div>`}update(e){super.update(e),(this.firstUpdate||e.has("running"))&&(this.running?(this.pauseTime&&(this.baseTime+=now()-this.pauseTime,this.pauseTime=0),this.runner=interval(this.run.bind(this),20)):void 0!==this.runner&&(this.runner.stop(),this.pauseTime=now())),this.firstUpdate=!1}reset(){this.runner.stop(),this.running=!1,this.trial=0,this.state="resetted",this.xl=0,this.xw=0,this.pw=0,this.xs=0,this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0}run(){const e=now(),t=this.baseTime?e-this.baseTime:0,r=this.baseTime?t-this.startTime:0;this.lastTime=t,"resetted"===this.state?(this.state="iti",this.baseTime=e,this.startTime=0,this.dispatchEvent(new CustomEvent("risky-block-start",{detail:{trials:this.trials},bubbles:!0}))):"iti"===this.state&&r>=this.iti?(this.trial+=1,this.state="stimulus",this.startTime=t,this.xl=this.range.xl.values[Math.floor(Math.random()*this.range.xl.values.length)],this.xw=this.range.xw.values[Math.floor(Math.random()*this.range.xw.values.length)],this.pw=this.range.pw.values[Math.floor(Math.random()*this.range.pw.values.length)],this.xs=this.range.xs.values[Math.floor(Math.random()*this.range.xs.values.length)],this.vDiff=this.xw*this.pw+this.xl*(1-this.pw)-this.xs,this.gamblePayoff=Math.random()<this.pw?this.xw:this.xl,this.surePayoff=this.xs,this.better=this.vDiff>0?"gamble":this.vDiff<0?"sure":"equal",this.dispatchEvent(new CustomEvent("risky-trial-start",{detail:{trials:this.trials,duration:this.duration,iti:this.iti,trial:this.trial,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff},bubbles:!0}))):"stimulus"===this.state&&r>=this.duration&&(this.dispatchEvent(new CustomEvent("risky-trial-end",{detail:{trials:this.trials,duration:this.duration,iti:this.iti,trial:this.trial,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff},bubbles:!0})),this.trial>=this.trials?(this.runner.stop(),this.running=!1,this.state="ended",this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.dispatchEvent(new CustomEvent("risky-block-end",{detail:{trials:this.trial},bubbles:!0}))):(this.state="iti",this.startTime=t))}}customElements.define("risky-task",RiskyTask);class CPTEquationPG2W extends CPTEquation{static get properties(){return{p:{attribute:"probability",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},w:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.p=.75,this.g=.5,this.alignState()}alignState(){this.w=CPTMath.pg2w(this.p,this.g)}sendEvent(){this.dispatchEvent(new CustomEvent("cpt-equation-pg2w-change",{detail:{p:this.p,g:this.g,w:this.w},bubbles:!0}))}pInput(e){this.p=parseFloat(e.target.value),this.alignState(),this.sendEvent()}gInput(e){this.g=parseFloat(e.target.value),this.alignState(),this.sendEvent()}render(){let e,t,r;this.alignState(),this.numeric?(e=x$2`<decidables-spinner class="p bottom" ?disabled=${!this.interactive} min="0" max="1" step="0.01" .value="${this.p}" @input=${this.pInput.bind(this)}>
          <var class="math-var">p</var>
        </decidables-spinner>`,t=x$2`<decidables-spinner class="g bottom" ?disabled=${!this.interactive} min="0" max="1" step="0.01" .value="${this.g}" @input=${this.gInput.bind(this)}>
          <var class="math-var">γ</var>
        </decidables-spinner>`,r=x$2`<decidables-spinner class="w bottom" disabled min="0" max="1" step=".01" .value="${+this.w.toFixed(2)}">
          <var class="math-var">w</var>
        </decidables-spinner>`):(e=x$2`<var class="math-var p">p</var>`,t=x$2`<var class="math-var g">γ</var>`,r=x$2`<var class="math-var w">w</var>`);const n=x$2`
      <tr>
        <td rowspan="2">
          ${r}<span class="equals">=</span>
        </td>
        <td class="underline">
          ${e}<sup class="exp">${t}</sup>
        </td>
      </tr>
      <tr>
        <td>
          <span class="bracket tight">[</span>${e}<sup class="exp">${t}</sup><span class="plus">+</span><span class="paren tight">(</span>1<span class="minus">−</span>${e}<span class="paren tight">)</span><sup class="exp">${t}</sup><span class="bracket tight">]</span><sup class="exp">1/${t}</sup>
        </td>
      </tr>`;return x$2`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${n}
          </tbody>
        </table>
      </div>`}}customElements.define("cpt-equation-pg2w",CPTEquationPG2W);class CPTEquationVW2U extends CPTEquation{static get properties(){return{v:{attribute:"value",converter:DecidablesConverterArray,reflect:!0},w:{attribute:"weight",converter:DecidablesConverterArray,reflect:!0},n:{attribute:"outcomes",type:Number,reflect:!0},u:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.v=[10,0],this.w=[.75,.25],this.n=2,this.nMax=4,this.vMax=new Array(this.nMax).fill(0),this.wMax=new Array(this.nMax).fill(0),this.alignState()}alignState(){this.v=this.v.length<this.n?this.v.concat(this.vMax.slice(this.v.length,this.n)):this.v.length>this.n?this.v.slice(0,this.n):this.v,this.w=this.w.length<this.n?this.w.concat(this.wMax.slice(this.w.length,this.n)):this.w.length>this.n?this.w.slice(0,this.n):this.w,this.v.forEach(((e,t)=>{this.vMax[t]=e})),this.w.forEach(((e,t)=>{this.wMax[t]=e})),this.u=this.v.reduce(((e,t,r)=>e+t*this.w[r]),0)}sendEvent(){this.dispatchEvent(new CustomEvent("cpt-equation-vw2u-change",{detail:{v:this.v,w:this.w,n:this.n,u:this.u},bubbles:!0}))}vInput(e,t){this.v[e]=parseFloat(t.target.value),this.alignState(),this.sendEvent()}wInput(e,t){this.w[e]=parseFloat(t.target.value),this.alignState(),this.sendEvent()}nInput(e){this.n=parseFloat(e.target.value),this.alignState(),this.sendEvent()}vTemplate(e="",t="",r=!1){let n;if(r){const r=Number.parseInt(e,10)-1;n=x$2`<decidables-spinner class="v" ?disabled=${!this.interactive} .value="${this.v[r]}" @input=${this.vInput.bind(this,r)}>
          <var class="math-var">v<sub class="subscript ${t}">${e}</sub></var>
        </decidables-spinner>`}else n=x$2`<var class="math-var v">v<sub class="subscript ${t}">${e}</sub></var>`;return n}wTemplate(e="",t="",r=!1){let n;if(r){const r=Number.parseInt(e,10)-1;n=x$2`<decidables-spinner class="w" ?disabled=${!this.interactive} min="0" max="1" step=".001" .value="${this.w[r]}" @input=${this.wInput.bind(this,r)}>
          <var class="math-var">w<sub class="subscript ${t}">${e}</sub></var>
        </decidables-spinner>`}else n=x$2`<var class="math-var w">w<sub class="subscript ${t}">${e}</sub></var>`;return n}render(){let e,t;this.alignState(),this.numeric?(e=x$2`<decidables-spinner class="u" disabled .value="${+this.u.toFixed(3)}">
          <var class="math-var">U</var>
        </decidables-spinner>`,t=x$2`<decidables-spinner class="n" ?disabled=${!this.interactive} min="1" max="4" step="1" .value="${this.n}" @input=${this.nInput.bind(this)}>
          <var class="math-var">n</var>
        </decidables-spinner>`):(e=x$2`<var class="math-var u">U</var>`,t=x$2`<var class="math-var subscript">n</var>`);const r=x$2`
      <tr>
        <td>
          ${e}<span class="equals">=</span>
        </td>
        <td>
          <div class="summation">
            <span class="tight">${t}</span>
            <span class="tight"><var class="math-greek sigma">Σ</var></span>
            <span class="tight"><var class="math-var subscript tight">i</var><span class="equals subscript">=</span><span class="subscript tight">1</span></span>
          </div>
        </td>
        <td>
          ${this.vTemplate("i","math-var",!1)}&nbsp;${this.wTemplate("i","math-var",!1)}<span class="equals">=</span>
        </td>
        <td>
          ${this.numeric?Array(this.nMax).fill().map(((e,t)=>t<this.n?x$2`<span class="addend tight" ${$({in:d,out:d})}>${0!==t?x$2`<span class="plus">+</span>`:x$2``}${this.vTemplate(t+1,"math-num",!0)}&nbsp;${this.wTemplate(t+1,"math-num",!0)}</span>`:null)):x$2`${this.vTemplate("1","math-num",!1)}&nbsp;${this.wTemplate("1","math-num",!1)}<span class="plus">+</span><span class="ellipsis">…</span><span class="plus">+</span>${this.vTemplate("n","math-var",!1)}&nbsp;${this.wTemplate("n","math-var",!1)}`}
        </td>
      </tr>`;return x$2`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${r}
          </tbody>
        </table>
      </div>`}}customElements.define("cpt-equation-vw2u",CPTEquationVW2U);class CPTEquationXAL2V extends CPTEquation{static get properties(){return{x:{attribute:"value",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},v:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.x=10,this.a=.5,this.l=2,this.alignState()}alignState(){this.v=CPTMath.xal2v(this.x,this.a,this.l)}sendEvent(){this.dispatchEvent(new CustomEvent("cpt-equation-xal2v-change",{detail:{x:this.x,a:this.a,l:this.l,v:this.v},bubbles:!0}))}xInput(e){this.x=parseFloat(e.target.value),this.alignState(),this.sendEvent()}aInput(e){this.a=parseFloat(e.target.value),this.alignState(),this.sendEvent()}lInput(e){this.l=parseFloat(e.target.value),this.alignState(),this.sendEvent()}render(){let e,t,r,n;this.alignState(),this.numeric?(e=x$2`<decidables-spinner class="x bottom" ?disabled=${!this.interactive} step="1" .value="${this.x}" @input=${this.xInput.bind(this)}>
          <var class="math-var">x</var>
        </decidables-spinner>`,t=x$2`<decidables-spinner class="a bottom" ?disabled=${!this.interactive} min="0" max="1" step=".001" .value="${this.a}" @input=${this.aInput.bind(this)}>
          <var class="math-var">α</var>
        </decidables-spinner>`,r=x$2`<decidables-spinner class="l bottom" ?disabled=${!this.interactive} min="0" step=".001" .value="${this.l}" @input=${this.lInput.bind(this)}>
          <var class="math-var">λ</var>
        </decidables-spinner>`,n=x$2`<decidables-spinner class="v bottom" disabled step=".001" .value="${+this.v.toFixed(3)}">
          <var class="math-var">v</var>
        </decidables-spinner>`):(e=x$2`<var class="math-var x">x</var>`,t=x$2`<var class="math-var a">α</var>`,r=x$2`<var class="math-var l">λ</var>`,n=x$2`<var class="math-var v">v</var>`);const i=x$2`
      <tr>
        <td rowspan="2">
          ${n}<span class="equals">=</span><span class="brace tight">{</span>
        </td>
        <td class="left">
          ${e}<sup class="exp">${t}</sup>,&emsp;if ${e}<span class="equals">&ge;</span>0
        </td>
      </tr>
      <tr>
        <td class="left">
          <span class="minus tight">−</span>${r}<span class="paren tight">(</span><span class="minus tight">−</span>${e}<span class="paren tight">)</span><sup class="exp">${t}</sup>,&emsp;if ${e}<span class="equals">&lt;</span>0
        </td>
      </tr>`;return x$2`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${i}
          </tbody>
        </table>
      </div>`}}customElements.define("cpt-equation-xal2v",CPTEquationXAL2V);class CPTExample extends ProspectableElement{static get styles(){return[super.styles,r$5`
        :host {
          ---border: var(--border, 1px solid var(---color-border));
          display: inline-block;

          margin-bottom: 1rem;
        }

        .holder {
          display: flex;
        }

        .body {
          display: flex;

          flex-wrap: wrap;

          align-items: center;
          justify-content: left;

          padding: 0.625rem;

          border: var(---border);
          border-radius: 0.25rem;
        }

        .body ::slotted(*) {
          margin: 0.625rem;
        }

        /* HACK: Sibling selectors not working with ::slotted */
        /* .body > rdk-task + sdt-response,
        ::slotted(rdk-task) + ::slotted(sdt-response) { */
        /* .body ::slotted(sdt-response) {
          margin-left: 0;
        } */

        /* HACK: Sibling selectors not working with ::slotted */
        /* .body > sdt-control + rdk-task,
        ::slotted(sdt-control) + ::slotted(rdk-task) {
          margin-left: 0;
        } */
        /* .body ::slotted(rdk-task) {
          margin-left: 0;
        } */
      `]}render(){return x$2`
      <div class="holder">
        <div class="body">
          <slot>Empty!</slot>
        </div>
      </div>`}}customElements.define("cpt-example",CPTExample);class CPTExampleHuman extends CPTExample{firstUpdated(){this.cptFit=this.querySelector("cpt-fit"),this.prospectableControl=this.querySelector("prospectable-control"),this.riskyTask=this.querySelector("risky-task"),this.prospectableResponse=this.querySelector("prospectable-response"),this.decisionSpace=this.querySelector("decision-space"),this.cptProbability=this.querySelector("cpt-probability"),this.cptValue=this.querySelector("cpt-value"),this.cptFit&&this.cptFit.addEventListener("cpt-fit-update",(e=>{this.cptProbability&&(this.cptProbability.g=e.detail.g),this.cptValue&&(this.cptValue.a=e.detail.a,this.cptValue.l=e.detail.l),this.decisionSpace&&(this.decisionSpace.a=e.detail.a,this.decisionSpace.l=e.detail.l,this.decisionSpace.g=e.detail.g)})),this.prospectableControl&&(this.prospectableControl.hasAttribute("trials")&&this.prospectableControl.addEventListener("prospectable-control-trials",(e=>{this.riskyTask&&(this.riskyTask.trials=e.detail.trials),this.prospectableResponse&&(this.prospectableResponse.trialTotal=e.detail.trials)})),this.prospectableControl.hasAttribute("duration")&&this.prospectableControl.addEventListener("prospectable-control-duration",(e=>{this.riskyTask&&(this.riskyTask.duration=e.detail.duration,this.riskyTask.iti=e.detail.duration)})),this.prospectableControl.hasAttribute("run")&&this.prospectableControl.addEventListener("prospectable-control-run",(()=>{this.riskyTask&&(this.riskyTask.running=!0)})),this.prospectableControl.hasAttribute("pause")&&this.prospectableControl.addEventListener("prospectable-control-pause",(()=>{this.riskyTask&&(this.riskyTask.running=!1)})),this.prospectableControl.hasAttribute("reset")&&this.prospectableControl.addEventListener("prospectable-control-reset",(()=>{this.riskyTask&&this.riskyTask.reset(),this.prospectableResponse&&this.prospectableResponse.reset(),this.decisionSpace&&this.decisionSpace.clear(),this.cptFit&&this.cptFit.clear()}))),this.riskyTask&&(this.prospectableResponse&&(this.prospectableResponse.trialTotal=this.riskyTask.trials),this.riskyTask.addEventListener("risky-trial-start",(e=>{this.prospectableResponse&&this.prospectableResponse.start(e.detail.xl,e.detail.xw,e.detail.pw,e.detail.xs,e.detail.gamblePayoff,e.detail.surePayoff,e.detail.better,e.detail.trial)})),this.riskyTask.addEventListener("risky-trial-end",(()=>{this.prospectableResponse&&this.prospectableResponse.stop()})),this.riskyTask.addEventListener("risky-block-end",(()=>{this.prospectableControl&&this.prospectableControl.complete()}))),this.prospectableResponse&&this.prospectableResponse.addEventListener("prospectable-response",(e=>{this.decisionSpace&&this.decisionSpace.set(e.detail.xw,e.detail.pw,e.detail.xs,e.detail.response,e.detail.trial.toString(),e.detail.trial.toString()),this.cptFit&&this.cptFit.set(e.detail.xl,e.detail.xw,e.detail.pw,e.detail.xs,e.detail.response,e.detail.trial.toString(),e.detail.trial.toString())}))}}customElements.define("cpt-example-human",CPTExampleHuman);class CPTExampleInteractive extends CPTExample{static get properties(){return{a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}constructor(){super(),this.a=.8,this.l=1.2,this.g=.8,this.xl=0,this.xw=20,this.pw=.5,this.xs=10,this.cptCalculation=null,this.cptProbability=null,this.cptSpace=null,this.cptValue=null,this.riskyChoice=null,this.decisionSpace=null}firstUpdated(){this.cptCalculation=this.querySelector("cpt-calculation"),this.cptProbability=this.querySelector("cpt-probability"),this.cptSpace=this.querySelector("cpt-space"),this.cptValue=this.querySelector("cpt-value"),this.riskyChoice=this.querySelector("risky-choice"),this.decisionSpace=this.querySelector("decision-space"),this.cptCalculation&&this.cptCalculation.addEventListener("cpt-calculation-change",(e=>{this.a=e.detail.a,this.l=e.detail.l,this.g=e.detail.g,this.xl=e.detail.xl,this.xw=e.detail.xw,this.pw=e.detail.pw,this.xs=e.detail.xs})),this.cptProbability&&(this.cptProbability.addEventListener("cpt-probability-change",(e=>{this.g=e.detail.g,this.pw=e.detail.p})),this.cptProbability.set(this.pw,this.g,"default","")),this.cptValue&&(this.cptValue.addEventListener("cpt-value-change",(e=>{this.a=e.detail.a,this.l=e.detail.l,"default"===e.detail.name?this.xs=e.detail.x:"gamble"===e.detail.name&&(this.xw=e.detail.x)})),this.cptValue.set(this.xs,this.a,this.l,"default","s"),this.cptValue.set(this.xw,this.a,this.l,"gamble","g","default")),this.riskyChoice&&this.riskyChoice.addEventListener("risky-choice-change",(e=>{this.xl=e.detail.xl,this.xw=e.detail.xw,this.pw=e.detail.pw,this.xs=e.detail.xs})),this.requestUpdate()}update(e){super.update(e),this.cptCalculation&&(this.cptCalculation.a=this.a,this.cptCalculation.l=this.l,this.cptCalculation.g=this.g,this.cptCalculation.xl=this.xl,this.cptCalculation.xw=this.xw,this.cptCalculation.pw=this.pw,this.cptCalculation.xs=this.xs),this.cptProbability&&this.cptProbability.set(this.pw,this.g,"default",""),this.cptSpace&&(this.cptSpace.a=this.a,this.cptSpace.l=this.l,this.cptSpace.g=this.g,this.cptSpace.xl=this.xl,this.cptSpace.xw=this.xw,this.cptSpace.pw=this.pw,this.cptSpace.xs=this.xs),this.cptValue&&(this.cptValue.set(this.xs,this.a,this.l,"default","s"),this.cptValue.set(this.xw,this.a,this.l,"gamble","g","default")),this.riskyChoice&&(this.riskyChoice.xl=this.xl,this.riskyChoice.xw=this.xw,this.riskyChoice.pw=this.pw,this.riskyChoice.xs=this.xs),this.decisionSpace&&(this.decisionSpace.a=this.a,this.decisionSpace.l=this.l,this.decisionSpace.g=this.g,this.decisionSpace.xl=this.xl,this.decisionSpace.xw=this.xw,this.decisionSpace.pw=this.pw,this.decisionSpace.xs=this.xs)}}customElements.define("cpt-example-interactive",CPTExampleInteractive);class CPTExampleModel extends CPTExample{static get properties(){return{a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0}}}constructor(){super(),this.a=.8,this.l=1.2,this.g=.8,this.xl=0,this.xw=20,this.pw=.5,this.xs=10,this.cptCalculation=null,this.cptProbability=null,this.cptValue=null,this.prospectableControl=null,this.prospectableResponse=null,this.decisionSpace=null,this.riskyTask=null}firstUpdated(){this.cptCalculation=this.querySelector("cpt-calculation"),this.cptProbability=this.querySelector("cpt-probability"),this.cptValue=this.querySelector("cpt-value"),this.prospectableControl=this.querySelector("prospectable-control"),this.prospectableResponse=this.querySelector("prospectable-response"),this.decisionSpace=this.querySelector("decision-space"),this.riskyTask=this.querySelector("risky-task"),this.cptProbability&&(this.cptProbability.addEventListener("cpt-probability-change",(e=>{this.g=e.detail.g})),this.cptProbability.addEventListener("prospectable-response",(e=>{this.prospectableResponse&&this.prospectableResponse.responded(e.detail.response),this.decisionSpace&&this.decisionSpace.set(e.detail.xw,e.detail.pw,e.detail.xs,e.detail.response,e.detail.trial.toString(),e.detail.trial.toString())}))),this.cptValue&&(this.cptValue.addEventListener("cpt-value-change",(e=>{this.a=e.detail.a,this.l=e.detail.l})),this.cptProbability||this.cptValue.addEventListener("prospectable-response",(e=>{this.prospectableResponse&&this.prospectableResponse.responded(e.detail.response),this.decisionSpace&&this.decisionSpace.set(e.detail.xw,e.detail.pw,e.detail.xs,e.detail.response,e.detail.trial.toString(),e.detail.trial.toString())}))),this.prospectableControl&&(this.prospectableControl.hasAttribute("trials")&&this.prospectableControl.addEventListener("prospectable-control-trials",(e=>{this.riskyTask&&(this.riskyTask.trials=e.detail.trials),this.prospectableResponse&&(this.prospectableResponse.trialTotal=e.detail.trials)})),this.prospectableControl.hasAttribute("duration")&&this.prospectableControl.addEventListener("prospectable-control-duration",(e=>{this.riskyTask&&(this.riskyTask.duration=e.detail.duration,this.riskyTask.iti=e.detail.duration)})),this.prospectableControl.hasAttribute("run")&&this.prospectableControl.addEventListener("prospectable-control-run",(()=>{this.cptProbability&&this.cptProbability.resumeTrial(),this.cptValue&&this.cptValue.resumeTrial(),this.riskyTask&&(this.riskyTask.running=!0)})),this.prospectableControl.hasAttribute("pause")&&this.prospectableControl.addEventListener("prospectable-control-pause",(()=>{this.cptProbability&&this.cptProbability.pauseTrial(),this.cptValue&&this.cptValue.pauseTrial(),this.riskyTask&&(this.riskyTask.running=!1)})),this.prospectableControl.hasAttribute("reset")&&this.prospectableControl.addEventListener("prospectable-control-reset",(()=>{this.cptProbability&&this.cptProbability.clear(),this.cptValue&&this.cptValue.clear(),this.riskyTask&&this.riskyTask.reset(),this.prospectableResponse&&this.prospectableResponse.reset(),this.decisionSpace&&this.decisionSpace.clear()}))),this.riskyTask&&(this.prospectableResponse&&(this.prospectableResponse.trialTotal=this.riskyTask.trials),this.riskyTask.addEventListener("risky-trial-start",(e=>{this.prospectableResponse&&this.prospectableResponse.start(e.detail.xl,e.detail.xw,e.detail.pw,e.detail.xs,e.detail.gamblePayoff,e.detail.surePayoff,e.detail.better,e.detail.trial),this.vw=CPTMath.xal2v(this.xw,this.a,this.l),this.vl=CPTMath.xal2v(this.xl,this.a,this.l),this.ww=CPTMath.pg2w(this.pw,this.g),this.wl=1-this.ww,this.vs=CPTMath.xal2v(this.xs,this.a,this.l),this.ug=this.vw*this.ww+this.vl*this.wl,this.us=this.vs;const t=CPTMath.xal2v(e.detail.xw,this.a,this.l)*CPTMath.pg2w(e.detail.pw,this.g)+CPTMath.xal2v(e.detail.xl,this.a,this.l)*(1-CPTMath.pg2w(e.detail.pw,this.g))>CPTMath.xal2v(e.detail.xs,this.a,this.l)?"gamble":"sure";this.cptProbability&&this.cptProbability.trial(e.detail.xl,e.detail.xw,e.detail.pw,e.detail.xs,e.detail.trial,t),this.cptValue&&this.cptValue.trial(e.detail.xl,e.detail.xw,e.detail.pw,e.detail.xs,e.detail.trial,t)})),this.riskyTask.addEventListener("risky-trial-end",(()=>{this.prospectableResponse&&this.prospectableResponse.stop()})),this.riskyTask.addEventListener("risky-block-end",(()=>{this.prospectableControl&&this.prospectableControl.complete()}))),this.requestUpdate()}update(e){super.update(e),this.cptCalculation&&(this.cptCalculation.a=this.a,this.cptCalculation.l=this.l,this.cptCalculation.g=this.g),this.cptProbability&&(this.cptProbability.g=this.g),this.cptValue&&(this.cptValue.a=this.a,this.cptValue.l=this.l),this.decisionSpace&&(this.decisionSpace.a=this.a,this.decisionSpace.l=this.l,this.decisionSpace.g=this.g)}}customElements.define("cpt-example-model",CPTExampleModel);
//# sourceMappingURL=page.js.map